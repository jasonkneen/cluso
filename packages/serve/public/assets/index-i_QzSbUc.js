const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./angular-html-CU67Zn6k.js","./html-GMplVEZG.js","./javascript-wDzz0qaB.js","./css-DPfMkruS.js","./angular-ts-BwZT4LLn.js","./scss-OYdSNvt2.js","./apl-dKokRX4l.js","./xml-sdJ4AIDG.js","./java-CylS5w8V.js","./json-Cp-IABpG.js","./astro-CbQHKStN.js","./typescript-BPQ3VLAy.js","./postcss-CXtECtnM.js","./tsx-COt5Ahok.js","./blade-DVc8C-J4.js","./html-derivative-BFtXZ54Q.js","./sql-BLtJtn59.js","./bsl-BO_Y6i37.js","./sdbl-DVxCFoDh.js","./cairo-KRGpt6FW.js","./python-B6aJPvgy.js","./cobol-nwyudZeR.js","./coffee-Ch7k5sss.js","./cpp-CofmeUqb.js","./regexp-CDVJQ6XC.js","./glsl-DplSGwfg.js","./c-BIGW1oBm.js","./crystal-tKQVLTB8.js","./shellscript-Yzrsuije.js","./edge-BkV0erSs.js","./elixir-CDX3lj18.js","./elm-DbKCFpqz.js","./erb-BOJIQeun.js","./ruby-BvKwtOVI.js","./haml-B8DHNrY2.js","./graphql-ChdNCCLP.js","./jsx-g9-lgVsj.js","./lua-BbnMAYS6.js","./yaml-Buea-lGh.js","./erlang-DsQrWhSR.js","./markdown-Cvjx9yec.js","./fortran-fixed-form-BZjJHVRy.js","./fortran-free-form-D22FLkUw.js","./fsharp-CXgrBDvD.js","./gdresource-B7Tvp0Sc.js","./gdshader-DkwncUOv.js","./gdscript-DTMYz4Jt.js","./git-commit-F4YmCXRG.js","./diff-D97Zzqfu.js","./git-rebase-r7XF79zn.js","./glimmer-js-Rg0-pVw9.js","./glimmer-ts-U6CK756n.js","./hack-CaT9iCJl.js","./handlebars-BL8al0AC.js","./http-jrhK8wxY.js","./hurl-irOxFIW8.js","./csv-fuZLfV_i.js","./hxml-Bvhsp5Yf.js","./haxe-CzTSHFRz.js","./jinja-4LBKfQ-Z.js","./jison-wvAkD_A8.js","./julia-C8NyazO9.js","./r-DiinP2Uv.js","./latex-BdAV_C_H.js","./tex-CxkMU7Pf.js","./liquid-DYVedYrR.js","./marko-CPi9NSCl.js","./less-B1dDrJ26.js","./mdc-DUICxH0z.js","./nginx-DknmC5AR.js","./nim-CVrawwO9.js","./perl-C0TMdlhV.js","./php-CDn_0X-4.js","./pug-CGlum2m_.js","./qml-3beO22l8.js","./razor-CE9lU5zL.js","./csharp-K5feNrxe.js","./rst-B0xPkSld.js","./cmake-D1j8_8rp.js","./sas-cz2c8ADy.js","./shaderlab-Dg9Lc6iA.js","./hlsl-D3lLCCz7.js","./shellsession-BADoaaVG.js","./soy-Brmx7dQM.js","./sparql-rVzFXLq3.js","./turtle-BsS91CYL.js","./stata-BH5u7GGu.js","./svelte-3Dk4HxPD.js","./templ-W15q3VgB.js","./go-Dn2_MT6a.js","./ts-tags-zn1MmPIZ.js","./twig-CO9l9SDP.js","./vue-DnHKYNfI.js","./vue-html-CChd_i61.js","./vue-vine-8moa0y9V.js","./stylus-BEDo0Tqx.js","./xsl-CtQFsRM5.js","./katex-CcXVtVH8.css"])))=>i.map(i=>d[i]);
var xue=Object.defineProperty;var wue=(e,t,n)=>t in e?xue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ze=(e,t,n)=>wue(e,typeof t!="symbol"?t+"":t,n);function Eue(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Cm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var E3={exports:{}},Py={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xD;function _ue(){if(xD)return Py;xD=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,o){var i=null;if(o!==void 0&&(i=""+o),s.key!==void 0&&(i=""+s.key),"key"in s){o={};for(var a in s)a!=="key"&&(o[a]=s[a])}else o=s;return s=o.ref,{$$typeof:e,type:r,key:i,ref:s!==void 0?s:null,props:o}}return Py.Fragment=t,Py.jsx=n,Py.jsxs=n,Py}var wD;function Sue(){return wD||(wD=1,E3.exports=_ue()),E3.exports}var h=Sue(),_3={exports:{}},or={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ED;function Tue(){if(ED)return or;ED=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),i=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;function g(te){return te===null||typeof te!="object"?null:(te=m&&te[m]||te["@@iterator"],typeof te=="function"?te:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function E(te,oe,Q){this.props=te,this.context=oe,this.refs=x,this.updater=Q||y}E.prototype.isReactComponent={},E.prototype.setState=function(te,oe){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,oe,"setState")},E.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function T(){}T.prototype=E.prototype;function k(te,oe,Q){this.props=te,this.context=oe,this.refs=x,this.updater=Q||y}var I=k.prototype=new T;I.constructor=k,v(I,E.prototype),I.isPureReactComponent=!0;var O=Array.isArray;function M(){}var P={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function V(te,oe,Q){var Te=Q.ref;return{$$typeof:e,type:te,key:oe,ref:Te!==void 0?Te:null,props:Q}}function U(te,oe){return V(te.type,oe,te.props)}function z(te){return typeof te=="object"&&te!==null&&te.$$typeof===e}function H(te){var oe={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(Q){return oe[Q]})}var F=/\/+/g;function G(te,oe){return typeof te=="object"&&te!==null&&te.key!=null?H(""+te.key):oe.toString(36)}function X(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(M,M):(te.status="pending",te.then(function(oe){te.status==="pending"&&(te.status="fulfilled",te.value=oe)},function(oe){te.status==="pending"&&(te.status="rejected",te.reason=oe)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function J(te,oe,Q,Te,ge){var Ce=typeof te;(Ce==="undefined"||Ce==="boolean")&&(te=null);var fe=!1;if(te===null)fe=!0;else switch(Ce){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(te.$$typeof){case e:case t:fe=!0;break;case u:return fe=te._init,J(fe(te._payload),oe,Q,Te,ge)}}if(fe)return ge=ge(te),fe=Te===""?"."+G(te,0):Te,O(ge)?(Q="",fe!=null&&(Q=fe.replace(F,"$&/")+"/"),J(ge,oe,Q,"",function(Re){return Re})):ge!=null&&(z(ge)&&(ge=U(ge,Q+(ge.key==null||te&&te.key===ge.key?"":(""+ge.key).replace(F,"$&/")+"/")+fe)),oe.push(ge)),1;fe=0;var Fe=Te===""?".":Te+":";if(O(te))for(var De=0;De<te.length;De++)Te=te[De],Ce=Fe+G(Te,De),fe+=J(Te,oe,Q,Ce,ge);else if(De=g(te),typeof De=="function")for(te=De.call(te),De=0;!(Te=te.next()).done;)Te=Te.value,Ce=Fe+G(Te,De++),fe+=J(Te,oe,Q,Ce,ge);else if(Ce==="object"){if(typeof te.then=="function")return J(X(te),oe,Q,Te,ge);throw oe=String(te),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return fe}function ee(te,oe,Q){if(te==null)return te;var Te=[],ge=0;return J(te,Te,"","",function(Ce){return oe.call(Q,Ce,ge++)}),Te}function re(te){if(te._status===-1){var oe=te._result;oe=oe(),oe.then(function(Q){(te._status===0||te._status===-1)&&(te._status=1,te._result=Q)},function(Q){(te._status===0||te._status===-1)&&(te._status=2,te._result=Q)}),te._status===-1&&(te._status=0,te._result=oe)}if(te._status===1)return te._result.default;throw te._result}var ie=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)},Z={map:ee,forEach:function(te,oe,Q){ee(te,function(){oe.apply(this,arguments)},Q)},count:function(te){var oe=0;return ee(te,function(){oe++}),oe},toArray:function(te){return ee(te,function(oe){return oe})||[]},only:function(te){if(!z(te))throw Error("React.Children.only expected to receive a single React element child.");return te}};return or.Activity=f,or.Children=Z,or.Component=E,or.Fragment=n,or.Profiler=s,or.PureComponent=k,or.StrictMode=r,or.Suspense=l,or.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,or.__COMPILER_RUNTIME={__proto__:null,c:function(te){return P.H.useMemoCache(te)}},or.cache=function(te){return function(){return te.apply(null,arguments)}},or.cacheSignal=function(){return null},or.cloneElement=function(te,oe,Q){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var Te=v({},te.props),ge=te.key;if(oe!=null)for(Ce in oe.key!==void 0&&(ge=""+oe.key),oe)!j.call(oe,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&oe.ref===void 0||(Te[Ce]=oe[Ce]);var Ce=arguments.length-2;if(Ce===1)Te.children=Q;else if(1<Ce){for(var fe=Array(Ce),Fe=0;Fe<Ce;Fe++)fe[Fe]=arguments[Fe+2];Te.children=fe}return V(te.type,ge,Te)},or.createContext=function(te){return te={$$typeof:i,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:o,_context:te},te},or.createElement=function(te,oe,Q){var Te,ge={},Ce=null;if(oe!=null)for(Te in oe.key!==void 0&&(Ce=""+oe.key),oe)j.call(oe,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(ge[Te]=oe[Te]);var fe=arguments.length-2;if(fe===1)ge.children=Q;else if(1<fe){for(var Fe=Array(fe),De=0;De<fe;De++)Fe[De]=arguments[De+2];ge.children=Fe}if(te&&te.defaultProps)for(Te in fe=te.defaultProps,fe)ge[Te]===void 0&&(ge[Te]=fe[Te]);return V(te,Ce,ge)},or.createRef=function(){return{current:null}},or.forwardRef=function(te){return{$$typeof:a,render:te}},or.isValidElement=z,or.lazy=function(te){return{$$typeof:u,_payload:{_status:-1,_result:te},_init:re}},or.memo=function(te,oe){return{$$typeof:c,type:te,compare:oe===void 0?null:oe}},or.startTransition=function(te){var oe=P.T,Q={};P.T=Q;try{var Te=te(),ge=P.S;ge!==null&&ge(Q,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(M,ie)}catch(Ce){ie(Ce)}finally{oe!==null&&Q.types!==null&&(oe.types=Q.types),P.T=oe}},or.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},or.use=function(te){return P.H.use(te)},or.useActionState=function(te,oe,Q){return P.H.useActionState(te,oe,Q)},or.useCallback=function(te,oe){return P.H.useCallback(te,oe)},or.useContext=function(te){return P.H.useContext(te)},or.useDebugValue=function(){},or.useDeferredValue=function(te,oe){return P.H.useDeferredValue(te,oe)},or.useEffect=function(te,oe){return P.H.useEffect(te,oe)},or.useEffectEvent=function(te){return P.H.useEffectEvent(te)},or.useId=function(){return P.H.useId()},or.useImperativeHandle=function(te,oe,Q){return P.H.useImperativeHandle(te,oe,Q)},or.useInsertionEffect=function(te,oe){return P.H.useInsertionEffect(te,oe)},or.useLayoutEffect=function(te,oe){return P.H.useLayoutEffect(te,oe)},or.useMemo=function(te,oe){return P.H.useMemo(te,oe)},or.useOptimistic=function(te,oe){return P.H.useOptimistic(te,oe)},or.useReducer=function(te,oe,Q){return P.H.useReducer(te,oe,Q)},or.useRef=function(te){return P.H.useRef(te)},or.useState=function(te){return P.H.useState(te)},or.useSyncExternalStore=function(te,oe,Q){return P.H.useSyncExternalStore(te,oe,Q)},or.useTransition=function(){return P.H.useTransition()},or.version="19.2.1",or}var _D;function aw(){return _D||(_D=1,_3.exports=Tue()),_3.exports}var w=aw();const Me=Cm(w),rR=Eue({__proto__:null,default:Me},[w]);var S3={exports:{}},Ly={},T3={exports:{}},C3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SD;function Cue(){return SD||(SD=1,(function(e){function t(J,ee){var re=J.length;J.push(ee);e:for(;0<re;){var ie=re-1>>>1,Z=J[ie];if(0<s(Z,ee))J[ie]=ee,J[re]=Z,re=ie;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ee=J[0],re=J.pop();if(re!==ee){J[0]=re;e:for(var ie=0,Z=J.length,te=Z>>>1;ie<te;){var oe=2*(ie+1)-1,Q=J[oe],Te=oe+1,ge=J[Te];if(0>s(Q,re))Te<Z&&0>s(ge,Q)?(J[ie]=ge,J[Te]=re,ie=Te):(J[ie]=Q,J[oe]=re,ie=oe);else if(Te<Z&&0>s(ge,re))J[ie]=ge,J[Te]=re,ie=Te;else break e}}return ee}function s(J,ee){var re=J.sortIndex-ee.sortIndex;return re!==0?re:J.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,f=null,m=3,g=!1,y=!1,v=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function I(J){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=J)r(c),ee.sortIndex=ee.expirationTime,t(l,ee);else break;ee=n(c)}}function O(J){if(v=!1,I(J),!y)if(n(l)!==null)y=!0,M||(M=!0,H());else{var ee=n(c);ee!==null&&X(O,ee.startTime-J)}}var M=!1,P=-1,j=5,V=-1;function U(){return x?!0:!(e.unstable_now()-V<j)}function z(){if(x=!1,M){var J=e.unstable_now();V=J;var ee=!0;try{e:{y=!1,v&&(v=!1,T(P),P=-1),g=!0;var re=m;try{t:{for(I(J),f=n(l);f!==null&&!(f.expirationTime>J&&U());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,m=f.priorityLevel;var Z=ie(f.expirationTime<=J);if(J=e.unstable_now(),typeof Z=="function"){f.callback=Z,I(J),ee=!0;break t}f===n(l)&&r(l),I(J)}else r(l);f=n(l)}if(f!==null)ee=!0;else{var te=n(c);te!==null&&X(O,te.startTime-J),ee=!1}}break e}finally{f=null,m=re,g=!1}ee=void 0}}finally{ee?H():M=!1}}}var H;if(typeof k=="function")H=function(){k(z)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,G=F.port2;F.port1.onmessage=z,H=function(){G.postMessage(null)}}else H=function(){E(z,0)};function X(J,ee){P=E(function(){J(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(J){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var re=m;m=ee;try{return J()}finally{m=re}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(J,ee){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var re=m;m=J;try{return ee()}finally{m=re}},e.unstable_scheduleCallback=function(J,ee,re){var ie=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ie+re:ie):re=ie,J){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=re+Z,J={id:u++,callback:ee,priorityLevel:J,startTime:re,expirationTime:Z,sortIndex:-1},re>ie?(J.sortIndex=re,t(c,J),n(l)===null&&J===n(c)&&(v?(T(P),P=-1):v=!0,X(O,re-ie))):(J.sortIndex=Z,t(l,J),y||g||(y=!0,M||(M=!0,H()))),J},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(J){var ee=m;return function(){var re=m;m=ee;try{return J.apply(this,arguments)}finally{m=re}}}})(C3)),C3}var TD;function kue(){return TD||(TD=1,T3.exports=Cue()),T3.exports}var k3={exports:{}},ua={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CD;function Aue(){if(CD)return ua;CD=1;var e=aw();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(l,c,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:f==null?null:""+f,children:l,containerInfo:c,implementation:u}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return ua.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ua.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return o(l,c,null,u)},ua.flushSync=function(l){var c=i.T,u=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=c,r.p=u,r.d.f()}},ua.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},ua.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ua.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:m,fetchPriority:g}):u==="script"&&r.d.X(l,{crossOrigin:f,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},ua.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},ua.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},ua.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},ua.requestFormReset=function(l){r.d.r(l)},ua.unstable_batchedUpdates=function(l,c){return l(c)},ua.useFormState=function(l,c,u){return i.H.useFormState(l,c,u)},ua.useFormStatus=function(){return i.H.useHostTransitionStatus()},ua.version="19.2.1",ua}var kD;function nq(){if(kD)return k3.exports;kD=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),k3.exports=Aue(),k3.exports}var AD;function Nue(){if(AD)return Ly;AD=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=kue(),t=aw(),n=nq();function r(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function o(d){var p=d,b=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(b=p.return),d=p.return;while(d)}return p.tag===3?b:null}function i(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function a(d){if(d.tag===31){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function l(d){if(o(d)!==d)throw Error(r(188))}function c(d){var p=d.alternate;if(!p){if(p=o(d),p===null)throw Error(r(188));return p!==d?null:d}for(var b=d,_=p;;){var A=b.return;if(A===null)break;var R=A.alternate;if(R===null){if(_=A.return,_!==null){b=_;continue}break}if(A.child===R.child){for(R=A.child;R;){if(R===b)return l(A),d;if(R===_)return l(A),p;R=R.sibling}throw Error(r(188))}if(b.return!==_.return)b=A,_=R;else{for(var K=!1,ae=A.child;ae;){if(ae===b){K=!0,b=A,_=R;break}if(ae===_){K=!0,_=A,b=R;break}ae=ae.sibling}if(!K){for(ae=R.child;ae;){if(ae===b){K=!0,b=R,_=A;break}if(ae===_){K=!0,_=R,b=A;break}ae=ae.sibling}if(!K)throw Error(r(189))}}if(b.alternate!==_)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?d:p}function u(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d;for(d=d.child;d!==null;){if(p=u(d),p!==null)return p;d=d.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),k=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function H(d){return d===null||typeof d!="object"?null:(d=z&&d[z]||d["@@iterator"],typeof d=="function"?d:null)}var F=Symbol.for("react.client.reference");function G(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===F?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case v:return"Fragment";case E:return"Profiler";case x:return"StrictMode";case O:return"Suspense";case M:return"SuspenseList";case V:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case y:return"Portal";case k:return d.displayName||"Context";case T:return(d._context.displayName||"Context")+".Consumer";case I:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case P:return p=d.displayName||null,p!==null?p:G(d.type)||"Memo";case j:p=d._payload,d=d._init;try{return G(d(p))}catch{}}return null}var X=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ie=[],Z=-1;function te(d){return{current:d}}function oe(d){0>Z||(d.current=ie[Z],ie[Z]=null,Z--)}function Q(d,p){Z++,ie[Z]=d.current,d.current=p}var Te=te(null),ge=te(null),Ce=te(null),fe=te(null);function Fe(d,p){switch(Q(Ce,p),Q(ge,d),Q(Te,null),p.nodeType){case 9:case 11:d=(d=p.documentElement)&&(d=d.namespaceURI)?HO(d):0;break;default:if(d=p.tagName,p=p.namespaceURI)p=HO(p),d=VO(p,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}oe(Te),Q(Te,d)}function De(){oe(Te),oe(ge),oe(Ce)}function Re(d){d.memoizedState!==null&&Q(fe,d);var p=Te.current,b=VO(p,d.type);p!==b&&(Q(ge,d),Q(Te,b))}function tt(d){ge.current===d&&(oe(Te),oe(ge)),fe.current===d&&(oe(fe),Ry._currentValue=re)}var de,nt;function ot(d){if(de===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);de=p&&p[1]||"",nt=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+d+nt}var Ut=!1;function Vt(d,p){if(!d||Ut)return"";Ut=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(p){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Xe){var Ke=Xe}Reflect.construct(d,[],dt)}else{try{dt.call()}catch(Xe){Ke=Xe}d.call(dt.prototype)}}else{try{throw Error()}catch(Xe){Ke=Xe}(dt=d())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Xe){if(Xe&&Ke&&typeof Xe.stack=="string")return[Xe.stack,Ke.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=_.DetermineComponentFrameRoot(),K=R[0],ae=R[1];if(K&&ae){var ke=K.split(`
`),Ye=ae.split(`
`);for(A=_=0;_<ke.length&&!ke[_].includes("DetermineComponentFrameRoot");)_++;for(;A<Ye.length&&!Ye[A].includes("DetermineComponentFrameRoot");)A++;if(_===ke.length||A===Ye.length)for(_=ke.length-1,A=Ye.length-1;1<=_&&0<=A&&ke[_]!==Ye[A];)A--;for(;1<=_&&0<=A;_--,A--)if(ke[_]!==Ye[A]){if(_!==1||A!==1)do if(_--,A--,0>A||ke[_]!==Ye[A]){var st=`
`+ke[_].replace(" at new "," at ");return d.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",d.displayName)),st}while(1<=_&&0<=A);break}}}finally{Ut=!1,Error.prepareStackTrace=b}return(b=d?d.displayName||d.name:"")?ot(b):""}function Dt(d,p){switch(d.tag){case 26:case 27:case 5:return ot(d.type);case 16:return ot("Lazy");case 13:return d.child!==p&&p!==null?ot("Suspense Fallback"):ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return Vt(d.type,!1);case 11:return Vt(d.type.render,!1);case 1:return Vt(d.type,!0);case 31:return ot("Activity");default:return""}}function en(d){try{var p="",b=null;do p+=Dt(d,b),b=d,d=d.return;while(d);return p}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}var xt=Object.prototype.hasOwnProperty,pe=e.unstable_scheduleCallback,Ne=e.unstable_cancelCallback,$e=e.unstable_shouldYield,Je=e.unstable_requestPaint,Le=e.unstable_now,Ve=e.unstable_getCurrentPriorityLevel,_e=e.unstable_ImmediatePriority,Y=e.unstable_UserBlockingPriority,L=e.unstable_NormalPriority,B=e.unstable_LowPriority,ce=e.unstable_IdlePriority,we=e.log,ze=e.unstable_setDisableYieldValue,Be=null,ut=null;function an(d){if(typeof we=="function"&&ze(d),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(Be,d)}catch{}}var zt=Math.clz32?Math.clz32:Va,dn=Math.log,on=Math.LN2;function Va(d){return d>>>=0,d===0?32:31-(dn(d)/on|0)|0}var Nn=256,Qn=262144,wt=4194304;function sn(d){var p=d&42;if(p!==0)return p;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function ye(d,p,b){var _=d.pendingLanes;if(_===0)return 0;var A=0,R=d.suspendedLanes,K=d.pingedLanes;d=d.warmLanes;var ae=_&134217727;return ae!==0?(_=ae&~R,_!==0?A=sn(_):(K&=ae,K!==0?A=sn(K):b||(b=ae&~d,b!==0&&(A=sn(b))))):(ae=_&~R,ae!==0?A=sn(ae):K!==0?A=sn(K):b||(b=_&~d,b!==0&&(A=sn(b)))),A===0?0:p!==0&&p!==A&&(p&R)===0&&(R=A&-A,b=p&-p,R>=b||R===32&&(b&4194048)!==0)?p:A}function Ue(d,p){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&p)===0}function ht(d,p){switch(d){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zt(){var d=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),d}function hr(d){for(var p=[],b=0;31>b;b++)p.push(d);return p}function Yn(d,p){d.pendingLanes|=p,p!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Rt(d,p,b,_,A,R){var K=d.pendingLanes;d.pendingLanes=b,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=b,d.entangledLanes&=b,d.errorRecoveryDisabledLanes&=b,d.shellSuspendCounter=0;var ae=d.entanglements,ke=d.expirationTimes,Ye=d.hiddenUpdates;for(b=K&~b;0<b;){var st=31-zt(b),dt=1<<st;ae[st]=0,ke[st]=-1;var Ke=Ye[st];if(Ke!==null)for(Ye[st]=null,st=0;st<Ke.length;st++){var Xe=Ke[st];Xe!==null&&(Xe.lane&=-536870913)}b&=~dt}_!==0&&Bt(d,_,0),R!==0&&A===0&&d.tag!==0&&(d.suspendedLanes|=R&~(K&~p))}function Bt(d,p,b){d.pendingLanes|=p,d.suspendedLanes&=~p;var _=31-zt(p);d.entangledLanes|=p,d.entanglements[_]=d.entanglements[_]|1073741824|b&261930}function fn(d,p){var b=d.entangledLanes|=p;for(d=d.entanglements;b;){var _=31-zt(b),A=1<<_;A&p|d[_]&p&&(d[_]|=p),b&=~A}}function In(d,p){var b=p&-p;return b=(b&42)!==0?1:Pr(b),(b&(d.suspendedLanes|p))!==0?0:b}function Pr(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function bo(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Vs(){var d=ee.p;return d!==0?d:(d=window.event,d===void 0?32:hD(d.type))}function yo(d,p){var b=ee.p;try{return ee.p=d,p()}finally{ee.p=b}}var Jr=Math.random().toString(36).slice(2),pr="__reactFiber$"+Jr,Io="__reactProps$"+Jr,at="__reactContainer$"+Jr,rt="__reactEvents$"+Jr,mt="__reactListeners$"+Jr,Ht="__reactHandles$"+Jr,Ur="__reactResources$"+Jr,ks="__reactMarker$"+Jr;function Kn(d){delete d[pr],delete d[Io],delete d[rt],delete d[mt],delete d[Ht]}function Hr(d){var p=d[pr];if(p)return p;for(var b=d.parentNode;b;){if(p=b[at]||b[pr]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(d=JO(d);d!==null;){if(b=d[pr])return b;d=JO(d)}return p}d=b,b=d.parentNode}return null}function ia(d){if(d=d[pr]||d[at]){var p=d.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return d}return null}function kt(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d.stateNode;throw Error(r(33))}function Bn(d){var p=d[Ur];return p||(p=d[Ur]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function gt(d){d[ks]=!0}var Xr=new Set,Ro={};function nr(d,p){ft(d,p),ft(d+"Capture",p)}function ft(d,p){for(Ro[d]=p,d=0;d<p.length;d++)Xr.add(p[d])}var Nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hn={},xn={};function Tr(d){return xt.call(xn,d)?!0:xt.call(hn,d)?!1:Nt.test(d)?xn[d]=!0:(hn[d]=!0,!1)}function qs(d,p,b){if(Tr(p))if(b===null)d.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":d.removeAttribute(p);return;case"boolean":var _=p.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){d.removeAttribute(p);return}}d.setAttribute(p,""+b)}}function co(d,p,b){if(b===null)d.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(p);return}d.setAttribute(p,""+b)}}function Wo(d,p,b,_){if(_===null)d.removeAttribute(b);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(b);return}d.setAttributeNS(p,b,""+_)}}function zr(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function vo(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Vm(d,p,b){var _=Object.getOwnPropertyDescriptor(d.constructor.prototype,p);if(!d.hasOwnProperty(p)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var A=_.get,R=_.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return A.call(this)},set:function(K){b=""+K,R.call(this,K)}}),Object.defineProperty(d,p,{enumerable:_.enumerable}),{getValue:function(){return b},setValue:function(K){b=""+K},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function Nu(d){if(!d._valueTracker){var p=vo(d)?"checked":"value";d._valueTracker=Vm(d,p,""+d[p])}}function K0(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var b=p.getValue(),_="";return d&&(_=vo(d)?d.checked?"true":"false":d.value),d=_,d!==b?(p.setValue(d),!0):!1}function Md(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var ih=/[\n"\\]/g;function Vi(d){return d.replace(ih,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function El(d,p,b,_,A,R,K,ae){d.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?d.type=K:d.removeAttribute("type"),p!=null?K==="number"?(p===0&&d.value===""||d.value!=p)&&(d.value=""+zr(p)):d.value!==""+zr(p)&&(d.value=""+zr(p)):K!=="submit"&&K!=="reset"||d.removeAttribute("value"),p!=null?Bc(d,K,zr(p)):b!=null?Bc(d,K,zr(b)):_!=null&&d.removeAttribute("value"),A==null&&R!=null&&(d.defaultChecked=!!R),A!=null&&(d.checked=A&&typeof A!="function"&&typeof A!="symbol"),ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?d.name=""+zr(ae):d.removeAttribute("name")}function rc(d,p,b,_,A,R,K,ae){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(d.type=R),p!=null||b!=null){if(!(R!=="submit"&&R!=="reset"||p!=null)){Nu(d);return}b=b!=null?""+zr(b):"",p=p!=null?""+zr(p):b,ae||p===d.value||(d.value=p),d.defaultValue=p}_=_??A,_=typeof _!="function"&&typeof _!="symbol"&&!!_,d.checked=ae?d.checked:!!_,d.defaultChecked=!!_,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(d.name=K),Nu(d)}function Bc(d,p,b){p==="number"&&Md(d.ownerDocument)===d||d.defaultValue===""+b||(d.defaultValue=""+b)}function Yo(d,p,b,_){if(d=d.options,p){p={};for(var A=0;A<b.length;A++)p["$"+b[A]]=!0;for(b=0;b<d.length;b++)A=p.hasOwnProperty("$"+d[b].value),d[b].selected!==A&&(d[b].selected=A),A&&_&&(d[b].defaultSelected=!0)}else{for(b=""+zr(b),p=null,A=0;A<d.length;A++){if(d[A].value===b){d[A].selected=!0,_&&(d[A].defaultSelected=!0);return}p!==null||d[A].disabled||(p=d[A])}p!==null&&(p.selected=!0)}}function Od(d,p,b){if(p!=null&&(p=""+zr(p),p!==d.value&&(d.value=p),b==null)){d.defaultValue!==p&&(d.defaultValue=p);return}d.defaultValue=b!=null?""+zr(b):""}function ah(d,p,b,_){if(p==null){if(_!=null){if(b!=null)throw Error(r(92));if(X(_)){if(1<_.length)throw Error(r(93));_=_[0]}b=_}b==null&&(b=""),p=b}b=zr(p),d.defaultValue=b,_=d.textContent,_===b&&_!==""&&_!==null&&(d.value=_),Nu(d)}function Pn(d,p){if(p){var b=d.firstChild;if(b&&b===d.lastChild&&b.nodeType===3){b.nodeValue=p;return}}d.textContent=p}var Z0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uo(d,p,b){var _=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?_?d.setProperty(p,""):p==="float"?d.cssFloat="":d[p]="":_?d.setProperty(p,b):typeof b!="number"||b===0||Z0.has(p)?p==="float"?d.cssFloat=b:d[p]=(""+b).trim():d[p]=b+"px"}function Gr(d,p,b){if(p!=null&&typeof p!="object")throw Error(r(62));if(d=d.style,b!=null){for(var _ in b)!b.hasOwnProperty(_)||p!=null&&p.hasOwnProperty(_)||(_.indexOf("--")===0?d.setProperty(_,""):_==="float"?d.cssFloat="":d[_]="");for(var A in p)_=p[A],p.hasOwnProperty(A)&&b[A]!==_&&uo(d,A,_)}else for(var R in p)p.hasOwnProperty(R)&&uo(d,R,p[R])}function Iu(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ru=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(d){return Ru.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}function Lt(){}var Kt=null;function Zn(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var cr=null,Fs=null;function aa(d){var p=ia(d);if(p&&(d=p.stateNode)){var b=d[Io]||null;e:switch(d=p.stateNode,p.type){case"input":if(El(d,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=d;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Vi(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var _=b[p];if(_!==d&&_.form===d.form){var A=_[Io]||null;if(!A)throw Error(r(90));El(_,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(p=0;p<b.length;p++)_=b[p],_.form===d.form&&K0(_)}break e;case"textarea":Od(d,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Yo(d,!!b.multiple,p,!1)}}}var lh=!1;function ch(d,p,b){if(lh)return d(p,b);lh=!0;try{var _=d(p);return _}finally{if(lh=!1,(cr!==null||Fs!==null)&&(PE(),cr&&(p=cr,d=Fs,Fs=cr=null,aa(p),d)))for(p=0;p<d.length;p++)aa(d[p])}}function uh(d,p){var b=d.stateNode;if(b===null)return null;var _=b[Io]||null;if(_===null)return null;b=_[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(d=d.type,_=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!_;break e;default:d=!1}if(d)return null;if(b&&typeof b!="function")throw Error(r(231,p,typeof b));return b}var Sl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qm=!1;if(Sl)try{var J0={};Object.defineProperty(J0,"passive",{get:function(){qm=!0}}),window.addEventListener("test",J0,J0),window.removeEventListener("test",J0,J0)}catch{qm=!1}var Tl=null,X0=null,Cl=null;function kl(){if(Cl)return Cl;var d,p=X0,b=p.length,_,A="value"in Tl?Tl.value:Tl.textContent,R=A.length;for(d=0;d<b&&p[d]===A[d];d++);var K=b-d;for(_=1;_<=K&&p[b-_]===A[R-_];_++);return Cl=A.slice(d,1<_?1-_:void 0)}function dh(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function gi(){return!0}function Q0(){return!1}function Ea(d){function p(b,_,A,R,K){this._reactName=b,this._targetInst=A,this.type=_,this.nativeEvent=R,this.target=K,this.currentTarget=null;for(var ae in d)d.hasOwnProperty(ae)&&(b=d[ae],this[ae]=b?b(R):R[ae]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?gi:Q0,this.isPropagationStopped=Q0,this}return f(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),p}var Dd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ep=Ea(Dd),fh=f({},Dd,{view:0,detail:0}),uk=Ea(fh),tp,Al,Pd,he=f({},fh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mu,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Pd&&(Pd&&d.type==="mousemove"?(tp=d.screenX-Pd.screenX,Al=d.screenY-Pd.screenY):Al=tp=0,Pd=d),tp)},movementY:function(d){return"movementY"in d?d.movementY:Al}}),Qw=Ea(he),dk=f({},he,{dataTransfer:0}),Xs=Ea(dk),Gm=f({},fh,{relatedTarget:0}),zc=Ea(Gm),jc=f({},Dd,{animationName:0,elapsedTime:0,pseudoElement:0}),fk=Ea(jc),hk=f({},Dd,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),eE=Ea(hk),pk=f({},Dd,{data:0}),Wm=Ea(pk),mk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ub={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function np(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=Hb[d])?!!p[d]:!1}function Mu(){return np}var Vb=f({},fh,{key:function(d){if(d.key){var p=mk[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=dh(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Ub[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mu,charCode:function(d){return d.type==="keypress"?dh(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?dh(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Ld=Ea(Vb),rp=f({},he,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tE=Ea(rp),Ym=f({},fh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mu}),Mo=Ea(Ym),gk=f({},Dd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ko=Ea(gk),Km=f({},he,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),nE=Ea(Km),$d=f({},Dd,{newState:0,oldState:0}),Zm=Ea($d),rE=[9,13,27,32],Jm=Sl&&"CompositionEvent"in window,Zo=null;Sl&&"documentMode"in document&&(Zo=document.documentMode);var xo=Sl&&"TextEvent"in window&&!Zo,hh=Sl&&(!Jm||Zo&&8<Zo&&11>=Zo),Nl=" ",ph=!1;function Fd(d,p){switch(d){case"keyup":return rE.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sp(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var sc=!1;function bi(d,p){switch(d){case"compositionend":return sp(p);case"keypress":return p.which!==32?null:(ph=!0,Nl);case"textInput":return d=p.data,d===Nl&&ph?null:d;default:return null}}function sE(d,p){if(sc)return d==="compositionend"||!Jm&&Fd(d,p)?(d=kl(),Cl=X0=Tl=null,sc=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return hh&&p.locale!=="ko"?null:p.data;default:return null}}var oE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xm(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!oE[d.type]:p==="textarea"}function zn(d,p,b,_){cr?Fs?Fs.push(_):Fs=[_]:cr=_,p=UE(p,"onChange"),0<p.length&&(b=new ep("onChange","change",null,b,_),d.push({event:b,listeners:p}))}var Oo=null,Uc=null;function iE(d){$O(d,0)}function Qm(d){var p=kt(d);if(K0(p))return d}function aE(d,p){if(d==="change")return p}var qb=!1;if(Sl){var Gb;if(Sl){var eg="oninput"in document;if(!eg){var lE=document.createElement("div");lE.setAttribute("oninput","return;"),eg=typeof lE.oninput=="function"}Gb=eg}else Gb=!1;qb=Gb&&(!document.documentMode||9<document.documentMode)}function tg(){Oo&&(Oo.detachEvent("onpropertychange",Wb),Uc=Oo=null)}function Wb(d){if(d.propertyName==="value"&&Qm(Uc)){var p=[];zn(p,Uc,d,Zn(d)),ch(iE,p)}}function Yb(d,p,b){d==="focusin"?(tg(),Oo=p,Uc=b,Oo.attachEvent("onpropertychange",Wb)):d==="focusout"&&tg()}function Bd(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Qm(Uc)}function bk(d,p){if(d==="click")return Qm(p)}function yk(d,p){if(d==="input"||d==="change")return Qm(p)}function vk(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var _a=typeof Object.is=="function"?Object.is:vk;function op(d,p){if(_a(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var b=Object.keys(d),_=Object.keys(p);if(b.length!==_.length)return!1;for(_=0;_<b.length;_++){var A=b[_];if(!xt.call(p,A)||!_a(d[A],p[A]))return!1}return!0}function ng(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function rg(d,p){var b=ng(d);d=0;for(var _;b;){if(b.nodeType===3){if(_=d+b.textContent.length,d<=p&&_>=p)return{node:b,offset:p-d};d=_}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=ng(b)}}function cE(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?cE(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function mh(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var p=Md(d.document);p instanceof d.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)d=p.contentWindow;else break;p=Md(d.document)}return p}function ip(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}var sg=Sl&&"documentMode"in document&&11>=document.documentMode,Er=null,qa=null,ap=null,lp=!1;function Ga(d,p,b){var _=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;lp||Er==null||Er!==Md(_)||(_=Er,"selectionStart"in _&&ip(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),ap&&op(ap,_)||(ap=_,_=UE(qa,"onSelect"),0<_.length&&(p=new ep("onSelect","select",null,p,b),d.push({event:p,listeners:_}),p.target=Er)))}function yi(d,p){var b={};return b[d.toLowerCase()]=p.toLowerCase(),b["Webkit"+d]="webkit"+p,b["Moz"+d]="moz"+p,b}var Ou={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionrun:yi("Transition","TransitionRun"),transitionstart:yi("Transition","TransitionStart"),transitioncancel:yi("Transition","TransitionCancel"),transitionend:yi("Transition","TransitionEnd")},cp={},Sa={};Sl&&(Sa=document.createElement("div").style,"AnimationEvent"in window||(delete Ou.animationend.animation,delete Ou.animationiteration.animation,delete Ou.animationstart.animation),"TransitionEvent"in window||delete Ou.transitionend.transition);function Wa(d){if(cp[d])return cp[d];if(!Ou[d])return d;var p=Ou[d],b;for(b in p)if(p.hasOwnProperty(b)&&b in Sa)return cp[d]=p[b];return d}var Kb=Wa("animationend"),Oi=Wa("animationiteration"),Zb=Wa("animationstart"),uE=Wa("transitionrun"),xk=Wa("transitionstart"),dE=Wa("transitioncancel"),fE=Wa("transitionend"),gh=new Map,og="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");og.push("scrollEnd");function Ta(d,p){gh.set(d,p),nr(p,[d])}var zd=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},qi=[],bh=0,up=0;function yh(){for(var d=bh,p=up=bh=0;p<d;){var b=qi[p];qi[p++]=null;var _=qi[p];qi[p++]=null;var A=qi[p];qi[p++]=null;var R=qi[p];if(qi[p++]=null,_!==null&&A!==null){var K=_.pending;K===null?A.next=A:(A.next=K.next,K.next=A),_.pending=A}R!==0&&Jb(b,A,R)}}function dp(d,p,b,_){qi[bh++]=d,qi[bh++]=p,qi[bh++]=b,qi[bh++]=_,up|=_,d.lanes|=_,d=d.alternate,d!==null&&(d.lanes|=_)}function fp(d,p,b,_){return dp(d,p,b,_),ig(d)}function Hc(d,p){return dp(d,null,null,p),ig(d)}function Jb(d,p,b){d.lanes|=b;var _=d.alternate;_!==null&&(_.lanes|=b);for(var A=!1,R=d.return;R!==null;)R.childLanes|=b,_=R.alternate,_!==null&&(_.childLanes|=b),R.tag===22&&(d=R.stateNode,d===null||d._visibility&1||(A=!0)),d=R,R=R.return;return d.tag===3?(R=d.stateNode,A&&p!==null&&(A=31-zt(b),d=R.hiddenUpdates,_=d[A],_===null?d[A]=[p]:_.push(p),p.lane=b|536870912),R):null}function ig(d){if(50<Sy)throw Sy=0,Gk=null,Error(r(185));for(var p=d.return;p!==null;)d=p,p=d.return;return d.tag===3?d.stateNode:null}var Gi={};function ag(d,p,b,_){this.tag=d,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Do(d,p,b,_){return new ag(d,p,b,_)}function lg(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Il(d,p){var b=d.alternate;return b===null?(b=Do(d.tag,p,d.key,d.mode),b.elementType=d.elementType,b.type=d.type,b.stateNode=d.stateNode,b.alternate=d,d.alternate=b):(b.pendingProps=p,b.type=d.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=d.flags&65011712,b.childLanes=d.childLanes,b.lanes=d.lanes,b.child=d.child,b.memoizedProps=d.memoizedProps,b.memoizedState=d.memoizedState,b.updateQueue=d.updateQueue,p=d.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=d.sibling,b.index=d.index,b.ref=d.ref,b.refCleanup=d.refCleanup,b}function hE(d,p){d.flags&=65011714;var b=d.alternate;return b===null?(d.childLanes=0,d.lanes=p,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=b.childLanes,d.lanes=b.lanes,d.child=b.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=b.memoizedProps,d.memoizedState=b.memoizedState,d.updateQueue=b.updateQueue,d.type=b.type,p=b.dependencies,d.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),d}function Rl(d,p,b,_,A,R){var K=0;if(_=d,typeof d=="function")lg(d)&&(K=1);else if(typeof d=="string")K=lue(d,b,Te.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case V:return d=Do(31,b,p,A),d.elementType=V,d.lanes=R,d;case v:return Du(b.children,A,R,p);case x:K=8,A|=24;break;case E:return d=Do(12,b,p,A|2),d.elementType=E,d.lanes=R,d;case O:return d=Do(13,b,p,A),d.elementType=O,d.lanes=R,d;case M:return d=Do(19,b,p,A),d.elementType=M,d.lanes=R,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case k:K=10;break e;case T:K=9;break e;case I:K=11;break e;case P:K=14;break e;case j:K=16,_=null;break e}K=29,b=Error(r(130,d===null?"null":typeof d,"")),_=null}return p=Do(K,b,p,A),p.elementType=d,p.type=_,p.lanes=R,p}function Du(d,p,b,_){return d=Do(7,d,_,p),d.lanes=b,d}function vh(d,p,b){return d=Do(6,d,null,p),d.lanes=b,d}function Xb(d){var p=Do(18,null,null,0);return p.stateNode=d,p}function cg(d,p,b){return p=Do(4,d.children!==null?d.children:[],d.key,p),p.lanes=b,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}var Qb=new WeakMap;function la(d,p){if(typeof d=="object"&&d!==null){var b=Qb.get(d);return b!==void 0?b:(p={value:d,source:p,stack:en(p)},Qb.set(d,p),p)}return{value:d,source:p,stack:en(p)}}var ti=[],oc=0,Vc=null,xh=0,Ml=[],hs=0,Ya=null,Po=1,Ol="";function wo(d,p){ti[oc++]=xh,ti[oc++]=Vc,Vc=d,xh=p}function pE(d,p,b){Ml[hs++]=Po,Ml[hs++]=Ol,Ml[hs++]=Ya,Ya=d;var _=Po;d=Ol;var A=32-zt(_)-1;_&=~(1<<A),b+=1;var R=32-zt(p)+A;if(30<R){var K=A-A%5;R=(_&(1<<K)-1).toString(32),_>>=K,A-=K,Po=1<<32-zt(p)+A|b<<A|_,Ol=R+d}else Po=1<<R|b<<A|_,Ol=d}function jd(d){d.return!==null&&(wo(d,1),pE(d,1,0))}function Di(d){for(;d===Vc;)Vc=ti[--oc],ti[oc]=null,xh=ti[--oc],ti[oc]=null;for(;d===Ya;)Ya=Ml[--hs],Ml[hs]=null,Ol=Ml[--hs],Ml[hs]=null,Po=Ml[--hs],Ml[hs]=null}function ug(d,p){Ml[hs++]=Po,Ml[hs++]=Ol,Ml[hs++]=Ya,Po=p.id,Ol=p.overflow,Ya=d}var Qs=null,cs=null,Rr=!1,us=null,As=!1,ic=Error(r(519));function qc(d){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hp(la(p,d)),ic}function Jn(d){var p=d.stateNode,b=d.type,_=d.memoizedProps;switch(p[pr]=d,p[Io]=_,b){case"dialog":Or("cancel",p),Or("close",p);break;case"iframe":case"object":case"embed":Or("load",p);break;case"video":case"audio":for(b=0;b<Cy.length;b++)Or(Cy[b],p);break;case"source":Or("error",p);break;case"img":case"image":case"link":Or("error",p),Or("load",p);break;case"details":Or("toggle",p);break;case"input":Or("invalid",p),rc(p,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0);break;case"select":Or("invalid",p);break;case"textarea":Or("invalid",p),ah(p,_.value,_.defaultValue,_.children)}b=_.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||_.suppressHydrationWarning===!0||jO(p.textContent,b)?(_.popover!=null&&(Or("beforetoggle",p),Or("toggle",p)),_.onScroll!=null&&Or("scroll",p),_.onScrollEnd!=null&&Or("scrollend",p),_.onClick!=null&&(p.onclick=Lt),p=!0):p=!1,p||qc(d,!0)}function eo(d){for(Qs=d.return;Qs;)switch(Qs.tag){case 5:case 31:case 13:As=!1;return;case 27:case 3:As=!0;return;default:Qs=Qs.return}}function Sn(d){if(d!==Qs)return!1;if(!Rr)return eo(d),Rr=!0,!1;var p=d.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=d.type,b=!(b!=="form"&&b!=="button")||a3(d.type,d.memoizedProps)),b=!b),b&&cs&&qc(d),eo(d),p===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));cs=ZO(d)}else if(p===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));cs=ZO(d)}else p===27?(p=cs,$h(d.type)?(d=f3,f3=null,cs=d):cs=p):cs=Qs?fc(d.stateNode.nextSibling):null;return!0}function Pu(){cs=Qs=null,Rr=!1}function ey(){var d=us;return d!==null&&(tl===null?tl=d:tl.push.apply(tl,d),us=null),d}function hp(d){us===null?us=[d]:us.push(d)}var dg=te(null),Dl=null,ca=null;function Lu(d,p,b){Q(dg,p._currentValue),p._currentValue=b}function Gc(d){d._currentValue=dg.current,oe(dg)}function ty(d,p,b){for(;d!==null;){var _=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,_!==null&&(_.childLanes|=p)):_!==null&&(_.childLanes&p)!==p&&(_.childLanes|=p),d===b)break;d=d.return}}function fg(d,p,b,_){var A=d.child;for(A!==null&&(A.return=d);A!==null;){var R=A.dependencies;if(R!==null){var K=A.child;R=R.firstContext;e:for(;R!==null;){var ae=R;R=A;for(var ke=0;ke<p.length;ke++)if(ae.context===p[ke]){R.lanes|=b,ae=R.alternate,ae!==null&&(ae.lanes|=b),ty(R.return,b,d),_||(K=null);break e}R=ae.next}}else if(A.tag===18){if(K=A.return,K===null)throw Error(r(341));K.lanes|=b,R=K.alternate,R!==null&&(R.lanes|=b),ty(K,b,d),K=null}else K=A.child;if(K!==null)K.return=A;else for(K=A;K!==null;){if(K===d){K=null;break}if(A=K.sibling,A!==null){A.return=K.return,K=A;break}K=K.return}A=K}}function wh(d,p,b,_){d=null;for(var A=p,R=!1;A!==null;){if(!R){if((A.flags&524288)!==0)R=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var K=A.alternate;if(K===null)throw Error(r(387));if(K=K.memoizedProps,K!==null){var ae=A.type;_a(A.pendingProps.value,K.value)||(d!==null?d.push(ae):d=[ae])}}else if(A===fe.current){if(K=A.alternate,K===null)throw Error(r(387));K.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(d!==null?d.push(Ry):d=[Ry])}A=A.return}d!==null&&fg(p,d,b,_),p.flags|=262144}function hg(d){for(d=d.firstContext;d!==null;){if(!_a(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function Ud(d){Dl=d,ca=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function vi(d){return mE(Dl,d)}function Eh(d,p){return Dl===null&&Ud(d),mE(d,p)}function mE(d,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},ca===null){if(d===null)throw Error(r(308));ca=p,d.dependencies={lanes:0,firstContext:p},d.flags|=524288}else ca=ca.next=p;return b}var pp=typeof AbortController<"u"?AbortController:function(){var d=[],p=this.signal={aborted:!1,addEventListener:function(b,_){d.push(_)}};this.abort=function(){p.aborted=!0,d.forEach(function(b){return b()})}},wk=e.unstable_scheduleCallback,Ek=e.unstable_NormalPriority,Lo={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ny(){return{controller:new pp,data:new Map,refCount:0}}function Hd(d){d.refCount--,d.refCount===0&&wk(Ek,function(){d.controller.abort()})}var ac=null,pg=0,Vd=0,qd=null;function gE(d,p){if(ac===null){var b=ac=[];pg=0,Vd=Xk(),qd={status:"pending",value:void 0,then:function(_){b.push(_)}}}return pg++,p.then(bE,bE),p}function bE(){if(--pg===0&&ac!==null){qd!==null&&(qd.status="fulfilled");var d=ac;ac=null,Vd=0,qd=null;for(var p=0;p<d.length;p++)(0,d[p])()}}function _k(d,p){var b=[],_={status:"pending",value:null,reason:null,then:function(A){b.push(A)}};return d.then(function(){_.status="fulfilled",_.value=p;for(var A=0;A<b.length;A++)(0,b[A])(p)},function(A){for(_.status="rejected",_.reason=A,A=0;A<b.length;A++)(0,b[A])(void 0)}),_}var yE=J.S;J.S=function(d,p){dO=Le(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&gE(d,p),yE!==null&&yE(d,p)};var Gd=te(null);function ry(){var d=Gd.current;return d!==null?d:zs.pooledCache}function mp(d,p){p===null?Q(Gd,Gd.current):Q(Gd,p.pool)}function sy(){var d=ry();return d===null?null:{parent:Lo._currentValue,pool:d}}var Wd=Error(r(460)),gp=Error(r(474)),mg=Error(r(542)),gg={then:function(){}};function vE(d){return d=d.status,d==="fulfilled"||d==="rejected"}function xE(d,p,b){switch(b=d[b],b===void 0?d.push(p):b!==p&&(p.then(Lt,Lt),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,oy(d),d;default:if(typeof p.status=="string")p.then(Lt,Lt);else{if(d=zs,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=p,d.status="pending",d.then(function(_){if(p.status==="pending"){var A=p;A.status="fulfilled",A.value=_}},function(_){if(p.status==="pending"){var A=p;A.status="rejected",A.reason=_}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,oy(d),d}throw Yd=p,Wd}}function Ka(d){try{var p=d._init;return p(d._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(Yd=b,Wd):b}}var Yd=null;function wE(){if(Yd===null)throw Error(r(459));var d=Yd;return Yd=null,d}function oy(d){if(d===Wd||d===mg)throw Error(r(483))}var $u=null,bp=0;function lc(d){var p=bp;return bp+=1,$u===null&&($u=[]),xE($u,d,p)}function _h(d,p){p=p.props.ref,d.ref=p!==void 0?p:null}function yp(d,p){throw p.$$typeof===m?Error(r(525)):(d=Object.prototype.toString.call(p),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d)))}function iy(d){function p(je,Oe){if(d){var Ge=je.deletions;Ge===null?(je.deletions=[Oe],je.flags|=16):Ge.push(Oe)}}function b(je,Oe){if(!d)return null;for(;Oe!==null;)p(je,Oe),Oe=Oe.sibling;return null}function _(je){for(var Oe=new Map;je!==null;)je.key!==null?Oe.set(je.key,je):Oe.set(je.index,je),je=je.sibling;return Oe}function A(je,Oe){return je=Il(je,Oe),je.index=0,je.sibling=null,je}function R(je,Oe,Ge){return je.index=Ge,d?(Ge=je.alternate,Ge!==null?(Ge=Ge.index,Ge<Oe?(je.flags|=67108866,Oe):Ge):(je.flags|=67108866,Oe)):(je.flags|=1048576,Oe)}function K(je){return d&&je.alternate===null&&(je.flags|=67108866),je}function ae(je,Oe,Ge,ct){return Oe===null||Oe.tag!==6?(Oe=vh(Ge,je.mode,ct),Oe.return=je,Oe):(Oe=A(Oe,Ge),Oe.return=je,Oe)}function ke(je,Oe,Ge,ct){var Mn=Ge.type;return Mn===v?st(je,Oe,Ge.props.children,ct,Ge.key):Oe!==null&&(Oe.elementType===Mn||typeof Mn=="object"&&Mn!==null&&Mn.$$typeof===j&&Ka(Mn)===Oe.type)?(Oe=A(Oe,Ge.props),_h(Oe,Ge),Oe.return=je,Oe):(Oe=Rl(Ge.type,Ge.key,Ge.props,null,je.mode,ct),_h(Oe,Ge),Oe.return=je,Oe)}function Ye(je,Oe,Ge,ct){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Ge.containerInfo||Oe.stateNode.implementation!==Ge.implementation?(Oe=cg(Ge,je.mode,ct),Oe.return=je,Oe):(Oe=A(Oe,Ge.children||[]),Oe.return=je,Oe)}function st(je,Oe,Ge,ct,Mn){return Oe===null||Oe.tag!==7?(Oe=Du(Ge,je.mode,ct,Mn),Oe.return=je,Oe):(Oe=A(Oe,Ge),Oe.return=je,Oe)}function dt(je,Oe,Ge){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=vh(""+Oe,je.mode,Ge),Oe.return=je,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case g:return Ge=Rl(Oe.type,Oe.key,Oe.props,null,je.mode,Ge),_h(Ge,Oe),Ge.return=je,Ge;case y:return Oe=cg(Oe,je.mode,Ge),Oe.return=je,Oe;case j:return Oe=Ka(Oe),dt(je,Oe,Ge)}if(X(Oe)||H(Oe))return Oe=Du(Oe,je.mode,Ge,null),Oe.return=je,Oe;if(typeof Oe.then=="function")return dt(je,lc(Oe),Ge);if(Oe.$$typeof===k)return dt(je,Eh(je,Oe),Ge);yp(je,Oe)}return null}function Ke(je,Oe,Ge,ct){var Mn=Oe!==null?Oe.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Mn!==null?null:ae(je,Oe,""+Ge,ct);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case g:return Ge.key===Mn?ke(je,Oe,Ge,ct):null;case y:return Ge.key===Mn?Ye(je,Oe,Ge,ct):null;case j:return Ge=Ka(Ge),Ke(je,Oe,Ge,ct)}if(X(Ge)||H(Ge))return Mn!==null?null:st(je,Oe,Ge,ct,null);if(typeof Ge.then=="function")return Ke(je,Oe,lc(Ge),ct);if(Ge.$$typeof===k)return Ke(je,Oe,Eh(je,Ge),ct);yp(je,Ge)}return null}function Xe(je,Oe,Ge,ct,Mn){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return je=je.get(Ge)||null,ae(Oe,je,""+ct,Mn);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case g:return je=je.get(ct.key===null?Ge:ct.key)||null,ke(Oe,je,ct,Mn);case y:return je=je.get(ct.key===null?Ge:ct.key)||null,Ye(Oe,je,ct,Mn);case j:return ct=Ka(ct),Xe(je,Oe,Ge,ct,Mn)}if(X(ct)||H(ct))return je=je.get(Ge)||null,st(Oe,je,ct,Mn,null);if(typeof ct.then=="function")return Xe(je,Oe,Ge,lc(ct),Mn);if(ct.$$typeof===k)return Xe(je,Oe,Ge,Eh(Oe,ct),Mn);yp(Oe,ct)}return null}function un(je,Oe,Ge,ct){for(var Mn=null,ts=null,wn=Oe,mr=Oe=0,$r=null;wn!==null&&mr<Ge.length;mr++){wn.index>mr?($r=wn,wn=null):$r=wn.sibling;var ns=Ke(je,wn,Ge[mr],ct);if(ns===null){wn===null&&(wn=$r);break}d&&wn&&ns.alternate===null&&p(je,wn),Oe=R(ns,Oe,mr),ts===null?Mn=ns:ts.sibling=ns,ts=ns,wn=$r}if(mr===Ge.length)return b(je,wn),Rr&&wo(je,mr),Mn;if(wn===null){for(;mr<Ge.length;mr++)wn=dt(je,Ge[mr],ct),wn!==null&&(Oe=R(wn,Oe,mr),ts===null?Mn=wn:ts.sibling=wn,ts=wn);return Rr&&wo(je,mr),Mn}for(wn=_(wn);mr<Ge.length;mr++)$r=Xe(wn,je,mr,Ge[mr],ct),$r!==null&&(d&&$r.alternate!==null&&wn.delete($r.key===null?mr:$r.key),Oe=R($r,Oe,mr),ts===null?Mn=$r:ts.sibling=$r,ts=$r);return d&&wn.forEach(function(Uh){return p(je,Uh)}),Rr&&wo(je,mr),Mn}function Un(je,Oe,Ge,ct){if(Ge==null)throw Error(r(151));for(var Mn=null,ts=null,wn=Oe,mr=Oe=0,$r=null,ns=Ge.next();wn!==null&&!ns.done;mr++,ns=Ge.next()){wn.index>mr?($r=wn,wn=null):$r=wn.sibling;var Uh=Ke(je,wn,ns.value,ct);if(Uh===null){wn===null&&(wn=$r);break}d&&wn&&Uh.alternate===null&&p(je,wn),Oe=R(Uh,Oe,mr),ts===null?Mn=Uh:ts.sibling=Uh,ts=Uh,wn=$r}if(ns.done)return b(je,wn),Rr&&wo(je,mr),Mn;if(wn===null){for(;!ns.done;mr++,ns=Ge.next())ns=dt(je,ns.value,ct),ns!==null&&(Oe=R(ns,Oe,mr),ts===null?Mn=ns:ts.sibling=ns,ts=ns);return Rr&&wo(je,mr),Mn}for(wn=_(wn);!ns.done;mr++,ns=Ge.next())ns=Xe(wn,je,mr,ns.value,ct),ns!==null&&(d&&ns.alternate!==null&&wn.delete(ns.key===null?mr:ns.key),Oe=R(ns,Oe,mr),ts===null?Mn=ns:ts.sibling=ns,ts=ns);return d&&wn.forEach(function(vue){return p(je,vue)}),Rr&&wo(je,mr),Mn}function Ds(je,Oe,Ge,ct){if(typeof Ge=="object"&&Ge!==null&&Ge.type===v&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case g:e:{for(var Mn=Ge.key;Oe!==null;){if(Oe.key===Mn){if(Mn=Ge.type,Mn===v){if(Oe.tag===7){b(je,Oe.sibling),ct=A(Oe,Ge.props.children),ct.return=je,je=ct;break e}}else if(Oe.elementType===Mn||typeof Mn=="object"&&Mn!==null&&Mn.$$typeof===j&&Ka(Mn)===Oe.type){b(je,Oe.sibling),ct=A(Oe,Ge.props),_h(ct,Ge),ct.return=je,je=ct;break e}b(je,Oe);break}else p(je,Oe);Oe=Oe.sibling}Ge.type===v?(ct=Du(Ge.props.children,je.mode,ct,Ge.key),ct.return=je,je=ct):(ct=Rl(Ge.type,Ge.key,Ge.props,null,je.mode,ct),_h(ct,Ge),ct.return=je,je=ct)}return K(je);case y:e:{for(Mn=Ge.key;Oe!==null;){if(Oe.key===Mn)if(Oe.tag===4&&Oe.stateNode.containerInfo===Ge.containerInfo&&Oe.stateNode.implementation===Ge.implementation){b(je,Oe.sibling),ct=A(Oe,Ge.children||[]),ct.return=je,je=ct;break e}else{b(je,Oe);break}else p(je,Oe);Oe=Oe.sibling}ct=cg(Ge,je.mode,ct),ct.return=je,je=ct}return K(je);case j:return Ge=Ka(Ge),Ds(je,Oe,Ge,ct)}if(X(Ge))return un(je,Oe,Ge,ct);if(H(Ge)){if(Mn=H(Ge),typeof Mn!="function")throw Error(r(150));return Ge=Mn.call(Ge),Un(je,Oe,Ge,ct)}if(typeof Ge.then=="function")return Ds(je,Oe,lc(Ge),ct);if(Ge.$$typeof===k)return Ds(je,Oe,Eh(je,Ge),ct);yp(je,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint"?(Ge=""+Ge,Oe!==null&&Oe.tag===6?(b(je,Oe.sibling),ct=A(Oe,Ge),ct.return=je,je=ct):(b(je,Oe),ct=vh(Ge,je.mode,ct),ct.return=je,je=ct),K(je)):b(je,Oe)}return function(je,Oe,Ge,ct){try{bp=0;var Mn=Ds(je,Oe,Ge,ct);return $u=null,Mn}catch(wn){if(wn===Wd||wn===mg)throw wn;var ts=Do(29,wn,null,je.mode);return ts.lanes=ct,ts.return=je,ts}finally{}}}var Fu=iy(!0),Sh=iy(!1),Wc=!1;function Kd(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bg(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Bu(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function zu(d,p,b){var _=d.updateQueue;if(_===null)return null;if(_=_.shared,(ds&2)!==0){var A=_.pending;return A===null?p.next=p:(p.next=A.next,A.next=p),_.pending=p,p=ig(d),Jb(d,null,b),p}return dp(d,_,p,b),ig(d)}function ju(d,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var _=p.lanes;_&=d.pendingLanes,b|=_,p.lanes=b,fn(d,b)}}function yg(d,p){var b=d.updateQueue,_=d.alternate;if(_!==null&&(_=_.updateQueue,b===_)){var A=null,R=null;if(b=b.firstBaseUpdate,b!==null){do{var K={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};R===null?A=R=K:R=R.next=K,b=b.next}while(b!==null);R===null?A=R=p:R=R.next=p}else A=R=p;b={baseState:_.baseState,firstBaseUpdate:A,lastBaseUpdate:R,shared:_.shared,callbacks:_.callbacks},d.updateQueue=b;return}d=b.lastBaseUpdate,d===null?b.firstBaseUpdate=p:d.next=p,b.lastBaseUpdate=p}var vg=!1;function vp(){if(vg){var d=qd;if(d!==null)throw d}}function xp(d,p,b,_){vg=!1;var A=d.updateQueue;Wc=!1;var R=A.firstBaseUpdate,K=A.lastBaseUpdate,ae=A.shared.pending;if(ae!==null){A.shared.pending=null;var ke=ae,Ye=ke.next;ke.next=null,K===null?R=Ye:K.next=Ye,K=ke;var st=d.alternate;st!==null&&(st=st.updateQueue,ae=st.lastBaseUpdate,ae!==K&&(ae===null?st.firstBaseUpdate=Ye:ae.next=Ye,st.lastBaseUpdate=ke))}if(R!==null){var dt=A.baseState;K=0,st=Ye=ke=null,ae=R;do{var Ke=ae.lane&-536870913,Xe=Ke!==ae.lane;if(Xe?(Lr&Ke)===Ke:(_&Ke)===Ke){Ke!==0&&Ke===Vd&&(vg=!0),st!==null&&(st=st.next={lane:0,tag:ae.tag,payload:ae.payload,callback:null,next:null});e:{var un=d,Un=ae;Ke=p;var Ds=b;switch(Un.tag){case 1:if(un=Un.payload,typeof un=="function"){dt=un.call(Ds,dt,Ke);break e}dt=un;break e;case 3:un.flags=un.flags&-65537|128;case 0:if(un=Un.payload,Ke=typeof un=="function"?un.call(Ds,dt,Ke):un,Ke==null)break e;dt=f({},dt,Ke);break e;case 2:Wc=!0}}Ke=ae.callback,Ke!==null&&(d.flags|=64,Xe&&(d.flags|=8192),Xe=A.callbacks,Xe===null?A.callbacks=[Ke]:Xe.push(Ke))}else Xe={lane:Ke,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},st===null?(Ye=st=Xe,ke=dt):st=st.next=Xe,K|=Ke;if(ae=ae.next,ae===null){if(ae=A.shared.pending,ae===null)break;Xe=ae,ae=Xe.next,Xe.next=null,A.lastBaseUpdate=Xe,A.shared.pending=null}}while(!0);st===null&&(ke=dt),A.baseState=ke,A.firstBaseUpdate=Ye,A.lastBaseUpdate=st,R===null&&(A.shared.lanes=0),Mh|=K,d.lanes=K,d.memoizedState=dt}}function $o(d,p){if(typeof d!="function")throw Error(r(191,d));d.call(p)}function EE(d,p){var b=d.callbacks;if(b!==null)for(d.callbacks=null,d=0;d<b.length;d++)$o(b[d],p)}var Yc=te(null),xg=te(0);function ay(d,p){d=af,Q(xg,d),Q(Yc,p),af=d|p.baseLanes}function ly(){Q(xg,af),Q(Yc,Yc.current)}function wp(){af=xg.current,oe(Yc),oe(xg)}var Jo=te(null),Za=null;function Uu(d){var p=d.alternate;Q(Eo,Eo.current&1),Q(Jo,d),Za===null&&(p===null||Yc.current!==null||p.memoizedState!==null)&&(Za=d)}function cy(d){Q(Eo,Eo.current),Q(Jo,d),Za===null&&(Za=d)}function uy(d){d.tag===22?(Q(Eo,Eo.current),Q(Jo,d),Za===null&&(Za=d)):Hu()}function Hu(){Q(Eo,Eo.current),Q(Jo,Jo.current)}function Ca(d){oe(Jo),Za===d&&(Za=null),oe(Eo)}var Eo=te(0);function wg(d){for(var p=d;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||u3(b)||d3(b)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Kc=0,rr=null,ps=null,Fo=null,Zd=!1,Th=!1,Vu=!1,Eg=0,Ep=0,Wi=null,Ch=0;function Bs(){throw Error(r(321))}function dy(d,p){if(p===null)return!1;for(var b=0;b<p.length&&b<d.length;b++)if(!_a(d[b],p[b]))return!1;return!0}function fy(d,p,b,_,A,R){return Kc=R,rr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,J.H=d===null||d.memoizedState===null?Xn:vr,Vu=!1,R=b(_,A),Vu=!1,Th&&(R=SE(p,b,_,A)),_E(d),R}function _E(d){J.H=Hn;var p=ps!==null&&ps.next!==null;if(Kc=0,Fo=ps=rr=null,Zd=!1,Ep=0,Wi=null,p)throw Error(r(300));d===null||ri||(d=d.dependencies,d!==null&&hg(d)&&(ri=!0))}function SE(d,p,b,_){rr=d;var A=0;do{if(Th&&(Wi=null),Ep=0,Th=!1,25<=A)throw Error(r(301));if(A+=1,Fo=ps=null,d.updateQueue!=null){var R=d.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}J.H=tr,R=p(b,_)}while(Th);return R}function Sk(){var d=J.H,p=d.useState()[0];return p=typeof p.then=="function"?kh(p):p,d=d.useState()[0],(ps!==null?ps.memoizedState:null)!==d&&(rr.flags|=1024),p}function hy(){var d=Eg!==0;return Eg=0,d}function py(d,p,b){p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~b}function my(d){if(Zd){for(d=d.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Zd=!1}Kc=0,Fo=ps=rr=null,Th=!1,Ep=Eg=0,Wi=null}function Yi(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fo===null?rr.memoizedState=Fo=d:Fo=Fo.next=d,Fo}function fo(){if(ps===null){var d=rr.alternate;d=d!==null?d.memoizedState:null}else d=ps.next;var p=Fo===null?rr.memoizedState:Fo.next;if(p!==null)Fo=p,ps=d;else{if(d===null)throw rr.alternate===null?Error(r(467)):Error(r(310));ps=d,d={memoizedState:ps.memoizedState,baseState:ps.baseState,baseQueue:ps.baseQueue,queue:ps.queue,next:null},Fo===null?rr.memoizedState=Fo=d:Fo=Fo.next=d}return Fo}function _p(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kh(d){var p=Ep;return Ep+=1,Wi===null&&(Wi=[]),d=xE(Wi,d,p),p=rr,(Fo===null?p.memoizedState:Fo.next)===null&&(p=p.alternate,J.H=p===null||p.memoizedState===null?Xn:vr),d}function Sp(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return kh(d);if(d.$$typeof===k)return vi(d)}throw Error(r(438,String(d)))}function _g(d){var p=null,b=rr.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var _=rr.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(p={data:_.data.map(function(A){return A.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=_p(),rr.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(d),_=0;_<d;_++)b[_]=U;return p.index++,b}function cc(d,p){return typeof p=="function"?p(d):p}function Tp(d){var p=fo();return Sg(p,ps,d)}function Sg(d,p,b){var _=d.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=b;var A=d.baseQueue,R=_.pending;if(R!==null){if(A!==null){var K=A.next;A.next=R.next,R.next=K}p.baseQueue=A=R,_.pending=null}if(R=d.baseState,A===null)d.memoizedState=R;else{p=A.next;var ae=K=null,ke=null,Ye=p,st=!1;do{var dt=Ye.lane&-536870913;if(dt!==Ye.lane?(Lr&dt)===dt:(Kc&dt)===dt){var Ke=Ye.revertLane;if(Ke===0)ke!==null&&(ke=ke.next={lane:0,revertLane:0,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),dt===Vd&&(st=!0);else if((Kc&Ke)===Ke){Ye=Ye.next,Ke===Vd&&(st=!0);continue}else dt={lane:0,revertLane:Ye.revertLane,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ke===null?(ae=ke=dt,K=R):ke=ke.next=dt,rr.lanes|=Ke,Mh|=Ke;dt=Ye.action,Vu&&b(R,dt),R=Ye.hasEagerState?Ye.eagerState:b(R,dt)}else Ke={lane:dt,revertLane:Ye.revertLane,gesture:Ye.gesture,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ke===null?(ae=ke=Ke,K=R):ke=ke.next=Ke,rr.lanes|=dt,Mh|=dt;Ye=Ye.next}while(Ye!==null&&Ye!==p);if(ke===null?K=R:ke.next=ae,!_a(R,d.memoizedState)&&(ri=!0,st&&(b=qd,b!==null)))throw b;d.memoizedState=R,d.baseState=K,d.baseQueue=ke,_.lastRenderedState=R}return A===null&&(_.lanes=0),[d.memoizedState,_.dispatch]}function Tg(d){var p=fo(),b=p.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=d;var _=b.dispatch,A=b.pending,R=p.memoizedState;if(A!==null){b.pending=null;var K=A=A.next;do R=d(R,K.action),K=K.next;while(K!==A);_a(R,p.memoizedState)||(ri=!0),p.memoizedState=R,p.baseQueue===null&&(p.baseState=R),b.lastRenderedState=R}return[R,_]}function N(d,p,b){var _=rr,A=fo(),R=Rr;if(R){if(b===void 0)throw Error(r(407));b=b()}else b=p();var K=!_a((ps||A).memoizedState,b);if(K&&(A.memoizedState=b,ri=!0),A=A.queue,Jd(ve.bind(null,_,A,d),[d]),A.getSnapshot!==p||K||Fo!==null&&Fo.memoizedState.tag&1){if(_.flags|=2048,uc(9,{destroy:void 0},se.bind(null,_,A,b,p),null),zs===null)throw Error(r(349));R||(Kc&127)!==0||W(_,p,b)}return b}function W(d,p,b){d.flags|=16384,d={getSnapshot:p,value:b},p=rr.updateQueue,p===null?(p=_p(),rr.updateQueue=p,p.stores=[d]):(b=p.stores,b===null?p.stores=[d]:b.push(d))}function se(d,p,b,_){p.value=b,p.getSnapshot=_,Ae(p)&&Ie(d)}function ve(d,p,b){return b(function(){Ae(p)&&Ie(d)})}function Ae(d){var p=d.getSnapshot;d=d.value;try{var b=p();return!_a(d,b)}catch{return!0}}function Ie(d){var p=Hc(d,2);p!==null&&nl(p,d,2)}function He(d){var p=Yi();if(typeof d=="function"){var b=d;if(d=b(),Vu){an(!0);try{b()}finally{an(!1)}}}return p.memoizedState=p.baseState=d,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:d},p}function bt(d,p,b,_){return d.baseState=b,Sg(d,ps,typeof _=="function"?_:cc)}function cn(d,p,b,_,A){if(ur(d))throw Error(r(485));if(d=p.action,d!==null){var R={payload:A,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){R.listeners.push(K)}};J.T!==null?b(!0):R.isTransition=!1,_(R),b=p.pending,b===null?(R.next=p.pending=R,Et(p,R)):(R.next=b.next,p.pending=b.next=R)}}function Et(d,p){var b=p.action,_=p.payload,A=d.state;if(p.isTransition){var R=J.T,K={};J.T=K;try{var ae=b(A,_),ke=J.S;ke!==null&&ke(K,ae),En(d,p,ae)}catch(Ye){_t(d,p,Ye)}finally{R!==null&&K.types!==null&&(R.types=K.types),J.T=R}}else try{R=b(A,_),En(d,p,R)}catch(Ye){_t(d,p,Ye)}}function En(d,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(_){lt(d,p,_)},function(_){return _t(d,p,_)}):lt(d,p,b)}function lt(d,p,b){p.status="fulfilled",p.value=b,bn(p),d.state=b,p=d.pending,p!==null&&(b=p.next,b===p?d.pending=null:(b=b.next,p.next=b,Et(d,b)))}function _t(d,p,b){var _=d.pending;if(d.pending=null,_!==null){_=_.next;do p.status="rejected",p.reason=b,bn(p),p=p.next;while(p!==_)}d.action=null}function bn(d){d=d.listeners;for(var p=0;p<d.length;p++)(0,d[p])()}function Wn(d,p){return p}function Qr(d,p){if(Rr){var b=zs.formState;if(b!==null){e:{var _=rr;if(Rr){if(cs){t:{for(var A=cs,R=As;A.nodeType!==8;){if(!R){A=null;break t}if(A=fc(A.nextSibling),A===null){A=null;break t}}R=A.data,A=R==="F!"||R==="F"?A:null}if(A){cs=fc(A.nextSibling),_=A.data==="F!";break e}}qc(_)}_=!1}_&&(p=b[0])}}return b=Yi(),b.memoizedState=b.baseState=p,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:p},b.queue=_,b=pn.bind(null,rr,_),_.dispatch=b,_=He(!1),R=ln.bind(null,rr,!1,_.queue),_=Yi(),A={state:p,dispatch:null,action:d,pending:null},_.queue=A,b=cn.bind(null,rr,A,R,b),A.dispatch=b,_.memoizedState=d,[p,b,!1]}function to(d){var p=fo();return es(p,ps,d)}function es(d,p,b){if(p=Sg(d,p,Wn)[0],d=Tp(cc)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var _=kh(p)}catch(K){throw K===Wd?mg:K}else _=p;p=fo();var A=p.queue,R=A.dispatch;return b!==p.memoizedState&&(rr.flags|=2048,uc(9,{destroy:void 0},xi.bind(null,A,b),null)),[_,R,d]}function xi(d,p){d.action=p}function ka(d){var p=fo(),b=ps;if(b!==null)return es(p,b,d);fo(),p=p.memoizedState,b=fo();var _=b.queue.dispatch;return b.memoizedState=d,[p,_,!1]}function uc(d,p,b,_){return d={tag:d,create:b,deps:_,inst:p,next:null},p=rr.updateQueue,p===null&&(p=_p(),rr.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=d.next=d:(_=b.next,b.next=d,d.next=_,p.lastEffect=d),d}function Ah(){return fo().memoizedState}function qu(d,p,b,_){var A=Yi();rr.flags|=d,A.memoizedState=uc(1|p,{destroy:void 0},b,_===void 0?null:_)}function Gu(d,p,b,_){var A=fo();_=_===void 0?null:_;var R=A.memoizedState.inst;ps!==null&&_!==null&&dy(_,ps.memoizedState.deps)?A.memoizedState=uc(p,R,b,_):(rr.flags|=d,A.memoizedState=uc(1|p,R,b,_))}function Nh(d,p){qu(8390656,8,d,p)}function Jd(d,p){Gu(2048,8,d,p)}function Ns(d){rr.flags|=4;var p=rr.updateQueue;if(p===null)p=_p(),rr.updateQueue=p,p.events=[d];else{var b=p.events;b===null?p.events=[d]:b.push(d)}}function _o(d){var p=fo().memoizedState;return Ns({ref:p,nextImpl:d}),function(){if((ds&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function wi(d,p){return Gu(4,2,d,p)}function Xd(d,p){return Gu(4,4,d,p)}function Cp(d,p){if(typeof p=="function"){d=d();var b=p(d);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function Qd(d,p,b){b=b!=null?b.concat([d]):null,Gu(4,4,Cp.bind(null,p,d),b)}function Ja(){}function kp(d,p){var b=fo();p=p===void 0?null:p;var _=b.memoizedState;return p!==null&&dy(p,_[1])?_[0]:(b.memoizedState=[d,p],d)}function Mt(d,p){var b=fo();p=p===void 0?null:p;var _=b.memoizedState;if(p!==null&&dy(p,_[1]))return _[0];if(_=d(),Vu){an(!0);try{d()}finally{an(!1)}}return b.memoizedState=[_,p],_}function er(d,p,b){return b===void 0||(Kc&1073741824)!==0&&(Lr&261930)===0?d.memoizedState=p:(d.memoizedState=b,d=hO(),rr.lanes|=d,Mh|=d,b)}function jn(d,p,b,_){return _a(b,p)?b:Yc.current!==null?(d=er(d,b,_),_a(d,p)||(ri=!0),d):(Kc&42)===0||(Kc&1073741824)!==0&&(Lr&261930)===0?(ri=!0,d.memoizedState=b):(d=hO(),rr.lanes|=d,Mh|=d,p)}function Vr(d,p,b,_,A){var R=ee.p;ee.p=R!==0&&8>R?R:8;var K=J.T,ae={};J.T=ae,ln(d,!1,p,b);try{var ke=A(),Ye=J.S;if(Ye!==null&&Ye(ae,ke),ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var st=_k(ke,_);nn(d,p,st,$l(d))}else nn(d,p,_,$l(d))}catch(dt){nn(d,p,{then:function(){},status:"rejected",reason:dt},$l())}finally{ee.p=R,K!==null&&ae.types!==null&&(K.types=ae.types),J.T=K}}function jr(){}function qn(d,p,b,_){if(d.tag!==5)throw Error(r(476));var A=vs(d).queue;Vr(d,A,p,re,b===null?jr:function(){return Is(d),b(_)})}function vs(d){var p=d.memoizedState;if(p!==null)return p;p={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:re},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:b},next:null},d.memoizedState=p,d=d.alternate,d!==null&&(d.memoizedState=p),p}function Is(d){var p=vs(d);p.next===null&&(p=d.alternate.memoizedState),nn(d,p.next.queue,{},$l())}function sr(){return vi(Ry)}function So(){return fo().memoizedState}function Wr(){return fo().memoizedState}function no(d){for(var p=d.return;p!==null;){switch(p.tag){case 24:case 3:var b=$l();d=Bu(b);var _=zu(p,d,b);_!==null&&(nl(_,p,b),ju(_,p,b)),p={cache:ny()},d.payload=p;return}p=p.return}}function Jt(d,p,b){var _=$l();b={lane:_,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},ur(d)?dr(p,b):(b=fp(d,p,b,_),b!==null&&(nl(b,d,_),Vn(b,p,_)))}function pn(d,p,b){var _=$l();nn(d,p,b,_)}function nn(d,p,b,_){var A={lane:_,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(ur(d))dr(p,A);else{var R=d.alternate;if(d.lanes===0&&(R===null||R.lanes===0)&&(R=p.lastRenderedReducer,R!==null))try{var K=p.lastRenderedState,ae=R(K,b);if(A.hasEagerState=!0,A.eagerState=ae,_a(ae,K))return dp(d,p,A,0),zs===null&&yh(),!1}catch{}finally{}if(b=fp(d,p,A,_),b!==null)return nl(b,d,_),Vn(b,p,_),!0}return!1}function ln(d,p,b,_){if(_={lane:2,revertLane:Xk(),gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},ur(d)){if(p)throw Error(r(479))}else p=fp(d,b,_,2),p!==null&&nl(p,d,2)}function ur(d){var p=d.alternate;return d===rr||p!==null&&p===rr}function dr(d,p){Th=Zd=!0;var b=d.pending;b===null?p.next=p:(p.next=b.next,b.next=p),d.pending=p}function Vn(d,p,b){if((b&4194048)!==0){var _=p.lanes;_&=d.pendingLanes,b|=_,p.lanes=b,fn(d,b)}}var Hn={readContext:vi,use:Sp,useCallback:Bs,useContext:Bs,useEffect:Bs,useImperativeHandle:Bs,useLayoutEffect:Bs,useInsertionEffect:Bs,useMemo:Bs,useReducer:Bs,useRef:Bs,useState:Bs,useDebugValue:Bs,useDeferredValue:Bs,useTransition:Bs,useSyncExternalStore:Bs,useId:Bs,useHostTransitionStatus:Bs,useFormState:Bs,useActionState:Bs,useOptimistic:Bs,useMemoCache:Bs,useCacheRefresh:Bs};Hn.useEffectEvent=Bs;var Xn={readContext:vi,use:Sp,useCallback:function(d,p){return Yi().memoizedState=[d,p===void 0?null:p],d},useContext:vi,useEffect:Nh,useImperativeHandle:function(d,p,b){b=b!=null?b.concat([d]):null,qu(4194308,4,Cp.bind(null,p,d),b)},useLayoutEffect:function(d,p){return qu(4194308,4,d,p)},useInsertionEffect:function(d,p){qu(4,2,d,p)},useMemo:function(d,p){var b=Yi();p=p===void 0?null:p;var _=d();if(Vu){an(!0);try{d()}finally{an(!1)}}return b.memoizedState=[_,p],_},useReducer:function(d,p,b){var _=Yi();if(b!==void 0){var A=b(p);if(Vu){an(!0);try{b(p)}finally{an(!1)}}}else A=p;return _.memoizedState=_.baseState=A,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:A},_.queue=d,d=d.dispatch=Jt.bind(null,rr,d),[_.memoizedState,d]},useRef:function(d){var p=Yi();return d={current:d},p.memoizedState=d},useState:function(d){d=He(d);var p=d.queue,b=pn.bind(null,rr,p);return p.dispatch=b,[d.memoizedState,b]},useDebugValue:Ja,useDeferredValue:function(d,p){var b=Yi();return er(b,d,p)},useTransition:function(){var d=He(!1);return d=Vr.bind(null,rr,d.queue,!0,!1),Yi().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,p,b){var _=rr,A=Yi();if(Rr){if(b===void 0)throw Error(r(407));b=b()}else{if(b=p(),zs===null)throw Error(r(349));(Lr&127)!==0||W(_,p,b)}A.memoizedState=b;var R={value:b,getSnapshot:p};return A.queue=R,Nh(ve.bind(null,_,R,d),[d]),_.flags|=2048,uc(9,{destroy:void 0},se.bind(null,_,R,b,p),null),b},useId:function(){var d=Yi(),p=zs.identifierPrefix;if(Rr){var b=Ol,_=Po;b=(_&~(1<<32-zt(_)-1)).toString(32)+b,p="_"+p+"R_"+b,b=Eg++,0<b&&(p+="H"+b.toString(32)),p+="_"}else b=Ch++,p="_"+p+"r_"+b.toString(32)+"_";return d.memoizedState=p},useHostTransitionStatus:sr,useFormState:Qr,useActionState:Qr,useOptimistic:function(d){var p=Yi();p.memoizedState=p.baseState=d;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=ln.bind(null,rr,!0,b),b.dispatch=p,[d,p]},useMemoCache:_g,useCacheRefresh:function(){return Yi().memoizedState=no.bind(null,rr)},useEffectEvent:function(d){var p=Yi(),b={impl:d};return p.memoizedState=b,function(){if((ds&2)!==0)throw Error(r(440));return b.impl.apply(void 0,arguments)}}},vr={readContext:vi,use:Sp,useCallback:kp,useContext:vi,useEffect:Jd,useImperativeHandle:Qd,useInsertionEffect:wi,useLayoutEffect:Xd,useMemo:Mt,useReducer:Tp,useRef:Ah,useState:function(){return Tp(cc)},useDebugValue:Ja,useDeferredValue:function(d,p){var b=fo();return jn(b,ps.memoizedState,d,p)},useTransition:function(){var d=Tp(cc)[0],p=fo().memoizedState;return[typeof d=="boolean"?d:kh(d),p]},useSyncExternalStore:N,useId:So,useHostTransitionStatus:sr,useFormState:to,useActionState:to,useOptimistic:function(d,p){var b=fo();return bt(b,ps,d,p)},useMemoCache:_g,useCacheRefresh:Wr};vr.useEffectEvent=_o;var tr={readContext:vi,use:Sp,useCallback:kp,useContext:vi,useEffect:Jd,useImperativeHandle:Qd,useInsertionEffect:wi,useLayoutEffect:Xd,useMemo:Mt,useReducer:Tg,useRef:Ah,useState:function(){return Tg(cc)},useDebugValue:Ja,useDeferredValue:function(d,p){var b=fo();return ps===null?er(b,d,p):jn(b,ps.memoizedState,d,p)},useTransition:function(){var d=Tg(cc)[0],p=fo().memoizedState;return[typeof d=="boolean"?d:kh(d),p]},useSyncExternalStore:N,useId:So,useHostTransitionStatus:sr,useFormState:ka,useActionState:ka,useOptimistic:function(d,p){var b=fo();return ps!==null?bt(b,ps,d,p):(b.baseState=d,[d,b.queue.dispatch])},useMemoCache:_g,useCacheRefresh:Wr};tr.useEffectEvent=_o;function Gs(d,p,b,_){p=d.memoizedState,b=b(_,p),b=b==null?p:f({},p,b),d.memoizedState=b,d.lanes===0&&(d.updateQueue.baseState=b)}var Rs={enqueueSetState:function(d,p,b){d=d._reactInternals;var _=$l(),A=Bu(_);A.payload=p,b!=null&&(A.callback=b),p=zu(d,A,_),p!==null&&(nl(p,d,_),ju(p,d,_))},enqueueReplaceState:function(d,p,b){d=d._reactInternals;var _=$l(),A=Bu(_);A.tag=1,A.payload=p,b!=null&&(A.callback=b),p=zu(d,A,_),p!==null&&(nl(p,d,_),ju(p,d,_))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var b=$l(),_=Bu(b);_.tag=2,p!=null&&(_.callback=p),p=zu(d,_,b),p!==null&&(nl(p,d,b),ju(p,d,b))}};function ni(d,p,b,_,A,R,K){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(_,R,K):p.prototype&&p.prototype.isPureReactComponent?!op(b,_)||!op(A,R):!0}function Ap(d,p,b,_){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,_),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,_),p.state!==d&&Rs.enqueueReplaceState(p,p.state,null)}function To(d,p){var b=p;if("ref"in p){b={};for(var _ in p)_!=="ref"&&(b[_]=p[_])}if(d=d.defaultProps){b===p&&(b=f({},b));for(var A in d)b[A]===void 0&&(b[A]=d[A])}return b}function Aa(d){zd(d)}function ms(d){console.error(d)}function Ws(d){zd(d)}function Ys(d,p){try{var b=d.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(_){setTimeout(function(){throw _})}}function Ms(d,p,b){try{var _=d.onCaughtError;_(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function dc(d,p,b){return b=Bu(b),b.tag=3,b.payload={element:null},b.callback=function(){Ys(d,p)},b}function Cg(d){return d=Bu(d),d.tag=3,d}function R9(d,p,b,_){var A=b.type.getDerivedStateFromError;if(typeof A=="function"){var R=_.value;d.payload=function(){return A(R)},d.callback=function(){Ms(p,b,_)}}var K=b.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(d.callback=function(){Ms(p,b,_),typeof A!="function"&&(Oh===null?Oh=new Set([this]):Oh.add(this));var ae=_.stack;this.componentDidCatch(_.value,{componentStack:ae!==null?ae:""})})}function bce(d,p,b,_,A){if(b.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(p=b.alternate,p!==null&&wh(p,b,A,!0),b=Jo.current,b!==null){switch(b.tag){case 31:case 13:return Za===null?LE():b.alternate===null&&Bo===0&&(Bo=3),b.flags&=-257,b.flags|=65536,b.lanes=A,_===gg?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([_]):p.add(_),Kk(d,_,A)),!1;case 22:return b.flags|=65536,_===gg?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([_])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([_]):b.add(_)),Kk(d,_,A)),!1}throw Error(r(435,b.tag))}return Kk(d,_,A),LE(),!1}if(Rr)return p=Jo.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=A,_!==ic&&(d=Error(r(422),{cause:_}),hp(la(d,b)))):(_!==ic&&(p=Error(r(423),{cause:_}),hp(la(p,b))),d=d.current.alternate,d.flags|=65536,A&=-A,d.lanes|=A,_=la(_,b),A=dc(d.stateNode,_,A),yg(d,A),Bo!==4&&(Bo=2)),!1;var R=Error(r(520),{cause:_});if(R=la(R,b),_y===null?_y=[R]:_y.push(R),Bo!==4&&(Bo=2),p===null)return!0;_=la(_,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,d=A&-A,b.lanes|=d,d=dc(b.stateNode,_,d),yg(b,d),!1;case 1:if(p=b.type,R=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Oh===null||!Oh.has(R))))return b.flags|=65536,A&=-A,b.lanes|=A,A=Cg(A),R9(A,d,b,_),yg(b,A),!1}b=b.return}while(b!==null);return!1}var Tk=Error(r(461)),ri=!1;function Ki(d,p,b,_){p.child=d===null?Sh(p,null,b,_):Fu(p,d.child,b,_)}function M9(d,p,b,_,A){b=b.render;var R=p.ref;if("ref"in _){var K={};for(var ae in _)ae!=="ref"&&(K[ae]=_[ae])}else K=_;return Ud(p),_=fy(d,p,b,K,R,A),ae=hy(),d!==null&&!ri?(py(d,p,A),ef(d,p,A)):(Rr&&ae&&jd(p),p.flags|=1,Ki(d,p,_,A),p.child)}function O9(d,p,b,_,A){if(d===null){var R=b.type;return typeof R=="function"&&!lg(R)&&R.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=R,D9(d,p,R,_,A)):(d=Rl(b.type,null,_,p,p.mode,A),d.ref=p.ref,d.return=p,p.child=d)}if(R=d.child,!Ok(d,A)){var K=R.memoizedProps;if(b=b.compare,b=b!==null?b:op,b(K,_)&&d.ref===p.ref)return ef(d,p,A)}return p.flags|=1,d=Il(R,_),d.ref=p.ref,d.return=p,p.child=d}function D9(d,p,b,_,A){if(d!==null){var R=d.memoizedProps;if(op(R,_)&&d.ref===p.ref)if(ri=!1,p.pendingProps=_=R,Ok(d,A))(d.flags&131072)!==0&&(ri=!0);else return p.lanes=d.lanes,ef(d,p,A)}return Ck(d,p,b,_,A)}function P9(d,p,b,_){var A=_.children,R=d!==null?d.memoizedState:null;if(d===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),_.mode==="hidden"){if((p.flags&128)!==0){if(R=R!==null?R.baseLanes|b:b,d!==null){for(_=p.child=d.child,A=0;_!==null;)A=A|_.lanes|_.childLanes,_=_.sibling;_=A&~R}else _=0,p.child=null;return L9(d,p,R,b,_)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},d!==null&&mp(p,R!==null?R.cachePool:null),R!==null?ay(p,R):ly(),uy(p);else return _=p.lanes=536870912,L9(d,p,R!==null?R.baseLanes|b:b,b,_)}else R!==null?(mp(p,R.cachePool),ay(p,R),Hu(),p.memoizedState=null):(d!==null&&mp(p,null),ly(),Hu());return Ki(d,p,A,b),p.child}function gy(d,p){return d!==null&&d.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function L9(d,p,b,_,A){var R=ry();return R=R===null?null:{parent:Lo._currentValue,pool:R},p.memoizedState={baseLanes:b,cachePool:R},d!==null&&mp(p,null),ly(),uy(p),d!==null&&wh(d,p,_,!0),p.childLanes=A,null}function TE(d,p){return p=kE({mode:p.mode,children:p.children},d.mode),p.ref=d.ref,d.child=p,p.return=d,p}function $9(d,p,b){return Fu(p,d.child,null,b),d=TE(p,p.pendingProps),d.flags|=2,Ca(p),p.memoizedState=null,d}function yce(d,p,b){var _=p.pendingProps,A=(p.flags&128)!==0;if(p.flags&=-129,d===null){if(Rr){if(_.mode==="hidden")return d=TE(p,_),p.lanes=536870912,gy(null,d);if(cy(p),(d=cs)?(d=KO(d,As),d=d!==null&&d.data==="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:Ya!==null?{id:Po,overflow:Ol}:null,retryLane:536870912,hydrationErrors:null},b=Xb(d),b.return=p,p.child=b,Qs=p,cs=null)):d=null,d===null)throw qc(p);return p.lanes=536870912,null}return TE(p,_)}var R=d.memoizedState;if(R!==null){var K=R.dehydrated;if(cy(p),A)if(p.flags&256)p.flags&=-257,p=$9(d,p,b);else if(p.memoizedState!==null)p.child=d.child,p.flags|=128,p=null;else throw Error(r(558));else if(ri||wh(d,p,b,!1),A=(b&d.childLanes)!==0,ri||A){if(_=zs,_!==null&&(K=In(_,b),K!==0&&K!==R.retryLane))throw R.retryLane=K,Hc(d,K),nl(_,d,K),Tk;LE(),p=$9(d,p,b)}else d=R.treeContext,cs=fc(K.nextSibling),Qs=p,Rr=!0,us=null,As=!1,d!==null&&ug(p,d),p=TE(p,_),p.flags|=4096;return p}return d=Il(d.child,{mode:_.mode,children:_.children}),d.ref=p.ref,p.child=d,d.return=p,d}function CE(d,p){var b=p.ref;if(b===null)d!==null&&d.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(d===null||d.ref!==b)&&(p.flags|=4194816)}}function Ck(d,p,b,_,A){return Ud(p),b=fy(d,p,b,_,void 0,A),_=hy(),d!==null&&!ri?(py(d,p,A),ef(d,p,A)):(Rr&&_&&jd(p),p.flags|=1,Ki(d,p,b,A),p.child)}function F9(d,p,b,_,A,R){return Ud(p),p.updateQueue=null,b=SE(p,_,b,A),_E(d),_=hy(),d!==null&&!ri?(py(d,p,R),ef(d,p,R)):(Rr&&_&&jd(p),p.flags|=1,Ki(d,p,b,R),p.child)}function B9(d,p,b,_,A){if(Ud(p),p.stateNode===null){var R=Gi,K=b.contextType;typeof K=="object"&&K!==null&&(R=vi(K)),R=new b(_,R),p.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Rs,p.stateNode=R,R._reactInternals=p,R=p.stateNode,R.props=_,R.state=p.memoizedState,R.refs={},Kd(p),K=b.contextType,R.context=typeof K=="object"&&K!==null?vi(K):Gi,R.state=p.memoizedState,K=b.getDerivedStateFromProps,typeof K=="function"&&(Gs(p,b,K,_),R.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(K=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),K!==R.state&&Rs.enqueueReplaceState(R,R.state,null),xp(p,_,R,A),vp(),R.state=p.memoizedState),typeof R.componentDidMount=="function"&&(p.flags|=4194308),_=!0}else if(d===null){R=p.stateNode;var ae=p.memoizedProps,ke=To(b,ae);R.props=ke;var Ye=R.context,st=b.contextType;K=Gi,typeof st=="object"&&st!==null&&(K=vi(st));var dt=b.getDerivedStateFromProps;st=typeof dt=="function"||typeof R.getSnapshotBeforeUpdate=="function",ae=p.pendingProps!==ae,st||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(ae||Ye!==K)&&Ap(p,R,_,K),Wc=!1;var Ke=p.memoizedState;R.state=Ke,xp(p,_,R,A),vp(),Ye=p.memoizedState,ae||Ke!==Ye||Wc?(typeof dt=="function"&&(Gs(p,b,dt,_),Ye=p.memoizedState),(ke=Wc||ni(p,b,ke,_,Ke,Ye,K))?(st||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(p.flags|=4194308)):(typeof R.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=_,p.memoizedState=Ye),R.props=_,R.state=Ye,R.context=K,_=ke):(typeof R.componentDidMount=="function"&&(p.flags|=4194308),_=!1)}else{R=p.stateNode,bg(d,p),K=p.memoizedProps,st=To(b,K),R.props=st,dt=p.pendingProps,Ke=R.context,Ye=b.contextType,ke=Gi,typeof Ye=="object"&&Ye!==null&&(ke=vi(Ye)),ae=b.getDerivedStateFromProps,(Ye=typeof ae=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(K!==dt||Ke!==ke)&&Ap(p,R,_,ke),Wc=!1,Ke=p.memoizedState,R.state=Ke,xp(p,_,R,A),vp();var Xe=p.memoizedState;K!==dt||Ke!==Xe||Wc||d!==null&&d.dependencies!==null&&hg(d.dependencies)?(typeof ae=="function"&&(Gs(p,b,ae,_),Xe=p.memoizedState),(st=Wc||ni(p,b,st,_,Ke,Xe,ke)||d!==null&&d.dependencies!==null&&hg(d.dependencies))?(Ye||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(_,Xe,ke),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(_,Xe,ke)),typeof R.componentDidUpdate=="function"&&(p.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof R.componentDidUpdate!="function"||K===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||K===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=1024),p.memoizedProps=_,p.memoizedState=Xe),R.props=_,R.state=Xe,R.context=ke,_=st):(typeof R.componentDidUpdate!="function"||K===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||K===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=1024),_=!1)}return R=_,CE(d,p),_=(p.flags&128)!==0,R||_?(R=p.stateNode,b=_&&typeof b.getDerivedStateFromError!="function"?null:R.render(),p.flags|=1,d!==null&&_?(p.child=Fu(p,d.child,null,A),p.child=Fu(p,null,b,A)):Ki(d,p,b,A),p.memoizedState=R.state,d=p.child):d=ef(d,p,A),d}function z9(d,p,b,_){return Pu(),p.flags|=256,Ki(d,p,b,_),p.child}var kk={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ak(d){return{baseLanes:d,cachePool:sy()}}function Nk(d,p,b){return d=d!==null?d.childLanes&~b:0,p&&(d|=Ll),d}function j9(d,p,b){var _=p.pendingProps,A=!1,R=(p.flags&128)!==0,K;if((K=R)||(K=d!==null&&d.memoizedState===null?!1:(Eo.current&2)!==0),K&&(A=!0,p.flags&=-129),K=(p.flags&32)!==0,p.flags&=-33,d===null){if(Rr){if(A?Uu(p):Hu(),(d=cs)?(d=KO(d,As),d=d!==null&&d.data!=="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:Ya!==null?{id:Po,overflow:Ol}:null,retryLane:536870912,hydrationErrors:null},b=Xb(d),b.return=p,p.child=b,Qs=p,cs=null)):d=null,d===null)throw qc(p);return d3(d)?p.lanes=32:p.lanes=536870912,null}var ae=_.children;return _=_.fallback,A?(Hu(),A=p.mode,ae=kE({mode:"hidden",children:ae},A),_=Du(_,A,b,null),ae.return=p,_.return=p,ae.sibling=_,p.child=ae,_=p.child,_.memoizedState=Ak(b),_.childLanes=Nk(d,K,b),p.memoizedState=kk,gy(null,_)):(Uu(p),Ik(p,ae))}var ke=d.memoizedState;if(ke!==null&&(ae=ke.dehydrated,ae!==null)){if(R)p.flags&256?(Uu(p),p.flags&=-257,p=Rk(d,p,b)):p.memoizedState!==null?(Hu(),p.child=d.child,p.flags|=128,p=null):(Hu(),ae=_.fallback,A=p.mode,_=kE({mode:"visible",children:_.children},A),ae=Du(ae,A,b,null),ae.flags|=2,_.return=p,ae.return=p,_.sibling=ae,p.child=_,Fu(p,d.child,null,b),_=p.child,_.memoizedState=Ak(b),_.childLanes=Nk(d,K,b),p.memoizedState=kk,p=gy(null,_));else if(Uu(p),d3(ae)){if(K=ae.nextSibling&&ae.nextSibling.dataset,K)var Ye=K.dgst;K=Ye,_=Error(r(419)),_.stack="",_.digest=K,hp({value:_,source:null,stack:null}),p=Rk(d,p,b)}else if(ri||wh(d,p,b,!1),K=(b&d.childLanes)!==0,ri||K){if(K=zs,K!==null&&(_=In(K,b),_!==0&&_!==ke.retryLane))throw ke.retryLane=_,Hc(d,_),nl(K,d,_),Tk;u3(ae)||LE(),p=Rk(d,p,b)}else u3(ae)?(p.flags|=192,p.child=d.child,p=null):(d=ke.treeContext,cs=fc(ae.nextSibling),Qs=p,Rr=!0,us=null,As=!1,d!==null&&ug(p,d),p=Ik(p,_.children),p.flags|=4096);return p}return A?(Hu(),ae=_.fallback,A=p.mode,ke=d.child,Ye=ke.sibling,_=Il(ke,{mode:"hidden",children:_.children}),_.subtreeFlags=ke.subtreeFlags&65011712,Ye!==null?ae=Il(Ye,ae):(ae=Du(ae,A,b,null),ae.flags|=2),ae.return=p,_.return=p,_.sibling=ae,p.child=_,gy(null,_),_=p.child,ae=d.child.memoizedState,ae===null?ae=Ak(b):(A=ae.cachePool,A!==null?(ke=Lo._currentValue,A=A.parent!==ke?{parent:ke,pool:ke}:A):A=sy(),ae={baseLanes:ae.baseLanes|b,cachePool:A}),_.memoizedState=ae,_.childLanes=Nk(d,K,b),p.memoizedState=kk,gy(d.child,_)):(Uu(p),b=d.child,d=b.sibling,b=Il(b,{mode:"visible",children:_.children}),b.return=p,b.sibling=null,d!==null&&(K=p.deletions,K===null?(p.deletions=[d],p.flags|=16):K.push(d)),p.child=b,p.memoizedState=null,b)}function Ik(d,p){return p=kE({mode:"visible",children:p},d.mode),p.return=d,d.child=p}function kE(d,p){return d=Do(22,d,null,p),d.lanes=0,d}function Rk(d,p,b){return Fu(p,d.child,null,b),d=Ik(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function U9(d,p,b){d.lanes|=p;var _=d.alternate;_!==null&&(_.lanes|=p),ty(d.return,p,b)}function Mk(d,p,b,_,A,R){var K=d.memoizedState;K===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:_,tail:b,tailMode:A,treeForkCount:R}:(K.isBackwards=p,K.rendering=null,K.renderingStartTime=0,K.last=_,K.tail=b,K.tailMode=A,K.treeForkCount=R)}function H9(d,p,b){var _=p.pendingProps,A=_.revealOrder,R=_.tail;_=_.children;var K=Eo.current,ae=(K&2)!==0;if(ae?(K=K&1|2,p.flags|=128):K&=1,Q(Eo,K),Ki(d,p,_,b),_=Rr?xh:0,!ae&&d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&U9(d,b,p);else if(d.tag===19)U9(d,b,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(A){case"forwards":for(b=p.child,A=null;b!==null;)d=b.alternate,d!==null&&wg(d)===null&&(A=b),b=b.sibling;b=A,b===null?(A=p.child,p.child=null):(A=b.sibling,b.sibling=null),Mk(p,!1,A,b,R,_);break;case"backwards":case"unstable_legacy-backwards":for(b=null,A=p.child,p.child=null;A!==null;){if(d=A.alternate,d!==null&&wg(d)===null){p.child=A;break}d=A.sibling,A.sibling=b,b=A,A=d}Mk(p,!0,b,null,R,_);break;case"together":Mk(p,!1,null,null,void 0,_);break;default:p.memoizedState=null}return p.child}function ef(d,p,b){if(d!==null&&(p.dependencies=d.dependencies),Mh|=p.lanes,(b&p.childLanes)===0)if(d!==null){if(wh(d,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(d!==null&&p.child!==d.child)throw Error(r(153));if(p.child!==null){for(d=p.child,b=Il(d,d.pendingProps),p.child=b,b.return=p;d.sibling!==null;)d=d.sibling,b=b.sibling=Il(d,d.pendingProps),b.return=p;b.sibling=null}return p.child}function Ok(d,p){return(d.lanes&p)!==0?!0:(d=d.dependencies,!!(d!==null&&hg(d)))}function vce(d,p,b){switch(p.tag){case 3:Fe(p,p.stateNode.containerInfo),Lu(p,Lo,d.memoizedState.cache),Pu();break;case 27:case 5:Re(p);break;case 4:Fe(p,p.stateNode.containerInfo);break;case 10:Lu(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,cy(p),null;break;case 13:var _=p.memoizedState;if(_!==null)return _.dehydrated!==null?(Uu(p),p.flags|=128,null):(b&p.child.childLanes)!==0?j9(d,p,b):(Uu(p),d=ef(d,p,b),d!==null?d.sibling:null);Uu(p);break;case 19:var A=(d.flags&128)!==0;if(_=(b&p.childLanes)!==0,_||(wh(d,p,b,!1),_=(b&p.childLanes)!==0),A){if(_)return H9(d,p,b);p.flags|=128}if(A=p.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Q(Eo,Eo.current),_)break;return null;case 22:return p.lanes=0,P9(d,p,b,p.pendingProps);case 24:Lu(p,Lo,d.memoizedState.cache)}return ef(d,p,b)}function V9(d,p,b){if(d!==null)if(d.memoizedProps!==p.pendingProps)ri=!0;else{if(!Ok(d,b)&&(p.flags&128)===0)return ri=!1,vce(d,p,b);ri=(d.flags&131072)!==0}else ri=!1,Rr&&(p.flags&1048576)!==0&&pE(p,xh,p.index);switch(p.lanes=0,p.tag){case 16:e:{var _=p.pendingProps;if(d=Ka(p.elementType),p.type=d,typeof d=="function")lg(d)?(_=To(d,_),p.tag=1,p=B9(null,p,d,_,b)):(p.tag=0,p=Ck(null,p,d,_,b));else{if(d!=null){var A=d.$$typeof;if(A===I){p.tag=11,p=M9(null,p,d,_,b);break e}else if(A===P){p.tag=14,p=O9(null,p,d,_,b);break e}}throw p=G(d)||d,Error(r(306,p,""))}}return p;case 0:return Ck(d,p,p.type,p.pendingProps,b);case 1:return _=p.type,A=To(_,p.pendingProps),B9(d,p,_,A,b);case 3:e:{if(Fe(p,p.stateNode.containerInfo),d===null)throw Error(r(387));_=p.pendingProps;var R=p.memoizedState;A=R.element,bg(d,p),xp(p,_,null,b);var K=p.memoizedState;if(_=K.cache,Lu(p,Lo,_),_!==R.cache&&fg(p,[Lo],b,!0),vp(),_=K.element,R.isDehydrated)if(R={element:_,isDehydrated:!1,cache:K.cache},p.updateQueue.baseState=R,p.memoizedState=R,p.flags&256){p=z9(d,p,_,b);break e}else if(_!==A){A=la(Error(r(424)),p),hp(A),p=z9(d,p,_,b);break e}else{switch(d=p.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(cs=fc(d.firstChild),Qs=p,Rr=!0,us=null,As=!0,b=Sh(p,null,_,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Pu(),_===A){p=ef(d,p,b);break e}Ki(d,p,_,b)}p=p.child}return p;case 26:return CE(d,p),d===null?(b=tD(p.type,null,p.pendingProps,null))?p.memoizedState=b:Rr||(b=p.type,d=p.pendingProps,_=HE(Ce.current).createElement(b),_[pr]=p,_[Io]=d,Zi(_,b,d),gt(_),p.stateNode=_):p.memoizedState=tD(p.type,d.memoizedProps,p.pendingProps,d.memoizedState),null;case 27:return Re(p),d===null&&Rr&&(_=p.stateNode=XO(p.type,p.pendingProps,Ce.current),Qs=p,As=!0,A=cs,$h(p.type)?(f3=A,cs=fc(_.firstChild)):cs=A),Ki(d,p,p.pendingProps.children,b),CE(d,p),d===null&&(p.flags|=4194304),p.child;case 5:return d===null&&Rr&&((A=_=cs)&&(_=Kce(_,p.type,p.pendingProps,As),_!==null?(p.stateNode=_,Qs=p,cs=fc(_.firstChild),As=!1,A=!0):A=!1),A||qc(p)),Re(p),A=p.type,R=p.pendingProps,K=d!==null?d.memoizedProps:null,_=R.children,a3(A,R)?_=null:K!==null&&a3(A,K)&&(p.flags|=32),p.memoizedState!==null&&(A=fy(d,p,Sk,null,null,b),Ry._currentValue=A),CE(d,p),Ki(d,p,_,b),p.child;case 6:return d===null&&Rr&&((d=b=cs)&&(b=Zce(b,p.pendingProps,As),b!==null?(p.stateNode=b,Qs=p,cs=null,d=!0):d=!1),d||qc(p)),null;case 13:return j9(d,p,b);case 4:return Fe(p,p.stateNode.containerInfo),_=p.pendingProps,d===null?p.child=Fu(p,null,_,b):Ki(d,p,_,b),p.child;case 11:return M9(d,p,p.type,p.pendingProps,b);case 7:return Ki(d,p,p.pendingProps,b),p.child;case 8:return Ki(d,p,p.pendingProps.children,b),p.child;case 12:return Ki(d,p,p.pendingProps.children,b),p.child;case 10:return _=p.pendingProps,Lu(p,p.type,_.value),Ki(d,p,_.children,b),p.child;case 9:return A=p.type._context,_=p.pendingProps.children,Ud(p),A=vi(A),_=_(A),p.flags|=1,Ki(d,p,_,b),p.child;case 14:return O9(d,p,p.type,p.pendingProps,b);case 15:return D9(d,p,p.type,p.pendingProps,b);case 19:return H9(d,p,b);case 31:return yce(d,p,b);case 22:return P9(d,p,b,p.pendingProps);case 24:return Ud(p),_=vi(Lo),d===null?(A=ry(),A===null&&(A=zs,R=ny(),A.pooledCache=R,R.refCount++,R!==null&&(A.pooledCacheLanes|=b),A=R),p.memoizedState={parent:_,cache:A},Kd(p),Lu(p,Lo,A)):((d.lanes&b)!==0&&(bg(d,p),xp(p,null,null,b),vp()),A=d.memoizedState,R=p.memoizedState,A.parent!==_?(A={parent:_,cache:_},p.memoizedState=A,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=A),Lu(p,Lo,_)):(_=R.cache,Lu(p,Lo,_),_!==A.cache&&fg(p,[Lo],b,!0))),Ki(d,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function tf(d){d.flags|=4}function Dk(d,p,b,_,A){if((p=(d.mode&32)!==0)&&(p=!1),p){if(d.flags|=16777216,(A&335544128)===A)if(d.stateNode.complete)d.flags|=8192;else if(bO())d.flags|=8192;else throw Yd=gg,gp}else d.flags&=-16777217}function q9(d,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!iD(p))if(bO())d.flags|=8192;else throw Yd=gg,gp}function AE(d,p){p!==null&&(d.flags|=4),d.flags&16384&&(p=d.tag!==22?Zt():536870912,d.lanes|=p,Ig|=p)}function by(d,p){if(!Rr)switch(d.tailMode){case"hidden":p=d.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?d.tail=null:b.sibling=null;break;case"collapsed":b=d.tail;for(var _=null;b!==null;)b.alternate!==null&&(_=b),b=b.sibling;_===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:_.sibling=null}}function ro(d){var p=d.alternate!==null&&d.alternate.child===d.child,b=0,_=0;if(p)for(var A=d.child;A!==null;)b|=A.lanes|A.childLanes,_|=A.subtreeFlags&65011712,_|=A.flags&65011712,A.return=d,A=A.sibling;else for(A=d.child;A!==null;)b|=A.lanes|A.childLanes,_|=A.subtreeFlags,_|=A.flags,A.return=d,A=A.sibling;return d.subtreeFlags|=_,d.childLanes=b,p}function xce(d,p,b){var _=p.pendingProps;switch(Di(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ro(p),null;case 1:return ro(p),null;case 3:return b=p.stateNode,_=null,d!==null&&(_=d.memoizedState.cache),p.memoizedState.cache!==_&&(p.flags|=2048),Gc(Lo),De(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(d===null||d.child===null)&&(Sn(p)?tf(p):d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,ey())),ro(p),null;case 26:var A=p.type,R=p.memoizedState;return d===null?(tf(p),R!==null?(ro(p),q9(p,R)):(ro(p),Dk(p,A,null,_,b))):R?R!==d.memoizedState?(tf(p),ro(p),q9(p,R)):(ro(p),p.flags&=-16777217):(d=d.memoizedProps,d!==_&&tf(p),ro(p),Dk(p,A,d,_,b)),null;case 27:if(tt(p),b=Ce.current,A=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==_&&tf(p);else{if(!_){if(p.stateNode===null)throw Error(r(166));return ro(p),null}d=Te.current,Sn(p)?Jn(p):(d=XO(A,_,b),p.stateNode=d,tf(p))}return ro(p),null;case 5:if(tt(p),A=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==_&&tf(p);else{if(!_){if(p.stateNode===null)throw Error(r(166));return ro(p),null}if(R=Te.current,Sn(p))Jn(p);else{var K=HE(Ce.current);switch(R){case 1:R=K.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:R=K.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":R=K.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":R=K.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":R=K.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof _.is=="string"?K.createElement("select",{is:_.is}):K.createElement("select"),_.multiple?R.multiple=!0:_.size&&(R.size=_.size);break;default:R=typeof _.is=="string"?K.createElement(A,{is:_.is}):K.createElement(A)}}R[pr]=p,R[Io]=_;e:for(K=p.child;K!==null;){if(K.tag===5||K.tag===6)R.appendChild(K.stateNode);else if(K.tag!==4&&K.tag!==27&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===p)break e;for(;K.sibling===null;){if(K.return===null||K.return===p)break e;K=K.return}K.sibling.return=K.return,K=K.sibling}p.stateNode=R;e:switch(Zi(R,A,_),A){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}_&&tf(p)}}return ro(p),Dk(p,p.type,d===null?null:d.memoizedProps,p.pendingProps,b),null;case 6:if(d&&p.stateNode!=null)d.memoizedProps!==_&&tf(p);else{if(typeof _!="string"&&p.stateNode===null)throw Error(r(166));if(d=Ce.current,Sn(p)){if(d=p.stateNode,b=p.memoizedProps,_=null,A=Qs,A!==null)switch(A.tag){case 27:case 5:_=A.memoizedProps}d[pr]=p,d=!!(d.nodeValue===b||_!==null&&_.suppressHydrationWarning===!0||jO(d.nodeValue,b)),d||qc(p,!0)}else d=HE(d).createTextNode(_),d[pr]=p,p.stateNode=d}return ro(p),null;case 31:if(b=p.memoizedState,d===null||d.memoizedState!==null){if(_=Sn(p),b!==null){if(d===null){if(!_)throw Error(r(318));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(557));d[pr]=p}else Pu(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;ro(p),d=!1}else b=ey(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=b),d=!0;if(!d)return p.flags&256?(Ca(p),p):(Ca(p),null);if((p.flags&128)!==0)throw Error(r(558))}return ro(p),null;case 13:if(_=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(A=Sn(p),_!==null&&_.dehydrated!==null){if(d===null){if(!A)throw Error(r(318));if(A=p.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[pr]=p}else Pu(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;ro(p),A=!1}else A=ey(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=A),A=!0;if(!A)return p.flags&256?(Ca(p),p):(Ca(p),null)}return Ca(p),(p.flags&128)!==0?(p.lanes=b,p):(b=_!==null,d=d!==null&&d.memoizedState!==null,b&&(_=p.child,A=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(A=_.alternate.memoizedState.cachePool.pool),R=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(R=_.memoizedState.cachePool.pool),R!==A&&(_.flags|=2048)),b!==d&&b&&(p.child.flags|=8192),AE(p,p.updateQueue),ro(p),null);case 4:return De(),d===null&&n3(p.stateNode.containerInfo),ro(p),null;case 10:return Gc(p.type),ro(p),null;case 19:if(oe(Eo),_=p.memoizedState,_===null)return ro(p),null;if(A=(p.flags&128)!==0,R=_.rendering,R===null)if(A)by(_,!1);else{if(Bo!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(R=wg(d),R!==null){for(p.flags|=128,by(_,!1),d=R.updateQueue,p.updateQueue=d,AE(p,d),p.subtreeFlags=0,d=b,b=p.child;b!==null;)hE(b,d),b=b.sibling;return Q(Eo,Eo.current&1|2),Rr&&wo(p,_.treeForkCount),p.child}d=d.sibling}_.tail!==null&&Le()>OE&&(p.flags|=128,A=!0,by(_,!1),p.lanes=4194304)}else{if(!A)if(d=wg(R),d!==null){if(p.flags|=128,A=!0,d=d.updateQueue,p.updateQueue=d,AE(p,d),by(_,!0),_.tail===null&&_.tailMode==="hidden"&&!R.alternate&&!Rr)return ro(p),null}else 2*Le()-_.renderingStartTime>OE&&b!==536870912&&(p.flags|=128,A=!0,by(_,!1),p.lanes=4194304);_.isBackwards?(R.sibling=p.child,p.child=R):(d=_.last,d!==null?d.sibling=R:p.child=R,_.last=R)}return _.tail!==null?(d=_.tail,_.rendering=d,_.tail=d.sibling,_.renderingStartTime=Le(),d.sibling=null,b=Eo.current,Q(Eo,A?b&1|2:b&1),Rr&&wo(p,_.treeForkCount),d):(ro(p),null);case 22:case 23:return Ca(p),wp(),_=p.memoizedState!==null,d!==null?d.memoizedState!==null!==_&&(p.flags|=8192):_&&(p.flags|=8192),_?(b&536870912)!==0&&(p.flags&128)===0&&(ro(p),p.subtreeFlags&6&&(p.flags|=8192)):ro(p),b=p.updateQueue,b!==null&&AE(p,b.retryQueue),b=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),_=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(_=p.memoizedState.cachePool.pool),_!==b&&(p.flags|=2048),d!==null&&oe(Gd),null;case 24:return b=null,d!==null&&(b=d.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),Gc(Lo),ro(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function wce(d,p){switch(Di(p),p.tag){case 1:return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return Gc(Lo),De(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 26:case 27:case 5:return tt(p),null;case 31:if(p.memoizedState!==null){if(Ca(p),p.alternate===null)throw Error(r(340));Pu()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 13:if(Ca(p),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Pu()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return oe(Eo),null;case 4:return De(),null;case 10:return Gc(p.type),null;case 22:case 23:return Ca(p),wp(),d!==null&&oe(Gd),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 24:return Gc(Lo),null;case 25:return null;default:return null}}function G9(d,p){switch(Di(p),p.tag){case 3:Gc(Lo),De();break;case 26:case 27:case 5:tt(p);break;case 4:De();break;case 31:p.memoizedState!==null&&Ca(p);break;case 13:Ca(p);break;case 19:oe(Eo);break;case 10:Gc(p.type);break;case 22:case 23:Ca(p),wp(),d!==null&&oe(Gd);break;case 24:Gc(Lo)}}function yy(d,p){try{var b=p.updateQueue,_=b!==null?b.lastEffect:null;if(_!==null){var A=_.next;b=A;do{if((b.tag&d)===d){_=void 0;var R=b.create,K=b.inst;_=R(),K.destroy=_}b=b.next}while(b!==A)}}catch(ae){ws(p,p.return,ae)}}function Ih(d,p,b){try{var _=p.updateQueue,A=_!==null?_.lastEffect:null;if(A!==null){var R=A.next;_=R;do{if((_.tag&d)===d){var K=_.inst,ae=K.destroy;if(ae!==void 0){K.destroy=void 0,A=p;var ke=b,Ye=ae;try{Ye()}catch(st){ws(A,ke,st)}}}_=_.next}while(_!==R)}}catch(st){ws(p,p.return,st)}}function W9(d){var p=d.updateQueue;if(p!==null){var b=d.stateNode;try{EE(p,b)}catch(_){ws(d,d.return,_)}}}function Y9(d,p,b){b.props=To(d.type,d.memoizedProps),b.state=d.memoizedState;try{b.componentWillUnmount()}catch(_){ws(d,p,_)}}function vy(d,p){try{var b=d.ref;if(b!==null){switch(d.tag){case 26:case 27:case 5:var _=d.stateNode;break;case 30:_=d.stateNode;break;default:_=d.stateNode}typeof b=="function"?d.refCleanup=b(_):b.current=_}}catch(A){ws(d,p,A)}}function Wu(d,p){var b=d.ref,_=d.refCleanup;if(b!==null)if(typeof _=="function")try{_()}catch(A){ws(d,p,A)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(A){ws(d,p,A)}else b.current=null}function K9(d){var p=d.type,b=d.memoizedProps,_=d.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&_.focus();break e;case"img":b.src?_.src=b.src:b.srcSet&&(_.srcset=b.srcSet)}}catch(A){ws(d,d.return,A)}}function Pk(d,p,b){try{var _=d.stateNode;Hce(_,d.type,b,p),_[Io]=p}catch(A){ws(d,d.return,A)}}function Z9(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&$h(d.type)||d.tag===4}function Lk(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Z9(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&$h(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function $k(d,p,b){var _=d.tag;if(_===5||_===6)d=d.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(d,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(d),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=Lt));else if(_!==4&&(_===27&&$h(d.type)&&(b=d.stateNode,p=null),d=d.child,d!==null))for($k(d,p,b),d=d.sibling;d!==null;)$k(d,p,b),d=d.sibling}function NE(d,p,b){var _=d.tag;if(_===5||_===6)d=d.stateNode,p?b.insertBefore(d,p):b.appendChild(d);else if(_!==4&&(_===27&&$h(d.type)&&(b=d.stateNode),d=d.child,d!==null))for(NE(d,p,b),d=d.sibling;d!==null;)NE(d,p,b),d=d.sibling}function J9(d){var p=d.stateNode,b=d.memoizedProps;try{for(var _=d.type,A=p.attributes;A.length;)p.removeAttributeNode(A[0]);Zi(p,_,b),p[pr]=d,p[Io]=b}catch(R){ws(d,d.return,R)}}var nf=!1,si=!1,Fk=!1,X9=typeof WeakSet=="function"?WeakSet:Set,Pi=null;function Ece(d,p){if(d=d.containerInfo,o3=ZE,d=mh(d),ip(d)){if("selectionStart"in d)var b={start:d.selectionStart,end:d.selectionEnd};else e:{b=(b=d.ownerDocument)&&b.defaultView||window;var _=b.getSelection&&b.getSelection();if(_&&_.rangeCount!==0){b=_.anchorNode;var A=_.anchorOffset,R=_.focusNode;_=_.focusOffset;try{b.nodeType,R.nodeType}catch{b=null;break e}var K=0,ae=-1,ke=-1,Ye=0,st=0,dt=d,Ke=null;t:for(;;){for(var Xe;dt!==b||A!==0&&dt.nodeType!==3||(ae=K+A),dt!==R||_!==0&&dt.nodeType!==3||(ke=K+_),dt.nodeType===3&&(K+=dt.nodeValue.length),(Xe=dt.firstChild)!==null;)Ke=dt,dt=Xe;for(;;){if(dt===d)break t;if(Ke===b&&++Ye===A&&(ae=K),Ke===R&&++st===_&&(ke=K),(Xe=dt.nextSibling)!==null)break;dt=Ke,Ke=dt.parentNode}dt=Xe}b=ae===-1||ke===-1?null:{start:ae,end:ke}}else b=null}b=b||{start:0,end:0}}else b=null;for(i3={focusedElem:d,selectionRange:b},ZE=!1,Pi=p;Pi!==null;)if(p=Pi,d=p.child,(p.subtreeFlags&1028)!==0&&d!==null)d.return=p,Pi=d;else for(;Pi!==null;){switch(p=Pi,R=p.alternate,d=p.flags,p.tag){case 0:if((d&4)!==0&&(d=p.updateQueue,d=d!==null?d.events:null,d!==null))for(b=0;b<d.length;b++)A=d[b],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((d&1024)!==0&&R!==null){d=void 0,b=p,A=R.memoizedProps,R=R.memoizedState,_=b.stateNode;try{var un=To(b.type,A);d=_.getSnapshotBeforeUpdate(un,R),_.__reactInternalSnapshotBeforeUpdate=d}catch(Un){ws(b,b.return,Un)}}break;case 3:if((d&1024)!==0){if(d=p.stateNode.containerInfo,b=d.nodeType,b===9)c3(d);else if(b===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":c3(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=p.sibling,d!==null){d.return=p.return,Pi=d;break}Pi=p.return}}function Q9(d,p,b){var _=b.flags;switch(b.tag){case 0:case 11:case 15:sf(d,b),_&4&&yy(5,b);break;case 1:if(sf(d,b),_&4)if(d=b.stateNode,p===null)try{d.componentDidMount()}catch(K){ws(b,b.return,K)}else{var A=To(b.type,p.memoizedProps);p=p.memoizedState;try{d.componentDidUpdate(A,p,d.__reactInternalSnapshotBeforeUpdate)}catch(K){ws(b,b.return,K)}}_&64&&W9(b),_&512&&vy(b,b.return);break;case 3:if(sf(d,b),_&64&&(d=b.updateQueue,d!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{EE(d,p)}catch(K){ws(b,b.return,K)}}break;case 27:p===null&&_&4&&J9(b);case 26:case 5:sf(d,b),p===null&&_&4&&K9(b),_&512&&vy(b,b.return);break;case 12:sf(d,b);break;case 31:sf(d,b),_&4&&nO(d,b);break;case 13:sf(d,b),_&4&&rO(d,b),_&64&&(d=b.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(b=Rce.bind(null,b),Jce(d,b))));break;case 22:if(_=b.memoizedState!==null||nf,!_){p=p!==null&&p.memoizedState!==null||si,A=nf;var R=si;nf=_,(si=p)&&!R?of(d,b,(b.subtreeFlags&8772)!==0):sf(d,b),nf=A,si=R}break;case 30:break;default:sf(d,b)}}function eO(d){var p=d.alternate;p!==null&&(d.alternate=null,eO(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&Kn(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var ho=null,Xa=!1;function rf(d,p,b){for(b=b.child;b!==null;)tO(d,p,b),b=b.sibling}function tO(d,p,b){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Be,b)}catch{}switch(b.tag){case 26:si||Wu(b,p),rf(d,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:si||Wu(b,p);var _=ho,A=Xa;$h(b.type)&&(ho=b.stateNode,Xa=!1),rf(d,p,b),Ay(b.stateNode),ho=_,Xa=A;break;case 5:si||Wu(b,p);case 6:if(_=ho,A=Xa,ho=null,rf(d,p,b),ho=_,Xa=A,ho!==null)if(Xa)try{(ho.nodeType===9?ho.body:ho.nodeName==="HTML"?ho.ownerDocument.body:ho).removeChild(b.stateNode)}catch(R){ws(b,p,R)}else try{ho.removeChild(b.stateNode)}catch(R){ws(b,p,R)}break;case 18:ho!==null&&(Xa?(d=ho,WO(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,b.stateNode),Fg(d)):WO(ho,b.stateNode));break;case 4:_=ho,A=Xa,ho=b.stateNode.containerInfo,Xa=!0,rf(d,p,b),ho=_,Xa=A;break;case 0:case 11:case 14:case 15:Ih(2,b,p),si||Ih(4,b,p),rf(d,p,b);break;case 1:si||(Wu(b,p),_=b.stateNode,typeof _.componentWillUnmount=="function"&&Y9(b,p,_)),rf(d,p,b);break;case 21:rf(d,p,b);break;case 22:si=(_=si)||b.memoizedState!==null,rf(d,p,b),si=_;break;default:rf(d,p,b)}}function nO(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{Fg(d)}catch(b){ws(p,p.return,b)}}}function rO(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Fg(d)}catch(b){ws(p,p.return,b)}}function _ce(d){switch(d.tag){case 31:case 13:case 19:var p=d.stateNode;return p===null&&(p=d.stateNode=new X9),p;case 22:return d=d.stateNode,p=d._retryCache,p===null&&(p=d._retryCache=new X9),p;default:throw Error(r(435,d.tag))}}function IE(d,p){var b=_ce(d);p.forEach(function(_){if(!b.has(_)){b.add(_);var A=Mce.bind(null,d,_);_.then(A,A)}})}function Qa(d,p){var b=p.deletions;if(b!==null)for(var _=0;_<b.length;_++){var A=b[_],R=d,K=p,ae=K;e:for(;ae!==null;){switch(ae.tag){case 27:if($h(ae.type)){ho=ae.stateNode,Xa=!1;break e}break;case 5:ho=ae.stateNode,Xa=!1;break e;case 3:case 4:ho=ae.stateNode.containerInfo,Xa=!0;break e}ae=ae.return}if(ho===null)throw Error(r(160));tO(R,K,A),ho=null,Xa=!1,R=A.alternate,R!==null&&(R.return=null),A.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)sO(p,d),p=p.sibling}var Zc=null;function sO(d,p){var b=d.alternate,_=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Qa(p,d),el(d),_&4&&(Ih(3,d,d.return),yy(3,d),Ih(5,d,d.return));break;case 1:Qa(p,d),el(d),_&512&&(si||b===null||Wu(b,b.return)),_&64&&nf&&(d=d.updateQueue,d!==null&&(_=d.callbacks,_!==null&&(b=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=b===null?_:b.concat(_))));break;case 26:var A=Zc;if(Qa(p,d),el(d),_&512&&(si||b===null||Wu(b,b.return)),_&4){var R=b!==null?b.memoizedState:null;if(_=d.memoizedState,b===null)if(_===null)if(d.stateNode===null){e:{_=d.type,b=d.memoizedProps,A=A.ownerDocument||A;t:switch(_){case"title":R=A.getElementsByTagName("title")[0],(!R||R[ks]||R[pr]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=A.createElement(_),A.head.insertBefore(R,A.querySelector("head > title"))),Zi(R,_,b),R[pr]=d,gt(R),_=R;break e;case"link":var K=sD("link","href",A).get(_+(b.href||""));if(K){for(var ae=0;ae<K.length;ae++)if(R=K[ae],R.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&R.getAttribute("rel")===(b.rel==null?null:b.rel)&&R.getAttribute("title")===(b.title==null?null:b.title)&&R.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){K.splice(ae,1);break t}}R=A.createElement(_),Zi(R,_,b),A.head.appendChild(R);break;case"meta":if(K=sD("meta","content",A).get(_+(b.content||""))){for(ae=0;ae<K.length;ae++)if(R=K[ae],R.getAttribute("content")===(b.content==null?null:""+b.content)&&R.getAttribute("name")===(b.name==null?null:b.name)&&R.getAttribute("property")===(b.property==null?null:b.property)&&R.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&R.getAttribute("charset")===(b.charSet==null?null:b.charSet)){K.splice(ae,1);break t}}R=A.createElement(_),Zi(R,_,b),A.head.appendChild(R);break;default:throw Error(r(468,_))}R[pr]=d,gt(R),_=R}d.stateNode=_}else oD(A,d.type,d.stateNode);else d.stateNode=rD(A,_,d.memoizedProps);else R!==_?(R===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):R.count--,_===null?oD(A,d.type,d.stateNode):rD(A,_,d.memoizedProps)):_===null&&d.stateNode!==null&&Pk(d,d.memoizedProps,b.memoizedProps)}break;case 27:Qa(p,d),el(d),_&512&&(si||b===null||Wu(b,b.return)),b!==null&&_&4&&Pk(d,d.memoizedProps,b.memoizedProps);break;case 5:if(Qa(p,d),el(d),_&512&&(si||b===null||Wu(b,b.return)),d.flags&32){A=d.stateNode;try{Pn(A,"")}catch(un){ws(d,d.return,un)}}_&4&&d.stateNode!=null&&(A=d.memoizedProps,Pk(d,A,b!==null?b.memoizedProps:A)),_&1024&&(Fk=!0);break;case 6:if(Qa(p,d),el(d),_&4){if(d.stateNode===null)throw Error(r(162));_=d.memoizedProps,b=d.stateNode;try{b.nodeValue=_}catch(un){ws(d,d.return,un)}}break;case 3:if(GE=null,A=Zc,Zc=VE(p.containerInfo),Qa(p,d),Zc=A,el(d),_&4&&b!==null&&b.memoizedState.isDehydrated)try{Fg(p.containerInfo)}catch(un){ws(d,d.return,un)}Fk&&(Fk=!1,oO(d));break;case 4:_=Zc,Zc=VE(d.stateNode.containerInfo),Qa(p,d),el(d),Zc=_;break;case 12:Qa(p,d),el(d);break;case 31:Qa(p,d),el(d),_&4&&(_=d.updateQueue,_!==null&&(d.updateQueue=null,IE(d,_)));break;case 13:Qa(p,d),el(d),d.child.flags&8192&&d.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(ME=Le()),_&4&&(_=d.updateQueue,_!==null&&(d.updateQueue=null,IE(d,_)));break;case 22:A=d.memoizedState!==null;var ke=b!==null&&b.memoizedState!==null,Ye=nf,st=si;if(nf=Ye||A,si=st||ke,Qa(p,d),si=st,nf=Ye,el(d),_&8192)e:for(p=d.stateNode,p._visibility=A?p._visibility&-2:p._visibility|1,A&&(b===null||ke||nf||si||Np(d)),b=null,p=d;;){if(p.tag===5||p.tag===26){if(b===null){ke=b=p;try{if(R=ke.stateNode,A)K=R.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{ae=ke.stateNode;var dt=ke.memoizedProps.style,Ke=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;ae.style.display=Ke==null||typeof Ke=="boolean"?"":(""+Ke).trim()}}catch(un){ws(ke,ke.return,un)}}}else if(p.tag===6){if(b===null){ke=p;try{ke.stateNode.nodeValue=A?"":ke.memoizedProps}catch(un){ws(ke,ke.return,un)}}}else if(p.tag===18){if(b===null){ke=p;try{var Xe=ke.stateNode;A?YO(Xe,!0):YO(ke.stateNode,!1)}catch(un){ws(ke,ke.return,un)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===d)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break e;for(;p.sibling===null;){if(p.return===null||p.return===d)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}_&4&&(_=d.updateQueue,_!==null&&(b=_.retryQueue,b!==null&&(_.retryQueue=null,IE(d,b))));break;case 19:Qa(p,d),el(d),_&4&&(_=d.updateQueue,_!==null&&(d.updateQueue=null,IE(d,_)));break;case 30:break;case 21:break;default:Qa(p,d),el(d)}}function el(d){var p=d.flags;if(p&2){try{for(var b,_=d.return;_!==null;){if(Z9(_)){b=_;break}_=_.return}if(b==null)throw Error(r(160));switch(b.tag){case 27:var A=b.stateNode,R=Lk(d);NE(d,R,A);break;case 5:var K=b.stateNode;b.flags&32&&(Pn(K,""),b.flags&=-33);var ae=Lk(d);NE(d,ae,K);break;case 3:case 4:var ke=b.stateNode.containerInfo,Ye=Lk(d);$k(d,Ye,ke);break;default:throw Error(r(161))}}catch(st){ws(d,d.return,st)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function oO(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var p=d;oO(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),d=d.sibling}}function sf(d,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)Q9(d,p.alternate,p),p=p.sibling}function Np(d){for(d=d.child;d!==null;){var p=d;switch(p.tag){case 0:case 11:case 14:case 15:Ih(4,p,p.return),Np(p);break;case 1:Wu(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&Y9(p,p.return,b),Np(p);break;case 27:Ay(p.stateNode);case 26:case 5:Wu(p,p.return),Np(p);break;case 22:p.memoizedState===null&&Np(p);break;case 30:Np(p);break;default:Np(p)}d=d.sibling}}function of(d,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var _=p.alternate,A=d,R=p,K=R.flags;switch(R.tag){case 0:case 11:case 15:of(A,R,b),yy(4,R);break;case 1:if(of(A,R,b),_=R,A=_.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ye){ws(_,_.return,Ye)}if(_=R,A=_.updateQueue,A!==null){var ae=_.stateNode;try{var ke=A.shared.hiddenCallbacks;if(ke!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ke.length;A++)$o(ke[A],ae)}catch(Ye){ws(_,_.return,Ye)}}b&&K&64&&W9(R),vy(R,R.return);break;case 27:J9(R);case 26:case 5:of(A,R,b),b&&_===null&&K&4&&K9(R),vy(R,R.return);break;case 12:of(A,R,b);break;case 31:of(A,R,b),b&&K&4&&nO(A,R);break;case 13:of(A,R,b),b&&K&4&&rO(A,R);break;case 22:R.memoizedState===null&&of(A,R,b),vy(R,R.return);break;case 30:break;default:of(A,R,b)}p=p.sibling}}function Bk(d,p){var b=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),d=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(d=p.memoizedState.cachePool.pool),d!==b&&(d!=null&&d.refCount++,b!=null&&Hd(b))}function zk(d,p){d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&Hd(d))}function Jc(d,p,b,_){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)iO(d,p,b,_),p=p.sibling}function iO(d,p,b,_){var A=p.flags;switch(p.tag){case 0:case 11:case 15:Jc(d,p,b,_),A&2048&&yy(9,p);break;case 1:Jc(d,p,b,_);break;case 3:Jc(d,p,b,_),A&2048&&(d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&Hd(d)));break;case 12:if(A&2048){Jc(d,p,b,_),d=p.stateNode;try{var R=p.memoizedProps,K=R.id,ae=R.onPostCommit;typeof ae=="function"&&ae(K,p.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(ke){ws(p,p.return,ke)}}else Jc(d,p,b,_);break;case 31:Jc(d,p,b,_);break;case 13:Jc(d,p,b,_);break;case 23:break;case 22:R=p.stateNode,K=p.alternate,p.memoizedState!==null?R._visibility&2?Jc(d,p,b,_):xy(d,p):R._visibility&2?Jc(d,p,b,_):(R._visibility|=2,kg(d,p,b,_,(p.subtreeFlags&10256)!==0||!1)),A&2048&&Bk(K,p);break;case 24:Jc(d,p,b,_),A&2048&&zk(p.alternate,p);break;default:Jc(d,p,b,_)}}function kg(d,p,b,_,A){for(A=A&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var R=d,K=p,ae=b,ke=_,Ye=K.flags;switch(K.tag){case 0:case 11:case 15:kg(R,K,ae,ke,A),yy(8,K);break;case 23:break;case 22:var st=K.stateNode;K.memoizedState!==null?st._visibility&2?kg(R,K,ae,ke,A):xy(R,K):(st._visibility|=2,kg(R,K,ae,ke,A)),A&&Ye&2048&&Bk(K.alternate,K);break;case 24:kg(R,K,ae,ke,A),A&&Ye&2048&&zk(K.alternate,K);break;default:kg(R,K,ae,ke,A)}p=p.sibling}}function xy(d,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=d,_=p,A=_.flags;switch(_.tag){case 22:xy(b,_),A&2048&&Bk(_.alternate,_);break;case 24:xy(b,_),A&2048&&zk(_.alternate,_);break;default:xy(b,_)}p=p.sibling}}var wy=8192;function Ag(d,p,b){if(d.subtreeFlags&wy)for(d=d.child;d!==null;)aO(d,p,b),d=d.sibling}function aO(d,p,b){switch(d.tag){case 26:Ag(d,p,b),d.flags&wy&&d.memoizedState!==null&&cue(b,Zc,d.memoizedState,d.memoizedProps);break;case 5:Ag(d,p,b);break;case 3:case 4:var _=Zc;Zc=VE(d.stateNode.containerInfo),Ag(d,p,b),Zc=_;break;case 22:d.memoizedState===null&&(_=d.alternate,_!==null&&_.memoizedState!==null?(_=wy,wy=16777216,Ag(d,p,b),wy=_):Ag(d,p,b));break;default:Ag(d,p,b)}}function lO(d){var p=d.alternate;if(p!==null&&(d=p.child,d!==null)){p.child=null;do p=d.sibling,d.sibling=null,d=p;while(d!==null)}}function Ey(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var _=p[b];Pi=_,uO(_,d)}lO(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)cO(d),d=d.sibling}function cO(d){switch(d.tag){case 0:case 11:case 15:Ey(d),d.flags&2048&&Ih(9,d,d.return);break;case 3:Ey(d);break;case 12:Ey(d);break;case 22:var p=d.stateNode;d.memoizedState!==null&&p._visibility&2&&(d.return===null||d.return.tag!==13)?(p._visibility&=-3,RE(d)):Ey(d);break;default:Ey(d)}}function RE(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var _=p[b];Pi=_,uO(_,d)}lO(d)}for(d=d.child;d!==null;){switch(p=d,p.tag){case 0:case 11:case 15:Ih(8,p,p.return),RE(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,RE(p));break;default:RE(p)}d=d.sibling}}function uO(d,p){for(;Pi!==null;){var b=Pi;switch(b.tag){case 0:case 11:case 15:Ih(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var _=b.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:Hd(b.memoizedState.cache)}if(_=b.child,_!==null)_.return=b,Pi=_;else e:for(b=d;Pi!==null;){_=Pi;var A=_.sibling,R=_.return;if(eO(_),_===b){Pi=null;break e}if(A!==null){A.return=R,Pi=A;break e}Pi=R}}}var Sce={getCacheForType:function(d){var p=vi(Lo),b=p.data.get(d);return b===void 0&&(b=d(),p.data.set(d,b)),b},cacheSignal:function(){return vi(Lo).controller.signal}},Tce=typeof WeakMap=="function"?WeakMap:Map,ds=0,zs=null,Mr=null,Lr=0,xs=0,Pl=null,Rh=!1,Ng=!1,jk=!1,af=0,Bo=0,Mh=0,Ip=0,Uk=0,Ll=0,Ig=0,_y=null,tl=null,Hk=!1,ME=0,dO=0,OE=1/0,DE=null,Oh=null,Ei=0,Dh=null,Rg=null,lf=0,Vk=0,qk=null,fO=null,Sy=0,Gk=null;function $l(){return(ds&2)!==0&&Lr!==0?Lr&-Lr:J.T!==null?Xk():Vs()}function hO(){if(Ll===0)if((Lr&536870912)===0||Rr){var d=Qn;Qn<<=1,(Qn&3932160)===0&&(Qn=262144),Ll=d}else Ll=536870912;return d=Jo.current,d!==null&&(d.flags|=32),Ll}function nl(d,p,b){(d===zs&&(xs===2||xs===9)||d.cancelPendingCommit!==null)&&(Mg(d,0),Ph(d,Lr,Ll,!1)),Yn(d,b),((ds&2)===0||d!==zs)&&(d===zs&&((ds&2)===0&&(Ip|=b),Bo===4&&Ph(d,Lr,Ll,!1)),Yu(d))}function pO(d,p,b){if((ds&6)!==0)throw Error(r(327));var _=!b&&(p&127)===0&&(p&d.expiredLanes)===0||Ue(d,p),A=_?Ace(d,p):Yk(d,p,!0),R=_;do{if(A===0){Ng&&!_&&Ph(d,p,0,!1);break}else{if(b=d.current.alternate,R&&!Cce(b)){A=Yk(d,p,!1),R=!1;continue}if(A===2){if(R=p,d.errorRecoveryDisabledLanes&R)var K=0;else K=d.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){p=K;e:{var ae=d;A=_y;var ke=ae.current.memoizedState.isDehydrated;if(ke&&(Mg(ae,K).flags|=256),K=Yk(ae,K,!1),K!==2){if(jk&&!ke){ae.errorRecoveryDisabledLanes|=R,Ip|=R,A=4;break e}R=tl,tl=A,R!==null&&(tl===null?tl=R:tl.push.apply(tl,R))}A=K}if(R=!1,A!==2)continue}}if(A===1){Mg(d,0),Ph(d,p,0,!0);break}e:{switch(_=d,R=A,R){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:Ph(_,p,Ll,!Rh);break e;case 2:tl=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(A=ME+300-Le(),10<A)){if(Ph(_,p,Ll,!Rh),ye(_,0,!0)!==0)break e;lf=p,_.timeoutHandle=qO(mO.bind(null,_,b,tl,DE,Hk,p,Ll,Ip,Ig,Rh,R,"Throttled",-0,0),A);break e}mO(_,b,tl,DE,Hk,p,Ll,Ip,Ig,Rh,R,null,-0,0)}}break}while(!0);Yu(d)}function mO(d,p,b,_,A,R,K,ae,ke,Ye,st,dt,Ke,Xe){if(d.timeoutHandle=-1,dt=p.subtreeFlags,dt&8192||(dt&16785408)===16785408){dt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Lt},aO(p,R,dt);var un=(R&62914560)===R?ME-Le():(R&4194048)===R?dO-Le():0;if(un=uue(dt,un),un!==null){lf=R,d.cancelPendingCommit=un(_O.bind(null,d,p,R,b,_,A,K,ae,ke,st,dt,null,Ke,Xe)),Ph(d,R,K,!Ye);return}}_O(d,p,R,b,_,A,K,ae,ke)}function Cce(d){for(var p=d;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var _=0;_<b.length;_++){var A=b[_],R=A.getSnapshot;A=A.value;try{if(!_a(R(),A))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ph(d,p,b,_){p&=~Uk,p&=~Ip,d.suspendedLanes|=p,d.pingedLanes&=~p,_&&(d.warmLanes|=p),_=d.expirationTimes;for(var A=p;0<A;){var R=31-zt(A),K=1<<R;_[R]=-1,A&=~K}b!==0&&Bt(d,b,p)}function PE(){return(ds&6)===0?(Ty(0),!1):!0}function Wk(){if(Mr!==null){if(xs===0)var d=Mr.return;else d=Mr,ca=Dl=null,my(d),$u=null,bp=0,d=Mr;for(;d!==null;)G9(d.alternate,d),d=d.return;Mr=null}}function Mg(d,p){var b=d.timeoutHandle;b!==-1&&(d.timeoutHandle=-1,Gce(b)),b=d.cancelPendingCommit,b!==null&&(d.cancelPendingCommit=null,b()),lf=0,Wk(),zs=d,Mr=b=Il(d.current,null),Lr=p,xs=0,Pl=null,Rh=!1,Ng=Ue(d,p),jk=!1,Ig=Ll=Uk=Ip=Mh=Bo=0,tl=_y=null,Hk=!1,(p&8)!==0&&(p|=p&32);var _=d.entangledLanes;if(_!==0)for(d=d.entanglements,_&=p;0<_;){var A=31-zt(_),R=1<<A;p|=d[A],_&=~R}return af=p,yh(),b}function gO(d,p){rr=null,J.H=Hn,p===Wd||p===mg?(p=wE(),xs=3):p===gp?(p=wE(),xs=4):xs=p===Tk?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Pl=p,Mr===null&&(Bo=1,Ys(d,la(p,d.current)))}function bO(){var d=Jo.current;return d===null?!0:(Lr&4194048)===Lr?Za===null:(Lr&62914560)===Lr||(Lr&536870912)!==0?d===Za:!1}function yO(){var d=J.H;return J.H=Hn,d===null?Hn:d}function vO(){var d=J.A;return J.A=Sce,d}function LE(){Bo=4,Rh||(Lr&4194048)!==Lr&&Jo.current!==null||(Ng=!0),(Mh&134217727)===0&&(Ip&134217727)===0||zs===null||Ph(zs,Lr,Ll,!1)}function Yk(d,p,b){var _=ds;ds|=2;var A=yO(),R=vO();(zs!==d||Lr!==p)&&(DE=null,Mg(d,p)),p=!1;var K=Bo;e:do try{if(xs!==0&&Mr!==null){var ae=Mr,ke=Pl;switch(xs){case 8:Wk(),K=6;break e;case 3:case 2:case 9:case 6:Jo.current===null&&(p=!0);var Ye=xs;if(xs=0,Pl=null,Og(d,ae,ke,Ye),b&&Ng){K=0;break e}break;default:Ye=xs,xs=0,Pl=null,Og(d,ae,ke,Ye)}}kce(),K=Bo;break}catch(st){gO(d,st)}while(!0);return p&&d.shellSuspendCounter++,ca=Dl=null,ds=_,J.H=A,J.A=R,Mr===null&&(zs=null,Lr=0,yh()),K}function kce(){for(;Mr!==null;)xO(Mr)}function Ace(d,p){var b=ds;ds|=2;var _=yO(),A=vO();zs!==d||Lr!==p?(DE=null,OE=Le()+500,Mg(d,p)):Ng=Ue(d,p);e:do try{if(xs!==0&&Mr!==null){p=Mr;var R=Pl;t:switch(xs){case 1:xs=0,Pl=null,Og(d,p,R,1);break;case 2:case 9:if(vE(R)){xs=0,Pl=null,wO(p);break}p=function(){xs!==2&&xs!==9||zs!==d||(xs=7),Yu(d)},R.then(p,p);break e;case 3:xs=7;break e;case 4:xs=5;break e;case 7:vE(R)?(xs=0,Pl=null,wO(p)):(xs=0,Pl=null,Og(d,p,R,7));break;case 5:var K=null;switch(Mr.tag){case 26:K=Mr.memoizedState;case 5:case 27:var ae=Mr;if(K?iD(K):ae.stateNode.complete){xs=0,Pl=null;var ke=ae.sibling;if(ke!==null)Mr=ke;else{var Ye=ae.return;Ye!==null?(Mr=Ye,$E(Ye)):Mr=null}break t}}xs=0,Pl=null,Og(d,p,R,5);break;case 6:xs=0,Pl=null,Og(d,p,R,6);break;case 8:Wk(),Bo=6;break e;default:throw Error(r(462))}}Nce();break}catch(st){gO(d,st)}while(!0);return ca=Dl=null,J.H=_,J.A=A,ds=b,Mr!==null?0:(zs=null,Lr=0,yh(),Bo)}function Nce(){for(;Mr!==null&&!$e();)xO(Mr)}function xO(d){var p=V9(d.alternate,d,af);d.memoizedProps=d.pendingProps,p===null?$E(d):Mr=p}function wO(d){var p=d,b=p.alternate;switch(p.tag){case 15:case 0:p=F9(b,p,p.pendingProps,p.type,void 0,Lr);break;case 11:p=F9(b,p,p.pendingProps,p.type.render,p.ref,Lr);break;case 5:my(p);default:G9(b,p),p=Mr=hE(p,af),p=V9(b,p,af)}d.memoizedProps=d.pendingProps,p===null?$E(d):Mr=p}function Og(d,p,b,_){ca=Dl=null,my(p),$u=null,bp=0;var A=p.return;try{if(bce(d,A,p,b,Lr)){Bo=1,Ys(d,la(b,d.current)),Mr=null;return}}catch(R){if(A!==null)throw Mr=A,R;Bo=1,Ys(d,la(b,d.current)),Mr=null;return}p.flags&32768?(Rr||_===1?d=!0:Ng||(Lr&536870912)!==0?d=!1:(Rh=d=!0,(_===2||_===9||_===3||_===6)&&(_=Jo.current,_!==null&&_.tag===13&&(_.flags|=16384))),EO(p,d)):$E(p)}function $E(d){var p=d;do{if((p.flags&32768)!==0){EO(p,Rh);return}d=p.return;var b=xce(p.alternate,p,af);if(b!==null){Mr=b;return}if(p=p.sibling,p!==null){Mr=p;return}Mr=p=d}while(p!==null);Bo===0&&(Bo=5)}function EO(d,p){do{var b=wce(d.alternate,d);if(b!==null){b.flags&=32767,Mr=b;return}if(b=d.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(d=d.sibling,d!==null)){Mr=d;return}Mr=d=b}while(d!==null);Bo=6,Mr=null}function _O(d,p,b,_,A,R,K,ae,ke){d.cancelPendingCommit=null;do FE();while(Ei!==0);if((ds&6)!==0)throw Error(r(327));if(p!==null){if(p===d.current)throw Error(r(177));if(R=p.lanes|p.childLanes,R|=up,Rt(d,b,R,K,ae,ke),d===zs&&(Mr=zs=null,Lr=0),Rg=p,Dh=d,lf=b,Vk=R,qk=A,fO=_,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,Oce(L,function(){return AO(),null})):(d.callbackNode=null,d.callbackPriority=0),_=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||_){_=J.T,J.T=null,A=ee.p,ee.p=2,K=ds,ds|=4;try{Ece(d,p,b)}finally{ds=K,ee.p=A,J.T=_}}Ei=1,SO(),TO(),CO()}}function SO(){if(Ei===1){Ei=0;var d=Dh,p=Rg,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=J.T,J.T=null;var _=ee.p;ee.p=2;var A=ds;ds|=4;try{sO(p,d);var R=i3,K=mh(d.containerInfo),ae=R.focusedElem,ke=R.selectionRange;if(K!==ae&&ae&&ae.ownerDocument&&cE(ae.ownerDocument.documentElement,ae)){if(ke!==null&&ip(ae)){var Ye=ke.start,st=ke.end;if(st===void 0&&(st=Ye),"selectionStart"in ae)ae.selectionStart=Ye,ae.selectionEnd=Math.min(st,ae.value.length);else{var dt=ae.ownerDocument||document,Ke=dt&&dt.defaultView||window;if(Ke.getSelection){var Xe=Ke.getSelection(),un=ae.textContent.length,Un=Math.min(ke.start,un),Ds=ke.end===void 0?Un:Math.min(ke.end,un);!Xe.extend&&Un>Ds&&(K=Ds,Ds=Un,Un=K);var je=rg(ae,Un),Oe=rg(ae,Ds);if(je&&Oe&&(Xe.rangeCount!==1||Xe.anchorNode!==je.node||Xe.anchorOffset!==je.offset||Xe.focusNode!==Oe.node||Xe.focusOffset!==Oe.offset)){var Ge=dt.createRange();Ge.setStart(je.node,je.offset),Xe.removeAllRanges(),Un>Ds?(Xe.addRange(Ge),Xe.extend(Oe.node,Oe.offset)):(Ge.setEnd(Oe.node,Oe.offset),Xe.addRange(Ge))}}}}for(dt=[],Xe=ae;Xe=Xe.parentNode;)Xe.nodeType===1&&dt.push({element:Xe,left:Xe.scrollLeft,top:Xe.scrollTop});for(typeof ae.focus=="function"&&ae.focus(),ae=0;ae<dt.length;ae++){var ct=dt[ae];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}ZE=!!o3,i3=o3=null}finally{ds=A,ee.p=_,J.T=b}}d.current=p,Ei=2}}function TO(){if(Ei===2){Ei=0;var d=Dh,p=Rg,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=J.T,J.T=null;var _=ee.p;ee.p=2;var A=ds;ds|=4;try{Q9(d,p.alternate,p)}finally{ds=A,ee.p=_,J.T=b}}Ei=3}}function CO(){if(Ei===4||Ei===3){Ei=0,Je();var d=Dh,p=Rg,b=lf,_=fO;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Ei=5:(Ei=0,Rg=Dh=null,kO(d,d.pendingLanes));var A=d.pendingLanes;if(A===0&&(Oh=null),bo(b),p=p.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Be,p,void 0,(p.current.flags&128)===128)}catch{}if(_!==null){p=J.T,A=ee.p,ee.p=2,J.T=null;try{for(var R=d.onRecoverableError,K=0;K<_.length;K++){var ae=_[K];R(ae.value,{componentStack:ae.stack})}}finally{J.T=p,ee.p=A}}(lf&3)!==0&&FE(),Yu(d),A=d.pendingLanes,(b&261930)!==0&&(A&42)!==0?d===Gk?Sy++:(Sy=0,Gk=d):Sy=0,Ty(0)}}function kO(d,p){(d.pooledCacheLanes&=p)===0&&(p=d.pooledCache,p!=null&&(d.pooledCache=null,Hd(p)))}function FE(){return SO(),TO(),CO(),AO()}function AO(){if(Ei!==5)return!1;var d=Dh,p=Vk;Vk=0;var b=bo(lf),_=J.T,A=ee.p;try{ee.p=32>b?32:b,J.T=null,b=qk,qk=null;var R=Dh,K=lf;if(Ei=0,Rg=Dh=null,lf=0,(ds&6)!==0)throw Error(r(331));var ae=ds;if(ds|=4,cO(R.current),iO(R,R.current,K,b),ds=ae,Ty(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Be,R)}catch{}return!0}finally{ee.p=A,J.T=_,kO(d,p)}}function NO(d,p,b){p=la(b,p),p=dc(d.stateNode,p,2),d=zu(d,p,2),d!==null&&(Yn(d,2),Yu(d))}function ws(d,p,b){if(d.tag===3)NO(d,d,b);else for(;p!==null;){if(p.tag===3){NO(p,d,b);break}else if(p.tag===1){var _=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Oh===null||!Oh.has(_))){d=la(b,d),b=Cg(2),_=zu(p,b,2),_!==null&&(R9(b,_,p,d),Yn(_,2),Yu(_));break}}p=p.return}}function Kk(d,p,b){var _=d.pingCache;if(_===null){_=d.pingCache=new Tce;var A=new Set;_.set(p,A)}else A=_.get(p),A===void 0&&(A=new Set,_.set(p,A));A.has(b)||(jk=!0,A.add(b),d=Ice.bind(null,d,p,b),p.then(d,d))}function Ice(d,p,b){var _=d.pingCache;_!==null&&_.delete(p),d.pingedLanes|=d.suspendedLanes&b,d.warmLanes&=~b,zs===d&&(Lr&b)===b&&(Bo===4||Bo===3&&(Lr&62914560)===Lr&&300>Le()-ME?(ds&2)===0&&Mg(d,0):Uk|=b,Ig===Lr&&(Ig=0)),Yu(d)}function IO(d,p){p===0&&(p=Zt()),d=Hc(d,p),d!==null&&(Yn(d,p),Yu(d))}function Rce(d){var p=d.memoizedState,b=0;p!==null&&(b=p.retryLane),IO(d,b)}function Mce(d,p){var b=0;switch(d.tag){case 31:case 13:var _=d.stateNode,A=d.memoizedState;A!==null&&(b=A.retryLane);break;case 19:_=d.stateNode;break;case 22:_=d.stateNode._retryCache;break;default:throw Error(r(314))}_!==null&&_.delete(p),IO(d,b)}function Oce(d,p){return pe(d,p)}var BE=null,Dg=null,Zk=!1,zE=!1,Jk=!1,Lh=0;function Yu(d){d!==Dg&&d.next===null&&(Dg===null?BE=Dg=d:Dg=Dg.next=d),zE=!0,Zk||(Zk=!0,Pce())}function Ty(d,p){if(!Jk&&zE){Jk=!0;do for(var b=!1,_=BE;_!==null;){if(d!==0){var A=_.pendingLanes;if(A===0)var R=0;else{var K=_.suspendedLanes,ae=_.pingedLanes;R=(1<<31-zt(42|d)+1)-1,R&=A&~(K&~ae),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(b=!0,DO(_,R))}else R=Lr,R=ye(_,_===zs?R:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(R&3)===0||Ue(_,R)||(b=!0,DO(_,R));_=_.next}while(b);Jk=!1}}function Dce(){RO()}function RO(){zE=Zk=!1;var d=0;Lh!==0&&qce()&&(d=Lh);for(var p=Le(),b=null,_=BE;_!==null;){var A=_.next,R=MO(_,p);R===0?(_.next=null,b===null?BE=A:b.next=A,A===null&&(Dg=b)):(b=_,(d!==0||(R&3)!==0)&&(zE=!0)),_=A}Ei!==0&&Ei!==5||Ty(d),Lh!==0&&(Lh=0)}function MO(d,p){for(var b=d.suspendedLanes,_=d.pingedLanes,A=d.expirationTimes,R=d.pendingLanes&-62914561;0<R;){var K=31-zt(R),ae=1<<K,ke=A[K];ke===-1?((ae&b)===0||(ae&_)!==0)&&(A[K]=ht(ae,p)):ke<=p&&(d.expiredLanes|=ae),R&=~ae}if(p=zs,b=Lr,b=ye(d,d===p?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),_=d.callbackNode,b===0||d===p&&(xs===2||xs===9)||d.cancelPendingCommit!==null)return _!==null&&_!==null&&Ne(_),d.callbackNode=null,d.callbackPriority=0;if((b&3)===0||Ue(d,b)){if(p=b&-b,p===d.callbackPriority)return p;switch(_!==null&&Ne(_),bo(b)){case 2:case 8:b=Y;break;case 32:b=L;break;case 268435456:b=ce;break;default:b=L}return _=OO.bind(null,d),b=pe(b,_),d.callbackPriority=p,d.callbackNode=b,p}return _!==null&&_!==null&&Ne(_),d.callbackPriority=2,d.callbackNode=null,2}function OO(d,p){if(Ei!==0&&Ei!==5)return d.callbackNode=null,d.callbackPriority=0,null;var b=d.callbackNode;if(FE()&&d.callbackNode!==b)return null;var _=Lr;return _=ye(d,d===zs?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),_===0?null:(pO(d,_,p),MO(d,Le()),d.callbackNode!=null&&d.callbackNode===b?OO.bind(null,d):null)}function DO(d,p){if(FE())return null;pO(d,p,!0)}function Pce(){Wce(function(){(ds&6)!==0?pe(_e,Dce):RO()})}function Xk(){if(Lh===0){var d=Vd;d===0&&(d=Nn,Nn<<=1,(Nn&261888)===0&&(Nn=256)),Lh=d}return Lh}function PO(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:_l(""+d)}function LO(d,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,d.id&&b.setAttribute("form",d.id),p.parentNode.insertBefore(b,p),d=new FormData(d),b.parentNode.removeChild(b),d}function Lce(d,p,b,_,A){if(p==="submit"&&b&&b.stateNode===A){var R=PO((A[Io]||null).action),K=_.submitter;K&&(p=(p=K[Io]||null)?PO(p.formAction):K.getAttribute("formAction"),p!==null&&(R=p,K=null));var ae=new ep("action","action",null,_,A);d.push({event:ae,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(Lh!==0){var ke=K?LO(A,K):new FormData(A);qn(b,{pending:!0,data:ke,method:A.method,action:R},null,ke)}}else typeof R=="function"&&(ae.preventDefault(),ke=K?LO(A,K):new FormData(A),qn(b,{pending:!0,data:ke,method:A.method,action:R},R,ke))},currentTarget:A}]})}}for(var Qk=0;Qk<og.length;Qk++){var e3=og[Qk],$ce=e3.toLowerCase(),Fce=e3[0].toUpperCase()+e3.slice(1);Ta($ce,"on"+Fce)}Ta(Kb,"onAnimationEnd"),Ta(Oi,"onAnimationIteration"),Ta(Zb,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(uE,"onTransitionRun"),Ta(xk,"onTransitionStart"),Ta(dE,"onTransitionCancel"),Ta(fE,"onTransitionEnd"),ft("onMouseEnter",["mouseout","mouseover"]),ft("onMouseLeave",["mouseout","mouseover"]),ft("onPointerEnter",["pointerout","pointerover"]),ft("onPointerLeave",["pointerout","pointerover"]),nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bce=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cy));function $O(d,p){p=(p&4)!==0;for(var b=0;b<d.length;b++){var _=d[b],A=_.event;_=_.listeners;e:{var R=void 0;if(p)for(var K=_.length-1;0<=K;K--){var ae=_[K],ke=ae.instance,Ye=ae.currentTarget;if(ae=ae.listener,ke!==R&&A.isPropagationStopped())break e;R=ae,A.currentTarget=Ye;try{R(A)}catch(st){zd(st)}A.currentTarget=null,R=ke}else for(K=0;K<_.length;K++){if(ae=_[K],ke=ae.instance,Ye=ae.currentTarget,ae=ae.listener,ke!==R&&A.isPropagationStopped())break e;R=ae,A.currentTarget=Ye;try{R(A)}catch(st){zd(st)}A.currentTarget=null,R=ke}}}}function Or(d,p){var b=p[rt];b===void 0&&(b=p[rt]=new Set);var _=d+"__bubble";b.has(_)||(FO(p,d,2,!1),b.add(_))}function t3(d,p,b){var _=0;p&&(_|=4),FO(b,d,_,p)}var jE="_reactListening"+Math.random().toString(36).slice(2);function n3(d){if(!d[jE]){d[jE]=!0,Xr.forEach(function(b){b!=="selectionchange"&&(Bce.has(b)||t3(b,!1,d),t3(b,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[jE]||(p[jE]=!0,t3("selectionchange",!1,p))}}function FO(d,p,b,_){switch(hD(p)){case 2:var A=hue;break;case 8:A=pue;break;default:A=b3}b=A.bind(null,p,b,d),A=void 0,!qm||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(A=!0),_?A!==void 0?d.addEventListener(p,b,{capture:!0,passive:A}):d.addEventListener(p,b,!0):A!==void 0?d.addEventListener(p,b,{passive:A}):d.addEventListener(p,b,!1)}function r3(d,p,b,_,A){var R=_;if((p&1)===0&&(p&2)===0&&_!==null)e:for(;;){if(_===null)return;var K=_.tag;if(K===3||K===4){var ae=_.stateNode.containerInfo;if(ae===A)break;if(K===4)for(K=_.return;K!==null;){var ke=K.tag;if((ke===3||ke===4)&&K.stateNode.containerInfo===A)return;K=K.return}for(;ae!==null;){if(K=Hr(ae),K===null)return;if(ke=K.tag,ke===5||ke===6||ke===26||ke===27){_=R=K;continue e}ae=ae.parentNode}}_=_.return}ch(function(){var Ye=R,st=Zn(b),dt=[];e:{var Ke=gh.get(d);if(Ke!==void 0){var Xe=ep,un=d;switch(d){case"keypress":if(dh(b)===0)break e;case"keydown":case"keyup":Xe=Ld;break;case"focusin":un="focus",Xe=zc;break;case"focusout":un="blur",Xe=zc;break;case"beforeblur":case"afterblur":Xe=zc;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=Qw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=Xs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=Mo;break;case Kb:case Oi:case Zb:Xe=fk;break;case fE:Xe=Ko;break;case"scroll":case"scrollend":Xe=uk;break;case"wheel":Xe=nE;break;case"copy":case"cut":case"paste":Xe=eE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=tE;break;case"toggle":case"beforetoggle":Xe=Zm}var Un=(p&4)!==0,Ds=!Un&&(d==="scroll"||d==="scrollend"),je=Un?Ke!==null?Ke+"Capture":null:Ke;Un=[];for(var Oe=Ye,Ge;Oe!==null;){var ct=Oe;if(Ge=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Ge===null||je===null||(ct=uh(Oe,je),ct!=null&&Un.push(ky(Oe,ct,Ge))),Ds)break;Oe=Oe.return}0<Un.length&&(Ke=new Xe(Ke,un,null,b,st),dt.push({event:Ke,listeners:Un}))}}if((p&7)===0){e:{if(Ke=d==="mouseover"||d==="pointerover",Xe=d==="mouseout"||d==="pointerout",Ke&&b!==Kt&&(un=b.relatedTarget||b.fromElement)&&(Hr(un)||un[at]))break e;if((Xe||Ke)&&(Ke=st.window===st?st:(Ke=st.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,Xe?(un=b.relatedTarget||b.toElement,Xe=Ye,un=un?Hr(un):null,un!==null&&(Ds=o(un),Un=un.tag,un!==Ds||Un!==5&&Un!==27&&Un!==6)&&(un=null)):(Xe=null,un=Ye),Xe!==un)){if(Un=Qw,ct="onMouseLeave",je="onMouseEnter",Oe="mouse",(d==="pointerout"||d==="pointerover")&&(Un=tE,ct="onPointerLeave",je="onPointerEnter",Oe="pointer"),Ds=Xe==null?Ke:kt(Xe),Ge=un==null?Ke:kt(un),Ke=new Un(ct,Oe+"leave",Xe,b,st),Ke.target=Ds,Ke.relatedTarget=Ge,ct=null,Hr(st)===Ye&&(Un=new Un(je,Oe+"enter",un,b,st),Un.target=Ge,Un.relatedTarget=Ds,ct=Un),Ds=ct,Xe&&un)t:{for(Un=zce,je=Xe,Oe=un,Ge=0,ct=je;ct;ct=Un(ct))Ge++;ct=0;for(var Mn=Oe;Mn;Mn=Un(Mn))ct++;for(;0<Ge-ct;)je=Un(je),Ge--;for(;0<ct-Ge;)Oe=Un(Oe),ct--;for(;Ge--;){if(je===Oe||Oe!==null&&je===Oe.alternate){Un=je;break t}je=Un(je),Oe=Un(Oe)}Un=null}else Un=null;Xe!==null&&BO(dt,Ke,Xe,Un,!1),un!==null&&Ds!==null&&BO(dt,Ds,un,Un,!0)}}e:{if(Ke=Ye?kt(Ye):window,Xe=Ke.nodeName&&Ke.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&Ke.type==="file")var ts=aE;else if(Xm(Ke))if(qb)ts=yk;else{ts=Bd;var wn=Yb}else Xe=Ke.nodeName,!Xe||Xe.toLowerCase()!=="input"||Ke.type!=="checkbox"&&Ke.type!=="radio"?Ye&&Iu(Ye.elementType)&&(ts=aE):ts=bk;if(ts&&(ts=ts(d,Ye))){zn(dt,ts,b,st);break e}wn&&wn(d,Ke,Ye),d==="focusout"&&Ye&&Ke.type==="number"&&Ye.memoizedProps.value!=null&&Bc(Ke,"number",Ke.value)}switch(wn=Ye?kt(Ye):window,d){case"focusin":(Xm(wn)||wn.contentEditable==="true")&&(Er=wn,qa=Ye,ap=null);break;case"focusout":ap=qa=Er=null;break;case"mousedown":lp=!0;break;case"contextmenu":case"mouseup":case"dragend":lp=!1,Ga(dt,b,st);break;case"selectionchange":if(sg)break;case"keydown":case"keyup":Ga(dt,b,st)}var mr;if(Jm)e:{switch(d){case"compositionstart":var $r="onCompositionStart";break e;case"compositionend":$r="onCompositionEnd";break e;case"compositionupdate":$r="onCompositionUpdate";break e}$r=void 0}else sc?Fd(d,b)&&($r="onCompositionEnd"):d==="keydown"&&b.keyCode===229&&($r="onCompositionStart");$r&&(hh&&b.locale!=="ko"&&(sc||$r!=="onCompositionStart"?$r==="onCompositionEnd"&&sc&&(mr=kl()):(Tl=st,X0="value"in Tl?Tl.value:Tl.textContent,sc=!0)),wn=UE(Ye,$r),0<wn.length&&($r=new Wm($r,d,null,b,st),dt.push({event:$r,listeners:wn}),mr?$r.data=mr:(mr=sp(b),mr!==null&&($r.data=mr)))),(mr=xo?bi(d,b):sE(d,b))&&($r=UE(Ye,"onBeforeInput"),0<$r.length&&(wn=new Wm("onBeforeInput","beforeinput",null,b,st),dt.push({event:wn,listeners:$r}),wn.data=mr)),Lce(dt,d,Ye,b,st)}$O(dt,p)})}function ky(d,p,b){return{instance:d,listener:p,currentTarget:b}}function UE(d,p){for(var b=p+"Capture",_=[];d!==null;){var A=d,R=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||R===null||(A=uh(d,b),A!=null&&_.unshift(ky(d,A,R)),A=uh(d,p),A!=null&&_.push(ky(d,A,R))),d.tag===3)return _;d=d.return}return[]}function zce(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function BO(d,p,b,_,A){for(var R=p._reactName,K=[];b!==null&&b!==_;){var ae=b,ke=ae.alternate,Ye=ae.stateNode;if(ae=ae.tag,ke!==null&&ke===_)break;ae!==5&&ae!==26&&ae!==27||Ye===null||(ke=Ye,A?(Ye=uh(b,R),Ye!=null&&K.unshift(ky(b,Ye,ke))):A||(Ye=uh(b,R),Ye!=null&&K.push(ky(b,Ye,ke)))),b=b.return}K.length!==0&&d.push({event:p,listeners:K})}var jce=/\r\n?/g,Uce=/\u0000|\uFFFD/g;function zO(d){return(typeof d=="string"?d:""+d).replace(jce,`
`).replace(Uce,"")}function jO(d,p){return p=zO(p),zO(d)===p}function Os(d,p,b,_,A,R){switch(b){case"children":typeof _=="string"?p==="body"||p==="textarea"&&_===""||Pn(d,_):(typeof _=="number"||typeof _=="bigint")&&p!=="body"&&Pn(d,""+_);break;case"className":co(d,"class",_);break;case"tabIndex":co(d,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":co(d,b,_);break;case"style":Gr(d,_,R);break;case"data":if(p!=="object"){co(d,"data",_);break}case"src":case"href":if(_===""&&(p!=="a"||b!=="href")){d.removeAttribute(b);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){d.removeAttribute(b);break}_=_l(""+_),d.setAttribute(b,_);break;case"action":case"formAction":if(typeof _=="function"){d.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(b==="formAction"?(p!=="input"&&Os(d,p,"name",A.name,A,null),Os(d,p,"formEncType",A.formEncType,A,null),Os(d,p,"formMethod",A.formMethod,A,null),Os(d,p,"formTarget",A.formTarget,A,null)):(Os(d,p,"encType",A.encType,A,null),Os(d,p,"method",A.method,A,null),Os(d,p,"target",A.target,A,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){d.removeAttribute(b);break}_=_l(""+_),d.setAttribute(b,_);break;case"onClick":_!=null&&(d.onclick=Lt);break;case"onScroll":_!=null&&Or("scroll",d);break;case"onScrollEnd":_!=null&&Or("scrollend",d);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(b=_.__html,b!=null){if(A.children!=null)throw Error(r(60));d.innerHTML=b}}break;case"multiple":d.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":d.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){d.removeAttribute("xlink:href");break}b=_l(""+_),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?d.setAttribute(b,""+_):d.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?d.setAttribute(b,""):d.removeAttribute(b);break;case"capture":case"download":_===!0?d.setAttribute(b,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?d.setAttribute(b,_):d.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?d.setAttribute(b,_):d.removeAttribute(b);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?d.removeAttribute(b):d.setAttribute(b,_);break;case"popover":Or("beforetoggle",d),Or("toggle",d),qs(d,"popover",_);break;case"xlinkActuate":Wo(d,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Wo(d,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Wo(d,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Wo(d,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Wo(d,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Wo(d,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Wo(d,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Wo(d,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Wo(d,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":qs(d,"is",_);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=mi.get(b)||b,qs(d,b,_))}}function s3(d,p,b,_,A,R){switch(b){case"style":Gr(d,_,R);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(b=_.__html,b!=null){if(A.children!=null)throw Error(r(60));d.innerHTML=b}}break;case"children":typeof _=="string"?Pn(d,_):(typeof _=="number"||typeof _=="bigint")&&Pn(d,""+_);break;case"onScroll":_!=null&&Or("scroll",d);break;case"onScrollEnd":_!=null&&Or("scrollend",d);break;case"onClick":_!=null&&(d.onclick=Lt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ro.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(A=b.endsWith("Capture"),p=b.slice(2,A?b.length-7:void 0),R=d[Io]||null,R=R!=null?R[b]:null,typeof R=="function"&&d.removeEventListener(p,R,A),typeof _=="function")){typeof R!="function"&&R!==null&&(b in d?d[b]=null:d.hasAttribute(b)&&d.removeAttribute(b)),d.addEventListener(p,_,A);break e}b in d?d[b]=_:_===!0?d.setAttribute(b,""):qs(d,b,_)}}}function Zi(d,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Or("error",d),Or("load",d);var _=!1,A=!1,R;for(R in b)if(b.hasOwnProperty(R)){var K=b[R];if(K!=null)switch(R){case"src":_=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Os(d,p,R,K,b,null)}}A&&Os(d,p,"srcSet",b.srcSet,b,null),_&&Os(d,p,"src",b.src,b,null);return;case"input":Or("invalid",d);var ae=R=K=A=null,ke=null,Ye=null;for(_ in b)if(b.hasOwnProperty(_)){var st=b[_];if(st!=null)switch(_){case"name":A=st;break;case"type":K=st;break;case"checked":ke=st;break;case"defaultChecked":Ye=st;break;case"value":R=st;break;case"defaultValue":ae=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(137,p));break;default:Os(d,p,_,st,b,null)}}rc(d,R,ae,ke,Ye,K,A,!1);return;case"select":Or("invalid",d),_=K=R=null;for(A in b)if(b.hasOwnProperty(A)&&(ae=b[A],ae!=null))switch(A){case"value":R=ae;break;case"defaultValue":K=ae;break;case"multiple":_=ae;default:Os(d,p,A,ae,b,null)}p=R,b=K,d.multiple=!!_,p!=null?Yo(d,!!_,p,!1):b!=null&&Yo(d,!!_,b,!0);return;case"textarea":Or("invalid",d),R=A=_=null;for(K in b)if(b.hasOwnProperty(K)&&(ae=b[K],ae!=null))switch(K){case"value":_=ae;break;case"defaultValue":A=ae;break;case"children":R=ae;break;case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(91));break;default:Os(d,p,K,ae,b,null)}ah(d,_,A,R);return;case"option":for(ke in b)if(b.hasOwnProperty(ke)&&(_=b[ke],_!=null))switch(ke){case"selected":d.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Os(d,p,ke,_,b,null)}return;case"dialog":Or("beforetoggle",d),Or("toggle",d),Or("cancel",d),Or("close",d);break;case"iframe":case"object":Or("load",d);break;case"video":case"audio":for(_=0;_<Cy.length;_++)Or(Cy[_],d);break;case"image":Or("error",d),Or("load",d);break;case"details":Or("toggle",d);break;case"embed":case"source":case"link":Or("error",d),Or("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in b)if(b.hasOwnProperty(Ye)&&(_=b[Ye],_!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Os(d,p,Ye,_,b,null)}return;default:if(Iu(p)){for(st in b)b.hasOwnProperty(st)&&(_=b[st],_!==void 0&&s3(d,p,st,_,b,void 0));return}}for(ae in b)b.hasOwnProperty(ae)&&(_=b[ae],_!=null&&Os(d,p,ae,_,b,null))}function Hce(d,p,b,_){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,R=null,K=null,ae=null,ke=null,Ye=null,st=null;for(Xe in b){var dt=b[Xe];if(b.hasOwnProperty(Xe)&&dt!=null)switch(Xe){case"checked":break;case"value":break;case"defaultValue":ke=dt;default:_.hasOwnProperty(Xe)||Os(d,p,Xe,null,_,dt)}}for(var Ke in _){var Xe=_[Ke];if(dt=b[Ke],_.hasOwnProperty(Ke)&&(Xe!=null||dt!=null))switch(Ke){case"type":R=Xe;break;case"name":A=Xe;break;case"checked":Ye=Xe;break;case"defaultChecked":st=Xe;break;case"value":K=Xe;break;case"defaultValue":ae=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(r(137,p));break;default:Xe!==dt&&Os(d,p,Ke,Xe,_,dt)}}El(d,K,ae,ke,Ye,st,R,A);return;case"select":Xe=K=ae=Ke=null;for(R in b)if(ke=b[R],b.hasOwnProperty(R)&&ke!=null)switch(R){case"value":break;case"multiple":Xe=ke;default:_.hasOwnProperty(R)||Os(d,p,R,null,_,ke)}for(A in _)if(R=_[A],ke=b[A],_.hasOwnProperty(A)&&(R!=null||ke!=null))switch(A){case"value":Ke=R;break;case"defaultValue":ae=R;break;case"multiple":K=R;default:R!==ke&&Os(d,p,A,R,_,ke)}p=ae,b=K,_=Xe,Ke!=null?Yo(d,!!b,Ke,!1):!!_!=!!b&&(p!=null?Yo(d,!!b,p,!0):Yo(d,!!b,b?[]:"",!1));return;case"textarea":Xe=Ke=null;for(ae in b)if(A=b[ae],b.hasOwnProperty(ae)&&A!=null&&!_.hasOwnProperty(ae))switch(ae){case"value":break;case"children":break;default:Os(d,p,ae,null,_,A)}for(K in _)if(A=_[K],R=b[K],_.hasOwnProperty(K)&&(A!=null||R!=null))switch(K){case"value":Ke=A;break;case"defaultValue":Xe=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==R&&Os(d,p,K,A,_,R)}Od(d,Ke,Xe);return;case"option":for(var un in b)if(Ke=b[un],b.hasOwnProperty(un)&&Ke!=null&&!_.hasOwnProperty(un))switch(un){case"selected":d.selected=!1;break;default:Os(d,p,un,null,_,Ke)}for(ke in _)if(Ke=_[ke],Xe=b[ke],_.hasOwnProperty(ke)&&Ke!==Xe&&(Ke!=null||Xe!=null))switch(ke){case"selected":d.selected=Ke&&typeof Ke!="function"&&typeof Ke!="symbol";break;default:Os(d,p,ke,Ke,_,Xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Un in b)Ke=b[Un],b.hasOwnProperty(Un)&&Ke!=null&&!_.hasOwnProperty(Un)&&Os(d,p,Un,null,_,Ke);for(Ye in _)if(Ke=_[Ye],Xe=b[Ye],_.hasOwnProperty(Ye)&&Ke!==Xe&&(Ke!=null||Xe!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(r(137,p));break;default:Os(d,p,Ye,Ke,_,Xe)}return;default:if(Iu(p)){for(var Ds in b)Ke=b[Ds],b.hasOwnProperty(Ds)&&Ke!==void 0&&!_.hasOwnProperty(Ds)&&s3(d,p,Ds,void 0,_,Ke);for(st in _)Ke=_[st],Xe=b[st],!_.hasOwnProperty(st)||Ke===Xe||Ke===void 0&&Xe===void 0||s3(d,p,st,Ke,_,Xe);return}}for(var je in b)Ke=b[je],b.hasOwnProperty(je)&&Ke!=null&&!_.hasOwnProperty(je)&&Os(d,p,je,null,_,Ke);for(dt in _)Ke=_[dt],Xe=b[dt],!_.hasOwnProperty(dt)||Ke===Xe||Ke==null&&Xe==null||Os(d,p,dt,Ke,_,Xe)}function UO(d){switch(d){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vce(){if(typeof performance.getEntriesByType=="function"){for(var d=0,p=0,b=performance.getEntriesByType("resource"),_=0;_<b.length;_++){var A=b[_],R=A.transferSize,K=A.initiatorType,ae=A.duration;if(R&&ae&&UO(K)){for(K=0,ae=A.responseEnd,_+=1;_<b.length;_++){var ke=b[_],Ye=ke.startTime;if(Ye>ae)break;var st=ke.transferSize,dt=ke.initiatorType;st&&UO(dt)&&(ke=ke.responseEnd,K+=st*(ke<ae?1:(ae-Ye)/(ke-Ye)))}if(--_,p+=8*(R+K)/(A.duration/1e3),d++,10<d)break}}if(0<d)return p/d/1e6}return navigator.connection&&(d=navigator.connection.downlink,typeof d=="number")?d:5}var o3=null,i3=null;function HE(d){return d.nodeType===9?d:d.ownerDocument}function HO(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VO(d,p){if(d===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&p==="foreignObject"?0:d}function a3(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var l3=null;function qce(){var d=window.event;return d&&d.type==="popstate"?d===l3?!1:(l3=d,!0):(l3=null,!1)}var qO=typeof setTimeout=="function"?setTimeout:void 0,Gce=typeof clearTimeout=="function"?clearTimeout:void 0,GO=typeof Promise=="function"?Promise:void 0,Wce=typeof queueMicrotask=="function"?queueMicrotask:typeof GO<"u"?function(d){return GO.resolve(null).then(d).catch(Yce)}:qO;function Yce(d){setTimeout(function(){throw d})}function $h(d){return d==="head"}function WO(d,p){var b=p,_=0;do{var A=b.nextSibling;if(d.removeChild(b),A&&A.nodeType===8)if(b=A.data,b==="/$"||b==="/&"){if(_===0){d.removeChild(A),Fg(p);return}_--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")_++;else if(b==="html")Ay(d.ownerDocument.documentElement);else if(b==="head"){b=d.ownerDocument.head,Ay(b);for(var R=b.firstChild;R;){var K=R.nextSibling,ae=R.nodeName;R[ks]||ae==="SCRIPT"||ae==="STYLE"||ae==="LINK"&&R.rel.toLowerCase()==="stylesheet"||b.removeChild(R),R=K}}else b==="body"&&Ay(d.ownerDocument.body);b=A}while(b);Fg(p)}function YO(d,p){var b=d;d=0;do{var _=b.nextSibling;if(b.nodeType===1?p?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(p?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),_&&_.nodeType===8)if(b=_.data,b==="/$"){if(d===0)break;d--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||d++;b=_}while(b)}function c3(d){var p=d.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":c3(b),Kn(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}d.removeChild(b)}}function Kce(d,p,b,_){for(;d.nodeType===1;){var A=b;if(d.nodeName.toLowerCase()!==p.toLowerCase()){if(!_&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(_){if(!d[ks])switch(p){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(R=d.getAttribute("rel"),R==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(R!==A.rel||d.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||d.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||d.getAttribute("title")!==(A.title==null?null:A.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(R=d.getAttribute("src"),(R!==(A.src==null?null:A.src)||d.getAttribute("type")!==(A.type==null?null:A.type)||d.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&R&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(p==="input"&&d.type==="hidden"){var R=A.name==null?null:""+A.name;if(A.type==="hidden"&&d.getAttribute("name")===R)return d}else return d;if(d=fc(d.nextSibling),d===null)break}return null}function Zce(d,p,b){if(p==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!b||(d=fc(d.nextSibling),d===null))return null;return d}function KO(d,p){for(;d.nodeType!==8;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!p||(d=fc(d.nextSibling),d===null))return null;return d}function u3(d){return d.data==="$?"||d.data==="$~"}function d3(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState!=="loading"}function Jce(d,p){var b=d.ownerDocument;if(d.data==="$~")d._reactRetry=p;else if(d.data!=="$?"||b.readyState!=="loading")p();else{var _=function(){p(),b.removeEventListener("DOMContentLoaded",_)};b.addEventListener("DOMContentLoaded",_),d._reactRetry=_}}function fc(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return d}var f3=null;function ZO(d){d=d.nextSibling;for(var p=0;d;){if(d.nodeType===8){var b=d.data;if(b==="/$"||b==="/&"){if(p===0)return fc(d.nextSibling);p--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||p++}d=d.nextSibling}return null}function JO(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var b=d.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(p===0)return d;p--}else b!=="/$"&&b!=="/&"||p++}d=d.previousSibling}return null}function XO(d,p,b){switch(p=HE(b),d){case"html":if(d=p.documentElement,!d)throw Error(r(452));return d;case"head":if(d=p.head,!d)throw Error(r(453));return d;case"body":if(d=p.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function Ay(d){for(var p=d.attributes;p.length;)d.removeAttributeNode(p[0]);Kn(d)}var hc=new Map,QO=new Set;function VE(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var cf=ee.d;ee.d={f:Xce,r:Qce,D:eue,C:tue,L:nue,m:rue,X:oue,S:sue,M:iue};function Xce(){var d=cf.f(),p=PE();return d||p}function Qce(d){var p=ia(d);p!==null&&p.tag===5&&p.type==="form"?Is(p):cf.r(d)}var Pg=typeof document>"u"?null:document;function eD(d,p,b){var _=Pg;if(_&&typeof p=="string"&&p){var A=Vi(p);A='link[rel="'+d+'"][href="'+A+'"]',typeof b=="string"&&(A+='[crossorigin="'+b+'"]'),QO.has(A)||(QO.add(A),d={rel:d,crossOrigin:b,href:p},_.querySelector(A)===null&&(p=_.createElement("link"),Zi(p,"link",d),gt(p),_.head.appendChild(p)))}}function eue(d){cf.D(d),eD("dns-prefetch",d,null)}function tue(d,p){cf.C(d,p),eD("preconnect",d,p)}function nue(d,p,b){cf.L(d,p,b);var _=Pg;if(_&&d&&p){var A='link[rel="preload"][as="'+Vi(p)+'"]';p==="image"&&b&&b.imageSrcSet?(A+='[imagesrcset="'+Vi(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(A+='[imagesizes="'+Vi(b.imageSizes)+'"]')):A+='[href="'+Vi(d)+'"]';var R=A;switch(p){case"style":R=Lg(d);break;case"script":R=$g(d)}hc.has(R)||(d=f({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:d,as:p},b),hc.set(R,d),_.querySelector(A)!==null||p==="style"&&_.querySelector(Ny(R))||p==="script"&&_.querySelector(Iy(R))||(p=_.createElement("link"),Zi(p,"link",d),gt(p),_.head.appendChild(p)))}}function rue(d,p){cf.m(d,p);var b=Pg;if(b&&d){var _=p&&typeof p.as=="string"?p.as:"script",A='link[rel="modulepreload"][as="'+Vi(_)+'"][href="'+Vi(d)+'"]',R=A;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=$g(d)}if(!hc.has(R)&&(d=f({rel:"modulepreload",href:d},p),hc.set(R,d),b.querySelector(A)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(Iy(R)))return}_=b.createElement("link"),Zi(_,"link",d),gt(_),b.head.appendChild(_)}}}function sue(d,p,b){cf.S(d,p,b);var _=Pg;if(_&&d){var A=Bn(_).hoistableStyles,R=Lg(d);p=p||"default";var K=A.get(R);if(!K){var ae={loading:0,preload:null};if(K=_.querySelector(Ny(R)))ae.loading=5;else{d=f({rel:"stylesheet",href:d,"data-precedence":p},b),(b=hc.get(R))&&h3(d,b);var ke=K=_.createElement("link");gt(ke),Zi(ke,"link",d),ke._p=new Promise(function(Ye,st){ke.onload=Ye,ke.onerror=st}),ke.addEventListener("load",function(){ae.loading|=1}),ke.addEventListener("error",function(){ae.loading|=2}),ae.loading|=4,qE(K,p,_)}K={type:"stylesheet",instance:K,count:1,state:ae},A.set(R,K)}}}function oue(d,p){cf.X(d,p);var b=Pg;if(b&&d){var _=Bn(b).hoistableScripts,A=$g(d),R=_.get(A);R||(R=b.querySelector(Iy(A)),R||(d=f({src:d,async:!0},p),(p=hc.get(A))&&p3(d,p),R=b.createElement("script"),gt(R),Zi(R,"link",d),b.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},_.set(A,R))}}function iue(d,p){cf.M(d,p);var b=Pg;if(b&&d){var _=Bn(b).hoistableScripts,A=$g(d),R=_.get(A);R||(R=b.querySelector(Iy(A)),R||(d=f({src:d,async:!0,type:"module"},p),(p=hc.get(A))&&p3(d,p),R=b.createElement("script"),gt(R),Zi(R,"link",d),b.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},_.set(A,R))}}function tD(d,p,b,_){var A=(A=Ce.current)?VE(A):null;if(!A)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=Lg(b.href),b=Bn(A).hoistableStyles,_=b.get(p),_||(_={type:"style",instance:null,count:0,state:null},b.set(p,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){d=Lg(b.href);var R=Bn(A).hoistableStyles,K=R.get(d);if(K||(A=A.ownerDocument||A,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(d,K),(R=A.querySelector(Ny(d)))&&!R._p&&(K.instance=R,K.state.loading=5),hc.has(d)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},hc.set(d,b),R||aue(A,d,b,K.state))),p&&_===null)throw Error(r(528,""));return K}if(p&&_!==null)throw Error(r(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=$g(b),b=Bn(A).hoistableScripts,_=b.get(p),_||(_={type:"script",instance:null,count:0,state:null},b.set(p,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function Lg(d){return'href="'+Vi(d)+'"'}function Ny(d){return'link[rel="stylesheet"]['+d+"]"}function nD(d){return f({},d,{"data-precedence":d.precedence,precedence:null})}function aue(d,p,b,_){d.querySelector('link[rel="preload"][as="style"]['+p+"]")?_.loading=1:(p=d.createElement("link"),_.preload=p,p.addEventListener("load",function(){return _.loading|=1}),p.addEventListener("error",function(){return _.loading|=2}),Zi(p,"link",b),gt(p),d.head.appendChild(p))}function $g(d){return'[src="'+Vi(d)+'"]'}function Iy(d){return"script[async]"+d}function rD(d,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var _=d.querySelector('style[data-href~="'+Vi(b.href)+'"]');if(_)return p.instance=_,gt(_),_;var A=f({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return _=(d.ownerDocument||d).createElement("style"),gt(_),Zi(_,"style",A),qE(_,b.precedence,d),p.instance=_;case"stylesheet":A=Lg(b.href);var R=d.querySelector(Ny(A));if(R)return p.state.loading|=4,p.instance=R,gt(R),R;_=nD(b),(A=hc.get(A))&&h3(_,A),R=(d.ownerDocument||d).createElement("link"),gt(R);var K=R;return K._p=new Promise(function(ae,ke){K.onload=ae,K.onerror=ke}),Zi(R,"link",_),p.state.loading|=4,qE(R,b.precedence,d),p.instance=R;case"script":return R=$g(b.src),(A=d.querySelector(Iy(R)))?(p.instance=A,gt(A),A):(_=b,(A=hc.get(R))&&(_=f({},b),p3(_,A)),d=d.ownerDocument||d,A=d.createElement("script"),gt(A),Zi(A,"link",_),d.head.appendChild(A),p.instance=A);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(_=p.instance,p.state.loading|=4,qE(_,b.precedence,d));return p.instance}function qE(d,p,b){for(var _=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=_.length?_[_.length-1]:null,R=A,K=0;K<_.length;K++){var ae=_[K];if(ae.dataset.precedence===p)R=ae;else if(R!==A)break}R?R.parentNode.insertBefore(d,R.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(d,p.firstChild))}function h3(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.title==null&&(d.title=p.title)}function p3(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.integrity==null&&(d.integrity=p.integrity)}var GE=null;function sD(d,p,b){if(GE===null){var _=new Map,A=GE=new Map;A.set(b,_)}else A=GE,_=A.get(b),_||(_=new Map,A.set(b,_));if(_.has(d))return _;for(_.set(d,null),b=b.getElementsByTagName(d),A=0;A<b.length;A++){var R=b[A];if(!(R[ks]||R[pr]||d==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var K=R.getAttribute(p)||"";K=d+K;var ae=_.get(K);ae?ae.push(R):_.set(K,[R])}}return _}function oD(d,p,b){d=d.ownerDocument||d,d.head.insertBefore(b,p==="title"?d.querySelector("head > title"):null)}function lue(d,p,b){if(b===1||p.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return d=p.disabled,typeof p.precedence=="string"&&d==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function iD(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}function cue(d,p,b,_){if(b.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var A=Lg(_.href),R=p.querySelector(Ny(A));if(R){p=R._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(d.count++,d=WE.bind(d),p.then(d,d)),b.state.loading|=4,b.instance=R,gt(R);return}R=p.ownerDocument||p,_=nD(_),(A=hc.get(A))&&h3(_,A),R=R.createElement("link"),gt(R);var K=R;K._p=new Promise(function(ae,ke){K.onload=ae,K.onerror=ke}),Zi(R,"link",_),b.instance=R}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(b,p),(p=b.state.preload)&&(b.state.loading&3)===0&&(d.count++,b=WE.bind(d),p.addEventListener("load",b),p.addEventListener("error",b))}}var m3=0;function uue(d,p){return d.stylesheets&&d.count===0&&KE(d,d.stylesheets),0<d.count||0<d.imgCount?function(b){var _=setTimeout(function(){if(d.stylesheets&&KE(d,d.stylesheets),d.unsuspend){var R=d.unsuspend;d.unsuspend=null,R()}},6e4+p);0<d.imgBytes&&m3===0&&(m3=62500*Vce());var A=setTimeout(function(){if(d.waitingForImages=!1,d.count===0&&(d.stylesheets&&KE(d,d.stylesheets),d.unsuspend)){var R=d.unsuspend;d.unsuspend=null,R()}},(d.imgBytes>m3?50:800)+p);return d.unsuspend=b,function(){d.unsuspend=null,clearTimeout(_),clearTimeout(A)}}:null}function WE(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)KE(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var YE=null;function KE(d,p){d.stylesheets=null,d.unsuspend!==null&&(d.count++,YE=new Map,p.forEach(due,d),YE=null,WE.call(d))}function due(d,p){if(!(p.state.loading&4)){var b=YE.get(d);if(b)var _=b.get(null);else{b=new Map,YE.set(d,b);for(var A=d.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<A.length;R++){var K=A[R];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(b.set(K.dataset.precedence,K),_=K)}_&&b.set(null,_)}A=p.instance,K=A.getAttribute("data-precedence"),R=b.get(K)||_,R===_&&b.set(null,A),b.set(K,A),this.count++,_=WE.bind(this),A.addEventListener("load",_),A.addEventListener("error",_),R?R.parentNode.insertBefore(A,R.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(A,d.firstChild)),p.state.loading|=4}}var Ry={$$typeof:k,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function fue(d,p,b,_,A,R,K,ae,ke){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hr(0),this.hiddenUpdates=hr(null),this.identifierPrefix=_,this.onUncaughtError=A,this.onCaughtError=R,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ke,this.incompleteTransitions=new Map}function aD(d,p,b,_,A,R,K,ae,ke,Ye,st,dt){return d=new fue(d,p,b,K,ke,Ye,st,dt,ae),p=1,R===!0&&(p|=24),R=Do(3,null,null,p),d.current=R,R.stateNode=d,p=ny(),p.refCount++,d.pooledCache=p,p.refCount++,R.memoizedState={element:_,isDehydrated:b,cache:p},Kd(R),d}function lD(d){return d?(d=Gi,d):Gi}function cD(d,p,b,_,A,R){A=lD(A),_.context===null?_.context=A:_.pendingContext=A,_=Bu(p),_.payload={element:b},R=R===void 0?null:R,R!==null&&(_.callback=R),b=zu(d,_,p),b!==null&&(nl(b,d,p),ju(b,d,p))}function uD(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var b=d.retryLane;d.retryLane=b!==0&&b<p?b:p}}function g3(d,p){uD(d,p),(d=d.alternate)&&uD(d,p)}function dD(d){if(d.tag===13||d.tag===31){var p=Hc(d,67108864);p!==null&&nl(p,d,67108864),g3(d,67108864)}}function fD(d){if(d.tag===13||d.tag===31){var p=$l();p=Pr(p);var b=Hc(d,p);b!==null&&nl(b,d,p),g3(d,p)}}var ZE=!0;function hue(d,p,b,_){var A=J.T;J.T=null;var R=ee.p;try{ee.p=2,b3(d,p,b,_)}finally{ee.p=R,J.T=A}}function pue(d,p,b,_){var A=J.T;J.T=null;var R=ee.p;try{ee.p=8,b3(d,p,b,_)}finally{ee.p=R,J.T=A}}function b3(d,p,b,_){if(ZE){var A=y3(_);if(A===null)r3(d,p,_,JE,b),pD(d,_);else if(gue(A,d,p,b,_))_.stopPropagation();else if(pD(d,_),p&4&&-1<mue.indexOf(d)){for(;A!==null;){var R=ia(A);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var K=sn(R.pendingLanes);if(K!==0){var ae=R;for(ae.pendingLanes|=2,ae.entangledLanes|=2;K;){var ke=1<<31-zt(K);ae.entanglements[1]|=ke,K&=~ke}Yu(R),(ds&6)===0&&(OE=Le()+500,Ty(0))}}break;case 31:case 13:ae=Hc(R,2),ae!==null&&nl(ae,R,2),PE(),g3(R,2)}if(R=y3(_),R===null&&r3(d,p,_,JE,b),R===A)break;A=R}A!==null&&_.stopPropagation()}else r3(d,p,_,null,b)}}function y3(d){return d=Zn(d),v3(d)}var JE=null;function v3(d){if(JE=null,d=Hr(d),d!==null){var p=o(d);if(p===null)d=null;else{var b=p.tag;if(b===13){if(d=i(p),d!==null)return d;d=null}else if(b===31){if(d=a(p),d!==null)return d;d=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null)}}return JE=d,null}function hD(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ve()){case _e:return 2;case Y:return 8;case L:case B:return 32;case ce:return 268435456;default:return 32}default:return 32}}var x3=!1,Fh=null,Bh=null,zh=null,My=new Map,Oy=new Map,jh=[],mue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pD(d,p){switch(d){case"focusin":case"focusout":Fh=null;break;case"dragenter":case"dragleave":Bh=null;break;case"mouseover":case"mouseout":zh=null;break;case"pointerover":case"pointerout":My.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oy.delete(p.pointerId)}}function Dy(d,p,b,_,A,R){return d===null||d.nativeEvent!==R?(d={blockedOn:p,domEventName:b,eventSystemFlags:_,nativeEvent:R,targetContainers:[A]},p!==null&&(p=ia(p),p!==null&&dD(p)),d):(d.eventSystemFlags|=_,p=d.targetContainers,A!==null&&p.indexOf(A)===-1&&p.push(A),d)}function gue(d,p,b,_,A){switch(p){case"focusin":return Fh=Dy(Fh,d,p,b,_,A),!0;case"dragenter":return Bh=Dy(Bh,d,p,b,_,A),!0;case"mouseover":return zh=Dy(zh,d,p,b,_,A),!0;case"pointerover":var R=A.pointerId;return My.set(R,Dy(My.get(R)||null,d,p,b,_,A)),!0;case"gotpointercapture":return R=A.pointerId,Oy.set(R,Dy(Oy.get(R)||null,d,p,b,_,A)),!0}return!1}function mD(d){var p=Hr(d.target);if(p!==null){var b=o(p);if(b!==null){if(p=b.tag,p===13){if(p=i(b),p!==null){d.blockedOn=p,yo(d.priority,function(){fD(b)});return}}else if(p===31){if(p=a(b),p!==null){d.blockedOn=p,yo(d.priority,function(){fD(b)});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){d.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}d.blockedOn=null}function XE(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var b=y3(d.nativeEvent);if(b===null){b=d.nativeEvent;var _=new b.constructor(b.type,b);Kt=_,b.target.dispatchEvent(_),Kt=null}else return p=ia(b),p!==null&&dD(p),d.blockedOn=b,!1;p.shift()}return!0}function gD(d,p,b){XE(d)&&b.delete(p)}function bue(){x3=!1,Fh!==null&&XE(Fh)&&(Fh=null),Bh!==null&&XE(Bh)&&(Bh=null),zh!==null&&XE(zh)&&(zh=null),My.forEach(gD),Oy.forEach(gD)}function QE(d,p){d.blockedOn===p&&(d.blockedOn=null,x3||(x3=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bue)))}var e2=null;function bD(d){e2!==d&&(e2=d,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){e2===d&&(e2=null);for(var p=0;p<d.length;p+=3){var b=d[p],_=d[p+1],A=d[p+2];if(typeof _!="function"){if(v3(_||b)===null)continue;break}var R=ia(b);R!==null&&(d.splice(p,3),p-=3,qn(R,{pending:!0,data:A,method:b.method,action:_},_,A))}}))}function Fg(d){function p(ke){return QE(ke,d)}Fh!==null&&QE(Fh,d),Bh!==null&&QE(Bh,d),zh!==null&&QE(zh,d),My.forEach(p),Oy.forEach(p);for(var b=0;b<jh.length;b++){var _=jh[b];_.blockedOn===d&&(_.blockedOn=null)}for(;0<jh.length&&(b=jh[0],b.blockedOn===null);)mD(b),b.blockedOn===null&&jh.shift();if(b=(d.ownerDocument||d).$$reactFormReplay,b!=null)for(_=0;_<b.length;_+=3){var A=b[_],R=b[_+1],K=A[Io]||null;if(typeof R=="function")K||bD(b);else if(K){var ae=null;if(R&&R.hasAttribute("formAction")){if(A=R,K=R[Io]||null)ae=K.formAction;else if(v3(A)!==null)continue}else ae=K.action;typeof ae=="function"?b[_+1]=ae:(b.splice(_,3),_-=3),bD(b)}}}function yD(){function d(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(K){return A=K})},focusReset:"manual",scroll:"manual"})}function p(){A!==null&&(A(),A=null),_||setTimeout(b,20)}function b(){if(!_&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var _=!1,A=null;return navigation.addEventListener("navigate",d),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(b,100),function(){_=!0,navigation.removeEventListener("navigate",d),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),A!==null&&(A(),A=null)}}}function w3(d){this._internalRoot=d}t2.prototype.render=w3.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(r(409));var b=p.current,_=$l();cD(b,_,d,p,null,null)},t2.prototype.unmount=w3.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;cD(d.current,2,null,d,null,null),PE(),p[at]=null}};function t2(d){this._internalRoot=d}t2.prototype.unstable_scheduleHydration=function(d){if(d){var p=Vs();d={blockedOn:null,target:d,priority:p};for(var b=0;b<jh.length&&p!==0&&p<jh[b].priority;b++);jh.splice(b,0,d),b===0&&mD(d)}};var vD=t.version;if(vD!=="19.2.1")throw Error(r(527,vD,"19.2.1"));ee.findDOMNode=function(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=c(p),d=d!==null?u(d):null,d=d===null?null:d.stateNode,d};var yue={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var n2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!n2.isDisabled&&n2.supportsFiber)try{Be=n2.inject(yue),ut=n2}catch{}}return Ly.createRoot=function(d,p){if(!s(d))throw Error(r(299));var b=!1,_="",A=Aa,R=ms,K=Ws;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(_=p.identifierPrefix),p.onUncaughtError!==void 0&&(A=p.onUncaughtError),p.onCaughtError!==void 0&&(R=p.onCaughtError),p.onRecoverableError!==void 0&&(K=p.onRecoverableError)),p=aD(d,1,!1,null,null,b,_,null,A,R,K,yD),d[at]=p.current,n3(d),new w3(p)},Ly.hydrateRoot=function(d,p,b){if(!s(d))throw Error(r(299));var _=!1,A="",R=Aa,K=ms,ae=Ws,ke=null;return b!=null&&(b.unstable_strictMode===!0&&(_=!0),b.identifierPrefix!==void 0&&(A=b.identifierPrefix),b.onUncaughtError!==void 0&&(R=b.onUncaughtError),b.onCaughtError!==void 0&&(K=b.onCaughtError),b.onRecoverableError!==void 0&&(ae=b.onRecoverableError),b.formState!==void 0&&(ke=b.formState)),p=aD(d,1,!0,p,b??null,_,A,ke,R,K,ae,yD),p.context=lD(null),b=p.current,_=$l(),_=Pr(_),A=Bu(_),A.callback=null,zu(b,A,_),b=_,p.current.lanes=b,Yn(p,b),Yu(p),d[at]=p.current,n3(d),new t2(p)},Ly.version="19.2.1",Ly}var ND;function Iue(){if(ND)return S3.exports;ND=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),S3.exports=Nue(),S3.exports}var Rue=Iue();const Mue=Cm(Rue);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Oue,Due;function Pue(){return{geminiUrl:Oue,vertexUrl:Due}}function Lue(e,t,n,r){var s,o;if(!(e!=null&&e.baseUrl)){const i=Pue();return t?(s=i.vertexUrl)!==null&&s!==void 0?s:n:(o=i.geminiUrl)!==null&&o!==void 0?o:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eh{}function Qt(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const o=t[s];return o!=null?String(o):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function C(e,t,n){for(let o=0;o<t.length-1;o++){const i=t[o];if(i.endsWith("[]")){const a=i.slice(0,-2);if(!(a in e))if(Array.isArray(n))e[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(e[a])){const l=e[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const u=l[c];C(u,t.slice(o+1),n[c])}else for(const c of l)C(c,t.slice(o+1),n)}return}else if(i.endsWith("[0]")){const a=i.slice(0,-3);a in e||(e[a]=[{}]);const l=e[a];C(l[0],t.slice(o+1),n);return}(!e[i]||typeof e[i]!="object")&&(e[i]={}),e=e[i]}const r=t[t.length-1],s=e[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function S(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const s=t[r];if(s.endsWith("[]")){const o=s.slice(0,-2);if(o in e){const i=e[o];return Array.isArray(i)?i.map(a=>S(a,t.slice(r+1),n)):n}else return n}else e=e[s]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function $ue(e,t){for(const[n,r]of Object.entries(t)){const s=n.split("."),o=r.split("."),i=new Set;let a=-1;for(let l=0;l<s.length;l++)if(s[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){const c=o[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&i.add(c)}iN(e,s,o,0,i)}}function iN(e,t,n,r,s){if(r>=t.length||typeof e!="object"||e===null)return;const o=t[r];if(o.endsWith("[]")){const i=o.slice(0,-2),a=e;if(i in a&&Array.isArray(a[i]))for(const l of a[i])iN(l,t,n,r+1,s)}else if(o==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const i=e,a=Object.keys(i).filter(c=>!c.startsWith("_")&&!s.has(c)),l={};for(const c of a)l[c]=i[c];for(const[c,u]of Object.entries(l)){const f=[];for(const m of n.slice(r))m==="*"?f.push(c):f.push(m);C(i,f,u)}for(const c of a)delete i[c]}}else{const i=e;o in i&&iN(i[o],t,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sR(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fue(e){const t={},n=S(e,["operationName"]);n!=null&&C(t,["operationName"],n);const r=S(e,["resourceName"]);return r!=null&&C(t,["_url","resourceName"],r),t}function Bue(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=S(e,["done"]);s!=null&&C(t,["done"],s);const o=S(e,["error"]);o!=null&&C(t,["error"],o);const i=S(e,["response","generateVideoResponse"]);return i!=null&&C(t,["response"],jue(i)),t}function zue(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=S(e,["done"]);s!=null&&C(t,["done"],s);const o=S(e,["error"]);o!=null&&C(t,["error"],o);const i=S(e,["response"]);return i!=null&&C(t,["response"],Uue(i)),t}function jue(e){const t={},n=S(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Hue(i))),C(t,["generatedVideos"],o)}const r=S(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const s=S(e,["raiMediaFilteredReasons"]);return s!=null&&C(t,["raiMediaFilteredReasons"],s),t}function Uue(e){const t={},n=S(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Vue(i))),C(t,["generatedVideos"],o)}const r=S(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const s=S(e,["raiMediaFilteredReasons"]);return s!=null&&C(t,["raiMediaFilteredReasons"],s),t}function Hue(e){const t={},n=S(e,["video"]);return n!=null&&C(t,["video"],Zue(n)),t}function Vue(e){const t={},n=S(e,["_self"]);return n!=null&&C(t,["video"],Jue(n)),t}function que(e){const t={},n=S(e,["operationName"]);return n!=null&&C(t,["_url","operationName"],n),t}function Gue(e){const t={},n=S(e,["operationName"]);return n!=null&&C(t,["_url","operationName"],n),t}function Wue(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=S(e,["done"]);s!=null&&C(t,["done"],s);const o=S(e,["error"]);o!=null&&C(t,["error"],o);const i=S(e,["response"]);return i!=null&&C(t,["response"],Yue(i)),t}function Yue(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["parent"]);r!=null&&C(t,["parent"],r);const s=S(e,["documentName"]);return s!=null&&C(t,["documentName"],s),t}function rq(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=S(e,["done"]);s!=null&&C(t,["done"],s);const o=S(e,["error"]);o!=null&&C(t,["error"],o);const i=S(e,["response"]);return i!=null&&C(t,["response"],Kue(i)),t}function Kue(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["parent"]);r!=null&&C(t,["parent"],r);const s=S(e,["documentName"]);return s!=null&&C(t,["documentName"],s),t}function Zue(e){const t={},n=S(e,["uri"]);n!=null&&C(t,["uri"],n);const r=S(e,["encodedVideo"]);r!=null&&C(t,["videoBytes"],sR(r));const s=S(e,["encoding"]);return s!=null&&C(t,["mimeType"],s),t}function Jue(e){const t={},n=S(e,["gcsUri"]);n!=null&&C(t,["uri"],n);const r=S(e,["bytesBase64Encoded"]);r!=null&&C(t,["videoBytes"],sR(r));const s=S(e,["mimeType"]);return s!=null&&C(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ID;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ID||(ID={}));var RD;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(RD||(RD={}));var MD;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(MD||(MD={}));var vn;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(vn||(vn={}));var OD;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(OD||(OD={}));var DD;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(DD||(DD={}));var PD;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(PD||(PD={}));var LD;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(LD||(LD={}));var $D;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})($D||($D={}));var FD;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(FD||(FD={}));var BD;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(BD||(BD={}));var zD;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(zD||(zD={}));var jD;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(jD||(jD={}));var UD;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(UD||(UD={}));var HD;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(HD||(HD={}));var VD;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(VD||(VD={}));var qD;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(qD||(qD={}));var GD;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(GD||(GD={}));var WD;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(WD||(WD={}));var $1;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})($1||($1={}));var YD;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(YD||(YD={}));var KD;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(KD||(KD={}));var ZD;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ZD||(ZD={}));var aN;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(aN||(aN={}));var JD;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(JD||(JD={}));var XD;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(XD||(XD={}));var QD;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(QD||(QD={}));var eP;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(eP||(eP={}));var tP;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(tP||(tP={}));var nP;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(nP||(nP={}));var rP;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(rP||(rP={}));var sP;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(sP||(sP={}));var oP;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(oP||(oP={}));var iP;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(iP||(iP={}));var aP;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(aP||(aP={}));var lP;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(lP||(lP={}));var cP;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(cP||(cP={}));var uP;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(uP||(uP={}));var dP;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(dP||(dP={}));var fP;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(fP||(fP={}));var hP;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(hP||(hP={}));var pP;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(pP||(pP={}));var mP;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(mP||(mP={}));var gP;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(gP||(gP={}));var bP;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(bP||(bP={}));var yP;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(yP||(yP={}));var vP;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(vP||(vP={}));var xP;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(xP||(xP={}));var wP;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(wP||(wP={}));var EP;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(EP||(EP={}));var _P;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(_P||(_P={}));var SP;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(SP||(SP={}));var TP;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(TP||(TP={}));var CP;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(CP||(CP={}));var d1;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(d1||(d1={}));class lN{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class $y{get text(){var t,n,r,s,o,i,a,l;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const f=[];for(const m of(l=(a=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&f.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var t,n,r,s,o,i,a,l;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const f of(l=(a=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(f))m!=="inlineData"&&(g!==null||g!==void 0)&&u.push(m);f.inlineData&&typeof f.inlineData.data=="string"&&(c+=atob(f.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,r,s,o,i,a,l;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,n,r,s,o,i,a,l,c;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.executableCode).map(f=>f.executableCode).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,r,s,o,i,a,l,c;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.codeExecutionResult).map(f=>f.codeExecutionResult).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class kP{}class AP{}class Xue{}class Que{}class ede{}class tde{}class NP{}class IP{}class RP{}class nde{}class K_{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new K_;let s;const o=t;return n?s=zue(o):s=Bue(o),Object.assign(r,s),r}}class MP{}class OP{}class DP{}class PP{}class rde{}class sde{}class ode{}class oR{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new oR,o=Wue(t);return Object.assign(r,o),r}}class ide{}class ade{}class lde{}class LP{}class cde{get text(){var t,n,r;let s="",o=!1;const i=[];for(const a of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&i.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,s+=a.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?s:void 0}get data(){var t,n,r;let s="";const o=[];for(const i of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(i))a!=="inlineData"&&l!==null&&o.push(a);i.inlineData&&typeof i.inlineData.data=="string"&&(s+=atob(i.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class ude{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class iR{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new iR,o=rq(t);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function as(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function sq(e,t){const n=as(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function oq(e){return Array.isArray(e)?e.map(t=>Z_(t)):[Z_(e)]}function Z_(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function iq(e){const t=Z_(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function aq(e){const t=Z_(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function $P(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function lq(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>$P(t)):[$P(e)]}function cN(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function FP(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function BP(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function ma(e){if(e==null)throw new Error("ContentUnion is required");return cN(e)?e:{role:"user",parts:lq(e)}}function aR(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=ma(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=ma(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>ma(n)):[ma(t)]}function Nc(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(FP(e)||BP(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ma(e)]}const t=[],n=[],r=cN(e[0]);for(const s of e){const o=cN(s);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(s);else{if(FP(s)||BP(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||t.push({role:"user",parts:lq(n)}),t}function dde(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(vn).includes(n[0].toUpperCase())?n[0].toUpperCase():vn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(vn).includes(r.toUpperCase())?r.toUpperCase():vn.TYPE_UNSPECIFIED})}}function y1(e){const t={},n=["items"],r=["anyOf"],s=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=e.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(t.nullable=!0,e=o[1]):o[1].type==="null"&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&dde(e.type,t);for(const[i,a]of Object.entries(e))if(a!=null)if(i=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(vn).includes(a.toUpperCase())?a.toUpperCase():vn.TYPE_UNSPECIFIED}else if(n.includes(i))t[i]=y1(a);else if(r.includes(i)){const l=[];for(const c of a){if(c.type=="null"){t.nullable=!0;continue}l.push(y1(c))}t[i]=l}else if(s.includes(i)){const l={};for(const[c,u]of Object.entries(a))l[c]=y1(u);t[i]=l}else{if(i==="additionalProperties")continue;t[i]=a}return t}function lR(e){return y1(e)}function cR(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function uR(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function mb(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=y1(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=y1(t.response));return e}function gb(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function fde(e,t,n,r=1){const s=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:s?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:s?`${n}/${t}`:t}function th(e,t){if(typeof t!="string")throw new Error("name must be a string");return fde(e,t,"cachedContents")}function cq(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function L0(e){return sR(e)}function hde(e){return e!=null&&typeof e=="object"&&"name"in e}function pde(e){return e!=null&&typeof e=="object"&&"video"in e}function mde(e){return e!=null&&typeof e=="object"&&"uri"in e}function uq(e){var t;let n;if(hde(e)&&(n=e.name),!(mde(e)&&(n=e.uri,n===void 0))&&!(pde(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function dq(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function fq(e){for(const t of["models","tunedModels","publisherModels"])if(gde(e,t))return e[t];return[]}function gde(e,t){return e!==null&&typeof e=="object"&&t in e}function bde(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function yde(e,t={}){const n=[],r=new Set;for(const s of e){const o=s.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const i=bde(s,t);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function hq(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function vde(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function pq(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return e;let o=!1;for(const i of s){if(typeof i!="object"||i===null)continue;const l=i.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function bb(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function mq(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xde(e){const t={},n=S(e,["responsesFile"]);n!=null&&C(t,["fileName"],n);const r=S(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>efe(i))),C(t,["inlinedResponses"],o)}const s=S(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["inlinedEmbedContentResponses"],o)}return t}function wde(e){const t={},n=S(e,["predictionsFormat"]);n!=null&&C(t,["format"],n);const r=S(e,["gcsDestination","outputUriPrefix"]);r!=null&&C(t,["gcsUri"],r);const s=S(e,["bigqueryDestination","outputUri"]);return s!=null&&C(t,["bigqueryUri"],s),t}function Ede(e){const t={},n=S(e,["format"]);n!=null&&C(t,["predictionsFormat"],n);const r=S(e,["gcsUri"]);r!=null&&C(t,["gcsDestination","outputUriPrefix"],r);const s=S(e,["bigqueryUri"]);if(s!=null&&C(t,["bigqueryDestination","outputUri"],s),S(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(S(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function __(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata","displayName"]);r!=null&&C(t,["displayName"],r);const s=S(e,["metadata","state"]);s!=null&&C(t,["state"],mq(s));const o=S(e,["metadata","createTime"]);o!=null&&C(t,["createTime"],o);const i=S(e,["metadata","endTime"]);i!=null&&C(t,["endTime"],i);const a=S(e,["metadata","updateTime"]);a!=null&&C(t,["updateTime"],a);const l=S(e,["metadata","model"]);l!=null&&C(t,["model"],l);const c=S(e,["metadata","output"]);return c!=null&&C(t,["dest"],xde(pq(c))),t}function uN(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["displayName"]);r!=null&&C(t,["displayName"],r);const s=S(e,["state"]);s!=null&&C(t,["state"],mq(s));const o=S(e,["error"]);o!=null&&C(t,["error"],o);const i=S(e,["createTime"]);i!=null&&C(t,["createTime"],i);const a=S(e,["startTime"]);a!=null&&C(t,["startTime"],a);const l=S(e,["endTime"]);l!=null&&C(t,["endTime"],l);const c=S(e,["updateTime"]);c!=null&&C(t,["updateTime"],c);const u=S(e,["model"]);u!=null&&C(t,["model"],u);const f=S(e,["inputConfig"]);f!=null&&C(t,["src"],_de(f));const m=S(e,["outputConfig"]);m!=null&&C(t,["dest"],wde(pq(m)));const g=S(e,["completionStats"]);return g!=null&&C(t,["completionStats"],g),t}function _de(e){const t={},n=S(e,["instancesFormat"]);n!=null&&C(t,["format"],n);const r=S(e,["gcsSource","uris"]);r!=null&&C(t,["gcsUri"],r);const s=S(e,["bigquerySource","inputUri"]);return s!=null&&C(t,["bigqueryUri"],s),t}function Sde(e,t){const n={};if(S(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(S(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=S(t,["fileName"]);r!=null&&C(n,["fileName"],r);const s=S(t,["inlinedRequests"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>Qde(e,i))),C(n,["requests","requests"],o)}return n}function Tde(e){const t={},n=S(e,["format"]);n!=null&&C(t,["instancesFormat"],n);const r=S(e,["gcsUri"]);r!=null&&C(t,["gcsSource","uris"],r);const s=S(e,["bigqueryUri"]);if(s!=null&&C(t,["bigquerySource","inputUri"],s),S(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Cde(e){const t={},n=S(e,["data"]);if(n!=null&&C(t,["data"],n),S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function kde(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],bb(e,r)),n}function Ade(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],bb(e,r)),n}function Nde(e){const t={},n=S(e,["content"]);n!=null&&C(t,["content"],n);const r=S(e,["citationMetadata"]);r!=null&&C(t,["citationMetadata"],Ide(r));const s=S(e,["tokenCount"]);s!=null&&C(t,["tokenCount"],s);const o=S(e,["finishReason"]);o!=null&&C(t,["finishReason"],o);const i=S(e,["avgLogprobs"]);i!=null&&C(t,["avgLogprobs"],i);const a=S(e,["groundingMetadata"]);a!=null&&C(t,["groundingMetadata"],a);const l=S(e,["index"]);l!=null&&C(t,["index"],l);const c=S(e,["logprobsResult"]);c!=null&&C(t,["logprobsResult"],c);const u=S(e,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),C(t,["safetyRatings"],m)}const f=S(e,["urlContextMetadata"]);return f!=null&&C(t,["urlContextMetadata"],f),t}function Ide(e){const t={},n=S(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),C(t,["citations"],r)}return t}function gq(e){const t={},n=S(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>afe(o))),C(t,["parts"],s)}const r=S(e,["role"]);return r!=null&&C(t,["role"],r),t}function Rde(e,t){const n={},r=S(e,["displayName"]);if(t!==void 0&&r!=null&&C(t,["batch","displayName"],r),S(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Mde(e,t){const n={},r=S(e,["displayName"]);t!==void 0&&r!=null&&C(t,["displayName"],r);const s=S(e,["dest"]);return t!==void 0&&s!=null&&C(t,["outputConfig"],Ede(vde(s))),n}function zP(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["src"]);s!=null&&C(n,["batch","inputConfig"],Sde(e,hq(e,s)));const o=S(t,["config"]);return o!=null&&Rde(o,n),n}function Ode(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["model"],as(e,r));const s=S(t,["src"]);s!=null&&C(n,["inputConfig"],Tde(hq(e,s)));const o=S(t,["config"]);return o!=null&&Mde(o,n),n}function Dde(e,t){const n={},r=S(e,["displayName"]);return t!==void 0&&r!=null&&C(t,["batch","displayName"],r),n}function Pde(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["src"]);s!=null&&C(n,["batch","inputConfig"],Ude(e,s));const o=S(t,["config"]);return o!=null&&Dde(o,n),n}function Lde(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],bb(e,r)),n}function $de(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],bb(e,r)),n}function Fde(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["name"]);r!=null&&C(t,["name"],r);const s=S(e,["done"]);s!=null&&C(t,["done"],s);const o=S(e,["error"]);return o!=null&&C(t,["error"],o),t}function Bde(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["name"]);r!=null&&C(t,["name"],r);const s=S(e,["done"]);s!=null&&C(t,["done"],s);const o=S(e,["error"]);return o!=null&&C(t,["error"],o),t}function zde(e,t){const n={},r=S(t,["contents"]);if(r!=null){let o=aR(e,r);Array.isArray(o)&&(o=o.map(i=>i)),C(n,["requests[]","request","content"],o)}const s=S(t,["config"]);return s!=null&&(C(n,["_self"],jde(s,n)),$ue(n,{"requests[].*":"requests[].request.*"})),n}function jde(e,t){const n={},r=S(e,["taskType"]);t!==void 0&&r!=null&&C(t,["requests[]","taskType"],r);const s=S(e,["title"]);t!==void 0&&s!=null&&C(t,["requests[]","title"],s);const o=S(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&C(t,["requests[]","outputDimensionality"],o),S(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ude(e,t){const n={},r=S(t,["fileName"]);r!=null&&C(n,["file_name"],r);const s=S(t,["inlinedRequests"]);return s!=null&&C(n,["requests"],zde(e,s)),n}function Hde(e){const t={};if(S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Vde(e){const t={},n=S(e,["id"]);n!=null&&C(t,["id"],n);const r=S(e,["args"]);r!=null&&C(t,["args"],r);const s=S(e,["name"]);if(s!=null&&C(t,["name"],s),S(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function qde(e){const t={},n=S(e,["mode"]);n!=null&&C(t,["mode"],n);const r=S(e,["allowedFunctionNames"]);if(r!=null&&C(t,["allowedFunctionNames"],r),S(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Gde(e,t,n){const r={},s=S(t,["systemInstruction"]);n!==void 0&&s!=null&&C(n,["systemInstruction"],gq(ma(s)));const o=S(t,["temperature"]);o!=null&&C(r,["temperature"],o);const i=S(t,["topP"]);i!=null&&C(r,["topP"],i);const a=S(t,["topK"]);a!=null&&C(r,["topK"],a);const l=S(t,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=S(t,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=S(t,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const f=S(t,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const m=S(t,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=S(t,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=S(t,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=S(t,["seed"]);v!=null&&C(r,["seed"],v);const x=S(t,["responseMimeType"]);x!=null&&C(r,["responseMimeType"],x);const E=S(t,["responseSchema"]);E!=null&&C(r,["responseSchema"],lR(E));const T=S(t,["responseJsonSchema"]);if(T!=null&&C(r,["responseJsonSchema"],T),S(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=S(t,["safetySettings"]);if(n!==void 0&&k!=null){let F=k;Array.isArray(F)&&(F=F.map(G=>lfe(G))),C(n,["safetySettings"],F)}const I=S(t,["tools"]);if(n!==void 0&&I!=null){let F=gb(I);Array.isArray(F)&&(F=F.map(G=>ufe(mb(G)))),C(n,["tools"],F)}const O=S(t,["toolConfig"]);if(n!==void 0&&O!=null&&C(n,["toolConfig"],cfe(O)),S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=S(t,["cachedContent"]);n!==void 0&&M!=null&&C(n,["cachedContent"],th(e,M));const P=S(t,["responseModalities"]);P!=null&&C(r,["responseModalities"],P);const j=S(t,["mediaResolution"]);j!=null&&C(r,["mediaResolution"],j);const V=S(t,["speechConfig"]);if(V!=null&&C(r,["speechConfig"],cR(V)),S(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=S(t,["thinkingConfig"]);U!=null&&C(r,["thinkingConfig"],U);const z=S(t,["imageConfig"]);z!=null&&C(r,["imageConfig"],Xde(z));const H=S(t,["enableEnhancedCivicAnswers"]);return H!=null&&C(r,["enableEnhancedCivicAnswers"],H),r}function Wde(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Nde(c))),C(t,["candidates"],l)}const s=S(e,["modelVersion"]);s!=null&&C(t,["modelVersion"],s);const o=S(e,["promptFeedback"]);o!=null&&C(t,["promptFeedback"],o);const i=S(e,["responseId"]);i!=null&&C(t,["responseId"],i);const a=S(e,["usageMetadata"]);return a!=null&&C(t,["usageMetadata"],a),t}function Yde(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],bb(e,r)),n}function Kde(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],bb(e,r)),n}function Zde(e){const t={};if(S(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function Jde(e){const t={};if(S(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function Xde(e){const t={},n=S(e,["aspectRatio"]);n!=null&&C(t,["aspectRatio"],n);const r=S(e,["imageSize"]);if(r!=null&&C(t,["imageSize"],r),S(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Qde(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["request","model"],as(e,r));const s=S(t,["contents"]);if(s!=null){let a=Nc(s);Array.isArray(a)&&(a=a.map(l=>gq(l))),C(n,["request","contents"],a)}const o=S(t,["metadata"]);o!=null&&C(n,["metadata"],o);const i=S(t,["config"]);return i!=null&&C(n,["request","generationConfig"],Gde(e,i,S(n,["request"],{}))),n}function efe(e){const t={},n=S(e,["response"]);n!=null&&C(t,["response"],Wde(n));const r=S(e,["error"]);return r!=null&&C(t,["error"],r),t}function tfe(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=S(e,["pageToken"]);if(t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),S(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function nfe(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=S(e,["pageToken"]);t!==void 0&&s!=null&&C(t,["_query","pageToken"],s);const o=S(e,["filter"]);return t!==void 0&&o!=null&&C(t,["_query","filter"],o),n}function rfe(e){const t={},n=S(e,["config"]);return n!=null&&tfe(n,t),t}function sfe(e){const t={},n=S(e,["config"]);return n!=null&&nfe(n,t),t}function ofe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=S(e,["operations"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>__(i))),C(t,["batchJobs"],o)}return t}function ife(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=S(e,["batchPredictionJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>uN(i))),C(t,["batchJobs"],o)}return t}function afe(e){const t={},n=S(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=S(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const s=S(e,["executableCode"]);s!=null&&C(t,["executableCode"],s);const o=S(e,["fileData"]);o!=null&&C(t,["fileData"],Hde(o));const i=S(e,["functionCall"]);i!=null&&C(t,["functionCall"],Vde(i));const a=S(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=S(e,["inlineData"]);l!=null&&C(t,["inlineData"],Cde(l));const c=S(e,["text"]);c!=null&&C(t,["text"],c);const u=S(e,["thought"]);u!=null&&C(t,["thought"],u);const f=S(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=S(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function lfe(e){const t={},n=S(e,["category"]);if(n!=null&&C(t,["category"],n),S(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(e,["threshold"]);return r!=null&&C(t,["threshold"],r),t}function cfe(e){const t={},n=S(e,["functionCallingConfig"]);n!=null&&C(t,["functionCallingConfig"],qde(n));const r=S(e,["retrievalConfig"]);return r!=null&&C(t,["retrievalConfig"],r),t}function ufe(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(S(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const s=S(e,["computerUse"]);s!=null&&C(t,["computerUse"],s);const o=S(e,["fileSearch"]);o!=null&&C(t,["fileSearch"],o);const i=S(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),S(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],Zde(a));const l=S(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],Jde(l));const c=S(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Uf;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Uf||(Uf={}));class km{constructor(t,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,s)}init(t,n,r){var s,o;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(o=(s=i.config)===null||s===void 0?void 0:s.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dfe extends eh{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new km(Uf.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=zP(this.apiClient,t),r=n._url,s=Qt("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const u of l){const f=Object.assign({},u);if(f.systemInstruction){const m=f.systemInstruction;delete f.systemInstruction;const g=f.request;g.systemInstruction=m,f.request=g}c.push(f)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const o=this.getGcsUri(t),i=this.getBigqueryUri(t);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${s}`;else if(i)r.dest=`${i}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Ode(this.apiClient,t);return a=Qt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>uN(u))}else{const c=zP(this.apiClient,t);return a=Qt("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>__(u))}}async createEmbeddingsInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Pde(this.apiClient,t);return o=Qt("{model}:asyncBatchEmbedContent",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>__(l))}}async get(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Kde(this.apiClient,t);return a=Qt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>uN(u))}else{const c=Yde(this.apiClient,t);return a=Qt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>__(u))}}async cancel(t){var n,r,s,o;let i="",a={};if(this.apiClient.isVertexAI()){const l=Ade(this.apiClient,t);i=Qt("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=kde(this.apiClient,t);i=Qt("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=sfe(t);return a=Qt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=ife(u),m=new LP;return Object.assign(m,f),m})}else{const c=rfe(t);return a=Qt("batches",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=ofe(u),m=new LP;return Object.assign(m,f),m})}}async delete(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=$de(this.apiClient,t);return a=Qt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>Bde(u))}else{const c=Lde(this.apiClient,t);return a=Qt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>Fde(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ffe(e){const t={},n=S(e,["data"]);if(n!=null&&C(t,["data"],n),S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function jP(e){const t={},n=S(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Pfe(o))),C(t,["parts"],s)}const r=S(e,["role"]);return r!=null&&C(t,["role"],r),t}function hfe(e,t){const n={},r=S(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const s=S(e,["expireTime"]);t!==void 0&&s!=null&&C(t,["expireTime"],s);const o=S(e,["displayName"]);t!==void 0&&o!=null&&C(t,["displayName"],o);const i=S(e,["contents"]);if(t!==void 0&&i!=null){let u=Nc(i);Array.isArray(u)&&(u=u.map(f=>jP(f))),C(t,["contents"],u)}const a=S(e,["systemInstruction"]);t!==void 0&&a!=null&&C(t,["systemInstruction"],jP(ma(a)));const l=S(e,["tools"]);if(t!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>$fe(f))),C(t,["tools"],u)}const c=S(e,["toolConfig"]);if(t!==void 0&&c!=null&&C(t,["toolConfig"],Lfe(c)),S(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function pfe(e,t){const n={},r=S(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const s=S(e,["expireTime"]);t!==void 0&&s!=null&&C(t,["expireTime"],s);const o=S(e,["displayName"]);t!==void 0&&o!=null&&C(t,["displayName"],o);const i=S(e,["contents"]);if(t!==void 0&&i!=null){let f=Nc(i);Array.isArray(f)&&(f=f.map(m=>m)),C(t,["contents"],f)}const a=S(e,["systemInstruction"]);t!==void 0&&a!=null&&C(t,["systemInstruction"],ma(a));const l=S(e,["tools"]);if(t!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>Ffe(m))),C(t,["tools"],f)}const c=S(e,["toolConfig"]);t!==void 0&&c!=null&&C(t,["toolConfig"],c);const u=S(e,["kmsKeyName"]);return t!==void 0&&u!=null&&C(t,["encryption_spec","kmsKeyName"],u),n}function mfe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["model"],sq(e,r));const s=S(t,["config"]);return s!=null&&hfe(s,n),n}function gfe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["model"],sq(e,r));const s=S(t,["config"]);return s!=null&&pfe(s,n),n}function bfe(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],th(e,r)),n}function yfe(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],th(e,r)),n}function vfe(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function xfe(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function wfe(e){const t={};if(S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Efe(e){const t={},n=S(e,["id"]);n!=null&&C(t,["id"],n);const r=S(e,["args"]);r!=null&&C(t,["args"],r);const s=S(e,["name"]);if(s!=null&&C(t,["name"],s),S(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function _fe(e){const t={},n=S(e,["mode"]);n!=null&&C(t,["mode"],n);const r=S(e,["allowedFunctionNames"]);if(r!=null&&C(t,["allowedFunctionNames"],r),S(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Sfe(e){const t={};if(S(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(e,["description"]);n!=null&&C(t,["description"],n);const r=S(e,["name"]);r!=null&&C(t,["name"],r);const s=S(e,["parameters"]);s!=null&&C(t,["parameters"],s);const o=S(e,["parametersJsonSchema"]);o!=null&&C(t,["parametersJsonSchema"],o);const i=S(e,["response"]);i!=null&&C(t,["response"],i);const a=S(e,["responseJsonSchema"]);return a!=null&&C(t,["responseJsonSchema"],a),t}function Tfe(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],th(e,r)),n}function Cfe(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],th(e,r)),n}function kfe(e){const t={};if(S(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function Afe(e){const t={};if(S(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function Nfe(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=S(e,["pageToken"]);return t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),n}function Ife(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=S(e,["pageToken"]);return t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),n}function Rfe(e){const t={},n=S(e,["config"]);return n!=null&&Nfe(n,t),t}function Mfe(e){const t={},n=S(e,["config"]);return n!=null&&Ife(n,t),t}function Ofe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=S(e,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["cachedContents"],o)}return t}function Dfe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=S(e,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["cachedContents"],o)}return t}function Pfe(e){const t={},n=S(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=S(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const s=S(e,["executableCode"]);s!=null&&C(t,["executableCode"],s);const o=S(e,["fileData"]);o!=null&&C(t,["fileData"],wfe(o));const i=S(e,["functionCall"]);i!=null&&C(t,["functionCall"],Efe(i));const a=S(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=S(e,["inlineData"]);l!=null&&C(t,["inlineData"],ffe(l));const c=S(e,["text"]);c!=null&&C(t,["text"],c);const u=S(e,["thought"]);u!=null&&C(t,["thought"],u);const f=S(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=S(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function Lfe(e){const t={},n=S(e,["functionCallingConfig"]);n!=null&&C(t,["functionCallingConfig"],_fe(n));const r=S(e,["retrievalConfig"]);return r!=null&&C(t,["retrievalConfig"],r),t}function $fe(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(S(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const s=S(e,["computerUse"]);s!=null&&C(t,["computerUse"],s);const o=S(e,["fileSearch"]);o!=null&&C(t,["fileSearch"],o);const i=S(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),S(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],kfe(a));const l=S(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],Afe(l));const c=S(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}function Ffe(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Sfe(m))),C(t,["functionDeclarations"],f)}const r=S(e,["retrieval"]);r!=null&&C(t,["retrieval"],r);const s=S(e,["googleSearchRetrieval"]);s!=null&&C(t,["googleSearchRetrieval"],s);const o=S(e,["computerUse"]);if(o!=null&&C(t,["computerUse"],o),S(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=S(e,["codeExecution"]);i!=null&&C(t,["codeExecution"],i);const a=S(e,["enterpriseWebSearch"]);a!=null&&C(t,["enterpriseWebSearch"],a);const l=S(e,["googleMaps"]);l!=null&&C(t,["googleMaps"],l);const c=S(e,["googleSearch"]);c!=null&&C(t,["googleSearch"],c);const u=S(e,["urlContext"]);return u!=null&&C(t,["urlContext"],u),t}function Bfe(e,t){const n={},r=S(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const s=S(e,["expireTime"]);return t!==void 0&&s!=null&&C(t,["expireTime"],s),n}function zfe(e,t){const n={},r=S(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const s=S(e,["expireTime"]);return t!==void 0&&s!=null&&C(t,["expireTime"],s),n}function jfe(e,t){const n={},r=S(t,["name"]);r!=null&&C(n,["_url","name"],th(e,r));const s=S(t,["config"]);return s!=null&&Bfe(s,n),n}function Ufe(e,t){const n={},r=S(t,["name"]);r!=null&&C(n,["_url","name"],th(e,r));const s=S(t,["config"]);return s!=null&&zfe(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hfe extends eh{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new km(Uf.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=gfe(this.apiClient,t);return a=Qt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}else{const c=mfe(this.apiClient,t);return a=Qt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Cfe(this.apiClient,t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}else{const c=Tfe(this.apiClient,t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=yfe(this.apiClient,t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=xfe(u),m=new DP;return Object.assign(m,f),m})}else{const c=bfe(this.apiClient,t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=vfe(u),m=new DP;return Object.assign(m,f),m})}}async update(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Ufe(this.apiClient,t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}else{const c=jfe(this.apiClient,t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async listInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Mfe(t);return a=Qt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Dfe(u),m=new PP;return Object.assign(m,f),m})}else{const c=Rfe(t);return a=Qt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Ofe(u),m=new PP;return Object.assign(m,f),m})}}}function UP(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function so(e){return this instanceof so?(this.v=e,this):new so(e)}function v1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(g){return function(y){return Promise.resolve(y).then(g,f)}}function a(g,y){r[g]&&(s[g]=function(v){return new Promise(function(x,E){o.push([g,v,x,E])>1||l(g,v)})},y&&(s[g]=y(s[g])))}function l(g,y){try{c(r[g](y))}catch(v){m(o[0][3],v)}}function c(g){g.value instanceof so?Promise.resolve(g.value.v).then(u,f):m(o[0][2],g)}function u(g){l("next",g)}function f(g){l("throw",g)}function m(g,y){g(y),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Av(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof UP=="function"?UP(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(i){return new Promise(function(a,l){i=e[o](i),s(a,l,i.done,i.value)})}}function s(o,i,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vfe(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:bq(n)}function bq(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function qfe(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function HP(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const s=[];let o=!0;for(;r<n&&e[r].role==="model";)s.push(e[r]),o&&!bq(e[r])&&(o=!1),r++;o?t.push(...s):t.pop()}return t}class Gfe{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new Wfe(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Wfe{constructor(t,n,r,s={},o=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=s,this.history=o,this.sendPromise=Promise.resolve(),qfe(o)}async sendMessage(t){var n;await this.sendPromise;const r=ma(t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,i,a;const l=await s,c=(i=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content,u=l.automaticFunctionCallingHistory,f=this.getHistory(!0).length;let m=[];u!=null&&(m=(a=u.slice(f))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(t){var n;await this.sendPromise;const r=ma(t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const o=await s;return this.processStreamResponse(o,r)}getHistory(t=!1){const n=t?HP(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return v1(this,arguments,function*(){var s,o,i,a,l,c;const u=[];try{for(var f=!0,m=Av(t),g;g=yield so(m.next()),s=g.done,!s;f=!0){a=g.value,f=!1;const y=a;if(Vfe(y)){const v=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;v!==void 0&&u.push(v)}yield yield so(y)}}catch(y){o={error:y}}finally{try{!f&&!s&&(i=m.return)&&(yield so(i.call(m)))}finally{if(o)throw o.error}}this.recordHistory(n,u)})}recordHistory(t,n,r){let s=[];n.length>0&&n.every(o=>o.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...HP(r)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x4 extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,x4.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yfe(e){const t={},n=S(e,["file"]);return n!=null&&C(t,["file"],n),t}function Kfe(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function Zfe(e){const t={},n=S(e,["name"]);return n!=null&&C(t,["_url","file"],uq(n)),t}function Jfe(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function Xfe(e){const t={},n=S(e,["name"]);return n!=null&&C(t,["_url","file"],uq(n)),t}function Qfe(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=S(e,["pageToken"]);return t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),n}function ehe(e){const t={},n=S(e,["config"]);return n!=null&&Qfe(n,t),t}function the(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=S(e,["files"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["files"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nhe extends eh{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new km(Uf.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ehe(t);return o=Qt("files",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>{const c=the(l),u=new ide;return Object.assign(u,c),u})}}async createInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Yfe(t);return o=Qt("upload/v1beta/files",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=Kfe(l),u=new ade;return Object.assign(u,c),u})}}async get(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Xfe(t);return o=Qt("files/{file}",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Zfe(t);return o=Qt("files/{file}",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>{const c=Jfe(l),u=new lde;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S_(e){const t={},n=S(e,["data"]);if(n!=null&&C(t,["data"],n),S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function rhe(e){const t={},n=S(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>vhe(o))),C(t,["parts"],s)}const r=S(e,["role"]);return r!=null&&C(t,["role"],r),t}function she(e){const t={};if(S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function ohe(e){const t={},n=S(e,["id"]);n!=null&&C(t,["id"],n);const r=S(e,["args"]);r!=null&&C(t,["args"],r);const s=S(e,["name"]);if(s!=null&&C(t,["name"],s),S(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function ihe(e){const t={};if(S(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(e,["description"]);n!=null&&C(t,["description"],n);const r=S(e,["name"]);r!=null&&C(t,["name"],r);const s=S(e,["parameters"]);s!=null&&C(t,["parameters"],s);const o=S(e,["parametersJsonSchema"]);o!=null&&C(t,["parametersJsonSchema"],o);const i=S(e,["response"]);i!=null&&C(t,["response"],i);const a=S(e,["responseJsonSchema"]);return a!=null&&C(t,["responseJsonSchema"],a),t}function ahe(e){const t={},n=S(e,["modelSelectionConfig"]);n!=null&&C(t,["modelConfig"],n);const r=S(e,["responseJsonSchema"]);r!=null&&C(t,["responseJsonSchema"],r);const s=S(e,["audioTimestamp"]);s!=null&&C(t,["audioTimestamp"],s);const o=S(e,["candidateCount"]);o!=null&&C(t,["candidateCount"],o);const i=S(e,["enableAffectiveDialog"]);i!=null&&C(t,["enableAffectiveDialog"],i);const a=S(e,["frequencyPenalty"]);a!=null&&C(t,["frequencyPenalty"],a);const l=S(e,["logprobs"]);l!=null&&C(t,["logprobs"],l);const c=S(e,["maxOutputTokens"]);c!=null&&C(t,["maxOutputTokens"],c);const u=S(e,["mediaResolution"]);u!=null&&C(t,["mediaResolution"],u);const f=S(e,["presencePenalty"]);f!=null&&C(t,["presencePenalty"],f);const m=S(e,["responseLogprobs"]);m!=null&&C(t,["responseLogprobs"],m);const g=S(e,["responseMimeType"]);g!=null&&C(t,["responseMimeType"],g);const y=S(e,["responseModalities"]);y!=null&&C(t,["responseModalities"],y);const v=S(e,["responseSchema"]);v!=null&&C(t,["responseSchema"],v);const x=S(e,["routingConfig"]);x!=null&&C(t,["routingConfig"],x);const E=S(e,["seed"]);E!=null&&C(t,["seed"],E);const T=S(e,["speechConfig"]);T!=null&&C(t,["speechConfig"],yq(T));const k=S(e,["stopSequences"]);k!=null&&C(t,["stopSequences"],k);const I=S(e,["temperature"]);I!=null&&C(t,["temperature"],I);const O=S(e,["thinkingConfig"]);O!=null&&C(t,["thinkingConfig"],O);const M=S(e,["topK"]);M!=null&&C(t,["topK"],M);const P=S(e,["topP"]);if(P!=null&&C(t,["topP"],P),S(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function lhe(e){const t={};if(S(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function che(e){const t={};if(S(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function uhe(e,t){const n={},r=S(e,["generationConfig"]);t!==void 0&&r!=null&&C(t,["setup","generationConfig"],r);const s=S(e,["responseModalities"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","responseModalities"],s);const o=S(e,["temperature"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","temperature"],o);const i=S(e,["topP"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","topP"],i);const a=S(e,["topK"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","topK"],a);const l=S(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=S(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=S(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const f=S(e,["speechConfig"]);t!==void 0&&f!=null&&C(t,["setup","generationConfig","speechConfig"],uR(f));const m=S(e,["thinkingConfig"]);t!==void 0&&m!=null&&C(t,["setup","generationConfig","thinkingConfig"],m);const g=S(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=S(e,["systemInstruction"]);t!==void 0&&y!=null&&C(t,["setup","systemInstruction"],rhe(ma(y)));const v=S(e,["tools"]);if(t!==void 0&&v!=null){let M=gb(v);Array.isArray(M)&&(M=M.map(P=>whe(mb(P)))),C(t,["setup","tools"],M)}const x=S(e,["sessionResumption"]);t!==void 0&&x!=null&&C(t,["setup","sessionResumption"],xhe(x));const E=S(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&C(t,["setup","inputAudioTranscription"],E);const T=S(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&C(t,["setup","outputAudioTranscription"],T);const k=S(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&C(t,["setup","realtimeInputConfig"],k);const I=S(e,["contextWindowCompression"]);t!==void 0&&I!=null&&C(t,["setup","contextWindowCompression"],I);const O=S(e,["proactivity"]);return t!==void 0&&O!=null&&C(t,["setup","proactivity"],O),n}function dhe(e,t){const n={},r=S(e,["generationConfig"]);t!==void 0&&r!=null&&C(t,["setup","generationConfig"],ahe(r));const s=S(e,["responseModalities"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","responseModalities"],s);const o=S(e,["temperature"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","temperature"],o);const i=S(e,["topP"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","topP"],i);const a=S(e,["topK"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","topK"],a);const l=S(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=S(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=S(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const f=S(e,["speechConfig"]);t!==void 0&&f!=null&&C(t,["setup","generationConfig","speechConfig"],yq(uR(f)));const m=S(e,["thinkingConfig"]);t!==void 0&&m!=null&&C(t,["setup","generationConfig","thinkingConfig"],m);const g=S(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=S(e,["systemInstruction"]);t!==void 0&&y!=null&&C(t,["setup","systemInstruction"],ma(y));const v=S(e,["tools"]);if(t!==void 0&&v!=null){let M=gb(v);Array.isArray(M)&&(M=M.map(P=>Ehe(mb(P)))),C(t,["setup","tools"],M)}const x=S(e,["sessionResumption"]);t!==void 0&&x!=null&&C(t,["setup","sessionResumption"],x);const E=S(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&C(t,["setup","inputAudioTranscription"],E);const T=S(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&C(t,["setup","outputAudioTranscription"],T);const k=S(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&C(t,["setup","realtimeInputConfig"],k);const I=S(e,["contextWindowCompression"]);t!==void 0&&I!=null&&C(t,["setup","contextWindowCompression"],I);const O=S(e,["proactivity"]);return t!==void 0&&O!=null&&C(t,["setup","proactivity"],O),n}function fhe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["setup","model"],as(e,r));const s=S(t,["config"]);return s!=null&&C(n,["config"],uhe(s,n)),n}function hhe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["setup","model"],as(e,r));const s=S(t,["config"]);return s!=null&&C(n,["config"],dhe(s,n)),n}function phe(e){const t={},n=S(e,["musicGenerationConfig"]);return n!=null&&C(t,["musicGenerationConfig"],n),t}function mhe(e){const t={},n=S(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),C(t,["weightedPrompts"],r)}return t}function ghe(e){const t={},n=S(e,["media"]);if(n!=null){let c=oq(n);Array.isArray(c)&&(c=c.map(u=>S_(u))),C(t,["mediaChunks"],c)}const r=S(e,["audio"]);r!=null&&C(t,["audio"],S_(aq(r)));const s=S(e,["audioStreamEnd"]);s!=null&&C(t,["audioStreamEnd"],s);const o=S(e,["video"]);o!=null&&C(t,["video"],S_(iq(o)));const i=S(e,["text"]);i!=null&&C(t,["text"],i);const a=S(e,["activityStart"]);a!=null&&C(t,["activityStart"],a);const l=S(e,["activityEnd"]);return l!=null&&C(t,["activityEnd"],l),t}function bhe(e){const t={},n=S(e,["media"]);if(n!=null){let c=oq(n);Array.isArray(c)&&(c=c.map(u=>u)),C(t,["mediaChunks"],c)}const r=S(e,["audio"]);r!=null&&C(t,["audio"],aq(r));const s=S(e,["audioStreamEnd"]);s!=null&&C(t,["audioStreamEnd"],s);const o=S(e,["video"]);o!=null&&C(t,["video"],iq(o));const i=S(e,["text"]);i!=null&&C(t,["text"],i);const a=S(e,["activityStart"]);a!=null&&C(t,["activityStart"],a);const l=S(e,["activityEnd"]);return l!=null&&C(t,["activityEnd"],l),t}function yhe(e){const t={},n=S(e,["setupComplete"]);n!=null&&C(t,["setupComplete"],n);const r=S(e,["serverContent"]);r!=null&&C(t,["serverContent"],r);const s=S(e,["toolCall"]);s!=null&&C(t,["toolCall"],s);const o=S(e,["toolCallCancellation"]);o!=null&&C(t,["toolCallCancellation"],o);const i=S(e,["usageMetadata"]);i!=null&&C(t,["usageMetadata"],_he(i));const a=S(e,["goAway"]);a!=null&&C(t,["goAway"],a);const l=S(e,["sessionResumptionUpdate"]);return l!=null&&C(t,["sessionResumptionUpdate"],l),t}function vhe(e){const t={},n=S(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=S(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const s=S(e,["executableCode"]);s!=null&&C(t,["executableCode"],s);const o=S(e,["fileData"]);o!=null&&C(t,["fileData"],she(o));const i=S(e,["functionCall"]);i!=null&&C(t,["functionCall"],ohe(i));const a=S(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=S(e,["inlineData"]);l!=null&&C(t,["inlineData"],S_(l));const c=S(e,["text"]);c!=null&&C(t,["text"],c);const u=S(e,["thought"]);u!=null&&C(t,["thought"],u);const f=S(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=S(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function xhe(e){const t={},n=S(e,["handle"]);if(n!=null&&C(t,["handle"],n),S(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function yq(e){const t={},n=S(e,["voiceConfig"]);n!=null&&C(t,["voiceConfig"],n);const r=S(e,["languageCode"]);if(r!=null&&C(t,["languageCode"],r),S(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function whe(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(S(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const s=S(e,["computerUse"]);s!=null&&C(t,["computerUse"],s);const o=S(e,["fileSearch"]);o!=null&&C(t,["fileSearch"],o);const i=S(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),S(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],lhe(a));const l=S(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],che(l));const c=S(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}function Ehe(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>ihe(m))),C(t,["functionDeclarations"],f)}const r=S(e,["retrieval"]);r!=null&&C(t,["retrieval"],r);const s=S(e,["googleSearchRetrieval"]);s!=null&&C(t,["googleSearchRetrieval"],s);const o=S(e,["computerUse"]);if(o!=null&&C(t,["computerUse"],o),S(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=S(e,["codeExecution"]);i!=null&&C(t,["codeExecution"],i);const a=S(e,["enterpriseWebSearch"]);a!=null&&C(t,["enterpriseWebSearch"],a);const l=S(e,["googleMaps"]);l!=null&&C(t,["googleMaps"],l);const c=S(e,["googleSearch"]);c!=null&&C(t,["googleSearch"],c);const u=S(e,["urlContext"]);return u!=null&&C(t,["urlContext"],u),t}function _he(e){const t={},n=S(e,["promptTokenCount"]);n!=null&&C(t,["promptTokenCount"],n);const r=S(e,["cachedContentTokenCount"]);r!=null&&C(t,["cachedContentTokenCount"],r);const s=S(e,["candidatesTokenCount"]);s!=null&&C(t,["responseTokenCount"],s);const o=S(e,["toolUsePromptTokenCount"]);o!=null&&C(t,["toolUsePromptTokenCount"],o);const i=S(e,["thoughtsTokenCount"]);i!=null&&C(t,["thoughtsTokenCount"],i);const a=S(e,["totalTokenCount"]);a!=null&&C(t,["totalTokenCount"],a);const l=S(e,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["promptTokensDetails"],g)}const c=S(e,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["cacheTokensDetails"],g)}const u=S(e,["candidatesTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["responseTokensDetails"],g)}const f=S(e,["toolUsePromptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["toolUsePromptTokensDetails"],g)}const m=S(e,["trafficType"]);return m!=null&&C(t,["trafficType"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function She(e){const t={},n=S(e,["data"]);if(n!=null&&C(t,["data"],n),S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function The(e){const t={},n=S(e,["content"]);n!=null&&C(t,["content"],n);const r=S(e,["citationMetadata"]);r!=null&&C(t,["citationMetadata"],Che(r));const s=S(e,["tokenCount"]);s!=null&&C(t,["tokenCount"],s);const o=S(e,["finishReason"]);o!=null&&C(t,["finishReason"],o);const i=S(e,["avgLogprobs"]);i!=null&&C(t,["avgLogprobs"],i);const a=S(e,["groundingMetadata"]);a!=null&&C(t,["groundingMetadata"],a);const l=S(e,["index"]);l!=null&&C(t,["index"],l);const c=S(e,["logprobsResult"]);c!=null&&C(t,["logprobsResult"],c);const u=S(e,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),C(t,["safetyRatings"],m)}const f=S(e,["urlContextMetadata"]);return f!=null&&C(t,["urlContextMetadata"],f),t}function Che(e){const t={},n=S(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),C(t,["citations"],r)}return t}function khe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["contents"]);if(s!=null){let o=Nc(s);Array.isArray(o)&&(o=o.map(i=>i)),C(n,["contents"],o)}return n}function Ahe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(t,["tokensInfo"],s)}return t}function Nhe(e){const t={},n=S(e,["values"]);n!=null&&C(t,["values"],n);const r=S(e,["statistics"]);return r!=null&&C(t,["statistics"],Ihe(r)),t}function Ihe(e){const t={},n=S(e,["truncated"]);n!=null&&C(t,["truncated"],n);const r=S(e,["token_count"]);return r!=null&&C(t,["tokenCount"],r),t}function w4(e){const t={},n=S(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>B0e(o))),C(t,["parts"],s)}const r=S(e,["role"]);return r!=null&&C(t,["role"],r),t}function Rhe(e){const t={},n=S(e,["controlType"]);n!=null&&C(t,["controlType"],n);const r=S(e,["enableControlImageComputation"]);return r!=null&&C(t,["computeControl"],r),t}function Mhe(e){const t={};if(S(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(S(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(S(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Ohe(e,t){const n={},r=S(e,["systemInstruction"]);t!==void 0&&r!=null&&C(t,["systemInstruction"],ma(r));const s=S(e,["tools"]);if(t!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>_q(a))),C(t,["tools"],i)}const o=S(e,["generationConfig"]);return t!==void 0&&o!=null&&C(t,["generationConfig"],S0e(o)),n}function Dhe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["contents"]);if(s!=null){let i=Nc(s);Array.isArray(i)&&(i=i.map(a=>w4(a))),C(n,["contents"],i)}const o=S(t,["config"]);return o!=null&&Mhe(o),n}function Phe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["contents"]);if(s!=null){let i=Nc(s);Array.isArray(i)&&(i=i.map(a=>a)),C(n,["contents"],i)}const o=S(t,["config"]);return o!=null&&Ohe(o,n),n}function Lhe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["totalTokens"]);r!=null&&C(t,["totalTokens"],r);const s=S(e,["cachedContentTokenCount"]);return s!=null&&C(t,["cachedContentTokenCount"],s),t}function $he(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["totalTokens"]);return r!=null&&C(t,["totalTokens"],r),t}function Fhe(e,t){const n={},r=S(t,["model"]);return r!=null&&C(n,["_url","name"],as(e,r)),n}function Bhe(e,t){const n={},r=S(t,["model"]);return r!=null&&C(n,["_url","name"],as(e,r)),n}function zhe(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function jhe(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function Uhe(e,t){const n={},r=S(e,["outputGcsUri"]);t!==void 0&&r!=null&&C(t,["parameters","storageUri"],r);const s=S(e,["negativePrompt"]);t!==void 0&&s!=null&&C(t,["parameters","negativePrompt"],s);const o=S(e,["numberOfImages"]);t!==void 0&&o!=null&&C(t,["parameters","sampleCount"],o);const i=S(e,["aspectRatio"]);t!==void 0&&i!=null&&C(t,["parameters","aspectRatio"],i);const a=S(e,["guidanceScale"]);t!==void 0&&a!=null&&C(t,["parameters","guidanceScale"],a);const l=S(e,["seed"]);t!==void 0&&l!=null&&C(t,["parameters","seed"],l);const c=S(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&C(t,["parameters","safetySetting"],c);const u=S(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const f=S(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&C(t,["parameters","includeSafetyAttributes"],f);const m=S(e,["includeRaiReason"]);t!==void 0&&m!=null&&C(t,["parameters","includeRaiReason"],m);const g=S(e,["language"]);t!==void 0&&g!=null&&C(t,["parameters","language"],g);const y=S(e,["outputMimeType"]);t!==void 0&&y!=null&&C(t,["parameters","outputOptions","mimeType"],y);const v=S(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&C(t,["parameters","outputOptions","compressionQuality"],v);const x=S(e,["addWatermark"]);t!==void 0&&x!=null&&C(t,["parameters","addWatermark"],x);const E=S(e,["labels"]);t!==void 0&&E!=null&&C(t,["labels"],E);const T=S(e,["editMode"]);t!==void 0&&T!=null&&C(t,["parameters","editMode"],T);const k=S(e,["baseSteps"]);return t!==void 0&&k!=null&&C(t,["parameters","editConfig","baseSteps"],k),n}function Hhe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["prompt"]);s!=null&&C(n,["instances[0]","prompt"],s);const o=S(t,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>q0e(l))),C(n,["instances[0]","referenceImages"],a)}const i=S(t,["config"]);return i!=null&&Uhe(i,n),n}function Vhe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>E4(o))),C(t,["generatedImages"],s)}return t}function qhe(e,t){const n={},r=S(e,["taskType"]);t!==void 0&&r!=null&&C(t,["requests[]","taskType"],r);const s=S(e,["title"]);t!==void 0&&s!=null&&C(t,["requests[]","title"],s);const o=S(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&C(t,["requests[]","outputDimensionality"],o),S(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ghe(e,t){const n={},r=S(e,["taskType"]);t!==void 0&&r!=null&&C(t,["instances[]","task_type"],r);const s=S(e,["title"]);t!==void 0&&s!=null&&C(t,["instances[]","title"],s);const o=S(e,["outputDimensionality"]);t!==void 0&&o!=null&&C(t,["parameters","outputDimensionality"],o);const i=S(e,["mimeType"]);t!==void 0&&i!=null&&C(t,["instances[]","mimeType"],i);const a=S(e,["autoTruncate"]);return t!==void 0&&a!=null&&C(t,["parameters","autoTruncate"],a),n}function Whe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["contents"]);if(s!=null){let a=aR(e,s);Array.isArray(a)&&(a=a.map(l=>l)),C(n,["requests[]","content"],a)}const o=S(t,["config"]);o!=null&&qhe(o,n);const i=S(t,["model"]);return i!==void 0&&C(n,["requests[]","model"],as(e,i)),n}function Yhe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["contents"]);if(s!=null){let i=aR(e,s);Array.isArray(i)&&(i=i.map(a=>a)),C(n,["instances[]","content"],i)}const o=S(t,["config"]);return o!=null&&Ghe(o,n),n}function Khe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["embeddings"],o)}const s=S(e,["metadata"]);return s!=null&&C(t,["metadata"],s),t}function Zhe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Nhe(i))),C(t,["embeddings"],o)}const s=S(e,["metadata"]);return s!=null&&C(t,["metadata"],s),t}function Jhe(e){const t={},n=S(e,["endpoint"]);n!=null&&C(t,["name"],n);const r=S(e,["deployedModelId"]);return r!=null&&C(t,["deployedModelId"],r),t}function Xhe(e){const t={};if(S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Qhe(e){const t={},n=S(e,["id"]);n!=null&&C(t,["id"],n);const r=S(e,["args"]);r!=null&&C(t,["args"],r);const s=S(e,["name"]);if(s!=null&&C(t,["name"],s),S(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function e0e(e){const t={},n=S(e,["mode"]);n!=null&&C(t,["mode"],n);const r=S(e,["allowedFunctionNames"]);if(r!=null&&C(t,["allowedFunctionNames"],r),S(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function t0e(e){const t={};if(S(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(e,["description"]);n!=null&&C(t,["description"],n);const r=S(e,["name"]);r!=null&&C(t,["name"],r);const s=S(e,["parameters"]);s!=null&&C(t,["parameters"],s);const o=S(e,["parametersJsonSchema"]);o!=null&&C(t,["parametersJsonSchema"],o);const i=S(e,["response"]);i!=null&&C(t,["response"],i);const a=S(e,["responseJsonSchema"]);return a!=null&&C(t,["responseJsonSchema"],a),t}function n0e(e,t,n){const r={},s=S(t,["systemInstruction"]);n!==void 0&&s!=null&&C(n,["systemInstruction"],w4(ma(s)));const o=S(t,["temperature"]);o!=null&&C(r,["temperature"],o);const i=S(t,["topP"]);i!=null&&C(r,["topP"],i);const a=S(t,["topK"]);a!=null&&C(r,["topK"],a);const l=S(t,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=S(t,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=S(t,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const f=S(t,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const m=S(t,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=S(t,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=S(t,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=S(t,["seed"]);v!=null&&C(r,["seed"],v);const x=S(t,["responseMimeType"]);x!=null&&C(r,["responseMimeType"],x);const E=S(t,["responseSchema"]);E!=null&&C(r,["responseSchema"],lR(E));const T=S(t,["responseJsonSchema"]);if(T!=null&&C(r,["responseJsonSchema"],T),S(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=S(t,["safetySettings"]);if(n!==void 0&&k!=null){let F=k;Array.isArray(F)&&(F=F.map(G=>G0e(G))),C(n,["safetySettings"],F)}const I=S(t,["tools"]);if(n!==void 0&&I!=null){let F=gb(I);Array.isArray(F)&&(F=F.map(G=>Q0e(mb(G)))),C(n,["tools"],F)}const O=S(t,["toolConfig"]);if(n!==void 0&&O!=null&&C(n,["toolConfig"],X0e(O)),S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=S(t,["cachedContent"]);n!==void 0&&M!=null&&C(n,["cachedContent"],th(e,M));const P=S(t,["responseModalities"]);P!=null&&C(r,["responseModalities"],P);const j=S(t,["mediaResolution"]);j!=null&&C(r,["mediaResolution"],j);const V=S(t,["speechConfig"]);if(V!=null&&C(r,["speechConfig"],cR(V)),S(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=S(t,["thinkingConfig"]);U!=null&&C(r,["thinkingConfig"],U);const z=S(t,["imageConfig"]);z!=null&&C(r,["imageConfig"],N0e(z));const H=S(t,["enableEnhancedCivicAnswers"]);return H!=null&&C(r,["enableEnhancedCivicAnswers"],H),r}function r0e(e,t,n){const r={},s=S(t,["systemInstruction"]);n!==void 0&&s!=null&&C(n,["systemInstruction"],ma(s));const o=S(t,["temperature"]);o!=null&&C(r,["temperature"],o);const i=S(t,["topP"]);i!=null&&C(r,["topP"],i);const a=S(t,["topK"]);a!=null&&C(r,["topK"],a);const l=S(t,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=S(t,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=S(t,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const f=S(t,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const m=S(t,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=S(t,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=S(t,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=S(t,["seed"]);v!=null&&C(r,["seed"],v);const x=S(t,["responseMimeType"]);x!=null&&C(r,["responseMimeType"],x);const E=S(t,["responseSchema"]);E!=null&&C(r,["responseSchema"],lR(E));const T=S(t,["responseJsonSchema"]);T!=null&&C(r,["responseJsonSchema"],T);const k=S(t,["routingConfig"]);k!=null&&C(r,["routingConfig"],k);const I=S(t,["modelSelectionConfig"]);I!=null&&C(r,["modelConfig"],I);const O=S(t,["safetySettings"]);if(n!==void 0&&O!=null){let J=O;Array.isArray(J)&&(J=J.map(ee=>ee)),C(n,["safetySettings"],J)}const M=S(t,["tools"]);if(n!==void 0&&M!=null){let J=gb(M);Array.isArray(J)&&(J=J.map(ee=>_q(mb(ee)))),C(n,["tools"],J)}const P=S(t,["toolConfig"]);n!==void 0&&P!=null&&C(n,["toolConfig"],P);const j=S(t,["labels"]);n!==void 0&&j!=null&&C(n,["labels"],j);const V=S(t,["cachedContent"]);n!==void 0&&V!=null&&C(n,["cachedContent"],th(e,V));const U=S(t,["responseModalities"]);U!=null&&C(r,["responseModalities"],U);const z=S(t,["mediaResolution"]);z!=null&&C(r,["mediaResolution"],z);const H=S(t,["speechConfig"]);H!=null&&C(r,["speechConfig"],Eq(cR(H)));const F=S(t,["audioTimestamp"]);F!=null&&C(r,["audioTimestamp"],F);const G=S(t,["thinkingConfig"]);G!=null&&C(r,["thinkingConfig"],G);const X=S(t,["imageConfig"]);if(X!=null&&C(r,["imageConfig"],I0e(X)),S(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function VP(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["contents"]);if(s!=null){let i=Nc(s);Array.isArray(i)&&(i=i.map(a=>w4(a))),C(n,["contents"],i)}const o=S(t,["config"]);return o!=null&&C(n,["generationConfig"],n0e(e,o,n)),n}function qP(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["contents"]);if(s!=null){let i=Nc(s);Array.isArray(i)&&(i=i.map(a=>a)),C(n,["contents"],i)}const o=S(t,["config"]);return o!=null&&C(n,["generationConfig"],r0e(e,o,n)),n}function GP(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>The(c))),C(t,["candidates"],l)}const s=S(e,["modelVersion"]);s!=null&&C(t,["modelVersion"],s);const o=S(e,["promptFeedback"]);o!=null&&C(t,["promptFeedback"],o);const i=S(e,["responseId"]);i!=null&&C(t,["responseId"],i);const a=S(e,["usageMetadata"]);return a!=null&&C(t,["usageMetadata"],a),t}function WP(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>u)),C(t,["candidates"],c)}const s=S(e,["createTime"]);s!=null&&C(t,["createTime"],s);const o=S(e,["modelVersion"]);o!=null&&C(t,["modelVersion"],o);const i=S(e,["promptFeedback"]);i!=null&&C(t,["promptFeedback"],i);const a=S(e,["responseId"]);a!=null&&C(t,["responseId"],a);const l=S(e,["usageMetadata"]);return l!=null&&C(t,["usageMetadata"],l),t}function s0e(e,t){const n={};if(S(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=S(e,["numberOfImages"]);t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r);const s=S(e,["aspectRatio"]);t!==void 0&&s!=null&&C(t,["parameters","aspectRatio"],s);const o=S(e,["guidanceScale"]);if(t!==void 0&&o!=null&&C(t,["parameters","guidanceScale"],o),S(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=S(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&C(t,["parameters","safetySetting"],i);const a=S(e,["personGeneration"]);t!==void 0&&a!=null&&C(t,["parameters","personGeneration"],a);const l=S(e,["includeSafetyAttributes"]);t!==void 0&&l!=null&&C(t,["parameters","includeSafetyAttributes"],l);const c=S(e,["includeRaiReason"]);t!==void 0&&c!=null&&C(t,["parameters","includeRaiReason"],c);const u=S(e,["language"]);t!==void 0&&u!=null&&C(t,["parameters","language"],u);const f=S(e,["outputMimeType"]);t!==void 0&&f!=null&&C(t,["parameters","outputOptions","mimeType"],f);const m=S(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&C(t,["parameters","outputOptions","compressionQuality"],m),S(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=S(e,["imageSize"]);if(t!==void 0&&g!=null&&C(t,["parameters","sampleImageSize"],g),S(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function o0e(e,t){const n={},r=S(e,["outputGcsUri"]);t!==void 0&&r!=null&&C(t,["parameters","storageUri"],r);const s=S(e,["negativePrompt"]);t!==void 0&&s!=null&&C(t,["parameters","negativePrompt"],s);const o=S(e,["numberOfImages"]);t!==void 0&&o!=null&&C(t,["parameters","sampleCount"],o);const i=S(e,["aspectRatio"]);t!==void 0&&i!=null&&C(t,["parameters","aspectRatio"],i);const a=S(e,["guidanceScale"]);t!==void 0&&a!=null&&C(t,["parameters","guidanceScale"],a);const l=S(e,["seed"]);t!==void 0&&l!=null&&C(t,["parameters","seed"],l);const c=S(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&C(t,["parameters","safetySetting"],c);const u=S(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const f=S(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&C(t,["parameters","includeSafetyAttributes"],f);const m=S(e,["includeRaiReason"]);t!==void 0&&m!=null&&C(t,["parameters","includeRaiReason"],m);const g=S(e,["language"]);t!==void 0&&g!=null&&C(t,["parameters","language"],g);const y=S(e,["outputMimeType"]);t!==void 0&&y!=null&&C(t,["parameters","outputOptions","mimeType"],y);const v=S(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&C(t,["parameters","outputOptions","compressionQuality"],v);const x=S(e,["addWatermark"]);t!==void 0&&x!=null&&C(t,["parameters","addWatermark"],x);const E=S(e,["labels"]);t!==void 0&&E!=null&&C(t,["labels"],E);const T=S(e,["imageSize"]);t!==void 0&&T!=null&&C(t,["parameters","sampleImageSize"],T);const k=S(e,["enhancePrompt"]);return t!==void 0&&k!=null&&C(t,["parameters","enhancePrompt"],k),n}function i0e(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["prompt"]);s!=null&&C(n,["instances[0]","prompt"],s);const o=S(t,["config"]);return o!=null&&s0e(o,n),n}function a0e(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["prompt"]);s!=null&&C(n,["instances[0]","prompt"],s);const o=S(t,["config"]);return o!=null&&o0e(o,n),n}function l0e(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>x0e(i))),C(t,["generatedImages"],o)}const s=S(e,["positivePromptSafetyAttributes"]);return s!=null&&C(t,["positivePromptSafetyAttributes"],xq(s)),t}function c0e(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>E4(i))),C(t,["generatedImages"],o)}const s=S(e,["positivePromptSafetyAttributes"]);return s!=null&&C(t,["positivePromptSafetyAttributes"],wq(s)),t}function u0e(e,t){const n={},r=S(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r),S(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=S(e,["durationSeconds"]);if(t!==void 0&&s!=null&&C(t,["parameters","durationSeconds"],s),S(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=S(e,["aspectRatio"]);t!==void 0&&o!=null&&C(t,["parameters","aspectRatio"],o);const i=S(e,["resolution"]);t!==void 0&&i!=null&&C(t,["parameters","resolution"],i);const a=S(e,["personGeneration"]);if(t!==void 0&&a!=null&&C(t,["parameters","personGeneration"],a),S(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=S(e,["negativePrompt"]);t!==void 0&&l!=null&&C(t,["parameters","negativePrompt"],l);const c=S(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&C(t,["parameters","enhancePrompt"],c),S(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const u=S(e,["lastFrame"]);t!==void 0&&u!=null&&C(t,["instances[0]","lastFrame"],_4(u));const f=S(e,["referenceImages"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>fpe(g))),C(t,["instances[0]","referenceImages"],m)}if(S(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(S(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function d0e(e,t){const n={},r=S(e,["numberOfVideos"]);t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r);const s=S(e,["outputGcsUri"]);t!==void 0&&s!=null&&C(t,["parameters","storageUri"],s);const o=S(e,["fps"]);t!==void 0&&o!=null&&C(t,["parameters","fps"],o);const i=S(e,["durationSeconds"]);t!==void 0&&i!=null&&C(t,["parameters","durationSeconds"],i);const a=S(e,["seed"]);t!==void 0&&a!=null&&C(t,["parameters","seed"],a);const l=S(e,["aspectRatio"]);t!==void 0&&l!=null&&C(t,["parameters","aspectRatio"],l);const c=S(e,["resolution"]);t!==void 0&&c!=null&&C(t,["parameters","resolution"],c);const u=S(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const f=S(e,["pubsubTopic"]);t!==void 0&&f!=null&&C(t,["parameters","pubsubTopic"],f);const m=S(e,["negativePrompt"]);t!==void 0&&m!=null&&C(t,["parameters","negativePrompt"],m);const g=S(e,["enhancePrompt"]);t!==void 0&&g!=null&&C(t,["parameters","enhancePrompt"],g);const y=S(e,["generateAudio"]);t!==void 0&&y!=null&&C(t,["parameters","generateAudio"],y);const v=S(e,["lastFrame"]);t!==void 0&&v!=null&&C(t,["instances[0]","lastFrame"],Cu(v));const x=S(e,["referenceImages"]);if(t!==void 0&&x!=null){let k=x;Array.isArray(k)&&(k=k.map(I=>hpe(I))),C(t,["instances[0]","referenceImages"],k)}const E=S(e,["mask"]);t!==void 0&&E!=null&&C(t,["instances[0]","mask"],dpe(E));const T=S(e,["compressionQuality"]);return t!==void 0&&T!=null&&C(t,["parameters","compressionQuality"],T),n}function f0e(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=S(e,["done"]);s!=null&&C(t,["done"],s);const o=S(e,["error"]);o!=null&&C(t,["error"],o);const i=S(e,["response","generateVideoResponse"]);return i!=null&&C(t,["response"],g0e(i)),t}function h0e(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=S(e,["done"]);s!=null&&C(t,["done"],s);const o=S(e,["error"]);o!=null&&C(t,["error"],o);const i=S(e,["response"]);return i!=null&&C(t,["response"],b0e(i)),t}function p0e(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["prompt"]);s!=null&&C(n,["instances[0]","prompt"],s);const o=S(t,["image"]);o!=null&&C(n,["instances[0]","image"],_4(o));const i=S(t,["video"]);i!=null&&C(n,["instances[0]","video"],Sq(i));const a=S(t,["source"]);a!=null&&y0e(a,n);const l=S(t,["config"]);return l!=null&&u0e(l,n),n}function m0e(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["prompt"]);s!=null&&C(n,["instances[0]","prompt"],s);const o=S(t,["image"]);o!=null&&C(n,["instances[0]","image"],Cu(o));const i=S(t,["video"]);i!=null&&C(n,["instances[0]","video"],Tq(i));const a=S(t,["source"]);a!=null&&v0e(a,n);const l=S(t,["config"]);return l!=null&&d0e(l,n),n}function g0e(e){const t={},n=S(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>E0e(i))),C(t,["generatedVideos"],o)}const r=S(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const s=S(e,["raiMediaFilteredReasons"]);return s!=null&&C(t,["raiMediaFilteredReasons"],s),t}function b0e(e){const t={},n=S(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>_0e(i))),C(t,["generatedVideos"],o)}const r=S(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const s=S(e,["raiMediaFilteredReasons"]);return s!=null&&C(t,["raiMediaFilteredReasons"],s),t}function y0e(e,t){const n={},r=S(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const s=S(e,["image"]);t!==void 0&&s!=null&&C(t,["instances[0]","image"],_4(s));const o=S(e,["video"]);return t!==void 0&&o!=null&&C(t,["instances[0]","video"],Sq(o)),n}function v0e(e,t){const n={},r=S(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const s=S(e,["image"]);t!==void 0&&s!=null&&C(t,["instances[0]","image"],Cu(s));const o=S(e,["video"]);return t!==void 0&&o!=null&&C(t,["instances[0]","video"],Tq(o)),n}function x0e(e){const t={},n=S(e,["_self"]);n!=null&&C(t,["image"],R0e(n));const r=S(e,["raiFilteredReason"]);r!=null&&C(t,["raiFilteredReason"],r);const s=S(e,["_self"]);return s!=null&&C(t,["safetyAttributes"],xq(s)),t}function E4(e){const t={},n=S(e,["_self"]);n!=null&&C(t,["image"],vq(n));const r=S(e,["raiFilteredReason"]);r!=null&&C(t,["raiFilteredReason"],r);const s=S(e,["_self"]);s!=null&&C(t,["safetyAttributes"],wq(s));const o=S(e,["prompt"]);return o!=null&&C(t,["enhancedPrompt"],o),t}function w0e(e){const t={},n=S(e,["_self"]);n!=null&&C(t,["mask"],vq(n));const r=S(e,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(t,["labels"],s)}return t}function E0e(e){const t={},n=S(e,["video"]);return n!=null&&C(t,["video"],cpe(n)),t}function _0e(e){const t={},n=S(e,["_self"]);return n!=null&&C(t,["video"],upe(n)),t}function S0e(e){const t={},n=S(e,["modelSelectionConfig"]);n!=null&&C(t,["modelConfig"],n);const r=S(e,["responseJsonSchema"]);r!=null&&C(t,["responseJsonSchema"],r);const s=S(e,["audioTimestamp"]);s!=null&&C(t,["audioTimestamp"],s);const o=S(e,["candidateCount"]);o!=null&&C(t,["candidateCount"],o);const i=S(e,["enableAffectiveDialog"]);i!=null&&C(t,["enableAffectiveDialog"],i);const a=S(e,["frequencyPenalty"]);a!=null&&C(t,["frequencyPenalty"],a);const l=S(e,["logprobs"]);l!=null&&C(t,["logprobs"],l);const c=S(e,["maxOutputTokens"]);c!=null&&C(t,["maxOutputTokens"],c);const u=S(e,["mediaResolution"]);u!=null&&C(t,["mediaResolution"],u);const f=S(e,["presencePenalty"]);f!=null&&C(t,["presencePenalty"],f);const m=S(e,["responseLogprobs"]);m!=null&&C(t,["responseLogprobs"],m);const g=S(e,["responseMimeType"]);g!=null&&C(t,["responseMimeType"],g);const y=S(e,["responseModalities"]);y!=null&&C(t,["responseModalities"],y);const v=S(e,["responseSchema"]);v!=null&&C(t,["responseSchema"],v);const x=S(e,["routingConfig"]);x!=null&&C(t,["routingConfig"],x);const E=S(e,["seed"]);E!=null&&C(t,["seed"],E);const T=S(e,["speechConfig"]);T!=null&&C(t,["speechConfig"],Eq(T));const k=S(e,["stopSequences"]);k!=null&&C(t,["stopSequences"],k);const I=S(e,["temperature"]);I!=null&&C(t,["temperature"],I);const O=S(e,["thinkingConfig"]);O!=null&&C(t,["thinkingConfig"],O);const M=S(e,["topK"]);M!=null&&C(t,["topK"],M);const P=S(e,["topP"]);if(P!=null&&C(t,["topP"],P),S(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function T0e(e,t){const n={},r=S(t,["model"]);return r!=null&&C(n,["_url","name"],as(e,r)),n}function C0e(e,t){const n={},r=S(t,["model"]);return r!=null&&C(n,["_url","name"],as(e,r)),n}function k0e(e){const t={};if(S(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function A0e(e){const t={};if(S(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function N0e(e){const t={},n=S(e,["aspectRatio"]);n!=null&&C(t,["aspectRatio"],n);const r=S(e,["imageSize"]);if(r!=null&&C(t,["imageSize"],r),S(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function I0e(e){const t={},n=S(e,["aspectRatio"]);n!=null&&C(t,["aspectRatio"],n);const r=S(e,["imageSize"]);r!=null&&C(t,["imageSize"],r);const s=S(e,["outputMimeType"]);s!=null&&C(t,["imageOutputOptions","mimeType"],s);const o=S(e,["outputCompressionQuality"]);return o!=null&&C(t,["imageOutputOptions","compressionQuality"],o),t}function R0e(e){const t={},n=S(e,["bytesBase64Encoded"]);n!=null&&C(t,["imageBytes"],L0(n));const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function vq(e){const t={},n=S(e,["gcsUri"]);n!=null&&C(t,["gcsUri"],n);const r=S(e,["bytesBase64Encoded"]);r!=null&&C(t,["imageBytes"],L0(r));const s=S(e,["mimeType"]);return s!=null&&C(t,["mimeType"],s),t}function _4(e){const t={};if(S(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=S(e,["imageBytes"]);n!=null&&C(t,["bytesBase64Encoded"],L0(n));const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Cu(e){const t={},n=S(e,["gcsUri"]);n!=null&&C(t,["gcsUri"],n);const r=S(e,["imageBytes"]);r!=null&&C(t,["bytesBase64Encoded"],L0(r));const s=S(e,["mimeType"]);return s!=null&&C(t,["mimeType"],s),t}function M0e(e,t,n){const r={},s=S(t,["pageSize"]);n!==void 0&&s!=null&&C(n,["_query","pageSize"],s);const o=S(t,["pageToken"]);n!==void 0&&o!=null&&C(n,["_query","pageToken"],o);const i=S(t,["filter"]);n!==void 0&&i!=null&&C(n,["_query","filter"],i);const a=S(t,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],dq(e,a)),r}function O0e(e,t,n){const r={},s=S(t,["pageSize"]);n!==void 0&&s!=null&&C(n,["_query","pageSize"],s);const o=S(t,["pageToken"]);n!==void 0&&o!=null&&C(n,["_query","pageToken"],o);const i=S(t,["filter"]);n!==void 0&&i!=null&&C(n,["_query","filter"],i);const a=S(t,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],dq(e,a)),r}function D0e(e,t){const n={},r=S(t,["config"]);return r!=null&&M0e(e,r,n),n}function P0e(e,t){const n={},r=S(t,["config"]);return r!=null&&O0e(e,r,n),n}function L0e(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=S(e,["_self"]);if(s!=null){let o=fq(s);Array.isArray(o)&&(o=o.map(i=>dN(i))),C(t,["models"],o)}return t}function $0e(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=S(e,["_self"]);if(s!=null){let o=fq(s);Array.isArray(o)&&(o=o.map(i=>fN(i))),C(t,["models"],o)}return t}function F0e(e){const t={},n=S(e,["maskMode"]);n!=null&&C(t,["maskMode"],n);const r=S(e,["segmentationClasses"]);r!=null&&C(t,["maskClasses"],r);const s=S(e,["maskDilation"]);return s!=null&&C(t,["dilation"],s),t}function dN(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["displayName"]);r!=null&&C(t,["displayName"],r);const s=S(e,["description"]);s!=null&&C(t,["description"],s);const o=S(e,["version"]);o!=null&&C(t,["version"],o);const i=S(e,["_self"]);i!=null&&C(t,["tunedModelInfo"],epe(i));const a=S(e,["inputTokenLimit"]);a!=null&&C(t,["inputTokenLimit"],a);const l=S(e,["outputTokenLimit"]);l!=null&&C(t,["outputTokenLimit"],l);const c=S(e,["supportedGenerationMethods"]);c!=null&&C(t,["supportedActions"],c);const u=S(e,["temperature"]);u!=null&&C(t,["temperature"],u);const f=S(e,["maxTemperature"]);f!=null&&C(t,["maxTemperature"],f);const m=S(e,["topP"]);m!=null&&C(t,["topP"],m);const g=S(e,["topK"]);g!=null&&C(t,["topK"],g);const y=S(e,["thinking"]);return y!=null&&C(t,["thinking"],y),t}function fN(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["displayName"]);r!=null&&C(t,["displayName"],r);const s=S(e,["description"]);s!=null&&C(t,["description"],s);const o=S(e,["versionId"]);o!=null&&C(t,["version"],o);const i=S(e,["deployedModels"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>Jhe(m))),C(t,["endpoints"],f)}const a=S(e,["labels"]);a!=null&&C(t,["labels"],a);const l=S(e,["_self"]);l!=null&&C(t,["tunedModelInfo"],tpe(l));const c=S(e,["defaultCheckpointId"]);c!=null&&C(t,["defaultCheckpointId"],c);const u=S(e,["checkpoints"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(m=>m)),C(t,["checkpoints"],f)}return t}function B0e(e){const t={},n=S(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=S(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const s=S(e,["executableCode"]);s!=null&&C(t,["executableCode"],s);const o=S(e,["fileData"]);o!=null&&C(t,["fileData"],Xhe(o));const i=S(e,["functionCall"]);i!=null&&C(t,["functionCall"],Qhe(i));const a=S(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=S(e,["inlineData"]);l!=null&&C(t,["inlineData"],She(l));const c=S(e,["text"]);c!=null&&C(t,["text"],c);const u=S(e,["thought"]);u!=null&&C(t,["thought"],u);const f=S(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=S(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function z0e(e){const t={},n=S(e,["productImage"]);return n!=null&&C(t,["image"],Cu(n)),t}function j0e(e,t){const n={},r=S(e,["numberOfImages"]);t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r);const s=S(e,["baseSteps"]);t!==void 0&&s!=null&&C(t,["parameters","baseSteps"],s);const o=S(e,["outputGcsUri"]);t!==void 0&&o!=null&&C(t,["parameters","storageUri"],o);const i=S(e,["seed"]);t!==void 0&&i!=null&&C(t,["parameters","seed"],i);const a=S(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&C(t,["parameters","safetySetting"],a);const l=S(e,["personGeneration"]);t!==void 0&&l!=null&&C(t,["parameters","personGeneration"],l);const c=S(e,["addWatermark"]);t!==void 0&&c!=null&&C(t,["parameters","addWatermark"],c);const u=S(e,["outputMimeType"]);t!==void 0&&u!=null&&C(t,["parameters","outputOptions","mimeType"],u);const f=S(e,["outputCompressionQuality"]);t!==void 0&&f!=null&&C(t,["parameters","outputOptions","compressionQuality"],f);const m=S(e,["enhancePrompt"]);t!==void 0&&m!=null&&C(t,["parameters","enhancePrompt"],m);const g=S(e,["labels"]);return t!==void 0&&g!=null&&C(t,["labels"],g),n}function U0e(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["source"]);s!=null&&V0e(s,n);const o=S(t,["config"]);return o!=null&&j0e(o,n),n}function H0e(e){const t={},n=S(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>E4(s))),C(t,["generatedImages"],r)}return t}function V0e(e,t){const n={},r=S(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const s=S(e,["personImage"]);t!==void 0&&s!=null&&C(t,["instances[0]","personImage","image"],Cu(s));const o=S(e,["productImages"]);if(t!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>z0e(a))),C(t,["instances[0]","productImages"],i)}return n}function q0e(e){const t={},n=S(e,["referenceImage"]);n!=null&&C(t,["referenceImage"],Cu(n));const r=S(e,["referenceId"]);r!=null&&C(t,["referenceId"],r);const s=S(e,["referenceType"]);s!=null&&C(t,["referenceType"],s);const o=S(e,["maskImageConfig"]);o!=null&&C(t,["maskImageConfig"],F0e(o));const i=S(e,["controlImageConfig"]);i!=null&&C(t,["controlImageConfig"],Rhe(i));const a=S(e,["styleImageConfig"]);a!=null&&C(t,["styleImageConfig"],a);const l=S(e,["subjectImageConfig"]);return l!=null&&C(t,["subjectImageConfig"],l),t}function xq(e){const t={},n=S(e,["safetyAttributes","categories"]);n!=null&&C(t,["categories"],n);const r=S(e,["safetyAttributes","scores"]);r!=null&&C(t,["scores"],r);const s=S(e,["contentType"]);return s!=null&&C(t,["contentType"],s),t}function wq(e){const t={},n=S(e,["safetyAttributes","categories"]);n!=null&&C(t,["categories"],n);const r=S(e,["safetyAttributes","scores"]);r!=null&&C(t,["scores"],r);const s=S(e,["contentType"]);return s!=null&&C(t,["contentType"],s),t}function G0e(e){const t={},n=S(e,["category"]);if(n!=null&&C(t,["category"],n),S(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(e,["threshold"]);return r!=null&&C(t,["threshold"],r),t}function W0e(e){const t={},n=S(e,["image"]);return n!=null&&C(t,["image"],Cu(n)),t}function Y0e(e,t){const n={},r=S(e,["mode"]);t!==void 0&&r!=null&&C(t,["parameters","mode"],r);const s=S(e,["maxPredictions"]);t!==void 0&&s!=null&&C(t,["parameters","maxPredictions"],s);const o=S(e,["confidenceThreshold"]);t!==void 0&&o!=null&&C(t,["parameters","confidenceThreshold"],o);const i=S(e,["maskDilation"]);t!==void 0&&i!=null&&C(t,["parameters","maskDilation"],i);const a=S(e,["binaryColorThreshold"]);t!==void 0&&a!=null&&C(t,["parameters","binaryColorThreshold"],a);const l=S(e,["labels"]);return t!==void 0&&l!=null&&C(t,["labels"],l),n}function K0e(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["source"]);s!=null&&J0e(s,n);const o=S(t,["config"]);return o!=null&&Y0e(o,n),n}function Z0e(e){const t={},n=S(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>w0e(s))),C(t,["generatedMasks"],r)}return t}function J0e(e,t){const n={},r=S(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const s=S(e,["image"]);t!==void 0&&s!=null&&C(t,["instances[0]","image"],Cu(s));const o=S(e,["scribbleImage"]);return t!==void 0&&o!=null&&C(t,["instances[0]","scribble"],W0e(o)),n}function Eq(e){const t={},n=S(e,["voiceConfig"]);n!=null&&C(t,["voiceConfig"],n);const r=S(e,["languageCode"]);if(r!=null&&C(t,["languageCode"],r),S(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function X0e(e){const t={},n=S(e,["functionCallingConfig"]);n!=null&&C(t,["functionCallingConfig"],e0e(n));const r=S(e,["retrievalConfig"]);return r!=null&&C(t,["retrievalConfig"],r),t}function Q0e(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(S(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const s=S(e,["computerUse"]);s!=null&&C(t,["computerUse"],s);const o=S(e,["fileSearch"]);o!=null&&C(t,["fileSearch"],o);const i=S(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),S(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],k0e(a));const l=S(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],A0e(l));const c=S(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}function _q(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>t0e(m))),C(t,["functionDeclarations"],f)}const r=S(e,["retrieval"]);r!=null&&C(t,["retrieval"],r);const s=S(e,["googleSearchRetrieval"]);s!=null&&C(t,["googleSearchRetrieval"],s);const o=S(e,["computerUse"]);if(o!=null&&C(t,["computerUse"],o),S(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=S(e,["codeExecution"]);i!=null&&C(t,["codeExecution"],i);const a=S(e,["enterpriseWebSearch"]);a!=null&&C(t,["enterpriseWebSearch"],a);const l=S(e,["googleMaps"]);l!=null&&C(t,["googleMaps"],l);const c=S(e,["googleSearch"]);c!=null&&C(t,["googleSearch"],c);const u=S(e,["urlContext"]);return u!=null&&C(t,["urlContext"],u),t}function epe(e){const t={},n=S(e,["baseModel"]);n!=null&&C(t,["baseModel"],n);const r=S(e,["createTime"]);r!=null&&C(t,["createTime"],r);const s=S(e,["updateTime"]);return s!=null&&C(t,["updateTime"],s),t}function tpe(e){const t={},n=S(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&C(t,["baseModel"],n);const r=S(e,["createTime"]);r!=null&&C(t,["createTime"],r);const s=S(e,["updateTime"]);return s!=null&&C(t,["updateTime"],s),t}function npe(e,t){const n={},r=S(e,["displayName"]);t!==void 0&&r!=null&&C(t,["displayName"],r);const s=S(e,["description"]);t!==void 0&&s!=null&&C(t,["description"],s);const o=S(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&C(t,["defaultCheckpointId"],o),n}function rpe(e,t){const n={},r=S(e,["displayName"]);t!==void 0&&r!=null&&C(t,["displayName"],r);const s=S(e,["description"]);t!==void 0&&s!=null&&C(t,["description"],s);const o=S(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&C(t,["defaultCheckpointId"],o),n}function spe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","name"],as(e,r));const s=S(t,["config"]);return s!=null&&npe(s,n),n}function ope(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["config"]);return s!=null&&rpe(s,n),n}function ipe(e,t){const n={},r=S(e,["outputGcsUri"]);t!==void 0&&r!=null&&C(t,["parameters","storageUri"],r);const s=S(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&C(t,["parameters","safetySetting"],s);const o=S(e,["personGeneration"]);t!==void 0&&o!=null&&C(t,["parameters","personGeneration"],o);const i=S(e,["includeRaiReason"]);t!==void 0&&i!=null&&C(t,["parameters","includeRaiReason"],i);const a=S(e,["outputMimeType"]);t!==void 0&&a!=null&&C(t,["parameters","outputOptions","mimeType"],a);const l=S(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&C(t,["parameters","outputOptions","compressionQuality"],l);const c=S(e,["enhanceInputImage"]);t!==void 0&&c!=null&&C(t,["parameters","upscaleConfig","enhanceInputImage"],c);const u=S(e,["imagePreservationFactor"]);t!==void 0&&u!=null&&C(t,["parameters","upscaleConfig","imagePreservationFactor"],u);const f=S(e,["labels"]);t!==void 0&&f!=null&&C(t,["labels"],f);const m=S(e,["numberOfImages"]);t!==void 0&&m!=null&&C(t,["parameters","sampleCount"],m);const g=S(e,["mode"]);return t!==void 0&&g!=null&&C(t,["parameters","mode"],g),n}function ape(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],as(e,r));const s=S(t,["image"]);s!=null&&C(n,["instances[0]","image"],Cu(s));const o=S(t,["upscaleFactor"]);o!=null&&C(n,["parameters","upscaleConfig","upscaleFactor"],o);const i=S(t,["config"]);return i!=null&&ipe(i,n),n}function lpe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>E4(o))),C(t,["generatedImages"],s)}return t}function cpe(e){const t={},n=S(e,["uri"]);n!=null&&C(t,["uri"],n);const r=S(e,["encodedVideo"]);r!=null&&C(t,["videoBytes"],L0(r));const s=S(e,["encoding"]);return s!=null&&C(t,["mimeType"],s),t}function upe(e){const t={},n=S(e,["gcsUri"]);n!=null&&C(t,["uri"],n);const r=S(e,["bytesBase64Encoded"]);r!=null&&C(t,["videoBytes"],L0(r));const s=S(e,["mimeType"]);return s!=null&&C(t,["mimeType"],s),t}function dpe(e){const t={},n=S(e,["image"]);n!=null&&C(t,["_self"],Cu(n));const r=S(e,["maskMode"]);return r!=null&&C(t,["maskMode"],r),t}function fpe(e){const t={},n=S(e,["image"]);n!=null&&C(t,["image"],_4(n));const r=S(e,["referenceType"]);return r!=null&&C(t,["referenceType"],r),t}function hpe(e){const t={},n=S(e,["image"]);n!=null&&C(t,["image"],Cu(n));const r=S(e,["referenceType"]);return r!=null&&C(t,["referenceType"],r),t}function Sq(e){const t={},n=S(e,["uri"]);n!=null&&C(t,["uri"],n);const r=S(e,["videoBytes"]);r!=null&&C(t,["encodedVideo"],L0(r));const s=S(e,["mimeType"]);return s!=null&&C(t,["encoding"],s),t}function Tq(e){const t={},n=S(e,["uri"]);n!=null&&C(t,["gcsUri"],n);const r=S(e,["videoBytes"]);r!=null&&C(t,["bytesBase64Encoded"],L0(r));const s=S(e,["mimeType"]);return s!=null&&C(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ppe(e,t){const n={},r=S(e,["displayName"]);return t!==void 0&&r!=null&&C(t,["displayName"],r),n}function mpe(e){const t={},n=S(e,["config"]);return n!=null&&ppe(n,t),t}function gpe(e,t){const n={},r=S(e,["force"]);return t!==void 0&&r!=null&&C(t,["_query","force"],r),n}function bpe(e){const t={},n=S(e,["name"]);n!=null&&C(t,["_url","name"],n);const r=S(e,["config"]);return r!=null&&gpe(r,t),t}function ype(e){const t={},n=S(e,["name"]);return n!=null&&C(t,["_url","name"],n),t}function vpe(e,t){const n={},r=S(e,["customMetadata"]);if(t!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["customMetadata"],o)}const s=S(e,["chunkingConfig"]);return t!==void 0&&s!=null&&C(t,["chunkingConfig"],s),n}function xpe(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=S(e,["done"]);s!=null&&C(t,["done"],s);const o=S(e,["error"]);o!=null&&C(t,["error"],o);const i=S(e,["response"]);return i!=null&&C(t,["response"],Epe(i)),t}function wpe(e){const t={},n=S(e,["fileSearchStoreName"]);n!=null&&C(t,["_url","file_search_store_name"],n);const r=S(e,["fileName"]);r!=null&&C(t,["fileName"],r);const s=S(e,["config"]);return s!=null&&vpe(s,t),t}function Epe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["parent"]);r!=null&&C(t,["parent"],r);const s=S(e,["documentName"]);return s!=null&&C(t,["documentName"],s),t}function _pe(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=S(e,["pageToken"]);return t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),n}function Spe(e){const t={},n=S(e,["config"]);return n!=null&&_pe(n,t),t}function Tpe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=S(e,["fileSearchStores"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["fileSearchStores"],o)}return t}function Cq(e,t){const n={},r=S(e,["mimeType"]);t!==void 0&&r!=null&&C(t,["mimeType"],r);const s=S(e,["displayName"]);t!==void 0&&s!=null&&C(t,["displayName"],s);const o=S(e,["customMetadata"]);if(t!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),C(t,["customMetadata"],a)}const i=S(e,["chunkingConfig"]);return t!==void 0&&i!=null&&C(t,["chunkingConfig"],i),n}function Cpe(e){const t={},n=S(e,["fileSearchStoreName"]);n!=null&&C(t,["_url","file_search_store_name"],n);const r=S(e,["config"]);return r!=null&&Cq(r,t),t}function kpe(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ape="Content-Type",Npe="X-Server-Timeout",Ipe="User-Agent",hN="x-goog-api-client",Rpe="1.32.0",Mpe=`google-genai-sdk/${Rpe}`,Ope="v1beta1",Dpe="v1beta";class Ppe{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Ope,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Dpe,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[i,a]of Object.entries(t.queryParams))s.searchParams.append(i,String(a));let o={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=t.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,s.toString(),t.abortSignal),this.unaryApiCall(s,o,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[s,o]of Object.entries(n))typeof o=="object"?r[s]=Object.assign(Object.assign({},r[s]),o):o!==void 0&&(r[s]=o);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let o={};return o.body=t.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,s.toString(),t.abortSignal),this.streamApiCall(s,o,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,s){if(n&&n.timeout||s){const o=new AbortController,i=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),t.signal=i}return n&&n.extraBody!==null&&Lpe(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await YP(s),new lN(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await YP(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){return v1(this,arguments,function*(){var r;const s=(r=t==null?void 0:t.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let i="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:u}=yield so(s.read());if(c){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(u,{stream:!0});try{const y=JSON.parse(f);if("error"in y){const v=JSON.parse(JSON.stringify(y.error)),x=v.status,E=v.code,T=`got status: ${x}. ${JSON.stringify(y)}`;if(E>=400&&E<600)throw new x4({message:T,status:E})}}catch(y){if(y.name==="ApiError")throw y}i+=f;let m=-1,g=0;for(;;){m=-1,g=0;for(const x of l){const E=i.indexOf(x);E!==-1&&(m===-1||E<m)&&(m=E,g=x.length)}if(m===-1)break;const y=i.substring(0,m);i=i.substring(m+g);const v=y.trim();if(v.startsWith(a)){const x=v.substring(a.length).trim();try{const E=new Response(x,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield so(new lN(E))}catch(E){throw new Error(`exception parsing stream chunk ${x}. ${E}`)}}}}}finally{s.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=Mpe+" "+this.clientOptions.userAgentExtra;return t[Ipe]=n,t[hN]=n,t[Ape]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[s,o]of Object.entries(t.headers))r.append(s,o);t.timeout&&t.timeout>0&&r.append(Npe,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,i=await o.stat(t);s.sizeBytes=String(i.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l={file:s},c=this.getFileName(t),u=Qt("upload/v1beta/files",l._url),f=await this.fetchUploadUrl(u,s.sizeBytes,s.mimeType,c,l,n==null?void 0:n.httpOptions);return o.upload(t,f,this)}async uploadFileToFileSearchStore(t,n,r){var s;const o=this.clientOptions.uploader,i=await o.stat(n),a=String(i.size),l=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:i.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${t}:uploadToFileSearchStore`,u=this.getFileName(n),f={};r!=null&&Cq(r,f);const m=await this.fetchUploadUrl(c,a,l,u,f,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,m,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,s,o,i){var a;let l={};i?l=i:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:t,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function YP(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new x4({message:s,status:n}):new Error(s)}}function Lpe(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const o=JSON.parse(e.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,i){const a=Object.assign({},o);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const c=i[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=r(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const s=r(n,t);e.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $pe="mcp_used/unknown";let Fpe=!1;function kq(e){for(const t of e)if(Bpe(t)||typeof t=="object"&&"inputSchema"in t)return!0;return Fpe}function Aq(e){var t;const n=(t=e[hN])!==null&&t!==void 0?t:"";e[hN]=(n+` ${$pe}`).trimStart()}function Bpe(e){return e!==null&&typeof e=="object"&&e instanceof dR}function zpe(e){return v1(this,arguments,function*(n,r=100){let s,o=0;for(;o<r;){const i=yield so(n.listTools({cursor:s}));for(const a of i.tools)yield yield so(a),o++;if(!i.nextCursor)break;s=i.nextCursor}})}class dR{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new dR(t,n)}async initialize(){var t,n,r,s;if(this.mcpTools.length>0)return;const o={},i=[];for(const u of this.mcpClients)try{for(var a=!0,l=(n=void 0,Av(zpe(u))),c;c=await l.next(),t=c.done,!t;a=!0){s=c.value,a=!1;const f=s;i.push(f);const m=f.name;if(o[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);o[m]=u}}catch(f){n={error:f}}finally{try{!a&&!t&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),yde(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const i=await s.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jpe(e,t,n){const r=new ude;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),t(r)}class Upe{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),i=qpe(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(k=>{c=k}),f=t.callbacks,m=function(){c({})},g=this.apiClient,y={onopen:m,onmessage:k=>{jpe(g,f.onmessage,k)},onerror:(n=f==null?void 0:f.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=f==null?void 0:f.onclose)!==null&&r!==void 0?r:function(k){}},v=this.webSocketFactory.create(l,Vpe(i),y);v.connect(),await u;const T={setup:{model:as(this.apiClient,t.model)}};return v.send(JSON.stringify(T)),new Hpe(v,this.apiClient)}}class Hpe{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=mhe(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=phe(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(d1.PLAY)}pause(){this.sendPlaybackControl(d1.PAUSE)}stop(){this.sendPlaybackControl(d1.STOP)}resetContext(){this.sendPlaybackControl(d1.RESET_CONTEXT)}close(){this.conn.close()}}function Vpe(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function qpe(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gpe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Wpe(e,t,n){const r=new cde;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const o=JSON.parse(s);if(e.isVertexAI()){const i=yhe(o);Object.assign(r,i)}else Object.assign(r,o);t(r)}class Ype{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new Upe(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,s,o,i,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const f=this.apiClient.getHeaders();t.config&&t.config.tools&&kq(t.config.tools)&&Aq(f);const m=Xpe(f);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,u);else{const V=this.apiClient.getApiKey();let U="BidiGenerateContent",z="key";V!=null&&V.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",z="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${U}?${z}=${V}`}let g=()=>{};const y=new Promise(V=>{g=V}),v=t.callbacks,x=function(){var V;(V=v==null?void 0:v.onopen)===null||V===void 0||V.call(v),g({})},E=this.apiClient,T={onopen:x,onmessage:V=>{Wpe(E,v.onmessage,V)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(V){},onclose:(r=v==null?void 0:v.onclose)!==null&&r!==void 0?r:function(V){}},k=this.webSocketFactory.create(u,Jpe(m),T);k.connect(),await y;let I=as(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const V=this.apiClient.getProject(),U=this.apiClient.getLocation();I=`projects/${V}/locations/${U}/`+I}let O={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[$1.AUDIO]}:t.config.responseModalities=[$1.AUDIO]),!((o=t.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const M=(a=(i=t.config)===null||i===void 0?void 0:i.tools)!==null&&a!==void 0?a:[],P=[];for(const V of M)if(this.isCallableTool(V)){const U=V;P.push(await U.tool())}else P.push(V);P.length>0&&(t.config.tools=P);const j={model:I,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?O=hhe(this.apiClient,j):O=fhe(this.apiClient,j),delete O.config,k.send(JSON.stringify(O)),new Zpe(k,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const Kpe={turnComplete:!0};class Zpe{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Nc(n.turns),t.isVertexAI()||(r=r.map(s=>w4(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(Gpe)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},Kpe),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:bhe(t)}:n={realtimeInput:ghe(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Jpe(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function Xpe(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KP=10;function ZP(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const i of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(x1(i)){s=!0;break}if(!s)return!0;const o=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function x1(e){return"callTool"in e&&typeof e.callTool=="function"}function Qpe(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(s=>x1(s)))!==null&&r!==void 0?r:!1}function JP(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,s)=>{if(x1(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(s)}),n}function XP(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eme extends eh{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,s,o,i,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Qpe(n)||ZP(n.config))return await this.generateContentInternal(l);const c=JP(n);if(c.length>0){const v=c.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let u,f;const m=Nc(l.contents),g=(o=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:KP;let y=0;for(;y<g&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const v=u.candidates[0].content,x=[];for(const E of(a=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&a!==void 0?a:[])if(x1(E)){const k=await E.callTool(u.functionCalls);x.push(...k)}y++,f={role:"user",parts:x},l.contents=Nc(l.contents),l.contents.push(v),l.contents.push(f),XP(l.config)&&(m.push(v),m.push(f))}return XP(l.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async n=>{var r,s,o,i,a;if(this.maybeMoveToResponseJsonSchem(n),ZP(n.config)){const f=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(f)}const l=JP(n);if(l.length>0){const f=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${f}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,u=(a=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!u)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let o;const i=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:i.push(l);let a;return o?a={generatedImages:i,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new km(Uf.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,o,i,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((i=(o=n.source)===null||o===void 0?void 0:o.video)===null||i===void 0)&&i.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,s;const o=(n=t.config)===null||n===void 0?void 0:n.tools;if(!o)return t;const i=await Promise.all(o.map(async l=>x1(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:i})};if(a.config.tools=i,t.config&&t.config.tools&&kq(t.config.tools)){const l=(s=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Aq(c),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(t){var n,r,s;const o=new Map;for(const i of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(x1(i)){const a=i,l=await a.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(t){var n,r,s;const o=(s=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:KP;let i=!1,a=0;const l=await this.initAfcToolsMap(t);return(function(c,u,f){return v1(this,arguments,function*(){for(var m,g,y,v,x,E;a<o;){i&&(a++,i=!1);const O=yield so(c.processParamsMaybeAddMcpUsage(f)),M=yield so(c.generateContentStreamInternal(O)),P=[],j=[];try{for(var T=!0,k=(g=void 0,Av(M)),I;I=yield so(k.next()),m=I.done,!m;T=!0){v=I.value,T=!1;const V=v;if(yield yield so(V),V.candidates&&(!((x=V.candidates[0])===null||x===void 0)&&x.content)){j.push(V.candidates[0].content);for(const U of(E=V.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(a<o&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(U.functionCall.name)){const z=yield so(u.get(U.functionCall.name).callTool([U.functionCall]));P.push(...z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(V){g={error:V}}finally{try{!T&&!m&&(y=k.return)&&(yield so(y.call(k)))}finally{if(g)throw g.error}}if(P.length>0){i=!0;const V=new $y;V.candidates=[{content:{role:"user",parts:P}}],yield yield so(V);const U=[];U.push(...j),U.push({role:"user",parts:P});const z=Nc(f.contents).concat(U);f.contents=z}else break}})})(this,l,t)}async generateContentInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=qP(this.apiClient,t);return a=Qt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=WP(u),m=new $y;return Object.assign(m,f),m})}else{const c=VP(this.apiClient,t);return a=Qt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=GP(u),m=new $y;return Object.assign(m,f),m})}}async generateContentStreamInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=qP(this.apiClient,t);return a=Qt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(f){return v1(this,arguments,function*(){var m,g,y,v;try{for(var x=!0,E=Av(f),T;T=yield so(E.next()),m=T.done,!m;x=!0){v=T.value,x=!1;const k=v,I=WP(yield so(k.json()));I.sdkHttpResponse={headers:k.headers};const O=new $y;Object.assign(O,I),yield yield so(O)}}catch(k){g={error:k}}finally{try{!x&&!m&&(y=E.return)&&(yield so(y.call(E)))}finally{if(g)throw g.error}}})})}else{const c=VP(this.apiClient,t);return a=Qt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),i.then(function(f){return v1(this,arguments,function*(){var m,g,y,v;try{for(var x=!0,E=Av(f),T;T=yield so(E.next()),m=T.done,!m;x=!0){v=T.value,x=!1;const k=v,I=GP(yield so(k.json()));I.sdkHttpResponse={headers:k.headers};const O=new $y;Object.assign(O,I),yield yield so(O)}}catch(k){g={error:k}}finally{try{!x&&!m&&(y=E.return)&&(yield so(y.call(E)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Yhe(this.apiClient,t);return a=Qt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Zhe(u),m=new kP;return Object.assign(m,f),m})}else{const c=Whe(this.apiClient,t);return a=Qt("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Khe(u),m=new kP;return Object.assign(m,f),m})}}async generateImagesInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=a0e(this.apiClient,t);return a=Qt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=c0e(u),m=new AP;return Object.assign(m,f),m})}else{const c=i0e(this.apiClient,t);return a=Qt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=l0e(u),m=new AP;return Object.assign(m,f),m})}}async editImageInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=Hhe(this.apiClient,t);return o=Qt("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>{const c=Vhe(l),u=new Xue;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=ape(this.apiClient,t);return o=Qt("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>{const c=lpe(l),u=new Que;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=U0e(this.apiClient,t);return o=Qt("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=H0e(l),u=new ede;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=K0e(this.apiClient,t);return o=Qt("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=Z0e(l),u=new tde;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=C0e(this.apiClient,t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>fN(u))}else{const c=T0e(this.apiClient,t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>dN(u))}}async listInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=P0e(this.apiClient,t);return a=Qt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=$0e(u),m=new NP;return Object.assign(m,f),m})}else{const c=D0e(this.apiClient,t);return a=Qt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=L0e(u),m=new NP;return Object.assign(m,f),m})}}async update(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=ope(this.apiClient,t);return a=Qt("{model}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>fN(u))}else{const c=spe(this.apiClient,t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>dN(u))}}async delete(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Bhe(this.apiClient,t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=jhe(u),m=new IP;return Object.assign(m,f),m})}else{const c=Fhe(this.apiClient,t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=zhe(u),m=new IP;return Object.assign(m,f),m})}}async countTokens(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Phe(this.apiClient,t);return a=Qt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=$he(u),m=new RP;return Object.assign(m,f),m})}else{const c=Dhe(this.apiClient,t);return a=Qt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Lhe(u),m=new RP;return Object.assign(m,f),m})}}async computeTokens(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=khe(this.apiClient,t);return o=Qt("{model}:computeTokens",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>{const c=Ahe(l),u=new nde;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=m0e(this.apiClient,t);return a=Qt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=h0e(u),m=new K_;return Object.assign(m,f),m})}else{const c=p0e(this.apiClient,t);return a=Qt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>{const f=f0e(u),m=new K_;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tme extends eh{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Gue(t);return a=Qt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else{const c=que(t);return a=Qt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i}}async fetchPredictVideosOperationInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=Fue(t);return o=Qt("{resourceName}:fetchPredictOperation",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nme(e){const t={},n=S(e,["data"]);if(n!=null&&C(t,["data"],n),S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function rme(e){const t={},n=S(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>fme(o))),C(t,["parts"],s)}const r=S(e,["role"]);return r!=null&&C(t,["role"],r),t}function sme(e,t,n){const r={},s=S(t,["expireTime"]);n!==void 0&&s!=null&&C(n,["expireTime"],s);const o=S(t,["newSessionExpireTime"]);n!==void 0&&o!=null&&C(n,["newSessionExpireTime"],o);const i=S(t,["uses"]);n!==void 0&&i!=null&&C(n,["uses"],i);const a=S(t,["liveConnectConstraints"]);n!==void 0&&a!=null&&C(n,["bidiGenerateContentSetup"],dme(e,a));const l=S(t,["lockAdditionalFields"]);return n!==void 0&&l!=null&&C(n,["fieldMask"],l),r}function ome(e,t){const n={},r=S(t,["config"]);return r!=null&&C(n,["config"],sme(e,r,n)),n}function ime(e){const t={};if(S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function ame(e){const t={},n=S(e,["id"]);n!=null&&C(t,["id"],n);const r=S(e,["args"]);r!=null&&C(t,["args"],r);const s=S(e,["name"]);if(s!=null&&C(t,["name"],s),S(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function lme(e){const t={};if(S(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function cme(e){const t={};if(S(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function ume(e,t){const n={},r=S(e,["generationConfig"]);t!==void 0&&r!=null&&C(t,["setup","generationConfig"],r);const s=S(e,["responseModalities"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","responseModalities"],s);const o=S(e,["temperature"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","temperature"],o);const i=S(e,["topP"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","topP"],i);const a=S(e,["topK"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","topK"],a);const l=S(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=S(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=S(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const f=S(e,["speechConfig"]);t!==void 0&&f!=null&&C(t,["setup","generationConfig","speechConfig"],uR(f));const m=S(e,["thinkingConfig"]);t!==void 0&&m!=null&&C(t,["setup","generationConfig","thinkingConfig"],m);const g=S(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=S(e,["systemInstruction"]);t!==void 0&&y!=null&&C(t,["setup","systemInstruction"],rme(ma(y)));const v=S(e,["tools"]);if(t!==void 0&&v!=null){let M=gb(v);Array.isArray(M)&&(M=M.map(P=>pme(mb(P)))),C(t,["setup","tools"],M)}const x=S(e,["sessionResumption"]);t!==void 0&&x!=null&&C(t,["setup","sessionResumption"],hme(x));const E=S(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&C(t,["setup","inputAudioTranscription"],E);const T=S(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&C(t,["setup","outputAudioTranscription"],T);const k=S(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&C(t,["setup","realtimeInputConfig"],k);const I=S(e,["contextWindowCompression"]);t!==void 0&&I!=null&&C(t,["setup","contextWindowCompression"],I);const O=S(e,["proactivity"]);return t!==void 0&&O!=null&&C(t,["setup","proactivity"],O),n}function dme(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["setup","model"],as(e,r));const s=S(t,["config"]);return s!=null&&C(n,["config"],ume(s,n)),n}function fme(e){const t={},n=S(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=S(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const s=S(e,["executableCode"]);s!=null&&C(t,["executableCode"],s);const o=S(e,["fileData"]);o!=null&&C(t,["fileData"],ime(o));const i=S(e,["functionCall"]);i!=null&&C(t,["functionCall"],ame(i));const a=S(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=S(e,["inlineData"]);l!=null&&C(t,["inlineData"],nme(l));const c=S(e,["text"]);c!=null&&C(t,["text"],c);const u=S(e,["thought"]);u!=null&&C(t,["thought"],u);const f=S(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=S(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function hme(e){const t={},n=S(e,["handle"]);if(n!=null&&C(t,["handle"],n),S(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function pme(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(S(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const s=S(e,["computerUse"]);s!=null&&C(t,["computerUse"],s);const o=S(e,["fileSearch"]);o!=null&&C(t,["fileSearch"],o);const i=S(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),S(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],lme(a));const l=S(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],cme(l));const c=S(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mme(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(o=>`${n}.${o}`);t.push(...s)}else t.push(n)}return t.join(",")}function gme(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(e.bidiGenerateContentSetup=o,n=o):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const s=e.fieldMask;if(n){const o=mme(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)o?e.fieldMask=o:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(c=>i.includes(c)?`generationConfig.${c}`:c));const l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?e.fieldMask=s.join(","):delete e.fieldMask;return e}class bme extends eh{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=ome(this.apiClient,t);o=Qt("auth_tokens",a._url),i=a._query,delete a.config,delete a._url,delete a._query;const l=gme(a,t.config);return s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yme(e,t){const n={},r=S(e,["force"]);return t!==void 0&&r!=null&&C(t,["_query","force"],r),n}function vme(e){const t={},n=S(e,["name"]);n!=null&&C(t,["_url","name"],n);const r=S(e,["config"]);return r!=null&&yme(r,t),t}function xme(e){const t={},n=S(e,["name"]);return n!=null&&C(t,["_url","name"],n),t}function wme(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=S(e,["pageToken"]);return t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),n}function Eme(e){const t={},n=S(e,["parent"]);n!=null&&C(t,["_url","parent"],n);const r=S(e,["config"]);return r!=null&&wme(r,t),t}function _me(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=S(e,["documents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["documents"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sme extends eh{constructor(t){super(),this.apiClient=t,this.list=async n=>new km(Uf.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xme(t);return o=Qt("{name}",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(t){var n,r;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=vme(t);s=Qt("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Eme(t);return o=Qt("{parent}/documents",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=_me(l),u=new rde;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tme extends eh{constructor(t,n=new Sme(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new km(Uf.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mpe(t);return o=Qt("fileSearchStores",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async get(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ype(t);return o=Qt("{name}",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(t){var n,r;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=bpe(t);s=Qt("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Spe(t);return o=Qt("fileSearchStores",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=Tpe(l),u=new sde;return Object.assign(u,c),u})}}async uploadToFileSearchStoreInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Cpe(t);return o=Qt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=kpe(l),u=new ode;return Object.assign(u,c),u})}}async importFile(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wpe(t);return o=Qt("{file_search_store_name}:importFile",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=xpe(l),u=new oR;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cme(e,t){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function kme(e,t){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Ame(e,t){const n={},r=S(e,["sdkHttpResponse"]);return r!=null&&C(n,["sdkHttpResponse"],r),n}function Nme(e,t){const n={},r=S(e,["sdkHttpResponse"]);return r!=null&&C(n,["sdkHttpResponse"],r),n}function Ime(e,t,n){const r={};if(S(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=S(e,["tunedModelDisplayName"]);if(t!==void 0&&s!=null&&C(t,["displayName"],s),S(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=S(e,["epochCount"]);t!==void 0&&o!=null&&C(t,["tuningTask","hyperparameters","epochCount"],o);const i=S(e,["learningRateMultiplier"]);if(i!=null&&C(r,["tuningTask","hyperparameters","learningRateMultiplier"],i),S(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(S(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(S(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=S(e,["batchSize"]);t!==void 0&&a!=null&&C(t,["tuningTask","hyperparameters","batchSize"],a);const l=S(e,["learningRate"]);if(t!==void 0&&l!=null&&C(t,["tuningTask","hyperparameters","learningRate"],l),S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(S(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Rme(e,t,n){const r={};let s=S(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=S(e,["validationDataset"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec"],QP(g))}else if(s==="PREFERENCE_TUNING"){const g=S(e,["validationDataset"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec"],QP(g))}const o=S(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&C(t,["tunedModelDisplayName"],o);const i=S(e,["description"]);t!==void 0&&i!=null&&C(t,["description"],i);let a=S(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=S(e,["epochCount"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=S(e,["epochCount"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=S(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=S(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=S(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=S(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=S(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=S(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let u=S(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=S(e,["adapterSize"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(u==="PREFERENCE_TUNING"){const g=S(e,["adapterSize"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(S(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(S(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const f=S(e,["labels"]);t!==void 0&&f!=null&&C(t,["labels"],f);const m=S(e,["beta"]);return t!==void 0&&m!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function Mme(e,t){const n={},r=S(e,["baseModel"]);r!=null&&C(n,["baseModel"],r);const s=S(e,["preTunedModel"]);s!=null&&C(n,["preTunedModel"],s);const o=S(e,["trainingDataset"]);o!=null&&Hme(o);const i=S(e,["config"]);return i!=null&&Ime(i,n),n}function Ome(e,t){const n={},r=S(e,["baseModel"]);r!=null&&C(n,["baseModel"],r);const s=S(e,["preTunedModel"]);s!=null&&C(n,["preTunedModel"],s);const o=S(e,["trainingDataset"]);o!=null&&Vme(o,n,t);const i=S(e,["config"]);return i!=null&&Rme(i,n,t),n}function Dme(e,t){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Pme(e,t){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Lme(e,t,n){const r={},s=S(e,["pageSize"]);t!==void 0&&s!=null&&C(t,["_query","pageSize"],s);const o=S(e,["pageToken"]);t!==void 0&&o!=null&&C(t,["_query","pageToken"],o);const i=S(e,["filter"]);return t!==void 0&&i!=null&&C(t,["_query","filter"],i),r}function $me(e,t,n){const r={},s=S(e,["pageSize"]);t!==void 0&&s!=null&&C(t,["_query","pageSize"],s);const o=S(e,["pageToken"]);t!==void 0&&o!=null&&C(t,["_query","pageToken"],o);const i=S(e,["filter"]);return t!==void 0&&i!=null&&C(t,["_query","filter"],i),r}function Fme(e,t){const n={},r=S(e,["config"]);return r!=null&&Lme(r,n),n}function Bme(e,t){const n={},r=S(e,["config"]);return r!=null&&$me(r,n),n}function zme(e,t){const n={},r=S(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const s=S(e,["nextPageToken"]);s!=null&&C(n,["nextPageToken"],s);const o=S(e,["tunedModels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>Nq(a))),C(n,["tuningJobs"],i)}return n}function jme(e,t){const n={},r=S(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const s=S(e,["nextPageToken"]);s!=null&&C(n,["nextPageToken"],s);const o=S(e,["tuningJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>pN(a))),C(n,["tuningJobs"],i)}return n}function Ume(e,t){const n={},r=S(e,["name"]);r!=null&&C(n,["model"],r);const s=S(e,["name"]);return s!=null&&C(n,["endpoint"],s),n}function Hme(e,t){const n={};if(S(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=S(e,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(n,["examples","examples"],s)}return n}function Vme(e,t,n){const r={};let s=S(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const i=S(e,["gcsUri"]);t!==void 0&&i!=null&&C(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(s==="PREFERENCE_TUNING"){const i=S(e,["gcsUri"]);t!==void 0&&i!=null&&C(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}let o=S(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const i=S(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&C(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(o==="PREFERENCE_TUNING"){const i=S(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&C(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}if(S(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Nq(e,t){const n={},r=S(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const s=S(e,["name"]);s!=null&&C(n,["name"],s);const o=S(e,["state"]);o!=null&&C(n,["state"],cq(o));const i=S(e,["createTime"]);i!=null&&C(n,["createTime"],i);const a=S(e,["tuningTask","startTime"]);a!=null&&C(n,["startTime"],a);const l=S(e,["tuningTask","completeTime"]);l!=null&&C(n,["endTime"],l);const c=S(e,["updateTime"]);c!=null&&C(n,["updateTime"],c);const u=S(e,["description"]);u!=null&&C(n,["description"],u);const f=S(e,["baseModel"]);f!=null&&C(n,["baseModel"],f);const m=S(e,["_self"]);return m!=null&&C(n,["tunedModel"],Ume(m)),n}function pN(e,t){const n={},r=S(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const s=S(e,["name"]);s!=null&&C(n,["name"],s);const o=S(e,["state"]);o!=null&&C(n,["state"],cq(o));const i=S(e,["createTime"]);i!=null&&C(n,["createTime"],i);const a=S(e,["startTime"]);a!=null&&C(n,["startTime"],a);const l=S(e,["endTime"]);l!=null&&C(n,["endTime"],l);const c=S(e,["updateTime"]);c!=null&&C(n,["updateTime"],c);const u=S(e,["error"]);u!=null&&C(n,["error"],u);const f=S(e,["description"]);f!=null&&C(n,["description"],f);const m=S(e,["baseModel"]);m!=null&&C(n,["baseModel"],m);const g=S(e,["tunedModel"]);g!=null&&C(n,["tunedModel"],g);const y=S(e,["preTunedModel"]);y!=null&&C(n,["preTunedModel"],y);const v=S(e,["supervisedTuningSpec"]);v!=null&&C(n,["supervisedTuningSpec"],v);const x=S(e,["preferenceOptimizationSpec"]);x!=null&&C(n,["preferenceOptimizationSpec"],x);const E=S(e,["tuningDataStats"]);E!=null&&C(n,["tuningDataStats"],E);const T=S(e,["encryptionSpec"]);T!=null&&C(n,["encryptionSpec"],T);const k=S(e,["partnerModelTuningSpec"]);k!=null&&C(n,["partnerModelTuningSpec"],k);const I=S(e,["customBaseModel"]);I!=null&&C(n,["customBaseModel"],I);const O=S(e,["experiment"]);O!=null&&C(n,["experiment"],O);const M=S(e,["labels"]);M!=null&&C(n,["labels"],M);const P=S(e,["outputUri"]);P!=null&&C(n,["outputUri"],P);const j=S(e,["pipelineJob"]);j!=null&&C(n,["pipelineJob"],j);const V=S(e,["serviceAccount"]);V!=null&&C(n,["serviceAccount"],V);const U=S(e,["tunedModelDisplayName"]);U!=null&&C(n,["tunedModelDisplayName"],U);const z=S(e,["veoTuningSpec"]);return z!=null&&C(n,["veoTuningSpec"],z),n}function qme(e,t){const n={},r=S(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const s=S(e,["name"]);s!=null&&C(n,["name"],s);const o=S(e,["metadata"]);o!=null&&C(n,["metadata"],o);const i=S(e,["done"]);i!=null&&C(n,["done"],i);const a=S(e,["error"]);return a!=null&&C(n,["error"],a),n}function QP(e,t){const n={},r=S(e,["gcsUri"]);r!=null&&C(n,["validationDatasetUri"],r);const s=S(e,["vertexDatasetResource"]);return s!=null&&C(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gme extends eh{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new km(Uf.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:s});return o.baseModel=void 0,await this.tuneInternal(o)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),o=await this.tuneMldevInternal(s);let i="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?i=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(i=o.name.split("/operations/")[0]),{name:i,state:aN.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Pme(t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>pN(u))}else{const c=Dme(t);return a=Qt("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>Nq(u))}}async listInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Bme(t);return a=Qt("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=jme(u),m=new MP;return Object.assign(m,f),m})}else{const c=Fme(t);return a=Qt("tunedModels",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=zme(u),m=new MP;return Object.assign(m,f),m})}}async cancel(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=kme(t);return a=Qt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Nme(u),m=new OP;return Object.assign(m,f),m})}else{const c=Cme(t);return a=Qt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Ame(u),m=new OP;return Object.assign(m,f),m})}}async tuneInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=Ome(t,t);return o=Qt("tuningJobs",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>pN(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Mme(t);return o=Qt("tunedModels",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>qme(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wme{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Yme=1024*1024*8,Kme=3,Zme=1e3,Jme=2,J_="x-goog-upload-status";async function Xme(e,t,n){var r;const s=await Iq(e,t,n),o=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[J_])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function Qme(e,t,n){var r;const s=await Iq(e,t,n),o=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[J_])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const i=rq(o),a=new iR;return Object.assign(a,i),a}async function Iq(e,t,n){var r,s;let o=0,i=0,a=new lN(new Response),l="upload";for(o=e.size;i<o;){const c=Math.min(Yme,o-i),u=e.slice(i,i+c);i+c>=o&&(l+=", finalize");let f=0,m=Zme;for(;f<Kme&&(a=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(i),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[J_]));)f++,await tge(m),m=m*Jme;if(i+=c,((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[J_])!=="active")break;if(o<=i)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function ege(e){return{size:e.size,type:e.type}}function tge(e){return new Promise(t=>setTimeout(t,e))}class nge{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Xme(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Qme(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await ege(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rge{create(t,n,r){return new sge(t,n,r)}}class sge{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eL="x-goog-api-key";class oge{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(eL)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(eL,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ige="gl-node/";class fR{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=Lue(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const s=new oge(this.apiKey);this.apiClient=new Ppe({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:ige+"web",uploader:new nge,downloader:new Wme}),this.models=new eme(this.apiClient),this.live=new Ype(this.apiClient,s,new rge),this.batches=new dfe(this.apiClient),this.chats=new Gfe(this.models,this.apiClient),this.caches=new Hfe(this.apiClient),this.files=new nhe(this.apiClient),this.operations=new tme(this.apiClient),this.authTokens=new bme(this.apiClient),this.tunings=new Gme(this.apiClient),this.fileSearchStores=new Tme(this.apiClient)}}function age(e){const t=new Int16Array(e.length);for(let n=0;n<e.length;n++){const r=Math.max(-1,Math.min(1,e[n]));t[n]=r<0?r*32768:r*32767}return t}function lge(e){let t="";const n=new Uint8Array(e.buffer),r=n.byteLength;for(let s=0;s<r;s++)t+=String.fromCharCode(n[s]);return btoa(t)}function cge(e){const t=age(e);return{data:lge(t),mimeType:"audio/pcm;rate=16000"}}function uge(e){const t=atob(e),n=t.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=t.charCodeAt(s);return r}async function Rq(e,t,n=24e3,r=1){const s=new Int16Array(e.buffer),o=s.length/r,i=t.createBuffer(r,o,n);for(let a=0;a<r;a++){const l=i.getChannelData(a);for(let c=0;c<o;c++)l[c]=s[c*r+a]/32768}return i}async function dge(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.currentTime,n=e.createOscillator(),r=e.createGain();n.frequency.value=600,r.gain.setValueAtTime(.25,t),r.gain.exponentialRampToValueAtTime(.01,t+.1),n.connect(r),r.connect(e.destination),n.start(t),n.stop(t+.1);const s=e.createOscillator(),o=e.createGain();s.frequency.value=800,o.gain.setValueAtTime(.25,t+.05),o.gain.exponentialRampToValueAtTime(.01,t+.15),s.connect(o),o.connect(e.destination),s.start(t+.05),s.stop(t+.15),await new Promise(i=>setTimeout(i,150))}catch(e){console.error("[Audio] Failed to play approval sound:",e)}}async function fge(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.currentTime,n=e.createOscillator(),r=e.createGain();n.frequency.value=800,r.gain.setValueAtTime(.25,t),r.gain.exponentialRampToValueAtTime(.01,t+.1),n.connect(r),r.connect(e.destination),n.start(t),n.stop(t+.1);const s=e.createOscillator(),o=e.createGain();s.frequency.value=500,o.gain.setValueAtTime(.25,t+.05),o.gain.exponentialRampToValueAtTime(.01,t+.15),s.connect(o),o.connect(e.destination),s.start(t+.05),s.stop(t+.15),await new Promise(i=>setTimeout(i,150))}catch(e){console.error("[Audio] Failed to play rejection sound:",e)}}async function hge(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.currentTime,n=[700,600,500],r=[0,.05,.1];n.forEach((s,o)=>{const i=e.createOscillator(),a=e.createGain();i.frequency.value=s,a.gain.setValueAtTime(.2,t+r[o]),a.gain.exponentialRampToValueAtTime(.01,t+r[o]+.08),i.connect(a),a.connect(e.destination),i.start(t+r[o]),i.stop(t+r[o]+.08)}),await new Promise(s=>setTimeout(s,180))}catch(e){console.error("[Audio] Failed to play undo sound:",e)}}function Ji(e){const t=n=>(...r)=>{};return{log:t(),warn:t(),error:(...n)=>{console.error(`[${e}]`,...n)},info:t()}}const Yr={ai:Ji("AI"),aiSdk:Ji("AI SDK"),exec:Ji("Exec"),inspector:Ji("Inspector"),sourcePatch:Ji("Source Patch"),tabData:Ji("TabData"),fileBrowser:Ji("FileBrowser"),instantUI:Ji("Instant UI"),domApproval:Ji("DOM Approval"),liveGemini:Ji("useLiveGemini"),aiChat:Ji("useAIChatV2"),codingAgent:Ji("Coding Agent"),webview:Ji("Webview"),input:Ji("Input"),preview:Ji("Preview"),mcp:Ji("MCP"),general:Ji("App")};function tL(...e){}class mc extends Error{constructor(t,n){super(`Operation "${t}" timed out after ${n}ms`),this.name="TimeoutError"}}function Xc(e,t,n){let r;const s=new Promise((o,i)=>{r=setTimeout(()=>{i(new mc(n,t))},t)});return Promise.race([e,s]).finally(()=>{clearTimeout(r)})}const Qc={TOOL_CALL:3e4,FILE_READ:1e4,FILE_LIST:1e4,API_CALL:6e4,QUICK:5e3},pge={update_ui:(e,t,n)=>{const r=e.args.html;t.onCodeUpdate&&r&&t.onCodeUpdate(r),n(e.id,e.name,{result:"UI Updated Successfully"})},select_element:(e,t,n)=>{const{selector:r,reasoning:s}=e.args;t.onElementSelect&&r&&t.onElementSelect(r,s),n(e.id,e.name,{result:"Element selection requested",selector:r,reasoning:s})},execute_code:(e,t,n)=>{const{code:r,description:s}=e.args;t.onExecuteCode&&r&&t.onExecuteCode(r,s||""),n(e.id,e.name,{result:"Code executed successfully",description:s})},confirm_selection:(e,t,n)=>{const{confirmed:r,elementNumber:s}=e.args;t.onConfirmSelection&&t.onConfirmSelection(!!r,s),n(e.id,e.name,{result:r?s?`Element ${s} confirmed`:"Selection confirmed":"Selection rejected"})},get_page_elements:async(e,t,n)=>{const r=e.args.category||"all";if(!t.onGetPageElements){n(e.id,e.name,{error:"get_page_elements handler not available"});return}try{const s=await Xc(t.onGetPageElements(r),Qc.TOOL_CALL,"get_page_elements");n(e.id,e.name,{result:s})}catch(s){const o=s instanceof mc||s instanceof Error?s.message:"Failed to get page elements";n(e.id,e.name,{error:o})}},patch_source_file:async(e,t,n)=>{const{filePath:r,searchCode:s,replaceCode:o,description:i}=e.args;if(!t.onPatchSourceFile){n(e.id,e.name,{error:"patch_source_file handler not available - file editing not supported"});return}if(!r||!s||!o){n(e.id,e.name,{error:"Missing required arguments for patch_source_file"});return}try{const a=await Xc(t.onPatchSourceFile(r,s,o,i||""),Qc.TOOL_CALL,"patch_source_file");n(e.id,e.name,a.success?{result:`Successfully patched ${r}: ${i}`}:{error:a.error||"Failed to patch file"})}catch(a){const l=a instanceof mc||a instanceof Error?a.message:"Failed to patch source file";n(e.id,e.name,{error:l})}},list_files:async(e,t,n)=>{const r=e.args.path||".";if(!t.onListFiles){n(e.id,e.name,{error:"list_files not available"});return}try{const s=await Xc(t.onListFiles(r),Qc.FILE_LIST,"list_files");s==null?n(e.id,e.name,{error:"Directory listing returned no content"}):n(e.id,e.name,{result:String(s)})}catch(s){const o=s instanceof mc||s instanceof Error?s.message:"Failed to list files";n(e.id,e.name,{error:o})}},read_file:async(e,t,n)=>{const r=e.args.path??e.args.filePath;if(!r){n(e.id,e.name,{error:'read_file requires a "path" argument'});return}if(!t.onReadFile){n(e.id,e.name,{error:"read_file not available"});return}try{const s=await Xc(t.onReadFile(r),Qc.FILE_READ,"read_file");s==null?n(e.id,e.name,{error:"File read returned no content"}):n(e.id,e.name,{result:String(s)})}catch(s){const o=s instanceof mc||s instanceof Error?s.message:"Failed to read file";n(e.id,e.name,{error:o})}},click_element:async(e,t,n)=>{const{selector:r}=e.args;if(!t.onClickElement){n(e.id,e.name,{error:"click_element not available"});return}if(!r){n(e.id,e.name,{error:"click_element requires a selector"});return}try{const s=await Xc(t.onClickElement(r),Qc.QUICK,"click_element");n(e.id,e.name,s.success?{result:`Clicked element: ${r}`}:{error:s.error||"Failed to click element"})}catch(s){const o=s instanceof mc||s instanceof Error?s.message:"Failed to click element";n(e.id,e.name,{error:o})}},navigate:async(e,t,n)=>{const{action:r,url:s}=e.args;if(!t.onNavigate){n(e.id,e.name,{error:"navigate not available"});return}if(!r){n(e.id,e.name,{error:"navigate requires an action"});return}try{const o=await Xc(t.onNavigate(r,s),Qc.TOOL_CALL,"navigate");n(e.id,e.name,o.success?{result:`Navigation: ${r}${s?" to "+s:""}`}:{error:o.error||"Navigation failed"})}catch(o){const i=o instanceof mc||o instanceof Error?o.message:"Navigation failed";n(e.id,e.name,{error:i})}},scroll:async(e,t,n)=>{const{target:r}=e.args;if(!t.onScroll){n(e.id,e.name,{error:"scroll not available"});return}if(!r){n(e.id,e.name,{error:"scroll requires a target"});return}try{const s=await Xc(t.onScroll(r),Qc.QUICK,"scroll");n(e.id,e.name,s.success?{result:`Scrolled to: ${r}`}:{error:s.error||"Scroll failed"})}catch(s){const o=s instanceof mc||s instanceof Error?s.message:"Scroll failed";n(e.id,e.name,{error:o})}},open_item:async(e,t,n)=>{const{itemNumber:r}=e.args;if(!t.onOpenItem){n(e.id,e.name,{error:"open_item not available"});return}if(r===void 0){n(e.id,e.name,{error:"open_item requires itemNumber"});return}try{const s=await Xc(t.onOpenItem(r),Qc.FILE_READ,"open_item");n(e.id,e.name,{result:s??"Item opened"})}catch(s){const o=s instanceof mc||s instanceof Error?s.message:"Failed to open item";n(e.id,e.name,{error:o})}},open_file:async(e,t,n)=>{const{name:r,path:s}=e.args;if(!t.onOpenFile){n(e.id,e.name,{error:"open_file not available"});return}try{const o=await Xc(t.onOpenFile(r,s),Qc.FILE_READ,"open_file");n(e.id,e.name,{result:o??"File opened"})}catch(o){const i=o instanceof mc||o instanceof Error?o.message:"Failed to open file";n(e.id,e.name,{error:i})}},open_folder:async(e,t,n)=>{const{name:r,itemNumber:s}=e.args;if(!t.onOpenFolder){n(e.id,e.name,{error:"open_folder not available"});return}try{const o=await Xc(t.onOpenFolder(r,s),Qc.FILE_LIST,"open_folder");n(e.id,e.name,{result:o??"Folder opened"})}catch(o){const i=o instanceof mc||o instanceof Error?o.message:"Failed to open folder";n(e.id,e.name,{error:i})}},browser_back:(e,t,n)=>{if(!t.onBrowserBack){n(e.id,e.name,{error:"browser_back not available"});return}try{const r=t.onBrowserBack();n(e.id,e.name,{result:r??"Navigated back"})}catch(r){n(e.id,e.name,{error:r instanceof Error?r.message:"Failed to go back"})}},close_browser:(e,t,n)=>{if(!t.onCloseBrowser){n(e.id,e.name,{error:"close_browser not available"});return}try{const r=t.onCloseBrowser();n(e.id,e.name,{result:r??"Browser closed"})}catch(r){n(e.id,e.name,{error:r instanceof Error?r.message:"Failed to close browser"})}},approve_change:(e,t,n)=>{const{reason:r}=e.args;t.onApproveChange&&t.onApproveChange(r),n(e.id,e.name,{result:"Change approved"})},reject_change:(e,t,n)=>{const{reason:r}=e.args;t.onRejectChange&&t.onRejectChange(r),n(e.id,e.name,{result:"Change rejected"})},undo_change:(e,t,n)=>{const{reason:r}=e.args;t.onUndoChange&&t.onUndoChange(r),n(e.id,e.name,{result:"Change undone"})},highlight_element_by_number:async(e,t,n)=>{const{elementNumber:r,description:s}=e.args;if(!t.onHighlightByNumber){n(e.id,e.name,{error:"highlight_element_by_number not available"});return}if(r===void 0){n(e.id,e.name,{error:"highlight_element_by_number requires elementNumber"});return}try{const o=await Xc(t.onHighlightByNumber(r),Qc.QUICK,"highlight_element_by_number");if(o.success){const i=o.element?` (${o.element.tagName}${o.element.text?": "+o.element.text.substring(0,30):""})`:"";n(e.id,e.name,{result:`Element ${r} highlighted${i}${s?": "+s:""}`})}else n(e.id,e.name,{error:o.error||"Failed to highlight element"})}catch(o){const i=o instanceof mc||o instanceof Error?o.message:"Failed to highlight element";n(e.id,e.name,{error:i})}},clear_focus:async(e,t,n)=>{if(!t.onClearFocus){n(e.id,e.name,{error:"clear_focus not available"});return}try{const r=await t.onClearFocus();n(e.id,e.name,{result:"Focus cleared. Call get_page_elements() to see all elements."})}catch(r){const s=r instanceof Error?r.message:"Failed to clear focus";n(e.id,e.name,{error:s})}},set_viewport:async(e,t,n)=>{if(!t.onSetViewport){n(e.id,e.name,{error:"set_viewport not available"});return}const r=e.args.mode;if(!r||!["mobile","tablet","desktop"].includes(r)){n(e.id,e.name,{error:"Invalid mode. Use: mobile, tablet, or desktop"});return}try{await t.onSetViewport(r),n(e.id,e.name,{result:`Viewport switched to ${r} mode`})}catch(s){const o=s instanceof Error?s.message:"Failed to set viewport";n(e.id,e.name,{error:o})}},switch_tab:async(e,t,n)=>{if(!t.onSwitchTab){n(e.id,e.name,{error:"switch_tab not available"});return}const r=e.args.type;if(!r||!["browser","kanban","todos","notes"].includes(r)){n(e.id,e.name,{error:"Invalid type. Use: browser, kanban, todos, or notes"});return}try{await t.onSwitchTab(r),n(e.id,e.name,{result:`Switched to ${r} tab`})}catch(s){const o=s instanceof Error?s.message:"Failed to switch tab";n(e.id,e.name,{error:o})}}};async function nL(e,t){return new Promise(n=>{const r=(o,i,a)=>{n(a)},s=pge[e.name];if(s){const o=s(e,t,r);o instanceof Promise&&o.catch(i=>{n({error:i instanceof Error?i.message:"Unknown error in tool handler"})})}else n({error:`Unknown tool: ${e.name}`})})}async function mge(e,t,n={}){const{parallel:r=!0}=n;if(r)return await Promise.all(e.map(async o=>({id:o.id,name:o.name,response:await nL(o,t)})));{const s=[];for(const o of e)s.push({id:o.id,name:o.name,response:await nL(o,t)});return s}}const gge={name:"update_ui",description:"Update the user interface code (HTML/CSS/JS) based on the users request. Return the FULL updated HTML file content.",parameters:{type:vn.OBJECT,properties:{html:{type:vn.STRING,description:"The full HTML code for the page, including styles and scripts."}},required:["html"]}},bge={name:"select_element",description:`Select elements on the page using a CSS selector.

 PREREQUISITE: You MUST call get_page_elements() FIRST before using this tool!
Never guess selectors - always check what elements actually exist on the page.

 FORBIDDEN SYNTAX (WILL CRASH):
- :contains() - NEVER USE
- :has(text) - NEVER USE
- jQuery pseudo-selectors

 VALID CSS SELECTORS:
- Tag: 'button', 'a', 'div', 'img', 'h1', 'h2', 'section'
- Class: '.btn', '.card', '.hero-section'
- ID: '#submit-btn', '#hero'
- Attribute contains: '[href*="download"]', '[src*="screenshot"]', '[alt*="app"]'
- Attribute exact: '[data-testid="login"]'
- Combined: 'button, [role="button"]', 'img, [role="img"]'

WORKFLOW:
1. Call get_page_elements() to see what exists
2. If element count is 0  tell user it doesn't exist
3. If elements exist  use selectors from the returned data

EXAMPLES (only after confirming elements exist):
- "screenshot image"  'img[alt*="screenshot"], img[src*="screenshot"]'
- "download button"  'a[href*="download"], button[aria-label*="download"]'
- "all buttons"  'button, [role="button"], input[type="button"]'`,parameters:{type:vn.OBJECT,properties:{selector:{type:vn.STRING,description:'CSS selector WITHOUT :contains() or jQuery syntax. Use [attr*="text"] for text matching.'},reasoning:{type:vn.STRING,description:"Brief explanation of selector choice"}},required:["selector","reasoning"]}},yge={name:"get_page_elements",description:` DISCOVERY TOOL - Call this FIRST before any select_element call!

Returns counts and details of elements on the page. Use the results to:
- Know if an element type exists (count > 0)
- Get class names and attributes for accurate selectors
- Tell the user "no [X] found" if count is 0

Categories: "buttons", "links", "inputs", "images", "headings", "all"

REQUIRED WORKFLOW:
User: "select the image"  YOU: get_page_elements("images")
  - If images.count = 0  "I don't see any images on this page"
  - If images.count > 0  Use returned selectors in select_element()`,parameters:{type:vn.OBJECT,properties:{category:{type:vn.STRING,description:'Filter to specific category - "buttons", "links", "inputs", "images", "headings", or "all" (default)'}},required:[]}},vge={name:"execute_code",description:"Execute JavaScript code on the page to modify elements. Use this to make changes to the UI after the user confirms the selected element.",parameters:{type:vn.OBJECT,properties:{code:{type:vn.STRING,description:"JavaScript code to execute. Can use document.querySelector() to select elements and modify them."},description:{type:vn.STRING,description:"Brief description of what this code will do"}},required:["code","description"]}},xge={name:"confirm_selection",description:'Confirm or reject a pending element selection. Use this when the user says "yes"/"no"/"approve"/"reject" or specifies which numbered element they want.',parameters:{type:vn.OBJECT,properties:{confirmed:{type:vn.BOOLEAN,description:"true if user approved (yes/approve/do it/go ahead), false if rejected (no/reject/cancel/wrong)"},elementNumber:{type:vn.NUMBER,description:'Optional: If multiple elements were found, specify which one (1-indexed). Use when user says "the second one" (2), "number 3" (3), etc.'}},required:["confirmed"]}},wge={name:"patch_source_file",description:`SAVE changes to the actual source code file. Use this AFTER execute_code to make changes permanent.

REQUIRES: The selected element must have sourceLocation info (file path and line number).
Use this to write the modified code to disk so it persists after page reload.

IMPORTANT: Provide the FULL updated content for the portion of the file being changed.`,parameters:{type:vn.OBJECT,properties:{filePath:{type:vn.STRING,description:"The source file path to modify (from selectedElement.sourceLocation)"},searchCode:{type:vn.STRING,description:"The original code to find and replace in the file"},replaceCode:{type:vn.STRING,description:"The new code to replace it with"},description:{type:vn.STRING,description:"Brief description of the change being made"}},required:["filePath","searchCode","replaceCode","description"]}},Ege={name:"list_files",description:"List files and folders in a directory. Use this to explore the project structure.",parameters:{type:vn.OBJECT,properties:{path:{type:vn.STRING,description:'Directory path to list. Use "." for current directory, or relative/absolute path.'}},required:[]}},_ge={name:"read_file",description:"Read the contents of a file. Use this to see the current code before making changes.",parameters:{type:vn.OBJECT,properties:{path:{type:vn.STRING,description:"Absolute or relative path to the file to read"},filePath:{type:vn.STRING,description:'(Deprecated) Legacy alias for path; prefer using "path"'}},required:[]}},Sge={name:"click_element",description:"Click on an element (link, button, etc.) to navigate or trigger an action.",parameters:{type:vn.OBJECT,properties:{selector:{type:vn.STRING,description:"CSS selector for the element to click. Use valid CSS only (no :contains)."}},required:["selector"]}},Tge={name:"navigate",description:"Navigate the browser - go back, forward, reload, or to a specific URL.",parameters:{type:vn.OBJECT,properties:{action:{type:vn.STRING,description:'Action to take: "back", "forward", "reload", or "goto"'},url:{type:vn.STRING,description:'URL to navigate to (only needed if action is "goto")'}},required:["action"]}},Cge={name:"scroll",description:"Scroll the page - to top, bottom, or to a specific element.",parameters:{type:vn.OBJECT,properties:{target:{type:vn.STRING,description:'"top", "bottom", or a CSS selector to scroll to'}},required:["target"]}},kge={name:"open_item",description:"Open an item from the file browser overlay by its number. Use after list_files shows the file browser.",parameters:{type:vn.OBJECT,properties:{itemNumber:{type:vn.NUMBER,description:"The number of the item to open (1-indexed)"}},required:["itemNumber"]}},Age={name:"browser_back",description:"Go back to the previous panel in the file browser, or close it if at the root.",parameters:{type:vn.OBJECT,properties:{},required:[]}},Nge={name:"close_browser",description:'Close the file browser overlay completely. Use when user says "close that", "clear", "enough", "dismiss", etc.',parameters:{type:vn.OBJECT,properties:{},required:[]}},Ige={name:"open_file",description:`Open a file in the file browser by name or path.

USE THIS WHEN:
- User says "open LandingPage.tsx"  open_file({ name: "LandingPage.tsx" })
- User says "show me the App component"  open_file({ name: "App.tsx" })
- User says "open package.json"  open_file({ name: "package.json" })
- User says "open that file" (after mentioning a file)  open_file({ name: "filename.tsx" })

You can provide either:
- name: Just the filename - will search in the current file browser directory
- path: Full or relative path to the file

The file will open in the file browser overlay for viewing.`,parameters:{type:vn.OBJECT,properties:{name:{type:vn.STRING,description:'The filename to open (e.g., "LandingPage.tsx", "package.json")'},path:{type:vn.STRING,description:"Optional: Full path to the file if known"}},required:[]}},Rge={name:"open_folder",description:`Open a folder in the file browser by name or number.

USE THIS WHEN:
- User says "open the public folder"  open_folder({ name: "public" })
- User says "open number 3" or "open 3"  open_folder({ itemNumber: 3 })
- User says "go into src"  open_folder({ name: "src" })
- User says "check the hooks folder"  open_folder({ name: "hooks" })

You can use EITHER name OR itemNumber, not both. The itemNumber refers to the numbered items shown in the file browser overlay.`,parameters:{type:vn.OBJECT,properties:{name:{type:vn.STRING,description:'The folder name to open (e.g., "public", "src", "hooks")'},itemNumber:{type:vn.NUMBER,description:"The number of the folder in the file browser (1-indexed)"}},required:[]}},Mge={name:"approve_change",description:`Approve a pending change when the user gives voice approval.

Use this when the user says "yes", "accept", "approve", "do it", "go ahead", or similar approval commands.
This confirms that the user wants to apply the proposed change.`,parameters:{type:vn.OBJECT,properties:{reason:{type:vn.STRING,description:"Brief explanation of what was approved (for confirmation message)"}},required:[]}},Oge={name:"reject_change",description:`Reject a pending change when the user gives voice rejection.

Use this when the user says "no", "reject", "cancel", "undo", "wrong", or similar rejection commands.
This confirms that the user does not want to apply the proposed change.`,parameters:{type:vn.OBJECT,properties:{reason:{type:vn.STRING,description:"Brief explanation of why the change was rejected"}},required:[]}},Dge={name:"undo_change",description:`Undo the last applied change when the user requests it via voice.

Use this when the user says "undo that", "undo the last change", "revert", "go back", or similar undo commands.
This reverts the application to the state before the last change was applied.`,parameters:{type:vn.OBJECT,properties:{reason:{type:vn.STRING,description:"Reason for undoing (for confirmation message)"}},required:[]}},Pge={name:"highlight_element_by_number",description:`Highlight an element AND SET IT AS FOCUS for hierarchical navigation.

Elements on the page are numbered with visible badges (1, 2, 3, etc).
This is the PREFERRED way to highlight elements - no CSS selector errors!

 HIERARCHICAL FOCUSING:
When you highlight an element, it becomes the FOCUS. Subsequent get_page_elements
calls will ONLY show elements WITHIN the focused element. This lets users
drill down: "middle section"  "left side"  "that button"

WORKFLOW:
1. get_page_elements() - shows all page elements numbered
2. User: "the middle section"  highlight_element_by_number(N) for that section
3. get_page_elements() - now ONLY shows elements INSIDE the section
4. User: "the button on the left"  highlight_element_by_number(M)
5. User: "clear focus"  call clear_focus() to see all elements again

WHEN TO USE:
- "highlight 3" or "number 3"  highlight_element_by_number(3)
- "that section" / "the header"  highlight it to set focus
- User points to a region  set it as focus for drilling down`,parameters:{type:vn.OBJECT,properties:{elementNumber:{type:vn.NUMBER,description:"The 1-indexed element number to highlight (from the numbered badges on the page)"},description:{type:vn.STRING,description:"Brief description of what element you are highlighting (for user confirmation)"}},required:["elementNumber"]}},Lge={name:"clear_focus",description:`Clear the current focus scope and show ALL page elements again.

Use this when the user wants to "zoom out" or see the full page elements again after
drilling down into a specific section.

TRIGGERS:
- "clear focus" / "zoom out" / "show all" / "reset" / "go back to all"
- "start over" / "full page" / "everything"

After clearing focus, call get_page_elements() to re-number all elements on the page.`,parameters:{type:vn.OBJECT,properties:{},required:[]}},$ge={name:"set_viewport",description:`Switch the viewport/device preview mode in Cluso.

MODES:
- 'mobile' - Phone view (375px wide)
- 'tablet' - Tablet view (768px wide)
- 'desktop' - Full width desktop view

TRIGGERS:
- "switch to mobile" / "show mobile view" / "phone view"
- "switch to tablet" / "tablet view" / "iPad view"
- "switch to desktop" / "desktop view" / "full width"
- "how does it look on mobile?"`,parameters:{type:vn.OBJECT,properties:{mode:{type:vn.STRING,description:"Viewport mode: mobile, tablet, or desktop"}},required:["mode"]}},Fge={name:"switch_tab",description:`Switch to or create a different tab type in Cluso.

TAB TYPES:
- 'browser' - Web browser tab for viewing/editing websites
- 'kanban' - Kanban board for project management
- 'todos' - Todo list for task tracking
- 'notes' - Notes tab for documentation

TRIGGERS:
- "open kanban" / "show kanban board" / "project board"
- "open todos" / "show my tasks" / "task list"
- "open notes" / "show notes"
- "go to browser" / "back to website"`,parameters:{type:vn.OBJECT,properties:{type:{type:vn.STRING,description:"Tab type: browser, kanban, todos, or notes"}},required:["type"]}};function Bge({videoRef:e,canvasRef:t,onCodeUpdate:n,onElementSelect:r,onExecuteCode:s,onConfirmSelection:o,onGetPageElements:i,onPatchSourceFile:a,onListFiles:l,onReadFile:c,onClickElement:u,onNavigate:f,onScroll:m,onOpenItem:g,onOpenFile:y,onOpenFolder:v,onBrowserBack:x,onCloseBrowser:E,onApproveChange:T,onRejectChange:k,onUndoChange:I,onHighlightByNumber:O,onClearFocus:M,onSetViewport:P,onSwitchTab:j,selectedElement:V,projectFolder:U,currentUrl:z,googleApiKey:H,selectedModelId:F}){const[G,X]=w.useState({isConnected:!1,isStreaming:!1,error:null}),[J,ee]=w.useState(0),re=w.useRef(null),ie=w.useRef(null),Z=w.useCallback(xt=>{var pe;(pe=re.current)==null||pe.then(xt).catch(Ne=>{Yr.liveGemini.error("Session error:",Ne)})},[]),te=w.useRef(null),oe=w.useRef(null),Q=w.useRef(0),Te=w.useRef(new Set),ge=w.useRef(null),Ce=w.useRef(null),fe=w.useRef(null),Fe=w.useRef(0),De=w.useRef(null),Re=5,tt=1e3,de=w.useRef(null),nt=w.useCallback((xt=!1)=>{De.current&&(clearTimeout(De.current),De.current=null),xt&&(Fe.current=Re),fe.current&&(clearInterval(fe.current),fe.current=null),ge.current&&(ge.current.disconnect(),ge.current=null),Ce.current&&(Ce.current.getTracks().forEach($e=>$e.stop()),Ce.current=null);const pe=Array.from(Te.current);Te.current.clear(),pe.forEach($e=>{try{$e.stop()}catch{}}),te.current&&(te.current.close(),te.current=null),oe.current&&(oe.current.close(),oe.current=null);const Ne=re.current;re.current=null,Ne&&Ne.then($e=>$e.close()).catch($e=>{console.error("[useLiveGemini] Error closing session:",$e)}),X($e=>({...$e,isConnected:!1,isStreaming:!1})),ee(0)},[]),ot=w.useCallback(async()=>{try{X({isConnected:!1,isStreaming:!0,error:null});const xt=H||"AIzaSyAuAGR2YNrczzJKRcqVr924j71lRqc02IU";ie.current=new fR({apiKey:xt});const pe=window.AudioContext||window.webkitAudioContext;if(!pe)throw new Error("AudioContext not supported");te.current=new pe({sampleRate:16e3}),oe.current=new pe({sampleRate:24e3}),de.current=oe.current.createAnalyser(),de.current.fftSize=256;const Ne=await navigator.mediaDevices.getUserMedia({audio:!0});Ce.current=Ne;const Je=`${F&&F.startsWith("gemini-")?F:"gemini-2.5-flash"}-native-audio-preview-09-2025`,Le=ie.current.live.connect({model:Je,config:{responseModalities:[$1.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Zephyr"}}},tools:[{functionDeclarations:[gge,bge,vge,xge,yge,wge,Ege,_ge,Sge,Tge,Cge,kge,Ige,Rge,Age,Nge,Mge,Oge,Dge,Pge,Lge,$ge,Fge]}],systemInstruction:`You are a specialized AI UI Engineer with voice control, file browsing, element selection, and browser navigation.

          You can see the user's screen or video feed if enabled.
          You can hear the user's voice commands.

          CAPABILITIES:
           FILE BROWSER: Browse files with numbered overlay, navigate folders, view files/images
           PAGE INSPECTION: Get page elements, highlight by number, execute code
           NAVIGATION: Click links, go back/forward, scroll, navigate to URLs
           EDITING: Preview changes with execute_code, save with patch_source_file

           ELEMENT HIGHLIGHTING - USE NUMBERS, NOT CSS SELECTORS!
          Elements on the page are numbered (1, 2, 3...). Use highlight_element_by_number() to highlight them.
          This is MORE RELIABLE than CSS selectors and never causes errors.

           HIERARCHICAL FOCUSING - DRILL DOWN INTO SECTIONS:
          When you highlight an element, it becomes the FOCUS. Subsequent get_page_elements
          calls will ONLY show elements WITHIN the focused element. This lets users drill down:

          Example conversation:
          User: "show me the page"  get_page_elements()
          You: "I see 20 elements. The header is #1, main section #5, footer #12"
          User: "that middle section"  highlight_element_by_number(5) - SETS FOCUS
          You: "Now focused on the main section"
          User: "what's in there?"  get_page_elements() - now shows ONLY elements inside #5
          You: "Within the main section: 3 buttons (#1, #2, #3)"
          User: "the left one"  highlight_element_by_number(1)
          User: "zoom out"  clear_focus() then get_page_elements() - shows all again

          WORKFLOW:
          1. get_page_elements() - shows all page elements numbered
          2. User picks a section  highlight_element_by_number(N) - sets focus to that section
          3. get_page_elements() - now ONLY shows children of focused section
          4. User: "clear focus" / "zoom out"  clear_focus() to see full page again

          NUMBER-BASED COMMANDS:
          - "highlight 3" / "number 3"  highlight_element_by_number(3)
          - "that section" / "the header"  highlight to set focus
          - "clear focus" / "zoom out" / "show all"  clear_focus()
          - "show me the buttons"  get_page_elements('buttons')

           IMPORTANT: highlight_element_by_number sets FOCUS for drilling down.
          Use execute_code or update_ui for actual code changes.

          FILE BROWSER OVERLAY:
          When user asks to see files ("show files", "list files", "check the public folder"), use list_files.
          This shows a numbered overlay. User can then say "open 3" to navigate.

          FILE BROWSER COMMANDS:
          - "show me the files" / "list files"  list_files()
          - "check the public folder"  list_files("public")
          - "open 3" / "open three" / "number 3"  open_item(3) OR open_folder({ itemNumber: 3 })
          - "open the src folder" / "go into hooks"  open_folder({ name: "src" })
          - "open LandingPage.tsx" / "show me App.tsx"  open_file({ name: "LandingPage.tsx" })
          - "go back" (in file browser)  browser_back()
          - "close that" / "clear" / "enough" / "dismiss"  close_browser()

          FILE TOOLS:
          - open_file: Open a specific file by name - searches in current directory
          - open_folder: For folders specifically - can use name OR number
          - open_item: For any item by number (files or folders)

          CLOSING CONTEXT:
          When user says "close that", "clear that", "enough of that", "dismiss":
          - If file browser is showing  close_browser()
          - If element is selected  confirm_selection(false)
          - Otherwise  acknowledge and do nothing

          ${V?`SELECTED ELEMENT: ${V.tagName} "${V.text||""}"`:""}

          VOICE APPROVAL COMMANDS:
          When user says these voice commands, use the approval tools:
          - "yes", "accept", "approve", "do it", "go ahead"  approve_change()
          - "no", "reject", "cancel", "nope", "wrong"  reject_change()
          - "undo that", "undo the last change", "revert", "go back"  undo_change()

          VOICE COMMANDS SUMMARY:
          HIGHLIGHTING: "highlight 3", "show me the buttons", "number 2"
          FILE BROWSER: "show files", "open 3", "go back", "close that"
          PAGE: "click that", "scroll down"
          APPROVAL: "yes"/"approve", "no"/"reject", "undo that"

           INSTANT DOM EDITS - CRITICAL:
          When user requests UI changes ("flip it back", "change the color", "move that button", etc):
          - IMMEDIATELY call update_ui with the modified HTML
          - Do NOT read source files first - you can infer changes from the current DOM
          - Do NOT explain or describe what you're doing
          - Do NOT use tools like read_file, get_page_elements, or list_files
          - Apply the change silently and instantly
          - Only respond AFTER the DOM update is complete

          Be silent on instant edits. Concise on other tasks.`},callbacks:{onopen:()=>{if(tL("Connection Opened"),Fe.current=0,X(Y=>({...Y,isConnected:!0})),!te.current)return;const Ve=te.current.createMediaStreamSource(Ne),_e=te.current.createScriptProcessor(4096,1,1);_e.onaudioprocess=Y=>{const L=Y.inputBuffer.getChannelData(0),B=cge(L);Z(ce=>{ce.sendRealtimeInput({media:B})})},Ve.connect(_e),_e.connect(te.current.destination),ge.current=_e},onmessage:async Ve=>{var Y,L,B,ce,we,ze;if(Ve.toolCall){Yr.liveGemini.log("Tool call received",Ve.toolCall);const Be=Ve.toolCall.functionCalls;if(Be&&Be.length>0){const ut={onCodeUpdate:n,onElementSelect:r,onExecuteCode:s,onConfirmSelection:o,onGetPageElements:i,onPatchSourceFile:a,onListFiles:l,onReadFile:c,onClickElement:u,onNavigate:f,onScroll:m,onOpenItem:g,onOpenFile:y,onOpenFolder:v,onBrowserBack:x,onCloseBrowser:E,onApproveChange:T,onRejectChange:k,onUndoChange:I,onHighlightByNumber:O},an=Be.map(zt=>({id:zt.id,name:zt.name,args:zt.args||{}}));try{Yr.liveGemini.log(`Executing ${an.length} tool call(s) in parallel...`);const zt=await mge(an,ut,{parallel:!0});Yr.liveGemini.log("Tool execution complete:",zt.map(dn=>`${dn.name}: ${dn.response.error||"success"}`)),Z(dn=>{dn.sendToolResponse({functionResponses:zt.map(on=>({id:on.id,name:on.name,response:on.response}))})})}catch(zt){Yr.liveGemini.error("Tool execution batch failed:",zt),Z(dn=>{dn.sendToolResponse({functionResponses:an.map(on=>({id:on.id,name:on.name,response:{error:zt instanceof Error?zt.message:"Unknown error"}}))})})}}}const _e=(we=(ce=(B=(L=(Y=Ve.serverContent)==null?void 0:Y.modelTurn)==null?void 0:L.parts)==null?void 0:B[0])==null?void 0:ce.inlineData)==null?void 0:we.data;if(_e&&oe.current){const Be=oe.current,ut=uge(_e),an=await Rq(ut,Be,24e3),zt=Be.currentTime;Q.current=Math.max(Q.current,zt);const dn=Be.createBufferSource();dn.buffer=an,de.current?(dn.connect(de.current),de.current.connect(Be.destination)):dn.connect(Be.destination),dn.start(Q.current),Q.current+=an.duration,dn.onended=()=>{Te.current.delete(dn)},Te.current.add(dn)}(ze=Ve.serverContent)!=null&&ze.interrupted&&(Te.current.forEach(Be=>Be.stop()),Te.current.clear(),Q.current=0)},onclose:()=>{tL("Connection Closed - Auto-reconnecting"),Yr.liveGemini.log("Stream closed, auto-reconnecting to maintain persistent connection..."),Fe.current=0,ot().catch(Ve=>{Yr.liveGemini.error("Auto-reconnect failed:",Ve),X(_e=>({..._e,error:"Auto-reconnect failed. Click connect to try again."}))})},onerror:Ve=>{if(Yr.liveGemini.error("Connection Error",Ve),Fe.current<Re){const _e=tt*Math.pow(2,Fe.current);Yr.liveGemini.log(`Error reconnect attempt ${Fe.current+1}/${Re} in ${_e}ms`),Fe.current++,De.current=window.setTimeout(()=>{Yr.liveGemini.log("Attempting reconnect after error..."),ot().catch(Y=>{Yr.liveGemini.error("Error reconnect failed:",Y)})},_e)}else Yr.liveGemini.log("Max reconnect attempts reached after error"),X(_e=>({..._e,error:"Connection failed. Please try again."})),nt()}}});re.current=Le}catch(xt){Yr.liveGemini.error(xt),X(pe=>({...pe,error:xt instanceof Error?xt.message:"Failed to connect"})),nt()}},[nt,n,r,s,o,T,k,I,V,H,F]),Ut=w.useCallback(()=>{if(fe.current)return;const xt=1;fe.current=window.setInterval(async()=>{if(!e.current||!t.current||!re.current)return;const pe=e.current,Ne=t.current,$e=Ne.getContext("2d");if(!$e||pe.readyState<2)return;const Je=640/pe.videoWidth,Le=640,Ve=pe.videoHeight*Je;Ne.width=Le,Ne.height=Ve,$e.drawImage(pe,0,0,Le,Ve);const _e=Ne.toDataURL("image/jpeg",.5).split(",")[1];re.current.then(Y=>{Y.sendRealtimeInput({media:{mimeType:"image/jpeg",data:_e}})})},1e3/xt)},[e,t]),Vt=w.useCallback(()=>{fe.current&&(clearInterval(fe.current),fe.current=null)},[]);w.useEffect(()=>{if(!G.isConnected)return;const xt=setInterval(()=>{if(de.current){const pe=new Uint8Array(de.current.frequencyBinCount);de.current.getByteFrequencyData(pe);let Ne=0;for(let Je=0;Je<pe.length;Je++)Ne+=pe[Je];const $e=Ne/pe.length;ee($e)}},50);return()=>clearInterval(xt)},[G.isConnected]);const Dt=w.useCallback(()=>{const xt=Array.from(Te.current);Te.current.clear(),xt.forEach(pe=>{try{pe.stop()}catch{}}),Q.current=0},[]),en=w.useCallback(()=>{nt(!0)},[nt]);return{streamState:G,connect:ot,disconnect:en,startVideoStreaming:Ut,stopVideoStreaming:Vt,stopSpeaking:Dt,volume:J}}function zge(){var m;const[e,t]=w.useState({currentBranch:"main",branches:[],hasChanges:!1,changedFiles:[],isLoading:!0,error:null}),n=typeof window<"u"&&((m=window.electronAPI)==null?void 0:m.git),r=w.useCallback(async()=>{var y;if(!n||!((y=window.electronAPI)!=null&&y.git)){t(v=>({...v,isLoading:!1}));return}const g=window.electronAPI.git;try{const[v,x,E]=await Promise.all([g.getCurrentBranch(),g.getBranches(),g.getStatus()]);t(T=>({...T,currentBranch:v.success&&v.data?v.data:T.currentBranch,branches:x.success&&x.data?x.data:T.branches,hasChanges:E.success&&E.data?E.data.hasChanges:!1,changedFiles:E.success&&E.data?E.data.files:[],isLoading:!1,error:null}))}catch(v){t(x=>({...x,isLoading:!1,error:v instanceof Error?v.message:"Git error"}))}},[n]);w.useEffect(()=>{r();const g=setInterval(r,5e3);return()=>clearInterval(g)},[r]);const s=w.useCallback(async g=>{var x;const y=(x=window.electronAPI)==null?void 0:x.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.checkout(g);return v.success&&await r(),v},[n,r]),o=w.useCallback(async g=>{var x;const y=(x=window.electronAPI)==null?void 0:x.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.createBranch(g);return v.success&&await r(),v},[n,r]),i=w.useCallback(async g=>{var x;const y=(x=window.electronAPI)==null?void 0:x.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.commit(g);return v.success&&await r(),v},[n,r]),a=w.useCallback(async()=>{var y;const g=(y=window.electronAPI)==null?void 0:y.git;return!n||!g?{success:!1,error:"Not in Electron"}:await g.push()},[n]),l=w.useCallback(async()=>{var v;const g=(v=window.electronAPI)==null?void 0:v.git;if(!n||!g)return{success:!1,error:"Not in Electron"};const y=await g.pull();return y.success&&await r(),y},[n,r]),c=w.useCallback(async()=>{var v;const g=(v=window.electronAPI)==null?void 0:v.git;if(!n||!g)return{success:!1,error:"Not in Electron"};const y=await g.stash();return y.success&&await r(),y},[n,r]),u=w.useCallback(async g=>{var x;const y=(x=window.electronAPI)==null?void 0:x.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.stashWithMessage(g);return v.success&&await r(),v},[n,r]),f=w.useCallback(async()=>{var v;const g=(v=window.electronAPI)==null?void 0:v.git;if(!n||!g)return{success:!1,error:"Not in Electron"};const y=await g.stashPop();return y.success&&await r(),y},[n,r]);return{...e,isElectron:n,refresh:r,checkout:s,createBranch:o,commit:i,push:a,pull:l,stash:c,stashWithMessage:u,stashPop:f}}const jge="system-default",mN=[{id:"system-default",name:"System Default",description:"Use system light/dark mode preferences"},{id:"tokyo-night",name:"Tokyo Night",description:"A dark theme inspired by Tokyo",colors:{background:"#1a1b26",foreground:"#c0caf5",primary:"#7aa2f7",secondary:"#bb9af7",accent:"#7dcfff",border:"#3b3f5c",success:"#9ece6a",error:"#f7768e",warning:"#e0af68",info:"#7aa2f7"}},{id:"dracula",name:"Dracula",description:"A dark theme with vibrant colors",colors:{background:"#282a36",foreground:"#f8f8f2",primary:"#bd93f9",secondary:"#ff79c6",accent:"#8be9fd",border:"#44475a",success:"#50fa7b",error:"#ff5555",warning:"#f1fa8c",info:"#8be9fd"}},{id:"nord",name:"Nord",description:"An arctic, north-bluish color palette",colors:{background:"#2e3440",foreground:"#d8dee9",primary:"#81a1c1",secondary:"#b48ead",accent:"#88c0d0",border:"#3b4252",success:"#a3be8c",error:"#bf616a",warning:"#ebcb8b",info:"#81a1c1"}},{id:"gruvbox-dark",name:"Gruvbox Dark",description:"Retro groove color scheme",colors:{background:"#282828",foreground:"#ebdbb2",primary:"#458588",secondary:"#b16286",accent:"#689d6a",border:"#3c3836",success:"#98971a",error:"#cc241d",warning:"#d79921",info:"#458588"}},{id:"one-dark",name:"One Dark",description:"Atom One Dark theme",colors:{background:"#282c34",foreground:"#abb2bf",primary:"#61afef",secondary:"#c678dd",accent:"#56b6c2",border:"#3e4451",success:"#98c379",error:"#e06c75",warning:"#e5c07b",info:"#61afef"}},{id:"catppuccin-mocha",name:"Catppuccin Mocha",description:"Soothing pastel theme",colors:{background:"#1e1e2e",foreground:"#cdd6f4",primary:"#89b4fa",secondary:"#f5c2e7",accent:"#94e2d5",border:"#313244",success:"#a6e3a1",error:"#f38ba8",warning:"#f9e2af",info:"#89b4fa"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision colors for machines and people",colors:{background:"#002b36",foreground:"#839496",primary:"#268bd2",secondary:"#d33682",accent:"#2aa198",border:"#073642",success:"#859900",error:"#dc322f",warning:"#b58900",info:"#268bd2"}},{id:"monokai-pro",name:"Monokai Pro",description:"Professional monochrome-inspired theme",colors:{background:"#2d2a2e",foreground:"#fcfcfa",primary:"#fc9867",secondary:"#ab9df2",accent:"#78dce8",border:"#403e41",success:"#a9dc76",error:"#ff6188",warning:"#ffd866",info:"#fc9867"}},{id:"github-dark",name:"GitHub Dark",description:"GitHub dark mode theme",colors:{background:"#0d1117",foreground:"#c9d1d9",primary:"#58a6ff",secondary:"#bc8cff",accent:"#39c5cf",border:"#30363d",success:"#3fb950",error:"#f85149",warning:"#d29922",info:"#58a6ff"}},{id:"synthwave-84",name:"Synthwave '84",description:"Neon retro future theme",colors:{background:"#262335",foreground:"#ffffff",primary:"#03edf9",secondary:"#ff7edb",accent:"#03edf9",border:"#614d85",success:"#72f1b8",error:"#fe4450",warning:"#fede5d",info:"#03edf9"}},{id:"everforest-dark",name:"Everforest Dark",description:"Comfortable green-based color palette",colors:{background:"#2b3339",foreground:"#d4be98",primary:"#7fbbb3",secondary:"#d699b6",accent:"#83c092",border:"#374145",success:"#83c092",error:"#e68183",warning:"#dbc77d",info:"#7fbbb3"}},{id:"rose-pine-moon",name:"Rose Pine Moon",description:"All natural pine, faux fur and a bit of soho vibes",colors:{background:"#232136",foreground:"#e0def4",primary:"#9ccfd8",secondary:"#f5bde6",accent:"#ebbcba",border:"#393552",success:"#90c695",error:"#eb6f92",warning:"#f6c177",info:"#9ccfd8"}},{id:"solarized-light",name:"Solarized Light",description:"Precision colors - light variant",colors:{background:"#fdf6e3",foreground:"#657b83",primary:"#268bd2",secondary:"#d33682",accent:"#2aa198",border:"#eee8d5",success:"#859900",error:"#dc322f",warning:"#b58900",info:"#268bd2"}},{id:"github-light",name:"GitHub Light",description:"GitHub light mode theme",colors:{background:"#ffffff",foreground:"#24292f",primary:"#0969da",secondary:"#8250df",accent:"#1b7c83",border:"#d0d7de",success:"#1a7f37",error:"#cf222e",warning:"#9a6700",info:"#0969da"}},{id:"one-light",name:"One Light",description:"Atom One Light theme",colors:{background:"#fafafa",foreground:"#383a42",primary:"#4078f2",secondary:"#a626a4",accent:"#0184bc",border:"#e5e5e6",success:"#50a14f",error:"#e45649",warning:"#c18401",info:"#4078f2"}},{id:"catppuccin-latte",name:"Catppuccin Latte",description:"Soothing pastel theme - light variant",colors:{background:"#eff1f5",foreground:"#4c4f69",primary:"#1e66f5",secondary:"#ea76cb",accent:"#179299",border:"#ccd0da",success:"#40a02b",error:"#d20f39",warning:"#df8e1d",info:"#1e66f5"}},{id:"rose-pine-dawn",name:"Rose Pine Dawn",description:"All natural pine - light variant",colors:{background:"#faf4ed",foreground:"#575279",primary:"#56949f",secondary:"#d7827e",accent:"#907aa9",border:"#f2e9e1",success:"#286983",error:"#b4637a",warning:"#ea9d34",info:"#56949f"}},{id:"nord-light",name:"Nord Light",description:"Arctic color palette - light variant",colors:{background:"#eceff4",foreground:"#2e3440",primary:"#5e81ac",secondary:"#b48ead",accent:"#88c0d0",border:"#d8dee9",success:"#a3be8c",error:"#bf616a",warning:"#ebcb8b",info:"#5e81ac"}},{id:"gruvbox-light",name:"Gruvbox Light",description:"Retro groove - light variant",colors:{background:"#fbf1c7",foreground:"#3c3836",primary:"#458588",secondary:"#b16286",accent:"#689d6a",border:"#ebdbb2",success:"#98971a",error:"#cc241d",warning:"#d79921",info:"#458588"}}];function rL(e){return mN.find(t=>t.id===e)||mN[0]}function r2(e){const t=document.documentElement,n=t.classList.contains("dark")||document.body.classList.contains("dark")||document.querySelector(".dark")!==null;if(e.id==="system-default"){t.removeAttribute("data-theme"),n?(t.style.setProperty("--color-background","#171717"),t.style.setProperty("--color-foreground","#f5f5f5"),t.style.setProperty("--color-primary","#3b82f6"),t.style.setProperty("--color-secondary","#8b5cf6"),t.style.setProperty("--color-accent","#06b6d4"),t.style.setProperty("--color-border","#404040"),t.style.setProperty("--color-success","#22c55e"),t.style.setProperty("--color-error","#ef4444"),t.style.setProperty("--color-warning","#f59e0b"),t.style.setProperty("--color-info","#3b82f6"),t.style.setProperty("--color-panel","#262626"),t.style.setProperty("--color-muted","#a3a3a3"),t.style.setProperty("--color-on-primary","#ffffff"),t.style.setProperty("--color-on-secondary","#ffffff"),t.style.setProperty("--color-on-accent","#000000"),t.style.setProperty("--color-on-success","#000000"),t.style.setProperty("--color-on-error","#ffffff"),t.style.setProperty("--color-on-warning","#000000")):(t.style.setProperty("--color-background","#d6d3d1"),t.style.setProperty("--color-foreground","#171717"),t.style.setProperty("--color-primary","#2563eb"),t.style.setProperty("--color-secondary","#7c3aed"),t.style.setProperty("--color-accent","#0891b2"),t.style.setProperty("--color-border","#e7e5e4"),t.style.setProperty("--color-success","#16a34a"),t.style.setProperty("--color-error","#dc2626"),t.style.setProperty("--color-warning","#d97706"),t.style.setProperty("--color-info","#2563eb"),t.style.setProperty("--color-panel","#ffffff"),t.style.setProperty("--color-muted","#78716c"),t.style.setProperty("--color-on-primary","#ffffff"),t.style.setProperty("--color-on-secondary","#ffffff"),t.style.setProperty("--color-on-accent","#ffffff"),t.style.setProperty("--color-on-success","#ffffff"),t.style.setProperty("--color-on-error","#ffffff"),t.style.setProperty("--color-on-warning","#000000"));return}const{colors:r}=e;if(!r){t.removeAttribute("data-theme");return}t.style.setProperty("--color-background",r.background),t.style.setProperty("--color-foreground",r.foreground),t.style.setProperty("--color-primary",r.primary),t.style.setProperty("--color-secondary",r.secondary),t.style.setProperty("--color-accent",r.accent),t.style.setProperty("--color-border",r.border),t.style.setProperty("--color-success",r.success),t.style.setProperty("--color-error",r.error),t.style.setProperty("--color-warning",r.warning),t.style.setProperty("--color-info",r.info);const o=Mq(r.background)<.5;o?t.style.setProperty("--color-panel",A3(r.background,25)):t.style.setProperty("--color-panel",A3(r.background,3)),t.style.setProperty("--color-muted",A3(r.foreground,o?-30:30)),t.style.setProperty("--color-on-primary",Bg(r.primary)),t.style.setProperty("--color-on-secondary",Bg(r.secondary)),t.style.setProperty("--color-on-accent",Bg(r.accent)),t.style.setProperty("--color-on-success",Bg(r.success)),t.style.setProperty("--color-on-error",Bg(r.error)),t.style.setProperty("--color-on-warning",Bg(r.warning)),t.setAttribute("data-theme",e.id)}function Mq(e){e=e.replace(/^#/,"");const t=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,r=parseInt(e.substring(4,6),16)/255;return .299*t+.587*n+.114*r}function A3(e,t){e=e.replace(/^#/,"");let n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return n=Math.min(255,Math.max(0,Math.round(n+n*t/100))),r=Math.min(255,Math.max(0,Math.round(r+r*t/100))),s=Math.min(255,Math.max(0,Math.round(s+s*t/100))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}function Bg(e){return Mq(e)<.5?"#ffffff":"#1a1a1a"}const Oq=w.createContext(void 0);function Uge({children:e}){const[t,n]=w.useState(()=>{const o=localStorage.getItem("app-theme-id");return rL(o||jge)}),r=w.useCallback(o=>{console.log("[Theme] Setting theme:",o);const i=rL(o);console.log("[Theme] Theme object:",i),n(i),localStorage.setItem("app-theme-id",o),r2(i),console.log("[Theme] Applied. Root style:",document.documentElement.style.cssText)},[]),s=w.useCallback(()=>{r2(t)},[t]);return w.useEffect(()=>{r2(t)},[t]),w.useEffect(()=>{const o=new MutationObserver(i=>{for(const a of i)a.attributeName==="class"&&r2(t)});return o.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>o.disconnect()},[t]),h.jsx(Oq.Provider,{value:{currentTheme:t,setTheme:r,themes:mN,reapplyTheme:s},children:e})}function hR(){const e=w.useContext(Oq);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}const Hge={browser:"Cluso",kanban:"Kanban",todos:"Todos",notes:"Notes"};let sL=0;function Fy(e,t="browser"){const n={id:e||`tab-${Date.now()}-${++sL}`,title:Hge[t],url:"",favicon:void 0,type:t,canGoBack:!1,canGoForward:!1,isLoading:!1,isWebviewReady:!1,messages:[],selectedElement:null,screenshotElement:null,capturedScreenshot:null,logs:[],pendingChange:null,aiSelectedElement:null};if(t==="kanban"){const r=`kanban-${Date.now()}-${sL}`;return{...n,title:"New Board",kanbanData:{boardId:r,boardTitle:"New Board",columns:[{id:"backlog",title:"Backlog",cards:[]},{id:"todo",title:"To Do",cards:[]},{id:"in-progress",title:"In Progress",cards:[]},{id:"done",title:"Done",cards:[]}]}}}return t==="todos"?{...n,todosData:{items:[]}}:t==="notes"?{...n,notesData:{content:""}}:n}/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vge=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qge=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),oL=e=>{const t=qge(e);return t.charAt(0).toUpperCase()+t.slice(1)},Dq=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Gge=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yge=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:i,...a},l)=>w.createElement("svg",{ref:l,...Wge,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Dq("lucide",s),...!o&&!Gge(a)&&{"aria-hidden":"true"},...a},[...i.map(([c,u])=>w.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(e,t)=>{const n=w.forwardRef(({className:r,...s},o)=>w.createElement(Yge,{ref:o,iconNode:t,className:Dq(`lucide-${Vge(oL(e))}`,`lucide-${e}`,r),...s}));return n.displayName=oL(e),n};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kge=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Zge=St("archive",Kge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jge=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],iL=St("arrow-down",Jge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xge=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],N3=St("arrow-up",Xge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qge=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],aL=St("bell",Qge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1e=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],lL=St("book-open",e1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1e=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],cL=St("bot",t1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1e=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],f1=St("brain",n1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1e=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],uL=St("bug",r1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],F1=St("calendar",s1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1e=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],dL=St("camera",o1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1e=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],fL=St("chart-no-axes-column",i1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ts=St("check",a1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Df=St("chevron-down",l1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],w1=St("chevron-left",c1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Cf=St("chevron-right",u1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1e=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Pq=St("chevron-up",d1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],w0=St("circle-alert",f1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ad=St("circle-check-big",h1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],m1e=St("circle-check",p1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Lq=St("circle-plus",g1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gN=St("circle-question-mark",b1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bN=St("circle-x",y1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yN=St("circle",v1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pR=St("clock",x1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1e=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],By=St("code-xml",w1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],$q=St("columns-3",E1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1e=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Fq=St("copy",_1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1e=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Bq=St("cpu",S1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1e=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],C1e=St("database",T1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],X_=St("download",k1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],zq=St("eye-off",A1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mR=St("eye",N1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1e=[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]],R1e=St("file-code-corner",I1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],hL=St("file-code",M1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1e=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],D1e=St("file-pen",O1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],vN=St("file-plus",P1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gR=St("file-text",L1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],ix=St("file",$1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1e=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],B1e=St("flame",F1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1e=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],j1e=St("folder-open",z1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1e=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],H1e=St("folder-search",U1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],E1=St("folder",V1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1e=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],G1e=St("git-branch",q1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1e=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],pL=St("git-compare",W1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Pf=St("globe",Y1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Z1e=St("grid-3x3",K1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1e=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],X1e=St("grip-vertical",J1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1e=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],mL=St("hammer",Q1e);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ebe=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],ax=St("hard-drive",ebe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tbe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],gL=St("image",tbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nbe=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],bL=St("key",nbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rbe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],sbe=St("layout-grid",rbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const obe=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Q_=St("lightbulb",obe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ibe=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],abe=St("list-todo",ibe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lbe=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],cbe=St("list",lbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ube=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],fs=St("loader-circle",ube);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dbe=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],yL=St("log-in",dbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fbe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],vL=St("log-out",fbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hbe=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],xL=St("map",hbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pbe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],jq=St("message-square",pbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mbe=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],gbe=St("mic",mbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bbe=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],xN=St("monitor",bbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ybe=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Uq=St("moon",ybe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vbe=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],s2=St("mouse-pointer-2",vbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xbe=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],o2=St("move",xbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wbe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],cv=St("palette",wbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ebe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],_be=St("panel-right",Ebe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sbe=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Tbe=St("paperclip",Sbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cbe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],eS=St("pencil",Cbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kbe=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],wN=St("play",kbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Abe=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],Nbe=St("plug",Abe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ibe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hf=St("plus",Ibe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rbe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],f0=St("refresh-cw",Rbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mbe=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Obe=St("rocket",Mbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dbe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],Pbe=St("scroll-text",Dbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lbe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Vf=St("search",Lbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $be=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Fbe=St("send",$be);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bbe=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Hq=St("server",Bbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zbe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tS=St("settings",zbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jbe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wL=St("shield-check",jbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ube=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],Vq=St("sliders-horizontal",Ube);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hbe=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],I3=St("smartphone",Hbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vbe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],bR=St("sparkles",Vbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qbe=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],qq=St("square-check-big",qbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gbe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Wbe=St("square-pen",Gbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ybe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Gq=St("square",Ybe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kbe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],EL=St("star",Kbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zbe=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Wq=St("sun",Zbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jbe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],R3=St("tablet",Jbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xbe=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],ld=St("terminal",Xbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qbe=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],_L=St("test-tube",Qbe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eye=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Lf=St("trash-2",eye);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tye=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Yq=St("triangle-alert",tye);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nye=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],rye=St("upload",nye);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sye=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Kq=St("wrench",sye);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oye=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qr=St("x",oye);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iye=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Gl=St("zap",iye),aye=[{type:"browser",label:"Browser",icon:Pf,description:"Web browser"},{type:"kanban",label:"Kanban",icon:$q,description:"Project board"},{type:"todos",label:"Todos",icon:qq,description:"Task list"},{type:"notes",label:"Notes",icon:gR,description:"Rich text notes"}];function lye(e){switch(e){case"browser":return Pf;case"kanban":return $q;case"todos":return qq;case"notes":return gR;default:return Pf}}function cye({tabs:e,activeTabId:t,onTabSelect:n,onTabClose:r,onNewTab:s,onReorderTabs:o,isDarkMode:i,onToggleDarkMode:a,onOpenSettings:l,fastApplyReady:c,fastApplyLoading:u,fileWatcherActive:f}){const{currentTheme:m}=hR(),[g,y]=w.useState(!1),[v,x]=w.useState(null),[E,T]=w.useState(null),k=w.useRef(null),I=w.useRef(null),O=w.useRef(null),M=m.colors,P=(M==null?void 0:M.background)||(i?"#171717":"#d6d3d1");M!=null&&M.foreground,M!=null&&M.border;const j=()=>{k.current&&(clearTimeout(k.current),k.current=null),y(!0)},V=()=>{k.current=setTimeout(()=>{y(!1)},150)},U=()=>{k.current&&(clearTimeout(k.current),k.current=null)};w.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]);const z=ee=>{y(!1),s(ee)},H=(ee,re)=>{x(re),ee.dataTransfer.effectAllowed="move",ee.dataTransfer.setData("text/plain",re),requestAnimationFrame(()=>{const ie=ee.target;ie.style.opacity="0.5"})},F=ee=>{const re=ee.target;re.style.opacity="1",x(null),T(null)},G=(ee,re)=>{ee.preventDefault(),ee.dataTransfer.dropEffect="move",re!==v&&T(re)},X=()=>{T(null)},J=(ee,re)=>{if(ee.preventDefault(),!v||v===re||!o)return;const ie=e.findIndex(Q=>Q.id===v),Z=e.findIndex(Q=>Q.id===re);if(ie===-1||Z===-1)return;const te=[...e],[oe]=te.splice(ie,1);te.splice(Z,0,oe),o(te),x(null),T(null)};return h.jsxs("div",{className:"h-11 flex items-center justify-between select-none",style:{WebkitAppRegion:"drag",backgroundColor:P},children:[h.jsx("div",{className:"w-20 flex-shrink-0"}),h.jsxs("div",{className:"flex-1 flex items-center gap-0.5 h-full overflow-x-auto overflow-y-visible px-1",style:{WebkitAppRegion:"no-drag"},children:[e.map(ee=>{const re=lye(ee.type||"browser"),ie=v===ee.id,Z=E===ee.id;return h.jsxs("div",{draggable:!!o,onDragStart:te=>H(te,ee.id),onDragEnd:F,onDragOver:te=>G(te,ee.id),onDragLeave:X,onDrop:te=>J(te,ee.id),onClick:()=>n(ee.id),className:`
                group relative flex items-center gap-2 h-8 px-3 rounded-lg cursor-pointer
                transition-all duration-150 min-w-[120px] max-w-[200px]
                ${ee.id===t?i?"bg-neutral-700/80 text-white":"bg-white text-stone-900 shadow-sm":i?"text-neutral-400 hover:bg-neutral-800 hover:text-neutral-200":"text-stone-500 hover:bg-stone-200/60 hover:text-stone-700"}
                ${ie?"opacity-50":""}
                ${Z?i?"ring-2 ring-violet-500":"ring-2 ring-violet-400":""}
              `,style:{position:"relative",top:"3px"},children:[ee.isProject?h.jsx(j1e,{size:14,className:"flex-shrink-0 text-amber-500"}):ee.type==="browser"&&ee.favicon?h.jsx("img",{src:ee.favicon,alt:"",className:"w-4 h-4 flex-shrink-0"}):h.jsx(re,{size:14,className:"flex-shrink-0"}),h.jsx("span",{className:"text-xs font-medium truncate flex-1",children:ee.title}),e.length>1&&h.jsx("button",{onClick:te=>{te.stopPropagation(),r(ee.id)},className:`
                    w-4 h-4 rounded flex items-center justify-center flex-shrink-0
                    opacity-0 group-hover:opacity-100 transition-opacity
                    ${i?"hover:bg-neutral-600 text-neutral-400 hover:text-white":"hover:bg-stone-300 text-stone-400 hover:text-stone-700"}
                  `,children:h.jsx(qr,{size:12})})]},ee.id)}),h.jsxs("div",{className:"relative",style:{top:"3px"},children:[h.jsx("button",{ref:I,onClick:()=>s("browser"),onMouseEnter:j,onMouseLeave:V,className:`
              w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0
              transition-colors
              ${i?"text-neutral-500 hover:bg-neutral-800 hover:text-neutral-300":"text-stone-400 hover:bg-stone-200 hover:text-stone-600"}
            `,title:"New tab",children:h.jsx(Hf,{size:16})}),g&&I.current&&h.jsx("div",{ref:O,onMouseEnter:U,onMouseLeave:V,className:`fixed py-1 rounded-lg shadow-xl border z-[9999] min-w-[160px] ${i?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,style:{top:I.current.getBoundingClientRect().bottom+4,left:I.current.getBoundingClientRect().left,WebkitAppRegion:"no-drag"},children:aye.map(({type:ee,label:re,icon:ie,description:Z})=>h.jsxs("button",{onClick:()=>z(ee),className:`w-full flex items-center gap-3 px-3 py-2 text-left transition-colors ${i?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-100 text-stone-700"}`,children:[h.jsx(ie,{size:16,className:i?"text-neutral-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"text-sm font-medium",children:re}),h.jsx("div",{className:`text-xs ${i?"text-neutral-500":"text-stone-400"}`,children:Z})]})]},ee))})]})]}),h.jsxs("div",{className:"flex items-center gap-1.5 pr-3 flex-shrink-0",style:{WebkitAppRegion:"no-drag"},children:[f&&h.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur-md transition-all ${i?"bg-gradient-to-r from-emerald-500/20 to-teal-500/20 text-emerald-300 border border-emerald-500/30 shadow-lg shadow-emerald-500/10":"bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700 border border-emerald-300/50 shadow-sm"}`,title:"File watcher active - monitoring project for changes",children:[h.jsx(mR,{size:10,className:i?"text-emerald-400":"text-emerald-600"}),h.jsx("span",{children:"Watching"})]}),(c||u)&&h.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur-md transition-all ${u?i?"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 text-blue-300 border border-blue-500/30 shadow-lg shadow-blue-500/10":"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 border border-blue-300/50 shadow-sm":i?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 border border-yellow-500/30 shadow-lg shadow-yellow-500/10":"bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-700 border border-yellow-300/50 shadow-sm"}`,title:u?"Fast Apply is loading...":"Fast Apply is ready - local AI model loaded",children:[h.jsx(Gl,{size:10,className:u?i?"text-blue-400 animate-pulse":"text-blue-600 animate-pulse":i?"text-yellow-400":"text-yellow-600"}),h.jsx("span",{children:u?"Loading...":"Ready"})]}),m.id==="system-default"&&h.jsx("button",{onClick:a,className:`w-7 h-7 rounded-full flex items-center justify-center transition-colors ${i?"hover:bg-neutral-700 text-yellow-400":"hover:bg-stone-200 text-stone-500"}`,title:i?"Switch to Light Mode":"Switch to Dark Mode",children:i?h.jsx(Wq,{size:14}):h.jsx(Uq,{size:14})}),h.jsx("button",{onClick:l,className:`w-7 h-7 rounded-full flex items-center justify-center transition-colors ${i?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Settings",children:h.jsx(tS,{size:14})})]})]})}function Zq(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Zq(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function yR(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Zq(e))&&(r&&(r+=" "),r+=t);return r}const uye=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},dye=(e,t)=>({classGroupId:e,validator:t}),Jq=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),nS="-",SL=[],fye="arbitrary..",hye=e=>{const t=mye(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return pye(i);const a=i.split(nS),l=a[0]===""&&a.length>1?1:0;return Xq(a,l,t)},getConflictingClassGroupIds:(i,a)=>{if(a){const l=r[i],c=n[i];return l?c?uye(c,l):l:c||SL}return n[i]||SL}}},Xq=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const s=e[t],o=n.nextPart.get(s);if(o){const c=Xq(e,t+1,o);if(c)return c}const i=n.validators;if(i===null)return;const a=t===0?e.join(nS):e.slice(t).join(nS),l=i.length;for(let c=0;c<l;c++){const u=i[c];if(u.validator(a))return u.classGroupId}},pye=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?fye+r:void 0})(),mye=e=>{const{theme:t,classGroups:n}=e;return gye(n,t)},gye=(e,t)=>{const n=Jq();for(const r in e){const s=e[r];vR(s,n,r,t)}return n},vR=(e,t,n,r)=>{const s=e.length;for(let o=0;o<s;o++){const i=e[o];bye(i,t,n,r)}},bye=(e,t,n,r)=>{if(typeof e=="string"){yye(e,t,n);return}if(typeof e=="function"){vye(e,t,n,r);return}xye(e,t,n,r)},yye=(e,t,n)=>{const r=e===""?t:Qq(t,e);r.classGroupId=n},vye=(e,t,n,r)=>{if(wye(e)){vR(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(dye(n,e))},xye=(e,t,n,r)=>{const s=Object.entries(e),o=s.length;for(let i=0;i<o;i++){const[a,l]=s[i];vR(l,Qq(t,a),n,r)}},Qq=(e,t)=>{let n=e;const r=t.split(nS),s=r.length;for(let o=0;o<s;o++){const i=r[o];let a=n.nextPart.get(i);a||(a=Jq(),n.nextPart.set(i,a)),n=a}return n},wye=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Eye=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const s=(o,i)=>{n[o]=i,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(o){let i=n[o];if(i!==void 0)return i;if((i=r[o])!==void 0)return s(o,i),i},set(o,i){o in n?n[o]=i:s(o,i)}}},EN="!",TL=":",_ye=[],CL=(e,t,n,r,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),Sye=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const o=[];let i=0,a=0,l=0,c;const u=s.length;for(let v=0;v<u;v++){const x=s[v];if(i===0&&a===0){if(x===TL){o.push(s.slice(l,v)),l=v+1;continue}if(x==="/"){c=v;continue}}x==="["?i++:x==="]"?i--:x==="("?a++:x===")"&&a--}const f=o.length===0?s:s.slice(l);let m=f,g=!1;f.endsWith(EN)?(m=f.slice(0,-1),g=!0):f.startsWith(EN)&&(m=f.slice(1),g=!0);const y=c&&c>l?c-l:void 0;return CL(o,g,m,y)};if(t){const s=t+TL,o=r;r=i=>i.startsWith(s)?o(i.slice(s.length)):CL(_ye,!1,i,void 0,!0)}if(n){const s=r;r=o=>n({className:o,parseClassName:s})}return r},Tye=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let o=0;o<n.length;o++){const i=n[o],a=i[0]==="[",l=t.has(i);a||l?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(i)):s.push(i)}return s.length>0&&(s.sort(),r.push(...s)),r}},Cye=e=>({cache:Eye(e.cacheSize),parseClassName:Sye(e),sortModifiers:Tye(e),...hye(e)}),kye=/\s+/,Aye=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=t,i=[],a=e.trim().split(kye);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:f,modifiers:m,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:v}=n(u);if(f){l=u+(l.length>0?" "+l:l);continue}let x=!!v,E=r(x?y.substring(0,v):y);if(!E){if(!x){l=u+(l.length>0?" "+l:l);continue}if(E=r(y),!E){l=u+(l.length>0?" "+l:l);continue}x=!1}const T=m.length===0?"":m.length===1?m[0]:o(m).join(":"),k=g?T+EN:T,I=k+E;if(i.indexOf(I)>-1)continue;i.push(I);const O=s(E,x);for(let M=0;M<O.length;++M){const P=O[M];i.push(k+P)}l=u+(l.length>0?" "+l:l)}return l},Nye=(...e)=>{let t=0,n,r,s="";for(;t<e.length;)(n=e[t++])&&(r=eG(n))&&(s&&(s+=" "),s+=r);return s},eG=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=eG(e[r]))&&(n&&(n+=" "),n+=t);return n},Iye=(e,...t)=>{let n,r,s,o;const i=l=>{const c=t.reduce((u,f)=>f(u),e());return n=Cye(c),r=n.cache.get,s=n.cache.set,o=a,a(l)},a=l=>{const c=r(l);if(c)return c;const u=Aye(l,n);return s(l,u),u};return o=i,(...l)=>o(Nye(...l))},Rye=[],_i=e=>{const t=n=>n[e]||Rye;return t.isThemeGetter=!0,t},tG=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,nG=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Mye=/^\d+\/\d+$/,Oye=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Dye=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Pye=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Lye=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$ye=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zg=e=>Mye.test(e),_r=e=>!!e&&!Number.isNaN(Number(e)),Hh=e=>!!e&&Number.isInteger(Number(e)),M3=e=>e.endsWith("%")&&_r(e.slice(0,-1)),uf=e=>Oye.test(e),Fye=()=>!0,Bye=e=>Dye.test(e)&&!Pye.test(e),rG=()=>!1,zye=e=>Lye.test(e),jye=e=>$ye.test(e),Uye=e=>!mn(e)&&!gn(e),Hye=e=>yb(e,iG,rG),mn=e=>tG.test(e),Rp=e=>yb(e,aG,Bye),O3=e=>yb(e,Yye,_r),kL=e=>yb(e,sG,rG),Vye=e=>yb(e,oG,jye),i2=e=>yb(e,lG,zye),gn=e=>nG.test(e),zy=e=>vb(e,aG),qye=e=>vb(e,Kye),AL=e=>vb(e,sG),Gye=e=>vb(e,iG),Wye=e=>vb(e,oG),a2=e=>vb(e,lG,!0),yb=(e,t,n)=>{const r=tG.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},vb=(e,t,n=!1)=>{const r=nG.exec(e);return r?r[1]?t(r[1]):n:!1},sG=e=>e==="position"||e==="percentage",oG=e=>e==="image"||e==="url",iG=e=>e==="length"||e==="size"||e==="bg-size",aG=e=>e==="length",Yye=e=>e==="number",Kye=e=>e==="family-name",lG=e=>e==="shadow",Zye=()=>{const e=_i("color"),t=_i("font"),n=_i("text"),r=_i("font-weight"),s=_i("tracking"),o=_i("leading"),i=_i("breakpoint"),a=_i("container"),l=_i("spacing"),c=_i("radius"),u=_i("shadow"),f=_i("inset-shadow"),m=_i("text-shadow"),g=_i("drop-shadow"),y=_i("blur"),v=_i("perspective"),x=_i("aspect"),E=_i("ease"),T=_i("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...I(),gn,mn],M=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],j=()=>[gn,mn,l],V=()=>[zg,"full","auto",...j()],U=()=>[Hh,"none","subgrid",gn,mn],z=()=>["auto",{span:["full",Hh,gn,mn]},Hh,gn,mn],H=()=>[Hh,"auto",gn,mn],F=()=>["auto","min","max","fr",gn,mn],G=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],X=()=>["start","end","center","stretch","center-safe","end-safe"],J=()=>["auto",...j()],ee=()=>[zg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],re=()=>[e,gn,mn],ie=()=>[...I(),AL,kL,{position:[gn,mn]}],Z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],te=()=>["auto","cover","contain",Gye,Hye,{size:[gn,mn]}],oe=()=>[M3,zy,Rp],Q=()=>["","none","full",c,gn,mn],Te=()=>["",_r,zy,Rp],ge=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],fe=()=>[_r,M3,AL,kL],Fe=()=>["","none",y,gn,mn],De=()=>["none",_r,gn,mn],Re=()=>["none",_r,gn,mn],tt=()=>[_r,gn,mn],de=()=>[zg,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[uf],breakpoint:[uf],color:[Fye],container:[uf],"drop-shadow":[uf],ease:["in","out","in-out"],font:[Uye],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[uf],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[uf],shadow:[uf],spacing:["px",_r],text:[uf],"text-shadow":[uf],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",zg,mn,gn,x]}],container:["container"],columns:[{columns:[_r,mn,gn,a]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:V()}],"inset-x":[{"inset-x":V()}],"inset-y":[{"inset-y":V()}],start:[{start:V()}],end:[{end:V()}],top:[{top:V()}],right:[{right:V()}],bottom:[{bottom:V()}],left:[{left:V()}],visibility:["visible","invisible","collapse"],z:[{z:[Hh,"auto",gn,mn]}],basis:[{basis:[zg,"full","auto",a,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[_r,zg,"auto","initial","none",mn]}],grow:[{grow:["",_r,gn,mn]}],shrink:[{shrink:["",_r,gn,mn]}],order:[{order:[Hh,"first","last","none",gn,mn]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:z()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:z()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...G(),"normal"]}],"justify-items":[{"justify-items":[...X(),"normal"]}],"justify-self":[{"justify-self":["auto",...X()]}],"align-content":[{content:["normal",...G()]}],"align-items":[{items:[...X(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...X(),{baseline:["","last"]}]}],"place-content":[{"place-content":G()}],"place-items":[{"place-items":[...X(),"baseline"]}],"place-self":[{"place-self":["auto",...X()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:J()}],mx:[{mx:J()}],my:[{my:J()}],ms:[{ms:J()}],me:[{me:J()}],mt:[{mt:J()}],mr:[{mr:J()}],mb:[{mb:J()}],ml:[{ml:J()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:ee()}],w:[{w:[a,"screen",...ee()]}],"min-w":[{"min-w":[a,"screen","none",...ee()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[i]},...ee()]}],h:[{h:["screen","lh",...ee()]}],"min-h":[{"min-h":["screen","lh","none",...ee()]}],"max-h":[{"max-h":["screen","lh",...ee()]}],"font-size":[{text:["base",n,zy,Rp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,gn,O3]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",M3,mn]}],"font-family":[{font:[qye,mn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,gn,mn]}],"line-clamp":[{"line-clamp":[_r,"none",gn,O3]}],leading:[{leading:[o,...j()]}],"list-image":[{"list-image":["none",gn,mn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",gn,mn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:re()}],"text-color":[{text:re()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[_r,"from-font","auto",gn,Rp]}],"text-decoration-color":[{decoration:re()}],"underline-offset":[{"underline-offset":[_r,"auto",gn,mn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gn,mn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gn,mn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:Z()}],"bg-size":[{bg:te()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Hh,gn,mn],radial:["",gn,mn],conic:[Hh,gn,mn]},Wye,Vye]}],"bg-color":[{bg:re()}],"gradient-from-pos":[{from:oe()}],"gradient-via-pos":[{via:oe()}],"gradient-to-pos":[{to:oe()}],"gradient-from":[{from:re()}],"gradient-via":[{via:re()}],"gradient-to":[{to:re()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:Te()}],"border-w-x":[{"border-x":Te()}],"border-w-y":[{"border-y":Te()}],"border-w-s":[{"border-s":Te()}],"border-w-e":[{"border-e":Te()}],"border-w-t":[{"border-t":Te()}],"border-w-r":[{"border-r":Te()}],"border-w-b":[{"border-b":Te()}],"border-w-l":[{"border-l":Te()}],"divide-x":[{"divide-x":Te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ge(),"hidden","none"]}],"divide-style":[{divide:[...ge(),"hidden","none"]}],"border-color":[{border:re()}],"border-color-x":[{"border-x":re()}],"border-color-y":[{"border-y":re()}],"border-color-s":[{"border-s":re()}],"border-color-e":[{"border-e":re()}],"border-color-t":[{"border-t":re()}],"border-color-r":[{"border-r":re()}],"border-color-b":[{"border-b":re()}],"border-color-l":[{"border-l":re()}],"divide-color":[{divide:re()}],"outline-style":[{outline:[...ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[_r,gn,mn]}],"outline-w":[{outline:["",_r,zy,Rp]}],"outline-color":[{outline:re()}],shadow:[{shadow:["","none",u,a2,i2]}],"shadow-color":[{shadow:re()}],"inset-shadow":[{"inset-shadow":["none",f,a2,i2]}],"inset-shadow-color":[{"inset-shadow":re()}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:re()}],"ring-offset-w":[{"ring-offset":[_r,Rp]}],"ring-offset-color":[{"ring-offset":re()}],"inset-ring-w":[{"inset-ring":Te()}],"inset-ring-color":[{"inset-ring":re()}],"text-shadow":[{"text-shadow":["none",m,a2,i2]}],"text-shadow-color":[{"text-shadow":re()}],opacity:[{opacity:[_r,gn,mn]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[_r]}],"mask-image-linear-from-pos":[{"mask-linear-from":fe()}],"mask-image-linear-to-pos":[{"mask-linear-to":fe()}],"mask-image-linear-from-color":[{"mask-linear-from":re()}],"mask-image-linear-to-color":[{"mask-linear-to":re()}],"mask-image-t-from-pos":[{"mask-t-from":fe()}],"mask-image-t-to-pos":[{"mask-t-to":fe()}],"mask-image-t-from-color":[{"mask-t-from":re()}],"mask-image-t-to-color":[{"mask-t-to":re()}],"mask-image-r-from-pos":[{"mask-r-from":fe()}],"mask-image-r-to-pos":[{"mask-r-to":fe()}],"mask-image-r-from-color":[{"mask-r-from":re()}],"mask-image-r-to-color":[{"mask-r-to":re()}],"mask-image-b-from-pos":[{"mask-b-from":fe()}],"mask-image-b-to-pos":[{"mask-b-to":fe()}],"mask-image-b-from-color":[{"mask-b-from":re()}],"mask-image-b-to-color":[{"mask-b-to":re()}],"mask-image-l-from-pos":[{"mask-l-from":fe()}],"mask-image-l-to-pos":[{"mask-l-to":fe()}],"mask-image-l-from-color":[{"mask-l-from":re()}],"mask-image-l-to-color":[{"mask-l-to":re()}],"mask-image-x-from-pos":[{"mask-x-from":fe()}],"mask-image-x-to-pos":[{"mask-x-to":fe()}],"mask-image-x-from-color":[{"mask-x-from":re()}],"mask-image-x-to-color":[{"mask-x-to":re()}],"mask-image-y-from-pos":[{"mask-y-from":fe()}],"mask-image-y-to-pos":[{"mask-y-to":fe()}],"mask-image-y-from-color":[{"mask-y-from":re()}],"mask-image-y-to-color":[{"mask-y-to":re()}],"mask-image-radial":[{"mask-radial":[gn,mn]}],"mask-image-radial-from-pos":[{"mask-radial-from":fe()}],"mask-image-radial-to-pos":[{"mask-radial-to":fe()}],"mask-image-radial-from-color":[{"mask-radial-from":re()}],"mask-image-radial-to-color":[{"mask-radial-to":re()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":I()}],"mask-image-conic-pos":[{"mask-conic":[_r]}],"mask-image-conic-from-pos":[{"mask-conic-from":fe()}],"mask-image-conic-to-pos":[{"mask-conic-to":fe()}],"mask-image-conic-from-color":[{"mask-conic-from":re()}],"mask-image-conic-to-color":[{"mask-conic-to":re()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:Z()}],"mask-size":[{mask:te()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",gn,mn]}],filter:[{filter:["","none",gn,mn]}],blur:[{blur:Fe()}],brightness:[{brightness:[_r,gn,mn]}],contrast:[{contrast:[_r,gn,mn]}],"drop-shadow":[{"drop-shadow":["","none",g,a2,i2]}],"drop-shadow-color":[{"drop-shadow":re()}],grayscale:[{grayscale:["",_r,gn,mn]}],"hue-rotate":[{"hue-rotate":[_r,gn,mn]}],invert:[{invert:["",_r,gn,mn]}],saturate:[{saturate:[_r,gn,mn]}],sepia:[{sepia:["",_r,gn,mn]}],"backdrop-filter":[{"backdrop-filter":["","none",gn,mn]}],"backdrop-blur":[{"backdrop-blur":Fe()}],"backdrop-brightness":[{"backdrop-brightness":[_r,gn,mn]}],"backdrop-contrast":[{"backdrop-contrast":[_r,gn,mn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",_r,gn,mn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_r,gn,mn]}],"backdrop-invert":[{"backdrop-invert":["",_r,gn,mn]}],"backdrop-opacity":[{"backdrop-opacity":[_r,gn,mn]}],"backdrop-saturate":[{"backdrop-saturate":[_r,gn,mn]}],"backdrop-sepia":[{"backdrop-sepia":["",_r,gn,mn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",gn,mn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[_r,"initial",gn,mn]}],ease:[{ease:["linear","initial",E,gn,mn]}],delay:[{delay:[_r,gn,mn]}],animate:[{animate:["none",T,gn,mn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,gn,mn]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:De()}],"rotate-x":[{"rotate-x":De()}],"rotate-y":[{"rotate-y":De()}],"rotate-z":[{"rotate-z":De()}],scale:[{scale:Re()}],"scale-x":[{"scale-x":Re()}],"scale-y":[{"scale-y":Re()}],"scale-z":[{"scale-z":Re()}],"scale-3d":["scale-3d"],skew:[{skew:tt()}],"skew-x":[{"skew-x":tt()}],"skew-y":[{"skew-y":tt()}],transform:[{transform:[gn,mn,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:de()}],"translate-x":[{"translate-x":de()}],"translate-y":[{"translate-y":de()}],"translate-z":[{"translate-z":de()}],"translate-none":["translate-none"],accent:[{accent:re()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:re()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gn,mn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gn,mn]}],fill:[{fill:["none",...re()]}],"stroke-w":[{stroke:[_r,zy,Rp,O3]}],stroke:[{stroke:["none",...re()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},cG=Iye(Zye);function Qe(...e){return cG(yR(e))}const NL=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,IL=yR,xR=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return IL(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,i=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],f=o==null?void 0:o[c];if(u===null)return null;const m=NL(u)||NL(f);return s[c][m]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,m]=u;return m===void 0||(c[f]=m),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:m,...g}=u;return Object.entries(g).every(y=>{let[v,x]=y;return Array.isArray(x)?x.includes({...o,...a}[v]):{...o,...a}[v]===x})?[...c,f,m]:c},[]);return IL(e,i,l,n==null?void 0:n.class,n==null?void 0:n.className)},Jye=xR("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ec({className:e,variant:t,...n}){return h.jsx("div",{className:Qe(Jye({variant:t}),e),...n})}function RL(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function lw(...e){return t=>{let n=!1;const r=e.map(s=>{const o=RL(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():RL(e[s],null)}}}}function Nr(...e){return w.useCallback(lw(...e),e)}var Xye=Symbol.for("react.lazy"),rS=rR[" use ".trim().toString()];function Qye(e){return typeof e=="object"&&e!==null&&"then"in e}function uG(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Xye&&"_payload"in e&&Qye(e._payload)}function dG(e){const t=eve(e),n=w.forwardRef((r,s)=>{let{children:o,...i}=r;uG(o)&&typeof rS=="function"&&(o=rS(o._payload));const a=w.Children.toArray(o),l=a.find(nve);if(l){const c=l.props.children,u=a.map(f=>f===l?w.Children.count(c)>1?w.Children.only(null):w.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:s,children:w.isValidElement(c)?w.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var Am=dG("Slot");function eve(e){const t=w.forwardRef((n,r)=>{let{children:s,...o}=n;if(uG(s)&&typeof rS=="function"&&(s=rS(s._payload)),w.isValidElement(s)){const i=sve(s),a=rve(o,s.props);return s.type!==w.Fragment&&(a.ref=r?lw(r,i):i),w.cloneElement(s,a)}return w.Children.count(s)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var tve=Symbol("radix.slottable");function nve(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===tve}function rve(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const l=o(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function sve(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const _N=xR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),wr=w.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const i=r?Am:"button";return h.jsx(i,{className:Qe(_N({variant:t,size:n,className:e})),ref:o,...s})});wr.displayName="Button";const gu=w.forwardRef(({className:e,type:t,...n},r)=>h.jsx("input",{type:t,className:Qe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));gu.displayName="Input";function Gt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function ove(e,t){const n=w.createContext(t),r=o=>{const{children:i,...a}=o,l=w.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:l,children:i})};r.displayName=e+"Provider";function s(o){const i=w.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function za(e,t=[]){let n=[];function r(o,i){const a=w.createContext(i),l=n.length;n=[...n,i];const c=f=>{var E;const{scope:m,children:g,...y}=f,v=((E=m==null?void 0:m[e])==null?void 0:E[l])||a,x=w.useMemo(()=>y,Object.values(y));return h.jsx(v.Provider,{value:x,children:g})};c.displayName=o+"Provider";function u(f,m){var v;const g=((v=m==null?void 0:m[e])==null?void 0:v[l])||a,y=w.useContext(g);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[c,u]}const s=()=>{const o=n.map(i=>w.createContext(i));return function(a){const l=(a==null?void 0:a[e])||o;return w.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return s.scopeName=e,[r,ive(s,...t)]}function ive(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...a,...f}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function am(e){const t=ave(e),n=w.forwardRef((r,s)=>{const{children:o,...i}=r,a=w.Children.toArray(o),l=a.find(cve);if(l){const c=l.props.children,u=a.map(f=>f===l?w.Children.count(c)>1?w.Children.only(null):w.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:s,children:w.isValidElement(c)?w.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}function ave(e){const t=w.forwardRef((n,r)=>{const{children:s,...o}=n;if(w.isValidElement(s)){const i=dve(s),a=uve(o,s.props);return s.type!==w.Fragment&&(a.ref=r?lw(r,i):i),w.cloneElement(s,a)}return w.Children.count(s)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var fG=Symbol("radix.slottable");function lve(e){const t=({children:n})=>h.jsx(h.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=fG,t}function cve(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===fG}function uve(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const l=o(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function dve(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function wR(e){const t=e+"CollectionProvider",[n,r]=za(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=v=>{const{scope:x,children:E}=v,T=Me.useRef(null),k=Me.useRef(new Map).current;return h.jsx(s,{scope:x,itemMap:k,collectionRef:T,children:E})};i.displayName=t;const a=e+"CollectionSlot",l=am(a),c=Me.forwardRef((v,x)=>{const{scope:E,children:T}=v,k=o(a,E),I=Nr(x,k.collectionRef);return h.jsx(l,{ref:I,children:T})});c.displayName=a;const u=e+"CollectionItemSlot",f="data-radix-collection-item",m=am(u),g=Me.forwardRef((v,x)=>{const{scope:E,children:T,...k}=v,I=Me.useRef(null),O=Nr(x,I),M=o(u,E);return Me.useEffect(()=>(M.itemMap.set(I,{ref:I,...k}),()=>void M.itemMap.delete(I))),h.jsx(m,{[f]:"",ref:O,children:T})});g.displayName=u;function y(v){const x=o(e+"CollectionConsumer",v);return Me.useCallback(()=>{const T=x.collectionRef.current;if(!T)return[];const k=Array.from(T.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((M,P)=>k.indexOf(M.ref.current)-k.indexOf(P.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:i,Slot:c,ItemSlot:g},y,r]}var Ni=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},fve=rR[" useId ".trim().toString()]||(()=>{}),hve=0;function Ic(e){const[t,n]=w.useState(fve());return Ni(()=>{n(r=>r??String(hve++))},[e]),t?`radix-${t}`:""}var dl=nq();const ER=Cm(dl);var pve=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ln=pve.reduce((e,t)=>{const n=am(`Primitive.${t}`),r=w.forwardRef((s,o)=>{const{asChild:i,...a}=s,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function hG(e,t){e&&dl.flushSync(()=>e.dispatchEvent(t))}function bu(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}var mve=rR[" useInsertionEffect ".trim().toString()]||Ni;function ml({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,o,i]=gve({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:s;{const u=w.useRef(e!==void 0);w.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=w.useCallback(u=>{var f;if(a){const m=bve(u)?u(e):u;m!==e&&((f=i.current)==null||f.call(i,m))}else o(u)},[a,e,o,i]);return[l,c]}function gve({defaultProp:e,onChange:t}){const[n,r]=w.useState(e),s=w.useRef(n),o=w.useRef(t);return mve(()=>{o.current=t},[t]),w.useEffect(()=>{var i;s.current!==n&&((i=o.current)==null||i.call(o,n),s.current=n)},[n,s]),[n,r,o]}function bve(e){return typeof e=="function"}var yve=w.createContext(void 0);function xb(e){const t=w.useContext(yve);return e||t||"ltr"}var D3="rovingFocusGroup.onEntryFocus",vve={bubbles:!1,cancelable:!0},cw="RovingFocusGroup",[SN,pG,xve]=wR(cw),[wve,$0]=za(cw,[xve]),[Eve,_ve]=wve(cw),mG=w.forwardRef((e,t)=>h.jsx(SN.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(SN.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(Sve,{...e,ref:t})})}));mG.displayName=cw;var Sve=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=e,m=w.useRef(null),g=Nr(t,m),y=xb(o),[v,x]=ml({prop:i,defaultProp:a??null,onChange:l,caller:cw}),[E,T]=w.useState(!1),k=bu(c),I=pG(n),O=w.useRef(!1),[M,P]=w.useState(0);return w.useEffect(()=>{const j=m.current;if(j)return j.addEventListener(D3,k),()=>j.removeEventListener(D3,k)},[k]),h.jsx(Eve,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:v,onItemFocus:w.useCallback(j=>x(j),[x]),onItemShiftTab:w.useCallback(()=>T(!0),[]),onFocusableItemAdd:w.useCallback(()=>P(j=>j+1),[]),onFocusableItemRemove:w.useCallback(()=>P(j=>j-1),[]),children:h.jsx(Ln.div,{tabIndex:E||M===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...e.style},onMouseDown:Gt(e.onMouseDown,()=>{O.current=!0}),onFocus:Gt(e.onFocus,j=>{const V=!O.current;if(j.target===j.currentTarget&&V&&!E){const U=new CustomEvent(D3,vve);if(j.currentTarget.dispatchEvent(U),!U.defaultPrevented){const z=I().filter(J=>J.focusable),H=z.find(J=>J.active),F=z.find(J=>J.id===v),X=[H,F,...z].filter(Boolean).map(J=>J.ref.current);yG(X,u)}}O.current=!1}),onBlur:Gt(e.onBlur,()=>T(!1))})})}),gG="RovingFocusGroupItem",bG=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:i,...a}=e,l=Ic(),c=o||l,u=_ve(gG,n),f=u.currentTabStopId===c,m=pG(n),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:v}=u;return w.useEffect(()=>{if(r)return g(),()=>y()},[r,g,y]),h.jsx(SN.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:h.jsx(Ln.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Gt(e.onMouseDown,x=>{r?u.onItemFocus(c):x.preventDefault()}),onFocus:Gt(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Gt(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const E=kve(x,u.orientation,u.dir);if(E!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let k=m().filter(I=>I.focusable).map(I=>I.ref.current);if(E==="last")k.reverse();else if(E==="prev"||E==="next"){E==="prev"&&k.reverse();const I=k.indexOf(x.currentTarget);k=u.loop?Ave(k,I+1):k.slice(I+1)}setTimeout(()=>yG(k))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:v!=null}):i})})});bG.displayName=gG;var Tve={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Cve(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function kve(e,t,n){const r=Cve(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Tve[r]}function yG(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Ave(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var S4=mG,T4=bG;function Nve(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var gl=e=>{const{present:t,children:n}=e,r=Ive(t),s=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),o=Nr(r.ref,Rve(s));return typeof n=="function"||r.isPresent?w.cloneElement(s,{ref:o}):null};gl.displayName="Presence";function Ive(e){const[t,n]=w.useState(),r=w.useRef(null),s=w.useRef(e),o=w.useRef("none"),i=e?"mounted":"unmounted",[a,l]=Nve(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const c=l2(r.current);o.current=a==="mounted"?c:"none"},[a]),Ni(()=>{const c=r.current,u=s.current;if(u!==e){const m=o.current,g=l2(c);e?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),Ni(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,f=g=>{const v=l2(r.current).includes(CSS.escape(g.animationName));if(g.target===t&&v&&(l("ANIMATION_END"),!s.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},m=g=>{g.target===t&&(o.current=l2(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function l2(e){return(e==null?void 0:e.animationName)||"none"}function Rve(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var C4="Tabs",[Mve]=za(C4,[$0]),vG=$0(),[Ove,_R]=Mve(C4),xG=w.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=xb(a),[f,m]=ml({prop:r,onChange:s,defaultProp:o??"",caller:C4});return h.jsx(Ove,{scope:n,baseId:Ic(),value:f,onValueChange:m,orientation:i,dir:u,activationMode:l,children:h.jsx(Ln.div,{dir:u,"data-orientation":i,...c,ref:t})})});xG.displayName=C4;var wG="TabsList",EG=w.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,o=_R(wG,n),i=vG(n);return h.jsx(S4,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:h.jsx(Ln.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});EG.displayName=wG;var _G="TabsTrigger",SG=w.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=e,i=_R(_G,n),a=vG(n),l=CG(i.baseId,r),c=kG(i.baseId,r),u=r===i.value;return h.jsx(T4,{asChild:!0,...a,focusable:!s,active:u,children:h.jsx(Ln.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...o,ref:t,onMouseDown:Gt(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:Gt(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:Gt(e.onFocus,()=>{const f=i.activationMode!=="manual";!u&&!s&&f&&i.onValueChange(r)})})})});SG.displayName=_G;var TG="TabsContent",Dve=w.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...i}=e,a=_R(TG,n),l=CG(a.baseId,r),c=kG(a.baseId,r),u=r===a.value,f=w.useRef(u);return w.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),h.jsx(gl,{present:s||u,children:({present:m})=>h.jsx(Ln.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&o})})});Dve.displayName=TG;function CG(e,t){return`${e}-trigger-${t}`}function kG(e,t){return`${e}-content-${t}`}var Pve=xG,Lve=EG,$ve=SG;function AG({className:e,...t}){return h.jsx(Pve,{"data-slot":"tabs",className:Qe("flex flex-col gap-2",e),...t})}function NG({className:e,...t}){return h.jsx(Lve,{"data-slot":"tabs-list",className:Qe("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function Nv({className:e,...t}){return h.jsx($ve,{"data-slot":"tabs-trigger",className:Qe("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/50 inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function TN({className:e,...t}){return h.jsx("div",{"data-slot":"card",className:Qe("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6",e),...t})}function Fve({className:e,...t}){return h.jsx("div",{"data-slot":"card-header",className:Qe("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-[data-slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Bve({className:e,...t}){return h.jsx("div",{"data-slot":"card-title",className:Qe("leading-none font-semibold",e),...t})}function zve({className:e,...t}){return h.jsx("div",{"data-slot":"card-description",className:Qe("text-muted-foreground text-sm",e),...t})}function CN({className:e,...t}){return h.jsx("div",{"data-slot":"card-content",className:Qe("px-6",e),...t})}function jve({className:e,...t}){return h.jsx("div",{"data-slot":"card-footer",className:Qe("flex items-center px-6 [.border-t]:pt-6",e),...t})}function IG(e,t=[]){let n=[];function r(o,i){const a=w.createContext(i);a.displayName=o+"Context";const l=n.length;n=[...n,i];const c=f=>{var E;const{scope:m,children:g,...y}=f,v=((E=m==null?void 0:m[e])==null?void 0:E[l])||a,x=w.useMemo(()=>y,Object.values(y));return h.jsx(v.Provider,{value:x,children:g})};c.displayName=o+"Provider";function u(f,m){var v;const g=((v=m==null?void 0:m[e])==null?void 0:v[l])||a,y=w.useContext(g);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[c,u]}const s=()=>{const o=n.map(i=>w.createContext(i));return function(a){const l=(a==null?void 0:a[e])||o;return w.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return s.scopeName=e,[r,Uve(s,...t)]}function Uve(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...a,...f}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var Hve=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Nm=Hve.reduce((e,t)=>{const n=dG(`Primitive.${t}`),r=w.forwardRef((s,o)=>{const{asChild:i,...a}=s,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),P3={exports:{}},L3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ML;function Vve(){if(ML)return L3;ML=1;var e=aw();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,o=e.useLayoutEffect,i=e.useDebugValue;function a(f,m){var g=m(),y=r({inst:{value:g,getSnapshot:m}}),v=y[0].inst,x=y[1];return o(function(){v.value=g,v.getSnapshot=m,l(v)&&x({inst:v})},[f,g,m]),s(function(){return l(v)&&x({inst:v}),f(function(){l(v)&&x({inst:v})})},[f]),i(g),g}function l(f){var m=f.getSnapshot;f=f.value;try{var g=m();return!n(f,g)}catch{return!0}}function c(f,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return L3.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,L3}var OL;function RG(){return OL||(OL=1,P3.exports=Vve()),P3.exports}var SR=RG();function qve(){return SR.useSyncExternalStore(Gve,()=>!0,()=>!1)}function Gve(){return()=>{}}var TR="Avatar",[Wve]=IG(TR),[Yve,MG]=Wve(TR),OG=w.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,o]=w.useState("idle");return h.jsx(Yve,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:h.jsx(Nm.span,{...r,ref:t})})});OG.displayName=TR;var DG="AvatarImage",PG=w.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=e,i=MG(DG,n),a=Kve(r,o),l=bu(c=>{s(c),i.onImageLoadingStatusChange(c)});return Ni(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?h.jsx(Nm.img,{...o,ref:t,src:r}):null});PG.displayName=DG;var LG="AvatarFallback",$G=w.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,o=MG(LG,n),[i,a]=w.useState(r===void 0);return w.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),i&&o.imageLoadingStatus!=="loaded"?h.jsx(Nm.span,{...s,ref:t}):null});$G.displayName=LG;function DL(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Kve(e,{referrerPolicy:t,crossOrigin:n}){const r=qve(),s=w.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[i,a]=w.useState(()=>DL(o,e));return Ni(()=>{a(DL(o,e))},[o,e]),Ni(()=>{const l=f=>()=>{a(f)};if(!o)return;const c=l("loaded"),u=l("error");return o.addEventListener("load",c),o.addEventListener("error",u),t&&(o.referrerPolicy=t),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",c),o.removeEventListener("error",u)}},[o,n,t]),i}var Zve=OG,Jve=PG,Xve=$G;function PL({className:e,...t}){return h.jsx(Zve,{"data-slot":"avatar",className:Qe("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function Qve({className:e,...t}){return h.jsx(Jve,{"data-slot":"avatar-image",className:Qe("aspect-square size-full object-cover",e),...t})}function LL({className:e,...t}){return h.jsx(Xve,{"data-slot":"avatar-fallback",className:Qe("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function exe(e,t=globalThis==null?void 0:globalThis.document){const n=bu(e);w.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var txe="DismissableLayer",kN="dismissableLayer.update",nxe="dismissableLayer.pointerDownOutside",rxe="dismissableLayer.focusOutside",$L,FG=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wb=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:a,...l}=e,c=w.useContext(FG),[u,f]=w.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=w.useState({}),y=Nr(t,P=>f(P)),v=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=v.indexOf(x),T=u?v.indexOf(u):-1,k=c.layersWithOutsidePointerEventsDisabled.size>0,I=T>=E,O=ixe(P=>{const j=P.target,V=[...c.branches].some(U=>U.contains(j));!I||V||(s==null||s(P),i==null||i(P),P.defaultPrevented||a==null||a())},m),M=axe(P=>{const j=P.target;[...c.branches].some(U=>U.contains(j))||(o==null||o(P),i==null||i(P),P.defaultPrevented||a==null||a())},m);return exe(P=>{T===c.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},m),w.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&($L=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),FL(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=$L)}},[u,m,n,c]),w.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),FL())},[u,c]),w.useEffect(()=>{const P=()=>g({});return document.addEventListener(kN,P),()=>document.removeEventListener(kN,P)},[]),h.jsx(Ln.div,{...l,ref:y,style:{pointerEvents:k?I?"auto":"none":void 0,...e.style},onFocusCapture:Gt(e.onFocusCapture,M.onFocusCapture),onBlurCapture:Gt(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Gt(e.onPointerDownCapture,O.onPointerDownCapture)})});wb.displayName=txe;var sxe="DismissableLayerBranch",oxe=w.forwardRef((e,t)=>{const n=w.useContext(FG),r=w.useRef(null),s=Nr(t,r);return w.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),h.jsx(Ln.div,{...e,ref:s})});oxe.displayName=sxe;function ixe(e,t=globalThis==null?void 0:globalThis.document){const n=bu(e),r=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){BG(nxe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function axe(e,t=globalThis==null?void 0:globalThis.document){const n=bu(e),r=w.useRef(!1);return w.useEffect(()=>{const s=o=>{o.target&&!r.current&&BG(rxe,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function FL(){const e=new CustomEvent(kN);document.dispatchEvent(e)}function BG(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?hG(s,o):s.dispatchEvent(o)}const zG=["top","right","bottom","left"],BL=["start","end"],zL=zG.reduce((e,t)=>e.concat(t,t+"-"+BL[0],t+"-"+BL[1]),[]),yu=Math.min,ha=Math.max,sS=Math.round,c2=Math.floor,bd=e=>({x:e,y:e}),lxe={left:"right",right:"left",bottom:"top",top:"bottom"},cxe={start:"end",end:"start"};function AN(e,t,n){return ha(e,yu(t,n))}function vu(e,t){return typeof e=="function"?e(t):e}function Jl(e){return e.split("-")[0]}function pu(e){return e.split("-")[1]}function CR(e){return e==="x"?"y":"x"}function kR(e){return e==="y"?"height":"width"}const uxe=new Set(["top","bottom"]);function fu(e){return uxe.has(Jl(e))?"y":"x"}function AR(e){return CR(fu(e))}function jG(e,t,n){n===void 0&&(n=!1);const r=pu(e),s=AR(e),o=kR(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=iS(i)),[i,iS(i)]}function dxe(e){const t=iS(e);return[oS(e),t,oS(t)]}function oS(e){return e.replace(/start|end/g,t=>cxe[t])}const jL=["left","right"],UL=["right","left"],fxe=["top","bottom"],hxe=["bottom","top"];function pxe(e,t,n){switch(e){case"top":case"bottom":return n?t?UL:jL:t?jL:UL;case"left":case"right":return t?fxe:hxe;default:return[]}}function mxe(e,t,n,r){const s=pu(e);let o=pxe(Jl(e),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(oS)))),o}function iS(e){return e.replace(/left|right|bottom|top/g,t=>lxe[t])}function gxe(e){return{top:0,right:0,bottom:0,left:0,...e}}function NR(e){return typeof e!="number"?gxe(e):{top:e,right:e,bottom:e,left:e}}function B1(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function HL(e,t,n){let{reference:r,floating:s}=e;const o=fu(t),i=AR(t),a=kR(i),l=Jl(t),c=o==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-s.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(pu(t)){case"start":g[i]-=m*(n&&c?-1:1);break;case"end":g[i]+=m*(n&&c?-1:1);break}return g}const bxe=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:f}=HL(c,r,l),m=r,g={},y=0;for(let v=0;v<a.length;v++){const{name:x,fn:E}=a[v],{x:T,y:k,data:I,reset:O}=await E({x:u,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:c,platform:i,elements:{reference:e,floating:t}});u=T??u,f=k??f,g={...g,[x]:{...g[x],...I}},O&&y<=50&&(y++,typeof O=="object"&&(O.placement&&(m=O.placement),O.rects&&(c=O.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):O.rects),{x:u,y:f}=HL(c,m,l)),v=-1)}return{x:u,y:f,placement:m,strategy:s,middlewareData:g}};async function z1(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=vu(t,e),y=NR(g),x=a[m?f==="floating"?"reference":"floating":f],E=B1(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(x)))==null||n?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),T=f==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),I=await(o.isElement==null?void 0:o.isElement(k))?await(o.getScale==null?void 0:o.getScale(k))||{x:1,y:1}:{x:1,y:1},O=B1(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:T,offsetParent:k,strategy:l}):T);return{top:(E.top-O.top+y.top)/I.y,bottom:(O.bottom-E.bottom+y.bottom)/I.y,left:(E.left-O.left+y.left)/I.x,right:(O.right-E.right+y.right)/I.x}}const yxe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=vu(e,t)||{};if(c==null)return{};const f=NR(u),m={x:n,y:r},g=AR(s),y=kR(g),v=await i.getDimensions(c),x=g==="y",E=x?"top":"left",T=x?"bottom":"right",k=x?"clientHeight":"clientWidth",I=o.reference[y]+o.reference[g]-m[g]-o.floating[y],O=m[g]-o.reference[g],M=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let P=M?M[k]:0;(!P||!await(i.isElement==null?void 0:i.isElement(M)))&&(P=a.floating[k]||o.floating[y]);const j=I/2-O/2,V=P/2-v[y]/2-1,U=yu(f[E],V),z=yu(f[T],V),H=U,F=P-v[y]-z,G=P/2-v[y]/2+j,X=AN(H,G,F),J=!l.arrow&&pu(s)!=null&&G!==X&&o.reference[y]/2-(G<H?U:z)-v[y]/2<0,ee=J?G<H?G-H:G-F:0;return{[g]:m[g]+ee,data:{[g]:X,centerOffset:G-X-ee,...J&&{alignmentOffset:ee}},reset:J}}});function vxe(e,t,n){return(e?[...n.filter(s=>pu(s)===e),...n.filter(s=>pu(s)!==e)]:n.filter(s=>Jl(s)===s)).filter(s=>e?pu(s)===e||(t?oS(s)!==s:!1):!0)}const xxe=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,s;const{rects:o,middlewareData:i,placement:a,platform:l,elements:c}=t,{crossAxis:u=!1,alignment:f,allowedPlacements:m=zL,autoAlignment:g=!0,...y}=vu(e,t),v=f!==void 0||m===zL?vxe(f||null,g,m):m,x=await z1(t,y),E=((n=i.autoPlacement)==null?void 0:n.index)||0,T=v[E];if(T==null)return{};const k=jG(T,o,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==T)return{reset:{placement:v[0]}};const I=[x[Jl(T)],x[k[0]],x[k[1]]],O=[...((r=i.autoPlacement)==null?void 0:r.overflows)||[],{placement:T,overflows:I}],M=v[E+1];if(M)return{data:{index:E+1,overflows:O},reset:{placement:M}};const P=O.map(U=>{const z=pu(U.placement);return[U.placement,z&&u?U.overflows.slice(0,2).reduce((H,F)=>H+F,0):U.overflows[0],U.overflows]}).sort((U,z)=>U[1]-z[1]),V=((s=P.filter(U=>U[2].slice(0,pu(U[0])?2:3).every(z=>z<=0))[0])==null?void 0:s[0])||P[0][0];return V!==a?{data:{index:E+1,overflows:O},reset:{placement:V}}:{}}}},wxe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...x}=vu(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const E=Jl(s),T=fu(a),k=Jl(a)===a,I=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=m||(k||!v?[iS(a)]:dxe(a)),M=y!=="none";!m&&M&&O.push(...mxe(a,v,y,I));const P=[a,...O],j=await z1(t,x),V=[];let U=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&V.push(j[E]),f){const G=jG(s,i,I);V.push(j[G[0]],j[G[1]])}if(U=[...U,{placement:s,overflows:V}],!V.every(G=>G<=0)){var z,H;const G=(((z=o.flip)==null?void 0:z.index)||0)+1,X=P[G];if(X&&(!(f==="alignment"?T!==fu(X):!1)||U.every(re=>fu(re.placement)===T?re.overflows[0]>0:!0)))return{data:{index:G,overflows:U},reset:{placement:X}};let J=(H=U.filter(ee=>ee.overflows[0]<=0).sort((ee,re)=>ee.overflows[1]-re.overflows[1])[0])==null?void 0:H.placement;if(!J)switch(g){case"bestFit":{var F;const ee=(F=U.filter(re=>{if(M){const ie=fu(re.placement);return ie===T||ie==="y"}return!0}).map(re=>[re.placement,re.overflows.filter(ie=>ie>0).reduce((ie,Z)=>ie+Z,0)]).sort((re,ie)=>re[1]-ie[1])[0])==null?void 0:F[0];ee&&(J=ee);break}case"initialPlacement":J=a;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function VL(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function qL(e){return zG.some(t=>e[t]>=0)}const Exe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=vu(e,t);switch(r){case"referenceHidden":{const o=await z1(t,{...s,elementContext:"reference"}),i=VL(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:qL(i)}}}case"escaped":{const o=await z1(t,{...s,altBoundary:!0}),i=VL(o,n.floating);return{data:{escapedOffsets:i,escaped:qL(i)}}}default:return{}}}}};function UG(e){const t=yu(...e.map(o=>o.left)),n=yu(...e.map(o=>o.top)),r=ha(...e.map(o=>o.right)),s=ha(...e.map(o=>o.bottom));return{x:t,y:n,width:r-t,height:s-n}}function _xe(e){const t=e.slice().sort((s,o)=>s.y-o.y),n=[];let r=null;for(let s=0;s<t.length;s++){const o=t[s];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(s=>B1(UG(s)))}const Sxe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:o,strategy:i}=t,{padding:a=2,x:l,y:c}=vu(e,t),u=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),f=_xe(u),m=B1(UG(u)),g=NR(a);function y(){if(f.length===2&&f[0].left>f[1].right&&l!=null&&c!=null)return f.find(x=>l>x.left-g.left&&l<x.right+g.right&&c>x.top-g.top&&c<x.bottom+g.bottom)||m;if(f.length>=2){if(fu(n)==="y"){const U=f[0],z=f[f.length-1],H=Jl(n)==="top",F=U.top,G=z.bottom,X=H?U.left:z.left,J=H?U.right:z.right,ee=J-X,re=G-F;return{top:F,bottom:G,left:X,right:J,width:ee,height:re,x:X,y:F}}const x=Jl(n)==="left",E=ha(...f.map(U=>U.right)),T=yu(...f.map(U=>U.left)),k=f.filter(U=>x?U.left===T:U.right===E),I=k[0].top,O=k[k.length-1].bottom,M=T,P=E,j=P-M,V=O-I;return{top:I,bottom:O,left:M,right:P,width:j,height:V,x:M,y:I}}return m}const v=await o.getElementRects({reference:{getBoundingClientRect:y},floating:r.floating,strategy:i});return s.reference.x!==v.reference.x||s.reference.y!==v.reference.y||s.reference.width!==v.reference.width||s.reference.height!==v.reference.height?{reset:{rects:v}}:{}}}},HG=new Set(["left","top"]);async function Txe(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=Jl(n),a=pu(n),l=fu(n)==="y",c=HG.has(i)?-1:1,u=o&&l?-1:1,f=vu(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(g=a==="end"?y*-1:y),l?{x:g*u,y:m*c}:{x:m*c,y:g*u}}const Cxe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=t,l=await Txe(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}},kxe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:x=>{let{x:E,y:T}=x;return{x:E,y:T}}},...l}=vu(e,t),c={x:n,y:r},u=await z1(t,l),f=fu(Jl(s)),m=CR(f);let g=c[m],y=c[f];if(o){const x=m==="y"?"top":"left",E=m==="y"?"bottom":"right",T=g+u[x],k=g-u[E];g=AN(T,g,k)}if(i){const x=f==="y"?"top":"left",E=f==="y"?"bottom":"right",T=y+u[x],k=y-u[E];y=AN(T,y,k)}const v=a.fn({...t,[m]:g,[f]:y});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:o,[f]:i}}}}}},Axe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=vu(e,t),u={x:n,y:r},f=fu(s),m=CR(f);let g=u[m],y=u[f];const v=vu(a,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const k=m==="y"?"height":"width",I=o.reference[m]-o.floating[k]+x.mainAxis,O=o.reference[m]+o.reference[k]-x.mainAxis;g<I?g=I:g>O&&(g=O)}if(c){var E,T;const k=m==="y"?"width":"height",I=HG.has(Jl(s)),O=o.reference[f]-o.floating[k]+(I&&((E=i.offset)==null?void 0:E[f])||0)+(I?0:x.crossAxis),M=o.reference[f]+o.reference[k]+(I?0:((T=i.offset)==null?void 0:T[f])||0)-(I?x.crossAxis:0);y<O?y=O:y>M&&(y=M)}return{[m]:g,[f]:y}}}},Nxe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:i,elements:a}=t,{apply:l=()=>{},...c}=vu(e,t),u=await z1(t,c),f=Jl(s),m=pu(s),g=fu(s)==="y",{width:y,height:v}=o.floating;let x,E;f==="top"||f==="bottom"?(x=f,E=m===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(E=f,x=m==="end"?"top":"bottom");const T=v-u.top-u.bottom,k=y-u.left-u.right,I=yu(v-u[x],T),O=yu(y-u[E],k),M=!t.middlewareData.shift;let P=I,j=O;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=k),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(P=T),M&&!m){const U=ha(u.left,0),z=ha(u.right,0),H=ha(u.top,0),F=ha(u.bottom,0);g?j=y-2*(U!==0||z!==0?U+z:ha(u.left,u.right)):P=v-2*(H!==0||F!==0?H+F:ha(u.top,u.bottom))}await l({...t,availableWidth:j,availableHeight:P});const V=await i.getDimensions(a.floating);return y!==V.width||v!==V.height?{reset:{rects:!0}}:{}}}};function k4(){return typeof window<"u"}function Eb(e){return VG(e)?(e.nodeName||"").toLowerCase():"#document"}function Wl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ed(e){var t;return(t=(VG(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function VG(e){return k4()?e instanceof Node||e instanceof Wl(e).Node:!1}function xu(e){return k4()?e instanceof Element||e instanceof Wl(e).Element:!1}function vd(e){return k4()?e instanceof HTMLElement||e instanceof Wl(e).HTMLElement:!1}function GL(e){return!k4()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Wl(e).ShadowRoot}const Ixe=new Set(["inline","contents"]);function uw(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=wu(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Ixe.has(s)}const Rxe=new Set(["table","td","th"]);function Mxe(e){return Rxe.has(Eb(e))}const Oxe=[":popover-open",":modal"];function A4(e){return Oxe.some(t=>{try{return e.matches(t)}catch{return!1}})}const Dxe=["transform","translate","scale","rotate","perspective"],Pxe=["transform","translate","scale","rotate","perspective","filter"],Lxe=["paint","layout","strict","content"];function IR(e){const t=RR(),n=xu(e)?wu(e):e;return Dxe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Pxe.some(r=>(n.willChange||"").includes(r))||Lxe.some(r=>(n.contain||"").includes(r))}function $xe(e){let t=E0(e);for(;vd(t)&&!j1(t);){if(IR(t))return t;if(A4(t))return null;t=E0(t)}return null}function RR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Fxe=new Set(["html","body","#document"]);function j1(e){return Fxe.has(Eb(e))}function wu(e){return Wl(e).getComputedStyle(e)}function N4(e){return xu(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function E0(e){if(Eb(e)==="html")return e;const t=e.assignedSlot||e.parentNode||GL(e)&&e.host||Ed(e);return GL(t)?t.host:t}function qG(e){const t=E0(e);return j1(t)?e.ownerDocument?e.ownerDocument.body:e.body:vd(t)&&uw(t)?t:qG(t)}function lx(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=qG(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),i=Wl(s);if(o){const a=NN(i);return t.concat(i,i.visualViewport||[],uw(s)?s:[],a&&n?lx(a):[])}return t.concat(s,lx(s,[],n))}function NN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function GG(e){const t=wu(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=vd(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r,a=sS(n)!==o||sS(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function MR(e){return xu(e)?e:e.contextElement}function _1(e){const t=MR(e);if(!vd(t))return bd(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=GG(t);let i=(o?sS(n.width):n.width)/r,a=(o?sS(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const Bxe=bd(0);function WG(e){const t=Wl(e);return!RR()||!t.visualViewport?Bxe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function zxe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Wl(e)?!1:t}function lm(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=MR(e);let i=bd(1);t&&(r?xu(r)&&(i=_1(r)):i=_1(e));const a=zxe(o,n,r)?WG(o):bd(0);let l=(s.left+a.x)/i.x,c=(s.top+a.y)/i.y,u=s.width/i.x,f=s.height/i.y;if(o){const m=Wl(o),g=r&&xu(r)?Wl(r):r;let y=m,v=NN(y);for(;v&&r&&g!==y;){const x=_1(v),E=v.getBoundingClientRect(),T=wu(v),k=E.left+(v.clientLeft+parseFloat(T.paddingLeft))*x.x,I=E.top+(v.clientTop+parseFloat(T.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,f*=x.y,l+=k,c+=I,y=Wl(v),v=NN(y)}}return B1({width:u,height:f,x:l,y:c})}function I4(e,t){const n=N4(e).scrollLeft;return t?t.left+n:lm(Ed(e)).left+n}function YG(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-I4(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function jxe(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",i=Ed(r),a=t?A4(t.floating):!1;if(r===i||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=bd(1);const u=bd(0),f=vd(r);if((f||!f&&!o)&&((Eb(r)!=="body"||uw(i))&&(l=N4(r)),vd(r))){const g=lm(r);c=_1(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const m=i&&!f&&!o?YG(i,l):bd(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:n.y*c.y-l.scrollTop*c.y+u.y+m.y}}function Uxe(e){return Array.from(e.getClientRects())}function Hxe(e){const t=Ed(e),n=N4(e),r=e.ownerDocument.body,s=ha(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=ha(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+I4(e);const a=-n.scrollTop;return wu(r).direction==="rtl"&&(i+=ha(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}const WL=25;function Vxe(e,t){const n=Wl(e),r=Ed(e),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const u=RR();(!u||u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=I4(r);if(c<=0){const u=r.ownerDocument,f=u.body,m=getComputedStyle(f),g=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,y=Math.abs(r.clientWidth-f.clientWidth-g);y<=WL&&(o-=y)}else c<=WL&&(o+=c);return{width:o,height:i,x:a,y:l}}const qxe=new Set(["absolute","fixed"]);function Gxe(e,t){const n=lm(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=vd(e)?_1(e):bd(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,l=s*o.x,c=r*o.y;return{width:i,height:a,x:l,y:c}}function YL(e,t,n){let r;if(t==="viewport")r=Vxe(e,n);else if(t==="document")r=Hxe(Ed(e));else if(xu(t))r=Gxe(t,n);else{const s=WG(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return B1(r)}function KG(e,t){const n=E0(e);return n===t||!xu(n)||j1(n)?!1:wu(n).position==="fixed"||KG(n,t)}function Wxe(e,t){const n=t.get(e);if(n)return n;let r=lx(e,[],!1).filter(a=>xu(a)&&Eb(a)!=="body"),s=null;const o=wu(e).position==="fixed";let i=o?E0(e):e;for(;xu(i)&&!j1(i);){const a=wu(i),l=IR(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&qxe.has(s.position)||uw(i)&&!l&&KG(e,i))?r=r.filter(u=>u!==i):s=a,i=E0(i)}return t.set(e,r),r}function Yxe(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?A4(t)?[]:Wxe(t,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const f=YL(t,u,s);return c.top=ha(f.top,c.top),c.right=yu(f.right,c.right),c.bottom=yu(f.bottom,c.bottom),c.left=ha(f.left,c.left),c},YL(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Kxe(e){const{width:t,height:n}=GG(e);return{width:t,height:n}}function Zxe(e,t,n){const r=vd(t),s=Ed(t),o=n==="fixed",i=lm(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=bd(0);function c(){l.x=I4(s)}if(r||!r&&!o)if((Eb(t)!=="body"||uw(s))&&(a=N4(t)),r){const g=lm(t,!0,o,t);l.x=g.x+t.clientLeft,l.y=g.y+t.clientTop}else s&&c();o&&!r&&s&&c();const u=s&&!r&&!o?YG(s,a):bd(0),f=i.left+a.scrollLeft-l.x-u.x,m=i.top+a.scrollTop-l.y-u.y;return{x:f,y:m,width:i.width,height:i.height}}function $3(e){return wu(e).position==="static"}function KL(e,t){if(!vd(e)||wu(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ed(e)===n&&(n=n.ownerDocument.body),n}function ZG(e,t){const n=Wl(e);if(A4(e))return n;if(!vd(e)){let s=E0(e);for(;s&&!j1(s);){if(xu(s)&&!$3(s))return s;s=E0(s)}return n}let r=KL(e,t);for(;r&&Mxe(r)&&$3(r);)r=KL(r,t);return r&&j1(r)&&$3(r)&&!IR(r)?n:r||$xe(e)||n}const Jxe=async function(e){const t=this.getOffsetParent||ZG,n=this.getDimensions,r=await n(e.floating);return{reference:Zxe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Xxe(e){return wu(e).direction==="rtl"}const Qxe={convertOffsetParentRelativeRectToViewportRelativeRect:jxe,getDocumentElement:Ed,getClippingRect:Yxe,getOffsetParent:ZG,getElementRects:Jxe,getClientRects:Uxe,getDimensions:Kxe,getScale:_1,isElement:xu,isRTL:Xxe};function JG(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ewe(e,t){let n=null,r;const s=Ed(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const c=e.getBoundingClientRect(),{left:u,top:f,width:m,height:g}=c;if(a||t(),!m||!g)return;const y=c2(f),v=c2(s.clientWidth-(u+m)),x=c2(s.clientHeight-(f+g)),E=c2(u),k={rootMargin:-y+"px "+-v+"px "+-x+"px "+-E+"px",threshold:ha(0,yu(1,l))||1};let I=!0;function O(M){const P=M[0].intersectionRatio;if(P!==l){if(!I)return i();P?i(!1,P):r=setTimeout(()=>{i(!1,1e-7)},1e3)}P===1&&!JG(c,e.getBoundingClientRect())&&i(),I=!1}try{n=new IntersectionObserver(O,{...k,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,k)}n.observe(e)}return i(!0),o}function twe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=MR(e),u=s||o?[...c?lx(c):[],...lx(t)]:[];u.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),o&&E.addEventListener("resize",n)});const f=c&&a?ewe(c,n):null;let m=-1,g=null;i&&(g=new ResizeObserver(E=>{let[T]=E;T&&T.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var k;(k=g)==null||k.observe(t)})),n()}),c&&!l&&g.observe(c),g.observe(t));let y,v=l?lm(e):null;l&&x();function x(){const E=lm(e);v&&!JG(v,E)&&n(),v=E,y=requestAnimationFrame(x)}return n(),()=>{var E;u.forEach(T=>{s&&T.removeEventListener("scroll",n),o&&T.removeEventListener("resize",n)}),f==null||f(),(E=g)==null||E.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const OR=Cxe,XG=xxe,DR=kxe,PR=wxe,LR=Nxe,$R=Exe,aS=yxe,QG=Sxe,nwe=Axe,FR=(e,t,n)=>{const r=new Map,s={platform:Qxe,...n},o={...s.platform,_c:r};return bxe(e,t,{...s,platform:o})};var rwe=typeof document<"u",swe=function(){},T_=rwe?w.useLayoutEffect:swe;function lS(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!lS(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!lS(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function eW(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ZL(e,t){const n=eW(e);return Math.round(t*n)/n}function F3(e){const t=w.useRef(e);return T_(()=>{t.current=e}),t}function owe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,f]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=w.useState(r);lS(m,r)||g(r);const[y,v]=w.useState(null),[x,E]=w.useState(null),T=w.useCallback(re=>{re!==M.current&&(M.current=re,v(re))},[]),k=w.useCallback(re=>{re!==P.current&&(P.current=re,E(re))},[]),I=o||y,O=i||x,M=w.useRef(null),P=w.useRef(null),j=w.useRef(u),V=l!=null,U=F3(l),z=F3(s),H=F3(c),F=w.useCallback(()=>{if(!M.current||!P.current)return;const re={placement:t,strategy:n,middleware:m};z.current&&(re.platform=z.current),FR(M.current,P.current,re).then(ie=>{const Z={...ie,isPositioned:H.current!==!1};G.current&&!lS(j.current,Z)&&(j.current=Z,dl.flushSync(()=>{f(Z)}))})},[m,t,n,z,H]);T_(()=>{c===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,f(re=>({...re,isPositioned:!1})))},[c]);const G=w.useRef(!1);T_(()=>(G.current=!0,()=>{G.current=!1}),[]),T_(()=>{if(I&&(M.current=I),O&&(P.current=O),I&&O){if(U.current)return U.current(I,O,F);F()}},[I,O,F,U,V]);const X=w.useMemo(()=>({reference:M,floating:P,setReference:T,setFloating:k}),[T,k]),J=w.useMemo(()=>({reference:I,floating:O}),[I,O]),ee=w.useMemo(()=>{const re={position:n,left:0,top:0};if(!J.floating)return re;const ie=ZL(J.floating,u.x),Z=ZL(J.floating,u.y);return a?{...re,transform:"translate("+ie+"px, "+Z+"px)",...eW(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:Z}},[n,a,J.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:F,refs:X,elements:J,floatingStyles:ee}),[u,F,X,J,ee])}const iwe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?aS({element:r.current,padding:s}).fn(n):{}:r?aS({element:r,padding:s}).fn(n):{}}}},awe=(e,t)=>({...OR(e),options:[e,t]}),lwe=(e,t)=>({...DR(e),options:[e,t]}),cwe=(e,t)=>({...nwe(e),options:[e,t]}),uwe=(e,t)=>({...PR(e),options:[e,t]}),dwe=(e,t)=>({...LR(e),options:[e,t]}),fwe=(e,t)=>({...$R(e),options:[e,t]}),hwe=(e,t)=>({...iwe(e),options:[e,t]});var pwe="Arrow",tW=w.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return h.jsx(Ln.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});tW.displayName=pwe;var mwe=tW;function R4(e){const[t,n]=w.useState(void 0);return Ni(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var BR="Popper",[nW,F0]=za(BR),[gwe,rW]=nW(BR),sW=e=>{const{__scopePopper:t,children:n}=e,[r,s]=w.useState(null);return h.jsx(gwe,{scope:t,anchor:r,onAnchorChange:s,children:n})};sW.displayName=BR;var oW="PopperAnchor",iW=w.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=rW(oW,n),i=w.useRef(null),a=Nr(t,i),l=w.useRef(null);return w.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||i.current,c!==l.current&&o.onAnchorChange(l.current)}),r?null:h.jsx(Ln.div,{...s,ref:a})});iW.displayName=oW;var zR="PopperContent",[bwe,ywe]=nW(zR),aW=w.forwardRef((e,t)=>{var fe,Fe,De,Re,tt,de;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:y,...v}=e,x=rW(zR,n),[E,T]=w.useState(null),k=Nr(t,nt=>T(nt)),[I,O]=w.useState(null),M=R4(I),P=(M==null?void 0:M.width)??0,j=(M==null?void 0:M.height)??0,V=r+(o!=="center"?"-"+o:""),U=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},z=Array.isArray(c)?c:[c],H=z.length>0,F={padding:U,boundary:z.filter(xwe),altBoundary:H},{refs:G,floatingStyles:X,placement:J,isPositioned:ee,middlewareData:re}=owe({strategy:"fixed",placement:V,whileElementsMounted:(...nt)=>twe(...nt,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[awe({mainAxis:s+j,alignmentAxis:i}),l&&lwe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?cwe():void 0,...F}),l&&uwe({...F}),dwe({...F,apply:({elements:nt,rects:ot,availableWidth:Ut,availableHeight:Vt})=>{const{width:Dt,height:en}=ot.reference,xt=nt.floating.style;xt.setProperty("--radix-popper-available-width",`${Ut}px`),xt.setProperty("--radix-popper-available-height",`${Vt}px`),xt.setProperty("--radix-popper-anchor-width",`${Dt}px`),xt.setProperty("--radix-popper-anchor-height",`${en}px`)}}),I&&hwe({element:I,padding:a}),wwe({arrowWidth:P,arrowHeight:j}),m&&fwe({strategy:"referenceHidden",...F})]}),[ie,Z]=uW(J),te=bu(y);Ni(()=>{ee&&(te==null||te())},[ee,te]);const oe=(fe=re.arrow)==null?void 0:fe.x,Q=(Fe=re.arrow)==null?void 0:Fe.y,Te=((De=re.arrow)==null?void 0:De.centerOffset)!==0,[ge,Ce]=w.useState();return Ni(()=>{E&&Ce(window.getComputedStyle(E).zIndex)},[E]),h.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:ee?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[(Re=re.transformOrigin)==null?void 0:Re.x,(tt=re.transformOrigin)==null?void 0:tt.y].join(" "),...((de=re.hide)==null?void 0:de.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(bwe,{scope:n,placedSide:ie,onArrowChange:O,arrowX:oe,arrowY:Q,shouldHideArrow:Te,children:h.jsx(Ln.div,{"data-side":ie,"data-align":Z,...v,ref:k,style:{...v.style,animation:ee?void 0:"none"}})})})});aW.displayName=zR;var lW="PopperArrow",vwe={top:"bottom",right:"left",bottom:"top",left:"right"},cW=w.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=ywe(lW,r),i=vwe[o.placedSide];return h.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:h.jsx(mwe,{...s,ref:n,style:{...s.style,display:"block"}})})});cW.displayName=lW;function xwe(e){return e!==null}var wwe=e=>({name:"transformOrigin",options:e,fn(t){var x,E,T;const{placement:n,rects:r,middlewareData:s}=t,i=((x=s.arrow)==null?void 0:x.centerOffset)!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[c,u]=uW(n),f={start:"0%",center:"50%",end:"100%"}[u],m=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,g=(((T=s.arrow)==null?void 0:T.y)??0)+l/2;let y="",v="";return c==="bottom"?(y=i?f:`${m}px`,v=`${-l}px`):c==="top"?(y=i?f:`${m}px`,v=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,v=i?f:`${g}px`):c==="left"&&(y=`${r.floating.width+l}px`,v=i?f:`${g}px`),{data:{x:y,y:v}}}});function uW(e){const[t,n="center"]=e.split("-");return[t,n]}var M4=sW,dw=iW,O4=aW,D4=cW,Ewe="Portal",fw=w.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[s,o]=w.useState(!1);Ni(()=>o(!0),[]);const i=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?ER.createPortal(h.jsx(Ln.div,{...r,ref:t}),i):null});fw.displayName=Ewe;var dW=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_we="VisuallyHidden",fW=w.forwardRef((e,t)=>h.jsx(Ln.span,{...e,ref:t,style:{...dW,...e.style}}));fW.displayName=_we;var Swe=fW,[P4]=za("Tooltip",[F0]),L4=F0(),hW="TooltipProvider",Twe=700,IN="tooltip.open",[Cwe,jR]=P4(hW),pW=e=>{const{__scopeTooltip:t,delayDuration:n=Twe,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,i=w.useRef(!0),a=w.useRef(!1),l=w.useRef(0);return w.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),h.jsx(Cwe,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:w.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:w.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:o})};pW.displayName=hW;var cx="Tooltip",[kwe,$4]=P4(cx),mW=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:o,disableHoverableContent:i,delayDuration:a}=e,l=jR(cx,e.__scopeTooltip),c=L4(t),[u,f]=w.useState(null),m=Ic(),g=w.useRef(0),y=i??l.disableHoverableContent,v=a??l.delayDuration,x=w.useRef(!1),[E,T]=ml({prop:r,defaultProp:s??!1,onChange:P=>{P?(l.onOpen(),document.dispatchEvent(new CustomEvent(IN))):l.onClose(),o==null||o(P)},caller:cx}),k=w.useMemo(()=>E?x.current?"delayed-open":"instant-open":"closed",[E]),I=w.useCallback(()=>{window.clearTimeout(g.current),g.current=0,x.current=!1,T(!0)},[T]),O=w.useCallback(()=>{window.clearTimeout(g.current),g.current=0,T(!1)},[T]),M=w.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{x.current=!0,T(!0),g.current=0},v)},[v,T]);return w.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),h.jsx(M4,{...c,children:h.jsx(kwe,{scope:t,contentId:m,open:E,stateAttribute:k,trigger:u,onTriggerChange:f,onTriggerEnter:w.useCallback(()=>{l.isOpenDelayedRef.current?M():I()},[l.isOpenDelayedRef,M,I]),onTriggerLeave:w.useCallback(()=>{y?O():(window.clearTimeout(g.current),g.current=0)},[O,y]),onOpen:I,onClose:O,disableHoverableContent:y,children:n})})};mW.displayName=cx;var RN="TooltipTrigger",gW=w.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=$4(RN,n),o=jR(RN,n),i=L4(n),a=w.useRef(null),l=Nr(t,a,s.onTriggerChange),c=w.useRef(!1),u=w.useRef(!1),f=w.useCallback(()=>c.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),h.jsx(dw,{asChild:!0,...i,children:h.jsx(Ln.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Gt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:Gt(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Gt(e.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Gt(e.onFocus,()=>{c.current||s.onOpen()}),onBlur:Gt(e.onBlur,s.onClose),onClick:Gt(e.onClick,s.onClose)})})});gW.displayName=RN;var Awe="TooltipPortal",[u0t,Nwe]=P4(Awe,{forceMount:void 0}),U1="TooltipContent",bW=w.forwardRef((e,t)=>{const n=Nwe(U1,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,i=$4(U1,e.__scopeTooltip);return h.jsx(gl,{present:r||i.open,children:i.disableHoverableContent?h.jsx(yW,{side:s,...o,ref:t}):h.jsx(Iwe,{side:s,...o,ref:t})})}),Iwe=w.forwardRef((e,t)=>{const n=$4(U1,e.__scopeTooltip),r=jR(U1,e.__scopeTooltip),s=w.useRef(null),o=Nr(t,s),[i,a]=w.useState(null),{trigger:l,onClose:c}=n,u=s.current,{onPointerInTransitChange:f}=r,m=w.useCallback(()=>{a(null),f(!1)},[f]),g=w.useCallback((y,v)=>{const x=y.currentTarget,E={x:y.clientX,y:y.clientY},T=Pwe(E,x.getBoundingClientRect()),k=Lwe(E,T),I=$we(v.getBoundingClientRect()),O=Bwe([...k,...I]);a(O),f(!0)},[f]);return w.useEffect(()=>()=>m(),[m]),w.useEffect(()=>{if(l&&u){const y=x=>g(x,u),v=x=>g(x,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",v)}}},[l,u,g,m]),w.useEffect(()=>{if(i){const y=v=>{const x=v.target,E={x:v.clientX,y:v.clientY},T=(l==null?void 0:l.contains(x))||(u==null?void 0:u.contains(x)),k=!Fwe(E,i);T?m():k&&(m(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,i,c,m]),h.jsx(yW,{...e,ref:o})}),[Rwe,Mwe]=P4(cx,{isInside:!1}),Owe=lve("TooltipContent"),yW=w.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...a}=e,l=$4(U1,n),c=L4(n),{onClose:u}=l;return w.useEffect(()=>(document.addEventListener(IN,u),()=>document.removeEventListener(IN,u)),[u]),w.useEffect(()=>{if(l.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),h.jsx(wb,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:h.jsxs(O4,{"data-state":l.stateAttribute,...c,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(Owe,{children:r}),h.jsx(Rwe,{scope:n,isInside:!0,children:h.jsx(Swe,{id:l.contentId,role:"tooltip",children:s||r})})]})})});bW.displayName=U1;var vW="TooltipArrow",Dwe=w.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=L4(n);return Mwe(vW,n).isInside?null:h.jsx(D4,{...s,...r,ref:t})});Dwe.displayName=vW;function Pwe(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Lwe(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function $we(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function Fwe(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const a=t[o],l=t[i],c=a.x,u=a.y,f=l.x,m=l.y;u>r!=m>r&&n<(f-c)*(r-u)/(m-u)+c&&(s=!s)}return s}function Bwe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),zwe(t)}function zwe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var jwe=pW,Uwe=mW,Hwe=gW,xW=bW;const H1=jwe,V1=Uwe,q1=Hwe,cm=w.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(xW,{ref:r,sideOffset:t,className:Qe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));cm.displayName=xW.displayName;var Vwe="Separator",JL="horizontal",qwe=["horizontal","vertical"],wW=w.forwardRef((e,t)=>{const{decorative:n,orientation:r=JL,...s}=e,o=Gwe(r)?r:JL,a=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return h.jsx(Nm.div,{"data-orientation":o,...a,...s,ref:t})});wW.displayName=Vwe;function Gwe(e){return qwe.includes(e)}var EW=wW;const $f=w.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>h.jsx(EW,{ref:s,decorative:n,orientation:t,className:Qe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));$f.displayName=EW.displayName;var B3="focusScope.autoFocusOnMount",z3="focusScope.autoFocusOnUnmount",XL={bubbles:!1,cancelable:!0},Wwe="FocusScope",hw=w.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=e,[a,l]=w.useState(null),c=bu(s),u=bu(o),f=w.useRef(null),m=Nr(t,v=>l(v)),g=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let v=function(k){if(g.paused||!a)return;const I=k.target;a.contains(I)?f.current=I:Kh(f.current,{select:!0})},x=function(k){if(g.paused||!a)return;const I=k.relatedTarget;I!==null&&(a.contains(I)||Kh(f.current,{select:!0}))},E=function(k){if(document.activeElement===document.body)for(const O of k)O.removedNodes.length>0&&Kh(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const T=new MutationObserver(E);return a&&T.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),T.disconnect()}}},[r,a,g.paused]),w.useEffect(()=>{if(a){e$.add(g);const v=document.activeElement;if(!a.contains(v)){const E=new CustomEvent(B3,XL);a.addEventListener(B3,c),a.dispatchEvent(E),E.defaultPrevented||(Ywe(Qwe(_W(a)),{select:!0}),document.activeElement===v&&Kh(a))}return()=>{a.removeEventListener(B3,c),setTimeout(()=>{const E=new CustomEvent(z3,XL);a.addEventListener(z3,u),a.dispatchEvent(E),E.defaultPrevented||Kh(v??document.body,{select:!0}),a.removeEventListener(z3,u),e$.remove(g)},0)}}},[a,c,u,g]);const y=w.useCallback(v=>{if(!n&&!r||g.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,E=document.activeElement;if(x&&E){const T=v.currentTarget,[k,I]=Kwe(T);k&&I?!v.shiftKey&&E===I?(v.preventDefault(),n&&Kh(k,{select:!0})):v.shiftKey&&E===k&&(v.preventDefault(),n&&Kh(I,{select:!0})):E===T&&v.preventDefault()}},[n,r,g.paused]);return h.jsx(Ln.div,{tabIndex:-1,...i,ref:m,onKeyDown:y})});hw.displayName=Wwe;function Ywe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Kh(r,{select:t}),document.activeElement!==n)return}function Kwe(e){const t=_W(e),n=QL(t,e),r=QL(t.reverse(),e);return[n,r]}function _W(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function QL(e,t){for(const n of e)if(!Zwe(n,{upTo:t}))return n}function Zwe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Jwe(e){return e instanceof HTMLInputElement&&"select"in e}function Kh(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Jwe(e)&&t&&e.select()}}var e$=Xwe();function Xwe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=t$(e,t),e.unshift(t)},remove(t){var n;e=t$(e,t),(n=e[0])==null||n.resume()}}}function t$(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Qwe(e){return e.filter(t=>t.tagName!=="A")}var j3=0;function F4(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??n$()),document.body.insertAdjacentElement("beforeend",e[1]??n$()),j3++,()=>{j3===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),j3--}},[])}function n$(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var dd=function(){return dd=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},dd.apply(this,arguments)};function SW(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function eEe(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var C_="right-scroll-bar-position",k_="width-before-scroll-bar",tEe="with-scroll-bars-hidden",nEe="--removed-body-scroll-bar-size";function U3(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function rEe(e,t){var n=w.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var sEe=typeof window<"u"?w.useLayoutEffect:w.useEffect,r$=new WeakMap;function oEe(e,t){var n=rEe(null,function(r){return e.forEach(function(s){return U3(s,r)})});return sEe(function(){var r=r$.get(n);if(r){var s=new Set(r),o=new Set(e),i=n.current;s.forEach(function(a){o.has(a)||U3(a,null)}),o.forEach(function(a){s.has(a)||U3(a,i)})}r$.set(n,e)},[e]),n}function iEe(e){return e}function aEe(e,t){t===void 0&&(t=iEe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(o){for(r=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(o),i=n}var l=function(){var u=i;i=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){i.push(u),c()},filter:function(u){return i=i.filter(u),n}}}};return s}function lEe(e){e===void 0&&(e={});var t=aEe(null);return t.options=dd({async:!0,ssr:!1},e),t}var TW=function(e){var t=e.sideCar,n=SW(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,dd({},n))};TW.isSideCarExport=!0;function cEe(e,t){return e.useMedium(t),TW}var CW=lEe(),H3=function(){},B4=w.forwardRef(function(e,t){var n=w.useRef(null),r=w.useState({onScrollCapture:H3,onWheelCapture:H3,onTouchMoveCapture:H3}),s=r[0],o=r[1],i=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,f=e.shards,m=e.sideCar,g=e.noRelative,y=e.noIsolation,v=e.inert,x=e.allowPinchZoom,E=e.as,T=E===void 0?"div":E,k=e.gapMode,I=SW(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=m,M=oEe([n,t]),P=dd(dd({},I),s);return w.createElement(w.Fragment,null,u&&w.createElement(O,{sideCar:CW,removeScrollBar:c,shards:f,noRelative:g,noIsolation:y,inert:v,setCallbacks:o,allowPinchZoom:!!x,lockRef:n,gapMode:k}),i?w.cloneElement(w.Children.only(a),dd(dd({},P),{ref:M})):w.createElement(T,dd({},P,{className:l,ref:M}),a))});B4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};B4.classNames={fullWidth:k_,zeroRight:C_};var uEe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function dEe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=uEe();return t&&e.setAttribute("nonce",t),e}function fEe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function hEe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var pEe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=dEe())&&(fEe(t,n),hEe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},mEe=function(){var e=pEe();return function(t,n){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},kW=function(){var e=mEe(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},gEe={left:0,top:0,right:0,gap:0},V3=function(e){return parseInt(e||"",10)||0},bEe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[V3(n),V3(r),V3(s)]},yEe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return gEe;var t=bEe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},vEe=kW(),S1="data-scroll-locked",xEe=function(e,t,n,r){var s=e.left,o=e.top,i=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(tEe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(S1,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(C_,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(k_,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(C_," .").concat(C_,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(k_," .").concat(k_,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(S1,`] {
    `).concat(nEe,": ").concat(a,`px;
  }
`)},s$=function(){var e=parseInt(document.body.getAttribute(S1)||"0",10);return isFinite(e)?e:0},wEe=function(){w.useEffect(function(){return document.body.setAttribute(S1,(s$()+1).toString()),function(){var e=s$()-1;e<=0?document.body.removeAttribute(S1):document.body.setAttribute(S1,e.toString())}},[])},EEe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;wEe();var o=w.useMemo(function(){return yEe(s)},[s]);return w.createElement(vEe,{styles:xEe(o,!t,s,n?"":"!important")})},MN=!1;if(typeof window<"u")try{var u2=Object.defineProperty({},"passive",{get:function(){return MN=!0,!0}});window.addEventListener("test",u2,u2),window.removeEventListener("test",u2,u2)}catch{MN=!1}var jg=MN?{passive:!1}:!1,_Ee=function(e){return e.tagName==="TEXTAREA"},AW=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!_Ee(e)&&n[t]==="visible")},SEe=function(e){return AW(e,"overflowY")},TEe=function(e){return AW(e,"overflowX")},o$=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=NW(e,r);if(s){var o=IW(e,r),i=o[1],a=o[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},CEe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},kEe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},NW=function(e,t){return e==="v"?SEe(t):TEe(t)},IW=function(e,t){return e==="v"?CEe(t):kEe(t)},AEe=function(e,t){return e==="h"&&t==="rtl"?-1:1},NEe=function(e,t,n,r,s){var o=AEe(e,window.getComputedStyle(t).direction),i=o*r,a=n.target,l=t.contains(a),c=!1,u=i>0,f=0,m=0;do{if(!a)break;var g=IW(e,a),y=g[0],v=g[1],x=g[2],E=v-x-o*y;(y||E)&&NW(e,a)&&(f+=E,m+=y);var T=a.parentNode;a=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(f)<1||!u&&Math.abs(m)<1)&&(c=!0),c},d2=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},i$=function(e){return[e.deltaX,e.deltaY]},a$=function(e){return e&&"current"in e?e.current:e},IEe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},REe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},MEe=0,Ug=[];function OEe(e){var t=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),s=w.useState(MEe++)[0],o=w.useState(kW)[0],i=w.useRef(e);w.useEffect(function(){i.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=eEe([e.lockRef.current],(e.shards||[]).map(a$),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=w.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var E=d2(v),T=n.current,k="deltaX"in v?v.deltaX:T[0]-E[0],I="deltaY"in v?v.deltaY:T[1]-E[1],O,M=v.target,P=Math.abs(k)>Math.abs(I)?"h":"v";if("touches"in v&&P==="h"&&M.type==="range")return!1;var j=window.getSelection(),V=j&&j.anchorNode,U=V?V===M||V.contains(M):!1;if(U)return!1;var z=o$(P,M);if(!z)return!0;if(z?O=P:(O=P==="v"?"h":"v",z=o$(P,M)),!z)return!1;if(!r.current&&"changedTouches"in v&&(k||I)&&(r.current=O),!O)return!0;var H=r.current||O;return NEe(H,x,v,H==="h"?k:I)},[]),l=w.useCallback(function(v){var x=v;if(!(!Ug.length||Ug[Ug.length-1]!==o)){var E="deltaY"in x?i$(x):d2(x),T=t.current.filter(function(O){return O.name===x.type&&(O.target===x.target||x.target===O.shadowParent)&&IEe(O.delta,E)})[0];if(T&&T.should){x.cancelable&&x.preventDefault();return}if(!T){var k=(i.current.shards||[]).map(a$).filter(Boolean).filter(function(O){return O.contains(x.target)}),I=k.length>0?a(x,k[0]):!i.current.noIsolation;I&&x.cancelable&&x.preventDefault()}}},[]),c=w.useCallback(function(v,x,E,T){var k={name:v,delta:x,target:E,should:T,shadowParent:DEe(E)};t.current.push(k),setTimeout(function(){t.current=t.current.filter(function(I){return I!==k})},1)},[]),u=w.useCallback(function(v){n.current=d2(v),r.current=void 0},[]),f=w.useCallback(function(v){c(v.type,i$(v),v.target,a(v,e.lockRef.current))},[]),m=w.useCallback(function(v){c(v.type,d2(v),v.target,a(v,e.lockRef.current))},[]);w.useEffect(function(){return Ug.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,jg),document.addEventListener("touchmove",l,jg),document.addEventListener("touchstart",u,jg),function(){Ug=Ug.filter(function(v){return v!==o}),document.removeEventListener("wheel",l,jg),document.removeEventListener("touchmove",l,jg),document.removeEventListener("touchstart",u,jg)}},[]);var g=e.removeScrollBar,y=e.inert;return w.createElement(w.Fragment,null,y?w.createElement(o,{styles:REe(s)}):null,g?w.createElement(EEe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function DEe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const PEe=cEe(CW,OEe);var pw=w.forwardRef(function(e,t){return w.createElement(B4,dd({},e,{ref:t,sideCar:PEe}))});pw.classNames=B4.classNames;var LEe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Hg=new WeakMap,f2=new WeakMap,h2={},q3=0,RW=function(e){return e&&(e.host||RW(e.parentNode))},$Ee=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=RW(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},FEe=function(e,t,n,r){var s=$Ee(t,Array.isArray(e)?e:[e]);h2[n]||(h2[n]=new WeakMap);var o=h2[n],i=[],a=new Set,l=new Set(s),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};s.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))u(m);else try{var g=m.getAttribute(r),y=g!==null&&g!=="false",v=(Hg.get(m)||0)+1,x=(o.get(m)||0)+1;Hg.set(m,v),o.set(m,x),i.push(m),v===1&&y&&f2.set(m,!0),x===1&&m.setAttribute(n,"true"),y||m.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",m,E)}})};return u(t),a.clear(),q3++,function(){i.forEach(function(f){var m=Hg.get(f)-1,g=o.get(f)-1;Hg.set(f,m),o.set(f,g),m||(f2.has(f)||f.removeAttribute(r),f2.delete(f)),g||f.removeAttribute(n)}),q3--,q3||(Hg=new WeakMap,Hg=new WeakMap,f2=new WeakMap,h2={})}},z4=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=LEe(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),FEe(r,s,n,"aria-hidden")):function(){return null}},j4="Dialog",[MW]=za(j4),[BEe,ku]=MW(j4),OW=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!0}=e,a=w.useRef(null),l=w.useRef(null),[c,u]=ml({prop:r,defaultProp:s??!1,onChange:o,caller:j4});return h.jsx(BEe,{scope:t,triggerRef:a,contentRef:l,contentId:Ic(),titleId:Ic(),descriptionId:Ic(),open:c,onOpenChange:u,onOpenToggle:w.useCallback(()=>u(f=>!f),[u]),modal:i,children:n})};OW.displayName=j4;var DW="DialogTrigger",PW=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ku(DW,n),o=Nr(t,s.triggerRef);return h.jsx(Ln.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":VR(s.open),...r,ref:o,onClick:Gt(e.onClick,s.onOpenToggle)})});PW.displayName=DW;var UR="DialogPortal",[zEe,LW]=MW(UR,{forceMount:void 0}),$W=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=ku(UR,t);return h.jsx(zEe,{scope:t,forceMount:n,children:w.Children.map(r,i=>h.jsx(gl,{present:n||o.open,children:h.jsx(fw,{asChild:!0,container:s,children:i})}))})};$W.displayName=UR;var cS="DialogOverlay",FW=w.forwardRef((e,t)=>{const n=LW(cS,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=ku(cS,e.__scopeDialog);return o.modal?h.jsx(gl,{present:r||o.open,children:h.jsx(UEe,{...s,ref:t})}):null});FW.displayName=cS;var jEe=am("DialogOverlay.RemoveScroll"),UEe=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ku(cS,n);return h.jsx(pw,{as:jEe,allowPinchZoom:!0,shards:[s.contentRef],children:h.jsx(Ln.div,{"data-state":VR(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),um="DialogContent",BW=w.forwardRef((e,t)=>{const n=LW(um,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=ku(um,e.__scopeDialog);return h.jsx(gl,{present:r||o.open,children:o.modal?h.jsx(HEe,{...s,ref:t}):h.jsx(VEe,{...s,ref:t})})});BW.displayName=um;var HEe=w.forwardRef((e,t)=>{const n=ku(um,e.__scopeDialog),r=w.useRef(null),s=Nr(t,n.contentRef,r);return w.useEffect(()=>{const o=r.current;if(o)return z4(o)},[]),h.jsx(zW,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Gt(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&o.preventDefault()}),onFocusOutside:Gt(e.onFocusOutside,o=>o.preventDefault())})}),VEe=w.forwardRef((e,t)=>{const n=ku(um,e.__scopeDialog),r=w.useRef(!1),s=w.useRef(!1);return h.jsx(zW,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),zW=w.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=e,a=ku(um,n),l=w.useRef(null),c=Nr(t,l);return F4(),h.jsxs(h.Fragment,{children:[h.jsx(hw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:h.jsx(wb,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":VR(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(qEe,{titleId:a.titleId}),h.jsx(WEe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),HR="DialogTitle",jW=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ku(HR,n);return h.jsx(Ln.h2,{id:s.titleId,...r,ref:t})});jW.displayName=HR;var UW="DialogDescription",HW=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ku(UW,n);return h.jsx(Ln.p,{id:s.descriptionId,...r,ref:t})});HW.displayName=UW;var VW="DialogClose",qW=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ku(VW,n);return h.jsx(Ln.button,{type:"button",...r,ref:t,onClick:Gt(e.onClick,()=>s.onOpenChange(!1))})});qW.displayName=VW;function VR(e){return e?"open":"closed"}var GW="DialogTitleWarning",[d0t,WW]=ove(GW,{contentName:um,titleName:HR,docsSlug:"dialog"}),qEe=({titleId:e})=>{const t=WW(GW),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},GEe="DialogDescriptionWarning",WEe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${WW(GEe).contentName}}.`;return w.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},YW=OW,YEe=PW,KW=$W,ZW=FW,JW=BW,XW=jW,KEe=HW,QW=qW;function eY({...e}){return h.jsx(YW,{"data-slot":"dialog",...e})}function ZEe({...e}){return h.jsx(YEe,{"data-slot":"dialog-trigger",...e})}function JEe({...e}){return h.jsx(KW,{"data-slot":"dialog-portal",...e})}function XEe({className:e,...t}){return h.jsx(ZW,{"data-slot":"dialog-overlay",className:Qe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function tY({className:e,children:t,...n}){return h.jsxs(JEe,{"data-slot":"dialog-portal",children:[h.jsx(XEe,{}),h.jsxs(JW,{"data-slot":"dialog-content",className:Qe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,h.jsxs(QW,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[h.jsx(qr,{}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function nY({className:e,...t}){return h.jsx("div",{"data-slot":"dialog-header",className:Qe("flex flex-col gap-2 text-center sm:text-left",e),...t})}function QEe({className:e,...t}){return h.jsx("div",{"data-slot":"dialog-footer",className:Qe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function rY({className:e,...t}){return h.jsx(XW,{"data-slot":"dialog-title",className:Qe("text-lg leading-none font-semibold",e),...t})}function e2e({className:e,...t}){return h.jsx(KEe,{"data-slot":"dialog-description",className:Qe("text-muted-foreground text-sm",e),...t})}var ON=["Enter"," "],t2e=["ArrowDown","PageUp","Home"],sY=["ArrowUp","PageDown","End"],n2e=[...t2e,...sY],r2e={ltr:[...ON,"ArrowRight"],rtl:[...ON,"ArrowLeft"]},s2e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},mw="Menu",[ux,o2e,i2e]=wR(mw),[Im,oY]=za(mw,[i2e,F0,$0]),U4=F0(),iY=$0(),[a2e,Rm]=Im(mw),[l2e,gw]=Im(mw),aY=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:o,modal:i=!0}=e,a=U4(t),[l,c]=w.useState(null),u=w.useRef(!1),f=bu(o),m=xb(s);return w.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),h.jsx(M4,{...a,children:h.jsx(a2e,{scope:t,open:n,onOpenChange:f,content:l,onContentChange:c,children:h.jsx(l2e,{scope:t,onClose:w.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:m,modal:i,children:r})})})};aY.displayName=mw;var c2e="MenuAnchor",qR=w.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=U4(n);return h.jsx(dw,{...s,...r,ref:t})});qR.displayName=c2e;var GR="MenuPortal",[u2e,lY]=Im(GR,{forceMount:void 0}),cY=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,o=Rm(GR,t);return h.jsx(u2e,{scope:t,forceMount:n,children:h.jsx(gl,{present:n||o.open,children:h.jsx(fw,{asChild:!0,container:s,children:r})})})};cY.displayName=GR;var Rc="MenuContent",[d2e,WR]=Im(Rc),uY=w.forwardRef((e,t)=>{const n=lY(Rc,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=Rm(Rc,e.__scopeMenu),i=gw(Rc,e.__scopeMenu);return h.jsx(ux.Provider,{scope:e.__scopeMenu,children:h.jsx(gl,{present:r||o.open,children:h.jsx(ux.Slot,{scope:e.__scopeMenu,children:i.modal?h.jsx(f2e,{...s,ref:t}):h.jsx(h2e,{...s,ref:t})})})})}),f2e=w.forwardRef((e,t)=>{const n=Rm(Rc,e.__scopeMenu),r=w.useRef(null),s=Nr(t,r);return w.useEffect(()=>{const o=r.current;if(o)return z4(o)},[]),h.jsx(YR,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Gt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),h2e=w.forwardRef((e,t)=>{const n=Rm(Rc,e.__scopeMenu);return h.jsx(YR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),p2e=am("MenuContent.ScrollLock"),YR=w.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:y,...v}=e,x=Rm(Rc,n),E=gw(Rc,n),T=U4(n),k=iY(n),I=o2e(n),[O,M]=w.useState(null),P=w.useRef(null),j=Nr(t,P,x.onContentChange),V=w.useRef(0),U=w.useRef(""),z=w.useRef(0),H=w.useRef(null),F=w.useRef("right"),G=w.useRef(0),X=y?pw:w.Fragment,J=y?{as:p2e,allowPinchZoom:!0}:void 0,ee=ie=>{var fe,Fe;const Z=U.current+ie,te=I().filter(De=>!De.disabled),oe=document.activeElement,Q=(fe=te.find(De=>De.ref.current===oe))==null?void 0:fe.textValue,Te=te.map(De=>De.textValue),ge=C2e(Te,Z,Q),Ce=(Fe=te.find(De=>De.textValue===ge))==null?void 0:Fe.ref.current;(function De(Re){U.current=Re,window.clearTimeout(V.current),Re!==""&&(V.current=window.setTimeout(()=>De(""),1e3))})(Z),Ce&&setTimeout(()=>Ce.focus())};w.useEffect(()=>()=>window.clearTimeout(V.current),[]),F4();const re=w.useCallback(ie=>{var te,oe;return F.current===((te=H.current)==null?void 0:te.side)&&A2e(ie,(oe=H.current)==null?void 0:oe.area)},[]);return h.jsx(d2e,{scope:n,searchRef:U,onItemEnter:w.useCallback(ie=>{re(ie)&&ie.preventDefault()},[re]),onItemLeave:w.useCallback(ie=>{var Z;re(ie)||((Z=P.current)==null||Z.focus(),M(null))},[re]),onTriggerLeave:w.useCallback(ie=>{re(ie)&&ie.preventDefault()},[re]),pointerGraceTimerRef:z,onPointerGraceIntentChange:w.useCallback(ie=>{H.current=ie},[]),children:h.jsx(X,{...J,children:h.jsx(hw,{asChild:!0,trapped:s,onMountAutoFocus:Gt(o,ie=>{var Z;ie.preventDefault(),(Z=P.current)==null||Z.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:h.jsx(wb,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:h.jsx(S4,{asChild:!0,...k,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:M,onEntryFocus:Gt(l,ie=>{E.isUsingKeyboardRef.current||ie.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(O4,{role:"menu","aria-orientation":"vertical","data-state":CY(x.open),"data-radix-menu-content":"",dir:E.dir,...T,...v,ref:j,style:{outline:"none",...v.style},onKeyDown:Gt(v.onKeyDown,ie=>{const te=ie.target.closest("[data-radix-menu-content]")===ie.currentTarget,oe=ie.ctrlKey||ie.altKey||ie.metaKey,Q=ie.key.length===1;te&&(ie.key==="Tab"&&ie.preventDefault(),!oe&&Q&&ee(ie.key));const Te=P.current;if(ie.target!==Te||!n2e.includes(ie.key))return;ie.preventDefault();const Ce=I().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);sY.includes(ie.key)&&Ce.reverse(),S2e(Ce)}),onBlur:Gt(e.onBlur,ie=>{ie.currentTarget.contains(ie.target)||(window.clearTimeout(V.current),U.current="")}),onPointerMove:Gt(e.onPointerMove,dx(ie=>{const Z=ie.target,te=G.current!==ie.clientX;if(ie.currentTarget.contains(Z)&&te){const oe=ie.clientX>G.current?"right":"left";F.current=oe,G.current=ie.clientX}}))})})})})})})});uY.displayName=Rc;var m2e="MenuGroup",KR=w.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Ln.div,{role:"group",...r,ref:t})});KR.displayName=m2e;var g2e="MenuLabel",dY=w.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Ln.div,{...r,ref:t})});dY.displayName=g2e;var uS="MenuItem",l$="menu.itemSelect",H4=w.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,o=w.useRef(null),i=gw(uS,e.__scopeMenu),a=WR(uS,e.__scopeMenu),l=Nr(t,o),c=w.useRef(!1),u=()=>{const f=o.current;if(!n&&f){const m=new CustomEvent(l$,{bubbles:!0,cancelable:!0});f.addEventListener(l$,g=>r==null?void 0:r(g),{once:!0}),hG(f,m),m.defaultPrevented?c.current=!1:i.onClose()}};return h.jsx(fY,{...s,ref:l,disabled:n,onClick:Gt(e.onClick,u),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),c.current=!0},onPointerUp:Gt(e.onPointerUp,f=>{var m;c.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:Gt(e.onKeyDown,f=>{const m=a.searchRef.current!=="";n||m&&f.key===" "||ON.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});H4.displayName=uS;var fY=w.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=e,i=WR(uS,n),a=iY(n),l=w.useRef(null),c=Nr(t,l),[u,f]=w.useState(!1),[m,g]=w.useState("");return w.useEffect(()=>{const y=l.current;y&&g((y.textContent??"").trim())},[o.children]),h.jsx(ux.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:h.jsx(T4,{asChild:!0,...a,focusable:!r,children:h.jsx(Ln.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:c,onPointerMove:Gt(e.onPointerMove,dx(y=>{r?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Gt(e.onPointerLeave,dx(y=>i.onItemLeave(y))),onFocus:Gt(e.onFocus,()=>f(!0)),onBlur:Gt(e.onBlur,()=>f(!1))})})})}),b2e="MenuCheckboxItem",hY=w.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return h.jsx(yY,{scope:e.__scopeMenu,checked:n,children:h.jsx(H4,{role:"menuitemcheckbox","aria-checked":dS(n)?"mixed":n,...s,ref:t,"data-state":JR(n),onSelect:Gt(s.onSelect,()=>r==null?void 0:r(dS(n)?!0:!n),{checkForDefaultPrevented:!1})})})});hY.displayName=b2e;var pY="MenuRadioGroup",[y2e,v2e]=Im(pY,{value:void 0,onValueChange:()=>{}}),mY=w.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,o=bu(r);return h.jsx(y2e,{scope:e.__scopeMenu,value:n,onValueChange:o,children:h.jsx(KR,{...s,ref:t})})});mY.displayName=pY;var gY="MenuRadioItem",bY=w.forwardRef((e,t)=>{const{value:n,...r}=e,s=v2e(gY,e.__scopeMenu),o=n===s.value;return h.jsx(yY,{scope:e.__scopeMenu,checked:o,children:h.jsx(H4,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":JR(o),onSelect:Gt(r.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});bY.displayName=gY;var ZR="MenuItemIndicator",[yY,x2e]=Im(ZR,{checked:!1}),vY=w.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,o=x2e(ZR,n);return h.jsx(gl,{present:r||dS(o.checked)||o.checked===!0,children:h.jsx(Ln.span,{...s,ref:t,"data-state":JR(o.checked)})})});vY.displayName=ZR;var w2e="MenuSeparator",xY=w.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Ln.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});xY.displayName=w2e;var E2e="MenuArrow",wY=w.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=U4(n);return h.jsx(D4,{...s,...r,ref:t})});wY.displayName=E2e;var _2e="MenuSub",[f0t,EY]=Im(_2e),uv="MenuSubTrigger",_Y=w.forwardRef((e,t)=>{const n=Rm(uv,e.__scopeMenu),r=gw(uv,e.__scopeMenu),s=EY(uv,e.__scopeMenu),o=WR(uv,e.__scopeMenu),i=w.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=o,c={__scopeMenu:e.__scopeMenu},u=w.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return w.useEffect(()=>u,[u]),w.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),h.jsx(qR,{asChild:!0,...c,children:h.jsx(fY,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":CY(n.open),...e,ref:lw(t,s.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Gt(e.onPointerMove,dx(f=>{o.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Gt(e.onPointerLeave,dx(f=>{var g,y;u();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const v=(y=n.content)==null?void 0:y.dataset.side,x=v==="right",E=x?-5:5,T=m[x?"left":"right"],k=m[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+E,y:f.clientY},{x:T,y:m.top},{x:k,y:m.top},{x:k,y:m.bottom},{x:T,y:m.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Gt(e.onKeyDown,f=>{var g;const m=o.searchRef.current!=="";e.disabled||m&&f.key===" "||r2e[r.dir].includes(f.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),f.preventDefault())})})})});_Y.displayName=uv;var SY="MenuSubContent",TY=w.forwardRef((e,t)=>{const n=lY(Rc,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=Rm(Rc,e.__scopeMenu),i=gw(Rc,e.__scopeMenu),a=EY(SY,e.__scopeMenu),l=w.useRef(null),c=Nr(t,l);return h.jsx(ux.Provider,{scope:e.__scopeMenu,children:h.jsx(gl,{present:r||o.open,children:h.jsx(ux.Slot,{scope:e.__scopeMenu,children:h.jsx(YR,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;i.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Gt(e.onFocusOutside,u=>{u.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Gt(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:Gt(e.onKeyDown,u=>{var g;const f=u.currentTarget.contains(u.target),m=s2e[i.dir].includes(u.key);f&&m&&(o.onOpenChange(!1),(g=a.trigger)==null||g.focus(),u.preventDefault())})})})})})});TY.displayName=SY;function CY(e){return e?"open":"closed"}function dS(e){return e==="indeterminate"}function JR(e){return dS(e)?"indeterminate":e?"checked":"unchecked"}function S2e(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function T2e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function C2e(e,t,n){const s=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=T2e(e,Math.max(o,0));s.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function k2e(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const a=t[o],l=t[i],c=a.x,u=a.y,f=l.x,m=l.y;u>r!=m>r&&n<(f-c)*(r-u)/(m-u)+c&&(s=!s)}return s}function A2e(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return k2e(n,t)}function dx(e){return t=>t.pointerType==="mouse"?e(t):void 0}var N2e=aY,I2e=qR,R2e=cY,M2e=uY,O2e=KR,D2e=dY,P2e=H4,L2e=hY,$2e=mY,F2e=bY,B2e=vY,z2e=xY,j2e=wY,U2e=_Y,H2e=TY,V4="DropdownMenu",[V2e]=za(V4,[oY]),ja=oY(),[q2e,kY]=V2e(V4),AY=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:i,modal:a=!0}=e,l=ja(t),c=w.useRef(null),[u,f]=ml({prop:s,defaultProp:o??!1,onChange:i,caller:V4});return h.jsx(q2e,{scope:t,triggerId:Ic(),triggerRef:c,contentId:Ic(),open:u,onOpenChange:f,onOpenToggle:w.useCallback(()=>f(m=>!m),[f]),modal:a,children:h.jsx(N2e,{...l,open:u,onOpenChange:f,dir:r,modal:a,children:n})})};AY.displayName=V4;var NY="DropdownMenuTrigger",IY=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,o=kY(NY,n),i=ja(n);return h.jsx(I2e,{asChild:!0,...i,children:h.jsx(Ln.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:lw(t,o.triggerRef),onPointerDown:Gt(e.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:Gt(e.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});IY.displayName=NY;var G2e="DropdownMenuPortal",RY=e=>{const{__scopeDropdownMenu:t,...n}=e,r=ja(t);return h.jsx(R2e,{...r,...n})};RY.displayName=G2e;var MY="DropdownMenuContent",OY=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kY(MY,n),o=ja(n),i=w.useRef(!1);return h.jsx(M2e,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:t,onCloseAutoFocus:Gt(e.onCloseAutoFocus,a=>{var l;i.current||(l=s.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:Gt(e.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});OY.displayName=MY;var W2e="DropdownMenuGroup",Y2e=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ja(n);return h.jsx(O2e,{...s,...r,ref:t})});Y2e.displayName=W2e;var K2e="DropdownMenuLabel",DY=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ja(n);return h.jsx(D2e,{...s,...r,ref:t})});DY.displayName=K2e;var Z2e="DropdownMenuItem",PY=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ja(n);return h.jsx(P2e,{...s,...r,ref:t})});PY.displayName=Z2e;var J2e="DropdownMenuCheckboxItem",X2e=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ja(n);return h.jsx(L2e,{...s,...r,ref:t})});X2e.displayName=J2e;var Q2e="DropdownMenuRadioGroup",e_e=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ja(n);return h.jsx($2e,{...s,...r,ref:t})});e_e.displayName=Q2e;var t_e="DropdownMenuRadioItem",n_e=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ja(n);return h.jsx(F2e,{...s,...r,ref:t})});n_e.displayName=t_e;var r_e="DropdownMenuItemIndicator",s_e=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ja(n);return h.jsx(B2e,{...s,...r,ref:t})});s_e.displayName=r_e;var o_e="DropdownMenuSeparator",LY=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ja(n);return h.jsx(z2e,{...s,...r,ref:t})});LY.displayName=o_e;var i_e="DropdownMenuArrow",a_e=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ja(n);return h.jsx(j2e,{...s,...r,ref:t})});a_e.displayName=i_e;var l_e="DropdownMenuSubTrigger",c_e=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ja(n);return h.jsx(U2e,{...s,...r,ref:t})});c_e.displayName=l_e;var u_e="DropdownMenuSubContent",d_e=w.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ja(n);return h.jsx(H2e,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});d_e.displayName=u_e;var f_e=AY,h_e=IY,p_e=RY,m_e=OY,g_e=DY,b_e=PY,y_e=LY;function bw({...e}){return h.jsx(f_e,{"data-slot":"dropdown-menu",...e})}function yw({...e}){return h.jsx(h_e,{"data-slot":"dropdown-menu-trigger",...e})}function vw({className:e,sideOffset:t=4,...n}){return h.jsx(p_e,{children:h.jsx(m_e,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function au({className:e,inset:t,variant:n="default",...r}){return h.jsx(b_e,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:Qe("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function v_e({className:e,inset:t,...n}){return h.jsx(g_e,{"data-slot":"dropdown-menu-label","data-inset":t,className:Qe("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function c$({className:e,...t}){return h.jsx(y_e,{"data-slot":"dropdown-menu-separator",className:Qe("bg-border -mx-1 my-1 h-px",e),...t})}function p2({className:e,...t}){return h.jsx("span",{"data-slot":"dropdown-menu-shortcut",className:Qe("text-muted-foreground ml-auto text-xs tracking-widest",e),...t})}var XR="Progress",QR=100,[x_e]=IG(XR),[w_e,E_e]=x_e(XR),$Y=w.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=__e,...i}=e;(s||s===0)&&!u$(s)&&console.error(S_e(`${s}`,"Progress"));const a=u$(s)?s:QR;r!==null&&!d$(r,a)&&console.error(T_e(`${r}`,"Progress"));const l=d$(r,a)?r:null,c=fS(l)?o(l,a):void 0;return h.jsx(w_e,{scope:n,value:l,max:a,children:h.jsx(Nm.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":fS(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":zY(l,a),"data-value":l??void 0,"data-max":a,...i,ref:t})})});$Y.displayName=XR;var FY="ProgressIndicator",BY=w.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=E_e(FY,n);return h.jsx(Nm.div,{"data-state":zY(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});BY.displayName=FY;function __e(e,t){return`${Math.round(e/t*100)}%`}function zY(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function fS(e){return typeof e=="number"}function u$(e){return fS(e)&&!isNaN(e)&&e>0}function d$(e,t){return fS(e)&&!isNaN(e)&&e<=t&&e>=0}function S_e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${QR}\`.`}function T_e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${QR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var C_e=$Y,k_e=BY;function A_e({className:e,indicatorColor:t,value:n,...r}){return h.jsx(C_e,{"data-slot":"progress",className:Qe("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:h.jsx(k_e,{"data-slot":"progress-indicator",className:Qe("bg-primary h-full w-full flex-1 transition-all",t),style:{transform:`translateX(-${100-(n||0)}%)`}})})}function N_e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const q4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function _b(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function e8(e){return"nodeType"in e}function Ua(e){var t,n;return e?_b(e)?e:e8(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function t8(e){const{Document:t}=Ua(e);return e instanceof t}function xw(e){return _b(e)?!1:e instanceof Ua(e).HTMLElement}function jY(e){return e instanceof Ua(e).SVGElement}function Sb(e){return e?_b(e)?e.document:e8(e)?t8(e)?e:xw(e)||jY(e)?e.ownerDocument:document:document:document}const Eu=q4?w.useLayoutEffect:w.useEffect;function G4(e){const t=w.useRef(e);return Eu(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function I_e(){const e=w.useRef(null),t=w.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function fx(e,t){t===void 0&&(t=[e]);const n=w.useRef(e);return Eu(()=>{n.current!==e&&(n.current=e)},t),n}function ww(e,t){const n=w.useRef();return w.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function hS(e){const t=G4(e),n=w.useRef(null),r=w.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function pS(e){const t=w.useRef();return w.useEffect(()=>{t.current=e},[e]),t.current}let G3={};function Ew(e,t){return w.useMemo(()=>{if(t)return t;const n=G3[e]==null?0:G3[e]+1;return G3[e]=n,e+"-"+n},[e,t])}function UY(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,i)=>{const a=Object.entries(i);for(const[l,c]of a){const u=o[l];u!=null&&(o[l]=u+e*c)}return o},{...t})}}const T1=UY(1),hx=UY(-1);function R_e(e){return"clientX"in e&&"clientY"in e}function W4(e){if(!e)return!1;const{KeyboardEvent:t}=Ua(e.target);return t&&e instanceof t}function M_e(e){if(!e)return!1;const{TouchEvent:t}=Ua(e.target);return t&&e instanceof t}function mS(e){if(M_e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return R_e(e)?{x:e.clientX,y:e.clientY}:null}const _u=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[_u.Translate.toString(e),_u.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),f$="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function O_e(e){return e.matches(f$)?e:e.querySelector(f$)}const D_e={display:"none"};function P_e(e){let{id:t,value:n}=e;return Me.createElement("div",{id:t,style:D_e},n)}function L_e(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Me.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function $_e(){const[e,t]=w.useState("");return{announce:w.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const HY=w.createContext(null);function F_e(e){const t=w.useContext(HY);w.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function B_e(){const[e]=w.useState(()=>new Set),t=w.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[w.useCallback(r=>{let{type:s,event:o}=r;e.forEach(i=>{var a;return(a=i[s])==null?void 0:a.call(i,o)})},[e]),t]}const z_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},j_e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function U_e(e){let{announcements:t=j_e,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=z_e}=e;const{announce:o,announcement:i}=$_e(),a=Ew("DndLiveRegion"),[l,c]=w.useState(!1);if(w.useEffect(()=>{c(!0)},[]),F_e(w.useMemo(()=>({onDragStart(f){let{active:m}=f;o(t.onDragStart({active:m}))},onDragMove(f){let{active:m,over:g}=f;t.onDragMove&&o(t.onDragMove({active:m,over:g}))},onDragOver(f){let{active:m,over:g}=f;o(t.onDragOver({active:m,over:g}))},onDragEnd(f){let{active:m,over:g}=f;o(t.onDragEnd({active:m,over:g}))},onDragCancel(f){let{active:m,over:g}=f;o(t.onDragCancel({active:m,over:g}))}}),[o,t])),!l)return null;const u=Me.createElement(Me.Fragment,null,Me.createElement(P_e,{id:r,value:s.draggable}),Me.createElement(L_e,{id:a,announcement:i}));return n?dl.createPortal(u,n):u}var ki;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ki||(ki={}));function gS(){}function h0(e,t){return w.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function n8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Su=Object.freeze({x:0,y:0});function r8(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function H_e(e,t){const n=mS(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function s8(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function V_e(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function DN(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function Y4(e,t){if(!e||e.length===0)return null;const[n]=e;return t?n[t]:n}function h$(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const bS=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=h$(t,t.left,t.top),o=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=r8(h$(l),s);o.push({id:a,data:{droppableContainer:i,value:c}})}}return o.sort(s8)},VY=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=DN(t),o=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=DN(l),u=s.reduce((m,g,y)=>m+r8(c[y],g),0),f=Number((u/4).toFixed(4));o.push({id:a,data:{droppableContainer:i,value:f}})}}return o.sort(s8)};function q_e(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),i=s-r,a=o-n;if(r<s&&n<o){const l=t.width*t.height,c=e.width*e.height,u=i*a,f=u/(l+c-u);return Number(f.toFixed(4))}return 0}const qY=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:i}=o,a=n.get(i);if(a){const l=q_e(a,t);l>0&&s.push({id:i,data:{droppableContainer:o,value:l}})}}return s.sort(V_e)};function G_e(e,t){const{top:n,left:r,bottom:s,right:o}=t;return n<=e.y&&e.y<=s&&r<=e.x&&e.x<=o}const W_e=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const s=[];for(const o of t){const{id:i}=o,a=n.get(i);if(a&&G_e(r,a)){const c=DN(a).reduce((f,m)=>f+r8(r,m),0),u=Number((c/4).toFixed(4));s.push({id:i,data:{droppableContainer:o,value:u}})}}return s.sort(s8)};function Y_e(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function GY(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Su}function K_e(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((i,a)=>({...i,top:i.top+e*a.y,bottom:i.bottom+e*a.y,left:i.left+e*a.x,right:i.right+e*a.x}),{...n})}}const Z_e=K_e(1);function WY(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function J_e(e,t,n){const r=WY(t);if(!r)return e;const{scaleX:s,scaleY:o,x:i,y:a}=r,l=e.left-i-(1-s)*parseFloat(n),c=e.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),u=s?e.width/s:e.width,f=o?e.height/o:e.height;return{width:u,height:f,top:c,right:l+u,bottom:c+f,left:l}}const X_e={ignoreTransform:!1};function Tb(e,t){t===void 0&&(t=X_e);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:u}=Ua(e).getComputedStyle(e);c&&(n=J_e(n,c,u))}const{top:r,left:s,width:o,height:i,bottom:a,right:l}=n;return{top:r,left:s,width:o,height:i,bottom:a,right:l}}function p$(e){return Tb(e,{ignoreTransform:!0})}function Q_e(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function eSe(e,t){return t===void 0&&(t=Ua(e).getComputedStyle(e)),t.position==="fixed"}function tSe(e,t){t===void 0&&(t=Ua(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function K4(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(t8(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!xw(s)||jY(s)||n.includes(s))return n;const o=Ua(e).getComputedStyle(s);return s!==e&&tSe(s,o)&&n.push(s),eSe(s,o)?n:r(s.parentNode)}return e?r(e):n}function YY(e){const[t]=K4(e,1);return t??null}function W3(e){return!q4||!e?null:_b(e)?e:e8(e)?t8(e)||e===Sb(e).scrollingElement?window:xw(e)?e:null:null}function KY(e){return _b(e)?e.scrollX:e.scrollLeft}function ZY(e){return _b(e)?e.scrollY:e.scrollTop}function PN(e){return{x:KY(e),y:ZY(e)}}var Fi;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Fi||(Fi={}));function JY(e){return!q4||!e?!1:e===document.scrollingElement}function XY(e){const t={x:0,y:0},n=JY(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:i,isRight:a,maxScroll:r,minScroll:t}}const nSe={x:.2,y:.2};function rSe(e,t,n,r,s){let{top:o,left:i,right:a,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=nSe);const{isTop:c,isBottom:u,isLeft:f,isRight:m}=XY(e),g={x:0,y:0},y={x:0,y:0},v={height:t.height*s.y,width:t.width*s.x};return!c&&o<=t.top+v.height?(g.y=Fi.Backward,y.y=r*Math.abs((t.top+v.height-o)/v.height)):!u&&l>=t.bottom-v.height&&(g.y=Fi.Forward,y.y=r*Math.abs((t.bottom-v.height-l)/v.height)),!m&&a>=t.right-v.width?(g.x=Fi.Forward,y.x=r*Math.abs((t.right-v.width-a)/v.width)):!f&&i<=t.left+v.width&&(g.x=Fi.Backward,y.x=r*Math.abs((t.left+v.width-i)/v.width)),{direction:g,speed:y}}function sSe(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function QY(e){return e.reduce((t,n)=>T1(t,PN(n)),Su)}function oSe(e){return e.reduce((t,n)=>t+KY(n),0)}function iSe(e){return e.reduce((t,n)=>t+ZY(n),0)}function eK(e,t){if(t===void 0&&(t=Tb),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);YY(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const aSe=[["x",["left","right"],oSe],["y",["top","bottom"],iSe]];class o8{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=K4(n),s=QY(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,i,a]of aSe)for(const l of i)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=s[o]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Iv{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function lSe(e){const{EventTarget:t}=Ua(e);return e instanceof t?e:Sb(e)}function Y3(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var xc;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(xc||(xc={}));function m$(e){e.preventDefault()}function cSe(e){e.stopPropagation()}var lr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(lr||(lr={}));const tK={start:[lr.Space,lr.Enter],cancel:[lr.Esc],end:[lr.Space,lr.Enter,lr.Tab]},uSe=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case lr.Right:return{...n,x:n.x+25};case lr.Left:return{...n,x:n.x-25};case lr.Down:return{...n,y:n.y+25};case lr.Up:return{...n,y:n.y-25}}};class Z4{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Iv(Sb(n)),this.windowListeners=new Iv(Ua(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(xc.Resize,this.handleCancel),this.windowListeners.add(xc.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(xc.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&eK(r),n(Su)}handleKeyDown(t){if(W4(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=tK,coordinateGetter:i=uSe,scrollBehavior:a="smooth"}=s,{code:l}=t;if(o.end.includes(l)){this.handleEnd(t);return}if(o.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:Su;this.referenceCoordinates||(this.referenceCoordinates=u);const f=i(t,{active:n,context:r.current,currentCoordinates:u});if(f){const m=hx(f,u),g={x:0,y:0},{scrollableAncestors:y}=r.current;for(const v of y){const x=t.code,{isTop:E,isRight:T,isLeft:k,isBottom:I,maxScroll:O,minScroll:M}=XY(v),P=sSe(v),j={x:Math.min(x===lr.Right?P.right-P.width/2:P.right,Math.max(x===lr.Right?P.left:P.left+P.width/2,f.x)),y:Math.min(x===lr.Down?P.bottom-P.height/2:P.bottom,Math.max(x===lr.Down?P.top:P.top+P.height/2,f.y))},V=x===lr.Right&&!T||x===lr.Left&&!k,U=x===lr.Down&&!I||x===lr.Up&&!E;if(V&&j.x!==f.x){const z=v.scrollLeft+m.x,H=x===lr.Right&&z<=O.x||x===lr.Left&&z>=M.x;if(H&&!m.y){v.scrollTo({left:z,behavior:a});return}H?g.x=v.scrollLeft-z:g.x=x===lr.Right?v.scrollLeft-O.x:v.scrollLeft-M.x,g.x&&v.scrollBy({left:-g.x,behavior:a});break}else if(U&&j.y!==f.y){const z=v.scrollTop+m.y,H=x===lr.Down&&z<=O.y||x===lr.Up&&z>=M.y;if(H&&!m.x){v.scrollTo({top:z,behavior:a});return}H?g.y=v.scrollTop-z:g.y=x===lr.Down?v.scrollTop-O.y:v.scrollTop-M.y,g.y&&v.scrollBy({top:-g.y,behavior:a});break}}this.handleMove(t,T1(hx(f,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Z4.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=tK,onActivation:s}=t,{active:o}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function g$(e){return!!(e&&"distance"in e)}function b$(e){return!!(e&&"delay"in e)}class i8{constructor(t,n,r){var s;r===void 0&&(r=lSe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:i}=o;this.props=t,this.events=n,this.document=Sb(i),this.documentListeners=new Iv(this.document),this.listeners=new Iv(r),this.windowListeners=new Iv(Ua(i)),this.initialCoordinates=(s=mS(o))!=null?s:Su,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(xc.Resize,this.handleCancel),this.windowListeners.add(xc.DragStart,m$),this.windowListeners.add(xc.VisibilityChange,this.handleCancel),this.windowListeners.add(xc.ContextMenu,m$),this.documentListeners.add(xc.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(b$(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(g$(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(xc.Click,cSe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(xc.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:i,options:{activationConstraint:a}}=o;if(!s)return;const l=(n=mS(t))!=null?n:Su,c=hx(s,l);if(!r&&a){if(g$(a)){if(a.tolerance!=null&&Y3(c,a.tolerance))return this.handleCancel();if(Y3(c,a.distance))return this.handleStart()}if(b$(a)&&Y3(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}t.cancelable&&t.preventDefault(),i(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===lr.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const dSe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class J4 extends i8{constructor(t){const{event:n}=t,r=Sb(n.target);super(t,dSe,r)}}J4.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const fSe={move:{name:"mousemove"},end:{name:"mouseup"}};var LN;(function(e){e[e.RightClick=2]="RightClick"})(LN||(LN={}));class a8 extends i8{constructor(t){super(t,fSe,Sb(t.event.target))}}a8.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===LN.RightClick?!1:(r==null||r({event:n}),!0)}}];const K3={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class l8 extends i8{constructor(t){super(t,K3)}static setup(){return window.addEventListener(K3.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(K3.move.name,t)};function t(){}}}l8.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Rv;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Rv||(Rv={}));var yS;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(yS||(yS={}));function hSe(e){let{acceleration:t,activator:n=Rv.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:i=5,order:a=yS.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:f,threshold:m}=e;const g=mSe({delta:f,disabled:!o}),[y,v]=I_e(),x=w.useRef({x:0,y:0}),E=w.useRef({x:0,y:0}),T=w.useMemo(()=>{switch(n){case Rv.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Rv.DraggableRect:return s}},[n,s,l]),k=w.useRef(null),I=w.useCallback(()=>{const M=k.current;if(!M)return;const P=x.current.x*E.current.x,j=x.current.y*E.current.y;M.scrollBy(P,j)},[]),O=w.useMemo(()=>a===yS.TreeOrder?[...c].reverse():c,[a,c]);w.useEffect(()=>{if(!o||!c.length||!T){v();return}for(const M of O){if((r==null?void 0:r(M))===!1)continue;const P=c.indexOf(M),j=u[P];if(!j)continue;const{direction:V,speed:U}=rSe(M,j,T,t,m);for(const z of["x","y"])g[z][V[z]]||(U[z]=0,V[z]=0);if(U.x>0||U.y>0){v(),k.current=M,y(I,i),x.current=U,E.current=V;return}}x.current={x:0,y:0},E.current={x:0,y:0},v()},[t,I,r,v,o,i,JSON.stringify(T),JSON.stringify(g),y,c,O,u,JSON.stringify(m)])}const pSe={x:{[Fi.Backward]:!1,[Fi.Forward]:!1},y:{[Fi.Backward]:!1,[Fi.Forward]:!1}};function mSe(e){let{delta:t,disabled:n}=e;const r=pS(t);return ww(s=>{if(n||!r||!s)return pSe;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Fi.Backward]:s.x[Fi.Backward]||o.x===-1,[Fi.Forward]:s.x[Fi.Forward]||o.x===1},y:{[Fi.Backward]:s.y[Fi.Backward]||o.y===-1,[Fi.Forward]:s.y[Fi.Forward]||o.y===1}}},[n,t,r])}function gSe(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return ww(s=>{var o;return t==null?null:(o=r??s)!=null?o:null},[r,t])}function bSe(e,t){return w.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...o]},[]),[e,t])}var G1;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(G1||(G1={}));var $N;(function(e){e.Optimized="optimized"})($N||($N={}));const y$=new Map;function ySe(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,i]=w.useState(null),{frequency:a,measure:l,strategy:c}=s,u=w.useRef(e),f=x(),m=fx(f),g=w.useCallback(function(E){E===void 0&&(E=[]),!m.current&&i(T=>T===null?E:T.concat(E.filter(k=>!T.includes(k))))},[m]),y=w.useRef(null),v=ww(E=>{if(f&&!n)return y$;if(!E||E===y$||u.current!==e||o!=null){const T=new Map;for(let k of e){if(!k)continue;if(o&&o.length>0&&!o.includes(k.id)&&k.rect.current){T.set(k.id,k.rect.current);continue}const I=k.node.current,O=I?new o8(l(I),I):null;k.rect.current=O,O&&T.set(k.id,O)}return T}return E},[e,o,n,f,l]);return w.useEffect(()=>{u.current=e},[e]),w.useEffect(()=>{f||g()},[n,f]),w.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),w.useEffect(()=>{f||typeof a!="number"||y.current!==null||(y.current=setTimeout(()=>{g(),y.current=null},a))},[a,f,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:o!=null};function x(){switch(c){case G1.Always:return!1;case G1.BeforeDragging:return n;default:return!n}}}function c8(e,t){return ww(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function vSe(e,t){return c8(e,t)}function xSe(e){let{callback:t,disabled:n}=e;const r=G4(t),s=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return w.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function X4(e){let{callback:t,disabled:n}=e;const r=G4(t),s=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return w.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function wSe(e){return new o8(Tb(e),e)}function v$(e,t,n){t===void 0&&(t=wSe);const[r,s]=w.useState(null);function o(){s(l=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=t(e);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const i=xSe({callback(l){if(e)for(const c of l){const{type:u,target:f}=c;if(u==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),a=X4({callback:o});return Eu(()=>{o(),e?(a==null||a.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[e]),r}function ESe(e){const t=c8(e);return GY(e,t)}const x$=[];function _Se(e){const t=w.useRef(e),n=ww(r=>e?r&&r!==x$&&e&&t.current&&e.parentNode===t.current.parentNode?r:K4(e):x$,[e]);return w.useEffect(()=>{t.current=e},[e]),n}function SSe(e){const[t,n]=w.useState(null),r=w.useRef(e),s=w.useCallback(o=>{const i=W3(o.target);i&&n(a=>a?(a.set(i,PN(i)),new Map(a)):null)},[]);return w.useEffect(()=>{const o=r.current;if(e!==o){i(o);const a=e.map(l=>{const c=W3(l);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,PN(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(o)};function i(a){a.forEach(l=>{const c=W3(l);c==null||c.removeEventListener("scroll",s)})}},[s,e]),w.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,i)=>T1(o,i),Su):QY(e):Su,[e,t])}function w$(e,t){t===void 0&&(t=[]);const n=w.useRef(null);return w.useEffect(()=>{n.current=null},t),w.useEffect(()=>{const r=e!==Su;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?hx(e,n.current):Su}function TSe(e){w.useEffect(()=>{if(!q4)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function CSe(e,t){return w.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=i=>{o(i,t)},n},{}),[e,t])}function nK(e){return w.useMemo(()=>e?Q_e(e):null,[e])}const E$=[];function kSe(e,t){t===void 0&&(t=Tb);const[n]=e,r=nK(n?Ua(n):null),[s,o]=w.useState(E$);function i(){o(()=>e.length?e.map(l=>JY(l)?r:new o8(t(l),l)):E$)}const a=X4({callback:i});return Eu(()=>{a==null||a.disconnect(),i(),e.forEach(l=>a==null?void 0:a.observe(l))},[e]),s}function rK(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return xw(t)?t:e}function ASe(e){let{measure:t}=e;const[n,r]=w.useState(null),s=w.useCallback(c=>{for(const{target:u}of c)if(xw(u)){r(f=>{const m=t(u);return f?{...f,width:m.width,height:m.height}:m});break}},[t]),o=X4({callback:s}),i=w.useCallback(c=>{const u=rK(c);o==null||o.disconnect(),u&&(o==null||o.observe(u)),r(u?t(u):null)},[t,o]),[a,l]=hS(i);return w.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const NSe=[{sensor:J4,options:{}},{sensor:Z4,options:{}}],ISe={current:{}},A_={draggable:{measure:p$},droppable:{measure:p$,strategy:G1.WhileDragging,frequency:$N.Optimized},dragOverlay:{measure:Tb}};class Mv extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const RSe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Mv,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:gS},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:A_,measureDroppableContainers:gS,windowRect:null,measuringScheduled:!1},sK={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:gS,draggableNodes:new Map,over:null,measureDroppableContainers:gS},_w=w.createContext(sK),oK=w.createContext(RSe);function MSe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Mv}}}function OSe(e,t){switch(t.type){case ki.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ki.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ki.DragEnd:case ki.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ki.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Mv(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case ki.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new Mv(e.droppable.containers);return i.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case ki.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new Mv(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function DSe(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=w.useContext(_w),o=pS(r),i=pS(n==null?void 0:n.id);return w.useEffect(()=>{if(!t&&!r&&o&&i!=null){if(!W4(o)||document.activeElement===o.target)return;const a=s.get(i);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const f=O_e(u);if(f){f.focus();break}}})}},[r,t,s,i,o]),null}function iK(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function PSe(e){return w.useMemo(()=>({draggable:{...A_.draggable,...e==null?void 0:e.draggable},droppable:{...A_.droppable,...e==null?void 0:e.droppable},dragOverlay:{...A_.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function LSe(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=w.useRef(!1),{x:i,y:a}=typeof s=="boolean"?{x:s,y:s}:s;Eu(()=>{if(!i&&!a||!t){o.current=!1;return}if(o.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const u=n(c),f=GY(u,r);if(i||(f.x=0),a||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=YY(c);m&&m.scrollBy({top:f.y,left:f.x})}},[t,i,a,r,n])}const Q4=w.createContext({...Su,scaleX:1,scaleY:1});var Qh;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Qh||(Qh={}));const vS=w.memo(function(t){var n,r,s,o;let{id:i,accessibility:a,autoScroll:l=!0,children:c,sensors:u=NSe,collisionDetection:f=qY,measuring:m,modifiers:g,...y}=t;const v=w.useReducer(OSe,void 0,MSe),[x,E]=v,[T,k]=B_e(),[I,O]=w.useState(Qh.Uninitialized),M=I===Qh.Initialized,{draggable:{active:P,nodes:j,translate:V},droppable:{containers:U}}=x,z=P!=null?j.get(P):null,H=w.useRef({initial:null,translated:null}),F=w.useMemo(()=>{var wt;return P!=null?{id:P,data:(wt=z==null?void 0:z.data)!=null?wt:ISe,rect:H}:null},[P,z]),G=w.useRef(null),[X,J]=w.useState(null),[ee,re]=w.useState(null),ie=fx(y,Object.values(y)),Z=Ew("DndDescribedBy",i),te=w.useMemo(()=>U.getEnabled(),[U]),oe=PSe(m),{droppableRects:Q,measureDroppableContainers:Te,measuringScheduled:ge}=ySe(te,{dragging:M,dependencies:[V.x,V.y],config:oe.droppable}),Ce=gSe(j,P),fe=w.useMemo(()=>ee?mS(ee):null,[ee]),Fe=Qn(),De=vSe(Ce,oe.draggable.measure);LSe({activeNode:P!=null?j.get(P):null,config:Fe.layoutShiftCompensation,initialRect:De,measure:oe.draggable.measure});const Re=v$(Ce,oe.draggable.measure,De),tt=v$(Ce?Ce.parentElement:null),de=w.useRef({activatorEvent:null,active:null,activeNode:Ce,collisionRect:null,collisions:null,droppableRects:Q,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),nt=U.getNodeFor((n=de.current.over)==null?void 0:n.id),ot=ASe({measure:oe.dragOverlay.measure}),Ut=(r=ot.nodeRef.current)!=null?r:Ce,Vt=M?(s=ot.rect)!=null?s:Re:null,Dt=!!(ot.nodeRef.current&&ot.rect),en=ESe(Dt?null:Re),xt=nK(Ut?Ua(Ut):null),pe=_Se(M?nt??Ce:null),Ne=kSe(pe),$e=iK(g,{transform:{x:V.x-en.x,y:V.y-en.y,scaleX:1,scaleY:1},activatorEvent:ee,active:F,activeNodeRect:Re,containerNodeRect:tt,draggingNodeRect:Vt,over:de.current.over,overlayNodeRect:ot.rect,scrollableAncestors:pe,scrollableAncestorRects:Ne,windowRect:xt}),Je=fe?T1(fe,V):null,Le=SSe(pe),Ve=w$(Le),_e=w$(Le,[Re]),Y=T1($e,Ve),L=Vt?Z_e(Vt,$e):null,B=F&&L?f({active:F,collisionRect:L,droppableRects:Q,droppableContainers:te,pointerCoordinates:Je}):null,ce=Y4(B,"id"),[we,ze]=w.useState(null),Be=Dt?$e:T1($e,_e),ut=Y_e(Be,(o=we==null?void 0:we.rect)!=null?o:null,Re),an=w.useRef(null),zt=w.useCallback((wt,sn)=>{let{sensor:ye,options:Ue}=sn;if(G.current==null)return;const ht=j.get(G.current);if(!ht)return;const Zt=wt.nativeEvent,hr=new ye({active:G.current,activeNode:ht,event:Zt,options:Ue,context:de,onAbort(Rt){if(!j.get(Rt))return;const{onDragAbort:fn}=ie.current,In={id:Rt};fn==null||fn(In),T({type:"onDragAbort",event:In})},onPending(Rt,Bt,fn,In){if(!j.get(Rt))return;const{onDragPending:bo}=ie.current,Vs={id:Rt,constraint:Bt,initialCoordinates:fn,offset:In};bo==null||bo(Vs),T({type:"onDragPending",event:Vs})},onStart(Rt){const Bt=G.current;if(Bt==null)return;const fn=j.get(Bt);if(!fn)return;const{onDragStart:In}=ie.current,Pr={activatorEvent:Zt,active:{id:Bt,data:fn.data,rect:H}};dl.unstable_batchedUpdates(()=>{In==null||In(Pr),O(Qh.Initializing),E({type:ki.DragStart,initialCoordinates:Rt,active:Bt}),T({type:"onDragStart",event:Pr}),J(an.current),re(Zt)})},onMove(Rt){E({type:ki.DragMove,coordinates:Rt})},onEnd:Yn(ki.DragEnd),onCancel:Yn(ki.DragCancel)});an.current=hr;function Yn(Rt){return async function(){const{active:fn,collisions:In,over:Pr,scrollAdjustedTranslate:bo}=de.current;let Vs=null;if(fn&&bo){const{cancelDrop:yo}=ie.current;Vs={activatorEvent:Zt,active:fn,collisions:In,delta:bo,over:Pr},Rt===ki.DragEnd&&typeof yo=="function"&&await Promise.resolve(yo(Vs))&&(Rt=ki.DragCancel)}G.current=null,dl.unstable_batchedUpdates(()=>{E({type:Rt}),O(Qh.Uninitialized),ze(null),J(null),re(null),an.current=null;const yo=Rt===ki.DragEnd?"onDragEnd":"onDragCancel";if(Vs){const Jr=ie.current[yo];Jr==null||Jr(Vs),T({type:yo,event:Vs})}})}}},[j]),dn=w.useCallback((wt,sn)=>(ye,Ue)=>{const ht=ye.nativeEvent,Zt=j.get(Ue);if(G.current!==null||!Zt||ht.dndKit||ht.defaultPrevented)return;const hr={active:Zt};wt(ye,sn.options,hr)===!0&&(ht.dndKit={capturedBy:sn.sensor},G.current=Ue,zt(ye,sn))},[j,zt]),on=bSe(u,dn);TSe(u),Eu(()=>{Re&&I===Qh.Initializing&&O(Qh.Initialized)},[Re,I]),w.useEffect(()=>{const{onDragMove:wt}=ie.current,{active:sn,activatorEvent:ye,collisions:Ue,over:ht}=de.current;if(!sn||!ye)return;const Zt={active:sn,activatorEvent:ye,collisions:Ue,delta:{x:Y.x,y:Y.y},over:ht};dl.unstable_batchedUpdates(()=>{wt==null||wt(Zt),T({type:"onDragMove",event:Zt})})},[Y.x,Y.y]),w.useEffect(()=>{const{active:wt,activatorEvent:sn,collisions:ye,droppableContainers:Ue,scrollAdjustedTranslate:ht}=de.current;if(!wt||G.current==null||!sn||!ht)return;const{onDragOver:Zt}=ie.current,hr=Ue.get(ce),Yn=hr&&hr.rect.current?{id:hr.id,rect:hr.rect.current,data:hr.data,disabled:hr.disabled}:null,Rt={active:wt,activatorEvent:sn,collisions:ye,delta:{x:ht.x,y:ht.y},over:Yn};dl.unstable_batchedUpdates(()=>{ze(Yn),Zt==null||Zt(Rt),T({type:"onDragOver",event:Rt})})},[ce]),Eu(()=>{de.current={activatorEvent:ee,active:F,activeNode:Ce,collisionRect:L,collisions:B,droppableRects:Q,draggableNodes:j,draggingNode:Ut,draggingNodeRect:Vt,droppableContainers:U,over:we,scrollableAncestors:pe,scrollAdjustedTranslate:Y},H.current={initial:Vt,translated:L}},[F,Ce,B,L,j,Ut,Vt,Q,U,we,pe,Y]),hSe({...Fe,delta:V,draggingRect:L,pointerCoordinates:Je,scrollableAncestors:pe,scrollableAncestorRects:Ne});const Va=w.useMemo(()=>({active:F,activeNode:Ce,activeNodeRect:Re,activatorEvent:ee,collisions:B,containerNodeRect:tt,dragOverlay:ot,draggableNodes:j,droppableContainers:U,droppableRects:Q,over:we,measureDroppableContainers:Te,scrollableAncestors:pe,scrollableAncestorRects:Ne,measuringConfiguration:oe,measuringScheduled:ge,windowRect:xt}),[F,Ce,Re,ee,B,tt,ot,j,U,Q,we,Te,pe,Ne,oe,ge,xt]),Nn=w.useMemo(()=>({activatorEvent:ee,activators:on,active:F,activeNodeRect:Re,ariaDescribedById:{draggable:Z},dispatch:E,draggableNodes:j,over:we,measureDroppableContainers:Te}),[ee,on,F,Re,E,Z,j,we,Te]);return Me.createElement(HY.Provider,{value:k},Me.createElement(_w.Provider,{value:Nn},Me.createElement(oK.Provider,{value:Va},Me.createElement(Q4.Provider,{value:ut},c)),Me.createElement(DSe,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Me.createElement(U_e,{...a,hiddenTextDescribedById:Z}));function Qn(){const wt=(X==null?void 0:X.autoScrollEnabled)===!1,sn=typeof l=="object"?l.enabled===!1:l===!1,ye=M&&!wt&&!sn;return typeof l=="object"?{...l,enabled:ye}:{enabled:ye}}}),$Se=w.createContext(null),_$="button",FSe="Draggable";function aK(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=Ew(FSe),{activators:i,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:f,over:m}=w.useContext(_w),{role:g=_$,roleDescription:y="draggable",tabIndex:v=0}=s??{},x=(l==null?void 0:l.id)===t,E=w.useContext(x?Q4:$Se),[T,k]=hS(),[I,O]=hS(),M=CSe(i,t),P=fx(n);Eu(()=>(f.set(t,{id:t,key:o,node:T,activatorNode:I,data:P}),()=>{const V=f.get(t);V&&V.key===o&&f.delete(t)}),[f,t]);const j=w.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":x&&g===_$?!0:void 0,"aria-roledescription":y,"aria-describedby":u.draggable}),[r,g,v,x,y,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:j,isDragging:x,listeners:r?void 0:M,node:T,over:m,setNodeRef:k,setActivatorNodeRef:O,transform:E}}function lK(){return w.useContext(oK)}const BSe="Droppable",zSe={timeout:25};function cK(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=Ew(BSe),{active:i,dispatch:a,over:l,measureDroppableContainers:c}=w.useContext(_w),u=w.useRef({disabled:n}),f=w.useRef(!1),m=w.useRef(null),g=w.useRef(null),{disabled:y,updateMeasurementsFor:v,timeout:x}={...zSe,...s},E=fx(v??r),T=w.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(E.current)?E.current:[E.current]),g.current=null},x)},[x]),k=X4({callback:T,disabled:y||!i}),I=w.useCallback((j,V)=>{k&&(V&&(k.unobserve(V),f.current=!1),j&&k.observe(j))},[k]),[O,M]=hS(I),P=fx(t);return w.useEffect(()=>{!k||!O.current||(k.disconnect(),f.current=!1,k.observe(O.current))},[O,k]),w.useEffect(()=>(a({type:ki.RegisterDroppable,element:{id:r,key:o,disabled:n,node:O,rect:m,data:P}}),()=>a({type:ki.UnregisterDroppable,key:o,id:r})),[r]),w.useEffect(()=>{n!==u.current.disabled&&(a({type:ki.SetDroppableDisabled,id:r,key:o,disabled:n}),u.current.disabled=n)},[r,o,n,a]),{active:i,rect:m,isOver:(l==null?void 0:l.id)===r,node:O,over:l,setNodeRef:M}}function jSe(e){let{animation:t,children:n}=e;const[r,s]=w.useState(null),[o,i]=w.useState(null),a=pS(n);return!n&&!r&&a&&s(a),Eu(()=>{if(!o)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){s(null);return}Promise.resolve(t(c,o)).then(()=>{s(null)})},[t,r,o]),Me.createElement(Me.Fragment,null,n,r?w.cloneElement(r,{ref:i}):null)}const USe={x:0,y:0,scaleX:1,scaleY:1};function HSe(e){let{children:t}=e;return Me.createElement(_w.Provider,{value:sK},Me.createElement(Q4.Provider,{value:USe},t))}const VSe={position:"fixed",touchAction:"none"},qSe=e=>W4(e)?"transform 250ms ease":void 0,GSe=w.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:i,rect:a,style:l,transform:c,transition:u=qSe}=e;if(!a)return null;const f=s?c:{...c,scaleX:1,scaleY:1},m={...VSe,width:a.width,height:a.height,top:a.top,left:a.left,transform:_u.Transform.toString(f),transformOrigin:s&&r?H_e(r,a):void 0,transition:typeof u=="function"?u(r):u,...l};return Me.createElement(n,{className:i,style:m,ref:t},o)}),uK=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:o,className:i}=e;if(o!=null&&o.active)for(const[a,l]of Object.entries(o.active))l!==void 0&&(s[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(o!=null&&o.dragOverlay)for(const[a,l]of Object.entries(o.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[l,c]of Object.entries(s))n.node.style.setProperty(l,c);i!=null&&i.active&&n.node.classList.remove(i.active)}},WSe=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:_u.Transform.toString(t)},{transform:_u.Transform.toString(n)}]},YSe={duration:250,easing:"ease",keyframes:WSe,sideEffects:uK({styles:{active:{opacity:"0"}}})};function KSe(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return G4((o,i)=>{if(t===null)return;const a=n.get(o);if(!a)return;const l=a.node.current;if(!l)return;const c=rK(i);if(!c)return;const{transform:u}=Ua(i).getComputedStyle(i),f=WY(u);if(!f)return;const m=typeof t=="function"?t:ZSe(t);return eK(l,s.draggable.measure),m({active:{id:o,data:a.data,node:l,rect:s.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:i,rect:s.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function ZSe(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...YSe,...e};return o=>{let{active:i,dragOverlay:a,transform:l,...c}=o;if(!t)return;const u={x:a.rect.left-i.rect.left,y:a.rect.top-i.rect.top},f={scaleX:l.scaleX!==1?i.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?i.rect.height*l.scaleY/a.rect.height:1},m={x:l.x-u.x,y:l.y-u.y,...f},g=s({...c,active:i,dragOverlay:a,transform:{initial:l,final:m}}),[y]=g,v=g[g.length-1];if(JSON.stringify(y)===JSON.stringify(v))return;const x=r==null?void 0:r({active:i,dragOverlay:a,...c}),E=a.node.animate(g,{duration:t,easing:n,fill:"forwards"});return new Promise(T=>{E.onfinish=()=>{x==null||x(),T()}})}}let S$=0;function JSe(e){return w.useMemo(()=>{if(e!=null)return S$++,S$},[e])}const xS=Me.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:i,wrapperElement:a="div",className:l,zIndex:c=999}=e;const{activatorEvent:u,active:f,activeNodeRect:m,containerNodeRect:g,draggableNodes:y,droppableContainers:v,dragOverlay:x,over:E,measuringConfiguration:T,scrollableAncestors:k,scrollableAncestorRects:I,windowRect:O}=lK(),M=w.useContext(Q4),P=JSe(f==null?void 0:f.id),j=iK(i,{activatorEvent:u,active:f,activeNodeRect:m,containerNodeRect:g,draggingNodeRect:x.rect,over:E,overlayNodeRect:x.rect,scrollableAncestors:k,scrollableAncestorRects:I,transform:M,windowRect:O}),V=c8(m),U=KSe({config:r,draggableNodes:y,droppableContainers:v,measuringConfiguration:T}),z=V?x.setRef:void 0;return Me.createElement(HSe,null,Me.createElement(jSe,{animation:U},f&&P?Me.createElement(GSe,{key:P,id:f.id,ref:z,as:a,activatorEvent:u,adjustScale:t,className:l,transition:o,rect:V,style:{zIndex:c,...s},transform:j},n):null))});function C1(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function XSe(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function m2(e){return e!==null&&e>=0}function QSe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function eTe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const g2={scaleX:1,scaleY:1},dK=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:s,overIndex:o,index:i}=e;const a=(t=n[s])!=null?t:r;if(!a)return null;const l=tTe(n,i,s);if(i===s){const c=n[o];return c?{x:s<o?c.left+c.width-(a.left+a.width):c.left-a.left,y:0,...g2}:null}return i>s&&i<=o?{x:-a.width-l,y:0,...g2}:i<s&&i>=o?{x:a.width+l,y:0,...g2}:{x:0,y:0,...g2}};function tTe(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return!r||!s&&!o?0:n<t?s?r.left-(s.left+s.width):o.left-(r.left+r.width):o?o.left-(r.left+r.width):r.left-(s.left+s.width)}const wS=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=C1(t,r,n),i=t[s],a=o[s];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},b2={scaleX:1,scaleY:1},u8=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:i}=e;const a=(t=o[n])!=null?t:r;if(!a)return null;if(s===n){const c=o[i];return c?{x:0,y:n<i?c.top+c.height-(a.top+a.height):c.top-a.top,...b2}:null}const l=nTe(o,s,n);return s>n&&s<=i?{x:0,y:-a.height-l,...b2}:s<n&&s>=i?{x:0,y:a.height+l,...b2}:{x:0,y:0,...b2}};function nTe(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const fK="Sortable",hK=Me.createContext({activeIndex:-1,containerId:fK,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:wS,disabled:{draggable:!1,droppable:!1}});function ES(e){let{children:t,id:n,items:r,strategy:s=wS,disabled:o=!1}=e;const{active:i,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=lK(),f=Ew(fK,n),m=a.rect!==null,g=w.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),y=i!=null,v=i?g.indexOf(i.id):-1,x=c?g.indexOf(c.id):-1,E=w.useRef(g),T=!QSe(g,E.current),k=x!==-1&&v===-1||T,I=eTe(o);Eu(()=>{T&&y&&u(g)},[T,g,y,u]),w.useEffect(()=>{E.current=g},[g]);const O=w.useMemo(()=>({activeIndex:v,containerId:f,disabled:I,disableTransforms:k,items:g,overIndex:x,useDragOverlay:m,sortedRects:XSe(g,l),strategy:s}),[v,f,I.draggable,I.droppable,k,g,x,l,m,s]);return Me.createElement(hK.Provider,{value:O},t)}const rTe=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return C1(n,r,s).indexOf(t)},pK=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:i,previousItems:a,previousContainerId:l,transition:c}=e;return!c||!r||a!==o&&s===i?!1:n?!0:i!==s&&t===l},sTe={duration:200,easing:"ease"},mK="transform",oTe=_u.Transition.toString({property:mK,duration:0,easing:"linear"}),iTe={roleDescription:"sortable"};function aTe(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,i]=w.useState(null),a=w.useRef(n);return Eu(()=>{if(!t&&n!==a.current&&r.current){const l=s.current;if(l){const c=Tb(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&i(u)}}n!==a.current&&(a.current=n)},[t,n,r,s]),w.useEffect(()=>{o&&i(null)},[o]),o}function d8(e){let{animateLayoutChanges:t=pK,attributes:n,disabled:r,data:s,getNewIndex:o=rTe,id:i,strategy:a,resizeObserverConfig:l,transition:c=sTe}=e;const{items:u,containerId:f,activeIndex:m,disabled:g,disableTransforms:y,sortedRects:v,overIndex:x,useDragOverlay:E,strategy:T}=w.useContext(hK),k=lTe(r,g),I=u.indexOf(i),O=w.useMemo(()=>({sortable:{containerId:f,index:I,items:u},...s}),[f,s,I,u]),M=w.useMemo(()=>u.slice(u.indexOf(i)),[u,i]),{rect:P,node:j,isOver:V,setNodeRef:U}=cK({id:i,data:O,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...l}}),{active:z,activatorEvent:H,activeNodeRect:F,attributes:G,setNodeRef:X,listeners:J,isDragging:ee,over:re,setActivatorNodeRef:ie,transform:Z}=aK({id:i,data:O,attributes:{...iTe,...n},disabled:k.draggable}),te=N_e(U,X),oe=!!z,Q=oe&&!y&&m2(m)&&m2(x),Te=!E&&ee,ge=Te&&Q?Z:null,fe=Q?ge??(a??T)({rects:v,activeNodeRect:F,activeIndex:m,overIndex:x,index:I}):null,Fe=m2(m)&&m2(x)?o({id:i,items:u,activeIndex:m,overIndex:x}):I,De=z==null?void 0:z.id,Re=w.useRef({activeId:De,items:u,newIndex:Fe,containerId:f}),tt=u!==Re.current.items,de=t({active:z,containerId:f,isDragging:ee,isSorting:oe,id:i,index:I,items:u,newIndex:Re.current.newIndex,previousItems:Re.current.items,previousContainerId:Re.current.containerId,transition:c,wasDragging:Re.current.activeId!=null}),nt=aTe({disabled:!de,index:I,node:j,rect:P});return w.useEffect(()=>{oe&&Re.current.newIndex!==Fe&&(Re.current.newIndex=Fe),f!==Re.current.containerId&&(Re.current.containerId=f),u!==Re.current.items&&(Re.current.items=u)},[oe,Fe,f,u]),w.useEffect(()=>{if(De===Re.current.activeId)return;if(De!=null&&Re.current.activeId==null){Re.current.activeId=De;return}const Ut=setTimeout(()=>{Re.current.activeId=De},50);return()=>clearTimeout(Ut)},[De]),{active:z,activeIndex:m,attributes:G,data:O,rect:P,index:I,newIndex:Fe,items:u,isOver:V,isSorting:oe,isDragging:ee,listeners:J,node:j,overIndex:x,over:re,setNodeRef:te,setActivatorNodeRef:ie,setDroppableNodeRef:U,setDraggableNodeRef:X,transform:nt??fe,transition:ot()};function ot(){if(nt||tt&&Re.current.newIndex===I)return oTe;if(!(Te&&!W4(H)||!c)&&(oe||de))return _u.Transition.toString({...c,property:mK})}}function lTe(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function _S(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const cTe=[lr.Down,lr.Right,lr.Up,lr.Left],uTe=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:o,over:i,scrollableAncestors:a}}=t;if(cTe.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];o.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const m=s.get(f.id);if(m)switch(e.code){case lr.Down:r.top<m.top&&l.push(f);break;case lr.Up:r.top>m.top&&l.push(f);break;case lr.Left:r.left>m.left&&l.push(f);break;case lr.Right:r.left<m.left&&l.push(f);break}});const c=VY({collisionRect:r,droppableRects:s,droppableContainers:l});let u=Y4(c,"id");if(u===(i==null?void 0:i.id)&&c.length>1&&(u=c[1].id),u!=null){const f=o.get(n.id),m=o.get(u),g=m?s.get(m.id):null,y=m==null?void 0:m.node.current;if(y&&g&&f&&m){const x=K4(y).some((M,P)=>a[P]!==M),E=gK(f,m),T=dTe(f,m),k=x||!E?{x:0,y:0}:{x:T?r.width-g.width:0,y:T?r.height-g.height:0},I={x:g.left,y:g.top};return k.x&&k.y?I:hx(I,k)}}}};function gK(e,t){return!_S(e)||!_S(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function dTe(e,t){return!_S(e)||!_S(t)||!gK(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function T$(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function fTe(...e){return t=>{let n=!1;const r=e.map(s=>{const o=T$(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():T$(e[s],null)}}}}function eC(...e){return w.useCallback(fTe(...e),e)}const hTe=[lr.Down,lr.Right,lr.Up,lr.Left],pTe=(e,{context:t})=>{var i,a;const{active:n,droppableRects:r,droppableContainers:s,collisionRect:o}=t;if(hTe.includes(e.code)){if(e.preventDefault(),!n||!o)return;const l=[];for(const f of s.getEnabled()){if(!f||f!=null&&f.disabled)return;const m=r.get(f.id);if(!m)return;const g=f.data.current;if(g){const{type:y,children:v}=g;if(y==="container"&&(v==null?void 0:v.length)>0&&((i=n.data.current)==null?void 0:i.type)!=="container")return}switch(e.code){case lr.Down:o.top<m.top&&l.push(f);break;case lr.Up:o.top>m.top&&l.push(f);break;case lr.Left:o.left>=m.left+m.width&&l.push(f);break;case lr.Right:o.left+o.width<=m.left&&l.push(f);break}}const c=VY({collisionRect:o,droppableRects:r,droppableContainers:l}),u=Y4(c,"id");if(u!=null){const f=s.get(u),m=f==null?void 0:f.node.current,g=f==null?void 0:f.rect.current;if(m&&g)return f.id==="placeholder"?{x:g.left+(g.width-o.width)/2,y:g.top+(g.height-o.height)/2}:((a=f.data.current)==null?void 0:a.type)==="container"?{x:g.left+20,y:g.top+74}:{x:g.left,y:g.top}}}},bK="Kanban",Sw="KanbanBoard",Xp="KanbanColumn",yK="KanbanColumnHandle",k1="KanbanItem",FN="KanbanItemHandle",f8="KanbanOverlay",h8=w.createContext(null);h8.displayName=bK;function Cb(e){const t=w.useContext(h8);if(!t)throw new Error(`\`${e}\` must be used within \`${bK}\``);return t}function mTe(e){const{value:t,onValueChange:n,modifiers:r,strategy:s=u8,orientation:o="horizontal",onMove:i,getItemValue:a,accessibility:l,flatCursor:c=!1,...u}=e,f=w.useId(),[m,g]=w.useState(null),y=w.useRef(null),v=w.useRef(!1),x=n8(h0(a8),h0(l8),h0(Z4,{coordinateGetter:pTe})),E=w.useCallback(U=>{if(typeof U=="object"&&!a)throw new Error("getItemValue is required when using array of objects");return a?a(U):U},[a]),T=w.useCallback(U=>{if(U in t)return U;for(const[z,H]of Object.entries(t))if(H.some(F=>E(F)===U))return z;return null},[t,E]),k=w.useCallback(U=>{var G;if(m&&m in t)return bS({...U,droppableContainers:U.droppableContainers.filter(X=>X.id in t)});const z=W_e(U),H=z.length>0?z:qY(U);let F=Y4(H,"id");if(!F)return v.current&&(y.current=m),y.current?[{id:y.current}]:[];if(F in t){const X=t[F];if(X&&X.length>0){const J=bS({...U,droppableContainers:U.droppableContainers.filter(ee=>ee.id!==F&&X.some(re=>E(re)===ee.id))});J.length>0&&(F=((G=J[0])==null?void 0:G.id)??F)}}return y.current=F,[{id:F}]},[m,t,E]),I=w.useCallback(U=>{var z;(z=u.onDragStart)==null||z.call(u,U),!U.activatorEvent.defaultPrevented&&g(U.active.id)},[u]),O=w.useCallback(U=>{var X;if((X=u.onDragOver)==null||X.call(u,U),U.activatorEvent.defaultPrevented)return;const{active:z,over:H}=U;if(!H)return;const F=T(z.id),G=T(H.id);if(!(!F||!G))if(F===G){const J=t[F];if(!J)return;const ee=J.findIndex(ie=>E(ie)===z.id),re=J.findIndex(ie=>E(ie)===H.id);if(ee!==re){const ie={...t};ie[F]=C1(J,ee,re),n==null||n(ie)}}else{const J=t[F],ee=t[G];if(!J||!ee)return;const re=J.findIndex(te=>E(te)===z.id);if(re===-1)return;const ie=J[re];if(!ie)return;const Z={...t,[F]:J.filter(te=>E(te)!==z.id),[G]:[...ee,ie]};n==null||n(Z),v.current=!0}},[t,T,E,n,u]),M=w.useCallback(U=>{var F;if((F=u.onDragEnd)==null||F.call(u,U),U.activatorEvent.defaultPrevented)return;const{active:z,over:H}=U;if(!H){g(null);return}if(z.id in t&&H.id in t){const G=Object.keys(t).indexOf(z.id),X=Object.keys(t).indexOf(H.id);if(G!==X){const J=Object.keys(t),ee=C1(J,G,X),re={};for(const ie of ee){const Z=t[ie];Z&&(re[ie]=Z)}i?i({...U,activeIndex:G,overIndex:X}):n==null||n(re)}}else{const G=T(z.id),X=T(H.id);if(!G||!X){g(null);return}if(G===X){const J=t[G];if(!J){g(null);return}const ee=J.findIndex(ie=>E(ie)===z.id),re=J.findIndex(ie=>E(ie)===H.id);if(ee!==re){const ie={...t};ie[G]=C1(J,ee,re),i?i({...U,activeIndex:ee,overIndex:re}):n==null||n(ie)}}}g(null),v.current=!1},[t,T,E,n,i,u]),P=w.useCallback(U=>{var z;(z=u.onDragCancel)==null||z.call(u,U),!U.activatorEvent.defaultPrevented&&(g(null),v.current=!1)},[u]),j=w.useMemo(()=>({onDragStart({active:U}){const z=U.id in t,H=z?"column":"item",F=z?Object.keys(t).indexOf(U.id)+1:(()=>{const X=T(U.id);return!X||!t[X]?1:t[X].findIndex(J=>E(J)===U.id)+1})(),G=z?Object.keys(t).length:(()=>{var J;const X=T(U.id);return X?((J=t[X])==null?void 0:J.length)??0:0})();return`Picked up ${H} at position ${F} of ${G}`},onDragOver({active:U,over:z}){if(!z)return;const H=U.id in t,F=H?"column":"item",G=H?Object.keys(t).indexOf(z.id)+1:(()=>{const re=T(z.id);return!re||!t[re]?1:t[re].findIndex(ie=>E(ie)===z.id)+1})(),X=H?Object.keys(t).length:(()=>{var ie;const re=T(z.id);return re?((ie=t[re])==null?void 0:ie.length)??0:0})(),J=T(z.id),ee=T(U.id);return H?`${F} is now at position ${G} of ${X}`:ee!==J?`${F} is now at position ${G} of ${X} in ${J}`:`${F} is now at position ${G} of ${X}`},onDragEnd({active:U,over:z}){if(!z)return;const H=U.id in t,F=H?"column":"item",G=H?Object.keys(t).indexOf(z.id)+1:(()=>{const re=T(z.id);return!re||!t[re]?1:t[re].findIndex(ie=>E(ie)===z.id)+1})(),X=H?Object.keys(t).length:(()=>{var ie;const re=T(z.id);return re?((ie=t[re])==null?void 0:ie.length)??0:0})(),J=T(z.id),ee=T(U.id);return H?`${F} was dropped at position ${G} of ${X}`:ee!==J?`${F} was dropped at position ${G} of ${X} in ${J}`:`${F} was dropped at position ${G} of ${X}`},onDragCancel({active:U}){return`Dragging was cancelled. ${U.id in t?"column":"item"} was dropped.`}}),[t,T,E]),V=w.useMemo(()=>({id:f,items:t,modifiers:r,strategy:s,orientation:o,activeId:m,setActiveId:g,getItemValue:E,flatCursor:c}),[f,t,m,r,s,o,E,c]);return h.jsx(h8.Provider,{value:V,children:h.jsx(vS,{collisionDetection:k,modifiers:r,sensors:x,...u,id:f,measuring:{droppable:{strategy:G1.Always}},onDragStart:I,onDragOver:O,onDragEnd:M,onDragCancel:P,accessibility:{announcements:j,screenReaderInstructions:{draggable:`
            To pick up a kanban item or column, press space or enter.
            While dragging, use the arrow keys to move the item.
            Press space or enter again to drop the item in its new position, or press escape to cancel.
          `},...l}})})}const tC=w.createContext(!1);tC.displayName=Sw;const vK=w.forwardRef((e,t)=>{const{asChild:n,className:r,...s}=e,o=Cb(Sw),i=w.useMemo(()=>Object.keys(o.items),[o.items]),a=n?Am:"div";return h.jsx(tC.Provider,{value:!0,children:h.jsx(ES,{items:i,strategy:o.orientation==="horizontal"?dK:u8,children:h.jsx(a,{"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-slot":"kanban-board",...s,ref:t,className:Qe("flex size-full gap-4",o.orientation==="horizontal"?"flex-row":"flex-col",r)})})})});vK.displayName=Sw;const p8=w.createContext(null);p8.displayName=Xp;function gTe(e){const t=w.useContext(p8);if(!t)throw new Error(`\`${e}\` must be used within \`${Xp}\``);return t}const bTe=e=>pK({...e,wasDragging:!0}),xK=w.forwardRef((e,t)=>{const{value:n,asChild:r,asHandle:s,disabled:o,className:i,style:a,...l}=e,c=w.useId(),u=Cb(Xp),f=w.useContext(tC),m=w.useContext(nC);if(!f&&!m)throw new Error(`\`${Xp}\` must be used within \`${Sw}\` or \`${f8}\``);if(n==="")throw new Error(`\`${Xp}\` value cannot be an empty string`);const{attributes:g,listeners:y,setNodeRef:v,setActivatorNodeRef:x,transform:E,transition:T,isDragging:k}=d8({id:n,disabled:o,animateLayoutChanges:bTe}),I=eC(t,V=>{o||v(V)}),O=w.useMemo(()=>({transform:_u.Transform.toString(E),transition:T,...a}),[E,T,a]),M=w.useMemo(()=>(u.items[n]??[]).map(U=>u.getItemValue(U)),[u.items,n,u.getItemValue]),P=w.useMemo(()=>({id:c,attributes:g,listeners:y,setActivatorNodeRef:x,isDragging:k,disabled:o}),[c,g,y,x,k,o]),j=r?Am:"div";return h.jsx(p8.Provider,{value:P,children:h.jsx(ES,{items:M,strategy:u.orientation==="horizontal"?dK:u8,children:h.jsx(j,{id:c,"data-disabled":o,"data-dragging":k?"":void 0,"data-slot":"kanban-column",...l,...s&&!o?g:{},...s&&!o?y:{},ref:I,style:O,className:Qe("bg-muted flex size-full flex-col gap-2 rounded-lg p-2.5 aria-disabled:pointer-events-none aria-disabled:opacity-50",{"touch-none select-none":s,"cursor-default":u.flatCursor,"data-dragging:cursor-grabbing":!u.flatCursor,"cursor-grab":!k&&s&&!u.flatCursor,"opacity-50":k,"pointer-events-none opacity-50":o},i)})})})});xK.displayName=Xp;const wK=w.forwardRef((e,t)=>{const{asChild:n,disabled:r,className:s,...o}=e,i=Cb(Xp),a=gTe(yK),l=r??a.disabled,c=eC(t,f=>{l||a.setActivatorNodeRef(f)}),u=n?Am:"button";return h.jsx(u,{type:"button","aria-controls":a.id,"data-disabled":l,"data-dragging":a.isDragging?"":void 0,"data-slot":"kanban-column-handle",...o,...l?{}:a.attributes,...l?{}:a.listeners,ref:c,className:Qe("select-none disabled:pointer-events-none disabled:opacity-50",i.flatCursor?"cursor-default":"cursor-grab data-dragging:cursor-grabbing",s),disabled:l})});wK.displayName=yK;const m8=w.createContext(null);m8.displayName=k1;function yTe(e){const t=w.useContext(m8);if(!t)throw new Error(`\`${e}\` must be used within \`${k1}\``);return t}const EK=w.forwardRef((e,t)=>{const{value:n,style:r,asHandle:s,asChild:o,disabled:i,className:a,...l}=e,c=w.useId(),u=Cb(k1),f=w.useContext(tC),m=w.useContext(nC);if(!f&&!m)throw new Error(`\`${k1}\` must be used within \`${Sw}\``);const{attributes:g,listeners:y,setNodeRef:v,setActivatorNodeRef:x,transform:E,transition:T,isDragging:k}=d8({id:n,disabled:i});if(n==="")throw new Error(`\`${k1}\` value cannot be an empty string`);const I=eC(t,j=>{i||v(j)}),O=w.useMemo(()=>({transform:_u.Transform.toString(E),transition:T,...r}),[E,T,r]),M=w.useMemo(()=>({id:c,attributes:g,listeners:y,setActivatorNodeRef:x,isDragging:k,disabled:i}),[c,g,y,x,k,i]),P=o?Am:"div";return h.jsx(m8.Provider,{value:M,children:h.jsx(P,{id:c,"data-disabled":i,"data-dragging":k?"":void 0,"data-slot":"kanban-item",...l,...s&&!i?g:{},...s&&!i?y:{},ref:I,style:O,className:Qe("focus-visible:ring-ring focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden",{"touch-none select-none":s,"cursor-default":u.flatCursor,"data-dragging:cursor-grabbing":!u.flatCursor,"cursor-grab":!k&&s&&!u.flatCursor,"opacity-50":k,"pointer-events-none opacity-50":i},a)})})});EK.displayName=k1;const vTe=w.forwardRef((e,t)=>{const{asChild:n,disabled:r,className:s,...o}=e,i=Cb(FN),a=yTe(FN),l=r??a.disabled,c=eC(t,f=>{l||a.setActivatorNodeRef(f)}),u=n?Am:"button";return h.jsx(u,{type:"button","aria-controls":a.id,"data-disabled":l,"data-dragging":a.isDragging?"":void 0,"data-slot":"kanban-item-handle",...o,...l?{}:a.attributes,...l?{}:a.listeners,ref:c,className:Qe("select-none disabled:pointer-events-none disabled:opacity-50",i.flatCursor?"cursor-default":"cursor-grab data-dragging:cursor-grabbing",s),disabled:l})});vTe.displayName=FN;const nC=w.createContext(!1);nC.displayName=f8;const xTe={sideEffects:uK({styles:{active:{opacity:"0.4"}}})};function wTe(e){var c;const{container:t,children:n,...r}=e,s=Cb(f8),[o,i]=w.useState(!1);w.useLayoutEffect(()=>i(!0),[]);const a=t??(o?(c=globalThis.document)==null?void 0:c.body:null);if(!a)return null;const l=s.activeId&&s.activeId in s.items?"column":"item";return dl.createPortal(h.jsx(xS,{dropAnimation:xTe,modifiers:s.modifiers,className:Qe(!s.flatCursor&&"cursor-grabbing"),...r,children:h.jsx(nC.Provider,{value:!0,children:s.activeId&&n?typeof n=="function"?n({value:s.activeId,variant:l}):n:null})}),a)}const BN=24,_K=4,px=64,N_=30,fd=0,jp=24,zN=9,C$=10,SK=6048e5,ETe=864e5,TK=6e4,_Te=36e5,k$=Symbol.for("constructDateFrom");function ao(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&k$ in e?e[k$](t):e instanceof Date?new e.constructor(t):new Date(t)}function fr(e,t){return ao(t||e,e)}function Ef(e,t,n){const r=fr(e,n==null?void 0:n.in);return isNaN(t)?ao(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function rC(e,t,n){const r=fr(e,n==null?void 0:n.in);if(isNaN(t))return ao(e,NaN);if(!t)return r;const s=r.getDate(),o=ao(e,r.getTime());o.setMonth(r.getMonth()+t+1,0);const i=o.getDate();return s>=i?o:(r.setFullYear(o.getFullYear(),o.getMonth(),s),r)}function STe(e,t,n){return ao(e,+fr(e)+t)}function A1(e,t,n){return STe(e,t*_Te)}let TTe={};function Tw(){return TTe}function Dc(e,t){var a,l,c,u;const n=Tw(),r=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=fr(e,t==null?void 0:t.in),o=s.getDay(),i=(o<r?7:0)+o-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function mx(e,t){return Dc(e,{...t,weekStartsOn:1})}function CK(e,t){const n=fr(e,t==null?void 0:t.in),r=n.getFullYear(),s=ao(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const o=mx(s),i=ao(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const a=mx(i);return n.getTime()>=o.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function A$(e){const t=fr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Mm(e,...t){const n=ao.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function qf(e,t){const n=fr(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function kf(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t),o=qf(r),i=qf(s),a=+o-A$(o),l=+i-A$(i);return Math.round((a-l)/ETe)}function CTe(e,t){const n=CK(e,t),r=ao(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),mx(r)}function kTe(e,t,n){const r=fr(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*TK),r}function g8(e,t,n){return Ef(e,t*7,n)}function ATe(e,t,n){return rC(e,t*12,n)}function kK(e,t,n){const[r,s]=[+fr(e.start,n==null?void 0:n.in),+fr(e.end,n==null?void 0:n.in)].sort((a,l)=>a-l),[o,i]=[+fr(t.start,n==null?void 0:n.in),+fr(t.end,n==null?void 0:n.in)].sort((a,l)=>a-l);return r<i&&o<s}function NTe(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=ao.bind(null,s));const o=fr(s,r);(!n||n<o||isNaN(+o))&&(n=o)}),ao(r,n||NaN)}function ITe(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=ao.bind(null,s));const o=fr(s,r);(!n||n>o||isNaN(+o))&&(n=o)}),ao(r,n||NaN)}function RTe(e){return ao(e,Date.now())}function gs(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t);return+qf(r)==+qf(s)}function AK(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function MTe(e){return!(!AK(e)&&typeof e!="number"||isNaN(+fr(e)))}function OTe(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t),o=r.getFullYear()-s.getFullYear(),i=r.getMonth()-s.getMonth();return o*12+i}function DTe(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t),o=N$(r,s),i=Math.abs(kf(r,s));r.setDate(r.getDate()-o*i);const a=+(N$(r,s)===-o),l=o*(i-a);return l===0?0:l}function N$(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function PTe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function LTe(e,t){return+fr(e)-+fr(t)}function W1(e,t,n){const r=LTe(e,t)/TK;return PTe(n==null?void 0:n.roundingMethod)(r)}function NK(e,t){const n=fr(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function sC(e,t){const[n,r]=Mm(e,t.start,t.end);return{start:n,end:r}}function IK(e,t){const{start:n,end:r}=sC(t==null?void 0:t.in,e);let s=+n>+r;const o=s?+n:+r,i=s?r:n;i.setHours(0,0,0,0);let a=1;const l=[];for(;+i<=o;)l.push(ao(n,i)),i.setDate(i.getDate()+a),i.setHours(0,0,0,0);return s?l.reverse():l}function RK(e,t){const{start:n,end:r}=sC(t==null?void 0:t.in,e);let s=+n>+r;const o=s?+n:+r,i=s?r:n;i.setMinutes(0,0,0);let a=1;const l=[];for(;+i<=o;)l.push(ao(n,i)),i.setHours(i.getHours()+a);return s?l.reverse():l}function $Te(e,t){const{start:n,end:r}=sC(t==null?void 0:t.in,e);let s=+n>+r;const o=s?+n:+r,i=s?r:n;i.setHours(0,0,0,0),i.setDate(1);let a=1;const l=[];for(;+i<=o;)l.push(ao(n,i)),i.setMonth(i.getMonth()+a);return s?l.reverse():l}function MK(e,t){const n=fr(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function FTe(e,t){const n=fr(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function OK(e,t){const n=fr(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function BTe(e,t){const{start:n,end:r}=sC(t==null?void 0:t.in,e);let s=+n>+r;const o=s?+n:+r,i=s?r:n;i.setHours(0,0,0,0),i.setMonth(0,1);let a=1;const l=[];for(;+i<=o;)l.push(ao(n,i)),i.setFullYear(i.getFullYear()+a);return s?l.reverse():l}function kb(e,t){var a,l,c,u;const n=Tw(),r=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=fr(e,t==null?void 0:t.in),o=s.getDay(),i=(o<r?-7:0)+6-(o-r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function zTe(e,t){return kb(e,{...t,weekStartsOn:1})}const jTe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},UTe=(e,t,n)=>{let r;const s=jTe[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Z3(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const HTe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},VTe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qTe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GTe={date:Z3({formats:HTe,defaultWidth:"full"}),time:Z3({formats:VTe,defaultWidth:"full"}),dateTime:Z3({formats:qTe,defaultWidth:"full"})},WTe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},YTe=(e,t,n,r)=>WTe[e];function jy(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;s=e.formattingValues[a]||e.formattingValues[i]}else{const i=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[a]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const KTe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ZTe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},JTe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},XTe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},QTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},e4e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},t4e=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},n4e={ordinalNumber:t4e,era:jy({values:KTe,defaultWidth:"wide"}),quarter:jy({values:ZTe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:jy({values:JTe,defaultWidth:"wide"}),day:jy({values:XTe,defaultWidth:"wide"}),dayPeriod:jy({values:QTe,defaultWidth:"wide",formattingValues:e4e,defaultFormattingWidth:"wide"})};function Uy(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const i=o[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?s4e(a,f=>f.test(i)):r4e(a,f=>f.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=t.slice(i.length);return{value:c,rest:u}}}function r4e(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function s4e(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function o4e(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const a=t.slice(s.length);return{value:i,rest:a}}}const i4e=/^(\d+)(th|st|nd|rd)?/i,a4e=/\d+/i,l4e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},c4e={any:[/^b/i,/^(a|c)/i]},u4e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},d4e={any:[/1/i,/2/i,/3/i,/4/i]},f4e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},h4e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},p4e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},m4e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},g4e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},b4e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},y4e={ordinalNumber:o4e({matchPattern:i4e,parsePattern:a4e,valueCallback:e=>parseInt(e,10)}),era:Uy({matchPatterns:l4e,defaultMatchWidth:"wide",parsePatterns:c4e,defaultParseWidth:"any"}),quarter:Uy({matchPatterns:u4e,defaultMatchWidth:"wide",parsePatterns:d4e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Uy({matchPatterns:f4e,defaultMatchWidth:"wide",parsePatterns:h4e,defaultParseWidth:"any"}),day:Uy({matchPatterns:p4e,defaultMatchWidth:"wide",parsePatterns:m4e,defaultParseWidth:"any"}),dayPeriod:Uy({matchPatterns:g4e,defaultMatchWidth:"any",parsePatterns:b4e,defaultParseWidth:"any"})},t1={code:"en-US",formatDistance:UTe,formatLong:GTe,formatRelative:YTe,localize:n4e,match:y4e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function v4e(e,t){const n=fr(e,t==null?void 0:t.in);return kf(n,OK(n))+1}function DK(e,t){const n=fr(e,t==null?void 0:t.in),r=+mx(n)-+CTe(n);return Math.round(r/SK)+1}function PK(e,t){var u,f,m,g;const n=fr(e,t==null?void 0:t.in),r=n.getFullYear(),s=Tw(),o=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,i=ao((t==null?void 0:t.in)||e,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const a=Dc(i,t),l=ao((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);const c=Dc(l,t);return+n>=+a?r+1:+n>=+c?r:r-1}function x4e(e,t){var a,l,c,u;const n=Tw(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=PK(e,t),o=ao((t==null?void 0:t.in)||e,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),Dc(o,t)}function LK(e,t){const n=fr(e,t==null?void 0:t.in),r=+Dc(n,t)-+x4e(n,t);return Math.round(r/SK)+1}function Ss(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Vh={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ss(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ss(n+1,2)},d(e,t){return Ss(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ss(e.getHours()%12||12,t.length)},H(e,t){return Ss(e.getHours(),t.length)},m(e,t){return Ss(e.getMinutes(),t.length)},s(e,t){return Ss(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ss(s,t.length)}},Vg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},I$={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Vh.y(e,t)},Y:function(e,t,n,r){const s=PK(e,r),o=s>0?s:1-s;if(t==="YY"){const i=o%100;return Ss(i,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):Ss(o,t.length)},R:function(e,t){const n=CK(e);return Ss(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ss(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ss(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ss(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Vh.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ss(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=LK(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Ss(s,t.length)},I:function(e,t,n){const r=DK(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ss(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Vh.d(e,t)},D:function(e,t,n){const r=v4e(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ss(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Ss(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Ss(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Ss(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Vg.noon:r===0?s=Vg.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Vg.evening:r>=12?s=Vg.afternoon:r>=4?s=Vg.morning:s=Vg.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Vh.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Vh.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ss(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ss(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Vh.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Vh.s(e,t)},S:function(e,t){return Vh.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return M$(r);case"XXXX":case"XX":return Bp(r);case"XXXXX":case"XXX":default:return Bp(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return M$(r);case"xxxx":case"xx":return Bp(r);case"xxxxx":case"xxx":default:return Bp(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+R$(r,":");case"OOOO":default:return"GMT"+Bp(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+R$(r,":");case"zzzz":default:return"GMT"+Bp(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Ss(r,t.length)},T:function(e,t,n){return Ss(+e,t.length)}};function R$(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+t+Ss(o,2)}function M$(e,t){return e%60===0?(e>0?"-":"+")+Ss(Math.abs(e)/60,2):Bp(e,t)}function Bp(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Ss(Math.trunc(r/60),2),o=Ss(r%60,2);return n+s+t+o}const O$=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},$K=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},w4e=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return O$(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",O$(r,t)).replace("{{time}}",$K(s,t))},E4e={p:$K,P:w4e},_4e=/^D+$/,S4e=/^Y+$/,T4e=["D","DD","YY","YYYY"];function C4e(e){return _4e.test(e)}function k4e(e){return S4e.test(e)}function A4e(e,t,n){const r=N4e(e,t,n);if(console.warn(r),T4e.includes(e))throw new RangeError(r)}function N4e(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const I4e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,R4e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,M4e=/^'([^]*?)'?$/,O4e=/''/g,D4e=/[a-zA-Z]/;function ir(e,t,n){var u,f,m,g,y,v,x,E;const r=Tw(),s=(n==null?void 0:n.locale)??r.locale??t1,o=(n==null?void 0:n.firstWeekContainsDate)??((f=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((v=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((E=(x=r.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??0,a=fr(e,n==null?void 0:n.in);if(!MTe(a))throw new RangeError("Invalid time value");let l=t.match(R4e).map(T=>{const k=T[0];if(k==="p"||k==="P"){const I=E4e[k];return I(T,s.formatLong)}return T}).join("").match(I4e).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const k=T[0];if(k==="'")return{isToken:!1,value:P4e(T)};if(I$[k])return{isToken:!0,value:T};if(k.match(D4e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:T}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return l.map(T=>{if(!T.isToken)return T.value;const k=T.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&k4e(k)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&C4e(k))&&A4e(k,t,String(e));const I=I$[k[0]];return I(a,k,s.localize,c)}).join("")}function P4e(e){const t=e.match(M4e);return t?t[1].replace(O4e,"'"):e}function L4e(e,t){const n=fr(e,t==null?void 0:t.in),r=n.getFullYear(),s=n.getMonth(),o=ao(n,0);return o.setFullYear(r,s+1,0),o.setHours(0,0,0,0),o.getDate()}function N1(e,t){return fr(e,t==null?void 0:t.in).getHours()}function gx(e,t){return fr(e,t==null?void 0:t.in).getMinutes()}function $4e(e,t){return fr(e,t==null?void 0:t.in).getMonth()}function F4e(e,t){return fr(e,t==null?void 0:t.in).getFullYear()}function B4e(e,t){return+fr(e)>+fr(t)}function SS(e,t){return+fr(e)<+fr(t)}function FK(e){return+fr(e)<Date.now()}function TS(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function z4e(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()}function h1(e,t){return gs(ao(e,e),RTe(e))}function j4e(e,t,n){const r=+fr(e,n==null?void 0:n.in),[s,o]=[+fr(t.start,n==null?void 0:n.in),+fr(t.end,n==null?void 0:n.in)].sort((i,a)=>i-a);return r>=s&&r<=o}function U4e(e,t,n){const r=fr(e,n==null?void 0:n.in),s=r.getFullYear(),o=r.getDate(),i=ao(e,0);i.setFullYear(s,t,15),i.setHours(0,0,0,0);const a=L4e(i);return r.setMonth(t,Math.min(o,a)),r}function H4e(e,t,n){const r=fr(e,n==null?void 0:n.in);return isNaN(+r)?ao(e,NaN):(r.setFullYear(t),r)}function V4e(e,t,n){return rC(e,-1,n)}function q4e(e,t,n){return g8(e,-1,n)}function BK(e){switch(e||"sky"){case"sky":return"bg-sky-200/50 hover:bg-sky-200/40 text-sky-950/80 dark:bg-sky-400/25 dark:hover:bg-sky-400/20 dark:text-sky-200 shadow-sky-700/8";case"amber":return"bg-amber-200/50 hover:bg-amber-200/40 text-amber-950/80 dark:bg-amber-400/25 dark:hover:bg-amber-400/20 dark:text-amber-200 shadow-amber-700/8";case"violet":return"bg-violet-200/50 hover:bg-violet-200/40 text-violet-950/80 dark:bg-violet-400/25 dark:hover:bg-violet-400/20 dark:text-violet-200 shadow-violet-700/8";case"rose":return"bg-rose-200/50 hover:bg-rose-200/40 text-rose-950/80 dark:bg-rose-400/25 dark:hover:bg-rose-400/20 dark:text-rose-200 shadow-rose-700/8";case"emerald":return"bg-emerald-200/50 hover:bg-emerald-200/40 text-emerald-950/80 dark:bg-emerald-400/25 dark:hover:bg-emerald-400/20 dark:text-emerald-200 shadow-emerald-700/8";case"orange":return"bg-orange-200/50 hover:bg-orange-200/40 text-orange-950/80 dark:bg-orange-400/25 dark:hover:bg-orange-400/20 dark:text-orange-200 shadow-orange-700/8";default:return"bg-sky-200/50 hover:bg-sky-200/40 text-sky-950/80 dark:bg-sky-400/25 dark:hover:bg-sky-400/20 dark:text-sky-200 shadow-sky-700/8"}}function G4e(e,t){return e&&t?"rounded":e?"rounded-l rounded-r-none":t?"rounded-r rounded-l-none":"rounded-none"}function dm(e){const t=new Date(e.start),n=new Date(e.end);return e.allDay||t.getDate()!==n.getDate()}function W4e(e,t){return e.filter(n=>{const r=new Date(n.start);return gs(t,r)}).sort((n,r)=>new Date(n.start).getTime()-new Date(r.start).getTime())}function D$(e){return[...e].sort((t,n)=>{const r=dm(t),s=dm(n);return r&&!s?-1:!r&&s?1:new Date(t.start).getTime()-new Date(n.start).getTime()})}function Y4e(e,t){return e.filter(n=>{if(!dm(n))return!1;const r=new Date(n.start),s=new Date(n.end);return!gs(t,r)&&(gs(t,s)||t>r&&t<s)})}function K4e(e,t){return e.filter(n=>{const r=new Date(n.start),s=new Date(n.end);return gs(t,r)||gs(t,s)||t>r&&t<s})}function P$(e,t){return e.filter(n=>{const r=new Date(n.start),s=new Date(n.end);return gs(t,r)||gs(t,s)||t>r&&t<s}).sort((n,r)=>new Date(n.start).getTime()-new Date(r.start).getTime())}function Z4e(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}const Mp=e=>ir(e,gx(e)===0?"ha":"h:mma").toLowerCase();function L$({event:e,isFirstDay:t=!0,isLastDay:n=!0,isDragging:r,onClick:s,className:o,children:i,currentTime:a,dndListeners:l,dndAttributes:c,onMouseDown:u,onTouchStart:f}){const m=a?new Date(new Date(a).getTime()+(new Date(e.end).getTime()-new Date(e.start).getTime())):new Date(e.end),g=FK(m);return h.jsx("button",{className:Qe("focus-visible:border-ring focus-visible:ring-ring/50 flex size-full overflow-hidden px-1 text-left font-medium backdrop-blur-md transition outline-none select-none focus-visible:ring-[3px] data-dragging:cursor-grabbing data-dragging:shadow-lg data-past-event:line-through sm:px-2",BK(e.color),G4e(t,n),o),"data-dragging":r||void 0,"data-past-event":g||void 0,onClick:s,onMouseDown:u,onTouchStart:f,...l,...c,children:i})}function fm({event:e,view:t,isDragging:n,onClick:r,showTime:s,currentTime:o,isFirstDay:i=!0,isLastDay:a=!0,children:l,className:c,dndListeners:u,dndAttributes:f,onMouseDown:m,onTouchStart:g}){const y=e.color,v=w.useMemo(()=>o||new Date(e.start),[o,e.start]),x=w.useMemo(()=>o?new Date(new Date(o).getTime()+(new Date(e.end).getTime()-new Date(e.start).getTime())):new Date(e.end),[o,e.start,e.end]),E=w.useMemo(()=>W1(x,v),[v,x]),T=()=>e.allDay?"All day":E<45?Mp(v):`${Mp(v)} - ${Mp(x)}`;return t==="month"?h.jsx(L$,{event:e,isFirstDay:i,isLastDay:a,isDragging:n,onClick:r,className:Qe("mt-[var(--event-gap)] h-[var(--event-height)] items-center text-[10px] sm:text-xs",c),currentTime:o,dndListeners:u,dndAttributes:f,onMouseDown:m,onTouchStart:g,children:l||h.jsxs("span",{className:"truncate",children:[!e.allDay&&h.jsxs("span",{className:"truncate font-normal opacity-70 sm:text-[11px]",children:[Mp(v)," "]}),e.title]})}):t==="week"||t==="day"?h.jsx(L$,{event:e,isFirstDay:i,isLastDay:a,isDragging:n,onClick:r,className:Qe("py-1",E<45?"items-center":"flex-col",t==="week"?"text-[10px] sm:text-xs":"text-xs",c),currentTime:o,dndListeners:u,dndAttributes:f,onMouseDown:m,onTouchStart:g,children:E<45?h.jsxs("div",{className:"truncate",children:[e.title," ",s&&h.jsx("span",{className:"opacity-70",children:Mp(v)})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"truncate font-medium",children:e.title}),s&&h.jsx("div",{className:"truncate font-normal opacity-70 sm:text-[11px]",children:T()})]})}):h.jsxs("button",{className:Qe("focus-visible:border-ring focus-visible:ring-ring/50 flex w-full flex-col gap-1 rounded p-2 text-left transition outline-none focus-visible:ring-[3px] data-past-event:line-through data-past-event:opacity-90",BK(y),c),"data-past-event":FK(new Date(e.end))||void 0,onClick:r,onMouseDown:m,onTouchStart:g,...u,...f,children:[h.jsx("div",{className:"text-sm font-medium",children:e.title}),h.jsxs("div",{className:"text-xs opacity-70",children:[e.allDay?h.jsx("span",{children:"All day"}):h.jsxs("span",{className:"uppercase",children:[Mp(v)," -"," ",Mp(x)]}),e.location&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"px-1 opacity-35",children:"  "}),h.jsx("span",{children:e.location})]})]}),e.description&&h.jsx("div",{className:"my-1 text-xs opacity-90",children:e.description})]})}const zK=w.createContext({activeEvent:null,activeId:null,activeView:null,currentTime:null,eventHeight:null,isMultiDay:!1,multiDayWidth:null,dragHandlePosition:null}),jK=()=>w.useContext(zK);function J4e({children:e,onEventUpdate:t}){var j,V;const[n,r]=w.useState(null),[s,o]=w.useState(null),[i,a]=w.useState(null),[l,c]=w.useState(null),[u,f]=w.useState(null),[m,g]=w.useState(!1),[y,v]=w.useState(null),[x,E]=w.useState(null),T=w.useRef({height:0}),k=n8(h0(a8,{activationConstraint:{distance:5}}),h0(l8,{activationConstraint:{delay:250,tolerance:5}}),h0(J4,{activationConstraint:{distance:5}})),I=w.useId(),O=U=>{const{active:z}=U;if(!z.data.current){console.error("Missing data in drag start event",U);return}const{event:H,view:F,height:G,isMultiDay:X,multiDayWidth:J,dragHandlePosition:ee}=z.data.current;r(H),o(z.id),a(F),c(new Date(H.start)),g(X||!1),v(J||null),E(ee||null),G&&(T.current.height=G,f(G))},M=U=>{const{over:z}=U;if(z&&n&&z.data.current){const{date:H,time:F}=z.data.current;if(F!==void 0&&i!=="month"){const G=new Date(H),X=Math.floor(F),J=F-X;let ee=0;J<.125?ee=0:J<.375?ee=15:J<.625?ee=30:ee=45,G.setHours(X,ee,0,0),(!l||G.getHours()!==l.getHours()||G.getMinutes()!==l.getMinutes()||G.getDate()!==l.getDate()||G.getMonth()!==l.getMonth()||G.getFullYear()!==l.getFullYear())&&c(G)}else if(i==="month"){const G=new Date(H);l&&G.setHours(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()),(!l||G.getDate()!==l.getDate()||G.getMonth()!==l.getMonth()||G.getFullYear()!==l.getFullYear())&&c(G)}}},P=U=>{const{active:z,over:H}=U;if(!H||!n||!l){r(null),o(null),a(null),c(null),f(null),g(!1),v(null),E(null);return}try{if(!z.data.current||!H.data.current)throw new Error("Missing data in drag event");const F=z.data.current,G=H.data.current;if(!F.event||!G.date)throw new Error("Missing required event data");const X=F.event,J=G.date,ee=G.time,re=new Date(J);if(ee!==void 0){const Te=Math.floor(ee),ge=ee-Te;let Ce=0;ge<.125?Ce=0:ge<.375?Ce=15:ge<.625?Ce=30:Ce=45,re.setHours(Te,Ce,0,0)}else re.setHours(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds());const ie=new Date(X.start),Z=new Date(X.end),te=W1(Z,ie),oe=kTe(re,te);(ie.getFullYear()!==re.getFullYear()||ie.getMonth()!==re.getMonth()||ie.getDate()!==re.getDate()||ie.getHours()!==re.getHours()||ie.getMinutes()!==re.getMinutes())&&t({...X,start:re,end:oe})}catch(F){console.error("Error in drag end handler:",F)}finally{r(null),o(null),a(null),c(null),f(null),g(!1),v(null),E(null)}};return h.jsx(vS,{id:I,sensors:k,onDragStart:O,onDragOver:M,onDragEnd:P,children:h.jsxs(zK.Provider,{value:{activeEvent:n,activeId:s,activeView:i,currentTime:l,eventHeight:u,isMultiDay:m,multiDayWidth:y,dragHandlePosition:x},children:[e,h.jsx(xS,{adjustScale:!1,dropAnimation:null,children:n&&i&&h.jsx("div",{style:{height:u?`${u}px`:"auto",width:m&&y?`${y}%`:"100%"},children:h.jsx(fm,{event:n,view:i,isDragging:!0,showTime:i!=="month",currentTime:l||void 0,isFirstDay:((j=x==null?void 0:x.data)==null?void 0:j.isFirstDay)!==!1,isLastDay:((V=x==null?void 0:x.data)==null?void 0:V.isLastDay)!==!1})})})]})})}function UK(e,t){const[n,r]=w.useState(0),[s,o]=w.useState(!1);return w.useEffect(()=>{const i=()=>{const l=new Date,c=l.getHours(),u=l.getMinutes(),f=(c-fd)*60+u,m=0,g=(jp-fd)*60,y=(f-m)/(g-m)*100;let v=!1;if(t==="day")v=gs(l,e);else if(t==="week"){const x=Dc(e,{weekStartsOn:0}),E=kb(e,{weekStartsOn:0});v=j4e(l,{start:x,end:E})}r(y),o(v)};i();const a=setInterval(i,6e4);return()=>clearInterval(a)},[e,t]),{currentTimePosition:n,currentTimeVisible:s}}function X4e({eventHeight:e,eventGap:t}){const n=w.useRef(null),r=w.useRef(null),[s,o]=w.useState(null);w.useLayoutEffect(()=>{if(!n.current)return;const a=()=>{n.current&&o(n.current.clientHeight)};return a(),r.current||(r.current=new ResizeObserver(()=>{a()})),r.current.observe(n.current),()=>{r.current&&r.current.disconnect()}},[]);const i=w.useMemo(()=>a=>{if(!s)return a;const l=Math.floor(s/(e+t));return a<=l?a:l>0?l-1:0},[s,e,t]);return{contentRef:n,contentHeight:s,getVisibleEventCount:i}}function Q4e({currentDate:e,events:t,onEventSelect:n}){const r=w.useMemo(()=>(console.log("Agenda view updating with date:",e.toISOString()),Array.from({length:N_},(i,a)=>Ef(new Date(e),a))),[e]),s=(i,a)=>{a.stopPropagation(),console.log("Agenda view event clicked:",i),n(i)},o=r.some(i=>P$(t,i).length>0);return h.jsx("div",{className:"border-border/70 border-t px-4",children:o?r.map(i=>{const a=P$(t,i);return a.length===0?null:h.jsxs("div",{className:"border-border/70 relative my-12 border-t",children:[h.jsx("span",{className:"bg-background absolute -top-3 left-0 flex h-6 items-center pe-4 text-[10px] uppercase data-today:font-medium sm:pe-4 sm:text-xs","data-today":h1(i)||void 0,children:ir(i,"d MMM, EEEE")}),h.jsx("div",{className:"mt-6 space-y-2",children:a.map(l=>h.jsx(fm,{event:l,view:"agenda",onClick:c=>s(l,c)},l.id))})]},i.toString())}):h.jsxs("div",{className:"flex min-h-[70svh] flex-col items-center justify-center py-16 text-center",children:[h.jsx(F1,{size:32,className:"text-muted-foreground/50 mb-2"}),h.jsx("h3",{className:"text-lg font-medium",children:"No events found"}),h.jsx("p",{className:"text-muted-foreground",children:"There are no events scheduled for this time period."})]})})}function eCe({currentDate:e,events:t,onEventSelect:n,onEventCreate:r}){const s=w.useMemo(()=>{const g=qf(e);return RK({start:A1(g,fd),end:A1(g,jp-1)})},[e]),o=w.useMemo(()=>t.filter(g=>{const y=new Date(g.start),v=new Date(g.end);return gs(e,y)||gs(e,v)||e>y&&e<v}).sort((g,y)=>new Date(g.start).getTime()-new Date(y.start).getTime()),[e,t]),i=w.useMemo(()=>o.filter(g=>g.allDay||dm(g)),[o]),a=w.useMemo(()=>o.filter(g=>!g.allDay&&!dm(g)),[o]),l=w.useMemo(()=>{const g=[],y=qf(e),v=[...a].sort((E,T)=>{const k=new Date(E.start),I=new Date(T.start),O=new Date(E.end),M=new Date(T.end);if(k<I)return-1;if(k>I)return 1;const P=W1(O,k);return W1(M,I)-P}),x=[];return v.forEach(E=>{const T=new Date(E.start),k=new Date(E.end),I=gs(e,T)?T:y,O=gs(e,k)?k:A1(y,24),M=N1(I)+gx(I)/60,P=N1(O)+gx(O)/60,j=(M-fd)*px,V=(P-M)*px;let U=0,z=!1;for(;!z;){const X=x[U]||[];X.length===0?(x[U]=X,z=!0):X.some(ee=>kK({start:I,end:O},{start:new Date(ee.event.start),end:new Date(ee.event.end)}))?U++:z=!0}const H=x[U]||[];x[U]=H,H.push({event:E,end:O});const F=U===0?1:.9,G=U===0?0:U*.1;g.push({event:E,top:j,height:V,left:G,width:F,zIndex:10+U})}),g},[e,a]),c=(g,y)=>{y.stopPropagation(),n(g)},u=i.length>0,{currentTimePosition:f,currentTimeVisible:m}=UK(e,"day");return h.jsxs("div",{"data-slot":"day-view",className:"contents",children:[u&&h.jsx("div",{className:"border-border/70 bg-muted/50 border-t",children:h.jsxs("div",{className:"grid grid-cols-[3rem_1fr] sm:grid-cols-[4rem_1fr]",children:[h.jsx("div",{className:"relative",children:h.jsx("span",{className:"text-muted-foreground/70 absolute bottom-0 left-0 h-6 w-16 max-w-full pe-2 text-right text-[10px] sm:pe-4 sm:text-xs",children:"All day"})}),h.jsx("div",{className:"border-border/70 relative border-r p-1 last:border-r-0",children:i.map(g=>{const y=new Date(g.start),v=new Date(g.end),x=gs(e,y),E=gs(e,v);return h.jsx(fm,{onClick:T=>c(g,T),event:g,view:"month",isFirstDay:x,isLastDay:E,children:h.jsx("div",{children:g.title})},`spanning-${g.id}`)})})]})}),h.jsxs("div",{className:"border-border/70 grid flex-1 grid-cols-[3rem_1fr] overflow-hidden border-t sm:grid-cols-[4rem_1fr]",children:[h.jsx("div",{children:s.map((g,y)=>h.jsx("div",{className:"border-border/70 relative h-[var(--week-cells-height)] border-b last:border-b-0",children:y>0&&h.jsx("span",{className:"bg-background text-muted-foreground/70 absolute -top-3 left-0 flex h-6 w-16 max-w-full items-center justify-end pe-2 text-[10px] sm:pe-4 sm:text-xs",children:ir(g,"h a")})},g.toString()))}),h.jsxs("div",{className:"relative",children:[l.map(g=>h.jsx("div",{className:"absolute z-10 px-0.5",style:{top:`${g.top}px`,height:`${g.height}px`,left:`${g.left*100}%`,width:`${g.width*100}%`,zIndex:g.zIndex},children:h.jsx("div",{className:"size-full",children:h.jsx(b8,{event:g.event,view:"day",onClick:y=>c(g.event,y),showTime:!0,height:g.height})})},g.event.id)),m&&h.jsx("div",{className:"pointer-events-none absolute right-0 left-0 z-20",style:{top:`${f}%`},children:h.jsxs("div",{className:"relative flex items-center",children:[h.jsx("div",{className:"bg-primary absolute -left-1 h-2 w-2 rounded-full"}),h.jsx("div",{className:"bg-primary h-[2px] w-full"})]})}),s.map(g=>{const y=N1(g);return h.jsx("div",{className:"border-border/70 relative h-[var(--week-cells-height)] border-b last:border-b-0",children:[0,1,2,3].map(v=>{const x=y+v*.25;return h.jsx(y8,{id:`day-cell-${e.toISOString()}-${x}`,date:e,time:x,className:Qe("absolute h-[calc(var(--week-cells-height)/4)] w-full",v===0&&"top-0",v===1&&"top-[calc(var(--week-cells-height)/4)]",v===2&&"top-[calc(var(--week-cells-height)/4*2)]",v===3&&"top-[calc(var(--week-cells-height)/4*3)]"),onClick:()=>{const E=new Date(e);E.setHours(y),E.setMinutes(v*15),r(E)}},`${g.toString()}-${v}`)})},g.toString())})]})]})]})}function b8({event:e,view:t,showTime:n,onClick:r,height:s,isMultiDay:o,multiDayWidth:i,isFirstDay:a=!0,isLastDay:l=!0,"aria-hidden":c}){var V;const{activeId:u}=jK(),f=w.useRef(null),[m,g]=w.useState(null),y=new Date(e.start),v=new Date(e.end),x=o||e.allDay||DTe(v,y)>=1,{attributes:E,listeners:T,setNodeRef:k,transform:I,isDragging:O}=aK({id:`${e.id}-${t}`,data:{event:e,view:t,height:s||((V=f.current)==null?void 0:V.offsetHeight)||null,isMultiDay:x,multiDayWidth:i,dragHandlePosition:m,isFirstDay:a,isLastDay:l}}),M=U=>{if(f.current){const z=f.current.getBoundingClientRect();g({x:U.clientX-z.left,y:U.clientY-z.top})}};if(O||u===`${e.id}-${t}`)return h.jsx("div",{ref:k,className:"opacity-0",style:{height:s||"auto"}});const P=I?{transform:_u.Translate.toString(I),height:s||"auto",width:x&&i?`${i}%`:void 0}:{height:s||"auto",width:x&&i?`${i}%`:void 0},j=U=>{if(f.current){const z=f.current.getBoundingClientRect(),H=U.touches[0];H&&g({x:H.clientX-z.left,y:H.clientY-z.top})}};return h.jsx("div",{ref:U=>{k(U),f&&(f.current=U)},style:P,className:"touch-none",children:h.jsx(fm,{event:e,view:t,showTime:n,isFirstDay:a,isLastDay:l,isDragging:O,onClick:r,onMouseDown:M,onTouchStart:j,dndListeners:T,dndAttributes:E,"aria-hidden":c})})}function y8({id:e,date:t,time:n,children:r,className:s,onClick:o}){const{activeEvent:i}=jK(),{setNodeRef:a,isOver:l}=cK({id:e,data:{date:t,time:n}}),c=n!==void 0?`${Math.floor(n)}:${Math.round((n-Math.floor(n))*60).toString().padStart(2,"0")}`:null;return h.jsx("div",{ref:a,onClick:o,className:Qe("data-dragging:bg-accent flex h-full flex-col overflow-hidden px-0.5 py-1 sm:px-1",s),title:c?`${c}`:void 0,"data-dragging":l&&i?!0:void 0,children:r})}const tCe=({color:e="currentColor",size:t=24,className:n,...r})=>Me.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:e,...r,className:"remixicon "+(n||"")},Me.createElement("path",{d:"M9 1V3H15V1H17V3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H7V1H9ZM20 10H4V19H20V10ZM15.0355 11.136L16.4497 12.5503L11.5 17.5L7.96447 13.9645L9.37868 12.5503L11.5 14.6716L15.0355 11.136ZM7 5H4V8H20V5H17V6H15V5H9V6H7V5Z"})),$$=({color:e="currentColor",size:t=24,className:n,...r})=>Me.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:e,...r,className:"remixicon "+(n||"")},Me.createElement("path",{d:"M9 1V3H15V1H17V3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H7V1H9ZM20 11H4V19H20V11ZM7 5H4V9H20V5H17V7H15V5H9V7H7V5Z"})),nCe=({color:e="currentColor",size:t=24,className:n,...r})=>Me.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:e,...r,className:"remixicon "+(n||"")},Me.createElement("path",{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"}));function rCe(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Array(12).fill(0);let jN=1;class sCe{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...s}=t,o=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:jN++,i=this.toasts.find(l=>l.id===o),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),i?this.toasts=this.toasts.map(l=>l.id===o?(this.publish({...l,...t,id:o,title:r}),{...l,...t,id:o,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:o}),o},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let o=r!==void 0,i;const a=s.then(async c=>{if(i=["resolve",c],Me.isValidElement(c))o=!1,this.create({id:r,type:"default",message:c});else if(iCe(c)&&!c.ok){o=!1;const f=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,y=typeof f=="object"&&!Me.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:m,...y})}else if(c instanceof Error){o=!1;const f=typeof n.error=="function"?await n.error(c):n.error,m=typeof n.description=="function"?await n.description(c):n.description,y=typeof f=="object"&&!Me.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:m,...y})}else if(n.success!==void 0){o=!1;const f=typeof n.success=="function"?await n.success(c):n.success,m=typeof n.description=="function"?await n.description(c):n.description,y=typeof f=="object"&&!Me.isValidElement(f)?f:{message:f};this.create({id:r,type:"success",description:m,...y})}}).catch(async c=>{if(i=["reject",c],n.error!==void 0){o=!1;const u=typeof n.error=="function"?await n.error(c):n.error,f=typeof n.description=="function"?await n.description(c):n.description,g=typeof u=="object"&&!Me.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:f,...g})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||jN++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const yc=new sCe,oCe=(e,t)=>{const n=(t==null?void 0:t.id)||jN++;return yc.addToast({title:e,...t,id:n}),n},iCe=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",aCe=oCe,lCe=()=>yc.toasts,cCe=()=>yc.getActiveToasts(),Bi=Object.assign(aCe,{success:yc.success,info:yc.info,warning:yc.warning,error:yc.error,custom:yc.custom,message:yc.message,promise:yc.promise,dismiss:yc.dismiss,loading:yc.loading},{getHistory:lCe,getToasts:cCe});rCe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function uCe({events:e=[],onEventAdd:t,onEventUpdate:n,onEventDelete:r,className:s,initialView:o="month"}){const[i,a]=w.useState(new Date),[l,c]=w.useState(o),[u,f]=w.useState(!1),[m,g]=w.useState(null);w.useEffect(()=>{const P=j=>{if(!(u||j.target instanceof HTMLInputElement||j.target instanceof HTMLTextAreaElement||j.target instanceof HTMLElement&&j.target.isContentEditable))switch(j.key.toLowerCase()){case"m":c("month");break;case"w":c("week");break;case"d":c("day");break;case"a":c("agenda");break}};return window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P)}},[u]);const y=()=>{l==="month"?a(V4e(i)):l==="week"?a(q4e(i)):l==="day"?a(Ef(i,-1)):l==="agenda"&&a(Ef(i,-N_))},v=()=>{l==="month"?a(rC(i,1)):l==="week"?a(g8(i,1)):l==="day"?a(Ef(i,1)):l==="agenda"&&a(Ef(i,N_))},x=()=>{a(new Date)},E=P=>{console.log("Event selected:",P),g(P),f(!0)},T=P=>{console.log("Creating new event at:",P);const j=P.getMinutes(),V=j%15;V!==0&&(V<7.5?P.setMinutes(j-V):P.setMinutes(j+(15-V)),P.setSeconds(0),P.setMilliseconds(0));const U={id:"",title:"",start:P,end:Z4e(P,1),allDay:!1};g(U),f(!0)},k=P=>{P.id?(n==null||n(P),Bi(`Event "${P.title}" updated`,{description:ir(new Date(P.start),"MMM d, yyyy"),position:"bottom-left"})):(t==null||t({...P,id:Math.random().toString(36).substring(2,11)}),Bi(`Event "${P.title}" added`,{description:ir(new Date(P.start),"MMM d, yyyy"),position:"bottom-left"})),f(!1),g(null)},I=P=>{const j=e.find(V=>V.id===P);r==null||r(P),f(!1),g(null),j&&Bi(`Event "${j.title}" deleted`,{description:ir(new Date(j.start),"MMM d, yyyy"),position:"bottom-left"})},O=P=>{n==null||n(P),Bi(`Event "${P.title}" moved`,{description:ir(new Date(P.start),"MMM d, yyyy"),position:"bottom-left"})},M=w.useMemo(()=>{if(l==="month")return ir(i,"MMMM yyyy");if(l==="week"){const P=Dc(i,{weekStartsOn:0}),j=kb(i,{weekStartsOn:0});return TS(P,j)?ir(P,"MMMM yyyy"):`${ir(P,"MMM")} - ${ir(j,"MMM yyyy")}`}else{if(l==="day")return h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"min-[480px]:hidden","aria-hidden":"true",children:ir(i,"MMM d, yyyy")}),h.jsx("span",{className:"max-[479px]:hidden min-md:hidden","aria-hidden":"true",children:ir(i,"MMMM d, yyyy")}),h.jsx("span",{className:"max-md:hidden",children:ir(i,"EEE MMMM d, yyyy")})]});if(l==="agenda"){const P=i,j=Ef(i,N_-1);return TS(P,j)?ir(P,"MMMM yyyy"):`${ir(P,"MMM")} - ${ir(j,"MMM yyyy")}`}else return ir(i,"MMMM yyyy")}},[i,l]);return h.jsx("div",{className:"flex min-h-[calc(100vh-var(--header-height)-3rem)] flex-col rounded-lg border has-data-[slot=month-view]:flex-1",style:{"--event-height":`${BN}px`,"--event-gap":`${_K}px`,"--week-cells-height":`${px}px`},children:h.jsxs(J4e,{onEventUpdate:O,children:[h.jsxs("div",{className:Qe("flex items-center justify-between p-2 sm:p-4",s),children:[h.jsxs("div",{className:"flex items-center gap-1 sm:gap-4",children:[h.jsxs(wr,{variant:"outline",className:"max-[479px]:aspect-square max-[479px]:p-0!",onClick:x,children:[h.jsx(tCe,{className:"min-[480px]:hidden",size:16,"aria-hidden":"true"}),h.jsx("span",{className:"max-[479px]:sr-only",children:"Today"})]}),h.jsxs("div",{className:"flex items-center sm:gap-2",children:[h.jsx(wr,{variant:"ghost",size:"icon",onClick:y,"aria-label":"Previous",children:h.jsx(w1,{size:16,"aria-hidden":"true"})}),h.jsx(wr,{variant:"ghost",size:"icon",onClick:v,"aria-label":"Next",children:h.jsx(Cf,{size:16,"aria-hidden":"true"})})]}),h.jsx("h2",{className:"text-sm font-semibold sm:text-lg md:text-xl",children:M})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(bw,{children:[h.jsx(yw,{asChild:!0,children:h.jsxs(wr,{variant:"outline",className:"gap-1.5 max-[479px]:h-8",children:[h.jsxs("span",{children:[h.jsx("span",{className:"min-[480px]:hidden","aria-hidden":"true",children:l.charAt(0).toUpperCase()}),h.jsx("span",{className:"max-[479px]:sr-only",children:l.charAt(0).toUpperCase()+l.slice(1)})]}),h.jsx(Df,{className:"-me-1 opacity-60",size:16,"aria-hidden":"true"})]})}),h.jsxs(vw,{align:"end",className:"min-w-32",children:[h.jsxs(au,{onClick:()=>c("month"),children:["Month ",h.jsx(p2,{children:"M"})]}),h.jsxs(au,{onClick:()=>c("week"),children:["Week ",h.jsx(p2,{children:"W"})]}),h.jsxs(au,{onClick:()=>c("day"),children:["Day ",h.jsx(p2,{children:"D"})]}),h.jsxs(au,{onClick:()=>c("agenda"),children:["Agenda ",h.jsx(p2,{children:"A"})]})]})]}),h.jsxs(wr,{className:"max-[479px]:aspect-square max-[479px]:p-0!",size:"sm",onClick:()=>{g(null),f(!0)},children:[h.jsx(Hf,{className:"opacity-60 sm:-ms-1",size:16,"aria-hidden":"true"}),h.jsx("span",{className:"max-sm:sr-only",children:"New event"})]})]})]}),h.jsxs("div",{className:"flex flex-1 flex-col",children:[l==="month"&&h.jsx(a5e,{currentDate:i,events:e,onEventSelect:E,onEventCreate:T}),l==="week"&&h.jsx(l5e,{currentDate:i,events:e,onEventSelect:E,onEventCreate:T}),l==="day"&&h.jsx(eCe,{currentDate:i,events:e,onEventSelect:E,onEventCreate:T}),l==="agenda"&&h.jsx(Q4e,{currentDate:i,events:e,onEventSelect:E})]}),h.jsx(i5e,{event:m,isOpen:u,onClose:()=>{f(!1),g(null)},onSave:k,onDelete:I})]})})}function dCe(e,t,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:n}).format(t).split(/\s/g).slice(2).join(" ")}const J3={},dv={};function Up(e,t){try{const r=(J3[e]||(J3[e]=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format))(t).split("GMT")[1];return r in dv?dv[r]:F$(r,r.split(":"))}catch{if(e in dv)return dv[e];const n=e==null?void 0:e.match(fCe);return n?F$(e,n.slice(1)):NaN}}const fCe=/([+-]\d\d):?(\d\d)?/;function F$(e,t){const n=+(t[0]||0),r=+(t[1]||0),s=+(t[2]||0)/60;return dv[e]=n*60+r>0?n*60+r+s:n*60-r-s}class hd extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(Up(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),HK(this),UN(this)):this.setTime(Date.now())}static tz(t,...n){return n.length?new hd(...n,t):new hd(Date.now(),t)}withTimeZone(t){return new hd(+this,t)}getTimezoneOffset(){const t=-Up(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),UN(this),+this}[Symbol.for("constructDateFrom")](t){return new hd(+new Date(t),this.timeZone)}}const B$=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!B$.test(e))return;const t=e.replace(B$,"$1UTC");hd.prototype[t]&&(e.startsWith("get")?hd.prototype[e]=function(){return this.internal[t]()}:(hd.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),hCe(this),+this},hd.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),UN(this),+this}))});function UN(e){e.internal.setTime(+e),e.internal.setUTCSeconds(e.internal.getUTCSeconds()-Math.round(-Up(e.timeZone,e)*60))}function hCe(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),HK(e)}function HK(e){const t=Up(e.timeZone,e),n=t>0?Math.floor(t):Math.ceil(t),r=new Date(+e);r.setUTCHours(r.getUTCHours()-1);const s=-new Date(+e).getTimezoneOffset(),o=-new Date(+r).getTimezoneOffset(),i=s-o,a=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();i&&a&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+i);const l=s-n;l&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+l);const c=new Date(+e);c.setUTCSeconds(0);const u=s>0?c.getSeconds():(c.getSeconds()-60)%60,f=Math.round(-(Up(e.timeZone,e)*60))%60;(f||u)&&(e.internal.setUTCSeconds(e.internal.getUTCSeconds()+f),Date.prototype.setUTCSeconds.call(e,Date.prototype.getUTCSeconds.call(e)+f+u));const m=Up(e.timeZone,e),g=m>0?Math.floor(m):Math.ceil(m),v=-new Date(+e).getTimezoneOffset()-g,x=g!==n,E=v-l;if(x&&E){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+E);const T=Up(e.timeZone,e),k=T>0?Math.floor(T):Math.ceil(T),I=g-k;I&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+I),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+I))}}class Af extends hd{static tz(t,...n){return n.length?new Af(...n,t):new Af(Date.now(),t)}toISOString(){const[t,n,r]=this.tzComponents(),s=`${t}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+s}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,n,r,s]=this.internal.toUTCString().split(" ");return`${t==null?void 0:t.slice(0,-1)} ${r} ${n} ${s}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[n,r,s]=this.tzComponents();return`${t} GMT${n}${r}${s} (${dCe(this.timeZone,this)})`}toLocaleString(t,n){return Date.prototype.toLocaleString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleDateString(t,n){return Date.prototype.toLocaleDateString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleTimeString(t,n){return Date.prototype.toLocaleTimeString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),n=t>0?"-":"+",r=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),s=String(Math.abs(t)%60).padStart(2,"0");return[n,r,s]}withTimeZone(t){return new Af(+this,t)}[Symbol.for("constructDateFrom")](t){return new Af(+new Date(t),this.timeZone)}}const z$=5,pCe=4;function mCe(e,t){const n=t.startOfMonth(e),r=n.getDay()>0?n.getDay():7,s=t.addDays(e,-r+1),o=t.addDays(s,z$*7-1);return t.getMonth(e)===t.getMonth(o)?z$:pCe}function VK(e,t){const n=t.startOfMonth(e),r=n.getDay();return r===1?n:r===0?t.addDays(n,-6):t.addDays(n,-1*(r-1))}function gCe(e,t){const n=VK(e,t),r=mCe(e,t);return t.addDays(n,r*7-1)}const qK={...t1,labels:{labelDayButton:(e,t,n,r)=>{let s;r&&typeof r.format=="function"?s=r.format.bind(r):s=(i,a)=>ir(i,a,{locale:t1,...n});let o=s(e,"PPPP");return t.today&&(o=`Today, ${o}`),t.selected&&(o=`${o}, selected`),o},labelMonthDropdown:"Choose the Month",labelNext:"Go to the Next Month",labelPrevious:"Go to the Previous Month",labelWeekNumber:e=>`Week ${e}`,labelYearDropdown:"Choose the Year",labelGrid:(e,t,n)=>{let r;return n&&typeof n.format=="function"?r=n.format.bind(n):r=(s,o)=>ir(s,o,{locale:t1,...t}),r(e,"LLLL yyyy")},labelGridcell:(e,t,n,r)=>{let s;r&&typeof r.format=="function"?s=r.format.bind(r):s=(i,a)=>ir(i,a,{locale:t1,...n});let o=s(e,"PPPP");return t!=null&&t.today&&(o=`Today, ${o}`),o},labelNav:"Navigation bar",labelWeekNumberHeader:"Week Number",labelWeekday:(e,t,n)=>{let r;return n&&typeof n.format=="function"?r=n.format.bind(n):r=(s,o)=>ir(s,o,{locale:t1,...t}),r(e,"cccc")}}};class Xl{constructor(t,n){this.Date=Date,this.today=()=>{var r;return(r=this.overrides)!=null&&r.today?this.overrides.today():this.options.timeZone?Af.tz(this.options.timeZone):new this.Date},this.newDate=(r,s,o)=>{var i;return(i=this.overrides)!=null&&i.newDate?this.overrides.newDate(r,s,o):this.options.timeZone?new Af(r,s,o,this.options.timeZone):new Date(r,s,o)},this.addDays=(r,s)=>{var o;return(o=this.overrides)!=null&&o.addDays?this.overrides.addDays(r,s):Ef(r,s)},this.addMonths=(r,s)=>{var o;return(o=this.overrides)!=null&&o.addMonths?this.overrides.addMonths(r,s):rC(r,s)},this.addWeeks=(r,s)=>{var o;return(o=this.overrides)!=null&&o.addWeeks?this.overrides.addWeeks(r,s):g8(r,s)},this.addYears=(r,s)=>{var o;return(o=this.overrides)!=null&&o.addYears?this.overrides.addYears(r,s):ATe(r,s)},this.differenceInCalendarDays=(r,s)=>{var o;return(o=this.overrides)!=null&&o.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,s):kf(r,s)},this.differenceInCalendarMonths=(r,s)=>{var o;return(o=this.overrides)!=null&&o.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,s):OTe(r,s)},this.eachMonthOfInterval=r=>{var s;return(s=this.overrides)!=null&&s.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):$Te(r)},this.eachYearOfInterval=r=>{var a;const s=(a=this.overrides)!=null&&a.eachYearOfInterval?this.overrides.eachYearOfInterval(r):BTe(r),o=new Set(s.map(l=>this.getYear(l)));if(o.size===s.length)return s;const i=[];return o.forEach(l=>{i.push(new Date(l,0,1))}),i},this.endOfBroadcastWeek=r=>{var s;return(s=this.overrides)!=null&&s.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):gCe(r,this)},this.endOfISOWeek=r=>{var s;return(s=this.overrides)!=null&&s.endOfISOWeek?this.overrides.endOfISOWeek(r):zTe(r)},this.endOfMonth=r=>{var s;return(s=this.overrides)!=null&&s.endOfMonth?this.overrides.endOfMonth(r):NK(r)},this.endOfWeek=(r,s)=>{var o;return(o=this.overrides)!=null&&o.endOfWeek?this.overrides.endOfWeek(r,s):kb(r,this.options)},this.endOfYear=r=>{var s;return(s=this.overrides)!=null&&s.endOfYear?this.overrides.endOfYear(r):FTe(r)},this.format=(r,s,o)=>{var a;const i=(a=this.overrides)!=null&&a.format?this.overrides.format(r,s,this.options):ir(r,s,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(i):i},this.getISOWeek=r=>{var s;return(s=this.overrides)!=null&&s.getISOWeek?this.overrides.getISOWeek(r):DK(r)},this.getMonth=(r,s)=>{var o;return(o=this.overrides)!=null&&o.getMonth?this.overrides.getMonth(r,this.options):$4e(r,this.options)},this.getYear=(r,s)=>{var o;return(o=this.overrides)!=null&&o.getYear?this.overrides.getYear(r,this.options):F4e(r,this.options)},this.getWeek=(r,s)=>{var o;return(o=this.overrides)!=null&&o.getWeek?this.overrides.getWeek(r,this.options):LK(r,this.options)},this.isAfter=(r,s)=>{var o;return(o=this.overrides)!=null&&o.isAfter?this.overrides.isAfter(r,s):B4e(r,s)},this.isBefore=(r,s)=>{var o;return(o=this.overrides)!=null&&o.isBefore?this.overrides.isBefore(r,s):SS(r,s)},this.isDate=r=>{var s;return(s=this.overrides)!=null&&s.isDate?this.overrides.isDate(r):AK(r)},this.isSameDay=(r,s)=>{var o;return(o=this.overrides)!=null&&o.isSameDay?this.overrides.isSameDay(r,s):gs(r,s)},this.isSameMonth=(r,s)=>{var o;return(o=this.overrides)!=null&&o.isSameMonth?this.overrides.isSameMonth(r,s):TS(r,s)},this.isSameYear=(r,s)=>{var o;return(o=this.overrides)!=null&&o.isSameYear?this.overrides.isSameYear(r,s):z4e(r,s)},this.max=r=>{var s;return(s=this.overrides)!=null&&s.max?this.overrides.max(r):NTe(r)},this.min=r=>{var s;return(s=this.overrides)!=null&&s.min?this.overrides.min(r):ITe(r)},this.setMonth=(r,s)=>{var o;return(o=this.overrides)!=null&&o.setMonth?this.overrides.setMonth(r,s):U4e(r,s)},this.setYear=(r,s)=>{var o;return(o=this.overrides)!=null&&o.setYear?this.overrides.setYear(r,s):H4e(r,s)},this.startOfBroadcastWeek=(r,s)=>{var o;return(o=this.overrides)!=null&&o.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):VK(r,this)},this.startOfDay=r=>{var s;return(s=this.overrides)!=null&&s.startOfDay?this.overrides.startOfDay(r):qf(r)},this.startOfISOWeek=r=>{var s;return(s=this.overrides)!=null&&s.startOfISOWeek?this.overrides.startOfISOWeek(r):mx(r)},this.startOfMonth=r=>{var s;return(s=this.overrides)!=null&&s.startOfMonth?this.overrides.startOfMonth(r):MK(r)},this.startOfWeek=(r,s)=>{var o;return(o=this.overrides)!=null&&o.startOfWeek?this.overrides.startOfWeek(r,this.options):Dc(r,this.options)},this.startOfYear=r=>{var s;return(s=this.overrides)!=null&&s.startOfYear?this.overrides.startOfYear(r):OK(r)},this.options={locale:qK,...t},this.overrides=n}getDigitMap(){const{numerals:t="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:t}),r={};for(let s=0;s<10;s++)r[s.toString()]=n.format(s);return r}replaceDigits(t){const n=this.getDigitMap();return t.replace(/\d/g,r=>n[r]||r)}formatNumber(t){return this.replaceDigits(t.toString())}getMonthYearOrder(){var n;const t=(n=this.options.locale)==null?void 0:n.code;return t&&Xl.yearFirstLocales.has(t)?"year-first":"month-first"}formatMonthYear(t){const{locale:n,timeZone:r,numerals:s}=this.options,o=n==null?void 0:n.code;if(o&&Xl.yearFirstLocales.has(o))try{return new Intl.DateTimeFormat(o,{month:"long",year:"numeric",timeZone:r,numberingSystem:s}).format(t)}catch{}const i=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(t,i)}}Xl.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const _d=new Xl;class GK{constructor(t,n,r=_d){this.date=t,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(t,n)),this.dateLib=r,this.isoDate=r.format(t,"yyyy-MM-dd"),this.displayMonthId=r.format(n,"yyyy-MM"),this.dateMonthId=r.format(t,"yyyy-MM")}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class bCe{constructor(t,n){this.date=t,this.weeks=n}}class yCe{constructor(t,n){this.days=n,this.weekNumber=t}}function vCe(e){return Me.createElement("button",{...e})}function xCe(e){return Me.createElement("span",{...e})}function wCe(e){const{size:t=24,orientation:n="left",className:r}=e;return Me.createElement("svg",{className:r,width:t,height:t,viewBox:"0 0 24 24"},n==="up"&&Me.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&Me.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&Me.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&Me.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function ECe(e){const{day:t,modifiers:n,...r}=e;return Me.createElement("td",{...r})}function _Ce(e){const{day:t,modifiers:n,...r}=e,s=Me.useRef(null);return Me.useEffect(()=>{var o;n.focused&&((o=s.current)==null||o.focus())},[n.focused]),Me.createElement("button",{ref:s,...r})}var Rn;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(Rn||(Rn={}));var ko;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(ko||(ko={}));var hu;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(hu||(hu={}));var zl;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(zl||(zl={}));function SCe(e){const{options:t,className:n,components:r,classNames:s,...o}=e,i=[s[Rn.Dropdown],n].join(" "),a=t==null?void 0:t.find(({value:l})=>l===o.value);return Me.createElement("span",{"data-disabled":o.disabled,className:s[Rn.DropdownRoot]},Me.createElement(r.Select,{className:i,...o},t==null?void 0:t.map(({value:l,label:c,disabled:u})=>Me.createElement(r.Option,{key:l,value:l,disabled:u},c))),Me.createElement("span",{className:s[Rn.CaptionLabel],"aria-hidden":!0},a==null?void 0:a.label,Me.createElement(r.Chevron,{orientation:"down",size:18,className:s[Rn.Chevron]})))}function TCe(e){return Me.createElement("div",{...e})}function CCe(e){return Me.createElement("div",{...e})}function kCe(e){const{calendarMonth:t,displayIndex:n,...r}=e;return Me.createElement("div",{...r},e.children)}function ACe(e){const{calendarMonth:t,displayIndex:n,...r}=e;return Me.createElement("div",{...r})}function NCe(e){return Me.createElement("table",{...e})}function ICe(e){return Me.createElement("div",{...e})}const WK=w.createContext(void 0);function Om(){const e=w.useContext(WK);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function RCe(e){const{components:t}=Om();return Me.createElement(t.Dropdown,{...e})}function MCe(e){const{onPreviousClick:t,onNextClick:n,previousMonth:r,nextMonth:s,...o}=e,{components:i,classNames:a,labels:{labelPrevious:l,labelNext:c}}=Om(),u=w.useCallback(m=>{s&&(n==null||n(m))},[s,n]),f=w.useCallback(m=>{r&&(t==null||t(m))},[r,t]);return Me.createElement("nav",{...o},Me.createElement(i.PreviousMonthButton,{type:"button",className:a[Rn.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":l(r),onClick:f},Me.createElement(i.Chevron,{disabled:r?void 0:!0,className:a[Rn.Chevron],orientation:"left"})),Me.createElement(i.NextMonthButton,{type:"button",className:a[Rn.NextMonthButton],tabIndex:s?void 0:-1,"aria-disabled":s?void 0:!0,"aria-label":c(s),onClick:u},Me.createElement(i.Chevron,{disabled:s?void 0:!0,orientation:"right",className:a[Rn.Chevron]})))}function OCe(e){const{components:t}=Om();return Me.createElement(t.Button,{...e})}function DCe(e){return Me.createElement("option",{...e})}function PCe(e){const{components:t}=Om();return Me.createElement(t.Button,{...e})}function LCe(e){const{rootRef:t,...n}=e;return Me.createElement("div",{...n,ref:t})}function $Ce(e){return Me.createElement("select",{...e})}function FCe(e){const{week:t,...n}=e;return Me.createElement("tr",{...n})}function BCe(e){return Me.createElement("th",{...e})}function zCe(e){return Me.createElement("thead",{"aria-hidden":!0},Me.createElement("tr",{...e}))}function jCe(e){const{week:t,...n}=e;return Me.createElement("th",{...n})}function UCe(e){return Me.createElement("th",{...e})}function HCe(e){return Me.createElement("tbody",{...e})}function VCe(e){const{components:t}=Om();return Me.createElement(t.Dropdown,{...e})}const qCe=Object.freeze(Object.defineProperty({__proto__:null,Button:vCe,CaptionLabel:xCe,Chevron:wCe,Day:ECe,DayButton:_Ce,Dropdown:SCe,DropdownNav:TCe,Footer:CCe,Month:kCe,MonthCaption:ACe,MonthGrid:NCe,Months:ICe,MonthsDropdown:RCe,Nav:MCe,NextMonthButton:OCe,Option:DCe,PreviousMonthButton:PCe,Root:LCe,Select:$Ce,Week:FCe,WeekNumber:jCe,WeekNumberHeader:UCe,Weekday:BCe,Weekdays:zCe,Weeks:HCe,YearsDropdown:VCe},Symbol.toStringTag,{value:"Module"}));function Nf(e,t,n=!1,r=_d){let{from:s,to:o}=e;const{differenceInCalendarDays:i,isSameDay:a}=r;return s&&o?(i(o,s)<0&&([s,o]=[o,s]),i(t,s)>=(n?1:0)&&i(o,t)>=(n?1:0)):!n&&o?a(o,t):!n&&s?a(s,t):!1}function v8(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function oC(e){return!!(e&&typeof e=="object"&&"from"in e)}function x8(e){return!!(e&&typeof e=="object"&&"after"in e)}function w8(e){return!!(e&&typeof e=="object"&&"before"in e)}function YK(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function KK(e,t){return Array.isArray(e)&&e.every(t.isDate)}function If(e,t,n=_d){const r=Array.isArray(t)?t:[t],{isSameDay:s,differenceInCalendarDays:o,isAfter:i}=n;return r.some(a=>{if(typeof a=="boolean")return a;if(n.isDate(a))return s(e,a);if(KK(a,n))return a.some(l=>s(e,l));if(oC(a))return Nf(a,e,!1,n);if(YK(a))return Array.isArray(a.dayOfWeek)?a.dayOfWeek.includes(e.getDay()):a.dayOfWeek===e.getDay();if(v8(a)){const l=o(a.before,e),c=o(a.after,e),u=l>0,f=c<0;return i(a.before,a.after)?f&&u:u||f}return x8(a)?o(e,a.after)>0:w8(a)?o(a.before,e)>0:typeof a=="function"?a(e):!1})}function GCe(e,t,n,r,s){const{disabled:o,hidden:i,modifiers:a,showOutsideDays:l,broadcastCalendar:c,today:u=s.today()}=t,{isSameDay:f,isSameMonth:m,startOfMonth:g,isBefore:y,endOfMonth:v,isAfter:x}=s,E=n&&g(n),T=r&&v(r),k={[ko.focused]:[],[ko.outside]:[],[ko.disabled]:[],[ko.hidden]:[],[ko.today]:[]},I={};for(const O of e){const{date:M,displayMonth:P}=O,j=!!(P&&!m(M,P)),V=!!(E&&y(M,E)),U=!!(T&&x(M,T)),z=!!(o&&If(M,o,s)),H=!!(i&&If(M,i,s))||V||U||!c&&!l&&j||c&&l===!1&&j,F=f(M,u);j&&k.outside.push(O),z&&k.disabled.push(O),H&&k.hidden.push(O),F&&k.today.push(O),a&&Object.keys(a).forEach(G=>{const X=a==null?void 0:a[G];X&&If(M,X,s)&&(I[G]?I[G].push(O):I[G]=[O])})}return O=>{const M={[ko.focused]:!1,[ko.disabled]:!1,[ko.hidden]:!1,[ko.outside]:!1,[ko.today]:!1},P={};for(const j in k){const V=k[j];M[j]=V.some(U=>U===O)}for(const j in I)P[j]=I[j].some(V=>V===O);return{...M,...P}}}function WCe(e,t,n={}){return Object.entries(e).filter(([,s])=>s===!0).reduce((s,[o])=>(n[o]?s.push(n[o]):t[ko[o]]?s.push(t[ko[o]]):t[hu[o]]&&s.push(t[hu[o]]),s),[t[Rn.Day]])}function YCe(e){return{...qCe,...e}}function KCe(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([n,r])=>{n.startsWith("data-")&&(t[n]=r)}),t}function ZCe(){const e={};for(const t in Rn)e[Rn[t]]=`rdp-${Rn[t]}`;for(const t in ko)e[ko[t]]=`rdp-${ko[t]}`;for(const t in hu)e[hu[t]]=`rdp-${hu[t]}`;for(const t in zl)e[zl[t]]=`rdp-${zl[t]}`;return e}function ZK(e,t,n){return(n??new Xl(t)).formatMonthYear(e)}const JCe=ZK;function XCe(e,t,n){return(n??new Xl(t)).format(e,"d")}function QCe(e,t=_d){return t.format(e,"LLLL")}function eke(e,t,n){return(n??new Xl(t)).format(e,"cccccc")}function tke(e,t=_d){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function nke(){return""}function JK(e,t=_d){return t.format(e,"yyyy")}const rke=JK,ske=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:ZK,formatDay:XCe,formatMonthCaption:JCe,formatMonthDropdown:QCe,formatWeekNumber:tke,formatWeekNumberHeader:nke,formatWeekdayName:eke,formatYearCaption:rke,formatYearDropdown:JK},Symbol.toStringTag,{value:"Module"}));function oke(e){return e!=null&&e.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e!=null&&e.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...ske,...e}}function E8(e,t,n,r){let s=(r??new Xl(n)).format(e,"PPPP");return t.today&&(s=`Today, ${s}`),t.selected&&(s=`${s}, selected`),s}const ike=E8;function _8(e,t,n){return(n??new Xl(t)).formatMonthYear(e)}const ake=_8;function XK(e,t,n,r){let s=(r??new Xl(n)).format(e,"PPPP");return t!=null&&t.today&&(s=`Today, ${s}`),s}function QK(e){return"Choose the Month"}function eZ(){return""}const lke="Go to the Next Month";function S8(e,t){return lke}function T8(e){return"Go to the Previous Month"}function tZ(e,t,n){return(n??new Xl(t)).format(e,"cccc")}function nZ(e,t){return`Week ${e}`}function rZ(e){return"Week Number"}function sZ(e){return"Choose the Year"}const cke=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:ake,labelDay:ike,labelDayButton:E8,labelGrid:_8,labelGridcell:XK,labelMonthDropdown:QK,labelNav:eZ,labelNext:S8,labelPrevious:T8,labelWeekNumber:nZ,labelWeekNumberHeader:rZ,labelWeekday:tZ,labelYearDropdown:sZ},Symbol.toStringTag,{value:"Module"})),eu=(e,t,n)=>t||(n?typeof n=="function"?n:(...r)=>n:e);function uke(e,t){var r;const n=((r=t.locale)==null?void 0:r.labels)??{};return{...cke,...e??{},labelDayButton:eu(E8,e==null?void 0:e.labelDayButton,n.labelDayButton),labelMonthDropdown:eu(QK,e==null?void 0:e.labelMonthDropdown,n.labelMonthDropdown),labelNext:eu(S8,e==null?void 0:e.labelNext,n.labelNext),labelPrevious:eu(T8,e==null?void 0:e.labelPrevious,n.labelPrevious),labelWeekNumber:eu(nZ,e==null?void 0:e.labelWeekNumber,n.labelWeekNumber),labelYearDropdown:eu(sZ,e==null?void 0:e.labelYearDropdown,n.labelYearDropdown),labelGrid:eu(_8,e==null?void 0:e.labelGrid,n.labelGrid),labelGridcell:eu(XK,e==null?void 0:e.labelGridcell,n.labelGridcell),labelNav:eu(eZ,e==null?void 0:e.labelNav,n.labelNav),labelWeekNumberHeader:eu(rZ,e==null?void 0:e.labelWeekNumberHeader,n.labelWeekNumberHeader),labelWeekday:eu(tZ,e==null?void 0:e.labelWeekday,n.labelWeekday)}}function dke(e,t,n,r,s){const{startOfMonth:o,startOfYear:i,endOfYear:a,eachMonthOfInterval:l,getMonth:c}=s;return l({start:i(e),end:a(e)}).map(m=>{const g=r.formatMonthDropdown(m,s),y=c(m),v=t&&m<o(t)||n&&m>o(n)||!1;return{value:y,label:g,disabled:v}})}function fke(e,t={},n={}){let r={...t==null?void 0:t[Rn.Day]};return Object.entries(e).filter(([,s])=>s===!0).forEach(([s])=>{r={...r,...n==null?void 0:n[s]}}),r}function hke(e,t,n,r){const s=r??e.today(),o=n?e.startOfBroadcastWeek(s,e):t?e.startOfISOWeek(s):e.startOfWeek(s),i=[];for(let a=0;a<7;a++){const l=e.addDays(o,a);i.push(l)}return i}function pke(e,t,n,r,s=!1){if(!e||!t)return;const{startOfYear:o,endOfYear:i,eachYearOfInterval:a,getYear:l}=r,c=o(e),u=i(t),f=a({start:c,end:u});return s&&f.reverse(),f.map(m=>{const g=n.formatYearDropdown(m,r);return{value:l(m),label:g,disabled:!1}})}const Cw=e=>e instanceof HTMLElement?e:null,X3=e=>[...e.querySelectorAll("[data-animated-month]")??[]],mke=e=>Cw(e.querySelector("[data-animated-month]")),Q3=e=>Cw(e.querySelector("[data-animated-caption]")),e5=e=>Cw(e.querySelector("[data-animated-weeks]")),gke=e=>Cw(e.querySelector("[data-animated-nav]")),bke=e=>Cw(e.querySelector("[data-animated-weekdays]"));function yke(e,t,{classNames:n,months:r,focused:s,dateLib:o}){const i=w.useRef(null),a=w.useRef(r),l=w.useRef(!1);w.useLayoutEffect(()=>{const c=a.current;if(a.current=r,!t||!e.current||!(e.current instanceof HTMLElement)||r.length===0||c.length===0||r.length!==c.length)return;const u=o.isSameMonth(r[0].date,c[0].date),f=o.isAfter(r[0].date,c[0].date),m=f?n[zl.caption_after_enter]:n[zl.caption_before_enter],g=f?n[zl.weeks_after_enter]:n[zl.weeks_before_enter],y=i.current,v=e.current.cloneNode(!0);if(v instanceof HTMLElement?(X3(v).forEach(k=>{if(!(k instanceof HTMLElement))return;const I=mke(k);I&&k.contains(I)&&k.removeChild(I);const O=Q3(k);O&&O.classList.remove(m);const M=e5(k);M&&M.classList.remove(g)}),i.current=v):i.current=null,l.current||u||s)return;const x=y instanceof HTMLElement?X3(y):[],E=X3(e.current);if(E!=null&&E.every(T=>T instanceof HTMLElement)&&x&&x.every(T=>T instanceof HTMLElement)){l.current=!0,e.current.style.isolation="isolate";const T=gke(e.current);T&&(T.style.zIndex="1"),E.forEach((k,I)=>{const O=x[I];if(!O)return;k.style.position="relative",k.style.overflow="hidden";const M=Q3(k);M&&M.classList.add(m);const P=e5(k);P&&P.classList.add(g);const j=()=>{l.current=!1,e.current&&(e.current.style.isolation=""),T&&(T.style.zIndex=""),M&&M.classList.remove(m),P&&P.classList.remove(g),k.style.position="",k.style.overflow="",k.contains(O)&&k.removeChild(O)};O.style.pointerEvents="none",O.style.position="absolute",O.style.overflow="hidden",O.setAttribute("aria-hidden","true");const V=bke(O);V&&(V.style.opacity="0");const U=Q3(O);U&&(U.classList.add(f?n[zl.caption_before_exit]:n[zl.caption_after_exit]),U.addEventListener("animationend",j));const z=e5(O);z&&z.classList.add(f?n[zl.weeks_before_exit]:n[zl.weeks_after_exit]),k.insertBefore(O,k.firstChild)})}})}function vke(e,t,n,r){const s=e[0],o=e[e.length-1],{ISOWeek:i,fixedWeeks:a,broadcastCalendar:l}=n??{},{addDays:c,differenceInCalendarDays:u,differenceInCalendarMonths:f,endOfBroadcastWeek:m,endOfISOWeek:g,endOfMonth:y,endOfWeek:v,isAfter:x,startOfBroadcastWeek:E,startOfISOWeek:T,startOfWeek:k}=r,I=l?E(s,r):i?T(s):k(s),O=l?m(o):i?g(y(o)):v(y(o)),M=t&&(l?m(t):i?g(t):v(t)),P=M&&x(O,M)?M:O,j=u(P,I),V=f(o,s)+1,U=[];for(let F=0;F<=j;F++){const G=c(I,F);U.push(G)}const H=(l?35:42)*V;if(a&&U.length<H){const F=H-U.length;for(let G=0;G<F;G++){const X=c(U[U.length-1],1);U.push(X)}}return U}function xke(e){const t=[];return e.reduce((n,r)=>{const s=r.weeks.reduce((o,i)=>o.concat(i.days.slice()),t.slice());return n.concat(s.slice())},t.slice())}function wke(e,t,n,r){const{numberOfMonths:s=1}=n,o=[];for(let i=0;i<s;i++){const a=r.addMonths(e,i);if(t&&a>t)break;o.push(a)}return o}function j$(e,t,n,r){const{month:s,defaultMonth:o,today:i=r.today(),numberOfMonths:a=1}=e;let l=s||o||i;const{differenceInCalendarMonths:c,addMonths:u,startOfMonth:f}=r;if(n&&c(n,l)<a-1){const m=-1*(a-1);l=u(n,m)}return t&&c(l,t)<0&&(l=t),f(l)}function Eke(e,t,n,r){const{addDays:s,endOfBroadcastWeek:o,endOfISOWeek:i,endOfMonth:a,endOfWeek:l,getISOWeek:c,getWeek:u,startOfBroadcastWeek:f,startOfISOWeek:m,startOfWeek:g}=r,y=e.reduce((v,x)=>{const E=n.broadcastCalendar?f(x,r):n.ISOWeek?m(x):g(x),T=n.broadcastCalendar?o(x):n.ISOWeek?i(a(x)):l(a(x)),k=t.filter(P=>P>=E&&P<=T),I=n.broadcastCalendar?35:42;if(n.fixedWeeks&&k.length<I){const P=t.filter(j=>{const V=I-k.length;return j>T&&j<=s(T,V)});k.push(...P)}const O=k.reduce((P,j)=>{const V=n.ISOWeek?c(j):u(j),U=P.find(H=>H.weekNumber===V),z=new GK(j,x,r);return U?U.days.push(z):P.push(new yCe(V,[z])),P},[]),M=new bCe(x,O);return v.push(M),v},[]);return n.reverseMonths?y.reverse():y}function _ke(e,t){let{startMonth:n,endMonth:r}=e;const{startOfYear:s,startOfDay:o,startOfMonth:i,endOfMonth:a,addYears:l,endOfYear:c,newDate:u,today:f}=t,{fromYear:m,toYear:g,fromMonth:y,toMonth:v}=e;!n&&y&&(n=y),!n&&m&&(n=t.newDate(m,0,1)),!r&&v&&(r=v),!r&&g&&(r=u(g,11,31));const x=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return n?n=i(n):m?n=u(m,0,1):!n&&x&&(n=s(l(e.today??f(),-100))),r?r=a(r):g?r=u(g,11,31):!r&&x&&(r=c(e.today??f())),[n&&o(n),r&&o(r)]}function Ske(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:s,numberOfMonths:o=1}=n,{startOfMonth:i,addMonths:a,differenceInCalendarMonths:l}=r,c=s?o:1,u=i(e);if(!t)return a(u,c);if(!(l(t,e)<o))return a(u,c)}function Tke(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:s,numberOfMonths:o}=n,{startOfMonth:i,addMonths:a,differenceInCalendarMonths:l}=r,c=s?o??1:1,u=i(e);if(!t)return a(u,-c);if(!(l(u,t)<=0))return a(u,-c)}function Cke(e){const t=[];return e.reduce((n,r)=>n.concat(r.weeks.slice()),t.slice())}function iC(e,t){const[n,r]=w.useState(e);return[t===void 0?n:t,r]}function kke(e,t){var I;const[n,r]=_ke(e,t),{startOfMonth:s,endOfMonth:o}=t,i=j$(e,n,r,t),[a,l]=iC(i,e.month?i:void 0);w.useEffect(()=>{const O=j$(e,n,r,t);l(O)},[e.timeZone]);const{months:c,weeks:u,days:f,previousMonth:m,nextMonth:g}=w.useMemo(()=>{const O=wke(a,r,{numberOfMonths:e.numberOfMonths},t),M=vke(O,e.endMonth?o(e.endMonth):void 0,{ISOWeek:e.ISOWeek,fixedWeeks:e.fixedWeeks,broadcastCalendar:e.broadcastCalendar},t),P=Eke(O,M,{broadcastCalendar:e.broadcastCalendar,fixedWeeks:e.fixedWeeks,ISOWeek:e.ISOWeek,reverseMonths:e.reverseMonths},t),j=Cke(P),V=xke(P),U=Tke(a,n,e,t),z=Ske(a,r,e,t);return{months:P,weeks:j,days:V,previousMonth:U,nextMonth:z}},[t,a.getTime(),r==null?void 0:r.getTime(),n==null?void 0:n.getTime(),e.disableNavigation,e.broadcastCalendar,(I=e.endMonth)==null?void 0:I.getTime(),e.fixedWeeks,e.ISOWeek,e.numberOfMonths,e.pagedNavigation,e.reverseMonths]),{disableNavigation:y,onMonthChange:v}=e,x=O=>u.some(M=>M.days.some(P=>P.isEqualTo(O))),E=O=>{if(y)return;let M=s(O);n&&M<s(n)&&(M=s(n)),r&&M>s(r)&&(M=s(r)),l(M),v==null||v(M)};return{months:c,weeks:u,days:f,navStart:n,navEnd:r,previousMonth:m,nextMonth:g,goToMonth:E,goToDay:O=>{x(O)||E(O.date)}}}var Qu;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(Qu||(Qu={}));function U$(e){return!e[ko.disabled]&&!e[ko.hidden]&&!e[ko.outside]}function Ake(e,t,n,r){let s,o=-1;for(const i of e){const a=t(i);U$(a)&&(a[ko.focused]&&o<Qu.FocusedModifier?(s=i,o=Qu.FocusedModifier):r!=null&&r.isEqualTo(i)&&o<Qu.LastFocused?(s=i,o=Qu.LastFocused):n(i.date)&&o<Qu.Selected?(s=i,o=Qu.Selected):a[ko.today]&&o<Qu.Today&&(s=i,o=Qu.Today))}return s||(s=e.find(i=>U$(t(i)))),s}function Nke(e,t,n,r,s,o,i){const{ISOWeek:a,broadcastCalendar:l}=o,{addDays:c,addMonths:u,addWeeks:f,addYears:m,endOfBroadcastWeek:g,endOfISOWeek:y,endOfWeek:v,max:x,min:E,startOfBroadcastWeek:T,startOfISOWeek:k,startOfWeek:I}=i;let M={day:c,week:f,month:u,year:m,startOfWeek:P=>l?T(P,i):a?k(P):I(P),endOfWeek:P=>l?g(P):a?y(P):v(P)}[e](n,t==="after"?1:-1);return t==="before"&&r?M=x([r,M]):t==="after"&&s&&(M=E([s,M])),M}function oZ(e,t,n,r,s,o,i,a=0){if(a>365)return;const l=Nke(e,t,n.date,r,s,o,i),c=!!(o.disabled&&If(l,o.disabled,i)),u=!!(o.hidden&&If(l,o.hidden,i)),f=l,m=new GK(l,f,i);return!c&&!u?m:oZ(e,t,m,r,s,o,i,a+1)}function Ike(e,t,n,r,s){const{autoFocus:o}=e,[i,a]=w.useState(),l=Ake(t.days,n,r||(()=>!1),i),[c,u]=w.useState(o?l:void 0);return{isFocusTarget:v=>!!(l!=null&&l.isEqualTo(v)),setFocused:u,focused:c,blur:()=>{a(c),u(void 0)},moveFocus:(v,x)=>{if(!c)return;const E=oZ(v,x,c,t.navStart,t.navEnd,e,s);E&&(e.disableNavigation&&!t.days.some(k=>k.isEqualTo(E))||(t.goToDay(E),u(E)))}}}function Rke(e,t){const{selected:n,required:r,onSelect:s}=e,[o,i]=iC(n,s?n:void 0),a=s?n:o,{isSameDay:l}=t,c=g=>(a==null?void 0:a.some(y=>l(y,g)))??!1,{min:u,max:f}=e;return{selected:a,select:(g,y,v)=>{let x=[...a??[]];if(c(g)){if((a==null?void 0:a.length)===u||r&&(a==null?void 0:a.length)===1)return;x=a==null?void 0:a.filter(E=>!l(E,g))}else(a==null?void 0:a.length)===f?x=[g]:x=[...x,g];return s||i(x),s==null||s(x,g,y,v),x},isSelected:c}}function Mke(e,t,n=0,r=0,s=!1,o=_d){const{from:i,to:a}=t||{},{isSameDay:l,isAfter:c,isBefore:u}=o;let f;if(!i&&!a)f={from:e,to:n>0?void 0:e};else if(i&&!a)l(i,e)?n===0?f={from:i,to:e}:s?f={from:i,to:void 0}:f=void 0:u(e,i)?f={from:e,to:i}:f={from:i,to:e};else if(i&&a)if(l(i,e)&&l(a,e))s?f={from:i,to:a}:f=void 0;else if(l(i,e))f={from:i,to:n>0?void 0:e};else if(l(a,e))f={from:e,to:n>0?void 0:e};else if(u(e,i))f={from:e,to:a};else if(c(e,i))f={from:i,to:e};else if(c(e,a))f={from:i,to:e};else throw new Error("Invalid range");if(f!=null&&f.from&&(f!=null&&f.to)){const m=o.differenceInCalendarDays(f.to,f.from);r>0&&m>r?f={from:e,to:void 0}:n>1&&m<n&&(f={from:e,to:void 0})}return f}function Oke(e,t,n=_d){const r=Array.isArray(t)?t:[t];let s=e.from;const o=n.differenceInCalendarDays(e.to,e.from),i=Math.min(o,6);for(let a=0;a<=i;a++){if(r.includes(s.getDay()))return!0;s=n.addDays(s,1)}return!1}function H$(e,t,n=_d){return Nf(e,t.from,!1,n)||Nf(e,t.to,!1,n)||Nf(t,e.from,!1,n)||Nf(t,e.to,!1,n)}function Dke(e,t,n=_d){const r=Array.isArray(t)?t:[t];if(r.filter(a=>typeof a!="function").some(a=>typeof a=="boolean"?a:n.isDate(a)?Nf(e,a,!1,n):KK(a,n)?a.some(l=>Nf(e,l,!1,n)):oC(a)?a.from&&a.to?H$(e,{from:a.from,to:a.to},n):!1:YK(a)?Oke(e,a.dayOfWeek,n):v8(a)?n.isAfter(a.before,a.after)?H$(e,{from:n.addDays(a.after,1),to:n.addDays(a.before,-1)},n):If(e.from,a,n)||If(e.to,a,n):x8(a)||w8(a)?If(e.from,a,n)||If(e.to,a,n):!1))return!0;const i=r.filter(a=>typeof a=="function");if(i.length){let a=e.from;const l=n.differenceInCalendarDays(e.to,e.from);for(let c=0;c<=l;c++){if(i.some(u=>u(a)))return!0;a=n.addDays(a,1)}}return!1}function Pke(e,t){const{disabled:n,excludeDisabled:r,selected:s,required:o,onSelect:i}=e,[a,l]=iC(s,i?s:void 0),c=i?s:a;return{selected:c,select:(m,g,y)=>{const{min:v,max:x}=e,E=m?Mke(m,c,v,x,o,t):void 0;return r&&n&&(E!=null&&E.from)&&E.to&&Dke({from:E.from,to:E.to},n,t)&&(E.from=m,E.to=void 0),i||l(E),i==null||i(E,m,g,y),E},isSelected:m=>c&&Nf(c,m,!1,t)}}function Lke(e,t){const{selected:n,required:r,onSelect:s}=e,[o,i]=iC(n,s?n:void 0),a=s?n:o,{isSameDay:l}=t;return{selected:a,select:(f,m,g)=>{let y=f;return!r&&a&&a&&l(f,a)&&(y=void 0),s||i(y),s==null||s(y,f,m,g),y},isSelected:f=>a?l(a,f):!1}}function $ke(e,t){const n=Lke(e,t),r=Rke(e,t),s=Pke(e,t);switch(e.mode){case"single":return n;case"multiple":return r;case"range":return s;default:return}}function ea(e,t){return e instanceof Af&&e.timeZone===t?e:new Af(e,t)}function V$(e,t){return typeof e=="boolean"||typeof e=="function"?e:e instanceof Date?ea(e,t):Array.isArray(e)?e.map(n=>n instanceof Date?ea(n,t):n):oC(e)?{...e,from:e.from?ea(e.from,t):e.from,to:e.to?ea(e.to,t):e.to}:v8(e)?{before:ea(e.before,t),after:ea(e.after,t)}:x8(e)?{after:ea(e.after,t)}:w8(e)?{before:ea(e.before,t)}:e}function t5(e,t){return e&&(Array.isArray(e)?e.map(n=>V$(n,t)):V$(e,t))}function Fke(e){var Va;let t=e;const n=t.timeZone;if(n&&(t={...e,timeZone:n},t.today&&(t.today=ea(t.today,n)),t.month&&(t.month=ea(t.month,n)),t.defaultMonth&&(t.defaultMonth=ea(t.defaultMonth,n)),t.startMonth&&(t.startMonth=ea(t.startMonth,n)),t.endMonth&&(t.endMonth=ea(t.endMonth,n)),t.mode==="single"&&t.selected?t.selected=ea(t.selected,n):t.mode==="multiple"&&t.selected?t.selected=(Va=t.selected)==null?void 0:Va.map(Nn=>ea(Nn,n)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?ea(t.selected.from,n):t.selected.from,to:t.selected.to?ea(t.selected.to,n):t.selected.to}),t.disabled!==void 0&&(t.disabled=t5(t.disabled,n)),t.hidden!==void 0&&(t.hidden=t5(t.hidden,n)),t.modifiers)){const Nn={};Object.keys(t.modifiers).forEach(Qn=>{var wt;Nn[Qn]=t5((wt=t.modifiers)==null?void 0:wt[Qn],n)}),t.modifiers=Nn}const{components:r,formatters:s,labels:o,dateLib:i,locale:a,classNames:l}=w.useMemo(()=>{const Nn={...qK,...t.locale},Qn=new Xl({locale:Nn,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib);return{dateLib:Qn,components:YCe(t.components),formatters:oke(t.formatters),labels:uke(t.labels,Qn.options),locale:Nn,classNames:{...ZCe(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]);t.today||(t={...t,today:i.today()});const{captionLayout:c,mode:u,navLayout:f,numberOfMonths:m=1,onDayBlur:g,onDayClick:y,onDayFocus:v,onDayKeyDown:x,onDayMouseEnter:E,onDayMouseLeave:T,onNextClick:k,onPrevClick:I,showWeekNumber:O,styles:M}=t,{formatCaption:P,formatDay:j,formatMonthDropdown:V,formatWeekNumber:U,formatWeekNumberHeader:z,formatWeekdayName:H,formatYearDropdown:F}=s,G=kke(t,i),{days:X,months:J,navStart:ee,navEnd:re,previousMonth:ie,nextMonth:Z,goToMonth:te}=G,oe=GCe(X,t,ee,re,i),{isSelected:Q,select:Te,selected:ge}=$ke(t,i)??{},{blur:Ce,focused:fe,isFocusTarget:Fe,moveFocus:De,setFocused:Re}=Ike(t,G,oe,Q??(()=>!1),i),{labelDayButton:tt,labelGridcell:de,labelGrid:nt,labelMonthDropdown:ot,labelNav:Ut,labelPrevious:Vt,labelNext:Dt,labelWeekday:en,labelWeekNumber:xt,labelWeekNumberHeader:pe,labelYearDropdown:Ne}=o,$e=w.useMemo(()=>hke(i,t.ISOWeek,t.broadcastCalendar,t.today),[i,t.ISOWeek,t.broadcastCalendar,t.today]),Je=u!==void 0||y!==void 0,Le=w.useCallback(()=>{ie&&(te(ie),I==null||I(ie))},[ie,te,I]),Ve=w.useCallback(()=>{Z&&(te(Z),k==null||k(Z))},[te,Z,k]),_e=w.useCallback((Nn,Qn)=>wt=>{wt.preventDefault(),wt.stopPropagation(),Re(Nn),!Qn.disabled&&(Te==null||Te(Nn.date,Qn,wt),y==null||y(Nn.date,Qn,wt))},[Te,y,Re]),Y=w.useCallback((Nn,Qn)=>wt=>{Re(Nn),v==null||v(Nn.date,Qn,wt)},[v,Re]),L=w.useCallback((Nn,Qn)=>wt=>{Ce(),g==null||g(Nn.date,Qn,wt)},[Ce,g]),B=w.useCallback((Nn,Qn)=>wt=>{const sn={ArrowLeft:[wt.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[wt.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[wt.shiftKey?"year":"week","after"],ArrowUp:[wt.shiftKey?"year":"week","before"],PageUp:[wt.shiftKey?"year":"month","before"],PageDown:[wt.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(sn[wt.key]){wt.preventDefault(),wt.stopPropagation();const[ye,Ue]=sn[wt.key];De(ye,Ue)}x==null||x(Nn.date,Qn,wt)},[De,x,t.dir]),ce=w.useCallback((Nn,Qn)=>wt=>{E==null||E(Nn.date,Qn,wt)},[E]),we=w.useCallback((Nn,Qn)=>wt=>{T==null||T(Nn.date,Qn,wt)},[T]),ze=w.useCallback(Nn=>Qn=>{const wt=Number(Qn.target.value),sn=i.setMonth(i.startOfMonth(Nn),wt);te(sn)},[i,te]),Be=w.useCallback(Nn=>Qn=>{const wt=Number(Qn.target.value),sn=i.setYear(i.startOfMonth(Nn),wt);te(sn)},[i,te]),{className:ut,style:an}=w.useMemo(()=>({className:[l[Rn.Root],t.className].filter(Boolean).join(" "),style:{...M==null?void 0:M[Rn.Root],...t.style}}),[l,t.className,t.style,M]),zt=KCe(t),dn=w.useRef(null);yke(dn,!!t.animate,{classNames:l,months:J,focused:fe,dateLib:i});const on={dayPickerProps:t,selected:ge,select:Te,isSelected:Q,months:J,nextMonth:Z,previousMonth:ie,goToMonth:te,getModifiers:oe,components:r,classNames:l,styles:M,labels:o,formatters:s};return Me.createElement(WK.Provider,{value:on},Me.createElement(r.Root,{rootRef:t.animate?dn:void 0,className:ut,style:an,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],...zt},Me.createElement(r.Months,{className:l[Rn.Months],style:M==null?void 0:M[Rn.Months]},!t.hideNavigation&&!f&&Me.createElement(r.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[Rn.Nav],style:M==null?void 0:M[Rn.Nav],"aria-label":Ut(),onPreviousClick:Le,onNextClick:Ve,previousMonth:ie,nextMonth:Z}),J.map((Nn,Qn)=>Me.createElement(r.Month,{"data-animated-month":t.animate?"true":void 0,className:l[Rn.Month],style:M==null?void 0:M[Rn.Month],key:Qn,displayIndex:Qn,calendarMonth:Nn},f==="around"&&!t.hideNavigation&&Qn===0&&Me.createElement(r.PreviousMonthButton,{type:"button",className:l[Rn.PreviousMonthButton],tabIndex:ie?void 0:-1,"aria-disabled":ie?void 0:!0,"aria-label":Vt(ie),onClick:Le,"data-animated-button":t.animate?"true":void 0},Me.createElement(r.Chevron,{disabled:ie?void 0:!0,className:l[Rn.Chevron],orientation:t.dir==="rtl"?"right":"left"})),Me.createElement(r.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:l[Rn.MonthCaption],style:M==null?void 0:M[Rn.MonthCaption],calendarMonth:Nn,displayIndex:Qn},c!=null&&c.startsWith("dropdown")?Me.createElement(r.DropdownNav,{className:l[Rn.Dropdowns],style:M==null?void 0:M[Rn.Dropdowns]},(()=>{const wt=c==="dropdown"||c==="dropdown-months"?Me.createElement(r.MonthsDropdown,{key:"month",className:l[Rn.MonthsDropdown],"aria-label":ot(),classNames:l,components:r,disabled:!!t.disableNavigation,onChange:ze(Nn.date),options:dke(Nn.date,ee,re,s,i),style:M==null?void 0:M[Rn.Dropdown],value:i.getMonth(Nn.date)}):Me.createElement("span",{key:"month"},V(Nn.date,i)),sn=c==="dropdown"||c==="dropdown-years"?Me.createElement(r.YearsDropdown,{key:"year",className:l[Rn.YearsDropdown],"aria-label":Ne(i.options),classNames:l,components:r,disabled:!!t.disableNavigation,onChange:Be(Nn.date),options:pke(ee,re,s,i,!!t.reverseYears),style:M==null?void 0:M[Rn.Dropdown],value:i.getYear(Nn.date)}):Me.createElement("span",{key:"year"},F(Nn.date,i));return i.getMonthYearOrder()==="year-first"?[sn,wt]:[wt,sn]})(),Me.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},P(Nn.date,i.options,i))):Me.createElement(r.CaptionLabel,{className:l[Rn.CaptionLabel],role:"status","aria-live":"polite"},P(Nn.date,i.options,i))),f==="around"&&!t.hideNavigation&&Qn===m-1&&Me.createElement(r.NextMonthButton,{type:"button",className:l[Rn.NextMonthButton],tabIndex:Z?void 0:-1,"aria-disabled":Z?void 0:!0,"aria-label":Dt(Z),onClick:Ve,"data-animated-button":t.animate?"true":void 0},Me.createElement(r.Chevron,{disabled:Z?void 0:!0,className:l[Rn.Chevron],orientation:t.dir==="rtl"?"left":"right"})),Qn===m-1&&f==="after"&&!t.hideNavigation&&Me.createElement(r.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[Rn.Nav],style:M==null?void 0:M[Rn.Nav],"aria-label":Ut(),onPreviousClick:Le,onNextClick:Ve,previousMonth:ie,nextMonth:Z}),Me.createElement(r.MonthGrid,{role:"grid","aria-multiselectable":u==="multiple"||u==="range","aria-label":nt(Nn.date,i.options,i)||void 0,className:l[Rn.MonthGrid],style:M==null?void 0:M[Rn.MonthGrid]},!t.hideWeekdays&&Me.createElement(r.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:l[Rn.Weekdays],style:M==null?void 0:M[Rn.Weekdays]},O&&Me.createElement(r.WeekNumberHeader,{"aria-label":pe(i.options),className:l[Rn.WeekNumberHeader],style:M==null?void 0:M[Rn.WeekNumberHeader],scope:"col"},z()),$e.map(wt=>Me.createElement(r.Weekday,{"aria-label":en(wt,i.options,i),className:l[Rn.Weekday],key:String(wt),style:M==null?void 0:M[Rn.Weekday],scope:"col"},H(wt,i.options,i)))),Me.createElement(r.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:l[Rn.Weeks],style:M==null?void 0:M[Rn.Weeks]},Nn.weeks.map(wt=>Me.createElement(r.Week,{className:l[Rn.Week],key:wt.weekNumber,style:M==null?void 0:M[Rn.Week],week:wt},O&&Me.createElement(r.WeekNumber,{week:wt,style:M==null?void 0:M[Rn.WeekNumber],"aria-label":xt(wt.weekNumber,{locale:a}),className:l[Rn.WeekNumber],scope:"row",role:"rowheader"},U(wt.weekNumber,i)),wt.days.map(sn=>{const{date:ye}=sn,Ue=oe(sn);if(Ue[ko.focused]=!Ue.hidden&&!!(fe!=null&&fe.isEqualTo(sn)),Ue[hu.selected]=(Q==null?void 0:Q(ye))||Ue.selected,oC(ge)){const{from:Yn,to:Rt}=ge;Ue[hu.range_start]=!!(Yn&&Rt&&i.isSameDay(ye,Yn)),Ue[hu.range_end]=!!(Yn&&Rt&&i.isSameDay(ye,Rt)),Ue[hu.range_middle]=Nf(ge,ye,!0,i)}const ht=fke(Ue,M,t.modifiersStyles),Zt=WCe(Ue,l,t.modifiersClassNames),hr=!Je&&!Ue.hidden?de(ye,Ue,i.options,i):void 0;return Me.createElement(r.Day,{key:`${sn.isoDate}_${sn.displayMonthId}`,day:sn,modifiers:Ue,className:Zt.join(" "),style:ht,role:"gridcell","aria-selected":Ue.selected||void 0,"aria-label":hr,"data-day":sn.isoDate,"data-month":sn.outside?sn.dateMonthId:void 0,"data-selected":Ue.selected||void 0,"data-disabled":Ue.disabled||void 0,"data-hidden":Ue.hidden||void 0,"data-outside":sn.outside||void 0,"data-focused":Ue.focused||void 0,"data-today":Ue.today||void 0},!Ue.hidden&&Je?Me.createElement(r.DayButton,{className:l[Rn.DayButton],style:M==null?void 0:M[Rn.DayButton],type:"button",day:sn,modifiers:Ue,disabled:!Ue.focused&&Ue.disabled||void 0,"aria-disabled":Ue.focused&&Ue.disabled||void 0,tabIndex:Fe(sn)?0:-1,"aria-label":tt(ye,Ue,i.options,i),onClick:_e(sn,Ue),onBlur:L(sn,Ue),onFocus:Y(sn,Ue),onKeyDown:B(sn,Ue),onMouseEnter:ce(sn,Ue),onMouseLeave:we(sn,Ue)},j(ye,i.options,i)):!Ue.hidden&&j(sn.date,i.options,i))})))))))),t.footer&&Me.createElement(r.Footer,{className:l[Rn.Footer],style:M==null?void 0:M[Rn.Footer],role:"status","aria-live":"polite"},t.footer)))}function bx({className:e,showOutsideDays:t=!0,showYearSwitcher:n=!0,yearRange:r=12,numberOfMonths:s,...o}){const[i,a]=w.useState("days"),[l,c]=w.useState(w.useMemo(()=>{const Q=new Date().getFullYear();return{from:Q-Math.floor(r/2-1),to:Q+Math.ceil(r/2)}},[r])),{onNextClick:u,onPrevClick:f,startMonth:m,endMonth:g}=o,y=i==="years"?1:s,v=Qe("relative flex",o.monthsClassName),x=Qe("relative mx-10 flex h-7 items-center justify-center",o.monthCaptionClassName),E=Qe("flex flex-row",o.weekdaysClassName),T=Qe("w-8 text-sm font-normal text-muted-foreground",o.weekdayClassName),k=Qe("w-full",o.monthClassName),I=Qe("relative flex items-center justify-center pt-1",o.captionClassName),O=Qe("truncate text-sm font-medium",o.captionLabelClassName),M=_N({variant:"outline",className:"absolute h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"}),P=Qe(M,"right-0",o.buttonNextClassName),j=Qe(M,"left-0",o.buttonPreviousClassName),V=Qe("flex items-start",o.navClassName),U=Qe("mx-auto mt-4",o.monthGridClassName),z=Qe("mt-2 flex w-max items-start",o.weekClassName),H=Qe("flex size-8 flex-1 items-center justify-center p-0 text-sm",o.dayClassName),F=Qe(_N({variant:"ghost"}),"size-8 rounded-md p-0 font-normal transition-none aria-selected:opacity-100",o.dayButtonClassName),G="bg-accent [&>button]:bg-primary [&>button]:text-primary-foreground [&>button]:hover:bg-primary [&>button]:hover:text-primary-foreground",X=Qe(G,"day-range-start rounded-s-md",o.rangeStartClassName),J=Qe(G,"day-range-end rounded-e-md",o.rangeEndClassName),ee=Qe("bg-accent !text-foreground [&>button]:bg-transparent [&>button]:!text-foreground [&>button]:hover:bg-transparent [&>button]:hover:!text-foreground",o.rangeMiddleClassName),re=Qe("[&>button]:bg-primary [&>button]:text-primary-foreground [&>button]:hover:bg-primary [&>button]:hover:text-primary-foreground",o.selectedClassName),ie=Qe("[&>button]:bg-accent [&>button]:text-accent-foreground",o.todayClassName),Z=Qe("day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",o.outsideClassName),te=Qe("text-muted-foreground opacity-50",o.disabledClassName),oe=Qe("invisible flex-1",o.hiddenClassName);return h.jsx(Fke,{showOutsideDays:t,className:Qe("p-3",e),style:{width:248.8*(y??1)+"px"},classNames:{months:v,month_caption:x,weekdays:E,weekday:T,month:k,caption:I,caption_label:O,button_next:P,button_previous:j,nav:V,month_grid:U,week:z,day:H,day_button:F,range_start:X,range_middle:ee,range_end:J,selected:re,today:ie,outside:Z,disabled:te,hidden:oe},components:{Chevron:({orientation:Q})=>{const Te=Q==="left"?w1:Cf;return h.jsx(Te,{className:"h-4 w-4"})},Nav:({className:Q})=>h.jsx(Bke,{className:Q,displayYears:l,navView:i,setDisplayYears:c,startMonth:m,endMonth:g,onPrevClick:f}),CaptionLabel:Q=>h.jsx(zke,{showYearSwitcher:n,navView:i,setNavView:a,displayYears:l,...Q}),MonthGrid:({className:Q,children:Te,...ge})=>h.jsx(jke,{children:Te,className:Q,displayYears:l,startMonth:m,endMonth:g,navView:i,setNavView:a,...ge})},numberOfMonths:y,...o})}bx.displayName="Calendar";function Bke({className:e,navView:t,startMonth:n,endMonth:r,displayYears:s,setDisplayYears:o,onPrevClick:i,onNextClick:a}){const{nextMonth:l,previousMonth:c,goToMonth:u}=Om(),f=t==="years"?n&&kf(new Date(s.from-1,0,1),n)<0||r&&kf(new Date(s.from-1,0,1),r)>0:!c,m=t==="years"?n&&kf(new Date(s.to+1,0,1),n)<0||r&&kf(new Date(s.to+1,0,1),r)>0:!l,g=w.useCallback(()=>{if(c){if(t==="years"){o(v=>({from:v.from-(v.to-v.from+1),to:v.to-(v.to-v.from+1)})),i==null||i(new Date(s.from-(s.to-s.from),0,1));return}u(c),i==null||i(c)}},[c,u]),y=w.useCallback(()=>{if(l){if(t==="years"){o(v=>({from:v.from+(v.to-v.from+1),to:v.to+(v.to-v.from+1)})),a==null||a(new Date(s.from+(s.to-s.from),0,1));return}u(l),a==null||a(l)}},[u,l]);return h.jsxs("nav",{className:Qe("flex items-center",e),children:[h.jsx(wr,{variant:"outline",className:"absolute left-0 h-7 w-7 bg-transparent p-0 opacity-80 hover:opacity-100",type:"button",tabIndex:f?void 0:-1,disabled:f,"aria-label":t==="years"?`Go to the previous ${s.to-s.from+1} years`:T8(),onClick:g,children:h.jsx(w1,{className:"h-4 w-4"})}),h.jsx(wr,{variant:"outline",className:"absolute right-0 h-7 w-7 bg-transparent p-0 opacity-80 hover:opacity-100",type:"button",tabIndex:m?void 0:-1,disabled:m,"aria-label":t==="years"?`Go to the next ${s.to-s.from+1} years`:S8(),onClick:y,children:h.jsx(Cf,{className:"h-4 w-4"})})]})}function zke({children:e,showYearSwitcher:t,navView:n,setNavView:r,displayYears:s,...o}){return t?h.jsx(wr,{className:"h-7 w-full truncate text-sm font-medium",variant:"ghost",size:"sm",onClick:()=>r(i=>i==="days"?"years":"days"),children:n==="days"?e:s.from+" - "+s.to}):h.jsx("span",{...o,children:e})}function jke({className:e,children:t,displayYears:n,startMonth:r,endMonth:s,navView:o,setNavView:i,...a}){return o==="years"?h.jsx(Uke,{displayYears:n,startMonth:r,endMonth:s,setNavView:i,navView:o,className:e,...a}):h.jsx("table",{className:e,...a,children:t})}function Uke({className:e,displayYears:t,startMonth:n,endMonth:r,setNavView:s,navView:o,...i}){const{goToMonth:a,selected:l}=Om();return h.jsx("div",{className:Qe("grid grid-cols-4 gap-y-2",e),...i,children:Array.from({length:t.to-t.from+1},(c,u)=>{const f=kf(new Date(t.from+u,11,31),n)<0,m=kf(new Date(t.from+u,0,0),r)>0,g=f||m;return h.jsx(wr,{className:Qe("text-foreground h-7 w-full text-sm font-normal",t.from+u===new Date().getFullYear()&&"bg-accent text-accent-foreground font-medium"),variant:"ghost",onClick:()=>{s("days"),a(new Date(t.from+u,(l==null?void 0:l.getMonth())??0))},disabled:o==="years"?g:void 0,children:t.from+u},u)})})}function aC(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var lC="Checkbox",[Hke]=za(lC),[Vke,C8]=Hke(lC);function qke(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:o,form:i,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:f}=e,[m,g]=ml({prop:n,defaultProp:s??!1,onChange:l,caller:lC}),[y,v]=w.useState(null),[x,E]=w.useState(null),T=w.useRef(!1),k=y?!!i||!!y.closest("form"):!0,I={checked:m,disabled:o,setChecked:g,control:y,setControl:v,name:a,form:i,value:u,hasConsumerStoppedPropagationRef:T,required:c,defaultChecked:p0(s)?!1:s,isFormControl:k,bubbleInput:x,setBubbleInput:E};return h.jsx(Vke,{scope:t,...I,children:Gke(f)?f(I):r})}var iZ="CheckboxTrigger",aZ=w.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:o,value:i,disabled:a,checked:l,required:c,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:g,bubbleInput:y}=C8(iZ,e),v=Nr(s,u),x=w.useRef(l);return w.useEffect(()=>{const E=o==null?void 0:o.form;if(E){const T=()=>f(x.current);return E.addEventListener("reset",T),()=>E.removeEventListener("reset",T)}},[o,f]),h.jsx(Ln.button,{type:"button",role:"checkbox","aria-checked":p0(l)?"mixed":l,"aria-required":c,"data-state":hZ(l),"data-disabled":a?"":void 0,disabled:a,value:i,...r,ref:v,onKeyDown:Gt(t,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:Gt(n,E=>{f(T=>p0(T)?!0:!T),y&&g&&(m.current=E.isPropagationStopped(),m.current||E.stopPropagation())})})});aZ.displayName=iZ;var lZ=w.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:i,disabled:a,value:l,onCheckedChange:c,form:u,...f}=e;return h.jsx(qke,{__scopeCheckbox:n,checked:s,defaultChecked:o,disabled:a,required:i,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:m})=>h.jsxs(h.Fragment,{children:[h.jsx(aZ,{...f,ref:t,__scopeCheckbox:n}),m&&h.jsx(fZ,{__scopeCheckbox:n})]})})});lZ.displayName=lC;var cZ="CheckboxIndicator",uZ=w.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,o=C8(cZ,n);return h.jsx(gl,{present:r||p0(o.checked)||o.checked===!0,children:h.jsx(Ln.span,{"data-state":hZ(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});uZ.displayName=cZ;var dZ="CheckboxBubbleInput",fZ=w.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:i,required:a,disabled:l,name:c,value:u,form:f,bubbleInput:m,setBubbleInput:g}=C8(dZ,e),y=Nr(n,g),v=aC(o),x=R4(r);w.useEffect(()=>{const T=m;if(!T)return;const k=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(k,"checked").set,M=!s.current;if(v!==o&&O){const P=new Event("click",{bubbles:M});T.indeterminate=p0(o),O.call(T,p0(o)?!1:o),T.dispatchEvent(P)}},[m,v,o,s]);const E=w.useRef(p0(o)?!1:o);return h.jsx(Ln.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??E.current,required:a,disabled:l,name:c,value:u,form:f,...t,tabIndex:-1,ref:y,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});fZ.displayName=dZ;function Gke(e){return typeof e=="function"}function p0(e){return e==="indeterminate"}function hZ(e){return p0(e)?"indeterminate":e?"checked":"unchecked"}function yx({className:e,...t}){return h.jsx(lZ,{"data-slot":"checkbox",className:Qe("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:h.jsx(uZ,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:h.jsx(Ts,{className:"size-3.5"})})})}var Wke="Label",pZ=w.forwardRef((e,t)=>h.jsx(Nm.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));pZ.displayName=Wke;var Yke=pZ;function jl({className:e,...t}){return h.jsx(Yke,{"data-slot":"label",className:Qe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}var cC="Popover",[mZ]=za(cC,[F0]),kw=F0(),[Kke,B0]=mZ(cC),gZ=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!1}=e,a=kw(t),l=w.useRef(null),[c,u]=w.useState(!1),[f,m]=ml({prop:r,defaultProp:s??!1,onChange:o,caller:cC});return h.jsx(M4,{...a,children:h.jsx(Kke,{scope:t,contentId:Ic(),triggerRef:l,open:f,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:c,onCustomAnchorAdd:w.useCallback(()=>u(!0),[]),onCustomAnchorRemove:w.useCallback(()=>u(!1),[]),modal:i,children:n})})};gZ.displayName=cC;var bZ="PopoverAnchor",Zke=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=B0(bZ,n),o=kw(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=s;return w.useEffect(()=>(i(),()=>a()),[i,a]),h.jsx(dw,{...o,...r,ref:t})});Zke.displayName=bZ;var yZ="PopoverTrigger",vZ=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=B0(yZ,n),o=kw(n),i=Nr(t,s.triggerRef),a=h.jsx(Ln.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":SZ(s.open),...r,ref:i,onClick:Gt(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:h.jsx(dw,{asChild:!0,...o,children:a})});vZ.displayName=yZ;var k8="PopoverPortal",[Jke,Xke]=mZ(k8,{forceMount:void 0}),xZ=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,o=B0(k8,t);return h.jsx(Jke,{scope:t,forceMount:n,children:h.jsx(gl,{present:n||o.open,children:h.jsx(fw,{asChild:!0,container:s,children:r})})})};xZ.displayName=k8;var Y1="PopoverContent",wZ=w.forwardRef((e,t)=>{const n=Xke(Y1,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,o=B0(Y1,e.__scopePopover);return h.jsx(gl,{present:r||o.open,children:o.modal?h.jsx(e3e,{...s,ref:t}):h.jsx(t3e,{...s,ref:t})})});wZ.displayName=Y1;var Qke=am("PopoverContent.RemoveScroll"),e3e=w.forwardRef((e,t)=>{const n=B0(Y1,e.__scopePopover),r=w.useRef(null),s=Nr(t,r),o=w.useRef(!1);return w.useEffect(()=>{const i=r.current;if(i)return z4(i)},[]),h.jsx(pw,{as:Qke,allowPinchZoom:!0,children:h.jsx(EZ,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),o.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Gt(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Gt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),t3e=w.forwardRef((e,t)=>{const n=B0(Y1,e.__scopePopover),r=w.useRef(!1),s=w.useRef(!1);return h.jsx(EZ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),EZ=w.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...f}=e,m=B0(Y1,n),g=kw(n);return F4(),h.jsx(hw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:h.jsx(wb,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:h.jsx(O4,{"data-state":SZ(m.open),role:"dialog",id:m.contentId,...g,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),_Z="PopoverClose",n3e=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=B0(_Z,n);return h.jsx(Ln.button,{type:"button",...r,ref:t,onClick:Gt(e.onClick,()=>s.onOpenChange(!1))})});n3e.displayName=_Z;var r3e="PopoverArrow",s3e=w.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=kw(n);return h.jsx(D4,{...s,...r,ref:t})});s3e.displayName=r3e;function SZ(e){return e?"open":"closed"}var o3e=gZ,i3e=vZ,a3e=xZ,l3e=wZ;function vx({...e}){return h.jsx(o3e,{"data-slot":"popover",...e})}function xx({...e}){return h.jsx(i3e,{"data-slot":"popover-trigger",...e})}function wx({className:e,align:t="center",sideOffset:n=4,...r}){return h.jsx(a3e,{children:h.jsx(l3e,{"data-slot":"popover-content",align:t,sideOffset:n,className:Qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-hidden",e),...r})})}var A8="Radio",[c3e,TZ]=za(A8),[u3e,d3e]=c3e(A8),CZ=w.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:o,disabled:i,value:a="on",onCheck:l,form:c,...u}=e,[f,m]=w.useState(null),g=Nr(t,x=>m(x)),y=w.useRef(!1),v=f?c||!!f.closest("form"):!0;return h.jsxs(u3e,{scope:n,checked:s,disabled:i,children:[h.jsx(Ln.button,{type:"button",role:"radio","aria-checked":s,"data-state":IZ(s),"data-disabled":i?"":void 0,disabled:i,value:a,...u,ref:g,onClick:Gt(e.onClick,x=>{s||l==null||l(),v&&(y.current=x.isPropagationStopped(),y.current||x.stopPropagation())})}),v&&h.jsx(NZ,{control:f,bubbles:!y.current,name:r,value:a,checked:s,required:o,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});CZ.displayName=A8;var kZ="RadioIndicator",AZ=w.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,o=d3e(kZ,n);return h.jsx(gl,{present:r||o.checked,children:h.jsx(Ln.span,{"data-state":IZ(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t})})});AZ.displayName=kZ;var f3e="RadioBubbleInput",NZ=w.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},o)=>{const i=w.useRef(null),a=Nr(i,o),l=aC(n),c=R4(t);return w.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&g){const y=new Event("click",{bubbles:r});g.call(u,n),u.dispatchEvent(y)}},[l,n,r]),h.jsx(Ln.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});NZ.displayName=f3e;function IZ(e){return e?"checked":"unchecked"}var h3e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],uC="RadioGroup",[p3e]=za(uC,[$0,TZ]),RZ=$0(),MZ=TZ(),[m3e,g3e]=p3e(uC),OZ=w.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:o,required:i=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:f,...m}=e,g=RZ(n),y=xb(c),[v,x]=ml({prop:o,defaultProp:s??null,onChange:f,caller:uC});return h.jsx(m3e,{scope:n,name:r,required:i,disabled:a,value:v,onValueChange:x,children:h.jsx(S4,{asChild:!0,...g,orientation:l,dir:y,loop:u,children:h.jsx(Ln.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":a?"":void 0,dir:y,...m,ref:t})})})});OZ.displayName=uC;var DZ="RadioGroupItem",PZ=w.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,o=g3e(DZ,n),i=o.disabled||r,a=RZ(n),l=MZ(n),c=w.useRef(null),u=Nr(t,c),f=o.value===s.value,m=w.useRef(!1);return w.useEffect(()=>{const g=v=>{h3e.includes(v.key)&&(m.current=!0)},y=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",y)}},[]),h.jsx(T4,{asChild:!0,...a,focusable:!i,active:f,children:h.jsx(CZ,{disabled:i,required:o.required,checked:f,...l,...s,name:o.name,ref:u,onCheck:()=>o.onValueChange(s.value),onKeyDown:Gt(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:Gt(s.onFocus,()=>{var g;m.current&&((g=c.current)==null||g.click())})})})});PZ.displayName=DZ;var b3e="RadioGroupIndicator",LZ=w.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=MZ(n);return h.jsx(AZ,{...s,...r,ref:t})});LZ.displayName=b3e;var y3e=OZ,v3e=PZ,x3e=LZ;function w3e({className:e,...t}){return h.jsx(y3e,{"data-slot":"radio-group",className:Qe("grid gap-3",e),...t})}function E3e({className:e,...t}){return h.jsx(v3e,{"data-slot":"radio-group-item",className:Qe("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:h.jsx(x3e,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:h.jsx(yN,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function q$(e,[t,n]){return Math.min(n,Math.max(t,e))}var _3e=[" ","Enter","ArrowUp","ArrowDown"],S3e=[" ","Enter"],hm="Select",[dC,fC,T3e]=wR(hm),[Ab]=za(hm,[T3e,F0]),hC=F0(),[C3e,z0]=Ab(hm),[k3e,A3e]=Ab(hm),$Z=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:o,value:i,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:m,required:g,form:y}=e,v=hC(t),[x,E]=w.useState(null),[T,k]=w.useState(null),[I,O]=w.useState(!1),M=xb(c),[P,j]=ml({prop:r,defaultProp:s??!1,onChange:o,caller:hm}),[V,U]=ml({prop:i,defaultProp:a,onChange:l,caller:hm}),z=w.useRef(null),H=x?y||!!x.closest("form"):!0,[F,G]=w.useState(new Set),X=Array.from(F).map(J=>J.props.value).join(";");return h.jsx(M4,{...v,children:h.jsxs(C3e,{required:g,scope:t,trigger:x,onTriggerChange:E,valueNode:T,onValueNodeChange:k,valueNodeHasChildren:I,onValueNodeHasChildrenChange:O,contentId:Ic(),value:V,onValueChange:U,open:P,onOpenChange:j,dir:M,triggerPointerDownPosRef:z,disabled:m,children:[h.jsx(dC.Provider,{scope:t,children:h.jsx(k3e,{scope:e.__scopeSelect,onNativeOptionAdd:w.useCallback(J=>{G(ee=>new Set(ee).add(J))},[]),onNativeOptionRemove:w.useCallback(J=>{G(ee=>{const re=new Set(ee);return re.delete(J),re})},[]),children:n})}),H?h.jsxs(oJ,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:f,value:V,onChange:J=>U(J.target.value),disabled:m,form:y,children:[V===void 0?h.jsx("option",{value:""}):null,Array.from(F)]},X):null]})})};$Z.displayName=hm;var FZ="SelectTrigger",BZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,o=hC(n),i=z0(FZ,n),a=i.disabled||r,l=Nr(t,i.onTriggerChange),c=fC(n),u=w.useRef("touch"),[f,m,g]=aJ(v=>{const x=c().filter(k=>!k.disabled),E=x.find(k=>k.value===i.value),T=lJ(x,v,E);T!==void 0&&i.onValueChange(T.value)}),y=v=>{a||(i.onOpenChange(!0),g()),v&&(i.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return h.jsx(dw,{asChild:!0,...o,children:h.jsx(Ln.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":iJ(i.value)?"":void 0,...s,ref:l,onClick:Gt(s.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&y(v)}),onPointerDown:Gt(s.onPointerDown,v=>{u.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:Gt(s.onKeyDown,v=>{const x=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(x&&v.key===" ")&&_3e.includes(v.key)&&(y(),v.preventDefault())})})})});BZ.displayName=FZ;var zZ="SelectValue",jZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:i="",...a}=e,l=z0(zZ,n),{onValueNodeHasChildrenChange:c}=l,u=o!==void 0,f=Nr(t,l.onValueNodeChange);return Ni(()=>{c(u)},[c,u]),h.jsx(Ln.span,{...a,ref:f,style:{pointerEvents:"none"},children:iJ(l.value)?h.jsx(h.Fragment,{children:i}):o})});jZ.displayName=zZ;var N3e="SelectIcon",UZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return h.jsx(Ln.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});UZ.displayName=N3e;var I3e="SelectPortal",HZ=e=>h.jsx(fw,{asChild:!0,...e});HZ.displayName=I3e;var pm="SelectContent",VZ=w.forwardRef((e,t)=>{const n=z0(pm,e.__scopeSelect),[r,s]=w.useState();if(Ni(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?dl.createPortal(h.jsx(qZ,{scope:e.__scopeSelect,children:h.jsx(dC.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),o):null}return h.jsx(GZ,{...e,ref:t})});VZ.displayName=pm;var su=10,[qZ,j0]=Ab(pm),R3e="SelectContentImpl",M3e=am("SelectContent.RemoveScroll"),GZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:x,...E}=e,T=z0(pm,n),[k,I]=w.useState(null),[O,M]=w.useState(null),P=Nr(t,fe=>I(fe)),[j,V]=w.useState(null),[U,z]=w.useState(null),H=fC(n),[F,G]=w.useState(!1),X=w.useRef(!1);w.useEffect(()=>{if(k)return z4(k)},[k]),F4();const J=w.useCallback(fe=>{const[Fe,...De]=H().map(de=>de.ref.current),[Re]=De.slice(-1),tt=document.activeElement;for(const de of fe)if(de===tt||(de==null||de.scrollIntoView({block:"nearest"}),de===Fe&&O&&(O.scrollTop=0),de===Re&&O&&(O.scrollTop=O.scrollHeight),de==null||de.focus(),document.activeElement!==tt))return},[H,O]),ee=w.useCallback(()=>J([j,k]),[J,j,k]);w.useEffect(()=>{F&&ee()},[F,ee]);const{onOpenChange:re,triggerPointerDownPosRef:ie}=T;w.useEffect(()=>{if(k){let fe={x:0,y:0};const Fe=Re=>{var tt,de;fe={x:Math.abs(Math.round(Re.pageX)-(((tt=ie.current)==null?void 0:tt.x)??0)),y:Math.abs(Math.round(Re.pageY)-(((de=ie.current)==null?void 0:de.y)??0))}},De=Re=>{fe.x<=10&&fe.y<=10?Re.preventDefault():k.contains(Re.target)||re(!1),document.removeEventListener("pointermove",Fe),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",Fe),document.addEventListener("pointerup",De,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Fe),document.removeEventListener("pointerup",De,{capture:!0})}}},[k,re,ie]),w.useEffect(()=>{const fe=()=>re(!1);return window.addEventListener("blur",fe),window.addEventListener("resize",fe),()=>{window.removeEventListener("blur",fe),window.removeEventListener("resize",fe)}},[re]);const[Z,te]=aJ(fe=>{const Fe=H().filter(tt=>!tt.disabled),De=Fe.find(tt=>tt.ref.current===document.activeElement),Re=lJ(Fe,fe,De);Re&&setTimeout(()=>Re.ref.current.focus())}),oe=w.useCallback((fe,Fe,De)=>{const Re=!X.current&&!De;(T.value!==void 0&&T.value===Fe||Re)&&(V(fe),Re&&(X.current=!0))},[T.value]),Q=w.useCallback(()=>k==null?void 0:k.focus(),[k]),Te=w.useCallback((fe,Fe,De)=>{const Re=!X.current&&!De;(T.value!==void 0&&T.value===Fe||Re)&&z(fe)},[T.value]),ge=r==="popper"?HN:WZ,Ce=ge===HN?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:x}:{};return h.jsx(qZ,{scope:n,content:k,viewport:O,onViewportChange:M,itemRefCallback:oe,selectedItem:j,onItemLeave:Q,itemTextRefCallback:Te,focusSelectedItem:ee,selectedItemText:U,position:r,isPositioned:F,searchRef:Z,children:h.jsx(pw,{as:M3e,allowPinchZoom:!0,children:h.jsx(hw,{asChild:!0,trapped:T.open,onMountAutoFocus:fe=>{fe.preventDefault()},onUnmountAutoFocus:Gt(s,fe=>{var Fe;(Fe=T.trigger)==null||Fe.focus({preventScroll:!0}),fe.preventDefault()}),children:h.jsx(wb,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:fe=>fe.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:h.jsx(ge,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:fe=>fe.preventDefault(),...E,...Ce,onPlaced:()=>G(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Gt(E.onKeyDown,fe=>{const Fe=fe.ctrlKey||fe.altKey||fe.metaKey;if(fe.key==="Tab"&&fe.preventDefault(),!Fe&&fe.key.length===1&&te(fe.key),["ArrowUp","ArrowDown","Home","End"].includes(fe.key)){let Re=H().filter(tt=>!tt.disabled).map(tt=>tt.ref.current);if(["ArrowUp","End"].includes(fe.key)&&(Re=Re.slice().reverse()),["ArrowUp","ArrowDown"].includes(fe.key)){const tt=fe.target,de=Re.indexOf(tt);Re=Re.slice(de+1)}setTimeout(()=>J(Re)),fe.preventDefault()}})})})})})})});GZ.displayName=R3e;var O3e="SelectItemAlignedPosition",WZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,o=z0(pm,n),i=j0(pm,n),[a,l]=w.useState(null),[c,u]=w.useState(null),f=Nr(t,P=>u(P)),m=fC(n),g=w.useRef(!1),y=w.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:E,focusSelectedItem:T}=i,k=w.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&c&&v&&x&&E){const P=o.trigger.getBoundingClientRect(),j=c.getBoundingClientRect(),V=o.valueNode.getBoundingClientRect(),U=E.getBoundingClientRect();if(o.dir!=="rtl"){const tt=U.left-j.left,de=V.left-tt,nt=P.left-de,ot=P.width+nt,Ut=Math.max(ot,j.width),Vt=window.innerWidth-su,Dt=q$(de,[su,Math.max(su,Vt-Ut)]);a.style.minWidth=ot+"px",a.style.left=Dt+"px"}else{const tt=j.right-U.right,de=window.innerWidth-V.right-tt,nt=window.innerWidth-P.right-de,ot=P.width+nt,Ut=Math.max(ot,j.width),Vt=window.innerWidth-su,Dt=q$(de,[su,Math.max(su,Vt-Ut)]);a.style.minWidth=ot+"px",a.style.right=Dt+"px"}const z=m(),H=window.innerHeight-su*2,F=v.scrollHeight,G=window.getComputedStyle(c),X=parseInt(G.borderTopWidth,10),J=parseInt(G.paddingTop,10),ee=parseInt(G.borderBottomWidth,10),re=parseInt(G.paddingBottom,10),ie=X+J+F+re+ee,Z=Math.min(x.offsetHeight*5,ie),te=window.getComputedStyle(v),oe=parseInt(te.paddingTop,10),Q=parseInt(te.paddingBottom,10),Te=P.top+P.height/2-su,ge=H-Te,Ce=x.offsetHeight/2,fe=x.offsetTop+Ce,Fe=X+J+fe,De=ie-Fe;if(Fe<=Te){const tt=z.length>0&&x===z[z.length-1].ref.current;a.style.bottom="0px";const de=c.clientHeight-v.offsetTop-v.offsetHeight,nt=Math.max(ge,Ce+(tt?Q:0)+de+ee),ot=Fe+nt;a.style.height=ot+"px"}else{const tt=z.length>0&&x===z[0].ref.current;a.style.top="0px";const nt=Math.max(Te,X+v.offsetTop+(tt?oe:0)+Ce)+De;a.style.height=nt+"px",v.scrollTop=Fe-Te+v.offsetTop}a.style.margin=`${su}px 0`,a.style.minHeight=Z+"px",a.style.maxHeight=H+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,o.trigger,o.valueNode,a,c,v,x,E,o.dir,r]);Ni(()=>k(),[k]);const[I,O]=w.useState();Ni(()=>{c&&O(window.getComputedStyle(c).zIndex)},[c]);const M=w.useCallback(P=>{P&&y.current===!0&&(k(),T==null||T(),y.current=!1)},[k,T]);return h.jsx(P3e,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:M,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:h.jsx(Ln.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});WZ.displayName=O3e;var D3e="SelectPopperPosition",HN=w.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=su,...o}=e,i=hC(n);return h.jsx(O4,{...i,...o,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});HN.displayName=D3e;var[P3e,N8]=Ab(pm,{}),VN="SelectViewport",YZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,o=j0(VN,n),i=N8(VN,n),a=Nr(t,o.onViewportChange),l=w.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(dC.Slot,{scope:n,children:h.jsx(Ln.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Gt(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&f){const g=Math.abs(l.current-u.scrollTop);if(g>0){const y=window.innerHeight-su*2,v=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),E=Math.max(v,x);if(E<y){const T=E+g,k=Math.min(y,T),I=T-k;f.style.height=k+"px",f.style.bottom==="0px"&&(u.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});YZ.displayName=VN;var KZ="SelectGroup",[L3e,$3e]=Ab(KZ),F3e=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Ic();return h.jsx(L3e,{scope:n,id:s,children:h.jsx(Ln.div,{role:"group","aria-labelledby":s,...r,ref:t})})});F3e.displayName=KZ;var ZZ="SelectLabel",B3e=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=$3e(ZZ,n);return h.jsx(Ln.div,{id:s.id,...r,ref:t})});B3e.displayName=ZZ;var CS="SelectItem",[z3e,JZ]=Ab(CS),XZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...i}=e,a=z0(CS,n),l=j0(CS,n),c=a.value===r,[u,f]=w.useState(o??""),[m,g]=w.useState(!1),y=Nr(t,T=>{var k;return(k=l.itemRefCallback)==null?void 0:k.call(l,T,r,s)}),v=Ic(),x=w.useRef("touch"),E=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(z3e,{scope:n,value:r,disabled:s,textId:v,isSelected:c,onItemTextChange:w.useCallback(T=>{f(k=>k||((T==null?void 0:T.textContent)??"").trim())},[]),children:h.jsx(dC.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:h.jsx(Ln.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:y,onFocus:Gt(i.onFocus,()=>g(!0)),onBlur:Gt(i.onBlur,()=>g(!1)),onClick:Gt(i.onClick,()=>{x.current!=="mouse"&&E()}),onPointerUp:Gt(i.onPointerUp,()=>{x.current==="mouse"&&E()}),onPointerDown:Gt(i.onPointerDown,T=>{x.current=T.pointerType}),onPointerMove:Gt(i.onPointerMove,T=>{var k;x.current=T.pointerType,s?(k=l.onItemLeave)==null||k.call(l):x.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Gt(i.onPointerLeave,T=>{var k;T.currentTarget===document.activeElement&&((k=l.onItemLeave)==null||k.call(l))}),onKeyDown:Gt(i.onKeyDown,T=>{var I;((I=l.searchRef)==null?void 0:I.current)!==""&&T.key===" "||(S3e.includes(T.key)&&E(),T.key===" "&&T.preventDefault())})})})})});XZ.displayName=CS;var fv="SelectItemText",QZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...o}=e,i=z0(fv,n),a=j0(fv,n),l=JZ(fv,n),c=A3e(fv,n),[u,f]=w.useState(null),m=Nr(t,E=>f(E),l.onItemTextChange,E=>{var T;return(T=a.itemTextRefCallback)==null?void 0:T.call(a,E,l.value,l.disabled)}),g=u==null?void 0:u.textContent,y=w.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=c;return Ni(()=>(v(y),()=>x(y)),[v,x,y]),h.jsxs(h.Fragment,{children:[h.jsx(Ln.span,{id:l.textId,...o,ref:m}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?dl.createPortal(o.children,i.valueNode):null]})});QZ.displayName=fv;var eJ="SelectItemIndicator",tJ=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return JZ(eJ,n).isSelected?h.jsx(Ln.span,{"aria-hidden":!0,...r,ref:t}):null});tJ.displayName=eJ;var qN="SelectScrollUpButton",nJ=w.forwardRef((e,t)=>{const n=j0(qN,e.__scopeSelect),r=N8(qN,e.__scopeSelect),[s,o]=w.useState(!1),i=Nr(t,r.onScrollButtonChange);return Ni(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;o(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?h.jsx(sJ,{...e,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});nJ.displayName=qN;var GN="SelectScrollDownButton",rJ=w.forwardRef((e,t)=>{const n=j0(GN,e.__scopeSelect),r=N8(GN,e.__scopeSelect),[s,o]=w.useState(!1),i=Nr(t,r.onScrollButtonChange);return Ni(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;o(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?h.jsx(sJ,{...e,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});rJ.displayName=GN;var sJ=w.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,o=j0("SelectScrollButton",n),i=w.useRef(null),a=fC(n),l=w.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return w.useEffect(()=>()=>l(),[l]),Ni(()=>{var u;const c=a().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Ln.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Gt(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:Gt(s.onPointerMove,()=>{var c;(c=o.onItemLeave)==null||c.call(o),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:Gt(s.onPointerLeave,()=>{l()})})}),j3e="SelectSeparator",U3e=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return h.jsx(Ln.div,{"aria-hidden":!0,...r,ref:t})});U3e.displayName=j3e;var WN="SelectArrow",H3e=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=hC(n),o=z0(WN,n),i=j0(WN,n);return o.open&&i.position==="popper"?h.jsx(D4,{...s,...r,ref:t}):null});H3e.displayName=WN;var V3e="SelectBubbleInput",oJ=w.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=w.useRef(null),o=Nr(r,s),i=aC(t);return w.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==t&&u){const f=new Event("change",{bubbles:!0});u.call(a,t),a.dispatchEvent(f)}},[i,t]),h.jsx(Ln.select,{...n,style:{...dW,...n.style},ref:o,defaultValue:t})});oJ.displayName=V3e;function iJ(e){return e===""||e===void 0}function aJ(e){const t=bu(e),n=w.useRef(""),r=w.useRef(0),s=w.useCallback(i=>{const a=n.current+i;t(a),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(a)},[t]),o=w.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function lJ(e,t,n){const s=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=q3e(e,Math.max(o,0));s.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function q3e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var G3e=$Z,W3e=BZ,Y3e=jZ,K3e=UZ,Z3e=HZ,J3e=VZ,X3e=YZ,Q3e=XZ,e5e=QZ,t5e=tJ,n5e=nJ,r5e=rJ;function kS({...e}){return h.jsx(G3e,{"data-slot":"select",...e})}function AS({...e}){return h.jsx(Y3e,{"data-slot":"select-value",...e})}function NS({className:e,size:t="default",children:n,...r}){return h.jsxs(W3e,{"data-slot":"select-trigger","data-size":t,className:Qe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,h.jsx(K3e,{asChild:!0,children:h.jsx(Df,{className:"size-4 opacity-50"})})]})}function IS({className:e,children:t,position:n="popper",...r}){return h.jsx(Z3e,{children:h.jsxs(J3e,{"data-slot":"select-content",className:Qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[h.jsx(s5e,{}),h.jsx(X3e,{className:Qe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),h.jsx(o5e,{})]})})}function RS({className:e,children:t,...n}){return h.jsxs(Q3e,{"data-slot":"select-item",className:Qe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[h.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:h.jsx(t5e,{children:h.jsx(Ts,{className:"size-4"})})}),h.jsx(e5e,{children:t})]})}function s5e({className:e,...t}){return h.jsx(n5e,{"data-slot":"select-scroll-up-button",className:Qe("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(Pq,{className:"size-4"})})}function o5e({className:e,...t}){return h.jsx(r5e,{"data-slot":"select-scroll-down-button",className:Qe("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(Df,{className:"size-4"})})}function I8({className:e,...t}){return h.jsx("textarea",{"data-slot":"textarea",className:Qe("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function i5e({event:e,isOpen:t,onClose:n,onSave:r,onDelete:s}){var ie;const[o,i]=w.useState(""),[a,l]=w.useState(""),[c,u]=w.useState(new Date),[f,m]=w.useState(new Date),[g,y]=w.useState(`${zN}:00`),[v,x]=w.useState(`${C$}:00`),[E,T]=w.useState(!1),[k,I]=w.useState(""),[O,M]=w.useState("sky"),[P,j]=w.useState(null),[V,U]=w.useState(!1),[z,H]=w.useState(!1);w.useEffect(()=>{console.log("EventDialog received event:",e)},[e]),w.useEffect(()=>{if(e){i(e.title||""),l(e.description||"");const Z=new Date(e.start),te=new Date(e.end);u(Z),m(te),y(G(Z)),x(G(te)),T(e.allDay||!1),I(e.location||""),M(e.color||"sky"),j(null)}else F()},[e]);const F=()=>{i(""),l(""),u(new Date),m(new Date),y(`${zN}:00`),x(`${C$}:00`),T(!1),I(""),M("sky"),j(null)},G=Z=>{const te=Z.getHours().toString().padStart(2,"0"),oe=Math.floor(Z.getMinutes()/15)*15;return`${te}:${oe.toString().padStart(2,"0")}`},X=w.useMemo(()=>{const Z=[];for(let te=fd;te<=jp;te++)for(let oe=0;oe<60;oe+=15){const Q=te.toString().padStart(2,"0"),Te=oe.toString().padStart(2,"0"),ge=`${Q}:${Te}`,Ce=new Date(2e3,0,1,te,oe),fe=ir(Ce,"h:mm a");Z.push({value:ge,label:fe})}return Z},[]),J=()=>{const Z=new Date(c),te=new Date(f);if(E)Z.setHours(0,0,0,0),te.setHours(23,59,59,999);else{const[Q=0,Te=0]=g.split(":").map(Number),[ge=0,Ce=0]=v.split(":").map(Number);if(Q<fd||Q>jp||ge<fd||ge>jp){j(`Selected time must be between ${fd}:00 and ${jp}:00`);return}Z.setHours(Q,Te,0),te.setHours(ge,Ce,0)}if(SS(te,Z)){j("End date cannot be before start date");return}const oe=o.trim()?o:"(no title)";r({id:(e==null?void 0:e.id)||"",title:oe,description:a,start:Z,end:te,allDay:E,location:k,color:O})},ee=()=>{e!=null&&e.id&&s(e.id)},re=[{value:"sky",label:"Sky",bgClass:"bg-sky-400 data-[state=checked]:bg-sky-400",borderClass:"border-sky-400 data-[state=checked]:border-sky-400"},{value:"amber",label:"Amber",bgClass:"bg-amber-400 data-[state=checked]:bg-amber-400",borderClass:"border-amber-400 data-[state=checked]:border-amber-400"},{value:"violet",label:"Violet",bgClass:"bg-violet-400 data-[state=checked]:bg-violet-400",borderClass:"border-violet-400 data-[state=checked]:border-violet-400"},{value:"rose",label:"Rose",bgClass:"bg-rose-400 data-[state=checked]:bg-rose-400",borderClass:"border-rose-400 data-[state=checked]:border-rose-400"},{value:"emerald",label:"Emerald",bgClass:"bg-emerald-400 data-[state=checked]:bg-emerald-400",borderClass:"border-emerald-400 data-[state=checked]:border-emerald-400"},{value:"orange",label:"Orange",bgClass:"bg-orange-400 data-[state=checked]:bg-orange-400",borderClass:"border-orange-400 data-[state=checked]:border-orange-400"}];return h.jsx(eY,{open:t,onOpenChange:Z=>!Z&&n(),children:h.jsxs(tY,{className:"sm:max-w-[425px]",children:[h.jsxs(nY,{children:[h.jsx(rY,{children:e!=null&&e.id?"Edit Event":"Create Event"}),h.jsx(e2e,{className:"sr-only",children:e!=null&&e.id?"Edit the details of this event":"Add a new event to your calendar"})]}),P&&h.jsx("div",{className:"bg-destructive/15 text-destructive rounded-md px-3 py-2 text-sm",children:P}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"*:not-first:mt-1.5",children:[h.jsx(jl,{htmlFor:"title",children:"Title"}),h.jsx(gu,{id:"title",value:o,onChange:Z=>i(Z.target.value)})]}),h.jsxs("div",{className:"*:not-first:mt-1.5",children:[h.jsx(jl,{htmlFor:"description",children:"Description"}),h.jsx(I8,{id:"description",value:a,onChange:Z=>l(Z.target.value),rows:3})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{className:"flex-1 *:not-first:mt-1.5",children:[h.jsx(jl,{htmlFor:"start-date",children:"Start Date"}),h.jsxs(vx,{open:V,onOpenChange:U,children:[h.jsx(xx,{asChild:!0,children:h.jsxs(wr,{id:"start-date",variant:"outline",className:Qe("group bg-background hover:bg-background border-input w-full justify-between px-3 font-normal outline-offset-0 outline-none focus-visible:outline-[3px]",!c&&"text-muted-foreground"),children:[h.jsx("span",{className:Qe("truncate",!c&&"text-muted-foreground"),children:c?ir(c,"PPP"):"Pick a date"}),h.jsx($$,{size:16,className:"text-muted-foreground/80 shrink-0","aria-hidden":"true"})]})}),h.jsx(wx,{className:"w-auto p-2",align:"start",children:h.jsx(bx,{mode:"single",selected:c,defaultMonth:c,onSelect:Z=>{Z&&(u(Z),SS(f,Z)&&m(Z),j(null),U(!1))}})})]})]}),!E&&h.jsxs("div",{className:"min-w-28 *:not-first:mt-1.5",children:[h.jsx(jl,{htmlFor:"start-time",children:"Start Time"}),h.jsxs(kS,{value:g,onValueChange:y,children:[h.jsx(NS,{id:"start-time",children:h.jsx(AS,{placeholder:"Select time"})}),h.jsx(IS,{children:X.map(Z=>h.jsx(RS,{value:Z.value,children:Z.label},Z.value))})]})]})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{className:"flex-1 *:not-first:mt-1.5",children:[h.jsx(jl,{htmlFor:"end-date",children:"End Date"}),h.jsxs(vx,{open:z,onOpenChange:H,children:[h.jsx(xx,{asChild:!0,children:h.jsxs(wr,{id:"end-date",variant:"outline",className:Qe("group bg-background hover:bg-background border-input w-full justify-between px-3 font-normal outline-offset-0 outline-none focus-visible:outline-[3px]",!f&&"text-muted-foreground"),children:[h.jsx("span",{className:Qe("truncate",!f&&"text-muted-foreground"),children:f?ir(f,"PPP"):"Pick a date"}),h.jsx($$,{size:16,className:"text-muted-foreground/80 shrink-0","aria-hidden":"true"})]})}),h.jsx(wx,{className:"w-auto p-2",align:"start",children:h.jsx(bx,{mode:"single",selected:f,defaultMonth:f,disabled:{before:c},onSelect:Z=>{Z&&(m(Z),j(null),H(!1))}})})]})]}),!E&&h.jsxs("div",{className:"min-w-28 *:not-first:mt-1.5",children:[h.jsx(jl,{htmlFor:"end-time",children:"End Time"}),h.jsxs(kS,{value:v,onValueChange:x,children:[h.jsx(NS,{id:"end-time",children:h.jsx(AS,{placeholder:"Select time"})}),h.jsx(IS,{children:X.map(Z=>h.jsx(RS,{value:Z.value,children:Z.label},Z.value))})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(yx,{id:"all-day",checked:E,onCheckedChange:Z=>T(Z===!0)}),h.jsx(jl,{htmlFor:"all-day",children:"All day"})]}),h.jsxs("div",{className:"*:not-first:mt-1.5",children:[h.jsx(jl,{htmlFor:"location",children:"Location"}),h.jsx(gu,{id:"location",value:k,onChange:Z=>I(Z.target.value)})]}),h.jsxs("fieldset",{className:"space-y-4",children:[h.jsx("legend",{className:"text-foreground text-sm leading-none font-medium",children:"Etiquette"}),h.jsx(w3e,{className:"flex gap-1.5",defaultValue:(ie=re[0])==null?void 0:ie.value,value:O,onValueChange:Z=>M(Z),children:re.map(Z=>h.jsx(E3e,{id:`color-${Z.value}`,value:Z.value,"aria-label":Z.label,className:Qe("size-6 shadow-none",Z.bgClass,Z.borderClass)},Z.value))})]})]}),h.jsxs(QEe,{className:"flex-row sm:justify-between",children:[(e==null?void 0:e.id)&&h.jsx(wr,{variant:"outline",size:"icon",onClick:ee,"aria-label":"Delete event",children:h.jsx(nCe,{size:16,"aria-hidden":"true"})}),h.jsxs("div",{className:"flex flex-1 justify-end gap-2",children:[h.jsx(wr,{variant:"outline",onClick:n,children:"Cancel"}),h.jsx(wr,{onClick:J,children:"Save"})]})]})]})})}function a5e({currentDate:e,events:t,onEventSelect:n,onEventCreate:r}){const s=w.useMemo(()=>{const m=MK(e),g=NK(m),y=Dc(m,{weekStartsOn:0}),v=kb(g,{weekStartsOn:0});return IK({start:y,end:v})},[e]),o=w.useMemo(()=>Array.from({length:7}).map((m,g)=>{const y=Ef(Dc(new Date),g);return ir(y,"EEE")}),[]),i=w.useMemo(()=>{const m=[];let g=[];for(let y=0;y<s.length;y++)g.push(s[y]),(g.length===7||y===s.length-1)&&(m.push(g),g=[]);return m},[s]),a=(m,g)=>{g.stopPropagation(),n(m)},[l,c]=w.useState(!1),{contentRef:u,getVisibleEventCount:f}=X4e({eventHeight:BN,eventGap:_K});return w.useEffect(()=>{c(!0)},[]),h.jsxs("div",{"data-slot":"month-view",className:"contents",children:[h.jsx("div",{className:"border-border/70 grid grid-cols-7 border-b",children:o.map(m=>h.jsx("div",{className:"text-muted-foreground/70 py-2 text-center text-sm",children:m},m))}),h.jsx("div",{className:"grid flex-1 auto-rows-fr",children:i.map((m,g)=>h.jsx("div",{className:"grid grid-cols-7 [&:last-child>*]:border-b-0",children:m.map((y,v)=>{if(!y)return null;const x=W4e(t,y),E=Y4e(t,y),T=TS(y,e),k=`month-cell-${y.toISOString()}`,I=[...E,...x],O=K4e(t,y),M=g===0&&v===0,P=l?f(I.length):void 0,j=P!==void 0&&I.length>P,V=j?I.length-P:0;return h.jsx("div",{className:"group border-border/70 data-outside-cell:bg-muted/25 data-outside-cell:text-muted-foreground/70 border-r border-b last:border-r-0","data-today":h1(y)||void 0,"data-outside-cell":!T||void 0,children:h.jsxs(y8,{id:k,date:y,onClick:()=>{const U=new Date(y);U.setHours(zN,0,0),r(U)},children:[h.jsx("div",{className:"group-data-today:bg-primary group-data-today:text-primary-foreground mt-1 inline-flex size-6 items-center justify-center rounded-full text-sm",children:ir(y,"d")}),h.jsxs("div",{ref:M?u:null,className:"min-h-[calc((var(--event-height)+var(--event-gap))*2)] sm:min-h-[calc((var(--event-height)+var(--event-gap))*3)] lg:min-h-[calc((var(--event-height)+var(--event-gap))*4)]",children:[D$(I).map((U,z)=>{const H=new Date(U.start),F=new Date(U.end),G=gs(y,H),X=gs(y,F),J=l&&P&&z>=P;return P?G?h.jsx("div",{className:"aria-hidden:hidden","aria-hidden":J?"true":void 0,children:h.jsx(b8,{event:U,view:"month",onClick:ee=>a(U,ee),isFirstDay:G,isLastDay:X})},U.id):h.jsx("div",{className:"aria-hidden:hidden","aria-hidden":J?"true":void 0,children:h.jsx(fm,{onClick:ee=>a(U,ee),event:U,view:"month",isFirstDay:G,isLastDay:X,children:h.jsxs("div",{className:"invisible","aria-hidden":!0,children:[!U.allDay&&h.jsxs("span",{children:[ir(new Date(U.start),"h:mm")," "]}),U.title]})})},`spanning-${U.id}-${y.toISOString().slice(0,10)}`):null}),j&&h.jsxs(vx,{modal:!0,children:[h.jsx(xx,{asChild:!0,children:h.jsx("button",{className:"focus-visible:border-ring focus-visible:ring-ring/50 text-muted-foreground hover:text-foreground hover:bg-muted/50 mt-[var(--event-gap)] flex h-[var(--event-height)] w-full items-center overflow-hidden px-1 text-left text-[10px] backdrop-blur-md transition outline-none select-none focus-visible:ring-[3px] sm:px-2 sm:text-xs",onClick:U=>U.stopPropagation(),children:h.jsxs("span",{children:["+ ",V," ",h.jsx("span",{className:"max-sm:sr-only",children:"more"})]})})}),h.jsx(wx,{align:"center",className:"max-w-52 p-3",style:{"--event-height":`${BN}px`},children:h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-sm font-medium",children:ir(y,"EEE d")}),h.jsx("div",{className:"space-y-1",children:D$(O).map(U=>{const z=new Date(U.start),H=new Date(U.end),F=gs(y,z),G=gs(y,H);return h.jsx(fm,{onClick:X=>a(U,X),event:U,view:"month",isFirstDay:F,isLastDay:G},U.id)})})]})})]})]})]})},y.toString())})},`week-${g}`))})]})}function l5e({currentDate:e,events:t,onEventSelect:n,onEventCreate:r}){const s=w.useMemo(()=>{const g=Dc(e,{weekStartsOn:0}),y=kb(e,{weekStartsOn:0});return IK({start:g,end:y})},[e]),o=w.useMemo(()=>Dc(e,{weekStartsOn:0}),[e]),i=w.useMemo(()=>{const g=qf(e);return RK({start:A1(g,fd),end:A1(g,jp-1)})},[e]),a=w.useMemo(()=>t.filter(g=>g.allDay||dm(g)).filter(g=>{const y=new Date(g.start),v=new Date(g.end);return s.some(x=>gs(x,y)||gs(x,v)||x>y&&x<v)}),[t,s]),l=w.useMemo(()=>s.map(y=>{const x=[...t.filter(I=>{if(I.allDay||dm(I))return!1;const O=new Date(I.start),M=new Date(I.end);return gs(y,O)||gs(y,M)||O<y&&M>y})].sort((I,O)=>{const M=new Date(I.start),P=new Date(O.start),j=new Date(I.end),V=new Date(O.end);if(M<P)return-1;if(M>P)return 1;const U=W1(j,M);return W1(V,P)-U}),E=[],T=qf(y),k=[];return x.forEach(I=>{const O=new Date(I.start),M=new Date(I.end),P=gs(y,O)?O:T,j=gs(y,M)?M:A1(T,24),V=N1(P)+gx(P)/60,U=N1(j)+gx(j)/60,z=(V-fd)*px,H=(U-V)*px;let F=0,G=!1;for(;!G;){const re=k[F]||[];re.length===0?(k[F]=re,G=!0):re.some(Z=>kK({start:P,end:j},{start:new Date(Z.event.start),end:new Date(Z.event.end)}))?F++:G=!0}const X=k[F]||[];k[F]=X,X.push({event:I,end:j});const J=F===0?1:.9,ee=F===0?0:F*.1;E.push({event:I,top:z,height:H,left:ee,width:J,zIndex:10+F})}),E}),[s,t]),c=(g,y)=>{y.stopPropagation(),n(g)},u=a.length>0,{currentTimePosition:f,currentTimeVisible:m}=UK(e,"week");return h.jsxs("div",{"data-slot":"week-view",className:"flex h-full flex-col",children:[h.jsxs("div",{className:"bg-background/80 border-border/70 sticky top-0 z-30 grid grid-cols-8 border-b backdrop-blur-md",children:[h.jsx("div",{className:"text-muted-foreground/70 py-2 text-center text-sm",children:h.jsx("span",{className:"max-[479px]:sr-only",children:ir(new Date,"O")})}),s.map(g=>h.jsxs("div",{className:"data-today:text-foreground text-muted-foreground/70 py-2 text-center text-sm data-today:font-medium","data-today":h1(g)||void 0,children:[h.jsxs("span",{className:"sm:hidden","aria-hidden":"true",children:[ir(g,"E")[0]," ",ir(g,"d")]}),h.jsx("span",{className:"max-sm:hidden",children:ir(g,"EEE dd")})]},g.toString()))]}),u&&h.jsx("div",{className:"border-border/70 bg-muted/50 border-b",children:h.jsxs("div",{className:"grid grid-cols-8",children:[h.jsx("div",{className:"border-border/70 relative border-r",children:h.jsx("span",{className:"text-muted-foreground/70 absolute bottom-0 left-0 h-6 w-16 max-w-full pe-2 text-right text-[10px] sm:pe-4 sm:text-xs",children:"All day"})}),s.map((g,y)=>{const v=a.filter(x=>{const E=new Date(x.start),T=new Date(x.end);return gs(g,E)||g>E&&g<T||gs(g,T)});return h.jsx("div",{className:"border-border/70 relative border-r p-1 last:border-r-0","data-today":h1(g)||void 0,children:v.map(x=>{const E=new Date(x.start),T=new Date(x.end),k=gs(g,E),I=gs(g,T),O=y===0&&SS(E,o),M=k||O;return h.jsx(fm,{onClick:P=>c(x,P),event:x,view:"month",isFirstDay:k,isLastDay:I,children:h.jsx("div",{className:Qe("truncate",!M&&"invisible"),"aria-hidden":!M,children:x.title})},`spanning-${x.id}`)})},g.toString())})]})}),h.jsxs("div",{className:"grid flex-1 grid-cols-8 overflow-hidden",children:[h.jsx("div",{className:"border-border/70 grid auto-cols-fr border-r",children:i.map((g,y)=>h.jsx("div",{className:"border-border/70 relative min-h-[var(--week-cells-height)] border-b last:border-b-0",children:y>0&&h.jsx("span",{className:"bg-background text-muted-foreground/70 absolute -top-3 left-0 flex h-6 w-16 max-w-full items-center justify-end pe-2 text-[10px] sm:pe-4 sm:text-xs",children:ir(g,"h a")})},g.toString()))}),s.map((g,y)=>h.jsxs("div",{className:"border-border/70 relative grid auto-cols-fr border-r last:border-r-0","data-today":h1(g)||void 0,children:[(l[y]??[]).map(v=>h.jsx("div",{className:"absolute z-10 px-0.5",style:{top:`${v.top}px`,height:`${v.height}px`,left:`${v.left*100}%`,width:`${v.width*100}%`,zIndex:v.zIndex},onClick:x=>x.stopPropagation(),children:h.jsx("div",{className:"size-full",children:h.jsx(b8,{event:v.event,view:"week",onClick:x=>c(v.event,x),showTime:!0,height:v.height})})},v.event.id)),m&&h1(g)&&h.jsx("div",{className:"pointer-events-none absolute right-0 left-0 z-20",style:{top:`${f}%`},children:h.jsxs("div",{className:"relative flex items-center",children:[h.jsx("div",{className:"bg-primary absolute -left-1 h-2 w-2 rounded-full"}),h.jsx("div",{className:"bg-primary h-[2px] w-full"})]})}),i.map(v=>{const x=N1(v);return h.jsx("div",{className:"border-border/70 relative min-h-[var(--week-cells-height)] border-b last:border-b-0",children:[0,1,2,3].map(E=>{const T=x+E*.25;return h.jsx(y8,{id:`week-cell-${g.toISOString()}-${T}`,date:g,time:T,className:Qe("absolute h-[calc(var(--week-cells-height)/4)] w-full",E===0&&"top-0",E===1&&"top-[calc(var(--week-cells-height)/4)]",E===2&&"top-[calc(var(--week-cells-height)/4*2)]",E===3&&"top-[calc(var(--week-cells-height)/4*3)]"),onClick:()=>{const k=new Date(g);k.setHours(x),k.setMinutes(E*15),r(k)}},`${v.toString()}-${E}`)})},v.toString())})]},g.toString()))]})]})}const G$=e=>{let t;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const m=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(g=>g(t,m))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(r,s,a);return a},c5e=(e=>e?G$(e):G$),u5e=e=>e;function d5e(e,t=u5e){const n=Me.useSyncExternalStore(e.subscribe,Me.useCallback(()=>t(e.getState()),[e,t]),Me.useCallback(()=>t(e.getInitialState()),[e,t]));return Me.useDebugValue(n),n}const W$=e=>{const t=c5e(e),n=r=>d5e(t,r);return Object.assign(n,t),n},f5e=(e=>e?W$(e):W$),Xi=[];for(let e=0;e<256;++e)Xi.push((e+256).toString(16).slice(1));function h5e(e,t=0){return(Xi[e[t+0]]+Xi[e[t+1]]+Xi[e[t+2]]+Xi[e[t+3]]+"-"+Xi[e[t+4]]+Xi[e[t+5]]+"-"+Xi[e[t+6]]+Xi[e[t+7]]+"-"+Xi[e[t+8]]+Xi[e[t+9]]+"-"+Xi[e[t+10]]+Xi[e[t+11]]+Xi[e[t+12]]+Xi[e[t+13]]+Xi[e[t+14]]+Xi[e[t+15]]).toLowerCase()}let n5;const p5e=new Uint8Array(16);function m5e(){if(!n5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n5=crypto.getRandomValues.bind(crypto)}return n5(p5e)}const g5e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Y$={randomUUID:g5e};function b5e(e,t,n){var s;e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??m5e();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,h5e(r)}function y2(e,t,n){return Y$.randomUUID&&!e?Y$.randomUUID():b5e(e)}const pC=f5e(e=>({todos:[],selectedTodoId:null,activeTab:"all",isAddDialogOpen:!1,isTodoSheetOpen:!1,viewMode:"list",filterUser:null,filterPriority:null,showStarredOnly:!1,searchQuery:"",setTodos:t=>e(()=>({todos:t})),addTodo:t=>e(n=>({todos:[...n.todos,{...t,id:y2(),createdAt:new Date,comments:[],files:[],subTasks:[],starred:!1}]})),updateTodo:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,...n}:s)})),deleteTodo:t=>e(n=>({todos:n.todos.filter(r=>r.id!==t)})),setSelectedTodoId:t=>e(()=>({selectedTodoId:t})),setActiveTab:t=>e(()=>({activeTab:t})),setAddDialogOpen:t=>e(()=>({isAddDialogOpen:t})),setTodoSheetOpen:t=>e(()=>({isTodoSheetOpen:t})),addComment:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,comments:[...s.comments,{id:y2(),text:n,createdAt:new Date}]}:s)})),deleteComment:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,comments:s.comments.filter(o=>o.id!==n)}:s)})),reorderTodos:t=>e(n=>{const r=[...n.todos];return t.forEach(({id:s,position:o})=>{const i=r.findIndex(a=>a.id===s);if(i!==-1){const[a]=r.splice(i,1);r.splice(o,0,a)}}),{todos:r}}),setViewMode:t=>e(()=>({viewMode:t})),setFilterUser:t=>e(()=>({filterUser:t})),setFilterPriority:t=>e(()=>({filterPriority:t})),setSearchQuery:t=>e(()=>({searchQuery:t})),toggleShowStarredOnly:()=>e(t=>({showStarredOnly:!t.showStarredOnly})),addFile:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,files:[...s.files||[],{...n,id:y2()}]}:s)})),removeFile:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,files:(s.files||[]).filter(o=>o.id!==n)}:s)})),addSubTask:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,subTasks:[...s.subTasks||[],{id:y2(),title:n,completed:!1}]}:s)})),updateSubTask:(t,n,r)=>e(s=>({todos:s.todos.map(o=>o.id===t?{...o,subTasks:(o.subTasks||[]).map(i=>i.id===n?{...i,completed:r}:i)}:o)})),removeSubTask:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,subTasks:(s.subTasks||[]).filter(o=>o.id!==n)}:s)})),toggleStarred:t=>e(n=>({todos:n.todos.map(r=>r.id===t?{...r,starred:!r.starred}:r)}))})),y5e=[{id:"4",title:"Design homepage layout",description:"Create wireframes and mockups for the homepage",assignedTo:["Emily Carter","Liam Walker"],comments:[{id:"c3",text:"Consider using a grid layout for responsiveness",createdAt:new Date("2023-05-20T00:00:00.000Z")}],status:"in-progress",priority:"high",createdAt:new Date("2023-05-18T00:00:00.000Z"),dueDate:new Date("2023-06-05T00:00:00.000Z"),reminderDate:new Date("2023-05-30T00:00:00.000Z"),subTasks:[{id:"st4",title:"Sketch wireframe",completed:!0},{id:"st5",title:"Create high-fidelity mockup",completed:!1}],files:[],starred:!0},{id:"5",title:"Conduct user interviews",description:"Schedule and conduct interviews with 5 users",assignedTo:["Liam Walker"],comments:[],status:"pending",priority:"medium",createdAt:new Date("2023-05-22T00:00:00.000Z"),dueDate:new Date("2023-06-12T00:00:00.000Z"),reminderDate:new Date("2023-06-10T00:00:00.000Z"),subTasks:[{id:"st6",title:"Prepare interview questions",completed:!0},{id:"st7",title:"Send invites",completed:!1}],files:[],starred:!1},{id:"6",title:"Write unit tests",description:"Add unit tests for authentication module",assignedTo:["Sophie Lee"],comments:[{id:"c4",text:"Make sure to cover edge cases",createdAt:new Date("2023-05-25T00:00:00.000Z")}],status:"in-progress",priority:"high",createdAt:new Date("2023-05-24T00:00:00.000Z"),dueDate:new Date("2023-06-07T00:00:00.000Z"),reminderDate:new Date("2023-06-05T00:00:00.000Z"),subTasks:[{id:"st8",title:"Write tests for login",completed:!1},{id:"st9",title:"Write tests for logout",completed:!1}],files:[],starred:!0},{id:"7",title:"Prepare launch checklist",description:"Create a checklist of items before launch day",assignedTo:["Daniel Kim","Olivia Adams"],comments:[],status:"pending",priority:"low",createdAt:new Date("2023-05-27T00:00:00.000Z"),dueDate:new Date("2023-06-20T00:00:00.000Z"),reminderDate:void 0,subTasks:[{id:"st10",title:"Domain verification",completed:!1}],files:[],starred:!1},{id:"8",title:"Update privacy policy",description:"Add GDPR compliance section",assignedTo:["Olivia Adams"],comments:[{id:"c5",text:"Consult with the legal team for accuracy",createdAt:new Date("2023-05-29T00:00:00.000Z")}],status:"in-progress",priority:"medium",createdAt:new Date("2023-05-28T00:00:00.000Z"),dueDate:new Date("2023-06-14T00:00:00.000Z"),reminderDate:new Date("2023-06-12T00:00:00.000Z"),subTasks:[{id:"st11",title:"Review existing policy",completed:!0},{id:"st12",title:"Add new GDPR section",completed:!1}],files:[],starred:!1},{id:"9",title:"Deploy to staging",description:"Deploy the latest build to the staging environment",assignedTo:["Noah Bennett"],comments:[],status:"completed",priority:"high",createdAt:new Date("2023-05-30T00:00:00.000Z"),dueDate:new Date("2023-06-02T00:00:00.000Z"),reminderDate:new Date("2023-05-30T00:00:00.000Z"),subTasks:[{id:"st13",title:"Merge main branch",completed:!0},{id:"st14",title:"Trigger CI/CD",completed:!0}],files:[],starred:!0},{id:"10",title:"Organize team retro",description:"Plan and host the sprint retrospective meeting",assignedTo:["Mia Turner","Olivia Adams"],comments:[],status:"pending",priority:"low",createdAt:new Date("2023-06-01T00:00:00.000Z"),dueDate:new Date("2023-06-10T00:00:00.000Z"),reminderDate:new Date("2023-06-09T00:00:00.000Z"),subTasks:[{id:"st15",title:"Book meeting room",completed:!1},{id:"st16",title:"Prepare feedback board",completed:!1}],files:[],starred:!1},{id:"11",title:"Refactor dashboard UI",description:"Improve layout and responsiveness of the dashboard page",assignedTo:["Lucas Evans","Mia Turner","Olivia Adams"],comments:[{id:"c6",text:"Don't forget mobile breakpoints",createdAt:new Date("2023-06-03T00:00:00.000Z")}],status:"in-progress",priority:"high",createdAt:new Date("2023-06-02T00:00:00.000Z"),dueDate:new Date("2023-06-18T00:00:00.000Z"),reminderDate:new Date("2023-06-15T00:00:00.000Z"),subTasks:[{id:"st17",title:"Fix sidebar behavior",completed:!0},{id:"st18",title:"Adjust grid layout",completed:!1}],files:[],starred:!0}];var Ex=(e=>(e.High="high",e.Medium="medium",e.Low="low",e))(Ex||{}),_x=(e=>(e.Pending="pending",e.InProgress="in-progress",e.Completed="completed",e))(_x||{});const YN={high:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",low:"bg-gray-200 text-green-80 dark:bg-gray-700 dark:text-gray-200"},cJ={high:"bg-red-500",medium:"bg-yellow-500",low:"bg-gray-400"},KN={pending:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200","in-progress":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",completed:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"},uJ={pending:"Pending","in-progress":"In Progress",completed:"Completed"},v5e={pending:"bg-blue-500","in-progress":"bg-purple-500",completed:"bg-green-500"},x5e=e=>{let{transform:t}=e;return{...t,x:0}};var dJ="Toggle",R8=w.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:s,...o}=e,[i,a]=ml({prop:n,onChange:s,defaultProp:r??!1,caller:dJ});return h.jsx(Ln.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...o,ref:t,onClick:Gt(e.onClick,()=>{e.disabled||a(!i)})})});R8.displayName=dJ;var w5e=R8,U0="ToggleGroup",[fJ]=za(U0,[$0]),hJ=$0(),M8=Me.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const s=r;return h.jsx(E5e,{...s,ref:t})}if(n==="multiple"){const s=r;return h.jsx(_5e,{...s,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${U0}\``)});M8.displayName=U0;var[pJ,mJ]=fJ(U0),E5e=Me.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...o}=e,[i,a]=ml({prop:n,defaultProp:r??"",onChange:s,caller:U0});return h.jsx(pJ,{scope:e.__scopeToggleGroup,type:"single",value:Me.useMemo(()=>i?[i]:[],[i]),onItemActivate:a,onItemDeactivate:Me.useCallback(()=>a(""),[a]),children:h.jsx(gJ,{...o,ref:t})})}),_5e=Me.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...o}=e,[i,a]=ml({prop:n,defaultProp:r??[],onChange:s,caller:U0}),l=Me.useCallback(u=>a((f=[])=>[...f,u]),[a]),c=Me.useCallback(u=>a((f=[])=>f.filter(m=>m!==u)),[a]);return h.jsx(pJ,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:l,onItemDeactivate:c,children:h.jsx(gJ,{...o,ref:t})})});M8.displayName=U0;var[S5e,T5e]=fJ(U0),gJ=Me.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:s=!0,orientation:o,dir:i,loop:a=!0,...l}=e,c=hJ(n),u=xb(i),f={role:"group",dir:u,...l};return h.jsx(S5e,{scope:n,rovingFocus:s,disabled:r,children:s?h.jsx(S4,{asChild:!0,...c,orientation:o,dir:u,loop:a,children:h.jsx(Ln.div,{...f,ref:t})}):h.jsx(Ln.div,{...f,ref:t})})}),MS="ToggleGroupItem",bJ=Me.forwardRef((e,t)=>{const n=mJ(MS,e.__scopeToggleGroup),r=T5e(MS,e.__scopeToggleGroup),s=hJ(e.__scopeToggleGroup),o=n.value.includes(e.value),i=r.disabled||e.disabled,a={...e,pressed:o,disabled:i},l=Me.useRef(null);return r.rovingFocus?h.jsx(T4,{asChild:!0,...s,focusable:!i,active:o,ref:l,children:h.jsx(K$,{...a,ref:t})}):h.jsx(K$,{...a,ref:t})});bJ.displayName=MS;var K$=Me.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...s}=e,o=mJ(MS,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},a=o.type==="single"?i:void 0;return h.jsx(R8,{...a,...s,ref:t,onPressedChange:l=>{l?o.onItemActivate(r):o.onItemDeactivate(r)}})}),C5e=M8,k5e=bJ;const yJ=xR("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function ZN({className:e,variant:t,size:n,...r}){return h.jsx(w5e,{"data-slot":"toggle",className:Qe(yJ({variant:t,size:n,className:e})),...r})}const vJ=w.createContext({size:"default",variant:"default"});function A5e({className:e,variant:t,size:n,children:r,...s}){return h.jsx(C5e,{"data-slot":"toggle-group","data-variant":t,"data-size":n,className:Qe("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",e),...s,children:h.jsx(vJ.Provider,{value:{variant:t,size:n},children:r})})}function Z$({className:e,children:t,variant:n,size:r,...s}){const o=w.useContext(vJ);return h.jsx(k5e,{"data-slot":"toggle-group-item","data-variant":o.variant||n,"data-size":o.size||r,className:Qe(yJ({variant:o.variant||n,size:o.size||r}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",e),...s,children:t})}const v2=({todo:e,onClick:t,onStatusChange:n,viewMode:r,onStarToggle:s,isDraggingOverlay:o=!1})=>{var x,E,T,k;const i=((x=e.subTasks)==null?void 0:x.filter(I=>I.completed).length)||0,a=((E=e.subTasks)==null?void 0:E.length)||0,{attributes:l,listeners:c,setNodeRef:u,transform:f,transition:m,isDragging:g}=d8({id:e.id}),y={transform:_u.Transform.toString(f),transition:m,opacity:g?o?.8:.4:1,zIndex:g?100:1},v=e.reminderDate?ir(new Date(e.reminderDate),"MMM d, yyyy - h:mm a"):null;return r==="grid"?h.jsx("div",{ref:u,...l,...c,style:y,children:h.jsxs(TN,{className:Qe("flex h-full cursor-pointer flex-col transition-shadow hover:shadow-md",e.status==="completed"?"opacity-70":""),onClick:t,children:[h.jsx(CN,{className:"flex h-full flex-col justify-between",children:h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx(yx,{checked:e.status==="completed",onCheckedChange:()=>n?n(e.id,e.status==="completed"?"pending":"completed"):void 0,onClick:I=>I.stopPropagation()}),h.jsx("h3",{className:Qe("text-md flex-1 leading-none font-medium",e.status==="completed"?"text-muted-foreground line-through":""),children:e.title}),h.jsx(EL,{className:Qe("size-5 cursor-pointer",e.starred?"fill-yellow-400 text-yellow-400":"text-muted-foreground/50 hover:text-muted-foreground"),onClick:I=>s?s(e.id,I):void 0})]}),h.jsxs("div",{className:"text-muted-foreground flex flex-wrap items-center gap-1 text-sm",children:[h.jsx("span",{children:"Assigned to:"}),e.assignedTo.map((I,O)=>h.jsx(Ec,{variant:"outline",className:"font-normal",children:I},O))]}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.dueDate&&h.jsxs("div",{className:"text-muted-foreground flex items-center gap-1 text-sm",children:[h.jsx(F1,{className:"h-3 w-3"}),h.jsx("span",{children:ir(new Date(e.dueDate),"MMM d, yyyy")})]}),e.reminderDate&&h.jsx(H1,{children:h.jsxs(V1,{children:[h.jsx(q1,{asChild:!0,children:h.jsx("div",{className:"flex items-center gap-1 text-xs",children:h.jsx(aL,{className:"size-3"})})}),h.jsx(cm,{children:h.jsxs("p",{children:["Reminder: ",v]})})]})})]}),a>0&&h.jsxs("div",{className:"text-muted-foreground text-xs",children:["Subtasks: ",i,"/",a]})]})}),h.jsxs(jve,{className:"flex flex-wrap justify-between border-t",children:[h.jsxs("div",{className:"flex items-center gap-2 capitalize",children:[h.jsx(Ec,{className:KN[e.status],children:e.status.replace("-"," ")}),h.jsx(Ec,{className:YN[e.priority],children:e.priority})]}),(((T=e.files)==null?void 0:T.length)||0)>0&&h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(ix,{className:"text-muted-foreground size-3"}),h.jsx("span",{className:"text-muted-foreground text-xs",children:(k=e.files)==null?void 0:k.length})]})]})]})}):h.jsx("div",{ref:u,...l,...c,style:y,children:h.jsx(TN,{className:Qe("cursor-pointer transition-shadow hover:shadow-md",e.status==="completed"?"opacity-70":""),onClick:t,children:h.jsxs(CN,{className:"flex items-start gap-3",children:[h.jsx(yx,{checked:e.status==="completed",onCheckedChange:()=>n?n(e.id,e.status==="completed"?"pending":"completed"):void 0,onClick:I=>I.stopPropagation()}),h.jsxs("div",{className:"flex grow flex-col space-y-2",children:[h.jsxs("div",{className:"flex flex-col items-start justify-between space-y-1 lg:flex-row lg:space-y-0",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("h3",{className:Qe("text-md leading-none font-medium",e.status==="completed"?"text-muted-foreground line-through":""),children:e.title}),h.jsx(EL,{className:Qe("size-4 cursor-pointer",e.starred?"fill-yellow-400 text-yellow-400":"text-muted-foreground/50 hover:text-muted-foreground"),onClick:I=>s?s(e.id,I):void 0})]}),h.jsxs("div",{className:"flex items-center gap-2 capitalize",children:[h.jsx(Ec,{className:KN[e.status],children:e.status.replace("-"," ")}),h.jsx(Ec,{className:YN[e.priority],children:e.priority})]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[h.jsx("div",{className:"flex flex-wrap gap-1",children:e.assignedTo.map((I,O)=>h.jsx(Ec,{variant:"outline",className:"font-normal",children:I},O))}),e.dueDate&&h.jsxs("div",{className:"text-muted-foreground flex items-center gap-1 text-xs",children:[h.jsx(F1,{className:"h-3 w-3"}),h.jsx("span",{children:ir(new Date(e.dueDate),"MMM d, yyyy")})]}),e.reminderDate&&h.jsx(H1,{children:h.jsxs(V1,{children:[h.jsx(q1,{asChild:!0,children:h.jsx("div",{className:"flex items-center gap-1 text-xs",children:h.jsx(aL,{className:"size-3"})})}),h.jsx(cm,{children:h.jsxs("p",{children:["Reminder: ",v]})})]})}),e.files&&e.files.length>0&&h.jsxs("div",{className:"text-muted-foreground flex items-center gap-1 text-xs",children:[h.jsx(ix,{className:"size-3"}),h.jsx("span",{children:e.files.length})]}),a>0&&h.jsxs("div",{className:"text-muted-foreground text-xs",children:["Subtasks: ",i,"/",a]})]})]})]})})})},N5e=({onTabChange:e,activeTab:t})=>h.jsx(AG,{defaultValue:t,onValueChange:n=>e(n),value:t,children:h.jsxs(NG,{children:[h.jsx(Nv,{value:"all",children:"All"}),Object.values(_x).map(n=>h.jsx(Nv,{value:n,children:uJ[n]},n))]})});function I5e({activeTab:e,onSelectTodo:t,onAddTodoClick:n}){const[r,s]=Me.useState(null),{todos:o,updateTodo:i,reorderTodos:a,viewMode:l,setViewMode:c,filterUser:u,setFilterUser:f,filterPriority:m,setFilterPriority:g,searchQuery:y,setSearchQuery:v,toggleStarred:x,showStarredOnly:E,toggleShowStarredOnly:T,setActiveTab:k}=pC(),[,I]=Me.useState([]),O=n8(h0(J4,{activationConstraint:{distance:3}}),h0(Z4,{coordinateGetter:uTe})),M=ie=>{k(ie)},P=Array.from(new Set((o||[]).flatMap(ie=>ie.assignedTo))),j=(o||[]).filter(ie=>{var Z;if(e!=="all")return ie.status===e;if(u&&u.length>0&&!u.some(te=>ie.assignedTo.includes(te))||m&&ie.priority!==m||E&&!ie.starred)return!1;if(y.trim()){const te=y.toLowerCase();return ie.title.toLowerCase().includes(te)||((Z=ie.description)==null?void 0:Z.toLowerCase().includes(te))||ie.assignedTo.some(oe=>oe.toLowerCase().includes(te))}return!0}),V=(ie,Z)=>{i(ie,{status:Z}),Bi.success(`Task status changed to ${Z.replace("-"," ")}`)},U=ie=>{console.log("event.active.id",ie.active.id),s(ie.active.id)},z=ie=>{const{active:Z,over:te}=ie;if(!te||Z.id===te.id)return;const oe=j.findIndex(Ce=>Ce.id===Z.id),Q=j.findIndex(Ce=>Ce.id===te.id);if(oe===-1||Q===-1)return;const Te=C1(j,oe,Q),ge=Te.map((Ce,fe)=>({id:Ce.id,position:fe}));a(ge),I(ge),console.log("Todos after reordering:",{reorderedTodos:Te.map(Ce=>{var fe;return{id:Ce.id,title:Ce.title,position:(fe=ge.find(Fe=>Fe.id===Ce.id))==null?void 0:fe.position}})}),Bi.success("The to-do items have been reordered successfully.")},H=ie=>{s(null)},F=(ie,Z)=>{if(!u)f(Z?[ie]:null);else{const te=Z?[...u,ie]:u.filter(oe=>oe!==ie);f(te.length>0?te:null)}},G=()=>{f(null),g(null),v(""),E&&T()},X=(ie,Z)=>{Z.stopPropagation(),x(ie)},J=()=>h.jsxs("div",{className:"space-y-6 p-4",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Assigned Users"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(ie=>h.jsx(ZN,{variant:"outline",size:"sm",pressed:(u==null?void 0:u.includes(ie))||!1,onPressedChange:Z=>F(ie,Z),className:"px-3 text-xs",children:ie},ie))})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(yx,{id:"starred",checked:E,onCheckedChange:T}),h.jsx(jl,{htmlFor:"starred",children:"Show starred only"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Priority"}),h.jsx("div",{className:"flex gap-2 *:grow",children:Object.values(Ex).map(ie=>h.jsxs(ZN,{variant:"outline",size:"sm",pressed:(m==null?void 0:m.includes(ie))||!1,onPressedChange:()=>g(ie),className:"px-3 text-xs capitalize",children:[h.jsx("span",{className:Qe("size-2 rounded-full",cJ[ie])}),ie]},ie))}),(u||m||E)&&h.jsx("div",{className:"text-end",children:h.jsxs(wr,{variant:"link",size:"sm",className:"px-0!",onClick:G,children:["Clear Filters",h.jsx(qr,{})]})})]})]}),ee=(o||[]).map(ie=>ie.id),re=()=>l==="grid"?h.jsxs(vS,{sensors:O,collisionDetection:bS,onDragStart:U,onDragEnd:z,onDragCancel:H,children:[h.jsx(ES,{items:ee,strategy:wS,children:h.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:j.map(ie=>h.jsx(v2,{todo:ie,onClick:()=>t(ie.id),onStatusChange:V,viewMode:"grid",onStarToggle:X},ie.id))})}),h.jsx(xS,{children:r?h.jsx(v2,{todo:j.find(ie=>ie.id===r),viewMode:"grid",isDraggingOverlay:!0}):null})]}):h.jsxs(vS,{sensors:O,collisionDetection:bS,onDragStart:U,onDragEnd:z,onDragCancel:H,modifiers:[x5e],children:[h.jsx(ES,{items:ee,strategy:wS,children:h.jsx("div",{className:"grid grid-cols-1 space-y-4",children:j.map(ie=>h.jsx(v2,{todo:ie,onClick:()=>t(ie.id),onStatusChange:V,viewMode:"list",onStarToggle:X},ie.id))})}),h.jsx(xS,{children:r?h.jsx(v2,{todo:j.find(ie=>ie.id===r),viewMode:"list",isDraggingOverlay:!0}):null})]});return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 lg:flex-row lg:items-center",children:[h.jsx(N5e,{activeTab:e,onTabChange:M}),h.jsxs("div",{className:"flex w-full items-center gap-2 lg:w-auto",children:[h.jsxs("div",{className:"relative w-auto",children:[h.jsx(Vf,{className:"absolute top-2.5 left-3 size-4 opacity-50"}),h.jsx(gu,{placeholder:"Search tasks...",className:"ps-10",value:y,onChange:ie=>v(ie.target.value)})]}),h.jsxs(bw,{children:[h.jsx(yw,{asChild:!0,children:h.jsxs(wr,{size:"icon",variant:"outline",className:"relative",children:[h.jsx(Vq,{}),(u||m||E)&&h.jsx(Ec,{variant:"secondary",className:"absolute -end-1.5 -top-1.5 size-4 rounded-full p-0",children:(u?1:0)+(m?1:0)+(E?1:0)})]})}),h.jsx(vw,{className:"w-80",align:"end",children:J()})]}),h.jsxs(A5e,{type:"single",variant:"outline",value:l,onValueChange:ie=>ie&&c(ie),children:[h.jsx(Z$,{value:"list","aria-label":"List view",children:h.jsx(cbe,{})}),h.jsx(Z$,{value:"grid","aria-label":"Grid view",children:h.jsx(Z1e,{})})]}),h.jsx(H1,{children:h.jsxs(V1,{children:[h.jsx(q1,{asChild:!0,children:h.jsx(wr,{size:"icon",onClick:n,className:"fixed end-6 bottom-6 z-10 rounded-full! md:size-14",children:h.jsx(Hf,{className:"md:size-6"})})}),h.jsx(cm,{side:"left",children:h.jsx("p",{children:"Add To-Do"})})]})})]})]}),j.length===0?h.jsxs("div",{className:"flex h-[calc(100vh-12rem)] flex-col items-center justify-center py-12 text-center",children:[h.jsx("h3",{className:"text-xl font-medium",children:"No tasks found"}),h.jsx("p",{className:"text-muted-foreground mt-2",children:"Add a new task to get started"})]}):re()]})}var Aw=e=>e.type==="checkbox",Hp=e=>e instanceof Date,al=e=>e==null;const xJ=e=>typeof e=="object";var fi=e=>!al(e)&&!Array.isArray(e)&&xJ(e)&&!Hp(e),wJ=e=>fi(e)&&e.target?Aw(e.target)?e.target.checked:e.target.value:e,R5e=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,EJ=(e,t)=>e.has(R5e(t)),M5e=e=>{const t=e.constructor&&e.constructor.prototype;return fi(t)&&t.hasOwnProperty("isPrototypeOf")},O8=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ti(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(O8&&(e instanceof Blob||r))&&(n||fi(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!M5e(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Ti(e[s]));else return e;return t}var mC=e=>/^\w*$/.test(e),Uo=e=>e===void 0,D8=e=>Array.isArray(e)?e.filter(Boolean):[],P8=e=>D8(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Wt=(e,t,n)=>{if(!t||!fi(e))return n;const r=(mC(t)?[t]:P8(t)).reduce((s,o)=>al(s)?s:s[o],e);return Uo(r)||r===e?Uo(e[t])?n:e[t]:r},Ul=e=>typeof e=="boolean",Es=(e,t,n)=>{let r=-1;const s=mC(t)?[t]:P8(t),o=s.length,i=o-1;for(;++r<o;){const a=s[r];let l=n;if(r!==i){const c=e[a];l=fi(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=l,e=e[a]}};const OS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},lu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},df={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},L8=Me.createContext(null);L8.displayName="HookFormContext";const gC=()=>Me.useContext(L8),O5e=e=>{const{children:t,...n}=e;return Me.createElement(L8.Provider,{value:n},t)};var _J=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(s,o,{get:()=>{const i=o;return t._proxyFormState[i]!==lu.all&&(t._proxyFormState[i]=!r||lu.all),n&&(n[i]=!0),e[i]}});return s};const $8=typeof window<"u"?Me.useLayoutEffect:Me.useEffect;function SJ(e){const t=gC(),{control:n=t.control,disabled:r,name:s,exact:o}=e||{},[i,a]=Me.useState(n._formState),l=Me.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return $8(()=>n._subscribe({name:s,formState:l.current,exact:o,callback:c=>{!r&&a({...n._formState,...c})}}),[s,r,o]),Me.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),Me.useMemo(()=>_J(i,n,l.current,!1),[i,n])}var Hl=e=>typeof e=="string",JN=(e,t,n,r,s)=>Hl(e)?(r&&t.watch.add(e),Wt(n,e,s)):Array.isArray(e)?e.map(o=>(r&&t.watch.add(o),Wt(n,o))):(r&&(t.watchAll=!0),n),XN=e=>al(e)||!xJ(e);function cu(e,t,n=new WeakSet){if(XN(e)||XN(t))return Object.is(e,t);if(Hp(e)&&Hp(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const o of r){const i=e[o];if(!s.includes(o))return!1;if(o!=="ref"){const a=t[o];if(Hp(i)&&Hp(a)||fi(i)&&fi(a)||Array.isArray(i)&&Array.isArray(a)?!cu(i,a,n):!Object.is(i,a))return!1}}return!0}function D5e(e){const t=gC(),{control:n=t.control,name:r,defaultValue:s,disabled:o,exact:i,compute:a}=e||{},l=Me.useRef(s),c=Me.useRef(a),u=Me.useRef(void 0),f=Me.useRef(n),m=Me.useRef(r);c.current=a;const[g,y]=Me.useState(()=>{const I=n._getWatch(r,l.current);return c.current?c.current(I):I}),v=Me.useCallback(I=>{const O=JN(r,n._names,I||n._formValues,!1,l.current);return c.current?c.current(O):O},[n._formValues,n._names,r]),x=Me.useCallback(I=>{if(!o){const O=JN(r,n._names,I||n._formValues,!1,l.current);if(c.current){const M=c.current(O);cu(M,u.current)||(y(M),u.current=M)}else y(O)}},[n._formValues,n._names,o,r]);$8(()=>((f.current!==n||!cu(m.current,r))&&(f.current=n,m.current=r,x()),n._subscribe({name:r,formState:{values:!0},exact:i,callback:I=>{x(I.values)}})),[n,i,r,x]),Me.useEffect(()=>n._removeUnmounted());const E=f.current!==n,T=m.current,k=Me.useMemo(()=>{if(o)return null;const I=!E&&!cu(T,r);return E||I?v():null},[o,E,r,T,v]);return k!==null?k:g}function P5e(e){const t=gC(),{name:n,disabled:r,control:s=t.control,shouldUnregister:o,defaultValue:i,exact:a=!0}=e,l=EJ(s._names.array,n),c=Me.useMemo(()=>Wt(s._formValues,n,Wt(s._defaultValues,n,i)),[s,n,i]),u=D5e({control:s,name:n,defaultValue:c,exact:a}),f=SJ({control:s,name:n,exact:a}),m=Me.useRef(e),g=Me.useRef(void 0),y=Me.useRef(s.register(n,{...e.rules,value:u,...Ul(e.disabled)?{disabled:e.disabled}:{}}));m.current=e;const v=Me.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Wt(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!Wt(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Wt(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Wt(f.validatingFields,n)},error:{enumerable:!0,get:()=>Wt(f.errors,n)}}),[f,n]),x=Me.useCallback(I=>y.current.onChange({target:{value:wJ(I),name:n},type:OS.CHANGE}),[n]),E=Me.useCallback(()=>y.current.onBlur({target:{value:Wt(s._formValues,n),name:n},type:OS.BLUR}),[n,s._formValues]),T=Me.useCallback(I=>{const O=Wt(s._fields,n);O&&I&&(O._f.ref={focus:()=>I.focus&&I.focus(),select:()=>I.select&&I.select(),setCustomValidity:M=>I.setCustomValidity(M),reportValidity:()=>I.reportValidity()})},[s._fields,n]),k=Me.useMemo(()=>({name:n,value:u,...Ul(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:x,onBlur:E,ref:T}),[n,r,f.disabled,x,E,T,u]);return Me.useEffect(()=>{const I=s._options.shouldUnregister||o,O=g.current;O&&O!==n&&!l&&s.unregister(O),s.register(n,{...m.current.rules,...Ul(m.current.disabled)?{disabled:m.current.disabled}:{}});const M=(P,j)=>{const V=Wt(s._fields,P);V&&V._f&&(V._f.mount=j)};if(M(n,!0),I){const P=Ti(Wt(s._options.defaultValues,n,m.current.defaultValue));Es(s._defaultValues,n,P),Uo(Wt(s._formValues,n))&&Es(s._formValues,n,P)}return!l&&s.register(n),g.current=n,()=>{(l?I&&!s._state.action:I)?s.unregister(n):M(n,!1)}},[n,s,l,o]),Me.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),Me.useMemo(()=>({field:k,formState:f,fieldState:v}),[k,f,v])}const L5e=e=>e.render(P5e(e));var F8=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},Ov=e=>Array.isArray(e)?e:[e],J$=()=>{let e=[];return{get observers(){return e},next:s=>{for(const o of e)o.next&&o.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(o=>o!==s)}}),unsubscribe:()=>{e=[]}}};function TJ(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const s=e[r],o=t[r];if(s&&fi(s)&&o){const i=TJ(s,o);fi(i)&&(n[r]=i)}else e[r]&&(n[r]=o)}return n}var Ra=e=>fi(e)&&!Object.keys(e).length,B8=e=>e.type==="file",uu=e=>typeof e=="function",DS=e=>{if(!O8)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},CJ=e=>e.type==="select-multiple",z8=e=>e.type==="radio",$5e=e=>z8(e)||Aw(e),r5=e=>DS(e)&&e.isConnected;function F5e(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Uo(e)?r++:e[t[r++]];return e}function B5e(e){for(const t in e)if(e.hasOwnProperty(t)&&!Uo(e[t]))return!1;return!0}function ii(e,t){const n=Array.isArray(t)?t:mC(t)?[t]:P8(t),r=n.length===1?e:F5e(e,n),s=n.length-1,o=n[s];return r&&delete r[o],s!==0&&(fi(r)&&Ra(r)||Array.isArray(r)&&B5e(r))&&ii(e,n.slice(0,-1)),e}var z5e=e=>{for(const t in e)if(uu(e[t]))return!0;return!1};function kJ(e){return Array.isArray(e)||fi(e)&&!z5e(e)}function QN(e,t={}){for(const n in e){const r=e[n];kJ(r)?(t[n]=Array.isArray(r)?[]:{},QN(r,t[n])):Uo(r)||(t[n]=!0)}return t}function n1(e,t,n){n||(n=QN(t));for(const r in e){const s=e[r];if(kJ(s))Uo(t)||XN(n[r])?n[r]=QN(s,Array.isArray(s)?[]:{}):n1(s,al(t)?{}:t[r],n[r]);else{const o=t[r];n[r]=!cu(s,o)}}return n}const X$={value:!1,isValid:!1},Q$={value:!0,isValid:!0};var AJ=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Uo(e[0].attributes.value)?Uo(e[0].value)||e[0].value===""?Q$:{value:e[0].value,isValid:!0}:Q$:X$}return X$},NJ=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Uo(e)?e:t?e===""?NaN:e&&+e:n&&Hl(e)?new Date(e):r?r(e):e;const eF={isValid:!1,value:null};var IJ=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,eF):eF;function tF(e){const t=e.ref;return B8(t)?t.files:z8(t)?IJ(e.refs).value:CJ(t)?[...t.selectedOptions].map(({value:n})=>n):Aw(t)?AJ(e.refs).value:NJ(Uo(t.value)?e.ref.value:t.value,e)}var j5e=(e,t,n,r)=>{const s={};for(const o of e){const i=Wt(t,o);i&&Es(s,o,i._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},PS=e=>e instanceof RegExp,Hy=e=>Uo(e)?e:PS(e)?e.source:fi(e)?PS(e.value)?e.value.source:e.value:e,nF=e=>({isOnSubmit:!e||e===lu.onSubmit,isOnBlur:e===lu.onBlur,isOnChange:e===lu.onChange,isOnAll:e===lu.all,isOnTouch:e===lu.onTouched});const rF="AsyncFunction";var U5e=e=>!!e&&!!e.validate&&!!(uu(e.validate)&&e.validate.constructor.name===rF||fi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===rF)),H5e=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),sF=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Dv=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const o=Wt(e,s);if(o){const{_f:i,...a}=o;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],s)&&!r)return!0;if(i.ref&&t(i.ref,i.name)&&!r)return!0;if(Dv(a,t))break}else if(fi(a)&&Dv(a,t))break}}};function oF(e,t,n){const r=Wt(e,n);if(r||mC(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const o=s.join("."),i=Wt(t,o),a=Wt(e,o);if(i&&!Array.isArray(i)&&n!==o)return{name:n};if(a&&a.type)return{name:o,error:a};if(a&&a.root&&a.root.type)return{name:`${o}.root`,error:a.root};s.pop()}return{name:n}}var V5e=(e,t,n,r)=>{n(e);const{name:s,...o}=e;return Ra(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(i=>t[i]===(!r||lu.all))},q5e=(e,t,n)=>!e||!t||e===t||Ov(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),G5e=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,W5e=(e,t)=>!D8(Wt(e,t)).length&&ii(e,t),Y5e=(e,t,n)=>{const r=Ov(Wt(e,n));return Es(r,"root",t[n]),Es(e,n,r),e};function iF(e,t,n="validate"){if(Hl(e)||Array.isArray(e)&&e.every(Hl)||Ul(e)&&!e)return{type:n,message:Hl(e)?e:"",ref:t}}var qg=e=>fi(e)&&!PS(e)?e:{value:e,message:""},aF=async(e,t,n,r,s,o)=>{const{ref:i,refs:a,required:l,maxLength:c,minLength:u,min:f,max:m,pattern:g,validate:y,name:v,valueAsNumber:x,mount:E}=e._f,T=Wt(n,v);if(!E||t.has(v))return{};const k=a?a[0]:i,I=H=>{s&&k.reportValidity&&(k.setCustomValidity(Ul(H)?"":H||""),k.reportValidity())},O={},M=z8(i),P=Aw(i),j=M||P,V=(x||B8(i))&&Uo(i.value)&&Uo(T)||DS(i)&&i.value===""||T===""||Array.isArray(T)&&!T.length,U=F8.bind(null,v,r,O),z=(H,F,G,X=df.maxLength,J=df.minLength)=>{const ee=H?F:G;O[v]={type:H?X:J,message:ee,ref:i,...U(H?X:J,ee)}};if(o?!Array.isArray(T)||!T.length:l&&(!j&&(V||al(T))||Ul(T)&&!T||P&&!AJ(a).isValid||M&&!IJ(a).isValid)){const{value:H,message:F}=Hl(l)?{value:!!l,message:l}:qg(l);if(H&&(O[v]={type:df.required,message:F,ref:k,...U(df.required,F)},!r))return I(F),O}if(!V&&(!al(f)||!al(m))){let H,F;const G=qg(m),X=qg(f);if(!al(T)&&!isNaN(T)){const J=i.valueAsNumber||T&&+T;al(G.value)||(H=J>G.value),al(X.value)||(F=J<X.value)}else{const J=i.valueAsDate||new Date(T),ee=Z=>new Date(new Date().toDateString()+" "+Z),re=i.type=="time",ie=i.type=="week";Hl(G.value)&&T&&(H=re?ee(T)>ee(G.value):ie?T>G.value:J>new Date(G.value)),Hl(X.value)&&T&&(F=re?ee(T)<ee(X.value):ie?T<X.value:J<new Date(X.value))}if((H||F)&&(z(!!H,G.message,X.message,df.max,df.min),!r))return I(O[v].message),O}if((c||u)&&!V&&(Hl(T)||o&&Array.isArray(T))){const H=qg(c),F=qg(u),G=!al(H.value)&&T.length>+H.value,X=!al(F.value)&&T.length<+F.value;if((G||X)&&(z(G,H.message,F.message),!r))return I(O[v].message),O}if(g&&!V&&Hl(T)){const{value:H,message:F}=qg(g);if(PS(H)&&!T.match(H)&&(O[v]={type:df.pattern,message:F,ref:i,...U(df.pattern,F)},!r))return I(F),O}if(y){if(uu(y)){const H=await y(T,n),F=iF(H,k);if(F&&(O[v]={...F,...U(df.validate,F.message)},!r))return I(F.message),O}else if(fi(y)){let H={};for(const F in y){if(!Ra(H)&&!r)break;const G=iF(await y[F](T,n),k,F);G&&(H={...G,...U(F,G.message)},I(G.message),r&&(O[v]=H))}if(!Ra(H)&&(O[v]={ref:k,...H},!r))return O}}return I(!0),O};const K5e={mode:lu.onSubmit,reValidateMode:lu.onChange,shouldFocusError:!0};function Z5e(e={}){let t={...K5e,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:uu(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=fi(t.defaultValues)||fi(t.values)?Ti(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:Ti(s),i={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const m={array:J$(),state:J$()},g=t.criteriaMode===lu.all,y=pe=>Ne=>{clearTimeout(c),c=setTimeout(pe,Ne)},v=async pe=>{if(!t.disabled&&(u.isValid||f.isValid||pe)){const Ne=t.resolver?Ra((await P()).errors):await V(r,!0);Ne!==n.isValid&&m.state.next({isValid:Ne})}},x=(pe,Ne)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((pe||Array.from(a.mount)).forEach($e=>{$e&&(Ne?Es(n.validatingFields,$e,Ne):ii(n.validatingFields,$e))}),m.state.next({validatingFields:n.validatingFields,isValidating:!Ra(n.validatingFields)}))},E=(pe,Ne=[],$e,Je,Le=!0,Ve=!0)=>{if(Je&&$e&&!t.disabled){if(i.action=!0,Ve&&Array.isArray(Wt(r,pe))){const _e=$e(Wt(r,pe),Je.argA,Je.argB);Le&&Es(r,pe,_e)}if(Ve&&Array.isArray(Wt(n.errors,pe))){const _e=$e(Wt(n.errors,pe),Je.argA,Je.argB);Le&&Es(n.errors,pe,_e),W5e(n.errors,pe)}if((u.touchedFields||f.touchedFields)&&Ve&&Array.isArray(Wt(n.touchedFields,pe))){const _e=$e(Wt(n.touchedFields,pe),Je.argA,Je.argB);Le&&Es(n.touchedFields,pe,_e)}(u.dirtyFields||f.dirtyFields)&&(n.dirtyFields=n1(s,o)),m.state.next({name:pe,isDirty:z(pe,Ne),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Es(o,pe,Ne)},T=(pe,Ne)=>{Es(n.errors,pe,Ne),m.state.next({errors:n.errors})},k=pe=>{n.errors=pe,m.state.next({errors:n.errors,isValid:!1})},I=(pe,Ne,$e,Je)=>{const Le=Wt(r,pe);if(Le){const Ve=Wt(o,pe,Uo($e)?Wt(s,pe):$e);Uo(Ve)||Je&&Je.defaultChecked||Ne?Es(o,pe,Ne?Ve:tF(Le._f)):G(pe,Ve),i.mount&&!i.action&&v()}},O=(pe,Ne,$e,Je,Le)=>{let Ve=!1,_e=!1;const Y={name:pe};if(!t.disabled){if(!$e||Je){(u.isDirty||f.isDirty)&&(_e=n.isDirty,n.isDirty=Y.isDirty=z(),Ve=_e!==Y.isDirty);const L=cu(Wt(s,pe),Ne);_e=!!Wt(n.dirtyFields,pe),L?ii(n.dirtyFields,pe):Es(n.dirtyFields,pe,!0),Y.dirtyFields=n.dirtyFields,Ve=Ve||(u.dirtyFields||f.dirtyFields)&&_e!==!L}if($e){const L=Wt(n.touchedFields,pe);L||(Es(n.touchedFields,pe,$e),Y.touchedFields=n.touchedFields,Ve=Ve||(u.touchedFields||f.touchedFields)&&L!==$e)}Ve&&Le&&m.state.next(Y)}return Ve?Y:{}},M=(pe,Ne,$e,Je)=>{const Le=Wt(n.errors,pe),Ve=(u.isValid||f.isValid)&&Ul(Ne)&&n.isValid!==Ne;if(t.delayError&&$e?(l=y(()=>T(pe,$e)),l(t.delayError)):(clearTimeout(c),l=null,$e?Es(n.errors,pe,$e):ii(n.errors,pe)),($e?!cu(Le,$e):Le)||!Ra(Je)||Ve){const _e={...Je,...Ve&&Ul(Ne)?{isValid:Ne}:{},errors:n.errors,name:pe};n={...n,..._e},m.state.next(_e)}},P=async pe=>{x(pe,!0);const Ne=await t.resolver(o,t.context,j5e(pe||a.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return x(pe),Ne},j=async pe=>{const{errors:Ne}=await P(pe);if(pe)for(const $e of pe){const Je=Wt(Ne,$e);Je?Es(n.errors,$e,Je):ii(n.errors,$e)}else n.errors=Ne;return Ne},V=async(pe,Ne,$e={valid:!0})=>{for(const Je in pe){const Le=pe[Je];if(Le){const{_f:Ve,..._e}=Le;if(Ve){const Y=a.array.has(Ve.name),L=Le._f&&U5e(Le._f);L&&u.validatingFields&&x([Ve.name],!0);const B=await aF(Le,a.disabled,o,g,t.shouldUseNativeValidation&&!Ne,Y);if(L&&u.validatingFields&&x([Ve.name]),B[Ve.name]&&($e.valid=!1,Ne))break;!Ne&&(Wt(B,Ve.name)?Y?Y5e(n.errors,B,Ve.name):Es(n.errors,Ve.name,B[Ve.name]):ii(n.errors,Ve.name))}!Ra(_e)&&await V(_e,Ne,$e)}}return $e.valid},U=()=>{for(const pe of a.unMount){const Ne=Wt(r,pe);Ne&&(Ne._f.refs?Ne._f.refs.every($e=>!r5($e)):!r5(Ne._f.ref))&&fe(pe)}a.unMount=new Set},z=(pe,Ne)=>!t.disabled&&(pe&&Ne&&Es(o,pe,Ne),!cu(Z(),s)),H=(pe,Ne,$e)=>JN(pe,a,{...i.mount?o:Uo(Ne)?s:Hl(pe)?{[pe]:Ne}:Ne},$e,Ne),F=pe=>D8(Wt(i.mount?o:s,pe,t.shouldUnregister?Wt(s,pe,[]):[])),G=(pe,Ne,$e={})=>{const Je=Wt(r,pe);let Le=Ne;if(Je){const Ve=Je._f;Ve&&(!Ve.disabled&&Es(o,pe,NJ(Ne,Ve)),Le=DS(Ve.ref)&&al(Ne)?"":Ne,CJ(Ve.ref)?[...Ve.ref.options].forEach(_e=>_e.selected=Le.includes(_e.value)):Ve.refs?Aw(Ve.ref)?Ve.refs.forEach(_e=>{(!_e.defaultChecked||!_e.disabled)&&(Array.isArray(Le)?_e.checked=!!Le.find(Y=>Y===_e.value):_e.checked=Le===_e.value||!!Le)}):Ve.refs.forEach(_e=>_e.checked=_e.value===Le):B8(Ve.ref)?Ve.ref.value="":(Ve.ref.value=Le,Ve.ref.type||m.state.next({name:pe,values:Ti(o)})))}($e.shouldDirty||$e.shouldTouch)&&O(pe,Le,$e.shouldTouch,$e.shouldDirty,!0),$e.shouldValidate&&ie(pe)},X=(pe,Ne,$e)=>{for(const Je in Ne){if(!Ne.hasOwnProperty(Je))return;const Le=Ne[Je],Ve=pe+"."+Je,_e=Wt(r,Ve);(a.array.has(pe)||fi(Le)||_e&&!_e._f)&&!Hp(Le)?X(Ve,Le,$e):G(Ve,Le,$e)}},J=(pe,Ne,$e={})=>{const Je=Wt(r,pe),Le=a.array.has(pe),Ve=Ti(Ne);Es(o,pe,Ve),Le?(m.array.next({name:pe,values:Ti(o)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&$e.shouldDirty&&m.state.next({name:pe,dirtyFields:n1(s,o),isDirty:z(pe,Ve)})):Je&&!Je._f&&!al(Ve)?X(pe,Ve,$e):G(pe,Ve,$e),sF(pe,a)&&m.state.next({...n,name:pe}),m.state.next({name:i.mount?pe:void 0,values:Ti(o)})},ee=async pe=>{i.mount=!0;const Ne=pe.target;let $e=Ne.name,Je=!0;const Le=Wt(r,$e),Ve=L=>{Je=Number.isNaN(L)||Hp(L)&&isNaN(L.getTime())||cu(L,Wt(o,$e,L))},_e=nF(t.mode),Y=nF(t.reValidateMode);if(Le){let L,B;const ce=Ne.type?tF(Le._f):wJ(pe),we=pe.type===OS.BLUR||pe.type===OS.FOCUS_OUT,ze=!H5e(Le._f)&&!t.resolver&&!Wt(n.errors,$e)&&!Le._f.deps||G5e(we,Wt(n.touchedFields,$e),n.isSubmitted,Y,_e),Be=sF($e,a,we);Es(o,$e,ce),we?(!Ne||!Ne.readOnly)&&(Le._f.onBlur&&Le._f.onBlur(pe),l&&l(0)):Le._f.onChange&&Le._f.onChange(pe);const ut=O($e,ce,we),an=!Ra(ut)||Be;if(!we&&m.state.next({name:$e,type:pe.type,values:Ti(o)}),ze)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?we&&v():we||v()),an&&m.state.next({name:$e,...Be?{}:ut});if(!we&&Be&&m.state.next({...n}),t.resolver){const{errors:zt}=await P([$e]);if(Ve(ce),Je){const dn=oF(n.errors,r,$e),on=oF(zt,r,dn.name||$e);L=on.error,$e=on.name,B=Ra(zt)}}else x([$e],!0),L=(await aF(Le,a.disabled,o,g,t.shouldUseNativeValidation))[$e],x([$e]),Ve(ce),Je&&(L?B=!1:(u.isValid||f.isValid)&&(B=await V(r,!0)));Je&&(Le._f.deps&&(!Array.isArray(Le._f.deps)||Le._f.deps.length>0)&&ie(Le._f.deps),M($e,B,L,ut))}},re=(pe,Ne)=>{if(Wt(n.errors,Ne)&&pe.focus)return pe.focus(),1},ie=async(pe,Ne={})=>{let $e,Je;const Le=Ov(pe);if(t.resolver){const Ve=await j(Uo(pe)?pe:Le);$e=Ra(Ve),Je=pe?!Le.some(_e=>Wt(Ve,_e)):$e}else pe?(Je=(await Promise.all(Le.map(async Ve=>{const _e=Wt(r,Ve);return await V(_e&&_e._f?{[Ve]:_e}:_e)}))).every(Boolean),!(!Je&&!n.isValid)&&v()):Je=$e=await V(r);return m.state.next({...!Hl(pe)||(u.isValid||f.isValid)&&$e!==n.isValid?{}:{name:pe},...t.resolver||!pe?{isValid:$e}:{},errors:n.errors}),Ne.shouldFocus&&!Je&&Dv(r,re,pe?Le:a.mount),Je},Z=(pe,Ne)=>{let $e={...i.mount?o:s};return Ne&&($e=TJ(Ne.dirtyFields?n.dirtyFields:n.touchedFields,$e)),Uo(pe)?$e:Hl(pe)?Wt($e,pe):pe.map(Je=>Wt($e,Je))},te=(pe,Ne)=>({invalid:!!Wt((Ne||n).errors,pe),isDirty:!!Wt((Ne||n).dirtyFields,pe),error:Wt((Ne||n).errors,pe),isValidating:!!Wt(n.validatingFields,pe),isTouched:!!Wt((Ne||n).touchedFields,pe)}),oe=pe=>{pe&&Ov(pe).forEach(Ne=>ii(n.errors,Ne)),m.state.next({errors:pe?n.errors:{}})},Q=(pe,Ne,$e)=>{const Je=(Wt(r,pe,{_f:{}})._f||{}).ref,Le=Wt(n.errors,pe)||{},{ref:Ve,message:_e,type:Y,...L}=Le;Es(n.errors,pe,{...L,...Ne,ref:Je}),m.state.next({name:pe,errors:n.errors,isValid:!1}),$e&&$e.shouldFocus&&Je&&Je.focus&&Je.focus()},Te=(pe,Ne)=>uu(pe)?m.state.subscribe({next:$e=>"values"in $e&&pe(H(void 0,Ne),$e)}):H(pe,Ne,!0),ge=pe=>m.state.subscribe({next:Ne=>{q5e(pe.name,Ne.name,pe.exact)&&V5e(Ne,pe.formState||u,Dt,pe.reRenderRoot)&&pe.callback({values:{...o},...n,...Ne,defaultValues:s})}}).unsubscribe,Ce=pe=>(i.mount=!0,f={...f,...pe.formState},ge({...pe,formState:f})),fe=(pe,Ne={})=>{for(const $e of pe?Ov(pe):a.mount)a.mount.delete($e),a.array.delete($e),Ne.keepValue||(ii(r,$e),ii(o,$e)),!Ne.keepError&&ii(n.errors,$e),!Ne.keepDirty&&ii(n.dirtyFields,$e),!Ne.keepTouched&&ii(n.touchedFields,$e),!Ne.keepIsValidating&&ii(n.validatingFields,$e),!t.shouldUnregister&&!Ne.keepDefaultValue&&ii(s,$e);m.state.next({values:Ti(o)}),m.state.next({...n,...Ne.keepDirty?{isDirty:z()}:{}}),!Ne.keepIsValid&&v()},Fe=({disabled:pe,name:Ne})=>{(Ul(pe)&&i.mount||pe||a.disabled.has(Ne))&&(pe?a.disabled.add(Ne):a.disabled.delete(Ne))},De=(pe,Ne={})=>{let $e=Wt(r,pe);const Je=Ul(Ne.disabled)||Ul(t.disabled);return Es(r,pe,{...$e||{},_f:{...$e&&$e._f?$e._f:{ref:{name:pe}},name:pe,mount:!0,...Ne}}),a.mount.add(pe),$e?Fe({disabled:Ul(Ne.disabled)?Ne.disabled:t.disabled,name:pe}):I(pe,!0,Ne.value),{...Je?{disabled:Ne.disabled||t.disabled}:{},...t.progressive?{required:!!Ne.required,min:Hy(Ne.min),max:Hy(Ne.max),minLength:Hy(Ne.minLength),maxLength:Hy(Ne.maxLength),pattern:Hy(Ne.pattern)}:{},name:pe,onChange:ee,onBlur:ee,ref:Le=>{if(Le){De(pe,Ne),$e=Wt(r,pe);const Ve=Uo(Le.value)&&Le.querySelectorAll&&Le.querySelectorAll("input,select,textarea")[0]||Le,_e=$5e(Ve),Y=$e._f.refs||[];if(_e?Y.find(L=>L===Ve):Ve===$e._f.ref)return;Es(r,pe,{_f:{...$e._f,..._e?{refs:[...Y.filter(r5),Ve,...Array.isArray(Wt(s,pe))?[{}]:[]],ref:{type:Ve.type,name:pe}}:{ref:Ve}}}),I(pe,!1,void 0,Ve)}else $e=Wt(r,pe,{}),$e._f&&($e._f.mount=!1),(t.shouldUnregister||Ne.shouldUnregister)&&!(EJ(a.array,pe)&&i.action)&&a.unMount.add(pe)}}},Re=()=>t.shouldFocusError&&Dv(r,re,a.mount),tt=pe=>{Ul(pe)&&(m.state.next({disabled:pe}),Dv(r,(Ne,$e)=>{const Je=Wt(r,$e);Je&&(Ne.disabled=Je._f.disabled||pe,Array.isArray(Je._f.refs)&&Je._f.refs.forEach(Le=>{Le.disabled=Je._f.disabled||pe}))},0,!1))},de=(pe,Ne)=>async $e=>{let Je;$e&&($e.preventDefault&&$e.preventDefault(),$e.persist&&$e.persist());let Le=Ti(o);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:Ve,values:_e}=await P();n.errors=Ve,Le=Ti(_e)}else await V(r);if(a.disabled.size)for(const Ve of a.disabled)ii(Le,Ve);if(ii(n.errors,"root"),Ra(n.errors)){m.state.next({errors:{}});try{await pe(Le,$e)}catch(Ve){Je=Ve}}else Ne&&await Ne({...n.errors},$e),Re(),setTimeout(Re);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ra(n.errors)&&!Je,submitCount:n.submitCount+1,errors:n.errors}),Je)throw Je},nt=(pe,Ne={})=>{Wt(r,pe)&&(Uo(Ne.defaultValue)?J(pe,Ti(Wt(s,pe))):(J(pe,Ne.defaultValue),Es(s,pe,Ti(Ne.defaultValue))),Ne.keepTouched||ii(n.touchedFields,pe),Ne.keepDirty||(ii(n.dirtyFields,pe),n.isDirty=Ne.defaultValue?z(pe,Ti(Wt(s,pe))):z()),Ne.keepError||(ii(n.errors,pe),u.isValid&&v()),m.state.next({...n}))},ot=(pe,Ne={})=>{const $e=pe?Ti(pe):s,Je=Ti($e),Le=Ra(pe),Ve=Le?s:Je;if(Ne.keepDefaultValues||(s=$e),!Ne.keepValues){if(Ne.keepDirtyValues){const _e=new Set([...a.mount,...Object.keys(n1(s,o))]);for(const Y of Array.from(_e))Wt(n.dirtyFields,Y)?Es(Ve,Y,Wt(o,Y)):J(Y,Wt(Ve,Y))}else{if(O8&&Uo(pe))for(const _e of a.mount){const Y=Wt(r,_e);if(Y&&Y._f){const L=Array.isArray(Y._f.refs)?Y._f.refs[0]:Y._f.ref;if(DS(L)){const B=L.closest("form");if(B){B.reset();break}}}}if(Ne.keepFieldsRef)for(const _e of a.mount)J(_e,Wt(Ve,_e));else r={}}o=t.shouldUnregister?Ne.keepDefaultValues?Ti(s):{}:Ti(Ve),m.array.next({values:{...Ve}}),m.state.next({values:{...Ve}})}a={mount:Ne.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!u.isValid||!!Ne.keepIsValid||!!Ne.keepDirtyValues||!t.shouldUnregister&&!Ra(Ve),i.watch=!!t.shouldUnregister,i.action=!1,Ne.keepErrors||(n.errors={}),m.state.next({submitCount:Ne.keepSubmitCount?n.submitCount:0,isDirty:Le?!1:Ne.keepDirty?n.isDirty:!!(Ne.keepDefaultValues&&!cu(pe,s)),isSubmitted:Ne.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Le?{}:Ne.keepDirtyValues?Ne.keepDefaultValues&&o?n1(s,o):n.dirtyFields:Ne.keepDefaultValues&&pe?n1(s,pe):Ne.keepDirty?n.dirtyFields:{},touchedFields:Ne.keepTouched?n.touchedFields:{},errors:Ne.keepErrors?n.errors:{},isSubmitSuccessful:Ne.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Ut=(pe,Ne)=>ot(uu(pe)?pe(o):pe,Ne),Vt=(pe,Ne={})=>{const $e=Wt(r,pe),Je=$e&&$e._f;if(Je){const Le=Je.refs?Je.refs[0]:Je.ref;Le.focus&&(Le.focus(),Ne.shouldSelect&&uu(Le.select)&&Le.select())}},Dt=pe=>{n={...n,...pe}},xt={control:{register:De,unregister:fe,getFieldState:te,handleSubmit:de,setError:Q,_subscribe:ge,_runSchema:P,_focusError:Re,_getWatch:H,_getDirty:z,_setValid:v,_setFieldArray:E,_setDisabledField:Fe,_setErrors:k,_getFieldArray:F,_reset:ot,_resetDefaultValues:()=>uu(t.defaultValues)&&t.defaultValues().then(pe=>{Ut(pe,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:U,_disableForm:tt,_subjects:m,_proxyFormState:u,get _fields(){return r},get _formValues(){return o},get _state(){return i},set _state(pe){i=pe},get _defaultValues(){return s},get _names(){return a},set _names(pe){a=pe},get _formState(){return n},get _options(){return t},set _options(pe){t={...t,...pe}}},subscribe:Ce,trigger:ie,register:De,handleSubmit:de,watch:Te,setValue:J,getValues:Z,reset:Ut,resetField:nt,clearErrors:oe,unregister:fe,setError:Q,setFocus:Vt,getFieldState:te};return{...xt,formControl:xt}}function J5e(e={}){const t=Me.useRef(void 0),n=Me.useRef(void 0),[r,s]=Me.useState({isDirty:!1,isValidating:!1,isLoading:uu(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:uu(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!uu(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...a}=Z5e(e);t.current={...a,formState:r}}const o=t.current.control;return o._options=e,$8(()=>{const i=o._subscribe({formState:o._proxyFormState,callback:()=>s({...o._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),o._formState.isReady=!0,i},[o]),Me.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),Me.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),Me.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),Me.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),Me.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==r.isDirty&&o._subjects.state.next({isDirty:i})}},[o,r.isDirty]),Me.useEffect(()=>{var i;e.values&&!cu(e.values,n.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),!((i=o._options.resetOptions)===null||i===void 0)&&i.keepIsValid||o._setValid(),n.current=e.values,s(a=>({...a}))):o._resetDefaultValues()},[o,e.values]),Me.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=_J(r,o),t.current}const lF=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Wt(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},e6=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?lF(r.ref,n,e):r&&r.refs&&r.refs.forEach(s=>lF(s,n,e))}},cF=(e,t)=>{t.shouldUseNativeValidation&&e6(e,t);const n={};for(const r in e){const s=Wt(t.fields,r),o=Object.assign(e[r]||{},{ref:s&&s.ref});if(X5e(t.names||Object.keys(e),r)){const i=Object.assign({},Wt(n,r));Es(i,"root",o),Es(n,r,i)}else Es(n,r,o)}return n},X5e=(e,t)=>{const n=uF(t);return e.some(r=>uF(r).match(`^${n}\\.\\d+`))};function uF(e){return e.replace(/\]|\[/g,"")}function it(e,t,n){function r(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in i.prototype)u in a||Object.defineProperty(a,u,{value:i.prototype[u].bind(a)});a._zod.constr=i,a._zod.def=l}const s=(n==null?void 0:n.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:e});function i(a){var l;const c=n!=null&&n.Parent?new o:this;r(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>{var l,c;return n!=null&&n.Parent&&a instanceof n.Parent?!0:(c=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:c.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class Sx extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const RJ={};function _0(e){return RJ}function MJ(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,s])=>t.indexOf(+r)===-1).map(([r,s])=>s)}function Q5e(e,t){return typeof t=="bigint"?t.toString():t}function j8(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function U8(e){return e==null}function H8(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function eAe(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,o=Number.parseInt(e.toFixed(s).replace(".","")),i=Number.parseInt(t.toFixed(s).replace(".",""));return o%i/10**s}function bs(e,t,n){Object.defineProperty(e,t,{get(){{const r=n();return e[t]=r,r}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function V8(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Vy(e){return JSON.stringify(e)}const OJ=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function LS(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const tAe=j8(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function $S(e){if(LS(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(LS(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const nAe=new Set(["string","number","symbol"]);function Nw(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Dm(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(r._zod.parent=e),r}function An(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function rAe(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const sAe={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function oAe(e,t){const n={},r=e._zod.def;for(const s in t){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(n[s]=r.shape[s])}return Dm(e,{...e._zod.def,shape:n,checks:[]})}function iAe(e,t){const n={...e._zod.def.shape},r=e._zod.def;for(const s in t){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete n[s]}return Dm(e,{...e._zod.def,shape:n,checks:[]})}function aAe(e,t){if(!$S(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return V8(this,"shape",r),r},checks:[]};return Dm(e,n)}function lAe(e,t){return Dm(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return V8(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function cAe(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const o in n){if(!(o in r))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(s[o]=e?new e({type:"optional",innerType:r[o]}):r[o])}else for(const o in r)s[o]=e?new e({type:"optional",innerType:r[o]}):r[o];return Dm(t,{...t._zod.def,shape:s,checks:[]})}function uAe(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const o in n){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(s[o]=new e({type:"nonoptional",innerType:r[o]}))}else for(const o in r)s[o]=new e({type:"nonoptional",innerType:r[o]});return Dm(t,{...t._zod.def,shape:s,checks:[]})}function Pv(e,t=0){var n;for(let r=t;r<e.issues.length;r++)if(((n=e.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Vp(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function x2(e){return typeof e=="string"?e:e==null?void 0:e.message}function S0(e,t,n){var s,o,i,a,l,c;const r={...e,path:e.path??[]};if(!e.message){const u=x2((i=(o=(s=e.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:i.call(o,e))??x2((a=t==null?void 0:t.error)==null?void 0:a.call(t,e))??x2((l=n.customError)==null?void 0:l.call(n,e))??x2((c=n.localeError)==null?void 0:c.call(n,e))??"Invalid input";r.message=u}return delete r.inst,delete r.continue,t!=null&&t.reportInput||delete r.input,r}function q8(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Tx(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const DJ=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,Q5e,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},G8=it("$ZodError",DJ),bC=it("$ZodError",DJ,{Parent:Error});function dAe(e,t=n=>n.message){const n={},r=[];for(const s of e.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:n}}function fAe(e,t){const n=t||function(o){return o.message},r={_errors:[]},s=o=>{for(const i of o.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>s({issues:a}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)r._errors.push(n(i));else{let a=r,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(i))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(e),r}const PJ=e=>(t,n,r,s)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise)throw new Sx;if(i.issues.length){const a=new((s==null?void 0:s.Err)??e)(i.issues.map(l=>S0(l,o,_0())));throw OJ(a,s==null?void 0:s.callee),a}return i.value},hAe=PJ(bC),LJ=e=>async(t,n,r,s)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){const a=new((s==null?void 0:s.Err)??e)(i.issues.map(l=>S0(l,o,_0())));throw OJ(a,s==null?void 0:s.callee),a}return i.value},pAe=LJ(bC),$J=e=>(t,n,r)=>{const s=r?{...r,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new Sx;return o.issues.length?{success:!1,error:new(e??G8)(o.issues.map(i=>S0(i,s,_0())))}:{success:!0,data:o.value}},mAe=$J(bC),FJ=e=>async(t,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(i=>S0(i,s,_0())))}:{success:!0,data:o.value}},gAe=FJ(bC),bAe=/^[cC][^\s-]{8,}$/,yAe=/^[0-9a-z]+$/,vAe=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,xAe=/^[0-9a-vA-V]{20}$/,wAe=/^[A-Za-z0-9]{27}$/,EAe=/^[a-zA-Z0-9_-]{21}$/,_Ae=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,SAe=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,dF=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,TAe=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,CAe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function kAe(){return new RegExp(CAe,"u")}const AAe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,NAe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,IAe=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,RAe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,MAe=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,BJ=/^[A-Za-z0-9_-]*$/,OAe=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,DAe=/^\+(?:[0-9]){6,14}[0-9]$/,zJ="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",PAe=new RegExp(`^${zJ}$`);function jJ(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function LAe(e){return new RegExp(`^${jJ(e)}$`)}function $Ae(e){const t=jJ({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${zJ}T(?:${r})$`)}const FAe=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},BAe=/^\d+$/,zAe=/^-?\d+(?:\.\d+)?/i,jAe=/true|false/i,UAe=/null/i,HAe=/^[^A-Z]*$/,VAe=/^[^a-z]*$/,bl=it("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),UJ={number:"number",bigint:"bigint",object:"date"},HJ=it("$ZodCheckLessThan",(e,t)=>{bl.init(e,t);const n=UJ[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,o=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),VJ=it("$ZodCheckGreaterThan",(e,t)=>{bl.init(e,t);const n=UJ[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,o=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),qAe=it("$ZodCheckMultipleOf",(e,t)=>{bl.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):eAe(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),GAe=it("$ZodCheckNumberFormat",(e,t)=>{var i;bl.init(e,t),t.format=t.format||"float64";const n=(i=t.format)==null?void 0:i.includes("int"),r=n?"int":"number",[s,o]=sAe[t.format];e._zod.onattach.push(a=>{const l=a._zod.bag;l.format=t.format,l.minimum=s,l.maximum=o,n&&(l.pattern=BAe)}),e._zod.check=a=>{const l=a.value;if(n){if(!Number.isInteger(l)){a.issues.push({expected:r,format:t.format,code:"invalid_type",input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?a.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):a.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}l<s&&a.issues.push({origin:"number",input:l,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),l>o&&a.issues.push({origin:"number",input:l,code:"too_big",maximum:o,inst:e})}}),WAe=it("$ZodCheckMaxLength",(e,t)=>{var n;bl.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!U8(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const s=r.value;if(s.length<=t.maximum)return;const i=q8(s);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),YAe=it("$ZodCheckMinLength",(e,t)=>{var n;bl.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!U8(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const s=r.value;if(s.length>=t.minimum)return;const i=q8(s);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),KAe=it("$ZodCheckLengthEquals",(e,t)=>{var n;bl.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!U8(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=r=>{const s=r.value,o=s.length;if(o===t.length)return;const i=q8(s),a=o>t.length;r.issues.push({origin:i,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),yC=it("$ZodCheckStringFormat",(e,t)=>{var n,r;bl.init(e,t),e._zod.onattach.push(s=>{const o=s._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),ZAe=it("$ZodCheckRegex",(e,t)=>{yC.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),JAe=it("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=HAe),yC.init(e,t)}),XAe=it("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=VAe),yC.init(e,t)}),QAe=it("$ZodCheckIncludes",(e,t)=>{bl.init(e,t);const n=Nw(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),eNe=it("$ZodCheckStartsWith",(e,t)=>{bl.init(e,t);const n=new RegExp(`^${Nw(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),tNe=it("$ZodCheckEndsWith",(e,t)=>{bl.init(e,t);const n=new RegExp(`.*${Nw(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),nNe=it("$ZodCheckOverwrite",(e,t)=>{bl.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class rNe{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),s=Math.min(...r.map(i=>i.length-i.trimStart().length)),o=r.map(i=>i.slice(s)).map(i=>" ".repeat(this.indent*2)+i);for(const i of o)this.content.push(i)}compile(){const t=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new t(...n,s.join(`
`))}}const sNe={major:4,minor:0,patch:0},Hs=it("$ZodType",(e,t)=>{var s;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=sNe;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const o of r)for(const i of o._zod.onattach)i(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,a,l)=>{let c=Pv(i),u;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(i))continue}else if(c)continue;const m=i.issues.length,g=f._zod.check(i);if(g instanceof Promise&&(l==null?void 0:l.async)===!1)throw new Sx;if(u||g instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await g,i.issues.length!==m&&(c||(c=Pv(i,m)))});else{if(i.issues.length===m)continue;c||(c=Pv(i,m))}}return u?u.then(()=>i):i};e._zod.run=(i,a)=>{const l=e._zod.parse(i,a);if(l instanceof Promise){if(a.async===!1)throw new Sx;return l.then(c=>o(c,r,a))}return o(l,r,a)}}e["~standard"]={validate:o=>{var i;try{const a=mAe(e,o);return a.success?{value:a.data}:{issues:(i=a.error)==null?void 0:i.issues}}catch{return gAe(e,o).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),W8=it("$ZodString",(e,t)=>{var n;Hs.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??FAe(e._zod.bag),e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),mo=it("$ZodStringFormat",(e,t)=>{yC.init(e,t),W8.init(e,t)}),oNe=it("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=SAe),mo.init(e,t)}),iNe=it("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=dF(r))}else t.pattern??(t.pattern=dF());mo.init(e,t)}),aNe=it("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=TAe),mo.init(e,t)}),lNe=it("$ZodURL",(e,t)=>{mo.init(e,t),e._zod.check=n=>{try{const r=n.value,s=new URL(r),o=s.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:OAe.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!r.endsWith("/")&&o.endsWith("/")?n.value=o.slice(0,-1):n.value=o;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),cNe=it("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=kAe()),mo.init(e,t)}),uNe=it("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=EAe),mo.init(e,t)}),dNe=it("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=bAe),mo.init(e,t)}),fNe=it("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=yAe),mo.init(e,t)}),hNe=it("$ZodULID",(e,t)=>{t.pattern??(t.pattern=vAe),mo.init(e,t)}),pNe=it("$ZodXID",(e,t)=>{t.pattern??(t.pattern=xAe),mo.init(e,t)}),mNe=it("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=wAe),mo.init(e,t)}),gNe=it("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=$Ae(t)),mo.init(e,t)}),bNe=it("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=PAe),mo.init(e,t)}),yNe=it("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=LAe(t)),mo.init(e,t)}),vNe=it("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=_Ae),mo.init(e,t)}),xNe=it("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=AAe),mo.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),wNe=it("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=NAe),mo.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),ENe=it("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=IAe),mo.init(e,t)}),_Ne=it("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=RAe),mo.init(e,t),e._zod.check=n=>{const[r,s]=n.value.split("/");try{if(!s)throw new Error;const o=Number(s);if(`${o}`!==s)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function qJ(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const SNe=it("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=MAe),mo.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{qJ(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function TNe(e){if(!BJ.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return qJ(n)}const CNe=it("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=BJ),mo.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{TNe(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),kNe=it("$ZodE164",(e,t)=>{t.pattern??(t.pattern=DAe),mo.init(e,t)});function ANe(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const NNe=it("$ZodJWT",(e,t)=>{mo.init(e,t),e._zod.check=n=>{ANe(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),GJ=it("$ZodNumber",(e,t)=>{Hs.init(e,t),e._zod.pattern=e._zod.bag.pattern??zAe,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...o?{received:o}:{}}),n}}),INe=it("$ZodNumber",(e,t)=>{GAe.init(e,t),GJ.init(e,t)}),RNe=it("$ZodBoolean",(e,t)=>{Hs.init(e,t),e._zod.pattern=jAe,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),n}}),MNe=it("$ZodNull",(e,t)=>{Hs.init(e,t),e._zod.pattern=UAe,e._zod.values=new Set([null]),e._zod.parse=(n,r)=>{const s=n.value;return s===null||n.issues.push({expected:"null",code:"invalid_type",input:s,inst:e}),n}}),ONe=it("$ZodAny",(e,t)=>{Hs.init(e,t),e._zod.parse=n=>n}),DNe=it("$ZodUnknown",(e,t)=>{Hs.init(e,t),e._zod.parse=n=>n}),PNe=it("$ZodNever",(e,t)=>{Hs.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function fF(e,t,n){e.issues.length&&t.issues.push(...Vp(n,e.issues)),t.value[n]=e.value}const LNe=it("$ZodArray",(e,t)=>{Hs.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),n;n.value=Array(s.length);const o=[];for(let i=0;i<s.length;i++){const a=s[i],l=t.element._zod.run({value:a,issues:[]},r);l instanceof Promise?o.push(l.then(c=>fF(c,n,i))):fF(l,n,i)}return o.length?Promise.all(o).then(()=>n):n}});function w2(e,t,n){e.issues.length&&t.issues.push(...Vp(n,e.issues)),t.value[n]=e.value}function hF(e,t,n,r){e.issues.length?r[n]===void 0?n in r?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...Vp(n,e.issues)):e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const $Ne=it("$ZodObject",(e,t)=>{Hs.init(e,t);const n=j8(()=>{const f=Object.keys(t.shape);for(const g of f)if(!(t.shape[g]instanceof Hs))throw new Error(`Invalid element at key "${g}": expected a Zod schema`);const m=rAe(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});bs(e._zod,"propValues",()=>{const f=t.shape,m={};for(const g in f){const y=f[g]._zod;if(y.values){m[g]??(m[g]=new Set);for(const v of y.values)m[g].add(v)}}return m});const r=f=>{const m=new rNe(["shape","payload","ctx"]),g=n.value,y=T=>{const k=Vy(T);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`};m.write("const input = payload.value;");const v=Object.create(null);let x=0;for(const T of g.keys)v[T]=`key_${x++}`;m.write("const newResult = {}");for(const T of g.keys)if(g.optionalKeys.has(T)){const k=v[T];m.write(`const ${k} = ${y(T)};`);const I=Vy(T);m.write(`
        if (${k}.issues.length) {
          if (input[${I}] === undefined) {
            if (${I} in input) {
              newResult[${I}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${k}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${I}, ...iss.path] : [${I}],
              }))
            );
          }
        } else if (${k}.value === undefined) {
          if (${I} in input) newResult[${I}] = undefined;
        } else {
          newResult[${I}] = ${k}.value;
        }
        `)}else{const k=v[T];m.write(`const ${k} = ${y(T)};`),m.write(`
          if (${k}.issues.length) payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Vy(T)}, ...iss.path] : [${Vy(T)}]
          })));`),m.write(`newResult[${Vy(T)}] = ${k}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const E=m.compile();return(T,k)=>E(f,T,k)};let s;const o=LS,i=!RJ.jitless,l=i&&tAe.value,c=t.catchall;let u;e._zod.parse=(f,m)=>{u??(u=n.value);const g=f.value;if(!o(g))return f.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),f;const y=[];if(i&&l&&(m==null?void 0:m.async)===!1&&m.jitless!==!0)s||(s=r(t.shape)),f=s(f,m);else{f.value={};const k=u.shape;for(const I of u.keys){const O=k[I],M=O._zod.run({value:g[I],issues:[]},m),P=O._zod.optin==="optional"&&O._zod.optout==="optional";M instanceof Promise?y.push(M.then(j=>P?hF(j,f,I,g):w2(j,f,I))):P?hF(M,f,I,g):w2(M,f,I)}}if(!c)return y.length?Promise.all(y).then(()=>f):f;const v=[],x=u.keySet,E=c._zod,T=E.def.type;for(const k of Object.keys(g)){if(x.has(k))continue;if(T==="never"){v.push(k);continue}const I=E.run({value:g[k],issues:[]},m);I instanceof Promise?y.push(I.then(O=>w2(O,f,k))):w2(I,f,k)}return v.length&&f.issues.push({code:"unrecognized_keys",keys:v,input:g,inst:e}),y.length?Promise.all(y).then(()=>f):f}});function pF(e,t,n,r){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(o=>S0(o,r,_0())))}),t}const WJ=it("$ZodUnion",(e,t)=>{Hs.init(e,t),bs(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),bs(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),bs(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),bs(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>H8(r.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let s=!1;const o=[];for(const i of t.options){const a=i._zod.run({value:n.value,issues:[]},r);if(a instanceof Promise)o.push(a),s=!0;else{if(a.issues.length===0)return a;o.push(a)}}return s?Promise.all(o).then(i=>pF(i,n,e,r)):pF(o,n,e,r)}}),FNe=it("$ZodDiscriminatedUnion",(e,t)=>{WJ.init(e,t);const n=e._zod.parse;bs(e._zod,"propValues",()=>{const s={};for(const o of t.options){const i=o._zod.propValues;if(!i||Object.keys(i).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(const[a,l]of Object.entries(i)){s[a]||(s[a]=new Set);for(const c of l)s[a].add(c)}}return s});const r=j8(()=>{const s=t.options,o=new Map;for(const i of s){const a=i._zod.propValues[t.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(const l of a){if(o.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);o.set(l,i)}}return o});e._zod.parse=(s,o)=>{const i=s.value;if(!LS(i))return s.issues.push({code:"invalid_type",expected:"object",input:i,inst:e}),s;const a=r.value.get(i==null?void 0:i[t.discriminator]);return a?a._zod.run(s,o):t.unionFallback?n(s,o):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:i,path:[t.discriminator],inst:e}),s)}}),BNe=it("$ZodIntersection",(e,t)=>{Hs.init(e,t),e._zod.parse=(n,r)=>{const s=n.value,o=t.left._zod.run({value:s,issues:[]},r),i=t.right._zod.run({value:s,issues:[]},r);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([l,c])=>mF(n,l,c)):mF(n,o,i)}});function t6(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if($S(e)&&$S(t)){const n=Object.keys(t),r=Object.keys(e).filter(o=>n.indexOf(o)!==-1),s={...e,...t};for(const o of r){const i=t6(e[o],t[o]);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};s[o]=i.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r],i=t6(s,o);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function mF(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Pv(e))return e;const r=t6(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const zNe=it("$ZodRecord",(e,t)=>{Hs.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!$S(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),n;const o=[];if(t.keyType._zod.values){const i=t.keyType._zod.values;n.value={};for(const l of i)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const c=t.valueType._zod.run({value:s[l],issues:[]},r);c instanceof Promise?o.push(c.then(u=>{u.issues.length&&n.issues.push(...Vp(l,u.issues)),n.value[l]=u.value})):(c.issues.length&&n.issues.push(...Vp(l,c.issues)),n.value[l]=c.value)}let a;for(const l in s)i.has(l)||(a=a??[],a.push(l));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:a})}else{n.value={};for(const i of Reflect.ownKeys(s)){if(i==="__proto__")continue;const a=t.keyType._zod.run({value:i,issues:[]},r);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(c=>S0(c,r,_0())),input:i,path:[i],inst:e}),n.value[a.value]=a.value;continue}const l=t.valueType._zod.run({value:s[i],issues:[]},r);l instanceof Promise?o.push(l.then(c=>{c.issues.length&&n.issues.push(...Vp(i,c.issues)),n.value[a.value]=c.value})):(l.issues.length&&n.issues.push(...Vp(i,l.issues)),n.value[a.value]=l.value)}}return o.length?Promise.all(o).then(()=>n):n}}),jNe=it("$ZodEnum",(e,t)=>{Hs.init(e,t);const n=MJ(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(r=>nAe.has(typeof r)).map(r=>typeof r=="string"?Nw(r):r.toString()).join("|")})$`),e._zod.parse=(r,s)=>{const o=r.value;return e._zod.values.has(o)||r.issues.push({code:"invalid_value",values:n,input:o,inst:e}),r}}),UNe=it("$ZodLiteral",(e,t)=>{Hs.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?Nw(n):n?n.toString():String(n)).join("|")})$`),e._zod.parse=(n,r)=>{const s=n.value;return e._zod.values.has(s)||n.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),n}}),HNe=it("$ZodTransform",(e,t)=>{Hs.init(e,t),e._zod.parse=(n,r)=>{const s=t.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(n.value=i,n));if(s instanceof Promise)throw new Sx;return n.value=s,n}}),VNe=it("$ZodOptional",(e,t)=>{Hs.init(e,t),e._zod.optin="optional",e._zod.optout="optional",bs(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),bs(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${H8(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,r):n.value===void 0?n:t.innerType._zod.run(n,r)}),qNe=it("$ZodNullable",(e,t)=>{Hs.init(e,t),bs(e._zod,"optin",()=>t.innerType._zod.optin),bs(e._zod,"optout",()=>t.innerType._zod.optout),bs(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${H8(n.source)}|null)$`):void 0}),bs(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),GNe=it("$ZodDefault",(e,t)=>{Hs.init(e,t),e._zod.optin="optional",bs(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>gF(o,t)):gF(s,t)}});function gF(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const WNe=it("$ZodPrefault",(e,t)=>{Hs.init(e,t),e._zod.optin="optional",bs(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),YNe=it("$ZodNonOptional",(e,t)=>{Hs.init(e,t),bs(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>bF(o,e)):bF(s,e)}});function bF(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const KNe=it("$ZodCatch",(e,t)=>{Hs.init(e,t),e._zod.optin="optional",bs(e._zod,"optout",()=>t.innerType._zod.optout),bs(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(i=>S0(i,r,_0()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(o=>S0(o,r,_0()))},input:n.value}),n.issues=[]),n)}}),ZNe=it("$ZodPipe",(e,t)=>{Hs.init(e,t),bs(e._zod,"values",()=>t.in._zod.values),bs(e._zod,"optin",()=>t.in._zod.optin),bs(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(n,r)=>{const s=t.in._zod.run(n,r);return s instanceof Promise?s.then(o=>yF(o,t,r)):yF(s,t,r)}});function yF(e,t,n){return Pv(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const JNe=it("$ZodReadonly",(e,t)=>{Hs.init(e,t),bs(e._zod,"propValues",()=>t.innerType._zod.propValues),bs(e._zod,"values",()=>t.innerType._zod.values),bs(e._zod,"optin",()=>t.innerType._zod.optin),bs(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(vF):vF(s)}});function vF(e){return e.value=Object.freeze(e.value),e}const XNe=it("$ZodLazy",(e,t)=>{Hs.init(e,t),bs(e._zod,"innerType",()=>t.getter()),bs(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),bs(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),bs(e._zod,"optin",()=>e._zod.innerType._zod.optin),bs(e._zod,"optout",()=>e._zod.innerType._zod.optout),e._zod.parse=(n,r)=>e._zod.innerType._zod.run(n,r)}),QNe=it("$ZodCustom",(e,t)=>{bl.init(e,t),Hs.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,s=t.fn(r);if(s instanceof Promise)return s.then(o=>xF(o,n,r,e));xF(s,n,r,e)}});function xF(e,t,n,r){if(!e){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),t.issues.push(Tx(s))}}class YJ{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function e6e(){return new YJ}const hv=e6e();function t6e(e,t){return new e({type:"string",...An(t)})}function n6e(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...An(t)})}function wF(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...An(t)})}function r6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...An(t)})}function s6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...An(t)})}function o6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...An(t)})}function i6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...An(t)})}function a6e(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...An(t)})}function l6e(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...An(t)})}function c6e(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...An(t)})}function u6e(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...An(t)})}function d6e(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...An(t)})}function f6e(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...An(t)})}function h6e(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...An(t)})}function p6e(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...An(t)})}function m6e(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...An(t)})}function g6e(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...An(t)})}function b6e(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...An(t)})}function y6e(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...An(t)})}function v6e(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...An(t)})}function x6e(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...An(t)})}function w6e(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...An(t)})}function E6e(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...An(t)})}function _6e(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...An(t)})}function S6e(e,t){return new e({type:"string",format:"date",check:"string_format",...An(t)})}function T6e(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...An(t)})}function C6e(e,t){return new e({type:"string",format:"duration",check:"string_format",...An(t)})}function k6e(e,t){return new e({type:"number",checks:[],...An(t)})}function A6e(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...An(t)})}function N6e(e,t){return new e({type:"boolean",...An(t)})}function I6e(e,t){return new e({type:"null",...An(t)})}function R6e(e){return new e({type:"any"})}function M6e(e){return new e({type:"unknown"})}function O6e(e,t){return new e({type:"never",...An(t)})}function EF(e,t){return new HJ({check:"less_than",...An(t),value:e,inclusive:!1})}function s5(e,t){return new HJ({check:"less_than",...An(t),value:e,inclusive:!0})}function _F(e,t){return new VJ({check:"greater_than",...An(t),value:e,inclusive:!1})}function o5(e,t){return new VJ({check:"greater_than",...An(t),value:e,inclusive:!0})}function SF(e,t){return new qAe({check:"multiple_of",...An(t),value:e})}function KJ(e,t){return new WAe({check:"max_length",...An(t),maximum:e})}function FS(e,t){return new YAe({check:"min_length",...An(t),minimum:e})}function ZJ(e,t){return new KAe({check:"length_equals",...An(t),length:e})}function D6e(e,t){return new ZAe({check:"string_format",format:"regex",...An(t),pattern:e})}function P6e(e){return new JAe({check:"string_format",format:"lowercase",...An(e)})}function L6e(e){return new XAe({check:"string_format",format:"uppercase",...An(e)})}function $6e(e,t){return new QAe({check:"string_format",format:"includes",...An(t),includes:e})}function F6e(e,t){return new eNe({check:"string_format",format:"starts_with",...An(t),prefix:e})}function B6e(e,t){return new tNe({check:"string_format",format:"ends_with",...An(t),suffix:e})}function Iw(e){return new nNe({check:"overwrite",tx:e})}function z6e(e){return Iw(t=>t.normalize(e))}function j6e(){return Iw(e=>e.trim())}function U6e(){return Iw(e=>e.toLowerCase())}function H6e(){return Iw(e=>e.toUpperCase())}function V6e(e,t,n){return new e({type:"array",element:t,...An(n)})}function q6e(e,t,n){const r=An(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}function G6e(e,t,n){return new e({type:"custom",check:"custom",fn:t,...An(n)})}class TF{constructor(t){this.counter=0,this.metadataRegistry=(t==null?void 0:t.metadata)??hv,this.target=(t==null?void 0:t.target)??"draft-2020-12",this.unrepresentable=(t==null?void 0:t.unrepresentable)??"throw",this.override=(t==null?void 0:t.override)??(()=>{}),this.io=(t==null?void 0:t.io)??"output",this.seen=new Map}process(t,n={path:[],schemaPath:[]}){var f,m,g;var r;const s=t._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},i=this.seen.get(t);if(i)return i.count++,n.schemaPath.includes(t)&&(i.cycle=n.path),i.schema;const a={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(t,a);const l=(m=(f=t._zod).toJSONSchema)==null?void 0:m.call(f);if(l)a.schema=l;else{const y={...n,schemaPath:[...n.schemaPath,t],path:n.path},v=t._zod.parent;if(v)a.ref=v,this.process(v,y),this.seen.get(v).isParent=!0;else{const x=a.schema;switch(s.type){case"string":{const E=x;E.type="string";const{minimum:T,maximum:k,format:I,patterns:O,contentEncoding:M}=t._zod.bag;if(typeof T=="number"&&(E.minLength=T),typeof k=="number"&&(E.maxLength=k),I&&(E.format=o[I]??I,E.format===""&&delete E.format),M&&(E.contentEncoding=M),O&&O.size>0){const P=[...O];P.length===1?E.pattern=P[0].source:P.length>1&&(a.schema.allOf=[...P.map(j=>({...this.target==="draft-7"?{type:"string"}:{},pattern:j.source}))])}break}case"number":{const E=x,{minimum:T,maximum:k,format:I,multipleOf:O,exclusiveMaximum:M,exclusiveMinimum:P}=t._zod.bag;typeof I=="string"&&I.includes("int")?E.type="integer":E.type="number",typeof P=="number"&&(E.exclusiveMinimum=P),typeof T=="number"&&(E.minimum=T,typeof P=="number"&&(P>=T?delete E.minimum:delete E.exclusiveMinimum)),typeof M=="number"&&(E.exclusiveMaximum=M),typeof k=="number"&&(E.maximum=k,typeof M=="number"&&(M<=k?delete E.maximum:delete E.exclusiveMaximum)),typeof O=="number"&&(E.multipleOf=O);break}case"boolean":{const E=x;E.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{x.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{x.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const E=x,{minimum:T,maximum:k}=t._zod.bag;typeof T=="number"&&(E.minItems=T),typeof k=="number"&&(E.maxItems=k),E.type="array",E.items=this.process(s.element,{...y,path:[...y.path,"items"]});break}case"object":{const E=x;E.type="object",E.properties={};const T=s.shape;for(const O in T)E.properties[O]=this.process(T[O],{...y,path:[...y.path,"properties",O]});const k=new Set(Object.keys(T)),I=new Set([...k].filter(O=>{const M=s.shape[O]._zod;return this.io==="input"?M.optin===void 0:M.optout===void 0}));I.size>0&&(E.required=Array.from(I)),((g=s.catchall)==null?void 0:g._zod.def.type)==="never"?E.additionalProperties=!1:s.catchall?s.catchall&&(E.additionalProperties=this.process(s.catchall,{...y,path:[...y.path,"additionalProperties"]})):this.io==="output"&&(E.additionalProperties=!1);break}case"union":{const E=x;E.anyOf=s.options.map((T,k)=>this.process(T,{...y,path:[...y.path,"anyOf",k]}));break}case"intersection":{const E=x,T=this.process(s.left,{...y,path:[...y.path,"allOf",0]}),k=this.process(s.right,{...y,path:[...y.path,"allOf",1]}),I=M=>"allOf"in M&&Object.keys(M).length===1,O=[...I(T)?T.allOf:[T],...I(k)?k.allOf:[k]];E.allOf=O;break}case"tuple":{const E=x;E.type="array";const T=s.items.map((O,M)=>this.process(O,{...y,path:[...y.path,"prefixItems",M]}));if(this.target==="draft-2020-12"?E.prefixItems=T:E.items=T,s.rest){const O=this.process(s.rest,{...y,path:[...y.path,"items"]});this.target==="draft-2020-12"?E.items=O:E.additionalItems=O}s.rest&&(E.items=this.process(s.rest,{...y,path:[...y.path,"items"]}));const{minimum:k,maximum:I}=t._zod.bag;typeof k=="number"&&(E.minItems=k),typeof I=="number"&&(E.maxItems=I);break}case"record":{const E=x;E.type="object",E.propertyNames=this.process(s.keyType,{...y,path:[...y.path,"propertyNames"]}),E.additionalProperties=this.process(s.valueType,{...y,path:[...y.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const E=x,T=MJ(s.entries);T.every(k=>typeof k=="number")&&(E.type="number"),T.every(k=>typeof k=="string")&&(E.type="string"),E.enum=T;break}case"literal":{const E=x,T=[];for(const k of s.values)if(k===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof k=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");T.push(Number(k))}else T.push(k);if(T.length!==0)if(T.length===1){const k=T[0];E.type=k===null?"null":typeof k,E.const=k}else T.every(k=>typeof k=="number")&&(E.type="number"),T.every(k=>typeof k=="string")&&(E.type="string"),T.every(k=>typeof k=="boolean")&&(E.type="string"),T.every(k=>k===null)&&(E.type="null"),E.enum=T;break}case"file":{const E=x,T={type:"string",format:"binary",contentEncoding:"binary"},{minimum:k,maximum:I,mime:O}=t._zod.bag;k!==void 0&&(T.minLength=k),I!==void 0&&(T.maxLength=I),O?O.length===1?(T.contentMediaType=O[0],Object.assign(E,T)):E.anyOf=O.map(M=>({...T,contentMediaType:M})):Object.assign(E,T);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const E=this.process(s.innerType,y);x.anyOf=[E,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,y),a.ref=s.innerType;break}case"success":{const E=x;E.type="boolean";break}case"default":{this.process(s.innerType,y),a.ref=s.innerType,x.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,y),a.ref=s.innerType,this.io==="input"&&(x._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,y),a.ref=s.innerType;let E;try{E=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}x.default=E;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const E=x,T=t._zod.pattern;if(!T)throw new Error("Pattern not found in template literal");E.type="string",E.pattern=T.source;break}case"pipe":{const E=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(E,y),a.ref=E;break}case"readonly":{this.process(s.innerType,y),a.ref=s.innerType,x.readOnly=!0;break}case"promise":{this.process(s.innerType,y),a.ref=s.innerType;break}case"optional":{this.process(s.innerType,y),a.ref=s.innerType;break}case"lazy":{const E=t._zod.innerType;this.process(E,y),a.ref=E;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const c=this.metadataRegistry.get(t);return c&&Object.assign(a.schema,c),this.io==="input"&&Si(t)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(t).schema}emit(t,n){var u,f,m,g,y,v;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},s=this.seen.get(t);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=x=>{var O;const E=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const M=(O=r.external.registry.get(x[0]))==null?void 0:O.id,P=r.external.uri??(V=>V);if(M)return{ref:P(M)};const j=x[1].defId??x[1].schema.id??`schema${this.counter++}`;return x[1].defId=j,{defId:j,ref:`${P("__shared")}#/${E}/${j}`}}if(x[1]===s)return{ref:"#"};const k=`#/${E}/`,I=x[1].schema.id??`__schema${this.counter++}`;return{defId:I,ref:k+I}},i=x=>{if(x[1].schema.$ref)return;const E=x[1],{ref:T,defId:k}=o(x);E.def={...E.schema},k&&(E.defId=k);const I=E.schema;for(const O in I)delete I[O];I.$ref=T};if(r.cycles==="throw")for(const x of this.seen.entries()){const E=x[1];if(E.cycle)throw new Error(`Cycle detected: #/${(u=E.cycle)==null?void 0:u.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const x of this.seen.entries()){const E=x[1];if(t===x[0]){i(x);continue}if(r.external){const k=(f=r.external.registry.get(x[0]))==null?void 0:f.id;if(t!==x[0]&&k){i(x);continue}}if((m=this.metadataRegistry.get(x[0]))==null?void 0:m.id){i(x);continue}if(E.cycle){i(x);continue}if(E.count>1&&r.reused==="ref"){i(x);continue}}const a=(x,E)=>{const T=this.seen.get(x),k=T.def??T.schema,I={...k};if(T.ref===null)return;const O=T.ref;if(T.ref=null,O){a(O,E);const M=this.seen.get(O).schema;M.$ref&&E.target==="draft-7"?(k.allOf=k.allOf??[],k.allOf.push(M)):(Object.assign(k,M),Object.assign(k,I))}T.isParent||this.override({zodSchema:x,jsonSchema:k,path:T.path??[]})};for(const x of[...this.seen.entries()].reverse())a(x[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(g=r.external)!=null&&g.uri){const x=(y=r.external.registry.get(t))==null?void 0:y.id;if(!x)throw new Error("Schema is missing an `id` property");l.$id=r.external.uri(x)}Object.assign(l,s.def);const c=((v=r.external)==null?void 0:v.defs)??{};for(const x of this.seen.entries()){const E=x[1];E.def&&E.defId&&(c[E.defId]=E.def)}r.external||Object.keys(c).length>0&&(this.target==="draft-2020-12"?l.$defs=c:l.definitions=c);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function W6e(e,t){if(e instanceof YJ){const r=new TF(t),s={};for(const a of e._idmap.entries()){const[l,c]=a;r.process(c)}const o={},i={registry:e,uri:t==null?void 0:t.uri,defs:s};for(const a of e._idmap.entries()){const[l,c]=a;o[l]=r.emit(c,{...t,external:i})}if(Object.keys(s).length>0){const a=r.target==="draft-2020-12"?"$defs":"definitions";o.__shared={[a]:s}}return{schemas:o}}const n=new TF(t);return n.process(e),n.emit(e,t)}function Si(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const s=e._zod.def;switch(s.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Si(s.element,n);case"object":{for(const o in s.shape)if(Si(s.shape[o],n))return!0;return!1}case"union":{for(const o of s.options)if(Si(o,n))return!0;return!1}case"intersection":return Si(s.left,n)||Si(s.right,n);case"tuple":{for(const o of s.items)if(Si(o,n))return!0;return!!(s.rest&&Si(s.rest,n))}case"record":return Si(s.keyType,n)||Si(s.valueType,n);case"map":return Si(s.keyType,n)||Si(s.valueType,n);case"set":return Si(s.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Si(s.innerType,n);case"lazy":return Si(s.getter(),n);case"default":return Si(s.innerType,n);case"prefault":return Si(s.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return Si(s.in,n)||Si(s.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${s.type}`)}function CF(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}function Y6e(e,t){for(var n={};e.length;){var r=e[0],s=r.code,o=r.message,i=r.path.join(".");if(!n[i])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[i]={message:a.message,type:a.code}}else n[i]={message:o,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return e.push(f)})}),t){var l=n[i].types,c=l&&l[r.code];n[i]=F8(i,t,n,s,c?[].concat(c,r.message):r.message)}e.shift()}return n}function K6e(e,t){for(var n={};e.length;){var r=e[0],s=r.code,o=r.message,i=r.path.join(".");if(!n[i])if(r.code==="invalid_union"&&r.errors.length>0){var a=r.errors[0][0];n[i]={message:a.message,type:a.code}}else n[i]={message:o,type:s};if(r.code==="invalid_union"&&r.errors.forEach(function(u){return u.forEach(function(f){return e.push(f)})}),t){var l=n[i].types,c=l&&l[r.code];n[i]=F8(i,t,n,s,c?[].concat(c,r.message):r.message)}e.shift()}return n}function Z6e(e,t,n){if(n===void 0&&(n={}),(function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def})(e))return function(r,s,o){try{return Promise.resolve(CF(function(){return Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(i){return o.shouldUseNativeValidation&&e6({},o),{errors:{},values:n.raw?Object.assign({},r):i}})},function(i){if((function(a){return Array.isArray(a==null?void 0:a.issues)})(i))return{values:{},errors:cF(Y6e(i.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw i}))}catch(i){return Promise.reject(i)}};if((function(r){return"_zod"in r&&typeof r._zod=="object"})(e))return function(r,s,o){try{return Promise.resolve(CF(function(){return Promise.resolve((n.mode==="sync"?hAe:pAe)(e,r,t)).then(function(i){return o.shouldUseNativeValidation&&e6({},o),{errors:{},values:n.raw?Object.assign({},r):i}})},function(i){if((function(a){return a instanceof G8})(i))return{values:{},errors:cF(K6e(i.issues,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw i}))}catch(i){return Promise.reject(i)}};throw new Error("Invalid input: not a Zod schema")}var ss;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const o={};for(const i of s)o[i]=i;return o},e.getValidEnumValues=s=>{const o=e.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),i={};for(const a of o)i[a]=s[a];return e.objectValues(i)},e.objectValues=s=>e.objectKeys(s).map(function(o){return s[o]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&o.push(i);return o},e.find=(s,o)=>{for(const i of s)if(o(i))return i},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(o)}e.joinValues=r,e.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(ss||(ss={}));var kF;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(kF||(kF={}));const yn=ss.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),e0=e=>{switch(typeof e){case"undefined":return yn.undefined;case"string":return yn.string;case"number":return Number.isNaN(e)?yn.nan:yn.number;case"boolean":return yn.boolean;case"function":return yn.function;case"bigint":return yn.bigint;case"symbol":return yn.symbol;case"object":return Array.isArray(e)?yn.array:e===null?yn.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?yn.promise:typeof Map<"u"&&e instanceof Map?yn.map:typeof Set<"u"&&e instanceof Set?yn.set:typeof Date<"u"&&e instanceof Date?yn.date:yn.object;default:return yn.unknown}},Pt=ss.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Gf extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(o){return o.message},r={_errors:[]},s=o=>{for(const i of o.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)r._errors.push(n(i));else{let a=r,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(i))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(t){if(!(t instanceof Gf))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ss.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const o=s.path[0];n[o]=n[o]||[],n[o].push(t(s))}else r.push(t(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Gf.create=e=>new Gf(e);const n6=(e,t)=>{let n;switch(e.code){case Pt.invalid_type:e.received===yn.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Pt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,ss.jsonStringifyReplacer)}`;break;case Pt.unrecognized_keys:n=`Unrecognized key(s) in object: ${ss.joinValues(e.keys,", ")}`;break;case Pt.invalid_union:n="Invalid input";break;case Pt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ss.joinValues(e.options)}`;break;case Pt.invalid_enum_value:n=`Invalid enum value. Expected ${ss.joinValues(e.options)}, received '${e.received}'`;break;case Pt.invalid_arguments:n="Invalid function arguments";break;case Pt.invalid_return_type:n="Invalid function return type";break;case Pt.invalid_date:n="Invalid date";break;case Pt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:ss.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Pt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Pt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Pt.custom:n="Invalid input";break;case Pt.invalid_intersection_types:n="Intersection results could not be merged";break;case Pt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Pt.not_finite:n="Number must be finite";break;default:n=t.defaultError,ss.assertNever(e)}return{message:n}};let J6e=n6;function X6e(){return J6e}const Q6e=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,o=[...n,...s.path||[]],i={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(i,{data:t,defaultError:a}).message;return{...s,path:o,message:a}};function tn(e,t){const n=X6e(),r=Q6e({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===n6?void 0:n6].filter(s=>!!s)});e.common.issues.push(r)}class Ql{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return ar;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n){const o=await s.key,i=await s.value;r.push({key:o,value:i})}return Ql.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:o,value:i}=s;if(o.status==="aborted"||i.status==="aborted")return ar;o.status==="dirty"&&t.dirty(),i.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(r[o.value]=i.value)}return{status:t.value,value:r}}}const ar=Object.freeze({status:"aborted"}),pv=e=>({status:"dirty",value:e}),$c=e=>({status:"valid",value:e}),AF=e=>e.status==="aborted",NF=e=>e.status==="dirty",K1=e=>e.status==="valid",BS=e=>typeof Promise<"u"&&e instanceof Promise;var _n;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(_n||(_n={}));class T0{constructor(t,n,r,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const IF=(e,t)=>{if(K1(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Gf(e.common.issues);return this._error=n,this._error}}};function Ar(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(i,a)=>{const{message:l}=e;return i.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:s}}let Zr=class{get description(){return this._def.description}_getType(t){return e0(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:e0(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ql,ctx:{common:t.parent.common,data:t.data,parsedType:e0(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(BS(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:e0(t)},s=this._parseSync({data:t,path:r.path,parent:r});return IF(r,s)}"~validate"(t){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:e0(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:n});return K1(o)?{value:o.value}:{issues:n.common.issues}}catch(o){(s=(r=o==null?void 0:o.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(o=>K1(o)?{value:o.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:e0(t)},s=this._parse({data:t,path:r.path,parent:r}),o=await(BS(s)?s:Promise.resolve(s));return IF(r,o)}refine(t,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,o)=>{const i=t(s),a=()=>o.addIssue({code:Pt.custom,...r(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(l=>l?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(t){return new J1({schema:this,typeName:Ft.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return m0.create(this,this._def)}nullable(){return X1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Z1.create(this)}promise(){return US.create(this,this._def)}or(t){return zS.create([this,t],this._def)}and(t){return jS.create(this,t,this._def)}transform(t){return new J1({...Ar(this._def),schema:this,typeName:Ft.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new c6({...Ar(this._def),innerType:this,defaultValue:n,typeName:Ft.ZodDefault})}brand(){return new EIe({typeName:Ft.ZodBranded,type:this,...Ar(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new u6({...Ar(this._def),innerType:this,catchValue:n,typeName:Ft.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return K8.create(this,t)}readonly(){return d6.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const eIe=/^c[^\s-]{8,}$/i,tIe=/^[0-9a-z]+$/,nIe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,rIe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,sIe=/^[a-z0-9_-]{21}$/i,oIe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,iIe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,aIe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lIe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let i5;const cIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,uIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,dIe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,fIe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,hIe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pIe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,JJ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",mIe=new RegExp(`^${JJ}$`);function XJ(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function gIe(e){return new RegExp(`^${XJ(e)}$`)}function bIe(e){let t=`${JJ}T${XJ(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function yIe(e,t){return!!((t==="v4"||!t)&&cIe.test(e)||(t==="v6"||!t)&&dIe.test(e))}function vIe(e,t){if(!oIe.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function xIe(e,t){return!!((t==="v4"||!t)&&uIe.test(e)||(t==="v6"||!t)&&fIe.test(e))}let r6=class mv extends Zr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==yn.string){const o=this._getOrReturnCtx(t);return tn(o,{code:Pt.invalid_type,expected:yn.string,received:o.parsedType}),ar}const r=new Ql;let s;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(s=this._getOrReturnCtx(t,s),tn(s,{code:Pt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")t.data.length>o.value&&(s=this._getOrReturnCtx(t,s),tn(s,{code:Pt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const i=t.data.length>o.value,a=t.data.length<o.value;(i||a)&&(s=this._getOrReturnCtx(t,s),i?tn(s,{code:Pt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&tn(s,{code:Pt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")aIe.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"email",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")i5||(i5=new RegExp(lIe,"u")),i5.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"emoji",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")rIe.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"uuid",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")sIe.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"nanoid",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")eIe.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"cuid",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")tIe.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"cuid2",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")nIe.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"ulid",code:Pt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),tn(s,{validation:"url",code:Pt.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"regex",code:Pt.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(t,s),tn(s,{code:Pt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(s=this._getOrReturnCtx(t,s),tn(s,{code:Pt.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(s=this._getOrReturnCtx(t,s),tn(s,{code:Pt.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?bIe(o).test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{code:Pt.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?mIe.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{code:Pt.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?gIe(o).test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{code:Pt.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?iIe.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"duration",code:Pt.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?yIe(t.data,o.version)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"ip",code:Pt.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?vIe(t.data,o.alg)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"jwt",code:Pt.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?xIe(t.data,o.version)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"cidr",code:Pt.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?hIe.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"base64",code:Pt.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?pIe.test(t.data)||(s=this._getOrReturnCtx(t,s),tn(s,{validation:"base64url",code:Pt.invalid_string,message:o.message}),r.dirty()):ss.assertNever(o);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:Pt.invalid_string,..._n.errToObj(r)})}_addCheck(t){return new mv({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",..._n.errToObj(t)})}url(t){return this._addCheck({kind:"url",..._n.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",..._n.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",..._n.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",..._n.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",..._n.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",..._n.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",..._n.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",..._n.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",..._n.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",..._n.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",..._n.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",..._n.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,..._n.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,..._n.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",..._n.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,..._n.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,..._n.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,..._n.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,..._n.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,..._n.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,..._n.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,..._n.errToObj(n)})}nonempty(t){return this.min(1,_n.errToObj(t))}trim(){return new mv({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new mv({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new mv({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}};r6.create=e=>new r6({checks:[],typeName:Ft.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Ar(e)});function wIe(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,o=Number.parseInt(e.toFixed(s).replace(".","")),i=Number.parseInt(t.toFixed(s).replace(".",""));return o%i/10**s}let s6=class o6 extends Zr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==yn.number){const o=this._getOrReturnCtx(t);return tn(o,{code:Pt.invalid_type,expected:yn.number,received:o.parsedType}),ar}let r;const s=new Ql;for(const o of this._def.checks)o.kind==="int"?ss.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:Pt.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Pt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Pt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?wIe(t.data,o.value)!==0&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Pt.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:Pt.not_finite,message:o.message}),s.dirty()):ss.assertNever(o);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,_n.toString(n))}gt(t,n){return this.setLimit("min",t,!1,_n.toString(n))}lte(t,n){return this.setLimit("max",t,!0,_n.toString(n))}lt(t,n){return this.setLimit("max",t,!1,_n.toString(n))}setLimit(t,n,r,s){return new o6({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:_n.toString(s)}]})}_addCheck(t){return new o6({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:_n.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_n.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_n.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_n.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_n.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:_n.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:_n.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_n.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_n.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ss.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}};s6.create=e=>new s6({checks:[],typeName:Ft.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ar(e)});class Cx extends Zr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==yn.bigint)return this._getInvalidInput(t);let r;const s=new Ql;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Pt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Pt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Pt.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):ss.assertNever(o);return{status:s.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return tn(n,{code:Pt.invalid_type,expected:yn.bigint,received:n.parsedType}),ar}gte(t,n){return this.setLimit("min",t,!0,_n.toString(n))}gt(t,n){return this.setLimit("min",t,!1,_n.toString(n))}lte(t,n){return this.setLimit("max",t,!0,_n.toString(n))}lt(t,n){return this.setLimit("max",t,!1,_n.toString(n))}setLimit(t,n,r,s){return new Cx({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:_n.toString(s)}]})}_addCheck(t){return new Cx({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_n.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_n.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_n.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_n.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:_n.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Cx.create=e=>new Cx({checks:[],typeName:Ft.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Ar(e)});let i6=class extends Zr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==yn.boolean){const r=this._getOrReturnCtx(t);return tn(r,{code:Pt.invalid_type,expected:yn.boolean,received:r.parsedType}),ar}return $c(t.data)}};i6.create=e=>new i6({typeName:Ft.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ar(e)});class kx extends Zr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==yn.date){const o=this._getOrReturnCtx(t);return tn(o,{code:Pt.invalid_type,expected:yn.date,received:o.parsedType}),ar}if(Number.isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return tn(o,{code:Pt.invalid_date}),ar}const r=new Ql;let s;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(s=this._getOrReturnCtx(t,s),tn(s,{code:Pt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(s=this._getOrReturnCtx(t,s),tn(s,{code:Pt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):ss.assertNever(o);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new kx({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:_n.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:_n.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}kx.create=e=>new kx({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ft.ZodDate,...Ar(e)});class RF extends Zr{_parse(t){if(this._getType(t)!==yn.symbol){const r=this._getOrReturnCtx(t);return tn(r,{code:Pt.invalid_type,expected:yn.symbol,received:r.parsedType}),ar}return $c(t.data)}}RF.create=e=>new RF({typeName:Ft.ZodSymbol,...Ar(e)});class MF extends Zr{_parse(t){if(this._getType(t)!==yn.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:Pt.invalid_type,expected:yn.undefined,received:r.parsedType}),ar}return $c(t.data)}}MF.create=e=>new MF({typeName:Ft.ZodUndefined,...Ar(e)});let OF=class extends Zr{_parse(t){if(this._getType(t)!==yn.null){const r=this._getOrReturnCtx(t);return tn(r,{code:Pt.invalid_type,expected:yn.null,received:r.parsedType}),ar}return $c(t.data)}};OF.create=e=>new OF({typeName:Ft.ZodNull,...Ar(e)});let DF=class extends Zr{constructor(){super(...arguments),this._any=!0}_parse(t){return $c(t.data)}};DF.create=e=>new DF({typeName:Ft.ZodAny,...Ar(e)});let PF=class extends Zr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return $c(t.data)}};PF.create=e=>new PF({typeName:Ft.ZodUnknown,...Ar(e)});let C0=class extends Zr{_parse(t){const n=this._getOrReturnCtx(t);return tn(n,{code:Pt.invalid_type,expected:yn.never,received:n.parsedType}),ar}};C0.create=e=>new C0({typeName:Ft.ZodNever,...Ar(e)});class LF extends Zr{_parse(t){if(this._getType(t)!==yn.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:Pt.invalid_type,expected:yn.void,received:r.parsedType}),ar}return $c(t.data)}}LF.create=e=>new LF({typeName:Ft.ZodVoid,...Ar(e)});let Z1=class I_ extends Zr{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==yn.array)return tn(n,{code:Pt.invalid_type,expected:yn.array,received:n.parsedType}),ar;if(s.exactLength!==null){const i=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(i||a)&&(tn(n,{code:i?Pt.too_big:Pt.too_small,minimum:a?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(tn(n,{code:Pt.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(tn(n,{code:Pt.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((i,a)=>s.type._parseAsync(new T0(n,i,n.path,a)))).then(i=>Ql.mergeArray(r,i));const o=[...n.data].map((i,a)=>s.type._parseSync(new T0(n,i,n.path,a)));return Ql.mergeArray(r,o)}get element(){return this._def.type}min(t,n){return new I_({...this._def,minLength:{value:t,message:_n.toString(n)}})}max(t,n){return new I_({...this._def,maxLength:{value:t,message:_n.toString(n)}})}length(t,n){return new I_({...this._def,exactLength:{value:t,message:_n.toString(n)}})}nonempty(t){return this.min(1,t)}};Z1.create=(e,t)=>new Z1({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ft.ZodArray,...Ar(t)});function r1(e){if(e instanceof Wf){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=m0.create(r1(r))}return new Wf({...e._def,shape:()=>t})}else return e instanceof Z1?new Z1({...e._def,type:r1(e.element)}):e instanceof m0?m0.create(r1(e.unwrap())):e instanceof X1?X1.create(r1(e.unwrap())):e instanceof mm?mm.create(e.items.map(t=>r1(t))):e}let Wf=class ru extends Zr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=ss.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==yn.object){const c=this._getOrReturnCtx(t);return tn(c,{code:Pt.invalid_type,expected:yn.object,received:c.parsedType}),ar}const{status:r,ctx:s}=this._processInputParams(t),{shape:o,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof C0&&this._def.unknownKeys==="strip"))for(const c in s.data)i.includes(c)||a.push(c);const l=[];for(const c of i){const u=o[c],f=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new T0(s,f,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof C0){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(tn(s,{code:Pt.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const f=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new T0(s,f,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,m=await u.value;c.push({key:f,value:m,alwaysSet:u.alwaysSet})}return c}).then(c=>Ql.mergeObjectSync(r,c)):Ql.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return _n.errToObj,new ru({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var o,i;const s=((i=(o=this._def).errorMap)==null?void 0:i.call(o,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:_n.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new ru({...this._def,unknownKeys:"strip"})}passthrough(){return new ru({...this._def,unknownKeys:"passthrough"})}extend(t){return new ru({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ru({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ft.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new ru({...this._def,catchall:t})}pick(t){const n={};for(const r of ss.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new ru({...this._def,shape:()=>n})}omit(t){const n={};for(const r of ss.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new ru({...this._def,shape:()=>n})}deepPartial(){return r1(this)}partial(t){const n={};for(const r of ss.objectKeys(this.shape)){const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}return new ru({...this._def,shape:()=>n})}required(t){const n={};for(const r of ss.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof m0;)o=o._def.innerType;n[r]=o}return new ru({...this._def,shape:()=>n})}keyof(){return QJ(ss.objectKeys(this.shape))}};Wf.create=(e,t)=>new Wf({shape:()=>e,unknownKeys:"strip",catchall:C0.create(),typeName:Ft.ZodObject,...Ar(t)});Wf.strictCreate=(e,t)=>new Wf({shape:()=>e,unknownKeys:"strict",catchall:C0.create(),typeName:Ft.ZodObject,...Ar(t)});Wf.lazycreate=(e,t)=>new Wf({shape:e,unknownKeys:"strip",catchall:C0.create(),typeName:Ft.ZodObject,...Ar(t)});let zS=class extends Zr{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function s(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const i=o.map(a=>new Gf(a.ctx.common.issues));return tn(n,{code:Pt.invalid_union,unionErrors:i}),ar}if(n.common.async)return Promise.all(r.map(async o=>{const i={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:i}),ctx:i}})).then(s);{let o;const i=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!o&&(o={result:u,ctx:c}),c.common.issues.length&&i.push(c.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(l=>new Gf(l));return tn(n,{code:Pt.invalid_union,unionErrors:a}),ar}}get options(){return this._def.options}};zS.create=(e,t)=>new zS({options:e,typeName:Ft.ZodUnion,...Ar(t)});function a6(e,t){const n=e0(e),r=e0(t);if(e===t)return{valid:!0,data:e};if(n===yn.object&&r===yn.object){const s=ss.objectKeys(t),o=ss.objectKeys(e).filter(a=>s.indexOf(a)!==-1),i={...e,...t};for(const a of o){const l=a6(e[a],t[a]);if(!l.valid)return{valid:!1};i[a]=l.data}return{valid:!0,data:i}}else if(n===yn.array&&r===yn.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let o=0;o<e.length;o++){const i=e[o],a=t[o],l=a6(i,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===yn.date&&r===yn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}let jS=class extends Zr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=(o,i)=>{if(AF(o)||AF(i))return ar;const a=a6(o.value,i.value);return a.valid?((NF(o)||NF(i))&&n.dirty(),{status:n.value,value:a.data}):(tn(r,{code:Pt.invalid_intersection_types}),ar)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,i])=>s(o,i)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};jS.create=(e,t,n)=>new jS({left:e,right:t,typeName:Ft.ZodIntersection,...Ar(n)});class mm extends Zr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==yn.array)return tn(r,{code:Pt.invalid_type,expected:yn.array,received:r.parsedType}),ar;if(r.data.length<this._def.items.length)return tn(r,{code:Pt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ar;!this._def.rest&&r.data.length>this._def.items.length&&(tn(r,{code:Pt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((i,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new T0(r,i,r.path,a)):null}).filter(i=>!!i);return r.common.async?Promise.all(o).then(i=>Ql.mergeArray(n,i)):Ql.mergeArray(n,o)}get items(){return this._def.items}rest(t){return new mm({...this._def,rest:t})}}mm.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mm({items:e,typeName:Ft.ZodTuple,rest:null,...Ar(t)})};class $F extends Zr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==yn.map)return tn(r,{code:Pt.invalid_type,expected:yn.map,received:r.parsedType}),ar;const s=this._def.keyType,o=this._def.valueType,i=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new T0(r,a,r.path,[c,"key"])),value:o._parse(new T0(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of i){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return ar;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of i){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return ar;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}$F.create=(e,t,n)=>new $F({valueType:t,keyType:e,typeName:Ft.ZodMap,...Ar(n)});class Ax extends Zr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==yn.set)return tn(r,{code:Pt.invalid_type,expected:yn.set,received:r.parsedType}),ar;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(tn(r,{code:Pt.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(tn(r,{code:Pt.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const o=this._def.valueType;function i(l){const c=new Set;for(const u of l){if(u.status==="aborted")return ar;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>o._parse(new T0(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>i(l)):i(a)}min(t,n){return new Ax({...this._def,minSize:{value:t,message:_n.toString(n)}})}max(t,n){return new Ax({...this._def,maxSize:{value:t,message:_n.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Ax.create=(e,t)=>new Ax({valueType:e,minSize:null,maxSize:null,typeName:Ft.ZodSet,...Ar(t)});let FF=class extends Zr{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};FF.create=(e,t)=>new FF({getter:e,typeName:Ft.ZodLazy,...Ar(t)});let BF=class extends Zr{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return tn(n,{received:n.data,code:Pt.invalid_literal,expected:this._def.value}),ar}return{status:"valid",value:t.data}}get value(){return this._def.value}};BF.create=(e,t)=>new BF({value:e,typeName:Ft.ZodLiteral,...Ar(t)});function QJ(e,t){return new Y8({values:e,typeName:Ft.ZodEnum,...Ar(t)})}let Y8=class l6 extends Zr{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{expected:ss.joinValues(r),received:n.parsedType,code:Pt.invalid_type}),ar}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{received:n.data,code:Pt.invalid_enum_value,options:r}),ar}return $c(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return l6.create(t,{...this._def,...n})}exclude(t,n=this._def){return l6.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}};Y8.create=QJ;class zF extends Zr{_parse(t){const n=ss.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==yn.string&&r.parsedType!==yn.number){const s=ss.objectValues(n);return tn(r,{expected:ss.joinValues(s),received:r.parsedType,code:Pt.invalid_type}),ar}if(this._cache||(this._cache=new Set(ss.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=ss.objectValues(n);return tn(r,{received:r.data,code:Pt.invalid_enum_value,options:s}),ar}return $c(t.data)}get enum(){return this._def.values}}zF.create=(e,t)=>new zF({values:e,typeName:Ft.ZodNativeEnum,...Ar(t)});class US extends Zr{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==yn.promise&&n.common.async===!1)return tn(n,{code:Pt.invalid_type,expected:yn.promise,received:n.parsedType}),ar;const r=n.parsedType===yn.promise?n.data:Promise.resolve(n.data);return $c(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}US.create=(e,t)=>new US({type:e,typeName:Ft.ZodPromise,...Ar(t)});class J1 extends Zr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ft.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=this._def.effect||null,o={addIssue:i=>{tn(r,i),i.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const i=s.transform(r.data,o);if(r.common.async)return Promise.resolve(i).then(async a=>{if(n.value==="aborted")return ar;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?ar:l.status==="dirty"||n.value==="dirty"?pv(l.value):l});{if(n.value==="aborted")return ar;const a=this._def.schema._parseSync({data:i,path:r.path,parent:r});return a.status==="aborted"?ar:a.status==="dirty"||n.value==="dirty"?pv(a.value):a}}if(s.type==="refinement"){const i=a=>{const l=s.refinement(a,o);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ar:(a.status==="dirty"&&n.dirty(),i(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?ar:(a.status==="dirty"&&n.dirty(),i(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!K1(i))return ar;const a=s.transform(i.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>K1(i)?Promise.resolve(s.transform(i.value,o)).then(a=>({status:n.value,value:a})):ar);ss.assertNever(s)}}J1.create=(e,t,n)=>new J1({schema:e,typeName:Ft.ZodEffects,effect:t,...Ar(n)});J1.createWithPreprocess=(e,t,n)=>new J1({schema:t,effect:{type:"preprocess",transform:e},typeName:Ft.ZodEffects,...Ar(n)});let m0=class extends Zr{_parse(t){return this._getType(t)===yn.undefined?$c(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};m0.create=(e,t)=>new m0({innerType:e,typeName:Ft.ZodOptional,...Ar(t)});let X1=class extends Zr{_parse(t){return this._getType(t)===yn.null?$c(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};X1.create=(e,t)=>new X1({innerType:e,typeName:Ft.ZodNullable,...Ar(t)});let c6=class extends Zr{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===yn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};c6.create=(e,t)=>new c6({innerType:e,typeName:Ft.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ar(t)});let u6=class extends Zr{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return BS(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Gf(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Gf(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};u6.create=(e,t)=>new u6({innerType:e,typeName:Ft.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ar(t)});class jF extends Zr{_parse(t){if(this._getType(t)!==yn.nan){const r=this._getOrReturnCtx(t);return tn(r,{code:Pt.invalid_type,expected:yn.nan,received:r.parsedType}),ar}return{status:"valid",value:t.data}}}jF.create=e=>new jF({typeName:Ft.ZodNaN,...Ar(e)});class EIe extends Zr{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class K8 extends Zr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?ar:o.status==="dirty"?(n.dirty(),pv(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ar:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new K8({in:t,out:n,typeName:Ft.ZodPipeline})}}let d6=class extends Zr{_parse(t){const n=this._def.innerType._parse(t),r=s=>(K1(s)&&(s.value=Object.freeze(s.value)),s);return BS(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}};d6.create=(e,t)=>new d6({innerType:e,typeName:Ft.ZodReadonly,...Ar(t)});var Ft;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ft||(Ft={}));const rs=r6.create,E2=s6.create,_2=i6.create,UF=kx.create;C0.create;const f6=Z1.create,oi=Wf.create;zS.create;jS.create;mm.create;const h6=Y8.create;US.create;m0.create;X1.create;const _Ie=oi({title:rs().min(1,"Title is required"),description:rs().optional(),assignedTo:f6(rs()).min(1,"At least one assignee is required"),status:h6(Object.values(_x)),priority:h6(Object.values(Ex)),dueDate:UF().optional().nullable(),reminderDate:UF().optional().nullable()});function eX({...e}){return h.jsx(YW,{"data-slot":"sheet",...e})}function SIe({...e}){return h.jsx(KW,{"data-slot":"sheet-portal",...e})}function TIe({className:e,...t}){return h.jsx(ZW,{"data-slot":"sheet-overlay",className:Qe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function tX({className:e,children:t,side:n="right",...r}){return h.jsxs(SIe,{children:[h.jsx(TIe,{}),h.jsxs(JW,{"data-slot":"sheet-content",className:Qe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[t,h.jsxs(QW,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[h.jsx(qr,{className:"size-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function nX({className:e,...t}){return h.jsx("div",{"data-slot":"sheet-header",className:Qe("flex flex-col gap-1.5 p-4",e),...t})}function rX({className:e,...t}){return h.jsx(XW,{"data-slot":"sheet-title",className:Qe("text-foreground font-semibold",e),...t})}const CIe=O5e,sX=w.createContext({}),Gg=({...e})=>h.jsx(sX.Provider,{value:{name:e.name},children:h.jsx(L5e,{...e})}),Z8=()=>{const e=w.useContext(sX),t=w.useContext(oX),{getFieldState:n}=gC(),r=SJ({name:e.name}),s=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=t;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...s}},oX=w.createContext({});function Op({className:e,...t}){const n=w.useId();return h.jsx(oX.Provider,{value:{id:n},children:h.jsx("div",{"data-slot":"form-item",className:Qe("grid gap-2",e),...t})})}function Dp({className:e,...t}){const{error:n,formItemId:r}=Z8();return h.jsx(jl,{"data-slot":"form-label","data-error":!!n,className:Qe("data-[error=true]:text-destructive",e),htmlFor:r,...t})}function Wg({...e}){const{error:t,formItemId:n,formDescriptionId:r,formMessageId:s}=Z8();return h.jsx(Am,{"data-slot":"form-control",id:n,"aria-describedby":t?`${r} ${s}`:`${r}`,"aria-invalid":!!t,...e})}function Yg({className:e,...t}){const{error:n,formMessageId:r}=Z8(),s=n?String((n==null?void 0:n.message)??""):t.children;return s?h.jsx("p",{"data-slot":"form-message",id:r,className:Qe("text-destructive text-sm",e),...t,children:s}):null}const kIe=({isOpen:e,onClose:t,editTodoId:n})=>{const{addTodo:r,updateTodo:s,todos:o}=pC(),[i,a]=Me.useState([]),[l,c]=Me.useState(""),u={title:"",description:"",assignedTo:[],status:_x.Pending,priority:Ex.Medium,dueDate:void 0,reminderDate:void 0},f=J5e({resolver:Z6e(_Ie),defaultValues:u});Me.useEffect(()=>{if(n){const v=o.find(x=>x.id===n);v&&(f.reset({title:v.title,description:v.description,assignedTo:v.assignedTo,status:v.status,priority:v.priority,dueDate:v.dueDate,reminderDate:v.reminderDate}),a(v.assignedTo))}else f.reset(u),a([])},[n,o,e,f]);const m=v=>{v.assignedTo=i,n?(s(n,v),Bi.success("Your to-do has been updated successfully.")):(r(v),Bi.success("Your new to-do has been added successfully.")),f.reset(),a([]),c(""),t()},g=()=>{if(l.trim()&&!i.includes(l.trim())){const v=[...i,l.trim()];a(v),f.setValue("assignedTo",v),c("")}},y=v=>{const x=i.filter(E=>E!==v);a(x),f.setValue("assignedTo",x)};return h.jsx(eX,{open:e,onOpenChange:v=>!v&&t(),children:h.jsxs(tX,{className:"overflow-y-auto",children:[h.jsx(nX,{children:h.jsx(rX,{children:n?"Edit To-Do":"Add New To-Do"})}),h.jsx(CIe,{...f,children:h.jsxs("form",{onSubmit:f.handleSubmit(m),className:"space-y-6 p-4 pt-0",children:[h.jsx(Gg,{control:f.control,name:"title",render:({field:v})=>h.jsxs(Op,{children:[h.jsx(Dp,{children:"Title"}),h.jsx(Wg,{children:h.jsx(gu,{placeholder:"Enter title",...v})}),h.jsx(Yg,{})]})}),h.jsx(Gg,{control:f.control,name:"description",render:({field:v})=>h.jsxs(Op,{children:[h.jsx(Dp,{children:"Description"}),h.jsx(Wg,{children:h.jsx(I8,{placeholder:"Enter description",rows:4,...v,value:v.value||""})}),h.jsx(Yg,{})]})}),h.jsxs(Op,{children:[h.jsx(Dp,{children:"Assigned To"}),h.jsx("div",{className:"flex flex-wrap items-center gap-2",children:i.map(v=>h.jsxs(Ec,{variant:"outline",className:"cursor-pointer",onClick:()=>y(v),children:[v,h.jsx(qr,{className:"size-3"})]},v))}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(gu,{value:l,onChange:v=>c(v.target.value),placeholder:"Enter user name",onKeyDown:v=>{v.key==="Enter"&&(v.preventDefault(),g())}}),h.jsx(wr,{type:"button",variant:"outline",size:"icon",onClick:g,children:h.jsx(Hf,{})})]}),f.formState.errors.assignedTo&&h.jsx("p",{className:"text-destructive mt-1 text-sm font-medium",children:f.formState.errors.assignedTo.message})]}),h.jsx(Gg,{control:f.control,name:"dueDate",render:({field:v})=>h.jsxs(Op,{children:[h.jsx(Dp,{children:"Due Date"}),h.jsx(Wg,{children:h.jsxs(vx,{children:[h.jsx(xx,{asChild:!0,children:h.jsxs(wr,{variant:"outline",className:Qe("w-full justify-start text-left font-normal",!v.value&&"text-muted-foreground"),children:[h.jsx(F1,{}),v.value?ir(v.value,"PPP"):"Select a date"]})}),h.jsx(wx,{className:"w-auto p-0",align:"start",children:h.jsx(bx,{mode:"single",disabled:{before:new Date},selected:v.value||void 0,onSelect:v.onChange})})]})}),h.jsx(Yg,{})]})}),h.jsx(Gg,{control:f.control,name:"reminderDate",render:({field:v})=>h.jsxs(Op,{children:[h.jsx(Dp,{children:"Reminder Date"}),h.jsx(Wg,{children:h.jsxs(vx,{children:[h.jsx(xx,{asChild:!0,children:h.jsxs(wr,{variant:"outline",className:Qe("w-full justify-start text-left font-normal",!v.value&&"text-muted-foreground"),children:[h.jsx(F1,{}),v.value?ir(v.value,"PPP"):"Select a date"]})}),h.jsx(wx,{className:"w-auto p-0",align:"start",children:h.jsx(bx,{mode:"single",disabled:{before:new Date},selected:v.value||void 0,onSelect:v.onChange})})]})}),h.jsx(Yg,{})]})}),h.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[h.jsx(Gg,{control:f.control,name:"status",render:({field:v})=>h.jsxs(Op,{children:[h.jsx(Dp,{children:"Status"}),h.jsx(Wg,{children:h.jsxs(kS,{value:v.value,onValueChange:v.onChange,children:[h.jsx(NS,{className:"w-full",children:h.jsx(AS,{placeholder:"Select status"})}),h.jsx(IS,{children:Object.values(_x).map(x=>h.jsxs(RS,{value:x,children:[h.jsx("span",{className:Qe("size-2 rounded-full",v5e[x])}),uJ[x]]},x))})]})}),h.jsx(Yg,{})]})}),h.jsx(Gg,{control:f.control,name:"priority",render:({field:v})=>h.jsxs(Op,{children:[h.jsx(Dp,{children:"Priority"}),h.jsx(Wg,{children:h.jsxs(kS,{value:v.value,onValueChange:v.onChange,children:[h.jsx(NS,{className:"w-full capitalize",children:h.jsx(AS,{placeholder:"Select priority"})}),h.jsx(IS,{children:Object.values(Ex).map(x=>h.jsxs(RS,{className:"capitalize",value:x,children:[h.jsx("span",{className:Qe("size-2 rounded-full",cJ[x])}),x]},x))})]})}),h.jsx(Yg,{})]})})]}),h.jsx(wr,{className:"w-full",type:"submit",children:n?"Save Changes":"Add To-Do"})]})})]})})},AIe=({isOpen:e,onClose:t,todoId:n,onEditClick:r})=>{const{todos:s,addComment:o,deleteComment:i,addFile:a,removeFile:l,addSubTask:c,updateSubTask:u,removeSubTask:f}=pC(),[m,g]=Me.useState(""),[y,v]=Me.useState(""),[x,E]=Me.useState(!1),T=s.find(V=>V.id===n);if(!T)return null;const k=()=>{if(!m.trim()){Bi.error("Both comment and author name are required");return}o(T.id,m),g(""),Bi.success("Your comment has been added successfully.")},I=V=>{const U=V.target.files;!U||U.length===0||(Array.from(U).forEach(z=>{const H=new FileReader;H.readAsDataURL(z),H.onload=()=>{a(T.id,{name:z.name,url:H.result,type:z.type,size:z.size,uploadedAt:new Date}),Bi.success(`${z.name} has been added to the task`)}}),V.target.value="")},O=()=>{if(!y.trim()){Bi.error("Subtask title is required");return}c(T.id,y),v(""),E(!1),Bi.success("Your subtask has been added successfully.")},M=(V,U)=>{u(T.id,V,U)},P=V=>{f(T.id,V),Bi.success("The subtask has been removed successfully.")},j=V=>V<1024?V+" bytes":V<1048576?(V/1024).toFixed(1)+" KB":(V/1048576).toFixed(1)+" MB";return h.jsx(eX,{open:e,onOpenChange:V=>!V&&t(),children:h.jsxs(tX,{children:[h.jsxs(nX,{children:[h.jsxs("div",{className:"flex items-start justify-between pe-6",children:[h.jsx(rX,{children:T.title}),r&&h.jsxs(wr,{variant:"outline",onClick:()=>r(T.id),children:[h.jsx(Wbe,{}),"Edit"]})]}),h.jsxs("div",{className:"flex items-center gap-2 capitalize",children:[h.jsx(Ec,{className:KN[T.status],children:T.status.replace("-"," ")}),h.jsx(Ec,{className:YN[T.priority],children:T.priority})]})]}),h.jsxs("div",{className:"space-y-6 p-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Description"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:T.description||"No description provided."})]}),h.jsxs("div",{className:"grid grid-cols-3",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Assigned To"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:T.assignedTo||"Unassigned"})]}),T.dueDate&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Due Date"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:ir(new Date(T.dueDate),"PPP")})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Created"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:ir(new Date(T.createdAt),"PPP")})]})]})]}),h.jsx($f,{}),h.jsxs("div",{className:"space-y-4 p-4",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Subtasks"}),T.subTasks&&T.subTasks.length>0?h.jsx("div",{className:"space-y-2",children:T.subTasks.map(V=>h.jsxs("div",{className:"bg-muted flex items-center justify-between rounded-md p-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(yx,{checked:V.completed,onCheckedChange:U=>M(V.id,!!U)}),h.jsx("span",{className:Qe("text-sm",V.completed&&"text-muted-foreground line-through"),children:V.title})]}),h.jsx(wr,{variant:"ghost",className:"text-red-400!",size:"sm",onClick:()=>P(V.id),children:h.jsx(Lf,{})})]},V.id))}):h.jsx("div",{className:"bg-muted text-muted-foreground rounded-md p-4 text-center text-sm",children:"No subtasks yet."}),!x&&h.jsx("div",{children:h.jsxs(wr,{variant:"outline",size:"sm",onClick:()=>E(!0),children:[h.jsx(Lq,{}),h.jsx("span",{children:"Add Sub Task"})]})}),x&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx(gu,{value:y,onChange:V=>v(V.target.value),placeholder:"Enter subtask title",className:"flex-1",onKeyDown:V=>{V.key==="Enter"?O():V.key==="Escape"&&(E(!1),v(""))}}),h.jsx(wr,{onClick:O,children:h.jsx(Ts,{})}),h.jsx(wr,{variant:"destructive",onClick:()=>{E(!1),v("")},children:h.jsx(qr,{})})]})]}),h.jsx($f,{}),h.jsxs("div",{className:"space-y-2 p-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Attachments"}),h.jsxs("div",{children:[h.jsx("input",{type:"file",id:"file-upload",multiple:!0,className:"sr-only",onChange:I}),h.jsx("label",{htmlFor:"file-upload",children:h.jsx(wr,{variant:"outline",size:"sm",asChild:!0,children:h.jsxs("span",{children:[h.jsx(vN,{}),"Upload"]})})})]})]}),T.files&&T.files.length>0?h.jsx("div",{className:"space-y-2",children:T.files.map(V=>h.jsxs("div",{className:"bg-muted flex items-center justify-between rounded-md p-2",children:[h.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[h.jsx(ix,{className:"h-4 w-4 shrink-0"}),h.jsxs("div",{className:"overflow-hidden",children:[h.jsx("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-sm hover:underline",children:V.name}),h.jsxs("span",{className:"text-muted-foreground text-xs",children:[j(V.size)," "," ",ir(new Date(V.uploadedAt),"MMM d, yyyy")]})]})]}),h.jsx(wr,{variant:"ghost",size:"sm",onClick:()=>l(T.id,V.id),className:"text-red-400!",children:h.jsx(Lf,{})})]},V.id))}):h.jsx("div",{className:"bg-muted text-muted-foreground rounded-md p-4 text-center text-sm",children:"No files attached."})]}),h.jsx($f,{}),h.jsxs("div",{className:"space-y-4 p-4",children:[h.jsxs("h4",{className:"text-sm font-medium",children:["Comments (",T.comments.length,")"]}),T.comments.length===0&&h.jsx("div",{className:"bg-muted text-muted-foreground rounded-md p-4 text-center text-sm",children:"No comments yet."}),h.jsx("div",{className:"space-y-2",children:T.comments.map(V=>h.jsxs("div",{className:"bg-muted group relative space-y-3 rounded-md p-3",children:[h.jsx("p",{className:"text-sm",children:V.text}),h.jsxs("div",{className:"text-muted-foreground flex justify-between text-xs",children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(pR,{className:"size-3"})," ",ir(new Date(V.createdAt),"PPp")]}),h.jsx("div",{className:"absolute end-2 bottom-2 flex items-center opacity-0 group-hover:opacity-100",children:h.jsx(wr,{variant:"ghost",onClick:()=>i(T.id,V.id),className:"text-red-400!",size:"sm",children:h.jsx(Lf,{className:"size-3"})})})]})]},V.id))}),h.jsxs("div",{className:"space-y-3",children:[h.jsx(I8,{placeholder:"Write your comment...",value:m,onChange:V=>g(V.target.value)}),h.jsx(wr,{onClick:k,children:"Add Comment"})]})]})]})})};function NIe({tasks:e=y5e}){const{setTodos:t,activeTab:n,isAddDialogOpen:r,setAddDialogOpen:s,isTodoSheetOpen:o,setTodoSheetOpen:i,selectedTodoId:a,setSelectedTodoId:l}=pC();w.useEffect(()=>{e&&e.length>0&&t(e)},[e,t]);const[c,u]=Me.useState(null),f=()=>{u(null),s(!0)},m=x=>{u(x),s(!0)},g=x=>{l(x),i(!0)},y=()=>{s(!1),u(null)},v=()=>{i(!1),l(null)};return h.jsxs("div",{className:"space-y-4",children:[h.jsx("header",{className:"mb-4",children:h.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Todo List"})}),h.jsx(I5e,{activeTab:n,onSelectTodo:g,onAddTodoClick:f}),h.jsx(kIe,{isOpen:r,onClose:y,editTodoId:c}),h.jsx(AIe,{isOpen:o,onClose:v,todoId:a,onEditClick:x=>{v(),m(x)}})]})}function HF({defaultView:e="kanban",onViewChange:t,className:n}){const[r,s]=w.useState(e),[o,i]=w.useState(""),[a,l]=w.useState({backlog:[{id:"1",title:"Integrate payment gateway",description:"Set up and configure payment API for handling transactions.",priority:"high",dueDate:"2024-09-20",users:[{name:"Emma",src:"",fallback:"EJ"},{name:"Daniel",src:"",fallback:"DS"}],progress:10,attachments:2,comments:4},{id:"2",title:"Redesign homepage",description:"Update the homepage with the new brand colors and hero section.",priority:"medium",dueDate:"2024-09-25",users:[{name:"Lucas",src:"",fallback:"LB"}],progress:0,attachments:1,comments:1}],inProgress:[{id:"3",title:"Dark mode implementation",description:"Allow users to switch between light and dark themes.",priority:"high",dueDate:"2024-09-18",users:[{name:"Charlie",src:"",fallback:"CW"},{name:"Ava",src:"",fallback:"AR"}],progress:40,attachments:2,comments:6},{id:"4",title:"Database optimization",description:"Improve query performance for large datasets.",priority:"medium",dueDate:"2024-09-19",users:[{name:"Liam",src:"",fallback:"LM"}],progress:55,attachments:3,comments:2}],done:[{id:"5",title:"CI/CD pipeline setup",description:"Automate deployment process using GitHub Actions.",priority:"high",dueDate:"2024-09-12",users:[{name:"Ethan",src:"",fallback:"EC"}],progress:100,attachments:2,comments:4}]}),[c]=w.useState({backlog:"Backlog",inProgress:"In Progress",done:"Done"}),[u,f]=w.useState(!1),[m,g]=w.useState(""),y=E=>{s(E),t==null||t(E)},v=E=>{const T=`col-${Date.now()}`;l(k=>({...k,[T]:[]})),g(""),f(!1)},x=w.useMemo(()=>{if(!o.trim())return a;const E={};return Object.entries(a).forEach(([T,k])=>{E[T]=k.filter(I=>{var O;return I.title.toLowerCase().includes(o.toLowerCase())||((O=I.description)==null?void 0:O.toLowerCase().includes(o.toLowerCase()))})}),E},[a,o]);return h.jsx(H1,{children:h.jsxs("div",{className:Qe("flex h-full flex-col",n),children:[h.jsxs("div",{className:"flex items-center justify-between gap-4 px-4 py-3 border-b",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx(AG,{value:r,onValueChange:E=>y(E),children:h.jsxs(NG,{className:"h-9",children:[h.jsxs(Nv,{value:"kanban",className:"gap-1.5",children:[h.jsx(sbe,{className:"size-4"}),h.jsx("span",{className:"hidden sm:inline",children:"Kanban"})]}),h.jsxs(Nv,{value:"tasks",className:"gap-1.5",children:[h.jsx(abe,{className:"size-4"}),h.jsx("span",{className:"hidden sm:inline",children:"Tasks"})]}),h.jsxs(Nv,{value:"calendar",className:"gap-1.5",children:[h.jsx(F1,{className:"size-4"}),h.jsx("span",{className:"hidden sm:inline",children:"Calendar"})]})]})})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"relative hidden md:block",children:[h.jsx(Vf,{className:"absolute left-2.5 top-2.5 size-4 text-muted-foreground"}),h.jsx(gu,{placeholder:"Search...",className:"w-[200px] pl-8",value:o,onChange:E=>i(E.target.value)})]}),h.jsxs(bw,{children:[h.jsx(yw,{asChild:!0,children:h.jsx(wr,{variant:"outline",size:"icon",children:h.jsx(Vq,{className:"size-4"})})}),h.jsxs(vw,{align:"end",className:"w-48",children:[h.jsx(v_e,{children:"Filter by"}),h.jsx(c$,{}),h.jsx(au,{children:"High Priority"}),h.jsx(au,{children:"Medium Priority"}),h.jsx(au,{children:"Low Priority"}),h.jsx(c$,{}),h.jsx(au,{children:"Due Today"}),h.jsx(au,{children:"Overdue"})]})]}),r==="kanban"&&h.jsxs(eY,{open:u,onOpenChange:f,children:[h.jsx(ZEe,{asChild:!0,children:h.jsxs(wr,{size:"sm",children:[h.jsx(Hf,{className:"size-4 mr-1"}),h.jsx("span",{className:"hidden sm:inline",children:"Add Column"})]})}),h.jsxs(tY,{className:"sm:max-w-[425px]",children:[h.jsx(nY,{children:h.jsx(rY,{children:"Add New Column"})}),h.jsxs("div",{className:"mt-4 flex gap-2",children:[h.jsx(gu,{value:m,onChange:E=>g(E.target.value),placeholder:"Enter column name...",autoFocus:!0,onKeyDown:E=>{E.key==="Enter"&&m.trim()&&v(m.trim())}}),h.jsx(wr,{size:"icon",disabled:!m.trim(),onClick:()=>v(m.trim()),children:h.jsx(Ts,{className:"size-4"})})]})]})]})]})]}),h.jsxs("div",{className:"flex-1 overflow-hidden",children:[r==="kanban"&&h.jsx("div",{className:"h-full overflow-x-auto p-4",children:h.jsxs(mTe,{value:x,onValueChange:l,getItemValue:E=>E.id,children:[h.jsx(vK,{className:"flex gap-4 pb-4",children:Object.entries(x).map(([E,T])=>h.jsxs(xK,{value:E,className:"w-[320px] min-w-[320px] shrink-0",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-semibold",children:c[E]||E}),h.jsx(Ec,{variant:"secondary",className:"text-xs",children:T.length})]}),h.jsxs("div",{className:"flex",children:[h.jsx(wK,{asChild:!0,children:h.jsx(wr,{variant:"ghost",size:"icon",className:"size-8",children:h.jsx(X1e,{className:"size-4"})})}),h.jsxs(V1,{children:[h.jsx(q1,{asChild:!0,children:h.jsx(wr,{variant:"ghost",size:"icon",className:"size-8",children:h.jsx(Lq,{className:"size-4"})})}),h.jsx(cm,{children:"Add Task"})]})]})]}),T.length>0?h.jsx("div",{className:"flex flex-col gap-2",children:T.map(k=>h.jsx(EK,{value:k.id,asHandle:!0,asChild:!0,children:h.jsxs(TN,{className:"cursor-grab active:cursor-grabbing border-0 shadow-sm",children:[h.jsxs(Fve,{className:"p-3 pb-2",children:[h.jsx(Bve,{className:"text-sm font-medium line-clamp-2",children:k.title}),k.description&&h.jsx(zve,{className:"text-xs line-clamp-2",children:k.description})]}),h.jsxs(CN,{className:"p-3 pt-0 space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex -space-x-1.5",children:[k.users.slice(0,3).map((I,O)=>h.jsxs(PL,{className:"size-6 border-2 border-background",children:[I.src&&h.jsx(Qve,{src:I.src,alt:I.alt}),h.jsx(LL,{className:"text-[10px]",children:I.fallback})]},O)),k.users.length>3&&h.jsx(PL,{className:"size-6 border-2 border-background",children:h.jsxs(LL,{className:"text-[10px]",children:["+",k.users.length-3]})})]}),h.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[h.jsx(A_e,{value:k.progress,className:"w-12 h-1.5"}),h.jsxs("span",{children:[k.progress,"%"]})]})]}),h.jsx($f,{}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(Ec,{variant:k.priority==="high"?"destructive":k.priority==="medium"?"default":"secondary",className:"text-[10px] capitalize",children:k.priority}),h.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground",children:[k.attachments?h.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[h.jsx(Tbe,{className:"size-3"}),h.jsx("span",{children:k.attachments})]}):null,k.comments?h.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[h.jsx(jq,{className:"size-3"}),h.jsx("span",{children:k.comments})]}):null]})]})]})]})},k.id))}):h.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-8 text-center",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"No tasks yet"}),h.jsxs(wr,{variant:"outline",size:"sm",children:[h.jsx(Hf,{className:"size-4 mr-1"}),"Add Task"]})]})]},E))}),h.jsx(wTe,{children:h.jsx("div",{className:"bg-primary/10 size-full rounded-md"})})]})}),r==="tasks"&&h.jsx("div",{className:"h-full overflow-auto",children:h.jsx(NIe,{})}),r==="calendar"&&h.jsx("div",{className:"h-full overflow-auto p-4",children:h.jsx(uCe,{})})]})]})})}function Qi(e){this.content=e}Qi.prototype={constructor:Qi,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,s=r.find(e),o=r.content.slice();return s==-1?o.push(n||e,t):(o[s+1]=t,n&&(o[s]=n)),new Qi(o)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Qi(n)},addToStart:function(e,t){return new Qi([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Qi(n)},addBefore:function(e,t,n){var r=this.remove(t),s=r.content.slice(),o=r.find(e);return s.splice(o==-1?s.length:o,0,t,n),new Qi(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Qi.from(e),e.size?new Qi(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Qi.from(e),e.size?new Qi(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Qi.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Qi.from=function(e){if(e instanceof Qi)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Qi(t)};function iX(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let s=e.child(r),o=t.child(r);if(s==o){n+=s.nodeSize;continue}if(!s.sameMarkup(o))return n;if(s.isText&&s.text!=o.text){for(let i=0;s.text[i]==o.text[i];i++)n++;return n}if(s.content.size||o.content.size){let i=iX(s.content,o.content,n+1);if(i!=null)return i}n+=s.nodeSize}}function aX(e,t,n,r){for(let s=e.childCount,o=t.childCount;;){if(s==0||o==0)return s==o?null:{a:n,b:r};let i=e.child(--s),a=t.child(--o),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=aX(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class pt{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,s=0,o){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>t&&r(l,s+a,o||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,n-u),r,s+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,s){let o="",i=!0;return this.nodesBetween(t,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:o+=r),o+=c},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,s=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),o=1);o<t.content.length;o++)s.push(t.content[o]);return new pt(s,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],s=0;if(n>t)for(let o=0,i=0;i<n;o++){let a=this.content[o],l=i+a.nodeSize;l>t&&((i<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,t-i-1),Math.min(a.content.size,n-i-1))),r.push(a),s+=a.nodeSize),i=l}return new pt(r,s)}cutByIndex(t,n){return t==n?pt.empty:t==0&&n==this.content.length?this:new pt(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let s=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return s[t]=n,new pt(s,o)}addToStart(t){return new pt([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new pt(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];t(s,r,n),r+=s.nodeSize}}findDiffStart(t,n=0){return iX(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return aX(this,t,n,r)}findIndex(t){if(t==0)return S2(0,t);if(t==this.size)return S2(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),o=r+s.nodeSize;if(o>=t)return o==t?S2(n+1,o):S2(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return pt.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new pt(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return pt.empty;let n,r=0;for(let s=0;s<t.length;s++){let o=t[s];r+=o.nodeSize,s&&o.isText&&t[s-1].sameMarkup(o)?(n||(n=t.slice(0,s)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new pt(n||t,r)}static from(t){if(!t)return pt.empty;if(t instanceof pt)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new pt([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}pt.empty=new pt([],0);const a5={index:0,offset:0};function S2(e,t){return a5.index=e,a5.offset=t,a5}function HS(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!HS(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!HS(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let js=class p6{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let s=0;s<t.length;s++){let o=t[s];if(this.eq(o))return t;if(this.type.excludes(o.type))n||(n=t.slice(0,s));else{if(o.type.excludes(this.type))return t;!r&&o.type.rank>this.type.rank&&(n||(n=t.slice(0,s)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&HS(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return p6.none;if(t instanceof p6)return[t];let n=t.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};js.none=[];class VS extends Error{}class Yt{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=cX(this.content,t+this.openStart,n);return r&&new Yt(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Yt(lX(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Yt.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Yt(pt.fromJSON(t,n.content),r,s)}static maxOpen(t,n=!0){let r=0,s=0;for(let o=t.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=t.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)s++;return new Yt(t,r,s)}}Yt.empty=new Yt(pt.empty,0,0);function lX(e,t,n){let{index:r,offset:s}=e.findIndex(t),o=e.maybeChild(r),{index:i,offset:a}=e.findIndex(n);if(s==t||o.isText){if(a!=n&&!e.child(i).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(lX(o.content,t-s-1,n-s-1)))}function cX(e,t,n,r){let{index:s,offset:o}=e.findIndex(t),i=e.maybeChild(s);if(o==t||i.isText)return r&&!r.canReplace(s,s,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=cX(i.content,t-o-1,n,i);return a&&e.replaceChild(s,i.copy(a))}function IIe(e,t,n){if(n.openStart>e.depth)throw new VS("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new VS("Inconsistent open depths");return uX(e,t,n,0)}function uX(e,t,n,r){let s=e.index(r),o=e.node(r);if(s==t.index(r)&&r<e.depth-n.openStart){let i=uX(e,t,n,r+1);return o.copy(o.content.replaceChild(s,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let i=e.parent,a=i.content;return em(i,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:i,end:a}=RIe(n,e);return em(o,fX(e,i,a,t,r))}else return em(o,qS(e,t,r))}function dX(e,t){if(!t.type.compatibleContent(e.type))throw new VS("Cannot join "+t.type.name+" onto "+e.type.name)}function m6(e,t,n){let r=e.node(n);return dX(r,t.node(n)),r}function Qp(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Lv(e,t,n,r){let s=(t||e).node(n),o=0,i=t?t.index(n):s.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(Qp(e.nodeAfter,r),o++));for(let a=o;a<i;a++)Qp(s.child(a),r);t&&t.depth==n&&t.textOffset&&Qp(t.nodeBefore,r)}function em(e,t){return e.type.checkContent(t),e.copy(t)}function fX(e,t,n,r,s){let o=e.depth>s&&m6(e,t,s+1),i=r.depth>s&&m6(n,r,s+1),a=[];return Lv(null,e,s,a),o&&i&&t.index(s)==n.index(s)?(dX(o,i),Qp(em(o,fX(e,t,n,r,s+1)),a)):(o&&Qp(em(o,qS(e,t,s+1)),a),Lv(t,n,s,a),i&&Qp(em(i,qS(n,r,s+1)),a)),Lv(r,null,s,a),new pt(a)}function qS(e,t,n){let r=[];if(Lv(null,e,n,r),e.depth>n){let s=m6(e,t,n+1);Qp(em(s,qS(e,t,n+1)),r)}return Lv(t,null,n,r),new pt(r)}function RIe(e,t){let n=t.depth-e.openStart,s=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)s=t.node(o).copy(pt.from(s));return{start:s.resolveNoCache(e.openStart+n),end:s.resolveNoCache(s.content.size-e.openEnd-n)}}class Nx{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=t.child(n);return r?t.child(n).cut(r):s}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let o=0;o<t;o++)s+=r.child(o).nodeSize;return s}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return js.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),s=t.maybeChild(n);if(!r){let a=r;r=s,s=a}let o=r.marks;for(var i=0;i<o.length;i++)o[i].type.spec.inclusive===!1&&(!s||!o[i].isInSet(s.marks))&&(o=o[i--].removeFromSet(o));return o}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=t.parent.maybeChild(t.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new GS(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,o=n;for(let i=t;;){let{index:a,offset:l}=i.content.findIndex(o),c=o-l;if(r.push(i,a,s+l),!c||(i=i.child(a),i.isText))break;o=c-1,s+=l+1}return new Nx(n,r,o)}static resolveCached(t,n){let r=VF.get(t);if(r)for(let o=0;o<r.elts.length;o++){let i=r.elts[o];if(i.pos==n)return i}else VF.set(t,r=new MIe);let s=r.elts[r.i]=Nx.resolve(t,n);return r.i=(r.i+1)%OIe,s}}class MIe{constructor(){this.elts=[],this.i=0}}const OIe=12,VF=new WeakMap;class GS{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const DIe=Object.create(null);let Ff=class g6{constructor(t,n,r,s=js.none){this.type=t,this.attrs=n,this.marks=s,this.content=r||pt.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,s=0){this.content.nodesBetween(t,n,r,s,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,s){return this.content.textBetween(t,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&HS(this.attrs,n||t.defaultAttrs||DIe)&&js.sameSet(this.marks,r||js.none)}copy(t=null){return t==this.content?this:new g6(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new g6(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Yt.empty;let s=this.resolve(t),o=this.resolve(n),i=r?0:s.sharedDepth(n),a=s.start(i),c=s.node(i).content.cut(s.pos-a,o.pos-a);return new Yt(c,s.depth-i,o.depth-i)}replace(t,n,r){return IIe(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(s==t||n.isText)return n;t-=s+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(t){return Nx.resolveCached(this,t)}resolveNoCache(t){return Nx.resolve(this,t)}rangeHasMark(t,n,r){let s=!1;return n>t&&this.nodesBetween(t,n,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),hX(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=pt.empty,s=0,o=r.childCount){let i=this.contentMatchAt(t).matchFragment(r,s,o),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=s;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(t).matchType(r),i=o&&o.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=js.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!js.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let s=pt.fromJSON(t,n.content),o=t.nodeType(n.type).create(n.attrs,s,r);return o.type.checkAttrs(o.attrs),o}};Ff.prototype.text=void 0;let PIe=class b6 extends Ff{constructor(t,n,r,s){if(super(t,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):hX(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new b6(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new b6(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}};function hX(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class gm{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new LIe(t,n);if(r.next==null)return gm.empty;let s=pX(r);r.next&&r.err("Unexpected trailing text");let o=HIe(UIe(s));return VIe(o,r),o}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let s=this;for(let o=n;s&&o<r;o++)s=s.matchType(t.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let s=[this];function o(i,a){let l=i.matchFragment(t,r);if(l&&(!n||l.validEnd))return pt.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:f}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(f)==-1){s.push(f);let m=o(f,a.concat(u));if(m)return m}}return null}return o(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(t)){let i=[];for(let a=s;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<o.next.length;i++){let{type:a,next:l}=o.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let s=0;s<r.next.length;s++)t.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),t.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)o+=(i?", ":"")+r.next[i].type.name+"->"+t.indexOf(r.next[i].next);return o}).join(`
`)}}gm.empty=new gm(!0);class LIe{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function pX(e){let t=[];do t.push($Ie(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function $Ie(e){let t=[];do t.push(FIe(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function FIe(e){let t=jIe(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=BIe(e,t);else break;return t}function qF(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function BIe(e,t){let n=qF(e),r=n;return e.eat(",")&&(e.next!="}"?r=qF(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function zIe(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let s=[];for(let o in n){let i=n[o];i.isInGroup(t)&&s.push(i)}return s.length==0&&e.err("No node type or group '"+t+"' found"),s}function jIe(e){if(e.eat("(")){let t=pX(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=zIe(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function UIe(e){let t=[[]];return s(o(e,0),n()),t;function n(){return t.push([])-1}function r(i,a,l){let c={term:l,to:a};return t[i].push(c),c}function s(i,a){i.forEach(l=>l.to=a)}function o(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=o(i.exprs[l],a);if(l==i.exprs.length-1)return c;s(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),s(o(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return s(o(i.expr,a),l),s(o(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(o(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=n();s(o(i.expr,l),u),l=u}if(i.max==-1)s(o(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=n();r(l,u),s(o(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function mX(e,t){return t-e}function GF(e,t){let n=[];return r(t),n.sort(mX);function r(s){let o=e[s];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(s);for(let i=0;i<o.length;i++){let{term:a,to:l}=o[i];!a&&n.indexOf(l)==-1&&r(l)}}}function HIe(e){let t=Object.create(null);return n(GF(e,0));function n(r){let s=[];r.forEach(i=>{e[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);GF(e,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=t[r.join(",")]=new gm(r.indexOf(e.length-1)>-1);for(let i=0;i<s.length;i++){let a=s[i][1].sort(mX);o.next.push({type:s[i][0],next:t[a.join(",")]||n(a)})}return o}}function VIe(e,t){for(let n=0,r=[e];n<r.length;n++){let s=r[n],o=!s.validEnd,i=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];i.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function gX(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function bX(e,t){let n=Object.create(null);for(let r in e){let s=t&&t[r];if(s===void 0){let o=e[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function yX(e,t,n,r){for(let s in t)if(!(s in e))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in e){let o=e[s];o.validate&&o.validate(t[s])}}function vX(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new GIe(e,r,t[r]);return n}let WF=class xX{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=vX(t,r.attrs),this.defaultAttrs=gX(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==gm.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:bX(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ff(this,this.computeAttrs(t),pt.from(n),js.setFrom(r))}createChecked(t=null,n,r){return n=pt.from(n),this.checkContent(n),new Ff(this,this.computeAttrs(t),n,js.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=pt.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let s=this.contentMatch.matchFragment(n),o=s&&s.fillBefore(pt.empty,!0);return o?new Ff(this,t,n.append(o),js.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){yX(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:js.none:t}static compile(t,n){let r=Object.create(null);t.forEach((o,i)=>r[o]=new xX(o,n,i));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function qIe(e,t,n){let r=n.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${o}`)}}class GIe{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?qIe(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class vC{constructor(t,n,r,s){this.name=t,this.rank=n,this.schema=r,this.spec=s,this.attrs=vX(t,s.attrs),this.excluded=null;let o=gX(this.attrs);this.instance=o?new js(this,o):null}create(t=null){return!t&&this.instance?this.instance:new js(this,bX(this.attrs,t))}static compile(t,n){let r=Object.create(null),s=0;return t.forEach((o,i)=>r[o]=new vC(o,s++,n,i)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){yX(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let J8=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in t)n[s]=t[s];n.nodes=Qi.from(t.nodes),n.marks=Qi.from(t.marks||{}),this.nodes=WF.compile(this.spec.nodes,this),this.marks=vC.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],i=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[i]||(r[i]=gm.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?YF(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],i=o.spec.excludes;o.excluded=i==null?[o]:i==""?[]:YF(this,i.split(" "))}this.nodeFromJSON=s=>Ff.fromJSON(this,s),this.markFromJSON=s=>js.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,s){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof WF){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,s)}text(t,n){let r=this.nodes.text;return new PIe(r,r.defaultAttrs,t,js.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function YF(e,t){let n=[];for(let r=0;r<t.length;r++){let s=t[r],o=e.marks[s],i=o;if(o)n.push(o);else for(let a in e.marks){let l=e.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function WIe(e){return e.tag!=null}function YIe(e){return e.style!=null}let g0=class y6{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(WIe(s))this.tags.push(s);else if(YIe(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=t.nodes[s.node];return o.contentMatch.matchType(o)})}parse(t,n={}){let r=new ZF(this,n,!1);return r.addAll(t,js.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new ZF(this,n,!0);return r.addAll(t,js.none,n.from,n.to),Yt.maxOpen(r.finish())}matchTag(t,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(JIe(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let i=o.getAttrs(t);if(i===!1)continue;o.attrs=i||void 0}return o}}}matchStyle(t,n,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let i=this.styles[o],a=i.style;if(!(a.indexOf(t)!=0||i.context&&!r.matchesContext(i.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(t){let n=[];function r(s){let o=s.priority==null?50:s.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<o)break}n.splice(i,0,s)}for(let s in t.marks){let o=t.marks[s].spec.parseDOM;o&&o.forEach(i=>{r(i=JF(i)),i.mark||i.ignore||i.clearMark||(i.mark=s)})}for(let s in t.nodes){let o=t.nodes[s].spec.parseDOM;o&&o.forEach(i=>{r(i=JF(i)),i.node||i.ignore||i.mark||(i.node=s)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new y6(t,y6.schemaRules(t)))}};const wX={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},KIe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},EX={ol:!0,ul:!0},Ix=1,v6=2,$v=4;function KF(e,t,n){return t!=null?(t?Ix:0)|(t==="full"?v6:0):e&&e.whitespace=="pre"?Ix|v6:n&~$v}class T2{constructor(t,n,r,s,o,i){this.type=t,this.attrs=n,this.marks=r,this.solid=s,this.options=i,this.content=[],this.activeMarks=js.none,this.match=o||(i&$v?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(pt.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(t.type))?(this.match=r,s):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Ix)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let n=pt.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(pt.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!wX.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class ZF{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,o,i=KF(null,n.preserveWhitespace,0)|(r?$v:0);s?o=new T2(s.type,s.attrs,js.none,!0,n.topMatch||s.type.contentMatch,i):r?o=new T2(null,null,js.none,!0,null,i):o=new T2(t.schema.topNodeType,null,js.none,!0,null,i),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,s=this.top,o=s.options&v6?"full":this.localPreserveWS||(s.options&Ix)>0,{schema:i}=this.parser;if(o==="full"||s.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(i.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(i.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(i.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(i.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=s.content[s.content.length-1],l=t.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(i.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let s=this.localPreserveWS,o=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let i=t.nodeName.toLowerCase(),a;EX.hasOwnProperty(i)&&this.parser.normalizeLists&&ZIe(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:KIe.hasOwnProperty(i))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,u=this.needsBlock;if(wX.hasOwnProperty(i))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let f=l&&l.skip?n:this.readStyles(t,n);f&&this.addAll(t,f),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(t,n);c&&this.addElementByRule(t,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],i=r.getPropertyValue(o);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(o,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,r,s){let o,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(t);else if(s)this.addElement(t,r,s);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}o&&this.sync(a)&&this.open--}addAll(t,n,r,s){let o=r||0;for(let i=r?t.childNodes[r]:t.firstChild,a=s==null?null:t.childNodes[s];i!=a;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i,n);this.findAtPoint(t,o)}findPlace(t,n,r){let s,o;for(let i=this.open,a=0;i>=0;i--){let l=this.nodes[i],c=l.findWrapping(t);if(c&&(!s||s.length>c.length+a)&&(s=c,o=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!s)return null;this.sync(o);for(let i=0;i<s.length;i++)n=this.enterInner(s[i],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let s=this.findPlace(t,n,r);if(s){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(t.type));let i=js.none;for(let a of s.concat(t.marks))(o.type?o.type.allowsMarkType(a.type):XF(a.type,t.type))&&(i=a.addToSet(i));return o.content.push(t.mark(i)),!0}return!1}enter(t,n,r,s){let o=this.findPlace(t.create(n),r,!1);return o&&(o=this.enterInner(t,n,r,!0,s)),o}enterInner(t,n,r,s=!1,o){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(t);let a=KF(t,o,i.options);i.options&$v&&i.content.length==0&&(a|=$v);let l=js.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):XF(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new T2(t,n,l,s,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Ix)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)t+=r[s].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&t.nodeType==1&&t.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function ZIe(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&EX.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function JIe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function JF(e){let t={};for(let n in e)t[n]=e[n];return t}function XF(e,t){let n=t.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(e))continue;let o=[],i=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||o.indexOf(u)<0&&i(u))return!0}};if(i(s.contentMatch))return!0}}class Pm{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=l5(n).createDocumentFragment());let s=r,o=[];return t.forEach(i=>{if(o.length||i.marks.length){let a=0,l=0;for(;a<o.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)s=o.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,n);u&&(o.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:s}=R_(l5(n),this.nodes[t.type.name](t),null,t.attrs);if(s){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,s)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let s=t.marks.length-1;s>=0;s--){let o=this.serializeMark(t.marks[s],t.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(t,n,r={}){let s=this.marks[t.type.name];return s&&R_(l5(r),s(t,n),null,t.attrs)}static renderSpec(t,n,r=null,s){return R_(t,n,r,s)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Pm(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=QF(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return QF(t.marks)}}function QF(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function l5(e){return e.document||window.document}const eB=new WeakMap;function XIe(e){let t=eB.get(e);return t===void 0&&eB.set(e,t=QIe(e)),t}function QIe(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(e),t}function R_(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let s=t[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=XIe(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=s.indexOf(" ");i>0&&(n=s.slice(0,i),s=s.slice(i+1));let a,l=n?e.createElementNS(n,s):e.createElement(s),c=t[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let m=f.indexOf(" ");m>0?l.setAttributeNS(f.slice(0,m),f.slice(m+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=u;f<t.length;f++){let m=t[f];if(m===0){if(f<t.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:g,contentDOM:y}=R_(e,m,n,r);if(l.appendChild(g),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:l,contentDOM:a}}const _X=65535,SX=Math.pow(2,16);function eRe(e,t){return e+t*SX}function tB(e){return e&_X}function tRe(e){return(e-(e&_X))/SX}const TX=1,CX=2,M_=4,kX=8;class x6{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&kX)>0}get deletedBefore(){return(this.delInfo&(TX|M_))>0}get deletedAfter(){return(this.delInfo&(CX|M_))>0}get deletedAcross(){return(this.delInfo&M_)>0}}class Vl{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&Vl.empty)return Vl.empty}recover(t){let n=0,r=tB(t);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+tRe(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let s=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>t)break;let c=this.ranges[a+o],u=this.ranges[a+i],f=l+c;if(t<=f){let m=c?t==l?-1:t==f?1:n:n,g=l+s+(m<0?0:u);if(r)return g;let y=t==(n<0?l:f)?null:eRe(a/3,t-l),v=t==l?CX:t==f?TX:M_;return(n<0?t!=l:t!=f)&&(v|=kX),new x6(g,v,y)}s+=u-c}return r?t+s:new x6(t+s,0,null)}touches(t,n){let r=0,s=tB(n),o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+o],u=l+c;if(t<=u&&a==s*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let i=this.ranges[s],a=i-(this.inverted?o:0),l=i+(this.inverted?0:o),c=this.ranges[s+n],u=this.ranges[s+r];t(a,a+c,l,l+u),o+=u-c}}invert(){return new Vl(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Vl.empty:new Vl(t<0?[0,-t,0]:[0,0,t])}}Vl.empty=new Vl([]);class Rx{constructor(t,n,r=0,s=t?t.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Rx(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let s=t.getMirror(n);this.appendMap(t._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let s=t.getMirror(n);this.appendMap(t._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let t=new Rx;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let s=0;for(let o=this.from;o<this.to;o++){let i=this._maps[o],a=i.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,t=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,t=a.pos}return r?t:new x6(t,s,null)}}const c5=Object.create(null);class va{getMap(){return Vl.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=c5[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in c5)throw new RangeError("Duplicate use of step JSON ID "+t);return c5[t]=n,n.prototype.jsonID=t,n}}class di{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new di(t,null)}static fail(t){return new di(null,t)}static fromReplace(t,n,r,s){try{return di.ok(t.replace(n,r,s))}catch(o){if(o instanceof VS)return di.fail(o.message);throw o}}}function X8(e,t,n){let r=[];for(let s=0;s<e.childCount;s++){let o=e.child(s);o.content.size&&(o=o.copy(X8(o.content,t,o))),o.isInline&&(o=t(o,n,s)),r.push(o)}return pt.fromArray(r)}class i0 extends va{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new Yt(X8(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),s),n.openStart,n.openEnd);return di.fromReplace(t,this.from,this.to,o)}invert(){return new kc(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new i0(n.pos,r.pos,this.mark)}merge(t){return t instanceof i0&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new i0(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new i0(n.from,n.to,t.markFromJSON(n.mark))}}va.jsonID("addMark",i0);class kc extends va{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Yt(X8(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),t),n.openStart,n.openEnd);return di.fromReplace(t,this.from,this.to,r)}invert(){return new i0(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new kc(n.pos,r.pos,this.mark)}merge(t){return t instanceof kc&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new kc(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new kc(n.from,n.to,t.markFromJSON(n.mark))}}va.jsonID("removeMark",kc);class a0 extends va{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return di.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return di.fromReplace(t,this.pos,this.pos+1,new Yt(pt.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new a0(this.pos,n.marks[s]);return new a0(this.pos,this.mark)}}return new bm(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new a0(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new a0(n.pos,t.markFromJSON(n.mark))}}va.jsonID("addNodeMark",a0);class bm extends va{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return di.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return di.fromReplace(t,this.pos,this.pos+1,new Yt(pt.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new a0(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new bm(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new bm(n.pos,t.markFromJSON(n.mark))}}va.jsonID("removeNodeMark",bm);class ci extends va{constructor(t,n,r,s=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=s}apply(t){return this.structure&&w6(t,this.from,this.to)?di.fail("Structure replace would overwrite content"):di.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Vl([this.from,this.to-this.from,this.slice.size])}invert(t){return new ci(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ci(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof ci)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Yt.empty:new Yt(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new ci(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Yt.empty:new Yt(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new ci(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ci(n.from,n.to,Yt.fromJSON(t,n.slice),!!n.structure)}}va.jsonID("replace",ci);class Ai extends va{constructor(t,n,r,s,o,i,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=i,this.structure=a}apply(t){if(this.structure&&(w6(t,this.from,this.gapFrom)||w6(t,this.gapTo,this.to)))return di.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return di.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?di.fromReplace(t,this.from,this.to,r):di.fail("Content does not fit in gap")}getMap(){return new Vl([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new Ai(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||o>r.pos?null:new Ai(n.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ai(n.from,n.to,n.gapFrom,n.gapTo,Yt.fromJSON(t,n.slice),n.insert,!!n.structure)}}va.jsonID("replaceAround",Ai);function w6(e,t,n){let r=e.resolve(t),s=n-t,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let i=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,s--}}return!1}function nRe(e,t,n,r){let s=[],o=[],i,a;e.doc.nodesBetween(t,n,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let m=Math.max(c,t),g=Math.min(c+l.nodeSize,n),y=r.addToSet(f);for(let v=0;v<f.length;v++)f[v].isInSet(y)||(i&&i.to==m&&i.mark.eq(f[v])?i.to=g:s.push(i=new kc(m,g,f[v])));a&&a.to==m?a.to=g:o.push(a=new i0(m,g,r))}}),s.forEach(l=>e.step(l)),o.forEach(l=>e.step(l))}function rRe(e,t,n,r){let s=[],o=0;e.doc.nodesBetween(t,n,(i,a)=>{if(!i.isInline)return;o++;let l=null;if(r instanceof vC){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let u=0;u<l.length;u++){let f=l[u],m;for(let g=0;g<s.length;g++){let y=s[g];y.step==o-1&&f.eq(s[g].style)&&(m=y)}m?(m.to=c,m.step=o):s.push({style:f,from:Math.max(a,t),to:c,step:o})}}}),s.forEach(i=>e.step(new kc(i.from,i.to,i.style)))}function Q8(e,t,n,r=n.contentMatch,s=!0){let o=e.doc.nodeAt(t),i=[],a=t+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=a+c.nodeSize,f=r.matchType(c.type);if(!f)i.push(new ci(a,u,Yt.empty));else{r=f;for(let m=0;m<c.marks.length;m++)n.allowsMarkType(c.marks[m].type)||e.step(new kc(a,u,c.marks[m]));if(s&&c.isText&&n.whitespace!="pre"){let m,g=/\r?\n|\r/g,y;for(;m=g.exec(c.text);)y||(y=new Yt(pt.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new ci(a+m.index,a+m.index+m[0].length,y))}}a=u}if(!r.validEnd){let l=r.fillBefore(pt.empty,!0);e.replace(a,a,new Yt(l,0,0))}for(let l=i.length-1;l>=0;l--)e.step(i[l])}function sRe(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Lm(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,s=0,o=0;;--r){let i=e.$from.node(r),a=e.$from.index(r)+s,l=e.$to.indexAfter(r)-o;if(r<e.depth&&i.canReplace(a,l,n))return r;if(r==0||i.type.spec.isolating||!sRe(i,a,l))break;a&&(s=1),l<i.childCount&&(o=1)}return null}function oRe(e,t,n){let{$from:r,$to:s,depth:o}=t,i=r.before(o+1),a=s.after(o+1),l=i,c=a,u=pt.empty,f=0;for(let y=o,v=!1;y>n;y--)v||r.index(y)>0?(v=!0,u=pt.from(r.node(y).copy(u)),f++):l--;let m=pt.empty,g=0;for(let y=o,v=!1;y>n;y--)v||s.after(y+1)<s.end(y)?(v=!0,m=pt.from(s.node(y).copy(m)),g++):c++;e.step(new Ai(l,c,i,a,new Yt(u.append(m),f,g),u.size-f,!0))}function e7(e,t,n=null,r=e){let s=iRe(e,t),o=s&&aRe(r,t);return o?s.map(nB).concat({type:t,attrs:n}).concat(o.map(nB)):null}function nB(e){return{type:e,attrs:null}}function iRe(e,t){let{parent:n,startIndex:r,endIndex:s}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let i=o.length?o[0]:t;return n.canReplaceWith(r,s,i)?o:null}function aRe(e,t){let{parent:n,startIndex:r,endIndex:s}=e,o=n.child(r),i=t.contentMatch.findWrapping(o.type);if(!i)return null;let l=(i.length?i[i.length-1]:t).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function lRe(e,t,n){let r=pt.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=pt.from(n[i].type.create(n[i].attrs,r))}let s=t.start,o=t.end;e.step(new Ai(s,o,s,o,new Yt(r,0,0),n.length,!0))}function cRe(e,t,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,(i,a)=>{let l=typeof s=="function"?s(i):s;if(i.isTextblock&&!i.hasMarkup(r,l)&&uRe(e.doc,e.mapping.slice(o).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let g=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);g&&!y?c=!1:!g&&y&&(c=!0)}c===!1&&NX(e,i,a,o),Q8(e,e.mapping.slice(o).map(a,1),r,void 0,c===null);let u=e.mapping.slice(o),f=u.map(a,1),m=u.map(a+i.nodeSize,1);return e.step(new Ai(f,m,f+1,m-1,new Yt(pt.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&AX(e,i,a,o),!1}})}function AX(e,t,n,r){t.forEach((s,o)=>{if(s.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(s.text);){let l=e.mapping.slice(r).map(n+1+o+i.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function NX(e,t,n,r){t.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+o);e.replaceWith(i,i+1,t.type.schema.text(`
`))}})}function uRe(e,t,n){let r=e.resolve(t),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function dRe(e,t,n,r,s){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let i=n.create(r,null,s||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,i);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Ai(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new Yt(pt.from(i),0,0),1,!0))}function Yl(e,t,n=1,r){let s=e.resolve(t),o=s.depth-n,i=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!i.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=n-2;c>o;c--,u--){let f=s.node(c),m=s.index(c);if(f.type.spec.isolating)return!1;let g=f.content.cutByIndex(m,f.childCount),y=r&&r[u+1];y&&(g=g.replaceChild(0,y.type.create(y.attrs)));let v=r&&r[u]||f;if(!f.canReplace(m+1,f.childCount)||!v.type.validContent(g))return!1}let a=s.indexAfter(o),l=r&&r[0];return s.node(o).canReplaceWith(a,a,l?l.type:s.node(o+1).type)}function fRe(e,t,n=1,r){let s=e.doc.resolve(t),o=pt.empty,i=pt.empty;for(let a=s.depth,l=s.depth-n,c=n-1;a>l;a--,c--){o=pt.from(s.node(a).copy(o));let u=r&&r[c];i=pt.from(u?u.type.create(u.attrs,i):s.node(a).copy(i))}e.step(new ci(t,t,new Yt(o.append(i),n,n),!0))}function Sd(e,t){let n=e.resolve(t),r=n.index();return IX(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function hRe(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let s=0;s<t.childCount;s++){let o=t.child(s),i=o.type==r?e.type.schema.nodes.text:o.type;if(n=n.matchType(i),!n||!e.type.allowsMarks(o.marks))return!1}return n.validEnd}function IX(e,t){return!!(e&&t&&!e.isLeaf&&hRe(e,t))}function Nb(e,t,n=-1){let r=e.resolve(t);for(let s=r.depth;;s--){let o,i,a=r.index(s);if(s==r.depth?(o=r.nodeBefore,i=r.nodeAfter):n>0?(o=r.node(s+1),a++,i=r.node(s).maybeChild(a)):(o=r.node(s).maybeChild(a-1),i=r.node(s+1)),o&&!o.isTextblock&&IX(o,i)&&r.node(s).canReplace(a,a+1))return t;if(s==0)break;t=n<0?r.before(s):r.after(s)}}function pRe(e,t,n){let r=null,{linebreakReplacement:s}=e.doc.type.schema,o=e.doc.resolve(t-n),i=o.node().type;if(s&&i.inlineContent){let u=i.whitespace=="pre",f=!!i.contentMatch.matchType(s);u&&!f?r=!1:!u&&f&&(r=!0)}let a=e.steps.length;if(r===!1){let u=e.doc.resolve(t+n);NX(e,u.node(),u.before(),a)}i.inlineContent&&Q8(e,t+n-1,i,o.node().contentMatchAt(o.index()),r==null);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new ci(c,l.map(t+n,-1),Yt.empty,!0)),r===!0){let u=e.doc.resolve(c);AX(e,u.node(),u.before(),e.steps.length)}return e}function mRe(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,n))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,n))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function RX(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let s=n.content;for(let o=0;o<n.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(o==1)u=c.canReplace(l,l,s);else{let f=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function xC(e,t,n=t,r=Yt.empty){if(t==n&&!r.size)return null;let s=e.resolve(t),o=e.resolve(n);return MX(s,o,r)?new ci(t,n,r):new gRe(s,o,r).fit()}function MX(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class gRe{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=pt.empty;for(let s=0;s<=t.depth;s++){let o=t.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(s))})}for(let s=t.depth;s>0;s--)this.placed=pt.from(t.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(t<0?this.$to:r.doc.resolve(t));if(!s)return null;let o=this.placed,i=r.depth,a=s.depth;for(;i&&a&&o.childCount==1;)o=o.firstChild.content,i--,a--;let l=new Yt(o,i,a);return t>-1?new Ai(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ci(r.pos,s.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<t;r++){let o=n.firstChild;if(n.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){t=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=u5(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let i=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(n==1&&(i?c.matchType(i.type)||(f=c.fillBefore(pt.from(i),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:f};if(n==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=u5(t,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Yt(t,n+1,Math.max(r,s.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=u5(t,n);if(s.childCount<=1&&n>0){let o=t.size-n<=n+s.size;this.unplaced=new Yt(gv(t,n-1,1),n-1,o?n-1:r)}else this.unplaced=new Yt(gv(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:s,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let v=0;v<o.length;v++)this.openFrontierNode(o[v]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-t,c=0,u=[],{match:f,type:m}=this.frontier[n];if(s){for(let v=0;v<s.childCount;v++)u.push(s.child(v));f=f.matchFragment(s)}let g=a.size+t-(i.content.size-i.openEnd);for(;c<a.childCount;){let v=a.child(c),x=f.matchType(v.type);if(!x)break;c++,(c>1||l==0||v.content.size)&&(f=x,u.push(OX(v.mark(m.allowedMarks(v.marks)),c==1?l:0,c==a.childCount?g:-1)))}let y=c==a.childCount;y||(g=-1),this.placed=bv(this.placed,n,pt.from(u)),this.frontier[n].match=f,y&&g<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,x=a;v<g;v++){let E=x.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),x=E.content}this.unplaced=y?t==0?Yt.empty:new Yt(gv(i.content,t-1,1),t-1,g<0?i.openEnd:t-1):new Yt(gv(i.content,t,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!d5(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],o=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),i=d5(t,n,s,r,o);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=d5(t,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:i,move:o?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=bv(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let s=t.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,t.index(r));this.openFrontierNode(s.type,s.attrs,o)}return t}openFrontierNode(t,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(t),this.placed=bv(this.placed,this.depth,pt.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(pt.empty,!0);n.childCount&&(this.placed=bv(this.placed,this.frontier.length,n))}}function gv(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(gv(e.firstChild.content,t-1,n)))}function bv(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(bv(e.lastChild.content,t-1,n)))}function u5(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function OX(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,OX(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(pt.empty,!0)))),e.copy(r)}function d5(e,t,n,r,s){let o=e.node(t),i=s?e.indexAfter(t):e.index(t);if(i==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,i);return a&&!bRe(n,o.content,i)?a:null}function bRe(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function yRe(e){return e.spec.defining||e.spec.definingForContent}function vRe(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let s=e.doc.resolve(t),o=e.doc.resolve(n);if(MX(s,o,r))return e.step(new ci(t,n,r));let i=PX(s,o);i[i.length-1]==0&&i.pop();let a=-(s.depth+1);i.unshift(a);for(let m=s.depth,g=s.pos-1;m>0;m--,g--){let y=s.node(m).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;i.indexOf(m)>-1?a=m:s.before(m)==g&&i.splice(1,0,-m)}let l=i.indexOf(a),c=[],u=r.openStart;for(let m=r.content,g=0;;g++){let y=m.firstChild;if(c.push(y),g==r.openStart)break;m=y.content}for(let m=u-1;m>=0;m--){let g=c[m],y=yRe(g.type);if(y&&!g.sameMarkup(s.node(Math.abs(a)-1)))u=m;else if(y||!g.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let g=(m+u+1)%(r.openStart+1),y=c[g];if(y)for(let v=0;v<i.length;v++){let x=i[(v+l)%i.length],E=!0;x<0&&(E=!1,x=-x);let T=s.node(x-1),k=s.index(x-1);if(T.canReplaceWith(k,k,y.type,y.marks))return e.replace(s.before(x),E?o.after(x):n,new Yt(DX(r.content,0,r.openStart,g),g,r.openEnd))}}let f=e.steps.length;for(let m=i.length-1;m>=0&&(e.replace(t,n,r),!(e.steps.length>f));m--){let g=i[m];g<0||(t=s.before(g),n=o.after(g))}}function DX(e,t,n,r,s){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy(DX(o.content,t+1,n,r,o)))}if(t>r){let o=s.contentMatchAt(0),i=o.fillBefore(e).append(e);e=i.append(o.matchFragment(i).fillBefore(pt.empty,!0))}return e}function xRe(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let s=mRe(e.doc,t,r.type);s!=null&&(t=n=s)}e.replaceRange(t,n,new Yt(pt.from(r),0,0))}function wRe(e,t,n){let r=e.doc.resolve(t),s=e.doc.resolve(n),o=PX(r,s);for(let i=0;i<o.length;i++){let a=o[i],l=i==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return e.delete(r.before(a),s.after(a))}for(let i=1;i<=r.depth&&i<=s.depth;i++)if(t-r.start(i)==r.depth-i&&n>r.end(i)&&s.end(i)-n!=s.depth-i&&r.start(i-1)==s.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),s.index(i-1)))return e.delete(r.before(i),n);e.delete(t,n)}function PX(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let s=r;s>=0;s--){let o=e.start(s);if(o<e.pos-(e.depth-s)||t.end(s)>t.pos+(t.depth-s)||e.node(s).type.spec.isolating||t.node(s).type.spec.isolating)break;(o==t.start(s)||s==e.depth&&s==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&s&&t.start(s-1)==o-1)&&n.push(s)}return n}class I1 extends va{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return di.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return di.fromReplace(t,this.pos,this.pos+1,new Yt(pt.from(s),0,n.isLeaf?0:1))}getMap(){return Vl.empty}invert(t){return new I1(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new I1(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new I1(n.pos,n.attr,n.value)}}va.jsonID("attr",I1);class Mx extends va{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return di.ok(r)}getMap(){return Vl.empty}invert(t){return new Mx(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Mx(n.attr,n.value)}}va.jsonID("docAttr",Mx);let Q1=class extends Error{};Q1=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Q1.prototype=Object.create(Error.prototype);Q1.prototype.constructor=Q1;Q1.prototype.name="TransformError";class t7{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Rx}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Q1(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Yt.empty){let s=xC(this.doc,t,n,r);return s&&this.step(s),this}replaceWith(t,n,r){return this.replace(t,n,new Yt(pt.from(r),0,0))}delete(t,n){return this.replace(t,n,Yt.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return vRe(this,t,n,r),this}replaceRangeWith(t,n,r){return xRe(this,t,n,r),this}deleteRange(t,n){return wRe(this,t,n),this}lift(t,n){return oRe(this,t,n),this}join(t,n=1){return pRe(this,t,n),this}wrap(t,n){return lRe(this,t,n),this}setBlockType(t,n=t,r,s=null){return cRe(this,t,n,r,s),this}setNodeMarkup(t,n,r=null,s){return dRe(this,t,n,r,s),this}setNodeAttribute(t,n,r){return this.step(new I1(t,n,r)),this}setDocAttribute(t,n){return this.step(new Mx(t,n)),this}addNodeMark(t,n){return this.step(new a0(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof js)n.isInSet(r.marks)&&this.step(new bm(t,n));else{let s=r.marks,o,i=[];for(;o=n.isInSet(s);)i.push(new bm(t,o)),s=o.removeFromSet(s);for(let a=i.length-1;a>=0;a--)this.step(i[a])}return this}split(t,n=1,r){return fRe(this,t,n,r),this}addMark(t,n,r){return nRe(this,t,n,r),this}removeMark(t,n,r){return rRe(this,t,n,r),this}clearIncompatible(t,n,r){return Q8(this,t,n,r),this}}const f5=Object.create(null);let Dn=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new LX(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Yt.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let o=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=t.mapping.slice(o);t.replaceRange(u.map(l.pos),u.map(c.pos),a?Yt.empty:n),a==0&&oB(t,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:i,$to:a}=s[o],l=t.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);o?t.deleteRange(c,u):(t.replaceRangeWith(c,u,n),oB(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let s=t.parent.inlineContent?new Cn(t):s1(t.node(0),t.parent,t.pos,t.index(),n,r);if(s)return s;for(let o=t.depth-1;o>=0;o--){let i=n<0?s1(t.node(0),t.node(o),t.before(o+1),t.index(o),n,r):s1(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,n,r);if(i)return i}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new hl(t.node(0))}static atStart(t){return s1(t,t,0,0,1)||new hl(t)}static atEnd(t){return s1(t,t,t.content.size,t.childCount,-1)||new hl(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=f5[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in f5)throw new RangeError("Duplicate use of selection JSON ID "+t);return f5[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Cn.between(this.$anchor,this.$head).getBookmark()}};Dn.prototype.visible=!0;class LX{constructor(t,n){this.$from=t,this.$to=n}}let rB=!1;function sB(e){!rB&&!e.parent.inlineContent&&(rB=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Cn extends Dn{constructor(t,n=t){sB(t),sB(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Dn.near(r);let s=t.resolve(n.map(this.anchor));return new Cn(s.parent.inlineContent?s:r,r)}replace(t,n=Yt.empty){if(super.replace(t,n),n==Yt.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Cn&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new wC(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Cn(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let s=t.resolve(n);return new this(s,r==n?s:t.resolve(r))}static between(t,n,r){let s=t.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let o=Dn.findFrom(n,r,!0)||Dn.findFrom(n,-r,!0);if(o)n=o.$head;else return Dn.near(n,r)}return t.parent.inlineContent||(s==0?t=n:(t=(Dn.findFrom(t,-r,!0)||Dn.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=s<0&&(t=n))),new Cn(t,n)}}Dn.jsonID("text",Cn);class wC{constructor(t,n){this.anchor=t,this.head=n}map(t){return new wC(t.map(this.anchor),t.map(this.head))}resolve(t){return Cn.between(t.resolve(this.anchor),t.resolve(this.head))}}class kn extends Dn{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),o=t.resolve(s);return r?Dn.near(o):new kn(o)}content(){return new Yt(pt.from(this.node),0,0)}eq(t){return t instanceof kn&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new n7(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new kn(t.resolve(n.anchor))}static create(t,n){return new kn(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}kn.prototype.visible=!1;Dn.jsonID("node",kn);class n7{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new wC(r,r):new n7(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&kn.isSelectable(r)?new kn(n):Dn.near(n)}}class hl extends Dn{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Yt.empty){if(n==Yt.empty){t.delete(0,t.doc.content.size);let r=Dn.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new hl(t)}map(t){return new hl(t)}eq(t){return t instanceof hl}getBookmark(){return ERe}}Dn.jsonID("all",hl);const ERe={map(){return this},resolve(e){return new hl(e)}};function s1(e,t,n,r,s,o=!1){if(t.inlineContent)return Cn.create(e,n);for(let i=r-(s>0?0:1);s>0?i<t.childCount:i>=0;i+=s){let a=t.child(i);if(a.isAtom){if(!o&&kn.isSelectable(a))return kn.create(e,n-(s<0?a.nodeSize:0))}else{let l=s1(e,a,n+s,s<0?a.childCount:0,s,o);if(l)return l}n+=a.nodeSize*s}return null}function oB(e,t,n){let r=e.steps.length-1;if(r<t)return;let s=e.steps[r];if(!(s instanceof ci||s instanceof Ai))return;let o=e.mapping.maps[r],i;o.forEach((a,l,c,u)=>{i==null&&(i=u)}),e.setSelection(Dn.near(e.doc.resolve(i),n))}const iB=1,C2=2,aB=4;class _Re extends t7{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|iB)&~C2,this.storedMarks=null,this}get selectionSet(){return(this.updated&iB)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=C2,this}ensureMarks(t){return js.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&C2)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~C2,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||js.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let s=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(s.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),!t)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let i=this.doc.resolve(n);o=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(t,o)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(Dn.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=aB,this}get scrolledIntoView(){return(this.updated&aB)>0}}function lB(e,t){return!t||!e?e:e.bind(t)}class yv{constructor(t,n,r){this.name=t,this.init=lB(n.init,r),this.apply=lB(n.apply,r)}}const SRe=[new yv("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new yv("selection",{init(e,t){return e.selection||Dn.atStart(t.doc)},apply(e){return e.selection}}),new yv("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new yv("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class h5{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=SRe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new yv(r.key,r.spec.state,r))})}}class p1{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),s=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=s?s[i].n:0,c=s?s[i].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",t),!s){s=[];for(let f=0;f<this.config.plugins.length;f++)s.push(f<i?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}s&&(s[i]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new p1(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];n[o.name]=o.apply(t,this[o.name],this,n)}return n}get tr(){return new _Re(this)}static create(t){let n=new h5(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new p1(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(t,r);return r}reconfigure(t){let n=new h5(this.schema,t.plugins),r=n.fields,s=new p1(n);for(let o=0;o<r.length;o++){let i=r[o].name;s[i]=this.hasOwnProperty(i)?this[i]:r[o].init(t,s)}return s}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=t[r],o=s.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(s,this[s.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let s=new h5(t.schema,t.plugins),o=new p1(s);return s.fields.forEach(i=>{if(i.name=="doc")o.doc=Ff.fromJSON(t.schema,n.doc);else if(i.name=="selection")o.selection=Dn.fromJSON(o.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[i.name]=c.fromJSON.call(l,t,n[a],o);return}}o[i.name]=i.init(t,o)}}),o}}function $X(e,t,n){for(let r in e){let s=e[r];s instanceof Function?s=s.bind(t):r=="handleDOMEvents"&&(s=$X(s,t,{})),n[r]=s}return n}class Ir{constructor(t){this.spec=t,this.props={},t.props&&$X(t.props,this,this.props),this.key=t.key?t.key.key:FX("plugin")}getState(t){return t[this.key]}}const p5=Object.create(null);function FX(e){return e in p5?e+"$"+ ++p5[e]:(p5[e]=0,e+"$")}class Br{constructor(t="key"){this.key=FX(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const EC=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function BX(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const r7=(e,t,n)=>{let r=BX(e,n);if(!r)return!1;let s=o7(r);if(!s){let i=r.blockRange(),a=i&&Lm(i);return a==null?!1:(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}let o=s.nodeBefore;if(KX(e,s,t,-1))return!0;if(r.parent.content.size==0&&(eb(o,"end")||kn.isSelectable(o)))for(let i=r.depth;;i--){let a=xC(e.doc,r.before(i),r.after(i),Yt.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(eb(o,"end")?Dn.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):kn.create(l.doc,s.pos-o.nodeSize)),t(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},zX=(e,t,n)=>{let r=BX(e,n);if(!r)return!1;let s=o7(r);return s?UX(e,s,t):!1},jX=(e,t,n)=>{let r=HX(e,n);if(!r)return!1;let s=l7(r);return s?UX(e,s,t):!1};function UX(e,t,n){let r=t.nodeBefore,s=r,o=t.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let i=t.nodeAfter,a=i,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=xC(e.doc,o,l,Yt.empty);if(!c||c.from!=o||c instanceof ci&&c.slice.size>=l-o)return!1;if(n){let u=e.tr.step(c);u.setSelection(Cn.create(u.doc,o)),n(u.scrollIntoView())}return!0}function eb(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const s7=(e,t,n)=>{let{$head:r,empty:s}=e.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=o7(r)}let i=o&&o.nodeBefore;return!i||!kn.isSelectable(i)?!1:(t&&t(e.tr.setSelection(kn.create(e.doc,o.pos-i.nodeSize)).scrollIntoView()),!0)};function o7(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function HX(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const i7=(e,t,n)=>{let r=HX(e,n);if(!r)return!1;let s=l7(r);if(!s)return!1;let o=s.nodeAfter;if(KX(e,s,t,1))return!0;if(r.parent.content.size==0&&(eb(o,"start")||kn.isSelectable(o))){let i=xC(e.doc,r.before(),r.after(),Yt.empty);if(i&&i.slice.size<i.to-i.from){if(t){let a=e.tr.step(i);a.setSelection(eb(o,"start")?Dn.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):kn.create(a.doc,a.mapping.map(s.pos))),t(a.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},a7=(e,t,n)=>{let{$head:r,empty:s}=e.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=l7(r)}let i=o&&o.nodeAfter;return!i||!kn.isSelectable(i)?!1:(t&&t(e.tr.setSelection(kn.create(e.doc,o.pos)).scrollIntoView()),!0)};function l7(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const VX=(e,t)=>{let n=e.selection,r=n instanceof kn,s;if(r){if(n.node.isTextblock||!Sd(e.doc,n.from))return!1;s=n.from}else if(s=Nb(e.doc,n.from,-1),s==null)return!1;if(t){let o=e.tr.join(s);r&&o.setSelection(kn.create(o.doc,s-e.doc.resolve(s).nodeBefore.nodeSize)),t(o.scrollIntoView())}return!0},qX=(e,t)=>{let n=e.selection,r;if(n instanceof kn){if(n.node.isTextblock||!Sd(e.doc,n.to))return!1;r=n.to}else if(r=Nb(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},GX=(e,t)=>{let{$from:n,$to:r}=e.selection,s=n.blockRange(r),o=s&&Lm(s);return o==null?!1:(t&&t(e.tr.lift(s,o).scrollIntoView()),!0)},c7=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function u7(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const WX=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),o=n.indexAfter(-1),i=u7(s.contentMatchAt(o));if(!i||!s.canReplaceWith(o,o,i))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,i.createAndFill());l.setSelection(Dn.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},d7=(e,t)=>{let n=e.selection,{$from:r,$to:s}=n;if(n instanceof hl||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=u7(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let i=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=e.tr.insert(i,o.createAndFill());a.setSelection(Cn.create(a.doc,i+1)),t(a.scrollIntoView())}return!0},f7=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Yl(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),s=r&&Lm(r);return s==null?!1:(t&&t(e.tr.lift(r,s).scrollIntoView()),!0)};function TRe(e){return(t,n)=>{let{$from:r,$to:s}=t.selection;if(t.selection instanceof kn&&t.selection.node.isBlock)return!r.parentOffset||!Yl(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],i,a,l=!1,c=!1;for(let g=r.depth;;g--)if(r.node(g).isBlock){l=r.end(g)==r.pos+(r.depth-g),c=r.start(g)==r.pos-(r.depth-g),a=u7(r.node(g-1).contentMatchAt(r.indexAfter(g-1))),o.unshift(l&&a?{type:a}:null),i=g;break}else{if(g==1)return!1;o.unshift(null)}let u=t.tr;(t.selection instanceof Cn||t.selection instanceof hl)&&u.deleteSelection();let f=u.mapping.map(r.pos),m=Yl(u.doc,f,o.length,o);if(m||(o[0]=a?{type:a}:null,m=Yl(u.doc,f,o.length,o)),!m)return!1;if(u.split(f,o.length,o),!l&&c&&r.node(i).type!=a){let g=u.mapping.map(r.before(i)),y=u.doc.resolve(g);a&&r.node(i-1).canReplaceWith(y.index(),y.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(i)),a)}return n&&n(u.scrollIntoView()),!0}}const CRe=TRe(),YX=(e,t)=>{let{$from:n,to:r}=e.selection,s,o=n.sharedDepth(r);return o==0?!1:(s=n.before(o),t&&t(e.tr.setSelection(kn.create(e.doc,s))),!0)};function kRe(e,t,n){let r=t.nodeBefore,s=t.nodeAfter,o=t.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(s.isTextblock||Sd(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function KX(e,t,n,r){let s=t.nodeBefore,o=t.nodeAfter,i,a,l=s.type.spec.isolating||o.type.spec.isolating;if(!l&&kRe(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(i=(a=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&a.matchType(i[0]||o.type).validEnd){if(n){let g=t.pos+o.nodeSize,y=pt.empty;for(let E=i.length-1;E>=0;E--)y=pt.from(i[E].create(null,y));y=pt.from(s.copy(y));let v=e.tr.step(new Ai(t.pos-1,g,t.pos,g,new Yt(y,1,0),i.length,!0)),x=v.doc.resolve(g+2*i.length);x.nodeAfter&&x.nodeAfter.type==s.type&&Sd(v.doc,x.pos)&&v.join(x.pos),n(v.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:Dn.findFrom(t,1),f=u&&u.$from.blockRange(u.$to),m=f&&Lm(f);if(m!=null&&m>=t.depth)return n&&n(e.tr.lift(f,m).scrollIntoView()),!0;if(c&&eb(o,"start",!0)&&eb(s,"end")){let g=s,y=[];for(;y.push(g),!g.isTextblock;)g=g.lastChild;let v=o,x=1;for(;!v.isTextblock;v=v.firstChild)x++;if(g.canReplace(g.childCount,g.childCount,v.content)){if(n){let E=pt.empty;for(let k=y.length-1;k>=0;k--)E=pt.from(y[k].copy(E));let T=e.tr.step(new Ai(t.pos-y.length,t.pos+o.nodeSize,t.pos+x,t.pos+o.nodeSize-x,new Yt(E,y.length,0),0,!0));n(T.scrollIntoView())}return!0}}return!1}function ZX(e){return function(t,n){let r=t.selection,s=e<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(n&&n(t.tr.setSelection(Cn.create(t.doc,e<0?s.start(o):s.end(o)))),!0):!1}}const JX=ZX(-1),XX=ZX(1);function QX(e,t=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o),a=i&&e7(i,e,t);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function WS(e,t=null){return function(n,r){let s=!1;for(let o=0;o<n.selection.ranges.length&&!s;o++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(i,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)s=!0;else{let u=n.doc.resolve(c),f=u.index();s=u.parent.canReplaceWith(f,f+1,e)}})}if(!s)return!1;if(r){let o=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];o.setBlockType(a,l,e,t)}r(o.scrollIntoView())}return!0}}function h7(...e){return function(t,n,r){for(let s=0;s<e.length;s++)if(e[s](t,n,r))return!0;return!1}}h7(EC,r7,s7);h7(EC,i7,a7);h7(c7,d7,f7,CRe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function eQ(e,t=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o);if(!i)return!1;let a=r?n.tr:null;return ARe(a,i,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function ARe(e,t,n,r=null){let s=!1,o=t,i=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=i.resolve(t.start-2);o=new GS(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new GS(t.$from,i.resolve(t.$to.end(t.depth)),t.depth)),s=!0}let a=e7(o,n,r,t);return a?(e&&NRe(e,t,a,s,n),!0):!1}function NRe(e,t,n,r,s){let o=pt.empty;for(let u=n.length-1;u>=0;u--)o=pt.from(n[u].type.create(n[u].attrs,o));e.step(new Ai(t.start-(r?2:0),t.end,t.start,t.end,new Yt(o,0,0),n.length,!0));let i=0;for(let u=0;u<n.length;u++)n[u].type==s&&(i=u+1);let a=n.length-i,l=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,f=t.endIndex,m=!0;u<f;u++,m=!1)!m&&Yl(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return e}function tQ(e){return function(t,n){let{$from:r,$to:s}=t.selection,o=r.blockRange(s,i=>i.childCount>0&&i.firstChild.type==e);return o?n?r.node(o.depth-1).type==e?IRe(t,n,e,o):RRe(t,n,o):!0:!1}}function IRe(e,t,n,r){let s=e.tr,o=r.end,i=r.$to.end(r.depth);o<i&&(s.step(new Ai(o-1,i,o,i,new Yt(pt.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new GS(s.doc.resolve(r.$from.pos),s.doc.resolve(i),r.depth));const a=Lm(r);if(a==null)return!1;s.lift(r,a);let l=s.doc.resolve(s.mapping.map(o,-1)-1);return Sd(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),t(s.scrollIntoView()),!0}function RRe(e,t,n){let r=e.tr,s=n.parent;for(let g=n.end,y=n.endIndex-1,v=n.startIndex;y>v;y--)g-=s.child(y).nodeSize,r.delete(g-1,g+1);let o=r.doc.resolve(n.start),i=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==s.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?pt.empty:pt.from(s))))return!1;let f=o.pos,m=f+i.nodeSize;return r.step(new Ai(f-(a?1:0),m+(l?1:0),f+1,m-1,new Yt((a?pt.empty:pt.from(s.copy(pt.empty))).append(l?pt.empty:pt.from(s.copy(pt.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function nQ(e){return function(t,n){let{$from:r,$to:s}=t.selection,o=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==e);if(!o)return!1;let i=o.startIndex;if(i==0)return!1;let a=o.parent,l=a.child(i-1);if(l.type!=e)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=pt.from(c?e.create():null),f=new Yt(pt.from(e.create(null,pt.from(a.type.create(null,u)))),c?3:1,0),m=o.start,g=o.end;n(t.tr.step(new Ai(m-(c?3:1),g,m,g,f,1,!0)).scrollIntoView())}return!0}}const ta=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},tb=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let E6=null;const yf=function(e,t,n){let r=E6||(E6=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},MRe=function(){E6=null},ym=function(e,t,n,r){return n&&(cB(e,t,n,r,-1)||cB(e,t,n,r,1))},ORe=/^(img|br|input|textarea|hr)$/i;function cB(e,t,n,r,s){for(var o;;){if(e==n&&t==r)return!0;if(t==(s<0?0:Cc(e))){let i=e.parentNode;if(!i||i.nodeType!=1||Rw(e)||ORe.test(e.nodeName)||e.contentEditable=="false")return!1;t=ta(e)+(s<0?0:1),e=i}else if(e.nodeType==1){let i=e.childNodes[t+(s<0?-1:0)];if(i.nodeType==1&&i.contentEditable=="false")if(!((o=i.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)t+=s;else return!1;else e=i,t=s<0?Cc(e):0}else return!1}}function Cc(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function DRe(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Cc(e)}else if(e.parentNode&&!Rw(e))t=ta(e),e=e.parentNode;else return null}}function PRe(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Rw(e))t=ta(e)+1,e=e.parentNode;else return null}}function LRe(e,t,n){for(let r=t==0,s=t==Cc(e);r||s;){if(e==n)return!0;let o=ta(e);if(e=e.parentNode,!e)return!1;r=r&&o==0,s=s&&o==Cc(e)}}function Rw(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const _C=function(e){return e.focusNode&&ym(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function zp(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function $Re(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function FRe(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Cc(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Cc(r.startContainer),r.startOffset)}}}const xd=typeof navigator<"u"?navigator:null,uB=typeof document<"u"?document:null,H0=xd&&xd.userAgent||"",_6=/Edge\/(\d+)/.exec(H0),rQ=/MSIE \d/.exec(H0),S6=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(H0),pl=!!(rQ||S6||_6),b0=rQ?document.documentMode:S6?+S6[1]:_6?+_6[1]:0,Mc=!pl&&/gecko\/(\d+)/i.test(H0);Mc&&+(/Firefox\/(\d+)/.exec(H0)||[0,0])[1];const T6=!pl&&/Chrome\/(\d+)/.exec(H0),ji=!!T6,sQ=T6?+T6[1]:0,ba=!pl&&!!xd&&/Apple Computer/.test(xd.vendor),nb=ba&&(/Mobile\/\w+/.test(H0)||!!xd&&xd.maxTouchPoints>2),wc=nb||(xd?/Mac/.test(xd.platform):!1),oQ=xd?/Win/.test(xd.platform):!1,Rf=/Android \d/.test(H0),Mw=!!uB&&"webkitFontSmoothing"in uB.documentElement.style,BRe=Mw?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function zRe(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function ff(e,t){return typeof e=="number"?e:e[t]}function jRe(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function dB(e,t,n){let r=e.someProp("scrollThreshold")||0,s=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let i=n||e.dom;i;){if(i.nodeType!=1){i=tb(i);continue}let a=i,l=a==o.body,c=l?zRe(o):jRe(a),u=0,f=0;if(t.top<c.top+ff(r,"top")?f=-(c.top-t.top+ff(s,"top")):t.bottom>c.bottom-ff(r,"bottom")&&(f=t.bottom-t.top>c.bottom-c.top?t.top+ff(s,"top")-c.top:t.bottom-c.bottom+ff(s,"bottom")),t.left<c.left+ff(r,"left")?u=-(c.left-t.left+ff(s,"left")):t.right>c.right-ff(r,"right")&&(u=t.right-c.right+ff(s,"right")),u||f)if(l)o.defaultView.scrollBy(u,f);else{let g=a.scrollLeft,y=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let v=a.scrollLeft-g,x=a.scrollTop-y;t={left:t.left-v,top:t.top-x,right:t.right-v,bottom:t.bottom-x}}let m=l?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(m))break;i=m=="absolute"?i.offsetParent:tb(i)}}function URe(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,s;for(let o=(t.left+t.right)/2,i=n+1;i<Math.min(innerHeight,t.bottom);i+=5){let a=e.root.elementFromPoint(o,i);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:iQ(e.dom)}}function iQ(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=tb(r));return t}function HRe({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;aQ(n,r==0?0:r-t)}function aQ(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:s,left:o}=e[n];r.scrollTop!=s+t&&(r.scrollTop=s+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Kg=null;function VRe(e){if(e.setActive)return e.setActive();if(Kg)return e.focus(Kg);let t=iQ(e);e.focus(Kg==null?{get preventScroll(){return Kg={preventScroll:!0},!0}}:void 0),Kg||(Kg=!1,aQ(t,0))}function lQ(e,t){let n,r=2e8,s,o=0,i=t.top,a=t.top,l,c;for(let u=e.firstChild,f=0;u;u=u.nextSibling,f++){let m;if(u.nodeType==1)m=u.getClientRects();else if(u.nodeType==3)m=yf(u).getClientRects();else continue;for(let g=0;g<m.length;g++){let y=m[g];if(y.top<=i&&y.bottom>=a){i=Math.max(y.bottom,i),a=Math.min(y.top,a);let v=y.left>t.left?y.left-t.left:y.right<t.left?t.left-y.right:0;if(v<r){n=u,r=v,s=v&&n.nodeType==3?{left:y.right<t.left?y.right:y.left,top:t.top}:t,u.nodeType==1&&v&&(o=f+(t.left>=(y.left+y.right)/2?1:0));continue}}else y.top>t.top&&!l&&y.left<=t.left&&y.right>=t.left&&(l=u,c={left:Math.max(y.left,Math.min(y.right,t.left)),top:y.top});!n&&(t.left>=y.right&&t.top>=y.top||t.left>=y.left&&t.top>=y.bottom)&&(o=f+1)}}return!n&&l&&(n=l,s=c,r=0),n&&n.nodeType==3?qRe(n,s):!n||r&&n.nodeType==1?{node:e,offset:o}:lQ(n,s)}function qRe(e,t){let n=e.nodeValue.length,r=document.createRange(),s;for(let o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);let i=Zh(r,1);if(i.top!=i.bottom&&p7(t,i)){s={node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)};break}}return r.detach(),s||{node:e,offset:0}}function p7(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function GRe(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function WRe(e,t,n){let{node:r,offset:s}=lQ(t,n),o=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();o=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return e.docView.posFromDOM(r,s,o)}function YRe(e,t,n,r){let s=-1;for(let o=t,i=!1;o!=e.dom;){let a=e.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!i&&l.left>r.left||l.top>r.top?s=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),i=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return s>-1?s:e.docView.posFromDOM(t,n,-1)}function cQ(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=s;;){let i=e.childNodes[o];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(p7(t,c))return cQ(i,t,c)}}if((o=(o+1)%r)==s)break}return e}function KRe(e,t){let n=e.dom.ownerDocument,r,s=0,o=FRe(n,t.left,t.top);o&&({node:r,offset:s}=o);let i=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!i||!e.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=e.dom.getBoundingClientRect();if(!p7(t,c)||(i=cQ(e.dom,t,c),!i))return null}if(ba)for(let c=i;r&&c;c=tb(c))c.draggable&&(r=void 0);if(i=GRe(i,t),r){if(Mc&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&s++}let c;Mw&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&s--,r==e.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=YRe(e,r,s,t))}a==null&&(a=WRe(e,i,t));let l=e.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function fB(e){return e.top<e.bottom||e.left<e.right}function Zh(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(fB(r))return r}return Array.prototype.find.call(n,fB)||e.getBoundingClientRect()}const ZRe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function uQ(e,t,n){let{node:r,offset:s,atom:o}=e.docView.domFromPos(t,n<0?-1:1),i=Mw||Mc;if(r.nodeType==3)if(i&&(ZRe.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let l=Zh(yf(r,s,s),n);if(Mc&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=Zh(yf(r,s-1,s-1),-1);if(c.top==l.top){let u=Zh(yf(r,s,s+1),-1);if(u.top!=l.top)return qy(u,u.left<c.left)}}return l}else{let l=s,c=s,u=n<0?1:-1;return n<0&&!s?(c++,u=-1):n>=0&&s==r.nodeValue.length?(l--,u=1):n<0?l--:c++,qy(Zh(yf(r,l,c),u),u<0)}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(o==null&&s&&(n<0||s==Cc(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return m5(l.getBoundingClientRect(),!1)}if(o==null&&s<Cc(r)){let l=r.childNodes[s];if(l.nodeType==1)return m5(l.getBoundingClientRect(),!0)}return m5(r.getBoundingClientRect(),n>=0)}if(o==null&&s&&(n<0||s==Cc(r))){let l=r.childNodes[s-1],c=l.nodeType==3?yf(l,Cc(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return qy(Zh(c,1),!1)}if(o==null&&s<Cc(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?yf(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return qy(Zh(c,-1),!0)}return qy(Zh(r.nodeType==3?yf(r):r,-n),n>=0)}function qy(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function m5(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function dQ(e,t,n){let r=e.state,s=e.root.activeElement;r!=t&&e.updateState(t),s!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),s!=e.dom&&s&&s.focus()}}function JRe(e,t,n){let r=t.selection,s=n=="up"?r.$from:r.$to;return dQ(e,t,()=>{let{node:o}=e.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let i=uQ(e,s.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=yf(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const XRe=/[\u0590-\u08ac]/;function QRe(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,i=s==r.parent.content.size,a=e.domSelection();return a?!XRe.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:i:dQ(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=e.domSelectionRange(),m=a.caretBidiLevel;a.modify("move",n,"character");let g=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:y,focusOffset:v}=e.domSelectionRange(),x=y&&!g.contains(y.nodeType==1?y:y.parentNode)||l==y&&c==v;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return m!=null&&(a.caretBidiLevel=m),x}):r.pos==r.start()||r.pos==r.end()}let hB=null,pB=null,mB=!1;function e8e(e,t,n){return hB==t&&pB==n?mB:(hB=t,pB=n,mB=n=="up"||n=="down"?JRe(e,t,n):QRe(e,t,n))}const Oc=0,gB=1,qp=2,wd=3;class Ow{constructor(t,n,r,s){this.parent=t,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=Oc,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==t)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let o,i;if(t==this.contentDOM)o=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}else{let o,i;if(t==this.contentDOM)o=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(i):this.posAtEnd}let s;if(t==this.dom&&this.contentDOM)s=n>ta(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=t;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&n==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,s=t;s;s=s.parentNode){let o=this.getDesc(s),i;if(o&&(!n||o.node))if(r&&(i=o.nodeDOM)&&!(i.nodeType==1?i.contains(t.nodeType==1?t:t.parentNode):i==t))r=!1;else return o}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let s=t;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],o=r+s.size;if(r==t&&o!=r){for(;!s.border&&s.children.length;)for(let i=0;i<s.children.length;i++){let a=s.children[i];if(a.size){s=a;break}}return s}if(t<o)return s.descAt(t-r-s.border);r=o}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let i=this.children[r],a=o+i.size;if(a>t||i instanceof hQ){s=t-o;break}o=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof fQ&&o.side>=0;r--);if(n<=0){let o,i=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,i=!1);return o&&n&&i&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?ta(o.dom)+1:0}}else{let o,i=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,i=!1);return o&&i&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?ta(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(s==-1&&t<=c){let u=i+l.border;if(t>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,u);t=i;for(let f=a;f>0;f--){let m=this.children[f-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){s=ta(m.dom)+1;break}t-=m.size}s==-1&&(s=0)}if(s>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=ta(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:n,fromOffset:s,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,s=!1){let o=Math.min(t,n),i=Math.max(t,n);for(let g=0,y=0;g<this.children.length;g++){let v=this.children[g],x=y+v.size;if(o>y&&i<x)return v.setSelection(t-y-v.border,n-y-v.border,r,s);y=x}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((Mc||ba)&&t==n){let{node:g,offset:y}=a;if(g.nodeType==3){if(f=!!(y&&g.nodeValue[y-1]==`
`),f&&y==g.nodeValue.length)for(let v=g,x;v;v=v.parentNode){if(x=v.nextSibling){x.nodeName=="BR"&&(a=l={node:x.parentNode,offset:ta(x)+1});break}let E=v.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let v=g.childNodes[y-1];f=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(Mc&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let g=u.focusNode.childNodes[u.focusOffset];g&&g.contentEditable=="false"&&(s=!0)}if(!(s||f&&ba)&&ym(a.node,a.offset,u.anchorNode,u.anchorOffset)&&ym(l.node,l.offset,u.focusNode,u.focusOffset))return;let m=!1;if((c.extend||t==n)&&!(f&&Mc)){c.collapse(a.node,a.offset);try{t!=n&&c.extend(l.node,l.offset),m=!0}catch{}}if(!m){if(t>n){let y=a;a=l,l=y}let g=document.createRange();g.setEnd(l.node,l.offset),g.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(g)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],i=r+o.size;if(r==i?t<=i&&n>=r:t<i&&n>r){let a=r+o.border,l=i-o.border;if(t>=a&&n<=l){this.dirty=t==r||n==i?qp:gB,t==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=wd:o.markDirty(t-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?qp:wd}r=i}this.dirty=qp}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?qp:gB;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class fQ extends Ow{constructor(t,n,r,s){let o,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(t,[],i,null),this.widget=n,this.widget=n,o=this}matchesWidget(t){return this.dirty==Oc&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class t8e extends Ow{constructor(t,n,r,s){super(t,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class vm extends Ow{constructor(t,n,r,s,o){super(t,[],r,s),this.mark=n,this.spec=o}static create(t,n,r,s){let o=s.nodeViews[n.type.name],i=o&&o(n,s,r);return(!i||!i.dom)&&(i=Pm.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new vm(t,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&wd||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=wd&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Oc){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Oc}}slice(t,n,r){let s=vm.create(this.parent,this.mark,!0,r),o=this.children,i=this.size;n<i&&(o=k6(o,n,i,r)),t>0&&(o=k6(o,0,t,r));for(let a=0;a<o.length;a++)o[a].parent=s;return s.children=o,s}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class y0 extends Ow{constructor(t,n,r,s,o,i,a,l,c){super(t,[],o,i),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(t,n,r,s,o,i){let a=o.nodeViews[n.type.name],l,c=a&&a(n,o,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,s),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=Pm.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let m=u;return u=gQ(u,r,n),c?l=new n8e(t,n,r,s,u,f||null,m,c,o,i+1):n.isText?new SC(t,n,r,s,u,m,o):new y0(t,n,r,s,u,f||null,m,o,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>pt.empty)}return t}matchesNode(t,n,r){return this.dirty==Oc&&t.eq(this.node)&&YS(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,s=n,o=t.composing?this.localCompositionInfo(t,n):null,i=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new s8e(this,i&&i.node,t);a8e(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,t):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?js.none:this.node.child(u).marks,r,t),l.placeWidget(c,t,s)},(c,u,f,m)=>{l.syncToMarks(c.marks,r,t);let g;l.findNodeMatch(c,u,f,m)||a&&t.state.selection.from>s&&t.state.selection.to<s+c.nodeSize&&(g=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,f,g,t)||l.updateNextNode(c,u,f,t,m,s)||l.addNode(c,u,f,t,s),s+=c.nodeSize}),l.syncToMarks([],r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==qp)&&(i&&this.protectLocalComposition(t,i),pQ(this.contentDOM,this.children,t),nb&&l8e(this.dom))}localCompositionInfo(t,n){let{from:r,to:s}=t.state.selection;if(!(t.state.selection instanceof Cn)||r<n||s>n+this.node.content.size)return null;let o=t.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let i=o.nodeValue,a=c8e(this.node.content,i,r-n,s-n);return a<0?null:{node:o,pos:a,text:i}}else return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let i=new t8e(this,o,n,s);t.input.compositionNodes.push(i),this.children=k6(this.children,r,r+s.length,t,i)}update(t,n,r,s){return this.dirty==wd||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,s),!0)}updateInner(t,n,r,s){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Oc}updateOuterDeco(t){if(YS(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=mQ(this.dom,this.nodeDOM,C6(this.outerDeco,this.node,n),C6(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function bB(e,t,n,r,s){gQ(r,t,e);let o=new y0(void 0,e,t,n,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class SC extends y0{constructor(t,n,r,s,o,i,a){super(t,n,r,s,o,null,i,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,s){return this.dirty==wd||this.dirty!=Oc&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Oc||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=t,this.dirty=Oc,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let s=this.node.cut(t,n),o=document.createTextNode(s.text);return new SC(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=wd)}get domAtom(){return!1}isText(t){return this.node.text==t}}class hQ extends Ow{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Oc&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class n8e extends y0{constructor(t,n,r,s,o,i,a,l,c,u){super(t,n,r,s,o,i,a,c,u),this.spec=l}update(t,n,r,s){if(this.dirty==wd)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let o=this.spec.update(t,n,r);return o&&this.updateInner(t,n,r,s),o}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,s){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function pQ(e,t,n){let r=e.firstChild,s=!1;for(let o=0;o<t.length;o++){let i=t[o],a=i.dom;if(a.parentNode==e){for(;a!=r;)r=yB(r),s=!0;r=r.nextSibling}else s=!0,e.insertBefore(a,r);if(i instanceof vm){let l=r?r.previousSibling:e.lastChild;pQ(i.contentDOM,i.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=yB(r),s=!0;s&&n.trackWrites==e&&(n.trackWrites=null)}const Fv=function(e){e&&(this.nodeName=e)};Fv.prototype=Object.create(null);const Gp=[new Fv];function C6(e,t,n){if(e.length==0)return Gp;let r=n?Gp[0]:new Fv,s=[r];for(let o=0;o<e.length;o++){let i=e[o].type.attrs;if(i){i.nodeName&&s.push(r=new Fv(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&s.length==1&&s.push(r=new Fv(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function mQ(e,t,n,r){if(n==Gp&&r==Gp)return t;let s=t;for(let o=0;o<r.length;o++){let i=r[o],a=n[o];if(o){let l;a&&a.nodeName==i.nodeName&&s!=e&&(l=s.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=Gp[0]),s=l}r8e(s,a||Gp[0],i)}return s}function r8e(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&e.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&e.classList.add(s[o]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(t.style);)e.style.removeProperty(s[1])}n.style&&(e.style.cssText+=n.style)}}function gQ(e,t,n){return mQ(e,e,Gp,C6(t,n,e.nodeType!=1))}function YS(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function yB(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class s8e{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=o8e(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let s=0,o=this.stack.length>>1,i=Math.min(o,t.length);for(;s<i&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Oc,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=vm.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,s){let o=-1,i;if(s>=this.preMatch.index&&(i=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&i.matchesNode(t,n,r))o=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,n,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,n,r,s,o){let i=this.top.children[s];return i.dirty==wd&&i.dom==i.contentDOM&&(i.dirty=qp),i.update(t,n,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}t=n}}updateNextNode(t,n,r,s,o,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof y0){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,f,m=this.isLocked(u)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=wd&&YS(n,l.outerDeco));if(!m&&l.update(t,n,r,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!m&&(f=this.recreateWrapper(l,t,n,r,s,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=qp,f.updateChildren(s,i+1),f.dirty=Oc),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,s,o,i){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!YS(r,t.outerDeco)||!s.eq(t.innerDeco))return null;let a=y0.create(this.top,n,r,s,o,i);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,r,s,o){let i=y0.create(this.top,t,n,r,s,o);i.contentDOM&&i.updateChildren(s,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(t,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(t)&&(t==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new fQ(this.top,t,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof vm;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof SC)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((ba||ji)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new hQ(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function o8e(e,t){let n=t,r=n.children.length,s=e.childCount,o=new Map,i=[];e:for(;s>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof vm)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(s-1))break;--s,o.set(a,s),i.push(a)}}return{index:s,matched:o,matches:i.reverse()}}function i8e(e,t){return e.type.side-t.type.side}function a8e(e,t,n,r){let s=t.locals(e),o=0;if(s.length==0){for(let c=0;c<e.childCount;c++){let u=e.child(c);r(u,s,t.forChild(o,u),c),o+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let u,f;for(;i<s.length&&s[i].to==o;){let x=s[i++];x.widget&&(u?(f||(f=[u])).push(x):u=x)}if(u)if(f){f.sort(i8e);for(let x=0;x<f.length;x++)n(f[x],c,!!l)}else n(u,c,!!l);let m,g;if(l)g=-1,m=l,l=null;else if(c<e.childCount)g=c,m=e.child(c++);else break;for(let x=0;x<a.length;x++)a[x].to<=o&&a.splice(x--,1);for(;i<s.length&&s[i].from<=o&&s[i].to>o;)a.push(s[i++]);let y=o+m.nodeSize;if(m.isText){let x=y;i<s.length&&s[i].from<x&&(x=s[i].from);for(let E=0;E<a.length;E++)a[E].to<x&&(x=a[E].to);x<y&&(l=m.cut(x-o),m=m.cut(0,x-o),y=x,g=-1)}else for(;i<s.length&&s[i].to<y;)i++;let v=m.isInline&&!m.isLeaf?a.filter(x=>!x.inline):a.slice();r(m,v,t.forChild(o,m),g),o=y}}function l8e(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function c8e(e,t,n,r){for(let s=0,o=0;s<e.childCount&&o<=r;){let i=e.child(s++),a=o;if(o+=i.nodeSize,!i.isText)continue;let l=i.text;for(;s<e.childCount;){let c=e.child(s++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){if(o>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let c=a<r?l.lastIndexOf(t,r-a-1):-1;if(c>=0&&c+t.length+a>=n)return a+c;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function k6(e,t,n,r,s){let o=[];for(let i=0,a=0;i<e.length;i++){let l=e[i],c=a,u=a+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),s&&(o.push(s),s=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function m7(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let s=e.docView.nearestDesc(n.focusNode),o=s&&s.size==0,i=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(_C(n)){for(l=i;s&&!s.node;)s=s.parent;let f=s.node;if(s&&f.isAtom&&kn.isSelectable(f)&&s.parent&&!(f.isInline&&LRe(n.focusNode,n.focusOffset,s.dom))){let m=s.posBefore;c=new kn(i==m?a:r.resolve(m))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=i,m=i;for(let g=0;g<n.rangeCount;g++){let y=n.getRangeAt(g);f=Math.min(f,e.docView.posFromDOM(y.startContainer,y.startOffset,1)),m=Math.max(m,e.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(f<0)return null;[l,i]=m==e.state.selection.anchor?[m,f]:[f,m],a=r.resolve(i)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let f=t=="pointer"||e.state.selection.head<a.pos&&!o?1:-1;c=g7(e,u,a,f)}return c}function bQ(e){return e.editable?e.hasFocus():vQ(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Bf(e,t=!1){let n=e.state.selection;if(yQ(e,n),!!bQ(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&ji){let r=e.domSelectionRange(),s=e.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&ym(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)d8e(e);else{let{anchor:r,head:s}=n,o,i;vB&&!(n instanceof Cn)&&(n.$from.parent.inlineContent||(o=xB(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=xB(e,n.to))),e.docView.setSelection(r,s,e,t),vB&&(o&&wB(o),i&&wB(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&u8e(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const vB=ba||ji&&sQ<63;function xB(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),s=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(ba&&s&&s.contentEditable=="false")return g5(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return g5(s);if(o)return g5(o)}}function g5(e){return e.contentEditable="true",ba&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function wB(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function u8e(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!bQ(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function d8e(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,ta(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&pl&&b0<=11&&(n.disabled=!0,n.disabled=!1)}function yQ(e,t){if(t instanceof kn){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(EB(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else EB(e)}function EB(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function g7(e,t,n,r){return e.someProp("createSelectionBetween",s=>s(e,t,n))||Cn.between(t,n,r)}function _B(e){return e.editable&&!e.hasFocus()?!1:vQ(e)}function vQ(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function f8e(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return ym(t.node,t.offset,n.anchorNode,n.anchorOffset)}function A6(e,t){let{$anchor:n,$head:r}=e.selection,s=t>0?n.max(r):n.min(r),o=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return o&&Dn.findFrom(o,t)}function t0(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function SB(e,t,n){let r=e.state.selection;if(r instanceof Cn)if(n.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let i=e.state.doc.resolve(s.pos+o.nodeSize*(t<0?-1:1));return t0(e,new Cn(r.$anchor,i))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let s=A6(e.state,t);return s&&s instanceof kn?t0(e,s):!1}else if(!(wc&&n.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter,i;if(!o||o.isText)return!1;let a=t<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(i=e.docView.descAt(a))&&!i.contentDOM?kn.isSelectable(o)?t0(e,new kn(t<0?e.state.doc.resolve(s.pos-o.nodeSize):s)):Mw?t0(e,new Cn(e.state.doc.resolve(t<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof kn&&r.node.isInline)return t0(e,new Cn(t>0?r.$to:r.$from));{let s=A6(e.state,t);return s?t0(e,s):!1}}}function KS(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Bv(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Zg(e,t){return t<0?h8e(e):p8e(e)}function h8e(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s,o,i=!1;for(Mc&&n.nodeType==1&&r<KS(n)&&Bv(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Bv(a,-1))s=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(xQ(n))break;{let a=n.previousSibling;for(;a&&Bv(a,-1);)s=n.parentNode,o=ta(a),a=a.previousSibling;if(a)n=a,r=KS(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}i?N6(e,n,r):s&&N6(e,s,o)}function p8e(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s=KS(n),o,i;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Bv(a,1))o=n,i=++r;else break}else{if(xQ(n))break;{let a=n.nextSibling;for(;a&&Bv(a,1);)o=a.parentNode,i=ta(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=KS(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}o&&N6(e,o,i)}function xQ(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function m8e(e,t){for(;e&&t==e.childNodes.length&&!Rw(e);)t=ta(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function g8e(e,t){for(;e&&!t&&!Rw(e);)t=ta(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function N6(e,t,n){if(t.nodeType!=3){let o,i;(i=m8e(t,n))?(t=i,n=0):(o=g8e(t,n))&&(t=o,n=o.nodeValue.length)}let r=e.domSelection();if(!r)return;if(_C(r)){let o=document.createRange();o.setEnd(t,n),o.setStart(t,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:s}=e;setTimeout(()=>{e.state==s&&Bf(e)},50)}function TB(e,t){let n=e.state.doc.resolve(t);if(!(ji||oQ)&&n.parent.inlineContent){let s=e.coordsAtPos(t);if(t>n.start()){let o=e.coordsAtPos(t-1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(t<n.end()){let o=e.coordsAtPos(t+1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function CB(e,t,n){let r=e.state.selection;if(r instanceof Cn&&!r.empty||n.indexOf("s")>-1||wc&&n.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let i=A6(e.state,t);if(i&&i instanceof kn)return t0(e,i)}if(!s.parent.inlineContent){let i=t<0?s:o,a=r instanceof hl?Dn.near(i,t):Dn.findFrom(i,t);return a?t0(e,a):!1}return!1}function kB(e,t){if(!(e.state.selection instanceof Cn))return!0;let{$head:n,$anchor:r,empty:s}=e.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let i=e.state.tr;return t<0?i.delete(n.pos-o.nodeSize,n.pos):i.delete(n.pos,n.pos+o.nodeSize),e.dispatch(i),!0}return!1}function AB(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function b8e(e){if(!ba||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;AB(e,r,"true"),setTimeout(()=>AB(e,r,"false"),20)}return!1}function y8e(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function v8e(e,t){let n=t.keyCode,r=y8e(t);if(n==8||wc&&n==72&&r=="c")return kB(e,-1)||Zg(e,-1);if(n==46&&!t.shiftKey||wc&&n==68&&r=="c")return kB(e,1)||Zg(e,1);if(n==13||n==27)return!0;if(n==37||wc&&n==66&&r=="c"){let s=n==37?TB(e,e.state.selection.from)=="ltr"?-1:1:-1;return SB(e,s,r)||Zg(e,s)}else if(n==39||wc&&n==70&&r=="c"){let s=n==39?TB(e,e.state.selection.from)=="ltr"?1:-1:1;return SB(e,s,r)||Zg(e,s)}else{if(n==38||wc&&n==80&&r=="c")return CB(e,-1,r)||Zg(e,-1);if(n==40||wc&&n==78&&r=="c")return b8e(e)||CB(e,1,r)||Zg(e,1);if(r==(wc?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function b7(e,t){e.someProp("transformCopied",g=>{t=g(t,e)});let n=[],{content:r,openStart:s,openEnd:o}=t;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let g=r.firstChild;n.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),r=g.content}let i=e.someProp("clipboardSerializer")||Pm.fromSchema(e.state.schema),a=CQ(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=TQ[c.nodeName.toLowerCase()]);){for(let g=u.length-1;g>=0;g--){let y=a.createElement(u[g]);for(;l.firstChild;)y.appendChild(l.firstChild);l.appendChild(y),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let m=e.someProp("clipboardTextSerializer",g=>g(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:m,slice:t}}function wQ(e,t,n,r,s){let o=s.parent.type.spec.code,i,a;if(!n&&!t)return null;let l=!!t&&(r||o||!n);if(l){if(e.someProp("transformPastedText",m=>{t=m(t,o||r,e)}),o)return a=new Yt(pt.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",m=>{a=m(a,e,!0)}),a;let f=e.someProp("clipboardTextParser",m=>m(t,s,r,e));if(f)a=f;else{let m=s.marks(),{schema:g}=e.state,y=Pm.fromSchema(g);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(v=>{let x=i.appendChild(document.createElement("p"));v&&x.appendChild(y.serializeNode(g.text(v,m)))})}}else e.someProp("transformPastedHTML",f=>{n=f(n,e)}),i=_8e(n),Mw&&S8e(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let m=i.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;i=m}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||g0.fromSchema(e.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!x8e.test(m.parentNode.nodeName)?{ignore:!0}:null}})),u)a=T8e(NB(a,+u[1],+u[2]),u[4]);else if(a=Yt.maxOpen(w8e(a.content,s),!0),a.openStart||a.openEnd){let f=0,m=0;for(let g=a.content.firstChild;f<a.openStart&&!g.type.spec.isolating;f++,g=g.firstChild);for(let g=a.content.lastChild;m<a.openEnd&&!g.type.spec.isolating;m++,g=g.lastChild);a=NB(a,f,m)}return e.someProp("transformPasted",f=>{a=f(a,e,l)}),a}const x8e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function w8e(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let s=t.node(n).contentMatchAt(t.index(n)),o,i=[];if(e.forEach(a=>{if(!i)return;let l=s.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&o.length&&_Q(l,o,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=SQ(i[i.length-1],o.length));let u=EQ(a,l);i.push(u),s=s.matchType(u.type),o=l}}),i)return pt.from(i)}return e}function EQ(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,pt.from(e));return e}function _Q(e,t,n,r,s){if(s<e.length&&s<t.length&&e[s]==t[s]){let o=_Q(e,t,n,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==e.length-1?n.type:e[s+1]))return r.copy(r.content.append(pt.from(EQ(n,e,s+1))))}}function SQ(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,SQ(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(pt.empty,!0);return e.copy(n.append(r))}function I6(e,t,n,r,s,o){let i=t<0?e.firstChild:e.lastChild,a=i.content;return e.childCount>1&&(o=0),s<r-1&&(a=I6(a,t,n,r,s+1,o)),s>=n&&(a=t<0?i.contentMatchAt(0).fillBefore(a,o<=s).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(pt.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,i.copy(a))}function NB(e,t,n){return t<e.openStart&&(e=new Yt(I6(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Yt(I6(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const TQ={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let IB=null;function CQ(){return IB||(IB=document.implementation.createHTMLDocument("title"))}let b5=null;function E8e(e){let t=window.trustedTypes;return t?(b5||(b5=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),b5.createHTML(e)):e}function _8e(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=CQ().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),s;if((s=r&&TQ[r[1].toLowerCase()])&&(e=s.map(o=>"<"+o+">").join("")+e+s.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=E8e(e),s)for(let o=0;o<s.length;o++)n=n.querySelector(s[o])||n;return n}function S8e(e){let t=e.querySelectorAll(ji?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function T8e(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:s,openStart:o,openEnd:i}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=pt.from(l.create(r[a+1],s)),o++,i++}return new Yt(s,o,i)}const $a={},Fa={},C8e={touchstart:!0,touchmove:!0};class k8e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function A8e(e){for(let t in $a){let n=$a[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{I8e(e,r)&&!y7(e,r)&&(e.editable||!(r.type in Fa))&&n(e,r)},C8e[t]?{passive:!0}:void 0)}ba&&e.dom.addEventListener("input",()=>null),R6(e)}function l0(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function N8e(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function R6(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>y7(e,r))})}function y7(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function I8e(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function R8e(e,t){!y7(e,t)&&$a[t.type]&&(e.editable||!(t.type in Fa))&&$a[t.type](e,t)}Fa.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!AQ(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Rf&&ji&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),nb&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",s=>s(e,zp(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||v8e(e,n)?n.preventDefault():l0(e,"key")};Fa.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Fa.keypress=(e,t)=>{let n=t;if(AQ(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||wc&&n.metaKey)return;if(e.someProp("handleKeyPress",s=>s(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Cn)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),o=()=>e.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!e.someProp("handleTextInput",i=>i(e,r.$from.pos,r.$to.pos,s,o))&&e.dispatch(o()),n.preventDefault()}};function TC(e){return{left:e.clientX,top:e.clientY}}function M8e(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function v7(e,t,n,r,s){if(r==-1)return!1;let o=e.state.doc.resolve(r);for(let i=o.depth+1;i>0;i--)if(e.someProp(t,a=>i>o.depth?a(e,n,o.nodeAfter,o.before(i),s,!0):a(e,n,o.node(i),o.before(i),s,!1)))return!0;return!1}function R1(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function O8e(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&kn.isSelectable(r)?(R1(e,new kn(n)),!0):!1}function D8e(e,t){if(t==-1)return!1;let n=e.state.selection,r,s;n instanceof kn&&(r=n.node);let o=e.state.doc.resolve(t);for(let i=o.depth+1;i>0;i--){let a=i>o.depth?o.nodeAfter:o.node(i);if(kn.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?s=o.before(n.$from.depth):s=o.before(i);break}}return s!=null?(R1(e,kn.create(e.state.doc,s)),!0):!1}function P8e(e,t,n,r,s){return v7(e,"handleClickOn",t,n,r)||e.someProp("handleClick",o=>o(e,t,r))||(s?D8e(e,n):O8e(e,n))}function L8e(e,t,n,r){return v7(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",s=>s(e,t,r))}function $8e(e,t,n,r){return v7(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",s=>s(e,t,r))||F8e(e,n,r)}function F8e(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(R1(e,Cn.create(r,0,r.content.size)),!0):!1;let s=r.resolve(t);for(let o=s.depth+1;o>0;o--){let i=o>s.depth?s.nodeAfter:s.node(o),a=s.before(o);if(i.inlineContent)R1(e,Cn.create(r,a+1,a+1+i.content.size));else if(kn.isSelectable(i))R1(e,kn.create(r,a));else continue;return!0}}function x7(e){return ZS(e)}const kQ=wc?"metaKey":"ctrlKey";$a.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=x7(e),s=Date.now(),o="singleClick";s-e.input.lastClick.time<500&&M8e(n,e.input.lastClick)&&!n[kQ]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?o="doubleClick":e.input.lastClick.type=="doubleClick"&&(o="tripleClick")),e.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:o,button:n.button};let i=e.posAtCoords(TC(n));i&&(o=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new B8e(e,i,n,!!r)):(o=="doubleClick"?L8e:$8e)(e,i.pos,i.inside,n)?n.preventDefault():l0(e,"pointer"))};class B8e{constructor(t,n,r,s){this.view=t,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[kQ],this.allowDefault=r.shiftKey;let o,i;if(n.inside>-1)o=t.state.doc.nodeAt(n.inside),i=n.inside;else{let u=t.state.doc.resolve(n.pos);o=u.parent,i=u.depth?u.before():0}const a=s?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=t.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof kn&&c.from<=i&&c.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Mc&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),l0(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Bf(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(TC(t))),this.updateAllowDefault(t),this.allowDefault||!n?l0(this.view,"pointer"):P8e(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||ba&&this.mightDrag&&!this.mightDrag.node.isAtom||ji&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(R1(this.view,Dn.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):l0(this.view,"pointer")}move(t){this.updateAllowDefault(t),l0(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}$a.touchstart=e=>{e.input.lastTouch=Date.now(),x7(e),l0(e,"pointer")};$a.touchmove=e=>{e.input.lastTouch=Date.now(),l0(e,"pointer")};$a.contextmenu=e=>x7(e);function AQ(e,t){return e.composing?!0:ba&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const z8e=Rf?5e3:-1;Fa.compositionstart=Fa.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Cn&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||ji&&oQ&&j8e(e)))e.markCursor=e.state.storedMarks||n.marks(),ZS(e,!0),e.markCursor=null;else if(ZS(e,!t.selection.empty),Mc&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let i=o<0?s.lastChild:s.childNodes[o-1];if(!i)break;if(i.nodeType==3){let a=e.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else s=i,o=-1}}e.input.composing=!0}NQ(e,z8e)};function j8e(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||t.nodeType!=1||n>=t.childNodes.length)return!1;let r=t.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Fa.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,NQ(e,20))};function NQ(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>ZS(e),t))}function IQ(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=H8e());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function U8e(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=DRe(t.focusNode,t.focusOffset),r=PRe(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,o=e.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function H8e(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function ZS(e,t=!1){if(!(Rf&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),IQ(e),t||e.docView&&e.docView.dirty){let n=m7(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function V8e(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Ox=pl&&b0<15||nb&&BRe<604;$a.copy=Fa.cut=(e,t)=>{let n=t,r=e.state.selection,s=n.type=="cut";if(r.empty)return;let o=Ox?null:n.clipboardData,i=r.content(),{dom:a,text:l}=b7(e,i);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):V8e(e,a),s&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function q8e(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function G8e(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Dx(e,r.value,null,s,t):Dx(e,r.textContent,r.innerHTML,s,t)},50)}function Dx(e,t,n,r,s){let o=wQ(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,s,o||Yt.empty)))return!0;if(!o)return!1;let i=q8e(o),a=i?e.state.tr.replaceSelectionWith(i,r):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function RQ(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Fa.paste=(e,t)=>{let n=t;if(e.composing&&!Rf)return;let r=Ox?null:n.clipboardData,s=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Dx(e,RQ(r),r.getData("text/html"),s,n)?n.preventDefault():G8e(e,n)};class MQ{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const W8e=wc?"altKey":"ctrlKey";function OQ(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[W8e]}$a.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=e.state.selection,o=s.empty?null:e.posAtCoords(TC(n)),i;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof kn?s.to-1:s.to))){if(r&&r.mightDrag)i=kn.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=e.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(i=kn.create(e.state.doc,f.posBefore))}}let a=(i||e.state.selection).content(),{dom:l,text:c,slice:u}=b7(e,a);(!n.dataTransfer.files.length||!ji||sQ>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ox?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ox||n.dataTransfer.setData("text/plain",c),e.dragging=new MQ(u,OQ(e,n),i)};$a.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Fa.dragover=Fa.dragenter=(e,t)=>t.preventDefault();Fa.drop=(e,t)=>{try{Y8e(e,t,e.dragging)}finally{e.dragging=null}};function Y8e(e,t,n){if(!t.dataTransfer)return;let r=e.posAtCoords(TC(t));if(!r)return;let s=e.state.doc.resolve(r.pos),o=n&&n.slice;o?e.someProp("transformPasted",g=>{o=g(o,e,!1)}):o=wQ(e,RQ(t.dataTransfer),Ox?null:t.dataTransfer.getData("text/html"),!1,s);let i=!!(n&&OQ(e,t));if(e.someProp("handleDrop",g=>g(e,t,o||Yt.empty,i))){t.preventDefault();return}if(!o)return;t.preventDefault();let a=o?RX(e.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let l=e.state.tr;if(i){let{node:g}=n;g?g.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=l.doc;if(u?l.replaceRangeWith(c,c,o.content.firstChild):l.replaceRange(c,c,o),l.doc.eq(f))return;let m=l.doc.resolve(c);if(u&&kn.isSelectable(o.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new kn(m));else{let g=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((y,v,x,E)=>g=E),l.setSelection(g7(e,m,l.doc.resolve(g)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}$a.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Bf(e)},20))};$a.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};$a.beforeinput=(e,t)=>{if(ji&&Rf&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",o=>o(e,zp(8,"Backspace")))))return;let{$cursor:s}=e.state.selection;s&&s.pos>0&&e.dispatch(e.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let e in Fa)$a[e]=Fa[e];function Px(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class JS{constructor(t,n){this.toDOM=t,this.spec=n||tm,this.side=this.spec.side||0}map(t,n,r,s){let{pos:o,deleted:i}=t.mapResult(n.from+s,this.side<0?-1:1);return i?null:new sa(o-r,o-r,this)}valid(){return!0}eq(t){return this==t||t instanceof JS&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Px(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class v0{constructor(t,n){this.attrs=t,this.spec=n||tm}map(t,n,r,s){let o=t.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,i=t.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=i?null:new sa(o,i,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof v0&&Px(this.attrs,t.attrs)&&Px(this.spec,t.spec)}static is(t){return t.type instanceof v0}destroy(){}}class w7{constructor(t,n){this.attrs=t,this.spec=n||tm}map(t,n,r,s){let o=t.mapResult(n.from+s,1);if(o.deleted)return null;let i=t.mapResult(n.to+s,-1);return i.deleted||i.pos<=o.pos?null:new sa(o.pos-r,i.pos-r,this)}valid(t,n){let{index:r,offset:s}=t.content.findIndex(n.from),o;return s==n.from&&!(o=t.child(r)).isText&&s+o.nodeSize==n.to}eq(t){return this==t||t instanceof w7&&Px(this.attrs,t.attrs)&&Px(this.spec,t.spec)}destroy(){}}class sa{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new sa(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new sa(t,t,new JS(n,r))}static inline(t,n,r,s){return new sa(t,n,new v0(r,s))}static node(t,n,r,s){return new sa(t,n,new w7(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof v0}get widget(){return this.type instanceof JS}}const o1=[],tm={};class io{constructor(t,n){this.local=t.length?t:o1,this.children=n.length?n:o1}static create(t,n){return n.length?XS(n,t,0,tm):fa}find(t,n,r){let s=[];return this.findInner(t??0,n??1e9,s,0,r),s}findInner(t,n,r,s,o){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=t&&(!o||o(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>t){let a=this.children[i]+1;this.children[i+2].findInner(t-a,n-a,r,s+a,o)}}map(t,n,r){return this==fa||t.maps.length==0?this:this.mapInner(t,n,0,0,r||tm)}mapInner(t,n,r,s,o){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,s);l&&l.type.valid(n,l)?(i||(i=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?K8e(this.children,i||[],t,n,r,s,o):i?new io(i.sort(nm),o1):fa}add(t,n){return n.length?this==fa?io.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let s,o=0;t.forEach((a,l)=>{let c=l+r,u;if(u=PQ(n,a,c)){for(s||(s=this.children.slice());o<s.length&&s[o]<l;)o+=3;s[o]==l?s[o+2]=s[o+2].addInner(a,u,c+1):s.splice(o,0,l,l+a.nodeSize,XS(u,a,c+1,tm)),o+=3}});let i=DQ(o?LQ(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(t,i[a])||i.splice(a--,1);return new io(i.length?this.local.concat(i).sort(nm):this.local,s||this.children)}remove(t){return t.length==0||this==fa?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let i,a=r[o]+n,l=r[o+1]+n;for(let u=0,f;u<t.length;u++)(f=t[u])&&f.from>a&&f.to<l&&(t[u]=null,(i||(i=[])).push(f));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(i,a+1);c!=fa?r[o+2]=c:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,i;o<t.length;o++)if(i=t[o])for(let a=0;a<s.length;a++)s[a].eq(i,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new io(s,r):fa}forChild(t,n){if(this==fa)return this;if(n.isLeaf)return io.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let o=t+1,i=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>o&&l.type instanceof v0){let c=Math.max(o,l.from)-o,u=Math.min(i,l.to)-o;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new io(s.sort(nm),o1);return r?new s0([a,r]):a}return r||fa}eq(t){if(this==t)return!0;if(!(t instanceof io)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return E7(this.localsInner(t))}localsInner(t){if(this==fa)return o1;if(t.inlineContent||!this.local.some(v0.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof v0||n.push(this.local[r]);return n}forEachSet(t){t(this)}}io.empty=new io([],[]);io.removeOverlap=E7;const fa=io.empty;class s0{constructor(t){this.members=t}map(t,n){const r=this.members.map(s=>s.map(t,n,tm));return s0.from(r)}forChild(t,n){if(n.isLeaf)return io.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(t,n);o!=fa&&(o instanceof s0?r=r.concat(o.members):r.push(o))}return s0.from(r)}eq(t){if(!(t instanceof s0)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(t);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let i=0;i<o.length;i++)n.push(o[i])}}return n?E7(r?n:n.sort(nm)):o1}static from(t){switch(t.length){case 0:return fa;case 1:return t[0];default:return new s0(t.every(n=>n instanceof io)?t:t.reduce((n,r)=>n.concat(r instanceof io?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function K8e(e,t,n,r,s,o,i){let a=e.slice();for(let c=0,u=o;c<n.maps.length;c++){let f=0;n.maps[c].forEach((m,g,y,v)=>{let x=v-y-(g-m);for(let E=0;E<a.length;E+=3){let T=a[E+1];if(T<0||m>T+u-f)continue;let k=a[E]+u-f;g>=k?a[E+1]=m<=k?-2:-1:m>=u&&x&&(a[E]+=x,a[E+1]+=x)}f+=x}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(e[c]+o),f=u-s;if(f<0||f>=r.content.size){l=!0;continue}let m=n.map(e[c+1]+o,-1),g=m-s,{index:y,offset:v}=r.content.findIndex(f),x=r.maybeChild(y);if(x&&v==f&&v+x.nodeSize==g){let E=a[c+2].mapInner(n,x,u+1,e[c]+o+1,i);E!=fa?(a[c]=f,a[c+1]=g,a[c+2]=E):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Z8e(a,e,t,n,s,o,i),u=XS(c,r,0,i);t=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,m=0;f<u.children.length;f+=3){let g=u.children[f];for(;m<a.length&&a[m]<g;)m+=3;a.splice(m,0,u.children[f],u.children[f+1],u.children[f+2])}}return new io(t.sort(nm),a)}function DQ(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let s=e[r];n.push(new sa(s.from+t,s.to+t,s.type))}return n}function Z8e(e,t,n,r,s,o,i){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,s,c);f?n.push(f):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+o+1);return n}function PQ(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,s=null;for(let o=0,i;o<e.length;o++)(i=e[o])&&i.from>n&&i.to<r&&((s||(s=[])).push(i),e[o]=null);return s}function LQ(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function XS(e,t,n,r){let s=[],o=!1;t.forEach((a,l)=>{let c=PQ(e,a,l+n);if(c){o=!0;let u=XS(c,a,n+l+1,r);u!=fa&&s.push(l,l+a.nodeSize,u)}});let i=DQ(o?LQ(e):e,-n).sort(nm);for(let a=0;a<i.length;a++)i[a].type.valid(t,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||s.length?new io(i,s):fa}function nm(e,t){return e.from-t.from||e.to-t.to}function E7(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let s=n+1;s<t.length;s++){let o=t[s];if(o.from==r.from){o.to!=r.to&&(t==e&&(t=e.slice()),t[s]=o.copy(o.from,r.to),RB(t,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),RB(t,s,r.copy(o.from,r.to)));break}}}return t}function RB(e,t,n){for(;t<e.length&&nm(n,e[t])>0;)t++;e.splice(t,0,n)}function y5(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=fa&&t.push(r)}),e.cursorWrapper&&t.push(io.create(e.state.doc,[e.cursorWrapper.deco])),s0.from(t)}const J8e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},X8e=pl&&b0<=11;class Q8e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class e7e{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Q8e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);pl&&b0<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),X8e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,J8e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(_B(this.view)){if(this.suppressingSelectionUpdates)return Bf(this.view);if(pl&&b0<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&ym(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let o=t.focusNode;o;o=tb(o))n.add(o);for(let o=t.anchorNode;o;o=tb(o))if(n.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&_B(t)&&!this.ignoreSelectionChange(r),o=-1,i=-1,a=!1,l=[];if(t.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],l);f&&(o=o<0?f.from:Math.min(f.from,o),i=i<0?f.to:Math.max(f.to,i),f.typeOver&&(a=!0))}if(Mc&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,m]=u;f.parentNode&&f.parentNode.parentNode==m.parentNode?m.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let m of u){let g=m.parentNode;g&&g.nodeName=="LI"&&(!f||r7e(t,f)!=g)&&m.remove()}}}else if((ji||ba)&&l.some(u=>u.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let f=u.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;o<0&&s&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&_C(r)&&(c=m7(t))&&c.eq(Dn.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Bf(t),this.currentSelection.set(r),t.scrollToSelection()):(o>-1||s)&&(o>-1&&(t.docView.markDirty(o,i),t7e(t)),this.handleDOMChange(o,i,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Bf(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let f=t.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let s=t.previousSibling,o=t.nextSibling;if(pl&&b0<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:f,nextSibling:m}=t.addedNodes[u];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(s=f),(!m||Array.prototype.indexOf.call(t.addedNodes,m)<0)&&(o=m)}let i=s&&s.parentNode==t.target?ta(s)+1:0,a=r.localPosFromDOM(t.target,i,-1),l=o&&o.parentNode==t.target?ta(o):t.target.childNodes.length,c=r.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let MB=new WeakMap,OB=!1;function t7e(e){if(!MB.has(e)&&(MB.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Mc,OB)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),OB=!0}}function DB(e,t){let n=t.startContainer,r=t.startOffset,s=t.endContainer,o=t.endOffset,i=e.domAtPos(e.state.selection.anchor);return ym(i.node,i.offset,s,o)&&([n,r,s,o]=[s,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}}function n7e(e,t){if(t.getComposedRanges){let s=t.getComposedRanges(e.root)[0];if(s)return DB(e,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?DB(e,n):null}function r7e(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function s7e(e,t,n){let{node:r,fromOffset:s,toOffset:o,from:i,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),c,u=l.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],_C(l)||c.push({node:l.focusNode,offset:l.focusOffset})),ji&&e.input.lastKeyCode===8)for(let x=o;x>s;x--){let E=r.childNodes[x-1],T=E.pmViewDesc;if(E.nodeName=="BR"&&!T){o=x;break}if(!T||T.size)break}let f=e.state.doc,m=e.someProp("domParser")||g0.fromSchema(e.state.schema),g=f.resolve(i),y=null,v=m.parse(r,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:s,to:o,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:o7e,context:g});if(c&&c[0].pos!=null){let x=c[0].pos,E=c[1]&&c[1].pos;E==null&&(E=x),y={anchor:x+i,head:E+i}}return{doc:v,sel:y,from:i,to:a}}function o7e(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(ba&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||ba&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const i7e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function a7e(e,t,n,r,s){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let P=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,j=m7(e,P);if(j&&!e.state.selection.eq(j)){if(ji&&Rf&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",U=>U(e,zp(13,"Enter"))))return;let V=e.state.tr.setSelection(j);P=="pointer"?V.setMeta("pointer",!0):P=="key"&&V.scrollIntoView(),o&&V.setMeta("composition",o),e.dispatch(V)}return}let i=e.state.doc.resolve(t),a=i.sharedDepth(n);t=i.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,c=s7e(e,t,n),u=e.state.doc,f=u.slice(c.from,c.to),m,g;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(m=e.state.selection.to,g="end"):(m=e.state.selection.from,g="start"),e.input.lastKeyCode=null;let y=u7e(f.content,c.doc.content,c.from,m,g);if(y&&e.input.domChangeCount++,(nb&&e.input.lastIOSEnter>Date.now()-225||Rf)&&s.some(P=>P.nodeType==1&&!i7e.test(P.nodeName))&&(!y||y.endA>=y.endB)&&e.someProp("handleKeyDown",P=>P(e,zp(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!y)if(r&&l instanceof Cn&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))y={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let P=PB(e,e.state.doc,c.sel);if(P&&!P.eq(e.state.selection)){let j=e.state.tr.setSelection(P);o&&j.setMeta("composition",o),e.dispatch(j)}}return}e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof Cn&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),pl&&b0<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>c.from&&c.doc.textBetween(y.start-c.from-1,y.start-c.from+1)==" "&&(y.start--,y.endA--,y.endB--);let v=c.doc.resolveNoCache(y.start-c.from),x=c.doc.resolveNoCache(y.endB-c.from),E=u.resolve(y.start),T=v.sameParent(x)&&v.parent.inlineContent&&E.end()>=y.endA;if((nb&&e.input.lastIOSEnter>Date.now()-225&&(!T||s.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!T&&v.pos<c.doc.content.size&&(!v.sameParent(x)||!v.parent.inlineContent)&&v.pos<x.pos&&!/\S/.test(c.doc.textBetween(v.pos,x.pos,"","")))&&e.someProp("handleKeyDown",P=>P(e,zp(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>y.start&&c7e(u,y.start,y.endA,v,x)&&e.someProp("handleKeyDown",P=>P(e,zp(8,"Backspace")))){Rf&&ji&&e.domObserver.suppressSelectionUpdates();return}ji&&y.endB==y.start&&(e.input.lastChromeDelete=Date.now()),Rf&&!T&&v.start()!=x.start()&&x.parentOffset==0&&v.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==y.endA&&(y.endB-=2,x=c.doc.resolveNoCache(y.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(P){return P(e,zp(13,"Enter"))})},20));let k=y.start,I=y.endA,O=P=>{let j=P||e.state.tr.replace(k,I,c.doc.slice(y.start-c.from,y.endB-c.from));if(c.sel){let V=PB(e,j.doc,c.sel);V&&!(ji&&e.composing&&V.empty&&(y.start!=y.endB||e.input.lastChromeDelete<Date.now()-100)&&(V.head==k||V.head==j.mapping.map(I)-1)||pl&&V.empty&&V.head==k)&&j.setSelection(V)}return o&&j.setMeta("composition",o),j.scrollIntoView()},M;if(T)if(v.pos==x.pos){pl&&b0<=11&&v.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Bf(e),20));let P=O(e.state.tr.delete(k,I)),j=u.resolve(y.start).marksAcross(u.resolve(y.endA));j&&P.ensureMarks(j),e.dispatch(P)}else if(y.endA==y.endB&&(M=l7e(v.parent.content.cut(v.parentOffset,x.parentOffset),E.parent.content.cut(E.parentOffset,y.endA-E.start())))){let P=O(e.state.tr);M.type=="add"?P.addMark(k,I,M.mark):P.removeMark(k,I,M.mark),e.dispatch(P)}else if(v.parent.child(v.index()).isText&&v.index()==x.index()-(x.textOffset?0:1)){let P=v.parent.textBetween(v.parentOffset,x.parentOffset),j=()=>O(e.state.tr.insertText(P,k,I));e.someProp("handleTextInput",V=>V(e,k,I,P,j))||e.dispatch(j())}else e.dispatch(O());else e.dispatch(O())}function PB(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:g7(e,t.resolve(n.anchor),t.resolve(n.head))}function l7e(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,s=n,o=r,i,a,l;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(s.length==1&&o.length==0)a=s[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&o.length==1)a=o[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(pt.from(c).eq(e))return{mark:a,type:i}}function c7e(e,t,n,r,s){if(n-t<=s.pos-r.pos||v5(r,!0,!1)<s.pos)return!1;let o=e.resolve(t);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==t+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let i=e.resolve(v5(o,!0,!0));return!i.parent.isTextblock||i.pos>n||v5(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function v5(e,t,n){let r=e.depth,s=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,s++,t=!1;if(n){let o=e.node(r).maybeChild(e.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function u7e(e,t,n,r,s){let o=e.findDiffStart(t,n);if(o==null)return null;let{a:i,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(s=="end"){let l=Math.max(0,o-Math.min(i,a));r-=i+l-o}if(i<o&&e.size<t.size){let l=r<=o&&r>=i?o-r:0;o-=l,o&&o<t.size&&LB(t.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-i),i=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<e.size&&LB(e.textBetween(o-1,o+1))&&(o+=l?1:-1),i=o+(i-a),a=o}return{start:o,endA:i,endB:a}}function LB(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class $Q{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new k8e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(jB),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=BB(this),FB(this),this.nodeViews=zB(this),this.docView=bB(this.state.doc,$B(this),y5(this),this.dom,this),this.domObserver=new e7e(this,(r,s,o,i)=>a7e(this,r,s,o,i)),this.domObserver.start(),A8e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&R6(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(jB),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let s=this.state,o=!1,i=!1;t.storedMarks&&this.composing&&(IQ(this),i=!0),this.state=t;let a=s.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let g=zB(this);f7e(g,this.nodeViews)&&(this.nodeViews=g,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&R6(this),this.editable=BB(this),FB(this);let l=y5(this),c=$B(this),u=s.plugins!=t.plugins&&!s.doc.eq(t.doc)?"reset":t.scrollToSelection>s.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(t.doc,c,l);(f||!t.selection.eq(s.selection))&&(i=!0);let m=u=="preserve"&&i&&this.dom.style.overflowAnchor==null&&URe(this);if(i){this.domObserver.stop();let g=f&&(pl||ji)&&!this.composing&&!s.selection.empty&&!t.selection.empty&&d7e(s.selection,t.selection);if(f){let y=ji?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=U8e(this)),(o||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=bB(t.doc,c,l,this.dom,this)),y&&!this.trackWrites&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&f8e(this))?Bf(this,g):(yQ(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():m&&HRe(m)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof kn){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&dB(this,n.getBoundingClientRect(),t)}else dB(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new MQ(t.slice,t.move,s<0?void 0:kn.create(this.state.doc,s))}someProp(t,n){let r=this._props&&this._props[t],s;if(r!=null&&(s=n?n(r):r))return s;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[t];if(a!=null&&(s=n?n(a):a))return s}let o=this.state.plugins;if(o)for(let i=0;i<o.length;i++){let a=o[i].props[t];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(pl){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&VRe(this.dom),Bf(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return KRe(this,t)}coordsAtPos(t,n=1){return uQ(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let s=this.docView.posFromDOM(t,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(t,n){return e8e(this,n||this.state,t)}pasteHTML(t,n){return Dx(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Dx(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return b7(this,t)}destroy(){this.docView&&(N8e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],y5(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,MRe())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return R8e(this,t)}domSelectionRange(){let t=this.domSelection();return t?ba&&this.root.nodeType===11&&$Re(this.dom.ownerDocument)==this.dom&&n7e(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}$Q.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function $B(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[sa.node(0,e.state.doc.content.size,t)]}function FB(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:sa.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function BB(e){return!e.someProp("editable",t=>t(e.state)===!1)}function d7e(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function zB(e){let t=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(t,s)||(t[s]=r[s])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function f7e(e,t){let n=0,r=0;for(let s in e){if(e[s]!=t[s])return!0;n++}for(let s in t)r++;return n!=r}function jB(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var k0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},QS={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},h7e=typeof navigator<"u"&&/Mac/.test(navigator.platform),p7e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var na=0;na<10;na++)k0[48+na]=k0[96+na]=String(na);for(var na=1;na<=24;na++)k0[na+111]="F"+na;for(var na=65;na<=90;na++)k0[na]=String.fromCharCode(na+32),QS[na]=String.fromCharCode(na);for(var x5 in k0)QS.hasOwnProperty(x5)||(QS[x5]=k0[x5]);function m7e(e){var t=h7e&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||p7e&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?QS:k0)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const g7e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),b7e=typeof navigator<"u"&&/Win/.test(navigator.platform);function y7e(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))g7e?i=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),i&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function v7e(e){let t=Object.create(null);for(let n in e)t[y7e(n)]=e[n];return t}function w5(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function x7e(e){return new Ir({props:{handleKeyDown:_7(e)}})}function _7(e){let t=v7e(e);return function(n,r){let s=m7e(r),o,i=t[w5(s,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=t[w5(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(b7e&&r.ctrlKey&&r.altKey)&&(o=k0[r.keyCode])&&o!=s){let a=t[w5(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var w7e=Object.defineProperty,S7=(e,t)=>{for(var n in t)w7e(e,n,{get:t[n],enumerable:!0})};function CC(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}var kC=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:r}=this,{view:s}=n,{tr:o}=r,i=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...u)=>{const f=l(...u)(i);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a=[],l=!!t,c=t||o.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(m=>m===!0)),f={...Object.fromEntries(Object.entries(r).map(([m,g])=>[m,(...v)=>{const x=this.buildProps(c,n),E=g(...v)(x);return a.push(E),f}])),run:u};return f}createCan(t){const{rawCommands:n,state:r}=this,s=!1,o=t||r.tr,i=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(o,s)}}buildProps(t,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a={tr:t,editor:s,view:i,state:CC({state:o,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t,n),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}},FQ={};S7(FQ,{blur:()=>E7e,clearContent:()=>_7e,clearNodes:()=>S7e,command:()=>T7e,createParagraphNear:()=>C7e,cut:()=>k7e,deleteCurrentNode:()=>A7e,deleteNode:()=>N7e,deleteRange:()=>I7e,deleteSelection:()=>R7e,enter:()=>M7e,exitCode:()=>O7e,extendMarkRange:()=>D7e,first:()=>P7e,focus:()=>L7e,forEach:()=>$7e,insertContent:()=>F7e,insertContentAt:()=>j7e,joinBackward:()=>V7e,joinDown:()=>H7e,joinForward:()=>q7e,joinItemBackward:()=>G7e,joinItemForward:()=>W7e,joinTextblockBackward:()=>Y7e,joinTextblockForward:()=>K7e,joinUp:()=>U7e,keyboardShortcut:()=>J7e,lift:()=>X7e,liftEmptyBlock:()=>Q7e,liftListItem:()=>eMe,newlineInCode:()=>tMe,resetAttributes:()=>nMe,scrollIntoView:()=>rMe,selectAll:()=>sMe,selectNodeBackward:()=>oMe,selectNodeForward:()=>iMe,selectParentNode:()=>aMe,selectTextblockEnd:()=>lMe,selectTextblockStart:()=>cMe,setContent:()=>uMe,setMark:()=>NMe,setMeta:()=>IMe,setNode:()=>RMe,setNodeSelection:()=>MMe,setTextDirection:()=>OMe,setTextSelection:()=>DMe,sinkListItem:()=>PMe,splitBlock:()=>LMe,splitListItem:()=>$Me,toggleList:()=>FMe,toggleMark:()=>BMe,toggleNode:()=>zMe,toggleWrap:()=>jMe,undoInputRule:()=>UMe,unsetAllMarks:()=>HMe,unsetMark:()=>VMe,unsetTextDirection:()=>qMe,updateAttributes:()=>GMe,wrapIn:()=>WMe,wrapInList:()=>YMe});var E7e=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),_7e=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),S7e=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:i})=>{e.doc.nodesBetween(o.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=t,f=c.resolve(u.map(l)),m=c.resolve(u.map(l+a.nodeSize)),g=f.blockRange(m);if(!g)return;const y=Lm(g);if(a.type.isTextblock){const{defaultType:v}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(g.start,v)}(y||y===0)&&t.lift(g,y)})}),!0},T7e=e=>t=>e(t),C7e=()=>({state:e,dispatch:t})=>d7(e,t),k7e=(e,t)=>({editor:n,tr:r})=>{const{state:s}=n,o=s.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const i=r.mapping.map(t);return r.insert(i,o.content),r.setSelection(new Cn(r.doc.resolve(Math.max(i-1,0)))),!0},A7e=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(t){const a=s.before(o),l=s.after(o);e.delete(a,l).scrollIntoView()}return!0}return!1};function hi(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var N7e=e=>({tr:t,state:n,dispatch:r})=>{const s=hi(e,n.schema),o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const l=o.before(i),c=o.after(i);t.delete(l,c).scrollIntoView()}return!0}return!1},I7e=e=>({tr:t,dispatch:n})=>{const{from:r,to:s}=e;return n&&t.delete(r,s),!0},R7e=()=>({state:e,dispatch:t})=>EC(e,t),M7e=()=>({commands:e})=>e.keyboardShortcut("Enter"),O7e=()=>({state:e,dispatch:t})=>WX(e,t);function T7(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function eT(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(s=>n.strict?t[s]===e[s]:T7(t[s])?t[s].test(e[s]):t[s]===e[s]):!0}function BQ(e,t,n={}){return e.find(r=>r.type===t&&eT(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function UB(e,t,n={}){return!!BQ(e,t,n)}function C7(e,t,n){var r;if(!e||!t)return;let s=e.parent.childAfter(e.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===t))&&(s=e.parent.childBefore(e.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===t)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!BQ([...s.node.marks],t,n)))return;let i=s.index,a=e.start()+s.offset,l=i+1,c=a+s.node.nodeSize;for(;i>0&&UB([...e.parent.child(i-1).marks],t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;l<e.parent.childCount&&UB([...e.parent.child(l).marks],t,n);)c+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function nh(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var D7e=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const o=nh(e,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(s){const f=C7(l,o,t);if(f&&f.from<=c&&f.to>=u){const m=Cn.create(i,f.from,f.to);n.setSelection(m)}}return!0},P7e=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function k7(e){return e instanceof Cn}function Mf(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function zQ(e,t=null){if(!t)return null;const n=Dn.atStart(e),r=Dn.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const s=n.from,o=r.to;return t==="all"?Cn.create(e,Mf(0,s,o),Mf(e.content.size,s,o)):Cn.create(e,Mf(t,s,o),Mf(t,s,o))}function jQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function AC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var L7e=(e=null,t={})=>({editor:n,view:r,tr:s,dispatch:o})=>{t={scrollIntoView:!0,...t};const i=()=>{(AC()||jQ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(o&&e===null&&!k7(n.state.selection))return i(),!0;const a=zQ(s.doc,e)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0},$7e=(e,t)=>n=>e.every((r,s)=>t(r,{...n,index:s})),F7e=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),UQ=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&UQ(r)}return e};function k2(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return UQ(n)}function Lx(e,t,n){if(e instanceof Ff||e instanceof pt)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,s=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return pt.fromArray(e.map(a=>t.nodeFromJSON(a)));const i=t.nodeFromJSON(e);return n.errorOnInvalidContent&&i.check(),i}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",o),Lx("",t,n)}if(s){if(n.errorOnInvalidContent){let i=!1,a="";const l=new J8({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?g0.fromSchema(l).parseSlice(k2(e),n.parseOptions):g0.fromSchema(l).parse(k2(e),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=g0.fromSchema(t);return n.slice?o.parseSlice(k2(e),n.parseOptions).content:o.parse(k2(e),n.parseOptions)}return Lx("",t,n)}function B7e(e,t,n){const r=e.steps.length-1;if(r<t)return;const s=e.steps[r];if(!(s instanceof ci||s instanceof Ai))return;const o=e.mapping.maps[r];let i=0;o.forEach((a,l,c,u)=>{i===0&&(i=u)}),e.setSelection(Dn.near(e.doc.resolve(i),n))}var z7e=e=>!("type"in e),j7e=(e,t,n)=>({tr:r,dispatch:s,editor:o})=>{var i;if(s){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=x=>{o.emit("contentError",{editor:o,error:x,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Lx(t,o.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(x){l(x)}try{a=Lx(t,o.schema,{parseOptions:c,errorOnInvalidContent:(i=n.errorOnInvalidContent)!=null?i:o.options.enableContentCheck})}catch(x){return l(x),!1}let{from:u,to:f}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},m=!0,g=!0;if((z7e(a)?a:[a]).forEach(x=>{x.check(),m=m?x.isText&&x.marks.length===0:!1,g=g?x.isBlock:!1}),u===f&&g){const{parent:x}=r.doc.resolve(u);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(u-=1,f+=1)}let v;if(m){if(Array.isArray(t))v=t.map(x=>x.text||"").join("");else if(t instanceof pt){let x="";t.forEach(E=>{E.text&&(x+=E.text)}),v=x}else typeof t=="object"&&t&&t.text?v=t.text:v=t;r.insertText(v,u,f)}else{v=a;const x=r.doc.resolve(u),E=x.node(),T=x.parentOffset===0,k=E.isText||E.isTextblock,I=E.content.size>0;T&&k&&I&&(u=Math.max(0,u-1)),r.replaceWith(u,f,v)}n.updateSelection&&B7e(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:v}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:v})}return!0},U7e=()=>({state:e,dispatch:t})=>VX(e,t),H7e=()=>({state:e,dispatch:t})=>qX(e,t),V7e=()=>({state:e,dispatch:t})=>r7(e,t),q7e=()=>({state:e,dispatch:t})=>i7(e,t),G7e=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Nb(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},W7e=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Nb(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Y7e=()=>({state:e,dispatch:t})=>zX(e,t),K7e=()=>({state:e,dispatch:t})=>jX(e,t);function HQ(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Z7e(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))AC()||HQ()?i=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var J7e=e=>({editor:t,view:n,tr:r,dispatch:s})=>{const o=Z7e(e).split(/-(?!$)/),i=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function A0(e,t,n={}){const{from:r,to:s,empty:o}=e.selection,i=t?hi(t,e.schema):null,a=[];e.doc.nodesBetween(r,s,(f,m)=>{if(f.isText)return;const g=Math.max(r,m),y=Math.min(s,m+f.nodeSize);a.push({node:f,from:g,to:y})});const l=s-r,c=a.filter(f=>i?i.name===f.node.type.name:!0).filter(f=>eT(f.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((f,m)=>f+m.to-m.from,0)>=l}var X7e=(e,t={})=>({state:n,dispatch:r})=>{const s=hi(e,n.schema);return A0(n,s,t)?GX(n,r):!1},Q7e=()=>({state:e,dispatch:t})=>f7(e,t),eMe=e=>({state:t,dispatch:n})=>{const r=hi(e,t.schema);return tQ(r)(t,n)},tMe=()=>({state:e,dispatch:t})=>c7(e,t);function NC(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function HB(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,s)=>(n.includes(s)||(r[s]=e[s]),r),{})}var nMe=(e,t)=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=NC(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(o=hi(e,r.schema)),a==="mark"&&(i=nh(e,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,f)=>{o&&o===u.type&&(l=!0,s&&n.setNodeMarkup(f,void 0,HB(u.attrs,t))),i&&u.marks.length&&u.marks.forEach(m=>{i===m.type&&(l=!0,s&&n.addMark(f,f+u.nodeSize,i.create(HB(m.attrs,t))))})})}),l},rMe=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),sMe=()=>({tr:e,dispatch:t})=>{if(t){const n=new hl(e.doc);e.setSelection(n)}return!0},oMe=()=>({state:e,dispatch:t})=>s7(e,t),iMe=()=>({state:e,dispatch:t})=>a7(e,t),aMe=()=>({state:e,dispatch:t})=>YX(e,t),lMe=()=>({state:e,dispatch:t})=>XX(e,t),cMe=()=>({state:e,dispatch:t})=>JX(e,t);function M6(e,t,n={},r={}){return Lx(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var uMe=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:o,dispatch:i,commands:a})=>{const{doc:l}=o;if(r.preserveWhitespace!=="full"){const c=M6(e,s.schema,r,{errorOnInvalidContent:t??s.options.enableContentCheck});return i&&o.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return i&&o.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:t??s.options.enableContentCheck})};function VQ(e,t){const n=nh(t,e.schema),{from:r,to:s,empty:o}=e.selection,i=[];o?(e.storedMarks&&i.push(...e.storedMarks),i.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,s,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function qQ(e,t){const n=new t7(e);return t.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function dMe(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function O6(e,t){const n=[];return e.descendants((r,s)=>{t(r)&&n.push({node:r,pos:s})}),n}function fMe(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(s,o)=>{n(s)&&r.push({node:s,pos:o})}),r}function hMe(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function IC(e){return t=>hMe(t.$from,e)}function On(e,t,n){return e.config[t]===void 0&&e.parent?On(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?On(e.parent,t,n):null}):e.config[t]}function A7(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=On(t,"addExtensions",n);return r?[t,...A7(r())]:t}).flat(10)}function N7(e,t){const n=Pm.fromSchema(t).serializeFragment(e),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function GQ(e){return typeof e=="function"}function _s(e,t=void 0,...n){return GQ(e)?t?e.bind(t)(...n):e(...n):e}function pMe(e={}){return Object.keys(e).length===0&&e.constructor===Object}function rb(e){const t=e.filter(s=>s.type==="extension"),n=e.filter(s=>s.type==="node"),r=e.filter(s=>s.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function WQ(e){const t=[],{nodeExtensions:n,markExtensions:r}=rb(e),s=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:s},l=On(i,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([m,g])=>{t.push({type:f,name:m,attribute:{...o,...g}})})})})}),s.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=On(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,f])=>{const m={...o,...f};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,t.push({type:i.name,name:u,attribute:m})})}),t}function Vo(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const a=o?String(o).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[f,m]=u.split(":").map(g=>g.trim());c.set(f,m)}),a.forEach(u=>{const[f,m]=u.split(":").map(g=>g.trim());c.set(f,m)}),r[s]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[s]=o}),r},{})}function $x(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Vo(n,r),{})}function mMe(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function VB(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const s=t.reduce((o,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):mMe(n.getAttribute(i.name));return a==null?o:{...o,[i.name]:a}},{});return{...r,...s}}}}function qB(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&pMe(n)?!1:n!=null))}function GB(e){var t,n;const r={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(r.default=e.attribute.default),((n=e==null?void 0:e.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=e.attribute.validate),[e.name,r]}function gMe(e,t){var n;const r=WQ(e),{nodeExtensions:s,markExtensions:o}=rb(e),i=(n=s.find(c=>On(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(E=>E.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},m=e.reduce((E,T)=>{const k=On(T,"extendNodeSchema",f);return{...E,...k?k(c):{}}},{}),g=qB({...m,content:_s(On(c,"content",f)),marks:_s(On(c,"marks",f)),group:_s(On(c,"group",f)),inline:_s(On(c,"inline",f)),atom:_s(On(c,"atom",f)),selectable:_s(On(c,"selectable",f)),draggable:_s(On(c,"draggable",f)),code:_s(On(c,"code",f)),whitespace:_s(On(c,"whitespace",f)),linebreakReplacement:_s(On(c,"linebreakReplacement",f)),defining:_s(On(c,"defining",f)),isolating:_s(On(c,"isolating",f)),attrs:Object.fromEntries(u.map(GB))}),y=_s(On(c,"parseHTML",f));y&&(g.parseDOM=y.map(E=>VB(E,u)));const v=On(c,"renderHTML",f);v&&(g.toDOM=E=>v({node:E,HTMLAttributes:$x(E,u)}));const x=On(c,"renderText",f);return x&&(g.toText=x),[c.name,g]})),l=Object.fromEntries(o.map(c=>{const u=r.filter(x=>x.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},m=e.reduce((x,E)=>{const T=On(E,"extendMarkSchema",f);return{...x,...T?T(c):{}}},{}),g=qB({...m,inclusive:_s(On(c,"inclusive",f)),excludes:_s(On(c,"excludes",f)),group:_s(On(c,"group",f)),spanning:_s(On(c,"spanning",f)),code:_s(On(c,"code",f)),attrs:Object.fromEntries(u.map(GB))}),y=_s(On(c,"parseHTML",f));y&&(g.parseDOM=y.map(x=>VB(x,u)));const v=On(c,"renderHTML",f);return v&&(g.toDOM=x=>v({mark:x,HTMLAttributes:$x(x,u)})),[c.name,g]}));return new J8({topNode:i,nodes:a,marks:l})}function bMe(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function I7(e){return e.sort((n,r)=>{const s=On(n,"priority")||100,o=On(r,"priority")||100;return s>o?-1:s<o?1:0})}function YQ(e){const t=I7(A7(e)),n=bMe(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function KQ(e,t,n){const{from:r,to:s}=t,{blockSeparator:o=`

`,textSerializers:i={}}=n||{};let a="";return e.nodesBetween(r,s,(l,c,u,f)=>{var m;l.isBlock&&c>r&&(a+=o);const g=i==null?void 0:i[l.type.name];if(g)return u&&(a+=g({node:l,pos:c,parent:u,index:f,range:t})),!1;l.isText&&(a+=(m=l==null?void 0:l.text)==null?void 0:m.slice(Math.max(r,c)-c,s-c))}),a}function ZQ(e,t){const n={from:0,to:e.content.size};return KQ(e,n,t)}function R7(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function yMe(e,t){const n=hi(t,e.schema),{from:r,to:s}=e.selection,o=[];e.doc.nodesBetween(r,s,a=>{o.push(a)});const i=o.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function JQ(e,t){const n=NC(typeof t=="string"?t:t.name,e.schema);return n==="node"?yMe(e,t):n==="mark"?VQ(e,t):{}}function vMe(e,t=JSON.stringify){const n={};return e.filter(r=>{const s=t(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function xMe(e){const t=vMe(e);return t.length===1?t:t.filter((n,r)=>!t.filter((o,i)=>i!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function XQ(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((s,o)=>{const i=[];if(s.ranges.length)s.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[o];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=t.slice(o).map(a,-1),u=t.slice(o).map(l),f=t.invert().map(c,-1),m=t.invert().map(u);r.push({oldRange:{from:f,to:m},newRange:{from:c,to:u}})})}),xMe(r)}function M7(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(s=>{const o=n.resolve(e),i=C7(o,s.type);i&&r.push({mark:s,...i})}):n.nodesBetween(e,t,(s,o)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(i=>({from:o,to:o+s.nodeSize,mark:i})))}),r}var wMe=(e,t,n,r=20)=>{const s=e.doc.resolve(n);let o=r,i=null;for(;o>0&&i===null;){const a=s.node(o);(a==null?void 0:a.type.name)===t?i=a:o-=1}return[i,o]};function E5(e,t){return t.nodes[e]||t.marks[e]||null}function O_(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=e.find(o=>o.type===t&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}var EMe=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(s,o,i,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)==null?void 0:c.call(l,{node:s,pos:o,parent:i,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-o))}),n};function D6(e,t,n={}){const{empty:r,ranges:s}=e.selection,o=t?nh(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>eT(f.attrs,n,{strict:!1}));let i=0;const a=[];if(s.forEach(({$from:f,$to:m})=>{const g=f.pos,y=m.pos;e.doc.nodesBetween(g,y,(v,x)=>{if(!v.isText&&!v.marks.length)return;const E=Math.max(g,x),T=Math.min(y,x+v.nodeSize),k=T-E;i+=k,a.push(...v.marks.map(I=>({mark:I,from:E,to:T})))})}),i===0)return!1;const l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>eT(f.mark.attrs,n,{strict:!1})).reduce((f,m)=>f+m.to-m.from,0),c=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,m)=>f+m.to-m.from,0);return(l>0?l+c:l)>=i}function _Me(e,t,n={}){if(!t)return A0(e,null,n)||D6(e,null,n);const r=NC(t,e.schema);return r==="node"?A0(e,t,n):r==="mark"?D6(e,t,n):!1}var SMe=(e,t)=>{const{$from:n,$to:r,$anchor:s}=e.selection;if(t){const o=IC(a=>a.type.name===t)(e.selection);if(!o)return!1;const i=e.doc.resolve(o.pos+1);return s.pos+1===i.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},TMe=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function WB(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function YB(e,t){const{nodeExtensions:n}=rb(t),r=n.find(i=>i.name===e);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=_s(On(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function RC(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let s=!0;return e.content.forEach(o=>{s!==!1&&(RC(o,{ignoreWhitespace:n,checkChildren:t})||(s=!1))}),s}return!1}function QQ(e){return e instanceof kn}var eee=class tee{constructor(t){this.position=t}static fromJSON(t){return new tee(t.position)}toJSON(){return{position:this.position}}};function CMe(e,t){const n=t.mapping.mapResult(e.position);return{position:new eee(n.pos),mapResult:n}}function kMe(e){return new eee(e)}function nee(e,t,n){const s=e.state.doc.content.size,o=Mf(t,0,s),i=Mf(n,0,s),a=e.coordsAtPos(o),l=e.coordsAtPos(i,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),m=Math.max(a.right,l.right),g=m-f,y=u-c,E={top:c,bottom:u,left:f,right:m,width:g,height:y,x:f,y:c};return{...E,toJSON:()=>E}}function AMe(e,t,n){var r;const{selection:s}=t;let o=null;if(k7(s)&&(o=s.$cursor),o){const a=(r=e.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:i}=s;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(u,f,m)=>{if(c)return!1;if(u.isInline){const g=!m||m.type.allowsMarkType(n),y=!!n.isInSet(u.marks)||!u.marks.some(v=>v.type.excludes(n));c=g&&y}return!c}),c})}var NMe=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:i,ranges:a}=o,l=nh(e,r.schema);if(s)if(i){const c=VQ(r,l);n.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(m,g)=>{const y=Math.max(g,u),v=Math.min(g+m.nodeSize,f);m.marks.find(E=>E.type===l)?m.marks.forEach(E=>{l===E.type&&n.addMark(y,v,l.create({...E.attrs,...t}))}):n.addMark(y,v,l.create(t))})});return AMe(r,n,l)},IMe=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),RMe=(e,t={})=>({state:n,dispatch:r,chain:s})=>{const o=hi(e,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:a})=>WS(o,{...i,...t})(n)?!0:a.clearNodes()).command(({state:a})=>WS(o,{...i,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},MMe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,s=Mf(e,0,r.content.size),o=kn.create(r,s);t.setSelection(o)}return!0},OMe=(e,t)=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=r;let i,a;return typeof t=="number"?(i=t,a=t):t&&"from"in t&&"to"in t?(i=t.from,a=t.to):(i=o.from,a=o.to),s&&n.doc.nodesBetween(i,a,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:e})}),!0},DMe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:s,to:o}=typeof e=="number"?{from:e,to:e}:e,i=Cn.atStart(r).from,a=Cn.atEnd(r).to,l=Mf(s,i,a),c=Mf(o,i,a),u=Cn.create(r,l,c);t.setSelection(u)}return!0},PMe=e=>({state:t,dispatch:n})=>{const r=hi(e,t.schema);return nQ(r)(t,n)};function KB(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(s=>t==null?void 0:t.includes(s.type.name));e.tr.ensureMarks(r)}}var LMe=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:i}=t,{$from:a,$to:l}=o,c=s.extensionManager.attributes,u=O_(c,a.node().type.name,a.node().attrs);if(o instanceof kn&&o.node.isBlock)return!a.parentOffset||!Yl(i,a.pos)?!1:(r&&(e&&KB(n,s.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,m=a.depth===0?void 0:dMe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let g=f&&m?[{type:m,attrs:u}]:void 0,y=Yl(t.doc,t.mapping.map(a.pos),1,g);if(!g&&!y&&Yl(t.doc,t.mapping.map(a.pos),1,m?[{type:m}]:void 0)&&(y=!0,g=m?[{type:m,attrs:u}]:void 0),r){if(y&&(o instanceof Cn&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,g),m&&!f&&!a.parentOffset&&a.parent.type!==m)){const v=t.mapping.map(a.before()),x=t.doc.resolve(v);a.node(-1).canReplaceWith(x.index(),x.index()+1,m)&&t.setNodeMarkup(t.mapping.map(a.before()),m)}e&&KB(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return y},$Me=(e,t={})=>({tr:n,state:r,dispatch:s,editor:o})=>{var i;const a=hi(e,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const m=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let E=pt.empty;const T=l.index(-1)?1:l.index(-2)?2:3;for(let j=l.depth-T;j>=l.depth-3;j-=1)E=pt.from(l.node(j).copy(E));const k=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,I={...O_(m,l.node().type.name,l.node().attrs),...t},O=((i=a.contentMatch.defaultType)==null?void 0:i.createAndFill(I))||void 0;E=E.append(pt.from(a.createAndFill(null,O)||void 0));const M=l.before(l.depth-(T-1));n.replace(M,l.after(-k),new Yt(E,4-T,0));let P=-1;n.doc.nodesBetween(M,n.doc.content.size,(j,V)=>{if(P>-1)return!1;j.isTextblock&&j.content.size===0&&(P=V+1)}),P>-1&&n.setSelection(Cn.near(n.doc.resolve(P))),n.scrollIntoView()}return!0}const g=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,y={...O_(m,f.type.name,f.attrs),...t},v={...O_(m,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const x=g?[{type:a,attrs:y},{type:g,attrs:v}]:[{type:a,attrs:y}];if(!Yl(n.doc,l.pos,2))return!1;if(s){const{selection:E,storedMarks:T}=r,{splittableMarks:k}=o.extensionManager,I=T||E.$to.parentOffset&&E.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!I||!s)return!0;const O=I.filter(M=>k.includes(M.type.name));n.ensureMarks(O)}return!0},_5=(e,t)=>{const n=IC(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Sd(e.doc,n.pos)&&e.join(n.pos),!0},S5=(e,t)=>{const n=IC(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Sd(e.doc,r)&&e.join(r),!0},FMe=(e,t,n,r={})=>({editor:s,tr:o,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:m}=s.extensionManager,g=hi(e,i.schema),y=hi(t,i.schema),{selection:v,storedMarks:x}=i,{$from:E,$to:T}=v,k=E.blockRange(T),I=x||v.$to.parentOffset&&v.$from.marks();if(!k)return!1;const O=IC(M=>YB(M.type.name,f))(v);if(k.depth>=1&&O&&k.depth-O.depth<=1){if(O.node.type===g)return c.liftListItem(y);if(YB(O.node.type.name,f)&&g.validContent(O.node.content)&&a)return l().command(()=>(o.setNodeMarkup(O.pos,g),!0)).command(()=>_5(o,g)).command(()=>S5(o,g)).run()}return!n||!I||!a?l().command(()=>u().wrapInList(g,r)?!0:c.clearNodes()).wrapInList(g,r).command(()=>_5(o,g)).command(()=>S5(o,g)).run():l().command(()=>{const M=u().wrapInList(g,r),P=I.filter(j=>m.includes(j.type.name));return o.ensureMarks(P),M?!0:c.clearNodes()}).wrapInList(g,r).command(()=>_5(o,g)).command(()=>S5(o,g)).run()},BMe=(e,t={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,i=nh(e,r.schema);return D6(r,i,t)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,t)},zMe=(e,t,n={})=>({state:r,commands:s})=>{const o=hi(e,r.schema),i=hi(t,r.schema),a=A0(r,o,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(i,l):s.setNode(o,{...l,...n})},jMe=(e,t={})=>({state:n,commands:r})=>{const s=hi(e,n.schema);return A0(n,s,t)?r.lift(s):r.wrapIn(s,t)},UMe=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(e))){if(t){const i=e.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,e.schema.text(o.text,l))}else i.delete(o.from,o.to)}return!0}}return!1},HMe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:s}=n;return r||t&&s.forEach(o=>{e.removeMark(o.$from.pos,o.$to.pos)}),!0},VMe=(e,t={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=t,{selection:a}=n,l=nh(e,r.schema),{$from:c,empty:u,ranges:f}=a;if(!s)return!0;if(u&&i){let{from:m,to:g}=a;const y=(o=c.marks().find(x=>x.type===l))==null?void 0:o.attrs,v=C7(c,l,y);v&&(m=v.from,g=v.to),n.removeMark(m,g,l)}else f.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,l)});return n.removeStoredMark(l),!0},qMe=e=>({tr:t,state:n,dispatch:r})=>{const{selection:s}=n;let o,i;return typeof e=="number"?(o=e,i=e):e&&"from"in e&&"to"in e?(o=e.from,i=e.to):(o=s.from,i=s.to),r&&t.doc.nodesBetween(o,i,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,t.setNodeMarkup(l,void 0,c)}),!0},GMe=(e,t={})=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=NC(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(o=hi(e,r.schema)),a==="mark"&&(i=nh(e,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;let m,g,y,v;n.selection.empty?r.doc.nodesBetween(u,f,(x,E)=>{o&&o===x.type&&(l=!0,y=Math.max(E,u),v=Math.min(E+x.nodeSize,f),m=E,g=x)}):r.doc.nodesBetween(u,f,(x,E)=>{E<u&&o&&o===x.type&&(l=!0,y=Math.max(E,u),v=Math.min(E+x.nodeSize,f),m=E,g=x),E>=u&&E<=f&&(o&&o===x.type&&(l=!0,s&&n.setNodeMarkup(E,void 0,{...x.attrs,...t})),i&&x.marks.length&&x.marks.forEach(T=>{if(i===T.type&&(l=!0,s)){const k=Math.max(E,u),I=Math.min(E+x.nodeSize,f);n.addMark(k,I,i.create({...T.attrs,...t}))}}))}),g&&(m!==void 0&&s&&n.setNodeMarkup(m,void 0,{...g.attrs,...t}),i&&g.marks.length&&g.marks.forEach(x=>{i===x.type&&s&&n.addMark(y,v,i.create({...x.attrs,...t}))}))}),l},WMe=(e,t={})=>({state:n,dispatch:r})=>{const s=hi(e,n.schema);return QX(s,t)(n,r)},YMe=(e,t={})=>({state:n,dispatch:r})=>{const s=hi(e,n.schema);return eQ(s,t)(n,r)},KMe=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},Dw=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},ZMe=(e,t)=>{if(T7(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function A2(e){var t;const{editor:n,from:r,to:s,text:o,rules:i,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(t=c.nodeBefore||c.nodeAfter)!=null&&t.marks.find(m=>m.type.spec.code))return!1;let u=!1;const f=EMe(c)+o;return i.forEach(m=>{if(u)return;const g=ZMe(f,m.find);if(!g)return;const y=l.state.tr,v=CC({state:l.state,transaction:y}),x={from:r-(g[0].length-o.length),to:s},{commands:E,chain:T,can:k}=new kC({editor:n,state:v});m.handler({state:v,range:x,match:g,commands:E,chain:T,can:k})===null||!y.steps.length||(m.undoable&&y.setMeta(a,{transform:y,from:r,to:s,text:o}),l.dispatch(y),u=!0)}),u}function JMe(e){const{editor:t,rules:n}=e,r=new Ir({state:{init(){return null},apply(s,o,i){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=N7(pt.from(u),i.schema);const{from:f}=l,m=f+u.length;A2({editor:t,from:f,to:m,text:u,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,i,a){return A2({editor:t,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&A2({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:i}=s.state.selection;return i?A2({editor:t,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function XMe(e){return Object.prototype.toString.call(e).slice(8,-1)}function N2(e){return XMe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function ree(e,t){const n={...e};return N2(e)&&N2(t)&&Object.keys(t).forEach(r=>{N2(t[r])&&N2(e[r])?n[r]=ree(e[r],t[r]):n[r]=t[r]}),n}var O7=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{..._s(On(this,"addOptions",{name:this.name}))||{}}}get storage(){return{..._s(On(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const n=this.extend({...this.config,addOptions:()=>ree(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new this.constructor({...this.config,...t});return n.parent=this,this.child=n,n.name="name"in t?t.name:n.parent.name,n}},V0=class see extends O7{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new see(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,s=t.state.selection.$from;if(s.pos===s.end()){const i=s.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function QMe(e){return typeof e=="number"}var e9e=class{constructor(e){this.find=e.find,this.handler=e.handler}},t9e=(e,t,n)=>{if(T7(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=e,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function n9e(e){const{editor:t,state:n,from:r,to:s,rule:o,pasteEvent:i,dropEvent:a}=e,{commands:l,chain:c,can:u}=new kC({editor:t,state:n}),f=[];return n.doc.nodesBetween(r,s,(g,y)=>{var v,x,E,T,k;if((x=(v=g.type)==null?void 0:v.spec)!=null&&x.code||!(g.isText||g.isTextblock||g.isInline))return;const I=(k=(T=(E=g.content)==null?void 0:E.size)!=null?T:g.nodeSize)!=null?k:0,O=Math.max(r,y),M=Math.min(s,y+I);if(O>=M)return;const P=g.isText?g.text||"":g.textBetween(O-y,M-y,void 0,"");t9e(P,o.find,i).forEach(V=>{if(V.index===void 0)return;const U=O+V.index+1,z=U+V[0].length,H={from:n.tr.mapping.map(U),to:n.tr.mapping.map(z)},F=o.handler({state:n,range:H,match:V,commands:l,chain:c,can:u,pasteEvent:i,dropEvent:a});f.push(F)})}),f.every(g=>g!==null)}var I2=null,r9e=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function s9e(e){const{editor:t,rules:n}=e;let r=null,s=!1,o=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:f,to:m,rule:g,pasteEvt:y})=>{const v=u.tr,x=CC({state:u,transaction:v});if(!(!n9e({editor:t,state:x,from:Math.max(f-1,0),to:m.b-1,rule:g,pasteEvent:y,dropEvent:a})||!v.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}};return n.map(u=>new Ir({view(f){const m=y=>{var v;r=(v=f.dom.parentElement)!=null&&v.contains(y.target)?f.dom.parentElement:null,r&&(I2=t)},g=()=>{I2&&(I2=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",g),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",g)}}},props:{handleDOMEvents:{drop:(f,m)=>{if(o=r===f.dom.parentElement,a=m,!o){const g=I2;g!=null&&g.isEditable&&setTimeout(()=>{const y=g.state.selection;y&&g.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(f,m)=>{var g;const y=(g=m.clipboardData)==null?void 0:g.getData("text/html");return i=m,s=!!(y!=null&&y.includes("data-pm-slice")),!1}}},appendTransaction:(f,m,g)=>{const y=f[0],v=y.getMeta("uiEvent")==="paste"&&!s,x=y.getMeta("uiEvent")==="drop"&&!o,E=y.getMeta("applyPasteRules"),T=!!E;if(!v&&!x&&!T)return;if(T){let{text:O}=E;typeof O=="string"?O=O:O=N7(pt.from(O),g.schema);const{from:M}=E,P=M+O.length,j=r9e(O);return l({rule:u,state:g,from:M,to:{b:P},pasteEvt:j})}const k=m.doc.content.findDiffStart(g.doc.content),I=m.doc.content.findDiffEnd(g.doc.content);if(!(!QMe(k)||!I||k===I.b))return l({rule:u,state:g,from:k,to:I,pasteEvt:i})}}))}var MC=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=YQ(e),this.schema=gMe(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:E5(t.name,this.schema)},r=On(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return I7([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:E5(r.name,this.schema)},o=[],i=On(r,"addKeyboardShortcuts",s);let a={};if(r.type==="mark"&&On(r,"exitable",s)&&(a.ArrowRight=()=>V0.handleExit({editor:e,mark:r})),i){const m=Object.fromEntries(Object.entries(i()).map(([g,y])=>[g,()=>y({editor:e})]));a={...a,...m}}const l=x7e(a);o.push(l);const c=On(r,"addInputRules",s);if(WB(r,e.options.enableInputRules)&&c){const m=c();if(m&&m.length){const g=JMe({editor:e,rules:m}),y=Array.isArray(g)?g:[g];o.push(...y)}}const u=On(r,"addPasteRules",s);if(WB(r,e.options.enablePasteRules)&&u){const m=u();if(m&&m.length){const g=s9e({editor:e,rules:m});o.push(...g)}}const f=On(r,"addProseMirrorPlugins",s);if(f){const m=f();o.push(...m)}return o})}get attributes(){return WQ(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=rb(this.extensions);return Object.fromEntries(t.filter(n=>!!On(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:hi(n.name,this.schema)},o=On(n,"addNodeView",s);if(!o)return[];const i=o();if(!i)return[];const a=(l,c,u,f,m)=>{const g=$x(l,r);return i({node:l,view:c,getPos:u,decorations:f,innerDecorations:m,editor:e,extension:n,HTMLAttributes:g})};return[n.name,a]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=rb(this.extensions);return Object.fromEntries(t.filter(n=>!!On(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:nh(n.name,this.schema)},o=On(n,"addMarkView",s);if(!o)return[];const i=(a,l,c)=>{const u=$x(a,r);return o()({mark:a,view:l,inline:c,editor:e,extension:n,HTMLAttributes:u,updateAttributes:f=>{v9e(a,e,f)}})};return[n.name,i]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:E5(t.name,this.schema)};t.type==="mark"&&((n=_s(On(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const s=On(t,"onBeforeCreate",r),o=On(t,"onCreate",r),i=On(t,"onUpdate",r),a=On(t,"onSelectionUpdate",r),l=On(t,"onTransaction",r),c=On(t,"onFocus",r),u=On(t,"onBlur",r),f=On(t,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}};MC.resolve=YQ;MC.sort=I7;MC.flatten=A7;var o9e={};S7(o9e,{ClipboardTextSerializer:()=>iee,Commands:()=>aee,Delete:()=>lee,Drop:()=>cee,Editable:()=>uee,FocusEvents:()=>fee,Keymap:()=>hee,Paste:()=>pee,Tabindex:()=>mee,TextDirection:()=>gee,focusEventsPluginKey:()=>dee});var ys=class oee extends O7{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new oee(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},iee=ys.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ir({key:new Br("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:s}=t,{ranges:o}=s,i=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=R7(n);return KQ(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),aee=ys.create({name:"commands",addCommands(){return{...FQ}}}),lee=ys.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,s;const o=()=>{var i,a,l,c;if((c=(l=(a=(i=this.editor.options.coreExtensionOptions)==null?void 0:i.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,e))!=null?c:e.getMeta("y-sync$"))return;const u=qQ(e.before,[e,...t]);XQ(u).forEach(g=>{u.mapping.mapResult(g.oldRange.from).deletedAfter&&u.mapping.mapResult(g.oldRange.to).deletedBefore&&u.before.nodesBetween(g.oldRange.from,g.oldRange.to,(y,v)=>{const x=v+y.nodeSize-2,E=g.oldRange.from<=v&&x<=g.oldRange.to;this.editor.emit("delete",{type:"node",node:y,from:v,to:x,newFrom:u.mapping.map(v),newTo:u.mapping.map(x),deletedRange:g.oldRange,newRange:g.newRange,partial:!E,editor:this.editor,transaction:e,combinedTransform:u})})});const m=u.mapping;u.steps.forEach((g,y)=>{var v,x;if(g instanceof kc){const E=m.slice(y).map(g.from,-1),T=m.slice(y).map(g.to),k=m.invert().map(E,-1),I=m.invert().map(T),O=(v=u.doc.nodeAt(E-1))==null?void 0:v.marks.some(P=>P.eq(g.mark)),M=(x=u.doc.nodeAt(T))==null?void 0:x.marks.some(P=>P.eq(g.mark));this.editor.emit("delete",{type:"mark",mark:g.mark,from:g.from,to:g.to,deletedRange:{from:k,to:I},newRange:{from:E,to:T},partial:!!(M||O),editor:this.editor,transaction:e,combinedTransform:u})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(o,0):o()}}),cee=ys.create({name:"drop",addProseMirrorPlugins(){return[new Ir({key:new Br("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),uee=ys.create({name:"editable",addProseMirrorPlugins(){return[new Ir({key:new Br("editable"),props:{editable:()=>this.editor.options.editable}})]}}),dee=new Br("focusEvents"),fee=ys.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Ir({key:dee,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),hee=ys.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:m,parent:g}=f,y=f.parent.isTextblock&&m>0?a.doc.resolve(m-1):f,v=y.parent.type.spec.isolating,x=f.pos-f.parentOffset,E=v&&y.parent.childCount===1?x===f.pos:Dn.atStart(c).from===m;return!u||!g.type.isTextblock||g.textContent.length||!E||E&&f.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return AC()||HQ()?o:s},addProseMirrorPlugins(){return[new Ir({key:new Br("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(v=>v.getMeta("composition")))return;const r=e.some(v=>v.docChanged)&&!t.doc.eq(n.doc),s=e.some(v=>v.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:i,to:a}=t.selection,l=Dn.atStart(t.doc).from,c=Dn.atEnd(t.doc).to;if(o||!(i===l&&a===c)||!RC(n.doc))return;const m=n.tr,g=CC({state:n,transaction:m}),{commands:y}=new kC({editor:this.editor,state:g});if(y.clearNodes(),!!m.steps.length)return m}})]}}),pee=ys.create({name:"paste",addProseMirrorPlugins(){return[new Ir({key:new Br("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),mee=ys.create({name:"tabindex",addProseMirrorPlugins(){return[new Ir({key:new Br("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),gee=ys.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=rb(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new Ir({key:new Br("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),i9e=class i1{constructor(t,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new i1(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new i1(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new i1(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,i=this.pos+r+(o?0:1);if(i<0||i>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(i);if(!s&&a.depth<=this.depth)return;const l=new i1(a,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),t.push(new i1(a,this.editor,s,s?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===t)if(Object.keys(n).length>0){const o=s.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(o[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(n);return this.children.forEach(i=>{r&&s.length>0||(i.node.type.name===t&&o.every(l=>n[l]===i.node.attrs[l])&&s.push(i),!(r&&s.length>0)&&(s=s.concat(i.querySelectorAll(t,n,r))))}),s}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},a9e=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function l9e(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.setAttribute("data-tiptap-style",""),s.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(s),s}var c9e=class extends KMe{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:CMe,createMappablePosition:kMe},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:o})=>this.options.onDrop(r,s,o)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=zQ(t,this.options.autofocus);this.editorState=p1.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=l9e(a9e,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=GQ(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;n=n.filter(i=>!i.key.startsWith(o))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[uee,iee.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),aee,fee,hee,mee,cee,pee,lee,gee.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new MC(r,this)}createCommandManager(){this.commandManager=new kC({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=M6(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=M6(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new $Q(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),s=n.includes(e),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!s)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=i==null?void 0:i.getMeta("focus"),l=i==null?void 0:i.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:i}),l&&this.emit("blur",{editor:this,event:l.event,transaction:i}),!(e.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||o.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return JQ(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return _Me(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return N7(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return ZQ(this.state.doc,{blockSeparator:t,textSerializers:{...R7(this.schema),...n}})}get isEmpty(){return RC(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new i9e(t,this)}get $doc(){return this.$pos(0)}};function sb(e){return new Dw({find:e.find,handler:({state:t,range:n,match:r})=>{const s=_s(e.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=t,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),u=c+i.length;if(M7(n.from,n.to,t.doc).filter(g=>g.mark.type.excluded.find(v=>v===e.type&&v!==g.mark.type)).filter(g=>g.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+l,c);const m=n.from+l+i.length;o.addMark(n.from+l,m,e.type.create(s||{})),o.removeStoredMark(e.type)}},undoable:e.undoable})}function bee(e){return new Dw({find:e.find,handler:({state:t,range:n,match:r})=>{const s=_s(e.getAttributes,void 0,r)||{},{tr:o}=t,i=n.from;let a=n.to;const l=e.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=i+c;u>a?u=a:a=u+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,i+r[0].length-1),o.replaceWith(u,a,l)}else if(r[0]){const c=e.type.isInline?i:i-1;o.insert(c,e.type.create(s)).delete(o.mapping.map(i),o.mapping.map(a))}o.scrollIntoView()},undoable:e.undoable})}function P6(e){return new Dw({find:e.find,handler:({state:t,range:n,match:r})=>{const s=t.doc.resolve(n.from),o=_s(e.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,o)},undoable:e.undoable})}function qo(e){return new Dw({find:e.find,handler:({state:t,range:n,match:r})=>{let s=e.replace,o=n.from;const i=n.to;if(r[1]){const a=r[0].lastIndexOf(r[1]);s+=r[0].slice(a+r[1].length),o+=a;const l=o-i;l>0&&(s=r[0].slice(a-l,a)+s,o=i)}t.tr.insertText(s,o,i)},undoable:e.undoable})}function ob(e){return new Dw({find:e.find,handler:({state:t,range:n,match:r,chain:s})=>{const o=_s(e.getAttributes,void 0,r)||{},i=t.tr.delete(n.from,n.to),l=i.doc.resolve(n.from).blockRange(),c=l&&e7(l,e.type,o);if(!c)return null;if(i.wrap(l,c),e.keepMarks&&e.editor){const{selection:f,storedMarks:m}=t,{splittableMarks:g}=e.editor.extensionManager,y=m||f.$to.parentOffset&&f.$from.marks();if(y){const v=y.filter(x=>g.includes(x.type.name));i.ensureMarks(v)}}if(e.keepAttributes){const f=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(f,o).run()}const u=i.doc.resolve(n.from-1).nodeBefore;u&&u.type===e.type&&Sd(i.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,u))&&i.join(n.from-1)},undoable:e.undoable})}var u9e=e=>"touches"in e,d9e=class{constructor(e){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.clientX-this.startX,c=a.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.touches[0];if(!l)return;const c=l.clientX-this.startX,u=l.clientY-this.startY;this.handleResize(c,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(a,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var t,n,r,s,o,i;this.node=e.node,this.editor=e.editor,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(t=e.options)!=null&&t.min&&(this.minSize={...this.minSize,...e.options.min}),(n=e.options)!=null&&n.max&&(this.maxSize=e.options.max),(r=e==null?void 0:e.options)!=null&&r.directions&&(this.directions=e.options.directions),(s=e.options)!=null&&s.preserveAspectRatio&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(o=e.options)!=null&&o.className&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),(i=e.options)!=null&&i.createCustomHandle&&(this.createCustomHandle=e.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const e=this.editor.isEditable;e!==this.lastEditableState&&(this.lastEditableState=e,e?e&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(e,t,n){return e.type!==this.node.type?!1:(this.node=e,this.onUpdate?this.onUpdate(e,t,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){const e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){const t=document.createElement("div");return t.dataset.resizeHandle=e,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(e,t){const n=t.includes("top"),r=t.includes("bottom"),s=t.includes("left"),o=t.includes("right");n&&(e.style.top="0"),r&&(e.style.bottom="0"),s&&(e.style.left="0"),o&&(e.style.right="0"),(t==="top"||t==="bottom")&&(e.style.left="0",e.style.right="0"),(t==="left"||t==="right")&&(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{let t;this.createCustomHandle?t=this.createCustomHandle(e):t=this.createHandle(e),t instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${e}") did not return an HTMLElement. Falling back to default handle.`),t=this.createHandle(e)),this.createCustomHandle||this.positionHandle(t,e),t.addEventListener("mousedown",n=>this.handleResizeStart(n,e)),t.addEventListener("touchstart",n=>this.handleResizeStart(n,e)),this.handleMap.set(e,t),this.wrapper.appendChild(t)})}removeHandles(){this.handleMap.forEach(e=>e.remove()),this.handleMap.clear()}applyInitialSize(){const e=this.node.attrs.width,t=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,t){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=t,u9e(e)?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,t){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:s}=this.calculateNewDimensions(this.activeHandle,e,t),o=this.applyConstraints(r,s,n);this.element.style.width=`${o.width}px`,this.element.style.height=`${o.height}px`,this.onResize&&this.onResize(o.width,o.height)}calculateNewDimensions(e,t,n){let r=this.startWidth,s=this.startHeight;const o=e.includes("right"),i=e.includes("left"),a=e.includes("bottom"),l=e.includes("top");return o?r=this.startWidth+t:i&&(r=this.startWidth-t),a?s=this.startHeight+n:l&&(s=this.startHeight-n),(e==="right"||e==="left")&&(r=this.startWidth+(o?t:-t)),(e==="top"||e==="bottom")&&(s=this.startHeight+(a?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,s,e):{width:r,height:s}}applyConstraints(e,t,n){var r,s,o,i;if(!n){let c=Math.max(this.minSize.width,e),u=Math.max(this.minSize.height,t);return(r=this.maxSize)!=null&&r.width&&(c=Math.min(this.maxSize.width,c)),(s=this.maxSize)!=null&&s.height&&(u=Math.min(this.maxSize.height,u)),{width:c,height:u}}let a=e,l=t;return a<this.minSize.width&&(a=this.minSize.width,l=a/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,a=l*this.aspectRatio),(o=this.maxSize)!=null&&o.width&&a>this.maxSize.width&&(a=this.maxSize.width,l=a/this.aspectRatio),(i=this.maxSize)!=null&&i.height&&l>this.maxSize.height&&(l=this.maxSize.height,a=l*this.aspectRatio),{width:a,height:l}}applyAspectRatio(e,t,n){const r=n==="left"||n==="right",s=n==="top"||n==="bottom";return r?{width:e,height:e/this.aspectRatio}:s?{width:t*this.aspectRatio,height:t}:{width:e,height:e/this.aspectRatio}}};function f9e(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof kn){const o=r.index();return r.parent.canReplaceWith(o,o+1,t)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(t))return!0;s-=1}return!1}var h9e={};S7(h9e,{createAtomBlockMarkdownSpec:()=>p9e,createBlockMarkdownSpec:()=>m9e,createInlineMarkdownSpec:()=>y9e,parseAttributes:()=>D7,parseIndentedBlocks:()=>L6,renderNestedMarkdownContent:()=>L7,serializeAttributes:()=>P7});function D7(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const c=s.map(u=>u.trim().slice(1));t.class=c.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(t.id=o[1]);const i=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(i)).forEach(([,c,u])=>{var f;const m=parseInt(((f=u.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),g=n[m];g&&(t[c]=g.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(t[u]=!0)}),t}function P7(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function p9e(e){const{nodeName:t,name:n,parseAttributes:r=D7,serializeAttributes:s=P7,defaultAttributes:o={},requiredAttributes:i=[],allowedAttributes:a}=e,l=n||t,c=u=>{if(!a)return u;const f={};return a.forEach(m=>{m in u&&(f[m]=u[m])}),f};return{parseMarkdown:(u,f)=>{const m={...o,...u.attributes};return f.createNode(t,m,[])},markdownTokenizer:{name:t,level:"block",start(u){var f;const m=new RegExp(`^:::${l}(?:\\s|$)`,"m"),g=(f=u.match(m))==null?void 0:f.index;return g!==void 0?g:-1},tokenize(u,f,m){const g=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),y=u.match(g);if(!y)return;const v=y[1]||"",x=r(v);if(!i.find(T=>!(T in x)))return{type:t,raw:y[0],attributes:x}}},renderMarkdown:u=>{const f=c(u.attrs||{}),m=s(f),g=m?` {${m}}`:"";return`:::${l}${g} :::`}}}function m9e(e){const{nodeName:t,name:n,getContent:r,parseAttributes:s=D7,serializeAttributes:o=P7,defaultAttributes:i={},content:a="block",allowedAttributes:l}=e,c=n||t,u=f=>{if(!l)return f;const m={};return l.forEach(g=>{g in f&&(m[g]=f[g])}),m};return{parseMarkdown:(f,m)=>{let g;if(r){const v=r(f);g=typeof v=="string"?[{type:"text",text:v}]:v}else a==="block"?g=m.parseChildren(f.tokens||[]):g=m.parseInline(f.tokens||[]);const y={...i,...f.attributes};return m.createNode(t,y,g)},markdownTokenizer:{name:t,level:"block",start(f){var m;const g=new RegExp(`^:::${c}`,"m"),y=(m=f.match(g))==null?void 0:m.index;return y!==void 0?y:-1},tokenize(f,m,g){var y;const v=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),x=f.match(v);if(!x)return;const[E,T=""]=x,k=s(T);let I=1;const O=E.length;let M="";const P=/^:::([\w-]*)(\s.*)?/gm,j=f.slice(O);for(P.lastIndex=0;;){const V=P.exec(j);if(V===null)break;const U=V.index,z=V[1];if(!((y=V[2])!=null&&y.endsWith(":::"))){if(z)I+=1;else if(I-=1,I===0){const H=j.slice(0,U);M=H.trim();const F=f.slice(0,O+U+V[0].length);let G=[];if(M)if(a==="block")for(G=g.blockTokens(H),G.forEach(X=>{X.text&&(!X.tokens||X.tokens.length===0)&&(X.tokens=g.inlineTokens(X.text))});G.length>0;){const X=G[G.length-1];if(X.type==="paragraph"&&(!X.text||X.text.trim()===""))G.pop();else break}else G=g.inlineTokens(M);return{type:t,raw:F,attributes:k,content:M,tokens:G}}}}}},renderMarkdown:(f,m)=>{const g=u(f.attrs||{}),y=o(g),v=y?` {${y}}`:"",x=m.renderChildren(f.content||[],`

`);return`:::${c}${v}

${x}

:::`}}}function g9e(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,s,o,i]=r;t[s]=o||i,r=n.exec(e)}return t}function b9e(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function y9e(e){const{nodeName:t,name:n,getContent:r,parseAttributes:s=g9e,serializeAttributes:o=b9e,defaultAttributes:i={},selfClosing:a=!1,allowedAttributes:l}=e,c=n||t,u=m=>{if(!l)return m;const g={};return l.forEach(y=>{const v=typeof y=="string"?y:y.name,x=typeof y=="string"?void 0:y.skipIfDefault;if(v in m){const E=m[v];if(x!==void 0&&E===x)return;g[v]=E}}),g},f=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(m,g)=>{const y={...i,...m.attributes};if(a)return g.createNode(t,y);const v=r?r(m):m.content||"";return v?g.createNode(t,y,[g.createTextNode(v)]):g.createNode(t,y,[])},markdownTokenizer:{name:t,level:"inline",start(m){const g=a?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),y=m.match(g),v=y==null?void 0:y.index;return v!==void 0?v:-1},tokenize(m,g,y){const v=a?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),x=m.match(v);if(!x)return;let E="",T="";if(a){const[,I]=x;T=I}else{const[,I,O]=x;T=I,E=O||""}const k=s(T.trim());return{type:t,raw:x[0],content:E.trim(),attributes:k}}},renderMarkdown:m=>{let g="";r?g=r(m):m.content&&m.content.length>0&&(g=m.content.filter(E=>E.type==="text").map(E=>E.text).join(""));const y=u(m.attrs||{}),v=o(y),x=v?` ${v}`:"";return a?`[${c}${x}]`:`[${c}${x}]${g}[/${c}]`}}}function L6(e,t,n){var r,s,o,i;const a=e.split(`
`),l=[];let c="",u=0;const f=t.baseIndentSize||2;for(;u<a.length;){const m=a[u],g=m.match(t.itemPattern);if(!g){if(l.length>0)break;if(m.trim()===""){u+=1,c=`${c}${m}
`;continue}else return}const y=t.extractItemData(g),{indentLevel:v,mainContent:x}=y;c=`${c}${m}
`;const E=[x];for(u+=1;u<a.length;){const O=a[u];if(O.trim()===""){const P=a.slice(u+1).findIndex(U=>U.trim()!=="");if(P===-1)break;if((((s=(r=a[u+1+P].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>v){E.push(O),c=`${c}${O}
`,u+=1;continue}else break}if((((i=(o=O.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:i.length)||0)>v)E.push(O),c=`${c}${O}
`,u+=1;else break}let T;const k=E.slice(1);if(k.length>0){const O=k.map(M=>M.slice(v+f)).join(`
`);O.trim()&&(t.customNestedParser?T=t.customNestedParser(O):T=n.blockTokens(O))}const I=t.createToken(y,T);l.push(I)}if(l.length!==0)return{items:l,raw:c}}function L7(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const s=typeof n=="function"?n(r):n,[o,...i]=e.content,a=t.renderChildren([o]),l=[`${s}${a}`];return i&&i.length>0&&i.forEach(c=>{const u=t.renderChildren([c]);if(u){const f=u.split(`
`).map(m=>m?t.indent(m):"").join(`
`);l.push(f)}}),l.join(`
`)}function v9e(e,t,n={}){const{state:r}=t,{doc:s,tr:o}=r,i=e;s.descendants((a,l)=>{const c=o.mapping.map(l),u=o.mapping.map(l)+a.nodeSize;let f=null;if(a.marks.forEach(g=>{if(g!==i)return!1;f=g}),!f)return;let m=!1;if(Object.keys(n).forEach(g=>{n[g]!==f.attrs[g]&&(m=!0)}),m){const g=e.type.create({...e.attrs,...n});o.removeMark(c,u,e.type),o.addMark(c,u,g)}}),o.docChanged&&t.view.dispatch(o)}var yl=class yee extends O7{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new yee(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},x9e=class{constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,n,r,s,o,i,a;const{view:l}=this.editor,c=e.target,u=c.nodeType===3?(t=c.parentElement)==null?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(c)||!u)return;let f=0,m=0;if(this.dom!==u){const T=this.dom.getBoundingClientRect(),k=u.getBoundingClientRect(),I=(s=e.offsetX)!=null?s:(r=e.nativeEvent)==null?void 0:r.offsetX,O=(i=e.offsetY)!=null?i:(o=e.nativeEvent)==null?void 0:o.offsetY;f=k.x-T.x+I,m=k.y-T.y+O}const g=this.dom.cloneNode(!0);try{const T=this.dom.getBoundingClientRect();g.style.width=`${Math.round(T.width)}px`,g.style.height=`${Math.round(T.height)}px`,g.style.boxSizing="border-box",g.style.pointerEvents="none"}catch{}let y=null;try{y=document.createElement("div"),y.style.position="absolute",y.style.top="-9999px",y.style.left="-9999px",y.style.pointerEvents="none",y.appendChild(g),document.body.appendChild(y),(a=e.dataTransfer)==null||a.setDragImage(g,f,m)}finally{y&&setTimeout(()=>{try{y==null||y.remove()}catch{}},0)}const v=this.getPos();if(typeof v!="number")return;const x=kn.create(l.state.doc,v),E=l.state.tr.setSelection(x);l.dispatch(E)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const n=e.target;if(!(this.dom.contains(n)&&!((t=this.contentDOM)!=null&&t.contains(n))))return!1;const s=e.type.startsWith("drag"),o=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!o&&!s)return!0;const{isEditable:a}=this.editor,{isDragging:l}=this,c=!!this.node.type.spec.draggable,u=kn.isSelectable(this.node),f=e.type==="copy",m=e.type==="paste",g=e.type==="cut",y=e.type==="mousedown";if(!c&&u&&s&&e.target===this.dom&&e.preventDefault(),c&&s&&!l&&e.target===this.dom)return e.preventDefault(),!1;if(c&&a&&!l&&y){const v=n.closest("[data-drag-handle]");v&&(this.dom===v||this.dom.contains(v))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||o||f||m||g||y&&u)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(AC()||jQ())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const n=this.getPos();return typeof n!="number"?!1:(t.setNodeMarkup(n,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}};function xm(e){return new e9e({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:s})=>{const o=_s(e.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:i}=t,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),f=n.from+l.indexOf(a),m=f+a.length;if(M7(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(x=>x===e.type&&x!==y.mark.type)).filter(y=>y.to>f).length)return null;m<n.to&&i.delete(m,n.to),f>n.from&&i.delete(n.from+u,f),c=n.from+u+a.length,i.addMark(n.from+u,c,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}var w9e=Object.getOwnPropertyNames,E9e=Object.getOwnPropertySymbols,_9e=Object.prototype.hasOwnProperty;function ZB(e,t){return function(r,s,o){return e(r,s,o)&&t(r,s,o)}}function R2(e){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,s);var o=s.cache,i=o.get(n),a=o.get(r);if(i&&a)return i===r&&a===n;o.set(n,r),o.set(r,n);var l=e(n,r,s);return o.delete(n),o.delete(r),l}}function S9e(e){return e!=null?e[Symbol.toStringTag]:void 0}function JB(e){return w9e(e).concat(E9e(e))}var T9e=Object.hasOwn||(function(e,t){return _9e.call(e,t)});function $m(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var C9e="__v",k9e="__o",A9e="_owner",XB=Object.getOwnPropertyDescriptor,QB=Object.keys;function N9e(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function I9e(e,t){return $m(e.getTime(),t.getTime())}function R9e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function M9e(e,t){return e===t}function ez(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var s=new Array(r),o=e.entries(),i,a,l=0;(i=o.next())&&!i.done;){for(var c=t.entries(),u=!1,f=0;(a=c.next())&&!a.done;){if(s[f]){f++;continue}var m=i.value,g=a.value;if(n.equals(m[0],g[0],l,f,e,t,n)&&n.equals(m[1],g[1],m[0],g[0],e,t,n)){u=s[f]=!0;break}f++}if(!u)return!1;l++}return!0}var O9e=$m;function D9e(e,t,n){var r=QB(e),s=r.length;if(QB(t).length!==s)return!1;for(;s-- >0;)if(!vee(e,t,n,r[s]))return!1;return!0}function Gy(e,t,n){var r=JB(e),s=r.length;if(JB(t).length!==s)return!1;for(var o,i,a;s-- >0;)if(o=r[s],!vee(e,t,n,o)||(i=XB(e,o),a=XB(t,o),(i||a)&&(!i||!a||i.configurable!==a.configurable||i.enumerable!==a.enumerable||i.writable!==a.writable)))return!1;return!0}function P9e(e,t){return $m(e.valueOf(),t.valueOf())}function L9e(e,t){return e.source===t.source&&e.flags===t.flags}function tz(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var s=new Array(r),o=e.values(),i,a;(i=o.next())&&!i.done;){for(var l=t.values(),c=!1,u=0;(a=l.next())&&!a.done;){if(!s[u]&&n.equals(i.value,a.value,i.value,a.value,e,t,n)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function $9e(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function F9e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function vee(e,t,n,r){return(r===A9e||r===k9e||r===C9e)&&(e.$$typeof||t.$$typeof)?!0:T9e(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var B9e="[object Arguments]",z9e="[object Boolean]",j9e="[object Date]",U9e="[object Error]",H9e="[object Map]",V9e="[object Number]",q9e="[object Object]",G9e="[object RegExp]",W9e="[object Set]",Y9e="[object String]",K9e="[object URL]",Z9e=Array.isArray,nz=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,rz=Object.assign,J9e=Object.prototype.toString.call.bind(Object.prototype.toString);function X9e(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,s=e.areFunctionsEqual,o=e.areMapsEqual,i=e.areNumbersEqual,a=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,f=e.areTypedArraysEqual,m=e.areUrlsEqual,g=e.unknownTagComparators;return function(v,x,E){if(v===x)return!0;if(v==null||x==null)return!1;var T=typeof v;if(T!==typeof x)return!1;if(T!=="object")return T==="number"?i(v,x,E):T==="function"?s(v,x,E):!1;var k=v.constructor;if(k!==x.constructor)return!1;if(k===Object)return a(v,x,E);if(Z9e(v))return t(v,x,E);if(nz!=null&&nz(v))return f(v,x,E);if(k===Date)return n(v,x,E);if(k===RegExp)return c(v,x,E);if(k===Map)return o(v,x,E);if(k===Set)return u(v,x,E);var I=J9e(v);if(I===j9e)return n(v,x,E);if(I===G9e)return c(v,x,E);if(I===H9e)return o(v,x,E);if(I===W9e)return u(v,x,E);if(I===q9e)return typeof v.then!="function"&&typeof x.then!="function"&&a(v,x,E);if(I===K9e)return m(v,x,E);if(I===U9e)return r(v,x,E);if(I===B9e)return a(v,x,E);if(I===z9e||I===V9e||I===Y9e)return l(v,x,E);if(g){var O=g[I];if(!O){var M=S9e(v);M&&(O=g[M])}if(O)return O(v,x,E)}return!1}}function Q9e(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,s={areArraysEqual:r?Gy:N9e,areDatesEqual:I9e,areErrorsEqual:R9e,areFunctionsEqual:M9e,areMapsEqual:r?ZB(ez,Gy):ez,areNumbersEqual:O9e,areObjectsEqual:r?Gy:D9e,arePrimitiveWrappersEqual:P9e,areRegExpsEqual:L9e,areSetsEqual:r?ZB(tz,Gy):tz,areTypedArraysEqual:r?Gy:$9e,areUrlsEqual:F9e,unknownTagComparators:void 0};if(n&&(s=rz({},s,n(s))),t){var o=R2(s.areArraysEqual),i=R2(s.areMapsEqual),a=R2(s.areObjectsEqual),l=R2(s.areSetsEqual);s=rz({},s,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:a,areSetsEqual:l})}return s}function eOe(e){return function(t,n,r,s,o,i,a){return e(t,n,a)}}function tOe(e){var t=e.circular,n=e.comparator,r=e.createState,s=e.equals,o=e.strict;if(r)return function(l,c){var u=r(),f=u.cache,m=f===void 0?t?new WeakMap:void 0:f,g=u.meta;return n(l,c,{cache:m,equals:s,meta:g,strict:o})};if(t)return function(l,c){return n(l,c,{cache:new WeakMap,equals:s,meta:void 0,strict:o})};var i={cache:void 0,equals:s,meta:void 0,strict:o};return function(l,c){return n(l,c,i)}}var nOe=q0();q0({strict:!0});q0({circular:!0});q0({circular:!0,strict:!0});q0({createInternalComparator:function(){return $m}});q0({strict:!0,createInternalComparator:function(){return $m}});q0({circular:!0,createInternalComparator:function(){return $m}});q0({circular:!0,createInternalComparator:function(){return $m},strict:!0});function q0(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,s=e.createState,o=e.strict,i=o===void 0?!1:o,a=Q9e(e),l=X9e(a),c=r?r(l):eOe(l);return tOe({circular:n,comparator:l,createState:s,equals:c,strict:i})}var T5={exports:{}},C5={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sz;function rOe(){if(sz)return C5;sz=1;var e=aw(),t=RG();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,o=e.useRef,i=e.useEffect,a=e.useMemo,l=e.useDebugValue;return C5.useSyncExternalStoreWithSelector=function(c,u,f,m,g){var y=o(null);if(y.current===null){var v={hasValue:!1,value:null};y.current=v}else v=y.current;y=a(function(){function E(M){if(!T){if(T=!0,k=M,M=m(M),g!==void 0&&v.hasValue){var P=v.value;if(g(P,M))return I=P}return I=M}if(P=I,r(k,M))return P;var j=m(M);return g!==void 0&&g(P,j)?(k=M,P):(k=M,I=j)}var T=!1,k,I,O=f===void 0?null:f;return[function(){return E(u())},O===null?void 0:function(){return E(O())}]},[u,f,m,g]);var x=s(c,y[0],y[1]);return i(function(){v.hasValue=!0,v.value=x},[x]),l(x),x},C5}var oz;function sOe(){return oz||(oz=1,T5.exports=rOe()),T5.exports}var oOe=sOe(),iOe=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},aOe=({contentComponent:e})=>{const t=SR.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return h.jsx(h.Fragment,{children:Object.values(t)})};function lOe(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:ER.createPortal(r.reactElement,r.element,n)},e.forEach(s=>s())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(s=>s())}}}var cOe=class extends Me.Component{constructor(e){var t;super(e),this.editorContentRef=Me.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=lOe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return h.jsxs(h.Fragment,{children:[h.jsx("div",{ref:iOe(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&h.jsx(aOe,{contentComponent:e.contentComponent})]})}},uOe=w.forwardRef((e,t)=>{const n=Me.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Me.createElement(cOe,{key:n,innerRef:t,...e})}),dOe=Me.memo(uOe),fOe=typeof window<"u"?w.useLayoutEffect:w.useEffect,hOe=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function pOe(e){var t;const[n]=w.useState(()=>new hOe(e.editor)),r=oOe.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:nOe);return fOe(()=>n.watch(e.editor),[e.editor,n]),w.useDebugValue(r),r}var mOe=!1,$6=typeof window>"u",gOe=$6||!!(typeof window<"u"&&window.next),bOe=class xee{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?$6||gOe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)==null?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)==null?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)==null?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)==null?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)==null?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)==null?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)==null?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)==null?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)==null?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)==null?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)==null?void 0:o.call(s,...r)},onDelete:(...r)=>{var s,o;return(o=(s=this.options.current).onDelete)==null?void 0:o.call(s,...r)}};return new c9e(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((s,o)=>{var i;return s===((i=n.extensions)==null?void 0:i[o])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?xee.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,s)=>r===t[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function yOe(e={},t=[]){const n=w.useRef(e);n.current=e;const[r]=w.useState(()=>new bOe(n)),s=SR.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return w.useDebugValue(s),w.useEffect(r.onRender(t)),pOe({editor:s,selector:({transactionNumber:o})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&o===0?0:o+1}),s}var wee=w.createContext({editor:null});wee.Consumer;var Eee=()=>w.useContext(wee),_ee=w.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),vOe=()=>w.useContext(_ee),xOe=Me.forwardRef((e,t)=>{const{onDragStart:n}=vOe(),r=e.as||"div";return h.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});function iz(e){return!!(typeof e=="function"&&e.prototype&&e.prototype.isReactComponent)}function az(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.forward_ref)"||e.$$typeof.description==="react.forward_ref"))}function wOe(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.memo)"||e.$$typeof.description==="react.memo"))}function EOe(e){if(iz(e)||az(e))return!0;if(wOe(e)){const t=e.type;if(t)return iz(t)||az(t)}return!1}function _Oe(){try{if(w.version)return parseInt(w.version.split(".")[0],10)>=19}catch{}return!1}var SOe=class{constructor(e,{editor:t,props:n={},as:r="div",className:s=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?dl.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const t=this.component,n=this.props,r=this.editor,s=_Oe(),o=EOe(t),i={...n};i.ref&&!(s||o)&&delete i.ref,!i.ref&&(s||o)&&(i.ref=a=>{this.ref=a}),this.reactElement=h.jsx(t,{...i}),(e=r==null?void 0:r.contentComponent)==null||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)==null||e.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}};Me.createContext({markViewContentRef:()=>{}});var TOe=class extends x9e{constructor(e,t,n){if(super(e,t,n),this.selectionRafId=null,!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const r=this.dom.querySelector("[data-node-view-content]");if(!r)return;r.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(l={})=>this.updateAttributes(l),deleteNode:()=>this.deleteNode(),ref:w.createRef()};if(!this.component.displayName){const l=c=>c.charAt(0).toUpperCase()+c.substring(1);this.component.displayName=l(this.extension.name)}const r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:l=>{l&&this.contentDOMElement&&l.firstChild!==this.contentDOMElement&&(l.hasAttribute("data-node-view-wrapper")&&l.removeAttribute("data-node-view-wrapper"),l.appendChild(this.contentDOMElement))}},s=this.component,o=w.memo(l=>h.jsx(_ee.Provider,{value:r,children:w.createElement(s,l)}));o.displayName="ReactNodeView";let i=this.node.isInline?"span":"div";this.options.as&&(i=this.options.as);const{className:a=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new SOe(o,{editor:this.editor,props:e,as:i,className:`node-${this.node.type.name} ${a}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!((e=this.renderer.element.firstElementChild)!=null&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null),this.selectionRafId=requestAnimationFrame(()=>{this.selectionRafId=null;const{from:e,to:t}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(e<=n&&t>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}})}update(e,t,n){const r=s=>{this.renderer.updateProps(s),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const s=this.node,o=this.decorations,i=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:s,oldDecorations:o,newNode:e,newDecorations:t,oldInnerDecorations:i,innerDecorations:n,updateProps:()=>r({node:e,decorations:t,innerDecorations:n})})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,r({node:e,decorations:t,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null,this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null)}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,n=$x(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}};function COe(e,t){return n=>n.editor.contentComponent?new TOe(e,n,t):{}}function Hi(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var kOe=["color"],See=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,kOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M4.18179 6.18181C4.35753 6.00608 4.64245 6.00608 4.81819 6.18181L7.49999 8.86362L10.1818 6.18181C10.3575 6.00608 10.6424 6.00608 10.8182 6.18181C10.9939 6.35755 10.9939 6.64247 10.8182 6.81821L7.81819 9.81821C7.73379 9.9026 7.61934 9.95001 7.49999 9.95001C7.38064 9.95001 7.26618 9.9026 7.18179 9.81821L4.18179 6.81821C4.00605 6.64247 4.00605 6.35755 4.18179 6.18181Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),AOe=["color"],NOe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,AOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),IOe=["color"],ROe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,IOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M9.96424 2.68571C10.0668 2.42931 9.94209 2.13833 9.6857 2.03577C9.4293 1.93322 9.13832 2.05792 9.03576 2.31432L5.03576 12.3143C4.9332 12.5707 5.05791 12.8617 5.3143 12.9642C5.5707 13.0668 5.86168 12.9421 5.96424 12.6857L9.96424 2.68571ZM3.85355 5.14646C4.04882 5.34172 4.04882 5.6583 3.85355 5.85356L2.20711 7.50001L3.85355 9.14646C4.04882 9.34172 4.04882 9.6583 3.85355 9.85356C3.65829 10.0488 3.34171 10.0488 3.14645 9.85356L1.14645 7.85356C0.951184 7.6583 0.951184 7.34172 1.14645 7.14646L3.14645 5.14646C3.34171 4.9512 3.65829 4.9512 3.85355 5.14646ZM11.1464 5.14646C11.3417 4.9512 11.6583 4.9512 11.8536 5.14646L13.8536 7.14646C14.0488 7.34172 14.0488 7.6583 13.8536 7.85356L11.8536 9.85356C11.6583 10.0488 11.3417 10.0488 11.1464 9.85356C10.9512 9.6583 10.9512 9.34172 11.1464 9.14646L12.7929 7.50001L11.1464 5.85356C10.9512 5.6583 10.9512 5.34172 11.1464 5.14646Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),MOe=["color"],OOe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,MOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),DOe=["color"],Tee=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,DOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),POe=["color"],LOe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,POe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M7.50005 1.04999C7.74858 1.04999 7.95005 1.25146 7.95005 1.49999V8.41359L10.1819 6.18179C10.3576 6.00605 10.6425 6.00605 10.8182 6.18179C10.994 6.35753 10.994 6.64245 10.8182 6.81819L7.81825 9.81819C7.64251 9.99392 7.35759 9.99392 7.18185 9.81819L4.18185 6.81819C4.00611 6.64245 4.00611 6.35753 4.18185 6.18179C4.35759 6.00605 4.64251 6.00605 4.81825 6.18179L7.05005 8.41359V1.49999C7.05005 1.25146 7.25152 1.04999 7.50005 1.04999ZM2.5 10C2.77614 10 3 10.2239 3 10.5V12C3 12.5539 3.44565 13 3.99635 13H11.0012C11.5529 13 12 12.5528 12 12V10.5C12 10.2239 12.2239 10 12.5 10C12.7761 10 13 10.2239 13 10.5V12C13 13.1041 12.1062 14 11.0012 14H3.99635C2.89019 14 2 13.103 2 12V10.5C2 10.2239 2.22386 10 2.5 10Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),$Oe=["color"],FOe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,$Oe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M3 2C2.44772 2 2 2.44772 2 3V12C2 12.5523 2.44772 13 3 13H12C12.5523 13 13 12.5523 13 12V8.5C13 8.22386 12.7761 8 12.5 8C12.2239 8 12 8.22386 12 8.5V12H3V3L6.5 3C6.77614 3 7 2.77614 7 2.5C7 2.22386 6.77614 2 6.5 2H3ZM12.8536 2.14645C12.9015 2.19439 12.9377 2.24964 12.9621 2.30861C12.9861 2.36669 12.9996 2.4303 13 2.497L13 2.5V2.50049V5.5C13 5.77614 12.7761 6 12.5 6C12.2239 6 12 5.77614 12 5.5V3.70711L6.85355 8.85355C6.65829 9.04882 6.34171 9.04882 6.14645 8.85355C5.95118 8.65829 5.95118 8.34171 6.14645 8.14645L11.2929 3H9.5C9.22386 3 9 2.77614 9 2.5C9 2.22386 9.22386 2 9.5 2H12.4999H12.5C12.5678 2 12.6324 2.01349 12.6914 2.03794C12.7504 2.06234 12.8056 2.09851 12.8536 2.14645Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),BOe=["color"],zOe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,BOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M5.10505 12C4.70805 12 4.4236 11.912 4.25171 11.736C4.0839 11.5559 4 11.2715 4 10.8827V4.11733C4 3.72033 4.08595 3.43588 4.25784 3.26398C4.43383 3.08799 4.71623 3 5.10505 3C6.42741 3 8.25591 3 9.02852 3C10.1373 3 11.0539 3.98153 11.0539 5.1846C11.0539 6.08501 10.6037 6.81855 9.70327 7.23602C10.8657 7.44851 11.5176 8.62787 11.5176 9.48128C11.5176 10.5125 10.9902 12 9.27734 12C8.77742 12 6.42626 12 5.10505 12ZM8.37891 8.00341H5.8V10.631H8.37891C8.9 10.631 9.6296 10.1211 9.6296 9.29877C9.6296 8.47643 8.9 8.00341 8.37891 8.00341ZM5.8 4.36903V6.69577H8.17969C8.53906 6.69577 9.27734 6.35939 9.27734 5.50002C9.27734 4.64064 8.48047 4.36903 8.17969 4.36903H5.8Z",fill:r}))}),jOe=["color"],UOe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,jOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M5.67494 3.50017C5.67494 3.25164 5.87641 3.05017 6.12494 3.05017H10.6249C10.8735 3.05017 11.0749 3.25164 11.0749 3.50017C11.0749 3.7487 10.8735 3.95017 10.6249 3.95017H9.00587L7.2309 11.05H8.87493C9.12345 11.05 9.32493 11.2515 9.32493 11.5C9.32493 11.7486 9.12345 11.95 8.87493 11.95H4.37493C4.1264 11.95 3.92493 11.7486 3.92493 11.5C3.92493 11.2515 4.1264 11.05 4.37493 11.05H5.99397L7.76894 3.95017H6.12494C5.87641 3.95017 5.67494 3.7487 5.67494 3.50017Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),HOe=["color"],VOe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,HOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),qOe=["color"],GOe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,qOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M8.51194 3.00541C9.18829 2.54594 10.0435 2.53694 10.6788 2.95419C10.8231 3.04893 10.9771 3.1993 11.389 3.61119C11.8009 4.02307 11.9513 4.17714 12.046 4.32141C12.4633 4.95675 12.4543 5.81192 11.9948 6.48827C11.8899 6.64264 11.7276 6.80811 11.3006 7.23511L10.6819 7.85383C10.4867 8.04909 10.4867 8.36567 10.6819 8.56093C10.8772 8.7562 11.1938 8.7562 11.389 8.56093L12.0077 7.94221L12.0507 7.89929C12.4203 7.52976 12.6568 7.2933 12.822 7.0502C13.4972 6.05623 13.5321 4.76252 12.8819 3.77248C12.7233 3.53102 12.4922 3.30001 12.1408 2.94871L12.0961 2.90408L12.0515 2.85942C11.7002 2.508 11.4692 2.27689 11.2277 2.11832C10.2377 1.46813 8.94398 1.50299 7.95001 2.17822C7.70691 2.34336 7.47044 2.57991 7.1009 2.94955L7.058 2.99247L6.43928 3.61119C6.24401 3.80645 6.24401 4.12303 6.43928 4.31829C6.63454 4.51355 6.95112 4.51355 7.14638 4.31829L7.7651 3.69957C8.1921 3.27257 8.35757 3.11027 8.51194 3.00541ZM4.31796 7.14672C4.51322 6.95146 4.51322 6.63487 4.31796 6.43961C4.12269 6.24435 3.80611 6.24435 3.61085 6.43961L2.99213 7.05833L2.94922 7.10124C2.57957 7.47077 2.34303 7.70724 2.17788 7.95035C1.50265 8.94432 1.4678 10.238 2.11799 11.2281C2.27656 11.4695 2.50766 11.7005 2.8591 12.0518L2.90374 12.0965L2.94837 12.1411C3.29967 12.4925 3.53068 12.7237 3.77214 12.8822C4.76219 13.5324 6.05589 13.4976 7.04986 12.8223C7.29296 12.6572 7.52943 12.4206 7.89896 12.051L7.89897 12.051L7.94188 12.0081L8.5606 11.3894C8.75586 11.1941 8.75586 10.8775 8.5606 10.6823C8.36533 10.487 8.04875 10.487 7.85349 10.6823L7.23477 11.301C6.80777 11.728 6.6423 11.8903 6.48794 11.9951C5.81158 12.4546 4.95642 12.4636 4.32107 12.0464C4.17681 11.9516 4.02274 11.8012 3.61085 11.3894C3.19896 10.9775 3.0486 10.8234 2.95385 10.6791C2.53661 10.0438 2.54561 9.18863 3.00507 8.51227C3.10993 8.35791 3.27224 8.19244 3.69924 7.76544L4.31796 7.14672ZM9.62172 6.08558C9.81698 5.89032 9.81698 5.57373 9.62172 5.37847C9.42646 5.18321 9.10988 5.18321 8.91461 5.37847L5.37908 8.91401C5.18382 9.10927 5.18382 9.42585 5.37908 9.62111C5.57434 9.81637 5.89092 9.81637 6.08619 9.62111L9.62172 6.08558Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),WOe=["color"],YOe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,WOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M4.50021 0C4.77635 0 5.0002 0.223853 5.0002 0.49999V2.49995C5.0002 2.77609 4.77635 2.99994 4.50021 2.99994C4.22408 2.99994 4.00022 2.77609 4.00022 2.49995V0.49999C4.00022 0.223853 4.22408 0 4.50021 0ZM0.646451 0.64647C0.84171 0.451212 1.15829 0.451212 1.35354 0.64647L2.85351 2.14644C3.04877 2.3417 3.04877 2.65827 2.85351 2.85353C2.65826 3.04879 2.34168 3.04879 2.14642 2.85353L0.646452 1.35356C0.451193 1.1583 0.451193 0.841728 0.646451 0.64647ZM0.00030517 4.49991C0.00030517 4.22377 0.224158 3.99992 0.500295 3.99992H2.50025C2.77639 3.99992 3.00024 4.22377 3.00024 4.49991C3.00024 4.77605 2.77639 4.9999 2.50025 4.9999H0.500295C0.224158 4.9999 0.00030517 4.77605 0.00030517 4.49991ZM12.0001 10.4998C12.0001 10.2236 12.2239 9.9998 12.5001 9.9998H14.5C14.7761 9.9998 15 10.2236 15 10.4998C15 10.7759 14.7761 10.9998 14.5 10.9998H12.5001C12.2239 10.9998 12.0001 10.7759 12.0001 10.4998ZM10.5001 11.9998C10.7762 11.9998 11.0001 12.2236 11.0001 12.4997V14.4997C11.0001 14.7758 10.7762 14.9997 10.5001 14.9997C10.224 14.9997 10.0001 14.7758 10.0001 14.4997V12.4997C10.0001 12.2236 10.224 11.9998 10.5001 11.9998ZM12.1462 12.1462C12.3415 11.951 12.658 11.951 12.8533 12.1462L14.3533 13.6462C14.5485 13.8415 14.5485 14.158 14.3533 14.3533C14.158 14.5485 13.8414 14.5485 13.6462 14.3533L12.1462 12.8533C11.951 12.6581 11.951 12.3415 12.1462 12.1462ZM7.76478 3.69938C8.19177 3.27238 8.35724 3.11008 8.5116 3.00522C9.18794 2.54577 10.0431 2.53677 10.6784 2.95401C10.8227 3.04875 10.9767 3.19911 11.3886 3.61099C11.8005 4.02287 11.9509 4.17694 12.0456 4.3212C12.4628 4.95653 12.4539 5.81168 11.9944 6.48802C11.8895 6.64238 11.7272 6.80785 11.3002 7.23484L10.6815 7.85354C10.4863 8.0488 10.4863 8.36538 10.6815 8.56064C10.8768 8.75589 11.1934 8.75589 11.3886 8.56064L12.0073 7.94193L12.0502 7.89903C12.4199 7.5295 12.6564 7.29303 12.8216 7.04993C13.4968 6.05598 13.5316 4.7623 12.8815 3.77228C12.7229 3.53083 12.4918 3.29982 12.1404 2.94853L12.0957 2.9039L12.0511 2.85925C11.6998 2.50782 11.4688 2.27672 11.2273 2.11816C10.2373 1.46798 8.94364 1.50284 7.94968 2.17805C7.70659 2.34319 7.47012 2.57973 7.1006 2.94936L7.1006 2.94937L7.05769 2.99228L6.43898 3.61099C6.24372 3.80625 6.24372 4.12282 6.43898 4.31808C6.63424 4.51334 6.95081 4.51334 7.14607 4.31808L7.76478 3.69938ZM2.99191 7.05807L2.94899 7.10097C2.57935 7.4705 2.34282 7.70697 2.17767 7.95006C1.50246 8.94401 1.4676 10.2377 2.11778 11.2277C2.27634 11.4692 2.50744 11.7002 2.85886 12.0515L2.85888 12.0515L2.90352 12.0961L2.94815 12.1407L2.94815 12.1407L2.94817 12.1408C3.29945 12.4922 3.53045 12.7233 3.7719 12.8818C4.76193 13.532 6.0556 13.4972 7.04956 12.8219C7.29265 12.6568 7.52912 12.4203 7.89865 12.0506L7.94155 12.0077L8.56026 11.389C8.75552 11.1937 8.75552 10.8772 8.56026 10.6819C8.365 10.4867 8.04842 10.4867 7.85317 10.6819L7.23446 11.3006C6.80747 11.7276 6.642 11.8899 6.48764 11.9948C5.8113 12.4542 4.95615 12.4632 4.32082 12.046C4.17656 11.9512 4.02249 11.8009 3.61061 11.389C3.19873 10.9771 3.04837 10.8231 2.95363 10.6788C2.53639 10.0435 2.54539 9.18832 3.00484 8.51198C3.10971 8.35761 3.27201 8.19215 3.699 7.76516L4.3177 7.14645C4.51296 6.95119 4.51296 6.63462 4.3177 6.43936C4.12245 6.2441 3.80587 6.2441 3.61061 6.43936L2.99191 7.05807Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),KOe=["color"],Cee=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,KOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M1.5 5.25C1.91421 5.25 2.25 4.91421 2.25 4.5C2.25 4.08579 1.91421 3.75 1.5 3.75C1.08579 3.75 0.75 4.08579 0.75 4.5C0.75 4.91421 1.08579 5.25 1.5 5.25ZM4 4.5C4 4.22386 4.22386 4 4.5 4H13.5C13.7761 4 14 4.22386 14 4.5C14 4.77614 13.7761 5 13.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM4.5 7C4.22386 7 4 7.22386 4 7.5C4 7.77614 4.22386 8 4.5 8H13.5C13.7761 8 14 7.77614 14 7.5C14 7.22386 13.7761 7 13.5 7H4.5ZM4.5 10C4.22386 10 4 10.2239 4 10.5C4 10.7761 4.22386 11 4.5 11H13.5C13.7761 11 14 10.7761 14 10.5C14 10.2239 13.7761 10 13.5 10H4.5ZM2.25 7.5C2.25 7.91421 1.91421 8.25 1.5 8.25C1.08579 8.25 0.75 7.91421 0.75 7.5C0.75 7.08579 1.08579 6.75 1.5 6.75C1.91421 6.75 2.25 7.08579 2.25 7.5ZM1.5 11.25C1.91421 11.25 2.25 10.9142 2.25 10.5C2.25 10.0858 1.91421 9.75 1.5 9.75C1.08579 9.75 0.75 10.0858 0.75 10.5C0.75 10.9142 1.08579 11.25 1.5 11.25Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),ZOe=["color"],JOe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,ZOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M11.5 3.04999C11.7485 3.04999 11.95 3.25146 11.95 3.49999V7.49999C11.95 7.74852 11.7485 7.94999 11.5 7.94999C11.2515 7.94999 11.05 7.74852 11.05 7.49999V4.58639L4.58638 11.05H7.49999C7.74852 11.05 7.94999 11.2515 7.94999 11.5C7.94999 11.7485 7.74852 11.95 7.49999 11.95L3.49999 11.95C3.38064 11.95 3.26618 11.9026 3.18179 11.8182C3.0974 11.7338 3.04999 11.6193 3.04999 11.5L3.04999 7.49999C3.04999 7.25146 3.25146 7.04999 3.49999 7.04999C3.74852 7.04999 3.94999 7.25146 3.94999 7.49999L3.94999 10.4136L10.4136 3.94999L7.49999 3.94999C7.25146 3.94999 7.04999 3.74852 7.04999 3.49999C7.04999 3.25146 7.25146 3.04999 7.49999 3.04999L11.5 3.04999Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),XOe=["color"],QOe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,XOe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M5.00003 3.25C5.00003 2.97386 4.77617 2.75 4.50003 2.75C4.22389 2.75 4.00003 2.97386 4.00003 3.25V7.10003H2.49998C2.27906 7.10003 2.09998 7.27912 2.09998 7.50003C2.09998 7.72094 2.27906 7.90003 2.49998 7.90003H4.00003V8.55C4.00003 10.483 5.56703 12.05 7.50003 12.05C9.43303 12.05 11 10.483 11 8.55V7.90003H12.5C12.7209 7.90003 12.9 7.72094 12.9 7.50003C12.9 7.27912 12.7209 7.10003 12.5 7.10003H11V3.25C11 2.97386 10.7762 2.75 10.5 2.75C10.2239 2.75 10 2.97386 10 3.25V7.10003H5.00003V3.25ZM5.00003 7.90003V8.55C5.00003 9.93071 6.11932 11.05 7.50003 11.05C8.88074 11.05 10 9.93071 10 8.55V7.90003H5.00003Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),eDe=["color"],tDe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,eDe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L11.9291 2.36383C11.9159 2.32246 11.897 2.28368 11.8732 2.24845C11.7923 2.12875 11.6554 2.05005 11.5001 2.05005H3.50005C3.29909 2.05005 3.1289 2.18178 3.07111 2.3636C3.05743 2.40665 3.05005 2.45249 3.05005 2.50007V4.50001C3.05005 4.74854 3.25152 4.95001 3.50005 4.95001C3.74858 4.95001 3.95005 4.74854 3.95005 4.50001V2.95005H6.95006V7.34284L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L6.95006 8.75705V12.0501H5.7544C5.50587 12.0501 5.3044 12.2515 5.3044 12.5001C5.3044 12.7486 5.50587 12.9501 5.7544 12.9501H9.2544C9.50293 12.9501 9.7044 12.7486 9.7044 12.5001C9.7044 12.2515 9.50293 12.0501 9.2544 12.0501H8.05006V7.65705L13.3536 2.35355ZM8.05006 6.24284L11.0501 3.24283V2.95005H8.05006V6.24284Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),nDe=["color"],rDe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,nDe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),sDe=["color"],oDe=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Hi(e,sDe);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),w.createElement("path",{d:"M5.00001 2.75C5.00001 2.47386 4.77615 2.25 4.50001 2.25C4.22387 2.25 4.00001 2.47386 4.00001 2.75V8.05C4.00001 9.983 5.56702 11.55 7.50001 11.55C9.43301 11.55 11 9.983 11 8.05V2.75C11 2.47386 10.7762 2.25 10.5 2.25C10.2239 2.25 10 2.47386 10 2.75V8.05C10 9.43071 8.88072 10.55 7.50001 10.55C6.1193 10.55 5.00001 9.43071 5.00001 8.05V2.75ZM3.49998 13.1001C3.27906 13.1001 3.09998 13.2791 3.09998 13.5001C3.09998 13.721 3.27906 13.9001 3.49998 13.9001H11.5C11.7209 13.9001 11.9 13.721 11.9 13.5001C11.9 13.2791 11.7209 13.1001 11.5 13.1001H3.49998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const Wp=w.forwardRef(({isActive:e,children:t,tooltip:n,className:r,tooltipOptions:s,...o},i)=>{const a=h.jsx(ZN,{size:"sm",ref:i,className:Qe("size-8 p-0",{"bg-accent":e},r),...o,children:t});return n?h.jsx(H1,{children:h.jsxs(V1,{children:[h.jsx(q1,{asChild:!0,children:a}),h.jsx(cm,{...s,children:h.jsx("div",{className:"flex flex-col items-center text-center",children:n})})]})}):a});Wp.displayName="ToolbarButton";const iDe=()=>typeof window<"u",lz=()=>iDe()&&window.navigator.platform==="MacIntel",aDe={mod:lz()?{symbol:"",readable:"Command"}:{symbol:"Ctrl",readable:"Control"},alt:lz()?{symbol:"",readable:"Option"}:{symbol:"Alt",readable:"Alt"},shift:{symbol:"",readable:"Shift"}},kee=e=>aDe[e.toLowerCase()]||{symbol:e,readable:e},cz=(e,t)=>{switch(t){case"json":return e.getJSON();case"html":return e.isEmpty?"":e.getHTML();default:return e.getText()}},F6=(e,t={requireHostname:!1})=>{if(e.includes(`
`))return!1;try{const n=new URL(e);return["javascript:","file:","vbscript:",...t.allowBase64?[]:["data:"]].includes(n.protocol)?!1:t.allowBase64&&n.protocol==="data:"?/^data:image\/[a-z]+;base64,/.test(e):n.hostname?!0:n.protocol!==""&&(n.pathname.startsWith("//")||n.pathname.startsWith("http"))&&!t.requireHostname}catch{return!1}},lDe=(e,t={})=>{if(e)return t.allowBase64&&e.startsWith("data:image")?F6(e,{requireHostname:!1,allowBase64:!0})?e:void 0:F6(e,{requireHostname:!1,allowBase64:t.allowBase64})||/^(\/|#|mailto:|sms:|fax:|tel:)/.test(e)?e:`https://${e}`},cDe=async e=>{const n=await(await fetch(e)).blob();return new Promise((r,s)=>{const o=new FileReader;o.onloadend=()=>{typeof o.result=="string"?r(o.result):s(new Error("Failed to convert Blob to base64"))},o.onerror=s,o.readAsDataURL(n)})},Fx=()=>Math.random().toString(36).slice(2,11),k5=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{typeof r.result=="string"?t(r.result):n(new Error("Failed to convert File to base64"))},r.onerror=n,r.readAsDataURL(e)}),uz=(e,t,n,r,s)=>{const{isValidType:o,isValidSize:i}=uDe(e,t);o&&i?r.push(n):(o||s.push({file:e,reason:"type"}),i||s.push({file:e,reason:"size"}))},uDe=(e,{allowedMimeTypes:t,maxFileSize:n})=>{const r=e instanceof File?e.type:dDe(e),s=e instanceof File?e.size:atob(e.split(",")[1]).length,o=t.length===0||t.includes(r)||t.includes(`${r.split("/")[0]}/*`),i=!n||s<=n;return{isValidType:o,isValidSize:i}},dDe=e=>{const t=e.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/);return t&&t.length>1?t[1]:"unknown"},fDe=e=>{if(e.startsWith("data:")){const t=e.match(/^data:[^;]+;base64,(.+)$/);if(t&&t[1])e=t[1];else return!1}try{return btoa(atob(e))===e}catch{return!1}},tT=(e,t)=>{const n=[],r=[];return e.forEach(s=>{const o="src"in s?s.src:s;o instanceof File?uz(o,t,s,n,r):typeof o=="string"&&(fDe(o)?t.allowBase64?uz(o,t,s,n,r):r.push({file:o,reason:"base64NotAllowed"}):lDe(o,{allowBase64:t.allowBase64})?n.push(s):r.push({file:o,reason:"invalidBase64"}))}),[n,r]},Aee=w.forwardRef(({className:e,keys:t,...n},r)=>{const s=t.map(i=>kee(i)),o=s.map(i=>i.readable).join(" + ");return h.jsx("span",{"aria-label":o,className:Qe("inline-flex items-center gap-0.5",e),...n,ref:r,children:s.map(i=>h.jsx("kbd",{className:Qe("inline-block min-w-2.5 text-center align-baseline font-sans text-xs font-medium capitalize text-[rgb(156,157,160)]",e),...n,ref:r,children:i.symbol},i.symbol))})});Aee.displayName="ShortcutKey";const Nee=({editor:e,actions:t,activeActions:n=t.map(c=>c.value),mainActionCount:r=0,dropdownIcon:s,dropdownTooltip:o="More options",dropdownClassName:i="w-12",size:a,variant:l})=>{const{mainActions:c,dropdownActions:u}=w.useMemo(()=>{const y=t.filter(v=>n.includes(v.value)).sort((v,x)=>n.indexOf(v.value)-n.indexOf(x.value));return{mainActions:y.slice(0,r),dropdownActions:y.slice(r)}},[t,n,r]),f=w.useCallback(y=>h.jsx(Wp,{onClick:()=>y.action(e),disabled:!y.canExecute(e),isActive:y.isActive(e),tooltip:`${y.label} ${y.shortcuts.map(v=>kee(v).symbol).join(" ")}`,"aria-label":y.label,size:a,variant:l,children:y.icon},y.label),[e,a,l]),m=w.useCallback(y=>h.jsxs(au,{onClick:()=>y.action(e),disabled:!y.canExecute(e),className:Qe("flex flex-row items-center justify-between gap-4",{"bg-accent":y.isActive(e)}),"aria-label":y.label,children:[h.jsx("span",{className:"grow",children:y.label}),h.jsx(Aee,{keys:y.shortcuts})]},y.label),[e]),g=w.useMemo(()=>u.some(y=>y.isActive(e)),[u,e]);return h.jsxs(h.Fragment,{children:[c.map(f),u.length>0&&h.jsxs(bw,{children:[h.jsx(yw,{asChild:!0,children:h.jsx(Wp,{isActive:g,tooltip:o,"aria-label":o,className:Qe(i),size:a,variant:l,children:s||h.jsx(See,{className:"size-5"})})}),h.jsx(vw,{align:"start",className:"w-full",children:u.map(m)})]})]})},dz=[{value:"bold",label:"Bold",icon:h.jsx(zOe,{className:"size-5"}),action:e=>e.chain().focus().toggleBold().run(),isActive:e=>e.isActive("bold"),canExecute:e=>e.can().chain().focus().toggleBold().run()&&!e.isActive("codeBlock"),shortcuts:["mod","B"]},{value:"italic",label:"Italic",icon:h.jsx(UOe,{className:"size-5"}),action:e=>e.chain().focus().toggleItalic().run(),isActive:e=>e.isActive("italic"),canExecute:e=>e.can().chain().focus().toggleItalic().run()&&!e.isActive("codeBlock"),shortcuts:["mod","I"]},{value:"underline",label:"Underline",icon:h.jsx(oDe,{className:"size-5"}),action:e=>e.chain().focus().toggleUnderline().run(),isActive:e=>e.isActive("underline"),canExecute:e=>e.can().chain().focus().toggleUnderline().run()&&!e.isActive("codeBlock"),shortcuts:["mod","U"]},{value:"strikethrough",label:"Strikethrough",icon:h.jsx(QOe,{className:"size-5"}),action:e=>e.chain().focus().toggleStrike().run(),isActive:e=>e.isActive("strike"),canExecute:e=>e.can().chain().focus().toggleStrike().run()&&!e.isActive("codeBlock"),shortcuts:["mod","shift","S"]},{value:"code",label:"Code",icon:h.jsx(ROe,{className:"size-5"}),action:e=>e.chain().focus().toggleCode().run(),isActive:e=>e.isActive("code"),canExecute:e=>e.can().chain().focus().toggleCode().run()&&!e.isActive("codeBlock"),shortcuts:["mod","E"]},{value:"clearFormatting",label:"Clear formatting",icon:h.jsx(tDe,{className:"size-5"}),action:e=>e.chain().focus().unsetAllMarks().run(),isActive:()=>!1,canExecute:e=>e.can().chain().focus().unsetAllMarks().run()&&!e.isActive("codeBlock"),shortcuts:["mod","\\"]}],Iee=({editor:e,activeActions:t=dz.map(o=>o.value),mainActionCount:n=2,size:r,variant:s})=>h.jsx(Nee,{editor:e,actions:dz,activeActions:t,mainActionCount:n,dropdownIcon:h.jsx(Tee,{className:"size-5"}),dropdownTooltip:"More formatting",dropdownClassName:"w-8",size:r,variant:s});Iee.displayName="SectionTwo";const fz=[{value:"orderedList",label:"Numbered list",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 -960 960 960",width:"20px",fill:"currentColor",children:h.jsx("path",{d:"M144-144v-48h96v-24h-48v-48h48v-24h-96v-48h120q10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v48q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9 10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v48q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9H144Zm0-240v-96q0-10.2 6.9-17.1 6.9-6.9 17.1-6.9h72v-24h-96v-48h120q10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v72q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9h-72v24h96v48H144Zm48-240v-144h-48v-48h96v192h-48Zm168 384v-72h456v72H360Zm0-204v-72h456v72H360Zm0-204v-72h456v72H360Z"})}),isActive:e=>e.isActive("orderedList"),action:e=>e.chain().focus().toggleOrderedList().run(),canExecute:e=>e.can().chain().focus().toggleOrderedList().run(),shortcuts:["mod","shift","7"]},{value:"bulletList",label:"Bullet list",icon:h.jsx(Cee,{className:"size-5"}),isActive:e=>e.isActive("bulletList"),action:e=>e.chain().focus().toggleBulletList().run(),canExecute:e=>e.can().chain().focus().toggleBulletList().run(),shortcuts:["mod","shift","8"]}],Ree=({editor:e,activeActions:t=fz.map(o=>o.value),mainActionCount:n=0,size:r,variant:s})=>h.jsx(Nee,{editor:e,actions:fz,activeActions:t,mainActionCount:n,dropdownIcon:h.jsxs(h.Fragment,{children:[h.jsx(Cee,{className:"size-5"}),h.jsx(See,{className:"size-5"})]}),dropdownTooltip:"Lists",size:r,variant:s});Ree.displayName="SectionFour";let B6,z6;if(typeof WeakMap<"u"){let e=new WeakMap;B6=t=>e.get(t),z6=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;B6=r=>{for(let s=0;s<e.length;s+=2)if(e[s]==r)return e[s+1]},z6=(r,s)=>(n==10&&(n=0),e[n++]=r,e[n++]=s)}var xf=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,s=t/this.width|0;let o=r+1,i=s+1;for(let a=1;o<this.width&&this.map[t+a]==n;a++)o++;for(let a=1;i<this.height&&this.map[t+this.width*a]==n;a++)i++;return{left:r,top:s,right:o,bottom:i}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:s,top:o,bottom:i}=this.findCell(e);return t=="horiz"?(n<0?r==0:s==this.width)?null:this.map[o*this.width+(n<0?r-1:s)]:(n<0?o==0:i==this.height)?null:this.map[r+this.width*(n<0?o-1:i)]}rectBetween(e,t){const{left:n,right:r,top:s,bottom:o}=this.findCell(e),{left:i,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,i),top:Math.min(s,l),right:Math.max(r,a),bottom:Math.max(o,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let s=e.left;s<e.right;s++){const o=r*this.width+s,i=this.map[o];n[i]||(n[i]=!0,!(s==e.left&&s&&this.map[o-1]==i||r==e.top&&r&&this.map[o-this.width]==i)&&t.push(i))}return t}positionAt(e,t,n){for(let r=0,s=0;;r++){const o=s+n.child(r).nodeSize;if(r==e){let i=t+e*this.width;const a=(e+1)*this.width;for(;i<a&&this.map[i]<s;)i++;return i==a?o-1:this.map[i]}s=o}}static get(e){return B6(e)||z6(e,hDe(e))}};function hDe(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=pDe(e),n=e.childCount,r=[];let s=0,o=null;const i=[];for(let c=0,u=t*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const f=e.child(c);u++;for(let y=0;;y++){for(;s<r.length&&r[s]!=0;)s++;if(y==f.childCount)break;const v=f.child(y),{colspan:x,rowspan:E,colwidth:T}=v.attrs;for(let k=0;k<E;k++){if(k+c>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:u,n:E-k});break}const I=s+k*t;for(let O=0;O<x;O++){r[I+O]==0?r[I+O]=u:(o||(o=[])).push({type:"collision",row:c,pos:u,n:x-O});const M=T&&T[O];if(M){const P=(I+O)%t*2,j=i[P];j==null||j!=M&&i[P+1]==1?(i[P]=M,i[P+1]=1):j==M&&i[P+1]++}}}s+=x,u+=v.nodeSize}const m=(c+1)*t;let g=0;for(;s<m;)r[s++]==0&&g++;g&&(o||(o=[])).push({type:"missing",row:c,n:g}),u++}(t===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const a=new xf(t,n,r,o);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&mDe(a,i,e),a}function pDe(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const s=e.child(r);let o=0;if(n)for(let i=0;i<r;i++){const a=e.child(i);for(let l=0;l<a.childCount;l++){const c=a.child(l);i+c.attrs.rowspan>r&&(o+=c.attrs.colspan)}}for(let i=0;i<s.childCount;i++){const a=s.child(i);o+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=o:t!=o&&(t=Math.max(t,o))}return t}function mDe(e,t,n){e.problems||(e.problems=[]);const r={};for(let s=0;s<e.map.length;s++){const o=e.map[s];if(r[o])continue;r[o]=!0;const i=n.nodeAt(o);if(!i)throw new RangeError(`No cell with offset ${o} found`);let a=null;const l=i.attrs;for(let c=0;c<l.colspan;c++){const u=t[(s+c)%e.width*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=gDe(l)))[c]=u)}a&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}function gDe(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function $7(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],s=r.spec.tableRole;s&&(t[s]=r)}}return t}new Br("selectingCells");function bDe(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function Mee(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function yDe(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=bDe(t.$head)||vDe(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function vDe(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function hz(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function Oee(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Dee(e,t,n){const r=e.node(-1),s=xf.get(r),o=e.start(-1),i=s.nextCell(e.pos-o,t,n);return i==null?null:e.node(0).resolve(o+i)}function pz(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}var yd=class gf extends Dn{constructor(t,n=t){const r=t.node(-1),s=xf.get(r),o=t.start(-1),i=s.rectBetween(t.pos-o,n.pos-o),a=t.node(0),l=s.cellsInRect(i).filter(u=>u!=n.pos-o);l.unshift(n.pos-o);const c=l.map(u=>{const f=r.nodeAt(u);if(!f)throw new RangeError(`No cell with offset ${u} found`);const m=o+u+1;return new LX(a.resolve(m),a.resolve(m+f.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),s=t.resolve(n.map(this.$headCell.pos));if(hz(r)&&hz(s)&&Oee(r,s)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?gf.rowSelection(r,s):o&&this.isColSelection()?gf.colSelection(r,s):new gf(r,s)}return Cn.between(r,s)}content(){const t=this.$anchorCell.node(-1),n=xf.get(t),r=this.$anchorCell.start(-1),s=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},i=[];for(let l=s.top;l<s.bottom;l++){const c=[];for(let u=l*n.width+s.left,f=s.left;f<s.right;f++,u++){const m=n.map[u];if(o[m])continue;o[m]=!0;const g=n.findCell(m);let y=t.nodeAt(m);if(!y)throw new RangeError(`No cell with offset ${m} found`);const v=s.left-g.left,x=g.right-s.right;if(v>0||x>0){let E=y.attrs;if(v>0&&(E=pz(E,0,v)),x>0&&(E=pz(E,E.colspan-x,x)),g.left<s.left){if(y=y.type.createAndFill(E),!y)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(E)}`)}else y=y.type.create(E,y.content)}if(g.top<s.top||g.bottom>s.bottom){const E={...y.attrs,rowspan:Math.min(g.bottom,s.bottom)-Math.max(g.top,s.top)};g.top<s.top?y=y.type.createAndFill(E):y=y.type.create(E,y.content)}c.push(y)}i.push(t.child(l).copy(pt.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?t:i;return new Yt(pt.from(a),1,1)}replace(t,n=Yt.empty){const r=t.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){const{$from:a,$to:l}=s[i],c=t.mapping.slice(r);t.replace(c.map(a.pos),c.map(l.pos),i?Yt.empty:n)}const o=Dn.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);o&&t.setSelection(o)}replaceWith(t,n){this.replace(t,new Yt(pt.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=xf.get(n),s=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let i=0;i<o.length;i++)t(n.nodeAt(o[i]),s+o[i])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,s=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),s=xf.get(r),o=t.start(-1),i=s.findCell(t.pos-o),a=s.findCell(n.pos-o),l=t.node(0);return i.top<=a.top?(i.top>0&&(t=l.resolve(o+s.map[i.left])),a.bottom<s.height&&(n=l.resolve(o+s.map[s.width*(s.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(o+s.map[a.left])),i.bottom<s.height&&(t=l.resolve(o+s.map[s.width*(s.height-1)+i.right-1]))),new gf(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=xf.get(t),r=this.$anchorCell.start(-1),s=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(s,o)>0)return!1;const i=s+this.$anchorCell.nodeAfter.attrs.colspan,a=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==n.width}eq(t){return t instanceof gf&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),s=xf.get(r),o=t.start(-1),i=s.findCell(t.pos-o),a=s.findCell(n.pos-o),l=t.node(0);return i.left<=a.left?(i.left>0&&(t=l.resolve(o+s.map[i.top*s.width])),a.right<s.width&&(n=l.resolve(o+s.map[s.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(o+s.map[a.top*s.width])),i.right<s.width&&(t=l.resolve(o+s.map[s.width*(i.top+1)-1]))),new gf(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new gf(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new gf(t.resolve(n),t.resolve(r))}getBookmark(){return new xDe(this.$anchorCell.pos,this.$headCell.pos)}};yd.prototype.visible=!1;Dn.jsonID("cell",yd);var xDe=class Pee{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Pee(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&Oee(n,r)?new yd(n,r):Dn.near(r,1)}};new Br("fix-tables");function Lee(e){const t=e.selection,n=yDe(e),r=n.node(-1),s=n.start(-1),o=xf.get(r);return{...t instanceof yd?o.rectBetween(t.$anchorCell.pos-s,t.$headCell.pos-s):o.findCell(n.pos-s),tableStart:s,map:o,table:r}}function wDe(e){return function(t,n){if(!Mee(t))return!1;if(n){const r=$7(t.schema),s=Lee(t),o=t.tr,i=s.map.cellsInRect(e=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:e=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),a=i.map(l=>s.table.nodeAt(l));for(let l=0;l<i.length;l++)a[l].type==r.header_cell&&o.setNodeMarkup(s.tableStart+i[l],r.cell,a[l].attrs);if(o.steps.length===0)for(let l=0;l<i.length;l++)o.setNodeMarkup(s.tableStart+i[l],r.header_cell,a[l].attrs);n(o)}return!0}}function mz(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let s=0;s<r.length;s++){const o=t.table.nodeAt(r[s]);if(o&&o.type!==n.header_cell)return!1}return!0}function F7(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?wDe(e):function(n,r){if(!Mee(n))return!1;if(r){const s=$7(n.schema),o=Lee(n),i=n.tr,a=mz("row",o,s),l=mz("column",o,s),c=(e==="column"?a:e==="row"&&l)?1:0,u=e=="column"?{left:0,top:c,right:1,bottom:o.map.height}:e=="row"?{left:c,top:0,right:o.map.width,bottom:1}:o,f=e=="column"?l?s.cell:s.header_cell:e=="row"?a?s.cell:s.header_cell:s.cell;o.map.cellsInRect(u).forEach(m=>{const g=m+o.tableStart,y=i.doc.nodeAt(g);y&&i.setNodeMarkup(g,f,y.attrs)}),r(i)}return!0}}F7("row",{useDeprecatedLogic:!0});F7("column",{useDeprecatedLogic:!0});F7("cell",{useDeprecatedLogic:!0});function M2(e,t){const n=e.selection;if(!(n instanceof yd))return!1;if(t){const r=e.tr,s=$7(e.schema).cell.createAndFill().content;n.forEachCell((o,i)=>{o.content.eq(s)||r.replace(r.mapping.map(i+1),r.mapping.map(i+o.nodeSize-1),new Yt(s,0,0))}),r.docChanged&&t(r)}return!0}_7({ArrowLeft:O2("horiz",-1),ArrowRight:O2("horiz",1),ArrowUp:O2("vert",-1),ArrowDown:O2("vert",1),"Shift-ArrowLeft":D2("horiz",-1),"Shift-ArrowRight":D2("horiz",1),"Shift-ArrowUp":D2("vert",-1),"Shift-ArrowDown":D2("vert",1),Backspace:M2,"Mod-Backspace":M2,Delete:M2,"Mod-Delete":M2});function D_(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function O2(e,t){return(n,r,s)=>{if(!s)return!1;const o=n.selection;if(o instanceof yd)return D_(n,r,Dn.near(o.$headCell,t));if(e!="horiz"&&!o.empty)return!1;const i=$ee(s,e,t);if(i==null)return!1;if(e=="horiz")return D_(n,r,Dn.near(n.doc.resolve(o.head+t),t));{const a=n.doc.resolve(i),l=Dee(a,e,t);let c;return l?c=Dn.near(l,1):t<0?c=Dn.near(n.doc.resolve(a.before(-1)),-1):c=Dn.near(n.doc.resolve(a.after(-1)),1),D_(n,r,c)}}}function D2(e,t){return(n,r,s)=>{if(!s)return!1;const o=n.selection;let i;if(o instanceof yd)i=o;else{const l=$ee(s,e,t);if(l==null)return!1;i=new yd(n.doc.resolve(l))}const a=Dee(i.$headCell,e,t);return a?D_(n,r,new yd(i.$anchorCell,a)):!1}}function $ee(e,t,n){if(!(e.state.selection instanceof Cn))return null;const{$head:r}=e.state.selection;for(let s=r.depth-1;s>=0;s--){const o=r.node(s);if((n<0?r.index(s):r.indexAfter(s))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const i=r.before(s),a=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(a)?i:null}}return null}new Br("tableColumnResizing");function EDe(e,t){const n=Math.min(e.top,t.top),r=Math.max(e.bottom,t.bottom),s=Math.min(e.left,t.left),i=Math.max(e.right,t.right)-s,a=r-n,l=s,c=n;return new DOMRect(l,c,i,a)}var _De=class{constructor({editor:e,element:t,view:n,updateDelay:r=250,resizeDelay:s=60,shouldShow:o,appendTo:i,getReferencedVirtualElement:a,options:l}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:u,state:f,from:m,to:g})=>{const{doc:y,selection:v}=f,{empty:x}=v,E=!y.textBetween(m,g).length&&k7(f.selection),T=this.element.contains(document.activeElement);return!(!(u.hasFocus()||T)||x||E||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var f;if(this.editor.isDestroyed){this.destroy();return}if(this.preventHide){this.preventHide=!1;return}u!=null&&u.relatedTarget&&((f=this.element.parentNode)!=null&&f.contains(u.relatedTarget))||(u==null?void 0:u.relatedTarget)!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(u,f)=>{const m=!(f!=null&&f.selection.eq(u.state.selection)),g=!(f!=null&&f.doc.eq(u.state.doc));!m&&!g||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,m,g,f)},this.updateDelay))},this.updateHandler=(u,f,m,g)=>{const{composing:y}=u;if(y||!f&&!m)return;if(!this.getShouldShow(g)){this.hide();return}this.updatePosition(),this.show()},this.transactionHandler=({transaction:u})=>{u.getMeta("bubbleMenu")==="updatePosition"&&this.updatePosition()};var c;this.editor=e,this.element=t,this.view=n,this.updateDelay=r,this.resizeDelay=s,this.appendTo=i,this.scrollTarget=(c=l==null?void 0:l.scrollTarget)!=null?c:window,this.getReferencedVirtualElement=a,this.floatingUIOptions={...this.floatingUIOptions,...l},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(PR(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(DR(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(OR(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push(aS(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(LR(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(XG(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push($R(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(QG(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),e}get virtualElement(){var e;const{selection:t}=this.editor.state,n=(e=this.getReferencedVirtualElement)==null?void 0:e.call(this);if(n)return n;const r=nee(this.view,t.from,t.to);let s={getBoundingClientRect:()=>r,getClientRects:()=>[r]};if(t instanceof kn){let o=this.view.nodeDOM(t.from);const i=o.dataset.nodeViewWrapper?o:o.querySelector("[data-node-view-wrapper]");i&&(o=i),o&&(s={getBoundingClientRect:()=>o.getBoundingClientRect(),getClientRects:()=>[o.getBoundingClientRect()]})}if(t instanceof yd){const{$anchorCell:o,$headCell:i}=t,a=o?o.pos:i.pos,l=i?i.pos:o.pos,c=this.view.nodeDOM(a),u=this.view.nodeDOM(l);if(!c||!u)return;const f=c===u?c.getBoundingClientRect():EDe(c.getBoundingClientRect(),u.getBoundingClientRect());s={getBoundingClientRect:()=>f,getClientRects:()=>[f]}}return s}updatePosition(){const e=this.virtualElement;e&&FR(e,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:t,y:n,strategy:r})=>{this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${t}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const{state:n}=e,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(e,t);return}const s=!(t!=null&&t.selection.eq(e.state.selection)),o=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,s,o,t)}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:s}=r,o=Math.min(...s.map(l=>l.$from.pos)),i=Math.max(...s.map(l=>l.$to.pos));return((t=this.shouldShow)==null?void 0:t.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:e,from:o,to:i}))||!1}show(){var e;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const t=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(e=t??this.view.dom.parentElement)==null||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Fee=e=>new Ir({key:typeof e.pluginKey=="string"?new Br(e.pluginKey):e.pluginKey,view:t=>new _De({view:t,...e})});ys.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Fee({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}});var SDe=class{constructor({editor:e,element:t,view:n,options:r,appendTo:s,shouldShow:o}){this.preventHide=!1,this.isVisible=!1,this.shouldShow=({view:i,state:a})=>{const{selection:l}=a,{$anchor:c,empty:u}=l,f=c.depth===1,m=c.parent.isTextblock&&!c.parent.type.spec.code&&!c.parent.textContent&&c.parent.childCount===0&&!this.getTextContent(c.parent);return!(!i.hasFocus()||!u||!f||!m||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(i,a,l,c)=>{const{composing:u}=i;if(u||!a&&!l)return;if(!this.getShouldShow(c)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:i})=>{var a;if(this.preventHide){this.preventHide=!1;return}i!=null&&i.relatedTarget&&((a=this.element.parentNode)!=null&&a.contains(i.relatedTarget))||(i==null?void 0:i.relatedTarget)!==this.editor.view.dom&&this.hide()},this.editor=e,this.element=t,this.view=n,this.appendTo=s,this.floatingUIOptions={...this.floatingUIOptions,...r},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}getTextContent(e){return ZQ(e,{textSerializers:R7(this.editor.schema)})}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(PR(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(DR(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(OR(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push(aS(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(LR(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(XG(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push($R(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(QG(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),e}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:s}=r,o=Math.min(...s.map(l=>l.$from.pos)),i=Math.max(...s.map(l=>l.$to.pos));return(t=this.shouldShow)==null?void 0:t.call(this,{editor:this.editor,view:this.view,state:n,oldState:e,from:o,to:i})}updatePosition(){const{selection:e}=this.editor.state,t=nee(this.view,e.from,e.to);FR({getBoundingClientRect:()=>t,getClientRects:()=>[t]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:s,strategy:o})=>{this.element.style.width="max-content",this.element.style.position=o,this.element.style.left=`${r}px`,this.element.style.top=`${s}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const n=!(t!=null&&t.selection.eq(e.state.selection)),r=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,n,r,t)}show(){var e;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const t=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(e=t??this.view.dom.parentElement)==null||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Bee=e=>new Ir({key:typeof e.pluginKey=="string"?new Br(e.pluginKey):e.pluginKey,view:t=>new SDe({view:t,...e})});ys.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Bee({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var TDe=Me.forwardRef(({pluginKey:e="bubbleMenu",editor:t,updateDelay:n,resizeDelay:r,appendTo:s,shouldShow:o=null,getReferencedVirtualElement:i,options:a,children:l,...c},u)=>{const f=w.useRef(document.createElement("div"));typeof u=="function"?u(f.current):u&&(u.current=f.current);const{editor:m}=Eee(),g=t||m,y={updateDelay:n,resizeDelay:r,appendTo:s,pluginKey:e,shouldShow:o,getReferencedVirtualElement:i,options:a},v=w.useRef(y);return v.current=y,w.useEffect(()=>{if(g!=null&&g.isDestroyed)return;if(!g){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const x=f.current;x.style.visibility="hidden",x.style.position="absolute";const E=Fee({...v.current,editor:g,element:x});g.registerPlugin(E);const T=v.current.pluginKey;return()=>{g.unregisterPlugin(T),window.requestAnimationFrame(()=>{x.parentNode&&x.parentNode.removeChild(x)})}},[g]),dl.createPortal(h.jsx("div",{...c,children:l}),f.current)});Me.forwardRef(({pluginKey:e="floatingMenu",editor:t,appendTo:n,shouldShow:r=null,options:s,children:o,...i},a)=>{const l=w.useRef(document.createElement("div"));typeof a=="function"?a(l.current):a&&(a.current=l.current);const{editor:c}=Eee();return w.useEffect(()=>{const u=l.current;if(u.style.visibility="hidden",u.style.position="absolute",t!=null&&t.isDestroyed||c!=null&&c.isDestroyed)return;const f=t||c;if(!f){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const m=Bee({editor:f,element:u,pluginKey:e,appendTo:n,shouldShow:r,options:s});return f.registerPlugin(m),()=>{f.unregisterPlugin(e),window.requestAnimationFrame(()=>{u.parentNode&&u.parentNode.removeChild(u)})}},[t,c,n,e,r,s]),dl.createPortal(h.jsx("div",{...i,children:o}),l.current)});var OC="Switch",[CDe]=za(OC),[kDe,ADe]=CDe(OC),zee=w.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:i,disabled:a,value:l="on",onCheckedChange:c,form:u,...f}=e,[m,g]=w.useState(null),y=Nr(t,k=>g(k)),v=w.useRef(!1),x=m?u||!!m.closest("form"):!0,[E,T]=ml({prop:s,defaultProp:o??!1,onChange:c,caller:OC});return h.jsxs(kDe,{scope:n,checked:E,disabled:a,children:[h.jsx(Ln.button,{type:"button",role:"switch","aria-checked":E,"aria-required":i,"data-state":Vee(E),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:y,onClick:Gt(e.onClick,k=>{T(I=>!I),x&&(v.current=k.isPropagationStopped(),v.current||k.stopPropagation())})}),x&&h.jsx(Hee,{control:m,bubbles:!v.current,name:r,value:l,checked:E,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});zee.displayName=OC;var jee="SwitchThumb",Uee=w.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=ADe(jee,n);return h.jsx(Ln.span,{"data-state":Vee(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});Uee.displayName=jee;var NDe="SwitchBubbleInput",Hee=w.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},o)=>{const i=w.useRef(null),a=Nr(i,o),l=aC(n),c=R4(t);return w.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&g){const y=new Event("click",{bubbles:r});g.call(u,n),u.dispatchEvent(y)}},[l,n,r]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Hee.displayName=NDe;function Vee(e){return e?"checked":"unchecked"}var IDe=zee,RDe=Uee;function MDe({className:e,...t}){return h.jsx(IDe,{"data-slot":"switch",className:Qe("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:h.jsx(RDe,{"data-slot":"switch-thumb",className:Qe("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const qee=w.forwardRef(({onSave:e,defaultIsNewTab:t,defaultUrl:n,defaultText:r,className:s},o)=>{const i=w.useRef(null),[a,l]=w.useState(n||""),[c,u]=w.useState(r||""),[f,m]=w.useState(t||!1),g=w.useCallback(y=>{y.preventDefault(),i.current&&(Array.from(i.current.querySelectorAll("input")).every(x=>x.checkValidity())?e(a,c,f):i.current.querySelectorAll("input").forEach(x=>{x.checkValidity()||x.reportValidity()}))},[e,a,c,f]);return w.useImperativeHandle(o,()=>i.current),h.jsx("div",{ref:i,children:h.jsxs("div",{className:Qe("space-y-4",s),children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(jl,{children:"URL"}),h.jsx(gu,{type:"url",required:!0,placeholder:"Enter URL",value:a,onChange:y=>l(y.target.value)})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(jl,{children:"Display Text (optional)"}),h.jsx(gu,{type:"text",placeholder:"Enter display text",value:c,onChange:y=>u(y.target.value)})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(jl,{children:"Open in New Tab"}),h.jsx(MDe,{checked:f,onCheckedChange:m})]}),h.jsx("div",{className:"flex justify-end space-x-2",children:h.jsx(wr,{type:"button",onClick:g,children:"Save"})})]})})});qee.displayName="LinkEditBlock";const ODe=({url:e,onClear:t,onEdit:n})=>{const[r,s]=w.useState("Copy"),o=w.useCallback(a=>{a.preventDefault(),navigator.clipboard.writeText(e).then(()=>{s("Copied!"),setTimeout(()=>s("Copy"),1e3)}).catch(console.error)},[e]),i=w.useCallback(()=>{window.open(e,"_blank","noopener,noreferrer")},[e]);return h.jsx("div",{className:"flex h-10 overflow-hidden rounded bg-background p-2 shadow-lg",children:h.jsxs("div",{className:"inline-flex items-center gap-1",children:[h.jsx(Wp,{tooltip:"Edit link",onClick:n,className:"w-auto px-2",children:"Edit link"}),h.jsx($f,{orientation:"vertical"}),h.jsx(Wp,{tooltip:"Open link in a new tab",onClick:i,children:h.jsx(FOe,{className:"size-4"})}),h.jsx($f,{orientation:"vertical"}),h.jsx(Wp,{tooltip:"Clear link",onClick:t,children:h.jsx(YOe,{className:"size-4"})}),h.jsx($f,{orientation:"vertical"}),h.jsx(Wp,{tooltip:r,onClick:o,tooltipOptions:{onPointerDownOutside:a=>{a.target===a.currentTarget&&a.preventDefault()}},children:h.jsx(OOe,{className:"size-4"})})]})})},DDe=({editor:e})=>{const[t,n]=w.useState(!1),[r,s]=w.useState({href:"",target:""}),[o,i]=w.useState(""),a=w.useCallback(()=>{const{from:m,to:g}=e.state.selection,{href:y,target:v}=e.getAttributes("link"),x=e.state.doc.textBetween(m,g," ");s({href:y,target:v}),i(x)},[e]),l=w.useCallback(({editor:m,from:g,to:y})=>{if(g===y)return!1;const{href:v}=m.getAttributes("link");return!m.isActive("link")||!m.isEditable?!1:v?(a(),!0):!1},[a]),c=w.useCallback(()=>{n(!0)},[]),u=w.useCallback((m,g,y)=>{e.chain().focus().extendMarkRange("link").insertContent({type:"text",text:g||m,marks:[{type:"link",attrs:{href:m,target:y?"_blank":""}}]}).setLink({href:m,target:y?"_blank":""}).run(),n(!1),a()},[e,a]),f=w.useCallback(()=>{e.chain().focus().extendMarkRange("link").unsetLink().run(),n(!1),a()},[e,a]);return h.jsx(TDe,{editor:e,shouldShow:l,tippyOptions:{placement:"bottom-start",onHidden:()=>n(!1)},children:t?h.jsx(qee,{defaultUrl:r.href,defaultText:o,defaultIsNewTab:r.target==="_blank",onSave:u,className:"w-full min-w-80 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-hidden"}):h.jsx(ODe,{onClear:f,url:r.href,onEdit:c})})};var nT=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},PDe=/^\s*>\s$/,LDe=yl.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return nT("blockquote",{...Vo(this.options.HTMLAttributes,e),children:nT("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",r=[];return e.content.forEach(s=>{const a=t.renderChildren([s]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ob({find:PDe,type:this.type})]}}),$De=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,FDe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,BDe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,zDe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,jDe=V0.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return nT("strong",{...Vo(this.options.HTMLAttributes,e),children:nT("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[sb({find:$De,type:this.type}),sb({find:BDe,type:this.type})]},addPasteRules(){return[xm({find:FDe,type:this.type}),xm({find:zDe,type:this.type})]}}),UDe=/(^|[^`])`([^`]+)`(?!`)$/,HDe=/(^|[^`])`([^`]+)`(?!`)/g,VDe=V0.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Vo(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[sb({find:UDe,type:this.type})]},addPasteRules(){return[xm({find:HDe,type:this.type})]}}),A5=4,qDe=/^```([a-z]+)?[\s\n]$/,GDe=/^~~~([a-z]+)?[\s\n]$/,Gee=yl.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:A5,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Vo(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let r="";const s=((n=e.attrs)==null?void 0:n.language)||"";return e.content?r=[`\`\`\`${s}`,t.renderChildren(e.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:A5,{state:r}=e,{selection:s}=r,{$from:o,empty:i}=s;if(o.parent.type!==this.type)return!1;const a=" ".repeat(n);return i?e.commands.insertContent(a):e.commands.command(({tr:l})=>{const{from:c,to:u}=s,g=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(y=>a+y).join(`
`);return l.replaceWith(c,u,r.schema.text(g)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:A5,{state:r}=e,{selection:s}=r,{$from:o,empty:i}=s;return o.parent.type!==this.type?!1:i?e.commands.command(({tr:a})=>{var l;const{pos:c}=o,u=o.start(),f=o.end(),g=r.doc.textBetween(u,f,`
`,`
`).split(`
`);let y=0,v=0;const x=c-u;for(let M=0;M<g.length;M+=1){if(v+g[M].length>=x){y=M;break}v+=g[M].length+1}const T=((l=g[y].match(/^ */))==null?void 0:l[0])||"",k=Math.min(T.length,n);if(k===0)return!0;let I=u;for(let M=0;M<y;M+=1)I+=g[M].length+1;return a.delete(I,I+k),c-I<=k&&a.setSelection(Cn.create(a.doc,I)),!0}):e.commands.command(({tr:a})=>{const{from:l,to:c}=s,m=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(g=>{var y;const v=((y=g.match(/^ */))==null?void 0:y[0])||"",x=Math.min(v.length,n);return g.slice(x)}).join(`
`);return a.replaceWith(l,c,r.schema.text(m)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!o||!i?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?e.commands.command(({tr:c})=>(c.setSelection(Dn.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[P6({find:qDe,type:this.type,getAttributes:e=>({language:e[1]})}),P6({find:GDe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Ir({key:new Br("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s==null?void 0:s.mode;if(!n||!o)return!1;const{tr:i,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:o},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(Cn.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),e.dispatch(i),!0}}})]}}),WDe=Gee,YDe=yl.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),KDe=yl.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Vo(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=o||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const f=l.filter(m=>a.includes(m.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),ZDe=yl.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Vo(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const r=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,s="#".repeat(r);return e.content?`${s} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>P6({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),Wee=yl.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Vo(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!f9e(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,s=e();return QQ(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:o,tr:i,dispatch:a})=>{if(a){const{$to:l}=i.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?i.setSelection(Cn.create(i.doc,l.pos+1)):l.nodeAfter.isBlock?i.setSelection(kn.create(i.doc,l.pos)):i.setSelection(Cn.create(i.doc,l.pos));else{const u=o.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,f=u==null?void 0:u.create();f&&(i.insert(c,f),i.setSelection(Cn.create(i.doc,c+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[bee({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),JDe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,XDe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,QDe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ePe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,tPe=V0.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Vo(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[sb({find:JDe,type:this.type}),sb({find:QDe,type:this.type})]},addPasteRules(){return[xm({find:XDe,type:this.type}),xm({find:ePe,type:this.type})]}});const nPe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",rPe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",j6="numeric",U6="ascii",H6="alpha",zv="asciinumeric",vv="alphanumeric",V6="domain",Yee="emoji",sPe="scheme",oPe="slashscheme",N5="whitespace";function iPe(e,t){return e in t||(t[e]=[]),t[e]}function Yp(e,t,n){t[j6]&&(t[zv]=!0,t[vv]=!0),t[U6]&&(t[zv]=!0,t[H6]=!0),t[zv]&&(t[vv]=!0),t[H6]&&(t[vv]=!0),t[vv]&&(t[V6]=!0),t[Yee]&&(t[V6]=!0);for(const r in t){const s=iPe(r,n);s.indexOf(e)<0&&s.push(e)}}function aPe(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function ul(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}ul.groups={};ul.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const s=t.jr[r][0],o=t.jr[r][1];if(o&&s.test(e))return o}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let s=0;s<e.length;s++)this.tt(e[s],t,n,r)},tr(e,t,n,r){r=r||ul.groups;let s;return t&&t.j?s=t:(s=new ul(t),n&&r&&Yp(t,n,r)),this.jr.push([e,s]),s},ts(e,t,n,r){let s=this;const o=e.length;if(!o)return s;for(let i=0;i<o-1;i++)s=s.tt(e[i]);return s.tt(e[o-1],t,n,r)},tt(e,t,n,r){r=r||ul.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const o=t;let i,a=s.go(e);if(a?(i=new ul,Object.assign(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new ul,o){if(r)if(i.t&&typeof i.t=="string"){const l=Object.assign(aPe(i.t,r),n);Yp(o,l,r)}else n&&Yp(o,n,r);i.t=o}return s.j[e]=i,i}};const xr=(e,t,n,r,s)=>e.ta(t,n,r,s),zo=(e,t,n,r,s)=>e.tr(t,n,r,s),gz=(e,t,n,r,s)=>e.ts(t,n,r,s),At=(e,t,n,r,s)=>e.tt(t,n,r,s),bf="WORD",q6="UWORD",Kee="ASCIINUMERICAL",Zee="ALPHANUMERICAL",Bx="LOCALHOST",G6="TLD",W6="UTLD",P_="SCHEME",a1="SLASH_SCHEME",B7="NUM",Y6="WS",z7="NL",jv="OPENBRACE",Uv="CLOSEBRACE",rT="OPENBRACKET",sT="CLOSEBRACKET",oT="OPENPAREN",iT="CLOSEPAREN",aT="OPENANGLEBRACKET",lT="CLOSEANGLEBRACKET",cT="FULLWIDTHLEFTPAREN",uT="FULLWIDTHRIGHTPAREN",dT="LEFTCORNERBRACKET",fT="RIGHTCORNERBRACKET",hT="LEFTWHITECORNERBRACKET",pT="RIGHTWHITECORNERBRACKET",mT="FULLWIDTHLESSTHAN",gT="FULLWIDTHGREATERTHAN",bT="AMPERSAND",yT="APOSTROPHE",vT="ASTERISK",n0="AT",xT="BACKSLASH",wT="BACKTICK",ET="CARET",o0="COLON",j7="COMMA",_T="DOLLAR",ed="DOT",ST="EQUALS",U7="EXCLAMATION",bc="HYPHEN",Hv="PERCENT",TT="PIPE",CT="PLUS",kT="POUND",Vv="QUERY",H7="QUOTE",Jee="FULLWIDTHMIDDLEDOT",V7="SEMI",td="SLASH",qv="TILDE",AT="UNDERSCORE",Xee="EMOJI",NT="SYM";var Qee=Object.freeze({__proto__:null,ALPHANUMERICAL:Zee,AMPERSAND:bT,APOSTROPHE:yT,ASCIINUMERICAL:Kee,ASTERISK:vT,AT:n0,BACKSLASH:xT,BACKTICK:wT,CARET:ET,CLOSEANGLEBRACKET:lT,CLOSEBRACE:Uv,CLOSEBRACKET:sT,CLOSEPAREN:iT,COLON:o0,COMMA:j7,DOLLAR:_T,DOT:ed,EMOJI:Xee,EQUALS:ST,EXCLAMATION:U7,FULLWIDTHGREATERTHAN:gT,FULLWIDTHLEFTPAREN:cT,FULLWIDTHLESSTHAN:mT,FULLWIDTHMIDDLEDOT:Jee,FULLWIDTHRIGHTPAREN:uT,HYPHEN:bc,LEFTCORNERBRACKET:dT,LEFTWHITECORNERBRACKET:hT,LOCALHOST:Bx,NL:z7,NUM:B7,OPENANGLEBRACKET:aT,OPENBRACE:jv,OPENBRACKET:rT,OPENPAREN:oT,PERCENT:Hv,PIPE:TT,PLUS:CT,POUND:kT,QUERY:Vv,QUOTE:H7,RIGHTCORNERBRACKET:fT,RIGHTWHITECORNERBRACKET:pT,SCHEME:P_,SEMI:V7,SLASH:td,SLASH_SCHEME:a1,SYM:NT,TILDE:qv,TLD:G6,UNDERSCORE:AT,UTLD:W6,UWORD:q6,WORD:bf,WS:Y6});const hf=/[a-z]/,Wy=new RegExp("\\p{L}","u"),I5=new RegExp("\\p{Emoji}","u"),pf=/\d/,R5=/\s/,bz="\r",M5=`
`,lPe="",cPe="",O5="";let P2=null,L2=null;function uPe(e=[]){const t={};ul.groups=t;const n=new ul;P2==null&&(P2=yz(nPe)),L2==null&&(L2=yz(rPe)),At(n,"'",yT),At(n,"{",jv),At(n,"}",Uv),At(n,"[",rT),At(n,"]",sT),At(n,"(",oT),At(n,")",iT),At(n,"<",aT),At(n,">",lT),At(n,"",cT),At(n,"",uT),At(n,"",dT),At(n,"",fT),At(n,"",hT),At(n,"",pT),At(n,"",mT),At(n,"",gT),At(n,"&",bT),At(n,"*",vT),At(n,"@",n0),At(n,"`",wT),At(n,"^",ET),At(n,":",o0),At(n,",",j7),At(n,"$",_T),At(n,".",ed),At(n,"=",ST),At(n,"!",U7),At(n,"-",bc),At(n,"%",Hv),At(n,"|",TT),At(n,"+",CT),At(n,"#",kT),At(n,"?",Vv),At(n,'"',H7),At(n,"/",td),At(n,";",V7),At(n,"~",qv),At(n,"_",AT),At(n,"\\",xT),At(n,"",Jee);const r=zo(n,pf,B7,{[j6]:!0});zo(r,pf,r);const s=zo(r,hf,Kee,{[zv]:!0}),o=zo(r,Wy,Zee,{[vv]:!0}),i=zo(n,hf,bf,{[U6]:!0});zo(i,pf,s),zo(i,hf,i),zo(s,pf,s),zo(s,hf,s);const a=zo(n,Wy,q6,{[H6]:!0});zo(a,hf),zo(a,pf,o),zo(a,Wy,a),zo(o,pf,o),zo(o,hf),zo(o,Wy,o);const l=At(n,M5,z7,{[N5]:!0}),c=At(n,bz,Y6,{[N5]:!0}),u=zo(n,R5,Y6,{[N5]:!0});At(n,O5,u),At(c,M5,l),At(c,O5,u),zo(c,R5,u),At(u,bz),At(u,M5),zo(u,R5,u),At(u,O5,u);const f=zo(n,I5,Xee,{[Yee]:!0});At(f,"#"),zo(f,I5,f),At(f,lPe,f);const m=At(f,cPe);At(m,"#"),zo(m,I5,f);const g=[[hf,i],[pf,s]],y=[[hf,null],[Wy,a],[pf,o]];for(let v=0;v<P2.length;v++)qh(n,P2[v],G6,bf,g);for(let v=0;v<L2.length;v++)qh(n,L2[v],W6,q6,y);Yp(G6,{tld:!0,ascii:!0},t),Yp(W6,{utld:!0,alpha:!0},t),qh(n,"file",P_,bf,g),qh(n,"mailto",P_,bf,g),qh(n,"http",a1,bf,g),qh(n,"https",a1,bf,g),qh(n,"ftp",a1,bf,g),qh(n,"ftps",a1,bf,g),Yp(P_,{scheme:!0,ascii:!0},t),Yp(a1,{slashscheme:!0,ascii:!0},t),e=e.sort((v,x)=>v[0]>x[0]?1:-1);for(let v=0;v<e.length;v++){const x=e[v][0],T=e[v][1]?{[sPe]:!0}:{[oPe]:!0};x.indexOf("-")>=0?T[V6]=!0:hf.test(x)?pf.test(x)?T[zv]=!0:T[U6]=!0:T[j6]=!0,gz(n,x,x,T)}return gz(n,"localhost",Bx,{ascii:!0}),n.jd=new ul(NT),{start:n,tokens:Object.assign({groups:t},Qee)}}function ete(e,t){const n=dPe(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let o=0,i=0;for(;i<r;){let a=e,l=null,c=0,u=null,f=-1,m=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(f=0,m=0,u=a):f>=0&&(f+=n[i].length,m++),c+=n[i].length,o+=n[i].length,i++;o-=f,i-=m,c-=f,s.push({t:u.t,v:t.slice(o-c,o),s:o-c,e:o})}return s}function dPe(e){const t=[],n=e.length;let r=0;for(;r<n;){let s=e.charCodeAt(r),o,i=s<55296||s>56319||r+1===n||(o=e.charCodeAt(r+1))<56320||o>57343?e[r]:e.slice(r,r+2);t.push(i),r+=i.length}return t}function qh(e,t,n,r,s){let o;const i=t.length;for(let a=0;a<i-1;a++){const l=t[a];e.j[l]?o=e.j[l]:(o=new ul(r),o.jr=s.slice(),e.j[l]=o),e=o}return o=new ul(n),o.jr=s.slice(),e.j[t[i-1]]=o,o}function yz(e){const t=[],n=[];let r=0,s="0123456789";for(;r<e.length;){let o=0;for(;s.indexOf(e[r+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let i=parseInt(e.substring(r,r+o),10);i>0;i--)n.pop();r+=o}else n.push(e[r]),r++}return t}const zx={defaultProtocol:"http",events:null,format:vz,formatHref:vz,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function q7(e,t=null){let n=Object.assign({},zx);e&&(n=Object.assign(n,e instanceof q7?e.o:e));const r=n.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=s}q7.prototype={o:zx,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:zx[e],typeof s=="function"&&r&&(s=s(t,n))):typeof s=="function"&&r&&(s=s(t,n.t,n)),s)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function vz(e){return e}function tte(e,t){this.t="token",this.v=e,this.tk=t}tte.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=zx.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),s=e.get("tagName",n,t),o=this.toFormattedString(e),i={},a=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),f=e.getObj("events",n,t);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),u&&Object.assign(i,u),{tagName:s,attributes:i,content:o,eventListeners:f}}};function DC(e,t){class n extends tte{constructor(s,o){super(s,o),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const xz=DC("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),wz=DC("text"),fPe=DC("nl"),$2=DC("url",{isLink:!0,toHref(e=zx.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Bx&&e[1].t===o0}}),pc=e=>new ul(e);function hPe({groups:e}){const t=e.domain.concat([bT,vT,n0,xT,wT,ET,_T,ST,bc,B7,Hv,TT,CT,kT,td,NT,qv,AT]),n=[yT,o0,j7,ed,U7,Hv,Vv,H7,V7,aT,lT,jv,Uv,sT,rT,oT,iT,cT,uT,dT,fT,hT,pT,mT,gT],r=[bT,yT,vT,xT,wT,ET,_T,ST,bc,jv,Uv,Hv,TT,CT,kT,Vv,td,NT,qv,AT],s=pc(),o=At(s,qv);xr(o,r,o),xr(o,e.domain,o);const i=pc(),a=pc(),l=pc();xr(s,e.domain,i),xr(s,e.scheme,a),xr(s,e.slashscheme,l),xr(i,r,o),xr(i,e.domain,i);const c=At(i,n0);At(o,n0,c),At(a,n0,c),At(l,n0,c);const u=At(o,ed);xr(u,r,o),xr(u,e.domain,o);const f=pc();xr(c,e.domain,f),xr(f,e.domain,f);const m=At(f,ed);xr(m,e.domain,f);const g=pc(xz);xr(m,e.tld,g),xr(m,e.utld,g),At(c,Bx,g);const y=At(f,bc);At(y,bc,y),xr(y,e.domain,f),xr(g,e.domain,f),At(g,ed,m),At(g,bc,y);const v=At(g,o0);xr(v,e.numeric,xz);const x=At(i,bc),E=At(i,ed);At(x,bc,x),xr(x,e.domain,i),xr(E,r,o),xr(E,e.domain,i);const T=pc($2);xr(E,e.tld,T),xr(E,e.utld,T),xr(T,e.domain,i),xr(T,r,o),At(T,ed,E),At(T,bc,x),At(T,n0,c);const k=At(T,o0),I=pc($2);xr(k,e.numeric,I);const O=pc($2),M=pc();xr(O,t,O),xr(O,n,M),xr(M,t,O),xr(M,n,M),At(T,td,O),At(I,td,O);const P=At(a,o0),j=At(l,o0),V=At(j,td),U=At(V,td);xr(a,e.domain,i),At(a,ed,E),At(a,bc,x),xr(l,e.domain,i),At(l,ed,E),At(l,bc,x),xr(P,e.domain,O),At(P,td,O),At(P,Vv,O),xr(U,e.domain,O),xr(U,t,O),At(U,td,O);const z=[[jv,Uv],[rT,sT],[oT,iT],[aT,lT],[cT,uT],[dT,fT],[hT,pT],[mT,gT]];for(let H=0;H<z.length;H++){const[F,G]=z[H],X=At(O,F);At(M,F,X),At(X,G,O);const J=pc($2);xr(X,t,J);const ee=pc();xr(X,n),xr(J,t,J),xr(J,n,ee),xr(ee,t,J),xr(ee,n,ee),At(J,G,O),At(ee,G,O)}return At(s,Bx,T),At(s,z7,fPe),{start:s,tokens:Qee}}function pPe(e,t,n){let r=n.length,s=0,o=[],i=[];for(;s<r;){let a=e,l=null,c=null,u=0,f=null,m=-1;for(;s<r&&!(l=a.go(n[s].t));)i.push(n[s++]);for(;s<r&&(c=l||a.go(n[s].t));)l=null,a=c,a.accepts()?(m=0,f=a):m>=0&&m++,s++,u++;if(m<0)s-=u,s<r&&(i.push(n[s]),s++);else{i.length>0&&(o.push(D5(wz,t,i)),i=[]),s-=m,u-=m;const g=f.t,y=n.slice(s-u,s);o.push(D5(g,t,y))}}return i.length>0&&o.push(D5(wz,t,i)),o}function D5(e,t,n){const r=n[0].s,s=n[n.length-1].e,o=t.slice(r,s);return new e(o,n)}const mPe=typeof console<"u"&&console&&console.warn||(()=>{}),gPe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",oo={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function bPe(){return ul.groups={},oo.scanner=null,oo.parser=null,oo.tokenQueue=[],oo.pluginQueue=[],oo.customSchemes=[],oo.initialized=!1,oo}function Ez(e,t=!1){if(oo.initialized&&mPe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${gPe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);oo.customSchemes.push([e,t])}function yPe(){oo.scanner=uPe(oo.customSchemes);for(let e=0;e<oo.tokenQueue.length;e++)oo.tokenQueue[e][1]({scanner:oo.scanner});oo.parser=hPe(oo.scanner.tokens);for(let e=0;e<oo.pluginQueue.length;e++)oo.pluginQueue[e][1]({scanner:oo.scanner,parser:oo.parser});return oo.initialized=!0,oo}function G7(e){return oo.initialized||yPe(),pPe(oo.parser.start,e,ete(oo.scanner.start,e))}G7.scan=ete;function nte(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new q7(n),s=G7(e),o=[];for(let i=0;i<s.length;i++){const a=s[i];a.isLink&&(!t||a.t===t)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}var W7="[\0- -\u2029]",vPe=new RegExp(W7),xPe=new RegExp(`${W7}$`),wPe=new RegExp(W7,"g");function EPe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function _Pe(e){return new Ir({key:new Br("autolink"),appendTransaction:(t,n,r)=>{const s=t.some(c=>c.docChanged)&&!n.doc.eq(r.doc),o=t.some(c=>c.getMeta("preventAutolink"));if(!s||o)return;const{tr:i}=r,a=qQ(n.doc,[...t]);if(XQ(a).forEach(({newRange:c})=>{const u=fMe(r.doc,c,g=>g.isTextblock);let f,m;if(u.length>1)f=u[0],m=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(u.length){const g=r.doc.textBetween(c.from,c.to," "," ");if(!xPe.test(g))return;f=u[0],m=r.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&m){const g=m.split(vPe).filter(Boolean);if(g.length<=0)return!1;const y=g[g.length-1],v=f.pos+m.lastIndexOf(y);if(!y)return!1;const x=G7(y).map(E=>E.toObject(e.defaultProtocol));if(!EPe(x))return!1;x.filter(E=>E.isLink).map(E=>({...E,from:v+E.start+1,to:v+E.end+1})).filter(E=>r.schema.marks.code?!r.doc.rangeHasMark(E.from,E.to,r.schema.marks.code):!0).filter(E=>e.validate(E.value)).filter(E=>e.shouldAutoLink(E.value)).forEach(E=>{M7(E.from,E.to,r.doc).some(T=>T.mark.type===e.type)||i.addMark(E.from,E.to,e.type.create({href:E.href}))})}}),!!i.steps.length)return i}})}function SPe(e){return new Ir({key:new Br("handleClickLink"),props:{handleClick:(t,n,r)=>{var s,o;if(r.button!==0||!t.editable)return!1;let i=!1;if(e.enableClickSelection&&(i=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let f=r.target;const m=[];for(;f.nodeName!=="DIV";)m.push(f),f=f.parentNode;a=m.find(g=>g.nodeName==="A")}if(!a)return i;const l=JQ(t.state,e.type.name),c=(s=a==null?void 0:a.href)!=null?s:l.href,u=(o=a==null?void 0:a.target)!=null?o:l.target;a&&c&&(window.open(c,u),i=!0)}return i}}})}function TPe(e){return new Ir({key:new Br("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:s}=e,{state:o}=t,{selection:i}=o,{empty:a}=i;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=nte(l,{defaultProtocol:e.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||s!==void 0&&!s(c.href)?!1:e.editor.commands.setMark(e.type,{href:c.href})}}})}function Pp(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!e||e.replace(wPe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var rte=V0.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){Ez(e);return}Ez(e.scheme,e.optionalSlashes)})},onDestroy(){bPe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Pp(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!Pp(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!Pp(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Vo(this.options.HTMLAttributes,e),0]:["a",Vo(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n;const r=((n=e.attrs)==null?void 0:n.href)||"";return`[${t.renderChildren(e)}](${r})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Pp(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Pp(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[xm({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,s=nte(e).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:i=>!!Pp(i,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(o=>{this.options.shouldAutoLink(o.value)&&t.push({text:o.value,data:{href:o.href},index:o.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(_Pe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Pp(s,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(SPe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(TPe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),CPe=rte,kPe=Object.defineProperty,APe=(e,t)=>{for(var n in t)kPe(e,n,{get:t[n],enumerable:!0})},NPe="listItem",_z="textStyle",Sz=/^\s*([-+*])\s$/,ste=yl.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Vo(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(NPe,this.editor.getAttributes(_z)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=ob({find:Sz,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ob({find:Sz,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(_z),editor:this.editor})),[e]}}),ote=yl.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Vo(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(s=>s.type==="paragraph"))n=t.parseChildren(e.tokens);else{const s=e.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(s.tokens)}],e.tokens.length>1){const i=e.tokens.slice(1),a=t.parseChildren(i);n.push(...a)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>L7(e,t,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),IPe={};APe(IPe,{findListItemPos:()=>Pw,getNextListDepth:()=>Y7,handleBackspace:()=>K6,handleDelete:()=>Z6,hasListBefore:()=>ite,hasListItemAfter:()=>RPe,hasListItemBefore:()=>ate,listItemHasSubList:()=>lte,nextListIsDeeper:()=>cte,nextListIsHigher:()=>ute});var Pw=(e,t)=>{const{$from:n}=t.selection,r=hi(e,t.schema);let s=null,o=n.depth,i=n.pos,a=null;for(;o>0&&a===null;)s=n.node(o),s.type===r?a=o:(o-=1,i-=1);return a===null?null:{$pos:t.doc.resolve(i),depth:a}},Y7=(e,t)=>{const n=Pw(e,t);if(!n)return!1;const[,r]=wMe(t,e,n.$pos.pos+4);return r},ite=(e,t,n)=>{const{$anchor:r}=e.selection,s=Math.max(0,r.pos-2),o=e.doc.resolve(s).node();return!(!o||!n.includes(o.type.name))},ate=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==e)},lte=(e,t,n)=>{if(!n)return!1;const r=hi(e,t.schema);let s=!1;return n.descendants(o=>{o.type===r&&(s=!0)}),s},K6=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!A0(e.state,t)&&ite(e.state,t,n)){const{$anchor:a}=e.state.selection,l=e.state.doc.resolve(a.before()-1),c=[];l.node().descendants((m,g)=>{m.type.name===t&&c.push({node:m,pos:g})});const u=c.at(-1);if(!u)return!1;const f=e.state.doc.resolve(l.start()+u.pos+1);return e.chain().cut({from:a.start()-1,to:a.end()+1},f.end()).joinForward().run()}if(!A0(e.state,t)||!TMe(e.state))return!1;const r=Pw(t,e.state);if(!r)return!1;const o=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),i=lte(t,e.state,o);return ate(t,e.state)&&!i?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},cte=(e,t)=>{const n=Y7(e,t),r=Pw(e,t);return!r||!n?!1:n>r.depth},ute=(e,t)=>{const n=Y7(e,t),r=Pw(e,t);return!r||!n?!1:n<r.depth},Z6=(e,t)=>{if(!A0(e.state,t)||!SMe(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:cte(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():ute(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},RPe=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==e)},dte=ys.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&Z6(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&Z6(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&K6(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&K6(e,n,r)&&(t=!0)}),t}}}}),Tz=/^(\s*)(\d+)\.\s+(.*)$/,MPe=/^\s/;function OPe(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n],o=s.match(Tz);if(!o)break;const[,i,a,l]=o,c=i.length;let u=l,f=n+1;const m=[s];for(;f<e.length;){const g=e[f];if(g.match(Tz))break;if(g.trim()==="")m.push(g),u+=`
`,f+=1;else if(g.match(MPe))m.push(g),u+=`
${g.slice(c+2)}`,f+=1;else break}t.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:m.join(`
`)}),r=f,n=f}return[t,r]}function fte(e,t,n){var r;const s=[];let o=0;for(;o<e.length;){const i=e[o];if(i.indent===t){const a=i.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const g=n.blockTokens(u);c.push(...g)}let f=o+1;const m=[];for(;f<e.length&&e[f].indent>t;)m.push(e[f]),f+=1;if(m.length>0){const g=Math.min(...m.map(v=>v.indent)),y=fte(m,g,n);c.push({type:"list",ordered:!0,start:m[0].number,items:y,raw:m.map(v=>v.raw).join(`
`)})}s.push({type:"list_item",raw:i.raw,tokens:c}),o=f}else o+=1}return s}function DPe(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...t.parseChildren([s]));else if(s.type==="text"&&s.tokens){const o=t.parseChildren([s]);r.push({type:"paragraph",content:o})}else{const o=t.parseChildren([s]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var PPe="listItem",Cz="textStyle",kz=/^(\d+)\.\s$/,hte=yl.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Vo(this.options.HTMLAttributes,n),0]:["ol",Vo(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,r=e.items?DPe(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t==null?void 0:t.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var r;const s=e.split(`
`),[o,i]=OPe(s);if(o.length===0)return;const a=fte(o,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:a,raw:s.slice(0,i).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(PPe,this.editor.getAttributes(Cz)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=ob({find:kz,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ob({find:kz,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(Cz)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),LPe=/^\s*(\[([( |x])?\])\s$/,$Pe=yl.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Vo(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const r=t.parseChildren(e.nestedTokens);n.push(...r)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const s=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return L7(e,t,s)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const s=document.createElement("li"),o=document.createElement("label"),i=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=u=>{var f,m;a.ariaLabel=((m=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:m.call(f,u,a.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return c(e),o.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:m})=>{const g=n();if(typeof g!="number")return!1;const y=m.doc.nodeAt(g);return m.setNodeMarkup(g,void 0,{...y==null?void 0:y.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,f])=>{s.setAttribute(u,f)}),s.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,o.append(a,i),s.append(o,l),Object.entries(t).forEach(([u,f])=>{s.setAttribute(u,f)}),{dom:s,contentDOM:l,update:u=>u.type!==this.type?!1:(s.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,c(u),!0)}}},addInputRules(){return[ob({find:LPe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),FPe=yl.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Vo(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const r=o=>{const i=L6(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return i?[{type:"taskList",raw:i.raw,items:i.items}]:n.blockTokens(o)},s=L6(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,i)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:i}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ys.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(ste.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(ote.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(dte.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(hte.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push($Pe.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(FPe.configure(this.options.taskList)),e}});var BPe=yl.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Vo(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];return n.length===1&&n[0].type==="image"?t.parseChildren([n[0]]):t.createNode("paragraph",void 0,t.parseInline(n))},renderMarkdown:(e,t)=>!e||!Array.isArray(e.content)?"":t.renderChildren(e.content),addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),zPe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,jPe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,UPe=V0.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Vo(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[sb({find:zPe,type:this.type})]},addPasteRules(){return[xm({find:jPe,type:this.type})]}}),HPe=yl.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),pte=V0.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Vo(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!s)return;const o=s[2].trim();return{type:"underline",raw:s[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function VPe(e={}){return new Ir({view(t){return new qPe(t,e)}})}class qPe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=i=>{this[s](i)};return t.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),i=o.width/s.offsetWidth,a=o.height/s.offsetHeight;if(n){let f=t.nodeBefore,m=t.nodeAfter;if(f||m){let g=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(g){let y=g.getBoundingClientRect(),v=f?y.bottom:y.top;f&&m&&(v=(v+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let x=this.width/2*a;r={left:y.left,right:y.right,top:v-x,bottom:v+x}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*i;r={left:f.left-m,right:f.left+m,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let f=l.getBoundingClientRect(),m=f.width/l.offsetWidth,g=f.height/l.offsetHeight;c=f.left-l.scrollLeft*m,u=f.top-l.scrollTop*g}this.element.style.left=(r.left-c)/i+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,n,t):s;if(n&&!o){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=RX(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Ho extends Dn{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Ho.valid(r)?new Ho(r):Dn.near(r)}content(){return Yt.empty}eq(t){return t instanceof Ho&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ho(t.resolve(n.pos))}getBookmark(){return new K7(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!GPe(t)||!WPe(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Ho.valid(t))return t;let s=t.pos,o=null;for(let i=t.depth;;i--){let a=t.node(i);if(n>0?t.indexAfter(i)<a.childCount:t.index(i)>0){o=a.child(n>0?t.indexAfter(i):t.index(i)-1);break}else if(i==0)return null;s+=n;let l=t.doc.resolve(s);if(Ho.valid(l))return l}for(;;){let i=n>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!kn.isSelectable(o)){t=t.doc.resolve(s+o.nodeSize*n),r=!1;continue e}break}o=i,s+=n;let a=t.doc.resolve(s);if(Ho.valid(a))return a}return null}}}Ho.prototype.visible=!1;Ho.findFrom=Ho.findGapCursorFrom;Dn.jsonID("gapcursor",Ho);class K7{constructor(t){this.pos=t}map(t){return new K7(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Ho.valid(n)?new Ho(n):Dn.near(n)}}function mte(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function GPe(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||mte(s.type))return!0;if(s.inlineContent)return!1}}return!0}function WPe(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||mte(s.type))return!0;if(s.inlineContent)return!1}}return!0}function YPe(){return new Ir({props:{decorations:XPe,createSelectionBetween(e,t,n){return t.pos==n.pos&&Ho.valid(n)?new Ho(n):null},handleClick:ZPe,handleKeyDown:KPe,handleDOMEvents:{beforeinput:JPe}}})}const KPe=_7({ArrowLeft:F2("horiz",-1),ArrowRight:F2("horiz",1),ArrowUp:F2("vert",-1),ArrowDown:F2("vert",1)});function F2(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,s,o){let i=r.selection,a=t>0?i.$to:i.$from,l=i.empty;if(i instanceof Cn){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let c=Ho.findGapCursorFrom(a,t,l);return c?(s&&s(r.tr.setSelection(new Ho(c))),!0):!1}}function ZPe(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Ho.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&kn.isSelectable(e.state.doc.nodeAt(s.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Ho(r))),!0)}function JPe(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Ho))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=pt.empty;for(let i=r.length-1;i>=0;i--)s=pt.from(r[i].createAndFill(null,s));let o=e.state.tr.replace(n.pos,n.pos,new Yt(s,0,0));return o.setSelection(Cn.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function XPe(e){if(!(e.selection instanceof Ho))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",io.create(e.doc,[sa.widget(e.selection.head,t,{key:"gapcursor"})])}var IT=200,Ui=function(){};Ui.prototype.append=function(t){return t.length?(t=Ui.from(t),!this.length&&t||t.length<IT&&this.leafAppend(t)||this.length<IT&&t.leafPrepend(this)||this.appendInner(t)):this};Ui.prototype.prepend=function(t){return t.length?Ui.from(t).append(this):this};Ui.prototype.appendInner=function(t){return new QPe(this,t)};Ui.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Ui.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Ui.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ui.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Ui.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,i){return s.push(t(o,i))},n,r),s};Ui.from=function(t){return t instanceof Ui?t:t&&t.length?new gte(t):Ui.empty};var gte=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new t(this.values.slice(s,o))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,o,i,a){for(var l=o;l<i;l++)if(s(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(s,o,i,a){for(var l=o-1;l>=i;l--)if(s(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=IT)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=IT)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(Ui);Ui.empty=new gte([]);var QPe=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,o,i){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(o,a),i)===!1||o>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,o)-a,i+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,o,i){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(o,a)-a,i+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(s,a),o,i)===!1)return!1},t.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(Ui);const eLe=500;class du{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;n&&(s=this.remapping(r,this.items.length),o=s.maps.length);let i=t.tr,a,l,c=[],u=[];return this.items.forEach((f,m)=>{if(!f.step){s||(s=this.remapping(r,m+1),o=s.maps.length),o--,u.push(f);return}if(s){u.push(new nd(f.map));let g=f.step.map(s.slice(o)),y;g&&i.maybeStep(g).doc&&(y=i.mapping.maps[i.mapping.maps.length-1],c.push(new nd(y,void 0,void 0,c.length+u.length))),o--,y&&s.appendMap(y,o)}else i.maybeStep(f.step);if(f.selection)return a=s?f.selection.map(s.slice(o)):f.selection,l=new du(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(t,n,r,s){let o=[],i=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let f=t.steps[u].invert(t.docs[u]),m=new nd(t.mapping.maps[u],f,n),g;(g=l&&l.merge(m))&&(m=g,u?o.pop():a=a.slice(0,a.length-1)),o.push(m),n&&(i++,n=void 0),s||(l=m)}let c=i-r.depth;return c>nLe&&(a=tLe(a,c),i-=c),new du(a.append(o),i)}remapping(t,n){let r=new Rx;return this.items.forEach((s,o)=>{let i=s.mirrorOffset!=null&&o-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,i)},t,n),r}addMaps(t){return this.eventCount==0?this:new du(this.items.append(t.map(n=>new nd(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),o=t.mapping,i=t.steps.length,a=this.eventCount;this.items.forEach(m=>{m.selection&&a--},s);let l=n;this.items.forEach(m=>{let g=o.getMirror(--l);if(g==null)return;i=Math.min(i,g);let y=o.maps[g];if(m.step){let v=t.steps[g].invert(t.docs[g]),x=m.selection&&m.selection.map(o.slice(l+1,g));x&&a++,r.push(new nd(y,v,x))}else r.push(new nd(y))},s);let c=[];for(let m=n;m<i;m++)c.push(new nd(o.maps[m]));let u=this.items.slice(0,s).append(c).append(r),f=new du(u,a);return f.emptyItemCount()>eLe&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,s=[],o=0;return this.items.forEach((i,a)=>{if(a>=t)s.push(i),i.selection&&o++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=i.selection&&i.selection.map(n.slice(r));u&&o++;let f=new nd(c.invert(),l,u),m,g=s.length-1;(m=s.length&&s[g].merge(f))?s[g]=m:s.push(f)}}else i.map&&r--},this.items.length,0),new du(Ui.from(s.reverse()),o)}}du.empty=new du(Ui.empty,0);function tLe(e,t){let n;return e.forEach((r,s)=>{if(r.selection&&t--==0)return n=s,!1}),e.slice(n)}class nd{constructor(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new nd(n.getMap().invert(),n,this.selection)}}}class r0{constructor(t,n,r,s,o){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const nLe=20;function rLe(e,t,n,r){let s=n.getMeta(rm),o;if(s)return s.historyState;n.getMeta(iLe)&&(e=new r0(e.done,e.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(i&&i.getMeta(rm))return i.getMeta(rm).redo?new r0(e.done.addTransform(n,void 0,r,L_(t)),e.undone,Az(n.mapping.maps),e.prevTime,e.prevComposition):new r0(e.done,e.undone.addTransform(n,void 0,r,L_(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!i&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!sLe(n,e.prevRanges)),c=i?P5(e.prevRanges,n.mapping):Az(n.mapping.maps);return new r0(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,L_(t)),du.empty,c,n.time,a??e.prevComposition)}else return(o=n.getMeta("rebased"))?new r0(e.done.rebased(n,o),e.undone.rebased(n,o),P5(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new r0(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),P5(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function sLe(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<t.length;o+=2)r<=t[o+1]&&s>=t[o]&&(n=!0)}),n}function Az(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,s,o,i)=>t.push(o,i));return t}function P5(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),o=t.map(e[r+1],-1);s<=o&&n.push(s,o)}return n}function oLe(e,t,n){let r=L_(t),s=rm.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(!o)return null;let i=o.selection.resolve(o.transform.doc),a=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),s,r),l=new r0(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(i).setMeta(rm,{redo:n,historyState:l})}let L5=!1,Nz=null;function L_(e){let t=e.plugins;if(Nz!=t){L5=!1,Nz=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){L5=!0;break}}return L5}const rm=new Br("history"),iLe=new Br("closeHistory");function aLe(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Ir({key:rm,state:{init(){return new r0(du.empty,du.empty,null,0,-1)},apply(t,n,r){return rLe(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,s=r=="historyUndo"?yte:r=="historyRedo"?vte:null;return!s||!t.editable?!1:(n.preventDefault(),s(t.state,t.dispatch))}}}})}function bte(e,t){return(n,r)=>{let s=rm.getState(n);if(!s||(e?s.undone:s.done).eventCount==0)return!1;if(r){let o=oLe(s,n,e);o&&r(t?o.scrollIntoView():o)}return!0}}const yte=bte(!1,!0),vte=bte(!0,!0);ys.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new Ir({key:new Br("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const s=this.options.limit;if(s==null||s===0){e=!0;return}const o=this.storage.characters({node:r.doc});if(o>s){const i=o-s,a=0,l=i;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return e=!0,c}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),o=this.storage.characters({node:t.doc});if(o<=r||s>r&&o>r&&o<=s)return!0;if(s>r&&o>r&&o>s||!t.getMeta("paste"))return!1;const a=t.selection.$head.pos,l=o-r,c=a-l,u=a;return t.deleteRange(c,u),!(this.storage.characters({node:t.doc})>r)}})]}});var lLe=ys.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[VPe(this.options)]}});ys.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ir({key:new Br("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=t,o=[];if(!n||!r)return io.create(e,[]);let i=0;this.options.mode==="deepest"&&e.descendants((l,c)=>{if(l.isText)return;if(!(s>=c&&s<=c+l.nodeSize-1))return!1;i+=1});let a=0;return e.descendants((l,c)=>{if(l.isText||!(s>=c&&s<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&i-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";o.push(sa.node(c,c+l.nodeSize,{class:this.options.className}))}),io.create(e,o)}}})]}});var cLe=ys.create({name:"gapCursor",addProseMirrorPlugins(){return[YPe()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=_s(On(e,"allowGapCursor",n)))!=null?t:null}}}),uLe=ys.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ir({key:new Br("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,s=[];if(!n)return null;const o=this.editor.isEmpty;return e.descendants((i,a)=>{const l=r>=a&&r<=a+i.nodeSize,c=!i.isLeaf&&RC(i);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];o&&u.push(this.options.emptyEditorClass);const f=sa.node(a,a+i.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:i,pos:a,hasAnchor:l}):this.options.placeholder});s.push(f)}return this.options.includeChildren}),io.create(e,s)}}})]}});ys.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Ir({key:new Br("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||QQ(n.selection)||e.view.dragging?null:io.create(n.doc,[sa.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function Iz({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var dLe=ys.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new Br(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new Ir({key:t,appendTransaction:(s,o,i)=>{const{doc:a,tr:l,schema:c}=i,u=t.getState(i),f=a.content.size,m=c.nodes[n];if(u)return l.insert(f,m.create())},state:{init:(s,o)=>{const i=o.tr.doc.lastChild;return!Iz({node:i,types:r})},apply:(s,o)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return o;const i=s.doc.lastChild;return!Iz({node:i,types:r})}}})]}}),fLe=ys.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>yte(e,t),redo:()=>({state:e,dispatch:t})=>vte(e,t)}},addProseMirrorPlugins(){return[aLe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),hLe=ys.create({name:"starterKit",addExtensions(){var e,t,n,r;const s=[];return this.options.bold!==!1&&s.push(jDe.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(LDe.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(ste.configure(this.options.bulletList)),this.options.code!==!1&&s.push(VDe.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(Gee.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(YDe.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(lLe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(cLe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(KDe.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(ZDe.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(fLe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(Wee.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(tPe.configure(this.options.italic)),this.options.listItem!==!1&&s.push(ote.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(dte.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&s.push(rte.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&s.push(hte.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(BPe.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(UPe.configure(this.options.strike)),this.options.text!==!1&&s.push(HPe.configure(this.options.text)),this.options.underline!==!1&&s.push(pte.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(dLe.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),pLe=e=>qo({find:/--$/,replace:e??""}),mLe=e=>qo({find:/\.\.\.$/,replace:e??""}),gLe=e=>qo({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:e??""}),bLe=e=>qo({find:/"$/,replace:e??""}),yLe=e=>qo({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:e??""}),vLe=e=>qo({find:/'$/,replace:e??""}),xLe=e=>qo({find:/<-$/,replace:e??""}),wLe=e=>qo({find:/->$/,replace:e??""}),ELe=e=>qo({find:/\(c\)$/,replace:e??""}),_Le=e=>qo({find:/\(tm\)$/,replace:e??""}),SLe=e=>qo({find:/\(sm\)$/,replace:e??""}),TLe=e=>qo({find:/\(r\)$/,replace:e??""}),CLe=e=>qo({find:/(?:^|\s)(1\/2)\s$/,replace:e??""}),kLe=e=>qo({find:/\+\/-$/,replace:e??""}),ALe=e=>qo({find:/!=$/,replace:e??""}),NLe=e=>qo({find:/<<$/,replace:e??""}),ILe=e=>qo({find:/>>$/,replace:e??""}),RLe=e=>qo({find:/\d+\s?([*x])\s?\d+$/,replace:e??""}),MLe=e=>qo({find:/\^2$/,replace:e??""}),OLe=e=>qo({find:/\^3$/,replace:e??""}),DLe=e=>qo({find:/(?:^|\s)(1\/4)\s$/,replace:e??""}),PLe=e=>qo({find:/(?:^|\s)(3\/4)\s$/,replace:e??""}),LLe=ys.create({name:"typography",addOptions(){return{closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}},addInputRules(){const e=[];return this.options.emDash!==!1&&e.push(pLe(this.options.emDash)),this.options.ellipsis!==!1&&e.push(mLe(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&e.push(gLe(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&e.push(bLe(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&e.push(yLe(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&e.push(vLe(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&e.push(xLe(this.options.leftArrow)),this.options.rightArrow!==!1&&e.push(wLe(this.options.rightArrow)),this.options.copyright!==!1&&e.push(ELe(this.options.copyright)),this.options.trademark!==!1&&e.push(_Le(this.options.trademark)),this.options.servicemark!==!1&&e.push(SLe(this.options.servicemark)),this.options.registeredTrademark!==!1&&e.push(TLe(this.options.registeredTrademark)),this.options.oneHalf!==!1&&e.push(CLe(this.options.oneHalf)),this.options.plusMinus!==!1&&e.push(kLe(this.options.plusMinus)),this.options.notEqual!==!1&&e.push(ALe(this.options.notEqual)),this.options.laquo!==!1&&e.push(NLe(this.options.laquo)),this.options.raquo!==!1&&e.push(ILe(this.options.raquo)),this.options.multiplication!==!1&&e.push(RLe(this.options.multiplication)),this.options.superscriptTwo!==!1&&e.push(MLe(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&e.push(OLe(this.options.superscriptThree)),this.options.oneQuarter!==!1&&e.push(DLe(this.options.oneQuarter)),this.options.threeQuarters!==!1&&e.push(PLe(this.options.threeQuarters)),e}}),$Le=20,xte=(e,t=0)=>{const n=[];return!e.children.length||t>$Le||Array.from(e.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...xte(r,t+1))}),n},FLe=e=>{if(!e.children.length)return;const t=xte(e);t&&t.forEach(n=>{var r,s;const o=n.getAttribute("style"),i=(s=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:s.getAttribute("style");n.setAttribute("style",`${i};${o}`)})},wte=V0.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:e=>e.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&FLe(e),{}):!1}]},renderHTML({HTMLAttributes:e}){return["span",Vo(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleTextStyle:e=>({commands:t})=>t.toggleMark(this.name,e),removeEmptyTextStyle:()=>({tr:e})=>{const{selection:t}=e;return e.doc.nodesBetween(t.from,t.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(o=>!!o))||e.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),BLe=ys.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const o=r[s].split(":");if(o.length>=2){const i=o[0].trim().toLowerCase(),a=o.slice(1).join(":").trim();if(i==="background-color")return a.replace(/['"]+/g,"")}}}return(t=e.style.backgroundColor)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.backgroundColor?{style:`background-color: ${e.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:e=>({chain:t})=>t().setMark("textStyle",{backgroundColor:e}).run(),unsetBackgroundColor:()=>({chain:e})=>e().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Ete=ys.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const o=r[s].split(":");if(o.length>=2){const i=o[0].trim().toLowerCase(),a=o.slice(1).join(":").trim();if(i==="color")return a.replace(/['"]+/g,"")}}}return(t=e.style.color)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.color?{style:`color: ${e.color}`}:{}}}}]},addCommands(){return{setColor:e=>({chain:t})=>t().setMark("textStyle",{color:e}).run(),unsetColor:()=>({chain:e})=>e().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),zLe=ys.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:e=>e.style.fontFamily,renderHTML:e=>e.fontFamily?{style:`font-family: ${e.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:e=>({chain:t})=>t().setMark("textStyle",{fontFamily:e}).run(),unsetFontFamily:()=>({chain:e})=>e().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),jLe=ys.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:e=>e.style.fontSize,renderHTML:e=>e.fontSize?{style:`font-size: ${e.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:e=>({chain:t})=>t().setMark("textStyle",{fontSize:e}).run(),unsetFontSize:()=>({chain:e})=>e().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),ULe=ys.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:e=>e.style.lineHeight,renderHTML:e=>e.lineHeight?{style:`line-height: ${e.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:e=>({chain:t})=>t().setMark("textStyle",{lineHeight:e}).run(),unsetLineHeight:()=>({chain:e})=>e().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});ys.create({name:"textStyleKit",addExtensions(){const e=[];return this.options.backgroundColor!==!1&&e.push(BLe.configure(this.options.backgroundColor)),this.options.color!==!1&&e.push(Ete.configure(this.options.color)),this.options.fontFamily!==!1&&e.push(zLe.configure(this.options.fontFamily)),this.options.fontSize!==!1&&e.push(jLe.configure(this.options.fontSize)),this.options.lineHeight!==!1&&e.push(ULe.configure(this.options.lineHeight)),this.options.textStyle!==!1&&e.push(wte.configure(this.options.textStyle)),e}});var $5,Rz;function HLe(){if(Rz)return $5;Rz=1;function e(ye){return ye instanceof Map?ye.clear=ye.delete=ye.set=function(){throw new Error("map is read-only")}:ye instanceof Set&&(ye.add=ye.clear=ye.delete=function(){throw new Error("set is read-only")}),Object.freeze(ye),Object.getOwnPropertyNames(ye).forEach(Ue=>{const ht=ye[Ue],Zt=typeof ht;(Zt==="object"||Zt==="function")&&!Object.isFrozen(ht)&&e(ht)}),ye}class t{constructor(Ue){Ue.data===void 0&&(Ue.data={}),this.data=Ue.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(ye){return ye.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(ye,...Ue){const ht=Object.create(null);for(const Zt in ye)ht[Zt]=ye[Zt];return Ue.forEach(function(Zt){for(const hr in Zt)ht[hr]=Zt[hr]}),ht}const s="</span>",o=ye=>!!ye.scope,i=(ye,{prefix:Ue})=>{if(ye.startsWith("language:"))return ye.replace("language:","language-");if(ye.includes(".")){const ht=ye.split(".");return[`${Ue}${ht.shift()}`,...ht.map((Zt,hr)=>`${Zt}${"_".repeat(hr+1)}`)].join(" ")}return`${Ue}${ye}`};class a{constructor(Ue,ht){this.buffer="",this.classPrefix=ht.classPrefix,Ue.walk(this)}addText(Ue){this.buffer+=n(Ue)}openNode(Ue){if(!o(Ue))return;const ht=i(Ue.scope,{prefix:this.classPrefix});this.span(ht)}closeNode(Ue){o(Ue)&&(this.buffer+=s)}value(){return this.buffer}span(Ue){this.buffer+=`<span class="${Ue}">`}}const l=(ye={})=>{const Ue={children:[]};return Object.assign(Ue,ye),Ue};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Ue){this.top.children.push(Ue)}openNode(Ue){const ht=l({scope:Ue});this.add(ht),this.stack.push(ht)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Ue){return this.constructor._walk(Ue,this.rootNode)}static _walk(Ue,ht){return typeof ht=="string"?Ue.addText(ht):ht.children&&(Ue.openNode(ht),ht.children.forEach(Zt=>this._walk(Ue,Zt)),Ue.closeNode(ht)),Ue}static _collapse(Ue){typeof Ue!="string"&&Ue.children&&(Ue.children.every(ht=>typeof ht=="string")?Ue.children=[Ue.children.join("")]:Ue.children.forEach(ht=>{c._collapse(ht)}))}}class u extends c{constructor(Ue){super(),this.options=Ue}addText(Ue){Ue!==""&&this.add(Ue)}startScope(Ue){this.openNode(Ue)}endScope(){this.closeNode()}__addSublanguage(Ue,ht){const Zt=Ue.root;ht&&(Zt.scope=`language:${ht}`),this.add(Zt)}toHTML(){return new a(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function f(ye){return ye?typeof ye=="string"?ye:ye.source:null}function m(ye){return v("(?=",ye,")")}function g(ye){return v("(?:",ye,")*")}function y(ye){return v("(?:",ye,")?")}function v(...ye){return ye.map(ht=>f(ht)).join("")}function x(ye){const Ue=ye[ye.length-1];return typeof Ue=="object"&&Ue.constructor===Object?(ye.splice(ye.length-1,1),Ue):{}}function E(...ye){return"("+(x(ye).capture?"":"?:")+ye.map(Zt=>f(Zt)).join("|")+")"}function T(ye){return new RegExp(ye.toString()+"|").exec("").length-1}function k(ye,Ue){const ht=ye&&ye.exec(Ue);return ht&&ht.index===0}const I=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function O(ye,{joinWith:Ue}){let ht=0;return ye.map(Zt=>{ht+=1;const hr=ht;let Yn=f(Zt),Rt="";for(;Yn.length>0;){const Bt=I.exec(Yn);if(!Bt){Rt+=Yn;break}Rt+=Yn.substring(0,Bt.index),Yn=Yn.substring(Bt.index+Bt[0].length),Bt[0][0]==="\\"&&Bt[1]?Rt+="\\"+String(Number(Bt[1])+hr):(Rt+=Bt[0],Bt[0]==="("&&ht++)}return Rt}).map(Zt=>`(${Zt})`).join(Ue)}const M=/\b\B/,P="[a-zA-Z]\\w*",j="[a-zA-Z_]\\w*",V="\\b\\d+(\\.\\d+)?",U="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",z="\\b(0b[01]+)",H="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",F=(ye={})=>{const Ue=/^#![ ]*\//;return ye.binary&&(ye.begin=v(Ue,/.*\b/,ye.binary,/\b.*/)),r({scope:"meta",begin:Ue,end:/$/,relevance:0,"on:begin":(ht,Zt)=>{ht.index!==0&&Zt.ignoreMatch()}},ye)},G={begin:"\\\\[\\s\\S]",relevance:0},X={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[G]},J={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[G]},ee={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},re=function(ye,Ue,ht={}){const Zt=r({scope:"comment",begin:ye,end:Ue,contains:[]},ht);Zt.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const hr=E("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Zt.contains.push({begin:v(/[ ]+/,"(",hr,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Zt},ie=re("//","$"),Z=re("/\\*","\\*/"),te=re("#","$"),oe={scope:"number",begin:V,relevance:0},Q={scope:"number",begin:U,relevance:0},Te={scope:"number",begin:z,relevance:0},ge={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[G,{begin:/\[/,end:/\]/,relevance:0,contains:[G]}]},Ce={scope:"title",begin:P,relevance:0},fe={scope:"title",begin:j,relevance:0},Fe={begin:"\\.\\s*"+j,relevance:0};var Re=Object.freeze({__proto__:null,APOS_STRING_MODE:X,BACKSLASH_ESCAPE:G,BINARY_NUMBER_MODE:Te,BINARY_NUMBER_RE:z,COMMENT:re,C_BLOCK_COMMENT_MODE:Z,C_LINE_COMMENT_MODE:ie,C_NUMBER_MODE:Q,C_NUMBER_RE:U,END_SAME_AS_BEGIN:function(ye){return Object.assign(ye,{"on:begin":(Ue,ht)=>{ht.data._beginMatch=Ue[1]},"on:end":(Ue,ht)=>{ht.data._beginMatch!==Ue[1]&&ht.ignoreMatch()}})},HASH_COMMENT_MODE:te,IDENT_RE:P,MATCH_NOTHING_RE:M,METHOD_GUARD:Fe,NUMBER_MODE:oe,NUMBER_RE:V,PHRASAL_WORDS_MODE:ee,QUOTE_STRING_MODE:J,REGEXP_MODE:ge,RE_STARTERS_RE:H,SHEBANG:F,TITLE_MODE:Ce,UNDERSCORE_IDENT_RE:j,UNDERSCORE_TITLE_MODE:fe});function tt(ye,Ue){ye.input[ye.index-1]==="."&&Ue.ignoreMatch()}function de(ye,Ue){ye.className!==void 0&&(ye.scope=ye.className,delete ye.className)}function nt(ye,Ue){Ue&&ye.beginKeywords&&(ye.begin="\\b("+ye.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",ye.__beforeBegin=tt,ye.keywords=ye.keywords||ye.beginKeywords,delete ye.beginKeywords,ye.relevance===void 0&&(ye.relevance=0))}function ot(ye,Ue){Array.isArray(ye.illegal)&&(ye.illegal=E(...ye.illegal))}function Ut(ye,Ue){if(ye.match){if(ye.begin||ye.end)throw new Error("begin & end are not supported with match");ye.begin=ye.match,delete ye.match}}function Vt(ye,Ue){ye.relevance===void 0&&(ye.relevance=1)}const Dt=(ye,Ue)=>{if(!ye.beforeMatch)return;if(ye.starts)throw new Error("beforeMatch cannot be used with starts");const ht=Object.assign({},ye);Object.keys(ye).forEach(Zt=>{delete ye[Zt]}),ye.keywords=ht.keywords,ye.begin=v(ht.beforeMatch,m(ht.begin)),ye.starts={relevance:0,contains:[Object.assign(ht,{endsParent:!0})]},ye.relevance=0,delete ht.beforeMatch},en=["of","and","for","in","not","or","if","then","parent","list","value"],xt="keyword";function pe(ye,Ue,ht=xt){const Zt=Object.create(null);return typeof ye=="string"?hr(ht,ye.split(" ")):Array.isArray(ye)?hr(ht,ye):Object.keys(ye).forEach(function(Yn){Object.assign(Zt,pe(ye[Yn],Ue,Yn))}),Zt;function hr(Yn,Rt){Ue&&(Rt=Rt.map(Bt=>Bt.toLowerCase())),Rt.forEach(function(Bt){const fn=Bt.split("|");Zt[fn[0]]=[Yn,Ne(fn[0],fn[1])]})}}function Ne(ye,Ue){return Ue?Number(Ue):$e(ye)?0:1}function $e(ye){return en.includes(ye.toLowerCase())}const Je={},Le=ye=>{console.error(ye)},Ve=(ye,...Ue)=>{console.log(`WARN: ${ye}`,...Ue)},_e=(ye,Ue)=>{Je[`${ye}/${Ue}`]||(console.log(`Deprecated as of ${ye}. ${Ue}`),Je[`${ye}/${Ue}`]=!0)},Y=new Error;function L(ye,Ue,{key:ht}){let Zt=0;const hr=ye[ht],Yn={},Rt={};for(let Bt=1;Bt<=Ue.length;Bt++)Rt[Bt+Zt]=hr[Bt],Yn[Bt+Zt]=!0,Zt+=T(Ue[Bt-1]);ye[ht]=Rt,ye[ht]._emit=Yn,ye[ht]._multi=!0}function B(ye){if(Array.isArray(ye.begin)){if(ye.skip||ye.excludeBegin||ye.returnBegin)throw Le("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Y;if(typeof ye.beginScope!="object"||ye.beginScope===null)throw Le("beginScope must be object"),Y;L(ye,ye.begin,{key:"beginScope"}),ye.begin=O(ye.begin,{joinWith:""})}}function ce(ye){if(Array.isArray(ye.end)){if(ye.skip||ye.excludeEnd||ye.returnEnd)throw Le("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Y;if(typeof ye.endScope!="object"||ye.endScope===null)throw Le("endScope must be object"),Y;L(ye,ye.end,{key:"endScope"}),ye.end=O(ye.end,{joinWith:""})}}function we(ye){ye.scope&&typeof ye.scope=="object"&&ye.scope!==null&&(ye.beginScope=ye.scope,delete ye.scope)}function ze(ye){we(ye),typeof ye.beginScope=="string"&&(ye.beginScope={_wrap:ye.beginScope}),typeof ye.endScope=="string"&&(ye.endScope={_wrap:ye.endScope}),B(ye),ce(ye)}function Be(ye){function Ue(Rt,Bt){return new RegExp(f(Rt),"m"+(ye.case_insensitive?"i":"")+(ye.unicodeRegex?"u":"")+(Bt?"g":""))}class ht{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Bt,fn){fn.position=this.position++,this.matchIndexes[this.matchAt]=fn,this.regexes.push([fn,Bt]),this.matchAt+=T(Bt)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Bt=this.regexes.map(fn=>fn[1]);this.matcherRe=Ue(O(Bt,{joinWith:"|"}),!0),this.lastIndex=0}exec(Bt){this.matcherRe.lastIndex=this.lastIndex;const fn=this.matcherRe.exec(Bt);if(!fn)return null;const In=fn.findIndex((bo,Vs)=>Vs>0&&bo!==void 0),Pr=this.matchIndexes[In];return fn.splice(0,In),Object.assign(fn,Pr)}}class Zt{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Bt){if(this.multiRegexes[Bt])return this.multiRegexes[Bt];const fn=new ht;return this.rules.slice(Bt).forEach(([In,Pr])=>fn.addRule(In,Pr)),fn.compile(),this.multiRegexes[Bt]=fn,fn}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Bt,fn){this.rules.push([Bt,fn]),fn.type==="begin"&&this.count++}exec(Bt){const fn=this.getMatcher(this.regexIndex);fn.lastIndex=this.lastIndex;let In=fn.exec(Bt);if(this.resumingScanAtSamePosition()&&!(In&&In.index===this.lastIndex)){const Pr=this.getMatcher(0);Pr.lastIndex=this.lastIndex+1,In=Pr.exec(Bt)}return In&&(this.regexIndex+=In.position+1,this.regexIndex===this.count&&this.considerAll()),In}}function hr(Rt){const Bt=new Zt;return Rt.contains.forEach(fn=>Bt.addRule(fn.begin,{rule:fn,type:"begin"})),Rt.terminatorEnd&&Bt.addRule(Rt.terminatorEnd,{type:"end"}),Rt.illegal&&Bt.addRule(Rt.illegal,{type:"illegal"}),Bt}function Yn(Rt,Bt){const fn=Rt;if(Rt.isCompiled)return fn;[de,Ut,ze,Dt].forEach(Pr=>Pr(Rt,Bt)),ye.compilerExtensions.forEach(Pr=>Pr(Rt,Bt)),Rt.__beforeBegin=null,[nt,ot,Vt].forEach(Pr=>Pr(Rt,Bt)),Rt.isCompiled=!0;let In=null;return typeof Rt.keywords=="object"&&Rt.keywords.$pattern&&(Rt.keywords=Object.assign({},Rt.keywords),In=Rt.keywords.$pattern,delete Rt.keywords.$pattern),In=In||/\w+/,Rt.keywords&&(Rt.keywords=pe(Rt.keywords,ye.case_insensitive)),fn.keywordPatternRe=Ue(In,!0),Bt&&(Rt.begin||(Rt.begin=/\B|\b/),fn.beginRe=Ue(fn.begin),!Rt.end&&!Rt.endsWithParent&&(Rt.end=/\B|\b/),Rt.end&&(fn.endRe=Ue(fn.end)),fn.terminatorEnd=f(fn.end)||"",Rt.endsWithParent&&Bt.terminatorEnd&&(fn.terminatorEnd+=(Rt.end?"|":"")+Bt.terminatorEnd)),Rt.illegal&&(fn.illegalRe=Ue(Rt.illegal)),Rt.contains||(Rt.contains=[]),Rt.contains=[].concat(...Rt.contains.map(function(Pr){return an(Pr==="self"?Rt:Pr)})),Rt.contains.forEach(function(Pr){Yn(Pr,fn)}),Rt.starts&&Yn(Rt.starts,Bt),fn.matcher=hr(fn),fn}if(ye.compilerExtensions||(ye.compilerExtensions=[]),ye.contains&&ye.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return ye.classNameAliases=r(ye.classNameAliases||{}),Yn(ye)}function ut(ye){return ye?ye.endsWithParent||ut(ye.starts):!1}function an(ye){return ye.variants&&!ye.cachedVariants&&(ye.cachedVariants=ye.variants.map(function(Ue){return r(ye,{variants:null},Ue)})),ye.cachedVariants?ye.cachedVariants:ut(ye)?r(ye,{starts:ye.starts?r(ye.starts):null}):Object.isFrozen(ye)?r(ye):ye}var zt="11.11.1";class dn extends Error{constructor(Ue,ht){super(Ue),this.name="HTMLInjectionError",this.html=ht}}const on=n,Va=r,Nn=Symbol("nomatch"),Qn=7,wt=function(ye){const Ue=Object.create(null),ht=Object.create(null),Zt=[];let hr=!0;const Yn="Could not find the language '{}', did you forget to load/include a language module?",Rt={disableAutodetect:!0,name:"Plain text",contains:[]};let Bt={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:u};function fn(ft){return Bt.noHighlightRe.test(ft)}function In(ft){let Nt=ft.className+" ";Nt+=ft.parentNode?ft.parentNode.className:"";const hn=Bt.languageDetectRe.exec(Nt);if(hn){const xn=Hr(hn[1]);return xn||(Ve(Yn.replace("{}",hn[1])),Ve("Falling back to no-highlight mode for this block.",ft)),xn?hn[1]:"no-highlight"}return Nt.split(/\s+/).find(xn=>fn(xn)||Hr(xn))}function Pr(ft,Nt,hn){let xn="",Tr="";typeof Nt=="object"?(xn=ft,hn=Nt.ignoreIllegals,Tr=Nt.language):(_e("10.7.0","highlight(lang, code, ...args) has been deprecated."),_e("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Tr=ft,xn=Nt),hn===void 0&&(hn=!0);const qs={code:xn,language:Tr};Ro("before:highlight",qs);const co=qs.result?qs.result:bo(qs.language,qs.code,hn);return co.code=qs.code,Ro("after:highlight",co),co}function bo(ft,Nt,hn,xn){const Tr=Object.create(null);function qs(Lt,Kt){return Lt.keywords[Kt]}function co(){if(!Pn.keywords){uo.addText(Gr);return}let Lt=0;Pn.keywordPatternRe.lastIndex=0;let Kt=Pn.keywordPatternRe.exec(Gr),Zn="";for(;Kt;){Zn+=Gr.substring(Lt,Kt.index);const cr=Yo.case_insensitive?Kt[0].toLowerCase():Kt[0],Fs=qs(Pn,cr);if(Fs){const[aa,lh]=Fs;if(uo.addText(Zn),Zn="",Tr[cr]=(Tr[cr]||0)+1,Tr[cr]<=Qn&&(Iu+=lh),aa.startsWith("_"))Zn+=Kt[0];else{const ch=Yo.classNameAliases[aa]||aa;vo(Kt[0],ch)}}else Zn+=Kt[0];Lt=Pn.keywordPatternRe.lastIndex,Kt=Pn.keywordPatternRe.exec(Gr)}Zn+=Gr.substring(Lt),uo.addText(Zn)}function Wo(){if(Gr==="")return;let Lt=null;if(typeof Pn.subLanguage=="string"){if(!Ue[Pn.subLanguage]){uo.addText(Gr);return}Lt=bo(Pn.subLanguage,Gr,!0,Z0[Pn.subLanguage]),Z0[Pn.subLanguage]=Lt._top}else Lt=yo(Gr,Pn.subLanguage.length?Pn.subLanguage:null);Pn.relevance>0&&(Iu+=Lt.relevance),uo.__addSublanguage(Lt._emitter,Lt.language)}function zr(){Pn.subLanguage!=null?Wo():co(),Gr=""}function vo(Lt,Kt){Lt!==""&&(uo.startScope(Kt),uo.addText(Lt),uo.endScope())}function Vm(Lt,Kt){let Zn=1;const cr=Kt.length-1;for(;Zn<=cr;){if(!Lt._emit[Zn]){Zn++;continue}const Fs=Yo.classNameAliases[Lt[Zn]]||Lt[Zn],aa=Kt[Zn];Fs?vo(aa,Fs):(Gr=aa,co(),Gr=""),Zn++}}function Nu(Lt,Kt){return Lt.scope&&typeof Lt.scope=="string"&&uo.openNode(Yo.classNameAliases[Lt.scope]||Lt.scope),Lt.beginScope&&(Lt.beginScope._wrap?(vo(Gr,Yo.classNameAliases[Lt.beginScope._wrap]||Lt.beginScope._wrap),Gr=""):Lt.beginScope._multi&&(Vm(Lt.beginScope,Kt),Gr="")),Pn=Object.create(Lt,{parent:{value:Pn}}),Pn}function K0(Lt,Kt,Zn){let cr=k(Lt.endRe,Zn);if(cr){if(Lt["on:end"]){const Fs=new t(Lt);Lt["on:end"](Kt,Fs),Fs.isMatchIgnored&&(cr=!1)}if(cr){for(;Lt.endsParent&&Lt.parent;)Lt=Lt.parent;return Lt}}if(Lt.endsWithParent)return K0(Lt.parent,Kt,Zn)}function Md(Lt){return Pn.matcher.regexIndex===0?(Gr+=Lt[0],1):(_l=!0,0)}function ih(Lt){const Kt=Lt[0],Zn=Lt.rule,cr=new t(Zn),Fs=[Zn.__beforeBegin,Zn["on:begin"]];for(const aa of Fs)if(aa&&(aa(Lt,cr),cr.isMatchIgnored))return Md(Kt);return Zn.skip?Gr+=Kt:(Zn.excludeBegin&&(Gr+=Kt),zr(),!Zn.returnBegin&&!Zn.excludeBegin&&(Gr=Kt)),Nu(Zn,Lt),Zn.returnBegin?0:Kt.length}function Vi(Lt){const Kt=Lt[0],Zn=Nt.substring(Lt.index),cr=K0(Pn,Lt,Zn);if(!cr)return Nn;const Fs=Pn;Pn.endScope&&Pn.endScope._wrap?(zr(),vo(Kt,Pn.endScope._wrap)):Pn.endScope&&Pn.endScope._multi?(zr(),Vm(Pn.endScope,Lt)):Fs.skip?Gr+=Kt:(Fs.returnEnd||Fs.excludeEnd||(Gr+=Kt),zr(),Fs.excludeEnd&&(Gr=Kt));do Pn.scope&&uo.closeNode(),!Pn.skip&&!Pn.subLanguage&&(Iu+=Pn.relevance),Pn=Pn.parent;while(Pn!==cr.parent);return cr.starts&&Nu(cr.starts,Lt),Fs.returnEnd?0:Kt.length}function El(){const Lt=[];for(let Kt=Pn;Kt!==Yo;Kt=Kt.parent)Kt.scope&&Lt.unshift(Kt.scope);Lt.forEach(Kt=>uo.openNode(Kt))}let rc={};function Bc(Lt,Kt){const Zn=Kt&&Kt[0];if(Gr+=Lt,Zn==null)return zr(),0;if(rc.type==="begin"&&Kt.type==="end"&&rc.index===Kt.index&&Zn===""){if(Gr+=Nt.slice(Kt.index,Kt.index+1),!hr){const cr=new Error(`0 width match regex (${ft})`);throw cr.languageName=ft,cr.badRule=rc.rule,cr}return 1}if(rc=Kt,Kt.type==="begin")return ih(Kt);if(Kt.type==="illegal"&&!hn){const cr=new Error('Illegal lexeme "'+Zn+'" for mode "'+(Pn.scope||"<unnamed>")+'"');throw cr.mode=Pn,cr}else if(Kt.type==="end"){const cr=Vi(Kt);if(cr!==Nn)return cr}if(Kt.type==="illegal"&&Zn==="")return Gr+=`
`,1;if(Ru>1e5&&Ru>Kt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Gr+=Zn,Zn.length}const Yo=Hr(ft);if(!Yo)throw Le(Yn.replace("{}",ft)),new Error('Unknown language: "'+ft+'"');const Od=Be(Yo);let ah="",Pn=xn||Od;const Z0={},uo=new Bt.__emitter(Bt);El();let Gr="",Iu=0,mi=0,Ru=0,_l=!1;try{if(Yo.__emitTokens)Yo.__emitTokens(Nt,uo);else{for(Pn.matcher.considerAll();;){Ru++,_l?_l=!1:Pn.matcher.considerAll(),Pn.matcher.lastIndex=mi;const Lt=Pn.matcher.exec(Nt);if(!Lt)break;const Kt=Nt.substring(mi,Lt.index),Zn=Bc(Kt,Lt);mi=Lt.index+Zn}Bc(Nt.substring(mi))}return uo.finalize(),ah=uo.toHTML(),{language:ft,value:ah,relevance:Iu,illegal:!1,_emitter:uo,_top:Pn}}catch(Lt){if(Lt.message&&Lt.message.includes("Illegal"))return{language:ft,value:on(Nt),illegal:!0,relevance:0,_illegalBy:{message:Lt.message,index:mi,context:Nt.slice(mi-100,mi+100),mode:Lt.mode,resultSoFar:ah},_emitter:uo};if(hr)return{language:ft,value:on(Nt),illegal:!1,relevance:0,errorRaised:Lt,_emitter:uo,_top:Pn};throw Lt}}function Vs(ft){const Nt={value:on(ft),illegal:!1,relevance:0,_top:Rt,_emitter:new Bt.__emitter(Bt)};return Nt._emitter.addText(ft),Nt}function yo(ft,Nt){Nt=Nt||Bt.languages||Object.keys(Ue);const hn=Vs(ft),xn=Nt.filter(Hr).filter(kt).map(zr=>bo(zr,ft,!1));xn.unshift(hn);const Tr=xn.sort((zr,vo)=>{if(zr.relevance!==vo.relevance)return vo.relevance-zr.relevance;if(zr.language&&vo.language){if(Hr(zr.language).supersetOf===vo.language)return 1;if(Hr(vo.language).supersetOf===zr.language)return-1}return 0}),[qs,co]=Tr,Wo=qs;return Wo.secondBest=co,Wo}function Jr(ft,Nt,hn){const xn=Nt&&ht[Nt]||hn;ft.classList.add("hljs"),ft.classList.add(`language-${xn}`)}function pr(ft){let Nt=null;const hn=In(ft);if(fn(hn))return;if(Ro("before:highlightElement",{el:ft,language:hn}),ft.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",ft);return}if(ft.children.length>0&&(Bt.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(ft)),Bt.throwUnescapedHTML))throw new dn("One of your code blocks includes unescaped HTML.",ft.innerHTML);Nt=ft;const xn=Nt.textContent,Tr=hn?Pr(xn,{language:hn,ignoreIllegals:!0}):yo(xn);ft.innerHTML=Tr.value,ft.dataset.highlighted="yes",Jr(ft,hn,Tr.language),ft.result={language:Tr.language,re:Tr.relevance,relevance:Tr.relevance},Tr.secondBest&&(ft.secondBest={language:Tr.secondBest.language,relevance:Tr.secondBest.relevance}),Ro("after:highlightElement",{el:ft,result:Tr,text:xn})}function Io(ft){Bt=Va(Bt,ft)}const at=()=>{Ht(),_e("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function rt(){Ht(),_e("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let mt=!1;function Ht(){function ft(){Ht()}if(document.readyState==="loading"){mt||window.addEventListener("DOMContentLoaded",ft,!1),mt=!0;return}document.querySelectorAll(Bt.cssSelector).forEach(pr)}function Ur(ft,Nt){let hn=null;try{hn=Nt(ye)}catch(xn){if(Le("Language definition for '{}' could not be registered.".replace("{}",ft)),hr)Le(xn);else throw xn;hn=Rt}hn.name||(hn.name=ft),Ue[ft]=hn,hn.rawDefinition=Nt.bind(null,ye),hn.aliases&&ia(hn.aliases,{languageName:ft})}function ks(ft){delete Ue[ft];for(const Nt of Object.keys(ht))ht[Nt]===ft&&delete ht[Nt]}function Kn(){return Object.keys(Ue)}function Hr(ft){return ft=(ft||"").toLowerCase(),Ue[ft]||Ue[ht[ft]]}function ia(ft,{languageName:Nt}){typeof ft=="string"&&(ft=[ft]),ft.forEach(hn=>{ht[hn.toLowerCase()]=Nt})}function kt(ft){const Nt=Hr(ft);return Nt&&!Nt.disableAutodetect}function Bn(ft){ft["before:highlightBlock"]&&!ft["before:highlightElement"]&&(ft["before:highlightElement"]=Nt=>{ft["before:highlightBlock"](Object.assign({block:Nt.el},Nt))}),ft["after:highlightBlock"]&&!ft["after:highlightElement"]&&(ft["after:highlightElement"]=Nt=>{ft["after:highlightBlock"](Object.assign({block:Nt.el},Nt))})}function gt(ft){Bn(ft),Zt.push(ft)}function Xr(ft){const Nt=Zt.indexOf(ft);Nt!==-1&&Zt.splice(Nt,1)}function Ro(ft,Nt){const hn=ft;Zt.forEach(function(xn){xn[hn]&&xn[hn](Nt)})}function nr(ft){return _e("10.7.0","highlightBlock will be removed entirely in v12.0"),_e("10.7.0","Please use highlightElement now."),pr(ft)}Object.assign(ye,{highlight:Pr,highlightAuto:yo,highlightAll:Ht,highlightElement:pr,highlightBlock:nr,configure:Io,initHighlighting:at,initHighlightingOnLoad:rt,registerLanguage:Ur,unregisterLanguage:ks,listLanguages:Kn,getLanguage:Hr,registerAliases:ia,autoDetection:kt,inherit:Va,addPlugin:gt,removePlugin:Xr}),ye.debugMode=function(){hr=!1},ye.safeMode=function(){hr=!0},ye.versionString=zt,ye.regex={concat:v,lookahead:m,either:E,optional:y,anyNumberOfTimes:g};for(const ft in Re)typeof Re[ft]=="object"&&e(Re[ft]);return Object.assign(ye,Re),ye},sn=wt({});return sn.newInstance=()=>wt({}),$5=sn,sn.HighlightJS=sn,sn.default=sn,$5}var VLe=HLe();const _te=Cm(VLe);function Ste(e,t=[]){return e.flatMap(n=>{const r=[...t,...n.properties?n.properties.className:[]];return n.children?Ste(n.children,r):{text:n.value,classes:r}})}function Mz(e){return e.value||e.children||[]}function qLe(e){return!!_te.getLanguage(e)}function Oz({doc:e,name:t,lowlight:n,defaultLanguage:r}){const s=[];return O6(e,o=>o.type.name===t).forEach(o=>{var i;let a=o.pos+1;const l=o.node.attrs.language||r,c=n.listLanguages(),u=l&&(c.includes(l)||qLe(l)||(i=n.registered)!=null&&i.call(n,l))?Mz(n.highlight(l,o.node.textContent)):Mz(n.highlightAuto(o.node.textContent));Ste(u).forEach(f=>{const m=a+f.text.length;if(f.classes.length){const g=sa.inline(a,m,{class:f.classes.join(" ")});s.push(g)}a=m})}),io.create(e,s)}function GLe(e){return typeof e=="function"}function WLe({name:e,lowlight:t,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(s=>GLe(t[s])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Ir({key:new Br("lowlight"),state:{init:(s,{doc:o})=>Oz({doc:o,name:e,lowlight:t,defaultLanguage:n}),apply:(s,o,i,a)=>{const l=i.selection.$head.parent.type.name,c=a.selection.$head.parent.type.name,u=O6(i.doc,m=>m.type.name===e),f=O6(a.doc,m=>m.type.name===e);return s.docChanged&&([l,c].includes(e)||f.length!==u.length||s.steps.some(m=>m.from!==void 0&&m.to!==void 0&&u.some(g=>g.pos>=m.from&&g.pos+g.node.nodeSize<=m.to)))?Oz({doc:s.doc,name:e,lowlight:t,defaultLanguage:n}):o.map(s.mapping,s.doc)}},props:{decorations(s){return r.getState(s)}}});return r}var YLe=WDe.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},addProseMirrorPlugins(){var e;return[...((e=this.parent)==null?void 0:e.call(this))||[],WLe({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}});function KLe(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",i="(?!struct)("+r+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},g=t.optional(s)+e.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],x=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],E=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],I={type:v,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:x},O={className:"function.dispatch",relevance:0,keywords:{_hint:E},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},M=[O,f,a,n,e.C_BLOCK_COMMENT_MODE,u,c],P={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:I,contains:M.concat([{begin:/\(/,end:/\)/,keywords:I,contains:M.concat(["self"]),relevance:0}]),relevance:0},j={className:"function",begin:"("+i+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:I,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:I,relevance:0},{begin:g,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:I,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(P,j,O,M,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:I,contains:["self",a]},{begin:e.IDENT_RE+"::",keywords:I},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function ZLe(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=KLe(e),r=n.keywords;return r.type=[...r.type,...t.type],r.literal=[...r.literal,...t.literal],r.built_in=[...r.built_in,...t.built_in],r._hints=t._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function JLe(e){const t=e.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const s={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},o=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),i={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,s]};s.contains.push(a);const l={match:/\\"/},c={className:"string",begin:/'/,end:/'/},u={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},m=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],g=e.SHEBANG({binary:`(${m.join("|")})`,relevance:10}),y={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},v=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],x=["true","false"],E={match:/(\/[a-z._-]+)+/},T=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],k=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],I=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],O=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:v,literal:x,built_in:[...T,...k,"set","shopt",...I,...O]},contains:[g,e.SHEBANG(),y,f,o,i,E,a,l,c,u,n]}}function XLe(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",i="("+r+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},g=t.optional(s)+e.IDENT_RE+"\\s*\\(",x={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},E=[f,a,n,e.C_BLOCK_COMMENT_MODE,u,c],T={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:x,contains:E.concat([{begin:/\(/,end:/\)/,keywords:x,contains:E.concat(["self"]),relevance:0}]),relevance:0},k={begin:"("+i+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:x,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:x,relevance:0},{begin:g,returnBegin:!0,contains:[e.inherit(m,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:x,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:x,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:x,disableAutodetect:!0,illegal:"</",contains:[].concat(T,k,E,[f,{begin:e.IDENT_RE+"::",keywords:x},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:f,strings:c,keywords:x}}}function QLe(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",i="(?!struct)("+r+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},g=t.optional(s)+e.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],x=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],E=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],I={type:v,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:x},O={className:"function.dispatch",relevance:0,keywords:{_hint:E},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},M=[O,f,a,n,e.C_BLOCK_COMMENT_MODE,u,c],P={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:I,contains:M.concat([{begin:/\(/,end:/\)/,keywords:I,contains:M.concat(["self"]),relevance:0}]),relevance:0},j={className:"function",begin:"("+i+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:I,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:I,relevance:0},{begin:g,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:I,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(P,j,O,M,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:I,contains:["self",a]},{begin:e.IDENT_RE+"::",keywords:I},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function e$e(e){const t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],s=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],o=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],i={keyword:s.concat(o),built_in:t,literal:r},a=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},u={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=e.inherit(u,{illegal:/\n/}),m={className:"subst",begin:/\{/,end:/\}/,keywords:i},g=e.inherit(m,{illegal:/\n/}),y={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,g]},v={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},m]},x=e.inherit(v,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},g]});m.contains=[v,y,u,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,l,e.C_BLOCK_COMMENT_MODE],g.contains=[x,y,f,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,l,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const E={variants:[c,v,y,u,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},T={begin:"<",end:">",contains:[{beginKeywords:"in out"},a]},k=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",I={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:i,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},E,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},a,T,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,T,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+k+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:i,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,T],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,relevance:0,contains:[E,l,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},I]}}const t$e=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),n$e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],r$e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s$e=[...n$e,...r$e],o$e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),i$e=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),a$e=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),l$e=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function c$e(e){const t=e.regex,n=t$e(e),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",o=/@-?\w[\w]*(-\w+)*/,i="[a-zA-Z-][a-zA-Z0-9_-]*",a=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+i,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+i$e.join("|")+")"},{begin:":(:)?("+a$e.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+l$e.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...a,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...a,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:o},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:o$e.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...a,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+s$e.join("|")+")\\b"}]}}function u$e(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function d$e(e){const o={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:o,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:o,illegal:/["']/}]}]}}function f$e(e){const t=e.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(n,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function h$e(e){const t=e.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},r=e.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const s={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},o={className:"literal",begin:/\bon|off|true|false|yes|no\b/},i={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},a={begin:/\[/,end:/\]/,contains:[r,o,s,i,n,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,c=/"(\\"|[^"])*"/,u=/'[^']*'/,f=t.either(l,c,u),m=t.concat(f,"(\\s*\\.\\s*",f,")*",t.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:m,className:"attr",starts:{end:/$/,contains:[r,a,o,s,i,n]}}]}}var l1="[0-9](_*[0-9])*",B2=`\\.(${l1})`,z2="[0-9a-fA-F](_*[0-9a-fA-F])*",Dz={className:"number",variants:[{begin:`(\\b(${l1})((${B2})|\\.)?|(${B2}))[eE][+-]?(${l1})[fFdD]?\\b`},{begin:`\\b(${l1})((${B2})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${B2})[fFdD]?\\b`},{begin:`\\b(${l1})[fFdD]\\b`},{begin:`\\b0[xX]((${z2})\\.?|(${z2})?\\.(${z2}))[pP][+-]?(${l1})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${z2})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function Tte(e,t,n){return n===-1?"":e.replace(t,r=>Tte(e,t,n-1))}function p$e(e){const t=e.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+Tte("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},c={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},u={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[u,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[c,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,Dz,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},Dz,c]}}const Pz="[A-Za-z$_][0-9A-Za-z$_]*",m$e=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],g$e=["true","false","null","undefined","NaN","Infinity"],Cte=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],kte=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Ate=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],b$e=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],y$e=[].concat(Ate,Cte,kte);function v$e(e){const t=e.regex,n=(re,{after:ie})=>{const Z="</"+re[0].slice(1);return re.input.indexOf(Z,ie)!==-1},r=Pz,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(re,ie)=>{const Z=re[0].length+re.index,te=re.input[Z];if(te==="<"||te===","){ie.ignoreMatch();return}te===">"&&(n(re,{after:Z})||ie.ignoreMatch());let oe;const Q=re.input.substring(Z);if(oe=Q.match(/^\s*=/)){ie.ignoreMatch();return}if((oe=Q.match(/^\s+extends\s+/))&&oe.index===0){ie.ignoreMatch();return}}},a={$pattern:Pz,keyword:m$e,literal:g$e,built_in:y$e,"variable.language":b$e},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},g={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},x={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,m]},T={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},k=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,x,{match:/\$\d+/},f];m.contains=k.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(k)});const I=[].concat(T,m.contains),O=I.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(I)}]),M={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O},P={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},j={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Cte,...kte]}},V={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},U={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[M],illegal:/%/},z={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function H(re){return t.concat("(?!",re.join("|"),")")}const F={match:t.concat(/\b/,H([...Ate,"super","import"].map(re=>`${re}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},G={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},X={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},M]},J="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ee={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(J)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[M]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:O,CLASS_REFERENCE:j},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),V,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,x,T,{match:/\$\d+/},f,j,{scope:"attr",match:r+t.lookahead(":"),relevance:0},ee,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[T,e.REGEXP_MODE,{className:"function",begin:J,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},U,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[M,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},G,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[M]},F,z,P,X,{match:/\$[(.]/}]}}function x$e(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],s={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[t,n,e.QUOTE_STRING_MODE,s,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var c1="[0-9](_*[0-9])*",j2=`\\.(${c1})`,U2="[0-9a-fA-F](_*[0-9a-fA-F])*",w$e={className:"number",variants:[{begin:`(\\b(${c1})((${j2})|\\.)?|(${j2}))[eE][+-]?(${c1})[fFdD]?\\b`},{begin:`\\b(${c1})((${j2})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${j2})[fFdD]?\\b`},{begin:`\\b(${c1})[fFdD]\\b`},{begin:`\\b0[xX]((${U2})\\.?|(${U2})?\\.(${U2}))[pP][+-]?(${c1})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${U2})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function E$e(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},s={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},o={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},i={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[o,s]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,o,s]}]};s.contains.push(i);const a={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(i,{className:"string"}),"self"]}]},c=w$e,u=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},m=f;return m.variants[1].contains=[f],f.variants[1].contains=[m],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,u,n,r,a,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,e.C_LINE_COMMENT_MODE,u],relevance:0},e.C_LINE_COMMENT_MODE,u,a,l,i,e.C_NUMBER_MODE]},u]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},a,l]},i,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},c]}}const _$e=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),S$e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],T$e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],C$e=[...S$e,...T$e],k$e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Nte=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Ite=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),A$e=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),N$e=Nte.concat(Ite).sort().reverse();function I$e(e){const t=_$e(e),n=N$e,r="and or not only",s="[\\w-]+",o="("+s+"|@\\{"+s+"\\})",i=[],a=[],l=function(k){return{className:"string",begin:"~?"+k+".*?"+k}},c=function(k,I,O){return{className:k,begin:I,relevance:O}},u={$pattern:/[a-z-]+/,keyword:r,attribute:k$e.join(" ")},f={begin:"\\(",end:"\\)",contains:a,keywords:u,relevance:0};a.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,l("'"),l('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,f,c("variable","@@?"+s,10),c("variable","@\\{"+s+"\\}"),c("built_in","~?`[^`]*?`"),{className:"attribute",begin:s+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const m=a.concat({begin:/\{/,end:/\}/,contains:i}),g={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(a)},y={begin:o+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+A$e.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:a}}]},v={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:u,returnEnd:!0,contains:a,relevance:0}},x={className:"variable",variants:[{begin:"@"+s+"\\s*:",relevance:15},{begin:"@"+s}],starts:{end:"[;}]",returnEnd:!0,contains:m}},E={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:o,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,g,c("keyword","all\\b"),c("variable","@\\{"+s+"\\}"),{begin:"\\b("+C$e.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,c("selector-tag",o,0),c("selector-id","#"+o),c("selector-class","\\."+o,0),c("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+Nte.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+Ite.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:m},{begin:"!important"},t.FUNCTION_DISPATCH]},T={begin:s+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[E]};return i.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,v,x,T,y,E,g,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:i}}function R$e(e){const t="\\[=*\\[",n="\\]=*\\]",r={begin:t,end:n,contains:["self"]},s=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:s.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:s}].concat(s)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:n,contains:[r],relevance:5}])}}function M$e(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,n]},s={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},o={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},i={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,n,r,s,o,i]}}function O$e(e){const t=e.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},s={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},o={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},i={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},a=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,a,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},c={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=e.inherit(c,{contains:[]}),m=e.inherit(u,{contains:[]});c.contains.push(m),u.contains.push(f);let g=[n,l];return[c,u,f,m].forEach(E=>{E.contains=E.contains.concat(g)}),g=g.concat(c,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:g},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:g}]}]},n,o,c,u,{className:"quote",begin:"^>\\s+",contains:g,end:"$"},s,r,l,i,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function D$e(e){const t={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,a={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:a,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}function P$e(e){const t=e.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,s={$pattern:/[\w.]+/,keyword:n.join(" ")},o={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:s},i={begin:/->\{/,end:/\}/},a={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[a]},c={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},u=[e.BACKSLASH_ESCAPE,o,l],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],m=(v,x,E="\\1")=>{const T=E==="\\1"?E:t.concat(E,x);return t.concat(t.concat("(?:",v,")"),x,/(?:\\.|[^\\\/])*?/,T,/(?:\\.|[^\\\/])*?/,E,r)},g=(v,x,E)=>t.concat(t.concat("(?:",v,")"),x,/(?:\\.|[^\\\/])*?/,E,r),y=[l,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),i,{className:"string",contains:u,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},c,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:m("s|tr|y",t.either(...f,{capture:!0}))},{begin:m("s|tr|y","\\(","\\)")},{begin:m("s|tr|y","\\[","\\]")},{begin:m("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:g("(?:m|qr)?",/\//,/\//)},{begin:g("m|qr",t.either(...f,{capture:!0}),/\1/)},{begin:g("m|qr",/\(/,/\)/)},{begin:g("m|qr",/\[/,/\]/)},{begin:g("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,a]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,a,c]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return o.contains=y,i.contains=y,{name:"Perl",aliases:["pl","pm"],keywords:s,contains:y}}function L$e(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,r=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),s=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),o=t.concat(/[A-Z]+/,n),i={scope:"variable",match:"\\$+"+r},a={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=e.inherit(e.APOS_STRING_MODE,{illegal:null}),u=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(l)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(G,X)=>{X.data._beginMatch=G[1]||G[2]},"on:end":(G,X)=>{X.data._beginMatch!==G[1]&&X.ignoreMatch()}},m=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),g=`[ 	
]`,y={scope:"string",variants:[u,c,f,m]},v={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},x=["false","null","true"],E=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],T=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],I={keyword:E,literal:(G=>{const X=[];return G.forEach(J=>{X.push(J),J.toLowerCase()===J?X.push(J.toUpperCase()):X.push(J.toLowerCase())}),X})(x),built_in:T},O=G=>G.map(X=>X.replace(/\|\d+$/,"")),M={variants:[{match:[/new/,t.concat(g,"+"),t.concat("(?!",O(T).join("\\b|"),"\\b)"),s],scope:{1:"keyword",4:"title.class"}}]},P=t.concat(r,"\\b(?!\\()"),j={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),P],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[s,t.concat(/::/,t.lookahead(/(?!class\b)/)),P],scope:{1:"title.class",3:"variable.constant"}},{match:[s,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[s,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},V={scope:"attr",match:t.concat(r,t.lookahead(":"),t.lookahead(/(?!::)/))},U={relevance:0,begin:/\(/,end:/\)/,keywords:I,contains:[V,i,j,e.C_BLOCK_COMMENT_MODE,y,v,M]},z={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",O(E).join("\\b|"),"|",O(T).join("\\b|"),"\\b)"),r,t.concat(g,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[U]};U.contains.push(z);const H=[V,j,e.C_BLOCK_COMMENT_MODE,y,v,M],F={begin:t.concat(/#\[\s*\\?/,t.either(s,o)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:x,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:x,keyword:["new","array"]},contains:["self",...H]},...H,{scope:"meta",variants:[{match:s},{match:o}]}]};return{case_insensitive:!1,keywords:I,contains:[F,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},a,{scope:"variable.language",match:/\$this\b/},i,z,j,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},M,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:I,contains:["self",F,i,j,e.C_BLOCK_COMMENT_MODE,y,v]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},y,v]}}function $$e(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function F$e(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function B$e(e){const t=e.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],a={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},c={className:"subst",begin:/\{/,end:/\}/,keywords:a,illegal:/#/},u={begin:/\{\{/,relevance:0},f={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,l,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,l,u,c]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,u,c]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},m="[0-9](_?[0-9])*",g=`(\\b(${m}))?\\.(${m})|\\b(${m})\\.`,y=`\\b|${r.join("|")}`,v={className:"number",relevance:0,variants:[{begin:`(\\b(${m})|(${g}))[eE][+-]?(${m})[jJ]?(?=${y})`},{begin:`(${g})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${y})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${y})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${y})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${y})`},{begin:`\\b(${m})[jJ](?=${y})`}]},x={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:a,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},E={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:["self",l,v,f,e.HASH_COMMENT_MODE]}]};return c.contains=[f,v,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:a,illegal:/(<\/|\?)|=>/,contains:[l,v,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,x,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[E]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[v,E,f]}]}}function z$e(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function j$e(e){const t=e.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),s=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,o=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[s,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[o,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:s},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:o},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function U$e(e){const t=e.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),s=t.concat(r,/(::\w+)*/),i={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},a={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},c=[e.COMMENT("#","$",{contains:[a]}),e.COMMENT("^=begin","^=end",{contains:[a],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],u={className:"subst",begin:/#\{/,end:/\}/,keywords:i},f={className:"string",contains:[e.BACKSLASH_ESCAPE,u],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,u]})]}]},m="[1-9](_?[0-9])*|0",g="[0-9](_?[0-9])*",y={className:"number",relevance:0,variants:[{begin:`\\b(${m})(\\.(${g}))?([eE][+-]?(${g})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},v={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:i}]},M=[f,{variants:[{match:[/class\s+/,s,/\s+<\s+/,s]},{match:[/\b(class|module)\s+/,s]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:i},{match:[/(include|extend)\s+/,s],scope:{2:"title.class"},keywords:i},{relevance:0,match:[s,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[v]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:n}],relevance:0},y,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:i},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,u],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,c),relevance:0}].concat(l,c);u.contains=M,v.contains=M;const U=[{begin:/^\s*=>/,starts:{end:"$",contains:M}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:i,contains:M}}];return c.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:i,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(U).concat(c).concat(M)}}function H$e(e){const t=e.regex,n=/(r#)?/,r=t.concat(n,e.UNDERSCORE_IDENT_RE),s=t.concat(n,e.IDENT_RE),o={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,s,t.lookahead(/\s*\(/))},i="([ui](8|16|32|64|128|size)|f(32|64))?",a=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],c=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],u=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:u,keyword:a,literal:l,built_in:c},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+i},{begin:"\\b0o([0-7_]+)"+i},{begin:"\\b0x([A-Fa-f0-9_]+)"+i},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+i}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:c,type:u}},{className:"punctuation",begin:"->"},o]}}const V$e=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),q$e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],G$e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],W$e=[...q$e,...G$e],Y$e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),K$e=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Z$e=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),J$e=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function X$e(e){const t=V$e(e),n=Z$e,r=K$e,s="@[a-z-]+",o="and or not only",a={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+W$e.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},a,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+J$e.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,a,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:s,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:Y$e.join(" ")},contains:[{begin:s,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},a,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function Q$e(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function eFe(e){const t=e.regex,n=e.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},s={begin:/"/,end:/"/,contains:[{match:/""/}]},o=["true","false","unknown"],i=["double precision","large object","with timezone","without timezone"],a=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],c=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],u=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],m=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],g=u,y=[...c,...l].filter(O=>!u.includes(O)),v={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},x={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},E={match:t.concat(/\b/,t.either(...g),/\s*\(/),relevance:0,keywords:{built_in:g}};function T(O){return t.concat(/\b/,t.either(...O.map(M=>M.replace(/\s+/,"\\s+"))),/\b/)}const k={scope:"keyword",match:T(m),relevance:0};function I(O,{exceptions:M,when:P}={}){const j=P;return M=M||[],O.map(V=>V.match(/\|\d+$/)||M.includes(V)?V:j(V)?`${V}|0`:V)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:I(y,{when:O=>O.length<3}),literal:o,type:a,built_in:f},contains:[{scope:"type",match:T(i)},k,E,v,r,s,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,x]}}function Rte(e){return e?typeof e=="string"?e:e.source:null}function Yy(e){return Ps("(?=",e,")")}function Ps(...e){return e.map(n=>Rte(n)).join("")}function tFe(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Ma(...e){return"("+(tFe(e).capture?"":"?:")+e.map(r=>Rte(r)).join("|")+")"}const Z7=e=>Ps(/\b/,e,/\w$/.test(e)?/\b/:/\B/),nFe=["Protocol","Type"].map(Z7),Lz=["init","self"].map(Z7),rFe=["Any","Self"],F5=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],$z=["false","nil","true"],sFe=["assignment","associativity","higherThan","left","lowerThan","none","right"],oFe=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],Fz=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],Mte=Ma(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),Ote=Ma(Mte,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),B5=Ps(Mte,Ote,"*"),Dte=Ma(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),RT=Ma(Dte,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Ku=Ps(Dte,RT,"*"),H2=Ps(/[A-Z]/,RT,"*"),iFe=["attached","autoclosure",Ps(/convention\(/,Ma("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Ps(/objc\(/,Ku,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],aFe=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function lFe(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[e.C_LINE_COMMENT_MODE,n],s={match:[/\./,Ma(...nFe,...Lz)],className:{2:"keyword"}},o={match:Ps(/\./,Ma(...F5)),relevance:0},i=F5.filter(Vt=>typeof Vt=="string").concat(["_|0"]),a=F5.filter(Vt=>typeof Vt!="string").concat(rFe).map(Z7),l={variants:[{className:"keyword",match:Ma(...a,...Lz)}]},c={$pattern:Ma(/\b\w+/,/#\w+/),keyword:i.concat(oFe),literal:$z},u=[s,o,l],f={match:Ps(/\./,Ma(...Fz)),relevance:0},m={className:"built_in",match:Ps(/\b/,Ma(...Fz),/(?=\()/)},g=[f,m],y={match:/->/,relevance:0},v={className:"operator",relevance:0,variants:[{match:B5},{match:`\\.(\\.|${Ote})+`}]},x=[y,v],E="([0-9]_*)+",T="([0-9a-fA-F]_*)+",k={className:"number",relevance:0,variants:[{match:`\\b(${E})(\\.(${E}))?([eE][+-]?(${E}))?\\b`},{match:`\\b0x(${T})(\\.(${T}))?([pP][+-]?(${E}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},I=(Vt="")=>({className:"subst",variants:[{match:Ps(/\\/,Vt,/[0\\tnr"']/)},{match:Ps(/\\/,Vt,/u\{[0-9a-fA-F]{1,8}\}/)}]}),O=(Vt="")=>({className:"subst",match:Ps(/\\/,Vt,/[\t ]*(?:[\r\n]|\r\n)/)}),M=(Vt="")=>({className:"subst",label:"interpol",begin:Ps(/\\/,Vt,/\(/),end:/\)/}),P=(Vt="")=>({begin:Ps(Vt,/"""/),end:Ps(/"""/,Vt),contains:[I(Vt),O(Vt),M(Vt)]}),j=(Vt="")=>({begin:Ps(Vt,/"/),end:Ps(/"/,Vt),contains:[I(Vt),M(Vt)]}),V={className:"string",variants:[P(),P("#"),P("##"),P("###"),j(),j("#"),j("##"),j("###")]},U=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],z={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:U},H=Vt=>{const Dt=Ps(Vt,/\//),en=Ps(/\//,Vt);return{begin:Dt,end:en,contains:[...U,{scope:"comment",begin:`#(?!.*${en})`,end:/$/}]}},F={scope:"regexp",variants:[H("###"),H("##"),H("#"),z]},G={match:Ps(/`/,Ku,/`/)},X={className:"variable",match:/\$\d+/},J={className:"variable",match:`\\$${RT}+`},ee=[G,X,J],re={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:aFe,contains:[...x,k,V]}]}},ie={scope:"keyword",match:Ps(/@/,Ma(...iFe),Yy(Ma(/\(/,/\s+/)))},Z={scope:"meta",match:Ps(/@/,Ku)},te=[re,ie,Z],oe={match:Yy(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Ps(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,RT,"+")},{className:"type",match:H2,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Ps(/\s+&\s+/,Yy(H2)),relevance:0}]},Q={begin:/</,end:/>/,keywords:c,contains:[...r,...u,...te,y,oe]};oe.contains.push(Q);const Te={match:Ps(Ku,/\s*:/),keywords:"_|0",relevance:0},ge={begin:/\(/,end:/\)/,relevance:0,keywords:c,contains:["self",Te,...r,F,...u,...g,...x,k,V,...ee,...te,oe]},Ce={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,oe]},fe={begin:Ma(Yy(Ps(Ku,/\s*:/)),Yy(Ps(Ku,/\s+/,Ku,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Ku}]},Fe={begin:/\(/,end:/\)/,keywords:c,contains:[fe,...r,...u,...x,k,V,...te,oe,ge],endsParent:!0,illegal:/["']/},De={match:[/(func|macro)/,/\s+/,Ma(G.match,Ku,B5)],className:{1:"keyword",3:"title.function"},contains:[Ce,Fe,t],illegal:[/\[/,/%/]},Re={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Ce,Fe,t],illegal:/\[|%/},tt={match:[/operator/,/\s+/,B5],className:{1:"keyword",3:"title"}},de={begin:[/precedencegroup/,/\s+/,H2],className:{1:"keyword",3:"title"},contains:[oe],keywords:[...sFe,...$z],end:/}/},nt={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},ot={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},Ut={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Ku,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:c,contains:[Ce,...u,{begin:/:/,end:/\{/,keywords:c,contains:[{scope:"title.class.inherited",match:H2},...u],relevance:0}]};for(const Vt of V.variants){const Dt=Vt.contains.find(xt=>xt.label==="interpol");Dt.keywords=c;const en=[...u,...g,...x,k,V,...ee];Dt.contains=[...en,{begin:/\(/,end:/\)/,contains:["self",...en]}]}return{name:"Swift",keywords:c,contains:[...r,De,Re,nt,ot,Ut,tt,de,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},F,...u,...g,...x,k,V,...ee,...te,oe,ge]}}const MT="[A-Za-z$_][0-9A-Za-z$_]*",Pte=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],Lte=["true","false","null","undefined","NaN","Infinity"],$te=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Fte=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Bte=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],zte=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],jte=[].concat(Bte,$te,Fte);function cFe(e){const t=e.regex,n=(re,{after:ie})=>{const Z="</"+re[0].slice(1);return re.input.indexOf(Z,ie)!==-1},r=MT,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(re,ie)=>{const Z=re[0].length+re.index,te=re.input[Z];if(te==="<"||te===","){ie.ignoreMatch();return}te===">"&&(n(re,{after:Z})||ie.ignoreMatch());let oe;const Q=re.input.substring(Z);if(oe=Q.match(/^\s*=/)){ie.ignoreMatch();return}if((oe=Q.match(/^\s+extends\s+/))&&oe.index===0){ie.ignoreMatch();return}}},a={$pattern:MT,keyword:Pte,literal:Lte,built_in:jte,"variable.language":zte},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},g={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},x={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,m]},T={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},k=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,x,{match:/\$\d+/},f];m.contains=k.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(k)});const I=[].concat(T,m.contains),O=I.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(I)}]),M={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O},P={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},j={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...$te,...Fte]}},V={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},U={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[M],illegal:/%/},z={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function H(re){return t.concat("(?!",re.join("|"),")")}const F={match:t.concat(/\b/,H([...Bte,"super","import"].map(re=>`${re}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},G={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},X={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},M]},J="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ee={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(J)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[M]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:O,CLASS_REFERENCE:j},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),V,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,x,T,{match:/\$\d+/},f,j,{scope:"attr",match:r+t.lookahead(":"),relevance:0},ee,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[T,e.REGEXP_MODE,{className:"function",begin:J,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},U,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[M,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},G,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[M]},F,z,P,X,{match:/\$[(.]/}]}}function uFe(e){const t=e.regex,n=cFe(e),r=MT,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],o={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},i={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[n.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],c={$pattern:MT,keyword:Pte.concat(l),literal:Lte,built_in:jte.concat(s),"variable.language":zte},u={className:"meta",begin:"@"+r},f=(v,x,E)=>{const T=v.contains.findIndex(k=>k.label===x);if(T===-1)throw new Error("can not find mode to replace");v.contains.splice(T,1,E)};Object.assign(n.keywords,c),n.exports.PARAMS_CONTAINS.push(u);const m=n.contains.find(v=>v.scope==="attr"),g=Object.assign({},m,{match:t.concat(r,t.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,m,g]),n.contains=n.contains.concat([u,o,i,g]),f(n,"shebang",e.SHEBANG()),f(n,"use_strict",a);const y=n.contains.find(v=>v.label==="func.def");return y.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function dFe(e){const t=e.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},s=/\d{1,2}\/\d{1,2}\/\d{4}/,o=/\d{4}-\d{1,2}-\d{1,2}/,i=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,a=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:t.concat(/# */,t.either(o,s),/ *#/)},{begin:t.concat(/# */,a,/ *#/)},{begin:t.concat(/# */,i,/ *#/)},{begin:t.concat(/# */,t.either(o,s),/ +/,t.either(i,a),/ *#/)}]},c={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},u={className:"label",begin:/^\w+:/},f=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),m=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,l,c,u,f,m,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[m]}]}}function fFe(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");const n=e.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],s={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},o={className:"variable",begin:/\$[\w_]+/},i={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},a={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},c={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},o,i,s,e.QUOTE_STRING_MODE,l,c,a]}}function hFe(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},o={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},i=e.inherit(o,{begin:/\(/,end:/\)/}),a=e.inherit(e.APOS_STRING_MODE,{className:"string"}),l=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[o,l,a,i,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[o,i,l,a]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:c}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function pFe(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},s={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},o={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},i={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,s]},a=e.inherit(i,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),m={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},g={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},y={begin:/\{/,end:/\}/,contains:[g],illegal:"\\n",relevance:0},v={begin:"\\[",end:"\\]",contains:[g],illegal:"\\n",relevance:0},x=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},m,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},y,v,o,i],E=[...x];return E.pop(),E.push(a),g.contains=E,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:x}}const mFe={arduino:ZLe,bash:JLe,c:XLe,cpp:QLe,csharp:e$e,css:c$e,diff:u$e,go:d$e,graphql:f$e,ini:h$e,java:p$e,javascript:v$e,json:x$e,kotlin:E$e,less:I$e,lua:R$e,makefile:M$e,markdown:O$e,objectivec:D$e,perl:P$e,php:L$e,"php-template":$$e,plaintext:F$e,python:B$e,"python-repl":z$e,r:j$e,ruby:U$e,rust:H$e,scss:X$e,shell:Q$e,sql:eFe,swift:lFe,typescript:uFe,vbnet:dFe,wasm:fFe,xml:hFe,yaml:pFe};const Bz={},gFe="hljs-";function bFe(e){const t=_te.newInstance();return e&&o(e),{highlight:n,highlightAuto:r,listLanguages:s,register:o,registerAlias:i,registered:a};function n(l,c,u){const f=u||Bz,m=typeof f.prefix=="string"?f.prefix:gFe;if(!t.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");t.configure({__emitter:yFe,classPrefix:m});const g=t.highlight(c,{ignoreIllegals:!0,language:l});if(g.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:g.errorRaised});const y=g._emitter.root,v=y.data;return v.language=g.language,v.relevance=g.relevance,y}function r(l,c){const f=(c||Bz).subset||s();let m=-1,g=0,y;for(;++m<f.length;){const v=f[m];if(!t.getLanguage(v))continue;const x=n(v,l,c);x.data&&x.data.relevance!==void 0&&x.data.relevance>g&&(g=x.data.relevance,y=x)}return y||{type:"root",children:[],data:{language:void 0,relevance:g}}}function s(){return t.listLanguages()}function o(l,c){if(typeof l=="string")t.registerLanguage(l,c);else{let u;for(u in l)Object.hasOwn(l,u)&&t.registerLanguage(u,l[u])}}function i(l,c){if(typeof l=="string")t.registerAliases(typeof c=="string"?c:[...c],{languageName:l});else{let u;for(u in l)if(Object.hasOwn(l,u)){const f=l[u];t.registerAliases(typeof f=="string"?f:[...f],{languageName:u})}}}function a(l){return!!t.getLanguage(l)}}class yFe{constructor(t){this.options=t,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(t){if(t==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=t:n.children.push({type:"text",value:t})}startScope(t){this.openNode(String(t))}endScope(){this.closeNode()}__addSublanguage(t,n){const r=this.stack[this.stack.length-1],s=t.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:s}):r.children.push(...s)}openNode(t){const n=this,r=t.split(".").map(function(i,a){return a?i+"_".repeat(a):n.options.classPrefix+i}),s=this.stack[this.stack.length-1],o={type:"element",tagName:"span",properties:{className:r},children:[]};s.children.push(o),this.stack.push(o)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const vFe=YLe.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),lowlight:bFe(mFe),defaultLanguage:null,HTMLAttributes:{class:"block-node"}}}}),xFe=Ete.extend({addProseMirrorPlugins(){var e;return[...((e=this.parent)==null?void 0:e.call(this))||[],new Ir({props:{handleKeyDown:(t,n)=>(n.key==="Enter"&&this.editor.commands.unsetColor(),!1)}})]}}),wFe=Wee.extend({addKeyboardShortcuts(){return{"Mod-Alt--":()=>this.editor.commands.insertContent({type:this.name})}}});var EFe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,_Fe=yl.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",Vo(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,n,r,s,o,i;const a=(n=(t=e.attrs)==null?void 0:t.src)!=null?n:"",l=(s=(r=e.attrs)==null?void 0:r.alt)!=null?s:"",c=(i=(o=e.attrs)==null?void 0:o.title)!=null?i:"";return c?`![${l}](${a} "${c}")`:`![${l}](${a})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:e,minWidth:t,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:s,getPos:o,HTMLAttributes:i,editor:a})=>{const l=document.createElement("img");Object.entries(i).forEach(([f,m])=>{if(m!=null)switch(f){case"width":case"height":break;default:l.setAttribute(f,m);break}}),l.src=i.src;const c=new d9e({element:l,editor:a,node:s,getPos:o,onResize:(f,m)=>{l.style.width=`${f}px`,l.style.height=`${m}px`},onCommit:(f,m)=>{const g=o();g!==void 0&&this.editor.chain().setNodeSelection(g).updateAttributes(this.name,{width:f,height:m}).run()},onUpdate:(f,m,g)=>f.type===s.type,options:{directions:e,min:{width:t,height:n},preserveAspectRatio:r===!0}}),u=c.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",l.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},c}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[bee({find:EFe,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}});function SFe({initialWidth:e,initialHeight:t,contentWidth:n,contentHeight:r,gridInterval:s,minWidth:o,minHeight:i,maxWidth:a,onDimensionsChange:l}){const[c,u]=w.useState({width:Math.max(e??o,o),height:Math.max(t??i,i)}),[f,m]=w.useState(1/0),[g,y]=w.useState(0),[v,x]=w.useState(c),[E,T]=w.useState(),k=w.useCallback((j,V)=>{const U=Math.max(o,Math.min(n??o,s/100*V));return Math.min(V,Math.max(j,U))},[s,n,o]),I=w.useCallback(j=>{j.preventDefault();const V=(E==="left"?g-j.pageX:j.pageX-g)*2,U=s/100*f,z=v.width+V,H=Math.round(z/U)*U,F=k(H,f),G=r&&n?r/n:1;u({width:Math.max(F,o),height:Math.max(n?F*G:r??i,i)})},[k,E,f,g,s,r,n,v.width,o,i]),O=w.useCallback(j=>{j.preventDefault(),j.stopPropagation(),y(0),T(void 0),l==null||l(c)},[l,c]),M=w.useCallback(j=>{j.key==="Escape"&&(j.preventDefault(),j.stopPropagation(),u({width:Math.max(v.width,o),height:Math.max(v.height,i)}),T(void 0))},[v,o,i]),P=w.useCallback(j=>V=>{V.preventDefault(),V.stopPropagation(),m(a),x({width:Math.max(k(c.width,a),o),height:Math.max(c.height,i)}),y(V.pageX),T(j)},[a,k,c.width,c.height,o,i]);return w.useEffect(()=>{if(E)return document.addEventListener("keydown",M),document.addEventListener("pointermove",I),document.addEventListener("pointerup",O),()=>{document.removeEventListener("keydown",M),document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",O)}},[E,M,I,O]),{initiateResize:P,isResizing:!!E,updateDimensions:u,currentWidth:Math.max(c.width,o),currentHeight:Math.max(c.height,i)}}const J6=w.forwardRef(({className:e,isResizing:t=!1,...n},r)=>h.jsx("div",{className:Qe("absolute top-1/2 h-10 max-h-full w-1.5 -translate-y-1/2 transform cursor-col-resize rounded border border-solid border-[var(--mt-transparent-foreground)] bg-[var(--mt-bg-secondary)] p-px transition-all","opacity-0 [backdrop-filter:saturate(1.8)_blur(20px)]",{"opacity-80":t,"group-hover/node-image:opacity-80":!t},"before:absolute before:inset-y-0 before:-left-1 before:-right-1",e),ref:r,...n}));J6.displayName="ResizeHandle";function TFe(){return Me.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-unzoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Me.createElement("path",{d:"M 14.144531 1.148438 L 9 6.292969 L 9 3 L 8 3 L 8 8 L 13 8 L 13 7 L 9.707031 7 L 14.855469 1.851563 Z M 8 8 L 3 8 L 3 9 L 6.292969 9 L 1.148438 14.144531 L 1.851563 14.855469 L 7 9.707031 L 7 13 L 8 13 Z"}))}function CFe(){return Me.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-zoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Me.createElement("path",{d:"M 9 1 L 9 2 L 12.292969 2 L 2 12.292969 L 2 9 L 1 9 L 1 14 L 6 14 L 6 13 L 2.707031 13 L 13 2.707031 L 13 6 L 14 6 L 14 1 Z"}))}const OT=(e,t)=>{var n,r;return e===((r=(n=t==null?void 0:t.tagName)==null?void 0:n.toUpperCase)==null?void 0:r.call(n))},J7=e=>OT("DIV",e)||OT("SPAN",e),DT=e=>OT("IMG",e),zz=e=>e.complete&&e.naturalHeight!==0,$_=e=>OT("SVG",e),Ute=({height:e,offset:t,width:n})=>Math.min((window.innerWidth-t*2)/n,(window.innerHeight-t*2)/e),kFe=({containerHeight:e,containerWidth:t,offset:n,targetHeight:r,targetWidth:s})=>{const o=Ute({height:r,offset:n,width:s}),i=s>r?s/t:r/e;return o>1?i:o*i},sm=({containerHeight:e,containerWidth:t,hasScalableSrc:n,offset:r,targetHeight:s,targetWidth:o})=>!e||!t?1:!n&&s&&o?kFe({containerHeight:e,containerWidth:t,offset:r,targetHeight:s,targetWidth:o}):Ute({height:e,offset:r,width:t}),AFe=/url(?:\(['"]?)(.*?)(?:['"]?\))/,jz=e=>{var t;if(e){if(DT(e))return e.currentSrc;if(J7(e)){const n=window.getComputedStyle(e).backgroundImage;if(n)return(t=AFe.exec(n))==null?void 0:t[1]}}},NFe=e=>{if(e)return DT(e)?e.alt??void 0:e.getAttribute("aria-label")??void 0},IFe=({containerHeight:e,containerLeft:t,containerTop:n,containerWidth:r,hasScalableSrc:s,offset:o,targetHeight:i,targetWidth:a})=>{const l=sm({containerHeight:e,containerWidth:r,hasScalableSrc:s,offset:o,targetHeight:i,targetWidth:a});return{top:n,left:t,width:r*l,height:e*l,transform:`translate(0,0) scale(${1/l})`}},vc=({position:e,relativeNum:t})=>{const n=parseFloat(e);return e.endsWith("%")?t*n/100:n},RFe=({containerHeight:e,containerLeft:t,containerTop:n,containerWidth:r,hasScalableSrc:s,objectFit:o,objectPosition:i,offset:a,targetHeight:l,targetWidth:c})=>{if(o==="scale-down"&&(c<=r&&l<=e?o="none":o="contain"),o==="cover"||o==="contain"){const u=r/c,f=e/l,m=o==="cover"?Math.max(u,f):Math.min(u,f),[g="50%",y="50%"]=i.split(" "),v=vc({position:g,relativeNum:r-c*m}),x=vc({position:y,relativeNum:e-l*m}),E=sm({containerHeight:l*m,containerWidth:c*m,hasScalableSrc:s,offset:a,targetHeight:l,targetWidth:c});return{top:n+x,left:t+v,width:c*m*E,height:l*m*E,transform:`translate(0,0) scale(${1/E})`}}else if(o==="none"){const[u="50%",f="50%"]=i.split(" "),m=vc({position:u,relativeNum:r-c}),g=vc({position:f,relativeNum:e-l}),y=sm({containerHeight:l,containerWidth:c,hasScalableSrc:s,offset:a,targetHeight:l,targetWidth:c});return{top:n+g,left:t+m,width:c*y,height:l*y,transform:`translate(0,0) scale(${1/y})`}}else if(o==="fill"){const u=r/c,f=e/l,m=Math.max(u,f),g=sm({containerHeight:l*m,containerWidth:c*m,hasScalableSrc:s,offset:a,targetHeight:l,targetWidth:c});return{width:r*g,height:e*g,transform:`translate(0,0) scale(${1/g})`}}else return{}},MFe=({backgroundPosition:e,backgroundSize:t,containerHeight:n,containerLeft:r,containerTop:s,containerWidth:o,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c})=>{if(t==="cover"||t==="contain"){const u=o/c,f=n/l,m=t==="cover"?Math.max(u,f):Math.min(u,f),[g="50%",y="50%"]=e.split(" "),v=vc({position:g,relativeNum:o-c*m}),x=vc({position:y,relativeNum:n-l*m}),E=sm({containerHeight:l*m,containerWidth:c*m,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c});return{top:s+x,left:r+v,width:c*m*E,height:l*m*E,transform:`translate(0,0) scale(${1/E})`}}else if(t==="auto"){const[u="50%",f="50%"]=e.split(" "),m=vc({position:u,relativeNum:o-c}),g=vc({position:f,relativeNum:n-l}),y=sm({containerHeight:l,containerWidth:c,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c});return{top:s+g,left:r+m,width:c*y,height:l*y,transform:`translate(0,0) scale(${1/y})`}}else{const[u="50%",f="50%"]=t.split(" "),m=vc({position:u,relativeNum:o}),g=vc({position:f,relativeNum:n}),y=m/c,v=g/l,x=Math.min(y,v),[E="50%",T="50%"]=e.split(" "),k=vc({position:E,relativeNum:o-c*x}),I=vc({position:T,relativeNum:n-l*x}),O=sm({containerHeight:l*x,containerWidth:c*x,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c});return{top:s+I,left:r+k,width:c*x*O,height:l*x*O,transform:`translate(0,0) scale(${1/O})`}}},OFe=/\.svg$/i,DFe=({hasZoomImg:e,imgSrc:t,isSvg:n,isZoomed:r,loadedImgEl:s,offset:o,shouldRefresh:i,targetEl:a})=>{var E;const l=n||((E=t==null?void 0:t.slice)==null?void 0:E.call(t,0,18))==="data:image/svg+xml"||e||!!(t&&OFe.test(t)),c=a.getBoundingClientRect(),u=window.getComputedStyle(a),f=s!=null&&J7(a),m=s!=null&&!f,g=IFe({containerHeight:c.height,containerLeft:c.left,containerTop:c.top,containerWidth:c.width,hasScalableSrc:l,offset:o,targetHeight:(s==null?void 0:s.naturalHeight)||c.height,targetWidth:(s==null?void 0:s.naturalWidth)||c.width}),y=m?RFe({containerHeight:c.height,containerLeft:c.left,containerTop:c.top,containerWidth:c.width,hasScalableSrc:l,objectFit:u.objectFit,objectPosition:u.objectPosition,offset:o,targetHeight:(s==null?void 0:s.naturalHeight)||c.height,targetWidth:(s==null?void 0:s.naturalWidth)||c.width}):void 0,v=f?MFe({backgroundPosition:u.backgroundPosition,backgroundSize:u.backgroundSize,containerHeight:c.height,containerLeft:c.left,containerTop:c.top,containerWidth:c.width,hasScalableSrc:l,offset:o,targetHeight:(s==null?void 0:s.naturalHeight)||c.height,targetWidth:(s==null?void 0:s.naturalWidth)||c.width}):void 0,x=Object.assign({},g,y,v);if(r){const T=window.innerWidth/2,k=window.innerHeight/2,I=parseFloat(String(x.left||0))+parseFloat(String(x.width||0))/2,O=parseFloat(String(x.top||0))+parseFloat(String(x.height||0))/2,M=T-I,P=k-O;i&&(x.transitionDuration="0.01ms"),x.transform=`translate(${M}px,${P}px) scale(1)`}return x},z5=e=>{if(!e)return{};if($_(e)){const t=e.parentElement,n=e.getBoundingClientRect();if(t){const r=t.getBoundingClientRect();return{height:n.height,left:r.left-n.left,top:r.top-n.top,width:n.width}}else return{height:n.height,left:n.left,width:n.width,top:n.top}}else return{height:e.offsetHeight,left:e.offsetLeft,width:e.offsetWidth,top:e.offsetTop}},PFe=e=>{const t="-zoom",n=["clip-path","fill","mask","marker-start","marker-mid","marker-end"],r=new Map;if(e.hasAttribute("id")){const s=e.id,o=s+t;r.set(s,o),e.id=o}e.querySelectorAll("[id]").forEach(s=>{const o=s.id,i=o+t;r.set(o,i),s.id=i}),r.forEach((s,o)=>{const i=`url(#${o})`,a=`url(#${s})`,l=n.map(c=>`[${c}="${i}"]`).join(", ");e.querySelectorAll(l).forEach(c=>{n.forEach(u=>{c.getAttribute(u)===i&&c.setAttribute(u,a)})})}),e.querySelectorAll("style").forEach(s=>{r.forEach((o,i)=>{s.textContent&&(s.textContent=s.textContent.replaceAll(`#${i}`,`#${o}`))})})},LFe=["img","svg",'[role="img"]',"[data-zoom]"].map(e=>`${e}:not([aria-hidden="true"])`).join(","),Uz={overflow:"",width:""};function $Fe(e){return Me.createElement(Hte,{...e})}class Hte extends Me.Component{constructor(){super(...arguments),this.state={id:"",isZoomImgLoaded:!1,loadedImgEl:void 0,modalState:"UNLOADED",shouldRefresh:!1,styleGhost:{}},this.refContent=Me.createRef(),this.refDialog=Me.createRef(),this.refModalContent=Me.createRef(),this.refModalImg=Me.createRef(),this.refWrap=Me.createRef(),this.imgEl=null,this.isScaling=!1,this.prevBodyAttrs=Uz,this.styleModalImg={},this.handleModalStateChange=t=>{var r,s,o,i;const{modalState:n}=this.state;t!=="LOADING"&&n==="LOADING"?(this.loadZoomImg(),window.addEventListener("resize",this.handleResize,{passive:!0}),window.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),window.addEventListener("touchmove",this.handleTouchMove,{passive:!0}),window.addEventListener("touchend",this.handleTouchEnd,{passive:!0}),window.addEventListener("touchcancel",this.handleTouchCancel,{passive:!0}),document.addEventListener("keydown",this.handleKeyDown,!0)):t!=="LOADED"&&n==="LOADED"?window.addEventListener("wheel",this.handleWheel,{passive:!0}):t!=="UNLOADING"&&n==="UNLOADING"?(this.ensureImgTransitionEnd(),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),document.removeEventListener("keydown",this.handleKeyDown,!0)):t!=="UNLOADED"&&n==="UNLOADED"&&(this.bodyScrollEnable(),window.removeEventListener("resize",this.handleResize),(s=(r=this.refModalImg.current)==null?void 0:r.removeEventListener)==null||s.call(r,"transitionend",this.handleImgTransitionEnd),(i=(o=this.refDialog.current)==null?void 0:o.close)==null||i.call(o))},this.getDialogContainer=()=>{let t=document.querySelector("[data-rmiz-portal]");return t==null&&(t=document.createElement("div"),t.setAttribute("data-rmiz-portal",""),document.body.appendChild(t)),t},this.setId=()=>{const t=()=>Math.random().toString(16).slice(-4);this.setState({id:t()+t()+t()})},this.setAndTrackImg=()=>{var n,r;const t=this.refContent.current;t&&(this.imgEl=t.querySelector(LFe),this.imgEl?((r=(n=this.contentNotFoundChangeObserver)==null?void 0:n.disconnect)==null||r.call(n),this.imgEl.addEventListener("load",this.handleImgLoad),this.imgEl.addEventListener("click",this.handleZoom),this.state.loadedImgEl||this.handleImgLoad(),this.imgElResizeObserver=new ResizeObserver(s=>{const o=s[0];o!=null&&o.target&&(this.imgEl=o.target,this.setState({styleGhost:z5(this.imgEl)}))}),this.imgElResizeObserver.observe(this.imgEl),this.contentChangeObserver||(this.contentChangeObserver=new MutationObserver(()=>{this.setState({styleGhost:z5(this.imgEl)})}),this.contentChangeObserver.observe(t,{attributes:!0,childList:!0,subtree:!0}))):this.contentNotFoundChangeObserver||(this.contentNotFoundChangeObserver=new MutationObserver(this.setAndTrackImg),this.contentNotFoundChangeObserver.observe(t,{childList:!0,subtree:!0})))},this.handleIfZoomChanged=t=>{const{isZoomed:n}=this.props;!t&&n?this.zoom():t&&!n&&this.unzoom()},this.handleImgLoad=()=>{const t=jz(this.imgEl);if(!t)return;const n=new Image;DT(this.imgEl)&&(n.sizes=this.imgEl.sizes,n.srcset=this.imgEl.srcset,n.crossOrigin=this.imgEl.crossOrigin),n.src=t;const r=()=>{this.setState({loadedImgEl:n,styleGhost:z5(this.imgEl)})};n.decode().then(r).catch(()=>{if(zz(n)){r();return}n.onload=r})},this.handleZoom=t=>{var n,r;!this.props.isDisabled&&this.hasImage()&&((r=(n=this.props).onZoomChange)==null||r.call(n,!0,{event:t}))},this.handleUnzoom=t=>{var n,r;this.props.isDisabled||(r=(n=this.props).onZoomChange)==null||r.call(n,!1,{event:t})},this.handleBtnUnzoomClick=t=>{t.preventDefault(),t.stopPropagation(),this.handleUnzoom(t)},this.handleDialogCancel=t=>{t.preventDefault()},this.handleDialogClick=t=>{(t.target===this.refModalContent.current||t.target===this.refModalImg.current)&&(t.stopPropagation(),this.handleUnzoom(t))},this.handleDialogClose=t=>{t.stopPropagation(),this.handleUnzoom(t)},this.handleKeyDown=t=>{(t.key==="Escape"||t.keyCode===27)&&(t.preventDefault(),t.stopPropagation(),this.handleUnzoom(t))},this.handleWheel=t=>{t.ctrlKey||(t.stopPropagation(),queueMicrotask(()=>{this.handleUnzoom(t)}))},this.handleTouchStart=t=>{if(t.touches.length>1){this.isScaling=!0;return}t.changedTouches.length===1&&t.changedTouches[0]&&(this.touchYStart=t.changedTouches[0].screenY)},this.handleTouchMove=t=>{var r;const n=((r=window.visualViewport)==null?void 0:r.scale)??1;if(this.props.canSwipeToUnzoom&&!this.isScaling&&n<=1&&this.touchYStart!=null&&t.changedTouches[0]){this.touchYEnd=t.changedTouches[0].screenY;const s=Math.max(this.touchYStart,this.touchYEnd),o=Math.min(this.touchYStart,this.touchYEnd);Math.abs(s-o)>this.props.swipeToUnzoomThreshold&&(this.touchYStart=void 0,this.touchYEnd=void 0,this.handleUnzoom(t))}},this.handleTouchEnd=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleTouchCancel=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleResize=()=>{this.setState({shouldRefresh:!0})},this.hasImage=()=>this.imgEl&&(this.state.loadedImgEl||$_(this.imgEl))&&window.getComputedStyle(this.imgEl).display!=="none",this.zoom=()=>{var t,n,r,s;this.bodyScrollDisable(),(n=(t=this.refDialog.current)==null?void 0:t.showModal)==null||n.call(t),(s=(r=this.refModalImg.current)==null?void 0:r.addEventListener)==null||s.call(r,"transitionend",this.handleImgTransitionEnd),this.setState({modalState:"LOADING"})},this.unzoom=()=>{this.setState({modalState:"UNLOADING"})},this.handleImgTransitionEnd=()=>{clearTimeout(this.timeoutTransitionEnd),this.state.modalState==="LOADING"?this.setState({modalState:"LOADED"}):this.state.modalState==="UNLOADING"&&this.setState({shouldRefresh:!1,modalState:"UNLOADED"})},this.ensureImgTransitionEnd=()=>{if(this.refModalImg.current){const t=window.getComputedStyle(this.refModalImg.current).transitionDuration,n=parseFloat(t);if(n){const r=n*(t.endsWith("ms")?1:1e3)+50;this.timeoutTransitionEnd=setTimeout(this.handleImgTransitionEnd,r)}}},this.bodyScrollDisable=()=>{this.prevBodyAttrs={overflow:document.body.style.overflow,width:document.body.style.width};const t=document.body.clientWidth;document.body.style.overflow="hidden",document.body.style.width=`${t}px`},this.bodyScrollEnable=()=>{document.body.style.width=this.prevBodyAttrs.width,document.body.style.overflow=this.prevBodyAttrs.overflow,this.prevBodyAttrs=Uz},this.loadZoomImg=()=>{const{props:{zoomImg:t}}=this,n=t==null?void 0:t.src;if(n){const r=new Image;r.sizes=(t==null?void 0:t.sizes)??"",r.srcset=(t==null?void 0:t.srcSet)??"",r.crossOrigin=(t==null?void 0:t.crossOrigin)??void 0,r.src=n;const s=()=>{this.setState({isZoomImgLoaded:!0})};r.decode().then(s).catch(()=>{if(zz(r)){s();return}r.onload=s})}},this.UNSAFE_handleSvg=()=>{var s,o,i,a,l;const{imgEl:t,refModalImg:n,styleModalImg:r}=this;if($_(t)){const c=t.cloneNode(!0);PFe(c),c.style.width=`${r.width||0}px`,c.style.height=`${r.height||0}px`,c.addEventListener("click",this.handleUnzoom),(i=(o=(s=n.current)==null?void 0:s.firstChild)==null?void 0:o.remove)==null||i.call(o),(l=(a=n.current)==null?void 0:a.appendChild)==null||l.call(a,c)}}}render(){const{handleBtnUnzoomClick:t,handleDialogCancel:n,handleDialogClick:r,handleDialogClose:s,handleUnzoom:o,handleZoom:i,imgEl:a,props:{a11yNameButtonUnzoom:l,a11yNameButtonZoom:c,children:u,classDialog:f,IconUnzoom:m,IconZoom:g,isZoomed:y,wrapElement:v,ZoomContent:x,zoomImg:E,zoomMargin:T},refContent:k,refDialog:I,refModalContent:O,refModalImg:M,refWrap:P,state:{id:j,isZoomImgLoaded:V,loadedImgEl:U,modalState:z,shouldRefresh:H,styleGhost:F}}=this,G=`rmiz-modal-${j}`,X=`rmiz-modal-img-${j}`,J=J7(a),ee=DT(a),re=$_(a),ie=NFe(a),Z=jz(a),te=ee?a.sizes:void 0,oe=ee?a.srcset:void 0,Q=ee?a.crossOrigin:void 0,Te=!!(E!=null&&E.src),ge=this.hasImage(),Ce=ie?`${c}: ${ie}`:c,fe=z==="LOADING"||z==="LOADED",Fe=ge?"found":"not-found",De=z==="UNLOADED"||z==="UNLOADING"?"hidden":"visible",Re={visibility:z==="UNLOADED"?"visible":"hidden"};this.styleModalImg=ge?DFe({hasZoomImg:Te,imgSrc:Z,isSvg:re,isZoomed:y&&fe,loadedImgEl:U,offset:T,shouldRefresh:H,targetEl:a}):{};let tt=null;if(ge){const de=ee||J?Me.createElement("img",{alt:ie,crossOrigin:Q,sizes:te,src:Z,srcSet:oe,...V&&z==="LOADED"?E:{},"data-rmiz-modal-img":"",height:this.styleModalImg.height||void 0,id:X,ref:M,style:this.styleModalImg,width:this.styleModalImg.width||void 0}):re?Me.createElement("div",{"data-rmiz-modal-img":!0,ref:M,style:this.styleModalImg}):null,nt=Me.createElement("button",{"aria-label":l,"data-rmiz-btn-unzoom":"",onClick:t,type:"button"},Me.createElement(m,null));tt=x?Me.createElement(x,{buttonUnzoom:nt,modalState:z,img:de,isZoomImgLoaded:V,onUnzoom:o}):Me.createElement(Me.Fragment,null,de,nt)}return Me.createElement(v,{"aria-owns":G,"data-rmiz":"",ref:P},Me.createElement(v,{"data-rmiz-content":Fe,ref:k,style:Re},u),ge&&Me.createElement(v,{"data-rmiz-ghost":"",style:F},Me.createElement("button",{"aria-label":Ce,"data-rmiz-btn-zoom":"",onClick:i,type:"button"},Me.createElement(g,null))),ge&&ER.createPortal(Me.createElement("dialog",{"aria-labelledby":X,"aria-modal":"true",className:f,"data-rmiz-modal":"",id:G,onClick:r,onClose:s,onCancel:n,ref:I,role:"dialog"},Me.createElement("div",{"data-rmiz-modal-overlay":De}),Me.createElement("div",{"data-rmiz-modal-content":"",ref:O},tt)),this.getDialogContainer()))}componentDidMount(){this.setId(),this.setAndTrackImg(),this.handleImgLoad(),this.UNSAFE_handleSvg()}componentWillUnmount(){var t,n,r,s,o,i,a,l,c,u,f,m;this.state.modalState!=="UNLOADED"&&this.bodyScrollEnable(),(n=(t=this.contentChangeObserver)==null?void 0:t.disconnect)==null||n.call(t),(s=(r=this.contentNotFoundChangeObserver)==null?void 0:r.disconnect)==null||s.call(r),(i=(o=this.imgElResizeObserver)==null?void 0:o.disconnect)==null||i.call(o),(l=(a=this.imgEl)==null?void 0:a.removeEventListener)==null||l.call(a,"load",this.handleImgLoad),(u=(c=this.imgEl)==null?void 0:c.removeEventListener)==null||u.call(c,"click",this.handleZoom),(m=(f=this.refModalImg.current)==null?void 0:f.removeEventListener)==null||m.call(f,"transitionend",this.handleImgTransitionEnd),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),window.removeEventListener("resize",this.handleResize),document.removeEventListener("keydown",this.handleKeyDown,!0)}componentDidUpdate(t,n){this.handleModalStateChange(n.modalState),this.UNSAFE_handleSvg(),this.handleIfZoomChanged(t.isZoomed)}}Hte.defaultProps={a11yNameButtonUnzoom:"Minimize image",a11yNameButtonZoom:"Expand image",canSwipeToUnzoom:!0,IconUnzoom:TFe,IconZoom:CFe,isDisabled:!1,swipeToUnzoomThreshold:10,wrapElement:"div",zoomMargin:0};const X7=w.memo(w.forwardRef(({children:e,className:t,...n},r)=>h.jsx("div",{ref:r,className:Qe("absolute right-3 top-3 flex flex-row rounded px-0.5 opacity-0 group-hover/node-image:opacity-100","border-[0.5px] bg-[var(--mt-bg-secondary)] [backdrop-filter:saturate(1.8)_blur(20px)]",t),...n,children:e})));X7.displayName="ActionWrapper";const PT=w.memo(w.forwardRef(({icon:e,tooltip:t,className:n,...r},s)=>h.jsx(H1,{children:h.jsxs(V1,{children:[h.jsx(q1,{asChild:!0,children:h.jsx(wr,{ref:s,variant:"ghost",className:Qe("relative flex h-7 w-7 flex-row rounded-none p-0 text-muted-foreground hover:text-foreground","bg-transparent hover:bg-transparent",n),...r,children:e})}),h.jsx(cm,{side:"bottom",children:t})]})})));PT.displayName="ActionButton";const FFe=[{key:"onView",icon:h.jsx(JOe,{className:"size-4"}),tooltip:"View image"},{key:"onDownload",icon:h.jsx(LOe,{className:"size-4"}),tooltip:"Download image"},{key:"onCopy",icon:h.jsx(NOe,{className:"size-4"}),tooltip:"Copy image to clipboard"},{key:"onCopyLink",icon:h.jsx(GOe,{className:"size-4"}),tooltip:"Copy image link",isLink:!0}],Vte=w.memo(({shouldMerge:e=!1,isLink:t=!1,...n})=>{const[r,s]=w.useState(!1),o=w.useCallback((a,l)=>{a.preventDefault(),a.stopPropagation(),l==null||l()},[]),i=w.useMemo(()=>FFe.filter(a=>t||!a.isLink),[t]);return h.jsx(X7,{className:Qe({"opacity-100":r}),children:e?h.jsxs(bw,{open:r,onOpenChange:s,children:[h.jsx(yw,{asChild:!0,children:h.jsx(PT,{icon:h.jsx(Tee,{className:"size-4"}),tooltip:"Open menu",onClick:a=>a.preventDefault()})}),h.jsx(vw,{className:"w-56",align:"end",children:i.map(({key:a,icon:l,tooltip:c})=>h.jsx(au,{onClick:u=>o(u,n[a]),children:h.jsxs("div",{className:"flex flex-row items-center gap-2",children:[l,h.jsx("span",{children:c})]})},a))})]}):i.map(({key:a,icon:l,tooltip:c})=>h.jsx(PT,{icon:l,tooltip:c,onClick:u=>o(u,n[a])},a))})});Vte.displayName="ImageActions";const BFe=({editor:e,node:t,src:n,onViewClick:r})=>{const s=w.useMemo(()=>F6(n),[n]),o=w.useCallback(()=>{r(!0)},[r]),i=w.useCallback(()=>{e.commands.downloadImage({src:t.attrs.src,alt:t.attrs.alt})},[e.commands,t.attrs.alt,t.attrs.src]),a=w.useCallback(()=>{e.commands.copyImage({src:t.attrs.src})},[e.commands,t.attrs.src]),l=w.useCallback(()=>{e.commands.copyLink({src:t.attrs.src})},[e.commands,t.attrs.src]),c=w.useCallback(()=>{e.commands.command(({tr:u,dispatch:f})=>{const{selection:m}=u,g=u.doc.nodeAt(m.from);return g&&g.type.name==="image"&&f?(u.deleteSelection(),!0):!1})},[e.commands]);return{isLink:s,onView:o,onDownload:i,onCopy:a,onCopyLink:l,onRemoveImg:c}},qte=w.forwardRef(function({className:t,...n},r){return h.jsxs("svg",{ref:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:Qe("animate-spin",t),...n,children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})});qte.displayName="Spinner";const Gte=w.memo(qte),Wte=w.memo(()=>h.jsx("div",{className:Qe("flex flex-row items-center justify-center","absolute inset-0 rounded bg-[var(--mt-overlay)] opacity-100 transition-opacity"),children:h.jsx(Gte,{className:"size-7"})}));Wte.displayName="ImageOverlay";const j5=600,zFe=120,Hz=120,jFe=e=>({src:typeof e=="string"?e:e.src,id:typeof e=="string"?Fx():e.id}),UFe=({editor:e,node:t,selected:n,updateAttributes:r})=>{const{src:s,width:o,height:i,fileName:a}=t.attrs,l=w.useRef(!1),c=w.useMemo(()=>typeof s=="string"?s:s.src,[s]),[u,f]=w.useState({src:c,isServerUploading:!1,imageLoaded:!1,isZoomed:!1,error:!1,naturalSize:{width:o,height:i}}),m=w.useRef(null),[g,y]=w.useState(null),v=w.useCallback(({width:ie,height:Z})=>{r({width:ie,height:Z})},[r]),x=u.naturalSize.width/u.naturalSize.height,E=j5*x,T=m.current?parseFloat(getComputedStyle(m.current).getPropertyValue("--editor-width")):1/0,{isLink:k,onView:I,onDownload:O,onCopy:M,onCopyLink:P,onRemoveImg:j}=BFe({editor:e,node:t,src:u.src,onViewClick:ie=>f(Z=>({...Z,isZoomed:ie}))}),{currentWidth:V,currentHeight:U,updateDimensions:z,initiateResize:H,isResizing:F}=SFe({initialWidth:o??u.naturalSize.width,initialHeight:i??u.naturalSize.height,contentWidth:u.naturalSize.width,contentHeight:u.naturalSize.height,gridInterval:.1,onDimensionsChange:v,minWidth:Hz,minHeight:zFe,maxWidth:T>0?T:E}),G=w.useMemo(()=>V<=180,[V]),X=w.useCallback(ie=>{const Z=ie.target,te={width:Z.naturalWidth,height:Z.naturalHeight};f(oe=>({...oe,naturalSize:te,imageLoaded:!0})),r({width:Z.width||te.width,height:Z.height||te.height,alt:Z.alt,title:Z.title}),o||z(oe=>({...oe,width:te.width}))},[o,r,z]),J=w.useCallback(()=>{f(ie=>({...ie,error:!0,imageLoaded:!0}))},[]),ee=w.useCallback(ie=>Z=>{y(ie),H(ie)(Z)},[H]),re=w.useCallback(()=>{y(null)},[]);return w.useEffect(()=>{F||re()},[F,re]),w.useEffect(()=>{(async()=>{if(!c.startsWith("blob:")||l.current)return;l.current=!0;const Z=e.options.extensions.find(oe=>oe.name==="image"),{uploadFn:te}=(Z==null?void 0:Z.options)??{};if(!te){try{const oe=await cDe(c);f(Q=>({...Q,src:oe})),r({src:oe})}catch{f(oe=>({...oe,error:!0}))}return}try{f(fe=>({...fe,isServerUploading:!0}));const Q=await(await fetch(c)).blob(),Te=new File([Q],a,{type:Q.type}),ge=await te(Te,e),Ce=jFe(ge);f(fe=>({...fe,...Ce,isServerUploading:!1})),r(Ce)}catch{f(Q=>({...Q,error:!0,isServerUploading:!1}))}})()},[e,a,c,r]),h.jsx(xOe,{ref:m,"data-drag-handle":!0,className:"relative text-center leading-none",children:h.jsx("div",{className:"group/node-image relative mx-auto rounded-md object-contain",style:{maxWidth:`min(${E}px, 100%)`,width:V,maxHeight:j5,aspectRatio:`${u.naturalSize.width} / ${u.naturalSize.height}`},children:h.jsxs("div",{className:Qe("relative flex h-full cursor-default flex-col items-center gap-2 rounded",{"outline-primary outline outline-offset-1":n||F}),children:[h.jsxs("div",{className:"h-full contain-paint",children:[h.jsxs("div",{className:"relative h-full",children:[u.isServerUploading&&!u.error&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx(Gte,{className:"size-7"})}),u.error&&h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[h.jsx(VOe,{className:"text-destructive size-8"}),h.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"Failed to load image"})]}),h.jsx($Fe,{isZoomed:u.isZoomed,onZoomChange:()=>f(ie=>({...ie,isZoomed:!1})),children:h.jsx("img",{className:Qe("h-auto rounded object-contain transition-shadow",{"opacity-0":!u.imageLoaded||u.error}),style:{maxWidth:`min(100%, ${E}px)`,minWidth:`${Hz}px`,maxHeight:j5},width:V,height:U,src:u.src,onError:J,onLoad:X,alt:t.attrs.alt||"",title:t.attrs.title||"",id:t.attrs.id})})]}),u.isServerUploading&&h.jsx(Wte,{}),e.isEditable&&u.imageLoaded&&!u.error&&!u.isServerUploading&&h.jsxs(h.Fragment,{children:[h.jsx(J6,{onPointerDown:ee("left"),className:Qe("left-1",{hidden:F&&g==="right"}),isResizing:F&&g==="left"}),h.jsx(J6,{onPointerDown:ee("right"),className:Qe("right-1",{hidden:F&&g==="left"}),isResizing:F&&g==="right"})]})]}),u.error&&h.jsx(X7,{children:h.jsx(PT,{icon:h.jsx(rDe,{className:"size-4"}),tooltip:"Remove image",onClick:j})}),!F&&!u.error&&!u.isServerUploading&&h.jsx(Vte,{shouldMerge:G,isLink:k,onView:I,onDownload:O,onCopy:M,onCopyLink:P})]})})})},Q7=(e,t,n)=>{const r=e instanceof Error?e:new Error("Unknown error");n==null||n(r,t)},HFe=e=>{const[t,n]=e.split(","),r=t.split(":")[1].split(";")[0],s=r.split("/")[1],o=atob(n),i=new Uint8Array(o.length);for(let l=0;l<o.length;l++)i[l]=o.charCodeAt(l);return{blob:new Blob([i],{type:r}),extension:s}},VFe=async e=>{const t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch image");const n=await t.blob(),r=n.type.split(/\/|\+/)[1];return{blob:n,extension:r}},qFe=async e=>e.startsWith("data:")?HFe(e):VFe(e),GFe=async(e,t,n)=>{const r=URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download=`${t}.${n}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},WFe=async(e,t)=>{var o;const{src:n,alt:r}=e,s=r||"image";try{const{blob:i,extension:a}=await qFe(n);await GFe(i,s,a),(o=t.onActionSuccess)==null||o.call(t,{...e,action:"download"})}catch(i){Q7(i,{...e,action:"download"},t.onActionError)}},YFe=async(e,t)=>{var r;const{src:n}=e;try{const o=await(await fetch(n)).blob();await navigator.clipboard.write([new ClipboardItem({[o.type]:o})]),(r=t.onActionSuccess)==null||r.call(t,{...e,action:"copyImage"})}catch(s){Q7(s,{...e,action:"copyImage"},t.onActionError)}},KFe=async(e,t)=>{var r;const{src:n}=e;try{await navigator.clipboard.writeText(n),(r=t.onActionSuccess)==null||r.call(t,{...e,action:"copyLink"})}catch(s){Q7(s,{...e,action:"copyLink"},t.onActionError)}},ZFe=_Fe.extend({atom:!0,addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),allowedMimeTypes:[],maxFileSize:0,uploadFn:void 0,onToggle:void 0,downloadImage:void 0,copyImage:void 0,copyLink:void 0}},addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},id:{default:null},width:{default:null},height:{default:null},fileName:{default:null}}},addCommands(){return{setImages:e=>({commands:t})=>{const[n,r]=tT(e,{allowedMimeTypes:this.options.allowedMimeTypes,maxFileSize:this.options.maxFileSize,allowBase64:this.options.allowBase64});return r.length>0&&this.options.onValidationError&&this.options.onValidationError(r),n.length>0?t.insertContent(n.map(s=>{if(s.src instanceof File){const o=URL.createObjectURL(s.src),i=Fx();return{type:this.type.name,attrs:{id:i,src:o,alt:s.alt,title:s.title,fileName:s.src.name}}}else return{type:this.type.name,attrs:{id:Fx(),src:s.src,alt:s.alt,title:s.title,fileName:null}}})):!1},downloadImage:e=>()=>((this.options.downloadImage||WFe)({...e,action:"download"},this.options),!0),copyImage:e=>()=>((this.options.copyImage||YFe)({...e,action:"copyImage"},this.options),!0),copyLink:e=>()=>((this.options.copyLink||KFe)({...e,action:"copyLink"},this.options),!0),toggleImage:()=>({editor:e})=>{const t=document.createElement("input");return t.type="file",t.accept=this.options.allowedMimeTypes.join(","),t.onchange=()=>{const n=t.files;if(!n)return;const[r,s]=tT(Array.from(n),{allowedMimeTypes:this.options.allowedMimeTypes,maxFileSize:this.options.maxFileSize,allowBase64:this.options.allowBase64});return s.length>0&&this.options.onValidationError?(this.options.onValidationError(s),!1):(r.length===0||this.options.onToggle&&this.options.onToggle(e,r,e.state.selection.from),!1)},t.click(),!0}}},onTransaction({transaction:e}){e.steps.forEach(t=>{t instanceof ci&&t.slice.size===0&&e.before.content.cut(t.from,t.to).forEach(r=>{var s,o;if(r.type.name==="image"){const i=r.attrs;i.src.startsWith("blob:")&&URL.revokeObjectURL(i.src),(o=(s=this.options).onImageRemoved)==null||o.call(s,i)}})})},addNodeView(){return COe(UFe,{className:"block-node"})}});var JFe=Object.defineProperty,eM=(e,t)=>{for(var n in t)JFe(e,n,{get:t[n],enumerable:!0})};function Yte(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}var XFe=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:s}=n,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([i,a])=>[i,(...c)=>{const u=a(...c)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,i=[],a=!!e,l=e||s.tr,c=()=>(!a&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(l),i.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(n).map(([f,m])=>[f,(...y)=>{const v=this.buildProps(l,t),x=m(...y)(v);return i.push(x),u}])),run:c};return u}createCan(e){const{rawCommands:t,state:n}=this,r=!1,s=e||n.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...c)=>l(...c)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,i={tr:e,editor:r,view:o,state:Yte({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(i)]))}};return i}},Kte={};eM(Kte,{blur:()=>QFe,clearContent:()=>eBe,clearNodes:()=>tBe,command:()=>nBe,createParagraphNear:()=>rBe,cut:()=>sBe,deleteCurrentNode:()=>oBe,deleteNode:()=>iBe,deleteRange:()=>aBe,deleteSelection:()=>lBe,enter:()=>cBe,exitCode:()=>uBe,extendMarkRange:()=>fBe,first:()=>hBe,focus:()=>gBe,forEach:()=>bBe,insertContent:()=>yBe,insertContentAt:()=>wBe,joinBackward:()=>SBe,joinDown:()=>_Be,joinForward:()=>TBe,joinItemBackward:()=>CBe,joinItemForward:()=>kBe,joinTextblockBackward:()=>ABe,joinTextblockForward:()=>NBe,joinUp:()=>EBe,keyboardShortcut:()=>RBe,lift:()=>MBe,liftEmptyBlock:()=>OBe,liftListItem:()=>DBe,newlineInCode:()=>PBe,resetAttributes:()=>LBe,scrollIntoView:()=>$Be,selectAll:()=>FBe,selectNodeBackward:()=>BBe,selectNodeForward:()=>zBe,selectParentNode:()=>jBe,selectTextblockEnd:()=>UBe,selectTextblockStart:()=>HBe,setContent:()=>qBe,setMark:()=>oze,setMeta:()=>ize,setNode:()=>aze,setNodeSelection:()=>lze,setTextDirection:()=>cze,setTextSelection:()=>uze,sinkListItem:()=>dze,splitBlock:()=>fze,splitListItem:()=>hze,toggleList:()=>pze,toggleMark:()=>mze,toggleNode:()=>gze,toggleWrap:()=>bze,undoInputRule:()=>yze,unsetAllMarks:()=>vze,unsetMark:()=>xze,unsetTextDirection:()=>wze,updateAttributes:()=>Eze,wrapIn:()=>_ze,wrapInList:()=>Sze});var QFe=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),eBe=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),tBe=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:i})=>{e.doc.nodesBetween(o.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=t,f=c.resolve(u.map(l)),m=c.resolve(u.map(l+a.nodeSize)),g=f.blockRange(m);if(!g)return;const y=Lm(g);if(a.type.isTextblock){const{defaultType:v}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(g.start,v)}(y||y===0)&&t.lift(g,y)})}),!0},nBe=e=>t=>e(t),rBe=()=>({state:e,dispatch:t})=>d7(e,t),sBe=(e,t)=>({editor:n,tr:r})=>{const{state:s}=n,o=s.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const i=r.mapping.map(t);return r.insert(i,o.content),r.setSelection(new Cn(r.doc.resolve(Math.max(i-1,0)))),!0},oBe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(t){const a=s.before(o),l=s.after(o);e.delete(a,l).scrollIntoView()}return!0}return!1};function ya(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var iBe=e=>({tr:t,state:n,dispatch:r})=>{const s=ya(e,n.schema),o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const l=o.before(i),c=o.after(i);t.delete(l,c).scrollIntoView()}return!0}return!1},aBe=e=>({tr:t,dispatch:n})=>{const{from:r,to:s}=e;return n&&t.delete(r,s),!0},lBe=()=>({state:e,dispatch:t})=>EC(e,t),cBe=()=>({commands:e})=>e.keyboardShortcut("Enter"),uBe=()=>({state:e,dispatch:t})=>WX(e,t);function dBe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function LT(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(s=>n.strict?t[s]===e[s]:dBe(t[s])?t[s].test(e[s]):t[s]===e[s]):!0}function Zte(e,t,n={}){return e.find(r=>r.type===t&&LT(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function Vz(e,t,n={}){return!!Zte(e,t,n)}function tM(e,t,n){var r;if(!e||!t)return;let s=e.parent.childAfter(e.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===t))&&(s=e.parent.childBefore(e.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===t)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!Zte([...s.node.marks],t,n)))return;let i=s.index,a=e.start()+s.offset,l=i+1,c=a+s.node.nodeSize;for(;i>0&&Vz([...e.parent.child(i-1).marks],t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;l<e.parent.childCount&&Vz([...e.parent.child(l).marks],t,n);)c+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function G0(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var fBe=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const o=G0(e,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(s){const f=tM(l,o,t);if(f&&f.from<=c&&f.to>=u){const m=Cn.create(i,f.from,f.to);n.setSelection(m)}}return!0},hBe=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function Jte(e){return e instanceof Cn}function Kp(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function pBe(e,t=null){if(!t)return null;const n=Dn.atStart(e),r=Dn.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const s=n.from,o=r.to;return t==="all"?Cn.create(e,Kp(0,s,o),Kp(e.content.size,s,o)):Cn.create(e,Kp(t,s,o),Kp(t,s,o))}function mBe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function nM(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var gBe=(e=null,t={})=>({editor:n,view:r,tr:s,dispatch:o})=>{t={scrollIntoView:!0,...t};const i=()=>{(nM()||mBe())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(o&&e===null&&!Jte(n.state.selection))return i(),!0;const a=pBe(s.doc,e)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0},bBe=(e,t)=>n=>e.every((r,s)=>t(r,{...n,index:s})),yBe=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),Xte=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&Xte(r)}return e};function V2(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return Xte(n)}function jx(e,t,n){if(e instanceof Ff||e instanceof pt)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,s=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return pt.fromArray(e.map(a=>t.nodeFromJSON(a)));const i=t.nodeFromJSON(e);return n.errorOnInvalidContent&&i.check(),i}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",o),jx("",t,n)}if(s){if(n.errorOnInvalidContent){let i=!1,a="";const l=new J8({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?g0.fromSchema(l).parseSlice(V2(e),n.parseOptions):g0.fromSchema(l).parse(V2(e),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=g0.fromSchema(t);return n.slice?o.parseSlice(V2(e),n.parseOptions).content:o.parse(V2(e),n.parseOptions)}return jx("",t,n)}function vBe(e,t,n){const r=e.steps.length-1;if(r<t)return;const s=e.steps[r];if(!(s instanceof ci||s instanceof Ai))return;const o=e.mapping.maps[r];let i=0;o.forEach((a,l,c,u)=>{i===0&&(i=u)}),e.setSelection(Dn.near(e.doc.resolve(i),n))}var xBe=e=>!("type"in e),wBe=(e,t,n)=>({tr:r,dispatch:s,editor:o})=>{var i;if(s){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=x=>{o.emit("contentError",{editor:o,error:x,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{jx(t,o.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(x){l(x)}try{a=jx(t,o.schema,{parseOptions:c,errorOnInvalidContent:(i=n.errorOnInvalidContent)!=null?i:o.options.enableContentCheck})}catch(x){return l(x),!1}let{from:u,to:f}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},m=!0,g=!0;if((xBe(a)?a:[a]).forEach(x=>{x.check(),m=m?x.isText&&x.marks.length===0:!1,g=g?x.isBlock:!1}),u===f&&g){const{parent:x}=r.doc.resolve(u);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(u-=1,f+=1)}let v;if(m){if(Array.isArray(t))v=t.map(x=>x.text||"").join("");else if(t instanceof pt){let x="";t.forEach(E=>{E.text&&(x+=E.text)}),v=x}else typeof t=="object"&&t&&t.text?v=t.text:v=t;r.insertText(v,u,f)}else{v=a;const x=r.doc.resolve(u),E=x.node(),T=x.parentOffset===0,k=E.isText||E.isTextblock,I=E.content.size>0;T&&k&&I&&(u=Math.max(0,u-1)),r.replaceWith(u,f,v)}n.updateSelection&&vBe(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:v}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:v})}return!0},EBe=()=>({state:e,dispatch:t})=>VX(e,t),_Be=()=>({state:e,dispatch:t})=>qX(e,t),SBe=()=>({state:e,dispatch:t})=>r7(e,t),TBe=()=>({state:e,dispatch:t})=>i7(e,t),CBe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Nb(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},kBe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Nb(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},ABe=()=>({state:e,dispatch:t})=>zX(e,t),NBe=()=>({state:e,dispatch:t})=>jX(e,t);function Qte(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function IBe(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))nM()||Qte()?i=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var RBe=e=>({editor:t,view:n,tr:r,dispatch:s})=>{const o=IBe(e).split(/-(?!$)/),i=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function rM(e,t,n={}){const{from:r,to:s,empty:o}=e.selection,i=t?ya(t,e.schema):null,a=[];e.doc.nodesBetween(r,s,(f,m)=>{if(f.isText)return;const g=Math.max(r,m),y=Math.min(s,m+f.nodeSize);a.push({node:f,from:g,to:y})});const l=s-r,c=a.filter(f=>i?i.name===f.node.type.name:!0).filter(f=>LT(f.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((f,m)=>f+m.to-m.from,0)>=l}var MBe=(e,t={})=>({state:n,dispatch:r})=>{const s=ya(e,n.schema);return rM(n,s,t)?GX(n,r):!1},OBe=()=>({state:e,dispatch:t})=>f7(e,t),DBe=e=>({state:t,dispatch:n})=>{const r=ya(e,t.schema);return tQ(r)(t,n)},PBe=()=>({state:e,dispatch:t})=>c7(e,t);function ene(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function qz(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,s)=>(n.includes(s)||(r[s]=e[s]),r),{})}var LBe=(e,t)=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=ene(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(o=ya(e,r.schema)),a==="mark"&&(i=G0(e,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,f)=>{o&&o===u.type&&(l=!0,s&&n.setNodeMarkup(f,void 0,qz(u.attrs,t))),i&&u.marks.length&&u.marks.forEach(m=>{i===m.type&&(l=!0,s&&n.addMark(f,f+u.nodeSize,i.create(qz(m.attrs,t))))})})}),l},$Be=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),FBe=()=>({tr:e,dispatch:t})=>{if(t){const n=new hl(e.doc);e.setSelection(n)}return!0},BBe=()=>({state:e,dispatch:t})=>s7(e,t),zBe=()=>({state:e,dispatch:t})=>a7(e,t),jBe=()=>({state:e,dispatch:t})=>YX(e,t),UBe=()=>({state:e,dispatch:t})=>XX(e,t),HBe=()=>({state:e,dispatch:t})=>JX(e,t);function VBe(e,t,n={},r={}){return jx(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var qBe=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:o,dispatch:i,commands:a})=>{const{doc:l}=o;if(r.preserveWhitespace!=="full"){const c=VBe(e,s.schema,r,{errorOnInvalidContent:t??s.options.enableContentCheck});return i&&o.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return i&&o.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:t??s.options.enableContentCheck})};function GBe(e,t){const n=G0(t,e.schema),{from:r,to:s,empty:o}=e.selection,i=[];o?(e.storedMarks&&i.push(...e.storedMarks),i.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,s,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function WBe(e,t){const n=new t7(e);return t.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function YBe(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function KBe(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function sM(e){return t=>KBe(t.$from,e)}function Ux(e,t,n){return e.config[t]===void 0&&e.parent?Ux(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?Ux(e.parent,t,n):null}):e.config[t]}function ZBe(e){return typeof e=="function"}function X6(e,t=void 0,...n){return ZBe(e)?t?e.bind(t)(...n):e(...n):e}function tne(e){const t=e.filter(s=>s.type==="extension"),n=e.filter(s=>s.type==="node"),r=e.filter(s=>s.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function JBe(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const a=o?String(o).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[f,m]=u.split(":").map(g=>g.trim());c.set(f,m)}),a.forEach(u=>{const[f,m]=u.split(":").map(g=>g.trim());c.set(f,m)}),r[s]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[s]=o}),r},{})}function XBe(e,t,n){const{from:r,to:s}=t,{blockSeparator:o=`

`,textSerializers:i={}}=n||{};let a="";return e.nodesBetween(r,s,(l,c,u,f)=>{var m;l.isBlock&&c>r&&(a+=o);const g=i==null?void 0:i[l.type.name];if(g)return u&&(a+=g({node:l,pos:c,parent:u,index:f,range:t})),!1;l.isText&&(a+=(m=l==null?void 0:l.text)==null?void 0:m.slice(Math.max(r,c)-c,s-c))}),a}function QBe(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function eze(e,t=JSON.stringify){const n={};return e.filter(r=>{const s=t(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function tze(e){const t=eze(e);return t.length===1?t:t.filter((n,r)=>!t.filter((o,i)=>i!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function nze(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((s,o)=>{const i=[];if(s.ranges.length)s.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[o];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=t.slice(o).map(a,-1),u=t.slice(o).map(l),f=t.invert().map(c,-1),m=t.invert().map(u);r.push({oldRange:{from:f,to:m},newRange:{from:c,to:u}})})}),tze(r)}function F_(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=e.find(o=>o.type===t&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}function rze(e,t,n={}){const{empty:r,ranges:s}=e.selection,o=t?G0(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>LT(f.attrs,n,{strict:!1}));let i=0;const a=[];if(s.forEach(({$from:f,$to:m})=>{const g=f.pos,y=m.pos;e.doc.nodesBetween(g,y,(v,x)=>{if(!v.isText&&!v.marks.length)return;const E=Math.max(g,x),T=Math.min(y,x+v.nodeSize),k=T-E;i+=k,a.push(...v.marks.map(I=>({mark:I,from:E,to:T})))})}),i===0)return!1;const l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>LT(f.mark.attrs,n,{strict:!1})).reduce((f,m)=>f+m.to-m.from,0),c=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,m)=>f+m.to-m.from,0);return(l>0?l+c:l)>=i}function Gz(e,t){const{nodeExtensions:n}=tne(t),r=n.find(i=>i.name===e);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=X6(Ux(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function nne(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let s=!0;return e.content.forEach(o=>{s!==!1&&(nne(o,{ignoreWhitespace:n,checkChildren:t})||(s=!1))}),s}return!1}function sze(e,t,n){var r;const{selection:s}=t;let o=null;if(Jte(s)&&(o=s.$cursor),o){const a=(r=e.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:i}=s;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(u,f,m)=>{if(c)return!1;if(u.isInline){const g=!m||m.type.allowsMarkType(n),y=!!n.isInSet(u.marks)||!u.marks.some(v=>v.type.excludes(n));c=g&&y}return!c}),c})}var oze=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:i,ranges:a}=o,l=G0(e,r.schema);if(s)if(i){const c=GBe(r,l);n.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(m,g)=>{const y=Math.max(g,u),v=Math.min(g+m.nodeSize,f);m.marks.find(E=>E.type===l)?m.marks.forEach(E=>{l===E.type&&n.addMark(y,v,l.create({...E.attrs,...t}))}):n.addMark(y,v,l.create(t))})});return sze(r,n,l)},ize=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),aze=(e,t={})=>({state:n,dispatch:r,chain:s})=>{const o=ya(e,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:a})=>WS(o,{...i,...t})(n)?!0:a.clearNodes()).command(({state:a})=>WS(o,{...i,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},lze=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,s=Kp(e,0,r.content.size),o=kn.create(r,s);t.setSelection(o)}return!0},cze=(e,t)=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=r;let i,a;return typeof t=="number"?(i=t,a=t):t&&"from"in t&&"to"in t?(i=t.from,a=t.to):(i=o.from,a=o.to),s&&n.doc.nodesBetween(i,a,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:e})}),!0},uze=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:s,to:o}=typeof e=="number"?{from:e,to:e}:e,i=Cn.atStart(r).from,a=Cn.atEnd(r).to,l=Kp(s,i,a),c=Kp(o,i,a),u=Cn.create(r,l,c);t.setSelection(u)}return!0},dze=e=>({state:t,dispatch:n})=>{const r=ya(e,t.schema);return nQ(r)(t,n)};function Wz(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(s=>t==null?void 0:t.includes(s.type.name));e.tr.ensureMarks(r)}}var fze=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:i}=t,{$from:a,$to:l}=o,c=s.extensionManager.attributes,u=F_(c,a.node().type.name,a.node().attrs);if(o instanceof kn&&o.node.isBlock)return!a.parentOffset||!Yl(i,a.pos)?!1:(r&&(e&&Wz(n,s.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,m=a.depth===0?void 0:YBe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let g=f&&m?[{type:m,attrs:u}]:void 0,y=Yl(t.doc,t.mapping.map(a.pos),1,g);if(!g&&!y&&Yl(t.doc,t.mapping.map(a.pos),1,m?[{type:m}]:void 0)&&(y=!0,g=m?[{type:m,attrs:u}]:void 0),r){if(y&&(o instanceof Cn&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,g),m&&!f&&!a.parentOffset&&a.parent.type!==m)){const v=t.mapping.map(a.before()),x=t.doc.resolve(v);a.node(-1).canReplaceWith(x.index(),x.index()+1,m)&&t.setNodeMarkup(t.mapping.map(a.before()),m)}e&&Wz(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return y},hze=(e,t={})=>({tr:n,state:r,dispatch:s,editor:o})=>{var i;const a=ya(e,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const m=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let E=pt.empty;const T=l.index(-1)?1:l.index(-2)?2:3;for(let j=l.depth-T;j>=l.depth-3;j-=1)E=pt.from(l.node(j).copy(E));const k=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,I={...F_(m,l.node().type.name,l.node().attrs),...t},O=((i=a.contentMatch.defaultType)==null?void 0:i.createAndFill(I))||void 0;E=E.append(pt.from(a.createAndFill(null,O)||void 0));const M=l.before(l.depth-(T-1));n.replace(M,l.after(-k),new Yt(E,4-T,0));let P=-1;n.doc.nodesBetween(M,n.doc.content.size,(j,V)=>{if(P>-1)return!1;j.isTextblock&&j.content.size===0&&(P=V+1)}),P>-1&&n.setSelection(Cn.near(n.doc.resolve(P))),n.scrollIntoView()}return!0}const g=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,y={...F_(m,f.type.name,f.attrs),...t},v={...F_(m,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const x=g?[{type:a,attrs:y},{type:g,attrs:v}]:[{type:a,attrs:y}];if(!Yl(n.doc,l.pos,2))return!1;if(s){const{selection:E,storedMarks:T}=r,{splittableMarks:k}=o.extensionManager,I=T||E.$to.parentOffset&&E.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!I||!s)return!0;const O=I.filter(M=>k.includes(M.type.name));n.ensureMarks(O)}return!0},U5=(e,t)=>{const n=sM(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Sd(e.doc,n.pos)&&e.join(n.pos),!0},H5=(e,t)=>{const n=sM(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Sd(e.doc,r)&&e.join(r),!0},pze=(e,t,n,r={})=>({editor:s,tr:o,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:m}=s.extensionManager,g=ya(e,i.schema),y=ya(t,i.schema),{selection:v,storedMarks:x}=i,{$from:E,$to:T}=v,k=E.blockRange(T),I=x||v.$to.parentOffset&&v.$from.marks();if(!k)return!1;const O=sM(M=>Gz(M.type.name,f))(v);if(k.depth>=1&&O&&k.depth-O.depth<=1){if(O.node.type===g)return c.liftListItem(y);if(Gz(O.node.type.name,f)&&g.validContent(O.node.content)&&a)return l().command(()=>(o.setNodeMarkup(O.pos,g),!0)).command(()=>U5(o,g)).command(()=>H5(o,g)).run()}return!n||!I||!a?l().command(()=>u().wrapInList(g,r)?!0:c.clearNodes()).wrapInList(g,r).command(()=>U5(o,g)).command(()=>H5(o,g)).run():l().command(()=>{const M=u().wrapInList(g,r),P=I.filter(j=>m.includes(j.type.name));return o.ensureMarks(P),M?!0:c.clearNodes()}).wrapInList(g,r).command(()=>U5(o,g)).command(()=>H5(o,g)).run()},mze=(e,t={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,i=G0(e,r.schema);return rze(r,i,t)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,t)},gze=(e,t,n={})=>({state:r,commands:s})=>{const o=ya(e,r.schema),i=ya(t,r.schema),a=rM(r,o,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(i,l):s.setNode(o,{...l,...n})},bze=(e,t={})=>({state:n,commands:r})=>{const s=ya(e,n.schema);return rM(n,s,t)?r.lift(s):r.wrapIn(s,t)},yze=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(e))){if(t){const i=e.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,e.schema.text(o.text,l))}else i.delete(o.from,o.to)}return!0}}return!1},vze=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:s}=n;return r||t&&s.forEach(o=>{e.removeMark(o.$from.pos,o.$to.pos)}),!0},xze=(e,t={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=t,{selection:a}=n,l=G0(e,r.schema),{$from:c,empty:u,ranges:f}=a;if(!s)return!0;if(u&&i){let{from:m,to:g}=a;const y=(o=c.marks().find(x=>x.type===l))==null?void 0:o.attrs,v=tM(c,l,y);v&&(m=v.from,g=v.to),n.removeMark(m,g,l)}else f.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,l)});return n.removeStoredMark(l),!0},wze=e=>({tr:t,state:n,dispatch:r})=>{const{selection:s}=n;let o,i;return typeof e=="number"?(o=e,i=e):e&&"from"in e&&"to"in e?(o=e.from,i=e.to):(o=s.from,i=s.to),r&&t.doc.nodesBetween(o,i,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,t.setNodeMarkup(l,void 0,c)}),!0},Eze=(e,t={})=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=ene(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(o=ya(e,r.schema)),a==="mark"&&(i=G0(e,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;let m,g,y,v;n.selection.empty?r.doc.nodesBetween(u,f,(x,E)=>{o&&o===x.type&&(l=!0,y=Math.max(E,u),v=Math.min(E+x.nodeSize,f),m=E,g=x)}):r.doc.nodesBetween(u,f,(x,E)=>{E<u&&o&&o===x.type&&(l=!0,y=Math.max(E,u),v=Math.min(E+x.nodeSize,f),m=E,g=x),E>=u&&E<=f&&(o&&o===x.type&&(l=!0,s&&n.setNodeMarkup(E,void 0,{...x.attrs,...t})),i&&x.marks.length&&x.marks.forEach(T=>{if(i===T.type&&(l=!0,s)){const k=Math.max(E,u),I=Math.min(E+x.nodeSize,f);n.addMark(k,I,i.create({...T.attrs,...t}))}}))}),g&&(m!==void 0&&s&&n.setNodeMarkup(m,void 0,{...g.attrs,...t}),i&&g.marks.length&&g.marks.forEach(x=>{i===x.type&&s&&n.addMark(y,v,i.create({...x.attrs,...t}))}))}),l},_ze=(e,t={})=>({state:n,dispatch:r})=>{const s=ya(e,n.schema);return QX(s,t)(n,r)},Sze=(e,t={})=>({state:n,dispatch:r})=>{const s=ya(e,n.schema);return eQ(s,t)(n,r)};function Tze(e){return Object.prototype.toString.call(e).slice(8,-1)}function q2(e){return Tze(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function rne(e,t){const n={...e};return q2(e)&&q2(t)&&Object.keys(t).forEach(r=>{q2(t[r])&&q2(e[r])?n[r]=rne(e[r],t[r]):n[r]=t[r]}),n}var Cze=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...X6(Ux(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...X6(Ux(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>rne(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},kze={};eM(kze,{ClipboardTextSerializer:()=>Aze,Commands:()=>Nze,Delete:()=>Ize,Drop:()=>Rze,Editable:()=>Mze,FocusEvents:()=>Oze,Keymap:()=>Dze,Paste:()=>Pze,Tabindex:()=>Lze,TextDirection:()=>$ze,focusEventsPluginKey:()=>one});var vl=class sne extends Cze{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new sne(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},Aze=vl.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ir({key:new Br("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:s}=t,{ranges:o}=s,i=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=QBe(n);return XBe(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Nze=vl.create({name:"commands",addCommands(){return{...Kte}}}),Ize=vl.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,s;const o=()=>{var i,a,l,c;if((c=(l=(a=(i=this.editor.options.coreExtensionOptions)==null?void 0:i.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,e))!=null?c:e.getMeta("y-sync$"))return;const u=WBe(e.before,[e,...t]);nze(u).forEach(g=>{u.mapping.mapResult(g.oldRange.from).deletedAfter&&u.mapping.mapResult(g.oldRange.to).deletedBefore&&u.before.nodesBetween(g.oldRange.from,g.oldRange.to,(y,v)=>{const x=v+y.nodeSize-2,E=g.oldRange.from<=v&&x<=g.oldRange.to;this.editor.emit("delete",{type:"node",node:y,from:v,to:x,newFrom:u.mapping.map(v),newTo:u.mapping.map(x),deletedRange:g.oldRange,newRange:g.newRange,partial:!E,editor:this.editor,transaction:e,combinedTransform:u})})});const m=u.mapping;u.steps.forEach((g,y)=>{var v,x;if(g instanceof kc){const E=m.slice(y).map(g.from,-1),T=m.slice(y).map(g.to),k=m.invert().map(E,-1),I=m.invert().map(T),O=(v=u.doc.nodeAt(E-1))==null?void 0:v.marks.some(P=>P.eq(g.mark)),M=(x=u.doc.nodeAt(T))==null?void 0:x.marks.some(P=>P.eq(g.mark));this.editor.emit("delete",{type:"mark",mark:g.mark,from:g.from,to:g.to,deletedRange:{from:k,to:I},newRange:{from:E,to:T},partial:!!(M||O),editor:this.editor,transaction:e,combinedTransform:u})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(o,0):o()}}),Rze=vl.create({name:"drop",addProseMirrorPlugins(){return[new Ir({key:new Br("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),Mze=vl.create({name:"editable",addProseMirrorPlugins(){return[new Ir({key:new Br("editable"),props:{editable:()=>this.editor.options.editable}})]}}),one=new Br("focusEvents"),Oze=vl.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Ir({key:one,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Dze=vl.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:m,parent:g}=f,y=f.parent.isTextblock&&m>0?a.doc.resolve(m-1):f,v=y.parent.type.spec.isolating,x=f.pos-f.parentOffset,E=v&&y.parent.childCount===1?x===f.pos:Dn.atStart(c).from===m;return!u||!g.type.isTextblock||g.textContent.length||!E||E&&f.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return nM()||Qte()?o:s},addProseMirrorPlugins(){return[new Ir({key:new Br("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(v=>v.getMeta("composition")))return;const r=e.some(v=>v.docChanged)&&!t.doc.eq(n.doc),s=e.some(v=>v.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:i,to:a}=t.selection,l=Dn.atStart(t.doc).from,c=Dn.atEnd(t.doc).to;if(o||!(i===l&&a===c)||!nne(n.doc))return;const m=n.tr,g=Yte({state:n,transaction:m}),{commands:y}=new XFe({editor:this.editor,state:g});if(y.clearNodes(),!!m.steps.length)return m}})]}}),Pze=vl.create({name:"paste",addProseMirrorPlugins(){return[new Ir({key:new Br("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),Lze=vl.create({name:"tabindex",addProseMirrorPlugins(){return[new Ir({key:new Br("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),$ze=vl.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=tne(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new Ir({key:new Br("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),Fze={};eM(Fze,{createAtomBlockMarkdownSpec:()=>Bze,createBlockMarkdownSpec:()=>zze,createInlineMarkdownSpec:()=>Hze,parseAttributes:()=>oM,parseIndentedBlocks:()=>Vze,renderNestedMarkdownContent:()=>qze,serializeAttributes:()=>iM});function oM(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const c=s.map(u=>u.trim().slice(1));t.class=c.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(t.id=o[1]);const i=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(i)).forEach(([,c,u])=>{var f;const m=parseInt(((f=u.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),g=n[m];g&&(t[c]=g.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(t[u]=!0)}),t}function iM(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function Bze(e){const{nodeName:t,name:n,parseAttributes:r=oM,serializeAttributes:s=iM,defaultAttributes:o={},requiredAttributes:i=[],allowedAttributes:a}=e,l=n||t,c=u=>{if(!a)return u;const f={};return a.forEach(m=>{m in u&&(f[m]=u[m])}),f};return{parseMarkdown:(u,f)=>{const m={...o,...u.attributes};return f.createNode(t,m,[])},markdownTokenizer:{name:t,level:"block",start(u){var f;const m=new RegExp(`^:::${l}(?:\\s|$)`,"m"),g=(f=u.match(m))==null?void 0:f.index;return g!==void 0?g:-1},tokenize(u,f,m){const g=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),y=u.match(g);if(!y)return;const v=y[1]||"",x=r(v);if(!i.find(T=>!(T in x)))return{type:t,raw:y[0],attributes:x}}},renderMarkdown:u=>{const f=c(u.attrs||{}),m=s(f),g=m?` {${m}}`:"";return`:::${l}${g} :::`}}}function zze(e){const{nodeName:t,name:n,getContent:r,parseAttributes:s=oM,serializeAttributes:o=iM,defaultAttributes:i={},content:a="block",allowedAttributes:l}=e,c=n||t,u=f=>{if(!l)return f;const m={};return l.forEach(g=>{g in f&&(m[g]=f[g])}),m};return{parseMarkdown:(f,m)=>{let g;if(r){const v=r(f);g=typeof v=="string"?[{type:"text",text:v}]:v}else a==="block"?g=m.parseChildren(f.tokens||[]):g=m.parseInline(f.tokens||[]);const y={...i,...f.attributes};return m.createNode(t,y,g)},markdownTokenizer:{name:t,level:"block",start(f){var m;const g=new RegExp(`^:::${c}`,"m"),y=(m=f.match(g))==null?void 0:m.index;return y!==void 0?y:-1},tokenize(f,m,g){var y;const v=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),x=f.match(v);if(!x)return;const[E,T=""]=x,k=s(T);let I=1;const O=E.length;let M="";const P=/^:::([\w-]*)(\s.*)?/gm,j=f.slice(O);for(P.lastIndex=0;;){const V=P.exec(j);if(V===null)break;const U=V.index,z=V[1];if(!((y=V[2])!=null&&y.endsWith(":::"))){if(z)I+=1;else if(I-=1,I===0){const H=j.slice(0,U);M=H.trim();const F=f.slice(0,O+U+V[0].length);let G=[];if(M)if(a==="block")for(G=g.blockTokens(H),G.forEach(X=>{X.text&&(!X.tokens||X.tokens.length===0)&&(X.tokens=g.inlineTokens(X.text))});G.length>0;){const X=G[G.length-1];if(X.type==="paragraph"&&(!X.text||X.text.trim()===""))G.pop();else break}else G=g.inlineTokens(M);return{type:t,raw:F,attributes:k,content:M,tokens:G}}}}}},renderMarkdown:(f,m)=>{const g=u(f.attrs||{}),y=o(g),v=y?` {${y}}`:"",x=m.renderChildren(f.content||[],`

`);return`:::${c}${v}

${x}

:::`}}}function jze(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,s,o,i]=r;t[s]=o||i,r=n.exec(e)}return t}function Uze(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function Hze(e){const{nodeName:t,name:n,getContent:r,parseAttributes:s=jze,serializeAttributes:o=Uze,defaultAttributes:i={},selfClosing:a=!1,allowedAttributes:l}=e,c=n||t,u=m=>{if(!l)return m;const g={};return l.forEach(y=>{const v=typeof y=="string"?y:y.name,x=typeof y=="string"?void 0:y.skipIfDefault;if(v in m){const E=m[v];if(x!==void 0&&E===x)return;g[v]=E}}),g},f=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(m,g)=>{const y={...i,...m.attributes};if(a)return g.createNode(t,y);const v=r?r(m):m.content||"";return v?g.createNode(t,y,[g.createTextNode(v)]):g.createNode(t,y,[])},markdownTokenizer:{name:t,level:"inline",start(m){const g=a?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),y=m.match(g),v=y==null?void 0:y.index;return v!==void 0?v:-1},tokenize(m,g,y){const v=a?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),x=m.match(v);if(!x)return;let E="",T="";if(a){const[,I]=x;T=I}else{const[,I,O]=x;T=I,E=O||""}const k=s(T.trim());return{type:t,raw:x[0],content:E.trim(),attributes:k}}},renderMarkdown:m=>{let g="";r?g=r(m):m.content&&m.content.length>0&&(g=m.content.filter(E=>E.type==="text").map(E=>E.text).join(""));const y=u(m.attrs||{}),v=o(y),x=v?` ${v}`:"";return a?`[${c}${x}]`:`[${c}${x}]${g}[/${c}]`}}}function Vze(e,t,n){var r,s,o,i;const a=e.split(`
`),l=[];let c="",u=0;const f=t.baseIndentSize||2;for(;u<a.length;){const m=a[u],g=m.match(t.itemPattern);if(!g){if(l.length>0)break;if(m.trim()===""){u+=1,c=`${c}${m}
`;continue}else return}const y=t.extractItemData(g),{indentLevel:v,mainContent:x}=y;c=`${c}${m}
`;const E=[x];for(u+=1;u<a.length;){const O=a[u];if(O.trim()===""){const P=a.slice(u+1).findIndex(U=>U.trim()!=="");if(P===-1)break;if((((s=(r=a[u+1+P].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>v){E.push(O),c=`${c}${O}
`,u+=1;continue}else break}if((((i=(o=O.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:i.length)||0)>v)E.push(O),c=`${c}${O}
`,u+=1;else break}let T;const k=E.slice(1);if(k.length>0){const O=k.map(M=>M.slice(v+f)).join(`
`);O.trim()&&(t.customNestedParser?T=t.customNestedParser(O):T=n.blockTokens(O))}const I=t.createToken(y,T);l.push(I)}if(l.length!==0)return{items:l,raw:c}}function qze(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const s=typeof n=="function"?n(r):n,[o,...i]=e.content,a=t.renderChildren([o]),l=[`${s}${a}`];return i&&i.length>0&&i.forEach(c=>{const u=t.renderChildren([c]);if(u){const f=u.split(`
`).map(m=>m?t.indent(m):"").join(`
`);l.push(f)}}),l.join(`
`)}const Gze=CPe.extend({inclusive:!1,parseHTML(){return[{tag:'a[href]:not([data-type="button"]):not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:e}){return["a",JBe(this.options.HTMLAttributes,e),0]},addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),openOnClick:!1,HTMLAttributes:{class:"link"}}},addProseMirrorPlugins(){var t;const{editor:e}=this;return[...((t=this.parent)==null?void 0:t.call(this))||[],new Ir({props:{handleKeyDown:(n,r)=>{const{selection:s}=e.state;return r.key==="Escape"&&s.empty!==!0&&e.commands.focus(s.to,{scrollIntoView:!1}),!1},handleClick(n,r){const{schema:s,doc:o,tr:i}=n.state,a=tM(o.resolve(r),s.marks.link);if(!a)return;const{from:l,to:c}=a,u=Math.min(l,c),f=Math.max(l,c);if(r<u||r>f)return;const m=o.resolve(u),g=o.resolve(f),y=i.setSelection(new Cn(m,g));n.dispatch(y)}}})]}}),Wze=vl.create({name:"selection",addProseMirrorPlugins(){const{editor:e}=this;return[new Ir({key:new Br("selection"),props:{decorations(t){return t.selection.empty||e.isFocused===!0||!e.isEditable?null:io.create(t.doc,[sa.inline(t.selection.from,t.selection.to,{class:"selection"})])}}})]}}),Yze=vl.create({addKeyboardShortcuts(){return{"Mod-\\":()=>this.editor.commands.unsetAllMarks()}}}),Kze=vl.create({name:"resetMarksOnEnter",addKeyboardShortcuts(){return{Enter:({editor:e})=>e.isActive("bold")||e.isActive("italic")||e.isActive("strike")||e.isActive("underline")||e.isActive("code")?(e.commands.splitBlock({keepMarks:!1}),!0):!1}}}),Zze=e=>{const{key:t,editor:n,onPaste:r,onDrop:s,onValidationError:o,allowedMimeTypes:i,maxFileSize:a}=e;return new Ir({key:t||new Br("fileHandler"),props:{handleDrop(l,c){c.preventDefault(),c.stopPropagation();const{dataTransfer:u}=c;if(!(u!=null&&u.files.length))return;const f=l.posAtCoords({left:c.clientX,top:c.clientY}),[m,g]=tT(Array.from(u.files),{allowedMimeTypes:i,maxFileSize:a,allowBase64:e.allowBase64});g.length>0&&o&&o(g),m.length>0&&s&&s(n,m,(f==null?void 0:f.pos)??0)},handlePaste(l,c){c.preventDefault(),c.stopPropagation();const{clipboardData:u}=c;if(!(u!=null&&u.files.length))return;const[f,m]=tT(Array.from(u.files),{allowedMimeTypes:i,maxFileSize:a,allowBase64:e.allowBase64}),g=u.getData("text/html");m.length>0&&o&&o(m),f.length>0&&r&&r(n,f,g)}}})},Jze=vl.create({name:"fileHandler",addOptions(){return{allowBase64:!1,allowedMimeTypes:[],maxFileSize:0}},addProseMirrorPlugins(){return[Zze({key:new Br(this.name),editor:this.editor,...this.options})]}});function Xze(e,t){const n=w.useRef(Date.now()),r=w.useRef(null);return w.useCallback((...s)=>{(()=>{Date.now()-n.current>=t?(e(...s),n.current=Date.now()):(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{e(...s),n.current=Date.now()},t-(Date.now()-n.current)))})()},[e,t])}const Qze=e=>[hLe.configure({horizontalRule:!1,codeBlock:!1,paragraph:{HTMLAttributes:{class:"text-node"}},heading:{HTMLAttributes:{class:"heading-node"}},blockquote:{HTMLAttributes:{class:"block-node"}},bulletList:{HTMLAttributes:{class:"list-node"}},orderedList:{HTMLAttributes:{class:"list-node"}},code:{HTMLAttributes:{class:"inline",spellcheck:"false"}},dropcursor:{width:2,class:"ProseMirror-dropcursor border"}}),Gze,pte,ZFe.configure({allowedMimeTypes:["image/*"],maxFileSize:5*1024*1024,allowBase64:!0,uploadFn:async t=>{await new Promise(r=>setTimeout(r,3e3));const n=await k5(t);return{id:Fx(),src:n}},onToggle(t,n,r){t.commands.insertContentAt(r,n.map(s=>{const o=URL.createObjectURL(s);return{type:"image",attrs:{id:Fx(),src:o,alt:s.name,title:s.name,fileName:s.name}}}))},onImageRemoved({id:t,src:n}){},onValidationError(t){t.forEach(n=>{Bi.error("Image validation error",{position:"bottom-right",description:n.reason})})},onActionSuccess({action:t}){const n={copyImage:"Copy Image",copyLink:"Copy Link",download:"Download"};Bi.success(n[t],{position:"bottom-right",description:"Image action success"})},onActionError(t,{action:n}){const r={copyImage:"Copy Image",copyLink:"Copy Link",download:"Download"};Bi.error(`Failed to ${r[n]}`,{position:"bottom-right",description:t.message})}}),Jze.configure({allowBase64:!0,allowedMimeTypes:["image/*"],maxFileSize:5*1024*1024,onDrop:(t,n,r)=>{n.forEach(async s=>{const o=await k5(s);t.commands.insertContentAt(r,{type:"image",attrs:{src:o}})})},onPaste:(t,n)=>{n.forEach(async r=>{const s=await k5(r);t.commands.insertContent({type:"image",attrs:{src:s}})})},onValidationError:t=>{t.forEach(n=>{Bi.error("Image validation error",{position:"bottom-right",description:n.reason})})}}),xFe,wte,Wze,LLe,Yze,wFe,Kze,vFe,uLe.configure({placeholder:()=>e})],eje=({value:e,output:t="html",placeholder:n="",editorClassName:r,throttleDelay:s=0,onUpdate:o,onBlur:i,...a})=>{const l=Xze(g=>o==null?void 0:o(g),s),c=w.useCallback(g=>l(cz(g,t)),[t,l]),u=w.useCallback(g=>{e&&g.isEmpty&&g.commands.setContent(e)},[e]),f=w.useCallback(g=>i==null?void 0:i(cz(g,t)),[t,i]);return yOe({extensions:Qze(n),editorProps:{attributes:{autocomplete:"off",autocorrect:"off",autocapitalize:"off",class:Qe("focus:outline-hidden",r)}},onUpdate:({editor:g})=>c(g),onCreate:({editor:g})=>u(g),onBlur:({editor:g})=>f(g),...a})},tje={top:0,left:0,bottom:0,right:0,x:0,y:0,width:0,height:0,toJSON:()=>"{}"};function nje(e){const[t,n]=w.useState(()=>(e==null?void 0:e.getBoundingClientRect())??tje),r=w.useCallback(()=>{if(!e)return;const s=e.getBoundingClientRect();n(o=>Math.round(o.width)===Math.round(s.width)&&Math.round(o.height)===Math.round(s.height)&&Math.round(o.x)===Math.round(s.x)&&Math.round(o.y)===Math.round(s.y)?o:s)},[e]);return w.useEffect(()=>{if(!e)return;const s=new ResizeObserver(r);return s.observe(e),window.addEventListener("click",r),window.addEventListener("resize",r),()=>{s.disconnect(),window.removeEventListener("click",r),window.removeEventListener("resize",r)}},[e,r]),t}const ine=w.forwardRef(({as:e,name:t,children:n,style:r={},...s},o)=>{const i=w.useRef(null),a=nje(i.current);w.useImperativeHandle(o,()=>i.current);const l={[`--${t}-width`]:`${a.width}px`,[`--${t}-height`]:`${a.height}px`};return h.jsx(e,{...s,ref:i,style:{...l,...r},children:n})});ine.displayName="MeasuredContainer";const rje=({editor:e})=>h.jsx("div",{className:"shrink-0 overflow-x-auto border-b border-border p-2",children:h.jsxs("div",{className:"flex w-max items-center gap-px",children:[h.jsx(Iee,{editor:e,activeActions:["bold","italic","underline","strikethrough","code","clearFormatting"],mainActionCount:3}),h.jsx($f,{orientation:"vertical",className:"mx-2 h-7"}),h.jsx(Ree,{editor:e,activeActions:["orderedList","bulletList"],mainActionCount:0})]})}),ane=w.forwardRef(({value:e,onChange:t,className:n,editorContentClassName:r,...s},o)=>{const i=eje({value:e,onUpdate:t,...s});return i?h.jsxs(ine,{as:"div",name:"editor",ref:o,className:Qe("flex h-auto min-h-72 w-full flex-col rounded-md border border-input shadow-xs focus-within:border-primary",n),children:[h.jsx(rje,{editor:i}),h.jsx(dOe,{editor:i,className:Qe("minimal-tiptap-editor",r)}),h.jsx(DDe,{editor:i})]}):null});ane.displayName="MinimalTiptapEditor";function sje({content:e,isDarkMode:t,onUpdateContent:n,className:r,placeholder:s="Start writing your notes..."}){const o=w.useCallback(i=>{typeof i=="string"&&n(i)},[n]);return h.jsx("div",{className:Qe("flex h-full flex-col overflow-hidden",t?"bg-neutral-900":"bg-stone-50",r),children:h.jsx(ane,{value:e,onChange:o,output:"html",placeholder:s,throttleDelay:500,className:Qe("flex-1 border-0 shadow-none rounded-none",t&&"dark"),editorContentClassName:Qe("flex-1 overflow-y-auto p-6",t?"prose-invert":""),editable:!0,autofocus:"end"})})}var Yz={};const xv=()=>{var e;return typeof window<"u"&&((e=window.electronAPI)==null?void 0:e.isElectron)===!0},V5=()=>typeof window<"u"&&!xv(),oje=()=>window.location.origin;function ije({className:e}){return h.jsxs("svg",{viewBox:"0 0 100 100",className:e,fill:"currentColor",children:[h.jsx("circle",{cx:"42",cy:"42",r:"30",fill:"none",stroke:"currentColor",strokeWidth:"8"}),h.jsx("line",{x1:"64",y1:"64",x2:"90",y2:"90",stroke:"currentColor",strokeWidth:"10",strokeLinecap:"round"}),h.jsx("circle",{cx:"42",cy:"42",r:"12",fill:"currentColor"}),h.jsx("circle",{cx:"47",cy:"38",r:"4",fill:"white"})]})}const lne="cluso-recent-projects",aje=10;function _f(){try{const e=localStorage.getItem(lne);if(e)return JSON.parse(e)}catch(e){Yr.general.error("Failed to load recent projects:",e)}return[]}function aM(e){try{localStorage.setItem(lne,JSON.stringify(e))}catch(t){Yr.general.error("Failed to save recent projects:",t)}}function Q6(e,t,n){const r=_f(),s=r.find(a=>a.path===t),o=r.filter(a=>a.path!==t),i=[{name:e,path:t,port:n??(s==null?void 0:s.port),lastOpened:Date.now()},...o].slice(0,aje);aM(i)}function lje(e){return _f().find(t=>t.path===e)}function cje(e){const n=_f().filter(r=>r.path!==e);aM(n)}function uje(e,t){const r=_f().map(s=>s.path===e?{...s,...t,lastOpened:Date.now()}:s);aM(r)}function dje({onOpenProject:e,onOpenUrl:t,isDarkMode:n,lockedProjectPath:r}){const[s,o]=w.useState(""),[i,a]=w.useState([]),[l,c]=w.useState(null),[u,f]=w.useState({name:"",path:"",port:""}),[m,g]=w.useState(null),[y,v]=w.useState(!1),x=w.useCallback(async()=>{if(V5()){v(!0);try{const z=await fetch(`${oje()}/api/files/cwd`);if(z.ok){const H=await z.json();H.success&&H.data&&(g(H.data),Yr.general.log("[WebMode] Server project:",H.data))}}catch(z){Yr.general.error("[WebMode] Failed to fetch server project:",z)}finally{v(!1)}}},[]),E=async(z,H)=>{var F,G;if(r){if(r===z){e(z,H);return}if((F=window.electronAPI)!=null&&F.window){await window.electronAPI.window.openProject(z,H);return}}if((G=window.electronAPI)!=null&&G.window){const{isOpen:X,windowId:J}=await window.electronAPI.window.isProjectOpen(z);if(X&&J!==null){await window.electronAPI.window.focus(J);return}}e(z,H)};w.useEffect(()=>{a(_f()),x()},[x]);const T=async()=>{var z;if((z=window.electronAPI)!=null&&z.dialog){const H=await window.electronAPI.dialog.openFolder();if(H.success&&H.data){const{path:F,name:G}=H.data;Q6(G,F),a(_f()),await E(F,G)}}},k=async z=>{Q6(z.name,z.path),a(_f()),await E(z.path,z.name)},I=(z,H)=>{z.stopPropagation(),cje(H),a(_f())},O=(z,H)=>{var F;z.stopPropagation(),c(H.path),f({name:H.name,path:H.path,port:((F=H.port)==null?void 0:F.toString())||""})},M=(z,H)=>{z.stopPropagation();const F=u.port?parseInt(u.port):void 0;uje(H,{name:u.name,path:u.path,port:F}),a(_f()),c(null)},P=z=>{z.stopPropagation(),c(null)},j=z=>{if(z.preventDefault(),s.trim()){let H=s.trim();!H.startsWith("http://")&&!H.startsWith("https://")&&(H="http://"+H),t(H)}},V=z=>{const H=Yz.HOME||Yz.USERPROFILE||"";return z.startsWith(H)?"~"+z.slice(H.length):z},U=z=>{const F=Date.now()-z,G=Math.floor(F/6e4),X=Math.floor(F/36e5),J=Math.floor(F/864e5);return G<1?"Just now":G<60?`${G}m ago`:X<24?`${X}h ago`:J<7?`${J}d ago`:new Date(z).toLocaleDateString()};return h.jsxs("div",{className:`flex-1 flex flex-col items-center pt-16 px-8 min-h-full ${n?"bg-neutral-900 text-white":"bg-white text-stone-900"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(ije,{className:"w-12 h-12"}),h.jsx("h1",{className:"text-4xl font-semibold tracking-tight",children:"Cluso"})]}),h.jsx("p",{className:`text-sm mb-4 ${n?"text-neutral-500":"text-stone-400"}`,children:"AI-Powered Browser Dev Tools"}),r&&h.jsxs("div",{className:`
          flex items-center gap-2 px-3 py-1.5 rounded-full mb-6 text-xs
          ${n?"bg-blue-500/10 text-blue-400":"bg-blue-50 text-blue-600"}
        `,children:[h.jsx(E1,{size:12}),h.jsxs("span",{children:["Window locked to: ",V(r)]})]}),V5()&&m&&h.jsxs("button",{onClick:()=>e(m.cwd,m.name),className:`
            w-72 p-6 rounded-xl border-2 mb-6 text-left
            transition-all duration-200 group
            ${n?"border-green-500/50 bg-green-500/10 hover:bg-green-500/20":"border-green-500/50 bg-green-50 hover:bg-green-100"}
          `,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`
              w-10 h-10 rounded-lg flex items-center justify-center
              ${n?"bg-green-500/20":"bg-green-100"}
            `,children:h.jsx(Hq,{size:20,className:`${n?"text-green-400":"text-green-600"}`})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("span",{className:`block text-sm font-medium ${n?"text-green-300":"text-green-700"}`,children:m.name}),h.jsx("span",{className:`block text-xs truncate ${n?"text-green-400/60":"text-green-600/60"}`,children:V(m.cwd)})]})]}),h.jsx("div",{className:`mt-3 text-xs ${n?"text-green-400/80":"text-green-600/80"}`,children:"Click to open server project"})]}),V5()&&y&&h.jsx("div",{className:`w-72 p-6 rounded-xl border-2 border-dashed mb-6 text-center ${n?"border-neutral-700 text-neutral-500":"border-stone-200 text-stone-400"}`,children:"Loading server project..."}),h.jsx("button",{onClick:xv()?T:void 0,disabled:!xv(),className:`
          w-72 p-6 rounded-xl border-2 border-dashed mb-10 text-left
          transition-all duration-200 group
          ${xv()?n?"border-neutral-700 hover:border-blue-500/50 hover:bg-blue-500/5":"border-stone-200 hover:border-blue-500/50 hover:bg-blue-50/50":n?"border-neutral-800 opacity-50":"border-stone-200 opacity-50"}
        `,children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`
            w-10 h-10 rounded-lg flex items-center justify-center
            transition-colors
            ${n?"bg-neutral-800 group-hover:bg-blue-500/20":"bg-stone-100 group-hover:bg-blue-100"}
          `,children:h.jsx(Hf,{size:20,className:`${n?"text-neutral-400 group-hover:text-blue-400":"text-stone-500 group-hover:text-blue-600"}`})}),h.jsxs("div",{children:[h.jsx("span",{className:`block text-sm font-medium ${n?"text-neutral-200":"text-stone-700"}`,children:r?"Open Project in New Window":"Open Project"}),h.jsx("span",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:xv()?r?"Opens in separate window":"Select a local folder":"Use cluso CLI with --cwd to open a project"})]})]})}),i.length>0&&h.jsxs("div",{className:"w-full max-w-xl",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(pR,{size:14,className:n?"text-neutral-500":"text-stone-400"}),h.jsx("h2",{className:`text-xs font-medium uppercase tracking-wider ${n?"text-neutral-500":"text-stone-400"}`,children:"Recent Projects"})]}),h.jsx("div",{className:`rounded-xl overflow-hidden border ${n?"border-neutral-800":"border-stone-200"}`,children:i.map((z,H)=>h.jsx("div",{className:`
                  w-full px-4 py-3
                  transition-colors text-left
                  ${H!==i.length-1?n?"border-b border-neutral-800":"border-b border-stone-100":""}
                  ${l===z.path?"":"cursor-pointer group"}
                  ${n?"hover:bg-neutral-800/50":"hover:bg-stone-50"}
                `,onClick:l===z.path?void 0:()=>k(z),children:l===z.path?h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:u.name,onChange:F=>f(G=>({...G,name:F.target.value})),onClick:F=>F.stopPropagation(),placeholder:"Project name",className:`flex-1 px-2 py-1 text-sm rounded border ${n?"bg-neutral-800 border-neutral-700 text-neutral-200":"bg-white border-stone-200 text-stone-800"}`}),h.jsx("input",{type:"number",value:u.port,onChange:F=>f(G=>({...G,port:F.target.value})),onClick:F=>F.stopPropagation(),placeholder:"Port",className:`w-20 px-2 py-1 text-sm rounded border ${n?"bg-neutral-800 border-neutral-700 text-neutral-200":"bg-white border-stone-200 text-stone-800"}`})]}),h.jsx("input",{type:"text",value:u.path,onChange:F=>f(G=>({...G,path:F.target.value})),onClick:F=>F.stopPropagation(),placeholder:"Path",className:`w-full px-2 py-1 text-sm rounded border ${n?"bg-neutral-800 border-neutral-700 text-neutral-200":"bg-white border-stone-200 text-stone-800"}`}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx("button",{onClick:P,className:`px-2 py-1 text-xs rounded ${n?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,children:"Cancel"}),h.jsxs("button",{onClick:F=>M(F,z.path),className:"px-2 py-1 text-xs rounded flex items-center gap-1 bg-blue-600 text-white hover:bg-blue-500",children:[h.jsx(Ts,{size:12})," Save"]})]})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[h.jsx(E1,{size:18,className:n?"text-neutral-500":"text-stone-400"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("span",{className:`block text-sm font-medium truncate ${n?"text-neutral-200":"text-stone-800"}`,children:z.name}),h.jsxs("span",{className:`block text-xs truncate ${n?"text-neutral-600":"text-stone-400"}`,children:[V(z.path),z.port&&h.jsxs("span",{className:"ml-2 text-blue-500",children:[":",z.port]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[h.jsx("span",{className:`text-xs whitespace-nowrap ${n?"text-neutral-600":"text-stone-400"}`,children:U(z.lastOpened)}),h.jsx("button",{onClick:F=>O(F,z),className:`
                          opacity-0 group-hover:opacity-100 p-1 rounded
                          transition-opacity
                          ${n?"hover:bg-neutral-700":"hover:bg-stone-200"}
                        `,children:h.jsx(eS,{size:14,className:n?"text-neutral-500":"text-stone-400"})}),h.jsx("button",{onClick:F=>I(F,z.path),className:`
                          opacity-0 group-hover:opacity-100 p-1 rounded
                          transition-opacity
                          ${n?"hover:bg-neutral-700":"hover:bg-stone-200"}
                        `,children:h.jsx(qr,{size:14,className:n?"text-neutral-500":"text-stone-400"})})]})]})},z.path))})]}),i.length===0&&h.jsxs("div",{className:`text-center py-8 ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(E1,{size:32,className:"mx-auto mb-3 opacity-50"}),h.jsx("p",{className:"text-sm",children:"No recent projects"}),h.jsx("p",{className:"text-xs mt-1",children:"Open a folder to get started"})]}),h.jsxs("form",{onSubmit:j,className:"mt-auto mb-8 w-full max-w-md pt-8",children:[h.jsx("div",{className:`text-xs text-center mb-2 ${n?"text-neutral-600":"text-stone-400"}`,children:"Or enter a URL to inspect"}),h.jsx("input",{type:"text",value:s,onChange:z=>o(z.target.value),placeholder:"https://example.com",className:`
            w-full px-4 py-2.5 text-sm rounded-lg border
            focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/50
            ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"}
          `})]})]})}function fje(){const e=window.electronAPI;if(!e)throw new Error("electronAPI is not available in this context");return{git:{async getCurrentBranch(){try{const t=await e.git.getCurrentBranch();return t.success?{success:!0,data:t.data}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async getBranches(){try{const t=await e.git.getBranches();return t.success?{success:!0,data:t.data}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async getStatus(){try{const t=await e.git.getStatus();return t.success?{success:!0,data:t.data}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async checkout(t){try{const n=await e.git.checkout(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async checkoutFile(t){try{const n=await e.git.checkout(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async createBranch(t){try{const n=await e.git.createBranch(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async commit(t){try{const n=await e.git.commit(t);return n.success?{success:!0,data:n.data}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async push(){try{const t=await e.git.push();return t.success?{success:!0,data:void 0}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async pull(){try{const t=await e.git.pull();return t.success?{success:!0,data:void 0}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async stash(t){try{const n=t?await e.git.stashWithMessage(t):await e.git.stash();return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async stashPop(){try{const t=await e.git.stashPop();return t.success?{success:!0,data:void 0}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}},files:{async readFile(t){try{const n=await e.files.readFile(t);return n.success?{success:!0,data:n.data}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async writeFile(t,n){try{const r=await e.files.writeFile(t,n);return r.success?{success:!0,data:void 0}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async createFile(t,n){try{const r=await e.files.createFile(t,n);return r.success?{success:!0,data:void 0}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async deleteFile(t){try{const n=await e.files.deleteFile(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async renameFile(t,n){try{const r=await e.files.renameFile(t,n);return r.success?{success:!0,data:void 0}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async copyFile(t,n){try{const r=await e.files.copyFile(t,n);return r.success?{success:!0,data:void 0}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async saveImage(t,n){try{const r=await e.files.saveImage(t,n);return r.success?{success:!0,data:r.data}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async exists(t){try{const n=await e.files.exists(t);return n.success?{success:!0,data:n.exists}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async stat(t){try{const n=await e.files.stat(t);return n.success?{success:!0,data:n.data}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async listDirectory(t){try{const n=await e.files.listDirectory(t);return n.success?{success:!0,data:n.data}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async createDirectory(t){try{const n=await e.files.createDirectory(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async deleteDirectory(t){try{const n=await e.files.deleteDirectory(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async getCwd(){try{const t=await e.files.getCwd();return t.success?{success:!0,data:t.data}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async searchInFiles(t,n,r){try{const s=await e.files.searchInFiles(t,n,r);return s.success?{success:!0,data:s.data}:{success:!1,error:s.error||"Unknown error"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async glob(t,n){try{const r=await e.files.glob(t,n);return r.success?{success:!0,data:r.data}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async getTree(t,n){try{const r=await e.files.getTree(t,n);return r.success?{success:!0,data:r.data}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async readMultiple(t){try{const n=await e.files.readMultiple(t);return n.success?{success:!0,data:n.data}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}},oauth:{async startLogin(t){try{const n=await e.oauth.startLogin(t);return n.success&&n.authUrl?{success:!0,data:{authUrl:n.authUrl,verifier:"",state:""}}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async completeLogin(t,n,r){try{const s=await e.oauth.completeLogin(t);return s.success?{success:!0,data:void 0}:{success:!1,error:s.error||"Unknown error"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async getStatus(){try{const t=await e.oauth.getStatus();return t.authenticated!==void 0?{success:!0,data:{authenticated:t.authenticated,expiresAt:t.expiresAt}}:{success:!1,error:"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async logout(){try{const t=await e.oauth.logout();return t.success?{success:!0,data:void 0}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async getAccessToken(){try{const t=await e.oauth.getAccessToken();return t.success&&t.accessToken?{success:!0,data:t.accessToken}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}},backup:{async create(){return{success:!1,error:"Backup not implemented in Electron adapter yet"}},async list(){return{success:!1,error:"Backup not implemented in Electron adapter yet"}},async restore(t){return{success:!1,error:"Backup not implemented in Electron adapter yet"}},async delete(t){return{success:!1,error:"Backup not implemented in Electron adapter yet"}}}}}function hje(e){const t=e.replace(/\/$/,"");async function n(r,s){const o=await fetch(`${t}${r}`,{headers:{"Content-Type":"application/json"},...s});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);return o.json()}return{git:{async getCurrentBranch(){try{return await n("/api/git/current-branch")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async getBranches(){try{return await n("/api/git/branches")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async getStatus(){try{return await n("/api/git/status")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async checkout(r){try{return await n("/api/git/checkout",{method:"POST",body:JSON.stringify({branch:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async checkoutFile(r){try{return await n("/api/git/checkout-file",{method:"POST",body:JSON.stringify({filePath:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async createBranch(r){try{return await n("/api/git/create-branch",{method:"POST",body:JSON.stringify({name:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async commit(r){try{return await n("/api/git/commit",{method:"POST",body:JSON.stringify({message:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async push(){try{return await n("/api/git/push",{method:"POST"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async pull(){try{return await n("/api/git/pull",{method:"POST"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async stash(r){try{return await n("/api/git/stash",{method:"POST",body:JSON.stringify({message:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async stashPop(){try{return await n("/api/git/stash-pop",{method:"POST"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}},files:{async readFile(r){try{const s=await n("/api/files/read",{method:"POST",body:JSON.stringify({path:r})});return s.success&&s.data?{success:!0,data:s.data.content}:{success:!1,error:s.error||"Unknown error"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async writeFile(r,s){try{return await n("/api/files/write",{method:"POST",body:JSON.stringify({path:r,content:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async createFile(r,s){try{return await n("/api/files/create",{method:"POST",body:JSON.stringify({path:r,content:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async deleteFile(r){try{return await n("/api/files/delete",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async renameFile(r,s){try{return await n("/api/files/rename",{method:"POST",body:JSON.stringify({oldPath:r,newPath:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async copyFile(r,s){try{return await n("/api/files/copy",{method:"POST",body:JSON.stringify({srcPath:r,destPath:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async saveImage(r,s){try{return await n("/api/files/save-image",{method:"POST",body:JSON.stringify({base64DataUrl:r,destPath:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async exists(r){try{return await n("/api/files/exists",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async stat(r){try{return await n("/api/files/stat",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async listDirectory(r){try{return await n("/api/files/list-directory",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async createDirectory(r){try{return await n("/api/files/create-directory",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async deleteDirectory(r){try{return await n("/api/files/delete-directory",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async getCwd(){try{return await n("/api/files/cwd")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async searchInFiles(r,s,o){try{return await n("/api/files/search",{method:"POST",body:JSON.stringify({pattern:r,dirPath:s,options:o})})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}},async glob(r,s){try{return await n("/api/files/glob",{method:"POST",body:JSON.stringify({pattern:r,dirPath:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async getTree(r,s){try{return await n("/api/files/tree",{method:"POST",body:JSON.stringify({path:r,options:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async readMultiple(r){try{return await n("/api/files/read-multiple",{method:"POST",body:JSON.stringify({paths:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}},oauth:{async startLogin(r){try{return await n("/api/oauth/start-login",{method:"POST",body:JSON.stringify({mode:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async completeLogin(r,s,o){try{return await n("/api/oauth/complete-login",{method:"POST",body:JSON.stringify({code:r,verifier:s,state:o})})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}},async getStatus(){try{return await n("/api/oauth/status")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async logout(){try{return await n("/api/oauth/logout",{method:"POST"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async getAccessToken(){try{return await n("/api/oauth/access-token")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}},backup:{async create(){try{return await n("/api/backup/create",{method:"POST"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async list(){try{return await n("/api/backup/list")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async restore(r){try{return await n("/api/backup/restore",{method:"POST",body:JSON.stringify({backupName:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async delete(r){try{return await n("/api/backup/delete",{method:"POST",body:JSON.stringify({backupName:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}}}}let Ky=null;function pje(){var t;if(Ky)return Ky;if(typeof window<"u"&&((t=window.electronAPI)==null?void 0:t.isElectron)===!0)Ky=fje();else{const n=mje();Ky=hje(n)}return Ky}function mje(){return typeof window>"u"?"http://localhost:3001":window.location.origin}const q5={react:{name:"React",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},next:{name:"Next.js",color:"bg-white/10 text-white border-white/20"},vue:{name:"Vue",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},svelte:{name:"Svelte",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},vite:{name:"Vite",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},typescript:{name:"TypeScript",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},tailwindcss:{name:"Tailwind",color:"bg-sky-500/20 text-sky-400 border-sky-500/30"},"@remix-run/react":{name:"Remix",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},astro:{name:"Astro",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},express:{name:"Express",color:"bg-gray-500/20 text-gray-400 border-gray-500/30"},prisma:{name:"Prisma",color:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30"},"drizzle-orm":{name:"Drizzle",color:"bg-lime-500/20 text-lime-400 border-lime-500/30"},zod:{name:"Zod",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"@tanstack/react-query":{name:"React Query",color:"bg-red-500/20 text-red-400 border-red-500/30"},zustand:{name:"Zustand",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"framer-motion":{name:"Framer",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},three:{name:"Three.js",color:"bg-white/10 text-white border-white/20"},"@react-three/fiber":{name:"R3F",color:"bg-white/10 text-white border-white/20"},electron:{name:"Electron",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},"@google/generative-ai":{name:"Gemini",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"@anthropic-ai/sdk":{name:"Claude SDK",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},openai:{name:"OpenAI",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},langchain:{name:"LangChain",color:"bg-green-500/20 text-green-400 border-green-500/30"},"@vercel/ai":{name:"Vercel AI",color:"bg-white/10 text-white border-white/20"},ai:{name:"AI SDK",color:"bg-white/10 text-white border-white/20"},supabase:{name:"Supabase",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},"@supabase/supabase-js":{name:"Supabase",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},firebase:{name:"Firebase",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},stripe:{name:"Stripe",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},playwright:{name:"Playwright",color:"bg-green-500/20 text-green-400 border-green-500/30"},vitest:{name:"Vitest",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},jest:{name:"Jest",color:"bg-red-500/20 text-red-400 border-red-500/30"},"@trpc/server":{name:"tRPC",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},hono:{name:"Hono",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},elysia:{name:"Elysia",color:"bg-violet-500/20 text-violet-400 border-violet-500/30"},"socket.io":{name:"Socket.io",color:"bg-white/10 text-white border-white/20"},graphql:{name:"GraphQL",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},mongoose:{name:"MongoDB",color:"bg-green-500/20 text-green-400 border-green-500/30"},redis:{name:"Redis",color:"bg-red-500/20 text-red-400 border-red-500/30"},ioredis:{name:"Redis",color:"bg-red-500/20 text-red-400 border-red-500/30"}},gje={"CLAUDE.md":{name:"Claude Ready",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"claude.md":{name:"Claude Ready",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"AGENTS.md":{name:"AI Agents",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"agents.md":{name:"AI Agents",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},".cursorrules":{name:"Cursor",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},".cursorignore":{name:"Cursor",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"docker-compose.yml":{name:"Docker",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"docker-compose.yaml":{name:"Docker",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},Dockerfile:{name:"Docker",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},".github":{name:"GitHub Actions",color:"bg-gray-500/20 text-gray-400 border-gray-500/30"},"turbo.json":{name:"Turborepo",color:"bg-red-500/20 text-red-400 border-red-500/30"},"nx.json":{name:"Nx",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"vercel.json":{name:"Vercel",color:"bg-white/10 text-white border-white/20"},"netlify.toml":{name:"Netlify",color:"bg-teal-500/20 text-teal-400 border-teal-500/30"},"fly.toml":{name:"Fly.io",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"railway.json":{name:"Railway",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},".env":{name:"Env Config",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},".env.local":{name:"Local Env",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},"biome.json":{name:"Biome",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},".prettierrc":{name:"Prettier",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},"prettier.config.js":{name:"Prettier",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},".eslintrc":{name:"ESLint",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},".eslintrc.js":{name:"ESLint",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"eslint.config.js":{name:"ESLint",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"wrangler.toml":{name:"Cloudflare",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},".wrangler":{name:"Cloudflare",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},convex:{name:"Convex",color:"bg-red-500/20 text-red-400 border-red-500/30"},"sanity.config.ts":{name:"Sanity",color:"bg-red-500/20 text-red-400 border-red-500/30"},"contentlayer.config.ts":{name:"Contentlayer",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"mdx-components.tsx":{name:"MDX",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},"schema.prisma":{name:"Prisma",color:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30"},"drizzle.config.ts":{name:"Drizzle",color:"bg-lime-500/20 text-lime-400 border-lime-500/30"},".claude":{name:"Claude Config",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"mcp.json":{name:"MCP",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},".mcp":{name:"MCP",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},storybook:{name:"Storybook",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},".storybook":{name:"Storybook",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},cypress:{name:"Cypress",color:"bg-green-500/20 text-green-400 border-green-500/30"},"cypress.config.ts":{name:"Cypress",color:"bg-green-500/20 text-green-400 border-green-500/30"},"playwright.config.ts":{name:"Playwright",color:"bg-green-500/20 text-green-400 border-green-500/30"},k8s:{name:"Kubernetes",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},kubernetes:{name:"Kubernetes",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},terraform:{name:"Terraform",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},pulumi:{name:"Pulumi",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"}},bje={bun:{name:"Bun",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},pnpm:{name:"pnpm",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},yarn:{name:"Yarn",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},npm:{name:"npm",color:"bg-red-500/20 text-red-400 border-red-500/30"}},Kz={Vite:5173,"Next.js":3e3,"Create React App":3e3,Remix:3e3,Astro:4321,Vue:5173,Svelte:5173};function yje({projectPath:e,projectName:t,initialPort:n,isDarkMode:r,onComplete:s,onCancel:o}){const[i,a]=w.useState([{id:"scan",label:"Scanning project",status:"pending"},{id:"deps",label:"Analyzing dependencies",status:"pending"},{id:"port",label:"Detecting port",status:"pending"}]),[l,c]=w.useState({name:t,path:e,techStack:[]}),[u,f]=w.useState(!1),[m,g]=w.useState(null),[y,v]=w.useState(!1),[x,E]=w.useState([]),T=w.useCallback((P,j)=>{a(V=>V.map(U=>U.id===P?{...U,...j}:U))},[]),k=w.useCallback(P=>{const j=new Set,V=P.filter(U=>j.has(U.name)?!1:(j.add(U.name),!0));E([]),V.forEach((U,z)=>{setTimeout(()=>{E(H=>[...H,U])},z*150)})},[]),I=w.useCallback(async()=>{const j=pje().files;T("scan",{status:"running"}),await new Promise(F=>setTimeout(F,200));const V=await j.listDirectory(e);if(!V.success||!V.data){T("scan",{status:"error",message:"Could not read directory"}),g("Failed to read project directory");return}const U=V.data.map(F=>F.name);T("scan",{status:"success",message:`${U.length} files`}),T("deps",{status:"running"}),await new Promise(F=>setTimeout(F,200));const z=`${e}/package.json`,H=await j.readFile(z);if(!H.success||!H.data){T("deps",{status:"error",message:"No package.json"}),g("No package.json found");return}try{const F=JSON.parse(H.data),G={...F.dependencies,...F.devDependencies},X={...l,techStack:[]},J=[],ee=new Set,re=(Te,ge)=>{ee.has(Te)||(J.push({name:Te,color:ge}),ee.add(Te))};for(const[Te,ge]of Object.entries(q5))G[Te]&&re(ge.name,ge.color);U.includes("tsconfig.json")&&re(q5.typescript.name,q5.typescript.color);for(const[Te,ge]of Object.entries(gje))U.includes(Te)&&re(ge.name,ge.color);let ie="npm";U.includes("bun.lockb")||U.includes("bun.lock")?ie="bun":U.includes("pnpm-lock.yaml")?ie="pnpm":U.includes("yarn.lock")&&(ie="yarn");const Z=bje[ie];re(Z.name,Z.color),X.packageManager=ie,X.hasNodeModules=U.includes("node_modules"),X.techStack=J,G.next?X.framework="Next.js":G["@remix-run/react"]?X.framework="Remix":G.vite?X.framework="Vite":G["react-scripts"]?X.framework="Create React App":G.vue?X.framework="Vue":G.svelte?X.framework="Svelte":G.astro&&(X.framework="Astro");const te=F.scripts||{};let oe="";te.dev?oe="dev":te.start?oe="start":te.serve?oe="serve":te.develop&&(oe="develop"),oe&&(X.devCommand=`${ie}${ie==="npm"?" run":""} ${oe}`),c(X),k(J),T("deps",{status:"success",message:`${J.length} technologies`}),T("port",{status:"running"}),await new Promise(Te=>setTimeout(Te,300));let Q=3e3;if(U.includes("vite.config.ts")||U.includes("vite.config.js")){const Te=U.includes("vite.config.ts")?`${e}/vite.config.ts`:`${e}/vite.config.js`,ge=await j.readFile(Te);if(ge.success&&ge.data){const Ce=ge.data.match(/port:\s*(\d+)/);if(Ce){Q=parseInt(Ce[1]),T("port",{status:"success",message:`Port ${Q}`,detail:"from vite.config"}),c(fe=>({...fe,port:Q})),f(!0);return}}}if(U.includes("next.config.js")||U.includes("next.config.mjs")){const Te=U.includes("next.config.mjs")?`${e}/next.config.mjs`:`${e}/next.config.js`,ge=await j.readFile(Te);if(ge.success&&ge.data){const Ce=ge.data.match(/port:\s*(\d+)/);if(Ce){Q=parseInt(Ce[1]),T("port",{status:"success",message:`Port ${Q}`,detail:"from next.config"}),c(fe=>({...fe,port:Q})),f(!0);return}}}X.framework&&Kz[X.framework]?(Q=Kz[X.framework],T("port",{status:"success",message:`Port ${Q}`,detail:`${X.framework} default`})):T("port",{status:"success",message:`Port ${Q}`,detail:"default"}),c(Te=>({...Te,port:Q})),f(!0)}catch{T("deps",{status:"error",message:"Invalid package.json"}),g("Could not parse package.json")}},[e,t,T,k]);w.useEffect(()=>{y||(v(!0),I())},[y,I]);const O=()=>{const P=n||l.port||3e3,j=`http://localhost:${P}`;s(j,P)},M=P=>{switch(P){case"pending":return h.jsx(yN,{size:14,className:"text-neutral-600"});case"running":return h.jsx(fs,{size:14,className:"text-blue-400 animate-spin"});case"success":return h.jsx(m1e,{size:14,className:"text-emerald-400"});case"error":return h.jsx(bN,{size:14,className:"text-red-400"});case"skipped":return h.jsx(yN,{size:14,className:"text-neutral-700"})}};return h.jsxs("div",{className:`flex-1 flex flex-col items-center justify-center px-8 min-h-full ${r?"bg-neutral-900 text-white":"bg-white text-stone-900"}`,children:[h.jsx("h1",{className:"text-2xl font-semibold mb-2",children:t}),h.jsx("p",{className:`text-xs font-mono mb-6 ${r?"text-neutral-500":"text-stone-400"}`,children:e}),h.jsx("div",{className:"flex flex-wrap justify-center content-start gap-2 mb-8 h-[80px] max-w-md overflow-hidden",children:x.filter((P,j,V)=>V.findIndex(U=>U.name===P.name)===j).map((P,j)=>h.jsx("span",{className:`
              px-3 py-1.5 text-xs font-medium rounded-full border
              animate-in fade-in zoom-in-95 duration-200
              ${P.color}
            `,style:{animationDelay:`${j*80}ms`},children:P.name},P.name))}),h.jsx("div",{className:`w-full max-w-md rounded-2xl p-6 mb-8 ${r?"bg-neutral-800/50 border border-neutral-700/50":"bg-stone-50 border border-stone-200"}`,children:h.jsx("div",{className:"space-y-4",children:i.map(P=>h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"flex-shrink-0",children:M(P.status)}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("div",{className:`text-sm ${P.status==="pending"?"text-neutral-500":P.status==="error"?"text-red-400":r?"text-neutral-200":"text-stone-700"}`,children:P.label})}),P.message&&h.jsx("div",{className:`text-xs ${P.status==="error"?"text-red-400":"text-neutral-500"}`,children:P.message})]},P.id))})}),m&&h.jsxs("div",{className:`mb-6 p-4 rounded-xl flex items-start gap-3 max-w-sm w-full ${r?"bg-red-500/10 border border-red-500/20":"bg-red-50 border border-red-100"}`,children:[h.jsx(w0,{size:16,className:"text-red-400 mt-0.5 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-red-400",children:m})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:o,className:`
            px-4 py-2 text-sm rounded-lg transition-colors
            ${r?"text-neutral-400 hover:bg-neutral-800":"text-stone-500 hover:bg-stone-100"}
          `,children:"Cancel"}),u&&h.jsxs("button",{onClick:O,className:`
              flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium
              transition-colors
              ${r?"bg-white text-neutral-900 hover:bg-neutral-200":"bg-stone-800 text-white hover:bg-stone-700"}
            `,children:[h.jsx(Pf,{size:14}),h.jsx("span",{children:"Open in Browser"})]})]}),u&&h.jsxs("p",{className:`mt-4 text-xs ${r?"text-neutral-600":"text-stone-400"}`,children:["localhost:",n||l.port||3e3]})]})}function wv(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return`${(e/Math.pow(t,r)).toFixed(1)} ${n[r]}`}function Zz(e){return`${wv(e)}/s`}function Jz(e){return e<60?`${Math.round(e)}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h ${Math.round(e%3600/60)}m`}function vje({isDarkMode:e,isPro:t=!0}){const[n,r]=w.useState(null),[s,o]=w.useState([]),[i,a]=w.useState(!0),[l,c]=w.useState(null),[u,f]=w.useState(null),[m,g]=w.useState(null),[y,v]=w.useState(null),[x,E]=w.useState(!1);w.useEffect(()=>{var G,X,J,ee,re,ie;T();const z=(X=(G=window.electronAPI)==null?void 0:G.fastApply)==null?void 0:X.onProgress(Z=>{g(Z)}),H=(ee=(J=window.electronAPI)==null?void 0:J.fastApply)==null?void 0:ee.onModelLoaded(()=>{T()}),F=(ie=(re=window.electronAPI)==null?void 0:re.fastApply)==null?void 0:ie.onModelUnloaded(()=>{T()});return()=>{z==null||z(),H==null||H(),F==null||F()}},[]);const T=async()=>{var z;if(!((z=window.electronAPI)!=null&&z.fastApply)){c("Fast Apply is only available in the desktop app"),a(!1);return}try{a(!0),c(null);const[H,F]=await Promise.all([window.electronAPI.fastApply.getStatus(),window.electronAPI.fastApply.listModels()]);r(H);const G=(F==null?void 0:F.models)||(Array.isArray(F)?F:[]);o(G),F&&!F.success&&F.error&&c(F.error)}catch(H){c(H instanceof Error?H.message:"Failed to load Fast Apply status"),o([])}finally{a(!1)}},k=async z=>{var H;if(console.log("[FastApplySettings] handleDownload called for:",z),u!==null){console.log("[FastApplySettings] Already downloading, ignoring click");return}if(!((H=window.electronAPI)!=null&&H.fastApply)){console.error("[FastApplySettings] fastApply API not available"),c("Fast Apply API not available");return}try{f(z),g(null),c(null),console.log("[FastApplySettings] Calling download IPC...");const F=await window.electronAPI.fastApply.download(z);console.log("[FastApplySettings] Download result:",F),F.success?console.log("[FastApplySettings] Download succeeded, path:",F.path):(console.error("[FastApplySettings] Download failed:",F.error),c(F.error||"Download failed")),await T()}catch(F){console.error("[FastApplySettings] Download exception:",F),c(F instanceof Error?F.message:"Download failed")}finally{f(null),g(null)}},I=async()=>{var z;(z=window.electronAPI)!=null&&z.fastApply&&(await window.electronAPI.fastApply.cancel(),f(null),g(null))},O=async z=>{var H;if((H=window.electronAPI)!=null&&H.fastApply)try{v(z);const F=await window.electronAPI.fastApply.delete(z);F.success||c(F.error||"Delete failed"),await T()}catch(F){c(F instanceof Error?F.message:"Delete failed")}finally{v(null)}},M=async z=>{var H;if((H=window.electronAPI)!=null&&H.fastApply)try{c(null);const F=await window.electronAPI.fastApply.setModel(z);if(!F.success){c(F.error||"Failed to set model");return}await T()}catch(F){c(F instanceof Error?F.message:"Failed to set model")}};if(!t)return h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:`p-6 rounded-xl border ${e?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:`p-2 rounded-lg ${e?"bg-yellow-500/20":"bg-yellow-100"}`,children:h.jsx(Gl,{size:24,className:"text-yellow-500"})}),h.jsxs("div",{children:[h.jsx("h3",{className:`font-semibold ${e?"text-white":"text-stone-900"}`,children:"Fast Apply - Pro Feature"}),h.jsx("p",{className:`text-sm ${e?"text-neutral-400":"text-stone-500"}`,children:"Instant local code merging with AI"})]})]}),h.jsx("p",{className:`text-sm mb-4 ${e?"text-neutral-300":"text-stone-600"}`,children:"Upgrade to Pro to unlock Fast Apply - a local AI model that merges code changes in ~500ms, completely offline after downloading. No API costs, complete privacy."}),h.jsx("button",{className:"w-full py-2.5 px-4 rounded-lg bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-medium hover:from-yellow-600 hover:to-orange-600 transition-all",children:"Upgrade to Pro"})]})});if(i)return h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(fs,{className:`animate-spin ${e?"text-neutral-400":"text-stone-500"}`,size:32})});if(l&&!n)return h.jsx("div",{className:`p-4 rounded-lg ${e?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(w0,{size:18}),h.jsx("span",{className:"text-sm font-medium",children:l})]})});const P=async()=>{var z;if(!(!((z=window.electronAPI)!=null&&z.fastApply)||x)){E(!0);try{n!=null&&n.ready?await window.electronAPI.fastApply.unload():n!=null&&n.activeModel&&await window.electronAPI.fastApply.load(),await T()}catch(H){c(H instanceof Error?H.message:"Failed to toggle Fast Apply")}finally{E(!1)}}},j=(n==null?void 0:n.activeModel)&&!x,V=n==null?void 0:n.ready,U=u!==null&&m!==null;return h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:`p-4 rounded-xl border ${U?e?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200":V?e?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200":e?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:U?h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${e?"bg-blue-500/20":"bg-blue-100"}`,children:h.jsx(X_,{size:20,className:"text-blue-500"})}),h.jsxs("div",{children:[h.jsxs("h4",{className:`font-medium ${e?"text-blue-400":"text-blue-700"}`,children:["Downloading ",m.variant,"..."]}),h.jsxs("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[wv(m.downloaded)," / ",wv(m.total)]})]})]}),h.jsx("button",{onClick:I,className:`text-xs px-3 py-1.5 rounded-lg transition-colors ${e?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:"Cancel"})]}),h.jsx("div",{className:`w-full h-2 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-blue-200"}`,children:h.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${m.percent}%`}})}),h.jsx("div",{className:"flex justify-end mt-2",children:h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[Zz(m.speed)," - ",Jz(m.eta)," remaining"]})})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${V?e?"bg-green-500/20":"bg-green-100":e?"bg-neutral-700":"bg-stone-200"}`,children:h.jsx(Gl,{size:20,className:V?"text-green-500":e?"text-neutral-400":"text-stone-400"})}),h.jsxs("div",{children:[h.jsx("h4",{className:`font-medium ${V?"text-green-500":e?"text-white":"text-stone-900"}`,children:V?"Ready":"Fast Apply"}),h.jsx("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:n!=null&&n.activeModel?V?`${n.activeModel} loaded`:`${n.activeModel} available`:"Download a model to enable"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:P,disabled:!j,className:`relative w-11 h-6 rounded-full transition-all duration-200 ${j?V?"bg-green-500":e?"bg-neutral-600 hover:bg-neutral-500":"bg-stone-300 hover:bg-stone-400":e?"bg-neutral-700 cursor-not-allowed":"bg-stone-200 cursor-not-allowed"}`,children:h.jsx("div",{className:`absolute top-0.5 w-5 h-5 rounded-full transition-all duration-200 flex items-center justify-center ${V?"left-[22px]":"left-0.5"} ${x?"bg-white/80":"bg-white shadow-sm"}`,children:x&&h.jsx(fs,{size:12,className:"animate-spin text-neutral-500"})})}),h.jsx("button",{onClick:T,className:`p-2 rounded-lg transition-colors ${e?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,children:h.jsx(f0,{size:16})})]})]})}),l&&h.jsx("div",{className:`p-3 rounded-lg ${e?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(w0,{size:16}),h.jsx("span",{className:"text-sm",children:l})]})}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${e?"text-neutral-200":"text-stone-800"}`,children:"Available Models"}),h.jsx("div",{className:"space-y-2",children:(s||[]).map(z=>{const H=u===z.variant&&m;return h.jsx("div",{className:`p-4 rounded-xl border transition-colors ${H?e?"border-blue-500/50 bg-blue-500/10":"border-blue-300 bg-blue-50":(n==null?void 0:n.activeModel)===z.variant?e?"border-blue-500 bg-blue-500/10":"border-blue-500 bg-blue-50":e?"border-neutral-700 hover:border-neutral-600":"border-stone-200 hover:border-stone-300"}`,children:H?h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("span",{className:`font-medium ${e?"text-blue-400":"text-blue-700"}`,children:["Downloading ",z.variant,"..."]}),h.jsx("button",{onClick:I,className:`text-xs px-3 py-1 rounded-lg transition-colors ${e?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:"Cancel"})]}),h.jsx("div",{className:`w-full h-2 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-blue-200"}`,children:h.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${m.percent}%`}})}),h.jsxs("div",{className:"flex justify-between mt-2",children:[h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[wv(m.downloaded)," / ",wv(m.total)]}),h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[Zz(m.speed)," - ",Jz(m.eta)," remaining"]})]})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`font-medium ${e?"text-white":"text-stone-900"}`,children:z.variant}),z.downloaded&&h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-700"}`,children:"Downloaded"}),(n==null?void 0:n.activeModel)===z.variant&&h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-700"}`,children:"Active"})]}),h.jsx("p",{className:`text-xs mt-1 ${e?"text-neutral-400":"text-stone-500"}`,children:z.description}),h.jsxs("div",{className:`flex items-center gap-4 mt-2 text-xs ${e?"text-neutral-500":"text-stone-400"}`,children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(ax,{size:12}),z.size," MB"]}),h.jsxs("span",{children:["Quality: ",z.quality]}),h.jsxs("span",{children:["RAM: ~",z.memory," MB"]})]})]}),h.jsx("div",{className:"flex items-center gap-2 ml-4",children:z.downloaded?h.jsxs(h.Fragment,{children:[(n==null?void 0:n.activeModel)!==z.variant&&h.jsx("button",{onClick:()=>M(z.variant),className:`text-xs px-3 py-1.5 rounded-lg transition-colors ${e?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:"Select"}),h.jsx("button",{onClick:()=>O(z.variant),disabled:y===z.variant,className:`p-2 rounded-lg transition-colors ${e?"hover:bg-red-500/20 text-neutral-400 hover:text-red-400":"hover:bg-red-100 text-stone-400 hover:text-red-600"} ${y===z.variant?"opacity-50 cursor-not-allowed":""}`,children:y===z.variant?h.jsx(fs,{size:16,className:"animate-spin"}):h.jsx(Lf,{size:16})})]}):h.jsxs("button",{onClick:()=>k(z.variant),disabled:u!==null,className:`flex items-center gap-2 text-xs px-3 py-1.5 rounded-lg transition-colors ${u!==null?"opacity-50 cursor-not-allowed bg-neutral-800 text-neutral-500":e?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:[h.jsx(X_,{size:14}),"Download"]})})]})},z.variant)})})]}),(n==null?void 0:n.storageDir)&&h.jsx("div",{className:`text-xs ${e?"text-neutral-500":"text-stone-400"}`,children:h.jsxs("p",{children:["Models stored in: ",n.storageDir]})})]})}function xje(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return`${(e/Math.pow(t,r)).toFixed(1)} ${n[r]}`}function wje(e){return e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function Eje({isDarkMode:e,projectPath:t}){const[n,r]=w.useState([]),[s,o]=w.useState(!0),[i,a]=w.useState(null),[l,c]=w.useState(null),[u,f]=w.useState({}),[m,g]=w.useState(""),[y,v]=w.useState(""),[x,E]=w.useState("both"),[T,k]=w.useState(!1),[I,O]=w.useState(null),[M,P]=w.useState(null),[j,V]=w.useState(null),[U,z]=w.useState(null),[H,F]=w.useState([]),[G,X]=w.useState(!1),J=w.useRef(null),ee=(ge,Ce)=>{F(fe=>[...fe.slice(-49),{timestamp:new Date,type:ge,message:Ce}])};w.useEffect(()=>{var Ce,fe;re(),ee("info","Code Index settings loaded");const ge=(fe=(Ce=window.electronAPI)==null?void 0:Ce.mgrep)==null?void 0:fe.onEvent(Fe=>{var Re,tt;console.log("[CodeIndexSettings] *** mgrep event received ***",Fe.type,Fe);const De=Fe.projectPath?Fe.projectPath.split("/").pop():"unknown";if(Fe.projectPath)switch(Fe.type){case"scanning-start":f(de=>({...de,[Fe.projectPath]:{phase:"scanning",current:0,total:0}}));break;case"scanning-complete":f(de=>({...de,[Fe.projectPath]:{phase:"scanning",current:Fe.filesFound||0,total:Fe.filesFound||0}}));break;case"indexing-start":f(de=>({...de,[Fe.projectPath]:{phase:"indexing",current:0,total:Fe.totalFiles||0}}));break;case"indexing-progress":f(de=>({...de,[Fe.projectPath]:{phase:"indexing",current:Fe.current||0,total:Fe.total||0,currentFile:Fe.currentFile}}));break;case"indexing-complete":case"error":f(de=>{const nt={...de};return delete nt[Fe.projectPath],nt});break}switch(Fe.type){case"ready":ee("success",`[${De}] Index ready`);break;case"scanning-start":ee("info",`[${De}] Scanning project files...`);break;case"scanning-complete":ee("info",`[${De}] Found ${Fe.filesFound||0} files to index`);break;case"indexing-start":ee("info",`[${De}] Indexing started (${Fe.totalFiles||0} files)`);break;case"indexing-progress":break;case"indexing-complete":ee("success",`[${De}] Indexing complete: ${Fe.totalChunks||Fe.chunksIndexed||0} chunks`);break;case"file-indexed":break;case"stats-updated":ee("success",`[${De}] Stats updated: ${((Re=Fe.stats)==null?void 0:Re.totalFiles)||0} files, ${((tt=Fe.stats)==null?void 0:tt.totalChunks)||0} chunks`);break;case"error":ee("error",`[${De}] Error: ${Fe.error}`);break;default:ee("event",`[${De}] ${Fe.type}`)}["ready","indexing-complete","indexing-start","scanning-complete","stats-updated"].includes(Fe.type)&&re()});return()=>{ge==null||ge()}},[t]),w.useEffect(()=>{J.current&&(J.current.scrollTop=J.current.scrollHeight)},[H]),w.useEffect(()=>{if(n.length>0&&!y){const ge=n.find(Ce=>Ce.ready);ge&&v(ge.projectPath)}},[n,y]);const re=async()=>{var ge;if(!((ge=window.electronAPI)!=null&&ge.mgrep)){a("Code Index is only available in the desktop app"),o(!1);return}try{o(!0),a(null);const Ce=await window.electronAPI.mgrep.getAllProjectsStatus();Ce.success&&Ce.projects&&r(Ce.projects)}catch(Ce){const fe=Ce instanceof Error?Ce.message:"Failed to load status";a(fe),ee("error",fe)}finally{o(!1)}},ie=async ge=>{var Ce;if((Ce=window.electronAPI)!=null&&Ce.mgrep)try{c(ge),a(null),ee("info",`Initializing index for: ${ge.split("/").pop()}`);const fe=await window.electronAPI.mgrep.initialize(ge);fe.success?ee("success","Index initialized successfully"):(a(fe.error||"Failed to initialize"),ee("error",fe.error||"Failed to initialize")),await re()}catch(fe){const Fe=fe instanceof Error?fe.message:"Failed to initialize";a(Fe),ee("error",Fe)}finally{c(null)}},Z=async ge=>{var Ce;if((Ce=window.electronAPI)!=null&&Ce.mgrep)try{c(ge),a(null),ee("info",`Clearing index for: ${ge.split("/").pop()}`);const fe=await window.electronAPI.mgrep.clearIndex(ge);fe.success?(ee("success","Index cleared"),O(null),P(null),V(null),z(null)):(a(fe.error||"Failed to clear index"),ee("error",fe.error||"Failed to clear")),await re()}catch(fe){const Fe=fe instanceof Error?fe.message:"Failed to clear index";a(Fe),ee("error",Fe)}finally{c(null)}},te=async ge=>{var Ce;if((Ce=window.electronAPI)!=null&&Ce.mgrep)try{c(ge),a(null),ee("info",`Re-syncing index for: ${ge.split("/").pop()}`),window.electronAPI.mgrep.resync(ge).then(fe=>{fe.success||ee("error",fe.error||"Resync failed"),re()}).catch(fe=>{ee("error",fe instanceof Error?fe.message:"Resync failed")}),c(null)}catch(fe){const Fe=fe instanceof Error?fe.message:"Failed to resync";a(Fe),ee("error",Fe),c(null)}},oe=async()=>{var ge,Ce,fe;if(!(!m.trim()||!y))try{k(!0),O(null),P(null),V(null),z(null);const Fe=y.split("/").pop();if(ee("info",`Searching "${m}" in ${Fe} (${x})`),x==="both"){const[De,Re]=await Promise.all([(async()=>{var de;if(!((de=window.electronAPI)!=null&&de.mgrep))return null;const tt=performance.now();try{const nt=await window.electronAPI.mgrep.search(m,{limit:5,projectPath:y}),ot=performance.now()-tt;return V(ot),nt.success&&nt.results?(O(nt.results),{success:!0,count:nt.results.length,time:ot}):{success:!1,error:nt.error}}catch(nt){return{success:!1,error:nt instanceof Error?nt.message:"Failed"}}})(),(async()=>{var de,nt;if(!((nt=(de=window.electronAPI)==null?void 0:de.files)!=null&&nt.searchInFiles))return null;const tt=performance.now();try{const ot=await window.electronAPI.files.searchInFiles(m,y,{maxResults:5}),Ut=performance.now()-tt;return z(Ut),ot.success&&ot.data?(P(ot.data),{success:!0,count:ot.data.length,time:Ut}):{success:!1,error:ot.error}}catch(ot){return{success:!1,error:ot instanceof Error?ot.message:"Failed"}}})()]);if(De!=null&&De.success&&(Re!=null&&Re.success)){const tt=(Re.time/De.time).toFixed(2);ee("success",`Semantic: ${De.count} results (${De.time.toFixed(0)}ms) | Grep: ${Re.count} results (${Re.time.toFixed(0)}ms) | ${tt}x`)}}else if(x==="semantic"){if(!((ge=window.electronAPI)!=null&&ge.mgrep))return;const De=performance.now(),Re=await window.electronAPI.mgrep.search(m,{limit:5,projectPath:y}),tt=performance.now()-De;V(tt),Re.success&&Re.results?(O(Re.results),ee("success",`Found ${Re.results.length} semantic results (${tt.toFixed(0)}ms)`)):ee("error",Re.error||"Search failed")}else if(x==="grep"){if(!((fe=(Ce=window.electronAPI)==null?void 0:Ce.files)!=null&&fe.searchInFiles))return;const De=performance.now(),Re=await window.electronAPI.files.searchInFiles(m,y,{maxResults:5}),tt=performance.now()-De;z(tt),Re.success&&Re.data?(P(Re.data),ee("success",`Found ${Re.data.length} grep results (${tt.toFixed(0)}ms)`)):ee("error",Re.error||"Search failed")}}catch(Fe){const De=Fe instanceof Error?Fe.message:"Search failed";ee("error",De)}finally{k(!1)}};if(s)return h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(fs,{className:`animate-spin ${e?"text-neutral-400":"text-stone-500"}`,size:32})});const Q=n.filter(ge=>ge.ready),Te=t&&!n.find(ge=>ge.projectPath===t);return h.jsxs("div",{className:"space-y-6",children:[i&&h.jsx("div",{className:`p-3 rounded-lg ${e?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(w0,{size:16}),h.jsx("span",{className:"text-sm",children:i})]})}),Q.length>0&&h.jsxs("div",{className:`p-4 rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("h4",{className:`text-sm font-medium mb-3 flex items-center gap-2 ${e?"text-neutral-200":"text-stone-800"}`,children:[h.jsx(Vf,{size:14,className:"text-blue-500"}),"Test Search"]}),h.jsx("div",{className:"flex gap-2 mb-3",children:["both","semantic","grep"].map(ge=>h.jsx("button",{onClick:()=>E(ge),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${x===ge?"bg-blue-500 text-white":e?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:ge==="both"?"Both":ge==="semantic"?"Cluso (AI)":"Grep"},ge))}),h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx("select",{value:y,onChange:ge=>v(ge.target.value),className:`px-3 py-2 rounded-lg border text-sm ${e?"bg-neutral-900 border-neutral-600 text-white":"bg-white border-stone-300 text-stone-900"}`,children:Q.map(ge=>h.jsx("option",{value:ge.projectPath,children:ge.projectPath.split("/").pop()},ge.projectPath))}),h.jsx("input",{type:"text",value:m,onChange:ge=>g(ge.target.value),onKeyDown:ge=>ge.key==="Enter"&&oe(),placeholder:x==="grep"?"Search with grep...":"Search by meaning...",className:`flex-1 px-3 py-2 rounded-lg border text-sm ${e?"bg-neutral-900 border-neutral-600 text-white placeholder-neutral-500":"bg-white border-stone-300 text-stone-900 placeholder-stone-400"}`}),h.jsx("button",{onClick:oe,disabled:T||!m.trim(),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${T||!m.trim()?"opacity-50 cursor-not-allowed bg-neutral-700 text-neutral-400":e?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:T?h.jsx(fs,{size:14,className:"animate-spin"}):h.jsx(Vf,{size:14})})]}),x==="both"&&(I||M)&&h.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:`text-xs font-medium ${e?"text-purple-400":"text-purple-600"}`,children:"Cluso (AI Semantic)"}),j&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-600"}`,children:[j.toFixed(0),"ms"]})]}),I&&I.length>0?h.jsx("div",{className:"space-y-2",children:I.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.filePath.split("/").pop(),":",ge.metadata.startLine]}),h.jsxs("span",{className:`px-2 py-0.5 rounded-full ${ge.similarity>.7?"bg-green-500/20 text-green-400":ge.similarity>.5?"bg-yellow-500/20 text-yellow-400":"bg-neutral-500/20 text-neutral-400"}`,children:[(ge.similarity*100).toFixed(0),"%"]})]}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,150),ge.content.length>150?"...":""]})]},Ce))}):h.jsx("p",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:"No semantic results"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:`text-xs font-medium ${e?"text-green-400":"text-green-600"}`,children:"Grep (Keyword)"}),U&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600"}`,children:[U.toFixed(0),"ms"]})]}),M&&M.length>0?h.jsx("div",{className:"space-y-2",children:M.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("div",{className:"mb-1",children:h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.file.split("/").pop(),":",ge.line]})}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,150),ge.content.length>150?"...":""]})]},Ce))}):h.jsx("p",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:"No grep results"})]})]}),x==="semantic"&&I&&h.jsxs("div",{className:"mt-3",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("span",{className:`text-xs font-medium ${e?"text-purple-400":"text-purple-600"}`,children:["Cluso (AI Semantic) - ",I.length," results"]}),j&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-600"}`,children:[j.toFixed(0),"ms"]})]}),I.length>0?h.jsx("div",{className:"space-y-2",children:I.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.filePath.split("/").pop(),":",ge.metadata.startLine]}),h.jsxs("span",{className:`px-2 py-0.5 rounded-full ${ge.similarity>.7?"bg-green-500/20 text-green-400":ge.similarity>.5?"bg-yellow-500/20 text-yellow-400":"bg-neutral-500/20 text-neutral-400"}`,children:[(ge.similarity*100).toFixed(0),"%"]})]}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,200),ge.content.length>200?"...":""]})]},Ce))}):h.jsx("p",{className:`text-sm ${e?"text-neutral-500":"text-stone-500"}`,children:"No results found"})]}),x==="grep"&&M&&h.jsxs("div",{className:"mt-3",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("span",{className:`text-xs font-medium ${e?"text-green-400":"text-green-600"}`,children:["Grep (Keyword) - ",M.length," results"]}),U&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600"}`,children:[U.toFixed(0),"ms"]})]}),M.length>0?h.jsx("div",{className:"space-y-2",children:M.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("div",{className:"mb-1",children:h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.file.split("/").pop(),":",ge.line]})}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,200),ge.content.length>200?"...":""]})]},Ce))}):h.jsx("p",{className:`text-sm ${e?"text-neutral-500":"text-stone-500"}`,children:"No results found"})]})]}),Te&&h.jsx("div",{className:`p-4 rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-500"}),h.jsxs("div",{children:[h.jsxs("div",{className:`text-sm font-medium ${e?"text-white":"text-stone-900"}`,children:[t==null?void 0:t.split("/").pop(),h.jsx("span",{className:`ml-2 text-xs px-1.5 py-0.5 rounded ${e?"bg-yellow-500/20 text-yellow-400":"bg-yellow-100 text-yellow-600"}`,children:"current"})]}),h.jsx("div",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:"Not indexed"})]})]}),h.jsxs("button",{onClick:()=>ie(t),disabled:l===t,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${l===t?"opacity-50 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white"}`,children:[l===t?h.jsx(fs,{size:12,className:"animate-spin"}):h.jsx(wN,{size:12}),"Initialize"]})]})}),n.length>0&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ax,{size:16,className:e?"text-neutral-400":"text-stone-500"}),h.jsx("span",{className:`text-sm font-medium ${e?"text-neutral-200":"text-stone-800"}`,children:"Indexed Projects"}),h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,children:n.length})]}),h.jsx("button",{onClick:re,className:`p-1.5 rounded-lg transition-colors ${e?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Refresh",children:h.jsx(f0,{size:14})})]}),n.map(ge=>{var tt;const Ce=ge.projectPath.split("/").pop()||ge.projectPath,fe=ge.projectPath===t,Fe=l===ge.projectPath,De=u[ge.projectPath],Re=!!De;return h.jsxs("div",{className:`p-4 rounded-xl border ${fe?e?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200":e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${Re||ge.indexing?"bg-blue-500 animate-pulse":ge.ready?"bg-green-500":"bg-neutral-500"}`}),h.jsxs("div",{children:[h.jsxs("div",{className:`text-sm font-medium ${e?"text-white":"text-stone-900"}`,children:[Ce,fe&&h.jsx("span",{className:`ml-2 text-xs px-1.5 py-0.5 rounded ${e?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-600"}`,children:"current"})]}),h.jsx("div",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:Re?De.phase==="scanning"?`Scanning... ${De.total>0?`${De.total} files found`:""}`:`Indexing ${De.current}/${De.total} files`:ge.indexing?"Indexing...":ge.ready?"Ready":ge.error||"Not initialized"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[(Re||ge.indexing)&&h.jsx(fs,{size:14,className:"text-blue-500 animate-spin"}),!ge.ready&&!ge.indexing&&h.jsxs("button",{onClick:()=>ie(ge.projectPath),disabled:Fe,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${Fe?"opacity-50 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white"}`,children:[Fe?h.jsx(fs,{size:12,className:"animate-spin"}):h.jsx(wN,{size:12}),"Initialize"]}),ge.ready&&h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:()=>te(ge.projectPath),disabled:Fe||ge.indexing||Re,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${Fe||ge.indexing||Re?"opacity-50 cursor-not-allowed":e?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:[h.jsx(f0,{size:12}),"Resync"]}),h.jsxs("button",{onClick:()=>Z(ge.projectPath),disabled:Fe||ge.indexing||Re,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${Fe||ge.indexing||Re?"opacity-50 cursor-not-allowed":e?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:[h.jsx(Lf,{size:12}),"Clear"]})]})]})]}),Re&&h.jsx("div",{className:"mb-3",children:De.phase==="scanning"?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`h-1.5 flex-1 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-stone-200"}`,children:h.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 animate-pulse",style:{width:"100%"}})}),h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:["Scanning",De.total>0?` (${De.total} files)`:"..."]})]}):De.total>0?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:((tt=De.currentFile)==null?void 0:tt.split("/").pop())||"Processing..."}),h.jsxs("span",{className:`text-xs font-mono ${e?"text-neutral-500":"text-stone-400"}`,children:[Math.round(De.current/De.total*100),"%"]})]}),h.jsx("div",{className:`h-1.5 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-stone-200"}`,children:h.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${Math.round(De.current/De.total*100)}%`}})})]}):h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fs,{size:12,className:"text-blue-500 animate-spin"}),h.jsx("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:"Preparing..."})]})}),ge.stats&&!Re&&h.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(R1e,{size:12,className:e?"text-blue-400":"text-blue-600"}),h.jsxs("span",{className:e?"text-neutral-400":"text-stone-600",children:[ge.stats.totalFiles.toLocaleString()," files"]})]}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(H1e,{size:12,className:e?"text-purple-400":"text-purple-600"}),h.jsxs("span",{className:e?"text-neutral-400":"text-stone-600",children:[ge.stats.totalChunks.toLocaleString()," chunks"]})]}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(C1e,{size:12,className:e?"text-green-400":"text-green-600"}),h.jsx("span",{className:e?"text-neutral-400":"text-stone-600",children:xje(ge.stats.databaseSize)})]})]})]},ge.projectPath)})]}),n.length===0&&!Te&&h.jsx("div",{className:`p-4 rounded-xl border ${e?"bg-yellow-500/10 border-yellow-500/30":"bg-yellow-50 border-yellow-200"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(w0,{size:16,className:"text-yellow-500"}),h.jsx("span",{className:`text-sm ${e?"text-yellow-400":"text-yellow-700"}`,children:"Open a project folder to enable code indexing"})]})}),h.jsxs("div",{className:`rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("button",{onClick:()=>X(!G),className:`w-full p-4 flex items-center justify-between ${e?"text-neutral-200":"text-stone-800"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Pbe,{size:16,className:e?"text-neutral-400":"text-stone-500"}),h.jsx("span",{className:"text-sm font-medium",children:"Activity Log"}),h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,children:H.length})]}),G?h.jsx(Pq,{size:16}):h.jsx(Df,{size:16})]}),G&&h.jsx("div",{ref:J,className:`px-4 pb-4 max-h-48 overflow-y-auto font-mono text-xs space-y-1 ${e?"text-neutral-400":"text-stone-600"}`,children:H.length===0?h.jsx("p",{className:"text-center py-4 opacity-50",children:"No activity yet"}):H.map((ge,Ce)=>h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("span",{className:e?"text-neutral-600":"text-stone-400",children:["[",wje(ge.timestamp),"]"]}),h.jsx("span",{className:ge.type==="success"?"text-green-500":ge.type==="error"?"text-red-500":ge.type==="event"?"text-purple-400":e?"text-neutral-300":"text-stone-700",children:ge.message})]},Ce))})]}),h.jsxs("div",{className:`p-4 rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsx("h4",{className:`text-sm font-medium mb-3 ${e?"text-neutral-200":"text-stone-800"}`,children:"Features"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(ad,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Local embeddings (no API costs)"})]}),h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(ad,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Real-time indexing on file changes"})]}),h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(ad,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Code-aware chunking (functions, classes)"})]}),h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(ad,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Hybrid search (semantic + keyword boost)"})]})]})]})]})}const G2={autoConnect:!0,sendAnalytics:!1,fontSize:"medium",showLineNumbers:!0,providers:[{id:"google",name:"Google AI (Gemini)",apiKey:"",enabled:!0},{id:"openai",name:"OpenAI",apiKey:"",enabled:!1},{id:"anthropic",name:"Anthropic",apiKey:"",enabled:!1}],models:[{id:"claude-sonnet-4-5",name:"Claude Sonnet 4.5",provider:"claude-code",enabled:!0},{id:"claude-opus-4-5",name:"Claude Opus 4.5",provider:"claude-code",enabled:!0},{id:"claude-haiku-4-5",name:"Claude Haiku 4.5",provider:"claude-code",enabled:!0},{id:"claude-3-5-sonnet",name:"Claude 3.5 Sonnet",provider:"anthropic",enabled:!1},{id:"claude-3-opus",name:"Claude 3 Opus",provider:"anthropic",enabled:!1},{id:"gpt-4o",name:"GPT-4o",provider:"openai",enabled:!1},{id:"gpt-4o-mini",name:"GPT-4o Mini",provider:"openai",enabled:!1},{id:"gpt-5.1",name:"GPT-5.1",provider:"codex",enabled:!1},{id:"gpt-5.1-mini",name:"GPT-5.1 Mini",provider:"codex",enabled:!1},{id:"gpt-5.1-nano",name:"GPT-5.1 Nano",provider:"codex",enabled:!1},{id:"gpt-5.1-codex",name:"GPT-5.1 Codex",provider:"codex",enabled:!1},{id:"gemini-3-pro-preview",name:"Gemini 3.0 Pro",provider:"google",enabled:!0},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",provider:"google",enabled:!0},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",provider:"google",enabled:!0},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash Lite",provider:"google",enabled:!0}],connections:[{id:"1",name:"Example SSE Server",type:"mcp",transport:{type:"sse",url:"http://localhost:3001"},enabled:!1}]},Xz=[{id:"general",label:"General",icon:h.jsx(tS,{size:18})},{id:"display",label:"Display",icon:h.jsx(xN,{size:18})},{id:"providers",label:"Providers",icon:h.jsx(Bq,{size:18})},{id:"models",label:"Models",icon:h.jsx(f1,{size:18})},{id:"mcp",label:"MCP Servers",icon:h.jsx(Hq,{size:18})},{id:"lsp",label:"Language Servers",icon:h.jsx(ld,{size:18})},{id:"themes",label:"Themes",icon:h.jsx(cv,{size:18})},{id:"codeindex",label:"Code Index",icon:h.jsx(ax,{size:18})},{id:"pro",label:"Pro Features",icon:h.jsx(Gl,{size:18})}],cne={small:"14px",medium:"16px",large:"18px"};function G5(e,t){e=e.replace(/^#/,"");let n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return n=Math.min(255,Math.max(0,Math.round(n+n*t/100))),r=Math.min(255,Math.max(0,Math.round(r+r*t/100))),s=Math.min(255,Math.max(0,Math.round(s+s*t/100))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}function _je({isOpen:e,onClose:t,isDarkMode:n,onToggleDarkMode:r,settings:s,onSettingsChange:o,projectPath:i}){var Io;const[a,l]=w.useState("general"),[c,u]=w.useState({}),{currentTheme:f,setTheme:m,themes:g}=hR(),[y,v]=w.useState(!1),[x,E]=w.useState(null),[T,k]=w.useState(null),[I,O]=w.useState(""),[M,P]=w.useState({authenticated:!1,expiresAt:null}),[j,V]=w.useState(null),[U,z]=w.useState(!1),[H,F]=w.useState({authenticated:!1,expiresAt:null}),[G,X]=w.useState(!1),[J,ee]=w.useState(null),[re,ie]=w.useState(!1),[Z,te]=w.useState("idle"),[oe,Q]=w.useState(null),[Te,ge]=w.useState(null),[Ce,fe]=w.useState(null),[Fe,De]=w.useState(""),[Re,tt]=w.useState({}),[de,nt]=w.useState(!1),[ot,Ut]=w.useState(new Set),[Vt,Dt]=w.useState([]),[en,xt]=w.useState(!1),[pe,Ne]=w.useState(new Set),[$e,Je]=w.useState(null);w.useEffect(()=>{var at,rt,mt,Ht,Ur,ks;e&&((at=window.electronAPI)!=null&&at.oauth)&&window.electronAPI.oauth.getStatus().then(Kn=>{P(Kn),Kn.authenticated!==s.claudeCodeAuthenticated&&o({...s,claudeCodeAuthenticated:Kn.authenticated,claudeCodeExpiresAt:Kn.expiresAt,models:s.models.map(Hr=>Hr.provider==="claude-code"?{...Hr,enabled:Kn.authenticated}:Hr)})}),e&&((rt=window.electronAPI)!=null&&rt.codex)&&window.electronAPI.codex.getStatus().then(Kn=>{F(Kn),Kn.authenticated!==s.codexAuthenticated&&o({...s,codexAuthenticated:Kn.authenticated,codexExpiresAt:Kn.expiresAt,models:s.models.map(Hr=>Hr.provider==="codex"?{...Hr,enabled:Kn.authenticated}:Hr)})}),e&&((Ht=(mt=window.electronAPI)==null?void 0:mt.mcp)!=null&&Ht.discover)&&Le(),e&&((ks=(Ur=window.electronAPI)==null?void 0:Ur.lsp)!=null&&ks.getStatus)&&(Ve(),L())},[e]),w.useEffect(()=>{var rt,mt,Ht,Ur,ks;if(!e)return;if(!((rt=window.electronAPI)!=null&&rt.updates)){De(Fe||"web");return}(Ht=(mt=window.electronAPI.updates).getVersion)==null||Ht.call(mt).then(Kn=>{Kn!=null&&Kn.version&&De(Kn.version)}).catch(()=>{});const at=(ks=(Ur=window.electronAPI.updates).onEvent)==null?void 0:ks.call(Ur,Kn=>{var Hr;if(Kn!=null&&Kn.type)switch(fe(null),Kn.type){case"checking":te("checking"),ge(null);break;case"available":te("available"),Q(Kn.info||null),ge(null);break;case"none":te("idle"),Q(null),ge(null);break;case"progress":te("downloading"),ge(typeof((Hr=Kn==null?void 0:Kn.progress)==null?void 0:Hr.percent)=="number"?Kn.progress.percent:null);break;case"ready":te("ready"),Q(Kn.info||oe),ge(null);break;case"error":te("error"),fe(Kn.message||"Update error");break}});return()=>{at==null||at()}},[Fe,e,oe]);const Le=async()=>{var at,rt,mt,Ht;if((rt=(at=window.electronAPI)==null?void 0:at.mcp)!=null&&rt.discover){nt(!0);try{let Ur;if((Ht=(mt=window.electronAPI)==null?void 0:mt.files)!=null&&Ht.getCwd)try{const Kn=await window.electronAPI.files.getCwd();Kn!=null&&Kn.path&&(Ur=Kn.path)}catch{}const ks=await window.electronAPI.mcp.discover(Ur);ks.success&&ks.discovered&&(tt(ks.discovered),console.log("Discovered MCP servers:",ks.discovered))}catch(Ur){console.error("Failed to discover MCP servers:",Ur)}finally{nt(!1)}}},Ve=async()=>{var at,rt;if((rt=(at=window.electronAPI)==null?void 0:at.lsp)!=null&&rt.getStatus){xt(!0);try{const mt=await window.electronAPI.lsp.getStatus();mt.success&&mt.data&&Dt(mt.data)}catch(mt){console.error("Failed to load LSP status:",mt)}finally{xt(!1)}}},_e=async(at,rt)=>{var mt,Ht;if((Ht=(mt=window.electronAPI)==null?void 0:mt.lsp)!=null&&Ht.setServerEnabled)try{await window.electronAPI.lsp.setServerEnabled(at,rt),Ve()}catch(Ur){console.error("Failed to toggle LSP server:",Ur)}},Y=async at=>{var rt,mt;if((mt=(rt=window.electronAPI)==null?void 0:rt.lsp)!=null&&mt.installServer){Ne(Ht=>new Set([...Ht,at]));try{const Ht=await window.electronAPI.lsp.installServer(at);Ht.success?(await Ve(),await L()):console.error("Failed to install LSP server:",Ht.error)}catch(Ht){console.error("Failed to install LSP server:",Ht)}finally{Ne(Ht=>{const Ur=new Set(Ht);return Ur.delete(at),Ur})}}},L=async()=>{var at,rt;if((rt=(at=window.electronAPI)==null?void 0:at.lsp)!=null&&rt.getCacheInfo)try{const mt=await window.electronAPI.lsp.getCacheInfo();mt.success&&mt.data&&Je({cacheSize:mt.data.cacheSize,cacheDir:mt.data.cacheDir})}catch(mt){console.error("Failed to load LSP cache info:",mt)}},B=async()=>{var at,rt;if((rt=(at=window.electronAPI)==null?void 0:at.lsp)!=null&&rt.clearCache)try{(await window.electronAPI.lsp.clearCache()).success&&(await L(),await Ve())}catch(mt){console.error("Failed to clear LSP cache:",mt)}},ce=async()=>{var rt,mt;if(!((mt=(rt=window.electronAPI)==null?void 0:rt.updates)!=null&&mt.check)){fe("Updates are available only in the desktop app"),te("error");return}fe(null),ge(null),te("checking");const at=await window.electronAPI.updates.check();(at==null?void 0:at.success)===!1&&(te("error"),fe(at.error||"Failed to check for updates"))},we=async()=>{var rt,mt;if(!((mt=(rt=window.electronAPI)==null?void 0:rt.updates)!=null&&mt.download)){fe("Updates are available only in the desktop app"),te("error");return}fe(null),te("downloading"),ge(null);const at=await window.electronAPI.updates.download();(at==null?void 0:at.success)===!1&&(te("error"),fe(at.error||"Failed to download update"))},ze=async()=>{var at,rt;if(!((rt=(at=window.electronAPI)==null?void 0:at.updates)!=null&&rt.install)){fe("Updates are available only in the desktop app"),te("error");return}fe(null),await window.electronAPI.updates.install()},Be=at=>{Ut(rt=>{const mt=new Set(rt);return mt.has(at)?mt.delete(at):mt.add(at),mt})};if(!e)return null;const ut=at=>{o({...s,...at})},an=at=>{u(rt=>({...rt,[at]:!rt[at]}))},zt=(at,rt)=>{ut({providers:s.providers.map(mt=>mt.id===at?{...mt,apiKey:rt,verified:!1}:mt)})},dn=at=>{ut({providers:s.providers.map(rt=>rt.id===at?{...rt,enabled:!rt.enabled}:rt)})},on=async at=>{const rt=s.providers.find(mt=>mt.id===at);if(rt!=null&&rt.apiKey){ut({providers:s.providers.map(mt=>mt.id===at?{...mt,verifying:!0,verified:!1}:mt)});try{let mt=!1;at==="google"?mt=(await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${rt.apiKey}`)).ok:at==="openai"?mt=(await fetch("https://api.openai.com/v1/models",{headers:{Authorization:`Bearer ${rt.apiKey}`}})).ok:at==="anthropic"&&(mt=rt.apiKey.startsWith("sk-ant-")),ut({providers:s.providers.map(Ht=>Ht.id===at?{...Ht,verifying:!1,verified:mt}:Ht)})}catch{ut({providers:s.providers.map(mt=>mt.id===at?{...mt,verifying:!1,verified:!1}:mt)})}}},Va=async(at,rt)=>{var mt;if(!((mt=window.electronAPI)!=null&&mt.oauth)){E("OAuth is only available in the desktop app");return}v(!0),E(null);try{const Ht=await window.electronAPI.oauth.startLogin(at);if(Ht.success)if(Ht.autoCompleted){if(Ht.mode==="api-key"&&Ht.apiKey)ut({providers:s.providers.map(Ur=>Ur.id==="anthropic"?{...Ur,apiKey:Ht.apiKey,verified:!0,enabled:!0}:Ur)});else if(Ht.mode==="oauth"){const Ur=await window.electronAPI.oauth.getStatus();P(Ur),ut({claudeCodeAuthenticated:!0,claudeCodeExpiresAt:Ur.expiresAt,models:s.models.map(ks=>ks.provider==="claude-code"?{...ks,enabled:!0}:ks)})}k(null),O("")}else k({mode:at,createKey:rt}),O("");else E(Ht.error||"Failed to start OAuth flow")}catch(Ht){E(Ht instanceof Error?Ht.message:"Unknown error")}finally{v(!1)}},Nn=async()=>{var at;if(!(!((at=window.electronAPI)!=null&&at.oauth)||!T)){v(!0),E(null);try{const rt=await window.electronAPI.oauth.completeLogin(I,T.createKey);if(rt.success){if(rt.mode==="api-key"&&rt.apiKey)ut({providers:s.providers.map(mt=>mt.id==="anthropic"?{...mt,apiKey:rt.apiKey,verified:!0,enabled:!0}:mt)});else if(rt.mode==="oauth"){const mt=await window.electronAPI.oauth.getStatus();P(mt),ut({claudeCodeAuthenticated:!0,claudeCodeExpiresAt:mt.expiresAt,models:s.models.map(Ht=>Ht.provider==="claude-code"?{...Ht,enabled:!0}:Ht)})}k(null),O("")}else E(rt.error||"Failed to complete OAuth flow")}catch(rt){E(rt instanceof Error?rt.message:"Unknown error")}finally{v(!1)}}},Qn=async()=>{var at;(at=window.electronAPI)!=null&&at.oauth&&await window.electronAPI.oauth.cancel(),k(null),O(""),E(null)},wt=async()=>{var at;if((at=window.electronAPI)!=null&&at.oauth)try{await window.electronAPI.oauth.logout(),P({authenticated:!1,expiresAt:null}),ut({claudeCodeAuthenticated:!1,claudeCodeExpiresAt:null,models:s.models.map(rt=>rt.provider==="claude-code"?{...rt,enabled:!1}:rt)})}catch(rt){E(rt instanceof Error?rt.message:"Unknown error")}},sn=async()=>{var at,rt;if((rt=(at=window.electronAPI)==null?void 0:at.oauth)!=null&&rt.testApi){z(!0),V(null);try{const mt=await window.electronAPI.oauth.testApi();mt.success?(V({success:!0,message:"API call succeeded!"}),Yr.general.log("API Test Response:",mt.response)):(V({success:!1,message:mt.error||"API call failed"}),Yr.general.log("API Test Error:",mt.error))}catch(mt){V({success:!1,message:mt instanceof Error?mt.message:"Unknown error"})}finally{z(!1)}}},ye=async()=>{var at;if(!((at=window.electronAPI)!=null&&at.codex)){E("Codex OAuth is only available in the desktop app");return}X(!0),E(null);try{const rt=await window.electronAPI.codex.startLogin();if(rt.success){if(rt.autoCompleted){const mt=await window.electronAPI.codex.getStatus();F(mt),ut({codexAuthenticated:!0,codexExpiresAt:mt.expiresAt,models:s.models.map(Ht=>Ht.provider==="codex"?{...Ht,enabled:!0}:Ht)})}}else E(rt.error||"Failed to start Codex OAuth flow")}catch(rt){E(rt instanceof Error?rt.message:"Unknown error")}finally{X(!1)}},Ue=async()=>{var at;if((at=window.electronAPI)!=null&&at.codex)try{await window.electronAPI.codex.logout(),F({authenticated:!1,expiresAt:null}),ut({codexAuthenticated:!1,codexExpiresAt:null,models:s.models.map(rt=>rt.provider==="codex"?{...rt,enabled:!1}:rt)})}catch(rt){E(rt instanceof Error?rt.message:"Unknown error")}},ht=async()=>{var at,rt;if((rt=(at=window.electronAPI)==null?void 0:at.codex)!=null&&rt.testApi){ie(!0),ee(null);try{const mt=await window.electronAPI.codex.testApi();mt.success?(ee({success:!0,message:"Codex API call succeeded!"}),Yr.general.log("Codex API Test Response:",mt.response)):(ee({success:!1,message:mt.error||"Codex API call failed"}),Yr.general.log("Codex API Test Error:",mt.error))}catch(mt){ee({success:!1,message:mt instanceof Error?mt.message:"Unknown error"})}finally{ie(!1)}}},Zt=at=>{ut({models:s.models.map(rt=>rt.id===at?{...rt,enabled:!rt.enabled}:rt)})},hr=at=>{ut({connections:s.connections.map(rt=>rt.id===at?{...rt,enabled:!rt.enabled}:rt)})},Yn=at=>{ut({connections:s.connections.filter(rt=>rt.id!==at)})},Rt=at=>{if(at==="claude-code")return"Claude Code (OAuth)";if(at==="codex")return"Codex (ChatGPT Plus/Pro)";const rt=s.providers.find(mt=>mt.id===at);return(rt==null?void 0:rt.name)||at},Bt=at=>{const rt=s.providers.find(mt=>mt.id===at);return(rt==null?void 0:rt.enabled)&&!!(rt!=null&&rt.apiKey)},fn=()=>{var at,rt,mt,Ht,Ur,ks,Kn,Hr,ia;switch(a){case"general":return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Startup"}),h.jsxs("label",{className:"flex items-center justify-between py-2",children:[h.jsx("span",{className:`text-sm ${n?"text-neutral-300":"text-stone-600"}`,children:"Auto-connect on launch"}),h.jsx("button",{onClick:()=>ut({autoConnect:!s.autoConnect}),className:`w-10 h-6 rounded-full transition-colors relative ${s.autoConnect?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${s.autoConnect?"left-5":"left-1"}`})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Updates"}),h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{children:[h.jsxs("p",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:["Current version: ",Fe||"unknown"]}),h.jsxs("p",{className:`text-xs mt-1 ${n?"text-neutral-500":"text-stone-500"}`,children:[Z==="available"&&h.jsxs(h.Fragment,{children:["Update available",oe!=null&&oe.version?` (${oe.version})`:""]}),Z==="checking"&&"Checking for updates...",Z==="downloading"&&"Downloading update...",Z==="ready"&&"Update downloaded. Restart to install.",Z==="idle"&&"Manual checks only. No auto-downloads.",Z==="error"&&(Ce||"Update error"),!((at=window.electronAPI)!=null&&at.updates)&&"Updates are only available in the desktop app."]})]}),Z==="downloading"&&h.jsx("div",{className:`text-xs px-2 py-1 rounded ${n?"bg-blue-500/20 text-blue-200":"bg-blue-50 text-blue-600"}`,children:`${Math.round(Te||0)}%`}),Z==="available"&&(oe==null?void 0:oe.version)&&h.jsx("div",{className:`text-xs px-2 py-1 rounded ${n?"bg-emerald-500/20 text-emerald-200":"bg-emerald-50 text-emerald-700"}`,children:`v${oe.version}`}),Z==="ready"&&h.jsx("div",{className:`text-xs px-2 py-1 rounded ${n?"bg-emerald-500/20 text-emerald-200":"bg-emerald-50 text-emerald-700"}`,children:"Downloaded"})]}),h.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[h.jsxs("button",{onClick:ce,disabled:Z==="checking"||Z==="downloading"||!((rt=window.electronAPI)!=null&&rt.updates),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Z==="checking"||Z==="downloading"||!((mt=window.electronAPI)!=null&&mt.updates)?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[Z==="checking"?h.jsx(fs,{size:14,className:"animate-spin"}):h.jsx(f0,{size:14}),"Check for updates"]}),h.jsxs("button",{onClick:we,disabled:Z!=="available"&&Z!=="downloading"||!((Ht=window.electronAPI)!=null&&Ht.updates),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Z!=="available"&&Z!=="downloading"||!((Ur=window.electronAPI)!=null&&Ur.updates)?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:[Z==="downloading"?h.jsx(fs,{size:14,className:"animate-spin"}):h.jsx(X_,{size:14}),Z==="downloading"&&typeof Te=="number"?`Downloading (${Math.round(Te)}%)`:"Download update"]}),h.jsxs("button",{onClick:ze,disabled:Z!=="ready"||!((ks=window.electronAPI)!=null&&ks.updates),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Z!=="ready"||!((Kn=window.electronAPI)!=null&&Kn.updates)?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20":"bg-purple-50 text-purple-600 hover:bg-purple-100"}`,children:[h.jsx(ax,{size:14}),"Restart to install"]})]}),Ce&&h.jsx("p",{className:`text-xs mt-2 ${n?"text-red-400":"text-red-600"}`,children:Ce})]})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Privacy"}),h.jsxs("label",{className:"flex items-center justify-between py-2",children:[h.jsxs("div",{children:[h.jsx("span",{className:`text-sm ${n?"text-neutral-300":"text-stone-600"}`,children:"Send anonymous usage data"}),h.jsx("p",{className:`text-xs mt-0.5 ${n?"text-neutral-500":"text-stone-400"}`,children:"Help improve Cluso by sharing anonymous analytics"})]}),h.jsx("button",{onClick:()=>ut({sendAnalytics:!s.sendAnalytics}),className:`w-10 h-6 rounded-full transition-colors relative flex-shrink-0 ml-4 ${s.sendAnalytics?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${s.sendAnalytics?"left-5":"left-1"}`})})]})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Data"}),h.jsx("button",{className:`text-sm px-3 py-2 rounded-lg transition-colors ${n?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:"Clear all local data"})]})]});case"display":return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Theme"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:()=>n&&r(),className:`flex-1 flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${n?"border-neutral-700 hover:border-neutral-600":"border-blue-500 bg-blue-50 ring-2 ring-blue-500/20"}`,children:[h.jsx(Wq,{size:24,className:n?"text-neutral-400":"text-blue-500"}),h.jsx("span",{className:`text-sm font-medium ${n?"text-neutral-400":"text-blue-600"}`,children:"Light"})]}),h.jsxs("button",{onClick:()=>!n&&r(),className:`flex-1 flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${n?"border-blue-500 bg-blue-500/10 ring-2 ring-blue-500/20":"border-stone-200 hover:border-stone-300"}`,children:[h.jsx(Uq,{size:24,className:n?"text-blue-400":"text-stone-400"}),h.jsx("span",{className:`text-sm font-medium ${n?"text-blue-400":"text-stone-400"}`,children:"Dark"})]})]})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Font Size"}),h.jsx("div",{className:"flex gap-2",children:["small","medium","large"].map(kt=>h.jsx("button",{onClick:()=>ut({fontSize:kt}),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${s.fontSize===kt?"bg-blue-500 text-white":n?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,style:{fontSize:cne[kt]},children:kt.charAt(0).toUpperCase()+kt.slice(1)},kt))}),h.jsx("p",{className:`text-xs mt-2 ${n?"text-neutral-500":"text-stone-400"}`,children:"Affects chat messages and code blocks"})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Code Editor"}),h.jsxs("label",{className:"flex items-center justify-between py-2",children:[h.jsx("span",{className:`text-sm ${n?"text-neutral-300":"text-stone-600"}`,children:"Show line numbers"}),h.jsx("button",{onClick:()=>ut({showLineNumbers:!s.showLineNumbers}),className:`w-10 h-6 rounded-full transition-colors relative ${s.showLineNumbers?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${s.showLineNumbers?"left-5":"left-1"}`})})]})]})]});case"providers":return h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:`text-sm ${n?"text-neutral-400":"text-stone-500"}`,children:"Configure API providers for AI models. Add your API keys to enable different providers."}),x&&h.jsx("div",{className:`p-3 rounded-lg ${n?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(bN,{size:16}),h.jsx("span",{className:"text-sm",children:x}),h.jsx("button",{onClick:()=>E(null),className:"ml-auto",children:h.jsx(qr,{size:14})})]})}),T&&h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-blue-500/30 bg-blue-500/10":"border-blue-200 bg-blue-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(bL,{size:16,className:n?"text-blue-400":"text-blue-600"}),h.jsx("span",{className:`text-sm font-medium ${n?"text-blue-300":"text-blue-700"}`,children:"Enter OAuth Code"})]}),h.jsx("p",{className:`text-xs mb-3 ${n?"text-blue-400":"text-blue-600"}`,children:"A browser window opened. After authorizing, copy the code and paste it here."}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:I,onChange:kt=>O(kt.target.value),placeholder:"Paste authorization code...",className:`flex-1 px-3 py-2 rounded-lg text-sm ${n?"bg-neutral-700 border-neutral-600 text-neutral-200 placeholder-neutral-500":"bg-white border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`}),h.jsxs("button",{onClick:Nn,disabled:!I||y,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${I?n?"bg-purple-500 text-white hover:bg-purple-600":"bg-purple-600 text-white hover:bg-purple-700":n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed"}`,children:[y?h.jsx(fs,{size:14,className:"animate-spin"}):h.jsx(Ts,{size:14}),"Complete"]}),h.jsx("button",{onClick:Qn,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,children:"Cancel"})]})]}),h.jsx("div",{className:"space-y-3",children:s.providers.map(kt=>{var Bn;return h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${kt.enabled&&kt.apiKey?"bg-green-500/10 text-green-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(Bq,{size:16})}),h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:kt.name}),kt.verified&&h.jsx(ad,{size:16,className:"text-green-500"})]}),h.jsx("button",{onClick:()=>dn(kt.id),className:`w-10 h-6 rounded-full transition-colors relative ${kt.enabled?"bg-green-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${kt.enabled?"left-5":"left-1"}`})})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"flex-1 relative",children:[h.jsx("input",{type:c[kt.id]?"text":"password",value:kt.apiKey,onChange:gt=>zt(kt.id,gt.target.value),placeholder:"Enter API key...",className:`w-full px-3 py-2 pr-10 rounded-lg text-sm ${n?"bg-neutral-700 border-neutral-600 text-neutral-200 placeholder-neutral-500":"bg-white border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-blue-500/50`}),h.jsx("button",{onClick:()=>an(kt.id),className:`absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded ${n?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,children:c[kt.id]?h.jsx(zq,{size:16}):h.jsx(mR,{size:16})})]}),h.jsxs("button",{onClick:()=>on(kt.id),disabled:!kt.apiKey||kt.verifying,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${kt.apiKey?kt.verified?"bg-green-500/10 text-green-500":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100":n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed"}`,children:[kt.verifying?h.jsx(fs,{size:14,className:"animate-spin"}):kt.verified?h.jsx(ad,{size:14}):h.jsx(Ts,{size:14}),kt.verifying?"Verifying":kt.verified?"Verified":"Verify"]})]}),kt.id==="anthropic"&&((Bn=window.electronAPI)==null?void 0:Bn.oauth)&&h.jsxs("div",{className:`mt-3 pt-3 border-t ${n?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("button",{onClick:()=>Va("console",!0),disabled:y||!!T,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${y||T?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-orange-500/10 text-orange-400 hover:bg-orange-500/20":"bg-orange-50 text-orange-600 hover:bg-orange-100"}`,children:[y?h.jsx(fs,{size:14,className:"animate-spin"}):h.jsx(bL,{size:14}),"Get API Key via OAuth"]}),h.jsx("p",{className:`text-xs mt-1.5 ${n?"text-neutral-500":"text-stone-400"}`,children:"Use your Anthropic Console account to create an API key"})]})]},kt.id)})}),((Hr=window.electronAPI)==null?void 0:Hr.oauth)&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"} my-4`}),h.jsxs("div",{className:`p-4 rounded-xl border ${M.authenticated?n?"border-blue-500/30 bg-blue-500/10":"border-blue-200 bg-blue-50":n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${M.authenticated?"bg-blue-500/20 text-blue-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(bR,{size:16})}),h.jsxs("div",{children:[h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"Claude Code"}),h.jsx("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:"Use Claude with your Pro/Max subscription"})]})]}),M.authenticated&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ad,{size:16,className:"text-blue-500"}),h.jsx("span",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:"Connected"})]})]}),M.authenticated?h.jsxs("div",{className:"space-y-3",children:[M.expiresAt&&h.jsxs("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:["Token expires: ",new Date(M.expiresAt).toLocaleString()]}),h.jsxs("button",{onClick:sn,disabled:U,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${U?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[U?h.jsx(fs,{size:14,className:"animate-spin"}):h.jsx(Ts,{size:14}),"Test API Call (Direct)"]}),j&&h.jsx("p",{className:`text-xs ${j.success?n?"text-green-400":"text-green-600":n?"text-red-400":"text-red-600"}`,children:j.message}),h.jsxs("button",{onClick:wt,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:[h.jsx(vL,{size:14}),"Disconnect"]})]}):h.jsxs("button",{onClick:()=>Va("max",!1),disabled:y||!!T,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${y||T?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-purple-500 text-white hover:bg-purple-600":"bg-purple-600 text-white hover:bg-purple-700"}`,children:[y?h.jsx(fs,{size:14,className:"animate-spin"}):h.jsx(yL,{size:14}),"Login with Claude Pro/Max"]})]})]}),((ia=window.electronAPI)==null?void 0:ia.codex)&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"} my-4`}),h.jsxs("div",{className:`p-4 rounded-xl border ${H.authenticated?n?"border-blue-500/30 bg-blue-500/10":"border-blue-200 bg-blue-50":n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${H.authenticated?"bg-blue-500/20 text-blue-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(Gl,{size:16})}),h.jsxs("div",{children:[h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"Codex"}),h.jsx("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:"Use ChatGPT with your Plus/Pro subscription"})]})]}),H.authenticated&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ad,{size:16,className:"text-blue-500"}),h.jsx("span",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:"Connected"})]})]}),H.authenticated?h.jsxs("div",{className:"space-y-3",children:[H.expiresAt&&h.jsxs("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:["Token expires: ",new Date(H.expiresAt).toLocaleString()]}),h.jsxs("button",{onClick:ht,disabled:re,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${re?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[re?h.jsx(fs,{size:14,className:"animate-spin"}):h.jsx(Ts,{size:14}),"Test API Call (Direct)"]}),J&&h.jsx("p",{className:`text-xs ${J.success?n?"text-green-400":"text-green-600":n?"text-red-400":"text-red-600"}`,children:J.message}),h.jsxs("button",{onClick:Ue,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:[h.jsx(vL,{size:14}),"Disconnect"]})]}):h.jsxs("button",{onClick:ye,disabled:G,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${G?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-emerald-600 text-white hover:bg-emerald-700"}`,children:[G?h.jsx(fs,{size:14,className:"animate-spin"}):h.jsx(yL,{size:14}),"Login with ChatGPT Plus/Pro"]})]})]})]});case"models":return h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:`text-sm ${n?"text-neutral-400":"text-stone-500"}`,children:"Select which models are available in the model picker. Models require their provider to be configured."}),["google","openai","anthropic","claude-code","codex"].map(kt=>{const Bn=s.models.filter(Xr=>Xr.provider===kt);if(Bn.length===0)return null;const gt=kt==="claude-code"?M.authenticated:kt==="codex"?H.authenticated:Bt(kt);return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("h4",{className:`text-sm font-medium ${n?"text-neutral-300":"text-stone-700"}`,children:Rt(kt)}),!gt&&h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${n?"bg-yellow-500/10 text-yellow-400":"bg-yellow-50 text-yellow-600"}`,children:kt==="claude-code"||kt==="codex"?"Login with OAuth first":"Configure API key first"})]}),h.jsx("div",{className:"space-y-1",children:Bn.map(Xr=>h.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"} ${gt?"":"opacity-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${Xr.enabled&&gt?"bg-blue-500/10 text-blue-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(f1,{size:16})}),h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:Xr.name})]}),h.jsx("button",{onClick:()=>Zt(Xr.id),disabled:!gt,className:`w-10 h-6 rounded-full transition-colors relative ${Xr.enabled&&gt?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"} ${gt?"":"cursor-not-allowed"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${Xr.enabled&&gt?"left-5":"left-1"}`})})]},Xr.id))})]},kt)})]});case"mcp":return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"MCP Servers"}),h.jsx("p",{className:`text-xs mt-0.5 ${n?"text-neutral-500":"text-stone-400"}`,children:"Connect to Model Context Protocol servers for extended AI capabilities"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{onClick:Le,disabled:de,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${n?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-100 text-stone-600 hover:bg-stone-200"} ${de?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx(f0,{size:14,className:de?"animate-spin":""}),de?"Discovering...":"Refresh"]}),h.jsxs("button",{onClick:()=>{const Bn={id:`mcp_${Date.now()}`,name:"New MCP Server",type:"mcp",transport:{type:"stdio",command:"npx",args:["-y","@your/mcp-server"]},enabled:!1,status:"disconnected"};ut({connections:[...s.connections,Bn]})},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${n?"bg-purple-500/10 text-purple-400 hover:bg-purple-500/20":"bg-purple-50 text-purple-600 hover:bg-purple-100"}`,children:[h.jsx(Hf,{size:14}),"Add Server"]})]})]}),Object.keys(Re).length>0&&h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("p",{className:`text-sm font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:["Discovered Servers (",Object.keys(Re).length,")"]})}),Object.entries(Re).map(([kt,Bn])=>{var nr;const gt=Bn.name,Xr=!ot.has(gt),Ro=Bn.config.type==="stdio";return h.jsx("div",{className:`p-4 rounded-xl border transition-opacity ${Xr?n?"border-blue-500/30 bg-blue-500/5":"border-blue-200 bg-blue-50/50":n?"border-neutral-700 bg-neutral-800/30 opacity-60":"border-stone-200 bg-stone-50 opacity-60"}`,children:h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:gt}),h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold uppercase tracking-wide ${n?"bg-neutral-700 text-neutral-300":"bg-stone-200 text-stone-600"}`,children:Bn.source}),h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Ro?n?"bg-blue-500/10 text-blue-400":"bg-blue-50 text-blue-600":n?"bg-orange-500/10 text-orange-400":"bg-orange-50 text-orange-600"}`,children:Ro?"STDIO":"SSE"})]}),h.jsx("p",{className:`mt-1 text-xs truncate ${n?"text-neutral-500":"text-stone-400"}`,children:Ro?`${Bn.config.command}${(nr=Bn.config.args)!=null&&nr.length?` ${Bn.config.args.join(" ")}`:""}`:Bn.config.url}),Bn.tools&&Bn.tools.length>0&&h.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[Bn.tools.slice(0,5).map(ft=>h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,title:ft.description,children:ft.displayName},ft.name)),Bn.tools.length>5&&h.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,children:["+",Bn.tools.length-5," more"]})]}),Bn.error&&h.jsx("p",{className:`mt-1 text-xs ${n?"text-red-400":"text-red-600"}`,children:Bn.error})]}),h.jsx("button",{onClick:()=>Be(gt),className:`relative w-10 h-5 rounded-full transition-colors ${Xr?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${Xr?"left-5":"left-0.5"}`})})]})},kt)})]}),s.connections.filter(kt=>kt.type==="mcp").length>0&&h.jsxs("p",{className:`text-sm font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:["Configured Servers (",s.connections.filter(kt=>kt.type==="mcp").length,")"]}),h.jsxs("div",{className:"space-y-3",children:[s.connections.filter(kt=>kt.type==="mcp").map(kt=>{var nr,ft;const Bn=kt;let gt;if(!("transport"in kt)&&Bn.url)gt={...kt,type:"mcp",transport:{type:"sse",url:Bn.url}};else if("transport"in kt)gt=kt;else return null;const Xr=gt.transport.type==="stdio",Ro=gt.status==="connected"?"green":gt.status==="connecting"?"yellow":gt.status==="error"?"red":"neutral";return h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${gt.status==="connected"?"bg-green-500/10 text-green-500":gt.status==="connecting"?"bg-yellow-500/10 text-yellow-500":gt.status==="error"?"bg-red-500/10 text-red-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:Xr?h.jsx(ld,{size:16}):h.jsx(Pf,{size:16})}),h.jsxs("div",{children:[h.jsx("input",{type:"text",value:gt.name,onChange:Nt=>{ut({connections:s.connections.map(hn=>hn.id===gt.id?{...hn,name:Nt.target.value}:hn)})},className:`font-medium bg-transparent border-none outline-none ${n?"text-neutral-200":"text-stone-800"}`}),h.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Xr?n?"bg-blue-500/10 text-blue-400":"bg-blue-50 text-blue-600":n?"bg-orange-500/10 text-orange-400":"bg-orange-50 text-orange-600"}`,children:Xr?"STDIO":"SSE"}),gt.status&&gt.status!=="disconnected"&&h.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded flex items-center gap-1 ${Ro==="green"?n?"bg-green-500/10 text-green-400":"bg-green-50 text-green-600":Ro==="yellow"?n?"bg-yellow-500/10 text-yellow-400":"bg-yellow-50 text-yellow-600":Ro==="red"?n?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600":""}`,children:[gt.status==="connecting"&&h.jsx(fs,{size:10,className:"animate-spin"}),gt.status==="connected"&&h.jsx(ad,{size:10}),gt.status==="error"&&h.jsx(w0,{size:10}),gt.status]}),gt.toolCount!==void 0&&gt.status==="connected"&&h.jsxs("span",{className:`text-xs flex items-center gap-1 ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(Kq,{size:10}),gt.toolCount," tools"]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[((nr=window.electronAPI)==null?void 0:nr.mcp)&&h.jsx("button",{onClick:async()=>{var hn;const Nt=(hn=window.electronAPI)==null?void 0:hn.mcp;if(Nt)if(gt.status==="connected"||gt.status==="connecting")await Nt.disconnect(gt.id),ut({connections:s.connections.map(xn=>xn.id===gt.id?{...xn,status:"disconnected",toolCount:void 0,error:void 0}:xn)});else{ut({connections:s.connections.map(xn=>xn.id===gt.id?{...xn,status:"connecting",error:void 0}:xn)});try{const xn=await Nt.connect({id:gt.id,name:gt.name,transport:gt.transport,enabled:!0});if(xn.success){const Tr=await Nt.listTools(gt.id);ut({connections:s.connections.map(qs=>{var co;return qs.id===gt.id?{...qs,status:"connected",toolCount:((co=Tr.tools)==null?void 0:co.length)||0,error:void 0}:qs})})}else ut({connections:s.connections.map(Tr=>Tr.id===gt.id?{...Tr,status:"error",error:xn.error}:Tr)})}catch(xn){ut({connections:s.connections.map(Tr=>Tr.id===gt.id?{...Tr,status:"error",error:xn instanceof Error?xn.message:"Connection failed"}:Tr)})}}},className:`p-1.5 rounded-lg transition-colors ${gt.status==="connected"||gt.status==="connecting"?n?"text-red-400 hover:bg-red-500/10":"text-red-500 hover:bg-red-50":n?"text-green-400 hover:bg-green-500/10":"text-green-500 hover:bg-green-50"}`,title:gt.status==="connected"?"Disconnect":gt.status==="connecting"?"Cancel":"Connect",children:gt.status==="connecting"?h.jsx(bN,{size:14}):gt.status==="connected"?h.jsx(Gq,{size:14}):h.jsx(wN,{size:14})}),h.jsx("button",{onClick:()=>Yn(gt.id),className:`p-1.5 rounded-lg transition-colors ${n?"text-neutral-500 hover:bg-red-500/10 hover:text-red-400":"text-stone-400 hover:bg-red-50 hover:text-red-500"}`,children:h.jsx(Lf,{size:14})}),h.jsx("button",{onClick:()=>hr(gt.id),className:`w-10 h-6 rounded-full transition-colors relative ${gt.enabled?"bg-purple-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${gt.enabled?"left-5":"left-1"}`})})]})]}),gt.error&&h.jsx("div",{className:`text-xs px-3 py-2 rounded-lg mb-3 ${n?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:gt.error}),h.jsxs("div",{className:`space-y-2 p-3 rounded-lg ${n?"bg-neutral-900/50":"bg-white"}`,children:[h.jsxs("div",{className:"flex gap-2 mb-3",children:[h.jsxs("button",{onClick:()=>{ut({connections:s.connections.map(Nt=>Nt.id===gt.id?{...Nt,transport:{type:"stdio",command:"npx",args:["-y","@your/mcp-server"]}}:Nt)})},className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${Xr?n?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-blue-100 text-blue-700 border border-blue-200":n?"bg-neutral-800 text-neutral-400 border border-neutral-700 hover:border-neutral-600":"bg-stone-100 text-stone-500 border border-stone-200 hover:border-stone-300"}`,children:[h.jsx(ld,{size:14}),"stdio"]}),h.jsxs("button",{onClick:()=>{ut({connections:s.connections.map(Nt=>Nt.id===gt.id?{...Nt,transport:{type:"sse",url:"http://localhost:3001"}}:Nt)})},className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${Xr?n?"bg-neutral-800 text-neutral-400 border border-neutral-700 hover:border-neutral-600":"bg-stone-100 text-stone-500 border border-stone-200 hover:border-stone-300":n?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"bg-orange-100 text-orange-700 border border-orange-200"}`,children:[h.jsx(Pf,{size:14}),"SSE/HTTP"]})]}),Xr&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Command"}),h.jsx("input",{type:"text",value:gt.transport.command,onChange:Nt=>{ut({connections:s.connections.map(hn=>hn.id===gt.id?{...hn,transport:{...gt.transport,command:Nt.target.value}}:hn)})},placeholder:"npx, node, python, etc.",className:`w-full mt-1 px-3 py-2 rounded-lg text-sm ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`})]}),h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Arguments (one per line)"}),h.jsx("textarea",{value:((ft=gt.transport.args)==null?void 0:ft.join(`
`))||"",onChange:Nt=>{const hn=Nt.target.value.split(`
`).filter(xn=>xn.trim());ut({connections:s.connections.map(xn=>xn.id===gt.id?{...xn,transport:{...gt.transport,args:hn}}:xn)})},placeholder:`claude
mcp
serve`,rows:3,className:`w-full mt-1 px-3 py-2 rounded-lg text-sm font-mono ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`})]})]}),!Xr&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Server URL"}),h.jsx("input",{type:"text",value:gt.transport.url,onChange:Nt=>{ut({connections:s.connections.map(hn=>hn.id===gt.id?{...hn,transport:{...gt.transport,url:Nt.target.value}}:hn)})},placeholder:"http://localhost:3001",className:`w-full mt-1 px-3 py-2 rounded-lg text-sm ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`})]}),h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Headers (JSON)"}),h.jsx("input",{type:"text",value:JSON.stringify(gt.transport.headers||{}),onChange:Nt=>{try{const hn=JSON.parse(Nt.target.value||"{}");ut({connections:s.connections.map(xn=>xn.id===gt.id?{...xn,transport:{...gt.transport,headers:hn}}:xn)})}catch{}},placeholder:'{"Authorization": "Bearer token"}',className:`w-full mt-1 px-3 py-2 rounded-lg text-sm font-mono ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`}),h.jsx("p",{className:`text-xs mt-1 ${n?"text-neutral-500":"text-stone-400"}`,children:"Optional auth headers for remote servers"})]})]})]})]},gt.id)}),s.connections.filter(kt=>kt.type==="mcp").length===0&&h.jsxs("div",{className:`text-center py-8 rounded-xl border-2 border-dashed ${n?"border-neutral-700 text-neutral-500":"border-stone-200 text-stone-400"}`,children:[h.jsx(Nbe,{size:32,className:"mx-auto mb-2 opacity-50"}),h.jsx("p",{children:"No MCP servers configured"}),h.jsx("p",{className:`text-xs mt-1 ${n?"text-neutral-600":"text-stone-300"}`,children:"Add a server to extend AI capabilities with custom tools"})]})]}),h.jsx("div",{className:`p-3 rounded-lg ${n?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-100"}`,children:h.jsxs("p",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:[h.jsx("strong",{children:"MCP (Model Context Protocol)"})," servers extend AI capabilities with custom tools. Use ",h.jsx("strong",{children:"stdio"})," for local servers (npx, node, python) or ",h.jsx("strong",{children:"SSE"})," for remote HTTP servers."]})})]});case"lsp":return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"Language Servers"}),h.jsx("p",{className:`text-xs mt-1 ${n?"text-neutral-500":"text-stone-400"}`,children:"LSP servers provide code intelligence in the background"})]}),h.jsx("button",{onClick:Ve,disabled:en,className:`p-2 rounded-lg transition-colors ${n?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"} ${en?"animate-spin":""}`,children:h.jsx(f0,{size:16})})]}),h.jsx("div",{className:"space-y-3",children:en&&Vt.length===0?h.jsxs("div",{className:`p-4 text-center ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(fs,{size:20,className:"animate-spin mx-auto mb-2"}),h.jsx("p",{className:"text-sm",children:"Loading language servers..."})]}):Vt.length===0?h.jsxs("div",{className:`p-4 text-center ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(ld,{size:24,className:"mx-auto mb-2 opacity-50"}),h.jsx("p",{className:"text-sm",children:"No language servers available"})]}):Vt.map(kt=>h.jsxs("div",{className:`p-4 rounded-lg border ${n?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${kt.running?"bg-green-500":kt.installed?"bg-yellow-500":"bg-neutral-500"}`}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:kt.name}),kt.running&&h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${n?"bg-green-500/20 text-green-400":"bg-green-100 text-green-700"}`,children:"Running"}),!kt.installed&&kt.installable&&h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${n?"bg-yellow-500/20 text-yellow-400":"bg-yellow-100 text-yellow-700"}`,children:"Not installed"})]}),h.jsx("div",{className:`text-xs mt-0.5 ${n?"text-neutral-500":"text-stone-400"}`,children:kt.extensions.join(", ")})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[!kt.installed&&kt.installable&&h.jsx("button",{onClick:()=>Y(kt.id),disabled:pe.has(kt.id),className:`px-2.5 py-1 text-xs font-medium rounded-lg flex items-center gap-1.5 transition-colors ${pe.has(kt.id)?n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400":n?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:pe.has(kt.id)?h.jsxs(h.Fragment,{children:[h.jsx(fs,{size:12,className:"animate-spin"}),"Installing..."]}):h.jsxs(h.Fragment,{children:[h.jsx(X_,{size:12}),"Install"]})}),h.jsx("button",{onClick:()=>_e(kt.id,!kt.enabled),className:`w-10 h-6 rounded-full transition-colors relative ${kt.enabled?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${kt.enabled?"left-5":"left-1"}`})})]})]}),kt.running&&kt.instances.length>0&&h.jsx("div",{className:`mt-3 pt-3 border-t ${n?"border-neutral-700":"border-stone-200"}`,children:h.jsx("div",{className:"space-y-1",children:kt.instances.map((Bn,gt)=>h.jsxs("div",{className:`flex items-center justify-between text-xs ${n?"text-neutral-400":"text-stone-500"}`,children:[h.jsx("span",{className:"font-mono truncate max-w-[200px]",title:Bn.root,children:Bn.root.split("/").pop()}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{children:[Bn.openDocuments," files"]}),Bn.diagnosticCount>0&&h.jsxs("span",{className:`flex items-center gap-1 ${n?"text-yellow-400":"text-yellow-600"}`,children:[h.jsx(w0,{size:12}),Bn.diagnosticCount]})]})]},gt))})})]},kt.id))}),$e&&$e.cacheSize>0&&h.jsx("div",{className:`p-4 rounded-lg border ${n?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(ax,{size:16,className:n?"text-neutral-400":"text-stone-500"}),h.jsxs("div",{children:[h.jsx("div",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"LSP Cache"}),h.jsxs("div",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:[($e.cacheSize/1024/1024).toFixed(1)," MB used"]})]})]}),h.jsxs("button",{onClick:B,className:`px-2.5 py-1 text-xs font-medium rounded-lg flex items-center gap-1.5 transition-colors ${n?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[h.jsx(Lf,{size:12}),"Clear Cache"]})]})}),h.jsx("div",{className:`p-3 rounded-lg ${n?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-100"}`,children:h.jsxs("p",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:[h.jsx("strong",{children:"Language Servers"})," provide real-time diagnostics, completions, and code navigation. They run in the background and activate automatically based on file types."]})})]});case"themes":{const kt=nr=>{if(!nr.colors)return!1;const ft=nr.colors.background,Nt=parseInt(ft.slice(1,3),16),hn=parseInt(ft.slice(3,5),16),xn=parseInt(ft.slice(5,7),16);return(.299*Nt+.587*hn+.114*xn)/255>.5},Bn=g.find(nr=>nr.id==="system-default"),gt=g.filter(nr=>nr.id!=="system-default"&&!kt(nr)),Xr=g.filter(nr=>nr.id!=="system-default"&&kt(nr)),Ro=nr=>{var qs,co,Wo,zr;const ft=f.id===nr.id,Nt=((qs=nr.colors)==null?void 0:qs.background)||(n?"#1a1b26":"#d6d3d1"),hn=((co=nr.colors)==null?void 0:co.foreground)||(n?"#c0caf5":"#171717"),xn=((Wo=nr.colors)==null?void 0:Wo.primary)||"#7aa2f7",Tr=((zr=nr.colors)==null?void 0:zr.accent)||"#7dcfff";return h.jsxs("button",{onClick:()=>m(nr.id),className:"relative p-3 rounded-xl border-2 transition-all text-left",style:{borderColor:ft?yo:Vs,boxShadow:ft?`0 0 0 3px ${yo}33`:"none"},children:[h.jsx("div",{className:"h-16 rounded-lg mb-2 relative overflow-hidden",style:{backgroundColor:Nt},children:h.jsxs("div",{className:"absolute inset-2 flex flex-col gap-1",children:[h.jsx("div",{className:"h-2 w-3/4 rounded",style:{backgroundColor:hn,opacity:.8}}),h.jsx("div",{className:"h-2 w-1/2 rounded",style:{backgroundColor:xn}}),h.jsxs("div",{className:"flex gap-1 mt-auto",children:[h.jsx("div",{className:"h-3 w-8 rounded",style:{backgroundColor:xn}}),h.jsx("div",{className:"h-3 w-6 rounded",style:{backgroundColor:Tr}})]})]})}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-sm font-medium",style:{color:bo},children:nr.name}),h.jsx("p",{className:"text-xs",style:{color:pr},children:nr.description})]}),ft&&h.jsx(ad,{size:16,style:{color:yo},className:"flex-shrink-0"})]})]},nr.id)};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium mb-2",style:{color:bo},children:"Application Theme"}),h.jsx("p",{className:"text-xs mb-4",style:{color:pr},children:"Choose a color theme for the application. Themes change the overall look and feel."})]}),Bn&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:pr},children:"Automatic"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ro(Bn)})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:pr},children:"Dark Themes"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:gt.map(Ro)})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:pr},children:"Light Themes"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:Xr.map(Ro)})]}),h.jsx("div",{className:"p-3 rounded-lg border",style:{backgroundColor:`${yo}10`,borderColor:`${yo}30`},children:h.jsxs("p",{className:"text-xs",style:{color:yo},children:[h.jsx("strong",{children:"Tip:"}),` Select "System Default" to automatically follow your system's light/dark mode preference.`]})})]})}case"codeindex":return h.jsx(Eje,{isDarkMode:n,projectPath:i});case"pro":return h.jsx(vje,{isDarkMode:n,isPro:!0});default:return null}},In=f.colors,Pr=(In==null?void 0:In.background)||(n?"#171717":"#d6d3d1"),bo=(In==null?void 0:In.foreground)||(n?"#f5f5f5":"#171717"),Vs=(In==null?void 0:In.border)||(n?"#404040":"#a8a29e"),yo=(In==null?void 0:In.primary)||(n?"#3b82f6":"#2563eb"),Jr=In?G5(In.background,-10):n?"#262626":"#c4c0bc",pr=In?G5(In.foreground,-30):n?"#a3a3a3":"#57534e";return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),h.jsxs("div",{className:"relative w-full max-w-5xl h-[700px] rounded-2xl shadow-2xl flex overflow-hidden",style:{backgroundColor:Pr,color:bo},children:[h.jsxs("div",{className:"w-52 flex-shrink-0 border-r",style:{backgroundColor:Jr,borderColor:Vs},children:[h.jsx("div",{className:"px-5 py-4 border-b",style:{borderColor:Vs},children:h.jsx("h2",{className:"text-lg font-semibold",style:{color:bo},children:"Settings"})}),h.jsx("nav",{className:"p-2",children:Xz.map(at=>{const rt=a===at.id;return h.jsxs("button",{onClick:()=>l(at.id),className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-left transition-colors",style:{backgroundColor:rt?In?G5(Pr,15):n?"#404040":"#e7e5e4":"transparent",color:rt?bo:pr},children:[at.icon,h.jsx("span",{className:"text-sm font-medium",children:at.label}),rt&&h.jsx(Cf,{size:14,className:"ml-auto"})]},at.id)})})]}),h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:Vs},children:[h.jsx("h3",{className:"text-lg font-medium",style:{color:bo},children:(Io=Xz.find(at=>at.id===a))==null?void 0:Io.label}),h.jsx("button",{onClick:t,className:"p-2 rounded-lg transition-colors",style:{color:pr},children:h.jsx(qr,{size:18})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:fn()})]})]})]})}function Qz(e){return cne[e]}const ej=[{file:"src/auth/login.tsx",line:45,content:"const handleLogin = async (email, password) => {",match:!1},{file:"src/components/LoginForm.tsx",line:12,content:"export function LoginForm() {",match:!1},{file:"src/api/auth.ts",line:78,content:"// Authentication endpoint",match:!1},{file:"src/utils/validation.ts",line:23,content:"function validateEmail(email: string) {",match:!1}],tj=[{file:"src/auth/AuthProvider.tsx",line:156,content:`async function handleAuthentication(credentials: LoginCredentials) {
  // JWT token validation and user session management
  const token = await validateCredentials(credentials);`,similarity:89,match:!0},{file:"src/middleware/authMiddleware.ts",line:34,content:`export const requireAuth = async (req, res, next) => {
  // Check JWT token and verify user permissions`,similarity:76,match:!0},{file:"src/hooks/useAuth.ts",line:23,content:`export function useAuth() {
  const login = async (email: string, password: string) => {`,similarity:68,match:!0}];function Sje({isDarkMode:e,onAccept:t,onDecline:n,onClose:r}){const[s,o]=w.useState("intro"),[i,a]=w.useState([]),[l,c]=w.useState([]),[u,f]=w.useState(null),[m,g]=w.useState(null),[y]=w.useState("authentication handler");return w.useEffect(()=>{if(s==="demo"){a([]),c([]),f(null),g(null);const v=[],x=[],E=setTimeout(()=>{let k=0;const I=setInterval(()=>{k<ej.length?(a(O=>[...O,ej[k]]),k++):(clearInterval(I),f(847))},120);x.push(I)},100);v.push(E);const T=setTimeout(()=>{let k=0;const I=setInterval(()=>{if(k<tj.length)c(O=>[...O,tj[k]]),k++;else{clearInterval(I),g(234);const O=setTimeout(()=>o("results"),800);v.push(O)}},80);x.push(I)},100);return v.push(T),()=>{v.forEach(clearTimeout),x.forEach(clearInterval)}}},[s]),h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),h.jsxs("div",{className:`relative max-w-4xl w-full rounded-2xl border ${e?"bg-neutral-900 border-neutral-700":"bg-white border-stone-200"} shadow-2xl overflow-hidden`,children:[h.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${e?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:h.jsx(Gl,{size:20,className:"text-white"})}),h.jsxs("div",{children:[h.jsx("h2",{className:`text-lg font-semibold ${e?"text-white":"text-stone-900"}`,children:"AI-Powered Code Search"}),h.jsx("p",{className:`text-sm ${e?"text-neutral-400":"text-stone-500"}`,children:"Find code by meaning, not just keywords"})]})]}),h.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors ${e?"hover:bg-neutral-800":"hover:bg-stone-100"}`,children:h.jsx(qr,{size:18,className:e?"text-neutral-400":"text-stone-500"})})]}),h.jsxs("div",{className:"p-6",children:[s==="intro"&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-base font-medium mb-2 ${e?"text-white":"text-stone-900"}`,children:"What is Semantic Search?"}),h.jsxs("p",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"} leading-relaxed`,children:["Instead of searching for exact keywords, Cluso understands ",h.jsx("strong",{children:"what you mean"}),`. Ask for "authentication handler" and it finds JWT validation code, login functions, and auth middleware - even if they don't contain those exact words.`]})]}),h.jsx("div",{className:`p-4 rounded-xl ${e?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-200"}`,children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Gl,{size:16,className:"text-blue-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h4",{className:`text-sm font-medium mb-1 ${e?"text-blue-400":"text-blue-600"}`,children:"Fast & Local"}),h.jsx("p",{className:`text-xs ${e?"text-blue-300/80":"text-blue-700"}`,children:"Runs completely offline with local AI models. No API costs, no internet required."})]})]})}),h.jsx("button",{onClick:()=>o("demo"),className:"w-full px-4 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-medium transition-all",children:"See Live Demo"})]}),s==="demo"&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:`p-3 rounded-lg ${e?"bg-neutral-800":"bg-stone-100"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Vf,{size:14,className:"text-blue-500"}),h.jsxs("span",{className:`text-sm font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:['"',y,'"']})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("span",{className:`text-sm font-medium ${e?"text-green-400":"text-green-600"}`,children:"Grep (Keyword)"}),u&&h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(pR,{size:12,className:"text-green-500"}),h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600"}`,children:[u,"ms"]})]})]}),h.jsx("div",{className:"space-y-2 min-h-[300px]",children:i.map((v,x)=>h.jsxs("div",{className:`p-3 rounded-lg border animate-fadeIn ${e?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,style:{animationDelay:`${x*120}ms`},children:[h.jsx("div",{className:"mb-1",children:h.jsxs("span",{className:`text-xs font-mono ${e?"text-neutral-400":"text-stone-500"}`,children:[v.file,":",v.line]})}),h.jsx("pre",{className:`text-xs font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:v.content})]},x))})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("span",{className:`text-sm font-medium ${e?"text-purple-400":"text-purple-600"}`,children:"Cluso (AI)"}),m&&h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(Gl,{size:12,className:"text-purple-500"}),h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-600"}`,children:[m,"ms"]})]})]}),h.jsx("div",{className:"space-y-2 min-h-[300px]",children:l.map((v,x)=>h.jsxs("div",{className:`p-3 rounded-lg border animate-fadeIn ${v.match?e?"bg-purple-500/10 border-purple-500/30":"bg-purple-50 border-purple-200":e?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,style:{animationDelay:`${x*80}ms`},children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("span",{className:`text-xs font-mono ${e?"text-purple-400":"text-purple-600"}`,children:[v.file,":",v.line]}),h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${v.similarity>80?"bg-green-500/20 text-green-400":v.similarity>65?"bg-yellow-500/20 text-yellow-400":"bg-neutral-500/20 text-neutral-400"}`,children:[v.similarity,"%"]})]}),h.jsx("pre",{className:`text-xs font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:v.content})]},x))})]})]})]}),s==="results"&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gradient-to-br from-purple-500/20 to-blue-500/20 border border-purple-500/30":"bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200"}`,children:[h.jsx("h3",{className:`text-base font-semibold mb-3 ${e?"text-white":"text-stone-900"}`,children:"The Difference"}),h.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${e?"bg-green-500/20":"bg-green-100"}`,children:h.jsx("span",{className:"text-green-500 text-sm font-bold",children:"Grep"})}),h.jsx("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-600"}`,children:"847ms"})]}),h.jsx("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-600"}`,children:"Found 4 matches, but none were actually authentication handlers - just files with similar words."})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:h.jsx(Gl,{size:16,className:"text-purple-500"})}),h.jsx("span",{className:`text-xs ${e?"text-purple-400":"text-purple-600"} font-semibold`,children:"234ms"})]}),h.jsxs("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-600"}`,children:["Found 3 results - all actual authentication code. ",h.jsx("strong",{className:"text-purple-500",children:"3.6x faster"})," and more accurate."]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${e?"text-white":"text-stone-900"}`,children:"Enable for your project?"}),h.jsx("p",{className:`text-sm mb-4 ${e?"text-neutral-400":"text-stone-600"}`,children:"Indexing will run in the background (takes ~30 seconds for typical projects). You can always disable it later in Settings."}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{localStorage.setItem("mgrep-onboarding-seen","true"),localStorage.setItem("mgrep-auto-init","true"),t()},className:"flex-1 px-4 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-medium transition-all",children:"Enable AI Search"}),h.jsx("button",{onClick:()=>{localStorage.setItem("mgrep-onboarding-seen","true"),localStorage.setItem("mgrep-auto-init","false"),n()},className:`px-4 py-3 rounded-xl transition-colors ${e?"bg-neutral-800 hover:bg-neutral-700 text-neutral-300":"bg-stone-100 hover:bg-stone-200 text-stone-700"}`,children:"Maybe Later"})]})]})]})]})]}),h.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(8px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fadeIn {
          animation: fadeIn 0.3s ease-out forwards;
          opacity: 0;
        }
      `})]})}const Tje="modulepreload",Cje=function(e,t){return new URL(e,t).href},nj={},me=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=i(n.map(u=>{if(u=Cje(u,r),u in nj)return;nj[u]=!0;const f=u.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(!!r)for(let v=a.length-1;v>=0;v--){const x=a[v];if(x.href===u&&(!f||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${m}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":Tje,f||(y.as="script"),y.crossOrigin="",y.href=u,c&&y.setAttribute("nonce",c),document.head.appendChild(y),f)return new Promise((v,x)=>{y.addEventListener("load",v),y.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};let ui=class extends Error{constructor(t){super(t),this.name="ShikiError"}};function kje(e){return lM(e)}function lM(e){return Array.isArray(e)?Aje(e):e instanceof RegExp?e:typeof e=="object"?Nje(e):e}function Aje(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=lM(e[n]);return t}function Nje(e){let t={};for(let n in e)t[n]=lM(e[n]);return t}function une(e,...t){return t.forEach(n=>{for(let r in n)e[r]=n[r]}),e}function dne(e){const t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return t===0?e:~t===e.length-1?dne(e.substring(0,e.length-1)):e.substr(~t+1)}var W5=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,W2=class{static hasCaptures(e){return e===null?!1:(W5.lastIndex=0,W5.test(e))}static replaceCaptures(e,t,n){return e.replace(W5,(r,s,o,i)=>{let a=n[parseInt(s||o,10)];if(a){let l=t.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(i){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function fne(e,t){return e<t?-1:e>t?1:0}function hne(e,t){if(e===null&&t===null)return 0;if(!e)return-1;if(!t)return 1;let n=e.length,r=t.length;if(n===r){for(let s=0;s<n;s++){let o=fne(e[s],t[s]);if(o!==0)return o}return 0}return n-r}function rj(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function pne(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var mne=class{constructor(e){Ze(this,"cache",new Map);this.fn=e}get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}},$T=class{constructor(e,t,n){Ze(this,"_cachedMatchRoot",new mne(e=>this._root.match(e)));this._colorMap=e,this._defaults=t,this._root=n}static createFromRawTheme(e,t){return this.createFromParsedTheme(Mje(e),t)}static createFromParsedTheme(e,t){return Dje(e,t)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(e===null)return this._defaults;const t=e.scopeName,r=this._cachedMatchRoot.get(t).find(s=>Ije(e.parent,s.parentScopes));return r?new gne(r.fontStyle,r.foreground,r.background):null}},Y5=class B_{constructor(t,n){this.parent=t,this.scopeName=n}static push(t,n){for(const r of n)t=new B_(t,r);return t}static from(...t){let n=null;for(let r=0;r<t.length;r++)n=new B_(n,t[r]);return n}push(t){return new B_(this,t)}getSegments(){let t=this;const n=[];for(;t;)n.push(t.scopeName),t=t.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(t){return this===t?!0:this.parent===null?!1:this.parent.extends(t)}getExtensionIfDefined(t){const n=[];let r=this;for(;r&&r!==t;)n.push(r.scopeName),r=r.parent;return r===t?n.reverse():void 0}};function Ije(e,t){if(t.length===0)return!0;for(let n=0;n<t.length;n++){let r=t[n],s=!1;if(r===">"){if(n===t.length-1)return!1;r=t[++n],s=!0}for(;e&&!Rje(e.scopeName,r);){if(s)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0}function Rje(e,t){return t===e||e.startsWith(t)&&e[t.length]==="."}var gne=class{constructor(e,t,n){this.fontStyle=e,this.foregroundId=t,this.backgroundId=n}};function Mje(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,n=[],r=0;for(let s=0,o=t.length;s<o;s++){let i=t[s];if(!i.settings)continue;let a;if(typeof i.scope=="string"){let f=i.scope;f=f.replace(/^[,]+/,""),f=f.replace(/[,]+$/,""),a=f.split(",")}else Array.isArray(i.scope)?a=i.scope:a=[""];let l=-1;if(typeof i.settings.fontStyle=="string"){l=0;let f=i.settings.fontStyle.split(" ");for(let m=0,g=f.length;m<g;m++)switch(f[m]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof i.settings.foreground=="string"&&rj(i.settings.foreground)&&(c=i.settings.foreground);let u=null;typeof i.settings.background=="string"&&rj(i.settings.background)&&(u=i.settings.background);for(let f=0,m=a.length;f<m;f++){let y=a[f].trim().split(" "),v=y[y.length-1],x=null;y.length>1&&(x=y.slice(0,y.length-1),x.reverse()),n[r++]=new Oje(v,x,s,l,c,u)}}return n}var Oje=class{constructor(e,t,n,r,s,o){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=s,this.background=o}},pa=(e=>(e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e))(pa||{});function Dje(e,t){e.sort((l,c)=>{let u=fne(l.scope,c.scope);return u!==0||(u=hne(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let n=0,r="#000000",s="#ffffff";for(;e.length>=1&&e[0].scope==="";){let l=e.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(s=l.background)}let o=new Pje(t),i=new gne(n,o.getId(r),o.getId(s)),a=new $je(new eI(0,null,-1,0,0),[]);for(let l=0,c=e.length;l<c;l++){let u=e[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,o.getId(u.foreground),o.getId(u.background))}return new $T(o,i,a)}var Pje=class{constructor(e){Ze(this,"_isFrozen");Ze(this,"_lastColorId");Ze(this,"_id2color");Ze(this,"_color2id");if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(e===null)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}},Lje=Object.freeze([]),eI=class bne{constructor(t,n,r,s,o){Ze(this,"scopeDepth");Ze(this,"parentScopes");Ze(this,"fontStyle");Ze(this,"foreground");Ze(this,"background");this.scopeDepth=t,this.parentScopes=n||Lje,this.fontStyle=r,this.foreground=s,this.background=o}clone(){return new bne(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(t){let n=[];for(let r=0,s=t.length;r<s;r++)n[r]=t[r].clone();return n}acceptOverwrite(t,n,r,s){this.scopeDepth>t?console.log("how did this happen?"):this.scopeDepth=t,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},$je=class tI{constructor(t,n=[],r={}){Ze(this,"_rulesWithParentScopes");this._mainRule=t,this._children=r,this._rulesWithParentScopes=n}static _cmpBySpecificity(t,n){if(t.scopeDepth!==n.scopeDepth)return n.scopeDepth-t.scopeDepth;let r=0,s=0;for(;t.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=t.parentScopes.length||s>=n.parentScopes.length);){const o=n.parentScopes[s].length-t.parentScopes[r].length;if(o!==0)return o;r++,s++}return n.parentScopes.length-t.parentScopes.length}match(t){if(t!==""){let r=t.indexOf("."),s,o;if(r===-1?(s=t,o=""):(s=t.substring(0,r),o=t.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(o)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(tI._cmpBySpecificity),n}insert(t,n,r,s,o,i){if(n===""){this._doInsertHere(t,r,s,o,i);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new tI(this._mainRule.clone(),eI.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(t+1,c,r,s,o,i)}_doInsertHere(t,n,r,s,o){if(n===null){this._mainRule.acceptOverwrite(t,r,s,o);return}for(let i=0,a=this._rulesWithParentScopes.length;i<a;i++){let l=this._rulesWithParentScopes[i];if(hne(l.parentScopes,n)===0){l.acceptOverwrite(t,r,s,o);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),o===0&&(o=this._mainRule.background),this._rulesWithParentScopes.push(new eI(t,n,r,s,o))}},ib=class gc{static toBinaryStr(t){return t.toString(2).padStart(32,"0")}static print(t){const n=gc.getLanguageId(t),r=gc.getTokenType(t),s=gc.getFontStyle(t),o=gc.getForeground(t),i=gc.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:o,background:i})}static getLanguageId(t){return(t&255)>>>0}static getTokenType(t){return(t&768)>>>8}static containsBalancedBrackets(t){return(t&1024)!==0}static getFontStyle(t){return(t&30720)>>>11}static getForeground(t){return(t&16744448)>>>15}static getBackground(t){return(t&4278190080)>>>24}static set(t,n,r,s,o,i,a){let l=gc.getLanguageId(t),c=gc.getTokenType(t),u=gc.containsBalancedBrackets(t)?1:0,f=gc.getFontStyle(t),m=gc.getForeground(t),g=gc.getBackground(t);return n!==0&&(l=n),r!==8&&(c=r),s!==null&&(u=s?1:0),o!==-1&&(f=o),i!==0&&(m=i),a!==0&&(g=a),(l<<0|c<<8|u<<10|f<<11|m<<15|g<<24)>>>0}};function FT(e,t){const n=[],r=Fje(e);let s=r.next();for(;s!==null;){let l=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let c=i();if(n.push({matcher:c,priority:l}),s!==",")break;s=r.next()}return n;function o(){if(s==="-"){s=r.next();const l=o();return c=>!!l&&!l(c)}if(s==="("){s=r.next();const l=a();return s===")"&&(s=r.next()),l}if(sj(s)){const l=[];do l.push(s),s=r.next();while(sj(s));return c=>t(l,c)}return null}function i(){const l=[];let c=o();for(;c;)l.push(c),c=o();return u=>l.every(f=>f(u))}function a(){const l=[];let c=i();for(;c&&(l.push(c),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");c=i()}return u=>l.some(f=>f(u))}}function sj(e){return!!e&&!!e.match(/[\w\.:]+/)}function Fje(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:()=>{if(!n)return null;const r=n[0];return n=t.exec(e),r}}}function yne(e){typeof e.dispose=="function"&&e.dispose()}var Hx=class{constructor(e){this.scopeName=e}toKey(){return this.scopeName}},Bje=class{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}},zje=class{constructor(){Ze(this,"_references",[]);Ze(this,"_seenReferenceKeys",new Set);Ze(this,"visitedRule",new Set)}get references(){return this._references}add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}},jje=class{constructor(e,t){Ze(this,"seenFullScopeRequests",new Set);Ze(this,"seenPartialScopeRequests",new Set);Ze(this,"Q");this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Hx(this.initialScopeName)]}processQueue(){const e=this.Q;this.Q=[];const t=new zje;for(const n of e)Uje(n,this.initialScopeName,this.repo,t);for(const n of t.references)if(n instanceof Hx){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function Uje(e,t,n,r){const s=n.lookup(e.scopeName);if(!s){if(e.scopeName===t)throw new Error(`No grammar provided for <${t}>`);return}const o=n.lookup(t);e instanceof Hx?z_({baseGrammar:o,selfGrammar:s},r):nI(e.ruleName,{baseGrammar:o,selfGrammar:s,repository:s.repository},r);const i=n.injections(e.scopeName);if(i)for(const a of i)r.add(new Hx(a))}function nI(e,t,n){if(t.repository&&t.repository[e]){const r=t.repository[e];BT([r],t,n)}}function z_(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&BT(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&BT(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function BT(e,t,n){for(const r of e){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?une({},t.repository,r.repository):t.repository;Array.isArray(r.patterns)&&BT(r.patterns,{...t,repository:s},n);const o=r.include;if(!o)continue;const i=vne(o);switch(i.kind){case 0:z_({...t,selfGrammar:t.baseGrammar},n);break;case 1:z_(t,n);break;case 2:nI(i.ruleName,{...t,repository:s},n);break;case 3:case 4:const a=i.scopeName===t.selfGrammar.scopeName?t.selfGrammar:i.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(a){const l={baseGrammar:t.baseGrammar,selfGrammar:a,repository:s};i.kind===4?nI(i.ruleName,l,n):z_(l,n)}else i.kind===4?n.add(new Bje(i.scopeName,i.ruleName)):n.add(new Hx(i.scopeName));break}}}var Hje=class{constructor(){Ze(this,"kind",0)}},Vje=class{constructor(){Ze(this,"kind",1)}},qje=class{constructor(e){Ze(this,"kind",2);this.ruleName=e}},Gje=class{constructor(e){Ze(this,"kind",3);this.scopeName=e}},Wje=class{constructor(e,t){Ze(this,"kind",4);this.scopeName=e,this.ruleName=t}};function vne(e){if(e==="$base")return new Hje;if(e==="$self")return new Vje;const t=e.indexOf("#");if(t===-1)return new Gje(e);if(t===0)return new qje(e.substring(1));{const n=e.substring(0,t),r=e.substring(t+1);return new Wje(n,r)}}var Yje=/\\(\d+)/,oj=/\\(\d+)/g,Kje=-1,xne=-2;var Lw=class{constructor(e,t,n,r){Ze(this,"$location");Ze(this,"id");Ze(this,"_nameIsCapturing");Ze(this,"_name");Ze(this,"_contentNameIsCapturing");Ze(this,"_contentName");this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=W2.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=W2.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${dne(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return!this._nameIsCapturing||this._name===null||e===null||t===null?this._name:W2.replaceCaptures(this._name,e,t)}getContentName(e,t){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:W2.replaceCaptures(this._contentName,e,t)}},Zje=class extends Lw{constructor(t,n,r,s,o){super(t,n,r,s);Ze(this,"retokenizeCapturedWithRuleId");this.retokenizeCapturedWithRuleId=o}dispose(){}collectPatterns(t,n){throw new Error("Not supported!")}compile(t,n){throw new Error("Not supported!")}compileAG(t,n,r,s){throw new Error("Not supported!")}},Jje=class extends Lw{constructor(t,n,r,s,o){super(t,n,r,null);Ze(this,"_match");Ze(this,"captures");Ze(this,"_cachedCompiledPatterns");this._match=new Vx(s,this.id),this.captures=o,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,n){n.push(this._match)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,s){return this._getCachedCompiledPatterns(t).compileAG(t,r,s)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new qx,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},ij=class extends Lw{constructor(t,n,r,s,o){super(t,n,r,s);Ze(this,"hasMissingPatterns");Ze(this,"patterns");Ze(this,"_cachedCompiledPatterns");this.patterns=o.patterns,this.hasMissingPatterns=o.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,n){for(const r of this.patterns)t.getRule(r).collectPatterns(t,n)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,s){return this._getCachedCompiledPatterns(t).compileAG(t,r,s)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new qx,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},rI=class extends Lw{constructor(t,n,r,s,o,i,a,l,c,u){super(t,n,r,s);Ze(this,"_begin");Ze(this,"beginCaptures");Ze(this,"_end");Ze(this,"endHasBackReferences");Ze(this,"endCaptures");Ze(this,"applyEndPatternLast");Ze(this,"hasMissingPatterns");Ze(this,"patterns");Ze(this,"_cachedCompiledPatterns");this._begin=new Vx(o,this.id),this.beginCaptures=i,this._end=new Vx(a||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=c||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,n){return this._end.resolveBackReferences(t,n)}collectPatterns(t,n){n.push(this._begin)}compile(t,n){return this._getCachedCompiledPatterns(t,n).compile(t)}compileAG(t,n,r,s){return this._getCachedCompiledPatterns(t,n).compileAG(t,r,s)}_getCachedCompiledPatterns(t,n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new qx;for(const r of this.patterns)t.getRule(r).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,n):this._cachedCompiledPatterns.setSource(0,n)),this._cachedCompiledPatterns}},zT=class extends Lw{constructor(t,n,r,s,o,i,a,l,c){super(t,n,r,s);Ze(this,"_begin");Ze(this,"beginCaptures");Ze(this,"whileCaptures");Ze(this,"_while");Ze(this,"whileHasBackReferences");Ze(this,"hasMissingPatterns");Ze(this,"patterns");Ze(this,"_cachedCompiledPatterns");Ze(this,"_cachedCompiledWhilePatterns");this._begin=new Vx(o,this.id),this.beginCaptures=i,this.whileCaptures=l,this._while=new Vx(a,xne),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,n){return this._while.resolveBackReferences(t,n)}collectPatterns(t,n){n.push(this._begin)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,s){return this._getCachedCompiledPatterns(t).compileAG(t,r,s)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new qx;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,n){return this._getCachedCompiledWhilePatterns(t,n).compile(t)}compileWhileAG(t,n,r,s){return this._getCachedCompiledWhilePatterns(t,n).compileAG(t,r,s)}_getCachedCompiledWhilePatterns(t,n){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new qx,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,n||""),this._cachedCompiledWhilePatterns}},wne=class da{static createCaptureRule(t,n,r,s,o){return t.registerRule(i=>new Zje(n,i,r,s,o))}static getCompiledRuleId(t,n,r){return t.id||n.registerRule(s=>{if(t.id=s,t.match)return new Jje(t.$vscodeTextmateLocation,t.id,t.name,t.match,da._compileCaptures(t.captures,n,r));if(typeof t.begin>"u"){t.repository&&(r=une({},r,t.repository));let o=t.patterns;return typeof o>"u"&&t.include&&(o=[{include:t.include}]),new ij(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,da._compilePatterns(o,n,r))}return t.while?new zT(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,da._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,da._compileCaptures(t.whileCaptures||t.captures,n,r),da._compilePatterns(t.patterns,n,r)):new rI(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,da._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,da._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,da._compilePatterns(t.patterns,n,r))}),t.id}static _compileCaptures(t,n,r){let s=[];if(t){let o=0;for(const i in t){if(i==="$vscodeTextmateLocation")continue;const a=parseInt(i,10);a>o&&(o=a)}for(let i=0;i<=o;i++)s[i]=null;for(const i in t){if(i==="$vscodeTextmateLocation")continue;const a=parseInt(i,10);let l=0;t[i].patterns&&(l=da.getCompiledRuleId(t[i],n,r)),s[a]=da.createCaptureRule(n,t[i].$vscodeTextmateLocation,t[i].name,t[i].contentName,l)}}return s}static _compilePatterns(t,n,r){let s=[];if(t)for(let o=0,i=t.length;o<i;o++){const a=t[o];let l=-1;if(a.include){const c=vne(a.include);switch(c.kind){case 0:case 1:l=da.getCompiledRuleId(r[a.include],n,r);break;case 2:let u=r[c.ruleName];u&&(l=da.getCompiledRuleId(u,n,r));break;case 3:case 4:const f=c.scopeName,m=c.kind===4?c.ruleName:null,g=n.getExternalGrammar(f,r);if(g)if(m){let y=g.repository[m];y&&(l=da.getCompiledRuleId(y,n,g.repository))}else l=da.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else l=da.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let u=!1;if((c instanceof ij||c instanceof rI||c instanceof zT)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;s.push(l)}}return{patterns:s,hasMissingPatterns:(t?t.length:0)!==s.length}}},Vx=class Ene{constructor(t,n){Ze(this,"source");Ze(this,"ruleId");Ze(this,"hasAnchor");Ze(this,"hasBackReferences");Ze(this,"_anchorCache");if(t&&typeof t=="string"){const r=t.length;let s=0,o=[],i=!1;for(let a=0;a<r;a++)if(t.charAt(a)==="\\"&&a+1<r){const c=t.charAt(a+1);c==="z"?(o.push(t.substring(s,a)),o.push("$(?!\\n)(?<!\\n)"),s=a+2):(c==="A"||c==="G")&&(i=!0),a++}this.hasAnchor=i,s===0?this.source=t:(o.push(t.substring(s,r)),this.source=o.join(""))}else this.hasAnchor=!1,this.source=t;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=Yje.test(this.source):this.hasBackReferences=!1}clone(){return new Ene(this.source,this.ruleId)}setSource(t){this.source!==t&&(this.source=t,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(t,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>t.substring(s.start,s.end));return oj.lastIndex=0,this.source.replace(oj,(s,o)=>pne(r[parseInt(o,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let t=[],n=[],r=[],s=[],o,i,a,l;for(o=0,i=this.source.length;o<i;o++)a=this.source.charAt(o),t[o]=a,n[o]=a,r[o]=a,s[o]=a,a==="\\"&&o+1<i&&(l=this.source.charAt(o+1),l==="A"?(t[o+1]="",n[o+1]="",r[o+1]="A",s[o+1]="A"):l==="G"?(t[o+1]="",n[o+1]="G",r[o+1]="",s[o+1]="G"):(t[o+1]=l,n[o+1]=l,r[o+1]=l,s[o+1]=l),o++);return{A0_G0:t.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(t,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:t?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},qx=class{constructor(){Ze(this,"_items");Ze(this,"_hasAnchors");Ze(this,"_cached");Ze(this,"_anchorCache");this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map(n=>n.source);this._cached=new aj(e,t,this._items.map(n=>n.ruleId))}return this._cached}compileAG(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,n){let r=this._items.map(s=>s.resolveAnchors(t,n));return new aj(e,r,this._items.map(s=>s.ruleId))}},aj=class{constructor(e,t,n){Ze(this,"scanner");this.regExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const e=[];for(let t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join(`
`)}findNextMatchSync(e,t,n){const r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},K5=class{constructor(e,t){this.languageId=e,this.tokenType=t}},Tf,Xje=(Tf=class{constructor(t,n){Ze(this,"_defaultAttributes");Ze(this,"_embeddedLanguagesMatcher");Ze(this,"_getBasicScopeAttributes",new mne(t=>{const n=this._scopeToLanguage(t),r=this._toStandardTokenType(t);return new K5(n,r)}));this._defaultAttributes=new K5(t,8),this._embeddedLanguagesMatcher=new Qje(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(t){return t===null?Tf._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}_scopeToLanguage(t){return this._embeddedLanguagesMatcher.match(t)||0}_toStandardTokenType(t){const n=t.match(Tf.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}},Ze(Tf,"_NULL_SCOPE_METADATA",new K5(0,0)),Ze(Tf,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),Tf),Qje=class{constructor(e){Ze(this,"values");Ze(this,"scopesRegExp");if(e.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map(([n,r])=>pne(n));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);if(t)return this.values.get(t[1])}},lj=class{constructor(e,t){this.stack=e,this.stoppedEarly=t}};function _ne(e,t,n,r,s,o,i,a){const l=t.content.length;let c=!1,u=-1;if(i){const g=eUe(e,t,n,r,s,o);s=g.stack,r=g.linePos,n=g.isFirstLine,u=g.anchorPosition}const f=Date.now();for(;!c;){if(a!==0&&Date.now()-f>a)return new lj(s,!0);m()}return new lj(s,!1);function m(){const g=tUe(e,t,n,r,s,u);if(!g){o.produce(s,l),c=!0;return}const y=g.captureIndices,v=g.matchedRuleId,x=y&&y.length>0?y[0].end>r:!1;if(v===Kje){const E=s.getRule(e);o.produce(s,y[0].start),s=s.withContentNameScopesList(s.nameScopesList),Ev(e,t,n,s,o,E.endCaptures,y),o.produce(s,y[0].end);const T=s;if(s=s.parent,u=T.getAnchorPos(),!x&&T.getEnterPos()===r){s=T,o.produce(s,l),c=!0;return}}else{const E=e.getRule(v);o.produce(s,y[0].start);const T=s,k=E.getName(t.content,y),I=s.contentNameScopesList.pushAttributed(k,e);if(s=s.push(v,r,u,y[0].end===l,null,I,I),E instanceof rI){const O=E;Ev(e,t,n,s,o,O.beginCaptures,y),o.produce(s,y[0].end),u=y[0].end;const M=O.getContentName(t.content,y),P=I.pushAttributed(M,e);if(s=s.withContentNameScopesList(P),O.endHasBackReferences&&(s=s.withEndRule(O.getEndWithResolvedBackReferences(t.content,y))),!x&&T.hasSameRuleAs(s)){s=s.pop(),o.produce(s,l),c=!0;return}}else if(E instanceof zT){const O=E;Ev(e,t,n,s,o,O.beginCaptures,y),o.produce(s,y[0].end),u=y[0].end;const M=O.getContentName(t.content,y),P=I.pushAttributed(M,e);if(s=s.withContentNameScopesList(P),O.whileHasBackReferences&&(s=s.withEndRule(O.getWhileWithResolvedBackReferences(t.content,y))),!x&&T.hasSameRuleAs(s)){s=s.pop(),o.produce(s,l),c=!0;return}}else if(Ev(e,t,n,s,o,E.captures,y),o.produce(s,y[0].end),s=s.pop(),!x){s=s.safePop(),o.produce(s,l),c=!0;return}}y[0].end>r&&(r=y[0].end,n=!1)}}function eUe(e,t,n,r,s,o){let i=s.beginRuleCapturedEOL?0:-1;const a=[];for(let l=s;l;l=l.pop()){const c=l.getRule(e);c instanceof zT&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=sUe(l.rule,e,l.stack.endRule,n,r===i),f=c.findNextMatchSync(t,r,u);if(f){if(f.ruleId!==xne){s=l.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(o.produce(l.stack,f.captureIndices[0].start),Ev(e,t,n,l.stack,o,l.rule.whileCaptures,f.captureIndices),o.produce(l.stack,f.captureIndices[0].end),i=f.captureIndices[0].end,f.captureIndices[0].end>r&&(r=f.captureIndices[0].end,n=!1))}else{s=l.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:i,isFirstLine:n}}function tUe(e,t,n,r,s,o){const i=nUe(e,t,n,r,s,o),a=e.getInjections();if(a.length===0)return i;const l=rUe(a,e,t,n,r,s,o);if(!l)return i;if(!i)return l;const c=i.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:i}function nUe(e,t,n,r,s,o){const i=s.getRule(e),{ruleScanner:a,findOptions:l}=Sne(i,e,s.endRule,n,r===o),c=a.findNextMatchSync(t,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function rUe(e,t,n,r,s,o,i){let a=Number.MAX_VALUE,l=null,c,u=0;const f=o.contentNameScopesList.getScopeNames();for(let m=0,g=e.length;m<g;m++){const y=e[m];if(!y.matcher(f))continue;const v=t.getRule(y.ruleId),{ruleScanner:x,findOptions:E}=Sne(v,t,null,r,s===i),T=x.findNextMatchSync(n,s,E);if(!T)continue;const k=T.captureIndices[0].start;if(!(k>=a)&&(a=k,l=T.captureIndices,c=T.ruleId,u=y.priority,a===s))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function Sne(e,t,n,r,s){return{ruleScanner:e.compileAG(t,n,r,s),findOptions:0}}function sUe(e,t,n,r,s){return{ruleScanner:e.compileWhileAG(t,n,r,s),findOptions:0}}function Ev(e,t,n,r,s,o,i){if(o.length===0)return;const a=t.content,l=Math.min(o.length,i.length),c=[],u=i[0].end;for(let f=0;f<l;f++){const m=o[f];if(m===null)continue;const g=i[f];if(g.length===0)continue;if(g.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=g.start;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?s.produceFromScopes(c[c.length-1].scopes,g.start):s.produce(r,g.start),m.retokenizeCapturedWithRuleId){const v=m.getName(a,i),x=r.contentNameScopesList.pushAttributed(v,e),E=m.getContentName(a,i),T=x.pushAttributed(E,e),k=r.push(m.retokenizeCapturedWithRuleId,g.start,-1,!1,null,x,T),I=e.createOnigString(a.substring(0,g.end));_ne(e,I,n&&g.start===0,g.start,k,s,!1,0),yne(I);continue}const y=m.getName(a,i);if(y!==null){const x=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(y,e);c.push(new oUe(x,g.end))}}for(;c.length>0;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var oUe=class{constructor(e,t){Ze(this,"scopes");Ze(this,"endPos");this.scopes=e,this.endPos=t}};function iUe(e,t,n,r,s,o,i,a){return new lUe(e,t,n,r,s,o,i,a)}function cj(e,t,n,r,s){const o=FT(t,jT),i=wne.getCompiledRuleId(n,r,s.repository);for(const a of o)e.push({debugSelector:t,matcher:a.matcher,ruleId:i,grammar:s,priority:a.priority})}function jT(e,t){if(t.length<e.length)return!1;let n=0;return e.every(r=>{for(let s=n;s<t.length;s++)if(aUe(t[s],r))return n=s+1,!0;return!1})}function aUe(e,t){if(!e)return!1;if(e===t)return!0;const n=t.length;return e.length>n&&e.substr(0,n)===t&&e[n]==="."}var lUe=class{constructor(e,t,n,r,s,o,i,a){Ze(this,"_rootId");Ze(this,"_lastRuleId");Ze(this,"_ruleId2desc");Ze(this,"_includedGrammars");Ze(this,"_grammarRepository");Ze(this,"_grammar");Ze(this,"_injections");Ze(this,"_basicScopeAttributesProvider");Ze(this,"_tokenTypeMatchers");if(this._rootScopeName=e,this.balancedBracketSelectors=o,this._onigLib=a,this._basicScopeAttributesProvider=new Xje(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=i,this._grammar=uj(t,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const l of Object.keys(s)){const c=FT(l,jT);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:s[l]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},t=[],n=this._rootScopeName,r=e.lookup(n);if(r){const s=r.injections;if(s)for(let i in s)cj(t,i,s[i],this,r);const o=this._grammarRepository.injections(n);o&&o.forEach(i=>{const a=this.getExternalGrammar(i);if(a){const l=a.injectionSelector;l&&cj(t,l,a,this,a)}})}return t.sort((s,o)=>s.priority-o.priority),t}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(e){const t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=uj(n,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,n=0){const r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t,n=0){const r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,n,r){this._rootId===-1&&(this._rootId=wne.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!t||t===sI.NULL){s=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),f=ib.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),m=this.getRule(this._rootId).getName(null,null);let g;m?g=Gv.createRootAndLookUpScopeName(m,f,this):g=Gv.createRoot("unknown",f),t=new sI(null,this._rootId,-1,-1,!1,null,g,g)}else s=!1,t.reset();e=e+`
`;const o=this.createOnigString(e),i=o.content.length,a=new uUe(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),l=_ne(this,o,s,0,t,a,!0,r);return yne(o),{lineLength:i,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function uj(e,t){return e=kje(e),e.repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var Gv=class Zu{constructor(t,n,r){this.parent=t,this.scopePath=n,this.tokenAttributes=r}static fromExtension(t,n){let r=t,s=(t==null?void 0:t.scopePath)??null;for(const o of n)s=Y5.push(s,o.scopeNames),r=new Zu(r,s,o.encodedTokenAttributes);return r}static createRoot(t,n){return new Zu(null,new Y5(null,t),n)}static createRootAndLookUpScopeName(t,n,r){const s=r.getMetadataForScope(t),o=new Y5(null,t),i=r.themeProvider.themeMatch(o),a=Zu.mergeAttributes(n,s,i);return new Zu(null,o,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return Zu.equals(this,t)}static equals(t,n){do{if(t===n||!t&&!n)return!0;if(!t||!n||t.scopeName!==n.scopeName||t.tokenAttributes!==n.tokenAttributes)return!1;t=t.parent,n=n.parent}while(!0)}static mergeAttributes(t,n,r){let s=-1,o=0,i=0;return r!==null&&(s=r.fontStyle,o=r.foregroundId,i=r.backgroundId),ib.set(t,n.languageId,n.tokenType,null,s,o,i)}pushAttributed(t,n){if(t===null)return this;if(t.indexOf(" ")===-1)return Zu._pushAttributed(this,t,n);const r=t.split(/ /g);let s=this;for(const o of r)s=Zu._pushAttributed(s,o,n);return s}static _pushAttributed(t,n,r){const s=r.getMetadataForScope(n),o=t.scopePath.push(n),i=r.themeProvider.themeMatch(o),a=Zu.mergeAttributes(t.tokenAttributes,s,i);return new Zu(t,o,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(t){var s;const n=[];let r=this;for(;r&&r!==t;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(((s=r.parent)==null?void 0:s.scopePath)??null)}),r=r.parent;return r===t?n.reverse():void 0}},Tc,sI=(Tc=class{constructor(t,n,r,s,o,i,a,l){Ze(this,"_stackElementBrand");Ze(this,"_enterPos");Ze(this,"_anchorPos");Ze(this,"depth");this.parent=t,this.ruleId=n,this.beginRuleCapturedEOL=o,this.endRule=i,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}equals(t){return t===null?!1:Tc._equals(this,t)}static _equals(t,n){return t===n?!0:this._structuralEquals(t,n)?Gv.equals(t.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(t,n){do{if(t===n||!t&&!n)return!0;if(!t||!n||t.depth!==n.depth||t.ruleId!==n.ruleId||t.endRule!==n.endRule)return!1;t=t.parent,n=n.parent}while(!0)}clone(){return this}static _reset(t){for(;t;)t._enterPos=-1,t._anchorPos=-1,t=t.parent}reset(){Tc._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,n,r,s,o,i,a){return new Tc(this,t,n,r,s,o,i,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(t){return t.getRule(this.ruleId)}toString(){const t=[];return this._writeString(t,0),"["+t.join(",")+"]"}_writeString(t,n){var r,s;return this.parent&&(n=this.parent._writeString(t,n)),t[n++]=`(${this.ruleId}, ${(r=this.nameScopesList)==null?void 0:r.toString()}, ${(s=this.contentNameScopesList)==null?void 0:s.toString()})`,n}withContentNameScopesList(t){return this.contentNameScopesList===t?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,t)}withEndRule(t){return this.endRule===t?this:new Tc(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(t){let n=this;for(;n&&n._enterPos===t._enterPos;){if(n.ruleId===t.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){var t,n,r;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((n=this.nameScopesList)==null?void 0:n.getExtensionIfDefined(((t=this.parent)==null?void 0:t.nameScopesList)??null))??[],contentNameScopesList:((r=this.contentNameScopesList)==null?void 0:r.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(t,n){const r=Gv.fromExtension((t==null?void 0:t.nameScopesList)??null,n.nameScopesList);return new Tc(t,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,Gv.fromExtension(r,n.contentNameScopesList))}},Ze(Tc,"NULL",new Tc(null,0,0,0,!1,null,null,null)),Tc),cUe=class{constructor(e,t){Ze(this,"balancedBracketScopes");Ze(this,"unbalancedBracketScopes");Ze(this,"allowAny",!1);this.balancedBracketScopes=e.flatMap(n=>n==="*"?(this.allowAny=!0,[]):FT(n,jT).map(r=>r.matcher)),this.unbalancedBracketScopes=t.flatMap(n=>FT(n,jT).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}},uUe=class{constructor(e,t,n,r){Ze(this,"_emitBinaryTokens");Ze(this,"_lineText");Ze(this,"_tokens");Ze(this,"_binaryTokens");Ze(this,"_lastTokenEndIndex");Ze(this,"_tokenTypeOverrides");this.balancedBracketSelectors=r,this._emitBinaryTokens=e,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){var r;if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let s=(e==null?void 0:e.tokenAttributes)??0,o=!1;if((r=this.balancedBracketSelectors)!=null&&r.matchesAlways&&(o=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=(e==null?void 0:e.getScopeNames())??[];for(const a of this._tokenTypeOverrides)a.matcher(i)&&(s=ib.set(s,0,a.type,null,-1,0,0));this.balancedBracketSelectors&&(o=this.balancedBracketSelectors.match(i))}if(o&&(s=ib.set(s,0,8,o,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===s){this._lastTokenEndIndex=t;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(s),this._lastTokenEndIndex=t;return}const n=(e==null?void 0:e.getScopeNames())??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:n}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},dUe=class{constructor(e,t){Ze(this,"_grammars",new Map);Ze(this,"_rawGrammars",new Map);Ze(this,"_injectionGrammars",new Map);Ze(this,"_theme");this._onigLib=t,this._theme=e}dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}grammarForScopeName(e,t,n,r,s){if(!this._grammars.has(e)){let o=this._rawGrammars.get(e);if(!o)return null;this._grammars.set(e,iUe(e,o,t,n,r,s,this,this._onigLib))}return this._grammars.get(e)}},fUe=class{constructor(t){Ze(this,"_options");Ze(this,"_syncRegistry");Ze(this,"_ensureGrammarCache");this._options=t,this._syncRegistry=new dUe($T.createFromRawTheme(t.theme,t.colorMap),t.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(t,n){this._syncRegistry.setTheme($T.createFromRawTheme(t,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(t,n,r){return this.loadGrammarWithConfiguration(t,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(t,n,r){return this._loadGrammar(t,n,r.embeddedLanguages,r.tokenTypes,new cUe(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(t){return this._loadGrammar(t,0,null,null,null)}_loadGrammar(t,n,r,s,o){const i=new jje(this._syncRegistry,t);for(;i.Q.length>0;)i.Q.map(a=>this._loadSingleGrammar(a.scopeName)),i.processQueue();return this._grammarForScopeName(t,n,r,s,o)}_loadSingleGrammar(t){this._ensureGrammarCache.has(t)||(this._doLoadSingleGrammar(t),this._ensureGrammarCache.set(t,!0))}_doLoadSingleGrammar(t){const n=this._options.loadGrammar(t);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(t):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(t,n=[],r=0,s=null){return this._syncRegistry.addGrammar(t,n),this._grammarForScopeName(t.scopeName,r,s)}_grammarForScopeName(t,n=0,r=null,s=null,o=null){return this._syncRegistry.grammarForScopeName(t,n,r,s,o)}},oI=sI.NULL;const Tne=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class $w{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}$w.prototype.normal={};$w.prototype.property={};$w.prototype.space=void 0;function Cne(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new $w(n,r,t)}function Gx(e){return e.toLowerCase()}class xl{constructor(t,n){this.attribute=n,this.property=t}}xl.prototype.attribute="";xl.prototype.booleanish=!1;xl.prototype.boolean=!1;xl.prototype.commaOrSpaceSeparated=!1;xl.prototype.commaSeparated=!1;xl.prototype.defined=!1;xl.prototype.mustUseProperty=!1;xl.prototype.number=!1;xl.prototype.overloadedBoolean=!1;xl.prototype.property="";xl.prototype.spaceSeparated=!1;xl.prototype.space=void 0;let hUe=0;const gr=Fm(),li=Fm(),iI=Fm(),Ot=Fm(),Ks=Fm(),M1=Fm(),Fl=Fm();function Fm(){return 2**++hUe}const aI=Object.freeze(Object.defineProperty({__proto__:null,boolean:gr,booleanish:li,commaOrSpaceSeparated:Fl,commaSeparated:M1,number:Ot,overloadedBoolean:iI,spaceSeparated:Ks},Symbol.toStringTag,{value:"Module"})),Z5=Object.keys(aI);class cM extends xl{constructor(t,n,r,s){let o=-1;if(super(t,n),dj(this,"space",s),typeof r=="number")for(;++o<Z5.length;){const i=Z5[o];dj(this,Z5[o],(r&aI[i])===aI[i])}}}cM.prototype.defined=!0;function dj(e,t,n){n&&(e[t]=n)}function Ib(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const o=new cM(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[Gx(r)]=r,n[Gx(o.attribute)]=r}return new $w(t,n,e.space)}const kne=Ib({properties:{ariaActiveDescendant:null,ariaAtomic:li,ariaAutoComplete:null,ariaBusy:li,ariaChecked:li,ariaColCount:Ot,ariaColIndex:Ot,ariaColSpan:Ot,ariaControls:Ks,ariaCurrent:null,ariaDescribedBy:Ks,ariaDetails:null,ariaDisabled:li,ariaDropEffect:Ks,ariaErrorMessage:null,ariaExpanded:li,ariaFlowTo:Ks,ariaGrabbed:li,ariaHasPopup:null,ariaHidden:li,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ks,ariaLevel:Ot,ariaLive:null,ariaModal:li,ariaMultiLine:li,ariaMultiSelectable:li,ariaOrientation:null,ariaOwns:Ks,ariaPlaceholder:null,ariaPosInSet:Ot,ariaPressed:li,ariaReadOnly:li,ariaRelevant:null,ariaRequired:li,ariaRoleDescription:Ks,ariaRowCount:Ot,ariaRowIndex:Ot,ariaRowSpan:Ot,ariaSelected:li,ariaSetSize:Ot,ariaSort:null,ariaValueMax:Ot,ariaValueMin:Ot,ariaValueNow:Ot,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Ane(e,t){return t in e?e[t]:t}function Nne(e,t){return Ane(e,t.toLowerCase())}const pUe=Ib({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:M1,acceptCharset:Ks,accessKey:Ks,action:null,allow:null,allowFullScreen:gr,allowPaymentRequest:gr,allowUserMedia:gr,alt:null,as:null,async:gr,autoCapitalize:null,autoComplete:Ks,autoFocus:gr,autoPlay:gr,blocking:Ks,capture:null,charSet:null,checked:gr,cite:null,className:Ks,cols:Ot,colSpan:null,content:null,contentEditable:li,controls:gr,controlsList:Ks,coords:Ot|M1,crossOrigin:null,data:null,dateTime:null,decoding:null,default:gr,defer:gr,dir:null,dirName:null,disabled:gr,download:iI,draggable:li,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:gr,formTarget:null,headers:Ks,height:Ot,hidden:iI,high:Ot,href:null,hrefLang:null,htmlFor:Ks,httpEquiv:Ks,id:null,imageSizes:null,imageSrcSet:null,inert:gr,inputMode:null,integrity:null,is:null,isMap:gr,itemId:null,itemProp:Ks,itemRef:Ks,itemScope:gr,itemType:Ks,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:gr,low:Ot,manifest:null,max:null,maxLength:Ot,media:null,method:null,min:null,minLength:Ot,multiple:gr,muted:gr,name:null,nonce:null,noModule:gr,noValidate:gr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:gr,optimum:Ot,pattern:null,ping:Ks,placeholder:null,playsInline:gr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:gr,referrerPolicy:null,rel:Ks,required:gr,reversed:gr,rows:Ot,rowSpan:Ot,sandbox:Ks,scope:null,scoped:gr,seamless:gr,selected:gr,shadowRootClonable:gr,shadowRootDelegatesFocus:gr,shadowRootMode:null,shape:null,size:Ot,sizes:null,slot:null,span:Ot,spellCheck:li,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ot,step:null,style:null,tabIndex:Ot,target:null,title:null,translate:null,type:null,typeMustMatch:gr,useMap:null,value:li,width:Ot,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ks,axis:null,background:null,bgColor:null,border:Ot,borderColor:null,bottomMargin:Ot,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:gr,declare:gr,event:null,face:null,frame:null,frameBorder:null,hSpace:Ot,leftMargin:Ot,link:null,longDesc:null,lowSrc:null,marginHeight:Ot,marginWidth:Ot,noResize:gr,noHref:gr,noShade:gr,noWrap:gr,object:null,profile:null,prompt:null,rev:null,rightMargin:Ot,rules:null,scheme:null,scrolling:li,standby:null,summary:null,text:null,topMargin:Ot,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ot,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:gr,disableRemotePlayback:gr,prefix:null,property:null,results:Ot,security:null,unselectable:null},space:"html",transform:Nne}),mUe=Ib({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Fl,accentHeight:Ot,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ot,amplitude:Ot,arabicForm:null,ascent:Ot,attributeName:null,attributeType:null,azimuth:Ot,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ot,by:null,calcMode:null,capHeight:Ot,className:Ks,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ot,diffuseConstant:Ot,direction:null,display:null,dur:null,divisor:Ot,dominantBaseline:null,download:gr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ot,enableBackground:null,end:null,event:null,exponent:Ot,externalResourcesRequired:null,fill:null,fillOpacity:Ot,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:M1,g2:M1,glyphName:M1,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ot,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ot,horizOriginX:Ot,horizOriginY:Ot,id:null,ideographic:Ot,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ot,k:Ot,k1:Ot,k2:Ot,k3:Ot,k4:Ot,kernelMatrix:Fl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ot,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ot,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ot,overlineThickness:Ot,paintOrder:null,panose1:null,path:null,pathLength:Ot,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ks,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ot,pointsAtY:Ot,pointsAtZ:Ot,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Fl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Fl,rev:Fl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Fl,requiredFeatures:Fl,requiredFonts:Fl,requiredFormats:Fl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ot,specularExponent:Ot,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ot,strikethroughThickness:Ot,string:null,stroke:null,strokeDashArray:Fl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ot,strokeOpacity:Ot,strokeWidth:null,style:null,surfaceScale:Ot,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Fl,tabIndex:Ot,tableValues:null,target:null,targetX:Ot,targetY:Ot,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Fl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ot,underlineThickness:Ot,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ot,values:null,vAlphabetic:Ot,vMathematical:Ot,vectorEffect:null,vHanging:Ot,vIdeographic:Ot,version:null,vertAdvY:Ot,vertOriginX:Ot,vertOriginY:Ot,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ot,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ane}),Ine=Ib({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Rne=Ib({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Nne}),Mne=Ib({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),gUe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},bUe=/[A-Z]/g,fj=/-[a-z]/g,yUe=/^data[-\w.:]+$/i;function Fw(e,t){const n=Gx(t);let r=t,s=xl;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&yUe.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(fj,xUe);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!fj.test(o)){let i=o.replace(bUe,vUe);i.charAt(0)!=="-"&&(i="-"+i),t="data"+i}}s=cM}return new s(r,t)}function vUe(e){return"-"+e.toLowerCase()}function xUe(e){return e.charAt(1).toUpperCase()}const Rb=Cne([kne,pUe,Ine,Rne,Mne],"html"),Td=Cne([kne,mUe,Ine,Rne,Mne],"svg"),hj={}.hasOwnProperty;function uM(e,t){const n=t||{};function r(s,...o){let i=r.invalid;const a=r.handlers;if(s&&hj.call(s,e)){const l=String(s[e]);i=hj.call(a,l)?a[l]:r.unknown}if(i)return i.call(this,s,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const wUe=/["&'<>`]/g,EUe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_Ue=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,SUe=/[|\\{}()[\]^$+*?.]/g,pj=new WeakMap;function TUe(e,t){if(e=e.replace(t.subset?CUe(t.subset):wUe,r),t.subset||t.escapeOnly)return e;return e.replace(EUe,n).replace(_Ue,r);function n(s,o,i){return t.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,i.charCodeAt(o+2),t)}function r(s,o,i){return t.format(s.charCodeAt(0),i.charCodeAt(o+1),t)}}function CUe(e){let t=pj.get(e);return t||(t=kUe(e),pj.set(e,t)),t}function kUe(e){const t=[];let n=-1;for(;++n<e.length;)t.push(e[n].replace(SUe,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}const AUe=/[\dA-Fa-f]/;function NUe(e,t,n){const r="&#x"+e.toString(16).toUpperCase();return n&&t&&!AUe.test(String.fromCharCode(t))?r:r+";"}const IUe=/\d/;function RUe(e,t,n){const r="&#"+String(e);return n&&t&&!IUe.test(String.fromCharCode(t))?r:r+";"}const MUe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],J5={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},OUe=["cent","copy","divide","gt","lt","not","para","times"],One={}.hasOwnProperty,lI={};let Y2;for(Y2 in J5)One.call(J5,Y2)&&(lI[J5[Y2]]=Y2);const DUe=/[^\dA-Za-z]/;function PUe(e,t,n,r){const s=String.fromCharCode(e);if(One.call(lI,s)){const o=lI[s],i="&"+o;return n&&MUe.includes(o)&&!OUe.includes(o)&&(!r||t&&t!==61&&DUe.test(String.fromCharCode(t)))?i:i+";"}return""}function LUe(e,t,n){let r=NUe(e,t,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=PUe(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const o=RUe(e,t,n.omitOptionalSemicolons);o.length<r.length&&(r=o)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function O1(e,t){return TUe(e,Object.assign({format:LUe},t))}const $Ue=/^>|^->|<!--|-->|--!>|<!-$/g,FUe=[">"],BUe=["<",">"];function zUe(e,t,n,r){return r.settings.bogusComments?"<?"+O1(e.value,Object.assign({},r.settings.characterReferences,{subset:FUe}))+">":"<!--"+e.value.replace($Ue,s)+"-->";function s(o){return O1(o,Object.assign({},r.settings.characterReferences,{subset:BUe}))}}function jUe(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function UT(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}function mj(e){const t=[],n=String(e||"");let r=n.indexOf(","),s=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const i=n.slice(s,r).trim();(i||!o)&&t.push(i),s=r+1,r=n.indexOf(",",s)}return t}function dM(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function gj(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function fM(e){return e.join(" ").trim()}const UUe=/[ \t\n\f\r]/g;function PC(e){return typeof e=="object"?e.type==="text"?bj(e.value):!1:bj(e)}function bj(e){return e.replace(UUe,"")===""}const Ri=Pne(1),Dne=Pne(-1),HUe=[];function Pne(e){return t;function t(n,r,s){const o=n?n.children:HUe;let i=(r||0)+e,a=o[i];if(!s)for(;a&&PC(a);)i+=e,a=o[i];return a}}const VUe={}.hasOwnProperty;function Lne(e){return t;function t(n,r,s){return VUe.call(e,n.tagName)&&e[n.tagName](n,r,s)}}const hM=Lne({body:GUe,caption:X5,colgroup:X5,dd:ZUe,dt:KUe,head:X5,html:qUe,li:YUe,optgroup:JUe,option:XUe,p:WUe,rp:yj,rt:yj,tbody:eHe,td:vj,tfoot:tHe,th:vj,thead:QUe,tr:nHe});function X5(e,t,n){const r=Ri(n,t,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&PC(r.value.charAt(0)))}function qUe(e,t,n){const r=Ri(n,t);return!r||r.type!=="comment"}function GUe(e,t,n){const r=Ri(n,t);return!r||r.type!=="comment"}function WUe(e,t,n){const r=Ri(n,t);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function YUe(e,t,n){const r=Ri(n,t);return!r||r.type==="element"&&r.tagName==="li"}function KUe(e,t,n){const r=Ri(n,t);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function ZUe(e,t,n){const r=Ri(n,t);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function yj(e,t,n){const r=Ri(n,t);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function JUe(e,t,n){const r=Ri(n,t);return!r||r.type==="element"&&r.tagName==="optgroup"}function XUe(e,t,n){const r=Ri(n,t);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function QUe(e,t,n){const r=Ri(n,t);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function eHe(e,t,n){const r=Ri(n,t);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function tHe(e,t,n){return!Ri(n,t)}function nHe(e,t,n){const r=Ri(n,t);return!r||r.type==="element"&&r.tagName==="tr"}function vj(e,t,n){const r=Ri(n,t);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const rHe=Lne({body:iHe,colgroup:aHe,head:oHe,html:sHe,tbody:lHe});function sHe(e){const t=Ri(e,-1);return!t||t.type!=="comment"}function oHe(e){const t=new Set;for(const r of e.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(t.has(r.tagName))return!1;t.add(r.tagName)}const n=e.children[0];return!n||n.type==="element"}function iHe(e){const t=Ri(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&PC(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function aHe(e,t,n){const r=Dne(n,t),s=Ri(e,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&hM(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function lHe(e,t,n){const r=Dne(n,t),s=Ri(e,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&hM(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const K2={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function cHe(e,t,n,r){const s=r.schema,o=s.space==="svg"?!1:r.settings.omitOptionalTags;let i=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase());const a=[];let l;s.space==="html"&&e.tagName==="svg"&&(r.schema=Td);const c=uHe(r,e.properties),u=r.all(s.space==="html"&&e.tagName==="template"?e.content:e);return r.schema=s,u&&(i=!1),(c||!o||!rHe(e,t,n))&&(a.push("<",e.tagName,c?" "+c:""),i&&(s.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!i&&(!o||!hM(e,t,n))&&a.push("</"+e.tagName+">"),a.join("")}function uHe(e,t){const n=[];let r=-1,s;if(t){for(s in t)if(t[s]!==null&&t[s]!==void 0){const o=dHe(e,s,t[s]);o&&n.push(o)}}for(;++r<n.length;){const o=e.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&o!=='"'&&o!=="'"&&(n[r]+=" ")}return n.join("")}function dHe(e,t,n){const r=Fw(e.schema,t),s=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,o=e.settings.allowDangerousCharacters?0:1;let i=e.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=O1(r.attribute,Object.assign({},e.settings.characterReferences,{subset:K2.name[s][o]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?dM:fM)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?l:(e.settings.preferUnquoted&&(a=O1(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:K2.unquoted[s][o]}))),a!==n&&(e.settings.quoteSmart&&UT(n,i)>UT(n,e.alternative)&&(i=e.alternative),a=i+O1(n,Object.assign({},e.settings.characterReferences,{subset:(i==="'"?K2.single:K2.double)[s][o],attribute:!0}))+i),l+(a&&"="+a))}const fHe=["<","&"];function $ne(e,t,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:O1(e.value,Object.assign({},r.settings.characterReferences,{subset:fHe}))}function hHe(e,t,n,r){return r.settings.allowDangerousHtml?e.value:$ne(e,t,n,r)}function pHe(e,t,n,r){return r.all(e)}const mHe=uM("type",{invalid:gHe,unknown:bHe,handlers:{comment:zUe,doctype:jUe,element:cHe,raw:hHe,root:pHe,text:$ne}});function gHe(e){throw new Error("Expected node, not `"+e+"`")}function bHe(e){const t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}const yHe={},vHe={},xHe=[];function wHe(e,t){const n=t||yHe,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:EHe,all:_He,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||Tne,characterReferences:n.characterReferences||vHe,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Td:Rb,quote:r,alternative:s}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function EHe(e,t,n){return mHe(e,t,n,this)}function _He(e){const t=[],n=e&&e.children||xHe;let r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function HT(e,t){const n=typeof e=="string"?{}:{...e.colorReplacements},r=typeof e=="string"?e:e.name;for(const[s,o]of Object.entries((t==null?void 0:t.colorReplacements)||{}))typeof o=="string"?n[s]=o:s===r&&Object.assign(n,o);return n}function x0(e,t){return e&&((t==null?void 0:t[e==null?void 0:e.toLowerCase()])||e)}function SHe(e){return Array.isArray(e)?e:[e]}async function Fne(e){return Promise.resolve(typeof e=="function"?e():e).then(t=>t.default||t)}function pM(e){return!e||["plaintext","txt","text","plain"].includes(e)}function Bne(e){return e==="ansi"||pM(e)}function mM(e){return e==="none"}function zne(e){return mM(e)}function jne(e,t){var r;if(!t)return e;e.properties||(e.properties={}),(r=e.properties).class||(r.class=[]),typeof e.properties.class=="string"&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]);const n=Array.isArray(t)?t:t.split(/\s+/g);for(const s of n)s&&!e.properties.class.includes(s)&&e.properties.class.push(s);return e}function LC(e,t=!1){var o;if(e.length===0)return[["",0]];const n=e.split(/(\r?\n)/g);let r=0;const s=[];for(let i=0;i<n.length;i+=2){const a=t?n[i]+(n[i+1]||""):n[i];s.push([a,r]),r+=n[i].length,r+=((o=n[i+1])==null?void 0:o.length)||0}return s}function THe(e){const t=LC(e,!0).map(([s])=>s);function n(s){if(s===e.length)return{line:t.length-1,character:t[t.length-1].length};let o=s,i=0;for(const a of t){if(o<a.length)break;o-=a.length,i++}return{line:i,character:o}}function r(s,o){let i=0;for(let a=0;a<s;a++)i+=t[a].length;return i+=o,i}return{lines:t,indexToPos:n,posToIndex:r}}function CHe(e,t,n){const r=new Set;for(const o of e.matchAll(/:?lang=["']([^"']+)["']/g)){const i=o[1].toLowerCase().trim();i&&r.add(i)}for(const o of e.matchAll(/(?:```|~~~)([\w-]+)/g)){const i=o[1].toLowerCase().trim();i&&r.add(i)}for(const o of e.matchAll(/\\begin\{([\w-]+)\}/g)){const i=o[1].toLowerCase().trim();i&&r.add(i)}for(const o of e.matchAll(/<script\s+(?:type|lang)=["']([^"']+)["']/gi)){const i=o[1].toLowerCase().trim(),a=i.includes("/")?i.split("/").pop():i;a&&r.add(a)}if(!n)return Array.from(r);const s=n.getBundledLanguages();return Array.from(r).filter(o=>o&&s[o])}const gM="light-dark()",kHe=["color","background-color"];function AHe(e,t){let n=0;const r=[];for(const s of t)s>n&&r.push({...e,content:e.content.slice(n,s),offset:e.offset+n}),n=s;return n<e.content.length&&r.push({...e,content:e.content.slice(n),offset:e.offset+n}),r}function NHe(e,t){const n=Array.from(t instanceof Set?t:new Set(t)).sort((r,s)=>r-s);return n.length?e.map(r=>r.flatMap(s=>{const o=n.filter(i=>s.offset<i&&i<s.offset+s.content.length).map(i=>i-s.offset).sort((i,a)=>i-a);return o.length?AHe(s,o):s})):e}function IHe(e,t,n,r,s="css-vars"){const o={content:e.content,explanation:e.explanation,offset:e.offset},i=t.map(u=>VT(e.variants[u])),a=new Set(i.flatMap(u=>Object.keys(u))),l={},c=(u,f)=>{const m=f==="color"?"":f==="background-color"?"-bg":`-${f}`;return n+t[u]+(f==="color"?"":m)};return i.forEach((u,f)=>{for(const m of a){const g=u[m]||"inherit";if(f===0&&r&&kHe.includes(m))if(r===gM&&i.length>1){const y=t.findIndex(T=>T==="light"),v=t.findIndex(T=>T==="dark");if(y===-1||v===-1)throw new ui('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const x=i[y][m]||"inherit",E=i[v][m]||"inherit";l[m]=`light-dark(${x}, ${E})`,s==="css-vars"&&(l[c(f,m)]=g)}else l[m]=g;else s==="css-vars"&&(l[c(f,m)]=g)}}),o.htmlStyle=l,o}function VT(e){const t={};if(e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle){e.fontStyle&pa.Italic&&(t["font-style"]="italic"),e.fontStyle&pa.Bold&&(t["font-weight"]="bold");const n=[];e.fontStyle&pa.Underline&&n.push("underline"),e.fontStyle&pa.Strikethrough&&n.push("line-through"),n.length&&(t["text-decoration"]=n.join(" "))}return t}function cI(e){return typeof e=="string"?e:Object.entries(e).map(([t,n])=>`${t}:${n}`).join(";")}const Une=new WeakMap;function $C(e,t){Une.set(e,t)}function Wx(e){return Une.get(e)}class Mb{constructor(...t){Ze(this,"_stacks",{});Ze(this,"lang");if(t.length===2){const[n,r]=t;this.lang=r,this._stacks=n}else{const[n,r,s]=t;this.lang=r,this._stacks={[s]:n}}}get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(t,n){return new Mb(Object.fromEntries(SHe(n).map(r=>[r,oI])),t)}getInternalStack(t=this.theme){return this._stacks[t]}getScopes(t=this.theme){return RHe(this._stacks[t])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function RHe(e){const t=[],n=new Set;function r(s){var i;if(n.has(s))return;n.add(s);const o=(i=s==null?void 0:s.nameScopesList)==null?void 0:i.scopeName;o&&t.push(o),s.parent&&r(s.parent)}return r(e),t}function MHe(e,t){if(!(e instanceof Mb))throw new ui("Invalid grammar state");return e.getInternalStack(t)}function OHe(){const e=new WeakMap;function t(n){if(!e.has(n.meta)){let r=function(i){if(typeof i=="number"){if(i<0||i>n.source.length)throw new ui(`Invalid decoration offset: ${i}. Code length: ${n.source.length}`);return{...s.indexToPos(i),offset:i}}else{const a=s.lines[i.line];if(a===void 0)throw new ui(`Invalid decoration position ${JSON.stringify(i)}. Lines length: ${s.lines.length}`);let l=i.character;if(l<0&&(l=a.length+l),l<0||l>a.length)throw new ui(`Invalid decoration position ${JSON.stringify(i)}. Line ${i.line} length: ${a.length}`);return{...i,character:l,offset:s.posToIndex(i.line,l)}}};const s=THe(n.source),o=(n.options.decorations||[]).map(i=>({...i,start:r(i.start),end:r(i.end)}));DHe(o),e.set(n.meta,{decorations:o,converter:s,source:n.source})}return e.get(n.meta)}return{name:"shiki:decorations",tokens(n){var i;if(!((i=this.options.decorations)!=null&&i.length))return;const s=t(this).decorations.flatMap(a=>[a.start.offset,a.end.offset]);return NHe(n,s)},code(n){var u;if(!((u=this.options.decorations)!=null&&u.length))return;const r=t(this),s=Array.from(n.children).filter(f=>f.type==="element"&&f.tagName==="span");if(s.length!==r.converter.lines.length)throw new ui(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function o(f,m,g,y){const v=s[f];let x="",E=-1,T=-1;if(m===0&&(E=0),g===0&&(T=0),g===Number.POSITIVE_INFINITY&&(T=v.children.length),E===-1||T===-1)for(let I=0;I<v.children.length;I++)x+=Hne(v.children[I]),E===-1&&x.length===m&&(E=I+1),T===-1&&x.length===g&&(T=I+1);if(E===-1)throw new ui(`Failed to find start index for decoration ${JSON.stringify(y.start)}`);if(T===-1)throw new ui(`Failed to find end index for decoration ${JSON.stringify(y.end)}`);const k=v.children.slice(E,T);if(!y.alwaysWrap&&k.length===v.children.length)a(v,y,"line");else if(!y.alwaysWrap&&k.length===1&&k[0].type==="element")a(k[0],y,"token");else{const I={type:"element",tagName:"span",properties:{},children:k};a(I,y,"wrapper"),v.children.splice(E,k.length,I)}}function i(f,m){s[f]=a(s[f],m,"line")}function a(f,m,g){var x;const y=m.properties||{},v=m.transform||(E=>E);return f.tagName=m.tagName||"span",f.properties={...f.properties,...y,class:f.properties.class},(x=m.properties)!=null&&x.class&&jne(f,m.properties.class),f=v(f,g)||f,f}const l=[],c=r.decorations.sort((f,m)=>m.start.offset-f.start.offset||f.end.offset-m.end.offset);for(const f of c){const{start:m,end:g}=f;if(m.line===g.line)o(m.line,m.character,g.character,f);else if(m.line<g.line){o(m.line,m.character,Number.POSITIVE_INFINITY,f);for(let y=m.line+1;y<g.line;y++)l.unshift(()=>i(y,f));o(g.line,0,g.character,f)}}l.forEach(f=>f())}}}function DHe(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.start.offset>n.end.offset)throw new ui(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=t+1;r<e.length;r++){const s=e[r],o=n.start.offset<=s.start.offset&&s.start.offset<n.end.offset,i=n.start.offset<s.end.offset&&s.end.offset<=n.end.offset,a=s.start.offset<=n.start.offset&&n.start.offset<s.end.offset,l=s.start.offset<n.end.offset&&n.end.offset<=s.end.offset;if(o||i||a||l){if(o&&i||a&&l||a&&n.start.offset===n.end.offset||i&&s.start.offset===s.end.offset)continue;throw new ui(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function Hne(e){return e.type==="text"?e.value:e.type==="element"?e.children.map(Hne).join(""):""}const PHe=[OHe()];function qT(e){const t=LHe(e.transformers||[]);return[...t.pre,...t.normal,...t.post,...PHe]}function LHe(e){const t=[],n=[],r=[];for(const s of e)switch(s.enforce){case"pre":t.push(s);break;case"post":n.push(s);break;default:r.push(s)}return{pre:t,post:n,normal:r}}var Zp=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Q5={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function $He(e,t){const n=e.indexOf("\x1B",t);if(n!==-1&&e[n+1]==="["){const r=e.indexOf("m",n);if(r!==-1)return{sequence:e.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:e.length}}function xj(e){const t=e.shift();if(t==="2"){const n=e.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(t==="5"){const n=e.shift();if(n)return{type:"table",index:Number(n)}}}function FHe(e){const t=[];for(;e.length>0;){const n=e.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)t.push({type:"resetAll"});else if(r<=9)Q5[r]&&t.push({type:"setDecoration",value:Q5[r]});else if(r<=29){const s=Q5[r-20];s&&(t.push({type:"resetDecoration",value:s}),s==="dim"&&t.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)t.push({type:"setForegroundColor",value:{type:"named",name:Zp[r-30]}});else if(r===38){const s=xj(e);s&&t.push({type:"setForegroundColor",value:s})}else if(r===39)t.push({type:"resetForegroundColor"});else if(r<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:Zp[r-40]}});else if(r===48){const s=xj(e);s&&t.push({type:"setBackgroundColor",value:s})}else r===49?t.push({type:"resetBackgroundColor"}):r===53?t.push({type:"setDecoration",value:"overline"}):r===55?t.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?t.push({type:"setForegroundColor",value:{type:"named",name:Zp[r-90+8]}}):r>=100&&r<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:Zp[r-100+8]}})}return t}function BHe(){let e=null,t=null,n=new Set;return{parse(r){const s=[];let o=0;do{const i=$He(r,o),a=i.sequence?r.substring(o,i.startPosition):r.substring(o);if(a.length>0&&s.push({value:a,foreground:e,background:t,decorations:new Set(n)}),i.sequence){const l=FHe(i.sequence);for(const c of l)c.type==="resetAll"?(e=null,t=null,n.clear()):c.type==="resetForegroundColor"?e=null:c.type==="resetBackgroundColor"?t=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?e=c.value:c.type==="setBackgroundColor"?t=c.value:c.type==="setDecoration"&&n.add(c.value)}o=i.position}while(o<r.length);return s}}}var zHe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function jHe(e=zHe){function t(a){return e[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let c=0;c<Zp.length;c++)r.push(t(Zp[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let f=0;f<6;f++)r.push(n([a[c],a[u],a[f]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function o(a){return s()[a]}function i(a){switch(a.type){case"named":return t(a.name);case"rgb":return n(a.rgb);case"table":return o(a.index)}}return{value:i}}const UHe={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function HHe(e,t,n){const r=HT(e,n),s=LC(t),o=Object.fromEntries(Zp.map(l=>{var f;const c=`terminal.ansi${l[0].toUpperCase()}${l.substring(1)}`,u=(f=e.colors)==null?void 0:f[c];return[l,u||UHe[l]]})),i=jHe(o),a=BHe();return s.map(l=>a.parse(l[0]).map(c=>{let u,f;c.decorations.has("reverse")?(u=c.background?i.value(c.background):e.bg,f=c.foreground?i.value(c.foreground):e.fg):(u=c.foreground?i.value(c.foreground):e.fg,f=c.background?i.value(c.background):void 0),u=x0(u,r),f=x0(f,r),c.decorations.has("dim")&&(u=VHe(u));let m=pa.None;return c.decorations.has("bold")&&(m|=pa.Bold),c.decorations.has("italic")&&(m|=pa.Italic),c.decorations.has("underline")&&(m|=pa.Underline),c.decorations.has("strikethrough")&&(m|=pa.Strikethrough),{content:c.value,offset:l[1],color:u,bgColor:f,fontStyle:m}}))}function VHe(e){const t=e.match(/#([0-9a-f]{3,8})/i);if(t){const r=t[1];if(r.length===8){const s=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${s}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const s=r[0],o=r[1],i=r[2],a=r[3],l=Math.round(Number.parseInt(`${a}${a}`,16)/2).toString(16).padStart(2,"0");return`#${s}${s}${o}${o}${i}${i}${l}`}else if(r.length===3){const s=r[0],o=r[1],i=r[2];return`#${s}${s}${o}${o}${i}${i}80`}}}const n=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:e}function bM(e,t,n={}){const{theme:r=e.getLoadedThemes()[0]}=n,s=e.resolveLangAlias(n.lang||"text");if(pM(s)||mM(r))return LC(t).map(l=>[{content:l[0],offset:l[1]}]);const{theme:o,colorMap:i}=e.setTheme(r);if(s==="ansi")return HHe(o,t,n);const a=e.getLanguage(n.lang||"text");if(n.grammarState){if(n.grammarState.lang!==a.name)throw new ui(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(o.name))throw new ui(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${o.name}"`)}return GHe(t,a,o,i,n)}function qHe(...e){if(e.length===2)return Wx(e[1]);const[t,n,r={}]=e,{lang:s="text",theme:o=t.getLoadedThemes()[0]}=r;if(pM(s)||mM(o))throw new ui("Plain language does not have grammar state");if(s==="ansi")throw new ui("ANSI language does not have grammar state");const{theme:i,colorMap:a}=t.setTheme(o),l=t.getLanguage(s);return new Mb(GT(n,l,i,a,r).stateStack,l.name,i.name)}function GHe(e,t,n,r,s){const o=GT(e,t,n,r,s),i=new Mb(GT(e,t,n,r,s).stateStack,t.name,n.name);return $C(o.tokens,i),o.tokens}function GT(e,t,n,r,s){const o=HT(n,s),{tokenizeMaxLineLength:i=0,tokenizeTimeLimit:a=500}=s,l=LC(e);let c=s.grammarState?MHe(s.grammarState,n.name)??oI:s.grammarContextCode!=null?GT(s.grammarContextCode,t,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:oI,u=[];const f=[];for(let m=0,g=l.length;m<g;m++){const[y,v]=l[m];if(y===""){u=[],f.push([]);continue}if(i>0&&y.length>=i){u=[],f.push([{content:y,offset:v,color:"",fontStyle:0}]);continue}let x,E,T;s.includeExplanation&&(x=t.tokenizeLine(y,c,a),E=x.tokens,T=0);const k=t.tokenizeLine2(y,c,a),I=k.tokens.length/2;for(let O=0;O<I;O++){const M=k.tokens[2*O],P=O+1<I?k.tokens[2*O+2]:y.length;if(M===P)continue;const j=k.tokens[2*O+1],V=x0(r[ib.getForeground(j)],o),U=ib.getFontStyle(j),z={content:y.substring(M,P),offset:v+M,color:V,fontStyle:U};if(s.includeExplanation){const H=[];if(s.includeExplanation!=="scopeName")for(const G of n.settings){let X;switch(typeof G.scope){case"string":X=G.scope.split(/,/).map(J=>J.trim());break;case"object":X=G.scope;break;default:continue}H.push({settings:G,selectors:X.map(J=>J.split(/ /))})}z.explanation=[];let F=0;for(;M+F<P;){const G=E[T],X=y.substring(G.startIndex,G.endIndex);F+=X.length,z.explanation.push({content:X,scopes:s.includeExplanation==="scopeName"?WHe(G.scopes):YHe(H,G.scopes)}),T+=1}}u.push(z)}f.push(u),u=[],c=k.ruleStack}return{tokens:f,stateStack:c}}function WHe(e){return e.map(t=>({scopeName:t}))}function YHe(e,t){const n=[];for(let r=0,s=t.length;r<s;r++){const o=t[r];n[r]={scopeName:o,themeMatches:ZHe(e,o,t.slice(0,r))}}return n}function wj(e,t){return e===t||t.substring(0,e.length)===e&&t[e.length]==="."}function KHe(e,t,n){if(!wj(e[e.length-1],t))return!1;let r=e.length-2,s=n.length-1;for(;r>=0&&s>=0;)wj(e[r],n[s])&&(r-=1),s-=1;return r===-1}function ZHe(e,t,n){const r=[];for(const{selectors:s,settings:o}of e)for(const i of s)if(KHe(i,t,n)){r.push(o);break}return r}function Vne(e,t,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),s=r.map(l=>{const c=bM(e,t,{...n,theme:l.theme}),u=Wx(c),f=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:f}}),o=JHe(...s.map(l=>l.tokens)),i=o[0].map((l,c)=>l.map((u,f)=>{const m={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in n&&n.includeExplanation&&(m.explanation=u.explanation),o.forEach((g,y)=>{const{content:v,explanation:x,offset:E,...T}=g[c][f];m.variants[r[y].color]=T}),m})),a=s[0].state?new Mb(Object.fromEntries(s.map(l=>{var c;return[l.theme,(c=l.state)==null?void 0:c.getInternalStack(l.theme)]})),s[0].state.lang):void 0;return a&&$C(i,a),i}function JHe(...e){const t=e.map(()=>[]),n=e.length;for(let r=0;r<e[0].length;r++){const s=e.map(l=>l[r]),o=t.map(()=>[]);t.forEach((l,c)=>l.push(o[c]));const i=s.map(()=>0),a=s.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const u=a[c];u.content.length===l?(o[c].push(u),i[c]+=1,a[c]=s[c][i[c]]):(o[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return t}function WT(e,t,n){let r,s,o,i,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-",colorsRendering:f="css-vars"}=n,m=Object.entries(n.themes).filter(E=>E[1]).map(E=>({color:E[0],theme:E[1]})).sort((E,T)=>E.color===c?-1:T.color===c?1:0);if(m.length===0)throw new ui("`themes` option must not be empty");const g=Vne(e,t,n);if(l=Wx(g),c&&gM!==c&&!m.find(E=>E.color===c))throw new ui(`\`themes\` option must contain the defaultColor key \`${c}\``);const y=m.map(E=>e.getTheme(E.theme)),v=m.map(E=>E.color);o=g.map(E=>E.map(T=>IHe(T,v,u,c,f))),l&&$C(o,l);const x=m.map(E=>HT(E.theme,n));s=Ej(m,y,x,u,c,"fg",f),r=Ej(m,y,x,u,c,"bg",f),i=`shiki-themes ${y.map(E=>E.name).join(" ")}`,a=c?void 0:[s,r].join(";")}else if("theme"in n){const c=HT(n.theme,n);o=bM(e,t,n);const u=e.getTheme(n.theme);r=x0(u.bg,c),s=x0(u.fg,c),i=u.name,l=Wx(o)}else throw new ui("Invalid options, either `theme` or `themes` must be provided");return{tokens:o,fg:s,bg:r,themeName:i,rootStyle:a,grammarState:l}}function Ej(e,t,n,r,s,o,i){return e.map((a,l)=>{const c=x0(t[l][o],n[l])||"inherit",u=`${r+a.color}${o==="bg"?"-bg":""}:${c}`;if(l===0&&s){if(s===gM&&e.length>1){const f=e.findIndex(v=>v.color==="light"),m=e.findIndex(v=>v.color==="dark");if(f===-1||m===-1)throw new ui('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const g=x0(t[f][o],n[f])||"inherit",y=x0(t[m][o],n[m])||"inherit";return`light-dark(${g}, ${y});${u}`}return c}return i==="css-vars"?u:null}).filter(a=>!!a).join(";")}function YT(e,t,n,r={meta:{},options:n,codeToHast:(s,o)=>YT(e,s,o),codeToTokens:(s,o)=>WT(e,s,o)}){var y,v;let s=t;for(const x of qT(n))s=((y=x.preprocess)==null?void 0:y.call(r,s,n))||s;let{tokens:o,fg:i,bg:a,themeName:l,rootStyle:c,grammarState:u}=WT(e,s,n);const{mergeWhitespaces:f=!0,mergeSameStyleTokens:m=!1}=n;f===!0?o=QHe(o):f==="never"&&(o=eVe(o)),m&&(o=tVe(o));const g={...r,get source(){return s}};for(const x of qT(n))o=((v=x.tokens)==null?void 0:v.call(g,o))||o;return XHe(o,{...n,fg:i,bg:a,themeName:l,rootStyle:n.rootStyle===!1?!1:n.rootStyle??c},g,u)}function XHe(e,t,n,r=Wx(e)){var v,x,E,T;const s=qT(t),o=[],i={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=t,c={class:`shiki ${t.themeName||""}`};t.rootStyle!==!1&&(t.rootStyle!=null?c.style=t.rootStyle:c.style=`background-color:${t.bg};color:${t.fg}`),l!==!1&&l!=null&&(c.tabindex=l.toString());for(const[k,I]of Object.entries(t.meta||{}))k.startsWith("_")||(c[k]=I);let u={type:"element",tagName:"pre",properties:c,children:[]},f={type:"element",tagName:"code",properties:{},children:o};const m=[],g={...n,structure:a,addClassToHast:jne,get source(){return n.source},get tokens(){return e},get options(){return t},get root(){return i},get pre(){return u},get code(){return f},get lines(){return m}};if(e.forEach((k,I)=>{var P,j;I&&(a==="inline"?i.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&o.push({type:"text",value:`
`}));let O={type:"element",tagName:"span",properties:{class:"line"},children:[]},M=0;for(const V of k){let U={type:"element",tagName:"span",properties:{...V.htmlAttrs},children:[{type:"text",value:V.content}]};const z=cI(V.htmlStyle||VT(V));z&&(U.properties.style=z);for(const H of s)U=((P=H==null?void 0:H.span)==null?void 0:P.call(g,U,I+1,M,O,V))||U;a==="inline"?i.children.push(U):a==="classic"&&O.children.push(U),M+=V.content.length}if(a==="classic"){for(const V of s)O=((j=V==null?void 0:V.line)==null?void 0:j.call(g,O,I+1))||O;m.push(O),o.push(O)}else a==="inline"&&m.push(O)}),a==="classic"){for(const k of s)f=((v=k==null?void 0:k.code)==null?void 0:v.call(g,f))||f;u.children.push(f);for(const k of s)u=((x=k==null?void 0:k.pre)==null?void 0:x.call(g,u))||u;i.children.push(u)}else if(a==="inline"){const k=[];let I={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const P of i.children)P.type==="element"&&P.tagName==="br"?(k.push(I),I={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(P.type==="element"||P.type==="text")&&I.children.push(P);k.push(I);let M={type:"element",tagName:"code",properties:{},children:k};for(const P of s)M=((E=P==null?void 0:P.code)==null?void 0:E.call(g,M))||M;i.children=[];for(let P=0;P<M.children.length;P++){P>0&&i.children.push({type:"element",tagName:"br",properties:{},children:[]});const j=M.children[P];j.type==="element"&&i.children.push(...j.children)}}let y=i;for(const k of s)y=((T=k==null?void 0:k.root)==null?void 0:T.call(g,y))||y;return r&&$C(y,r),y}function QHe(e){return e.map(t=>{const n=[];let r="",s;return t.forEach((o,i)=>{const l=!(o.fontStyle&&(o.fontStyle&pa.Underline||o.fontStyle&pa.Strikethrough));l&&o.content.match(/^\s+$/)&&t[i+1]?(s===void 0&&(s=o.offset),r+=o.content):r?(l?n.push({...o,offset:s,content:r+o.content}):n.push({content:r,offset:s},o),s=void 0,r=""):n.push(o)}),n})}function eVe(e){return e.map(t=>t.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,o,i]=r;if(!s&&!i)return n;const a=[{...n,offset:n.offset+s.length,content:o}];return s&&a.unshift({content:s,offset:n.offset}),i&&a.push({content:i,offset:n.offset+s.length+o.length}),a}))}function tVe(e){return e.map(t=>{const n=[];for(const r of t){if(n.length===0){n.push({...r});continue}const s=n[n.length-1],o=cI(s.htmlStyle||VT(s)),i=cI(r.htmlStyle||VT(r)),a=s.fontStyle&&(s.fontStyle&pa.Underline||s.fontStyle&pa.Strikethrough),l=r.fontStyle&&(r.fontStyle&pa.Underline||r.fontStyle&pa.Strikethrough);!a&&!l&&o===i?s.content+=r.content:n.push({...r})}return n})}const nVe=wHe;function rVe(e,t,n){var o;const r={meta:{},options:n,codeToHast:(i,a)=>YT(e,i,a),codeToTokens:(i,a)=>WT(e,i,a)};let s=nVe(YT(e,t,n,r));for(const i of qT(n))s=((o=i.postprocess)==null?void 0:o.call(r,s,n))||s;return s}const _j={light:"#333333",dark:"#bbbbbb"},Sj={light:"#fffffe",dark:"#1e1e1e"},Tj="__shiki_resolved";function yM(e){var a,l,c,u,f;if(e!=null&&e[Tj])return e;const t={...e};t.tokenColors&&!t.settings&&(t.settings=t.tokenColors,delete t.tokenColors),t.type||(t.type="dark"),t.colorReplacements={...t.colorReplacements},t.settings||(t.settings=[]);let{bg:n,fg:r}=t;if(!n||!r){const m=t.settings?t.settings.find(g=>!g.name&&!g.scope):void 0;(a=m==null?void 0:m.settings)!=null&&a.foreground&&(r=m.settings.foreground),(l=m==null?void 0:m.settings)!=null&&l.background&&(n=m.settings.background),!r&&((c=t==null?void 0:t.colors)!=null&&c["editor.foreground"])&&(r=t.colors["editor.foreground"]),!n&&((u=t==null?void 0:t.colors)!=null&&u["editor.background"])&&(n=t.colors["editor.background"]),r||(r=t.type==="light"?_j.light:_j.dark),n||(n=t.type==="light"?Sj.light:Sj.dark),t.fg=r,t.bg=n}t.settings[0]&&t.settings[0].settings&&!t.settings[0].scope||t.settings.unshift({settings:{foreground:t.fg,background:t.bg}});let s=0;const o=new Map;function i(m){var y;if(o.has(m))return o.get(m);s+=1;const g=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return(y=t.colorReplacements)!=null&&y[`#${g}`]?i(m):(o.set(m,g),g)}t.settings=t.settings.map(m=>{var x,E;const g=((x=m.settings)==null?void 0:x.foreground)&&!m.settings.foreground.startsWith("#"),y=((E=m.settings)==null?void 0:E.background)&&!m.settings.background.startsWith("#");if(!g&&!y)return m;const v={...m,settings:{...m.settings}};if(g){const T=i(m.settings.foreground);t.colorReplacements[T]=m.settings.foreground,v.settings.foreground=T}if(y){const T=i(m.settings.background);t.colorReplacements[T]=m.settings.background,v.settings.background=T}return v});for(const m of Object.keys(t.colors||{}))if((m==="editor.foreground"||m==="editor.background"||m.startsWith("terminal.ansi"))&&!((f=t.colors[m])!=null&&f.startsWith("#"))){const g=i(t.colors[m]);t.colorReplacements[g]=t.colors[m],t.colors[m]=g}return Object.defineProperty(t,Tj,{enumerable:!1,writable:!1,value:!0}),t}async function qne(e){return Array.from(new Set((await Promise.all(e.filter(t=>!Bne(t)).map(async t=>await Fne(t).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function Gne(e){return(await Promise.all(e.map(async n=>zne(n)?null:yM(await Fne(n))))).filter(n=>!!n)}let sVe=3;function oVe(e,t=3){t>sVe||console.trace(`[SHIKI DEPRECATE]: ${e}`)}let m1=class extends Error{constructor(t){super(t),this.name="ShikiError"}};function Wne(e,t){if(!t)return e;if(t[e]){const n=new Set([e]);for(;t[e];){if(e=t[e],n.has(e))throw new m1(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return e}class iVe extends fUe{constructor(n,r,s,o={}){super(n);Ze(this,"_resolvedThemes",new Map);Ze(this,"_resolvedGrammars",new Map);Ze(this,"_langMap",new Map);Ze(this,"_langGraph",new Map);Ze(this,"_textmateThemeCache",new WeakMap);Ze(this,"_loadedThemesCache",null);Ze(this,"_loadedLanguagesCache",null);this._resolver=n,this._themes=r,this._langs=s,this._alias=o,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}getTheme(n){return typeof n=="string"?this._resolvedThemes.get(n):this.loadTheme(n)}loadTheme(n){const r=yM(n);return r.name&&(this._resolvedThemes.set(r.name,r),this._loadedThemesCache=null),r}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(n){let r=this._textmateThemeCache.get(n);r||(r=$T.createFromRawTheme(n),this._textmateThemeCache.set(n,r)),this._syncRegistry.setTheme(r)}getGrammar(n){return n=Wne(n,this._alias),this._resolvedGrammars.get(n)}loadLanguage(n){var i,a,l,c;if(this.getGrammar(n.name))return;const r=new Set([...this._langMap.values()].filter(u=>{var f;return(f=u.embeddedLangsLazy)==null?void 0:f.includes(n.name)}));this._resolver.addLanguage(n);const s={balancedBracketSelectors:n.balancedBracketSelectors||["*"],unbalancedBracketSelectors:n.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(n.scopeName,n);const o=this.loadGrammarWithConfiguration(n.scopeName,1,s);if(o.name=n.name,this._resolvedGrammars.set(n.name,o),n.aliases&&n.aliases.forEach(u=>{this._alias[u]=n.name}),this._loadedLanguagesCache=null,r.size)for(const u of r)this._resolvedGrammars.delete(u.name),this._loadedLanguagesCache=null,(a=(i=this._syncRegistry)==null?void 0:i._injectionGrammars)==null||a.delete(u.scopeName),(c=(l=this._syncRegistry)==null?void 0:l._grammars)==null||c.delete(u.scopeName),this.loadLanguage(this._langMap.get(u.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(n){for(const o of n)this.resolveEmbeddedLanguages(o);const r=Array.from(this._langGraph.entries()),s=r.filter(([o,i])=>!i);if(s.length){const o=r.filter(([i,a])=>{if(!a)return!1;const l=a.embeddedLanguages||a.embeddedLangs;return l==null?void 0:l.some(c=>s.map(([u])=>u).includes(c))}).filter(i=>!s.includes(i));throw new m1(`Missing languages ${s.map(([i])=>`\`${i}\``).join(", ")}, required by ${o.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[o,i]of r)this._resolver.addLanguage(i);for(const[o,i]of r)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(n){this._langMap.set(n.name,n),this._langGraph.set(n.name,n);const r=n.embeddedLanguages??n.embeddedLangs;if(r)for(const s of r)this._langGraph.set(s,this._langMap.get(s))}}class aVe{constructor(t,n){Ze(this,"_langs",new Map);Ze(this,"_scopeToLang",new Map);Ze(this,"_injections",new Map);Ze(this,"_onigLib");this._onigLib={createOnigScanner:r=>t.createScanner(r),createOnigString:r=>t.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(t){return this._langs.get(t)}loadGrammar(t){return this._scopeToLang.get(t)}addLanguage(t){this._langs.set(t.name,t),t.aliases&&t.aliases.forEach(n=>{this._langs.set(n,t)}),this._scopeToLang.set(t.scopeName,t),t.injectTo&&t.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(t.scopeName)})}getInjections(t){const n=t.split(".");let r=[];for(let s=1;s<=n.length;s++){const o=n.slice(0,s).join(".");r=[...r,...this._injections.get(o)||[]]}return r}}let Zy=0;function lVe(e){Zy+=1,e.warnings!==!1&&Zy>=10&&Zy%10===0&&console.warn(`[Shiki] ${Zy} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let t=!1;if(!e.engine)throw new m1("`engine` option is required for synchronous mode");const n=(e.langs||[]).flat(1),r=(e.themes||[]).flat(1).map(yM),s=new aVe(e.engine,n),o=new iVe(s,r,n,e.langAlias);let i;function a(k){return Wne(k,e.langAlias)}function l(k){E();const I=o.getGrammar(typeof k=="string"?k:k.name);if(!I)throw new m1(`Language \`${k}\` not found, you may need to load it first`);return I}function c(k){if(k==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};E();const I=o.getTheme(k);if(!I)throw new m1(`Theme \`${k}\` not found, you may need to load it first`);return I}function u(k){E();const I=c(k);i!==k&&(o.setTheme(I),i=k);const O=o.getColorMap();return{theme:I,colorMap:O}}function f(){return E(),o.getLoadedThemes()}function m(){return E(),o.getLoadedLanguages()}function g(...k){E(),o.loadLanguages(k.flat(1))}async function y(...k){return g(await qne(k))}function v(...k){E();for(const I of k.flat(1))o.loadTheme(I)}async function x(...k){return E(),v(await Gne(k))}function E(){if(t)throw new m1("Shiki instance has been disposed")}function T(){t||(t=!0,o.dispose(),Zy-=1)}return{setTheme:u,getTheme:c,getLanguage:l,getLoadedThemes:f,getLoadedLanguages:m,resolveLangAlias:a,loadLanguage:y,loadLanguageSync:g,loadTheme:x,loadThemeSync:v,dispose:T,[Symbol.dispose]:T}}async function cVe(e){e.engine||oVe("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[t,n,r]=await Promise.all([Gne(e.themes||[]),qne(e.langs||[]),e.engine]);return lVe({...e,themes:t,langs:n,engine:r})}async function uVe(e){const t=await cVe(e);return{getLastGrammarState:(...n)=>qHe(t,...n),codeToTokensBase:(n,r)=>bM(t,n,r),codeToTokensWithThemes:(n,r)=>Vne(t,n,r),codeToTokens:(n,r)=>WT(t,n,r),codeToHast:(n,r)=>YT(t,n,r),codeToHtml:(n,r)=>rVe(t,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...t,getInternalContext:()=>t}}function dVe(e){const t=e.langs,n=e.themes,r=e.engine;async function s(o){function i(f){var m;if(typeof f=="string"){if(f=((m=o.langAlias)==null?void 0:m[f])||f,Bne(f))return[];const g=t[f];if(!g)throw new ui(`Language \`${f}\` is not included in this bundle. You may want to load it from external source.`);return g}return f}function a(f){if(zne(f))return"none";if(typeof f=="string"){const m=n[f];if(!m)throw new ui(`Theme \`${f}\` is not included in this bundle. You may want to load it from external source.`);return m}return f}const l=(o.themes??[]).map(f=>a(f)),c=(o.langs??[]).map(f=>i(f)),u=await uVe({engine:o.engine??r(),...o,themes:l,langs:c});return{...u,loadLanguage(...f){return u.loadLanguage(...f.map(i))},loadTheme(...f){return u.loadTheme(...f.map(a))},getBundledLanguages(){return t},getBundledThemes(){return n}}}return s}function fVe(e){let t;async function n(r={}){if(t){const s=await t;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else{t=e({...r,themes:[],langs:[]});const s=await t;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}}return n}function hVe(e,t){const n=fVe(e);async function r(s,o){var l;const i=await n({langs:[o.lang],themes:"theme"in o?[o.theme]:Object.values(o.themes)}),a=await((l=t==null?void 0:t.guessEmbeddedLanguages)==null?void 0:l.call(t,s,o.lang,i));return a&&await i.loadLanguage(...a),i}return{getSingletonHighlighter(s){return n(s)},async codeToHtml(s,o){return(await r(s,o)).codeToHtml(s,o)},async codeToHast(s,o){return(await r(s,o)).codeToHast(s,o)},async codeToTokens(s,o){return(await r(s,o)).codeToTokens(s,o)},async codeToTokensBase(s,o){return(await r(s,o)).codeToTokensBase(s,o)},async codeToTokensWithThemes(s,o){return(await r(s,o)).codeToTokensWithThemes(s,o)},async getLastGrammarState(s,o){return(await n({langs:[o.lang],themes:[o.theme]})).getLastGrammarState(s,o)}}}const Yne=[{id:"abap",name:"ABAP",import:(()=>me(()=>import("./abap-BdImnpbu.js"),[],import.meta.url))},{id:"actionscript-3",name:"ActionScript",import:(()=>me(()=>import("./actionscript-3-CfeIJUat.js"),[],import.meta.url))},{id:"ada",name:"Ada",import:(()=>me(()=>import("./ada-bCR0ucgS.js"),[],import.meta.url))},{id:"angular-html",name:"Angular HTML",import:(()=>me(()=>import("./angular-html-CU67Zn6k.js").then(e=>e.f),__vite__mapDeps([0,1,2,3]),import.meta.url))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>me(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5]),import.meta.url))},{id:"apache",name:"Apache Conf",import:(()=>me(()=>import("./apache-Pmp26Uib.js"),[],import.meta.url))},{id:"apex",name:"Apex",import:(()=>me(()=>import("./apex-DDbsPZ6N.js"),[],import.meta.url))},{id:"apl",name:"APL",import:(()=>me(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9]),import.meta.url))},{id:"applescript",name:"AppleScript",import:(()=>me(()=>import("./applescript-Co6uUVPk.js"),[],import.meta.url))},{id:"ara",name:"Ara",import:(()=>me(()=>import("./ara-BRHolxvo.js"),[],import.meta.url))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>me(()=>import("./asciidoc-Dv7Oe6Be.js"),[],import.meta.url))},{id:"asm",name:"Assembly",import:(()=>me(()=>import("./asm-D_Q5rh1f.js"),[],import.meta.url))},{id:"astro",name:"Astro",import:(()=>me(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13]),import.meta.url))},{id:"awk",name:"AWK",import:(()=>me(()=>import("./awk-DMzUqQB5.js"),[],import.meta.url))},{id:"ballerina",name:"Ballerina",import:(()=>me(()=>import("./ballerina-BFfxhgS-.js"),[],import.meta.url))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>me(()=>import("./bat-BkioyH1T.js"),[],import.meta.url))},{id:"beancount",name:"Beancount",import:(()=>me(()=>import("./beancount-k_qm7-4y.js"),[],import.meta.url))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>me(()=>import("./berry-uYugtg8r.js"),[],import.meta.url))},{id:"bibtex",name:"BibTeX",import:(()=>me(()=>import("./bibtex-CHM0blh-.js"),[],import.meta.url))},{id:"bicep",name:"Bicep",import:(()=>me(()=>import("./bicep-Bmn6On1c.js"),[],import.meta.url))},{id:"blade",name:"Blade",import:(()=>me(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9]),import.meta.url))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>me(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18]),import.meta.url))},{id:"c",name:"C",import:(()=>me(()=>import("./c-BIGW1oBm.js"),[],import.meta.url))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>me(()=>import("./cadence-Bv_4Rxtq.js"),[],import.meta.url))},{id:"cairo",name:"Cairo",import:(()=>me(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20]),import.meta.url))},{id:"clarity",name:"Clarity",import:(()=>me(()=>import("./clarity-D53aC0YG.js"),[],import.meta.url))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>me(()=>import("./clojure-P80f7IUj.js"),[],import.meta.url))},{id:"cmake",name:"CMake",import:(()=>me(()=>import("./cmake-D1j8_8rp.js"),[],import.meta.url))},{id:"cobol",name:"COBOL",import:(()=>me(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8]),import.meta.url))},{id:"codeowners",name:"CODEOWNERS",import:(()=>me(()=>import("./codeowners-Bp6g37R7.js"),[],import.meta.url))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>me(()=>import("./codeql-DsOJ9woJ.js"),[],import.meta.url))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>me(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2]),import.meta.url))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>me(()=>import("./common-lisp-Cg-RD9OK.js"),[],import.meta.url))},{id:"coq",name:"Coq",import:(()=>me(()=>import("./coq-DkFqJrB1.js"),[],import.meta.url))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>me(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16]),import.meta.url))},{id:"crystal",name:"Crystal",import:(()=>me(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28]),import.meta.url))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>me(()=>import("./csharp-K5feNrxe.js"),[],import.meta.url))},{id:"css",name:"CSS",import:(()=>me(()=>import("./css-DPfMkruS.js"),[],import.meta.url))},{id:"csv",name:"CSV",import:(()=>me(()=>import("./csv-fuZLfV_i.js"),[],import.meta.url))},{id:"cue",name:"CUE",import:(()=>me(()=>import("./cue-D82EKSYY.js"),[],import.meta.url))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>me(()=>import("./cypher-COkxafJQ.js"),[],import.meta.url))},{id:"d",name:"D",import:(()=>me(()=>import("./d-85-TOEBH.js"),[],import.meta.url))},{id:"dart",name:"Dart",import:(()=>me(()=>import("./dart-CF10PKvl.js"),[],import.meta.url))},{id:"dax",name:"DAX",import:(()=>me(()=>import("./dax-CEL-wOlO.js"),[],import.meta.url))},{id:"desktop",name:"Desktop",import:(()=>me(()=>import("./desktop-BmXAJ9_W.js"),[],import.meta.url))},{id:"diff",name:"Diff",import:(()=>me(()=>import("./diff-D97Zzqfu.js"),[],import.meta.url))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>me(()=>import("./docker-BcOcwvcX.js"),[],import.meta.url))},{id:"dotenv",name:"dotEnv",import:(()=>me(()=>import("./dotenv-Da5cRb03.js"),[],import.meta.url))},{id:"dream-maker",name:"Dream Maker",import:(()=>me(()=>import("./dream-maker-BtqSS_iP.js"),[],import.meta.url))},{id:"edge",name:"Edge",import:(()=>me(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15]),import.meta.url))},{id:"elixir",name:"Elixir",import:(()=>me(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3]),import.meta.url))},{id:"elm",name:"Elm",import:(()=>me(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26]),import.meta.url))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>me(()=>import("./emacs-lisp-C9XAeP06.js"),[],import.meta.url))},{id:"erb",name:"ERB",import:(()=>me(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>me(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40]),import.meta.url))},{id:"fennel",name:"Fennel",import:(()=>me(()=>import("./fennel-BYunw83y.js"),[],import.meta.url))},{id:"fish",name:"Fish",import:(()=>me(()=>import("./fish-BvzEVeQv.js"),[],import.meta.url))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>me(()=>import("./fluent-C4IJs8-o.js"),[],import.meta.url))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>me(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42]),import.meta.url))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>me(()=>import("./fortran-free-form-D22FLkUw.js"),[],import.meta.url))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>me(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40]),import.meta.url))},{id:"gdresource",name:"GDResource",import:(()=>me(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46]),import.meta.url))},{id:"gdscript",name:"GDScript",import:(()=>me(()=>import("./gdscript-DTMYz4Jt.js"),[],import.meta.url))},{id:"gdshader",name:"GDShader",import:(()=>me(()=>import("./gdshader-DkwncUOv.js"),[],import.meta.url))},{id:"genie",name:"Genie",import:(()=>me(()=>import("./genie-D0YGMca9.js"),[],import.meta.url))},{id:"gherkin",name:"Gherkin",import:(()=>me(()=>import("./gherkin-DyxjwDmM.js"),[],import.meta.url))},{id:"git-commit",name:"Git Commit Message",import:(()=>me(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48]),import.meta.url))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>me(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28]),import.meta.url))},{id:"gleam",name:"Gleam",import:(()=>me(()=>import("./gleam-BspZqrRM.js"),[],import.meta.url))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>me(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1]),import.meta.url))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>me(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1]),import.meta.url))},{id:"glsl",name:"GLSL",import:(()=>me(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26]),import.meta.url))},{id:"gnuplot",name:"Gnuplot",import:(()=>me(()=>import("./gnuplot-DdkO51Og.js"),[],import.meta.url))},{id:"go",name:"Go",import:(()=>me(()=>import("./go-Dn2_MT6a.js"),[],import.meta.url))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>me(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13]),import.meta.url))},{id:"groovy",name:"Groovy",import:(()=>me(()=>import("./groovy-gcz8RCvz.js"),[],import.meta.url))},{id:"hack",name:"Hack",import:(()=>me(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16]),import.meta.url))},{id:"haml",name:"Ruby Haml",import:(()=>me(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3]),import.meta.url))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>me(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38]),import.meta.url))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>me(()=>import("./haskell-Df6bDoY_.js"),[],import.meta.url))},{id:"haxe",name:"Haxe",import:(()=>me(()=>import("./haxe-CzTSHFRz.js"),[],import.meta.url))},{id:"hcl",name:"HashiCorp HCL",import:(()=>me(()=>import("./hcl-BWvSN4gD.js"),[],import.meta.url))},{id:"hjson",name:"Hjson",import:(()=>me(()=>import("./hjson-D5-asLiD.js"),[],import.meta.url))},{id:"hlsl",name:"HLSL",import:(()=>me(()=>import("./hlsl-D3lLCCz7.js"),[],import.meta.url))},{id:"html",name:"HTML",import:(()=>me(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3]),import.meta.url))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>me(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3]),import.meta.url))},{id:"http",name:"HTTP",import:(()=>me(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13]),import.meta.url))},{id:"hurl",name:"Hurl",import:(()=>me(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56]),import.meta.url))},{id:"hxml",name:"HXML",import:(()=>me(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58]),import.meta.url))},{id:"hy",name:"Hy",import:(()=>me(()=>import("./hy-DFXneXwc.js"),[],import.meta.url))},{id:"imba",name:"Imba",import:(()=>me(()=>import("./imba-DGztddWO.js"),[],import.meta.url))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>me(()=>import("./ini-BEwlwnbL.js"),[],import.meta.url))},{id:"java",name:"Java",import:(()=>me(()=>import("./java-CylS5w8V.js"),[],import.meta.url))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>me(()=>import("./javascript-wDzz0qaB.js"),[],import.meta.url))},{id:"jinja",name:"Jinja",import:(()=>me(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3]),import.meta.url))},{id:"jison",name:"Jison",import:(()=>me(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2]),import.meta.url))},{id:"json",name:"JSON",import:(()=>me(()=>import("./json-Cp-IABpG.js"),[],import.meta.url))},{id:"json5",name:"JSON5",import:(()=>me(()=>import("./json5-C9tS-k6U.js"),[],import.meta.url))},{id:"jsonc",name:"JSON with Comments",import:(()=>me(()=>import("./jsonc-Des-eS-w.js"),[],import.meta.url))},{id:"jsonl",name:"JSON Lines",import:(()=>me(()=>import("./jsonl-DcaNXYhu.js"),[],import.meta.url))},{id:"jsonnet",name:"Jsonnet",import:(()=>me(()=>import("./jsonnet-DFQXde-d.js"),[],import.meta.url))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>me(()=>import("./jssm-C2t-YnRu.js"),[],import.meta.url))},{id:"jsx",name:"JSX",import:(()=>me(()=>import("./jsx-g9-lgVsj.js"),[],import.meta.url))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>me(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62]),import.meta.url))},{id:"kdl",name:"KDL",import:(()=>me(()=>import("./kdl-DV7GczEv.js"),[],import.meta.url))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>me(()=>import("./kotlin-BdnUsdx6.js"),[],import.meta.url))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>me(()=>import("./kusto-BvAqAH-y.js"),[],import.meta.url))},{id:"latex",name:"LaTeX",import:(()=>me(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62]),import.meta.url))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>me(()=>import("./lean-Bc6EcWN3.js"),[],import.meta.url))},{id:"less",name:"Less",import:(()=>me(()=>import("./less-B1dDrJ26.js"),[],import.meta.url))},{id:"liquid",name:"Liquid",import:(()=>me(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9]),import.meta.url))},{id:"llvm",name:"LLVM IR",import:(()=>me(()=>import("./llvm-BtvRca6l.js"),[],import.meta.url))},{id:"log",name:"Log file",import:(()=>me(()=>import("./log-2UxHyX5q.js"),[],import.meta.url))},{id:"logo",name:"Logo",import:(()=>me(()=>import("./logo-BtOb2qkB.js"),[],import.meta.url))},{id:"lua",name:"Lua",import:(()=>me(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26]),import.meta.url))},{id:"luau",name:"Luau",import:(()=>me(()=>import("./luau-CXu1NL6O.js"),[],import.meta.url))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>me(()=>import("./make-CHLpvVh8.js"),[],import.meta.url))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>me(()=>import("./markdown-Cvjx9yec.js"),[],import.meta.url))},{id:"marko",name:"Marko",import:(()=>me(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11]),import.meta.url))},{id:"matlab",name:"MATLAB",import:(()=>me(()=>import("./matlab-D7o27uSR.js"),[],import.meta.url))},{id:"mdc",name:"MDC",import:(()=>me(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3]),import.meta.url))},{id:"mdx",name:"MDX",import:(()=>me(()=>import("./mdx-Cmh6b_Ma.js"),[],import.meta.url))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>me(()=>import("./mermaid-DKYwYmdq.js"),[],import.meta.url))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>me(()=>import("./mipsasm-CKIfxQSi.js"),[],import.meta.url))},{id:"mojo",name:"Mojo",import:(()=>me(()=>import("./mojo-1DNp92w6.js"),[],import.meta.url))},{id:"move",name:"Move",import:(()=>me(()=>import("./move-Bu9oaDYs.js"),[],import.meta.url))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>me(()=>import("./narrat-DRg8JJMk.js"),[],import.meta.url))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>me(()=>import("./nextflow-BrzmwbiE.js"),[],import.meta.url))},{id:"nginx",name:"Nginx",import:(()=>me(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26]),import.meta.url))},{id:"nim",name:"Nim",import:(()=>me(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40]),import.meta.url))},{id:"nix",name:"Nix",import:(()=>me(()=>import("./nix-c8nO5XWb.js"),[],import.meta.url))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>me(()=>import("./nushell-C-sUppwS.js"),[],import.meta.url))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>me(()=>import("./objective-c-DXmwc3jG.js"),[],import.meta.url))},{id:"objective-cpp",name:"Objective-C++",import:(()=>me(()=>import("./objective-cpp-CLxacb5B.js"),[],import.meta.url))},{id:"ocaml",name:"OCaml",import:(()=>me(()=>import("./ocaml-C0hk2d4L.js"),[],import.meta.url))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>me(()=>import("./openscad-C4EeE6gA.js"),[],import.meta.url))},{id:"pascal",name:"Pascal",import:(()=>me(()=>import("./pascal-D93ZcfNL.js"),[],import.meta.url))},{id:"perl",name:"Perl",import:(()=>me(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16]),import.meta.url))},{id:"php",name:"PHP",import:(()=>me(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9]),import.meta.url))},{id:"pkl",name:"Pkl",import:(()=>me(()=>import("./pkl-u5AG7uiY.js"),[],import.meta.url))},{id:"plsql",name:"PL/SQL",import:(()=>me(()=>import("./plsql-ChMvpjG-.js"),[],import.meta.url))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>me(()=>import("./po-BTJTHyun.js"),[],import.meta.url))},{id:"polar",name:"Polar",import:(()=>me(()=>import("./polar-C0HS_06l.js"),[],import.meta.url))},{id:"postcss",name:"PostCSS",import:(()=>me(()=>import("./postcss-CXtECtnM.js"),[],import.meta.url))},{id:"powerquery",name:"PowerQuery",import:(()=>me(()=>import("./powerquery-CEu0bR-o.js"),[],import.meta.url))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>me(()=>import("./powershell-Dpen1YoG.js"),[],import.meta.url))},{id:"prisma",name:"Prisma",import:(()=>me(()=>import("./prisma-Dd19v3D-.js"),[],import.meta.url))},{id:"prolog",name:"Prolog",import:(()=>me(()=>import("./prolog-CbFg5uaA.js"),[],import.meta.url))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>me(()=>import("./proto-DyJlTyXw.js"),[],import.meta.url))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>me(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1]),import.meta.url))},{id:"puppet",name:"Puppet",import:(()=>me(()=>import("./puppet-BMWR74SV.js"),[],import.meta.url))},{id:"purescript",name:"PureScript",import:(()=>me(()=>import("./purescript-CklMAg4u.js"),[],import.meta.url))},{id:"python",name:"Python",aliases:["py"],import:(()=>me(()=>import("./python-B6aJPvgy.js"),[],import.meta.url))},{id:"qml",name:"QML",import:(()=>me(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2]),import.meta.url))},{id:"qmldir",name:"QML Directory",import:(()=>me(()=>import("./qmldir-C8lEn-DE.js"),[],import.meta.url))},{id:"qss",name:"Qt Style Sheets",import:(()=>me(()=>import("./qss-IeuSbFQv.js"),[],import.meta.url))},{id:"r",name:"R",import:(()=>me(()=>import("./r-DiinP2Uv.js"),[],import.meta.url))},{id:"racket",name:"Racket",import:(()=>me(()=>import("./racket-BqYA7rlc.js"),[],import.meta.url))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>me(()=>import("./raku-DXvB9xmW.js"),[],import.meta.url))},{id:"razor",name:"ASP.NET Razor",import:(()=>me(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76]),import.meta.url))},{id:"reg",name:"Windows Registry Script",import:(()=>me(()=>import("./reg-C-SQnVFl.js"),[],import.meta.url))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>me(()=>import("./regexp-CDVJQ6XC.js"),[],import.meta.url))},{id:"rel",name:"Rel",import:(()=>me(()=>import("./rel-C3B-1QV4.js"),[],import.meta.url))},{id:"riscv",name:"RISC-V",import:(()=>me(()=>import("./riscv-BM1_JUlF.js"),[],import.meta.url))},{id:"rosmsg",name:"ROS Interface",import:(()=>me(()=>import("./rosmsg-BJDFO7_C.js"),[],import.meta.url))},{id:"rst",name:"reStructuredText",import:(()=>me(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37]),import.meta.url))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>me(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>me(()=>import("./rust-B1yitclQ.js"),[],import.meta.url))},{id:"sas",name:"SAS",import:(()=>me(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16]),import.meta.url))},{id:"sass",name:"Sass",import:(()=>me(()=>import("./sass-Cj5Yp3dK.js"),[],import.meta.url))},{id:"scala",name:"Scala",import:(()=>me(()=>import("./scala-C151Ov-r.js"),[],import.meta.url))},{id:"scheme",name:"Scheme",import:(()=>me(()=>import("./scheme-C98Dy4si.js"),[],import.meta.url))},{id:"scss",name:"SCSS",import:(()=>me(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3]),import.meta.url))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>me(()=>import("./sdbl-DVxCFoDh.js"),[],import.meta.url))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>me(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81]),import.meta.url))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>me(()=>import("./shellscript-Yzrsuije.js"),[],import.meta.url))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>me(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28]),import.meta.url))},{id:"smalltalk",name:"Smalltalk",import:(()=>me(()=>import("./smalltalk-BERRCDM3.js"),[],import.meta.url))},{id:"solidity",name:"Solidity",import:(()=>me(()=>import("./solidity-rGO070M0.js"),[],import.meta.url))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>me(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3]),import.meta.url))},{id:"sparql",name:"SPARQL",import:(()=>me(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85]),import.meta.url))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>me(()=>import("./splunk-BtCnVYZw.js"),[],import.meta.url))},{id:"sql",name:"SQL",import:(()=>me(()=>import("./sql-BLtJtn59.js"),[],import.meta.url))},{id:"ssh-config",name:"SSH Config",import:(()=>me(()=>import("./ssh-config-_ykCGR6B.js"),[],import.meta.url))},{id:"stata",name:"Stata",import:(()=>me(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16]),import.meta.url))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>me(()=>import("./stylus-BEDo0Tqx.js"),[],import.meta.url))},{id:"svelte",name:"Svelte",import:(()=>me(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12]),import.meta.url))},{id:"swift",name:"Swift",import:(()=>me(()=>import("./swift-Dg5xB15N.js"),[],import.meta.url))},{id:"system-verilog",name:"SystemVerilog",import:(()=>me(()=>import("./system-verilog-CnnmHF94.js"),[],import.meta.url))},{id:"systemd",name:"Systemd Units",import:(()=>me(()=>import("./systemd-4A_iFExJ.js"),[],import.meta.url))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>me(()=>import("./talonscript-CkByrt1z.js"),[],import.meta.url))},{id:"tasl",name:"Tasl",import:(()=>me(()=>import("./tasl-QIJgUcNo.js"),[],import.meta.url))},{id:"tcl",name:"Tcl",import:(()=>me(()=>import("./tcl-dwOrl1Do.js"),[],import.meta.url))},{id:"templ",name:"Templ",import:(()=>me(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3]),import.meta.url))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>me(()=>import("./terraform-BETggiCN.js"),[],import.meta.url))},{id:"tex",name:"TeX",import:(()=>me(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62]),import.meta.url))},{id:"toml",name:"TOML",import:(()=>me(()=>import("./toml-vGWfd6FD.js"),[],import.meta.url))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>me(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8]),import.meta.url))},{id:"tsv",name:"TSV",import:(()=>me(()=>import("./tsv-B_m7g4N7.js"),[],import.meta.url))},{id:"tsx",name:"TSX",import:(()=>me(()=>import("./tsx-COt5Ahok.js"),[],import.meta.url))},{id:"turtle",name:"Turtle",import:(()=>me(()=>import("./turtle-BsS91CYL.js"),[],import.meta.url))},{id:"twig",name:"Twig",import:(()=>me(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>me(()=>import("./typescript-BPQ3VLAy.js"),[],import.meta.url))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>me(()=>import("./typespec-BGHnOYBU.js"),[],import.meta.url))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>me(()=>import("./typst-DHCkPAjA.js"),[],import.meta.url))},{id:"v",name:"V",import:(()=>me(()=>import("./v-BcVCzyr7.js"),[],import.meta.url))},{id:"vala",name:"Vala",import:(()=>me(()=>import("./vala-CsfeWuGM.js"),[],import.meta.url))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>me(()=>import("./vb-D17OF-Vu.js"),[],import.meta.url))},{id:"verilog",name:"Verilog",import:(()=>me(()=>import("./verilog-BQ8w6xss.js"),[],import.meta.url))},{id:"vhdl",name:"VHDL",import:(()=>me(()=>import("./vhdl-CeAyd5Ju.js"),[],import.meta.url))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>me(()=>import("./viml-CJc9bBzg.js"),[],import.meta.url))},{id:"vue",name:"Vue",import:(()=>me(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1]),import.meta.url))},{id:"vue-html",name:"Vue HTML",import:(()=>me(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1]),import.meta.url))},{id:"vue-vine",name:"Vue Vine",import:(()=>me(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1]),import.meta.url))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>me(()=>import("./vyper-CDx5xZoG.js"),[],import.meta.url))},{id:"wasm",name:"WebAssembly",import:(()=>me(()=>import("./wasm-MzD3tlZU.js"),[],import.meta.url))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>me(()=>import("./wenyan-BV7otONQ.js"),[],import.meta.url))},{id:"wgsl",name:"WGSL",import:(()=>me(()=>import("./wgsl-Dx-B1_4e.js"),[],import.meta.url))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>me(()=>import("./wikitext-BhOHFoWU.js"),[],import.meta.url))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>me(()=>import("./wit-5i3qLPDT.js"),[],import.meta.url))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>me(()=>import("./wolfram-lXgVvXCa.js"),[],import.meta.url))},{id:"xml",name:"XML",import:(()=>me(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8]),import.meta.url))},{id:"xsl",name:"XSL",import:(()=>me(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8]),import.meta.url))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>me(()=>import("./yaml-Buea-lGh.js"),[],import.meta.url))},{id:"zenscript",name:"ZenScript",import:(()=>me(()=>import("./zenscript-DVFEvuxE.js"),[],import.meta.url))},{id:"zig",name:"Zig",import:(()=>me(()=>import("./zig-VOosw3JB.js"),[],import.meta.url))}],pVe=Object.fromEntries(Yne.map(e=>[e.id,e.import])),mVe=Object.fromEntries(Yne.flatMap(e=>{var t;return((t=e.aliases)==null?void 0:t.map(n=>[n,e.import]))||[]})),gVe={...pVe,...mVe},bVe=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>me(()=>import("./andromeeda-C-Jbm3Hp.js"),[],import.meta.url))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>me(()=>import("./aurora-x-D-2ljcwZ.js"),[],import.meta.url))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>me(()=>import("./ayu-dark-Cv9koXgw.js"),[],import.meta.url))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>me(()=>import("./catppuccin-frappe-DFWUc33u.js"),[],import.meta.url))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>me(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[],import.meta.url))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>me(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[],import.meta.url))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>me(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[],import.meta.url))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>me(()=>import("./dark-plus-C3mMm8J8.js"),[],import.meta.url))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>me(()=>import("./dracula-BzJJZx-M.js"),[],import.meta.url))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>me(()=>import("./dracula-soft-BXkSAIEj.js"),[],import.meta.url))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>me(()=>import("./everforest-dark-BgDCqdQA.js"),[],import.meta.url))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>me(()=>import("./everforest-light-C8M2exoo.js"),[],import.meta.url))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>me(()=>import("./github-dark-DHJKELXO.js"),[],import.meta.url))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>me(()=>import("./github-dark-default-Cuk6v7N8.js"),[],import.meta.url))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>me(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[],import.meta.url))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>me(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[],import.meta.url))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>me(()=>import("./github-light-DAi9KRSo.js"),[],import.meta.url))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>me(()=>import("./github-light-default-D7oLnXFd.js"),[],import.meta.url))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>me(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[],import.meta.url))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>me(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[],import.meta.url))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>me(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[],import.meta.url))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>me(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[],import.meta.url))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>me(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[],import.meta.url))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>me(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[],import.meta.url))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>me(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[],import.meta.url))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>me(()=>import("./houston-DnULxvSX.js"),[],import.meta.url))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>me(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[],import.meta.url))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>me(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[],import.meta.url))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>me(()=>import("./kanagawa-wave-DWedfzmr.js"),[],import.meta.url))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>me(()=>import("./laserwave-DUszq2jm.js"),[],import.meta.url))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>me(()=>import("./light-plus-B7mTdjB0.js"),[],import.meta.url))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>me(()=>import("./material-theme-D5KoaKCx.js"),[],import.meta.url))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>me(()=>import("./material-theme-darker-BfHTSMKl.js"),[],import.meta.url))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>me(()=>import("./material-theme-lighter-B0m2ddpp.js"),[],import.meta.url))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>me(()=>import("./material-theme-ocean-CyktbL80.js"),[],import.meta.url))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>me(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[],import.meta.url))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>me(()=>import("./min-dark-CafNBF8u.js"),[],import.meta.url))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>me(()=>import("./min-light-CTRr51gU.js"),[],import.meta.url))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>me(()=>import("./monokai-D4h5O-jR.js"),[],import.meta.url))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>me(()=>import("./night-owl-C39BiMTA.js"),[],import.meta.url))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>me(()=>import("./nord-Ddv68eIx.js"),[],import.meta.url))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>me(()=>import("./one-dark-pro-DVMEJ2y_.js"),[],import.meta.url))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>me(()=>import("./one-light-PoHY5YXO.js"),[],import.meta.url))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>me(()=>import("./plastic-3e1v2bzS.js"),[],import.meta.url))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>me(()=>import("./poimandres-CS3Unz2-.js"),[],import.meta.url))},{id:"red",displayName:"Red",type:"dark",import:(()=>me(()=>import("./red-bN70gL4F.js"),[],import.meta.url))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>me(()=>import("./rose-pine-qdsjHGoJ.js"),[],import.meta.url))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>me(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[],import.meta.url))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>me(()=>import("./rose-pine-moon-D4_iv3hh.js"),[],import.meta.url))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>me(()=>import("./slack-dark-BthQWCQV.js"),[],import.meta.url))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>me(()=>import("./slack-ochin-DqwNpetd.js"),[],import.meta.url))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>me(()=>import("./snazzy-light-Bw305WKR.js"),[],import.meta.url))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>me(()=>import("./solarized-dark-DXbdFlpD.js"),[],import.meta.url))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>me(()=>import("./solarized-light-L9t79GZl.js"),[],import.meta.url))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>me(()=>import("./synthwave-84-CbfX1IO0.js"),[],import.meta.url))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>me(()=>import("./tokyo-night-hegEt444.js"),[],import.meta.url))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>me(()=>import("./vesper-DU1UobuO.js"),[],import.meta.url))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>me(()=>import("./vitesse-black-Bkuqu6BP.js"),[],import.meta.url))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>me(()=>import("./vitesse-dark-D0r3Knsf.js"),[],import.meta.url))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>me(()=>import("./vitesse-light-CVO1_9PV.js"),[],import.meta.url))}],yVe=Object.fromEntries(bVe.map(e=>[e.id,e.import]));class vM extends Error{constructor(t){super(t),this.name="ShikiError"}}function vVe(){return 2147483648}function xVe(){return typeof performance<"u"?performance.now():Date.now()}const wVe=(e,t)=>e+(t-e%t)%t;async function EVe(e){let t,n;const r={};function s(g){n=g,r.HEAPU8=new Uint8Array(g),r.HEAPU32=new Uint32Array(g)}function o(g,y,v){r.HEAPU8.copyWithin(g,y,y+v)}function i(g){try{return t.grow(g-n.byteLength+65535>>>16),s(t.buffer),1}catch{}}function a(g){const y=r.HEAPU8.length;g=g>>>0;const v=vVe();if(g>v)return!1;for(let x=1;x<=4;x*=2){let E=y*(1+.2/x);E=Math.min(E,g+100663296);const T=Math.min(v,wVe(Math.max(g,E),65536));if(i(T))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(g,y,v=1024){const x=y+v;let E=y;for(;g[E]&&!(E>=x);)++E;if(E-y>16&&g.buffer&&l)return l.decode(g.subarray(y,E));let T="";for(;y<E;){let k=g[y++];if(!(k&128)){T+=String.fromCharCode(k);continue}const I=g[y++]&63;if((k&224)===192){T+=String.fromCharCode((k&31)<<6|I);continue}const O=g[y++]&63;if((k&240)===224?k=(k&15)<<12|I<<6|O:k=(k&7)<<18|I<<12|O<<6|g[y++]&63,k<65536)T+=String.fromCharCode(k);else{const M=k-65536;T+=String.fromCharCode(55296|M>>10,56320|M&1023)}}return T}function u(g,y){return g?c(r.HEAPU8,g,y):""}const f={emscripten_get_now:xVe,emscripten_memcpy_big:o,emscripten_resize_heap:a,fd_write:()=>0};async function m(){const y=await e({env:f,wasi_snapshot_preview1:f});t=y.memory,s(t.buffer),Object.assign(r,y),r.UTF8ToString=u}return await m(),r}var _Ve=Object.defineProperty,SVe=(e,t,n)=>t in e?_Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ci=(e,t,n)=>SVe(e,typeof t!="symbol"?t+"":t,n);let $i=null;function TVe(e){throw new vM(e.UTF8ToString(e.getLastOnigError()))}class FC{constructor(t){Ci(this,"utf16Length"),Ci(this,"utf8Length"),Ci(this,"utf16Value"),Ci(this,"utf8Value"),Ci(this,"utf16OffsetToUtf8"),Ci(this,"utf8OffsetToUtf16");const n=t.length,r=FC._utf8ByteLength(t),s=r!==n,o=s?new Uint32Array(n+1):null;s&&(o[n]=r);const i=s?new Uint32Array(r+1):null;s&&(i[r]=n);const a=new Uint8Array(r);let l=0;for(let c=0;c<n;c++){const u=t.charCodeAt(c);let f=u,m=!1;if(u>=55296&&u<=56319&&c+1<n){const g=t.charCodeAt(c+1);g>=56320&&g<=57343&&(f=(u-55296<<10)+65536|g-56320,m=!0)}s&&(o[c]=l,m&&(o[c+1]=l),f<=127?i[l+0]=c:f<=2047?(i[l+0]=c,i[l+1]=c):f<=65535?(i[l+0]=c,i[l+1]=c,i[l+2]=c):(i[l+0]=c,i[l+1]=c,i[l+2]=c,i[l+3]=c)),f<=127?a[l++]=f:f<=2047?(a[l++]=192|(f&1984)>>>6,a[l++]=128|(f&63)>>>0):f<=65535?(a[l++]=224|(f&61440)>>>12,a[l++]=128|(f&4032)>>>6,a[l++]=128|(f&63)>>>0):(a[l++]=240|(f&1835008)>>>18,a[l++]=128|(f&258048)>>>12,a[l++]=128|(f&4032)>>>6,a[l++]=128|(f&63)>>>0),m&&c++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=t,this.utf8Value=a,this.utf16OffsetToUtf8=o,this.utf8OffsetToUtf16=i}static _utf8ByteLength(t){let n=0;for(let r=0,s=t.length;r<s;r++){const o=t.charCodeAt(r);let i=o,a=!1;if(o>=55296&&o<=56319&&r+1<s){const l=t.charCodeAt(r+1);l>=56320&&l<=57343&&(i=(o-55296<<10)+65536|l-56320,a=!0)}i<=127?n+=1:i<=2047?n+=2:i<=65535?n+=3:n+=4,a&&r++}return n}createString(t){const n=t.omalloc(this.utf8Length);return t.HEAPU8.set(this.utf8Value,n),n}}const BC=class Ju{constructor(t){if(Ci(this,"id",++Ju.LAST_ID),Ci(this,"_onigBinding"),Ci(this,"content"),Ci(this,"utf16Length"),Ci(this,"utf8Length"),Ci(this,"utf16OffsetToUtf8"),Ci(this,"utf8OffsetToUtf16"),Ci(this,"ptr"),!$i)throw new vM("Must invoke loadWasm first.");this._onigBinding=$i,this.content=t;const n=new FC(t);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!Ju._sharedPtrInUse?(Ju._sharedPtr||(Ju._sharedPtr=$i.omalloc(1e4)),Ju._sharedPtrInUse=!0,$i.HEAPU8.set(n.utf8Value,Ju._sharedPtr),this.ptr=Ju._sharedPtr):this.ptr=n.createString($i)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===Ju._sharedPtr?Ju._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Ci(BC,"LAST_ID",0);Ci(BC,"_sharedPtr",0);Ci(BC,"_sharedPtrInUse",!1);let Kne=BC;class CVe{constructor(t){if(Ci(this,"_onigBinding"),Ci(this,"_ptr"),!$i)throw new vM("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=t.length;a<l;a++){const c=new FC(t[a]);n[a]=c.createString($i),r[a]=c.utf8Length}const s=$i.omalloc(4*t.length);$i.HEAPU32.set(n,s/4);const o=$i.omalloc(4*t.length);$i.HEAPU32.set(r,o/4);const i=$i.createOnigScanner(s,o,t.length);for(let a=0,l=t.length;a<l;a++)$i.ofree(n[a]);$i.ofree(o),$i.ofree(s),i===0&&TVe($i),this._onigBinding=$i,this._ptr=i}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(t,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof t=="string"){t=new Kne(t);const o=this._findNextMatchSync(t,n,!1,s);return t.dispose(),o}return this._findNextMatchSync(t,n,!1,s)}_findNextMatchSync(t,n,r,s){const o=this._onigBinding,i=o.findNextOnigScannerMatch(this._ptr,t.id,t.ptr,t.utf8Length,t.convertUtf16OffsetToUtf8(n),s);if(i===0)return null;const a=o.HEAPU32;let l=i/4;const c=a[l++],u=a[l++],f=[];for(let m=0;m<u;m++){const g=t.convertUtf8OffsetToUtf16(a[l++]),y=t.convertUtf8OffsetToUtf16(a[l++]);f[m]={start:g,end:y,length:y-g}}return{index:c,captureIndices:f}}}function kVe(e){return typeof e.instantiator=="function"}function AVe(e){return typeof e.default=="function"}function NVe(e){return typeof e.data<"u"}function IVe(e){return typeof Response<"u"&&e instanceof Response}function RVe(e){var t;return typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||ArrayBuffer.isView(e))||typeof Buffer<"u"&&((t=Buffer.isBuffer)==null?void 0:t.call(Buffer,e))||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&e instanceof Uint32Array}let Z2;function MVe(e){if(Z2)return Z2;async function t(){$i=await EVe(async n=>{let r=e;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),kVe(r)?r=await r.instantiator(n):AVe(r)?r=await r.default(n):(NVe(r)&&(r=r.data),IVe(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await OVe(r)(n):r=await DVe(r)(n):RVe(r)?r=await eA(r)(n):r instanceof WebAssembly.Module?r=await eA(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await eA(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Z2=t(),Z2}function eA(e){return t=>WebAssembly.instantiate(e,t)}function OVe(e){return t=>WebAssembly.instantiateStreaming(e,t)}function DVe(e){return async t=>{const n=await e.arrayBuffer();return WebAssembly.instantiate(n,t)}}async function PVe(e){return e&&await MVe(e),{createScanner(t){return new CVe(t.map(n=>typeof n=="string"?n:n.source))},createString(t){return new Kne(t)}}}const LVe=dVe({langs:gVe,themes:yVe,engine:()=>PVe(me(()=>import("./wasm-CG6Dc4jp.js"),[],import.meta.url))}),{codeToHtml:Cj}=hVe(LVe,{guessEmbeddedLanguages:CHe}),Zne=w.createContext({code:""}),$Ve={name:"line-numbers",line(e,t){e.children.unshift({type:"element",tagName:"span",properties:{className:["inline-block","min-w-10","mr-4","text-right","select-none","text-muted-foreground"]},children:[{type:"text",value:String(t)}]})}};async function FVe(e,t,n=!1){const r=n?[$Ve]:[];try{return await Promise.all([Cj(e,{lang:t,theme:"one-light",transformers:r}),Cj(e,{lang:t,theme:"one-dark-pro",transformers:r})])}catch(s){console.error("[CodeBlock] Shiki highlighting failed:",s);const i=`<pre><code>${e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`;return[i,i]}}const uI=({code:e,language:t,showLineNumbers:n=!1,isDarkMode:r=!1,className:s,children:o,...i})=>{const[a,l]=w.useState(""),[c,u]=w.useState(""),f=w.useRef(!1);return w.useEffect(()=>(FVe(e,t,n).then(([m,g])=>{f.current||(l(m),u(g),f.current=!0)}).catch(m=>{console.error("[CodeBlock] Async error caught:",m)}),()=>{f.current=!1}),[e,t,n]),h.jsx(Zne.Provider,{value:{code:e},children:h.jsx("div",{className:Qe("group relative w-full rounded-lg border overflow-hidden",r?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-stone-50 border-stone-200 text-stone-900",s),...i,children:h.jsxs("div",{className:"relative",children:[r?h.jsx("div",{className:"overflow-x-auto [&>pre]:m-0 [&>pre]:p-4 [&>pre]:text-sm [&>pre]:bg-transparent [&_code]:font-mono [&_code]:text-sm",dangerouslySetInnerHTML:{__html:c}}):h.jsx("div",{className:"overflow-x-auto [&>pre]:m-0 [&>pre]:p-4 [&>pre]:text-sm [&>pre]:bg-transparent [&_code]:font-mono [&_code]:text-sm",dangerouslySetInnerHTML:{__html:a}}),o&&h.jsx("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:o})]})})})},BVe=({onCopy:e,onError:t,timeout:n=2e3,children:r,className:s,...o})=>{const[i,a]=w.useState(!1),{code:l}=w.useContext(Zne),c=async()=>{var f;if(typeof window>"u"||!((f=navigator==null?void 0:navigator.clipboard)!=null&&f.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{await navigator.clipboard.writeText(l),a(!0),e==null||e(),setTimeout(()=>a(!1),n)}catch(m){t==null||t(m)}},u=i?Ts:Fq;return h.jsx(wr,{className:Qe("shrink-0",s),onClick:c,size:"icon",variant:"ghost",...o,children:r??h.jsx(u,{size:14})})},Bw=(function(e){if(e==null)return HVe;if(typeof e=="function")return zC(e);if(typeof e=="object")return Array.isArray(e)?zVe(e):jVe(e);if(typeof e=="string")return UVe(e);throw new Error("Expected function, string, or object as test")});function zVe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Bw(e[n]);return zC(r);function r(...s){let o=-1;for(;++o<t.length;)if(t[o].apply(this,s))return!0;return!1}}function jVe(e){const t=e;return zC(n);function n(r){const s=r;let o;for(o in e)if(s[o]!==t[o])return!1;return!0}}function UVe(e){return zC(t);function t(n){return n&&n.type===e}}function zC(e){return t;function t(n,r,s){return!!(VVe(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function HVe(){return!0}function VVe(e){return e!==null&&typeof e=="object"&&"type"in e}const Jne=[],_v=!0,dI=!1,KT="skip";function xM(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const o=Bw(s),i=r?-1:1;a(e,void 0,[])();function a(l,c,u){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const g=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=Jne,y,v,x;if((!t||o(l,c,u[u.length-1]||void 0))&&(g=qVe(n(l,u)),g[0]===dI))return g;if("children"in l&&l.children){const E=l;if(E.children&&g[0]!==KT)for(v=(r?E.children.length:-1)+i,x=u.concat(E);v>-1&&v<E.children.length;){const T=E.children[v];if(y=a(T,v,x)(),y[0]===dI)return y;v=typeof y[1]=="number"?y[1]:v+i}}return g}}}function qVe(e){return Array.isArray(e)?e:typeof e=="number"?[_v,e]:e==null?Jne:[e]}function ab(e,t,n,r){let s,o,i;typeof t=="function"&&typeof n!="function"?(o=void 0,i=t,s=n):(o=t,i=n,s=r),xM(e,o,a,s);function a(l,c){const u=c[c.length-1],f=u?u.children.indexOf(l):void 0;return i(l,f,u)}}function GVe({defaultOrigin:e="",allowedLinkPrefixes:t=[],allowedImagePrefixes:n=[],allowDataImages:r=!1,allowedProtocols:s=[],blockedImageClass:o="inline-block bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-3 py-1 rounded text-sm",blockedLinkClass:i="text-gray-500"}){const a=t.length&&!t.every(c=>c==="*"),l=n.length&&!n.every(c=>c==="*");if(!e&&(a||l))throw new Error("defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided");return c=>{const u=ZVe(e,t,n,r,s,o,i);ab(c,u)}}function kj(e,t){if(typeof e!="string")return null;try{return new URL(e)}catch{if(t)try{return new URL(e,t)}catch{return null}return null}}function WVe(e){return typeof e!="string"?!1:e.startsWith("/")}const YVe=new Set(["https:","http:","irc:","ircs:","mailto:","xmpp:","blob:"]),KVe=new Set(["javascript:","data:","file:","vbscript:"]);function Aj(e,t,n,r=!1,s=!1,o=[]){if(!e)return null;if(typeof e=="string"&&e.startsWith("#")&&!s)try{if(new URL(e,"http://example.com").hash===e)return e}catch{}if(typeof e=="string"&&e.startsWith("data:"))return s&&r&&e.startsWith("data:image/")?e:null;if(typeof e=="string"&&e.startsWith("blob:")){try{if(new URL(e).protocol==="blob:"&&e.length>5){const u=e.substring(5);if(u&&u.length>0&&u!=="invalid")return e}}catch{return null}return null}const i=kj(e,n);if(!i||KVe.has(i.protocol)||!(YVe.has(i.protocol)||o.includes(i.protocol)||o.includes("*")))return null;if(i.protocol==="mailto:"||!i.protocol.match(/^https?:$/))return i.href;const l=WVe(e);return i&&t.some(c=>{const u=kj(c,n);return!u||u.origin!==i.origin?!1:i.href.startsWith(u.href)})?l?i.pathname+i.search+i.hash:i.href:t.includes("*")?i.protocol!=="https:"&&i.protocol!=="http:"?null:l?i.pathname+i.search+i.hash:i.href:null}const tA=Symbol("node-seen"),ZVe=(e,t,n,r,s,o,i)=>{const a=(l,c,u)=>{if(l.type!=="element"||l[tA])return _v;if(l.tagName==="a"){const f=Aj(l.properties.href,t,e,!1,!1,s);return f===null?(l[tA]=!0,ab(l,a),u&&typeof c=="number"&&(u.children[c]={type:"element",tagName:"span",properties:{title:"Blocked URL: "+String(l.properties.href),class:i},children:[...l.children,{type:"text",value:" [blocked]"}]}),KT):(l.properties.href=f,l.properties.target="_blank",l.properties.rel="noopener noreferrer",_v)}if(l.tagName==="img"){const f=Aj(l.properties.src,n,e,r,!0,s);return f===null?(l[tA]=!0,ab(l,a),u&&typeof c=="number"&&(u.children[c]={type:"element",tagName:"span",properties:{class:o},children:[{type:"text",value:"[Image blocked: "+String(l.properties.alt||"No description")+"]"}]}),KT):(l.properties.src=f,_v)}return _v};return a},Nj=/[#.]/g;function JVe(e,t){const n=e||"",r={};let s=0,o,i;for(;s<n.length;){Nj.lastIndex=s;const a=Nj.exec(n),l=n.slice(s,a?a.index:n.length);l&&(o?o==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:i=l,s+=l.length),a&&(o=a[0],s++)}return{type:"element",tagName:i||t||"div",properties:r,children:[]}}function Xne(e,t,n){const r=n?tqe(n):void 0;function s(o,i,...a){let l;if(o==null){l={type:"root",children:[]};const c=i;a.unshift(c)}else{l=JVe(o,t);const c=l.tagName.toLowerCase(),u=r?r.get(c):void 0;if(l.tagName=u||c,XVe(i))a.unshift(i);else for(const[f,m]of Object.entries(i))QVe(e,l.properties,f,m)}for(const c of a)fI(l.children,c);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return s}function XVe(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const r of n){const s=t[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const o=s;for(const i of o)if(typeof i!="number"&&typeof i!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function QVe(e,t,n,r){const s=Fw(e,n);let o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?s.spaceSeparated?o=gj(r):s.commaSeparated?o=mj(r):s.commaOrSpaceSeparated?o=gj(mj(r).join(" ")):o=Ij(s,s.property,r):Array.isArray(r)?o=[...r]:o=s.property==="style"?eqe(r):String(r);if(Array.isArray(o)){const i=[];for(const a of o)i.push(Ij(s,s.property,a));o=i}s.property==="className"&&Array.isArray(t.className)&&(o=t.className.concat(o)),t[s.property]=o}}function fI(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)fI(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?fI(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Ij(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||Gx(n)===Gx(t)))return!0}return n}function eqe(e){const t=[];for(const[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}function tqe(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const nqe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Qne=Xne(Rb,"div"),ere=Xne(Td,"g",nqe),pd={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rqe(e,t){return tre(e,{})||{type:"root",children:[]}}function tre(e,t){const n=sqe(e,t);return n&&t.afterTransform&&t.afterTransform(e,n),n}function sqe(e,t){switch(e.nodeType){case 1:return lqe(e,t);case 3:return iqe(e);case 8:return aqe(e);case 9:return Rj(e,t);case 10:return oqe();case 11:return Rj(e,t);default:return}}function Rj(e,t){return{type:"root",children:nre(e,t)}}function oqe(){return{type:"doctype"}}function iqe(e){return{type:"text",value:e.nodeValue||""}}function aqe(e){return{type:"comment",value:e.nodeValue||""}}function lqe(e,t){const n=e.namespaceURI,r=n===pd.svg?ere:Qne,s=n===pd.html?e.tagName.toLowerCase():e.tagName,o=n===pd.html&&s==="template"?e.content:e,i=e.getAttributeNames(),a={};let l=-1;for(;++l<i.length;)a[i[l]]=e.getAttribute(i[l])||"";return r(s,a,nre(o,t))}function nre(e,t){const n=e.childNodes,r=[];let s=-1;for(;++s<n.length;){const o=tre(n[s],t);o!==void 0&&r.push(o)}return r}new DOMParser;function cqe(e,t){const n=uqe(e);return rqe(n)}function uqe(e){const t=document.createElement("template");return t.innerHTML=e,t.content}const Mj=(function(e,t,n){const r=Bw(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(r(e.children[t],t,e))return e.children[t]}),Bm=(function(e){if(e==null)return hqe;if(typeof e=="string")return fqe(e);if(typeof e=="object")return dqe(e);if(typeof e=="function")return wM(e);throw new Error("Expected function, string, or array as `test`")});function dqe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Bm(e[n]);return wM(r);function r(...s){let o=-1;for(;++o<t.length;)if(t[o].apply(this,s))return!0;return!1}}function fqe(e){return wM(t);function t(n){return n.tagName===e}}function wM(e){return t;function t(n,r,s){return!!(pqe(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function hqe(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function pqe(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const Oj=/\n/g,Dj=/[\t ]+/g,hI=Bm("br"),Pj=Bm(Eqe),mqe=Bm("p"),Lj=Bm("tr"),gqe=Bm(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",wqe,_qe]),rre=Bm(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function bqe(e,t){const n=t||{},r="children"in e?e.children:[],s=rre(e),o=ire(e,{whitespace:n.whitespace||"normal"}),i=[];(e.type==="text"||e.type==="comment")&&i.push(...ore(e,{breakBefore:!0,breakAfter:!0}));let a=-1;for(;++a<r.length;)i.push(...sre(r[a],e,{whitespace:o,breakBefore:a?void 0:s,breakAfter:a<r.length-1?hI(r[a+1]):s}));const l=[];let c;for(a=-1;++a<i.length;){const u=i[a];typeof u=="number"?c!==void 0&&u>c&&(c=u):u&&(c!==void 0&&c>-1&&l.push(`
`.repeat(c)||" "),c=-1,l.push(u))}return l.join("")}function sre(e,t,n){return e.type==="element"?yqe(e,t,n):e.type==="text"?n.whitespace==="normal"?ore(e,n):vqe(e):[]}function yqe(e,t,n){const r=ire(e,n),s=e.children||[];let o=-1,i=[];if(gqe(e))return i;let a,l;for(hI(e)||Lj(e)&&Mj(t,e,Lj)?l=`
`:mqe(e)?(a=2,l=2):rre(e)&&(a=1,l=1);++o<s.length;)i=i.concat(sre(s[o],e,{whitespace:r,breakBefore:o?void 0:a,breakAfter:o<s.length-1?hI(s[o+1]):l}));return Pj(e)&&Mj(t,e,Pj)&&i.push("	"),a&&i.unshift(a),l&&i.push(l),i}function ore(e,t){const n=String(e.value),r=[],s=[];let o=0;for(;o<=n.length;){Oj.lastIndex=o;const l=Oj.exec(n),c=l&&"index"in l?l.index:n.length;r.push(xqe(n.slice(o,c).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),o===0?t.breakBefore:!0,c===n.length?t.breakAfter:!0)),o=c+1}let i=-1,a;for(;++i<r.length;)r[i].charCodeAt(r[i].length-1)===8203||i<r.length-1&&r[i+1].charCodeAt(0)===8203?(s.push(r[i]),a=void 0):r[i]?(typeof a=="number"&&s.push(a),s.push(r[i]),a=0):(i===0||i===r.length-1)&&s.push(0);return s}function vqe(e){return[String(e.value)]}function xqe(e,t,n){const r=[];let s=0,o;for(;s<e.length;){Dj.lastIndex=s;const i=Dj.exec(e);o=i?i.index:e.length,!s&&!o&&i&&!t&&r.push(""),s!==o&&r.push(e.slice(s,o)),s=i?o+i[0].length:o}return s!==o&&!n&&r.push(""),r.join(" ")}function ire(e,t){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function wqe(e){return!!(e.properties||{}).hidden}function Eqe(e){return e.tagName==="td"||e.tagName==="th"}function _qe(e){return e.tagName==="dialog"&&!(e.properties||{}).open}class cl{constructor(t,n,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=n,this.end=r}static range(t,n){return n?!t||!t.loc||!n.loc||t.loc.lexer!==n.loc.lexer?null:new cl(t.loc.lexer,t.loc.start,n.loc.end):t&&t.loc}}class Kl{constructor(t,n){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=n}range(t,n){return new Kl(n,cl.range(this,t))}}let It=class are{constructor(t,n){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+t,s,o,i=n&&n.loc;if(i&&i.start<=i.end){var a=i.lexer.input;s=i.start,o=i.end,s===a.length?r+=" at end of input: ":r+=" at position "+(s+1)+": ";var l=a.slice(s,o).replace(/[^]/g,"$&"),c;s>15?c=""+a.slice(s-15,s):c=a.slice(0,s);var u;o+15<a.length?u=a.slice(o,o+15)+"":u=a.slice(o),r+=c+l+u}var f=new Error(r);return f.name="ParseError",f.__proto__=are.prototype,f.position=s,s!=null&&o!=null&&(f.length=o-s),f.rawMessage=t,f}};It.prototype.__proto__=Error.prototype;var Sqe=function(t,n){return t===void 0?n:t},Tqe=/([A-Z])/g,Cqe=function(t){return t.replace(Tqe,"-$1").toLowerCase()},kqe={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Aqe=/[&><"']/g;function Nqe(e){return String(e).replace(Aqe,t=>kqe[t])}var lre=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},Iqe=function(t){var n=lre(t);return n.type==="mathord"||n.type==="textord"||n.type==="atom"},Rqe=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},Mqe=function(t){var n=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return n?n[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(n[1])?null:n[1].toLowerCase():"_relative"},is={deflt:Sqe,escape:Nqe,hyphenate:Cqe,getBaseElem:lre,isCharacterBox:Iqe,protocolFromUrl:Mqe},Wv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function Oqe(e){if(e.default)return e.default;var t=e.type,n=Array.isArray(t)?t[0]:t;if(typeof n!="string")return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class EM{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var n in Wv)if(Wv.hasOwnProperty(n)){var r=Wv[n];this[n]=t[n]!==void 0?r.processor?r.processor(t[n]):t[n]:Oqe(r)}}reportNonstrict(t,n,r){var s=this.strict;if(typeof s=="function"&&(s=s(t,n,r)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new It("LaTeX-incompatible input and strict mode is set to 'error': "+(n+" ["+t+"]"),r);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+n+" ["+t+"]"))}}useStrictBehavior(t,n,r){var s=this.strict;if(typeof s=="function")try{s=s(t,n,r)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+n+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var n=is.protocolFromUrl(t.url);if(n==null)return!1;t.protocol=n}var r=typeof this.trust=="function"?this.trust(t):this.trust;return!!r}}class Gh{constructor(t,n,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=n,this.cramped=r}sup(){return cd[Dqe[this.id]]}sub(){return cd[Pqe[this.id]]}fracNum(){return cd[Lqe[this.id]]}fracDen(){return cd[$qe[this.id]]}cramp(){return cd[Fqe[this.id]]}text(){return cd[Bqe[this.id]]}isTight(){return this.size>=2}}var _M=0,ZT=1,D1=2,zf=3,Yx=4,Ac=5,lb=6,Da=7,cd=[new Gh(_M,0,!1),new Gh(ZT,0,!0),new Gh(D1,1,!1),new Gh(zf,1,!0),new Gh(Yx,2,!1),new Gh(Ac,2,!0),new Gh(lb,3,!1),new Gh(Da,3,!0)],Dqe=[Yx,Ac,Yx,Ac,lb,Da,lb,Da],Pqe=[Ac,Ac,Ac,Ac,Da,Da,Da,Da],Lqe=[D1,zf,Yx,Ac,lb,Da,lb,Da],$qe=[zf,zf,Ac,Ac,Da,Da,Da,Da],Fqe=[ZT,ZT,zf,zf,Ac,Ac,Da,Da],Bqe=[_M,ZT,D1,zf,D1,zf,D1,zf],Fn={DISPLAY:cd[_M],TEXT:cd[D1],SCRIPT:cd[Yx],SCRIPTSCRIPT:cd[lb]},pI=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function zqe(e){for(var t=0;t<pI.length;t++)for(var n=pI[t],r=0;r<n.blocks.length;r++){var s=n.blocks[r];if(e>=s[0]&&e<=s[1])return n.name}return null}var j_=[];pI.forEach(e=>e.blocks.forEach(t=>j_.push(...t)));function cre(e){for(var t=0;t<j_.length;t+=2)if(e>=j_[t]&&e<=j_[t+1])return!0;return!1}var Jg=80,jqe=function(t,n){return"M95,"+(622+t+n)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+n+"h400000v"+(40+t)+"h-400000z"},Uqe=function(t,n){return"M263,"+(601+t+n)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+n+"h400000v"+(40+t)+"h-400000z"},Hqe=function(t,n){return"M983 "+(10+t+n)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+n+"h400000v"+(40+t)+"h-400000z"},Vqe=function(t,n){return"M424,"+(2398+t+n)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+n+`
h400000v`+(40+t)+"h-400000z"},qqe=function(t,n){return"M473,"+(2713+t+n)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+n+"h400000v"+(40+t)+"H1017.7z"},Gqe=function(t){var n=t/2;return"M400000 "+t+" H0 L"+n+" 0 l65 45 L145 "+(t-80)+" H400000z"},Wqe=function(t,n,r){var s=r-54-n-t;return"M702 "+(t+n)+"H400000"+(40+t)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+n+"H400000v"+(40+t)+"H742z"},Yqe=function(t,n,r){n=1e3*n;var s="";switch(t){case"sqrtMain":s=jqe(n,Jg);break;case"sqrtSize1":s=Uqe(n,Jg);break;case"sqrtSize2":s=Hqe(n,Jg);break;case"sqrtSize3":s=Vqe(n,Jg);break;case"sqrtSize4":s=qqe(n,Jg);break;case"sqrtTall":s=Wqe(n,Jg,r)}return s},Kqe=function(t,n){switch(t){case"":return"M291 0 H417 V"+n+" H291z M291 0 H417 V"+n+" H291z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z"+("M367 0 H410 V"+n+" H367z M367 0 H410 V"+n+" H367z");case"":return"M457 0 H583 V"+n+" H457z M457 0 H583 V"+n+" H457z";case"":return"M319 0 H403 V"+n+" H319z M319 0 H403 V"+n+" H319z";case"":return"M263 0 H347 V"+n+" H263z M263 0 H347 V"+n+" H263z";case"":return"M384 0 H504 V"+n+" H384z M384 0 H504 V"+n+" H384z";case"":return"M312 0 H355 V"+n+" H312z M312 0 H355 V"+n+" H312z";case"":return"M257 0 H300 V"+n+" H257z M257 0 H300 V"+n+" H257z"+("M478 0 H521 V"+n+" H478z M478 0 H521 V"+n+" H478z");default:return""}},$j={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Zqe=function(t,n){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+n+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+n+" v1759 h84z";case"vert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+" v585 h43z";case"doublevert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+` v585 h43z
M367 15 v585 v`+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+n+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+n+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+n+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v602 h84z
M403 1759 V0 H319 V1759 v`+n+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v602 h84z
M347 1759 V0 h-84 V1759 v`+n+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(n+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(n+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(n+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(n+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};let zw=class{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),n=0;n<this.children.length;n++)t.appendChild(this.children[n].toNode());return t}toMarkup(){for(var t="",n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t}toText(){var t=n=>n.toText();return this.children.map(t).join("")}};var md={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},J2={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Fj={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function ure(e,t){md[e]=t}function SM(e,t,n){if(!md[t])throw new Error("Font metrics not found for font: "+t+".");var r=e.charCodeAt(0),s=md[t][r];if(!s&&e[0]in Fj&&(r=Fj[e[0]].charCodeAt(0),s=md[t][r]),!s&&n==="text"&&cre(r)&&(s=md[t][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var nA={};function Jqe(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!nA[t]){var n=nA[t]={cssEmPerMu:J2.quad[t]/18};for(var r in J2)J2.hasOwnProperty(r)&&(n[r]=J2[r][t])}return nA[t]}var Xqe=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Bj=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],zj=function(t,n){return n.size<2?t:Xqe[t-1][n.size-1]};class wf{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||wf.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=Bj[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return new wf(n)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:zj(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:Bj[t-1]})}havingBaseStyle(t){t=t||this.style.text();var n=zj(wf.BASESIZE,t);return this.size===n&&this.textSize===wf.BASESIZE&&this.style===t?this:this.extend({style:t,size:n})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==wf.BASESIZE?["sizing","reset-size"+this.size,"size"+wf.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Jqe(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}wf.BASESIZE=6;var mI={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Qqe={ex:!0,em:!0,mu:!0},dre=function(t){return typeof t!="string"&&(t=t.unit),t in mI||t in Qqe||t==="ex"},Ao=function(t,n){var r;if(t.unit in mI)r=mI[t.unit]/n.fontMetrics().ptPerEm/n.sizeMultiplier;else if(t.unit==="mu")r=n.fontMetrics().cssEmPerMu;else{var s;if(n.style.isTight()?s=n.havingStyle(n.style.text()):s=n,t.unit==="ex")r=s.fontMetrics().xHeight;else if(t.unit==="em")r=s.fontMetrics().quad;else throw new It("Invalid unit: '"+t.unit+"'");s!==n&&(r*=s.sizeMultiplier/n.sizeMultiplier)}return Math.min(t.number*r,n.maxSize)},jt=function(t){return+t.toFixed(4)+"em"},N0=function(t){return t.filter(n=>n).join(" ")},fre=function(t,n,r){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},n){n.style.isTight()&&this.classes.push("mtight");var s=n.getColor();s&&(this.style.color=s)}},hre=function(t){var n=document.createElement(t);n.className=N0(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(n.style[r]=this.style[r]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&n.setAttribute(s,this.attributes[s]);for(var o=0;o<this.children.length;o++)n.appendChild(this.children[o].toNode());return n},eGe=/[\s"'>/=\x00-\x1f]/,pre=function(t){var n="<"+t;this.classes.length&&(n+=' class="'+is.escape(N0(this.classes))+'"');var r="";for(var s in this.style)this.style.hasOwnProperty(s)&&(r+=is.hyphenate(s)+":"+this.style[s]+";");r&&(n+=' style="'+is.escape(r)+'"');for(var o in this.attributes)if(this.attributes.hasOwnProperty(o)){if(eGe.test(o))throw new It("Invalid attribute name '"+o+"'");n+=" "+o+'="'+is.escape(this.attributes[o])+'"'}n+=">";for(var i=0;i<this.children.length;i++)n+=this.children[i].toMarkup();return n+="</"+t+">",n};class jw{constructor(t,n,r,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,fre.call(this,t,r,s),this.children=n||[]}setAttribute(t,n){this.attributes[t]=n}hasClass(t){return this.classes.includes(t)}toNode(){return hre.call(this,"span")}toMarkup(){return pre.call(this,"span")}}class TM{constructor(t,n,r,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,fre.call(this,n,s),this.children=r||[],this.setAttribute("href",t)}setAttribute(t,n){this.attributes[t]=n}hasClass(t){return this.classes.includes(t)}toNode(){return hre.call(this,"a")}toMarkup(){return pre.call(this,"a")}}class tGe{constructor(t,n,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=n,this.src=t,this.classes=["mord"],this.style=r}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var n in this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);return t}toMarkup(){var t='<img src="'+is.escape(this.src)+'"'+(' alt="'+is.escape(this.alt)+'"'),n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=is.hyphenate(r)+":"+this.style[r]+";");return n&&(t+=' style="'+is.escape(n)+'"'),t+="'/>",t}}var nGe={:"",:"",:"",:""};class Pc{constructor(t,n,r,s,o,i,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=n||0,this.depth=r||0,this.italic=s||0,this.skew=o||0,this.width=i||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var c=zqe(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[]/.test(this.text)&&(this.text=nGe[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),n=null;this.italic>0&&(n=document.createElement("span"),n.style.marginRight=jt(this.italic)),this.classes.length>0&&(n=n||document.createElement("span"),n.className=N0(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(n=n||document.createElement("span"),n.style[r]=this.style[r]);return n?(n.appendChild(t),n):t}toMarkup(){var t=!1,n="<span";this.classes.length&&(t=!0,n+=' class="',n+=is.escape(N0(this.classes)),n+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(r+=is.hyphenate(s)+":"+this.style[s]+";");r&&(t=!0,n+=' style="'+is.escape(r)+'"');var o=is.escape(this.text);return t?(n+=">",n+=o,n+="</span>",n):o}}class Yf{constructor(t,n){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=n||{}}toNode(){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);for(var s=0;s<this.children.length;s++)n.appendChild(this.children[s].toNode());return n}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=" "+n+'="'+is.escape(this.attributes[n])+'"');t+=">";for(var r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t+="</svg>",t}}class I0{constructor(t,n){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=n}toNode(){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"path");return this.alternate?n.setAttribute("d",this.alternate):n.setAttribute("d",$j[this.pathName]),n}toMarkup(){return this.alternate?'<path d="'+is.escape(this.alternate)+'"/>':'<path d="'+is.escape($j[this.pathName])+'"/>'}}class gI{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);return n}toMarkup(){var t="<line";for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=" "+n+'="'+is.escape(this.attributes[n])+'"');return t+="/>",t}}function jj(e){if(e instanceof Pc)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function rGe(e){if(e instanceof jw)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var sGe={bin:1,close:1,inner:1,open:1,punct:1,rel:1},oGe={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Js={math:{},text:{}};function $(e,t,n,r,s,o){Js[e][s]={font:t,group:n,replace:r},o&&r&&(Js[e][r]=Js[e][s])}var q="math",yt="text",ne="main",xe="ams",go="accent-token",rn="bin",Ha="close",Ob="inner",$n="mathord",pi="op-token",nc="open",jC="punct",Ee="rel",rh="spacing",Pe="textord";$(q,ne,Ee,"","\\equiv",!0);$(q,ne,Ee,"","\\prec",!0);$(q,ne,Ee,"","\\succ",!0);$(q,ne,Ee,"","\\sim",!0);$(q,ne,Ee,"","\\perp");$(q,ne,Ee,"","\\preceq",!0);$(q,ne,Ee,"","\\succeq",!0);$(q,ne,Ee,"","\\simeq",!0);$(q,ne,Ee,"","\\mid",!0);$(q,ne,Ee,"","\\ll",!0);$(q,ne,Ee,"","\\gg",!0);$(q,ne,Ee,"","\\asymp",!0);$(q,ne,Ee,"","\\parallel");$(q,ne,Ee,"","\\bowtie",!0);$(q,ne,Ee,"","\\smile",!0);$(q,ne,Ee,"","\\sqsubseteq",!0);$(q,ne,Ee,"","\\sqsupseteq",!0);$(q,ne,Ee,"","\\doteq",!0);$(q,ne,Ee,"","\\frown",!0);$(q,ne,Ee,"","\\ni",!0);$(q,ne,Ee,"","\\propto",!0);$(q,ne,Ee,"","\\vdash",!0);$(q,ne,Ee,"","\\dashv",!0);$(q,ne,Ee,"","\\owns");$(q,ne,jC,".","\\ldotp");$(q,ne,jC,"","\\cdotp");$(q,ne,Pe,"#","\\#");$(yt,ne,Pe,"#","\\#");$(q,ne,Pe,"&","\\&");$(yt,ne,Pe,"&","\\&");$(q,ne,Pe,"","\\aleph",!0);$(q,ne,Pe,"","\\forall",!0);$(q,ne,Pe,"","\\hbar",!0);$(q,ne,Pe,"","\\exists",!0);$(q,ne,Pe,"","\\nabla",!0);$(q,ne,Pe,"","\\flat",!0);$(q,ne,Pe,"","\\ell",!0);$(q,ne,Pe,"","\\natural",!0);$(q,ne,Pe,"","\\clubsuit",!0);$(q,ne,Pe,"","\\wp",!0);$(q,ne,Pe,"","\\sharp",!0);$(q,ne,Pe,"","\\diamondsuit",!0);$(q,ne,Pe,"","\\Re",!0);$(q,ne,Pe,"","\\heartsuit",!0);$(q,ne,Pe,"","\\Im",!0);$(q,ne,Pe,"","\\spadesuit",!0);$(q,ne,Pe,"","\\S",!0);$(yt,ne,Pe,"","\\S");$(q,ne,Pe,"","\\P",!0);$(yt,ne,Pe,"","\\P");$(q,ne,Pe,"","\\dag");$(yt,ne,Pe,"","\\dag");$(yt,ne,Pe,"","\\textdagger");$(q,ne,Pe,"","\\ddag");$(yt,ne,Pe,"","\\ddag");$(yt,ne,Pe,"","\\textdaggerdbl");$(q,ne,Ha,"","\\rmoustache",!0);$(q,ne,nc,"","\\lmoustache",!0);$(q,ne,Ha,"","\\rgroup",!0);$(q,ne,nc,"","\\lgroup",!0);$(q,ne,rn,"","\\mp",!0);$(q,ne,rn,"","\\ominus",!0);$(q,ne,rn,"","\\uplus",!0);$(q,ne,rn,"","\\sqcap",!0);$(q,ne,rn,"","\\ast");$(q,ne,rn,"","\\sqcup",!0);$(q,ne,rn,"","\\bigcirc",!0);$(q,ne,rn,"","\\bullet",!0);$(q,ne,rn,"","\\ddagger");$(q,ne,rn,"","\\wr",!0);$(q,ne,rn,"","\\amalg");$(q,ne,rn,"&","\\And");$(q,ne,Ee,"","\\longleftarrow",!0);$(q,ne,Ee,"","\\Leftarrow",!0);$(q,ne,Ee,"","\\Longleftarrow",!0);$(q,ne,Ee,"","\\longrightarrow",!0);$(q,ne,Ee,"","\\Rightarrow",!0);$(q,ne,Ee,"","\\Longrightarrow",!0);$(q,ne,Ee,"","\\leftrightarrow",!0);$(q,ne,Ee,"","\\longleftrightarrow",!0);$(q,ne,Ee,"","\\Leftrightarrow",!0);$(q,ne,Ee,"","\\Longleftrightarrow",!0);$(q,ne,Ee,"","\\mapsto",!0);$(q,ne,Ee,"","\\longmapsto",!0);$(q,ne,Ee,"","\\nearrow",!0);$(q,ne,Ee,"","\\hookleftarrow",!0);$(q,ne,Ee,"","\\hookrightarrow",!0);$(q,ne,Ee,"","\\searrow",!0);$(q,ne,Ee,"","\\leftharpoonup",!0);$(q,ne,Ee,"","\\rightharpoonup",!0);$(q,ne,Ee,"","\\swarrow",!0);$(q,ne,Ee,"","\\leftharpoondown",!0);$(q,ne,Ee,"","\\rightharpoondown",!0);$(q,ne,Ee,"","\\nwarrow",!0);$(q,ne,Ee,"","\\rightleftharpoons",!0);$(q,xe,Ee,"","\\nless",!0);$(q,xe,Ee,"","\\@nleqslant");$(q,xe,Ee,"","\\@nleqq");$(q,xe,Ee,"","\\lneq",!0);$(q,xe,Ee,"","\\lneqq",!0);$(q,xe,Ee,"","\\@lvertneqq");$(q,xe,Ee,"","\\lnsim",!0);$(q,xe,Ee,"","\\lnapprox",!0);$(q,xe,Ee,"","\\nprec",!0);$(q,xe,Ee,"","\\npreceq",!0);$(q,xe,Ee,"","\\precnsim",!0);$(q,xe,Ee,"","\\precnapprox",!0);$(q,xe,Ee,"","\\nsim",!0);$(q,xe,Ee,"","\\@nshortmid");$(q,xe,Ee,"","\\nmid",!0);$(q,xe,Ee,"","\\nvdash",!0);$(q,xe,Ee,"","\\nvDash",!0);$(q,xe,Ee,"","\\ntriangleleft");$(q,xe,Ee,"","\\ntrianglelefteq",!0);$(q,xe,Ee,"","\\subsetneq",!0);$(q,xe,Ee,"","\\@varsubsetneq");$(q,xe,Ee,"","\\subsetneqq",!0);$(q,xe,Ee,"","\\@varsubsetneqq");$(q,xe,Ee,"","\\ngtr",!0);$(q,xe,Ee,"","\\@ngeqslant");$(q,xe,Ee,"","\\@ngeqq");$(q,xe,Ee,"","\\gneq",!0);$(q,xe,Ee,"","\\gneqq",!0);$(q,xe,Ee,"","\\@gvertneqq");$(q,xe,Ee,"","\\gnsim",!0);$(q,xe,Ee,"","\\gnapprox",!0);$(q,xe,Ee,"","\\nsucc",!0);$(q,xe,Ee,"","\\nsucceq",!0);$(q,xe,Ee,"","\\succnsim",!0);$(q,xe,Ee,"","\\succnapprox",!0);$(q,xe,Ee,"","\\ncong",!0);$(q,xe,Ee,"","\\@nshortparallel");$(q,xe,Ee,"","\\nparallel",!0);$(q,xe,Ee,"","\\nVDash",!0);$(q,xe,Ee,"","\\ntriangleright");$(q,xe,Ee,"","\\ntrianglerighteq",!0);$(q,xe,Ee,"","\\@nsupseteqq");$(q,xe,Ee,"","\\supsetneq",!0);$(q,xe,Ee,"","\\@varsupsetneq");$(q,xe,Ee,"","\\supsetneqq",!0);$(q,xe,Ee,"","\\@varsupsetneqq");$(q,xe,Ee,"","\\nVdash",!0);$(q,xe,Ee,"","\\precneqq",!0);$(q,xe,Ee,"","\\succneqq",!0);$(q,xe,Ee,"","\\@nsubseteqq");$(q,xe,rn,"","\\unlhd");$(q,xe,rn,"","\\unrhd");$(q,xe,Ee,"","\\nleftarrow",!0);$(q,xe,Ee,"","\\nrightarrow",!0);$(q,xe,Ee,"","\\nLeftarrow",!0);$(q,xe,Ee,"","\\nRightarrow",!0);$(q,xe,Ee,"","\\nleftrightarrow",!0);$(q,xe,Ee,"","\\nLeftrightarrow",!0);$(q,xe,Ee,"","\\vartriangle");$(q,xe,Pe,"","\\hslash");$(q,xe,Pe,"","\\triangledown");$(q,xe,Pe,"","\\lozenge");$(q,xe,Pe,"","\\circledS");$(q,xe,Pe,"","\\circledR");$(yt,xe,Pe,"","\\circledR");$(q,xe,Pe,"","\\measuredangle",!0);$(q,xe,Pe,"","\\nexists");$(q,xe,Pe,"","\\mho");$(q,xe,Pe,"","\\Finv",!0);$(q,xe,Pe,"","\\Game",!0);$(q,xe,Pe,"","\\backprime");$(q,xe,Pe,"","\\blacktriangle");$(q,xe,Pe,"","\\blacktriangledown");$(q,xe,Pe,"","\\blacksquare");$(q,xe,Pe,"","\\blacklozenge");$(q,xe,Pe,"","\\bigstar");$(q,xe,Pe,"","\\sphericalangle",!0);$(q,xe,Pe,"","\\complement",!0);$(q,xe,Pe,"","\\eth",!0);$(yt,ne,Pe,"","");$(q,xe,Pe,"","\\diagup");$(q,xe,Pe,"","\\diagdown");$(q,xe,Pe,"","\\square");$(q,xe,Pe,"","\\Box");$(q,xe,Pe,"","\\Diamond");$(q,xe,Pe,"","\\yen",!0);$(yt,xe,Pe,"","\\yen",!0);$(q,xe,Pe,"","\\checkmark",!0);$(yt,xe,Pe,"","\\checkmark");$(q,xe,Pe,"","\\beth",!0);$(q,xe,Pe,"","\\daleth",!0);$(q,xe,Pe,"","\\gimel",!0);$(q,xe,Pe,"","\\digamma",!0);$(q,xe,Pe,"","\\varkappa");$(q,xe,nc,"","\\@ulcorner",!0);$(q,xe,Ha,"","\\@urcorner",!0);$(q,xe,nc,"","\\@llcorner",!0);$(q,xe,Ha,"","\\@lrcorner",!0);$(q,xe,Ee,"","\\leqq",!0);$(q,xe,Ee,"","\\leqslant",!0);$(q,xe,Ee,"","\\eqslantless",!0);$(q,xe,Ee,"","\\lesssim",!0);$(q,xe,Ee,"","\\lessapprox",!0);$(q,xe,Ee,"","\\approxeq",!0);$(q,xe,rn,"","\\lessdot");$(q,xe,Ee,"","\\lll",!0);$(q,xe,Ee,"","\\lessgtr",!0);$(q,xe,Ee,"","\\lesseqgtr",!0);$(q,xe,Ee,"","\\lesseqqgtr",!0);$(q,xe,Ee,"","\\doteqdot");$(q,xe,Ee,"","\\risingdotseq",!0);$(q,xe,Ee,"","\\fallingdotseq",!0);$(q,xe,Ee,"","\\backsim",!0);$(q,xe,Ee,"","\\backsimeq",!0);$(q,xe,Ee,"","\\subseteqq",!0);$(q,xe,Ee,"","\\Subset",!0);$(q,xe,Ee,"","\\sqsubset",!0);$(q,xe,Ee,"","\\preccurlyeq",!0);$(q,xe,Ee,"","\\curlyeqprec",!0);$(q,xe,Ee,"","\\precsim",!0);$(q,xe,Ee,"","\\precapprox",!0);$(q,xe,Ee,"","\\vartriangleleft");$(q,xe,Ee,"","\\trianglelefteq");$(q,xe,Ee,"","\\vDash",!0);$(q,xe,Ee,"","\\Vvdash",!0);$(q,xe,Ee,"","\\smallsmile");$(q,xe,Ee,"","\\smallfrown");$(q,xe,Ee,"","\\bumpeq",!0);$(q,xe,Ee,"","\\Bumpeq",!0);$(q,xe,Ee,"","\\geqq",!0);$(q,xe,Ee,"","\\geqslant",!0);$(q,xe,Ee,"","\\eqslantgtr",!0);$(q,xe,Ee,"","\\gtrsim",!0);$(q,xe,Ee,"","\\gtrapprox",!0);$(q,xe,rn,"","\\gtrdot");$(q,xe,Ee,"","\\ggg",!0);$(q,xe,Ee,"","\\gtrless",!0);$(q,xe,Ee,"","\\gtreqless",!0);$(q,xe,Ee,"","\\gtreqqless",!0);$(q,xe,Ee,"","\\eqcirc",!0);$(q,xe,Ee,"","\\circeq",!0);$(q,xe,Ee,"","\\triangleq",!0);$(q,xe,Ee,"","\\thicksim");$(q,xe,Ee,"","\\thickapprox");$(q,xe,Ee,"","\\supseteqq",!0);$(q,xe,Ee,"","\\Supset",!0);$(q,xe,Ee,"","\\sqsupset",!0);$(q,xe,Ee,"","\\succcurlyeq",!0);$(q,xe,Ee,"","\\curlyeqsucc",!0);$(q,xe,Ee,"","\\succsim",!0);$(q,xe,Ee,"","\\succapprox",!0);$(q,xe,Ee,"","\\vartriangleright");$(q,xe,Ee,"","\\trianglerighteq");$(q,xe,Ee,"","\\Vdash",!0);$(q,xe,Ee,"","\\shortmid");$(q,xe,Ee,"","\\shortparallel");$(q,xe,Ee,"","\\between",!0);$(q,xe,Ee,"","\\pitchfork",!0);$(q,xe,Ee,"","\\varpropto");$(q,xe,Ee,"","\\blacktriangleleft");$(q,xe,Ee,"","\\therefore",!0);$(q,xe,Ee,"","\\backepsilon");$(q,xe,Ee,"","\\blacktriangleright");$(q,xe,Ee,"","\\because",!0);$(q,xe,Ee,"","\\llless");$(q,xe,Ee,"","\\gggtr");$(q,xe,rn,"","\\lhd");$(q,xe,rn,"","\\rhd");$(q,xe,Ee,"","\\eqsim",!0);$(q,ne,Ee,"","\\Join");$(q,xe,Ee,"","\\Doteq",!0);$(q,xe,rn,"","\\dotplus",!0);$(q,xe,rn,"","\\smallsetminus");$(q,xe,rn,"","\\Cap",!0);$(q,xe,rn,"","\\Cup",!0);$(q,xe,rn,"","\\doublebarwedge",!0);$(q,xe,rn,"","\\boxminus",!0);$(q,xe,rn,"","\\boxplus",!0);$(q,xe,rn,"","\\divideontimes",!0);$(q,xe,rn,"","\\ltimes",!0);$(q,xe,rn,"","\\rtimes",!0);$(q,xe,rn,"","\\leftthreetimes",!0);$(q,xe,rn,"","\\rightthreetimes",!0);$(q,xe,rn,"","\\curlywedge",!0);$(q,xe,rn,"","\\curlyvee",!0);$(q,xe,rn,"","\\circleddash",!0);$(q,xe,rn,"","\\circledast",!0);$(q,xe,rn,"","\\centerdot");$(q,xe,rn,"","\\intercal",!0);$(q,xe,rn,"","\\doublecap");$(q,xe,rn,"","\\doublecup");$(q,xe,rn,"","\\boxtimes",!0);$(q,xe,Ee,"","\\dashrightarrow",!0);$(q,xe,Ee,"","\\dashleftarrow",!0);$(q,xe,Ee,"","\\leftleftarrows",!0);$(q,xe,Ee,"","\\leftrightarrows",!0);$(q,xe,Ee,"","\\Lleftarrow",!0);$(q,xe,Ee,"","\\twoheadleftarrow",!0);$(q,xe,Ee,"","\\leftarrowtail",!0);$(q,xe,Ee,"","\\looparrowleft",!0);$(q,xe,Ee,"","\\leftrightharpoons",!0);$(q,xe,Ee,"","\\curvearrowleft",!0);$(q,xe,Ee,"","\\circlearrowleft",!0);$(q,xe,Ee,"","\\Lsh",!0);$(q,xe,Ee,"","\\upuparrows",!0);$(q,xe,Ee,"","\\upharpoonleft",!0);$(q,xe,Ee,"","\\downharpoonleft",!0);$(q,ne,Ee,"","\\origof",!0);$(q,ne,Ee,"","\\imageof",!0);$(q,xe,Ee,"","\\multimap",!0);$(q,xe,Ee,"","\\leftrightsquigarrow",!0);$(q,xe,Ee,"","\\rightrightarrows",!0);$(q,xe,Ee,"","\\rightleftarrows",!0);$(q,xe,Ee,"","\\twoheadrightarrow",!0);$(q,xe,Ee,"","\\rightarrowtail",!0);$(q,xe,Ee,"","\\looparrowright",!0);$(q,xe,Ee,"","\\curvearrowright",!0);$(q,xe,Ee,"","\\circlearrowright",!0);$(q,xe,Ee,"","\\Rsh",!0);$(q,xe,Ee,"","\\downdownarrows",!0);$(q,xe,Ee,"","\\upharpoonright",!0);$(q,xe,Ee,"","\\downharpoonright",!0);$(q,xe,Ee,"","\\rightsquigarrow",!0);$(q,xe,Ee,"","\\leadsto");$(q,xe,Ee,"","\\Rrightarrow",!0);$(q,xe,Ee,"","\\restriction");$(q,ne,Pe,"","`");$(q,ne,Pe,"$","\\$");$(yt,ne,Pe,"$","\\$");$(yt,ne,Pe,"$","\\textdollar");$(q,ne,Pe,"%","\\%");$(yt,ne,Pe,"%","\\%");$(q,ne,Pe,"_","\\_");$(yt,ne,Pe,"_","\\_");$(yt,ne,Pe,"_","\\textunderscore");$(q,ne,Pe,"","\\angle",!0);$(q,ne,Pe,"","\\infty",!0);$(q,ne,Pe,"","\\prime");$(q,ne,Pe,"","\\triangle");$(q,ne,Pe,"","\\Gamma",!0);$(q,ne,Pe,"","\\Delta",!0);$(q,ne,Pe,"","\\Theta",!0);$(q,ne,Pe,"","\\Lambda",!0);$(q,ne,Pe,"","\\Xi",!0);$(q,ne,Pe,"","\\Pi",!0);$(q,ne,Pe,"","\\Sigma",!0);$(q,ne,Pe,"","\\Upsilon",!0);$(q,ne,Pe,"","\\Phi",!0);$(q,ne,Pe,"","\\Psi",!0);$(q,ne,Pe,"","\\Omega",!0);$(q,ne,Pe,"A","");$(q,ne,Pe,"B","");$(q,ne,Pe,"E","");$(q,ne,Pe,"Z","");$(q,ne,Pe,"H","");$(q,ne,Pe,"I","");$(q,ne,Pe,"K","");$(q,ne,Pe,"M","");$(q,ne,Pe,"N","");$(q,ne,Pe,"O","");$(q,ne,Pe,"P","");$(q,ne,Pe,"T","");$(q,ne,Pe,"X","");$(q,ne,Pe,"","\\neg",!0);$(q,ne,Pe,"","\\lnot");$(q,ne,Pe,"","\\top");$(q,ne,Pe,"","\\bot");$(q,ne,Pe,"","\\emptyset");$(q,xe,Pe,"","\\varnothing");$(q,ne,$n,"","\\alpha",!0);$(q,ne,$n,"","\\beta",!0);$(q,ne,$n,"","\\gamma",!0);$(q,ne,$n,"","\\delta",!0);$(q,ne,$n,"","\\epsilon",!0);$(q,ne,$n,"","\\zeta",!0);$(q,ne,$n,"","\\eta",!0);$(q,ne,$n,"","\\theta",!0);$(q,ne,$n,"","\\iota",!0);$(q,ne,$n,"","\\kappa",!0);$(q,ne,$n,"","\\lambda",!0);$(q,ne,$n,"","\\mu",!0);$(q,ne,$n,"","\\nu",!0);$(q,ne,$n,"","\\xi",!0);$(q,ne,$n,"","\\omicron",!0);$(q,ne,$n,"","\\pi",!0);$(q,ne,$n,"","\\rho",!0);$(q,ne,$n,"","\\sigma",!0);$(q,ne,$n,"","\\tau",!0);$(q,ne,$n,"","\\upsilon",!0);$(q,ne,$n,"","\\phi",!0);$(q,ne,$n,"","\\chi",!0);$(q,ne,$n,"","\\psi",!0);$(q,ne,$n,"","\\omega",!0);$(q,ne,$n,"","\\varepsilon",!0);$(q,ne,$n,"","\\vartheta",!0);$(q,ne,$n,"","\\varpi",!0);$(q,ne,$n,"","\\varrho",!0);$(q,ne,$n,"","\\varsigma",!0);$(q,ne,$n,"","\\varphi",!0);$(q,ne,rn,"","*",!0);$(q,ne,rn,"+","+");$(q,ne,rn,"","-",!0);$(q,ne,rn,"","\\cdot",!0);$(q,ne,rn,"","\\circ",!0);$(q,ne,rn,"","\\div",!0);$(q,ne,rn,"","\\pm",!0);$(q,ne,rn,"","\\times",!0);$(q,ne,rn,"","\\cap",!0);$(q,ne,rn,"","\\cup",!0);$(q,ne,rn,"","\\setminus",!0);$(q,ne,rn,"","\\land");$(q,ne,rn,"","\\lor");$(q,ne,rn,"","\\wedge",!0);$(q,ne,rn,"","\\vee",!0);$(q,ne,Pe,"","\\surd");$(q,ne,nc,"","\\langle",!0);$(q,ne,nc,"","\\lvert");$(q,ne,nc,"","\\lVert");$(q,ne,Ha,"?","?");$(q,ne,Ha,"!","!");$(q,ne,Ha,"","\\rangle",!0);$(q,ne,Ha,"","\\rvert");$(q,ne,Ha,"","\\rVert");$(q,ne,Ee,"=","=");$(q,ne,Ee,":",":");$(q,ne,Ee,"","\\approx",!0);$(q,ne,Ee,"","\\cong",!0);$(q,ne,Ee,"","\\ge");$(q,ne,Ee,"","\\geq",!0);$(q,ne,Ee,"","\\gets");$(q,ne,Ee,">","\\gt",!0);$(q,ne,Ee,"","\\in",!0);$(q,ne,Ee,"","\\@not");$(q,ne,Ee,"","\\subset",!0);$(q,ne,Ee,"","\\supset",!0);$(q,ne,Ee,"","\\subseteq",!0);$(q,ne,Ee,"","\\supseteq",!0);$(q,xe,Ee,"","\\nsubseteq",!0);$(q,xe,Ee,"","\\nsupseteq",!0);$(q,ne,Ee,"","\\models");$(q,ne,Ee,"","\\leftarrow",!0);$(q,ne,Ee,"","\\le");$(q,ne,Ee,"","\\leq",!0);$(q,ne,Ee,"<","\\lt",!0);$(q,ne,Ee,"","\\rightarrow",!0);$(q,ne,Ee,"","\\to");$(q,xe,Ee,"","\\ngeq",!0);$(q,xe,Ee,"","\\nleq",!0);$(q,ne,rh,"","\\ ");$(q,ne,rh,"","\\space");$(q,ne,rh,"","\\nobreakspace");$(yt,ne,rh,"","\\ ");$(yt,ne,rh,""," ");$(yt,ne,rh,"","\\space");$(yt,ne,rh,"","\\nobreakspace");$(q,ne,rh,null,"\\nobreak");$(q,ne,rh,null,"\\allowbreak");$(q,ne,jC,",",",");$(q,ne,jC,";",";");$(q,xe,rn,"","\\barwedge",!0);$(q,xe,rn,"","\\veebar",!0);$(q,ne,rn,"","\\odot",!0);$(q,ne,rn,"","\\oplus",!0);$(q,ne,rn,"","\\otimes",!0);$(q,ne,Pe,"","\\partial",!0);$(q,ne,rn,"","\\oslash",!0);$(q,xe,rn,"","\\circledcirc",!0);$(q,xe,rn,"","\\boxdot",!0);$(q,ne,rn,"","\\bigtriangleup");$(q,ne,rn,"","\\bigtriangledown");$(q,ne,rn,"","\\dagger");$(q,ne,rn,"","\\diamond");$(q,ne,rn,"","\\star");$(q,ne,rn,"","\\triangleleft");$(q,ne,rn,"","\\triangleright");$(q,ne,nc,"{","\\{");$(yt,ne,Pe,"{","\\{");$(yt,ne,Pe,"{","\\textbraceleft");$(q,ne,Ha,"}","\\}");$(yt,ne,Pe,"}","\\}");$(yt,ne,Pe,"}","\\textbraceright");$(q,ne,nc,"{","\\lbrace");$(q,ne,Ha,"}","\\rbrace");$(q,ne,nc,"[","\\lbrack",!0);$(yt,ne,Pe,"[","\\lbrack",!0);$(q,ne,Ha,"]","\\rbrack",!0);$(yt,ne,Pe,"]","\\rbrack",!0);$(q,ne,nc,"(","\\lparen",!0);$(q,ne,Ha,")","\\rparen",!0);$(yt,ne,Pe,"<","\\textless",!0);$(yt,ne,Pe,">","\\textgreater",!0);$(q,ne,nc,"","\\lfloor",!0);$(q,ne,Ha,"","\\rfloor",!0);$(q,ne,nc,"","\\lceil",!0);$(q,ne,Ha,"","\\rceil",!0);$(q,ne,Pe,"\\","\\backslash");$(q,ne,Pe,"","|");$(q,ne,Pe,"","\\vert");$(yt,ne,Pe,"|","\\textbar",!0);$(q,ne,Pe,"","\\|");$(q,ne,Pe,"","\\Vert");$(yt,ne,Pe,"","\\textbardbl");$(yt,ne,Pe,"~","\\textasciitilde");$(yt,ne,Pe,"\\","\\textbackslash");$(yt,ne,Pe,"^","\\textasciicircum");$(q,ne,Ee,"","\\uparrow",!0);$(q,ne,Ee,"","\\Uparrow",!0);$(q,ne,Ee,"","\\downarrow",!0);$(q,ne,Ee,"","\\Downarrow",!0);$(q,ne,Ee,"","\\updownarrow",!0);$(q,ne,Ee,"","\\Updownarrow",!0);$(q,ne,pi,"","\\coprod");$(q,ne,pi,"","\\bigvee");$(q,ne,pi,"","\\bigwedge");$(q,ne,pi,"","\\biguplus");$(q,ne,pi,"","\\bigcap");$(q,ne,pi,"","\\bigcup");$(q,ne,pi,"","\\int");$(q,ne,pi,"","\\intop");$(q,ne,pi,"","\\iint");$(q,ne,pi,"","\\iiint");$(q,ne,pi,"","\\prod");$(q,ne,pi,"","\\sum");$(q,ne,pi,"","\\bigotimes");$(q,ne,pi,"","\\bigoplus");$(q,ne,pi,"","\\bigodot");$(q,ne,pi,"","\\oint");$(q,ne,pi,"","\\oiint");$(q,ne,pi,"","\\oiiint");$(q,ne,pi,"","\\bigsqcup");$(q,ne,pi,"","\\smallint");$(yt,ne,Ob,"","\\textellipsis");$(q,ne,Ob,"","\\mathellipsis");$(yt,ne,Ob,"","\\ldots",!0);$(q,ne,Ob,"","\\ldots",!0);$(q,ne,Ob,"","\\@cdots",!0);$(q,ne,Ob,"","\\ddots",!0);$(q,ne,Pe,"","\\varvdots");$(yt,ne,Pe,"","\\varvdots");$(q,ne,go,"","\\acute");$(q,ne,go,"","\\grave");$(q,ne,go,"","\\ddot");$(q,ne,go,"~","\\tilde");$(q,ne,go,"","\\bar");$(q,ne,go,"","\\breve");$(q,ne,go,"","\\check");$(q,ne,go,"^","\\hat");$(q,ne,go,"","\\vec");$(q,ne,go,"","\\dot");$(q,ne,go,"","\\mathring");$(q,ne,$n,"","\\@imath");$(q,ne,$n,"","\\@jmath");$(q,ne,Pe,"","");$(q,ne,Pe,"","");$(yt,ne,Pe,"","\\i",!0);$(yt,ne,Pe,"","\\j",!0);$(yt,ne,Pe,"","\\ss",!0);$(yt,ne,Pe,"","\\ae",!0);$(yt,ne,Pe,"","\\oe",!0);$(yt,ne,Pe,"","\\o",!0);$(yt,ne,Pe,"","\\AE",!0);$(yt,ne,Pe,"","\\OE",!0);$(yt,ne,Pe,"","\\O",!0);$(yt,ne,go,"","\\'");$(yt,ne,go,"","\\`");$(yt,ne,go,"","\\^");$(yt,ne,go,"","\\~");$(yt,ne,go,"","\\=");$(yt,ne,go,"","\\u");$(yt,ne,go,"","\\.");$(yt,ne,go,"","\\c");$(yt,ne,go,"","\\r");$(yt,ne,go,"","\\v");$(yt,ne,go,"",'\\"');$(yt,ne,go,"","\\H");$(yt,ne,go,"","\\textcircled");var mre={"--":!0,"---":!0,"``":!0,"''":!0};$(yt,ne,Pe,"","--",!0);$(yt,ne,Pe,"","\\textendash");$(yt,ne,Pe,"","---",!0);$(yt,ne,Pe,"","\\textemdash");$(yt,ne,Pe,"","`",!0);$(yt,ne,Pe,"","\\textquoteleft");$(yt,ne,Pe,"","'",!0);$(yt,ne,Pe,"","\\textquoteright");$(yt,ne,Pe,"","``",!0);$(yt,ne,Pe,"","\\textquotedblleft");$(yt,ne,Pe,"","''",!0);$(yt,ne,Pe,"","\\textquotedblright");$(q,ne,Pe,"","\\degree",!0);$(yt,ne,Pe,"","\\degree");$(yt,ne,Pe,"","\\textdegree",!0);$(q,ne,Pe,"","\\pounds");$(q,ne,Pe,"","\\mathsterling",!0);$(yt,ne,Pe,"","\\pounds");$(yt,ne,Pe,"","\\textsterling",!0);$(q,xe,Pe,"","\\maltese");$(yt,xe,Pe,"","\\maltese");var Uj='0123456789/@."';for(var rA=0;rA<Uj.length;rA++){var Hj=Uj.charAt(rA);$(q,ne,Pe,Hj,Hj)}var Vj='0123456789!@*()-=+";:?/.,';for(var sA=0;sA<Vj.length;sA++){var qj=Vj.charAt(sA);$(yt,ne,Pe,qj,qj)}var JT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var oA=0;oA<JT.length;oA++){var X2=JT.charAt(oA);$(q,ne,$n,X2,X2),$(yt,ne,Pe,X2,X2)}$(q,xe,Pe,"C","");$(yt,xe,Pe,"C","");$(q,xe,Pe,"H","");$(yt,xe,Pe,"H","");$(q,xe,Pe,"N","");$(yt,xe,Pe,"N","");$(q,xe,Pe,"P","");$(yt,xe,Pe,"P","");$(q,xe,Pe,"Q","");$(yt,xe,Pe,"Q","");$(q,xe,Pe,"R","");$(yt,xe,Pe,"R","");$(q,xe,Pe,"Z","");$(yt,xe,Pe,"Z","");$(q,ne,$n,"h","");$(yt,ne,$n,"h","");var Gn="";for(var Na=0;Na<JT.length;Na++){var jo=JT.charAt(Na);Gn=String.fromCharCode(55349,56320+Na),$(q,ne,$n,jo,Gn),$(yt,ne,Pe,jo,Gn),Gn=String.fromCharCode(55349,56372+Na),$(q,ne,$n,jo,Gn),$(yt,ne,Pe,jo,Gn),Gn=String.fromCharCode(55349,56424+Na),$(q,ne,$n,jo,Gn),$(yt,ne,Pe,jo,Gn),Gn=String.fromCharCode(55349,56580+Na),$(q,ne,$n,jo,Gn),$(yt,ne,Pe,jo,Gn),Gn=String.fromCharCode(55349,56684+Na),$(q,ne,$n,jo,Gn),$(yt,ne,Pe,jo,Gn),Gn=String.fromCharCode(55349,56736+Na),$(q,ne,$n,jo,Gn),$(yt,ne,Pe,jo,Gn),Gn=String.fromCharCode(55349,56788+Na),$(q,ne,$n,jo,Gn),$(yt,ne,Pe,jo,Gn),Gn=String.fromCharCode(55349,56840+Na),$(q,ne,$n,jo,Gn),$(yt,ne,Pe,jo,Gn),Gn=String.fromCharCode(55349,56944+Na),$(q,ne,$n,jo,Gn),$(yt,ne,Pe,jo,Gn),Na<26&&(Gn=String.fromCharCode(55349,56632+Na),$(q,ne,$n,jo,Gn),$(yt,ne,Pe,jo,Gn),Gn=String.fromCharCode(55349,56476+Na),$(q,ne,$n,jo,Gn),$(yt,ne,Pe,jo,Gn))}Gn="";$(q,ne,$n,"k",Gn);$(yt,ne,Pe,"k",Gn);for(var Lp=0;Lp<10;Lp++){var Wh=Lp.toString();Gn=String.fromCharCode(55349,57294+Lp),$(q,ne,$n,Wh,Gn),$(yt,ne,Pe,Wh,Gn),Gn=String.fromCharCode(55349,57314+Lp),$(q,ne,$n,Wh,Gn),$(yt,ne,Pe,Wh,Gn),Gn=String.fromCharCode(55349,57324+Lp),$(q,ne,$n,Wh,Gn),$(yt,ne,Pe,Wh,Gn),Gn=String.fromCharCode(55349,57334+Lp),$(q,ne,$n,Wh,Gn),$(yt,ne,Pe,Wh,Gn)}var bI="";for(var iA=0;iA<bI.length;iA++){var Q2=bI.charAt(iA);$(q,ne,$n,Q2,Q2),$(yt,ne,Pe,Q2,Q2)}var e_=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Gj=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],iGe=function(t,n){var r=t.charCodeAt(0),s=t.charCodeAt(1),o=(r-55296)*1024+(s-56320)+65536,i=n==="math"?0:1;if(119808<=o&&o<120484){var a=Math.floor((o-119808)/26);return[e_[a][2],e_[a][i]]}else if(120782<=o&&o<=120831){var l=Math.floor((o-120782)/10);return[Gj[l][2],Gj[l][i]]}else{if(o===120485||o===120486)return[e_[0][2],e_[0][i]];if(120486<o&&o<120782)return["",""];throw new It("Unsupported character: "+t)}},UC=function(t,n,r){return Js[r][t]&&Js[r][t].replace&&(t=Js[r][t].replace),{value:t,metrics:SM(t,n,r)}},ou=function(t,n,r,s,o){var i=UC(t,n,r),a=i.metrics;t=i.value;var l;if(a){var c=a.italic;(r==="text"||s&&s.font==="mathit")&&(c=0),l=new Pc(t,a.height,a.depth,c,a.skew,a.width,o)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+n+"' and mode '"+r+"'")),l=new Pc(t,0,0,0,0,0,o);if(s){l.maxFontSize=s.sizeMultiplier,s.style.isTight()&&l.classes.push("mtight");var u=s.getColor();u&&(l.style.color=u)}return l},aGe=function(t,n,r,s){return s===void 0&&(s=[]),r.font==="boldsymbol"&&UC(t,"Main-Bold",n).metrics?ou(t,"Main-Bold",n,r,s.concat(["mathbf"])):t==="\\"||Js[n][t].font==="main"?ou(t,"Main-Regular",n,r,s):ou(t,"AMS-Regular",n,r,s.concat(["amsrm"]))},lGe=function(t,n,r,s,o){return o!=="textord"&&UC(t,"Math-BoldItalic",n).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},cGe=function(t,n,r){var s=t.mode,o=t.text,i=["mord"],a=s==="math"||s==="text"&&n.font,l=a?n.font:n.fontFamily,c="",u="";if(o.charCodeAt(0)===55349&&([c,u]=iGe(o,s)),c.length>0)return ou(o,c,s,n,i.concat(u));if(l){var f,m;if(l==="boldsymbol"){var g=lGe(o,s,n,i,r);f=g.fontName,m=[g.fontClass]}else a?(f=yre[l].fontName,m=[l]):(f=t_(l,n.fontWeight,n.fontShape),m=[l,n.fontWeight,n.fontShape]);if(UC(o,f,s).metrics)return ou(o,f,s,n,i.concat(m));if(mre.hasOwnProperty(o)&&f.slice(0,10)==="Typewriter"){for(var y=[],v=0;v<o.length;v++)y.push(ou(o[v],f,s,n,i.concat(m)));return bre(y)}}if(r==="mathord")return ou(o,"Math-Italic",s,n,i.concat(["mathnormal"]));if(r==="textord"){var x=Js[s][o]&&Js[s][o].font;if(x==="ams"){var E=t_("amsrm",n.fontWeight,n.fontShape);return ou(o,E,s,n,i.concat("amsrm",n.fontWeight,n.fontShape))}else if(x==="main"||!x){var T=t_("textrm",n.fontWeight,n.fontShape);return ou(o,T,s,n,i.concat(n.fontWeight,n.fontShape))}else{var k=t_(x,n.fontWeight,n.fontShape);return ou(o,k,s,n,i.concat(k,n.fontWeight,n.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},uGe=(e,t)=>{if(N0(e.classes)!==N0(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var n=e.classes[0];if(n==="mbin"||n==="mord")return!1}for(var r in e.style)if(e.style.hasOwnProperty(r)&&e.style[r]!==t.style[r])return!1;for(var s in t.style)if(t.style.hasOwnProperty(s)&&e.style[s]!==t.style[s])return!1;return!0},dGe=e=>{for(var t=0;t<e.length-1;t++){var n=e[t],r=e[t+1];n instanceof Pc&&r instanceof Pc&&uGe(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,e.splice(t+1,1),t--)}return e},CM=function(t){for(var n=0,r=0,s=0,o=0;o<t.children.length;o++){var i=t.children[o];i.height>n&&(n=i.height),i.depth>r&&(r=i.depth),i.maxFontSize>s&&(s=i.maxFontSize)}t.height=n,t.depth=r,t.maxFontSize=s},il=function(t,n,r,s){var o=new jw(t,n,r,s);return CM(o),o},gre=(e,t,n,r)=>new jw(e,t,n,r),fGe=function(t,n,r){var s=il([t],[],n);return s.height=Math.max(r||n.fontMetrics().defaultRuleThickness,n.minRuleThickness),s.style.borderBottomWidth=jt(s.height),s.maxFontSize=1,s},hGe=function(t,n,r,s){var o=new TM(t,n,r,s);return CM(o),o},bre=function(t){var n=new zw(t);return CM(n),n},pGe=function(t,n){return t instanceof zw?il([],[t],n):t},mGe=function(t){if(t.positionType==="individualShift"){for(var n=t.children,r=[n[0]],s=-n[0].shift-n[0].elem.depth,o=s,i=1;i<n.length;i++){var a=-n[i].shift-o-n[i].elem.depth,l=a-(n[i-1].elem.height+n[i-1].elem.depth);o=o+a,r.push({type:"kern",size:l}),r.push(n[i])}return{children:r,depth:s}}var c;if(t.positionType==="top"){for(var u=t.positionData,f=0;f<t.children.length;f++){var m=t.children[f];u-=m.type==="kern"?m.size:m.elem.height+m.elem.depth}c=u}else if(t.positionType==="bottom")c=-t.positionData;else{var g=t.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")c=-g.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")c=-g.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:c}},gGe=function(t,n){for(var{children:r,depth:s}=mGe(t),o=0,i=0;i<r.length;i++){var a=r[i];if(a.type==="elem"){var l=a.elem;o=Math.max(o,l.maxFontSize,l.height)}}o+=2;var c=il(["pstrut"],[]);c.style.height=jt(o);for(var u=[],f=s,m=s,g=s,y=0;y<r.length;y++){var v=r[y];if(v.type==="kern")g+=v.size;else{var x=v.elem,E=v.wrapperClasses||[],T=v.wrapperStyle||{},k=il(E,[c,x],void 0,T);k.style.top=jt(-o-g-x.depth),v.marginLeft&&(k.style.marginLeft=v.marginLeft),v.marginRight&&(k.style.marginRight=v.marginRight),u.push(k),g+=x.height+x.depth}f=Math.min(f,g),m=Math.max(m,g)}var I=il(["vlist"],u);I.style.height=jt(m);var O;if(f<0){var M=il([],[]),P=il(["vlist"],[M]);P.style.height=jt(-f);var j=il(["vlist-s"],[new Pc("")]);O=[il(["vlist-r"],[I,j]),il(["vlist-r"],[P])]}else O=[il(["vlist-r"],[I])];var V=il(["vlist-t"],O);return O.length===2&&V.classes.push("vlist-t2"),V.height=m,V.depth=-f,V},bGe=(e,t)=>{var n=il(["mspace"],[],t),r=Ao(e,t);return n.style.marginRight=jt(r),n},t_=function(t,n,r){var s="";switch(t){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=t}var o;return n==="textbf"&&r==="textit"?o="BoldItalic":n==="textbf"?o="Bold":n==="textit"?o="Italic":o="Regular",s+"-"+o},yre={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},vre={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},yGe=function(t,n){var[r,s,o]=vre[t],i=new I0(r),a=new Yf([i],{width:jt(s),height:jt(o),style:"width:"+jt(s),viewBox:"0 0 "+1e3*s+" "+1e3*o,preserveAspectRatio:"xMinYMin"}),l=gre(["overlay"],[a],n);return l.height=o,l.style.height=jt(o),l.style.width=jt(s),l},We={fontMap:yre,makeSymbol:ou,mathsym:aGe,makeSpan:il,makeSvgSpan:gre,makeLineSpan:fGe,makeAnchor:hGe,makeFragment:bre,wrapFragment:pGe,makeVList:gGe,makeOrd:cGe,makeGlue:bGe,staticSvg:yGe,svgData:vre,tryCombineChars:dGe},Co={number:3,unit:"mu"},$p={number:4,unit:"mu"},mf={number:5,unit:"mu"},vGe={mord:{mop:Co,mbin:$p,mrel:mf,minner:Co},mop:{mord:Co,mop:Co,mrel:mf,minner:Co},mbin:{mord:$p,mop:$p,mopen:$p,minner:$p},mrel:{mord:mf,mop:mf,mopen:mf,minner:mf},mopen:{},mclose:{mop:Co,mbin:$p,mrel:mf,minner:Co},mpunct:{mord:Co,mop:Co,mrel:mf,mopen:Co,mclose:Co,mpunct:Co,minner:Co},minner:{mord:Co,mop:Co,mbin:$p,mrel:mf,mopen:Co,mpunct:Co,minner:Co}},xGe={mord:{mop:Co},mop:{mord:Co,mop:Co},mbin:{},mrel:{},mopen:{},mclose:{mop:Co},mpunct:{},minner:{mop:Co}},xre={},XT={},QT={};function Xt(e){for(var{type:t,names:n,props:r,handler:s,htmlBuilder:o,mathmlBuilder:i}=e,a={type:t,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:s},l=0;l<n.length;++l)xre[n[l]]=a;t&&(o&&(XT[t]=o),i&&(QT[t]=i))}function zm(e){var{type:t,htmlBuilder:n,mathmlBuilder:r}=e;Xt({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var e4=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},ei=function(t){return t.type==="ordgroup"?t.body:[t]},Kf=We.makeSpan,wGe=["leftmost","mbin","mopen","mrel","mop","mpunct"],EGe=["rightmost","mrel","mclose","mpunct"],_Ge={display:Fn.DISPLAY,text:Fn.TEXT,script:Fn.SCRIPT,scriptscript:Fn.SCRIPTSCRIPT},SGe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ii=function(t,n,r,s){s===void 0&&(s=[null,null]);for(var o=[],i=0;i<t.length;i++){var a=Kr(t[i],n);if(a instanceof zw){var l=a.children;o.push(...l)}else o.push(a)}if(We.tryCombineChars(o),!r)return o;var c=n;if(t.length===1){var u=t[0];u.type==="sizing"?c=n.havingSize(u.size):u.type==="styling"&&(c=n.havingStyle(_Ge[u.style]))}var f=Kf([s[0]||"leftmost"],[],n),m=Kf([s[1]||"rightmost"],[],n),g=r==="root";return Wj(o,(y,v)=>{var x=v.classes[0],E=y.classes[0];x==="mbin"&&EGe.includes(E)?v.classes[0]="mord":E==="mbin"&&wGe.includes(x)&&(y.classes[0]="mord")},{node:f},m,g),Wj(o,(y,v)=>{var x=yI(v),E=yI(y),T=x&&E?y.hasClass("mtight")?xGe[x][E]:vGe[x][E]:null;if(T)return We.makeGlue(T,c)},{node:f},m,g),o},Wj=function e(t,n,r,s,o){s&&t.push(s);for(var i=0;i<t.length;i++){var a=t[i],l=wre(a);if(l){e(l.children,n,r,null,o);continue}var c=!a.hasClass("mspace");if(c){var u=n(a,r.node);u&&(r.insertAfter?r.insertAfter(u):(t.unshift(u),i++))}c?r.node=a:o&&a.hasClass("newline")&&(r.node=Kf(["leftmost"])),r.insertAfter=(f=>m=>{t.splice(f+1,0,m),i++})(i)}s&&t.pop()},wre=function(t){return t instanceof zw||t instanceof TM||t instanceof jw&&t.hasClass("enclosing")?t:null},TGe=function e(t,n){var r=wre(t);if(r){var s=r.children;if(s.length){if(n==="right")return e(s[s.length-1],"right");if(n==="left")return e(s[0],"left")}}return t},yI=function(t,n){return t?(n&&(t=TGe(t,n)),SGe[t.classes[0]]||null):null},Kx=function(t,n){var r=["nulldelimiter"].concat(t.baseSizingClasses());return Kf(n.concat(r))},Kr=function(t,n,r){if(!t)return Kf();if(XT[t.type]){var s=XT[t.type](t,n);if(r&&n.size!==r.size){s=Kf(n.sizingClasses(r),[s],n);var o=n.sizeMultiplier/r.sizeMultiplier;s.height*=o,s.depth*=o}return s}else throw new It("Got group of unknown type: '"+t.type+"'")};function n_(e,t){var n=Kf(["base"],e,t),r=Kf(["strut"]);return r.style.height=jt(n.height+n.depth),n.depth&&(r.style.verticalAlign=jt(-n.depth)),n.children.unshift(r),n}function vI(e,t){var n=null;e.length===1&&e[0].type==="tag"&&(n=e[0].tag,e=e[0].body);var r=Ii(e,t,"root"),s;r.length===2&&r[1].hasClass("tag")&&(s=r.pop());for(var o=[],i=[],a=0;a<r.length;a++)if(i.push(r[a]),r[a].hasClass("mbin")||r[a].hasClass("mrel")||r[a].hasClass("allowbreak")){for(var l=!1;a<r.length-1&&r[a+1].hasClass("mspace")&&!r[a+1].hasClass("newline");)a++,i.push(r[a]),r[a].hasClass("nobreak")&&(l=!0);l||(o.push(n_(i,t)),i=[])}else r[a].hasClass("newline")&&(i.pop(),i.length>0&&(o.push(n_(i,t)),i=[]),o.push(r[a]));i.length>0&&o.push(n_(i,t));var c;n?(c=n_(Ii(n,t,!0)),c.classes=["tag"],o.push(c)):s&&o.push(s);var u=Kf(["katex-html"],o);if(u.setAttribute("aria-hidden","true"),c){var f=c.children[0];f.style.height=jt(u.height+u.depth),u.depth&&(f.style.verticalAlign=jt(-u.depth))}return u}function Ere(e){return new zw(e)}class ql{constructor(t,n,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=n||[],this.classes=r||[]}setAttribute(t,n){this.attributes[t]=n}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);this.classes.length>0&&(t.className=N0(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof gd&&this.children[r+1]instanceof gd){for(var s=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof gd;)s+=this.children[++r].toText();t.appendChild(new gd(s).toNode())}else t.appendChild(this.children[r].toNode());return t}toMarkup(){var t="<"+this.type;for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=" "+n+'="',t+=is.escape(this.attributes[n]),t+='"');this.classes.length>0&&(t+=' class ="'+is.escape(N0(this.classes))+'"'),t+=">";for(var r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class gd{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return is.escape(this.toText())}toText(){return this.text}}class CGe{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",jt(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+jt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ct={MathNode:ql,TextNode:gd,SpaceNode:CGe,newDocumentFragment:Ere},Lc=function(t,n,r){return Js[n][t]&&Js[n][t].replace&&t.charCodeAt(0)!==55349&&!(mre.hasOwnProperty(t)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(t=Js[n][t].replace),new Ct.TextNode(t)},kM=function(t){return t.length===1?t[0]:new Ct.MathNode("mrow",t)},AM=function(t,n){if(n.fontFamily==="texttt")return"monospace";if(n.fontFamily==="textsf")return n.fontShape==="textit"&&n.fontWeight==="textbf"?"sans-serif-bold-italic":n.fontShape==="textit"?"sans-serif-italic":n.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(n.fontShape==="textit"&&n.fontWeight==="textbf")return"bold-italic";if(n.fontShape==="textit")return"italic";if(n.fontWeight==="textbf")return"bold";var r=n.font;if(!r||r==="mathnormal")return null;var s=t.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var o=t.text;if(["\\imath","\\jmath"].includes(o))return null;Js[s][o]&&Js[s][o].replace&&(o=Js[s][o].replace);var i=We.fontMap[r].fontName;return SM(o,i,s)?We.fontMap[r].variant:null};function aA(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof gd&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var n=e.children[0];return n instanceof gd&&n.text===","}else return!1}var wl=function(t,n,r){if(t.length===1){var s=Us(t[0],n);return r&&s instanceof ql&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var o=[],i,a=0;a<t.length;a++){var l=Us(t[a],n);if(l instanceof ql&&i instanceof ql){if(l.type==="mtext"&&i.type==="mtext"&&l.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...l.children);continue}else if(l.type==="mn"&&i.type==="mn"){i.children.push(...l.children);continue}else if(aA(l)&&i.type==="mn"){i.children.push(...l.children);continue}else if(l.type==="mn"&&aA(i))l.children=[...i.children,...l.children],o.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(i.type==="mn"||aA(i))){var c=l.children[0];c instanceof ql&&c.type==="mn"&&(c.children=[...i.children,...c.children],o.pop())}else if(i.type==="mi"&&i.children.length===1){var u=i.children[0];if(u instanceof gd&&u.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var f=l.children[0];f instanceof gd&&f.text.length>0&&(f.text=f.text.slice(0,1)+""+f.text.slice(1),o.pop())}}}o.push(l),i=l}return o},R0=function(t,n,r){return kM(wl(t,n,r))},Us=function(t,n){if(!t)return new Ct.MathNode("mrow");if(QT[t.type]){var r=QT[t.type](t,n);return r}else throw new It("Got group of unknown type: '"+t.type+"'")};function Yj(e,t,n,r,s){var o=wl(e,n),i;o.length===1&&o[0]instanceof ql&&["mrow","mtable"].includes(o[0].type)?i=o[0]:i=new Ct.MathNode("mrow",o);var a=new Ct.MathNode("annotation",[new Ct.TextNode(t)]);a.setAttribute("encoding","application/x-tex");var l=new Ct.MathNode("semantics",[i,a]),c=new Ct.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&c.setAttribute("display","block");var u=s?"katex":"katex-mathml";return We.makeSpan([u],[c])}var _re=function(t){return new wf({style:t.displayMode?Fn.DISPLAY:Fn.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},Sre=function(t,n){if(n.displayMode){var r=["katex-display"];n.leqno&&r.push("leqno"),n.fleqn&&r.push("fleqn"),t=We.makeSpan(r,[t])}return t},kGe=function(t,n,r){var s=_re(r),o;if(r.output==="mathml")return Yj(t,n,s,r.displayMode,!0);if(r.output==="html"){var i=vI(t,s);o=We.makeSpan(["katex"],[i])}else{var a=Yj(t,n,s,r.displayMode,!1),l=vI(t,s);o=We.makeSpan(["katex"],[a,l])}return Sre(o,r)},AGe=function(t,n,r){var s=_re(r),o=vI(t,s),i=We.makeSpan(["katex"],[o]);return Sre(i,r)},NGe={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},IGe=function(t){var n=new Ct.MathNode("mo",[new Ct.TextNode(NGe[t.replace(/^\\/,"")])]);return n.setAttribute("stretchy","true"),n},RGe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},MGe=function(t){return t.type==="ordgroup"?t.body.length:1},OGe=function(t,n){function r(){var a=4e5,l=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(l)){var c=t,u=MGe(c.base),f,m,g;if(u>5)l==="widehat"||l==="widecheck"?(f=420,a=2364,g=.42,m=l+"4"):(f=312,a=2340,g=.34,m="tilde4");else{var y=[1,1,2,2,3,3][u];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][y],f=[0,239,300,360,420][y],g=[0,.24,.3,.3,.36,.42][y],m=l+y):(a=[0,600,1033,2339,2340][y],f=[0,260,286,306,312][y],g=[0,.26,.286,.3,.306,.34][y],m="tilde"+y)}var v=new I0(m),x=new Yf([v],{width:"100%",height:jt(g),viewBox:"0 0 "+a+" "+f,preserveAspectRatio:"none"});return{span:We.makeSvgSpan([],[x],n),minWidth:0,height:g}}else{var E=[],T=RGe[l],[k,I,O]=T,M=O/1e3,P=k.length,j,V;if(P===1){var U=T[3];j=["hide-tail"],V=[U]}else if(P===2)j=["halfarrow-left","halfarrow-right"],V=["xMinYMin","xMaxYMin"];else if(P===3)j=["brace-left","brace-center","brace-right"],V=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+P+" children.");for(var z=0;z<P;z++){var H=new I0(k[z]),F=new Yf([H],{width:"400em",height:jt(M),viewBox:"0 0 "+a+" "+O,preserveAspectRatio:V[z]+" slice"}),G=We.makeSvgSpan([j[z]],[F],n);if(P===1)return{span:G,minWidth:I,height:M};G.style.height=jt(M),E.push(G)}return{span:We.makeSpan(["stretchy"],E,n),minWidth:I,height:M}}}var{span:s,minWidth:o,height:i}=r();return s.height=i,s.style.height=jt(i),o>0&&(s.style.minWidth=jt(o)),s},DGe=function(t,n,r,s,o){var i,a=t.height+t.depth+r+s;if(/fbox|color|angl/.test(n)){if(i=We.makeSpan(["stretchy",n],[],o),n==="fbox"){var l=o.color&&o.getColor();l&&(i.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(n)&&c.push(new gI({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(n)&&c.push(new gI({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new Yf(c,{width:"100%",height:jt(a)});i=We.makeSvgSpan([],[u],o)}return i.height=a,i.style.height=jt(a),i},Zf={encloseSpan:DGe,mathMLnode:IGe,svgSpan:OGe};function yr(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function NM(e){var t=HC(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function HC(e){return e&&(e.type==="atom"||oGe.hasOwnProperty(e.type))?e:null}var IM=(e,t)=>{var n,r,s;e&&e.type==="supsub"?(r=yr(e.base,"accent"),n=r.base,e.base=n,s=rGe(Kr(e,t)),e.base=r):(r=yr(e,"accent"),n=r.base);var o=Kr(n,t.havingCrampedStyle()),i=r.isShifty&&is.isCharacterBox(n),a=0;if(i){var l=is.getBaseElem(n),c=Kr(l,t.havingCrampedStyle());a=jj(c).skew}var u=r.label==="\\c",f=u?o.height+o.depth:Math.min(o.height,t.fontMetrics().xHeight),m;if(r.isStretchy)m=Zf.svgSpan(r,t),m=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"elem",elem:m,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+jt(2*a)+")",marginLeft:jt(2*a)}:void 0}]},t);else{var g,y;r.label==="\\vec"?(g=We.staticSvg("vec",t),y=We.svgData.vec[1]):(g=We.makeOrd({mode:r.mode,text:r.label},t,"textord"),g=jj(g),g.italic=0,y=g.width,u&&(f+=g.depth)),m=We.makeSpan(["accent-body"],[g]);var v=r.label==="\\textcircled";v&&(m.classes.push("accent-full"),f=o.height);var x=a;v||(x-=y/2),m.style.left=jt(x),r.label==="\\textcircled"&&(m.style.top=".2em"),m=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:-f},{type:"elem",elem:m}]},t)}var E=We.makeSpan(["mord","accent"],[m],t);return s?(s.children[0]=E,s.height=Math.max(E.height,s.height),s.classes[0]="mord",s):E},Tre=(e,t)=>{var n=e.isStretchy?Zf.mathMLnode(e.label):new Ct.MathNode("mo",[Lc(e.label,e.mode)]),r=new Ct.MathNode("mover",[Us(e.base,t),n]);return r.setAttribute("accent","true"),r},PGe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));Xt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var n=e4(t[0]),r=!PGe.test(e.funcName),s=!r||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:r,isShifty:s,base:n}},htmlBuilder:IM,mathmlBuilder:Tre});Xt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var n=t[0],r=e.parser.mode;return r==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:e.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:IM,mathmlBuilder:Tre});Xt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0];return{type:"accentUnder",mode:n.mode,label:r,base:s}},htmlBuilder:(e,t)=>{var n=Kr(e.base,t),r=Zf.svgSpan(e,t),s=e.label==="\\utilde"?.12:0,o=We.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:n}]},t);return We.makeSpan(["mord","accentunder"],[o],t)},mathmlBuilder:(e,t)=>{var n=Zf.mathMLnode(e.label),r=new Ct.MathNode("munder",[Us(e.base,t),n]);return r.setAttribute("accentunder","true"),r}});var r_=e=>{var t=new Ct.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};Xt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r,funcName:s}=e;return{type:"xArrow",mode:r.mode,label:s,body:t[0],below:n[0]}},htmlBuilder(e,t){var n=t.style,r=t.havingStyle(n.sup()),s=We.wrapFragment(Kr(e.body,r,t),t),o=e.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(o+"-arrow-pad");var i;e.below&&(r=t.havingStyle(n.sub()),i=We.wrapFragment(Kr(e.below,r,t),t),i.classes.push(o+"-arrow-pad"));var a=Zf.svgSpan(e,t),l=-t.fontMetrics().axisHeight+.5*a.height,c=-t.fontMetrics().axisHeight-.5*a.height-.111;(s.depth>.25||e.label==="\\xleftequilibrium")&&(c-=s.depth);var u;if(i){var f=-t.fontMetrics().axisHeight+i.height+.5*a.height+.111;u=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:c},{type:"elem",elem:a,shift:l},{type:"elem",elem:i,shift:f}]},t)}else u=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:c},{type:"elem",elem:a,shift:l}]},t);return u.children[0].children[0].children[1].classes.push("svg-align"),We.makeSpan(["mrel","x-arrow"],[u],t)},mathmlBuilder(e,t){var n=Zf.mathMLnode(e.label);n.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(e.body){var s=r_(Us(e.body,t));if(e.below){var o=r_(Us(e.below,t));r=new Ct.MathNode("munderover",[n,o,s])}else r=new Ct.MathNode("mover",[n,s])}else if(e.below){var i=r_(Us(e.below,t));r=new Ct.MathNode("munder",[n,i])}else r=r_(),r=new Ct.MathNode("mover",[n,r]);return r}});var LGe=We.makeSpan;function Cre(e,t){var n=Ii(e.body,t,!0);return LGe([e.mclass],n,t)}function kre(e,t){var n,r=wl(e.body,t);return e.mclass==="minner"?n=new Ct.MathNode("mpadded",r):e.mclass==="mord"?e.isCharacterBox?(n=r[0],n.type="mi"):n=new Ct.MathNode("mi",r):(e.isCharacterBox?(n=r[0],n.type="mo"):n=new Ct.MathNode("mo",r),e.mclass==="mbin"?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):e.mclass==="mpunct"?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(n.attributes.lspace="0em",n.attributes.rspace="0em"):e.mclass==="minner"&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}Xt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:n,funcName:r}=e,s=t[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),body:ei(s),isCharacterBox:is.isCharacterBox(s)}},htmlBuilder:Cre,mathmlBuilder:kre});var VC=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};Xt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:n}=e;return{type:"mclass",mode:n.mode,mclass:VC(t[0]),body:ei(t[1]),isCharacterBox:is.isCharacterBox(t[1])}}});Xt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:n,funcName:r}=e,s=t[1],o=t[0],i;r!=="\\stackrel"?i=VC(s):i="mrel";var a={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:ei(s)},l={type:"supsub",mode:o.mode,base:a,sup:r==="\\underset"?null:o,sub:r==="\\underset"?o:null};return{type:"mclass",mode:n.mode,mclass:i,body:[l],isCharacterBox:is.isCharacterBox(l)}},htmlBuilder:Cre,mathmlBuilder:kre});Xt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"pmb",mode:n.mode,mclass:VC(t[0]),body:ei(t[0])}},htmlBuilder(e,t){var n=Ii(e.body,t,!0),r=We.makeSpan([e.mclass],n,t);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(e,t){var n=wl(e.body,t),r=new Ct.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var $Ge={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Kj=()=>({type:"styling",body:[],mode:"math",style:"display"}),Zj=e=>e.type==="textord"&&e.text==="@",FGe=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function BGe(e,t,n){var r=$Ge[e];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var s=n.callFunction("\\\\cdleft",[t[0]],[]),o={type:"atom",text:r,mode:"math",family:"rel"},i=n.callFunction("\\Big",[o],[]),a=n.callFunction("\\\\cdright",[t[1]],[]),l={type:"ordgroup",mode:"math",body:[s,i,a]};return n.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return n.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function zGe(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var n=e.fetch().text;if(n==="&"||n==="\\\\")e.consume();else if(n==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new It("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var r=[],s=[r],o=0;o<t.length;o++){for(var i=t[o],a=Kj(),l=0;l<i.length;l++)if(!Zj(i[l]))a.body.push(i[l]);else{r.push(a),l+=1;var c=NM(i[l]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var f=0;f<2;f++){for(var m=!0,g=l+1;g<i.length;g++){if(FGe(i[g],c)){m=!1,l=g;break}if(Zj(i[g]))throw new It("Missing a "+c+" character to complete a CD arrow.",i[g]);u[f].body.push(i[g])}if(m)throw new It("Missing a "+c+" character to complete a CD arrow.",i[l])}else throw new It('Expected one of "<>AV=|." after @',i[l]);var y=BGe(c,u,e),v={type:"styling",body:[y],mode:"math",style:"display"};r.push(v),a=Kj()}o%2===0?r.push(a):r.shift(),r=[],s.push(r)}e.gullet.endGroup(),e.gullet.endGroup();var x=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:x,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}Xt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:t[0]}},htmlBuilder(e,t){var n=t.havingStyle(t.style.sup()),r=We.wrapFragment(Kr(e.label,n,t),t);return r.classes.push("cd-label-"+e.side),r.style.bottom=jt(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(e,t){var n=new Ct.MathNode("mrow",[Us(e.label,t)]);return n=new Ct.MathNode("mpadded",[n]),n.setAttribute("width","0"),e.side==="left"&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),n=new Ct.MathNode("mstyle",[n]),n.setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}});Xt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:n}=e;return{type:"cdlabelparent",mode:n.mode,fragment:t[0]}},htmlBuilder(e,t){var n=We.wrapFragment(Kr(e.fragment,t),t);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder(e,t){return new Ct.MathNode("mrow",[Us(e.fragment,t)])}});Xt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:n}=e,r=yr(t[0],"ordgroup"),s=r.body,o="",i=0;i<s.length;i++){var a=yr(s[i],"textord");o+=a.text}var l=parseInt(o),c;if(isNaN(l))throw new It("\\@char has non-numeric argument "+o);if(l<0||l>=1114111)throw new It("\\@char with invalid code point "+o);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:n.mode,text:c}}});var Are=(e,t)=>{var n=Ii(e.body,t.withColor(e.color),!1);return We.makeFragment(n)},Nre=(e,t)=>{var n=wl(e.body,t.withColor(e.color)),r=new Ct.MathNode("mstyle",n);return r.setAttribute("mathcolor",e.color),r};Xt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:n}=e,r=yr(t[0],"color-token").color,s=t[1];return{type:"color",mode:n.mode,color:r,body:ei(s)}},htmlBuilder:Are,mathmlBuilder:Nre});Xt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:n,breakOnTokenText:r}=e,s=yr(t[0],"color-token").color;n.gullet.macros.set("\\current@color",s);var o=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:s,body:o}},htmlBuilder:Are,mathmlBuilder:Nre});Xt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,n){var{parser:r}=e,s=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,o=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:o,size:s&&yr(s,"size").value}},htmlBuilder(e,t){var n=We.makeSpan(["mspace"],[],t);return e.newLine&&(n.classes.push("newline"),e.size&&(n.style.marginTop=jt(Ao(e.size,t)))),n},mathmlBuilder(e,t){var n=new Ct.MathNode("mspace");return e.newLine&&(n.setAttribute("linebreak","newline"),e.size&&n.setAttribute("height",jt(Ao(e.size,t)))),n}});var xI={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Ire=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new It("Expected a control sequence",e);return t},jGe=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},Rre=(e,t,n,r)=>{var s=e.gullet.macros.get(n.text);s==null&&(n.noexpand=!0,s={tokens:[n],numArgs:0,unexpandable:!e.gullet.isExpandable(n.text)}),e.gullet.macros.set(t,s,r)};Xt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:n}=e;t.consumeSpaces();var r=t.fetch();if(xI[r.text])return(n==="\\global"||n==="\\\\globallong")&&(r.text=xI[r.text]),yr(t.parseFunction(),"internal");throw new It("Invalid token after macro prefix",r)}});Xt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=t.gullet.popToken(),s=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new It("Expected a control sequence",r);for(var o=0,i,a=[[]];t.gullet.future().text!=="{";)if(r=t.gullet.popToken(),r.text==="#"){if(t.gullet.future().text==="{"){i=t.gullet.future(),a[o].push("{");break}if(r=t.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new It('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==o+1)throw new It('Argument number "'+r.text+'" out of order');o++,a.push([])}else{if(r.text==="EOF")throw new It("Expected a macro definition");a[o].push(r.text)}var{tokens:l}=t.gullet.consumeArg();return i&&l.unshift(i),(n==="\\edef"||n==="\\xdef")&&(l=t.gullet.expandTokens(l),l.reverse()),t.gullet.macros.set(s,{tokens:l,numArgs:o,delimiters:a},n===xI[n]),{type:"internal",mode:t.mode}}});Xt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=Ire(t.gullet.popToken());t.gullet.consumeSpaces();var s=jGe(t);return Rre(t,r,s,n==="\\\\globallet"),{type:"internal",mode:t.mode}}});Xt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=Ire(t.gullet.popToken()),s=t.gullet.popToken(),o=t.gullet.popToken();return Rre(t,r,o,n==="\\\\globalfuture"),t.gullet.pushToken(o),t.gullet.pushToken(s),{type:"internal",mode:t.mode}}});var Sv=function(t,n,r){var s=Js.math[t]&&Js.math[t].replace,o=SM(s||t,n,r);if(!o)throw new Error("Unsupported symbol "+t+" and font size "+n+".");return o},RM=function(t,n,r,s){var o=r.havingBaseStyle(n),i=We.makeSpan(s.concat(o.sizingClasses(r)),[t],r),a=o.sizeMultiplier/r.sizeMultiplier;return i.height*=a,i.depth*=a,i.maxFontSize=o.sizeMultiplier,i},Mre=function(t,n,r){var s=n.havingBaseStyle(r),o=(1-n.sizeMultiplier/s.sizeMultiplier)*n.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=jt(o),t.height-=o,t.depth+=o},UGe=function(t,n,r,s,o,i){var a=We.makeSymbol(t,"Main-Regular",o,s),l=RM(a,n,s,i);return r&&Mre(l,s,n),l},HGe=function(t,n,r,s){return We.makeSymbol(t,"Size"+n+"-Regular",r,s)},Ore=function(t,n,r,s,o,i){var a=HGe(t,n,o,s),l=RM(We.makeSpan(["delimsizing","size"+n],[a],s),Fn.TEXT,s,i);return r&&Mre(l,s,Fn.TEXT),l},lA=function(t,n,r){var s;n==="Size1-Regular"?s="delim-size1":s="delim-size4";var o=We.makeSpan(["delimsizinginner",s],[We.makeSpan([],[We.makeSymbol(t,n,r)])]);return{type:"elem",elem:o}},cA=function(t,n,r){var s=md["Size4-Regular"][t.charCodeAt(0)]?md["Size4-Regular"][t.charCodeAt(0)][4]:md["Size1-Regular"][t.charCodeAt(0)][4],o=new I0("inner",Kqe(t,Math.round(1e3*n))),i=new Yf([o],{width:jt(s),height:jt(n),style:"width:"+jt(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*n),preserveAspectRatio:"xMinYMin"}),a=We.makeSvgSpan([],[i],r);return a.height=n,a.style.height=jt(n),a.style.width=jt(s),{type:"elem",elem:a}},wI=.008,s_={type:"kern",size:-1*wI},VGe=["|","\\lvert","\\rvert","\\vert"],qGe=["\\|","\\lVert","\\rVert","\\Vert"],Dre=function(t,n,r,s,o,i){var a,l,c,u,f="",m=0;a=c=u=t,l=null;var g="Size1-Regular";t==="\\uparrow"?c=u="":t==="\\Uparrow"?c=u="":t==="\\downarrow"?a=c="":t==="\\Downarrow"?a=c="":t==="\\updownarrow"?(a="\\uparrow",c="",u="\\downarrow"):t==="\\Updownarrow"?(a="\\Uparrow",c="",u="\\Downarrow"):VGe.includes(t)?(c="",f="vert",m=333):qGe.includes(t)?(c="",f="doublevert",m=556):t==="["||t==="\\lbrack"?(a="",c="",u="",g="Size4-Regular",f="lbrack",m=667):t==="]"||t==="\\rbrack"?(a="",c="",u="",g="Size4-Regular",f="rbrack",m=667):t==="\\lfloor"||t===""?(c=a="",u="",g="Size4-Regular",f="lfloor",m=667):t==="\\lceil"||t===""?(a="",c=u="",g="Size4-Regular",f="lceil",m=667):t==="\\rfloor"||t===""?(c=a="",u="",g="Size4-Regular",f="rfloor",m=667):t==="\\rceil"||t===""?(a="",c=u="",g="Size4-Regular",f="rceil",m=667):t==="("||t==="\\lparen"?(a="",c="",u="",g="Size4-Regular",f="lparen",m=875):t===")"||t==="\\rparen"?(a="",c="",u="",g="Size4-Regular",f="rparen",m=875):t==="\\{"||t==="\\lbrace"?(a="",l="",u="",c="",g="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(a="",l="",u="",c="",g="Size4-Regular"):t==="\\lgroup"||t===""?(a="",u="",c="",g="Size4-Regular"):t==="\\rgroup"||t===""?(a="",u="",c="",g="Size4-Regular"):t==="\\lmoustache"||t===""?(a="",u="",c="",g="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(a="",u="",c="",g="Size4-Regular");var y=Sv(a,g,o),v=y.height+y.depth,x=Sv(c,g,o),E=x.height+x.depth,T=Sv(u,g,o),k=T.height+T.depth,I=0,O=1;if(l!==null){var M=Sv(l,g,o);I=M.height+M.depth,O=2}var P=v+k+I,j=Math.max(0,Math.ceil((n-P)/(O*E))),V=P+j*O*E,U=s.fontMetrics().axisHeight;r&&(U*=s.sizeMultiplier);var z=V/2-U,H=[];if(f.length>0){var F=V-v-k,G=Math.round(V*1e3),X=Zqe(f,Math.round(F*1e3)),J=new I0(f,X),ee=(m/1e3).toFixed(3)+"em",re=(G/1e3).toFixed(3)+"em",ie=new Yf([J],{width:ee,height:re,viewBox:"0 0 "+m+" "+G}),Z=We.makeSvgSpan([],[ie],s);Z.height=G/1e3,Z.style.width=ee,Z.style.height=re,H.push({type:"elem",elem:Z})}else{if(H.push(lA(u,g,o)),H.push(s_),l===null){var te=V-v-k+2*wI;H.push(cA(c,te,s))}else{var oe=(V-v-k-I)/2+2*wI;H.push(cA(c,oe,s)),H.push(s_),H.push(lA(l,g,o)),H.push(s_),H.push(cA(c,oe,s))}H.push(s_),H.push(lA(a,g,o))}var Q=s.havingBaseStyle(Fn.TEXT),Te=We.makeVList({positionType:"bottom",positionData:z,children:H},Q);return RM(We.makeSpan(["delimsizing","mult"],[Te],Q),Fn.TEXT,s,i)},uA=80,dA=.08,fA=function(t,n,r,s,o){var i=Yqe(t,s,r),a=new I0(t,i),l=new Yf([a],{width:"400em",height:jt(n),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return We.makeSvgSpan(["hide-tail"],[l],o)},GGe=function(t,n){var r=n.havingBaseSizing(),s=Fre("\\surd",t*r.sizeMultiplier,$re,r),o=r.sizeMultiplier,i=Math.max(0,n.minRuleThickness-n.fontMetrics().sqrtRuleThickness),a,l=0,c=0,u=0,f;return s.type==="small"?(u=1e3+1e3*i+uA,t<1?o=1:t<1.4&&(o=.7),l=(1+i+dA)/o,c=(1+i)/o,a=fA("sqrtMain",l,u,i,n),a.style.minWidth="0.853em",f=.833/o):s.type==="large"?(u=(1e3+uA)*Yv[s.size],c=(Yv[s.size]+i)/o,l=(Yv[s.size]+i+dA)/o,a=fA("sqrtSize"+s.size,l,u,i,n),a.style.minWidth="1.02em",f=1/o):(l=t+i+dA,c=t+i,u=Math.floor(1e3*t+i)+uA,a=fA("sqrtTall",l,u,i,n),a.style.minWidth="0.742em",f=1.056),a.height=c,a.style.height=jt(l),{span:a,advanceWidth:f,ruleWidth:(n.fontMetrics().sqrtRuleThickness+i)*o}},Pre=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],WGe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],Lre=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Yv=[0,1.2,1.8,2.4,3],YGe=function(t,n,r,s,o){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),Pre.includes(t)||Lre.includes(t))return Ore(t,n,!1,r,s,o);if(WGe.includes(t))return Dre(t,Yv[n],!1,r,s,o);throw new It("Illegal delimiter: '"+t+"'")},KGe=[{type:"small",style:Fn.SCRIPTSCRIPT},{type:"small",style:Fn.SCRIPT},{type:"small",style:Fn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],ZGe=[{type:"small",style:Fn.SCRIPTSCRIPT},{type:"small",style:Fn.SCRIPT},{type:"small",style:Fn.TEXT},{type:"stack"}],$re=[{type:"small",style:Fn.SCRIPTSCRIPT},{type:"small",style:Fn.SCRIPT},{type:"small",style:Fn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],JGe=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},Fre=function(t,n,r,s){for(var o=Math.min(2,3-s.style.size),i=o;i<r.length&&r[i].type!=="stack";i++){var a=Sv(t,JGe(r[i]),"math"),l=a.height+a.depth;if(r[i].type==="small"){var c=s.havingBaseStyle(r[i].style);l*=c.sizeMultiplier}if(l>n)return r[i]}return r[r.length-1]},Bre=function(t,n,r,s,o,i){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var a;Lre.includes(t)?a=KGe:Pre.includes(t)?a=$re:a=ZGe;var l=Fre(t,n,a,s);return l.type==="small"?UGe(t,l.style,r,s,o,i):l.type==="large"?Ore(t,l.size,r,s,o,i):Dre(t,n,r,s,o,i)},XGe=function(t,n,r,s,o,i){var a=s.fontMetrics().axisHeight*s.sizeMultiplier,l=901,c=5/s.fontMetrics().ptPerEm,u=Math.max(n-a,r+a),f=Math.max(u/500*l,2*u-c);return Bre(t,f,!0,s,o,i)},jf={sqrtImage:GGe,sizedDelim:YGe,sizeToMaxHeight:Yv,customSizedDelim:Bre,leftRightDelim:XGe},Jj={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},QGe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function qC(e,t){var n=HC(e);if(n&&QGe.includes(n.text))return n;throw n?new It("Invalid delimiter '"+n.text+"' after '"+t.funcName+"'",e):new It("Invalid delimiter type '"+e.type+"'",e)}Xt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var n=qC(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:Jj[e.funcName].size,mclass:Jj[e.funcName].mclass,delim:n.text}},htmlBuilder:(e,t)=>e.delim==="."?We.makeSpan([e.mclass]):jf.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(Lc(e.delim,e.mode));var n=new Ct.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=jt(jf.sizeToMaxHeight[e.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}});function Xj(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Xt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=e.parser.gullet.macros.get("\\current@color");if(n&&typeof n!="string")throw new It("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:qC(t[0],e).text,color:n}}});Xt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=qC(t[0],e),r=e.parser;++r.leftrightDepth;var s=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var o=yr(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:s,left:n.text,right:o.delim,rightColor:o.color}},htmlBuilder:(e,t)=>{Xj(e);for(var n=Ii(e.body,t,!0,["mopen","mclose"]),r=0,s=0,o=!1,i=0;i<n.length;i++)n[i].isMiddle?o=!0:(r=Math.max(n[i].height,r),s=Math.max(n[i].depth,s));r*=t.sizeMultiplier,s*=t.sizeMultiplier;var a;if(e.left==="."?a=Kx(t,["mopen"]):a=jf.leftRightDelim(e.left,r,s,t,e.mode,["mopen"]),n.unshift(a),o)for(var l=1;l<n.length;l++){var c=n[l],u=c.isMiddle;u&&(n[l]=jf.leftRightDelim(u.delim,r,s,u.options,e.mode,[]))}var f;if(e.right===".")f=Kx(t,["mclose"]);else{var m=e.rightColor?t.withColor(e.rightColor):t;f=jf.leftRightDelim(e.right,r,s,m,e.mode,["mclose"])}return n.push(f),We.makeSpan(["minner"],n,t)},mathmlBuilder:(e,t)=>{Xj(e);var n=wl(e.body,t);if(e.left!=="."){var r=new Ct.MathNode("mo",[Lc(e.left,e.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if(e.right!=="."){var s=new Ct.MathNode("mo",[Lc(e.right,e.mode)]);s.setAttribute("fence","true"),e.rightColor&&s.setAttribute("mathcolor",e.rightColor),n.push(s)}return kM(n)}});Xt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=qC(t[0],e);if(!e.parser.leftrightDepth)throw new It("\\middle without preceding \\left",n);return{type:"middle",mode:e.parser.mode,delim:n.text}},htmlBuilder:(e,t)=>{var n;if(e.delim===".")n=Kx(t,[]);else{n=jf.sizedDelim(e.delim,1,t,e.mode,[]);var r={delim:e.delim,options:t};n.isMiddle=r}return n},mathmlBuilder:(e,t)=>{var n=e.delim==="\\vert"||e.delim==="|"?Lc("|","text"):Lc(e.delim,e.mode),r=new Ct.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var MM=(e,t)=>{var n=We.wrapFragment(Kr(e.body,t),t),r=e.label.slice(1),s=t.sizeMultiplier,o,i=0,a=is.isCharacterBox(e.body);if(r==="sout")o=We.makeSpan(["stretchy","sout"]),o.height=t.fontMetrics().defaultRuleThickness/s,i=-.5*t.fontMetrics().xHeight;else if(r==="phase"){var l=Ao({number:.6,unit:"pt"},t),c=Ao({number:.35,unit:"ex"},t),u=t.havingBaseSizing();s=s/u.sizeMultiplier;var f=n.height+n.depth+l+c;n.style.paddingLeft=jt(f/2+l);var m=Math.floor(1e3*f*s),g=Gqe(m),y=new Yf([new I0("phase",g)],{width:"400em",height:jt(m/1e3),viewBox:"0 0 400000 "+m,preserveAspectRatio:"xMinYMin slice"});o=We.makeSvgSpan(["hide-tail"],[y],t),o.style.height=jt(f),i=n.depth+l+c}else{/cancel/.test(r)?a||n.classes.push("cancel-pad"):r==="angl"?n.classes.push("anglpad"):n.classes.push("boxpad");var v=0,x=0,E=0;/box/.test(r)?(E=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),v=t.fontMetrics().fboxsep+(r==="colorbox"?0:E),x=v):r==="angl"?(E=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),v=4*E,x=Math.max(0,.25-n.depth)):(v=a?.2:0,x=v),o=Zf.encloseSpan(n,r,v,x,t),/fbox|boxed|fcolorbox/.test(r)?(o.style.borderStyle="solid",o.style.borderWidth=jt(E)):r==="angl"&&E!==.049&&(o.style.borderTopWidth=jt(E),o.style.borderRightWidth=jt(E)),i=n.depth+x,e.backgroundColor&&(o.style.backgroundColor=e.backgroundColor,e.borderColor&&(o.style.borderColor=e.borderColor))}var T;if(e.backgroundColor)T=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:i},{type:"elem",elem:n,shift:0}]},t);else{var k=/cancel|phase/.test(r)?["svg-align"]:[];T=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:o,shift:i,wrapperClasses:k}]},t)}return/cancel/.test(r)&&(T.height=n.height,T.depth=n.depth),/cancel/.test(r)&&!a?We.makeSpan(["mord","cancel-lap"],[T],t):We.makeSpan(["mord"],[T],t)},OM=(e,t)=>{var n=0,r=new Ct.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Us(e.body,t)]);switch(e.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),e.label==="\\fcolorbox"){var s=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);r.setAttribute("style","border: "+s+"em solid "+String(e.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};Xt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,n){var{parser:r,funcName:s}=e,o=yr(t[0],"color-token").color,i=t[1];return{type:"enclose",mode:r.mode,label:s,backgroundColor:o,body:i}},htmlBuilder:MM,mathmlBuilder:OM});Xt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,n){var{parser:r,funcName:s}=e,o=yr(t[0],"color-token").color,i=yr(t[1],"color-token").color,a=t[2];return{type:"enclose",mode:r.mode,label:s,backgroundColor:i,borderColor:o,body:a}},htmlBuilder:MM,mathmlBuilder:OM});Xt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\fbox",body:t[0]}}});Xt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e,s=t[0];return{type:"enclose",mode:n.mode,label:r,body:s}},htmlBuilder:MM,mathmlBuilder:OM});Xt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\angl",body:t[0]}}});var zre={};function Cd(e){for(var{type:t,names:n,props:r,handler:s,htmlBuilder:o,mathmlBuilder:i}=e,a={type:t,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},l=0;l<n.length;++l)zre[n[l]]=a;o&&(XT[t]=o),i&&(QT[t]=i)}var jre={};function le(e,t){jre[e]=t}function Qj(e){var t=[];e.consumeSpaces();var n=e.fetch().text;for(n==="\\relax"&&(e.consume(),e.consumeSpaces(),n=e.fetch().text);n==="\\hline"||n==="\\hdashline";)e.consume(),t.push(n==="\\hdashline"),e.consumeSpaces(),n=e.fetch().text;return t}var GC=e=>{var t=e.parser.settings;if(!t.displayMode)throw new It("{"+e.envName+"} can be used only in display mode.")};function DM(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function W0(e,t,n){var{hskipBeforeAndAfter:r,addJot:s,cols:o,arraystretch:i,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:f,leqno:m}=t;if(e.gullet.beginGroup(),c||e.gullet.macros.set("\\cr","\\\\\\relax"),!i){var g=e.gullet.expandMacroAsText("\\arraystretch");if(g==null)i=1;else if(i=parseFloat(g),!i||i<0)throw new It("Invalid \\arraystretch: "+g)}e.gullet.beginGroup();var y=[],v=[y],x=[],E=[],T=l!=null?[]:void 0;function k(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function I(){T&&(e.gullet.macros.get("\\df@tag")?(T.push(e.subparse([new Kl("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):T.push(!!l&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(k(),E.push(Qj(e));;){var O=e.parseExpression(!1,c?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),O={type:"ordgroup",mode:e.mode,body:O},n&&(O={type:"styling",mode:e.mode,style:n,body:[O]}),y.push(O);var M=e.fetch().text;if(M==="&"){if(f&&y.length===f){if(c||a)throw new It("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(M==="\\end"){I(),y.length===1&&O.type==="styling"&&O.body[0].body.length===0&&(v.length>1||!u)&&v.pop(),E.length<v.length+1&&E.push([]);break}else if(M==="\\\\"){e.consume();var P=void 0;e.gullet.future().text!==" "&&(P=e.parseSizeGroup(!0)),x.push(P?P.value:null),I(),E.push(Qj(e)),y=[],v.push(y),k()}else throw new It("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:s,arraystretch:i,body:v,cols:o,rowGaps:x,hskipBeforeAndAfter:r,hLinesBeforeRow:E,colSeparationType:a,tags:T,leqno:m}}function PM(e){return e.slice(0,1)==="d"?"display":"text"}var kd=function(t,n){var r,s,o=t.body.length,i=t.hLinesBeforeRow,a=0,l=new Array(o),c=[],u=Math.max(n.fontMetrics().arrayRuleWidth,n.minRuleThickness),f=1/n.fontMetrics().ptPerEm,m=5*f;if(t.colSeparationType&&t.colSeparationType==="small"){var g=n.havingStyle(Fn.SCRIPT).sizeMultiplier;m=.2778*(g/n.sizeMultiplier)}var y=t.colSeparationType==="CD"?Ao({number:3,unit:"ex"},n):12*f,v=3*f,x=t.arraystretch*y,E=.7*x,T=.3*x,k=0;function I(en){for(var xt=0;xt<en.length;++xt)xt>0&&(k+=.25),c.push({pos:k,isDashed:en[xt]})}for(I(i[0]),r=0;r<t.body.length;++r){var O=t.body[r],M=E,P=T;a<O.length&&(a=O.length);var j=new Array(O.length);for(s=0;s<O.length;++s){var V=Kr(O[s],n);P<V.depth&&(P=V.depth),M<V.height&&(M=V.height),j[s]=V}var U=t.rowGaps[r],z=0;U&&(z=Ao(U,n),z>0&&(z+=T,P<z&&(P=z),z=0)),t.addJot&&(P+=v),j.height=M,j.depth=P,k+=M,j.pos=k,k+=P+z,l[r]=j,I(i[r+1])}var H=k/2+n.fontMetrics().axisHeight,F=t.cols||[],G=[],X,J,ee=[];if(t.tags&&t.tags.some(en=>en))for(r=0;r<o;++r){var re=l[r],ie=re.pos-H,Z=t.tags[r],te=void 0;Z===!0?te=We.makeSpan(["eqn-num"],[],n):Z===!1?te=We.makeSpan([],[],n):te=We.makeSpan([],Ii(Z,n,!0),n),te.depth=re.depth,te.height=re.height,ee.push({type:"elem",elem:te,shift:ie})}for(s=0,J=0;s<a||J<F.length;++s,++J){for(var oe=F[J]||{},Q=!0;oe.type==="separator";){if(Q||(X=We.makeSpan(["arraycolsep"],[]),X.style.width=jt(n.fontMetrics().doubleRuleSep),G.push(X)),oe.separator==="|"||oe.separator===":"){var Te=oe.separator==="|"?"solid":"dashed",ge=We.makeSpan(["vertical-separator"],[],n);ge.style.height=jt(k),ge.style.borderRightWidth=jt(u),ge.style.borderRightStyle=Te,ge.style.margin="0 "+jt(-u/2);var Ce=k-H;Ce&&(ge.style.verticalAlign=jt(-Ce)),G.push(ge)}else throw new It("Invalid separator type: "+oe.separator);J++,oe=F[J]||{},Q=!1}if(!(s>=a)){var fe=void 0;(s>0||t.hskipBeforeAndAfter)&&(fe=is.deflt(oe.pregap,m),fe!==0&&(X=We.makeSpan(["arraycolsep"],[]),X.style.width=jt(fe),G.push(X)));var Fe=[];for(r=0;r<o;++r){var De=l[r],Re=De[s];if(Re){var tt=De.pos-H;Re.depth=De.depth,Re.height=De.height,Fe.push({type:"elem",elem:Re,shift:tt})}}Fe=We.makeVList({positionType:"individualShift",children:Fe},n),Fe=We.makeSpan(["col-align-"+(oe.align||"c")],[Fe]),G.push(Fe),(s<a-1||t.hskipBeforeAndAfter)&&(fe=is.deflt(oe.postgap,m),fe!==0&&(X=We.makeSpan(["arraycolsep"],[]),X.style.width=jt(fe),G.push(X)))}}if(l=We.makeSpan(["mtable"],G),c.length>0){for(var de=We.makeLineSpan("hline",n,u),nt=We.makeLineSpan("hdashline",n,u),ot=[{type:"elem",elem:l,shift:0}];c.length>0;){var Ut=c.pop(),Vt=Ut.pos-H;Ut.isDashed?ot.push({type:"elem",elem:nt,shift:Vt}):ot.push({type:"elem",elem:de,shift:Vt})}l=We.makeVList({positionType:"individualShift",children:ot},n)}if(ee.length===0)return We.makeSpan(["mord"],[l],n);var Dt=We.makeVList({positionType:"individualShift",children:ee},n);return Dt=We.makeSpan(["tag"],[Dt],n),We.makeFragment([l,Dt])},eWe={c:"center ",l:"left ",r:"right "},Ad=function(t,n){for(var r=[],s=new Ct.MathNode("mtd",[],["mtr-glue"]),o=new Ct.MathNode("mtd",[],["mml-eqn-num"]),i=0;i<t.body.length;i++){for(var a=t.body[i],l=[],c=0;c<a.length;c++)l.push(new Ct.MathNode("mtd",[Us(a[c],n)]));t.tags&&t.tags[i]&&(l.unshift(s),l.push(s),t.leqno?l.unshift(o):l.push(o)),r.push(new Ct.MathNode("mtr",l))}var u=new Ct.MathNode("mtable",r),f=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);u.setAttribute("rowspacing",jt(f));var m="",g="";if(t.cols&&t.cols.length>0){var y=t.cols,v="",x=!1,E=0,T=y.length;y[0].type==="separator"&&(m+="top ",E=1),y[y.length-1].type==="separator"&&(m+="bottom ",T-=1);for(var k=E;k<T;k++)y[k].type==="align"?(g+=eWe[y[k].align],x&&(v+="none "),x=!0):y[k].type==="separator"&&x&&(v+=y[k].separator==="|"?"solid ":"dashed ",x=!1);u.setAttribute("columnalign",g.trim()),/[sd]/.test(v)&&u.setAttribute("columnlines",v.trim())}if(t.colSeparationType==="align"){for(var I=t.cols||[],O="",M=1;M<I.length;M++)O+=M%2?"0em ":"1em ";u.setAttribute("columnspacing",O.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var P="",j=t.hLinesBeforeRow;m+=j[0].length>0?"left ":"",m+=j[j.length-1].length>0?"right ":"";for(var V=1;V<j.length-1;V++)P+=j[V].length===0?"none ":j[V][0]?"dashed ":"solid ";return/[sd]/.test(P)&&u.setAttribute("rowlines",P.trim()),m!==""&&(u=new Ct.MathNode("menclose",[u]),u.setAttribute("notation",m.trim())),t.arraystretch&&t.arraystretch<1&&(u=new Ct.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},Ure=function(t,n){t.envName.indexOf("ed")===-1&&GC(t);var r=[],s=t.envName.indexOf("at")>-1?"alignat":"align",o=t.envName==="split",i=W0(t.parser,{cols:r,addJot:!0,autoTag:o?void 0:DM(t.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:o?2:void 0,leqno:t.parser.settings.leqno},"display"),a,l=0,c={type:"ordgroup",mode:t.mode,body:[]};if(n[0]&&n[0].type==="ordgroup"){for(var u="",f=0;f<n[0].body.length;f++){var m=yr(n[0].body[f],"textord");u+=m.text}a=Number(u),l=a*2}var g=!l;i.body.forEach(function(E){for(var T=1;T<E.length;T+=2){var k=yr(E[T],"styling"),I=yr(k.body[0],"ordgroup");I.body.unshift(c)}if(g)l<E.length&&(l=E.length);else{var O=E.length/2;if(a<O)throw new It("Too many math in a row: "+("expected "+a+", but got "+O),E[0])}});for(var y=0;y<l;++y){var v="r",x=0;y%2===1?v="l":y>0&&g&&(x=1),r[y]={type:"align",align:v,pregap:x,postgap:0}}return i.colSeparationType=g?"align":"alignat",i};Cd({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var n=HC(t[0]),r=n?[t[0]]:yr(t[0],"ordgroup").body,s=r.map(function(i){var a=NM(i),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new It("Unknown column alignment: "+l,i)}),o={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return W0(e.parser,o,PM(e.envName))},htmlBuilder:kd,mathmlBuilder:Ad});Cd({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if(e.envName.charAt(e.envName.length-1)==="*"){var s=e.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),n=s.fetch().text,"lcr".indexOf(n)===-1)throw new It("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),r.cols=[{type:"align",align:n}]}}var o=W0(e.parser,r,PM(e.envName)),i=Math.max(0,...o.body.map(a=>a.length));return o.cols=new Array(i).fill({type:"align",align:n}),t?{type:"leftright",mode:e.mode,body:[o],left:t[0],right:t[1],rightColor:void 0}:o},htmlBuilder:kd,mathmlBuilder:Ad});Cd({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},n=W0(e.parser,t,"script");return n.colSeparationType="small",n},htmlBuilder:kd,mathmlBuilder:Ad});Cd({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var n=HC(t[0]),r=n?[t[0]]:yr(t[0],"ordgroup").body,s=r.map(function(i){var a=NM(i),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new It("Unknown column alignment: "+l,i)});if(s.length>1)throw new It("{subarray} can contain only one column");var o={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(o=W0(e.parser,o,"script"),o.body.length>0&&o.body[0].length>1)throw new It("{subarray} can contain only one column");return o},htmlBuilder:kd,mathmlBuilder:Ad});Cd({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},n=W0(e.parser,t,PM(e.envName));return{type:"leftright",mode:e.mode,body:[n],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:kd,mathmlBuilder:Ad});Cd({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Ure,htmlBuilder:kd,mathmlBuilder:Ad});Cd({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&GC(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:DM(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return W0(e.parser,t,"display")},htmlBuilder:kd,mathmlBuilder:Ad});Cd({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Ure,htmlBuilder:kd,mathmlBuilder:Ad});Cd({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){GC(e);var t={autoTag:DM(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return W0(e.parser,t,"display")},htmlBuilder:kd,mathmlBuilder:Ad});Cd({type:"array",names:["CD"],props:{numArgs:0},handler(e){return GC(e),zGe(e.parser)},htmlBuilder:kd,mathmlBuilder:Ad});le("\\nonumber","\\gdef\\@eqnsw{0}");le("\\notag","\\nonumber");Xt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new It(e.funcName+" valid only within array environment")}});var eU=zre;Xt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:n,funcName:r}=e,s=t[0];if(s.type!=="ordgroup")throw new It("Invalid environment name",s);for(var o="",i=0;i<s.body.length;++i)o+=yr(s.body[i],"textord").text;if(r==="\\begin"){if(!eU.hasOwnProperty(o))throw new It("No such environment: "+o,s);var a=eU[o],{args:l,optArgs:c}=n.parseArguments("\\begin{"+o+"}",a),u={mode:n.mode,envName:o,parser:n},f=a.handler(u,l,c);n.expect("\\end",!1);var m=n.nextToken,g=yr(n.parseFunction(),"environment");if(g.name!==o)throw new It("Mismatch: \\begin{"+o+"} matched by \\end{"+g.name+"}",m);return f}return{type:"environment",mode:n.mode,name:o,nameGroup:s}}});var Hre=(e,t)=>{var n=e.font,r=t.withFont(n);return Kr(e.body,r)},Vre=(e,t)=>{var n=e.font,r=t.withFont(n);return Us(e.body,r)},tU={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Xt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=e4(t[0]),o=r;return o in tU&&(o=tU[o]),{type:"font",mode:n.mode,font:o.slice(1),body:s}},htmlBuilder:Hre,mathmlBuilder:Vre});Xt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:n}=e,r=t[0],s=is.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:VC(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:s}}});Xt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r,breakOnTokenText:s}=e,{mode:o}=n,i=n.parseExpression(!0,s),a="math"+r.slice(1);return{type:"font",mode:o,font:a,body:{type:"ordgroup",mode:n.mode,body:i}}},htmlBuilder:Hre,mathmlBuilder:Vre});var qre=(e,t)=>{var n=t;return e==="display"?n=n.id>=Fn.SCRIPT.id?n.text():Fn.DISPLAY:e==="text"&&n.size===Fn.DISPLAY.size?n=Fn.TEXT:e==="script"?n=Fn.SCRIPT:e==="scriptscript"&&(n=Fn.SCRIPTSCRIPT),n},LM=(e,t)=>{var n=qre(e.size,t.style),r=n.fracNum(),s=n.fracDen(),o;o=t.havingStyle(r);var i=Kr(e.numer,o,t);if(e.continued){var a=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;i.height=i.height<a?a:i.height,i.depth=i.depth<l?l:i.depth}o=t.havingStyle(s);var c=Kr(e.denom,o,t),u,f,m;e.hasBarLine?(e.barSize?(f=Ao(e.barSize,t),u=We.makeLineSpan("frac-line",t,f)):u=We.makeLineSpan("frac-line",t),f=u.height,m=u.height):(u=null,f=0,m=t.fontMetrics().defaultRuleThickness);var g,y,v;n.size===Fn.DISPLAY.size||e.size==="display"?(g=t.fontMetrics().num1,f>0?y=3*m:y=7*m,v=t.fontMetrics().denom1):(f>0?(g=t.fontMetrics().num2,y=m):(g=t.fontMetrics().num3,y=3*m),v=t.fontMetrics().denom2);var x;if(u){var T=t.fontMetrics().axisHeight;g-i.depth-(T+.5*f)<y&&(g+=y-(g-i.depth-(T+.5*f))),T-.5*f-(c.height-v)<y&&(v+=y-(T-.5*f-(c.height-v)));var k=-(T-.5*f);x=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:u,shift:k},{type:"elem",elem:i,shift:-g}]},t)}else{var E=g-i.depth-(c.height-v);E<y&&(g+=.5*(y-E),v+=.5*(y-E)),x=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:i,shift:-g}]},t)}o=t.havingStyle(n),x.height*=o.sizeMultiplier/t.sizeMultiplier,x.depth*=o.sizeMultiplier/t.sizeMultiplier;var I;n.size===Fn.DISPLAY.size?I=t.fontMetrics().delim1:n.size===Fn.SCRIPTSCRIPT.size?I=t.havingStyle(Fn.SCRIPT).fontMetrics().delim2:I=t.fontMetrics().delim2;var O,M;return e.leftDelim==null?O=Kx(t,["mopen"]):O=jf.customSizedDelim(e.leftDelim,I,!0,t.havingStyle(n),e.mode,["mopen"]),e.continued?M=We.makeSpan([]):e.rightDelim==null?M=Kx(t,["mclose"]):M=jf.customSizedDelim(e.rightDelim,I,!0,t.havingStyle(n),e.mode,["mclose"]),We.makeSpan(["mord"].concat(o.sizingClasses(t)),[O,We.makeSpan(["mfrac"],[x]),M],t)},$M=(e,t)=>{var n=new Ct.MathNode("mfrac",[Us(e.numer,t),Us(e.denom,t)]);if(!e.hasBarLine)n.setAttribute("linethickness","0px");else if(e.barSize){var r=Ao(e.barSize,t);n.setAttribute("linethickness",jt(r))}var s=qre(e.size,t.style);if(s.size!==t.style.size){n=new Ct.MathNode("mstyle",[n]);var o=s.size===Fn.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",o),n.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var i=[];if(e.leftDelim!=null){var a=new Ct.MathNode("mo",[new Ct.TextNode(e.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),i.push(a)}if(i.push(n),e.rightDelim!=null){var l=new Ct.MathNode("mo",[new Ct.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),i.push(l)}return kM(i)}return n};Xt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0],o=t[1],i,a=null,l=null,c="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,a="(",l=")";break;case"\\\\bracefrac":i=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":i=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:n.mode,continued:!1,numer:s,denom:o,hasBarLine:i,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:LM,mathmlBuilder:$M});Xt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0],o=t[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:s,denom:o,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Xt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:n,token:r}=e,s;switch(n){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:s,token:r}}});var nU=["display","text","script","scriptscript"],rU=function(t){var n=null;return t.length>0&&(n=t,n=n==="."?null:n),n};Xt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:n}=e,r=t[4],s=t[5],o=e4(t[0]),i=o.type==="atom"&&o.family==="open"?rU(o.text):null,a=e4(t[1]),l=a.type==="atom"&&a.family==="close"?rU(a.text):null,c=yr(t[2],"size"),u,f=null;c.isBlank?u=!0:(f=c.value,u=f.number>0);var m="auto",g=t[3];if(g.type==="ordgroup"){if(g.body.length>0){var y=yr(g.body[0],"textord");m=nU[Number(y.text)]}}else g=yr(g,"textord"),m=nU[Number(g.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:s,continued:!1,hasBarLine:u,barSize:f,leftDelim:i,rightDelim:l,size:m}},htmlBuilder:LM,mathmlBuilder:$M});Xt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:n,funcName:r,token:s}=e;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:yr(t[0],"size").value,token:s}}});Xt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0],o=Rqe(yr(t[1],"infix").size),i=t[2],a=o.number>0;return{type:"genfrac",mode:n.mode,numer:s,denom:i,continued:!1,hasBarLine:a,barSize:o,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:LM,mathmlBuilder:$M});var Gre=(e,t)=>{var n=t.style,r,s;e.type==="supsub"?(r=e.sup?Kr(e.sup,t.havingStyle(n.sup()),t):Kr(e.sub,t.havingStyle(n.sub()),t),s=yr(e.base,"horizBrace")):s=yr(e,"horizBrace");var o=Kr(s.base,t.havingBaseStyle(Fn.DISPLAY)),i=Zf.svgSpan(s,t),a;if(s.isOver?(a=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:i}]},t),a.children[0].children[0].children[1].classes.push("svg-align")):(a=We.makeVList({positionType:"bottom",positionData:o.depth+.1+i.height,children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:o}]},t),a.children[0].children[0].children[0].classes.push("svg-align")),r){var l=We.makeSpan(["mord",s.isOver?"mover":"munder"],[a],t);s.isOver?a=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},t):a=We.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return We.makeSpan(["mord",s.isOver?"mover":"munder"],[a],t)},tWe=(e,t)=>{var n=Zf.mathMLnode(e.label);return new Ct.MathNode(e.isOver?"mover":"munder",[Us(e.base,t),n])};Xt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:t[0]}},htmlBuilder:Gre,mathmlBuilder:tWe});Xt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[1],s=yr(t[0],"url").url;return n.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:n.mode,href:s,body:ei(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var n=Ii(e.body,t,!1);return We.makeAnchor(e.href,[],n,t)},mathmlBuilder:(e,t)=>{var n=R0(e.body,t);return n instanceof ql||(n=new ql("mrow",[n])),n.setAttribute("href",e.href),n}});Xt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=yr(t[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var s=[],o=0;o<r.length;o++){var i=r[o];i==="~"&&(i="\\textasciitilde"),s.push({type:"textord",mode:"text",text:i})}var a={type:"text",mode:n.mode,font:"\\texttt",body:s};return{type:"href",mode:n.mode,href:r,body:ei(a)}}});Xt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:n}=e;return{type:"hbox",mode:n.mode,body:ei(t[0])}},htmlBuilder(e,t){var n=Ii(e.body,t,!1);return We.makeFragment(n)},mathmlBuilder(e,t){return new Ct.MathNode("mrow",wl(e.body,t))}});Xt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r,token:s}=e,o=yr(t[0],"raw").string,i=t[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(r){case"\\htmlClass":l.class=o,a={command:"\\htmlClass",class:o};break;case"\\htmlId":l.id=o,a={command:"\\htmlId",id:o};break;case"\\htmlStyle":l.style=o,a={command:"\\htmlStyle",style:o};break;case"\\htmlData":{for(var c=o.split(","),u=0;u<c.length;u++){var f=c[u],m=f.indexOf("=");if(m<0)throw new It("\\htmlData key/value '"+f+"' missing equals sign");var g=f.slice(0,m),y=f.slice(m+1);l["data-"+g.trim()]=y}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(a)?{type:"html",mode:n.mode,attributes:l,body:ei(i)}:n.formatUnsupportedCmd(r)},htmlBuilder:(e,t)=>{var n=Ii(e.body,t,!1),r=["enclosing"];e.attributes.class&&r.push(...e.attributes.class.trim().split(/\s+/));var s=We.makeSpan(r,n,t);for(var o in e.attributes)o!=="class"&&e.attributes.hasOwnProperty(o)&&s.setAttribute(o,e.attributes[o]);return s},mathmlBuilder:(e,t)=>R0(e.body,t)});Xt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"htmlmathml",mode:n.mode,html:ei(t[0]),mathml:ei(t[1])}},htmlBuilder:(e,t)=>{var n=Ii(e.html,t,!1);return We.makeFragment(n)},mathmlBuilder:(e,t)=>R0(e.mathml,t)});var hA=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!n)throw new It("Invalid size: '"+t+"' in \\includegraphics");var r={number:+(n[1]+n[2]),unit:n[3]};if(!dre(r))throw new It("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};Xt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,n)=>{var{parser:r}=e,s={number:0,unit:"em"},o={number:.9,unit:"em"},i={number:0,unit:"em"},a="";if(n[0])for(var l=yr(n[0],"raw").string,c=l.split(","),u=0;u<c.length;u++){var f=c[u].split("=");if(f.length===2){var m=f[1].trim();switch(f[0].trim()){case"alt":a=m;break;case"width":s=hA(m);break;case"height":o=hA(m);break;case"totalheight":i=hA(m);break;default:throw new It("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var g=yr(t[0],"url").url;return a===""&&(a=g,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:r.mode,alt:a,width:s,height:o,totalheight:i,src:g}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var n=Ao(e.height,t),r=0;e.totalheight.number>0&&(r=Ao(e.totalheight,t)-n);var s=0;e.width.number>0&&(s=Ao(e.width,t));var o={height:jt(n+r)};s>0&&(o.width=jt(s)),r>0&&(o.verticalAlign=jt(-r));var i=new tGe(e.src,e.alt,o);return i.height=n,i.depth=r,i},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mglyph",[]);n.setAttribute("alt",e.alt);var r=Ao(e.height,t),s=0;if(e.totalheight.number>0&&(s=Ao(e.totalheight,t)-r,n.setAttribute("valign",jt(-s))),n.setAttribute("height",jt(r+s)),e.width.number>0){var o=Ao(e.width,t);n.setAttribute("width",jt(o))}return n.setAttribute("src",e.src),n}});Xt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,s=yr(t[0],"size");if(n.settings.strict){var o=r[1]==="m",i=s.value.unit==="mu";o?(i||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+s.value.unit+" units")),n.mode!=="math"&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):i&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:s.value}},htmlBuilder(e,t){return We.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var n=Ao(e.dimension,t);return new Ct.SpaceNode(n)}});Xt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:s}},htmlBuilder:(e,t)=>{var n;e.alignment==="clap"?(n=We.makeSpan([],[Kr(e.body,t)]),n=We.makeSpan(["inner"],[n],t)):n=We.makeSpan(["inner"],[Kr(e.body,t)]);var r=We.makeSpan(["fix"],[]),s=We.makeSpan([e.alignment],[n,r],t),o=We.makeSpan(["strut"]);return o.style.height=jt(s.height+s.depth),s.depth&&(o.style.verticalAlign=jt(-s.depth)),s.children.unshift(o),s=We.makeSpan(["thinbox"],[s],t),We.makeSpan(["mord","vbox"],[s],t)},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mpadded",[Us(e.body,t)]);if(e.alignment!=="rlap"){var r=e.alignment==="llap"?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}});Xt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:n,parser:r}=e,s=r.mode;r.switchMode("math");var o=n==="\\("?"\\)":"$",i=r.parseExpression(!1,o);return r.expect(o),r.switchMode(s),{type:"styling",mode:r.mode,style:"text",body:i}}});Xt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new It("Mismatched "+e.funcName)}});var sU=(e,t)=>{switch(t.style.size){case Fn.DISPLAY.size:return e.display;case Fn.TEXT.size:return e.text;case Fn.SCRIPT.size:return e.script;case Fn.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};Xt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"mathchoice",mode:n.mode,display:ei(t[0]),text:ei(t[1]),script:ei(t[2]),scriptscript:ei(t[3])}},htmlBuilder:(e,t)=>{var n=sU(e,t),r=Ii(n,t,!1);return We.makeFragment(r)},mathmlBuilder:(e,t)=>{var n=sU(e,t);return R0(n,t)}});var Wre=(e,t,n,r,s,o,i)=>{e=We.makeSpan([],[e]);var a=n&&is.isCharacterBox(n),l,c;if(t){var u=Kr(t,r.havingStyle(s.sup()),r);c={elem:u,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-u.depth)}}if(n){var f=Kr(n,r.havingStyle(s.sub()),r);l={elem:f,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-f.height)}}var m;if(c&&l){var g=r.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+e.depth+i;m=We.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:jt(-o)},{type:"kern",size:l.kern},{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:jt(o)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(l){var y=e.height-i;m=We.makeVList({positionType:"top",positionData:y,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:jt(-o)},{type:"kern",size:l.kern},{type:"elem",elem:e}]},r)}else if(c){var v=e.depth+i;m=We.makeVList({positionType:"bottom",positionData:v,children:[{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:jt(o)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return e;var x=[m];if(l&&o!==0&&!a){var E=We.makeSpan(["mspace"],[],r);E.style.marginRight=jt(o),x.unshift(E)}return We.makeSpan(["mop","op-limits"],x,r)},Yre=["\\smallint"],Db=(e,t)=>{var n,r,s=!1,o;e.type==="supsub"?(n=e.sup,r=e.sub,o=yr(e.base,"op"),s=!0):o=yr(e,"op");var i=t.style,a=!1;i.size===Fn.DISPLAY.size&&o.symbol&&!Yre.includes(o.name)&&(a=!0);var l;if(o.symbol){var c=a?"Size2-Regular":"Size1-Regular",u="";if((o.name==="\\oiint"||o.name==="\\oiiint")&&(u=o.name.slice(1),o.name=u==="oiint"?"\\iint":"\\iiint"),l=We.makeSymbol(o.name,c,"math",t,["mop","op-symbol",a?"large-op":"small-op"]),u.length>0){var f=l.italic,m=We.staticSvg(u+"Size"+(a?"2":"1"),t);l=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:m,shift:a?.08:0}]},t),o.name="\\"+u,l.classes.unshift("mop"),l.italic=f}}else if(o.body){var g=Ii(o.body,t,!0);g.length===1&&g[0]instanceof Pc?(l=g[0],l.classes[0]="mop"):l=We.makeSpan(["mop"],g,t)}else{for(var y=[],v=1;v<o.name.length;v++)y.push(We.mathsym(o.name[v],o.mode,t));l=We.makeSpan(["mop"],y,t)}var x=0,E=0;return(l instanceof Pc||o.name==="\\oiint"||o.name==="\\oiiint")&&!o.suppressBaseShift&&(x=(l.height-l.depth)/2-t.fontMetrics().axisHeight,E=l.italic),s?Wre(l,n,r,t,i,E,x):(x&&(l.style.position="relative",l.style.top=jt(x)),l)},Uw=(e,t)=>{var n;if(e.symbol)n=new ql("mo",[Lc(e.name,e.mode)]),Yre.includes(e.name)&&n.setAttribute("largeop","false");else if(e.body)n=new ql("mo",wl(e.body,t));else{n=new ql("mi",[new gd(e.name.slice(1))]);var r=new ql("mo",[Lc("","text")]);e.parentIsSupSub?n=new ql("mrow",[n,r]):n=Ere([n,r])}return n},nWe={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Xt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=r;return s.length===1&&(s=nWe[s]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:Db,mathmlBuilder:Uw});Xt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ei(r)}},htmlBuilder:Db,mathmlBuilder:Uw});var rWe={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Xt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:Db,mathmlBuilder:Uw});Xt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:Db,mathmlBuilder:Uw});Xt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(e){var{parser:t,funcName:n}=e,r=n;return r.length===1&&(r=rWe[r]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:Db,mathmlBuilder:Uw});var Kre=(e,t)=>{var n,r,s=!1,o;e.type==="supsub"?(n=e.sup,r=e.sub,o=yr(e.base,"operatorname"),s=!0):o=yr(e,"operatorname");var i;if(o.body.length>0){for(var a=o.body.map(f=>{var m=f.text;return typeof m=="string"?{type:"textord",mode:f.mode,text:m}:f}),l=Ii(a,t.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof Pc&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=We.makeSpan(["mop"],l,t)}else i=We.makeSpan(["mop"],[],t);return s?Wre(i,n,r,t,t.style,0,0):i},sWe=(e,t)=>{for(var n=wl(e.body,t.withFont("mathrm")),r=!0,s=0;s<n.length;s++){var o=n[s];if(!(o instanceof Ct.SpaceNode))if(o instanceof Ct.MathNode)switch(o.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var i=o.children[0];o.children.length===1&&i instanceof Ct.TextNode?i.text=i.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var a=n.map(u=>u.toText()).join("");n=[new Ct.TextNode(a)]}var l=new Ct.MathNode("mi",n);l.setAttribute("mathvariant","normal");var c=new Ct.MathNode("mo",[Lc("","text")]);return e.parentIsSupSub?new Ct.MathNode("mrow",[l,c]):Ct.newDocumentFragment([l,c])};Xt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0];return{type:"operatorname",mode:n.mode,body:ei(s),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Kre,mathmlBuilder:sWe});le("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");zm({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?We.makeFragment(Ii(e.body,t,!1)):We.makeSpan(["mord"],Ii(e.body,t,!0),t)},mathmlBuilder(e,t){return R0(e.body,t,!0)}});Xt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:n}=e,r=t[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(e,t){var n=Kr(e.body,t.havingCrampedStyle()),r=We.makeLineSpan("overline-line",t),s=t.fontMetrics().defaultRuleThickness,o=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:r},{type:"kern",size:s}]},t);return We.makeSpan(["mord","overline"],[o],t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[new Ct.TextNode("")]);n.setAttribute("stretchy","true");var r=new Ct.MathNode("mover",[Us(e.body,t),n]);return r.setAttribute("accent","true"),r}});Xt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"phantom",mode:n.mode,body:ei(r)}},htmlBuilder:(e,t)=>{var n=Ii(e.body,t.withPhantom(),!1);return We.makeFragment(n)},mathmlBuilder:(e,t)=>{var n=wl(e.body,t);return new Ct.MathNode("mphantom",n)}});Xt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=We.makeSpan([],[Kr(e.body,t.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t),We.makeSpan(["mord"],[n],t)},mathmlBuilder:(e,t)=>{var n=wl(ei(e.body),t),r=new Ct.MathNode("mphantom",n),s=new Ct.MathNode("mpadded",[r]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});Xt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=We.makeSpan(["inner"],[Kr(e.body,t.withPhantom())]),r=We.makeSpan(["fix"],[]);return We.makeSpan(["mord","rlap"],[n,r],t)},mathmlBuilder:(e,t)=>{var n=wl(ei(e.body),t),r=new Ct.MathNode("mphantom",n),s=new Ct.MathNode("mpadded",[r]);return s.setAttribute("width","0px"),s}});Xt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e,r=yr(t[0],"size").value,s=t[1];return{type:"raisebox",mode:n.mode,dy:r,body:s}},htmlBuilder(e,t){var n=Kr(e.body,t),r=Ao(e.dy,t);return We.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mpadded",[Us(e.body,t)]),r=e.dy.number+e.dy.unit;return n.setAttribute("voffset",r),n}});Xt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});Xt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,n){var{parser:r}=e,s=n[0],o=yr(t[0],"size"),i=yr(t[1],"size");return{type:"rule",mode:r.mode,shift:s&&yr(s,"size").value,width:o.value,height:i.value}},htmlBuilder(e,t){var n=We.makeSpan(["mord","rule"],[],t),r=Ao(e.width,t),s=Ao(e.height,t),o=e.shift?Ao(e.shift,t):0;return n.style.borderRightWidth=jt(r),n.style.borderTopWidth=jt(s),n.style.bottom=jt(o),n.width=r,n.height=s+o,n.depth=-o,n.maxFontSize=s*1.125*t.sizeMultiplier,n},mathmlBuilder(e,t){var n=Ao(e.width,t),r=Ao(e.height,t),s=e.shift?Ao(e.shift,t):0,o=t.color&&t.getColor()||"black",i=new Ct.MathNode("mspace");i.setAttribute("mathbackground",o),i.setAttribute("width",jt(n)),i.setAttribute("height",jt(r));var a=new Ct.MathNode("mpadded",[i]);return s>=0?a.setAttribute("height",jt(s)):(a.setAttribute("height",jt(s)),a.setAttribute("depth",jt(-s))),a.setAttribute("voffset",jt(s)),a}});function Zre(e,t,n){for(var r=Ii(e,t,!1),s=t.sizeMultiplier/n.sizeMultiplier,o=0;o<r.length;o++){var i=r[o].classes.indexOf("sizing");i<0?Array.prototype.push.apply(r[o].classes,t.sizingClasses(n)):r[o].classes[i+1]==="reset-size"+t.size&&(r[o].classes[i+1]="reset-size"+n.size),r[o].height*=s,r[o].depth*=s}return We.makeFragment(r)}var oU=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],oWe=(e,t)=>{var n=t.havingSize(e.size);return Zre(e.body,n,t)};Xt({type:"sizing",names:oU,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:n,funcName:r,parser:s}=e,o=s.parseExpression(!1,n);return{type:"sizing",mode:s.mode,size:oU.indexOf(r)+1,body:o}},htmlBuilder:oWe,mathmlBuilder:(e,t)=>{var n=t.havingSize(e.size),r=wl(e.body,n),s=new Ct.MathNode("mstyle",r);return s.setAttribute("mathsize",jt(n.sizeMultiplier)),s}});Xt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,n)=>{var{parser:r}=e,s=!1,o=!1,i=n[0]&&yr(n[0],"ordgroup");if(i)for(var a="",l=0;l<i.body.length;++l){var c=i.body[l];if(a=c.text,a==="t")s=!0;else if(a==="b")o=!0;else{s=!1,o=!1;break}}else s=!0,o=!0;var u=t[0];return{type:"smash",mode:r.mode,body:u,smashHeight:s,smashDepth:o}},htmlBuilder:(e,t)=>{var n=We.makeSpan([],[Kr(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return n;if(e.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(e.smashDepth&&(n.depth=0,n.children))for(var s=0;s<n.children.length;s++)n.children[s].depth=0;var o=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t);return We.makeSpan(["mord"],[o],t)},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mpadded",[Us(e.body,t)]);return e.smashHeight&&n.setAttribute("height","0px"),e.smashDepth&&n.setAttribute("depth","0px"),n}});Xt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r}=e,s=n[0],o=t[0];return{type:"sqrt",mode:r.mode,body:o,index:s}},htmlBuilder(e,t){var n=Kr(e.body,t.havingCrampedStyle());n.height===0&&(n.height=t.fontMetrics().xHeight),n=We.wrapFragment(n,t);var r=t.fontMetrics(),s=r.defaultRuleThickness,o=s;t.style.id<Fn.TEXT.id&&(o=t.fontMetrics().xHeight);var i=s+o/4,a=n.height+n.depth+i+s,{span:l,ruleWidth:c,advanceWidth:u}=jf.sqrtImage(a,t),f=l.height-c;f>n.height+n.depth+i&&(i=(i+f-n.height-n.depth)/2);var m=l.height-n.height-i-c;n.style.paddingLeft=jt(u);var g=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+m)},{type:"elem",elem:l},{type:"kern",size:c}]},t);if(e.index){var y=t.havingStyle(Fn.SCRIPTSCRIPT),v=Kr(e.index,y,t),x=.6*(g.height-g.depth),E=We.makeVList({positionType:"shift",positionData:-x,children:[{type:"elem",elem:v}]},t),T=We.makeSpan(["root"],[E]);return We.makeSpan(["mord","sqrt"],[T,g],t)}else return We.makeSpan(["mord","sqrt"],[g],t)},mathmlBuilder(e,t){var{body:n,index:r}=e;return r?new Ct.MathNode("mroot",[Us(n,t),Us(r,t)]):new Ct.MathNode("msqrt",[Us(n,t)])}});var iU={display:Fn.DISPLAY,text:Fn.TEXT,script:Fn.SCRIPT,scriptscript:Fn.SCRIPTSCRIPT};Xt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:n,funcName:r,parser:s}=e,o=s.parseExpression(!0,n),i=r.slice(1,r.length-5);return{type:"styling",mode:s.mode,style:i,body:o}},htmlBuilder(e,t){var n=iU[e.style],r=t.havingStyle(n).withFont("");return Zre(e.body,r,t)},mathmlBuilder(e,t){var n=iU[e.style],r=t.havingStyle(n),s=wl(e.body,r),o=new Ct.MathNode("mstyle",s),i={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=i[e.style];return o.setAttribute("scriptlevel",a[0]),o.setAttribute("displaystyle",a[1]),o}});var iWe=function(t,n){var r=t.base;if(r)if(r.type==="op"){var s=r.limits&&(n.style.size===Fn.DISPLAY.size||r.alwaysHandleSupSub);return s?Db:null}else if(r.type==="operatorname"){var o=r.alwaysHandleSupSub&&(n.style.size===Fn.DISPLAY.size||r.limits);return o?Kre:null}else{if(r.type==="accent")return is.isCharacterBox(r.base)?IM:null;if(r.type==="horizBrace"){var i=!t.sub;return i===r.isOver?Gre:null}else return null}else return null};zm({type:"supsub",htmlBuilder(e,t){var n=iWe(e,t);if(n)return n(e,t);var{base:r,sup:s,sub:o}=e,i=Kr(r,t),a,l,c=t.fontMetrics(),u=0,f=0,m=r&&is.isCharacterBox(r);if(s){var g=t.havingStyle(t.style.sup());a=Kr(s,g,t),m||(u=i.height-g.fontMetrics().supDrop*g.sizeMultiplier/t.sizeMultiplier)}if(o){var y=t.havingStyle(t.style.sub());l=Kr(o,y,t),m||(f=i.depth+y.fontMetrics().subDrop*y.sizeMultiplier/t.sizeMultiplier)}var v;t.style===Fn.DISPLAY?v=c.sup1:t.style.cramped?v=c.sup3:v=c.sup2;var x=t.sizeMultiplier,E=jt(.5/c.ptPerEm/x),T=null;if(l){var k=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(i instanceof Pc||k)&&(T=jt(-i.italic))}var I;if(a&&l){u=Math.max(u,v,a.depth+.25*c.xHeight),f=Math.max(f,c.sub2);var O=c.defaultRuleThickness,M=4*O;if(u-a.depth-(l.height-f)<M){f=M-(u-a.depth)+l.height;var P=.8*c.xHeight-(u-a.depth);P>0&&(u+=P,f-=P)}var j=[{type:"elem",elem:l,shift:f,marginRight:E,marginLeft:T},{type:"elem",elem:a,shift:-u,marginRight:E}];I=We.makeVList({positionType:"individualShift",children:j},t)}else if(l){f=Math.max(f,c.sub1,l.height-.8*c.xHeight);var V=[{type:"elem",elem:l,marginLeft:T,marginRight:E}];I=We.makeVList({positionType:"shift",positionData:f,children:V},t)}else if(a)u=Math.max(u,v,a.depth+.25*c.xHeight),I=We.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:a,marginRight:E}]},t);else throw new Error("supsub must have either sup or sub.");var U=yI(i,"right")||"mord";return We.makeSpan([U],[i,We.makeSpan(["msupsub"],[I])],t)},mathmlBuilder(e,t){var n=!1,r,s;e.base&&e.base.type==="horizBrace"&&(s=!!e.sup,s===e.base.isOver&&(n=!0,r=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var o=[Us(e.base,t)];e.sub&&o.push(Us(e.sub,t)),e.sup&&o.push(Us(e.sup,t));var i;if(n)i=r?"mover":"munder";else if(e.sub)if(e.sup){var c=e.base;c&&c.type==="op"&&c.limits&&t.style===Fn.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(t.style===Fn.DISPLAY||c.limits)?i="munderover":i="msubsup"}else{var l=e.base;l&&l.type==="op"&&l.limits&&(t.style===Fn.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||t.style===Fn.DISPLAY)?i="munder":i="msub"}else{var a=e.base;a&&a.type==="op"&&a.limits&&(t.style===Fn.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||t.style===Fn.DISPLAY)?i="mover":i="msup"}return new Ct.MathNode(i,o)}});zm({type:"atom",htmlBuilder(e,t){return We.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[Lc(e.text,e.mode)]);if(e.family==="bin"){var r=AM(e,t);r==="bold-italic"&&n.setAttribute("mathvariant",r)}else e.family==="punct"?n.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&n.setAttribute("stretchy","false");return n}});var Jre={mi:"italic",mn:"normal",mtext:"normal"};zm({type:"mathord",htmlBuilder(e,t){return We.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var n=new Ct.MathNode("mi",[Lc(e.text,e.mode,t)]),r=AM(e,t)||"italic";return r!==Jre[n.type]&&n.setAttribute("mathvariant",r),n}});zm({type:"textord",htmlBuilder(e,t){return We.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var n=Lc(e.text,e.mode,t),r=AM(e,t)||"normal",s;return e.mode==="text"?s=new Ct.MathNode("mtext",[n]):/[0-9]/.test(e.text)?s=new Ct.MathNode("mn",[n]):e.text==="\\prime"?s=new Ct.MathNode("mo",[n]):s=new Ct.MathNode("mi",[n]),r!==Jre[s.type]&&s.setAttribute("mathvariant",r),s}});var pA={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},mA={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};zm({type:"spacing",htmlBuilder(e,t){if(mA.hasOwnProperty(e.text)){var n=mA[e.text].className||"";if(e.mode==="text"){var r=We.makeOrd(e,t,"textord");return r.classes.push(n),r}else return We.makeSpan(["mspace",n],[We.mathsym(e.text,e.mode,t)],t)}else{if(pA.hasOwnProperty(e.text))return We.makeSpan(["mspace",pA[e.text]],[],t);throw new It('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var n;if(mA.hasOwnProperty(e.text))n=new Ct.MathNode("mtext",[new Ct.TextNode("")]);else{if(pA.hasOwnProperty(e.text))return new Ct.MathNode("mspace");throw new It('Unknown type of space "'+e.text+'"')}return n}});var aU=()=>{var e=new Ct.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};zm({type:"tag",mathmlBuilder(e,t){var n=new Ct.MathNode("mtable",[new Ct.MathNode("mtr",[aU(),new Ct.MathNode("mtd",[R0(e.body,t)]),aU(),new Ct.MathNode("mtd",[R0(e.tag,t)])])]);return n.setAttribute("width","100%"),n}});var lU={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},cU={"\\textbf":"textbf","\\textmd":"textmd"},aWe={"\\textit":"textit","\\textup":"textup"},uU=(e,t)=>{var n=e.font;if(n){if(lU[n])return t.withTextFontFamily(lU[n]);if(cU[n])return t.withTextFontWeight(cU[n]);if(n==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(aWe[n])};Xt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,s=t[0];return{type:"text",mode:n.mode,body:ei(s),font:r}},htmlBuilder(e,t){var n=uU(e,t),r=Ii(e.body,n,!0);return We.makeSpan(["mord","text"],r,n)},mathmlBuilder(e,t){var n=uU(e,t);return R0(e.body,n)}});Xt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"underline",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=Kr(e.body,t),r=We.makeLineSpan("underline-line",t),s=t.fontMetrics().defaultRuleThickness,o=We.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:s},{type:"elem",elem:r},{type:"kern",size:3*s},{type:"elem",elem:n}]},t);return We.makeSpan(["mord","underline"],[o],t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[new Ct.TextNode("")]);n.setAttribute("stretchy","true");var r=new Ct.MathNode("munder",[Us(e.body,t),n]);return r.setAttribute("accentunder","true"),r}});Xt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"vcenter",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=Kr(e.body,t),r=t.fontMetrics().axisHeight,s=.5*(n.height-r-(n.depth+r));return We.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:n}]},t)},mathmlBuilder(e,t){return new Ct.MathNode("mpadded",[Us(e.body,t)],["vcenter"])}});Xt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,n){throw new It("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var n=dU(e),r=[],s=t.havingStyle(t.style.text()),o=0;o<n.length;o++){var i=n[o];i==="~"&&(i="\\textasciitilde"),r.push(We.makeSymbol(i,"Typewriter-Regular",e.mode,s,["mord","texttt"]))}return We.makeSpan(["mord","text"].concat(s.sizingClasses(t)),We.tryCombineChars(r),s)},mathmlBuilder(e,t){var n=new Ct.TextNode(dU(e)),r=new Ct.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var dU=e=>e.body.replace(/ /g,e.star?"":""),c0=xre,Xre=`[ \r
	]`,lWe="\\\\[a-zA-Z@]+",cWe="\\\\[^\uD800-\uDFFF]",uWe="("+lWe+")"+Xre+"*",dWe=`\\\\(
|[ \r	]+
?)[ \r	]*`,EI="[-]",fWe=new RegExp(EI+"+$"),hWe="("+Xre+"+)|"+(dWe+"|")+"([!-\\[\\]---]"+(EI+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(EI+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+uWe)+("|"+cWe+")");class fU{constructor(t,n){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=n,this.tokenRegex=new RegExp(hWe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,n){this.catcodes[t]=n}lex(){var t=this.input,n=this.tokenRegex.lastIndex;if(n===t.length)return new Kl("EOF",new cl(this,n,n));var r=this.tokenRegex.exec(t);if(r===null||r.index!==n)throw new It("Unexpected character: '"+t[n]+"'",new Kl(t[n],new cl(this,n,n+1)));var s=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[s]===14){var o=t.indexOf(`
`,this.tokenRegex.lastIndex);return o===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=o+1,this.lex()}return new Kl(s,new cl(this,n,this.tokenRegex.lastIndex))}}class pWe{constructor(t,n){t===void 0&&(t={}),n===void 0&&(n={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=n,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new It("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var n in t)t.hasOwnProperty(n)&&(t[n]==null?delete this.current[n]:this.current[n]=t[n])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,n,r){if(r===void 0&&(r=!1),r){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=n)}else{var o=this.undefStack[this.undefStack.length-1];o&&!o.hasOwnProperty(t)&&(o[t]=this.current[t])}n==null?delete this.current[t]:this.current[t]=n}}var mWe=jre;le("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});le("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});le("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});le("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});le("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var n=e.future();return t[0].length===1&&t[0][0].text===n.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});le("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");le("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var hU={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};le("\\char",function(e){var t=e.popToken(),n,r="";if(t.text==="'")n=8,t=e.popToken();else if(t.text==='"')n=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")r=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new It("\\char` missing argument");r=t.text.charCodeAt(0)}else n=10;if(n){if(r=hU[t.text],r==null||r>=n)throw new It("Invalid base-"+n+" digit "+t.text);for(var s;(s=hU[e.future().text])!=null&&s<n;)r*=n,r+=s,e.popToken()}return"\\@char{"+r+"}"});var FM=(e,t,n,r)=>{var s=e.consumeArg().tokens;if(s.length!==1)throw new It("\\newcommand's first argument must be a macro name");var o=s[0].text,i=e.isDefined(o);if(i&&!t)throw new It("\\newcommand{"+o+"} attempting to redefine "+(o+"; use \\renewcommand"));if(!i&&!n)throw new It("\\renewcommand{"+o+"} when command "+o+" does not yet exist; use \\newcommand");var a=0;if(s=e.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var l="",c=e.expandNextToken();c.text!=="]"&&c.text!=="EOF";)l+=c.text,c=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new It("Invalid number of arguments: "+l);a=parseInt(l),s=e.consumeArg().tokens}return i&&r||e.macros.set(o,{tokens:s,numArgs:a}),""};le("\\newcommand",e=>FM(e,!1,!0,!1));le("\\renewcommand",e=>FM(e,!0,!1,!1));le("\\providecommand",e=>FM(e,!0,!0,!0));le("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(n=>n.text).join("")),""});le("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(n=>n.text).join("")),""});le("\\show",e=>{var t=e.popToken(),n=t.text;return console.log(t,e.macros.get(n),c0[n],Js.math[n],Js.text[n]),""});le("\\bgroup","{");le("\\egroup","}");le("~","\\nobreakspace");le("\\lq","`");le("\\rq","'");le("\\aa","\\r a");le("\\AA","\\r A");le("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");le("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");le("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");le("","\\mathscr{B}");le("","\\mathscr{E}");le("","\\mathscr{F}");le("","\\mathscr{H}");le("","\\mathscr{I}");le("","\\mathscr{L}");le("","\\mathscr{M}");le("","\\mathscr{R}");le("","\\mathfrak{C}");le("","\\mathfrak{H}");le("","\\mathfrak{Z}");le("\\Bbbk","\\Bbb{k}");le("","\\cdotp");le("\\llap","\\mathllap{\\textrm{#1}}");le("\\rlap","\\mathrlap{\\textrm{#1}}");le("\\clap","\\mathclap{\\textrm{#1}}");le("\\mathstrut","\\vphantom{(}");le("\\underbar","\\underline{\\text{#1}}");le("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');le("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");le("\\ne","\\neq");le("","\\neq");le("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");le("","\\notin");le("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");le("","\\perp");le("","\\mathclose{!\\mkern-0.8mu!}");le("","\\notni");le("","\\ulcorner");le("","\\urcorner");le("","\\llcorner");le("","\\lrcorner");le("","\\copyright");le("","\\textregistered");le("","\\textregistered");le("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');le("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');le("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');le("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');le("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");le("","\\vdots");le("\\varGamma","\\mathit{\\Gamma}");le("\\varDelta","\\mathit{\\Delta}");le("\\varTheta","\\mathit{\\Theta}");le("\\varLambda","\\mathit{\\Lambda}");le("\\varXi","\\mathit{\\Xi}");le("\\varPi","\\mathit{\\Pi}");le("\\varSigma","\\mathit{\\Sigma}");le("\\varUpsilon","\\mathit{\\Upsilon}");le("\\varPhi","\\mathit{\\Phi}");le("\\varPsi","\\mathit{\\Psi}");le("\\varOmega","\\mathit{\\Omega}");le("\\substack","\\begin{subarray}{c}#1\\end{subarray}");le("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");le("\\boxed","\\fbox{$\\displaystyle{#1}$}");le("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");le("\\implies","\\DOTSB\\;\\Longrightarrow\\;");le("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");le("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");le("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var pU={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};le("\\dots",function(e){var t="\\dotso",n=e.expandAfterFuture().text;return n in pU?t=pU[n]:(n.slice(0,4)==="\\not"||n in Js.math&&["bin","rel"].includes(Js.math[n].group))&&(t="\\dotsb"),t});var BM={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};le("\\dotso",function(e){var t=e.future().text;return t in BM?"\\ldots\\,":"\\ldots"});le("\\dotsc",function(e){var t=e.future().text;return t in BM&&t!==","?"\\ldots\\,":"\\ldots"});le("\\cdots",function(e){var t=e.future().text;return t in BM?"\\@cdots\\,":"\\@cdots"});le("\\dotsb","\\cdots");le("\\dotsm","\\cdots");le("\\dotsi","\\!\\cdots");le("\\dotsx","\\ldots\\,");le("\\DOTSI","\\relax");le("\\DOTSB","\\relax");le("\\DOTSX","\\relax");le("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");le("\\,","\\tmspace+{3mu}{.1667em}");le("\\thinspace","\\,");le("\\>","\\mskip{4mu}");le("\\:","\\tmspace+{4mu}{.2222em}");le("\\medspace","\\:");le("\\;","\\tmspace+{5mu}{.2777em}");le("\\thickspace","\\;");le("\\!","\\tmspace-{3mu}{.1667em}");le("\\negthinspace","\\!");le("\\negmedspace","\\tmspace-{4mu}{.2222em}");le("\\negthickspace","\\tmspace-{5mu}{.277em}");le("\\enspace","\\kern.5em ");le("\\enskip","\\hskip.5em\\relax");le("\\quad","\\hskip1em\\relax");le("\\qquad","\\hskip2em\\relax");le("\\tag","\\@ifstar\\tag@literal\\tag@paren");le("\\tag@paren","\\tag@literal{({#1})}");le("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new It("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});le("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");le("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");le("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");le("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");le("\\newline","\\\\\\relax");le("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Qre=jt(md["Main-Regular"][84][1]-.7*md["Main-Regular"][65][1]);le("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Qre+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");le("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Qre+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");le("\\hspace","\\@ifstar\\@hspacer\\@hspace");le("\\@hspace","\\hskip #1\\relax");le("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");le("\\ordinarycolon",":");le("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");le("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');le("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');le("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');le("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');le("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');le("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');le("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');le("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');le("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');le("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');le("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');le("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');le("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');le("","\\dblcolon");le("","\\eqcolon");le("","\\coloneqq");le("","\\eqqcolon");le("","\\Coloneqq");le("\\ratio","\\vcentcolon");le("\\coloncolon","\\dblcolon");le("\\colonequals","\\coloneqq");le("\\coloncolonequals","\\Coloneqq");le("\\equalscolon","\\eqqcolon");le("\\equalscoloncolon","\\Eqqcolon");le("\\colonminus","\\coloneq");le("\\coloncolonminus","\\Coloneq");le("\\minuscolon","\\eqcolon");le("\\minuscoloncolon","\\Eqcolon");le("\\coloncolonapprox","\\Colonapprox");le("\\coloncolonsim","\\Colonsim");le("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");le("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");le("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");le("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");le("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");le("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");le("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");le("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");le("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");le("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");le("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");le("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");le("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");le("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");le("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");le("\\ngeqq","\\html@mathml{\\@ngeqq}{}");le("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");le("\\nleqq","\\html@mathml{\\@nleqq}{}");le("\\nleqslant","\\html@mathml{\\@nleqslant}{}");le("\\nshortmid","\\html@mathml{\\@nshortmid}{}");le("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");le("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");le("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");le("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");le("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");le("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");le("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");le("\\imath","\\html@mathml{\\@imath}{}");le("\\jmath","\\html@mathml{\\@jmath}{}");le("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");le("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");le("","\\llbracket");le("","\\rrbracket");le("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");le("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");le("","\\lBrace");le("","\\rBrace");le("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");le("","\\minuso");le("\\darr","\\downarrow");le("\\dArr","\\Downarrow");le("\\Darr","\\Downarrow");le("\\lang","\\langle");le("\\rang","\\rangle");le("\\uarr","\\uparrow");le("\\uArr","\\Uparrow");le("\\Uarr","\\Uparrow");le("\\N","\\mathbb{N}");le("\\R","\\mathbb{R}");le("\\Z","\\mathbb{Z}");le("\\alef","\\aleph");le("\\alefsym","\\aleph");le("\\Alpha","\\mathrm{A}");le("\\Beta","\\mathrm{B}");le("\\bull","\\bullet");le("\\Chi","\\mathrm{X}");le("\\clubs","\\clubsuit");le("\\cnums","\\mathbb{C}");le("\\Complex","\\mathbb{C}");le("\\Dagger","\\ddagger");le("\\diamonds","\\diamondsuit");le("\\empty","\\emptyset");le("\\Epsilon","\\mathrm{E}");le("\\Eta","\\mathrm{H}");le("\\exist","\\exists");le("\\harr","\\leftrightarrow");le("\\hArr","\\Leftrightarrow");le("\\Harr","\\Leftrightarrow");le("\\hearts","\\heartsuit");le("\\image","\\Im");le("\\infin","\\infty");le("\\Iota","\\mathrm{I}");le("\\isin","\\in");le("\\Kappa","\\mathrm{K}");le("\\larr","\\leftarrow");le("\\lArr","\\Leftarrow");le("\\Larr","\\Leftarrow");le("\\lrarr","\\leftrightarrow");le("\\lrArr","\\Leftrightarrow");le("\\Lrarr","\\Leftrightarrow");le("\\Mu","\\mathrm{M}");le("\\natnums","\\mathbb{N}");le("\\Nu","\\mathrm{N}");le("\\Omicron","\\mathrm{O}");le("\\plusmn","\\pm");le("\\rarr","\\rightarrow");le("\\rArr","\\Rightarrow");le("\\Rarr","\\Rightarrow");le("\\real","\\Re");le("\\reals","\\mathbb{R}");le("\\Reals","\\mathbb{R}");le("\\Rho","\\mathrm{P}");le("\\sdot","\\cdot");le("\\sect","\\S");le("\\spades","\\spadesuit");le("\\sub","\\subset");le("\\sube","\\subseteq");le("\\supe","\\supseteq");le("\\Tau","\\mathrm{T}");le("\\thetasym","\\vartheta");le("\\weierp","\\wp");le("\\Zeta","\\mathrm{Z}");le("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");le("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");le("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");le("\\bra","\\mathinner{\\langle{#1}|}");le("\\ket","\\mathinner{|{#1}\\rangle}");le("\\braket","\\mathinner{\\langle{#1}\\rangle}");le("\\Bra","\\left\\langle#1\\right|");le("\\Ket","\\left|#1\\right\\rangle");var ese=e=>t=>{var n=t.consumeArg().tokens,r=t.consumeArg().tokens,s=t.consumeArg().tokens,o=t.consumeArg().tokens,i=t.macros.get("|"),a=t.macros.get("\\|");t.macros.beginGroup();var l=f=>m=>{e&&(m.macros.set("|",i),s.length&&m.macros.set("\\|",a));var g=f;if(!f&&s.length){var y=m.future();y.text==="|"&&(m.popToken(),g=!0)}return{tokens:g?s:r,numArgs:0}};t.macros.set("|",l(!1)),s.length&&t.macros.set("\\|",l(!0));var c=t.consumeArg().tokens,u=t.expandTokens([...o,...c,...n]);return t.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};le("\\bra@ket",ese(!1));le("\\bra@set",ese(!0));le("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");le("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");le("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");le("\\angln","{\\angl n}");le("\\blue","\\textcolor{##6495ed}{#1}");le("\\orange","\\textcolor{##ffa500}{#1}");le("\\pink","\\textcolor{##ff00af}{#1}");le("\\red","\\textcolor{##df0030}{#1}");le("\\green","\\textcolor{##28ae7b}{#1}");le("\\gray","\\textcolor{gray}{#1}");le("\\purple","\\textcolor{##9d38bd}{#1}");le("\\blueA","\\textcolor{##ccfaff}{#1}");le("\\blueB","\\textcolor{##80f6ff}{#1}");le("\\blueC","\\textcolor{##63d9ea}{#1}");le("\\blueD","\\textcolor{##11accd}{#1}");le("\\blueE","\\textcolor{##0c7f99}{#1}");le("\\tealA","\\textcolor{##94fff5}{#1}");le("\\tealB","\\textcolor{##26edd5}{#1}");le("\\tealC","\\textcolor{##01d1c1}{#1}");le("\\tealD","\\textcolor{##01a995}{#1}");le("\\tealE","\\textcolor{##208170}{#1}");le("\\greenA","\\textcolor{##b6ffb0}{#1}");le("\\greenB","\\textcolor{##8af281}{#1}");le("\\greenC","\\textcolor{##74cf70}{#1}");le("\\greenD","\\textcolor{##1fab54}{#1}");le("\\greenE","\\textcolor{##0d923f}{#1}");le("\\goldA","\\textcolor{##ffd0a9}{#1}");le("\\goldB","\\textcolor{##ffbb71}{#1}");le("\\goldC","\\textcolor{##ff9c39}{#1}");le("\\goldD","\\textcolor{##e07d10}{#1}");le("\\goldE","\\textcolor{##a75a05}{#1}");le("\\redA","\\textcolor{##fca9a9}{#1}");le("\\redB","\\textcolor{##ff8482}{#1}");le("\\redC","\\textcolor{##f9685d}{#1}");le("\\redD","\\textcolor{##e84d39}{#1}");le("\\redE","\\textcolor{##bc2612}{#1}");le("\\maroonA","\\textcolor{##ffbde0}{#1}");le("\\maroonB","\\textcolor{##ff92c6}{#1}");le("\\maroonC","\\textcolor{##ed5fa6}{#1}");le("\\maroonD","\\textcolor{##ca337c}{#1}");le("\\maroonE","\\textcolor{##9e034e}{#1}");le("\\purpleA","\\textcolor{##ddd7ff}{#1}");le("\\purpleB","\\textcolor{##c6b9fc}{#1}");le("\\purpleC","\\textcolor{##aa87ff}{#1}");le("\\purpleD","\\textcolor{##7854ab}{#1}");le("\\purpleE","\\textcolor{##543b78}{#1}");le("\\mintA","\\textcolor{##f5f9e8}{#1}");le("\\mintB","\\textcolor{##edf2df}{#1}");le("\\mintC","\\textcolor{##e0e5cc}{#1}");le("\\grayA","\\textcolor{##f6f7f7}{#1}");le("\\grayB","\\textcolor{##f0f1f2}{#1}");le("\\grayC","\\textcolor{##e3e5e6}{#1}");le("\\grayD","\\textcolor{##d6d8da}{#1}");le("\\grayE","\\textcolor{##babec2}{#1}");le("\\grayF","\\textcolor{##888d93}{#1}");le("\\grayG","\\textcolor{##626569}{#1}");le("\\grayH","\\textcolor{##3b3e40}{#1}");le("\\grayI","\\textcolor{##21242c}{#1}");le("\\kaBlue","\\textcolor{##314453}{#1}");le("\\kaGreen","\\textcolor{##71B307}{#1}");var tse={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class gWe{constructor(t,n,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=n,this.expansionCount=0,this.feed(t),this.macros=new pWe(mWe,n.macros),this.mode=r,this.stack=[]}feed(t){this.lexer=new fU(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var n,r,s;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;n=this.popToken(),{tokens:s,end:r}=this.consumeArg(["]"])}else({tokens:s,start:n,end:r}=this.consumeArg());return this.pushToken(new Kl("EOF",r.loc)),this.pushTokens(s),new Kl("",cl.range(n,r))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var n=[],r=t&&t.length>0;r||this.consumeSpaces();var s=this.future(),o,i=0,a=0;do{if(o=this.popToken(),n.push(o),o.text==="{")++i;else if(o.text==="}"){if(--i,i===-1)throw new It("Extra }",o)}else if(o.text==="EOF")throw new It("Unexpected end of input in a macro argument, expected '"+(t&&r?t[a]:"}")+"'",o);if(t&&r)if((i===0||i===1&&t[a]==="{")&&o.text===t[a]){if(++a,a===t.length){n.splice(-a,a);break}}else a=0}while(i!==0||r);return s.text==="{"&&n[n.length-1].text==="}"&&(n.pop(),n.shift()),n.reverse(),{tokens:n,start:s,end:o}}consumeArgs(t,n){if(n){if(n.length!==t+1)throw new It("The length of delimiters doesn't match the number of args!");for(var r=n[0],s=0;s<r.length;s++){var o=this.popToken();if(r[s]!==o.text)throw new It("Use of the macro doesn't match its definition",o)}}for(var i=[],a=0;a<t;a++)i.push(this.consumeArg(n&&n[a+1]).tokens);return i}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new It("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var n=this.popToken(),r=n.text,s=n.noexpand?null:this._getExpansion(r);if(s==null||t&&s.unexpandable){if(t&&s==null&&r[0]==="\\"&&!this.isDefined(r))throw new It("Undefined control sequence: "+r);return this.pushToken(n),!1}this.countExpansion(1);var o=s.tokens,i=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){o=o.slice();for(var a=o.length-1;a>=0;--a){var l=o[a];if(l.text==="#"){if(a===0)throw new It("Incomplete placeholder at end of macro body",l);if(l=o[--a],l.text==="#")o.splice(a+1,1);else if(/^[1-9]$/.test(l.text))o.splice(a,2,...i[+l.text-1]);else throw new It("Not a valid argument number",l)}}}return this.pushTokens(o),o.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Kl(t)]):void 0}expandTokens(t){var n=[],r=this.stack.length;for(this.pushTokens(t);this.stack.length>r;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),n.push(s)}return this.countExpansion(n.length),n}expandMacroAsText(t){var n=this.expandMacro(t);return n&&n.map(r=>r.text).join("")}_getExpansion(t){var n=this.macros.get(t);if(n==null)return n;if(t.length===1){var r=this.lexer.catcodes[t];if(r!=null&&r!==13)return}var s=typeof n=="function"?n(this):n;if(typeof s=="string"){var o=0;if(s.indexOf("#")!==-1)for(var i=s.replace(/##/g,"");i.indexOf("#"+(o+1))!==-1;)++o;for(var a=new fU(s,this.settings),l=[],c=a.lex();c.text!=="EOF";)l.push(c),c=a.lex();l.reverse();var u={tokens:l,numArgs:o};return u}return s}isDefined(t){return this.macros.has(t)||c0.hasOwnProperty(t)||Js.math.hasOwnProperty(t)||Js.text.hasOwnProperty(t)||tse.hasOwnProperty(t)}isExpandable(t){var n=this.macros.get(t);return n!=null?typeof n=="string"||typeof n=="function"||!n.unexpandable:c0.hasOwnProperty(t)&&!c0[t].primitive}}var mU=/^[]/,o_=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),gA={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},gU={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};let nse=class rse{constructor(t,n){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new gWe(t,n,this.mode),this.settings=n,this.leftrightDepth=0}expect(t,n){if(n===void 0&&(n=!0),this.fetch().text!==t)throw new It("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());n&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var n=this.nextToken;this.consume(),this.gullet.pushToken(new Kl("}")),this.gullet.pushTokens(t);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=n,r}parseExpression(t,n){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(rse.endOfExpression.indexOf(s.text)!==-1||n&&s.text===n||t&&c0[s.text]&&c0[s.text].infix)break;var o=this.parseAtom(n);if(o){if(o.type==="internal")continue}else break;r.push(o)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(t){for(var n=-1,r,s=0;s<t.length;s++)if(t[s].type==="infix"){if(n!==-1)throw new It("only one infix operator per group",t[s].token);n=s,r=t[s].replaceWith}if(n!==-1&&r){var o,i,a=t.slice(0,n),l=t.slice(n+1);a.length===1&&a[0].type==="ordgroup"?o=a[0]:o={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?i=l[0]:i={type:"ordgroup",mode:this.mode,body:l};var c;return r==="\\\\abovefrac"?c=this.callFunction(r,[o,t[n],i],[]):c=this.callFunction(r,[o,i],[]),[c]}else return t}handleSupSubscript(t){var n=this.fetch(),r=n.text;this.consume(),this.consumeSpaces();var s;do{var o;s=this.parseGroup(t)}while(((o=s)==null?void 0:o.type)==="internal");if(!s)throw new It("Expected group after '"+r+"'",n);return s}formatUnsupportedCmd(t){for(var n=[],r=0;r<t.length;r++)n.push({type:"textord",mode:"text",text:t[r]});var s={type:"text",mode:this.mode,body:n},o={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return o}parseAtom(t){var n=this.parseGroup("atom",t);if((n==null?void 0:n.type)==="internal"||this.mode==="text")return n;for(var r,s;;){this.consumeSpaces();var o=this.fetch();if(o.text==="\\limits"||o.text==="\\nolimits"){if(n&&n.type==="op"){var i=o.text==="\\limits";n.limits=i,n.alwaysHandleSupSub=!0}else if(n&&n.type==="operatorname")n.alwaysHandleSupSub&&(n.limits=o.text==="\\limits");else throw new It("Limit controls must follow a math operator",o);this.consume()}else if(o.text==="^"){if(r)throw new It("Double superscript",o);r=this.handleSupSubscript("superscript")}else if(o.text==="_"){if(s)throw new It("Double subscript",o);s=this.handleSupSubscript("subscript")}else if(o.text==="'"){if(r)throw new It("Double superscript",o);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:l}}else if(o_[o.text]){var c=mU.test(o.text),u=[];for(u.push(new Kl(o_[o.text])),this.consume();;){var f=this.fetch().text;if(!o_[f]||mU.test(f)!==c)break;u.unshift(new Kl(o_[f])),this.consume()}var m=this.subparse(u);c?s={type:"ordgroup",mode:"math",body:m}:r={type:"ordgroup",mode:"math",body:m}}else break}return r||s?{type:"supsub",mode:this.mode,base:n,sup:r,sub:s}:n}parseFunction(t,n){var r=this.fetch(),s=r.text,o=c0[s];if(!o)return null;if(this.consume(),n&&n!=="atom"&&!o.allowedInArgument)throw new It("Got function '"+s+"' with no arguments"+(n?" as "+n:""),r);if(this.mode==="text"&&!o.allowedInText)throw new It("Can't use function '"+s+"' in text mode",r);if(this.mode==="math"&&o.allowedInMath===!1)throw new It("Can't use function '"+s+"' in math mode",r);var{args:i,optArgs:a}=this.parseArguments(s,o);return this.callFunction(s,i,a,r,t)}callFunction(t,n,r,s,o){var i={funcName:t,parser:this,token:s,breakOnTokenText:o},a=c0[t];if(a&&a.handler)return a.handler(i,n,r);throw new It("No function handler for "+t)}parseArguments(t,n){var r=n.numArgs+n.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var s=[],o=[],i=0;i<r;i++){var a=n.argTypes&&n.argTypes[i],l=i<n.numOptionalArgs;(n.primitive&&a==null||n.type==="sqrt"&&i===1&&o[0]==null)&&(a="primitive");var c=this.parseGroupOfType("argument to '"+t+"'",a,l);if(l)o.push(c);else if(c!=null)s.push(c);else throw new It("Null argument, please report this as a bug")}return{args:s,optArgs:o}}parseGroupOfType(t,n,r){switch(n){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,n);case"hbox":{var s=this.parseArgumentGroup(r,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var o=this.parseStringGroup("raw",r);return o!=null?{type:"raw",mode:"text",string:o.text}:null}case"primitive":{if(r)throw new It("A primitive argument cannot be optional");var i=this.parseGroup(t);if(i==null)throw new It("Expected group as "+t,this.fetch());return i}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new It("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,n){var r=this.gullet.scanArgument(n);if(r==null)return null;for(var s="",o;(o=this.fetch()).text!=="EOF";)s+=o.text,this.consume();return this.consume(),r.text=s,r}parseRegexGroup(t,n){for(var r=this.fetch(),s=r,o="",i;(i=this.fetch()).text!=="EOF"&&t.test(o+i.text);)s=i,o+=s.text,this.consume();if(o==="")throw new It("Invalid "+n+": '"+r.text+"'",r);return r.range(s,o)}parseColorGroup(t){var n=this.parseStringGroup("color",t);if(n==null)return null;var r=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(n.text);if(!r)throw new It("Invalid color: '"+n.text+"'",n);var s=r[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(t){var n,r=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?n=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):n=this.parseStringGroup("size",t),!n)return null;!t&&n.text.length===0&&(n.text="0pt",r=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(n.text);if(!s)throw new It("Invalid size: '"+n.text+"'",n);var o={number:+(s[1]+s[2]),unit:s[3]};if(!dre(o))throw new It("Invalid unit: '"+o.unit+"'",n);return{type:"size",mode:this.mode,value:o,isBlank:r}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var n=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),n==null)return null;var r=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(t,n){var r=this.gullet.scanArgument(t);if(r==null)return null;var s=this.mode;n&&this.switchMode(n),this.gullet.beginGroup();var o=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var i={type:"ordgroup",mode:this.mode,loc:r.loc,body:o};return n&&this.switchMode(s),i}parseGroup(t,n){var r=this.fetch(),s=r.text,o;if(s==="{"||s==="\\begingroup"){this.consume();var i=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,i),l=this.fetch();this.expect(i),this.gullet.endGroup(),o={type:"ordgroup",mode:this.mode,loc:cl.range(r,l),body:a,semisimple:s==="\\begingroup"||void 0}}else if(o=this.parseFunction(n,t)||this.parseSymbol(),o==null&&s[0]==="\\"&&!tse.hasOwnProperty(s)){if(this.settings.throwOnError)throw new It("Undefined control sequence: "+s,r);o=this.formatUnsupportedCmd(s),this.consume()}return o}formLigatures(t){for(var n=t.length-1,r=0;r<n;++r){var s=t[r],o=s.text;o==="-"&&t[r+1].text==="-"&&(r+1<n&&t[r+2].text==="-"?(t.splice(r,3,{type:"textord",mode:"text",loc:cl.range(s,t[r+2]),text:"---"}),n-=2):(t.splice(r,2,{type:"textord",mode:"text",loc:cl.range(s,t[r+1]),text:"--"}),n-=1)),(o==="'"||o==="`")&&t[r+1].text===o&&(t.splice(r,2,{type:"textord",mode:"text",loc:cl.range(s,t[r+1]),text:o+o}),n-=1)}}parseSymbol(){var t=this.fetch(),n=t.text;if(/^\\verb[^a-zA-Z]/.test(n)){this.consume();var r=n.slice(5),s=r.charAt(0)==="*";if(s&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new It(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:s}}gU.hasOwnProperty(n[0])&&!Js[this.mode][n[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+n[0]+'" used in math mode',t),n=gU[n[0]]+n.slice(1));var o=fWe.exec(n);o&&(n=n.substring(0,o.index),n==="i"?n="":n==="j"&&(n=""));var i;if(Js[this.mode][n]){this.settings.strict&&this.mode==="math"&&bI.indexOf(n)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+n[0]+'" used in math mode',t);var a=Js[this.mode][n].group,l=cl.range(t),c;if(sGe.hasOwnProperty(a)){var u=a;c={type:"atom",mode:this.mode,family:u,loc:l,text:n}}else c={type:a,mode:this.mode,loc:l,text:n};i=c}else if(n.charCodeAt(0)>=128)this.settings.strict&&(cre(n.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+n[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+n[0]+'"'+(" ("+n.charCodeAt(0)+")"),t)),i={type:"textord",mode:"text",loc:cl.range(t),text:n};else return null;if(this.consume(),o)for(var f=0;f<o[0].length;f++){var m=o[0][f];if(!gA[m])throw new It("Unknown accent ' "+m+"'",t);var g=gA[m][this.mode]||gA[m].text;if(!g)throw new It("Accent "+m+" unsupported in "+this.mode+" mode",t);i={type:"accent",mode:this.mode,loc:cl.range(t),label:g,isStretchy:!1,isShifty:!0,base:i}}return i}};nse.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var zM=function(t,n){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new nse(t,n);delete r.gullet.macros.current["\\df@tag"];var s=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!n.displayMode)throw new It("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:r.subparse([new Kl("\\df@tag")])}]}return s},jM=function(t,n,r){n.textContent="";var s=WC(t,r).toNode();n.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),jM=function(){throw new It("KaTeX doesn't work in quirks mode.")});var sse=function(t,n){var r=WC(t,n).toMarkup();return r},ose=function(t,n){var r=new EM(n);return zM(t,r)},ise=function(t,n,r){if(r.throwOnError||!(t instanceof It))throw t;var s=We.makeSpan(["katex-error"],[new Pc(n)]);return s.setAttribute("title",t.toString()),s.setAttribute("style","color:"+r.errorColor),s},WC=function(t,n){var r=new EM(n);try{var s=zM(t,r);return kGe(s,t,r)}catch(o){return ise(o,t,r)}},ase=function(t,n){var r=new EM(n);try{var s=zM(t,r);return AGe(s,t,r)}catch(o){return ise(o,t,r)}},lse="0.16.27",cse={Span:jw,Anchor:TM,SymbolNode:Pc,SvgNode:Yf,PathNode:I0,LineNode:gI},_I={version:lse,render:jM,renderToString:sse,ParseError:It,SETTINGS_SCHEMA:Wv,__parse:ose,__renderToDomTree:WC,__renderToHTMLTree:ase,__setFontMetrics:ure,__defineSymbol:$,__defineFunction:Xt,__defineMacro:le,__domTree:cse};const L0t=Object.freeze(Object.defineProperty({__proto__:null,ParseError:It,SETTINGS_SCHEMA:Wv,__defineFunction:Xt,__defineMacro:le,__defineSymbol:$,__domTree:cse,__parse:ose,__renderToDomTree:WC,__renderToHTMLTree:ase,__setFontMetrics:ure,default:_I,get render(){return jM},renderToString:sse,version:lse},Symbol.toStringTag,{value:"Module"})),bWe={},yWe=[];function SI(e){const t=e||bWe;return function(n,r){xM(n,"element",function(s,o){const i=Array.isArray(s.properties.className)?s.properties.className:yWe,a=i.includes("language-math"),l=i.includes("math-display"),c=i.includes("math-inline");let u=l;if(!a&&!l&&!c)return;let f=o[o.length-1],m=s;if(s.tagName==="code"&&a&&f&&f.type==="element"&&f.tagName==="pre"&&(m=f,f=o[o.length-2],u=!0),!f)return;const g=bqe(m,{whitespace:"pre"});let y;try{y=_I.renderToString(g,{...t,displayMode:u,throwOnError:!0})}catch(x){const E=x,T=E.name.toLowerCase();r.message("Could not render math with KaTeX",{ancestors:[...o,s],cause:E,place:s.position,ruleId:T,source:"rehype-katex"});try{y=_I.renderToString(g,{...t,displayMode:u,strict:"ignore",throwOnError:!1})}catch{y=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(t.errorColor||"#cc0000"),title:String(x)},children:[{type:"text",value:g}]}]}}typeof y=="string"&&(y=cqe(y).children);const v=f.children.indexOf(m);return f.children.splice(v,1,...y),KT})}}const use=-1,YC=0,Kv=1,t4=2,UM=3,HM=4,VM=5,qM=6,dse=7,fse=8,bU=typeof self=="object"?self:globalThis,vWe=(e,t)=>{const n=(s,o)=>(e.set(o,s),s),r=s=>{if(e.has(s))return e.get(s);const[o,i]=t[s];switch(o){case YC:case use:return n(i,s);case Kv:{const a=n([],s);for(const l of i)a.push(r(l));return a}case t4:{const a=n({},s);for(const[l,c]of i)a[r(l)]=r(c);return a}case UM:return n(new Date(i),s);case HM:{const{source:a,flags:l}=i;return n(new RegExp(a,l),s)}case VM:{const a=n(new Map,s);for(const[l,c]of i)a.set(r(l),r(c));return a}case qM:{const a=n(new Set,s);for(const l of i)a.add(r(l));return a}case dse:{const{name:a,message:l}=i;return n(new bU[a](l),s)}case fse:return n(BigInt(i),s);case"BigInt":return n(Object(BigInt(i)),s);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:a}=new Uint8Array(i);return n(new DataView(a),i)}}return n(new bU[o](i),s)};return r},yU=e=>vWe(new Map,e)(0),Xg="",{toString:xWe}={},{keys:wWe}=Object,Jy=e=>{const t=typeof e;if(t!=="object"||!e)return[YC,t];const n=xWe.call(e).slice(8,-1);switch(n){case"Array":return[Kv,Xg];case"Object":return[t4,Xg];case"Date":return[UM,Xg];case"RegExp":return[HM,Xg];case"Map":return[VM,Xg];case"Set":return[qM,Xg];case"DataView":return[Kv,n]}return n.includes("Array")?[Kv,n]:n.includes("Error")?[dse,n]:[t4,n]},i_=([e,t])=>e===YC&&(t==="function"||t==="symbol"),EWe=(e,t,n,r)=>{const s=(i,a)=>{const l=r.push(i)-1;return n.set(a,l),l},o=i=>{if(n.has(i))return n.get(i);let[a,l]=Jy(i);switch(a){case YC:{let u=i;switch(l){case"bigint":a=fse,u=i.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return s([use],i)}return s([a,u],i)}case Kv:{if(l){let m=i;return l==="DataView"?m=new Uint8Array(i.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(i)),s([l,[...m]],i)}const u=[],f=s([a,u],i);for(const m of i)u.push(o(m));return f}case t4:{if(l)switch(l){case"BigInt":return s([l,i.toString()],i);case"Boolean":case"Number":case"String":return s([l,i.valueOf()],i)}if(t&&"toJSON"in i)return o(i.toJSON());const u=[],f=s([a,u],i);for(const m of wWe(i))(e||!i_(Jy(i[m])))&&u.push([o(m),o(i[m])]);return f}case UM:return s([a,i.toISOString()],i);case HM:{const{source:u,flags:f}=i;return s([a,{source:u,flags:f}],i)}case VM:{const u=[],f=s([a,u],i);for(const[m,g]of i)(e||!(i_(Jy(m))||i_(Jy(g))))&&u.push([o(m),o(g)]);return f}case qM:{const u=[],f=s([a,u],i);for(const m of i)(e||!i_(Jy(m)))&&u.push(o(m));return f}}const{message:c}=i;return s([a,{name:l,message:c}],i)};return o},vU=(e,{json:t,lossy:n}={})=>{const r=[];return EWe(!(t||n),!!t,new Map,r)(e),r},cb=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?yU(vU(e,t)):structuredClone(e):(e,t)=>yU(vU(e,t));function _We(e){const t=String(e),n=[];return{toOffset:s,toPoint:r};function r(o){if(typeof o=="number"&&o>-1&&o<=t.length){let i=0;for(;;){let a=n[i];if(a===void 0){const l=xU(t,n[i-1]);a=l===-1?t.length+1:l+1,n[i]=a}if(a>o)return{line:i+1,column:o-(i>0?n[i-1]:0)+1,offset:o};i++}}}function s(o){if(o&&typeof o.line=="number"&&typeof o.column=="number"&&!Number.isNaN(o.line)&&!Number.isNaN(o.column)){for(;n.length<o.line;){const a=n[n.length-1],l=xU(t,a),c=l===-1?t.length+1:l+1;if(a===c)break;n.push(c)}const i=(o.line>1?n[o.line-2]:0)+o.column-1;if(i<n[o.line-1])return i}}}function xU(e,t){const n=e.indexOf("\r",t),r=e.indexOf(`
`,t);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const hse={}.hasOwnProperty,SWe=Object.prototype;function TWe(e,t){const n=t||{};return GM({file:n.file||void 0,location:!1,schema:n.space==="svg"?Td:Rb,verbose:n.verbose||!1},e)}function GM(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},U_(e,r,n),n}case"#document":case"#document-fragment":{const r=t,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:pse(e,t.childNodes),data:{quirksMode:s}},e.file&&e.location){const o=String(e.file),i=_We(o),a=i.toPoint(0),l=i.toPoint(o.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=t;return n={type:"doctype"},U_(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},U_(e,r,n),n}default:return n=CWe(e,t),n}}function pse(e,t){let n=-1;const r=[];for(;++n<t.length;){const s=GM(e,t[n]);r.push(s)}return r}function CWe(e,t){const n=e.schema;e.schema=t.namespaceURI===pd.svg?Td:Rb;let r=-1;const s={};for(;++r<t.attrs.length;){const a=t.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;hse.call(SWe,l)||(s[l]=a.value)}const i=(e.schema.space==="svg"?ere:Qne)(t.tagName,s,pse(e,t.childNodes));if(U_(e,t,i),i.tagName==="template"){const a=t,l=a.sourceCodeLocation,c=l&&l.startTag&&g1(l.startTag),u=l&&l.endTag&&g1(l.endTag),f=GM(e,a.content);c&&u&&e.file&&(f.position={start:c.end,end:u.start}),i.content=f}return e.schema=n,i}function U_(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=kWe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function kWe(e,t,n){const r=g1(n);if(t.type==="element"){const s=t.children[t.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),e.verbose){const o={};let i;if(n.attrs)for(i in n.attrs)hse.call(n.attrs,i)&&(o[Fw(e.schema,i).property]=g1(n.attrs[i]));n.startTag;const a=g1(n.startTag),l=n.endTag?g1(n.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=o,t.data={position:c}}}return r}function g1(e){const t=wU({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=wU({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function wU(e){return e.line&&e.column?e:void 0}const AWe={},NWe={}.hasOwnProperty,mse=uM("type",{handlers:{root:RWe,element:LWe,text:DWe,comment:PWe,doctype:OWe}});function IWe(e,t){const r=(t||AWe).space;return mse(e,r==="svg"?Td:Rb)}function RWe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=WM(e.children,n,t),Pb(e,n),n}function MWe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=WM(e.children,n,t),Pb(e,n),n}function OWe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Pb(e,t),t}function DWe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Pb(e,t),t}function PWe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Pb(e,t),t}function LWe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Td);const s=[];let o;if(e.properties){for(o in e.properties)if(o!=="children"&&NWe.call(e.properties,o)){const l=$We(r,o,e.properties[o]);l&&s.push(l)}}const i=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:s,namespaceURI:pd[i],childNodes:[],parentNode:null};return a.childNodes=WM(e.children,a,r),Pb(e,a),e.tagName==="template"&&e.content&&(a.content=MWe(e.content,r)),a}function $We(e,t,n){const r=Fw(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?dM(n):fM(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const o=s.name.indexOf(":");o<0?s.prefix="":(s.name=s.name.slice(o+1),s.prefix=r.attribute.slice(0,o)),s.namespace=pd[r.space]}return s}function WM(e,t,n){let r=-1;const s=[];if(e)for(;++r<e.length;){const o=mse(e[r],n);o.parentNode=t,s.push(o)}return s}function Pb(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const FWe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),po="";var ue;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(ue||(ue={}));const rl={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function gse(e){return e>=55296&&e<=57343}function BWe(e){return e>=56320&&e<=57343}function zWe(e,t){return(e-55296)*1024+9216+t}function bse(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function yse(e){return e>=64976&&e<=65007||FWe.has(e)}var et;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(et||(et={}));const jWe=65536;class UWe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=jWe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:r,col:s,offset:o}=this,i=s+n,a=o+n;return{code:t,startLine:r,endLine:r,startCol:i,endCol:i,startOffset:a,endOffset:a}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(BWe(n))return this.pos++,this._addGap(),zWe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ue.EOF;return this._err(et.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ue.EOF;const r=this.html.charCodeAt(n);return r===ue.CARRIAGE_RETURN?ue.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ue.EOF;let t=this.html.charCodeAt(this.pos);return t===ue.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ue.LINE_FEED):t===ue.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,gse(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===ue.LINE_FEED||t===ue.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){bse(t)?this._err(et.controlCharacterInInputStream):yse(t)&&this._err(et.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Cr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Cr||(Cr={}));function vse(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const HWe=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),VWe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function qWe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=VWe.get(e))!==null&&t!==void 0?t:e}var zi;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(zi||(zi={}));const GWe=32;var u0;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(u0||(u0={}));function TI(e){return e>=zi.ZERO&&e<=zi.NINE}function WWe(e){return e>=zi.UPPER_A&&e<=zi.UPPER_F||e>=zi.LOWER_A&&e<=zi.LOWER_F}function YWe(e){return e>=zi.UPPER_A&&e<=zi.UPPER_Z||e>=zi.LOWER_A&&e<=zi.LOWER_Z||TI(e)}function KWe(e){return e===zi.EQUALS||YWe(e)}var Li;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Li||(Li={}));var Sf;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Sf||(Sf={}));class ZWe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Li.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Sf.Strict}startEntity(t){this.decodeMode=t,this.state=Li.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Li.EntityStart:return t.charCodeAt(n)===zi.NUM?(this.state=Li.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Li.NamedEntity,this.stateNamedEntity(t,n));case Li.NumericStart:return this.stateNumericStart(t,n);case Li.NumericDecimal:return this.stateNumericDecimal(t,n);case Li.NumericHex:return this.stateNumericHex(t,n);case Li.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|GWe)===zi.LOWER_X?(this.state=Li.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Li.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,s){if(n!==r){const o=r-n;this.result=this.result*Math.pow(s,o)+Number.parseInt(t.substr(n,o),s),this.consumed+=o}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(TI(s)||WWe(s))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(TI(s))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===zi.SEMI)this.consumed+=1;else if(this.decodeMode===Sf.Strict)return 0;return this.emitCodePoint(qWe(this.result),this.consumed),this.errors&&(t!==zi.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let s=r[this.treeIndex],o=(s&u0.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const i=t.charCodeAt(n);if(this.treeIndex=JWe(r,s,this.treeIndex+Math.max(1,o),i),this.treeIndex<0)return this.result===0||this.decodeMode===Sf.Attribute&&(o===0||KWe(i))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],o=(s&u0.VALUE_LENGTH)>>14,o!==0){if(i===zi.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Sf.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,s=(r[n]&u0.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[t]&~u0.VALUE_LENGTH:s[t+1],r),n===3&&this.emitCodePoint(s[t+2],r),r}end(){var t;switch(this.state){case Li.NamedEntity:return this.result!==0&&(this.decodeMode!==Sf.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Li.NumericDecimal:return this.emitNumericEntity(0,2);case Li.NumericHex:return this.emitNumericEntity(0,3);case Li.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Li.EntityStart:return 0}}}function JWe(e,t,n,r){const s=(t&u0.BRANCH_LENGTH)>>7,o=t&u0.JUMP_TABLE;if(s===0)return o!==0&&r===o?n:-1;if(o){const l=r-o;return l<0||l>=s?-1:e[n+l]-1}let i=n,a=i+s-1;for(;i<=a;){const l=i+a>>>1,c=e[l];if(c<r)i=l+1;else if(c>r)a=l-1;else return e[l+s]}return-1}var vt;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(vt||(vt={}));var om;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(om||(om={}));var _c;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(_c||(_c={}));var qe;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(qe||(qe={}));var D;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(D||(D={}));const XWe=new Map([[qe.A,D.A],[qe.ADDRESS,D.ADDRESS],[qe.ANNOTATION_XML,D.ANNOTATION_XML],[qe.APPLET,D.APPLET],[qe.AREA,D.AREA],[qe.ARTICLE,D.ARTICLE],[qe.ASIDE,D.ASIDE],[qe.B,D.B],[qe.BASE,D.BASE],[qe.BASEFONT,D.BASEFONT],[qe.BGSOUND,D.BGSOUND],[qe.BIG,D.BIG],[qe.BLOCKQUOTE,D.BLOCKQUOTE],[qe.BODY,D.BODY],[qe.BR,D.BR],[qe.BUTTON,D.BUTTON],[qe.CAPTION,D.CAPTION],[qe.CENTER,D.CENTER],[qe.CODE,D.CODE],[qe.COL,D.COL],[qe.COLGROUP,D.COLGROUP],[qe.DD,D.DD],[qe.DESC,D.DESC],[qe.DETAILS,D.DETAILS],[qe.DIALOG,D.DIALOG],[qe.DIR,D.DIR],[qe.DIV,D.DIV],[qe.DL,D.DL],[qe.DT,D.DT],[qe.EM,D.EM],[qe.EMBED,D.EMBED],[qe.FIELDSET,D.FIELDSET],[qe.FIGCAPTION,D.FIGCAPTION],[qe.FIGURE,D.FIGURE],[qe.FONT,D.FONT],[qe.FOOTER,D.FOOTER],[qe.FOREIGN_OBJECT,D.FOREIGN_OBJECT],[qe.FORM,D.FORM],[qe.FRAME,D.FRAME],[qe.FRAMESET,D.FRAMESET],[qe.H1,D.H1],[qe.H2,D.H2],[qe.H3,D.H3],[qe.H4,D.H4],[qe.H5,D.H5],[qe.H6,D.H6],[qe.HEAD,D.HEAD],[qe.HEADER,D.HEADER],[qe.HGROUP,D.HGROUP],[qe.HR,D.HR],[qe.HTML,D.HTML],[qe.I,D.I],[qe.IMG,D.IMG],[qe.IMAGE,D.IMAGE],[qe.INPUT,D.INPUT],[qe.IFRAME,D.IFRAME],[qe.KEYGEN,D.KEYGEN],[qe.LABEL,D.LABEL],[qe.LI,D.LI],[qe.LINK,D.LINK],[qe.LISTING,D.LISTING],[qe.MAIN,D.MAIN],[qe.MALIGNMARK,D.MALIGNMARK],[qe.MARQUEE,D.MARQUEE],[qe.MATH,D.MATH],[qe.MENU,D.MENU],[qe.META,D.META],[qe.MGLYPH,D.MGLYPH],[qe.MI,D.MI],[qe.MO,D.MO],[qe.MN,D.MN],[qe.MS,D.MS],[qe.MTEXT,D.MTEXT],[qe.NAV,D.NAV],[qe.NOBR,D.NOBR],[qe.NOFRAMES,D.NOFRAMES],[qe.NOEMBED,D.NOEMBED],[qe.NOSCRIPT,D.NOSCRIPT],[qe.OBJECT,D.OBJECT],[qe.OL,D.OL],[qe.OPTGROUP,D.OPTGROUP],[qe.OPTION,D.OPTION],[qe.P,D.P],[qe.PARAM,D.PARAM],[qe.PLAINTEXT,D.PLAINTEXT],[qe.PRE,D.PRE],[qe.RB,D.RB],[qe.RP,D.RP],[qe.RT,D.RT],[qe.RTC,D.RTC],[qe.RUBY,D.RUBY],[qe.S,D.S],[qe.SCRIPT,D.SCRIPT],[qe.SEARCH,D.SEARCH],[qe.SECTION,D.SECTION],[qe.SELECT,D.SELECT],[qe.SOURCE,D.SOURCE],[qe.SMALL,D.SMALL],[qe.SPAN,D.SPAN],[qe.STRIKE,D.STRIKE],[qe.STRONG,D.STRONG],[qe.STYLE,D.STYLE],[qe.SUB,D.SUB],[qe.SUMMARY,D.SUMMARY],[qe.SUP,D.SUP],[qe.TABLE,D.TABLE],[qe.TBODY,D.TBODY],[qe.TEMPLATE,D.TEMPLATE],[qe.TEXTAREA,D.TEXTAREA],[qe.TFOOT,D.TFOOT],[qe.TD,D.TD],[qe.TH,D.TH],[qe.THEAD,D.THEAD],[qe.TITLE,D.TITLE],[qe.TR,D.TR],[qe.TRACK,D.TRACK],[qe.TT,D.TT],[qe.U,D.U],[qe.UL,D.UL],[qe.SVG,D.SVG],[qe.VAR,D.VAR],[qe.WBR,D.WBR],[qe.XMP,D.XMP]]);function Lb(e){var t;return(t=XWe.get(e))!==null&&t!==void 0?t:D.UNKNOWN}const Tt=D,QWe={[vt.HTML]:new Set([Tt.ADDRESS,Tt.APPLET,Tt.AREA,Tt.ARTICLE,Tt.ASIDE,Tt.BASE,Tt.BASEFONT,Tt.BGSOUND,Tt.BLOCKQUOTE,Tt.BODY,Tt.BR,Tt.BUTTON,Tt.CAPTION,Tt.CENTER,Tt.COL,Tt.COLGROUP,Tt.DD,Tt.DETAILS,Tt.DIR,Tt.DIV,Tt.DL,Tt.DT,Tt.EMBED,Tt.FIELDSET,Tt.FIGCAPTION,Tt.FIGURE,Tt.FOOTER,Tt.FORM,Tt.FRAME,Tt.FRAMESET,Tt.H1,Tt.H2,Tt.H3,Tt.H4,Tt.H5,Tt.H6,Tt.HEAD,Tt.HEADER,Tt.HGROUP,Tt.HR,Tt.HTML,Tt.IFRAME,Tt.IMG,Tt.INPUT,Tt.LI,Tt.LINK,Tt.LISTING,Tt.MAIN,Tt.MARQUEE,Tt.MENU,Tt.META,Tt.NAV,Tt.NOEMBED,Tt.NOFRAMES,Tt.NOSCRIPT,Tt.OBJECT,Tt.OL,Tt.P,Tt.PARAM,Tt.PLAINTEXT,Tt.PRE,Tt.SCRIPT,Tt.SECTION,Tt.SELECT,Tt.SOURCE,Tt.STYLE,Tt.SUMMARY,Tt.TABLE,Tt.TBODY,Tt.TD,Tt.TEMPLATE,Tt.TEXTAREA,Tt.TFOOT,Tt.TH,Tt.THEAD,Tt.TITLE,Tt.TR,Tt.TRACK,Tt.UL,Tt.WBR,Tt.XMP]),[vt.MATHML]:new Set([Tt.MI,Tt.MO,Tt.MN,Tt.MS,Tt.MTEXT,Tt.ANNOTATION_XML]),[vt.SVG]:new Set([Tt.TITLE,Tt.FOREIGN_OBJECT,Tt.DESC]),[vt.XLINK]:new Set,[vt.XML]:new Set,[vt.XMLNS]:new Set},CI=new Set([Tt.H1,Tt.H2,Tt.H3,Tt.H4,Tt.H5,Tt.H6]);qe.STYLE,qe.SCRIPT,qe.XMP,qe.IFRAME,qe.NOEMBED,qe.NOFRAMES,qe.PLAINTEXT;var be;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(be||(be={}));const Qo={DATA:be.DATA,RCDATA:be.RCDATA,RAWTEXT:be.RAWTEXT,SCRIPT_DATA:be.SCRIPT_DATA,PLAINTEXT:be.PLAINTEXT,CDATA_SECTION:be.CDATA_SECTION};function eYe(e){return e>=ue.DIGIT_0&&e<=ue.DIGIT_9}function Tv(e){return e>=ue.LATIN_CAPITAL_A&&e<=ue.LATIN_CAPITAL_Z}function tYe(e){return e>=ue.LATIN_SMALL_A&&e<=ue.LATIN_SMALL_Z}function Jh(e){return tYe(e)||Tv(e)}function EU(e){return Jh(e)||eYe(e)}function a_(e){return e+32}function xse(e){return e===ue.SPACE||e===ue.LINE_FEED||e===ue.TABULATION||e===ue.FORM_FEED}function _U(e){return xse(e)||e===ue.SOLIDUS||e===ue.GREATER_THAN_SIGN}function nYe(e){return e===ue.NULL?et.nullCharacterReference:e>1114111?et.characterReferenceOutsideUnicodeRange:gse(e)?et.surrogateCharacterReference:yse(e)?et.noncharacterCharacterReference:bse(e)||e===ue.CARRIAGE_RETURN?et.controlCharacterReference:null}class rYe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=be.DATA,this.returnState=be.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new UWe(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new ZWe(HWe,(r,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(et.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(et.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const s=nYe(r);s&&this._err(s,1)}}:void 0)}_err(t,n=0){var r,s;(s=(r=this.handler).onParseError)===null||s===void 0||s.call(r,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Cr.START_TAG,tagName:"",tagID:D.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Cr.END_TAG,tagName:"",tagID:D.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Cr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Cr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(vse(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const s=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(et.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Lb(t.tagName),t.type===Cr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(et.endTagWithAttributes),t.selfClosing&&this._err(et.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Cr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Cr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Cr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Cr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=xse(t)?Cr.WHITESPACE_CHARACTER:t===ue.NULL?Cr.NULL_CHARACTER:Cr.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Cr.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=be.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Sf.Attribute:Sf.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===be.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===be.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===be.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case be.DATA:{this._stateData(t);break}case be.RCDATA:{this._stateRcdata(t);break}case be.RAWTEXT:{this._stateRawtext(t);break}case be.SCRIPT_DATA:{this._stateScriptData(t);break}case be.PLAINTEXT:{this._statePlaintext(t);break}case be.TAG_OPEN:{this._stateTagOpen(t);break}case be.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case be.TAG_NAME:{this._stateTagName(t);break}case be.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case be.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case be.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case be.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case be.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case be.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case be.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case be.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case be.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case be.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case be.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case be.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case be.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case be.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case be.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case be.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case be.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case be.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case be.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case be.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case be.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case be.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case be.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case be.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case be.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case be.BOGUS_COMMENT:{this._stateBogusComment(t);break}case be.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case be.COMMENT_START:{this._stateCommentStart(t);break}case be.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case be.COMMENT:{this._stateComment(t);break}case be.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case be.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case be.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case be.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case be.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case be.COMMENT_END:{this._stateCommentEnd(t);break}case be.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case be.DOCTYPE:{this._stateDoctype(t);break}case be.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case be.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case be.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case be.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case be.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case be.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case be.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case be.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case be.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case be.CDATA_SECTION:{this._stateCdataSection(t);break}case be.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case be.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case be.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case be.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case ue.LESS_THAN_SIGN:{this.state=be.TAG_OPEN;break}case ue.AMPERSAND:{this._startCharacterReference();break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this._emitCodePoint(t);break}case ue.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case ue.AMPERSAND:{this._startCharacterReference();break}case ue.LESS_THAN_SIGN:{this.state=be.RCDATA_LESS_THAN_SIGN;break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(po);break}case ue.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case ue.LESS_THAN_SIGN:{this.state=be.RAWTEXT_LESS_THAN_SIGN;break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(po);break}case ue.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case ue.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_LESS_THAN_SIGN;break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(po);break}case ue.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case ue.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(po);break}case ue.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Jh(t))this._createStartTagToken(),this.state=be.TAG_NAME,this._stateTagName(t);else switch(t){case ue.EXCLAMATION_MARK:{this.state=be.MARKUP_DECLARATION_OPEN;break}case ue.SOLIDUS:{this.state=be.END_TAG_OPEN;break}case ue.QUESTION_MARK:{this._err(et.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=be.BOGUS_COMMENT,this._stateBogusComment(t);break}case ue.EOF:{this._err(et.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(et.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=be.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Jh(t))this._createEndTagToken(),this.state=be.TAG_NAME,this._stateTagName(t);else switch(t){case ue.GREATER_THAN_SIGN:{this._err(et.missingEndTagName),this.state=be.DATA;break}case ue.EOF:{this._err(et.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(et.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=be.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=be.BEFORE_ATTRIBUTE_NAME;break}case ue.SOLIDUS:{this.state=be.SELF_CLOSING_START_TAG;break}case ue.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentTagToken();break}case ue.NULL:{this._err(et.unexpectedNullCharacter),n.tagName+=po;break}case ue.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Tv(t)?a_(t):t)}}_stateRcdataLessThanSign(t){t===ue.SOLIDUS?this.state=be.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=be.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Jh(t)?(this.state=be.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=be.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=be.BEFORE_ATTRIBUTE_NAME,!1;case ue.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=be.SELF_CLOSING_START_TAG,!1;case ue.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=be.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===ue.SOLIDUS?this.state=be.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=be.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Jh(t)?(this.state=be.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=be.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case ue.SOLIDUS:{this.state=be.SCRIPT_DATA_END_TAG_OPEN;break}case ue.EXCLAMATION_MARK:{this.state=be.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=be.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Jh(t)?(this.state=be.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===ue.HYPHEN_MINUS?(this.state=be.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===ue.HYPHEN_MINUS?(this.state=be.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case ue.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(po);break}case ue.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case ue.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_ESCAPED,this._emitChars(po);break}case ue.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case ue.HYPHEN_MINUS:{this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ue.GREATER_THAN_SIGN:{this.state=be.SCRIPT_DATA,this._emitChars(">");break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_ESCAPED,this._emitChars(po);break}case ue.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===ue.SOLIDUS?this.state=be.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Jh(t)?(this._emitChars("<"),this.state=be.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Jh(t)?(this.state=be.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(rl.SCRIPT,!1)&&_U(this.preprocessor.peek(rl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<rl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case ue.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(po);break}case ue.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case ue.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(po);break}case ue.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case ue.HYPHEN_MINUS:{this._emitChars("-");break}case ue.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ue.GREATER_THAN_SIGN:{this.state=be.SCRIPT_DATA,this._emitChars(">");break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(po);break}case ue.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===ue.SOLIDUS?(this.state=be.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(rl.SCRIPT,!1)&&_U(this.preprocessor.peek(rl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<rl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=be.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.SOLIDUS:case ue.GREATER_THAN_SIGN:case ue.EOF:{this.state=be.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ue.EQUALS_SIGN:{this._err(et.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=be.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=be.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:case ue.SOLIDUS:case ue.GREATER_THAN_SIGN:case ue.EOF:{this._leaveAttrName(),this.state=be.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ue.EQUALS_SIGN:{this._leaveAttrName(),this.state=be.BEFORE_ATTRIBUTE_VALUE;break}case ue.QUOTATION_MARK:case ue.APOSTROPHE:case ue.LESS_THAN_SIGN:{this._err(et.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.name+=po;break}default:this.currentAttr.name+=String.fromCodePoint(Tv(t)?a_(t):t)}}_stateAfterAttributeName(t){switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.SOLIDUS:{this.state=be.SELF_CLOSING_START_TAG;break}case ue.EQUALS_SIGN:{this.state=be.BEFORE_ATTRIBUTE_VALUE;break}case ue.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentTagToken();break}case ue.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=be.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.QUOTATION_MARK:{this.state=be.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{this.state=be.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ue.GREATER_THAN_SIGN:{this._err(et.missingAttributeValue),this.state=be.DATA,this.emitCurrentTagToken();break}default:this.state=be.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case ue.QUOTATION_MARK:{this.state=be.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ue.AMPERSAND:{this._startCharacterReference();break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=po;break}case ue.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case ue.APOSTROPHE:{this.state=be.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ue.AMPERSAND:{this._startCharacterReference();break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=po;break}case ue.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this._leaveAttrValue(),this.state=be.BEFORE_ATTRIBUTE_NAME;break}case ue.AMPERSAND:{this._startCharacterReference();break}case ue.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=be.DATA,this.emitCurrentTagToken();break}case ue.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=po;break}case ue.QUOTATION_MARK:case ue.APOSTROPHE:case ue.LESS_THAN_SIGN:case ue.EQUALS_SIGN:case ue.GRAVE_ACCENT:{this._err(et.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case ue.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this._leaveAttrValue(),this.state=be.BEFORE_ATTRIBUTE_NAME;break}case ue.SOLIDUS:{this._leaveAttrValue(),this.state=be.SELF_CLOSING_START_TAG;break}case ue.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=be.DATA,this.emitCurrentTagToken();break}case ue.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._err(et.missingWhitespaceBetweenAttributes),this.state=be.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case ue.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=be.DATA,this.emitCurrentTagToken();break}case ue.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._err(et.unexpectedSolidusInTag),this.state=be.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case ue.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentComment(n);break}case ue.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case ue.NULL:{this._err(et.unexpectedNullCharacter),n.data+=po;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(rl.DASH_DASH,!0)?(this._createCommentToken(rl.DASH_DASH.length+1),this.state=be.COMMENT_START):this._consumeSequenceIfMatch(rl.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(rl.DOCTYPE.length+1),this.state=be.DOCTYPE):this._consumeSequenceIfMatch(rl.CDATA_START,!0)?this.inForeignNode?this.state=be.CDATA_SECTION:(this._err(et.cdataInHtmlContent),this._createCommentToken(rl.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=be.BOGUS_COMMENT):this._ensureHibernation()||(this._err(et.incorrectlyOpenedComment),this._createCommentToken(2),this.state=be.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case ue.HYPHEN_MINUS:{this.state=be.COMMENT_START_DASH;break}case ue.GREATER_THAN_SIGN:{this._err(et.abruptClosingOfEmptyComment),this.state=be.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=be.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case ue.HYPHEN_MINUS:{this.state=be.COMMENT_END;break}case ue.GREATER_THAN_SIGN:{this._err(et.abruptClosingOfEmptyComment),this.state=be.DATA,this.emitCurrentComment(n);break}case ue.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=be.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case ue.HYPHEN_MINUS:{this.state=be.COMMENT_END_DASH;break}case ue.LESS_THAN_SIGN:{n.data+="<",this.state=be.COMMENT_LESS_THAN_SIGN;break}case ue.NULL:{this._err(et.unexpectedNullCharacter),n.data+=po;break}case ue.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case ue.EXCLAMATION_MARK:{n.data+="!",this.state=be.COMMENT_LESS_THAN_SIGN_BANG;break}case ue.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=be.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===ue.HYPHEN_MINUS?this.state=be.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=be.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===ue.HYPHEN_MINUS?this.state=be.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=be.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==ue.GREATER_THAN_SIGN&&t!==ue.EOF&&this._err(et.nestedComment),this.state=be.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case ue.HYPHEN_MINUS:{this.state=be.COMMENT_END;break}case ue.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=be.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case ue.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentComment(n);break}case ue.EXCLAMATION_MARK:{this.state=be.COMMENT_END_BANG;break}case ue.HYPHEN_MINUS:{n.data+="-";break}case ue.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=be.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case ue.HYPHEN_MINUS:{n.data+="--!",this.state=be.COMMENT_END_DASH;break}case ue.GREATER_THAN_SIGN:{this._err(et.incorrectlyClosedComment),this.state=be.DATA,this.emitCurrentComment(n);break}case ue.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=be.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=be.BEFORE_DOCTYPE_NAME;break}case ue.GREATER_THAN_SIGN:{this.state=be.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case ue.EOF:{this._err(et.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingWhitespaceBeforeDoctypeName),this.state=be.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Tv(t))this._createDoctypeToken(String.fromCharCode(a_(t))),this.state=be.DOCTYPE_NAME;else switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.NULL:{this._err(et.unexpectedNullCharacter),this._createDoctypeToken(po),this.state=be.DOCTYPE_NAME;break}case ue.GREATER_THAN_SIGN:{this._err(et.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case ue.EOF:{this._err(et.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=be.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=be.AFTER_DOCTYPE_NAME;break}case ue.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentDoctype(n);break}case ue.NULL:{this._err(et.unexpectedNullCharacter),n.name+=po;break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Tv(t)?a_(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentDoctype(n);break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(rl.PUBLIC,!1)?this.state=be.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(rl.SYSTEM,!1)?this.state=be.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(et.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=be.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ue.QUOTATION_MARK:{this._err(et.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{this._err(et.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ue.GREATER_THAN_SIGN:{this._err(et.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.QUOTATION_MARK:{n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ue.GREATER_THAN_SIGN:{this._err(et.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ue.QUOTATION_MARK:{this.state=be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ue.NULL:{this._err(et.unexpectedNullCharacter),n.publicId+=po;break}case ue.GREATER_THAN_SIGN:{this._err(et.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ue.APOSTROPHE:{this.state=be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ue.NULL:{this._err(et.unexpectedNullCharacter),n.publicId+=po;break}case ue.GREATER_THAN_SIGN:{this._err(et.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=be.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ue.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentDoctype(n);break}case ue.QUOTATION_MARK:{this._err(et.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{this._err(et.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=be.DATA;break}case ue.QUOTATION_MARK:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:{this.state=be.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ue.QUOTATION_MARK:{this._err(et.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{this._err(et.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ue.GREATER_THAN_SIGN:{this._err(et.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.QUOTATION_MARK:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ue.APOSTROPHE:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ue.GREATER_THAN_SIGN:{this._err(et.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ue.QUOTATION_MARK:{this.state=be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ue.NULL:{this._err(et.unexpectedNullCharacter),n.systemId+=po;break}case ue.GREATER_THAN_SIGN:{this._err(et.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ue.APOSTROPHE:{this.state=be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ue.NULL:{this._err(et.unexpectedNullCharacter),n.systemId+=po;break}case ue.GREATER_THAN_SIGN:{this._err(et.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ue.SPACE:case ue.LINE_FEED:case ue.TABULATION:case ue.FORM_FEED:break;case ue.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=be.DATA;break}case ue.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case ue.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=be.DATA;break}case ue.NULL:{this._err(et.unexpectedNullCharacter);break}case ue.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case ue.RIGHT_SQUARE_BRACKET:{this.state=be.CDATA_SECTION_BRACKET;break}case ue.EOF:{this._err(et.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===ue.RIGHT_SQUARE_BRACKET?this.state=be.CDATA_SECTION_END:(this._emitChars("]"),this.state=be.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case ue.GREATER_THAN_SIGN:{this.state=be.DATA;break}case ue.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=be.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(ue.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&EU(this.preprocessor.peek(1))?be.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){EU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===ue.SEMICOLON&&this._err(et.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const wse=new Set([D.DD,D.DT,D.LI,D.OPTGROUP,D.OPTION,D.P,D.RB,D.RP,D.RT,D.RTC]),SU=new Set([...wse,D.CAPTION,D.COLGROUP,D.TBODY,D.TD,D.TFOOT,D.TH,D.THEAD,D.TR]),n4=new Set([D.APPLET,D.CAPTION,D.HTML,D.MARQUEE,D.OBJECT,D.TABLE,D.TD,D.TEMPLATE,D.TH]),sYe=new Set([...n4,D.OL,D.UL]),oYe=new Set([...n4,D.BUTTON]),TU=new Set([D.ANNOTATION_XML,D.MI,D.MN,D.MO,D.MS,D.MTEXT]),CU=new Set([D.DESC,D.FOREIGN_OBJECT,D.TITLE]),iYe=new Set([D.TR,D.TEMPLATE,D.HTML]),aYe=new Set([D.TBODY,D.TFOOT,D.THEAD,D.TEMPLATE,D.HTML]),lYe=new Set([D.TABLE,D.TEMPLATE,D.HTML]),cYe=new Set([D.TD,D.TH]);class uYe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=D.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===D.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===vt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const s=this._indexOf(t)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,r),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==vt.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(CI,vt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(cYe,vt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(lYe,vt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(aYe,vt.HTML)}clearBackToTableRowContext(){this.clearBackTo(iYe,vt.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===D.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===D.HTML}hasInDynamicScope(t,n){for(let r=this.stackTop;r>=0;r--){const s=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case vt.HTML:{if(s===t)return!0;if(n.has(s))return!1;break}case vt.SVG:{if(CU.has(s))return!1;break}case vt.MATHML:{if(TU.has(s))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,n4)}hasInListItemScope(t){return this.hasInDynamicScope(t,sYe)}hasInButtonScope(t){return this.hasInDynamicScope(t,oYe)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case vt.HTML:{if(CI.has(n))return!0;if(n4.has(n))return!1;break}case vt.SVG:{if(CU.has(n))return!1;break}case vt.MATHML:{if(TU.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===vt.HTML)switch(this.tagIDs[n]){case t:return!0;case D.TABLE:case D.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===vt.HTML)switch(this.tagIDs[t]){case D.TBODY:case D.THEAD:case D.TFOOT:return!0;case D.TABLE:case D.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===vt.HTML)switch(this.tagIDs[n]){case t:return!0;case D.OPTION:case D.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&wse.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&SU.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&SU.has(this.currentTagId);)this.pop()}}const bA=3;var ud;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(ud||(ud={}));const kU={type:ud.Marker};class dYe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],s=n.length,o=this.treeAdapter.getTagName(t),i=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===ud.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===o&&this.treeAdapter.getNamespaceURI(c)===i){const u=this.treeAdapter.getAttrList(c);u.length===s&&r.push({idx:a,attrs:u})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<bA)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<bA)return;const s=new Map(n.map(i=>[i.name,i.value]));let o=0;for(let i=0;i<r.length;i++){const a=r[i];a.attrs.every(l=>s.get(l.name)===l.value)&&(o+=1,o>=bA&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(kU)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:ud.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:ud.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(kU);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===ud.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===ud.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===ud.Element&&n.element===t)}}const Xh={createDocument(){return{nodeName:"#document",mode:_c.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const s=e.childNodes.find(o=>o.nodeName==="#documentType");if(s)s.name=t,s.publicId=n,s.systemId=r;else{const o={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Xh.appendChild(e,o)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Xh.isTextNode(n)){n.value+=t;return}}Xh.appendChild(e,Xh.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Xh.isTextNode(r)?r.value+=t:Xh.insertBefore(e,Xh.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Ese="html",fYe="about:legacy-compat",hYe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",_se=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],pYe=[..._se,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],mYe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Sse=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],gYe=[...Sse,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function AU(e,t){return t.some(n=>e.startsWith(n))}function bYe(e){return e.name===Ese&&e.publicId===null&&(e.systemId===null||e.systemId===fYe)}function yYe(e){if(e.name!==Ese)return _c.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===hYe)return _c.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),mYe.has(n))return _c.QUIRKS;let r=t===null?pYe:_se;if(AU(n,r))return _c.QUIRKS;if(r=t===null?Sse:gYe,AU(n,r))return _c.LIMITED_QUIRKS}return _c.NO_QUIRKS}const NU={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},vYe="definitionurl",xYe="definitionURL",wYe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),EYe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:vt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:vt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:vt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:vt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:vt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:vt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:vt.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:vt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:vt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:vt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:vt.XMLNS}]]),_Ye=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),SYe=new Set([D.B,D.BIG,D.BLOCKQUOTE,D.BODY,D.BR,D.CENTER,D.CODE,D.DD,D.DIV,D.DL,D.DT,D.EM,D.EMBED,D.H1,D.H2,D.H3,D.H4,D.H5,D.H6,D.HEAD,D.HR,D.I,D.IMG,D.LI,D.LISTING,D.MENU,D.META,D.NOBR,D.OL,D.P,D.PRE,D.RUBY,D.S,D.SMALL,D.SPAN,D.STRONG,D.STRIKE,D.SUB,D.SUP,D.TABLE,D.TT,D.U,D.UL,D.VAR]);function TYe(e){const t=e.tagID;return t===D.FONT&&e.attrs.some(({name:r})=>r===om.COLOR||r===om.SIZE||r===om.FACE)||SYe.has(t)}function Tse(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===vYe){e.attrs[t].name=xYe;break}}function Cse(e){for(let t=0;t<e.attrs.length;t++){const n=wYe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function YM(e){for(let t=0;t<e.attrs.length;t++){const n=EYe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function CYe(e){const t=_Ye.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Lb(e.tagName))}function kYe(e,t){return t===vt.MATHML&&(e===D.MI||e===D.MO||e===D.MN||e===D.MS||e===D.MTEXT)}function AYe(e,t,n){if(t===vt.MATHML&&e===D.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===om.ENCODING){const s=n[r].value.toLowerCase();return s===NU.TEXT_HTML||s===NU.APPLICATION_XML}}return t===vt.SVG&&(e===D.FOREIGN_OBJECT||e===D.DESC||e===D.TITLE)}function NYe(e,t,n,r){return(!r||r===vt.HTML)&&AYe(e,t,n)||(!r||r===vt.MATHML)&&kYe(e,t)}const IYe="hidden",RYe=8,MYe=3;var Se;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Se||(Se={}));const OYe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},kse=new Set([D.TABLE,D.TBODY,D.TFOOT,D.THEAD,D.TR]),IU={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Xh,onParseError:null};class RU{constructor(t,n,r=null,s=null){this.fragmentContext=r,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=Se.INITIAL,this.originalInsertionMode=Se.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...IU,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new rYe(this.options,this),this.activeFormattingElements=new dYe(this.treeAdapter),this.fragmentContextID=r?Lb(this.treeAdapter.getTagName(r)):D.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new uYe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...IU,...n};t??(t=r.treeAdapter.createElement(qe.TEMPLATE,vt.HTML,[]));const s=r.treeAdapter.createElement("documentmock",vt.HTML,[]),o=new this(r,s,t);return o.fragmentContextID===D.TEMPLATE&&o.tmplInsertionModeStack.unshift(Se.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var s;if(!this.onParseError)return;const o=(s=t.location)!==null&&s!==void 0?s:OYe,i={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(i)}onItemPush(t,n,r){var s,o;(o=(s=this.treeAdapter).onItemPush)===null||o===void 0||o.call(s,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(s=(r=this.treeAdapter).onItemPop)===null||s===void 0||s.call(r,t,this.openElements.current),n){let o,i;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,i=this.fragmentContextID):{current:o,currentTagId:i}=this.openElements,this._setContextModes(o,i)}}_setContextModes(t,n){const r=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===vt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,vt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Se.TEXT}switchToPlaintextParsing(){this.insertionMode=Se.TEXT,this.originalInsertionMode=Se.IN_BODY,this.tokenizer.state=Qo.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===qe.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==vt.HTML))switch(this.fragmentContextID){case D.TITLE:case D.TEXTAREA:{this.tokenizer.state=Qo.RCDATA;break}case D.STYLE:case D.XMP:case D.IFRAME:case D.NOEMBED:case D.NOFRAMES:case D.NOSCRIPT:{this.tokenizer.state=Qo.RAWTEXT;break}case D.SCRIPT:{this.tokenizer.state=Qo.SCRIPT_DATA;break}case D.PLAINTEXT:{this.tokenizer.state=Qo.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",s=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,s),t.location){const i=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));i&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,vt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,vt.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(qe.HTML,vt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,D.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const s=this.treeAdapter.getChildNodes(n),o=r?s.lastIndexOf(r):s.length,i=s[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(i)){const{endLine:l,endCol:c,endOffset:u}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(i,{endLine:l,endCol:c,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,s=this.treeAdapter.getTagName(t),o=n.type===Cr.END_TAG&&s===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,o)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===D.SVG&&this.treeAdapter.getTagName(n)===qe.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===vt.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===D.MGLYPH||t.tagID===D.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,vt.HTML)}_processToken(t){switch(t.type){case Cr.CHARACTER:{this.onCharacter(t);break}case Cr.NULL_CHARACTER:{this.onNullCharacter(t);break}case Cr.COMMENT:{this.onComment(t);break}case Cr.DOCTYPE:{this.onDoctype(t);break}case Cr.START_TAG:{this._processStartTag(t);break}case Cr.END_TAG:{this.onEndTag(t);break}case Cr.EOF:{this.onEof(t);break}case Cr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const s=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return NYe(t,s,o,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===ud.Marker||this.openElements.contains(s.element)),r=n===-1?t-1:n-1;for(let s=r;s>=0;s--){const o=this.activeFormattingElements.entries[s];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Se.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(D.P),this.openElements.popUntilTagNamePopped(D.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case D.TR:{this.insertionMode=Se.IN_ROW;return}case D.TBODY:case D.THEAD:case D.TFOOT:{this.insertionMode=Se.IN_TABLE_BODY;return}case D.CAPTION:{this.insertionMode=Se.IN_CAPTION;return}case D.COLGROUP:{this.insertionMode=Se.IN_COLUMN_GROUP;return}case D.TABLE:{this.insertionMode=Se.IN_TABLE;return}case D.BODY:{this.insertionMode=Se.IN_BODY;return}case D.FRAMESET:{this.insertionMode=Se.IN_FRAMESET;return}case D.SELECT:{this._resetInsertionModeForSelect(t);return}case D.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case D.HTML:{this.insertionMode=this.headElement?Se.AFTER_HEAD:Se.BEFORE_HEAD;return}case D.TD:case D.TH:{if(t>0){this.insertionMode=Se.IN_CELL;return}break}case D.HEAD:{if(t>0){this.insertionMode=Se.IN_HEAD;return}break}}this.insertionMode=Se.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===D.TEMPLATE)break;if(r===D.TABLE){this.insertionMode=Se.IN_SELECT_IN_TABLE;return}}this.insertionMode=Se.IN_SELECT}_isElementCausesFosterParenting(t){return kse.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case D.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===vt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case D.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return QWe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){cZe(this,t);return}switch(this.insertionMode){case Se.INITIAL:{Xy(this,t);break}case Se.BEFORE_HTML:{Zv(this,t);break}case Se.BEFORE_HEAD:{Jv(this,t);break}case Se.IN_HEAD:{Xv(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{Qv(this,t);break}case Se.AFTER_HEAD:{ex(this,t);break}case Se.IN_BODY:case Se.IN_CAPTION:case Se.IN_CELL:case Se.IN_TEMPLATE:{Nse(this,t);break}case Se.TEXT:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{yA(this,t);break}case Se.IN_TABLE_TEXT:{Pse(this,t);break}case Se.IN_COLUMN_GROUP:{r4(this,t);break}case Se.AFTER_BODY:{s4(this,t);break}case Se.AFTER_AFTER_BODY:{H_(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){lZe(this,t);return}switch(this.insertionMode){case Se.INITIAL:{Xy(this,t);break}case Se.BEFORE_HTML:{Zv(this,t);break}case Se.BEFORE_HEAD:{Jv(this,t);break}case Se.IN_HEAD:{Xv(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{Qv(this,t);break}case Se.AFTER_HEAD:{ex(this,t);break}case Se.TEXT:{this._insertCharacters(t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{yA(this,t);break}case Se.IN_COLUMN_GROUP:{r4(this,t);break}case Se.AFTER_BODY:{s4(this,t);break}case Se.AFTER_AFTER_BODY:{H_(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){kI(this,t);return}switch(this.insertionMode){case Se.INITIAL:case Se.BEFORE_HTML:case Se.BEFORE_HEAD:case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:case Se.IN_BODY:case Se.IN_TABLE:case Se.IN_CAPTION:case Se.IN_COLUMN_GROUP:case Se.IN_TABLE_BODY:case Se.IN_ROW:case Se.IN_CELL:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:case Se.IN_TEMPLATE:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:{kI(this,t);break}case Se.IN_TABLE_TEXT:{Qy(this,t);break}case Se.AFTER_BODY:{zYe(this,t);break}case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{jYe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Se.INITIAL:{UYe(this,t);break}case Se.BEFORE_HEAD:case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:{this._err(t,et.misplacedDoctype);break}case Se.IN_TABLE_TEXT:{Qy(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,et.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?uZe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Se.INITIAL:{Xy(this,t);break}case Se.BEFORE_HTML:{HYe(this,t);break}case Se.BEFORE_HEAD:{qYe(this,t);break}case Se.IN_HEAD:{Au(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{YYe(this,t);break}case Se.AFTER_HEAD:{ZYe(this,t);break}case Se.IN_BODY:{xa(this,t);break}case Se.IN_TABLE:{ub(this,t);break}case Se.IN_TABLE_TEXT:{Qy(this,t);break}case Se.IN_CAPTION:{GKe(this,t);break}case Se.IN_COLUMN_GROUP:{JM(this,t);break}case Se.IN_TABLE_BODY:{JC(this,t);break}case Se.IN_ROW:{XC(this,t);break}case Se.IN_CELL:{KKe(this,t);break}case Se.IN_SELECT:{Fse(this,t);break}case Se.IN_SELECT_IN_TABLE:{JKe(this,t);break}case Se.IN_TEMPLATE:{QKe(this,t);break}case Se.AFTER_BODY:{tZe(this,t);break}case Se.IN_FRAMESET:{nZe(this,t);break}case Se.AFTER_FRAMESET:{sZe(this,t);break}case Se.AFTER_AFTER_BODY:{iZe(this,t);break}case Se.AFTER_AFTER_FRAMESET:{aZe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?dZe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Se.INITIAL:{Xy(this,t);break}case Se.BEFORE_HTML:{VYe(this,t);break}case Se.BEFORE_HEAD:{GYe(this,t);break}case Se.IN_HEAD:{WYe(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{KYe(this,t);break}case Se.AFTER_HEAD:{JYe(this,t);break}case Se.IN_BODY:{ZC(this,t);break}case Se.TEXT:{LKe(this,t);break}case Se.IN_TABLE:{Zx(this,t);break}case Se.IN_TABLE_TEXT:{Qy(this,t);break}case Se.IN_CAPTION:{WKe(this,t);break}case Se.IN_COLUMN_GROUP:{YKe(this,t);break}case Se.IN_TABLE_BODY:{AI(this,t);break}case Se.IN_ROW:{$se(this,t);break}case Se.IN_CELL:{ZKe(this,t);break}case Se.IN_SELECT:{Bse(this,t);break}case Se.IN_SELECT_IN_TABLE:{XKe(this,t);break}case Se.IN_TEMPLATE:{eZe(this,t);break}case Se.AFTER_BODY:{jse(this,t);break}case Se.IN_FRAMESET:{rZe(this,t);break}case Se.AFTER_FRAMESET:{oZe(this,t);break}case Se.AFTER_AFTER_BODY:{H_(this,t);break}}}onEof(t){switch(this.insertionMode){case Se.INITIAL:{Xy(this,t);break}case Se.BEFORE_HTML:{Zv(this,t);break}case Se.BEFORE_HEAD:{Jv(this,t);break}case Se.IN_HEAD:{Xv(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{Qv(this,t);break}case Se.AFTER_HEAD:{ex(this,t);break}case Se.IN_BODY:case Se.IN_TABLE:case Se.IN_CAPTION:case Se.IN_COLUMN_GROUP:case Se.IN_TABLE_BODY:case Se.IN_ROW:case Se.IN_CELL:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:{Ose(this,t);break}case Se.TEXT:{$Ke(this,t);break}case Se.IN_TABLE_TEXT:{Qy(this,t);break}case Se.IN_TEMPLATE:{zse(this,t);break}case Se.AFTER_BODY:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{ZM(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===ue.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:case Se.TEXT:case Se.IN_COLUMN_GROUP:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:{this._insertCharacters(t);break}case Se.IN_BODY:case Se.IN_CAPTION:case Se.IN_CELL:case Se.IN_TEMPLATE:case Se.AFTER_BODY:case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{Ase(this,t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{yA(this,t);break}case Se.IN_TABLE_TEXT:{Dse(this,t);break}}}}function DYe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Mse(e,t),n}function PYe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const s=e.openElements.items[r];if(s===t.element)break;e._isSpecialElement(s,e.openElements.tagIDs[r])&&(n=s)}return n||(e.openElements.shortenToLength(Math.max(r,0)),e.activeFormattingElements.removeEntry(t)),n}function LYe(e,t,n){let r=t,s=e.openElements.getCommonAncestor(t);for(let o=0,i=s;i!==n;o++,i=s){s=e.openElements.getCommonAncestor(i);const a=e.activeFormattingElements.getElementEntry(i),l=a&&o>=MYe;!a||l?(l&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(i)):(i=$Ye(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(i,r),r=i)}return r}function $Ye(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function FYe(e,t,n){const r=e.treeAdapter.getTagName(t),s=Lb(r);if(e._isElementCausesFosterParenting(s))e._fosterParentElement(n);else{const o=e.treeAdapter.getNamespaceURI(t);s===D.TEMPLATE&&o===vt.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function BYe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:s}=n,o=e.treeAdapter.createElement(s.tagName,r,s.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,s),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,s.tagID)}function KM(e,t){for(let n=0;n<RYe;n++){const r=DYe(e,t);if(!r)break;const s=PYe(e,r);if(!s)break;e.activeFormattingElements.bookmark=r;const o=LYe(e,s,r.element),i=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(o),i&&FYe(e,i,o),BYe(e,s,r)}}function kI(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function zYe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function jYe(e,t){e._appendCommentNode(t,e.document)}function ZM(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],s=e.treeAdapter.getNodeSourceCodeLocation(r);if(s&&!s.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],i=e.treeAdapter.getNodeSourceCodeLocation(o);i&&!i.endTag&&e._setEndLocation(o,t)}}}}function UYe(e,t){e._setDocumentType(t);const n=t.forceQuirks?_c.QUIRKS:yYe(t);bYe(t)||e._err(t,et.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Se.BEFORE_HTML}function Xy(e,t){e._err(t,et.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,_c.QUIRKS),e.insertionMode=Se.BEFORE_HTML,e._processToken(t)}function HYe(e,t){t.tagID===D.HTML?(e._insertElement(t,vt.HTML),e.insertionMode=Se.BEFORE_HEAD):Zv(e,t)}function VYe(e,t){const n=t.tagID;(n===D.HTML||n===D.HEAD||n===D.BODY||n===D.BR)&&Zv(e,t)}function Zv(e,t){e._insertFakeRootElement(),e.insertionMode=Se.BEFORE_HEAD,e._processToken(t)}function qYe(e,t){switch(t.tagID){case D.HTML:{xa(e,t);break}case D.HEAD:{e._insertElement(t,vt.HTML),e.headElement=e.openElements.current,e.insertionMode=Se.IN_HEAD;break}default:Jv(e,t)}}function GYe(e,t){const n=t.tagID;n===D.HEAD||n===D.BODY||n===D.HTML||n===D.BR?Jv(e,t):e._err(t,et.endTagWithoutMatchingOpenElement)}function Jv(e,t){e._insertFakeElement(qe.HEAD,D.HEAD),e.headElement=e.openElements.current,e.insertionMode=Se.IN_HEAD,e._processToken(t)}function Au(e,t){switch(t.tagID){case D.HTML:{xa(e,t);break}case D.BASE:case D.BASEFONT:case D.BGSOUND:case D.LINK:case D.META:{e._appendElement(t,vt.HTML),t.ackSelfClosing=!0;break}case D.TITLE:{e._switchToTextParsing(t,Qo.RCDATA);break}case D.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Qo.RAWTEXT):(e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_HEAD_NO_SCRIPT);break}case D.NOFRAMES:case D.STYLE:{e._switchToTextParsing(t,Qo.RAWTEXT);break}case D.SCRIPT:{e._switchToTextParsing(t,Qo.SCRIPT_DATA);break}case D.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Se.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Se.IN_TEMPLATE);break}case D.HEAD:{e._err(t,et.misplacedStartTagForHeadElement);break}default:Xv(e,t)}}function WYe(e,t){switch(t.tagID){case D.HEAD:{e.openElements.pop(),e.insertionMode=Se.AFTER_HEAD;break}case D.BODY:case D.BR:case D.HTML:{Xv(e,t);break}case D.TEMPLATE:{jm(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function jm(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==D.TEMPLATE&&e._err(t,et.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(D.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,et.endTagWithoutMatchingOpenElement)}function Xv(e,t){e.openElements.pop(),e.insertionMode=Se.AFTER_HEAD,e._processToken(t)}function YYe(e,t){switch(t.tagID){case D.HTML:{xa(e,t);break}case D.BASEFONT:case D.BGSOUND:case D.HEAD:case D.LINK:case D.META:case D.NOFRAMES:case D.STYLE:{Au(e,t);break}case D.NOSCRIPT:{e._err(t,et.nestedNoscriptInHead);break}default:Qv(e,t)}}function KYe(e,t){switch(t.tagID){case D.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Se.IN_HEAD;break}case D.BR:{Qv(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function Qv(e,t){const n=t.type===Cr.EOF?et.openElementsLeftAfterEof:et.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Se.IN_HEAD,e._processToken(t)}function ZYe(e,t){switch(t.tagID){case D.HTML:{xa(e,t);break}case D.BODY:{e._insertElement(t,vt.HTML),e.framesetOk=!1,e.insertionMode=Se.IN_BODY;break}case D.FRAMESET:{e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_FRAMESET;break}case D.BASE:case D.BASEFONT:case D.BGSOUND:case D.LINK:case D.META:case D.NOFRAMES:case D.SCRIPT:case D.STYLE:case D.TEMPLATE:case D.TITLE:{e._err(t,et.abandonedHeadElementChild),e.openElements.push(e.headElement,D.HEAD),Au(e,t),e.openElements.remove(e.headElement);break}case D.HEAD:{e._err(t,et.misplacedStartTagForHeadElement);break}default:ex(e,t)}}function JYe(e,t){switch(t.tagID){case D.BODY:case D.HTML:case D.BR:{ex(e,t);break}case D.TEMPLATE:{jm(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function ex(e,t){e._insertFakeElement(qe.BODY,D.BODY),e.insertionMode=Se.IN_BODY,KC(e,t)}function KC(e,t){switch(t.type){case Cr.CHARACTER:{Nse(e,t);break}case Cr.WHITESPACE_CHARACTER:{Ase(e,t);break}case Cr.COMMENT:{kI(e,t);break}case Cr.START_TAG:{xa(e,t);break}case Cr.END_TAG:{ZC(e,t);break}case Cr.EOF:{Ose(e,t);break}}}function Ase(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Nse(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function XYe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function QYe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function eKe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_FRAMESET)}function tKe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML)}function nKe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&CI.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,vt.HTML)}function rKe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function sKe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML),n||(e.formElement=e.openElements.current))}function oKe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const s=e.openElements.tagIDs[r];if(n===D.LI&&s===D.LI||(n===D.DD||n===D.DT)&&(s===D.DD||s===D.DT)){e.openElements.generateImpliedEndTagsWithExclusion(s),e.openElements.popUntilTagNamePopped(s);break}if(s!==D.ADDRESS&&s!==D.DIV&&s!==D.P&&e._isSpecialElement(e.openElements.items[r],s))break}e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML)}function iKe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML),e.tokenizer.state=Qo.PLAINTEXT}function aKe(e,t){e.openElements.hasInScope(D.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(D.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML),e.framesetOk=!1}function lKe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(qe.A);n&&(KM(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function cKe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function uKe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(D.NOBR)&&(KM(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,vt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function dKe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function fKe(e,t){e.treeAdapter.getDocumentMode(e.document)!==_c.QUIRKS&&e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML),e.framesetOk=!1,e.insertionMode=Se.IN_TABLE}function Ise(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,vt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Rse(e){const t=vse(e,om.TYPE);return t!=null&&t.toLowerCase()===IYe}function hKe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,vt.HTML),Rse(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function pKe(e,t){e._appendElement(t,vt.HTML),t.ackSelfClosing=!0}function mKe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._appendElement(t,vt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function gKe(e,t){t.tagName=qe.IMG,t.tagID=D.IMG,Ise(e,t)}function bKe(e,t){e._insertElement(t,vt.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Qo.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Se.TEXT}function yKe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Qo.RAWTEXT)}function vKe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Qo.RAWTEXT)}function MU(e,t){e._switchToTextParsing(t,Qo.RAWTEXT)}function xKe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Se.IN_TABLE||e.insertionMode===Se.IN_CAPTION||e.insertionMode===Se.IN_TABLE_BODY||e.insertionMode===Se.IN_ROW||e.insertionMode===Se.IN_CELL?Se.IN_SELECT_IN_TABLE:Se.IN_SELECT}function wKe(e,t){e.openElements.currentTagId===D.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML)}function EKe(e,t){e.openElements.hasInScope(D.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,vt.HTML)}function _Ke(e,t){e.openElements.hasInScope(D.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(D.RTC),e._insertElement(t,vt.HTML)}function SKe(e,t){e._reconstructActiveFormattingElements(),Tse(t),YM(t),t.selfClosing?e._appendElement(t,vt.MATHML):e._insertElement(t,vt.MATHML),t.ackSelfClosing=!0}function TKe(e,t){e._reconstructActiveFormattingElements(),Cse(t),YM(t),t.selfClosing?e._appendElement(t,vt.SVG):e._insertElement(t,vt.SVG),t.ackSelfClosing=!0}function OU(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML)}function xa(e,t){switch(t.tagID){case D.I:case D.S:case D.B:case D.U:case D.EM:case D.TT:case D.BIG:case D.CODE:case D.FONT:case D.SMALL:case D.STRIKE:case D.STRONG:{cKe(e,t);break}case D.A:{lKe(e,t);break}case D.H1:case D.H2:case D.H3:case D.H4:case D.H5:case D.H6:{nKe(e,t);break}case D.P:case D.DL:case D.OL:case D.UL:case D.DIV:case D.DIR:case D.NAV:case D.MAIN:case D.MENU:case D.ASIDE:case D.CENTER:case D.FIGURE:case D.FOOTER:case D.HEADER:case D.HGROUP:case D.DIALOG:case D.DETAILS:case D.ADDRESS:case D.ARTICLE:case D.SEARCH:case D.SECTION:case D.SUMMARY:case D.FIELDSET:case D.BLOCKQUOTE:case D.FIGCAPTION:{tKe(e,t);break}case D.LI:case D.DD:case D.DT:{oKe(e,t);break}case D.BR:case D.IMG:case D.WBR:case D.AREA:case D.EMBED:case D.KEYGEN:{Ise(e,t);break}case D.HR:{mKe(e,t);break}case D.RB:case D.RTC:{EKe(e,t);break}case D.RT:case D.RP:{_Ke(e,t);break}case D.PRE:case D.LISTING:{rKe(e,t);break}case D.XMP:{yKe(e,t);break}case D.SVG:{TKe(e,t);break}case D.HTML:{XYe(e,t);break}case D.BASE:case D.LINK:case D.META:case D.STYLE:case D.TITLE:case D.SCRIPT:case D.BGSOUND:case D.BASEFONT:case D.TEMPLATE:{Au(e,t);break}case D.BODY:{QYe(e,t);break}case D.FORM:{sKe(e,t);break}case D.NOBR:{uKe(e,t);break}case D.MATH:{SKe(e,t);break}case D.TABLE:{fKe(e,t);break}case D.INPUT:{hKe(e,t);break}case D.PARAM:case D.TRACK:case D.SOURCE:{pKe(e,t);break}case D.IMAGE:{gKe(e,t);break}case D.BUTTON:{aKe(e,t);break}case D.APPLET:case D.OBJECT:case D.MARQUEE:{dKe(e,t);break}case D.IFRAME:{vKe(e,t);break}case D.SELECT:{xKe(e,t);break}case D.OPTION:case D.OPTGROUP:{wKe(e,t);break}case D.NOEMBED:case D.NOFRAMES:{MU(e,t);break}case D.FRAMESET:{eKe(e,t);break}case D.TEXTAREA:{bKe(e,t);break}case D.NOSCRIPT:{e.options.scriptingEnabled?MU(e,t):OU(e,t);break}case D.PLAINTEXT:{iKe(e,t);break}case D.COL:case D.TH:case D.TD:case D.TR:case D.HEAD:case D.FRAME:case D.TBODY:case D.TFOOT:case D.THEAD:case D.CAPTION:case D.COLGROUP:break;default:OU(e,t)}}function CKe(e,t){if(e.openElements.hasInScope(D.BODY)&&(e.insertionMode=Se.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function kKe(e,t){e.openElements.hasInScope(D.BODY)&&(e.insertionMode=Se.AFTER_BODY,jse(e,t))}function AKe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function NKe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(D.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(D.FORM):n&&e.openElements.remove(n))}function IKe(e){e.openElements.hasInButtonScope(D.P)||e._insertFakeElement(qe.P,D.P),e._closePElement()}function RKe(e){e.openElements.hasInListItemScope(D.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(D.LI),e.openElements.popUntilTagNamePopped(D.LI))}function MKe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function OKe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function DKe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function PKe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(qe.BR,D.BR),e.openElements.pop(),e.framesetOk=!1}function Mse(e,t){const n=t.tagName,r=t.tagID;for(let s=e.openElements.stackTop;s>0;s--){const o=e.openElements.items[s],i=e.openElements.tagIDs[s];if(r===i&&(r!==D.UNKNOWN||e.treeAdapter.getTagName(o)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=s&&e.openElements.shortenToLength(s);break}if(e._isSpecialElement(o,i))break}}function ZC(e,t){switch(t.tagID){case D.A:case D.B:case D.I:case D.S:case D.U:case D.EM:case D.TT:case D.BIG:case D.CODE:case D.FONT:case D.NOBR:case D.SMALL:case D.STRIKE:case D.STRONG:{KM(e,t);break}case D.P:{IKe(e);break}case D.DL:case D.UL:case D.OL:case D.DIR:case D.DIV:case D.NAV:case D.PRE:case D.MAIN:case D.MENU:case D.ASIDE:case D.BUTTON:case D.CENTER:case D.FIGURE:case D.FOOTER:case D.HEADER:case D.HGROUP:case D.DIALOG:case D.ADDRESS:case D.ARTICLE:case D.DETAILS:case D.SEARCH:case D.SECTION:case D.SUMMARY:case D.LISTING:case D.FIELDSET:case D.BLOCKQUOTE:case D.FIGCAPTION:{AKe(e,t);break}case D.LI:{RKe(e);break}case D.DD:case D.DT:{MKe(e,t);break}case D.H1:case D.H2:case D.H3:case D.H4:case D.H5:case D.H6:{OKe(e);break}case D.BR:{PKe(e);break}case D.BODY:{CKe(e,t);break}case D.HTML:{kKe(e,t);break}case D.FORM:{NKe(e);break}case D.APPLET:case D.OBJECT:case D.MARQUEE:{DKe(e,t);break}case D.TEMPLATE:{jm(e,t);break}default:Mse(e,t)}}function Ose(e,t){e.tmplInsertionModeStack.length>0?zse(e,t):ZM(e,t)}function LKe(e,t){var n;t.tagID===D.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function $Ke(e,t){e._err(t,et.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function yA(e,t){if(e.openElements.currentTagId!==void 0&&kse.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Se.IN_TABLE_TEXT,t.type){case Cr.CHARACTER:{Pse(e,t);break}case Cr.WHITESPACE_CHARACTER:{Dse(e,t);break}}else Hw(e,t)}function FKe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_CAPTION}function BKe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_COLUMN_GROUP}function zKe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(qe.COLGROUP,D.COLGROUP),e.insertionMode=Se.IN_COLUMN_GROUP,JM(e,t)}function jKe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_TABLE_BODY}function UKe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(qe.TBODY,D.TBODY),e.insertionMode=Se.IN_TABLE_BODY,JC(e,t)}function HKe(e,t){e.openElements.hasInTableScope(D.TABLE)&&(e.openElements.popUntilTagNamePopped(D.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function VKe(e,t){Rse(t)?e._appendElement(t,vt.HTML):Hw(e,t),t.ackSelfClosing=!0}function qKe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,vt.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function ub(e,t){switch(t.tagID){case D.TD:case D.TH:case D.TR:{UKe(e,t);break}case D.STYLE:case D.SCRIPT:case D.TEMPLATE:{Au(e,t);break}case D.COL:{zKe(e,t);break}case D.FORM:{qKe(e,t);break}case D.TABLE:{HKe(e,t);break}case D.TBODY:case D.TFOOT:case D.THEAD:{jKe(e,t);break}case D.INPUT:{VKe(e,t);break}case D.CAPTION:{FKe(e,t);break}case D.COLGROUP:{BKe(e,t);break}default:Hw(e,t)}}function Zx(e,t){switch(t.tagID){case D.TABLE:{e.openElements.hasInTableScope(D.TABLE)&&(e.openElements.popUntilTagNamePopped(D.TABLE),e._resetInsertionMode());break}case D.TEMPLATE:{jm(e,t);break}case D.BODY:case D.CAPTION:case D.COL:case D.COLGROUP:case D.HTML:case D.TBODY:case D.TD:case D.TFOOT:case D.TH:case D.THEAD:case D.TR:break;default:Hw(e,t)}}function Hw(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,KC(e,t),e.fosterParentingEnabled=n}function Dse(e,t){e.pendingCharacterTokens.push(t)}function Pse(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Qy(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Hw(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Lse=new Set([D.CAPTION,D.COL,D.COLGROUP,D.TBODY,D.TD,D.TFOOT,D.TH,D.THEAD,D.TR]);function GKe(e,t){const n=t.tagID;Lse.has(n)?e.openElements.hasInTableScope(D.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(D.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_TABLE,ub(e,t)):xa(e,t)}function WKe(e,t){const n=t.tagID;switch(n){case D.CAPTION:case D.TABLE:{e.openElements.hasInTableScope(D.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(D.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_TABLE,n===D.TABLE&&Zx(e,t));break}case D.BODY:case D.COL:case D.COLGROUP:case D.HTML:case D.TBODY:case D.TD:case D.TFOOT:case D.TH:case D.THEAD:case D.TR:break;default:ZC(e,t)}}function JM(e,t){switch(t.tagID){case D.HTML:{xa(e,t);break}case D.COL:{e._appendElement(t,vt.HTML),t.ackSelfClosing=!0;break}case D.TEMPLATE:{Au(e,t);break}default:r4(e,t)}}function YKe(e,t){switch(t.tagID){case D.COLGROUP:{e.openElements.currentTagId===D.COLGROUP&&(e.openElements.pop(),e.insertionMode=Se.IN_TABLE);break}case D.TEMPLATE:{jm(e,t);break}case D.COL:break;default:r4(e,t)}}function r4(e,t){e.openElements.currentTagId===D.COLGROUP&&(e.openElements.pop(),e.insertionMode=Se.IN_TABLE,e._processToken(t))}function JC(e,t){switch(t.tagID){case D.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_ROW;break}case D.TH:case D.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(qe.TR,D.TR),e.insertionMode=Se.IN_ROW,XC(e,t);break}case D.CAPTION:case D.COL:case D.COLGROUP:case D.TBODY:case D.TFOOT:case D.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE,ub(e,t));break}default:ub(e,t)}}function AI(e,t){const n=t.tagID;switch(t.tagID){case D.TBODY:case D.TFOOT:case D.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE);break}case D.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE,Zx(e,t));break}case D.BODY:case D.CAPTION:case D.COL:case D.COLGROUP:case D.HTML:case D.TD:case D.TH:case D.TR:break;default:Zx(e,t)}}function XC(e,t){switch(t.tagID){case D.TH:case D.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_CELL,e.activeFormattingElements.insertMarker();break}case D.CAPTION:case D.COL:case D.COLGROUP:case D.TBODY:case D.TFOOT:case D.THEAD:case D.TR:{e.openElements.hasInTableScope(D.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,JC(e,t));break}default:ub(e,t)}}function $se(e,t){switch(t.tagID){case D.TR:{e.openElements.hasInTableScope(D.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY);break}case D.TABLE:{e.openElements.hasInTableScope(D.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,AI(e,t));break}case D.TBODY:case D.TFOOT:case D.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(D.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,AI(e,t));break}case D.BODY:case D.CAPTION:case D.COL:case D.COLGROUP:case D.HTML:case D.TD:case D.TH:break;default:Zx(e,t)}}function KKe(e,t){const n=t.tagID;Lse.has(n)?(e.openElements.hasInTableScope(D.TD)||e.openElements.hasInTableScope(D.TH))&&(e._closeTableCell(),XC(e,t)):xa(e,t)}function ZKe(e,t){const n=t.tagID;switch(n){case D.TD:case D.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_ROW);break}case D.TABLE:case D.TBODY:case D.TFOOT:case D.THEAD:case D.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),$se(e,t));break}case D.BODY:case D.CAPTION:case D.COL:case D.COLGROUP:case D.HTML:break;default:ZC(e,t)}}function Fse(e,t){switch(t.tagID){case D.HTML:{xa(e,t);break}case D.OPTION:{e.openElements.currentTagId===D.OPTION&&e.openElements.pop(),e._insertElement(t,vt.HTML);break}case D.OPTGROUP:{e.openElements.currentTagId===D.OPTION&&e.openElements.pop(),e.openElements.currentTagId===D.OPTGROUP&&e.openElements.pop(),e._insertElement(t,vt.HTML);break}case D.HR:{e.openElements.currentTagId===D.OPTION&&e.openElements.pop(),e.openElements.currentTagId===D.OPTGROUP&&e.openElements.pop(),e._appendElement(t,vt.HTML),t.ackSelfClosing=!0;break}case D.INPUT:case D.KEYGEN:case D.TEXTAREA:case D.SELECT:{e.openElements.hasInSelectScope(D.SELECT)&&(e.openElements.popUntilTagNamePopped(D.SELECT),e._resetInsertionMode(),t.tagID!==D.SELECT&&e._processStartTag(t));break}case D.SCRIPT:case D.TEMPLATE:{Au(e,t);break}}}function Bse(e,t){switch(t.tagID){case D.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===D.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===D.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===D.OPTGROUP&&e.openElements.pop();break}case D.OPTION:{e.openElements.currentTagId===D.OPTION&&e.openElements.pop();break}case D.SELECT:{e.openElements.hasInSelectScope(D.SELECT)&&(e.openElements.popUntilTagNamePopped(D.SELECT),e._resetInsertionMode());break}case D.TEMPLATE:{jm(e,t);break}}}function JKe(e,t){const n=t.tagID;n===D.CAPTION||n===D.TABLE||n===D.TBODY||n===D.TFOOT||n===D.THEAD||n===D.TR||n===D.TD||n===D.TH?(e.openElements.popUntilTagNamePopped(D.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Fse(e,t)}function XKe(e,t){const n=t.tagID;n===D.CAPTION||n===D.TABLE||n===D.TBODY||n===D.TFOOT||n===D.THEAD||n===D.TR||n===D.TD||n===D.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(D.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Bse(e,t)}function QKe(e,t){switch(t.tagID){case D.BASE:case D.BASEFONT:case D.BGSOUND:case D.LINK:case D.META:case D.NOFRAMES:case D.SCRIPT:case D.STYLE:case D.TEMPLATE:case D.TITLE:{Au(e,t);break}case D.CAPTION:case D.COLGROUP:case D.TBODY:case D.TFOOT:case D.THEAD:{e.tmplInsertionModeStack[0]=Se.IN_TABLE,e.insertionMode=Se.IN_TABLE,ub(e,t);break}case D.COL:{e.tmplInsertionModeStack[0]=Se.IN_COLUMN_GROUP,e.insertionMode=Se.IN_COLUMN_GROUP,JM(e,t);break}case D.TR:{e.tmplInsertionModeStack[0]=Se.IN_TABLE_BODY,e.insertionMode=Se.IN_TABLE_BODY,JC(e,t);break}case D.TD:case D.TH:{e.tmplInsertionModeStack[0]=Se.IN_ROW,e.insertionMode=Se.IN_ROW,XC(e,t);break}default:e.tmplInsertionModeStack[0]=Se.IN_BODY,e.insertionMode=Se.IN_BODY,xa(e,t)}}function eZe(e,t){t.tagID===D.TEMPLATE&&jm(e,t)}function zse(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(D.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):ZM(e,t)}function tZe(e,t){t.tagID===D.HTML?xa(e,t):s4(e,t)}function jse(e,t){var n;if(t.tagID===D.HTML){if(e.fragmentContext||(e.insertionMode=Se.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===D.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else s4(e,t)}function s4(e,t){e.insertionMode=Se.IN_BODY,KC(e,t)}function nZe(e,t){switch(t.tagID){case D.HTML:{xa(e,t);break}case D.FRAMESET:{e._insertElement(t,vt.HTML);break}case D.FRAME:{e._appendElement(t,vt.HTML),t.ackSelfClosing=!0;break}case D.NOFRAMES:{Au(e,t);break}}}function rZe(e,t){t.tagID===D.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==D.FRAMESET&&(e.insertionMode=Se.AFTER_FRAMESET))}function sZe(e,t){switch(t.tagID){case D.HTML:{xa(e,t);break}case D.NOFRAMES:{Au(e,t);break}}}function oZe(e,t){t.tagID===D.HTML&&(e.insertionMode=Se.AFTER_AFTER_FRAMESET)}function iZe(e,t){t.tagID===D.HTML?xa(e,t):H_(e,t)}function H_(e,t){e.insertionMode=Se.IN_BODY,KC(e,t)}function aZe(e,t){switch(t.tagID){case D.HTML:{xa(e,t);break}case D.NOFRAMES:{Au(e,t);break}}}function lZe(e,t){t.chars=po,e._insertCharacters(t)}function cZe(e,t){e._insertCharacters(t),e.framesetOk=!1}function Use(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==vt.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function uZe(e,t){if(TYe(t))Use(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===vt.MATHML?Tse(t):r===vt.SVG&&(CYe(t),Cse(t)),YM(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function dZe(e,t){if(t.tagID===D.P||t.tagID===D.BR){Use(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===vt.HTML){e._endTagOutsideForeignContent(t);break}const s=e.treeAdapter.getTagName(r);if(s.toLowerCase()===t.tagName){t.tagName=s,e.openElements.shortenToLength(n);break}}}qe.AREA,qe.BASE,qe.BASEFONT,qe.BGSOUND,qe.BR,qe.COL,qe.EMBED,qe.FRAME,qe.HR,qe.IMG,qe.INPUT,qe.KEYGEN,qe.LINK,qe.META,qe.PARAM,qe.SOURCE,qe.TRACK,qe.WBR;const QC=Hse("end"),Nd=Hse("start");function Hse(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function fZe(e){const t=Nd(e),n=QC(e);if(t&&n)return{start:t,end:n}}const hZe=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,pZe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),DU={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Vse(e,t){const n=SZe(e),r=uM("type",{handlers:{root:mZe,element:gZe,text:bZe,comment:Gse,doctype:yZe,raw:xZe},unknown:wZe}),s={parser:n?new RU(DU):RU.getFragmentParser(void 0,DU),handle(a){r(a,s)},stitches:!1,options:t||{}};r(e,s),$b(s,Nd());const o=n?s.parser.document:s.parser.getFragment(),i=TWe(o,{file:s.options.file});return s.stitches&&ab(i,"comment",function(a,l,c){const u=a;if(u.value.stitch&&c&&l!==void 0){const f=c.children;return f[l]=u.value.stitch,l}}),i.type==="root"&&i.children.length===1&&i.children[0].type===e.type?i.children[0]:i}function qse(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function mZe(e,t){qse(e.children,t)}function gZe(e,t){EZe(e,t),qse(e.children,t),_Ze(e,t)}function bZe(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:Cr.CHARACTER,chars:e.value,location:Vw(e)};$b(t,Nd(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function yZe(e,t){const n={type:Cr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Vw(e)};$b(t,Nd(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function vZe(e,t){t.stitches=!0;const n=TZe(e);if("children"in e&&"children"in n){const r=Vse({type:"root",children:e.children},t.options);n.children=r.children}Gse({type:"comment",value:{stitch:n}},t)}function Gse(e,t){const n=e.value,r={type:Cr.COMMENT,data:n,location:Vw(e)};$b(t,Nd(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function xZe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Wse(t,Nd(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(hZe,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function wZe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))vZe(n,t);else{let r="";throw pZe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function $b(e,t){Wse(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Qo.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Wse(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function EZe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Qo.PLAINTEXT)return;$b(t,Nd(e));const r=t.parser.openElements.current;let s="namespaceURI"in r?r.namespaceURI:pd.html;s===pd.html&&n==="svg"&&(s=pd.svg);const o=IWe({...e,children:[]},{space:s===pd.svg?"svg":"html"}),i={type:Cr.START_TAG,tagName:n,tagID:Lb(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:Vw(e)};t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function _Ze(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Tne.includes(n)||t.parser.tokenizer.state===Qo.PLAINTEXT)return;$b(t,QC(e));const r={type:Cr.END_TAG,tagName:n,tagID:Lb(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Vw(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Qo.RCDATA||t.parser.tokenizer.state===Qo.RAWTEXT||t.parser.tokenizer.state===Qo.SCRIPT_DATA)&&(t.parser.tokenizer.state=Qo.DATA)}function SZe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function Vw(e){const t=Nd(e)||{line:void 0,column:void 0,offset:void 0},n=QC(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function TZe(e){return"children"in e?cb({...e,children:[]}):cb(e)}function CZe(e){return function(t,n){return Vse(t,{...e,file:n})}}const Of={eof:null,asterisk:42,underscore:95,tilde:126},db={attentionSideAfter:2,characterGroupPunctuation:2,characterGroupWhitespace:1},rd={data:"data",characterEscape:"characterEscape",emphasis:"emphasis",emphasisSequence:"emphasisSequence",emphasisText:"emphasisText",strong:"strong",strongSequence:"strongSequence",strongText:"strongText"},Oa=Y0(/[A-Za-z]/),ga=Y0(/[\dA-Za-z]/),kZe=Y0(/[#-'*+\--9=?A-Z^-~]/);function o4(e){return e!==null&&(e<32||e===127)}const NI=Y0(/\d/),AZe=Y0(/[\dA-Fa-f]/),NZe=Y0(/[!-/:-@[-`{-~]/);function Tn(e){return e!==null&&e<-2}function $s(e){return e!==null&&(e<0||e===32)}function Dr(e){return e===-2||e===-1||e===32}const ek=Y0(new RegExp("\\p{P}|\\p{S}","u")),wm=Y0(/\s/);function Y0(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function IZe(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function RZe(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function MZe(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9776&&e<=9783||e>=9800&&e<=9811||e===9855||e>=9866&&e<=9871||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e>=94192&&e<=94198||e>=94208&&e<=101589||e>=101631&&e<=101662||e>=101760&&e<=101874||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128728||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129674||e>=129678&&e<=129734||e===129736||e>=129741&&e<=129756||e>=129759&&e<=129770||e>=129775&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function OZe(e){return IZe(e)?"ambiguous":RZe(e)?"fullwidth":e===8361||e>=65377&&e<=65470||e>=65474&&e<=65479||e>=65482&&e<=65487||e>=65490&&e<=65495||e>=65498&&e<=65500||e>=65512&&e<=65518?"halfwidth":e>=32&&e<=126||e===162||e===163||e===165||e===166||e===172||e===175||e>=10214&&e<=10221||e===10629||e===10630?"narrow":MZe(e)?"wide":"neutral"}function DZe(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function PZe(e){return DZe(e),OZe(e)}var LZe=Object.defineProperty,$Ze=(e,t,n)=>t in e?LZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FZe=(e,t,n)=>$Ze(e,t+"",n);function BZe(e){return new RegExp("^\\p{Emoji_Presentation}","u").test(String.fromCodePoint(e))}function zZe(e){if(!e||e<4352)return!1;switch(PZe(e)){case"fullwidth":case"halfwidth":return!0;case"wide":return!BZe(e);case"narrow":return!1;case"ambiguous":return 917760<=e&&e<=917999?null:!1;case"neutral":return new RegExp("^\\p{sc=Hangul}","u").test(String.fromCodePoint(e))}}function jZe(e,t){return t!==65025||!e||e<8216?!1:e===8216||e===8217||e===8220||e===8221}function UZe(e){return e!==null&&e>=65024&&e<=65038}var HZe=Yse(new RegExp("\\p{P}|\\p{S}","u")),VZe=Yse(/\s/);function Yse(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCodePoint(n))}}var Zl;(e=>{e.spaceOrPunctuation=3,e.cjk=4096,e.cjkPunctuation=4098,e.ivs=8192,e.cjkOrIvs=12288,e.nonEmojiGeneralUseVS=16384,e.variationSelector=24576,e.ivsToCjkRightShift=1})(Zl||(Zl={}));function P1(e){if(e===Of.eof||$s(e)||VZe(e))return db.characterGroupWhitespace;let t=0;if(e>=4352){if(UZe(e))return Zl.nonEmojiGeneralUseVS;switch(zZe(e)){case null:return Zl.ivs;case!0:t|=Zl.cjk;break}}return HZe(e)&&(t|=db.characterGroupPunctuation),t}function Kse(e,t,n){if(!YZe(e))return e;const r=t(),s=P1(r);return!r||Jx(s)?e:jZe(r,n)?Zl.cjkPunctuation:qZe(s)}function qZe(e){return e&~Zl.ivs}function Jx(e){return!!(e&db.characterGroupWhitespace)}function i4(e){return(e&Zl.cjkPunctuation)===db.characterGroupPunctuation}function II(e){return!!(e&Zl.cjk)}function GZe(e){return e===Zl.ivs}function WZe(e){return!!(e&Zl.cjkOrIvs)}function YZe(e){return e===Zl.nonEmojiGeneralUseVS}function PU(e){return!!(e&Zl.spaceOrPunctuation)}function Zse(e){return!!(e&&e>=55296&&e<=56319)}function Jse(e){return!!(e&&e>=56320&&e<=57343)}function Xse(e,t,n){if(t._bufferIndex<2)return e;const s=n({start:{...t,_bufferIndex:t._bufferIndex-2},end:t}).codePointAt(0);return s&&s>=65536?s:e}function KZe(e,t,n){const r=e>=65536?2:1;if(t._bufferIndex<1+r)return null;const s=t._bufferIndex-r-2,o=n({start:{...t,_bufferIndex:s>=0?s:0},end:{...t,_bufferIndex:t._bufferIndex-r}}),i=o.charCodeAt(o.length-1);if(Number.isNaN(i))return null;if(o.length<2||i<56320||57343<i)return i;const a=o.codePointAt(0);return a&&a>=65536?a:i}var Qse=class{constructor(e,t,n){this.previousCode=e,this.nowPoint=t,this.sliceSerialize=n,FZe(this,"cachedValue")}value(){return this.cachedValue===void 0&&(this.cachedValue=KZe(this.previousCode,this.nowPoint,this.sliceSerialize)),this.cachedValue}};function eoe(e,t,n){const r=n({start:t,end:{...t,_bufferIndex:t._bufferIndex+2}}).codePointAt(0);return r&&r>=65536?r:e}function oa(e,t,n,r){const s=e.length;let o=0,i;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);o<r.length;)i=r.slice(o,o+1e4),i.unshift(t,0),e.splice(...i),o+=1e4,t+=1e4}function ra(e,t){return e.length>0?(oa(e,e.length,0,t),e):t}function Fb(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const o=e[s].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}var vA={name:"attention",resolveAll:ZZe,tokenize:JZe};function ZZe(e,t){let n=-1,r,s,o,i,a,l,c,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},m={...e[n][1].start};LU(f,-l),LU(m,l),i={type:l>1?rd.strongSequence:rd.emphasisSequence,start:f,end:{...e[r][1].end}},a={type:l>1?rd.strongSequence:rd.emphasisSequence,start:{...e[n][1].start},end:m},o={type:l>1?rd.strongText:rd.emphasisText,start:{...e[r][1].end},end:{...e[n][1].start}},s={type:l>1?rd.strong:rd.emphasis,start:{...i.start},end:{...a.end}},e[r][1].end={...i.start},e[n][1].start={...a.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=ra(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=ra(c,[["enter",s,t],["enter",i,t],["exit",i,t],["enter",o,t]]),t.parser.constructs.insideSpan.null,c=ra(c,Fb(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=ra(c,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,c=ra(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,oa(e,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function JZe(e,t){const n=this.parser.constructs.attentionMarkers.null,{now:r,sliceSerialize:s,previous:o}=this,i=Jse(o)?Xse(o,r(),s):o,a=P1(i),l=new Qse(i,r(),s),c=Kse(a,l.value.bind(l),i);let u;return f;function f(g){return u=g,e.enter("attentionSequence"),m(g)}function m(g){if(g===u)return e.consume(g),m;const y=e.exit("attentionSequence"),v=Zse(g)?eoe(g,r(),s):g,x=P1(v),E=i4(c),T=E||Jx(c),k=i4(x),I=k||Jx(x),O=WZe(c),M=!I||k&&(T||O)||n.includes(g),P=!T||E&&(I||II(x))||n.includes(i);return y._open=!!(u===Of.asterisk?M:M&&(PU(c)||!P)),y._close=!!(u===Of.asterisk?P:P&&(PU(x)||!M)),t(g)}}function LU(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}function XZe(){return{text:{[Of.asterisk]:vA,[Of.underscore]:vA},insideSpan:{null:[vA]}}}function QZe(){const e=this.data();(e.micromarkExtensions||(e.micromarkExtensions=[])).push(XZe())}function eJe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:s};return n==null&&(n=!0),{text:{[Of.tilde]:r},insideSpan:{null:[r]},attentionMarkers:{null:[Of.tilde]}};function s(i,a){let l=-1;for(;++l<i.length;)if(i[l][0]==="enter"&&i[l][1].type==="strikethroughSequenceTemporary"&&i[l][1]._close){let c=l;for(;c--;)if(i[c][0]==="exit"&&i[c][1].type==="strikethroughSequenceTemporary"&&i[c][1]._open&&i[l][1].end.offset-i[l][1].start.offset===i[c][1].end.offset-i[c][1].start.offset){i[l][1].type="strikethroughSequence",i[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},i[c][1].start),end:Object.assign({},i[l][1].end)},f={type:"strikethroughText",start:Object.assign({},i[c][1].end),end:Object.assign({},i[l][1].start)},m=[["enter",u,a],["enter",i[c][1],a],["exit",i[c][1],a],["enter",f,a]],g=a.parser.constructs.insideSpan.null;g&&oa(m,m.length,0,Fb(g,i.slice(c+1,l),a)),oa(m,m.length,0,[["exit",f,a],["enter",i[l][1],a],["exit",i[l][1],a],["exit",u,a]]),oa(i,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<i.length;)i[l][1].type==="strikethroughSequenceTemporary"&&(i[l][1].type=rd.data);return i}function o(i,a,l){const{now:c,sliceSerialize:u,previous:f}=this,m=Jse(f)?Xse(f,c(),u):f,g=P1(m),y=new Qse(m,c(),u),v=Kse(g,y.value.bind(y),m),x=this.events;let E=0;return T;function T(I){return m===Of.tilde&&x[x.length-1][1].type!==rd.characterEscape?l(I):(i.enter("strikethroughSequenceTemporary"),k(I))}function k(I){const O=P1(m);if(I===Of.tilde)return E>1?l(I):(i.consume(I),E++,k);if(E<2&&!n)return l(I);const M=i.exit("strikethroughSequenceTemporary"),P=Zse(I)?eoe(I,c(),u):I,j=P1(P),U=i4(v)||Jx(v),H=i4(j)||Jx(j),F=II(v)||GZe(O);return M._open=!H||j===db.attentionSideAfter&&(U||F),M._close=!U||O===db.attentionSideAfter&&(H||II(j)),a(I)}}}function tJe(e){const t=this.data();(t.micromarkExtensions||(t.micromarkExtensions=[])).push(eJe(e))}function nJe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function rJe(e,t,n){const s=Bw((n||{}).ignore||[]),o=sJe(t);let i=-1;for(;++i<o.length;)xM(e,"text",a);function a(c,u){let f=-1,m;for(;++f<u.length;){const g=u[f],y=m?m.children:void 0;if(s(g,y?y.indexOf(g):void 0,m))return;m=g}if(m)return l(c,u)}function l(c,u){const f=u[u.length-1],m=o[i][0],g=o[i][1];let y=0;const x=f.children.indexOf(c);let E=!1,T=[];m.lastIndex=0;let k=m.exec(c.value);for(;k;){const I=k.index,O={index:k.index,input:k.input,stack:[...u,c]};let M=g(...k,O);if(typeof M=="string"&&(M=M.length>0?{type:"text",value:M}:void 0),M===!1?m.lastIndex=I+1:(y!==I&&T.push({type:"text",value:c.value.slice(y,I)}),Array.isArray(M)?T.push(...M):M&&T.push(M),y=I+k[0].length,E=!0),!m.global)break;k=m.exec(c.value)}return E?(y<c.value.length&&T.push({type:"text",value:c.value.slice(y)}),f.children.splice(x,1,...T)):T=[c],x+T.length}}function sJe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const s=n[r];t.push([oJe(s[0]),iJe(s[1])])}return t}function oJe(e){return typeof e=="string"?new RegExp(nJe(e),"g"):e}function iJe(e){return typeof e=="function"?e:function(){return e}}const xA="phrasing",wA=["autolink","link","image","label"];function aJe(){return{transforms:[pJe],enter:{literalAutolink:cJe,literalAutolinkEmail:EA,literalAutolinkHttp:EA,literalAutolinkWww:EA},exit:{literalAutolink:hJe,literalAutolinkEmail:fJe,literalAutolinkHttp:uJe,literalAutolinkWww:dJe}}}function lJe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:xA,notInConstruct:wA},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:xA,notInConstruct:wA},{character:":",before:"[ps]",after:"\\/",inConstruct:xA,notInConstruct:wA}]}}function cJe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function EA(e){this.config.enter.autolinkProtocol.call(this,e)}function uJe(e){this.config.exit.autolinkProtocol.call(this,e)}function dJe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function fJe(e){this.config.exit.autolinkEmail.call(this,e)}function hJe(e){this.exit(e)}function pJe(e){rJe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,mJe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),gJe]],{ignore:["link","linkReference"]})}function mJe(e,t,n,r,s){let o="";if(!toe(s)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!bJe(n)))return!1;const i=yJe(n+r);if(!i[0])return!1;const a={type:"link",title:null,url:o+t+i[0],children:[{type:"text",value:t+i[0]}]};return i[1]?[a,{type:"text",value:i[1]}]:a}function gJe(e,t,n,r){return!toe(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function bJe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function yJe(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=UT(e,"(");let o=UT(e,")");for(;r!==-1&&s>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function toe(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||wm(n)||ek(n))&&(!t||n!==47)}function mu(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}noe.peek=kJe;function vJe(){this.buffer()}function xJe(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function wJe(){this.buffer()}function EJe(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function _Je(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=mu(this.sliceSerialize(e)).toLowerCase(),n.label=t}function SJe(e){this.exit(e)}function TJe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=mu(this.sliceSerialize(e)).toLowerCase(),n.label=t}function CJe(e){this.exit(e)}function kJe(){return"["}function noe(e,t,n,r){const s=n.createTracker(r);let o=s.move("[^");const i=n.enter("footnoteReference"),a=n.enter("reference");return o+=s.move(n.safe(n.associationId(e),{after:"]",before:o})),a(),i(),o+=s.move("]"),o}function AJe(){return{enter:{gfmFootnoteCallString:vJe,gfmFootnoteCall:xJe,gfmFootnoteDefinitionLabelString:wJe,gfmFootnoteDefinition:EJe},exit:{gfmFootnoteCallString:_Je,gfmFootnoteCall:SJe,gfmFootnoteDefinitionLabelString:TJe,gfmFootnoteDefinition:CJe}}}function NJe(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:noe},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,o,i){const a=o.createTracker(i);let l=a.move("[^");const c=o.enter("footnoteDefinition"),u=o.enter("label");return l+=a.move(o.safe(o.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,a.current()),t?roe:IJe))),c(),l}}function IJe(e,t,n){return t===0?e:roe(e,t,n)}function roe(e,t,n){return(n?"":"    ")+e}const RJe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];soe.peek=LJe;function MJe(){return{canContainEols:["delete"],enter:{strikethrough:DJe},exit:{strikethrough:PJe}}}function OJe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:RJe}],handlers:{delete:soe}}}function DJe(e){this.enter({type:"delete",children:[]},e)}function PJe(e){this.exit(e)}function soe(e,t,n,r){const s=n.createTracker(r),o=n.enter("strikethrough");let i=s.move("~~");return i+=n.containerPhrasing(e,{...s.current(),before:i,after:"~"}),i+=s.move("~~"),o(),i}function LJe(){return"~"}function $Je(e){return e.length}function FJe(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||$Je,o=[],i=[],a=[],l=[];let c=0,u=-1;for(;++u<e.length;){const v=[],x=[];let E=-1;for(e[u].length>c&&(c=e[u].length);++E<e[u].length;){const T=BJe(e[u][E]);if(n.alignDelimiters!==!1){const k=s(T);x[E]=k,(l[E]===void 0||k>l[E])&&(l[E]=k)}v.push(T)}i[u]=v,a[u]=x}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<c;)o[f]=$U(r[f]);else{const v=$U(r);for(;++f<c;)o[f]=v}f=-1;const m=[],g=[];for(;++f<c;){const v=o[f];let x="",E="";v===99?(x=":",E=":"):v===108?x=":":v===114&&(E=":");let T=n.alignDelimiters===!1?1:Math.max(1,l[f]-x.length-E.length);const k=x+"-".repeat(T)+E;n.alignDelimiters!==!1&&(T=x.length+T+E.length,T>l[f]&&(l[f]=T),g[f]=T),m[f]=k}i.splice(1,0,m),a.splice(1,0,g),u=-1;const y=[];for(;++u<i.length;){const v=i[u],x=a[u];f=-1;const E=[];for(;++f<c;){const T=v[f]||"";let k="",I="";if(n.alignDelimiters!==!1){const O=l[f]-(x[f]||0),M=o[f];M===114?k=" ".repeat(O):M===99?O%2?(k=" ".repeat(O/2+.5),I=" ".repeat(O/2-.5)):(k=" ".repeat(O/2),I=k):I=" ".repeat(O)}n.delimiterStart!==!1&&!f&&E.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||f)&&E.push(" "),n.alignDelimiters!==!1&&E.push(k),E.push(T),n.alignDelimiters!==!1&&E.push(I),n.padding!==!1&&E.push(" "),(n.delimiterEnd!==!1||f!==c-1)&&E.push("|")}y.push(n.delimiterEnd===!1?E.join("").replace(/ +$/,""):E.join(""))}return y.join(`
`)}function BJe(e){return e==null?"":String(e)}function $U(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function zJe(e,t,n,r){const s=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const i=n.indentLines(n.containerFlow(e,o.current()),jJe);return s(),i}function jJe(e,t,n){return">"+(n?"":" ")+e}function UJe(e,t){return FU(e,t.inConstruct,!0)&&!FU(e,t.notInConstruct,!1)}function FU(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function BU(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&UJe(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function ooe(e,t){const n=String(e);let r=n.indexOf(t),s=r,o=0,i=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++o>i&&(i=o):o=1,s=r+t.length,r=n.indexOf(t,s);return i}function HJe(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function VJe(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function qJe(e,t,n,r){const s=VJe(n),o=e.value||"",i=s==="`"?"GraveAccent":"Tilde";if(HJe(e,n)){const f=n.enter("codeIndented"),m=n.indentLines(o,GJe);return f(),m}const a=n.createTracker(r),l=s.repeat(Math.max(ooe(o,s)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(e.lang){const f=n.enter(`codeFencedLang${i}`);u+=a.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...a.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${i}`);u+=a.move(" "),u+=a.move(n.safe(e.meta,{before:u,after:`
`,encode:["`"],...a.current()})),f()}return u+=a.move(`
`),o&&(u+=a.move(o+`
`)),u+=a.move(l),c(),u}function GJe(e,t,n){return(n?"":"    ")+e}function XM(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function WJe(e,t,n,r){const s=XM(n),o=s==='"'?"Quote":"Apostrophe",i=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":`
`,...l.current()}))),a(),e.title&&(a=n.enter(`title${o}`),c+=l.move(" "+s),c+=l.move(n.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),i(),c}function YJe(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Xx(e){return"&#x"+e.toString(16).toUpperCase()+";"}function fb(e){if(e===null||$s(e)||wm(e))return 1;if(ek(e))return 2}function a4(e,t,n){const r=fb(e),s=fb(t);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}ioe.peek=KJe;function ioe(e,t,n,r){const s=YJe(n),o=n.enter("emphasis"),i=n.createTracker(r),a=i.move(s);let l=i.move(n.containerPhrasing(e,{after:s,before:a,...i.current()}));const c=l.charCodeAt(0),u=a4(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=Xx(c)+l.slice(1));const f=l.charCodeAt(l.length-1),m=a4(r.after.charCodeAt(0),f,s);m.inside&&(l=l.slice(0,-1)+Xx(f));const g=i.move(s);return o(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function KJe(e,t,n){return n.options.emphasis||"*"}const ZJe={};function QM(e,t){const n=ZJe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return aoe(e,r,s)}function aoe(e,t,n){if(JJe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return zU(e.children,t,n)}return Array.isArray(e)?zU(e,t,n):""}function zU(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=aoe(e[s],t,n);return r.join("")}function JJe(e){return!!(e&&typeof e=="object")}function XJe(e,t){let n=!1;return ab(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,dI}),!!((!e.depth||e.depth<3)&&QM(e)&&(t.options.setext||n))}function QJe(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(XJe(e,n)){const u=n.enter("headingSetext"),f=n.enter("phrasing"),m=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return f(),u(),m+`
`+(s===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const i="#".repeat(s),a=n.enter("headingAtx"),l=n.enter("phrasing");o.move(i+" ");let c=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(c)&&(c=Xx(c.charCodeAt(0))+c.slice(1)),c=c?i+" "+c:i,n.options.closeAtx&&(c+=" "+i),l(),a(),c}loe.peek=eXe;function loe(e){return e.value||""}function eXe(){return"<"}coe.peek=tXe;function coe(e,t,n,r){const s=XM(n),o=s==='"'?"Quote":"Apostrophe",i=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=n.enter(`title${o}`),c+=l.move(" "+s),c+=l.move(n.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),c+=l.move(")"),i(),c}function tXe(){return"!"}uoe.peek=nXe;function uoe(e,t,n,r){const s=e.referenceType,o=n.enter("imageReference");let i=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),i();const u=n.stack;n.stack=[],i=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return i(),n.stack=u,o(),s==="full"||!c||c!==f?l+=a.move(f+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function nXe(){return"!"}doe.peek=rXe;function doe(e,t,n){let r=e.value||"",s="`",o=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const i=n.unsafe[o],a=n.compilePattern(i);let l;if(i.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return s+r+s}function rXe(){return"`"}function foe(e,t){const n=QM(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}hoe.peek=sXe;function hoe(e,t,n,r){const s=XM(n),o=s==='"'?"Quote":"Apostrophe",i=n.createTracker(r);let a,l;if(foe(e,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let f=i.move("<");return f+=i.move(n.containerPhrasing(e,{before:f,after:">",...i.current()})),f+=i.move(">"),a(),n.stack=u,f}a=n.enter("link"),l=n.enter("label");let c=i.move("[");return c+=i.move(n.containerPhrasing(e,{before:c,after:"](",...i.current()})),c+=i.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=i.move("<"),c+=i.move(n.safe(e.url,{before:c,after:">",...i.current()})),c+=i.move(">")):(l=n.enter("destinationRaw"),c+=i.move(n.safe(e.url,{before:c,after:e.title?" ":")",...i.current()}))),l(),e.title&&(l=n.enter(`title${o}`),c+=i.move(" "+s),c+=i.move(n.safe(e.title,{before:c,after:s,...i.current()})),c+=i.move(s),l()),c+=i.move(")"),a(),c}function sXe(e,t,n){return foe(e,n)?"<":"["}poe.peek=oXe;function poe(e,t,n,r){const s=e.referenceType,o=n.enter("linkReference");let i=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),i();const u=n.stack;n.stack=[],i=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return i(),n.stack=u,o(),s==="full"||!c||c!==f?l+=a.move(f+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function oXe(){return"["}function e9(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function iXe(e){const t=e9(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function aXe(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function moe(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function lXe(e,t,n,r){const s=n.enter("list"),o=n.bulletCurrent;let i=e.ordered?aXe(n):e9(n);const a=e.ordered?i==="."?")":".":iXe(n);let l=t&&n.bulletLastUsed?i===n.bulletLastUsed:!1;if(!e.ordered){const u=e.children?e.children[0]:void 0;if((i==="*"||i==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),moe(n)===i&&u){let f=-1;for(;++f<e.children.length;){const m=e.children[f];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(i=a),n.bulletCurrent=i;const c=n.containerFlow(e,r);return n.bulletLastUsed=i,n.bulletCurrent=o,s(),c}function cXe(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function uXe(e,t,n,r){const s=cXe(n);let o=n.bulletCurrent||e9(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let i=o.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(i=Math.ceil(i/4)*4);const a=n.createTracker(r);a.move(o+" ".repeat(i-o.length)),a.shift(i);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,a.current()),u);return l(),c;function u(f,m,g){return m?(g?"":" ".repeat(i))+f:(g?o:o+" ".repeat(i-o.length))+f}}function dXe(e,t,n,r){const s=n.enter("paragraph"),o=n.enter("phrasing"),i=n.containerPhrasing(e,r);return o(),s(),i}const fXe=Bw(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function hXe(e,t,n,r){return(e.children.some(function(i){return fXe(i)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function pXe(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}goe.peek=mXe;function goe(e,t,n,r){const s=pXe(n),o=n.enter("strong"),i=n.createTracker(r),a=i.move(s+s);let l=i.move(n.containerPhrasing(e,{after:s,before:a,...i.current()}));const c=l.charCodeAt(0),u=a4(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=Xx(c)+l.slice(1));const f=l.charCodeAt(l.length-1),m=a4(r.after.charCodeAt(0),f,s);m.inside&&(l=l.slice(0,-1)+Xx(f));const g=i.move(s+s);return o(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function mXe(e,t,n){return n.options.strong||"*"}function gXe(e,t,n,r){return n.safe(e.value,r)}function bXe(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function yXe(e,t,n){const r=(moe(n)+(n.options.ruleSpaces?" ":"")).repeat(bXe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const boe={blockquote:zJe,break:BU,code:qJe,definition:WJe,emphasis:ioe,hardBreak:BU,heading:QJe,html:loe,image:coe,imageReference:uoe,inlineCode:doe,link:hoe,linkReference:poe,list:lXe,listItem:uXe,paragraph:dXe,root:hXe,strong:goe,text:gXe,thematicBreak:yXe},jU=document.createElement("i");function t9(e){const t="&"+e+";";jU.innerHTML=t;const n=jU.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function yoe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const vXe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function xXe(e){return e.replace(vXe,wXe)}function wXe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),o=s===120||s===88;return yoe(n.slice(o?2:1),o?16:10)}return t9(n)||e}function EXe(){return{enter:{table:_Xe,tableData:UU,tableHeader:UU,tableRow:TXe},exit:{codeText:CXe,table:SXe,tableData:_A,tableHeader:_A,tableRow:_A}}}function _Xe(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function SXe(e){this.exit(e),this.data.inTable=void 0}function TXe(e){this.enter({type:"tableRow",children:[]},e)}function _A(e){this.exit(e)}function UU(e){this.enter({type:"tableCell",children:[]},e)}function CXe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,kXe));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function kXe(e,t){return t==="|"?t:e}function AXe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:i,tableCell:l,tableRow:a}};function i(g,y,v,x){return c(u(g,v,x),g.align)}function a(g,y,v,x){const E=f(g,v,x),T=c([E]);return T.slice(0,T.indexOf(`
`))}function l(g,y,v,x){const E=v.enter("tableCell"),T=v.enter("phrasing"),k=v.containerPhrasing(g,{...x,before:o,after:o});return T(),E(),k}function c(g,y){return FJe(g,{align:y,alignDelimiters:r,padding:n,stringLength:s})}function u(g,y,v){const x=g.children;let E=-1;const T=[],k=y.enter("table");for(;++E<x.length;)T[E]=f(x[E],y,v);return k(),T}function f(g,y,v){const x=g.children;let E=-1;const T=[],k=y.enter("tableRow");for(;++E<x.length;)T[E]=l(x[E],g,y,v);return k(),T}function m(g,y,v){let x=boe.inlineCode(g,y,v);return v.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function NXe(){return{exit:{taskListCheckValueChecked:HU,taskListCheckValueUnchecked:HU,paragraph:RXe}}}function IXe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:MXe}}}function HU(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function RXe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=t.children;let o=-1,i;for(;++o<s.length;){const a=s[o];if(a.type==="paragraph"){i=a;break}}i===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function MXe(e,t,n,r){const s=e.children[0],o=typeof e.checked=="boolean"&&s&&s.type==="paragraph",i="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);o&&a.move(i);let l=boe.listItem(e,t,n,{...r,...a.current()});return o&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+i}}function OXe(){return[aJe(),AJe(),MJe(),EXe(),NXe()]}function DXe(e){return{extensions:[lJe(),NJe(e),OJe(),AXe(e),IXe()]}}const VU={}.hasOwnProperty;function voe(e){const t={};let n=-1;for(;++n<e.length;)PXe(t,e[n]);return t}function PXe(e,t){let n;for(n in t){const s=(VU.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let i;if(o)for(i in o){VU.call(s,i)||(s[i]=[]);const a=o[i];LXe(s[i],Array.isArray(a)?a:a?[a]:[])}}}function LXe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);oa(e,0,0,r)}const $Xe={tokenize:HXe,partial:!0},xoe={tokenize:VXe,partial:!0},woe={tokenize:qXe,partial:!0},Eoe={tokenize:GXe,partial:!0},FXe={tokenize:WXe,partial:!0},_oe={name:"wwwAutolink",tokenize:jXe,previous:Toe},Soe={name:"protocolAutolink",tokenize:UXe,previous:Coe},sh={name:"emailAutolink",tokenize:zXe,previous:koe},Id={};function BXe(){return{text:Id}}let Fp=48;for(;Fp<123;)Id[Fp]=sh,Fp++,Fp===58?Fp=65:Fp===91&&(Fp=97);Id[43]=sh;Id[45]=sh;Id[46]=sh;Id[95]=sh;Id[72]=[sh,Soe];Id[104]=[sh,Soe];Id[87]=[sh,_oe];Id[119]=[sh,_oe];function zXe(e,t,n){const r=this;let s,o;return i;function i(f){return!RI(f)||!koe.call(r,r.previous)||n9(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(f))}function a(f){return RI(f)?(e.consume(f),a):f===64?(e.consume(f),l):n(f)}function l(f){return f===46?e.check(FXe,u,c)(f):f===45||f===95||ga(f)?(o=!0,e.consume(f),l):u(f)}function c(f){return e.consume(f),s=!0,l}function u(f){return o&&s&&Oa(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function jXe(e,t,n){const r=this;return s;function s(i){return i!==87&&i!==119||!Toe.call(r,r.previous)||n9(r.events)?n(i):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check($Xe,e.attempt(xoe,e.attempt(woe,o),n),n)(i))}function o(i){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(i)}}function UXe(e,t,n){const r=this;let s="",o=!1;return i;function i(f){return(f===72||f===104)&&Coe.call(r,r.previous)&&!n9(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(f),e.consume(f),a):n(f)}function a(f){if(Oa(f)&&s.length<5)return s+=String.fromCodePoint(f),e.consume(f),a;if(f===58){const m=s.toLowerCase();if(m==="http"||m==="https")return e.consume(f),l}return n(f)}function l(f){return f===47?(e.consume(f),o?c:(o=!0,l)):n(f)}function c(f){return f===null||o4(f)||$s(f)||wm(f)||ek(f)?n(f):e.attempt(xoe,e.attempt(woe,u),n)(f)}function u(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function HXe(e,t,n){let r=0;return s;function s(i){return(i===87||i===119)&&r<3?(r++,e.consume(i),s):i===46&&r===3?(e.consume(i),o):n(i)}function o(i){return i===null?n(i):t(i)}}function VXe(e,t,n){let r,s,o;return i;function i(c){return c===46||c===95?e.check(Eoe,l,a)(c):c===null||$s(c)||wm(c)||c!==45&&ek(c)?l(c):(o=!0,e.consume(c),i)}function a(c){return c===95?r=!0:(s=r,r=void 0),e.consume(c),i}function l(c){return s||r||!o?n(c):t(c)}}function qXe(e,t){let n=0,r=0;return s;function s(i){return i===40?(n++,e.consume(i),s):i===41&&r<n?o(i):i===33||i===34||i===38||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===60||i===63||i===93||i===95||i===126?e.check(Eoe,t,o)(i):i===null||$s(i)||wm(i)?t(i):(e.consume(i),s)}function o(i){return i===41&&r++,e.consume(i),s}}function GXe(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),o):a===93?(e.consume(a),s):a===60||a===null||$s(a)||wm(a)?t(a):n(a)}function s(a){return a===null||a===40||a===91||$s(a)||wm(a)?t(a):r(a)}function o(a){return Oa(a)?i(a):n(a)}function i(a){return a===59?(e.consume(a),r):Oa(a)?(e.consume(a),i):n(a)}}function WXe(e,t,n){return r;function r(o){return e.consume(o),s}function s(o){return ga(o)?n(o):t(o)}}function Toe(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||$s(e)}function Coe(e){return!Oa(e)}function koe(e){return!(e===47||RI(e))}function RI(e){return e===43||e===45||e===46||e===95||ga(e)}function n9(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function Bb(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const o=e.charCodeAt(n);let i="";if(o===37&&ga(e.charCodeAt(n+1))&&ga(e.charCodeAt(n+2)))s=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(i=String.fromCharCode(o));else if(o>55295&&o<57344){const a=e.charCodeAt(n+1);o<56320&&a>56319&&a<57344?(i=String.fromCharCode(o,a),s=1):i=""}else i=String.fromCharCode(o);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+s+1,i=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}const MI={name:"attention",resolveAll:YXe,tokenize:KXe};function YXe(e,t){let n=-1,r,s,o,i,a,l,c,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},m={...e[n][1].start};qU(f,-l),qU(m,l),i={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},o={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:l>1?"strong":"emphasis",start:{...i.start},end:{...a.end}},e[r][1].end={...i.start},e[n][1].start={...a.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=ra(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=ra(c,[["enter",s,t],["enter",i,t],["exit",i,t],["enter",o,t]]),c=ra(c,Fb(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=ra(c,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,c=ra(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,oa(e,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function KXe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=fb(r);let o;return i;function i(l){return o=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===o)return e.consume(l),a;const c=e.exit("attentionSequence"),u=fb(l),f=!u||u===2&&s||n.includes(l),m=!s||s===2&&u||n.includes(r);return c._open=!!(o===42?f:f&&(s||!m)),c._close=!!(o===42?m:m&&(u||!f)),t(l)}}function qU(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const ZXe={name:"autolink",tokenize:JXe};function JXe(e,t,n){let r=0;return s;function s(g){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(g){return Oa(g)?(e.consume(g),i):g===64?n(g):c(g)}function i(g){return g===43||g===45||g===46||ga(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(e.consume(g),r=0,l):(g===43||g===45||g===46||ga(g))&&r++<32?(e.consume(g),a):(r=0,c(g))}function l(g){return g===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):g===null||g===32||g===60||o4(g)?n(g):(e.consume(g),l)}function c(g){return g===64?(e.consume(g),u):kZe(g)?(e.consume(g),c):n(g)}function u(g){return ga(g)?f(g):n(g)}function f(g){return g===46?(e.consume(g),r=0,u):g===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):m(g)}function m(g){if((g===45||ga(g))&&r++<63){const y=g===45?m:f;return e.consume(g),y}return n(g)}}function kr(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let o=0;return i;function i(l){return Dr(l)?(e.enter(n),a(l)):t(l)}function a(l){return Dr(l)&&o++<s?(e.consume(l),a):(e.exit(n),t(l))}}const qw={partial:!0,tokenize:XXe};function XXe(e,t,n){return r;function r(o){return Dr(o)?kr(e,s,"linePrefix")(o):s(o)}function s(o){return o===null||Tn(o)?t(o):n(o)}}const Aoe={continuation:{tokenize:eQe},exit:tQe,name:"blockQuote",tokenize:QXe};function QXe(e,t,n){const r=this;return s;function s(i){if(i===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(i),e.exit("blockQuoteMarker"),o}return n(i)}function o(i){return Dr(i)?(e.enter("blockQuotePrefixWhitespace"),e.consume(i),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(i))}}function eQe(e,t,n){const r=this;return s;function s(i){return Dr(i)?kr(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i):o(i)}function o(i){return e.attempt(Aoe,t,n)(i)}}function tQe(e){e.exit("blockQuote")}const Noe={name:"characterEscape",tokenize:nQe};function nQe(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),s}function s(o){return NZe(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Ioe={name:"characterReference",tokenize:rQe};function rQe(e,t,n){const r=this;let s=0,o,i;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),l}function l(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),o=31,i=ga,u(f))}function c(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,i=AZe,u):(e.enter("characterReferenceValue"),o=7,i=NI,u(f))}function u(f){if(f===59&&s){const m=e.exit("characterReferenceValue");return i===ga&&!t9(r.sliceSerialize(m))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return i(f)&&s++<o?(e.consume(f),u):n(f)}}const GU={partial:!0,tokenize:oQe},WU={concrete:!0,name:"codeFenced",tokenize:sQe};function sQe(e,t,n){const r=this,s={partial:!0,tokenize:O};let o=0,i=0,a;return l;function l(M){return c(M)}function c(M){const P=r.events[r.events.length-1];return o=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,a=M,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(M)}function u(M){return M===a?(i++,e.consume(M),u):i<3?n(M):(e.exit("codeFencedFenceSequence"),Dr(M)?kr(e,f,"whitespace")(M):f(M))}function f(M){return M===null||Tn(M)?(e.exit("codeFencedFence"),r.interrupt?t(M):e.check(GU,v,I)(M)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(M))}function m(M){return M===null||Tn(M)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(M)):Dr(M)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),kr(e,g,"whitespace")(M)):M===96&&M===a?n(M):(e.consume(M),m)}function g(M){return M===null||Tn(M)?f(M):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(M))}function y(M){return M===null||Tn(M)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(M)):M===96&&M===a?n(M):(e.consume(M),y)}function v(M){return e.attempt(s,I,x)(M)}function x(M){return e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),E}function E(M){return o>0&&Dr(M)?kr(e,T,"linePrefix",o+1)(M):T(M)}function T(M){return M===null||Tn(M)?e.check(GU,v,I)(M):(e.enter("codeFlowValue"),k(M))}function k(M){return M===null||Tn(M)?(e.exit("codeFlowValue"),T(M)):(e.consume(M),k)}function I(M){return e.exit("codeFenced"),t(M)}function O(M,P,j){let V=0;return U;function U(X){return M.enter("lineEnding"),M.consume(X),M.exit("lineEnding"),z}function z(X){return M.enter("codeFencedFence"),Dr(X)?kr(M,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):H(X)}function H(X){return X===a?(M.enter("codeFencedFenceSequence"),F(X)):j(X)}function F(X){return X===a?(V++,M.consume(X),F):V>=i?(M.exit("codeFencedFenceSequence"),Dr(X)?kr(M,G,"whitespace")(X):G(X)):j(X)}function G(X){return X===null||Tn(X)?(M.exit("codeFencedFence"),P(X)):j(X)}}}function oQe(e,t,n){const r=this;return s;function s(i){return i===null?n(i):(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),o)}function o(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}const SA={name:"codeIndented",tokenize:aQe},iQe={partial:!0,tokenize:lQe};function aQe(e,t,n){const r=this;return s;function s(c){return e.enter("codeIndented"),kr(e,o,"linePrefix",5)(c)}function o(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?i(c):n(c)}function i(c){return c===null?l(c):Tn(c)?e.attempt(iQe,i,l)(c):(e.enter("codeFlowValue"),a(c))}function a(c){return c===null||Tn(c)?(e.exit("codeFlowValue"),i(c)):(e.consume(c),a)}function l(c){return e.exit("codeIndented"),t(c)}}function lQe(e,t,n){const r=this;return s;function s(i){return r.parser.lazy[r.now().line]?n(i):Tn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),s):kr(e,o,"linePrefix",5)(i)}function o(i){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):Tn(i)?s(i):n(i)}}const cQe={name:"codeText",previous:dQe,resolve:uQe,tokenize:fQe};function uQe(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function dQe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function fQe(e,t,n){let r=0,s,o;return i;function i(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),l):f===96?(o=e.enter("codeTextSequence"),s=0,u(f)):Tn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||Tn(f)?(e.exit("codeTextData"),l(f)):(e.consume(f),c)}function u(f){return f===96?(e.consume(f),s++,u):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(o.type="codeTextData",c(f))}}class hQe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&ev(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ev(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ev(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ev(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ev(this.left,n.reverse())}}}function ev(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Roe(e){const t={};let n=-1,r,s,o,i,a,l,c;const u=new hQe(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,o=0,o<l.length&&l[o][1].type==="lineEndingBlank"&&(o+=2),o<l.length&&l[o][1].type==="content"))for(;++o<l.length&&l[o][1].type!=="content";)l[o][1].type==="chunkText"&&(l[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,pQe(u,n)),n=t[n],c=!0);else if(r[1]._container){for(o=n,s=void 0;o--;)if(i=u.get(o),i[1].type==="lineEnding"||i[1].type==="lineEndingBlank")i[0]==="enter"&&(s&&(u.get(s)[1].type="lineEndingBlank"),i[1].type="lineEnding",s=o);else if(!(i[1].type==="linePrefix"||i[1].type==="listItemIndent"))break;s&&(r[1].end={...u.get(s)[1].start},a=u.slice(s,n),a.unshift(r),u.splice(s,n-s+1,a))}}return oa(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function pQe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const o=[];let i=n._tokenizer;i||(i=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const a=i.events,l=[],c={};let u,f,m=-1,g=n,y=0,v=0;const x=[v];for(;g;){for(;e.get(++s)[1]!==g;);o.push(s),g._tokenizer||(u=r.sliceStream(g),g.next||u.push(null),f&&i.defineSkip(g.start),g._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(u),g._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),f=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(v=m+1,x.push(v),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(i.events=[],g?(g._tokenizer=void 0,g.previous=void 0):x.pop(),m=x.length;m--;){const E=a.slice(x[m],x[m+1]),T=o.pop();l.push([T,T+E.length-1]),e.splice(T,2,E)}for(l.reverse(),m=-1;++m<l.length;)c[y+l[m][0]]=y+l[m][1],y+=l[m][1]-l[m][0]-1;return c}const mQe={resolve:bQe,tokenize:yQe},gQe={partial:!0,tokenize:vQe};function bQe(e){return Roe(e),e}function yQe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(a)}function s(a){return a===null?o(a):Tn(a)?e.check(gQe,i,o)(a):(e.consume(a),s)}function o(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function i(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function vQe(e,t,n){const r=this;return s;function s(i){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),kr(e,o,"linePrefix")}function o(i){if(i===null||Tn(i))return n(i);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}function Moe(e,t,n,r,s,o,i,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return f;function f(E){return E===60?(e.enter(r),e.enter(s),e.enter(o),e.consume(E),e.exit(o),m):E===null||E===32||E===41||o4(E)?n(E):(e.enter(r),e.enter(i),e.enter(a),e.enter("chunkString",{contentType:"string"}),v(E))}function m(E){return E===62?(e.enter(o),e.consume(E),e.exit(o),e.exit(s),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),g(E))}function g(E){return E===62?(e.exit("chunkString"),e.exit(a),m(E)):E===null||E===60||Tn(E)?n(E):(e.consume(E),E===92?y:g)}function y(E){return E===60||E===62||E===92?(e.consume(E),g):g(E)}function v(E){return!u&&(E===null||E===41||$s(E))?(e.exit("chunkString"),e.exit(a),e.exit(i),e.exit(r),t(E)):u<c&&E===40?(e.consume(E),u++,v):E===41?(e.consume(E),u--,v):E===null||E===32||E===40||o4(E)?n(E):(e.consume(E),E===92?x:v)}function x(E){return E===40||E===41||E===92?(e.consume(E),v):v(E)}}function Ooe(e,t,n,r,s,o){const i=this;let a=0,l;return c;function c(g){return e.enter(r),e.enter(s),e.consume(g),e.exit(s),e.enter(o),u}function u(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in i.parser.constructs?n(g):g===93?(e.exit(o),e.enter(s),e.consume(g),e.exit(s),e.exit(r),t):Tn(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||g===91||g===93||Tn(g)||a++>999?(e.exit("chunkString"),u(g)):(e.consume(g),l||(l=!Dr(g)),g===92?m:f)}function m(g){return g===91||g===92||g===93?(e.consume(g),a++,f):f(g)}}function Doe(e,t,n,r,s,o){let i;return a;function a(m){return m===34||m===39||m===40?(e.enter(r),e.enter(s),e.consume(m),e.exit(s),i=m===40?41:m,l):n(m)}function l(m){return m===i?(e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):(e.enter(o),c(m))}function c(m){return m===i?(e.exit(o),l(i)):m===null?n(m):Tn(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),kr(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===i||m===null||Tn(m)?(e.exit("chunkString"),c(m)):(e.consume(m),m===92?f:u)}function f(m){return m===i||m===92?(e.consume(m),u):u(m)}}function tx(e,t){let n;return r;function r(s){return Tn(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):Dr(s)?kr(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const xQe={name:"definition",tokenize:EQe},wQe={partial:!0,tokenize:_Qe};function EQe(e,t,n){const r=this;let s;return o;function o(g){return e.enter("definition"),i(g)}function i(g){return Ooe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return s=mu(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),l):n(g)}function l(g){return $s(g)?tx(e,c)(g):c(g)}function c(g){return Moe(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function u(g){return e.attempt(wQe,f,f)(g)}function f(g){return Dr(g)?kr(e,m,"whitespace")(g):m(g)}function m(g){return g===null||Tn(g)?(e.exit("definition"),r.parser.defined.push(s),t(g)):n(g)}}function _Qe(e,t,n){return r;function r(a){return $s(a)?tx(e,s)(a):n(a)}function s(a){return Doe(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return Dr(a)?kr(e,i,"whitespace")(a):i(a)}function i(a){return a===null||Tn(a)?t(a):n(a)}}const SQe={name:"hardBreakEscape",tokenize:TQe};function TQe(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),s}function s(o){return Tn(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const CQe={name:"headingAtx",resolve:kQe,tokenize:AQe};function kQe(e,t){let n=e.length-2,r=3,s,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},oa(e,r,n-r+1,[["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t]])),e}function AQe(e,t,n){let r=0;return s;function s(u){return e.enter("atxHeading"),o(u)}function o(u){return e.enter("atxHeadingSequence"),i(u)}function i(u){return u===35&&r++<6?(e.consume(u),i):u===null||$s(u)?(e.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(e.enter("atxHeadingSequence"),l(u)):u===null||Tn(u)?(e.exit("atxHeading"),t(u)):Dr(u)?kr(e,a,"whitespace")(u):(e.enter("atxHeadingText"),c(u))}function l(u){return u===35?(e.consume(u),l):(e.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||$s(u)?(e.exit("atxHeadingText"),a(u)):(e.consume(u),c)}}const NQe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],YU=["pre","script","style","textarea"],IQe={concrete:!0,name:"htmlFlow",resolveTo:OQe,tokenize:DQe},RQe={partial:!0,tokenize:LQe},MQe={partial:!0,tokenize:PQe};function OQe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function DQe(e,t,n){const r=this;let s,o,i,a,l;return c;function c(Q){return u(Q)}function u(Q){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Q),f}function f(Q){return Q===33?(e.consume(Q),m):Q===47?(e.consume(Q),o=!0,v):Q===63?(e.consume(Q),s=3,r.interrupt?t:Z):Oa(Q)?(e.consume(Q),i=String.fromCharCode(Q),x):n(Q)}function m(Q){return Q===45?(e.consume(Q),s=2,g):Q===91?(e.consume(Q),s=5,a=0,y):Oa(Q)?(e.consume(Q),s=4,r.interrupt?t:Z):n(Q)}function g(Q){return Q===45?(e.consume(Q),r.interrupt?t:Z):n(Q)}function y(Q){const Te="CDATA[";return Q===Te.charCodeAt(a++)?(e.consume(Q),a===Te.length?r.interrupt?t:H:y):n(Q)}function v(Q){return Oa(Q)?(e.consume(Q),i=String.fromCharCode(Q),x):n(Q)}function x(Q){if(Q===null||Q===47||Q===62||$s(Q)){const Te=Q===47,ge=i.toLowerCase();return!Te&&!o&&YU.includes(ge)?(s=1,r.interrupt?t(Q):H(Q)):NQe.includes(i.toLowerCase())?(s=6,Te?(e.consume(Q),E):r.interrupt?t(Q):H(Q)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(Q):o?T(Q):k(Q))}return Q===45||ga(Q)?(e.consume(Q),i+=String.fromCharCode(Q),x):n(Q)}function E(Q){return Q===62?(e.consume(Q),r.interrupt?t:H):n(Q)}function T(Q){return Dr(Q)?(e.consume(Q),T):U(Q)}function k(Q){return Q===47?(e.consume(Q),U):Q===58||Q===95||Oa(Q)?(e.consume(Q),I):Dr(Q)?(e.consume(Q),k):U(Q)}function I(Q){return Q===45||Q===46||Q===58||Q===95||ga(Q)?(e.consume(Q),I):O(Q)}function O(Q){return Q===61?(e.consume(Q),M):Dr(Q)?(e.consume(Q),O):k(Q)}function M(Q){return Q===null||Q===60||Q===61||Q===62||Q===96?n(Q):Q===34||Q===39?(e.consume(Q),l=Q,P):Dr(Q)?(e.consume(Q),M):j(Q)}function P(Q){return Q===l?(e.consume(Q),l=null,V):Q===null||Tn(Q)?n(Q):(e.consume(Q),P)}function j(Q){return Q===null||Q===34||Q===39||Q===47||Q===60||Q===61||Q===62||Q===96||$s(Q)?O(Q):(e.consume(Q),j)}function V(Q){return Q===47||Q===62||Dr(Q)?k(Q):n(Q)}function U(Q){return Q===62?(e.consume(Q),z):n(Q)}function z(Q){return Q===null||Tn(Q)?H(Q):Dr(Q)?(e.consume(Q),z):n(Q)}function H(Q){return Q===45&&s===2?(e.consume(Q),J):Q===60&&s===1?(e.consume(Q),ee):Q===62&&s===4?(e.consume(Q),te):Q===63&&s===3?(e.consume(Q),Z):Q===93&&s===5?(e.consume(Q),ie):Tn(Q)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(RQe,oe,F)(Q)):Q===null||Tn(Q)?(e.exit("htmlFlowData"),F(Q)):(e.consume(Q),H)}function F(Q){return e.check(MQe,G,oe)(Q)}function G(Q){return e.enter("lineEnding"),e.consume(Q),e.exit("lineEnding"),X}function X(Q){return Q===null||Tn(Q)?F(Q):(e.enter("htmlFlowData"),H(Q))}function J(Q){return Q===45?(e.consume(Q),Z):H(Q)}function ee(Q){return Q===47?(e.consume(Q),i="",re):H(Q)}function re(Q){if(Q===62){const Te=i.toLowerCase();return YU.includes(Te)?(e.consume(Q),te):H(Q)}return Oa(Q)&&i.length<8?(e.consume(Q),i+=String.fromCharCode(Q),re):H(Q)}function ie(Q){return Q===93?(e.consume(Q),Z):H(Q)}function Z(Q){return Q===62?(e.consume(Q),te):Q===45&&s===2?(e.consume(Q),Z):H(Q)}function te(Q){return Q===null||Tn(Q)?(e.exit("htmlFlowData"),oe(Q)):(e.consume(Q),te)}function oe(Q){return e.exit("htmlFlow"),t(Q)}}function PQe(e,t,n){const r=this;return s;function s(i){return Tn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),o):n(i)}function o(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}function LQe(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(qw,t,n)}}const $Qe={name:"htmlText",tokenize:FQe};function FQe(e,t,n){const r=this;let s,o,i;return a;function a(Z){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(Z),l}function l(Z){return Z===33?(e.consume(Z),c):Z===47?(e.consume(Z),O):Z===63?(e.consume(Z),k):Oa(Z)?(e.consume(Z),j):n(Z)}function c(Z){return Z===45?(e.consume(Z),u):Z===91?(e.consume(Z),o=0,y):Oa(Z)?(e.consume(Z),T):n(Z)}function u(Z){return Z===45?(e.consume(Z),g):n(Z)}function f(Z){return Z===null?n(Z):Z===45?(e.consume(Z),m):Tn(Z)?(i=f,ee(Z)):(e.consume(Z),f)}function m(Z){return Z===45?(e.consume(Z),g):f(Z)}function g(Z){return Z===62?J(Z):Z===45?m(Z):f(Z)}function y(Z){const te="CDATA[";return Z===te.charCodeAt(o++)?(e.consume(Z),o===te.length?v:y):n(Z)}function v(Z){return Z===null?n(Z):Z===93?(e.consume(Z),x):Tn(Z)?(i=v,ee(Z)):(e.consume(Z),v)}function x(Z){return Z===93?(e.consume(Z),E):v(Z)}function E(Z){return Z===62?J(Z):Z===93?(e.consume(Z),E):v(Z)}function T(Z){return Z===null||Z===62?J(Z):Tn(Z)?(i=T,ee(Z)):(e.consume(Z),T)}function k(Z){return Z===null?n(Z):Z===63?(e.consume(Z),I):Tn(Z)?(i=k,ee(Z)):(e.consume(Z),k)}function I(Z){return Z===62?J(Z):k(Z)}function O(Z){return Oa(Z)?(e.consume(Z),M):n(Z)}function M(Z){return Z===45||ga(Z)?(e.consume(Z),M):P(Z)}function P(Z){return Tn(Z)?(i=P,ee(Z)):Dr(Z)?(e.consume(Z),P):J(Z)}function j(Z){return Z===45||ga(Z)?(e.consume(Z),j):Z===47||Z===62||$s(Z)?V(Z):n(Z)}function V(Z){return Z===47?(e.consume(Z),J):Z===58||Z===95||Oa(Z)?(e.consume(Z),U):Tn(Z)?(i=V,ee(Z)):Dr(Z)?(e.consume(Z),V):J(Z)}function U(Z){return Z===45||Z===46||Z===58||Z===95||ga(Z)?(e.consume(Z),U):z(Z)}function z(Z){return Z===61?(e.consume(Z),H):Tn(Z)?(i=z,ee(Z)):Dr(Z)?(e.consume(Z),z):V(Z)}function H(Z){return Z===null||Z===60||Z===61||Z===62||Z===96?n(Z):Z===34||Z===39?(e.consume(Z),s=Z,F):Tn(Z)?(i=H,ee(Z)):Dr(Z)?(e.consume(Z),H):(e.consume(Z),G)}function F(Z){return Z===s?(e.consume(Z),s=void 0,X):Z===null?n(Z):Tn(Z)?(i=F,ee(Z)):(e.consume(Z),F)}function G(Z){return Z===null||Z===34||Z===39||Z===60||Z===61||Z===96?n(Z):Z===47||Z===62||$s(Z)?V(Z):(e.consume(Z),G)}function X(Z){return Z===47||Z===62||$s(Z)?V(Z):n(Z)}function J(Z){return Z===62?(e.consume(Z),e.exit("htmlTextData"),e.exit("htmlText"),t):n(Z)}function ee(Z){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(Z),e.exit("lineEnding"),re}function re(Z){return Dr(Z)?kr(e,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Z):ie(Z)}function ie(Z){return e.enter("htmlTextData"),i(Z)}}const r9={name:"labelEnd",resolveAll:UQe,resolveTo:HQe,tokenize:VQe},BQe={tokenize:qQe},zQe={tokenize:GQe},jQe={tokenize:WQe};function UQe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&oa(e,0,e.length,n),e}function HQe(e,t){let n=e.length,r=0,s,o,i,a;for(;n--;)if(s=e[n][1],o){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(i){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(o=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(i=n);const l={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[o][1].start},end:{...e[i][1].end}},u={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[i-2][1].start}};return a=[["enter",l,t],["enter",c,t]],a=ra(a,e.slice(o+1,o+r+3)),a=ra(a,[["enter",u,t]]),a=ra(a,Fb(t.parser.constructs.insideSpan.null,e.slice(o+r+4,i-3),t)),a=ra(a,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),a=ra(a,e.slice(i+1)),a=ra(a,[["exit",l,t]]),oa(e,o,e.length,a),e}function VQe(e,t,n){const r=this;let s=r.events.length,o,i;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){o=r.events[s][1];break}return a;function a(m){return o?o._inactive?f(m):(i=r.parser.defined.includes(mu(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),l):n(m)}function l(m){return m===40?e.attempt(BQe,u,i?u:f)(m):m===91?e.attempt(zQe,u,i?c:f)(m):i?u(m):f(m)}function c(m){return e.attempt(jQe,u,f)(m)}function u(m){return t(m)}function f(m){return o._balanced=!0,n(m)}}function qQe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),s}function s(f){return $s(f)?tx(e,o)(f):o(f)}function o(f){return f===41?u(f):Moe(e,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function i(f){return $s(f)?tx(e,l)(f):u(f)}function a(f){return n(f)}function l(f){return f===34||f===39||f===40?Doe(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function c(f){return $s(f)?tx(e,u)(f):u(f)}function u(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function GQe(e,t,n){const r=this;return s;function s(a){return Ooe.call(r,e,o,i,"reference","referenceMarker","referenceString")(a)}function o(a){return r.parser.defined.includes(mu(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function i(a){return n(a)}}function WQe(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),s}function s(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const YQe={name:"labelStartImage",resolveAll:r9.resolveAll,tokenize:KQe};function KQe(e,t,n){const r=this;return s;function s(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),o}function o(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),i):n(a)}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const ZQe={name:"labelStartLink",resolveAll:r9.resolveAll,tokenize:JQe};function JQe(e,t,n){const r=this;return s;function s(i){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(i),e.exit("labelMarker"),e.exit("labelLink"),o}function o(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):t(i)}}const TA={name:"lineEnding",tokenize:XQe};function XQe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),kr(e,t,"linePrefix")}}const V_={name:"thematicBreak",tokenize:QQe};function QQe(e,t,n){let r=0,s;return o;function o(c){return e.enter("thematicBreak"),i(c)}function i(c){return s=c,a(c)}function a(c){return c===s?(e.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Tn(c))?(e.exit("thematicBreak"),t(c)):n(c)}function l(c){return c===s?(e.consume(c),r++,l):(e.exit("thematicBreakSequence"),Dr(c)?kr(e,a,"whitespace")(c):a(c))}}const ol={continuation:{tokenize:ret},exit:oet,name:"list",tokenize:net},eet={partial:!0,tokenize:iet},tet={partial:!0,tokenize:set};function net(e,t,n){const r=this,s=r.events[r.events.length-1];let o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,i=0;return a;function a(g){const y=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:NI(g)){if(r.containerState.type||(r.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),g===42||g===45?e.check(V_,n,c)(g):c(g);if(!r.interrupt||g===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(g)}return n(g)}function l(g){return NI(g)&&++i<10?(e.consume(g),l):(!r.interrupt||i<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(e.exit("listItemValue"),c(g)):n(g)}function c(g){return e.enter("listItemMarker"),e.consume(g),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,e.check(qw,r.interrupt?n:u,e.attempt(eet,m,f))}function u(g){return r.containerState.initialBlankLine=!0,o++,m(g)}function f(g){return Dr(g)?(e.enter("listItemPrefixWhitespace"),e.consume(g),e.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(g)}}function ret(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(qw,s,o);function s(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,kr(e,t,"listItemIndent",r.containerState.size+1)(a)}function o(a){return r.containerState.furtherBlankLines||!Dr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(tet,t,i)(a))}function i(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,kr(e,e.attempt(ol,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function set(e,t,n){const r=this;return kr(e,s,"listItemIndent",r.containerState.size+1);function s(o){const i=r.events[r.events.length-1];return i&&i[1].type==="listItemIndent"&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(o):n(o)}}function oet(e){e.exit(this.containerState.type)}function iet(e,t,n){const r=this;return kr(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(o){const i=r.events[r.events.length-1];return!Dr(o)&&i&&i[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const KU={name:"setextUnderline",resolveTo:aet,tokenize:cet};function aet(e,t){let n=e.length,r,s,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const i={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",o?(e.splice(s,0,["enter",i,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=i,e.push(["exit",i,t]),e}function cet(e,t,n){const r=this;let s;return o;function o(c){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),s=c,i(c)):n(c)}function i(c){return e.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===s?(e.consume(c),a):(e.exit("setextHeadingLineSequence"),Dr(c)?kr(e,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Tn(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const uet={tokenize:yet,partial:!0};function det(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:met,continuation:{tokenize:get},exit:bet}},text:{91:{name:"gfmFootnoteCall",tokenize:pet},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:fet,resolveTo:het}}}}function fet(e,t,n){const r=this;let s=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i;for(;s--;){const l=r.events[s][1];if(l.type==="labelImage"){i=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!i||!i._balanced)return n(l);const c=mu(r.sliceSerialize({start:i.end,end:r.now()}));return c.codePointAt(0)!==94||!o.includes(c.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function het(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",o,t],["enter",i,t],["exit",i,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function pet(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,i;return a;function a(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(f){if(o>999||f===93&&!i||f===null||f===91||$s(f))return n(f);if(f===93){e.exit("chunkString");const m=e.exit("gfmFootnoteCallString");return s.includes(mu(r.sliceSerialize(m)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return $s(f)||(i=!0),o++,e.consume(f),f===92?u:c}function u(f){return f===91||f===92||f===93?(e.consume(f),o++,c):c(f)}}function met(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,i=0,a;return l;function l(y){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(y){return y===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(y)}function u(y){if(i>999||y===93&&!a||y===null||y===91||$s(y))return n(y);if(y===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return o=mu(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),m}return $s(y)||(a=!0),i++,e.consume(y),y===92?f:u}function f(y){return y===91||y===92||y===93?(e.consume(y),i++,u):u(y)}function m(y){return y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),s.includes(o)||s.push(o),kr(e,g,"gfmFootnoteDefinitionWhitespace")):n(y)}function g(y){return t(y)}}function get(e,t,n){return e.check(qw,t,e.attempt(uet,t,n))}function bet(e){e.exit("gfmFootnoteDefinition")}function yet(e,t,n){const r=this;return kr(e,s,"gfmFootnoteDefinitionIndent",5);function s(o){const i=r.events[r.events.length-1];return i&&i[1].type==="gfmFootnoteDefinitionIndent"&&i[2].sliceSerialize(i[1],!0).length===4?t(o):n(o)}}function vet(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(i,a){let l=-1;for(;++l<i.length;)if(i[l][0]==="enter"&&i[l][1].type==="strikethroughSequenceTemporary"&&i[l][1]._close){let c=l;for(;c--;)if(i[c][0]==="exit"&&i[c][1].type==="strikethroughSequenceTemporary"&&i[c][1]._open&&i[l][1].end.offset-i[l][1].start.offset===i[c][1].end.offset-i[c][1].start.offset){i[l][1].type="strikethroughSequence",i[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},i[c][1].start),end:Object.assign({},i[l][1].end)},f={type:"strikethroughText",start:Object.assign({},i[c][1].end),end:Object.assign({},i[l][1].start)},m=[["enter",u,a],["enter",i[c][1],a],["exit",i[c][1],a],["enter",f,a]],g=a.parser.constructs.insideSpan.null;g&&oa(m,m.length,0,Fb(g,i.slice(c+1,l),a)),oa(m,m.length,0,[["exit",f,a],["enter",i[l][1],a],["exit",i[l][1],a],["exit",u,a]]),oa(i,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<i.length;)i[l][1].type==="strikethroughSequenceTemporary"&&(i[l][1].type="data");return i}function o(i,a,l){const c=this.previous,u=this.events;let f=0;return m;function m(y){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(y):(i.enter("strikethroughSequenceTemporary"),g(y))}function g(y){const v=fb(c);if(y===126)return f>1?l(y):(i.consume(y),f++,g);if(f<2&&!n)return l(y);const x=i.exit("strikethroughSequenceTemporary"),E=fb(y);return x._open=!E||E===2&&!!v,x._close=!v||v===2&&!!E,a(y)}}}class xet{constructor(){this.map=[]}add(t,n,r){wet(this,t,n,r)}consume(t){if(this.map.sort(function(o,i){return o[0]-i[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let s=r.pop();for(;s;){for(const o of s)t.push(o);s=r.pop()}this.map.length=0}}function wet(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function Eet(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function _et(){return{flow:{null:{name:"table",tokenize:Tet,resolveAll:Cet}}}}function Tet(e,t,n){const r=this;let s=0,o=0,i;return a;function a(U){let z=r.events.length-1;for(;z>-1;){const G=r.events[z][1].type;if(G==="lineEnding"||G==="linePrefix")z--;else break}const H=z>-1?r.events[z][1].type:null,F=H==="tableHead"||H==="tableRow"?M:l;return F===M&&r.parser.lazy[r.now().line]?n(U):F(U)}function l(U){return e.enter("tableHead"),e.enter("tableRow"),c(U)}function c(U){return U===124||(i=!0,o+=1),u(U)}function u(U){return U===null?n(U):Tn(U)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),g):n(U):Dr(U)?kr(e,u,"whitespace")(U):(o+=1,i&&(i=!1,s+=1),U===124?(e.enter("tableCellDivider"),e.consume(U),e.exit("tableCellDivider"),i=!0,u):(e.enter("data"),f(U)))}function f(U){return U===null||U===124||$s(U)?(e.exit("data"),u(U)):(e.consume(U),U===92?m:f)}function m(U){return U===92||U===124?(e.consume(U),f):f(U)}function g(U){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(U):(e.enter("tableDelimiterRow"),i=!1,Dr(U)?kr(e,y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):y(U))}function y(U){return U===45||U===58?x(U):U===124?(i=!0,e.enter("tableCellDivider"),e.consume(U),e.exit("tableCellDivider"),v):O(U)}function v(U){return Dr(U)?kr(e,x,"whitespace")(U):x(U)}function x(U){return U===58?(o+=1,i=!0,e.enter("tableDelimiterMarker"),e.consume(U),e.exit("tableDelimiterMarker"),E):U===45?(o+=1,E(U)):U===null||Tn(U)?I(U):O(U)}function E(U){return U===45?(e.enter("tableDelimiterFiller"),T(U)):O(U)}function T(U){return U===45?(e.consume(U),T):U===58?(i=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(U),e.exit("tableDelimiterMarker"),k):(e.exit("tableDelimiterFiller"),k(U))}function k(U){return Dr(U)?kr(e,I,"whitespace")(U):I(U)}function I(U){return U===124?y(U):U===null||Tn(U)?!i||s!==o?O(U):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(U)):O(U)}function O(U){return n(U)}function M(U){return e.enter("tableRow"),P(U)}function P(U){return U===124?(e.enter("tableCellDivider"),e.consume(U),e.exit("tableCellDivider"),P):U===null||Tn(U)?(e.exit("tableRow"),t(U)):Dr(U)?kr(e,P,"whitespace")(U):(e.enter("data"),j(U))}function j(U){return U===null||U===124||$s(U)?(e.exit("data"),P(U)):(e.consume(U),U===92?V:j)}function V(U){return U===92||U===124?(e.consume(U),j):j(U)}}function Cet(e,t){let n=-1,r=!0,s=0,o=[0,0,0,0],i=[0,0,0,0],a=!1,l=0,c,u,f;const m=new xet;for(;++n<e.length;){const g=e[n],y=g[1];g[0]==="enter"?y.type==="tableHead"?(a=!1,l!==0&&(ZU(m,t,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",c,t]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(r=!0,f=void 0,o=[0,0,0,0],i=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",u,t]])),s=y.type==="tableDelimiterRow"?2:u?3:1):s&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(r=!1,i[2]===0&&(o[1]!==0&&(i[0]=i[1],f=l_(m,t,o,s,void 0,f),o=[0,0,0,0]),i[2]=n)):y.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(i[0]=i[1],f=l_(m,t,o,s,void 0,f)),o=i,i=[o[1],n,0,0])):y.type==="tableHead"?(a=!0,l=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(l=n,o[1]!==0?(i[0]=i[1],f=l_(m,t,o,s,n,f)):i[1]!==0&&(f=l_(m,t,i,s,n,f)),s=0):s&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(i[3]=n)}for(l!==0&&ZU(m,t,l,c,u),m.consume(t.events),n=-1;++n<t.events.length;){const g=t.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=Eet(t.events,n))}return e}function l_(e,t,n,r,s,o){const i=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(o.end=Object.assign({},u1(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const l=u1(t.events,n[1]);if(o={type:i,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const c=u1(t.events,n[2]),u=u1(t.events,n[3]),f={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const m=t.events[n[2]],g=t.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,v=n[3]-n[2]-1;e.add(y,v,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return s!==void 0&&(o.end=Object.assign({},u1(t.events,s)),e.add(s,0,[["exit",o,t]]),o=void 0),o}function ZU(e,t,n,r,s){const o=[],i=u1(t.events,n);s&&(s.end=Object.assign({},i),o.push(["exit",s,t])),r.end=Object.assign({},i),o.push(["exit",r,t]),e.add(n+1,0,o)}function u1(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const ket={name:"tasklistCheck",tokenize:Net};function Aet(){return{text:{91:ket}}}function Net(e,t,n){const r=this;return s;function s(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),o)}function o(l){return $s(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),i):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),i):n(l)}function i(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(l)}function a(l){return Tn(l)?t(l):Dr(l)?e.check({tokenize:Iet},t,n)(l):n(l)}}function Iet(e,t,n){return kr(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function Ret(e){return voe([BXe(),det(),vet(e),_et(),Aet()])}const Met={};function Oet(e){const t=this,n=e||Met,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(Ret(n)),o.push(OXe()),i.push(DXe(n))}function Det(){return{enter:{mathFlow:e,mathFlowFenceMeta:t,mathText:o},exit:{mathFlow:s,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:a,mathText:i,mathTextData:a}};function e(l){const c={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[c]}},l)}function t(){this.buffer()}function n(){const l=this.resume(),c=this.stack[this.stack.length-1];c.type,c.meta=l}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function s(l){const c=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u=this.stack[this.stack.length-1];u.type,this.exit(l),u.value=c;const f=u.data.hChildren[0];f.type,f.tagName,f.children.push({type:"text",value:c}),this.data.mathFlowInside=void 0}function o(l){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},l),this.buffer()}function i(l){const c=this.resume(),u=this.stack[this.stack.length-1];u.type,this.exit(l),u.value=c,u.data.hChildren.push({type:"text",value:c})}function a(l){this.config.enter.data.call(this,l),this.config.exit.data.call(this,l)}}function Pet(e){let t=(e||{}).singleDollarTextMath;return t==null&&(t=!0),r.peek=s,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:t?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(o,i,a,l){const c=o.value||"",u=a.createTracker(l),f="$".repeat(Math.max(ooe(c,"$")+1,2)),m=a.enter("mathFlow");let g=u.move(f);if(o.meta){const y=a.enter("mathFlowMeta");g+=u.move(a.safe(o.meta,{after:`
`,before:g,encode:["$"],...u.current()})),y()}return g+=u.move(`
`),c&&(g+=u.move(c+`
`)),g+=u.move(f),m(),g}function r(o,i,a){let l=o.value||"",c=1;for(t||c++;new RegExp("(^|[^$])"+"\\$".repeat(c)+"([^$]|$)").test(l);)c++;const u="$".repeat(c);/[^ \r\n]/.test(l)&&(/^[ \r\n]/.test(l)&&/[ \r\n]$/.test(l)||/^\$|\$$/.test(l))&&(l=" "+l+" ");let f=-1;for(;++f<a.unsafe.length;){const m=a.unsafe[f];if(!m.atBreak)continue;const g=a.compilePattern(m);let y;for(;y=g.exec(l);){let v=y.index;l.codePointAt(v)===10&&l.codePointAt(v-1)===13&&v--,l=l.slice(0,v)+" "+l.slice(y.index+1)}}return u+l+u}function s(){return"$"}}const Let={tokenize:$et,concrete:!0,name:"mathFlow"},JU={tokenize:Fet,partial:!0};function $et(e,t,n){const r=this,s=r.events[r.events.length-1],o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0;let i=0;return a;function a(T){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),l(T)}function l(T){return T===36?(e.consume(T),i++,l):i<2?n(T):(e.exit("mathFlowFenceSequence"),kr(e,c,"whitespace")(T))}function c(T){return T===null||Tn(T)?f(T):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),u(T))}function u(T){return T===null||Tn(T)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),f(T)):T===36?n(T):(e.consume(T),u)}function f(T){return e.exit("mathFlowFence"),r.interrupt?t(T):e.attempt(JU,m,x)(T)}function m(T){return e.attempt({tokenize:E,partial:!0},x,g)(T)}function g(T){return(o?kr(e,y,"linePrefix",o+1):y)(T)}function y(T){return T===null?x(T):Tn(T)?e.attempt(JU,m,x)(T):(e.enter("mathFlowValue"),v(T))}function v(T){return T===null||Tn(T)?(e.exit("mathFlowValue"),y(T)):(e.consume(T),v)}function x(T){return e.exit("mathFlow"),t(T)}function E(T,k,I){let O=0;return kr(T,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function M(V){return T.enter("mathFlowFence"),T.enter("mathFlowFenceSequence"),P(V)}function P(V){return V===36?(O++,T.consume(V),P):O<i?I(V):(T.exit("mathFlowFenceSequence"),kr(T,j,"whitespace")(V))}function j(V){return V===null||Tn(V)?(T.exit("mathFlowFence"),k(V)):I(V)}}}function Fet(e,t,n){const r=this;return s;function s(i){return i===null?t(i):(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),o)}function o(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}function Bet(e){let n=(e||{}).singleDollarTextMath;return n==null&&(n=!0),{tokenize:r,resolve:zet,previous:jet,name:"mathText"};function r(s,o,i){let a=0,l,c;return u;function u(v){return s.enter("mathText"),s.enter("mathTextSequence"),f(v)}function f(v){return v===36?(s.consume(v),a++,f):a<2&&!n?i(v):(s.exit("mathTextSequence"),m(v))}function m(v){return v===null?i(v):v===36?(c=s.enter("mathTextSequence"),l=0,y(v)):v===32?(s.enter("space"),s.consume(v),s.exit("space"),m):Tn(v)?(s.enter("lineEnding"),s.consume(v),s.exit("lineEnding"),m):(s.enter("mathTextData"),g(v))}function g(v){return v===null||v===32||v===36||Tn(v)?(s.exit("mathTextData"),m(v)):(s.consume(v),g)}function y(v){return v===36?(s.consume(v),l++,y):l===a?(s.exit("mathTextSequence"),s.exit("mathText"),o(v)):(c.type="mathTextData",g(v))}}}function zet(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="mathTextData"){e[t][1].type="mathTextPadding",e[n][1].type="mathTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="mathTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function jet(e){return e!==36||this.events[this.events.length-1][1].type==="characterEscape"}function Uet(e){return{flow:{36:Let},text:{36:Bet(e)}}}const Het={};function OI(e){const t=this,n=e||Het,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(Uet(n)),o.push(Det()),i.push(Pet(n))}var Vet=/(\*\*)([^*]*?)$/,qet=/(__)([^_]*?)$/,Get=/(\*\*\*)([^*]*?)$/,Wet=/(\*)([^*]*?)$/,Yet=/(_)([^_]*?)$/,Ket=/(`)([^`]*?)$/,Zet=/(~~)([^~]*?)$/,Um=/^[\s_~*`]*$/,Poe=/^[\s]*[-*+][\s]+$/,Jet=/[\p{L}\p{N}_]/u,Xet=/^```[^`\n]*```?$/,Qet=/^\*{4,}$/,M0=e=>{if(!e)return!1;let t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||t===95?!0:Jet.test(e)},tk=e=>{let t=(e.match(/```/g)||[]).length;return t>0&&t%2===0&&e.includes(`
`)},ett=(e,t)=>{let n=1;for(let r=t-1;r>=0;r-=1)if(e[r]==="]")n+=1;else if(e[r]==="["&&(n-=1,n===0))return r;return-1},ttt=(e,t)=>{let n=1;for(let r=t+1;r<e.length;r+=1)if(e[r]==="[")n+=1;else if(e[r]==="]"&&(n-=1,n===0))return r;return-1},Loe=(e,t)=>{let n=!1,r=!1;for(let s=0;s<e.length&&s<t;s+=1){if(e[s]==="\\"&&e[s+1]==="$"){s+=1;continue}e[s]==="$"&&(e[s+1]==="$"?(r=!r,s+=1,n=!1):r||(n=!n))}return n||r},ntt=(e,t,n)=>{if(n!==" "&&n!=="	")return!1;let r=0;for(let s=t-1;s>=0;s-=1)if(e[s]===`
`){r=s+1;break}for(let s=r;s<t;s+=1)if(e[s]!==" "&&e[s]!=="	")return!1;return!0},rtt=(e,t,n,r)=>!!(n==="\\"||n==="*"||r==="*"||n&&r&&M0(n)&&M0(r)||ntt(e,t,r)),stt=e=>{let t=0,n=e.length;for(let r=0;r<n;r+=1){if(e[r]!=="*")continue;let s=r>0?e[r-1]:"",o=r<n-1?e[r+1]:"";rtt(e,r,s,o)||(t+=1)}return t},ott=(e,t,n,r)=>!!(n==="\\"||e.includes("$")&&Loe(e,t)||n==="_"||r==="_"||n&&r&&M0(n)&&M0(r)),itt=e=>{let t=0,n=e.length;for(let r=0;r<n;r+=1){if(e[r]!=="_")continue;let s=r>0?e[r-1]:"",o=r<n-1?e[r+1]:"";ott(e,r,s,o)||(t+=1)}return t},att=e=>{let t=0,n=0;for(let r=0;r<e.length;r+=1)e[r]==="*"?n+=1:(n>=3&&(t+=Math.floor(n/3)),n=0);return n>=3&&(t+=Math.floor(n/3)),t},ltt=e=>{if(tk(e))return e;let t=e.match(Vet);if(t){let n=t[2];if(!n||Um.test(n))return e;let r=e.lastIndexOf(t[1]),s=e.substring(0,r).lastIndexOf(`
`),o=s===-1?0:s+1,i=e.substring(o,r);if(Poe.test(i)&&n.includes(`
`))return e;if((e.match(/\*\*/g)||[]).length%2===1)return`${e}**`}return e},ctt=e=>{let t=e.match(qet);if(t){let n=t[2];if(!n||Um.test(n))return e;let r=e.lastIndexOf(t[1]),s=e.substring(0,r).lastIndexOf(`
`),o=s===-1?0:s+1,i=e.substring(o,r);if(Poe.test(i)&&n.includes(`
`))return e;if((e.match(/__/g)||[]).length%2===1)return`${e}__`}return e},utt=e=>{for(let t=0;t<e.length;t+=1)if(e[t]==="*"&&e[t-1]!=="*"&&e[t+1]!=="*"&&e[t-1]!=="\\"){let n=t>0?e[t-1]:"",r=t<e.length-1?e[t+1]:"";if(n&&r&&M0(n)&&M0(r))continue;return t}return-1},dtt=e=>{if(tk(e)||!e.match(Wet))return e;let t=utt(e);if(t===-1)return e;let n=e.substring(t+1);return!n||Um.test(n)?e:stt(e)%2===1?`${e}*`:e},ftt=e=>{for(let t=0;t<e.length;t+=1)if(e[t]==="_"&&e[t-1]!=="_"&&e[t+1]!=="_"&&e[t-1]!=="\\"&&!Loe(e,t)){let n=t>0?e[t-1]:"",r=t<e.length-1?e[t+1]:"";if(n&&r&&M0(n)&&M0(r))continue;return t}return-1},htt=e=>{let t=e.length;for(;t>0&&e[t-1]===`
`;)t-=1;if(t<e.length){let n=e.slice(0,t),r=e.slice(t);return`${n}_${r}`}return`${e}_`},ptt=e=>{if(tk(e)||!e.match(Yet))return e;let t=ftt(e);if(t===-1)return e;let n=e.substring(t+1);return!n||Um.test(n)?e:itt(e)%2===1?htt(e):e},mtt=e=>{if(tk(e)||Qet.test(e))return e;let t=e.match(Get);if(t){let n=t[2];if(!n||Um.test(n))return e;if(att(e)%2===1)return`${e}***`}return e},DI=(e,t)=>{let n=!1,r=!1;for(let s=0;s<t;s+=1){if(e.substring(s,s+3)==="```"){r=!r,s+=2;continue}!r&&e[s]==="`"&&(n=!n)}return n||r},gtt=(e,t)=>{let n=e.substring(t,t+3)==="```",r=t>0&&e.substring(t-1,t+2)==="```",s=t>1&&e.substring(t-2,t+1)==="```";return n||r||s},btt=e=>{let t=0;for(let n=0;n<e.length;n+=1)e[n]==="`"&&!gtt(e,n)&&(t+=1);return t},ytt=e=>!e.match(Xet)||e.includes(`
`)?null:e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e,vtt=e=>{let t=(e.match(/```/g)||[]).length;return!!(t>0&&t%2===0&&e.includes(`
`)||(e.endsWith("```\n")||e.endsWith("```"))&&t%2===0)},xtt=e=>(e.match(/```/g)||[]).length%2===1,wtt=e=>{let t=ytt(e);if(t!==null)return t;if(vtt(e))return e;let n=e.match(Ket);if(n&&!xtt(e)){let r=n[2];if(!r||Um.test(r))return e;if(btt(e)%2===1)return`${e}\``}return e},Ett=e=>{if((e.match(/\$\$/g)||[]).length%2===0)return e;let t=e.indexOf("$$");return t!==-1&&e.indexOf(`
`,t)!==-1&&!e.endsWith(`
`)?`${e}
$$`:`${e}$$`},_tt=(e,t)=>{if(e.substring(t+2).includes(")"))return null;let n=ett(e,t);if(n===-1||DI(e,n))return null;let r=n>0&&e[n-1]==="!",s=r?n-1:n,o=e.substring(0,s);if(r)return o;let i=e.substring(n+1,t);return`${o}[${i}](streamdown:incomplete-link)`},Stt=(e,t)=>{let n=t>0&&e[t-1]==="!",r=n?t-1:t;if(!e.substring(t+1).includes("]")){let s=e.substring(0,r);return n?s:`${e}](streamdown:incomplete-link)`}if(ttt(e,t)===-1){let s=e.substring(0,r);return n?s:`${e}](streamdown:incomplete-link)`}return null},Ttt=e=>{let t=e.lastIndexOf("](");if(t!==-1&&!DI(e,t)){let n=_tt(e,t);if(n!==null)return n}for(let n=e.length-1;n>=0;n-=1)if(e[n]==="["&&!DI(e,n)){let r=Stt(e,n);if(r!==null)return r}return e},Ctt=e=>{let t=e.match(Zet);if(t){let n=t[2];if(!n||Um.test(n))return e;if((e.match(/~~/g)||[]).length%2===1)return`${e}~~`}return e},ktt=e=>{if(!e||typeof e!="string")return e;let t=e,n=Ttt(t);return n.endsWith("](streamdown:incomplete-link)")?n:(t=n,t=mtt(t),t=ltt(t),t=ctt(t),t=dtt(t),t=ptt(t),t=wtt(t),t=Ctt(t),t=Ett(t),t)},Att=ktt;/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ntt=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Itt=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),XU=e=>{const t=Itt(e);return t.charAt(0).toUpperCase()+t.slice(1)},$oe=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Rtt=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mtt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ott=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:i,...a},l)=>w.createElement("svg",{ref:l,...Mtt,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:$oe("lucide",s),...!o&&!Rtt(a)&&{"aria-hidden":"true"},...a},[...i.map(([c,u])=>w.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=(e,t)=>{const n=w.forwardRef(({className:r,...s},o)=>w.createElement(Ott,{ref:o,iconNode:t,className:$oe(`lucide-${Ntt(XU(e))}`,`lucide-${e}`,r),...s}));return n.displayName=XU(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dtt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Foe=oh("check",Dtt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ptt=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Boe=oh("copy",Ptt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ltt=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],nk=oh("download",Ltt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $tt=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ftt=oh("loader-circle",$tt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Btt=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],ztt=oh("maximize-2",Btt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jtt=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Utt=oh("rotate-ccw",jtt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Htt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vtt=oh("x",Htt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qtt=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Gtt=oh("zoom-in",qtt);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wtt=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Ytt=oh("zoom-out",Wtt),Ktt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ztt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Jtt={};function QU(e,t){return(Jtt.jsx?Ztt:Ktt).test(e)}var Qg={},CA,eH;function Xtt(){if(eH)return CA;eH=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,i=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,c="/",u="*",f="",m="comment",g="declaration";function y(x,E){if(typeof x!="string")throw new TypeError("First argument must be a string");if(!x)return[];E=E||{};var T=1,k=1;function I(G){var X=G.match(t);X&&(T+=X.length);var J=G.lastIndexOf(l);k=~J?G.length-J:k+G.length}function O(){var G={line:T,column:k};return function(X){return X.position=new M(G),V(),X}}function M(G){this.start=G,this.end={line:T,column:k},this.source=E.source}M.prototype.content=x;function P(G){var X=new Error(E.source+":"+T+":"+k+": "+G);if(X.reason=G,X.filename=E.source,X.line=T,X.column=k,X.source=x,!E.silent)throw X}function j(G){var X=G.exec(x);if(X){var J=X[0];return I(J),x=x.slice(J.length),X}}function V(){j(n)}function U(G){var X;for(G=G||[];X=z();)X!==!1&&G.push(X);return G}function z(){var G=O();if(!(c!=x.charAt(0)||u!=x.charAt(1))){for(var X=2;f!=x.charAt(X)&&(u!=x.charAt(X)||c!=x.charAt(X+1));)++X;if(X+=2,f===x.charAt(X-1))return P("End of comment missing");var J=x.slice(2,X-2);return k+=2,I(J),x=x.slice(X),k+=2,G({type:m,comment:J})}}function H(){var G=O(),X=j(r);if(X){if(z(),!j(s))return P("property missing ':'");var J=j(o),ee=G({type:g,property:v(X[0].replace(e,f)),value:J?v(J[0].replace(e,f)):f});return j(i),ee}}function F(){var G=[];U(G);for(var X;X=H();)X!==!1&&(G.push(X),U(G));return G}return V(),F()}function v(x){return x?x.replace(a,f):f}return CA=y,CA}var tH;function Qtt(){if(tH)return Qg;tH=1;var e=Qg&&Qg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.default=n;const t=e(Xtt());function n(r,s){let o=null;if(!r||typeof r!="string")return o;const i=(0,t.default)(r),a=typeof s=="function";return i.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:u}=l;a?s(c,u,l):u&&(o=o||{},o[c]=u)}),o}return Qg}var tv={},nH;function ent(){if(nH)return tv;nH=1,Object.defineProperty(tv,"__esModule",{value:!0}),tv.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,o=function(c){return!c||n.test(c)||e.test(c)},i=function(c,u){return u.toUpperCase()},a=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),o(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(s,a):c=c.replace(r,a),c.replace(t,i))};return tv.camelCase=l,tv}var nv,rH;function tnt(){if(rH)return nv;rH=1;var e=nv&&nv.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},t=e(Qtt()),n=ent();function r(s,o){var i={};return!s||typeof s!="string"||(0,t.default)(s,function(a,l){a&&l&&(i[(0,n.camelCase)(a,o)]=l)}),i}return r.default=r,nv=r,nv}var nnt=tnt();const rnt=Cm(nnt);function nx(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?sH(e.position):"start"in e||"end"in e?sH(e):"line"in e||"column"in e?PI(e):""}function PI(e){return oH(e&&e.line)+":"+oH(e&&e.column)}function sH(e){return PI(e&&e.start)+"-"+PI(e&&e.end)}function oH(e){return e&&typeof e=="number"?e:1}class wa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",o={},i=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?s=t:!o.cause&&t&&(i=!0,s=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?o.ruleId=r:(o.source=r.slice(0,l),o.ruleId=r.slice(l+1))}if(!o.place&&o.ancestors&&o.ancestors){const l=o.ancestors[o.ancestors.length-1];l&&(o.place=l.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=a?a.line:void 0,this.name=nx(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=i&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}wa.prototype.file="";wa.prototype.name="";wa.prototype.reason="";wa.prototype.message="";wa.prototype.stack="";wa.prototype.column=void 0;wa.prototype.line=void 0;wa.prototype.ancestors=void 0;wa.prototype.cause=void 0;wa.prototype.fatal=void 0;wa.prototype.place=void 0;wa.prototype.ruleId=void 0;wa.prototype.source=void 0;const s9={}.hasOwnProperty,snt=new Map,ont=/[A-Z]/g,int=new Set(["table","tbody","thead","tfoot","tr"]),ant=new Set(["td","th"]),zoe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function lnt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=gnt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=mnt(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Td:Rb,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=joe(s,e,void 0);return o&&typeof o!="string"?o:s.create(e,s.Fragment,{children:o||void 0},void 0)}function joe(e,t,n){if(t.type==="element")return cnt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return unt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return fnt(e,t,n);if(t.type==="mdxjsEsm")return dnt(e,t);if(t.type==="root")return hnt(e,t,n);if(t.type==="text")return pnt(e,t)}function cnt(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Td,e.schema=s),e.ancestors.push(t);const o=Hoe(e,t.tagName,!1),i=bnt(e,t);let a=i9(e,t);return int.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!PC(l):!0})),Uoe(e,i,o,t),o9(i,a),e.ancestors.pop(),e.schema=r,e.create(t,o,i,n)}function unt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Qx(e,t.position)}function dnt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Qx(e,t.position)}function fnt(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Td,e.schema=s),e.ancestors.push(t);const o=t.name===null?e.Fragment:Hoe(e,t.name,!0),i=ynt(e,t),a=i9(e,t);return Uoe(e,i,o,t),o9(i,a),e.ancestors.pop(),e.schema=r,e.create(t,o,i,n)}function hnt(e,t,n){const r={};return o9(r,i9(e,t)),e.create(t,e.Fragment,r,n)}function pnt(e,t){return t.value}function Uoe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function o9(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function mnt(e,t,n){return r;function r(s,o,i,a){const c=Array.isArray(i.children)?n:t;return a?c(o,i,a):c(o,i)}}function gnt(e,t){return n;function n(r,s,o,i){const a=Array.isArray(o.children),l=Nd(r);return t(s,o,i,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function bnt(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&s9.call(t.properties,s)){const o=vnt(e,s,t.properties[s]);if(o){const[i,a]=o;e.tableCellAlignToStyle&&i==="align"&&typeof a=="string"&&ant.has(t.tagName)?r=a:n[i]=a}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function ynt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const i=o.expression;i.type;const a=i.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else Qx(e,t.position);else{const s=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,o=e.evaluater.evaluateExpression(a.expression)}else Qx(e,t.position);else o=r.value===null?!0:r.value;n[s]=o}return n}function i9(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:snt;for(;++r<t.children.length;){const o=t.children[r];let i;if(e.passKeys){const l=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(l){const c=s.get(l)||0;i=l+"-"+c,s.set(l,c+1)}}const a=joe(e,o,i);a!==void 0&&n.push(a)}return n}function vnt(e,t,n){const r=Fw(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?dM(n):fM(n)),r.property==="style"){let s=typeof n=="object"?n:xnt(e,String(n));return e.stylePropertyNameCase==="css"&&(s=wnt(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?gUe[r.property]||r.property:r.attribute,n]}}function xnt(e,t){try{return rnt(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new wa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=zoe+"#cannot-parse-style-attribute",s}}function Hoe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let o=-1,i;for(;++o<s.length;){const a=QU(s[o])?{type:"Identifier",name:s[o]}:{type:"Literal",value:s[o]};i=i?{type:"MemberExpression",object:i,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}r=i}else r=QU(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return s9.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);Qx(e)}function Qx(e,t){const n=new wa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=zoe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function wnt(e){const t={};let n;for(n in e)s9.call(e,n)&&(t[Ent(n)]=e[n]);return t}function Ent(e){let t=e.replace(ont,_nt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function _nt(e){return"-"+e.toLowerCase()}const Snt={tokenize:Tnt};function Tnt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),kr(e,t,"linePrefix")}function s(a){return e.enter("paragraph"),o(a)}function o(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,i(a)}function i(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Tn(a)?(e.consume(a),e.exit("chunkText"),o):(e.consume(a),i)}}const Cnt={tokenize:knt},iH={tokenize:Ant};function knt(e){const t=this,n=[];let r=0,s,o,i;return a;function a(k){if(r<n.length){const I=n[r];return t.containerState=I[1],e.attempt(I[0].continuation,l,c)(k)}return c(k)}function l(k){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&T();const I=t.events.length;let O=I,M;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){M=t.events[O][1].end;break}E(r);let P=I;for(;P<t.events.length;)t.events[P][1].end={...M},P++;return oa(t.events,O+1,0,t.events.slice(I)),t.events.length=P,c(k)}return a(k)}function c(k){if(r===n.length){if(!s)return m(k);if(s.currentConstruct&&s.currentConstruct.concrete)return y(k);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(iH,u,f)(k)}function u(k){return s&&T(),E(r),m(k)}function f(k){return t.parser.lazy[t.now().line]=r!==n.length,i=t.now().offset,y(k)}function m(k){return t.containerState={},e.attempt(iH,g,y)(k)}function g(k){return r++,n.push([t.currentConstruct,t.containerState]),m(k)}function y(k){if(k===null){s&&T(),E(0),e.consume(k);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:o}),v(k)}function v(k){if(k===null){x(e.exit("chunkFlow"),!0),E(0),e.consume(k);return}return Tn(k)?(e.consume(k),x(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(k),v)}function x(k,I){const O=t.sliceStream(k);if(I&&O.push(null),k.previous=o,o&&(o.next=k),o=k,s.defineSkip(k.start),s.write(O),t.parser.lazy[k.start.line]){let M=s.events.length;for(;M--;)if(s.events[M][1].start.offset<i&&(!s.events[M][1].end||s.events[M][1].end.offset>i))return;const P=t.events.length;let j=P,V,U;for(;j--;)if(t.events[j][0]==="exit"&&t.events[j][1].type==="chunkFlow"){if(V){U=t.events[j][1].end;break}V=!0}for(E(r),M=P;M<t.events.length;)t.events[M][1].end={...U},M++;oa(t.events,j+1,0,t.events.slice(P)),t.events.length=M}}function E(k){let I=n.length;for(;I-- >k;){const O=n[I];t.containerState=O[1],O[0].exit.call(t,e)}n.length=k}function T(){s.write([null]),o=void 0,s=void 0,t.containerState._closeFlow=void 0}}function Ant(e,t,n){return kr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const Nnt={tokenize:Int};function Int(e){const t=this,n=e.attempt(qw,r,e.attempt(this.parser.constructs.flowInitial,s,kr(e,e.attempt(this.parser.constructs.flow,s,e.attempt(mQe,s)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Rnt={resolveAll:qoe()},Mnt=Voe("string"),Ont=Voe("text");function Voe(e){return{resolveAll:qoe(e==="text"?Dnt:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],o=n.attempt(s,i,a);return i;function i(u){return c(u)?o(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),o(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const f=s[u];let m=-1;if(f)for(;++m<f.length;){const g=f[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function qoe(e){return t;function t(n,r){let s=-1,o;for(;++s<=n.length;)o===void 0?n[s]&&n[s][1].type==="data"&&(o=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==o+2&&(n[o][1].end=n[s-1][1].end,n.splice(o+2,s-o-2),s=o+2),o=void 0);return e?e(n,r):n}}function Dnt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let o=s.length,i=-1,a=0,l;for(;o--;){const c=s[o];if(typeof c=="string"){for(i=c.length;c.charCodeAt(i-1)===32;)a++,i--;if(i)break;i=-1}else if(c===-2)l=!0,a++;else if(c!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const c={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?i:r.start._bufferIndex+i,_index:r.start._index+o,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}const Pnt={42:ol,43:ol,45:ol,48:ol,49:ol,50:ol,51:ol,52:ol,53:ol,54:ol,55:ol,56:ol,57:ol,62:Aoe},Lnt={91:xQe},$nt={[-2]:SA,[-1]:SA,32:SA},Fnt={35:CQe,42:V_,45:[KU,V_],60:IQe,61:KU,95:V_,96:WU,126:WU},Bnt={38:Ioe,92:Noe},znt={[-5]:TA,[-4]:TA,[-3]:TA,33:YQe,38:Ioe,42:MI,60:[ZXe,$Qe],91:ZQe,92:[SQe,Noe],93:r9,95:MI,96:cQe},jnt={null:[MI,Rnt]},Unt={null:[42,95]},Hnt={null:[]},Vnt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Unt,contentInitial:Lnt,disable:Hnt,document:Pnt,flow:Fnt,flowInitial:$nt,insideSpan:jnt,string:Bnt,text:znt},Symbol.toStringTag,{value:"Module"}));function qnt(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},o=[];let i=[],a=[];const l={attempt:P(O),check:P(M),consume:T,enter:k,exit:I,interrupt:P(M,{interrupt:!0})},c={code:null,containerState:{},defineSkip:v,events:[],now:y,parser:e,previous:null,sliceSerialize:m,sliceStream:g,write:f};let u=t.tokenize.call(c,l);return t.resolveAll&&o.push(t),c;function f(z){return i=ra(i,z),x(),i[i.length-1]!==null?[]:(j(t,0),c.events=Fb(o,c.events,c),c.events)}function m(z,H){return Wnt(g(z),H)}function g(z){return Gnt(i,z)}function y(){const{_bufferIndex:z,_index:H,line:F,column:G,offset:X}=r;return{_bufferIndex:z,_index:H,line:F,column:G,offset:X}}function v(z){s[z.line]=z.column,U()}function x(){let z;for(;r._index<i.length;){const H=i[r._index];if(typeof H=="string")for(z=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===z&&r._bufferIndex<H.length;)E(H.charCodeAt(r._bufferIndex));else E(H)}}function E(z){u=u(z)}function T(z){Tn(z)?(r.line++,r.column=1,r.offset+=z===-3?2:1,U()):z!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=z}function k(z,H){const F=H||{};return F.type=z,F.start=y(),c.events.push(["enter",F,c]),a.push(F),F}function I(z){const H=a.pop();return H.end=y(),c.events.push(["exit",H,c]),H}function O(z,H){j(z,H.from)}function M(z,H){H.restore()}function P(z,H){return F;function F(G,X,J){let ee,re,ie,Z;return Array.isArray(G)?oe(G):"tokenize"in G?oe([G]):te(G);function te(Ce){return fe;function fe(Fe){const De=Fe!==null&&Ce[Fe],Re=Fe!==null&&Ce.null,tt=[...Array.isArray(De)?De:De?[De]:[],...Array.isArray(Re)?Re:Re?[Re]:[]];return oe(tt)(Fe)}}function oe(Ce){return ee=Ce,re=0,Ce.length===0?J:Q(Ce[re])}function Q(Ce){return fe;function fe(Fe){return Z=V(),ie=Ce,Ce.partial||(c.currentConstruct=Ce),Ce.name&&c.parser.constructs.disable.null.includes(Ce.name)?ge():Ce.tokenize.call(H?Object.assign(Object.create(c),H):c,l,Te,ge)(Fe)}}function Te(Ce){return z(ie,Z),X}function ge(Ce){return Z.restore(),++re<ee.length?Q(ee[re]):J}}}function j(z,H){z.resolveAll&&!o.includes(z)&&o.push(z),z.resolve&&oa(c.events,H,c.events.length-H,z.resolve(c.events.slice(H),c)),z.resolveTo&&(c.events=z.resolveTo(c.events,c))}function V(){const z=y(),H=c.previous,F=c.currentConstruct,G=c.events.length,X=Array.from(a);return{from:G,restore:J};function J(){r=z,c.previous=H,c.currentConstruct=F,c.events.length=G,a=X,U()}}function U(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Gnt(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,o=t.end._bufferIndex;let i;if(n===s)i=[e[n].slice(r,o)];else{if(i=e.slice(n,s),r>-1){const a=i[0];typeof a=="string"?i[0]=a.slice(r):i.shift()}o>0&&i.push(e[s].slice(0,o))}return i}function Wnt(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const o=e[n];let i;if(typeof o=="string")i=o;else switch(o){case-5:{i="\r";break}case-4:{i=`
`;break}case-3:{i=`\r
`;break}case-2:{i=t?" ":"	";break}case-1:{if(!t&&s)continue;i=" ";break}default:i=String.fromCharCode(o)}s=o===-2,r.push(i)}return r.join("")}function Ynt(e){const r={constructs:voe([Vnt,...(e||{}).extensions||[]]),content:s(Snt),defined:[],document:s(Cnt),flow:s(Nnt),lazy:{},string:s(Mnt),text:s(Ont)};return r;function s(o){return i;function i(a){return qnt(r,o,a)}}}function Knt(e){for(;!Roe(e););return e}const aH=/[\0\t\n\r]/g;function Znt(){let e=1,t="",n=!0,r;return s;function s(o,i,a){const l=[];let c,u,f,m,g;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(i||void 0).decode(o)),f=0,t="",n&&(o.charCodeAt(0)===65279&&f++,n=void 0);f<o.length;){if(aH.lastIndex=f,c=aH.exec(o),m=c&&c.index!==void 0?c.index:o.length,g=o.charCodeAt(m),!c){t=o.slice(f);break}if(g===10&&f===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<m&&(l.push(o.slice(f,m)),e+=m-f),g){case 0:{l.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,l.push(-2);e++<u;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}f=m+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const Goe={}.hasOwnProperty;function Jnt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Xnt(n)(Knt(Ynt(n).document().write(Znt()(e,t,!0))))}function Xnt(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(xt),autolinkProtocol:V,autolinkEmail:V,atxHeading:o(Ut),blockQuote:o(Re),characterEscape:V,characterReference:V,codeFenced:o(tt),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:o(tt,i),codeText:o(de,i),codeTextData:V,data:V,codeFlowValue:V,definition:o(nt),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:o(ot),hardBreakEscape:o(Vt),hardBreakTrailing:o(Vt),htmlFlow:o(Dt,i),htmlFlowData:V,htmlText:o(Dt,i),htmlTextData:V,image:o(en),label:i,link:o(xt),listItem:o(Ne),listItemValue:m,listOrdered:o(pe,f),listUnordered:o(pe),paragraph:o($e),reference:Q,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:o(Ut),strong:o(Je),thematicBreak:o(Ve)},exit:{atxHeading:l(),atxHeadingSequence:O,autolink:l(),autolinkEmail:De,autolinkProtocol:Fe,blockQuote:l(),characterEscapeValue:U,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:Ce,characterReference:fe,codeFenced:l(x),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:U,codeIndented:l(E),codeText:l(X),codeTextData:U,data:U,definition:l(),definitionDestinationString:I,definitionLabelString:T,definitionTitleString:k,emphasis:l(),hardBreakEscape:l(H),hardBreakTrailing:l(H),htmlFlow:l(F),htmlFlowData:U,htmlText:l(G),htmlTextData:U,image:l(ee),label:ie,labelText:re,lineEnding:z,link:l(J),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Te,resourceDestinationString:Z,resourceTitleString:te,resource:oe,setextHeading:l(j),setextHeadingLineSequence:P,setextHeadingText:M,strong:l(),thematicBreak:l()}};Woe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(_e){let Y={type:"root",children:[]};const L={stack:[Y],tokenStack:[],config:t,enter:a,exit:c,buffer:i,resume:u,data:n},B=[];let ce=-1;for(;++ce<_e.length;)if(_e[ce][1].type==="listOrdered"||_e[ce][1].type==="listUnordered")if(_e[ce][0]==="enter")B.push(ce);else{const we=B.pop();ce=s(_e,we,ce)}for(ce=-1;++ce<_e.length;){const we=t[_e[ce][0]];Goe.call(we,_e[ce][1].type)&&we[_e[ce][1].type].call(Object.assign({sliceSerialize:_e[ce][2].sliceSerialize},L),_e[ce][1])}if(L.tokenStack.length>0){const we=L.tokenStack[L.tokenStack.length-1];(we[1]||lH).call(L,void 0,we[0])}for(Y.position={start:Yh(_e.length>0?_e[0][1].start:{line:1,column:1,offset:0}),end:Yh(_e.length>0?_e[_e.length-2][1].end:{line:1,column:1,offset:0})},ce=-1;++ce<t.transforms.length;)Y=t.transforms[ce](Y)||Y;return Y}function s(_e,Y,L){let B=Y-1,ce=-1,we=!1,ze,Be,ut,an;for(;++B<=L;){const zt=_e[B];switch(zt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{zt[0]==="enter"?ce++:ce--,an=void 0;break}case"lineEndingBlank":{zt[0]==="enter"&&(ze&&!an&&!ce&&!ut&&(ut=B),an=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:an=void 0}if(!ce&&zt[0]==="enter"&&zt[1].type==="listItemPrefix"||ce===-1&&zt[0]==="exit"&&(zt[1].type==="listUnordered"||zt[1].type==="listOrdered")){if(ze){let dn=B;for(Be=void 0;dn--;){const on=_e[dn];if(on[1].type==="lineEnding"||on[1].type==="lineEndingBlank"){if(on[0]==="exit")continue;Be&&(_e[Be][1].type="lineEndingBlank",we=!0),on[1].type="lineEnding",Be=dn}else if(!(on[1].type==="linePrefix"||on[1].type==="blockQuotePrefix"||on[1].type==="blockQuotePrefixWhitespace"||on[1].type==="blockQuoteMarker"||on[1].type==="listItemIndent"))break}ut&&(!Be||ut<Be)&&(ze._spread=!0),ze.end=Object.assign({},Be?_e[Be][1].start:zt[1].end),_e.splice(Be||B,0,["exit",ze,zt[2]]),B++,L++}if(zt[1].type==="listItemPrefix"){const dn={type:"listItem",_spread:!1,start:Object.assign({},zt[1].start),end:void 0};ze=dn,_e.splice(B,0,["enter",dn,zt[2]]),B++,L++,ut=void 0,an=!0}}}return _e[Y][1]._spread=we,L}function o(_e,Y){return L;function L(B){a.call(this,_e(B),B),Y&&Y.call(this,B)}}function i(){this.stack.push({type:"fragment",children:[]})}function a(_e,Y,L){this.stack[this.stack.length-1].children.push(_e),this.stack.push(_e),this.tokenStack.push([Y,L||void 0]),_e.position={start:Yh(Y.start),end:void 0}}function l(_e){return Y;function Y(L){_e&&_e.call(this,L),c.call(this,L)}}function c(_e,Y){const L=this.stack.pop(),B=this.tokenStack.pop();if(B)B[0].type!==_e.type&&(Y?Y.call(this,_e,B[0]):(B[1]||lH).call(this,_e,B[0]));else throw new Error("Cannot close `"+_e.type+"` ("+nx({start:_e.start,end:_e.end})+"): its not open");L.position.end=Yh(_e.end)}function u(){return QM(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(_e){if(this.data.expectingFirstListItemValue){const Y=this.stack[this.stack.length-2];Y.start=Number.parseInt(this.sliceSerialize(_e),10),this.data.expectingFirstListItemValue=void 0}}function g(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.lang=_e}function y(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.meta=_e}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.value=_e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function E(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.value=_e.replace(/(\r?\n|\r)$/g,"")}function T(_e){const Y=this.resume(),L=this.stack[this.stack.length-1];L.label=Y,L.identifier=mu(this.sliceSerialize(_e)).toLowerCase()}function k(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.title=_e}function I(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.url=_e}function O(_e){const Y=this.stack[this.stack.length-1];if(!Y.depth){const L=this.sliceSerialize(_e).length;Y.depth=L}}function M(){this.data.setextHeadingSlurpLineEnding=!0}function P(_e){const Y=this.stack[this.stack.length-1];Y.depth=this.sliceSerialize(_e).codePointAt(0)===61?1:2}function j(){this.data.setextHeadingSlurpLineEnding=void 0}function V(_e){const L=this.stack[this.stack.length-1].children;let B=L[L.length-1];(!B||B.type!=="text")&&(B=Le(),B.position={start:Yh(_e.start),end:void 0},L.push(B)),this.stack.push(B)}function U(_e){const Y=this.stack.pop();Y.value+=this.sliceSerialize(_e),Y.position.end=Yh(_e.end)}function z(_e){const Y=this.stack[this.stack.length-1];if(this.data.atHardBreak){const L=Y.children[Y.children.length-1];L.position.end=Yh(_e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Y.type)&&(V.call(this,_e),U.call(this,_e))}function H(){this.data.atHardBreak=!0}function F(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.value=_e}function G(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.value=_e}function X(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.value=_e}function J(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const Y=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=Y,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function ee(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const Y=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=Y,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function re(_e){const Y=this.sliceSerialize(_e),L=this.stack[this.stack.length-2];L.label=xXe(Y),L.identifier=mu(Y).toLowerCase()}function ie(){const _e=this.stack[this.stack.length-1],Y=this.resume(),L=this.stack[this.stack.length-1];if(this.data.inReference=!0,L.type==="link"){const B=_e.children;L.children=B}else L.alt=Y}function Z(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.url=_e}function te(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.title=_e}function oe(){this.data.inReference=void 0}function Q(){this.data.referenceType="collapsed"}function Te(_e){const Y=this.resume(),L=this.stack[this.stack.length-1];L.label=Y,L.identifier=mu(this.sliceSerialize(_e)).toLowerCase(),this.data.referenceType="full"}function ge(_e){this.data.characterReferenceType=_e.type}function Ce(_e){const Y=this.sliceSerialize(_e),L=this.data.characterReferenceType;let B;L?(B=yoe(Y,L==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):B=t9(Y);const ce=this.stack[this.stack.length-1];ce.value+=B}function fe(_e){const Y=this.stack.pop();Y.position.end=Yh(_e.end)}function Fe(_e){U.call(this,_e);const Y=this.stack[this.stack.length-1];Y.url=this.sliceSerialize(_e)}function De(_e){U.call(this,_e);const Y=this.stack[this.stack.length-1];Y.url="mailto:"+this.sliceSerialize(_e)}function Re(){return{type:"blockquote",children:[]}}function tt(){return{type:"code",lang:null,meta:null,value:""}}function de(){return{type:"inlineCode",value:""}}function nt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ot(){return{type:"emphasis",children:[]}}function Ut(){return{type:"heading",depth:0,children:[]}}function Vt(){return{type:"break"}}function Dt(){return{type:"html",value:""}}function en(){return{type:"image",title:null,url:"",alt:null}}function xt(){return{type:"link",title:null,url:"",children:[]}}function pe(_e){return{type:"list",ordered:_e.type==="listOrdered",start:null,spread:_e._spread,children:[]}}function Ne(_e){return{type:"listItem",spread:_e._spread,checked:null,children:[]}}function $e(){return{type:"paragraph",children:[]}}function Je(){return{type:"strong",children:[]}}function Le(){return{type:"text",value:""}}function Ve(){return{type:"thematicBreak"}}}function Yh(e){return{line:e.line,column:e.column,offset:e.offset}}function Woe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Woe(e,r):Qnt(e,r)}}function Qnt(e,t){let n;for(n in t)if(Goe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function lH(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+nx({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+nx({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+nx({start:t.start,end:t.end})+") is still open")}function ert(e){const t=this;t.parser=n;function n(r){return Jnt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function trt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function nrt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function rrt(e,t){const n=t.value?t.value+`
`:"",r={},s=t.lang?t.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function srt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ort(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function irt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=Bb(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let i,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=o+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}function art(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function lrt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Yoe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),o=s[0];o&&o.type==="text"?o.value="["+o.value:s.unshift({type:"text",value:"["});const i=s[s.length-1];return i&&i.type==="text"?i.value+=r:s.push({type:"text",value:r}),s}function crt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Yoe(e,t);const s={src:Bb(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,o),e.applyData(t,o)}function urt(e,t){const n={src:Bb(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function drt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function frt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Yoe(e,t);const s={href:Bb(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function hrt(e,t){const n={href:Bb(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function prt(e,t,n){const r=e.all(t),s=n?mrt(n):Koe(t),o={},i=[];if(typeof t.checked=="boolean"){const u=r[0];let f;u&&u.type==="element"&&u.tagName==="p"?f=u:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(s||a!==0||u.type!=="element"||u.tagName!=="p")&&i.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!s?i.push(...u.children):i.push(u)}const l=r[r.length-1];l&&(s||l.type!=="element"||l.tagName!=="p")&&i.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:o,children:i};return e.patch(t,c),e.applyData(t,c)}function mrt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Koe(n[r])}return t}function Koe(e){const t=e.spread;return t??e.children.length>1}function grt(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const i=r[s];if(i.type==="element"&&i.tagName==="li"&&i.properties&&Array.isArray(i.properties.className)&&i.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function brt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function yrt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function vrt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xrt(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const i={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],i),s.push(i)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Nd(t.children[1]),l=QC(t.children[t.children.length-1]);a&&l&&(i.position={start:a,end:l}),s.push(i)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,o),e.applyData(t,o)}function wrt(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",i=n&&n.type==="table"?n.align:void 0,a=i?i.length:t.children.length;let l=-1;const c=[];for(;++l<a;){const f=t.children[l],m={},g=i?i[l]:void 0;g&&(m.align=g);let y={type:"element",tagName:o,properties:m,children:[]};f&&(y.children=e.all(f),e.patch(f,y),y=e.applyData(f,y)),c.push(y)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,u),e.applyData(t,u)}function Ert(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const cH=9,uH=32;function _rt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const o=[];for(;r;)o.push(dH(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return o.push(dH(t.slice(s),s>0,!1)),o.join("")}function dH(e,t,n){let r=0,s=e.length;if(t){let o=e.codePointAt(r);for(;o===cH||o===uH;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(s-1);for(;o===cH||o===uH;)s--,o=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function Srt(e,t){const n={type:"text",value:_rt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Trt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Crt={blockquote:trt,break:nrt,code:rrt,delete:srt,emphasis:ort,footnoteReference:irt,heading:art,html:lrt,imageReference:crt,image:urt,inlineCode:drt,linkReference:frt,link:hrt,listItem:prt,list:grt,paragraph:brt,root:yrt,strong:vrt,table:xrt,tableCell:Ert,tableRow:wrt,text:Srt,thematicBreak:Trt,toml:c_,yaml:c_,definition:c_,footnoteDefinition:c_};function c_(){}function krt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Art(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Nrt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||krt,r=e.options.footnoteBackLabel||Art,s=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[l]);if(!c)continue;const u=e.all(c),f=String(c.identifier).toUpperCase(),m=Bb(f.toLowerCase());let g=0;const y=[],v=e.footnoteCounts.get(f);for(;v!==void 0&&++g<=v;){y.length>0&&y.push({type:"text",value:" "});let T=typeof n=="string"?n:n(l,g);typeof T=="string"&&(T={type:"text",value:T}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const x=u[u.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const T=x.children[x.children.length-1];T&&T.type==="text"?T.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...y)}else u.push(...y);const E={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(u,!0)};e.patch(c,E),a.push(E)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...cb(i),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const LI={}.hasOwnProperty,Irt={};function Rrt(e,t){const n=t||Irt,r=new Map,s=new Map,o=new Map,i={...Crt,...n.handlers},a={all:c,applyData:Ort,definitionById:r,footnoteById:s,footnoteCounts:o,footnoteOrder:[],handlers:i,one:l,options:n,patch:Mrt,wrap:Prt};return ab(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const f=u.type==="definition"?r:s,m=String(u.identifier).toUpperCase();f.has(m)||f.set(m,u)}}),a;function l(u,f){const m=u.type,g=a.handlers[m];if(LI.call(a.handlers,m)&&g)return g(a,u,f);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in u){const{children:v,...x}=u,E=cb(x);return E.children=a.all(u),E}return cb(u)}return(a.options.unknownHandler||Drt)(a,u,f)}function c(u){const f=[];if("children"in u){const m=u.children;let g=-1;for(;++g<m.length;){const y=a.one(m[g],u);if(y){if(g&&m[g-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=fH(y.value)),!Array.isArray(y)&&y.type==="element")){const v=y.children[0];v&&v.type==="text"&&(v.value=fH(v.value))}Array.isArray(y)?f.push(...y):f.push(y)}}}return f}}function Mrt(e,t){e.position&&(t.position=fZe(e))}function Ort(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const i="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:i}}n.type==="element"&&o&&Object.assign(n.properties,cb(o)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function Drt(e,t){const n=t.data||{},r="value"in t&&!(LI.call(n,"hProperties")||LI.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Prt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function fH(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function hH(e,t){const n=Rrt(e,t),r=n.one(e,void 0),s=Nrt(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&o.children.push({type:"text",value:`
`},s),o}function Lrt(e,t){return e&&"run"in e?async function(n,r){const s=hH(n,{file:r,...t});await e.run(s,r)}:function(n,r){return hH(n,{file:r,...e||t})}}function pH(e){if(e)throw e}var kA,mH;function $rt(){if(mH)return kA;mH=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(c){return typeof Array.isArray=="function"?Array.isArray(c):t.call(c)==="[object Array]"},o=function(c){if(!c||t.call(c)!=="[object Object]")return!1;var u=e.call(c,"constructor"),f=c.constructor&&c.constructor.prototype&&e.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!f)return!1;var m;for(m in c);return typeof m>"u"||e.call(c,m)},i=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},a=function(c,u){if(u==="__proto__")if(e.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return kA=function l(){var c,u,f,m,g,y,v=arguments[0],x=1,E=arguments.length,T=!1;for(typeof v=="boolean"&&(T=v,v=arguments[1]||{},x=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});x<E;++x)if(c=arguments[x],c!=null)for(u in c)f=a(v,u),m=a(c,u),v!==m&&(T&&m&&(o(m)||(g=s(m)))?(g?(g=!1,y=f&&s(f)?f:[]):y=f&&o(f)?f:{},i(v,{name:u,newValue:l(T,y,m)})):typeof m<"u"&&i(v,{name:u,newValue:m}));return v},kA}var Frt=$rt();const AA=Cm(Frt);function $I(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Brt(){const e=[],t={run:n,use:r};return t;function n(...s){let o=-1;const i=s.pop();if(typeof i!="function")throw new TypeError("Expected function as last argument, not "+i);a(null,...s);function a(l,...c){const u=e[++o];let f=-1;if(l){i(l);return}for(;++f<s.length;)(c[f]===null||c[f]===void 0)&&(c[f]=s[f]);s=c,u?zrt(u,a)(...c):i(null,...c)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function zrt(e,t){let n;return r;function r(...i){const a=e.length>i.length;let l;a&&i.push(s);try{l=e.apply(this,i)}catch(c){const u=c;if(a&&n)throw u;return s(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(o,s):l instanceof Error?s(l):o(l))}function s(i,...a){n||(n=!0,t(i,...a))}function o(i){s(null,i)}}const sd={basename:jrt,dirname:Urt,extname:Hrt,join:Vrt,sep:"/"};function jrt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Gw(e);let n=0,r=-1,s=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(o){n=s+1;break}}else r<0&&(o=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let i=-1,a=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(o){n=s+1;break}}else i<0&&(o=!0,i=s+1),a>-1&&(e.codePointAt(s)===t.codePointAt(a--)?a<0&&(r=s):(a=-1,r=i));return n===r?r=i:r<0&&(r=e.length),e.slice(n,r)}function Urt(e){if(Gw(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Hrt(e){Gw(e);let t=e.length,n=-1,r=0,s=-1,o=0,i;for(;t--;){const a=e.codePointAt(t);if(a===47){if(i){r=t+1;break}continue}n<0&&(i=!0,n=t+1),a===46?s<0?s=t:o!==1&&(o=1):s>-1&&(o=-1)}return s<0||n<0||o===0||o===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function Vrt(...e){let t=-1,n;for(;++t<e.length;)Gw(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":qrt(n)}function qrt(e){Gw(e);const t=e.codePointAt(0)===47;let n=Grt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Grt(e,t){let n="",r=0,s=-1,o=0,i=-1,a,l;for(;++i<=e.length;){if(i<e.length)a=e.codePointAt(i);else{if(a===47)break;a=47}if(a===47){if(!(s===i-1||o===1))if(s!==i-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=i,o=0;continue}}else if(n.length>0){n="",r=0,s=i,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,i):n=e.slice(s+1,i),r=i-s-1;s=i,o=0}else a===46&&o>-1?o++:o=-1}return n}function Gw(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Wrt={cwd:Yrt};function Yrt(){return"/"}function FI(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Krt(e){if(typeof e=="string")e=new URL(e);else if(!FI(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Zrt(e)}function Zrt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const NA=["history","path","basename","stem","extname","dirname"];class Jrt{constructor(t){let n;t?FI(t)?n={path:t}:typeof t=="string"||Xrt(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Wrt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<NA.length;){const o=NA[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let s;for(s in n)NA.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?sd.basename(this.path):void 0}set basename(t){RA(t,"basename"),IA(t,"basename"),this.path=sd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?sd.dirname(this.path):void 0}set dirname(t){gH(this.basename,"dirname"),this.path=sd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?sd.extname(this.path):void 0}set extname(t){if(IA(t,"extname"),gH(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=sd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){FI(t)&&(t=Krt(t)),RA(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?sd.basename(this.path,this.extname):void 0}set stem(t){RA(t,"stem"),IA(t,"stem"),this.path=sd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new wa(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function IA(e,t){if(e&&e.includes(sd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+sd.sep+"`")}function RA(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function gH(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Xrt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Qrt=(function(e){const r=this.constructor.prototype,s=r[e],o=function(){return s.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),est={}.hasOwnProperty;class a9 extends Qrt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Brt()}copy(){const t=new a9;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(AA(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(DA("data",this.frozen),this.namespace[t]=n,this):est.call(this.namespace,t)&&this.namespace[t]||void 0:t?(DA("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=u_(t),r=this.parser||this.Parser;return MA("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),MA("process",this.parser||this.Parser),OA("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(o,i){const a=u_(t),l=r.parse(a);r.run(l,a,function(u,f,m){if(u||!f||!m)return c(u);const g=f,y=r.stringify(g,m);rst(y)?m.value=y:m.result=y,c(u,m)});function c(u,f){u||!f?i(u):o?o(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),MA("processSync",this.parser||this.Parser),OA("processSync",this.compiler||this.Compiler),this.process(t,s),yH("processSync","process",n),r;function s(o,i){n=!0,pH(o),r=i}}run(t,n,r){bH(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(i,a){const l=u_(n);s.run(t,l,c);function c(u,f,m){const g=f||t;u?a(u):i?i(g):r(void 0,g,m)}}}runSync(t,n){let r=!1,s;return this.run(t,n,o),yH("runSync","run",r),s;function o(i,a){pH(i),s=a,r=!0}}stringify(t,n){this.freeze();const r=u_(n),s=this.compiler||this.Compiler;return OA("stringify",s),bH(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(DA("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):i(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...f]=c;l(u,f)}else i(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function i(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(s.settings=AA(!0,s.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const f=c[u];o(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let f=-1,m=-1;for(;++f<r.length;)if(r[f][0]===c){m=f;break}if(m===-1)r.push([c,...u]);else if(u.length>0){let[g,...y]=u;const v=r[m][1];$I(v)&&$I(g)&&(g=AA(!0,v,g)),r[m]=[c,g,...y]}}}}const tst=new a9().freeze();function MA(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function OA(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function DA(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function bH(e){if(!$I(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function yH(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function u_(e){return nst(e)?e:new Jrt(e)}function nst(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function rst(e){return typeof e=="string"||sst(e)}function sst(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}function l9(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Hm=l9();function Zoe(e){Hm=e}var rx={exec:()=>null};function ls(e,t=""){let n=typeof e=="string"?e:e.source,r={replace:(s,o)=>{let i=typeof o=="string"?o:o.source;return i=i.replace(Pa.caret,"$1"),n=n.replace(s,i),r},getRegex:()=>new RegExp(n,t)};return r}var ost=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Pa={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},ist=/^(?:[ \t]*(?:\n|$))+/,ast=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,lst=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ww=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,cst=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,c9=/(?:[*+-]|\d{1,9}[.)])/,Joe=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Xoe=ls(Joe).replace(/bull/g,c9).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ust=ls(Joe).replace(/bull/g,c9).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),u9=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,dst=/^[^\n]+/,d9=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,fst=ls(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",d9).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),hst=ls(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,c9).getRegex(),rk="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",f9=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,pst=ls("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",f9).replace("tag",rk).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Qoe=ls(u9).replace("hr",Ww).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rk).getRegex(),mst=ls(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Qoe).getRegex(),h9={blockquote:mst,code:ast,def:fst,fences:lst,heading:cst,hr:Ww,html:pst,lheading:Xoe,list:hst,newline:ist,paragraph:Qoe,table:rx,text:dst},vH=ls("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ww).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rk).getRegex(),gst={...h9,lheading:ust,table:vH,paragraph:ls(u9).replace("hr",Ww).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",vH).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rk).getRegex()},bst={...h9,html:ls(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",f9).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:rx,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ls(u9).replace("hr",Ww).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Xoe).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},yst=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,vst=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,eie=/^( {2,}|\\)\n(?!\s*$)/,xst=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,sk=/[\p{P}\p{S}]/u,p9=/[\s\p{P}\p{S}]/u,tie=/[^\s\p{P}\p{S}]/u,wst=ls(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,p9).getRegex(),nie=/(?!~)[\p{P}\p{S}]/u,Est=/(?!~)[\s\p{P}\p{S}]/u,_st=/(?:[^\s\p{P}\p{S}]|~)/u,Sst=ls(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",ost?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),rie=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Tst=ls(rie,"u").replace(/punct/g,sk).getRegex(),Cst=ls(rie,"u").replace(/punct/g,nie).getRegex(),sie="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",kst=ls(sie,"gu").replace(/notPunctSpace/g,tie).replace(/punctSpace/g,p9).replace(/punct/g,sk).getRegex(),Ast=ls(sie,"gu").replace(/notPunctSpace/g,_st).replace(/punctSpace/g,Est).replace(/punct/g,nie).getRegex(),Nst=ls("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,tie).replace(/punctSpace/g,p9).replace(/punct/g,sk).getRegex(),Ist=ls(/\\(punct)/,"gu").replace(/punct/g,sk).getRegex(),Rst=ls(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Mst=ls(f9).replace("(?:-->|$)","-->").getRegex(),Ost=ls("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Mst).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),l4=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Dst=ls(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",l4).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),oie=ls(/^!?\[(label)\]\[(ref)\]/).replace("label",l4).replace("ref",d9).getRegex(),iie=ls(/^!?\[(ref)\](?:\[\])?/).replace("ref",d9).getRegex(),Pst=ls("reflink|nolink(?!\\()","g").replace("reflink",oie).replace("nolink",iie).getRegex(),xH=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,m9={_backpedal:rx,anyPunctuation:Ist,autolink:Rst,blockSkip:Sst,br:eie,code:vst,del:rx,emStrongLDelim:Tst,emStrongRDelimAst:kst,emStrongRDelimUnd:Nst,escape:yst,link:Dst,nolink:iie,punctuation:wst,reflink:oie,reflinkSearch:Pst,tag:Ost,text:xst,url:rx},Lst={...m9,link:ls(/^!?\[(label)\]\((.*?)\)/).replace("label",l4).getRegex(),reflink:ls(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",l4).getRegex()},BI={...m9,emStrongRDelimAst:Ast,emStrongLDelim:Cst,url:ls(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",xH).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:ls(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",xH).getRegex()},$st={...BI,br:ls(eie).replace("{2,}","*").getRegex(),text:ls(BI.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},d_={normal:h9,gfm:gst,pedantic:bst},rv={normal:m9,gfm:BI,breaks:$st,pedantic:Lst},Fst={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wH=e=>Fst[e];function Xu(e,t){if(t){if(Pa.escapeTest.test(e))return e.replace(Pa.escapeReplace,wH)}else if(Pa.escapeTestNoEncode.test(e))return e.replace(Pa.escapeReplaceNoEncode,wH);return e}function EH(e){try{e=encodeURI(e).replace(Pa.percentDecode,"%")}catch{return null}return e}function _H(e,t){var o;let n=e.replace(Pa.findPipe,(i,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(Pa.splitPipe),s=0;if(r[0].trim()||r.shift(),r.length>0&&!((o=r.at(-1))!=null&&o.trim())&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(Pa.slashPipe,"|");return r}function sv(e,t,n){let r=e.length;if(r===0)return"";let s=0;for(;s<r&&e.charAt(r-s-1)===t;)s++;return e.slice(0,r-s)}function Bst(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function SH(e,t,n,r,s){let o=t.href,i=t.title||null,a=e[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:o,title:i,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function zst(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(r===null)return t;let s=r[1];return t.split(`
`).map(o=>{let i=o.match(n.other.beginningSpace);if(i===null)return o;let[a]=i;return a.length>=s.length?o.slice(s.length):o}).join(`
`)}var c4=class{constructor(t){Ze(this,"options");Ze(this,"rules");Ze(this,"lexer");this.options=t||Hm}space(t){let n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){let n=this.rules.block.code.exec(t);if(n){let r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:sv(r,`
`)}}}fences(t){let n=this.rules.block.fences.exec(t);if(n){let r=n[0],s=zst(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:s}}}heading(t){let n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){let s=sv(r,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(r=s.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){let n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:sv(n[0],`
`)}}blockquote(t){let n=this.rules.block.blockquote.exec(t);if(n){let r=sv(n[0],`
`).split(`
`),s="",o="",i=[];for(;r.length>0;){let a=!1,l=[],c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))l.push(r[c]),a=!0;else if(!a)l.push(r[c]);else break;r=r.slice(c);let u=l.join(`
`),f=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${u}`:u,o=o?`${o}
${f}`:f;let m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=m,r.length===0)break;let g=i.at(-1);if((g==null?void 0:g.type)==="code")break;if((g==null?void 0:g.type)==="blockquote"){let y=g,v=y.raw+`
`+r.join(`
`),x=this.blockquote(v);i[i.length-1]=x,s=s.substring(0,s.length-y.raw.length)+x.raw,o=o.substring(0,o.length-y.text.length)+x.text;break}else if((g==null?void 0:g.type)==="list"){let y=g,v=y.raw+`
`+r.join(`
`),x=this.list(v);i[i.length-1]=x,s=s.substring(0,s.length-g.raw.length)+x.raw,o=o.substring(0,o.length-y.raw.length)+x.raw,r=v.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:i,text:o}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r=n[1].trim(),s=r.length>1,o={type:"list",raw:"",ordered:s,start:s?+r.slice(0,-1):"",loose:!1,items:[]};r=s?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=s?r:"[*+-]");let i=this.rules.other.listItemRegex(r),a=!1;for(;t;){let c=!1,u="",f="";if(!(n=i.exec(t))||this.rules.block.hr.test(t))break;u=n[0],t=t.substring(u.length);let m=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,T=>" ".repeat(3*T.length)),g=t.split(`
`,1)[0],y=!m.trim(),v=0;if(this.options.pedantic?(v=2,f=m.trimStart()):y?v=n[1].length+1:(v=n[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,f=m.slice(v),v+=n[1].length),y&&this.rules.other.blankLine.test(g)&&(u+=g+`
`,t=t.substring(g.length+1),c=!0),!c){let T=this.rules.other.nextBulletRegex(v),k=this.rules.other.hrRegex(v),I=this.rules.other.fencesBeginRegex(v),O=this.rules.other.headingBeginRegex(v),M=this.rules.other.htmlBeginRegex(v);for(;t;){let P=t.split(`
`,1)[0],j;if(g=P,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),j=g):j=g.replace(this.rules.other.tabCharGlobal,"    "),I.test(g)||O.test(g)||M.test(g)||T.test(g)||k.test(g))break;if(j.search(this.rules.other.nonSpaceChar)>=v||!g.trim())f+=`
`+j.slice(v);else{if(y||m.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||I.test(m)||O.test(m)||k.test(m))break;f+=`
`+g}!y&&!g.trim()&&(y=!0),u+=P+`
`,t=t.substring(P.length+1),m=j.slice(v)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0));let x=null,E;this.options.gfm&&(x=this.rules.other.listIsTask.exec(f),x&&(E=x[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:u,task:!!x,checked:E,loose:!1,text:f,tokens:[]}),o.raw+=u}let l=o.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let c=0;c<o.items.length;c++)if(this.lexer.state.top=!1,o.items[c].tokens=this.lexer.blockTokens(o.items[c].text,[]),!o.loose){let u=o.items[c].tokens.filter(m=>m.type==="space"),f=u.length>0&&u.some(m=>this.rules.other.anyLine.test(m.raw));o.loose=f}if(o.loose)for(let c=0;c<o.items.length;c++)o.items[c].loose=!0;return o}}html(t){let n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){let n=this.rules.block.def.exec(t);if(n){let r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:s,title:o}}}table(t){var a;let n=this.rules.block.table.exec(t);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let r=_H(n[1]),s=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===s.length){for(let l of s)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<r.length;l++)i.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:i.align[l]});for(let l of o)i.rows.push(_H(l,i.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:i.align[u]})));return i}}lheading(t){let n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){let n=this.rules.block.paragraph.exec(t);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){let n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){let n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(t){let n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){let n=this.rules.inline.link.exec(t);if(n){let r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let i=sv(r.slice(0,-1),"\\");if((r.length-i.length)%2===0)return}else{let i=Bst(n[2],"()");if(i===-2)return;if(i>-1){let a=(n[0].indexOf("!")===0?5:4)+n[1].length+i;n[2]=n[2].substring(0,i),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let s=n[2],o="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(s);i&&(s=i[1],o=i[3])}else o=n[3]?n[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?s=s.slice(1):s=s.slice(1,-1)),SH(n,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let s=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=n[s.toLowerCase()];if(!o){let i=r[0].charAt(0);return{type:"text",raw:i,text:i}}return SH(r,o,r[0],this.lexer,this.rules)}}emStrong(t,n,r=""){let s=this.rules.inline.emStrongLDelim.exec(t);if(!(!s||s[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!r||this.rules.inline.punctuation.exec(r))){let o=[...s[0]].length-1,i,a,l=o,c=0,u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,n=n.slice(-1*t.length+o);(s=u.exec(n))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(a=[...i].length,s[3]||s[4]){l+=a;continue}else if((s[5]||s[6])&&o%3&&!((o+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let f=[...s[0]][0].length,m=t.slice(0,o+s.index+f+a);if(Math.min(o,a)%2){let y=m.slice(1,-1);return{type:"em",raw:m,text:y,tokens:this.lexer.inlineTokens(y)}}let g=m.slice(2,-2);return{type:"strong",raw:m,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(t){let n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(r),o=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return s&&o&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(t){let n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){let n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){let n=this.rules.inline.autolink.exec(t);if(n){let r,s;return n[2]==="@"?(r=n[1],s="mailto:"+r):(r=n[1],s=r),{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(t){var r;let n;if(n=this.rules.inline.url.exec(t)){let s,o;if(n[2]==="@")s=n[0],o="mailto:"+s;else{let i;do i=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(i!==n[0]);s=n[0],n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(t){let n=this.rules.inline.text.exec(t);if(n){let r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}},Sc=class zI{constructor(t){Ze(this,"tokens");Ze(this,"options");Ze(this,"state");Ze(this,"tokenizer");Ze(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Hm,this.options.tokenizer=this.options.tokenizer||new c4,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Pa,block:d_.normal,inline:rv.normal};this.options.pedantic?(n.block=d_.pedantic,n.inline=rv.pedantic):this.options.gfm&&(n.block=d_.gfm,this.options.breaks?n.inline=rv.breaks:n.inline=rv.gfm),this.tokenizer.rules=n}static get rules(){return{block:d_,inline:rv}}static lex(t,n){return new zI(n).lex(t)}static lexInline(t,n){return new zI(n).inlineTokens(t)}lex(t){t=t.replace(Pa.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){var s,o,i;for(this.options.pedantic&&(t=t.replace(Pa.tabCharGlobal,"    ").replace(Pa.spaceLine,""));t;){let a;if((o=(s=this.options.extensions)==null?void 0:s.block)!=null&&o.some(c=>(a=c.call({lexer:this},t,n))?(t=t.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);let c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},n.push(a));continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),n.push(a);continue}let l=t;if((i=this.options.extensions)!=null&&i.startBlock){let c=1/0,u=t.slice(1),f;this.options.extensions.startBlock.forEach(m=>{f=m.call({lexer:this},u),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){let c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),r=l.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var l,c,u,f,m;let r=t,s=null;if(this.tokens.links){let g=Object.keys(this.tokens.links);if(g.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)g.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let o;for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)o=s[2]?s[2].length:0,r=r.slice(0,s.index+o)+"["+"a".repeat(s[0].length-o-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=((c=(l=this.options.hooks)==null?void 0:l.emStrongMask)==null?void 0:c.call({lexer:this},r))??r;let i=!1,a="";for(;t;){i||(a=""),i=!1;let g;if((f=(u=this.options.extensions)==null?void 0:u.inline)!=null&&f.some(v=>(g=v.call({lexer:this},t,n))?(t=t.substring(g.raw.length),n.push(g),!0):!1))continue;if(g=this.tokenizer.escape(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.tag(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.link(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(g.raw.length);let v=n.at(-1);g.type==="text"&&(v==null?void 0:v.type)==="text"?(v.raw+=g.raw,v.text+=g.text):n.push(g);continue}if(g=this.tokenizer.emStrong(t,r,a)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.codespan(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.br(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.del(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.autolink(t)){t=t.substring(g.raw.length),n.push(g);continue}if(!this.state.inLink&&(g=this.tokenizer.url(t))){t=t.substring(g.raw.length),n.push(g);continue}let y=t;if((m=this.options.extensions)!=null&&m.startInline){let v=1/0,x=t.slice(1),E;this.options.extensions.startInline.forEach(T=>{E=T.call({lexer:this},x),typeof E=="number"&&E>=0&&(v=Math.min(v,E))}),v<1/0&&v>=0&&(y=t.substring(0,v+1))}if(g=this.tokenizer.inlineText(y)){t=t.substring(g.raw.length),g.raw.slice(-1)!=="_"&&(a=g.raw.slice(-1)),i=!0;let v=n.at(-1);(v==null?void 0:v.type)==="text"?(v.raw+=g.raw,v.text+=g.text):n.push(g);continue}if(t){let v="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(v);break}else throw new Error(v)}}return n}},u4=class{constructor(t){Ze(this,"options");Ze(this,"parser");this.options=t||Hm}space(t){return""}code({text:t,lang:n,escaped:r}){var i;let s=(i=(n||"").match(Pa.notSpaceStart))==null?void 0:i[0],o=t.replace(Pa.endingNewline,"")+`
`;return s?'<pre><code class="language-'+Xu(s)+'">'+(r?o:Xu(o,!0))+`</code></pre>
`:"<pre><code>"+(r?o:Xu(o,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:n}){return`<h${n}>${this.parser.parseInline(t)}</h${n}>
`}hr(t){return`<hr>
`}list(t){let n=t.ordered,r=t.start,s="";for(let a=0;a<t.items.length;a++){let l=t.items[a];s+=this.listitem(l)}let o=n?"ol":"ul",i=n&&r!==1?' start="'+r+'"':"";return"<"+o+i+`>
`+s+"</"+o+`>
`}listitem(t){var r;let n="";if(t.task){let s=this.checkbox({checked:!!t.checked});t.loose?((r=t.tokens[0])==null?void 0:r.type)==="paragraph"?(t.tokens[0].text=s+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=s+" "+Xu(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):n+=s+" "}return n+=this.parser.parse(t.tokens,!!t.loose),`<li>${n}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let n="",r="";for(let o=0;o<t.header.length;o++)r+=this.tablecell(t.header[o]);n+=this.tablerow({text:r});let s="";for(let o=0;o<t.rows.length;o++){let i=t.rows[o];r="";for(let a=0;a<i.length;a++)r+=this.tablecell(i[a]);s+=this.tablerow({text:r})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+s+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let n=this.parser.parseInline(t.tokens),r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Xu(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:n,tokens:r}){let s=this.parser.parseInline(r),o=EH(t);if(o===null)return s;t=o;let i='<a href="'+t+'"';return n&&(i+=' title="'+Xu(n)+'"'),i+=">"+s+"</a>",i}image({href:t,title:n,text:r,tokens:s}){s&&(r=this.parser.parseInline(s,this.parser.textRenderer));let o=EH(t);if(o===null)return Xu(r);t=o;let i=`<img src="${t}" alt="${r}"`;return n&&(i+=` title="${Xu(n)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Xu(t.text)}},g9=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},iu=class jI{constructor(t){Ze(this,"options");Ze(this,"renderer");Ze(this,"textRenderer");this.options=t||Hm,this.options.renderer=this.options.renderer||new u4,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new g9}static parse(t,n){return new jI(n).parse(t)}static parseInline(t,n){return new jI(n).parseInline(t)}parse(t,n=!0){var s,o;let r="";for(let i=0;i<t.length;i++){let a=t[i];if((o=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&o[a.type]){let c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){r+=u||"";continue}}let l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"def":{r+=this.renderer.def(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;i+1<t.length&&t[i+1].type==="text";)c=t[++i],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(t,n=this.renderer){var s,o;let r="";for(let i=0;i<t.length;i++){let a=t[i];if((o=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&o[a.type]){let c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}let l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},E_,Cv=(E_=class{constructor(t){Ze(this,"options");Ze(this,"block");this.options=t||Hm}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Sc.lex:Sc.lexInline}provideParser(){return this.block?iu.parse:iu.parseInline}},Ze(E_,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Ze(E_,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),E_),jst=class{constructor(...t){Ze(this,"defaults",l9());Ze(this,"options",this.setOptions);Ze(this,"parse",this.parseMarkdown(!0));Ze(this,"parseInline",this.parseMarkdown(!1));Ze(this,"Parser",iu);Ze(this,"Renderer",u4);Ze(this,"TextRenderer",g9);Ze(this,"Lexer",Sc);Ze(this,"Tokenizer",c4);Ze(this,"Hooks",Cv);this.use(...t)}walkTokens(t,n){var s,o;let r=[];for(let i of t)switch(r=r.concat(n.call(this,i)),i.type){case"table":{let a=i;for(let l of a.header)r=r.concat(this.walkTokens(l.tokens,n));for(let l of a.rows)for(let c of l)r=r.concat(this.walkTokens(c.tokens,n));break}case"list":{let a=i;r=r.concat(this.walkTokens(a.items,n));break}default:{let a=i;(o=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...t){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{let s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let i=n.renderers[o.name];i?n.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=i.apply(this,a)),l}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=n[o.level];i?i.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),s.extensions=n),r.renderer){let o=this.defaults.renderer||new u4(this.defaults);for(let i in r.renderer){if(!(i in o))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let a=i,l=r.renderer[a],c=o[a];o[a]=(...u)=>{let f=l.apply(o,u);return f===!1&&(f=c.apply(o,u)),f||""}}s.renderer=o}if(r.tokenizer){let o=this.defaults.tokenizer||new c4(this.defaults);for(let i in r.tokenizer){if(!(i in o))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let a=i,l=r.tokenizer[a],c=o[a];o[a]=(...u)=>{let f=l.apply(o,u);return f===!1&&(f=c.apply(o,u)),f}}s.tokenizer=o}if(r.hooks){let o=this.defaults.hooks||new Cv;for(let i in r.hooks){if(!(i in o))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let a=i,l=r.hooks[a],c=o[a];Cv.passThroughHooks.has(i)?o[a]=u=>{if(this.defaults.async&&Cv.passThroughHooksRespectAsync.has(i))return(async()=>{let m=await l.call(o,u);return c.call(o,m)})();let f=l.call(o,u);return c.call(o,f)}:o[a]=(...u)=>{if(this.defaults.async)return(async()=>{let m=await l.apply(o,u);return m===!1&&(m=await c.apply(o,u)),m})();let f=l.apply(o,u);return f===!1&&(f=c.apply(o,u)),f}}s.hooks=o}if(r.walkTokens){let o=this.defaults.walkTokens,i=r.walkTokens;s.walkTokens=function(a){let l=[];return l.push(i.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return Sc.lex(t,n??this.defaults)}parser(t,n){return iu.parse(t,n??this.defaults)}parseMarkdown(t){return(n,r)=>{let s={...r},o={...this.defaults,...s},i=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&s.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=t),o.async)return(async()=>{let a=o.hooks?await o.hooks.preprocess(n):n,l=await(o.hooks?await o.hooks.provideLexer():t?Sc.lex:Sc.lexInline)(a,o),c=o.hooks?await o.hooks.processAllTokens(l):l;o.walkTokens&&await Promise.all(this.walkTokens(c,o.walkTokens));let u=await(o.hooks?await o.hooks.provideParser():t?iu.parse:iu.parseInline)(c,o);return o.hooks?await o.hooks.postprocess(u):u})().catch(i);try{o.hooks&&(n=o.hooks.preprocess(n));let a=(o.hooks?o.hooks.provideLexer():t?Sc.lex:Sc.lexInline)(n,o);o.hooks&&(a=o.hooks.processAllTokens(a)),o.walkTokens&&this.walkTokens(a,o.walkTokens);let l=(o.hooks?o.hooks.provideParser():t?iu.parse:iu.parseInline)(a,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(a){return i(a)}}}onError(t,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let s="<p>An error occurred:</p><pre>"+Xu(r.message+"",!0)+"</pre>";return n?Promise.resolve(s):s}if(n)return Promise.reject(r);throw r}}},Em=new jst;function Ls(e,t){return Em.parse(e,t)}Ls.options=Ls.setOptions=function(e){return Em.setOptions(e),Ls.defaults=Em.defaults,Zoe(Ls.defaults),Ls};Ls.getDefaults=l9;Ls.defaults=Hm;Ls.use=function(...e){return Em.use(...e),Ls.defaults=Em.defaults,Zoe(Ls.defaults),Ls};Ls.walkTokens=function(e,t){return Em.walkTokens(e,t)};Ls.parseInline=Em.parseInline;Ls.Parser=iu;Ls.parser=iu.parse;Ls.Renderer=u4;Ls.TextRenderer=g9;Ls.Lexer=Sc;Ls.lexer=Sc.lex;Ls.Tokenizer=c4;Ls.Hooks=Cv;Ls.parse=Ls;Ls.options;Ls.setOptions;Ls.use;Ls.walkTokens;Ls.parseInline;iu.parse;Sc.lex;var br=(...e)=>cG(yR(e)),L1=(e,t,n)=>{let r=typeof t=="string"?new Blob([t],{type:n}):t,s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},Ust=w.createContext({code:""}),aie=()=>w.useContext(Ust),TH=({onCopy:e,onError:t,timeout:n=2e3,children:r,className:s,code:o,...i})=>{let[a,l]=w.useState(!1),c=w.useRef(0),{code:u}=aie(),{isAnimating:f}=w.useContext(Tu),m=o??u,g=async()=>{var v;if(typeof window>"u"||!((v=navigator==null?void 0:navigator.clipboard)!=null&&v.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{a||(await navigator.clipboard.writeText(m),l(!0),e==null||e(),c.current=window.setTimeout(()=>l(!1),n))}catch(x){t==null||t(x)}};w.useEffect(()=>()=>{window.clearTimeout(c.current)},[]);let y=a?Foe:Boe;return h.jsx("button",{className:br("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),"data-streamdown":"code-block-copy-button",disabled:f,onClick:g,title:"Copy Code",type:"button",...i,children:r??h.jsx(y,{size:14})})},CH={"1c":"1c","1c-query":"1cq",abap:"abap","actionscript-3":"as",ada:"ada",adoc:"adoc","angular-html":"html","angular-ts":"ts",apache:"conf",apex:"cls",apl:"apl",applescript:"applescript",ara:"ara",asciidoc:"adoc",asm:"asm",astro:"astro",awk:"awk",ballerina:"bal",bash:"sh",bat:"bat",batch:"bat",be:"be",beancount:"beancount",berry:"berry",bibtex:"bib",bicep:"bicep",blade:"blade.php",bsl:"bsl",c:"c","c#":"cs","c++":"cpp",cadence:"cdc",cairo:"cairo",cdc:"cdc",clarity:"clar",clj:"clj",clojure:"clj","closure-templates":"soy",cmake:"cmake",cmd:"cmd",cobol:"cob",codeowners:"CODEOWNERS",codeql:"ql",coffee:"coffee",coffeescript:"coffee","common-lisp":"lisp",console:"sh",coq:"v",cpp:"cpp",cql:"cql",crystal:"cr",cs:"cs",csharp:"cs",css:"css",csv:"csv",cue:"cue",cypher:"cql",d:"d",dart:"dart",dax:"dax",desktop:"desktop",diff:"diff",docker:"dockerfile",dockerfile:"dockerfile",dotenv:"env","dream-maker":"dm",edge:"edge",elisp:"el",elixir:"ex",elm:"elm","emacs-lisp":"el",erb:"erb",erl:"erl",erlang:"erl",f:"f","f#":"fs",f03:"f03",f08:"f08",f18:"f18",f77:"f77",f90:"f90",f95:"f95",fennel:"fnl",fish:"fish",fluent:"ftl",for:"for","fortran-fixed-form":"f","fortran-free-form":"f90",fs:"fs",fsharp:"fs",fsl:"fsl",ftl:"ftl",gdresource:"tres",gdscript:"gd",gdshader:"gdshader",genie:"gs",gherkin:"feature","git-commit":"gitcommit","git-rebase":"gitrebase",gjs:"js",gleam:"gleam","glimmer-js":"js","glimmer-ts":"ts",glsl:"glsl",gnuplot:"plt",go:"go",gql:"gql",graphql:"graphql",groovy:"groovy",gts:"gts",hack:"hack",haml:"haml",handlebars:"hbs",haskell:"hs",haxe:"hx",hbs:"hbs",hcl:"hcl",hjson:"hjson",hlsl:"hlsl",hs:"hs",html:"html","html-derivative":"html",http:"http",hxml:"hxml",hy:"hy",imba:"imba",ini:"ini",jade:"jade",java:"java",javascript:"js",jinja:"jinja",jison:"jison",jl:"jl",js:"js",json:"json",json5:"json5",jsonc:"jsonc",jsonl:"jsonl",jsonnet:"jsonnet",jssm:"jssm",jsx:"jsx",julia:"jl",kotlin:"kt",kql:"kql",kt:"kt",kts:"kts",kusto:"kql",latex:"tex",lean:"lean",lean4:"lean",less:"less",liquid:"liquid",lisp:"lisp",lit:"lit",llvm:"ll",log:"log",logo:"logo",lua:"lua",luau:"luau",make:"mak",makefile:"mak",markdown:"md",marko:"marko",matlab:"m",md:"md",mdc:"mdc",mdx:"mdx",mediawiki:"wiki",mermaid:"mmd",mips:"s",mipsasm:"s",mmd:"mmd",mojo:"mojo",move:"move",nar:"nar",narrat:"narrat",nextflow:"nf",nf:"nf",nginx:"conf",nim:"nim",nix:"nix",nu:"nu",nushell:"nu",objc:"m","objective-c":"m","objective-cpp":"mm",ocaml:"ml",pascal:"pas",perl:"pl",perl6:"p6",php:"php",plsql:"pls",po:"po",polar:"polar",postcss:"pcss",pot:"pot",potx:"potx",powerquery:"pq",powershell:"ps1",prisma:"prisma",prolog:"pl",properties:"properties",proto:"proto",protobuf:"proto",ps:"ps",ps1:"ps1",pug:"pug",puppet:"pp",purescript:"purs",py:"py",python:"py",ql:"ql",qml:"qml",qmldir:"qmldir",qss:"qss",r:"r",racket:"rkt",raku:"raku",razor:"cshtml",rb:"rb",reg:"reg",regex:"regex",regexp:"regexp",rel:"rel",riscv:"s",rs:"rs",rst:"rst",ruby:"rb",rust:"rs",sas:"sas",sass:"sass",scala:"scala",scheme:"scm",scss:"scss",sdbl:"sdbl",sh:"sh",shader:"shader",shaderlab:"shader",shell:"sh",shellscript:"sh",shellsession:"sh",smalltalk:"st",solidity:"sol",soy:"soy",sparql:"rq",spl:"spl",splunk:"spl",sql:"sql","ssh-config":"config",stata:"do",styl:"styl",stylus:"styl",svelte:"svelte",swift:"swift","system-verilog":"sv",systemd:"service",talon:"talon",talonscript:"talon",tasl:"tasl",tcl:"tcl",templ:"templ",terraform:"tf",tex:"tex",tf:"tf",tfvars:"tfvars",toml:"toml",ts:"ts","ts-tags":"ts",tsp:"tsp",tsv:"tsv",tsx:"tsx",turtle:"ttl",twig:"twig",typ:"typ",typescript:"ts",typespec:"tsp",typst:"typ",v:"v",vala:"vala",vb:"vb",verilog:"v",vhdl:"vhdl",vim:"vim",viml:"vim",vimscript:"vim",vue:"vue","vue-html":"html","vue-vine":"vine",vy:"vy",vyper:"vy",wasm:"wasm",wenyan:"wy",wgsl:"wgsl",wiki:"wiki",wikitext:"wiki",wit:"wit",wl:"wl",wolfram:"wl",xml:"xml",xsl:"xsl",yaml:"yaml",yml:"yml",zenscript:"zs",zig:"zig",zsh:"zsh",:"wy"},Hst=({onDownload:e,onError:t,language:n,children:r,className:s,code:o,...i})=>{let{code:a}=aie(),{isAnimating:l}=w.useContext(Tu),c=o??a,u=`file.${n&&n in CH?CH[n]:"txt"}`,f="text/plain",m=()=>{try{L1(u,c,f),e==null||e()}catch(g){t==null||t(g)}};return h.jsx("button",{className:br("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),"data-streamdown":"code-block-download-button",disabled:l,onClick:m,title:"Download file",type:"button",...i,children:r??h.jsx(nk,{size:14})})},kH=()=>h.jsxs("div",{className:"w-full divide-y divide-border overflow-hidden rounded-xl border border-border",children:[h.jsx("div",{className:"h-[46px] w-full bg-muted/80"}),h.jsx("div",{className:"flex w-full items-center justify-center p-4",children:h.jsx(Ftt,{className:"size-4 animate-spin"})})]}),Vst=/\.[^/.]+$/,qst=({node:e,className:t,src:n,alt:r,...s})=>{let o=async()=>{if(n)try{let i=await(await fetch(n)).blob(),a=new URL(n,window.location.origin).pathname.split("/").pop()||"",l=a.split(".").pop(),c=a.includes(".")&&l!==void 0&&l.length<=4,u="";if(c)u=a;else{let f=i.type,m="png";f.includes("jpeg")||f.includes("jpg")?m="jpg":f.includes("png")?m="png":f.includes("svg")?m="svg":f.includes("gif")?m="gif":f.includes("webp")&&(m="webp"),u=`${(r||a||"image").replace(Vst,"")}.${m}`}L1(u,i,i.type)}catch(i){console.error("Failed to download image:",i)}};return n?h.jsxs("div",{className:"group relative my-4 inline-block","data-streamdown":"image-wrapper",children:[h.jsx("img",{alt:r,className:br("max-w-full rounded-lg",t),"data-streamdown":"image",src:n,...s}),h.jsx("div",{className:"pointer-events-none absolute inset-0 hidden rounded-lg bg-black/10 group-hover:block"}),h.jsx("button",{className:br("absolute right-2 bottom-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border border-border bg-background/90 shadow-sm backdrop-blur-sm transition-all duration-200 hover:bg-background","opacity-0 group-hover:opacity-100"),onClick:o,title:"Download image",type:"button",children:h.jsx(nk,{size:14})})]}):null},lie=async e=>{let t={startOnLoad:!1,theme:"default",securityLevel:"strict",fontFamily:"monospace",suppressErrorRendering:!0,...e},n=(await me(async()=>{const{default:r}=await import("./mermaid.core-BDUb7b1-.js").then(s=>s.bC);return{default:r}},[],import.meta.url)).default;return n.initialize(t),n},Gst=(e,t)=>{var n;let r=(n=void 0)!=null?n:5;return new Promise((s,o)=>{let i="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e))),a=new Image;a.crossOrigin="anonymous",a.onload=()=>{let l=document.createElement("canvas"),c=a.width*r,u=a.height*r;l.width=c,l.height=u;let f=l.getContext("2d");if(!f){o(new Error("Failed to create 2D canvas context for PNG export"));return}f.drawImage(a,0,0,c,u),l.toBlob(m=>{if(!m){o(new Error("Failed to create PNG blob"));return}s(m)},"image/png")},a.onerror=()=>o(new Error("Failed to load SVG image")),a.src=i})},Wst=({chart:e,children:t,className:n,onDownload:r,config:s,onError:o})=>{let[i,a]=w.useState(!1),l=w.useRef(null),{isAnimating:c}=w.useContext(Tu),u=async f=>{try{if(f==="mmd"){L1("diagram.mmd",e,"text/plain"),a(!1),r==null||r(f);return}let m=await lie(s),g=e.split("").reduce((x,E)=>(x<<5)-x+E.charCodeAt(0)|0,0),y=`mermaid-${Math.abs(g)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:v}=await m.render(y,e);if(!v){o==null||o(new Error("SVG not found. Please wait for the diagram to render."));return}if(f==="svg"){L1("diagram.svg",v,"image/svg+xml"),a(!1),r==null||r(f);return}if(f==="png"){let x=await Gst(v);L1("diagram.png",x,"image/png"),r==null||r(f),a(!1);return}}catch(m){o==null||o(m)}};return w.useEffect(()=>{let f=m=>{l.current&&!l.current.contains(m.target)&&a(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]),h.jsxs("div",{className:"relative",ref:l,children:[h.jsx("button",{className:br("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",n),disabled:c,onClick:()=>a(!i),title:"Download diagram",type:"button",children:t??h.jsx(nk,{size:14})}),i&&h.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>u("svg"),title:"Download diagram as SVG",type:"button",children:"SVG"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>u("png"),title:"Download diagram as PNG",type:"button",children:"PNG"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>u("mmd"),title:"Download diagram as MMD",type:"button",children:"MMD"})]})]})},sx=0,Yst=()=>{sx+=1,sx===1&&(document.body.style.overflow="hidden")},Kst=()=>{sx=Math.max(0,sx-1),sx===0&&(document.body.style.overflow="")},Zst=({chart:e,config:t,onFullscreen:n,onExit:r,className:s,...o})=>{let[i,a]=w.useState(!1),{isAnimating:l,controls:c}=w.useContext(Tu),u=(()=>{if(typeof c=="boolean")return c;let m=c.mermaid;return m===!1?!1:m===!0||m===void 0?!0:m.panZoom!==!1})(),f=()=>{a(!i)};return w.useEffect(()=>{if(i){Yst();let m=g=>{g.key==="Escape"&&a(!1)};return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m),Kst()}}},[i]),w.useEffect(()=>{i?n==null||n():r&&r()},[i,n,r]),h.jsxs(h.Fragment,{children:[h.jsx("button",{className:br("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),disabled:l,onClick:f,title:"View fullscreen",type:"button",...o,children:h.jsx(ztt,{size:14})}),i&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm",onClick:f,onKeyDown:m=>{m.key==="Escape"&&f()},role:"button",tabIndex:0,children:[h.jsx("button",{className:"absolute top-4 right-4 z-10 rounded-md p-2 text-muted-foreground transition-all hover:bg-muted hover:text-foreground",onClick:f,title:"Exit fullscreen",type:"button",children:h.jsx(Vtt,{size:20})}),h.jsx("div",{className:"flex h-full w-full items-center justify-center p-4",onClick:m=>m.stopPropagation(),onKeyDown:m=>m.stopPropagation(),role:"presentation",children:h.jsx(Fie,{chart:e,className:"h-full w-full [&>div]:h-full [&>div]:overflow-hidden [&_svg]:h-auto [&_svg]:w-auto",config:t,fullscreen:!0,showControls:u})})]})]})},cie=e=>{var t,n;let r=[],s=[],o=e.querySelectorAll("thead th");for(let a of o)r.push(((t=a.textContent)==null?void 0:t.trim())||"");let i=e.querySelectorAll("tbody tr");for(let a of i){let l=[],c=a.querySelectorAll("td");for(let u of c)l.push(((n=u.textContent)==null?void 0:n.trim())||"");s.push(l)}return{headers:r,rows:s}},uie=e=>{let{headers:t,rows:n}=e,r=a=>{let l=!1,c=!1;for(let u=0;u<a.length;u+=1){let f=a[u];if(f==='"'){l=!0,c=!0;break}(f===","||f===`
`)&&(l=!0)}return l?c?`"${a.replace(/"/g,'""')}"`:`"${a}"`:a},s=t.length>0?n.length+1:n.length,o=new Array(s),i=0;t.length>0&&(o[i]=t.map(r).join(","),i+=1);for(let a of n)o[i]=a.map(r).join(","),i+=1;return o.join(`
`)},Jst=e=>{let{headers:t,rows:n}=e,r=a=>{let l=!1;for(let u=0;u<a.length;u+=1){let f=a[u];if(f==="	"||f===`
`||f==="\r"){l=!0;break}}if(!l)return a;let c=[];for(let u=0;u<a.length;u+=1){let f=a[u];f==="	"?c.push("\\t"):f===`
`?c.push("\\n"):f==="\r"?c.push("\\r"):c.push(f)}return c.join("")},s=t.length>0?n.length+1:n.length,o=new Array(s),i=0;t.length>0&&(o[i]=t.map(r).join("	"),i+=1);for(let a of n)o[i]=a.map(r).join("	"),i+=1;return o.join(`
`)},PA=e=>{let t=!1;for(let r=0;r<e.length;r+=1){let s=e[r];if(s==="\\"||s==="|"){t=!0;break}}if(!t)return e;let n=[];for(let r=0;r<e.length;r+=1){let s=e[r];s==="\\"?n.push("\\\\"):s==="|"?n.push("\\|"):n.push(s)}return n.join("")},Xst=e=>{let{headers:t,rows:n}=e;if(t.length===0)return"";let r=new Array(n.length+2),s=0,o=t.map(a=>PA(a));r[s]=`| ${o.join(" | ")} |`,s+=1;let i=new Array(t.length);for(let a=0;a<t.length;a+=1)i[a]="---";r[s]=`| ${i.join(" | ")} |`,s+=1;for(let a of n)if(a.length<t.length){let l=new Array(t.length);for(let c=0;c<t.length;c+=1)l[c]=c<a.length?PA(a[c]):"";r[s]=`| ${l.join(" | ")} |`,s+=1}else{let l=a.map(c=>PA(c));r[s]=`| ${l.join(" | ")} |`,s+=1}return r.join(`
`)},Qst=({children:e,className:t,onCopy:n,onError:r,timeout:s=2e3})=>{let[o,i]=w.useState(!1),[a,l]=w.useState(!1),c=w.useRef(null),u=w.useRef(0),{isAnimating:f}=w.useContext(Tu),m=async y=>{var v,x;if(typeof window>"u"||!((v=navigator==null?void 0:navigator.clipboard)!=null&&v.write)){r==null||r(new Error("Clipboard API not available"));return}try{let E=(x=c.current)==null?void 0:x.closest('[data-streamdown="table-wrapper"]'),T=E==null?void 0:E.querySelector("table");if(!T){r==null||r(new Error("Table not found"));return}let k=cie(T),I=y==="csv"?uie(k):Jst(k),O=new ClipboardItem({"text/plain":new Blob([I],{type:"text/plain"}),"text/html":new Blob([T.outerHTML],{type:"text/html"})});await navigator.clipboard.write([O]),l(!0),i(!1),n==null||n(y),u.current=window.setTimeout(()=>l(!1),s)}catch(E){r==null||r(E)}};w.useEffect(()=>{let y=v=>{c.current&&!c.current.contains(v.target)&&i(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y),window.clearTimeout(u.current)}},[]);let g=a?Foe:Boe;return h.jsxs("div",{className:"relative",ref:c,children:[h.jsx("button",{className:br("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:f,onClick:()=>i(!o),title:"Copy table",type:"button",children:e??h.jsx(g,{size:14})}),o&&h.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>m("csv"),title:"Copy table as CSV",type:"button",children:"CSV"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>m("tsv"),title:"Copy table as TSV",type:"button",children:"TSV"})]})]})},eot=({children:e,className:t,onDownload:n,onError:r})=>{let[s,o]=w.useState(!1),i=w.useRef(null),{isAnimating:a}=w.useContext(Tu),l=c=>{var u;try{let f=(u=i.current)==null?void 0:u.closest('[data-streamdown="table-wrapper"]'),m=f==null?void 0:f.querySelector("table");if(!m){r==null||r(new Error("Table not found"));return}let g=cie(m),y=c==="csv"?uie(g):Xst(g);L1(`table.${c==="csv"?"csv":"md"}`,y,c==="csv"?"text/csv":"text/markdown"),o(!1),n==null||n(c)}catch(f){r==null||r(f)}};return w.useEffect(()=>{let c=u=>{i.current&&!i.current.contains(u.target)&&o(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),h.jsxs("div",{className:"relative",ref:i,children:[h.jsx("button",{className:br("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:a,onClick:()=>o(!s),title:"Download table",type:"button",children:e??h.jsx(nk,{size:14})}),s&&h.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("csv"),title:"Download table as CSV",type:"button",children:"CSV"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("markdown"),title:"Download table as Markdown",type:"button",children:"Markdown"})]})]})},tot=({children:e,className:t,showControls:n,...r})=>h.jsxs("div",{className:"my-4 flex flex-col space-y-2","data-streamdown":"table-wrapper",children:[n&&h.jsxs("div",{className:"flex items-center justify-end gap-1",children:[h.jsx(Qst,{}),h.jsx(eot,{})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsx("table",{className:br("w-full border-collapse border border-border",t),"data-streamdown":"table",...r,children:e})})]}),not=w.lazy(()=>me(()=>import("./code-block-QI2IAROF-CPXRrmMp.js"),[],import.meta.url).then(e=>({default:e.CodeBlock}))),rot=w.lazy(()=>me(()=>Promise.resolve().then(()=>l0t),void 0,import.meta.url).then(e=>({default:e.Mermaid}))),sot=/language-([^\s]+)/;function ok(e,t){if(!(e!=null&&e.position||t!=null&&t.position))return!0;if(!(e!=null&&e.position&&t!=null&&t.position))return!1;let n=e.position.start,r=t.position.start,s=e.position.end,o=t.position.end;return(n==null?void 0:n.line)===(r==null?void 0:r.line)&&(n==null?void 0:n.column)===(r==null?void 0:r.column)&&(s==null?void 0:s.line)===(o==null?void 0:o.line)&&(s==null?void 0:s.column)===(o==null?void 0:o.column)}function Go(e,t){return e.className===t.className&&ok(e.node,t.node)}var UI=(e,t)=>typeof e=="boolean"?e:e[t]!==!1,f_=(e,t)=>{if(typeof e=="boolean")return e;let n=e.mermaid;return n===!1?!1:n===!0||n===void 0?!0:n[t]!==!1},b9=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("ol",{className:br("list-inside list-decimal whitespace-normal",t),"data-streamdown":"ordered-list",...r,children:e}),(e,t)=>Go(e,t));b9.displayName="MarkdownOl";var die=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("li",{className:br("py-1 [&>p]:inline",t),"data-streamdown":"list-item",...r,children:e}),(e,t)=>e.className===t.className&&ok(e.node,t.node));die.displayName="MarkdownLi";var fie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("ul",{className:br("list-inside list-disc whitespace-normal",t),"data-streamdown":"unordered-list",...r,children:e}),(e,t)=>Go(e,t));fie.displayName="MarkdownUl";var hie=w.memo(({className:e,node:t,...n})=>h.jsx("hr",{className:br("my-6 border-border",e),"data-streamdown":"horizontal-rule",...n}),(e,t)=>Go(e,t));hie.displayName="MarkdownHr";var pie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("span",{className:br("font-semibold",t),"data-streamdown":"strong",...r,children:e}),(e,t)=>Go(e,t));pie.displayName="MarkdownStrong";var mie=w.memo(({children:e,className:t,href:n,node:r,...s})=>{let o=n==="streamdown:incomplete-link";return h.jsx("a",{className:br("wrap-anywhere font-medium text-primary underline",t),"data-incomplete":o,"data-streamdown":"link",href:n,rel:"noreferrer",target:"_blank",...s,children:e})},(e,t)=>Go(e,t)&&e.href===t.href);mie.displayName="MarkdownA";var gie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("h1",{className:br("mt-6 mb-2 font-semibold text-3xl",t),"data-streamdown":"heading-1",...r,children:e}),(e,t)=>Go(e,t));gie.displayName="MarkdownH1";var bie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("h2",{className:br("mt-6 mb-2 font-semibold text-2xl",t),"data-streamdown":"heading-2",...r,children:e}),(e,t)=>Go(e,t));bie.displayName="MarkdownH2";var yie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("h3",{className:br("mt-6 mb-2 font-semibold text-xl",t),"data-streamdown":"heading-3",...r,children:e}),(e,t)=>Go(e,t));yie.displayName="MarkdownH3";var vie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("h4",{className:br("mt-6 mb-2 font-semibold text-lg",t),"data-streamdown":"heading-4",...r,children:e}),(e,t)=>Go(e,t));vie.displayName="MarkdownH4";var xie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("h5",{className:br("mt-6 mb-2 font-semibold text-base",t),"data-streamdown":"heading-5",...r,children:e}),(e,t)=>Go(e,t));xie.displayName="MarkdownH5";var wie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("h6",{className:br("mt-6 mb-2 font-semibold text-sm",t),"data-streamdown":"heading-6",...r,children:e}),(e,t)=>Go(e,t));wie.displayName="MarkdownH6";var Eie=w.memo(({children:e,className:t,node:n,...r})=>{let{controls:s}=w.useContext(Tu),o=UI(s,"table");return h.jsx(tot,{className:t,"data-streamdown":"table-wrapper",showControls:o,...r,children:e})},(e,t)=>Go(e,t));Eie.displayName="MarkdownTable";var _ie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("thead",{className:br("bg-muted/80",t),"data-streamdown":"table-header",...r,children:e}),(e,t)=>Go(e,t));_ie.displayName="MarkdownThead";var Sie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("tbody",{className:br("divide-y divide-border bg-muted/40",t),"data-streamdown":"table-body",...r,children:e}),(e,t)=>Go(e,t));Sie.displayName="MarkdownTbody";var Tie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("tr",{className:br("border-border border-b",t),"data-streamdown":"table-row",...r,children:e}),(e,t)=>Go(e,t));Tie.displayName="MarkdownTr";var Cie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("th",{className:br("whitespace-nowrap px-4 py-2 text-left font-semibold text-sm",t),"data-streamdown":"table-header-cell",...r,children:e}),(e,t)=>Go(e,t));Cie.displayName="MarkdownTh";var kie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("td",{className:br("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...r,children:e}),(e,t)=>Go(e,t));kie.displayName="MarkdownTd";var Aie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("blockquote",{className:br("my-4 border-muted-foreground/30 border-l-4 pl-4 text-muted-foreground italic",t),"data-streamdown":"blockquote",...r,children:e}),(e,t)=>Go(e,t));Aie.displayName="MarkdownBlockquote";var Nie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("sup",{className:br("text-sm",t),"data-streamdown":"superscript",...r,children:e}),(e,t)=>Go(e,t));Nie.displayName="MarkdownSup";var Iie=w.memo(({children:e,className:t,node:n,...r})=>h.jsx("sub",{className:br("text-sm",t),"data-streamdown":"subscript",...r,children:e}),(e,t)=>Go(e,t));Iie.displayName="MarkdownSub";var Rie=w.memo(({children:e,className:t,node:n,...r})=>{if("data-footnotes"in r){let s=i=>{var a,l;if(!w.isValidElement(i))return!1;let c=Array.isArray(i.props.children)?i.props.children:[i.props.children],u=!1,f=!1;for(let m of c)if(m){if(typeof m=="string")m.trim()!==""&&(u=!0);else if(w.isValidElement(m))if(((a=m.props)==null?void 0:a["data-footnote-backref"])!==void 0)f=!0;else{let g=Array.isArray(m.props.children)?m.props.children:[m.props.children];for(let y of g){if(typeof y=="string"&&y.trim()!==""){u=!0;break}if(w.isValidElement(y)&&((l=y.props)==null?void 0:l["data-footnote-backref"])===void 0){u=!0;break}}}}return f&&!u},o=Array.isArray(e)?e.map(i=>{if(!w.isValidElement(i))return i;if(i.type===b9){let a=(Array.isArray(i.props.children)?i.props.children:[i.props.children]).filter(l=>!s(l));return a.length===0?null:{...i,props:{...i.props,children:a}}}return i}):e;return(Array.isArray(o)?o.some(i=>i!==null):o!==null)?h.jsx("section",{className:t,...r,children:o}):null}return h.jsx("section",{className:t,...r,children:e})},(e,t)=>Go(e,t));Rie.displayName="MarkdownSection";var oot=({node:e,className:t,children:n,...r})=>{var s,o,i;let a=((s=e==null?void 0:e.position)==null?void 0:s.start.line)===((o=e==null?void 0:e.position)==null?void 0:o.end.line),{mermaid:l,controls:c}=w.useContext(Tu);if(a)return h.jsx("code",{className:br("rounded bg-muted px-1.5 py-0.5 font-mono text-sm",t),"data-streamdown":"inline-code",...r,children:n});let u=t==null?void 0:t.match(sot),f=(i=u==null?void 0:u.at(1))!=null?i:"",m="";if(w.isValidElement(n)&&n.props&&typeof n.props=="object"&&"children"in n.props&&typeof n.props.children=="string"?m=n.props.children:typeof n=="string"&&(m=n),f==="mermaid"){let y=UI(c,"mermaid"),v=f_(c,"download"),x=f_(c,"copy"),E=f_(c,"fullscreen"),T=f_(c,"panZoom");return h.jsx(w.Suspense,{fallback:h.jsx(kH,{}),children:h.jsxs("div",{className:br("group relative my-4 h-auto rounded-xl border p-4",t),"data-streamdown":"mermaid-block",children:[y&&(v||x||E)&&h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[v&&h.jsx(Wst,{chart:m,config:l==null?void 0:l.config}),x&&h.jsx(TH,{code:m}),E&&h.jsx(Zst,{chart:m,config:l==null?void 0:l.config})]}),h.jsx(rot,{chart:m,config:l==null?void 0:l.config,showControls:T})]})})}let g=UI(c,"code");return h.jsx(w.Suspense,{fallback:h.jsx(kH,{}),children:h.jsx(not,{className:br("overflow-x-auto border-border border-t",t),code:m,language:f,children:g&&h.jsxs(h.Fragment,{children:[h.jsx(Hst,{code:m,language:f}),h.jsx(TH,{})]})})})},Mie=w.memo(oot,(e,t)=>e.className===t.className&&ok(e.node,t.node));Mie.displayName="MarkdownCode";var Oie=w.memo(qst,(e,t)=>e.className===t.className&&ok(e.node,t.node));Oie.displayName="MarkdownImg";var Die=w.memo(({children:e,className:t,node:n,...r})=>{var s;let o=(Array.isArray(e)?e:[e]).filter(i=>i!=null&&i!=="");return o.length===1&&w.isValidElement(o[0])&&((s=o[0].props.node)==null?void 0:s.tagName)==="img"?h.jsx(h.Fragment,{children:e}):h.jsx("p",{className:t,...r,children:e})},(e,t)=>Go(e,t));Die.displayName="MarkdownParagraph";var iot={ol:b9,li:die,ul:fie,hr:hie,strong:pie,a:mie,h1:gie,h2:bie,h3:yie,h4:vie,h5:xie,h6:wie,table:Eie,thead:_ie,tbody:Sie,tr:Tie,th:Cie,td:kie,blockquote:Aie,code:Mie,img:Oie,pre:({children:e})=>e,sup:Nie,sub:Iie,p:Die,section:Rie},AH=[],NH={allowDangerousHtml:!0},h_=new WeakMap,aot=class{constructor(){this.cache=new Map,this.keyCache=new WeakMap,this.maxSize=100}generateCacheKey(e){let t=this.keyCache.get(e);if(t)return t;let n=e.rehypePlugins,r=e.remarkPlugins,s=e.remarkRehypeOptions;if(!(n||r||s)){let u="default";return this.keyCache.set(e,u),u}let o=u=>{if(!u||u.length===0)return"";let f="";for(let m=0;m<u.length;m+=1){let g=u[m];if(m>0&&(f+=","),Array.isArray(g)){let[y,v]=g;if(typeof y=="function"){let x=h_.get(y);x||(x=y.name,h_.set(y,x)),f+=x}else f+=String(y);f+=":",f+=JSON.stringify(v)}else if(typeof g=="function"){let y=h_.get(g);y||(y=g.name,h_.set(g,y)),f+=y}else f+=String(g)}return f},i=o(n),a=o(r),l=s?JSON.stringify(s):"",c=`${a}::${i}::${l}`;return this.keyCache.set(e,c),c}get(e){let t=this.generateCacheKey(e),n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(e,t){let n=this.generateCacheKey(e);if(this.cache.size>=this.maxSize){let r=this.cache.keys().next().value;r&&this.cache.delete(r)}this.cache.set(n,t)}clear(){this.cache.clear()}},IH=new aot,Pie=e=>{let t=lot(e),n=e.children||"";return uot(t.runSync(t.parse(n),n),e)},lot=e=>{let t=IH.get(e);if(t)return t;let n=cot(e);return IH.set(e,n),n},cot=e=>{let t=e.rehypePlugins||AH,n=e.remarkPlugins||AH,r=e.remarkRehypeOptions?{...NH,...e.remarkRehypeOptions}:NH;return tst().use(ert).use(n).use(Lrt,r).use(t)},uot=(e,t)=>lnt(e,{Fragment:h.Fragment,components:t.components,ignoreInvalidStyle:!0,jsx:h.jsx,jsxs:h.jsxs,passKeys:!0,passNode:!0}),dot=/\[\^[^\]\s]{1,200}\](?!:)/,fot=/\[\^[^\]\s]{1,200}\]:/,hot=/<\/(\w+)>/,pot=/<(\w+)[\s>]/,LA=e=>{let t=0;for(;t<e.length&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t+=1;return t+1<e.length&&e[t]==="$"&&e[t+1]==="$"},mot=e=>{let t=e.length-1;for(;t>=0&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t-=1;return t>=1&&e[t]==="$"&&e[t-1]==="$"},$A=e=>{let t=0;for(let n=0;n<e.length-1;n+=1)e[n]==="$"&&e[n+1]==="$"&&(t+=1,n+=1);return t},got=e=>{let t=dot.test(e),n=fot.test(e);if(t||n)return[e];let r=Sc.lex(e,{gfm:!0}),s=[],o=[];for(let i of r){let a=i.raw,l=s.length;if(o.length>0){if(s[l-1]+=a,i.type==="html"){let c=a.match(hot);if(c){let u=c[1];o.at(-1)===u&&o.pop()}}continue}if(i.type==="html"&&i.block){let c=a.match(pot);if(c){let u=c[1];a.includes(`</${u}>`)||o.push(u)}}if(a.trim()==="$$"&&l>0){let c=s[l-1],u=LA(c),f=$A(c);if(u&&f%2===1){s[l-1]=c+a;continue}}if(l>0&&mot(a)){let c=s[l-1],u=LA(c),f=$A(c),m=$A(a);if(u&&f%2===1&&!LA(a)&&m===1){s[l-1]=c+a;continue}}s.push(a)}return s},bot={raw:CZe,katex:[SI,{errorColor:"var(--color-muted-foreground)"}],harden:[GVe,{allowedImagePrefixes:["*"],allowedLinkPrefixes:["*"],allowedProtocols:["*"],defaultOrigin:void 0,allowDataImages:!0}]},yot={gfm:[Oet,{}],math:[OI,{singleDollarTextMath:!1}],cjkFriendly:[QZe,{}],cjkFriendlyGfmStrikethrough:[tJe,{}]},vot=Object.values(bot),xot=Object.values(yot),wot={shikiTheme:["github-light","github-dark"],controls:!0,isAnimating:!1,mode:"streaming",mermaid:void 0},Tu=w.createContext(wot),Lie=w.memo(({content:e,shouldParseIncompleteMarkdown:t,...n})=>{let r=w.useMemo(()=>typeof e=="string"&&t?Att(e.trim()):e,[e,t]);return h.jsx(Pie,{...n,children:r})},(e,t)=>{if(e.content!==t.content||e.shouldParseIncompleteMarkdown!==t.shouldParseIncompleteMarkdown||e.index!==t.index)return!1;if(e.components!==t.components){let n=Object.keys(e.components||{}),r=Object.keys(t.components||{});if(n.length!==r.length||n.some(s=>{var o,i;return((o=e.components)==null?void 0:o[s])!==((i=t.components)==null?void 0:i[s])}))return!1}return!(e.rehypePlugins!==t.rehypePlugins||e.remarkPlugins!==t.remarkPlugins)});Lie.displayName="Block";var Eot=["github-light","github-dark"],$ie=w.memo(({children:e,mode:t="streaming",parseIncompleteMarkdown:n=!0,components:r,rehypePlugins:s=vot,remarkPlugins:o=xot,className:i,shikiTheme:a=Eot,mermaid:l,controls:c=!0,isAnimating:u=!1,BlockComponent:f=Lie,parseMarkdownIntoBlocksFn:m=got,...g})=>{let y=w.useId(),[v,x]=w.useTransition(),[E,T]=w.useState([]),k=w.useMemo(()=>m(typeof e=="string"?e:""),[e,m]);w.useEffect(()=>{t==="streaming"?x(()=>{T(k)}):T(k)},[k,t]);let I=t==="streaming"?E:k,O=w.useMemo(()=>I.map((j,V)=>`${y}-${V}`),[I.length,y]),M=w.useMemo(()=>({shikiTheme:a,controls:c,isAnimating:u,mode:t,mermaid:l}),[a,c,u,t,l]),P=w.useMemo(()=>({...iot,...r}),[r]);return w.useEffect(()=>{if(!(Array.isArray(s)&&s.some(H=>Array.isArray(H)?H[0]===SI:H===SI)))return;let j=!1;if(Array.isArray(o)){let H=o.find(F=>Array.isArray(F)?F[0]===OI:F===OI);H&&Array.isArray(H)&&H[1]&&(j=H[1].singleDollarTextMath===!0)}let V=typeof e=="string"?e:"",U=V.includes("$$"),z=j&&(/[^$]\$[^$]/.test(V)||/^\$[^$]/.test(V)||/[^$]\$$/.test(V));(U||z)&&me(()=>Promise.resolve({}),__vite__mapDeps([97]),import.meta.url)},[s,o,e]),t==="static"?h.jsx(Tu.Provider,{value:M,children:h.jsx("div",{className:br("space-y-4 whitespace-normal",i),children:h.jsx(Pie,{components:P,rehypePlugins:s,remarkPlugins:o,...g,children:e})})}):h.jsx(Tu.Provider,{value:M,children:h.jsx("div",{className:br("space-y-4 whitespace-normal",i),children:I.map((j,V)=>h.jsx(f,{components:P,content:j,index:V,rehypePlugins:s,remarkPlugins:o,shouldParseIncompleteMarkdown:n,...g},O[V]))})})},(e,t)=>e.children===t.children&&e.shikiTheme===t.shikiTheme&&e.isAnimating===t.isAnimating&&e.mode===t.mode);$ie.displayName="Streamdown";var _ot=({children:e,className:t,minZoom:n=.5,maxZoom:r=3,zoomStep:s=.1,showControls:o=!0,initialZoom:i=1,fullscreen:a=!1})=>{let l=w.useRef(null),c=w.useRef(null),[u,f]=w.useState(i),[m,g]=w.useState({x:0,y:0}),[y,v]=w.useState(!1),[x,E]=w.useState({x:0,y:0}),[T,k]=w.useState({x:0,y:0}),I=w.useCallback(H=>{f(F=>Math.max(n,Math.min(r,F+H)))},[n,r]),O=w.useCallback(()=>{I(s)},[I,s]),M=w.useCallback(()=>{I(-s)},[I,s]),P=w.useCallback(()=>{f(i),g({x:0,y:0})},[i]),j=w.useCallback(H=>{H.preventDefault();let F=H.deltaY>0?-s:s;I(F)},[I,s]),V=w.useCallback(H=>{if(H.button!==0||H.isPrimary===!1)return;v(!0),E({x:H.clientX,y:H.clientY}),k(m);let F=H.currentTarget;F instanceof HTMLElement&&F.setPointerCapture(H.pointerId)},[m]),U=w.useCallback(H=>{if(!y)return;H.preventDefault();let F=H.clientX-x.x,G=H.clientY-x.y;g({x:T.x+F,y:T.y+G})},[y,x,T]),z=w.useCallback(H=>{v(!1);let F=H.currentTarget;F instanceof HTMLElement&&F.releasePointerCapture(H.pointerId)},[]);return w.useEffect(()=>{let H=l.current;if(H)return H.addEventListener("wheel",j,{passive:!1}),()=>{H.removeEventListener("wheel",j)}},[j]),w.useEffect(()=>{let H=c.current;if(H&&y)return document.body.style.userSelect="none",H.addEventListener("pointermove",U,{passive:!1}),H.addEventListener("pointerup",z),H.addEventListener("pointercancel",z),()=>{document.body.style.userSelect="",H.removeEventListener("pointermove",U),H.removeEventListener("pointerup",z),H.removeEventListener("pointercancel",z)}},[y,U,z]),h.jsxs("div",{className:br("relative",a?"h-full w-full":"w-full",t),ref:l,style:{cursor:y?"grabbing":"grab"},children:[o&&h.jsxs("div",{className:br("absolute z-10 flex flex-col gap-1 rounded-md border border-border bg-background/90 p-1 shadow-sm backdrop-blur-sm",a?"bottom-4 left-4":"bottom-2 left-2"),children:[h.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:u>=r,onClick:O,title:"Zoom in",type:"button",children:h.jsx(Gtt,{size:16})}),h.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:u<=n,onClick:M,title:"Zoom out",type:"button",children:h.jsx(Ytt,{size:16})}),h.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",onClick:P,title:"Reset zoom and pan",type:"button",children:h.jsx(Utt,{size:16})})]}),h.jsx("div",{className:br("origin-center transition-transform duration-150 ease-out",a&&"flex w-full items-center justify-center"),onPointerDown:V,ref:c,role:"application",style:{transform:`translate(${m.x}px, ${m.y}px) scale(${u})`,transformOrigin:"center center",touchAction:"none",willChange:"transform"},children:e})]})},Fie=({chart:e,className:t,config:n,fullscreen:r=!1,showControls:s=!0})=>{let[o,i]=w.useState(null),[a,l]=w.useState(!0),[c,u]=w.useState(""),[f,m]=w.useState(""),[g,y]=w.useState(0),{mermaid:v}=w.useContext(Tu),x=v==null?void 0:v.errorComponent;if(w.useEffect(()=>{(async()=>{try{i(null),l(!0);let T=await lie(n),k=e.split("").reduce((M,P)=>(M<<5)-M+P.charCodeAt(0)|0,0),I=`mermaid-${Math.abs(k)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:O}=await T.render(I,e);u(O),m(O)}catch(T){if(!(f||c)){let k=T instanceof Error?T.message:"Failed to render Mermaid chart";i(k)}}finally{l(!1)}})()},[e,n,g]),a&&!c&&!f)return h.jsx("div",{className:br("my-4 flex justify-center p-4",t),children:h.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[h.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-current border-b-2"}),h.jsx("span",{className:"text-sm",children:"Loading diagram..."})]})});if(o&&!c&&!f){let T=()=>y(k=>k+1);return x?h.jsx(x,{chart:e,error:o,retry:T}):h.jsxs("div",{className:br("rounded-lg border border-red-200 bg-red-50 p-4",t),children:[h.jsxs("p",{className:"font-mono text-red-700 text-sm",children:["Mermaid Error: ",o]}),h.jsxs("details",{className:"mt-2",children:[h.jsx("summary",{className:"cursor-pointer text-red-600 text-xs",children:"Show Code"}),h.jsx("pre",{className:"mt-2 overflow-x-auto rounded bg-red-100 p-2 text-red-800 text-xs",children:e})]})]})}let E=c||f;return h.jsx(_ot,{className:br(r?"h-full w-full overflow-hidden":"my-4 overflow-hidden",t),fullscreen:r,maxZoom:3,minZoom:.5,showControls:s,zoomStep:.1,children:h.jsx("div",{"aria-label":"Mermaid chart",className:br("flex justify-center",r&&"h-full w-full items-center"),dangerouslySetInnerHTML:{__html:E},role:"img"})})};w.createContext(null);const HI=w.memo(({className:e,...t})=>h.jsx($ie,{className:Qe("size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",e),...t}),(e,t)=>e.children===t.children);HI.displayName="MessageResponse";function VI(e){return typeof e=="object"&&e!==null&&"_def"in e}function Sot(e){var r,s,o,i;if(!VI(e))return{type:"object",properties:{}};if(!e.shape)return{type:"object",properties:{}};const t={},n=[];for(const[a,l]of Object.entries(e.shape)){if(!VI(l))continue;const c=l;let u=l;for(;u._def&&(u._def.typeName==="ZodOptional"||u._def.typeName==="ZodNullable"||u._def.typeName==="ZodDefault"||u._def.typeName==="ZodEffects");){const v=u._def.innerType||u._def.schema;if(!v)break;u=v}const f=((r=u._def)==null?void 0:r.typeName)||"ZodString",g={type:{ZodString:"string",ZodNumber:"number",ZodBoolean:"boolean",ZodArray:"array",ZodObject:"object",ZodEnum:"string",ZodNativeEnum:"string"}[f]||"string"},y=((s=u._def)==null?void 0:s.description)||u.description||c.description;y&&(g.description=y),f==="ZodEnum"&&((o=u._def)!=null&&o.values)&&(g.enum=u._def.values),t[a]=g,(i=c.isOptional)!=null&&i.call(c)||n.push(a)}return{type:"object",properties:t,required:n.length>0?n:void 0}}function Tot(e){if(VI(e))return Sot(e);if(typeof e=="object"&&e!==null){const t=e;return t.type?t.properties?t:{...t,properties:{}}:{type:"object",...t}}return{type:"object",properties:{}}}const FA=()=>{var e;return!((e=window.electronAPI)!=null&&e.isElectron)},BA=()=>window.location.origin,Cot=new Set(["claude-sonnet-4-5","claude-sonnet-4-5-20250929","claude-opus-4-5","claude-opus-4-5-20251101","claude-haiku-4-5","claude-haiku-4-5-20251001","claude-code"]);function kot(e){if(Cot.has(e))return!0;const t=e.toLowerCase();return!!(t.includes("sonnet-4-5")||t.includes("opus-4-5")||t.includes("haiku-4-5"))}const RH={"gemini-3-pro-preview":"google","gemini-2.5-pro":"google","gemini-2.5-flash":"google","gemini-2.5-flash-lite":"google","gpt-4o":"openai","gpt-4o-mini":"openai","gpt-4-turbo":"openai","gpt-4":"openai","gpt-3.5-turbo":"openai",o1:"openai","o1-mini":"openai","o1-preview":"openai",o3:"openai","o3-mini":"openai","claude-3-5-sonnet":"anthropic","claude-3-5-sonnet-20241022":"anthropic","claude-4-sonnet":"anthropic","claude-4-sonnet-20250514":"anthropic","claude-sonnet-4-20250514":"anthropic","claude-3-opus":"anthropic","claude-3-opus-20240229":"anthropic","claude-3-sonnet-20240229":"anthropic","claude-3-haiku-20240307":"anthropic","claude-code":"claude-code","claude-sonnet-4-5":"claude-code","claude-sonnet-4-5-20250929":"claude-code","claude-opus-4-5":"claude-code","claude-opus-4-5-20251101":"claude-code","claude-haiku-4-5":"claude-code","claude-haiku-4-5-20251001":"claude-code",codex:"codex","codex-gpt-4o":"codex","codex-o1":"codex","codex-o1-pro":"codex","gpt-5.1-codex":"codex","gpt-5.1-codex-mini":"codex","gpt-5.1-nano":"codex","gpt-5-codex":"codex","gpt-5-codex-mini":"codex"};function Aot(e){if(RH[e])return RH[e];const t=e.toLowerCase();return t.startsWith("gemini-")?"google":t.startsWith("gpt-")||t.startsWith("o1")||t.startsWith("o3")?"openai":t.startsWith("claude-")?t.includes("sonnet-4-5")||t.includes("opus-4-5")||t.includes("haiku-4-5")?"claude-code":"anthropic":t.includes("codex")?"codex":null}function Not(e={}){const[t,n]=w.useState(!1),[r,s]=w.useState(!1),[o,i]=w.useState(null),[a,l]=w.useState(!1),c=w.useRef(null),u=w.useRef([]),f=w.useRef(e);w.useEffect(()=>{f.current=e},[e]),w.useEffect(()=>{var x;if(FA()){fetch(`${BA()}/api/ai/providers`).then(E=>E.json()).then(E=>{E.success&&(E.data,l(!0))}).catch(E=>{l(!0)});return}if((x=window.electronAPI)!=null&&x.aiSdk)return window.electronAPI.aiSdk.initialize().then(()=>{l(!0)}).catch(E=>{Yr.aiChat.error("Failed to initialize AI SDK:",E)}),()=>{var E,T,k;u.current.forEach(I=>I()),u.current=[],(k=(T=(E=window.electronAPI)==null?void 0:E.aiSdk)==null?void 0:T.removeAllListeners)==null||k.call(T)}},[]);const m=w.useCallback(x=>{const E={};for(const T of x)E[T.id]=T.apiKey;return E},[]),g=w.useCallback(async({modelId:x,messages:E,providers:T,system:k,tools:I,maxSteps:O=5,onChunk:M,onStepFinish:P,enableReasoning:j=!1,onReasoningChunk:V,mcpTools:U=[],projectFolder:z})=>{var G,X,J,ee,re,ie,Z,te,oe,Q,Te,ge,Ce;if(FA()){n(!0),s(!0),i(null);try{const fe=BA(),Fe=E.map(ot=>({role:ot.role,content:ot.content})),De={};for(const ot of T)De[ot.id]=ot.apiKey;const Re=await fetch(`${fe}/api/ai/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:Fe,modelId:x,system:k,providers:De})});if(!Re.ok){const ot=await Re.json().catch(()=>({}));throw new Error(ot.error||`HTTP ${Re.status}`)}const tt=(G=Re.body)==null?void 0:G.getReader();if(!tt)throw new Error("No response body");const de=new TextDecoder;let nt="";for(;;){const{done:ot,value:Ut}=await tt.read();if(ot)break;const Dt=de.decode(Ut,{stream:!0}).split(`
`);for(const en of Dt)if(en.startsWith("data: ")){const xt=en.slice(6);if(xt==="[DONE]")continue;try{const pe=JSON.parse(xt);if(pe.type==="text-delta"&&pe.text)nt+=pe.text,M==null||M(pe.text),(J=(X=f.current).onTextDelta)==null||J.call(X,pe.text);else if(pe.type==="error")throw new Error(pe.error)}catch{}}}return n(!1),s(!1),(re=(ee=f.current).onResponse)==null||re.call(ee,nt),(Z=(ie=f.current).onFinish)==null||Z.call(ie),{text:nt}}catch(fe){const Fe=fe instanceof Error?fe:new Error(String(fe));return i(Fe),n(!1),s(!1),(oe=(te=f.current).onError)==null||oe.call(te,Fe),{text:null}}}if(!((Q=window.electronAPI)!=null&&Q.aiSdk)){const fe=new Error("AI SDK not available - requires Electron environment");return i(fe),(ge=(Te=f.current).onError)==null||ge.call(Te,fe),{text:null}}const H=window.electronAPI.aiSdk;u.current.forEach(fe=>fe()),u.current=[],n(!0),s(!0),i(null);const F=crypto.randomUUID();if(c.current=F,kot(x)&&((Ce=window.electronAPI)!=null&&Ce.agentSdk)){const fe=window.electronAPI.agentSdk;return new Promise(Fe=>{let De="",Re="";const tt=[],de=[],nt=new Map,ot=fe.onTextChunk(Le=>{var Ve,_e,Y,L;Le.requestId===F&&(De+=Le.chunk,M==null||M(Le.chunk),(_e=(Ve=f.current).onTextDelta)==null||_e.call(Ve,Le.chunk),(L=(Y=f.current).onStreamEvent)==null||L.call(Y,{type:"text-delta",data:Le.chunk,timestamp:new Date}))}),Ut=fe.onThinkingStart(Le=>{Le.requestId===F&&Yr.aiChat.log(`[Agent SDK] Thinking started at index ${Le.index}`)}),Vt=fe.onThinkingChunk(Le=>{var Ve,_e,Y,L;Le.requestId===F&&(Re+=Le.chunk,V==null||V(Le.chunk),(_e=(Ve=f.current).onReasoningDelta)==null||_e.call(Ve,Le.chunk),(L=(Y=f.current).onStreamEvent)==null||L.call(Y,{type:"reasoning-delta",data:Le.chunk,timestamp:new Date}))}),Dt=fe.onToolStart(Le=>{Le.requestId===F&&(Yr.aiChat.log(`[Agent SDK] Tool started: ${Le.toolName} (${Le.toolCallId})`),nt.set(Le.toolCallId,{name:Le.toolName,partialJson:""}),P==null||P({text:De,toolCalls:[{type:"tool-call",toolCallId:Le.toolCallId,toolName:Le.toolName,args:{}}]}))}),en=fe.onToolInputDelta(Le=>{if(Le.requestId!==F)return;const Ve=nt.get(Le.toolCallId);Ve&&(Ve.partialJson+=Le.delta)}),xt=fe.onToolResult(Le=>{var we,ze,Be,ut,an,zt,dn,on;if(Le.requestId!==F)return;const Ve=nt.get(Le.toolCallId),_e=(Ve==null?void 0:Ve.name)||"unknown";let Y={};if(Ve!=null&&Ve.partialJson)try{Y=JSON.parse(Ve.partialJson)}catch{Y={raw:Ve.partialJson}}const L={type:"tool-call",toolCallId:Le.toolCallId,toolName:_e,args:Y};tt.push(L),(ze=(we=f.current).onToolCall)==null||ze.call(we,L),(ut=(Be=f.current).onStreamEvent)==null||ut.call(Be,{type:"tool-call",data:L,timestamp:new Date});let B;try{B=JSON.parse(Le.result)}catch{B=Le.result}const ce={type:"tool-result",toolCallId:Le.toolCallId,toolName:_e,result:Le.isError?{error:B}:B};de.push(ce),(zt=(an=f.current).onToolResult)==null||zt.call(an,ce),(on=(dn=f.current).onStreamEvent)==null||on.call(dn,{type:"tool-result",data:ce,timestamp:new Date}),nt.delete(Le.toolCallId),P==null||P({text:De,toolResults:[ce]})}),pe=fe.onBlockStop(Le=>{Le.requestId===F&&Yr.aiChat.log(`[Agent SDK] Block stopped at index ${Le.index}`)}),Ne=fe.onComplete(Le=>{var Ve,_e,Y,L,B,ce,we,ze;if(Le.requestId===F){if(ot(),Ut(),Vt(),Dt(),en(),xt(),pe(),Ne(),$e(),Je(),Le.thinking||Re){const Be=Le.thinking||Re;(_e=(Ve=f.current).onReasoningComplete)==null||_e.call(Ve,{type:"thinking",content:Be,timestamp:new Date})}(L=(Y=f.current).onResponse)==null||L.call(Y,Le.text||De),(ce=(B=f.current).onFinish)==null||ce.call(B),(ze=(we=f.current).onStreamEvent)==null||ze.call(we,{type:"finish",data:{finishReason:"stop"},timestamp:new Date}),s(!1),n(!1),c.current=null,Fe({text:Le.text||De,toolCalls:tt.length>0?tt:void 0,toolResults:de.length>0?de:void 0,reasoning:Le.thinking||Re||void 0})}}),$e=fe.onError(Le=>{var _e,Y;if(Le.requestId!==F)return;ot(),Ut(),Vt(),Dt(),en(),xt(),pe(),Ne(),$e(),Je();const Ve=new Error(Le.error);i(Ve),(Y=(_e=f.current).onError)==null||Y.call(_e,Ve),s(!1),n(!1),c.current=null,Fe({text:null})}),Je=fe.onInterrupted(Le=>{Le.requestId===F&&s(!1)});u.current=[ot,Ut,Vt,Dt,en,xt,pe,Ne,$e,Je],fe.stream({requestId:F,modelId:x,messages:E,system:k,maxThinkingTokens:j?16384:0,projectFolder:z,mcpTools:U}).catch(Le=>{var Ve,_e;i(Le),(_e=(Ve=f.current).onError)==null||_e.call(Ve,Le),s(!1),n(!1),Fe({text:null})})})}return new Promise(fe=>{let Fe="",De="";const Re=[],tt=[],de=H.onTextChunk(Dt=>{var en,xt,pe,Ne;Dt.requestId===F&&(Fe+=Dt.chunk,M==null||M(Dt.chunk),(xt=(en=f.current).onTextDelta)==null||xt.call(en,Dt.chunk),(Ne=(pe=f.current).onStreamEvent)==null||Ne.call(pe,{type:"text-delta",data:Dt.chunk,timestamp:new Date}))}),nt=H.onStepFinish(Dt=>{var pe,Ne;if(Dt.requestId!==F)return;const en=((pe=Dt.toolCalls)==null?void 0:pe.map($e=>({type:"tool-call",...$e})))||[],xt=((Ne=Dt.toolResults)==null?void 0:Ne.map($e=>({type:"tool-result",...$e})))||[];Re.push(...en),tt.push(...xt),en.forEach($e=>{var Je,Le;return(Le=(Je=f.current).onToolCall)==null?void 0:Le.call(Je,$e)}),xt.forEach($e=>{var Je,Le;return(Le=(Je=f.current).onToolResult)==null?void 0:Le.call(Je,$e)}),P==null||P({text:Dt.text,toolCalls:en.length>0?en:void 0,toolResults:xt.length>0?xt:void 0})}),ot=H.onComplete(Dt=>{var en,xt,pe,Ne,$e,Je,Le,Ve,_e,Y,L,B,ce,we;if(Dt.requestId===F){if(de(),nt(),ot(),Ut(),Dt.reasoning&&(De=Dt.reasoning,V==null||V(Dt.reasoning),(xt=(en=f.current).onReasoningDelta)==null||xt.call(en,Dt.reasoning),(Ne=(pe=f.current).onReasoningComplete)==null||Ne.call(pe,{type:"thinking",content:Dt.reasoning,timestamp:new Date})),Dt.toolCalls){for(const ze of Dt.toolCalls)if(!Re.find(Be=>Be.toolCallId===ze.toolCallId)){const Be={type:"tool-call",...ze};Re.push(Be),(Je=($e=f.current).onToolCall)==null||Je.call($e,Be)}}if(Dt.toolResults){for(const ze of Dt.toolResults)if(!tt.find(Be=>Be.toolCallId===ze.toolCallId)){const Be={type:"tool-result",...ze};tt.push(Be),(Ve=(Le=f.current).onToolResult)==null||Ve.call(Le,Be)}}(Y=(_e=f.current).onResponse)==null||Y.call(_e,Dt.text),(B=(L=f.current).onFinish)==null||B.call(L),(we=(ce=f.current).onStreamEvent)==null||we.call(ce,{type:"finish",data:{finishReason:Dt.finishReason},timestamp:new Date}),s(!1),n(!1),c.current=null,fe({text:Dt.text,toolCalls:Re.length>0?Re:void 0,toolResults:tt.length>0?tt:void 0,reasoning:De||void 0})}}),Ut=H.onError(Dt=>{var xt,pe;if(Dt.requestId!==F)return;de(),nt(),ot(),Ut();const en=new Error(Dt.error);i(en),(pe=(xt=f.current).onError)==null||pe.call(xt,en),s(!1),n(!1),c.current=null,fe({text:null})});u.current=[de,nt,ot,Ut];const Vt={};if(I)for(const[Dt,en]of Object.entries(I)){const xt=Tot(en.parameters);Vt[Dt]={description:en.description,parameters:xt},Yr.aiChat.log(`Tool ${Dt} params:`,JSON.stringify(xt))}H.stream({requestId:F,modelId:x,messages:E,providers:m(T),system:k,tools:Vt,maxSteps:O,enableReasoning:j,mcpTools:U,projectFolder:z}).catch(Dt=>{var en,xt;i(Dt),(xt=(en=f.current).onError)==null||xt.call(en,Dt),n(!1),fe({text:null})})})},[m]),y=w.useCallback(async({modelId:x,messages:E,providers:T,system:k,tools:I,maxSteps:O=5,mcpTools:M=[],projectFolder:P})=>{var V,U,z,H,F,G,X,J,ee,re,ie,Z,te,oe,Q,Te,ge,Ce,fe,Fe,De,Re;if(FA()){n(!0),i(null);try{const tt=BA(),de={};for(const Ut of T)de[Ut.id]=Ut.apiKey;const nt=await fetch(`${tt}/api/ai/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:E,modelId:x,system:k,providers:de})});if(!nt.ok){const Ut=await nt.json().catch(()=>({}));throw new Error(Ut.error||`HTTP ${nt.status}`)}const ot=await nt.json();if(n(!1),ot.success)return{text:ot.data.text};throw new Error(ot.error||"Unknown error")}catch(tt){const de=tt instanceof Error?tt:new Error(String(tt));return i(de),n(!1),(U=(V=f.current).onError)==null||U.call(V,de),{text:null}}}if(!((z=window.electronAPI)!=null&&z.aiSdk)){const tt=new Error("AI SDK not available - requires Electron environment");return i(tt),(F=(H=f.current).onError)==null||F.call(H,tt),{text:null}}const j=window.electronAPI.aiSdk;n(!0),i(null);try{const tt={};if(I)for(const[nt,ot]of Object.entries(I)){let Ut;if(ot.parameters&&typeof ot.parameters=="object"&&"_def"in ot.parameters)try{if("shape"in ot.parameters){const Vt=ot.parameters.shape,Dt={},en=[];for(const[xt,pe]of Object.entries(Vt)){const Ne=pe,$e=((G=Ne._def)==null?void 0:G.typeName)||"ZodString",Je={ZodString:"string",ZodNumber:"number",ZodBoolean:"boolean",ZodArray:"array",ZodObject:"object"};Dt[xt]={type:Je[$e]||"string",description:((X=Ne._def)==null?void 0:X.description)||Ne.description||""},(J=Ne.isOptional)!=null&&J.call(Ne)||en.push(xt)}Ut={type:"object",properties:Dt,required:en.length>0?en:void 0}}else Ut={type:"object",properties:{}}}catch{Ut={type:"object",properties:{}}}else ot.parameters&&typeof ot.parameters=="object"?Ut=ot.parameters:Ut={type:"object",properties:{}};tt[nt]={description:ot.description,parameters:Ut}}const de=await j.generate({modelId:x,messages:E,providers:m(T),system:k,tools:tt,maxSteps:O,mcpTools:M,projectFolder:P});if(!de.success){const nt=new Error(de.error||"Unknown error");return i(nt),(re=(ee=f.current).onError)==null||re.call(ee,nt),{text:null}}if(de.toolCalls)for(const nt of de.toolCalls){const ot={type:"tool-call",...nt};(Z=(ie=f.current).onToolCall)==null||Z.call(ie,ot)}if(de.toolResults)for(const nt of de.toolResults){const ot={type:"tool-result",...nt};(oe=(te=f.current).onToolResult)==null||oe.call(te,ot)}return(Te=(Q=f.current).onResponse)==null||Te.call(Q,de.text),(Ce=(ge=f.current).onFinish)==null||Ce.call(ge),{text:de.text,toolCalls:(fe=de.toolCalls)==null?void 0:fe.map(nt=>({type:"tool-call",...nt})),toolResults:(Fe=de.toolResults)==null?void 0:Fe.map(nt=>({type:"tool-result",...nt}))}}catch(tt){const de=tt instanceof Error?tt:new Error(String(tt));return i(de),(Re=(De=f.current).onError)==null||Re.call(De,de),{text:null}}finally{n(!1)}},[m]),v=w.useCallback(()=>{var x,E;u.current.forEach(T=>T()),u.current=[],c.current=null,s(!1),n(!1),(E=(x=f.current).onFinish)==null||E.call(x)},[]);return{stream:g,generate:y,cancel:v,isLoading:t,isGenerating:r,error:o,isInitialized:a}}function Iot(e){return e.map(t=>({role:t.role,content:t.content}))}function Rot(e){var t;return`You are a UI editor. Given an element and a request, output a JSON object with the changes.

Element:
- Tag: ${e.tagName}
- Classes: ${e.className||"none"}
- ID: ${e.id||"none"}
- Text: ${((t=e.text)==null?void 0:t.substring(0,100))||"none"}
- Styles: ${JSON.stringify(e.computedStyle||{}).substring(0,300)}

Output ONLY valid JSON:
{
  "cssChanges": { "property": "value" },
  "textChange": "new text if changing",
  "description": "Brief description"
}

Rules:
- "textChange" for text content changes
- "cssChanges" for style changes (use camelCase: backgroundColor, fontSize)
- Keep descriptions under 20 words`}function MH(e){return`You are a coding assistant with DIRECT file system access.

CRITICAL: USE TOOLS IMMEDIATELY - NEVER ASK THE USER TO:
- Provide file contents (use read_file)
- Run commands (use your tools)
- Share output (read it yourself)
- Paste anything (you have direct access)

Your tools:
- list_directory(path): List files in a directory
- read_file(path): Read file contents
- write_file(path, content): Write to file
- create_file(path, content): Create new file
- delete_file(path): Delete file
- semantic_search(query): AI-powered search - **USE THIS FOR ALL CODE SEARCHES**
- search_in_files(pattern, path): Grep (only for exact regex like "TODO:|FIXME:")
- find_files(pattern, path): Glob (only for filenames like "*.config.js")
- ask_clarifying_question(question, type, options?): Ask user for clarification with structured input

${e.projectPath?`Project: ${e.projectPath}`:""}

SEARCH STRATEGY - READ THIS CAREFULLY:
 ALWAYS use semantic_search as your FIRST choice for finding code:
  - "Quick start"  semantic_search("quick start onboarding")
  - "auth code"  semantic_search("authentication handler")
  - "API endpoint"  semantic_search("API endpoint definition")
  - "error handling"  semantic_search("error handling")

 ONLY use search_in_files for exact regex patterns:
  - Finding TODO comments  search_in_files("TODO:|FIXME:")
  - Finding specific syntax  search_in_files("import.*React")

FORMATTING: Use separate paragraphs for distinct thoughts. Add a blank line between paragraphs.

START WORKING IMMEDIATELY. Read files, make changes, execute.`}function OH(e){var n;const t=[];return t.push(`You are an AI assistant with DIRECT access to the user's development environment.

CRITICAL BEHAVIOR:
- NEVER ask the user to provide files, run commands, or share output
- NEVER say "could you share" or "please paste" - USE YOUR TOOLS
- When you need to see files: READ THEM with read_file or list_directory
- When you need to search code: ALWAYS use semantic_search FIRST
- BE PROACTIVE - just do the work, don't ask for permission

FORMATTING: Use separate paragraphs for distinct thoughts. Add a blank line between paragraphs for readability.

Your tools:
- list_directory(path): List files in a directory
- read_file(path): Read file contents
- write_file(path, content): Write to file
- semantic_search(query): **DEFAULT SEARCH TOOL** - Finds code by meaning, intent, and context
- search_in_files(pattern, path): Grep (only for exact regex like "TODO:|import.*")
- find_files(pattern, path): Glob (only for filenames like "*.test.ts")
- ask_clarifying_question(question, type, options?): Ask user for structured input when you need clarification

${e.projectPath?`Project: ${e.projectPath}`:""}
${e.mcpToolCount?`MCP tools available: ${e.mcpToolCount}`:""}

SEARCH STRATEGY:
 semantic_search is your PRIMARY search tool - use it for:
  - Finding features: "user authentication", "payment processing"
  - Finding patterns: "error handling", "validation logic"
  - Finding concepts: "state management", "API endpoints"
  - Finding ANYTHING: "Quick start", "navbar component", "config file"

 ONLY use search_in_files/find_files when semantic_search says "Index is empty" or for exact regex

CLARIFYING QUESTIONS:
Use ask_clarifying_question when you need user input BEFORE taking action:
- Ambiguous requests: "Which authentication method: OAuth, JWT, or session-based?"
- Multiple options: "Should I use React Query or SWR for data fetching?"
- Confirmation: "This will delete 15 files. Proceed?"
- Preferences: "What styling approach: Tailwind, CSS modules, or styled-components?"

Types:
- single-select: User picks ONE option (radio buttons)
- multi-select: User picks MULTIPLE options (checkboxes)
- text: Free text input for open-ended questions
- confirm: Simple yes/no confirmation`),e.selectedElement&&t.push(`
Selected Element:
- ${e.selectedElement.tagName}${e.selectedElement.id?"#"+e.selectedElement.id:""}
- Classes: ${e.selectedElement.className||"none"}
- Text: ${((n=e.selectedElement.text)==null?void 0:n.substring(0,50))||"none"}`),t.join(`
`)}function Mot(e){return`You are a voice assistant for development. Keep responses SHORT (1-2 sentences).

${e.projectPath?`Working in: ${e.projectPath}`:""}

Respond conversationally. For actions, confirm briefly then execute.
Don't read code aloud - summarize what you found.`}function Oot(e,t){switch(e){case"dom_edit":return t.selectedElement?Rot(t.selectedElement):MH(t);case"file_ops":return MH(t);case"chat":return OH(t);case"voice":return Mot(t);default:return OH(t)}}function Dot(e,t){return(e==="ui_modify"||e==="ui_build")&&t?"dom_edit":["code_edit","code_create","code_delete","file_operation","code_refactor","test","document","deploy","configure"].includes(e)?"file_ops":"chat"}function Pot(){const e=w.useMemo(()=>{var n;return typeof window<"u"&&!!((n=window.electronAPI)!=null&&n.isElectron)},[]),t=w.useMemo(()=>!e||!window.electronAPI?null:window.electronAPI,[e]);return{isElectron:e,api:t,git:(t==null?void 0:t.git)??null,files:(t==null?void 0:t.files)??null,aiSdk:(t==null?void 0:t.aiSdk)??null,oauth:(t==null?void 0:t.oauth)??null,codex:(t==null?void 0:t.codex)??null,claudeCode:(t==null?void 0:t.claudeCode)??null,mcp:(t==null?void 0:t.mcp)??null,voice:(t==null?void 0:t.voice)??null,tabdata:(t==null?void 0:t.tabdata)??null,lsp:(t==null?void 0:t.lsp)??null,dialog:(t==null?void 0:t.dialog)??null}}function ai(){var n;const e=typeof window<"u"&&!!((n=window.electronAPI)!=null&&n.isElectron),t=e?window.electronAPI:null;return{isElectron:e,api:t,git:(t==null?void 0:t.git)??null,files:(t==null?void 0:t.files)??null,aiSdk:(t==null?void 0:t.aiSdk)??null,oauth:(t==null?void 0:t.oauth)??null,codex:(t==null?void 0:t.codex)??null,claudeCode:(t==null?void 0:t.claudeCode)??null,mcp:(t==null?void 0:t.mcp)??null,voice:(t==null?void 0:t.voice)??null,tabdata:(t==null?void 0:t.tabdata)??null,lsp:(t==null?void 0:t.lsp)??null,dialog:(t==null?void 0:t.dialog)??null}}const Lot=[{type:"code_edit",patterns:[/(?:edit|change|modify|update|fix)\s+(?:the\s+)?(?:code|function|method|class|component)/i,/(?:make|set)\s+(?:it|this|the)\s+/i,/(?:replace|swap)\s+/i],keywords:["edit","change","modify","update","fix","replace","swap","alter"]},{type:"code_create",patterns:[/(?:create|add|new|generate|make)\s+(?:a\s+)?(?:new\s+)?(?:file|function|method|class|component)/i,/(?:write|implement)\s+(?:a\s+)?/i],keywords:["create","add","new","generate","write","implement"]},{type:"code_delete",patterns:[/(?:delete|remove|drop)\s+(?:the\s+)?(?:file|function|method|class|component)/i],keywords:["delete","remove","drop"]},{type:"code_explain",patterns:[/(?:explain|what\s+does|how\s+does|describe)\s+(?:this|the)/i,/(?:what\s+is|what's)\s+(?:this|the)/i],keywords:["explain","describe","what does","how does","what is"]},{type:"code_refactor",patterns:[/(?:refactor|clean\s+up|improve|optimize)/i,/(?:make\s+(?:it|this)\s+)?(?:better|cleaner|faster|more\s+efficient)/i],keywords:["refactor","clean up","improve","optimize","better","cleaner"]},{type:"file_operation",patterns:[/(?:list|show|find|what)\s+(?:files|folders|directories)/i,/(?:rename|move|copy)\s+(?:the\s+)?(?:file|folder)/i,/(?:what(?:'s| is)?\s+in)\s+(?:the\s+)?(?:folder|directory|\.)/i,/(?:ls|dir)\b/i,/(?:read|open|view|cat)\s+(?:the\s+)?(?:file|content)/i,/(?:write|save|create|edit|modify|update|change)\s+(?:the\s+)?(?:file|code)/i,/(?:delete|remove)\s+(?:the\s+)?(?:file|folder)/i,/(?:show|what's|whats|what is)\s+(?:in\s+)?(?:the\s+)?(?:project|folder|directory|codebase|repo)/i],keywords:["list files","show files","rename","move file","copy file","what files","whats in","folder contents","directory","ls","read file","write file","create file","edit file","save file","delete file","project files","codebase","show me"]},{type:"ui_inspect",patterns:[/(?:what\s+is|describe|analyze)\s+(?:this\s+)?(?:element|button|component)/i,/(?:look\s+at|check)\s+(?:this|the)/i],keywords:["inspect","analyze element","what is this element"]},{type:"ui_modify",patterns:[/(?:change|modify|update)\s+(?:this\s+)?(?:element|button|style|color|text|font|background)?/i,/(?:make\s+(?:it|this|that)\s*)/i,/(?:set|change)\s+(?:the\s+)?(?:color|background|font|size|width|height|padding|margin)?/i,/(?:add|remove)\s+(?:a\s+)?(?:border|shadow|padding|margin)/i,/\b(?:red|blue|green|black|white|bigger|smaller|larger|bold|italic)\b/i,/^["'][^"']+["']$/i,/(?:change|set|update)\s+(?:it\s+)?to\s+/i,/(?:text|label|title|content)\s*(?:to|:|\=)\s*/i,/(?:remove|delete|hide)\s+(?:this|that|it|the\s+element)/i,/(?:use|replace\s+with|change\s+to|swap\s+with)\s+(?:this\s+)?(?:image|photo|picture|attached)/i,/(?:replace|change|update|swap)\s+(?:this\s+)?(?:image|photo|picture|img)/i,/(?:set|use)\s+(?:the\s+)?attached\s+(?:image|photo|picture|file)?/i],keywords:["change","make it","make this","set","red","blue","green","black","white","bigger","smaller","larger","bold","italic","background","color","font","size","padding","margin","border","style","update","modify","change to","set to","remove this","delete this","hide this","remove","delete","hide","use this image","replace image","change image","swap image","use attached","replace with attached"]},{type:"debug",patterns:[/(?:debug|fix|solve)\s+(?:this|the)\s+(?:issue|bug|error|problem)/i,/(?:why\s+is|what's\s+causing)\s+/i],keywords:["debug","fix bug","solve error","why is","not working"]},{type:"question",patterns:[/^(?:how|what|why|when|where|can|could|should|would|is|are|do|does)/i,/\?$/],keywords:["how","what","why","question"]},{type:"ui_build",patterns:[/(?:build|create|make)\s+(?:a\s+)?(?:new\s+)?(?:page|screen|view|layout|form|modal|dialog|menu|nav|sidebar|header|footer|component|widget)/i,/(?:add|implement)\s+(?:a\s+)?(?:new\s+)?(?:feature|section|area)/i],keywords:["build","create page","new page","new screen","add section","new component","create form","add modal"]},{type:"research",patterns:[/(?:research|investigate|look\s+into|find\s+out|explore|discover)/i,/(?:what\s+are\s+the\s+best|best\s+practices|how\s+do\s+others|industry\s+standard)/i,/(?:search\s+for|look\s+up|google|find\s+examples)/i],keywords:["research","investigate","explore","best practices","find out","look into","examples of"]},{type:"analyze",patterns:[/(?:analyze|analysis|audit|assess|evaluate|examine|study)/i,/(?:what's\s+wrong|find\s+issues|identify\s+problems|check\s+for)/i],keywords:["analyze","analysis","audit","assess","evaluate","examine","study","find issues"]},{type:"compare",patterns:[/(?:compare|versus|vs\.?|which\s+is\s+better|pros\s+and\s+cons|trade-?offs)/i,/(?:difference\s+between|similarities|options)/i],keywords:["compare","versus","vs","better","pros cons","trade-offs","difference between","options"]},{type:"plan",patterns:[/(?:plan|design|architect|outline|strategy|roadmap|approach)/i,/(?:how\s+should\s+we|what's\s+the\s+best\s+way\s+to|steps\s+to)/i],keywords:["plan","design","architect","outline","strategy","roadmap","approach","steps"]},{type:"document",patterns:[/(?:document|write\s+docs|readme|jsdoc|comment|annotate)/i,/(?:add\s+documentation|explain\s+in\s+code|write\s+comments)/i],keywords:["document","documentation","readme","jsdoc","comments","annotate"]},{type:"test",patterns:[/(?:test|write\s+tests|unit\s+test|integration\s+test|e2e|spec)/i,/(?:verify|validate|check\s+if\s+works|make\s+sure)/i],keywords:["test","tests","unit test","integration test","e2e","spec","verify","validate"]},{type:"review",patterns:[/(?:review|code\s+review|security\s+review|check\s+code|audit\s+code)/i,/(?:is\s+this\s+code\s+(?:good|safe|secure)|any\s+issues|improvements)/i],keywords:["review","code review","security review","audit","check code","improvements"]},{type:"deploy",patterns:[/(?:deploy|publish|release|ship|push\s+to\s+prod|go\s+live)/i,/(?:build\s+for\s+production|production\s+build|package)/i],keywords:["deploy","publish","release","ship","production","go live"]},{type:"configure",patterns:[/(?:configure|config|setup|set\s+up|settings|environment|env)/i,/(?:install|add\s+package|npm\s+install|add\s+dependency)/i],keywords:["configure","config","setup","settings","environment","env","install","package"]},{type:"chat",patterns:[/^(?:hi|hello|hey|thanks|thank\s+you|ok|okay|sure|cool|nice|great)\s*[!.]?$/i],keywords:["hi","hello","hey","thanks","ok"]}];function $ot(e,t){const n=e.toLowerCase(),r={},s=[];for(const u of Lot){let f=0,m=0,g=0,y=0;for(const v of u.patterns)v.test(e)&&(m+=3);f+=m;for(const v of u.keywords)n.includes(v.toLowerCase())&&(g+=1);f+=g,t.selectedElement&&(u.type==="ui_inspect"||u.type==="ui_modify"||u.type==="ui_build")&&(y+=2),t.selectedFiles.length>0&&u.type.startsWith("code_")&&(y+=1),t.selectedLogs.length>0&&u.type==="debug"&&(y+=2),f+=y,r[u.type]={pattern:m,keyword:g,context:y,total:f},f>0&&s.push({type:u.type,score:f})}s.sort((u,f)=>f.score-u.score);const o=s[0]||{type:"unknown",score:0},i=Math.max(o.score*.5,2),a=s.slice(1).filter(u=>u.score>=i).slice(0,2).map(u=>u.type);console.log("[Intent] Classification for:",e.substring(0,50)),console.log("[Intent] Top scores:",s.slice(0,5)),console.log("[Intent] Primary:",o.type,"| Secondary:",a);const l=[];t.selectedFiles.length>0&&l.push(...t.selectedFiles.map(u=>u.path)),t.selectedElement&&l.push(`element:${t.selectedElement.tagName}${t.selectedElement.id?"#"+t.selectedElement.id:""}`);const c={code_edit:"edit",code_create:"create",code_delete:"delete",code_explain:"explain",code_refactor:"refactor",file_operation:"file_op",ui_inspect:"inspect",ui_modify:"modify",ui_build:"build",research:"research",analyze:"analyze",compare:"compare",plan:"plan",document:"document",test:"test",debug:"debug",review:"review",deploy:"deploy",configure:"configure",question:"answer",chat:"chat",unknown:"process"};return{type:o.type,secondaryTypes:a,confidence:Math.min(o.score/10,1),targets:l,action:c[o.type]||"process",description:`${c[o.type]||"process"} ${l.join(", ")||"context"}`}}function Fot(e,t,n){var s;const r=[];if(r.push(`You are a coding assistant running in Electron with DIRECT ACCESS to the local file system.

CRITICAL EXECUTION RULES:
1. You have DIRECT file system access. USE IT.
2. When asked to CREATE a file - CREATE IT IMMEDIATELY. Don't read first.
3. When asked to EDIT a file - READ IT ONCE, then WRITE the changes.
4. If a read fails (file not found) and you're creating - JUST CREATE THE FILE.
5. NEVER get stuck in a read loop. If you've tried reading and it failed, MOVE ON.
6. NEVER ask the user to do anything - YOU have the tools, USE THEM.
7. EXECUTE tools directly. Don't explain or ask permission.

ACTION-FIRST BEHAVIOR:
- CREATE tasks: Use write_file or create_file IMMEDIATELY with the content
- EDIT tasks: Read file ONCE, then write_file with changes
- If read fails with "not found" and you're creating: That's EXPECTED - just create it
- If you've read 2+ files without making progress: STOP READING and TAKE ACTION

ANTI-LOOP RULES:
- Do NOT call list_directory more than once per request
- Do NOT call read_file on the same path twice
- Do NOT search for files you should be creating
- If tools return errors, ADAPT - don't retry the same thing

Your tools:

WRITING (use these for CREATE/EDIT):
- write_file: Creates or overwrites file - USE THIS FIRST for create/edit tasks
- create_file: Creates new file (fails if exists)
- delete_file: Deletes file
- rename_file: Renames/moves file
- create_directory: Creates folder

READING (use sparingly):
- read_file: Read file content
- list_directory: List directory contents
- get_file_tree: Get project structure
- read_multiple_files: Read several files at once

SEARCH - CRITICAL INSTRUCTIONS:
- semantic_search: **YOUR PRIMARY SEARCH TOOL** - Finds code by meaning and context
   USE FOR: "Quick start", "auth code", "error handling", "API endpoint", ANY code search
   This understands INTENT, not just keywords
- search_in_files: Grep (ONLY for exact regex patterns like "TODO:|FIXME:")
- find_files: Glob (ONLY for filenames like "*.test.ts")

 IMPORTANT: ALWAYS use semantic_search for finding code. It's faster and smarter than grep.
Only fall back to search_in_files if semantic_search returns "Index is empty".

Current intent: ${t.type} (${t.description})
Confidence: ${Math.round(t.confidence*100)}%`),e.projectPath&&r.push(`
## Project Context
Project root: ${e.projectPath}

IMPORTANT: This is where the source files live. When the user asks about the page or wants changes:
1. Use Glob to find relevant source files (e.g., *.tsx, *.jsx, *.html)
2. Use Read to examine the full file before making changes
3. Common patterns: src/, components/, pages/, app/`),e.selectedElement&&(r.push(`
## Selected UI Element (FOCUS AREA - but read the FULL file for context)
Tag: ${e.selectedElement.tagName}
${e.selectedElement.id?`ID: ${e.selectedElement.id}`:""}
${e.selectedElement.className?`Classes: ${e.selectedElement.className}`:""}
${e.selectedElement.text?`Text: ${e.selectedElement.text.substring(0,100)}`:""}
${e.selectedElement.xpath?`XPath: ${e.selectedElement.xpath}`:""}
${(s=e.selectedElement.sourceLocation)!=null&&s.summary?`Source: ${e.selectedElement.sourceLocation.summary}`:""}

 CRITICAL FOR UI EDITS:
1. This HTML snippet is just the SELECTED element - the user wants to focus on this area
2. You MUST read the ENTIRE source file to understand the full context before editing
3. The element exists within a larger component/page - understand that structure first
4. Don't assume what's around it - READ THE FILE to see the full picture`),e.selectedElement.outerHTML&&r.push(`
HTML Snippet (selected element only):
\`\`\`html
${e.selectedElement.outerHTML.substring(0,500)}
\`\`\``)),e.selectedFiles.length>0){r.push(`
## Selected Files`);for(const o of e.selectedFiles)if(r.push(`
### ${o.path}
\`\`\`
${o.content.substring(0,2e3)}${o.content.length>2e3?`
... (truncated)`:""}
\`\`\``),o.diagnostics&&o.diagnostics.length>0){const i=o.diagnostics.filter(c=>c.severity==="error"),a=o.diagnostics.filter(c=>c.severity==="warning"),l=o.diagnostics.filter(c=>c.severity==="info"||c.severity==="hint");if(r.push(`
**Diagnostics:**`),i.length>0){r.push(`
 **Errors (${i.length}):**`);for(const c of i.slice(0,10))r.push(`- Line ${c.line}:${c.character}: ${c.message}${c.source?` [${c.source}]`:""}`);i.length>10&&r.push(`  ... and ${i.length-10} more errors`)}if(a.length>0){r.push(`
 **Warnings (${a.length}):**`);for(const c of a.slice(0,5))r.push(`- Line ${c.line}:${c.character}: ${c.message}${c.source?` [${c.source}]`:""}`);a.length>5&&r.push(`  ... and ${a.length-5} more warnings`)}if(l.length>0&&i.length===0&&a.length===0){r.push(`
 **Hints (${l.length}):**`);for(const c of l.slice(0,3))r.push(`- Line ${c.line}:${c.character}: ${c.message}`)}}}if(e.selectedLogs.length>0){r.push(`
## Console Logs`);for(const o of e.selectedLogs.slice(-10))r.push(`[${o.type}] ${o.message}`)}switch(t.type){case"code_create":r.push(`
## CREATE INSTRUCTIONS - DO THIS NOW:
1. Call write_file with the FULL content immediately
2. Do NOT read files first - you're CREATING, not editing
3. Do NOT search for where to put the file - the user told you
4. If you need to see project structure, ONE list_directory call max
5. WRITE THE FILE. That is your primary task.`);break;case"code_edit":case"code_refactor":r.push(`
## EDIT INSTRUCTIONS:
1. Read the target file ONCE with read_file
2. Make your changes and call write_file with the new content
3. Do NOT read other files unless absolutely necessary
4. If read_file returns "not found" error, use write_file to create it`);break;case"code_explain":case"question":r.push(`
## EXPLAIN INSTRUCTIONS:
Read the relevant files and provide clear explanations.
Reference specific line numbers when discussing code.`);break;case"ui_inspect":case"ui_modify":r.push(`
## UI INSTRUCTIONS:
1. The element info is above - USE IT
2. If modifying, call write_file to update the source
3. Do NOT over-analyze - make the change`);break;case"debug":r.push(`
## DEBUG INSTRUCTIONS:
1. Read the error info provided
2. Call read_file on the suspected file
3. Call write_file with the fix
4. Do NOT endlessly search - make your best fix attempt`);break}if(n&&n.length>0){const o=n.reduce((i,a)=>(i[a.serverId]||(i[a.serverId]=[]),i[a.serverId].push(a),i),{});r.push(`
## MCP Tools (External Capabilities)
You have access to additional tools from connected MCP (Model Context Protocol) servers.
These extend your capabilities beyond local file operations.

To call an MCP tool, use the format: mcp_<serverId>_<toolName>`);for(const[i,a]of Object.entries(o)){r.push(`
### Server: ${i}`);for(const l of a){const c=l.inputSchema.properties?Object.keys(l.inputSchema.properties).join(", "):"none";r.push(`- **mcp_${i}_${l.name}**: ${l.description||"No description"} (params: ${c})`)}}}return r.join(`
`)}function Bot(e={}){const{onFileModified:t,onAskClarifyingQuestion:n}=e;return{read_file:{description:"Read the contents of a file",parameters:oi({path:rs().describe("Absolute path to the file").optional(),filePath:rs().describe("Legacy alias for path").optional()}),execute:async r=>{var c;const{path:s,filePath:o}=r,i=s??o;if(!i)return{error:'read_file requires a "path" argument'};const{api:a}=ai();if(!((c=a==null?void 0:a.files)!=null&&c.readFile))return{error:"File operations not available (not in Electron)"};const l=await a.files.readFile(i);return l.success?{content:l.data,path:i}:{error:l.error}}},write_file:{description:"Write content to a file (creates or overwrites)",parameters:oi({path:rs().describe("Absolute path to the file"),content:rs().describe("Content to write")}),execute:async r=>{var c,u;const{path:s,content:o}=r,{api:i}=ai();if(!((c=i==null?void 0:i.files)!=null&&c.writeFile))return{error:"File operations not available (not in Electron)"};let a;if((u=i==null?void 0:i.files)!=null&&u.readFile){const f=await i.files.readFile(s);f.success&&(a=f.data)}const l=await i.files.writeFile(s,o);return l.success?(t==null||t({type:"write",path:s,originalContent:a,newContent:o}),{success:!0,path:s,bytesWritten:o.length}):{error:l.error}}},create_file:{description:"Create a new file (fails if file exists)",parameters:oi({path:rs().describe("Absolute path for the new file"),content:rs().optional().describe("Initial content")}),execute:async r=>{var l;const{path:s,content:o}=r,{api:i}=ai();if(!((l=i==null?void 0:i.files)!=null&&l.createFile))return{error:"File operations not available (not in Electron)"};const a=await i.files.createFile(s,o||"");return a.success?(t==null||t({type:"create",path:s,newContent:o||""}),{success:!0,path:s}):{error:a.error}}},delete_file:{description:"Delete a file",parameters:oi({path:rs().describe("Absolute path to the file to delete")}),execute:async r=>{var l,c;const{path:s}=r,{api:o}=ai();if(!((l=o==null?void 0:o.files)!=null&&l.deleteFile))return{error:"File operations not available (not in Electron)"};let i;if((c=o==null?void 0:o.files)!=null&&c.readFile){const u=await o.files.readFile(s);u.success&&(i=u.data)}const a=await o.files.deleteFile(s);return a.success?(t==null||t({type:"delete",path:s,originalContent:i}),{success:!0,path:s}):{error:a.error}}},rename_file:{description:"Rename or move a file",parameters:oi({oldPath:rs().describe("Current path"),newPath:rs().describe("New path")}),execute:async r=>{var l;const{oldPath:s,newPath:o}=r,{api:i}=ai();if(!((l=i==null?void 0:i.files)!=null&&l.renameFile))return{error:"File operations not available (not in Electron)"};const a=await i.files.renameFile(s,o);return a.success?{success:!0,oldPath:s,newPath:o}:{error:a.error}}},list_directory:{description:"List files and folders in a directory",parameters:oi({path:rs().optional().describe("Directory path (defaults to project root)")}),execute:async r=>{var a;const{path:s}=r,{api:o}=ai();if(!((a=o==null?void 0:o.files)!=null&&a.listDirectory))return{error:"File operations not available (not in Electron)"};const i=await o.files.listDirectory(s);return i.success?{entries:i.data,path:s||"project root"}:{error:i.error}}},create_directory:{description:"Create a new directory",parameters:oi({path:rs().describe("Path for the new directory")}),execute:async r=>{var a;const{path:s}=r,{api:o}=ai();if(!((a=o==null?void 0:o.files)!=null&&a.createDirectory))return{error:"File operations not available (not in Electron)"};const i=await o.files.createDirectory(s);return i.success?{success:!0,path:s}:{error:i.error}}},file_exists:{description:"Check if a file or directory exists",parameters:oi({path:rs().describe("Path to check")}),execute:async r=>{var a;const{path:s}=r,{api:o}=ai();return(a=o==null?void 0:o.files)!=null&&a.exists?{exists:(await o.files.exists(s)).exists,path:s}:{error:"File operations not available (not in Electron)"}}},file_stat:{description:"Get file/directory information (size, modified time, etc)",parameters:oi({path:rs().describe("Path to check")}),execute:async r=>{var a;const{path:s}=r,{api:o}=ai();if(!((a=o==null?void 0:o.files)!=null&&a.stat))return{error:"File operations not available (not in Electron)"};const i=await o.files.stat(s);return i.success?{...i.data,path:s}:{error:i.error}}},git_status:{description:"Get current git status (modified files, etc)",parameters:oi({includeUntracked:_2().optional().describe("Include untracked files (default: true)")}),execute:async()=>{var o;const{api:r}=ai();if(!((o=r==null?void 0:r.git)!=null&&o.getStatus))return{error:"Git operations not available (not in Electron)"};const s=await r.git.getStatus();return s.success?s.data:{error:s.error}}},git_commit:{description:"Commit staged changes with a message",parameters:oi({message:rs().describe("Commit message")}),execute:async r=>{var a;const{message:s}=r,{api:o}=ai();if(!((a=o==null?void 0:o.git)!=null&&a.commit))return{error:"Git operations not available (not in Electron)"};const i=await o.git.commit(s);return i.success?{success:!0,message:s}:{error:i.error}}},search_in_files:{description:"Search for text pattern in files (like grep). Returns matching lines with file paths and line numbers.",parameters:oi({pattern:rs().describe("Text or regex pattern to search"),directory:rs().optional().describe("Directory to search in (defaults to project root)"),filePattern:rs().optional().describe('File pattern filter (e.g., "*.ts", "*.tsx,*.js")'),caseSensitive:_2().optional().describe("Case sensitive search (default: false)"),maxResults:E2().optional().describe("Maximum results to return (default: 100)")}),execute:async r=>{var f;const{pattern:s,directory:o,filePattern:i,caseSensitive:a,maxResults:l}=r,{api:c}=ai();if(!((f=c==null?void 0:c.files)!=null&&f.searchInFiles))return{error:"Search not available (not in Electron)"};const u=await c.files.searchInFiles(s,o,{filePattern:i,caseSensitive:a,maxResults:l});return u.success?{matches:u.data,count:u.data.length}:{error:u.error}}},semantic_search:{description:"PRIMARY SEARCH TOOL: Search codebase by meaning, intent, and context using AI. Finds code even when exact keywords don't match. Use this for ALL code searches: features, concepts, components, functions, patterns, documentation - everything. 3-10x faster than grep and finds more relevant results. Only falls back to grep if index is empty.",parameters:oi({query:rs().describe('Natural language description of what to find (e.g., "authentication handler", "error handling for API calls")'),limit:E2().optional().describe("Maximum results to return (default: 10)"),threshold:E2().optional().describe("Minimum similarity score 0-1 (default: 0.3)")}),execute:async r=>{var l,c;const{query:s,limit:o,threshold:i}=r,{api:a}=ai();if((l=a==null?void 0:a.mgrep)!=null&&l.search){const u=await a.mgrep.search(s,{limit:o,threshold:i});if(u.success&&u.results)return{matches:u.results.map(f=>{var m,g,y,v;return{file:f.filePath,content:f.content,score:f.score,startLine:(m=f.metadata)==null?void 0:m.startLine,endLine:(g=f.metadata)==null?void 0:g.endLine,language:(y=f.metadata)==null?void 0:y.language,functionName:(v=f.metadata)==null?void 0:v.functionName}}),count:u.results.length,semantic:!0};console.log("[semantic_search] mgrep failed, falling back to grep:",u.error)}if((c=a==null?void 0:a.files)!=null&&c.searchInFiles){const u=await a.files.searchInFiles(s,void 0,{maxResults:o||10});return u.success?{matches:u.data,count:u.data.length,semantic:!1,warning:" Fell back to keyword search (slower, less accurate). Code Index not initialized - go to Settings  Code Index to enable AI-powered semantic search for better results."}:{error:u.error}}return{error:"Search not available. Enable Code Index in Settings for semantic search."}}},find_files:{description:'Find files matching a glob pattern (e.g., "**/*.ts", "src/**/*.tsx")',parameters:oi({pattern:rs().describe("Glob pattern (supports *, **, ?)"),directory:rs().optional().describe("Directory to search in")}),execute:async r=>{var l;const{pattern:s,directory:o}=r,{api:i}=ai();if(!((l=i==null?void 0:i.files)!=null&&l.glob))return{error:"Glob not available (not in Electron)"};const a=await i.files.glob(s,o);return a.success?{files:a.data,count:a.data.length}:{error:a.error}}},copy_file:{description:"Copy a file to a new location",parameters:oi({sourcePath:rs().describe("Source file path"),destPath:rs().describe("Destination file path")}),execute:async r=>{var l;const{sourcePath:s,destPath:o}=r,{api:i}=ai();if(!((l=i==null?void 0:i.files)!=null&&l.copyFile))return{error:"Copy not available (not in Electron)"};const a=await i.files.copyFile(s,o);return a.success?{success:!0,sourcePath:s,destPath:o}:{error:a.error}}},read_multiple_files:{description:"Read multiple files at once - more efficient than calling read_file multiple times",parameters:oi({paths:f6(rs()).describe("Array of file paths to read")}),execute:async r=>{var a;const{paths:s}=r,{api:o}=ai();if(!((a=o==null?void 0:o.files)!=null&&a.readMultiple))return{error:"Read multiple not available (not in Electron)"};const i=await o.files.readMultiple(s);return i.success?{files:i.data}:{error:i.error}}},get_file_tree:{description:"Get a recursive file tree of a directory - useful for understanding project structure",parameters:oi({directory:rs().optional().describe("Directory path (defaults to project root)"),maxDepth:E2().optional().describe("Maximum depth to traverse (default: 5)"),includeHidden:_2().optional().describe("Include hidden files (default: false)")}),execute:async r=>{var c;const{directory:s,maxDepth:o,includeHidden:i}=r,{api:a}=ai();if(!((c=a==null?void 0:a.files)!=null&&c.getTree))return{error:"Get tree not available (not in Electron)"};const l=await a.files.getTree(s,{maxDepth:o,includeHidden:i});return l.success?{tree:l.data}:{error:l.error}}},ask_clarifying_question:{description:"Ask the user a clarifying question to better understand their needs. Use this when you need more information before proceeding. Supports single-select, multi-select, text input, or simple confirmation.",parameters:oi({question:rs().describe("The question to ask the user"),type:h6(["single-select","multi-select","text","confirm"]).describe("Type of input: single-select (one choice), multi-select (multiple choices), text (free text), confirm (yes/no)"),options:f6(oi({id:rs().describe("Unique ID for this option"),label:rs().describe("Display text for the option"),description:rs().optional().describe("Additional context for this option")})).optional().describe("Options for single-select or multi-select types"),placeholder:rs().optional().describe("Placeholder text for text input type"),required:_2().optional().describe("Whether the user must answer (default: false)")}),execute:async r=>{const{question:s,type:o,options:i,placeholder:a,required:l}=r;if(!n)return{error:"Clarifying questions not available in this context"};if((o==="single-select"||o==="multi-select")&&(!i||i.length===0))return{error:"Options are required for single-select and multi-select question types"};const c={id:`q_${Date.now()}`,question:s,type:o,options:i,placeholder:a,required:l};try{const u=await n(c);return{success:!0,question:s,response:u,type:o}}catch(u){return{error:`Failed to get user response: ${u}`}}}}}}function zot(e={}){const{mcpTools:t=[],callMCPTool:n,onFileModified:r,onAskClarifyingQuestion:s}=e,[o,i]=w.useState({context:{selectedElement:null,selectedFiles:[],selectedLogs:[],projectPath:null,recentMessages:[]},lastIntent:null,isProcessing:!1}),a=w.useMemo(()=>Bot({onFileModified:r,onAskClarifyingQuestion:s}),[r,s]),l=w.useMemo(()=>a,[a,t,n]),c=w.useCallback(m=>{i(g=>({...g,context:{...g.context,...m}}))},[]),u=w.useCallback((m,g)=>{const y=$ot(m,o.context);i(E=>({...E,lastIntent:y}));const v=(g==null?void 0:g.forceMode)??Dot(y.type,!!o.context.selectedElement);let x;return v==="dom_edit"?x=Oot("dom_edit",{selectedElement:o.context.selectedElement,projectPath:o.context.projectPath}):x=Fot(o.context,y,t.length>0?t:void 0),{intent:y,systemPrompt:x,tools:l,promptMode:v}},[o.context,t,l]),f=w.useCallback(m=>{i(g=>({...g,isProcessing:m}))},[]);return{context:o.context,lastIntent:o.lastIntent,isProcessing:o.isProcessing,updateContext:c,processMessage:u,setProcessing:f,tools:l}}const jot=({data:e,onSubmit:t,onSkip:n,isDarkMode:r=!0})=>{const[s,o]=w.useState(new Set),[i,a]=w.useState(""),[l,c]=w.useState(!1),u=y=>{if(e.type==="single-select")o(new Set([y]));else{const v=new Set(s);v.has(y)?v.delete(y):v.add(y),o(v)}},f=()=>{if(c(!0),e.type==="text")t(e.id,i);else if(e.type==="confirm")t(e.id,"confirmed");else{const y=Array.from(s);t(e.id,e.type==="single-select"?y[0]:y)}},m=()=>{n&&n(e.id)},g=()=>e.type==="text"?!e.required||i.trim().length>0:e.type==="confirm"?!0:!e.required||s.size>0;return h.jsxs("div",{className:`rounded-xl p-4 my-3 border transition-all duration-200 ${r?"bg-amber-900/20 border-amber-700/50":"bg-amber-50 border-amber-200"}`,children:[h.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${r?"bg-amber-800/50":"bg-amber-100"}`,children:h.jsx(gN,{size:18,className:r?"text-amber-400":"text-amber-600"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:`text-sm font-medium ${r?"text-amber-200":"text-amber-900"}`,children:e.question}),e.type==="multi-select"&&h.jsx("p",{className:`text-xs mt-1 ${r?"text-amber-400/70":"text-amber-700/70"}`,children:"Select all that apply"})]})]}),(e.type==="single-select"||e.type==="multi-select")&&e.options&&h.jsx("div",{className:"space-y-2 mb-4",children:e.options.map(y=>h.jsxs("button",{onClick:()=>u(y.id),disabled:l,className:`w-full text-left px-3 py-2.5 rounded-lg text-sm transition-all duration-200 flex items-center gap-3 ${s.has(y.id)?r?"bg-amber-700/50 text-amber-100 ring-1 ring-amber-500":"bg-amber-200 text-amber-900 ring-1 ring-amber-400":r?"bg-neutral-800/50 text-neutral-300 hover:bg-neutral-700/50":"bg-white text-stone-700 hover:bg-stone-50 border border-stone-200"} ${l?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx("div",{className:`w-4 h-4 rounded-${e.type==="single-select"?"full":"sm"} border-2 flex items-center justify-center transition-colors ${s.has(y.id)?"bg-amber-500 border-amber-500":r?"border-neutral-500":"border-stone-300"}`,children:s.has(y.id)&&h.jsx(Ts,{size:10,className:"text-white"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:"font-medium",children:y.label}),y.description&&h.jsx("p",{className:`text-xs mt-0.5 ${r?"text-neutral-400":"text-stone-500"}`,children:y.description})]})]},y.id))}),e.type==="text"&&h.jsx("div",{className:"mb-4",children:h.jsx("textarea",{value:i,onChange:y=>a(y.target.value),placeholder:e.placeholder||"Type your answer...",disabled:l,className:`w-full px-3 py-2 rounded-lg text-sm resize-none transition-colors ${r?"bg-neutral-800 text-neutral-200 placeholder-neutral-500 border border-neutral-700 focus:border-amber-500":"bg-white text-stone-800 placeholder-stone-400 border border-stone-200 focus:border-amber-400"} focus:outline-none focus:ring-1 focus:ring-amber-500/50 ${l?"opacity-50 cursor-not-allowed":""}`,rows:3})}),e.type==="confirm"&&h.jsx("div",{className:"mb-4",children:h.jsx("p",{className:`text-sm ${r?"text-neutral-400":"text-stone-600"}`,children:"Click confirm to proceed, or skip to provide more context."})}),h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n&&!e.required&&h.jsx("button",{onClick:m,disabled:l,className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${r?"text-neutral-400 hover:text-neutral-200 hover:bg-neutral-800":"text-stone-500 hover:text-stone-700 hover:bg-stone-100"} ${l?"opacity-50 cursor-not-allowed":""}`,children:"Skip"}),h.jsx("button",{onClick:f,disabled:!g()||l,className:`px-4 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${g()&&!l?r?"bg-amber-600 text-white hover:bg-amber-500":"bg-amber-500 text-white hover:bg-amber-600":r?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-200 text-stone-400 cursor-not-allowed"}`,children:l?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):h.jsxs(h.Fragment,{children:[h.jsx(Ts,{size:14}),e.type==="confirm"?"Confirm":"Submit"]})})]})]})};function Uot(){const{isElectron:e,api:t}=Pot(),n=w.useMemo(()=>e?t==null?void 0:t.lsp:null,[e,t]),r=w.useRef(new Map),s=w.useCallback((v,x,E=200)=>(...T)=>{const k=r.current;k.has(v)&&clearTimeout(k.get(v));const I=setTimeout(()=>{x(...T),k.delete(v)},E);k.set(v,I)},[]),o=w.useCallback(async(v,x,E)=>{if(!n)return null;try{const T=await n.hover(v,x,E);return T.success&&T.data?T.data:null}catch(T){return console.error("[useElectronLSP] Hover failed:",T),null}},[n]),i=w.useCallback(async(v,x,E)=>{if(!n)return[];try{const T=await n.completion(v,x,E);return T.success&&T.data?T.data:[]}catch(T){return console.error("[useElectronLSP] Completion failed:",T),[]}},[n]),a=w.useCallback(async(v,x,E)=>{if(!n)return null;try{const T=await n.definition(v,x,E);return T.success&&T.data?T.data:null}catch(T){return console.error("[useElectronLSP] Definition failed:",T),null}},[n]),l=w.useCallback(async(v,x,E)=>{if(!n)return[];try{const T=await n.references(v,x,E);return T.success&&T.data?T.data:[]}catch(T){return console.error("[useElectronLSP] References failed:",T),[]}},[n]),c=w.useCallback(async v=>{if(!n)return[];try{const x=await n.getDiagnosticsForFile(v);return x.success&&x.data?x.data:[]}catch(x){return console.error("[useElectronLSP] Get diagnostics failed:",x),[]}},[n]),u=w.useCallback(async v=>{if(!n)return!1;try{return(await n.fileSaved(v)).success}catch(x){return console.error("[useElectronLSP] File saved failed:",x),!1}},[n]),f=w.useCallback(async(v,x)=>{if(!n)return!1;try{return(await n.fileChanged(v,x)).success}catch(E){return console.error("[useElectronLSP] File changed failed:",E),!1}},[n]),m=w.useCallback(async v=>{if(!n)return!1;try{return(await n.init(v)).success}catch(x){return console.error("[useElectronLSP] Init failed:",x),!1}},[n]),g=w.useCallback(async()=>{if(!n)return!1;try{return(await n.shutdown()).success}catch(v){return console.error("[useElectronLSP] Shutdown failed:",v),!1}},[n]),y=w.useCallback(v=>{if(!n)return()=>{};try{return n.onEvent(v)}catch(x){return console.error("[useElectronLSP] Event subscription failed:",x),()=>{}}},[n]);return{isAvailable:!!n,hover:o,completion:i,definition:a,references:l,getDiagnostics:c,fileSaved:u,fileChanged:f,init:m,shutdown:g,onEvent:y,debounce:s}}function Hot(e){const t=Uot(),[n,r]=w.useState({hoverTooltip:{isVisible:!1,data:null,position:null},autocomplete:{isVisible:!1,items:[],position:null,filterText:""}}),s=w.useRef(null),o=w.useRef(null),i=w.useRef(new Map),a=w.useRef(new Map),l=w.useCallback(async(E,T,k,I)=>{!e||!t.isAvailable||(s.current={x:E,y:T,line:k,character:I},o.current&&clearTimeout(o.current),o.current=setTimeout(async()=>{const O=`${e}:${k}:${I}`;if(i.current.has(O)){const P=i.current.get(O);r(j=>({...j,hoverTooltip:{isVisible:!0,data:P,position:{x:E,y:T}}}));return}const M=await t.hover(e,k,I);M&&(i.current.set(O,M),r(P=>({...P,hoverTooltip:{isVisible:!0,data:M,position:{x:E,y:T}}})))},200))},[e,t]),c=w.useCallback(()=>{o.current&&clearTimeout(o.current),r(E=>({...E,hoverTooltip:{isVisible:!1,data:null,position:null}}))},[]),u=w.useCallback(async(E,T,k,I,O="")=>{if(!e||!t.isAvailable)return;const M=`${e}:${k}:${I}`;if(a.current.has(M)){const j=a.current.get(M);r(V=>({...V,autocomplete:{isVisible:!0,items:j,position:{x:E,y:T},filterText:O}}));return}const P=await t.completion(e,k,I);P&&(a.current.set(M,P),r(j=>({...j,autocomplete:{isVisible:!0,items:P,position:{x:E,y:T},filterText:O}})))},[e,t]),f=w.useCallback(E=>{r(T=>({...T,autocomplete:{...T.autocomplete,filterText:E}}))},[]),m=w.useCallback(()=>{r(E=>({...E,autocomplete:{isVisible:!1,items:[],position:null,filterText:""}}))},[]),g=w.useCallback(async E=>{console.log("[LSP] Selected completion:",E.label,E.insertText||E.label),m()},[m]),y=w.useCallback(async(E,T)=>{if(!e||!t.isAvailable)return;const k=await t.definition(e,E,T);if(k){const I=Array.isArray(k)?k:k?[k]:[];if(I.length>0)return console.log("[LSP] Go to definition:",I[0]),I[0]}return null},[e,t]),v=w.useCallback(async(E,T)=>!e||!t.isAvailable?[]:await t.references(e,E,T),[e,t]),x=w.useCallback(()=>{i.current.clear(),a.current.clear()},[]);return w.useEffect(()=>()=>{o.current&&clearTimeout(o.current),x()},[x]),{uiState:n,showHover:l,hideHover:c,showAutocomplete:u,hideAutocomplete:m,updateAutocompleteFilter:f,selectCompletion:g,goToDefinition:y,findReferences:v,clearCache:x}}function Vot(e){return typeof e=="string"?e:Array.isArray(e)?e.map(t=>typeof t=="string"?t:t.value).join(`

`):e&&typeof e=="object"&&"value"in e?e.value:""}function qot({content:e}){const t=e.split(/(`{1,3}[\s\S]*?`{1,3})/g);return h.jsx("div",{className:"space-y-2 text-sm",children:t.map((n,r)=>{var s;if(n.startsWith("`")&&n.endsWith("`")&&!n.includes(`
`))return h.jsx("code",{className:"inline-block bg-black/40 text-amber-200 px-1.5 py-0.5 rounded font-mono text-xs",children:n.slice(1,-1)},r);if(n.startsWith("```")&&n.endsWith("```")){const o=n.slice(3,-3).trim().split(`
`),a=((s=o[0])!=null&&s.match(/^(\w+)$/)?o[0]:null)?o.slice(1).join(`
`):n.slice(3,-3);return h.jsx("pre",{className:"bg-black/60 text-amber-100 p-2 rounded overflow-x-auto font-mono text-xs",children:h.jsx("code",{children:a})},r)}return h.jsx("p",{className:"text-gray-300",children:n},r)})})}const Got=({data:e,position:t,isVisible:n,onDismiss:r})=>{const s=w.useRef(null),[o,i]=w.useState(null);if(w.useEffect(()=>{if(!n||!t||!s.current)return;const l=8;let c=t.y+l,u=t.x;const f=s.current.getBoundingClientRect(),m=f.width,g=f.height,y=window.innerWidth,v=window.innerHeight;u+m>y-10&&(u=Math.max(10,y-m-10)),c+g>v-10&&(c=Math.max(10,t.y-g-l)),i({top:c,left:u})},[n,t]),!n||!e||!o)return null;const a=Vot(e.contents);return h.jsxs("div",{ref:s,className:"fixed z-50 bg-gray-900 border border-gray-700 rounded-lg shadow-2xl max-w-sm",style:{top:`${o.top}px`,left:`${o.left}px`},onMouseLeave:r,children:[h.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-700/50",children:[h.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Type Information"}),h.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-300 transition-colors p-1","aria-label":"Close tooltip",children:h.jsx(qr,{size:14})})]}),h.jsx("div",{className:"p-3 max-h-64 overflow-y-auto custom-scrollbar",children:h.jsx(qot,{content:a})}),h.jsx("div",{className:"absolute bottom-full left-4 -mb-1 w-2 h-2 bg-gray-900 border-l border-t border-gray-700 transform rotate-45"})]})},DH={1:{label:"Text",color:"text-gray-400"},2:{label:"Method",color:"text-blue-400"},3:{label:"Function",color:"text-blue-400"},4:{label:"Constructor",color:"text-green-400"},5:{label:"Field",color:"text-amber-400"},6:{label:"Variable",color:"text-amber-400"},7:{label:"Class",color:"text-green-400"},8:{label:"Interface",color:"text-green-400"},9:{label:"Module",color:"text-purple-400"},10:{label:"Property",color:"text-amber-400"},11:{label:"Unit",color:"text-gray-400"},12:{label:"Value",color:"text-gray-400"},13:{label:"Enum",color:"text-green-400"},14:{label:"Keyword",color:"text-red-400"},15:{label:"Snippet",color:"text-pink-400"},16:{label:"Color",color:"text-cyan-400"},17:{label:"Reference",color:"text-gray-400"},18:{label:"Folder",color:"text-blue-300"},19:{label:"EnumMember",color:"text-green-400"},20:{label:"Constant",color:"text-red-400"},21:{label:"Struct",color:"text-green-400"},22:{label:"Event",color:"text-pink-400"},23:{label:"Operator",color:"text-red-400"},24:{label:"TypeParameter",color:"text-cyan-400"}};function Wot(e){return!e||!DH[e]?{label:"Unknown",color:"text-gray-400"}:DH[e]}function Yot(e,t){if(!t)return e;const n=t.toLowerCase();return e.filter(r=>(r.filterText||r.label).toLowerCase().includes(n))}function Kot({text:e,match:t}){if(!t)return h.jsx(h.Fragment,{children:e});const n=t.toLowerCase(),s=e.toLowerCase().indexOf(n);return s===-1?h.jsx(h.Fragment,{children:e}):h.jsxs(h.Fragment,{children:[e.slice(0,s),h.jsx("span",{className:"bg-amber-500/30 text-amber-200 font-semibold",children:e.slice(s,s+t.length)}),e.slice(s+t.length)]})}const Zot=({items:e,position:t,isVisible:n,filterText:r="",onSelect:s,onDismiss:o})=>{const i=w.useRef(null),a=w.useRef(null),[l,c]=w.useState(null),[u,f]=w.useState(0),m=w.useMemo(()=>Yot(e,r),[e,r]);w.useEffect(()=>{f(0)},[r]),w.useEffect(()=>{if(!n||!t||!i.current)return;const y=4;let v=t.y+y,x=t.x;const E=i.current.getBoundingClientRect(),T=E.width,k=E.height,I=window.innerWidth,O=window.innerHeight;x+T>I-10&&(x=Math.max(10,I-T-10)),v+k>O-10&&(v=Math.max(10,t.y-k-y)),c({top:v,left:x})},[n,t]),w.useEffect(()=>{if(!a.current)return;const v=a.current.querySelectorAll("[data-index]")[u];v&&v.scrollIntoView({block:"nearest"})},[u]);const g=w.useCallback(y=>{switch(y.key){case"ArrowDown":y.preventDefault(),f(v=>v<m.length-1?v+1:v);break;case"ArrowUp":y.preventDefault(),f(v=>v>0?v-1:v);break;case"Enter":y.preventDefault(),m[u]&&(s(m[u]),o());break;case"Escape":y.preventDefault(),o();break}},[m,u,s,o]);return!n||!l||m.length===0?null:h.jsxs("div",{ref:i,className:"fixed z-50 bg-gray-900 border border-gray-700 rounded-lg shadow-2xl max-w-sm min-w-80",style:{top:`${l.top}px`,left:`${l.left}px`},onKeyDown:g,tabIndex:-1,children:[h.jsx("div",{className:"px-3 py-2 border-b border-gray-700/50",children:h.jsxs("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:["Suggestions (",m.length,")"]})}),h.jsx("div",{ref:a,className:"max-h-64 overflow-y-auto custom-scrollbar",role:"listbox",children:m.map((y,v)=>{const x=Wot(y.kind),E=v===u;return h.jsxs("button",{"data-index":v,onClick:()=>{s(y),o()},onMouseEnter:()=>f(v),className:`w-full text-left px-3 py-2 transition-colors flex items-center gap-2 ${E?"bg-amber-600/40 border-l-2 border-amber-500":"hover:bg-gray-800/50 border-l-2 border-transparent"}`,role:"option","aria-selected":E,children:[h.jsx("span",{className:`flex-shrink-0 text-sm ${x.color}`,children:h.jsx(Gl,{size:14})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"text-sm font-medium text-gray-100 truncate",children:h.jsx(Kot,{text:y.label,match:r})}),y.detail&&h.jsx("div",{className:"text-xs text-gray-500 truncate",children:y.detail})]}),E&&h.jsx(Cf,{size:16,className:"flex-shrink-0 text-amber-500"})]},`${y.label}-${v}`)})}),h.jsx("div",{className:"px-3 py-2 border-t border-gray-700/50 bg-gray-900/50",children:h.jsx("div",{className:"text-xs text-gray-500 text-center",children:h.jsx("span",{children:" Navigate  Enter Select  Esc Close"})})})]})};var zA={};function Jot(e,t,n){return{id:`${n}_${e}`,name:e,transport:{type:"stdio",command:t.command,args:t.args||[],env:t.env||{},cwd:t.cwd},enabled:!0,autoConnect:!0}}async function Bie(e,t){var n;if(!((n=window.electronAPI)!=null&&n.files))return[];try{if(!await window.electronAPI.files.exists(e))return[];const s=await window.electronAPI.files.readFile(e);if(!s||typeof s!="string")return[];const o=JSON.parse(s),i=[];if(o.mcpServers)for(const[a,l]of Object.entries(o.mcpServers))i.push({source:t,config:Jot(a,l,t)});return i}catch(r){return console.warn(`[mcpDiscovery] Failed to read ${e}:`,r),[]}}async function Xot(e){const t=`${e}/.mcp.json`;return Bie(t,"project")}async function Qot(){var n,r;let e="";if(typeof process<"u"&&zA&&(e=zA.HOME||zA.USERPROFILE||""),!e)try{if((r=(n=window.electronAPI)==null?void 0:n.files)!=null&&r.getCwd){const s=await window.electronAPI.files.getCwd(),o=s==null?void 0:s.match(/^(\/Users\/[^/]+|\/home\/[^/]+|C:\\Users\\[^\\]+)/);o&&(e=o[1])}}catch{return[]}if(!e)return[];const t=`${e}/.claude/mcp.json`;return Bie(t,"global")}async function eit(e){const t=[],n=await Qot();if(t.push(...n),e){const r=await Xot(e);t.push(...r)}return t}function tit(e,t){const n=new Map;for(const r of t)n.set(r.config.name,r.config);for(const r of e)n.set(r.name,r);return Array.from(n.values())}function PH(){var e,t,n,r;return!!((t=(e=window.electronAPI)==null?void 0:e.files)!=null&&t.exists&&((r=(n=window.electronAPI)==null?void 0:n.files)!=null&&r.readFile))}const p_=e=>({config:e,status:"disconnected",tools:[],resources:[],prompts:[]});function nit(e={}){const{initialServers:t=[],autoConnect:n=!1,autoDiscover:r=!1,projectPath:s,onEvent:o,onError:i,onServersDiscovered:a}=e,[l,c]=w.useState(()=>{const F={};for(const G of t)F[G.id]=p_(G);return F}),u=w.useRef(!1),[f,m]=w.useState(!1),g=w.useRef(null);w.useEffect(()=>{var F;m(!!((F=window.electronAPI)!=null&&F.mcp))},[]),w.useEffect(()=>{var G;if(!((G=window.electronAPI)!=null&&G.mcp))return;const F=window.electronAPI.mcp.onEvent(X=>{c(J=>{const ee=J[X.serverId];if(!ee)return J;switch(X.type){case"connecting":return{...J,[X.serverId]:{...ee,status:"connecting"}};case"connected":return{...J,[X.serverId]:{...ee,status:"connected",error:void 0,lastConnected:X.timestamp}};case"disconnected":return{...J,[X.serverId]:{...ee,status:"disconnected",tools:[],resources:[],prompts:[]}};case"error":return{...J,[X.serverId]:{...ee,status:"error",error:String(X.data)}};case"tools-changed":return{...J,[X.serverId]:{...ee,tools:X.data}};case"resources-changed":return{...J,[X.serverId]:{...ee,resources:X.data}};case"prompts-changed":return{...J,[X.serverId]:{...ee,prompts:X.data}};default:return J}}),o==null||o(X)});return g.current=F,()=>{F(),g.current=null}},[o]),w.useEffect(()=>{if(!(!n||!f))for(const F of t)F.enabled&&x(F).catch(G=>{i==null||i(G instanceof Error?G:new Error(String(G)),F.id)})},[f]);const y=w.useCallback(async()=>{if(!(!r||!PH()))try{const F=await eit(s);if(F.length>0){a==null||a(F);const G=tit(t,F);if(c(X=>{const J={...X};for(const ee of G)J[ee.id]||(J[ee.id]=p_(ee));return J}),n)for(const X of G)X.autoConnect&&X.enabled&&x(X).catch(ee=>{i==null||i(ee instanceof Error?ee:new Error(String(ee)),X.id)})}}catch(F){console.warn("[useMCP] Auto-discovery failed:",F)}},[r,s,t,n,a,i]);w.useEffect(()=>{!r||!f||u.current||(u.current=!0,y())},[r,f,s,y]);const v=w.useCallback(async()=>{u.current=!1,await y()},[y]),x=w.useCallback(async F=>{var G;if(!((G=window.electronAPI)!=null&&G.mcp))return i==null||i(new Error("MCP is only available in Electron environment"),F.id),!1;c(X=>({...X,[F.id]:{...X[F.id]||p_(F),config:F,status:"connecting",error:void 0}}));try{const X=await window.electronAPI.mcp.connect(F);if(!X.success)return c(ie=>({...ie,[F.id]:{...ie[F.id],status:"error",error:X.error||"Connection failed"}})),i==null||i(new Error(X.error||"Connection failed"),F.id),!1;const J=await window.electronAPI.mcp.listTools(F.id),ee=await window.electronAPI.mcp.listResources(F.id),re=await window.electronAPI.mcp.listPrompts(F.id);return c(ie=>({...ie,[F.id]:{...ie[F.id],status:"connected",capabilities:X.capabilities,tools:J.tools||[],resources:ee.resources||[],prompts:re.prompts||[],lastConnected:Date.now()}})),!0}catch(X){const J=X instanceof Error?X:new Error(String(X));return c(ee=>({...ee,[F.id]:{...ee[F.id],status:"error",error:J.message}})),i==null||i(J,F.id),!1}},[i]),E=w.useCallback(async F=>{var G;if((G=window.electronAPI)!=null&&G.mcp)try{await window.electronAPI.mcp.disconnect(F),c(X=>({...X,[F]:{...X[F],status:"disconnected",tools:[],resources:[],prompts:[]}}))}catch(X){const J=X instanceof Error?X:new Error(String(X));i==null||i(J,F)}},[i]),T=w.useCallback(F=>{c(G=>({...G,[F.id]:p_(F)}))},[]),k=w.useCallback(async F=>{const G=l[F];((G==null?void 0:G.status)==="connected"||(G==null?void 0:G.status)==="connecting")&&await E(F),c(X=>{const{[F]:J,...ee}=X;return ee})},[l,E]),I=w.useCallback((F,G)=>{c(X=>{const J=X[F];return J?{...X,[F]:{...J,config:{...J.config,...G}}}:X})},[]),O=w.useCallback(async(F,G,X)=>{var ee;if(!((ee=window.electronAPI)!=null&&ee.mcp))return{success:!1,error:"MCP is only available in Electron environment"};const J=l[F];if(!J||J.status!=="connected")return{success:!1,error:"Server not connected"};try{return await window.electronAPI.mcp.callTool({serverId:F,toolName:G,arguments:X})}catch(re){const ie=re instanceof Error?re:new Error(String(re));return i==null||i(ie,F),{success:!1,error:ie.message}}},[l,i]),M=w.useCallback(async F=>{var X;if(!((X=window.electronAPI)!=null&&X.mcp))return[];const G=l[F];if(!G||G.status!=="connected")return[];try{const ee=(await window.electronAPI.mcp.listTools(F)).tools||[];return c(re=>({...re,[F]:{...re[F],tools:ee}})),ee}catch(J){const ee=J instanceof Error?J:new Error(String(J));return i==null||i(ee,F),[]}},[l,i]),P=w.useCallback(async(F,G=10)=>{var X,J;if(!((J=(X=window.electronAPI)==null?void 0:X.mcp)!=null&&J.scoreToolRelevance))return console.warn("[useMCP] Smart MCP features not available"),[];try{const ee=Object.entries(l).flatMap(([Z,te])=>te.status==="connected"?te.tools.map(oe=>({...oe,serverId:Z})):[]),re=ee.filter(Z=>{var te;return Z.serverId===((te=ee[0])==null?void 0:te.serverId)});return(await window.electronAPI.mcp.scoreToolRelevance(re,F)).sort((Z,te)=>te.relevanceScore-Z.relevanceScore).slice(0,G)}catch(ee){return console.error("[useMCP] Failed to get relevant tools:",ee),[]}},[l]),j=w.useCallback(async(F,G,X,J)=>{var ee,re;if((re=(ee=window.electronAPI)==null?void 0:ee.mcp)!=null&&re.trackToolUsage)try{await window.electronAPI.mcp.trackToolUsage(F,G,X,J)}catch(ie){console.error("[useMCP] Failed to track tool usage:",ie)}},[]),V=w.useCallback(async(F,G)=>{var X,J;if(!((J=(X=window.electronAPI)==null?void 0:X.mcp)!=null&&J.getToolUsageStats))return null;try{return await window.electronAPI.mcp.getToolUsageStats(F,G)}catch(ee){return console.error("[useMCP] Failed to get tool usage stats:",ee),null}},[]),U=w.useCallback(async F=>{var G,X;if(!((X=(G=window.electronAPI)==null?void 0:G.mcp)!=null&&X.getIndexHealth))return{ready:!1,indexing:!1,totalChunks:0,totalFiles:0,healthPercentage:0};try{return await window.electronAPI.mcp.getIndexHealth(F)}catch(J){return console.error("[useMCP] Failed to get index health:",J),{ready:!1,indexing:!1,totalChunks:0,totalFiles:0,healthPercentage:0}}},[]),z=Object.entries(l).flatMap(([F,G])=>G.status==="connected"?G.tools.map(X=>({...X,serverId:F})):[]),H=Object.values(l).some(F=>F.status==="connecting");return{servers:l,allTools:z,connect:x,disconnect:E,addServer:T,removeServer:k,updateServer:I,callTool:O,refreshTools:M,rediscover:v,getRelevantTools:P,trackToolUsage:j,getToolUsageStats:V,getIndexHealth:U,isConnecting:H,isAvailable:f,isDiscoveryAvailable:PH()}}function rit(e={}){const{onSelectionResult:t,onTextChunk:n,onReady:r,onError:s,autoInit:o=!1,cwd:i}=e,[a,l]=w.useState(!1),[c,u]=w.useState(!1),[f,m]=w.useState(!1),[g,y]=w.useState(!1),[v,x]=w.useState(null),[E,T]=w.useState(null),[k,I]=w.useState(null),O=w.useRef({onSelectionResult:t,onTextChunk:n,onReady:r,onError:s});O.current={onSelectionResult:t,onTextChunk:n,onReady:r,onError:s};const M=w.useRef(!1);w.useEffect(()=>{var Z,te;const G=!!((Z=window.electronAPI)!=null&&Z.selectorAgent);if(l(G),!G||!((te=window.electronAPI)!=null&&te.selectorAgent))return;const X=window.electronAPI.selectorAgent,J=X.onTextChunk(oe=>{var Q,Te;(Te=(Q=O.current).onTextChunk)==null||Te.call(Q,oe)}),ee=X.onSelectionResult(oe=>{var Q,Te;m(!1),T(oe),(Te=(Q=O.current).onSelectionResult)==null||Te.call(Q,oe)}),re=X.onReady(()=>{var oe,Q;M.current=!1,u(!0),x(null),(Q=(oe=O.current).onReady)==null||Q.call(oe)}),ie=X.onError(oe=>{var Q,Te;M.current=!1,m(!1),x(oe),(Te=(Q=O.current).onError)==null||Te.call(Q,oe)});return X.isActive().then(oe=>{u(oe.active),oe.active&&X.getContextState().then(I)}),()=>{J(),ee(),re(),ie()}},[]),w.useEffect(()=>{o&&a&&!c&&P({cwd:i})},[o,a,c,i]);const P=w.useCallback(async G=>{var X;if(!((X=window.electronAPI)!=null&&X.selectorAgent))return x("Selector agent is only available in the desktop app"),!1;if(M.current||c)return!0;M.current=!0,x(null);try{const J=await window.electronAPI.selectorAgent.init({cwd:(G==null?void 0:G.cwd)||i});return J.success?!0:(x(J.error||"Failed to initialize selector agent"),M.current=!1,!1)}catch(J){const ee=J instanceof Error?J.message:"Unknown error";return x(ee),M.current=!1,!1}},[i,c]),j=w.useCallback(async G=>{var X;if(!((X=window.electronAPI)!=null&&X.selectorAgent))return x("Selector agent is only available in the desktop app"),!1;x(null);try{const J=await window.electronAPI.selectorAgent.prime(G);if(!J.success)return x(J.error||"Failed to prime context"),!1;y(!0);const ee=await window.electronAPI.selectorAgent.getContextState();return I(ee),!0}catch(J){const ee=J instanceof Error?J.message:"Unknown error";return x(ee),!1}},[]),V=w.useCallback(async(G,X)=>{var J;if(!((J=window.electronAPI)!=null&&J.selectorAgent))return x("Selector agent is only available in the desktop app"),!1;x(null),m(!0);try{const ee=await window.electronAPI.selectorAgent.select(G,X);return ee.success?!0:(m(!1),x(ee.error||"Failed to request selection"),!1)}catch(ee){m(!1);const re=ee instanceof Error?ee.message:"Unknown error";return x(re),!1}},[]),U=w.useCallback(async G=>{var X;if(!((X=window.electronAPI)!=null&&X.selectorAgent))return x("Selector agent is only available in the desktop app"),!1;x(null),m(!0);try{const J=await window.electronAPI.selectorAgent.send(G);return J.success?!0:(m(!1),x(J.error||"Failed to send message"),!1)}catch(J){m(!1);const ee=J instanceof Error?J.message:"Unknown error";return x(ee),!1}},[]),z=w.useCallback(async()=>{var G;if(!((G=window.electronAPI)!=null&&G.selectorAgent))return!1;try{const X=await window.electronAPI.selectorAgent.interrupt();return X.success&&m(!1),X.success}catch(X){return Yr.general.error("Failed to interrupt selector agent:",X),!1}},[]),H=w.useCallback(async()=>{var G;if(!((G=window.electronAPI)!=null&&G.selectorAgent))return!1;try{const X=await window.electronAPI.selectorAgent.reset();return X.success&&(u(!1),m(!1),y(!1),T(null),I(null),x(null)),X.success}catch(X){return Yr.general.error("Failed to reset selector agent:",X),!1}},[]),F=w.useCallback(async()=>{var G;if((G=window.electronAPI)!=null&&G.selectorAgent)try{const X=await window.electronAPI.selectorAgent.getContextState();I(X),y(X.isPrimed)}catch(X){Yr.general.error("Failed to refresh context state:",X)}},[]);return{isAvailable:a,isActive:c,isWaiting:f,isPrimed:g,error:v,latestResult:E,contextState:k,initialize:P,primeContext:j,selectElement:V,sendMessage:U,interrupt:z,reset:H,refreshContextState:F}}function sit(){const[e,t]=w.useState(new Map),n=w.useRef({}),r=w.useCallback(l=>{const c={id:l.id,name:l.name,args:l.args,status:"running",startTime:Date.now()};t(f=>new Map(f).set(l.id,c));const u=setTimeout(()=>{t(f=>{const m=new Map(f),g=m.get(c.id);if(g&&g.status==="running"){const y=Date.now();g.status="error",g.error="Tool execution timeout (30s)",g.endTime=y,g.duration=y-g.startTime}return m}),delete n.current[l.id]},3e4);n.current[l.id]=u},[]),s=w.useCallback((l,c)=>{n.current[l]&&(clearTimeout(n.current[l]),delete n.current[l]),t(u=>{const f=new Map(u),m=f.get(l);if(m){const g=Date.now();m.status="success",m.result=c,m.endTime=g,m.duration=g-m.startTime}return f})},[]),o=w.useCallback((l,c)=>{n.current[l]&&(clearTimeout(n.current[l]),delete n.current[l]),t(u=>{const f=new Map(u),m=f.get(l);if(m){const g=Date.now();m.status="error",m.error=c,m.endTime=g,m.duration=g-m.startTime}return f})},[]),i=w.useCallback(()=>{Object.values(n.current).forEach(l=>clearTimeout(l)),n.current={},t(new Map)},[]);return{toolCalls:w.useCallback(()=>Array.from(e.values()),[e])(),trackStart:r,trackSuccess:s,trackError:o,clear:i,_internal:{toolCalls:e}}}const jA={"connect-button":{selector:'[data-control-id="connect-button"]',description:"Start voice streaming with AI",action:"click"},"disconnect-button":{selector:'[data-control-id="disconnect-button"]',description:"Stop voice streaming",action:"click"},"video-button":{selector:'[data-control-id="video-button"]',description:"Toggle video/camera feed",action:"click"},"screen-button":{selector:'[data-control-id="screen-button"]',description:"Toggle screen sharing",action:"click"},"inspector-button":{selector:'[data-control-id="inspector-button"]',description:"Toggle element inspector mode - select elements on page",action:"click"},"move-button":{selector:'[data-control-id="move-button"]',description:"Toggle move/resize mode for elements",action:"click"},"devtools-button":{selector:'[data-control-id="devtools-button"]',description:"Open browser DevTools for the webview",action:"click"},"agent-button":{selector:'[data-control-id="agent-button"]',description:"Toggle the Cluso Agent demo panel",action:"click"},"voice-button":{selector:'[data-control-id="voice-button"]',description:"Start/stop voice session with Gemini - small mic icon in chat area",action:"click"},"chat-input":{selector:'[data-control-id="chat-input"]',description:"Main chat input field - type messages here",action:"focus"},"send-button":{selector:'[data-control-id="send-button"]',description:"Send chat message to AI",action:"click"},"url-bar":{selector:'[data-control-id="url-bar"]',description:"URL input for navigation",action:"focus"},"go-button":{selector:'[data-action="navigate"]',description:"Navigate to URL",action:"click"},"approve-button":{selector:'[data-action="approve"]',description:"Approve pending change",action:"click"},"reject-button":{selector:'[data-action="reject"]',description:"Reject pending change",action:"click"}},zie=`
# Cluso - AI-Powered Development Assistant

## Core Capabilities

### Voice Control (Connect Button)
- Real-time voice interaction with AI
- Speak naturally to request UI changes
- AI responds with voice and actions
- Press connect button to start/stop

### Element Inspector (Inspector Button)
- Click inspector button to enter selection mode
- Hover over any element on the page
- Click to select an element
- Selected element info sent to AI for context
- AI can make changes to selected elements

### Screenshot Tool (Screenshot Button)
- Click screenshot button to enter capture mode
- Draw rectangle to capture area
- Screenshot sent to AI for analysis
- AI can describe or edit what it sees

### Live Preview (Browser Tab)
- View your app/website in real-time
- Enter URL in the URL bar
- Changes reflect instantly
- Inspector works on this view

### Code Editing
- AI can edit source files directly
- Changes go through approval workflow
- Approve or reject each change
- Undo capability available

### Model Selection
- Choose between different AI models
- Gemini models for voice/live
- Claude/GPT for text chat
- Each has different strengths

## Workflows

### Making a UI Change via Voice:
1. Click Connect to start voice
2. Click Inspector to select element
3. Click element you want to change
4. Speak your change request
5. AI makes instant preview
6. Approve or reject the change

### Making a UI Change via Chat:
1. Click Inspector to select element
2. Click element you want to change
3. Type your request in chat
4. AI makes instant preview
5. Approve or reject the change

### Demo Mode:
- AI can control the entire interface
- Highlight buttons before clicking
- Show tooltips explaining actions
- Perform guided walkthroughs
`;function oit(){const[e,t]=w.useState({highlightedElements:[],activeTooltip:null,isDemoMode:!1,demoStep:0}),n=w.useRef(new Map),r=w.useRef(null),s=w.useCallback(v=>{const x=jA[v],E=(x==null?void 0:x.selector)||v;return document.querySelector(E)},[]),o=v=>({blue:"#3b82f6",green:"#22c55e",red:"#ef4444",orange:"#f97316",purple:"#a855f7",yellow:"#eab308",pink:"#ec4899",cyan:"#06b6d4"})[v.toLowerCase()]||(v.startsWith("#")?v:"#3b82f6"),i=w.useCallback((v,x={})=>{const{color:E="#3b82f6",duration:T=3e3,pulse:k=!0,label:I}=x,O=o(E),M=s(v);if(!M)return console.warn(`[AppControl] Element not found: ${v}`),!1;const P=M.style.outline,j=M.style.boxShadow,V=M.style.position,U=M.style.zIndex;M.style.outline=`3px solid ${O}`,M.style.boxShadow=k?`0 0 0 0 ${O}40, 0 0 20px ${O}60`:`0 0 20px ${O}60`,M.style.position="relative",M.style.zIndex="10000",k&&M.animate([{boxShadow:`0 0 0 0 ${O}40, 0 0 20px ${O}60`},{boxShadow:`0 0 0 15px ${O}00, 0 0 20px ${O}60`}],{duration:1e3,iterations:Math.ceil(T/1e3)});let z=null;I&&(z=document.createElement("div"),z.textContent=I,z.style.cssText=`
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translateX(-50%);
        background: ${O};
        color: white;
        padding: 4px 12px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 600;
        white-space: nowrap;
        z-index: 10001;
        pointer-events: none;
      `,M.appendChild(z)),t(G=>({...G,highlightedElements:[...G.highlightedElements,v]}));const H=n.current.get(v);H&&clearTimeout(H);const F=setTimeout(()=>{M.style.outline=P,M.style.boxShadow=j,M.style.position=V,M.style.zIndex=U,z&&z.remove(),t(G=>({...G,highlightedElements:G.highlightedElements.filter(X=>X!==v)})),n.current.delete(v)},T);return n.current.set(v,F),!0},[s]),a=w.useCallback((v,x)=>{const{message:E,position:T="top",duration:k=4e3}=x,I=s(v);if(!I)return console.warn(`[AppControl] Element not found for tooltip: ${v}`),!1;const O=document.getElementById("app-control-tooltip");O&&O.remove(),r.current&&clearTimeout(r.current);const M=document.createElement("div");M.id="app-control-tooltip",M.textContent=E;const P=I.getBoundingClientRect();let j=0,V=0;switch(T){case"top":j=P.top-40,V=P.left+P.width/2;break;case"bottom":j=P.bottom+10,V=P.left+P.width/2;break;case"left":j=P.top+P.height/2,V=P.left-10;break;case"right":j=P.top+P.height/2,V=P.right+10;break}return M.style.cssText=`
      position: fixed;
      top: ${j}px;
      left: ${V}px;
      transform: ${T==="top"||T==="bottom"?"translateX(-50%)":"translateY(-50%)"};
      background: #1f2937;
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 14px;
      max-width: 300px;
      z-index: 100002;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      animation: fadeIn 0.2s ease-out;
      pointer-events: none;
    `,document.body.appendChild(M),t(U=>({...U,activeTooltip:{element:v,message:E}})),r.current=setTimeout(()=>{M.remove(),t(U=>({...U,activeTooltip:null}))},k),!0},[s]),l=w.useCallback(v=>{const x=s(v);return x?(x.click(),!0):(console.warn(`[AppControl] Element not found for click: ${v}`),!1)},[s]),c=w.useCallback(v=>{const x=s(v);return x?(x.focus(),!0):(console.warn(`[AppControl] Element not found for focus: ${v}`),!1)},[s]),u=w.useCallback((v,x,E=50)=>{const T=s(v);return T?(T.focus(),new Promise(k=>{let I=0;const O=setInterval(()=>{I<x.length?(T.value+=x[I],T.dispatchEvent(new Event("input",{bubbles:!0})),I++):(clearInterval(O),k(!0))},E)})):(console.warn(`[AppControl] Element not found for typing: ${v}`),Promise.resolve(!1))},[s]),f=w.useCallback(v=>new Promise(x=>setTimeout(x,v)),[]),m=w.useCallback(async v=>{t(x=>({...x,isDemoMode:!0,demoStep:0}));for(let x=0;x<v.length;x++){const E=v[x];switch(t(T=>({...T,demoStep:x+1})),E.type){case"highlight":E.target&&i(E.target,E.options);break;case"tooltip":E.target&&a(E.target,{message:E.text||"",...E.options});break;case"click":E.target&&l(E.target);break;case"focus":E.target&&c(E.target);break;case"type":E.target&&E.text&&await u(E.target,E.text);break;case"wait":await f(E.duration||1e3);break;case"speak":if(E.text&&"speechSynthesis"in window){const T=new SpeechSynthesisUtterance(E.text);speechSynthesis.speak(T),await new Promise(k=>{T.onend=()=>k()})}break}E.type!=="wait"&&await f(300)}t(x=>({...x,isDemoMode:!1,demoStep:0}))},[i,a,l,c,u,f]),g=w.useCallback(()=>Object.entries(jA).map(([v,x])=>({name:v,...x,exists:!!s(v)})),[s]);return{state:e,highlightElement:i,showTooltip:a,clickElement:l,focusElement:c,typeText:u,wait:f,executeSequence:m,getAvailableElements:g,tools:{highlight_element:{name:"highlight_element",description:"Highlight a UI element in Cluso to draw attention to it",parameters:{type:"object",properties:{element:{type:"string",description:"Element name or selector to highlight"},color:{type:"string",description:"Highlight color (default: blue)"},duration:{type:"number",description:"Duration in ms (default: 3000)"},label:{type:"string",description:"Optional label to show above element"}},required:["element"]},execute:v=>i(v.element,{color:v.color,duration:v.duration,label:v.label,pulse:!0})},show_tooltip:{name:"show_tooltip",description:"Show a tooltip message near a UI element",parameters:{type:"object",properties:{element:{type:"string",description:"Element name or selector"},message:{type:"string",description:"Tooltip message to display"},position:{type:"string",enum:["top","bottom","left","right"]}},required:["element","message"]},execute:v=>a(v.element,{message:v.message,position:v.position})},click_ui_element:{name:"click_ui_element",description:"Click a button or interactive element in Cluso",parameters:{type:"object",properties:{element:{type:"string",description:"Element name or selector to click"}},required:["element"]},execute:v=>l(v.element)},type_in_field:{name:"type_in_field",description:"Type text into an input field with typewriter effect",parameters:{type:"object",properties:{element:{type:"string",description:"Input element name or selector"},text:{type:"string",description:"Text to type"}},required:["element","text"]},execute:async v=>await u(v.element,v.text)},speak:{name:"speak",description:"Speak a message using text-to-speech",parameters:{type:"object",properties:{message:{type:"string",description:"Message to speak"}},required:["message"]},execute:v=>{if("speechSynthesis"in window){const x=new SpeechSynthesisUtterance(v.message);return speechSynthesis.speak(x),!0}return!1}},get_ui_elements:{name:"get_ui_elements",description:"Get list of all controllable UI elements in Cluso",parameters:{type:"object",properties:{}},execute:()=>g()},run_demo_sequence:{name:"run_demo_sequence",description:"Run a sequence of UI actions for a demo",parameters:{type:"object",properties:{actions:{type:"array",items:{type:"object",properties:{type:{type:"string",enum:["highlight","tooltip","click","focus","type","wait","speak"]},target:{type:"string"},text:{type:"string"},duration:{type:"number"}}}}},required:["actions"]},execute:async v=>(await m(v.actions),!0)}},knowledge:zie,elementRegistry:jA}}const iit="http://127.0.0.1:1234/v1/chat/completions",LH=["qwen2.5-0.5b-instruct-mlx","qwen2.5-0.5b-instruct-mlx:2","qwen2.5-0.5b-instruct-mlx:3","qwen2.5-0.5b-instruct-mlx:4"];let UA=0;function ait(){const e=LH[UA];return UA=(UA+1)%LH.length,e}const lit=[{type:"function",function:{name:"highlight_element",description:"Highlight a UI element to draw user attention. Use for guiding users or demos.",parameters:{type:"object",properties:{element:{type:"string",description:"Element ID: connect-button, video-button, screen-button, inspector-button, move-button, devtools-button, chat-input, send-button, url-bar, disconnect-button"},color:{type:"string",description:"Highlight color (default: blue). Options: blue, green, red, orange, purple"},label:{type:"string",description:"Optional label to show above the element"},duration:{type:"number",description:"Duration in ms (default: 3000)"}},required:["element"]}}},{type:"function",function:{name:"click_element",description:"Click a UI element button",parameters:{type:"object",properties:{element:{type:"string",description:"Element ID to click"}},required:["element"]}}},{type:"function",function:{name:"show_tooltip",description:"Show an informational tooltip near a UI element",parameters:{type:"object",properties:{element:{type:"string",description:"Element ID"},message:{type:"string",description:"Tooltip message"},position:{type:"string",enum:["top","bottom","left","right"],description:"Tooltip position"}},required:["element","message"]}}},{type:"function",function:{name:"type_text",description:"Type text into an input field with typewriter effect",parameters:{type:"object",properties:{element:{type:"string",description:"Input element ID (chat-input or url-bar)"},text:{type:"string",description:"Text to type"}},required:["element","text"]}}},{type:"function",function:{name:"speak",description:"Speak a message using text-to-speech for narration",parameters:{type:"object",properties:{message:{type:"string",description:"Message to speak aloud"}},required:["message"]}}},{type:"function",function:{name:"wait",description:"Pause for a duration before next action",parameters:{type:"object",properties:{duration:{type:"number",description:"Duration in milliseconds"}},required:["duration"]}}}],$H=`You are Cluso Agent - an AI assistant that controls the Cluso application UI.

${zie}

## Available UI Elements
You can interact with these elements using their IDs:
- connect-button: Start voice streaming with AI
- disconnect-button: Stop voice streaming
- video-button: Toggle camera feed
- screen-button: Toggle screen sharing
- inspector-button: Toggle element inspector mode
- move-button: Toggle move/resize mode
- devtools-button: Open browser DevTools
- chat-input: Main chat text input
- send-button: Send chat message
- url-bar: URL navigation input

## Your Role
1. Guide users through features when asked
2. Demonstrate capabilities with highlight + tooltip + speak
3. Execute demo sequences for presentations
4. Answer questions about how to use features
5. Control the UI to help users accomplish tasks

## Important Rules
- ALWAYS use tools to interact with UI - don't just describe
- Highlight before clicking to show users what will happen
- Use speak() to narrate what you're doing
- Use wait() between actions so users can follow
- Be concise and helpful

When showing how to do something:
1. speak() what you're about to demonstrate
2. highlight_element() the relevant button with a label
3. wait() a moment
4. click_element() if appropriate
5. Repeat for multi-step workflows`;class cit{constructor(t){this.messages=[],this.isProcessing=!1,this.callbacks=t,this.messages=[{role:"system",content:$H}]}async chat(t){if(this.isProcessing)return"Already processing a request...";this.isProcessing=!0,this.messages.push({role:"user",content:t});try{let n=await this.callModel(),r=0;const s=10;for(;n.tool_calls&&n.tool_calls.length>0&&r<s;){r++;const o=await Promise.all(n.tool_calls.map(async i=>{const a=JSON.parse(i.function.arguments),l=await this.executeTool(i.function.name,a);return{toolCall:i,result:l}}));for(const{toolCall:i,result:a}of o)this.messages.push({role:"tool",content:JSON.stringify(a),tool_call_id:i.id});n=await this.callModel()}return n.content&&this.messages.push({role:"assistant",content:n.content}),n.content||"Done!"}catch(n){return console.error("[ClusoAgent] Error:",n),`Error: ${n instanceof Error?n.message:"Unknown error"}`}finally{this.isProcessing=!1}}async callModel(){var s,o;const t=await fetch(iit,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:ait(),messages:this.messages,tools:lit,temperature:.3,max_tokens:500})});if(!t.ok)throw new Error(`Model API error: ${t.status}`);const r=(s=(await t.json()).choices[0])==null?void 0:s.message;if(!r)throw new Error("No message in response");return(o=r.tool_calls)!=null&&o.length&&this.messages.push({role:"assistant",content:r.content||"",tool_calls:r.tool_calls}),{content:r.content||"",tool_calls:r.tool_calls}}async executeTool(t,n){console.log(`[ClusoAgent] Executing tool: ${t}`,n);try{switch(t){case"highlight_element":return this.callbacks.onHighlight(n.element,{color:n.color,label:n.label,duration:n.duration}),{success:!0,message:`Highlighted ${n.element}`};case"click_element":return this.callbacks.onClick(n.element),{success:!0,message:`Clicked ${n.element}`};case"show_tooltip":return this.callbacks.onTooltip(n.element,n.message,n.position),{success:!0,message:`Showed tooltip on ${n.element}`};case"type_text":return await this.callbacks.onType(n.element,n.text),{success:!0,message:`Typed in ${n.element}`};case"speak":return this.callbacks.onSpeak(n.message),{success:!0,message:"Speaking"};case"wait":return await this.callbacks.onWait(n.duration),{success:!0,message:`Waited ${n.duration}ms`};default:return{success:!1,message:`Unknown tool: ${t}`}}}catch(r){return{success:!1,message:r instanceof Error?r.message:"Tool execution failed"}}}reset(){this.messages=[{role:"system",content:$H}]}}let FH=null;function uit(e){return FH=new cit(e),FH}var HA={},ov={},BH;function dit(){if(BH)return ov;BH=1,ov.byteLength=a,ov.toByteArray=c,ov.fromByteArray=m;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=r.length;s<o;++s)e[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function i(g){var y=g.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=y);var x=v===y?0:4-v%4;return[v,x]}function a(g){var y=i(g),v=y[0],x=y[1];return(v+x)*3/4-x}function l(g,y,v){return(y+v)*3/4-v}function c(g){var y,v=i(g),x=v[0],E=v[1],T=new n(l(g,x,E)),k=0,I=E>0?x-4:x,O;for(O=0;O<I;O+=4)y=t[g.charCodeAt(O)]<<18|t[g.charCodeAt(O+1)]<<12|t[g.charCodeAt(O+2)]<<6|t[g.charCodeAt(O+3)],T[k++]=y>>16&255,T[k++]=y>>8&255,T[k++]=y&255;return E===2&&(y=t[g.charCodeAt(O)]<<2|t[g.charCodeAt(O+1)]>>4,T[k++]=y&255),E===1&&(y=t[g.charCodeAt(O)]<<10|t[g.charCodeAt(O+1)]<<4|t[g.charCodeAt(O+2)]>>2,T[k++]=y>>8&255,T[k++]=y&255),T}function u(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}function f(g,y,v){for(var x,E=[],T=y;T<v;T+=3)x=(g[T]<<16&16711680)+(g[T+1]<<8&65280)+(g[T+2]&255),E.push(u(x));return E.join("")}function m(g){for(var y,v=g.length,x=v%3,E=[],T=16383,k=0,I=v-x;k<I;k+=T)E.push(f(g,k,k+T>I?I:k+T));return x===1?(y=g[v-1],E.push(e[y>>2]+e[y<<4&63]+"==")):x===2&&(y=(g[v-2]<<8)+g[v-1],E.push(e[y>>10]+e[y>>4&63]+e[y<<2&63]+"=")),E.join("")}return ov}var m_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var zH;function fit(){return zH||(zH=1,m_.read=function(e,t,n,r,s){var o,i,a=s*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,f=n?s-1:0,m=n?-1:1,g=e[t+f];for(f+=m,o=g&(1<<-u)-1,g>>=-u,u+=a;u>0;o=o*256+e[t+f],f+=m,u-=8);for(i=o&(1<<-u)-1,o>>=-u,u+=r;u>0;i=i*256+e[t+f],f+=m,u-=8);if(o===0)o=1-c;else{if(o===l)return i?NaN:(g?-1:1)*(1/0);i=i+Math.pow(2,r),o=o-c}return(g?-1:1)*i*Math.pow(2,o-r)},m_.write=function(e,t,n,r,s,o){var i,a,l,c=o*8-s-1,u=(1<<c)-1,f=u>>1,m=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:o-1,y=r?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+f>=1?t+=m/l:t+=m*Math.pow(2,1-f),t*l>=2&&(i++,l/=2),i+f>=u?(a=0,i=u):i+f>=1?(a=(t*l-1)*Math.pow(2,s),i=i+f):(a=t*Math.pow(2,f-1)*Math.pow(2,s),i=0));s>=8;e[n+g]=a&255,g+=y,a/=256,s-=8);for(i=i<<s|a,c+=s;c>0;e[n+g]=i&255,g+=y,i/=256,c-=8);e[n+g-y]|=v*128}),m_}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var jH;function hit(){return jH||(jH=1,(function(e){const t=dit(),n=fit(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const Y=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(Y,L),Y.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function i(Y){if(Y>s)throw new RangeError('The value "'+Y+'" is invalid for option "size"');const L=new Uint8Array(Y);return Object.setPrototypeOf(L,a.prototype),L}function a(Y,L,B){if(typeof Y=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(Y)}return l(Y,L,B)}a.poolSize=8192;function l(Y,L,B){if(typeof Y=="string")return m(Y,L);if(ArrayBuffer.isView(Y))return y(Y);if(Y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y);if($e(Y,ArrayBuffer)||Y&&$e(Y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($e(Y,SharedArrayBuffer)||Y&&$e(Y.buffer,SharedArrayBuffer)))return v(Y,L,B);if(typeof Y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ce=Y.valueOf&&Y.valueOf();if(ce!=null&&ce!==Y)return a.from(ce,L,B);const we=x(Y);if(we)return we;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Y[Symbol.toPrimitive]=="function")return a.from(Y[Symbol.toPrimitive]("string"),L,B);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y)}a.from=function(Y,L,B){return l(Y,L,B)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(Y){if(typeof Y!="number")throw new TypeError('"size" argument must be of type number');if(Y<0)throw new RangeError('The value "'+Y+'" is invalid for option "size"')}function u(Y,L,B){return c(Y),Y<=0?i(Y):L!==void 0?typeof B=="string"?i(Y).fill(L,B):i(Y).fill(L):i(Y)}a.alloc=function(Y,L,B){return u(Y,L,B)};function f(Y){return c(Y),i(Y<0?0:E(Y)|0)}a.allocUnsafe=function(Y){return f(Y)},a.allocUnsafeSlow=function(Y){return f(Y)};function m(Y,L){if((typeof L!="string"||L==="")&&(L="utf8"),!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const B=k(Y,L)|0;let ce=i(B);const we=ce.write(Y,L);return we!==B&&(ce=ce.slice(0,we)),ce}function g(Y){const L=Y.length<0?0:E(Y.length)|0,B=i(L);for(let ce=0;ce<L;ce+=1)B[ce]=Y[ce]&255;return B}function y(Y){if($e(Y,Uint8Array)){const L=new Uint8Array(Y);return v(L.buffer,L.byteOffset,L.byteLength)}return g(Y)}function v(Y,L,B){if(L<0||Y.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<L+(B||0))throw new RangeError('"length" is outside of buffer bounds');let ce;return L===void 0&&B===void 0?ce=new Uint8Array(Y):B===void 0?ce=new Uint8Array(Y,L):ce=new Uint8Array(Y,L,B),Object.setPrototypeOf(ce,a.prototype),ce}function x(Y){if(a.isBuffer(Y)){const L=E(Y.length)|0,B=i(L);return B.length===0||Y.copy(B,0,0,L),B}if(Y.length!==void 0)return typeof Y.length!="number"||Je(Y.length)?i(0):g(Y);if(Y.type==="Buffer"&&Array.isArray(Y.data))return g(Y.data)}function E(Y){if(Y>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return Y|0}function T(Y){return+Y!=Y&&(Y=0),a.alloc(+Y)}a.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==a.prototype},a.compare=function(L,B){if($e(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),$e(B,Uint8Array)&&(B=a.from(B,B.offset,B.byteLength)),!a.isBuffer(L)||!a.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===B)return 0;let ce=L.length,we=B.length;for(let ze=0,Be=Math.min(ce,we);ze<Be;++ze)if(L[ze]!==B[ze]){ce=L[ze],we=B[ze];break}return ce<we?-1:we<ce?1:0},a.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(L,B){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return a.alloc(0);let ce;if(B===void 0)for(B=0,ce=0;ce<L.length;++ce)B+=L[ce].length;const we=a.allocUnsafe(B);let ze=0;for(ce=0;ce<L.length;++ce){let Be=L[ce];if($e(Be,Uint8Array))ze+Be.length>we.length?(a.isBuffer(Be)||(Be=a.from(Be)),Be.copy(we,ze)):Uint8Array.prototype.set.call(we,Be,ze);else if(a.isBuffer(Be))Be.copy(we,ze);else throw new TypeError('"list" argument must be an Array of Buffers');ze+=Be.length}return we};function k(Y,L){if(a.isBuffer(Y))return Y.length;if(ArrayBuffer.isView(Y)||$e(Y,ArrayBuffer))return Y.byteLength;if(typeof Y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Y);const B=Y.length,ce=arguments.length>2&&arguments[2]===!0;if(!ce&&B===0)return 0;let we=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":return Dt(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B*2;case"hex":return B>>>1;case"base64":return pe(Y).length;default:if(we)return ce?-1:Dt(Y).length;L=(""+L).toLowerCase(),we=!0}}a.byteLength=k;function I(Y,L,B){let ce=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((B===void 0||B>this.length)&&(B=this.length),B<=0)||(B>>>=0,L>>>=0,B<=L))return"";for(Y||(Y="utf8");;)switch(Y){case"hex":return ie(this,L,B);case"utf8":case"utf-8":return G(this,L,B);case"ascii":return ee(this,L,B);case"latin1":case"binary":return re(this,L,B);case"base64":return F(this,L,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,L,B);default:if(ce)throw new TypeError("Unknown encoding: "+Y);Y=(Y+"").toLowerCase(),ce=!0}}a.prototype._isBuffer=!0;function O(Y,L,B){const ce=Y[L];Y[L]=Y[B],Y[B]=ce}a.prototype.swap16=function(){const L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let B=0;B<L;B+=2)O(this,B,B+1);return this},a.prototype.swap32=function(){const L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let B=0;B<L;B+=4)O(this,B,B+3),O(this,B+1,B+2);return this},a.prototype.swap64=function(){const L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let B=0;B<L;B+=8)O(this,B,B+7),O(this,B+1,B+6),O(this,B+2,B+5),O(this,B+3,B+4);return this},a.prototype.toString=function(){const L=this.length;return L===0?"":arguments.length===0?G(this,0,L):I.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(L){if(!a.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:a.compare(this,L)===0},a.prototype.inspect=function(){let L="";const B=e.INSPECT_MAX_BYTES;return L=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(L+=" ... "),"<Buffer "+L+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(L,B,ce,we,ze){if($e(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),!a.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(B===void 0&&(B=0),ce===void 0&&(ce=L?L.length:0),we===void 0&&(we=0),ze===void 0&&(ze=this.length),B<0||ce>L.length||we<0||ze>this.length)throw new RangeError("out of range index");if(we>=ze&&B>=ce)return 0;if(we>=ze)return-1;if(B>=ce)return 1;if(B>>>=0,ce>>>=0,we>>>=0,ze>>>=0,this===L)return 0;let Be=ze-we,ut=ce-B;const an=Math.min(Be,ut),zt=this.slice(we,ze),dn=L.slice(B,ce);for(let on=0;on<an;++on)if(zt[on]!==dn[on]){Be=zt[on],ut=dn[on];break}return Be<ut?-1:ut<Be?1:0};function M(Y,L,B,ce,we){if(Y.length===0)return-1;if(typeof B=="string"?(ce=B,B=0):B>2147483647?B=2147483647:B<-2147483648&&(B=-2147483648),B=+B,Je(B)&&(B=we?0:Y.length-1),B<0&&(B=Y.length+B),B>=Y.length){if(we)return-1;B=Y.length-1}else if(B<0)if(we)B=0;else return-1;if(typeof L=="string"&&(L=a.from(L,ce)),a.isBuffer(L))return L.length===0?-1:P(Y,L,B,ce,we);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?we?Uint8Array.prototype.indexOf.call(Y,L,B):Uint8Array.prototype.lastIndexOf.call(Y,L,B):P(Y,[L],B,ce,we);throw new TypeError("val must be string, number or Buffer")}function P(Y,L,B,ce,we){let ze=1,Be=Y.length,ut=L.length;if(ce!==void 0&&(ce=String(ce).toLowerCase(),ce==="ucs2"||ce==="ucs-2"||ce==="utf16le"||ce==="utf-16le")){if(Y.length<2||L.length<2)return-1;ze=2,Be/=2,ut/=2,B/=2}function an(dn,on){return ze===1?dn[on]:dn.readUInt16BE(on*ze)}let zt;if(we){let dn=-1;for(zt=B;zt<Be;zt++)if(an(Y,zt)===an(L,dn===-1?0:zt-dn)){if(dn===-1&&(dn=zt),zt-dn+1===ut)return dn*ze}else dn!==-1&&(zt-=zt-dn),dn=-1}else for(B+ut>Be&&(B=Be-ut),zt=B;zt>=0;zt--){let dn=!0;for(let on=0;on<ut;on++)if(an(Y,zt+on)!==an(L,on)){dn=!1;break}if(dn)return zt}return-1}a.prototype.includes=function(L,B,ce){return this.indexOf(L,B,ce)!==-1},a.prototype.indexOf=function(L,B,ce){return M(this,L,B,ce,!0)},a.prototype.lastIndexOf=function(L,B,ce){return M(this,L,B,ce,!1)};function j(Y,L,B,ce){B=Number(B)||0;const we=Y.length-B;ce?(ce=Number(ce),ce>we&&(ce=we)):ce=we;const ze=L.length;ce>ze/2&&(ce=ze/2);let Be;for(Be=0;Be<ce;++Be){const ut=parseInt(L.substr(Be*2,2),16);if(Je(ut))return Be;Y[B+Be]=ut}return Be}function V(Y,L,B,ce){return Ne(Dt(L,Y.length-B),Y,B,ce)}function U(Y,L,B,ce){return Ne(en(L),Y,B,ce)}function z(Y,L,B,ce){return Ne(pe(L),Y,B,ce)}function H(Y,L,B,ce){return Ne(xt(L,Y.length-B),Y,B,ce)}a.prototype.write=function(L,B,ce,we){if(B===void 0)we="utf8",ce=this.length,B=0;else if(ce===void 0&&typeof B=="string")we=B,ce=this.length,B=0;else if(isFinite(B))B=B>>>0,isFinite(ce)?(ce=ce>>>0,we===void 0&&(we="utf8")):(we=ce,ce=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ze=this.length-B;if((ce===void 0||ce>ze)&&(ce=ze),L.length>0&&(ce<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");we||(we="utf8");let Be=!1;for(;;)switch(we){case"hex":return j(this,L,B,ce);case"utf8":case"utf-8":return V(this,L,B,ce);case"ascii":case"latin1":case"binary":return U(this,L,B,ce);case"base64":return z(this,L,B,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,L,B,ce);default:if(Be)throw new TypeError("Unknown encoding: "+we);we=(""+we).toLowerCase(),Be=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(Y,L,B){return L===0&&B===Y.length?t.fromByteArray(Y):t.fromByteArray(Y.slice(L,B))}function G(Y,L,B){B=Math.min(Y.length,B);const ce=[];let we=L;for(;we<B;){const ze=Y[we];let Be=null,ut=ze>239?4:ze>223?3:ze>191?2:1;if(we+ut<=B){let an,zt,dn,on;switch(ut){case 1:ze<128&&(Be=ze);break;case 2:an=Y[we+1],(an&192)===128&&(on=(ze&31)<<6|an&63,on>127&&(Be=on));break;case 3:an=Y[we+1],zt=Y[we+2],(an&192)===128&&(zt&192)===128&&(on=(ze&15)<<12|(an&63)<<6|zt&63,on>2047&&(on<55296||on>57343)&&(Be=on));break;case 4:an=Y[we+1],zt=Y[we+2],dn=Y[we+3],(an&192)===128&&(zt&192)===128&&(dn&192)===128&&(on=(ze&15)<<18|(an&63)<<12|(zt&63)<<6|dn&63,on>65535&&on<1114112&&(Be=on))}}Be===null?(Be=65533,ut=1):Be>65535&&(Be-=65536,ce.push(Be>>>10&1023|55296),Be=56320|Be&1023),ce.push(Be),we+=ut}return J(ce)}const X=4096;function J(Y){const L=Y.length;if(L<=X)return String.fromCharCode.apply(String,Y);let B="",ce=0;for(;ce<L;)B+=String.fromCharCode.apply(String,Y.slice(ce,ce+=X));return B}function ee(Y,L,B){let ce="";B=Math.min(Y.length,B);for(let we=L;we<B;++we)ce+=String.fromCharCode(Y[we]&127);return ce}function re(Y,L,B){let ce="";B=Math.min(Y.length,B);for(let we=L;we<B;++we)ce+=String.fromCharCode(Y[we]);return ce}function ie(Y,L,B){const ce=Y.length;(!L||L<0)&&(L=0),(!B||B<0||B>ce)&&(B=ce);let we="";for(let ze=L;ze<B;++ze)we+=Le[Y[ze]];return we}function Z(Y,L,B){const ce=Y.slice(L,B);let we="";for(let ze=0;ze<ce.length-1;ze+=2)we+=String.fromCharCode(ce[ze]+ce[ze+1]*256);return we}a.prototype.slice=function(L,B){const ce=this.length;L=~~L,B=B===void 0?ce:~~B,L<0?(L+=ce,L<0&&(L=0)):L>ce&&(L=ce),B<0?(B+=ce,B<0&&(B=0)):B>ce&&(B=ce),B<L&&(B=L);const we=this.subarray(L,B);return Object.setPrototypeOf(we,a.prototype),we};function te(Y,L,B){if(Y%1!==0||Y<0)throw new RangeError("offset is not uint");if(Y+L>B)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(L,B,ce){L=L>>>0,B=B>>>0,ce||te(L,B,this.length);let we=this[L],ze=1,Be=0;for(;++Be<B&&(ze*=256);)we+=this[L+Be]*ze;return we},a.prototype.readUintBE=a.prototype.readUIntBE=function(L,B,ce){L=L>>>0,B=B>>>0,ce||te(L,B,this.length);let we=this[L+--B],ze=1;for(;B>0&&(ze*=256);)we+=this[L+--B]*ze;return we},a.prototype.readUint8=a.prototype.readUInt8=function(L,B){return L=L>>>0,B||te(L,1,this.length),this[L]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(L,B){return L=L>>>0,B||te(L,2,this.length),this[L]|this[L+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(L,B){return L=L>>>0,B||te(L,2,this.length),this[L]<<8|this[L+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(L,B){return L=L>>>0,B||te(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(L,B){return L=L>>>0,B||te(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},a.prototype.readBigUInt64LE=Ve(function(L){L=L>>>0,nt(L,"offset");const B=this[L],ce=this[L+7];(B===void 0||ce===void 0)&&ot(L,this.length-8);const we=B+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,ze=this[++L]+this[++L]*2**8+this[++L]*2**16+ce*2**24;return BigInt(we)+(BigInt(ze)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ve(function(L){L=L>>>0,nt(L,"offset");const B=this[L],ce=this[L+7];(B===void 0||ce===void 0)&&ot(L,this.length-8);const we=B*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],ze=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+ce;return(BigInt(we)<<BigInt(32))+BigInt(ze)}),a.prototype.readIntLE=function(L,B,ce){L=L>>>0,B=B>>>0,ce||te(L,B,this.length);let we=this[L],ze=1,Be=0;for(;++Be<B&&(ze*=256);)we+=this[L+Be]*ze;return ze*=128,we>=ze&&(we-=Math.pow(2,8*B)),we},a.prototype.readIntBE=function(L,B,ce){L=L>>>0,B=B>>>0,ce||te(L,B,this.length);let we=B,ze=1,Be=this[L+--we];for(;we>0&&(ze*=256);)Be+=this[L+--we]*ze;return ze*=128,Be>=ze&&(Be-=Math.pow(2,8*B)),Be},a.prototype.readInt8=function(L,B){return L=L>>>0,B||te(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},a.prototype.readInt16LE=function(L,B){L=L>>>0,B||te(L,2,this.length);const ce=this[L]|this[L+1]<<8;return ce&32768?ce|4294901760:ce},a.prototype.readInt16BE=function(L,B){L=L>>>0,B||te(L,2,this.length);const ce=this[L+1]|this[L]<<8;return ce&32768?ce|4294901760:ce},a.prototype.readInt32LE=function(L,B){return L=L>>>0,B||te(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},a.prototype.readInt32BE=function(L,B){return L=L>>>0,B||te(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},a.prototype.readBigInt64LE=Ve(function(L){L=L>>>0,nt(L,"offset");const B=this[L],ce=this[L+7];(B===void 0||ce===void 0)&&ot(L,this.length-8);const we=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(ce<<24);return(BigInt(we)<<BigInt(32))+BigInt(B+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),a.prototype.readBigInt64BE=Ve(function(L){L=L>>>0,nt(L,"offset");const B=this[L],ce=this[L+7];(B===void 0||ce===void 0)&&ot(L,this.length-8);const we=(B<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(we)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+ce)}),a.prototype.readFloatLE=function(L,B){return L=L>>>0,B||te(L,4,this.length),n.read(this,L,!0,23,4)},a.prototype.readFloatBE=function(L,B){return L=L>>>0,B||te(L,4,this.length),n.read(this,L,!1,23,4)},a.prototype.readDoubleLE=function(L,B){return L=L>>>0,B||te(L,8,this.length),n.read(this,L,!0,52,8)},a.prototype.readDoubleBE=function(L,B){return L=L>>>0,B||te(L,8,this.length),n.read(this,L,!1,52,8)};function oe(Y,L,B,ce,we,ze){if(!a.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>we||L<ze)throw new RangeError('"value" argument is out of bounds');if(B+ce>Y.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(L,B,ce,we){if(L=+L,B=B>>>0,ce=ce>>>0,!we){const ut=Math.pow(2,8*ce)-1;oe(this,L,B,ce,ut,0)}let ze=1,Be=0;for(this[B]=L&255;++Be<ce&&(ze*=256);)this[B+Be]=L/ze&255;return B+ce},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(L,B,ce,we){if(L=+L,B=B>>>0,ce=ce>>>0,!we){const ut=Math.pow(2,8*ce)-1;oe(this,L,B,ce,ut,0)}let ze=ce-1,Be=1;for(this[B+ze]=L&255;--ze>=0&&(Be*=256);)this[B+ze]=L/Be&255;return B+ce},a.prototype.writeUint8=a.prototype.writeUInt8=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,1,255,0),this[B]=L&255,B+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,2,65535,0),this[B]=L&255,this[B+1]=L>>>8,B+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,2,65535,0),this[B]=L>>>8,this[B+1]=L&255,B+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,4,4294967295,0),this[B+3]=L>>>24,this[B+2]=L>>>16,this[B+1]=L>>>8,this[B]=L&255,B+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,4,4294967295,0),this[B]=L>>>24,this[B+1]=L>>>16,this[B+2]=L>>>8,this[B+3]=L&255,B+4};function Q(Y,L,B,ce,we){de(L,ce,we,Y,B,7);let ze=Number(L&BigInt(4294967295));Y[B++]=ze,ze=ze>>8,Y[B++]=ze,ze=ze>>8,Y[B++]=ze,ze=ze>>8,Y[B++]=ze;let Be=Number(L>>BigInt(32)&BigInt(4294967295));return Y[B++]=Be,Be=Be>>8,Y[B++]=Be,Be=Be>>8,Y[B++]=Be,Be=Be>>8,Y[B++]=Be,B}function Te(Y,L,B,ce,we){de(L,ce,we,Y,B,7);let ze=Number(L&BigInt(4294967295));Y[B+7]=ze,ze=ze>>8,Y[B+6]=ze,ze=ze>>8,Y[B+5]=ze,ze=ze>>8,Y[B+4]=ze;let Be=Number(L>>BigInt(32)&BigInt(4294967295));return Y[B+3]=Be,Be=Be>>8,Y[B+2]=Be,Be=Be>>8,Y[B+1]=Be,Be=Be>>8,Y[B]=Be,B+8}a.prototype.writeBigUInt64LE=Ve(function(L,B=0){return Q(this,L,B,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ve(function(L,B=0){return Te(this,L,B,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(L,B,ce,we){if(L=+L,B=B>>>0,!we){const an=Math.pow(2,8*ce-1);oe(this,L,B,ce,an-1,-an)}let ze=0,Be=1,ut=0;for(this[B]=L&255;++ze<ce&&(Be*=256);)L<0&&ut===0&&this[B+ze-1]!==0&&(ut=1),this[B+ze]=(L/Be>>0)-ut&255;return B+ce},a.prototype.writeIntBE=function(L,B,ce,we){if(L=+L,B=B>>>0,!we){const an=Math.pow(2,8*ce-1);oe(this,L,B,ce,an-1,-an)}let ze=ce-1,Be=1,ut=0;for(this[B+ze]=L&255;--ze>=0&&(Be*=256);)L<0&&ut===0&&this[B+ze+1]!==0&&(ut=1),this[B+ze]=(L/Be>>0)-ut&255;return B+ce},a.prototype.writeInt8=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,1,127,-128),L<0&&(L=255+L+1),this[B]=L&255,B+1},a.prototype.writeInt16LE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,2,32767,-32768),this[B]=L&255,this[B+1]=L>>>8,B+2},a.prototype.writeInt16BE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,2,32767,-32768),this[B]=L>>>8,this[B+1]=L&255,B+2},a.prototype.writeInt32LE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,4,2147483647,-2147483648),this[B]=L&255,this[B+1]=L>>>8,this[B+2]=L>>>16,this[B+3]=L>>>24,B+4},a.prototype.writeInt32BE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[B]=L>>>24,this[B+1]=L>>>16,this[B+2]=L>>>8,this[B+3]=L&255,B+4},a.prototype.writeBigInt64LE=Ve(function(L,B=0){return Q(this,L,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ve(function(L,B=0){return Te(this,L,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(Y,L,B,ce,we,ze){if(B+ce>Y.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function Ce(Y,L,B,ce,we){return L=+L,B=B>>>0,we||ge(Y,L,B,4),n.write(Y,L,B,ce,23,4),B+4}a.prototype.writeFloatLE=function(L,B,ce){return Ce(this,L,B,!0,ce)},a.prototype.writeFloatBE=function(L,B,ce){return Ce(this,L,B,!1,ce)};function fe(Y,L,B,ce,we){return L=+L,B=B>>>0,we||ge(Y,L,B,8),n.write(Y,L,B,ce,52,8),B+8}a.prototype.writeDoubleLE=function(L,B,ce){return fe(this,L,B,!0,ce)},a.prototype.writeDoubleBE=function(L,B,ce){return fe(this,L,B,!1,ce)},a.prototype.copy=function(L,B,ce,we){if(!a.isBuffer(L))throw new TypeError("argument should be a Buffer");if(ce||(ce=0),!we&&we!==0&&(we=this.length),B>=L.length&&(B=L.length),B||(B=0),we>0&&we<ce&&(we=ce),we===ce||L.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(ce<0||ce>=this.length)throw new RangeError("Index out of range");if(we<0)throw new RangeError("sourceEnd out of bounds");we>this.length&&(we=this.length),L.length-B<we-ce&&(we=L.length-B+ce);const ze=we-ce;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(B,ce,we):Uint8Array.prototype.set.call(L,this.subarray(ce,we),B),ze},a.prototype.fill=function(L,B,ce,we){if(typeof L=="string"){if(typeof B=="string"?(we=B,B=0,ce=this.length):typeof ce=="string"&&(we=ce,ce=this.length),we!==void 0&&typeof we!="string")throw new TypeError("encoding must be a string");if(typeof we=="string"&&!a.isEncoding(we))throw new TypeError("Unknown encoding: "+we);if(L.length===1){const Be=L.charCodeAt(0);(we==="utf8"&&Be<128||we==="latin1")&&(L=Be)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(B<0||this.length<B||this.length<ce)throw new RangeError("Out of range index");if(ce<=B)return this;B=B>>>0,ce=ce===void 0?this.length:ce>>>0,L||(L=0);let ze;if(typeof L=="number")for(ze=B;ze<ce;++ze)this[ze]=L;else{const Be=a.isBuffer(L)?L:a.from(L,we),ut=Be.length;if(ut===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(ze=0;ze<ce-B;++ze)this[ze+B]=Be[ze%ut]}return this};const Fe={};function De(Y,L,B){Fe[Y]=class extends B{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Y}]`,this.stack,delete this.name}get code(){return Y}set code(we){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:we,writable:!0})}toString(){return`${this.name} [${Y}]: ${this.message}`}}}De("ERR_BUFFER_OUT_OF_BOUNDS",function(Y){return Y?`${Y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),De("ERR_INVALID_ARG_TYPE",function(Y,L){return`The "${Y}" argument must be of type number. Received type ${typeof L}`},TypeError),De("ERR_OUT_OF_RANGE",function(Y,L,B){let ce=`The value of "${Y}" is out of range.`,we=B;return Number.isInteger(B)&&Math.abs(B)>2**32?we=Re(String(B)):typeof B=="bigint"&&(we=String(B),(B>BigInt(2)**BigInt(32)||B<-(BigInt(2)**BigInt(32)))&&(we=Re(we)),we+="n"),ce+=` It must be ${L}. Received ${we}`,ce},RangeError);function Re(Y){let L="",B=Y.length;const ce=Y[0]==="-"?1:0;for(;B>=ce+4;B-=3)L=`_${Y.slice(B-3,B)}${L}`;return`${Y.slice(0,B)}${L}`}function tt(Y,L,B){nt(L,"offset"),(Y[L]===void 0||Y[L+B]===void 0)&&ot(L,Y.length-(B+1))}function de(Y,L,B,ce,we,ze){if(Y>B||Y<L){const Be=typeof L=="bigint"?"n":"";let ut;throw L===0||L===BigInt(0)?ut=`>= 0${Be} and < 2${Be} ** ${(ze+1)*8}${Be}`:ut=`>= -(2${Be} ** ${(ze+1)*8-1}${Be}) and < 2 ** ${(ze+1)*8-1}${Be}`,new Fe.ERR_OUT_OF_RANGE("value",ut,Y)}tt(ce,we,ze)}function nt(Y,L){if(typeof Y!="number")throw new Fe.ERR_INVALID_ARG_TYPE(L,"number",Y)}function ot(Y,L,B){throw Math.floor(Y)!==Y?(nt(Y,B),new Fe.ERR_OUT_OF_RANGE("offset","an integer",Y)):L<0?new Fe.ERR_BUFFER_OUT_OF_BOUNDS:new Fe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${L}`,Y)}const Ut=/[^+/0-9A-Za-z-_]/g;function Vt(Y){if(Y=Y.split("=")[0],Y=Y.trim().replace(Ut,""),Y.length<2)return"";for(;Y.length%4!==0;)Y=Y+"=";return Y}function Dt(Y,L){L=L||1/0;let B;const ce=Y.length;let we=null;const ze=[];for(let Be=0;Be<ce;++Be){if(B=Y.charCodeAt(Be),B>55295&&B<57344){if(!we){if(B>56319){(L-=3)>-1&&ze.push(239,191,189);continue}else if(Be+1===ce){(L-=3)>-1&&ze.push(239,191,189);continue}we=B;continue}if(B<56320){(L-=3)>-1&&ze.push(239,191,189),we=B;continue}B=(we-55296<<10|B-56320)+65536}else we&&(L-=3)>-1&&ze.push(239,191,189);if(we=null,B<128){if((L-=1)<0)break;ze.push(B)}else if(B<2048){if((L-=2)<0)break;ze.push(B>>6|192,B&63|128)}else if(B<65536){if((L-=3)<0)break;ze.push(B>>12|224,B>>6&63|128,B&63|128)}else if(B<1114112){if((L-=4)<0)break;ze.push(B>>18|240,B>>12&63|128,B>>6&63|128,B&63|128)}else throw new Error("Invalid code point")}return ze}function en(Y){const L=[];for(let B=0;B<Y.length;++B)L.push(Y.charCodeAt(B)&255);return L}function xt(Y,L){let B,ce,we;const ze=[];for(let Be=0;Be<Y.length&&!((L-=2)<0);++Be)B=Y.charCodeAt(Be),ce=B>>8,we=B%256,ze.push(we),ze.push(ce);return ze}function pe(Y){return t.toByteArray(Vt(Y))}function Ne(Y,L,B,ce){let we;for(we=0;we<ce&&!(we+B>=L.length||we>=Y.length);++we)L[we+B]=Y[we];return we}function $e(Y,L){return Y instanceof L||Y!=null&&Y.constructor!=null&&Y.constructor.name!=null&&Y.constructor.name===L.name}function Je(Y){return Y!==Y}const Le=(function(){const Y="0123456789abcdef",L=new Array(256);for(let B=0;B<16;++B){const ce=B*16;for(let we=0;we<16;++we)L[ce+we]=Y[B]+Y[we]}return L})();function Ve(Y){return typeof BigInt>"u"?_e:Y}function _e(){throw new Error("BigInt not supported")}})(HA)),HA}var pit=hit();typeof window<"u"&&!window.Buffer&&(window.Buffer=pit.Buffer);let qI=null,sl=null,d4=new Set,g_=0;const jie={user:"Puck",app:"Zephyr"};function mit(e){return console.log("[GeminiTTS] Initializing with API key:",`${e.substring(0,8)}...`),qI=new fR({apiKey:e}),console.log("[GeminiTTS] Client created successfully"),!0}async function y9(e,t="Zephyr"){if(!qI){console.warn("[GeminiTTS] Not initialized, falling back to browser TTS"),UH(e);return}try{(!sl||sl.state==="closed")&&(sl=new AudioContext({sampleRate:24e3})),sl.state==="suspended"&&await sl.resume(),vit(),g_=sl.currentTime,console.log(`[GeminiTTS] Speaking with voice "${t}": ${e.substring(0,50)}...`);const n="gemini-2.5-flash-native-audio-preview-09-2025";console.log(`[GeminiTTS] Connecting to ${n}...`);const r=await qI.live.connect({model:n,config:{responseModalities:[$1.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}},systemInstruction:"You are a voice assistant. Speak the text exactly as provided, nothing more."}});console.log("[GeminiTTS] Session connected");let s=!1;r.on("audio",async i=>{if(i.data&&sl){console.log("[GeminiTTS] Received audio chunk");const a=Uint8Array.from(atob(i.data),f=>f.charCodeAt(0)),l=await Rq(a,sl,24e3),c=sl.createBufferSource();c.buffer=l,c.connect(sl.destination);const u=Math.max(sl.currentTime,g_);c.start(u),g_=u+l.duration,c.onended=()=>d4.delete(c),d4.add(c)}}),r.on("close",()=>{console.log("[GeminiTTS] Session closed"),s=!0}),console.log("[GeminiTTS] Sending text to speak..."),await r.sendClientContent({turns:[{role:"user",parts:[{text:`Say exactly: "${e}"`}]}],turnComplete:!0}),await new Promise(i=>setTimeout(i,2e3+e.length*50)),r.close();const o=g_-((sl==null?void 0:sl.currentTime)||0);o>0&&await new Promise(i=>setTimeout(i,o*1e3+300))}catch(n){console.error("[GeminiTTS] FAILED - Error details:",n),console.error("[GeminiTTS] Error name:",n==null?void 0:n.name),console.error("[GeminiTTS] Error message:",n==null?void 0:n.message),console.error("[GeminiTTS] Falling back to browser TTS"),UH(e)}}async function git(e){return y9(e,jie.user)}async function bit(e){return y9(e,jie.app)}async function yit(e,t=500){console.log("[GeminiTTS] Starting demo conversation with",e.length,"lines");for(const n of e)n.action&&(await n.action(),await new Promise(r=>setTimeout(r,300))),n.role==="user"?await git(n.text):await bit(n.text),await new Promise(r=>setTimeout(r,t));console.log("[GeminiTTS] Demo conversation complete")}function UH(e){if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.rate=1.1,speechSynthesis.speak(t)}}function vit(){d4.forEach(e=>{try{e.stop()}catch{}}),d4.clear()}function xit(e){return[{role:"user",text:"Hey, I need to add a Support page to the website."},{role:"app",text:"Sure! I'll create a Support page for you. Let me highlight the tools we'll use.",action:async()=>{e.highlightElement("inspector-button",{color:"blue",label:"Inspector",duration:2e3})}},{role:"user",text:"Great, what do you need from me?"},{role:"app",text:"I'll show you how to navigate to where we need to make changes. First, let me highlight the URL bar.",action:async()=>{e.highlightElement("url-bar",{color:"green",label:"Navigate here",duration:3e3})}},{role:"user",text:"I see it. What's next?"},{role:"app",text:"Now I'll create the Support page component. Watch the chat area where I'll type the request.",action:async()=>{e.highlightElement("chat-input",{color:"purple",label:"Type here",duration:2e3}),await e.wait(1e3),await e.typeText("chat-input","Create a new Support page with FAQ section")}},{role:"user",text:"Wow, that was easy! Can you show me how it looks?"},{role:"app",text:"The Support page is ready! It includes a header, FAQ accordion, and contact form. You can preview it in the browser."},{role:"user",text:"Perfect, thanks for the help!"},{role:"app",text:"You're welcome! Let me know if you need any other pages or changes."}]}function wit(e){return[{role:"app",text:"Welcome to Cluso! I'm your AI development assistant. Let me show you around.",action:async()=>{await e.wait(500)}},{role:"app",text:"This is the element inspector. Click it to select any element on the page.",action:async()=>{e.highlightElement("inspector-button",{color:"blue",label:"Inspector",duration:3e3})}},{role:"app",text:"And this is where you can chat with me to make changes to your UI.",action:async()=>{e.highlightElement("chat-input",{color:"purple",label:"Chat with AI",duration:3e3})}},{role:"user",text:"That looks great! How do I start voice chat?"},{role:"app",text:"Just click this microphone button to start a voice session with me.",action:async()=>{e.highlightElement("voice-button",{color:"green",label:"Voice Chat",duration:3e3})}}]}async function Eit(e,t,n){let r;switch(e){case"support-page":r=xit(t);break;case"intro":r=wit(t);break;case"custom":r=[];break;default:console.warn("[DemoScript] Unknown demo:",e);return}console.log(`[DemoScript] Running demo: ${e}`),await yit(r),console.log(`[DemoScript] Demo complete: ${e}`)}const Uie=["support-page","intro"],Hie={inspector:"Show me how to use the element inspector to select an element on the page.",voice:"Demonstrate how to start voice chat with the AI.","full-tour":"Give me a full tour of all the main features of Cluso.","edit-workflow":"Show me the workflow for making a UI change to a webpage."};function _it(e={}){const{googleApiKey:t}=e,[n,r]=w.useState(!1),[s,o]=w.useState(!1),[i,a]=w.useState(""),[l,c]=w.useState(null),u=w.useRef(null),f=oit();w.useEffect(()=>{mit(t||"AIzaSyAuAGR2YNrczzJKRcqVr924j71lRqc02IU"),console.log("[ClusoAgent] Gemini TTS initialized with API key");const E={onHighlight:(T,k)=>{console.log("[ClusoAgent] Highlight:",T,k),f.highlightElement(T,k)},onClick:T=>{console.log("[ClusoAgent] Click:",T),f.clickElement(T)},onTooltip:(T,k,I)=>{console.log("[ClusoAgent] Tooltip:",T,k),f.showTooltip(T,{message:k,position:I})},onType:async(T,k)=>{console.log("[ClusoAgent] Type:",T,k),await f.typeText(T,k)},onSpeak:T=>{console.log("[ClusoAgent] Speak (Gemini voice):",T),y9(T)},onWait:T=>(console.log("[ClusoAgent] Wait:",T),f.wait(T))};return u.current=uit(E),r(!0),()=>{u.current=null}},[f,t]);const m=w.useCallback(async x=>{if(!u.current)return c("Agent not initialized"),"Error: Agent not initialized";o(!0),c(null);try{const E=await u.current.chat(x);return a(E),E}catch(E){const T=E instanceof Error?E.message:"Unknown error";return c(T),`Error: ${T}`}finally{o(!1)}},[]),g=w.useCallback(()=>{u.current&&(u.current.reset(),a(""),c(null))},[]),y=w.useCallback(async x=>{const E=Hie[x];if(!E){c(`Unknown demo: ${x}`);return}await m(E)},[m]),v=w.useCallback(async x=>{o(!0),c(null),a(`Running ${x} demo...`);try{await Eit(x,{highlightElement:f.highlightElement,clickElement:f.clickElement,typeText:f.typeText,wait:f.wait}),a(`${x} demo complete!`)}catch(E){const T=E instanceof Error?E.message:"Demo failed";c(T)}finally{o(!1)}},[f]);return{isReady:n,isProcessing:s,lastResponse:i,error:l,chat:m,reset:g,runDemo:y,runScriptedDemo:v,availableScripts:Uie}}const Sit=Object.keys(Hie),Tit={"getting-started":[{id:"gs-1",text:"What would you like to build today?",category:"getting-started",relevance:1},{id:"gs-2",text:"Show me the project structure",category:"getting-started",relevance:.9},{id:"gs-3",text:"Help me understand this codebase",category:"getting-started",relevance:.85},{id:"gs-4",text:"What are the main features?",category:"getting-started",relevance:.8},{id:"gs-5",text:"How do I set up the development environment?",category:"getting-started",relevance:.75}],debugging:[{id:"dbg-1",text:"What error are you seeing?",category:"debugging",relevance:.95},{id:"dbg-2",text:"When did this start happening?",category:"debugging",relevance:.9},{id:"dbg-3",text:"Can you help me debug this?",category:"debugging",relevance:.85},{id:"dbg-4",text:"Why is this component not rendering?",category:"debugging",relevance:.8},{id:"dbg-5",text:"Check the console for errors",category:"debugging",relevance:.75}],"ui-changes":[{id:"ui-1",text:"Which element should I modify?",category:"ui-changes",relevance:.95},{id:"ui-2",text:"What style changes do you want?",category:"ui-changes",relevance:.9},{id:"ui-3",text:"Change the color scheme",category:"ui-changes",relevance:.85},{id:"ui-4",text:"Make this button more prominent",category:"ui-changes",relevance:.8},{id:"ui-5",text:"Improve the spacing and layout",category:"ui-changes",relevance:.75}],"code-review":[{id:"cr-1",text:"What should I look for?",category:"code-review",relevance:.9},{id:"cr-2",text:"Any specific concerns?",category:"code-review",relevance:.85},{id:"cr-3",text:"Review this code for best practices",category:"code-review",relevance:.8},{id:"cr-4",text:"Is this implementation correct?",category:"code-review",relevance:.75},{id:"cr-5",text:"Suggest performance improvements",category:"code-review",relevance:.7}]};function Cit(e){const t=[];if(e.messages.length===0)return t.push({category:"getting-started",weight:1}),t.push({category:"ui-changes",weight:.6}),t;const r=e.messages.slice(-5).map(s=>s.content.toLowerCase()).join(" ");return(r.includes("error")||r.includes("bug")||r.includes("broken")||r.includes("debug")||r.includes("fix"))&&(t.push({category:"debugging",weight:1}),t.push({category:"code-review",weight:.7})),(e.selectedElement||r.includes("style")||r.includes("color")||r.includes("button")||r.includes("layout")||r.includes("spacing"))&&(t.push({category:"ui-changes",weight:1}),e.selectedElement&&t.push({category:"ui-changes",weight:1.2})),(r.includes("review")||r.includes("refactor")||r.includes("improve")||r.includes("optimize"))&&t.push({category:"code-review",weight:1}),t.length===0&&(t.push({category:"getting-started",weight:.5}),t.push({category:"ui-changes",weight:.6})),t}function kit(e,t,n){if(n.has(e.id))return 0;const r=t.get(e.category)||0;return e.relevance*r}function Ait(){const[e,t]=w.useState(new Set),[n,r]=w.useState(null),s=w.useMemo(()=>{if(!n)return[];const l=Cit(n),c=new Map(l.map(m=>[m.category,m.weight]));return Object.values(Tit).flat().map(m=>({...m,score:kit(m,c,e)})).filter(m=>m.score>0).sort((m,g)=>g.score-m.score).slice(0,3).map(({score:m,...g})=>g)},[n,e]),o=w.useCallback(l=>{t(c=>new Set([...c,l]))},[]),i=w.useCallback(l=>{const c=s.find(u=>u.id===l);return c?(o(l),c.text):""},[s,o]),a=w.useCallback(l=>{r(l)},[]);return{questions:s,dismissedQuestions:e,dismissQuestion:o,selectQuestion:i,refreshQuestions:a}}const Nit=({questions:e,onSelectQuestion:t,onDismissQuestion:n,isDarkMode:r=!0,isVisible:s=!0,isEmptyChat:o=!1})=>{const[i,a]=w.useState(new Set),[l,c]=w.useState([]);if(w.useEffect(()=>{c(e)},[e]),!s||l.length===0)return null;const u=m=>{t(m.text)},f=()=>{c([])};return h.jsxs("div",{className:`p-3 rounded-xl shadow-lg transition-all duration-300 ${r?"bg-neutral-800/95 border border-neutral-700 backdrop-blur-sm":"bg-white/95 border border-stone-200 backdrop-blur-sm"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Q_,{size:14,className:r?"text-amber-400":"text-amber-600"}),h.jsx("span",{className:`text-xs font-medium ${r?"text-neutral-400":"text-stone-500"}`,children:"Suggestions"})]}),h.jsx("button",{onClick:f,className:`p-1 rounded-md transition-colors ${r?"hover:bg-neutral-700 text-neutral-500":"hover:bg-stone-100 text-stone-400"}`,title:"Collapse",children:h.jsx(Df,{size:14})})]}),h.jsx("div",{className:"flex flex-wrap gap-1.5",children:l.map(m=>h.jsx("button",{onClick:()=>u(m),className:`px-2.5 py-1 rounded-md text-xs transition-all duration-200 ${i.has(m.id)?"opacity-0 scale-95":"opacity-100 scale-100"} ${r?"bg-neutral-700/80 text-neutral-300 hover:bg-neutral-600 hover:text-white":"bg-stone-100 text-stone-600 hover:bg-stone-200 hover:text-stone-800"}`,children:m.text},m.id))})]})};function Iit(){const e=Date.now(),t=Math.random().toString(36).slice(2,7);return`turn-${e}-${t}`}function Rit(e,t,n){const r=Date.now();if(n instanceof Error){const s=n.message.toLowerCase();return s.includes("timeout")?{id:e,toolName:t,code:"TIMEOUT",message:`Tool "${t}" timed out after 30 seconds. The operation took too long to complete.`,recoveryActions:["Retry the operation","Try a simpler/smaller request","Check your system resources (CPU, memory)","Try again after waiting a moment"],timestamp:r}:s.includes("not found")||s.includes("does not exist")?{id:e,toolName:t,code:"NOT_FOUND",message:`Tool "${t}" is not available or the target resource was not found.`,recoveryActions:["Check that the file or element exists","Verify the path or selector is correct","Restart the application to reload tools","Check the browser console for details"],timestamp:r}:s.includes("validation")||s.includes("invalid")?{id:e,toolName:t,code:"VALIDATION",message:`Invalid input for tool "${t}": ${n.message}`,recoveryActions:["Check the input parameters are correct","Try with different arguments","Review the error message for hints"],timestamp:r}:{id:e,toolName:t,code:"EXECUTION",message:`Tool "${t}" failed: ${n.message}`,recoveryActions:["Retry the operation","Try a different approach","Check the browser console for more details"],timestamp:r}}return{id:e,toolName:t,code:"UNKNOWN",message:`Tool "${t}" encountered an unexpected error: ${String(n)}`,recoveryActions:["Retry the operation","Try reloading the page","Check the browser console for details"],timestamp:r}}function Mit(e){return{title:{TIMEOUT:" Tool Timeout",NOT_FOUND:" Not Found",VALIDATION:" Invalid Input",EXECUTION:" Tool Failed",UNKNOWN:" Unknown Error"}[e.code],description:e.message,actions:e.recoveryActions}}var VA={exports:{}},HH;function Oit(){return HH||(HH=1,(function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,r=1,s=0;t.Diff=function(o,i){return[o,i]},t.prototype.diff_main=function(o,i,a,l){typeof l>"u"&&(this.Diff_Timeout<=0?l=Number.MAX_VALUE:l=new Date().getTime()+this.Diff_Timeout*1e3);var c=l;if(o==null||i==null)throw new Error("Null input. (diff_main)");if(o==i)return o?[new t.Diff(s,o)]:[];typeof a>"u"&&(a=!0);var u=a,f=this.diff_commonPrefix(o,i),m=o.substring(0,f);o=o.substring(f),i=i.substring(f),f=this.diff_commonSuffix(o,i);var g=o.substring(o.length-f);o=o.substring(0,o.length-f),i=i.substring(0,i.length-f);var y=this.diff_compute_(o,i,u,c);return m&&y.unshift(new t.Diff(s,m)),g&&y.push(new t.Diff(s,g)),this.diff_cleanupMerge(y),y},t.prototype.diff_compute_=function(o,i,a,l){var c;if(!o)return[new t.Diff(r,i)];if(!i)return[new t.Diff(n,o)];var u=o.length>i.length?o:i,f=o.length>i.length?i:o,m=u.indexOf(f);if(m!=-1)return c=[new t.Diff(r,u.substring(0,m)),new t.Diff(s,f),new t.Diff(r,u.substring(m+f.length))],o.length>i.length&&(c[0][0]=c[2][0]=n),c;if(f.length==1)return[new t.Diff(n,o),new t.Diff(r,i)];var g=this.diff_halfMatch_(o,i);if(g){var y=g[0],v=g[1],x=g[2],E=g[3],T=g[4],k=this.diff_main(y,x,a,l),I=this.diff_main(v,E,a,l);return k.concat([new t.Diff(s,T)],I)}return a&&o.length>100&&i.length>100?this.diff_lineMode_(o,i,l):this.diff_bisect_(o,i,l)},t.prototype.diff_lineMode_=function(o,i,a){var l=this.diff_linesToChars_(o,i);o=l.chars1,i=l.chars2;var c=l.lineArray,u=this.diff_main(o,i,!1,a);this.diff_charsToLines_(u,c),this.diff_cleanupSemantic(u),u.push(new t.Diff(s,""));for(var f=0,m=0,g=0,y="",v="";f<u.length;){switch(u[f][0]){case r:g++,v+=u[f][1];break;case n:m++,y+=u[f][1];break;case s:if(m>=1&&g>=1){u.splice(f-m-g,m+g),f=f-m-g;for(var x=this.diff_main(y,v,!1,a),E=x.length-1;E>=0;E--)u.splice(f,0,x[E]);f=f+x.length}g=0,m=0,y="",v="";break}f++}return u.pop(),u},t.prototype.diff_bisect_=function(o,i,a){for(var l=o.length,c=i.length,u=Math.ceil((l+c)/2),f=u,m=2*u,g=new Array(m),y=new Array(m),v=0;v<m;v++)g[v]=-1,y[v]=-1;g[f+1]=0,y[f+1]=0;for(var x=l-c,E=x%2!=0,T=0,k=0,I=0,O=0,M=0;M<u&&!(new Date().getTime()>a);M++){for(var P=-M+T;P<=M-k;P+=2){var j=f+P,V;P==-M||P!=M&&g[j-1]<g[j+1]?V=g[j+1]:V=g[j-1]+1;for(var U=V-P;V<l&&U<c&&o.charAt(V)==i.charAt(U);)V++,U++;if(g[j]=V,V>l)k+=2;else if(U>c)T+=2;else if(E){var z=f+x-P;if(z>=0&&z<m&&y[z]!=-1){var H=l-y[z];if(V>=H)return this.diff_bisectSplit_(o,i,V,U,a)}}}for(var F=-M+I;F<=M-O;F+=2){var z=f+F,H;F==-M||F!=M&&y[z-1]<y[z+1]?H=y[z+1]:H=y[z-1]+1;for(var G=H-F;H<l&&G<c&&o.charAt(l-H-1)==i.charAt(c-G-1);)H++,G++;if(y[z]=H,H>l)O+=2;else if(G>c)I+=2;else if(!E){var j=f+x-F;if(j>=0&&j<m&&g[j]!=-1){var V=g[j],U=f+V-j;if(H=l-H,V>=H)return this.diff_bisectSplit_(o,i,V,U,a)}}}}return[new t.Diff(n,o),new t.Diff(r,i)]},t.prototype.diff_bisectSplit_=function(o,i,a,l,c){var u=o.substring(0,a),f=i.substring(0,l),m=o.substring(a),g=i.substring(l),y=this.diff_main(u,f,!1,c),v=this.diff_main(m,g,!1,c);return y.concat(v)},t.prototype.diff_linesToChars_=function(o,i){var a=[],l={};a[0]="";function c(g){for(var y="",v=0,x=-1,E=a.length;x<g.length-1;){x=g.indexOf(`
`,v),x==-1&&(x=g.length-1);var T=g.substring(v,x+1);(l.hasOwnProperty?l.hasOwnProperty(T):l[T]!==void 0)?y+=String.fromCharCode(l[T]):(E==u&&(T=g.substring(v),x=g.length),y+=String.fromCharCode(E),l[T]=E,a[E++]=T),v=x+1}return y}var u=4e4,f=c(o);u=65535;var m=c(i);return{chars1:f,chars2:m,lineArray:a}},t.prototype.diff_charsToLines_=function(o,i){for(var a=0;a<o.length;a++){for(var l=o[a][1],c=[],u=0;u<l.length;u++)c[u]=i[l.charCodeAt(u)];o[a][1]=c.join("")}},t.prototype.diff_commonPrefix=function(o,i){if(!o||!i||o.charAt(0)!=i.charAt(0))return 0;for(var a=0,l=Math.min(o.length,i.length),c=l,u=0;a<c;)o.substring(u,c)==i.substring(u,c)?(a=c,u=a):l=c,c=Math.floor((l-a)/2+a);return c},t.prototype.diff_commonSuffix=function(o,i){if(!o||!i||o.charAt(o.length-1)!=i.charAt(i.length-1))return 0;for(var a=0,l=Math.min(o.length,i.length),c=l,u=0;a<c;)o.substring(o.length-c,o.length-u)==i.substring(i.length-c,i.length-u)?(a=c,u=a):l=c,c=Math.floor((l-a)/2+a);return c},t.prototype.diff_commonOverlap_=function(o,i){var a=o.length,l=i.length;if(a==0||l==0)return 0;a>l?o=o.substring(a-l):a<l&&(i=i.substring(0,a));var c=Math.min(a,l);if(o==i)return c;for(var u=0,f=1;;){var m=o.substring(c-f),g=i.indexOf(m);if(g==-1)return u;f+=g,(g==0||o.substring(c-f)==i.substring(0,f))&&(u=f,f++)}},t.prototype.diff_halfMatch_=function(o,i){if(this.Diff_Timeout<=0)return null;var a=o.length>i.length?o:i,l=o.length>i.length?i:o;if(a.length<4||l.length*2<a.length)return null;var c=this;function u(k,I,O){for(var M=k.substring(O,O+Math.floor(k.length/4)),P=-1,j="",V,U,z,H;(P=I.indexOf(M,P+1))!=-1;){var F=c.diff_commonPrefix(k.substring(O),I.substring(P)),G=c.diff_commonSuffix(k.substring(0,O),I.substring(0,P));j.length<G+F&&(j=I.substring(P-G,P)+I.substring(P,P+F),V=k.substring(0,O-G),U=k.substring(O+F),z=I.substring(0,P-G),H=I.substring(P+F))}return j.length*2>=k.length?[V,U,z,H,j]:null}var f=u(a,l,Math.ceil(a.length/4)),m=u(a,l,Math.ceil(a.length/2)),g;if(!f&&!m)return null;m?f?g=f[4].length>m[4].length?f:m:g=m:g=f;var y,v,x,E;o.length>i.length?(y=g[0],v=g[1],x=g[2],E=g[3]):(x=g[0],E=g[1],y=g[2],v=g[3]);var T=g[4];return[y,v,x,E,T]},t.prototype.diff_cleanupSemantic=function(o){for(var i=!1,a=[],l=0,c=null,u=0,f=0,m=0,g=0,y=0;u<o.length;)o[u][0]==s?(a[l++]=u,f=g,m=y,g=0,y=0,c=o[u][1]):(o[u][0]==r?g+=o[u][1].length:y+=o[u][1].length,c&&c.length<=Math.max(f,m)&&c.length<=Math.max(g,y)&&(o.splice(a[l-1],0,new t.Diff(n,c)),o[a[l-1]+1][0]=r,l--,l--,u=l>0?a[l-1]:-1,f=0,m=0,g=0,y=0,c=null,i=!0)),u++;for(i&&this.diff_cleanupMerge(o),this.diff_cleanupSemanticLossless(o),u=1;u<o.length;){if(o[u-1][0]==n&&o[u][0]==r){var v=o[u-1][1],x=o[u][1],E=this.diff_commonOverlap_(v,x),T=this.diff_commonOverlap_(x,v);E>=T?(E>=v.length/2||E>=x.length/2)&&(o.splice(u,0,new t.Diff(s,x.substring(0,E))),o[u-1][1]=v.substring(0,v.length-E),o[u+1][1]=x.substring(E),u++):(T>=v.length/2||T>=x.length/2)&&(o.splice(u,0,new t.Diff(s,v.substring(0,T))),o[u-1][0]=r,o[u-1][1]=x.substring(0,x.length-T),o[u+1][0]=n,o[u+1][1]=v.substring(T),u++),u++}u++}},t.prototype.diff_cleanupSemanticLossless=function(o){function i(T,k){if(!T||!k)return 6;var I=T.charAt(T.length-1),O=k.charAt(0),M=I.match(t.nonAlphaNumericRegex_),P=O.match(t.nonAlphaNumericRegex_),j=M&&I.match(t.whitespaceRegex_),V=P&&O.match(t.whitespaceRegex_),U=j&&I.match(t.linebreakRegex_),z=V&&O.match(t.linebreakRegex_),H=U&&T.match(t.blanklineEndRegex_),F=z&&k.match(t.blanklineStartRegex_);return H||F?5:U||z?4:M&&!j&&V?3:j||V?2:M||P?1:0}for(var a=1;a<o.length-1;){if(o[a-1][0]==s&&o[a+1][0]==s){var l=o[a-1][1],c=o[a][1],u=o[a+1][1],f=this.diff_commonSuffix(l,c);if(f){var m=c.substring(c.length-f);l=l.substring(0,l.length-f),c=m+c.substring(0,c.length-f),u=m+u}for(var g=l,y=c,v=u,x=i(l,c)+i(c,u);c.charAt(0)===u.charAt(0);){l+=c.charAt(0),c=c.substring(1)+u.charAt(0),u=u.substring(1);var E=i(l,c)+i(c,u);E>=x&&(x=E,g=l,y=c,v=u)}o[a-1][1]!=g&&(g?o[a-1][1]=g:(o.splice(a-1,1),a--),o[a][1]=y,v?o[a+1][1]=v:(o.splice(a+1,1),a--))}a++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(o){for(var i=!1,a=[],l=0,c=null,u=0,f=!1,m=!1,g=!1,y=!1;u<o.length;)o[u][0]==s?(o[u][1].length<this.Diff_EditCost&&(g||y)?(a[l++]=u,f=g,m=y,c=o[u][1]):(l=0,c=null),g=y=!1):(o[u][0]==n?y=!0:g=!0,c&&(f&&m&&g&&y||c.length<this.Diff_EditCost/2&&f+m+g+y==3)&&(o.splice(a[l-1],0,new t.Diff(n,c)),o[a[l-1]+1][0]=r,l--,c=null,f&&m?(g=y=!0,l=0):(l--,u=l>0?a[l-1]:-1,g=y=!1),i=!0)),u++;i&&this.diff_cleanupMerge(o)},t.prototype.diff_cleanupMerge=function(o){o.push(new t.Diff(s,""));for(var i=0,a=0,l=0,c="",u="",f;i<o.length;)switch(o[i][0]){case r:l++,u+=o[i][1],i++;break;case n:a++,c+=o[i][1],i++;break;case s:a+l>1?(a!==0&&l!==0&&(f=this.diff_commonPrefix(u,c),f!==0&&(i-a-l>0&&o[i-a-l-1][0]==s?o[i-a-l-1][1]+=u.substring(0,f):(o.splice(0,0,new t.Diff(s,u.substring(0,f))),i++),u=u.substring(f),c=c.substring(f)),f=this.diff_commonSuffix(u,c),f!==0&&(o[i][1]=u.substring(u.length-f)+o[i][1],u=u.substring(0,u.length-f),c=c.substring(0,c.length-f))),i-=a+l,o.splice(i,a+l),c.length&&(o.splice(i,0,new t.Diff(n,c)),i++),u.length&&(o.splice(i,0,new t.Diff(r,u)),i++),i++):i!==0&&o[i-1][0]==s?(o[i-1][1]+=o[i][1],o.splice(i,1)):i++,l=0,a=0,c="",u="";break}o[o.length-1][1]===""&&o.pop();var m=!1;for(i=1;i<o.length-1;)o[i-1][0]==s&&o[i+1][0]==s&&(o[i][1].substring(o[i][1].length-o[i-1][1].length)==o[i-1][1]?(o[i][1]=o[i-1][1]+o[i][1].substring(0,o[i][1].length-o[i-1][1].length),o[i+1][1]=o[i-1][1]+o[i+1][1],o.splice(i-1,1),m=!0):o[i][1].substring(0,o[i+1][1].length)==o[i+1][1]&&(o[i-1][1]+=o[i+1][1],o[i][1]=o[i][1].substring(o[i+1][1].length)+o[i+1][1],o.splice(i+1,1),m=!0)),i++;m&&this.diff_cleanupMerge(o)},t.prototype.diff_xIndex=function(o,i){var a=0,l=0,c=0,u=0,f;for(f=0;f<o.length&&(o[f][0]!==r&&(a+=o[f][1].length),o[f][0]!==n&&(l+=o[f][1].length),!(a>i));f++)c=a,u=l;return o.length!=f&&o[f][0]===n?u:u+(i-c)},t.prototype.diff_prettyHtml=function(o){for(var i=[],a=/&/g,l=/</g,c=/>/g,u=/\n/g,f=0;f<o.length;f++){var m=o[f][0],g=o[f][1],y=g.replace(a,"&amp;").replace(l,"&lt;").replace(c,"&gt;").replace(u,"&para;<br>");switch(m){case r:i[f]='<ins style="background:#e6ffe6;">'+y+"</ins>";break;case n:i[f]='<del style="background:#ffe6e6;">'+y+"</del>";break;case s:i[f]="<span>"+y+"</span>";break}}return i.join("")},t.prototype.diff_text1=function(o){for(var i=[],a=0;a<o.length;a++)o[a][0]!==r&&(i[a]=o[a][1]);return i.join("")},t.prototype.diff_text2=function(o){for(var i=[],a=0;a<o.length;a++)o[a][0]!==n&&(i[a]=o[a][1]);return i.join("")},t.prototype.diff_levenshtein=function(o){for(var i=0,a=0,l=0,c=0;c<o.length;c++){var u=o[c][0],f=o[c][1];switch(u){case r:a+=f.length;break;case n:l+=f.length;break;case s:i+=Math.max(a,l),a=0,l=0;break}}return i+=Math.max(a,l),i},t.prototype.diff_toDelta=function(o){for(var i=[],a=0;a<o.length;a++)switch(o[a][0]){case r:i[a]="+"+encodeURI(o[a][1]);break;case n:i[a]="-"+o[a][1].length;break;case s:i[a]="="+o[a][1].length;break}return i.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(o,i){for(var a=[],l=0,c=0,u=i.split(/\t/g),f=0;f<u.length;f++){var m=u[f].substring(1);switch(u[f].charAt(0)){case"+":try{a[l++]=new t.Diff(r,decodeURI(m))}catch{throw new Error("Illegal escape in diff_fromDelta: "+m)}break;case"-":case"=":var g=parseInt(m,10);if(isNaN(g)||g<0)throw new Error("Invalid number in diff_fromDelta: "+m);var y=o.substring(c,c+=g);u[f].charAt(0)=="="?a[l++]=new t.Diff(s,y):a[l++]=new t.Diff(n,y);break;default:if(u[f])throw new Error("Invalid diff operation in diff_fromDelta: "+u[f])}}if(c!=o.length)throw new Error("Delta length ("+c+") does not equal source text length ("+o.length+").");return a},t.prototype.match_main=function(o,i,a){if(o==null||i==null||a==null)throw new Error("Null input. (match_main)");return a=Math.max(0,Math.min(a,o.length)),o==i?0:o.length?o.substring(a,a+i.length)==i?a:this.match_bitap_(o,i,a):-1},t.prototype.match_bitap_=function(o,i,a){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var l=this.match_alphabet_(i),c=this;function u(V,U){var z=V/i.length,H=Math.abs(a-U);return c.Match_Distance?z+H/c.Match_Distance:H?1:z}var f=this.Match_Threshold,m=o.indexOf(i,a);m!=-1&&(f=Math.min(u(0,m),f),m=o.lastIndexOf(i,a+i.length),m!=-1&&(f=Math.min(u(0,m),f)));var g=1<<i.length-1;m=-1;for(var y,v,x=i.length+o.length,E,T=0;T<i.length;T++){for(y=0,v=x;y<v;)u(T,a+v)<=f?y=v:x=v,v=Math.floor((x-y)/2+y);x=v;var k=Math.max(1,a-v+1),I=Math.min(a+v,o.length)+i.length,O=Array(I+2);O[I+1]=(1<<T)-1;for(var M=I;M>=k;M--){var P=l[o.charAt(M-1)];if(T===0?O[M]=(O[M+1]<<1|1)&P:O[M]=(O[M+1]<<1|1)&P|((E[M+1]|E[M])<<1|1)|E[M+1],O[M]&g){var j=u(T,M-1);if(j<=f)if(f=j,m=M-1,m>a)k=Math.max(1,2*a-m);else break}}if(u(T+1,a)>f)break;E=O}return m},t.prototype.match_alphabet_=function(o){for(var i={},a=0;a<o.length;a++)i[o.charAt(a)]=0;for(var a=0;a<o.length;a++)i[o.charAt(a)]|=1<<o.length-a-1;return i},t.prototype.patch_addContext_=function(o,i){if(i.length!=0){if(o.start2===null)throw Error("patch not initialized");for(var a=i.substring(o.start2,o.start2+o.length1),l=0;i.indexOf(a)!=i.lastIndexOf(a)&&a.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,a=i.substring(o.start2-l,o.start2+o.length1+l);l+=this.Patch_Margin;var c=i.substring(o.start2-l,o.start2);c&&o.diffs.unshift(new t.Diff(s,c));var u=i.substring(o.start2+o.length1,o.start2+o.length1+l);u&&o.diffs.push(new t.Diff(s,u)),o.start1-=c.length,o.start2-=c.length,o.length1+=c.length+u.length,o.length2+=c.length+u.length}},t.prototype.patch_make=function(o,i,a){var l,c;if(typeof o=="string"&&typeof i=="string"&&typeof a>"u")l=o,c=this.diff_main(l,i,!0),c.length>2&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(o&&typeof o=="object"&&typeof i>"u"&&typeof a>"u")c=o,l=this.diff_text1(c);else if(typeof o=="string"&&i&&typeof i=="object"&&typeof a>"u")l=o,c=i;else if(typeof o=="string"&&typeof i=="string"&&a&&typeof a=="object")l=o,c=a;else throw new Error("Unknown call format to patch_make.");if(c.length===0)return[];for(var u=[],f=new t.patch_obj,m=0,g=0,y=0,v=l,x=l,E=0;E<c.length;E++){var T=c[E][0],k=c[E][1];switch(!m&&T!==s&&(f.start1=g,f.start2=y),T){case r:f.diffs[m++]=c[E],f.length2+=k.length,x=x.substring(0,y)+k+x.substring(y);break;case n:f.length1+=k.length,f.diffs[m++]=c[E],x=x.substring(0,y)+x.substring(y+k.length);break;case s:k.length<=2*this.Patch_Margin&&m&&c.length!=E+1?(f.diffs[m++]=c[E],f.length1+=k.length,f.length2+=k.length):k.length>=2*this.Patch_Margin&&m&&(this.patch_addContext_(f,v),u.push(f),f=new t.patch_obj,m=0,v=x,g=y);break}T!==r&&(g+=k.length),T!==n&&(y+=k.length)}return m&&(this.patch_addContext_(f,v),u.push(f)),u},t.prototype.patch_deepCopy=function(o){for(var i=[],a=0;a<o.length;a++){var l=o[a],c=new t.patch_obj;c.diffs=[];for(var u=0;u<l.diffs.length;u++)c.diffs[u]=new t.Diff(l.diffs[u][0],l.diffs[u][1]);c.start1=l.start1,c.start2=l.start2,c.length1=l.length1,c.length2=l.length2,i[a]=c}return i},t.prototype.patch_apply=function(o,i){if(o.length==0)return[i,[]];o=this.patch_deepCopy(o);var a=this.patch_addPadding(o);i=a+i+a,this.patch_splitMax(o);for(var l=0,c=[],u=0;u<o.length;u++){var f=o[u].start2+l,m=this.diff_text1(o[u].diffs),g,y=-1;if(m.length>this.Match_MaxBits?(g=this.match_main(i,m.substring(0,this.Match_MaxBits),f),g!=-1&&(y=this.match_main(i,m.substring(m.length-this.Match_MaxBits),f+m.length-this.Match_MaxBits),(y==-1||g>=y)&&(g=-1))):g=this.match_main(i,m,f),g==-1)c[u]=!1,l-=o[u].length2-o[u].length1;else{c[u]=!0,l=g-f;var v;if(y==-1?v=i.substring(g,g+m.length):v=i.substring(g,y+this.Match_MaxBits),m==v)i=i.substring(0,g)+this.diff_text2(o[u].diffs)+i.substring(g+m.length);else{var x=this.diff_main(m,v,!1);if(m.length>this.Match_MaxBits&&this.diff_levenshtein(x)/m.length>this.Patch_DeleteThreshold)c[u]=!1;else{this.diff_cleanupSemanticLossless(x);for(var E=0,T,k=0;k<o[u].diffs.length;k++){var I=o[u].diffs[k];I[0]!==s&&(T=this.diff_xIndex(x,E)),I[0]===r?i=i.substring(0,g+T)+I[1]+i.substring(g+T):I[0]===n&&(i=i.substring(0,g+T)+i.substring(g+this.diff_xIndex(x,E+I[1].length))),I[0]!==n&&(E+=I[1].length)}}}}}return i=i.substring(a.length,i.length-a.length),[i,c]},t.prototype.patch_addPadding=function(o){for(var i=this.Patch_Margin,a="",l=1;l<=i;l++)a+=String.fromCharCode(l);for(var l=0;l<o.length;l++)o[l].start1+=i,o[l].start2+=i;var c=o[0],u=c.diffs;if(u.length==0||u[0][0]!=s)u.unshift(new t.Diff(s,a)),c.start1-=i,c.start2-=i,c.length1+=i,c.length2+=i;else if(i>u[0][1].length){var f=i-u[0][1].length;u[0][1]=a.substring(u[0][1].length)+u[0][1],c.start1-=f,c.start2-=f,c.length1+=f,c.length2+=f}if(c=o[o.length-1],u=c.diffs,u.length==0||u[u.length-1][0]!=s)u.push(new t.Diff(s,a)),c.length1+=i,c.length2+=i;else if(i>u[u.length-1][1].length){var f=i-u[u.length-1][1].length;u[u.length-1][1]+=a.substring(0,f),c.length1+=f,c.length2+=f}return a},t.prototype.patch_splitMax=function(o){for(var i=this.Match_MaxBits,a=0;a<o.length;a++)if(!(o[a].length1<=i)){var l=o[a];o.splice(a--,1);for(var c=l.start1,u=l.start2,f="";l.diffs.length!==0;){var m=new t.patch_obj,g=!0;for(m.start1=c-f.length,m.start2=u-f.length,f!==""&&(m.length1=m.length2=f.length,m.diffs.push(new t.Diff(s,f)));l.diffs.length!==0&&m.length1<i-this.Patch_Margin;){var y=l.diffs[0][0],v=l.diffs[0][1];y===r?(m.length2+=v.length,u+=v.length,m.diffs.push(l.diffs.shift()),g=!1):y===n&&m.diffs.length==1&&m.diffs[0][0]==s&&v.length>2*i?(m.length1+=v.length,c+=v.length,g=!1,m.diffs.push(new t.Diff(y,v)),l.diffs.shift()):(v=v.substring(0,i-m.length1-this.Patch_Margin),m.length1+=v.length,c+=v.length,y===s?(m.length2+=v.length,u+=v.length):g=!1,m.diffs.push(new t.Diff(y,v)),v==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(v.length))}f=this.diff_text2(m.diffs),f=f.substring(f.length-this.Patch_Margin);var x=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);x!==""&&(m.length1+=x.length,m.length2+=x.length,m.diffs.length!==0&&m.diffs[m.diffs.length-1][0]===s?m.diffs[m.diffs.length-1][1]+=x:m.diffs.push(new t.Diff(s,x))),g||o.splice(++a,0,m)}}},t.prototype.patch_toText=function(o){for(var i=[],a=0;a<o.length;a++)i[a]=o[a];return i.join("")},t.prototype.patch_fromText=function(o){var i=[];if(!o)return i;for(var a=o.split(`
`),l=0,c=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<a.length;){var u=a[l].match(c);if(!u)throw new Error("Invalid patch string: "+a[l]);var f=new t.patch_obj;for(i.push(f),f.start1=parseInt(u[1],10),u[2]===""?(f.start1--,f.length1=1):u[2]=="0"?f.length1=0:(f.start1--,f.length1=parseInt(u[2],10)),f.start2=parseInt(u[3],10),u[4]===""?(f.start2--,f.length2=1):u[4]=="0"?f.length2=0:(f.start2--,f.length2=parseInt(u[4],10)),l++;l<a.length;){var m=a[l].charAt(0);try{var g=decodeURI(a[l].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+g)}if(m=="-")f.diffs.push(new t.Diff(n,g));else if(m=="+")f.diffs.push(new t.Diff(r,g));else if(m==" ")f.diffs.push(new t.Diff(s,g));else{if(m=="@")break;if(m!=="")throw new Error('Invalid patch mode "'+m+'" in: '+g)}l++}}return i},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var o,i;this.length1===0?o=this.start1+",0":this.length1==1?o=this.start1+1:o=this.start1+1+","+this.length1,this.length2===0?i=this.start2+",0":this.length2==1?i=this.start2+1:i=this.start2+1+","+this.length2;for(var a=["@@ -"+o+" +"+i+` @@
`],l,c=0;c<this.diffs.length;c++){switch(this.diffs[c][0]){case r:l="+";break;case n:l="-";break;case s:l=" ";break}a[c+1]=l+encodeURI(this.diffs[c][1])+`
`}return a.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=r,e.exports.DIFF_EQUAL=s})(VA)),VA.exports}var Dit=Oit();const Pit=Cm(Dit),VH=new Pit;function Lit(e,t){const n=VH.diff_main(e,t);return VH.diff_cleanup_semantic(n),{before:e,after:t,diffs:n}}function qA(e,t,n,r){const s=`patch-decisions-${e}`,o=JSON.parse(localStorage.getItem(s)||"[]");o.push({filePath:t,timestamp:Date.now(),decision:n,changeType:r}),o.length>100&&o.shift(),localStorage.setItem(s,JSON.stringify(o))}function $it(e){var r;const t=((r=e.split(".").pop())==null?void 0:r.toLowerCase())||"";return{js:"javascript",jsx:"javascript",mjs:"javascript",cjs:"javascript",ts:"typescript",tsx:"typescript",mts:"typescript",cts:"typescript",py:"python",pyw:"python",pyi:"python",go:"go",rs:"rust",java:"java",cpp:"cpp",cc:"cpp",cxx:"cpp",c:"c",h:"c",hpp:"cpp",html:"html",htm:"html",vue:"vue",css:"css",scss:"scss",sass:"sass",less:"less",json:"json",jsonc:"jsonc",yaml:"yaml",yml:"yaml",md:"markdown",mdx:"mdx",xml:"xml",sql:"sql",sh:"bash",bash:"bash",zsh:"bash",fish:"fish",ps1:"powershell",rb:"ruby",erb:"ruby",php:"php",swift:"swift",kt:"kotlin",kts:"kotlin",scala:"scala",clj:"clojure",cljs:"clojure",edn:"clojure",elm:"elm",ex:"elixir",exs:"elixir",erl:"erlang",hrl:"erlang",fs:"fsharp",fsi:"fsharp",fsx:"fsharp",ml:"ocaml",mli:"ocaml",pl:"perl",pm:"perl",t:"perl",r:"r",R:"r",rmd:"rmarkdown",groovy:"groovy",gradle:"groovy",nix:"nix",dhall:"dhall",hcl:"hcl",tf:"hcl",dart:"dart",lua:"lua",vim:"vim",vimrc:"vim",lisp:"lisp",cl:"lisp",el:"lisp",scm:"scheme",rkt:"racket",jl:"julia",hs:"haskell",lhs:"haskell",purescript:"purescript",purs:"purescript",pyx:"cython",pxd:"cython",pxi:"cython",proto:"protobuf",thrift:"thrift",graphql:"graphql",gql:"graphql",dockerfile:"dockerfile",Dockerfile:"dockerfile","docker-compose.yml":"yaml","docker-compose.yaml":"yaml",makefile:"makefile",Makefile:"makefile",cmake:"cmake","CMakeLists.txt":"cmake",gradle:"gradle",maven:"xml","pom.xml":"xml",nuget:"xml","packages.config":"xml",gemfile:"ruby",Gemfile:"ruby","Gemfile.lock":"ruby",podfile:"ruby",Podfile:"ruby",cartfile:"plaintext",Cartfile:"plaintext","requirements.txt":"plaintext","setup.py":"python","setup.cfg":"ini","pyproject.toml":"toml","tox.ini":"ini","pytest.ini":"ini","package.json":"json","package-lock.json":"json","yarn.lock":"plaintext","pnpm-lock.yaml":"yaml","tsconfig.json":"json","jest.config.js":"javascript","webpack.config.js":"javascript","vite.config.js":"javascript","vite.config.ts":"typescript",env:"plaintext",".env":"plaintext",".env.local":"plaintext",".env.example":"plaintext",editorconfig:"ini",".editorconfig":"ini",gitignore:"plaintext",".gitignore":"plaintext",npmignore:"plaintext",".npmignore":"plaintext",prettierignore:"plaintext",".prettierignore":"plaintext",eslintignore:"plaintext",".eslintignore":"plaintext",prettierrc:"json",".prettierrc":"json","prettierrc.json":"json",".prettierrc.json":"json","prettierrc.yaml":"yaml",".prettierrc.yaml":"yaml","prettierrc.yml":"yaml",".prettierrc.yml":"yaml","prettierrc.js":"javascript",".prettierrc.js":"javascript",eslintrc:"json",".eslintrc":"json","eslintrc.json":"json",".eslintrc.json":"json","eslintrc.yaml":"yaml",".eslintrc.yaml":"yaml","eslintrc.yml":"yaml",".eslintrc.yml":"yaml","eslintrc.js":"javascript",".eslintrc.js":"javascript",babelrc:"json",".babelrc":"json","babelrc.json":"json",".babelrc.json":"json","babelrc.js":"javascript",".babelrc.js":"javascript"}[t]||"plaintext"}const Fit=({before:e,after:t,language:n})=>h.jsxs("div",{className:"grid grid-cols-2 gap-4 min-h-[200px] max-h-[500px]",children:[h.jsxs("div",{className:"rounded-lg border border-neutral-700 bg-neutral-900/50 overflow-hidden flex flex-col",children:[h.jsx("div",{className:"bg-neutral-800/80 px-4 py-2 border-b border-neutral-700",children:h.jsx("h3",{className:"text-sm font-semibold text-neutral-300",children:"Before"})}),h.jsx("div",{className:"flex-1 overflow-auto",children:h.jsx(uI,{code:e,language:n,showLineNumbers:!0,isDarkMode:!0,className:"!bg-transparent !p-0 text-sm"})})]}),h.jsxs("div",{className:"rounded-lg border border-neutral-700 bg-neutral-900/50 overflow-hidden flex flex-col",children:[h.jsx("div",{className:"bg-neutral-800/80 px-4 py-2 border-b border-neutral-700",children:h.jsx("h3",{className:"text-sm font-semibold text-neutral-300",children:"After"})}),h.jsx("div",{className:"flex-1 overflow-auto",children:h.jsx(uI,{code:t,language:n,showLineNumbers:!0,isDarkMode:!0,className:"!bg-transparent !p-0 text-sm"})})]})]}),Bit=({diff:e,language:t})=>{const n=e.diffs.map(([r,s])=>s.split(`
`).filter(i=>i).map(i=>({type:r,text:i}))).flat();return h.jsx("div",{className:"rounded-lg border border-neutral-700 bg-neutral-900/50 overflow-auto max-h-[500px]",children:h.jsx("div",{className:"text-sm font-mono",children:n.map((r,s)=>h.jsxs("div",{className:`px-4 py-1 ${r.type===1?"bg-green-900/20 text-green-200":r.type===-1?"bg-red-900/20 text-red-200":"text-neutral-400"}`,children:[h.jsx("span",{className:"mr-3 text-neutral-600",children:r.type===1?"+":r.type===-1?"-":" "}),r.text]},s))})})},zit=({patch:e,onApprove:t,onReject:n,onEdit:r,projectPath:s="default",isOpen:o,totalPatches:i=0,currentPatchIndex:a=0})=>{const[l,c]=w.useState(!1),[u,f]=w.useState(!1),m=e?Lit(e.originalContent,e.patchedContent):null,g=e?$it(e.filePath):"plaintext";w.useEffect(()=>{if(!o||!e)return;const k=I=>{(I.metaKey||I.ctrlKey)&&I.key==="y"&&(I.preventDefault(),y()),(I.metaKey||I.ctrlKey)&&I.key==="n"&&(I.preventDefault(),v()),(I.metaKey||I.ctrlKey)&&I.key==="e"&&(I.preventDefault(),x()),I.key==="Escape"&&(I.preventDefault(),v())};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[o,e]);const y=w.useCallback(()=>{e&&(f(!0),qA(s,e.filePath,"accept","code-change"),setTimeout(()=>{t(e),f(!1)},300))},[e,t,s]),v=w.useCallback(()=>{e&&(f(!0),qA(s,e.filePath,"reject","code-change"),setTimeout(()=>{n(e),f(!1)},300))},[e,n,s]),x=w.useCallback(()=>{e&&(f(!0),qA(s,e.filePath,"edit","code-change"),setTimeout(()=>{r(e),f(!1)},300))},[e,r,s]);if(!o||!e||!m)return null;e.filePath.split("/").pop();const E=e.patchedContent.length,T=m.diffs.filter(([k])=>k!==0).length;return h.jsx("div",{className:`fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 transition-opacity duration-300 ${u?"opacity-0":"opacity-100"}`,children:h.jsxs("div",{className:`bg-neutral-900 border border-neutral-700 rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col transition-all duration-300 ${u?"scale-95 opacity-0":"scale-100 opacity-100"}`,children:[h.jsxs("div",{className:"border-b border-neutral-700 bg-neutral-800/50 px-6 py-4 flex items-start justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-semibold text-white mb-1",children:"Review Code Change"}),h.jsxs("p",{className:"text-sm text-neutral-400",children:["File: ",h.jsx("code",{className:"bg-neutral-800 px-2 py-1 rounded",children:e.filePath})]}),h.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:[T," lines changed  ",E," bytes",i>1&&`  Patch ${a+1} of ${i}`]})]}),i>1&&h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[a+1,"/",i]}),h.jsx("p",{className:"text-xs text-neutral-500",children:"remaining patches"})]})]}),h.jsxs("div",{className:"border-b border-neutral-700 bg-neutral-900/30 px-6 py-2 flex items-center gap-2",children:[h.jsx("button",{onClick:()=>c(!1),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${l?"text-neutral-400 hover:text-neutral-200":"bg-blue-600 text-white"}`,children:"Side-by-Side"}),h.jsx("button",{onClick:()=>c(!0),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${l?"bg-blue-600 text-white":"text-neutral-400 hover:text-neutral-200"}`,children:"Inline"})]}),h.jsx("div",{className:"flex-1 overflow-auto p-6",children:l?h.jsx(Bit,{diff:m,language:g}):h.jsx(Fit,{before:e.originalContent,after:e.patchedContent,language:g})}),h.jsxs("div",{className:"border-t border-neutral-700 bg-neutral-800/50 px-6 py-4 flex items-center justify-between gap-3",children:[h.jsx("div",{className:"text-xs text-neutral-500",children:h.jsx("p",{children:"Y = Accept  N = Reject  E = Edit  ESC = Reject"})}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:v,className:"px-4 py-2 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600/30 transition-colors flex items-center gap-2 font-medium",children:[h.jsx(qr,{className:"w-4 h-4"}),"Reject"]}),h.jsxs("button",{onClick:x,className:"px-4 py-2 rounded-lg bg-amber-600/20 text-amber-400 hover:bg-amber-600/30 transition-colors flex items-center gap-2 font-medium",children:[h.jsx(eS,{className:"w-4 h-4"}),"Edit"]}),h.jsxs("button",{onClick:y,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-500 transition-colors flex items-center gap-2 font-medium shadow-lg shadow-green-600/30",children:[h.jsx(Ts,{className:"w-4 h-4"}),"Accept"]})]})]})]})})};var Vie="vercel.ai.error",jit=Symbol.for(Vie),qie,Uit=class Gie extends Error{constructor({name:t,message:n,cause:r}){super(n),this[qie]=!0,this.name=t,this.cause=r}static isInstance(t){return Gie.hasMarker(t,Vie)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};qie=jit;var Sr=Uit,Wie="AI_APICallError",Yie=`vercel.ai.error.${Wie}`,Hit=Symbol.for(Yie),Kie,La=class extends Sr{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:s,responseBody:o,cause:i,isRetryable:a=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:Wie,message:e,cause:i}),this[Kie]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=s,this.responseBody=o,this.isRetryable=a,this.data=l}static isInstance(e){return Sr.hasMarker(e,Yie)}};Kie=Hit;var Zie="AI_EmptyResponseBodyError",Jie=`vercel.ai.error.${Zie}`,Vit=Symbol.for(Jie),Xie,qit=class extends Sr{constructor({message:e="Empty response body"}={}){super({name:Zie,message:e}),this[Xie]=!0}static isInstance(e){return Sr.hasMarker(e,Jie)}};Xie=Vit;function Yw(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var Qie="AI_InvalidArgumentError",eae=`vercel.ai.error.${Qie}`,Git=Symbol.for(eae),tae,nae=class extends Sr{constructor({message:t,cause:n,argument:r}){super({name:Qie,message:t,cause:n}),this[tae]=!0,this.argument=r}static isInstance(t){return Sr.hasMarker(t,eae)}};tae=Git;var rae="AI_InvalidPromptError",sae=`vercel.ai.error.${rae}`,Wit=Symbol.for(sae),oae,e1=class extends Sr{constructor({prompt:e,message:t,cause:n}){super({name:rae,message:`Invalid prompt: ${t}`,cause:n}),this[oae]=!0,this.prompt=e}static isInstance(e){return Sr.hasMarker(e,sae)}};oae=Wit;var iae="AI_JSONParseError",aae=`vercel.ai.error.${iae}`,Yit=Symbol.for(aae),lae,f4=class extends Sr{constructor({text:e,cause:t}){super({name:iae,message:`JSON parsing failed: Text: ${e}.
Error message: ${Yw(t)}`,cause:t}),this[lae]=!0,this.text=e}static isInstance(e){return Sr.hasMarker(e,aae)}};lae=Yit;var cae="AI_LoadAPIKeyError",uae=`vercel.ai.error.${cae}`,Kit=Symbol.for(uae),dae,b_=class extends Sr{constructor({message:e}){super({name:cae,message:e}),this[dae]=!0}static isInstance(e){return Sr.hasMarker(e,uae)}};dae=Kit;var fae="AI_TooManyEmbeddingValuesForCallError",hae=`vercel.ai.error.${fae}`,Zit=Symbol.for(hae),pae,Jit=class extends Sr{constructor(e){super({name:fae,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[pae]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Sr.hasMarker(e,hae)}};pae=Zit;var mae="AI_TypeValidationError",gae=`vercel.ai.error.${mae}`,Xit=Symbol.for(gae),bae,Qit=class GI extends Sr{constructor({value:t,cause:n}){super({name:mae,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Yw(n)}`,cause:n}),this[bae]=!0,this.value=t}static isInstance(t){return Sr.hasMarker(t,gae)}static wrap({value:t,cause:n}){return GI.isInstance(n)&&n.value===t?n:new GI({value:t,cause:n})}};bae=Xit;var ew=Qit,yae="AI_UnsupportedFunctionalityError",vae=`vercel.ai.error.${yae}`,eat=Symbol.for(vae),xae,q_=class extends Sr{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:yae,message:t}),this[xae]=!0,this.functionality=e}static isInstance(e){return Sr.hasMarker(e,vae)}};xae=eat;class qH extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function GA(e){}function tat(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=GA,onError:n=GA,onRetry:r=GA,onComment:s}=e;let o="",i=!0,a,l="",c="";function u(v){const x=i?v.replace(/^\xEF\xBB\xBF/,""):v,[E,T]=nat(`${o}${x}`);for(const k of E)f(k);o=T,i=!1}function f(v){if(v===""){g();return}if(v.startsWith(":")){s&&s(v.slice(v.startsWith(": ")?2:1));return}const x=v.indexOf(":");if(x!==-1){const E=v.slice(0,x),T=v[x+1]===" "?2:1,k=v.slice(x+T);m(E,k,v);return}m(v,"",v)}function m(v,x,E){switch(v){case"event":c=x;break;case"data":l=`${l}${x}
`;break;case"id":a=x.includes("\0")?void 0:x;break;case"retry":/^\d+$/.test(x)?r(parseInt(x,10)):n(new qH(`Invalid \`retry\` value: "${x}"`,{type:"invalid-retry",value:x,line:E}));break;default:n(new qH(`Unknown field "${v.length>20?`${v.slice(0,20)}`:v}"`,{type:"unknown-field",field:v,value:x,line:E}));break}}function g(){l.length>0&&t({id:a,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",c=""}function y(v={}){o&&v.consume&&f(o),i=!0,a=void 0,l="",c="",o=""}return{feed:u,reset:y}}function nat(e){const t=[];let n="",r=0;for(;r<e.length;){const s=e.indexOf("\r",r),o=e.indexOf(`
`,r);let i=-1;if(s!==-1&&o!==-1?i=Math.min(s,o):s!==-1?s===e.length-1?i=-1:i=s:o!==-1&&(i=o),i===-1){n=e.slice(r);break}else{const a=e.slice(r,i);t.push(a),r=i+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class rat extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let s;super({start(o){s=tat({onEvent:i=>{o.enqueue(i)},onError(i){t==="terminate"?o.error(i):typeof t=="function"&&t(i)},onRetry:n,onComment:r})},transform(o){s.feed(o)}})}}const sat=it("ZodISODateTime",(e,t)=>{gNe.init(e,t),No.init(e,t)});function oat(e){return _6e(sat,e)}const iat=it("ZodISODate",(e,t)=>{bNe.init(e,t),No.init(e,t)});function aat(e){return S6e(iat,e)}const lat=it("ZodISOTime",(e,t)=>{yNe.init(e,t),No.init(e,t)});function cat(e){return T6e(lat,e)}const uat=it("ZodISODuration",(e,t)=>{vNe.init(e,t),No.init(e,t)});function dat(e){return C6e(uat,e)}const fat=(e,t)=>{G8.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>fAe(e,n)},flatten:{value:n=>dAe(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},ik=it("ZodError",fat,{Parent:Error}),hat=PJ(ik),pat=LJ(ik),mat=$J(ik),wae=FJ(ik),lo=it("ZodType",(e,t)=>(Hs.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>Dm(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>hat(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>mat(e,n,r),e.parseAsync=async(n,r)=>pat(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>wae(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(hlt(n,r)),e.superRefine=n=>e.check(plt(n)),e.overwrite=n=>e.check(Iw(n)),e.optional=()=>YH(e),e.nullable=()=>KH(e),e.nullish=()=>YH(KH(e)),e.nonoptional=n=>rlt(e,n),e.array=()=>Fr(e),e.or=n=>Ba([e,n]),e.and=n=>Wat(e,n),e.transform=n=>ZH(e,Jat(n)),e.default=n=>elt(e,n),e.prefault=n=>nlt(e,n),e.catch=n=>olt(e,n),e.pipe=n=>ZH(e,n),e.readonly=()=>llt(e),e.describe=n=>{const r=e.clone();return hv.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){var n;return(n=hv.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return hv.get(e);const r=e.clone();return hv.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Eae=it("_ZodString",(e,t)=>{W8.init(e,t),lo.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(D6e(...r)),e.includes=(...r)=>e.check($6e(...r)),e.startsWith=(...r)=>e.check(F6e(...r)),e.endsWith=(...r)=>e.check(B6e(...r)),e.min=(...r)=>e.check(FS(...r)),e.max=(...r)=>e.check(KJ(...r)),e.length=(...r)=>e.check(ZJ(...r)),e.nonempty=(...r)=>e.check(FS(1,...r)),e.lowercase=r=>e.check(P6e(r)),e.uppercase=r=>e.check(L6e(r)),e.trim=()=>e.check(j6e()),e.normalize=(...r)=>e.check(z6e(...r)),e.toLowerCase=()=>e.check(U6e()),e.toUpperCase=()=>e.check(H6e())}),gat=it("ZodString",(e,t)=>{W8.init(e,t),Eae.init(e,t),e.email=n=>e.check(n6e(bat,n)),e.url=n=>e.check(a6e(yat,n)),e.jwt=n=>e.check(E6e(Oat,n)),e.emoji=n=>e.check(l6e(vat,n)),e.guid=n=>e.check(wF(GH,n)),e.uuid=n=>e.check(r6e(y_,n)),e.uuidv4=n=>e.check(s6e(y_,n)),e.uuidv6=n=>e.check(o6e(y_,n)),e.uuidv7=n=>e.check(i6e(y_,n)),e.nanoid=n=>e.check(c6e(xat,n)),e.guid=n=>e.check(wF(GH,n)),e.cuid=n=>e.check(u6e(wat,n)),e.cuid2=n=>e.check(d6e(Eat,n)),e.ulid=n=>e.check(f6e(_at,n)),e.base64=n=>e.check(v6e(Iat,n)),e.base64url=n=>e.check(x6e(Rat,n)),e.xid=n=>e.check(h6e(Sat,n)),e.ksuid=n=>e.check(p6e(Tat,n)),e.ipv4=n=>e.check(m6e(Cat,n)),e.ipv6=n=>e.check(g6e(kat,n)),e.cidrv4=n=>e.check(b6e(Aat,n)),e.cidrv6=n=>e.check(y6e(Nat,n)),e.e164=n=>e.check(w6e(Mat,n)),e.datetime=n=>e.check(oat(n)),e.date=n=>e.check(aat(n)),e.time=n=>e.check(cat(n)),e.duration=n=>e.check(dat(n))});function $t(e){return t6e(gat,e)}const No=it("ZodStringFormat",(e,t)=>{mo.init(e,t),Eae.init(e,t)}),bat=it("ZodEmail",(e,t)=>{aNe.init(e,t),No.init(e,t)}),GH=it("ZodGUID",(e,t)=>{oNe.init(e,t),No.init(e,t)}),y_=it("ZodUUID",(e,t)=>{iNe.init(e,t),No.init(e,t)}),yat=it("ZodURL",(e,t)=>{lNe.init(e,t),No.init(e,t)}),vat=it("ZodEmoji",(e,t)=>{cNe.init(e,t),No.init(e,t)}),xat=it("ZodNanoID",(e,t)=>{uNe.init(e,t),No.init(e,t)}),wat=it("ZodCUID",(e,t)=>{dNe.init(e,t),No.init(e,t)}),Eat=it("ZodCUID2",(e,t)=>{fNe.init(e,t),No.init(e,t)}),_at=it("ZodULID",(e,t)=>{hNe.init(e,t),No.init(e,t)}),Sat=it("ZodXID",(e,t)=>{pNe.init(e,t),No.init(e,t)}),Tat=it("ZodKSUID",(e,t)=>{mNe.init(e,t),No.init(e,t)}),Cat=it("ZodIPv4",(e,t)=>{xNe.init(e,t),No.init(e,t)}),kat=it("ZodIPv6",(e,t)=>{wNe.init(e,t),No.init(e,t)}),Aat=it("ZodCIDRv4",(e,t)=>{ENe.init(e,t),No.init(e,t)}),Nat=it("ZodCIDRv6",(e,t)=>{_Ne.init(e,t),No.init(e,t)}),Iat=it("ZodBase64",(e,t)=>{SNe.init(e,t),No.init(e,t)}),Rat=it("ZodBase64URL",(e,t)=>{CNe.init(e,t),No.init(e,t)}),Mat=it("ZodE164",(e,t)=>{kNe.init(e,t),No.init(e,t)}),Oat=it("ZodJWT",(e,t)=>{NNe.init(e,t),No.init(e,t)}),_ae=it("ZodNumber",(e,t)=>{GJ.init(e,t),lo.init(e,t),e.gt=(r,s)=>e.check(_F(r,s)),e.gte=(r,s)=>e.check(o5(r,s)),e.min=(r,s)=>e.check(o5(r,s)),e.lt=(r,s)=>e.check(EF(r,s)),e.lte=(r,s)=>e.check(s5(r,s)),e.max=(r,s)=>e.check(s5(r,s)),e.int=r=>e.check(WH(r)),e.safe=r=>e.check(WH(r)),e.positive=r=>e.check(_F(0,r)),e.nonnegative=r=>e.check(o5(0,r)),e.negative=r=>e.check(EF(0,r)),e.nonpositive=r=>e.check(s5(0,r)),e.multipleOf=(r,s)=>e.check(SF(r,s)),e.step=(r,s)=>e.check(SF(r,s)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Zs(e){return k6e(_ae,e)}const Dat=it("ZodNumberFormat",(e,t)=>{INe.init(e,t),_ae.init(e,t)});function WH(e){return A6e(Dat,e)}const Pat=it("ZodBoolean",(e,t)=>{RNe.init(e,t),lo.init(e,t)});function im(e){return N6e(Pat,e)}const Lat=it("ZodNull",(e,t)=>{MNe.init(e,t),lo.init(e,t)});function $at(e){return I6e(Lat,e)}const Fat=it("ZodAny",(e,t)=>{ONe.init(e,t),lo.init(e,t)});function d0(){return R6e(Fat)}const Bat=it("ZodUnknown",(e,t)=>{DNe.init(e,t),lo.init(e,t)});function O0(){return M6e(Bat)}const zat=it("ZodNever",(e,t)=>{PNe.init(e,t),lo.init(e,t)});function jat(e){return O6e(zat,e)}const Uat=it("ZodArray",(e,t)=>{LNe.init(e,t),lo.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(FS(n,r)),e.nonempty=n=>e.check(FS(1,n)),e.max=(n,r)=>e.check(KJ(n,r)),e.length=(n,r)=>e.check(ZJ(n,r)),e.unwrap=()=>e.element});function Fr(e,t){return V6e(Uat,e,t)}const Hat=it("ZodObject",(e,t)=>{$Ne.init(e,t),lo.init(e,t),bs(e,"shape",()=>t.shape),e.keyof=()=>ll(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:O0()}),e.loose=()=>e.clone({...e._zod.def,catchall:O0()}),e.strict=()=>e.clone({...e._zod.def,catchall:jat()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>aAe(e,n),e.merge=n=>lAe(e,n),e.pick=n=>oAe(e,n),e.omit=n=>iAe(e,n),e.partial=(...n)=>cAe(Tae,e,n[0]),e.required=(...n)=>uAe(Cae,e,n[0])});function qt(e,t){const n={type:"object",get shape(){return V8(this,"shape",{...e}),this.shape},...An(t)};return new Hat(n)}const Sae=it("ZodUnion",(e,t)=>{WJ.init(e,t),lo.init(e,t),e.options=t.options});function Ba(e,t){return new Sae({type:"union",options:e,...An(t)})}const Vat=it("ZodDiscriminatedUnion",(e,t)=>{Sae.init(e,t),FNe.init(e,t)});function qat(e,t,n){return new Vat({type:"union",options:t,discriminator:e,...An(n)})}const Gat=it("ZodIntersection",(e,t)=>{BNe.init(e,t),lo.init(e,t)});function Wat(e,t){return new Gat({type:"intersection",left:e,right:t})}const Yat=it("ZodRecord",(e,t)=>{zNe.init(e,t),lo.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function _m(e,t,n){return new Yat({type:"record",keyType:e,valueType:t,...An(n)})}const WI=it("ZodEnum",(e,t)=>{jNe.init(e,t),lo.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,s)=>{const o={};for(const i of r)if(n.has(i))o[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new WI({...t,checks:[],...An(s),entries:o})},e.exclude=(r,s)=>{const o={...t.entries};for(const i of r)if(n.has(i))delete o[i];else throw new Error(`Key ${i} not found in enum`);return new WI({...t,checks:[],...An(s),entries:o})}});function ll(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new WI({type:"enum",entries:n,...An(t)})}const Kat=it("ZodLiteral",(e,t)=>{UNe.init(e,t),lo.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Xo(e,t){return new Kat({type:"literal",values:Array.isArray(e)?e:[e],...An(t)})}const Zat=it("ZodTransform",(e,t)=>{HNe.init(e,t),lo.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=o=>{if(typeof o=="string")n.issues.push(Tx(o,n.value,t));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!0),n.issues.push(Tx(i))}};const s=t.transform(n.value,n);return s instanceof Promise?s.then(o=>(n.value=o,n)):(n.value=s,n)}});function Jat(e){return new Zat({type:"transform",transform:e})}const Tae=it("ZodOptional",(e,t)=>{VNe.init(e,t),lo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function YH(e){return new Tae({type:"optional",innerType:e})}const Xat=it("ZodNullable",(e,t)=>{qNe.init(e,t),lo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function KH(e){return new Xat({type:"nullable",innerType:e})}const Qat=it("ZodDefault",(e,t)=>{GNe.init(e,t),lo.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function elt(e,t){return new Qat({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const tlt=it("ZodPrefault",(e,t)=>{WNe.init(e,t),lo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function nlt(e,t){return new tlt({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Cae=it("ZodNonOptional",(e,t)=>{YNe.init(e,t),lo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function rlt(e,t){return new Cae({type:"nonoptional",innerType:e,...An(t)})}const slt=it("ZodCatch",(e,t)=>{KNe.init(e,t),lo.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function olt(e,t){return new slt({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const ilt=it("ZodPipe",(e,t)=>{ZNe.init(e,t),lo.init(e,t),e.in=t.in,e.out=t.out});function ZH(e,t){return new ilt({type:"pipe",in:e,out:t})}const alt=it("ZodReadonly",(e,t)=>{JNe.init(e,t),lo.init(e,t)});function llt(e){return new alt({type:"readonly",innerType:e})}const clt=it("ZodLazy",(e,t)=>{XNe.init(e,t),lo.init(e,t),e.unwrap=()=>e._zod.def.getter()});function ult(e){return new clt({type:"lazy",getter:e})}const v9=it("ZodCustom",(e,t)=>{QNe.init(e,t),lo.init(e,t)});function dlt(e){const t=new bl({check:"custom"});return t._zod.check=e,t}function flt(e,t){return q6e(v9,e??(()=>!0),t)}function hlt(e,t={}){return G6e(v9,e,t)}function plt(e){const t=dlt(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Tx(r,n.value,t._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),n.issues.push(Tx(s))}},e(n.value,n)));return t}function h4(e,t={error:`Input not instance of ${e.name}`}){const n=new v9({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...An(t)});return n._zod.bag.Class=e,n}var kae={};function D0(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}async function mlt(e,t){if(e==null)return Promise.resolve();const n=t==null?void 0:t.abortSignal;return new Promise((r,s)=>{if(n!=null&&n.aborted){s(JH());return}const o=setTimeout(()=>{i(),r()},e),i=()=>{clearTimeout(o),n==null||n.removeEventListener("abort",a)},a=()=>{i(),s(JH())};n==null||n.addEventListener("abort",a)})}function JH(){return new DOMException("Delay was aborted","AbortError")}function Kw(e){return Object.fromEntries([...e.headers])}var Zw=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=()=>{const o=n.length,i=new Array(t);for(let a=0;a<t;a++)i[a]=n[Math.random()*o|0];return i.join("")};if(e==null)return s;if(n.includes(r))throw new nae({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${s()}`},Aae=Zw();function Nae(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function hb(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var glt=["fetch failed","failed to fetch"];function Iae({error:e,url:t,requestBodyValues:n}){if(hb(e))return e;if(e instanceof TypeError&&glt.includes(e.message.toLowerCase())){const r=e.cause;if(r!=null)return new La({message:`Cannot connect to API: ${r.message}`,cause:r,url:t,requestBodyValues:n,isRetryable:!0})}return e}function x9(e=globalThis){var t,n,r;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(r=(n=e.process)==null?void 0:n.versions)!=null&&r.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function blt(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((n,r)=>{t[r.toLowerCase()]=n});else{Array.isArray(e)||(e=Object.entries(e));for(const[n,r]of e)r!=null&&(t[n.toLowerCase()]=r)}return t}function zb(e,...t){const n=new Headers(blt(e)),r=n.get("user-agent")||"";return n.set("user-agent",[r,...t].filter(Boolean).join(" ")),Object.fromEntries(n.entries())}var Rae="3.0.18",ylt=()=>globalThis.fetch,XH=async({url:e,headers:t={},successfulResponseHandler:n,failedResponseHandler:r,abortSignal:s,fetch:o=ylt()})=>{try{const i=await o(e,{method:"GET",headers:zb(t,`ai-sdk/provider-utils/${Rae}`,x9()),signal:s}),a=Kw(i);if(!i.ok){let l;try{l=await r({response:i,url:e,requestBodyValues:{}})}catch(c){throw hb(c)||La.isInstance(c)?c:new La({message:"Failed to process error response",cause:c,statusCode:i.status,url:e,responseHeaders:a,requestBodyValues:{}})}throw l.value}try{return await n({response:i,url:e,requestBodyValues:{}})}catch(l){throw l instanceof Error&&(hb(l)||La.isInstance(l))?l:new La({message:"Failed to process successful response",cause:l,statusCode:i.status,url:e,responseHeaders:a,requestBodyValues:{}})}}catch(i){throw Iae({error:i,url:e,requestBodyValues:{}})}};function vlt({mediaType:e,url:t,supportedUrls:n}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(n).map(([r,s])=>{const o=r.toLowerCase();return o==="*"||o==="*/*"?{mediaTypePrefix:"",regexes:s}:{mediaTypePrefix:o.replace(/\*/,""),regexes:s}}).filter(({mediaTypePrefix:r})=>e.startsWith(r)).flatMap(({regexes:r})=>r).some(r=>r.test(t))}function xlt({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new b_({message:`${r} API key must be a string.`});if(typeof process>"u")throw new b_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=kae[t],e==null)throw new b_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new b_({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function G_({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=kae[t],!(e==null||typeof e!="string")))return e}var wlt=/"__proto__"\s*:/,Elt=/"constructor"\s*:/;function QH(e){const t=JSON.parse(e);return t===null||typeof t!="object"||wlt.test(e)===!1&&Elt.test(e)===!1?t:_lt(t)}function _lt(e){let t=[e];for(;t.length;){const n=t;t=[];for(const r of n){if(Object.prototype.hasOwnProperty.call(r,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const s in r){const o=r[s];o&&typeof o=="object"&&t.push(o)}}}return e}function Mae(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return QH(e)}try{return QH(e)}finally{Error.stackTraceLimit=t}}var p4=Symbol.for("vercel.ai.validator");function Slt(e){return{[p4]:!0,validate:e}}function Tlt(e){return typeof e=="object"&&e!==null&&p4 in e&&e[p4]===!0&&"validate"in e}function jb(e){let t;return()=>(t==null&&(t=e()),t)}function Clt(e){return Tlt(e)?e:typeof e=="function"?e():klt(e)}function klt(e){return Slt(async t=>{const n=await e["~standard"].validate(t);return n.issues==null?{success:!0,value:n.value}:{success:!1,error:new ew({value:t,cause:n.issues})}})}async function Alt({value:e,schema:t}){const n=await Jf({value:e,schema:t});if(!n.success)throw ew.wrap({value:e,cause:n.error});return n.value}async function Jf({value:e,schema:t}){const n=Clt(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};const r=await n.validate(e);return r.success?{success:!0,value:r.value,rawValue:e}:{success:!1,error:ew.wrap({value:e,cause:r.error}),rawValue:e}}catch(r){return{success:!1,error:ew.wrap({value:e,cause:r}),rawValue:e}}}async function Nlt({text:e,schema:t}){try{const n=Mae(e);return t==null?n:Alt({value:n,schema:t})}catch(n){throw f4.isInstance(n)||ew.isInstance(n)?n:new f4({text:e,cause:n})}}async function Sm({text:e,schema:t}){try{const n=Mae(e);return t==null?{success:!0,value:n,rawValue:n}:await Jf({value:n,schema:t})}catch(n){return{success:!1,error:f4.isInstance(n)?n:new f4({text:e,cause:n}),rawValue:void 0}}}function Ilt({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new rat).pipeThrough(new TransformStream({async transform({data:n},r){n!=="[DONE]"&&r.enqueue(await Sm({text:n,schema:t}))}}))}async function w9({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=await Jf({value:t[e],schema:n});if(!r.success)throw new nae({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var Rlt=()=>globalThis.fetch,Xf=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:o,fetch:i})=>Mlt({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:o,fetch:i}),Mlt=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:o,fetch:i=Rlt()})=>{try{const a=await i(e,{method:"POST",headers:zb(t,`ai-sdk/provider-utils/${Rae}`,x9()),body:n.content,signal:o}),l=Kw(a);if(!a.ok){let c;try{c=await s({response:a,url:e,requestBodyValues:n.values})}catch(u){throw hb(u)||La.isInstance(u)?u:new La({message:"Failed to process error response",cause:u,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(hb(c)||La.isInstance(c))?c:new La({message:"Failed to process successful response",cause:c,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(a){throw Iae({error:a,url:e,requestBodyValues:n.values})}};function ak({id:e,name:t,inputSchema:n}){return({execute:r,outputSchema:s,toModelOutput:o,onInputStart:i,onInputDelta:a,onInputAvailable:l,...c})=>({type:"provider-defined",id:e,name:t,args:c,inputSchema:n,outputSchema:s,execute:r,toModelOutput:o,onInputStart:i,onInputDelta:a,onInputAvailable:l})}function Olt({id:e,name:t,inputSchema:n,outputSchema:r}){return({execute:s,toModelOutput:o,onInputStart:i,onInputDelta:a,onInputAvailable:l,...c})=>({type:"provider-defined",id:e,name:t,args:c,inputSchema:n,outputSchema:r,execute:s,toModelOutput:o,onInputStart:i,onInputDelta:a,onInputAvailable:l})}async function fl(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Tm=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:s,requestBodyValues:o})=>{const i=await r.text(),a=Kw(r);if(i.trim()==="")return{responseHeaders:a,value:new La({message:r.statusText,url:s,requestBodyValues:o,statusCode:r.status,responseHeaders:a,responseBody:i,isRetryable:n==null?void 0:n(r)})};try{const l=await Nlt({text:i,schema:e});return{responseHeaders:a,value:new La({message:t(l),url:s,requestBodyValues:o,statusCode:r.status,responseHeaders:a,responseBody:i,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:a,value:new La({message:r.statusText,url:s,requestBodyValues:o,statusCode:r.status,responseHeaders:a,responseBody:i,isRetryable:n==null?void 0:n(r)})}}},Oae=e=>async({response:t})=>{const n=Kw(t);if(t.body==null)throw new qit({});return{responseHeaders:n,value:Ilt({stream:t.body,schema:e})}},Qf=e=>async({response:t,url:n,requestBodyValues:r})=>{const s=await t.text(),o=await Sm({text:s,schema:e}),i=Kw(t);if(!o.success)throw new La({message:"Invalid JSON response",cause:o.error,statusCode:t.status,responseHeaders:i,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:i,value:o.value,rawValue:o.rawValue}},Dlt=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Plt=Symbol("Let zodToJsonSchema decide on which parser to use"),eV={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Llt=e=>typeof e=="string"?{...eV,name:e}:{...eV,...e};function ec(){return{}}function $lt(e,t){var n,r,s;const o={type:"array"};return(n=e.type)!=null&&n._def&&((s=(r=e.type)==null?void 0:r._def)==null?void 0:s.typeName)!==Ft.ZodAny&&(o.items=Cs(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(o.minItems=e.minLength.value),e.maxLength&&(o.maxItems=e.maxLength.value),e.exactLength&&(o.minItems=e.exactLength.value,o.maxItems=e.exactLength.value),o}function Flt(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function Blt(){return{type:"boolean"}}function Dae(e,t){return Cs(e.type._def,t)}var zlt=(e,t)=>Cs(e.innerType._def,t);function Pae(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,o)=>Pae(e,t,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return jlt(e)}}var jlt=e=>{const t={type:"integer",format:"unix-time"};for(const n of e.checks)switch(n.kind){case"min":t.minimum=n.value;break;case"max":t.maximum=n.value;break}return t};function Ult(e,t){return{...Cs(e.innerType._def,t),default:e.defaultValue()}}function Hlt(e,t){return t.effectStrategy==="input"?Cs(e.schema._def,t):ec()}function Vlt(e){return{type:"string",enum:Array.from(e.values)}}var qlt=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Glt(e,t){const n=[Cs(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Cs(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(s=>!!s),r=[];return n.forEach(s=>{if(qlt(s))r.push(...s.allOf);else{let o=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:i,...a}=s;o=a}r.push(o)}}),r.length?{allOf:r}:void 0}function Wlt(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var WA=void 0,tu={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(WA===void 0&&(WA=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),WA),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Lae(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value;break;case"max":n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"email":switch(t.emailStrategy){case"format:email":nu(n,"email",r.message,t);break;case"format:idn-email":nu(n,"idn-email",r.message,t);break;case"pattern:zod":Ia(n,tu.email,r.message,t);break}break;case"url":nu(n,"uri",r.message,t);break;case"uuid":nu(n,"uuid",r.message,t);break;case"regex":Ia(n,r.regex,r.message,t);break;case"cuid":Ia(n,tu.cuid,r.message,t);break;case"cuid2":Ia(n,tu.cuid2,r.message,t);break;case"startsWith":Ia(n,RegExp(`^${YA(r.value,t)}`),r.message,t);break;case"endsWith":Ia(n,RegExp(`${YA(r.value,t)}$`),r.message,t);break;case"datetime":nu(n,"date-time",r.message,t);break;case"date":nu(n,"date",r.message,t);break;case"time":nu(n,"time",r.message,t);break;case"duration":nu(n,"duration",r.message,t);break;case"length":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"includes":{Ia(n,RegExp(YA(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&nu(n,"ipv4",r.message,t),r.version!=="v4"&&nu(n,"ipv6",r.message,t);break}case"base64url":Ia(n,tu.base64url,r.message,t);break;case"jwt":Ia(n,tu.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&Ia(n,tu.ipv4Cidr,r.message,t),r.version!=="v4"&&Ia(n,tu.ipv6Cidr,r.message,t);break}case"emoji":Ia(n,tu.emoji(),r.message,t);break;case"ulid":{Ia(n,tu.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{nu(n,"binary",r.message,t);break}case"contentEncoding:base64":{n.contentEncoding="base64";break}case"pattern:zod":{Ia(n,tu.base64,r.message,t);break}}break}case"nanoid":Ia(n,tu.nanoid,r.message,t)}return n}function YA(e,t){return t.patternStrategy==="escape"?Klt(e):e}var Ylt=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Klt(e){let t="";for(let n=0;n<e.length;n++)Ylt.has(e[n])||(t+="\\"),t+=e[n];return t}function nu(e,t,n,r){var s;e.format||(s=e.anyOf)!=null&&s.some(o=>o.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):e.format=t}function Ia(e,t,n,r){var s;e.pattern||(s=e.allOf)!=null&&s.some(o=>o.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:tV(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):e.pattern=tV(t,r)}function tV(e,t){var n;if(!t.applyRegexFlags||!e.flags)return e.source;const r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},s=r.i?e.source.toLowerCase():e.source;let o="",i=!1,a=!1,l=!1;for(let c=0;c<s.length;c++){if(i){o+=s[c],i=!1;continue}if(r.i){if(a){if(s[c].match(/[a-z]/)){l?(o+=s[c],o+=`${s[c-2]}-${s[c]}`.toUpperCase(),l=!1):s[c+1]==="-"&&((n=s[c+2])!=null&&n.match(/[a-z]/))?(o+=s[c],l=!0):o+=`${s[c]}${s[c].toUpperCase()}`;continue}}else if(s[c].match(/[a-z]/)){o+=`[${s[c]}${s[c].toUpperCase()}]`;continue}}if(r.m){if(s[c]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(s[c]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&s[c]==="."){o+=a?`${s[c]}\r
`:`[${s[c]}\r
]`;continue}o+=s[c],s[c]==="\\"?i=!0:a&&s[c]==="]"?a=!1:!a&&s[c]==="["&&(a=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}function $ae(e,t){var n,r,s,o,i,a;const l={type:"object",additionalProperties:(n=Cs(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?n:t.allowedAdditionalProperties};if(((r=e.keyType)==null?void 0:r._def.typeName)===Ft.ZodString&&((s=e.keyType._def.checks)!=null&&s.length)){const{type:c,...u}=Lae(e.keyType._def,t);return{...l,propertyNames:u}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===Ft.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===Ft.ZodBranded&&e.keyType._def.type._def.typeName===Ft.ZodString&&((a=e.keyType._def.type._def.checks)!=null&&a.length)){const{type:c,...u}=Dae(e.keyType._def,t);return{...l,propertyNames:u}}}return l}function Zlt(e,t){if(t.mapStrategy==="record")return $ae(e,t);const n=Cs(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||ec(),r=Cs(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||ec();return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Jlt(e){const t=e.values,r=Object.keys(e.values).filter(o=>typeof t[t[o]]!="number").map(o=>t[o]),s=Array.from(new Set(r.map(o=>typeof o)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function Xlt(){return{not:ec()}}function Qlt(){return{type:"null"}}var YI={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function ect(e,t){const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in YI&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,o)=>{const i=YI[o._def.typeName];return i&&!s.includes(i)?[...s,i]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,o)=>{const i=typeof o._def.value;switch(i){case"string":case"number":case"boolean":return[...s,i];case"bigint":return[...s,"integer"];case"object":if(o._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((o,i,a)=>a.indexOf(o)===i);return{type:s.length>1?s:s[0],enum:n.reduce((o,i)=>o.includes(i._def.value)?o:[...o,i._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(o=>!r.includes(o))],[])};return tct(e,t)}var tct=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,s)=>Cs(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function nct(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[YI[e.innerType._def.typeName],"null"]};const n=Cs(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function rct(e){const t={type:"number"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"int":t.type="integer";break;case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function sct(e,t){const n={type:"object",properties:{}},r=[],s=e.shape();for(const i in s){let a=s[i];if(a===void 0||a._def===void 0)continue;const l=ict(a),c=Cs(a._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});c!==void 0&&(n.properties[i]=c,l||r.push(i))}r.length&&(n.required=r);const o=oct(e,t);return o!==void 0&&(n.additionalProperties=o),n}function oct(e,t){if(e.catchall._def.typeName!=="ZodNever")return Cs(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function ict(e){try{return e.isOptional()}catch{return!0}}var act=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return Cs(e.innerType._def,t);const r=Cs(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:ec()},r]}:ec()},lct=(e,t)=>{if(t.pipeStrategy==="input")return Cs(e.in._def,t);if(t.pipeStrategy==="output")return Cs(e.out._def,t);const n=Cs(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=Cs(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function cct(e,t){return Cs(e.type._def,t)}function uct(e,t){const r={type:"array",uniqueItems:!0,items:Cs(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(r.minItems=e.minSize.value),e.maxSize&&(r.maxItems=e.maxSize.value),r}function dct(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>Cs(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Cs(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>Cs(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function fct(){return{not:ec()}}function hct(){return ec()}var pct=(e,t)=>Cs(e.innerType._def,t),mct=(e,t,n)=>{switch(t){case Ft.ZodString:return Lae(e,n);case Ft.ZodNumber:return rct(e);case Ft.ZodObject:return sct(e,n);case Ft.ZodBigInt:return Flt(e);case Ft.ZodBoolean:return Blt();case Ft.ZodDate:return Pae(e,n);case Ft.ZodUndefined:return fct();case Ft.ZodNull:return Qlt();case Ft.ZodArray:return $lt(e,n);case Ft.ZodUnion:case Ft.ZodDiscriminatedUnion:return ect(e,n);case Ft.ZodIntersection:return Glt(e,n);case Ft.ZodTuple:return dct(e,n);case Ft.ZodRecord:return $ae(e,n);case Ft.ZodLiteral:return Wlt(e);case Ft.ZodEnum:return Vlt(e);case Ft.ZodNativeEnum:return Jlt(e);case Ft.ZodNullable:return nct(e,n);case Ft.ZodOptional:return act(e,n);case Ft.ZodMap:return Zlt(e,n);case Ft.ZodSet:return uct(e,n);case Ft.ZodLazy:return()=>e.getter()._def;case Ft.ZodPromise:return cct(e,n);case Ft.ZodNaN:case Ft.ZodNever:return Xlt();case Ft.ZodEffects:return Hlt(e,n);case Ft.ZodAny:return ec();case Ft.ZodUnknown:return hct();case Ft.ZodDefault:return Ult(e,n);case Ft.ZodBranded:return Dae(e,n);case Ft.ZodReadonly:return pct(e,n);case Ft.ZodCatch:return zlt(e,n);case Ft.ZodPipeline:return lct(e,n);case Ft.ZodFunction:case Ft.ZodVoid:case Ft.ZodSymbol:return;default:return(r=>{})()}};function Cs(e,t,n=!1){var r;const s=t.seen.get(e);if(t.override){const l=(r=t.override)==null?void 0:r.call(t,e,t,s,n);if(l!==Plt)return l}if(s&&!n){const l=gct(s,t);if(l!==void 0)return l}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const i=mct(e,e.typeName,t),a=typeof i=="function"?Cs(i(),t):i;if(a&&bct(e,t,a),t.postProcess){const l=t.postProcess(a,e,t);return o.jsonSchema=a,l}return o.jsonSchema=a,a}var gct=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Dlt(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),ec()):t.$refStrategy==="seen"?ec():void 0}},bct=(e,t,n)=>(e.description&&(n.description=e.description),n),yct=e=>{const t=Llt(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}},vct=(e,t)=>{var n;const r=yct(t);let s=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((c,[u,f])=>{var m;return{...c,[u]:(m=Cs(f._def,{...r,currentPath:[...r.basePath,r.definitionPath,u]},!0))!=null?m:ec()}},{}):void 0;const o=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=(n=Cs(e._def,o===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1))!=null?n:ec(),a=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;a!==void 0&&(i.title=a);const l=o===void 0?s?{...i,[r.definitionPath]:s}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...s,[o]:i}};return l.$schema="http://json-schema.org/draft-07/schema#",l},xct=vct;function wct(e,t){var n;const r=(n=void 0)!=null?n:!1;return E9(()=>xct(e,{$refStrategy:r?"root":"none"}),{validate:async s=>{const o=await e.safeParseAsync(s);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}function Ect(e,t){var n;const r=(n=void 0)!=null?n:!1;return E9(()=>W6e(e,{target:"draft-7",io:"output",reused:r?"ref":"inline"}),{validate:async s=>{const o=await wae(e,s);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}function _ct(e){return"_zod"in e}function Mi(e,t){return _ct(e)?Ect(e):wct(e)}var KI=Symbol.for("vercel.ai.schema");function Fc(e){let t;return()=>(t==null&&(t=e()),t)}function E9(e,{validate:t}={}){return{[KI]:!0,_type:void 0,[p4]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function Sct(e){return typeof e=="object"&&e!==null&&KI in e&&e[KI]===!0&&"jsonSchema"in e&&"validate"in e}function lk(e){return e==null?E9({properties:{},additionalProperties:!1}):Sct(e)?e:typeof e=="function"?e():Mi(e)}var{btoa:Tct,atob:Cct}=globalThis;function _9(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=Cct(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function m4(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Tct(t)}function nV(e){return e instanceof Uint8Array?m4(e):e}function Fae(e){return e==null?void 0:e.replace(/\/$/,"")}function kct(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}async function*Act({execute:e,input:t,options:n}){const r=e(t,n);if(kct(r)){let s;for await(const o of r)s=o,yield{type:"preliminary",output:o};yield{type:"final",output:s}}else yield{type:"final",output:await r}}var Nct="2.0.45",Ict=Fc(()=>Mi(qt({error:qt({code:Zs().nullable(),message:$t(),status:$t()})}))),tw=Tm({errorSchema:Ict,errorToMessage:e=>e.error.message}),Rct=Fc(()=>Mi(qt({outputDimensionality:Zs().optional(),taskType:ll(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),Mct=class{constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){const s=await w9({provider:"google",providerOptions:r,schema:Rct});if(e.length>this.maxEmbeddingsPerCall)throw new Jit({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const o=D0(await fl(this.config.headers),t);if(e.length===1){const{responseHeaders:c,value:u,rawValue:f}=await Xf({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:o,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:s==null?void 0:s.outputDimensionality,taskType:s==null?void 0:s.taskType},failedResponseHandler:tw,successfulResponseHandler:Qf(Dct),abortSignal:n,fetch:this.config.fetch});return{embeddings:[u.embedding.values],usage:void 0,response:{headers:c,body:f}}}const{responseHeaders:i,value:a,rawValue:l}=await Xf({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:o,body:{requests:e.map(c=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:c}]},outputDimensionality:s==null?void 0:s.outputDimensionality,taskType:s==null?void 0:s.taskType}))},failedResponseHandler:tw,successfulResponseHandler:Qf(Oct),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.embeddings.map(c=>c.values),usage:void 0,response:{headers:i,body:l}}}},Oct=Fc(()=>Mi(qt({embeddings:Fr(qt({values:Fr(Zs())}))}))),Dct=Fc(()=>Mi(qt({embedding:qt({values:Fr(Zs())})})));function od(e){if(e==null||Pct(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:s,items:o,allOf:i,anyOf:a,oneOf:l,format:c,const:u,minLength:f,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),u!==void 0&&(g.enum=[u]),t)if(Array.isArray(t)){const y=t.includes("null"),v=t.filter(x=>x!=="null");v.length===0?g.type="null":(g.anyOf=v.map(x=>({type:x})),y&&(g.nullable=!0))}else g.type=t;if(m!==void 0&&(g.enum=m),s!=null&&(g.properties=Object.entries(s).reduce((y,[v,x])=>(y[v]=od(x),y),{})),o&&(g.items=Array.isArray(o)?o.map(od):od(o)),i&&(g.allOf=i.map(od)),a)if(a.some(y=>typeof y=="object"&&(y==null?void 0:y.type)==="null")){const y=a.filter(v=>!(typeof v=="object"&&(v==null?void 0:v.type)==="null"));if(y.length===1){const v=od(y[0]);typeof v=="object"&&(g.nullable=!0,Object.assign(g,v))}else g.anyOf=y.map(od),g.nullable=!0}else g.anyOf=a.map(od);return l&&(g.oneOf=l.map(od)),f!==void 0&&(g.minLength=f),g}function Pct(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)&&!e.additionalProperties}function Lct(e,t){var n;const r=[],s=[];let o=!0;const i=(n=t==null?void 0:t.isGemmaModel)!=null?n:!1;for(const{role:a,content:l}of e)switch(a){case"system":{if(!o)throw new q_({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:l});break}case"user":{o=!1;const c=[];for(const u of l)switch(u.type){case"text":{c.push({text:u.text});break}case"file":{const f=u.mediaType==="image/*"?"image/jpeg":u.mediaType;c.push(u.data instanceof URL?{fileData:{mimeType:f,fileUri:u.data.toString()}}:{inlineData:{mimeType:f,data:nV(u.data)}});break}}s.push({role:"user",parts:c});break}case"assistant":{o=!1,s.push({role:"model",parts:l.map(c=>{var u,f,m;const g=((f=(u=c.providerOptions)==null?void 0:u.google)==null?void 0:f.thoughtSignature)!=null?String((m=c.providerOptions.google)==null?void 0:m.thoughtSignature):void 0;switch(c.type){case"text":return c.text.length===0?void 0:{text:c.text,thoughtSignature:g};case"reasoning":return c.text.length===0?void 0:{text:c.text,thought:!0,thoughtSignature:g};case"file":{if(c.mediaType!=="image/png")throw new q_({functionality:"Only PNG images are supported in assistant messages"});if(c.data instanceof URL)throw new q_({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:c.mediaType,data:nV(c.data)}}}case"tool-call":return{functionCall:{name:c.toolName,args:c.input},thoughtSignature:g}}}).filter(c=>c!==void 0)});break}case"tool":{o=!1;const c=[];for(const u of l){const f=u.output;if(f.type==="content")for(const m of f.value)switch(m.type){case"text":c.push({functionResponse:{name:u.toolName,response:{name:u.toolName,content:m.text}}});break;case"media":c.push({inlineData:{mimeType:m.mediaType,data:m.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:c.push({text:JSON.stringify(m)});break}else c.push({functionResponse:{name:u.toolName,response:{name:u.toolName,content:f.value}}})}s.push({role:"user",parts:c});break}}if(i&&r.length>0&&s.length>0&&s[0].role==="user"){const a=r.map(l=>l.text).join(`

`);s[0].parts.unshift({text:a+`

`})}return{systemInstruction:r.length>0&&!i?{parts:r}:void 0,contents:s}}function rV(e){return e.includes("/")?e:`models/${e}`}var $ct=Fc(()=>Mi(qt({responseModalities:Fr(ll(["TEXT","IMAGE"])).optional(),thinkingConfig:qt({thinkingBudget:Zs().optional(),includeThoughts:im().optional(),thinkingLevel:ll(["low","medium","high"]).optional()}).optional(),cachedContent:$t().optional(),structuredOutputs:im().optional(),safetySettings:Fr(qt({category:ll(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:ll(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:ll(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:im().optional(),labels:_m($t(),$t()).optional(),mediaResolution:ll(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:qt({aspectRatio:ll(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:ll(["1K","2K","4K"]).optional()}).optional()})));function Fct({tools:e,toolChoice:t,modelId:n}){var r;e=e!=null&&e.length?e:void 0;const s=[],o=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(g=>g===n),i=n.includes("gemini-2")||n.includes("gemini-3")||o,a=n.includes("gemini-1.5-flash")&&!n.includes("-8b"),l=n.includes("gemini-2.5");if(e==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const c=e.some(g=>g.type==="function"),u=e.some(g=>g.type==="provider-defined");if(c&&u){const g=e.filter(y=>y.type==="function");s.push({type:"unsupported-tool",tool:e.find(y=>y.type==="function"),details:`Cannot mix function tools with provider-defined tools in the same request. Falling back to provider-defined tools only. The following function tools will be ignored: ${g.map(y=>y.name).join(", ")}. Please use either function tools or provider-defined tools, but not both.`})}if(u){const g=[];return e.filter(v=>v.type==="provider-defined").forEach(v=>{switch(v.id){case"google.google_search":i?g.push({googleSearch:{}}):a?g.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:v.args.mode,dynamicThreshold:v.args.dynamicThreshold}}}):g.push({googleSearchRetrieval:{}});break;case"google.url_context":i?g.push({urlContext:{}}):s.push({type:"unsupported-tool",tool:v,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":i?g.push({codeExecution:{}}):s.push({type:"unsupported-tool",tool:v,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":l?g.push({fileSearch:{...v.args}}):s.push({type:"unsupported-tool",tool:v,details:"The file search tool is only supported with Gemini 2.5 models."});break;case"google.vertex_rag_store":i?g.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:v.args.ragCorpus},similarity_top_k:v.args.topK}}}):s.push({type:"unsupported-tool",tool:v,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;default:s.push({type:"unsupported-tool",tool:v});break}}),{tools:g.length>0?g:void 0,toolConfig:void 0,toolWarnings:s}}const f=[];for(const g of e)switch(g.type){case"function":f.push({name:g.name,description:(r=g.description)!=null?r:"",parameters:od(g.inputSchema)});break;default:s.push({type:"unsupported-tool",tool:g});break}if(t==null)return{tools:[{functionDeclarations:f}],toolConfig:void 0,toolWarnings:s};const m=t.type;switch(m){case"auto":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:s};default:{const g=m;throw new q_({functionality:`tool choice type: ${g}`})}}}function sV({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var Bct=class{constructor(e,t){this.specificationVersion="v2";var n;this.modelId=e,this.config=t,this.generateId=(n=t.generateId)!=null?n:Aae}get provider(){return this.config.provider}get supportedUrls(){var e,t,n;return(n=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?n:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:r,topK:s,frequencyPenalty:o,presencePenalty:i,stopSequences:a,responseFormat:l,seed:c,tools:u,toolChoice:f,providerOptions:m}){var g;const y=[],v=await w9({provider:"google",providerOptions:m,schema:$ct});u!=null&&u.some(M=>M.type==="provider-defined"&&M.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&y.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const x=this.modelId.toLowerCase().startsWith("gemma-"),{contents:E,systemInstruction:T}=Lct(e,{isGemmaModel:x}),{tools:k,toolConfig:I,toolWarnings:O}=Fct({tools:u,toolChoice:f,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:t,temperature:n,topK:s,topP:r,frequencyPenalty:o,presencePenalty:i,stopSequences:a,seed:c,responseMimeType:(l==null?void 0:l.type)==="json"?"application/json":void 0,responseSchema:(l==null?void 0:l.type)==="json"&&l.schema!=null&&((g=v==null?void 0:v.structuredOutputs)==null||g)?od(l.schema):void 0,...(v==null?void 0:v.audioTimestamp)&&{audioTimestamp:v.audioTimestamp},responseModalities:v==null?void 0:v.responseModalities,thinkingConfig:v==null?void 0:v.thinkingConfig,...(v==null?void 0:v.imageConfig)&&{imageConfig:v.imageConfig},...(v==null?void 0:v.mediaResolution)&&{mediaResolution:v.mediaResolution}},contents:E,systemInstruction:x?void 0:T,safetySettings:v==null?void 0:v.safetySettings,tools:k,toolConfig:I,cachedContent:v==null?void 0:v.cachedContent,labels:v==null?void 0:v.labels},warnings:[...y,...O]}}async doGenerate(e){var t,n,r,s,o,i,a,l,c,u,f,m,g;const{args:y,warnings:v}=await this.getArgs(e),x=JSON.stringify(y),E=D0(await fl(this.config.headers),e.headers),{responseHeaders:T,value:k,rawValue:I}=await Xf({url:`${this.config.baseURL}/${rV(this.modelId)}:generateContent`,headers:E,body:y,failedResponseHandler:tw,successfulResponseHandler:Qf(jct),abortSignal:e.abortSignal,fetch:this.config.fetch}),O=k.candidates[0],M=[],P=(n=(t=O.content)==null?void 0:t.parts)!=null?n:[],j=k.usageMetadata;let V;for(const z of P)if("executableCode"in z&&((r=z.executableCode)!=null&&r.code)){const H=this.config.generateId();V=H,M.push({type:"tool-call",toolCallId:H,toolName:"code_execution",input:JSON.stringify(z.executableCode),providerExecuted:!0})}else"codeExecutionResult"in z&&z.codeExecutionResult?(M.push({type:"tool-result",toolCallId:V,toolName:"code_execution",result:{outcome:z.codeExecutionResult.outcome,output:z.codeExecutionResult.output},providerExecuted:!0}),V=void 0):"text"in z&&z.text!=null&&z.text.length>0?M.push({type:z.thought===!0?"reasoning":"text",text:z.text,providerMetadata:z.thoughtSignature?{google:{thoughtSignature:z.thoughtSignature}}:void 0}):"functionCall"in z?M.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:z.functionCall.name,input:JSON.stringify(z.functionCall.args),providerMetadata:z.thoughtSignature?{google:{thoughtSignature:z.thoughtSignature}}:void 0}):"inlineData"in z&&M.push({type:"file",data:z.inlineData.data,mediaType:z.inlineData.mimeType});const U=(s=oV({groundingMetadata:O.groundingMetadata,generateId:this.config.generateId}))!=null?s:[];for(const z of U)M.push(z);return{content:M,finishReason:sV({finishReason:O.finishReason,hasToolCalls:M.some(z=>z.type==="tool-call")}),usage:{inputTokens:(o=j==null?void 0:j.promptTokenCount)!=null?o:void 0,outputTokens:(i=j==null?void 0:j.candidatesTokenCount)!=null?i:void 0,totalTokens:(a=j==null?void 0:j.totalTokenCount)!=null?a:void 0,reasoningTokens:(l=j==null?void 0:j.thoughtsTokenCount)!=null?l:void 0,cachedInputTokens:(c=j==null?void 0:j.cachedContentTokenCount)!=null?c:void 0},warnings:v,providerMetadata:{google:{promptFeedback:(u=k.promptFeedback)!=null?u:null,groundingMetadata:(f=O.groundingMetadata)!=null?f:null,urlContextMetadata:(m=O.urlContextMetadata)!=null?m:null,safetyRatings:(g=O.safetyRatings)!=null?g:null,usageMetadata:j??null}},request:{body:x},response:{headers:T,body:I}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),s=D0(await fl(this.config.headers),e.headers),{responseHeaders:o,value:i}=await Xf({url:`${this.config.baseURL}/${rV(this.modelId)}:streamGenerateContent?alt=sse`,headers:s,body:t,failedResponseHandler:tw,successfulResponseHandler:Oae(Uct),abortSignal:e.abortSignal,fetch:this.config.fetch});let a="unknown";const l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let c;const u=this.config.generateId;let f=!1,m=null,g=null,y=0;const v=new Set;let x;return{stream:i.pipeThrough(new TransformStream({start(E){E.enqueue({type:"stream-start",warnings:n})},transform(E,T){var k,I,O,M,P,j,V,U,z,H,F,G;if(e.includeRawChunks&&T.enqueue({type:"raw",rawValue:E.rawValue}),!E.success){T.enqueue({type:"error",error:E.error});return}const X=E.value,J=X.usageMetadata;J!=null&&(l.inputTokens=(k=J.promptTokenCount)!=null?k:void 0,l.outputTokens=(I=J.candidatesTokenCount)!=null?I:void 0,l.totalTokens=(O=J.totalTokenCount)!=null?O:void 0,l.reasoningTokens=(M=J.thoughtsTokenCount)!=null?M:void 0,l.cachedInputTokens=(P=J.cachedContentTokenCount)!=null?P:void 0);const ee=(j=X.candidates)==null?void 0:j[0];if(ee==null)return;const re=ee.content,ie=oV({groundingMetadata:ee.groundingMetadata,generateId:u});if(ie!=null)for(const Z of ie)Z.sourceType==="url"&&!v.has(Z.url)&&(v.add(Z.url),T.enqueue(Z));if(re!=null){const Z=(V=re.parts)!=null?V:[];for(const oe of Z)if("executableCode"in oe&&((U=oe.executableCode)!=null&&U.code)){const Q=u();x=Q,T.enqueue({type:"tool-call",toolCallId:Q,toolName:"code_execution",input:JSON.stringify(oe.executableCode),providerExecuted:!0}),f=!0}else if("codeExecutionResult"in oe&&oe.codeExecutionResult){const Q=x;Q&&(T.enqueue({type:"tool-result",toolCallId:Q,toolName:"code_execution",result:{outcome:oe.codeExecutionResult.outcome,output:oe.codeExecutionResult.output},providerExecuted:!0}),x=void 0)}else"text"in oe&&oe.text!=null&&oe.text.length>0?oe.thought===!0?(m!==null&&(T.enqueue({type:"text-end",id:m}),m=null),g===null&&(g=String(y++),T.enqueue({type:"reasoning-start",id:g,providerMetadata:oe.thoughtSignature?{google:{thoughtSignature:oe.thoughtSignature}}:void 0})),T.enqueue({type:"reasoning-delta",id:g,delta:oe.text,providerMetadata:oe.thoughtSignature?{google:{thoughtSignature:oe.thoughtSignature}}:void 0})):(g!==null&&(T.enqueue({type:"reasoning-end",id:g}),g=null),m===null&&(m=String(y++),T.enqueue({type:"text-start",id:m,providerMetadata:oe.thoughtSignature?{google:{thoughtSignature:oe.thoughtSignature}}:void 0})),T.enqueue({type:"text-delta",id:m,delta:oe.text,providerMetadata:oe.thoughtSignature?{google:{thoughtSignature:oe.thoughtSignature}}:void 0})):"inlineData"in oe&&T.enqueue({type:"file",mediaType:oe.inlineData.mimeType,data:oe.inlineData.data});const te=zct({parts:re.parts,generateId:u});if(te!=null)for(const oe of te)T.enqueue({type:"tool-input-start",id:oe.toolCallId,toolName:oe.toolName,providerMetadata:oe.providerMetadata}),T.enqueue({type:"tool-input-delta",id:oe.toolCallId,delta:oe.args,providerMetadata:oe.providerMetadata}),T.enqueue({type:"tool-input-end",id:oe.toolCallId,providerMetadata:oe.providerMetadata}),T.enqueue({type:"tool-call",toolCallId:oe.toolCallId,toolName:oe.toolName,input:oe.args,providerMetadata:oe.providerMetadata}),f=!0}ee.finishReason!=null&&(a=sV({finishReason:ee.finishReason,hasToolCalls:f}),c={google:{promptFeedback:(z=X.promptFeedback)!=null?z:null,groundingMetadata:(H=ee.groundingMetadata)!=null?H:null,urlContextMetadata:(F=ee.urlContextMetadata)!=null?F:null,safetyRatings:(G=ee.safetyRatings)!=null?G:null}},J!=null&&(c.google.usageMetadata=J))},flush(E){m!==null&&E.enqueue({type:"text-end",id:m}),g!==null&&E.enqueue({type:"reasoning-end",id:g}),E.enqueue({type:"finish",finishReason:a,usage:l,providerMetadata:c})}})),response:{headers:o},request:{body:r}}}};function zct({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({type:"tool-call",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args),providerMetadata:r.thoughtSignature?{google:{thoughtSignature:r.thoughtSignature}}:void 0}))}function oV({groundingMetadata:e,generateId:t}){var n,r,s,o;if(!(e!=null&&e.groundingChunks))return;const i=[];for(const a of e.groundingChunks)if(a.web!=null)i.push({type:"source",sourceType:"url",id:t(),url:a.web.uri,title:(n=a.web.title)!=null?n:void 0});else if(a.retrievedContext!=null){const l=a.retrievedContext.uri,c=a.retrievedContext.fileSearchStore;if(l&&(l.startsWith("http://")||l.startsWith("https://")))i.push({type:"source",sourceType:"url",id:t(),url:l,title:(r=a.retrievedContext.title)!=null?r:void 0});else if(l){const u=(s=a.retrievedContext.title)!=null?s:"Unknown Document";let f="application/octet-stream",m;l.endsWith(".pdf")?(f="application/pdf",m=l.split("/").pop()):l.endsWith(".txt")?(f="text/plain",m=l.split("/").pop()):l.endsWith(".docx")?(f="application/vnd.openxmlformats-officedocument.wordprocessingml.document",m=l.split("/").pop()):l.endsWith(".doc")?(f="application/msword",m=l.split("/").pop()):(l.match(/\.(md|markdown)$/)&&(f="text/markdown"),m=l.split("/").pop()),i.push({type:"source",sourceType:"document",id:t(),mediaType:f,title:u,filename:m})}else if(c){const u=(o=a.retrievedContext.title)!=null?o:"Unknown Document";i.push({type:"source",sourceType:"document",id:t(),mediaType:"application/octet-stream",title:u,filename:c.split("/").pop()})}}return i.length>0?i:void 0}var Bae=()=>qt({webSearchQueries:Fr($t()).nullish(),retrievalQueries:Fr($t()).nullish(),searchEntryPoint:qt({renderedContent:$t()}).nullish(),groundingChunks:Fr(qt({web:qt({uri:$t(),title:$t().nullish()}).nullish(),retrievedContext:qt({uri:$t().nullish(),title:$t().nullish(),text:$t().nullish(),fileSearchStore:$t().nullish()}).nullish()})).nullish(),groundingSupports:Fr(qt({segment:qt({startIndex:Zs().nullish(),endIndex:Zs().nullish(),text:$t().nullish()}),segment_text:$t().nullish(),groundingChunkIndices:Fr(Zs()).nullish(),supportChunkIndices:Fr(Zs()).nullish(),confidenceScores:Fr(Zs()).nullish(),confidenceScore:Fr(Zs()).nullish()})).nullish(),retrievalMetadata:Ba([qt({webDynamicRetrievalScore:Zs()}),qt({})]).nullish()}),zae=()=>qt({parts:Fr(Ba([qt({functionCall:qt({name:$t(),args:O0()}),thoughtSignature:$t().nullish()}),qt({inlineData:qt({mimeType:$t(),data:$t()})}),qt({executableCode:qt({language:$t(),code:$t()}).nullish(),codeExecutionResult:qt({outcome:$t(),output:$t()}).nullish(),text:$t().nullish(),thought:im().nullish(),thoughtSignature:$t().nullish()})])).nullish()}),g4=()=>qt({category:$t().nullish(),probability:$t().nullish(),probabilityScore:Zs().nullish(),severity:$t().nullish(),severityScore:Zs().nullish(),blocked:im().nullish()}),jae=qt({cachedContentTokenCount:Zs().nullish(),thoughtsTokenCount:Zs().nullish(),promptTokenCount:Zs().nullish(),candidatesTokenCount:Zs().nullish(),totalTokenCount:Zs().nullish(),trafficType:$t().nullish()}),Uae=()=>qt({urlMetadata:Fr(qt({retrievedUrl:$t(),urlRetrievalStatus:$t()}))}),jct=Fc(()=>Mi(qt({candidates:Fr(qt({content:zae().nullish().or(qt({}).strict()),finishReason:$t().nullish(),safetyRatings:Fr(g4()).nullish(),groundingMetadata:Bae().nullish(),urlContextMetadata:Uae().nullish()})),usageMetadata:jae.nullish(),promptFeedback:qt({blockReason:$t().nullish(),safetyRatings:Fr(g4()).nullish()}).nullish()}))),Uct=Fc(()=>Mi(qt({candidates:Fr(qt({content:zae().nullish(),finishReason:$t().nullish(),safetyRatings:Fr(g4()).nullish(),groundingMetadata:Bae().nullish(),urlContextMetadata:Uae().nullish()})).nullish(),usageMetadata:jae.nullish(),promptFeedback:qt({blockReason:$t().nullish(),safetyRatings:Fr(g4()).nullish()}).nullish()}))),Hct=Olt({id:"google.code_execution",name:"code_execution",inputSchema:qt({language:$t().describe("The programming language of the code."),code:$t().describe("The code to be executed.")}),outputSchema:qt({outcome:$t().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:$t().describe("The output from the code execution.")})}),Vct=qt({fileSearchStoreNames:Fr($t()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:Zs().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:$t().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),qct=Fc(()=>Mi(Vct)),Gct=ak({id:"google.file_search",name:"file_search",inputSchema:qct}),Wct=ak({id:"google.google_search",name:"google_search",inputSchema:Fc(()=>Mi(qt({mode:ll(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:Zs().default(1)})))}),Yct=ak({id:"google.url_context",name:"url_context",inputSchema:Fc(()=>Mi(qt({})))}),Kct=ak({id:"google.vertex_rag_store",name:"vertex_rag_store",inputSchema:qt({ragCorpus:$t(),topK:Zs().optional()})}),Zct={googleSearch:Wct,urlContext:Yct,fileSearch:Gct,codeExecution:Hct,vertexRagStore:Kct},Jct=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:4}get provider(){return this.config.provider}async doGenerate(e){var t,n,r;const{prompt:s,n:o=1,size:i="1024x1024",aspectRatio:a="1:1",seed:l,providerOptions:c,headers:u,abortSignal:f}=e,m=[];i!=null&&m.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),l!=null&&m.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});const g=await w9({provider:"google",providerOptions:c,schema:Qct}),y=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,v={sampleCount:o};a!=null&&(v.aspectRatio=a),g&&Object.assign(v,g);const x={instances:[{prompt:s}],parameters:v},{responseHeaders:E,value:T}=await Xf({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:D0(await fl(this.config.headers),u),body:x,failedResponseHandler:tw,successfulResponseHandler:Qf(Xct),abortSignal:f,fetch:this.config.fetch});return{images:T.predictions.map(k=>k.bytesBase64Encoded),warnings:m??[],providerMetadata:{google:{images:T.predictions.map(k=>({}))}},response:{timestamp:y,modelId:this.modelId,headers:E}}}},Xct=Fc(()=>Mi(qt({predictions:Fr(qt({bytesBase64Encoded:$t()})).default([])}))),Qct=Fc(()=>Mi(qt({personGeneration:ll(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:ll(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function Hae(e={}){var t,n;const r=(t=Fae(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",s=(n=e.name)!=null?n:"google.generative-ai",o=()=>zb({"x-goog-api-key":xlt({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},`ai-sdk/google/${Nct}`),i=u=>{var f;return new Bct(u,{provider:s,baseURL:r,headers:o,generateId:(f=e.generateId)!=null?f:Aae,supportedUrls:()=>({"*":[new RegExp(`^${r}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},a=u=>new Mct(u,{provider:s,baseURL:r,headers:o,fetch:e.fetch}),l=(u,f={})=>new Jct(u,f,{provider:s,baseURL:r,headers:o,fetch:e.fetch}),c=function(u){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return i(u)};return c.languageModel=i,c.chat=i,c.generativeAI=i,c.embedding=a,c.textEmbedding=a,c.textEmbeddingModel=a,c.image=l,c.imageModel=l,c.tools=Zct,c}Hae();var KA,iV;function eut(){if(iV)return KA;iV=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,s=(u,f)=>{for(var m in f)e(u,m,{get:f[m],enumerable:!0})},o=(u,f,m,g)=>{if(f&&typeof f=="object"||typeof f=="function")for(let y of n(f))!r.call(u,y)&&y!==m&&e(u,y,{get:()=>f[y],enumerable:!(g=t(f,y))||g.enumerable});return u},i=u=>o(e({},"__esModule",{value:!0}),u),a={};s(a,{SYMBOL_FOR_REQ_CONTEXT:()=>l,getContext:()=>c}),KA=i(a);const l=Symbol.for("@vercel/request-context");function c(){var f,m;return((m=(f=globalThis[l])==null?void 0:f.get)==null?void 0:m.call(f))??{}}return KA}var ZA,aV;function tut(){if(aV)return ZA;aV=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,s=(f,m)=>{for(var g in m)e(f,g,{get:m[g],enumerable:!0})},o=(f,m,g,y)=>{if(m&&typeof m=="object"||typeof m=="function")for(let v of n(m))!r.call(f,v)&&v!==g&&e(f,v,{get:()=>m[v],enumerable:!(y=t(m,v))||y.enumerable});return f},i=f=>o(e({},"__esModule",{value:!0}),f),a={};s(a,{getContext:()=>l.getContext,getVercelOidcToken:()=>c,getVercelOidcTokenSync:()=>u}),ZA=i(a);var l=eut();async function c(){return""}function u(){return""}return ZA}var Vae=tut(),nut="vercel.ai.gateway.error",JA=Symbol.for(nut),lV,cV,tc=class qae extends(cV=Error,lV=JA,cV){constructor({message:t,statusCode:n=500,cause:r}){super(t),this[lV]=!0,this.statusCode=n,this.cause=r}static isInstance(t){return qae.hasMarker(t)}static hasMarker(t){return typeof t=="object"&&t!==null&&JA in t&&t[JA]===!0}},Gae="GatewayAuthenticationError",rut=`vercel.ai.gateway.error.${Gae}`,uV=Symbol.for(rut),dV,fV,S9=class Wae extends(fV=tc,dV=uV,fV){constructor({message:t="Authentication failed",statusCode:n=401,cause:r}={}){super({message:t,statusCode:n,cause:r}),this[dV]=!0,this.name=Gae,this.type="authentication_error"}static isInstance(t){return tc.hasMarker(t)&&uV in t}static createContextualError({apiKeyProvided:t,oidcTokenProvided:n,message:r="Authentication failed",statusCode:s=401,cause:o}){let i;return t?i=`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:n?i=`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:i=`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,new Wae({message:i,statusCode:s,cause:o})}},Yae="GatewayInvalidRequestError",sut=`vercel.ai.gateway.error.${Yae}`,hV=Symbol.for(sut),pV,mV,out=class extends(mV=tc,pV=hV,mV){constructor({message:e="Invalid request",statusCode:t=400,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[pV]=!0,this.name=Yae,this.type="invalid_request_error"}static isInstance(e){return tc.hasMarker(e)&&hV in e}},Kae="GatewayRateLimitError",iut=`vercel.ai.gateway.error.${Kae}`,gV=Symbol.for(iut),bV,yV,aut=class extends(yV=tc,bV=gV,yV){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[bV]=!0,this.name=Kae,this.type="rate_limit_exceeded"}static isInstance(e){return tc.hasMarker(e)&&gV in e}},Zae="GatewayModelNotFoundError",lut=`vercel.ai.gateway.error.${Zae}`,vV=Symbol.for(lut),cut=jb(()=>Mi(qt({modelId:$t()}))),xV,wV,Jae=class extends(wV=tc,xV=vV,wV){constructor({message:e="Model not found",statusCode:t=404,modelId:n,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[xV]=!0,this.name=Zae,this.type="model_not_found",this.modelId=n}static isInstance(e){return tc.hasMarker(e)&&vV in e}},Xae="GatewayInternalServerError",uut=`vercel.ai.gateway.error.${Xae}`,EV=Symbol.for(uut),_V,SV,TV=class extends(SV=tc,_V=EV,SV){constructor({message:e="Internal server error",statusCode:t=500,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[_V]=!0,this.name=Xae,this.type="internal_server_error"}static isInstance(e){return tc.hasMarker(e)&&EV in e}},Qae="GatewayResponseError",dut=`vercel.ai.gateway.error.${Qae}`,CV=Symbol.for(dut),kV,AV,fut=class extends(AV=tc,kV=CV,AV){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:n,validationError:r,cause:s}={}){super({message:e,statusCode:t,cause:s}),this[kV]=!0,this.name=Qae,this.type="response_error",this.response=n,this.validationError=r}static isInstance(e){return tc.hasMarker(e)&&CV in e}};async function NV({response:e,statusCode:t,defaultMessage:n="Gateway request failed",cause:r,authMethod:s}){const o=await Jf({value:e,schema:hut});if(!o.success)return new fut({message:`Invalid error response format: ${n}`,statusCode:t,response:e,validationError:o.error,cause:r});const i=o.value,a=i.error.type,l=i.error.message;switch(a){case"authentication_error":return S9.createContextualError({apiKeyProvided:s==="api-key",oidcTokenProvided:s==="oidc",statusCode:t,cause:r});case"invalid_request_error":return new out({message:l,statusCode:t,cause:r});case"rate_limit_exceeded":return new aut({message:l,statusCode:t,cause:r});case"model_not_found":{const c=await Jf({value:i.error.param,schema:cut});return new Jae({message:l,statusCode:t,modelId:c.success?c.value.modelId:void 0,cause:r})}case"internal_server_error":return new TV({message:l,statusCode:t,cause:r});default:return new TV({message:l,statusCode:t,cause:r})}}var hut=jb(()=>Mi(qt({error:qt({message:$t(),type:$t().nullish(),param:O0().nullish(),code:Ba([$t(),Zs()]).nullish()})})));function P0(e,t){var n;return tc.isInstance(e)?e:La.isInstance(e)?NV({response:put(e),statusCode:(n=e.statusCode)!=null?n:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):NV({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}function put(e){if(e.data!==void 0)return e.data;if(e.responseBody!=null)try{return JSON.parse(e.responseBody)}catch{return e.responseBody}return{}}var ele="ai-gateway-auth-method";async function pb(e){const t=await Jf({value:e[ele],schema:mut});return t.success?t.value:void 0}var mut=jb(()=>Mi(Ba([Xo("api-key"),Xo("oidc")]))),IV=class{constructor(e){this.config=e}async getAvailableModels(){try{const{value:e}=await XH({url:`${this.config.baseURL}/config`,headers:await fl(this.config.headers()),successfulResponseHandler:Qf(gut),failedResponseHandler:Tm({errorSchema:d0(),errorToMessage:t=>t}),fetch:this.config.fetch});return e}catch(e){throw await P0(e)}}async getCredits(){try{const e=new URL(this.config.baseURL),{value:t}=await XH({url:`${e.origin}/v1/credits`,headers:await fl(this.config.headers()),successfulResponseHandler:Qf(but),failedResponseHandler:Tm({errorSchema:d0(),errorToMessage:n=>n}),fetch:this.config.fetch});return t}catch(e){throw await P0(e)}}},gut=jb(()=>Mi(qt({models:Fr(qt({id:$t(),name:$t(),description:$t().nullish(),pricing:qt({input:$t(),output:$t(),input_cache_read:$t().nullish(),input_cache_write:$t().nullish()}).transform(({input:e,output:t,input_cache_read:n,input_cache_write:r})=>({input:e,output:t,...n?{cachedInputTokens:n}:{},...r?{cacheCreationInputTokens:r}:{}})).nullish(),specification:qt({specificationVersion:Xo("v2"),provider:$t(),modelId:$t()}),modelType:ll(["language","embedding","image"]).nullish()}))}))),but=jb(()=>Mi(qt({balance:$t(),total_used:$t()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),yut=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){const{abortSignal:t,...n}=e;return{args:this.maybeEncodeFileParts(n),warnings:[]}}async doGenerate(e){const{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,s=await fl(this.config.headers());try{const{responseHeaders:o,value:i,rawValue:a}=await Xf({url:this.getUrl(),headers:D0(s,e.headers,this.getModelConfigHeaders(this.modelId,!1),await fl(this.config.o11yHeaders)),body:t,successfulResponseHandler:Qf(d0()),failedResponseHandler:Tm({errorSchema:d0(),errorToMessage:l=>l}),...r&&{abortSignal:r},fetch:this.config.fetch});return{...i,request:{body:t},response:{headers:o,body:a},warnings:n}}catch(o){throw await P0(o,await pb(s))}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,s=await fl(this.config.headers());try{const{value:o,responseHeaders:i}=await Xf({url:this.getUrl(),headers:D0(s,e.headers,this.getModelConfigHeaders(this.modelId,!0),await fl(this.config.o11yHeaders)),body:t,successfulResponseHandler:Oae(d0()),failedResponseHandler:Tm({errorSchema:d0(),errorToMessage:a=>a}),...r&&{abortSignal:r},fetch:this.config.fetch});return{stream:o.pipeThrough(new TransformStream({start(a){n.length>0&&a.enqueue({type:"stream-start",warnings:n})},transform(a,l){if(a.success){const c=a.value;if(c.type==="raw"&&!e.includeRawChunks)return;c.type==="response-metadata"&&c.timestamp&&typeof c.timestamp=="string"&&(c.timestamp=new Date(c.timestamp)),l.enqueue(c)}else l.error(a.error)}})),request:{body:t},response:{headers:i}}}catch(o){throw await P0(o,await pb(s))}}isFilePart(e){return e&&typeof e=="object"&&"type"in e&&e.type==="file"}maybeEncodeFileParts(e){for(const t of e.prompt)for(const n of t.content)if(this.isFilePart(n)){const r=n;if(r.data instanceof Uint8Array){const s=Uint8Array.from(r.data),o=Buffer.from(s).toString("base64");r.data=new URL(`data:${r.mediaType||"application/octet-stream"};base64,${o}`)}}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},vut=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){var s;const o=await fl(this.config.headers());try{const{responseHeaders:i,value:a,rawValue:l}=await Xf({url:this.getUrl(),headers:D0(o,t??{},this.getModelConfigHeaders(),await fl(this.config.o11yHeaders)),body:{input:e.length===1?e[0]:e,...r?{providerOptions:r}:{}},successfulResponseHandler:Qf(xut),failedResponseHandler:Tm({errorSchema:d0(),errorToMessage:c=>c}),...n&&{abortSignal:n},fetch:this.config.fetch});return{embeddings:a.embeddings,usage:(s=a.usage)!=null?s:void 0,providerMetadata:a.providerMetadata,response:{headers:i,body:l}}}catch(i){throw await P0(i,await pb(o))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},xut=jb(()=>Mi(qt({embeddings:Fr(Fr(Zs())),usage:qt({tokens:Zs()}).nullish(),providerMetadata:_m($t(),_m($t(),O0())).optional()}))),wut=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxImagesPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:s,providerOptions:o,headers:i,abortSignal:a}){var l;const c=await fl(this.config.headers());try{const{responseHeaders:u,value:f,rawValue:m}=await Xf({url:this.getUrl(),headers:D0(c,i??{},this.getModelConfigHeaders(),await fl(this.config.o11yHeaders)),body:{prompt:e,n:t,...n&&{size:n},...r&&{aspectRatio:r},...s&&{seed:s},...o&&{providerOptions:o}},successfulResponseHandler:Qf(_ut),failedResponseHandler:Tm({errorSchema:d0(),errorToMessage:g=>g}),...a&&{abortSignal:a},fetch:this.config.fetch});return{images:f.images,warnings:(l=f.warnings)!=null?l:[],providerMetadata:f.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:u}}}catch(u){throw P0(u,await pb(c))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":"2","ai-model-id":this.modelId}}},Eut=qt({images:Fr(O0()).optional()}).catchall(O0()),_ut=qt({images:Fr($t()),warnings:Fr(qt({type:Xo("other"),message:$t()})).optional(),providerMetadata:_m($t(),Eut).optional()});async function Sut(){var e;return(e=Vae.getContext().headers)==null?void 0:e["x-vercel-id"]}var Tut="2.0.18",Cut="0.0.1";function kut(e={}){var t,n;let r=null,s=null;const o=(t=e.metadataCacheRefreshMillis)!=null?t:1e3*60*5;let i=0;const a=(n=Fae(e.baseURL))!=null?n:"https://ai-gateway.vercel.sh/v1/ai",l=async()=>{const y=await Nut(e);if(y)return zb({Authorization:`Bearer ${y.token}`,"ai-gateway-protocol-version":Cut,[ele]:y.authMethod,...e.headers},`ai-sdk/gateway/${Tut}`);throw S9.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},c=()=>{const y=G_({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),v=G_({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),x=G_({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{const E=await Sut();return{...y&&{"ai-o11y-deployment-id":y},...v&&{"ai-o11y-environment":v},...x&&{"ai-o11y-region":x},...E&&{"ai-o11y-request-id":E}}}},u=y=>new yut(y,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),f=async()=>{var y,v,x;const E=(x=(v=(y=e._internal)==null?void 0:y.currentDate)==null?void 0:v.call(y).getTime())!=null?x:Date.now();return(!r||E-i>o)&&(i=E,r=new IV({baseURL:a,headers:l,fetch:e.fetch}).getAvailableModels().then(T=>(s=T,T)).catch(async T=>{throw await P0(T,await pb(await l()))})),s?Promise.resolve(s):r},m=async()=>new IV({baseURL:a,headers:l,fetch:e.fetch}).getCredits().catch(async y=>{throw await P0(y,await pb(await l()))}),g=function(y){if(new.target)throw new Error("The Gateway Provider model function cannot be called with the new keyword.");return u(y)};return g.getAvailableModels=f,g.getCredits=m,g.imageModel=y=>new wut(y,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),g.languageModel=u,g.textEmbeddingModel=y=>new vut(y,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),g}var Aut=kut();async function Nut(e){const t=G_({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await Vae.getVercelOidcToken(),authMethod:"oidc"}}catch{return null}}var Iut=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof globalThis=="object"?globalThis:{},Jp="1.9.0",RV=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Rut(e){var t=new Set([e]),n=new Set,r=e.match(RV);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(s.prerelease!=null)return function(l){return l===e};function o(a){return n.add(a),!1}function i(a){return t.add(a),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var c=l.match(RV);if(!c)return o(l);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||s.major!==u.major?o(l):s.major===0?s.minor===u.minor&&s.patch<=u.patch?i(l):o(l):s.minor<=u.minor?i(l):o(l)}}var Mut=Rut(Jp),Out=Jp.split(".")[0],nw=Symbol.for("opentelemetry.js.api."+Out),rw=Iut;function T9(e,t,n,r){var s;r===void 0&&(r=!1);var o=rw[nw]=(s=rw[nw])!==null&&s!==void 0?s:{version:Jp};if(!r&&o[e]){var i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(i.stack||i.message),!1}if(o.version!==Jp){var i=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+e+" does not match previously registered API v"+Jp);return n.error(i.stack||i.message),!1}return o[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Jp+"."),!0}function sw(e){var t,n,r=(t=rw[nw])===null||t===void 0?void 0:t.version;if(!(!r||!Mut(r)))return(n=rw[nw])===null||n===void 0?void 0:n[e]}function C9(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Jp+".");var n=rw[nw];n&&delete n[e]}var Dut=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},Put=function(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Lut=(function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return iv("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return iv("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return iv("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return iv("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return iv("verbose",this._namespace,t)},e})();function iv(e,t,n){var r=sw("diag");if(r)return n.unshift(t),r[e].apply(r,Put([],Dut(n),!1))}var Bl;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Bl||(Bl={}));function $ut(e,t){e<Bl.NONE?e=Bl.NONE:e>Bl.ALL&&(e=Bl.ALL),t=t||{};function n(r,s){var o=t[r];return typeof o=="function"&&e>=s?o.bind(t):function(){}}return{error:n("error",Bl.ERROR),warn:n("warn",Bl.WARN),info:n("info",Bl.INFO),debug:n("debug",Bl.DEBUG),verbose:n("verbose",Bl.VERBOSE)}}var Fut=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},But=function(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},zut="diag",b4=(function(){function e(){function t(s){return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=sw("diag");if(a)return a[s].apply(a,But([],Fut(o),!1))}}var n=this,r=function(s,o){var i,a,l;if(o===void 0&&(o={logLevel:Bl.INFO}),s===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((i=c.stack)!==null&&i!==void 0?i:c.message),!1}typeof o=="number"&&(o={logLevel:o});var u=sw("diag"),f=$ut((a=o.logLevel)!==null&&a!==void 0?a:Bl.INFO,s);if(u&&!o.suppressOverrideMessage){var m=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+m),f.warn("Current logger will overwrite one already registered from "+m)}return T9("diag",f,n,!0)};n.setLogger=r,n.disable=function(){C9(zut,n)},n.createComponentLogger=function(s){return new Lut(s)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e})();function jut(e){return Symbol.for(e)}var Uut=(function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,s){var o=new e(n._currentContext);return o._currentContext.set(r,s),o},n.deleteValue=function(r){var s=new e(n._currentContext);return s._currentContext.delete(r),s}}return e})(),Hut=new Uut,Vut=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},qut=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Gut=(function(){function e(){}return e.prototype.active=function(){return Hut},e.prototype.with=function(t,n,r){for(var s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return n.call.apply(n,qut([r],Vut(s),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e})(),Wut=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},Yut=function(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},XA="context",Kut=new Gut,tle=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return T9(XA,t,b4.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var s,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(s=this._getContextManager()).with.apply(s,Yut([t,n,r],Wut(o),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return sw(XA)||Kut},e.prototype.disable=function(){this._getContextManager().disable(),C9(XA,b4.instance())},e})(),ZI;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(ZI||(ZI={}));var nle="0000000000000000",rle="00000000000000000000000000000000",Zut={traceId:rle,spanId:nle,traceFlags:ZI.NONE},ox=(function(){function e(t){t===void 0&&(t=Zut),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e})(),k9=jut("OpenTelemetry Context Key SPAN");function A9(e){return e.getValue(k9)||void 0}function Jut(){return A9(tle.getInstance().active())}function N9(e,t){return e.setValue(k9,t)}function Xut(e){return e.deleteValue(k9)}function Qut(e,t){return N9(e,new ox(t))}function sle(e){var t;return(t=A9(e))===null||t===void 0?void 0:t.spanContext()}var edt=/^([0-9a-f]{32})$/i,tdt=/^[0-9a-f]{16}$/i;function ndt(e){return edt.test(e)&&e!==rle}function rdt(e){return tdt.test(e)&&e!==nle}function ole(e){return ndt(e.traceId)&&rdt(e.spanId)}function sdt(e){return new ox(e)}var QA=tle.getInstance(),ile=(function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=QA.active());var s=!!(n!=null&&n.root);if(s)return new ox;var o=r&&sle(r);return odt(o)&&ole(o)?new ox(o):new ox},e.prototype.startActiveSpan=function(t,n,r,s){var o,i,a;if(!(arguments.length<2)){arguments.length===2?a=n:arguments.length===3?(o=n,a=r):(o=n,i=r,a=s);var l=i??QA.active(),c=this.startSpan(t,o,l),u=N9(l,c);return QA.with(u,a,void 0,c)}},e})();function odt(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var idt=new ile,adt=(function(){function e(t,n,r,s){this._provider=t,this.name=n,this.version=r,this.options=s}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,s){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):idt},e})(),ldt=(function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new ile},e})(),cdt=new ldt,MV=(function(){function e(){}return e.prototype.getTracer=function(t,n,r){var s;return(s=this.getDelegateTracer(t,n,r))!==null&&s!==void 0?s:new adt(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:cdt},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,n,r)},e})(),y4;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(y4||(y4={}));var eN="trace",udt=(function(){function e(){this._proxyTracerProvider=new MV,this.wrapSpanContext=sdt,this.isSpanContextValid=ole,this.deleteSpan=Xut,this.getSpan=A9,this.getActiveSpan=Jut,this.getSpanContext=sle,this.setSpan=N9,this.setSpanContext=Qut}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=T9(eN,this._proxyTracerProvider,b4.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return sw(eN)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){C9(eN,b4.instance()),this._proxyTracerProvider=new MV},e})(),ddt=udt.getInstance(),fdt=Object.defineProperty,hdt=(e,t)=>{for(var n in t)fdt(e,n,{get:t[n],enumerable:!0})},ale="AI_NoOutputSpecifiedError",lle=`vercel.ai.error.${ale}`,pdt=Symbol.for(lle),cle,mdt=class extends Sr{constructor({message:e="No output specified."}={}){super({name:ale,message:e}),this[cle]=!0}static isInstance(e){return Sr.hasMarker(e,lle)}};cle=pdt;function gdt(e){const t="AI SDK Warning:";switch(e.type){case"unsupported-setting":{let n=`${t} The "${e.setting}" setting is not supported by this model`;return e.details&&(n+=` - ${e.details}`),n}case"unsupported-tool":{const n="name"in e.tool?e.tool.name:"unknown tool";let r=`${t} The tool "${n}" is not supported by this model`;return e.details&&(r+=` - ${e.details}`),r}case"other":return`${t} ${e.message}`;default:return`${t} ${JSON.stringify(e,null,2)}`}}var bdt="AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.",OV=!1,ydt=e=>{if(e.length===0)return;const t=globalThis.AI_SDK_LOG_WARNINGS;if(t!==!1){if(typeof t=="function"){t(e);return}OV||(OV=!0,console.info(bdt));for(const n of e)console.warn(gdt(n))}},ule="AI_InvalidArgumentError",dle=`vercel.ai.error.${ule}`,vdt=Symbol.for(dle),fle,id=class extends Sr{constructor({parameter:e,value:t,message:n}){super({name:ule,message:`Invalid argument for parameter ${e}: ${n}`}),this[fle]=!0,this.parameter=e,this.value=t}static isInstance(e){return Sr.hasMarker(e,dle)}};fle=vdt;var hle="AI_InvalidToolInputError",ple=`vercel.ai.error.${hle}`,xdt=Symbol.for(ple),mle,gle=class extends Sr{constructor({toolInput:e,toolName:t,cause:n,message:r=`Invalid input for tool ${t}: ${Yw(n)}`}){super({name:hle,message:r,cause:n}),this[mle]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return Sr.hasMarker(e,ple)}};mle=xdt;var ble="AI_NoObjectGeneratedError",yle=`vercel.ai.error.${ble}`,wdt=Symbol.for(yle),vle,DV=class extends Sr{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:s,finishReason:o}){super({name:ble,message:e,cause:t}),this[vle]=!0,this.text=n,this.response=r,this.usage=s,this.finishReason=o}static isInstance(e){return Sr.hasMarker(e,yle)}};vle=wdt;var xle="AI_NoSuchToolError",wle=`vercel.ai.error.${xle}`,Edt=Symbol.for(wle),Ele,JI=class extends Sr{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:xle,message:n}),this[Ele]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Sr.hasMarker(e,wle)}};Ele=Edt;var _le="AI_ToolCallRepairError",Sle=`vercel.ai.error.${_le}`,_dt=Symbol.for(Sle),Tle,Sdt=class extends Sr{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${Yw(e)}`}){super({name:_le,message:n,cause:e}),this[Tle]=!0,this.originalError=t}static isInstance(e){return Sr.hasMarker(e,Sle)}};Tle=_dt;var Tdt=class extends Sr{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},Cle="AI_InvalidMessageRoleError",kle=`vercel.ai.error.${Cle}`,Cdt=Symbol.for(kle),Ale,kdt=class extends Sr{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Cle,message:t}),this[Ale]=!0,this.role=e}static isInstance(e){return Sr.hasMarker(e,kle)}};Ale=Cdt;var Nle="AI_DownloadError",Ile=`vercel.ai.error.${Nle}`,Adt=Symbol.for(Ile),Rle,tN=class extends Sr{constructor({url:e,statusCode:t,statusText:n,cause:r,message:s=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:Nle,message:s,cause:r}),this[Rle]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Sr.hasMarker(e,Ile)}};Rle=Adt;var Mle="AI_RetryError",Ole=`vercel.ai.error.${Mle}`,Ndt=Symbol.for(Ole),Dle,PV=class extends Sr{constructor({message:e,reason:t,errors:n}){super({name:Mle,message:e}),this[Dle]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Sr.hasMarker(e,Ole)}};Dle=Ndt;function LV(e){if(typeof e!="string"){if(e.specificationVersion!=="v2")throw new Tdt({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return e}return Idt().languageModel(e)}function Idt(){var e;return(e=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?e:Aut}var Rdt=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],Mdt=e=>{const t=typeof e=="string"?_9(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function Odt(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?Mdt(e):e}function Ddt({data:e,signatures:t}){const n=Odt(e),r=typeof n=="string"?_9(n.substring(0,Math.min(n.length,24))):n;for(const s of t)if(r.length>=s.bytesPrefix.length&&s.bytesPrefix.every((o,i)=>o===null||r[i]===o))return s.mediaType}var Ple="5.0.108",Pdt=async({url:e})=>{var t;const n=e.toString();try{const r=await fetch(n,{headers:zb({},`ai-sdk/${Ple}`,x9())});if(!r.ok)throw new tN({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mediaType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw tN.isInstance(r)?r:new tN({url:n,cause:r})}},Ldt=(e=Pdt)=>t=>Promise.all(t.map(async n=>n.isUrlSupportedByModel?null:e(n)));function $dt(e){try{const[t,n]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mediaType:void 0,base64Content:void 0}}}var Lle=Ba([$t(),h4(Uint8Array),h4(ArrayBuffer),flt(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function $le(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if(typeof e=="string")try{e=new URL(e)}catch{}if(e instanceof URL&&e.protocol==="data:"){const{mediaType:t,base64Content:n}=$dt(e.toString());if(t==null||n==null)throw new Sr({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:n,mediaType:t}}return{data:e,mediaType:void 0}}function Fdt(e){return typeof e=="string"?e:e instanceof ArrayBuffer?m4(new Uint8Array(e)):m4(e)}async function Bdt({prompt:e,supportedUrls:t,download:n=Ldt()}){const r=await jdt(e.messages,n,t);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(s=>zdt({message:s,downloadedAssets:r}))]}function zdt({message:e,downloadedAssets:t}){const n=e.role;switch(n){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"user",content:e.content.map(r=>Udt(r,t)).filter(r=>r.type!=="text"||r.text!==""),providerOptions:e.providerOptions};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"assistant",content:e.content.filter(r=>r.type!=="text"||r.text!==""||r.providerOptions!=null).map(r=>{const s=r.providerOptions;switch(r.type){case"file":{const{data:o,mediaType:i}=$le(r.data);return{type:"file",data:o,filename:r.filename,mediaType:i??r.mediaType,providerOptions:s}}case"reasoning":return{type:"reasoning",text:r.text,providerOptions:s};case"text":return{type:"text",text:r.text,providerOptions:s};case"tool-call":return{type:"tool-call",toolCallId:r.toolCallId,toolName:r.toolName,input:r.input,providerExecuted:r.providerExecuted,providerOptions:s};case"tool-result":return{type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,output:r.output,providerOptions:s}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.map(r=>({type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,output:r.output,providerOptions:r.providerOptions})),providerOptions:e.providerOptions};default:{const r=n;throw new kdt({role:r})}}}async function jdt(e,t,n){const r=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").map(o=>{var i;const a=(i=o.mediaType)!=null?i:o.type==="image"?"image/*":void 0;let l=o.type==="image"?o.image:o.data;if(typeof l=="string")try{l=new URL(l)}catch{}return{mediaType:a,data:l}}).filter(o=>o.data instanceof URL).map(o=>({url:o.data,isUrlSupportedByModel:o.mediaType!=null&&vlt({url:o.data.toString(),mediaType:o.mediaType,supportedUrls:n})})),s=await t(r);return Object.fromEntries(s.map((o,i)=>o==null?null:[r[i].url.toString(),{data:o.data,mediaType:o.mediaType}]).filter(o=>o!=null))}function Udt(e,t){var n;if(e.type==="text")return{type:"text",text:e.text,providerOptions:e.providerOptions};let r;const s=e.type;switch(s){case"image":r=e.image;break;case"file":r=e.data;break;default:throw new Error(`Unsupported part type: ${s}`)}const{data:o,mediaType:i}=$le(r);let a=i??e.mediaType,l=o;if(l instanceof URL){const c=t[l.toString()];c&&(l=c.data,a??(a=c.mediaType))}switch(s){case"image":return(l instanceof Uint8Array||typeof l=="string")&&(a=(n=Ddt({data:l,signatures:Rdt}))!=null?n:a),{type:"file",mediaType:a??"image/*",filename:void 0,data:l,providerOptions:e.providerOptions};case"file":{if(a==null)throw new Error("Media type is missing for file part");return{type:"file",mediaType:a,filename:e.filename,data:l,providerOptions:e.providerOptions}}}}function $V({maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:s,frequencyPenalty:o,seed:i,stopSequences:a}){if(e!=null){if(!Number.isInteger(e))throw new id({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new id({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new id({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new id({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new id({parameter:"topK",value:r,message:"topK must be a number"});if(s!=null&&typeof s!="number")throw new id({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(o!=null&&typeof o!="number")throw new id({parameter:"frequencyPenalty",value:o,message:"frequencyPenalty must be a number"});if(i!=null&&!Number.isInteger(i))throw new id({parameter:"seed",value:i,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:s,frequencyPenalty:o,stopSequences:a,seed:i}}function Hdt(e){return e!=null&&Object.keys(e).length>0}function Vdt({tools:e,toolChoice:t,activeTools:n}){return Hdt(e)?{tools:(n!=null?Object.entries(e).filter(([s])=>n.includes(s)):Object.entries(e)).map(([s,o])=>{const i=o.type;switch(i){case void 0:case"dynamic":case"function":return{type:"function",name:s,description:o.description,inputSchema:lk(o.inputSchema).jsonSchema,providerOptions:o.providerOptions};case"provider-defined":return{type:"provider-defined",name:s,id:o.id,args:o.args};default:{const a=i;throw new Error(`Unsupported tool type: ${a}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var ow=ult(()=>Ba([$at(),$t(),Zs(),im(),_m($t(),ow),Fr(ow)])),Rd=_m($t(),_m($t(),ow)),Fle=qt({type:Xo("text"),text:$t(),providerOptions:Rd.optional()}),qdt=qt({type:Xo("image"),image:Ba([Lle,h4(URL)]),mediaType:$t().optional(),providerOptions:Rd.optional()}),Ble=qt({type:Xo("file"),data:Ba([Lle,h4(URL)]),filename:$t().optional(),mediaType:$t(),providerOptions:Rd.optional()}),Gdt=qt({type:Xo("reasoning"),text:$t(),providerOptions:Rd.optional()}),Wdt=qt({type:Xo("tool-call"),toolCallId:$t(),toolName:$t(),input:O0(),providerOptions:Rd.optional(),providerExecuted:im().optional()}),Ydt=qat("type",[qt({type:Xo("text"),value:$t()}),qt({type:Xo("json"),value:ow}),qt({type:Xo("error-text"),value:$t()}),qt({type:Xo("error-json"),value:ow}),qt({type:Xo("content"),value:Fr(Ba([qt({type:Xo("text"),text:$t()}),qt({type:Xo("media"),data:$t(),mediaType:$t()})]))})]),zle=qt({type:Xo("tool-result"),toolCallId:$t(),toolName:$t(),output:Ydt,providerOptions:Rd.optional()}),Kdt=qt({role:Xo("system"),content:$t(),providerOptions:Rd.optional()}),Zdt=qt({role:Xo("user"),content:Ba([$t(),Fr(Ba([Fle,qdt,Ble]))]),providerOptions:Rd.optional()}),Jdt=qt({role:Xo("assistant"),content:Ba([$t(),Fr(Ba([Fle,Ble,Gdt,Wdt,zle]))]),providerOptions:Rd.optional()}),Xdt=qt({role:Xo("tool"),content:Fr(zle),providerOptions:Rd.optional()}),Qdt=Ba([Kdt,Zdt,Jdt,Xdt]);async function eft(e){if(e.prompt==null&&e.messages==null)throw new e1({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new e1({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new e1({prompt:e,message:"system must be a string"});let t;if(e.prompt!=null&&typeof e.prompt=="string")t=[{role:"user",content:e.prompt}];else if(e.prompt!=null&&Array.isArray(e.prompt))t=e.prompt;else if(e.messages!=null)t=e.messages;else throw new e1({prompt:e,message:"prompt or messages must be defined"});if(t.length===0)throw new e1({prompt:e,message:"messages must not be empty"});const n=await Jf({value:t,schema:Fr(Qdt)});if(!n.success)throw new e1({prompt:e,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:n.error});return{messages:t,system:e.system}}function tft(e){return S9.isInstance(e)||Jae.isInstance(e)?new Sr({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:e}):e}function XI({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function nft({model:e,settings:t,telemetry:n,headers:r}){var s;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((o,[i,a])=>(o[`ai.settings.${i}`]=a,o),{}),...Object.entries((s=n==null?void 0:n.metadata)!=null?s:{}).reduce((o,[i,a])=>(o[`ai.telemetry.metadata.${i}`]=a,o),{}),...Object.entries(r??{}).reduce((o,[i,a])=>(a!==void 0&&(o[`ai.request.headers.${i}`]=a),o),{})}}var rft={startSpan(){return v_},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(v_);if(typeof n=="function")return n(v_);if(typeof r=="function")return r(v_)}},v_={spanContext(){return sft},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},sft={traceId:"",spanId:"",traceFlags:0};function oft({isEnabled:e=!1,tracer:t}={}){return e?t||ddt.getTracer("ai"):rft}function QI({name:e,tracer:t,attributes:n,fn:r,endWhenDone:s=!0}){return t.startActiveSpan(e,{attributes:n},async o=>{try{const i=await r(o);return s&&o.end(),i}catch(i){try{jle(o,i)}finally{o.end()}throw i}})}function jle(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:y4.ERROR,message:t.message})):e.setStatus({code:y4.ERROR})}function b1({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,s])=>{if(s==null)return n;if(typeof s=="object"&&"input"in s&&typeof s.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const o=s.input();return o==null?n:{...n,[r]:o}}if(typeof s=="object"&&"output"in s&&typeof s.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const o=s.output();return o==null?n:{...n,[r]:o}}return{...n,[r]:s}},{})}function ift(e){return JSON.stringify(e.map(t=>({...t,content:typeof t.content=="string"?t.content:t.content.map(n=>n.type==="file"?{...n,data:n.data instanceof Uint8Array?Fdt(n.data):n.data}:n)})))}function aft(e,t){return{inputTokens:av(e.inputTokens,t.inputTokens),outputTokens:av(e.outputTokens,t.outputTokens),totalTokens:av(e.totalTokens,t.totalTokens),reasoningTokens:av(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:av(e.cachedInputTokens,t.cachedInputTokens)}}function av(e,t){return e==null&&t==null?void 0:(e??0)+(t??0)}function lft(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function cft({error:e,exponentialBackoffDelay:t}){const n=e.responseHeaders;if(!n)return t;let r;const s=n["retry-after-ms"];if(s){const i=parseFloat(s);Number.isNaN(i)||(r=i)}const o=n["retry-after"];if(o&&r===void 0){const i=parseFloat(o);Number.isNaN(i)?r=Date.parse(o)-Date.now():r=i*1e3}return r!=null&&!Number.isNaN(r)&&0<=r&&(r<60*1e3||r<t)?r:t}var uft=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2,abortSignal:r}={})=>async s=>Ule(s,{maxRetries:e,delayInMs:t,backoffFactor:n,abortSignal:r});async function Ule(e,{maxRetries:t,delayInMs:n,backoffFactor:r,abortSignal:s},o=[]){try{return await e()}catch(i){if(hb(i)||t===0)throw i;const a=Nae(i),l=[...o,i],c=l.length;if(c>t)throw new PV({message:`Failed after ${c} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:l});if(i instanceof Error&&La.isInstance(i)&&i.isRetryable===!0&&c<=t)return await mlt(cft({error:i,exponentialBackoffDelay:n}),{abortSignal:s}),Ule(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r,abortSignal:s},l);throw c===1?i:new PV({message:`Failed after ${c} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:l})}}function dft({maxRetries:e,abortSignal:t}){if(e!=null){if(!Number.isInteger(e))throw new id({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new id({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const n=e??2;return{maxRetries:n,retry:uft({maxRetries:n,abortSignal:t})}}function FV(e){const t=e.filter(n=>n.type==="text");if(t.length!==0)return t.map(n=>n.text).join("")}var fft=class{constructor({data:e,mediaType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mediaType=t}get base64(){return this.base64Data==null&&(this.base64Data=m4(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=_9(this.base64Data)),this.uint8ArrayData}};async function hft({toolCall:e,tools:t,repairToolCall:n,system:r,messages:s}){try{if(t==null)throw new JI({toolName:e.toolName});try{return await BV({toolCall:e,tools:t})}catch(o){if(n==null||!(JI.isInstance(o)||gle.isInstance(o)))throw o;let i=null;try{i=await n({toolCall:e,tools:t,inputSchema:({toolName:a})=>{const{inputSchema:l}=t[a];return lk(l).jsonSchema},system:r,messages:s,error:o})}catch(a){throw new Sdt({cause:a,originalError:o})}if(i==null)throw o;return await BV({toolCall:i,tools:t})}}catch(o){const i=await Sm({text:e.input}),a=i.success?i.value:e.input;return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:a,dynamic:!0,invalid:!0,error:o,providerMetadata:e.providerMetadata}}}async function BV({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new JI({toolName:e.toolName,availableTools:Object.keys(t)});const s=lk(r.inputSchema),o=e.input.trim()===""?await Jf({value:{},schema:s}):await Sm({text:e.input,schema:s});if(o.success===!1)throw new gle({toolName:n,toolInput:e.input,cause:o.error});return r.type==="dynamic"?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:o.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:e.toolCallId,toolName:n,input:o.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}var pft=class{constructor({content:e,finishReason:t,usage:n,warnings:r,request:s,response:o,providerMetadata:i}){this.content=e,this.finishReason=t,this.usage=n,this.warnings=r,this.request=s,this.response=o,this.providerMetadata=i}get text(){return this.content.filter(e=>e.type==="text").map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>e.type==="reasoning")}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>e.type==="file").map(e=>e.file)}get sources(){return this.content.filter(e=>e.type==="source")}get toolCalls(){return this.content.filter(e=>e.type==="tool-call")}get staticToolCalls(){return this.toolCalls.filter(e=>e.dynamic!==!0)}get dynamicToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!0)}get toolResults(){return this.content.filter(e=>e.type==="tool-result")}get staticToolResults(){return this.toolResults.filter(e=>e.dynamic!==!0)}get dynamicToolResults(){return this.toolResults.filter(e=>e.dynamic===!0)}};function mft(e){return({steps:t})=>t.length===e}async function gft({stopConditions:e,steps:t}){return(await Promise.all(e.map(n=>n({steps:t})))).some(n=>n)}function nN({output:e,tool:t,errorMode:n}){return n==="text"?{type:"error-text",value:Yw(e)}:n==="json"?{type:"error-json",value:zV(e)}:t!=null&&t.toModelOutput?t.toModelOutput(e):typeof e=="string"?{type:"text",value:e}:{type:"json",value:zV(e)}}function zV(e){return e===void 0?null:e}function bft({content:e,tools:t}){const n=[],r=e.filter(o=>o.type!=="source").filter(o=>(o.type!=="tool-result"||o.providerExecuted)&&(o.type!=="tool-error"||o.providerExecuted)).filter(o=>o.type!=="text"||o.text.length>0).map(o=>{switch(o.type){case"text":return{type:"text",text:o.text,providerOptions:o.providerMetadata};case"reasoning":return{type:"reasoning",text:o.text,providerOptions:o.providerMetadata};case"file":return{type:"file",data:o.file.base64,mediaType:o.file.mediaType,providerOptions:o.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:o.toolCallId,toolName:o.toolName,input:o.input,providerExecuted:o.providerExecuted,providerOptions:o.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:nN({tool:t==null?void 0:t[o.toolName],output:o.output,errorMode:"none"}),providerExecuted:!0,providerOptions:o.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:nN({tool:t==null?void 0:t[o.toolName],output:o.error,errorMode:"json"}),providerOptions:o.providerMetadata}}});r.length>0&&n.push({role:"assistant",content:r});const s=e.filter(o=>o.type==="tool-result"||o.type==="tool-error").filter(o=>!o.providerExecuted).map(o=>({type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:nN({tool:t==null?void 0:t[o.toolName],output:o.type==="tool-result"?o.output:o.error,errorMode:o.type==="tool-error"?"text":"none"}),...o.providerMetadata!=null?{providerOptions:o.providerMetadata}:{}}));return s.length>0&&n.push({role:"tool",content:s}),n}var yft=Zw({prefix:"aitxt",size:24});async function vft({model:e,tools:t,toolChoice:n,system:r,prompt:s,messages:o,maxRetries:i,abortSignal:a,headers:l,stopWhen:c=mft(1),experimental_output:u,experimental_telemetry:f,providerOptions:m,experimental_activeTools:g,activeTools:y=g,experimental_prepareStep:v,prepareStep:x=v,experimental_repairToolCall:E,experimental_download:T,experimental_context:k,_internal:{generateId:I=yft,currentDate:O=()=>new Date}={},onStepFinish:M,...P}){const j=LV(e),V=lft(c),{maxRetries:U,retry:z}=dft({maxRetries:i,abortSignal:a}),H=$V(P),F=zb(l??{},`ai/${Ple}`),G=nft({model:j,telemetry:f,headers:F,settings:{...H,maxRetries:U}}),X=await eft({system:r,prompt:s,messages:o}),J=oft(f);try{return await QI({name:"ai.generateText",attributes:b1({telemetry:f,attributes:{...XI({operationId:"ai.generateText",telemetry:f}),...G,"ai.model.provider":j.provider,"ai.model.id":j.modelId,"ai.prompt":{input:()=>JSON.stringify({system:r,prompt:s,messages:o})}}}),tracer:J,fn:async ee=>{var re,ie,Z,te,oe,Q,Te;const ge=$V(P);let Ce,fe=[],Fe=[];const De=[],Re=[];do{const nt=[...X.messages,...De],ot=await(x==null?void 0:x({model:j,steps:Re,stepNumber:Re.length,messages:nt})),Ut=LV((re=ot==null?void 0:ot.model)!=null?re:j),Vt=await Bdt({prompt:{system:(ie=ot==null?void 0:ot.system)!=null?ie:X.system,messages:(Z=ot==null?void 0:ot.messages)!=null?Z:nt},supportedUrls:await Ut.supportedUrls,download:T}),{toolChoice:Dt,tools:en}=Vdt({tools:t,toolChoice:(te=ot==null?void 0:ot.toolChoice)!=null?te:n,activeTools:(oe=ot==null?void 0:ot.activeTools)!=null?oe:y});Ce=await z(()=>{var Je;return QI({name:"ai.generateText.doGenerate",attributes:b1({telemetry:f,attributes:{...XI({operationId:"ai.generateText.doGenerate",telemetry:f}),...G,"ai.model.provider":Ut.provider,"ai.model.id":Ut.modelId,"ai.prompt.messages":{input:()=>ift(Vt)},"ai.prompt.tools":{input:()=>en==null?void 0:en.map(Le=>JSON.stringify(Le))},"ai.prompt.toolChoice":{input:()=>Dt!=null?JSON.stringify(Dt):void 0},"gen_ai.system":Ut.provider,"gen_ai.request.model":Ut.modelId,"gen_ai.request.frequency_penalty":P.frequencyPenalty,"gen_ai.request.max_tokens":P.maxOutputTokens,"gen_ai.request.presence_penalty":P.presencePenalty,"gen_ai.request.stop_sequences":P.stopSequences,"gen_ai.request.temperature":(Je=P.temperature)!=null?Je:void 0,"gen_ai.request.top_k":P.topK,"gen_ai.request.top_p":P.topP}}),tracer:J,fn:async Le=>{var Ve,_e,Y,L,B,ce,we,ze;const Be=await Ut.doGenerate({...ge,tools:en,toolChoice:Dt,responseFormat:u==null?void 0:u.responseFormat,prompt:Vt,providerOptions:m,abortSignal:a,headers:F}),ut={id:(_e=(Ve=Be.response)==null?void 0:Ve.id)!=null?_e:I(),timestamp:(L=(Y=Be.response)==null?void 0:Y.timestamp)!=null?L:O(),modelId:(ce=(B=Be.response)==null?void 0:B.modelId)!=null?ce:Ut.modelId,headers:(we=Be.response)==null?void 0:we.headers,body:(ze=Be.response)==null?void 0:ze.body};return Le.setAttributes(b1({telemetry:f,attributes:{"ai.response.finishReason":Be.finishReason,"ai.response.text":{output:()=>FV(Be.content)},"ai.response.toolCalls":{output:()=>{const an=jV(Be.content);return an==null?void 0:JSON.stringify(an)}},"ai.response.id":ut.id,"ai.response.model":ut.modelId,"ai.response.timestamp":ut.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(Be.providerMetadata),"ai.usage.promptTokens":Be.usage.inputTokens,"ai.usage.completionTokens":Be.usage.outputTokens,"gen_ai.response.finish_reasons":[Be.finishReason],"gen_ai.response.id":ut.id,"gen_ai.response.model":ut.modelId,"gen_ai.usage.input_tokens":Be.usage.inputTokens,"gen_ai.usage.output_tokens":Be.usage.outputTokens}})),{...Be,response:ut}}})});const xt=await Promise.all(Ce.content.filter(Je=>Je.type==="tool-call").map(Je=>hft({toolCall:Je,tools:t,repairToolCall:E,system:r,messages:nt})));for(const Je of xt){if(Je.invalid)continue;const Le=t[Je.toolName];(Le==null?void 0:Le.onInputAvailable)!=null&&await Le.onInputAvailable({input:Je.input,toolCallId:Je.toolCallId,messages:nt,abortSignal:a,experimental_context:k})}const pe=xt.filter(Je=>Je.invalid&&Je.dynamic);Fe=[];for(const Je of pe)Fe.push({type:"tool-error",toolCallId:Je.toolCallId,toolName:Je.toolName,input:Je.input,error:Nae(Je.error),dynamic:!0});fe=xt.filter(Je=>!Je.providerExecuted),t!=null&&Fe.push(...await xft({toolCalls:fe.filter(Je=>!Je.invalid),tools:t,tracer:J,telemetry:f,messages:nt,abortSignal:a,experimental_context:k}));const Ne=Eft({content:Ce.content,toolCalls:xt,toolOutputs:Fe});De.push(...bft({content:Ne,tools:t}));const $e=new pft({content:Ne,finishReason:Ce.finishReason,usage:Ce.usage,warnings:Ce.warnings,providerMetadata:Ce.providerMetadata,request:(Q=Ce.request)!=null?Q:{},response:{...Ce.response,messages:structuredClone(De)}});ydt((Te=Ce.warnings)!=null?Te:[]),Re.push($e),await(M==null?void 0:M($e))}while(fe.length>0&&Fe.length===fe.length&&!await gft({stopConditions:V,steps:Re}));ee.setAttributes(b1({telemetry:f,attributes:{"ai.response.finishReason":Ce.finishReason,"ai.response.text":{output:()=>FV(Ce.content)},"ai.response.toolCalls":{output:()=>{const nt=jV(Ce.content);return nt==null?void 0:JSON.stringify(nt)}},"ai.response.providerMetadata":JSON.stringify(Ce.providerMetadata),"ai.usage.promptTokens":Ce.usage.inputTokens,"ai.usage.completionTokens":Ce.usage.outputTokens}}));const tt=Re[Re.length-1];let de;return tt.finishReason==="stop"&&(de=await(u==null?void 0:u.parseOutput({text:tt.text},{response:tt.response,usage:tt.usage,finishReason:tt.finishReason}))),new wft({steps:Re,resolvedOutput:de})}})}catch(ee){throw tft(ee)}}async function xft({toolCalls:e,tools:t,tracer:n,telemetry:r,messages:s,abortSignal:o,experimental_context:i}){return(await Promise.all(e.map(async({toolCallId:l,toolName:c,input:u})=>{const f=t[c];if((f==null?void 0:f.execute)!=null)return QI({name:"ai.toolCall",attributes:b1({telemetry:r,attributes:{...XI({operationId:"ai.toolCall",telemetry:r}),"ai.toolCall.name":c,"ai.toolCall.id":l,"ai.toolCall.args":{output:()=>JSON.stringify(u)}}}),tracer:n,fn:async m=>{try{const g=Act({execute:f.execute.bind(f),input:u,options:{toolCallId:l,messages:s,abortSignal:o,experimental_context:i}});let y;for await(const v of g)v.type==="final"&&(y=v.output);try{m.setAttributes(b1({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(y)}}}))}catch{}return{type:"tool-result",toolCallId:l,toolName:c,input:u,output:y,dynamic:f.type==="dynamic"}}catch(g){return jle(m,g),{type:"tool-error",toolCallId:l,toolName:c,input:u,error:g,dynamic:f.type==="dynamic"}}}})}))).filter(l=>l!=null)}var wft=class{constructor(e){this.steps=e.steps,this.resolvedOutput=e.resolvedOutput}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get totalUsage(){return this.steps.reduce((e,t)=>aft(e,t.usage),{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0})}get experimental_output(){if(this.resolvedOutput==null)throw new mdt;return this.resolvedOutput}};function jV(e){const t=e.filter(n=>n.type==="tool-call");if(t.length!==0)return t.map(n=>({toolCallId:n.toolCallId,toolName:n.toolName,input:n.input}))}function Eft({content:e,toolCalls:t,toolOutputs:n}){return[...e.map(r=>{switch(r.type){case"text":case"reasoning":case"source":return r;case"file":return{type:"file",file:new fft(r)};case"tool-call":return t.find(s=>s.toolCallId===r.toolCallId);case"tool-result":{const s=t.find(o=>o.toolCallId===r.toolCallId);if(s==null)throw new Error(`Tool call ${r.toolCallId} not found.`);return r.isError?{type:"tool-error",toolCallId:r.toolCallId,toolName:r.toolName,input:s.input,error:r.result,providerExecuted:!0,dynamic:s.dynamic}:{type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,input:s.input,output:r.result,providerExecuted:!0,dynamic:s.dynamic}}}}),...n]}(class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}});function _ft(e){const t=["ROOT"];let n=-1,r=null;function s(l,c,u){switch(l){case'"':{n=c,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function o(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function i(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":s(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{o(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,t.pop();break}default:{n=l,s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const f=e.substring(r,l+1);!"false".startsWith(f)&&!"true".startsWith(f)&&!"null".startsWith(f)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?o(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l)):n=l;break}}}let a=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=e.substring(r,e.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}async function Sft(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await Sm({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await Sm({text:_ft(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}Zw({prefix:"aitxt",size:24});Zw({prefix:"aiobj",size:24});Zw({prefix:"aiobj",size:24});var Tft={};hdt(Tft,{object:()=>kft,text:()=>Cft});var Cft=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:e}){return{partial:e}},async parseOutput({text:e}){return e}}),kft=({schema:e})=>{const t=lk(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:n}){const r=await Sft(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const s=r.state;throw new Error(`Unsupported parse state: ${s}`)}}},async parseOutput({text:n},r){const s=await Sm({text:n});if(!s.success)throw new DV({message:"No object generated: could not parse the response.",cause:s.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const o=await Jf({value:s.value,schema:t});if(!o.success)throw new DV({message:"No object generated: response did not match schema.",cause:o.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return o.value}}};function Aft(e,t){const n=e.startsWith("/Users/")||e.startsWith("/home/")||e.startsWith("/var/")||/^[A-Z]:\\/.test(e);let r=e;const s=r.match(/localhost:\d+\/(.+)$/);return s&&(r=s[1]),r=r.replace(/^\/+/,""),r=r.split("?")[0],console.log("[Source Patch] Cleaned path:",r),n?{resolved:e}:t?{resolved:`${t}/${r}`}:{resolved:null,error:"No projectPath provided for relative path"}}function Nft(e,t,n){console.log("[Source Patch] FAST PATH: Image src change detected"),console.log("[Source Patch] New src:",n);const r=e.split(`
`);let s=t;s>r.length&&(s=r.length);const o=15,i=Math.max(0,s-o-1),a=Math.min(r.length,s+o);for(let l=i;l<a;l++){const c=r[l];if(/<img\s/i.test(c)||/src\s*=/i.test(c)){console.log("[Source Patch] Found potential img at line",l+1,":",c.substring(0,60));const u=c.match(/src\s*=\s*(['"])([^'"]*)\1/),f=c.match(/src\s*=\s*\{([^}]*)\}/);if(u){const m=u[1];return r[l]=c.replace(u[0],`src=${m}${n}${m}`),console.log("[Source Patch] Replaced quoted src attribute"),r.join(`
`)}else if(f)return r[l]=c.replace(f[0],`src="${n}"`),console.log("[Source Patch] Replaced JSX src expression"),r.join(`
`)}}return null}function Ift(e,t,n){console.log("[Source Patch] FAST PATH: Simple text change detected"),console.log("[Source Patch] Old text:",t.substring(0,50)),console.log("[Source Patch] New text:",n.substring(0,50));const r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=[new RegExp(`(>\\s*)${r}(\\s*<)`,"g"),new RegExp(`(['"])${r}\\1`,"g"),new RegExp(`(\`)${r}(\`)`,"g")];for(const o of s)if(o.test(e)){const i=e.replace(o,(a,l,c)=>(console.log("[Source Patch] Found match:",a.substring(0,50)),`${l}${n}${c||l}`));if(i!==e)return console.log("[Source Patch] FAST PATH SUCCESS - replaced text directly"),i}return null}function Rft(e,t,n,r){var y,v;console.log("[Source Patch] FAST PATH: CSS-only change detected"),console.log("[Source Patch] CSS changes:",r);const s=e.split(`
`);let o=t;o>s.length&&(o=s.length);const i=Object.entries(r).map(([x,E])=>`${x}: '${E}'`).join(", "),a=`{ ${i} }`,l=30,c=Math.max(0,o-l-1),u=Math.min(s.length,o+l),f=(y=n.tagName)==null?void 0:y.toLowerCase(),m=(v=n.className)==null?void 0:v.split(" ")[0],g=n.id;if(console.log("[Source Patch] CSS Fast Path searching for:"),console.log("[Source Patch]   tagName:",f),console.log("[Source Patch]   className:",m),console.log("[Source Patch]   targetLine:",o),console.log("[Source Patch]   searchRange:",c+1,"to",u),!m&&!g)return console.log("[Source Patch] No class or id - skipping fast path (too ambiguous)"),null;for(let x=c;x<u;x++){const E=s[x],T=new RegExp(`<${f}[\\s>]`,"i"),k=m?new RegExp(`className=["'\`][^"'\`]*\\b${m}\\b`):null,I=g?new RegExp(`id=["'\`]${g}["'\`]`):null,O=T.test(E),M=k&&k.test(E),P=I&&I.test(E);if(O&&M||O&&P||P&&!O){console.log("[Source Patch] Found element at line",x+1,":",E.substring(0,60));const V=E.match(/style=\{(\{[^}]*\})\}/),U=E.match(/style="([^"]*)"/);if(V){const z=V[1],H=Object.entries(r).filter(([F])=>!z.includes(F)).map(([F,G])=>`${F}: '${G}'`).join(", ");if(H){const F=z.replace(/\s*\}$/,"")+", "+H+" }";return s[x]=E.replace(V[0],`style={${F}}`),console.log("[Source Patch] Merged into existing style prop"),s.join(`
`)}else return console.log("[Source Patch] Style properties already exist - no change needed"),e}else if(U){const H=U[1].split(";").filter(G=>G.trim()).map(G=>{const[X,J]=G.split(":").map(re=>re.trim());return`${X.replace(/-([a-z])/g,(re,ie)=>ie.toUpperCase())}: '${J}'`}).join(", "),F=H?`{ ${H}, ${i} }`:a;return s[x]=E.replace(U[0],`style={${F}}`),console.log("[Source Patch] Converted string style and merged"),s.join(`
`)}else{const z=E.match(new RegExp(`(<${f})([\\s>])`,"i"));if(z)return s[x]=E.replace(z[0],`${z[1]} style={${a}}${z[2]}`),console.log("[Source Patch] Added new style prop"),s.join(`
`)}}}return null}async function Mft(e,t,n,r){var s;if(!((s=window.electronAPI)!=null&&s.fastApply))return{success:!1,error:"Fast Apply not available"};try{console.log("[Source Patch] Checking Fast Apply availability...");const o=await window.electronAPI.fastApply.getStatus();if(!o.activeModel)return{success:!1,error:"No model selected"};console.log("[Source Patch] Fast Apply has active model:",o.activeModel);const i=Object.keys(n).length>0,a=r&&/(?:remove|delete|hide)\s+(?:this|that|it|the|element)?/i.test(r);let l="";const c=t.className?` className="${t.className.split(" ")[0]}"`:"",u=`<${t.tagName}${c}>`;if(a)l=`FIND: ${u}
REPLACE WITH: {false && ${u}...${t.tagName}>}`;else if(i){const v=Object.entries(n).map(([E,T])=>`${E}: '${T}'`).join(", "),x=`<${t.tagName} style={{ ${v} }}${c}>`;l=`FIND: ${u}
REPLACE WITH: ${x}`}else l=r||"";const f=await window.electronAPI.fastApply.apply(e,l);if(!f.success||!f.code)return{success:!1,error:f.error||"Unknown error"};const m=[/^The provided/i,/^I cannot/i,/^I apologize/i,/^Unfortunately/i,/^This (code|update|change)/i,/^Here'?s (how|an example)/i,/does not make sense/i,/is not (a )?valid/i,/you (should|can|need to)/i],g=f.code.trim().split(`
`)[0];return m.some(v=>v.test(g))?(console.log("[Source Patch] Fast Apply returned PROSE instead of code - rejecting"),{success:!1,error:"Model returned prose instead of code"}):{success:!0,code:f.code,durationMs:f.durationMs}}catch(o){return console.log("[Source Patch] Fast Apply error:",o),{success:!1,error:String(o)}}}async function Oft(e,t,n,r,s,o,i,a,l){var T,k,I;if(!((k=(T=window.electronAPI)==null?void 0:T.aiSdk)!=null&&k.generate))return console.log("[Source Patch] AI SDK generate not available"),null;const c=Object.keys(n).length>0,u=c?Object.entries(n).map(([O,M])=>`${O.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${M}`).join("; "):"";let f="";if(c&&l)f=`CSS changes to apply: ${u}

User's request: "${l}"`;else if(c)f=`CSS changes to apply: ${u}`;else if(l)f=`User's request: "${l}"`;else return console.log("[Source Patch] No changes specified, skipping"),null;const m=e.split(`
`),g=o<=m.length,y=!g||t.text||t.className;let v="";if(y?(v=`1. SEARCH the snippet for a <${t.tagName}> element`,t.text&&(v+=` containing text "${t.text.substring(0,50)}"`),t.className&&(v+=` with class "${t.className.split(" ")[0]}"`)):v=`1. Find the JSX element near line ${o} (should be near the middle of the snippet)`,c&&(v+=`
2. MODIFY the existing element's opening tag to add/merge a style prop - DO NOT create a duplicate element
3. If using Tailwind, convert to Tailwind classes where appropriate
4. The result should have the SAME NUMBER of elements - only the style prop changes`),l){const O=/^["'][^"']+["']$/.test(l.trim())||/(?:change|set|update)\s+(?:text|label|content|title)/i.test(l)||/text\s*(?:to|:|=)/i.test(l);/(?:remove|delete|hide)\s+(?:this|that|it|the)/i.test(l)?v+=`
2. To remove/delete/hide the element, add style={{ display: 'none' }} to it
3. Or if the user wants it fully removed, wrap it in {false && <element>...</element>}`:(O||!c)&&(v+=`
2. Update the text content of the element based on the user's request
3. If the request is quoted text like "New Text", use that as the new content`)}v+=`
${c?"5":"3"}. Output ONLY the modified snippet (lines ${i+1} to ${a}), no explanations
${c?"6":"4"}. Preserve exact indentation and formatting
${c?"7":"5"}. CRITICAL: Do NOT duplicate elements - modify in-place`;const x="You are a React/TypeScript code modifier. Given a code snippet and requested changes, output ONLY the modified snippet. Do not include explanations, markdown code blocks, or any other text - just the raw code.",E=`Source file: ${s}
${g?`Target line in original file: ${o}`:"(Line number from source map may be inaccurate - search by element characteristics)"}
Snippet shows lines ${i+1} to ${a}

Code snippet:
${e}

Element being modified:
- Tag: ${t.tagName}
- Classes: ${t.className||"none"}
- ID: ${t.id||"none"}
- Current text content: ${((I=t.text)==null?void 0:I.substring(0,100))||"none"}

${f}

Instructions:
${v}

Output the modified code snippet:`;try{const O=r.modelId||"claude-haiku-4-5";console.log("[Source Patch] Calling AI SDK for code modification with model:",O);const M={};for(const F of r.providers)F.apiKey&&(M[F.id]=F.apiKey);const P=await window.electronAPI.aiSdk.generate({modelId:O,messages:[{role:"user",content:E}],providers:M,system:x,maxSteps:1});if(!P.success||!P.text)return console.log("[Source Patch] AI SDK generate failed:",P.error||"No text returned"),null;console.log("[Source Patch] AI SDK response received, length:",P.text.length);let j=P.text.trim();const V=j.match(/```(?:tsx?|jsx?|typescript|javascript)?\s*([\s\S]*?)```/);V&&(j=V[1].trim(),console.log("[Source Patch] Extracted code from markdown block"));const U=[/^The provided/i,/^I cannot/i,/^I apologize/i,/^Unfortunately/i,/^This (code|update|change)/i,/^Here'?s (how|an example)/i,/does not make sense/i,/is not (a )?valid/i,/you (should|can|need to)/i],z=j.split(`
`)[0];return U.some(F=>F.test(z))?(console.log("[Source Patch] AI returned PROSE instead of code - aborting"),console.log("[Source Patch] First line:",z.substring(0,100)),null):j}catch(O){return console.error("[Source Patch] EXCEPTION during AI SDK generation:",O),null}}async function Dft(e){var ee,re,ie,Z,te,oe,Q,Te,ge,Ce,fe,Fe;const{element:t,cssChanges:n,providerConfig:r,projectPath:s,userRequest:o,textChange:i,srcChange:a}=e;if(console.log("=".repeat(60)),console.log("[Source Patch] === STARTING PATCH GENERATION ==="),console.log("[Source Patch] Input:",{elementTag:t.tagName,hasSourceLocation:!!t.sourceLocation,sourceFile:(ie=(re=(ee=t.sourceLocation)==null?void 0:ee.sources)==null?void 0:re[0])==null?void 0:ie.file,sourceLine:(oe=(te=(Z=t.sourceLocation)==null?void 0:Z.sources)==null?void 0:te[0])==null?void 0:oe.line,cssChanges:Object.keys(n).length>0?n:"none",projectPath:s||"NOT SET",userRequest:(o==null?void 0:o.substring(0,50))||"none",modelId:r.modelId,hasSrcChange:!!a}),console.log("=".repeat(60)),!((Te=(Q=t.sourceLocation)==null?void 0:Q.sources)!=null&&Te[0]))return console.log("[Source Patch] ABORT: No source location available in element"),console.log("[Source Patch] element.sourceLocation =",JSON.stringify(t.sourceLocation,null,2)),null;const l=t.sourceLocation.sources[0];let c=l.file;console.log("[Source Patch] Original source file:",c,"line:",l.line);const{resolved:u,error:f}=Aft(c,s);if(u)c=u,console.log("[Source Patch] Path resolved:",c);else if((Ce=(ge=window.electronAPI)==null?void 0:ge.files)!=null&&Ce.getCwd){console.log("[Source Patch] No projectPath, trying getCwd fallback...");const De=await window.electronAPI.files.getCwd();if(console.log("[Source Patch] getCwd result:",De),De.success&&De.data){let Re=c;const tt=Re.match(/localhost:\d+\/(.+)$/);tt&&(Re=tt[1]),Re=Re.replace(/^\/+/,"").split("?")[0],c=`${De.data}/${Re}`,console.log("[Source Patch] Full path with CWD fallback:",c)}else return console.log("[Source Patch] ABORT: getCwd failed:",De.error),null}else return console.log("[Source Patch] ABORT:",f),null;if(c.includes("/ai-cluso/")&&!c.includes("/ai-cluso/website/"))return console.log("[Source Patch] ABORT: BLOCKED - Cannot patch app source files:",c),null;if(!((Fe=(fe=window.electronAPI)==null?void 0:fe.files)!=null&&Fe.readFile))return console.log("[Source Patch] ABORT: File API (readFile) not available"),null;console.log("[Source Patch] Reading source file:",c);const m=await window.electronAPI.files.readFile(c);if(!m.success||!m.data)return console.log("[Source Patch] ABORT: Failed to read source file"),console.log("[Source Patch] Error:",m.error),null;console.log("[Source Patch] File read successfully, length:",m.data.length);const g=m.data,y=Object.keys(n).length>0,v=i&&i.oldText&&i.newText;if(a&&a.newSrc&&!y&&!v){const De=Nft(g,l.line,a.newSrc);if(De&&De!==g)return console.log("[Source Patch] FAST PATH SUCCESS - replaced img src directly"),{filePath:c,originalContent:g,patchedContent:De,lineNumber:l.line,generatedBy:"fast-path"};console.log("[Source Patch] Src fast path failed - falling back to AI")}if(v&&!y){const De=Ift(g,i.oldText,i.newText);if(De)return{filePath:c,originalContent:g,patchedContent:De,lineNumber:l.line,generatedBy:"fast-path"};console.log("[Source Patch] Text fast path failed - falling back to AI")}if(y&&(!i||!i.newText)){const De=Rft(g,l.line,t,n);if(De&&De!==g)return console.log("[Source Patch] FAST PATH SUCCESS - modified style directly"),{filePath:c,originalContent:g,patchedContent:De,lineNumber:l.line,generatedBy:"fast-path"};console.log("[Source Patch] CSS fast path failed - falling back to AI")}const E=g.split(`
`);let T=l.line;T>E.length&&(console.log("[Source Patch] Source map line",T,"exceeds file length",E.length),console.log("[Source Patch] Clamping target to end of file"),T=E.length);const k=30,I=Math.max(0,T-k),O=Math.min(E.length,T+k),M=E.slice(I,O).join(`
`);console.log("[Source Patch] Fast Apply snippet: lines",I+1,"to",O,"(",M.length,"chars)");const P=await Mft(M,t,n,o);if(P.success&&P.code){console.log("[Source Patch] Fast Apply SUCCESS! Duration:",P.durationMs,"ms");const De=P.code.split(`
`),Re=E.slice(0,I),tt=E.slice(O),de=[...Re,...De,...tt].join(`
`);if(de!==g)return console.log("=".repeat(60)),console.log("[Source Patch] === FAST APPLY PATCH GENERATED ==="),console.log("[Source Patch] Output:",{filePath:c,originalLength:g.length,patchedLength:de.length,lineNumber:l.line,durationMs:P.durationMs}),console.log("=".repeat(60)),{filePath:c,originalContent:g,patchedContent:de,lineNumber:l.line,generatedBy:"fast-apply",durationMs:P.durationMs};console.log("[Source Patch] Fast Apply returned unchanged content, falling back to Gemini")}else console.log("[Source Patch] Fast Apply not available or failed:",P.error);const j=100,V=Math.max(0,T-j),U=Math.min(E.length,T+j);if(V>=U)return console.log("[Source Patch] ABORT: Invalid line range:",V,"to",U),null;const z=E.slice(V,U).join(`
`);console.log("[Source Patch] AI SDK snippet: lines",V+1,"to",U,"(",z.length,"chars)");const H=await Oft(z,t,n,r,l.file,T,V,U,o);if(!H)return null;const F=H.split(`
`),G=E.slice(0,V),X=E.slice(U),J=[...G,...F,...X].join(`
`);return console.log("=".repeat(60)),console.log("[Source Patch] === PATCH GENERATED SUCCESSFULLY ==="),console.log("[Source Patch] Output:",{filePath:c,originalLength:g.length,patchedLength:J.length,lineNumber:l.line,changed:g!==J}),console.log("=".repeat(60)),{filePath:c,originalContent:g,patchedContent:J,lineNumber:l.line,generatedBy:"gemini"}}const W_=new Map,Pft=[{pattern:/Invalid hook call/i,category:"react",keywords:["hook","rules","component"],description:"React Hook called outside of functional component"},{pattern:/Cannot read propert[ies]? of (undefined|null)/i,category:"react",keywords:["undefined","null reference","property access"],description:"Attempting to access property on undefined/null value"},{pattern:/Maximum update depth exceeded/i,category:"react",keywords:["infinite loop","useEffect","dependency"],description:"Infinite loop in React component updates"},{pattern:/Type '[^']+' is not assignable to type/i,category:"typescript",keywords:["type mismatch","typescript","assignment"],description:"TypeScript type incompatibility"},{pattern:/Property '[^']+' does not exist/i,category:"typescript",keywords:["property","typescript","interface"],description:"TypeScript property not found on type"},{pattern:/Module not found|Cannot find module/i,category:"build",keywords:["import","module","path resolution"],description:"Build error - module cannot be resolved"},{pattern:/Failed to compile/i,category:"build",keywords:["compilation","syntax","import"],description:"General compilation error"},{pattern:/CORS error|Access-Control-Allow|Cross-Origin/i,category:"network",keywords:["cors","cross-origin","api"],description:"Cross-Origin Resource Sharing (CORS) error"},{pattern:/Failed to fetch|Network request failed|fetch.*error/i,category:"network",keywords:["network","api","connection"],description:"Network request failed"},{pattern:/(404|500|502|503) (?:Not Found|Internal Server Error|Bad Gateway|Service Unavailable)/i,category:"network",keywords:["http error","server error"],description:"HTTP error response"},{pattern:/ReferenceError.*is not defined/i,category:"runtime",keywords:["undefined variable","reference error"],description:"Variable is not defined"},{pattern:/Cannot find name/i,category:"typescript",keywords:["typescript","undefined variable"],description:"TypeScript: variable name not found"}];function ck(e){e.toLowerCase();for(const t of Pft)if(t.pattern.test(e))return{signature:t,category:t.category,errorKey:eR(e),isKnownError:!0};return{signature:null,category:"unknown",errorKey:eR(e),isKnownError:!1}}function eR(e){const t=e.replace(/line \d+/gi,"LINE_N").replace(/column \d+/gi,"COL_N").replace(/at .*?\.js:\d+/g,"AT_FILE").substring(0,100);return Buffer.from(t).toString("base64").substring(0,32)}function Lft(e,t,n){const r=ck(e),s={errorKey:r.errorKey,message:e,solution:t,category:r.category,timestamp:Date.now(),searchQuery:n};W_.set(r.errorKey,s);try{const o=`error_solution_${r.errorKey}`;localStorage.setItem(o,JSON.stringify(s))}catch(o){console.warn("[ErrorSolutions] localStorage not available:",o)}return s}function $ft(e){const t=ck(e);if(W_.has(t.errorKey))return W_.get(t.errorKey)||null;try{const n=`error_solution_${t.errorKey}`,r=localStorage.getItem(n);if(r){const s=JSON.parse(r);return W_.set(t.errorKey,s),s}}catch(n){console.warn("[ErrorSolutions] Error reading from localStorage:",n)}return null}function UV(e){const t=ck(e);if(!t.signature)return e.split(`
`)[0].substring(0,100);const n=t.signature.keywords.slice(0,3);return`${t.signature.description} ${n.join(" ")}`}function Fft(e){return{react:"",typescript:"",build:"",network:"",runtime:"",unknown:""}[e]}function Bft(e){return["build","typescript"].includes(e)}function zft(e=500){const t=new Map;return n=>{const r=eR(n),s=Date.now(),o=t.get(r);return o&&s-o<e?!1:(t.set(r,s),!0)}}function jft(e={}){const{onErrorDetected:t,onSolutionFound:n,debounceMs:r=500,enableAutoSearch:s=!0,maxCachedErrors:o=50}=e,[i,a]=w.useState([]),[l,c]=w.useState(!1),u=w.useRef(zft(r)),f=w.useRef(null);w.useEffect(()=>{const x=console.error,E=console.warn,T=k=>{if(!u.current(k))return;const I=ck(k),O=`error_${Date.now()}_${Math.random()}`,M=$ft(k),P=UV(k),j={id:O,message:k,level:"error",category:I.category,timestamp:Date.now(),icon:Fft(I.category),isCritical:Bft(I.category),solution:M?{text:M.solution,source:"cached",query:M.searchQuery}:void 0,isSearching:s&&!M};a(V=>[j,...V].slice(0,o)),t&&t(j),s&&!M&&I.isKnownError&&m(j,P,k)};return console.error=(...k)=>{const I=k.map(O=>{if(typeof O=="object")try{return JSON.stringify(O)}catch{return String(O)}return String(O)}).join(" ");T(I),x.apply(console,k)},console.warn=(...k)=>{const I=k.map(O=>{if(typeof O=="object")try{return JSON.stringify(O)}catch{return String(O)}return String(O)}).join(" ");I.includes("Warning")||I.includes("deprecated")||I.includes("React"),E.apply(console,k)},f.current=()=>{console.error=x,console.warn=E},()=>{f.current&&f.current()}},[s,t,o]);const m=w.useCallback(async(x,E,T)=>{c(!0);try{const k=Uft(x.category,E);k?(Lft(T,k,E),a(I=>I.map(O=>O.id===x.id?{...O,solution:{text:k,source:"search",query:E},isSearching:!1}:O)),n&&n({...x,solution:{text:k,source:"search",query:E},isSearching:!1})):a(I=>I.map(O=>O.id===x.id?{...O,isSearching:!1}:O))}catch(k){console.warn("[useErrorPrefetch] Search failed:",k),a(I=>I.map(O=>O.id===x.id?{...O,isSearching:!1}:O))}finally{c(!1)}},[n]),g=w.useCallback(async x=>{const E=i.find(k=>k.id===x);if(!E)return;const T=UV(E.message);await m(E,T,E.message)},[i,m]),y=w.useCallback(()=>{a([])},[]),v=w.useCallback(x=>{a(E=>E.filter(T=>T.id!==x))},[]);return{errors:i,isSearching:l,clearErrors:y,removeError:v,searchForSolution:g}}function Uft(e,t){const n={react:`This is a React-related error. Common fixes:
1. Check that hooks are only called at the top level of components
2. Ensure dependencies in useEffect are correct
3. Verify component names start with uppercase
4. Check for invalid hook calls in conditionals
Search: "${t}"`,typescript:`This is a TypeScript error. Common fixes:
1. Verify the type matches what's expected
2. Check import statements for correct types
3. Ensure all required properties are provided
4. Use type assertions carefully (as const)
Search: "${t}"`,build:`This is a build error. Common fixes:
1. Check that all imports use correct file paths
2. Verify node_modules is installed (npm install / pnpm install)
3. Clear build cache (rm -rf .next/build or dist/)
4. Check for syntax errors in modified files
Search: "${t}"`,network:`This is a network error. Common fixes:
1. Check CORS headers on the API endpoint
2. Verify the API endpoint is accessible
3. Check network tab in DevTools for the actual error
4. Ensure request headers are correct (auth, content-type)
Search: "${t}"`,runtime:`This is a runtime error. Common fixes:
1. Check that variables are defined before use
2. Verify array/object access is safe
3. Add null/undefined checks
4. Check browser console for actual error
Search: "${t}"`,unknown:`Unable to categorize this error. General debugging steps:
1. Check the browser console for more details
2. Search the error message online
3. Check if this is a known issue in your dependencies
4. Try restarting the development server
Search: "${t}"`};return n[e]||n.unknown}const Hft=({error:e,isDarkMode:t=!1,onRemove:n,onSearch:r})=>{var l;const[s,o]=w.useState(!1),i=!!e.solution,a=e.isSearching;return h.jsxs("div",{className:`error-solution-badge-container ${t?"dark":""}`,children:[h.jsxs("div",{className:`error-solution-badge ${e.isCritical?"critical":"warning"}`,children:[h.jsx("span",{className:"badge-icon",children:e.isCritical?h.jsx(Yq,{size:14}):h.jsx(w0,{size:14})}),h.jsx("span",{className:"badge-text",children:i?h.jsxs(h.Fragment,{children:[h.jsx(Q_,{size:12,className:"inline mr-1"}),"Solution available"]}):a?h.jsxs(h.Fragment,{children:[h.jsx(Vf,{size:12,className:"inline mr-1 animate-spin"}),"Searching..."]}):"No solution found"}),i&&h.jsx("button",{className:"badge-toggle",onClick:()=>o(!s),title:s?"Hide solution":"Show solution",children:h.jsx(Df,{size:14,className:`transition-transform ${s?"rotate-180":""}`})}),!i&&!a&&r&&h.jsx("button",{className:"badge-search",onClick:()=>r(e.id),title:"Search for solution",children:h.jsx(Vf,{size:12})}),n&&h.jsx("button",{className:"badge-close",onClick:()=>n(e.id),title:"Dismiss error",children:h.jsx(qr,{size:12})})]}),s&&i&&h.jsxs("div",{className:"error-solution-detail",children:[h.jsx("div",{className:"solution-header",children:h.jsx("span",{className:"solution-source",children:e.solution.source==="cached"?" Cached":" Found"})}),h.jsx("div",{className:"solution-text",children:e.solution.text}),e.solution.query&&h.jsxs("div",{className:"solution-query",children:[h.jsx("span",{className:"query-label",children:"Search query:"}),h.jsx("code",{className:"query-code",children:e.solution.query})]}),h.jsxs("div",{className:"solution-actions",children:[typeof window<"u"&&((l=window.electronAPI)==null?void 0:l.openExternal)&&h.jsx("button",{className:"action-button secondary",onClick:()=>{var u;const c=`https://www.google.com/search?q=${encodeURIComponent(((u=e.solution)==null?void 0:u.query)||"")}`;window.electronAPI.openExternal(c)},children:"Search Web"}),n&&h.jsx("button",{className:"action-button primary",onClick:()=>n(e.id),children:"Got it"})]})]}),h.jsx("style",{children:`
        .error-solution-badge-container {
          margin: 8px 0;
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        .error-solution-badge {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 8px 12px;
          border-radius: 6px;
          font-size: 13px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.15s ease-out;
          border: 1px solid transparent;
        }

        .error-solution-badge.critical {
          background-color: rgba(239, 68, 68, 0.1);
          color: #dc2626;
          border-color: rgba(239, 68, 68, 0.3);
        }

        .dark .error-solution-badge.critical {
          background-color: rgba(239, 68, 68, 0.2);
          color: #f87171;
          border-color: rgba(239, 68, 68, 0.4);
        }

        .error-solution-badge.warning {
          background-color: rgba(245, 158, 11, 0.1);
          color: #d97706;
          border-color: rgba(245, 158, 11, 0.3);
        }

        .dark .error-solution-badge.warning {
          background-color: rgba(245, 158, 11, 0.2);
          color: #fbbf24;
          border-color: rgba(245, 158, 11, 0.4);
        }

        .error-solution-badge:hover {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .dark .error-solution-badge:hover {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .badge-icon {
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .badge-text {
          display: flex;
          align-items: center;
          flex: 1;
        }

        .badge-toggle,
        .badge-search,
        .badge-close {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 4px;
          cursor: pointer;
          border: none;
          background: transparent;
          color: inherit;
          border-radius: 4px;
          transition: background-color 0.15s;
        }

        .badge-toggle:hover,
        .badge-search:hover {
          background-color: rgba(0, 0, 0, 0.1);
        }

        .dark .badge-toggle:hover,
        .dark .badge-search:hover {
          background-color: rgba(255, 255, 255, 0.1);
        }

        .badge-close:hover {
          background-color: rgba(239, 68, 68, 0.2);
          color: #dc2626;
        }

        .dark .badge-close:hover {
          background-color: rgba(239, 68, 68, 0.3);
          color: #f87171;
        }

        .error-solution-detail {
          margin-top: 8px;
          padding: 12px;
          background-color: rgba(255, 255, 255, 0.5);
          border: 1px solid rgba(0, 0, 0, 0.1);
          border-radius: 6px;
          font-size: 12px;
          line-height: 1.5;
          color: rgba(0, 0, 0, 0.7);
        }

        .dark .error-solution-detail {
          background-color: rgba(0, 0, 0, 0.3);
          border-color: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.8);
        }

        .solution-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 8px;
          padding-bottom: 8px;
          border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .dark .solution-header {
          border-color: rgba(255, 255, 255, 0.1);
        }

        .solution-source {
          font-weight: 600;
          color: rgba(0, 0, 0, 0.8);
        }

        .dark .solution-source {
          color: rgba(255, 255, 255, 0.9);
        }

        .solution-text {
          margin: 8px 0;
          white-space: pre-wrap;
          word-break: break-word;
          color: rgba(0, 0, 0, 0.7);
        }

        .dark .solution-text {
          color: rgba(255, 255, 255, 0.8);
        }

        .solution-query {
          margin: 8px 0;
          padding: 8px;
          background-color: rgba(0, 0, 0, 0.05);
          border-radius: 4px;
          font-family: "Monaco", "Menlo", monospace;
          font-size: 11px;
        }

        .dark .solution-query {
          background-color: rgba(0, 0, 0, 0.3);
        }

        .query-label {
          display: block;
          font-weight: 600;
          margin-bottom: 4px;
          color: rgba(0, 0, 0, 0.6);
        }

        .dark .query-label {
          color: rgba(255, 255, 255, 0.6);
        }

        .query-code {
          display: block;
          padding: 4px;
          background-color: rgba(0, 0, 0, 0.1);
          border-radius: 3px;
          color: rgba(0, 0, 0, 0.8);
          break: break-all;
        }

        .dark .query-code {
          background-color: rgba(0, 0, 0, 0.4);
          color: rgba(255, 255, 255, 0.9);
        }

        .solution-actions {
          display: flex;
          gap: 8px;
          margin-top: 12px;
          padding-top: 8px;
          border-top: 1px solid rgba(0, 0, 0, 0.1);
          justify-content: flex-end;
        }

        .dark .solution-actions {
          border-color: rgba(255, 255, 255, 0.1);
        }

        .action-button {
          padding: 6px 12px;
          border: none;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.15s;
        }

        .action-button.primary {
          background-color: rgba(59, 130, 246, 0.9);
          color: white;
        }

        .action-button.primary:hover {
          background-color: rgb(59, 130, 246);
          transform: translateY(-1px);
        }

        .action-button.secondary {
          background-color: rgba(0, 0, 0, 0.1);
          color: rgba(0, 0, 0, 0.7);
        }

        .dark .action-button.secondary {
          background-color: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.7);
        }

        .action-button.secondary:hover {
          background-color: rgba(0, 0, 0, 0.2);
          transform: translateY(-1px);
        }

        .dark .action-button.secondary:hover {
          background-color: rgba(255, 255, 255, 0.2);
        }

        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }

        .animate-spin {
          animation: spin 1s linear infinite;
        }
      `})]})},Vft=({errors:e,isVisible:t,isDarkMode:n=!1,onToggle:r,onRemoveError:s,onSearchForSolution:o,onClearAll:i})=>{const a=e.length,l=e.filter(u=>u.isCritical).length,c=e.filter(u=>u.solution).length;return!t||a===0?null:h.jsxs("div",{className:`error-solution-panel ${n?"dark":""}`,children:[h.jsxs("div",{className:"panel-header",children:[h.jsxs("div",{className:"header-title",children:[h.jsx(Yq,{size:18}),h.jsx("span",{className:"title-text",children:"Error Solutions"}),h.jsxs("span",{className:"error-badge",children:[l>0&&h.jsx("span",{className:"critical-count",children:l}),a]})]}),h.jsxs("div",{className:"header-actions",children:[c>0&&h.jsxs("span",{className:"solved-indicator",children:[" ",c," solved"]}),i&&a>0&&h.jsx("button",{className:"action-button clear",onClick:i,title:"Clear all errors",children:h.jsx(Lf,{size:16})}),r&&h.jsx("button",{className:"close-button",onClick:r,title:"Close panel",children:h.jsx(qr,{size:18})})]})]}),h.jsx("div",{className:"error-list",children:e.map(u=>h.jsxs("div",{className:"error-item",children:[h.jsxs("div",{className:"error-header",children:[h.jsx("span",{className:"error-icon",children:u.icon}),h.jsxs("div",{className:"error-info",children:[h.jsx("span",{className:"error-category",children:u.category.toUpperCase()}),h.jsx("span",{className:"error-time",children:new Date(u.timestamp).toLocaleTimeString()})]}),u.isCritical&&h.jsx("span",{className:"critical-indicator",title:"Critical error",children:"!"})]}),h.jsxs("div",{className:"error-message",children:[h.jsx("code",{children:u.message.substring(0,200)}),u.message.length>200&&h.jsx("span",{children:"..."})]}),h.jsx(Hft,{error:u,isDarkMode:n,onRemove:s,onSearch:o})]},u.id))}),a>0&&h.jsx("div",{className:"panel-footer",children:h.jsxs("div",{className:"footer-stats",children:[h.jsxs("span",{className:"stat",children:[h.jsx("span",{className:"stat-label",children:"Critical:"}),h.jsx("span",{className:"stat-value",children:l})]}),h.jsxs("span",{className:"stat",children:[h.jsx("span",{className:"stat-label",children:"Warnings:"}),h.jsx("span",{className:"stat-value",children:a-l})]}),h.jsxs("span",{className:"stat",children:[h.jsx("span",{className:"stat-label",children:"Solved:"}),h.jsx("span",{className:"stat-value",children:c})]})]})}),h.jsx("style",{children:`
        .error-solution-panel {
          position: fixed;
          bottom: 0;
          right: 0;
          width: 100%;
          max-width: 600px;
          max-height: 500px;
          background: white;
          border-top: 1px solid #e5e7eb;
          border-left: 1px solid #e5e7eb;
          border-radius: 12px 12px 0 0;
          box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
          display: flex;
          flex-direction: column;
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
          z-index: 9999;
          animation: slideUp 0.3s ease-out;
        }

        .error-solution-panel.dark {
          background: #1f2937;
          border-color: #374151;
          box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.4);
        }

        @keyframes slideUp {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }

        .panel-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 16px;
          border-bottom: 1px solid #e5e7eb;
          background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
          border-radius: 12px 12px 0 0;
        }

        .dark .panel-header {
          border-color: #374151;
          background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
        }

        .header-title {
          display: flex;
          align-items: center;
          gap: 12px;
          font-size: 16px;
          font-weight: 600;
          color: #1f2937;
        }

        .dark .header-title {
          color: #f3f4f6;
        }

        .header-title svg {
          color: #ef4444;
        }

        .title-text {
          flex: 1;
        }

        .error-badge {
          display: flex;
          align-items: center;
          justify-content: center;
          min-width: 28px;
          height: 28px;
          padding: 0 8px;
          background: rgba(239, 68, 68, 0.1);
          color: #dc2626;
          border-radius: 14px;
          font-size: 13px;
          font-weight: 600;
          position: relative;
        }

        .dark .error-badge {
          background: rgba(239, 68, 68, 0.2);
          color: #f87171;
        }

        .critical-count {
          position: absolute;
          top: -4px;
          right: -4px;
          width: 18px;
          height: 18px;
          background: #ef4444;
          color: white;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 11px;
          font-weight: 700;
        }

        .header-actions {
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .solved-indicator {
          font-size: 12px;
          color: #10b981;
          font-weight: 600;
          padding: 4px 8px;
          background: rgba(16, 185, 129, 0.1);
          border-radius: 4px;
        }

        .dark .solved-indicator {
          background: rgba(16, 185, 129, 0.2);
          color: #34d399;
        }

        .action-button {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 6px;
          border: none;
          background: transparent;
          color: #6b7280;
          cursor: pointer;
          border-radius: 6px;
          transition: all 0.15s;
        }

        .dark .action-button {
          color: #9ca3af;
        }

        .action-button:hover {
          background: rgba(0, 0, 0, 0.1);
          color: #1f2937;
        }

        .dark .action-button:hover {
          background: rgba(255, 255, 255, 0.1);
          color: #f3f4f6;
        }

        .action-button.clear:hover {
          background: rgba(239, 68, 68, 0.1);
          color: #dc2626;
        }

        .dark .action-button.clear:hover {
          background: rgba(239, 68, 68, 0.2);
          color: #f87171;
        }

        .close-button {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 6px;
          border: none;
          background: transparent;
          color: #6b7280;
          cursor: pointer;
          border-radius: 6px;
          transition: all 0.15s;
        }

        .dark .close-button {
          color: #9ca3af;
        }

        .close-button:hover {
          background: rgba(0, 0, 0, 0.1);
          color: #1f2937;
        }

        .dark .close-button:hover {
          background: rgba(255, 255, 255, 0.1);
          color: #f3f4f6;
        }

        .error-list {
          flex: 1;
          overflow-y: auto;
          padding: 12px 16px;
          gap: 12px;
          display: flex;
          flex-direction: column;
        }

        .error-list::-webkit-scrollbar {
          width: 8px;
        }

        .error-list::-webkit-scrollbar-track {
          background: transparent;
        }

        .error-list::-webkit-scrollbar-thumb {
          background: #d1d5db;
          border-radius: 4px;
        }

        .dark .error-list::-webkit-scrollbar-thumb {
          background: #4b5563;
        }

        .error-list::-webkit-scrollbar-thumb:hover {
          background: #9ca3af;
        }

        .dark .error-list::-webkit-scrollbar-thumb:hover {
          background: #6b7280;
        }

        .error-item {
          padding: 12px;
          background: #f9fafb;
          border: 1px solid #e5e7eb;
          border-radius: 8px;
          transition: all 0.15s;
        }

        .dark .error-item {
          background: #111827;
          border-color: #374151;
        }

        .error-item:hover {
          background: #ffffff;
          border-color: #d1d5db;
        }

        .dark .error-item:hover {
          background: #1f2937;
          border-color: #4b5563;
        }

        .error-header {
          display: flex;
          align-items: center;
          gap: 8px;
          margin-bottom: 8px;
        }

        .error-icon {
          font-size: 16px;
          line-height: 1;
        }

        .error-info {
          display: flex;
          align-items: center;
          gap: 12px;
          flex: 1;
        }

        .error-category {
          font-size: 11px;
          font-weight: 600;
          text-transform: uppercase;
          color: #6b7280;
          padding: 2px 6px;
          background: rgba(0, 0, 0, 0.05);
          border-radius: 3px;
        }

        .dark .error-category {
          color: #9ca3af;
          background: rgba(255, 255, 255, 0.1);
        }

        .error-time {
          font-size: 11px;
          color: #9ca3af;
        }

        .dark .error-time {
          color: #6b7280;
        }

        .critical-indicator {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 20px;
          height: 20px;
          background: #dc2626;
          color: white;
          border-radius: 50%;
          font-size: 12px;
          font-weight: 700;
        }

        .error-message {
          padding: 8px;
          background: rgba(0, 0, 0, 0.05);
          border-radius: 4px;
          margin-bottom: 8px;
        }

        .dark .error-message {
          background: rgba(0, 0, 0, 0.3);
        }

        .error-message code {
          font-family: "Monaco", "Menlo", monospace;
          font-size: 11px;
          color: #374151;
          word-break: break-all;
          white-space: pre-wrap;
        }

        .dark .error-message code {
          color: #d1d5db;
        }

        .panel-footer {
          padding: 12px 16px;
          border-top: 1px solid #e5e7eb;
          background: #f9fafb;
          border-radius: 0 0 12px 12px;
        }

        .dark .panel-footer {
          border-color: #374151;
          background: #111827;
        }

        .footer-stats {
          display: flex;
          gap: 16px;
          font-size: 12px;
        }

        .stat {
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .stat-label {
          color: #6b7280;
          font-weight: 500;
        }

        .dark .stat-label {
          color: #9ca3af;
        }

        .stat-value {
          color: #1f2937;
          font-weight: 600;
          font-size: 14px;
        }

        .dark .stat-value {
          color: #f3f4f6;
        }

        @media (max-width: 768px) {
          .error-solution-panel {
            max-width: 100%;
            max-height: 60vh;
          }

          .header-title {
            font-size: 14px;
          }

          .error-list {
            padding: 12px;
          }

          .error-item {
            padding: 10px;
          }
        }
      `})]})};function qft(e){e=e.replace(/^#/,"");const t=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,r=parseInt(e.substring(4,6),16)/255;return .299*t+.587*n+.114*r}function rN(e,t){e=e.replace(/^#/,"");let n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return n=Math.min(255,Math.max(0,Math.round(n+n*t/100))),r=Math.min(255,Math.max(0,Math.round(r+r*t/100))),s=Math.min(255,Math.max(0,Math.round(s+s*t/100))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}async function Gft(e,t,n,r="gemini-2.5-flash-lite"){var i,a;const s=Hae({apiKey:n}),o=`You are a UI modification assistant. Given an HTML element and a user request, output ONLY a JSON object with changes.

Element:
- Tag: ${e.tagName}
- Classes: ${e.className||"none"}
- ID: ${e.id||"none"}
- Current text: ${((i=e.text)==null?void 0:i.substring(0,100))||"none"}
- Current styles: ${JSON.stringify(e.computedStyle||{})}
- HTML: ${((a=e.outerHTML)==null?void 0:a.substring(0,500))||"N/A"}

User request: "${t}"

Respond with ONLY valid JSON. Use "textChange" for text modifications, "cssChanges" for style changes:
{
  "cssChanges": { "property": "value", ... },
  "textChange": "new text content if changing text",
  "description": "Brief description of changes"
}

IMPORTANT:
- For TEXT changes (changing what the element says): use "textChange" with the new text
- For STYLE changes (colors, sizes, spacing): use "cssChanges" with CSS properties
- Do NOT use cssChanges.content for text - that only works for ::before/::after pseudo-elements

Examples:
- "make it red"  {"cssChanges": {"color": "red"}, "description": "Changed text color to red"}
- "change to Download"  {"textChange": "Download", "description": "Changed text to Download"}
- "Download Now"  {"textChange": "Download Now", "description": "Changed text to Download Now"}
- "bigger font"  {"cssChanges": {"fontSize": "1.5em"}, "description": "Increased font size"}
- "make it say Hello"  {"textChange": "Hello", "description": "Changed text to Hello"}
- "red and say Click Me"  {"cssChanges": {"color": "red"}, "textChange": "Click Me", "description": "Changed color to red and text to Click Me"}`;try{console.log(`[UI Update] Calling ${r} for UI changes...`),console.log("[UI Update] API Key present:",!!n,"length:",n==null?void 0:n.length);const c=(await vft({model:s(r),prompt:o,maxTokens:200})).text.trim();console.log("[UI Update] Gemini response:",c);const f=(c.match(/```(?:json)?\s*([\s\S]*?)```/)||[null,c])[1]||c;console.log("[UI Update] Parsing JSON:",f);const m=JSON.parse(f);return console.log("[UI Update] Parsed result:",m),{cssChanges:m.cssChanges||{},textChange:m.textChange,description:m.description||"UI updated",success:!0}}catch(l){return console.error("[UI Update] Failed to generate:",l),{cssChanges:{},description:"Failed to generate UI changes",success:!1}}}function Wft(e){const n=new Date().getTime()-e.getTime(),r=Math.floor(n/1e3),s=Math.floor(r/60),o=Math.floor(s/60),i=Math.floor(o/24);return r<30?"just now":r<60?`${r}s ago`:s<60?`${s}m ago`:o<24?`${o}h ago`:`${i}d ago`}const Hle=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M4.709 15.955l4.72-2.647.08-.23-.08-.128H9.2l-.79-.048-2.698-.073-2.339-.097-2.266-.122-.571-.121L0 11.784l.055-.352.48-.321.686.06 1.52.103 2.278.158 1.652.097 2.449.255h.389l.055-.157-.134-.098-.103-.097-2.358-1.596-2.552-1.688-1.336-.972-.724-.491-.364-.462-.158-1.008.656-.722.881.06.225.061.893.686 1.908 1.476 2.491 1.833.365.304.145-.103.019-.073-.164-.274-1.355-2.446-1.446-2.49-.644-1.032-.17-.619a2.97 2.97 0 01-.104-.729L6.283.134 6.696 0l.996.134.42.364.62 1.414 1.002 2.229 1.555 3.03.456.898.243.832.091.255h.158V9.01l.128-1.706.237-2.095.23-2.695.08-.76.376-.91.747-.492.584.28.48.685-.067.444-.286 1.851-.559 2.903-.364 1.942h.212l.243-.242.985-1.306 1.652-2.064.73-.82.85-.904.547-.431h1.033l.76 1.129-.34 1.166-1.064 1.347-.881 1.142-1.264 1.7-.79 1.36.073.11.188-.02 2.856-.606 1.543-.28 1.841-.315.833.388.091.395-.328.807-1.969.486-2.309.462-3.439.813-.042.03.049.061 1.549.146.662.036h1.622l3.02.225.79.522.474.638-.079.485-1.215.62-1.64-.389-3.829-.91-1.312-.329h-.182v.11l1.093 1.068 2.006 1.81 2.509 2.33.127.578-.322.455-.34-.049-2.205-1.657-.851-.747-1.926-1.62h-.128v.17l.444.649 2.345 3.521.122 1.08-.17.353-.608.213-.668-.122-1.374-1.925-1.415-2.167-1.143-1.943-.14.08-.674 7.254-.316.37-.729.28-.607-.461-.322-.747.322-1.476.389-1.924.315-1.53.286-1.9.17-.632-.012-.042-.14.018-1.434 1.967-2.18 2.945-1.726 1.845-.414.164-.717-.37.067-.662.401-.589 2.388-3.036 1.44-1.882.93-1.086-.006-.158h-.055L4.132 18.56l-1.13.146-.487-.456.061-.746.231-.243 1.908-1.312-.006.006z",fill:"#D97757",fillRule:"nonzero"})}),Yft=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fill:"currentColor",d:"M16.765 5h-3.308l5.923 15h3.23zM7.226 5L1.38 20h3.308l1.307-3.154h6.154l1.23 3.077h3.309L10.688 5zm-.308 9.077l2-5.308l2.077 5.308z"})}),HV=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fill:"currentColor",d:"M20.562 10.188c.25-.688.313-1.376.25-2.063c-.062-.687-.312-1.375-.625-2c-.562-.937-1.375-1.687-2.312-2.125c-1-.437-2.063-.562-3.125-.312c-.5-.5-1.063-.938-1.688-1.25S11.687 2 11 2a5.17 5.17 0 0 0-3 .938c-.875.624-1.5 1.5-1.813 2.5c-.75.187-1.375.5-2 .875c-.562.437-1 1-1.375 1.562c-.562.938-.75 2-.625 3.063a5.44 5.44 0 0 0 1.25 2.874a4.7 4.7 0 0 0-.25 2.063c.063.688.313 1.375.625 2c.563.938 1.375 1.688 2.313 2.125c1 .438 2.062.563 3.125.313c.5.5 1.062.937 1.687 1.25S12.312 22 13 22a5.17 5.17 0 0 0 3-.937c.875-.625 1.5-1.5 1.812-2.5a4.54 4.54 0 0 0 1.938-.875c.562-.438 1.062-.938 1.375-1.563c.562-.937.75-2 .625-3.062c-.125-1.063-.5-2.063-1.188-2.876m-7.5 10.5c-1 0-1.75-.313-2.437-.875c0 0 .062-.063.125-.063l4-2.312a.5.5 0 0 0 .25-.25a.57.57 0 0 0 .062-.313V11.25l1.688 1v4.625a3.685 3.685 0 0 1-3.688 3.813M5 17.25c-.438-.75-.625-1.625-.438-2.5c0 0 .063.063.125.063l4 2.312a.56.56 0 0 0 .313.063c.125 0 .25 0 .312-.063l4.875-2.812v1.937l-4.062 2.375A3.7 3.7 0 0 1 7.312 19c-1-.25-1.812-.875-2.312-1.75M3.937 8.563a3.8 3.8 0 0 1 1.938-1.626v4.751c0 .124 0 .25.062.312a.5.5 0 0 0 .25.25l4.875 2.813l-1.687 1l-4-2.313a3.7 3.7 0 0 1-1.75-2.25c-.25-.937-.188-2.062.312-2.937M17.75 11.75l-4.875-2.812l1.687-1l4 2.312c.625.375 1.125.875 1.438 1.5s.5 1.313.437 2.063a3.7 3.7 0 0 1-.75 1.937c-.437.563-1 1-1.687 1.25v-4.75c0-.125 0-.25-.063-.312c0 0-.062-.126-.187-.188m1.687-2.5s-.062-.062-.125-.062l-4-2.313c-.125-.062-.187-.062-.312-.062s-.25 0-.313.062L9.812 9.688V7.75l4.063-2.375c.625-.375 1.312-.5 2.062-.5c.688 0 1.375.25 2 .688c.563.437 1.063 1 1.313 1.625s.312 1.375.187 2.062m-10.5 3.5l-1.687-1V7.063c0-.688.187-1.438.562-2C8.187 4.438 8.75 4 9.375 3.688a3.37 3.37 0 0 1 2.062-.313c.688.063 1.375.375 1.938.813c0 0-.063.062-.125.062l-4 2.313a.5.5 0 0 0-.25.25c-.063.125-.063.187-.063.312zm.875-2L12 9.5l2.187 1.25v2.5L12 14.5l-2.188-1.25z"})}),Kft=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fill:"currentColor",d:"M24 12.024c-6.437.388-11.59 5.539-11.977 11.976h-.047C11.588 17.563 6.436 12.412 0 12.024v-.047C6.437 11.588 11.588 6.437 11.976 0h.047c.388 6.437 5.54 11.588 11.977 11.977z"})}),Zft={"claude-code":Hle},Jft={google:Kft,openai:HV,codex:HV,anthropic:Yft,"claude-code":Hle},Xft=(e,t)=>Zft[e]||Jft[t]||bR,VV=e=>e.startsWith("Claude ")||e.startsWith("Gemini ")?e.slice(7):e,Qft={id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash Lite",Icon:Gl,provider:"google"},qV="";function eht(){var fo,_p,kh,Sp,_g,cc,Tp,Sg,Tg;const[e,t]=w.useState(null),[n,r]=w.useState(null),[s,o]=w.useState(null),[i,a]=w.useState(()=>[{...Fy("tab-1","browser"),url:qV,title:"New Tab"}]),[l,c]=w.useState("tab-1"),u=i.find(N=>N.id===l)||i[0],[f,m]=w.useState(!1),{errors:g,clearErrors:y,removeError:v,searchForSolution:x}=jft({onErrorDetected:N=>{console.log("[App] Error detected:",N.category,"-",N.message.substring(0,100)),N.isCritical&&m(!0)},onSolutionFound:N=>{console.log("[App] Solution found for:",N.category)},enableAutoSearch:!0,debounceMs:1e3}),E=w.useCallback((N="browser")=>{const W=Fy(void 0,N);a(se=>[...se,W]),c(W.id)},[]),T=w.useCallback(N=>{const W=i.find(se=>se.id===N);W!=null&&W.projectPath&&!window.confirm(`Close project "${W.title||"Untitled"}"?

This will close the project and clear its chat history.`)||(a(se=>{const ve=se.filter(Ae=>Ae.id!==N);if(ve.length===0)return se;if(N===l){const Ae=se.findIndex(He=>He.id===N),Ie=Math.min(Ae,ve.length-1);c(ve[Ie].id)}return ve}),W!=null&&W.projectPath&&(fe([]),Xr([]),nt(null)))},[l,i]),k=w.useCallback(N=>{c(N)},[]),I=w.useCallback(N=>{a(W=>{const se=new Map(W.map(ve=>[ve.id,ve]));return N.map(ve=>se.get(ve.id)).filter(Boolean)})},[]);w.useEffect(()=>{ee(u.url||"")},[l,u.url]),w.useEffect(()=>{async function N(){var W;if(!H.current&&(H.current=!0,!!((W=window.electronAPI)!=null&&W.tabdata)))try{const[se,ve,Ae]=await Promise.all([window.electronAPI.tabdata.loadKanban(void 0),window.electronAPI.tabdata.loadTodos(void 0),window.electronAPI.tabdata.loadNotes(void 0)]),Ie=[];if(se.success&&Array.isArray(se.data)&&se.data.length>0)for(const He of se.data)console.log("[TabData] Loaded kanban board:",He.boardId,He.boardTitle),Ie.push({...Fy(void 0,"kanban"),title:He.boardTitle||"Kanban",kanbanData:{boardId:He.boardId,boardTitle:He.boardTitle||"Kanban",columns:He.columns||[]}});ve.success&&ve.data&&(console.log("[TabData] Loaded todos data"),Ie.push({...Fy(void 0,"todos"),todosData:{items:ve.data.items}})),Ae.success&&Ae.data&&(console.log("[TabData] Loaded notes data"),Ie.push({...Fy(void 0,"notes"),notesData:{content:Ae.data.content}})),Ie.length>0&&a(He=>[...He,...Ie])}catch(se){console.error("[TabData] Error loading tab data:",se)}}N()},[]);const O=w.useCallback(N=>{a(W=>W.map(se=>se.id===l?{...se,...N}:se))},[l]),M=w.useCallback((N,W)=>{a(se=>se.map(ve=>ve.id===N?{...ve,...W}:ve))},[]),P=w.useRef(null),j=w.useRef(null),V=w.useRef(null),U=w.useRef(i),z=w.useRef(l),H=w.useRef(!1);w.useEffect(()=>{U.current=i},[i]),w.useEffect(()=>{z.current=l},[l]),w.useEffect(()=>{var se,ve,Ae;async function N(){var Ie;if((Ie=window.electronAPI)!=null&&Ie.window)try{const He=await window.electronAPI.window.getInfo();He.windowId&&t(He.windowId),He.projectPath&&(r(He.projectPath),o(He.projectName),console.log(`[Window] Window ${He.windowId} locked to project: ${He.projectPath}`))}catch(He){console.warn("[Window] Failed to get window info:",He)}}N();const W=(Ae=(ve=(se=window.electronAPI)==null?void 0:se.window)==null?void 0:ve.onInfo)==null?void 0:Ae.call(ve,Ie=>{Ie.windowId&&t(Ie.windowId),Ie.projectPath&&(r(Ie.projectPath),o(Ie.projectName))});return()=>{W==null||W()}},[]);const F=w.useRef(new Set);w.useEffect(()=>{var ve;const N=u==null?void 0:u.projectPath;if(!N||!((ve=window.electronAPI)!=null&&ve.mgrep))return;if(F.current.has(N)){console.log("[mgrep] Already handled for:",N);return}let W=!1;return(async()=>{try{const Ae=await Promise.race([window.electronAPI.mgrep.getStatus(N),new Promise((Ie,He)=>setTimeout(()=>He(new Error("Timeout")),5e3))]);if(W)return;if(Ae.success&&Ae.status&&!Ae.status.ready){if(!localStorage.getItem("mgrep-onboarding-seen")){F.current.has("__onboarding_shown__")||(setTimeout(()=>{W||np(!0)},1500),F.current.add("__onboarding_shown__"));return}localStorage.getItem("mgrep-auto-init")==="true"?(console.log("[mgrep] Initializing for:",N),window.electronAPI.mgrep.initialize(N).then(()=>{F.current.add(N),console.log("[mgrep]  Initialized for:",N)}).catch(bt=>{console.error("[mgrep] Auto-init failed:",bt)})):F.current.add(N)}else Ae.success&&Ae.status&&Ae.status.ready&&(F.current.add(N),console.log("[mgrep] Already ready for:",N))}catch(Ae){console.error("[mgrep] Status check failed:",Ae)}})(),()=>{W=!0}},[u==null?void 0:u.projectPath]),w.useCallback(N=>{console.log("[TabData] handleUpdateKanbanColumns called, columns:",N.length);const W=U.current.find(se=>se.id===z.current);W!=null&&W.kanbanData&&(O({kanbanData:{...W.kanbanData,columns:N}}),P.current&&clearTimeout(P.current),P.current=setTimeout(async()=>{var ve,Ae,Ie;const se=U.current.find(He=>He.id===z.current);if(console.log("[TabData] Debounce fired, activeTab:",se==null?void 0:se.id,"type:",se==null?void 0:se.type,"hasTabdata:",!!((ve=window.electronAPI)!=null&&ve.tabdata)),(Ae=window.electronAPI)!=null&&Ae.tabdata&&(se!=null&&se.kanbanData))try{const He=await window.electronAPI.tabdata.saveKanban(se.projectPath,{boardId:se.kanbanData.boardId,boardTitle:se.kanbanData.boardTitle,columns:N,updatedAt:new Date().toISOString()});console.log("[TabData] Kanban save result:",He)}catch(He){console.error("[TabData] Failed to save kanban:",He)}else console.warn("[TabData] Cannot save - tabdata API:",!!((Ie=window.electronAPI)!=null&&Ie.tabdata),"activeTab:",!!se)},500))},[O]),w.useCallback(N=>{O({todosData:{items:N}}),j.current&&clearTimeout(j.current),j.current=setTimeout(async()=>{var se;const W=U.current.find(ve=>ve.id===z.current);if((se=window.electronAPI)!=null&&se.tabdata&&W)try{await window.electronAPI.tabdata.saveTodos(W.projectPath,{items:N,updatedAt:new Date().toISOString()}),console.log("[TabData] Todos saved")}catch(ve){console.error("[TabData] Failed to save todos:",ve)}},500)},[O]);const G=w.useCallback(N=>{O({notesData:{content:N}}),V.current&&clearTimeout(V.current),V.current=setTimeout(async()=>{var se;const W=U.current.find(ve=>ve.id===z.current);if((se=window.electronAPI)!=null&&se.tabdata&&W)try{await window.electronAPI.tabdata.saveNotes(W.projectPath,{content:N,updatedAt:new Date().toISOString()}),console.log("[TabData] Notes saved")}catch(ve){console.error("[TabData] Failed to save notes:",ve)}},500)},[O]);w.useCallback(N=>{const W=U.current.find(se=>se.id===z.current);W!=null&&W.kanbanData&&(O({title:N,kanbanData:{...W.kanbanData,boardTitle:N}}),P.current&&clearTimeout(P.current),P.current=setTimeout(async()=>{var ve;const se=U.current.find(Ae=>Ae.id===z.current);if((ve=window.electronAPI)!=null&&ve.tabdata&&(se!=null&&se.kanbanData))try{const Ae=await window.electronAPI.tabdata.saveKanban(se.projectPath,{boardId:se.kanbanData.boardId,boardTitle:N,columns:se.kanbanData.columns,updatedAt:new Date().toISOString()});console.log("[TabData] Kanban title saved:",Ae)}catch(Ae){console.error("[TabData] Failed to save kanban title:",Ae)}},500))},[O]);const X=i.map(N=>({id:N.id,title:N.title||"Cluso",url:N.url,favicon:N.favicon,type:N.type||"browser",isProject:!!N.projectPath})),[J,ee]=w.useState(qV),[re,ie]=w.useState(!1),[Z,te]=w.useState(!1),[oe,Q]=w.useState(!1),[Te,ge]=w.useState(""),[Ce,fe]=w.useState([]),[Fe,De]=w.useState(""),[Re,tt]=w.useState(null),[de,nt]=w.useState(null),ot=w.useRef(null);w.useEffect(()=>{ot.current=de},[de]);const{questions:Ut,dismissQuestion:Vt,refreshQuestions:Dt}=Ait();w.useEffect(()=>{Dt({messages:Ce,selectedElement:de,currentTab:"chat"})},[Ce,de,Dt]);const en=w.useRef(()=>{}),[xt,pe]=w.useState(null),[Ne,$e]=w.useState(null),[Je,Le]=w.useState(null),[Ve,_e]=w.useState(!1),[Y,L]=w.useState(!1),[B,ce]=w.useState(!0),[we,ze]=w.useState(420),[Be,ut]=w.useState(!1),an=w.useRef(null),zt=w.useRef(null),[dn,on]=w.useState(!0),[Va,Nn]=w.useState(!1),Qn=w.useRef(!1),[wt,sn]=w.useState(!1),[ye,Ue]=w.useState(!1),[ht,Zt]=w.useState(!1),[hr,Yn]=w.useState(null),Rt=w.useRef(!1),Bt=w.useRef(!1),fn=w.useRef(!1),In=w.useRef(null),[Pr,bo]=w.useState([]),[Vs,yo]=w.useState(!1),[Jr,pr]=w.useState([]),[Io,at]=w.useState(!1),rt=w.useRef(null),mt=w.useRef(null),[Ht,Ur]=w.useState(Qft),[ks,Kn]=w.useState(!1),[Hr,ia]=w.useState(""),[kt,Bn]=w.useState(!1);w.useEffect(()=>{de&&!B&&Bn(!0)},[de,B]);const[gt,Xr]=w.useState([]),[Ro,nr]=w.useState(""),[ft,Nt]=w.useState(!1),[hn,xn]=w.useState([]),[Tr,qs]=w.useState(""),[co,Wo]=w.useState([]),[zr,vo]=w.useState(0),Vm=w.useCallback(N=>{let ve=(N.path.split("/").pop()||N.path).split("?")[0];if(N.elementType&&(ve+=` / ${N.elementType}`),N.lineStart!==void 0)if(N.lineEnd!==void 0&&N.lineEnd!==N.lineStart){const Ae=N.lineStart.toString(),Ie=N.lineEnd.toString();let He=0;for(;He<Ae.length&&He<Ie.length&&Ae[He]===Ie[He];)He++;const bt=He>0?Ie.slice(He):Ie;ve+=` (${Ae}-${bt})`}else ve+=` (${N.lineStart})`;return ve},[]),[Nu,K0]=w.useState([]),[Md,ih]=w.useState(""),[Vi,El]=w.useState(!1),[rc,Bc]=w.useState([]),[Yo,Od]=w.useState([]),[ah,Pn]=w.useState(!1),[Z0,uo]=w.useState(""),[Gr,Iu]=w.useState("include"),[mi,Ru]=w.useState("off"),[_l,Lt]=w.useState(!1),Kt=zge(),[Zn,cr]=w.useState(!1),Fs=sit(),[aa,lh]=w.useState(!1),[ch,uh]=w.useState(""),[Sl,qm]=w.useState(""),[J0,Tl]=w.useState(!1),[X0,Cl]=w.useState(null),[kl,dh]=w.useState(null),[gi,Q0]=w.useState(null),[Ea,Dd]=w.useState(""),[ep,fh]=w.useState(!1),[uk,tp]=w.useState(!1),[Al,Pd]=w.useState(null),[he,Qw]=w.useState(()=>{if(typeof window<"u"){const N=localStorage.getItem("darkMode");return N!==null?N==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),{currentTheme:dk}=hR(),Xs=dk.colors,Gm=Xs?qft(Xs.background)<.5:he,zc=Xs!=null&&Xs.background?rN(Xs.background,Gm?25:3):he?"#262626":"#ffffff",jc=(Xs==null?void 0:Xs.border)||(he?"#404040":"#e7e5e4");Xs!=null&&Xs.foreground,Xs!=null&&Xs.foreground&&rN(Xs.foreground,Gm?-30:30);const fk=Xs!=null&&Xs.background?rN(Xs.background,Gm?10:-3):he?"#1a1a1a":"#fafaf9",[hk,eE]=w.useState(!1),[pk,Wm]=w.useState(!1),[mk,Ub]=w.useState(!1),[Hb,np]=w.useState(!1),[Mu,Vb]=w.useState([]),[Ld,rp]=w.useState(0),[tE,Ym]=w.useState(!1),[Mo,gk]=w.useState(()=>{try{const N=localStorage.getItem("cluso-settings");if(N){const W=JSON.parse(N),se=new Set((W.models||[]).map(Et=>Et.id)),ve=G2.models.filter(Et=>!se.has(Et.id)),Ae=[...W.models||[],...ve],Ie=new Set((W.providers||[]).map(Et=>Et.id)),He=G2.providers.filter(Et=>!Ie.has(Et.id)),bt=[...W.providers||[],...He],cn=(W.connections||[]).map(Et=>Et.type==="mcp"&&Et.url&&!Et.transport?{...Et,transport:{type:"sse",url:Et.url}}:Et);return{...G2,...W,models:Ae,providers:bt,connections:cn}}}catch(N){console.error("Failed to load settings from localStorage:",N)}return G2}),Ko=_it({googleApiKey:(fo=Mo.providers.find(N=>N.id==="google"))==null?void 0:fo.apiKey});w.useEffect(()=>{try{localStorage.setItem("cluso-settings",JSON.stringify(Mo))}catch(N){console.error("Failed to save settings to localStorage:",N)}},[Mo]);const Km=w.useRef(void 0);w.useEffect(()=>{const N=u==null?void 0:u.projectPath;if(Km.current===void 0){Km.current=N;return}Km.current!==N&&Hb&&np(!1),Km.current=N},[u==null?void 0:u.projectPath,Hb]);const nE={"claude-code":1,anthropic:2,openai:3,codex:4,google:5},$d=w.useMemo(()=>Mo.models.map(W=>{const se=Mo.providers.find(He=>He.id===W.provider),ve=W.provider==="claude-code"?!!Mo.claudeCodeAuthenticated:W.provider==="codex"?!!Mo.codexAuthenticated:(se==null?void 0:se.enabled)&&!!(se!=null&&se.apiKey),Ae=W.enabled&&ve,Ie=Xft(W.id,W.provider);return{id:W.id,name:W.name,provider:W.provider,Icon:Ie,isAvailable:Ae,isEnabled:W.enabled,isProviderConfigured:ve}}).sort((W,se)=>{const ve=nE[W.provider]||99,Ae=nE[se.provider]||99;return ve-Ae}),[Mo.models,Mo.providers,Mo.claudeCodeAuthenticated,Mo.codexAuthenticated]);w.useMemo(()=>$d.filter(N=>N.isAvailable),[$d]);const Zm=w.useMemo(()=>Mo.providers.filter(N=>N.enabled&&N.apiKey).map(N=>({id:N.id,apiKey:N.apiKey})),[Mo.providers]),rE=w.useRef(Zm);rE.current=Zm;const Jm=w.useRef(Ht);Jm.current=Ht;const[Zo,xo]=w.useState(null),[hh,Nl]=w.useState(!1),[ph,Fd]=w.useState("disconnected"),[sp,sc]=w.useState([]);w.useEffect(()=>{if(sp.length>0){const N=setTimeout(()=>{sc([])},5e3);return()=>clearTimeout(N)}},[sp]);const[bi,sE]=w.useState(null),[oE,Xm]=w.useState(!1),[zn,Oo]=w.useState(null),[Uc,iE]=w.useState(!1),{stream:Qm,cancel:aE,isInitialized:qb}=Not({onError:N=>console.error("[AI SDK] Error:",N),onTextDelta:N=>{console.log("[Stream] Text delta:",N.substring(0,50)),xo(W=>W?{...W,content:W.content+N}:(console.warn("[Stream] No streaming message state!"),null))},onReasoningDelta:N=>{console.log("[Stream] Reasoning delta:",N.substring(0,50)),xo(W=>W?{...W,reasoning:W.reasoning+N}:null)},onToolCall:N=>{xo(W=>W?{...W,toolCalls:[...W.toolCalls,{id:N.toolCallId,name:N.toolName,args:N.args,status:"running"}]}:null),Fs.trackStart({id:N.toolCallId,name:N.toolName,args:N.args})},onToolResult:N=>{var se,ve;if(xo(Ae=>Ae?{...Ae,toolCalls:Ae.toolCalls.map(Ie=>Ie.id===N.toolCallId?{...Ie,status:"complete",result:N.result}:Ie)}:null),N.result&&typeof N.result=="object"&&"error"in N.result){const Ae=String(N.result.error),Ie=((se=N.toolName)==null?void 0:se.replace(/^mcp_[^_]+_/,""))||"tool",He=Rit(N.toolCallId,Ie,new Error(Ae)),bt=Mit(He);console.log(`[Tool Error] ${bt.title}: ${bt.description}`),Fs.trackError(N.toolCallId,Ae)}else{Fs.trackSuccess(N.toolCallId,N.result);const Ae=((ve=N.toolName)==null?void 0:ve.toLowerCase())||"";if(Ae.includes("write")||Ae.includes("edit")){const Ie=N.result,He=(Ie==null?void 0:Ie.path)||(Ie==null?void 0:Ie.file_path)||(Ie==null?void 0:Ie.filePath);typeof He=="string"&&(console.log("[Tool Result] File modification detected:",Ae,He),en.current({type:"write",path:He,newContent:void 0}))}}}});w.useEffect(()=>{qb&&ph==="disconnected"&&Fd("idle")},[qb,ph]);const Gb=w.useMemo(()=>(Mo.connections||[]).filter(N=>N.type==="mcp"&&"transport"in N).filter(N=>N.enabled),[Mo.connections]),{allTools:eg,callTool:lE}=nit({initialServers:Gb,autoConnect:!0,onError:(N,W)=>{console.error(`[MCP] Error${W?` on server ${W}`:""}:`,N.message)}}),tg=w.useMemo(()=>eg.map(N=>{var W,se;return{name:N.name,description:N.description,inputSchema:{type:"object",properties:((W=N.inputSchema)==null?void 0:W.properties)||{},required:((se=N.inputSchema)==null?void 0:se.required)||[]},serverId:N.serverId}}),[eg]),[Wb,Yb]=w.useState(null),Bd=w.useRef(null),bk=w.useCallback(N=>new Promise(W=>{Bd.current=W,Yb(N)}),[]),yk=w.useCallback((N,W)=>{Bd.current&&(Bd.current(W),Bd.current=null),Yb(null)},[]),vk=w.useCallback(N=>{Bd.current&&(Bd.current("skipped"),Bd.current=null),Yb(null)},[]),{isProcessing:_a,updateContext:op,processMessage:ng,setProcessing:rg}=zot({mcpTools:tg,callMCPTool:lE,onFileModified:w.useCallback(N=>{en.current(N)},[]),onAskClarifyingQuestion:bk}),[cE,mh]=w.useState(!1),[ip,sg]=w.useState(""),[Er,qa]=w.useState(null),[ap,lp]=w.useState(!1),[Ga,yi]=w.useState([]),[Ou,cp]=w.useState(!1),[Sa,Wa]=w.useState("desktop"),Kb=[{name:"iPhone SE",width:375,height:667,type:"mobile"},{name:"iPhone 14",width:390,height:844,type:"mobile"},{name:"iPhone 14 Pro Max",width:430,height:932,type:"mobile"},{name:"iPhone 15 Pro",width:393,height:852,type:"mobile"},{name:"Samsung Galaxy S21",width:360,height:800,type:"mobile"},{name:"Pixel 7",width:412,height:915,type:"mobile"},{name:"iPad Mini",width:768,height:1024,type:"tablet"},{name:"iPad Air",width:820,height:1180,type:"tablet"},{name:'iPad Pro 11"',width:834,height:1194,type:"tablet"},{name:'iPad Pro 12.9"',width:1024,height:1366,type:"tablet"},{name:"Surface Pro 7",width:912,height:1368,type:"tablet"},{name:"Galaxy Tab S7",width:800,height:1280,type:"tablet"}],[Oi,Zb]=w.useState(null),[uE,xk]=w.useState(375),[dE,fE]=w.useState(667),[gh,og]=w.useState(!1),[Ta,zd]=w.useState(!1),[qi,bh]=w.useState("fit"),[up,yh]=w.useState(!1),dp=[{value:"fit",label:"Fit"},{value:"50",label:"50%"},{value:"75",label:"75%"},{value:"100",label:"100%"},{value:"125",label:"125%"},{value:"150",label:"150%"}],fp=gh?uE:(Oi==null?void 0:Oi.width)??(Sa==="tablet"?768:375),Hc=gh?dE:(Oi==null?void 0:Oi.height)??(Sa==="tablet"?1024:667),Jb=N=>{Zb(N),og(!1),Wa(N.type),zd(!1)},ig=()=>{og(!0),Zb(null),Wa("mobile"),zd(!1)},[Gi,ag]=w.useState([]),[Do,lg]=w.useState(!1),[Il,hE]=w.useState(192),[Rl,Du]=w.useState(new Set),[vh,Xb]=w.useState(!1),cg=w.useRef(0),Qb=w.useRef(192),la=w.useRef(null),[ti,oc]=w.useState(new Set),Vc=w.useRef(null),[xh,Ml]=w.useState(!1);w.useCallback((N,W,se)=>{const ve=se!==void 0?`[${N}] ${W}: ${typeof se=="object"?JSON.stringify(se,null,2):se}`:`[${N}] ${W}`;console.log(ve),xh&&ag(Ae=>[...Ae.slice(-199),{type:"info",message:ve,timestamp:new Date}])},[xh]);const[hs,Ya]=w.useState(null),[Po,Ol]=w.useState(null),wo=Hot(Po==null?void 0:Po.fileName),pE=w.useCallback(N=>{if(!Po)return;const se=N.target.closest("pre");if(!se)return;const ve=se.getBoundingClientRect(),Ae=20,Ie=8,He=N.clientY-ve.top,bt=N.clientX-ve.left,cn=Math.floor(He/Ae)+Po.startLine,Et=Math.floor(bt/Ie);wo.showHover(N.clientX,N.clientY,cn,Et)},[Po,wo]),[jd,Di]=w.useState([]),[ug,Qs]=w.useState(!1),[cs,Rr]=w.useState(""),us=w.useRef([]),As=w.useRef(!1);w.useEffect(()=>{us.current=jd,As.current=ug},[jd,ug]);const ic=w.useRef(null),qc=w.useRef(null),Jn=w.useRef(new Map);w.useCallback(N=>Jn.current.get(N),[]),Jn.current.get(l);const eo=u.isWebviewReady,Sn=typeof window<"u"&&((_p=window.electronAPI)==null?void 0:_p.isElectron);w.useEffect(()=>{console.log("isElectron:",Sn),console.log("electronAPI:",window.electronAPI)},[Sn]),w.useEffect(()=>{localStorage.setItem("darkMode",String(he))},[he]),w.useEffect(()=>{var ve,Ae,Ie,He;(async()=>{var bt;if((bt=window.electronAPI)!=null&&bt.fastApply)try{const cn=await window.electronAPI.fastApply.getStatus();Wm(cn.ready)}catch(cn){console.log("[FastApply] Status check error:",cn)}})();const W=(Ae=(ve=window.electronAPI)==null?void 0:ve.fastApply)==null?void 0:Ae.onModelLoaded(()=>{Wm(!0)}),se=(He=(Ie=window.electronAPI)==null?void 0:Ie.fastApply)==null?void 0:He.onModelUnloaded(()=>{Wm(!1)});return()=>{W==null||W(),se==null||se()}},[]),w.useEffect(()=>{Rt.current=wt},[wt]),w.useEffect(()=>{Bt.current=ye},[ye]),w.useEffect(()=>{fn.current=ht},[ht]),w.useEffect(()=>{if(wt){In.current={model:Ht,thinkingLevel:mi};const N=$d.find(W=>W.id==="gemini-2.5-flash-lite"&&W.isAvailable)||$d.find(W=>W.id.includes("gemini-2")&&W.id.includes("flash")&&W.isAvailable)||$d.find(W=>W.id.includes("flash")&&W.isAvailable)||$d.find(W=>W.id.includes("haiku")&&W.isAvailable);N&&(console.log("[Inspector] Switching to fast model:",N.id),Ur({id:N.id,name:N.name,provider:N.provider,Icon:N.Icon})),mi!=="off"&&(console.log("[Inspector] Disabling thinking mode"),Ru("off"))}else In.current&&(console.log("[Inspector] Restoring previous model:",In.current.model.id),Ur(In.current.model),Ru(In.current.thinkingLevel),In.current=null)},[wt]);const Pu=w.useCallback(()=>{Qw(N=>!N)},[]),ey=w.useCallback(N=>{N.preventDefault(),ut(!0)},[]);w.useEffect(()=>{if(!Be)return;const N=se=>{const ve=window.innerWidth-se.clientX;ze(Math.max(430,Math.min(800,ve)))},W=()=>{ut(!1)};return document.addEventListener("mousemove",N),document.addEventListener("mouseup",W),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",W)}},[Be]);const hp=w.useCallback(N=>{N.preventDefault(),cg.current=N.clientY,Qb.current=Il,Xb(!0)},[Il]);w.useEffect(()=>{if(!vh)return;const N=se=>{const ve=cg.current-se.clientY,Ae=Qb.current+ve;hE(Math.max(100,Math.min(500,Ae)))},W=()=>{Xb(!1)};return document.addEventListener("mousemove",N),document.addEventListener("mouseup",W),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",W)}},[vh]);const dg=w.useCallback(async N=>{Cl("stash"),N&&N.trim()?await Kt.stashWithMessage(N.trim()):await Kt.stash(),Cl(null),mh(!1),sg("")},[Kt]),Dl=w.useCallback(()=>{console.log("[Exec] Changes confirmed"),qa(null),fe(N=>[...N,{id:Date.now().toString(),role:"system",content:"Changes confirmed.",timestamp:new Date}]),dge().catch(N=>console.error("[Audio] Approval sound error:",N))},[]),ca=w.useCallback(async()=>{const N=Jn.current.get(l);console.log("[Exec] Rejecting change, pendingChange:",Er),console.log("[Exec] undoCode:",Er==null?void 0:Er.undoCode),console.log("[Exec] webview:",!!N);let W=!1;if(Er!=null&&Er.undoCode&&N){console.log("[Exec] Rejecting - running undo code:",Er.undoCode);try{await N.executeJavaScript(Er.undoCode),console.log("[Exec] Undo executed successfully"),W=!0}catch(se){console.error("[Exec] Undo error:",se)}}else console.log("[Exec] No undo code available or no webview");if(!W&&N){console.log("[Exec] Undo failed - reloading page as fallback");try{N.reload(),fe(se=>[...se,{id:Date.now().toString(),role:"system",content:"Changes discarded. Page reloaded to restore state.",timestamp:new Date}])}catch(se){console.error("[Exec] Failed to reload:",se)}}else fe(se=>[...se,{id:Date.now().toString(),role:"system",content:"Changes discarded.",timestamp:new Date}]);qa(null),fge().catch(se=>console.error("[Audio] Rejection sound error:",se))},[Er,l]),Lu=w.useCallback(N=>{console.log("[Voice] User said approve:",N),Dl()},[]),Gc=w.useCallback(N=>{console.log("[Voice] User said reject:",N),ca()},[]),ty=w.useCallback(N=>{console.log("[Voice] User said undo:",N),Er?ca():(hge().catch(W=>console.error("[Audio] Undo sound error:",W)),console.log("[Voice] No pending change to undo"))},[Er]),fg=w.useCallback(N=>{let W=N.trim();!W.startsWith("http://")&&!W.startsWith("https://")&&(W="http://"+W),console.log("Navigating to:",W);const se=i.find(ve=>ve.projectPath&&ve.url&&ve.url.toLowerCase()===W.toLowerCase());ee(W),se&&!u.projectPath?(console.log("Inheriting projectPath from matching tab:",se.projectPath),O({url:W,projectPath:se.projectPath})):O({url:W})},[O,i,u.projectPath]),wh=w.useCallback(N=>{N.preventDefault(),fg(J)},[J,fg]),hg=w.useCallback(()=>{const N=Jn.current.get(l);N&&Sn&&N.goBack()},[Sn,l]),Ud=w.useCallback(()=>{const N=Jn.current.get(l);N&&Sn&&N.goForward()},[Sn,l]),vi=w.useCallback(()=>{const N=Jn.current.get(l);N&&Sn&&N.reload()},[Sn,l]),Eh=w.useCallback((N,W)=>{console.log("[AI] Requesting element selection:",N,W);const se=[{pattern:/:contains\s*\(/i,name:":contains()"},{pattern:/:has\s*\([^)]*text/i,name:":has(text)"},{pattern:/:eq\s*\(/i,name:":eq()"},{pattern:/:gt\s*\(/i,name:":gt()"},{pattern:/:lt\s*\(/i,name:":lt()"},{pattern:/:first(?!\-)/i,name:":first (use :first-child or :first-of-type)"},{pattern:/:last(?!\-)/i,name:":last (use :last-child or :last-of-type)"}];for(const{pattern:Ae,name:Ie}of se)if(Ae.test(N)){console.error(`[AI] Invalid selector: ${Ie} is not valid CSS. Use attribute selectors like [attr*="text"] instead.`),fe(He=>[...He,{id:Date.now().toString(),role:"system",content:`Invalid selector: ${Ie} is jQuery-only, not valid CSS. Use attribute selectors like [attr*="text"] or call get_page_elements first.`,timestamp:new Date}]);return}const ve=Jn.current.get(l);ve&&eo&&(ve.send("select-element-by-selector",N),Ya({selector:N,reasoning:W||""}))},[eo,l]),mE=w.useCallback((N,W)=>{console.log("[AI] Executing code:",W),console.log("[AI] Code to execute:",N);const se=Jn.current.get(l);if(se&&eo){const ve=`
        (function() {
          try {
            ${N}
            return { success: true };
          } catch (err) {
            return { success: false, error: err.message, stack: err.stack };
          }
        })()
      `;se.executeJavaScript(ve).then(Ae=>{if(Ae&&Ae.success)console.log("[AI] Code executed successfully"),fe(Ie=>[...Ie,{id:Date.now().toString(),role:"system",content:` ${W}`,timestamp:new Date}]);else{const Ie=(Ae==null?void 0:Ae.error)||"Unknown error";console.error("[AI] Code execution error inside webview:",Ie),Ae!=null&&Ae.stack&&console.error("[AI] Stack:",Ae.stack),fe(He=>[...He,{id:Date.now().toString(),role:"system",content:` Error: ${Ie}`,timestamp:new Date}])}}).catch(Ae=>{console.error("[AI] Code execution error (syntax/parse):",Ae),fe(Ie=>[...Ie,{id:Date.now().toString(),role:"system",content:` Syntax Error: ${Ae.message}`,timestamp:new Date}])})}},[eo,l]),pp=w.useCallback((N,W)=>{console.log("[AI] Voice confirmation:",N,"element number:",W);const se=Jn.current.get(l);if(N&&(hs!=null&&hs.elements)&&hs.elements.length>0){const ve=W?Math.min(Math.max(W-1,0),hs.elements.length-1):0;nt(hs.elements[ve]),se==null||se.send("clear-selection"),Ya(null)}else se==null||se.send("clear-selection"),Ya(null)},[hs,l]),wk=w.useCallback(async N=>{console.log("[AI] Highlighting element by number:",N);const W=Jn.current.get(l);if(!W||!eo)return{success:!1,error:"Webview not ready"};const se=`
      (function() {
        const elementNumber = ${N};
        const elements = window.__numberedElements;

        if (!elements || elements.length === 0) {
          return { success: false, error: 'No numbered elements. Call get_page_elements first.' };
        }

        const index = elementNumber - 1; // Convert to 0-indexed
        if (index < 0 || index >= elements.length) {
          return { success: false, error: 'Element ' + elementNumber + ' not found. Valid range: 1-' + elements.length };
        }

        const element = elements[index];

        // Clear any previous highlight
        document.querySelectorAll('.cluso-highlighted').forEach(el => {
          el.classList.remove('cluso-highlighted');
          el.style.outline = '';
          el.style.outlineOffset = '';
        });

        // Clear all number badges now that user has selected one
        document.querySelectorAll('.element-number-badge').forEach(b => b.remove());

        // Highlight the selected element
        element.classList.add('cluso-highlighted');
        element.style.outline = '3px solid #3b82f6';
        element.style.outlineOffset = '2px';
        element.scrollIntoView({ behavior: 'smooth', block: 'center' });

        // Store as current focus for subsequent operations
        window.__focusedElement = element;

        const text = element.innerText?.substring(0, 50) || '';
        const tag = element.tagName.toLowerCase();

        return {
          success: true,
          element: { number: elementNumber, tag, text: text.trim(), totalElements: elements.length }
        };
      })()
    `;try{const ve=await W.executeJavaScript(se);return console.log("[AI] Highlight by number result:",ve),ve}catch(ve){return console.error("[AI] Highlight by number error:",ve),{success:!1,error:ve.message}}},[eo,l]),Ek=w.useCallback(async()=>{console.log("[AI] Clearing focus scope");const N=Jn.current.get(l);if(!N||!eo)return{success:!1};const W=`
      (function() {
        // Clear focus
        window.__focusedElement = null;

        // Clear all highlights
        document.querySelectorAll('.cluso-highlighted').forEach(el => {
          el.classList.remove('cluso-highlighted');
          el.style.outline = '';
          el.style.outlineOffset = '';
        });

        // Clear number badges
        document.querySelectorAll('.element-number-badge').forEach(b => b.remove());

        // Clear stored elements
        window.__numberedElements = [];

        return { success: true };
      })()
    `;try{return await N.executeJavaScript(W),console.log("[AI] Focus cleared"),{success:!0}}catch(se){return console.error("[AI] Clear focus error:",se),{success:!1}}},[eo,l]),Lo=w.useCallback(async N=>(console.log("[AI] Setting viewport to:",N),Wa(N),{success:!0}),[]),ny=w.useCallback(async N=>{console.log("[AI] Switching to tab type:",N);const W=i.find(se=>se.type===N);return W?c(W.id):E(N),{success:!0}},[i,E]),Hd=w.useCallback(async(N,W=!0)=>{console.log("[AI] Getting page elements, category:",N,"showBadges:",W);const se=Jn.current.get(l);if(!se||!eo)return"Error: Webview not ready";const ve={buttons:'button, [role="button"], [data-slot="button"], input[type="button"], input[type="submit"]',links:'a[href], [role="link"]',inputs:'input, textarea, select, [role="textbox"], [contenteditable="true"]',images:'img, [role="img"], svg',headings:'h1, h2, h3, h4, h5, h6, [role="heading"]',all:'button, [role="button"], a[href], input, textarea, select, img, h1, h2, h3, h4, h5, h6'},Ae=ve[N||"all"]||ve.all,Ie=`
      (function() {
        const category = '${N||"all"}';
        const selector = '${Ae}';
        const showBadges = ${W};
        const results = {};

        // Clear existing number badges
        document.querySelectorAll('.element-number-badge').forEach(b => b.remove());

        // Check if we have a focused element (scoped search)
        const focusScope = window.__focusedElement;
        const searchRoot = focusScope || document;

        // Helper to get element summary
        function summarize(el, number) {
          const text = el.innerText?.substring(0, 50) || '';
          const id = el.id ? '#' + el.id : '';
          const classes = el.className ? '.' + String(el.className).split(' ').filter(c => c && !c.includes('inspector') && !c.includes('cluso')).slice(0, 2).join('.') : '';
          const href = el.getAttribute('href') || '';
          const ariaLabel = el.getAttribute('aria-label') || '';
          return { number, tag: el.tagName.toLowerCase(), id, classes, text: text.trim(), href, ariaLabel };
        }

        // Create number badge
        function createBadge(number) {
          const badge = document.createElement('div');
          badge.className = 'element-number-badge';
          badge.textContent = number;
          badge.style.cssText = 'position:absolute;top:-8px;left:-8px;width:20px;height:20px;background:#3b82f6;color:white;border-radius:50%;font-size:11px;font-weight:bold;display:flex;align-items:center;justify-content:center;z-index:999999;pointer-events:none;box-shadow:0 1px 3px rgba(0,0,0,0.3);';
          return badge;
        }

        // Find elements - scoped to focused element if exists
        const elements = searchRoot.querySelectorAll(selector);
        const numberedElements = [];

        // Collect element info (and optionally add badges)
        elements.forEach((el, idx) => {
          // Skip if element is hidden
          const style = window.getComputedStyle(el);
          if (style.display === 'none' || style.visibility === 'hidden') return;

          const num = numberedElements.length + 1;

          // Only create badges if showBadges is true
          if (showBadges) {
            const badge = createBadge(num);

            // Make element position relative if static
            const pos = style.position;
            if (pos === 'static') {
              el.style.position = 'relative';
            }

            el.appendChild(badge);
          }
          numberedElements.push({ ...summarize(el, num), element: el });
        });

        // Store elements for highlight_element_by_number to use
        window.__numberedElements = numberedElements.map(e => e.element);

        results.totalElements = numberedElements.length;
        results.category = category;
        results.elements = numberedElements.slice(0, 20).map(({ element, ...rest }) => rest); // Return first 20 for AI context
        results.focusScope = focusScope ? {
          tag: focusScope.tagName.toLowerCase(),
          text: (focusScope.innerText || '').substring(0, 30),
          hint: 'Showing elements WITHIN focused scope. Say "clear focus" to see all elements.'
        } : null;
        results.note = numberedElements.length > 0
          ? 'Elements numbered on page. Use highlight_element_by_number(N) to highlight or set focus.'
          : 'No elements found' + (focusScope ? ' within focused area.' : '.');

        return JSON.stringify(results, null, 2);
      })()
    `;try{const He=await se.executeJavaScript(Ie);return console.log("[AI] Page elements result:",He),He}catch(He){return console.error("[AI] Failed to scan page elements:",He),"Error scanning page: "+He.message}},[eo,l]),{isActive:ac,isPrimed:pg,initialize:Vd,primeContext:qd}=rit({cwd:(u==null?void 0:u.projectPath)||void 0,onSelectionResult:w.useCallback(N=>{var W;console.log("[SelectorAgent] Selection result:",N),N.selector?Eh(N.selector,N.reasoning):(W=N.suggestions)!=null&&W.length&&console.log("[SelectorAgent] No match, suggestions:",N.suggestions)},[Eh]),onError:w.useCallback(N=>{console.error("[SelectorAgent] Error:",N)},[])});w.useEffect(()=>{Sn&&!ac&&Vd().then(N=>{N&&console.log("[SelectorAgent] Initialized successfully")})},[Sn,ac,Vd]);const gE=w.useCallback(async()=>{if(!ac)return;const N=await Hd("all",!1);if(N&&!N.startsWith("Error")){const W=Jn.current.get(l),se=W?await W.executeJavaScript("window.location.href").catch(()=>""):"",ve=W?await W.executeJavaScript("document.title").catch(()=>""):"";await qd({pageElements:N,pageUrl:se,pageTitle:ve}),console.log("[SelectorAgent] Context primed")}},[ac,Hd,qd,l]);w.useEffect(()=>{if(ac&&eo&&!pg){const N=setTimeout(()=>{gE()},500);return()=>clearTimeout(N)}},[ac,eo,pg,gE]);const bE=w.useCallback(async(N,W,se,ve)=>{var Ae;if(console.log("[AI] Patching source file:",N,ve),!Sn||!((Ae=window.electronAPI)!=null&&Ae.files))return{success:!1,error:"File editing only available in Electron mode"};try{const Ie=await window.electronAPI.files.readFile(N);if(!Ie.success||!Ie.data)return{success:!1,error:`Could not read file: ${N}`};const He=Ie.data;if(!He.includes(W))return{success:!1,error:`Could not find the code to replace in ${N}. The file may have changed.`};const bt=He.replace(W,se);return(await window.electronAPI.files.writeFile(N,bt)).success?(fe(Et=>[...Et,{id:Date.now().toString(),role:"system",content:` Patched ${N}: ${ve}`,timestamp:new Date}]),{success:!0}):{success:!1,error:`Failed to write file: ${N}`}}catch(Ie){return console.error("[AI] Failed to patch source file:",Ie),{success:!1,error:Ie.message}}},[Sn]);w.useCallback(async N=>{var W;if(console.log("[AI] Listing files:",N),!Sn||!((W=window.electronAPI)!=null&&W.files))return"Error: File listing only available in Electron mode";try{const se=await window.electronAPI.files.listDirectory(N);return se.success&&se.data?se.data.map(Ae=>`${Ae.isDirectory?"":""} ${Ae.name}${Ae.isDirectory?"/":""}`).join(`
`)||"Empty directory":"Error: Could not list directory"}catch(se){return"Error: "+se.message}},[Sn]);const _k=w.useCallback(async N=>{var W;if(console.log("[AI] Reading file:",N),!Sn||!((W=window.electronAPI)!=null&&W.files))return"Error: File reading only available in Electron mode";try{const se=await window.electronAPI.files.readFile(N);if(se.success&&se.data){const ve=se.data;return ve.length>1e4?ve.substring(0,1e4)+`
... (truncated, file is `+ve.length+" chars)":ve}return"Error: Could not read file"}catch(se){return"Error: "+se.message}},[Sn]),yE=w.useCallback(async N=>{console.log("[AI] Clicking element:",N);const W=Jn.current.get(l);if(!W||!eo)return{success:!1,error:"Webview not ready"};try{const se=`
        (function() {
          const el = document.querySelector('${N.replace(/'/g,"\\'")}');
          if (el) {
            el.click();
            return { success: true };
          }
          return { success: false, error: 'Element not found' };
        })()
      `;return await W.executeJavaScript(se)}catch(se){return{success:!1,error:se.message}}},[eo,l]),Gd=w.useCallback(async(N,W)=>{console.log("[AI] Navigating:",N,W);const se=Jn.current.get(l);if(!se)return{success:!1,error:"Webview not available"};try{switch(N){case"back":se.goBack();break;case"forward":se.goForward();break;case"reload":se.reload();break;case"goto":if(W)se.loadURL(W);else return{success:!1,error:"URL required for goto action"};break;default:return{success:!1,error:`Unknown action: ${N}`}}return{success:!0}}catch(ve){return{success:!1,error:ve.message}}},[l]),ry=w.useCallback(async N=>{console.log("[AI] Scrolling to:",N);const W=Jn.current.get(l);if(!W||!eo)return{success:!1,error:"Webview not ready"};try{let se;return N==="top"?se="window.scrollTo({ top: 0, behavior: 'smooth' }); true;":N==="bottom"?se="window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }); true;":se=`
          (function() {
            const el = document.querySelector('${N.replace(/'/g,"\\'")}');
            if (el) {
              el.scrollIntoView({ behavior: 'smooth', block: 'center' });
              return true;
            }
            return false;
          })()
        `,{success:!!await W.executeJavaScript(se)}}catch(se){return{success:!1,error:se.message}}},[eo,l]),mp=w.useCallback(async N=>{var W;if(console.log("[FileBrowser] Opening:",N),!Sn||!((W=window.electronAPI)!=null&&W.files))return"Error: File browser only available in Electron mode";try{const se=N||cs||".",ve=await window.electronAPI.files.listDirectory(se);if(ve.success&&ve.data){const Ae=ve.data.map(He=>({name:He.name,isDirectory:He.isDirectory,path:`${se}/${He.name}`.replace(/\/\//g,"/")}));cs||Rr(se);const Ie={type:"directory",path:se,title:se.split("/").pop()||se,items:Ae};return us.current=[Ie],As.current=!0,Di([Ie]),Qs(!0),console.log("[FileBrowser] Opened - refs updated:",As.current,us.current.length),`Showing ${Ae.length} items. Say "open" followed by a number to open an item.`}return"Error: Could not list directory"}catch(se){return"Error: "+se.message}},[Sn,cs]),sy=w.useCallback(async N=>{var He,bt,cn;console.log("[FileBrowser] Opening item:",N),console.log("[FileBrowser] State check - visible:",As.current,"stack length:",us.current.length);const W=us.current,se=As.current;if(!se||W.length===0)return`Error: No file browser open. (visible: ${se}, stack: ${W.length})`;const ve=W[W.length-1];if(ve.type!=="directory"||!ve.items)return"Error: Current panel is not a directory";const Ae=N-1;if(Ae<0||Ae>=ve.items.length)return`Error: Invalid item number. Choose 1-${ve.items.length}`;const Ie=ve.items[Ae];if(Ie.isDirectory){if(!Sn||!((He=window.electronAPI)!=null&&He.files))return"Error: File browser only available in Electron mode";const Et=await window.electronAPI.files.listDirectory(Ie.path);if(Et.success&&Et.data){const En=Et.data.map(_t=>({name:_t.name,isDirectory:_t.isDirectory,path:`${Ie.path}/${_t.name}`.replace(/\/\//g,"/")})),lt={type:"directory",path:Ie.path,title:Ie.name,items:En};return us.current=[...W,lt],Di(_t=>[..._t,lt]),`Opened folder "${Ie.name}" with ${En.length} items.`}return"Error: Could not open folder"}else{const Et=(bt=Ie.name.split(".").pop())==null?void 0:bt.toLowerCase();if(["png","jpg","jpeg","gif","svg","webp","ico"].includes(Et||"")){const lt={type:"image",path:Ie.path,title:Ie.name};return us.current=[...W,lt],Di(_t=>[..._t,lt]),`Showing image "${Ie.name}"`}else{if(!Sn||!((cn=window.electronAPI)!=null&&cn.files))return"Error: File reading only available in Electron mode";const lt=await window.electronAPI.files.readFile(Ie.path);if(lt.success&&lt.data){const _t=lt.data.length>5e4?lt.data.substring(0,5e4)+`
... (truncated)`:lt.data,bn={type:"file",path:Ie.path,title:Ie.name,content:_t};return us.current=[...W,bn],Di(Wn=>[...Wn,bn]),`Opened file "${Ie.name}"`}return"Error: Could not read file"}}},[Sn]),Wd=w.useCallback(()=>{const N=As.current,W=us.current;if(!N)return"No file browser open";if(W.length<=1)return As.current=!1,us.current=[],Qs(!1),Di([]),"Closed file browser";us.current=W.slice(0,-1),Di(ve=>ve.slice(0,-1));const se=W[W.length-2];return`Back to "${(se==null?void 0:se.title)||"root"}"`},[]),gp=w.useCallback(()=>(As.current=!1,us.current=[],Qs(!1),Di([]),"Closed file browser"),[]),mg=w.useCallback(async(N,W)=>{var cn;console.log("[FileBrowser] Opening folder:",N||`#${W}`),console.log("[FileBrowser] State check - visible:",As.current,"stack length:",us.current.length);const se=us.current,ve=As.current;if(!ve||se.length===0)return`Error: No file browser open. Use list_files first to show the file browser. (visible: ${ve}, stack: ${se.length})`;const Ae=se[se.length-1];if(Ae.type!=="directory"||!Ae.items)return"Error: Current panel is not a directory";let Ie,He=-1;if(N){const Et=N.toLowerCase();if(He=Ae.items.findIndex(En=>En.isDirectory&&En.name.toLowerCase()===Et),He===-1&&(He=Ae.items.findIndex(En=>En.isDirectory&&En.name.toLowerCase().includes(Et))),He!==-1)Ie=Ae.items[He];else{const En=Ae.items.filter(lt=>lt.isDirectory).map(lt=>lt.name).join(", ");return`Error: No folder named "${N}" found. Available folders: ${En||"none"}`}}else if(W!==void 0){const Et=W-1;if(Et<0||Et>=Ae.items.length)return`Error: Invalid item number. Choose 1-${Ae.items.length}`;const En=Ae.items[Et];if(!En.isDirectory)return`Error: Item ${W} "${En.name}" is a file, not a folder. Use open_item for files.`;Ie=En,He=Et}else return"Error: Please provide either a folder name or item number";if(!Ie)return"Error: Could not find folder";if(!Sn||!((cn=window.electronAPI)!=null&&cn.files))return"Error: File browser only available in Electron mode";const bt=await window.electronAPI.files.listDirectory(Ie.path);if(bt.success&&bt.data){const Et=bt.data.map(lt=>({name:lt.name,isDirectory:lt.isDirectory,path:`${Ie.path}/${lt.name}`.replace(/\/\//g,"/")})),En={type:"directory",path:Ie.path,title:Ie.name,items:Et};return us.current=[...se,En],Di(lt=>[...lt,En]),`Opened folder "${Ie.name}" (item ${He+1}) with ${Et.length} items: ${Et.slice(0,5).map((lt,_t)=>`${_t+1}. ${lt.name}${lt.isDirectory?"/":""}`).join(", ")}${Et.length>5?"...":""}`}return"Error: Could not open folder"},[Sn]),gg=w.useCallback(async(N,W)=>{var Ie,He,bt;if(console.log("[FileBrowser] Opening file:",N||W),!Sn||!((Ie=window.electronAPI)!=null&&Ie.files))return"Error: File browser only available in Electron mode";if(W){const cn=await window.electronAPI.files.readFile(W);if(cn.success&&cn.data){const Et=W.split("/").pop()||W,En=(He=Et.split(".").pop())==null?void 0:He.toLowerCase();if(["png","jpg","jpeg","gif","svg","webp","ico"].includes(En||"")){const _t={type:"image",path:W,title:Et};return us.current=[_t],As.current=!0,Di([_t]),Qs(!0),`Showing image "${Et}"`}else{const _t=cn.data.length>5e4?cn.data.substring(0,5e4)+`
... (truncated)`:cn.data,bn={type:"file",path:W,title:Et,content:_t};return us.current=[bn],As.current=!0,Di([bn]),Qs(!0),`Opened file "${Et}"`}}return`Error: Could not read file at ${W}`}if(!N)return"Error: Please provide either a file name or path";const se=us.current;let ve=cs||".";se.length>0&&se[se.length-1].type==="directory"&&(ve=se[se.length-1].path);const Ae=await window.electronAPI.files.listDirectory(ve);if(Ae.success&&Ae.data){const cn=N.toLowerCase();let Et=Ae.data.find(lt=>!lt.isDirectory&&lt.name.toLowerCase()===cn);if(Et||(Et=Ae.data.find(lt=>!lt.isDirectory&&lt.name.toLowerCase().includes(cn))),Et){const lt=`${ve}/${Et.name}`.replace(/\/\//g,"/"),_t=await window.electronAPI.files.readFile(lt);if(_t.success&&_t.data){const bn=(bt=Et.name.split(".").pop())==null?void 0:bt.toLowerCase(),Wn=["png","jpg","jpeg","gif","svg","webp","ico"].includes(bn||"");if(As.current)if(Wn){const Qr={type:"image",path:lt,title:Et.name};return us.current=[...se,Qr],Di(to=>[...to,Qr]),`Showing image "${Et.name}"`}else{const Qr=_t.data.length>5e4?_t.data.substring(0,5e4)+`
... (truncated)`:_t.data,to={type:"file",path:lt,title:Et.name,content:Qr};return us.current=[...se,to],Di(es=>[...es,to]),`Opened file "${Et.name}"`}else{const Qr=Ae.data.map(es=>({name:es.name,isDirectory:es.isDirectory,path:`${ve}/${es.name}`.replace(/\/\//g,"/")})),to={type:"directory",path:ve,title:ve.split("/").pop()||ve,items:Qr};if(Wn){const es={type:"image",path:lt,title:Et.name};return us.current=[to,es],As.current=!0,Di([to,es]),Qs(!0),`Showing image "${Et.name}"`}else{const es=_t.data.length>5e4?_t.data.substring(0,5e4)+`
... (truncated)`:_t.data,xi={type:"file",path:lt,title:Et.name,content:es};return us.current=[to,xi],As.current=!0,Di([to,xi]),Qs(!0),`Opened file "${Et.name}"`}}}return`Error: Could not read file "${Et.name}"`}const En=Ae.data.filter(lt=>!lt.isDirectory).map(lt=>lt.name).slice(0,10).join(", ");return`Error: File "${N}" not found in ${ve}. Available files: ${En||"none"}${Ae.data.filter(lt=>!lt.isDirectory).length>10?"...":""}`}return"Error: Could not search directory"},[Sn,cs]),vE=w.useCallback(async N=>mp(N),[mp]),xE=w.useCallback(N=>{console.log("[InstantEdit] Applying HTML update to DOM");const W=Jn.current.get(l);if(!W||!eo){console.warn("[InstantEdit] Webview not ready");return}const se=`
      (function() {
        try {
          // Replace entire document with new HTML
          document.documentElement.innerHTML = \`${N.replace(/`/g,"\\`")}\`;
          return { success: true, message: 'HTML updated' };
        } catch (err) {
          return { success: false, error: err.message };
        }
      })()
    `;W.executeJavaScript(se).then(ve=>{ve!=null&&ve.success?(console.log("[InstantEdit] HTML applied to DOM successfully"),fe(Ae=>[...Ae,{id:Date.now().toString(),role:"system",content:" UI updated instantly",timestamp:new Date}])):console.error("[InstantEdit] Failed to apply HTML:",ve==null?void 0:ve.error)}).catch(ve=>{console.error("[InstantEdit] Error injecting HTML:",ve)})},[eo,l]),{streamState:Ka,connect:Yd,disconnect:wE,startVideoStreaming:oy,stopVideoStreaming:$u,stopSpeaking:bp}=Bge({videoRef:ic,canvasRef:qc,onCodeUpdate:xE,onElementSelect:Eh,onExecuteCode:mE,onConfirmSelection:pp,onGetPageElements:Hd,onPatchSourceFile:bE,onListFiles:vE,onReadFile:_k,onClickElement:yE,onNavigate:Gd,onScroll:ry,onOpenItem:sy,onOpenFile:gg,onOpenFolder:mg,onBrowserBack:Wd,onCloseBrowser:gp,onApproveChange:Lu,onRejectChange:Gc,onUndoChange:ty,onHighlightByNumber:wk,onClearFocus:Ek,onSetViewport:Lo,onSwitchTab:ny,selectedElement:de,googleApiKey:(kh=Mo.providers.find(N=>N.id==="google"))==null?void 0:kh.apiKey,selectedModelId:Ht.id});w.useEffect(()=>{var N;Sn&&((N=window.electronAPI)!=null&&N.files)&&(window.electronAPI.files.listPrompts().then(W=>{W.success&&W.data&&K0(W.data.map(se=>({name:se,prompt:""})))}),window.electronAPI.files.listDirectory().then(W=>{W.success&&W.data&&(console.log("[Files] Loaded directory:",W.data.length,"files"),xn(W.data))}))},[Sn]);const lc=w.useCallback(async N=>{var se;if(!Sn||!((se=window.electronAPI)!=null&&se.files))return;console.log("[@ Files] Loading directory:",N||"(default)");const W=await window.electronAPI.files.listDirectory(N);W.success&&W.data&&(console.log("[@ Files] Loaded",W.data.length,"files from:",N||"(default)"),xn(W.data),N&&qs(N))},[Sn]),_h=w.useCallback(N=>{Wo(W=>[...W,Tr]),lc(N),nr(""),vo(0)},[Tr,lc]),yp=w.useCallback(()=>{const N=[...co],W=N.pop();Wo(N),lc(W||u.projectPath||void 0),nr(""),vo(0)},[co,lc,u.projectPath]),iy=w.useCallback(async N=>{var se;if(!Sn||!((se=window.electronAPI)!=null&&se.files))return;const W=await window.electronAPI.files.selectFile(N);if(W.success&&W.data){const{path:ve,content:Ae}=W.data;let Ie,He,bt;const cn=ve.match(/\((\d+)-(\d+)\)$/);if(cn)Ie=parseInt(cn[1],10),He=parseInt(cn[2],10);else{const Et=ve.match(/\((\d+)\)$/);Et&&(Ie=parseInt(Et[1],10))}if(Ae&&Ie){const lt=(Ae.split(`
`)[0]||"").match(/(?:function|const|export\s+(?:default\s+)?(?:function|const)?)\s+(\w+)/);lt&&(bt=lt[1])}Xr(Et=>[...Et,{path:ve,content:Ae,lineStart:Ie,lineEnd:He,elementType:bt}]),De(Et=>{const En=Et.lastIndexOf("@");if(En===-1)return"";const lt=Et.substring(0,En),_t=ve.split("/").pop()||ve;return`${lt}[${_t}] `}),Nt(!1),nr(""),vo(0)}},[Sn]),Fu=w.useCallback(async N=>{var se;if(!Sn||!((se=window.electronAPI)!=null&&se.files))return;const W=await window.electronAPI.files.readPrompt(N);W.success&&W.data&&(De(W.data),El(!1),ih(""),vo(0))},[Sn]),Sh=hn.filter(N=>!N.name.startsWith(".")&&N.name.toLowerCase().includes(Ro.toLowerCase())),Wc=w.useMemo(()=>[{name:"new",prompt:"Clear the conversation"},{name:"clear",prompt:"Clear the conversation"},{name:"compact",prompt:"Compact context with optional guidance"},{name:"thinking",prompt:"Set reasoning level: off, low, med, high, ultrathink"}],[]),Kd=w.useMemo(()=>[...Wc,...Nu].filter(W=>W.name.toLowerCase().includes(Md.toLowerCase())),[Wc,Nu,Md]),bg=w.useMemo(()=>Yo.filter(N=>{const W=N.name.toLowerCase().includes(Z0.toLowerCase()),se=rc.some(ve=>ve.name===N.name&&ve.type===N.type);return W&&!se}),[Yo,Z0,rc]),Bu=w.useCallback(N=>{Bc(W=>W.some(ve=>ve.name===N.name&&ve.type===N.type)?W:[...W,N]),De(W=>{const se=N.type==="include"?"+":"-",ve=new RegExp(`\\${se}[a-zA-Z0-9_-]*$`);return W.replace(ve,"")}),Pn(!1),uo("")},[]),zu=w.useCallback(N=>{console.log("[Input] Changed:",N);const W=/\+([a-zA-Z0-9_-]+)\s/g;let se=N;const ve=[];let Ae;for(;(Ae=W.exec(N))!==null;)ve.push({name:Ae[1],type:"include"}),se=se.replace(Ae[0],"");const Ie=N.matchAll(/(?:^|\s)-([a-zA-Z][a-zA-Z0-9_-]*)\s/g);for(const lt of Ie)ve.push({name:lt[1],type:"exclude"}),se=se.replace(lt[0],lt[0].startsWith(" ")?" ":"");ve.length>0?(Bc(lt=>{const _t=[...lt];return ve.forEach(bn=>{_t.some(Qr=>Qr.name===bn.name&&Qr.type===bn.type)||_t.push(bn)}),_t}),Od(lt=>{const _t=[...lt];ve.forEach(Wn=>{const Qr=_t.findIndex(to=>to.name===Wn.name);Qr!==-1&&_t.splice(Qr,1),_t.unshift(Wn)});const bn=_t.slice(0,20);try{const Wn=`cluso-context-chips-${u.projectPath||"global"}`;localStorage.setItem(Wn,JSON.stringify(bn))}catch(Wn){console.warn("[ContextChips] Failed to save to localStorage:",Wn)}return bn}),De(se)):De(N),vo(0);const He=se.lastIndexOf("+"),bt=se.lastIndexOf("-");let cn=null,Et=-1;if(He!==-1){const lt=He>0?se.charAt(He-1):" ",_t=se.substring(He+1),bn=lt===" "||He===0,Wn=_t.includes(" ");bn&&!Wn&&(cn="+",Et=He)}if(bt!==-1&&bt>Et){const lt=bt>0?se.charAt(bt-1):" ",_t=se.substring(bt+1),bn=lt===" "||bt===0,Wn=_t.includes(" "),Qr=/^[a-zA-Z]/.test(_t);bn&&!Wn&&Qr&&(cn="-",Et=bt)}if(cn&&Et!==-1){const lt=se.substring(Et+1);uo(lt),Iu(cn==="+"?"include":"exclude"),Pn(!0),Nt(!1),El(!1);return}Pn(!1),uo("");const En=N.lastIndexOf("@");if(En!==-1){const lt=N.substring(En+1);if(lt.includes(" "))Nt(!1),nr("");else{const bn=lt;console.log("[Input] @ detected at position",En,"query:",bn),nr(bn),Nt(!0),El(!1),bn===""&&(console.log("[@ Files] First @, using project path:",u.projectPath||"(none)"),lc(u.projectPath||void 0))}}else if(N.startsWith("/")){const lt=N.substring(1);console.log("[Input] / detected, query:",lt),ih(lt),El(!0),Nt(!1)}else Nt(!1),El(!1),nr(""),ih("");if(N.trim().length>=3&&!N.startsWith("@")&&!N.startsWith("/")){const{intent:lt}=ng(N),_t={code_edit:"Edit Code",code_create:"Create",code_delete:"Delete",code_explain:"Explain",code_refactor:"Refactor",file_operation:"File Op",ui_inspect:"Inspect",ui_modify:"Modify UI",ui_build:"Build UI",research:"Research",analyze:"Analyze",compare:"Compare",plan:"Plan",document:"Document",test:"Test",debug:"Debug",review:"Review",deploy:"Deploy",configure:"Configure",question:"Question",chat:"Chat",unknown:""};if(lt.type!=="unknown"&&lt.confidence>.2){const bn=(lt.secondaryTypes||[]).filter(Wn=>Wn!==lt.type&&Wn!=="unknown");tt({type:lt.type,label:_t[lt.type]||lt.type,secondaryTypes:bn,secondaryLabels:bn.map(Wn=>_t[Wn]||Wn)})}else tt(null)}else tt(null)},[lc,ng,u.projectPath]);w.useEffect(()=>{const N=mt.current;N&&(N.style.height="auto",N.style.height=Math.min(N.scrollHeight,144)+"px")},[Fe]),w.useEffect(()=>{Ka.isConnected&&Y?navigator.mediaDevices.getDisplayMedia({video:!0}).then(N=>{ic.current&&(ic.current.srcObject=N,oy()),N.getVideoTracks()[0].onended=()=>{L(!1),$u()}}).catch(N=>{console.error("Failed to get display media",N),L(!1)}):($u(),ic.current&&ic.current.srcObject&&(ic.current.srcObject.getTracks().forEach(W=>W.stop()),ic.current.srcObject=null))},[Y,Ka.isConnected,oy,$u]);const ju=w.useRef(new Map),yg=w.useRef(new Map),vg=w.useCallback((N,W)=>{console.log(`[Tab ${N}] Setting up webview event handlers`);const se=()=>{const lt=W.getURL();console.log(`[Tab ${N}] Did navigate:`,lt),M(N,{canGoBack:W.canGoBack(),canGoForward:W.canGoForward()}),N===l&&ee(lt)},ve=()=>{console.log(`[Tab ${N}] Started loading`),M(N,{isLoading:!0})},Ae=()=>{console.log(`[Tab ${N}] Stopped loading`),M(N,{isLoading:!1})},Ie=()=>{const lt=W.getURL();console.log(`[Tab ${N}] Page finished loading, URL:`,lt),W.send("set-inspector-mode",Rt.current),W.send("set-screenshot-mode",Bt.current),M(N,{isWebviewReady:!0})},He=lt=>{console.error(`[Tab ${N}] Failed to load:`,lt.errorCode,lt.errorDescription,lt.validatedURL)},bt=lt=>{M(N,{title:lt.title})},cn=lt=>{var Wn,Qr,to,es,xi,ka,uc,Ah,qu,Gu,Nh,Jd,Ns,_o,wi,Xd,Cp,Qd,Ja,kp;const{channel:_t,args:bn}=lt;if(_t==="inspector-hover"){const Mt=bn[0];pe({element:Mt.element,rect:Mt.rect})}else if(_t==="inspector-hover-end")pe(null);else if(_t==="inspector-select"){const Mt=bn[0];nt({...Mt.element,x:Mt.x,y:Mt.y,rect:Mt.rect}),pe(null)}else if(_t==="screenshot-select"){const Mt=bn[0];$e(Mt.element),Ue(!1),W&&Mt.rect&&(W.send("hide-move-handles"),setTimeout(()=>{W.capturePage({x:Math.floor(Mt.rect.left),y:Math.floor(Mt.rect.top),width:Math.ceil(Mt.rect.width),height:Math.ceil(Mt.rect.height)}).then(er=>{Le(er.toDataURL()),W.send("show-move-handles")}).catch(er=>{console.error("Failed to capture screenshot:",er),W.send("show-move-handles")})},50))}else if(_t==="console-log"){const Mt=bn[0],er=Mt.level.toLowerCase()==="warning"?"warn":Mt.level.toLowerCase();ag(jn=>[...jn.slice(-99),{type:er,message:Mt.message,timestamp:new Date}])}else if(_t==="ai-selection-confirmed"){const Mt=bn[0];console.log("[AI] Element selection confirmed:",Mt),Ya(er=>({selector:Mt.selector,reasoning:(er==null?void 0:er.reasoning)||"",count:Mt.count,elements:Mt.elements.map(jn=>({...jn.element,rect:jn.rect}))}))}else if(_t==="ai-selection-failed"){const Mt=bn[0];console.error("[AI] Element selection failed:",Mt),Ya(null),fe(er=>[...er,{id:Date.now().toString(),role:"system",content:`Could not find element: ${Mt.selector}. ${Mt.error}`,timestamp:new Date}])}else if(_t==="move-select"){const Mt=bn[0];console.log("[Move] Element selected for repositioning:",Mt.element.tagName),nt({...Mt.element,rect:Mt.rect}),Yn({x:Mt.rect.left,y:Mt.rect.top,width:Mt.rect.width,height:Mt.rect.height}),pe(null)}else if(_t==="move-update"){const Mt=bn[0];console.log("[Move] Position updated:",Mt.targetRect),Yn(Mt.targetRect)}else if(_t==="move-confirmed"){const Mt=bn[0];console.log("[Move] Position confirmed:",Mt.targetRect),nt(er=>er?{...er,targetPosition:Mt.targetRect,originalPosition:Mt.originalRect}:null),Zt(!1),Yn(null)}else if(_t==="move-cancelled")console.log("[Move] Cancelled"),nt(null),Zt(!1),Yn(null);else if(_t==="drop-image-on-element"){const Mt=bn[0],er=ot.current,jn={...Mt.element,sourceLocation:er==null?void 0:er.sourceLocation},Vr=((Wn=Mt.element.tagName)==null?void 0:Wn.toLowerCase())||"";console.log("[Drop] Image dropped on element:",Vr,"classes:",Mt.element.className,"hasSource:",!!jn.sourceLocation);const jr=U.current.find(ur=>ur.id===N),qn=jr==null?void 0:jr.projectPath;if(!qn){console.error("[Drop] No project path set for tab:",N,"tab:",jr),fe(ur=>[...ur,{id:Date.now().toString(),role:"system",content:"Cannot save dropped image: no project folder selected. Please set a project folder first.",timestamp:new Date}]);return}const Is=(ur=>{let dr=0;for(let Vn=0;Vn<Math.min(ur.length,1e4);Vn++){const Hn=ur.charCodeAt(Vn);dr=(dr<<5)-dr+Hn,dr=dr&dr}return Math.abs(dr).toString(16).padStart(8,"0")})(Mt.imageData),sr=Mt.imageData.match(/^data:image\/(\w+);/),So=sr?sr[1].replace("jpeg","jpg"):"png",Wr=`img-${Is}.${So}`,Jt=`${`${qn}/public/uploads`}/${Wr}`,pn=`/uploads/${Wr}`,nn=Vr==="img",ln=["div","section","article","aside","header","footer","main","figure","span","p"].includes(Vr);(Qr=window.electronAPI)==null||Qr.files.saveImage(Mt.imageData,Jt).then(async ur=>{var vr,tr,Gs,Rs,ni,Ap,To,Aa;if(!(ur!=null&&ur.success))throw new Error((ur==null?void 0:ur.error)||"Failed to save");console.log("[Drop] Image saved:",pn);let dr,Vn,Hn,Xn;if(nn){Xn="src";const ms=await W.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  return el ? el.src : '';
                })();
              `);if(dr=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${pn}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Vn=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${ms}';
                    return 'Reverted';
                  }
                  return 'Element not found';
                })();
              `,Hn=`Set image src to ${Wr}`,(tr=(vr=jn.sourceLocation)==null?void 0:vr.sources)!=null&&tr[0]){const Ws=`dom-drop-${Date.now()}`;Oo({id:Ws,element:jn,cssChanges:{},srcChange:{oldSrc:ms||"",newSrc:pn},description:Hn,undoCode:Vn,applyCode:dr,userRequest:"Drop image on element",patchStatus:"preparing"}),Wi(Ws,jn,{},Hn,Vn,dr,"Drop image on element",qn,void 0,{oldSrc:ms||"",newSrc:pn})}}else if(ln){const ms=await W.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (!el) return null;
                  const img = el.querySelector('img');
                  if (img) {
                    return { hasChildImg: true, childSrc: img.src };
                  }
                  return { hasChildImg: false, currentBg: el.style.backgroundImage };
                })();
              `);if(ms!=null&&ms.hasChildImg){if(Xn="child-img",dr=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${pn}';
                        return 'Applied to child img';
                      }
                    }
                    return 'Element not found';
                  })();
                `,Vn=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${ms.childSrc}';
                        return 'Reverted';
                      }
                    }
                    return 'Element not found';
                  })();
                `,Hn=`Set child image src to ${Wr}`,(Rs=(Gs=jn.sourceLocation)==null?void 0:Gs.sources)!=null&&Rs[0]){const Ws=`dom-drop-${Date.now()}`,Ys={id:Ws,element:jn,cssChanges:{},srcChange:{oldSrc:ms.childSrc||"",newSrc:pn},description:Hn,undoCode:Vn,applyCode:dr,userRequest:"Drop image on child img element",patchStatus:"preparing"};Oo(Ys),Wi(Ws,jn,{},Hn,Vn,dr,"Drop image on child img element",qn,void 0,{oldSrc:ms.childSrc||"",newSrc:pn})}}else{Xn="background";const Ws=await W.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    return el ? { text: el.textContent, bg: el.style.backgroundImage, bgSize: el.style.backgroundSize, bgPos: el.style.backgroundPosition } : null;
                  })();
                `);if(dr=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = 'url(${pn})';
                      el.style.backgroundSize = 'cover';
                      el.style.backgroundPosition = 'center';
                      el.textContent = '';
                      return 'Applied background-image';
                    }
                    return 'Element not found';
                  })();
                `,Vn=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = '${(Ws==null?void 0:Ws.bg)||""}';
                      el.style.backgroundSize = '${(Ws==null?void 0:Ws.bgSize)||""}';
                      el.style.backgroundPosition = '${(Ws==null?void 0:Ws.bgPos)||""}';
                      el.textContent = '${((Ws==null?void 0:Ws.text)||"").replace(/'/g,"\\'")}';
                      return 'Reverted';
                    }
                    return 'Element not found';
                  })();
                `,Hn=`Set background-image to ${Wr}`,(Ap=(ni=jn.sourceLocation)==null?void 0:ni.sources)!=null&&Ap[0]){const Ys=`dom-drop-${Date.now()}`,Ms={id:Ys,element:jn,cssChanges:{backgroundImage:`url(${pn})`,backgroundSize:"cover",backgroundPosition:"center"},description:Hn,undoCode:Vn,applyCode:dr,userRequest:"Drop image on container element",patchStatus:"preparing"};Oo(Ms),Wi(Ys,jn,{backgroundImage:`url(${pn})`,backgroundSize:"cover",backgroundPosition:"center"},Hn,Vn,dr,"Drop image on container element",qn)}}}else{Xn="src";const ms=await W.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  return el ? el.src : '';
                })();
              `);if(dr=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el) {
                    el.src = '${pn}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Vn=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el) {
                    el.src = '${ms}';
                    return 'Reverted';
                  }
                  return 'Element not found';
                })();
              `,Hn=`Set ${Vr} src to ${Wr}`,(Aa=(To=jn.sourceLocation)==null?void 0:To.sources)!=null&&Aa[0]){const Ws=`dom-drop-${Date.now()}`,Ys={id:Ws,element:jn,cssChanges:{},srcChange:{oldSrc:ms||"",newSrc:pn},description:Hn,undoCode:Vn,applyCode:dr,userRequest:`Drop image on ${Vr} element`,patchStatus:"preparing"};Oo(Ys),Wi(Ws,jn,{},Hn,Vn,dr,`Drop image on ${Vr} element`,qn,void 0,{oldSrc:ms||"",newSrc:pn})}}await W.executeJavaScript(dr),console.log("[Drop] Applied image with method:",Xn),fe(ms=>[...ms,{id:Date.now().toString(),role:"assistant",content:Hn,timestamp:new Date,model:"system",intent:"ui_modify"}]),qa({code:dr,undoCode:Vn,description:Hn,additions:1,deletions:1,source:"dom"})}).catch(ur=>{console.error("[Drop] Failed to save/apply image:",ur),fe(dr=>[...dr,{id:Date.now().toString(),role:"system",content:`Failed to apply image: ${ur.message}`,timestamp:new Date}])})}else if(_t==="drop-url-on-element"){const Mt=bn[0];console.log("[Drop] URL dropped on element:",Mt.element.tagName,Mt.url);const er=(to=Mt.element.tagName)==null?void 0:to.toLowerCase();let jn="src";er==="a"?jn="href":(er==="img"||er==="video"||er==="audio"||er==="iframe")&&(jn="src");const Vr=`
          (function() {
            const elements = document.querySelectorAll('${Mt.element.tagName}');
            for (const el of elements) {
              if (el.className === '${Mt.element.className}') {
                el.${jn} = '${Mt.url}';
                return 'Applied';
              }
            }
            return 'Element not found';
          })();
        `;W.executeJavaScript(Vr),fe(jr=>[...jr,{id:Date.now().toString(),role:"assistant",content:`Set ${jn} to dropped URL on ${Mt.element.tagName}`,timestamp:new Date,model:"system",intent:"ui_modify"}])}else if(_t==="inline-edit-accept"){const Mt=bn[0];console.log("[Inline Edit] Accepted:",{old:(es=Mt.oldText)==null?void 0:es.substring(0,30),new:(xi=Mt.newText)==null?void 0:xi.substring(0,30),hasSourceLocation:!!((ka=Mt.element)!=null&&ka.sourceLocation),sourceFile:(Gu=(qu=(Ah=(uc=Mt.element)==null?void 0:uc.sourceLocation)==null?void 0:Ah.sources)==null?void 0:qu[0])==null?void 0:Gu.file});const er=(Ns=(Jd=(Nh=Mt.element)==null?void 0:Nh.sourceLocation)==null?void 0:Jd.sources)!=null&&Ns[0]?Mt.element:ot.current,jn=U.current.find(jr=>jr.id===N),Vr=jn==null?void 0:jn.projectPath;if((wi=(_o=er==null?void 0:er.sourceLocation)==null?void 0:_o.sources)!=null&&wi[0]&&Vr){const jr={oldText:Mt.oldText,newText:Mt.newText},qn=`inline-${Date.now()}`;Oo({id:qn,element:er,cssChanges:{},textChange:Mt.newText,description:`Change text: "${(Xd=Mt.oldText)==null?void 0:Xd.substring(0,20)}..."  "${(Cp=Mt.newText)==null?void 0:Cp.substring(0,20)}..."`,undoCode:`document.querySelector('*').textContent = ${JSON.stringify(Mt.oldText)}`,applyCode:`document.querySelector('*').textContent = ${JSON.stringify(Mt.newText)}`,userRequest:"Inline text edit",patchStatus:"preparing",userApproved:!0}),Wi(qn,er,{},`Change text to "${(Qd=Mt.newText)==null?void 0:Qd.substring(0,30)}..."`,"","","Inline text edit",Vr,jr)}else console.log("[Inline Edit] Cannot create source patch - missing source location or project path",{hasSourceLocation:!!((kp=(Ja=er==null?void 0:er.sourceLocation)==null?void 0:Ja.sources)!=null&&kp[0]),projectPath:Vr,element:er==null?void 0:er.tagName});fe(jr=>{var qn,vs;return[...jr,{id:Date.now().toString(),role:"assistant",content:`Text changed: "${(qn=Mt.oldText)==null?void 0:qn.substring(0,30)}..."  "${(vs=Mt.newText)==null?void 0:vs.substring(0,30)}..."`,timestamp:new Date,model:"system",intent:"ui_modify"}]})}},Et=()=>{console.log(`[Tab ${N}] Webview DOM ready`),M(N,{isWebviewReady:!0}),W.send("set-inspector-mode",Rt.current),W.send("set-screenshot-mode",Bt.current)},En=lt=>{const bn={0:"log",1:"info",2:"warn",3:"error"}[lt.level]||"log";ag(Wn=>[...Wn.slice(-99),{type:bn,message:lt.message,timestamp:new Date}])};W.addEventListener("dom-ready",Et),W.addEventListener("console-message",En),W.addEventListener("did-navigate",se),W.addEventListener("did-navigate-in-page",se),W.addEventListener("did-start-loading",ve),W.addEventListener("did-stop-loading",Ae),W.addEventListener("did-finish-load",Ie),W.addEventListener("did-fail-load",He),W.addEventListener("page-title-updated",bt),W.addEventListener("ipc-message",cn);try{W.getURL()&&(M(N,{isWebviewReady:!0}),W.send("set-inspector-mode",Rt.current),W.send("set-screenshot-mode",Bt.current))}catch{console.log(`[Tab ${N}] Webview not yet ready for getURL`)}return()=>{W.removeEventListener("dom-ready",Et),W.removeEventListener("console-message",En),W.removeEventListener("did-navigate",se),W.removeEventListener("did-navigate-in-page",se),W.removeEventListener("did-start-loading",ve),W.removeEventListener("did-stop-loading",Ae),W.removeEventListener("did-finish-load",Ie),W.removeEventListener("did-fail-load",He),W.removeEventListener("page-title-updated",bt),W.removeEventListener("ipc-message",cn)}},[M]),vp=w.useCallback(N=>{let W=yg.current.get(N);return W||(W=se=>{if(se){const ve=se;Jn.current.set(N,ve),setTimeout(()=>{const Ae=ju.current.get(N);Ae&&Ae();const Ie=vg(N,ve);ju.current.set(N,Ie)},100)}else{const ve=ju.current.get(N);ve&&ve(),ju.current.delete(N),Jn.current.delete(N)}},yg.current.set(N,W),W)},[vg]);w.useEffect(()=>{la.current&&Do&&la.current.scrollIntoView({behavior:"smooth"})},[Gi,Do]);const xp=w.useCallback((N,W)=>{oc(se=>{const ve=new Set(se);if(W.shiftKey&&Vc.current!==null){const Ae=Math.min(Vc.current,N),Ie=Math.max(Vc.current,N);for(let He=Ae;He<=Ie;He++)ve.add(He)}else ve.has(N)?ve.delete(N):ve.add(N),Vc.current=N;return ve})},[]),$o=w.useMemo(()=>ti.size===0?null:Array.from(ti).sort((N,W)=>N-W).map(N=>Gi[N]).filter(Boolean),[ti,Gi]);w.useEffect(()=>{op({selectedElement:de||null,selectedFiles:gt,selectedLogs:($o==null?void 0:$o.map(N=>({type:N.type,message:N.message})))||[],projectPath:(u==null?void 0:u.projectPath)||null,recentMessages:Ce.slice(-10)})},[de,gt,$o,u==null?void 0:u.projectPath,Ce]);const EE=w.useCallback(()=>{ag([]),oc(new Set),Vc.current=null},[]),Yc=w.useCallback(N=>{Du(W=>{const se=new Set(W);return se.has(N)?se.delete(N):se.add(N),se})},[]),xg=w.useCallback(()=>{Du(new Set)},[]),ay=w.useCallback(async N=>{var W,se;if(!N.trim()||!((se=(W=window.electronAPI)==null?void 0:W.aiSdk)!=null&&se.webSearch)){console.warn("[Search] No query or webSearch not available");return}fh(!0),Dd(N),tp(!0),Q0(null);try{const ve=`${N.slice(0,500)} solution fix`;console.log("[Search] Searching for:",ve);const Ae=await window.electronAPI.aiSdk.webSearch(ve,5);Ae.success&&Ae.results?(Q0(Ae.results),console.log("[Search] Found",Ae.results.length,"results")):(console.error("[Search] Failed:",Ae.error),Q0([]))}catch(ve){console.error("[Search] Error:",ve),Q0([])}finally{fh(!1)}},[]),ly=w.useCallback(()=>{gi&&gi.length>0&&(Pd(gi),tp(!1))},[gi]);w.useEffect(()=>{const N=W=>{if(!Do||ti.size===0)return;const ve=navigator.platform.toUpperCase().indexOf("MAC")>=0?W.metaKey:W.ctrlKey;if(W.key==="Escape")oc(new Set),W.preventDefault();else if(ve&&W.key==="g"){const Ae=Array.from(ti).sort((Ie,He)=>Ie-He).map(Ie=>{var He;return((He=Gi[Ie])==null?void 0:He.message)||""}).join(`
`);ay(Ae),W.preventDefault()}else if(ve&&W.key==="c"&&ti.size>0){const Ae=document.activeElement;if(!((Ae==null?void 0:Ae.tagName)==="INPUT"||(Ae==null?void 0:Ae.tagName)==="TEXTAREA")){const He=Array.from(ti).sort((bt,cn)=>bt-cn).map(bt=>{const cn=Gi[bt];return cn?`[${cn.type}] ${cn.message}`:""}).filter(Boolean).join(`
`);navigator.clipboard.writeText(He),W.preventDefault()}}};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[Do,ti,Gi,De]);const wp=w.useMemo(()=>Rl.size===0?Gi:Gi.filter(N=>Rl.has(N.type)),[Gi,Rl]);w.useEffect(()=>{if(!_l)return;const N=W=>{W.target.closest("[data-thinking-popover]")||Lt(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[_l]);const Jo=w.useCallback(N=>{const se=(N.path.split("/").pop()||N.path).split("?")[0];yi(ve=>{const Ae=ve.findIndex(Ie=>Ie.path===N.path);if(Ae>=0){const Ie=[...ve];return Ie[Ae]={...Ie[Ae],additions:Ie[Ae].additions+(N.additions||0),deletions:Ie[Ae].deletions+(N.deletions||0),undoCode:N.undoCode||Ie[Ae].undoCode,originalContent:Ie[Ae].originalContent||N.originalContent,isFileModification:N.isFileModification||Ie[Ae].isFileModification,timestamp:new Date},Ie}return[...ve,{path:N.path,fileName:se,additions:N.additions||0,deletions:N.deletions||0,undoCode:N.undoCode,originalContent:N.originalContent,isFileModification:N.isFileModification,timestamp:new Date}]})},[]),Za=w.useCallback(async N=>{var se,ve;const W=Ga.find(Ae=>Ae.path===N);if(W){if(W.isFileModification&&W.originalContent!==void 0){console.log("[Undo] Restoring file:",N);const{api:Ae}=ai();if((se=Ae==null?void 0:Ae.files)!=null&&se.writeFile){const Ie=await Ae.files.writeFile(N,W.originalContent);Ie.success?(console.log("[Undo] File restored successfully"),yi(He=>He.filter(bt=>bt.path!==N))):console.error("[Undo] Failed to restore file:",Ie.error)}return}if(W.undoCode){const Ae=Jn.current.get(l);Ae&&Ae.executeJavaScript(W.undoCode).then(()=>{yi(Ie=>Ie.filter(He=>He.path!==N))}).catch(Ie=>console.error("[Undo] Error:",Ie))}else if(W.isFileModification){console.log("[Undo] Using git checkoutFile to restore:",N);const{api:Ae}=ai();if((ve=Ae==null?void 0:Ae.git)!=null&&ve.checkoutFile)try{const Ie=await Ae.git.checkoutFile(N);Ie.success?(console.log("[Undo] File restored via git checkoutFile"),yi(He=>He.filter(bt=>bt.path!==N))):(console.error("[Undo] Git checkoutFile failed:",Ie.error),yi(He=>He.filter(bt=>bt.path!==N)))}catch(Ie){console.error("[Undo] Git checkoutFile error:",Ie),yi(He=>He.filter(bt=>bt.path!==N))}else console.warn("[Undo] Git checkoutFile not available, cannot restore file"),yi(Ie=>Ie.filter(He=>He.path!==N))}else yi(Ae=>Ae.filter(Ie=>Ie.path!==N))}},[Ga,l]),Uu=w.useCallback(async()=>{var ve,Ae;const N=Jn.current.get(l),{api:W}=ai(),se=[...Ga].reverse();for(const Ie of se)Ie.isFileModification&&Ie.originalContent!==void 0?(ve=W==null?void 0:W.files)!=null&&ve.writeFile&&await W.files.writeFile(Ie.path,Ie.originalContent).catch(()=>{}):Ie.isFileModification?(Ae=W==null?void 0:W.git)!=null&&Ae.checkoutFile&&await W.git.checkoutFile(Ie.path).catch(()=>{}):Ie.undoCode&&N&&await N.executeJavaScript(Ie.undoCode).catch(()=>{});yi([]),cp(!1)},[Ga,l]),cy=w.useCallback(()=>{yi([]),cp(!1)},[]);w.useEffect(()=>{en.current=N=>{console.log("[File Modified] Event:",N.type,N.path);let W=0,se=0;if(N.type==="write"&&N.originalContent&&N.newContent){const ve=N.originalContent.split(`
`).length,Ae=N.newContent.split(`
`).length;W=Math.max(0,Ae-ve),se=Math.max(0,ve-Ae),W===0&&se===0&&(W=1,se=1)}else N.type==="create"&&N.newContent?W=N.newContent.split(`
`).length:N.type==="delete"&&N.originalContent&&(se=N.originalContent.split(`
`).length);Jo({path:N.path,additions:W,deletions:se,originalContent:N.originalContent,isFileModification:!0})}},[Jo]),w.useEffect(()=>{var W,se;return!Sn||!((se=(W=window.electronAPI)==null?void 0:W.agentSdk)!=null&&se.onFileModified)?void 0:window.electronAPI.agentSdk.onFileModified(ve=>{console.log("[Agent SDK File Modified]",ve.type,ve.path);let Ae=0,Ie=0;if(ve.type==="write"&&ve.originalContent&&ve.newContent){const He=ve.originalContent.split(`
`).length,bt=ve.newContent.split(`
`).length;Ae=Math.max(0,bt-He),Ie=Math.max(0,He-bt),Ae===0&&Ie===0&&(Ae=1,Ie=1)}else ve.type==="create"&&ve.newContent?Ae=ve.newContent.split(`
`).length:ve.type==="delete"&&ve.originalContent&&(Ie=ve.originalContent.split(`
`).length);Jo({path:ve.path,additions:Ae,deletions:Ie,originalContent:ve.originalContent,isFileModification:!0})})},[Sn,Jo]);const uy=w.useRef(new Set);w.useEffect(()=>{var W;if(!Sn||!((W=window.electronAPI)!=null&&W.fileWatcher))return;const N=window.electronAPI.fileWatcher.onChange(se=>{console.log("[FileWatcher] File changed:",se.type,se.relativePath),Jo({path:se.path,additions:se.type==="add"||se.type==="change"?1:0,deletions:se.type==="unlink"||se.type==="change"?1:0,isFileModification:!0})});return()=>{console.log("[FileWatcher] App unmounting"),N()}},[Sn]),w.useEffect(()=>{var W;const N=u.projectPath;if(!Sn||!N||!((W=window.electronAPI)!=null&&W.fileWatcher)){Ub(!1);return}if(uy.current.has(N)){console.log("[FileWatcher] Already watching:",N),Ub(!0);return}console.log("[FileWatcher] Starting watcher for:",N),window.electronAPI.fileWatcher.start(N).then(se=>{se.success&&(uy.current.add(N),Ub(!0),console.log("[FileWatcher]  Watching:",N))}).catch(se=>{console.error("[FileWatcher] Start failed:",se)})},[Sn,u.projectPath]),w.useEffect(()=>{try{const N=`cluso-context-chips-${u.projectPath||"global"}`,W=localStorage.getItem(N);if(W){const se=JSON.parse(W);Array.isArray(se)&&(Od(se),console.log("[ContextChips] Loaded",se.length,"recent chips for",N))}else Od([])}catch(N){console.warn("[ContextChips] Failed to load from localStorage:",N),Od([])}Bc([])},[u.projectPath]),w.useEffect(()=>{if(u.type!=="browser")return;const N=Jn.current.get(l);if(console.log("[Inspector Sync] Effect triggered:",{isElectron:Sn,hasWebview:!!N,isWebviewReady:eo,isInspectorActive:wt,isScreenshotActive:ye}),!Sn){console.log("[Inspector Sync] Skipping: not in Electron");return}if(!N){console.log("[Inspector Sync] Skipping: no webview ref");return}if(!eo){console.log("[Inspector Sync] Skipping: webview not ready");return}try{if(!N.isConnected){console.log("[Inspector Sync] Skipping: webview not connected to DOM");return}}catch(W){console.log("[Inspector Sync] Skipping: webview check failed",W);return}try{N.getWebContentsId()}catch{console.log("[Inspector Sync] Skipping: webview not ready to receive messages");return}console.log("[Inspector Sync] Sending inspector modes to webview:",{isInspectorActive:wt,isScreenshotActive:ye,isMoveActive:ht});try{N.send("set-inspector-mode",wt),N.send("set-screenshot-mode",ye),N.send("set-move-mode",ht),!wt&&!ht&&(nt(null),Bn(!1),N.send("clear-selection"))}catch(W){console.warn("[Inspector Sync] Failed to send to webview:",W)}},[wt,ye,ht,Sn,eo,l]),w.useEffect(()=>{const N=Jn.current.get(l)},[Sn,l]),w.useEffect(()=>{B&&Bn(!1)},[B]);const Hu=(Zo==null?void 0:Zo.content)??"";w.useEffect(()=>{var N;dn&&!Qn.current?(N=an.current)==null||N.scrollIntoView({behavior:"smooth"}):!dn&&(Ce.length>0||hh)&&Nn(!0)},[Ce,dn,Hu,hh]),w.useEffect(()=>{const N=zt.current;if(!N)return;let W;const se=()=>{Qn.current=!0,clearTimeout(W),N.scrollHeight-N.scrollTop-N.clientHeight<100?(on(!0),Nn(!1)):(on(!1),Nn(!0)),W=setTimeout(()=>{Qn.current=!1},150)};return N.addEventListener("scroll",se,{passive:!0}),()=>{N.removeEventListener("scroll",se),clearTimeout(W)}},[]);const Ca=w.useCallback(()=>{var N;on(!0),Nn(!1),(N=an.current)==null||N.scrollIntoView({behavior:"smooth"})},[]),Eo=N=>{const W=N.target.files;if(!W)return;Array.from(W).slice(0,5-Jr.length).forEach(ve=>{if(!ve.type.startsWith("image/"))return;const Ae=new FileReader;Ae.onloadend=()=>{const Ie=Ae.result;pr(He=>He.length>=5?He:[...He,Ie])},Ae.readAsDataURL(ve)})},wg=w.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.dataTransfer.types.includes("Files")&&at(!0)},[]),Kc=w.useCallback(N=>{N.preventDefault(),N.stopPropagation(),at(!1)},[]),rr=w.useCallback(N=>{N.preventDefault(),N.stopPropagation(),at(!1),Array.from(N.dataTransfer.files).filter(Ae=>Ae.type.startsWith("image/")).slice(0,5-Jr.length).forEach(Ae=>{const Ie=new FileReader;Ie.onloadend=()=>{const He=Ie.result;pr(bt=>bt.length>=5?bt:[...bt,He])},Ie.readAsDataURL(Ae)})},[Jr.length]),ps=w.useCallback(N=>{pr(W=>W.filter((se,ve)=>ve!==N))},[]),Fo=w.useCallback(N=>{const W=N.trim();if(!W.startsWith("/"))return!1;const se=W.slice(1).split(/\s+/),ve=se[0].toLowerCase(),Ae=se.slice(1).join(" ");if(ve==="new"||ve==="clear")return fe([]),De(""),fe([{id:Date.now().toString(),role:"system",content:" Conversation cleared.",timestamp:new Date}]),setTimeout(()=>fe([]),1500),!0;if(ve==="compact"){const He=`Please provide a concise summary of our conversation so far. Focus on:
1. Key topics discussed
2. Decisions made
3. Important code changes or files mentioned
4. Outstanding tasks or questions

${Ae?`Additional guidance: ${Ae||"Summarize the key points and decisions from this conversation"}`:""}

Keep the summary brief but comprehensive enough to continue the conversation effectively.`;return fe(bt=>[...bt,{id:Date.now().toString(),role:"system",content:` Compacting context${Ae?` with guidance: "${Ae}"`:""}...`,timestamp:new Date}]),setTimeout(()=>{De(He);const bt=document.querySelector("form[data-chat-form]");bt&&bt.requestSubmit()},100),!0}if(ve==="thinking"){const Ie=Ae.toLowerCase(),He=["off","low","med","high","ultrathink"];let bt="med";if(Ie==="on"||Ie==="")bt=mi==="off"?"med":"off";else if(He.includes(Ie))bt=Ie;else return fe(cn=>[...cn,{id:Date.now().toString(),role:"system",content:` Invalid thinking level: "${Ae}". Valid options: off, low, med, high, ultrathink`,timestamp:new Date}]),De(""),!0;return Ru(bt),fe(cn=>[...cn,{id:Date.now().toString(),role:"system",content:`Thinking mode: ${bt.toUpperCase()}`,timestamp:new Date}]),De(""),!0}return!1},[mi]),Zd=async N=>{var lt,_t,bn,Wn,Qr,to,es,xi,ka,uc,Ah,qu,Gu,Nh,Jd;if(Fo(N)||!N.trim()&&!de&&Jr.length===0&&!Ne)return;const W=Iit();console.log("[Turn]",W);const se={id:Date.now().toString(),role:"user",content:N,timestamp:new Date,selectedElement:de||void 0,turnId:W,sequenceNumber:0};fe(Ns=>[...Ns,se]),De("");let ve="";if(de){const Ns=de.targetPosition&&de.originalPosition;ve=`
<selected_element>
${de.outerHTML||`<${de.tagName}${de.id?` id="${de.id}"`:""}${de.className?` class="${de.className}"`:""}>${de.text||""}</${de.tagName}>`}

Element Details:
- Tag: ${de.tagName}
${de.id?`- ID: ${de.id}`:""}
${de.className?`- Classes: ${de.className}`:""}
${de.xpath?`- XPath: ${de.xpath}`:""}
${de.text?`- Text Content: "${de.text}"`:""}
${de.attributes?`- Attributes: ${JSON.stringify(de.attributes)}`:""}
${de.computedStyle?`- Computed Style: display=${de.computedStyle.display}, position=${de.computedStyle.position}, color=${de.computedStyle.color}, bg=${de.computedStyle.backgroundColor}`:""}
${de.rect?`- Current Position: ${Math.round(de.rect.width)}x${Math.round(de.rect.height)} at (${Math.round(de.rect.left)}, ${Math.round(de.rect.top)})`:""}
${Ns?`
<repositioning_request>
The user wants to MOVE this element to a new position.
- Original Position: ${Math.round(de.originalPosition.width)}x${Math.round(de.originalPosition.height)} at (${Math.round(de.originalPosition.left)}, ${Math.round(de.originalPosition.top)})
- Target Position: ${Math.round(de.targetPosition.width)}x${Math.round(de.targetPosition.height)} at (${Math.round(de.targetPosition.x)}, ${Math.round(de.targetPosition.y)})
- Width Change: ${de.targetPosition.width-de.originalPosition.width}px
- Height Change: ${de.targetPosition.height-de.originalPosition.height}px
- X Offset: ${de.targetPosition.x-de.originalPosition.left}px
- Y Offset: ${de.targetPosition.y-de.originalPosition.top}px

Please help the user achieve this repositioning by modifying the CSS/layout of the element. Consider:
1. Position property (relative, absolute, fixed, or using flexbox/grid)
2. The element's current CSS and its impact on layout
3. Whether the element needs to be extracted from the normal flow
4. Responsive considerations
</repositioning_request>`:""}
</selected_element>`}let Ae="";gt.length>0&&(Ae=`

Attached Files:
${gt.map(Ns=>`
File: ${Ns.path}
\`\`\`
${Ns.content}
\`\`\`
`).join(`
`)}`);const Ie=u==null?void 0:u.projectPath,He=Ie?Ie.split("/").pop():null;let bt=`
Current Page: ${J}
${Te?`Page Title: ${Te}`:""}
${Ie?`Project Folder: ${Ie}`:""}
${He?`Project Name: ${He}`:""}

User Request: ${se.content}
${ve}
${Ae}
${Ne?`Context: User selected element for visual reference: <${Ne.tagName}>`:""}

${Ie?`IMPORTANT: The source files for this page are in ${Ie}. Use the Read and Glob tools to explore the project structure and find relevant source files before making changes.`:""}
    `;if(Vs&&Pr.length>0&&(bt+=`

Recent Console Logs:
${Pr.join(`
`)}`),$o&&$o.length>0){const Ns=$o.map(_o=>`[${_o.timestamp.toLocaleTimeString()}] [${_o.type}] ${_o.message}`).join(`
`);bt+=`

Selected Console Logs (${$o.length} entries):
${Ns}`}if(Al&&Al.length>0){const Ns=Al.map((_o,wi)=>`${wi+1}. ${_o.title}
   URL: ${_o.url}
   ${_o.snippet}`).join(`

`);bt+=`

Web Search Results (${Al.length} results for context):
${Ns}`}de||/\b(change|modify|update|edit|delete|remove|add|make|set|fix|replace|style|color|size|font|width|height|margin|padding|border)\b/i.test(se.content)?bt+=`
Instructions:
You are an AI UI assistant that can modify web pages. The user has selected an element to focus on.

CRITICAL WORKFLOW FOR SOURCE CODE CHANGES:
1. FIRST: Use the Read tool to read the ENTIRE source file (the component/page containing this element)
2. UNDERSTAND the full context - how this element fits in the page structure, what styles affect it, what props/data it uses
3. THEN make your changes, considering how they impact the whole page
4. The selected element is just the FOCUS AREA - you need the full file context to make good edits

For QUICK DOM PREVIEWS (temporary, not saved):
- Output: \`\`\`json-exec {"code": "...", "undo": "..."}\`\`\`
- The "code" executes immediately, "undo" restores original
- Use for quick style/text changes before committing to source

For SOURCE CODE EDITS (permanent):
1. READ the full source file first using the Read tool
2. Understand the component structure and how the element is rendered
3. Use the Edit tool to modify the source, preserving the overall structure
4. NEVER guess at the source code - always read it first

Selected Element Context:
- XPath: ${(de==null?void 0:de.xpath)||"N/A"}
- ID: ${(de==null?void 0:de.id)||"N/A"}
- Classes: ${(de==null?void 0:de.className)||"N/A"}

IMPORTANT: The selected element HTML above is just a snippet. For source edits, you MUST read the full file to understand the complete context. Don't assume the structure - READ IT.

Be concise. Confirm what you changed.
      `:bt+=`
Instructions:
You are a helpful AI assistant. Answer the user's question conversationally.
DO NOT modify the page or execute any code unless the user explicitly asks you to change something.
If you're not sure what the user wants, ask for clarification.
      `;const En=[{type:"text",text:bt}];Jr.forEach((Ns,_o)=>{Jr.length>1&&En.push({type:"text",text:`
[Image ${_o+1} of ${Jr.length}]:`});const wi=Ns.split(",")[1],Xd=Ns.split(";")[0].split(":")[1]||"image/png";En.push({type:"image",image:{base64Data:wi,mimeType:Xd}})}),yo(!1),pr([]),$e(null),Le(null),_e(!1),Pd(null),rt.current&&(rt.current.value="");try{const Ns=Aot(Ht.id);let _o=null;const{intent:wi,systemPrompt:Xd,tools:Cp,promptMode:Qd}=ng(se.content);console.log(`[Coding Agent] Intent: ${wi.type} (${Math.round(wi.confidence*100)}%) | Mode: ${Qd}`);const Ja=Mo.providers.find(jn=>jn.id==="google"&&jn.enabled&&jn.apiKey),kp=Jr.length>0,Mt=/(?:add|insert|put|use|replace|change|swap|set|place|show|save|upload).*(?:image|photo|picture|attached|this|screenshot)|(?:this|the|attached)\s*(?:image|photo|picture|screenshot)|(?:image|photo|picture|screenshot)\s*(?:here|to|in|on|as)/i.test(se.content);if(kp&&Mt){const jn=u==null?void 0:u.projectPath;if(!jn){const Vr={id:`msg-error-${Date.now()}`,role:"assistant",content:"Cannot save image: No project folder is set. Please open a project first.",timestamp:new Date,model:"system"};fe(jr=>[...jr,Vr]),pr([]);return}try{const Vr=nn=>{let ln=0;for(let ur=0;ur<Math.min(nn.length,1e4);ur++){const dr=nn.charCodeAt(ur);ln=(ln<<5)-ln+dr,ln=ln&ln}return Math.abs(ln).toString(16).padStart(8,"0")},jr=Jr[0],qn=Vr(jr),vs=jr.match(/^data:image\/(\w+);/),Is=vs?vs[1].replace("jpeg","jpg"):"png",sr=`img-${qn}.${Is}`,Wr=`${`${jn}/public/uploads`}/${sr}`,no=`/uploads/${sr}`;console.log("[Image Save] Saving to:",Wr);const Jt=await((lt=window.electronAPI)==null?void 0:lt.files.saveImage(jr,Wr));if(!(Jt!=null&&Jt.success))throw new Error((Jt==null?void 0:Jt.error)||"Failed to save image");if(console.log("[Image Save] Image saved successfully"),de){const nn=Jn.current.get(l);if(nn){const ln=((_t=de.tagName)==null?void 0:_t.toLowerCase())||"",ur=ln==="img",dr=["div","section","article","aside","header","footer","main","figure","span","p"].includes(ln);let Vn,Hn,Xn;if(ur){const tr=await nn.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    return el ? el.src : '';
                  })();
                `);Vn=`
                  (function() {
                    const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el && el.tagName === 'IMG') { el.src = '${no}'; return 'Applied'; }
                    return 'Not found';
                  })();
                `,Hn=`
                  (function() {
                    const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el && el.tagName === 'IMG') { el.src = '${tr}'; return 'Reverted'; }
                    return 'Not found';
                  })();
                `,Xn=`Set image src to ${sr}`,await nn.executeJavaScript(Vn);const Gs=`dom-img-${Date.now()}`,Rs={id:Gs,element:de,cssChanges:{},srcChange:{oldSrc:tr||"",newSrc:no},description:Xn,undoCode:Hn,applyCode:Vn,userRequest:se.content||"Insert image",patchStatus:"preparing"};Oo(Rs),Wi(Gs,de,{},Xn,Hn,Vn,se.content||"Insert image",jn,void 0,{oldSrc:tr||"",newSrc:no})}else if(dr){const tr=await nn.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (!el) return null;
                    const img = el.querySelector('img');
                    if (img) return { hasChildImg: true, childSrc: img.src };
                    return { hasChildImg: false, currentBg: el.style.backgroundImage };
                  })();
                `);if(tr!=null&&tr.hasChildImg)Vn=`
                    (function() {
                      const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) { const img = el.querySelector('img'); if (img) { img.src = '${no}'; return 'Applied'; } }
                      return 'Not found';
                    })();
                  `,Hn=`
                    (function() {
                      const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) { const img = el.querySelector('img'); if (img) { img.src = '${tr.childSrc}'; return 'Reverted'; } }
                      return 'Not found';
                    })();
                  `,Xn=`Set child image src to ${sr}`;else{const ni=await nn.executeJavaScript(`
                    (function() {
                      const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      return el ? { text: el.textContent, bg: el.style.backgroundImage, bgSize: el.style.backgroundSize, bgPos: el.style.backgroundPosition } : null;
                    })();
                  `);Vn=`
                    (function() {
                      const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) {
                        el.textContent = '';
                        el.style.backgroundImage = 'url(${no})';
                        el.style.backgroundSize = 'cover';
                        el.style.backgroundPosition = 'center';
                        return 'Applied as background';
                      }
                      return 'Not found';
                    })();
                  `,Hn=`
                    (function() {
                      const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) {
                        el.textContent = ${JSON.stringify((ni==null?void 0:ni.text)||"")};
                        el.style.backgroundImage = '${(ni==null?void 0:ni.bg)||""}';
                        el.style.backgroundSize = '${(ni==null?void 0:ni.bgSize)||""}';
                        el.style.backgroundPosition = '${(ni==null?void 0:ni.bgPos)||""}';
                        return 'Reverted';
                      }
                      return 'Not found';
                    })();
                  `,Xn=`Set background image to ${sr}`}await nn.executeJavaScript(Vn);const Gs=`dom-img-${Date.now()}`,Rs={id:Gs,element:de,cssChanges:tr!=null&&tr.hasChildImg?{}:{backgroundImage:`url(${no})`,backgroundSize:"cover",backgroundPosition:"center"},srcChange:tr!=null&&tr.hasChildImg?{oldSrc:tr.childSrc||"",newSrc:no}:void 0,description:Xn,undoCode:Hn,applyCode:Vn,userRequest:se.content||"Insert image",patchStatus:"preparing"};Oo(Rs),Wi(Gs,de,tr!=null&&tr.hasChildImg?{}:{backgroundImage:`url(${no})`,backgroundSize:"cover",backgroundPosition:"center"},Xn,Hn,Vn,se.content||"Insert image",jn)}else Vn=`
                  (function() {
                    const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) { el.src = '${no}'; return 'Applied'; }
                    return 'Not found';
                  })();
                `,Hn="location.reload()",Xn=`Set ${ln} src to ${sr}`,await nn.executeJavaScript(Vn);const vr={id:`msg-img-${Date.now()}`,role:"assistant",content:` ${Xn}`,timestamp:new Date,model:"system",intent:"ui_modify"};fe(tr=>[...tr,vr]),qa({code:Vn,undoCode:Hn,description:Xn,additions:1,deletions:1,source:"dom"}),pr([]);return}}const pn={id:`msg-img-${Date.now()}`,role:"assistant",content:` Image saved to \`${no}\`

To insert this image into an element, select an element first and then attach the image.`,timestamp:new Date,model:"system"};fe(nn=>[...nn,pn]),pr([]);return}catch(Vr){console.error("[Image Save] Error:",Vr);const jr={id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to save image: ${Vr instanceof Error?Vr.message:"Unknown error"}`,timestamp:new Date,model:"system"};fe(qn=>[...qn,jr]),pr([]);return}}if(console.log("[Instant UI] Check conditions:",{intentType:wi.type,hasSelectedElement:!!de,hasGoogleProvider:!!(Ja!=null&&Ja.apiKey),hasSourceLocation:!!((Wn=(bn=de==null?void 0:de.sourceLocation)==null?void 0:bn.sources)!=null&&Wn[0])}),wi.type==="ui_modify"&&!de){console.log("[Instant UI] ui_modify detected but no element selected");const jn={id:`msg-nosel-${Date.now()}`,role:"assistant",content:`To modify the UI, first select an element using the inspector (crosshair icon) or say "highlight the buttons" to see what's available.`,timestamp:new Date,model:"system",intent:"ui_modify"};fe(Vr=>[...Vr,jn]);return}if(wi.type==="ui_modify"&&de&&(Ja!=null&&Ja.apiKey)){console.log("[Instant UI] Triggering instant UI update with source patch..."),console.log("[Instant UI] Selected element:",{tagName:de.tagName,xpath:de.xpath,sourceLocation:de.sourceLocation}),Nl(!0),Fd("streaming"),sc([]),xo({id:`instant-ui-${Date.now()}`,content:` Analyzing \`<${de.tagName.toLowerCase()}>\` element...`,reasoning:"",toolCalls:[]});const jn=Jr.length>0,Vr=/(?:add|insert|put|use|replace|change|swap|set|place|show).*(?:image|photo|picture|attached|this)|(?:this|the|attached)\s*(?:image|photo|picture)|image\s*(?:here|to|in|on)/i.test(se.content);if(jn&&(Vr||se.content.trim()==="")){const Jt=((Qr=de.tagName)==null?void 0:Qr.toLowerCase())||"";console.log("[Image Insert] Detected image insertion request for:",Jt);const pn=u==null?void 0:u.projectPath;if(!pn){const nn={id:`msg-error-${Date.now()}`,role:"assistant",content:"Cannot insert image: No project folder is set. Please open a project first.",timestamp:new Date,model:"system"};fe(ln=>[...ln,nn]),pr([]);return}try{const nn=Ys=>{let Ms=0;for(let dc=0;dc<Math.min(Ys.length,1e4);dc++){const Cg=Ys.charCodeAt(dc);Ms=(Ms<<5)-Ms+Cg,Ms=Ms&Ms}return Math.abs(Ms).toString(16).padStart(8,"0")},ln=Jr[0],ur=nn(ln),dr=ln.match(/^data:image\/(\w+);/),Vn=dr?dr[1].replace("jpeg","jpg"):"png",Hn=`img-${ur}.${Vn}`,vr=`${`${pn}/public/uploads`}/${Hn}`,tr=`/uploads/${Hn}`;console.log("[Image Insert] Saving to:",vr);const Gs=await((to=window.electronAPI)==null?void 0:to.files.saveImage(ln,vr));if(!(Gs!=null&&Gs.success))throw new Error((Gs==null?void 0:Gs.error)||"Failed to save image");console.log("[Image Insert] Image saved successfully");const Rs=Jn.current.get(l);if(!Rs)throw new Error("Webview not available");const ni=Jt==="img",Ap=["div","section","article","aside","header","footer","main","figure","span","p"].includes(Jt);let To,Aa,ms;if(ni){const Ys=await Rs.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  return el ? el.src : '';
                })();
              `);if(To=`
                (function() {
                  const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${tr}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Aa=`
                (function() {
                  const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${Ys}';
                    return 'Reverted';
                  }
                  return 'Element not found';
                })();
              `,ms=`Set image src to ${Hn}`,await Rs.executeJavaScript(To),(xi=(es=de.sourceLocation)==null?void 0:es.sources)!=null&&xi[0]){const Ms=`dom-img-${Date.now()}`,dc={id:Ms,element:de,cssChanges:{},srcChange:{oldSrc:Ys||"",newSrc:tr},description:ms,undoCode:Aa,applyCode:To,userRequest:se.content||"Insert image",patchStatus:"preparing"};Oo(dc),Wi(Ms,de,{},ms,Aa,To,se.content||"Insert image",pn,void 0,{oldSrc:Ys||"",newSrc:tr})}}else if(Ap){const Ys=await Rs.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (!el) return null;
                  const img = el.querySelector('img');
                  if (img) {
                    return { hasChildImg: true, childSrc: img.src };
                  }
                  return { hasChildImg: false, currentBg: el.style.backgroundImage };
                })();
              `);if(Ys!=null&&Ys.hasChildImg)To=`
                  (function() {
                    const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${tr}';
                        return 'Applied to child img';
                      }
                    }
                    return 'Element not found';
                  })();
                `,Aa=`
                  (function() {
                    const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${Ys.childSrc}';
                        return 'Reverted';
                      }
                    }
                    return 'Element not found';
                  })();
                `,ms=`Set child image src to ${Hn}`;else{const Ms=await Rs.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    return el ? { text: el.textContent, bg: el.style.backgroundImage, bgSize: el.style.backgroundSize, bgPos: el.style.backgroundPosition } : null;
                  })();
                `);if(To=`
                  (function() {
                    const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = 'url(${tr})';
                      el.style.backgroundSize = 'cover';
                      el.style.backgroundPosition = 'center';
                      el.textContent = '';
                      return 'Applied background-image';
                    }
                    return 'Element not found';
                  })();
                `,Aa=`
                  (function() {
                    const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = '${(Ms==null?void 0:Ms.bg)||""}';
                      el.style.backgroundSize = '${(Ms==null?void 0:Ms.bgSize)||""}';
                      el.style.backgroundPosition = '${(Ms==null?void 0:Ms.bgPos)||""}';
                      el.textContent = '${((Ms==null?void 0:Ms.text)||"").replace(/'/g,"\\'")}';
                      return 'Reverted';
                    }
                    return 'Element not found';
                  })();
                `,ms=`Set background-image to ${Hn}`,(uc=(ka=de.sourceLocation)==null?void 0:ka.sources)!=null&&uc[0]){const dc=`dom-img-${Date.now()}`,Cg={id:dc,element:de,cssChanges:{backgroundImage:`url(${tr})`,backgroundSize:"cover",backgroundPosition:"center"},description:ms,undoCode:Aa,applyCode:To,userRequest:se.content||"Insert image",patchStatus:"preparing"};Oo(Cg),Wi(dc,de,{backgroundImage:`url(${tr})`,backgroundSize:"cover",backgroundPosition:"center"},ms,Aa,To,se.content||"Insert image",pn)}}await Rs.executeJavaScript(To)}else To=`
                (function() {
                  const el = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el) {
                    el.src = '${tr}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Aa="location.reload()",ms=`Set ${Jt} src to ${Hn}`,await Rs.executeJavaScript(To);const Ws={id:`msg-img-${Date.now()}`,role:"assistant",content:`Preview: ${ms}`,timestamp:new Date,model:Ht.id,intent:"ui_modify"};fe(Ys=>[...Ys,Ws]),qa({code:To,undoCode:Aa,description:ms,additions:1,deletions:1,source:"dom"}),pr([]);return}catch(nn){console.error("[Image Insert] Error:",nn);const ln={id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to insert image: ${nn instanceof Error?nn.message:"Unknown error"}`,timestamp:new Date,model:"system"};fe(ur=>[...ur,ln]),pr([]);return}}if(de.sourceLocation){if(console.log("[Instant UI] sourceLocation.sources:",de.sourceLocation.sources),console.log("[Instant UI] sourceLocation.summary:",de.sourceLocation.summary),(Ah=de.sourceLocation.sources)!=null&&Ah[0]){const Jt=de.sourceLocation.sources[0];console.log("[Instant UI] Source file:",Jt.file,"line:",Jt.line,"name:",Jt.name)}}else console.log("[Instant UI] NO sourceLocation on selectedElement!");const jr="gemini-2.5-flash-lite";xo(Jt=>Jt?{...Jt,content:` Analyzing \`<${de.tagName.toLowerCase()}>\` element...

 Generating CSS changes with Gemini Flash Lite...`}:null);const qn=await Gft(de,se.content,Ja.apiKey,jr),vs=Object.keys(qn.cssChanges).length>0,Is=!!qn.textChange,sr=vs||Is;if(console.log("[Instant UI] Result:",{hasCssChanges:vs,hasTextChange:Is,textChange:qn.textChange,cssChanges:qn.cssChanges}),sr){const Jt=[...Object.entries(qn.cssChanges).map(([pn,nn])=>`   \`${pn}\`: \`${nn}\``),...Is?[`   text: "${qn.textChange}"`]:[]].join(`
`);xo(pn=>pn?{...pn,content:` Analyzing \`<${de.tagName.toLowerCase()}>\` element...

 Generated changes:
${Jt}

 Applying to preview...`}:null)}const So=Jn.current.get(l);let Wr="",no="";if(qn.success&&sr&&So){const Jt=`
            (function() {
              const element = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
              if (element) {
                const original = {
                  textContent: element.textContent || '',
                  styles: {}
                };
                ${vs?Object.keys(qn.cssChanges).map(pn=>`original.styles['${pn}'] = element.style.${pn} || '';`).join(`
`):""}
                return JSON.stringify(original);
              }
              return null;
            })();
          `;try{const pn=await So.executeJavaScript(Jt),nn=pn?JSON.parse(pn):{textContent:"",styles:{}};console.log("[Instant UI] Original captured:",nn);let ln="";Is&&(ln+=`element.textContent = ${JSON.stringify(nn.textContent)};
`),vs&&(ln+=Object.entries(nn.styles).map(([vr,tr])=>`element.style.${vr} = '${tr}';`).join(`
`)),Wr=`
              (function() {
                const element = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                if (element) {
                  ${ln}
                  return 'Reverted';
                }
                return 'Element not found';
              })();
            `;let ur="";Is&&(ur+=`element.textContent = ${JSON.stringify(qn.textChange)};
`),vs&&(ur+=Object.entries(qn.cssChanges).map(([vr,tr])=>`element.style.${vr} = '${tr}';`).join(`
`)),no=`
              (function() {
                const element = document.evaluate('${de.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                if (element) {
                  ${ur}
                  return 'Applied';
                }
                return 'Element not found';
              })();
            `;const dr=await So.executeJavaScript(no);console.log("[Instant UI] DOM update result:",dr);const Vn={id:`msg-ui-${Date.now()}`,role:"assistant",content:`Preview: ${qn.description}`,timestamp:new Date,model:Ht.id,intent:"ui_modify"};fe(vr=>[...vr,Vn]);const Hn=Object.keys(qn.cssChanges).length,Xn=Is?1:0;if(qa({code:no,undoCode:Wr,description:qn.description,additions:Hn+Xn,deletions:Hn+Xn,source:"dom"}),(Gu=(qu=de.sourceLocation)==null?void 0:qu.sources)!=null&&Gu[0]){const vr=`dom-${Date.now()}`,tr={id:vr,element:de,cssChanges:qn.cssChanges,textChange:qn.textChange,description:qn.description,undoCode:Wr,applyCode:no,userRequest:se.content,patchStatus:"preparing"};console.log("[Instant UI] Pending DOM approval created:",vr),xo(Rs=>Rs?{...Rs,content:` Preview applied!

${qn.description}

 Preparing source code patch...`}:null),Oo(tr);const Gs=Is?{oldText:nn.textContent,newText:qn.textChange}:void 0;Wi(vr,de,qn.cssChanges,qn.description,Wr,no,se.content,u==null?void 0:u.projectPath,Gs)}Nl(!1),xo(null);return}catch(pn){console.error("[Instant UI] Failed to apply DOM changes:",pn),Nl(!1),xo(null);const nn={id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to apply preview: ${pn instanceof Error?pn.message:"Unknown error"}`,timestamp:new Date,model:Ht.id,intent:"ui_modify"};fe(ln=>[...ln,nn]);return}}else if(!sr){Nl(!1),xo(null);const Jt={id:`msg-nochange-${Date.now()}`,role:"assistant",content:`No changes to apply for: "${se.content}"`,timestamp:new Date,model:Ht.id,intent:"ui_modify"};fe(pn=>[...pn,Jt]);return}}const er=Qd!=="dom_edit";if(console.log(`[AI SDK] Mode: ${Qd} | MCP tools: ${tg.length} | Tools enabled: ${er}`),Ns&&(Zm.length>0||Ns==="claude-code"||Ns==="codex"||Ns==="google")){console.log(`[AI SDK] Using provider: ${Ns} for model: ${Ht.id}`),console.log(`[AI SDK] Using tools: ${er}`);const jn=Iot(Ce.filter(Jt=>Jt.role!=="system").slice(-10)),Vr={role:"user",content:En},jr=[...jn,Vr];rg(!0),Nl(!0),Fd("streaming"),sc([]);const qn=`streaming-${Date.now()}`;xo({id:qn,content:"",reasoning:"",toolCalls:[]});const vs=[];console.log("[AI SDK] Starting stream...");let Is="";console.log("[AI SDK] Streaming with project folder:",(u==null?void 0:u.projectPath)||"(none)");const sr=await Qm({modelId:Ht.id,messages:jr,providers:Zm,system:er?Xd:void 0,tools:er?Cp:void 0,maxSteps:15,enableReasoning:mi!=="off",mcpTools:tg,projectFolder:(u==null?void 0:u.projectPath)||void 0,onChunk:Jt=>{const pn=typeof Jt=="string"?Jt:String(Jt??"");Is+=pn,xo(nn=>nn?{...nn,content:Is}:null)},onStepFinish:Jt=>{var nn,ln,ur,dr,Vn,Hn;if(console.log("[AI SDK] Step finished:",{textLength:(nn=Jt==null?void 0:Jt.text)==null?void 0:nn.length,toolCalls:(ln=Jt==null?void 0:Jt.toolCalls)==null?void 0:ln.length,toolResults:(ur=Jt==null?void 0:Jt.toolResults)==null?void 0:ur.length}),Jt!=null&&Jt.toolCalls&&Jt.toolCalls.length>0)for(const Xn of Jt.toolCalls){const vr=Xn.toolCallId||`tool-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,tr=((dr=Xn.toolName)==null?void 0:dr.replace(/^mcp_[^_]+_/,""))||"tool";vs.find(Rs=>Rs.id===vr)||vs.push({id:vr,name:tr,args:Xn.args||{},status:"running"})}if(Jt!=null&&Jt.toolResults&&Jt.toolResults.length>0)for(const Xn of Jt.toolResults){const vr=Xn.toolCallId,tr=((Vn=Xn.toolName)==null?void 0:Vn.replace(/^mcp_[^_]+_/,""))||"tool",Gs=vr?vs.find(Rs=>Rs.id===vr):vs.find(Rs=>Rs.name===tr&&Rs.status==="running");Gs&&(Gs.status=(Hn=Xn.result)!=null&&Hn.error?"error":"done",Gs.result=Xn.result)}const pn=vs.map(Xn=>`${Xn.status==="running"?"":Xn.status==="error"?"":""} ${Xn.name}`).join("  ");pn&&xo(Xn=>Xn?{...Xn,content:Is||`Working: ${pn}`,toolCalls:vs.map(vr=>({id:vr.id,name:vr.name,args:vr.args,status:vr.status==="done"?"complete":vr.status,result:vr.result}))}:null)},onReasoningChunk:Jt=>{const pn=typeof Jt=="string"?Jt:(Jt==null?void 0:Jt.content)??String(Jt??"");console.log("[AI SDK] Reasoning chunk:",pn.substring(0,100)),xo(nn=>nn?{...nn,reasoning:(nn.reasoning||"")+pn}:null)}});if(console.log("[AI SDK] Stream complete, clearing streaming state"),Nl(!1),rg(!1),Fd("idle"),Zo!=null&&Zo.toolCalls&&Zo.toolCalls.length>0){const Jt=Zo.toolCalls.map(pn=>({id:pn.id,name:pn.name,status:pn.status==="error"?"error":"success",timestamp:new Date}));sc(Jt)}xo(null);let So=(sr.text||Is||"").trim();if(!So&&sr.toolResults&&sr.toolResults.length>0&&(So=sr.toolResults.map(pn=>{var dr;const nn=((dr=pn.toolName)==null?void 0:dr.replace(/^mcp_[^_]+_/,""))||"tool",ln=pn.result;if(ln!=null&&ln.error)return` ${nn}: ${ln.error}`;if(ln!=null&&ln.content&&typeof ln.content=="string"){const Vn=ln.content.length>200?ln.content.substring(0,200)+"...":ln.content;return` ${nn}: ${ln.path||"file"}
\`\`\`
${Vn}
\`\`\``}if(ln!=null&&ln.tree&&Array.isArray(ln.tree)){const Vn=Hn=>{let Xn=Hn.length;for(const vr of Hn)vr!=null&&vr.children&&(Xn+=Vn(vr.children));return Xn};return` ${nn}: Found ${Vn(ln.tree)} items`}if(ln!=null&&ln.entries&&Array.isArray(ln.entries)){const Vn=ln.entries,Hn=Vn.slice(0,5).map(Xn=>Xn.isDirectory?` ${Xn.name}`:` ${Xn.name}`).join(", ");return` ${nn}: ${Vn.length} items (${Hn}${Vn.length>5?"...":""})`}if(ln!=null&&ln.matches&&Array.isArray(ln.matches))return` ${nn}: Found ${ln.matches.length} matches`;if(ln!=null&&ln.success)return` ${nn}: Success`;const ur=JSON.stringify(ln,null,2);return` ${nn}: ${ur.length>200?ur.substring(0,200)+"...":ur}`}).join(`

`)||"Tasks completed."),So||(vs.length>0?So=`Done.

${vs.map(pn=>` ${pn.name}${pn.status==="error"?" (error)":""}`).join(`
`)}`:So="No response generated."),_o=So,sr.reasoning){const Jt=typeof sr.reasoning=="string"?sr.reasoning:String(sr.reasoning);console.log("[AI SDK] Reasoning received:",Jt.substring(0,200))}const Wr=[];if(sr.toolCalls&&sr.toolCalls.length>0){console.log("[AI SDK] Tool calls:",sr.toolCalls);for(let Jt=0;Jt<sr.toolCalls.length;Jt++){const pn=sr.toolCalls[Jt],nn=(Nh=sr.toolResults)==null?void 0:Nh[Jt];Wr.push({id:pn.toolCallId,name:pn.toolName,args:pn.args,result:nn==null?void 0:nn.result,isError:nn?((Jd=nn.result)==null?void 0:Jd.error)!==void 0:!1})}}window.__pendingToolUsage=Wr.length>0?Wr:void 0,window.__pendingIntent=wi.type!=="unknown"?wi.type:void 0,console.log("[AI SDK] Result reasoning:",{hasReasoning:!!sr.reasoning,type:typeof sr.reasoning,length:typeof sr.reasoning=="string"?sr.reasoning.length:"N/A"});const no=sr.reasoning&&typeof sr.reasoning=="string"?sr.reasoning:void 0;window.__pendingReasoning=no,console.log("[AI SDK] Stored pending reasoning:",no?`${no.substring(0,100)}...`:"none")}else{console.log("[AI SDK] Falling back to GoogleGenAI with streaming");const jn="AIzaSyAuAGR2YNrczzJKRcqVr924j71lRqc02IU",Vr=new fR({apiKey:jn}),jr=[{role:"user",parts:En.map(Is=>Is.type==="text"?{text:Is.text}:{inlineData:{data:Is.image.base64Data,mimeType:Is.image.mimeType||"image/png"}})}];Nl(!0),Fd("streaming"),sc([]),xo({id:`streaming-fallback-${Date.now()}`,content:"",reasoning:"",toolCalls:[]});const qn=await Vr.models.generateContentStream({model:Ht.id,contents:jr});let vs="";for await(const Is of qn){const sr=Is.text||"";vs+=sr,xo(So=>So?{...So,content:So.content+sr}:null)}Nl(!1),xo(null),_o=vs}if(_o){const jn=/```json-exec\s*(\{[\s\S]*?\})\s*```/g;let Vr;const jr=[];for(;(Vr=jn.exec(_o))!==null;)try{const Wr=JSON.parse(Vr[1]);Wr.code&&jr.push({code:Wr.code,undo:Wr.undo})}catch(Wr){console.error("[Exec] Failed to parse:",Wr)}const qn=_o.replace(/```json-exec\s*\{[\s\S]*?\}\s*```/g,"").trim(),vs=window.__pendingToolUsage,Is=window.__pendingIntent,sr=window.__pendingReasoning;delete window.__pendingToolUsage,delete window.__pendingIntent,delete window.__pendingReasoning,fe(Wr=>[...Wr,{id:(Date.now()+1).toString(),role:"assistant",content:qn||"Changes applied.",timestamp:new Date,model:Ht.name,intent:Is,toolUsage:vs,reasoning:sr,turnId:W,parentTurnId:se.id,sequenceNumber:1}]);const So=Jn.current.get(l);if(jr.length>0&&So&&eo){const Wr=jr.map(nn=>nn.code).join(`;
`),no=jr.map(nn=>nn.undo||"").filter(Boolean).join(`;
`);console.log("[Exec] Executing immediately:",Wr),So.executeJavaScript(Wr).then(()=>console.log("[Exec] Applied")).catch(nn=>console.error("[Exec] Error:",nn));const Jt=jr.length,pn=jr.filter(nn=>nn.undo).length;qa({code:Wr,undoCode:no||"",description:qn||"Change applied",additions:Jt,deletions:pn,source:"code"})}}}catch(Ns){console.error("[AI] Error:",Ns);const _o=Ns instanceof Error?Ns.message:"Unknown error occurred";fe(wi=>[...wi,{id:Date.now().toString(),role:"assistant",content:`Sorry, I encountered an error: ${_o}`,timestamp:new Date,model:Ht.name}])}finally{Nl(!1),xo(null),rg(!1)}},Th=()=>{const N=Jn.current.get(l);if(!de||!de.rect||!N)return{display:"none"};const W=N.getBoundingClientRect(),se=48,ve=376,Ae=150,Ie=8,He=de.rect,bt=W.top+He.top,cn=bt+He.height,Et=W.left+He.left,En=Et+He.width;let lt,_t;En+Ie+ve<window.innerWidth-10?_t=En+Ie:Et-Ie-se>10?_t=Et-se-Ie:_t=Math.max(10,Et);const bn=window.innerHeight-cn-Ie,Wn=bt-Ie;return bn>=Ae+20?lt=cn+Ie:Wn>=Ae+20?lt=bt-Ae-Ie:lt=Math.max(10,Math.min(bt,window.innerHeight-Ae-10)),_t=Math.max(10,Math.min(_t,window.innerWidth-se-10)),lt=Math.max(10,Math.min(lt,window.innerHeight-se-10)),{top:`${lt}px`,left:`${_t}px`}},[Vu,Eg]=w.useState("");w.useEffect(()=>{var N;Sn&&((N=window.electronAPI)!=null&&N.getWebviewPreloadPath)&&window.electronAPI.getWebviewPreloadPath().then(W=>{console.log("Webview preload path:",W),Eg(W)})},[Sn]);const Ep=w.useCallback(async()=>{var Ie,He,bt,cn,Et;if(!((He=(Ie=de==null?void 0:de.sourceLocation)==null?void 0:Ie.sources)!=null&&He[0]))return;const N=de.sourceLocation.sources[0];let W=N.file;const se=N.line||1,ve=N.endLine||se+10;if(!W||!Sn||!((cn=(bt=window.electronAPI)==null?void 0:bt.files)!=null&&cn.readFile)){console.log("Cannot read file:",{filePath:W,isElectron:Sn,hasFiles:!!((Et=window.electronAPI)!=null&&Et.files)});return}if(!(W.startsWith("/")&&(W.startsWith("/Users/")||W.startsWith("/home/")||W.startsWith("/var/")||W.startsWith("/tmp/")))&&u.projectPath){const En=W.replace(/^\.\//,"").replace(/^\//,"");W=`${u.projectPath}/${En}`,console.log("Resolved relative path:",W)}try{const En=await window.electronAPI.files.readFile(W);if(En.success&&En.data){const lt=En.data.split(`
`),_t=3,bn=7,Wn=Math.max(1,se-_t),Qr=Math.min(lt.length,ve+bn),to=lt.slice(Wn-1,Qr);Ol({code:to.join(`
`),fileName:W.split("/").pop()||"unknown",startLine:Wn,endLine:Qr})}}catch(En){console.error("Failed to read source file:",En)}},[de,Sn,u.projectPath]),Wi=w.useCallback((N,W,se,ve,Ae,Ie,He,bt,cn,Et)=>{var lt,_t,bn,Wn,Qr,to;console.log("=".repeat(60)),console.log("[DOM Approval] === PREPARING SOURCE PATCH ==="),console.log("[DOM Approval] Inputs:",{approvalId:N,elementTag:W.tagName,cssChanges:Object.keys(se).length>0?se:"none",projectPath:bt||"NOT SET",hasSourceLocation:!!W.sourceLocation,sourceFile:((bn=(_t=(lt=W.sourceLocation)==null?void 0:lt.sources)==null?void 0:_t[0])==null?void 0:bn.file)||"NONE",sourceLine:((to=(Qr=(Wn=W.sourceLocation)==null?void 0:Wn.sources)==null?void 0:Qr[0])==null?void 0:to.line)||"NONE",userRequest:He==null?void 0:He.substring(0,50),hasSrcChange:!!Et}),console.log("=".repeat(60));const En={modelId:Jm.current.id,providers:rE.current};Dft({element:W,cssChanges:se,providerConfig:En,projectPath:bt||void 0,userRequest:He,textChange:cn,srcChange:Et}).then(es=>{console.log("[DOM Approval] Patch generation completed:",{approvalId:N,success:!!es}),Oo(xi=>{if(!xi||xi.id!==N)return xi;if(es){const ka={id:`patch-${Date.now()}`,filePath:es.filePath,originalContent:es.originalContent,patchedContent:es.patchedContent,description:ve,elementSelector:W.xpath||void 0,cssChanges:se,undoCode:Ae,applyCode:Ie,generatedBy:es.generatedBy,durationMs:es.durationMs};return console.log("[DOM Approval] Patch ready:",{approvalId:N,filePath:es.filePath,generatedBy:es.generatedBy}),{...xi,patchStatus:"ready",patch:ka,patchError:void 0}}return console.warn("[DOM Approval] Patch generation returned null:",N),{...xi,patchStatus:"error",patch:void 0,patchError:"Could not generate source patch."}})}).catch(es=>{const xi=es instanceof Error?es.message:"Failed to generate source patch";console.error("[DOM Approval] Patch generation failed:",{approvalId:N,error:xi}),Oo(ka=>!ka||ka.id!==N?ka:{...ka,patchStatus:"error",patch:void 0,patchError:xi})})},[]),Ch=w.useCallback(async()=>{var W,se,ve,Ae,Ie,He,bt,cn,Et,En,lt;if(!zn)return;if(console.log("[DOM Approval] Accept clicked:",{id:zn.id,status:zn.patchStatus,hasPatch:!!zn.patch,userApproved:zn.userApproved}),zn.patchStatus==="preparing"){console.log("[DOM Approval] Patch still preparing, marking as user-approved for auto-apply"),Oo(_t=>_t?{..._t,userApproved:!0}:null);return}if(zn.patchStatus==="error"||!zn.patch){fe(_t=>[..._t,{id:`msg-error-${Date.now()}`,role:"assistant",content:zn.patchError||"Could not prepare a source patch for this change.",timestamp:new Date}]),Oo(null),qa(null);return}const N=zn.patch;iE(!0),console.log("=".repeat(60)),console.log("[DOM Approval] === USER APPROVED PATCH ==="),console.log("[DOM Approval] Patch details:",{id:N.id,filePath:N.filePath,originalLength:((W=N.originalContent)==null?void 0:W.length)||0,patchedLength:((se=N.patchedContent)==null?void 0:se.length)||0,description:N.description}),console.log("=".repeat(60)),fe(_t=>[..._t,{id:`msg-approved-${Date.now()}`,role:"assistant",content:`Approved: ${zn.description}. Updating source code...`,timestamp:new Date,model:Ht.id,intent:"ui_modify"}]);try{if(!((Ae=(ve=window.electronAPI)==null?void 0:ve.files)!=null&&Ae.writeFile))throw console.log("[DOM Approval]  ABORT: writeFile API not available"),new Error("File API not available");const _t=N.originalContent!==N.patchedContent;console.log("[DOM Approval] Content changed:",_t),_t||(console.log("[DOM Approval]  WARNING: Patch content is IDENTICAL to original!"),console.log("[DOM Approval] This means the AI did not make any changes.")),console.log("[DOM Approval] Writing patch to disk:",N.filePath),console.log("[DOM Approval] Original length:",((Ie=N.originalContent)==null?void 0:Ie.length)||0),console.log("[DOM Approval] Patched length:",((He=N.patchedContent)==null?void 0:He.length)||0),console.log("[DOM Approval] First 200 chars of patched content:",(bt=N.patchedContent)==null?void 0:bt.substring(0,200));const bn=await window.electronAPI.files.writeFile(N.filePath,N.patchedContent);if(console.log("[DOM Approval] writeFile result:",bn),bn.success&&((Et=(cn=window.electronAPI)==null?void 0:cn.files)!=null&&Et.readFile)){const Wn=await window.electronAPI.files.readFile(N.filePath);if(Wn.success){const Qr=Wn.data===N.patchedContent;console.log("[DOM Approval] Verification read-back:",Qr?" MATCHES":" MISMATCH"),Qr||(console.log("[DOM Approval] Expected length:",(En=N.patchedContent)==null?void 0:En.length),console.log("[DOM Approval] Actual length:",(lt=Wn.data)==null?void 0:lt.length))}}if(bn.success)console.log("[Source Patch]  Applied successfully to:",N.filePath),fe(Wn=>[...Wn,{id:`msg-patch-${Date.now()}`,role:"assistant",content:`Source code updated: ${N.filePath.split("/").pop()}`,timestamp:new Date}]),Jo({path:N.filePath,additions:1,deletions:1,undoCode:N.undoCode});else throw new Error(bn.error||"Failed to save file")}catch(_t){console.error("[Source Patch] Failed:",_t),fe(bn=>[...bn,{id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to save: ${_t instanceof Error?_t.message:"Unknown error"}`,timestamp:new Date}])}iE(!1),Oo(null),qa(null)},[zn,Jo]);w.useEffect(()=>{zn!=null&&zn.userApproved&&zn.patchStatus==="ready"&&zn.patch&&(console.log("[DOM Approval] Auto-applying: patch ready and user already approved"),Ch())},[zn==null?void 0:zn.patchStatus,zn==null?void 0:zn.userApproved,Ch]);const Bs=w.useCallback(()=>{if(!zn)return;const N=Jn.current.get(l);zn.undoCode&&N&&N.executeJavaScript(zn.undoCode),Oo(null),qa(null)},[zn,l]);w.useEffect(()=>{const N=W=>{!Er&&!zn||((W.metaKey||W.ctrlKey)&&W.key==="Enter"&&(W.preventDefault(),zn?Ch():Dl()),W.key==="Escape"&&(W.preventDefault(),zn?Bs():ca()))};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[Er,zn,Dl,ca,Ch,Bs]);const dy=w.useCallback(async(N,W)=>{var ve,Ae;if(console.log("Starting project setup flow:",N,W),!n&&((ve=window.electronAPI)!=null&&ve.window)){const Ie=await window.electronAPI.window.lockProject(N,W);if(Ie.success)r(N),o(W),console.log(`[Window] Locked to project: ${N}`);else if((Ae=Ie.error)!=null&&Ae.includes("already open in another window")){Ie.existingWindowId&&await window.electronAPI.window.focus(Ie.existingWindowId);return}}const se=lje(N);dh({path:N,name:W,port:se==null?void 0:se.port})},[n]),fy=w.useCallback((N,W)=>{kl&&(O({url:N,title:kl.name,projectPath:kl.path}),Q6(kl.name,kl.path,W),dh(null))},[kl,O]),_E=w.useCallback(()=>{dh(null)},[]),SE=w.useCallback(N=>{O({url:N,title:new URL(N).hostname})},[O]),Sk=w.useCallback(N=>{console.log("[PatchApproval] Approved patch:",N.filePath);const W=Ld+1;W<Mu.length?rp(W):(Vb([]),rp(0),Ym(!1))},[Ld,Mu.length]),hy=w.useCallback(N=>{console.log("[PatchApproval] Rejected patch:",N.filePath);const W=Mu.filter((se,ve)=>ve!==Ld);Vb(W),W.length>0?rp(Math.min(Ld,W.length-1)):(rp(0),Ym(!1))},[Ld,Mu]),py=w.useCallback(N=>{console.log("[PatchApproval] Edit requested for patch:",N.filePath),Ym(!1)},[]);w.useCallback(N=>{Vb(N),rp(0),Ym(!0)},[]);const my=!u.url,Yi=(Xs==null?void 0:Xs.background)||(he?"#171717":"#d6d3d1");return h.jsxs("div",{className:`flex flex-col h-screen w-full overflow-hidden font-sans ${he?"dark text-neutral-100":"text-neutral-900"}`,style:{backgroundColor:Yi},children:[h.jsx(cye,{tabs:X,activeTabId:l,onTabSelect:k,onTabClose:T,onNewTab:E,onReorderTabs:I,isDarkMode:he,onToggleDarkMode:Pu,onOpenSettings:()=>eE(!0),fastApplyReady:pk,fileWatcherActive:mk}),h.jsxs("div",{className:"flex flex-1 overflow-hidden pt-1 pb-2 px-2 gap-1",children:[kl?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:zc,borderColor:jc},children:h.jsx(yje,{projectPath:kl.path,projectName:kl.name,initialPort:kl.port,isDarkMode:he,onComplete:fy,onCancel:_E})}):u.type==="kanban"?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:zc,borderColor:jc},children:h.jsx(HF,{defaultView:"kanban",className:he?"dark":""})}):u.type==="todos"?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:zc,borderColor:jc},children:h.jsx(HF,{defaultView:"tasks",className:he?"dark":""})}):u.type==="notes"?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:zc,borderColor:jc},children:h.jsx(sje,{content:((Sp=u.notesData)==null?void 0:Sp.content)||"",isDarkMode:he,onUpdateContent:G})}):my?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:zc,borderColor:jc},children:h.jsx(dje,{onOpenProject:dy,onOpenUrl:SE,isDarkMode:he,lockedProjectPath:n})}):h.jsxs("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:zc,borderColor:jc},children:[h.jsxs("div",{className:"h-12 border-b flex items-center gap-2 px-3 flex-shrink-0",style:{borderColor:jc,backgroundColor:fk},children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:hg,disabled:!re,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${re?he?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-200 text-stone-600":he?"text-neutral-600 cursor-not-allowed":"text-stone-300 cursor-not-allowed"}`,title:"Back",children:h.jsx(w1,{size:16})}),h.jsx("button",{onClick:Ud,disabled:!Z,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${Z?he?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-200 text-stone-600":he?"text-neutral-600 cursor-not-allowed":"text-stone-300 cursor-not-allowed"}`,title:"Forward",children:h.jsx(Cf,{size:16})}),h.jsx("button",{onClick:vi,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${he?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-200 text-stone-600"}`,title:"Reload",children:oe?h.jsx(fs,{size:16,className:"animate-spin"}):h.jsx(f0,{size:16})})]}),h.jsxs("div",{className:`flex items-center rounded-lg p-0.5 ${he?"bg-neutral-700":"bg-stone-100"}`,children:[h.jsx("button",{onClick:()=>Wa("desktop"),className:`w-7 h-7 rounded-md flex items-center justify-center transition-colors ${Sa==="desktop"?he?"bg-neutral-600 text-white":"bg-white text-stone-900 shadow-sm":he?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,title:"Desktop view",children:h.jsx(xN,{size:14})}),h.jsx("button",{onClick:()=>Wa("tablet"),className:`w-7 h-7 rounded-md flex items-center justify-center transition-colors ${Sa==="tablet"?he?"bg-neutral-600 text-white":"bg-white text-stone-900 shadow-sm":he?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,title:"Tablet view (768px)",children:h.jsx(R3,{size:14})}),h.jsx("button",{onClick:()=>Wa("mobile"),className:`w-7 h-7 rounded-md flex items-center justify-center transition-colors ${Sa==="mobile"?he?"bg-neutral-600 text-white":"bg-white text-stone-900 shadow-sm":he?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,title:"Mobile view (375px)",children:h.jsx(I3,{size:14})})]}),h.jsx("form",{onSubmit:wh,className:"flex-1",children:h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",value:J,onChange:N=>!u.projectPath&&ee(N.target.value),readOnly:!!u.projectPath,"data-control-id":"url-bar","data-control-type":"input",className:`w-full h-8 px-3 pr-8 text-sm rounded-full focus:outline-none ${u.projectPath?`cursor-default ${he?"bg-neutral-800 border-neutral-700 text-neutral-400":"bg-stone-100 border-stone-200 text-stone-500"}`:`focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 ${he?"bg-neutral-700 border-neutral-600 text-neutral-100 placeholder-neutral-400":"bg-white border border-stone-200"}`}`,placeholder:"Enter URL...",title:u.projectPath?`Locked to project: ${u.projectPath}`:"Enter URL..."}),oe&&h.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:h.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})})]})}),h.jsx("button",{onClick:()=>{sn(!wt),Ue(!1),Zt(!1)},"data-control-id":"inspector-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${wt?"bg-blue-100 text-blue-600":he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Element Inspector",children:h.jsx(s2,{size:16})}),h.jsx("button",{onClick:()=>{Zt(!ht),sn(!1)},"data-control-id":"move-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${ht?"bg-orange-100 text-orange-600":he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Move & Resize Element",children:h.jsx(o2,{size:16})}),h.jsx("button",{onClick:()=>{const N=Jn.current.get(l);N&&N.openDevTools()},"data-control-id":"devtools-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Open Webview DevTools",children:h.jsx(By,{size:16})}),h.jsx("button",{onClick:()=>lh(!aa),"data-control-id":"agent-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${aa?"bg-purple-100 text-purple-600":he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Cluso Agent Demos",children:h.jsx(cL,{size:16})}),h.jsx("button",{onClick:()=>lg(!Do),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${Do?"bg-blue-100 text-blue-600":he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Toggle Console",children:h.jsx(ld,{size:16})}),h.jsx("button",{onClick:()=>ce(!B),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:B?"Hide sidebar":"Show sidebar",children:h.jsx(_be,{size:16})})]}),h.jsxs("div",{"data-browser-content":!0,className:"flex-1 relative overflow-hidden flex flex-col ",children:[h.jsxs("div",{className:`flex-1 relative overflow-hidden flex flex-col justify-center items-center ${Sa==="desktop"?"":"py-4 gap-3"} ${he?"bg-neutral-900":"bg-stone-200"}`,children:[Sa!=="desktop"&&h.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>{zd(!Ta),yh(!1)},className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors ${he?"bg-neutral-800 hover:bg-neutral-700 text-neutral-200 border border-neutral-700":"bg-white hover:bg-stone-50 text-stone-700 border border-stone-200 shadow-sm"}`,children:[Sa==="mobile"?h.jsx(I3,{size:14}):h.jsx(R3,{size:14}),h.jsx("span",{children:gh?"Custom":(Oi==null?void 0:Oi.name)||(Sa==="mobile"?"iPhone SE":"iPad Mini")}),h.jsxs("span",{className:`text-xs ${he?"text-neutral-500":"text-stone-400"}`,children:[fp,"  ",Hc]}),h.jsx(Df,{size:14,className:`transition-transform ${Ta?"rotate-180":""}`})]}),Ta&&h.jsxs("div",{className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 w-72 max-h-80 overflow-y-auto rounded-xl shadow-xl z-50 ${he?"bg-neutral-800 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("div",{className:`px-3 py-2 text-xs font-semibold uppercase tracking-wider ${he?"text-neutral-500":"text-stone-400"}`,children:"Mobile"}),Kb.filter(N=>N.type==="mobile").map(N=>h.jsxs("button",{onClick:()=>Jb(N),className:`w-full flex items-center justify-between px-3 py-2.5 text-sm transition-colors ${(Oi==null?void 0:Oi.name)===N.name?he?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":he?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(I3,{size:14}),N.name]}),h.jsxs("span",{className:`text-xs ${he?"text-neutral-500":"text-stone-400"}`,children:[N.width,"  ",N.height]})]},N.name)),h.jsx("div",{className:`px-3 py-2 text-xs font-semibold uppercase tracking-wider border-t ${he?"text-neutral-500 border-neutral-700":"text-stone-400 border-stone-100"}`,children:"Tablet"}),Kb.filter(N=>N.type==="tablet").map(N=>h.jsxs("button",{onClick:()=>Jb(N),className:`w-full flex items-center justify-between px-3 py-2.5 text-sm transition-colors ${(Oi==null?void 0:Oi.name)===N.name?he?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":he?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(R3,{size:14}),N.name]}),h.jsxs("span",{className:`text-xs ${he?"text-neutral-500":"text-stone-400"}`,children:[N.width,"  ",N.height]})]},N.name)),h.jsxs("div",{className:`border-t ${he?"border-neutral-700":"border-stone-100"}`,children:[h.jsxs("button",{onClick:ig,className:`w-full flex items-center gap-2 px-3 py-2.5 text-sm transition-colors ${gh?he?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":he?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:[h.jsx(tS,{size:14}),"Custom Size"]}),gh&&h.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 ${he?"bg-neutral-900/50":"bg-stone-50"}`,children:[h.jsx("input",{type:"number",value:uE,onChange:N=>xk(parseInt(N.target.value)||375),className:`w-20 px-2 py-1 text-sm rounded-lg text-center ${he?"bg-neutral-700 border-neutral-600 text-neutral-200":"bg-white border-stone-200 text-stone-700"} border focus:outline-none focus:ring-2 focus:ring-blue-500/30`,placeholder:"Width"}),h.jsx("span",{className:`text-xs ${he?"text-neutral-500":"text-stone-400"}`,children:""}),h.jsx("input",{type:"number",value:dE,onChange:N=>fE(parseInt(N.target.value)||667),className:`w-20 px-2 py-1 text-sm rounded-lg text-center ${he?"bg-neutral-700 border-neutral-600 text-neutral-200":"bg-white border-stone-200 text-stone-700"} border focus:outline-none focus:ring-2 focus:ring-blue-500/30`,placeholder:"Height"})]})]})]})]}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>{yh(!up),zd(!1)},className:`flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium transition-colors ${he?"bg-neutral-800 hover:bg-neutral-700 text-neutral-200 border border-neutral-700":"bg-white hover:bg-stone-50 text-stone-700 border border-stone-200 shadow-sm"}`,children:[h.jsx("span",{children:(_g=dp.find(N=>N.value===qi))==null?void 0:_g.label}),h.jsx(Df,{size:14,className:`transition-transform ${up?"rotate-180":""}`})]}),up&&h.jsx("div",{className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 w-24 rounded-xl shadow-xl z-50 overflow-hidden ${he?"bg-neutral-800 border border-neutral-700":"bg-white border border-stone-200"}`,children:dp.map(N=>h.jsx("button",{onClick:()=>{bh(N.value),yh(!1)},className:`w-full px-3 py-2 text-sm text-center transition-colors ${qi===N.value?he?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":he?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:N.label},N.value))})]})]}),Sn&&Vu?h.jsx(h.Fragment,{children:i.filter(N=>N.url).map(N=>h.jsx("div",{className:`transition-all duration-300 origin-center ${Sa==="desktop"?"w-full h-full":"rounded-3xl shadow-2xl ring-4 ring-neutral-700 overflow-hidden flex-shrink-0"}`,style:{...Sa==="desktop"?{}:qi==="fit"?{aspectRatio:`${fp} / ${Hc}`,maxWidth:"calc(100% - 48px)",maxHeight:"calc(100% - 80px)",width:"auto",height:"100%"}:{width:`${fp}px`,height:`${Hc}px`,transform:`scale(${parseInt(qi)/100})`,transformOrigin:"center center"},display:N.id===l?"block":"none",position:N.id===l?"relative":"absolute"},children:h.jsx("webview",{ref:vp(N.id),src:N.url||"about:blank",preload:`file://${Vu}`,className:"w-full h-full",style:Sa==="desktop"?{width:"100%"}:void 0,allowpopups:"true",nodeintegration:"true",webpreferences:"contextIsolation=no"})},N.id))}):Sn?h.jsx("div",{className:`w-full h-full flex items-center justify-center ${he?"bg-neutral-800":"bg-stone-50"}`,children:h.jsx("div",{className:`w-8 h-8 border-2 rounded-full animate-spin ${he?"border-neutral-600 border-t-neutral-400":"border-stone-300 border-t-stone-600"}`})}):(()=>{const N=u.url||"";return N.includes("localhost")||N.includes("127.0.0.1"),h.jsx("iframe",{src:N,className:"w-full h-full border-0",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation",title:"Web Preview"})})(),!B&&h.jsxs("div",{className:`absolute bottom-8 left-1/2 transform -translate-x-1/2 flex items-center gap-1 backdrop-blur shadow-2xl p-2 rounded-full z-40 ${he?"bg-neutral-800/90 border border-neutral-700/50":"bg-white/90 border border-stone-200/50"}`,children:[h.jsx("button",{onClick:()=>L(!Y),className:`w-9 h-9 rounded-full flex items-center justify-center transition-all ${Y?"bg-green-100 text-green-600":he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,title:"Toggle Screen Share",children:h.jsx(xN,{size:16})}),h.jsx("button",{onClick:()=>{sn(!wt),Ue(!1),Zt(!1)},className:`w-9 h-9 rounded-full flex items-center justify-center transition-all ${wt?"bg-blue-100 text-blue-600":he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,title:"Toggle Element Inspector",children:h.jsx(s2,{size:16})}),h.jsx("button",{onClick:()=>{Zt(!ht),sn(!1)},className:`w-9 h-9 rounded-full flex items-center justify-center transition-all ${ht?"bg-orange-100 text-orange-600":he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,title:"Move & Resize Element",children:h.jsx(o2,{size:16})}),h.jsx("div",{className:`w-[1px] h-5 mx-0.5 ${he?"bg-neutral-600":"bg-stone-200"}`}),h.jsx("button",{onClick:()=>{Ka.isConnected?(bp(),wE()):Yd()},"data-control-id":"voice-button","data-control-type":"button",className:`flex items-center justify-center w-9 h-9 rounded-full font-medium transition-all ${Ka.isConnected?"bg-red-50 text-red-600 ring-1 ring-red-100":he?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-800"}`,title:Ka.isConnected?"End voice session":"Start voice session",children:Ka.isConnected?h.jsxs("span",{className:"relative flex h-2 w-2",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}):h.jsx(gbe,{size:16})})]}),(wt||ye||ht)&&xt&&h.jsx("div",{className:"fixed z-[60] pointer-events-none",style:{top:Math.max(8,(((cc=Jn.current.get(l))==null?void 0:cc.getBoundingClientRect().top)||0)+xt.rect.top-32),left:Math.max(8,(((Tp=Jn.current.get(l))==null?void 0:Tp.getBoundingClientRect().left)||0)+xt.rect.left)},children:h.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-mono shadow-lg ${ye?"bg-purple-600 text-white":ht?"bg-orange-500 text-white":"bg-blue-600 text-white"}`,style:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:[h.jsx("span",{className:"font-semibold",children:(Sg=xt.element.tagName)==null?void 0:Sg.toLowerCase()}),xt.element.id&&h.jsxs("span",{className:"opacity-80",children:["#",xt.element.id]}),xt.element.className&&h.jsxs("span",{className:"opacity-60 max-w-[200px] truncate",children:[".",xt.element.className.split(" ")[0]]}),h.jsxs("span",{className:"opacity-50 text-[10px] ml-1",children:[Math.round(xt.rect.width),"",Math.round(xt.rect.height)]})]})}),!B&&de&&kt&&h.jsx("div",{className:"absolute z-50",style:Th(),children:h.jsxs("div",{className:`rounded-2xl shadow-2xl w-80 p-3 ${he?"bg-neutral-800/95 border border-neutral-700":"bg-white/95 border border-stone-200"}`,style:{backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:[h.jsxs("div",{className:"flex flex-col gap-2 mb-2",children:[h.jsxs("div",{className:`flex items-center gap-2 text-xs ${he?"text-neutral-400":"text-stone-500"}`,children:[h.jsx("div",{className:"bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded font-mono font-medium",children:de.tagName}),h.jsx("span",{className:"truncate max-w-[150px]",children:de.text}),h.jsx("div",{className:"flex-1"}),h.jsx("button",{onClick:()=>{Bn(!1),nt(null);const N=Jn.current.get(l);N==null||N.send("clear-selection")},className:`p-1 rounded hover:bg-black/10 ${he?"hover:text-neutral-200":"hover:text-stone-900"}`,title:"Dismiss (Esc)",children:h.jsx(qr,{size:14})})]}),de.sourceLocation&&h.jsx("div",{className:`text-xs font-mono ${he?"text-neutral-500":"text-stone-400"}`,children:de.sourceLocation.summary})]}),h.jsxs("form",{onSubmit:N=>{N.preventDefault(),Zd(Hr),ia(""),Bn(!1)},children:[h.jsx("textarea",{value:Hr,onChange:N=>ia(N.target.value),placeholder:"What would you like to change?",className:`w-full text-sm p-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 resize-none ${he?"bg-neutral-700 border-neutral-600 text-neutral-100 placeholder-neutral-400":"bg-stone-50 border-stone-200"}`,rows:2,autoFocus:!0,onKeyDown:N=>{if(N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),Zd(Hr),ia(""),Bn(!1)),N.key==="Escape"){Bn(!1),nt(null);const W=Jn.current.get(l);W==null||W.send("clear-selection")}}}),h.jsx("div",{className:"flex justify-end mt-2",children:h.jsx("button",{type:"submit",disabled:!Hr.trim(),className:`w-7 h-7 rounded-full flex items-center justify-center disabled:opacity-50 ${he?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-700"}`,children:h.jsx(N3,{size:14})})})]})]})})]}),vh&&h.jsx("div",{className:"fixed inset-0 z-50 cursor-ns-resize"}),aa&&h.jsxs("div",{className:`absolute bottom-4 right-4 w-80 rounded-xl shadow-2xl border z-50 ${he?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,children:[h.jsxs("div",{className:`flex items-center justify-between px-4 py-3 border-b ${he?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(cL,{size:18,className:"text-purple-500"}),h.jsx("span",{className:`font-medium ${he?"text-white":"text-stone-800"}`,children:"Cluso Agent"}),Ko.isProcessing&&h.jsx("div",{className:"w-3 h-3 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})]}),h.jsx("button",{onClick:()=>lh(!1),className:`w-6 h-6 rounded flex items-center justify-center ${he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,children:h.jsx(qr,{size:14})})]}),h.jsxs("div",{className:"p-4 space-y-3",children:[h.jsx("div",{className:`text-xs ${Ko.isReady?"text-green-500":"text-orange-500"}`,children:Ko.isReady?" Connected to local model":" Connecting..."}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:`text-xs font-medium ${he?"text-neutral-400":"text-stone-500"}`,children:" Two-Voice Demos (User + App)"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:Uie.map(N=>h.jsx("button",{onClick:()=>Ko.runScriptedDemo(N),disabled:Ko.isProcessing||!Ko.isReady,className:`px-3 py-2 text-sm rounded-lg transition-colors capitalize ${Ko.isProcessing?"opacity-50 cursor-not-allowed":he?"bg-purple-600 hover:bg-purple-500 text-white":"bg-purple-100 hover:bg-purple-200 text-purple-700"}`,children:N.replace("-"," ")},N))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:`text-xs font-medium ${he?"text-neutral-400":"text-stone-500"}`,children:" Quick Commands"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:Sit.map(N=>h.jsx("button",{onClick:()=>Ko.runDemo(N),disabled:Ko.isProcessing||!Ko.isReady,className:`px-3 py-2 text-sm rounded-lg transition-colors capitalize ${Ko.isProcessing?"opacity-50 cursor-not-allowed":he?"bg-neutral-700 hover:bg-neutral-600 text-neutral-200":"bg-stone-100 hover:bg-stone-200 text-stone-700"}`,children:N.replace("-"," ")},N))})]}),h.jsx("div",{className:"flex gap-2",children:h.jsx("input",{type:"text",placeholder:"Ask agent to do something...",className:`flex-1 px-3 py-2 text-sm rounded-lg border ${he?"bg-neutral-700 border-neutral-600 text-white placeholder-neutral-400":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"}`,onKeyDown:async N=>{if(N.key==="Enter"&&!Ko.isProcessing){const W=N.currentTarget,se=W.value.trim();se&&(W.value="",await Ko.chat(se))}}})}),Ko.lastResponse&&h.jsxs("div",{className:`text-xs p-2 rounded ${he?"bg-neutral-700 text-neutral-300":"bg-stone-50 text-stone-600"}`,children:[Ko.lastResponse.substring(0,150),Ko.lastResponse.length>150&&"..."]}),Ko.error&&h.jsx("div",{className:"text-xs p-2 rounded bg-red-500/10 text-red-500",children:Ko.error}),h.jsx("button",{onClick:()=>Ko.reset(),className:`w-full px-3 py-1.5 text-xs rounded ${he?"text-neutral-400 hover:bg-neutral-700":"text-stone-500 hover:bg-stone-100"}`,children:"Reset conversation"})]})]}),Do&&h.jsxs("div",{className:`flex flex-col overflow-hidden ${he?"bg-neutral-900":"bg-stone-50"}`,style:{height:Il},children:[h.jsx("div",{className:`h-2 cursor-ns-resize flex-shrink-0 flex items-center justify-center group ${he?"bg-neutral-900":"bg-stone-50"}`,onMouseDown:hp,children:h.jsx("div",{className:`w-8 h-0.5 rounded-full transition-colors ${vh?he?"bg-neutral-400":"bg-stone-500":he?"bg-neutral-600 group-hover:bg-neutral-500":"bg-stone-300 group-hover:bg-stone-400"}`})}),h.jsxs("div",{className:`flex items-center justify-between px-3 py-1.5 border-b ${he?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-1.5",style:{position:"relative",top:"-3px"},children:[h.jsxs("button",{onClick:xg,className:`flex items-center gap-2 px-2.5 py-1 rounded-full transition-colors ${Rl.size===0?he?"bg-neutral-600 text-neutral-200":"bg-stone-300 text-stone-700":he?"bg-neutral-700 text-neutral-400 hover:bg-neutral-600":"bg-stone-200 text-stone-500 hover:bg-stone-300"}`,title:"Show all logs",children:[h.jsx(ld,{size:14}),h.jsx("span",{className:"text-xs font-medium",children:"Console"}),h.jsx("span",{className:"text-xs opacity-70",children:wp.length})]}),h.jsx("button",{onClick:()=>Yc("log"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Rl.has("log")?he?"bg-neutral-500 text-white":"bg-stone-500 text-white":he?"bg-neutral-800 text-neutral-400 hover:bg-neutral-700":"bg-stone-100 text-stone-500 hover:bg-stone-200"}`,title:"Filter by log",children:"log"}),h.jsx("button",{onClick:()=>Yc("info"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Rl.has("info")?"bg-blue-500 text-white":he?"bg-neutral-800 text-blue-400 hover:bg-neutral-700":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,title:"Filter by info",children:"info"}),h.jsx("button",{onClick:()=>Yc("warn"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Rl.has("warn")?"bg-yellow-500 text-white":he?"bg-neutral-800 text-yellow-400 hover:bg-neutral-700":"bg-yellow-50 text-yellow-600 hover:bg-yellow-100"}`,title:"Filter by warn",children:"warn"}),h.jsx("button",{onClick:()=>Yc("error"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Rl.has("error")?"bg-red-500 text-white":he?"bg-neutral-800 text-red-400 hover:bg-neutral-700":"bg-red-50 text-red-600 hover:bg-red-100"}`,title:"Filter by error",children:"error"})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[ti.size>0&&h.jsxs(h.Fragment,{children:[h.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${he?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-600"}`,children:[ti.size," selected"]}),h.jsxs("div",{className:"flex items-center gap-0.5 ml-1",children:[h.jsx("button",{onClick:()=>{const N=($o==null?void 0:$o.map(W=>W.message).join(`
`))||"";ay(N)},className:`p-1.5 rounded transition-colors ${he?"hover:bg-neutral-600 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-200 text-stone-500 hover:text-stone-700"}`,title:"Search for solutions (G)",children:h.jsx(Vf,{size:14})}),h.jsx("button",{onClick:()=>{const N=($o==null?void 0:$o.map(W=>`[${W.type}] ${W.message}`).join(`
`))||"";navigator.clipboard.writeText(N)},className:`p-1.5 rounded transition-colors ${he?"hover:bg-neutral-600 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-200 text-stone-500 hover:text-stone-700"}`,title:"Copy (C)",children:h.jsx(Fq,{size:14})}),h.jsx("button",{onClick:()=>oc(new Set),className:`p-1.5 rounded transition-colors ${he?"hover:bg-neutral-600 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-200 text-stone-500 hover:text-stone-700"}`,title:"Clear selection (Esc)",children:h.jsx(qr,{size:14})})]})]}),h.jsx("button",{onClick:EE,className:`p-1 rounded hover:bg-opacity-80 transition ${he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Clear console",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("path",{d:"m4.9 4.9 14.2 14.2"})]})}),h.jsx("button",{onClick:()=>lg(!1),className:`p-1 rounded hover:bg-opacity-80 transition ${he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Close console",children:h.jsx(qr,{size:14})})]})]}),h.jsxs("div",{className:`flex-1 overflow-y-auto font-mono text-xs p-2 space-y-0.5 ${he?"text-neutral-300":"text-stone-700"}`,children:[wp.length===0?h.jsx("div",{className:`text-center py-8 ${he?"text-neutral-500":"text-stone-400"}`,children:Gi.length===0?"No console messages yet":"No logs match current filters"}):wp.map((N,W)=>h.jsxs("div",{onClick:se=>xp(W,se),className:`flex items-start gap-2 px-2 py-0.5 rounded cursor-pointer select-none transition-colors ${ti.has(W)?he?"bg-blue-500/20 ring-1 ring-blue-500/50":"bg-blue-100 ring-1 ring-blue-300":N.type==="error"?he?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100":N.type==="warn"?he?"bg-yellow-500/10 text-yellow-400 hover:bg-yellow-500/20":"bg-yellow-50 text-yellow-600 hover:bg-yellow-100":N.type==="info"?he?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100":he?"hover:bg-neutral-700":"hover:bg-stone-100"}`,title:"Click to select, Shift+click for range",children:[h.jsx("span",{className:`flex-shrink-0 ${he?"text-neutral-500":"text-stone-400"}`,children:N.timestamp.toLocaleTimeString()}),h.jsxs("span",{className:"flex-shrink-0 w-12 text-center",children:["[",N.type,"]"]}),h.jsx("span",{className:"break-all flex-1",children:N.message}),h.jsx("span",{className:`flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${ti.has(W)?"bg-blue-500 border-blue-500":he?"border-neutral-500 hover:border-neutral-400":"border-stone-300 hover:border-stone-400"}`,children:ti.has(W)&&h.jsx(Ts,{size:10,className:"text-white"})})]},W)),h.jsx("div",{ref:la})]})]}),uk&&h.jsxs("div",{className:`absolute bottom-full left-0 right-0 mb-2 mx-2 rounded-xl border shadow-xl overflow-hidden z-50 ${he?"bg-neutral-800 border-neutral-600":"bg-white border-stone-200"}`,style:{maxHeight:"300px"},children:[h.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b ${he?"border-neutral-700":"border-stone-100"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Pf,{size:14,className:he?"text-blue-400":"text-blue-500"}),h.jsx("span",{className:`text-sm font-medium ${he?"text-neutral-200":"text-stone-700"}`,children:ep?"Searching...":`${(gi==null?void 0:gi.length)||0} Results`})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[gi&&gi.length>0&&h.jsxs("button",{onClick:ly,className:`flex items-center gap-1.5 px-2 py-1 text-xs font-medium rounded transition-colors ${he?"bg-blue-500/20 text-blue-300 hover:bg-blue-500/30":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,title:"Send to chat",children:[h.jsx(Fbe,{size:12}),"Add to Chat"]}),h.jsx("button",{onClick:()=>tp(!1),className:`p-1 rounded transition-colors ${he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,children:h.jsx(qr,{size:14})})]})]}),h.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"240px"},children:ep?h.jsxs("div",{className:`flex items-center justify-center py-8 ${he?"text-neutral-400":"text-stone-500"}`,children:[h.jsx(fs,{size:20,className:"animate-spin mr-2"}),h.jsx("span",{className:"text-sm",children:"Searching the web..."})]}):gi&&gi.length>0?h.jsx("div",{className:"divide-y divide-stone-100 dark:divide-neutral-700",children:gi.map((N,W)=>h.jsxs("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:`block px-3 py-2 transition-colors ${he?"hover:bg-neutral-700":"hover:bg-stone-50"}`,children:[h.jsx("div",{className:`text-sm font-medium truncate ${he?"text-blue-400":"text-blue-600"}`,children:N.title}),h.jsx("div",{className:`text-xs truncate mt-0.5 ${he?"text-neutral-500":"text-stone-400"}`,children:N.url}),N.snippet&&h.jsx("div",{className:`text-xs mt-1 line-clamp-2 ${he?"text-neutral-400":"text-stone-500"}`,children:N.snippet})]},W))}):gi&&gi.length===0?h.jsx("div",{className:`text-center py-8 text-sm ${he?"text-neutral-400":"text-stone-500"}`,children:"No results found"}):null})]})]})]}),Be&&h.jsx("div",{className:"fixed inset-0 z-50 cursor-ew-resize"}),B&&h.jsx("div",{className:`w-1 cursor-ew-resize z-10 transition-colors flex-shrink-0 ${Be?he?"bg-neutral-500":"bg-stone-400":he?"hover:bg-neutral-600":"hover:bg-stone-300"}`,onMouseDown:ey}),B&&h.jsxs("div",{className:"flex flex-col rounded-xl shadow-sm flex-shrink-0 border",style:{width:we,minWidth:430,backgroundColor:zc,borderColor:jc},children:[h.jsxs("div",{className:"h-12 border-b flex items-center justify-between px-3 flex-shrink-0",style:{borderColor:jc},children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>cr(!Zn),className:`flex items-center gap-1.5 text-sm px-2 py-1 rounded transition ${he?"text-neutral-300 hover:bg-neutral-700":"text-stone-600 hover:bg-stone-100"}`,children:[h.jsx(G1e,{size:14}),h.jsx("span",{children:Kt.currentBranch})]}),Zn&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{cr(!1),Tl(!1)}}),h.jsx("div",{className:`absolute top-full left-0 mt-1 w-56 rounded-xl shadow-xl py-1 z-50 max-h-64 overflow-y-auto ${he?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:J0?h.jsx("div",{className:"p-2",children:h.jsx("input",{type:"text",value:Sl,onChange:N=>qm(N.target.value),placeholder:"New branch name...",className:`w-full text-sm px-2 py-1.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${he?"bg-neutral-600 border border-neutral-500 text-neutral-100 placeholder-neutral-400":"border border-stone-200"}`,autoFocus:!0,onKeyDown:async N=>{N.key==="Enter"&&Sl.trim()&&(await Kt.createBranch(Sl.trim()),qm(""),Tl(!1),cr(!1)),N.key==="Escape"&&Tl(!1)}})}):h.jsx(h.Fragment,{children:Kt.branches.filter(N=>!N.startsWith("remotes/")).map(N=>h.jsxs("button",{onClick:async()=>{await Kt.checkout(N),cr(!1)},className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${he?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[N===Kt.currentBranch&&h.jsx(Ts,{size:12,className:"text-green-600"}),h.jsx("span",{className:N===Kt.currentBranch?"font-medium":"",children:N})]},N))})})]})]}),h.jsx("button",{onClick:()=>{cr(!0),Tl(!0)},className:`p-1 rounded transition ${he?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"New branch",children:h.jsx(Hf,{size:14})})]}),h.jsx("div",{className:"flex-1 mx-3",children:h.jsx("input",{type:"text",value:ch,onChange:N=>uh(N.target.value),placeholder:"Message ( to commit)",className:`w-full text-xs px-3 py-1.5 rounded-3xl focus:outline-none ${he?"bg-neutral-800/60 text-neutral-300 placeholder-neutral-600 focus:bg-neutral-800":"bg-stone-50 border border-stone-200 text-stone-600 placeholder-stone-400 focus:ring-1 focus:ring-stone-300"}`,onKeyDown:async N=>{N.key==="Enter"&&(N.metaKey||N.ctrlKey)&&ch.trim()&&(Cl("commit"),await Kt.commit(ch.trim()),uh(""),Cl(null))}})}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>mh(!0),className:`p-1.5 rounded transition ${X0==="stash"?"animate-pulse":""} ${he?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"Stash changes",disabled:!Kt.hasChanges,children:h.jsx(Zge,{size:14})}),h.jsx("button",{onClick:async()=>{Cl("pull"),await Kt.pull(),Cl(null)},className:`p-1.5 rounded transition ${X0==="pull"?"animate-pulse":""} ${he?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"Pull",children:h.jsx(iL,{size:14})}),h.jsx("button",{onClick:async()=>{Cl("push"),await Kt.push(),Cl(null)},className:`p-1.5 rounded transition ${X0==="push"?"animate-pulse":""} ${he?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"Push",children:h.jsx(N3,{size:14})})]})]}),h.jsxs("div",{className:"relative flex-1",children:[h.jsxs("div",{ref:zt,className:"absolute inset-0 overflow-y-auto p-4 space-y-4",children:[Ut.length>0&&h.jsx(Nit,{questions:Ut,onSelectQuestion:N=>{var W;De(N),(W=mt.current)==null||W.focus()},onDismissQuestion:Vt,isDarkMode:he,isVisible:Ut.length>0,isEmptyChat:Ce.length===0}),Ce.length===0&&h.jsx("div",{className:`h-full flex items-center justify-center text-sm ${he?"text-neutral-500":"text-stone-300"}`,children:"Start a conversation..."}),Ce.map(N=>h.jsxs("div",{className:`flex flex-col ${N.role==="user"?"items-end":"items-start"}`,children:[N.role==="assistant"&&N.reasoning&&h.jsxs("details",{className:`mb-2 w-full rounded-lg overflow-hidden ${he?"bg-purple-500/10 border border-purple-500/20":"bg-purple-50 border border-purple-200"}`,children:[h.jsxs("summary",{className:`px-3 py-2 text-xs cursor-pointer flex items-center gap-2 ${he?"text-purple-300 hover:bg-purple-500/20":"text-purple-700 hover:bg-purple-100"}`,children:[h.jsx(f1,{size:14}),h.jsx("span",{children:"View Reasoning"})]}),h.jsx("div",{className:`px-3 py-2 text-xs font-mono whitespace-pre-wrap max-h-48 overflow-y-auto ${he?"text-purple-200/80 border-t border-purple-500/20":"text-purple-600 border-t border-purple-200"}`,children:N.reasoning})]}),N.role==="assistant"&&N.toolUsage&&N.toolUsage.length>0&&h.jsx("div",{className:"mb-2 flex flex-wrap gap-1.5",children:N.toolUsage.map((W,se)=>h.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${W.isError?he?"bg-red-500/20 text-red-300":"bg-red-100 text-red-700":he?"bg-emerald-500/20 text-emerald-300":"bg-emerald-100 text-emerald-700"}`,children:[W.isError?h.jsx(qr,{size:10}):h.jsx(Ts,{size:10}),h.jsx("span",{className:"font-mono",children:W.name})]},W.id||se))}),h.jsx("div",{className:`leading-relaxed overflow-hidden ${N.role==="user"?`px-3 py-2 max-w-[85%] ${he?"bg-white text-neutral-900 rounded-xl":"bg-stone-900 text-white rounded-xl"}`:N.role==="system"?`px-4 py-3 ${he?"bg-yellow-500/20 text-yellow-200 rounded-2xl":"bg-yellow-50 text-yellow-800 rounded-2xl"}`:`w-full ${he?"text-neutral-200":"text-stone-700"}`}`,style:{fontSize:Qz(Mo.fontSize)},children:h.jsx(HI,{children:N.content})}),h.jsxs("div",{className:`text-[10px] mt-1 ${N.role==="user"?"text-right pr-1":"text-left"} ${he?"text-neutral-500":"text-stone-400"}`,children:[Wft(N.timestamp),N.role==="assistant"&&N.model&&`  ${N.model}`,N.role==="assistant"&&N.intent&&`  ${N.intent}`]})]},N.id)),Wb&&h.jsx(jot,{data:Wb,onSubmit:yk,onSkip:vk,isDarkMode:he}),hh&&Zo&&h.jsxs("div",{className:"flex flex-col items-start",children:[Zo.toolCalls.length>0&&h.jsx("div",{className:"mb-2 flex flex-wrap gap-1.5",children:Zo.toolCalls.map((N,W)=>h.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium transition-all ${N.status==="running"?he?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-700":N.status==="error"?he?"bg-red-500/20 text-red-300":"bg-red-100 text-red-700":he?"bg-emerald-500/20 text-emerald-300":"bg-emerald-100 text-emerald-700"}`,children:[N.status==="running"&&h.jsx(fs,{size:10,className:"animate-spin"}),N.status==="done"&&h.jsx(Ts,{size:10}),N.status==="error"&&h.jsx(qr,{size:10}),h.jsx("span",{className:"font-mono",children:N.name})]},N.id||W))}),Zo.reasoning&&h.jsxs("div",{className:`mb-2 w-full px-3 py-2 rounded-lg text-xs ${he?"bg-purple-500/10 text-purple-300 border border-purple-500/20":"bg-purple-50 text-purple-700 border border-purple-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1 font-medium",children:[h.jsx(f1,{size:14}),h.jsx("span",{children:"Thinking..."})]}),h.jsx("div",{className:"font-mono text-xs opacity-80 max-h-32 overflow-y-auto whitespace-pre-wrap",children:Zo.reasoning})]}),h.jsxs("div",{className:`w-full ${he?"text-neutral-200":"text-stone-700"}`,style:{fontSize:Qz(Mo.fontSize)},children:[Zo.content?h.jsx(HI,{children:Zo.content}):h.jsxs("div",{className:"flex items-center gap-2 text-sm opacity-60",children:[h.jsx(fs,{size:14,className:"animate-spin"}),h.jsx("span",{children:"Generating response..."})]}),h.jsx("span",{className:"inline-block w-2 h-4 ml-0.5 bg-current animate-pulse",style:{verticalAlign:"text-bottom"}})]})]}),!hh&&sp.length>0&&h.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5 animate-in fade-in duration-300",children:sp.map(N=>h.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium transition-all ${N.status==="error"?he?"bg-red-500/20 text-red-300":"bg-red-100 text-red-700":he?"bg-emerald-500/20 text-emerald-300":"bg-emerald-100 text-emerald-700"}`,children:[N.status==="error"?h.jsx(qr,{size:10}):h.jsx(Ts,{size:10}),h.jsx("span",{className:"font-mono",children:N.name})]},N.id))}),_a&&!hh&&h.jsxs("div",{className:"flex items-center gap-2 text-sm opacity-60",children:[h.jsx(fs,{size:14,className:"animate-spin"}),h.jsx("span",{children:"Processing..."})]}),zn&&!Uc&&h.jsxs("div",{className:`mx-4 my-3 p-3 rounded-xl border ${he?"bg-blue-950/50 border-blue-800/50":"bg-blue-50 border-blue-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(cv,{size:16,className:he?"text-blue-400":"text-blue-600"}),h.jsx("span",{className:`text-sm font-medium truncate ${he?"text-blue-300":"text-blue-800"}`,children:zn.description})]}),h.jsxs("div",{className:"flex gap-2 items-center shrink-0",children:[zn.patchStatus==="preparing"&&h.jsxs("div",{className:`flex items-center gap-1 text-xs ${he?"text-blue-300/70":"text-blue-700/70"}`,children:[h.jsx(fs,{size:14,className:"animate-spin"}),h.jsx("span",{children:"Preparing source patch"})]}),zn.patchStatus==="error"&&h.jsx("div",{className:`text-xs ${he?"text-red-300/80":"text-red-600/80"}`,children:zn.patchError||"Failed to prepare patch"}),h.jsx("button",{onClick:Bs,className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${he?"bg-neutral-700 hover:bg-neutral-600 text-neutral-300":"bg-stone-200 hover:bg-stone-300 text-stone-700"}`,children:"Reject"}),h.jsx("button",{onClick:Ch,disabled:zn.userApproved,className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors flex items-center gap-1.5 ${he?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} ${zn.userApproved?"opacity-60 cursor-not-allowed":""}`,children:zn.userApproved?h.jsxs(h.Fragment,{children:[h.jsx(fs,{size:14,className:"animate-spin"}),"Applying"]}):zn.patchStatus==="ready"?h.jsxs(h.Fragment,{children:[h.jsx(Ts,{size:14}),"Accept"]}):h.jsxs(h.Fragment,{children:[h.jsx(Ts,{size:14}),"Accept"]})})]})]}),zn.patchStatus==="ready"&&zn.patch&&h.jsx("div",{className:`mt-2 pt-2 border-t ${he?"border-blue-800/30":"border-blue-200"}`,children:h.jsxs("div",{className:`flex items-center gap-2 text-xs ${he?"text-blue-300/70":"text-blue-700/70"}`,children:[zn.patch.generatedBy==="fast-apply"?h.jsxs(h.Fragment,{children:[h.jsx(Gl,{size:12,className:"text-yellow-500"}),h.jsx("span",{className:"font-medium text-yellow-500",children:"Fast Apply"}),h.jsx("span",{children:""}),h.jsxs("span",{children:[zn.patch.durationMs,"ms"]})]}):zn.patch.generatedBy==="fast-path"?h.jsxs(h.Fragment,{children:[h.jsx(Gl,{size:12,className:"text-green-500"}),h.jsx("span",{className:"font-medium text-green-500",children:"Fast Path"}),h.jsx("span",{children:" instant"})]}):h.jsxs(h.Fragment,{children:[h.jsx(bR,{size:12}),h.jsx("span",{className:"font-medium",children:"Gemini"})]}),h.jsx("span",{children:""}),h.jsx("span",{className:"truncate",children:zn.patch.filePath.split("/").pop()})]})})]}),(Er==null?void 0:Er.source)==="code"&&h.jsx("div",{className:`mx-4 my-3 p-3 rounded-xl border ${he?"bg-blue-950/50 border-blue-800/50":"bg-blue-50 border-blue-200"}`,children:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(By,{size:16,className:he?"text-blue-400":"text-blue-600"}),h.jsx("span",{className:`text-sm font-medium truncate ${he?"text-blue-300":"text-blue-800"}`,children:Er.description})]}),h.jsxs("div",{className:"flex gap-2 items-center shrink-0",children:[h.jsx("button",{onClick:ca,title:"Reject (Esc)",className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${he?"bg-neutral-700 hover:bg-neutral-600 text-neutral-300":"bg-stone-200 hover:bg-stone-300 text-stone-700"}`,children:"Reject"}),h.jsxs("button",{onClick:Dl,title:"Accept (+Enter)",className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors flex items-center gap-1.5 ${he?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[h.jsx(Ts,{size:14}),"Accept"]})]})]})}),Uc&&h.jsx("div",{className:`mx-4 my-3 p-3 rounded-xl border ${he?"bg-blue-950/50 border-blue-800/50":"bg-blue-50 border-blue-200"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fs,{size:16,className:`animate-spin ${he?"text-blue-400":"text-blue-600"}`}),h.jsx("span",{className:`text-sm ${he?"text-blue-300":"text-blue-800"}`,children:"Updating source code..."})]})}),bi&&h.jsx("div",{className:`mx-4 my-3 p-4 rounded-xl border ${he?"bg-emerald-950/50 border-emerald-800/50":"bg-emerald-50 border-emerald-200"}`,children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${he?"bg-emerald-900/50":"bg-emerald-100"}`,children:h.jsx(By,{size:18,className:he?"text-emerald-400":"text-emerald-600"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:`text-sm font-medium ${he?"text-emerald-300":"text-emerald-800"}`,children:"Apply to Source Code?"}),h.jsx("div",{className:`text-xs mt-0.5 ${he?"text-emerald-400/70":"text-emerald-600/70"}`,children:bi.description}),h.jsx("div",{className:`text-xs mt-1 font-mono truncate ${he?"text-neutral-400":"text-stone-500"}`,children:bi.filePath.split("/").slice(-2).join("/")})]}),h.jsxs("div",{className:"flex gap-2 items-center",children:[bi.undoCode&&bi.applyCode&&h.jsx("button",{onMouseDown:()=>{const N=Jn.current.get(l);bi.undoCode&&N&&(console.log("[Preview] Showing original"),N.executeJavaScript(bi.undoCode),Xm(!0))},onMouseUp:()=>{const N=Jn.current.get(l);bi.applyCode&&N&&(console.log("[Preview] Showing change"),N.executeJavaScript(bi.applyCode),Xm(!1))},onMouseLeave:()=>{if(!oE)return;const N=Jn.current.get(l);bi.applyCode&&N&&(console.log("[Preview] Showing change (mouse leave)"),N.executeJavaScript(bi.applyCode),Xm(!1))},className:`p-1.5 rounded-lg transition-colors ${he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Hold to see original",children:oE?h.jsx(zq,{size:16}):h.jsx(mR,{size:16})}),h.jsx("button",{onClick:()=>{if(bi.undoCode){const N=Jn.current.get(l);N&&N.executeJavaScript(bi.undoCode)}sE(null)},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${he?"bg-neutral-700 hover:bg-neutral-600 text-neutral-300":"bg-stone-200 hover:bg-stone-300 text-stone-700"}`,children:"Dismiss"}),h.jsxs("button",{onClick:async()=>{var N,W;if((W=(N=window.electronAPI)==null?void 0:N.files)!=null&&W.writeFile&&bi){const se=await window.electronAPI.files.writeFile(bi.filePath,bi.patchedContent);se.success?(console.log("[Source Patch] Applied successfully"),fe(ve=>[...ve,{id:`msg-patch-${Date.now()}`,role:"assistant",content:`Source code updated: ${bi.filePath.split("/").pop()}`,timestamp:new Date}])):console.error("[Source Patch] Failed to apply:",se.error),sE(null)}},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors flex items-center gap-1.5 ${he?"bg-emerald-600 hover:bg-emerald-500 text-white":"bg-emerald-600 hover:bg-emerald-700 text-white"}`,children:[h.jsx(Ts,{size:14}),"Apply"]})]})]})}),h.jsx("div",{ref:an})]}),Va&&h.jsxs("button",{onClick:Ca,className:`absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex items-center gap-1.5 px-3 py-1.5 rounded-full shadow-lg transition-all duration-200 hover:scale-105 ${he?"bg-neutral-700 text-neutral-200 hover:bg-neutral-600 border border-neutral-600":"bg-white text-stone-700 hover:bg-stone-50 border border-stone-200"}`,title:"Scroll to bottom",children:[h.jsx(iL,{size:14}),h.jsx("span",{className:"text-xs font-medium",children:"New messages"})]})]}),Ga.length>0&&h.jsx("div",{className:"px-4 pb-2",children:h.jsxs("div",{className:`rounded-t-2xl border border-b-0 overflow-hidden transition-all duration-300 shadow-lg ${he?"bg-neutral-800 border-neutral-600":"bg-stone-100 border-stone-200"}`,children:[h.jsxs("div",{onClick:()=>cp(!Ou),className:`w-full flex items-center justify-between px-4 py-2.5 transition-colors cursor-pointer ${he?"hover:bg-neutral-700":"hover:bg-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Cf,{size:16,className:`transition-transform duration-200 ${Ou?"rotate-90":""} ${he?"text-neutral-400":"text-stone-500"}`}),h.jsxs("span",{className:`text-sm font-medium ${he?"text-neutral-200":"text-stone-700"}`,children:[Ga.length," File",Ga.length!==1?"s":""," Changed"]}),h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${he?"bg-amber-500/20 text-amber-400":"bg-amber-100 text-amber-700"}`,children:"Pending"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:N=>{N.stopPropagation(),Uu()},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${he?"text-red-400 hover:bg-red-500/20 border border-red-500/30":"text-red-600 hover:bg-red-50 border border-red-200"}`,children:"Reject"}),h.jsx("button",{onClick:N=>{N.stopPropagation(),cy()},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${he?"text-green-400 hover:bg-green-500/20 border border-green-500/30":"text-green-600 hover:bg-green-50 border border-green-200"}`,children:"Accept"})]})]}),h.jsx("div",{className:`overflow-hidden transition-all duration-300 ${Ou?"max-h-80":"max-h-0"}`,children:h.jsx("div",{className:`border-t max-h-72 overflow-y-auto ${he?"border-neutral-700":"border-stone-200"}`,children:Ga.map((N,W)=>h.jsxs("div",{className:`flex items-center justify-between px-4 py-2 ${W!==Ga.length-1?he?"border-b border-neutral-700":"border-b border-stone-200":""} ${he?"hover:bg-neutral-700":"hover:bg-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(By,{size:14,className:he?"text-neutral-400":"text-stone-500"}),h.jsx("span",{className:`text-sm font-mono truncate ${he?"text-neutral-200":"text-stone-700"}`,children:N.fileName}),h.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono",children:[N.additions>0&&h.jsxs("span",{className:"text-green-500",children:["+",N.additions]}),N.deletions>0&&h.jsxs("span",{className:"text-red-500",children:["-",N.deletions]})]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[(N.undoCode||N.isFileModification)&&h.jsx("button",{onClick:()=>Za(N.path),className:`p-1.5 rounded-lg text-xs transition-colors ${he?"text-red-400 hover:bg-red-500/20":"text-red-500 hover:bg-red-50"}`,title:"Reject this change",children:h.jsx(qr,{size:14})}),h.jsx("button",{onClick:()=>yi(se=>se.filter(ve=>ve.path!==N.path)),className:`p-1.5 rounded-lg text-xs transition-colors ${he?"text-green-400 hover:bg-green-500/20":"text-green-500 hover:bg-green-50"}`,title:"Accept this change",children:h.jsx(Ts,{size:14})})]})]},N.path))})})]})}),h.jsx("div",{className:`p-4 ${Ga.length>0?"pt-0":""}`,style:{overflow:"visible"},children:h.jsxs("div",{className:`rounded-2xl border relative ${Ga.length>0?"rounded-t-none border-t-0":""} ${he?"bg-neutral-700 border-neutral-600":"bg-stone-50 border-stone-200"} ${Io?"ring-2 ring-blue-400 ring-opacity-50":""}`,style:{overflow:"visible"},onDragOver:wg,onDragLeave:Kc,onDrop:rr,children:[Io&&h.jsx("div",{className:"absolute inset-0 bg-blue-500/10 rounded-2xl flex items-center justify-center z-10 pointer-events-none",children:h.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg ${he?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-600"}`,children:[h.jsx(gL,{size:20}),h.jsx("span",{className:"font-medium",children:"Drop images here (max 5)"})]})}),(de||Ne||Vs||$o||Al)&&h.jsxs("div",{className:"px-3 pt-3 flex flex-wrap gap-2",children:[Vs&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-yellow-50 text-yellow-700 rounded-lg text-xs border border-yellow-200",children:[h.jsx(ld,{size:12}),h.jsx("span",{className:"font-medium",children:"Console Logs"}),h.jsx("button",{onClick:()=>yo(!1),className:"ml-0.5 hover:text-yellow-900",children:h.jsx(qr,{size:12})})]}),$o&&$o.length>0&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-purple-50 text-purple-700 rounded-lg text-xs border border-purple-200",children:[h.jsx(ld,{size:12}),h.jsxs("span",{className:"font-medium",children:[$o.length," Log",$o.length>1?"s":""," Selected"]}),h.jsx("button",{onClick:()=>{oc(new Set),Vc.current=null},className:"ml-0.5 hover:text-purple-900",children:h.jsx(qr,{size:12})})]}),Al&&Al.length>0&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-xs border border-blue-200",children:[h.jsx(Pf,{size:12}),h.jsxs("span",{className:"font-medium",children:[Al.length," Search Result",Al.length>1?"s":""]}),h.jsx("button",{onClick:()=>Pd(null),className:"ml-0.5 hover:text-blue-900",children:h.jsx(qr,{size:12})})]}),de&&h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs border cursor-pointer transition-colors ${de.targetPosition?"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100":"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100"}`,onClick:Ep,title:de.targetPosition?"Element with repositioning target":"Click to view source code",children:[de.targetPosition?h.jsx(o2,{size:12}):h.jsx(Ts,{size:12}),de.sourceLocation?h.jsx("span",{className:"font-mono font-medium",children:(()=>{var Ae;const N=(Ae=de.sourceLocation.sources)==null?void 0:Ae[0];if(!N)return de.sourceLocation.summary;let W="unknown";if(N.file){const Ie=N.file.replace(/^\/\/localhost:\d+\//,""),He=Ie.split("/");W=He[He.length-1]||Ie}const se=N.line||0,ve=N.endLine||se+5;return`${W} (${se}-${ve})`})()}):h.jsx("span",{className:"font-medium",children:de.tagName.toLowerCase()}),de.targetPosition&&h.jsxs("span",{className:"text-[10px] opacity-70",children:[" ",Math.round(de.targetPosition.x),",",Math.round(de.targetPosition.y)]}),h.jsx("button",{onClick:N=>{N.stopPropagation(),nt(null),Ol(null),Yn(null);const W=Jn.current.get(l);W==null||W.send("clear-selection")},className:`ml-0.5 ${de.targetPosition?"hover:text-orange-900":"hover:text-blue-900"}`,children:h.jsx(qr,{size:12})})]}),Ne&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-purple-50 text-purple-700 rounded-lg text-xs border border-purple-200",children:[h.jsx(dL,{size:12}),h.jsx("span",{className:"font-medium",children:Ne.tagName.toLowerCase()}),h.jsx("button",{onClick:()=>{$e(null),Le(null);const N=Jn.current.get(l);N==null||N.send("clear-selection")},className:"ml-0.5 hover:text-purple-900",children:h.jsx(qr,{size:12})})]})]}),Re&&Re.label&&h.jsxs("div",{className:"px-3 pt-2 flex flex-wrap gap-1.5",children:[h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium ${he?"bg-gradient-to-r from-violet-500/20 to-purple-500/20 text-violet-300 border border-violet-500/30":"bg-gradient-to-r from-violet-50 to-purple-50 text-violet-700 border border-violet-200"}`,children:[Re.type==="code_edit"&&h.jsx(eS,{size:12}),Re.type==="code_create"&&h.jsx(vN,{size:12}),Re.type==="code_delete"&&h.jsx(Lf,{size:12}),Re.type==="code_explain"&&h.jsx(Q_,{size:12}),Re.type==="code_refactor"&&h.jsx(f0,{size:12}),Re.type==="file_operation"&&h.jsx(E1,{size:12}),Re.type==="ui_inspect"&&h.jsx(Vf,{size:12}),Re.type==="ui_modify"&&h.jsx(cv,{size:12}),Re.type==="ui_build"&&h.jsx(mL,{size:12}),Re.type==="research"&&h.jsx(lL,{size:12}),Re.type==="analyze"&&h.jsx(fL,{size:12}),Re.type==="compare"&&h.jsx(pL,{size:12}),Re.type==="plan"&&h.jsx(xL,{size:12}),Re.type==="document"&&h.jsx(D1e,{size:12}),Re.type==="test"&&h.jsx(_L,{size:12}),Re.type==="debug"&&h.jsx(uL,{size:12}),Re.type==="review"&&h.jsx(wL,{size:12}),Re.type==="deploy"&&h.jsx(rye,{size:12}),Re.type==="configure"&&h.jsx(Kq,{size:12}),Re.type==="question"&&h.jsx(gN,{size:12}),Re.type==="chat"&&h.jsx(jq,{size:12}),h.jsx("span",{children:Re.label})]}),(Tg=Re.secondaryLabels)==null?void 0:Tg.map((N,W)=>{var se,ve,Ae,Ie,He,bt,cn,Et,En,lt,_t,bn;return h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium ${he?"bg-gradient-to-r from-blue-500/15 to-cyan-500/15 text-blue-300 border border-blue-500/25":"bg-gradient-to-r from-blue-50 to-cyan-50 text-blue-600 border border-blue-200"}`,children:[((se=Re.secondaryTypes)==null?void 0:se[W])==="research"&&h.jsx(lL,{size:12}),((ve=Re.secondaryTypes)==null?void 0:ve[W])==="analyze"&&h.jsx(fL,{size:12}),((Ae=Re.secondaryTypes)==null?void 0:Ae[W])==="compare"&&h.jsx(pL,{size:12}),((Ie=Re.secondaryTypes)==null?void 0:Ie[W])==="plan"&&h.jsx(xL,{size:12}),((He=Re.secondaryTypes)==null?void 0:He[W])==="test"&&h.jsx(_L,{size:12}),((bt=Re.secondaryTypes)==null?void 0:bt[W])==="review"&&h.jsx(wL,{size:12}),((cn=Re.secondaryTypes)==null?void 0:cn[W])==="debug"&&h.jsx(uL,{size:12}),((Et=Re.secondaryTypes)==null?void 0:Et[W])==="question"&&h.jsx(gN,{size:12}),((En=Re.secondaryTypes)==null?void 0:En[W])==="ui_modify"&&h.jsx(cv,{size:12}),((lt=Re.secondaryTypes)==null?void 0:lt[W])==="ui_build"&&h.jsx(mL,{size:12}),((_t=Re.secondaryTypes)==null?void 0:_t[W])==="code_edit"&&h.jsx(eS,{size:12}),((bn=Re.secondaryTypes)==null?void 0:bn[W])==="code_create"&&h.jsx(vN,{size:12}),h.jsx("span",{children:N})]},W)})]}),(gt.length>0||rc.length>0)&&h.jsxs("div",{className:"px-3 pt-2 flex flex-wrap gap-2",children:[gt.map((N,W)=>h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs ${he?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[h.jsx(By,{size:12}),h.jsx("span",{className:"font-mono max-w-[200px] truncate",title:N.path,children:Vm(N)}),h.jsx("button",{onClick:()=>Xr(se=>se.filter((ve,Ae)=>Ae!==W)),className:"hover:opacity-70",children:h.jsx(qr,{size:12})})]},`file-${W}`)),rc.map(N=>h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs ${N.type==="exclude"?he?"bg-red-500/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200":he?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[h.jsx("span",{className:"font-medium uppercase",children:N.name}),h.jsx("button",{onClick:()=>Bc(W=>W.filter(se=>!(se.name===N.name&&se.type===N.type))),className:"hover:opacity-70",children:h.jsx(qr,{size:12})})]},`chip-${N.name}-${N.type}`))]}),Jr.length>0&&h.jsxs("div",{className:"px-3 pt-2 flex flex-wrap gap-2",children:[Jr.map((N,W)=>h.jsxs("div",{className:`relative group rounded-lg overflow-hidden border ${he?"border-neutral-500":"border-stone-300"}`,children:[h.jsx("img",{src:N,alt:`Attachment ${W+1}`,className:"h-16 w-16 object-cover"}),h.jsx("button",{onClick:()=>ps(W),className:"absolute top-0.5 right-0.5 p-0.5 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70",children:h.jsx(qr,{size:12})})]},W)),Jr.length<5&&h.jsxs("div",{className:`text-xs self-center ${he?"text-neutral-400":"text-stone-400"}`,children:[5-Jr.length," more"]})]}),Po&&h.jsxs("div",{className:"px-3 pt-3",children:[h.jsxs("div",{className:`text-xs font-mono mb-1 ${he?"text-neutral-400":"text-stone-500"}`,children:[Po.fileName," (",Po.startLine,"-",Po.endLine,")"]}),h.jsx("div",{onMouseMove:pE,onMouseLeave:()=>wo.hideHover(),children:h.jsx(uI,{code:Po.code,language:"tsx",showLineNumbers:!0,isDarkMode:he,children:h.jsx(BVe,{})})})]}),h.jsx(Got,{data:wo.uiState.hoverTooltip.data,position:wo.uiState.hoverTooltip.position,isVisible:wo.uiState.hoverTooltip.isVisible,onDismiss:()=>wo.hideHover()}),h.jsx(Zot,{items:wo.uiState.autocomplete.items,position:wo.uiState.autocomplete.position,isVisible:wo.uiState.autocomplete.isVisible,filterText:wo.uiState.autocomplete.filterText,onSelect:N=>wo.selectCompletion(N),onDismiss:()=>wo.hideAutocomplete()}),h.jsxs("div",{className:"relative",children:[h.jsx("textarea",{ref:mt,value:Fe,onChange:N=>zu(N.target.value),style:{overflowY:"auto"},onKeyDown:N=>{if(ft&&Sh.length>0){const W=Math.min(Sh.length-1,5);if(N.key==="ArrowDown")N.preventDefault(),vo(se=>Math.min(se+1,W));else if(N.key==="ArrowUp")N.preventDefault(),vo(se=>Math.max(se-1,0));else if(N.key==="Tab"||N.key==="Enter"){N.preventDefault();const se=Sh[zr];se&&(se.isDirectory?_h(se.path):iy(se.path))}else N.key==="Backspace"&&co.length>0&&Ro===""?(N.preventDefault(),yp()):N.key==="Escape"&&(Nt(!1),nr(""),Wo([]),qs(""),lc(u.projectPath||void 0),De(""));return}if(Vi&&Kd.length>0){const W=Math.min(Kd.length-1,5);if(N.key==="ArrowDown")N.preventDefault(),vo(se=>Math.min(se+1,W));else if(N.key==="ArrowUp")N.preventDefault(),vo(se=>Math.max(se-1,0));else if(N.key==="Tab"||N.key==="Enter"){N.preventDefault();const se=Kd[zr];se&&Fu(se.name)}else N.key==="Escape"&&(El(!1),ih(""),De(""));return}N.key==="Enter"&&(N.metaKey||N.ctrlKey)&&(N.preventDefault(),Zd(Fe),Xr([])),N.key==="Escape"&&(Nt(!1),El(!1))},placeholder:"Plan, @ for context, / for commands","data-control-id":"chat-input","data-control-type":"input",className:`w-full bg-transparent px-4 py-3 text-sm resize-none focus:outline-none min-h-[56px] ${he?"text-neutral-100 placeholder-neutral-400":""}`,rows:2}),ft&&Sn&&h.jsxs("div",{className:`absolute bottom-full left-0 mb-2 w-80 rounded-xl shadow-xl py-1 z-[100] max-h-[264px] overflow-y-auto ${he?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:[co.length>0&&h.jsxs("button",{onClick:yp,className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 border-b ${he?"hover:bg-neutral-600 text-neutral-300 border-neutral-600":"hover:bg-stone-50 text-stone-600 border-stone-100"}`,children:[h.jsx(w1,{size:14}),h.jsx("span",{children:".."}),h.jsx("span",{className:`text-xs truncate ${he?"text-neutral-500":"text-stone-400"}`,children:Tr.split("/").pop()})]}),Sh.length===0?h.jsx("div",{className:`px-3 py-2 text-sm ${he?"text-neutral-400":"text-stone-400"}`,children:hn.length===0?"Loading...":"No matching files"}):Sh.slice(0,6).map((N,W)=>h.jsxs("button",{onClick:()=>{N.isDirectory?_h(N.path):iy(N.path)},className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${W===zr?he?"bg-neutral-600":"bg-stone-100":""} ${he?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[N.isDirectory?h.jsx(E1,{size:14,className:he?"text-yellow-400":"text-yellow-600"}):h.jsx(ix,{size:14,className:he?"text-neutral-400":"text-stone-400"}),h.jsx("span",{className:`truncate ${N.isDirectory?"font-medium":""}`,children:N.name}),N.isDirectory&&h.jsx(Cf,{size:12,className:he?"text-neutral-500 ml-auto":"text-stone-400 ml-auto"})]},N.path))]}),Vi&&h.jsx("div",{className:`absolute bottom-full left-0 mb-2 w-64 rounded-xl shadow-xl py-1 z-[100] max-h-[264px] overflow-y-auto ${he?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:Kd.length===0?h.jsx("div",{className:`px-3 py-2 text-sm ${he?"text-neutral-400":"text-stone-400"}`,children:Nu.length===0?"Loading...":"No matching commands"}):Kd.slice(0,6).map((N,W)=>h.jsxs("button",{onClick:()=>Fu(N.name),className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${W===zr?he?"bg-neutral-600":"bg-stone-100":""} ${he?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[h.jsx(ld,{size:14}),"/",N.name]},N.name))}),ah&&h.jsx("div",{className:`absolute bottom-full left-0 mb-2 w-64 rounded-xl shadow-xl py-1 z-[100] max-h-[264px] overflow-y-auto ${he?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:bg.length===0?h.jsx("div",{className:`px-3 py-2 text-sm ${he?"text-neutral-400":"text-stone-400"}`,children:Yo.length===0?"No recent chips":"No matching chips"}):bg.slice(0,6).map((N,W)=>h.jsxs("button",{onClick:()=>Bu({...N,type:Gr}),className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${W===zr?he?"bg-neutral-600":"bg-stone-100":""} ${he?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[h.jsx("span",{className:`inline-flex items-center justify-center w-4 h-4 rounded text-[10px] font-bold ${Gr==="exclude"?he?"bg-red-500/30 text-red-300":"bg-red-100 text-red-600":he?"bg-blue-500/30 text-blue-300":"bg-blue-100 text-blue-600"}`,children:Gr==="exclude"?"-":"+"}),h.jsx("span",{className:"uppercase font-medium",children:N.name})]},`${N.type}-${N.name}`))})]}),h.jsxs("div",{className:`flex items-center justify-between px-2 py-1.5 border-t ${he?"border-neutral-600":"border-stone-100"}`,children:[h.jsxs("div",{className:"flex items-center gap-0.5",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>!wt&&Kn(!ks),className:`flex items-center gap-1.5 px-2 py-1 text-sm rounded-full border transition ${wt?he?"border-blue-500/50 bg-blue-500/10 text-blue-300 cursor-not-allowed":"border-blue-300 bg-blue-50 text-blue-600 cursor-not-allowed":he?"border-neutral-600 hover:bg-neutral-600 text-neutral-200 bg-neutral-700":"border-stone-200 hover:bg-stone-50 text-stone-700 bg-white"}`,title:wt?"Model locked while inspector is active":Ht.name,children:[h.jsx(Ht.Icon,{size:14,className:"flex-shrink-0"}),h.jsx("span",{className:"truncate max-w-[100px]",children:VV(Ht.name)}),wt?h.jsx(s2,{size:10,className:he?"text-blue-400":"text-blue-500"}):h.jsx(Df,{size:10,className:he?"text-neutral-400":"text-stone-400"})]}),ks&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-[99]",onClick:()=>Kn(!1)}),h.jsx("div",{className:`absolute bottom-full left-0 mb-2 w-56 rounded-xl shadow-xl py-1 z-[100] max-h-80 overflow-y-auto ${he?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:$d.filter(N=>N.isEnabled).map(N=>h.jsxs("button",{onClick:()=>{N.isAvailable&&(Ur({id:N.id,name:N.name,Icon:N.Icon}),Kn(!1))},className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${N.isAvailable?he?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50":"opacity-40 cursor-not-allowed"}`,disabled:!N.isAvailable,title:N.isProviderConfigured?N.name:"Configure provider API key in Settings",children:[h.jsx(N.Icon,{size:14,className:N.isAvailable?he?"text-neutral-400":"text-stone-500":"text-stone-300"}),h.jsx("span",{className:`flex-1 ${Ht.id===N.id?"font-medium":""}`,children:VV(N.name)}),Ht.id===N.id&&h.jsx(Ts,{size:12,className:"text-blue-600"})]},N.id))})]})]}),h.jsxs("div",{className:"relative","data-thinking-popover":!0,children:[h.jsx("button",{onClick:()=>!wt&&Lt(!_l),className:`p-2 rounded-lg transition-colors ${wt?he?"text-neutral-600 cursor-not-allowed":"text-stone-300 cursor-not-allowed":mi!=="off"?he?"bg-violet-500/20 text-violet-300 hover:bg-violet-500/30":"bg-violet-50 text-violet-700 hover:bg-violet-100":he?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:wt?"Thinking disabled while inspector is active":`Thinking: ${mi}`,children:h.jsx(f1,{size:18})}),_l&&!wt&&h.jsxs("div",{className:`absolute bottom-full right-0 mb-2 p-2 rounded-lg shadow-lg border min-w-[200px] z-50 ${he?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,children:[h.jsx("div",{className:`text-xs font-medium mb-2 px-2 ${he?"text-neutral-400":"text-stone-500"}`,children:"Extended Thinking"}),h.jsxs("div",{className:`text-xs px-2 py-1.5 mb-2 rounded ${he?"bg-neutral-700/50 text-neutral-400":"bg-stone-50 text-stone-500"}`,children:[h.jsx("span",{className:"font-medium",children:Ht.name}),Ht.id.includes("claude")||Ht.id.includes("opus")||Ht.id.includes("sonnet")||Ht.id.includes("haiku")?h.jsx("span",{className:"ml-1 text-emerald-500",children:"(native)"}):h.jsx("span",{className:"ml-1 text-amber-500",children:"(prompted)"})]}),["off","low","med","high","ultrathink"].map(N=>h.jsxs("button",{onClick:()=>{Ru(N),Lt(!1)},className:`w-full flex items-center gap-2 px-2 py-1.5 rounded text-sm transition ${mi===N?he?"bg-violet-500/20 text-violet-300":"bg-violet-50 text-violet-700":he?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-50 text-stone-700"}`,children:[N==="off"&&h.jsx(qr,{size:14}),N==="low"&&h.jsx(Q_,{size:14}),N==="med"&&h.jsx(f1,{size:14}),N==="high"&&h.jsx(B1e,{size:14}),N==="ultrathink"&&h.jsx(Obe,{size:14}),h.jsx("span",{className:"capitalize",children:N==="ultrathink"?"Ultra":N}),mi===N&&h.jsx(Ts,{size:14,className:"ml-auto"})]},N))]})]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>{sn(!wt),Ue(!1),Zt(!1)},className:`p-2 rounded-lg transition-colors ${wt?"bg-blue-100 text-blue-600":he?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Select Element",children:h.jsx(s2,{size:18})}),h.jsx("button",{onClick:()=>{Zt(!ht),sn(!1)},className:`p-2 rounded-lg transition-colors ${ht?"bg-orange-100 text-orange-600":he?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Move & Resize Element",children:h.jsx(o2,{size:18})}),h.jsx("button",{onClick:()=>yo(!Vs),className:`p-2 rounded-lg transition-colors ${Vs?"bg-yellow-100 text-yellow-600":he?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Attach Console Logs",children:h.jsx(ld,{size:18})}),h.jsx("input",{type:"file",ref:rt,className:"hidden",accept:"image/*",multiple:!0,onChange:Eo}),Je&&h.jsx("button",{onClick:()=>_e(!0),className:"relative w-8 h-8 rounded-lg overflow-hidden border-2 border-purple-500 hover:border-purple-600 transition-colors",title:"View captured screenshot",children:h.jsx("img",{src:Je,alt:"Screenshot preview",className:"w-full h-full object-cover"})}),h.jsx("button",{onClick:()=>{Ue(!ye),sn(!1)},className:`p-2 rounded-lg transition-colors ${ye?"bg-purple-100 text-purple-600":he?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Screenshot Element",children:h.jsx(dL,{size:18})}),ph==="streaming"&&h.jsx("button",{onClick:()=>{aE(),Nl(!1),Fd("idle"),xo(null),setStreamingContent("")},className:`p-1.5 rounded-lg transition-colors ${he?"bg-red-600 text-white hover:bg-red-500":"bg-red-500 text-white hover:bg-red-600"}`,title:"Stop generating",children:h.jsx(Gq,{size:12,fill:"currentColor"})}),ph==="idle"&&h.jsx("div",{className:`p-1.5 rounded-lg ${he?"bg-emerald-600/20 text-emerald-400":"bg-emerald-100 text-emerald-600"}`,title:"Connected (idle)",children:h.jsx(Ts,{size:12})}),h.jsx("button",{onClick:()=>Zd(Fe),disabled:!Fe.trim(),"data-control-id":"send-button","data-control-type":"button",className:`p-1.5 rounded-lg transition-colors ml-1 disabled:opacity-30 disabled:cursor-not-allowed ${he?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-800"}`,title:ph==="streaming"?"Queue message":"Send message",children:h.jsx(N3,{size:14})})]})]})]})})]}),cE&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>mh(!1)}),h.jsxs("div",{className:`fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 w-96 rounded-xl shadow-2xl p-5 ${he?"bg-neutral-800 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("h3",{className:`text-lg font-semibold mb-3 ${he?"text-neutral-100":"text-stone-900"}`,children:"Stash Changes"}),h.jsx("p",{className:`text-sm mb-4 ${he?"text-neutral-400":"text-stone-500"}`,children:'This will temporarily save your uncommitted changes. You can restore them later with "stash pop".'}),h.jsx("input",{type:"text",value:ip,onChange:N=>sg(N.target.value),placeholder:"Optional stash message...",className:`w-full text-sm px-3 py-2 rounded-lg border mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${he?"bg-neutral-700 border-neutral-600 text-neutral-100 placeholder-neutral-400":"bg-stone-50 border-stone-200"}`,autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&dg(ip),N.key==="Escape"&&(mh(!1),sg(""))}}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx("button",{onClick:()=>{mh(!1),sg("")},className:`px-4 py-2 text-sm rounded-lg transition ${he?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-100 text-stone-600"}`,children:"Cancel"}),h.jsx("button",{onClick:()=>dg(ip),className:`px-4 py-2 text-sm rounded-lg font-medium transition ${he?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-800"}`,children:"Stash Changes"})]})]})]}),hs&&hs.elements&&hs.elements.length>0&&h.jsx("div",{className:`absolute top-20 left-1/2 transform -translate-x-1/2 rounded-lg shadow-2xl px-4 py-3 z-50 max-w-3xl ${he?"bg-neutral-800 border border-neutral-700":"bg-white border border-neutral-200"}`,children:hs.count===1?h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${he?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:h.jsx(Ts,{size:16})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsxs("div",{className:`text-sm leading-relaxed ${he?"text-neutral-200":"text-neutral-800"}`,children:["Found ",h.jsx("code",{className:`px-1.5 py-0.5 rounded font-mono text-xs ${he?"bg-neutral-700 text-blue-400":"bg-blue-50 text-blue-700"}`,children:hs.elements[0].tagName}),hs.elements[0].text&&h.jsxs("span",{className:"ml-1",children:['"',hs.elements[0].text.substring(0,40),hs.elements[0].text.length>40?"...":"",'"']}),h.jsx("span",{className:`ml-1 ${he?"text-neutral-400":"text-neutral-500"}`,children:"- Is this correct?"})]})}),h.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[h.jsx("button",{onClick:()=>pp(!1),className:`px-4 py-2 text-sm rounded-lg font-medium transition ${he?"bg-neutral-700 hover:bg-neutral-600 text-neutral-200":"bg-neutral-100 hover:bg-neutral-200 text-neutral-700"}`,children:"No"}),h.jsx("button",{onClick:()=>pp(!0,1),className:`px-4 py-2 text-sm rounded-lg font-medium transition ${he?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:"Yes"})]})]}):h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${he?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:h.jsx(Ts,{size:16})}),h.jsxs("div",{className:`text-sm font-medium ${he?"text-neutral-200":"text-neutral-800"}`,children:["Found ",hs.count," elements - which one?"]}),h.jsx("button",{onClick:()=>pp(!1),className:`ml-auto px-3 py-1.5 text-sm rounded-lg font-medium transition ${he?"bg-neutral-700 hover:bg-neutral-600 text-neutral-200":"bg-neutral-100 hover:bg-neutral-200 text-neutral-700"}`,children:"Cancel"})]}),h.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-60 overflow-y-auto",children:hs.elements.map((N,W)=>h.jsxs("button",{onClick:()=>pp(!0,W+1),className:`flex items-center gap-3 p-2 rounded-lg text-left transition ${he?"hover:bg-neutral-700":"hover:bg-neutral-50"}`,children:[h.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold ${he?"bg-blue-500 text-white":"bg-blue-600 text-white"}`,children:W+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("code",{className:`text-xs font-mono ${he?"text-blue-400":"text-blue-700"}`,children:N.tagName}),N.text&&h.jsxs("span",{className:`ml-2 text-xs ${he?"text-neutral-400":"text-neutral-600"}`,children:['"',N.text.substring(0,50),N.text.length>50?"...":"",'"']})]})]},W))})]})}),((Er==null?void 0:Er.source)==="dom"||(Er==null?void 0:Er.source)==="code")&&h.jsxs("div",{className:`absolute bottom-24 left-1/2 transform -translate-x-1/2 flex items-center gap-2 rounded-full shadow-xl p-2 z-50 ${he?"bg-neutral-800 border border-neutral-700":"bg-white border border-neutral-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-1.5 px-2 text-xs font-mono",children:[h.jsxs("span",{className:"text-green-500",children:["+",Er.additions]}),h.jsxs("span",{className:"text-red-500",children:["-",Er.deletions]})]}),h.jsx("div",{className:`w-[1px] h-6 ${he?"bg-neutral-600":"bg-neutral-200"}`}),h.jsx("button",{onMouseDown:()=>{const N=Jn.current.get(l);Er.undoCode&&N&&(console.log("[Preview] Showing original"),N.executeJavaScript(Er.undoCode),lp(!0))},onMouseUp:()=>{const N=Jn.current.get(l);Er.code&&N&&(console.log("[Preview] Showing change"),N.executeJavaScript(Er.code),lp(!1))},onMouseLeave:()=>{if(!ap)return;const N=Jn.current.get(l);Er.code&&N&&(console.log("[Preview] Showing change (mouse leave)"),N.executeJavaScript(Er.code),lp(!1))},className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${he?"hover:bg-neutral-700 text-neutral-400":"hover:bg-neutral-100 text-neutral-600"}`,title:"Hold to see original",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),h.jsx("div",{className:`w-[1px] h-6 ${he?"bg-neutral-600":"bg-neutral-200"}`}),h.jsx("button",{onClick:zn?Bs:ca,className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${he?"hover:bg-red-900/20 text-neutral-400 hover:text-red-400":"hover:bg-red-50 text-neutral-600 hover:text-red-600"}`,title:"Reject (Esc)",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 6 6 18"}),h.jsx("path",{d:"m6 6 12 12"})]})}),h.jsx("button",{onClick:zn?Ch:Dl,disabled:Uc,className:`w-10 h-10 rounded-full flex items-center justify-center shadow-md transition-colors disabled:opacity-50 ${Uc?"cursor-not-allowed":he?"bg-neutral-100 text-neutral-900 hover:bg-white":"bg-neutral-900 text-white hover:bg-neutral-800"}`,title:"Accept (+Enter)",children:Uc?h.jsx(fs,{size:20,className:"animate-spin"}):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M20 6 9 17l-5-5"})})})]}),Ve&&Je&&h.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:()=>_e(!1),children:h.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] p-4",children:[h.jsx("button",{onClick:()=>_e(!1),className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",title:"Close preview",children:h.jsx(qr,{size:24})}),h.jsx("img",{src:Je,alt:"Screenshot preview",className:"max-w-full max-h-[90vh] rounded-lg shadow-2xl",onClick:N=>N.stopPropagation()})]})}),h.jsx("video",{ref:ic,className:"hidden",autoPlay:!0,playsInline:!0,muted:!0}),h.jsx("canvas",{ref:qc,className:"hidden"}),ug&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 bg-black/70 z-[100] backdrop-blur-md",onClick:gp}),h.jsx("div",{className:"fixed inset-0 z-[101] flex items-center justify-center pointer-events-none",children:jd.map((N,W)=>{const se=W===jd.length-1,ve=(jd.length-1-W)*350,Ae=(Ie,He)=>{var cn;if(He)return h.jsx(E1,{size:18,className:"text-blue-400"});const bt=((cn=Ie.split(".").pop())==null?void 0:cn.toLowerCase())||"";return["png","jpg","jpeg","gif","svg","webp","ico"].includes(bt)?h.jsx(gL,{size:18,className:"text-purple-400"}):["ts","tsx"].includes(bt)?h.jsx(hL,{size:18,className:"text-blue-400"}):["js","jsx"].includes(bt)?h.jsx(hL,{size:18,className:"text-yellow-400"}):["css","scss","less"].includes(bt)?h.jsx(cv,{size:18,className:"text-pink-400"}):["json","yaml","yml","toml"].includes(bt)?h.jsx(tS,{size:18,className:"text-orange-400"}):["md","txt","mdx"].includes(bt)?h.jsx(gR,{size:18,className:"text-neutral-400"}):["html","htm"].includes(bt)?h.jsx(Pf,{size:18,className:"text-orange-400"}):h.jsx(ix,{size:18,className:"text-neutral-500"})};return h.jsxs("div",{className:`absolute pointer-events-auto transition-all duration-500 ease-out backdrop-blur-xl border rounded-xl shadow-2xl overflow-hidden ${he?"bg-neutral-900/80 border-white/10":"bg-white/80 border-black/10"}`,style:{width:N.type==="image"?"auto":"480px",maxWidth:"90vw",maxHeight:"60vh",transform:se?"translateX(0) scale(1)":`translateX(-${ve}px) scale(0.95)`,opacity:se?1:.4,zIndex:W},children:[h.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 border-b ${he?"border-white/10":"border-black/5"}`,children:[h.jsx("button",{onClick:Wd,className:`p-1 rounded transition ${he?"hover:bg-white/10 text-neutral-400":"hover:bg-black/5 text-neutral-500"}`,children:h.jsx(w1,{size:18})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("div",{className:`text-sm font-medium truncate ${he?"text-white":"text-neutral-900"}`,children:N.title})}),h.jsx("button",{onClick:gp,className:`p-1 rounded transition ${he?"hover:bg-white/10 text-neutral-400":"hover:bg-black/5 text-neutral-500"}`,children:h.jsx(qr,{size:18})})]}),h.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:"calc(60vh - 44px)"},children:[N.type==="directory"&&N.items&&h.jsx("div",{className:"py-1",children:N.items.length===0?h.jsx("div",{className:`text-center py-6 text-sm ${he?"text-neutral-500":"text-neutral-400"}`,children:"Empty folder"}):N.items.map((Ie,He)=>h.jsxs("button",{onClick:()=>sy(He+1),className:`w-full flex items-center gap-3 px-3 py-2 text-left transition ${he?"hover:bg-white/5":"hover:bg-black/5"}`,children:[h.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center text-xs font-bold flex-shrink-0 ${he?"bg-blue-500/20 text-blue-400":"bg-blue-500/10 text-blue-600"}`,children:He+1}),h.jsx("div",{className:"flex-shrink-0",children:Ae(Ie.name,Ie.isDirectory)}),h.jsx("div",{className:`flex-1 min-w-0 text-sm truncate ${he?"text-white":"text-neutral-900"}`,children:Ie.name}),Ie.isDirectory&&h.jsx(Cf,{size:16,className:he?"text-neutral-600":"text-neutral-400"})]},Ie.path))}),N.type==="file"&&N.content&&h.jsx("pre",{className:`p-3 text-xs font-mono overflow-x-auto ${he?"text-neutral-300":"text-neutral-700"}`,children:N.content}),N.type==="image"&&h.jsx("div",{className:"p-3 flex items-center justify-center",children:h.jsx("img",{src:`file://${N.path}`,alt:N.title,className:"max-w-full max-h-[50vh] object-contain rounded"})})]})]},`${N.path}-${W}`)})}),h.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[102] pointer-events-none",children:h.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs backdrop-blur-xl ${he?"bg-white/10 text-white/60":"bg-black/10 text-black/60"}`,children:'"open 3" / "open App.tsx" / "open src folder" / "go back" / "close"'})})]}),h.jsx(_je,{isOpen:hk,onClose:()=>eE(!1),isDarkMode:he,onToggleDarkMode:Pu,settings:Mo,onSettingsChange:gk,projectPath:u==null?void 0:u.projectPath}),Hb&&h.jsx(Sje,{isDarkMode:he,onAccept:()=>{var W;const N=u==null?void 0:u.projectPath;N&&((W=window.electronAPI)!=null&&W.mgrep)&&window.electronAPI.mgrep.initialize(N),np(!1)},onDecline:()=>{np(!1)},onClose:()=>{localStorage.setItem("mgrep-onboarding-seen","true"),np(!1)}}),h.jsx(zit,{patch:Mu[Ld]||null,onApprove:Sk,onReject:hy,onEdit:py,projectPath:(u==null?void 0:u.projectPath)||"default",isOpen:tE,totalPatches:Mu.length,currentPatchIndex:Ld}),h.jsx(Vft,{errors:g,isVisible:f,isDarkMode:Gm,onToggle:()=>m(!f),onRemoveError:v,onSearchForSolution:x,onClearAll:y}),g.length>0&&h.jsxs("button",{className:"fixed top-12 right-6 z-40 px-3 py-1.5 rounded-full text-xs font-semibold transition-all hover:scale-105",onClick:()=>m(!f),style:{backgroundColor:g.some(N=>N.isCritical)?"#ef4444":"#f59e0b",color:"white"},title:`${g.length} error${g.length!==1?"s":""} detected`,children:[g.length>0&&g.some(N=>N.solution)&&""," ",g.length]})]})]})}const Jw=w.createContext(null);function tht({children:e}){const t=w.useRef(new Map),n=w.useRef(new Map),[,r]=w.useState({}),s=w.useCallback(g=>{t.current.set(g.id,g),r({})},[]),o=w.useCallback(g=>{t.current.delete(g),r({})},[]),i=w.useCallback(g=>t.current.get(g),[]),a=w.useCallback(()=>Array.from(t.current.values()),[]),l=w.useCallback((g,y={})=>{const v=t.current.get(g);if(!(v!=null&&v.ref.current))return;const x=v.ref.current,{color:E="#3b82f6",duration:T=3e3,pulse:k=!0,label:I,glow:O=!0}=y,M={outline:x.style.outline,boxShadow:x.style.boxShadow,position:x.style.position,zIndex:x.style.zIndex,transform:x.style.transform};x.style.outline=`2px solid ${E}`,x.style.boxShadow=O?`0 0 20px ${E}80, 0 0 40px ${E}40`:"none",x.style.position="relative",x.style.zIndex="10000",k&&x.animate([{transform:"scale(1)",boxShadow:`0 0 20px ${E}80`},{transform:"scale(1.02)",boxShadow:`0 0 30px ${E}`},{transform:"scale(1)",boxShadow:`0 0 20px ${E}80`}],{duration:600,iterations:Math.ceil(T/600),easing:"ease-in-out"});let P=null;I&&(P=document.createElement("div"),P.className="cluso-control-label",P.textContent=I,P.style.cssText=`
        position: absolute;
        top: -28px;
        left: 50%;
        transform: translateX(-50%);
        background: ${E};
        color: white;
        padding: 4px 10px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: 600;
        white-space: nowrap;
        z-index: 10001;
        pointer-events: none;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      `,x.style.position="relative",x.appendChild(P));const j=n.current.get(g);j&&clearTimeout(j);const V=setTimeout(()=>{x.style.outline=M.outline,x.style.boxShadow=M.boxShadow,x.style.position=M.position,x.style.zIndex=M.zIndex,x.style.transform=M.transform,P&&P.remove(),n.current.delete(g)},T);n.current.set(g,V)},[]),c=w.useCallback(g=>{const y=n.current.get(g);y&&(clearTimeout(y),n.current.delete(g));const v=t.current.get(g);if(v!=null&&v.ref.current){const x=v.ref.current;x.style.outline="",x.style.boxShadow="",x.style.zIndex="";const E=x.querySelector(".cluso-control-label");E&&E.remove()}},[]),u=w.useCallback(()=>{n.current.forEach((g,y)=>{clearTimeout(g),c(y)}),n.current.clear()},[c]),f=w.useCallback((g,y)=>{var T;const v=t.current.get(g);if(!(v!=null&&v.ref.current))return!1;const x=v.ref.current,E=y||((T=v.actions)==null?void 0:T[0])||"click";switch(E){case"click":x.click();break;case"focus":x.focus();break;case"blur":x.blur();break;default:x.dispatchEvent(new CustomEvent(`cluso:${E}`,{bubbles:!0}))}return!0},[]),m=w.useCallback((g,y)=>{const v=t.current.get(g);v&&(v.state={...v.state,...y},r({}))},[]);return h.jsx(Jw.Provider,{value:{elements:t.current,register:s,unregister:o,getElement:i,getAllElements:a,highlight:l,clearHighlight:c,clearAllHighlights:u,triggerAction:f,setElementState:m},children:e})}const nht=w.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,children:s,...o},i)=>{const a=w.useRef(null),l=i||a,c=w.useContext(Jw);return w.useEffect(()=>{if(c&&l.current)return c.register({id:e,ref:l,type:"button",label:t,description:n,group:r,actions:["click","focus"]}),()=>c.unregister(e)},[c,e,t,n,r,l]),h.jsx("button",{ref:l,"data-control-id":e,"data-control-type":"button",...o,children:s})});nht.displayName="ControllableButton";const rht=w.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,...s},o)=>{const i=w.useRef(null),a=o||i,l=w.useContext(Jw);return w.useEffect(()=>{if(l&&a.current)return l.register({id:e,ref:a,type:"input",label:t,description:n,group:r,actions:["focus","clear","type"],state:{value:a.current.value}}),()=>l.unregister(e)},[l,e,t,n,r,a]),h.jsx("input",{ref:a,"data-control-id":e,"data-control-type":"input",...s})});rht.displayName="ControllableInput";const sht=w.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,...s},o)=>{const i=w.useRef(null),a=o||i,l=w.useContext(Jw);return w.useEffect(()=>{if(l&&a.current)return l.register({id:e,ref:a,type:"checkbox",label:t,description:n,group:r,actions:["toggle","check","uncheck"],state:{checked:a.current.checked}}),()=>l.unregister(e)},[l,e,t,n,r,a]),h.jsx("input",{ref:a,type:"checkbox","data-control-id":e,"data-control-type":"checkbox",...s})});sht.displayName="ControllableCheckbox";const oht=w.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,controlType:s="generic",controlActions:o=["click","focus"],as:i="div",children:a,...l},c)=>{const u=w.useRef(null),f=c||u,m=w.useContext(Jw);w.useEffect(()=>{if(m&&f.current)return m.register({id:e,ref:f,type:s,label:t,description:n,group:r,actions:o}),()=>m.unregister(e)},[m,e,t,n,r,s,o,f]);const g=i;return h.jsx(g,{ref:f,"data-control-id":e,"data-control-type":s,...l,children:a})});oht.displayName="Controllable";/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const iht="0.5.16",Vle=`bippy-${iht}`,GV=Object.defineProperty,aht=Object.prototype.hasOwnProperty,kv=()=>{},qle=e=>{try{Function.prototype.toString.call(e).indexOf("^_^")>-1&&setTimeout(()=>{throw Error("React is running in production mode, but dead code elimination has not been applied. Read how to correctly configure React for production: https://reactjs.org/link/perf-use-production-build")})}catch{}},lht=(e=Xw())=>"getFiberRoots"in e;let Gle=!1,x_;const WV=(e=Xw())=>Gle?!0:(typeof e.inject=="function"&&(x_=e.inject.toString()),!!(x_!=null&&x_.includes("(injected)"))),tR=new Set,iw=new Set,cht=e=>{let t=new Map,n=0,r={_instrumentationIsActive:!1,_instrumentationSource:Vle,checkDCE:qle,hasUnsupportedRendererAttached:!1,inject(s){let o=++n;return t.set(o,s),iw.add(s),r._instrumentationIsActive||(r._instrumentationIsActive=!0,tR.forEach(i=>i())),o},on:kv,onCommitFiberRoot:kv,onCommitFiberUnmount:kv,onPostCommitFiberRoot:kv,renderers:t,supportsFiber:!0,supportsFlight:!0};try{GV(globalThis,"__REACT_DEVTOOLS_GLOBAL_HOOK__",{configurable:!0,enumerable:!0,get(){return r},set(i){if(i&&typeof i=="object"){let a=r.renderers;r=i,a.size>0&&(a.forEach((l,c)=>{iw.add(l),i.renderers.set(c,l)}),nR(e))}}});let s=window.hasOwnProperty,o=!1;GV(window,"hasOwnProperty",{configurable:!0,value:function(...i){try{if(!o&&i[0]==="__REACT_DEVTOOLS_GLOBAL_HOOK__")return globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__=void 0,o=!0,-0}catch{}return s.apply(this,i)},writable:!0})}catch{nR(e)}return r},nR=e=>{try{let t=globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t)return;if(!t._instrumentationSource){t.checkDCE=qle,t.supportsFiber=!0,t.supportsFlight=!0,t.hasUnsupportedRendererAttached=!1,t._instrumentationSource=Vle,t._instrumentationIsActive=!1;let n=lht(t);if(n||(t.on=kv),t.renderers.size){t._instrumentationIsActive=!0,tR.forEach(o=>o());return}let r=t.inject,s=WV(t);s&&!n&&(Gle=!0,t.inject({scheduleRefresh(){}})&&(t._instrumentationIsActive=!0)),t.inject=o=>{let i=r(o);return iw.add(o),s&&t.renderers.set(i,o),t._instrumentationIsActive=!0,tR.forEach(a=>a()),i}}(t.renderers.size||t._instrumentationIsActive||WV())&&(e==null||e())}catch{}},uht=()=>aht.call(globalThis,"__REACT_DEVTOOLS_GLOBAL_HOOK__"),Xw=e=>uht()?(nR(e),globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__):cht(e),dht=()=>{var e,t;return!!(typeof window<"u"&&((e=window.document)!=null&&e.createElement||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))},fht=()=>{try{dht()&&Xw()}catch{}};/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */fht();/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const Wle=0,Yle=1,Kle=5,Zle=11,hht=13,pht=14,Jle=15,mht=16,ght=19,Xle=26,Qle=27,bht=28,yht=30,vht=e=>{switch(e.tag){case Kle:case Xle:case Qle:return!0;default:return typeof e.type=="string"}},ece=e=>{switch(e.tag){case Yle:case Zle:case Wle:case pht:case Jle:return!0;default:return!1}};function tce(e,t,n=!1){if(!e)return null;let r=t(e);if(r instanceof Promise)return(async()=>{if(await r===!0)return e;let o=n?e.return:e.child;for(;o;){let i=await rce(o,t,n);if(i)return i;o=n?null:o.sibling}return null})();if(r===!0)return e;let s=n?e.return:e.child;for(;s;){let o=nce(s,t,n);if(o)return o;s=n?null:s.sibling}return null}const nce=(e,t,n=!1)=>{if(!e)return null;if(t(e)===!0)return e;let r=n?e.return:e.child;for(;r;){let s=nce(r,t,n);if(s)return s;r=n?null:r.sibling}return null},rce=async(e,t,n=!1)=>{if(!e)return null;if(await t(e)===!0)return e;let r=n?e.return:e.child;for(;r;){let s=await rce(r,t,n);if(s)return s;r=n?null:r.sibling}return null},sce=e=>{let t=e;return typeof t=="function"?t:typeof t=="object"&&t?sce(t.type||t.render):null},YV=e=>{let t=e;if(typeof t=="string")return t;if(typeof t!="function"&&!(typeof t=="object"&&t))return null;let n=t.displayName||t.name||null;if(n)return n;let r=sce(t);return r&&(r.displayName||r.name)||null},oce=e=>{let t=e.alternate;if(!t)return e;if(t.actualStartTime&&e.actualStartTime)return t.actualStartTime>e.actualStartTime?t:e;for(let n of xht){let r=tce(n.current,s=>{if(s===e)return!0});if(r)return r}return e},v4=e=>{var n,r,s,o;let t=Xw();for(let i of t.renderers.values())try{let a=(n=i.findFiberByHostInstance)==null?void 0:n.call(i,e);if(a)return a}catch{}if(typeof e=="object"&&e){if("_reactRootContainer"in e)return(o=(s=(r=e._reactRootContainer)==null?void 0:r._internalRoot)==null?void 0:s.current)==null?void 0:o.child;for(let i in e)if(i.startsWith("__reactContainer$")||i.startsWith("__reactInternalInstance$")||i.startsWith("__reactFiber"))return e[i]||null}return null},xht=new Set;/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wht=Object.create,ice=Object.defineProperty,Eht=Object.getOwnPropertyDescriptor,_ht=Object.getOwnPropertyNames,Sht=Object.getPrototypeOf,Tht=Object.prototype.hasOwnProperty,Cht=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),kht=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(var s=_ht(t),o=0,i=s.length,a;o<i;o++)a=s[o],!Tht.call(e,a)&&a!==n&&ice(e,a,{get:(l=>t[l]).bind(null,a),enumerable:!(r=Eht(t,a))||r.enumerable});return e},Aht=(e,t,n)=>(n=e==null?{}:wht(Sht(e)),kht(ice(n,"default",{value:e,enumerable:!0}),e));const Nht=()=>{let e=Xw();for(let t of[...Array.from(iw),...Array.from(e.renderers.values())]){let n=t.currentDispatcherRef;if(n&&typeof n=="object")return"H"in n?n.H:n.current}return null},KV=e=>{for(let t of iw){let n=t.currentDispatcherRef;n&&typeof n=="object"&&("H"in n?n.H=e:n.current=e)}},vf=e=>`
    in ${e}`,Iht=(e,t)=>{let n=vf(e);return t&&(n+=` (at ${t})`),n};let sN=!1;const oN=(e,t)=>{if(!e||sN)return"";let n=Error.prepareStackTrace;Error.prepareStackTrace=void 0,sN=!0;let r=Nht();KV(null);let s=console.error,o=console.warn;console.error=()=>{},console.warn=()=>{};try{let l={DetermineComponentFrameRoot(){let m;try{if(t){let g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(y){m=y}Reflect.construct(e,[],g)}else{try{g.call()}catch(y){m=y}e.call(g.prototype)}}else{try{throw Error()}catch(y){m=y}let g=e();g&&typeof g.catch=="function"&&g.catch(()=>{})}}catch(g){if(g instanceof Error&&m instanceof Error&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";let c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c!=null&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});let[u,f]=l.DetermineComponentFrameRoot();if(u&&f){let m=u.split(`
`),g=f.split(`
`),y=0,v=0;for(;y<m.length&&!m[y].includes("DetermineComponentFrameRoot");)y++;for(;v<g.length&&!g[v].includes("DetermineComponentFrameRoot");)v++;if(y===m.length||v===g.length)for(y=m.length-1,v=g.length-1;y>=1&&v>=0&&m[y]!==g[v];)v--;for(;y>=1&&v>=0;y--,v--)if(m[y]!==g[v]){if(y!==1||v!==1)do if(y--,v--,v<0||m[y]!==g[v]){let x=`
${m[y].replace(" at new "," at ")}`,E=YV(e);return E&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",E)),x}while(y>=1&&v>=0);break}}}finally{sN=!1,Error.prepareStackTrace=n,KV(r),console.error=s,console.warn=o}let i=e?YV(e):"";return i?vf(i):""},Rht=(e,t)=>{let n=e.tag,r="";switch(n){case bht:r=vf("Activity");break;case Yle:r=oN(e.type,!0);break;case Zle:r=oN(e.type.render,!1);break;case Wle:case Jle:r=oN(e.type,!1);break;case Kle:case Xle:case Qle:r=vf(e.type);break;case mht:r=vf("Lazy");break;case hht:r=e.child!==t&&t!==null?vf("Suspense Fallback"):vf("Suspense");break;case ght:r=vf("SuspenseList");break;case yht:r=vf("ViewTransition");break;default:return""}return r},Mht=e=>{try{let t="",n=e,r=null;do{t+=Rht(n,r);let s=n._debugInfo;if(s&&Array.isArray(s))for(let o=s.length-1;o>=0;o--){let i=s[o];typeof i.name=="string"&&(t+=Iht(i.name,i.env))}r=n,n=n.return}while(n);return t}catch(t){return t instanceof Error?`
Error generating stack: ${t.message}
${t.stack}`:""}},Oht=e=>{let t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;let n=e;if(!n)return"";Error.prepareStackTrace=t,n.startsWith(`Error: react-stack-top-frame
`)&&(n=n.slice(29));let r=n.indexOf(`
`);if(r!==-1&&(n=n.slice(r+1)),r=Math.max(n.indexOf("react_stack_bottom_frame"),n.indexOf("react-stack-bottom-frame")),r!==-1&&(r=n.lastIndexOf(`
`,r)),r!==-1)n=n.slice(0,r);else return"";return n},Dht=/(^|@)\S+:\d+/,ace=/^\s*at .*(\S+:\d+|\(native\))/m,Pht=/^(eval@)?(\[native code\])?$/,lce=(e,t)=>{if((t==null?void 0:t.includeInElement)!==!1){let n=e.split(`
`),r=[];for(let s of n)if(/^\s*at\s+/.test(s)){let o=ZV(s,void 0)[0];o&&r.push(o)}else if(/^\s*in\s+/.test(s)){let o=s.replace(/^\s*in\s+/,"").replace(/\s*\(at .*\)$/,"");r.push({function:o,raw:s})}else if(s.match(Dht)){let o=JV(s,void 0)[0];o&&r.push(o)}return I9(r,t)}return e.match(ace)?ZV(e,t):JV(e,t)},cce=e=>{if(!e.includes(":"))return[e,void 0,void 0];let t=/(.+?)(?::(\d+))?(?::(\d+))?$/,n=t.exec(e.replace(/[()]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},I9=(e,t)=>t&&t.slice!=null?Array.isArray(t.slice)?e.slice(t.slice[0],t.slice[1]):e.slice(0,t.slice):e,ZV=(e,t)=>I9(e.split(`
`).filter(r=>!!r.match(ace)),t).map(r=>{let s=r;s.includes("(eval ")&&(s=s.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));let o=s.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),i=o.match(/ (\(.+\)$)/);o=i?o.replace(i[0],""):o;let a=cce(i?i[1]:o),l=i&&o||void 0,c=["eval","<anonymous>"].includes(a[0])?void 0:a[0];return{function:l,file:c,line:a[1]?+a[1]:void 0,col:a[2]?+a[2]:void 0,raw:s}}),JV=(e,t)=>I9(e.split(`
`).filter(r=>!r.match(Pht)),t).map(r=>{let s=r;if(s.includes(" > eval")&&(s=s.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),!s.includes("@")&&!s.includes(":"))return{function:s};{let o=/(([^\n\r"\u2028\u2029]*".[^\n\r"\u2028\u2029]*"[^\n\r@\u2028\u2029]*(?:@[^\n\r"\u2028\u2029]*"[^\n\r@\u2028\u2029]*)*(?:[\n\r\u2028\u2029][^@]*)?)?[^@]*)@/,i=s.match(o),a=i&&i[1]?i[1]:void 0,l=cce(s.replace(o,""));return{function:a,file:l[0],line:l[1]?+l[1]:void 0,col:l[2]?+l[2]:void 0,raw:s}}});var Lht=Cht((e,t)=>{(function(n,r){typeof e=="object"&&t!==void 0?r(e):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.sourcemapCodec={}))})(void 0,function(n){let r=44,s=59,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(64),a=new Uint8Array(128);for(let z=0;z<o.length;z++){let H=o.charCodeAt(z);i[z]=H,a[H]=z}function l(z,H){let F=0,G=0,X=0;do{let ee=z.next();X=a[ee],F|=(X&31)<<G,G+=5}while(X&32);let J=F&1;return F>>>=1,J&&(F=-2147483648|-F),H+F}function c(z,H,F){let G=H-F;G=G<0?-G<<1|1:G<<1;do{let X=G&31;G>>>=5,G>0&&(X|=32),z.write(i[X])}while(G>0);return H}function u(z,H){return z.pos>=H?!1:z.peek()!==r}let f=1024*16,m=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(z){return Buffer.from(z.buffer,z.byteOffset,z.byteLength).toString()}}:{decode(z){let H="";for(let F=0;F<z.length;F++)H+=String.fromCharCode(z[F]);return H}};class g{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(f)}write(H){let{buffer:F}=this;F[this.pos++]=H,this.pos===f&&(this.out+=m.decode(F),this.pos=0)}flush(){let{buffer:H,out:F,pos:G}=this;return G>0?F+m.decode(H.subarray(0,G)):F}}class y{constructor(H){this.pos=0,this.buffer=H}next(){return this.buffer.charCodeAt(this.pos++)}peek(){return this.buffer.charCodeAt(this.pos)}indexOf(H){let{buffer:F,pos:G}=this,X=F.indexOf(H,G);return X===-1?F.length:X}}let v=[];function x(z){let{length:H}=z,F=new y(z),G=[],X=[],J=0;for(;F.pos<H;F.pos++){J=l(F,J);let ee=l(F,0);if(!u(F,H)){let Q=X.pop();Q[2]=J,Q[3]=ee;continue}let re=l(F,0),ie=l(F,0),Z=ie&1,te=Z?[J,ee,0,0,re,l(F,0)]:[J,ee,0,0,re],oe=v;if(u(F,H)){oe=[];do{let Q=l(F,0);oe.push(Q)}while(u(F,H))}te.vars=oe,G.push(te),X.push(te)}return G}function E(z){let H=new g;for(let F=0;F<z.length;)F=T(z,F,H,[0]);return H.flush()}function T(z,H,F,G){let X=z[H],{0:J,1:ee,2:re,3:ie,4:Z,vars:te}=X;H>0&&F.write(r),G[0]=c(F,J,G[0]),c(F,ee,0),c(F,Z,0);let oe=X.length===6?1:0;c(F,oe,0),X.length===6&&c(F,X[5],0);for(let Q of te)c(F,Q,0);for(H++;H<z.length;){let Q=z[H],{0:Te,1:ge}=Q;if(Te>re||Te===re&&ge>=ie)break;H=T(z,H,F,G)}return F.write(r),G[0]=c(F,re,G[0]),c(F,ie,0),H}function k(z){let{length:H}=z,F=new y(z),G=[],X=[],J=0,ee=0,re=0,ie=0,Z=0,te=0,oe=0,Q=0;do{let Te=F.indexOf(";"),ge=0;for(;F.pos<Te;F.pos++){if(ge=l(F,ge),!u(F,Te)){let nt=X.pop();nt[2]=J,nt[3]=ge;continue}let Ce=l(F,0),fe=Ce&1,Fe=Ce&2,De=Ce&4,Re=null,tt=v,de;if(fe){let nt=l(F,ee);re=l(F,ee===nt?re:0),ee=nt,de=[J,ge,0,0,nt,re]}else de=[J,ge,0,0];if(de.isScope=!!De,Fe){let nt=ie,ot=Z;ie=l(F,ie);let Ut=nt===ie;Z=l(F,Ut?Z:0),te=l(F,Ut&&ot===Z?te:0),Re=[ie,Z,te]}if(de.callsite=Re,u(F,Te)){tt=[];do{oe=J,Q=ge;let nt=l(F,0),ot;if(nt<-1){ot=[[l(F,0)]];for(let Ut=-1;Ut>nt;Ut--){let Vt=oe;oe=l(F,oe),Q=l(F,oe===Vt?Q:0);let Dt=l(F,0);ot.push([Dt,oe,Q])}}else ot=[[nt]];tt.push(ot)}while(u(F,Te))}de.bindings=tt,G.push(de),X.push(de)}J++,F.pos=Te+1}while(F.pos<H);return G}function I(z){if(z.length===0)return"";let H=new g;for(let F=0;F<z.length;)F=O(z,F,H,[0,0,0,0,0,0,0]);return H.flush()}function O(z,H,F,G){let X=z[H],{0:J,1:ee,2:re,3:ie,isScope:Z,callsite:te,bindings:oe}=X;G[0]<J?(M(F,G[0],J),G[0]=J,G[1]=0):H>0&&F.write(r),G[1]=c(F,X[1],G[1]);let Q=(X.length===6?1:0)|(te?2:0)|(Z?4:0);if(c(F,Q,0),X.length===6){let{4:Te,5:ge}=X;Te!==G[2]&&(G[3]=0),G[2]=c(F,Te,G[2]),G[3]=c(F,ge,G[3])}if(te){let{0:Te,1:ge,2:Ce}=X.callsite;Te===G[4]?ge!==G[5]&&(G[6]=0):(G[5]=0,G[6]=0),G[4]=c(F,Te,G[4]),G[5]=c(F,ge,G[5]),G[6]=c(F,Ce,G[6])}if(oe)for(let Te of oe){Te.length>1&&c(F,-Te.length,0);let ge=Te[0][0];c(F,ge,0);let Ce=J,fe=ee;for(let Fe=1;Fe<Te.length;Fe++){let De=Te[Fe];Ce=c(F,De[1],Ce),fe=c(F,De[2],fe),c(F,De[0],0)}}for(H++;H<z.length;){let Te=z[H],{0:ge,1:Ce}=Te;if(ge>re||ge===re&&Ce>=ie)break;H=O(z,H,F,G)}return G[0]<re?(M(F,G[0],re),G[0]=re,G[1]=0):F.write(r),G[1]=c(F,ie,G[1]),H}function M(z,H,F){do z.write(s);while(++H<F)}function P(z){let{length:H}=z,F=new y(z),G=[],X=0,J=0,ee=0,re=0,ie=0;do{let Z=F.indexOf(";"),te=[],oe=!0,Q=0;for(X=0;F.pos<Z;){let Te;X=l(F,X),X<Q&&(oe=!1),Q=X,u(F,Z)?(J=l(F,J),ee=l(F,ee),re=l(F,re),u(F,Z)?(ie=l(F,ie),Te=[X,J,ee,re,ie]):Te=[X,J,ee,re]):Te=[X],te.push(Te),F.pos++}oe||j(te),G.push(te),F.pos=Z+1}while(F.pos<=H);return G}function j(z){z.sort(V)}function V(z,H){return z[0]-H[0]}function U(z){let H=new g,F=0,G=0,X=0,J=0;for(let ee=0;ee<z.length;ee++){let re=z[ee];if(ee>0&&H.write(s),re.length===0)continue;let ie=0;for(let Z=0;Z<re.length;Z++){let te=re[Z];Z>0&&H.write(r),ie=c(H,te[0],ie),te.length!==1&&(F=c(H,te[1],F),G=c(H,te[2],G),X=c(H,te[3],X),te.length!==4&&(J=c(H,te[4],J)))}}return H.flush()}n.decode=P,n.decodeGeneratedRanges=k,n.decodeOriginalScopes=x,n.encode=U,n.encodeGeneratedRanges=I,n.encodeOriginalScopes=E,Object.defineProperty(n,"__esModule",{value:!0})})}),uce=Aht(Lht());const dce=/^[a-zA-Z][a-zA-Z\d+\-.]*:/,$ht=/^data:application\/json[^,]+base64,/,Fht=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)|(?:\/\*[@#][ \t]+sourceMappingURL=([^*]+?)[ \t]*(?:\*\/)[ \t]*$)/,fce=typeof WeakRef<"u",lv=new Map,w_=new Map,Bht=e=>fce&&e instanceof WeakRef,XV=(e,t,n,r)=>{if(n<0||n>=e.length)return null;let s=e[n];if(!s||s.length===0)return null;let o=null;for(let u of s)if(u[0]<=r)o=u;else break;if(!o||o.length<4)return null;let[,i,a,l]=o;if(i===void 0||a===void 0||l===void 0)return null;let c=t[i];return c?{columnNumber:l,fileName:c,lineNumber:a+1}:null},zht=(e,t,n)=>{if(e.sections){let r=null;for(let i of e.sections)if(t>i.offset.line||t===i.offset.line&&n>=i.offset.column)r=i;else break;if(!r)return null;let s=t-r.offset.line,o=t===r.offset.line?n-r.offset.column:n;return XV(r.map.mappings,r.map.sources,s,o)}return XV(e.mappings,e.sources,t-1,n)},jht=(e,t)=>{let n=t.split(`
`),r;for(let o=n.length-1;o>=0&&!r;o--){let i=n[o].match(Fht);i&&(r=i[1]||i[2])}if(!r)return null;let s=dce.test(r);if(!($ht.test(r)||s||r.startsWith("/"))){let o=e.split("/");o[o.length-1]=r,r=o.join("/")}return r},Uht=e=>({file:e.file,mappings:(0,uce.decode)(e.mappings),names:e.names,sourceRoot:e.sourceRoot,sources:e.sources,sourcesContent:e.sourcesContent,version:3}),Hht=e=>{let t=e.sections.map(({map:r,offset:s})=>({map:{...r,mappings:(0,uce.decode)(r.mappings)},offset:s})),n=new Set;for(let r of t)for(let s of r.map.sources)n.add(s);return{file:e.file,mappings:[],names:[],sections:t,sourceRoot:void 0,sources:Array.from(n),sourcesContent:void 0,version:3}},QV=e=>{if(!e)return!1;let t=e.trim();if(!t)return!1;let n=t.match(dce);if(!n)return!0;let r=n[0].toLowerCase();return r==="http:"||r==="https:"},Vht=async(e,t=fetch)=>{if(!QV(e))return null;let n;try{n=await(await t(e)).text()}catch{return null}if(!n)return null;let r=jht(e,n);if(!r||!QV(r))return null;try{let s=await t(r),o=await s.json();return"sections"in o?Hht(o):Uht(o)}catch{return null}},qht=async(e,t=!0,n)=>{if(t&&lv.has(e)){let o=lv.get(e);if(o==null)return null;if(Bht(o)){let i=o.deref();if(i)return i;lv.delete(e)}else return o}if(t&&w_.has(e))return w_.get(e);let r=Vht(e,n);t&&w_.set(e,r);let s=await r;return t&&w_.delete(e),t&&(s===null?lv.set(e,null):lv.set(e,fce?new WeakRef(s):s)),s},eq=/^[a-zA-Z][a-zA-Z\d+\-.]*:/,Ght=["rsc://","file:///","webpack://","node:","turbopack://","metro://"],tq="about://React/",Wht=["<anonymous>","eval",""],Yht=/\.(jsx|tsx|ts|js)$/,Kht=/(\.min|bundle|chunk|vendor|vendors|runtime|polyfill|polyfills)\.(js|mjs|cjs)$|(chunk|bundle|vendor|vendors|runtime|polyfill|polyfills|framework|app|main|index)[-_.][A-Za-z0-9_-]{4,}\.(js|mjs|cjs)$|[\da-f]{8,}\.(js|mjs|cjs)$|[-_.][\da-f]{20,}\.(js|mjs|cjs)$|\/dist\/|\/build\/|\/.next\/|\/out\/|\/node_modules\/|\.webpack\.|\.vite\.|\.turbopack\./i,Zht=/^\?[\w~.\-]+(?:=[^&#]*)?(?:&[\w~.\-]+(?:=[^&#]*)?)*$/,Jht=e=>{var t;return e._debugStack instanceof Error&&typeof((t=e._debugStack)==null?void 0:t.stack)=="string"},Xht=e=>{let t=e._debugSource;return t?typeof t=="object"&&!!t&&"fileName"in t&&typeof t.fileName=="string"&&"lineNumber"in t&&typeof t.lineNumber=="number":!1},Qht=async(e,t=!0,n)=>{if(Xht(e))return e._debugSource||null;let r=hce(e),s=await pce(r,1,t,n);return!s||s.length===0?null:s[0]},hce=e=>Jht(e)?Oht(e._debugStack.stack):Mht(e),e0t=async(e,t=!0,n)=>{let r=await pce(e,1,t,n);return!r||r.length===0?null:r[0]},pce=async(e,t=1,n=!0,r)=>{let s=lce(e,{slice:t??1}),o=[];for(let i of s){if(!(i!=null&&i.file))continue;let a=await qht(i.file,n,r);if(a&&typeof i.line=="number"&&typeof i.col=="number"){let l=zht(a,i.line,i.col);if(l){o.push(l);continue}}o.push({fileName:i.file,lineNumber:i.line,columnNumber:i.col,functionName:i.function})}return o},Y_=e=>{if(!e||Wht.includes(e))return"";let t=e;if(t.startsWith(tq)){let r=t.slice(tq.length),s=r.indexOf("/"),o=r.indexOf(":");t=s!==-1&&(o===-1||s<o)?r.slice(s+1):r}for(let r of Ght)if(t.startsWith(r)){t=t.slice(r.length),r==="file:///"&&(t=`/${t.replace(/^\/+/,"")}`);break}if(eq.test(t)){let r=t.match(eq);r&&(t=t.slice(r[0].length))}let n=t.indexOf("?");if(n!==-1){let r=t.slice(n);Zht.test(r)&&(t=t.slice(0,n))}return t},t0t=e=>{let t=Y_(e);return!(!t||!Yht.test(t)||Kht.test(t))},n0t=async(e,t=!0,n)=>{let r=tce(e,i=>{if(ece(i))return!0},!0);if(r){let i=await Qht(r,t,n);if(i!=null&&i.fileName){let a=Y_(i.fileName);if(t0t(a))return{fileName:a,lineNumber:i.lineNumber,columnNumber:i.columnNumber,functionName:i.functionName}}}let s=lce(hce(e),{includeInElement:!1}),o=null;for(;s.length;){let i=s.pop();if(!i||!i.raw||!i.file)continue;let a=await e0t(i.raw,t,n);if(a)return{fileName:Y_(a.fileName),lineNumber:a.lineNumber,columnNumber:a.columnNumber,functionName:a.functionName};o={fileName:Y_(i.file),lineNumber:i.line,columnNumber:i.col,functionName:i.function}}return o},mce=async(e,t=!0,n)=>{let r=v4(e);if(!r||!vht(r))return null;let s=oce(r);return s?n0t(s,t,n):null};async function r0t(e){try{Yr.sourcePatch.log("Attempting to get source for element:",e.tagName,e.id||e.className);const t=await mce(e);if(Yr.sourcePatch.log("Source info from bippy:",t),!t||!t.fileName)return Yr.sourcePatch.warn("No source info found"),null;const n={name:t.functionName||"Unknown",file:t.fileName,line:t.lineNumber||0,column:t.columnNumber||0},r=`${n.file}:${n.line}`;return{sources:[n],summary:r}}catch(t){return Yr.sourcePatch.error("Error getting source location:",t),null}}function s0t(e){var t;try{const n=v4(e);if(!n)return null;let s=oce(n);for(;s;){if(ece(s)){const o=o0t(s);if(o)return{name:o,type:((t=s.type)==null?void 0:t.name)||"Component"}}s=s.return}return null}catch(n){return console.error("[SourceLocation] Error getting fiber info:",n),null}}function o0t(e){try{return e.type&&typeof e.type=="function"?e.type.name||null:e.type&&typeof e.type=="object"&&"displayName"in e.type?e.type.displayName||null:e.elementType&&typeof e.elementType=="function"&&e.elementType.name||null}catch{return null}}function i0t(){window.__SOURCE_LOCATION__={getElementSourceLocation:r0t,getElementFiberInfo:s0t},console.log("[SourceLocation] Tracking initialized"),console.log("[SourceLocation] API available at window.__SOURCE_LOCATION__"),console.log("[SourceLocation] Testing bippy availability:",{getFiberFromHostInstance:typeof v4,getSourceFromHostInstance:typeof mce}),setTimeout(()=>{const e=document.getElementById("root");if(e){const t=v4(e);console.log("[SourceLocation] React root fiber test:",!!t)}},1e3)}i0t();window.addEventListener("error",e=>{var t,n,r;((t=e.message)!=null&&t.includes("dynamically imported module")||(n=e.message)!=null&&n.includes("Failed to fetch")||(r=e.message)!=null&&r.includes("Loading chunk"))&&(console.error("[GlobalErrorHandler] Module loading failed:",e.message),e.preventDefault(),console.warn("[GlobalErrorHandler] A component failed to load. Try refreshing the page."))});window.addEventListener("unhandledrejection",e=>{var n;const t=((n=e.reason)==null?void 0:n.message)||String(e.reason);(t!=null&&t.includes("dynamically imported module")||t!=null&&t.includes("Failed to fetch")||t!=null&&t.includes("Loading chunk"))&&(console.error("[GlobalErrorHandler] Async module loading failed:",t),e.preventDefault())});const gce=document.getElementById("root");if(!gce)throw new Error("Could not find root element to mount to");const a0t=Mue.createRoot(gce);a0t.render(h.jsx(Me.StrictMode,{children:h.jsx(Uge,{children:h.jsx(tht,{children:h.jsx(eht,{})})})}));const l0t=Object.freeze(Object.defineProperty({__proto__:null,Mermaid:Fie},Symbol.toStringTag,{value:"Module"}));export{Tu as C,Ust as D,me as _,L0t as a,gVe as b,LVe as c,Cm as g,h as j,Ls as k,w as r,br as u};
//# sourceMappingURL=index-i_QzSbUc.js.map
