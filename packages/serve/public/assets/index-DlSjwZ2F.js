const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./angular-html-CU67Zn6k.js","./html-GMplVEZG.js","./javascript-wDzz0qaB.js","./css-DPfMkruS.js","./angular-ts-BwZT4LLn.js","./scss-OYdSNvt2.js","./apl-dKokRX4l.js","./xml-sdJ4AIDG.js","./java-CylS5w8V.js","./json-Cp-IABpG.js","./astro-CbQHKStN.js","./typescript-BPQ3VLAy.js","./postcss-CXtECtnM.js","./tsx-COt5Ahok.js","./blade-DVc8C-J4.js","./html-derivative-BFtXZ54Q.js","./sql-BLtJtn59.js","./bsl-BO_Y6i37.js","./sdbl-DVxCFoDh.js","./cairo-KRGpt6FW.js","./python-B6aJPvgy.js","./cobol-nwyudZeR.js","./coffee-Ch7k5sss.js","./cpp-CofmeUqb.js","./regexp-CDVJQ6XC.js","./glsl-DplSGwfg.js","./c-BIGW1oBm.js","./crystal-tKQVLTB8.js","./shellscript-Yzrsuije.js","./edge-BkV0erSs.js","./elixir-CDX3lj18.js","./elm-DbKCFpqz.js","./erb-BOJIQeun.js","./ruby-BvKwtOVI.js","./haml-B8DHNrY2.js","./graphql-ChdNCCLP.js","./jsx-g9-lgVsj.js","./lua-BbnMAYS6.js","./yaml-Buea-lGh.js","./erlang-DsQrWhSR.js","./markdown-Cvjx9yec.js","./fortran-fixed-form-BZjJHVRy.js","./fortran-free-form-D22FLkUw.js","./fsharp-CXgrBDvD.js","./gdresource-B7Tvp0Sc.js","./gdshader-DkwncUOv.js","./gdscript-DTMYz4Jt.js","./git-commit-F4YmCXRG.js","./diff-D97Zzqfu.js","./git-rebase-r7XF79zn.js","./glimmer-js-Rg0-pVw9.js","./glimmer-ts-U6CK756n.js","./hack-CaT9iCJl.js","./handlebars-BL8al0AC.js","./http-jrhK8wxY.js","./hurl-irOxFIW8.js","./csv-fuZLfV_i.js","./hxml-Bvhsp5Yf.js","./haxe-CzTSHFRz.js","./jinja-4LBKfQ-Z.js","./jison-wvAkD_A8.js","./julia-C8NyazO9.js","./r-DiinP2Uv.js","./latex-BdAV_C_H.js","./tex-CxkMU7Pf.js","./liquid-DYVedYrR.js","./marko-CPi9NSCl.js","./less-B1dDrJ26.js","./mdc-DUICxH0z.js","./nginx-DknmC5AR.js","./nim-CVrawwO9.js","./perl-C0TMdlhV.js","./php-CDn_0X-4.js","./pug-CGlum2m_.js","./qml-3beO22l8.js","./razor-CE9lU5zL.js","./csharp-K5feNrxe.js","./rst-B0xPkSld.js","./cmake-D1j8_8rp.js","./sas-cz2c8ADy.js","./shaderlab-Dg9Lc6iA.js","./hlsl-D3lLCCz7.js","./shellsession-BADoaaVG.js","./soy-Brmx7dQM.js","./sparql-rVzFXLq3.js","./turtle-BsS91CYL.js","./stata-BH5u7GGu.js","./svelte-3Dk4HxPD.js","./templ-W15q3VgB.js","./go-Dn2_MT6a.js","./ts-tags-zn1MmPIZ.js","./twig-CO9l9SDP.js","./vue-DnHKYNfI.js","./vue-html-CChd_i61.js","./vue-vine-8moa0y9V.js","./stylus-BEDo0Tqx.js","./xsl-CtQFsRM5.js","./katex-Cj-o_lxR.css"])))=>i.map(i=>d[i]);
var Wce=Object.defineProperty;var Yce=(e,t,n)=>t in e?Wce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ze=(e,t,n)=>Yce(e,typeof t!="symbol"?t+"":t,n);function Kce(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function km(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var x5={exports:{}},Ly={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sD;function Zce(){if(sD)return Ly;sD=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,o){var i=null;if(o!==void 0&&(i=""+o),s.key!==void 0&&(i=""+s.key),"key"in s){o={};for(var a in s)a!=="key"&&(o[a]=s[a])}else o=s;return s=o.ref,{$$typeof:e,type:r,key:i,ref:s!==void 0?s:null,props:o}}return Ly.Fragment=t,Ly.jsx=n,Ly.jsxs=n,Ly}var oD;function Jce(){return oD||(oD=1,x5.exports=Zce()),x5.exports}var h=Jce(),w5={exports:{}},ir={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iD;function Xce(){if(iD)return ir;iD=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),i=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;function g(te){return te===null||typeof te!="object"?null:(te=m&&te[m]||te["@@iterator"],typeof te=="function"?te:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function _(te,oe,Q){this.props=te,this.context=oe,this.refs=w,this.updater=Q||y}_.prototype.isReactComponent={},_.prototype.setState=function(te,oe){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,oe,"setState")},_.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function S(){}S.prototype=_.prototype;function k(te,oe,Q){this.props=te,this.context=oe,this.refs=w,this.updater=Q||y}var R=k.prototype=new S;R.constructor=k,v(R,_.prototype),R.isPureReactComponent=!0;var O=Array.isArray;function M(){}var P={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function q(te,oe,Q){var Te=Q.ref;return{$$typeof:e,type:te,key:oe,ref:Te!==void 0?Te:null,props:Q}}function U(te,oe){return q(te.type,oe,te.props)}function z(te){return typeof te=="object"&&te!==null&&te.$$typeof===e}function H(te){var oe={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(Q){return oe[Q]})}var F=/\/+/g;function W(te,oe){return typeof te=="object"&&te!==null&&te.key!=null?H(""+te.key):oe.toString(36)}function X(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(M,M):(te.status="pending",te.then(function(oe){te.status==="pending"&&(te.status="fulfilled",te.value=oe)},function(oe){te.status==="pending"&&(te.status="rejected",te.reason=oe)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function J(te,oe,Q,Te,ge){var Ce=typeof te;(Ce==="undefined"||Ce==="boolean")&&(te=null);var he=!1;if(te===null)he=!0;else switch(Ce){case"bigint":case"string":case"number":he=!0;break;case"object":switch(te.$$typeof){case e:case t:he=!0;break;case u:return he=te._init,J(he(te._payload),oe,Q,Te,ge)}}if(he)return ge=ge(te),he=Te===""?"."+W(te,0):Te,O(ge)?(Q="",he!=null&&(Q=he.replace(F,"$&/")+"/"),J(ge,oe,Q,"",function(Re){return Re})):ge!=null&&(z(ge)&&(ge=U(ge,Q+(ge.key==null||te&&te.key===ge.key?"":(""+ge.key).replace(F,"$&/")+"/")+he)),oe.push(ge)),1;he=0;var Fe=Te===""?".":Te+":";if(O(te))for(var De=0;De<te.length;De++)Te=te[De],Ce=Fe+W(Te,De),he+=J(Te,oe,Q,Ce,ge);else if(De=g(te),typeof De=="function")for(te=De.call(te),De=0;!(Te=te.next()).done;)Te=Te.value,Ce=Fe+W(Te,De++),he+=J(Te,oe,Q,Ce,ge);else if(Ce==="object"){if(typeof te.then=="function")return J(X(te),oe,Q,Te,ge);throw oe=String(te),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return he}function ee(te,oe,Q){if(te==null)return te;var Te=[],ge=0;return J(te,Te,"","",function(Ce){return oe.call(Q,Ce,ge++)}),Te}function re(te){if(te._status===-1){var oe=te._result;oe=oe(),oe.then(function(Q){(te._status===0||te._status===-1)&&(te._status=1,te._result=Q)},function(Q){(te._status===0||te._status===-1)&&(te._status=2,te._result=Q)}),te._status===-1&&(te._status=0,te._result=oe)}if(te._status===1)return te._result.default;throw te._result}var ie=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)},Z={map:ee,forEach:function(te,oe,Q){ee(te,function(){oe.apply(this,arguments)},Q)},count:function(te){var oe=0;return ee(te,function(){oe++}),oe},toArray:function(te){return ee(te,function(oe){return oe})||[]},only:function(te){if(!z(te))throw Error("React.Children.only expected to receive a single React element child.");return te}};return ir.Activity=f,ir.Children=Z,ir.Component=_,ir.Fragment=n,ir.Profiler=s,ir.PureComponent=k,ir.StrictMode=r,ir.Suspense=l,ir.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ir.__COMPILER_RUNTIME={__proto__:null,c:function(te){return P.H.useMemoCache(te)}},ir.cache=function(te){return function(){return te.apply(null,arguments)}},ir.cacheSignal=function(){return null},ir.cloneElement=function(te,oe,Q){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var Te=v({},te.props),ge=te.key;if(oe!=null)for(Ce in oe.key!==void 0&&(ge=""+oe.key),oe)!j.call(oe,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&oe.ref===void 0||(Te[Ce]=oe[Ce]);var Ce=arguments.length-2;if(Ce===1)Te.children=Q;else if(1<Ce){for(var he=Array(Ce),Fe=0;Fe<Ce;Fe++)he[Fe]=arguments[Fe+2];Te.children=he}return q(te.type,ge,Te)},ir.createContext=function(te){return te={$$typeof:i,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:o,_context:te},te},ir.createElement=function(te,oe,Q){var Te,ge={},Ce=null;if(oe!=null)for(Te in oe.key!==void 0&&(Ce=""+oe.key),oe)j.call(oe,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(ge[Te]=oe[Te]);var he=arguments.length-2;if(he===1)ge.children=Q;else if(1<he){for(var Fe=Array(he),De=0;De<he;De++)Fe[De]=arguments[De+2];ge.children=Fe}if(te&&te.defaultProps)for(Te in he=te.defaultProps,he)ge[Te]===void 0&&(ge[Te]=he[Te]);return q(te,Ce,ge)},ir.createRef=function(){return{current:null}},ir.forwardRef=function(te){return{$$typeof:a,render:te}},ir.isValidElement=z,ir.lazy=function(te){return{$$typeof:u,_payload:{_status:-1,_result:te},_init:re}},ir.memo=function(te,oe){return{$$typeof:c,type:te,compare:oe===void 0?null:oe}},ir.startTransition=function(te){var oe=P.T,Q={};P.T=Q;try{var Te=te(),ge=P.S;ge!==null&&ge(Q,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(M,ie)}catch(Ce){ie(Ce)}finally{oe!==null&&Q.types!==null&&(oe.types=Q.types),P.T=oe}},ir.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ir.use=function(te){return P.H.use(te)},ir.useActionState=function(te,oe,Q){return P.H.useActionState(te,oe,Q)},ir.useCallback=function(te,oe){return P.H.useCallback(te,oe)},ir.useContext=function(te){return P.H.useContext(te)},ir.useDebugValue=function(){},ir.useDeferredValue=function(te,oe){return P.H.useDeferredValue(te,oe)},ir.useEffect=function(te,oe){return P.H.useEffect(te,oe)},ir.useEffectEvent=function(te){return P.H.useEffectEvent(te)},ir.useId=function(){return P.H.useId()},ir.useImperativeHandle=function(te,oe,Q){return P.H.useImperativeHandle(te,oe,Q)},ir.useInsertionEffect=function(te,oe){return P.H.useInsertionEffect(te,oe)},ir.useLayoutEffect=function(te,oe){return P.H.useLayoutEffect(te,oe)},ir.useMemo=function(te,oe){return P.H.useMemo(te,oe)},ir.useOptimistic=function(te,oe){return P.H.useOptimistic(te,oe)},ir.useReducer=function(te,oe,Q){return P.H.useReducer(te,oe,Q)},ir.useRef=function(te){return P.H.useRef(te)},ir.useState=function(te){return P.H.useState(te)},ir.useSyncExternalStore=function(te,oe,Q){return P.H.useSyncExternalStore(te,oe,Q)},ir.useTransition=function(){return P.H.useTransition()},ir.version="19.2.0",ir}var aD;function aw(){return aD||(aD=1,w5.exports=Xce()),w5.exports}var x=aw();const Me=km(x),tR=Kce({__proto__:null,default:Me},[x]);var E5={exports:{}},$y={},_5={exports:{}},S5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lD;function Qce(){return lD||(lD=1,(function(e){function t(J,ee){var re=J.length;J.push(ee);e:for(;0<re;){var ie=re-1>>>1,Z=J[ie];if(0<s(Z,ee))J[ie]=ee,J[re]=Z,re=ie;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ee=J[0],re=J.pop();if(re!==ee){J[0]=re;e:for(var ie=0,Z=J.length,te=Z>>>1;ie<te;){var oe=2*(ie+1)-1,Q=J[oe],Te=oe+1,ge=J[Te];if(0>s(Q,re))Te<Z&&0>s(ge,Q)?(J[ie]=ge,J[Te]=re,ie=Te):(J[ie]=Q,J[oe]=re,ie=oe);else if(Te<Z&&0>s(ge,re))J[ie]=ge,J[Te]=re,ie=Te;else break e}}return ee}function s(J,ee){var re=J.sortIndex-ee.sortIndex;return re!==0?re:J.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,f=null,m=3,g=!1,y=!1,v=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function R(J){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=J)r(c),ee.sortIndex=ee.expirationTime,t(l,ee);else break;ee=n(c)}}function O(J){if(v=!1,R(J),!y)if(n(l)!==null)y=!0,M||(M=!0,H());else{var ee=n(c);ee!==null&&X(O,ee.startTime-J)}}var M=!1,P=-1,j=5,q=-1;function U(){return w?!0:!(e.unstable_now()-q<j)}function z(){if(w=!1,M){var J=e.unstable_now();q=J;var ee=!0;try{e:{y=!1,v&&(v=!1,S(P),P=-1),g=!0;var re=m;try{t:{for(R(J),f=n(l);f!==null&&!(f.expirationTime>J&&U());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,m=f.priorityLevel;var Z=ie(f.expirationTime<=J);if(J=e.unstable_now(),typeof Z=="function"){f.callback=Z,R(J),ee=!0;break t}f===n(l)&&r(l),R(J)}else r(l);f=n(l)}if(f!==null)ee=!0;else{var te=n(c);te!==null&&X(O,te.startTime-J),ee=!1}}break e}finally{f=null,m=re,g=!1}ee=void 0}}finally{ee?H():M=!1}}}var H;if(typeof k=="function")H=function(){k(z)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,W=F.port2;F.port1.onmessage=z,H=function(){W.postMessage(null)}}else H=function(){_(z,0)};function X(J,ee){P=_(function(){J(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(J){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var re=m;m=ee;try{return J()}finally{m=re}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(J,ee){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var re=m;m=J;try{return ee()}finally{m=re}},e.unstable_scheduleCallback=function(J,ee,re){var ie=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ie+re:ie):re=ie,J){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=re+Z,J={id:u++,callback:ee,priorityLevel:J,startTime:re,expirationTime:Z,sortIndex:-1},re>ie?(J.sortIndex=re,t(c,J),n(l)===null&&J===n(c)&&(v?(S(P),P=-1):v=!0,X(O,re-ie))):(J.sortIndex=Z,t(l,J),y||g||(y=!0,M||(M=!0,H()))),J},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(J){var ee=m;return function(){var re=m;m=ee;try{return J.apply(this,arguments)}finally{m=re}}}})(S5)),S5}var cD;function eue(){return cD||(cD=1,_5.exports=Qce()),_5.exports}var T5={exports:{}},pa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uD;function tue(){if(uD)return pa;uD=1;var e=aw();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(l,c,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:f==null?null:""+f,children:l,containerInfo:c,implementation:u}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return pa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,pa.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return o(l,c,null,u)},pa.flushSync=function(l){var c=i.T,u=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=c,r.p=u,r.d.f()}},pa.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},pa.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},pa.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:m,fetchPriority:g}):u==="script"&&r.d.X(l,{crossOrigin:f,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},pa.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},pa.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},pa.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},pa.requestFormReset=function(l){r.d.r(l)},pa.unstable_batchedUpdates=function(l,c){return l(c)},pa.useFormState=function(l,c,u){return i.H.useFormState(l,c,u)},pa.useFormStatus=function(){return i.H.useHostTransitionStatus()},pa.version="19.2.0",pa}var dD;function zV(){if(dD)return T5.exports;dD=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),T5.exports=tue(),T5.exports}var fD;function nue(){if(fD)return $y;fD=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=eue(),t=aw(),n=zV();function r(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function o(d){var p=d,b=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(b=p.return),d=p.return;while(d)}return p.tag===3?b:null}function i(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function a(d){if(d.tag===31){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function l(d){if(o(d)!==d)throw Error(r(188))}function c(d){var p=d.alternate;if(!p){if(p=o(d),p===null)throw Error(r(188));return p!==d?null:d}for(var b=d,E=p;;){var A=b.return;if(A===null)break;var I=A.alternate;if(I===null){if(E=A.return,E!==null){b=E;continue}break}if(A.child===I.child){for(I=A.child;I;){if(I===b)return l(A),d;if(I===E)return l(A),p;I=I.sibling}throw Error(r(188))}if(b.return!==E.return)b=A,E=I;else{for(var K=!1,ae=A.child;ae;){if(ae===b){K=!0,b=A,E=I;break}if(ae===E){K=!0,E=A,b=I;break}ae=ae.sibling}if(!K){for(ae=I.child;ae;){if(ae===b){K=!0,b=I,E=A;break}if(ae===E){K=!0,E=I,b=A;break}ae=ae.sibling}if(!K)throw Error(r(189))}}if(b.alternate!==E)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?d:p}function u(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d;for(d=d.child;d!==null;){if(p=u(d),p!==null)return p;d=d.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),k=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function H(d){return d===null||typeof d!="object"?null:(d=z&&d[z]||d["@@iterator"],typeof d=="function"?d:null)}var F=Symbol.for("react.client.reference");function W(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===F?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case v:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case M:return"SuspenseList";case q:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case y:return"Portal";case k:return d.displayName||"Context";case S:return(d._context.displayName||"Context")+".Consumer";case R:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case P:return p=d.displayName||null,p!==null?p:W(d.type)||"Memo";case j:p=d._payload,d=d._init;try{return W(d(p))}catch{}}return null}var X=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ie=[],Z=-1;function te(d){return{current:d}}function oe(d){0>Z||(d.current=ie[Z],ie[Z]=null,Z--)}function Q(d,p){Z++,ie[Z]=d.current,d.current=p}var Te=te(null),ge=te(null),Ce=te(null),he=te(null);function Fe(d,p){switch(Q(Ce,p),Q(ge,d),Q(Te,null),p.nodeType){case 9:case 11:d=(d=p.documentElement)&&(d=d.namespaceURI)?kO(d):0;break;default:if(d=p.tagName,p=p.namespaceURI)p=kO(p),d=AO(p,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}oe(Te),Q(Te,d)}function De(){oe(Te),oe(ge),oe(Ce)}function Re(d){d.memoizedState!==null&&Q(he,d);var p=Te.current,b=AO(p,d.type);p!==b&&(Q(ge,d),Q(Te,b))}function tt(d){ge.current===d&&(oe(Te),oe(ge)),he.current===d&&(oe(he),My._currentValue=re)}var fe,nt;function ot(d){if(fe===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);fe=p&&p[1]||"",nt=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+d+nt}var Ht=!1;function qt(d,p){if(!d||Ht)return"";Ht=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Xe){var Ke=Xe}Reflect.construct(d,[],dt)}else{try{dt.call()}catch(Xe){Ke=Xe}d.call(dt.prototype)}}else{try{throw Error()}catch(Xe){Ke=Xe}(dt=d())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Xe){if(Xe&&Ke&&typeof Xe.stack=="string")return[Xe.stack,Ke.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=E.DetermineComponentFrameRoot(),K=I[0],ae=I[1];if(K&&ae){var ke=K.split(`
`),Ye=ae.split(`
`);for(A=E=0;E<ke.length&&!ke[E].includes("DetermineComponentFrameRoot");)E++;for(;A<Ye.length&&!Ye[A].includes("DetermineComponentFrameRoot");)A++;if(E===ke.length||A===Ye.length)for(E=ke.length-1,A=Ye.length-1;1<=E&&0<=A&&ke[E]!==Ye[A];)A--;for(;1<=E&&0<=A;E--,A--)if(ke[E]!==Ye[A]){if(E!==1||A!==1)do if(E--,A--,0>A||ke[E]!==Ye[A]){var st=`
`+ke[E].replace(" at new "," at ");return d.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",d.displayName)),st}while(1<=E&&0<=A);break}}}finally{Ht=!1,Error.prepareStackTrace=b}return(b=d?d.displayName||d.name:"")?ot(b):""}function Pt(d,p){switch(d.tag){case 26:case 27:case 5:return ot(d.type);case 16:return ot("Lazy");case 13:return d.child!==p&&p!==null?ot("Suspense Fallback"):ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return qt(d.type,!1);case 11:return qt(d.type.render,!1);case 1:return qt(d.type,!0);case 31:return ot("Activity");default:return""}}function tn(d){try{var p="",b=null;do p+=Pt(d,b),b=d,d=d.return;while(d);return p}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var xt=Object.prototype.hasOwnProperty,pe=e.unstable_scheduleCallback,Ne=e.unstable_cancelCallback,$e=e.unstable_shouldYield,Je=e.unstable_requestPaint,Le=e.unstable_now,Ve=e.unstable_getCurrentPriorityLevel,_e=e.unstable_ImmediatePriority,Y=e.unstable_UserBlockingPriority,L=e.unstable_NormalPriority,B=e.unstable_LowPriority,ce=e.unstable_IdlePriority,we=e.log,ze=e.unstable_setDisableYieldValue,Be=null,ut=null;function ln(d){if(typeof we=="function"&&ze(d),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(Be,d)}catch{}}var jt=Math.clz32?Math.clz32:Wa,fn=Math.log,an=Math.LN2;function Wa(d){return d>>>=0,d===0?32:31-(fn(d)/an|0)|0}var An=256,er=262144,wt=4194304;function on(d){var p=d&42;if(p!==0)return p;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function ye(d,p,b){var E=d.pendingLanes;if(E===0)return 0;var A=0,I=d.suspendedLanes,K=d.pingedLanes;d=d.warmLanes;var ae=E&134217727;return ae!==0?(E=ae&~I,E!==0?A=on(E):(K&=ae,K!==0?A=on(K):b||(b=ae&~d,b!==0&&(A=on(b))))):(ae=E&~I,ae!==0?A=on(ae):K!==0?A=on(K):b||(b=E&~d,b!==0&&(A=on(b)))),A===0?0:p!==0&&p!==A&&(p&I)===0&&(I=A&-A,b=p&-p,I>=b||I===32&&(b&4194048)!==0)?p:A}function Ue(d,p){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&p)===0}function ht(d,p){switch(d){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jt(){var d=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),d}function mr(d){for(var p=[],b=0;31>b;b++)p.push(d);return p}function Kn(d,p){d.pendingLanes|=p,p!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Rt(d,p,b,E,A,I){var K=d.pendingLanes;d.pendingLanes=b,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=b,d.entangledLanes&=b,d.errorRecoveryDisabledLanes&=b,d.shellSuspendCounter=0;var ae=d.entanglements,ke=d.expirationTimes,Ye=d.hiddenUpdates;for(b=K&~b;0<b;){var st=31-jt(b),dt=1<<st;ae[st]=0,ke[st]=-1;var Ke=Ye[st];if(Ke!==null)for(Ye[st]=null,st=0;st<Ke.length;st++){var Xe=Ke[st];Xe!==null&&(Xe.lane&=-536870913)}b&=~dt}E!==0&&zt(d,E,0),I!==0&&A===0&&d.tag!==0&&(d.suspendedLanes|=I&~(K&~p))}function zt(d,p,b){d.pendingLanes|=p,d.suspendedLanes&=~p;var E=31-jt(p);d.entangledLanes|=p,d.entanglements[E]=d.entanglements[E]|1073741824|b&261930}function hn(d,p){var b=d.entangledLanes|=p;for(d=d.entanglements;b;){var E=31-jt(b),A=1<<E;A&p|d[E]&p&&(d[E]|=p),b&=~A}}function In(d,p){var b=p&-p;return b=(b&42)!==0?1:Lr(b),(b&(d.suspendedLanes|p))!==0?0:b}function Lr(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function xo(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Gs(){var d=ee.p;return d!==0?d:(d=window.event,d===void 0?32:JO(d.type))}function wo(d,p){var b=ee.p;try{return ee.p=d,p()}finally{ee.p=b}}var Xr=Math.random().toString(36).slice(2),gr="__reactFiber$"+Xr,Do="__reactProps$"+Xr,at="__reactContainer$"+Xr,rt="__reactEvents$"+Xr,pt="__reactListeners$"+Xr,Vt="__reactHandles$"+Xr,Ur="__reactResources$"+Xr,As="__reactMarker$"+Xr;function Zn(d){delete d[gr],delete d[Do],delete d[rt],delete d[pt],delete d[Vt]}function Hr(d){var p=d[gr];if(p)return p;for(var b=d.parentNode;b;){if(p=b[at]||b[gr]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(d=PO(d);d!==null;){if(b=d[gr])return b;d=PO(d)}return p}d=b,b=d.parentNode}return null}function ua(d){if(d=d[gr]||d[at]){var p=d.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return d}return null}function kt(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d.stateNode;throw Error(r(33))}function Fn(d){var p=d[Ur];return p||(p=d[Ur]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function mt(d){d[As]=!0}var Qr=new Set,Po={};function rr(d,p){ft(d,p),ft(d+"Capture",p)}function ft(d,p){for(Po[d]=p,d=0;d<p.length;d++)Qr.add(p[d])}var Nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pn={},wn={};function kr(d){return xt.call(wn,d)?!0:xt.call(pn,d)?!1:Nt.test(d)?wn[d]=!0:(pn[d]=!0,!1)}function Ws(d,p,b){if(kr(p))if(b===null)d.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":d.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){d.removeAttribute(p);return}}d.setAttribute(p,""+b)}}function ho(d,p,b){if(b===null)d.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(p);return}d.setAttribute(p,""+b)}}function Zo(d,p,b,E){if(E===null)d.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(b);return}d.setAttributeNS(p,b,""+E)}}function zr(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Eo(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Vm(d,p,b){var E=Object.getOwnPropertyDescriptor(d.constructor.prototype,p);if(!d.hasOwnProperty(p)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var A=E.get,I=E.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return A.call(this)},set:function(K){b=""+K,I.call(this,K)}}),Object.defineProperty(d,p,{enumerable:E.enumerable}),{getValue:function(){return b},setValue:function(K){b=""+K},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function Mu(d){if(!d._valueTracker){var p=Eo(d)?"checked":"value";d._valueTracker=Vm(d,p,""+d[p])}}function X0(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var b=p.getValue(),E="";return d&&(E=Eo(d)?d.checked?"true":"false":d.value),d=E,d!==b?(p.setValue(d),!0):!1}function Pd(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var lh=/[\n"\\]/g;function Yi(d){return d.replace(lh,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function _l(d,p,b,E,A,I,K,ae){d.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?d.type=K:d.removeAttribute("type"),p!=null?K==="number"?(p===0&&d.value===""||d.value!=p)&&(d.value=""+zr(p)):d.value!==""+zr(p)&&(d.value=""+zr(p)):K!=="submit"&&K!=="reset"||d.removeAttribute("value"),p!=null?jc(d,K,zr(p)):b!=null?jc(d,K,zr(b)):E!=null&&d.removeAttribute("value"),A==null&&I!=null&&(d.defaultChecked=!!I),A!=null&&(d.checked=A&&typeof A!="function"&&typeof A!="symbol"),ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?d.name=""+zr(ae):d.removeAttribute("name")}function oc(d,p,b,E,A,I,K,ae){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(d.type=I),p!=null||b!=null){if(!(I!=="submit"&&I!=="reset"||p!=null)){Mu(d);return}b=b!=null?""+zr(b):"",p=p!=null?""+zr(p):b,ae||p===d.value||(d.value=p),d.defaultValue=p}E=E??A,E=typeof E!="function"&&typeof E!="symbol"&&!!E,d.checked=ae?d.checked:!!E,d.defaultChecked=!!E,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(d.name=K),Mu(d)}function jc(d,p,b){p==="number"&&Pd(d.ownerDocument)===d||d.defaultValue===""+b||(d.defaultValue=""+b)}function Jo(d,p,b,E){if(d=d.options,p){p={};for(var A=0;A<b.length;A++)p["$"+b[A]]=!0;for(b=0;b<d.length;b++)A=p.hasOwnProperty("$"+d[b].value),d[b].selected!==A&&(d[b].selected=A),A&&E&&(d[b].defaultSelected=!0)}else{for(b=""+zr(b),p=null,A=0;A<d.length;A++){if(d[A].value===b){d[A].selected=!0,E&&(d[A].defaultSelected=!0);return}p!==null||d[A].disabled||(p=d[A])}p!==null&&(p.selected=!0)}}function Ld(d,p,b){if(p!=null&&(p=""+zr(p),p!==d.value&&(d.value=p),b==null)){d.defaultValue!==p&&(d.defaultValue=p);return}d.defaultValue=b!=null?""+zr(b):""}function ch(d,p,b,E){if(p==null){if(E!=null){if(b!=null)throw Error(r(92));if(X(E)){if(1<E.length)throw Error(r(93));E=E[0]}b=E}b==null&&(b=""),p=b}b=zr(p),d.defaultValue=b,E=d.textContent,E===b&&E!==""&&E!==null&&(d.value=E),Mu(d)}function Dn(d,p){if(p){var b=d.firstChild;if(b&&b===d.lastChild&&b.nodeType===3){b.nodeValue=p;return}}d.textContent=p}var Q0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function po(d,p,b){var E=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?E?d.setProperty(p,""):p==="float"?d.cssFloat="":d[p]="":E?d.setProperty(p,b):typeof b!="number"||b===0||Q0.has(p)?p==="float"?d.cssFloat=b:d[p]=(""+b).trim():d[p]=b+"px"}function Wr(d,p,b){if(p!=null&&typeof p!="object")throw Error(r(62));if(d=d.style,b!=null){for(var E in b)!b.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?d.setProperty(E,""):E==="float"?d.cssFloat="":d[E]="");for(var A in p)E=p[A],p.hasOwnProperty(A)&&b[A]!==E&&po(d,A,E)}else for(var I in p)p.hasOwnProperty(I)&&po(d,I,p[I])}function Ou(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Du=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sl(d){return Du.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}function $t(){}var Kt=null;function Jn(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var ur=null,zs=null;function da(d){var p=ua(d);if(p&&(d=p.stateNode)){var b=d[Do]||null;e:switch(d=p.stateNode,p.type){case"input":if(_l(d,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=d;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Yi(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var E=b[p];if(E!==d&&E.form===d.form){var A=E[Do]||null;if(!A)throw Error(r(90));_l(E,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(p=0;p<b.length;p++)E=b[p],E.form===d.form&&X0(E)}break e;case"textarea":Ld(d,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Jo(d,!!b.multiple,p,!1)}}}var uh=!1;function dh(d,p,b){if(uh)return d(p,b);uh=!0;try{var E=d(p);return E}finally{if(uh=!1,(ur!==null||zs!==null)&&(LE(),ur&&(p=ur,d=zs,zs=ur=null,da(p),d)))for(p=0;p<d.length;p++)da(d[p])}}function fh(d,p){var b=d.stateNode;if(b===null)return null;var E=b[Do]||null;if(E===null)return null;b=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(d=d.type,E=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!E;break e;default:d=!1}if(d)return null;if(b&&typeof b!="function")throw Error(r(231,p,typeof b));return b}var Tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qm=!1;if(Tl)try{var ep={};Object.defineProperty(ep,"passive",{get:function(){qm=!0}}),window.addEventListener("test",ep,ep),window.removeEventListener("test",ep,ep)}catch{qm=!1}var Cl=null,tp=null,kl=null;function Al(){if(kl)return kl;var d,p=tp,b=p.length,E,A="value"in Cl?Cl.value:Cl.textContent,I=A.length;for(d=0;d<b&&p[d]===A[d];d++);var K=b-d;for(E=1;E<=K&&p[b-E]===A[I-E];E++);return kl=A.slice(d,1<E?1-E:void 0)}function hh(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function vi(){return!0}function np(){return!1}function Ta(d){function p(b,E,A,I,K){this._reactName=b,this._targetInst=A,this.type=E,this.nativeEvent=I,this.target=K,this.currentTarget=null;for(var ae in d)d.hasOwnProperty(ae)&&(b=d[ae],this[ae]=b?b(I):I[ae]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?vi:np,this.isPropagationStopped=np,this}return f(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=vi)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=vi)},persist:function(){},isPersistent:vi}),p}var $d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rp=Ta($d),ph=f({},$d,{view:0,detail:0}),l3=Ta(ph),sp,Nl,Fd,ue=f({},ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pu,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Fd&&(Fd&&d.type==="mousemove"?(sp=d.screenX-Fd.screenX,Nl=d.screenY-Fd.screenY):Nl=sp=0,Fd=d),sp)},movementY:function(d){return"movementY"in d?d.movementY:Nl}}),eE=Ta(ue),c3=f({},ue,{dataTransfer:0}),to=Ta(c3),Gm=f({},ph,{relatedTarget:0}),Uc=Ta(Gm),Hc=f({},$d,{animationName:0,elapsedTime:0,pseudoElement:0}),u3=Ta(Hc),d3=f({},$d,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),tE=Ta(d3),f3=f({},$d,{data:0}),Wm=Ta(f3),h3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function op(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=Vb[d])?!!p[d]:!1}function Pu(){return op}var qb=f({},ph,{key:function(d){if(d.key){var p=h3[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=hh(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Hb[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pu,charCode:function(d){return d.type==="keypress"?hh(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?hh(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Bd=Ta(qb),ip=f({},ue,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nE=Ta(ip),Ym=f({},ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pu}),Lo=Ta(Ym),p3=f({},$d,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xo=Ta(p3),Km=f({},ue,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),rE=Ta(Km),zd=f({},$d,{newState:0,oldState:0}),Zm=Ta(zd),sE=[9,13,27,32],Jm=Tl&&"CompositionEvent"in window,Qo=null;Tl&&"documentMode"in document&&(Qo=document.documentMode);var _o=Tl&&"TextEvent"in window&&!Qo,mh=Tl&&(!Jm||Qo&&8<Qo&&11>=Qo),Il=" ",gh=!1;function jd(d,p){switch(d){case"keyup":return sE.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ap(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var ic=!1;function xi(d,p){switch(d){case"compositionend":return ap(p);case"keypress":return p.which!==32?null:(gh=!0,Il);case"textInput":return d=p.data,d===Il&&gh?null:d;default:return null}}function oE(d,p){if(ic)return d==="compositionend"||!Jm&&jd(d,p)?(d=Al(),kl=tp=Cl=null,ic=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return mh&&p.locale!=="ko"?null:p.data;default:return null}}var iE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xm(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!iE[d.type]:p==="textarea"}function Bn(d,p,b,E){ur?zs?zs.push(E):zs=[E]:ur=E,p=HE(p,"onChange"),0<p.length&&(b=new rp("onChange","change",null,b,E),d.push({event:b,listeners:p}))}var $o=null,Vc=null;function aE(d){wO(d,0)}function Qm(d){var p=kt(d);if(X0(p))return d}function lE(d,p){if(d==="change")return p}var Gb=!1;if(Tl){var Wb;if(Tl){var eg="oninput"in document;if(!eg){var cE=document.createElement("div");cE.setAttribute("oninput","return;"),eg=typeof cE.oninput=="function"}Wb=eg}else Wb=!1;Gb=Wb&&(!document.documentMode||9<document.documentMode)}function tg(){$o&&($o.detachEvent("onpropertychange",Yb),Vc=$o=null)}function Yb(d){if(d.propertyName==="value"&&Qm(Vc)){var p=[];Bn(p,Vc,d,Jn(d)),dh(aE,p)}}function Kb(d,p,b){d==="focusin"?(tg(),$o=p,Vc=b,$o.attachEvent("onpropertychange",Yb)):d==="focusout"&&tg()}function Ud(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Qm(Vc)}function m3(d,p){if(d==="click")return Qm(p)}function g3(d,p){if(d==="input"||d==="change")return Qm(p)}function b3(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var Ca=typeof Object.is=="function"?Object.is:b3;function lp(d,p){if(Ca(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var b=Object.keys(d),E=Object.keys(p);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var A=b[E];if(!xt.call(p,A)||!Ca(d[A],p[A]))return!1}return!0}function ng(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function rg(d,p){var b=ng(d);d=0;for(var E;b;){if(b.nodeType===3){if(E=d+b.textContent.length,d<=p&&E>=p)return{node:b,offset:p-d};d=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=ng(b)}}function uE(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?uE(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function bh(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var p=Pd(d.document);p instanceof d.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)d=p.contentWindow;else break;p=Pd(d.document)}return p}function cp(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}var sg=Tl&&"documentMode"in document&&11>=document.documentMode,Sr=null,Ya=null,up=null,dp=!1;function Ka(d,p,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;dp||Sr==null||Sr!==Pd(E)||(E=Sr,"selectionStart"in E&&cp(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),up&&lp(up,E)||(up=E,E=HE(Ya,"onSelect"),0<E.length&&(p=new rp("onSelect","select",null,p,b),d.push({event:p,listeners:E}),p.target=Sr)))}function wi(d,p){var b={};return b[d.toLowerCase()]=p.toLowerCase(),b["Webkit"+d]="webkit"+p,b["Moz"+d]="moz"+p,b}var Lu={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionrun:wi("Transition","TransitionRun"),transitionstart:wi("Transition","TransitionStart"),transitioncancel:wi("Transition","TransitionCancel"),transitionend:wi("Transition","TransitionEnd")},fp={},ka={};Tl&&(ka=document.createElement("div").style,"AnimationEvent"in window||(delete Lu.animationend.animation,delete Lu.animationiteration.animation,delete Lu.animationstart.animation),"TransitionEvent"in window||delete Lu.transitionend.transition);function Za(d){if(fp[d])return fp[d];if(!Lu[d])return d;var p=Lu[d],b;for(b in p)if(p.hasOwnProperty(b)&&b in ka)return fp[d]=p[b];return d}var Zb=Za("animationend"),Li=Za("animationiteration"),Jb=Za("animationstart"),dE=Za("transitionrun"),y3=Za("transitionstart"),fE=Za("transitioncancel"),hE=Za("transitionend"),yh=new Map,og="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");og.push("scrollEnd");function Aa(d,p){yh.set(d,p),rr(p,[d])}var Hd=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},Ki=[],vh=0,hp=0;function xh(){for(var d=vh,p=hp=vh=0;p<d;){var b=Ki[p];Ki[p++]=null;var E=Ki[p];Ki[p++]=null;var A=Ki[p];Ki[p++]=null;var I=Ki[p];if(Ki[p++]=null,E!==null&&A!==null){var K=E.pending;K===null?A.next=A:(A.next=K.next,K.next=A),E.pending=A}I!==0&&Xb(b,A,I)}}function pp(d,p,b,E){Ki[vh++]=d,Ki[vh++]=p,Ki[vh++]=b,Ki[vh++]=E,hp|=E,d.lanes|=E,d=d.alternate,d!==null&&(d.lanes|=E)}function mp(d,p,b,E){return pp(d,p,b,E),ig(d)}function qc(d,p){return pp(d,null,null,p),ig(d)}function Xb(d,p,b){d.lanes|=b;var E=d.alternate;E!==null&&(E.lanes|=b);for(var A=!1,I=d.return;I!==null;)I.childLanes|=b,E=I.alternate,E!==null&&(E.childLanes|=b),I.tag===22&&(d=I.stateNode,d===null||d._visibility&1||(A=!0)),d=I,I=I.return;return d.tag===3?(I=d.stateNode,A&&p!==null&&(A=31-jt(b),d=I.hiddenUpdates,E=d[A],E===null?d[A]=[p]:E.push(p),p.lane=b|536870912),I):null}function ig(d){if(50<Ty)throw Ty=0,V3=null,Error(r(185));for(var p=d.return;p!==null;)d=p,p=d.return;return d.tag===3?d.stateNode:null}var Zi={};function ag(d,p,b,E){this.tag=d,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fo(d,p,b,E){return new ag(d,p,b,E)}function lg(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Rl(d,p){var b=d.alternate;return b===null?(b=Fo(d.tag,p,d.key,d.mode),b.elementType=d.elementType,b.type=d.type,b.stateNode=d.stateNode,b.alternate=d,d.alternate=b):(b.pendingProps=p,b.type=d.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=d.flags&65011712,b.childLanes=d.childLanes,b.lanes=d.lanes,b.child=d.child,b.memoizedProps=d.memoizedProps,b.memoizedState=d.memoizedState,b.updateQueue=d.updateQueue,p=d.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=d.sibling,b.index=d.index,b.ref=d.ref,b.refCleanup=d.refCleanup,b}function pE(d,p){d.flags&=65011714;var b=d.alternate;return b===null?(d.childLanes=0,d.lanes=p,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=b.childLanes,d.lanes=b.lanes,d.child=b.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=b.memoizedProps,d.memoizedState=b.memoizedState,d.updateQueue=b.updateQueue,d.type=b.type,p=b.dependencies,d.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),d}function Ml(d,p,b,E,A,I){var K=0;if(E=d,typeof d=="function")lg(d)&&(K=1);else if(typeof d=="string")K=Pce(d,b,Te.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case q:return d=Fo(31,b,p,A),d.elementType=q,d.lanes=I,d;case v:return $u(b.children,A,I,p);case w:K=8,A|=24;break;case _:return d=Fo(12,b,p,A|2),d.elementType=_,d.lanes=I,d;case O:return d=Fo(13,b,p,A),d.elementType=O,d.lanes=I,d;case M:return d=Fo(19,b,p,A),d.elementType=M,d.lanes=I,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case k:K=10;break e;case S:K=9;break e;case R:K=11;break e;case P:K=14;break e;case j:K=16,E=null;break e}K=29,b=Error(r(130,d===null?"null":typeof d,"")),E=null}return p=Fo(K,b,p,A),p.elementType=d,p.type=E,p.lanes=I,p}function $u(d,p,b,E){return d=Fo(7,d,E,p),d.lanes=b,d}function wh(d,p,b){return d=Fo(6,d,null,p),d.lanes=b,d}function Qb(d){var p=Fo(18,null,null,0);return p.stateNode=d,p}function cg(d,p,b){return p=Fo(4,d.children!==null?d.children:[],d.key,p),p.lanes=b,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}var ey=new WeakMap;function fa(d,p){if(typeof d=="object"&&d!==null){var b=ey.get(d);return b!==void 0?b:(p={value:d,source:p,stack:tn(p)},ey.set(d,p),p)}return{value:d,source:p,stack:tn(p)}}var si=[],ac=0,Gc=null,Eh=0,Ol=[],ps=0,Ja=null,Bo=1,Dl="";function So(d,p){si[ac++]=Eh,si[ac++]=Gc,Gc=d,Eh=p}function mE(d,p,b){Ol[ps++]=Bo,Ol[ps++]=Dl,Ol[ps++]=Ja,Ja=d;var E=Bo;d=Dl;var A=32-jt(E)-1;E&=~(1<<A),b+=1;var I=32-jt(p)+A;if(30<I){var K=A-A%5;I=(E&(1<<K)-1).toString(32),E>>=K,A-=K,Bo=1<<32-jt(p)+A|b<<A|E,Dl=I+d}else Bo=1<<I|b<<A|E,Dl=d}function Vd(d){d.return!==null&&(So(d,1),mE(d,1,0))}function $i(d){for(;d===Gc;)Gc=si[--ac],si[ac]=null,Eh=si[--ac],si[ac]=null;for(;d===Ja;)Ja=Ol[--ps],Ol[ps]=null,Dl=Ol[--ps],Ol[ps]=null,Bo=Ol[--ps],Ol[ps]=null}function ug(d,p){Ol[ps++]=Bo,Ol[ps++]=Dl,Ol[ps++]=Ja,Bo=p.id,Dl=p.overflow,Ja=d}var no=null,us=null,Mr=!1,ds=null,Ns=!1,lc=Error(r(519));function Wc(d){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gp(fa(p,d)),lc}function Xn(d){var p=d.stateNode,b=d.type,E=d.memoizedProps;switch(p[gr]=d,p[Do]=E,b){case"dialog":Dr("cancel",p),Dr("close",p);break;case"iframe":case"object":case"embed":Dr("load",p);break;case"video":case"audio":for(b=0;b<ky.length;b++)Dr(ky[b],p);break;case"source":Dr("error",p);break;case"img":case"image":case"link":Dr("error",p),Dr("load",p);break;case"details":Dr("toggle",p);break;case"input":Dr("invalid",p),oc(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":Dr("invalid",p);break;case"textarea":Dr("invalid",p),ch(p,E.value,E.defaultValue,E.children)}b=E.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||E.suppressHydrationWarning===!0||TO(p.textContent,b)?(E.popover!=null&&(Dr("beforetoggle",p),Dr("toggle",p)),E.onScroll!=null&&Dr("scroll",p),E.onScrollEnd!=null&&Dr("scrollend",p),E.onClick!=null&&(p.onclick=$t),p=!0):p=!1,p||Wc(d,!0)}function ro(d){for(no=d.return;no;)switch(no.tag){case 5:case 31:case 13:Ns=!1;return;case 27:case 3:Ns=!0;return;default:no=no.return}}function Tn(d){if(d!==no)return!1;if(!Mr)return ro(d),Mr=!0,!1;var p=d.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=d.type,b=!(b!=="form"&&b!=="button")||o5(d.type,d.memoizedProps)),b=!b),b&&us&&Wc(d),ro(d),p===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));us=DO(d)}else if(p===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));us=DO(d)}else p===27?(p=us,Bh(d.type)?(d=u5,u5=null,us=d):us=p):us=no?pc(d.stateNode.nextSibling):null;return!0}function Fu(){us=no=null,Mr=!1}function ty(){var d=ds;return d!==null&&(sl===null?sl=d:sl.push.apply(sl,d),ds=null),d}function gp(d){ds===null?ds=[d]:ds.push(d)}var dg=te(null),Pl=null,ha=null;function Bu(d,p,b){Q(dg,p._currentValue),p._currentValue=b}function Yc(d){d._currentValue=dg.current,oe(dg)}function ny(d,p,b){for(;d!==null;){var E=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),d===b)break;d=d.return}}function fg(d,p,b,E){var A=d.child;for(A!==null&&(A.return=d);A!==null;){var I=A.dependencies;if(I!==null){var K=A.child;I=I.firstContext;e:for(;I!==null;){var ae=I;I=A;for(var ke=0;ke<p.length;ke++)if(ae.context===p[ke]){I.lanes|=b,ae=I.alternate,ae!==null&&(ae.lanes|=b),ny(I.return,b,d),E||(K=null);break e}I=ae.next}}else if(A.tag===18){if(K=A.return,K===null)throw Error(r(341));K.lanes|=b,I=K.alternate,I!==null&&(I.lanes|=b),ny(K,b,d),K=null}else K=A.child;if(K!==null)K.return=A;else for(K=A;K!==null;){if(K===d){K=null;break}if(A=K.sibling,A!==null){A.return=K.return,K=A;break}K=K.return}A=K}}function _h(d,p,b,E){d=null;for(var A=p,I=!1;A!==null;){if(!I){if((A.flags&524288)!==0)I=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var K=A.alternate;if(K===null)throw Error(r(387));if(K=K.memoizedProps,K!==null){var ae=A.type;Ca(A.pendingProps.value,K.value)||(d!==null?d.push(ae):d=[ae])}}else if(A===he.current){if(K=A.alternate,K===null)throw Error(r(387));K.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(d!==null?d.push(My):d=[My])}A=A.return}d!==null&&fg(p,d,b,E),p.flags|=262144}function hg(d){for(d=d.firstContext;d!==null;){if(!Ca(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function qd(d){Pl=d,ha=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function Ei(d){return gE(Pl,d)}function Sh(d,p){return Pl===null&&qd(d),gE(d,p)}function gE(d,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},ha===null){if(d===null)throw Error(r(308));ha=p,d.dependencies={lanes:0,firstContext:p},d.flags|=524288}else ha=ha.next=p;return b}var bp=typeof AbortController<"u"?AbortController:function(){var d=[],p=this.signal={aborted:!1,addEventListener:function(b,E){d.push(E)}};this.abort=function(){p.aborted=!0,d.forEach(function(b){return b()})}},v3=e.unstable_scheduleCallback,x3=e.unstable_NormalPriority,zo={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ry(){return{controller:new bp,data:new Map,refCount:0}}function Gd(d){d.refCount--,d.refCount===0&&v3(x3,function(){d.controller.abort()})}var cc=null,pg=0,Wd=0,Yd=null;function bE(d,p){if(cc===null){var b=cc=[];pg=0,Wd=Z3(),Yd={status:"pending",value:void 0,then:function(E){b.push(E)}}}return pg++,p.then(yE,yE),p}function yE(){if(--pg===0&&cc!==null){Yd!==null&&(Yd.status="fulfilled");var d=cc;cc=null,Wd=0,Yd=null;for(var p=0;p<d.length;p++)(0,d[p])()}}function w3(d,p){var b=[],E={status:"pending",value:null,reason:null,then:function(A){b.push(A)}};return d.then(function(){E.status="fulfilled",E.value=p;for(var A=0;A<b.length;A++)(0,b[A])(p)},function(A){for(E.status="rejected",E.reason=A,A=0;A<b.length;A++)(0,b[A])(void 0)}),E}var vE=J.S;J.S=function(d,p){K9=Le(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&bE(d,p),vE!==null&&vE(d,p)};var Kd=te(null);function sy(){var d=Kd.current;return d!==null?d:Us.pooledCache}function yp(d,p){p===null?Q(Kd,Kd.current):Q(Kd,p.pool)}function oy(){var d=sy();return d===null?null:{parent:zo._currentValue,pool:d}}var Zd=Error(r(460)),vp=Error(r(474)),mg=Error(r(542)),gg={then:function(){}};function xE(d){return d=d.status,d==="fulfilled"||d==="rejected"}function wE(d,p,b){switch(b=d[b],b===void 0?d.push(p):b!==p&&(p.then($t,$t),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,iy(d),d;default:if(typeof p.status=="string")p.then($t,$t);else{if(d=Us,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=p,d.status="pending",d.then(function(E){if(p.status==="pending"){var A=p;A.status="fulfilled",A.value=E}},function(E){if(p.status==="pending"){var A=p;A.status="rejected",A.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,iy(d),d}throw Jd=p,Zd}}function Xa(d){try{var p=d._init;return p(d._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(Jd=b,Zd):b}}var Jd=null;function EE(){if(Jd===null)throw Error(r(459));var d=Jd;return Jd=null,d}function iy(d){if(d===Zd||d===mg)throw Error(r(483))}var zu=null,xp=0;function uc(d){var p=xp;return xp+=1,zu===null&&(zu=[]),wE(zu,d,p)}function Th(d,p){p=p.props.ref,d.ref=p!==void 0?p:null}function wp(d,p){throw p.$$typeof===m?Error(r(525)):(d=Object.prototype.toString.call(p),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d)))}function ay(d){function p(je,Oe){if(d){var Ge=je.deletions;Ge===null?(je.deletions=[Oe],je.flags|=16):Ge.push(Oe)}}function b(je,Oe){if(!d)return null;for(;Oe!==null;)p(je,Oe),Oe=Oe.sibling;return null}function E(je){for(var Oe=new Map;je!==null;)je.key!==null?Oe.set(je.key,je):Oe.set(je.index,je),je=je.sibling;return Oe}function A(je,Oe){return je=Rl(je,Oe),je.index=0,je.sibling=null,je}function I(je,Oe,Ge){return je.index=Ge,d?(Ge=je.alternate,Ge!==null?(Ge=Ge.index,Ge<Oe?(je.flags|=67108866,Oe):Ge):(je.flags|=67108866,Oe)):(je.flags|=1048576,Oe)}function K(je){return d&&je.alternate===null&&(je.flags|=67108866),je}function ae(je,Oe,Ge,ct){return Oe===null||Oe.tag!==6?(Oe=wh(Ge,je.mode,ct),Oe.return=je,Oe):(Oe=A(Oe,Ge),Oe.return=je,Oe)}function ke(je,Oe,Ge,ct){var Mn=Ge.type;return Mn===v?st(je,Oe,Ge.props.children,ct,Ge.key):Oe!==null&&(Oe.elementType===Mn||typeof Mn=="object"&&Mn!==null&&Mn.$$typeof===j&&Xa(Mn)===Oe.type)?(Oe=A(Oe,Ge.props),Th(Oe,Ge),Oe.return=je,Oe):(Oe=Ml(Ge.type,Ge.key,Ge.props,null,je.mode,ct),Th(Oe,Ge),Oe.return=je,Oe)}function Ye(je,Oe,Ge,ct){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Ge.containerInfo||Oe.stateNode.implementation!==Ge.implementation?(Oe=cg(Ge,je.mode,ct),Oe.return=je,Oe):(Oe=A(Oe,Ge.children||[]),Oe.return=je,Oe)}function st(je,Oe,Ge,ct,Mn){return Oe===null||Oe.tag!==7?(Oe=$u(Ge,je.mode,ct,Mn),Oe.return=je,Oe):(Oe=A(Oe,Ge),Oe.return=je,Oe)}function dt(je,Oe,Ge){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=wh(""+Oe,je.mode,Ge),Oe.return=je,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case g:return Ge=Ml(Oe.type,Oe.key,Oe.props,null,je.mode,Ge),Th(Ge,Oe),Ge.return=je,Ge;case y:return Oe=cg(Oe,je.mode,Ge),Oe.return=je,Oe;case j:return Oe=Xa(Oe),dt(je,Oe,Ge)}if(X(Oe)||H(Oe))return Oe=$u(Oe,je.mode,Ge,null),Oe.return=je,Oe;if(typeof Oe.then=="function")return dt(je,uc(Oe),Ge);if(Oe.$$typeof===k)return dt(je,Sh(je,Oe),Ge);wp(je,Oe)}return null}function Ke(je,Oe,Ge,ct){var Mn=Oe!==null?Oe.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Mn!==null?null:ae(je,Oe,""+Ge,ct);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case g:return Ge.key===Mn?ke(je,Oe,Ge,ct):null;case y:return Ge.key===Mn?Ye(je,Oe,Ge,ct):null;case j:return Ge=Xa(Ge),Ke(je,Oe,Ge,ct)}if(X(Ge)||H(Ge))return Mn!==null?null:st(je,Oe,Ge,ct,null);if(typeof Ge.then=="function")return Ke(je,Oe,uc(Ge),ct);if(Ge.$$typeof===k)return Ke(je,Oe,Sh(je,Ge),ct);wp(je,Ge)}return null}function Xe(je,Oe,Ge,ct,Mn){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return je=je.get(Ge)||null,ae(Oe,je,""+ct,Mn);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case g:return je=je.get(ct.key===null?Ge:ct.key)||null,ke(Oe,je,ct,Mn);case y:return je=je.get(ct.key===null?Ge:ct.key)||null,Ye(Oe,je,ct,Mn);case j:return ct=Xa(ct),Xe(je,Oe,Ge,ct,Mn)}if(X(ct)||H(ct))return je=je.get(Ge)||null,st(Oe,je,ct,Mn,null);if(typeof ct.then=="function")return Xe(je,Oe,Ge,uc(ct),Mn);if(ct.$$typeof===k)return Xe(je,Oe,Ge,Sh(Oe,ct),Mn);wp(Oe,ct)}return null}function dn(je,Oe,Ge,ct){for(var Mn=null,ns=null,En=Oe,br=Oe=0,Fr=null;En!==null&&br<Ge.length;br++){En.index>br?(Fr=En,En=null):Fr=En.sibling;var rs=Ke(je,En,Ge[br],ct);if(rs===null){En===null&&(En=Fr);break}d&&En&&rs.alternate===null&&p(je,En),Oe=I(rs,Oe,br),ns===null?Mn=rs:ns.sibling=rs,ns=rs,En=Fr}if(br===Ge.length)return b(je,En),Mr&&So(je,br),Mn;if(En===null){for(;br<Ge.length;br++)En=dt(je,Ge[br],ct),En!==null&&(Oe=I(En,Oe,br),ns===null?Mn=En:ns.sibling=En,ns=En);return Mr&&So(je,br),Mn}for(En=E(En);br<Ge.length;br++)Fr=Xe(En,je,br,Ge[br],ct),Fr!==null&&(d&&Fr.alternate!==null&&En.delete(Fr.key===null?br:Fr.key),Oe=I(Fr,Oe,br),ns===null?Mn=Fr:ns.sibling=Fr,ns=Fr);return d&&En.forEach(function(Vh){return p(je,Vh)}),Mr&&So(je,br),Mn}function jn(je,Oe,Ge,ct){if(Ge==null)throw Error(r(151));for(var Mn=null,ns=null,En=Oe,br=Oe=0,Fr=null,rs=Ge.next();En!==null&&!rs.done;br++,rs=Ge.next()){En.index>br?(Fr=En,En=null):Fr=En.sibling;var Vh=Ke(je,En,rs.value,ct);if(Vh===null){En===null&&(En=Fr);break}d&&En&&Vh.alternate===null&&p(je,En),Oe=I(Vh,Oe,br),ns===null?Mn=Vh:ns.sibling=Vh,ns=Vh,En=Fr}if(rs.done)return b(je,En),Mr&&So(je,br),Mn;if(En===null){for(;!rs.done;br++,rs=Ge.next())rs=dt(je,rs.value,ct),rs!==null&&(Oe=I(rs,Oe,br),ns===null?Mn=rs:ns.sibling=rs,ns=rs);return Mr&&So(je,br),Mn}for(En=E(En);!rs.done;br++,rs=Ge.next())rs=Xe(En,je,br,rs.value,ct),rs!==null&&(d&&rs.alternate!==null&&En.delete(rs.key===null?br:rs.key),Oe=I(rs,Oe,br),ns===null?Mn=rs:ns.sibling=rs,ns=rs);return d&&En.forEach(function(Gce){return p(je,Gce)}),Mr&&So(je,br),Mn}function Ps(je,Oe,Ge,ct){if(typeof Ge=="object"&&Ge!==null&&Ge.type===v&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case g:e:{for(var Mn=Ge.key;Oe!==null;){if(Oe.key===Mn){if(Mn=Ge.type,Mn===v){if(Oe.tag===7){b(je,Oe.sibling),ct=A(Oe,Ge.props.children),ct.return=je,je=ct;break e}}else if(Oe.elementType===Mn||typeof Mn=="object"&&Mn!==null&&Mn.$$typeof===j&&Xa(Mn)===Oe.type){b(je,Oe.sibling),ct=A(Oe,Ge.props),Th(ct,Ge),ct.return=je,je=ct;break e}b(je,Oe);break}else p(je,Oe);Oe=Oe.sibling}Ge.type===v?(ct=$u(Ge.props.children,je.mode,ct,Ge.key),ct.return=je,je=ct):(ct=Ml(Ge.type,Ge.key,Ge.props,null,je.mode,ct),Th(ct,Ge),ct.return=je,je=ct)}return K(je);case y:e:{for(Mn=Ge.key;Oe!==null;){if(Oe.key===Mn)if(Oe.tag===4&&Oe.stateNode.containerInfo===Ge.containerInfo&&Oe.stateNode.implementation===Ge.implementation){b(je,Oe.sibling),ct=A(Oe,Ge.children||[]),ct.return=je,je=ct;break e}else{b(je,Oe);break}else p(je,Oe);Oe=Oe.sibling}ct=cg(Ge,je.mode,ct),ct.return=je,je=ct}return K(je);case j:return Ge=Xa(Ge),Ps(je,Oe,Ge,ct)}if(X(Ge))return dn(je,Oe,Ge,ct);if(H(Ge)){if(Mn=H(Ge),typeof Mn!="function")throw Error(r(150));return Ge=Mn.call(Ge),jn(je,Oe,Ge,ct)}if(typeof Ge.then=="function")return Ps(je,Oe,uc(Ge),ct);if(Ge.$$typeof===k)return Ps(je,Oe,Sh(je,Ge),ct);wp(je,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint"?(Ge=""+Ge,Oe!==null&&Oe.tag===6?(b(je,Oe.sibling),ct=A(Oe,Ge),ct.return=je,je=ct):(b(je,Oe),ct=wh(Ge,je.mode,ct),ct.return=je,je=ct),K(je)):b(je,Oe)}return function(je,Oe,Ge,ct){try{xp=0;var Mn=Ps(je,Oe,Ge,ct);return zu=null,Mn}catch(En){if(En===Zd||En===mg)throw En;var ns=Fo(29,En,null,je.mode);return ns.lanes=ct,ns.return=je,ns}finally{}}}var ju=ay(!0),Ch=ay(!1),Kc=!1;function Xd(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bg(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Uu(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Hu(d,p,b){var E=d.updateQueue;if(E===null)return null;if(E=E.shared,(fs&2)!==0){var A=E.pending;return A===null?p.next=p:(p.next=A.next,A.next=p),E.pending=p,p=ig(d),Xb(d,null,b),p}return pp(d,E,p,b),ig(d)}function Vu(d,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var E=p.lanes;E&=d.pendingLanes,b|=E,p.lanes=b,hn(d,b)}}function yg(d,p){var b=d.updateQueue,E=d.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var A=null,I=null;if(b=b.firstBaseUpdate,b!==null){do{var K={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};I===null?A=I=K:I=I.next=K,b=b.next}while(b!==null);I===null?A=I=p:I=I.next=p}else A=I=p;b={baseState:E.baseState,firstBaseUpdate:A,lastBaseUpdate:I,shared:E.shared,callbacks:E.callbacks},d.updateQueue=b;return}d=b.lastBaseUpdate,d===null?b.firstBaseUpdate=p:d.next=p,b.lastBaseUpdate=p}var vg=!1;function Ep(){if(vg){var d=Yd;if(d!==null)throw d}}function _p(d,p,b,E){vg=!1;var A=d.updateQueue;Kc=!1;var I=A.firstBaseUpdate,K=A.lastBaseUpdate,ae=A.shared.pending;if(ae!==null){A.shared.pending=null;var ke=ae,Ye=ke.next;ke.next=null,K===null?I=Ye:K.next=Ye,K=ke;var st=d.alternate;st!==null&&(st=st.updateQueue,ae=st.lastBaseUpdate,ae!==K&&(ae===null?st.firstBaseUpdate=Ye:ae.next=Ye,st.lastBaseUpdate=ke))}if(I!==null){var dt=A.baseState;K=0,st=Ye=ke=null,ae=I;do{var Ke=ae.lane&-536870913,Xe=Ke!==ae.lane;if(Xe?($r&Ke)===Ke:(E&Ke)===Ke){Ke!==0&&Ke===Wd&&(vg=!0),st!==null&&(st=st.next={lane:0,tag:ae.tag,payload:ae.payload,callback:null,next:null});e:{var dn=d,jn=ae;Ke=p;var Ps=b;switch(jn.tag){case 1:if(dn=jn.payload,typeof dn=="function"){dt=dn.call(Ps,dt,Ke);break e}dt=dn;break e;case 3:dn.flags=dn.flags&-65537|128;case 0:if(dn=jn.payload,Ke=typeof dn=="function"?dn.call(Ps,dt,Ke):dn,Ke==null)break e;dt=f({},dt,Ke);break e;case 2:Kc=!0}}Ke=ae.callback,Ke!==null&&(d.flags|=64,Xe&&(d.flags|=8192),Xe=A.callbacks,Xe===null?A.callbacks=[Ke]:Xe.push(Ke))}else Xe={lane:Ke,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},st===null?(Ye=st=Xe,ke=dt):st=st.next=Xe,K|=Ke;if(ae=ae.next,ae===null){if(ae=A.shared.pending,ae===null)break;Xe=ae,ae=Xe.next,Xe.next=null,A.lastBaseUpdate=Xe,A.shared.pending=null}}while(!0);st===null&&(ke=dt),A.baseState=ke,A.firstBaseUpdate=Ye,A.lastBaseUpdate=st,I===null&&(A.shared.lanes=0),Dh|=K,d.lanes=K,d.memoizedState=dt}}function jo(d,p){if(typeof d!="function")throw Error(r(191,d));d.call(p)}function _E(d,p){var b=d.callbacks;if(b!==null)for(d.callbacks=null,d=0;d<b.length;d++)jo(b[d],p)}var Zc=te(null),xg=te(0);function ly(d,p){d=uf,Q(xg,d),Q(Zc,p),uf=d|p.baseLanes}function cy(){Q(xg,uf),Q(Zc,Zc.current)}function Sp(){uf=xg.current,oe(Zc),oe(xg)}var ei=te(null),Qa=null;function qu(d){var p=d.alternate;Q(To,To.current&1),Q(ei,d),Qa===null&&(p===null||Zc.current!==null||p.memoizedState!==null)&&(Qa=d)}function uy(d){Q(To,To.current),Q(ei,d),Qa===null&&(Qa=d)}function dy(d){d.tag===22?(Q(To,To.current),Q(ei,d),Qa===null&&(Qa=d)):Gu()}function Gu(){Q(To,To.current),Q(ei,ei.current)}function Na(d){oe(ei),Qa===d&&(Qa=null),oe(To)}var To=te(0);function wg(d){for(var p=d;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||l5(b)||c5(b)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Jc=0,sr=null,ms=null,Uo=null,Qd=!1,kh=!1,Wu=!1,Eg=0,Tp=0,Ji=null,Ah=0;function js(){throw Error(r(321))}function fy(d,p){if(p===null)return!1;for(var b=0;b<p.length&&b<d.length;b++)if(!Ca(d[b],p[b]))return!1;return!0}function hy(d,p,b,E,A,I){return Jc=I,sr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,J.H=d===null||d.memoizedState===null?Qn:wr,Wu=!1,I=b(E,A),Wu=!1,kh&&(I=TE(p,b,E,A)),SE(d),I}function SE(d){J.H=Un;var p=ms!==null&&ms.next!==null;if(Jc=0,Uo=ms=sr=null,Qd=!1,Tp=0,Ji=null,p)throw Error(r(300));d===null||ii||(d=d.dependencies,d!==null&&hg(d)&&(ii=!0))}function TE(d,p,b,E){sr=d;var A=0;do{if(kh&&(Ji=null),Tp=0,kh=!1,25<=A)throw Error(r(301));if(A+=1,Uo=ms=null,d.updateQueue!=null){var I=d.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}J.H=nr,I=p(b,E)}while(kh);return I}function E3(){var d=J.H,p=d.useState()[0];return p=typeof p.then=="function"?Nh(p):p,d=d.useState()[0],(ms!==null?ms.memoizedState:null)!==d&&(sr.flags|=1024),p}function py(){var d=Eg!==0;return Eg=0,d}function my(d,p,b){p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~b}function gy(d){if(Qd){for(d=d.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Qd=!1}Jc=0,Uo=ms=sr=null,kh=!1,Tp=Eg=0,Ji=null}function Xi(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Uo===null?sr.memoizedState=Uo=d:Uo=Uo.next=d,Uo}function mo(){if(ms===null){var d=sr.alternate;d=d!==null?d.memoizedState:null}else d=ms.next;var p=Uo===null?sr.memoizedState:Uo.next;if(p!==null)Uo=p,ms=d;else{if(d===null)throw sr.alternate===null?Error(r(467)):Error(r(310));ms=d,d={memoizedState:ms.memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},Uo===null?sr.memoizedState=Uo=d:Uo=Uo.next=d}return Uo}function Cp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nh(d){var p=Tp;return Tp+=1,Ji===null&&(Ji=[]),d=wE(Ji,d,p),p=sr,(Uo===null?p.memoizedState:Uo.next)===null&&(p=p.alternate,J.H=p===null||p.memoizedState===null?Qn:wr),d}function kp(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Nh(d);if(d.$$typeof===k)return Ei(d)}throw Error(r(438,String(d)))}function _g(d){var p=null,b=sr.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var E=sr.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(A){return A.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=Cp(),sr.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(d),E=0;E<d;E++)b[E]=U;return p.index++,b}function dc(d,p){return typeof p=="function"?p(d):p}function Ap(d){var p=mo();return Sg(p,ms,d)}function Sg(d,p,b){var E=d.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=b;var A=d.baseQueue,I=E.pending;if(I!==null){if(A!==null){var K=A.next;A.next=I.next,I.next=K}p.baseQueue=A=I,E.pending=null}if(I=d.baseState,A===null)d.memoizedState=I;else{p=A.next;var ae=K=null,ke=null,Ye=p,st=!1;do{var dt=Ye.lane&-536870913;if(dt!==Ye.lane?($r&dt)===dt:(Jc&dt)===dt){var Ke=Ye.revertLane;if(Ke===0)ke!==null&&(ke=ke.next={lane:0,revertLane:0,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),dt===Wd&&(st=!0);else if((Jc&Ke)===Ke){Ye=Ye.next,Ke===Wd&&(st=!0);continue}else dt={lane:0,revertLane:Ye.revertLane,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ke===null?(ae=ke=dt,K=I):ke=ke.next=dt,sr.lanes|=Ke,Dh|=Ke;dt=Ye.action,Wu&&b(I,dt),I=Ye.hasEagerState?Ye.eagerState:b(I,dt)}else Ke={lane:dt,revertLane:Ye.revertLane,gesture:Ye.gesture,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ke===null?(ae=ke=Ke,K=I):ke=ke.next=Ke,sr.lanes|=dt,Dh|=dt;Ye=Ye.next}while(Ye!==null&&Ye!==p);if(ke===null?K=I:ke.next=ae,!Ca(I,d.memoizedState)&&(ii=!0,st&&(b=Yd,b!==null)))throw b;d.memoizedState=I,d.baseState=K,d.baseQueue=ke,E.lastRenderedState=I}return A===null&&(E.lanes=0),[d.memoizedState,E.dispatch]}function Tg(d){var p=mo(),b=p.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=d;var E=b.dispatch,A=b.pending,I=p.memoizedState;if(A!==null){b.pending=null;var K=A=A.next;do I=d(I,K.action),K=K.next;while(K!==A);Ca(I,p.memoizedState)||(ii=!0),p.memoizedState=I,p.baseQueue===null&&(p.baseState=I),b.lastRenderedState=I}return[I,E]}function N(d,p,b){var E=sr,A=mo(),I=Mr;if(I){if(b===void 0)throw Error(r(407));b=b()}else b=p();var K=!Ca((ms||A).memoizedState,b);if(K&&(A.memoizedState=b,ii=!0),A=A.queue,ef(ve.bind(null,E,A,d),[d]),A.getSnapshot!==p||K||Uo!==null&&Uo.memoizedState.tag&1){if(E.flags|=2048,fc(9,{destroy:void 0},se.bind(null,E,A,b,p),null),Us===null)throw Error(r(349));I||(Jc&127)!==0||G(E,p,b)}return b}function G(d,p,b){d.flags|=16384,d={getSnapshot:p,value:b},p=sr.updateQueue,p===null?(p=Cp(),sr.updateQueue=p,p.stores=[d]):(b=p.stores,b===null?p.stores=[d]:b.push(d))}function se(d,p,b,E){p.value=b,p.getSnapshot=E,Ae(p)&&Ie(d)}function ve(d,p,b){return b(function(){Ae(p)&&Ie(d)})}function Ae(d){var p=d.getSnapshot;d=d.value;try{var b=p();return!Ca(d,b)}catch{return!0}}function Ie(d){var p=qc(d,2);p!==null&&ol(p,d,2)}function He(d){var p=Xi();if(typeof d=="function"){var b=d;if(d=b(),Wu){ln(!0);try{b()}finally{ln(!1)}}}return p.memoizedState=p.baseState=d,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:d},p}function gt(d,p,b,E){return d.baseState=b,Sg(d,ms,typeof E=="function"?E:dc)}function un(d,p,b,E,A){if(dr(d))throw Error(r(485));if(d=p.action,d!==null){var I={payload:A,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){I.listeners.push(K)}};J.T!==null?b(!0):I.isTransition=!1,E(I),b=p.pending,b===null?(I.next=p.pending=I,Et(p,I)):(I.next=b.next,p.pending=b.next=I)}}function Et(d,p){var b=p.action,E=p.payload,A=d.state;if(p.isTransition){var I=J.T,K={};J.T=K;try{var ae=b(A,E),ke=J.S;ke!==null&&ke(K,ae),_n(d,p,ae)}catch(Ye){_t(d,p,Ye)}finally{I!==null&&K.types!==null&&(I.types=K.types),J.T=I}}else try{I=b(A,E),_n(d,p,I)}catch(Ye){_t(d,p,Ye)}}function _n(d,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){lt(d,p,E)},function(E){return _t(d,p,E)}):lt(d,p,b)}function lt(d,p,b){p.status="fulfilled",p.value=b,yn(p),d.state=b,p=d.pending,p!==null&&(b=p.next,b===p?d.pending=null:(b=b.next,p.next=b,Et(d,b)))}function _t(d,p,b){var E=d.pending;if(d.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=b,yn(p),p=p.next;while(p!==E)}d.action=null}function yn(d){d=d.listeners;for(var p=0;p<d.length;p++)(0,d[p])()}function Yn(d,p){return p}function es(d,p){if(Mr){var b=Us.formState;if(b!==null){e:{var E=sr;if(Mr){if(us){t:{for(var A=us,I=Ns;A.nodeType!==8;){if(!I){A=null;break t}if(A=pc(A.nextSibling),A===null){A=null;break t}}I=A.data,A=I==="F!"||I==="F"?A:null}if(A){us=pc(A.nextSibling),E=A.data==="F!";break e}}Wc(E)}E=!1}E&&(p=b[0])}}return b=Xi(),b.memoizedState=b.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:p},b.queue=E,b=mn.bind(null,sr,E),E.dispatch=b,E=He(!1),I=cn.bind(null,sr,!1,E.queue),E=Xi(),A={state:p,dispatch:null,action:d,pending:null},E.queue=A,b=un.bind(null,sr,A,I,b),A.dispatch=b,E.memoizedState=d,[p,b,!1]}function so(d){var p=mo();return ts(p,ms,d)}function ts(d,p,b){if(p=Sg(d,p,Yn)[0],d=Ap(dc)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=Nh(p)}catch(K){throw K===Zd?mg:K}else E=p;p=mo();var A=p.queue,I=A.dispatch;return b!==p.memoizedState&&(sr.flags|=2048,fc(9,{destroy:void 0},_i.bind(null,A,b),null)),[E,I,d]}function _i(d,p){d.action=p}function Ia(d){var p=mo(),b=ms;if(b!==null)return ts(p,b,d);mo(),p=p.memoizedState,b=mo();var E=b.queue.dispatch;return b.memoizedState=d,[p,E,!1]}function fc(d,p,b,E){return d={tag:d,create:b,deps:E,inst:p,next:null},p=sr.updateQueue,p===null&&(p=Cp(),sr.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=d.next=d:(E=b.next,b.next=d,d.next=E,p.lastEffect=d),d}function Ih(){return mo().memoizedState}function Yu(d,p,b,E){var A=Xi();sr.flags|=d,A.memoizedState=fc(1|p,{destroy:void 0},b,E===void 0?null:E)}function Ku(d,p,b,E){var A=mo();E=E===void 0?null:E;var I=A.memoizedState.inst;ms!==null&&E!==null&&fy(E,ms.memoizedState.deps)?A.memoizedState=fc(p,I,b,E):(sr.flags|=d,A.memoizedState=fc(1|p,I,b,E))}function Rh(d,p){Yu(8390656,8,d,p)}function ef(d,p){Ku(2048,8,d,p)}function Is(d){sr.flags|=4;var p=sr.updateQueue;if(p===null)p=Cp(),sr.updateQueue=p,p.events=[d];else{var b=p.events;b===null?p.events=[d]:b.push(d)}}function Co(d){var p=mo().memoizedState;return Is({ref:p,nextImpl:d}),function(){if((fs&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function Si(d,p){return Ku(4,2,d,p)}function tf(d,p){return Ku(4,4,d,p)}function Np(d,p){if(typeof p=="function"){d=d();var b=p(d);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function nf(d,p,b){b=b!=null?b.concat([d]):null,Ku(4,4,Np.bind(null,p,d),b)}function el(){}function Ip(d,p){var b=mo();p=p===void 0?null:p;var E=b.memoizedState;return p!==null&&fy(p,E[1])?E[0]:(b.memoizedState=[d,p],d)}function Mt(d,p){var b=mo();p=p===void 0?null:p;var E=b.memoizedState;if(p!==null&&fy(p,E[1]))return E[0];if(E=d(),Wu){ln(!0);try{d()}finally{ln(!1)}}return b.memoizedState=[E,p],E}function tr(d,p,b){return b===void 0||(Jc&1073741824)!==0&&($r&261930)===0?d.memoizedState=p:(d.memoizedState=b,d=J9(),sr.lanes|=d,Dh|=d,b)}function zn(d,p,b,E){return Ca(b,p)?b:Zc.current!==null?(d=tr(d,b,E),Ca(d,p)||(ii=!0),d):(Jc&42)===0||(Jc&1073741824)!==0&&($r&261930)===0?(ii=!0,d.memoizedState=b):(d=J9(),sr.lanes|=d,Dh|=d,p)}function Vr(d,p,b,E,A){var I=ee.p;ee.p=I!==0&&8>I?I:8;var K=J.T,ae={};J.T=ae,cn(d,!1,p,b);try{var ke=A(),Ye=J.S;if(Ye!==null&&Ye(ae,ke),ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var st=w3(ke,E);rn(d,p,st,Fl(d))}else rn(d,p,E,Fl(d))}catch(dt){rn(d,p,{then:function(){},status:"rejected",reason:dt},Fl())}finally{ee.p=I,K!==null&&ae.types!==null&&(K.types=ae.types),J.T=K}}function jr(){}function Gn(d,p,b,E){if(d.tag!==5)throw Error(r(476));var A=xs(d).queue;Vr(d,A,p,re,b===null?jr:function(){return Rs(d),b(E)})}function xs(d){var p=d.memoizedState;if(p!==null)return p;p={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:re},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:b},next:null},d.memoizedState=p,d=d.alternate,d!==null&&(d.memoizedState=p),p}function Rs(d){var p=xs(d);p.next===null&&(p=d.alternate.memoizedState),rn(d,p.next.queue,{},Fl())}function or(){return Ei(My)}function ko(){return mo().memoizedState}function Yr(){return mo().memoizedState}function oo(d){for(var p=d.return;p!==null;){switch(p.tag){case 24:case 3:var b=Fl();d=Uu(b);var E=Hu(p,d,b);E!==null&&(ol(E,p,b),Vu(E,p,b)),p={cache:ry()},d.payload=p;return}p=p.return}}function Xt(d,p,b){var E=Fl();b={lane:E,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},dr(d)?fr(p,b):(b=mp(d,p,b,E),b!==null&&(ol(b,d,E),Hn(b,p,E)))}function mn(d,p,b){var E=Fl();rn(d,p,b,E)}function rn(d,p,b,E){var A={lane:E,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(dr(d))fr(p,A);else{var I=d.alternate;if(d.lanes===0&&(I===null||I.lanes===0)&&(I=p.lastRenderedReducer,I!==null))try{var K=p.lastRenderedState,ae=I(K,b);if(A.hasEagerState=!0,A.eagerState=ae,Ca(ae,K))return pp(d,p,A,0),Us===null&&xh(),!1}catch{}finally{}if(b=mp(d,p,A,E),b!==null)return ol(b,d,E),Hn(b,p,E),!0}return!1}function cn(d,p,b,E){if(E={lane:2,revertLane:Z3(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},dr(d)){if(p)throw Error(r(479))}else p=mp(d,b,E,2),p!==null&&ol(p,d,2)}function dr(d){var p=d.alternate;return d===sr||p!==null&&p===sr}function fr(d,p){kh=Qd=!0;var b=d.pending;b===null?p.next=p:(p.next=b.next,b.next=p),d.pending=p}function Hn(d,p,b){if((b&4194048)!==0){var E=p.lanes;E&=d.pendingLanes,b|=E,p.lanes=b,hn(d,b)}}var Un={readContext:Ei,use:kp,useCallback:js,useContext:js,useEffect:js,useImperativeHandle:js,useLayoutEffect:js,useInsertionEffect:js,useMemo:js,useReducer:js,useRef:js,useState:js,useDebugValue:js,useDeferredValue:js,useTransition:js,useSyncExternalStore:js,useId:js,useHostTransitionStatus:js,useFormState:js,useActionState:js,useOptimistic:js,useMemoCache:js,useCacheRefresh:js};Un.useEffectEvent=js;var Qn={readContext:Ei,use:kp,useCallback:function(d,p){return Xi().memoizedState=[d,p===void 0?null:p],d},useContext:Ei,useEffect:Rh,useImperativeHandle:function(d,p,b){b=b!=null?b.concat([d]):null,Yu(4194308,4,Np.bind(null,p,d),b)},useLayoutEffect:function(d,p){return Yu(4194308,4,d,p)},useInsertionEffect:function(d,p){Yu(4,2,d,p)},useMemo:function(d,p){var b=Xi();p=p===void 0?null:p;var E=d();if(Wu){ln(!0);try{d()}finally{ln(!1)}}return b.memoizedState=[E,p],E},useReducer:function(d,p,b){var E=Xi();if(b!==void 0){var A=b(p);if(Wu){ln(!0);try{b(p)}finally{ln(!1)}}}else A=p;return E.memoizedState=E.baseState=A,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:A},E.queue=d,d=d.dispatch=Xt.bind(null,sr,d),[E.memoizedState,d]},useRef:function(d){var p=Xi();return d={current:d},p.memoizedState=d},useState:function(d){d=He(d);var p=d.queue,b=mn.bind(null,sr,p);return p.dispatch=b,[d.memoizedState,b]},useDebugValue:el,useDeferredValue:function(d,p){var b=Xi();return tr(b,d,p)},useTransition:function(){var d=He(!1);return d=Vr.bind(null,sr,d.queue,!0,!1),Xi().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,p,b){var E=sr,A=Xi();if(Mr){if(b===void 0)throw Error(r(407));b=b()}else{if(b=p(),Us===null)throw Error(r(349));($r&127)!==0||G(E,p,b)}A.memoizedState=b;var I={value:b,getSnapshot:p};return A.queue=I,Rh(ve.bind(null,E,I,d),[d]),E.flags|=2048,fc(9,{destroy:void 0},se.bind(null,E,I,b,p),null),b},useId:function(){var d=Xi(),p=Us.identifierPrefix;if(Mr){var b=Dl,E=Bo;b=(E&~(1<<32-jt(E)-1)).toString(32)+b,p="_"+p+"R_"+b,b=Eg++,0<b&&(p+="H"+b.toString(32)),p+="_"}else b=Ah++,p="_"+p+"r_"+b.toString(32)+"_";return d.memoizedState=p},useHostTransitionStatus:or,useFormState:es,useActionState:es,useOptimistic:function(d){var p=Xi();p.memoizedState=p.baseState=d;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=cn.bind(null,sr,!0,b),b.dispatch=p,[d,p]},useMemoCache:_g,useCacheRefresh:function(){return Xi().memoizedState=oo.bind(null,sr)},useEffectEvent:function(d){var p=Xi(),b={impl:d};return p.memoizedState=b,function(){if((fs&2)!==0)throw Error(r(440));return b.impl.apply(void 0,arguments)}}},wr={readContext:Ei,use:kp,useCallback:Ip,useContext:Ei,useEffect:ef,useImperativeHandle:nf,useInsertionEffect:Si,useLayoutEffect:tf,useMemo:Mt,useReducer:Ap,useRef:Ih,useState:function(){return Ap(dc)},useDebugValue:el,useDeferredValue:function(d,p){var b=mo();return zn(b,ms.memoizedState,d,p)},useTransition:function(){var d=Ap(dc)[0],p=mo().memoizedState;return[typeof d=="boolean"?d:Nh(d),p]},useSyncExternalStore:N,useId:ko,useHostTransitionStatus:or,useFormState:so,useActionState:so,useOptimistic:function(d,p){var b=mo();return gt(b,ms,d,p)},useMemoCache:_g,useCacheRefresh:Yr};wr.useEffectEvent=Co;var nr={readContext:Ei,use:kp,useCallback:Ip,useContext:Ei,useEffect:ef,useImperativeHandle:nf,useInsertionEffect:Si,useLayoutEffect:tf,useMemo:Mt,useReducer:Tg,useRef:Ih,useState:function(){return Tg(dc)},useDebugValue:el,useDeferredValue:function(d,p){var b=mo();return ms===null?tr(b,d,p):zn(b,ms.memoizedState,d,p)},useTransition:function(){var d=Tg(dc)[0],p=mo().memoizedState;return[typeof d=="boolean"?d:Nh(d),p]},useSyncExternalStore:N,useId:ko,useHostTransitionStatus:or,useFormState:Ia,useActionState:Ia,useOptimistic:function(d,p){var b=mo();return ms!==null?gt(b,ms,d,p):(b.baseState=d,[d,b.queue.dispatch])},useMemoCache:_g,useCacheRefresh:Yr};nr.useEffectEvent=Co;function Ys(d,p,b,E){p=d.memoizedState,b=b(E,p),b=b==null?p:f({},p,b),d.memoizedState=b,d.lanes===0&&(d.updateQueue.baseState=b)}var Ms={enqueueSetState:function(d,p,b){d=d._reactInternals;var E=Fl(),A=Uu(E);A.payload=p,b!=null&&(A.callback=b),p=Hu(d,A,E),p!==null&&(ol(p,d,E),Vu(p,d,E))},enqueueReplaceState:function(d,p,b){d=d._reactInternals;var E=Fl(),A=Uu(E);A.tag=1,A.payload=p,b!=null&&(A.callback=b),p=Hu(d,A,E),p!==null&&(ol(p,d,E),Vu(p,d,E))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var b=Fl(),E=Uu(b);E.tag=2,p!=null&&(E.callback=p),p=Hu(d,E,b),p!==null&&(ol(p,d,b),Vu(p,d,b))}};function oi(d,p,b,E,A,I,K){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(E,I,K):p.prototype&&p.prototype.isPureReactComponent?!lp(b,E)||!lp(A,I):!0}function Rp(d,p,b,E){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,E),p.state!==d&&Ms.enqueueReplaceState(p,p.state,null)}function Ao(d,p){var b=p;if("ref"in p){b={};for(var E in p)E!=="ref"&&(b[E]=p[E])}if(d=d.defaultProps){b===p&&(b=f({},b));for(var A in d)b[A]===void 0&&(b[A]=d[A])}return b}function Ra(d){Hd(d)}function gs(d){console.error(d)}function Ks(d){Hd(d)}function Zs(d,p){try{var b=d.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function Os(d,p,b){try{var E=d.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function hc(d,p,b){return b=Uu(b),b.tag=3,b.payload={element:null},b.callback=function(){Zs(d,p)},b}function Cg(d){return d=Uu(d),d.tag=3,d}function m9(d,p,b,E){var A=b.type.getDerivedStateFromError;if(typeof A=="function"){var I=E.value;d.payload=function(){return A(I)},d.callback=function(){Os(p,b,E)}}var K=b.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(d.callback=function(){Os(p,b,E),typeof A!="function"&&(Ph===null?Ph=new Set([this]):Ph.add(this));var ae=E.stack;this.componentDidCatch(E.value,{componentStack:ae!==null?ae:""})})}function Vle(d,p,b,E,A){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=b.alternate,p!==null&&_h(p,b,A,!0),b=ei.current,b!==null){switch(b.tag){case 31:case 13:return Qa===null?$E():b.alternate===null&&Ho===0&&(Ho=3),b.flags&=-257,b.flags|=65536,b.lanes=A,E===gg?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([E]):p.add(E),W3(d,E,A)),!1;case 22:return b.flags|=65536,E===gg?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([E]):b.add(E)),W3(d,E,A)),!1}throw Error(r(435,b.tag))}return W3(d,E,A),$E(),!1}if(Mr)return p=ei.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=A,E!==lc&&(d=Error(r(422),{cause:E}),gp(fa(d,b)))):(E!==lc&&(p=Error(r(423),{cause:E}),gp(fa(p,b))),d=d.current.alternate,d.flags|=65536,A&=-A,d.lanes|=A,E=fa(E,b),A=hc(d.stateNode,E,A),yg(d,A),Ho!==4&&(Ho=2)),!1;var I=Error(r(520),{cause:E});if(I=fa(I,b),Sy===null?Sy=[I]:Sy.push(I),Ho!==4&&(Ho=2),p===null)return!0;E=fa(E,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,d=A&-A,b.lanes|=d,d=hc(b.stateNode,E,d),yg(b,d),!1;case 1:if(p=b.type,I=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ph===null||!Ph.has(I))))return b.flags|=65536,A&=-A,b.lanes|=A,A=Cg(A),m9(A,d,b,E),yg(b,A),!1}b=b.return}while(b!==null);return!1}var _3=Error(r(461)),ii=!1;function Qi(d,p,b,E){p.child=d===null?Ch(p,null,b,E):ju(p,d.child,b,E)}function g9(d,p,b,E,A){b=b.render;var I=p.ref;if("ref"in E){var K={};for(var ae in E)ae!=="ref"&&(K[ae]=E[ae])}else K=E;return qd(p),E=hy(d,p,b,K,I,A),ae=py(),d!==null&&!ii?(my(d,p,A),rf(d,p,A)):(Mr&&ae&&Vd(p),p.flags|=1,Qi(d,p,E,A),p.child)}function b9(d,p,b,E,A){if(d===null){var I=b.type;return typeof I=="function"&&!lg(I)&&I.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=I,y9(d,p,I,E,A)):(d=Ml(b.type,null,E,p,p.mode,A),d.ref=p.ref,d.return=p,p.child=d)}if(I=d.child,!R3(d,A)){var K=I.memoizedProps;if(b=b.compare,b=b!==null?b:lp,b(K,E)&&d.ref===p.ref)return rf(d,p,A)}return p.flags|=1,d=Rl(I,E),d.ref=p.ref,d.return=p,p.child=d}function y9(d,p,b,E,A){if(d!==null){var I=d.memoizedProps;if(lp(I,E)&&d.ref===p.ref)if(ii=!1,p.pendingProps=E=I,R3(d,A))(d.flags&131072)!==0&&(ii=!0);else return p.lanes=d.lanes,rf(d,p,A)}return S3(d,p,b,E,A)}function v9(d,p,b,E){var A=E.children,I=d!==null?d.memoizedState:null;if(d===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((p.flags&128)!==0){if(I=I!==null?I.baseLanes|b:b,d!==null){for(E=p.child=d.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;E=A&~I}else E=0,p.child=null;return x9(d,p,I,b,E)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},d!==null&&yp(p,I!==null?I.cachePool:null),I!==null?ly(p,I):cy(),dy(p);else return E=p.lanes=536870912,x9(d,p,I!==null?I.baseLanes|b:b,b,E)}else I!==null?(yp(p,I.cachePool),ly(p,I),Gu(),p.memoizedState=null):(d!==null&&yp(p,null),cy(),Gu());return Qi(d,p,A,b),p.child}function by(d,p){return d!==null&&d.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function x9(d,p,b,E,A){var I=sy();return I=I===null?null:{parent:zo._currentValue,pool:I},p.memoizedState={baseLanes:b,cachePool:I},d!==null&&yp(p,null),cy(),dy(p),d!==null&&_h(d,p,E,!0),p.childLanes=A,null}function CE(d,p){return p=AE({mode:p.mode,children:p.children},d.mode),p.ref=d.ref,d.child=p,p.return=d,p}function w9(d,p,b){return ju(p,d.child,null,b),d=CE(p,p.pendingProps),d.flags|=2,Na(p),p.memoizedState=null,d}function qle(d,p,b){var E=p.pendingProps,A=(p.flags&128)!==0;if(p.flags&=-129,d===null){if(Mr){if(E.mode==="hidden")return d=CE(p,E),p.lanes=536870912,by(null,d);if(uy(p),(d=us)?(d=OO(d,Ns),d=d!==null&&d.data==="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:Ja!==null?{id:Bo,overflow:Dl}:null,retryLane:536870912,hydrationErrors:null},b=Qb(d),b.return=p,p.child=b,no=p,us=null)):d=null,d===null)throw Wc(p);return p.lanes=536870912,null}return CE(p,E)}var I=d.memoizedState;if(I!==null){var K=I.dehydrated;if(uy(p),A)if(p.flags&256)p.flags&=-257,p=w9(d,p,b);else if(p.memoizedState!==null)p.child=d.child,p.flags|=128,p=null;else throw Error(r(558));else if(ii||_h(d,p,b,!1),A=(b&d.childLanes)!==0,ii||A){if(E=Us,E!==null&&(K=In(E,b),K!==0&&K!==I.retryLane))throw I.retryLane=K,qc(d,K),ol(E,d,K),_3;$E(),p=w9(d,p,b)}else d=I.treeContext,us=pc(K.nextSibling),no=p,Mr=!0,ds=null,Ns=!1,d!==null&&ug(p,d),p=CE(p,E),p.flags|=4096;return p}return d=Rl(d.child,{mode:E.mode,children:E.children}),d.ref=p.ref,p.child=d,d.return=p,d}function kE(d,p){var b=p.ref;if(b===null)d!==null&&d.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(d===null||d.ref!==b)&&(p.flags|=4194816)}}function S3(d,p,b,E,A){return qd(p),b=hy(d,p,b,E,void 0,A),E=py(),d!==null&&!ii?(my(d,p,A),rf(d,p,A)):(Mr&&E&&Vd(p),p.flags|=1,Qi(d,p,b,A),p.child)}function E9(d,p,b,E,A,I){return qd(p),p.updateQueue=null,b=TE(p,E,b,A),SE(d),E=py(),d!==null&&!ii?(my(d,p,I),rf(d,p,I)):(Mr&&E&&Vd(p),p.flags|=1,Qi(d,p,b,I),p.child)}function _9(d,p,b,E,A){if(qd(p),p.stateNode===null){var I=Zi,K=b.contextType;typeof K=="object"&&K!==null&&(I=Ei(K)),I=new b(E,I),p.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=Ms,p.stateNode=I,I._reactInternals=p,I=p.stateNode,I.props=E,I.state=p.memoizedState,I.refs={},Xd(p),K=b.contextType,I.context=typeof K=="object"&&K!==null?Ei(K):Zi,I.state=p.memoizedState,K=b.getDerivedStateFromProps,typeof K=="function"&&(Ys(p,b,K,E),I.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(K=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),K!==I.state&&Ms.enqueueReplaceState(I,I.state,null),_p(p,E,I,A),Ep(),I.state=p.memoizedState),typeof I.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(d===null){I=p.stateNode;var ae=p.memoizedProps,ke=Ao(b,ae);I.props=ke;var Ye=I.context,st=b.contextType;K=Zi,typeof st=="object"&&st!==null&&(K=Ei(st));var dt=b.getDerivedStateFromProps;st=typeof dt=="function"||typeof I.getSnapshotBeforeUpdate=="function",ae=p.pendingProps!==ae,st||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(ae||Ye!==K)&&Rp(p,I,E,K),Kc=!1;var Ke=p.memoizedState;I.state=Ke,_p(p,E,I,A),Ep(),Ye=p.memoizedState,ae||Ke!==Ye||Kc?(typeof dt=="function"&&(Ys(p,b,dt,E),Ye=p.memoizedState),(ke=Kc||oi(p,b,ke,E,Ke,Ye,K))?(st||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(p.flags|=4194308)):(typeof I.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=Ye),I.props=E,I.state=Ye,I.context=K,E=ke):(typeof I.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{I=p.stateNode,bg(d,p),K=p.memoizedProps,st=Ao(b,K),I.props=st,dt=p.pendingProps,Ke=I.context,Ye=b.contextType,ke=Zi,typeof Ye=="object"&&Ye!==null&&(ke=Ei(Ye)),ae=b.getDerivedStateFromProps,(Ye=typeof ae=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(K!==dt||Ke!==ke)&&Rp(p,I,E,ke),Kc=!1,Ke=p.memoizedState,I.state=Ke,_p(p,E,I,A),Ep();var Xe=p.memoizedState;K!==dt||Ke!==Xe||Kc||d!==null&&d.dependencies!==null&&hg(d.dependencies)?(typeof ae=="function"&&(Ys(p,b,ae,E),Xe=p.memoizedState),(st=Kc||oi(p,b,st,E,Ke,Xe,ke)||d!==null&&d.dependencies!==null&&hg(d.dependencies))?(Ye||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(E,Xe,ke),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(E,Xe,ke)),typeof I.componentDidUpdate=="function"&&(p.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof I.componentDidUpdate!="function"||K===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||K===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=Xe),I.props=E,I.state=Xe,I.context=ke,E=st):(typeof I.componentDidUpdate!="function"||K===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||K===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=1024),E=!1)}return I=E,kE(d,p),E=(p.flags&128)!==0,I||E?(I=p.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:I.render(),p.flags|=1,d!==null&&E?(p.child=ju(p,d.child,null,A),p.child=ju(p,null,b,A)):Qi(d,p,b,A),p.memoizedState=I.state,d=p.child):d=rf(d,p,A),d}function S9(d,p,b,E){return Fu(),p.flags|=256,Qi(d,p,b,E),p.child}var T3={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function C3(d){return{baseLanes:d,cachePool:oy()}}function k3(d,p,b){return d=d!==null?d.childLanes&~b:0,p&&(d|=$l),d}function T9(d,p,b){var E=p.pendingProps,A=!1,I=(p.flags&128)!==0,K;if((K=I)||(K=d!==null&&d.memoizedState===null?!1:(To.current&2)!==0),K&&(A=!0,p.flags&=-129),K=(p.flags&32)!==0,p.flags&=-33,d===null){if(Mr){if(A?qu(p):Gu(),(d=us)?(d=OO(d,Ns),d=d!==null&&d.data!=="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:Ja!==null?{id:Bo,overflow:Dl}:null,retryLane:536870912,hydrationErrors:null},b=Qb(d),b.return=p,p.child=b,no=p,us=null)):d=null,d===null)throw Wc(p);return c5(d)?p.lanes=32:p.lanes=536870912,null}var ae=E.children;return E=E.fallback,A?(Gu(),A=p.mode,ae=AE({mode:"hidden",children:ae},A),E=$u(E,A,b,null),ae.return=p,E.return=p,ae.sibling=E,p.child=ae,E=p.child,E.memoizedState=C3(b),E.childLanes=k3(d,K,b),p.memoizedState=T3,by(null,E)):(qu(p),A3(p,ae))}var ke=d.memoizedState;if(ke!==null&&(ae=ke.dehydrated,ae!==null)){if(I)p.flags&256?(qu(p),p.flags&=-257,p=N3(d,p,b)):p.memoizedState!==null?(Gu(),p.child=d.child,p.flags|=128,p=null):(Gu(),ae=E.fallback,A=p.mode,E=AE({mode:"visible",children:E.children},A),ae=$u(ae,A,b,null),ae.flags|=2,E.return=p,ae.return=p,E.sibling=ae,p.child=E,ju(p,d.child,null,b),E=p.child,E.memoizedState=C3(b),E.childLanes=k3(d,K,b),p.memoizedState=T3,p=by(null,E));else if(qu(p),c5(ae)){if(K=ae.nextSibling&&ae.nextSibling.dataset,K)var Ye=K.dgst;K=Ye,E=Error(r(419)),E.stack="",E.digest=K,gp({value:E,source:null,stack:null}),p=N3(d,p,b)}else if(ii||_h(d,p,b,!1),K=(b&d.childLanes)!==0,ii||K){if(K=Us,K!==null&&(E=In(K,b),E!==0&&E!==ke.retryLane))throw ke.retryLane=E,qc(d,E),ol(K,d,E),_3;l5(ae)||$E(),p=N3(d,p,b)}else l5(ae)?(p.flags|=192,p.child=d.child,p=null):(d=ke.treeContext,us=pc(ae.nextSibling),no=p,Mr=!0,ds=null,Ns=!1,d!==null&&ug(p,d),p=A3(p,E.children),p.flags|=4096);return p}return A?(Gu(),ae=E.fallback,A=p.mode,ke=d.child,Ye=ke.sibling,E=Rl(ke,{mode:"hidden",children:E.children}),E.subtreeFlags=ke.subtreeFlags&65011712,Ye!==null?ae=Rl(Ye,ae):(ae=$u(ae,A,b,null),ae.flags|=2),ae.return=p,E.return=p,E.sibling=ae,p.child=E,by(null,E),E=p.child,ae=d.child.memoizedState,ae===null?ae=C3(b):(A=ae.cachePool,A!==null?(ke=zo._currentValue,A=A.parent!==ke?{parent:ke,pool:ke}:A):A=oy(),ae={baseLanes:ae.baseLanes|b,cachePool:A}),E.memoizedState=ae,E.childLanes=k3(d,K,b),p.memoizedState=T3,by(d.child,E)):(qu(p),b=d.child,d=b.sibling,b=Rl(b,{mode:"visible",children:E.children}),b.return=p,b.sibling=null,d!==null&&(K=p.deletions,K===null?(p.deletions=[d],p.flags|=16):K.push(d)),p.child=b,p.memoizedState=null,b)}function A3(d,p){return p=AE({mode:"visible",children:p},d.mode),p.return=d,d.child=p}function AE(d,p){return d=Fo(22,d,null,p),d.lanes=0,d}function N3(d,p,b){return ju(p,d.child,null,b),d=A3(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function C9(d,p,b){d.lanes|=p;var E=d.alternate;E!==null&&(E.lanes|=p),ny(d.return,p,b)}function I3(d,p,b,E,A,I){var K=d.memoizedState;K===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:A,treeForkCount:I}:(K.isBackwards=p,K.rendering=null,K.renderingStartTime=0,K.last=E,K.tail=b,K.tailMode=A,K.treeForkCount=I)}function k9(d,p,b){var E=p.pendingProps,A=E.revealOrder,I=E.tail;E=E.children;var K=To.current,ae=(K&2)!==0;if(ae?(K=K&1|2,p.flags|=128):K&=1,Q(To,K),Qi(d,p,E,b),E=Mr?Eh:0,!ae&&d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&C9(d,b,p);else if(d.tag===19)C9(d,b,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(A){case"forwards":for(b=p.child,A=null;b!==null;)d=b.alternate,d!==null&&wg(d)===null&&(A=b),b=b.sibling;b=A,b===null?(A=p.child,p.child=null):(A=b.sibling,b.sibling=null),I3(p,!1,A,b,I,E);break;case"backwards":case"unstable_legacy-backwards":for(b=null,A=p.child,p.child=null;A!==null;){if(d=A.alternate,d!==null&&wg(d)===null){p.child=A;break}d=A.sibling,A.sibling=b,b=A,A=d}I3(p,!0,b,null,I,E);break;case"together":I3(p,!1,null,null,void 0,E);break;default:p.memoizedState=null}return p.child}function rf(d,p,b){if(d!==null&&(p.dependencies=d.dependencies),Dh|=p.lanes,(b&p.childLanes)===0)if(d!==null){if(_h(d,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(d!==null&&p.child!==d.child)throw Error(r(153));if(p.child!==null){for(d=p.child,b=Rl(d,d.pendingProps),p.child=b,b.return=p;d.sibling!==null;)d=d.sibling,b=b.sibling=Rl(d,d.pendingProps),b.return=p;b.sibling=null}return p.child}function R3(d,p){return(d.lanes&p)!==0?!0:(d=d.dependencies,!!(d!==null&&hg(d)))}function Gle(d,p,b){switch(p.tag){case 3:Fe(p,p.stateNode.containerInfo),Bu(p,zo,d.memoizedState.cache),Fu();break;case 27:case 5:Re(p);break;case 4:Fe(p,p.stateNode.containerInfo);break;case 10:Bu(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,uy(p),null;break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(qu(p),p.flags|=128,null):(b&p.child.childLanes)!==0?T9(d,p,b):(qu(p),d=rf(d,p,b),d!==null?d.sibling:null);qu(p);break;case 19:var A=(d.flags&128)!==0;if(E=(b&p.childLanes)!==0,E||(_h(d,p,b,!1),E=(b&p.childLanes)!==0),A){if(E)return k9(d,p,b);p.flags|=128}if(A=p.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Q(To,To.current),E)break;return null;case 22:return p.lanes=0,v9(d,p,b,p.pendingProps);case 24:Bu(p,zo,d.memoizedState.cache)}return rf(d,p,b)}function A9(d,p,b){if(d!==null)if(d.memoizedProps!==p.pendingProps)ii=!0;else{if(!R3(d,b)&&(p.flags&128)===0)return ii=!1,Gle(d,p,b);ii=(d.flags&131072)!==0}else ii=!1,Mr&&(p.flags&1048576)!==0&&mE(p,Eh,p.index);switch(p.lanes=0,p.tag){case 16:e:{var E=p.pendingProps;if(d=Xa(p.elementType),p.type=d,typeof d=="function")lg(d)?(E=Ao(d,E),p.tag=1,p=_9(null,p,d,E,b)):(p.tag=0,p=S3(null,p,d,E,b));else{if(d!=null){var A=d.$$typeof;if(A===R){p.tag=11,p=g9(null,p,d,E,b);break e}else if(A===P){p.tag=14,p=b9(null,p,d,E,b);break e}}throw p=W(d)||d,Error(r(306,p,""))}}return p;case 0:return S3(d,p,p.type,p.pendingProps,b);case 1:return E=p.type,A=Ao(E,p.pendingProps),_9(d,p,E,A,b);case 3:e:{if(Fe(p,p.stateNode.containerInfo),d===null)throw Error(r(387));E=p.pendingProps;var I=p.memoizedState;A=I.element,bg(d,p),_p(p,E,null,b);var K=p.memoizedState;if(E=K.cache,Bu(p,zo,E),E!==I.cache&&fg(p,[zo],b,!0),Ep(),E=K.element,I.isDehydrated)if(I={element:E,isDehydrated:!1,cache:K.cache},p.updateQueue.baseState=I,p.memoizedState=I,p.flags&256){p=S9(d,p,E,b);break e}else if(E!==A){A=fa(Error(r(424)),p),gp(A),p=S9(d,p,E,b);break e}else{switch(d=p.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(us=pc(d.firstChild),no=p,Mr=!0,ds=null,Ns=!0,b=Ch(p,null,E,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(Fu(),E===A){p=rf(d,p,b);break e}Qi(d,p,E,b)}p=p.child}return p;case 26:return kE(d,p),d===null?(b=BO(p.type,null,p.pendingProps,null))?p.memoizedState=b:Mr||(b=p.type,d=p.pendingProps,E=VE(Ce.current).createElement(b),E[gr]=p,E[Do]=d,ea(E,b,d),mt(E),p.stateNode=E):p.memoizedState=BO(p.type,d.memoizedProps,p.pendingProps,d.memoizedState),null;case 27:return Re(p),d===null&&Mr&&(E=p.stateNode=LO(p.type,p.pendingProps,Ce.current),no=p,Ns=!0,A=us,Bh(p.type)?(u5=A,us=pc(E.firstChild)):us=A),Qi(d,p,p.pendingProps.children,b),kE(d,p),d===null&&(p.flags|=4194304),p.child;case 5:return d===null&&Mr&&((A=E=us)&&(E=Ece(E,p.type,p.pendingProps,Ns),E!==null?(p.stateNode=E,no=p,us=pc(E.firstChild),Ns=!1,A=!0):A=!1),A||Wc(p)),Re(p),A=p.type,I=p.pendingProps,K=d!==null?d.memoizedProps:null,E=I.children,o5(A,I)?E=null:K!==null&&o5(A,K)&&(p.flags|=32),p.memoizedState!==null&&(A=hy(d,p,E3,null,null,b),My._currentValue=A),kE(d,p),Qi(d,p,E,b),p.child;case 6:return d===null&&Mr&&((d=b=us)&&(b=_ce(b,p.pendingProps,Ns),b!==null?(p.stateNode=b,no=p,us=null,d=!0):d=!1),d||Wc(p)),null;case 13:return T9(d,p,b);case 4:return Fe(p,p.stateNode.containerInfo),E=p.pendingProps,d===null?p.child=ju(p,null,E,b):Qi(d,p,E,b),p.child;case 11:return g9(d,p,p.type,p.pendingProps,b);case 7:return Qi(d,p,p.pendingProps,b),p.child;case 8:return Qi(d,p,p.pendingProps.children,b),p.child;case 12:return Qi(d,p,p.pendingProps.children,b),p.child;case 10:return E=p.pendingProps,Bu(p,p.type,E.value),Qi(d,p,E.children,b),p.child;case 9:return A=p.type._context,E=p.pendingProps.children,qd(p),A=Ei(A),E=E(A),p.flags|=1,Qi(d,p,E,b),p.child;case 14:return b9(d,p,p.type,p.pendingProps,b);case 15:return y9(d,p,p.type,p.pendingProps,b);case 19:return k9(d,p,b);case 31:return qle(d,p,b);case 22:return v9(d,p,b,p.pendingProps);case 24:return qd(p),E=Ei(zo),d===null?(A=sy(),A===null&&(A=Us,I=ry(),A.pooledCache=I,I.refCount++,I!==null&&(A.pooledCacheLanes|=b),A=I),p.memoizedState={parent:E,cache:A},Xd(p),Bu(p,zo,A)):((d.lanes&b)!==0&&(bg(d,p),_p(p,null,null,b),Ep()),A=d.memoizedState,I=p.memoizedState,A.parent!==E?(A={parent:E,cache:E},p.memoizedState=A,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=A),Bu(p,zo,E)):(E=I.cache,Bu(p,zo,E),E!==A.cache&&fg(p,[zo],b,!0))),Qi(d,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function sf(d){d.flags|=4}function M3(d,p,b,E,A){if((p=(d.mode&32)!==0)&&(p=!1),p){if(d.flags|=16777216,(A&335544128)===A)if(d.stateNode.complete)d.flags|=8192;else if(tO())d.flags|=8192;else throw Jd=gg,vp}else d.flags&=-16777217}function N9(d,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!VO(p))if(tO())d.flags|=8192;else throw Jd=gg,vp}function NE(d,p){p!==null&&(d.flags|=4),d.flags&16384&&(p=d.tag!==22?Jt():536870912,d.lanes|=p,Ig|=p)}function yy(d,p){if(!Mr)switch(d.tailMode){case"hidden":p=d.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?d.tail=null:b.sibling=null;break;case"collapsed":b=d.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:E.sibling=null}}function io(d){var p=d.alternate!==null&&d.alternate.child===d.child,b=0,E=0;if(p)for(var A=d.child;A!==null;)b|=A.lanes|A.childLanes,E|=A.subtreeFlags&65011712,E|=A.flags&65011712,A.return=d,A=A.sibling;else for(A=d.child;A!==null;)b|=A.lanes|A.childLanes,E|=A.subtreeFlags,E|=A.flags,A.return=d,A=A.sibling;return d.subtreeFlags|=E,d.childLanes=b,p}function Wle(d,p,b){var E=p.pendingProps;switch($i(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return io(p),null;case 1:return io(p),null;case 3:return b=p.stateNode,E=null,d!==null&&(E=d.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),Yc(zo),De(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(d===null||d.child===null)&&(Tn(p)?sf(p):d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,ty())),io(p),null;case 26:var A=p.type,I=p.memoizedState;return d===null?(sf(p),I!==null?(io(p),N9(p,I)):(io(p),M3(p,A,null,E,b))):I?I!==d.memoizedState?(sf(p),io(p),N9(p,I)):(io(p),p.flags&=-16777217):(d=d.memoizedProps,d!==E&&sf(p),io(p),M3(p,A,d,E,b)),null;case 27:if(tt(p),b=Ce.current,A=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==E&&sf(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return io(p),null}d=Te.current,Tn(p)?Xn(p):(d=LO(A,E,b),p.stateNode=d,sf(p))}return io(p),null;case 5:if(tt(p),A=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==E&&sf(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return io(p),null}if(I=Te.current,Tn(p))Xn(p);else{var K=VE(Ce.current);switch(I){case 1:I=K.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:I=K.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":I=K.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":I=K.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":I=K.createElement("div"),I.innerHTML="<script><\/script>",I=I.removeChild(I.firstChild);break;case"select":I=typeof E.is=="string"?K.createElement("select",{is:E.is}):K.createElement("select"),E.multiple?I.multiple=!0:E.size&&(I.size=E.size);break;default:I=typeof E.is=="string"?K.createElement(A,{is:E.is}):K.createElement(A)}}I[gr]=p,I[Do]=E;e:for(K=p.child;K!==null;){if(K.tag===5||K.tag===6)I.appendChild(K.stateNode);else if(K.tag!==4&&K.tag!==27&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===p)break e;for(;K.sibling===null;){if(K.return===null||K.return===p)break e;K=K.return}K.sibling.return=K.return,K=K.sibling}p.stateNode=I;e:switch(ea(I,A,E),A){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&sf(p)}}return io(p),M3(p,p.type,d===null?null:d.memoizedProps,p.pendingProps,b),null;case 6:if(d&&p.stateNode!=null)d.memoizedProps!==E&&sf(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(r(166));if(d=Ce.current,Tn(p)){if(d=p.stateNode,b=p.memoizedProps,E=null,A=no,A!==null)switch(A.tag){case 27:case 5:E=A.memoizedProps}d[gr]=p,d=!!(d.nodeValue===b||E!==null&&E.suppressHydrationWarning===!0||TO(d.nodeValue,b)),d||Wc(p,!0)}else d=VE(d).createTextNode(E),d[gr]=p,p.stateNode=d}return io(p),null;case 31:if(b=p.memoizedState,d===null||d.memoizedState!==null){if(E=Tn(p),b!==null){if(d===null){if(!E)throw Error(r(318));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(557));d[gr]=p}else Fu(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;io(p),d=!1}else b=ty(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=b),d=!0;if(!d)return p.flags&256?(Na(p),p):(Na(p),null);if((p.flags&128)!==0)throw Error(r(558))}return io(p),null;case 13:if(E=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(A=Tn(p),E!==null&&E.dehydrated!==null){if(d===null){if(!A)throw Error(r(318));if(A=p.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[gr]=p}else Fu(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;io(p),A=!1}else A=ty(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=A),A=!0;if(!A)return p.flags&256?(Na(p),p):(Na(p),null)}return Na(p),(p.flags&128)!==0?(p.lanes=b,p):(b=E!==null,d=d!==null&&d.memoizedState!==null,b&&(E=p.child,A=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(A=E.alternate.memoizedState.cachePool.pool),I=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(I=E.memoizedState.cachePool.pool),I!==A&&(E.flags|=2048)),b!==d&&b&&(p.child.flags|=8192),NE(p,p.updateQueue),io(p),null);case 4:return De(),d===null&&e5(p.stateNode.containerInfo),io(p),null;case 10:return Yc(p.type),io(p),null;case 19:if(oe(To),E=p.memoizedState,E===null)return io(p),null;if(A=(p.flags&128)!==0,I=E.rendering,I===null)if(A)yy(E,!1);else{if(Ho!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(I=wg(d),I!==null){for(p.flags|=128,yy(E,!1),d=I.updateQueue,p.updateQueue=d,NE(p,d),p.subtreeFlags=0,d=b,b=p.child;b!==null;)pE(b,d),b=b.sibling;return Q(To,To.current&1|2),Mr&&So(p,E.treeForkCount),p.child}d=d.sibling}E.tail!==null&&Le()>DE&&(p.flags|=128,A=!0,yy(E,!1),p.lanes=4194304)}else{if(!A)if(d=wg(I),d!==null){if(p.flags|=128,A=!0,d=d.updateQueue,p.updateQueue=d,NE(p,d),yy(E,!0),E.tail===null&&E.tailMode==="hidden"&&!I.alternate&&!Mr)return io(p),null}else 2*Le()-E.renderingStartTime>DE&&b!==536870912&&(p.flags|=128,A=!0,yy(E,!1),p.lanes=4194304);E.isBackwards?(I.sibling=p.child,p.child=I):(d=E.last,d!==null?d.sibling=I:p.child=I,E.last=I)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=Le(),d.sibling=null,b=To.current,Q(To,A?b&1|2:b&1),Mr&&So(p,E.treeForkCount),d):(io(p),null);case 22:case 23:return Na(p),Sp(),E=p.memoizedState!==null,d!==null?d.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(b&536870912)!==0&&(p.flags&128)===0&&(io(p),p.subtreeFlags&6&&(p.flags|=8192)):io(p),b=p.updateQueue,b!==null&&NE(p,b.retryQueue),b=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048),d!==null&&oe(Kd),null;case 24:return b=null,d!==null&&(b=d.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),Yc(zo),io(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function Yle(d,p){switch($i(p),p.tag){case 1:return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return Yc(zo),De(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 26:case 27:case 5:return tt(p),null;case 31:if(p.memoizedState!==null){if(Na(p),p.alternate===null)throw Error(r(340));Fu()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 13:if(Na(p),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Fu()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return oe(To),null;case 4:return De(),null;case 10:return Yc(p.type),null;case 22:case 23:return Na(p),Sp(),d!==null&&oe(Kd),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 24:return Yc(zo),null;case 25:return null;default:return null}}function I9(d,p){switch($i(p),p.tag){case 3:Yc(zo),De();break;case 26:case 27:case 5:tt(p);break;case 4:De();break;case 31:p.memoizedState!==null&&Na(p);break;case 13:Na(p);break;case 19:oe(To);break;case 10:Yc(p.type);break;case 22:case 23:Na(p),Sp(),d!==null&&oe(Kd);break;case 24:Yc(zo)}}function vy(d,p){try{var b=p.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var A=E.next;b=A;do{if((b.tag&d)===d){E=void 0;var I=b.create,K=b.inst;E=I(),K.destroy=E}b=b.next}while(b!==A)}}catch(ae){Es(p,p.return,ae)}}function Mh(d,p,b){try{var E=p.updateQueue,A=E!==null?E.lastEffect:null;if(A!==null){var I=A.next;E=I;do{if((E.tag&d)===d){var K=E.inst,ae=K.destroy;if(ae!==void 0){K.destroy=void 0,A=p;var ke=b,Ye=ae;try{Ye()}catch(st){Es(A,ke,st)}}}E=E.next}while(E!==I)}}catch(st){Es(p,p.return,st)}}function R9(d){var p=d.updateQueue;if(p!==null){var b=d.stateNode;try{_E(p,b)}catch(E){Es(d,d.return,E)}}}function M9(d,p,b){b.props=Ao(d.type,d.memoizedProps),b.state=d.memoizedState;try{b.componentWillUnmount()}catch(E){Es(d,p,E)}}function xy(d,p){try{var b=d.ref;if(b!==null){switch(d.tag){case 26:case 27:case 5:var E=d.stateNode;break;case 30:E=d.stateNode;break;default:E=d.stateNode}typeof b=="function"?d.refCleanup=b(E):b.current=E}}catch(A){Es(d,p,A)}}function Zu(d,p){var b=d.ref,E=d.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(A){Es(d,p,A)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(A){Es(d,p,A)}else b.current=null}function O9(d){var p=d.type,b=d.memoizedProps,E=d.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&E.focus();break e;case"img":b.src?E.src=b.src:b.srcSet&&(E.srcset=b.srcSet)}}catch(A){Es(d,d.return,A)}}function O3(d,p,b){try{var E=d.stateNode;gce(E,d.type,b,p),E[Do]=p}catch(A){Es(d,d.return,A)}}function D9(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&Bh(d.type)||d.tag===4}function D3(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||D9(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&Bh(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function P3(d,p,b){var E=d.tag;if(E===5||E===6)d=d.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(d,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(d),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=$t));else if(E!==4&&(E===27&&Bh(d.type)&&(b=d.stateNode,p=null),d=d.child,d!==null))for(P3(d,p,b),d=d.sibling;d!==null;)P3(d,p,b),d=d.sibling}function IE(d,p,b){var E=d.tag;if(E===5||E===6)d=d.stateNode,p?b.insertBefore(d,p):b.appendChild(d);else if(E!==4&&(E===27&&Bh(d.type)&&(b=d.stateNode),d=d.child,d!==null))for(IE(d,p,b),d=d.sibling;d!==null;)IE(d,p,b),d=d.sibling}function P9(d){var p=d.stateNode,b=d.memoizedProps;try{for(var E=d.type,A=p.attributes;A.length;)p.removeAttributeNode(A[0]);ea(p,E,b),p[gr]=d,p[Do]=b}catch(I){Es(d,d.return,I)}}var of=!1,ai=!1,L3=!1,L9=typeof WeakSet=="function"?WeakSet:Set,Fi=null;function Kle(d,p){if(d=d.containerInfo,r5=JE,d=bh(d),cp(d)){if("selectionStart"in d)var b={start:d.selectionStart,end:d.selectionEnd};else e:{b=(b=d.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var A=E.anchorOffset,I=E.focusNode;E=E.focusOffset;try{b.nodeType,I.nodeType}catch{b=null;break e}var K=0,ae=-1,ke=-1,Ye=0,st=0,dt=d,Ke=null;t:for(;;){for(var Xe;dt!==b||A!==0&&dt.nodeType!==3||(ae=K+A),dt!==I||E!==0&&dt.nodeType!==3||(ke=K+E),dt.nodeType===3&&(K+=dt.nodeValue.length),(Xe=dt.firstChild)!==null;)Ke=dt,dt=Xe;for(;;){if(dt===d)break t;if(Ke===b&&++Ye===A&&(ae=K),Ke===I&&++st===E&&(ke=K),(Xe=dt.nextSibling)!==null)break;dt=Ke,Ke=dt.parentNode}dt=Xe}b=ae===-1||ke===-1?null:{start:ae,end:ke}}else b=null}b=b||{start:0,end:0}}else b=null;for(s5={focusedElem:d,selectionRange:b},JE=!1,Fi=p;Fi!==null;)if(p=Fi,d=p.child,(p.subtreeFlags&1028)!==0&&d!==null)d.return=p,Fi=d;else for(;Fi!==null;){switch(p=Fi,I=p.alternate,d=p.flags,p.tag){case 0:if((d&4)!==0&&(d=p.updateQueue,d=d!==null?d.events:null,d!==null))for(b=0;b<d.length;b++)A=d[b],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((d&1024)!==0&&I!==null){d=void 0,b=p,A=I.memoizedProps,I=I.memoizedState,E=b.stateNode;try{var dn=Ao(b.type,A);d=E.getSnapshotBeforeUpdate(dn,I),E.__reactInternalSnapshotBeforeUpdate=d}catch(jn){Es(b,b.return,jn)}}break;case 3:if((d&1024)!==0){if(d=p.stateNode.containerInfo,b=d.nodeType,b===9)a5(d);else if(b===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":a5(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=p.sibling,d!==null){d.return=p.return,Fi=d;break}Fi=p.return}}function $9(d,p,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:lf(d,b),E&4&&vy(5,b);break;case 1:if(lf(d,b),E&4)if(d=b.stateNode,p===null)try{d.componentDidMount()}catch(K){Es(b,b.return,K)}else{var A=Ao(b.type,p.memoizedProps);p=p.memoizedState;try{d.componentDidUpdate(A,p,d.__reactInternalSnapshotBeforeUpdate)}catch(K){Es(b,b.return,K)}}E&64&&R9(b),E&512&&xy(b,b.return);break;case 3:if(lf(d,b),E&64&&(d=b.updateQueue,d!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{_E(d,p)}catch(K){Es(b,b.return,K)}}break;case 27:p===null&&E&4&&P9(b);case 26:case 5:lf(d,b),p===null&&E&4&&O9(b),E&512&&xy(b,b.return);break;case 12:lf(d,b);break;case 31:lf(d,b),E&4&&z9(d,b);break;case 13:lf(d,b),E&4&&j9(d,b),E&64&&(d=b.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(b=sce.bind(null,b),Sce(d,b))));break;case 22:if(E=b.memoizedState!==null||of,!E){p=p!==null&&p.memoizedState!==null||ai,A=of;var I=ai;of=E,(ai=p)&&!I?cf(d,b,(b.subtreeFlags&8772)!==0):lf(d,b),of=A,ai=I}break;case 30:break;default:lf(d,b)}}function F9(d){var p=d.alternate;p!==null&&(d.alternate=null,F9(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&Zn(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var go=null,tl=!1;function af(d,p,b){for(b=b.child;b!==null;)B9(d,p,b),b=b.sibling}function B9(d,p,b){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Be,b)}catch{}switch(b.tag){case 26:ai||Zu(b,p),af(d,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:ai||Zu(b,p);var E=go,A=tl;Bh(b.type)&&(go=b.stateNode,tl=!1),af(d,p,b),Ny(b.stateNode),go=E,tl=A;break;case 5:ai||Zu(b,p);case 6:if(E=go,A=tl,go=null,af(d,p,b),go=E,tl=A,go!==null)if(tl)try{(go.nodeType===9?go.body:go.nodeName==="HTML"?go.ownerDocument.body:go).removeChild(b.stateNode)}catch(I){Es(b,p,I)}else try{go.removeChild(b.stateNode)}catch(I){Es(b,p,I)}break;case 18:go!==null&&(tl?(d=go,RO(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,b.stateNode),Fg(d)):RO(go,b.stateNode));break;case 4:E=go,A=tl,go=b.stateNode.containerInfo,tl=!0,af(d,p,b),go=E,tl=A;break;case 0:case 11:case 14:case 15:Mh(2,b,p),ai||Mh(4,b,p),af(d,p,b);break;case 1:ai||(Zu(b,p),E=b.stateNode,typeof E.componentWillUnmount=="function"&&M9(b,p,E)),af(d,p,b);break;case 21:af(d,p,b);break;case 22:ai=(E=ai)||b.memoizedState!==null,af(d,p,b),ai=E;break;default:af(d,p,b)}}function z9(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{Fg(d)}catch(b){Es(p,p.return,b)}}}function j9(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Fg(d)}catch(b){Es(p,p.return,b)}}function Zle(d){switch(d.tag){case 31:case 13:case 19:var p=d.stateNode;return p===null&&(p=d.stateNode=new L9),p;case 22:return d=d.stateNode,p=d._retryCache,p===null&&(p=d._retryCache=new L9),p;default:throw Error(r(435,d.tag))}}function RE(d,p){var b=Zle(d);p.forEach(function(E){if(!b.has(E)){b.add(E);var A=oce.bind(null,d,E);E.then(A,A)}})}function nl(d,p){var b=p.deletions;if(b!==null)for(var E=0;E<b.length;E++){var A=b[E],I=d,K=p,ae=K;e:for(;ae!==null;){switch(ae.tag){case 27:if(Bh(ae.type)){go=ae.stateNode,tl=!1;break e}break;case 5:go=ae.stateNode,tl=!1;break e;case 3:case 4:go=ae.stateNode.containerInfo,tl=!0;break e}ae=ae.return}if(go===null)throw Error(r(160));B9(I,K,A),go=null,tl=!1,I=A.alternate,I!==null&&(I.return=null),A.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)U9(p,d),p=p.sibling}var Xc=null;function U9(d,p){var b=d.alternate,E=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:nl(p,d),rl(d),E&4&&(Mh(3,d,d.return),vy(3,d),Mh(5,d,d.return));break;case 1:nl(p,d),rl(d),E&512&&(ai||b===null||Zu(b,b.return)),E&64&&of&&(d=d.updateQueue,d!==null&&(E=d.callbacks,E!==null&&(b=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:var A=Xc;if(nl(p,d),rl(d),E&512&&(ai||b===null||Zu(b,b.return)),E&4){var I=b!==null?b.memoizedState:null;if(E=d.memoizedState,b===null)if(E===null)if(d.stateNode===null){e:{E=d.type,b=d.memoizedProps,A=A.ownerDocument||A;t:switch(E){case"title":I=A.getElementsByTagName("title")[0],(!I||I[As]||I[gr]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=A.createElement(E),A.head.insertBefore(I,A.querySelector("head > title"))),ea(I,E,b),I[gr]=d,mt(I),E=I;break e;case"link":var K=UO("link","href",A).get(E+(b.href||""));if(K){for(var ae=0;ae<K.length;ae++)if(I=K[ae],I.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&I.getAttribute("rel")===(b.rel==null?null:b.rel)&&I.getAttribute("title")===(b.title==null?null:b.title)&&I.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){K.splice(ae,1);break t}}I=A.createElement(E),ea(I,E,b),A.head.appendChild(I);break;case"meta":if(K=UO("meta","content",A).get(E+(b.content||""))){for(ae=0;ae<K.length;ae++)if(I=K[ae],I.getAttribute("content")===(b.content==null?null:""+b.content)&&I.getAttribute("name")===(b.name==null?null:b.name)&&I.getAttribute("property")===(b.property==null?null:b.property)&&I.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&I.getAttribute("charset")===(b.charSet==null?null:b.charSet)){K.splice(ae,1);break t}}I=A.createElement(E),ea(I,E,b),A.head.appendChild(I);break;default:throw Error(r(468,E))}I[gr]=d,mt(I),E=I}d.stateNode=E}else HO(A,d.type,d.stateNode);else d.stateNode=jO(A,E,d.memoizedProps);else I!==E?(I===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):I.count--,E===null?HO(A,d.type,d.stateNode):jO(A,E,d.memoizedProps)):E===null&&d.stateNode!==null&&O3(d,d.memoizedProps,b.memoizedProps)}break;case 27:nl(p,d),rl(d),E&512&&(ai||b===null||Zu(b,b.return)),b!==null&&E&4&&O3(d,d.memoizedProps,b.memoizedProps);break;case 5:if(nl(p,d),rl(d),E&512&&(ai||b===null||Zu(b,b.return)),d.flags&32){A=d.stateNode;try{Dn(A,"")}catch(dn){Es(d,d.return,dn)}}E&4&&d.stateNode!=null&&(A=d.memoizedProps,O3(d,A,b!==null?b.memoizedProps:A)),E&1024&&(L3=!0);break;case 6:if(nl(p,d),rl(d),E&4){if(d.stateNode===null)throw Error(r(162));E=d.memoizedProps,b=d.stateNode;try{b.nodeValue=E}catch(dn){Es(d,d.return,dn)}}break;case 3:if(WE=null,A=Xc,Xc=qE(p.containerInfo),nl(p,d),Xc=A,rl(d),E&4&&b!==null&&b.memoizedState.isDehydrated)try{Fg(p.containerInfo)}catch(dn){Es(d,d.return,dn)}L3&&(L3=!1,H9(d));break;case 4:E=Xc,Xc=qE(d.stateNode.containerInfo),nl(p,d),rl(d),Xc=E;break;case 12:nl(p,d),rl(d);break;case 31:nl(p,d),rl(d),E&4&&(E=d.updateQueue,E!==null&&(d.updateQueue=null,RE(d,E)));break;case 13:nl(p,d),rl(d),d.child.flags&8192&&d.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(OE=Le()),E&4&&(E=d.updateQueue,E!==null&&(d.updateQueue=null,RE(d,E)));break;case 22:A=d.memoizedState!==null;var ke=b!==null&&b.memoizedState!==null,Ye=of,st=ai;if(of=Ye||A,ai=st||ke,nl(p,d),ai=st,of=Ye,rl(d),E&8192)e:for(p=d.stateNode,p._visibility=A?p._visibility&-2:p._visibility|1,A&&(b===null||ke||of||ai||Mp(d)),b=null,p=d;;){if(p.tag===5||p.tag===26){if(b===null){ke=b=p;try{if(I=ke.stateNode,A)K=I.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{ae=ke.stateNode;var dt=ke.memoizedProps.style,Ke=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;ae.style.display=Ke==null||typeof Ke=="boolean"?"":(""+Ke).trim()}}catch(dn){Es(ke,ke.return,dn)}}}else if(p.tag===6){if(b===null){ke=p;try{ke.stateNode.nodeValue=A?"":ke.memoizedProps}catch(dn){Es(ke,ke.return,dn)}}}else if(p.tag===18){if(b===null){ke=p;try{var Xe=ke.stateNode;A?MO(Xe,!0):MO(ke.stateNode,!1)}catch(dn){Es(ke,ke.return,dn)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===d)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break e;for(;p.sibling===null;){if(p.return===null||p.return===d)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=d.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,RE(d,b))));break;case 19:nl(p,d),rl(d),E&4&&(E=d.updateQueue,E!==null&&(d.updateQueue=null,RE(d,E)));break;case 30:break;case 21:break;default:nl(p,d),rl(d)}}function rl(d){var p=d.flags;if(p&2){try{for(var b,E=d.return;E!==null;){if(D9(E)){b=E;break}E=E.return}if(b==null)throw Error(r(160));switch(b.tag){case 27:var A=b.stateNode,I=D3(d);IE(d,I,A);break;case 5:var K=b.stateNode;b.flags&32&&(Dn(K,""),b.flags&=-33);var ae=D3(d);IE(d,ae,K);break;case 3:case 4:var ke=b.stateNode.containerInfo,Ye=D3(d);P3(d,Ye,ke);break;default:throw Error(r(161))}}catch(st){Es(d,d.return,st)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function H9(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var p=d;H9(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),d=d.sibling}}function lf(d,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)$9(d,p.alternate,p),p=p.sibling}function Mp(d){for(d=d.child;d!==null;){var p=d;switch(p.tag){case 0:case 11:case 14:case 15:Mh(4,p,p.return),Mp(p);break;case 1:Zu(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&M9(p,p.return,b),Mp(p);break;case 27:Ny(p.stateNode);case 26:case 5:Zu(p,p.return),Mp(p);break;case 22:p.memoizedState===null&&Mp(p);break;case 30:Mp(p);break;default:Mp(p)}d=d.sibling}}function cf(d,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,A=d,I=p,K=I.flags;switch(I.tag){case 0:case 11:case 15:cf(A,I,b),vy(4,I);break;case 1:if(cf(A,I,b),E=I,A=E.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ye){Es(E,E.return,Ye)}if(E=I,A=E.updateQueue,A!==null){var ae=E.stateNode;try{var ke=A.shared.hiddenCallbacks;if(ke!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ke.length;A++)jo(ke[A],ae)}catch(Ye){Es(E,E.return,Ye)}}b&&K&64&&R9(I),xy(I,I.return);break;case 27:P9(I);case 26:case 5:cf(A,I,b),b&&E===null&&K&4&&O9(I),xy(I,I.return);break;case 12:cf(A,I,b);break;case 31:cf(A,I,b),b&&K&4&&z9(A,I);break;case 13:cf(A,I,b),b&&K&4&&j9(A,I);break;case 22:I.memoizedState===null&&cf(A,I,b),xy(I,I.return);break;case 30:break;default:cf(A,I,b)}p=p.sibling}}function $3(d,p){var b=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),d=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(d=p.memoizedState.cachePool.pool),d!==b&&(d!=null&&d.refCount++,b!=null&&Gd(b))}function F3(d,p){d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&Gd(d))}function Qc(d,p,b,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)V9(d,p,b,E),p=p.sibling}function V9(d,p,b,E){var A=p.flags;switch(p.tag){case 0:case 11:case 15:Qc(d,p,b,E),A&2048&&vy(9,p);break;case 1:Qc(d,p,b,E);break;case 3:Qc(d,p,b,E),A&2048&&(d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&Gd(d)));break;case 12:if(A&2048){Qc(d,p,b,E),d=p.stateNode;try{var I=p.memoizedProps,K=I.id,ae=I.onPostCommit;typeof ae=="function"&&ae(K,p.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(ke){Es(p,p.return,ke)}}else Qc(d,p,b,E);break;case 31:Qc(d,p,b,E);break;case 13:Qc(d,p,b,E);break;case 23:break;case 22:I=p.stateNode,K=p.alternate,p.memoizedState!==null?I._visibility&2?Qc(d,p,b,E):wy(d,p):I._visibility&2?Qc(d,p,b,E):(I._visibility|=2,kg(d,p,b,E,(p.subtreeFlags&10256)!==0||!1)),A&2048&&$3(K,p);break;case 24:Qc(d,p,b,E),A&2048&&F3(p.alternate,p);break;default:Qc(d,p,b,E)}}function kg(d,p,b,E,A){for(A=A&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var I=d,K=p,ae=b,ke=E,Ye=K.flags;switch(K.tag){case 0:case 11:case 15:kg(I,K,ae,ke,A),vy(8,K);break;case 23:break;case 22:var st=K.stateNode;K.memoizedState!==null?st._visibility&2?kg(I,K,ae,ke,A):wy(I,K):(st._visibility|=2,kg(I,K,ae,ke,A)),A&&Ye&2048&&$3(K.alternate,K);break;case 24:kg(I,K,ae,ke,A),A&&Ye&2048&&F3(K.alternate,K);break;default:kg(I,K,ae,ke,A)}p=p.sibling}}function wy(d,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=d,E=p,A=E.flags;switch(E.tag){case 22:wy(b,E),A&2048&&$3(E.alternate,E);break;case 24:wy(b,E),A&2048&&F3(E.alternate,E);break;default:wy(b,E)}p=p.sibling}}var Ey=8192;function Ag(d,p,b){if(d.subtreeFlags&Ey)for(d=d.child;d!==null;)q9(d,p,b),d=d.sibling}function q9(d,p,b){switch(d.tag){case 26:Ag(d,p,b),d.flags&Ey&&d.memoizedState!==null&&Lce(b,Xc,d.memoizedState,d.memoizedProps);break;case 5:Ag(d,p,b);break;case 3:case 4:var E=Xc;Xc=qE(d.stateNode.containerInfo),Ag(d,p,b),Xc=E;break;case 22:d.memoizedState===null&&(E=d.alternate,E!==null&&E.memoizedState!==null?(E=Ey,Ey=16777216,Ag(d,p,b),Ey=E):Ag(d,p,b));break;default:Ag(d,p,b)}}function G9(d){var p=d.alternate;if(p!==null&&(d=p.child,d!==null)){p.child=null;do p=d.sibling,d.sibling=null,d=p;while(d!==null)}}function _y(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];Fi=E,Y9(E,d)}G9(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)W9(d),d=d.sibling}function W9(d){switch(d.tag){case 0:case 11:case 15:_y(d),d.flags&2048&&Mh(9,d,d.return);break;case 3:_y(d);break;case 12:_y(d);break;case 22:var p=d.stateNode;d.memoizedState!==null&&p._visibility&2&&(d.return===null||d.return.tag!==13)?(p._visibility&=-3,ME(d)):_y(d);break;default:_y(d)}}function ME(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];Fi=E,Y9(E,d)}G9(d)}for(d=d.child;d!==null;){switch(p=d,p.tag){case 0:case 11:case 15:Mh(8,p,p.return),ME(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,ME(p));break;default:ME(p)}d=d.sibling}}function Y9(d,p){for(;Fi!==null;){var b=Fi;switch(b.tag){case 0:case 11:case 15:Mh(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Gd(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,Fi=E;else e:for(b=d;Fi!==null;){E=Fi;var A=E.sibling,I=E.return;if(F9(E),E===b){Fi=null;break e}if(A!==null){A.return=I,Fi=A;break e}Fi=I}}}var Jle={getCacheForType:function(d){var p=Ei(zo),b=p.data.get(d);return b===void 0&&(b=d(),p.data.set(d,b)),b},cacheSignal:function(){return Ei(zo).controller.signal}},Xle=typeof WeakMap=="function"?WeakMap:Map,fs=0,Us=null,Or=null,$r=0,ws=0,Ll=null,Oh=!1,Ng=!1,B3=!1,uf=0,Ho=0,Dh=0,Op=0,z3=0,$l=0,Ig=0,Sy=null,sl=null,j3=!1,OE=0,K9=0,DE=1/0,PE=null,Ph=null,Ti=0,Lh=null,Rg=null,df=0,U3=0,H3=null,Z9=null,Ty=0,V3=null;function Fl(){return(fs&2)!==0&&$r!==0?$r&-$r:J.T!==null?Z3():Gs()}function J9(){if($l===0)if(($r&536870912)===0||Mr){var d=er;er<<=1,(er&3932160)===0&&(er=262144),$l=d}else $l=536870912;return d=ei.current,d!==null&&(d.flags|=32),$l}function ol(d,p,b){(d===Us&&(ws===2||ws===9)||d.cancelPendingCommit!==null)&&(Mg(d,0),$h(d,$r,$l,!1)),Kn(d,b),((fs&2)===0||d!==Us)&&(d===Us&&((fs&2)===0&&(Op|=b),Ho===4&&$h(d,$r,$l,!1)),Ju(d))}function X9(d,p,b){if((fs&6)!==0)throw Error(r(327));var E=!b&&(p&127)===0&&(p&d.expiredLanes)===0||Ue(d,p),A=E?tce(d,p):G3(d,p,!0),I=E;do{if(A===0){Ng&&!E&&$h(d,p,0,!1);break}else{if(b=d.current.alternate,I&&!Qle(b)){A=G3(d,p,!1),I=!1;continue}if(A===2){if(I=p,d.errorRecoveryDisabledLanes&I)var K=0;else K=d.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){p=K;e:{var ae=d;A=Sy;var ke=ae.current.memoizedState.isDehydrated;if(ke&&(Mg(ae,K).flags|=256),K=G3(ae,K,!1),K!==2){if(B3&&!ke){ae.errorRecoveryDisabledLanes|=I,Op|=I,A=4;break e}I=sl,sl=A,I!==null&&(sl===null?sl=I:sl.push.apply(sl,I))}A=K}if(I=!1,A!==2)continue}}if(A===1){Mg(d,0),$h(d,p,0,!0);break}e:{switch(E=d,I=A,I){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:$h(E,p,$l,!Oh);break e;case 2:sl=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(A=OE+300-Le(),10<A)){if($h(E,p,$l,!Oh),ye(E,0,!0)!==0)break e;df=p,E.timeoutHandle=NO(Q9.bind(null,E,b,sl,PE,j3,p,$l,Op,Ig,Oh,I,"Throttled",-0,0),A);break e}Q9(E,b,sl,PE,j3,p,$l,Op,Ig,Oh,I,null,-0,0)}}break}while(!0);Ju(d)}function Q9(d,p,b,E,A,I,K,ae,ke,Ye,st,dt,Ke,Xe){if(d.timeoutHandle=-1,dt=p.subtreeFlags,dt&8192||(dt&16785408)===16785408){dt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$t},q9(p,I,dt);var dn=(I&62914560)===I?OE-Le():(I&4194048)===I?K9-Le():0;if(dn=$ce(dt,dn),dn!==null){df=I,d.cancelPendingCommit=dn(aO.bind(null,d,p,I,b,E,A,K,ae,ke,st,dt,null,Ke,Xe)),$h(d,I,K,!Ye);return}}aO(d,p,I,b,E,A,K,ae,ke)}function Qle(d){for(var p=d;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var A=b[E],I=A.getSnapshot;A=A.value;try{if(!Ca(I(),A))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function $h(d,p,b,E){p&=~z3,p&=~Op,d.suspendedLanes|=p,d.pingedLanes&=~p,E&&(d.warmLanes|=p),E=d.expirationTimes;for(var A=p;0<A;){var I=31-jt(A),K=1<<I;E[I]=-1,A&=~K}b!==0&&zt(d,b,p)}function LE(){return(fs&6)===0?(Cy(0),!1):!0}function q3(){if(Or!==null){if(ws===0)var d=Or.return;else d=Or,ha=Pl=null,gy(d),zu=null,xp=0,d=Or;for(;d!==null;)I9(d.alternate,d),d=d.return;Or=null}}function Mg(d,p){var b=d.timeoutHandle;b!==-1&&(d.timeoutHandle=-1,vce(b)),b=d.cancelPendingCommit,b!==null&&(d.cancelPendingCommit=null,b()),df=0,q3(),Us=d,Or=b=Rl(d.current,null),$r=p,ws=0,Ll=null,Oh=!1,Ng=Ue(d,p),B3=!1,Ig=$l=z3=Op=Dh=Ho=0,sl=Sy=null,j3=!1,(p&8)!==0&&(p|=p&32);var E=d.entangledLanes;if(E!==0)for(d=d.entanglements,E&=p;0<E;){var A=31-jt(E),I=1<<A;p|=d[A],E&=~I}return uf=p,xh(),b}function eO(d,p){sr=null,J.H=Un,p===Zd||p===mg?(p=EE(),ws=3):p===vp?(p=EE(),ws=4):ws=p===_3?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Ll=p,Or===null&&(Ho=1,Zs(d,fa(p,d.current)))}function tO(){var d=ei.current;return d===null?!0:($r&4194048)===$r?Qa===null:($r&62914560)===$r||($r&536870912)!==0?d===Qa:!1}function nO(){var d=J.H;return J.H=Un,d===null?Un:d}function rO(){var d=J.A;return J.A=Jle,d}function $E(){Ho=4,Oh||($r&4194048)!==$r&&ei.current!==null||(Ng=!0),(Dh&134217727)===0&&(Op&134217727)===0||Us===null||$h(Us,$r,$l,!1)}function G3(d,p,b){var E=fs;fs|=2;var A=nO(),I=rO();(Us!==d||$r!==p)&&(PE=null,Mg(d,p)),p=!1;var K=Ho;e:do try{if(ws!==0&&Or!==null){var ae=Or,ke=Ll;switch(ws){case 8:q3(),K=6;break e;case 3:case 2:case 9:case 6:ei.current===null&&(p=!0);var Ye=ws;if(ws=0,Ll=null,Og(d,ae,ke,Ye),b&&Ng){K=0;break e}break;default:Ye=ws,ws=0,Ll=null,Og(d,ae,ke,Ye)}}ece(),K=Ho;break}catch(st){eO(d,st)}while(!0);return p&&d.shellSuspendCounter++,ha=Pl=null,fs=E,J.H=A,J.A=I,Or===null&&(Us=null,$r=0,xh()),K}function ece(){for(;Or!==null;)sO(Or)}function tce(d,p){var b=fs;fs|=2;var E=nO(),A=rO();Us!==d||$r!==p?(PE=null,DE=Le()+500,Mg(d,p)):Ng=Ue(d,p);e:do try{if(ws!==0&&Or!==null){p=Or;var I=Ll;t:switch(ws){case 1:ws=0,Ll=null,Og(d,p,I,1);break;case 2:case 9:if(xE(I)){ws=0,Ll=null,oO(p);break}p=function(){ws!==2&&ws!==9||Us!==d||(ws=7),Ju(d)},I.then(p,p);break e;case 3:ws=7;break e;case 4:ws=5;break e;case 7:xE(I)?(ws=0,Ll=null,oO(p)):(ws=0,Ll=null,Og(d,p,I,7));break;case 5:var K=null;switch(Or.tag){case 26:K=Or.memoizedState;case 5:case 27:var ae=Or;if(K?VO(K):ae.stateNode.complete){ws=0,Ll=null;var ke=ae.sibling;if(ke!==null)Or=ke;else{var Ye=ae.return;Ye!==null?(Or=Ye,FE(Ye)):Or=null}break t}}ws=0,Ll=null,Og(d,p,I,5);break;case 6:ws=0,Ll=null,Og(d,p,I,6);break;case 8:q3(),Ho=6;break e;default:throw Error(r(462))}}nce();break}catch(st){eO(d,st)}while(!0);return ha=Pl=null,J.H=E,J.A=A,fs=b,Or!==null?0:(Us=null,$r=0,xh(),Ho)}function nce(){for(;Or!==null&&!$e();)sO(Or)}function sO(d){var p=A9(d.alternate,d,uf);d.memoizedProps=d.pendingProps,p===null?FE(d):Or=p}function oO(d){var p=d,b=p.alternate;switch(p.tag){case 15:case 0:p=E9(b,p,p.pendingProps,p.type,void 0,$r);break;case 11:p=E9(b,p,p.pendingProps,p.type.render,p.ref,$r);break;case 5:gy(p);default:I9(b,p),p=Or=pE(p,uf),p=A9(b,p,uf)}d.memoizedProps=d.pendingProps,p===null?FE(d):Or=p}function Og(d,p,b,E){ha=Pl=null,gy(p),zu=null,xp=0;var A=p.return;try{if(Vle(d,A,p,b,$r)){Ho=1,Zs(d,fa(b,d.current)),Or=null;return}}catch(I){if(A!==null)throw Or=A,I;Ho=1,Zs(d,fa(b,d.current)),Or=null;return}p.flags&32768?(Mr||E===1?d=!0:Ng||($r&536870912)!==0?d=!1:(Oh=d=!0,(E===2||E===9||E===3||E===6)&&(E=ei.current,E!==null&&E.tag===13&&(E.flags|=16384))),iO(p,d)):FE(p)}function FE(d){var p=d;do{if((p.flags&32768)!==0){iO(p,Oh);return}d=p.return;var b=Wle(p.alternate,p,uf);if(b!==null){Or=b;return}if(p=p.sibling,p!==null){Or=p;return}Or=p=d}while(p!==null);Ho===0&&(Ho=5)}function iO(d,p){do{var b=Yle(d.alternate,d);if(b!==null){b.flags&=32767,Or=b;return}if(b=d.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(d=d.sibling,d!==null)){Or=d;return}Or=d=b}while(d!==null);Ho=6,Or=null}function aO(d,p,b,E,A,I,K,ae,ke){d.cancelPendingCommit=null;do BE();while(Ti!==0);if((fs&6)!==0)throw Error(r(327));if(p!==null){if(p===d.current)throw Error(r(177));if(I=p.lanes|p.childLanes,I|=hp,Rt(d,b,I,K,ae,ke),d===Us&&(Or=Us=null,$r=0),Rg=p,Lh=d,df=b,U3=I,H3=A,Z9=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,ice(L,function(){return fO(),null})):(d.callbackNode=null,d.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=J.T,J.T=null,A=ee.p,ee.p=2,K=fs,fs|=4;try{Kle(d,p,b)}finally{fs=K,ee.p=A,J.T=E}}Ti=1,lO(),cO(),uO()}}function lO(){if(Ti===1){Ti=0;var d=Lh,p=Rg,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=J.T,J.T=null;var E=ee.p;ee.p=2;var A=fs;fs|=4;try{U9(p,d);var I=s5,K=bh(d.containerInfo),ae=I.focusedElem,ke=I.selectionRange;if(K!==ae&&ae&&ae.ownerDocument&&uE(ae.ownerDocument.documentElement,ae)){if(ke!==null&&cp(ae)){var Ye=ke.start,st=ke.end;if(st===void 0&&(st=Ye),"selectionStart"in ae)ae.selectionStart=Ye,ae.selectionEnd=Math.min(st,ae.value.length);else{var dt=ae.ownerDocument||document,Ke=dt&&dt.defaultView||window;if(Ke.getSelection){var Xe=Ke.getSelection(),dn=ae.textContent.length,jn=Math.min(ke.start,dn),Ps=ke.end===void 0?jn:Math.min(ke.end,dn);!Xe.extend&&jn>Ps&&(K=Ps,Ps=jn,jn=K);var je=rg(ae,jn),Oe=rg(ae,Ps);if(je&&Oe&&(Xe.rangeCount!==1||Xe.anchorNode!==je.node||Xe.anchorOffset!==je.offset||Xe.focusNode!==Oe.node||Xe.focusOffset!==Oe.offset)){var Ge=dt.createRange();Ge.setStart(je.node,je.offset),Xe.removeAllRanges(),jn>Ps?(Xe.addRange(Ge),Xe.extend(Oe.node,Oe.offset)):(Ge.setEnd(Oe.node,Oe.offset),Xe.addRange(Ge))}}}}for(dt=[],Xe=ae;Xe=Xe.parentNode;)Xe.nodeType===1&&dt.push({element:Xe,left:Xe.scrollLeft,top:Xe.scrollTop});for(typeof ae.focus=="function"&&ae.focus(),ae=0;ae<dt.length;ae++){var ct=dt[ae];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}JE=!!r5,s5=r5=null}finally{fs=A,ee.p=E,J.T=b}}d.current=p,Ti=2}}function cO(){if(Ti===2){Ti=0;var d=Lh,p=Rg,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=J.T,J.T=null;var E=ee.p;ee.p=2;var A=fs;fs|=4;try{$9(d,p.alternate,p)}finally{fs=A,ee.p=E,J.T=b}}Ti=3}}function uO(){if(Ti===4||Ti===3){Ti=0,Je();var d=Lh,p=Rg,b=df,E=Z9;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Ti=5:(Ti=0,Rg=Lh=null,dO(d,d.pendingLanes));var A=d.pendingLanes;if(A===0&&(Ph=null),xo(b),p=p.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Be,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=J.T,A=ee.p,ee.p=2,J.T=null;try{for(var I=d.onRecoverableError,K=0;K<E.length;K++){var ae=E[K];I(ae.value,{componentStack:ae.stack})}}finally{J.T=p,ee.p=A}}(df&3)!==0&&BE(),Ju(d),A=d.pendingLanes,(b&261930)!==0&&(A&42)!==0?d===V3?Ty++:(Ty=0,V3=d):Ty=0,Cy(0)}}function dO(d,p){(d.pooledCacheLanes&=p)===0&&(p=d.pooledCache,p!=null&&(d.pooledCache=null,Gd(p)))}function BE(){return lO(),cO(),uO(),fO()}function fO(){if(Ti!==5)return!1;var d=Lh,p=U3;U3=0;var b=xo(df),E=J.T,A=ee.p;try{ee.p=32>b?32:b,J.T=null,b=H3,H3=null;var I=Lh,K=df;if(Ti=0,Rg=Lh=null,df=0,(fs&6)!==0)throw Error(r(331));var ae=fs;if(fs|=4,W9(I.current),V9(I,I.current,K,b),fs=ae,Cy(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Be,I)}catch{}return!0}finally{ee.p=A,J.T=E,dO(d,p)}}function hO(d,p,b){p=fa(b,p),p=hc(d.stateNode,p,2),d=Hu(d,p,2),d!==null&&(Kn(d,2),Ju(d))}function Es(d,p,b){if(d.tag===3)hO(d,d,b);else for(;p!==null;){if(p.tag===3){hO(p,d,b);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ph===null||!Ph.has(E))){d=fa(b,d),b=Cg(2),E=Hu(p,b,2),E!==null&&(m9(b,E,p,d),Kn(E,2),Ju(E));break}}p=p.return}}function W3(d,p,b){var E=d.pingCache;if(E===null){E=d.pingCache=new Xle;var A=new Set;E.set(p,A)}else A=E.get(p),A===void 0&&(A=new Set,E.set(p,A));A.has(b)||(B3=!0,A.add(b),d=rce.bind(null,d,p,b),p.then(d,d))}function rce(d,p,b){var E=d.pingCache;E!==null&&E.delete(p),d.pingedLanes|=d.suspendedLanes&b,d.warmLanes&=~b,Us===d&&($r&b)===b&&(Ho===4||Ho===3&&($r&62914560)===$r&&300>Le()-OE?(fs&2)===0&&Mg(d,0):z3|=b,Ig===$r&&(Ig=0)),Ju(d)}function pO(d,p){p===0&&(p=Jt()),d=qc(d,p),d!==null&&(Kn(d,p),Ju(d))}function sce(d){var p=d.memoizedState,b=0;p!==null&&(b=p.retryLane),pO(d,b)}function oce(d,p){var b=0;switch(d.tag){case 31:case 13:var E=d.stateNode,A=d.memoizedState;A!==null&&(b=A.retryLane);break;case 19:E=d.stateNode;break;case 22:E=d.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(p),pO(d,b)}function ice(d,p){return pe(d,p)}var zE=null,Dg=null,Y3=!1,jE=!1,K3=!1,Fh=0;function Ju(d){d!==Dg&&d.next===null&&(Dg===null?zE=Dg=d:Dg=Dg.next=d),jE=!0,Y3||(Y3=!0,lce())}function Cy(d,p){if(!K3&&jE){K3=!0;do for(var b=!1,E=zE;E!==null;){if(d!==0){var A=E.pendingLanes;if(A===0)var I=0;else{var K=E.suspendedLanes,ae=E.pingedLanes;I=(1<<31-jt(42|d)+1)-1,I&=A&~(K&~ae),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(b=!0,yO(E,I))}else I=$r,I=ye(E,E===Us?I:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(I&3)===0||Ue(E,I)||(b=!0,yO(E,I));E=E.next}while(b);K3=!1}}function ace(){mO()}function mO(){jE=Y3=!1;var d=0;Fh!==0&&yce()&&(d=Fh);for(var p=Le(),b=null,E=zE;E!==null;){var A=E.next,I=gO(E,p);I===0?(E.next=null,b===null?zE=A:b.next=A,A===null&&(Dg=b)):(b=E,(d!==0||(I&3)!==0)&&(jE=!0)),E=A}Ti!==0&&Ti!==5||Cy(d),Fh!==0&&(Fh=0)}function gO(d,p){for(var b=d.suspendedLanes,E=d.pingedLanes,A=d.expirationTimes,I=d.pendingLanes&-62914561;0<I;){var K=31-jt(I),ae=1<<K,ke=A[K];ke===-1?((ae&b)===0||(ae&E)!==0)&&(A[K]=ht(ae,p)):ke<=p&&(d.expiredLanes|=ae),I&=~ae}if(p=Us,b=$r,b=ye(d,d===p?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),E=d.callbackNode,b===0||d===p&&(ws===2||ws===9)||d.cancelPendingCommit!==null)return E!==null&&E!==null&&Ne(E),d.callbackNode=null,d.callbackPriority=0;if((b&3)===0||Ue(d,b)){if(p=b&-b,p===d.callbackPriority)return p;switch(E!==null&&Ne(E),xo(b)){case 2:case 8:b=Y;break;case 32:b=L;break;case 268435456:b=ce;break;default:b=L}return E=bO.bind(null,d),b=pe(b,E),d.callbackPriority=p,d.callbackNode=b,p}return E!==null&&E!==null&&Ne(E),d.callbackPriority=2,d.callbackNode=null,2}function bO(d,p){if(Ti!==0&&Ti!==5)return d.callbackNode=null,d.callbackPriority=0,null;var b=d.callbackNode;if(BE()&&d.callbackNode!==b)return null;var E=$r;return E=ye(d,d===Us?E:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),E===0?null:(X9(d,E,p),gO(d,Le()),d.callbackNode!=null&&d.callbackNode===b?bO.bind(null,d):null)}function yO(d,p){if(BE())return null;X9(d,p,!0)}function lce(){xce(function(){(fs&6)!==0?pe(_e,ace):mO()})}function Z3(){if(Fh===0){var d=Wd;d===0&&(d=An,An<<=1,(An&261888)===0&&(An=256)),Fh=d}return Fh}function vO(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Sl(""+d)}function xO(d,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,d.id&&b.setAttribute("form",d.id),p.parentNode.insertBefore(b,p),d=new FormData(d),b.parentNode.removeChild(b),d}function cce(d,p,b,E,A){if(p==="submit"&&b&&b.stateNode===A){var I=vO((A[Do]||null).action),K=E.submitter;K&&(p=(p=K[Do]||null)?vO(p.formAction):K.getAttribute("formAction"),p!==null&&(I=p,K=null));var ae=new rp("action","action",null,E,A);d.push({event:ae,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(Fh!==0){var ke=K?xO(A,K):new FormData(A);Gn(b,{pending:!0,data:ke,method:A.method,action:I},null,ke)}}else typeof I=="function"&&(ae.preventDefault(),ke=K?xO(A,K):new FormData(A),Gn(b,{pending:!0,data:ke,method:A.method,action:I},I,ke))},currentTarget:A}]})}}for(var J3=0;J3<og.length;J3++){var X3=og[J3],uce=X3.toLowerCase(),dce=X3[0].toUpperCase()+X3.slice(1);Aa(uce,"on"+dce)}Aa(Zb,"onAnimationEnd"),Aa(Li,"onAnimationIteration"),Aa(Jb,"onAnimationStart"),Aa("dblclick","onDoubleClick"),Aa("focusin","onFocus"),Aa("focusout","onBlur"),Aa(dE,"onTransitionRun"),Aa(y3,"onTransitionStart"),Aa(fE,"onTransitionCancel"),Aa(hE,"onTransitionEnd"),ft("onMouseEnter",["mouseout","mouseover"]),ft("onMouseLeave",["mouseout","mouseover"]),ft("onPointerEnter",["pointerout","pointerover"]),ft("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ky="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fce=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ky));function wO(d,p){p=(p&4)!==0;for(var b=0;b<d.length;b++){var E=d[b],A=E.event;E=E.listeners;e:{var I=void 0;if(p)for(var K=E.length-1;0<=K;K--){var ae=E[K],ke=ae.instance,Ye=ae.currentTarget;if(ae=ae.listener,ke!==I&&A.isPropagationStopped())break e;I=ae,A.currentTarget=Ye;try{I(A)}catch(st){Hd(st)}A.currentTarget=null,I=ke}else for(K=0;K<E.length;K++){if(ae=E[K],ke=ae.instance,Ye=ae.currentTarget,ae=ae.listener,ke!==I&&A.isPropagationStopped())break e;I=ae,A.currentTarget=Ye;try{I(A)}catch(st){Hd(st)}A.currentTarget=null,I=ke}}}}function Dr(d,p){var b=p[rt];b===void 0&&(b=p[rt]=new Set);var E=d+"__bubble";b.has(E)||(EO(p,d,2,!1),b.add(E))}function Q3(d,p,b){var E=0;p&&(E|=4),EO(b,d,E,p)}var UE="_reactListening"+Math.random().toString(36).slice(2);function e5(d){if(!d[UE]){d[UE]=!0,Qr.forEach(function(b){b!=="selectionchange"&&(fce.has(b)||Q3(b,!1,d),Q3(b,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[UE]||(p[UE]=!0,Q3("selectionchange",!1,p))}}function EO(d,p,b,E){switch(JO(p)){case 2:var A=zce;break;case 8:A=jce;break;default:A=m5}b=A.bind(null,p,b,d),A=void 0,!qm||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(A=!0),E?A!==void 0?d.addEventListener(p,b,{capture:!0,passive:A}):d.addEventListener(p,b,!0):A!==void 0?d.addEventListener(p,b,{passive:A}):d.addEventListener(p,b,!1)}function t5(d,p,b,E,A){var I=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var K=E.tag;if(K===3||K===4){var ae=E.stateNode.containerInfo;if(ae===A)break;if(K===4)for(K=E.return;K!==null;){var ke=K.tag;if((ke===3||ke===4)&&K.stateNode.containerInfo===A)return;K=K.return}for(;ae!==null;){if(K=Hr(ae),K===null)return;if(ke=K.tag,ke===5||ke===6||ke===26||ke===27){E=I=K;continue e}ae=ae.parentNode}}E=E.return}dh(function(){var Ye=I,st=Jn(b),dt=[];e:{var Ke=yh.get(d);if(Ke!==void 0){var Xe=rp,dn=d;switch(d){case"keypress":if(hh(b)===0)break e;case"keydown":case"keyup":Xe=Bd;break;case"focusin":dn="focus",Xe=Uc;break;case"focusout":dn="blur",Xe=Uc;break;case"beforeblur":case"afterblur":Xe=Uc;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=eE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=to;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=Lo;break;case Zb:case Li:case Jb:Xe=u3;break;case hE:Xe=Xo;break;case"scroll":case"scrollend":Xe=l3;break;case"wheel":Xe=rE;break;case"copy":case"cut":case"paste":Xe=tE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=nE;break;case"toggle":case"beforetoggle":Xe=Zm}var jn=(p&4)!==0,Ps=!jn&&(d==="scroll"||d==="scrollend"),je=jn?Ke!==null?Ke+"Capture":null:Ke;jn=[];for(var Oe=Ye,Ge;Oe!==null;){var ct=Oe;if(Ge=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Ge===null||je===null||(ct=fh(Oe,je),ct!=null&&jn.push(Ay(Oe,ct,Ge))),Ps)break;Oe=Oe.return}0<jn.length&&(Ke=new Xe(Ke,dn,null,b,st),dt.push({event:Ke,listeners:jn}))}}if((p&7)===0){e:{if(Ke=d==="mouseover"||d==="pointerover",Xe=d==="mouseout"||d==="pointerout",Ke&&b!==Kt&&(dn=b.relatedTarget||b.fromElement)&&(Hr(dn)||dn[at]))break e;if((Xe||Ke)&&(Ke=st.window===st?st:(Ke=st.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,Xe?(dn=b.relatedTarget||b.toElement,Xe=Ye,dn=dn?Hr(dn):null,dn!==null&&(Ps=o(dn),jn=dn.tag,dn!==Ps||jn!==5&&jn!==27&&jn!==6)&&(dn=null)):(Xe=null,dn=Ye),Xe!==dn)){if(jn=eE,ct="onMouseLeave",je="onMouseEnter",Oe="mouse",(d==="pointerout"||d==="pointerover")&&(jn=nE,ct="onPointerLeave",je="onPointerEnter",Oe="pointer"),Ps=Xe==null?Ke:kt(Xe),Ge=dn==null?Ke:kt(dn),Ke=new jn(ct,Oe+"leave",Xe,b,st),Ke.target=Ps,Ke.relatedTarget=Ge,ct=null,Hr(st)===Ye&&(jn=new jn(je,Oe+"enter",dn,b,st),jn.target=Ge,jn.relatedTarget=Ps,ct=jn),Ps=ct,Xe&&dn)t:{for(jn=hce,je=Xe,Oe=dn,Ge=0,ct=je;ct;ct=jn(ct))Ge++;ct=0;for(var Mn=Oe;Mn;Mn=jn(Mn))ct++;for(;0<Ge-ct;)je=jn(je),Ge--;for(;0<ct-Ge;)Oe=jn(Oe),ct--;for(;Ge--;){if(je===Oe||Oe!==null&&je===Oe.alternate){jn=je;break t}je=jn(je),Oe=jn(Oe)}jn=null}else jn=null;Xe!==null&&_O(dt,Ke,Xe,jn,!1),dn!==null&&Ps!==null&&_O(dt,Ps,dn,jn,!0)}}e:{if(Ke=Ye?kt(Ye):window,Xe=Ke.nodeName&&Ke.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&Ke.type==="file")var ns=lE;else if(Xm(Ke))if(Gb)ns=g3;else{ns=Ud;var En=Kb}else Xe=Ke.nodeName,!Xe||Xe.toLowerCase()!=="input"||Ke.type!=="checkbox"&&Ke.type!=="radio"?Ye&&Ou(Ye.elementType)&&(ns=lE):ns=m3;if(ns&&(ns=ns(d,Ye))){Bn(dt,ns,b,st);break e}En&&En(d,Ke,Ye),d==="focusout"&&Ye&&Ke.type==="number"&&Ye.memoizedProps.value!=null&&jc(Ke,"number",Ke.value)}switch(En=Ye?kt(Ye):window,d){case"focusin":(Xm(En)||En.contentEditable==="true")&&(Sr=En,Ya=Ye,up=null);break;case"focusout":up=Ya=Sr=null;break;case"mousedown":dp=!0;break;case"contextmenu":case"mouseup":case"dragend":dp=!1,Ka(dt,b,st);break;case"selectionchange":if(sg)break;case"keydown":case"keyup":Ka(dt,b,st)}var br;if(Jm)e:{switch(d){case"compositionstart":var Fr="onCompositionStart";break e;case"compositionend":Fr="onCompositionEnd";break e;case"compositionupdate":Fr="onCompositionUpdate";break e}Fr=void 0}else ic?jd(d,b)&&(Fr="onCompositionEnd"):d==="keydown"&&b.keyCode===229&&(Fr="onCompositionStart");Fr&&(mh&&b.locale!=="ko"&&(ic||Fr!=="onCompositionStart"?Fr==="onCompositionEnd"&&ic&&(br=Al()):(Cl=st,tp="value"in Cl?Cl.value:Cl.textContent,ic=!0)),En=HE(Ye,Fr),0<En.length&&(Fr=new Wm(Fr,d,null,b,st),dt.push({event:Fr,listeners:En}),br?Fr.data=br:(br=ap(b),br!==null&&(Fr.data=br)))),(br=_o?xi(d,b):oE(d,b))&&(Fr=HE(Ye,"onBeforeInput"),0<Fr.length&&(En=new Wm("onBeforeInput","beforeinput",null,b,st),dt.push({event:En,listeners:Fr}),En.data=br)),cce(dt,d,Ye,b,st)}wO(dt,p)})}function Ay(d,p,b){return{instance:d,listener:p,currentTarget:b}}function HE(d,p){for(var b=p+"Capture",E=[];d!==null;){var A=d,I=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||I===null||(A=fh(d,b),A!=null&&E.unshift(Ay(d,A,I)),A=fh(d,p),A!=null&&E.push(Ay(d,A,I))),d.tag===3)return E;d=d.return}return[]}function hce(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function _O(d,p,b,E,A){for(var I=p._reactName,K=[];b!==null&&b!==E;){var ae=b,ke=ae.alternate,Ye=ae.stateNode;if(ae=ae.tag,ke!==null&&ke===E)break;ae!==5&&ae!==26&&ae!==27||Ye===null||(ke=Ye,A?(Ye=fh(b,I),Ye!=null&&K.unshift(Ay(b,Ye,ke))):A||(Ye=fh(b,I),Ye!=null&&K.push(Ay(b,Ye,ke)))),b=b.return}K.length!==0&&d.push({event:p,listeners:K})}var pce=/\r\n?/g,mce=/\u0000|\uFFFD/g;function SO(d){return(typeof d=="string"?d:""+d).replace(pce,`
`).replace(mce,"")}function TO(d,p){return p=SO(p),SO(d)===p}function Ds(d,p,b,E,A,I){switch(b){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||Dn(d,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&Dn(d,""+E);break;case"className":ho(d,"class",E);break;case"tabIndex":ho(d,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":ho(d,b,E);break;case"style":Wr(d,E,I);break;case"data":if(p!=="object"){ho(d,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||b!=="href")){d.removeAttribute(b);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){d.removeAttribute(b);break}E=Sl(""+E),d.setAttribute(b,E);break;case"action":case"formAction":if(typeof E=="function"){d.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(b==="formAction"?(p!=="input"&&Ds(d,p,"name",A.name,A,null),Ds(d,p,"formEncType",A.formEncType,A,null),Ds(d,p,"formMethod",A.formMethod,A,null),Ds(d,p,"formTarget",A.formTarget,A,null)):(Ds(d,p,"encType",A.encType,A,null),Ds(d,p,"method",A.method,A,null),Ds(d,p,"target",A.target,A,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){d.removeAttribute(b);break}E=Sl(""+E),d.setAttribute(b,E);break;case"onClick":E!=null&&(d.onclick=$t);break;case"onScroll":E!=null&&Dr("scroll",d);break;case"onScrollEnd":E!=null&&Dr("scrollend",d);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(b=E.__html,b!=null){if(A.children!=null)throw Error(r(60));d.innerHTML=b}}break;case"multiple":d.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":d.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){d.removeAttribute("xlink:href");break}b=Sl(""+E),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?d.setAttribute(b,""+E):d.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?d.setAttribute(b,""):d.removeAttribute(b);break;case"capture":case"download":E===!0?d.setAttribute(b,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?d.setAttribute(b,E):d.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?d.setAttribute(b,E):d.removeAttribute(b);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?d.removeAttribute(b):d.setAttribute(b,E);break;case"popover":Dr("beforetoggle",d),Dr("toggle",d),Ws(d,"popover",E);break;case"xlinkActuate":Zo(d,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":Zo(d,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":Zo(d,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":Zo(d,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":Zo(d,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":Zo(d,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":Zo(d,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":Zo(d,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":Zo(d,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":Ws(d,"is",E);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=yi.get(b)||b,Ws(d,b,E))}}function n5(d,p,b,E,A,I){switch(b){case"style":Wr(d,E,I);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(b=E.__html,b!=null){if(A.children!=null)throw Error(r(60));d.innerHTML=b}}break;case"children":typeof E=="string"?Dn(d,E):(typeof E=="number"||typeof E=="bigint")&&Dn(d,""+E);break;case"onScroll":E!=null&&Dr("scroll",d);break;case"onScrollEnd":E!=null&&Dr("scrollend",d);break;case"onClick":E!=null&&(d.onclick=$t);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Po.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(A=b.endsWith("Capture"),p=b.slice(2,A?b.length-7:void 0),I=d[Do]||null,I=I!=null?I[b]:null,typeof I=="function"&&d.removeEventListener(p,I,A),typeof E=="function")){typeof I!="function"&&I!==null&&(b in d?d[b]=null:d.hasAttribute(b)&&d.removeAttribute(b)),d.addEventListener(p,E,A);break e}b in d?d[b]=E:E===!0?d.setAttribute(b,""):Ws(d,b,E)}}}function ea(d,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dr("error",d),Dr("load",d);var E=!1,A=!1,I;for(I in b)if(b.hasOwnProperty(I)){var K=b[I];if(K!=null)switch(I){case"src":E=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Ds(d,p,I,K,b,null)}}A&&Ds(d,p,"srcSet",b.srcSet,b,null),E&&Ds(d,p,"src",b.src,b,null);return;case"input":Dr("invalid",d);var ae=I=K=A=null,ke=null,Ye=null;for(E in b)if(b.hasOwnProperty(E)){var st=b[E];if(st!=null)switch(E){case"name":A=st;break;case"type":K=st;break;case"checked":ke=st;break;case"defaultChecked":Ye=st;break;case"value":I=st;break;case"defaultValue":ae=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(137,p));break;default:Ds(d,p,E,st,b,null)}}oc(d,I,ae,ke,Ye,K,A,!1);return;case"select":Dr("invalid",d),E=K=I=null;for(A in b)if(b.hasOwnProperty(A)&&(ae=b[A],ae!=null))switch(A){case"value":I=ae;break;case"defaultValue":K=ae;break;case"multiple":E=ae;default:Ds(d,p,A,ae,b,null)}p=I,b=K,d.multiple=!!E,p!=null?Jo(d,!!E,p,!1):b!=null&&Jo(d,!!E,b,!0);return;case"textarea":Dr("invalid",d),I=A=E=null;for(K in b)if(b.hasOwnProperty(K)&&(ae=b[K],ae!=null))switch(K){case"value":E=ae;break;case"defaultValue":A=ae;break;case"children":I=ae;break;case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(91));break;default:Ds(d,p,K,ae,b,null)}ch(d,E,A,I);return;case"option":for(ke in b)if(b.hasOwnProperty(ke)&&(E=b[ke],E!=null))switch(ke){case"selected":d.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:Ds(d,p,ke,E,b,null)}return;case"dialog":Dr("beforetoggle",d),Dr("toggle",d),Dr("cancel",d),Dr("close",d);break;case"iframe":case"object":Dr("load",d);break;case"video":case"audio":for(E=0;E<ky.length;E++)Dr(ky[E],d);break;case"image":Dr("error",d),Dr("load",d);break;case"details":Dr("toggle",d);break;case"embed":case"source":case"link":Dr("error",d),Dr("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in b)if(b.hasOwnProperty(Ye)&&(E=b[Ye],E!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Ds(d,p,Ye,E,b,null)}return;default:if(Ou(p)){for(st in b)b.hasOwnProperty(st)&&(E=b[st],E!==void 0&&n5(d,p,st,E,b,void 0));return}}for(ae in b)b.hasOwnProperty(ae)&&(E=b[ae],E!=null&&Ds(d,p,ae,E,b,null))}function gce(d,p,b,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,I=null,K=null,ae=null,ke=null,Ye=null,st=null;for(Xe in b){var dt=b[Xe];if(b.hasOwnProperty(Xe)&&dt!=null)switch(Xe){case"checked":break;case"value":break;case"defaultValue":ke=dt;default:E.hasOwnProperty(Xe)||Ds(d,p,Xe,null,E,dt)}}for(var Ke in E){var Xe=E[Ke];if(dt=b[Ke],E.hasOwnProperty(Ke)&&(Xe!=null||dt!=null))switch(Ke){case"type":I=Xe;break;case"name":A=Xe;break;case"checked":Ye=Xe;break;case"defaultChecked":st=Xe;break;case"value":K=Xe;break;case"defaultValue":ae=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(r(137,p));break;default:Xe!==dt&&Ds(d,p,Ke,Xe,E,dt)}}_l(d,K,ae,ke,Ye,st,I,A);return;case"select":Xe=K=ae=Ke=null;for(I in b)if(ke=b[I],b.hasOwnProperty(I)&&ke!=null)switch(I){case"value":break;case"multiple":Xe=ke;default:E.hasOwnProperty(I)||Ds(d,p,I,null,E,ke)}for(A in E)if(I=E[A],ke=b[A],E.hasOwnProperty(A)&&(I!=null||ke!=null))switch(A){case"value":Ke=I;break;case"defaultValue":ae=I;break;case"multiple":K=I;default:I!==ke&&Ds(d,p,A,I,E,ke)}p=ae,b=K,E=Xe,Ke!=null?Jo(d,!!b,Ke,!1):!!E!=!!b&&(p!=null?Jo(d,!!b,p,!0):Jo(d,!!b,b?[]:"",!1));return;case"textarea":Xe=Ke=null;for(ae in b)if(A=b[ae],b.hasOwnProperty(ae)&&A!=null&&!E.hasOwnProperty(ae))switch(ae){case"value":break;case"children":break;default:Ds(d,p,ae,null,E,A)}for(K in E)if(A=E[K],I=b[K],E.hasOwnProperty(K)&&(A!=null||I!=null))switch(K){case"value":Ke=A;break;case"defaultValue":Xe=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==I&&Ds(d,p,K,A,E,I)}Ld(d,Ke,Xe);return;case"option":for(var dn in b)if(Ke=b[dn],b.hasOwnProperty(dn)&&Ke!=null&&!E.hasOwnProperty(dn))switch(dn){case"selected":d.selected=!1;break;default:Ds(d,p,dn,null,E,Ke)}for(ke in E)if(Ke=E[ke],Xe=b[ke],E.hasOwnProperty(ke)&&Ke!==Xe&&(Ke!=null||Xe!=null))switch(ke){case"selected":d.selected=Ke&&typeof Ke!="function"&&typeof Ke!="symbol";break;default:Ds(d,p,ke,Ke,E,Xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jn in b)Ke=b[jn],b.hasOwnProperty(jn)&&Ke!=null&&!E.hasOwnProperty(jn)&&Ds(d,p,jn,null,E,Ke);for(Ye in E)if(Ke=E[Ye],Xe=b[Ye],E.hasOwnProperty(Ye)&&Ke!==Xe&&(Ke!=null||Xe!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(r(137,p));break;default:Ds(d,p,Ye,Ke,E,Xe)}return;default:if(Ou(p)){for(var Ps in b)Ke=b[Ps],b.hasOwnProperty(Ps)&&Ke!==void 0&&!E.hasOwnProperty(Ps)&&n5(d,p,Ps,void 0,E,Ke);for(st in E)Ke=E[st],Xe=b[st],!E.hasOwnProperty(st)||Ke===Xe||Ke===void 0&&Xe===void 0||n5(d,p,st,Ke,E,Xe);return}}for(var je in b)Ke=b[je],b.hasOwnProperty(je)&&Ke!=null&&!E.hasOwnProperty(je)&&Ds(d,p,je,null,E,Ke);for(dt in E)Ke=E[dt],Xe=b[dt],!E.hasOwnProperty(dt)||Ke===Xe||Ke==null&&Xe==null||Ds(d,p,dt,Ke,E,Xe)}function CO(d){switch(d){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bce(){if(typeof performance.getEntriesByType=="function"){for(var d=0,p=0,b=performance.getEntriesByType("resource"),E=0;E<b.length;E++){var A=b[E],I=A.transferSize,K=A.initiatorType,ae=A.duration;if(I&&ae&&CO(K)){for(K=0,ae=A.responseEnd,E+=1;E<b.length;E++){var ke=b[E],Ye=ke.startTime;if(Ye>ae)break;var st=ke.transferSize,dt=ke.initiatorType;st&&CO(dt)&&(ke=ke.responseEnd,K+=st*(ke<ae?1:(ae-Ye)/(ke-Ye)))}if(--E,p+=8*(I+K)/(A.duration/1e3),d++,10<d)break}}if(0<d)return p/d/1e6}return navigator.connection&&(d=navigator.connection.downlink,typeof d=="number")?d:5}var r5=null,s5=null;function VE(d){return d.nodeType===9?d:d.ownerDocument}function kO(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function AO(d,p){if(d===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&p==="foreignObject"?0:d}function o5(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var i5=null;function yce(){var d=window.event;return d&&d.type==="popstate"?d===i5?!1:(i5=d,!0):(i5=null,!1)}var NO=typeof setTimeout=="function"?setTimeout:void 0,vce=typeof clearTimeout=="function"?clearTimeout:void 0,IO=typeof Promise=="function"?Promise:void 0,xce=typeof queueMicrotask=="function"?queueMicrotask:typeof IO<"u"?function(d){return IO.resolve(null).then(d).catch(wce)}:NO;function wce(d){setTimeout(function(){throw d})}function Bh(d){return d==="head"}function RO(d,p){var b=p,E=0;do{var A=b.nextSibling;if(d.removeChild(b),A&&A.nodeType===8)if(b=A.data,b==="/$"||b==="/&"){if(E===0){d.removeChild(A),Fg(p);return}E--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")E++;else if(b==="html")Ny(d.ownerDocument.documentElement);else if(b==="head"){b=d.ownerDocument.head,Ny(b);for(var I=b.firstChild;I;){var K=I.nextSibling,ae=I.nodeName;I[As]||ae==="SCRIPT"||ae==="STYLE"||ae==="LINK"&&I.rel.toLowerCase()==="stylesheet"||b.removeChild(I),I=K}}else b==="body"&&Ny(d.ownerDocument.body);b=A}while(b);Fg(p)}function MO(d,p){var b=d;d=0;do{var E=b.nextSibling;if(b.nodeType===1?p?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(p?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),E&&E.nodeType===8)if(b=E.data,b==="/$"){if(d===0)break;d--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||d++;b=E}while(b)}function a5(d){var p=d.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":a5(b),Zn(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}d.removeChild(b)}}function Ece(d,p,b,E){for(;d.nodeType===1;){var A=b;if(d.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(E){if(!d[As])switch(p){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(I=d.getAttribute("rel"),I==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(I!==A.rel||d.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||d.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||d.getAttribute("title")!==(A.title==null?null:A.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(I=d.getAttribute("src"),(I!==(A.src==null?null:A.src)||d.getAttribute("type")!==(A.type==null?null:A.type)||d.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&I&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(p==="input"&&d.type==="hidden"){var I=A.name==null?null:""+A.name;if(A.type==="hidden"&&d.getAttribute("name")===I)return d}else return d;if(d=pc(d.nextSibling),d===null)break}return null}function _ce(d,p,b){if(p==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!b||(d=pc(d.nextSibling),d===null))return null;return d}function OO(d,p){for(;d.nodeType!==8;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!p||(d=pc(d.nextSibling),d===null))return null;return d}function l5(d){return d.data==="$?"||d.data==="$~"}function c5(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState!=="loading"}function Sce(d,p){var b=d.ownerDocument;if(d.data==="$~")d._reactRetry=p;else if(d.data!=="$?"||b.readyState!=="loading")p();else{var E=function(){p(),b.removeEventListener("DOMContentLoaded",E)};b.addEventListener("DOMContentLoaded",E),d._reactRetry=E}}function pc(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return d}var u5=null;function DO(d){d=d.nextSibling;for(var p=0;d;){if(d.nodeType===8){var b=d.data;if(b==="/$"||b==="/&"){if(p===0)return pc(d.nextSibling);p--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||p++}d=d.nextSibling}return null}function PO(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var b=d.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(p===0)return d;p--}else b!=="/$"&&b!=="/&"||p++}d=d.previousSibling}return null}function LO(d,p,b){switch(p=VE(b),d){case"html":if(d=p.documentElement,!d)throw Error(r(452));return d;case"head":if(d=p.head,!d)throw Error(r(453));return d;case"body":if(d=p.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function Ny(d){for(var p=d.attributes;p.length;)d.removeAttributeNode(p[0]);Zn(d)}var mc=new Map,$O=new Set;function qE(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var ff=ee.d;ee.d={f:Tce,r:Cce,D:kce,C:Ace,L:Nce,m:Ice,X:Mce,S:Rce,M:Oce};function Tce(){var d=ff.f(),p=LE();return d||p}function Cce(d){var p=ua(d);p!==null&&p.tag===5&&p.type==="form"?Rs(p):ff.r(d)}var Pg=typeof document>"u"?null:document;function FO(d,p,b){var E=Pg;if(E&&typeof p=="string"&&p){var A=Yi(p);A='link[rel="'+d+'"][href="'+A+'"]',typeof b=="string"&&(A+='[crossorigin="'+b+'"]'),$O.has(A)||($O.add(A),d={rel:d,crossOrigin:b,href:p},E.querySelector(A)===null&&(p=E.createElement("link"),ea(p,"link",d),mt(p),E.head.appendChild(p)))}}function kce(d){ff.D(d),FO("dns-prefetch",d,null)}function Ace(d,p){ff.C(d,p),FO("preconnect",d,p)}function Nce(d,p,b){ff.L(d,p,b);var E=Pg;if(E&&d&&p){var A='link[rel="preload"][as="'+Yi(p)+'"]';p==="image"&&b&&b.imageSrcSet?(A+='[imagesrcset="'+Yi(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(A+='[imagesizes="'+Yi(b.imageSizes)+'"]')):A+='[href="'+Yi(d)+'"]';var I=A;switch(p){case"style":I=Lg(d);break;case"script":I=$g(d)}mc.has(I)||(d=f({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:d,as:p},b),mc.set(I,d),E.querySelector(A)!==null||p==="style"&&E.querySelector(Iy(I))||p==="script"&&E.querySelector(Ry(I))||(p=E.createElement("link"),ea(p,"link",d),mt(p),E.head.appendChild(p)))}}function Ice(d,p){ff.m(d,p);var b=Pg;if(b&&d){var E=p&&typeof p.as=="string"?p.as:"script",A='link[rel="modulepreload"][as="'+Yi(E)+'"][href="'+Yi(d)+'"]',I=A;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=$g(d)}if(!mc.has(I)&&(d=f({rel:"modulepreload",href:d},p),mc.set(I,d),b.querySelector(A)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(Ry(I)))return}E=b.createElement("link"),ea(E,"link",d),mt(E),b.head.appendChild(E)}}}function Rce(d,p,b){ff.S(d,p,b);var E=Pg;if(E&&d){var A=Fn(E).hoistableStyles,I=Lg(d);p=p||"default";var K=A.get(I);if(!K){var ae={loading:0,preload:null};if(K=E.querySelector(Iy(I)))ae.loading=5;else{d=f({rel:"stylesheet",href:d,"data-precedence":p},b),(b=mc.get(I))&&d5(d,b);var ke=K=E.createElement("link");mt(ke),ea(ke,"link",d),ke._p=new Promise(function(Ye,st){ke.onload=Ye,ke.onerror=st}),ke.addEventListener("load",function(){ae.loading|=1}),ke.addEventListener("error",function(){ae.loading|=2}),ae.loading|=4,GE(K,p,E)}K={type:"stylesheet",instance:K,count:1,state:ae},A.set(I,K)}}}function Mce(d,p){ff.X(d,p);var b=Pg;if(b&&d){var E=Fn(b).hoistableScripts,A=$g(d),I=E.get(A);I||(I=b.querySelector(Ry(A)),I||(d=f({src:d,async:!0},p),(p=mc.get(A))&&f5(d,p),I=b.createElement("script"),mt(I),ea(I,"link",d),b.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},E.set(A,I))}}function Oce(d,p){ff.M(d,p);var b=Pg;if(b&&d){var E=Fn(b).hoistableScripts,A=$g(d),I=E.get(A);I||(I=b.querySelector(Ry(A)),I||(d=f({src:d,async:!0,type:"module"},p),(p=mc.get(A))&&f5(d,p),I=b.createElement("script"),mt(I),ea(I,"link",d),b.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},E.set(A,I))}}function BO(d,p,b,E){var A=(A=Ce.current)?qE(A):null;if(!A)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=Lg(b.href),b=Fn(A).hoistableStyles,E=b.get(p),E||(E={type:"style",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){d=Lg(b.href);var I=Fn(A).hoistableStyles,K=I.get(d);if(K||(A=A.ownerDocument||A,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(d,K),(I=A.querySelector(Iy(d)))&&!I._p&&(K.instance=I,K.state.loading=5),mc.has(d)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},mc.set(d,b),I||Dce(A,d,b,K.state))),p&&E===null)throw Error(r(528,""));return K}if(p&&E!==null)throw Error(r(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=$g(b),b=Fn(A).hoistableScripts,E=b.get(p),E||(E={type:"script",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function Lg(d){return'href="'+Yi(d)+'"'}function Iy(d){return'link[rel="stylesheet"]['+d+"]"}function zO(d){return f({},d,{"data-precedence":d.precedence,precedence:null})}function Dce(d,p,b,E){d.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=d.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),ea(p,"link",b),mt(p),d.head.appendChild(p))}function $g(d){return'[src="'+Yi(d)+'"]'}function Ry(d){return"script[async]"+d}function jO(d,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var E=d.querySelector('style[data-href~="'+Yi(b.href)+'"]');if(E)return p.instance=E,mt(E),E;var A=f({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return E=(d.ownerDocument||d).createElement("style"),mt(E),ea(E,"style",A),GE(E,b.precedence,d),p.instance=E;case"stylesheet":A=Lg(b.href);var I=d.querySelector(Iy(A));if(I)return p.state.loading|=4,p.instance=I,mt(I),I;E=zO(b),(A=mc.get(A))&&d5(E,A),I=(d.ownerDocument||d).createElement("link"),mt(I);var K=I;return K._p=new Promise(function(ae,ke){K.onload=ae,K.onerror=ke}),ea(I,"link",E),p.state.loading|=4,GE(I,b.precedence,d),p.instance=I;case"script":return I=$g(b.src),(A=d.querySelector(Ry(I)))?(p.instance=A,mt(A),A):(E=b,(A=mc.get(I))&&(E=f({},b),f5(E,A)),d=d.ownerDocument||d,A=d.createElement("script"),mt(A),ea(A,"link",E),d.head.appendChild(A),p.instance=A);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,GE(E,b.precedence,d));return p.instance}function GE(d,p,b){for(var E=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=E.length?E[E.length-1]:null,I=A,K=0;K<E.length;K++){var ae=E[K];if(ae.dataset.precedence===p)I=ae;else if(I!==A)break}I?I.parentNode.insertBefore(d,I.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(d,p.firstChild))}function d5(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.title==null&&(d.title=p.title)}function f5(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.integrity==null&&(d.integrity=p.integrity)}var WE=null;function UO(d,p,b){if(WE===null){var E=new Map,A=WE=new Map;A.set(b,E)}else A=WE,E=A.get(b),E||(E=new Map,A.set(b,E));if(E.has(d))return E;for(E.set(d,null),b=b.getElementsByTagName(d),A=0;A<b.length;A++){var I=b[A];if(!(I[As]||I[gr]||d==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var K=I.getAttribute(p)||"";K=d+K;var ae=E.get(K);ae?ae.push(I):E.set(K,[I])}}return E}function HO(d,p,b){d=d.ownerDocument||d,d.head.insertBefore(b,p==="title"?d.querySelector("head > title"):null)}function Pce(d,p,b){if(b===1||p.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return d=p.disabled,typeof p.precedence=="string"&&d==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function VO(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}function Lce(d,p,b,E){if(b.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var A=Lg(E.href),I=p.querySelector(Iy(A));if(I){p=I._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(d.count++,d=YE.bind(d),p.then(d,d)),b.state.loading|=4,b.instance=I,mt(I);return}I=p.ownerDocument||p,E=zO(E),(A=mc.get(A))&&d5(E,A),I=I.createElement("link"),mt(I);var K=I;K._p=new Promise(function(ae,ke){K.onload=ae,K.onerror=ke}),ea(I,"link",E),b.instance=I}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(b,p),(p=b.state.preload)&&(b.state.loading&3)===0&&(d.count++,b=YE.bind(d),p.addEventListener("load",b),p.addEventListener("error",b))}}var h5=0;function $ce(d,p){return d.stylesheets&&d.count===0&&ZE(d,d.stylesheets),0<d.count||0<d.imgCount?function(b){var E=setTimeout(function(){if(d.stylesheets&&ZE(d,d.stylesheets),d.unsuspend){var I=d.unsuspend;d.unsuspend=null,I()}},6e4+p);0<d.imgBytes&&h5===0&&(h5=62500*bce());var A=setTimeout(function(){if(d.waitingForImages=!1,d.count===0&&(d.stylesheets&&ZE(d,d.stylesheets),d.unsuspend)){var I=d.unsuspend;d.unsuspend=null,I()}},(d.imgBytes>h5?50:800)+p);return d.unsuspend=b,function(){d.unsuspend=null,clearTimeout(E),clearTimeout(A)}}:null}function YE(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ZE(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var KE=null;function ZE(d,p){d.stylesheets=null,d.unsuspend!==null&&(d.count++,KE=new Map,p.forEach(Fce,d),KE=null,YE.call(d))}function Fce(d,p){if(!(p.state.loading&4)){var b=KE.get(d);if(b)var E=b.get(null);else{b=new Map,KE.set(d,b);for(var A=d.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<A.length;I++){var K=A[I];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(b.set(K.dataset.precedence,K),E=K)}E&&b.set(null,E)}A=p.instance,K=A.getAttribute("data-precedence"),I=b.get(K)||E,I===E&&b.set(null,A),b.set(K,A),this.count++,E=YE.bind(this),A.addEventListener("load",E),A.addEventListener("error",E),I?I.parentNode.insertBefore(A,I.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(A,d.firstChild)),p.state.loading|=4}}var My={$$typeof:k,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Bce(d,p,b,E,A,I,K,ae,ke){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mr(0),this.hiddenUpdates=mr(null),this.identifierPrefix=E,this.onUncaughtError=A,this.onCaughtError=I,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ke,this.incompleteTransitions=new Map}function qO(d,p,b,E,A,I,K,ae,ke,Ye,st,dt){return d=new Bce(d,p,b,K,ke,Ye,st,dt,ae),p=1,I===!0&&(p|=24),I=Fo(3,null,null,p),d.current=I,I.stateNode=d,p=ry(),p.refCount++,d.pooledCache=p,p.refCount++,I.memoizedState={element:E,isDehydrated:b,cache:p},Xd(I),d}function GO(d){return d?(d=Zi,d):Zi}function WO(d,p,b,E,A,I){A=GO(A),E.context===null?E.context=A:E.pendingContext=A,E=Uu(p),E.payload={element:b},I=I===void 0?null:I,I!==null&&(E.callback=I),b=Hu(d,E,p),b!==null&&(ol(b,d,p),Vu(b,d,p))}function YO(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var b=d.retryLane;d.retryLane=b!==0&&b<p?b:p}}function p5(d,p){YO(d,p),(d=d.alternate)&&YO(d,p)}function KO(d){if(d.tag===13||d.tag===31){var p=qc(d,67108864);p!==null&&ol(p,d,67108864),p5(d,67108864)}}function ZO(d){if(d.tag===13||d.tag===31){var p=Fl();p=Lr(p);var b=qc(d,p);b!==null&&ol(b,d,p),p5(d,p)}}var JE=!0;function zce(d,p,b,E){var A=J.T;J.T=null;var I=ee.p;try{ee.p=2,m5(d,p,b,E)}finally{ee.p=I,J.T=A}}function jce(d,p,b,E){var A=J.T;J.T=null;var I=ee.p;try{ee.p=8,m5(d,p,b,E)}finally{ee.p=I,J.T=A}}function m5(d,p,b,E){if(JE){var A=g5(E);if(A===null)t5(d,p,E,XE,b),XO(d,E);else if(Hce(A,d,p,b,E))E.stopPropagation();else if(XO(d,E),p&4&&-1<Uce.indexOf(d)){for(;A!==null;){var I=ua(A);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var K=on(I.pendingLanes);if(K!==0){var ae=I;for(ae.pendingLanes|=2,ae.entangledLanes|=2;K;){var ke=1<<31-jt(K);ae.entanglements[1]|=ke,K&=~ke}Ju(I),(fs&6)===0&&(DE=Le()+500,Cy(0))}}break;case 31:case 13:ae=qc(I,2),ae!==null&&ol(ae,I,2),LE(),p5(I,2)}if(I=g5(E),I===null&&t5(d,p,E,XE,b),I===A)break;A=I}A!==null&&E.stopPropagation()}else t5(d,p,E,null,b)}}function g5(d){return d=Jn(d),b5(d)}var XE=null;function b5(d){if(XE=null,d=Hr(d),d!==null){var p=o(d);if(p===null)d=null;else{var b=p.tag;if(b===13){if(d=i(p),d!==null)return d;d=null}else if(b===31){if(d=a(p),d!==null)return d;d=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null)}}return XE=d,null}function JO(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ve()){case _e:return 2;case Y:return 8;case L:case B:return 32;case ce:return 268435456;default:return 32}default:return 32}}var y5=!1,zh=null,jh=null,Uh=null,Oy=new Map,Dy=new Map,Hh=[],Uce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function XO(d,p){switch(d){case"focusin":case"focusout":zh=null;break;case"dragenter":case"dragleave":jh=null;break;case"mouseover":case"mouseout":Uh=null;break;case"pointerover":case"pointerout":Oy.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dy.delete(p.pointerId)}}function Py(d,p,b,E,A,I){return d===null||d.nativeEvent!==I?(d={blockedOn:p,domEventName:b,eventSystemFlags:E,nativeEvent:I,targetContainers:[A]},p!==null&&(p=ua(p),p!==null&&KO(p)),d):(d.eventSystemFlags|=E,p=d.targetContainers,A!==null&&p.indexOf(A)===-1&&p.push(A),d)}function Hce(d,p,b,E,A){switch(p){case"focusin":return zh=Py(zh,d,p,b,E,A),!0;case"dragenter":return jh=Py(jh,d,p,b,E,A),!0;case"mouseover":return Uh=Py(Uh,d,p,b,E,A),!0;case"pointerover":var I=A.pointerId;return Oy.set(I,Py(Oy.get(I)||null,d,p,b,E,A)),!0;case"gotpointercapture":return I=A.pointerId,Dy.set(I,Py(Dy.get(I)||null,d,p,b,E,A)),!0}return!1}function QO(d){var p=Hr(d.target);if(p!==null){var b=o(p);if(b!==null){if(p=b.tag,p===13){if(p=i(b),p!==null){d.blockedOn=p,wo(d.priority,function(){ZO(b)});return}}else if(p===31){if(p=a(b),p!==null){d.blockedOn=p,wo(d.priority,function(){ZO(b)});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){d.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}d.blockedOn=null}function QE(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var b=g5(d.nativeEvent);if(b===null){b=d.nativeEvent;var E=new b.constructor(b.type,b);Kt=E,b.target.dispatchEvent(E),Kt=null}else return p=ua(b),p!==null&&KO(p),d.blockedOn=b,!1;p.shift()}return!0}function eD(d,p,b){QE(d)&&b.delete(p)}function Vce(){y5=!1,zh!==null&&QE(zh)&&(zh=null),jh!==null&&QE(jh)&&(jh=null),Uh!==null&&QE(Uh)&&(Uh=null),Oy.forEach(eD),Dy.forEach(eD)}function e2(d,p){d.blockedOn===p&&(d.blockedOn=null,y5||(y5=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vce)))}var t2=null;function tD(d){t2!==d&&(t2=d,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){t2===d&&(t2=null);for(var p=0;p<d.length;p+=3){var b=d[p],E=d[p+1],A=d[p+2];if(typeof E!="function"){if(b5(E||b)===null)continue;break}var I=ua(b);I!==null&&(d.splice(p,3),p-=3,Gn(I,{pending:!0,data:A,method:b.method,action:E},E,A))}}))}function Fg(d){function p(ke){return e2(ke,d)}zh!==null&&e2(zh,d),jh!==null&&e2(jh,d),Uh!==null&&e2(Uh,d),Oy.forEach(p),Dy.forEach(p);for(var b=0;b<Hh.length;b++){var E=Hh[b];E.blockedOn===d&&(E.blockedOn=null)}for(;0<Hh.length&&(b=Hh[0],b.blockedOn===null);)QO(b),b.blockedOn===null&&Hh.shift();if(b=(d.ownerDocument||d).$$reactFormReplay,b!=null)for(E=0;E<b.length;E+=3){var A=b[E],I=b[E+1],K=A[Do]||null;if(typeof I=="function")K||tD(b);else if(K){var ae=null;if(I&&I.hasAttribute("formAction")){if(A=I,K=I[Do]||null)ae=K.formAction;else if(b5(A)!==null)continue}else ae=K.action;typeof ae=="function"?b[E+1]=ae:(b.splice(E,3),E-=3),tD(b)}}}function nD(){function d(I){I.canIntercept&&I.info==="react-transition"&&I.intercept({handler:function(){return new Promise(function(K){return A=K})},focusReset:"manual",scroll:"manual"})}function p(){A!==null&&(A(),A=null),E||setTimeout(b,20)}function b(){if(!E&&!navigation.transition){var I=navigation.currentEntry;I&&I.url!=null&&navigation.navigate(I.url,{state:I.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,A=null;return navigation.addEventListener("navigate",d),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(b,100),function(){E=!0,navigation.removeEventListener("navigate",d),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),A!==null&&(A(),A=null)}}}function v5(d){this._internalRoot=d}n2.prototype.render=v5.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(r(409));var b=p.current,E=Fl();WO(b,E,d,p,null,null)},n2.prototype.unmount=v5.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;WO(d.current,2,null,d,null,null),LE(),p[at]=null}};function n2(d){this._internalRoot=d}n2.prototype.unstable_scheduleHydration=function(d){if(d){var p=Gs();d={blockedOn:null,target:d,priority:p};for(var b=0;b<Hh.length&&p!==0&&p<Hh[b].priority;b++);Hh.splice(b,0,d),b===0&&QO(d)}};var rD=t.version;if(rD!=="19.2.0")throw Error(r(527,rD,"19.2.0"));ee.findDOMNode=function(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=c(p),d=d!==null?u(d):null,d=d===null?null:d.stateNode,d};var qce={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var r2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!r2.isDisabled&&r2.supportsFiber)try{Be=r2.inject(qce),ut=r2}catch{}}return $y.createRoot=function(d,p){if(!s(d))throw Error(r(299));var b=!1,E="",A=Ra,I=gs,K=Ks;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(A=p.onUncaughtError),p.onCaughtError!==void 0&&(I=p.onCaughtError),p.onRecoverableError!==void 0&&(K=p.onRecoverableError)),p=qO(d,1,!1,null,null,b,E,null,A,I,K,nD),d[at]=p.current,e5(d),new v5(p)},$y.hydrateRoot=function(d,p,b){if(!s(d))throw Error(r(299));var E=!1,A="",I=Ra,K=gs,ae=Ks,ke=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(A=b.identifierPrefix),b.onUncaughtError!==void 0&&(I=b.onUncaughtError),b.onCaughtError!==void 0&&(K=b.onCaughtError),b.onRecoverableError!==void 0&&(ae=b.onRecoverableError),b.formState!==void 0&&(ke=b.formState)),p=qO(d,1,!0,p,b??null,E,A,ke,I,K,ae,nD),p.context=GO(null),b=p.current,E=Fl(),E=Lr(E),A=Uu(E),A.callback=null,Hu(b,A,E),b=E,p.current.lanes=b,Kn(p,b),Ju(p),d[at]=p.current,e5(d),new n2(p)},$y.version="19.2.0",$y}var hD;function rue(){if(hD)return E5.exports;hD=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),E5.exports=nue(),E5.exports}var sue=rue();const oue=km(sue);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let iue,aue;function lue(){return{geminiUrl:iue,vertexUrl:aue}}function cue(e,t,n,r){var s,o;if(!(e!=null&&e.baseUrl)){const i=lue();return t?(s=i.vertexUrl)!==null&&s!==void 0?s:n:(o=i.geminiUrl)!==null&&o!==void 0?o:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nh{}function en(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const o=t[s];return o!=null?String(o):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function C(e,t,n){for(let o=0;o<t.length-1;o++){const i=t[o];if(i.endsWith("[]")){const a=i.slice(0,-2);if(!(a in e))if(Array.isArray(n))e[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(e[a])){const l=e[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const u=l[c];C(u,t.slice(o+1),n[c])}else for(const c of l)C(c,t.slice(o+1),n)}return}else if(i.endsWith("[0]")){const a=i.slice(0,-3);a in e||(e[a]=[{}]);const l=e[a];C(l[0],t.slice(o+1),n);return}(!e[i]||typeof e[i]!="object")&&(e[i]={}),e=e[i]}const r=t[t.length-1],s=e[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function T(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const s=t[r];if(s.endsWith("[]")){const o=s.slice(0,-2);if(o in e){const i=e[o];return Array.isArray(i)?i.map(a=>T(a,t.slice(r+1),n)):n}else return n}else e=e[s]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function uue(e,t){for(const[n,r]of Object.entries(t)){const s=n.split("."),o=r.split("."),i=new Set;let a=-1;for(let l=0;l<s.length;l++)if(s[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){const c=o[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&i.add(c)}sN(e,s,o,0,i)}}function sN(e,t,n,r,s){if(r>=t.length||typeof e!="object"||e===null)return;const o=t[r];if(o.endsWith("[]")){const i=o.slice(0,-2),a=e;if(i in a&&Array.isArray(a[i]))for(const l of a[i])sN(l,t,n,r+1,s)}else if(o==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const i=e,a=Object.keys(i).filter(c=>!c.startsWith("_")&&!s.has(c)),l={};for(const c of a)l[c]=i[c];for(const[c,u]of Object.entries(l)){const f=[];for(const m of n.slice(r))m==="*"?f.push(c):f.push(m);C(i,f,u)}for(const c of a)delete i[c]}}else{const i=e;o in i&&sN(i[o],t,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nR(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function due(e){const t={},n=T(e,["operationName"]);n!=null&&C(t,["operationName"],n);const r=T(e,["resourceName"]);return r!=null&&C(t,["_url","resourceName"],r),t}function fue(e){const t={},n=T(e,["name"]);n!=null&&C(t,["name"],n);const r=T(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=T(e,["done"]);s!=null&&C(t,["done"],s);const o=T(e,["error"]);o!=null&&C(t,["error"],o);const i=T(e,["response","generateVideoResponse"]);return i!=null&&C(t,["response"],pue(i)),t}function hue(e){const t={},n=T(e,["name"]);n!=null&&C(t,["name"],n);const r=T(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=T(e,["done"]);s!=null&&C(t,["done"],s);const o=T(e,["error"]);o!=null&&C(t,["error"],o);const i=T(e,["response"]);return i!=null&&C(t,["response"],mue(i)),t}function pue(e){const t={},n=T(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>gue(i))),C(t,["generatedVideos"],o)}const r=T(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const s=T(e,["raiMediaFilteredReasons"]);return s!=null&&C(t,["raiMediaFilteredReasons"],s),t}function mue(e){const t={},n=T(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>bue(i))),C(t,["generatedVideos"],o)}const r=T(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const s=T(e,["raiMediaFilteredReasons"]);return s!=null&&C(t,["raiMediaFilteredReasons"],s),t}function gue(e){const t={},n=T(e,["video"]);return n!=null&&C(t,["video"],_ue(n)),t}function bue(e){const t={},n=T(e,["_self"]);return n!=null&&C(t,["video"],Sue(n)),t}function yue(e){const t={},n=T(e,["operationName"]);return n!=null&&C(t,["_url","operationName"],n),t}function vue(e){const t={},n=T(e,["operationName"]);return n!=null&&C(t,["_url","operationName"],n),t}function xue(e){const t={},n=T(e,["name"]);n!=null&&C(t,["name"],n);const r=T(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=T(e,["done"]);s!=null&&C(t,["done"],s);const o=T(e,["error"]);o!=null&&C(t,["error"],o);const i=T(e,["response"]);return i!=null&&C(t,["response"],wue(i)),t}function wue(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["parent"]);r!=null&&C(t,["parent"],r);const s=T(e,["documentName"]);return s!=null&&C(t,["documentName"],s),t}function jV(e){const t={},n=T(e,["name"]);n!=null&&C(t,["name"],n);const r=T(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=T(e,["done"]);s!=null&&C(t,["done"],s);const o=T(e,["error"]);o!=null&&C(t,["error"],o);const i=T(e,["response"]);return i!=null&&C(t,["response"],Eue(i)),t}function Eue(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["parent"]);r!=null&&C(t,["parent"],r);const s=T(e,["documentName"]);return s!=null&&C(t,["documentName"],s),t}function _ue(e){const t={},n=T(e,["uri"]);n!=null&&C(t,["uri"],n);const r=T(e,["encodedVideo"]);r!=null&&C(t,["videoBytes"],nR(r));const s=T(e,["encoding"]);return s!=null&&C(t,["mimeType"],s),t}function Sue(e){const t={},n=T(e,["gcsUri"]);n!=null&&C(t,["uri"],n);const r=T(e,["bytesBase64Encoded"]);r!=null&&C(t,["videoBytes"],nR(r));const s=T(e,["mimeType"]);return s!=null&&C(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pD;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(pD||(pD={}));var mD;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(mD||(mD={}));var gD;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(gD||(gD={}));var xn;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(xn||(xn={}));var bD;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(bD||(bD={}));var yD;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(yD||(yD={}));var vD;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(vD||(vD={}));var xD;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(xD||(xD={}));var wD;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(wD||(wD={}));var ED;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(ED||(ED={}));var _D;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(_D||(_D={}));var SD;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(SD||(SD={}));var TD;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(TD||(TD={}));var CD;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(CD||(CD={}));var kD;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(kD||(kD={}));var AD;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(AD||(AD={}));var ND;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ND||(ND={}));var ID;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(ID||(ID={}));var RD;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(RD||(RD={}));var F1;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(F1||(F1={}));var MD;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(MD||(MD={}));var OD;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(OD||(OD={}));var DD;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(DD||(DD={}));var oN;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(oN||(oN={}));var PD;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(PD||(PD={}));var LD;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(LD||(LD={}));var $D;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})($D||($D={}));var FD;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(FD||(FD={}));var BD;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(BD||(BD={}));var zD;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(zD||(zD={}));var jD;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(jD||(jD={}));var UD;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(UD||(UD={}));var HD;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(HD||(HD={}));var VD;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(VD||(VD={}));var qD;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(qD||(qD={}));var GD;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(GD||(GD={}));var WD;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(WD||(WD={}));var YD;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(YD||(YD={}));var KD;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(KD||(KD={}));var ZD;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(ZD||(ZD={}));var JD;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(JD||(JD={}));var XD;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(XD||(XD={}));var QD;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(QD||(QD={}));var eP;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(eP||(eP={}));var tP;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(tP||(tP={}));var nP;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(nP||(nP={}));var rP;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(rP||(rP={}));var sP;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(sP||(sP={}));var oP;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(oP||(oP={}));var iP;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(iP||(iP={}));var aP;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(aP||(aP={}));var lP;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(lP||(lP={}));var cP;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(cP||(cP={}));var uP;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(uP||(uP={}));var d1;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(d1||(d1={}));class iN{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Fy{get text(){var t,n,r,s,o,i,a,l;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const f=[];for(const m of(l=(a=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&f.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var t,n,r,s,o,i,a,l;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const f of(l=(a=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(f))m!=="inlineData"&&(g!==null||g!==void 0)&&u.push(m);f.inlineData&&typeof f.inlineData.data=="string"&&(c+=atob(f.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,r,s,o,i,a,l;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,n,r,s,o,i,a,l,c;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.executableCode).map(f=>f.executableCode).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,r,s,o,i,a,l,c;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(i=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.codeExecutionResult).map(f=>f.codeExecutionResult).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class dP{}class fP{}class Tue{}class Cue{}class kue{}class Aue{}class hP{}class pP{}class mP{}class Nue{}class W_{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new W_;let s;const o=t;return n?s=hue(o):s=fue(o),Object.assign(r,s),r}}class gP{}class bP{}class yP{}class Iue{}class Rue{}class Mue{}class rR{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new rR,o=xue(t);return Object.assign(r,o),r}}class Oue{}class Due{}class Pue{}class vP{}class Lue{get text(){var t,n,r;let s="",o=!1;const i=[];for(const a of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&i.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,s+=a.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?s:void 0}get data(){var t,n,r;let s="";const o=[];for(const i of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(i))a!=="inlineData"&&l!==null&&o.push(a);i.inlineData&&typeof i.inlineData.data=="string"&&(s+=atob(i.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class $ue{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class sR{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new sR,o=jV(t);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ls(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function UV(e,t){const n=ls(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function HV(e){return Array.isArray(e)?e.map(t=>Y_(t)):[Y_(e)]}function Y_(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function VV(e){const t=Y_(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function qV(e){const t=Y_(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function xP(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function GV(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>xP(t)):[xP(e)]}function aN(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function wP(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function EP(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function va(e){if(e==null)throw new Error("ContentUnion is required");return aN(e)?e:{role:"user",parts:GV(e)}}function oR(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=va(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=va(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>va(n)):[va(t)]}function Ic(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(wP(e)||EP(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[va(e)]}const t=[],n=[],r=aN(e[0]);for(const s of e){const o=aN(s);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(s);else{if(wP(s)||EP(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||t.push({role:"user",parts:GV(n)}),t}function Fue(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(xn).includes(n[0].toUpperCase())?n[0].toUpperCase():xn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(xn).includes(r.toUpperCase())?r.toUpperCase():xn.TYPE_UNSPECIFIED})}}function y1(e){const t={},n=["items"],r=["anyOf"],s=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=e.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(t.nullable=!0,e=o[1]):o[1].type==="null"&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&Fue(e.type,t);for(const[i,a]of Object.entries(e))if(a!=null)if(i=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(xn).includes(a.toUpperCase())?a.toUpperCase():xn.TYPE_UNSPECIFIED}else if(n.includes(i))t[i]=y1(a);else if(r.includes(i)){const l=[];for(const c of a){if(c.type=="null"){t.nullable=!0;continue}l.push(y1(c))}t[i]=l}else if(s.includes(i)){const l={};for(const[c,u]of Object.entries(a))l[c]=y1(u);t[i]=l}else{if(i==="additionalProperties")continue;t[i]=a}return t}function iR(e){return y1(e)}function aR(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function lR(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function gb(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=y1(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=y1(t.response));return e}function bb(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Bue(e,t,n,r=1){const s=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:s?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:s?`${n}/${t}`:t}function rh(e,t){if(typeof t!="string")throw new Error("name must be a string");return Bue(e,t,"cachedContents")}function WV(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function F0(e){return nR(e)}function zue(e){return e!=null&&typeof e=="object"&&"name"in e}function jue(e){return e!=null&&typeof e=="object"&&"video"in e}function Uue(e){return e!=null&&typeof e=="object"&&"uri"in e}function YV(e){var t;let n;if(zue(e)&&(n=e.name),!(Uue(e)&&(n=e.uri,n===void 0))&&!(jue(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function KV(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function ZV(e){for(const t of["models","tunedModels","publisherModels"])if(Hue(e,t))return e[t];return[]}function Hue(e,t){return e!==null&&typeof e=="object"&&t in e}function Vue(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function que(e,t={}){const n=[],r=new Set;for(const s of e){const o=s.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const i=Vue(s,t);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function JV(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Gue(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function XV(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return e;let o=!1;for(const i of s){if(typeof i!="object"||i===null)continue;const l=i.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function yb(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function QV(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wue(e){const t={},n=T(e,["responsesFile"]);n!=null&&C(t,["fileName"],n);const r=T(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>kde(i))),C(t,["inlinedResponses"],o)}const s=T(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["inlinedEmbedContentResponses"],o)}return t}function Yue(e){const t={},n=T(e,["predictionsFormat"]);n!=null&&C(t,["format"],n);const r=T(e,["gcsDestination","outputUriPrefix"]);r!=null&&C(t,["gcsUri"],r);const s=T(e,["bigqueryDestination","outputUri"]);return s!=null&&C(t,["bigqueryUri"],s),t}function Kue(e){const t={},n=T(e,["format"]);n!=null&&C(t,["predictionsFormat"],n);const r=T(e,["gcsUri"]);r!=null&&C(t,["gcsDestination","outputUriPrefix"],r);const s=T(e,["bigqueryUri"]);if(s!=null&&C(t,["bigqueryDestination","outputUri"],s),T(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(T(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(T(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function E_(e){const t={},n=T(e,["name"]);n!=null&&C(t,["name"],n);const r=T(e,["metadata","displayName"]);r!=null&&C(t,["displayName"],r);const s=T(e,["metadata","state"]);s!=null&&C(t,["state"],QV(s));const o=T(e,["metadata","createTime"]);o!=null&&C(t,["createTime"],o);const i=T(e,["metadata","endTime"]);i!=null&&C(t,["endTime"],i);const a=T(e,["metadata","updateTime"]);a!=null&&C(t,["updateTime"],a);const l=T(e,["metadata","model"]);l!=null&&C(t,["model"],l);const c=T(e,["metadata","output"]);return c!=null&&C(t,["dest"],Wue(XV(c))),t}function lN(e){const t={},n=T(e,["name"]);n!=null&&C(t,["name"],n);const r=T(e,["displayName"]);r!=null&&C(t,["displayName"],r);const s=T(e,["state"]);s!=null&&C(t,["state"],QV(s));const o=T(e,["error"]);o!=null&&C(t,["error"],o);const i=T(e,["createTime"]);i!=null&&C(t,["createTime"],i);const a=T(e,["startTime"]);a!=null&&C(t,["startTime"],a);const l=T(e,["endTime"]);l!=null&&C(t,["endTime"],l);const c=T(e,["updateTime"]);c!=null&&C(t,["updateTime"],c);const u=T(e,["model"]);u!=null&&C(t,["model"],u);const f=T(e,["inputConfig"]);f!=null&&C(t,["src"],Zue(f));const m=T(e,["outputConfig"]);m!=null&&C(t,["dest"],Yue(XV(m)));const g=T(e,["completionStats"]);return g!=null&&C(t,["completionStats"],g),t}function Zue(e){const t={},n=T(e,["instancesFormat"]);n!=null&&C(t,["format"],n);const r=T(e,["gcsSource","uris"]);r!=null&&C(t,["gcsUri"],r);const s=T(e,["bigquerySource","inputUri"]);return s!=null&&C(t,["bigqueryUri"],s),t}function Jue(e,t){const n={};if(T(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(T(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(T(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=T(t,["fileName"]);r!=null&&C(n,["fileName"],r);const s=T(t,["inlinedRequests"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>Cde(e,i))),C(n,["requests","requests"],o)}return n}function Xue(e){const t={},n=T(e,["format"]);n!=null&&C(t,["instancesFormat"],n);const r=T(e,["gcsUri"]);r!=null&&C(t,["gcsSource","uris"],r);const s=T(e,["bigqueryUri"]);if(s!=null&&C(t,["bigquerySource","inputUri"],s),T(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(T(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Que(e){const t={},n=T(e,["data"]);if(n!=null&&C(t,["data"],n),T(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function ede(e,t){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function tde(e,t){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function nde(e){const t={},n=T(e,["content"]);n!=null&&C(t,["content"],n);const r=T(e,["citationMetadata"]);r!=null&&C(t,["citationMetadata"],rde(r));const s=T(e,["tokenCount"]);s!=null&&C(t,["tokenCount"],s);const o=T(e,["finishReason"]);o!=null&&C(t,["finishReason"],o);const i=T(e,["avgLogprobs"]);i!=null&&C(t,["avgLogprobs"],i);const a=T(e,["groundingMetadata"]);a!=null&&C(t,["groundingMetadata"],a);const l=T(e,["index"]);l!=null&&C(t,["index"],l);const c=T(e,["logprobsResult"]);c!=null&&C(t,["logprobsResult"],c);const u=T(e,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),C(t,["safetyRatings"],m)}const f=T(e,["urlContextMetadata"]);return f!=null&&C(t,["urlContextMetadata"],f),t}function rde(e){const t={},n=T(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),C(t,["citations"],r)}return t}function eq(e){const t={},n=T(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Dde(o))),C(t,["parts"],s)}const r=T(e,["role"]);return r!=null&&C(t,["role"],r),t}function sde(e,t){const n={},r=T(e,["displayName"]);if(t!==void 0&&r!=null&&C(t,["batch","displayName"],r),T(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ode(e,t){const n={},r=T(e,["displayName"]);t!==void 0&&r!=null&&C(t,["displayName"],r);const s=T(e,["dest"]);return t!==void 0&&s!=null&&C(t,["outputConfig"],Kue(Gue(s))),n}function _P(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["src"]);s!=null&&C(n,["batch","inputConfig"],Jue(e,JV(e,s)));const o=T(t,["config"]);return o!=null&&sde(o,n),n}function ide(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["model"],ls(e,r));const s=T(t,["src"]);s!=null&&C(n,["inputConfig"],Xue(JV(e,s)));const o=T(t,["config"]);return o!=null&&ode(o,n),n}function ade(e,t){const n={},r=T(e,["displayName"]);return t!==void 0&&r!=null&&C(t,["batch","displayName"],r),n}function lde(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["src"]);s!=null&&C(n,["batch","inputConfig"],mde(e,s));const o=T(t,["config"]);return o!=null&&ade(o,n),n}function cde(e,t){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function ude(e,t){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function dde(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["name"]);r!=null&&C(t,["name"],r);const s=T(e,["done"]);s!=null&&C(t,["done"],s);const o=T(e,["error"]);return o!=null&&C(t,["error"],o),t}function fde(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["name"]);r!=null&&C(t,["name"],r);const s=T(e,["done"]);s!=null&&C(t,["done"],s);const o=T(e,["error"]);return o!=null&&C(t,["error"],o),t}function hde(e,t){const n={},r=T(t,["contents"]);if(r!=null){let o=oR(e,r);Array.isArray(o)&&(o=o.map(i=>i)),C(n,["requests[]","request","content"],o)}const s=T(t,["config"]);return s!=null&&(C(n,["_self"],pde(s,n)),uue(n,{"requests[].*":"requests[].request.*"})),n}function pde(e,t){const n={},r=T(e,["taskType"]);t!==void 0&&r!=null&&C(t,["requests[]","taskType"],r);const s=T(e,["title"]);t!==void 0&&s!=null&&C(t,["requests[]","title"],s);const o=T(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&C(t,["requests[]","outputDimensionality"],o),T(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(T(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function mde(e,t){const n={},r=T(t,["fileName"]);r!=null&&C(n,["file_name"],r);const s=T(t,["inlinedRequests"]);return s!=null&&C(n,["requests"],hde(e,s)),n}function gde(e){const t={};if(T(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=T(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function bde(e){const t={},n=T(e,["id"]);n!=null&&C(t,["id"],n);const r=T(e,["args"]);r!=null&&C(t,["args"],r);const s=T(e,["name"]);if(s!=null&&C(t,["name"],s),T(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function yde(e){const t={},n=T(e,["mode"]);n!=null&&C(t,["mode"],n);const r=T(e,["allowedFunctionNames"]);if(r!=null&&C(t,["allowedFunctionNames"],r),T(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function vde(e,t,n){const r={},s=T(t,["systemInstruction"]);n!==void 0&&s!=null&&C(n,["systemInstruction"],eq(va(s)));const o=T(t,["temperature"]);o!=null&&C(r,["temperature"],o);const i=T(t,["topP"]);i!=null&&C(r,["topP"],i);const a=T(t,["topK"]);a!=null&&C(r,["topK"],a);const l=T(t,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=T(t,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=T(t,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const f=T(t,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const m=T(t,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=T(t,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=T(t,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=T(t,["seed"]);v!=null&&C(r,["seed"],v);const w=T(t,["responseMimeType"]);w!=null&&C(r,["responseMimeType"],w);const _=T(t,["responseSchema"]);_!=null&&C(r,["responseSchema"],iR(_));const S=T(t,["responseJsonSchema"]);if(S!=null&&C(r,["responseJsonSchema"],S),T(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(T(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=T(t,["safetySettings"]);if(n!==void 0&&k!=null){let H=k;Array.isArray(H)&&(H=H.map(F=>Pde(F))),C(n,["safetySettings"],H)}const R=T(t,["tools"]);if(n!==void 0&&R!=null){let H=bb(R);Array.isArray(H)&&(H=H.map(F=>$de(gb(F)))),C(n,["tools"],H)}const O=T(t,["toolConfig"]);if(n!==void 0&&O!=null&&C(n,["toolConfig"],Lde(O)),T(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=T(t,["cachedContent"]);n!==void 0&&M!=null&&C(n,["cachedContent"],rh(e,M));const P=T(t,["responseModalities"]);P!=null&&C(r,["responseModalities"],P);const j=T(t,["mediaResolution"]);j!=null&&C(r,["mediaResolution"],j);const q=T(t,["speechConfig"]);if(q!=null&&C(r,["speechConfig"],aR(q)),T(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=T(t,["thinkingConfig"]);U!=null&&C(r,["thinkingConfig"],U);const z=T(t,["imageConfig"]);return z!=null&&C(r,["imageConfig"],Tde(z)),r}function xde(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>nde(c))),C(t,["candidates"],l)}const s=T(e,["modelVersion"]);s!=null&&C(t,["modelVersion"],s);const o=T(e,["promptFeedback"]);o!=null&&C(t,["promptFeedback"],o);const i=T(e,["responseId"]);i!=null&&C(t,["responseId"],i);const a=T(e,["usageMetadata"]);return a!=null&&C(t,["usageMetadata"],a),t}function wde(e,t){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function Ede(e,t){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function _de(e){const t={};if(T(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=T(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function Sde(e){const t={};if(T(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=T(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function Tde(e){const t={},n=T(e,["aspectRatio"]);n!=null&&C(t,["aspectRatio"],n);const r=T(e,["imageSize"]);if(r!=null&&C(t,["imageSize"],r),T(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(T(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Cde(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["request","model"],ls(e,r));const s=T(t,["contents"]);if(s!=null){let a=Ic(s);Array.isArray(a)&&(a=a.map(l=>eq(l))),C(n,["request","contents"],a)}const o=T(t,["metadata"]);o!=null&&C(n,["metadata"],o);const i=T(t,["config"]);return i!=null&&C(n,["request","generationConfig"],vde(e,i,T(n,["request"],{}))),n}function kde(e){const t={},n=T(e,["response"]);n!=null&&C(t,["response"],xde(n));const r=T(e,["error"]);return r!=null&&C(t,["error"],r),t}function Ade(e,t){const n={},r=T(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=T(e,["pageToken"]);if(t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),T(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Nde(e,t){const n={},r=T(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=T(e,["pageToken"]);t!==void 0&&s!=null&&C(t,["_query","pageToken"],s);const o=T(e,["filter"]);return t!==void 0&&o!=null&&C(t,["_query","filter"],o),n}function Ide(e){const t={},n=T(e,["config"]);return n!=null&&Ade(n,t),t}function Rde(e){const t={},n=T(e,["config"]);return n!=null&&Nde(n,t),t}function Mde(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=T(e,["operations"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>E_(i))),C(t,["batchJobs"],o)}return t}function Ode(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=T(e,["batchPredictionJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>lN(i))),C(t,["batchJobs"],o)}return t}function Dde(e){const t={},n=T(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=T(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const s=T(e,["executableCode"]);s!=null&&C(t,["executableCode"],s);const o=T(e,["fileData"]);o!=null&&C(t,["fileData"],gde(o));const i=T(e,["functionCall"]);i!=null&&C(t,["functionCall"],bde(i));const a=T(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=T(e,["inlineData"]);l!=null&&C(t,["inlineData"],Que(l));const c=T(e,["text"]);c!=null&&C(t,["text"],c);const u=T(e,["thought"]);u!=null&&C(t,["thought"],u);const f=T(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=T(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function Pde(e){const t={},n=T(e,["category"]);if(n!=null&&C(t,["category"],n),T(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=T(e,["threshold"]);return r!=null&&C(t,["threshold"],r),t}function Lde(e){const t={},n=T(e,["functionCallingConfig"]);n!=null&&C(t,["functionCallingConfig"],yde(n));const r=T(e,["retrievalConfig"]);return r!=null&&C(t,["retrievalConfig"],r),t}function $de(e){const t={},n=T(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(T(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=T(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const s=T(e,["computerUse"]);s!=null&&C(t,["computerUse"],s);const o=T(e,["fileSearch"]);o!=null&&C(t,["fileSearch"],o);const i=T(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),T(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=T(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],_de(a));const l=T(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],Sde(l));const c=T(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vf;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Vf||(Vf={}));class Am{constructor(t,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,s)}init(t,n,r){var s,o;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(o=(s=i.config)===null||s===void 0?void 0:s.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fde extends nh{constructor(t){super(),this.apiClient=t,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Am(Vf.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=_P(this.apiClient,t),r=n._url,s=en("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const u of l){const f=Object.assign({},u);if(f.systemInstruction){const m=f.systemInstruction;delete f.systemInstruction;const g=f.request;g.systemInstruction=m,f.request=g}c.push(f)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const o=this.getGcsUri(t),i=this.getBigqueryUri(t);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${s}`;else if(i)r.dest=`${i}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=ide(this.apiClient,t);return a=en("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>lN(u))}else{const c=_P(this.apiClient,t);return a=en("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>E_(u))}}async createEmbeddingsInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=lde(this.apiClient,t);return o=en("{model}:asyncBatchEmbedContent",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>E_(l))}}async get(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Ede(this.apiClient,t);return a=en("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>lN(u))}else{const c=wde(this.apiClient,t);return a=en("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>E_(u))}}async cancel(t){var n,r,s,o;let i="",a={};if(this.apiClient.isVertexAI()){const l=tde(this.apiClient,t);i=en("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=ede(this.apiClient,t);i=en("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Rde(t);return a=en("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Ode(u),m=new vP;return Object.assign(m,f),m})}else{const c=Ide(t);return a=en("batches",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Mde(u),m=new vP;return Object.assign(m,f),m})}}async delete(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=ude(this.apiClient,t);return a=en("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>fde(u))}else{const c=cde(this.apiClient,t);return a=en("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>dde(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bde(e){const t={},n=T(e,["data"]);if(n!=null&&C(t,["data"],n),T(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function SP(e){const t={},n=T(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>lfe(o))),C(t,["parts"],s)}const r=T(e,["role"]);return r!=null&&C(t,["role"],r),t}function zde(e,t){const n={},r=T(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const s=T(e,["expireTime"]);t!==void 0&&s!=null&&C(t,["expireTime"],s);const o=T(e,["displayName"]);t!==void 0&&o!=null&&C(t,["displayName"],o);const i=T(e,["contents"]);if(t!==void 0&&i!=null){let u=Ic(i);Array.isArray(u)&&(u=u.map(f=>SP(f))),C(t,["contents"],u)}const a=T(e,["systemInstruction"]);t!==void 0&&a!=null&&C(t,["systemInstruction"],SP(va(a)));const l=T(e,["tools"]);if(t!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>ufe(f))),C(t,["tools"],u)}const c=T(e,["toolConfig"]);if(t!==void 0&&c!=null&&C(t,["toolConfig"],cfe(c)),T(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function jde(e,t){const n={},r=T(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const s=T(e,["expireTime"]);t!==void 0&&s!=null&&C(t,["expireTime"],s);const o=T(e,["displayName"]);t!==void 0&&o!=null&&C(t,["displayName"],o);const i=T(e,["contents"]);if(t!==void 0&&i!=null){let f=Ic(i);Array.isArray(f)&&(f=f.map(m=>m)),C(t,["contents"],f)}const a=T(e,["systemInstruction"]);t!==void 0&&a!=null&&C(t,["systemInstruction"],va(a));const l=T(e,["tools"]);if(t!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>dfe(m))),C(t,["tools"],f)}const c=T(e,["toolConfig"]);t!==void 0&&c!=null&&C(t,["toolConfig"],c);const u=T(e,["kmsKeyName"]);return t!==void 0&&u!=null&&C(t,["encryption_spec","kmsKeyName"],u),n}function Ude(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["model"],UV(e,r));const s=T(t,["config"]);return s!=null&&zde(s,n),n}function Hde(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["model"],UV(e,r));const s=T(t,["config"]);return s!=null&&jde(s,n),n}function Vde(e,t){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],rh(e,r)),n}function qde(e,t){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],rh(e,r)),n}function Gde(e){const t={},n=T(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function Wde(e){const t={},n=T(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function Yde(e){const t={};if(T(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=T(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Kde(e){const t={},n=T(e,["id"]);n!=null&&C(t,["id"],n);const r=T(e,["args"]);r!=null&&C(t,["args"],r);const s=T(e,["name"]);if(s!=null&&C(t,["name"],s),T(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Zde(e){const t={},n=T(e,["mode"]);n!=null&&C(t,["mode"],n);const r=T(e,["allowedFunctionNames"]);if(r!=null&&C(t,["allowedFunctionNames"],r),T(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Jde(e){const t={};if(T(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=T(e,["description"]);n!=null&&C(t,["description"],n);const r=T(e,["name"]);r!=null&&C(t,["name"],r);const s=T(e,["parameters"]);s!=null&&C(t,["parameters"],s);const o=T(e,["parametersJsonSchema"]);o!=null&&C(t,["parametersJsonSchema"],o);const i=T(e,["response"]);i!=null&&C(t,["response"],i);const a=T(e,["responseJsonSchema"]);return a!=null&&C(t,["responseJsonSchema"],a),t}function Xde(e,t){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],rh(e,r)),n}function Qde(e,t){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],rh(e,r)),n}function efe(e){const t={};if(T(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=T(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function tfe(e){const t={};if(T(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=T(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function nfe(e,t){const n={},r=T(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=T(e,["pageToken"]);return t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),n}function rfe(e,t){const n={},r=T(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=T(e,["pageToken"]);return t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),n}function sfe(e){const t={},n=T(e,["config"]);return n!=null&&nfe(n,t),t}function ofe(e){const t={},n=T(e,["config"]);return n!=null&&rfe(n,t),t}function ife(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=T(e,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["cachedContents"],o)}return t}function afe(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=T(e,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["cachedContents"],o)}return t}function lfe(e){const t={},n=T(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=T(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const s=T(e,["executableCode"]);s!=null&&C(t,["executableCode"],s);const o=T(e,["fileData"]);o!=null&&C(t,["fileData"],Yde(o));const i=T(e,["functionCall"]);i!=null&&C(t,["functionCall"],Kde(i));const a=T(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=T(e,["inlineData"]);l!=null&&C(t,["inlineData"],Bde(l));const c=T(e,["text"]);c!=null&&C(t,["text"],c);const u=T(e,["thought"]);u!=null&&C(t,["thought"],u);const f=T(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=T(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function cfe(e){const t={},n=T(e,["functionCallingConfig"]);n!=null&&C(t,["functionCallingConfig"],Zde(n));const r=T(e,["retrievalConfig"]);return r!=null&&C(t,["retrievalConfig"],r),t}function ufe(e){const t={},n=T(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(T(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=T(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const s=T(e,["computerUse"]);s!=null&&C(t,["computerUse"],s);const o=T(e,["fileSearch"]);o!=null&&C(t,["fileSearch"],o);const i=T(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),T(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=T(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],efe(a));const l=T(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],tfe(l));const c=T(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}function dfe(e){const t={},n=T(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Jde(m))),C(t,["functionDeclarations"],f)}const r=T(e,["retrieval"]);r!=null&&C(t,["retrieval"],r);const s=T(e,["googleSearchRetrieval"]);s!=null&&C(t,["googleSearchRetrieval"],s);const o=T(e,["computerUse"]);if(o!=null&&C(t,["computerUse"],o),T(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=T(e,["codeExecution"]);i!=null&&C(t,["codeExecution"],i);const a=T(e,["enterpriseWebSearch"]);a!=null&&C(t,["enterpriseWebSearch"],a);const l=T(e,["googleMaps"]);l!=null&&C(t,["googleMaps"],l);const c=T(e,["googleSearch"]);c!=null&&C(t,["googleSearch"],c);const u=T(e,["urlContext"]);return u!=null&&C(t,["urlContext"],u),t}function ffe(e,t){const n={},r=T(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const s=T(e,["expireTime"]);return t!==void 0&&s!=null&&C(t,["expireTime"],s),n}function hfe(e,t){const n={},r=T(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const s=T(e,["expireTime"]);return t!==void 0&&s!=null&&C(t,["expireTime"],s),n}function pfe(e,t){const n={},r=T(t,["name"]);r!=null&&C(n,["_url","name"],rh(e,r));const s=T(t,["config"]);return s!=null&&ffe(s,n),n}function mfe(e,t){const n={},r=T(t,["name"]);r!=null&&C(n,["_url","name"],rh(e,r));const s=T(t,["config"]);return s!=null&&hfe(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gfe extends nh{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Am(Vf.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Hde(this.apiClient,t);return a=en("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}else{const c=Ude(this.apiClient,t);return a=en("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Qde(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}else{const c=Xde(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=qde(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Wde(u),m=new bP;return Object.assign(m,f),m})}else{const c=Vde(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Gde(u),m=new bP;return Object.assign(m,f),m})}}async update(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=mfe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}else{const c=pfe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async listInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=ofe(t);return a=en("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=afe(u),m=new yP;return Object.assign(m,f),m})}else{const c=sfe(t);return a=en("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=ife(u),m=new yP;return Object.assign(m,f),m})}}}function TP(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ao(e){return this instanceof ao?(this.v=e,this):new ao(e)}function v1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(g){return function(y){return Promise.resolve(y).then(g,f)}}function a(g,y){r[g]&&(s[g]=function(v){return new Promise(function(w,_){o.push([g,v,w,_])>1||l(g,v)})},y&&(s[g]=y(s[g])))}function l(g,y){try{c(r[g](y))}catch(v){m(o[0][3],v)}}function c(g){g.value instanceof ao?Promise.resolve(g.value.v).then(u,f):m(o[0][2],g)}function u(g){l("next",g)}function f(g){l("throw",g)}function m(g,y){g(y),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Nv(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof TP=="function"?TP(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(i){return new Promise(function(a,l){i=e[o](i),s(a,l,i.done,i.value)})}}function s(o,i,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bfe(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:tq(n)}function tq(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function yfe(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function CP(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const s=[];let o=!0;for(;r<n&&e[r].role==="model";)s.push(e[r]),o&&!tq(e[r])&&(o=!1),r++;o?t.push(...s):t.pop()}return t}class vfe{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new xfe(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class xfe{constructor(t,n,r,s={},o=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=s,this.history=o,this.sendPromise=Promise.resolve(),yfe(o)}async sendMessage(t){var n;await this.sendPromise;const r=va(t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,i,a;const l=await s,c=(i=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content,u=l.automaticFunctionCallingHistory,f=this.getHistory(!0).length;let m=[];u!=null&&(m=(a=u.slice(f))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(t){var n;await this.sendPromise;const r=va(t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const o=await s;return this.processStreamResponse(o,r)}getHistory(t=!1){const n=t?CP(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var r,s;return v1(this,arguments,function*(){var i,a,l,c;const u=[];try{for(var f=!0,m=Nv(t),g;g=yield ao(m.next()),i=g.done,!i;f=!0){c=g.value,f=!1;const y=c;if(bfe(y)){const v=(s=(r=y.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;v!==void 0&&u.push(v)}yield yield ao(y)}}catch(y){a={error:y}}finally{try{!f&&!i&&(l=m.return)&&(yield ao(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(n,u)})}recordHistory(t,n,r){let s=[];n.length>0&&n.every(o=>o.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...CP(r)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g4 extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,g4.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wfe(e){const t={},n=T(e,["file"]);return n!=null&&C(t,["file"],n),t}function Efe(e){const t={},n=T(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function _fe(e){const t={},n=T(e,["name"]);return n!=null&&C(t,["_url","file"],YV(n)),t}function Sfe(e){const t={},n=T(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function Tfe(e){const t={},n=T(e,["name"]);return n!=null&&C(t,["_url","file"],YV(n)),t}function Cfe(e,t){const n={},r=T(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=T(e,["pageToken"]);return t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),n}function kfe(e){const t={},n=T(e,["config"]);return n!=null&&Cfe(n,t),t}function Afe(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=T(e,["files"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["files"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nfe extends nh{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Am(Vf.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=kfe(t);return o=en("files",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>{const c=Afe(l),u=new Oue;return Object.assign(u,c),u})}}async createInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wfe(t);return o=en("upload/v1beta/files",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=Efe(l),u=new Due;return Object.assign(u,c),u})}}async get(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Tfe(t);return o=en("files/{file}",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_fe(t);return o=en("files/{file}",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>{const c=Sfe(l),u=new Pue;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function __(e){const t={},n=T(e,["data"]);if(n!=null&&C(t,["data"],n),T(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Ife(e){const t={},n=T(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Gfe(o))),C(t,["parts"],s)}const r=T(e,["role"]);return r!=null&&C(t,["role"],r),t}function Rfe(e){const t={};if(T(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=T(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Mfe(e){const t={},n=T(e,["id"]);n!=null&&C(t,["id"],n);const r=T(e,["args"]);r!=null&&C(t,["args"],r);const s=T(e,["name"]);if(s!=null&&C(t,["name"],s),T(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Ofe(e){const t={};if(T(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=T(e,["description"]);n!=null&&C(t,["description"],n);const r=T(e,["name"]);r!=null&&C(t,["name"],r);const s=T(e,["parameters"]);s!=null&&C(t,["parameters"],s);const o=T(e,["parametersJsonSchema"]);o!=null&&C(t,["parametersJsonSchema"],o);const i=T(e,["response"]);i!=null&&C(t,["response"],i);const a=T(e,["responseJsonSchema"]);return a!=null&&C(t,["responseJsonSchema"],a),t}function Dfe(e){const t={},n=T(e,["modelSelectionConfig"]);n!=null&&C(t,["modelConfig"],n);const r=T(e,["responseJsonSchema"]);r!=null&&C(t,["responseJsonSchema"],r);const s=T(e,["audioTimestamp"]);s!=null&&C(t,["audioTimestamp"],s);const o=T(e,["candidateCount"]);o!=null&&C(t,["candidateCount"],o);const i=T(e,["enableAffectiveDialog"]);i!=null&&C(t,["enableAffectiveDialog"],i);const a=T(e,["frequencyPenalty"]);a!=null&&C(t,["frequencyPenalty"],a);const l=T(e,["logprobs"]);l!=null&&C(t,["logprobs"],l);const c=T(e,["maxOutputTokens"]);c!=null&&C(t,["maxOutputTokens"],c);const u=T(e,["mediaResolution"]);u!=null&&C(t,["mediaResolution"],u);const f=T(e,["presencePenalty"]);f!=null&&C(t,["presencePenalty"],f);const m=T(e,["responseLogprobs"]);m!=null&&C(t,["responseLogprobs"],m);const g=T(e,["responseMimeType"]);g!=null&&C(t,["responseMimeType"],g);const y=T(e,["responseModalities"]);y!=null&&C(t,["responseModalities"],y);const v=T(e,["responseSchema"]);v!=null&&C(t,["responseSchema"],v);const w=T(e,["routingConfig"]);w!=null&&C(t,["routingConfig"],w);const _=T(e,["seed"]);_!=null&&C(t,["seed"],_);const S=T(e,["speechConfig"]);S!=null&&C(t,["speechConfig"],nq(S));const k=T(e,["stopSequences"]);k!=null&&C(t,["stopSequences"],k);const R=T(e,["temperature"]);R!=null&&C(t,["temperature"],R);const O=T(e,["thinkingConfig"]);O!=null&&C(t,["thinkingConfig"],O);const M=T(e,["topK"]);M!=null&&C(t,["topK"],M);const P=T(e,["topP"]);if(P!=null&&C(t,["topP"],P),T(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Pfe(e){const t={};if(T(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=T(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function Lfe(e){const t={};if(T(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=T(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function $fe(e,t){const n={},r=T(e,["generationConfig"]);t!==void 0&&r!=null&&C(t,["setup","generationConfig"],r);const s=T(e,["responseModalities"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","responseModalities"],s);const o=T(e,["temperature"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","temperature"],o);const i=T(e,["topP"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","topP"],i);const a=T(e,["topK"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","topK"],a);const l=T(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=T(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=T(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const f=T(e,["speechConfig"]);t!==void 0&&f!=null&&C(t,["setup","generationConfig","speechConfig"],lR(f));const m=T(e,["thinkingConfig"]);t!==void 0&&m!=null&&C(t,["setup","generationConfig","thinkingConfig"],m);const g=T(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=T(e,["systemInstruction"]);t!==void 0&&y!=null&&C(t,["setup","systemInstruction"],Ife(va(y)));const v=T(e,["tools"]);if(t!==void 0&&v!=null){let M=bb(v);Array.isArray(M)&&(M=M.map(P=>Yfe(gb(P)))),C(t,["setup","tools"],M)}const w=T(e,["sessionResumption"]);t!==void 0&&w!=null&&C(t,["setup","sessionResumption"],Wfe(w));const _=T(e,["inputAudioTranscription"]);t!==void 0&&_!=null&&C(t,["setup","inputAudioTranscription"],_);const S=T(e,["outputAudioTranscription"]);t!==void 0&&S!=null&&C(t,["setup","outputAudioTranscription"],S);const k=T(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&C(t,["setup","realtimeInputConfig"],k);const R=T(e,["contextWindowCompression"]);t!==void 0&&R!=null&&C(t,["setup","contextWindowCompression"],R);const O=T(e,["proactivity"]);return t!==void 0&&O!=null&&C(t,["setup","proactivity"],O),n}function Ffe(e,t){const n={},r=T(e,["generationConfig"]);t!==void 0&&r!=null&&C(t,["setup","generationConfig"],Dfe(r));const s=T(e,["responseModalities"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","responseModalities"],s);const o=T(e,["temperature"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","temperature"],o);const i=T(e,["topP"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","topP"],i);const a=T(e,["topK"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","topK"],a);const l=T(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=T(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=T(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const f=T(e,["speechConfig"]);t!==void 0&&f!=null&&C(t,["setup","generationConfig","speechConfig"],nq(lR(f)));const m=T(e,["thinkingConfig"]);t!==void 0&&m!=null&&C(t,["setup","generationConfig","thinkingConfig"],m);const g=T(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=T(e,["systemInstruction"]);t!==void 0&&y!=null&&C(t,["setup","systemInstruction"],va(y));const v=T(e,["tools"]);if(t!==void 0&&v!=null){let M=bb(v);Array.isArray(M)&&(M=M.map(P=>Kfe(gb(P)))),C(t,["setup","tools"],M)}const w=T(e,["sessionResumption"]);t!==void 0&&w!=null&&C(t,["setup","sessionResumption"],w);const _=T(e,["inputAudioTranscription"]);t!==void 0&&_!=null&&C(t,["setup","inputAudioTranscription"],_);const S=T(e,["outputAudioTranscription"]);t!==void 0&&S!=null&&C(t,["setup","outputAudioTranscription"],S);const k=T(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&C(t,["setup","realtimeInputConfig"],k);const R=T(e,["contextWindowCompression"]);t!==void 0&&R!=null&&C(t,["setup","contextWindowCompression"],R);const O=T(e,["proactivity"]);return t!==void 0&&O!=null&&C(t,["setup","proactivity"],O),n}function Bfe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["setup","model"],ls(e,r));const s=T(t,["config"]);return s!=null&&C(n,["config"],$fe(s,n)),n}function zfe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["setup","model"],ls(e,r));const s=T(t,["config"]);return s!=null&&C(n,["config"],Ffe(s,n)),n}function jfe(e){const t={},n=T(e,["musicGenerationConfig"]);return n!=null&&C(t,["musicGenerationConfig"],n),t}function Ufe(e){const t={},n=T(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),C(t,["weightedPrompts"],r)}return t}function Hfe(e){const t={},n=T(e,["media"]);if(n!=null){let c=HV(n);Array.isArray(c)&&(c=c.map(u=>__(u))),C(t,["mediaChunks"],c)}const r=T(e,["audio"]);r!=null&&C(t,["audio"],__(qV(r)));const s=T(e,["audioStreamEnd"]);s!=null&&C(t,["audioStreamEnd"],s);const o=T(e,["video"]);o!=null&&C(t,["video"],__(VV(o)));const i=T(e,["text"]);i!=null&&C(t,["text"],i);const a=T(e,["activityStart"]);a!=null&&C(t,["activityStart"],a);const l=T(e,["activityEnd"]);return l!=null&&C(t,["activityEnd"],l),t}function Vfe(e){const t={},n=T(e,["media"]);if(n!=null){let c=HV(n);Array.isArray(c)&&(c=c.map(u=>u)),C(t,["mediaChunks"],c)}const r=T(e,["audio"]);r!=null&&C(t,["audio"],qV(r));const s=T(e,["audioStreamEnd"]);s!=null&&C(t,["audioStreamEnd"],s);const o=T(e,["video"]);o!=null&&C(t,["video"],VV(o));const i=T(e,["text"]);i!=null&&C(t,["text"],i);const a=T(e,["activityStart"]);a!=null&&C(t,["activityStart"],a);const l=T(e,["activityEnd"]);return l!=null&&C(t,["activityEnd"],l),t}function qfe(e){const t={},n=T(e,["setupComplete"]);n!=null&&C(t,["setupComplete"],n);const r=T(e,["serverContent"]);r!=null&&C(t,["serverContent"],r);const s=T(e,["toolCall"]);s!=null&&C(t,["toolCall"],s);const o=T(e,["toolCallCancellation"]);o!=null&&C(t,["toolCallCancellation"],o);const i=T(e,["usageMetadata"]);i!=null&&C(t,["usageMetadata"],Zfe(i));const a=T(e,["goAway"]);a!=null&&C(t,["goAway"],a);const l=T(e,["sessionResumptionUpdate"]);return l!=null&&C(t,["sessionResumptionUpdate"],l),t}function Gfe(e){const t={},n=T(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=T(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const s=T(e,["executableCode"]);s!=null&&C(t,["executableCode"],s);const o=T(e,["fileData"]);o!=null&&C(t,["fileData"],Rfe(o));const i=T(e,["functionCall"]);i!=null&&C(t,["functionCall"],Mfe(i));const a=T(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=T(e,["inlineData"]);l!=null&&C(t,["inlineData"],__(l));const c=T(e,["text"]);c!=null&&C(t,["text"],c);const u=T(e,["thought"]);u!=null&&C(t,["thought"],u);const f=T(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=T(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function Wfe(e){const t={},n=T(e,["handle"]);if(n!=null&&C(t,["handle"],n),T(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function nq(e){const t={},n=T(e,["languageCode"]);n!=null&&C(t,["languageCode"],n);const r=T(e,["voiceConfig"]);if(r!=null&&C(t,["voiceConfig"],r),T(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Yfe(e){const t={},n=T(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(T(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=T(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const s=T(e,["computerUse"]);s!=null&&C(t,["computerUse"],s);const o=T(e,["fileSearch"]);o!=null&&C(t,["fileSearch"],o);const i=T(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),T(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=T(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],Pfe(a));const l=T(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],Lfe(l));const c=T(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}function Kfe(e){const t={},n=T(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Ofe(m))),C(t,["functionDeclarations"],f)}const r=T(e,["retrieval"]);r!=null&&C(t,["retrieval"],r);const s=T(e,["googleSearchRetrieval"]);s!=null&&C(t,["googleSearchRetrieval"],s);const o=T(e,["computerUse"]);if(o!=null&&C(t,["computerUse"],o),T(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=T(e,["codeExecution"]);i!=null&&C(t,["codeExecution"],i);const a=T(e,["enterpriseWebSearch"]);a!=null&&C(t,["enterpriseWebSearch"],a);const l=T(e,["googleMaps"]);l!=null&&C(t,["googleMaps"],l);const c=T(e,["googleSearch"]);c!=null&&C(t,["googleSearch"],c);const u=T(e,["urlContext"]);return u!=null&&C(t,["urlContext"],u),t}function Zfe(e){const t={},n=T(e,["promptTokenCount"]);n!=null&&C(t,["promptTokenCount"],n);const r=T(e,["cachedContentTokenCount"]);r!=null&&C(t,["cachedContentTokenCount"],r);const s=T(e,["candidatesTokenCount"]);s!=null&&C(t,["responseTokenCount"],s);const o=T(e,["toolUsePromptTokenCount"]);o!=null&&C(t,["toolUsePromptTokenCount"],o);const i=T(e,["thoughtsTokenCount"]);i!=null&&C(t,["thoughtsTokenCount"],i);const a=T(e,["totalTokenCount"]);a!=null&&C(t,["totalTokenCount"],a);const l=T(e,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["promptTokensDetails"],g)}const c=T(e,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["cacheTokensDetails"],g)}const u=T(e,["candidatesTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["responseTokensDetails"],g)}const f=T(e,["toolUsePromptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["toolUsePromptTokensDetails"],g)}const m=T(e,["trafficType"]);return m!=null&&C(t,["trafficType"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jfe(e){const t={},n=T(e,["data"]);if(n!=null&&C(t,["data"],n),T(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Xfe(e){const t={},n=T(e,["content"]);n!=null&&C(t,["content"],n);const r=T(e,["citationMetadata"]);r!=null&&C(t,["citationMetadata"],Qfe(r));const s=T(e,["tokenCount"]);s!=null&&C(t,["tokenCount"],s);const o=T(e,["finishReason"]);o!=null&&C(t,["finishReason"],o);const i=T(e,["avgLogprobs"]);i!=null&&C(t,["avgLogprobs"],i);const a=T(e,["groundingMetadata"]);a!=null&&C(t,["groundingMetadata"],a);const l=T(e,["index"]);l!=null&&C(t,["index"],l);const c=T(e,["logprobsResult"]);c!=null&&C(t,["logprobsResult"],c);const u=T(e,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),C(t,["safetyRatings"],m)}const f=T(e,["urlContextMetadata"]);return f!=null&&C(t,["urlContextMetadata"],f),t}function Qfe(e){const t={},n=T(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),C(t,["citations"],r)}return t}function ehe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["contents"]);if(s!=null){let o=Ic(s);Array.isArray(o)&&(o=o.map(i=>i)),C(n,["contents"],o)}return n}function the(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(t,["tokensInfo"],s)}return t}function nhe(e){const t={},n=T(e,["values"]);n!=null&&C(t,["values"],n);const r=T(e,["statistics"]);return r!=null&&C(t,["statistics"],rhe(r)),t}function rhe(e){const t={},n=T(e,["truncated"]);n!=null&&C(t,["truncated"],n);const r=T(e,["token_count"]);return r!=null&&C(t,["tokenCount"],r),t}function b4(e){const t={},n=T(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>f0e(o))),C(t,["parts"],s)}const r=T(e,["role"]);return r!=null&&C(t,["role"],r),t}function she(e){const t={},n=T(e,["controlType"]);n!=null&&C(t,["controlType"],n);const r=T(e,["enableControlImageComputation"]);return r!=null&&C(t,["computeControl"],r),t}function ohe(e){const t={};if(T(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(T(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(T(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function ihe(e,t){const n={},r=T(e,["systemInstruction"]);t!==void 0&&r!=null&&C(t,["systemInstruction"],va(r));const s=T(e,["tools"]);if(t!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>aq(a))),C(t,["tools"],i)}const o=T(e,["generationConfig"]);return t!==void 0&&o!=null&&C(t,["generationConfig"],Jhe(o)),n}function ahe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["contents"]);if(s!=null){let i=Ic(s);Array.isArray(i)&&(i=i.map(a=>b4(a))),C(n,["contents"],i)}const o=T(t,["config"]);return o!=null&&ohe(o),n}function lhe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["contents"]);if(s!=null){let i=Ic(s);Array.isArray(i)&&(i=i.map(a=>a)),C(n,["contents"],i)}const o=T(t,["config"]);return o!=null&&ihe(o,n),n}function che(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["totalTokens"]);r!=null&&C(t,["totalTokens"],r);const s=T(e,["cachedContentTokenCount"]);return s!=null&&C(t,["cachedContentTokenCount"],s),t}function uhe(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["totalTokens"]);return r!=null&&C(t,["totalTokens"],r),t}function dhe(e,t){const n={},r=T(t,["model"]);return r!=null&&C(n,["_url","name"],ls(e,r)),n}function fhe(e,t){const n={},r=T(t,["model"]);return r!=null&&C(n,["_url","name"],ls(e,r)),n}function hhe(e){const t={},n=T(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function phe(e){const t={},n=T(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function mhe(e,t){const n={},r=T(e,["outputGcsUri"]);t!==void 0&&r!=null&&C(t,["parameters","storageUri"],r);const s=T(e,["negativePrompt"]);t!==void 0&&s!=null&&C(t,["parameters","negativePrompt"],s);const o=T(e,["numberOfImages"]);t!==void 0&&o!=null&&C(t,["parameters","sampleCount"],o);const i=T(e,["aspectRatio"]);t!==void 0&&i!=null&&C(t,["parameters","aspectRatio"],i);const a=T(e,["guidanceScale"]);t!==void 0&&a!=null&&C(t,["parameters","guidanceScale"],a);const l=T(e,["seed"]);t!==void 0&&l!=null&&C(t,["parameters","seed"],l);const c=T(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&C(t,["parameters","safetySetting"],c);const u=T(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const f=T(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&C(t,["parameters","includeSafetyAttributes"],f);const m=T(e,["includeRaiReason"]);t!==void 0&&m!=null&&C(t,["parameters","includeRaiReason"],m);const g=T(e,["language"]);t!==void 0&&g!=null&&C(t,["parameters","language"],g);const y=T(e,["outputMimeType"]);t!==void 0&&y!=null&&C(t,["parameters","outputOptions","mimeType"],y);const v=T(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&C(t,["parameters","outputOptions","compressionQuality"],v);const w=T(e,["addWatermark"]);t!==void 0&&w!=null&&C(t,["parameters","addWatermark"],w);const _=T(e,["labels"]);t!==void 0&&_!=null&&C(t,["labels"],_);const S=T(e,["editMode"]);t!==void 0&&S!=null&&C(t,["parameters","editMode"],S);const k=T(e,["baseSteps"]);return t!==void 0&&k!=null&&C(t,["parameters","editConfig","baseSteps"],k),n}function ghe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["prompt"]);s!=null&&C(n,["instances[0]","prompt"],s);const o=T(t,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>y0e(l))),C(n,["instances[0]","referenceImages"],a)}const i=T(t,["config"]);return i!=null&&mhe(i,n),n}function bhe(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>y4(o))),C(t,["generatedImages"],s)}return t}function yhe(e,t){const n={},r=T(e,["taskType"]);t!==void 0&&r!=null&&C(t,["requests[]","taskType"],r);const s=T(e,["title"]);t!==void 0&&s!=null&&C(t,["requests[]","title"],s);const o=T(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&C(t,["requests[]","outputDimensionality"],o),T(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(T(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function vhe(e,t){const n={},r=T(e,["taskType"]);t!==void 0&&r!=null&&C(t,["instances[]","task_type"],r);const s=T(e,["title"]);t!==void 0&&s!=null&&C(t,["instances[]","title"],s);const o=T(e,["outputDimensionality"]);t!==void 0&&o!=null&&C(t,["parameters","outputDimensionality"],o);const i=T(e,["mimeType"]);t!==void 0&&i!=null&&C(t,["instances[]","mimeType"],i);const a=T(e,["autoTruncate"]);return t!==void 0&&a!=null&&C(t,["parameters","autoTruncate"],a),n}function xhe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["contents"]);if(s!=null){let a=oR(e,s);Array.isArray(a)&&(a=a.map(l=>l)),C(n,["requests[]","content"],a)}const o=T(t,["config"]);o!=null&&yhe(o,n);const i=T(t,["model"]);return i!==void 0&&C(n,["requests[]","model"],ls(e,i)),n}function whe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["contents"]);if(s!=null){let i=oR(e,s);Array.isArray(i)&&(i=i.map(a=>a)),C(n,["instances[]","content"],i)}const o=T(t,["config"]);return o!=null&&vhe(o,n),n}function Ehe(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["embeddings"],o)}const s=T(e,["metadata"]);return s!=null&&C(t,["metadata"],s),t}function _he(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>nhe(i))),C(t,["embeddings"],o)}const s=T(e,["metadata"]);return s!=null&&C(t,["metadata"],s),t}function She(e){const t={},n=T(e,["endpoint"]);n!=null&&C(t,["name"],n);const r=T(e,["deployedModelId"]);return r!=null&&C(t,["deployedModelId"],r),t}function The(e){const t={};if(T(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=T(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Che(e){const t={},n=T(e,["id"]);n!=null&&C(t,["id"],n);const r=T(e,["args"]);r!=null&&C(t,["args"],r);const s=T(e,["name"]);if(s!=null&&C(t,["name"],s),T(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function khe(e){const t={},n=T(e,["mode"]);n!=null&&C(t,["mode"],n);const r=T(e,["allowedFunctionNames"]);if(r!=null&&C(t,["allowedFunctionNames"],r),T(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Ahe(e){const t={};if(T(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=T(e,["description"]);n!=null&&C(t,["description"],n);const r=T(e,["name"]);r!=null&&C(t,["name"],r);const s=T(e,["parameters"]);s!=null&&C(t,["parameters"],s);const o=T(e,["parametersJsonSchema"]);o!=null&&C(t,["parametersJsonSchema"],o);const i=T(e,["response"]);i!=null&&C(t,["response"],i);const a=T(e,["responseJsonSchema"]);return a!=null&&C(t,["responseJsonSchema"],a),t}function Nhe(e,t,n){const r={},s=T(t,["systemInstruction"]);n!==void 0&&s!=null&&C(n,["systemInstruction"],b4(va(s)));const o=T(t,["temperature"]);o!=null&&C(r,["temperature"],o);const i=T(t,["topP"]);i!=null&&C(r,["topP"],i);const a=T(t,["topK"]);a!=null&&C(r,["topK"],a);const l=T(t,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=T(t,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=T(t,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const f=T(t,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const m=T(t,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=T(t,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=T(t,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=T(t,["seed"]);v!=null&&C(r,["seed"],v);const w=T(t,["responseMimeType"]);w!=null&&C(r,["responseMimeType"],w);const _=T(t,["responseSchema"]);_!=null&&C(r,["responseSchema"],iR(_));const S=T(t,["responseJsonSchema"]);if(S!=null&&C(r,["responseJsonSchema"],S),T(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(T(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=T(t,["safetySettings"]);if(n!==void 0&&k!=null){let H=k;Array.isArray(H)&&(H=H.map(F=>v0e(F))),C(n,["safetySettings"],H)}const R=T(t,["tools"]);if(n!==void 0&&R!=null){let H=bb(R);Array.isArray(H)&&(H=H.map(F=>C0e(gb(F)))),C(n,["tools"],H)}const O=T(t,["toolConfig"]);if(n!==void 0&&O!=null&&C(n,["toolConfig"],T0e(O)),T(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=T(t,["cachedContent"]);n!==void 0&&M!=null&&C(n,["cachedContent"],rh(e,M));const P=T(t,["responseModalities"]);P!=null&&C(r,["responseModalities"],P);const j=T(t,["mediaResolution"]);j!=null&&C(r,["mediaResolution"],j);const q=T(t,["speechConfig"]);if(q!=null&&C(r,["speechConfig"],aR(q)),T(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=T(t,["thinkingConfig"]);U!=null&&C(r,["thinkingConfig"],U);const z=T(t,["imageConfig"]);return z!=null&&C(r,["imageConfig"],n0e(z)),r}function Ihe(e,t,n){const r={},s=T(t,["systemInstruction"]);n!==void 0&&s!=null&&C(n,["systemInstruction"],va(s));const o=T(t,["temperature"]);o!=null&&C(r,["temperature"],o);const i=T(t,["topP"]);i!=null&&C(r,["topP"],i);const a=T(t,["topK"]);a!=null&&C(r,["topK"],a);const l=T(t,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=T(t,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=T(t,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const f=T(t,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const m=T(t,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=T(t,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=T(t,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=T(t,["seed"]);v!=null&&C(r,["seed"],v);const w=T(t,["responseMimeType"]);w!=null&&C(r,["responseMimeType"],w);const _=T(t,["responseSchema"]);_!=null&&C(r,["responseSchema"],iR(_));const S=T(t,["responseJsonSchema"]);S!=null&&C(r,["responseJsonSchema"],S);const k=T(t,["routingConfig"]);k!=null&&C(r,["routingConfig"],k);const R=T(t,["modelSelectionConfig"]);R!=null&&C(r,["modelConfig"],R);const O=T(t,["safetySettings"]);if(n!==void 0&&O!=null){let J=O;Array.isArray(J)&&(J=J.map(ee=>ee)),C(n,["safetySettings"],J)}const M=T(t,["tools"]);if(n!==void 0&&M!=null){let J=bb(M);Array.isArray(J)&&(J=J.map(ee=>aq(gb(ee)))),C(n,["tools"],J)}const P=T(t,["toolConfig"]);n!==void 0&&P!=null&&C(n,["toolConfig"],P);const j=T(t,["labels"]);n!==void 0&&j!=null&&C(n,["labels"],j);const q=T(t,["cachedContent"]);n!==void 0&&q!=null&&C(n,["cachedContent"],rh(e,q));const U=T(t,["responseModalities"]);U!=null&&C(r,["responseModalities"],U);const z=T(t,["mediaResolution"]);z!=null&&C(r,["mediaResolution"],z);const H=T(t,["speechConfig"]);H!=null&&C(r,["speechConfig"],iq(aR(H)));const F=T(t,["audioTimestamp"]);F!=null&&C(r,["audioTimestamp"],F);const W=T(t,["thinkingConfig"]);W!=null&&C(r,["thinkingConfig"],W);const X=T(t,["imageConfig"]);return X!=null&&C(r,["imageConfig"],r0e(X)),r}function kP(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["contents"]);if(s!=null){let i=Ic(s);Array.isArray(i)&&(i=i.map(a=>b4(a))),C(n,["contents"],i)}const o=T(t,["config"]);return o!=null&&C(n,["generationConfig"],Nhe(e,o,n)),n}function AP(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["contents"]);if(s!=null){let i=Ic(s);Array.isArray(i)&&(i=i.map(a=>a)),C(n,["contents"],i)}const o=T(t,["config"]);return o!=null&&C(n,["generationConfig"],Ihe(e,o,n)),n}function NP(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Xfe(c))),C(t,["candidates"],l)}const s=T(e,["modelVersion"]);s!=null&&C(t,["modelVersion"],s);const o=T(e,["promptFeedback"]);o!=null&&C(t,["promptFeedback"],o);const i=T(e,["responseId"]);i!=null&&C(t,["responseId"],i);const a=T(e,["usageMetadata"]);return a!=null&&C(t,["usageMetadata"],a),t}function IP(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>u)),C(t,["candidates"],c)}const s=T(e,["createTime"]);s!=null&&C(t,["createTime"],s);const o=T(e,["modelVersion"]);o!=null&&C(t,["modelVersion"],o);const i=T(e,["promptFeedback"]);i!=null&&C(t,["promptFeedback"],i);const a=T(e,["responseId"]);a!=null&&C(t,["responseId"],a);const l=T(e,["usageMetadata"]);return l!=null&&C(t,["usageMetadata"],l),t}function Rhe(e,t){const n={};if(T(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(T(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=T(e,["numberOfImages"]);t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r);const s=T(e,["aspectRatio"]);t!==void 0&&s!=null&&C(t,["parameters","aspectRatio"],s);const o=T(e,["guidanceScale"]);if(t!==void 0&&o!=null&&C(t,["parameters","guidanceScale"],o),T(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=T(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&C(t,["parameters","safetySetting"],i);const a=T(e,["personGeneration"]);t!==void 0&&a!=null&&C(t,["parameters","personGeneration"],a);const l=T(e,["includeSafetyAttributes"]);t!==void 0&&l!=null&&C(t,["parameters","includeSafetyAttributes"],l);const c=T(e,["includeRaiReason"]);t!==void 0&&c!=null&&C(t,["parameters","includeRaiReason"],c);const u=T(e,["language"]);t!==void 0&&u!=null&&C(t,["parameters","language"],u);const f=T(e,["outputMimeType"]);t!==void 0&&f!=null&&C(t,["parameters","outputOptions","mimeType"],f);const m=T(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&C(t,["parameters","outputOptions","compressionQuality"],m),T(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(T(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=T(e,["imageSize"]);if(t!==void 0&&g!=null&&C(t,["parameters","sampleImageSize"],g),T(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Mhe(e,t){const n={},r=T(e,["outputGcsUri"]);t!==void 0&&r!=null&&C(t,["parameters","storageUri"],r);const s=T(e,["negativePrompt"]);t!==void 0&&s!=null&&C(t,["parameters","negativePrompt"],s);const o=T(e,["numberOfImages"]);t!==void 0&&o!=null&&C(t,["parameters","sampleCount"],o);const i=T(e,["aspectRatio"]);t!==void 0&&i!=null&&C(t,["parameters","aspectRatio"],i);const a=T(e,["guidanceScale"]);t!==void 0&&a!=null&&C(t,["parameters","guidanceScale"],a);const l=T(e,["seed"]);t!==void 0&&l!=null&&C(t,["parameters","seed"],l);const c=T(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&C(t,["parameters","safetySetting"],c);const u=T(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const f=T(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&C(t,["parameters","includeSafetyAttributes"],f);const m=T(e,["includeRaiReason"]);t!==void 0&&m!=null&&C(t,["parameters","includeRaiReason"],m);const g=T(e,["language"]);t!==void 0&&g!=null&&C(t,["parameters","language"],g);const y=T(e,["outputMimeType"]);t!==void 0&&y!=null&&C(t,["parameters","outputOptions","mimeType"],y);const v=T(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&C(t,["parameters","outputOptions","compressionQuality"],v);const w=T(e,["addWatermark"]);t!==void 0&&w!=null&&C(t,["parameters","addWatermark"],w);const _=T(e,["labels"]);t!==void 0&&_!=null&&C(t,["labels"],_);const S=T(e,["imageSize"]);t!==void 0&&S!=null&&C(t,["parameters","sampleImageSize"],S);const k=T(e,["enhancePrompt"]);return t!==void 0&&k!=null&&C(t,["parameters","enhancePrompt"],k),n}function Ohe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["prompt"]);s!=null&&C(n,["instances[0]","prompt"],s);const o=T(t,["config"]);return o!=null&&Rhe(o,n),n}function Dhe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["prompt"]);s!=null&&C(n,["instances[0]","prompt"],s);const o=T(t,["config"]);return o!=null&&Mhe(o,n),n}function Phe(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Whe(i))),C(t,["generatedImages"],o)}const s=T(e,["positivePromptSafetyAttributes"]);return s!=null&&C(t,["positivePromptSafetyAttributes"],sq(s)),t}function Lhe(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>y4(i))),C(t,["generatedImages"],o)}const s=T(e,["positivePromptSafetyAttributes"]);return s!=null&&C(t,["positivePromptSafetyAttributes"],oq(s)),t}function $he(e,t){const n={},r=T(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r),T(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(T(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=T(e,["durationSeconds"]);if(t!==void 0&&s!=null&&C(t,["parameters","durationSeconds"],s),T(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=T(e,["aspectRatio"]);t!==void 0&&o!=null&&C(t,["parameters","aspectRatio"],o);const i=T(e,["resolution"]);t!==void 0&&i!=null&&C(t,["parameters","resolution"],i);const a=T(e,["personGeneration"]);if(t!==void 0&&a!=null&&C(t,["parameters","personGeneration"],a),T(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=T(e,["negativePrompt"]);t!==void 0&&l!=null&&C(t,["parameters","negativePrompt"],l);const c=T(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&C(t,["parameters","enhancePrompt"],c),T(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const u=T(e,["lastFrame"]);t!==void 0&&u!=null&&C(t,["instances[0]","lastFrame"],v4(u));const f=T(e,["referenceImages"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>B0e(g))),C(t,["instances[0]","referenceImages"],m)}if(T(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(T(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Fhe(e,t){const n={},r=T(e,["numberOfVideos"]);t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r);const s=T(e,["outputGcsUri"]);t!==void 0&&s!=null&&C(t,["parameters","storageUri"],s);const o=T(e,["fps"]);t!==void 0&&o!=null&&C(t,["parameters","fps"],o);const i=T(e,["durationSeconds"]);t!==void 0&&i!=null&&C(t,["parameters","durationSeconds"],i);const a=T(e,["seed"]);t!==void 0&&a!=null&&C(t,["parameters","seed"],a);const l=T(e,["aspectRatio"]);t!==void 0&&l!=null&&C(t,["parameters","aspectRatio"],l);const c=T(e,["resolution"]);t!==void 0&&c!=null&&C(t,["parameters","resolution"],c);const u=T(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const f=T(e,["pubsubTopic"]);t!==void 0&&f!=null&&C(t,["parameters","pubsubTopic"],f);const m=T(e,["negativePrompt"]);t!==void 0&&m!=null&&C(t,["parameters","negativePrompt"],m);const g=T(e,["enhancePrompt"]);t!==void 0&&g!=null&&C(t,["parameters","enhancePrompt"],g);const y=T(e,["generateAudio"]);t!==void 0&&y!=null&&C(t,["parameters","generateAudio"],y);const v=T(e,["lastFrame"]);t!==void 0&&v!=null&&C(t,["instances[0]","lastFrame"],Nu(v));const w=T(e,["referenceImages"]);if(t!==void 0&&w!=null){let k=w;Array.isArray(k)&&(k=k.map(R=>z0e(R))),C(t,["instances[0]","referenceImages"],k)}const _=T(e,["mask"]);t!==void 0&&_!=null&&C(t,["instances[0]","mask"],F0e(_));const S=T(e,["compressionQuality"]);return t!==void 0&&S!=null&&C(t,["parameters","compressionQuality"],S),n}function Bhe(e){const t={},n=T(e,["name"]);n!=null&&C(t,["name"],n);const r=T(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=T(e,["done"]);s!=null&&C(t,["done"],s);const o=T(e,["error"]);o!=null&&C(t,["error"],o);const i=T(e,["response","generateVideoResponse"]);return i!=null&&C(t,["response"],Hhe(i)),t}function zhe(e){const t={},n=T(e,["name"]);n!=null&&C(t,["name"],n);const r=T(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=T(e,["done"]);s!=null&&C(t,["done"],s);const o=T(e,["error"]);o!=null&&C(t,["error"],o);const i=T(e,["response"]);return i!=null&&C(t,["response"],Vhe(i)),t}function jhe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["prompt"]);s!=null&&C(n,["instances[0]","prompt"],s);const o=T(t,["image"]);o!=null&&C(n,["instances[0]","image"],v4(o));const i=T(t,["video"]);i!=null&&C(n,["instances[0]","video"],lq(i));const a=T(t,["source"]);a!=null&&qhe(a,n);const l=T(t,["config"]);return l!=null&&$he(l,n),n}function Uhe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["prompt"]);s!=null&&C(n,["instances[0]","prompt"],s);const o=T(t,["image"]);o!=null&&C(n,["instances[0]","image"],Nu(o));const i=T(t,["video"]);i!=null&&C(n,["instances[0]","video"],cq(i));const a=T(t,["source"]);a!=null&&Ghe(a,n);const l=T(t,["config"]);return l!=null&&Fhe(l,n),n}function Hhe(e){const t={},n=T(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Khe(i))),C(t,["generatedVideos"],o)}const r=T(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const s=T(e,["raiMediaFilteredReasons"]);return s!=null&&C(t,["raiMediaFilteredReasons"],s),t}function Vhe(e){const t={},n=T(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Zhe(i))),C(t,["generatedVideos"],o)}const r=T(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const s=T(e,["raiMediaFilteredReasons"]);return s!=null&&C(t,["raiMediaFilteredReasons"],s),t}function qhe(e,t){const n={},r=T(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const s=T(e,["image"]);t!==void 0&&s!=null&&C(t,["instances[0]","image"],v4(s));const o=T(e,["video"]);return t!==void 0&&o!=null&&C(t,["instances[0]","video"],lq(o)),n}function Ghe(e,t){const n={},r=T(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const s=T(e,["image"]);t!==void 0&&s!=null&&C(t,["instances[0]","image"],Nu(s));const o=T(e,["video"]);return t!==void 0&&o!=null&&C(t,["instances[0]","video"],cq(o)),n}function Whe(e){const t={},n=T(e,["_self"]);n!=null&&C(t,["image"],s0e(n));const r=T(e,["raiFilteredReason"]);r!=null&&C(t,["raiFilteredReason"],r);const s=T(e,["_self"]);return s!=null&&C(t,["safetyAttributes"],sq(s)),t}function y4(e){const t={},n=T(e,["_self"]);n!=null&&C(t,["image"],rq(n));const r=T(e,["raiFilteredReason"]);r!=null&&C(t,["raiFilteredReason"],r);const s=T(e,["_self"]);s!=null&&C(t,["safetyAttributes"],oq(s));const o=T(e,["prompt"]);return o!=null&&C(t,["enhancedPrompt"],o),t}function Yhe(e){const t={},n=T(e,["_self"]);n!=null&&C(t,["mask"],rq(n));const r=T(e,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(t,["labels"],s)}return t}function Khe(e){const t={},n=T(e,["video"]);return n!=null&&C(t,["video"],L0e(n)),t}function Zhe(e){const t={},n=T(e,["_self"]);return n!=null&&C(t,["video"],$0e(n)),t}function Jhe(e){const t={},n=T(e,["modelSelectionConfig"]);n!=null&&C(t,["modelConfig"],n);const r=T(e,["responseJsonSchema"]);r!=null&&C(t,["responseJsonSchema"],r);const s=T(e,["audioTimestamp"]);s!=null&&C(t,["audioTimestamp"],s);const o=T(e,["candidateCount"]);o!=null&&C(t,["candidateCount"],o);const i=T(e,["enableAffectiveDialog"]);i!=null&&C(t,["enableAffectiveDialog"],i);const a=T(e,["frequencyPenalty"]);a!=null&&C(t,["frequencyPenalty"],a);const l=T(e,["logprobs"]);l!=null&&C(t,["logprobs"],l);const c=T(e,["maxOutputTokens"]);c!=null&&C(t,["maxOutputTokens"],c);const u=T(e,["mediaResolution"]);u!=null&&C(t,["mediaResolution"],u);const f=T(e,["presencePenalty"]);f!=null&&C(t,["presencePenalty"],f);const m=T(e,["responseLogprobs"]);m!=null&&C(t,["responseLogprobs"],m);const g=T(e,["responseMimeType"]);g!=null&&C(t,["responseMimeType"],g);const y=T(e,["responseModalities"]);y!=null&&C(t,["responseModalities"],y);const v=T(e,["responseSchema"]);v!=null&&C(t,["responseSchema"],v);const w=T(e,["routingConfig"]);w!=null&&C(t,["routingConfig"],w);const _=T(e,["seed"]);_!=null&&C(t,["seed"],_);const S=T(e,["speechConfig"]);S!=null&&C(t,["speechConfig"],iq(S));const k=T(e,["stopSequences"]);k!=null&&C(t,["stopSequences"],k);const R=T(e,["temperature"]);R!=null&&C(t,["temperature"],R);const O=T(e,["thinkingConfig"]);O!=null&&C(t,["thinkingConfig"],O);const M=T(e,["topK"]);M!=null&&C(t,["topK"],M);const P=T(e,["topP"]);if(P!=null&&C(t,["topP"],P),T(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Xhe(e,t){const n={},r=T(t,["model"]);return r!=null&&C(n,["_url","name"],ls(e,r)),n}function Qhe(e,t){const n={},r=T(t,["model"]);return r!=null&&C(n,["_url","name"],ls(e,r)),n}function e0e(e){const t={};if(T(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=T(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function t0e(e){const t={};if(T(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=T(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function n0e(e){const t={},n=T(e,["aspectRatio"]);n!=null&&C(t,["aspectRatio"],n);const r=T(e,["imageSize"]);if(r!=null&&C(t,["imageSize"],r),T(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(T(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function r0e(e){const t={},n=T(e,["aspectRatio"]);n!=null&&C(t,["aspectRatio"],n);const r=T(e,["imageSize"]);r!=null&&C(t,["imageSize"],r);const s=T(e,["outputMimeType"]);s!=null&&C(t,["imageOutputOptions","mimeType"],s);const o=T(e,["outputCompressionQuality"]);return o!=null&&C(t,["imageOutputOptions","compressionQuality"],o),t}function s0e(e){const t={},n=T(e,["bytesBase64Encoded"]);n!=null&&C(t,["imageBytes"],F0(n));const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function rq(e){const t={},n=T(e,["gcsUri"]);n!=null&&C(t,["gcsUri"],n);const r=T(e,["bytesBase64Encoded"]);r!=null&&C(t,["imageBytes"],F0(r));const s=T(e,["mimeType"]);return s!=null&&C(t,["mimeType"],s),t}function v4(e){const t={};if(T(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=T(e,["imageBytes"]);n!=null&&C(t,["bytesBase64Encoded"],F0(n));const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Nu(e){const t={},n=T(e,["gcsUri"]);n!=null&&C(t,["gcsUri"],n);const r=T(e,["imageBytes"]);r!=null&&C(t,["bytesBase64Encoded"],F0(r));const s=T(e,["mimeType"]);return s!=null&&C(t,["mimeType"],s),t}function o0e(e,t,n){const r={},s=T(t,["pageSize"]);n!==void 0&&s!=null&&C(n,["_query","pageSize"],s);const o=T(t,["pageToken"]);n!==void 0&&o!=null&&C(n,["_query","pageToken"],o);const i=T(t,["filter"]);n!==void 0&&i!=null&&C(n,["_query","filter"],i);const a=T(t,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],KV(e,a)),r}function i0e(e,t,n){const r={},s=T(t,["pageSize"]);n!==void 0&&s!=null&&C(n,["_query","pageSize"],s);const o=T(t,["pageToken"]);n!==void 0&&o!=null&&C(n,["_query","pageToken"],o);const i=T(t,["filter"]);n!==void 0&&i!=null&&C(n,["_query","filter"],i);const a=T(t,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],KV(e,a)),r}function a0e(e,t){const n={},r=T(t,["config"]);return r!=null&&o0e(e,r,n),n}function l0e(e,t){const n={},r=T(t,["config"]);return r!=null&&i0e(e,r,n),n}function c0e(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=T(e,["_self"]);if(s!=null){let o=ZV(s);Array.isArray(o)&&(o=o.map(i=>cN(i))),C(t,["models"],o)}return t}function u0e(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=T(e,["_self"]);if(s!=null){let o=ZV(s);Array.isArray(o)&&(o=o.map(i=>uN(i))),C(t,["models"],o)}return t}function d0e(e){const t={},n=T(e,["maskMode"]);n!=null&&C(t,["maskMode"],n);const r=T(e,["segmentationClasses"]);r!=null&&C(t,["maskClasses"],r);const s=T(e,["maskDilation"]);return s!=null&&C(t,["dilation"],s),t}function cN(e){const t={},n=T(e,["name"]);n!=null&&C(t,["name"],n);const r=T(e,["displayName"]);r!=null&&C(t,["displayName"],r);const s=T(e,["description"]);s!=null&&C(t,["description"],s);const o=T(e,["version"]);o!=null&&C(t,["version"],o);const i=T(e,["_self"]);i!=null&&C(t,["tunedModelInfo"],k0e(i));const a=T(e,["inputTokenLimit"]);a!=null&&C(t,["inputTokenLimit"],a);const l=T(e,["outputTokenLimit"]);l!=null&&C(t,["outputTokenLimit"],l);const c=T(e,["supportedGenerationMethods"]);c!=null&&C(t,["supportedActions"],c);const u=T(e,["temperature"]);u!=null&&C(t,["temperature"],u);const f=T(e,["maxTemperature"]);f!=null&&C(t,["maxTemperature"],f);const m=T(e,["topP"]);m!=null&&C(t,["topP"],m);const g=T(e,["topK"]);g!=null&&C(t,["topK"],g);const y=T(e,["thinking"]);return y!=null&&C(t,["thinking"],y),t}function uN(e){const t={},n=T(e,["name"]);n!=null&&C(t,["name"],n);const r=T(e,["displayName"]);r!=null&&C(t,["displayName"],r);const s=T(e,["description"]);s!=null&&C(t,["description"],s);const o=T(e,["versionId"]);o!=null&&C(t,["version"],o);const i=T(e,["deployedModels"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>She(m))),C(t,["endpoints"],f)}const a=T(e,["labels"]);a!=null&&C(t,["labels"],a);const l=T(e,["_self"]);l!=null&&C(t,["tunedModelInfo"],A0e(l));const c=T(e,["defaultCheckpointId"]);c!=null&&C(t,["defaultCheckpointId"],c);const u=T(e,["checkpoints"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(m=>m)),C(t,["checkpoints"],f)}return t}function f0e(e){const t={},n=T(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=T(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const s=T(e,["executableCode"]);s!=null&&C(t,["executableCode"],s);const o=T(e,["fileData"]);o!=null&&C(t,["fileData"],The(o));const i=T(e,["functionCall"]);i!=null&&C(t,["functionCall"],Che(i));const a=T(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=T(e,["inlineData"]);l!=null&&C(t,["inlineData"],Jfe(l));const c=T(e,["text"]);c!=null&&C(t,["text"],c);const u=T(e,["thought"]);u!=null&&C(t,["thought"],u);const f=T(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=T(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function h0e(e){const t={},n=T(e,["productImage"]);return n!=null&&C(t,["image"],Nu(n)),t}function p0e(e,t){const n={},r=T(e,["numberOfImages"]);t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r);const s=T(e,["baseSteps"]);t!==void 0&&s!=null&&C(t,["parameters","baseSteps"],s);const o=T(e,["outputGcsUri"]);t!==void 0&&o!=null&&C(t,["parameters","storageUri"],o);const i=T(e,["seed"]);t!==void 0&&i!=null&&C(t,["parameters","seed"],i);const a=T(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&C(t,["parameters","safetySetting"],a);const l=T(e,["personGeneration"]);t!==void 0&&l!=null&&C(t,["parameters","personGeneration"],l);const c=T(e,["addWatermark"]);t!==void 0&&c!=null&&C(t,["parameters","addWatermark"],c);const u=T(e,["outputMimeType"]);t!==void 0&&u!=null&&C(t,["parameters","outputOptions","mimeType"],u);const f=T(e,["outputCompressionQuality"]);t!==void 0&&f!=null&&C(t,["parameters","outputOptions","compressionQuality"],f);const m=T(e,["enhancePrompt"]);t!==void 0&&m!=null&&C(t,["parameters","enhancePrompt"],m);const g=T(e,["labels"]);return t!==void 0&&g!=null&&C(t,["labels"],g),n}function m0e(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["source"]);s!=null&&b0e(s,n);const o=T(t,["config"]);return o!=null&&p0e(o,n),n}function g0e(e){const t={},n=T(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>y4(s))),C(t,["generatedImages"],r)}return t}function b0e(e,t){const n={},r=T(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const s=T(e,["personImage"]);t!==void 0&&s!=null&&C(t,["instances[0]","personImage","image"],Nu(s));const o=T(e,["productImages"]);if(t!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>h0e(a))),C(t,["instances[0]","productImages"],i)}return n}function y0e(e){const t={},n=T(e,["referenceImage"]);n!=null&&C(t,["referenceImage"],Nu(n));const r=T(e,["referenceId"]);r!=null&&C(t,["referenceId"],r);const s=T(e,["referenceType"]);s!=null&&C(t,["referenceType"],s);const o=T(e,["maskImageConfig"]);o!=null&&C(t,["maskImageConfig"],d0e(o));const i=T(e,["controlImageConfig"]);i!=null&&C(t,["controlImageConfig"],she(i));const a=T(e,["styleImageConfig"]);a!=null&&C(t,["styleImageConfig"],a);const l=T(e,["subjectImageConfig"]);return l!=null&&C(t,["subjectImageConfig"],l),t}function sq(e){const t={},n=T(e,["safetyAttributes","categories"]);n!=null&&C(t,["categories"],n);const r=T(e,["safetyAttributes","scores"]);r!=null&&C(t,["scores"],r);const s=T(e,["contentType"]);return s!=null&&C(t,["contentType"],s),t}function oq(e){const t={},n=T(e,["safetyAttributes","categories"]);n!=null&&C(t,["categories"],n);const r=T(e,["safetyAttributes","scores"]);r!=null&&C(t,["scores"],r);const s=T(e,["contentType"]);return s!=null&&C(t,["contentType"],s),t}function v0e(e){const t={},n=T(e,["category"]);if(n!=null&&C(t,["category"],n),T(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=T(e,["threshold"]);return r!=null&&C(t,["threshold"],r),t}function x0e(e){const t={},n=T(e,["image"]);return n!=null&&C(t,["image"],Nu(n)),t}function w0e(e,t){const n={},r=T(e,["mode"]);t!==void 0&&r!=null&&C(t,["parameters","mode"],r);const s=T(e,["maxPredictions"]);t!==void 0&&s!=null&&C(t,["parameters","maxPredictions"],s);const o=T(e,["confidenceThreshold"]);t!==void 0&&o!=null&&C(t,["parameters","confidenceThreshold"],o);const i=T(e,["maskDilation"]);t!==void 0&&i!=null&&C(t,["parameters","maskDilation"],i);const a=T(e,["binaryColorThreshold"]);t!==void 0&&a!=null&&C(t,["parameters","binaryColorThreshold"],a);const l=T(e,["labels"]);return t!==void 0&&l!=null&&C(t,["labels"],l),n}function E0e(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["source"]);s!=null&&S0e(s,n);const o=T(t,["config"]);return o!=null&&w0e(o,n),n}function _0e(e){const t={},n=T(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Yhe(s))),C(t,["generatedMasks"],r)}return t}function S0e(e,t){const n={},r=T(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const s=T(e,["image"]);t!==void 0&&s!=null&&C(t,["instances[0]","image"],Nu(s));const o=T(e,["scribbleImage"]);return t!==void 0&&o!=null&&C(t,["instances[0]","scribble"],x0e(o)),n}function iq(e){const t={},n=T(e,["languageCode"]);n!=null&&C(t,["languageCode"],n);const r=T(e,["voiceConfig"]);if(r!=null&&C(t,["voiceConfig"],r),T(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function T0e(e){const t={},n=T(e,["functionCallingConfig"]);n!=null&&C(t,["functionCallingConfig"],khe(n));const r=T(e,["retrievalConfig"]);return r!=null&&C(t,["retrievalConfig"],r),t}function C0e(e){const t={},n=T(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(T(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=T(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const s=T(e,["computerUse"]);s!=null&&C(t,["computerUse"],s);const o=T(e,["fileSearch"]);o!=null&&C(t,["fileSearch"],o);const i=T(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),T(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=T(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],e0e(a));const l=T(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],t0e(l));const c=T(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}function aq(e){const t={},n=T(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Ahe(m))),C(t,["functionDeclarations"],f)}const r=T(e,["retrieval"]);r!=null&&C(t,["retrieval"],r);const s=T(e,["googleSearchRetrieval"]);s!=null&&C(t,["googleSearchRetrieval"],s);const o=T(e,["computerUse"]);if(o!=null&&C(t,["computerUse"],o),T(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=T(e,["codeExecution"]);i!=null&&C(t,["codeExecution"],i);const a=T(e,["enterpriseWebSearch"]);a!=null&&C(t,["enterpriseWebSearch"],a);const l=T(e,["googleMaps"]);l!=null&&C(t,["googleMaps"],l);const c=T(e,["googleSearch"]);c!=null&&C(t,["googleSearch"],c);const u=T(e,["urlContext"]);return u!=null&&C(t,["urlContext"],u),t}function k0e(e){const t={},n=T(e,["baseModel"]);n!=null&&C(t,["baseModel"],n);const r=T(e,["createTime"]);r!=null&&C(t,["createTime"],r);const s=T(e,["updateTime"]);return s!=null&&C(t,["updateTime"],s),t}function A0e(e){const t={},n=T(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&C(t,["baseModel"],n);const r=T(e,["createTime"]);r!=null&&C(t,["createTime"],r);const s=T(e,["updateTime"]);return s!=null&&C(t,["updateTime"],s),t}function N0e(e,t){const n={},r=T(e,["displayName"]);t!==void 0&&r!=null&&C(t,["displayName"],r);const s=T(e,["description"]);t!==void 0&&s!=null&&C(t,["description"],s);const o=T(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&C(t,["defaultCheckpointId"],o),n}function I0e(e,t){const n={},r=T(e,["displayName"]);t!==void 0&&r!=null&&C(t,["displayName"],r);const s=T(e,["description"]);t!==void 0&&s!=null&&C(t,["description"],s);const o=T(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&C(t,["defaultCheckpointId"],o),n}function R0e(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","name"],ls(e,r));const s=T(t,["config"]);return s!=null&&N0e(s,n),n}function M0e(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["config"]);return s!=null&&I0e(s,n),n}function O0e(e,t){const n={},r=T(e,["outputGcsUri"]);t!==void 0&&r!=null&&C(t,["parameters","storageUri"],r);const s=T(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&C(t,["parameters","safetySetting"],s);const o=T(e,["personGeneration"]);t!==void 0&&o!=null&&C(t,["parameters","personGeneration"],o);const i=T(e,["includeRaiReason"]);t!==void 0&&i!=null&&C(t,["parameters","includeRaiReason"],i);const a=T(e,["outputMimeType"]);t!==void 0&&a!=null&&C(t,["parameters","outputOptions","mimeType"],a);const l=T(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&C(t,["parameters","outputOptions","compressionQuality"],l);const c=T(e,["enhanceInputImage"]);t!==void 0&&c!=null&&C(t,["parameters","upscaleConfig","enhanceInputImage"],c);const u=T(e,["imagePreservationFactor"]);t!==void 0&&u!=null&&C(t,["parameters","upscaleConfig","imagePreservationFactor"],u);const f=T(e,["labels"]);t!==void 0&&f!=null&&C(t,["labels"],f);const m=T(e,["numberOfImages"]);t!==void 0&&m!=null&&C(t,["parameters","sampleCount"],m);const g=T(e,["mode"]);return t!==void 0&&g!=null&&C(t,["parameters","mode"],g),n}function D0e(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["_url","model"],ls(e,r));const s=T(t,["image"]);s!=null&&C(n,["instances[0]","image"],Nu(s));const o=T(t,["upscaleFactor"]);o!=null&&C(n,["parameters","upscaleConfig","upscaleFactor"],o);const i=T(t,["config"]);return i!=null&&O0e(i,n),n}function P0e(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>y4(o))),C(t,["generatedImages"],s)}return t}function L0e(e){const t={},n=T(e,["uri"]);n!=null&&C(t,["uri"],n);const r=T(e,["encodedVideo"]);r!=null&&C(t,["videoBytes"],F0(r));const s=T(e,["encoding"]);return s!=null&&C(t,["mimeType"],s),t}function $0e(e){const t={},n=T(e,["gcsUri"]);n!=null&&C(t,["uri"],n);const r=T(e,["bytesBase64Encoded"]);r!=null&&C(t,["videoBytes"],F0(r));const s=T(e,["mimeType"]);return s!=null&&C(t,["mimeType"],s),t}function F0e(e){const t={},n=T(e,["image"]);n!=null&&C(t,["_self"],Nu(n));const r=T(e,["maskMode"]);return r!=null&&C(t,["maskMode"],r),t}function B0e(e){const t={},n=T(e,["image"]);n!=null&&C(t,["image"],v4(n));const r=T(e,["referenceType"]);return r!=null&&C(t,["referenceType"],r),t}function z0e(e){const t={},n=T(e,["image"]);n!=null&&C(t,["image"],Nu(n));const r=T(e,["referenceType"]);return r!=null&&C(t,["referenceType"],r),t}function lq(e){const t={},n=T(e,["uri"]);n!=null&&C(t,["uri"],n);const r=T(e,["videoBytes"]);r!=null&&C(t,["encodedVideo"],F0(r));const s=T(e,["mimeType"]);return s!=null&&C(t,["encoding"],s),t}function cq(e){const t={},n=T(e,["uri"]);n!=null&&C(t,["gcsUri"],n);const r=T(e,["videoBytes"]);r!=null&&C(t,["bytesBase64Encoded"],F0(r));const s=T(e,["mimeType"]);return s!=null&&C(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j0e="Content-Type",U0e="X-Server-Timeout",H0e="User-Agent",dN="x-goog-api-client",V0e="1.30.0",q0e=`google-genai-sdk/${V0e}`,G0e="v1beta1",W0e="v1beta",RP=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Y0e{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:G0e,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:W0e,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[i,a]of Object.entries(t.queryParams))s.searchParams.append(i,String(a));let o={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=t.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,s.toString(),t.abortSignal),this.unaryApiCall(s,o,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[s,o]of Object.entries(n))typeof o=="object"?r[s]=Object.assign(Object.assign({},r[s]),o):o!==void 0&&(r[s]=o);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let o={};return o.body=t.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,s.toString(),t.abortSignal),this.streamApiCall(s,o,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,s){if(n&&n.timeout||s){const o=new AbortController,i=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),t.signal=i}return n&&n.extraBody!==null&&K0e(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await MP(s),new iN(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await MP(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){var n;return v1(this,arguments,function*(){const s=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let i="";for(;;){const{done:a,value:l}=yield ao(s.read());if(a){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=o.decode(l,{stream:!0});try{const f=JSON.parse(c);if("error"in f){const m=JSON.parse(JSON.stringify(f.error)),g=m.status,y=m.code,v=`got status: ${g}. ${JSON.stringify(f)}`;if(y>=400&&y<600)throw new g4({message:v,status:y})}}catch(f){if(f.name==="ApiError")throw f}i+=c;let u=i.match(RP);for(;u;){const f=u[1];try{const m=new Response(f,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield ao(new iN(m)),i=i.slice(u[0].length),u=i.match(RP)}catch(m){throw new Error(`exception parsing stream chunk ${f}. ${m}`)}}}}finally{s.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=q0e+" "+this.clientOptions.userAgentExtra;return t[H0e]=n,t[dN]=n,t[j0e]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[s,o]of Object.entries(t.headers))r.append(s,o);t.timeout&&t.timeout>0&&r.append(U0e,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,i=await o.stat(t);s.sizeBytes=String(i.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l={file:s},c=this.getFileName(t),u=en("upload/v1beta/files",l._url),f=await this.fetchUploadUrl(u,s.sizeBytes,s.mimeType,c,l,n==null?void 0:n.httpOptions);return o.upload(t,f,this)}async uploadFileToFileSearchStore(t,n,r){var s;const o=this.clientOptions.uploader,i=await o.stat(n),a=String(i.size),l=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:i.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${t}:uploadToFileSearchStore`,u=this.getFileName(n),f={};r!=null&&r.customMetadata&&(f.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(f.chunkingConfig=r.chunkingConfig);const m=await this.fetchUploadUrl(c,a,l,u,f,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,m,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,s,o,i){var a;let l={};i?l=i:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:t,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function MP(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new g4({message:s,status:n}):new Error(s)}}function K0e(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const o=JSON.parse(e.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,i){const a=Object.assign({},o);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const c=i[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=r(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const s=r(n,t);e.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z0e="mcp_used/unknown";let J0e=!1;function uq(e){for(const t of e)if(X0e(t)||typeof t=="object"&&"inputSchema"in t)return!0;return J0e}function dq(e){var t;const n=(t=e[dN])!==null&&t!==void 0?t:"";e[dN]=(n+` ${Z0e}`).trimStart()}function X0e(e){return e!==null&&typeof e=="object"&&e instanceof cR}function Q0e(e,t=100){return v1(this,arguments,function*(){let r,s=0;for(;s<t;){const o=yield ao(e.listTools({cursor:r}));for(const i of o.tools)yield yield ao(i),s++;if(!o.nextCursor)break;r=o.nextCursor}})}class cR{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new cR(t,n)}async initialize(){var t,n,r,s;if(this.mcpTools.length>0)return;const o={},i=[];for(const u of this.mcpClients)try{for(var a=!0,l=(n=void 0,Nv(Q0e(u))),c;c=await l.next(),t=c.done,!t;a=!0){s=c.value,a=!1;const f=s;i.push(f);const m=f.name;if(o[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);o[m]=u}}catch(f){n={error:f}}finally{try{!a&&!t&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),que(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const i=await s.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function epe(e,t,n){const r=new $ue;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),t(r)}class tpe{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),i=spe(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(k=>{c=k}),f=t.callbacks,m=function(){c({})},g=this.apiClient,y={onopen:m,onmessage:k=>{epe(g,f.onmessage,k)},onerror:(n=f==null?void 0:f.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=f==null?void 0:f.onclose)!==null&&r!==void 0?r:function(k){}},v=this.webSocketFactory.create(l,rpe(i),y);v.connect(),await u;const S={setup:{model:ls(this.apiClient,t.model)}};return v.send(JSON.stringify(S)),new npe(v,this.apiClient)}}class npe{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Ufe(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=jfe(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(d1.PLAY)}pause(){this.sendPlaybackControl(d1.PAUSE)}stop(){this.sendPlaybackControl(d1.STOP)}resetContext(){this.sendPlaybackControl(d1.RESET_CONTEXT)}close(){this.conn.close()}}function rpe(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function spe(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ope="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ipe(e,t,n){const r=new Lue;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const o=JSON.parse(s);if(e.isVertexAI()){const i=qfe(o);Object.assign(r,i)}else Object.assign(r,o);t(r)}class ape{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new tpe(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,s,o,i,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const f=this.apiClient.getHeaders();t.config&&t.config.tools&&uq(t.config.tools)&&dq(f);const m=dpe(f);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,u);else{const q=this.apiClient.getApiKey();let U="BidiGenerateContent",z="key";q!=null&&q.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",z="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${U}?${z}=${q}`}let g=()=>{};const y=new Promise(q=>{g=q}),v=t.callbacks,w=function(){var q;(q=v==null?void 0:v.onopen)===null||q===void 0||q.call(v),g({})},_=this.apiClient,S={onopen:w,onmessage:q=>{ipe(_,v.onmessage,q)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(q){},onclose:(r=v==null?void 0:v.onclose)!==null&&r!==void 0?r:function(q){}},k=this.webSocketFactory.create(u,upe(m),S);k.connect(),await y;let R=ls(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const q=this.apiClient.getProject(),U=this.apiClient.getLocation();R=`projects/${q}/locations/${U}/`+R}let O={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[F1.AUDIO]}:t.config.responseModalities=[F1.AUDIO]),!((o=t.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const M=(a=(i=t.config)===null||i===void 0?void 0:i.tools)!==null&&a!==void 0?a:[],P=[];for(const q of M)if(this.isCallableTool(q)){const U=q;P.push(await U.tool())}else P.push(q);P.length>0&&(t.config.tools=P);const j={model:R,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?O=zfe(this.apiClient,j):O=Bfe(this.apiClient,j),delete O.config,k.send(JSON.stringify(O)),new cpe(k,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const lpe={turnComplete:!0};class cpe{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ic(n.turns),t.isVertexAI()||(r=r.map(s=>b4(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(ope)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},lpe),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Vfe(t)}:n={realtimeInput:Hfe(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function upe(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function dpe(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OP=10;function DP(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const i of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(x1(i)){s=!0;break}if(!s)return!0;const o=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function x1(e){return"callTool"in e&&typeof e.callTool=="function"}function fpe(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(s=>x1(s)))!==null&&r!==void 0?r:!1}function PP(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,s)=>{if(x1(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(s)}),n}function LP(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hpe extends nh{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,s,o,i,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!fpe(n)||DP(n.config))return await this.generateContentInternal(l);const c=PP(n);if(c.length>0){const v=c.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let u,f;const m=Ic(l.contents),g=(o=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:OP;let y=0;for(;y<g&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const v=u.candidates[0].content,w=[];for(const _ of(a=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&a!==void 0?a:[])if(x1(_)){const k=await _.callTool(u.functionCalls);w.push(...k)}y++,f={role:"user",parts:w},l.contents=Ic(l.contents),l.contents.push(v),l.contents.push(f),LP(l.config)&&(m.push(v),m.push(f))}return LP(l.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async n=>{var r,s,o,i,a;if(this.maybeMoveToResponseJsonSchem(n),DP(n.config)){const f=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(f)}const l=PP(n);if(l.length>0){const f=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${f}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,u=(a=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!u)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let o;const i=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:i.push(l);let a;return o?a={generatedImages:i,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new Am(Vf.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,o,i,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((i=(o=n.source)===null||o===void 0?void 0:o.video)===null||i===void 0)&&i.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,s;const o=(n=t.config)===null||n===void 0?void 0:n.tools;if(!o)return t;const i=await Promise.all(o.map(async l=>x1(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:i})};if(a.config.tools=i,t.config&&t.config.tools&&uq(t.config.tools)){const l=(s=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),dq(c),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(t){var n,r,s;const o=new Map;for(const i of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(x1(i)){const a=i,l=await a.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(t){var n,r,s;const o=(s=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:OP;let i=!1,a=0;const l=await this.initAfcToolsMap(t);return(function(c,u,f){var m,g;return v1(this,arguments,function*(){for(var y,v,w,_;a<o;){i&&(a++,i=!1);const O=yield ao(c.processParamsMaybeAddMcpUsage(f)),M=yield ao(c.generateContentStreamInternal(O)),P=[],j=[];try{for(var S=!0,k=(v=void 0,Nv(M)),R;R=yield ao(k.next()),y=R.done,!y;S=!0){_=R.value,S=!1;const q=_;if(yield yield ao(q),q.candidates&&(!((m=q.candidates[0])===null||m===void 0)&&m.content)){j.push(q.candidates[0].content);for(const U of(g=q.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(a<o&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(U.functionCall.name)){const z=yield ao(u.get(U.functionCall.name).callTool([U.functionCall]));P.push(...z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(q){v={error:q}}finally{try{!S&&!y&&(w=k.return)&&(yield ao(w.call(k)))}finally{if(v)throw v.error}}if(P.length>0){i=!0;const q=new Fy;q.candidates=[{content:{role:"user",parts:P}}],yield yield ao(q);const U=[];U.push(...j),U.push({role:"user",parts:P});const z=Ic(f.contents).concat(U);f.contents=z}else break}})})(this,l,t)}async generateContentInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=AP(this.apiClient,t);return a=en("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=IP(u),m=new Fy;return Object.assign(m,f),m})}else{const c=kP(this.apiClient,t);return a=en("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=NP(u),m=new Fy;return Object.assign(m,f),m})}}async generateContentStreamInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=AP(this.apiClient,t);return a=en("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(f){return v1(this,arguments,function*(){var m,g,y,v;try{for(var w=!0,_=Nv(f),S;S=yield ao(_.next()),m=S.done,!m;w=!0){v=S.value,w=!1;const k=v,R=IP(yield ao(k.json()));R.sdkHttpResponse={headers:k.headers};const O=new Fy;Object.assign(O,R),yield yield ao(O)}}catch(k){g={error:k}}finally{try{!w&&!m&&(y=_.return)&&(yield ao(y.call(_)))}finally{if(g)throw g.error}}})})}else{const c=kP(this.apiClient,t);return a=en("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),i.then(function(f){return v1(this,arguments,function*(){var m,g,y,v;try{for(var w=!0,_=Nv(f),S;S=yield ao(_.next()),m=S.done,!m;w=!0){v=S.value,w=!1;const k=v,R=NP(yield ao(k.json()));R.sdkHttpResponse={headers:k.headers};const O=new Fy;Object.assign(O,R),yield yield ao(O)}}catch(k){g={error:k}}finally{try{!w&&!m&&(y=_.return)&&(yield ao(y.call(_)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=whe(this.apiClient,t);return a=en("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=_he(u),m=new dP;return Object.assign(m,f),m})}else{const c=xhe(this.apiClient,t);return a=en("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Ehe(u),m=new dP;return Object.assign(m,f),m})}}async generateImagesInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Dhe(this.apiClient,t);return a=en("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Lhe(u),m=new fP;return Object.assign(m,f),m})}else{const c=Ohe(this.apiClient,t);return a=en("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Phe(u),m=new fP;return Object.assign(m,f),m})}}async editImageInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=ghe(this.apiClient,t);return o=en("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>{const c=bhe(l),u=new Tue;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=D0e(this.apiClient,t);return o=en("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>{const c=P0e(l),u=new Cue;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=m0e(this.apiClient,t);return o=en("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=g0e(l),u=new kue;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=E0e(this.apiClient,t);return o=en("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=_0e(l),u=new Aue;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Qhe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>uN(u))}else{const c=Xhe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>cN(u))}}async listInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=l0e(this.apiClient,t);return a=en("{models_url}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=u0e(u),m=new hP;return Object.assign(m,f),m})}else{const c=a0e(this.apiClient,t);return a=en("{models_url}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=c0e(u),m=new hP;return Object.assign(m,f),m})}}async update(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=M0e(this.apiClient,t);return a=en("{model}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>uN(u))}else{const c=R0e(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>cN(u))}}async delete(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=fhe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=phe(u),m=new pP;return Object.assign(m,f),m})}else{const c=dhe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=hhe(u),m=new pP;return Object.assign(m,f),m})}}async countTokens(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=lhe(this.apiClient,t);return a=en("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=uhe(u),m=new mP;return Object.assign(m,f),m})}else{const c=ahe(this.apiClient,t);return a=en("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=che(u),m=new mP;return Object.assign(m,f),m})}}async computeTokens(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=ehe(this.apiClient,t);return o=en("{model}:computeTokens",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>{const c=the(l),u=new Nue;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Uhe(this.apiClient,t);return a=en("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=zhe(u),m=new W_;return Object.assign(m,f),m})}else{const c=jhe(this.apiClient,t);return a=en("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>{const f=Bhe(u),m=new W_;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ppe extends nh{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=vue(t);return a=en("{operationName}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else{const c=yue(t);return a=en("{operationName}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i}}async fetchPredictVideosOperationInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=due(t);return o=en("{resourceName}:fetchPredictOperation",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mpe(e){const t={},n=T(e,["data"]);if(n!=null&&C(t,["data"],n),T(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function gpe(e){const t={},n=T(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Tpe(o))),C(t,["parts"],s)}const r=T(e,["role"]);return r!=null&&C(t,["role"],r),t}function bpe(e,t,n){const r={},s=T(t,["expireTime"]);n!==void 0&&s!=null&&C(n,["expireTime"],s);const o=T(t,["newSessionExpireTime"]);n!==void 0&&o!=null&&C(n,["newSessionExpireTime"],o);const i=T(t,["uses"]);n!==void 0&&i!=null&&C(n,["uses"],i);const a=T(t,["liveConnectConstraints"]);n!==void 0&&a!=null&&C(n,["bidiGenerateContentSetup"],Spe(e,a));const l=T(t,["lockAdditionalFields"]);return n!==void 0&&l!=null&&C(n,["fieldMask"],l),r}function ype(e,t){const n={},r=T(t,["config"]);return r!=null&&C(n,["config"],bpe(e,r,n)),n}function vpe(e){const t={};if(T(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=T(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=T(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function xpe(e){const t={},n=T(e,["id"]);n!=null&&C(t,["id"],n);const r=T(e,["args"]);r!=null&&C(t,["args"],r);const s=T(e,["name"]);if(s!=null&&C(t,["name"],s),T(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function wpe(e){const t={};if(T(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=T(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function Epe(e){const t={};if(T(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=T(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function _pe(e,t){const n={},r=T(e,["generationConfig"]);t!==void 0&&r!=null&&C(t,["setup","generationConfig"],r);const s=T(e,["responseModalities"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","responseModalities"],s);const o=T(e,["temperature"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","temperature"],o);const i=T(e,["topP"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","topP"],i);const a=T(e,["topK"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","topK"],a);const l=T(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=T(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=T(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const f=T(e,["speechConfig"]);t!==void 0&&f!=null&&C(t,["setup","generationConfig","speechConfig"],lR(f));const m=T(e,["thinkingConfig"]);t!==void 0&&m!=null&&C(t,["setup","generationConfig","thinkingConfig"],m);const g=T(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=T(e,["systemInstruction"]);t!==void 0&&y!=null&&C(t,["setup","systemInstruction"],gpe(va(y)));const v=T(e,["tools"]);if(t!==void 0&&v!=null){let M=bb(v);Array.isArray(M)&&(M=M.map(P=>kpe(gb(P)))),C(t,["setup","tools"],M)}const w=T(e,["sessionResumption"]);t!==void 0&&w!=null&&C(t,["setup","sessionResumption"],Cpe(w));const _=T(e,["inputAudioTranscription"]);t!==void 0&&_!=null&&C(t,["setup","inputAudioTranscription"],_);const S=T(e,["outputAudioTranscription"]);t!==void 0&&S!=null&&C(t,["setup","outputAudioTranscription"],S);const k=T(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&C(t,["setup","realtimeInputConfig"],k);const R=T(e,["contextWindowCompression"]);t!==void 0&&R!=null&&C(t,["setup","contextWindowCompression"],R);const O=T(e,["proactivity"]);return t!==void 0&&O!=null&&C(t,["setup","proactivity"],O),n}function Spe(e,t){const n={},r=T(t,["model"]);r!=null&&C(n,["setup","model"],ls(e,r));const s=T(t,["config"]);return s!=null&&C(n,["config"],_pe(s,n)),n}function Tpe(e){const t={},n=T(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=T(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const s=T(e,["executableCode"]);s!=null&&C(t,["executableCode"],s);const o=T(e,["fileData"]);o!=null&&C(t,["fileData"],vpe(o));const i=T(e,["functionCall"]);i!=null&&C(t,["functionCall"],xpe(i));const a=T(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=T(e,["inlineData"]);l!=null&&C(t,["inlineData"],mpe(l));const c=T(e,["text"]);c!=null&&C(t,["text"],c);const u=T(e,["thought"]);u!=null&&C(t,["thought"],u);const f=T(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=T(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function Cpe(e){const t={},n=T(e,["handle"]);if(n!=null&&C(t,["handle"],n),T(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function kpe(e){const t={},n=T(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(T(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=T(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const s=T(e,["computerUse"]);s!=null&&C(t,["computerUse"],s);const o=T(e,["fileSearch"]);o!=null&&C(t,["fileSearch"],o);const i=T(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),T(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=T(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],wpe(a));const l=T(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],Epe(l));const c=T(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ape(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(o=>`${n}.${o}`);t.push(...s)}else t.push(n)}return t.join(",")}function Npe(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(e.bidiGenerateContentSetup=o,n=o):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const s=e.fieldMask;if(n){const o=Ape(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)o?e.fieldMask=o:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(c=>i.includes(c)?`generationConfig.${c}`:c));const l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?e.fieldMask=s.join(","):delete e.fieldMask;return e}class Ipe extends nh{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=ype(this.apiClient,t);o=en("auth_tokens",a._url),i=a._query,delete a.config,delete a._url,delete a._query;const l=Npe(a,t.config);return s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rpe(e,t){const n={},r=T(e,["displayName"]);return t!==void 0&&r!=null&&C(t,["displayName"],r),n}function Mpe(e){const t={},n=T(e,["config"]);return n!=null&&Rpe(n,t),t}function Ope(e,t){const n={},r=T(e,["force"]);return t!==void 0&&r!=null&&C(t,["_query","force"],r),n}function Dpe(e){const t={},n=T(e,["name"]);n!=null&&C(t,["_url","name"],n);const r=T(e,["config"]);return r!=null&&Ope(r,t),t}function Ppe(e){const t={},n=T(e,["name"]);return n!=null&&C(t,["_url","name"],n),t}function Lpe(e,t){const n={},r=T(e,["customMetadata"]);if(t!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["customMetadata"],o)}const s=T(e,["chunkingConfig"]);return t!==void 0&&s!=null&&C(t,["chunkingConfig"],s),n}function $pe(e){const t={},n=T(e,["name"]);n!=null&&C(t,["name"],n);const r=T(e,["metadata"]);r!=null&&C(t,["metadata"],r);const s=T(e,["done"]);s!=null&&C(t,["done"],s);const o=T(e,["error"]);o!=null&&C(t,["error"],o);const i=T(e,["response"]);return i!=null&&C(t,["response"],Bpe(i)),t}function Fpe(e){const t={},n=T(e,["fileSearchStoreName"]);n!=null&&C(t,["_url","file_search_store_name"],n);const r=T(e,["fileName"]);r!=null&&C(t,["fileName"],r);const s=T(e,["config"]);return s!=null&&Lpe(s,t),t}function Bpe(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["parent"]);r!=null&&C(t,["parent"],r);const s=T(e,["documentName"]);return s!=null&&C(t,["documentName"],s),t}function zpe(e,t){const n={},r=T(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=T(e,["pageToken"]);return t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),n}function jpe(e){const t={},n=T(e,["config"]);return n!=null&&zpe(n,t),t}function Upe(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=T(e,["fileSearchStores"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["fileSearchStores"],o)}return t}function Hpe(e,t){const n={},r=T(e,["mimeType"]);t!==void 0&&r!=null&&C(t,["mimeType"],r);const s=T(e,["displayName"]);t!==void 0&&s!=null&&C(t,["displayName"],s);const o=T(e,["customMetadata"]);if(t!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),C(t,["customMetadata"],a)}const i=T(e,["chunkingConfig"]);return t!==void 0&&i!=null&&C(t,["chunkingConfig"],i),n}function Vpe(e){const t={},n=T(e,["fileSearchStoreName"]);n!=null&&C(t,["_url","file_search_store_name"],n);const r=T(e,["config"]);return r!=null&&Hpe(r,t),t}function qpe(e){const t={},n=T(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gpe(e,t){const n={},r=T(e,["force"]);return t!==void 0&&r!=null&&C(t,["_query","force"],r),n}function Wpe(e){const t={},n=T(e,["name"]);n!=null&&C(t,["_url","name"],n);const r=T(e,["config"]);return r!=null&&Gpe(r,t),t}function Ype(e){const t={},n=T(e,["name"]);return n!=null&&C(t,["_url","name"],n),t}function Kpe(e,t){const n={},r=T(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const s=T(e,["pageToken"]);return t!==void 0&&s!=null&&C(t,["_query","pageToken"],s),n}function Zpe(e){const t={},n=T(e,["parent"]);n!=null&&C(t,["_url","parent"],n);const r=T(e,["config"]);return r!=null&&Kpe(r,t),t}function Jpe(e){const t={},n=T(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=T(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const s=T(e,["documents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(i=>i)),C(t,["documents"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xpe extends nh{constructor(t){super(),this.apiClient=t,this.list=async n=>new Am(Vf.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ype(t);return o=en("{name}",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(t){var n,r;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=Wpe(t);s=en("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Zpe(t);return o=en("{parent}/documents",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=Jpe(l),u=new Iue;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qpe extends nh{constructor(t,n=new Xpe(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new Am(Vf.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Mpe(t);return o=en("fileSearchStores",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async get(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ppe(t);return o=en("{name}",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(t){var n,r;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=Dpe(t);s=en("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=jpe(t);return o=en("fileSearchStores",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=Upe(l),u=new Rue;return Object.assign(u,c),u})}}async uploadToFileSearchStoreInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Vpe(t);return o=en("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=qpe(l),u=new Mue;return Object.assign(u,c),u})}}async importFile(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Fpe(t);return o=en("{file_search_store_name}:importFile",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=$pe(l),u=new rR;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eme(e,t){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function tme(e,t){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function nme(e,t,n){const r={};if(T(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=T(e,["tunedModelDisplayName"]);if(t!==void 0&&s!=null&&C(t,["displayName"],s),T(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=T(e,["epochCount"]);t!==void 0&&o!=null&&C(t,["tuningTask","hyperparameters","epochCount"],o);const i=T(e,["learningRateMultiplier"]);if(i!=null&&C(r,["tuningTask","hyperparameters","learningRateMultiplier"],i),T(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(T(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(T(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=T(e,["batchSize"]);t!==void 0&&a!=null&&C(t,["tuningTask","hyperparameters","batchSize"],a);const l=T(e,["learningRate"]);if(t!==void 0&&l!=null&&C(t,["tuningTask","hyperparameters","learningRate"],l),T(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(T(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function rme(e,t,n){const r={};let s=T(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=T(e,["validationDataset"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec"],$P(g))}else if(s==="PREFERENCE_TUNING"){const g=T(e,["validationDataset"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec"],$P(g))}const o=T(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&C(t,["tunedModelDisplayName"],o);const i=T(e,["description"]);t!==void 0&&i!=null&&C(t,["description"],i);let a=T(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=T(e,["epochCount"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=T(e,["epochCount"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=T(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=T(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=T(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=T(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=T(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=T(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let u=T(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=T(e,["adapterSize"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(u==="PREFERENCE_TUNING"){const g=T(e,["adapterSize"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(T(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(T(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const f=T(e,["labels"]);t!==void 0&&f!=null&&C(t,["labels"],f);const m=T(e,["beta"]);return t!==void 0&&m!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function sme(e,t){const n={},r=T(e,["baseModel"]);r!=null&&C(n,["baseModel"],r);const s=T(e,["preTunedModel"]);s!=null&&C(n,["preTunedModel"],s);const o=T(e,["trainingDataset"]);o!=null&&mme(o);const i=T(e,["config"]);return i!=null&&nme(i,n),n}function ome(e,t){const n={},r=T(e,["baseModel"]);r!=null&&C(n,["baseModel"],r);const s=T(e,["preTunedModel"]);s!=null&&C(n,["preTunedModel"],s);const o=T(e,["trainingDataset"]);o!=null&&gme(o,n,t);const i=T(e,["config"]);return i!=null&&rme(i,n,t),n}function ime(e,t){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function ame(e,t){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function lme(e,t,n){const r={},s=T(e,["pageSize"]);t!==void 0&&s!=null&&C(t,["_query","pageSize"],s);const o=T(e,["pageToken"]);t!==void 0&&o!=null&&C(t,["_query","pageToken"],o);const i=T(e,["filter"]);return t!==void 0&&i!=null&&C(t,["_query","filter"],i),r}function cme(e,t,n){const r={},s=T(e,["pageSize"]);t!==void 0&&s!=null&&C(t,["_query","pageSize"],s);const o=T(e,["pageToken"]);t!==void 0&&o!=null&&C(t,["_query","pageToken"],o);const i=T(e,["filter"]);return t!==void 0&&i!=null&&C(t,["_query","filter"],i),r}function ume(e,t){const n={},r=T(e,["config"]);return r!=null&&lme(r,n),n}function dme(e,t){const n={},r=T(e,["config"]);return r!=null&&cme(r,n),n}function fme(e,t){const n={},r=T(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const s=T(e,["nextPageToken"]);s!=null&&C(n,["nextPageToken"],s);const o=T(e,["tunedModels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>fq(a))),C(n,["tuningJobs"],i)}return n}function hme(e,t){const n={},r=T(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const s=T(e,["nextPageToken"]);s!=null&&C(n,["nextPageToken"],s);const o=T(e,["tuningJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>fN(a))),C(n,["tuningJobs"],i)}return n}function pme(e,t){const n={},r=T(e,["name"]);r!=null&&C(n,["model"],r);const s=T(e,["name"]);return s!=null&&C(n,["endpoint"],s),n}function mme(e,t){const n={};if(T(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(T(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=T(e,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(n,["examples","examples"],s)}return n}function gme(e,t,n){const r={};let s=T(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const i=T(e,["gcsUri"]);t!==void 0&&i!=null&&C(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(s==="PREFERENCE_TUNING"){const i=T(e,["gcsUri"]);t!==void 0&&i!=null&&C(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}let o=T(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const i=T(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&C(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(o==="PREFERENCE_TUNING"){const i=T(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&C(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}if(T(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function fq(e,t){const n={},r=T(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const s=T(e,["name"]);s!=null&&C(n,["name"],s);const o=T(e,["state"]);o!=null&&C(n,["state"],WV(o));const i=T(e,["createTime"]);i!=null&&C(n,["createTime"],i);const a=T(e,["tuningTask","startTime"]);a!=null&&C(n,["startTime"],a);const l=T(e,["tuningTask","completeTime"]);l!=null&&C(n,["endTime"],l);const c=T(e,["updateTime"]);c!=null&&C(n,["updateTime"],c);const u=T(e,["description"]);u!=null&&C(n,["description"],u);const f=T(e,["baseModel"]);f!=null&&C(n,["baseModel"],f);const m=T(e,["_self"]);return m!=null&&C(n,["tunedModel"],pme(m)),n}function fN(e,t){const n={},r=T(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const s=T(e,["name"]);s!=null&&C(n,["name"],s);const o=T(e,["state"]);o!=null&&C(n,["state"],WV(o));const i=T(e,["createTime"]);i!=null&&C(n,["createTime"],i);const a=T(e,["startTime"]);a!=null&&C(n,["startTime"],a);const l=T(e,["endTime"]);l!=null&&C(n,["endTime"],l);const c=T(e,["updateTime"]);c!=null&&C(n,["updateTime"],c);const u=T(e,["error"]);u!=null&&C(n,["error"],u);const f=T(e,["description"]);f!=null&&C(n,["description"],f);const m=T(e,["baseModel"]);m!=null&&C(n,["baseModel"],m);const g=T(e,["tunedModel"]);g!=null&&C(n,["tunedModel"],g);const y=T(e,["preTunedModel"]);y!=null&&C(n,["preTunedModel"],y);const v=T(e,["supervisedTuningSpec"]);v!=null&&C(n,["supervisedTuningSpec"],v);const w=T(e,["preferenceOptimizationSpec"]);w!=null&&C(n,["preferenceOptimizationSpec"],w);const _=T(e,["tuningDataStats"]);_!=null&&C(n,["tuningDataStats"],_);const S=T(e,["encryptionSpec"]);S!=null&&C(n,["encryptionSpec"],S);const k=T(e,["partnerModelTuningSpec"]);k!=null&&C(n,["partnerModelTuningSpec"],k);const R=T(e,["customBaseModel"]);R!=null&&C(n,["customBaseModel"],R);const O=T(e,["experiment"]);O!=null&&C(n,["experiment"],O);const M=T(e,["labels"]);M!=null&&C(n,["labels"],M);const P=T(e,["outputUri"]);P!=null&&C(n,["outputUri"],P);const j=T(e,["pipelineJob"]);j!=null&&C(n,["pipelineJob"],j);const q=T(e,["serviceAccount"]);q!=null&&C(n,["serviceAccount"],q);const U=T(e,["tunedModelDisplayName"]);U!=null&&C(n,["tunedModelDisplayName"],U);const z=T(e,["veoTuningSpec"]);return z!=null&&C(n,["veoTuningSpec"],z),n}function bme(e,t){const n={},r=T(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const s=T(e,["name"]);s!=null&&C(n,["name"],s);const o=T(e,["metadata"]);o!=null&&C(n,["metadata"],o);const i=T(e,["done"]);i!=null&&C(n,["done"],i);const a=T(e,["error"]);return a!=null&&C(n,["error"],a),n}function $P(e,t){const n={},r=T(e,["gcsUri"]);r!=null&&C(n,["validationDatasetUri"],r);const s=T(e,["vertexDatasetResource"]);return s!=null&&C(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yme extends nh{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Am(Vf.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:s});return o.baseModel=void 0,await this.tuneInternal(o)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),o=await this.tuneMldevInternal(s);let i="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?i=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(i=o.name.split("/operations/")[0]),{name:i,state:oN.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=ame(t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>fN(u))}else{const c=ime(t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>fq(u))}}async listInternal(t){var n,r,s,o;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=dme(t);return a=en("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=hme(u),m=new gP;return Object.assign(m,f),m})}else{const c=ume(t);return a=en("tunedModels",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=fme(u),m=new gP;return Object.assign(m,f),m})}}async cancel(t){var n,r,s,o;let i="",a={};if(this.apiClient.isVertexAI()){const l=tme(t);i=en("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=eme(t);i=en("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI()){const a=ome(t,t);return o=en("tuningJobs",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>fN(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=sme(t);return o=en("tunedModels",a._url),i=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),s.then(l=>bme(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vme{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const xme=1024*1024*8,wme=3,Eme=1e3,_me=2,K_="x-goog-upload-status";async function Sme(e,t,n){var r;const s=await hq(e,t,n),o=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[K_])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function Tme(e,t,n){var r;const s=await hq(e,t,n),o=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[K_])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const i=jV(o),a=new sR;return Object.assign(a,i),a}async function hq(e,t,n){var r,s;let o=0,i=0,a=new iN(new Response),l="upload";for(o=e.size;i<o;){const c=Math.min(xme,o-i),u=e.slice(i,i+c);i+c>=o&&(l+=", finalize");let f=0,m=Eme;for(;f<wme&&(a=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(i),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[K_]));)f++,await kme(m),m=m*_me;if(i+=c,((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[K_])!=="active")break;if(o<=i)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function Cme(e){return{size:e.size,type:e.type}}function kme(e){return new Promise(t=>setTimeout(t,e))}class Ame{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Sme(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Tme(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Cme(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nme{create(t,n,r){return new Ime(t,n,r)}}class Ime{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FP="x-goog-api-key";class Rme{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(FP)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(FP,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mme="gl-node/";class uR{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=cue(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion;const s=new Rme(this.apiKey);this.apiClient=new Y0e({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:Mme+"web",uploader:new Ame,downloader:new vme}),this.models=new hpe(this.apiClient),this.live=new ape(this.apiClient,s,new Nme),this.batches=new Fde(this.apiClient),this.chats=new vfe(this.models,this.apiClient),this.caches=new gfe(this.apiClient),this.files=new Nfe(this.apiClient),this.operations=new ppe(this.apiClient),this.authTokens=new Ipe(this.apiClient),this.tunings=new yme(this.apiClient),this.fileSearchStores=new Qpe(this.apiClient)}}function Ome(e){const t=new Int16Array(e.length);for(let n=0;n<e.length;n++){const r=Math.max(-1,Math.min(1,e[n]));t[n]=r<0?r*32768:r*32767}return t}function Dme(e){let t="";const n=new Uint8Array(e.buffer),r=n.byteLength;for(let s=0;s<r;s++)t+=String.fromCharCode(n[s]);return btoa(t)}function Pme(e){const t=Ome(e);return{data:Dme(t),mimeType:"audio/pcm;rate=16000"}}function Lme(e){const t=atob(e),n=t.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=t.charCodeAt(s);return r}async function pq(e,t,n=24e3,r=1){const s=new Int16Array(e.buffer),o=s.length/r,i=t.createBuffer(r,o,n);for(let a=0;a<r;a++){const l=i.getChannelData(a);for(let c=0;c<o;c++)l[c]=s[c*r+a]/32768}return i}async function $me(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.currentTime,n=e.createOscillator(),r=e.createGain();n.frequency.value=600,r.gain.setValueAtTime(.25,t),r.gain.exponentialRampToValueAtTime(.01,t+.1),n.connect(r),r.connect(e.destination),n.start(t),n.stop(t+.1);const s=e.createOscillator(),o=e.createGain();s.frequency.value=800,o.gain.setValueAtTime(.25,t+.05),o.gain.exponentialRampToValueAtTime(.01,t+.15),s.connect(o),o.connect(e.destination),s.start(t+.05),s.stop(t+.15),await new Promise(i=>setTimeout(i,150))}catch(e){console.error("[Audio] Failed to play approval sound:",e)}}async function Fme(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.currentTime,n=e.createOscillator(),r=e.createGain();n.frequency.value=800,r.gain.setValueAtTime(.25,t),r.gain.exponentialRampToValueAtTime(.01,t+.1),n.connect(r),r.connect(e.destination),n.start(t),n.stop(t+.1);const s=e.createOscillator(),o=e.createGain();s.frequency.value=500,o.gain.setValueAtTime(.25,t+.05),o.gain.exponentialRampToValueAtTime(.01,t+.15),s.connect(o),o.connect(e.destination),s.start(t+.05),s.stop(t+.15),await new Promise(i=>setTimeout(i,150))}catch(e){console.error("[Audio] Failed to play rejection sound:",e)}}async function Bme(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.currentTime,n=[700,600,500],r=[0,.05,.1];n.forEach((s,o)=>{const i=e.createOscillator(),a=e.createGain();i.frequency.value=s,a.gain.setValueAtTime(.2,t+r[o]),a.gain.exponentialRampToValueAtTime(.01,t+r[o]+.08),i.connect(a),a.connect(e.destination),i.start(t+r[o]),i.stop(t+r[o]+.08)}),await new Promise(s=>setTimeout(s,180))}catch(e){console.error("[Audio] Failed to play undo sound:",e)}}function ta(e){const t=n=>(...r)=>{};return{log:t(),warn:t(),error:(...n)=>{console.error(`[${e}]`,...n)},info:t()}}const Kr={ai:ta("AI"),aiSdk:ta("AI SDK"),exec:ta("Exec"),inspector:ta("Inspector"),sourcePatch:ta("Source Patch"),tabData:ta("TabData"),fileBrowser:ta("FileBrowser"),instantUI:ta("Instant UI"),domApproval:ta("DOM Approval"),liveGemini:ta("useLiveGemini"),aiChat:ta("useAIChatV2"),codingAgent:ta("Coding Agent"),webview:ta("Webview"),input:ta("Input"),preview:ta("Preview"),mcp:ta("MCP"),general:ta("App")};function BP(...e){}class bc extends Error{constructor(t,n){super(`Operation "${t}" timed out after ${n}ms`),this.name="TimeoutError"}}function eu(e,t,n){let r;const s=new Promise((o,i)=>{r=setTimeout(()=>{i(new bc(n,t))},t)});return Promise.race([e,s]).finally(()=>{clearTimeout(r)})}const tu={TOOL_CALL:3e4,FILE_READ:1e4,FILE_LIST:1e4,API_CALL:6e4,QUICK:5e3},zme={update_ui:(e,t,n)=>{const r=e.args.html;t.onCodeUpdate&&r&&t.onCodeUpdate(r),n(e.id,e.name,{result:"UI Updated Successfully"})},select_element:(e,t,n)=>{const{selector:r,reasoning:s}=e.args;t.onElementSelect&&r&&t.onElementSelect(r,s),n(e.id,e.name,{result:"Element selection requested",selector:r,reasoning:s})},execute_code:(e,t,n)=>{const{code:r,description:s}=e.args;t.onExecuteCode&&r&&t.onExecuteCode(r,s||""),n(e.id,e.name,{result:"Code executed successfully",description:s})},confirm_selection:(e,t,n)=>{const{confirmed:r,elementNumber:s}=e.args;t.onConfirmSelection&&t.onConfirmSelection(!!r,s),n(e.id,e.name,{result:r?s?`Element ${s} confirmed`:"Selection confirmed":"Selection rejected"})},get_page_elements:async(e,t,n)=>{const r=e.args.category||"all";if(!t.onGetPageElements){n(e.id,e.name,{error:"get_page_elements handler not available"});return}try{const s=await eu(t.onGetPageElements(r),tu.TOOL_CALL,"get_page_elements");n(e.id,e.name,{result:s})}catch(s){const o=s instanceof bc||s instanceof Error?s.message:"Failed to get page elements";n(e.id,e.name,{error:o})}},patch_source_file:async(e,t,n)=>{const{filePath:r,searchCode:s,replaceCode:o,description:i}=e.args;if(!t.onPatchSourceFile){n(e.id,e.name,{error:"patch_source_file handler not available - file editing not supported"});return}if(!r||!s||!o){n(e.id,e.name,{error:"Missing required arguments for patch_source_file"});return}try{const a=await eu(t.onPatchSourceFile(r,s,o,i||""),tu.TOOL_CALL,"patch_source_file");n(e.id,e.name,a.success?{result:`Successfully patched ${r}: ${i}`}:{error:a.error||"Failed to patch file"})}catch(a){const l=a instanceof bc||a instanceof Error?a.message:"Failed to patch source file";n(e.id,e.name,{error:l})}},list_files:async(e,t,n)=>{const r=e.args.path||".";if(!t.onListFiles){n(e.id,e.name,{error:"list_files not available"});return}try{const s=await eu(t.onListFiles(r),tu.FILE_LIST,"list_files");s==null?n(e.id,e.name,{error:"Directory listing returned no content"}):n(e.id,e.name,{result:String(s)})}catch(s){const o=s instanceof bc||s instanceof Error?s.message:"Failed to list files";n(e.id,e.name,{error:o})}},read_file:async(e,t,n)=>{const r=e.args.path??e.args.filePath;if(!r){n(e.id,e.name,{error:'read_file requires a "path" argument'});return}if(!t.onReadFile){n(e.id,e.name,{error:"read_file not available"});return}try{const s=await eu(t.onReadFile(r),tu.FILE_READ,"read_file");s==null?n(e.id,e.name,{error:"File read returned no content"}):n(e.id,e.name,{result:String(s)})}catch(s){const o=s instanceof bc||s instanceof Error?s.message:"Failed to read file";n(e.id,e.name,{error:o})}},click_element:async(e,t,n)=>{const{selector:r}=e.args;if(!t.onClickElement){n(e.id,e.name,{error:"click_element not available"});return}if(!r){n(e.id,e.name,{error:"click_element requires a selector"});return}try{const s=await eu(t.onClickElement(r),tu.QUICK,"click_element");n(e.id,e.name,s.success?{result:`Clicked element: ${r}`}:{error:s.error||"Failed to click element"})}catch(s){const o=s instanceof bc||s instanceof Error?s.message:"Failed to click element";n(e.id,e.name,{error:o})}},navigate:async(e,t,n)=>{const{action:r,url:s}=e.args;if(!t.onNavigate){n(e.id,e.name,{error:"navigate not available"});return}if(!r){n(e.id,e.name,{error:"navigate requires an action"});return}try{const o=await eu(t.onNavigate(r,s),tu.TOOL_CALL,"navigate");n(e.id,e.name,o.success?{result:`Navigation: ${r}${s?" to "+s:""}`}:{error:o.error||"Navigation failed"})}catch(o){const i=o instanceof bc||o instanceof Error?o.message:"Navigation failed";n(e.id,e.name,{error:i})}},scroll:async(e,t,n)=>{const{target:r}=e.args;if(!t.onScroll){n(e.id,e.name,{error:"scroll not available"});return}if(!r){n(e.id,e.name,{error:"scroll requires a target"});return}try{const s=await eu(t.onScroll(r),tu.QUICK,"scroll");n(e.id,e.name,s.success?{result:`Scrolled to: ${r}`}:{error:s.error||"Scroll failed"})}catch(s){const o=s instanceof bc||s instanceof Error?s.message:"Scroll failed";n(e.id,e.name,{error:o})}},open_item:async(e,t,n)=>{const{itemNumber:r}=e.args;if(!t.onOpenItem){n(e.id,e.name,{error:"open_item not available"});return}if(r===void 0){n(e.id,e.name,{error:"open_item requires itemNumber"});return}try{const s=await eu(t.onOpenItem(r),tu.FILE_READ,"open_item");n(e.id,e.name,{result:s??"Item opened"})}catch(s){const o=s instanceof bc||s instanceof Error?s.message:"Failed to open item";n(e.id,e.name,{error:o})}},open_file:async(e,t,n)=>{const{name:r,path:s}=e.args;if(!t.onOpenFile){n(e.id,e.name,{error:"open_file not available"});return}try{const o=await eu(t.onOpenFile(r,s),tu.FILE_READ,"open_file");n(e.id,e.name,{result:o??"File opened"})}catch(o){const i=o instanceof bc||o instanceof Error?o.message:"Failed to open file";n(e.id,e.name,{error:i})}},open_folder:async(e,t,n)=>{const{name:r,itemNumber:s}=e.args;if(!t.onOpenFolder){n(e.id,e.name,{error:"open_folder not available"});return}try{const o=await eu(t.onOpenFolder(r,s),tu.FILE_LIST,"open_folder");n(e.id,e.name,{result:o??"Folder opened"})}catch(o){const i=o instanceof bc||o instanceof Error?o.message:"Failed to open folder";n(e.id,e.name,{error:i})}},browser_back:(e,t,n)=>{if(!t.onBrowserBack){n(e.id,e.name,{error:"browser_back not available"});return}try{const r=t.onBrowserBack();n(e.id,e.name,{result:r??"Navigated back"})}catch(r){n(e.id,e.name,{error:r instanceof Error?r.message:"Failed to go back"})}},close_browser:(e,t,n)=>{if(!t.onCloseBrowser){n(e.id,e.name,{error:"close_browser not available"});return}try{const r=t.onCloseBrowser();n(e.id,e.name,{result:r??"Browser closed"})}catch(r){n(e.id,e.name,{error:r instanceof Error?r.message:"Failed to close browser"})}},approve_change:(e,t,n)=>{const{reason:r}=e.args;t.onApproveChange&&t.onApproveChange(r),n(e.id,e.name,{result:"Change approved"})},reject_change:(e,t,n)=>{const{reason:r}=e.args;t.onRejectChange&&t.onRejectChange(r),n(e.id,e.name,{result:"Change rejected"})},undo_change:(e,t,n)=>{const{reason:r}=e.args;t.onUndoChange&&t.onUndoChange(r),n(e.id,e.name,{result:"Change undone"})},highlight_element_by_number:async(e,t,n)=>{const{elementNumber:r,description:s}=e.args;if(!t.onHighlightByNumber){n(e.id,e.name,{error:"highlight_element_by_number not available"});return}if(r===void 0){n(e.id,e.name,{error:"highlight_element_by_number requires elementNumber"});return}try{const o=await eu(t.onHighlightByNumber(r),tu.QUICK,"highlight_element_by_number");if(o.success){const i=o.element?` (${o.element.tagName}${o.element.text?": "+o.element.text.substring(0,30):""})`:"";n(e.id,e.name,{result:`Element ${r} highlighted${i}${s?": "+s:""}`})}else n(e.id,e.name,{error:o.error||"Failed to highlight element"})}catch(o){const i=o instanceof bc||o instanceof Error?o.message:"Failed to highlight element";n(e.id,e.name,{error:i})}},clear_focus:async(e,t,n)=>{if(!t.onClearFocus){n(e.id,e.name,{error:"clear_focus not available"});return}try{const r=await t.onClearFocus();n(e.id,e.name,{result:"Focus cleared. Call get_page_elements() to see all elements."})}catch(r){const s=r instanceof Error?r.message:"Failed to clear focus";n(e.id,e.name,{error:s})}},set_viewport:async(e,t,n)=>{if(!t.onSetViewport){n(e.id,e.name,{error:"set_viewport not available"});return}const r=e.args.mode;if(!r||!["mobile","tablet","desktop"].includes(r)){n(e.id,e.name,{error:"Invalid mode. Use: mobile, tablet, or desktop"});return}try{await t.onSetViewport(r),n(e.id,e.name,{result:`Viewport switched to ${r} mode`})}catch(s){const o=s instanceof Error?s.message:"Failed to set viewport";n(e.id,e.name,{error:o})}},switch_tab:async(e,t,n)=>{if(!t.onSwitchTab){n(e.id,e.name,{error:"switch_tab not available"});return}const r=e.args.type;if(!r||!["browser","kanban","todos","notes"].includes(r)){n(e.id,e.name,{error:"Invalid type. Use: browser, kanban, todos, or notes"});return}try{await t.onSwitchTab(r),n(e.id,e.name,{result:`Switched to ${r} tab`})}catch(s){const o=s instanceof Error?s.message:"Failed to switch tab";n(e.id,e.name,{error:o})}}};async function zP(e,t){return new Promise(n=>{const r=(o,i,a)=>{n(a)},s=zme[e.name];if(s){const o=s(e,t,r);o instanceof Promise&&o.catch(i=>{n({error:i instanceof Error?i.message:"Unknown error in tool handler"})})}else n({error:`Unknown tool: ${e.name}`})})}async function jme(e,t,n={}){const{parallel:r=!0}=n;if(r)return await Promise.all(e.map(async o=>({id:o.id,name:o.name,response:await zP(o,t)})));{const s=[];for(const o of e)s.push({id:o.id,name:o.name,response:await zP(o,t)});return s}}const Ume={name:"update_ui",description:"Update the user interface code (HTML/CSS/JS) based on the users request. Return the FULL updated HTML file content.",parameters:{type:xn.OBJECT,properties:{html:{type:xn.STRING,description:"The full HTML code for the page, including styles and scripts."}},required:["html"]}},Hme={name:"select_element",description:`Select elements on the page using a CSS selector.

 PREREQUISITE: You MUST call get_page_elements() FIRST before using this tool!
Never guess selectors - always check what elements actually exist on the page.

 FORBIDDEN SYNTAX (WILL CRASH):
- :contains() - NEVER USE
- :has(text) - NEVER USE
- jQuery pseudo-selectors

 VALID CSS SELECTORS:
- Tag: 'button', 'a', 'div', 'img', 'h1', 'h2', 'section'
- Class: '.btn', '.card', '.hero-section'
- ID: '#submit-btn', '#hero'
- Attribute contains: '[href*="download"]', '[src*="screenshot"]', '[alt*="app"]'
- Attribute exact: '[data-testid="login"]'
- Combined: 'button, [role="button"]', 'img, [role="img"]'

WORKFLOW:
1. Call get_page_elements() to see what exists
2. If element count is 0  tell user it doesn't exist
3. If elements exist  use selectors from the returned data

EXAMPLES (only after confirming elements exist):
- "screenshot image"  'img[alt*="screenshot"], img[src*="screenshot"]'
- "download button"  'a[href*="download"], button[aria-label*="download"]'
- "all buttons"  'button, [role="button"], input[type="button"]'`,parameters:{type:xn.OBJECT,properties:{selector:{type:xn.STRING,description:'CSS selector WITHOUT :contains() or jQuery syntax. Use [attr*="text"] for text matching.'},reasoning:{type:xn.STRING,description:"Brief explanation of selector choice"}},required:["selector","reasoning"]}},Vme={name:"get_page_elements",description:` DISCOVERY TOOL - Call this FIRST before any select_element call!

Returns counts and details of elements on the page. Use the results to:
- Know if an element type exists (count > 0)
- Get class names and attributes for accurate selectors
- Tell the user "no [X] found" if count is 0

Categories: "buttons", "links", "inputs", "images", "headings", "all"

REQUIRED WORKFLOW:
User: "select the image"  YOU: get_page_elements("images")
  - If images.count = 0  "I don't see any images on this page"
  - If images.count > 0  Use returned selectors in select_element()`,parameters:{type:xn.OBJECT,properties:{category:{type:xn.STRING,description:'Filter to specific category - "buttons", "links", "inputs", "images", "headings", or "all" (default)'}},required:[]}},qme={name:"execute_code",description:"Execute JavaScript code on the page to modify elements. Use this to make changes to the UI after the user confirms the selected element.",parameters:{type:xn.OBJECT,properties:{code:{type:xn.STRING,description:"JavaScript code to execute. Can use document.querySelector() to select elements and modify them."},description:{type:xn.STRING,description:"Brief description of what this code will do"}},required:["code","description"]}},Gme={name:"confirm_selection",description:'Confirm or reject a pending element selection. Use this when the user says "yes"/"no"/"approve"/"reject" or specifies which numbered element they want.',parameters:{type:xn.OBJECT,properties:{confirmed:{type:xn.BOOLEAN,description:"true if user approved (yes/approve/do it/go ahead), false if rejected (no/reject/cancel/wrong)"},elementNumber:{type:xn.NUMBER,description:'Optional: If multiple elements were found, specify which one (1-indexed). Use when user says "the second one" (2), "number 3" (3), etc.'}},required:["confirmed"]}},Wme={name:"patch_source_file",description:`SAVE changes to the actual source code file. Use this AFTER execute_code to make changes permanent.

REQUIRES: The selected element must have sourceLocation info (file path and line number).
Use this to write the modified code to disk so it persists after page reload.

IMPORTANT: Provide the FULL updated content for the portion of the file being changed.`,parameters:{type:xn.OBJECT,properties:{filePath:{type:xn.STRING,description:"The source file path to modify (from selectedElement.sourceLocation)"},searchCode:{type:xn.STRING,description:"The original code to find and replace in the file"},replaceCode:{type:xn.STRING,description:"The new code to replace it with"},description:{type:xn.STRING,description:"Brief description of the change being made"}},required:["filePath","searchCode","replaceCode","description"]}},Yme={name:"list_files",description:"List files and folders in a directory. Use this to explore the project structure.",parameters:{type:xn.OBJECT,properties:{path:{type:xn.STRING,description:'Directory path to list. Use "." for current directory, or relative/absolute path.'}},required:[]}},Kme={name:"read_file",description:"Read the contents of a file. Use this to see the current code before making changes.",parameters:{type:xn.OBJECT,properties:{path:{type:xn.STRING,description:"Absolute or relative path to the file to read"},filePath:{type:xn.STRING,description:'(Deprecated) Legacy alias for path; prefer using "path"'}},required:[]}},Zme={name:"click_element",description:"Click on an element (link, button, etc.) to navigate or trigger an action.",parameters:{type:xn.OBJECT,properties:{selector:{type:xn.STRING,description:"CSS selector for the element to click. Use valid CSS only (no :contains)."}},required:["selector"]}},Jme={name:"navigate",description:"Navigate the browser - go back, forward, reload, or to a specific URL.",parameters:{type:xn.OBJECT,properties:{action:{type:xn.STRING,description:'Action to take: "back", "forward", "reload", or "goto"'},url:{type:xn.STRING,description:'URL to navigate to (only needed if action is "goto")'}},required:["action"]}},Xme={name:"scroll",description:"Scroll the page - to top, bottom, or to a specific element.",parameters:{type:xn.OBJECT,properties:{target:{type:xn.STRING,description:'"top", "bottom", or a CSS selector to scroll to'}},required:["target"]}},Qme={name:"open_item",description:"Open an item from the file browser overlay by its number. Use after list_files shows the file browser.",parameters:{type:xn.OBJECT,properties:{itemNumber:{type:xn.NUMBER,description:"The number of the item to open (1-indexed)"}},required:["itemNumber"]}},ege={name:"browser_back",description:"Go back to the previous panel in the file browser, or close it if at the root.",parameters:{type:xn.OBJECT,properties:{},required:[]}},tge={name:"close_browser",description:'Close the file browser overlay completely. Use when user says "close that", "clear", "enough", "dismiss", etc.',parameters:{type:xn.OBJECT,properties:{},required:[]}},nge={name:"open_file",description:`Open a file in the file browser by name or path.

USE THIS WHEN:
- User says "open LandingPage.tsx"  open_file({ name: "LandingPage.tsx" })
- User says "show me the App component"  open_file({ name: "App.tsx" })
- User says "open package.json"  open_file({ name: "package.json" })
- User says "open that file" (after mentioning a file)  open_file({ name: "filename.tsx" })

You can provide either:
- name: Just the filename - will search in the current file browser directory
- path: Full or relative path to the file

The file will open in the file browser overlay for viewing.`,parameters:{type:xn.OBJECT,properties:{name:{type:xn.STRING,description:'The filename to open (e.g., "LandingPage.tsx", "package.json")'},path:{type:xn.STRING,description:"Optional: Full path to the file if known"}},required:[]}},rge={name:"open_folder",description:`Open a folder in the file browser by name or number.

USE THIS WHEN:
- User says "open the public folder"  open_folder({ name: "public" })
- User says "open number 3" or "open 3"  open_folder({ itemNumber: 3 })
- User says "go into src"  open_folder({ name: "src" })
- User says "check the hooks folder"  open_folder({ name: "hooks" })

You can use EITHER name OR itemNumber, not both. The itemNumber refers to the numbered items shown in the file browser overlay.`,parameters:{type:xn.OBJECT,properties:{name:{type:xn.STRING,description:'The folder name to open (e.g., "public", "src", "hooks")'},itemNumber:{type:xn.NUMBER,description:"The number of the folder in the file browser (1-indexed)"}},required:[]}},sge={name:"approve_change",description:`Approve a pending change when the user gives voice approval.

Use this when the user says "yes", "accept", "approve", "do it", "go ahead", or similar approval commands.
This confirms that the user wants to apply the proposed change.`,parameters:{type:xn.OBJECT,properties:{reason:{type:xn.STRING,description:"Brief explanation of what was approved (for confirmation message)"}},required:[]}},oge={name:"reject_change",description:`Reject a pending change when the user gives voice rejection.

Use this when the user says "no", "reject", "cancel", "undo", "wrong", or similar rejection commands.
This confirms that the user does not want to apply the proposed change.`,parameters:{type:xn.OBJECT,properties:{reason:{type:xn.STRING,description:"Brief explanation of why the change was rejected"}},required:[]}},ige={name:"undo_change",description:`Undo the last applied change when the user requests it via voice.

Use this when the user says "undo that", "undo the last change", "revert", "go back", or similar undo commands.
This reverts the application to the state before the last change was applied.`,parameters:{type:xn.OBJECT,properties:{reason:{type:xn.STRING,description:"Reason for undoing (for confirmation message)"}},required:[]}},age={name:"highlight_element_by_number",description:`Highlight an element AND SET IT AS FOCUS for hierarchical navigation.

Elements on the page are numbered with visible badges (1, 2, 3, etc).
This is the PREFERRED way to highlight elements - no CSS selector errors!

 HIERARCHICAL FOCUSING:
When you highlight an element, it becomes the FOCUS. Subsequent get_page_elements
calls will ONLY show elements WITHIN the focused element. This lets users
drill down: "middle section"  "left side"  "that button"

WORKFLOW:
1. get_page_elements() - shows all page elements numbered
2. User: "the middle section"  highlight_element_by_number(N) for that section
3. get_page_elements() - now ONLY shows elements INSIDE the section
4. User: "the button on the left"  highlight_element_by_number(M)
5. User: "clear focus"  call clear_focus() to see all elements again

WHEN TO USE:
- "highlight 3" or "number 3"  highlight_element_by_number(3)
- "that section" / "the header"  highlight it to set focus
- User points to a region  set it as focus for drilling down`,parameters:{type:xn.OBJECT,properties:{elementNumber:{type:xn.NUMBER,description:"The 1-indexed element number to highlight (from the numbered badges on the page)"},description:{type:xn.STRING,description:"Brief description of what element you are highlighting (for user confirmation)"}},required:["elementNumber"]}},lge={name:"clear_focus",description:`Clear the current focus scope and show ALL page elements again.

Use this when the user wants to "zoom out" or see the full page elements again after
drilling down into a specific section.

TRIGGERS:
- "clear focus" / "zoom out" / "show all" / "reset" / "go back to all"
- "start over" / "full page" / "everything"

After clearing focus, call get_page_elements() to re-number all elements on the page.`,parameters:{type:xn.OBJECT,properties:{},required:[]}},cge={name:"set_viewport",description:`Switch the viewport/device preview mode in Cluso.

MODES:
- 'mobile' - Phone view (375px wide)
- 'tablet' - Tablet view (768px wide)
- 'desktop' - Full width desktop view

TRIGGERS:
- "switch to mobile" / "show mobile view" / "phone view"
- "switch to tablet" / "tablet view" / "iPad view"
- "switch to desktop" / "desktop view" / "full width"
- "how does it look on mobile?"`,parameters:{type:xn.OBJECT,properties:{mode:{type:xn.STRING,description:"Viewport mode: mobile, tablet, or desktop"}},required:["mode"]}},uge={name:"switch_tab",description:`Switch to or create a different tab type in Cluso.

TAB TYPES:
- 'browser' - Web browser tab for viewing/editing websites
- 'kanban' - Kanban board for project management
- 'todos' - Todo list for task tracking
- 'notes' - Notes tab for documentation

TRIGGERS:
- "open kanban" / "show kanban board" / "project board"
- "open todos" / "show my tasks" / "task list"
- "open notes" / "show notes"
- "go to browser" / "back to website"`,parameters:{type:xn.OBJECT,properties:{type:{type:xn.STRING,description:"Tab type: browser, kanban, todos, or notes"}},required:["type"]}};function dge({videoRef:e,canvasRef:t,onCodeUpdate:n,onElementSelect:r,onExecuteCode:s,onConfirmSelection:o,onGetPageElements:i,onPatchSourceFile:a,onListFiles:l,onReadFile:c,onClickElement:u,onNavigate:f,onScroll:m,onOpenItem:g,onOpenFile:y,onOpenFolder:v,onBrowserBack:w,onCloseBrowser:_,onApproveChange:S,onRejectChange:k,onUndoChange:R,onHighlightByNumber:O,onClearFocus:M,onSetViewport:P,onSwitchTab:j,selectedElement:q,projectFolder:U,currentUrl:z,googleApiKey:H,selectedModelId:F}){const[W,X]=x.useState({isConnected:!1,isStreaming:!1,error:null}),[J,ee]=x.useState(0),re=x.useRef(null),ie=x.useRef(null),Z=x.useCallback(xt=>{var pe;(pe=re.current)==null||pe.then(xt).catch(Ne=>{Kr.liveGemini.error("Session error:",Ne)})},[]),te=x.useRef(null),oe=x.useRef(null),Q=x.useRef(0),Te=x.useRef(new Set),ge=x.useRef(null),Ce=x.useRef(null),he=x.useRef(null),Fe=x.useRef(0),De=x.useRef(null),Re=5,tt=1e3,fe=x.useRef(null),nt=x.useCallback((xt=!1)=>{De.current&&(clearTimeout(De.current),De.current=null),xt&&(Fe.current=Re),he.current&&(clearInterval(he.current),he.current=null),ge.current&&(ge.current.disconnect(),ge.current=null),Ce.current&&(Ce.current.getTracks().forEach($e=>$e.stop()),Ce.current=null);const pe=Array.from(Te.current);Te.current.clear(),pe.forEach($e=>{try{$e.stop()}catch{}}),te.current&&(te.current.close(),te.current=null),oe.current&&(oe.current.close(),oe.current=null);const Ne=re.current;re.current=null,Ne&&Ne.then($e=>$e.close()).catch($e=>{console.error("[useLiveGemini] Error closing session:",$e)}),X($e=>({...$e,isConnected:!1,isStreaming:!1})),ee(0)},[]),ot=x.useCallback(async()=>{try{X({isConnected:!1,isStreaming:!0,error:null});const xt=H||"AIzaSyAuAGR2YNrczzJKRcqVr924j71lRqc02IU";ie.current=new uR({apiKey:xt});const pe=window.AudioContext||window.webkitAudioContext;if(!pe)throw new Error("AudioContext not supported");te.current=new pe({sampleRate:16e3}),oe.current=new pe({sampleRate:24e3}),fe.current=oe.current.createAnalyser(),fe.current.fftSize=256;const Ne=await navigator.mediaDevices.getUserMedia({audio:!0});Ce.current=Ne;const Je=`${F&&F.startsWith("gemini-")?F:"gemini-2.5-flash"}-native-audio-preview-09-2025`,Le=ie.current.live.connect({model:Je,config:{responseModalities:[F1.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Zephyr"}}},tools:[{functionDeclarations:[Ume,Hme,qme,Gme,Vme,Wme,Yme,Kme,Zme,Jme,Xme,Qme,nge,rge,ege,tge,sge,oge,ige,age,lge,cge,uge]}],systemInstruction:`You are a specialized AI UI Engineer with voice control, file browsing, element selection, and browser navigation.

          You can see the user's screen or video feed if enabled.
          You can hear the user's voice commands.

          CAPABILITIES:
           FILE BROWSER: Browse files with numbered overlay, navigate folders, view files/images
           PAGE INSPECTION: Get page elements, highlight by number, execute code
           NAVIGATION: Click links, go back/forward, scroll, navigate to URLs
           EDITING: Preview changes with execute_code, save with patch_source_file

           ELEMENT HIGHLIGHTING - USE NUMBERS, NOT CSS SELECTORS!
          Elements on the page are numbered (1, 2, 3...). Use highlight_element_by_number() to highlight them.
          This is MORE RELIABLE than CSS selectors and never causes errors.

           HIERARCHICAL FOCUSING - DRILL DOWN INTO SECTIONS:
          When you highlight an element, it becomes the FOCUS. Subsequent get_page_elements
          calls will ONLY show elements WITHIN the focused element. This lets users drill down:

          Example conversation:
          User: "show me the page"  get_page_elements()
          You: "I see 20 elements. The header is #1, main section #5, footer #12"
          User: "that middle section"  highlight_element_by_number(5) - SETS FOCUS
          You: "Now focused on the main section"
          User: "what's in there?"  get_page_elements() - now shows ONLY elements inside #5
          You: "Within the main section: 3 buttons (#1, #2, #3)"
          User: "the left one"  highlight_element_by_number(1)
          User: "zoom out"  clear_focus() then get_page_elements() - shows all again

          WORKFLOW:
          1. get_page_elements() - shows all page elements numbered
          2. User picks a section  highlight_element_by_number(N) - sets focus to that section
          3. get_page_elements() - now ONLY shows children of focused section
          4. User: "clear focus" / "zoom out"  clear_focus() to see full page again

          NUMBER-BASED COMMANDS:
          - "highlight 3" / "number 3"  highlight_element_by_number(3)
          - "that section" / "the header"  highlight to set focus
          - "clear focus" / "zoom out" / "show all"  clear_focus()
          - "show me the buttons"  get_page_elements('buttons')

           IMPORTANT: highlight_element_by_number sets FOCUS for drilling down.
          Use execute_code or update_ui for actual code changes.

          FILE BROWSER OVERLAY:
          When user asks to see files ("show files", "list files", "check the public folder"), use list_files.
          This shows a numbered overlay. User can then say "open 3" to navigate.

          FILE BROWSER COMMANDS:
          - "show me the files" / "list files"  list_files()
          - "check the public folder"  list_files("public")
          - "open 3" / "open three" / "number 3"  open_item(3) OR open_folder({ itemNumber: 3 })
          - "open the src folder" / "go into hooks"  open_folder({ name: "src" })
          - "open LandingPage.tsx" / "show me App.tsx"  open_file({ name: "LandingPage.tsx" })
          - "go back" (in file browser)  browser_back()
          - "close that" / "clear" / "enough" / "dismiss"  close_browser()

          FILE TOOLS:
          - open_file: Open a specific file by name - searches in current directory
          - open_folder: For folders specifically - can use name OR number
          - open_item: For any item by number (files or folders)

          CLOSING CONTEXT:
          When user says "close that", "clear that", "enough of that", "dismiss":
          - If file browser is showing  close_browser()
          - If element is selected  confirm_selection(false)
          - Otherwise  acknowledge and do nothing

          ${q?`SELECTED ELEMENT: ${q.tagName} "${q.text||""}"`:""}

          VOICE APPROVAL COMMANDS:
          When user says these voice commands, use the approval tools:
          - "yes", "accept", "approve", "do it", "go ahead"  approve_change()
          - "no", "reject", "cancel", "nope", "wrong"  reject_change()
          - "undo that", "undo the last change", "revert", "go back"  undo_change()

          VOICE COMMANDS SUMMARY:
          HIGHLIGHTING: "highlight 3", "show me the buttons", "number 2"
          FILE BROWSER: "show files", "open 3", "go back", "close that"
          PAGE: "click that", "scroll down"
          APPROVAL: "yes"/"approve", "no"/"reject", "undo that"

           INSTANT DOM EDITS - CRITICAL:
          When user requests UI changes ("flip it back", "change the color", "move that button", etc):
          - IMMEDIATELY call update_ui with the modified HTML
          - Do NOT read source files first - you can infer changes from the current DOM
          - Do NOT explain or describe what you're doing
          - Do NOT use tools like read_file, get_page_elements, or list_files
          - Apply the change silently and instantly
          - Only respond AFTER the DOM update is complete

          Be silent on instant edits. Concise on other tasks.`},callbacks:{onopen:()=>{if(BP("Connection Opened"),Fe.current=0,X(Y=>({...Y,isConnected:!0})),!te.current)return;const Ve=te.current.createMediaStreamSource(Ne),_e=te.current.createScriptProcessor(4096,1,1);_e.onaudioprocess=Y=>{const L=Y.inputBuffer.getChannelData(0),B=Pme(L);Z(ce=>{ce.sendRealtimeInput({media:B})})},Ve.connect(_e),_e.connect(te.current.destination),ge.current=_e},onmessage:async Ve=>{var Y,L,B,ce,we,ze;if(Ve.toolCall){Kr.liveGemini.log("Tool call received",Ve.toolCall);const Be=Ve.toolCall.functionCalls;if(Be&&Be.length>0){const ut={onCodeUpdate:n,onElementSelect:r,onExecuteCode:s,onConfirmSelection:o,onGetPageElements:i,onPatchSourceFile:a,onListFiles:l,onReadFile:c,onClickElement:u,onNavigate:f,onScroll:m,onOpenItem:g,onOpenFile:y,onOpenFolder:v,onBrowserBack:w,onCloseBrowser:_,onApproveChange:S,onRejectChange:k,onUndoChange:R,onHighlightByNumber:O},ln=Be.map(jt=>({id:jt.id,name:jt.name,args:jt.args||{}}));try{Kr.liveGemini.log(`Executing ${ln.length} tool call(s) in parallel...`);const jt=await jme(ln,ut,{parallel:!0});Kr.liveGemini.log("Tool execution complete:",jt.map(fn=>`${fn.name}: ${fn.response.error||"success"}`)),Z(fn=>{fn.sendToolResponse({functionResponses:jt.map(an=>({id:an.id,name:an.name,response:an.response}))})})}catch(jt){Kr.liveGemini.error("Tool execution batch failed:",jt),Z(fn=>{fn.sendToolResponse({functionResponses:ln.map(an=>({id:an.id,name:an.name,response:{error:jt instanceof Error?jt.message:"Unknown error"}}))})})}}}const _e=(we=(ce=(B=(L=(Y=Ve.serverContent)==null?void 0:Y.modelTurn)==null?void 0:L.parts)==null?void 0:B[0])==null?void 0:ce.inlineData)==null?void 0:we.data;if(_e&&oe.current){const Be=oe.current,ut=Lme(_e),ln=await pq(ut,Be,24e3),jt=Be.currentTime;Q.current=Math.max(Q.current,jt);const fn=Be.createBufferSource();fn.buffer=ln,fe.current?(fn.connect(fe.current),fe.current.connect(Be.destination)):fn.connect(Be.destination),fn.start(Q.current),Q.current+=ln.duration,fn.onended=()=>{Te.current.delete(fn)},Te.current.add(fn)}(ze=Ve.serverContent)!=null&&ze.interrupted&&(Te.current.forEach(Be=>Be.stop()),Te.current.clear(),Q.current=0)},onclose:()=>{BP("Connection Closed - Auto-reconnecting"),Kr.liveGemini.log("Stream closed, auto-reconnecting to maintain persistent connection..."),Fe.current=0,ot().catch(Ve=>{Kr.liveGemini.error("Auto-reconnect failed:",Ve),X(_e=>({..._e,error:"Auto-reconnect failed. Click connect to try again."}))})},onerror:Ve=>{if(Kr.liveGemini.error("Connection Error",Ve),Fe.current<Re){const _e=tt*Math.pow(2,Fe.current);Kr.liveGemini.log(`Error reconnect attempt ${Fe.current+1}/${Re} in ${_e}ms`),Fe.current++,De.current=window.setTimeout(()=>{Kr.liveGemini.log("Attempting reconnect after error..."),ot().catch(Y=>{Kr.liveGemini.error("Error reconnect failed:",Y)})},_e)}else Kr.liveGemini.log("Max reconnect attempts reached after error"),X(_e=>({..._e,error:"Connection failed. Please try again."})),nt()}}});re.current=Le}catch(xt){Kr.liveGemini.error(xt),X(pe=>({...pe,error:xt instanceof Error?xt.message:"Failed to connect"})),nt()}},[nt,n,r,s,o,S,k,R,q,H,F]),Ht=x.useCallback(()=>{if(he.current)return;const xt=1;he.current=window.setInterval(async()=>{if(!e.current||!t.current||!re.current)return;const pe=e.current,Ne=t.current,$e=Ne.getContext("2d");if(!$e||pe.readyState<2)return;const Je=640/pe.videoWidth,Le=640,Ve=pe.videoHeight*Je;Ne.width=Le,Ne.height=Ve,$e.drawImage(pe,0,0,Le,Ve);const _e=Ne.toDataURL("image/jpeg",.5).split(",")[1];re.current.then(Y=>{Y.sendRealtimeInput({media:{mimeType:"image/jpeg",data:_e}})})},1e3/xt)},[e,t]),qt=x.useCallback(()=>{he.current&&(clearInterval(he.current),he.current=null)},[]);x.useEffect(()=>{if(!W.isConnected)return;const xt=setInterval(()=>{if(fe.current){const pe=new Uint8Array(fe.current.frequencyBinCount);fe.current.getByteFrequencyData(pe);let Ne=0;for(let Je=0;Je<pe.length;Je++)Ne+=pe[Je];const $e=Ne/pe.length;ee($e)}},50);return()=>clearInterval(xt)},[W.isConnected]);const Pt=x.useCallback(()=>{const xt=Array.from(Te.current);Te.current.clear(),xt.forEach(pe=>{try{pe.stop()}catch{}}),Q.current=0},[]),tn=x.useCallback(()=>{nt(!0)},[nt]);return{streamState:W,connect:ot,disconnect:tn,startVideoStreaming:Ht,stopVideoStreaming:qt,stopSpeaking:Pt,volume:J}}function fge(){var m;const[e,t]=x.useState({currentBranch:"main",branches:[],hasChanges:!1,changedFiles:[],isLoading:!0,error:null}),n=typeof window<"u"&&((m=window.electronAPI)==null?void 0:m.git),r=x.useCallback(async()=>{var y;if(!n||!((y=window.electronAPI)!=null&&y.git)){t(v=>({...v,isLoading:!1}));return}const g=window.electronAPI.git;try{const[v,w,_]=await Promise.all([g.getCurrentBranch(),g.getBranches(),g.getStatus()]);t(S=>({...S,currentBranch:v.success&&v.data?v.data:S.currentBranch,branches:w.success&&w.data?w.data:S.branches,hasChanges:_.success&&_.data?_.data.hasChanges:!1,changedFiles:_.success&&_.data?_.data.files:[],isLoading:!1,error:null}))}catch(v){t(w=>({...w,isLoading:!1,error:v instanceof Error?v.message:"Git error"}))}},[n]);x.useEffect(()=>{r();const g=setInterval(r,5e3);return()=>clearInterval(g)},[r]);const s=x.useCallback(async g=>{var w;const y=(w=window.electronAPI)==null?void 0:w.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.checkout(g);return v.success&&await r(),v},[n,r]),o=x.useCallback(async g=>{var w;const y=(w=window.electronAPI)==null?void 0:w.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.createBranch(g);return v.success&&await r(),v},[n,r]),i=x.useCallback(async g=>{var w;const y=(w=window.electronAPI)==null?void 0:w.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.commit(g);return v.success&&await r(),v},[n,r]),a=x.useCallback(async()=>{var y;const g=(y=window.electronAPI)==null?void 0:y.git;return!n||!g?{success:!1,error:"Not in Electron"}:await g.push()},[n]),l=x.useCallback(async()=>{var v;const g=(v=window.electronAPI)==null?void 0:v.git;if(!n||!g)return{success:!1,error:"Not in Electron"};const y=await g.pull();return y.success&&await r(),y},[n,r]),c=x.useCallback(async()=>{var v;const g=(v=window.electronAPI)==null?void 0:v.git;if(!n||!g)return{success:!1,error:"Not in Electron"};const y=await g.stash();return y.success&&await r(),y},[n,r]),u=x.useCallback(async g=>{var w;const y=(w=window.electronAPI)==null?void 0:w.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.stashWithMessage(g);return v.success&&await r(),v},[n,r]),f=x.useCallback(async()=>{var v;const g=(v=window.electronAPI)==null?void 0:v.git;if(!n||!g)return{success:!1,error:"Not in Electron"};const y=await g.stashPop();return y.success&&await r(),y},[n,r]);return{...e,isElectron:n,refresh:r,checkout:s,createBranch:o,commit:i,push:a,pull:l,stash:c,stashWithMessage:u,stashPop:f}}const hge="system-default",hN=[{id:"system-default",name:"System Default",description:"Use system light/dark mode preferences"},{id:"tokyo-night",name:"Tokyo Night",description:"A dark theme inspired by Tokyo",colors:{background:"#1a1b26",foreground:"#c0caf5",primary:"#7aa2f7",secondary:"#bb9af7",accent:"#7dcfff",border:"#3b3f5c",success:"#9ece6a",error:"#f7768e",warning:"#e0af68",info:"#7aa2f7"}},{id:"dracula",name:"Dracula",description:"A dark theme with vibrant colors",colors:{background:"#282a36",foreground:"#f8f8f2",primary:"#bd93f9",secondary:"#ff79c6",accent:"#8be9fd",border:"#44475a",success:"#50fa7b",error:"#ff5555",warning:"#f1fa8c",info:"#8be9fd"}},{id:"nord",name:"Nord",description:"An arctic, north-bluish color palette",colors:{background:"#2e3440",foreground:"#d8dee9",primary:"#81a1c1",secondary:"#b48ead",accent:"#88c0d0",border:"#3b4252",success:"#a3be8c",error:"#bf616a",warning:"#ebcb8b",info:"#81a1c1"}},{id:"gruvbox-dark",name:"Gruvbox Dark",description:"Retro groove color scheme",colors:{background:"#282828",foreground:"#ebdbb2",primary:"#458588",secondary:"#b16286",accent:"#689d6a",border:"#3c3836",success:"#98971a",error:"#cc241d",warning:"#d79921",info:"#458588"}},{id:"one-dark",name:"One Dark",description:"Atom One Dark theme",colors:{background:"#282c34",foreground:"#abb2bf",primary:"#61afef",secondary:"#c678dd",accent:"#56b6c2",border:"#3e4451",success:"#98c379",error:"#e06c75",warning:"#e5c07b",info:"#61afef"}},{id:"catppuccin-mocha",name:"Catppuccin Mocha",description:"Soothing pastel theme",colors:{background:"#1e1e2e",foreground:"#cdd6f4",primary:"#89b4fa",secondary:"#f5c2e7",accent:"#94e2d5",border:"#313244",success:"#a6e3a1",error:"#f38ba8",warning:"#f9e2af",info:"#89b4fa"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision colors for machines and people",colors:{background:"#002b36",foreground:"#839496",primary:"#268bd2",secondary:"#d33682",accent:"#2aa198",border:"#073642",success:"#859900",error:"#dc322f",warning:"#b58900",info:"#268bd2"}},{id:"monokai-pro",name:"Monokai Pro",description:"Professional monochrome-inspired theme",colors:{background:"#2d2a2e",foreground:"#fcfcfa",primary:"#fc9867",secondary:"#ab9df2",accent:"#78dce8",border:"#403e41",success:"#a9dc76",error:"#ff6188",warning:"#ffd866",info:"#fc9867"}},{id:"github-dark",name:"GitHub Dark",description:"GitHub dark mode theme",colors:{background:"#0d1117",foreground:"#c9d1d9",primary:"#58a6ff",secondary:"#bc8cff",accent:"#39c5cf",border:"#30363d",success:"#3fb950",error:"#f85149",warning:"#d29922",info:"#58a6ff"}},{id:"synthwave-84",name:"Synthwave '84",description:"Neon retro future theme",colors:{background:"#262335",foreground:"#ffffff",primary:"#03edf9",secondary:"#ff7edb",accent:"#03edf9",border:"#614d85",success:"#72f1b8",error:"#fe4450",warning:"#fede5d",info:"#03edf9"}},{id:"everforest-dark",name:"Everforest Dark",description:"Comfortable green-based color palette",colors:{background:"#2b3339",foreground:"#d4be98",primary:"#7fbbb3",secondary:"#d699b6",accent:"#83c092",border:"#374145",success:"#83c092",error:"#e68183",warning:"#dbc77d",info:"#7fbbb3"}},{id:"rose-pine-moon",name:"Rose Pine Moon",description:"All natural pine, faux fur and a bit of soho vibes",colors:{background:"#232136",foreground:"#e0def4",primary:"#9ccfd8",secondary:"#f5bde6",accent:"#ebbcba",border:"#393552",success:"#90c695",error:"#eb6f92",warning:"#f6c177",info:"#9ccfd8"}},{id:"solarized-light",name:"Solarized Light",description:"Precision colors - light variant",colors:{background:"#fdf6e3",foreground:"#657b83",primary:"#268bd2",secondary:"#d33682",accent:"#2aa198",border:"#eee8d5",success:"#859900",error:"#dc322f",warning:"#b58900",info:"#268bd2"}},{id:"github-light",name:"GitHub Light",description:"GitHub light mode theme",colors:{background:"#ffffff",foreground:"#24292f",primary:"#0969da",secondary:"#8250df",accent:"#1b7c83",border:"#d0d7de",success:"#1a7f37",error:"#cf222e",warning:"#9a6700",info:"#0969da"}},{id:"one-light",name:"One Light",description:"Atom One Light theme",colors:{background:"#fafafa",foreground:"#383a42",primary:"#4078f2",secondary:"#a626a4",accent:"#0184bc",border:"#e5e5e6",success:"#50a14f",error:"#e45649",warning:"#c18401",info:"#4078f2"}},{id:"catppuccin-latte",name:"Catppuccin Latte",description:"Soothing pastel theme - light variant",colors:{background:"#eff1f5",foreground:"#4c4f69",primary:"#1e66f5",secondary:"#ea76cb",accent:"#179299",border:"#ccd0da",success:"#40a02b",error:"#d20f39",warning:"#df8e1d",info:"#1e66f5"}},{id:"rose-pine-dawn",name:"Rose Pine Dawn",description:"All natural pine - light variant",colors:{background:"#faf4ed",foreground:"#575279",primary:"#56949f",secondary:"#d7827e",accent:"#907aa9",border:"#f2e9e1",success:"#286983",error:"#b4637a",warning:"#ea9d34",info:"#56949f"}},{id:"nord-light",name:"Nord Light",description:"Arctic color palette - light variant",colors:{background:"#eceff4",foreground:"#2e3440",primary:"#5e81ac",secondary:"#b48ead",accent:"#88c0d0",border:"#d8dee9",success:"#a3be8c",error:"#bf616a",warning:"#ebcb8b",info:"#5e81ac"}},{id:"gruvbox-light",name:"Gruvbox Light",description:"Retro groove - light variant",colors:{background:"#fbf1c7",foreground:"#3c3836",primary:"#458588",secondary:"#b16286",accent:"#689d6a",border:"#ebdbb2",success:"#98971a",error:"#cc241d",warning:"#d79921",info:"#458588"}}];function jP(e){return hN.find(t=>t.id===e)||hN[0]}function s2(e){const t=document.documentElement,n=t.classList.contains("dark")||document.body.classList.contains("dark")||document.querySelector(".dark")!==null;if(e.id==="system-default"){t.removeAttribute("data-theme"),n?(t.style.setProperty("--color-background","#171717"),t.style.setProperty("--color-foreground","#f5f5f5"),t.style.setProperty("--color-primary","#3b82f6"),t.style.setProperty("--color-secondary","#8b5cf6"),t.style.setProperty("--color-accent","#06b6d4"),t.style.setProperty("--color-border","#404040"),t.style.setProperty("--color-success","#22c55e"),t.style.setProperty("--color-error","#ef4444"),t.style.setProperty("--color-warning","#f59e0b"),t.style.setProperty("--color-info","#3b82f6"),t.style.setProperty("--color-panel","#262626"),t.style.setProperty("--color-muted","#a3a3a3"),t.style.setProperty("--color-on-primary","#ffffff"),t.style.setProperty("--color-on-secondary","#ffffff"),t.style.setProperty("--color-on-accent","#000000"),t.style.setProperty("--color-on-success","#000000"),t.style.setProperty("--color-on-error","#ffffff"),t.style.setProperty("--color-on-warning","#000000")):(t.style.setProperty("--color-background","#d6d3d1"),t.style.setProperty("--color-foreground","#171717"),t.style.setProperty("--color-primary","#2563eb"),t.style.setProperty("--color-secondary","#7c3aed"),t.style.setProperty("--color-accent","#0891b2"),t.style.setProperty("--color-border","#e7e5e4"),t.style.setProperty("--color-success","#16a34a"),t.style.setProperty("--color-error","#dc2626"),t.style.setProperty("--color-warning","#d97706"),t.style.setProperty("--color-info","#2563eb"),t.style.setProperty("--color-panel","#ffffff"),t.style.setProperty("--color-muted","#78716c"),t.style.setProperty("--color-on-primary","#ffffff"),t.style.setProperty("--color-on-secondary","#ffffff"),t.style.setProperty("--color-on-accent","#ffffff"),t.style.setProperty("--color-on-success","#ffffff"),t.style.setProperty("--color-on-error","#ffffff"),t.style.setProperty("--color-on-warning","#000000"));return}const{colors:r}=e;if(!r){t.removeAttribute("data-theme");return}t.style.setProperty("--color-background",r.background),t.style.setProperty("--color-foreground",r.foreground),t.style.setProperty("--color-primary",r.primary),t.style.setProperty("--color-secondary",r.secondary),t.style.setProperty("--color-accent",r.accent),t.style.setProperty("--color-border",r.border),t.style.setProperty("--color-success",r.success),t.style.setProperty("--color-error",r.error),t.style.setProperty("--color-warning",r.warning),t.style.setProperty("--color-info",r.info);const o=mq(r.background)<.5;o?t.style.setProperty("--color-panel",C5(r.background,25)):t.style.setProperty("--color-panel",C5(r.background,3)),t.style.setProperty("--color-muted",C5(r.foreground,o?-30:30)),t.style.setProperty("--color-on-primary",Bg(r.primary)),t.style.setProperty("--color-on-secondary",Bg(r.secondary)),t.style.setProperty("--color-on-accent",Bg(r.accent)),t.style.setProperty("--color-on-success",Bg(r.success)),t.style.setProperty("--color-on-error",Bg(r.error)),t.style.setProperty("--color-on-warning",Bg(r.warning)),t.setAttribute("data-theme",e.id)}function mq(e){e=e.replace(/^#/,"");const t=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,r=parseInt(e.substring(4,6),16)/255;return .299*t+.587*n+.114*r}function C5(e,t){e=e.replace(/^#/,"");let n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return n=Math.min(255,Math.max(0,Math.round(n+n*t/100))),r=Math.min(255,Math.max(0,Math.round(r+r*t/100))),s=Math.min(255,Math.max(0,Math.round(s+s*t/100))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}function Bg(e){return mq(e)<.5?"#ffffff":"#1a1a1a"}const gq=x.createContext(void 0);function pge({children:e}){const[t,n]=x.useState(()=>{const o=localStorage.getItem("app-theme-id");return jP(o||hge)}),r=x.useCallback(o=>{console.log("[Theme] Setting theme:",o);const i=jP(o);console.log("[Theme] Theme object:",i),n(i),localStorage.setItem("app-theme-id",o),s2(i),console.log("[Theme] Applied. Root style:",document.documentElement.style.cssText)},[]),s=x.useCallback(()=>{s2(t)},[t]);return x.useEffect(()=>{s2(t)},[t]),x.useEffect(()=>{const o=new MutationObserver(i=>{for(const a of i)a.attributeName==="class"&&s2(t)});return o.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>o.disconnect()},[t]),h.jsx(gq.Provider,{value:{currentTheme:t,setTheme:r,themes:hN,reapplyTheme:s},children:e})}function dR(){const e=x.useContext(gq);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}const mge={browser:"Cluso",kanban:"Kanban",todos:"Todos",notes:"Notes"};let UP=0;function By(e,t="browser"){const n={id:e||`tab-${Date.now()}-${++UP}`,title:mge[t],url:"",favicon:void 0,type:t,canGoBack:!1,canGoForward:!1,isLoading:!1,isWebviewReady:!1,messages:[],selectedElement:null,screenshotElement:null,capturedScreenshot:null,logs:[],pendingChange:null,aiSelectedElement:null};if(t==="kanban"){const r=`kanban-${Date.now()}-${UP}`;return{...n,title:"New Board",kanbanData:{boardId:r,boardTitle:"New Board",columns:[{id:"backlog",title:"Backlog",cards:[]},{id:"todo",title:"To Do",cards:[]},{id:"in-progress",title:"In Progress",cards:[]},{id:"done",title:"Done",cards:[]}]}}}return t==="todos"?{...n,todosData:{items:[]}}:t==="notes"?{...n,notesData:{content:""}}:n}/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gge=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bge=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),HP=e=>{const t=bge(e);return t.charAt(0).toUpperCase()+t.slice(1)},bq=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),yge=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xge=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:i,...a},l)=>x.createElement("svg",{ref:l,...vge,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:bq("lucide",s),...!o&&!yge(a)&&{"aria-hidden":"true"},...a},[...i.map(([c,u])=>x.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(e,t)=>{const n=x.forwardRef(({className:r,...s},o)=>x.createElement(xge,{ref:o,iconNode:t,className:bq(`lucide-${gge(HP(e))}`,`lucide-${e}`,r),...s}));return n.displayName=HP(e),n};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wge=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Ege=St("archive",wge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ge=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],VP=St("arrow-down",_ge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sge=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],k5=St("arrow-up",Sge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tge=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],qP=St("bell",Tge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cge=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],GP=St("book-open",Cge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kge=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],WP=St("bot",kge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Age=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],f1=St("brain",Age);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nge=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],YP=St("bug",Nge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ige=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],B1=St("calendar",Ige);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rge=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],KP=St("camera",Rge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mge=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],ZP=St("chart-no-axes-column",Mge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oge=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Cs=St("check",Oge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dge=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$f=St("chevron-down",Dge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pge=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Nf=St("chevron-right",Pge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lge=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],w1=St("chevron-left",Lge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ge=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],yq=St("chevron-up",$ge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_0=St("circle-alert",Fge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bge=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ud=St("circle-check-big",Bge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jge=St("circle-check",zge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],vq=St("circle-plus",Uge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pN=St("circle-question-mark",Hge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],mN=St("circle-x",Vge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gN=St("circle",qge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gge=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fR=St("clock",Gge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wge=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],zy=St("code-xml",Wge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yge=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],xq=St("columns-3",Yge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kge=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],wq=St("copy",Kge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zge=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Eq=St("cpu",Zge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jge=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Xge=St("database",Jge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qge=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Z_=St("download",Qge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_q=St("eye-off",e1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hR=St("eye",t1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1e=[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]],r1e=St("file-code-corner",n1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],JP=St("file-code",s1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1e=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],i1e=St("file-pen",o1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],bN=St("file-plus",a1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pR=St("file-text",l1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],lx=St("file",c1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1e=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],d1e=St("flame",u1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1e=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],h1e=St("folder-open",f1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1e=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],m1e=St("folder-search",p1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],E1=St("folder",g1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1e=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],y1e=St("git-branch",b1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1e=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],XP=St("git-compare",v1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],cu=St("globe",x1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],E1e=St("grid-3x3",w1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1e=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],S1e=St("grip-vertical",_1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1e=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],QP=St("hammer",T1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1e=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],cx=St("hard-drive",C1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],eL=St("image",k1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1e=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],tL=St("key",A1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],I1e=St("layout-grid",N1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],J_=St("lightbulb",R1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1e=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],O1e=St("list-todo",M1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1e=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],P1e=St("list",D1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],hs=St("loader-circle",L1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1e=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],nL=St("log-in",$1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1e=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],rL=St("log-out",F1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1e=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],sL=St("map",B1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Sq=St("message-square",z1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1e=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],U1e=St("mic",j1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1e=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],yN=St("monitor",H1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1e=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Tq=St("moon",V1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1e=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],o2=St("mouse-pointer-2",q1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1e=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],i2=St("move",G1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],uv=St("palette",W1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],K1e=St("panel-right",Y1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1e=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],J1e=St("paperclip",Z1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],X_=St("pencil",X1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1e=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],vN=St("play",Q1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ebe=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],tbe=St("plug",ebe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nbe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qf=St("plus",nbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rbe=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],p0=St("refresh-cw",rbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sbe=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],obe=St("rocket",sbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ibe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],abe=St("scroll-text",ibe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lbe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Gf=St("search",lbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cbe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ube=St("send",cbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dbe=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Cq=St("server",dbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fbe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Q_=St("settings",fbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hbe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],oL=St("shield-check",hbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pbe=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],kq=St("sliders-horizontal",pbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mbe=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],A5=St("smartphone",mbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gbe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],mR=St("sparkles",gbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bbe=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Aq=St("square-check-big",bbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ybe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],vbe=St("square-pen",ybe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xbe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Nq=St("square",xbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wbe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],iL=St("star",wbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ebe=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Iq=St("sun",Ebe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _be=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],N5=St("tablet",_be);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sbe=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],dd=St("terminal",Sbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tbe=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],aL=St("test-tube",Tbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cbe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ff=St("trash-2",Cbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kbe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Rq=St("triangle-alert",kbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Abe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Nbe=St("upload",Abe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ibe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Mq=St("wrench",Ibe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rbe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qr=St("x",Rbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mbe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Yl=St("zap",Mbe),Obe=[{type:"browser",label:"Browser",icon:cu,description:"Web browser"},{type:"kanban",label:"Kanban",icon:xq,description:"Project board"},{type:"todos",label:"Todos",icon:Aq,description:"Task list"},{type:"notes",label:"Notes",icon:pR,description:"Rich text notes"}];function Dbe(e){switch(e){case"browser":return cu;case"kanban":return xq;case"todos":return Aq;case"notes":return pR;default:return cu}}function Pbe({tabs:e,activeTabId:t,onTabSelect:n,onTabClose:r,onNewTab:s,onReorderTabs:o,isDarkMode:i,onToggleDarkMode:a,onOpenSettings:l,fastApplyReady:c,fastApplyLoading:u,fileWatcherActive:f}){const{currentTheme:m}=dR(),[g,y]=x.useState(!1),[v,w]=x.useState(null),[_,S]=x.useState(null),k=x.useRef(null),R=x.useRef(null),O=x.useRef(null),M=m.colors,P=(M==null?void 0:M.background)||(i?"#171717":"#d6d3d1");M!=null&&M.foreground,M!=null&&M.border;const j=()=>{k.current&&(clearTimeout(k.current),k.current=null),y(!0)},q=()=>{k.current=setTimeout(()=>{y(!1)},150)},U=()=>{k.current&&(clearTimeout(k.current),k.current=null)};x.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]);const z=ee=>{y(!1),s(ee)},H=(ee,re)=>{w(re),ee.dataTransfer.effectAllowed="move",ee.dataTransfer.setData("text/plain",re),requestAnimationFrame(()=>{const ie=ee.target;ie.style.opacity="0.5"})},F=ee=>{const re=ee.target;re.style.opacity="1",w(null),S(null)},W=(ee,re)=>{ee.preventDefault(),ee.dataTransfer.dropEffect="move",re!==v&&S(re)},X=()=>{S(null)},J=(ee,re)=>{if(ee.preventDefault(),!v||v===re||!o)return;const ie=e.findIndex(Q=>Q.id===v),Z=e.findIndex(Q=>Q.id===re);if(ie===-1||Z===-1)return;const te=[...e],[oe]=te.splice(ie,1);te.splice(Z,0,oe),o(te),w(null),S(null)};return h.jsxs("div",{className:"h-11 flex items-center justify-between select-none",style:{WebkitAppRegion:"drag",backgroundColor:P},children:[h.jsx("div",{className:"w-20 flex-shrink-0"}),h.jsxs("div",{className:"flex-1 flex items-center gap-0.5 h-full overflow-x-auto overflow-y-visible px-1",style:{WebkitAppRegion:"no-drag"},children:[e.map(ee=>{const re=Dbe(ee.type||"browser"),ie=v===ee.id,Z=_===ee.id;return h.jsxs("div",{draggable:!!o,onDragStart:te=>H(te,ee.id),onDragEnd:F,onDragOver:te=>W(te,ee.id),onDragLeave:X,onDrop:te=>J(te,ee.id),onClick:()=>n(ee.id),className:`
                group relative flex items-center gap-2 h-8 px-3 rounded-lg cursor-pointer
                transition-all duration-150 min-w-[120px] max-w-[200px]
                ${ee.id===t?i?"bg-neutral-700/80 text-white":"bg-white text-stone-900 shadow-sm":i?"text-neutral-400 hover:bg-neutral-800 hover:text-neutral-200":"text-stone-500 hover:bg-stone-200/60 hover:text-stone-700"}
                ${ie?"opacity-50":""}
                ${Z?i?"ring-2 ring-violet-500":"ring-2 ring-violet-400":""}
              `,style:{position:"relative",top:"3px"},children:[ee.isProject?h.jsx(h1e,{size:14,className:"flex-shrink-0 text-amber-500"}):ee.type==="browser"&&ee.favicon?h.jsx("img",{src:ee.favicon,alt:"",className:"w-4 h-4 flex-shrink-0"}):h.jsx(re,{size:14,className:"flex-shrink-0"}),h.jsx("span",{className:"text-xs font-medium truncate flex-1",children:ee.title}),e.length>1&&h.jsx("button",{onClick:te=>{te.stopPropagation(),r(ee.id)},className:`
                    w-4 h-4 rounded flex items-center justify-center flex-shrink-0
                    opacity-0 group-hover:opacity-100 transition-opacity
                    ${i?"hover:bg-neutral-600 text-neutral-400 hover:text-white":"hover:bg-stone-300 text-stone-400 hover:text-stone-700"}
                  `,children:h.jsx(qr,{size:12})})]},ee.id)}),h.jsxs("div",{className:"relative",style:{top:"3px"},children:[h.jsx("button",{ref:R,onClick:()=>s("browser"),onMouseEnter:j,onMouseLeave:q,className:`
              w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0
              transition-colors
              ${i?"text-neutral-500 hover:bg-neutral-800 hover:text-neutral-300":"text-stone-400 hover:bg-stone-200 hover:text-stone-600"}
            `,title:"New tab",children:h.jsx(qf,{size:16})}),g&&R.current&&h.jsx("div",{ref:O,onMouseEnter:U,onMouseLeave:q,className:`fixed py-1 rounded-lg shadow-xl border z-[9999] min-w-[160px] ${i?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,style:{top:R.current.getBoundingClientRect().bottom+4,left:R.current.getBoundingClientRect().left,WebkitAppRegion:"no-drag"},children:Obe.map(({type:ee,label:re,icon:ie,description:Z})=>h.jsxs("button",{onClick:()=>z(ee),className:`w-full flex items-center gap-3 px-3 py-2 text-left transition-colors ${i?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-100 text-stone-700"}`,children:[h.jsx(ie,{size:16,className:i?"text-neutral-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"text-sm font-medium",children:re}),h.jsx("div",{className:`text-xs ${i?"text-neutral-500":"text-stone-400"}`,children:Z})]})]},ee))})]})]}),h.jsxs("div",{className:"flex items-center gap-1.5 pr-3 flex-shrink-0",style:{WebkitAppRegion:"no-drag"},children:[f&&h.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur-md transition-all ${i?"bg-gradient-to-r from-emerald-500/20 to-teal-500/20 text-emerald-300 border border-emerald-500/30 shadow-lg shadow-emerald-500/10":"bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700 border border-emerald-300/50 shadow-sm"}`,title:"File watcher active - monitoring project for changes",children:[h.jsx(hR,{size:10,className:i?"text-emerald-400":"text-emerald-600"}),h.jsx("span",{children:"Watching"})]}),(c||u)&&h.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur-md transition-all ${u?i?"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 text-blue-300 border border-blue-500/30 shadow-lg shadow-blue-500/10":"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 border border-blue-300/50 shadow-sm":i?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 border border-yellow-500/30 shadow-lg shadow-yellow-500/10":"bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-700 border border-yellow-300/50 shadow-sm"}`,title:u?"Fast Apply is loading...":"Fast Apply is ready - local AI model loaded",children:[h.jsx(Yl,{size:10,className:u?i?"text-blue-400 animate-pulse":"text-blue-600 animate-pulse":i?"text-yellow-400":"text-yellow-600"}),h.jsx("span",{children:u?"Loading...":"Ready"})]}),m.id==="system-default"&&h.jsx("button",{onClick:a,className:`w-7 h-7 rounded-full flex items-center justify-center transition-colors ${i?"hover:bg-neutral-700 text-yellow-400":"hover:bg-stone-200 text-stone-500"}`,title:i?"Switch to Light Mode":"Switch to Dark Mode",children:i?h.jsx(Iq,{size:14}):h.jsx(Tq,{size:14})}),h.jsx("button",{onClick:l,className:`w-7 h-7 rounded-full flex items-center justify-center transition-colors ${i?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Settings",children:h.jsx(Q_,{size:14})})]})]})}function Oq(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Oq(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function gR(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Oq(e))&&(r&&(r+=" "),r+=t);return r}const Lbe=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},$be=(e,t)=>({classGroupId:e,validator:t}),Dq=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),eS="-",lL=[],Fbe="arbitrary..",Bbe=e=>{const t=jbe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return zbe(i);const a=i.split(eS),l=a[0]===""&&a.length>1?1:0;return Pq(a,l,t)},getConflictingClassGroupIds:(i,a)=>{if(a){const l=r[i],c=n[i];return l?c?Lbe(c,l):l:c||lL}return n[i]||lL}}},Pq=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const s=e[t],o=n.nextPart.get(s);if(o){const c=Pq(e,t+1,o);if(c)return c}const i=n.validators;if(i===null)return;const a=t===0?e.join(eS):e.slice(t).join(eS),l=i.length;for(let c=0;c<l;c++){const u=i[c];if(u.validator(a))return u.classGroupId}},zbe=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?Fbe+r:void 0})(),jbe=e=>{const{theme:t,classGroups:n}=e;return Ube(n,t)},Ube=(e,t)=>{const n=Dq();for(const r in e){const s=e[r];bR(s,n,r,t)}return n},bR=(e,t,n,r)=>{const s=e.length;for(let o=0;o<s;o++){const i=e[o];Hbe(i,t,n,r)}},Hbe=(e,t,n,r)=>{if(typeof e=="string"){Vbe(e,t,n);return}if(typeof e=="function"){qbe(e,t,n,r);return}Gbe(e,t,n,r)},Vbe=(e,t,n)=>{const r=e===""?t:Lq(t,e);r.classGroupId=n},qbe=(e,t,n,r)=>{if(Wbe(e)){bR(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push($be(n,e))},Gbe=(e,t,n,r)=>{const s=Object.entries(e),o=s.length;for(let i=0;i<o;i++){const[a,l]=s[i];bR(l,Lq(t,a),n,r)}},Lq=(e,t)=>{let n=e;const r=t.split(eS),s=r.length;for(let o=0;o<s;o++){const i=r[o];let a=n.nextPart.get(i);a||(a=Dq(),n.nextPart.set(i,a)),n=a}return n},Wbe=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Ybe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const s=(o,i)=>{n[o]=i,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(o){let i=n[o];if(i!==void 0)return i;if((i=r[o])!==void 0)return s(o,i),i},set(o,i){o in n?n[o]=i:s(o,i)}}},xN="!",cL=":",Kbe=[],uL=(e,t,n,r,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),Zbe=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const o=[];let i=0,a=0,l=0,c;const u=s.length;for(let v=0;v<u;v++){const w=s[v];if(i===0&&a===0){if(w===cL){o.push(s.slice(l,v)),l=v+1;continue}if(w==="/"){c=v;continue}}w==="["?i++:w==="]"?i--:w==="("?a++:w===")"&&a--}const f=o.length===0?s:s.slice(l);let m=f,g=!1;f.endsWith(xN)?(m=f.slice(0,-1),g=!0):f.startsWith(xN)&&(m=f.slice(1),g=!0);const y=c&&c>l?c-l:void 0;return uL(o,g,m,y)};if(t){const s=t+cL,o=r;r=i=>i.startsWith(s)?o(i.slice(s.length)):uL(Kbe,!1,i,void 0,!0)}if(n){const s=r;r=o=>n({className:o,parseClassName:s})}return r},Jbe=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let o=0;o<n.length;o++){const i=n[o],a=i[0]==="[",l=t.has(i);a||l?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(i)):s.push(i)}return s.length>0&&(s.sort(),r.push(...s)),r}},Xbe=e=>({cache:Ybe(e.cacheSize),parseClassName:Zbe(e),sortModifiers:Jbe(e),...Bbe(e)}),Qbe=/\s+/,eye=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=t,i=[],a=e.trim().split(Qbe);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:f,modifiers:m,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:v}=n(u);if(f){l=u+(l.length>0?" "+l:l);continue}let w=!!v,_=r(w?y.substring(0,v):y);if(!_){if(!w){l=u+(l.length>0?" "+l:l);continue}if(_=r(y),!_){l=u+(l.length>0?" "+l:l);continue}w=!1}const S=m.length===0?"":m.length===1?m[0]:o(m).join(":"),k=g?S+xN:S,R=k+_;if(i.indexOf(R)>-1)continue;i.push(R);const O=s(_,w);for(let M=0;M<O.length;++M){const P=O[M];i.push(k+P)}l=u+(l.length>0?" "+l:l)}return l},tye=(...e)=>{let t=0,n,r,s="";for(;t<e.length;)(n=e[t++])&&(r=$q(n))&&(s&&(s+=" "),s+=r);return s},$q=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=$q(e[r]))&&(n&&(n+=" "),n+=t);return n},nye=(e,...t)=>{let n,r,s,o;const i=l=>{const c=t.reduce((u,f)=>f(u),e());return n=Xbe(c),r=n.cache.get,s=n.cache.set,o=a,a(l)},a=l=>{const c=r(l);if(c)return c;const u=eye(l,n);return s(l,u),u};return o=i,(...l)=>o(tye(...l))},rye=[],Ci=e=>{const t=n=>n[e]||rye;return t.isThemeGetter=!0,t},Fq=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Bq=/^\((?:(\w[\w-]*):)?(.+)\)$/i,sye=/^\d+\/\d+$/,oye=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iye=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aye=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,lye=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cye=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zg=e=>sye.test(e),Tr=e=>!!e&&!Number.isNaN(Number(e)),qh=e=>!!e&&Number.isInteger(Number(e)),I5=e=>e.endsWith("%")&&Tr(e.slice(0,-1)),hf=e=>oye.test(e),uye=()=>!0,dye=e=>iye.test(e)&&!aye.test(e),zq=()=>!1,fye=e=>lye.test(e),hye=e=>cye.test(e),pye=e=>!gn(e)&&!bn(e),mye=e=>vb(e,Hq,zq),gn=e=>Fq.test(e),Dp=e=>vb(e,Vq,dye),R5=e=>vb(e,xye,Tr),dL=e=>vb(e,jq,zq),gye=e=>vb(e,Uq,hye),a2=e=>vb(e,qq,fye),bn=e=>Bq.test(e),jy=e=>xb(e,Vq),bye=e=>xb(e,wye),fL=e=>xb(e,jq),yye=e=>xb(e,Hq),vye=e=>xb(e,Uq),l2=e=>xb(e,qq,!0),vb=(e,t,n)=>{const r=Fq.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},xb=(e,t,n=!1)=>{const r=Bq.exec(e);return r?r[1]?t(r[1]):n:!1},jq=e=>e==="position"||e==="percentage",Uq=e=>e==="image"||e==="url",Hq=e=>e==="length"||e==="size"||e==="bg-size",Vq=e=>e==="length",xye=e=>e==="number",wye=e=>e==="family-name",qq=e=>e==="shadow",Eye=()=>{const e=Ci("color"),t=Ci("font"),n=Ci("text"),r=Ci("font-weight"),s=Ci("tracking"),o=Ci("leading"),i=Ci("breakpoint"),a=Ci("container"),l=Ci("spacing"),c=Ci("radius"),u=Ci("shadow"),f=Ci("inset-shadow"),m=Ci("text-shadow"),g=Ci("drop-shadow"),y=Ci("blur"),v=Ci("perspective"),w=Ci("aspect"),_=Ci("ease"),S=Ci("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...R(),bn,gn],M=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],j=()=>[bn,gn,l],q=()=>[zg,"full","auto",...j()],U=()=>[qh,"none","subgrid",bn,gn],z=()=>["auto",{span:["full",qh,bn,gn]},qh,bn,gn],H=()=>[qh,"auto",bn,gn],F=()=>["auto","min","max","fr",bn,gn],W=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],X=()=>["start","end","center","stretch","center-safe","end-safe"],J=()=>["auto",...j()],ee=()=>[zg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],re=()=>[e,bn,gn],ie=()=>[...R(),fL,dL,{position:[bn,gn]}],Z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],te=()=>["auto","cover","contain",yye,mye,{size:[bn,gn]}],oe=()=>[I5,jy,Dp],Q=()=>["","none","full",c,bn,gn],Te=()=>["",Tr,jy,Dp],ge=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>[Tr,I5,fL,dL],Fe=()=>["","none",y,bn,gn],De=()=>["none",Tr,bn,gn],Re=()=>["none",Tr,bn,gn],tt=()=>[Tr,bn,gn],fe=()=>[zg,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[hf],breakpoint:[hf],color:[uye],container:[hf],"drop-shadow":[hf],ease:["in","out","in-out"],font:[pye],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[hf],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[hf],shadow:[hf],spacing:["px",Tr],text:[hf],"text-shadow":[hf],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",zg,gn,bn,w]}],container:["container"],columns:[{columns:[Tr,gn,bn,a]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:q()}],"inset-x":[{"inset-x":q()}],"inset-y":[{"inset-y":q()}],start:[{start:q()}],end:[{end:q()}],top:[{top:q()}],right:[{right:q()}],bottom:[{bottom:q()}],left:[{left:q()}],visibility:["visible","invisible","collapse"],z:[{z:[qh,"auto",bn,gn]}],basis:[{basis:[zg,"full","auto",a,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Tr,zg,"auto","initial","none",gn]}],grow:[{grow:["",Tr,bn,gn]}],shrink:[{shrink:["",Tr,bn,gn]}],order:[{order:[qh,"first","last","none",bn,gn]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:z()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:z()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...W(),"normal"]}],"justify-items":[{"justify-items":[...X(),"normal"]}],"justify-self":[{"justify-self":["auto",...X()]}],"align-content":[{content:["normal",...W()]}],"align-items":[{items:[...X(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...X(),{baseline:["","last"]}]}],"place-content":[{"place-content":W()}],"place-items":[{"place-items":[...X(),"baseline"]}],"place-self":[{"place-self":["auto",...X()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:J()}],mx:[{mx:J()}],my:[{my:J()}],ms:[{ms:J()}],me:[{me:J()}],mt:[{mt:J()}],mr:[{mr:J()}],mb:[{mb:J()}],ml:[{ml:J()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:ee()}],w:[{w:[a,"screen",...ee()]}],"min-w":[{"min-w":[a,"screen","none",...ee()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[i]},...ee()]}],h:[{h:["screen","lh",...ee()]}],"min-h":[{"min-h":["screen","lh","none",...ee()]}],"max-h":[{"max-h":["screen","lh",...ee()]}],"font-size":[{text:["base",n,jy,Dp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,bn,R5]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",I5,gn]}],"font-family":[{font:[bye,gn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,bn,gn]}],"line-clamp":[{"line-clamp":[Tr,"none",bn,R5]}],leading:[{leading:[o,...j()]}],"list-image":[{"list-image":["none",bn,gn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",bn,gn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:re()}],"text-color":[{text:re()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[Tr,"from-font","auto",bn,Dp]}],"text-decoration-color":[{decoration:re()}],"underline-offset":[{"underline-offset":[Tr,"auto",bn,gn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",bn,gn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",bn,gn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:Z()}],"bg-size":[{bg:te()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},qh,bn,gn],radial:["",bn,gn],conic:[qh,bn,gn]},vye,gye]}],"bg-color":[{bg:re()}],"gradient-from-pos":[{from:oe()}],"gradient-via-pos":[{via:oe()}],"gradient-to-pos":[{to:oe()}],"gradient-from":[{from:re()}],"gradient-via":[{via:re()}],"gradient-to":[{to:re()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:Te()}],"border-w-x":[{"border-x":Te()}],"border-w-y":[{"border-y":Te()}],"border-w-s":[{"border-s":Te()}],"border-w-e":[{"border-e":Te()}],"border-w-t":[{"border-t":Te()}],"border-w-r":[{"border-r":Te()}],"border-w-b":[{"border-b":Te()}],"border-w-l":[{"border-l":Te()}],"divide-x":[{"divide-x":Te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ge(),"hidden","none"]}],"divide-style":[{divide:[...ge(),"hidden","none"]}],"border-color":[{border:re()}],"border-color-x":[{"border-x":re()}],"border-color-y":[{"border-y":re()}],"border-color-s":[{"border-s":re()}],"border-color-e":[{"border-e":re()}],"border-color-t":[{"border-t":re()}],"border-color-r":[{"border-r":re()}],"border-color-b":[{"border-b":re()}],"border-color-l":[{"border-l":re()}],"divide-color":[{divide:re()}],"outline-style":[{outline:[...ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Tr,bn,gn]}],"outline-w":[{outline:["",Tr,jy,Dp]}],"outline-color":[{outline:re()}],shadow:[{shadow:["","none",u,l2,a2]}],"shadow-color":[{shadow:re()}],"inset-shadow":[{"inset-shadow":["none",f,l2,a2]}],"inset-shadow-color":[{"inset-shadow":re()}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:re()}],"ring-offset-w":[{"ring-offset":[Tr,Dp]}],"ring-offset-color":[{"ring-offset":re()}],"inset-ring-w":[{"inset-ring":Te()}],"inset-ring-color":[{"inset-ring":re()}],"text-shadow":[{"text-shadow":["none",m,l2,a2]}],"text-shadow-color":[{"text-shadow":re()}],opacity:[{opacity:[Tr,bn,gn]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Tr]}],"mask-image-linear-from-pos":[{"mask-linear-from":he()}],"mask-image-linear-to-pos":[{"mask-linear-to":he()}],"mask-image-linear-from-color":[{"mask-linear-from":re()}],"mask-image-linear-to-color":[{"mask-linear-to":re()}],"mask-image-t-from-pos":[{"mask-t-from":he()}],"mask-image-t-to-pos":[{"mask-t-to":he()}],"mask-image-t-from-color":[{"mask-t-from":re()}],"mask-image-t-to-color":[{"mask-t-to":re()}],"mask-image-r-from-pos":[{"mask-r-from":he()}],"mask-image-r-to-pos":[{"mask-r-to":he()}],"mask-image-r-from-color":[{"mask-r-from":re()}],"mask-image-r-to-color":[{"mask-r-to":re()}],"mask-image-b-from-pos":[{"mask-b-from":he()}],"mask-image-b-to-pos":[{"mask-b-to":he()}],"mask-image-b-from-color":[{"mask-b-from":re()}],"mask-image-b-to-color":[{"mask-b-to":re()}],"mask-image-l-from-pos":[{"mask-l-from":he()}],"mask-image-l-to-pos":[{"mask-l-to":he()}],"mask-image-l-from-color":[{"mask-l-from":re()}],"mask-image-l-to-color":[{"mask-l-to":re()}],"mask-image-x-from-pos":[{"mask-x-from":he()}],"mask-image-x-to-pos":[{"mask-x-to":he()}],"mask-image-x-from-color":[{"mask-x-from":re()}],"mask-image-x-to-color":[{"mask-x-to":re()}],"mask-image-y-from-pos":[{"mask-y-from":he()}],"mask-image-y-to-pos":[{"mask-y-to":he()}],"mask-image-y-from-color":[{"mask-y-from":re()}],"mask-image-y-to-color":[{"mask-y-to":re()}],"mask-image-radial":[{"mask-radial":[bn,gn]}],"mask-image-radial-from-pos":[{"mask-radial-from":he()}],"mask-image-radial-to-pos":[{"mask-radial-to":he()}],"mask-image-radial-from-color":[{"mask-radial-from":re()}],"mask-image-radial-to-color":[{"mask-radial-to":re()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[Tr]}],"mask-image-conic-from-pos":[{"mask-conic-from":he()}],"mask-image-conic-to-pos":[{"mask-conic-to":he()}],"mask-image-conic-from-color":[{"mask-conic-from":re()}],"mask-image-conic-to-color":[{"mask-conic-to":re()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:Z()}],"mask-size":[{mask:te()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",bn,gn]}],filter:[{filter:["","none",bn,gn]}],blur:[{blur:Fe()}],brightness:[{brightness:[Tr,bn,gn]}],contrast:[{contrast:[Tr,bn,gn]}],"drop-shadow":[{"drop-shadow":["","none",g,l2,a2]}],"drop-shadow-color":[{"drop-shadow":re()}],grayscale:[{grayscale:["",Tr,bn,gn]}],"hue-rotate":[{"hue-rotate":[Tr,bn,gn]}],invert:[{invert:["",Tr,bn,gn]}],saturate:[{saturate:[Tr,bn,gn]}],sepia:[{sepia:["",Tr,bn,gn]}],"backdrop-filter":[{"backdrop-filter":["","none",bn,gn]}],"backdrop-blur":[{"backdrop-blur":Fe()}],"backdrop-brightness":[{"backdrop-brightness":[Tr,bn,gn]}],"backdrop-contrast":[{"backdrop-contrast":[Tr,bn,gn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Tr,bn,gn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Tr,bn,gn]}],"backdrop-invert":[{"backdrop-invert":["",Tr,bn,gn]}],"backdrop-opacity":[{"backdrop-opacity":[Tr,bn,gn]}],"backdrop-saturate":[{"backdrop-saturate":[Tr,bn,gn]}],"backdrop-sepia":[{"backdrop-sepia":["",Tr,bn,gn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",bn,gn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Tr,"initial",bn,gn]}],ease:[{ease:["linear","initial",_,bn,gn]}],delay:[{delay:[Tr,bn,gn]}],animate:[{animate:["none",S,bn,gn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,bn,gn]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:De()}],"rotate-x":[{"rotate-x":De()}],"rotate-y":[{"rotate-y":De()}],"rotate-z":[{"rotate-z":De()}],scale:[{scale:Re()}],"scale-x":[{"scale-x":Re()}],"scale-y":[{"scale-y":Re()}],"scale-z":[{"scale-z":Re()}],"scale-3d":["scale-3d"],skew:[{skew:tt()}],"skew-x":[{"skew-x":tt()}],"skew-y":[{"skew-y":tt()}],transform:[{transform:[bn,gn,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:fe()}],"translate-x":[{"translate-x":fe()}],"translate-y":[{"translate-y":fe()}],"translate-z":[{"translate-z":fe()}],"translate-none":["translate-none"],accent:[{accent:re()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:re()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",bn,gn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",bn,gn]}],fill:[{fill:["none",...re()]}],"stroke-w":[{stroke:[Tr,jy,Dp,R5]}],stroke:[{stroke:["none",...re()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Gq=nye(Eye);function Qe(...e){return Gq(gR(e))}const hL=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,pL=gR,yR=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return pL(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,i=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],f=o==null?void 0:o[c];if(u===null)return null;const m=hL(u)||hL(f);return s[c][m]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,m]=u;return m===void 0||(c[f]=m),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:m,...g}=u;return Object.entries(g).every(y=>{let[v,w]=y;return Array.isArray(w)?w.includes({...o,...a}[v]):{...o,...a}[v]===w})?[...c,f,m]:c},[]);return pL(e,i,l,n==null?void 0:n.class,n==null?void 0:n.className)},_ye=yR("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Sc({className:e,variant:t,...n}){return h.jsx("div",{className:Qe(_ye({variant:t}),e),...n})}function mL(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Cd(...e){return t=>{let n=!1;const r=e.map(s=>{const o=mL(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():mL(e[s],null)}}}}function Rr(...e){return x.useCallback(Cd(...e),e)}var Sye=Symbol.for("react.lazy"),tS=tR[" use ".trim().toString()];function Tye(e){return typeof e=="object"&&e!==null&&"then"in e}function Wq(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Sye&&"_payload"in e&&Tye(e._payload)}function lw(e){const t=Cye(e),n=x.forwardRef((r,s)=>{let{children:o,...i}=r;Wq(o)&&typeof tS=="function"&&(o=tS(o._payload));const a=x.Children.toArray(o),l=a.find(Aye);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:s,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var Nm=lw("Slot");function Cye(e){const t=x.forwardRef((n,r)=>{let{children:s,...o}=n;if(Wq(s)&&typeof tS=="function"&&(s=tS(s._payload)),x.isValidElement(s)){const i=Iye(s),a=Nye(o,s.props);return s.type!==x.Fragment&&(a.ref=r?Cd(r,i):i),x.cloneElement(s,a)}return x.Children.count(s)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var kye=Symbol("radix.slottable");function Aye(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===kye}function Nye(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const l=o(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function Iye(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const wN=yR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_r=x.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const i=r?Nm:"button";return h.jsx(i,{className:Qe(wN({variant:t,size:n,className:e})),ref:o,...s})});_r.displayName="Button";function Ed({className:e,type:t,...n}){return h.jsx("input",{type:t,"data-slot":"input",className:Qe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function Wt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Rye(e,t){const n=x.createContext(t),r=o=>{const{children:i,...a}=o,l=x.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:l,children:i})};r.displayName=e+"Provider";function s(o){const i=x.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function Ha(e,t=[]){let n=[];function r(o,i){const a=x.createContext(i),l=n.length;n=[...n,i];const c=f=>{var _;const{scope:m,children:g,...y}=f,v=((_=m==null?void 0:m[e])==null?void 0:_[l])||a,w=x.useMemo(()=>y,Object.values(y));return h.jsx(v.Provider,{value:w,children:g})};c.displayName=o+"Provider";function u(f,m){var v;const g=((v=m==null?void 0:m[e])==null?void 0:v[l])||a,y=x.useContext(g);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[c,u]}const s=()=>{const o=n.map(i=>x.createContext(i));return function(a){const l=(a==null?void 0:a[e])||o;return x.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return s.scopeName=e,[r,Mye(s,...t)]}function Mye(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...a,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function gL(e){const t=Oye(e),n=x.forwardRef((r,s)=>{const{children:o,...i}=r,a=x.Children.toArray(o),l=a.find(Pye);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:s,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}function Oye(e){const t=x.forwardRef((n,r)=>{const{children:s,...o}=n;if(x.isValidElement(s)){const i=$ye(s),a=Lye(o,s.props);return s.type!==x.Fragment&&(a.ref=r?Cd(r,i):i),x.cloneElement(s,a)}return x.Children.count(s)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Dye=Symbol("radix.slottable");function Pye(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Dye}function Lye(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const l=o(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function $ye(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function vR(e){const t=e+"CollectionProvider",[n,r]=Ha(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=v=>{const{scope:w,children:_}=v,S=Me.useRef(null),k=Me.useRef(new Map).current;return h.jsx(s,{scope:w,itemMap:k,collectionRef:S,children:_})};i.displayName=t;const a=e+"CollectionSlot",l=gL(a),c=Me.forwardRef((v,w)=>{const{scope:_,children:S}=v,k=o(a,_),R=Rr(w,k.collectionRef);return h.jsx(l,{ref:R,children:S})});c.displayName=a;const u=e+"CollectionItemSlot",f="data-radix-collection-item",m=gL(u),g=Me.forwardRef((v,w)=>{const{scope:_,children:S,...k}=v,R=Me.useRef(null),O=Rr(w,R),M=o(u,_);return Me.useEffect(()=>(M.itemMap.set(R,{ref:R,...k}),()=>void M.itemMap.delete(R))),h.jsx(m,{[f]:"",ref:O,children:S})});g.displayName=u;function y(v){const w=o(e+"CollectionConsumer",v);return Me.useCallback(()=>{const S=w.collectionRef.current;if(!S)return[];const k=Array.from(S.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((M,P)=>k.indexOf(M.ref.current)-k.indexOf(P.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:c,ItemSlot:g},y,r]}var Mi=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},Fye=tR[" useId ".trim().toString()]||(()=>{}),Bye=0;function Rc(e){const[t,n]=x.useState(Fye());return Mi(()=>{n(r=>r??String(Bye++))},[e]),t?`radix-${t}`:""}var pl=zV();const xR=km(pl);function zye(e){const t=jye(e),n=x.forwardRef((r,s)=>{const{children:o,...i}=r,a=x.Children.toArray(o),l=a.find(Hye);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:s,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}function jye(e){const t=x.forwardRef((n,r)=>{const{children:s,...o}=n;if(x.isValidElement(s)){const i=qye(s),a=Vye(o,s.props);return s.type!==x.Fragment&&(a.ref=r?Cd(r,i):i),x.cloneElement(s,a)}return x.Children.count(s)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Uye=Symbol("radix.slottable");function Hye(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Uye}function Vye(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const l=o(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function qye(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Gye=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pn=Gye.reduce((e,t)=>{const n=zye(`Primitive.${t}`),r=x.forwardRef((s,o)=>{const{asChild:i,...a}=s,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Yq(e,t){e&&pl.flushSync(()=>e.dispatchEvent(t))}function xu(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}var Wye=tR[" useInsertionEffect ".trim().toString()]||Mi;function bl({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,o,i]=Yye({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:s;{const u=x.useRef(e!==void 0);x.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=x.useCallback(u=>{var f;if(a){const m=Kye(u)?u(e):u;m!==e&&((f=i.current)==null||f.call(i,m))}else o(u)},[a,e,o,i]);return[l,c]}function Yye({defaultProp:e,onChange:t}){const[n,r]=x.useState(e),s=x.useRef(n),o=x.useRef(t);return Wye(()=>{o.current=t},[t]),x.useEffect(()=>{var i;s.current!==n&&((i=o.current)==null||i.call(o,n),s.current=n)},[n,s]),[n,r,o]}function Kye(e){return typeof e=="function"}var Zye=x.createContext(void 0);function wb(e){const t=x.useContext(Zye);return e||t||"ltr"}var M5="rovingFocusGroup.onEntryFocus",Jye={bubbles:!1,cancelable:!0},cw="RovingFocusGroup",[EN,Kq,Xye]=vR(cw),[Qye,B0]=Ha(cw,[Xye]),[eve,tve]=Qye(cw),Zq=x.forwardRef((e,t)=>h.jsx(EN.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(EN.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(nve,{...e,ref:t})})}));Zq.displayName=cw;var nve=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=e,m=x.useRef(null),g=Rr(t,m),y=wb(o),[v,w]=bl({prop:i,defaultProp:a??null,onChange:l,caller:cw}),[_,S]=x.useState(!1),k=xu(c),R=Kq(n),O=x.useRef(!1),[M,P]=x.useState(0);return x.useEffect(()=>{const j=m.current;if(j)return j.addEventListener(M5,k),()=>j.removeEventListener(M5,k)},[k]),h.jsx(eve,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:v,onItemFocus:x.useCallback(j=>w(j),[w]),onItemShiftTab:x.useCallback(()=>S(!0),[]),onFocusableItemAdd:x.useCallback(()=>P(j=>j+1),[]),onFocusableItemRemove:x.useCallback(()=>P(j=>j-1),[]),children:h.jsx(Pn.div,{tabIndex:_||M===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...e.style},onMouseDown:Wt(e.onMouseDown,()=>{O.current=!0}),onFocus:Wt(e.onFocus,j=>{const q=!O.current;if(j.target===j.currentTarget&&q&&!_){const U=new CustomEvent(M5,Jye);if(j.currentTarget.dispatchEvent(U),!U.defaultPrevented){const z=R().filter(J=>J.focusable),H=z.find(J=>J.active),F=z.find(J=>J.id===v),X=[H,F,...z].filter(Boolean).map(J=>J.ref.current);Qq(X,u)}}O.current=!1}),onBlur:Wt(e.onBlur,()=>S(!1))})})}),Jq="RovingFocusGroupItem",Xq=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:i,...a}=e,l=Rc(),c=o||l,u=tve(Jq,n),f=u.currentTabStopId===c,m=Kq(n),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:v}=u;return x.useEffect(()=>{if(r)return g(),()=>y()},[r,g,y]),h.jsx(EN.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:h.jsx(Pn.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Wt(e.onMouseDown,w=>{r?u.onItemFocus(c):w.preventDefault()}),onFocus:Wt(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Wt(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const _=ove(w,u.orientation,u.dir);if(_!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let k=m().filter(R=>R.focusable).map(R=>R.ref.current);if(_==="last")k.reverse();else if(_==="prev"||_==="next"){_==="prev"&&k.reverse();const R=k.indexOf(w.currentTarget);k=u.loop?ive(k,R+1):k.slice(R+1)}setTimeout(()=>Qq(k))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:v!=null}):i})})});Xq.displayName=Jq;var rve={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sve(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ove(e,t,n){const r=sve(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return rve[r]}function Qq(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function ive(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var x4=Zq,w4=Xq;function ave(e,t){return x.useReducer((n,r)=>t[n][r]??n,e)}var yl=e=>{const{present:t,children:n}=e,r=lve(t),s=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),o=Rr(r.ref,cve(s));return typeof n=="function"||r.isPresent?x.cloneElement(s,{ref:o}):null};yl.displayName="Presence";function lve(e){const[t,n]=x.useState(),r=x.useRef(null),s=x.useRef(e),o=x.useRef("none"),i=e?"mounted":"unmounted",[a,l]=ave(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=c2(r.current);o.current=a==="mounted"?c:"none"},[a]),Mi(()=>{const c=r.current,u=s.current;if(u!==e){const m=o.current,g=c2(c);e?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),Mi(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,f=g=>{const v=c2(r.current).includes(CSS.escape(g.animationName));if(g.target===t&&v&&(l("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=g=>{g.target===t&&(o.current=c2(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function c2(e){return(e==null?void 0:e.animationName)||"none"}function cve(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var E4="Tabs",[uve]=Ha(E4,[B0]),eG=B0(),[dve,wR]=uve(E4),tG=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=wb(a),[f,m]=bl({prop:r,onChange:s,defaultProp:o??"",caller:E4});return h.jsx(dve,{scope:n,baseId:Rc(),value:f,onValueChange:m,orientation:i,dir:u,activationMode:l,children:h.jsx(Pn.div,{dir:u,"data-orientation":i,...c,ref:t})})});tG.displayName=E4;var nG="TabsList",rG=x.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,o=wR(nG,n),i=eG(n);return h.jsx(x4,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:h.jsx(Pn.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});rG.displayName=nG;var sG="TabsTrigger",oG=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=e,i=wR(sG,n),a=eG(n),l=aG(i.baseId,r),c=lG(i.baseId,r),u=r===i.value;return h.jsx(w4,{asChild:!0,...a,focusable:!s,active:u,children:h.jsx(Pn.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...o,ref:t,onMouseDown:Wt(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:Wt(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:Wt(e.onFocus,()=>{const f=i.activationMode!=="manual";!u&&!s&&f&&i.onValueChange(r)})})})});oG.displayName=sG;var iG="TabsContent",fve=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...i}=e,a=wR(iG,n),l=aG(a.baseId,r),c=lG(a.baseId,r),u=r===a.value,f=x.useRef(u);return x.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),h.jsx(yl,{present:s||u,children:({present:m})=>h.jsx(Pn.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&o})})});fve.displayName=iG;function aG(e,t){return`${e}-trigger-${t}`}function lG(e,t){return`${e}-content-${t}`}var hve=tG,pve=rG,mve=oG;function cG({className:e,...t}){return h.jsx(hve,{"data-slot":"tabs",className:Qe("flex flex-col gap-2",e),...t})}function uG({className:e,...t}){return h.jsx(pve,{"data-slot":"tabs-list",className:Qe("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function Iv({className:e,...t}){return h.jsx(mve,{"data-slot":"tabs-trigger",className:Qe("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/50 inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function _N({className:e,...t}){return h.jsx("div",{"data-slot":"card",className:Qe("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6",e),...t})}function gve({className:e,...t}){return h.jsx("div",{"data-slot":"card-header",className:Qe("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-[data-slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function bve({className:e,...t}){return h.jsx("div",{"data-slot":"card-title",className:Qe("leading-none font-semibold",e),...t})}function yve({className:e,...t}){return h.jsx("div",{"data-slot":"card-description",className:Qe("text-muted-foreground text-sm",e),...t})}function SN({className:e,...t}){return h.jsx("div",{"data-slot":"card-content",className:Qe("px-6",e),...t})}function vve({className:e,...t}){return h.jsx("div",{"data-slot":"card-footer",className:Qe("flex items-center px-6 [.border-t]:pt-6",e),...t})}function xve(e,t=[]){let n=[];function r(o,i){const a=x.createContext(i);a.displayName=o+"Context";const l=n.length;n=[...n,i];const c=f=>{var _;const{scope:m,children:g,...y}=f,v=((_=m==null?void 0:m[e])==null?void 0:_[l])||a,w=x.useMemo(()=>y,Object.values(y));return h.jsx(v.Provider,{value:w,children:g})};c.displayName=o+"Provider";function u(f,m){var v;const g=((v=m==null?void 0:m[e])==null?void 0:v[l])||a,y=x.useContext(g);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[c,u]}const s=()=>{const o=n.map(i=>x.createContext(i));return function(a){const l=(a==null?void 0:a[e])||o;return x.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return s.scopeName=e,[r,wve(s,...t)]}function wve(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...a,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var Eve=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ER=Eve.reduce((e,t)=>{const n=lw(`Primitive.${t}`),r=x.forwardRef((s,o)=>{const{asChild:i,...a}=s,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),O5={exports:{}},D5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bL;function _ve(){if(bL)return D5;bL=1;var e=aw();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,o=e.useLayoutEffect,i=e.useDebugValue;function a(f,m){var g=m(),y=r({inst:{value:g,getSnapshot:m}}),v=y[0].inst,w=y[1];return o(function(){v.value=g,v.getSnapshot=m,l(v)&&w({inst:v})},[f,g,m]),s(function(){return l(v)&&w({inst:v}),f(function(){l(v)&&w({inst:v})})},[f]),i(g),g}function l(f){var m=f.getSnapshot;f=f.value;try{var g=m();return!n(f,g)}catch{return!0}}function c(f,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return D5.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,D5}var yL;function dG(){return yL||(yL=1,O5.exports=_ve()),O5.exports}var _R=dG();function Sve(){return _R.useSyncExternalStore(Tve,()=>!0,()=>!1)}function Tve(){return()=>{}}var SR="Avatar",[Cve]=xve(SR),[kve,fG]=Cve(SR),hG=x.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,o]=x.useState("idle");return h.jsx(kve,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:h.jsx(ER.span,{...r,ref:t})})});hG.displayName=SR;var pG="AvatarImage",mG=x.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=e,i=fG(pG,n),a=Ave(r,o),l=xu(c=>{s(c),i.onImageLoadingStatusChange(c)});return Mi(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?h.jsx(ER.img,{...o,ref:t,src:r}):null});mG.displayName=pG;var gG="AvatarFallback",bG=x.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,o=fG(gG,n),[i,a]=x.useState(r===void 0);return x.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),i&&o.imageLoadingStatus!=="loaded"?h.jsx(ER.span,{...s,ref:t}):null});bG.displayName=gG;function vL(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Ave(e,{referrerPolicy:t,crossOrigin:n}){const r=Sve(),s=x.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[i,a]=x.useState(()=>vL(o,e));return Mi(()=>{a(vL(o,e))},[o,e]),Mi(()=>{const l=f=>()=>{a(f)};if(!o)return;const c=l("loaded"),u=l("error");return o.addEventListener("load",c),o.addEventListener("error",u),t&&(o.referrerPolicy=t),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",c),o.removeEventListener("error",u)}},[o,n,t]),i}var Nve=hG,Ive=mG,Rve=bG;function xL({className:e,...t}){return h.jsx(Nve,{"data-slot":"avatar",className:Qe("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function Mve({className:e,...t}){return h.jsx(Ive,{"data-slot":"avatar-image",className:Qe("aspect-square size-full object-cover",e),...t})}function wL({className:e,...t}){return h.jsx(Rve,{"data-slot":"avatar-fallback",className:Qe("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function Ove(e,t=globalThis==null?void 0:globalThis.document){const n=xu(e);x.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Dve="DismissableLayer",TN="dismissableLayer.update",Pve="dismissableLayer.pointerDownOutside",Lve="dismissableLayer.focusOutside",EL,yG=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Eb=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:a,...l}=e,c=x.useContext(yG),[u,f]=x.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=x.useState({}),y=Rr(t,P=>f(P)),v=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(w),S=u?v.indexOf(u):-1,k=c.layersWithOutsidePointerEventsDisabled.size>0,R=S>=_,O=Bve(P=>{const j=P.target,q=[...c.branches].some(U=>U.contains(j));!R||q||(s==null||s(P),i==null||i(P),P.defaultPrevented||a==null||a())},m),M=zve(P=>{const j=P.target;[...c.branches].some(U=>U.contains(j))||(o==null||o(P),i==null||i(P),P.defaultPrevented||a==null||a())},m);return Ove(P=>{S===c.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},m),x.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(EL=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),_L(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=EL)}},[u,m,n,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),_L())},[u,c]),x.useEffect(()=>{const P=()=>g({});return document.addEventListener(TN,P),()=>document.removeEventListener(TN,P)},[]),h.jsx(Pn.div,{...l,ref:y,style:{pointerEvents:k?R?"auto":"none":void 0,...e.style},onFocusCapture:Wt(e.onFocusCapture,M.onFocusCapture),onBlurCapture:Wt(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Wt(e.onPointerDownCapture,O.onPointerDownCapture)})});Eb.displayName=Dve;var $ve="DismissableLayerBranch",Fve=x.forwardRef((e,t)=>{const n=x.useContext(yG),r=x.useRef(null),s=Rr(t,r);return x.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),h.jsx(Pn.div,{...e,ref:s})});Fve.displayName=$ve;function Bve(e,t=globalThis==null?void 0:globalThis.document){const n=xu(e),r=x.useRef(!1),s=x.useRef(()=>{});return x.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){vG(Pve,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function zve(e,t=globalThis==null?void 0:globalThis.document){const n=xu(e),r=x.useRef(!1);return x.useEffect(()=>{const s=o=>{o.target&&!r.current&&vG(Lve,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _L(){const e=new CustomEvent(TN);document.dispatchEvent(e)}function vG(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Yq(s,o):s.dispatchEvent(o)}const xG=["top","right","bottom","left"],SL=["start","end"],TL=xG.reduce((e,t)=>e.concat(t,t+"-"+SL[0],t+"-"+SL[1]),[]),wu=Math.min,ba=Math.max,nS=Math.round,u2=Math.floor,xd=e=>({x:e,y:e}),jve={left:"right",right:"left",bottom:"top",top:"bottom"},Uve={start:"end",end:"start"};function CN(e,t,n){return ba(e,wu(t,n))}function Eu(e,t){return typeof e=="function"?e(t):e}function Ql(e){return e.split("-")[0]}function yu(e){return e.split("-")[1]}function TR(e){return e==="x"?"y":"x"}function CR(e){return e==="y"?"height":"width"}const Hve=new Set(["top","bottom"]);function mu(e){return Hve.has(Ql(e))?"y":"x"}function kR(e){return TR(mu(e))}function wG(e,t,n){n===void 0&&(n=!1);const r=yu(e),s=kR(e),o=CR(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=sS(i)),[i,sS(i)]}function Vve(e){const t=sS(e);return[rS(e),t,rS(t)]}function rS(e){return e.replace(/start|end/g,t=>Uve[t])}const CL=["left","right"],kL=["right","left"],qve=["top","bottom"],Gve=["bottom","top"];function Wve(e,t,n){switch(e){case"top":case"bottom":return n?t?kL:CL:t?CL:kL;case"left":case"right":return t?qve:Gve;default:return[]}}function Yve(e,t,n,r){const s=yu(e);let o=Wve(Ql(e),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(rS)))),o}function sS(e){return e.replace(/left|right|bottom|top/g,t=>jve[t])}function Kve(e){return{top:0,right:0,bottom:0,left:0,...e}}function AR(e){return typeof e!="number"?Kve(e):{top:e,right:e,bottom:e,left:e}}function z1(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function AL(e,t,n){let{reference:r,floating:s}=e;const o=mu(t),i=kR(t),a=CR(i),l=Ql(t),c=o==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-s.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(yu(t)){case"start":g[i]-=m*(n&&c?-1:1);break;case"end":g[i]+=m*(n&&c?-1:1);break}return g}const Zve=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:f}=AL(c,r,l),m=r,g={},y=0;for(let v=0;v<a.length;v++){const{name:w,fn:_}=a[v],{x:S,y:k,data:R,reset:O}=await _({x:u,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:c,platform:i,elements:{reference:e,floating:t}});u=S??u,f=k??f,g={...g,[w]:{...g[w],...R}},O&&y<=50&&(y++,typeof O=="object"&&(O.placement&&(m=O.placement),O.rects&&(c=O.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):O.rects),{x:u,y:f}=AL(c,m,l)),v=-1)}return{x:u,y:f,placement:m,strategy:s,middlewareData:g}};async function j1(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=Eu(t,e),y=AR(g),w=a[m?f==="floating"?"reference":"floating":f],_=z1(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),S=f==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),R=await(o.isElement==null?void 0:o.isElement(k))?await(o.getScale==null?void 0:o.getScale(k))||{x:1,y:1}:{x:1,y:1},O=z1(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:k,strategy:l}):S);return{top:(_.top-O.top+y.top)/R.y,bottom:(O.bottom-_.bottom+y.bottom)/R.y,left:(_.left-O.left+y.left)/R.x,right:(O.right-_.right+y.right)/R.x}}const Jve=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Eu(e,t)||{};if(c==null)return{};const f=AR(u),m={x:n,y:r},g=kR(s),y=CR(g),v=await i.getDimensions(c),w=g==="y",_=w?"top":"left",S=w?"bottom":"right",k=w?"clientHeight":"clientWidth",R=o.reference[y]+o.reference[g]-m[g]-o.floating[y],O=m[g]-o.reference[g],M=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let P=M?M[k]:0;(!P||!await(i.isElement==null?void 0:i.isElement(M)))&&(P=a.floating[k]||o.floating[y]);const j=R/2-O/2,q=P/2-v[y]/2-1,U=wu(f[_],q),z=wu(f[S],q),H=U,F=P-v[y]-z,W=P/2-v[y]/2+j,X=CN(H,W,F),J=!l.arrow&&yu(s)!=null&&W!==X&&o.reference[y]/2-(W<H?U:z)-v[y]/2<0,ee=J?W<H?W-H:W-F:0;return{[g]:m[g]+ee,data:{[g]:X,centerOffset:W-X-ee,...J&&{alignmentOffset:ee}},reset:J}}});function Xve(e,t,n){return(e?[...n.filter(s=>yu(s)===e),...n.filter(s=>yu(s)!==e)]:n.filter(s=>Ql(s)===s)).filter(s=>e?yu(s)===e||(t?rS(s)!==s:!1):!0)}const Qve=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,s;const{rects:o,middlewareData:i,placement:a,platform:l,elements:c}=t,{crossAxis:u=!1,alignment:f,allowedPlacements:m=TL,autoAlignment:g=!0,...y}=Eu(e,t),v=f!==void 0||m===TL?Xve(f||null,g,m):m,w=await j1(t,y),_=((n=i.autoPlacement)==null?void 0:n.index)||0,S=v[_];if(S==null)return{};const k=wG(S,o,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==S)return{reset:{placement:v[0]}};const R=[w[Ql(S)],w[k[0]],w[k[1]]],O=[...((r=i.autoPlacement)==null?void 0:r.overflows)||[],{placement:S,overflows:R}],M=v[_+1];if(M)return{data:{index:_+1,overflows:O},reset:{placement:M}};const P=O.map(U=>{const z=yu(U.placement);return[U.placement,z&&u?U.overflows.slice(0,2).reduce((H,F)=>H+F,0):U.overflows[0],U.overflows]}).sort((U,z)=>U[1]-z[1]),q=((s=P.filter(U=>U[2].slice(0,yu(U[0])?2:3).every(z=>z<=0))[0])==null?void 0:s[0])||P[0][0];return q!==a?{data:{index:_+1,overflows:O},reset:{placement:q}}:{}}}},exe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...w}=Eu(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const _=Ql(s),S=mu(a),k=Ql(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),O=m||(k||!v?[sS(a)]:Vve(a)),M=y!=="none";!m&&M&&O.push(...Yve(a,v,y,R));const P=[a,...O],j=await j1(t,w),q=[];let U=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&q.push(j[_]),f){const W=wG(s,i,R);q.push(j[W[0]],j[W[1]])}if(U=[...U,{placement:s,overflows:q}],!q.every(W=>W<=0)){var z,H;const W=(((z=o.flip)==null?void 0:z.index)||0)+1,X=P[W];if(X&&(!(f==="alignment"?S!==mu(X):!1)||U.every(re=>mu(re.placement)===S?re.overflows[0]>0:!0)))return{data:{index:W,overflows:U},reset:{placement:X}};let J=(H=U.filter(ee=>ee.overflows[0]<=0).sort((ee,re)=>ee.overflows[1]-re.overflows[1])[0])==null?void 0:H.placement;if(!J)switch(g){case"bestFit":{var F;const ee=(F=U.filter(re=>{if(M){const ie=mu(re.placement);return ie===S||ie==="y"}return!0}).map(re=>[re.placement,re.overflows.filter(ie=>ie>0).reduce((ie,Z)=>ie+Z,0)]).sort((re,ie)=>re[1]-ie[1])[0])==null?void 0:F[0];ee&&(J=ee);break}case"initialPlacement":J=a;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function NL(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function IL(e){return xG.some(t=>e[t]>=0)}const txe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Eu(e,t);switch(r){case"referenceHidden":{const o=await j1(t,{...s,elementContext:"reference"}),i=NL(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:IL(i)}}}case"escaped":{const o=await j1(t,{...s,altBoundary:!0}),i=NL(o,n.floating);return{data:{escapedOffsets:i,escaped:IL(i)}}}default:return{}}}}};function EG(e){const t=wu(...e.map(o=>o.left)),n=wu(...e.map(o=>o.top)),r=ba(...e.map(o=>o.right)),s=ba(...e.map(o=>o.bottom));return{x:t,y:n,width:r-t,height:s-n}}function nxe(e){const t=e.slice().sort((s,o)=>s.y-o.y),n=[];let r=null;for(let s=0;s<t.length;s++){const o=t[s];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(s=>z1(EG(s)))}const rxe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:o,strategy:i}=t,{padding:a=2,x:l,y:c}=Eu(e,t),u=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),f=nxe(u),m=z1(EG(u)),g=AR(a);function y(){if(f.length===2&&f[0].left>f[1].right&&l!=null&&c!=null)return f.find(w=>l>w.left-g.left&&l<w.right+g.right&&c>w.top-g.top&&c<w.bottom+g.bottom)||m;if(f.length>=2){if(mu(n)==="y"){const U=f[0],z=f[f.length-1],H=Ql(n)==="top",F=U.top,W=z.bottom,X=H?U.left:z.left,J=H?U.right:z.right,ee=J-X,re=W-F;return{top:F,bottom:W,left:X,right:J,width:ee,height:re,x:X,y:F}}const w=Ql(n)==="left",_=ba(...f.map(U=>U.right)),S=wu(...f.map(U=>U.left)),k=f.filter(U=>w?U.left===S:U.right===_),R=k[0].top,O=k[k.length-1].bottom,M=S,P=_,j=P-M,q=O-R;return{top:R,bottom:O,left:M,right:P,width:j,height:q,x:M,y:R}}return m}const v=await o.getElementRects({reference:{getBoundingClientRect:y},floating:r.floating,strategy:i});return s.reference.x!==v.reference.x||s.reference.y!==v.reference.y||s.reference.width!==v.reference.width||s.reference.height!==v.reference.height?{reset:{rects:v}}:{}}}},_G=new Set(["left","top"]);async function sxe(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=Ql(n),a=yu(n),l=mu(n)==="y",c=_G.has(i)?-1:1,u=o&&l?-1:1,f=Eu(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(g=a==="end"?y*-1:y),l?{x:g*u,y:m*c}:{x:m*c,y:g*u}}const oxe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=t,l=await sxe(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}},ixe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:w=>{let{x:_,y:S}=w;return{x:_,y:S}}},...l}=Eu(e,t),c={x:n,y:r},u=await j1(t,l),f=mu(Ql(s)),m=TR(f);let g=c[m],y=c[f];if(o){const w=m==="y"?"top":"left",_=m==="y"?"bottom":"right",S=g+u[w],k=g-u[_];g=CN(S,g,k)}if(i){const w=f==="y"?"top":"left",_=f==="y"?"bottom":"right",S=y+u[w],k=y-u[_];y=CN(S,y,k)}const v=a.fn({...t,[m]:g,[f]:y});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:o,[f]:i}}}}}},axe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Eu(e,t),u={x:n,y:r},f=mu(s),m=TR(f);let g=u[m],y=u[f];const v=Eu(a,t),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const k=m==="y"?"height":"width",R=o.reference[m]-o.floating[k]+w.mainAxis,O=o.reference[m]+o.reference[k]-w.mainAxis;g<R?g=R:g>O&&(g=O)}if(c){var _,S;const k=m==="y"?"width":"height",R=_G.has(Ql(s)),O=o.reference[f]-o.floating[k]+(R&&((_=i.offset)==null?void 0:_[f])||0)+(R?0:w.crossAxis),M=o.reference[f]+o.reference[k]+(R?0:((S=i.offset)==null?void 0:S[f])||0)-(R?w.crossAxis:0);y<O?y=O:y>M&&(y=M)}return{[m]:g,[f]:y}}}},lxe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:i,elements:a}=t,{apply:l=()=>{},...c}=Eu(e,t),u=await j1(t,c),f=Ql(s),m=yu(s),g=mu(s)==="y",{width:y,height:v}=o.floating;let w,_;f==="top"||f==="bottom"?(w=f,_=m===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(_=f,w=m==="end"?"top":"bottom");const S=v-u.top-u.bottom,k=y-u.left-u.right,R=wu(v-u[w],S),O=wu(y-u[_],k),M=!t.middlewareData.shift;let P=R,j=O;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=k),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(P=S),M&&!m){const U=ba(u.left,0),z=ba(u.right,0),H=ba(u.top,0),F=ba(u.bottom,0);g?j=y-2*(U!==0||z!==0?U+z:ba(u.left,u.right)):P=v-2*(H!==0||F!==0?H+F:ba(u.top,u.bottom))}await l({...t,availableWidth:j,availableHeight:P});const q=await i.getDimensions(a.floating);return y!==q.width||v!==q.height?{reset:{rects:!0}}:{}}}};function _4(){return typeof window<"u"}function _b(e){return SG(e)?(e.nodeName||"").toLowerCase():"#document"}function Kl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function kd(e){var t;return(t=(SG(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function SG(e){return _4()?e instanceof Node||e instanceof Kl(e).Node:!1}function _u(e){return _4()?e instanceof Element||e instanceof Kl(e).Element:!1}function _d(e){return _4()?e instanceof HTMLElement||e instanceof Kl(e).HTMLElement:!1}function RL(e){return!_4()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Kl(e).ShadowRoot}const cxe=new Set(["inline","contents"]);function uw(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Su(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!cxe.has(s)}const uxe=new Set(["table","td","th"]);function dxe(e){return uxe.has(_b(e))}const fxe=[":popover-open",":modal"];function S4(e){return fxe.some(t=>{try{return e.matches(t)}catch{return!1}})}const hxe=["transform","translate","scale","rotate","perspective"],pxe=["transform","translate","scale","rotate","perspective","filter"],mxe=["paint","layout","strict","content"];function NR(e){const t=IR(),n=_u(e)?Su(e):e;return hxe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||pxe.some(r=>(n.willChange||"").includes(r))||mxe.some(r=>(n.contain||"").includes(r))}function gxe(e){let t=S0(e);for(;_d(t)&&!U1(t);){if(NR(t))return t;if(S4(t))return null;t=S0(t)}return null}function IR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const bxe=new Set(["html","body","#document"]);function U1(e){return bxe.has(_b(e))}function Su(e){return Kl(e).getComputedStyle(e)}function T4(e){return _u(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function S0(e){if(_b(e)==="html")return e;const t=e.assignedSlot||e.parentNode||RL(e)&&e.host||kd(e);return RL(t)?t.host:t}function TG(e){const t=S0(e);return U1(t)?e.ownerDocument?e.ownerDocument.body:e.body:_d(t)&&uw(t)?t:TG(t)}function ux(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=TG(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),i=Kl(s);if(o){const a=kN(i);return t.concat(i,i.visualViewport||[],uw(s)?s:[],a&&n?ux(a):[])}return t.concat(s,ux(s,[],n))}function kN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function CG(e){const t=Su(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=_d(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r,a=nS(n)!==o||nS(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function RR(e){return _u(e)?e:e.contextElement}function _1(e){const t=RR(e);if(!_d(t))return xd(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=CG(t);let i=(o?nS(n.width):n.width)/r,a=(o?nS(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const yxe=xd(0);function kG(e){const t=Kl(e);return!IR()||!t.visualViewport?yxe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vxe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Kl(e)?!1:t}function cm(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=RR(e);let i=xd(1);t&&(r?_u(r)&&(i=_1(r)):i=_1(e));const a=vxe(o,n,r)?kG(o):xd(0);let l=(s.left+a.x)/i.x,c=(s.top+a.y)/i.y,u=s.width/i.x,f=s.height/i.y;if(o){const m=Kl(o),g=r&&_u(r)?Kl(r):r;let y=m,v=kN(y);for(;v&&r&&g!==y;){const w=_1(v),_=v.getBoundingClientRect(),S=Su(v),k=_.left+(v.clientLeft+parseFloat(S.paddingLeft))*w.x,R=_.top+(v.clientTop+parseFloat(S.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,f*=w.y,l+=k,c+=R,y=Kl(v),v=kN(y)}}return z1({width:u,height:f,x:l,y:c})}function C4(e,t){const n=T4(e).scrollLeft;return t?t.left+n:cm(kd(e)).left+n}function AG(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-C4(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function xxe(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",i=kd(r),a=t?S4(t.floating):!1;if(r===i||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=xd(1);const u=xd(0),f=_d(r);if((f||!f&&!o)&&((_b(r)!=="body"||uw(i))&&(l=T4(r)),_d(r))){const g=cm(r);c=_1(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const m=i&&!f&&!o?AG(i,l):xd(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:n.y*c.y-l.scrollTop*c.y+u.y+m.y}}function wxe(e){return Array.from(e.getClientRects())}function Exe(e){const t=kd(e),n=T4(e),r=e.ownerDocument.body,s=ba(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=ba(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+C4(e);const a=-n.scrollTop;return Su(r).direction==="rtl"&&(i+=ba(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}const ML=25;function _xe(e,t){const n=Kl(e),r=kd(e),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const u=IR();(!u||u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=C4(r);if(c<=0){const u=r.ownerDocument,f=u.body,m=getComputedStyle(f),g=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,y=Math.abs(r.clientWidth-f.clientWidth-g);y<=ML&&(o-=y)}else c<=ML&&(o+=c);return{width:o,height:i,x:a,y:l}}const Sxe=new Set(["absolute","fixed"]);function Txe(e,t){const n=cm(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=_d(e)?_1(e):xd(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,l=s*o.x,c=r*o.y;return{width:i,height:a,x:l,y:c}}function OL(e,t,n){let r;if(t==="viewport")r=_xe(e,n);else if(t==="document")r=Exe(kd(e));else if(_u(t))r=Txe(t,n);else{const s=kG(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return z1(r)}function NG(e,t){const n=S0(e);return n===t||!_u(n)||U1(n)?!1:Su(n).position==="fixed"||NG(n,t)}function Cxe(e,t){const n=t.get(e);if(n)return n;let r=ux(e,[],!1).filter(a=>_u(a)&&_b(a)!=="body"),s=null;const o=Su(e).position==="fixed";let i=o?S0(e):e;for(;_u(i)&&!U1(i);){const a=Su(i),l=NR(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&Sxe.has(s.position)||uw(i)&&!l&&NG(e,i))?r=r.filter(u=>u!==i):s=a,i=S0(i)}return t.set(e,r),r}function kxe(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?S4(t)?[]:Cxe(t,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const f=OL(t,u,s);return c.top=ba(f.top,c.top),c.right=wu(f.right,c.right),c.bottom=wu(f.bottom,c.bottom),c.left=ba(f.left,c.left),c},OL(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Axe(e){const{width:t,height:n}=CG(e);return{width:t,height:n}}function Nxe(e,t,n){const r=_d(t),s=kd(t),o=n==="fixed",i=cm(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=xd(0);function c(){l.x=C4(s)}if(r||!r&&!o)if((_b(t)!=="body"||uw(s))&&(a=T4(t)),r){const g=cm(t,!0,o,t);l.x=g.x+t.clientLeft,l.y=g.y+t.clientTop}else s&&c();o&&!r&&s&&c();const u=s&&!r&&!o?AG(s,a):xd(0),f=i.left+a.scrollLeft-l.x-u.x,m=i.top+a.scrollTop-l.y-u.y;return{x:f,y:m,width:i.width,height:i.height}}function P5(e){return Su(e).position==="static"}function DL(e,t){if(!_d(e)||Su(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return kd(e)===n&&(n=n.ownerDocument.body),n}function IG(e,t){const n=Kl(e);if(S4(e))return n;if(!_d(e)){let s=S0(e);for(;s&&!U1(s);){if(_u(s)&&!P5(s))return s;s=S0(s)}return n}let r=DL(e,t);for(;r&&dxe(r)&&P5(r);)r=DL(r,t);return r&&U1(r)&&P5(r)&&!NR(r)?n:r||gxe(e)||n}const Ixe=async function(e){const t=this.getOffsetParent||IG,n=this.getDimensions,r=await n(e.floating);return{reference:Nxe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Rxe(e){return Su(e).direction==="rtl"}const Mxe={convertOffsetParentRelativeRectToViewportRelativeRect:xxe,getDocumentElement:kd,getClippingRect:kxe,getOffsetParent:IG,getElementRects:Ixe,getClientRects:wxe,getDimensions:Axe,getScale:_1,isElement:_u,isRTL:Rxe};function RG(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Oxe(e,t){let n=null,r;const s=kd(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const c=e.getBoundingClientRect(),{left:u,top:f,width:m,height:g}=c;if(a||t(),!m||!g)return;const y=u2(f),v=u2(s.clientWidth-(u+m)),w=u2(s.clientHeight-(f+g)),_=u2(u),k={rootMargin:-y+"px "+-v+"px "+-w+"px "+-_+"px",threshold:ba(0,wu(1,l))||1};let R=!0;function O(M){const P=M[0].intersectionRatio;if(P!==l){if(!R)return i();P?i(!1,P):r=setTimeout(()=>{i(!1,1e-7)},1e3)}P===1&&!RG(c,e.getBoundingClientRect())&&i(),R=!1}try{n=new IntersectionObserver(O,{...k,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,k)}n.observe(e)}return i(!0),o}function Dxe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=RR(e),u=s||o?[...c?ux(c):[],...ux(t)]:[];u.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),o&&_.addEventListener("resize",n)});const f=c&&a?Oxe(c,n):null;let m=-1,g=null;i&&(g=new ResizeObserver(_=>{let[S]=_;S&&S.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var k;(k=g)==null||k.observe(t)})),n()}),c&&!l&&g.observe(c),g.observe(t));let y,v=l?cm(e):null;l&&w();function w(){const _=cm(e);v&&!RG(v,_)&&n(),v=_,y=requestAnimationFrame(w)}return n(),()=>{var _;u.forEach(S=>{s&&S.removeEventListener("scroll",n),o&&S.removeEventListener("resize",n)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const MR=oxe,MG=Qve,OR=ixe,DR=exe,PR=lxe,LR=txe,oS=Jve,OG=rxe,Pxe=axe,$R=(e,t,n)=>{const r=new Map,s={platform:Mxe,...n},o={...s.platform,_c:r};return Zve(e,t,{...s,platform:o})};var Lxe=typeof document<"u",$xe=function(){},S_=Lxe?x.useLayoutEffect:$xe;function iS(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!iS(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!iS(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function DG(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function PL(e,t){const n=DG(e);return Math.round(t*n)/n}function L5(e){const t=x.useRef(e);return S_(()=>{t.current=e}),t}function Fxe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,f]=x.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=x.useState(r);iS(m,r)||g(r);const[y,v]=x.useState(null),[w,_]=x.useState(null),S=x.useCallback(re=>{re!==M.current&&(M.current=re,v(re))},[]),k=x.useCallback(re=>{re!==P.current&&(P.current=re,_(re))},[]),R=o||y,O=i||w,M=x.useRef(null),P=x.useRef(null),j=x.useRef(u),q=l!=null,U=L5(l),z=L5(s),H=L5(c),F=x.useCallback(()=>{if(!M.current||!P.current)return;const re={placement:t,strategy:n,middleware:m};z.current&&(re.platform=z.current),$R(M.current,P.current,re).then(ie=>{const Z={...ie,isPositioned:H.current!==!1};W.current&&!iS(j.current,Z)&&(j.current=Z,pl.flushSync(()=>{f(Z)}))})},[m,t,n,z,H]);S_(()=>{c===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,f(re=>({...re,isPositioned:!1})))},[c]);const W=x.useRef(!1);S_(()=>(W.current=!0,()=>{W.current=!1}),[]),S_(()=>{if(R&&(M.current=R),O&&(P.current=O),R&&O){if(U.current)return U.current(R,O,F);F()}},[R,O,F,U,q]);const X=x.useMemo(()=>({reference:M,floating:P,setReference:S,setFloating:k}),[S,k]),J=x.useMemo(()=>({reference:R,floating:O}),[R,O]),ee=x.useMemo(()=>{const re={position:n,left:0,top:0};if(!J.floating)return re;const ie=PL(J.floating,u.x),Z=PL(J.floating,u.y);return a?{...re,transform:"translate("+ie+"px, "+Z+"px)",...DG(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:Z}},[n,a,J.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:F,refs:X,elements:J,floatingStyles:ee}),[u,F,X,J,ee])}const Bxe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?oS({element:r.current,padding:s}).fn(n):{}:r?oS({element:r,padding:s}).fn(n):{}}}},zxe=(e,t)=>({...MR(e),options:[e,t]}),jxe=(e,t)=>({...OR(e),options:[e,t]}),Uxe=(e,t)=>({...Pxe(e),options:[e,t]}),Hxe=(e,t)=>({...DR(e),options:[e,t]}),Vxe=(e,t)=>({...PR(e),options:[e,t]}),qxe=(e,t)=>({...LR(e),options:[e,t]}),Gxe=(e,t)=>({...Bxe(e),options:[e,t]});var Wxe="Arrow",PG=x.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return h.jsx(Pn.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});PG.displayName=Wxe;var Yxe=PG;function k4(e){const[t,n]=x.useState(void 0);return Mi(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var FR="Popper",[LG,z0]=Ha(FR),[Kxe,$G]=LG(FR),FG=e=>{const{__scopePopper:t,children:n}=e,[r,s]=x.useState(null);return h.jsx(Kxe,{scope:t,anchor:r,onAnchorChange:s,children:n})};FG.displayName=FR;var BG="PopperAnchor",zG=x.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=$G(BG,n),i=x.useRef(null),a=Rr(t,i),l=x.useRef(null);return x.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||i.current,c!==l.current&&o.onAnchorChange(l.current)}),r?null:h.jsx(Pn.div,{...s,ref:a})});zG.displayName=BG;var BR="PopperContent",[Zxe,Jxe]=LG(BR),jG=x.forwardRef((e,t)=>{var he,Fe,De,Re,tt,fe;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:y,...v}=e,w=$G(BR,n),[_,S]=x.useState(null),k=Rr(t,nt=>S(nt)),[R,O]=x.useState(null),M=k4(R),P=(M==null?void 0:M.width)??0,j=(M==null?void 0:M.height)??0,q=r+(o!=="center"?"-"+o:""),U=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},z=Array.isArray(c)?c:[c],H=z.length>0,F={padding:U,boundary:z.filter(Qxe),altBoundary:H},{refs:W,floatingStyles:X,placement:J,isPositioned:ee,middlewareData:re}=Fxe({strategy:"fixed",placement:q,whileElementsMounted:(...nt)=>Dxe(...nt,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[zxe({mainAxis:s+j,alignmentAxis:i}),l&&jxe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Uxe():void 0,...F}),l&&Hxe({...F}),Vxe({...F,apply:({elements:nt,rects:ot,availableWidth:Ht,availableHeight:qt})=>{const{width:Pt,height:tn}=ot.reference,xt=nt.floating.style;xt.setProperty("--radix-popper-available-width",`${Ht}px`),xt.setProperty("--radix-popper-available-height",`${qt}px`),xt.setProperty("--radix-popper-anchor-width",`${Pt}px`),xt.setProperty("--radix-popper-anchor-height",`${tn}px`)}}),R&&Gxe({element:R,padding:a}),ewe({arrowWidth:P,arrowHeight:j}),m&&qxe({strategy:"referenceHidden",...F})]}),[ie,Z]=VG(J),te=xu(y);Mi(()=>{ee&&(te==null||te())},[ee,te]);const oe=(he=re.arrow)==null?void 0:he.x,Q=(Fe=re.arrow)==null?void 0:Fe.y,Te=((De=re.arrow)==null?void 0:De.centerOffset)!==0,[ge,Ce]=x.useState();return Mi(()=>{_&&Ce(window.getComputedStyle(_).zIndex)},[_]),h.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:ee?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[(Re=re.transformOrigin)==null?void 0:Re.x,(tt=re.transformOrigin)==null?void 0:tt.y].join(" "),...((fe=re.hide)==null?void 0:fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(Zxe,{scope:n,placedSide:ie,onArrowChange:O,arrowX:oe,arrowY:Q,shouldHideArrow:Te,children:h.jsx(Pn.div,{"data-side":ie,"data-align":Z,...v,ref:k,style:{...v.style,animation:ee?void 0:"none"}})})})});jG.displayName=BR;var UG="PopperArrow",Xxe={top:"bottom",right:"left",bottom:"top",left:"right"},HG=x.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=Jxe(UG,r),i=Xxe[o.placedSide];return h.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:h.jsx(Yxe,{...s,ref:n,style:{...s.style,display:"block"}})})});HG.displayName=UG;function Qxe(e){return e!==null}var ewe=e=>({name:"transformOrigin",options:e,fn(t){var w,_,S;const{placement:n,rects:r,middlewareData:s}=t,i=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[c,u]=VG(n),f={start:"0%",center:"50%",end:"100%"}[u],m=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,g=(((S=s.arrow)==null?void 0:S.y)??0)+l/2;let y="",v="";return c==="bottom"?(y=i?f:`${m}px`,v=`${-l}px`):c==="top"?(y=i?f:`${m}px`,v=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,v=i?f:`${g}px`):c==="left"&&(y=`${r.floating.width+l}px`,v=i?f:`${g}px`),{data:{x:y,y:v}}}});function VG(e){const[t,n="center"]=e.split("-");return[t,n]}var A4=FG,dw=zG,N4=jG,I4=HG,twe="Portal",fw=x.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[s,o]=x.useState(!1);Mi(()=>o(!0),[]);const i=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?xR.createPortal(h.jsx(Pn.div,{...r,ref:t}),i):null});fw.displayName=twe;var nwe=Symbol("radix.slottable");function rwe(e){const t=({children:n})=>h.jsx(h.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=nwe,t}var qG=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),swe="VisuallyHidden",GG=x.forwardRef((e,t)=>h.jsx(Pn.span,{...e,ref:t,style:{...qG,...e.style}}));GG.displayName=swe;var owe=GG,[R4]=Ha("Tooltip",[z0]),M4=z0(),WG="TooltipProvider",iwe=700,AN="tooltip.open",[awe,zR]=R4(WG),YG=e=>{const{__scopeTooltip:t,delayDuration:n=iwe,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,i=x.useRef(!0),a=x.useRef(!1),l=x.useRef(0);return x.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),h.jsx(awe,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:x.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:x.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:o})};YG.displayName=WG;var dx="Tooltip",[lwe,O4]=R4(dx),KG=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:o,disableHoverableContent:i,delayDuration:a}=e,l=zR(dx,e.__scopeTooltip),c=M4(t),[u,f]=x.useState(null),m=Rc(),g=x.useRef(0),y=i??l.disableHoverableContent,v=a??l.delayDuration,w=x.useRef(!1),[_,S]=bl({prop:r,defaultProp:s??!1,onChange:P=>{P?(l.onOpen(),document.dispatchEvent(new CustomEvent(AN))):l.onClose(),o==null||o(P)},caller:dx}),k=x.useMemo(()=>_?w.current?"delayed-open":"instant-open":"closed",[_]),R=x.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w.current=!1,S(!0)},[S]),O=x.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),M=x.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{w.current=!0,S(!0),g.current=0},v)},[v,S]);return x.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),h.jsx(A4,{...c,children:h.jsx(lwe,{scope:t,contentId:m,open:_,stateAttribute:k,trigger:u,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{l.isOpenDelayedRef.current?M():R()},[l.isOpenDelayedRef,M,R]),onTriggerLeave:x.useCallback(()=>{y?O():(window.clearTimeout(g.current),g.current=0)},[O,y]),onOpen:R,onClose:O,disableHoverableContent:y,children:n})})};KG.displayName=dx;var NN="TooltipTrigger",ZG=x.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=O4(NN,n),o=zR(NN,n),i=M4(n),a=x.useRef(null),l=Rr(t,a,s.onTriggerChange),c=x.useRef(!1),u=x.useRef(!1),f=x.useCallback(()=>c.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),h.jsx(dw,{asChild:!0,...i,children:h.jsx(Pn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Wt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:Wt(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Wt(e.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Wt(e.onFocus,()=>{c.current||s.onOpen()}),onBlur:Wt(e.onBlur,s.onClose),onClick:Wt(e.onClick,s.onClose)})})});ZG.displayName=NN;var cwe="TooltipPortal",[Fft,uwe]=R4(cwe,{forceMount:void 0}),H1="TooltipContent",JG=x.forwardRef((e,t)=>{const n=uwe(H1,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,i=O4(H1,e.__scopeTooltip);return h.jsx(yl,{present:r||i.open,children:i.disableHoverableContent?h.jsx(XG,{side:s,...o,ref:t}):h.jsx(dwe,{side:s,...o,ref:t})})}),dwe=x.forwardRef((e,t)=>{const n=O4(H1,e.__scopeTooltip),r=zR(H1,e.__scopeTooltip),s=x.useRef(null),o=Rr(t,s),[i,a]=x.useState(null),{trigger:l,onClose:c}=n,u=s.current,{onPointerInTransitChange:f}=r,m=x.useCallback(()=>{a(null),f(!1)},[f]),g=x.useCallback((y,v)=>{const w=y.currentTarget,_={x:y.clientX,y:y.clientY},S=gwe(_,w.getBoundingClientRect()),k=bwe(_,S),R=ywe(v.getBoundingClientRect()),O=xwe([...k,...R]);a(O),f(!0)},[f]);return x.useEffect(()=>()=>m(),[m]),x.useEffect(()=>{if(l&&u){const y=w=>g(w,u),v=w=>g(w,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",v)}}},[l,u,g,m]),x.useEffect(()=>{if(i){const y=v=>{const w=v.target,_={x:v.clientX,y:v.clientY},S=(l==null?void 0:l.contains(w))||(u==null?void 0:u.contains(w)),k=!vwe(_,i);S?m():k&&(m(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,i,c,m]),h.jsx(XG,{...e,ref:o})}),[fwe,hwe]=R4(dx,{isInside:!1}),pwe=rwe("TooltipContent"),XG=x.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...a}=e,l=O4(H1,n),c=M4(n),{onClose:u}=l;return x.useEffect(()=>(document.addEventListener(AN,u),()=>document.removeEventListener(AN,u)),[u]),x.useEffect(()=>{if(l.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),h.jsx(Eb,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:h.jsxs(N4,{"data-state":l.stateAttribute,...c,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(pwe,{children:r}),h.jsx(fwe,{scope:n,isInside:!0,children:h.jsx(owe,{id:l.contentId,role:"tooltip",children:s||r})})]})})});JG.displayName=H1;var QG="TooltipArrow",mwe=x.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=M4(n);return hwe(QG,n).isInside?null:h.jsx(I4,{...s,...r,ref:t})});mwe.displayName=QG;function gwe(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function bwe(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function ywe(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function vwe(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const a=t[o],l=t[i],c=a.x,u=a.y,f=l.x,m=l.y;u>r!=m>r&&n<(f-c)*(r-u)/(m-u)+c&&(s=!s)}return s}function xwe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),wwe(t)}function wwe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Ewe=YG,_we=KG,Swe=ZG,eW=JG;const V1=Ewe,q1=_we,G1=Swe,um=x.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(eW,{ref:r,sideOffset:t,className:Qe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));um.displayName=eW.displayName;var Twe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Cwe=Twe.reduce((e,t)=>{const n=lw(`Primitive.${t}`),r=x.forwardRef((s,o)=>{const{asChild:i,...a}=s,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),kwe="Separator",LL="horizontal",Awe=["horizontal","vertical"],tW=x.forwardRef((e,t)=>{const{decorative:n,orientation:r=LL,...s}=e,o=Nwe(r)?r:LL,a=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return h.jsx(Cwe.div,{"data-orientation":o,...a,...s,ref:t})});tW.displayName=kwe;function Nwe(e){return Awe.includes(e)}var nW=tW;const Bf=x.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>h.jsx(nW,{ref:s,decorative:n,orientation:t,className:Qe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Bf.displayName=nW.displayName;var $5="focusScope.autoFocusOnMount",F5="focusScope.autoFocusOnUnmount",$L={bubbles:!1,cancelable:!0},Iwe="FocusScope",hw=x.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=e,[a,l]=x.useState(null),c=xu(s),u=xu(o),f=x.useRef(null),m=Rr(t,v=>l(v)),g=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let v=function(k){if(g.paused||!a)return;const R=k.target;a.contains(R)?f.current=R:Jh(f.current,{select:!0})},w=function(k){if(g.paused||!a)return;const R=k.relatedTarget;R!==null&&(a.contains(R)||Jh(f.current,{select:!0}))},_=function(k){if(document.activeElement===document.body)for(const O of k)O.removedNodes.length>0&&Jh(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const S=new MutationObserver(_);return a&&S.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),S.disconnect()}}},[r,a,g.paused]),x.useEffect(()=>{if(a){BL.add(g);const v=document.activeElement;if(!a.contains(v)){const _=new CustomEvent($5,$L);a.addEventListener($5,c),a.dispatchEvent(_),_.defaultPrevented||(Rwe(Lwe(rW(a)),{select:!0}),document.activeElement===v&&Jh(a))}return()=>{a.removeEventListener($5,c),setTimeout(()=>{const _=new CustomEvent(F5,$L);a.addEventListener(F5,u),a.dispatchEvent(_),_.defaultPrevented||Jh(v??document.body,{select:!0}),a.removeEventListener(F5,u),BL.remove(g)},0)}}},[a,c,u,g]);const y=x.useCallback(v=>{if(!n&&!r||g.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,_=document.activeElement;if(w&&_){const S=v.currentTarget,[k,R]=Mwe(S);k&&R?!v.shiftKey&&_===R?(v.preventDefault(),n&&Jh(k,{select:!0})):v.shiftKey&&_===k&&(v.preventDefault(),n&&Jh(R,{select:!0})):_===S&&v.preventDefault()}},[n,r,g.paused]);return h.jsx(Pn.div,{tabIndex:-1,...i,ref:m,onKeyDown:y})});hw.displayName=Iwe;function Rwe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Jh(r,{select:t}),document.activeElement!==n)return}function Mwe(e){const t=rW(e),n=FL(t,e),r=FL(t.reverse(),e);return[n,r]}function rW(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function FL(e,t){for(const n of e)if(!Owe(n,{upTo:t}))return n}function Owe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Dwe(e){return e instanceof HTMLInputElement&&"select"in e}function Jh(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Dwe(e)&&t&&e.select()}}var BL=Pwe();function Pwe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=zL(e,t),e.unshift(t)},remove(t){var n;e=zL(e,t),(n=e[0])==null||n.resume()}}}function zL(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Lwe(e){return e.filter(t=>t.tagName!=="A")}var B5=0;function D4(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??jL()),document.body.insertAdjacentElement("beforeend",e[1]??jL()),B5++,()=>{B5===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),B5--}},[])}function jL(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var pd=function(){return pd=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},pd.apply(this,arguments)};function sW(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function $we(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var T_="right-scroll-bar-position",C_="width-before-scroll-bar",Fwe="with-scroll-bars-hidden",Bwe="--removed-body-scroll-bar-size";function z5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function zwe(e,t){var n=x.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var jwe=typeof window<"u"?x.useLayoutEffect:x.useEffect,UL=new WeakMap;function Uwe(e,t){var n=zwe(null,function(r){return e.forEach(function(s){return z5(s,r)})});return jwe(function(){var r=UL.get(n);if(r){var s=new Set(r),o=new Set(e),i=n.current;s.forEach(function(a){o.has(a)||z5(a,null)}),o.forEach(function(a){s.has(a)||z5(a,i)})}UL.set(n,e)},[e]),n}function Hwe(e){return e}function Vwe(e,t){t===void 0&&(t=Hwe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(o){for(r=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(o),i=n}var l=function(){var u=i;i=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){i.push(u),c()},filter:function(u){return i=i.filter(u),n}}}};return s}function qwe(e){e===void 0&&(e={});var t=Vwe(null);return t.options=pd({async:!0,ssr:!1},e),t}var oW=function(e){var t=e.sideCar,n=sW(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,pd({},n))};oW.isSideCarExport=!0;function Gwe(e,t){return e.useMedium(t),oW}var iW=qwe(),j5=function(){},P4=x.forwardRef(function(e,t){var n=x.useRef(null),r=x.useState({onScrollCapture:j5,onWheelCapture:j5,onTouchMoveCapture:j5}),s=r[0],o=r[1],i=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,f=e.shards,m=e.sideCar,g=e.noRelative,y=e.noIsolation,v=e.inert,w=e.allowPinchZoom,_=e.as,S=_===void 0?"div":_,k=e.gapMode,R=sW(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=m,M=Uwe([n,t]),P=pd(pd({},R),s);return x.createElement(x.Fragment,null,u&&x.createElement(O,{sideCar:iW,removeScrollBar:c,shards:f,noRelative:g,noIsolation:y,inert:v,setCallbacks:o,allowPinchZoom:!!w,lockRef:n,gapMode:k}),i?x.cloneElement(x.Children.only(a),pd(pd({},P),{ref:M})):x.createElement(S,pd({},P,{className:l,ref:M}),a))});P4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};P4.classNames={fullWidth:C_,zeroRight:T_};var Wwe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ywe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Wwe();return t&&e.setAttribute("nonce",t),e}function Kwe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Zwe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Jwe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Ywe())&&(Kwe(t,n),Zwe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Xwe=function(){var e=Jwe();return function(t,n){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},aW=function(){var e=Xwe(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},Qwe={left:0,top:0,right:0,gap:0},U5=function(e){return parseInt(e||"",10)||0},eEe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[U5(n),U5(r),U5(s)]},tEe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Qwe;var t=eEe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},nEe=aW(),S1="data-scroll-locked",rEe=function(e,t,n,r){var s=e.left,o=e.top,i=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Fwe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(S1,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(T_,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(C_,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(T_," .").concat(T_,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(C_," .").concat(C_,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(S1,`] {
    `).concat(Bwe,": ").concat(a,`px;
  }
`)},HL=function(){var e=parseInt(document.body.getAttribute(S1)||"0",10);return isFinite(e)?e:0},sEe=function(){x.useEffect(function(){return document.body.setAttribute(S1,(HL()+1).toString()),function(){var e=HL()-1;e<=0?document.body.removeAttribute(S1):document.body.setAttribute(S1,e.toString())}},[])},oEe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;sEe();var o=x.useMemo(function(){return tEe(s)},[s]);return x.createElement(nEe,{styles:rEe(o,!t,s,n?"":"!important")})},IN=!1;if(typeof window<"u")try{var d2=Object.defineProperty({},"passive",{get:function(){return IN=!0,!0}});window.addEventListener("test",d2,d2),window.removeEventListener("test",d2,d2)}catch{IN=!1}var jg=IN?{passive:!1}:!1,iEe=function(e){return e.tagName==="TEXTAREA"},lW=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!iEe(e)&&n[t]==="visible")},aEe=function(e){return lW(e,"overflowY")},lEe=function(e){return lW(e,"overflowX")},VL=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=cW(e,r);if(s){var o=uW(e,r),i=o[1],a=o[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},cEe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},uEe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},cW=function(e,t){return e==="v"?aEe(t):lEe(t)},uW=function(e,t){return e==="v"?cEe(t):uEe(t)},dEe=function(e,t){return e==="h"&&t==="rtl"?-1:1},fEe=function(e,t,n,r,s){var o=dEe(e,window.getComputedStyle(t).direction),i=o*r,a=n.target,l=t.contains(a),c=!1,u=i>0,f=0,m=0;do{if(!a)break;var g=uW(e,a),y=g[0],v=g[1],w=g[2],_=v-w-o*y;(y||_)&&cW(e,a)&&(f+=_,m+=y);var S=a.parentNode;a=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(f)<1||!u&&Math.abs(m)<1)&&(c=!0),c},f2=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},qL=function(e){return[e.deltaX,e.deltaY]},GL=function(e){return e&&"current"in e?e.current:e},hEe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},pEe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},mEe=0,Ug=[];function gEe(e){var t=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),s=x.useState(mEe++)[0],o=x.useState(aW)[0],i=x.useRef(e);x.useEffect(function(){i.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=$we([e.lockRef.current],(e.shards||[]).map(GL),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=x.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var _=f2(v),S=n.current,k="deltaX"in v?v.deltaX:S[0]-_[0],R="deltaY"in v?v.deltaY:S[1]-_[1],O,M=v.target,P=Math.abs(k)>Math.abs(R)?"h":"v";if("touches"in v&&P==="h"&&M.type==="range")return!1;var j=window.getSelection(),q=j&&j.anchorNode,U=q?q===M||q.contains(M):!1;if(U)return!1;var z=VL(P,M);if(!z)return!0;if(z?O=P:(O=P==="v"?"h":"v",z=VL(P,M)),!z)return!1;if(!r.current&&"changedTouches"in v&&(k||R)&&(r.current=O),!O)return!0;var H=r.current||O;return fEe(H,w,v,H==="h"?k:R)},[]),l=x.useCallback(function(v){var w=v;if(!(!Ug.length||Ug[Ug.length-1]!==o)){var _="deltaY"in w?qL(w):f2(w),S=t.current.filter(function(O){return O.name===w.type&&(O.target===w.target||w.target===O.shadowParent)&&hEe(O.delta,_)})[0];if(S&&S.should){w.cancelable&&w.preventDefault();return}if(!S){var k=(i.current.shards||[]).map(GL).filter(Boolean).filter(function(O){return O.contains(w.target)}),R=k.length>0?a(w,k[0]):!i.current.noIsolation;R&&w.cancelable&&w.preventDefault()}}},[]),c=x.useCallback(function(v,w,_,S){var k={name:v,delta:w,target:_,should:S,shadowParent:bEe(_)};t.current.push(k),setTimeout(function(){t.current=t.current.filter(function(R){return R!==k})},1)},[]),u=x.useCallback(function(v){n.current=f2(v),r.current=void 0},[]),f=x.useCallback(function(v){c(v.type,qL(v),v.target,a(v,e.lockRef.current))},[]),m=x.useCallback(function(v){c(v.type,f2(v),v.target,a(v,e.lockRef.current))},[]);x.useEffect(function(){return Ug.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,jg),document.addEventListener("touchmove",l,jg),document.addEventListener("touchstart",u,jg),function(){Ug=Ug.filter(function(v){return v!==o}),document.removeEventListener("wheel",l,jg),document.removeEventListener("touchmove",l,jg),document.removeEventListener("touchstart",u,jg)}},[]);var g=e.removeScrollBar,y=e.inert;return x.createElement(x.Fragment,null,y?x.createElement(o,{styles:pEe(s)}):null,g?x.createElement(oEe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function bEe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const yEe=Gwe(iW,gEe);var pw=x.forwardRef(function(e,t){return x.createElement(P4,pd({},e,{ref:t,sideCar:yEe}))});pw.classNames=P4.classNames;var vEe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Hg=new WeakMap,h2=new WeakMap,p2={},H5=0,dW=function(e){return e&&(e.host||dW(e.parentNode))},xEe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=dW(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},wEe=function(e,t,n,r){var s=xEe(t,Array.isArray(e)?e:[e]);p2[n]||(p2[n]=new WeakMap);var o=p2[n],i=[],a=new Set,l=new Set(s),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};s.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))u(m);else try{var g=m.getAttribute(r),y=g!==null&&g!=="false",v=(Hg.get(m)||0)+1,w=(o.get(m)||0)+1;Hg.set(m,v),o.set(m,w),i.push(m),v===1&&y&&h2.set(m,!0),w===1&&m.setAttribute(n,"true"),y||m.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",m,_)}})};return u(t),a.clear(),H5++,function(){i.forEach(function(f){var m=Hg.get(f)-1,g=o.get(f)-1;Hg.set(f,m),o.set(f,g),m||(h2.has(f)||f.removeAttribute(r),h2.delete(f)),g||f.removeAttribute(n)}),H5--,H5||(Hg=new WeakMap,Hg=new WeakMap,h2=new WeakMap,p2={})}},L4=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=vEe(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),wEe(r,s,n,"aria-hidden")):function(){return null}};function EEe(e){const t=_Ee(e),n=x.forwardRef((r,s)=>{const{children:o,...i}=r,a=x.Children.toArray(o),l=a.find(TEe);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:s,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}function _Ee(e){const t=x.forwardRef((n,r)=>{const{children:s,...o}=n;if(x.isValidElement(s)){const i=kEe(s),a=CEe(o,s.props);return s.type!==x.Fragment&&(a.ref=r?Cd(r,i):i),x.cloneElement(s,a)}return x.Children.count(s)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var SEe=Symbol("radix.slottable");function TEe(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===SEe}function CEe(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const l=o(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function kEe(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var $4="Dialog",[fW]=Ha($4),[AEe,Iu]=fW($4),hW=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!0}=e,a=x.useRef(null),l=x.useRef(null),[c,u]=bl({prop:r,defaultProp:s??!1,onChange:o,caller:$4});return h.jsx(AEe,{scope:t,triggerRef:a,contentRef:l,contentId:Rc(),titleId:Rc(),descriptionId:Rc(),open:c,onOpenChange:u,onOpenToggle:x.useCallback(()=>u(f=>!f),[u]),modal:i,children:n})};hW.displayName=$4;var pW="DialogTrigger",mW=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Iu(pW,n),o=Rr(t,s.triggerRef);return h.jsx(Pn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":HR(s.open),...r,ref:o,onClick:Wt(e.onClick,s.onOpenToggle)})});mW.displayName=pW;var jR="DialogPortal",[NEe,gW]=fW(jR,{forceMount:void 0}),bW=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=Iu(jR,t);return h.jsx(NEe,{scope:t,forceMount:n,children:x.Children.map(r,i=>h.jsx(yl,{present:n||o.open,children:h.jsx(fw,{asChild:!0,container:s,children:i})}))})};bW.displayName=jR;var aS="DialogOverlay",yW=x.forwardRef((e,t)=>{const n=gW(aS,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=Iu(aS,e.__scopeDialog);return o.modal?h.jsx(yl,{present:r||o.open,children:h.jsx(REe,{...s,ref:t})}):null});yW.displayName=aS;var IEe=EEe("DialogOverlay.RemoveScroll"),REe=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Iu(aS,n);return h.jsx(pw,{as:IEe,allowPinchZoom:!0,shards:[s.contentRef],children:h.jsx(Pn.div,{"data-state":HR(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),dm="DialogContent",vW=x.forwardRef((e,t)=>{const n=gW(dm,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=Iu(dm,e.__scopeDialog);return h.jsx(yl,{present:r||o.open,children:o.modal?h.jsx(MEe,{...s,ref:t}):h.jsx(OEe,{...s,ref:t})})});vW.displayName=dm;var MEe=x.forwardRef((e,t)=>{const n=Iu(dm,e.__scopeDialog),r=x.useRef(null),s=Rr(t,n.contentRef,r);return x.useEffect(()=>{const o=r.current;if(o)return L4(o)},[]),h.jsx(xW,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wt(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Wt(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&o.preventDefault()}),onFocusOutside:Wt(e.onFocusOutside,o=>o.preventDefault())})}),OEe=x.forwardRef((e,t)=>{const n=Iu(dm,e.__scopeDialog),r=x.useRef(!1),s=x.useRef(!1);return h.jsx(xW,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),xW=x.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=e,a=Iu(dm,n),l=x.useRef(null),c=Rr(t,l);return D4(),h.jsxs(h.Fragment,{children:[h.jsx(hw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:h.jsx(Eb,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":HR(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(DEe,{titleId:a.titleId}),h.jsx(LEe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),UR="DialogTitle",wW=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Iu(UR,n);return h.jsx(Pn.h2,{id:s.titleId,...r,ref:t})});wW.displayName=UR;var EW="DialogDescription",_W=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Iu(EW,n);return h.jsx(Pn.p,{id:s.descriptionId,...r,ref:t})});_W.displayName=EW;var SW="DialogClose",TW=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Iu(SW,n);return h.jsx(Pn.button,{type:"button",...r,ref:t,onClick:Wt(e.onClick,()=>s.onOpenChange(!1))})});TW.displayName=SW;function HR(e){return e?"open":"closed"}var CW="DialogTitleWarning",[Bft,kW]=Rye(CW,{contentName:dm,titleName:UR,docsSlug:"dialog"}),DEe=({titleId:e})=>{const t=kW(CW),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},PEe="DialogDescriptionWarning",LEe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kW(PEe).contentName}}.`;return x.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},AW=hW,$Ee=mW,NW=bW,IW=yW,RW=vW,MW=wW,FEe=_W,OW=TW;function DW({...e}){return h.jsx(AW,{"data-slot":"dialog",...e})}function BEe({...e}){return h.jsx($Ee,{"data-slot":"dialog-trigger",...e})}function zEe({...e}){return h.jsx(NW,{"data-slot":"dialog-portal",...e})}function jEe({className:e,...t}){return h.jsx(IW,{"data-slot":"dialog-overlay",className:Qe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function PW({className:e,children:t,...n}){return h.jsxs(zEe,{"data-slot":"dialog-portal",children:[h.jsx(jEe,{}),h.jsxs(RW,{"data-slot":"dialog-content",className:Qe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,h.jsxs(OW,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[h.jsx(qr,{}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function LW({className:e,...t}){return h.jsx("div",{"data-slot":"dialog-header",className:Qe("flex flex-col gap-2 text-center sm:text-left",e),...t})}function UEe({className:e,...t}){return h.jsx("div",{"data-slot":"dialog-footer",className:Qe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function $W({className:e,...t}){return h.jsx(MW,{"data-slot":"dialog-title",className:Qe("text-lg leading-none font-semibold",e),...t})}function HEe({className:e,...t}){return h.jsx(FEe,{"data-slot":"dialog-description",className:Qe("text-muted-foreground text-sm",e),...t})}function VEe(e){const t=qEe(e),n=x.forwardRef((r,s)=>{const{children:o,...i}=r,a=x.Children.toArray(o),l=a.find(WEe);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:s,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}function qEe(e){const t=x.forwardRef((n,r)=>{const{children:s,...o}=n;if(x.isValidElement(s)){const i=KEe(s),a=YEe(o,s.props);return s.type!==x.Fragment&&(a.ref=r?Cd(r,i):i),x.cloneElement(s,a)}return x.Children.count(s)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var GEe=Symbol("radix.slottable");function WEe(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===GEe}function YEe(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const l=o(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function KEe(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var RN=["Enter"," "],ZEe=["ArrowDown","PageUp","Home"],FW=["ArrowUp","PageDown","End"],JEe=[...ZEe,...FW],XEe={ltr:[...RN,"ArrowRight"],rtl:[...RN,"ArrowLeft"]},QEe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},mw="Menu",[fx,e2e,t2e]=vR(mw),[Im,BW]=Ha(mw,[t2e,z0,B0]),F4=z0(),zW=B0(),[n2e,Rm]=Im(mw),[r2e,gw]=Im(mw),jW=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:o,modal:i=!0}=e,a=F4(t),[l,c]=x.useState(null),u=x.useRef(!1),f=xu(o),m=wb(s);return x.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),h.jsx(A4,{...a,children:h.jsx(n2e,{scope:t,open:n,onOpenChange:f,content:l,onContentChange:c,children:h.jsx(r2e,{scope:t,onClose:x.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:m,modal:i,children:r})})})};jW.displayName=mw;var s2e="MenuAnchor",VR=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=F4(n);return h.jsx(dw,{...s,...r,ref:t})});VR.displayName=s2e;var qR="MenuPortal",[o2e,UW]=Im(qR,{forceMount:void 0}),HW=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,o=Rm(qR,t);return h.jsx(o2e,{scope:t,forceMount:n,children:h.jsx(yl,{present:n||o.open,children:h.jsx(fw,{asChild:!0,container:s,children:r})})})};HW.displayName=qR;var Mc="MenuContent",[i2e,GR]=Im(Mc),VW=x.forwardRef((e,t)=>{const n=UW(Mc,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=Rm(Mc,e.__scopeMenu),i=gw(Mc,e.__scopeMenu);return h.jsx(fx.Provider,{scope:e.__scopeMenu,children:h.jsx(yl,{present:r||o.open,children:h.jsx(fx.Slot,{scope:e.__scopeMenu,children:i.modal?h.jsx(a2e,{...s,ref:t}):h.jsx(l2e,{...s,ref:t})})})})}),a2e=x.forwardRef((e,t)=>{const n=Rm(Mc,e.__scopeMenu),r=x.useRef(null),s=Rr(t,r);return x.useEffect(()=>{const o=r.current;if(o)return L4(o)},[]),h.jsx(WR,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Wt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),l2e=x.forwardRef((e,t)=>{const n=Rm(Mc,e.__scopeMenu);return h.jsx(WR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),c2e=VEe("MenuContent.ScrollLock"),WR=x.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:y,...v}=e,w=Rm(Mc,n),_=gw(Mc,n),S=F4(n),k=zW(n),R=e2e(n),[O,M]=x.useState(null),P=x.useRef(null),j=Rr(t,P,w.onContentChange),q=x.useRef(0),U=x.useRef(""),z=x.useRef(0),H=x.useRef(null),F=x.useRef("right"),W=x.useRef(0),X=y?pw:x.Fragment,J=y?{as:c2e,allowPinchZoom:!0}:void 0,ee=ie=>{var he,Fe;const Z=U.current+ie,te=R().filter(De=>!De.disabled),oe=document.activeElement,Q=(he=te.find(De=>De.ref.current===oe))==null?void 0:he.textValue,Te=te.map(De=>De.textValue),ge=w2e(Te,Z,Q),Ce=(Fe=te.find(De=>De.textValue===ge))==null?void 0:Fe.ref.current;(function De(Re){U.current=Re,window.clearTimeout(q.current),Re!==""&&(q.current=window.setTimeout(()=>De(""),1e3))})(Z),Ce&&setTimeout(()=>Ce.focus())};x.useEffect(()=>()=>window.clearTimeout(q.current),[]),D4();const re=x.useCallback(ie=>{var te,oe;return F.current===((te=H.current)==null?void 0:te.side)&&_2e(ie,(oe=H.current)==null?void 0:oe.area)},[]);return h.jsx(i2e,{scope:n,searchRef:U,onItemEnter:x.useCallback(ie=>{re(ie)&&ie.preventDefault()},[re]),onItemLeave:x.useCallback(ie=>{var Z;re(ie)||((Z=P.current)==null||Z.focus(),M(null))},[re]),onTriggerLeave:x.useCallback(ie=>{re(ie)&&ie.preventDefault()},[re]),pointerGraceTimerRef:z,onPointerGraceIntentChange:x.useCallback(ie=>{H.current=ie},[]),children:h.jsx(X,{...J,children:h.jsx(hw,{asChild:!0,trapped:s,onMountAutoFocus:Wt(o,ie=>{var Z;ie.preventDefault(),(Z=P.current)==null||Z.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:h.jsx(Eb,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:h.jsx(x4,{asChild:!0,...k,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:M,onEntryFocus:Wt(l,ie=>{_.isUsingKeyboardRef.current||ie.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(N4,{role:"menu","aria-orientation":"vertical","data-state":iY(w.open),"data-radix-menu-content":"",dir:_.dir,...S,...v,ref:j,style:{outline:"none",...v.style},onKeyDown:Wt(v.onKeyDown,ie=>{const te=ie.target.closest("[data-radix-menu-content]")===ie.currentTarget,oe=ie.ctrlKey||ie.altKey||ie.metaKey,Q=ie.key.length===1;te&&(ie.key==="Tab"&&ie.preventDefault(),!oe&&Q&&ee(ie.key));const Te=P.current;if(ie.target!==Te||!JEe.includes(ie.key))return;ie.preventDefault();const Ce=R().filter(he=>!he.disabled).map(he=>he.ref.current);FW.includes(ie.key)&&Ce.reverse(),v2e(Ce)}),onBlur:Wt(e.onBlur,ie=>{ie.currentTarget.contains(ie.target)||(window.clearTimeout(q.current),U.current="")}),onPointerMove:Wt(e.onPointerMove,hx(ie=>{const Z=ie.target,te=W.current!==ie.clientX;if(ie.currentTarget.contains(Z)&&te){const oe=ie.clientX>W.current?"right":"left";F.current=oe,W.current=ie.clientX}}))})})})})})})});VW.displayName=Mc;var u2e="MenuGroup",YR=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Pn.div,{role:"group",...r,ref:t})});YR.displayName=u2e;var d2e="MenuLabel",qW=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Pn.div,{...r,ref:t})});qW.displayName=d2e;var lS="MenuItem",WL="menu.itemSelect",B4=x.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,o=x.useRef(null),i=gw(lS,e.__scopeMenu),a=GR(lS,e.__scopeMenu),l=Rr(t,o),c=x.useRef(!1),u=()=>{const f=o.current;if(!n&&f){const m=new CustomEvent(WL,{bubbles:!0,cancelable:!0});f.addEventListener(WL,g=>r==null?void 0:r(g),{once:!0}),Yq(f,m),m.defaultPrevented?c.current=!1:i.onClose()}};return h.jsx(GW,{...s,ref:l,disabled:n,onClick:Wt(e.onClick,u),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),c.current=!0},onPointerUp:Wt(e.onPointerUp,f=>{var m;c.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:Wt(e.onKeyDown,f=>{const m=a.searchRef.current!=="";n||m&&f.key===" "||RN.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});B4.displayName=lS;var GW=x.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=e,i=GR(lS,n),a=zW(n),l=x.useRef(null),c=Rr(t,l),[u,f]=x.useState(!1),[m,g]=x.useState("");return x.useEffect(()=>{const y=l.current;y&&g((y.textContent??"").trim())},[o.children]),h.jsx(fx.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:h.jsx(w4,{asChild:!0,...a,focusable:!r,children:h.jsx(Pn.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:c,onPointerMove:Wt(e.onPointerMove,hx(y=>{r?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Wt(e.onPointerLeave,hx(y=>i.onItemLeave(y))),onFocus:Wt(e.onFocus,()=>f(!0)),onBlur:Wt(e.onBlur,()=>f(!1))})})})}),f2e="MenuCheckboxItem",WW=x.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return h.jsx(XW,{scope:e.__scopeMenu,checked:n,children:h.jsx(B4,{role:"menuitemcheckbox","aria-checked":cS(n)?"mixed":n,...s,ref:t,"data-state":ZR(n),onSelect:Wt(s.onSelect,()=>r==null?void 0:r(cS(n)?!0:!n),{checkForDefaultPrevented:!1})})})});WW.displayName=f2e;var YW="MenuRadioGroup",[h2e,p2e]=Im(YW,{value:void 0,onValueChange:()=>{}}),KW=x.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,o=xu(r);return h.jsx(h2e,{scope:e.__scopeMenu,value:n,onValueChange:o,children:h.jsx(YR,{...s,ref:t})})});KW.displayName=YW;var ZW="MenuRadioItem",JW=x.forwardRef((e,t)=>{const{value:n,...r}=e,s=p2e(ZW,e.__scopeMenu),o=n===s.value;return h.jsx(XW,{scope:e.__scopeMenu,checked:o,children:h.jsx(B4,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":ZR(o),onSelect:Wt(r.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});JW.displayName=ZW;var KR="MenuItemIndicator",[XW,m2e]=Im(KR,{checked:!1}),QW=x.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,o=m2e(KR,n);return h.jsx(yl,{present:r||cS(o.checked)||o.checked===!0,children:h.jsx(Pn.span,{...s,ref:t,"data-state":ZR(o.checked)})})});QW.displayName=KR;var g2e="MenuSeparator",eY=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Pn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});eY.displayName=g2e;var b2e="MenuArrow",tY=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=F4(n);return h.jsx(I4,{...s,...r,ref:t})});tY.displayName=b2e;var y2e="MenuSub",[zft,nY]=Im(y2e),dv="MenuSubTrigger",rY=x.forwardRef((e,t)=>{const n=Rm(dv,e.__scopeMenu),r=gw(dv,e.__scopeMenu),s=nY(dv,e.__scopeMenu),o=GR(dv,e.__scopeMenu),i=x.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=o,c={__scopeMenu:e.__scopeMenu},u=x.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),h.jsx(VR,{asChild:!0,...c,children:h.jsx(GW,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":iY(n.open),...e,ref:Cd(t,s.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Wt(e.onPointerMove,hx(f=>{o.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Wt(e.onPointerLeave,hx(f=>{var g,y;u();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const v=(y=n.content)==null?void 0:y.dataset.side,w=v==="right",_=w?-5:5,S=m[w?"left":"right"],k=m[w?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:S,y:m.top},{x:k,y:m.top},{x:k,y:m.bottom},{x:S,y:m.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Wt(e.onKeyDown,f=>{var g;const m=o.searchRef.current!=="";e.disabled||m&&f.key===" "||XEe[r.dir].includes(f.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),f.preventDefault())})})})});rY.displayName=dv;var sY="MenuSubContent",oY=x.forwardRef((e,t)=>{const n=UW(Mc,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=Rm(Mc,e.__scopeMenu),i=gw(Mc,e.__scopeMenu),a=nY(sY,e.__scopeMenu),l=x.useRef(null),c=Rr(t,l);return h.jsx(fx.Provider,{scope:e.__scopeMenu,children:h.jsx(yl,{present:r||o.open,children:h.jsx(fx.Slot,{scope:e.__scopeMenu,children:h.jsx(WR,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;i.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Wt(e.onFocusOutside,u=>{u.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Wt(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:Wt(e.onKeyDown,u=>{var g;const f=u.currentTarget.contains(u.target),m=QEe[i.dir].includes(u.key);f&&m&&(o.onOpenChange(!1),(g=a.trigger)==null||g.focus(),u.preventDefault())})})})})})});oY.displayName=sY;function iY(e){return e?"open":"closed"}function cS(e){return e==="indeterminate"}function ZR(e){return cS(e)?"indeterminate":e?"checked":"unchecked"}function v2e(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function x2e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function w2e(e,t,n){const s=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=x2e(e,Math.max(o,0));s.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function E2e(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const a=t[o],l=t[i],c=a.x,u=a.y,f=l.x,m=l.y;u>r!=m>r&&n<(f-c)*(r-u)/(m-u)+c&&(s=!s)}return s}function _2e(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return E2e(n,t)}function hx(e){return t=>t.pointerType==="mouse"?e(t):void 0}var S2e=jW,T2e=VR,C2e=HW,k2e=VW,A2e=YR,N2e=qW,I2e=B4,R2e=WW,M2e=KW,O2e=JW,D2e=QW,P2e=eY,L2e=tY,$2e=rY,F2e=oY,z4="DropdownMenu",[B2e]=Ha(z4,[BW]),Va=BW(),[z2e,aY]=B2e(z4),lY=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:i,modal:a=!0}=e,l=Va(t),c=x.useRef(null),[u,f]=bl({prop:s,defaultProp:o??!1,onChange:i,caller:z4});return h.jsx(z2e,{scope:t,triggerId:Rc(),triggerRef:c,contentId:Rc(),open:u,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(m=>!m),[f]),modal:a,children:h.jsx(S2e,{...l,open:u,onOpenChange:f,dir:r,modal:a,children:n})})};lY.displayName=z4;var cY="DropdownMenuTrigger",uY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,o=aY(cY,n),i=Va(n);return h.jsx(T2e,{asChild:!0,...i,children:h.jsx(Pn.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Cd(t,o.triggerRef),onPointerDown:Wt(e.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:Wt(e.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});uY.displayName=cY;var j2e="DropdownMenuPortal",dY=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Va(t);return h.jsx(C2e,{...r,...n})};dY.displayName=j2e;var fY="DropdownMenuContent",hY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=aY(fY,n),o=Va(n),i=x.useRef(!1);return h.jsx(k2e,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:t,onCloseAutoFocus:Wt(e.onCloseAutoFocus,a=>{var l;i.current||(l=s.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:Wt(e.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hY.displayName=fY;var U2e="DropdownMenuGroup",H2e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Va(n);return h.jsx(A2e,{...s,...r,ref:t})});H2e.displayName=U2e;var V2e="DropdownMenuLabel",pY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Va(n);return h.jsx(N2e,{...s,...r,ref:t})});pY.displayName=V2e;var q2e="DropdownMenuItem",mY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Va(n);return h.jsx(I2e,{...s,...r,ref:t})});mY.displayName=q2e;var G2e="DropdownMenuCheckboxItem",W2e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Va(n);return h.jsx(R2e,{...s,...r,ref:t})});W2e.displayName=G2e;var Y2e="DropdownMenuRadioGroup",K2e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Va(n);return h.jsx(M2e,{...s,...r,ref:t})});K2e.displayName=Y2e;var Z2e="DropdownMenuRadioItem",J2e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Va(n);return h.jsx(O2e,{...s,...r,ref:t})});J2e.displayName=Z2e;var X2e="DropdownMenuItemIndicator",Q2e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Va(n);return h.jsx(D2e,{...s,...r,ref:t})});Q2e.displayName=X2e;var e_e="DropdownMenuSeparator",gY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Va(n);return h.jsx(P2e,{...s,...r,ref:t})});gY.displayName=e_e;var t_e="DropdownMenuArrow",n_e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Va(n);return h.jsx(L2e,{...s,...r,ref:t})});n_e.displayName=t_e;var r_e="DropdownMenuSubTrigger",s_e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Va(n);return h.jsx($2e,{...s,...r,ref:t})});s_e.displayName=r_e;var o_e="DropdownMenuSubContent",i_e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Va(n);return h.jsx(F2e,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});i_e.displayName=o_e;var a_e=lY,l_e=uY,c_e=dY,u_e=hY,d_e=pY,f_e=mY,h_e=gY;function bw({...e}){return h.jsx(a_e,{"data-slot":"dropdown-menu",...e})}function yw({...e}){return h.jsx(l_e,{"data-slot":"dropdown-menu-trigger",...e})}function vw({className:e,sideOffset:t=4,...n}){return h.jsx(c_e,{children:h.jsx(u_e,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function uu({className:e,inset:t,variant:n="default",...r}){return h.jsx(f_e,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:Qe("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function p_e({className:e,inset:t,...n}){return h.jsx(d_e,{"data-slot":"dropdown-menu-label","data-inset":t,className:Qe("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function YL({className:e,...t}){return h.jsx(h_e,{"data-slot":"dropdown-menu-separator",className:Qe("bg-border -mx-1 my-1 h-px",e),...t})}function m2({className:e,...t}){return h.jsx("span",{"data-slot":"dropdown-menu-shortcut",className:Qe("text-muted-foreground ml-auto text-xs tracking-widest",e),...t})}function m_e(e,t=[]){let n=[];function r(o,i){const a=x.createContext(i);a.displayName=o+"Context";const l=n.length;n=[...n,i];const c=f=>{var _;const{scope:m,children:g,...y}=f,v=((_=m==null?void 0:m[e])==null?void 0:_[l])||a,w=x.useMemo(()=>y,Object.values(y));return h.jsx(v.Provider,{value:w,children:g})};c.displayName=o+"Provider";function u(f,m){var v;const g=((v=m==null?void 0:m[e])==null?void 0:v[l])||a,y=x.useContext(g);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[c,u]}const s=()=>{const o=n.map(i=>x.createContext(i));return function(a){const l=(a==null?void 0:a[e])||o;return x.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return s.scopeName=e,[r,g_e(s,...t)]}function g_e(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(o)[`__scope${c}`];return{...a,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var b_e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bY=b_e.reduce((e,t)=>{const n=lw(`Primitive.${t}`),r=x.forwardRef((s,o)=>{const{asChild:i,...a}=s,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),JR="Progress",XR=100,[y_e]=m_e(JR),[v_e,x_e]=y_e(JR),yY=x.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=w_e,...i}=e;(s||s===0)&&!KL(s)&&console.error(E_e(`${s}`,"Progress"));const a=KL(s)?s:XR;r!==null&&!ZL(r,a)&&console.error(__e(`${r}`,"Progress"));const l=ZL(r,a)?r:null,c=uS(l)?o(l,a):void 0;return h.jsx(v_e,{scope:n,value:l,max:a,children:h.jsx(bY.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":uS(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":wY(l,a),"data-value":l??void 0,"data-max":a,...i,ref:t})})});yY.displayName=JR;var vY="ProgressIndicator",xY=x.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=x_e(vY,n);return h.jsx(bY.div,{"data-state":wY(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});xY.displayName=vY;function w_e(e,t){return`${Math.round(e/t*100)}%`}function wY(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function uS(e){return typeof e=="number"}function KL(e){return uS(e)&&!isNaN(e)&&e>0}function ZL(e,t){return uS(e)&&!isNaN(e)&&e<=t&&e>=0}function E_e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${XR}\`.`}function __e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${XR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var S_e=yY,T_e=xY;function C_e({className:e,indicatorColor:t,value:n,...r}){return h.jsx(S_e,{"data-slot":"progress",className:Qe("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:h.jsx(T_e,{"data-slot":"progress-indicator",className:Qe("bg-primary h-full w-full flex-1 transition-all",t),style:{transform:`translateX(-${100-(n||0)}%)`}})})}function k_e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return x.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const j4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Sb(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function QR(e){return"nodeType"in e}function qa(e){var t,n;return e?Sb(e)?e:QR(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function e8(e){const{Document:t}=qa(e);return e instanceof t}function xw(e){return Sb(e)?!1:e instanceof qa(e).HTMLElement}function EY(e){return e instanceof qa(e).SVGElement}function Tb(e){return e?Sb(e)?e.document:QR(e)?e8(e)?e:xw(e)||EY(e)?e.ownerDocument:document:document:document}const Tu=j4?x.useLayoutEffect:x.useEffect;function U4(e){const t=x.useRef(e);return Tu(()=>{t.current=e}),x.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function A_e(){const e=x.useRef(null),t=x.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=x.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function px(e,t){t===void 0&&(t=[e]);const n=x.useRef(e);return Tu(()=>{n.current!==e&&(n.current=e)},t),n}function ww(e,t){const n=x.useRef();return x.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function dS(e){const t=U4(e),n=x.useRef(null),r=x.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function fS(e){const t=x.useRef();return x.useEffect(()=>{t.current=e},[e]),t.current}let V5={};function Ew(e,t){return x.useMemo(()=>{if(t)return t;const n=V5[e]==null?0:V5[e]+1;return V5[e]=n,e+"-"+n},[e,t])}function _Y(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,i)=>{const a=Object.entries(i);for(const[l,c]of a){const u=o[l];u!=null&&(o[l]=u+e*c)}return o},{...t})}}const T1=_Y(1),mx=_Y(-1);function N_e(e){return"clientX"in e&&"clientY"in e}function H4(e){if(!e)return!1;const{KeyboardEvent:t}=qa(e.target);return t&&e instanceof t}function I_e(e){if(!e)return!1;const{TouchEvent:t}=qa(e.target);return t&&e instanceof t}function hS(e){if(I_e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return N_e(e)?{x:e.clientX,y:e.clientY}:null}const Cu=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Cu.Translate.toString(e),Cu.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),JL="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function R_e(e){return e.matches(JL)?e:e.querySelector(JL)}const M_e={display:"none"};function O_e(e){let{id:t,value:n}=e;return Me.createElement("div",{id:t,style:M_e},n)}function D_e(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Me.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function P_e(){const[e,t]=x.useState("");return{announce:x.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const SY=x.createContext(null);function L_e(e){const t=x.useContext(SY);x.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function $_e(){const[e]=x.useState(()=>new Set),t=x.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[x.useCallback(r=>{let{type:s,event:o}=r;e.forEach(i=>{var a;return(a=i[s])==null?void 0:a.call(i,o)})},[e]),t]}const F_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},B_e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function z_e(e){let{announcements:t=B_e,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=F_e}=e;const{announce:o,announcement:i}=P_e(),a=Ew("DndLiveRegion"),[l,c]=x.useState(!1);if(x.useEffect(()=>{c(!0)},[]),L_e(x.useMemo(()=>({onDragStart(f){let{active:m}=f;o(t.onDragStart({active:m}))},onDragMove(f){let{active:m,over:g}=f;t.onDragMove&&o(t.onDragMove({active:m,over:g}))},onDragOver(f){let{active:m,over:g}=f;o(t.onDragOver({active:m,over:g}))},onDragEnd(f){let{active:m,over:g}=f;o(t.onDragEnd({active:m,over:g}))},onDragCancel(f){let{active:m,over:g}=f;o(t.onDragCancel({active:m,over:g}))}}),[o,t])),!l)return null;const u=Me.createElement(Me.Fragment,null,Me.createElement(O_e,{id:r,value:s.draggable}),Me.createElement(D_e,{id:a,announcement:i}));return n?pl.createPortal(u,n):u}var Ii;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ii||(Ii={}));function pS(){}function m0(e,t){return x.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function t8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return x.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ku=Object.freeze({x:0,y:0});function n8(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function j_e(e,t){const n=hS(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function r8(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function U_e(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function MN(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function V4(e,t){if(!e||e.length===0)return null;const[n]=e;return t?n[t]:n}function XL(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const mS=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=XL(t,t.left,t.top),o=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=n8(XL(l),s);o.push({id:a,data:{droppableContainer:i,value:c}})}}return o.sort(r8)},TY=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=MN(t),o=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=MN(l),u=s.reduce((m,g,y)=>m+n8(c[y],g),0),f=Number((u/4).toFixed(4));o.push({id:a,data:{droppableContainer:i,value:f}})}}return o.sort(r8)};function H_e(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),i=s-r,a=o-n;if(r<s&&n<o){const l=t.width*t.height,c=e.width*e.height,u=i*a,f=u/(l+c-u);return Number(f.toFixed(4))}return 0}const CY=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:i}=o,a=n.get(i);if(a){const l=H_e(a,t);l>0&&s.push({id:i,data:{droppableContainer:o,value:l}})}}return s.sort(U_e)};function V_e(e,t){const{top:n,left:r,bottom:s,right:o}=t;return n<=e.y&&e.y<=s&&r<=e.x&&e.x<=o}const q_e=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const s=[];for(const o of t){const{id:i}=o,a=n.get(i);if(a&&V_e(r,a)){const c=MN(a).reduce((f,m)=>f+n8(r,m),0),u=Number((c/4).toFixed(4));s.push({id:i,data:{droppableContainer:o,value:u}})}}return s.sort(r8)};function G_e(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function kY(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ku}function W_e(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((i,a)=>({...i,top:i.top+e*a.y,bottom:i.bottom+e*a.y,left:i.left+e*a.x,right:i.right+e*a.x}),{...n})}}const Y_e=W_e(1);function AY(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function K_e(e,t,n){const r=AY(t);if(!r)return e;const{scaleX:s,scaleY:o,x:i,y:a}=r,l=e.left-i-(1-s)*parseFloat(n),c=e.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),u=s?e.width/s:e.width,f=o?e.height/o:e.height;return{width:u,height:f,top:c,right:l+u,bottom:c+f,left:l}}const Z_e={ignoreTransform:!1};function Cb(e,t){t===void 0&&(t=Z_e);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:u}=qa(e).getComputedStyle(e);c&&(n=K_e(n,c,u))}const{top:r,left:s,width:o,height:i,bottom:a,right:l}=n;return{top:r,left:s,width:o,height:i,bottom:a,right:l}}function QL(e){return Cb(e,{ignoreTransform:!0})}function J_e(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function X_e(e,t){return t===void 0&&(t=qa(e).getComputedStyle(e)),t.position==="fixed"}function Q_e(e,t){t===void 0&&(t=qa(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function q4(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(e8(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!xw(s)||EY(s)||n.includes(s))return n;const o=qa(e).getComputedStyle(s);return s!==e&&Q_e(s,o)&&n.push(s),X_e(s,o)?n:r(s.parentNode)}return e?r(e):n}function NY(e){const[t]=q4(e,1);return t??null}function q5(e){return!j4||!e?null:Sb(e)?e:QR(e)?e8(e)||e===Tb(e).scrollingElement?window:xw(e)?e:null:null}function IY(e){return Sb(e)?e.scrollX:e.scrollLeft}function RY(e){return Sb(e)?e.scrollY:e.scrollTop}function ON(e){return{x:IY(e),y:RY(e)}}var ji;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ji||(ji={}));function MY(e){return!j4||!e?!1:e===document.scrollingElement}function OY(e){const t={x:0,y:0},n=MY(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:i,isRight:a,maxScroll:r,minScroll:t}}const eSe={x:.2,y:.2};function tSe(e,t,n,r,s){let{top:o,left:i,right:a,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=eSe);const{isTop:c,isBottom:u,isLeft:f,isRight:m}=OY(e),g={x:0,y:0},y={x:0,y:0},v={height:t.height*s.y,width:t.width*s.x};return!c&&o<=t.top+v.height?(g.y=ji.Backward,y.y=r*Math.abs((t.top+v.height-o)/v.height)):!u&&l>=t.bottom-v.height&&(g.y=ji.Forward,y.y=r*Math.abs((t.bottom-v.height-l)/v.height)),!m&&a>=t.right-v.width?(g.x=ji.Forward,y.x=r*Math.abs((t.right-v.width-a)/v.width)):!f&&i<=t.left+v.width&&(g.x=ji.Backward,y.x=r*Math.abs((t.left+v.width-i)/v.width)),{direction:g,speed:y}}function nSe(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function DY(e){return e.reduce((t,n)=>T1(t,ON(n)),ku)}function rSe(e){return e.reduce((t,n)=>t+IY(n),0)}function sSe(e){return e.reduce((t,n)=>t+RY(n),0)}function PY(e,t){if(t===void 0&&(t=Cb),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);NY(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const oSe=[["x",["left","right"],rSe],["y",["top","bottom"],sSe]];class s8{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=q4(n),s=DY(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,i,a]of oSe)for(const l of i)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=s[o]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Rv{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function iSe(e){const{EventTarget:t}=qa(e);return e instanceof t?e:Tb(e)}function G5(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Ec;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ec||(Ec={}));function e$(e){e.preventDefault()}function aSe(e){e.stopPropagation()}var cr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(cr||(cr={}));const LY={start:[cr.Space,cr.Enter],cancel:[cr.Esc],end:[cr.Space,cr.Enter,cr.Tab]},lSe=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case cr.Right:return{...n,x:n.x+25};case cr.Left:return{...n,x:n.x-25};case cr.Down:return{...n,y:n.y+25};case cr.Up:return{...n,y:n.y-25}}};class G4{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Rv(Tb(n)),this.windowListeners=new Rv(qa(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ec.Resize,this.handleCancel),this.windowListeners.add(Ec.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ec.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&PY(r),n(ku)}handleKeyDown(t){if(H4(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=LY,coordinateGetter:i=lSe,scrollBehavior:a="smooth"}=s,{code:l}=t;if(o.end.includes(l)){this.handleEnd(t);return}if(o.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:ku;this.referenceCoordinates||(this.referenceCoordinates=u);const f=i(t,{active:n,context:r.current,currentCoordinates:u});if(f){const m=mx(f,u),g={x:0,y:0},{scrollableAncestors:y}=r.current;for(const v of y){const w=t.code,{isTop:_,isRight:S,isLeft:k,isBottom:R,maxScroll:O,minScroll:M}=OY(v),P=nSe(v),j={x:Math.min(w===cr.Right?P.right-P.width/2:P.right,Math.max(w===cr.Right?P.left:P.left+P.width/2,f.x)),y:Math.min(w===cr.Down?P.bottom-P.height/2:P.bottom,Math.max(w===cr.Down?P.top:P.top+P.height/2,f.y))},q=w===cr.Right&&!S||w===cr.Left&&!k,U=w===cr.Down&&!R||w===cr.Up&&!_;if(q&&j.x!==f.x){const z=v.scrollLeft+m.x,H=w===cr.Right&&z<=O.x||w===cr.Left&&z>=M.x;if(H&&!m.y){v.scrollTo({left:z,behavior:a});return}H?g.x=v.scrollLeft-z:g.x=w===cr.Right?v.scrollLeft-O.x:v.scrollLeft-M.x,g.x&&v.scrollBy({left:-g.x,behavior:a});break}else if(U&&j.y!==f.y){const z=v.scrollTop+m.y,H=w===cr.Down&&z<=O.y||w===cr.Up&&z>=M.y;if(H&&!m.x){v.scrollTo({top:z,behavior:a});return}H?g.y=v.scrollTop-z:g.y=w===cr.Down?v.scrollTop-O.y:v.scrollTop-M.y,g.y&&v.scrollBy({top:-g.y,behavior:a});break}}this.handleMove(t,T1(mx(f,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}G4.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=LY,onActivation:s}=t,{active:o}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function t$(e){return!!(e&&"distance"in e)}function n$(e){return!!(e&&"delay"in e)}class o8{constructor(t,n,r){var s;r===void 0&&(r=iSe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:i}=o;this.props=t,this.events=n,this.document=Tb(i),this.documentListeners=new Rv(this.document),this.listeners=new Rv(r),this.windowListeners=new Rv(qa(i)),this.initialCoordinates=(s=hS(o))!=null?s:ku,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ec.Resize,this.handleCancel),this.windowListeners.add(Ec.DragStart,e$),this.windowListeners.add(Ec.VisibilityChange,this.handleCancel),this.windowListeners.add(Ec.ContextMenu,e$),this.documentListeners.add(Ec.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(n$(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(t$(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ec.Click,aSe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ec.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:i,options:{activationConstraint:a}}=o;if(!s)return;const l=(n=hS(t))!=null?n:ku,c=mx(s,l);if(!r&&a){if(t$(a)){if(a.tolerance!=null&&G5(c,a.tolerance))return this.handleCancel();if(G5(c,a.distance))return this.handleStart()}if(n$(a)&&G5(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}t.cancelable&&t.preventDefault(),i(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===cr.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const cSe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class W4 extends o8{constructor(t){const{event:n}=t,r=Tb(n.target);super(t,cSe,r)}}W4.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const uSe={move:{name:"mousemove"},end:{name:"mouseup"}};var DN;(function(e){e[e.RightClick=2]="RightClick"})(DN||(DN={}));class i8 extends o8{constructor(t){super(t,uSe,Tb(t.event.target))}}i8.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===DN.RightClick?!1:(r==null||r({event:n}),!0)}}];const W5={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class a8 extends o8{constructor(t){super(t,W5)}static setup(){return window.addEventListener(W5.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(W5.move.name,t)};function t(){}}}a8.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Mv;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Mv||(Mv={}));var gS;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(gS||(gS={}));function dSe(e){let{acceleration:t,activator:n=Mv.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:i=5,order:a=gS.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:f,threshold:m}=e;const g=hSe({delta:f,disabled:!o}),[y,v]=A_e(),w=x.useRef({x:0,y:0}),_=x.useRef({x:0,y:0}),S=x.useMemo(()=>{switch(n){case Mv.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Mv.DraggableRect:return s}},[n,s,l]),k=x.useRef(null),R=x.useCallback(()=>{const M=k.current;if(!M)return;const P=w.current.x*_.current.x,j=w.current.y*_.current.y;M.scrollBy(P,j)},[]),O=x.useMemo(()=>a===gS.TreeOrder?[...c].reverse():c,[a,c]);x.useEffect(()=>{if(!o||!c.length||!S){v();return}for(const M of O){if((r==null?void 0:r(M))===!1)continue;const P=c.indexOf(M),j=u[P];if(!j)continue;const{direction:q,speed:U}=tSe(M,j,S,t,m);for(const z of["x","y"])g[z][q[z]]||(U[z]=0,q[z]=0);if(U.x>0||U.y>0){v(),k.current=M,y(R,i),w.current=U,_.current=q;return}}w.current={x:0,y:0},_.current={x:0,y:0},v()},[t,R,r,v,o,i,JSON.stringify(S),JSON.stringify(g),y,c,O,u,JSON.stringify(m)])}const fSe={x:{[ji.Backward]:!1,[ji.Forward]:!1},y:{[ji.Backward]:!1,[ji.Forward]:!1}};function hSe(e){let{delta:t,disabled:n}=e;const r=fS(t);return ww(s=>{if(n||!r||!s)return fSe;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[ji.Backward]:s.x[ji.Backward]||o.x===-1,[ji.Forward]:s.x[ji.Forward]||o.x===1},y:{[ji.Backward]:s.y[ji.Backward]||o.y===-1,[ji.Forward]:s.y[ji.Forward]||o.y===1}}},[n,t,r])}function pSe(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return ww(s=>{var o;return t==null?null:(o=r??s)!=null?o:null},[r,t])}function mSe(e,t){return x.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...o]},[]),[e,t])}var W1;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(W1||(W1={}));var PN;(function(e){e.Optimized="optimized"})(PN||(PN={}));const r$=new Map;function gSe(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,i]=x.useState(null),{frequency:a,measure:l,strategy:c}=s,u=x.useRef(e),f=w(),m=px(f),g=x.useCallback(function(_){_===void 0&&(_=[]),!m.current&&i(S=>S===null?_:S.concat(_.filter(k=>!S.includes(k))))},[m]),y=x.useRef(null),v=ww(_=>{if(f&&!n)return r$;if(!_||_===r$||u.current!==e||o!=null){const S=new Map;for(let k of e){if(!k)continue;if(o&&o.length>0&&!o.includes(k.id)&&k.rect.current){S.set(k.id,k.rect.current);continue}const R=k.node.current,O=R?new s8(l(R),R):null;k.rect.current=O,O&&S.set(k.id,O)}return S}return _},[e,o,n,f,l]);return x.useEffect(()=>{u.current=e},[e]),x.useEffect(()=>{f||g()},[n,f]),x.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),x.useEffect(()=>{f||typeof a!="number"||y.current!==null||(y.current=setTimeout(()=>{g(),y.current=null},a))},[a,f,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:o!=null};function w(){switch(c){case W1.Always:return!1;case W1.BeforeDragging:return n;default:return!n}}}function l8(e,t){return ww(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function bSe(e,t){return l8(e,t)}function ySe(e){let{callback:t,disabled:n}=e;const r=U4(t),s=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return x.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Y4(e){let{callback:t,disabled:n}=e;const r=U4(t),s=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return x.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function vSe(e){return new s8(Cb(e),e)}function s$(e,t,n){t===void 0&&(t=vSe);const[r,s]=x.useState(null);function o(){s(l=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=t(e);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const i=ySe({callback(l){if(e)for(const c of l){const{type:u,target:f}=c;if(u==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),a=Y4({callback:o});return Tu(()=>{o(),e?(a==null||a.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[e]),r}function xSe(e){const t=l8(e);return kY(e,t)}const o$=[];function wSe(e){const t=x.useRef(e),n=ww(r=>e?r&&r!==o$&&e&&t.current&&e.parentNode===t.current.parentNode?r:q4(e):o$,[e]);return x.useEffect(()=>{t.current=e},[e]),n}function ESe(e){const[t,n]=x.useState(null),r=x.useRef(e),s=x.useCallback(o=>{const i=q5(o.target);i&&n(a=>a?(a.set(i,ON(i)),new Map(a)):null)},[]);return x.useEffect(()=>{const o=r.current;if(e!==o){i(o);const a=e.map(l=>{const c=q5(l);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,ON(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(o)};function i(a){a.forEach(l=>{const c=q5(l);c==null||c.removeEventListener("scroll",s)})}},[s,e]),x.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,i)=>T1(o,i),ku):DY(e):ku,[e,t])}function i$(e,t){t===void 0&&(t=[]);const n=x.useRef(null);return x.useEffect(()=>{n.current=null},t),x.useEffect(()=>{const r=e!==ku;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?mx(e,n.current):ku}function _Se(e){x.useEffect(()=>{if(!j4)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function SSe(e,t){return x.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=i=>{o(i,t)},n},{}),[e,t])}function $Y(e){return x.useMemo(()=>e?J_e(e):null,[e])}const a$=[];function TSe(e,t){t===void 0&&(t=Cb);const[n]=e,r=$Y(n?qa(n):null),[s,o]=x.useState(a$);function i(){o(()=>e.length?e.map(l=>MY(l)?r:new s8(t(l),l)):a$)}const a=Y4({callback:i});return Tu(()=>{a==null||a.disconnect(),i(),e.forEach(l=>a==null?void 0:a.observe(l))},[e]),s}function FY(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return xw(t)?t:e}function CSe(e){let{measure:t}=e;const[n,r]=x.useState(null),s=x.useCallback(c=>{for(const{target:u}of c)if(xw(u)){r(f=>{const m=t(u);return f?{...f,width:m.width,height:m.height}:m});break}},[t]),o=Y4({callback:s}),i=x.useCallback(c=>{const u=FY(c);o==null||o.disconnect(),u&&(o==null||o.observe(u)),r(u?t(u):null)},[t,o]),[a,l]=dS(i);return x.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const kSe=[{sensor:W4,options:{}},{sensor:G4,options:{}}],ASe={current:{}},k_={draggable:{measure:QL},droppable:{measure:QL,strategy:W1.WhileDragging,frequency:PN.Optimized},dragOverlay:{measure:Cb}};class Ov extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const NSe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ov,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:pS},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:k_,measureDroppableContainers:pS,windowRect:null,measuringScheduled:!1},BY={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:pS,draggableNodes:new Map,over:null,measureDroppableContainers:pS},_w=x.createContext(BY),zY=x.createContext(NSe);function ISe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ov}}}function RSe(e,t){switch(t.type){case Ii.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ii.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ii.DragEnd:case Ii.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ii.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ov(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Ii.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new Ov(e.droppable.containers);return i.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case Ii.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new Ov(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function MSe(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=x.useContext(_w),o=fS(r),i=fS(n==null?void 0:n.id);return x.useEffect(()=>{if(!t&&!r&&o&&i!=null){if(!H4(o)||document.activeElement===o.target)return;const a=s.get(i);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const f=R_e(u);if(f){f.focus();break}}})}},[r,t,s,i,o]),null}function jY(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function OSe(e){return x.useMemo(()=>({draggable:{...k_.draggable,...e==null?void 0:e.draggable},droppable:{...k_.droppable,...e==null?void 0:e.droppable},dragOverlay:{...k_.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function DSe(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=x.useRef(!1),{x:i,y:a}=typeof s=="boolean"?{x:s,y:s}:s;Tu(()=>{if(!i&&!a||!t){o.current=!1;return}if(o.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const u=n(c),f=kY(u,r);if(i||(f.x=0),a||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=NY(c);m&&m.scrollBy({top:f.y,left:f.x})}},[t,i,a,r,n])}const K4=x.createContext({...ku,scaleX:1,scaleY:1});var t0;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(t0||(t0={}));const bS=x.memo(function(t){var n,r,s,o;let{id:i,accessibility:a,autoScroll:l=!0,children:c,sensors:u=kSe,collisionDetection:f=CY,measuring:m,modifiers:g,...y}=t;const v=x.useReducer(RSe,void 0,ISe),[w,_]=v,[S,k]=$_e(),[R,O]=x.useState(t0.Uninitialized),M=R===t0.Initialized,{draggable:{active:P,nodes:j,translate:q},droppable:{containers:U}}=w,z=P!=null?j.get(P):null,H=x.useRef({initial:null,translated:null}),F=x.useMemo(()=>{var wt;return P!=null?{id:P,data:(wt=z==null?void 0:z.data)!=null?wt:ASe,rect:H}:null},[P,z]),W=x.useRef(null),[X,J]=x.useState(null),[ee,re]=x.useState(null),ie=px(y,Object.values(y)),Z=Ew("DndDescribedBy",i),te=x.useMemo(()=>U.getEnabled(),[U]),oe=OSe(m),{droppableRects:Q,measureDroppableContainers:Te,measuringScheduled:ge}=gSe(te,{dragging:M,dependencies:[q.x,q.y],config:oe.droppable}),Ce=pSe(j,P),he=x.useMemo(()=>ee?hS(ee):null,[ee]),Fe=er(),De=bSe(Ce,oe.draggable.measure);DSe({activeNode:P!=null?j.get(P):null,config:Fe.layoutShiftCompensation,initialRect:De,measure:oe.draggable.measure});const Re=s$(Ce,oe.draggable.measure,De),tt=s$(Ce?Ce.parentElement:null),fe=x.useRef({activatorEvent:null,active:null,activeNode:Ce,collisionRect:null,collisions:null,droppableRects:Q,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),nt=U.getNodeFor((n=fe.current.over)==null?void 0:n.id),ot=CSe({measure:oe.dragOverlay.measure}),Ht=(r=ot.nodeRef.current)!=null?r:Ce,qt=M?(s=ot.rect)!=null?s:Re:null,Pt=!!(ot.nodeRef.current&&ot.rect),tn=xSe(Pt?null:Re),xt=$Y(Ht?qa(Ht):null),pe=wSe(M?nt??Ce:null),Ne=TSe(pe),$e=jY(g,{transform:{x:q.x-tn.x,y:q.y-tn.y,scaleX:1,scaleY:1},activatorEvent:ee,active:F,activeNodeRect:Re,containerNodeRect:tt,draggingNodeRect:qt,over:fe.current.over,overlayNodeRect:ot.rect,scrollableAncestors:pe,scrollableAncestorRects:Ne,windowRect:xt}),Je=he?T1(he,q):null,Le=ESe(pe),Ve=i$(Le),_e=i$(Le,[Re]),Y=T1($e,Ve),L=qt?Y_e(qt,$e):null,B=F&&L?f({active:F,collisionRect:L,droppableRects:Q,droppableContainers:te,pointerCoordinates:Je}):null,ce=V4(B,"id"),[we,ze]=x.useState(null),Be=Pt?$e:T1($e,_e),ut=G_e(Be,(o=we==null?void 0:we.rect)!=null?o:null,Re),ln=x.useRef(null),jt=x.useCallback((wt,on)=>{let{sensor:ye,options:Ue}=on;if(W.current==null)return;const ht=j.get(W.current);if(!ht)return;const Jt=wt.nativeEvent,mr=new ye({active:W.current,activeNode:ht,event:Jt,options:Ue,context:fe,onAbort(Rt){if(!j.get(Rt))return;const{onDragAbort:hn}=ie.current,In={id:Rt};hn==null||hn(In),S({type:"onDragAbort",event:In})},onPending(Rt,zt,hn,In){if(!j.get(Rt))return;const{onDragPending:xo}=ie.current,Gs={id:Rt,constraint:zt,initialCoordinates:hn,offset:In};xo==null||xo(Gs),S({type:"onDragPending",event:Gs})},onStart(Rt){const zt=W.current;if(zt==null)return;const hn=j.get(zt);if(!hn)return;const{onDragStart:In}=ie.current,Lr={activatorEvent:Jt,active:{id:zt,data:hn.data,rect:H}};pl.unstable_batchedUpdates(()=>{In==null||In(Lr),O(t0.Initializing),_({type:Ii.DragStart,initialCoordinates:Rt,active:zt}),S({type:"onDragStart",event:Lr}),J(ln.current),re(Jt)})},onMove(Rt){_({type:Ii.DragMove,coordinates:Rt})},onEnd:Kn(Ii.DragEnd),onCancel:Kn(Ii.DragCancel)});ln.current=mr;function Kn(Rt){return async function(){const{active:hn,collisions:In,over:Lr,scrollAdjustedTranslate:xo}=fe.current;let Gs=null;if(hn&&xo){const{cancelDrop:wo}=ie.current;Gs={activatorEvent:Jt,active:hn,collisions:In,delta:xo,over:Lr},Rt===Ii.DragEnd&&typeof wo=="function"&&await Promise.resolve(wo(Gs))&&(Rt=Ii.DragCancel)}W.current=null,pl.unstable_batchedUpdates(()=>{_({type:Rt}),O(t0.Uninitialized),ze(null),J(null),re(null),ln.current=null;const wo=Rt===Ii.DragEnd?"onDragEnd":"onDragCancel";if(Gs){const Xr=ie.current[wo];Xr==null||Xr(Gs),S({type:wo,event:Gs})}})}}},[j]),fn=x.useCallback((wt,on)=>(ye,Ue)=>{const ht=ye.nativeEvent,Jt=j.get(Ue);if(W.current!==null||!Jt||ht.dndKit||ht.defaultPrevented)return;const mr={active:Jt};wt(ye,on.options,mr)===!0&&(ht.dndKit={capturedBy:on.sensor},W.current=Ue,jt(ye,on))},[j,jt]),an=mSe(u,fn);_Se(u),Tu(()=>{Re&&R===t0.Initializing&&O(t0.Initialized)},[Re,R]),x.useEffect(()=>{const{onDragMove:wt}=ie.current,{active:on,activatorEvent:ye,collisions:Ue,over:ht}=fe.current;if(!on||!ye)return;const Jt={active:on,activatorEvent:ye,collisions:Ue,delta:{x:Y.x,y:Y.y},over:ht};pl.unstable_batchedUpdates(()=>{wt==null||wt(Jt),S({type:"onDragMove",event:Jt})})},[Y.x,Y.y]),x.useEffect(()=>{const{active:wt,activatorEvent:on,collisions:ye,droppableContainers:Ue,scrollAdjustedTranslate:ht}=fe.current;if(!wt||W.current==null||!on||!ht)return;const{onDragOver:Jt}=ie.current,mr=Ue.get(ce),Kn=mr&&mr.rect.current?{id:mr.id,rect:mr.rect.current,data:mr.data,disabled:mr.disabled}:null,Rt={active:wt,activatorEvent:on,collisions:ye,delta:{x:ht.x,y:ht.y},over:Kn};pl.unstable_batchedUpdates(()=>{ze(Kn),Jt==null||Jt(Rt),S({type:"onDragOver",event:Rt})})},[ce]),Tu(()=>{fe.current={activatorEvent:ee,active:F,activeNode:Ce,collisionRect:L,collisions:B,droppableRects:Q,draggableNodes:j,draggingNode:Ht,draggingNodeRect:qt,droppableContainers:U,over:we,scrollableAncestors:pe,scrollAdjustedTranslate:Y},H.current={initial:qt,translated:L}},[F,Ce,B,L,j,Ht,qt,Q,U,we,pe,Y]),dSe({...Fe,delta:q,draggingRect:L,pointerCoordinates:Je,scrollableAncestors:pe,scrollableAncestorRects:Ne});const Wa=x.useMemo(()=>({active:F,activeNode:Ce,activeNodeRect:Re,activatorEvent:ee,collisions:B,containerNodeRect:tt,dragOverlay:ot,draggableNodes:j,droppableContainers:U,droppableRects:Q,over:we,measureDroppableContainers:Te,scrollableAncestors:pe,scrollableAncestorRects:Ne,measuringConfiguration:oe,measuringScheduled:ge,windowRect:xt}),[F,Ce,Re,ee,B,tt,ot,j,U,Q,we,Te,pe,Ne,oe,ge,xt]),An=x.useMemo(()=>({activatorEvent:ee,activators:an,active:F,activeNodeRect:Re,ariaDescribedById:{draggable:Z},dispatch:_,draggableNodes:j,over:we,measureDroppableContainers:Te}),[ee,an,F,Re,_,Z,j,we,Te]);return Me.createElement(SY.Provider,{value:k},Me.createElement(_w.Provider,{value:An},Me.createElement(zY.Provider,{value:Wa},Me.createElement(K4.Provider,{value:ut},c)),Me.createElement(MSe,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Me.createElement(z_e,{...a,hiddenTextDescribedById:Z}));function er(){const wt=(X==null?void 0:X.autoScrollEnabled)===!1,on=typeof l=="object"?l.enabled===!1:l===!1,ye=M&&!wt&&!on;return typeof l=="object"?{...l,enabled:ye}:{enabled:ye}}}),PSe=x.createContext(null),l$="button",LSe="Draggable";function UY(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=Ew(LSe),{activators:i,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:f,over:m}=x.useContext(_w),{role:g=l$,roleDescription:y="draggable",tabIndex:v=0}=s??{},w=(l==null?void 0:l.id)===t,_=x.useContext(w?K4:PSe),[S,k]=dS(),[R,O]=dS(),M=SSe(i,t),P=px(n);Tu(()=>(f.set(t,{id:t,key:o,node:S,activatorNode:R,data:P}),()=>{const q=f.get(t);q&&q.key===o&&f.delete(t)}),[f,t]);const j=x.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":w&&g===l$?!0:void 0,"aria-roledescription":y,"aria-describedby":u.draggable}),[r,g,v,w,y,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:j,isDragging:w,listeners:r?void 0:M,node:S,over:m,setNodeRef:k,setActivatorNodeRef:O,transform:_}}function HY(){return x.useContext(zY)}const $Se="Droppable",FSe={timeout:25};function VY(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=Ew($Se),{active:i,dispatch:a,over:l,measureDroppableContainers:c}=x.useContext(_w),u=x.useRef({disabled:n}),f=x.useRef(!1),m=x.useRef(null),g=x.useRef(null),{disabled:y,updateMeasurementsFor:v,timeout:w}={...FSe,...s},_=px(v??r),S=x.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(_.current)?_.current:[_.current]),g.current=null},w)},[w]),k=Y4({callback:S,disabled:y||!i}),R=x.useCallback((j,q)=>{k&&(q&&(k.unobserve(q),f.current=!1),j&&k.observe(j))},[k]),[O,M]=dS(R),P=px(t);return x.useEffect(()=>{!k||!O.current||(k.disconnect(),f.current=!1,k.observe(O.current))},[O,k]),x.useEffect(()=>(a({type:Ii.RegisterDroppable,element:{id:r,key:o,disabled:n,node:O,rect:m,data:P}}),()=>a({type:Ii.UnregisterDroppable,key:o,id:r})),[r]),x.useEffect(()=>{n!==u.current.disabled&&(a({type:Ii.SetDroppableDisabled,id:r,key:o,disabled:n}),u.current.disabled=n)},[r,o,n,a]),{active:i,rect:m,isOver:(l==null?void 0:l.id)===r,node:O,over:l,setNodeRef:M}}function BSe(e){let{animation:t,children:n}=e;const[r,s]=x.useState(null),[o,i]=x.useState(null),a=fS(n);return!n&&!r&&a&&s(a),Tu(()=>{if(!o)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){s(null);return}Promise.resolve(t(c,o)).then(()=>{s(null)})},[t,r,o]),Me.createElement(Me.Fragment,null,n,r?x.cloneElement(r,{ref:i}):null)}const zSe={x:0,y:0,scaleX:1,scaleY:1};function jSe(e){let{children:t}=e;return Me.createElement(_w.Provider,{value:BY},Me.createElement(K4.Provider,{value:zSe},t))}const USe={position:"fixed",touchAction:"none"},HSe=e=>H4(e)?"transform 250ms ease":void 0,VSe=x.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:o,className:i,rect:a,style:l,transform:c,transition:u=HSe}=e;if(!a)return null;const f=s?c:{...c,scaleX:1,scaleY:1},m={...USe,width:a.width,height:a.height,top:a.top,left:a.left,transform:Cu.Transform.toString(f),transformOrigin:s&&r?j_e(r,a):void 0,transition:typeof u=="function"?u(r):u,...l};return Me.createElement(n,{className:i,style:m,ref:t},o)}),qY=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:o,className:i}=e;if(o!=null&&o.active)for(const[a,l]of Object.entries(o.active))l!==void 0&&(s[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(o!=null&&o.dragOverlay)for(const[a,l]of Object.entries(o.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[l,c]of Object.entries(s))n.node.style.setProperty(l,c);i!=null&&i.active&&n.node.classList.remove(i.active)}},qSe=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Cu.Transform.toString(t)},{transform:Cu.Transform.toString(n)}]},GSe={duration:250,easing:"ease",keyframes:qSe,sideEffects:qY({styles:{active:{opacity:"0"}}})};function WSe(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return U4((o,i)=>{if(t===null)return;const a=n.get(o);if(!a)return;const l=a.node.current;if(!l)return;const c=FY(i);if(!c)return;const{transform:u}=qa(i).getComputedStyle(i),f=AY(u);if(!f)return;const m=typeof t=="function"?t:YSe(t);return PY(l,s.draggable.measure),m({active:{id:o,data:a.data,node:l,rect:s.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:i,rect:s.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function YSe(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...GSe,...e};return o=>{let{active:i,dragOverlay:a,transform:l,...c}=o;if(!t)return;const u={x:a.rect.left-i.rect.left,y:a.rect.top-i.rect.top},f={scaleX:l.scaleX!==1?i.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?i.rect.height*l.scaleY/a.rect.height:1},m={x:l.x-u.x,y:l.y-u.y,...f},g=s({...c,active:i,dragOverlay:a,transform:{initial:l,final:m}}),[y]=g,v=g[g.length-1];if(JSON.stringify(y)===JSON.stringify(v))return;const w=r==null?void 0:r({active:i,dragOverlay:a,...c}),_=a.node.animate(g,{duration:t,easing:n,fill:"forwards"});return new Promise(S=>{_.onfinish=()=>{w==null||w(),S()}})}}let c$=0;function KSe(e){return x.useMemo(()=>{if(e!=null)return c$++,c$},[e])}const yS=Me.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:o,modifiers:i,wrapperElement:a="div",className:l,zIndex:c=999}=e;const{activatorEvent:u,active:f,activeNodeRect:m,containerNodeRect:g,draggableNodes:y,droppableContainers:v,dragOverlay:w,over:_,measuringConfiguration:S,scrollableAncestors:k,scrollableAncestorRects:R,windowRect:O}=HY(),M=x.useContext(K4),P=KSe(f==null?void 0:f.id),j=jY(i,{activatorEvent:u,active:f,activeNodeRect:m,containerNodeRect:g,draggingNodeRect:w.rect,over:_,overlayNodeRect:w.rect,scrollableAncestors:k,scrollableAncestorRects:R,transform:M,windowRect:O}),q=l8(m),U=WSe({config:r,draggableNodes:y,droppableContainers:v,measuringConfiguration:S}),z=q?w.setRef:void 0;return Me.createElement(jSe,null,Me.createElement(BSe,{animation:U},f&&P?Me.createElement(VSe,{key:P,id:f.id,ref:z,as:a,activatorEvent:u,adjustScale:t,className:l,transition:o,rect:q,style:{zIndex:c,...s},transform:j},n):null))});function C1(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function ZSe(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function g2(e){return e!==null&&e>=0}function JSe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function XSe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const b2={scaleX:1,scaleY:1},GY=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:s,overIndex:o,index:i}=e;const a=(t=n[s])!=null?t:r;if(!a)return null;const l=QSe(n,i,s);if(i===s){const c=n[o];return c?{x:s<o?c.left+c.width-(a.left+a.width):c.left-a.left,y:0,...b2}:null}return i>s&&i<=o?{x:-a.width-l,y:0,...b2}:i<s&&i>=o?{x:a.width+l,y:0,...b2}:{x:0,y:0,...b2}};function QSe(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return!r||!s&&!o?0:n<t?s?r.left-(s.left+s.width):o.left-(r.left+r.width):o?o.left-(r.left+r.width):r.left-(s.left+s.width)}const vS=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=C1(t,r,n),i=t[s],a=o[s];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},y2={scaleX:1,scaleY:1},c8=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:i}=e;const a=(t=o[n])!=null?t:r;if(!a)return null;if(s===n){const c=o[i];return c?{x:0,y:n<i?c.top+c.height-(a.top+a.height):c.top-a.top,...y2}:null}const l=eTe(o,s,n);return s>n&&s<=i?{x:0,y:-a.height-l,...y2}:s<n&&s>=i?{x:0,y:a.height+l,...y2}:{x:0,y:0,...y2}};function eTe(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const WY="Sortable",YY=Me.createContext({activeIndex:-1,containerId:WY,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:vS,disabled:{draggable:!1,droppable:!1}});function xS(e){let{children:t,id:n,items:r,strategy:s=vS,disabled:o=!1}=e;const{active:i,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=HY(),f=Ew(WY,n),m=a.rect!==null,g=x.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),y=i!=null,v=i?g.indexOf(i.id):-1,w=c?g.indexOf(c.id):-1,_=x.useRef(g),S=!JSe(g,_.current),k=w!==-1&&v===-1||S,R=XSe(o);Tu(()=>{S&&y&&u(g)},[S,g,y,u]),x.useEffect(()=>{_.current=g},[g]);const O=x.useMemo(()=>({activeIndex:v,containerId:f,disabled:R,disableTransforms:k,items:g,overIndex:w,useDragOverlay:m,sortedRects:ZSe(g,l),strategy:s}),[v,f,R.draggable,R.droppable,k,g,w,l,m,s]);return Me.createElement(YY.Provider,{value:O},t)}const tTe=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return C1(n,r,s).indexOf(t)},KY=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:i,previousItems:a,previousContainerId:l,transition:c}=e;return!c||!r||a!==o&&s===i?!1:n?!0:i!==s&&t===l},nTe={duration:200,easing:"ease"},ZY="transform",rTe=Cu.Transition.toString({property:ZY,duration:0,easing:"linear"}),sTe={roleDescription:"sortable"};function oTe(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,i]=x.useState(null),a=x.useRef(n);return Tu(()=>{if(!t&&n!==a.current&&r.current){const l=s.current;if(l){const c=Cb(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&i(u)}}n!==a.current&&(a.current=n)},[t,n,r,s]),x.useEffect(()=>{o&&i(null)},[o]),o}function u8(e){let{animateLayoutChanges:t=KY,attributes:n,disabled:r,data:s,getNewIndex:o=tTe,id:i,strategy:a,resizeObserverConfig:l,transition:c=nTe}=e;const{items:u,containerId:f,activeIndex:m,disabled:g,disableTransforms:y,sortedRects:v,overIndex:w,useDragOverlay:_,strategy:S}=x.useContext(YY),k=iTe(r,g),R=u.indexOf(i),O=x.useMemo(()=>({sortable:{containerId:f,index:R,items:u},...s}),[f,s,R,u]),M=x.useMemo(()=>u.slice(u.indexOf(i)),[u,i]),{rect:P,node:j,isOver:q,setNodeRef:U}=VY({id:i,data:O,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...l}}),{active:z,activatorEvent:H,activeNodeRect:F,attributes:W,setNodeRef:X,listeners:J,isDragging:ee,over:re,setActivatorNodeRef:ie,transform:Z}=UY({id:i,data:O,attributes:{...sTe,...n},disabled:k.draggable}),te=k_e(U,X),oe=!!z,Q=oe&&!y&&g2(m)&&g2(w),Te=!_&&ee,ge=Te&&Q?Z:null,he=Q?ge??(a??S)({rects:v,activeNodeRect:F,activeIndex:m,overIndex:w,index:R}):null,Fe=g2(m)&&g2(w)?o({id:i,items:u,activeIndex:m,overIndex:w}):R,De=z==null?void 0:z.id,Re=x.useRef({activeId:De,items:u,newIndex:Fe,containerId:f}),tt=u!==Re.current.items,fe=t({active:z,containerId:f,isDragging:ee,isSorting:oe,id:i,index:R,items:u,newIndex:Re.current.newIndex,previousItems:Re.current.items,previousContainerId:Re.current.containerId,transition:c,wasDragging:Re.current.activeId!=null}),nt=oTe({disabled:!fe,index:R,node:j,rect:P});return x.useEffect(()=>{oe&&Re.current.newIndex!==Fe&&(Re.current.newIndex=Fe),f!==Re.current.containerId&&(Re.current.containerId=f),u!==Re.current.items&&(Re.current.items=u)},[oe,Fe,f,u]),x.useEffect(()=>{if(De===Re.current.activeId)return;if(De!=null&&Re.current.activeId==null){Re.current.activeId=De;return}const Ht=setTimeout(()=>{Re.current.activeId=De},50);return()=>clearTimeout(Ht)},[De]),{active:z,activeIndex:m,attributes:W,data:O,rect:P,index:R,newIndex:Fe,items:u,isOver:q,isSorting:oe,isDragging:ee,listeners:J,node:j,overIndex:w,over:re,setNodeRef:te,setActivatorNodeRef:ie,setDroppableNodeRef:U,setDraggableNodeRef:X,transform:nt??he,transition:ot()};function ot(){if(nt||tt&&Re.current.newIndex===R)return rTe;if(!(Te&&!H4(H)||!c)&&(oe||fe))return Cu.Transition.toString({...c,property:ZY})}}function iTe(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function wS(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const aTe=[cr.Down,cr.Right,cr.Up,cr.Left],lTe=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:o,over:i,scrollableAncestors:a}}=t;if(aTe.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];o.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const m=s.get(f.id);if(m)switch(e.code){case cr.Down:r.top<m.top&&l.push(f);break;case cr.Up:r.top>m.top&&l.push(f);break;case cr.Left:r.left>m.left&&l.push(f);break;case cr.Right:r.left<m.left&&l.push(f);break}});const c=TY({collisionRect:r,droppableRects:s,droppableContainers:l});let u=V4(c,"id");if(u===(i==null?void 0:i.id)&&c.length>1&&(u=c[1].id),u!=null){const f=o.get(n.id),m=o.get(u),g=m?s.get(m.id):null,y=m==null?void 0:m.node.current;if(y&&g&&f&&m){const w=q4(y).some((M,P)=>a[P]!==M),_=JY(f,m),S=cTe(f,m),k=w||!_?{x:0,y:0}:{x:S?r.width-g.width:0,y:S?r.height-g.height:0},R={x:g.left,y:g.top};return k.x&&k.y?R:mx(R,k)}}}};function JY(e,t){return!wS(e)||!wS(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function cTe(e,t){return!wS(e)||!wS(t)||!JY(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function u$(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function uTe(...e){return t=>{let n=!1;const r=e.map(s=>{const o=u$(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():u$(e[s],null)}}}}function Z4(...e){return x.useCallback(uTe(...e),e)}const dTe=[cr.Down,cr.Right,cr.Up,cr.Left],fTe=(e,{context:t})=>{var i,a;const{active:n,droppableRects:r,droppableContainers:s,collisionRect:o}=t;if(dTe.includes(e.code)){if(e.preventDefault(),!n||!o)return;const l=[];for(const f of s.getEnabled()){if(!f||f!=null&&f.disabled)return;const m=r.get(f.id);if(!m)return;const g=f.data.current;if(g){const{type:y,children:v}=g;if(y==="container"&&(v==null?void 0:v.length)>0&&((i=n.data.current)==null?void 0:i.type)!=="container")return}switch(e.code){case cr.Down:o.top<m.top&&l.push(f);break;case cr.Up:o.top>m.top&&l.push(f);break;case cr.Left:o.left>=m.left+m.width&&l.push(f);break;case cr.Right:o.left+o.width<=m.left&&l.push(f);break}}const c=TY({collisionRect:o,droppableRects:r,droppableContainers:l}),u=V4(c,"id");if(u!=null){const f=s.get(u),m=f==null?void 0:f.node.current,g=f==null?void 0:f.rect.current;if(m&&g)return f.id==="placeholder"?{x:g.left+(g.width-o.width)/2,y:g.top+(g.height-o.height)/2}:((a=f.data.current)==null?void 0:a.type)==="container"?{x:g.left+20,y:g.top+74}:{x:g.left,y:g.top}}}},XY="Kanban",Sw="KanbanBoard",em="KanbanColumn",QY="KanbanColumnHandle",k1="KanbanItem",LN="KanbanItemHandle",d8="KanbanOverlay",f8=x.createContext(null);f8.displayName=XY;function kb(e){const t=x.useContext(f8);if(!t)throw new Error(`\`${e}\` must be used within \`${XY}\``);return t}function hTe(e){const{value:t,onValueChange:n,modifiers:r,strategy:s=c8,orientation:o="horizontal",onMove:i,getItemValue:a,accessibility:l,flatCursor:c=!1,...u}=e,f=x.useId(),[m,g]=x.useState(null),y=x.useRef(null),v=x.useRef(!1),w=t8(m0(i8),m0(a8),m0(G4,{coordinateGetter:fTe})),_=x.useCallback(U=>{if(typeof U=="object"&&!a)throw new Error("getItemValue is required when using array of objects");return a?a(U):U},[a]),S=x.useCallback(U=>{if(U in t)return U;for(const[z,H]of Object.entries(t))if(H.some(F=>_(F)===U))return z;return null},[t,_]),k=x.useCallback(U=>{var W;if(m&&m in t)return mS({...U,droppableContainers:U.droppableContainers.filter(X=>X.id in t)});const z=q_e(U),H=z.length>0?z:CY(U);let F=V4(H,"id");if(!F)return v.current&&(y.current=m),y.current?[{id:y.current}]:[];if(F in t){const X=t[F];if(X&&X.length>0){const J=mS({...U,droppableContainers:U.droppableContainers.filter(ee=>ee.id!==F&&X.some(re=>_(re)===ee.id))});J.length>0&&(F=((W=J[0])==null?void 0:W.id)??F)}}return y.current=F,[{id:F}]},[m,t,_]),R=x.useCallback(U=>{var z;(z=u.onDragStart)==null||z.call(u,U),!U.activatorEvent.defaultPrevented&&g(U.active.id)},[u]),O=x.useCallback(U=>{var X;if((X=u.onDragOver)==null||X.call(u,U),U.activatorEvent.defaultPrevented)return;const{active:z,over:H}=U;if(!H)return;const F=S(z.id),W=S(H.id);if(!(!F||!W))if(F===W){const J=t[F];if(!J)return;const ee=J.findIndex(ie=>_(ie)===z.id),re=J.findIndex(ie=>_(ie)===H.id);if(ee!==re){const ie={...t};ie[F]=C1(J,ee,re),n==null||n(ie)}}else{const J=t[F],ee=t[W];if(!J||!ee)return;const re=J.findIndex(te=>_(te)===z.id);if(re===-1)return;const ie=J[re];if(!ie)return;const Z={...t,[F]:J.filter(te=>_(te)!==z.id),[W]:[...ee,ie]};n==null||n(Z),v.current=!0}},[t,S,_,n,u]),M=x.useCallback(U=>{var F;if((F=u.onDragEnd)==null||F.call(u,U),U.activatorEvent.defaultPrevented)return;const{active:z,over:H}=U;if(!H){g(null);return}if(z.id in t&&H.id in t){const W=Object.keys(t).indexOf(z.id),X=Object.keys(t).indexOf(H.id);if(W!==X){const J=Object.keys(t),ee=C1(J,W,X),re={};for(const ie of ee){const Z=t[ie];Z&&(re[ie]=Z)}i?i({...U,activeIndex:W,overIndex:X}):n==null||n(re)}}else{const W=S(z.id),X=S(H.id);if(!W||!X){g(null);return}if(W===X){const J=t[W];if(!J){g(null);return}const ee=J.findIndex(ie=>_(ie)===z.id),re=J.findIndex(ie=>_(ie)===H.id);if(ee!==re){const ie={...t};ie[W]=C1(J,ee,re),i?i({...U,activeIndex:ee,overIndex:re}):n==null||n(ie)}}}g(null),v.current=!1},[t,S,_,n,i,u]),P=x.useCallback(U=>{var z;(z=u.onDragCancel)==null||z.call(u,U),!U.activatorEvent.defaultPrevented&&(g(null),v.current=!1)},[u]),j=x.useMemo(()=>({onDragStart({active:U}){const z=U.id in t,H=z?"column":"item",F=z?Object.keys(t).indexOf(U.id)+1:(()=>{const X=S(U.id);return!X||!t[X]?1:t[X].findIndex(J=>_(J)===U.id)+1})(),W=z?Object.keys(t).length:(()=>{var J;const X=S(U.id);return X?((J=t[X])==null?void 0:J.length)??0:0})();return`Picked up ${H} at position ${F} of ${W}`},onDragOver({active:U,over:z}){if(!z)return;const H=U.id in t,F=H?"column":"item",W=H?Object.keys(t).indexOf(z.id)+1:(()=>{const re=S(z.id);return!re||!t[re]?1:t[re].findIndex(ie=>_(ie)===z.id)+1})(),X=H?Object.keys(t).length:(()=>{var ie;const re=S(z.id);return re?((ie=t[re])==null?void 0:ie.length)??0:0})(),J=S(z.id),ee=S(U.id);return H?`${F} is now at position ${W} of ${X}`:ee!==J?`${F} is now at position ${W} of ${X} in ${J}`:`${F} is now at position ${W} of ${X}`},onDragEnd({active:U,over:z}){if(!z)return;const H=U.id in t,F=H?"column":"item",W=H?Object.keys(t).indexOf(z.id)+1:(()=>{const re=S(z.id);return!re||!t[re]?1:t[re].findIndex(ie=>_(ie)===z.id)+1})(),X=H?Object.keys(t).length:(()=>{var ie;const re=S(z.id);return re?((ie=t[re])==null?void 0:ie.length)??0:0})(),J=S(z.id),ee=S(U.id);return H?`${F} was dropped at position ${W} of ${X}`:ee!==J?`${F} was dropped at position ${W} of ${X} in ${J}`:`${F} was dropped at position ${W} of ${X}`},onDragCancel({active:U}){return`Dragging was cancelled. ${U.id in t?"column":"item"} was dropped.`}}),[t,S,_]),q=x.useMemo(()=>({id:f,items:t,modifiers:r,strategy:s,orientation:o,activeId:m,setActiveId:g,getItemValue:_,flatCursor:c}),[f,t,m,r,s,o,_,c]);return h.jsx(f8.Provider,{value:q,children:h.jsx(bS,{collisionDetection:k,modifiers:r,sensors:w,...u,id:f,measuring:{droppable:{strategy:W1.Always}},onDragStart:R,onDragOver:O,onDragEnd:M,onDragCancel:P,accessibility:{announcements:j,screenReaderInstructions:{draggable:`
            To pick up a kanban item or column, press space or enter.
            While dragging, use the arrow keys to move the item.
            Press space or enter again to drop the item in its new position, or press escape to cancel.
          `},...l}})})}const J4=x.createContext(!1);J4.displayName=Sw;const eK=x.forwardRef((e,t)=>{const{asChild:n,className:r,...s}=e,o=kb(Sw),i=x.useMemo(()=>Object.keys(o.items),[o.items]),a=n?Nm:"div";return h.jsx(J4.Provider,{value:!0,children:h.jsx(xS,{items:i,strategy:o.orientation==="horizontal"?GY:c8,children:h.jsx(a,{"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-slot":"kanban-board",...s,ref:t,className:Qe("flex size-full gap-4",o.orientation==="horizontal"?"flex-row":"flex-col",r)})})})});eK.displayName=Sw;const h8=x.createContext(null);h8.displayName=em;function pTe(e){const t=x.useContext(h8);if(!t)throw new Error(`\`${e}\` must be used within \`${em}\``);return t}const mTe=e=>KY({...e,wasDragging:!0}),tK=x.forwardRef((e,t)=>{const{value:n,asChild:r,asHandle:s,disabled:o,className:i,style:a,...l}=e,c=x.useId(),u=kb(em),f=x.useContext(J4),m=x.useContext(X4);if(!f&&!m)throw new Error(`\`${em}\` must be used within \`${Sw}\` or \`${d8}\``);if(n==="")throw new Error(`\`${em}\` value cannot be an empty string`);const{attributes:g,listeners:y,setNodeRef:v,setActivatorNodeRef:w,transform:_,transition:S,isDragging:k}=u8({id:n,disabled:o,animateLayoutChanges:mTe}),R=Z4(t,q=>{o||v(q)}),O=x.useMemo(()=>({transform:Cu.Transform.toString(_),transition:S,...a}),[_,S,a]),M=x.useMemo(()=>(u.items[n]??[]).map(U=>u.getItemValue(U)),[u.items,n,u.getItemValue]),P=x.useMemo(()=>({id:c,attributes:g,listeners:y,setActivatorNodeRef:w,isDragging:k,disabled:o}),[c,g,y,w,k,o]),j=r?Nm:"div";return h.jsx(h8.Provider,{value:P,children:h.jsx(xS,{items:M,strategy:u.orientation==="horizontal"?GY:c8,children:h.jsx(j,{id:c,"data-disabled":o,"data-dragging":k?"":void 0,"data-slot":"kanban-column",...l,...s&&!o?g:{},...s&&!o?y:{},ref:R,style:O,className:Qe("bg-muted flex size-full flex-col gap-2 rounded-lg p-2.5 aria-disabled:pointer-events-none aria-disabled:opacity-50",{"touch-none select-none":s,"cursor-default":u.flatCursor,"data-dragging:cursor-grabbing":!u.flatCursor,"cursor-grab":!k&&s&&!u.flatCursor,"opacity-50":k,"pointer-events-none opacity-50":o},i)})})})});tK.displayName=em;const nK=x.forwardRef((e,t)=>{const{asChild:n,disabled:r,className:s,...o}=e,i=kb(em),a=pTe(QY),l=r??a.disabled,c=Z4(t,f=>{l||a.setActivatorNodeRef(f)}),u=n?Nm:"button";return h.jsx(u,{type:"button","aria-controls":a.id,"data-disabled":l,"data-dragging":a.isDragging?"":void 0,"data-slot":"kanban-column-handle",...o,...l?{}:a.attributes,...l?{}:a.listeners,ref:c,className:Qe("select-none disabled:pointer-events-none disabled:opacity-50",i.flatCursor?"cursor-default":"cursor-grab data-dragging:cursor-grabbing",s),disabled:l})});nK.displayName=QY;const p8=x.createContext(null);p8.displayName=k1;function gTe(e){const t=x.useContext(p8);if(!t)throw new Error(`\`${e}\` must be used within \`${k1}\``);return t}const rK=x.forwardRef((e,t)=>{const{value:n,style:r,asHandle:s,asChild:o,disabled:i,className:a,...l}=e,c=x.useId(),u=kb(k1),f=x.useContext(J4),m=x.useContext(X4);if(!f&&!m)throw new Error(`\`${k1}\` must be used within \`${Sw}\``);const{attributes:g,listeners:y,setNodeRef:v,setActivatorNodeRef:w,transform:_,transition:S,isDragging:k}=u8({id:n,disabled:i});if(n==="")throw new Error(`\`${k1}\` value cannot be an empty string`);const R=Z4(t,j=>{i||v(j)}),O=x.useMemo(()=>({transform:Cu.Transform.toString(_),transition:S,...r}),[_,S,r]),M=x.useMemo(()=>({id:c,attributes:g,listeners:y,setActivatorNodeRef:w,isDragging:k,disabled:i}),[c,g,y,w,k,i]),P=o?Nm:"div";return h.jsx(p8.Provider,{value:M,children:h.jsx(P,{id:c,"data-disabled":i,"data-dragging":k?"":void 0,"data-slot":"kanban-item",...l,...s&&!i?g:{},...s&&!i?y:{},ref:R,style:O,className:Qe("focus-visible:ring-ring focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden",{"touch-none select-none":s,"cursor-default":u.flatCursor,"data-dragging:cursor-grabbing":!u.flatCursor,"cursor-grab":!k&&s&&!u.flatCursor,"opacity-50":k,"pointer-events-none opacity-50":i},a)})})});rK.displayName=k1;const bTe=x.forwardRef((e,t)=>{const{asChild:n,disabled:r,className:s,...o}=e,i=kb(LN),a=gTe(LN),l=r??a.disabled,c=Z4(t,f=>{l||a.setActivatorNodeRef(f)}),u=n?Nm:"button";return h.jsx(u,{type:"button","aria-controls":a.id,"data-disabled":l,"data-dragging":a.isDragging?"":void 0,"data-slot":"kanban-item-handle",...o,...l?{}:a.attributes,...l?{}:a.listeners,ref:c,className:Qe("select-none disabled:pointer-events-none disabled:opacity-50",i.flatCursor?"cursor-default":"cursor-grab data-dragging:cursor-grabbing",s),disabled:l})});bTe.displayName=LN;const X4=x.createContext(!1);X4.displayName=d8;const yTe={sideEffects:qY({styles:{active:{opacity:"0.4"}}})};function vTe(e){var c;const{container:t,children:n,...r}=e,s=kb(d8),[o,i]=x.useState(!1);x.useLayoutEffect(()=>i(!0),[]);const a=t??(o?(c=globalThis.document)==null?void 0:c.body:null);if(!a)return null;const l=s.activeId&&s.activeId in s.items?"column":"item";return pl.createPortal(h.jsx(yS,{dropAnimation:yTe,modifiers:s.modifiers,className:Qe(!s.flatCursor&&"cursor-grabbing"),...r,children:h.jsx(X4.Provider,{value:!0,children:s.activeId&&n?typeof n=="function"?n({value:s.activeId,variant:l}):n:null})}),a)}const $N=24,sK=4,gx=64,A_=30,md=0,Vp=24,FN=9,d$=10,oK=6048e5,xTe=864e5,iK=6e4,wTe=36e5,f$=Symbol.for("constructDateFrom");function uo(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&f$ in e?e[f$](t):e instanceof Date?new e.constructor(t):new Date(t)}function pr(e,t){return uo(t||e,e)}function Tf(e,t,n){const r=pr(e,n==null?void 0:n.in);return isNaN(t)?uo(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Q4(e,t,n){const r=pr(e,n==null?void 0:n.in);if(isNaN(t))return uo(e,NaN);if(!t)return r;const s=r.getDate(),o=uo(e,r.getTime());o.setMonth(r.getMonth()+t+1,0);const i=o.getDate();return s>=i?o:(r.setFullYear(o.getFullYear(),o.getMonth(),s),r)}function ETe(e,t,n){return uo(e,+pr(e)+t)}function A1(e,t,n){return ETe(e,t*wTe)}let _Te={};function Tw(){return _Te}function Pc(e,t){var a,l,c,u;const n=Tw(),r=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=pr(e,t==null?void 0:t.in),o=s.getDay(),i=(o<r?7:0)+o-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function bx(e,t){return Pc(e,{...t,weekStartsOn:1})}function aK(e,t){const n=pr(e,t==null?void 0:t.in),r=n.getFullYear(),s=uo(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const o=bx(s),i=uo(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const a=bx(i);return n.getTime()>=o.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function h$(e){const t=pr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Mm(e,...t){const n=uo.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function Wf(e,t){const n=pr(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function If(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t),o=Wf(r),i=Wf(s),a=+o-h$(o),l=+i-h$(i);return Math.round((a-l)/xTe)}function STe(e,t){const n=aK(e,t),r=uo(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),bx(r)}function TTe(e,t,n){const r=pr(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*iK),r}function m8(e,t,n){return Tf(e,t*7,n)}function CTe(e,t,n){return Q4(e,t*12,n)}function lK(e,t,n){const[r,s]=[+pr(e.start,n==null?void 0:n.in),+pr(e.end,n==null?void 0:n.in)].sort((a,l)=>a-l),[o,i]=[+pr(t.start,n==null?void 0:n.in),+pr(t.end,n==null?void 0:n.in)].sort((a,l)=>a-l);return r<i&&o<s}function kTe(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=uo.bind(null,s));const o=pr(s,r);(!n||n<o||isNaN(+o))&&(n=o)}),uo(r,n||NaN)}function ATe(e,t){let n,r=t==null?void 0:t.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=uo.bind(null,s));const o=pr(s,r);(!n||n>o||isNaN(+o))&&(n=o)}),uo(r,n||NaN)}function NTe(e){return uo(e,Date.now())}function bs(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t);return+Wf(r)==+Wf(s)}function cK(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ITe(e){return!(!cK(e)&&typeof e!="number"||isNaN(+pr(e)))}function RTe(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t),o=r.getFullYear()-s.getFullYear(),i=r.getMonth()-s.getMonth();return o*12+i}function MTe(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t),o=p$(r,s),i=Math.abs(If(r,s));r.setDate(r.getDate()-o*i);const a=+(p$(r,s)===-o),l=o*(i-a);return l===0?0:l}function p$(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function OTe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function DTe(e,t){return+pr(e)-+pr(t)}function Y1(e,t,n){const r=DTe(e,t)/iK;return OTe(n==null?void 0:n.roundingMethod)(r)}function uK(e,t){const n=pr(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function eC(e,t){const[n,r]=Mm(e,t.start,t.end);return{start:n,end:r}}function dK(e,t){const{start:n,end:r}=eC(t==null?void 0:t.in,e);let s=+n>+r;const o=s?+n:+r,i=s?r:n;i.setHours(0,0,0,0);let a=1;const l=[];for(;+i<=o;)l.push(uo(n,i)),i.setDate(i.getDate()+a),i.setHours(0,0,0,0);return s?l.reverse():l}function fK(e,t){const{start:n,end:r}=eC(t==null?void 0:t.in,e);let s=+n>+r;const o=s?+n:+r,i=s?r:n;i.setMinutes(0,0,0);let a=1;const l=[];for(;+i<=o;)l.push(uo(n,i)),i.setHours(i.getHours()+a);return s?l.reverse():l}function PTe(e,t){const{start:n,end:r}=eC(t==null?void 0:t.in,e);let s=+n>+r;const o=s?+n:+r,i=s?r:n;i.setHours(0,0,0,0),i.setDate(1);let a=1;const l=[];for(;+i<=o;)l.push(uo(n,i)),i.setMonth(i.getMonth()+a);return s?l.reverse():l}function hK(e,t){const n=pr(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function LTe(e,t){const n=pr(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function pK(e,t){const n=pr(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function $Te(e,t){const{start:n,end:r}=eC(t==null?void 0:t.in,e);let s=+n>+r;const o=s?+n:+r,i=s?r:n;i.setHours(0,0,0,0),i.setMonth(0,1);let a=1;const l=[];for(;+i<=o;)l.push(uo(n,i)),i.setFullYear(i.getFullYear()+a);return s?l.reverse():l}function Ab(e,t){var a,l,c,u;const n=Tw(),r=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=pr(e,t==null?void 0:t.in),o=s.getDay(),i=(o<r?-7:0)+6-(o-r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function FTe(e,t){return Ab(e,{...t,weekStartsOn:1})}const BTe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zTe=(e,t,n)=>{let r;const s=BTe[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Y5(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const jTe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},UTe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},HTe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VTe={date:Y5({formats:jTe,defaultWidth:"full"}),time:Y5({formats:UTe,defaultWidth:"full"}),dateTime:Y5({formats:HTe,defaultWidth:"full"})},qTe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GTe=(e,t,n,r)=>qTe[e];function Uy(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;s=e.formattingValues[a]||e.formattingValues[i]}else{const i=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[a]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const WTe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},YTe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},KTe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ZTe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},JTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},XTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},QTe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},e4e={ordinalNumber:QTe,era:Uy({values:WTe,defaultWidth:"wide"}),quarter:Uy({values:YTe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Uy({values:KTe,defaultWidth:"wide"}),day:Uy({values:ZTe,defaultWidth:"wide"}),dayPeriod:Uy({values:JTe,defaultWidth:"wide",formattingValues:XTe,defaultFormattingWidth:"wide"})};function Hy(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const i=o[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?n4e(a,f=>f.test(i)):t4e(a,f=>f.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=t.slice(i.length);return{value:c,rest:u}}}function t4e(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function n4e(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function r4e(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const a=t.slice(s.length);return{value:i,rest:a}}}const s4e=/^(\d+)(th|st|nd|rd)?/i,o4e=/\d+/i,i4e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},a4e={any:[/^b/i,/^(a|c)/i]},l4e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},c4e={any:[/1/i,/2/i,/3/i,/4/i]},u4e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},d4e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},f4e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},h4e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},p4e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},m4e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},g4e={ordinalNumber:r4e({matchPattern:s4e,parsePattern:o4e,valueCallback:e=>parseInt(e,10)}),era:Hy({matchPatterns:i4e,defaultMatchWidth:"wide",parsePatterns:a4e,defaultParseWidth:"any"}),quarter:Hy({matchPatterns:l4e,defaultMatchWidth:"wide",parsePatterns:c4e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Hy({matchPatterns:u4e,defaultMatchWidth:"wide",parsePatterns:d4e,defaultParseWidth:"any"}),day:Hy({matchPatterns:f4e,defaultMatchWidth:"wide",parsePatterns:h4e,defaultParseWidth:"any"}),dayPeriod:Hy({matchPatterns:p4e,defaultMatchWidth:"any",parsePatterns:m4e,defaultParseWidth:"any"})},t1={code:"en-US",formatDistance:zTe,formatLong:VTe,formatRelative:GTe,localize:e4e,match:g4e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function b4e(e,t){const n=pr(e,t==null?void 0:t.in);return If(n,pK(n))+1}function mK(e,t){const n=pr(e,t==null?void 0:t.in),r=+bx(n)-+STe(n);return Math.round(r/oK)+1}function gK(e,t){var u,f,m,g;const n=pr(e,t==null?void 0:t.in),r=n.getFullYear(),s=Tw(),o=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,i=uo((t==null?void 0:t.in)||e,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const a=Pc(i,t),l=uo((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);const c=Pc(l,t);return+n>=+a?r+1:+n>=+c?r:r-1}function y4e(e,t){var a,l,c,u;const n=Tw(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=gK(e,t),o=uo((t==null?void 0:t.in)||e,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),Pc(o,t)}function bK(e,t){const n=pr(e,t==null?void 0:t.in),r=+Pc(n,t)-+y4e(n,t);return Math.round(r/oK)+1}function Ts(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Gh={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ts(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ts(n+1,2)},d(e,t){return Ts(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ts(e.getHours()%12||12,t.length)},H(e,t){return Ts(e.getHours(),t.length)},m(e,t){return Ts(e.getMinutes(),t.length)},s(e,t){return Ts(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ts(s,t.length)}},Vg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},m$={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Gh.y(e,t)},Y:function(e,t,n,r){const s=gK(e,r),o=s>0?s:1-s;if(t==="YY"){const i=o%100;return Ts(i,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):Ts(o,t.length)},R:function(e,t){const n=aK(e);return Ts(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ts(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ts(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ts(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Gh.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ts(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=bK(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Ts(s,t.length)},I:function(e,t,n){const r=mK(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ts(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Gh.d(e,t)},D:function(e,t,n){const r=b4e(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ts(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Ts(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Ts(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Ts(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Vg.noon:r===0?s=Vg.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Vg.evening:r>=12?s=Vg.afternoon:r>=4?s=Vg.morning:s=Vg.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Gh.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Gh.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ts(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ts(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Gh.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Gh.s(e,t)},S:function(e,t){return Gh.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return b$(r);case"XXXX":case"XX":return Up(r);case"XXXXX":case"XXX":default:return Up(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return b$(r);case"xxxx":case"xx":return Up(r);case"xxxxx":case"xxx":default:return Up(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+g$(r,":");case"OOOO":default:return"GMT"+Up(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+g$(r,":");case"zzzz":default:return"GMT"+Up(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Ts(r,t.length)},T:function(e,t,n){return Ts(+e,t.length)}};function g$(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+t+Ts(o,2)}function b$(e,t){return e%60===0?(e>0?"-":"+")+Ts(Math.abs(e)/60,2):Up(e,t)}function Up(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Ts(Math.trunc(r/60),2),o=Ts(r%60,2);return n+s+t+o}const y$=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},yK=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},v4e=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return y$(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",y$(r,t)).replace("{{time}}",yK(s,t))},x4e={p:yK,P:v4e},w4e=/^D+$/,E4e=/^Y+$/,_4e=["D","DD","YY","YYYY"];function S4e(e){return w4e.test(e)}function T4e(e){return E4e.test(e)}function C4e(e,t,n){const r=k4e(e,t,n);if(console.warn(r),_4e.includes(e))throw new RangeError(r)}function k4e(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const A4e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,N4e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I4e=/^'([^]*?)'?$/,R4e=/''/g,M4e=/[a-zA-Z]/;function ar(e,t,n){var u,f,m,g,y,v,w,_;const r=Tw(),s=(n==null?void 0:n.locale)??r.locale??t1,o=(n==null?void 0:n.firstWeekContainsDate)??((f=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((v=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((_=(w=r.locale)==null?void 0:w.options)==null?void 0:_.weekStartsOn)??0,a=pr(e,n==null?void 0:n.in);if(!ITe(a))throw new RangeError("Invalid time value");let l=t.match(N4e).map(S=>{const k=S[0];if(k==="p"||k==="P"){const R=x4e[k];return R(S,s.formatLong)}return S}).join("").match(A4e).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const k=S[0];if(k==="'")return{isToken:!1,value:O4e(S)};if(m$[k])return{isToken:!0,value:S};if(k.match(M4e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:S}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return l.map(S=>{if(!S.isToken)return S.value;const k=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&T4e(k)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&S4e(k))&&C4e(k,t,String(e));const R=m$[k[0]];return R(a,k,s.localize,c)}).join("")}function O4e(e){const t=e.match(I4e);return t?t[1].replace(R4e,"'"):e}function D4e(e,t){const n=pr(e,t==null?void 0:t.in),r=n.getFullYear(),s=n.getMonth(),o=uo(n,0);return o.setFullYear(r,s+1,0),o.setHours(0,0,0,0),o.getDate()}function N1(e,t){return pr(e,t==null?void 0:t.in).getHours()}function yx(e,t){return pr(e,t==null?void 0:t.in).getMinutes()}function P4e(e,t){return pr(e,t==null?void 0:t.in).getMonth()}function L4e(e,t){return pr(e,t==null?void 0:t.in).getFullYear()}function $4e(e,t){return+pr(e)>+pr(t)}function ES(e,t){return+pr(e)<+pr(t)}function vK(e){return+pr(e)<Date.now()}function _S(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function F4e(e,t,n){const[r,s]=Mm(n==null?void 0:n.in,e,t);return r.getFullYear()===s.getFullYear()}function h1(e,t){return bs(uo(e,e),NTe(e))}function B4e(e,t,n){const r=+pr(e,n==null?void 0:n.in),[s,o]=[+pr(t.start,n==null?void 0:n.in),+pr(t.end,n==null?void 0:n.in)].sort((i,a)=>i-a);return r>=s&&r<=o}function z4e(e,t,n){const r=pr(e,n==null?void 0:n.in),s=r.getFullYear(),o=r.getDate(),i=uo(e,0);i.setFullYear(s,t,15),i.setHours(0,0,0,0);const a=D4e(i);return r.setMonth(t,Math.min(o,a)),r}function j4e(e,t,n){const r=pr(e,n==null?void 0:n.in);return isNaN(+r)?uo(e,NaN):(r.setFullYear(t),r)}function U4e(e,t,n){return Q4(e,-1,n)}function H4e(e,t,n){return m8(e,-1,n)}function xK(e){switch(e||"sky"){case"sky":return"bg-sky-200/50 hover:bg-sky-200/40 text-sky-950/80 dark:bg-sky-400/25 dark:hover:bg-sky-400/20 dark:text-sky-200 shadow-sky-700/8";case"amber":return"bg-amber-200/50 hover:bg-amber-200/40 text-amber-950/80 dark:bg-amber-400/25 dark:hover:bg-amber-400/20 dark:text-amber-200 shadow-amber-700/8";case"violet":return"bg-violet-200/50 hover:bg-violet-200/40 text-violet-950/80 dark:bg-violet-400/25 dark:hover:bg-violet-400/20 dark:text-violet-200 shadow-violet-700/8";case"rose":return"bg-rose-200/50 hover:bg-rose-200/40 text-rose-950/80 dark:bg-rose-400/25 dark:hover:bg-rose-400/20 dark:text-rose-200 shadow-rose-700/8";case"emerald":return"bg-emerald-200/50 hover:bg-emerald-200/40 text-emerald-950/80 dark:bg-emerald-400/25 dark:hover:bg-emerald-400/20 dark:text-emerald-200 shadow-emerald-700/8";case"orange":return"bg-orange-200/50 hover:bg-orange-200/40 text-orange-950/80 dark:bg-orange-400/25 dark:hover:bg-orange-400/20 dark:text-orange-200 shadow-orange-700/8";default:return"bg-sky-200/50 hover:bg-sky-200/40 text-sky-950/80 dark:bg-sky-400/25 dark:hover:bg-sky-400/20 dark:text-sky-200 shadow-sky-700/8"}}function V4e(e,t){return e&&t?"rounded":e?"rounded-l rounded-r-none":t?"rounded-r rounded-l-none":"rounded-none"}function fm(e){const t=new Date(e.start),n=new Date(e.end);return e.allDay||t.getDate()!==n.getDate()}function q4e(e,t){return e.filter(n=>{const r=new Date(n.start);return bs(t,r)}).sort((n,r)=>new Date(n.start).getTime()-new Date(r.start).getTime())}function v$(e){return[...e].sort((t,n)=>{const r=fm(t),s=fm(n);return r&&!s?-1:!r&&s?1:new Date(t.start).getTime()-new Date(n.start).getTime()})}function G4e(e,t){return e.filter(n=>{if(!fm(n))return!1;const r=new Date(n.start),s=new Date(n.end);return!bs(t,r)&&(bs(t,s)||t>r&&t<s)})}function W4e(e,t){return e.filter(n=>{const r=new Date(n.start),s=new Date(n.end);return bs(t,r)||bs(t,s)||t>r&&t<s})}function x$(e,t){return e.filter(n=>{const r=new Date(n.start),s=new Date(n.end);return bs(t,r)||bs(t,s)||t>r&&t<s}).sort((n,r)=>new Date(n.start).getTime()-new Date(r.start).getTime())}function Y4e(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}const Pp=e=>ar(e,yx(e)===0?"ha":"h:mma").toLowerCase();function w$({event:e,isFirstDay:t=!0,isLastDay:n=!0,isDragging:r,onClick:s,className:o,children:i,currentTime:a,dndListeners:l,dndAttributes:c,onMouseDown:u,onTouchStart:f}){const m=a?new Date(new Date(a).getTime()+(new Date(e.end).getTime()-new Date(e.start).getTime())):new Date(e.end),g=vK(m);return h.jsx("button",{className:Qe("focus-visible:border-ring focus-visible:ring-ring/50 flex size-full overflow-hidden px-1 text-left font-medium backdrop-blur-md transition outline-none select-none focus-visible:ring-[3px] data-dragging:cursor-grabbing data-dragging:shadow-lg data-past-event:line-through sm:px-2",xK(e.color),V4e(t,n),o),"data-dragging":r||void 0,"data-past-event":g||void 0,onClick:s,onMouseDown:u,onTouchStart:f,...l,...c,children:i})}function hm({event:e,view:t,isDragging:n,onClick:r,showTime:s,currentTime:o,isFirstDay:i=!0,isLastDay:a=!0,children:l,className:c,dndListeners:u,dndAttributes:f,onMouseDown:m,onTouchStart:g}){const y=e.color,v=x.useMemo(()=>o||new Date(e.start),[o,e.start]),w=x.useMemo(()=>o?new Date(new Date(o).getTime()+(new Date(e.end).getTime()-new Date(e.start).getTime())):new Date(e.end),[o,e.start,e.end]),_=x.useMemo(()=>Y1(w,v),[v,w]),S=()=>e.allDay?"All day":_<45?Pp(v):`${Pp(v)} - ${Pp(w)}`;return t==="month"?h.jsx(w$,{event:e,isFirstDay:i,isLastDay:a,isDragging:n,onClick:r,className:Qe("mt-[var(--event-gap)] h-[var(--event-height)] items-center text-[10px] sm:text-xs",c),currentTime:o,dndListeners:u,dndAttributes:f,onMouseDown:m,onTouchStart:g,children:l||h.jsxs("span",{className:"truncate",children:[!e.allDay&&h.jsxs("span",{className:"truncate font-normal opacity-70 sm:text-[11px]",children:[Pp(v)," "]}),e.title]})}):t==="week"||t==="day"?h.jsx(w$,{event:e,isFirstDay:i,isLastDay:a,isDragging:n,onClick:r,className:Qe("py-1",_<45?"items-center":"flex-col",t==="week"?"text-[10px] sm:text-xs":"text-xs",c),currentTime:o,dndListeners:u,dndAttributes:f,onMouseDown:m,onTouchStart:g,children:_<45?h.jsxs("div",{className:"truncate",children:[e.title," ",s&&h.jsx("span",{className:"opacity-70",children:Pp(v)})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"truncate font-medium",children:e.title}),s&&h.jsx("div",{className:"truncate font-normal opacity-70 sm:text-[11px]",children:S()})]})}):h.jsxs("button",{className:Qe("focus-visible:border-ring focus-visible:ring-ring/50 flex w-full flex-col gap-1 rounded p-2 text-left transition outline-none focus-visible:ring-[3px] data-past-event:line-through data-past-event:opacity-90",xK(y),c),"data-past-event":vK(new Date(e.end))||void 0,onClick:r,onMouseDown:m,onTouchStart:g,...u,...f,children:[h.jsx("div",{className:"text-sm font-medium",children:e.title}),h.jsxs("div",{className:"text-xs opacity-70",children:[e.allDay?h.jsx("span",{children:"All day"}):h.jsxs("span",{className:"uppercase",children:[Pp(v)," -"," ",Pp(w)]}),e.location&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"px-1 opacity-35",children:"  "}),h.jsx("span",{children:e.location})]})]}),e.description&&h.jsx("div",{className:"my-1 text-xs opacity-90",children:e.description})]})}const wK=x.createContext({activeEvent:null,activeId:null,activeView:null,currentTime:null,eventHeight:null,isMultiDay:!1,multiDayWidth:null,dragHandlePosition:null}),EK=()=>x.useContext(wK);function K4e({children:e,onEventUpdate:t}){var j,q;const[n,r]=x.useState(null),[s,o]=x.useState(null),[i,a]=x.useState(null),[l,c]=x.useState(null),[u,f]=x.useState(null),[m,g]=x.useState(!1),[y,v]=x.useState(null),[w,_]=x.useState(null),S=x.useRef({height:0}),k=t8(m0(i8,{activationConstraint:{distance:5}}),m0(a8,{activationConstraint:{delay:250,tolerance:5}}),m0(W4,{activationConstraint:{distance:5}})),R=x.useId(),O=U=>{const{active:z}=U;if(!z.data.current){console.error("Missing data in drag start event",U);return}const{event:H,view:F,height:W,isMultiDay:X,multiDayWidth:J,dragHandlePosition:ee}=z.data.current;r(H),o(z.id),a(F),c(new Date(H.start)),g(X||!1),v(J||null),_(ee||null),W&&(S.current.height=W,f(W))},M=U=>{const{over:z}=U;if(z&&n&&z.data.current){const{date:H,time:F}=z.data.current;if(F!==void 0&&i!=="month"){const W=new Date(H),X=Math.floor(F),J=F-X;let ee=0;J<.125?ee=0:J<.375?ee=15:J<.625?ee=30:ee=45,W.setHours(X,ee,0,0),(!l||W.getHours()!==l.getHours()||W.getMinutes()!==l.getMinutes()||W.getDate()!==l.getDate()||W.getMonth()!==l.getMonth()||W.getFullYear()!==l.getFullYear())&&c(W)}else if(i==="month"){const W=new Date(H);l&&W.setHours(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()),(!l||W.getDate()!==l.getDate()||W.getMonth()!==l.getMonth()||W.getFullYear()!==l.getFullYear())&&c(W)}}},P=U=>{const{active:z,over:H}=U;if(!H||!n||!l){r(null),o(null),a(null),c(null),f(null),g(!1),v(null),_(null);return}try{if(!z.data.current||!H.data.current)throw new Error("Missing data in drag event");const F=z.data.current,W=H.data.current;if(!F.event||!W.date)throw new Error("Missing required event data");const X=F.event,J=W.date,ee=W.time,re=new Date(J);if(ee!==void 0){const Te=Math.floor(ee),ge=ee-Te;let Ce=0;ge<.125?Ce=0:ge<.375?Ce=15:ge<.625?Ce=30:Ce=45,re.setHours(Te,Ce,0,0)}else re.setHours(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds());const ie=new Date(X.start),Z=new Date(X.end),te=Y1(Z,ie),oe=TTe(re,te);(ie.getFullYear()!==re.getFullYear()||ie.getMonth()!==re.getMonth()||ie.getDate()!==re.getDate()||ie.getHours()!==re.getHours()||ie.getMinutes()!==re.getMinutes())&&t({...X,start:re,end:oe})}catch(F){console.error("Error in drag end handler:",F)}finally{r(null),o(null),a(null),c(null),f(null),g(!1),v(null),_(null)}};return h.jsx(bS,{id:R,sensors:k,onDragStart:O,onDragOver:M,onDragEnd:P,children:h.jsxs(wK.Provider,{value:{activeEvent:n,activeId:s,activeView:i,currentTime:l,eventHeight:u,isMultiDay:m,multiDayWidth:y,dragHandlePosition:w},children:[e,h.jsx(yS,{adjustScale:!1,dropAnimation:null,children:n&&i&&h.jsx("div",{style:{height:u?`${u}px`:"auto",width:m&&y?`${y}%`:"100%"},children:h.jsx(hm,{event:n,view:i,isDragging:!0,showTime:i!=="month",currentTime:l||void 0,isFirstDay:((j=w==null?void 0:w.data)==null?void 0:j.isFirstDay)!==!1,isLastDay:((q=w==null?void 0:w.data)==null?void 0:q.isLastDay)!==!1})})})]})})}function _K(e,t){const[n,r]=x.useState(0),[s,o]=x.useState(!1);return x.useEffect(()=>{const i=()=>{const l=new Date,c=l.getHours(),u=l.getMinutes(),f=(c-md)*60+u,m=0,g=(Vp-md)*60,y=(f-m)/(g-m)*100;let v=!1;if(t==="day")v=bs(l,e);else if(t==="week"){const w=Pc(e,{weekStartsOn:0}),_=Ab(e,{weekStartsOn:0});v=B4e(l,{start:w,end:_})}r(y),o(v)};i();const a=setInterval(i,6e4);return()=>clearInterval(a)},[e,t]),{currentTimePosition:n,currentTimeVisible:s}}function Z4e({eventHeight:e,eventGap:t}){const n=x.useRef(null),r=x.useRef(null),[s,o]=x.useState(null);x.useLayoutEffect(()=>{if(!n.current)return;const a=()=>{n.current&&o(n.current.clientHeight)};return a(),r.current||(r.current=new ResizeObserver(()=>{a()})),r.current.observe(n.current),()=>{r.current&&r.current.disconnect()}},[]);const i=x.useMemo(()=>a=>{if(!s)return a;const l=Math.floor(s/(e+t));return a<=l?a:l>0?l-1:0},[s,e,t]);return{contentRef:n,contentHeight:s,getVisibleEventCount:i}}function J4e({currentDate:e,events:t,onEventSelect:n}){const r=x.useMemo(()=>(console.log("Agenda view updating with date:",e.toISOString()),Array.from({length:A_},(i,a)=>Tf(new Date(e),a))),[e]),s=(i,a)=>{a.stopPropagation(),console.log("Agenda view event clicked:",i),n(i)},o=r.some(i=>x$(t,i).length>0);return h.jsx("div",{className:"border-border/70 border-t px-4",children:o?r.map(i=>{const a=x$(t,i);return a.length===0?null:h.jsxs("div",{className:"border-border/70 relative my-12 border-t",children:[h.jsx("span",{className:"bg-background absolute -top-3 left-0 flex h-6 items-center pe-4 text-[10px] uppercase data-today:font-medium sm:pe-4 sm:text-xs","data-today":h1(i)||void 0,children:ar(i,"d MMM, EEEE")}),h.jsx("div",{className:"mt-6 space-y-2",children:a.map(l=>h.jsx(hm,{event:l,view:"agenda",onClick:c=>s(l,c)},l.id))})]},i.toString())}):h.jsxs("div",{className:"flex min-h-[70svh] flex-col items-center justify-center py-16 text-center",children:[h.jsx(B1,{size:32,className:"text-muted-foreground/50 mb-2"}),h.jsx("h3",{className:"text-lg font-medium",children:"No events found"}),h.jsx("p",{className:"text-muted-foreground",children:"There are no events scheduled for this time period."})]})})}function X4e({currentDate:e,events:t,onEventSelect:n,onEventCreate:r}){const s=x.useMemo(()=>{const g=Wf(e);return fK({start:A1(g,md),end:A1(g,Vp-1)})},[e]),o=x.useMemo(()=>t.filter(g=>{const y=new Date(g.start),v=new Date(g.end);return bs(e,y)||bs(e,v)||e>y&&e<v}).sort((g,y)=>new Date(g.start).getTime()-new Date(y.start).getTime()),[e,t]),i=x.useMemo(()=>o.filter(g=>g.allDay||fm(g)),[o]),a=x.useMemo(()=>o.filter(g=>!g.allDay&&!fm(g)),[o]),l=x.useMemo(()=>{const g=[],y=Wf(e),v=[...a].sort((_,S)=>{const k=new Date(_.start),R=new Date(S.start),O=new Date(_.end),M=new Date(S.end);if(k<R)return-1;if(k>R)return 1;const P=Y1(O,k);return Y1(M,R)-P}),w=[];return v.forEach(_=>{const S=new Date(_.start),k=new Date(_.end),R=bs(e,S)?S:y,O=bs(e,k)?k:A1(y,24),M=N1(R)+yx(R)/60,P=N1(O)+yx(O)/60,j=(M-md)*gx,q=(P-M)*gx;let U=0,z=!1;for(;!z;){const X=w[U]||[];X.length===0?(w[U]=X,z=!0):X.some(ee=>lK({start:R,end:O},{start:new Date(ee.event.start),end:new Date(ee.event.end)}))?U++:z=!0}const H=w[U]||[];w[U]=H,H.push({event:_,end:O});const F=U===0?1:.9,W=U===0?0:U*.1;g.push({event:_,top:j,height:q,left:W,width:F,zIndex:10+U})}),g},[e,a]),c=(g,y)=>{y.stopPropagation(),n(g)},u=i.length>0,{currentTimePosition:f,currentTimeVisible:m}=_K(e,"day");return h.jsxs("div",{"data-slot":"day-view",className:"contents",children:[u&&h.jsx("div",{className:"border-border/70 bg-muted/50 border-t",children:h.jsxs("div",{className:"grid grid-cols-[3rem_1fr] sm:grid-cols-[4rem_1fr]",children:[h.jsx("div",{className:"relative",children:h.jsx("span",{className:"text-muted-foreground/70 absolute bottom-0 left-0 h-6 w-16 max-w-full pe-2 text-right text-[10px] sm:pe-4 sm:text-xs",children:"All day"})}),h.jsx("div",{className:"border-border/70 relative border-r p-1 last:border-r-0",children:i.map(g=>{const y=new Date(g.start),v=new Date(g.end),w=bs(e,y),_=bs(e,v);return h.jsx(hm,{onClick:S=>c(g,S),event:g,view:"month",isFirstDay:w,isLastDay:_,children:h.jsx("div",{children:g.title})},`spanning-${g.id}`)})})]})}),h.jsxs("div",{className:"border-border/70 grid flex-1 grid-cols-[3rem_1fr] overflow-hidden border-t sm:grid-cols-[4rem_1fr]",children:[h.jsx("div",{children:s.map((g,y)=>h.jsx("div",{className:"border-border/70 relative h-[var(--week-cells-height)] border-b last:border-b-0",children:y>0&&h.jsx("span",{className:"bg-background text-muted-foreground/70 absolute -top-3 left-0 flex h-6 w-16 max-w-full items-center justify-end pe-2 text-[10px] sm:pe-4 sm:text-xs",children:ar(g,"h a")})},g.toString()))}),h.jsxs("div",{className:"relative",children:[l.map(g=>h.jsx("div",{className:"absolute z-10 px-0.5",style:{top:`${g.top}px`,height:`${g.height}px`,left:`${g.left*100}%`,width:`${g.width*100}%`,zIndex:g.zIndex},children:h.jsx("div",{className:"size-full",children:h.jsx(g8,{event:g.event,view:"day",onClick:y=>c(g.event,y),showTime:!0,height:g.height})})},g.event.id)),m&&h.jsx("div",{className:"pointer-events-none absolute right-0 left-0 z-20",style:{top:`${f}%`},children:h.jsxs("div",{className:"relative flex items-center",children:[h.jsx("div",{className:"bg-primary absolute -left-1 h-2 w-2 rounded-full"}),h.jsx("div",{className:"bg-primary h-[2px] w-full"})]})}),s.map(g=>{const y=N1(g);return h.jsx("div",{className:"border-border/70 relative h-[var(--week-cells-height)] border-b last:border-b-0",children:[0,1,2,3].map(v=>{const w=y+v*.25;return h.jsx(b8,{id:`day-cell-${e.toISOString()}-${w}`,date:e,time:w,className:Qe("absolute h-[calc(var(--week-cells-height)/4)] w-full",v===0&&"top-0",v===1&&"top-[calc(var(--week-cells-height)/4)]",v===2&&"top-[calc(var(--week-cells-height)/4*2)]",v===3&&"top-[calc(var(--week-cells-height)/4*3)]"),onClick:()=>{const _=new Date(e);_.setHours(y),_.setMinutes(v*15),r(_)}},`${g.toString()}-${v}`)})},g.toString())})]})]})]})}function g8({event:e,view:t,showTime:n,onClick:r,height:s,isMultiDay:o,multiDayWidth:i,isFirstDay:a=!0,isLastDay:l=!0,"aria-hidden":c}){var q;const{activeId:u}=EK(),f=x.useRef(null),[m,g]=x.useState(null),y=new Date(e.start),v=new Date(e.end),w=o||e.allDay||MTe(v,y)>=1,{attributes:_,listeners:S,setNodeRef:k,transform:R,isDragging:O}=UY({id:`${e.id}-${t}`,data:{event:e,view:t,height:s||((q=f.current)==null?void 0:q.offsetHeight)||null,isMultiDay:w,multiDayWidth:i,dragHandlePosition:m,isFirstDay:a,isLastDay:l}}),M=U=>{if(f.current){const z=f.current.getBoundingClientRect();g({x:U.clientX-z.left,y:U.clientY-z.top})}};if(O||u===`${e.id}-${t}`)return h.jsx("div",{ref:k,className:"opacity-0",style:{height:s||"auto"}});const P=R?{transform:Cu.Translate.toString(R),height:s||"auto",width:w&&i?`${i}%`:void 0}:{height:s||"auto",width:w&&i?`${i}%`:void 0},j=U=>{if(f.current){const z=f.current.getBoundingClientRect(),H=U.touches[0];H&&g({x:H.clientX-z.left,y:H.clientY-z.top})}};return h.jsx("div",{ref:U=>{k(U),f&&(f.current=U)},style:P,className:"touch-none",children:h.jsx(hm,{event:e,view:t,showTime:n,isFirstDay:a,isLastDay:l,isDragging:O,onClick:r,onMouseDown:M,onTouchStart:j,dndListeners:S,dndAttributes:_,"aria-hidden":c})})}function b8({id:e,date:t,time:n,children:r,className:s,onClick:o}){const{activeEvent:i}=EK(),{setNodeRef:a,isOver:l}=VY({id:e,data:{date:t,time:n}}),c=n!==void 0?`${Math.floor(n)}:${Math.round((n-Math.floor(n))*60).toString().padStart(2,"0")}`:null;return h.jsx("div",{ref:a,onClick:o,className:Qe("data-dragging:bg-accent flex h-full flex-col overflow-hidden px-0.5 py-1 sm:px-1",s),title:c?`${c}`:void 0,"data-dragging":l&&i?!0:void 0,children:r})}const Q4e=({color:e="currentColor",size:t=24,className:n,...r})=>Me.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:e,...r,className:"remixicon "+(n||"")},Me.createElement("path",{d:"M9 1V3H15V1H17V3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H7V1H9ZM20 10H4V19H20V10ZM15.0355 11.136L16.4497 12.5503L11.5 17.5L7.96447 13.9645L9.37868 12.5503L11.5 14.6716L15.0355 11.136ZM7 5H4V8H20V5H17V6H15V5H9V6H7V5Z"})),E$=({color:e="currentColor",size:t=24,className:n,...r})=>Me.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:e,...r,className:"remixicon "+(n||"")},Me.createElement("path",{d:"M9 1V3H15V1H17V3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H7V1H9ZM20 11H4V19H20V11ZM7 5H4V9H20V5H17V7H15V5H9V7H7V5Z"})),eCe=({color:e="currentColor",size:t=24,className:n,...r})=>Me.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:e,...r,className:"remixicon "+(n||"")},Me.createElement("path",{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"}));function tCe(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Array(12).fill(0);let BN=1;class nCe{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...s}=t,o=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:BN++,i=this.toasts.find(l=>l.id===o),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),i?this.toasts=this.toasts.map(l=>l.id===o?(this.publish({...l,...t,id:o,title:r}),{...l,...t,id:o,dismissible:a,title:r}):l):this.addToast({title:r,...s,dismissible:a,id:o}),o},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let o=r!==void 0,i;const a=s.then(async c=>{if(i=["resolve",c],Me.isValidElement(c))o=!1,this.create({id:r,type:"default",message:c});else if(sCe(c)&&!c.ok){o=!1;const f=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,y=typeof f=="object"&&!Me.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:m,...y})}else if(c instanceof Error){o=!1;const f=typeof n.error=="function"?await n.error(c):n.error,m=typeof n.description=="function"?await n.description(c):n.description,y=typeof f=="object"&&!Me.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:m,...y})}else if(n.success!==void 0){o=!1;const f=typeof n.success=="function"?await n.success(c):n.success,m=typeof n.description=="function"?await n.description(c):n.description,y=typeof f=="object"&&!Me.isValidElement(f)?f:{message:f};this.create({id:r,type:"success",description:m,...y})}}).catch(async c=>{if(i=["reject",c],n.error!==void 0){o=!1;const u=typeof n.error=="function"?await n.error(c):n.error,f=typeof n.description=="function"?await n.description(c):n.description,g=typeof u=="object"&&!Me.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:f,...g})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||BN++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const xc=new nCe,rCe=(e,t)=>{const n=(t==null?void 0:t.id)||BN++;return xc.addToast({title:e,...t,id:n}),n},sCe=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",oCe=rCe,iCe=()=>xc.toasts,aCe=()=>xc.getActiveToasts(),Ui=Object.assign(oCe,{success:xc.success,info:xc.info,warning:xc.warning,error:xc.error,custom:xc.custom,message:xc.message,promise:xc.promise,dismiss:xc.dismiss,loading:xc.loading},{getHistory:iCe,getToasts:aCe});tCe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function lCe({events:e=[],onEventAdd:t,onEventUpdate:n,onEventDelete:r,className:s,initialView:o="month"}){const[i,a]=x.useState(new Date),[l,c]=x.useState(o),[u,f]=x.useState(!1),[m,g]=x.useState(null);x.useEffect(()=>{const P=j=>{if(!(u||j.target instanceof HTMLInputElement||j.target instanceof HTMLTextAreaElement||j.target instanceof HTMLElement&&j.target.isContentEditable))switch(j.key.toLowerCase()){case"m":c("month");break;case"w":c("week");break;case"d":c("day");break;case"a":c("agenda");break}};return window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P)}},[u]);const y=()=>{l==="month"?a(U4e(i)):l==="week"?a(H4e(i)):l==="day"?a(Tf(i,-1)):l==="agenda"&&a(Tf(i,-A_))},v=()=>{l==="month"?a(Q4(i,1)):l==="week"?a(m8(i,1)):l==="day"?a(Tf(i,1)):l==="agenda"&&a(Tf(i,A_))},w=()=>{a(new Date)},_=P=>{console.log("Event selected:",P),g(P),f(!0)},S=P=>{console.log("Creating new event at:",P);const j=P.getMinutes(),q=j%15;q!==0&&(q<7.5?P.setMinutes(j-q):P.setMinutes(j+(15-q)),P.setSeconds(0),P.setMilliseconds(0));const U={id:"",title:"",start:P,end:Y4e(P,1),allDay:!1};g(U),f(!0)},k=P=>{P.id?(n==null||n(P),Ui(`Event "${P.title}" updated`,{description:ar(new Date(P.start),"MMM d, yyyy"),position:"bottom-left"})):(t==null||t({...P,id:Math.random().toString(36).substring(2,11)}),Ui(`Event "${P.title}" added`,{description:ar(new Date(P.start),"MMM d, yyyy"),position:"bottom-left"})),f(!1),g(null)},R=P=>{const j=e.find(q=>q.id===P);r==null||r(P),f(!1),g(null),j&&Ui(`Event "${j.title}" deleted`,{description:ar(new Date(j.start),"MMM d, yyyy"),position:"bottom-left"})},O=P=>{n==null||n(P),Ui(`Event "${P.title}" moved`,{description:ar(new Date(P.start),"MMM d, yyyy"),position:"bottom-left"})},M=x.useMemo(()=>{if(l==="month")return ar(i,"MMMM yyyy");if(l==="week"){const P=Pc(i,{weekStartsOn:0}),j=Ab(i,{weekStartsOn:0});return _S(P,j)?ar(P,"MMMM yyyy"):`${ar(P,"MMM")} - ${ar(j,"MMM yyyy")}`}else{if(l==="day")return h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"min-[480px]:hidden","aria-hidden":"true",children:ar(i,"MMM d, yyyy")}),h.jsx("span",{className:"max-[479px]:hidden min-md:hidden","aria-hidden":"true",children:ar(i,"MMMM d, yyyy")}),h.jsx("span",{className:"max-md:hidden",children:ar(i,"EEE MMMM d, yyyy")})]});if(l==="agenda"){const P=i,j=Tf(i,A_-1);return _S(P,j)?ar(P,"MMMM yyyy"):`${ar(P,"MMM")} - ${ar(j,"MMM yyyy")}`}else return ar(i,"MMMM yyyy")}},[i,l]);return h.jsx("div",{className:"flex min-h-[calc(100vh-var(--header-height)-3rem)] flex-col rounded-lg border has-data-[slot=month-view]:flex-1",style:{"--event-height":`${$N}px`,"--event-gap":`${sK}px`,"--week-cells-height":`${gx}px`},children:h.jsxs(K4e,{onEventUpdate:O,children:[h.jsxs("div",{className:Qe("flex items-center justify-between p-2 sm:p-4",s),children:[h.jsxs("div",{className:"flex items-center gap-1 sm:gap-4",children:[h.jsxs(_r,{variant:"outline",className:"max-[479px]:aspect-square max-[479px]:p-0!",onClick:w,children:[h.jsx(Q4e,{className:"min-[480px]:hidden",size:16,"aria-hidden":"true"}),h.jsx("span",{className:"max-[479px]:sr-only",children:"Today"})]}),h.jsxs("div",{className:"flex items-center sm:gap-2",children:[h.jsx(_r,{variant:"ghost",size:"icon",onClick:y,"aria-label":"Previous",children:h.jsx(w1,{size:16,"aria-hidden":"true"})}),h.jsx(_r,{variant:"ghost",size:"icon",onClick:v,"aria-label":"Next",children:h.jsx(Nf,{size:16,"aria-hidden":"true"})})]}),h.jsx("h2",{className:"text-sm font-semibold sm:text-lg md:text-xl",children:M})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(bw,{children:[h.jsx(yw,{asChild:!0,children:h.jsxs(_r,{variant:"outline",className:"gap-1.5 max-[479px]:h-8",children:[h.jsxs("span",{children:[h.jsx("span",{className:"min-[480px]:hidden","aria-hidden":"true",children:l.charAt(0).toUpperCase()}),h.jsx("span",{className:"max-[479px]:sr-only",children:l.charAt(0).toUpperCase()+l.slice(1)})]}),h.jsx($f,{className:"-me-1 opacity-60",size:16,"aria-hidden":"true"})]})}),h.jsxs(vw,{align:"end",className:"min-w-32",children:[h.jsxs(uu,{onClick:()=>c("month"),children:["Month ",h.jsx(m2,{children:"M"})]}),h.jsxs(uu,{onClick:()=>c("week"),children:["Week ",h.jsx(m2,{children:"W"})]}),h.jsxs(uu,{onClick:()=>c("day"),children:["Day ",h.jsx(m2,{children:"D"})]}),h.jsxs(uu,{onClick:()=>c("agenda"),children:["Agenda ",h.jsx(m2,{children:"A"})]})]})]}),h.jsxs(_r,{className:"max-[479px]:aspect-square max-[479px]:p-0!",size:"sm",onClick:()=>{g(null),f(!0)},children:[h.jsx(qf,{className:"opacity-60 sm:-ms-1",size:16,"aria-hidden":"true"}),h.jsx("span",{className:"max-sm:sr-only",children:"New event"})]})]})]}),h.jsxs("div",{className:"flex flex-1 flex-col",children:[l==="month"&&h.jsx(vke,{currentDate:i,events:e,onEventSelect:_,onEventCreate:S}),l==="week"&&h.jsx(xke,{currentDate:i,events:e,onEventSelect:_,onEventCreate:S}),l==="day"&&h.jsx(X4e,{currentDate:i,events:e,onEventSelect:_,onEventCreate:S}),l==="agenda"&&h.jsx(J4e,{currentDate:i,events:e,onEventSelect:_})]}),h.jsx(yke,{event:m,isOpen:u,onClose:()=>{f(!1),g(null)},onSave:k,onDelete:R})]})})}function cCe(e,t,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:n}).format(t).split(/\s/g).slice(2).join(" ")}const K5={},fv={};function qp(e,t){try{const r=(K5[e]||(K5[e]=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format))(t).split("GMT")[1];return r in fv?fv[r]:_$(r,r.split(":"))}catch{if(e in fv)return fv[e];const n=e==null?void 0:e.match(uCe);return n?_$(e,n.slice(1)):NaN}}const uCe=/([+-]\d\d):?(\d\d)?/;function _$(e,t){const n=+(t[0]||0),r=+(t[1]||0),s=+(t[2]||0)/60;return fv[e]=n*60+r>0?n*60+r+s:n*60-r-s}class gd extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(qp(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),SK(this),zN(this)):this.setTime(Date.now())}static tz(t,...n){return n.length?new gd(...n,t):new gd(Date.now(),t)}withTimeZone(t){return new gd(+this,t)}getTimezoneOffset(){const t=-qp(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),zN(this),+this}[Symbol.for("constructDateFrom")](t){return new gd(+new Date(t),this.timeZone)}}const S$=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!S$.test(e))return;const t=e.replace(S$,"$1UTC");gd.prototype[t]&&(e.startsWith("get")?gd.prototype[e]=function(){return this.internal[t]()}:(gd.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),dCe(this),+this},gd.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),zN(this),+this}))});function zN(e){e.internal.setTime(+e),e.internal.setUTCSeconds(e.internal.getUTCSeconds()-Math.round(-qp(e.timeZone,e)*60))}function dCe(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),SK(e)}function SK(e){const t=qp(e.timeZone,e),n=t>0?Math.floor(t):Math.ceil(t),r=new Date(+e);r.setUTCHours(r.getUTCHours()-1);const s=-new Date(+e).getTimezoneOffset(),o=-new Date(+r).getTimezoneOffset(),i=s-o,a=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();i&&a&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+i);const l=s-n;l&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+l);const c=new Date(+e);c.setUTCSeconds(0);const u=s>0?c.getSeconds():(c.getSeconds()-60)%60,f=Math.round(-(qp(e.timeZone,e)*60))%60;(f||u)&&(e.internal.setUTCSeconds(e.internal.getUTCSeconds()+f),Date.prototype.setUTCSeconds.call(e,Date.prototype.getUTCSeconds.call(e)+f+u));const m=qp(e.timeZone,e),g=m>0?Math.floor(m):Math.ceil(m),v=-new Date(+e).getTimezoneOffset()-g,w=g!==n,_=v-l;if(w&&_){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+_);const S=qp(e.timeZone,e),k=S>0?Math.floor(S):Math.ceil(S),R=g-k;R&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+R),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+R))}}class Rf extends gd{static tz(t,...n){return n.length?new Rf(...n,t):new Rf(Date.now(),t)}toISOString(){const[t,n,r]=this.tzComponents(),s=`${t}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+s}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,n,r,s]=this.internal.toUTCString().split(" ");return`${t==null?void 0:t.slice(0,-1)} ${r} ${n} ${s}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[n,r,s]=this.tzComponents();return`${t} GMT${n}${r}${s} (${cCe(this.timeZone,this)})`}toLocaleString(t,n){return Date.prototype.toLocaleString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleDateString(t,n){return Date.prototype.toLocaleDateString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleTimeString(t,n){return Date.prototype.toLocaleTimeString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),n=t>0?"-":"+",r=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),s=String(Math.abs(t)%60).padStart(2,"0");return[n,r,s]}withTimeZone(t){return new Rf(+this,t)}[Symbol.for("constructDateFrom")](t){return new Rf(+new Date(t),this.timeZone)}}const T$=5,fCe=4;function hCe(e,t){const n=t.startOfMonth(e),r=n.getDay()>0?n.getDay():7,s=t.addDays(e,-r+1),o=t.addDays(s,T$*7-1);return t.getMonth(e)===t.getMonth(o)?T$:fCe}function TK(e,t){const n=t.startOfMonth(e),r=n.getDay();return r===1?n:r===0?t.addDays(n,-6):t.addDays(n,-1*(r-1))}function pCe(e,t){const n=TK(e,t),r=hCe(e,t);return t.addDays(n,r*7-1)}const CK={...t1,labels:{labelDayButton:(e,t,n,r)=>{let s;r&&typeof r.format=="function"?s=r.format.bind(r):s=(i,a)=>ar(i,a,{locale:t1,...n});let o=s(e,"PPPP");return t.today&&(o=`Today, ${o}`),t.selected&&(o=`${o}, selected`),o},labelMonthDropdown:"Choose the Month",labelNext:"Go to the Next Month",labelPrevious:"Go to the Previous Month",labelWeekNumber:e=>`Week ${e}`,labelYearDropdown:"Choose the Year",labelGrid:(e,t,n)=>{let r;return n&&typeof n.format=="function"?r=n.format.bind(n):r=(s,o)=>ar(s,o,{locale:t1,...t}),r(e,"LLLL yyyy")},labelGridcell:(e,t,n,r)=>{let s;r&&typeof r.format=="function"?s=r.format.bind(r):s=(i,a)=>ar(i,a,{locale:t1,...n});let o=s(e,"PPPP");return t!=null&&t.today&&(o=`Today, ${o}`),o},labelNav:"Navigation bar",labelWeekNumberHeader:"Week Number",labelWeekday:(e,t,n)=>{let r;return n&&typeof n.format=="function"?r=n.format.bind(n):r=(s,o)=>ar(s,o,{locale:t1,...t}),r(e,"cccc")}}};class ec{constructor(t,n){this.Date=Date,this.today=()=>{var r;return(r=this.overrides)!=null&&r.today?this.overrides.today():this.options.timeZone?Rf.tz(this.options.timeZone):new this.Date},this.newDate=(r,s,o)=>{var i;return(i=this.overrides)!=null&&i.newDate?this.overrides.newDate(r,s,o):this.options.timeZone?new Rf(r,s,o,this.options.timeZone):new Date(r,s,o)},this.addDays=(r,s)=>{var o;return(o=this.overrides)!=null&&o.addDays?this.overrides.addDays(r,s):Tf(r,s)},this.addMonths=(r,s)=>{var o;return(o=this.overrides)!=null&&o.addMonths?this.overrides.addMonths(r,s):Q4(r,s)},this.addWeeks=(r,s)=>{var o;return(o=this.overrides)!=null&&o.addWeeks?this.overrides.addWeeks(r,s):m8(r,s)},this.addYears=(r,s)=>{var o;return(o=this.overrides)!=null&&o.addYears?this.overrides.addYears(r,s):CTe(r,s)},this.differenceInCalendarDays=(r,s)=>{var o;return(o=this.overrides)!=null&&o.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,s):If(r,s)},this.differenceInCalendarMonths=(r,s)=>{var o;return(o=this.overrides)!=null&&o.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,s):RTe(r,s)},this.eachMonthOfInterval=r=>{var s;return(s=this.overrides)!=null&&s.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):PTe(r)},this.eachYearOfInterval=r=>{var a;const s=(a=this.overrides)!=null&&a.eachYearOfInterval?this.overrides.eachYearOfInterval(r):$Te(r),o=new Set(s.map(l=>this.getYear(l)));if(o.size===s.length)return s;const i=[];return o.forEach(l=>{i.push(new Date(l,0,1))}),i},this.endOfBroadcastWeek=r=>{var s;return(s=this.overrides)!=null&&s.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):pCe(r,this)},this.endOfISOWeek=r=>{var s;return(s=this.overrides)!=null&&s.endOfISOWeek?this.overrides.endOfISOWeek(r):FTe(r)},this.endOfMonth=r=>{var s;return(s=this.overrides)!=null&&s.endOfMonth?this.overrides.endOfMonth(r):uK(r)},this.endOfWeek=(r,s)=>{var o;return(o=this.overrides)!=null&&o.endOfWeek?this.overrides.endOfWeek(r,s):Ab(r,this.options)},this.endOfYear=r=>{var s;return(s=this.overrides)!=null&&s.endOfYear?this.overrides.endOfYear(r):LTe(r)},this.format=(r,s,o)=>{var a;const i=(a=this.overrides)!=null&&a.format?this.overrides.format(r,s,this.options):ar(r,s,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(i):i},this.getISOWeek=r=>{var s;return(s=this.overrides)!=null&&s.getISOWeek?this.overrides.getISOWeek(r):mK(r)},this.getMonth=(r,s)=>{var o;return(o=this.overrides)!=null&&o.getMonth?this.overrides.getMonth(r,this.options):P4e(r,this.options)},this.getYear=(r,s)=>{var o;return(o=this.overrides)!=null&&o.getYear?this.overrides.getYear(r,this.options):L4e(r,this.options)},this.getWeek=(r,s)=>{var o;return(o=this.overrides)!=null&&o.getWeek?this.overrides.getWeek(r,this.options):bK(r,this.options)},this.isAfter=(r,s)=>{var o;return(o=this.overrides)!=null&&o.isAfter?this.overrides.isAfter(r,s):$4e(r,s)},this.isBefore=(r,s)=>{var o;return(o=this.overrides)!=null&&o.isBefore?this.overrides.isBefore(r,s):ES(r,s)},this.isDate=r=>{var s;return(s=this.overrides)!=null&&s.isDate?this.overrides.isDate(r):cK(r)},this.isSameDay=(r,s)=>{var o;return(o=this.overrides)!=null&&o.isSameDay?this.overrides.isSameDay(r,s):bs(r,s)},this.isSameMonth=(r,s)=>{var o;return(o=this.overrides)!=null&&o.isSameMonth?this.overrides.isSameMonth(r,s):_S(r,s)},this.isSameYear=(r,s)=>{var o;return(o=this.overrides)!=null&&o.isSameYear?this.overrides.isSameYear(r,s):F4e(r,s)},this.max=r=>{var s;return(s=this.overrides)!=null&&s.max?this.overrides.max(r):kTe(r)},this.min=r=>{var s;return(s=this.overrides)!=null&&s.min?this.overrides.min(r):ATe(r)},this.setMonth=(r,s)=>{var o;return(o=this.overrides)!=null&&o.setMonth?this.overrides.setMonth(r,s):z4e(r,s)},this.setYear=(r,s)=>{var o;return(o=this.overrides)!=null&&o.setYear?this.overrides.setYear(r,s):j4e(r,s)},this.startOfBroadcastWeek=(r,s)=>{var o;return(o=this.overrides)!=null&&o.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):TK(r,this)},this.startOfDay=r=>{var s;return(s=this.overrides)!=null&&s.startOfDay?this.overrides.startOfDay(r):Wf(r)},this.startOfISOWeek=r=>{var s;return(s=this.overrides)!=null&&s.startOfISOWeek?this.overrides.startOfISOWeek(r):bx(r)},this.startOfMonth=r=>{var s;return(s=this.overrides)!=null&&s.startOfMonth?this.overrides.startOfMonth(r):hK(r)},this.startOfWeek=(r,s)=>{var o;return(o=this.overrides)!=null&&o.startOfWeek?this.overrides.startOfWeek(r,this.options):Pc(r,this.options)},this.startOfYear=r=>{var s;return(s=this.overrides)!=null&&s.startOfYear?this.overrides.startOfYear(r):pK(r)},this.options={locale:CK,...t},this.overrides=n}getDigitMap(){const{numerals:t="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:t}),r={};for(let s=0;s<10;s++)r[s.toString()]=n.format(s);return r}replaceDigits(t){const n=this.getDigitMap();return t.replace(/\d/g,r=>n[r]||r)}formatNumber(t){return this.replaceDigits(t.toString())}getMonthYearOrder(){var n;const t=(n=this.options.locale)==null?void 0:n.code;return t&&ec.yearFirstLocales.has(t)?"year-first":"month-first"}formatMonthYear(t){const{locale:n,timeZone:r,numerals:s}=this.options,o=n==null?void 0:n.code;if(o&&ec.yearFirstLocales.has(o))try{return new Intl.DateTimeFormat(o,{month:"long",year:"numeric",timeZone:r,numberingSystem:s}).format(t)}catch{}const i=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(t,i)}}ec.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Ad=new ec;class kK{constructor(t,n,r=Ad){this.date=t,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(t,n)),this.dateLib=r,this.isoDate=r.format(t,"yyyy-MM-dd"),this.displayMonthId=r.format(n,"yyyy-MM"),this.dateMonthId=r.format(t,"yyyy-MM")}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class mCe{constructor(t,n){this.date=t,this.weeks=n}}class gCe{constructor(t,n){this.days=n,this.weekNumber=t}}function bCe(e){return Me.createElement("button",{...e})}function yCe(e){return Me.createElement("span",{...e})}function vCe(e){const{size:t=24,orientation:n="left",className:r}=e;return Me.createElement("svg",{className:r,width:t,height:t,viewBox:"0 0 24 24"},n==="up"&&Me.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&Me.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&Me.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&Me.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function xCe(e){const{day:t,modifiers:n,...r}=e;return Me.createElement("td",{...r})}function wCe(e){const{day:t,modifiers:n,...r}=e,s=Me.useRef(null);return Me.useEffect(()=>{var o;n.focused&&((o=s.current)==null||o.focus())},[n.focused]),Me.createElement("button",{ref:s,...r})}var Rn;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(Rn||(Rn={}));var Io;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(Io||(Io={}));var gu;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(gu||(gu={}));var Ul;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(Ul||(Ul={}));function ECe(e){const{options:t,className:n,components:r,classNames:s,...o}=e,i=[s[Rn.Dropdown],n].join(" "),a=t==null?void 0:t.find(({value:l})=>l===o.value);return Me.createElement("span",{"data-disabled":o.disabled,className:s[Rn.DropdownRoot]},Me.createElement(r.Select,{className:i,...o},t==null?void 0:t.map(({value:l,label:c,disabled:u})=>Me.createElement(r.Option,{key:l,value:l,disabled:u},c))),Me.createElement("span",{className:s[Rn.CaptionLabel],"aria-hidden":!0},a==null?void 0:a.label,Me.createElement(r.Chevron,{orientation:"down",size:18,className:s[Rn.Chevron]})))}function _Ce(e){return Me.createElement("div",{...e})}function SCe(e){return Me.createElement("div",{...e})}function TCe(e){const{calendarMonth:t,displayIndex:n,...r}=e;return Me.createElement("div",{...r},e.children)}function CCe(e){const{calendarMonth:t,displayIndex:n,...r}=e;return Me.createElement("div",{...r})}function kCe(e){return Me.createElement("table",{...e})}function ACe(e){return Me.createElement("div",{...e})}const AK=x.createContext(void 0);function Om(){const e=x.useContext(AK);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function NCe(e){const{components:t}=Om();return Me.createElement(t.Dropdown,{...e})}function ICe(e){const{onPreviousClick:t,onNextClick:n,previousMonth:r,nextMonth:s,...o}=e,{components:i,classNames:a,labels:{labelPrevious:l,labelNext:c}}=Om(),u=x.useCallback(m=>{s&&(n==null||n(m))},[s,n]),f=x.useCallback(m=>{r&&(t==null||t(m))},[r,t]);return Me.createElement("nav",{...o},Me.createElement(i.PreviousMonthButton,{type:"button",className:a[Rn.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":l(r),onClick:f},Me.createElement(i.Chevron,{disabled:r?void 0:!0,className:a[Rn.Chevron],orientation:"left"})),Me.createElement(i.NextMonthButton,{type:"button",className:a[Rn.NextMonthButton],tabIndex:s?void 0:-1,"aria-disabled":s?void 0:!0,"aria-label":c(s),onClick:u},Me.createElement(i.Chevron,{disabled:s?void 0:!0,orientation:"right",className:a[Rn.Chevron]})))}function RCe(e){const{components:t}=Om();return Me.createElement(t.Button,{...e})}function MCe(e){return Me.createElement("option",{...e})}function OCe(e){const{components:t}=Om();return Me.createElement(t.Button,{...e})}function DCe(e){const{rootRef:t,...n}=e;return Me.createElement("div",{...n,ref:t})}function PCe(e){return Me.createElement("select",{...e})}function LCe(e){const{week:t,...n}=e;return Me.createElement("tr",{...n})}function $Ce(e){return Me.createElement("th",{...e})}function FCe(e){return Me.createElement("thead",{"aria-hidden":!0},Me.createElement("tr",{...e}))}function BCe(e){const{week:t,...n}=e;return Me.createElement("th",{...n})}function zCe(e){return Me.createElement("th",{...e})}function jCe(e){return Me.createElement("tbody",{...e})}function UCe(e){const{components:t}=Om();return Me.createElement(t.Dropdown,{...e})}const HCe=Object.freeze(Object.defineProperty({__proto__:null,Button:bCe,CaptionLabel:yCe,Chevron:vCe,Day:xCe,DayButton:wCe,Dropdown:ECe,DropdownNav:_Ce,Footer:SCe,Month:TCe,MonthCaption:CCe,MonthGrid:kCe,Months:ACe,MonthsDropdown:NCe,Nav:ICe,NextMonthButton:RCe,Option:MCe,PreviousMonthButton:OCe,Root:DCe,Select:PCe,Week:LCe,WeekNumber:BCe,WeekNumberHeader:zCe,Weekday:$Ce,Weekdays:FCe,Weeks:jCe,YearsDropdown:UCe},Symbol.toStringTag,{value:"Module"}));function Mf(e,t,n=!1,r=Ad){let{from:s,to:o}=e;const{differenceInCalendarDays:i,isSameDay:a}=r;return s&&o?(i(o,s)<0&&([s,o]=[o,s]),i(t,s)>=(n?1:0)&&i(o,t)>=(n?1:0)):!n&&o?a(o,t):!n&&s?a(s,t):!1}function y8(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function tC(e){return!!(e&&typeof e=="object"&&"from"in e)}function v8(e){return!!(e&&typeof e=="object"&&"after"in e)}function x8(e){return!!(e&&typeof e=="object"&&"before"in e)}function NK(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function IK(e,t){return Array.isArray(e)&&e.every(t.isDate)}function Of(e,t,n=Ad){const r=Array.isArray(t)?t:[t],{isSameDay:s,differenceInCalendarDays:o,isAfter:i}=n;return r.some(a=>{if(typeof a=="boolean")return a;if(n.isDate(a))return s(e,a);if(IK(a,n))return a.some(l=>s(e,l));if(tC(a))return Mf(a,e,!1,n);if(NK(a))return Array.isArray(a.dayOfWeek)?a.dayOfWeek.includes(e.getDay()):a.dayOfWeek===e.getDay();if(y8(a)){const l=o(a.before,e),c=o(a.after,e),u=l>0,f=c<0;return i(a.before,a.after)?f&&u:u||f}return v8(a)?o(e,a.after)>0:x8(a)?o(a.before,e)>0:typeof a=="function"?a(e):!1})}function VCe(e,t,n,r,s){const{disabled:o,hidden:i,modifiers:a,showOutsideDays:l,broadcastCalendar:c,today:u=s.today()}=t,{isSameDay:f,isSameMonth:m,startOfMonth:g,isBefore:y,endOfMonth:v,isAfter:w}=s,_=n&&g(n),S=r&&v(r),k={[Io.focused]:[],[Io.outside]:[],[Io.disabled]:[],[Io.hidden]:[],[Io.today]:[]},R={};for(const O of e){const{date:M,displayMonth:P}=O,j=!!(P&&!m(M,P)),q=!!(_&&y(M,_)),U=!!(S&&w(M,S)),z=!!(o&&Of(M,o,s)),H=!!(i&&Of(M,i,s))||q||U||!c&&!l&&j||c&&l===!1&&j,F=f(M,u);j&&k.outside.push(O),z&&k.disabled.push(O),H&&k.hidden.push(O),F&&k.today.push(O),a&&Object.keys(a).forEach(W=>{const X=a==null?void 0:a[W];X&&Of(M,X,s)&&(R[W]?R[W].push(O):R[W]=[O])})}return O=>{const M={[Io.focused]:!1,[Io.disabled]:!1,[Io.hidden]:!1,[Io.outside]:!1,[Io.today]:!1},P={};for(const j in k){const q=k[j];M[j]=q.some(U=>U===O)}for(const j in R)P[j]=R[j].some(q=>q===O);return{...M,...P}}}function qCe(e,t,n={}){return Object.entries(e).filter(([,s])=>s===!0).reduce((s,[o])=>(n[o]?s.push(n[o]):t[Io[o]]?s.push(t[Io[o]]):t[gu[o]]&&s.push(t[gu[o]]),s),[t[Rn.Day]])}function GCe(e){return{...HCe,...e}}function WCe(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([n,r])=>{n.startsWith("data-")&&(t[n]=r)}),t}function YCe(){const e={};for(const t in Rn)e[Rn[t]]=`rdp-${Rn[t]}`;for(const t in Io)e[Io[t]]=`rdp-${Io[t]}`;for(const t in gu)e[gu[t]]=`rdp-${gu[t]}`;for(const t in Ul)e[Ul[t]]=`rdp-${Ul[t]}`;return e}function RK(e,t,n){return(n??new ec(t)).formatMonthYear(e)}const KCe=RK;function ZCe(e,t,n){return(n??new ec(t)).format(e,"d")}function JCe(e,t=Ad){return t.format(e,"LLLL")}function XCe(e,t,n){return(n??new ec(t)).format(e,"cccccc")}function QCe(e,t=Ad){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function e3e(){return""}function MK(e,t=Ad){return t.format(e,"yyyy")}const t3e=MK,n3e=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:RK,formatDay:ZCe,formatMonthCaption:KCe,formatMonthDropdown:JCe,formatWeekNumber:QCe,formatWeekNumberHeader:e3e,formatWeekdayName:XCe,formatYearCaption:t3e,formatYearDropdown:MK},Symbol.toStringTag,{value:"Module"}));function r3e(e){return e!=null&&e.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e!=null&&e.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...n3e,...e}}function w8(e,t,n,r){let s=(r??new ec(n)).format(e,"PPPP");return t.today&&(s=`Today, ${s}`),t.selected&&(s=`${s}, selected`),s}const s3e=w8;function E8(e,t,n){return(n??new ec(t)).formatMonthYear(e)}const o3e=E8;function OK(e,t,n,r){let s=(r??new ec(n)).format(e,"PPPP");return t!=null&&t.today&&(s=`Today, ${s}`),s}function DK(e){return"Choose the Month"}function PK(){return""}const i3e="Go to the Next Month";function _8(e,t){return i3e}function S8(e){return"Go to the Previous Month"}function LK(e,t,n){return(n??new ec(t)).format(e,"cccc")}function $K(e,t){return`Week ${e}`}function FK(e){return"Week Number"}function BK(e){return"Choose the Year"}const a3e=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:o3e,labelDay:s3e,labelDayButton:w8,labelGrid:E8,labelGridcell:OK,labelMonthDropdown:DK,labelNav:PK,labelNext:_8,labelPrevious:S8,labelWeekNumber:$K,labelWeekNumberHeader:FK,labelWeekday:LK,labelYearDropdown:BK},Symbol.toStringTag,{value:"Module"})),nu=(e,t,n)=>t||(n?typeof n=="function"?n:(...r)=>n:e);function l3e(e,t){var r;const n=((r=t.locale)==null?void 0:r.labels)??{};return{...a3e,...e??{},labelDayButton:nu(w8,e==null?void 0:e.labelDayButton,n.labelDayButton),labelMonthDropdown:nu(DK,e==null?void 0:e.labelMonthDropdown,n.labelMonthDropdown),labelNext:nu(_8,e==null?void 0:e.labelNext,n.labelNext),labelPrevious:nu(S8,e==null?void 0:e.labelPrevious,n.labelPrevious),labelWeekNumber:nu($K,e==null?void 0:e.labelWeekNumber,n.labelWeekNumber),labelYearDropdown:nu(BK,e==null?void 0:e.labelYearDropdown,n.labelYearDropdown),labelGrid:nu(E8,e==null?void 0:e.labelGrid,n.labelGrid),labelGridcell:nu(OK,e==null?void 0:e.labelGridcell,n.labelGridcell),labelNav:nu(PK,e==null?void 0:e.labelNav,n.labelNav),labelWeekNumberHeader:nu(FK,e==null?void 0:e.labelWeekNumberHeader,n.labelWeekNumberHeader),labelWeekday:nu(LK,e==null?void 0:e.labelWeekday,n.labelWeekday)}}function c3e(e,t,n,r,s){const{startOfMonth:o,startOfYear:i,endOfYear:a,eachMonthOfInterval:l,getMonth:c}=s;return l({start:i(e),end:a(e)}).map(m=>{const g=r.formatMonthDropdown(m,s),y=c(m),v=t&&m<o(t)||n&&m>o(n)||!1;return{value:y,label:g,disabled:v}})}function u3e(e,t={},n={}){let r={...t==null?void 0:t[Rn.Day]};return Object.entries(e).filter(([,s])=>s===!0).forEach(([s])=>{r={...r,...n==null?void 0:n[s]}}),r}function d3e(e,t,n,r){const s=r??e.today(),o=n?e.startOfBroadcastWeek(s,e):t?e.startOfISOWeek(s):e.startOfWeek(s),i=[];for(let a=0;a<7;a++){const l=e.addDays(o,a);i.push(l)}return i}function f3e(e,t,n,r,s=!1){if(!e||!t)return;const{startOfYear:o,endOfYear:i,eachYearOfInterval:a,getYear:l}=r,c=o(e),u=i(t),f=a({start:c,end:u});return s&&f.reverse(),f.map(m=>{const g=n.formatYearDropdown(m,r);return{value:l(m),label:g,disabled:!1}})}const Cw=e=>e instanceof HTMLElement?e:null,Z5=e=>[...e.querySelectorAll("[data-animated-month]")??[]],h3e=e=>Cw(e.querySelector("[data-animated-month]")),J5=e=>Cw(e.querySelector("[data-animated-caption]")),X5=e=>Cw(e.querySelector("[data-animated-weeks]")),p3e=e=>Cw(e.querySelector("[data-animated-nav]")),m3e=e=>Cw(e.querySelector("[data-animated-weekdays]"));function g3e(e,t,{classNames:n,months:r,focused:s,dateLib:o}){const i=x.useRef(null),a=x.useRef(r),l=x.useRef(!1);x.useLayoutEffect(()=>{const c=a.current;if(a.current=r,!t||!e.current||!(e.current instanceof HTMLElement)||r.length===0||c.length===0||r.length!==c.length)return;const u=o.isSameMonth(r[0].date,c[0].date),f=o.isAfter(r[0].date,c[0].date),m=f?n[Ul.caption_after_enter]:n[Ul.caption_before_enter],g=f?n[Ul.weeks_after_enter]:n[Ul.weeks_before_enter],y=i.current,v=e.current.cloneNode(!0);if(v instanceof HTMLElement?(Z5(v).forEach(k=>{if(!(k instanceof HTMLElement))return;const R=h3e(k);R&&k.contains(R)&&k.removeChild(R);const O=J5(k);O&&O.classList.remove(m);const M=X5(k);M&&M.classList.remove(g)}),i.current=v):i.current=null,l.current||u||s)return;const w=y instanceof HTMLElement?Z5(y):[],_=Z5(e.current);if(_!=null&&_.every(S=>S instanceof HTMLElement)&&w&&w.every(S=>S instanceof HTMLElement)){l.current=!0,e.current.style.isolation="isolate";const S=p3e(e.current);S&&(S.style.zIndex="1"),_.forEach((k,R)=>{const O=w[R];if(!O)return;k.style.position="relative",k.style.overflow="hidden";const M=J5(k);M&&M.classList.add(m);const P=X5(k);P&&P.classList.add(g);const j=()=>{l.current=!1,e.current&&(e.current.style.isolation=""),S&&(S.style.zIndex=""),M&&M.classList.remove(m),P&&P.classList.remove(g),k.style.position="",k.style.overflow="",k.contains(O)&&k.removeChild(O)};O.style.pointerEvents="none",O.style.position="absolute",O.style.overflow="hidden",O.setAttribute("aria-hidden","true");const q=m3e(O);q&&(q.style.opacity="0");const U=J5(O);U&&(U.classList.add(f?n[Ul.caption_before_exit]:n[Ul.caption_after_exit]),U.addEventListener("animationend",j));const z=X5(O);z&&z.classList.add(f?n[Ul.weeks_before_exit]:n[Ul.weeks_after_exit]),k.insertBefore(O,k.firstChild)})}})}function b3e(e,t,n,r){const s=e[0],o=e[e.length-1],{ISOWeek:i,fixedWeeks:a,broadcastCalendar:l}=n??{},{addDays:c,differenceInCalendarDays:u,differenceInCalendarMonths:f,endOfBroadcastWeek:m,endOfISOWeek:g,endOfMonth:y,endOfWeek:v,isAfter:w,startOfBroadcastWeek:_,startOfISOWeek:S,startOfWeek:k}=r,R=l?_(s,r):i?S(s):k(s),O=l?m(o):i?g(y(o)):v(y(o)),M=t&&(l?m(t):i?g(t):v(t)),P=M&&w(O,M)?M:O,j=u(P,R),q=f(o,s)+1,U=[];for(let F=0;F<=j;F++){const W=c(R,F);U.push(W)}const H=(l?35:42)*q;if(a&&U.length<H){const F=H-U.length;for(let W=0;W<F;W++){const X=c(U[U.length-1],1);U.push(X)}}return U}function y3e(e){const t=[];return e.reduce((n,r)=>{const s=r.weeks.reduce((o,i)=>o.concat(i.days.slice()),t.slice());return n.concat(s.slice())},t.slice())}function v3e(e,t,n,r){const{numberOfMonths:s=1}=n,o=[];for(let i=0;i<s;i++){const a=r.addMonths(e,i);if(t&&a>t)break;o.push(a)}return o}function C$(e,t,n,r){const{month:s,defaultMonth:o,today:i=r.today(),numberOfMonths:a=1}=e;let l=s||o||i;const{differenceInCalendarMonths:c,addMonths:u,startOfMonth:f}=r;if(n&&c(n,l)<a-1){const m=-1*(a-1);l=u(n,m)}return t&&c(l,t)<0&&(l=t),f(l)}function x3e(e,t,n,r){const{addDays:s,endOfBroadcastWeek:o,endOfISOWeek:i,endOfMonth:a,endOfWeek:l,getISOWeek:c,getWeek:u,startOfBroadcastWeek:f,startOfISOWeek:m,startOfWeek:g}=r,y=e.reduce((v,w)=>{const _=n.broadcastCalendar?f(w,r):n.ISOWeek?m(w):g(w),S=n.broadcastCalendar?o(w):n.ISOWeek?i(a(w)):l(a(w)),k=t.filter(P=>P>=_&&P<=S),R=n.broadcastCalendar?35:42;if(n.fixedWeeks&&k.length<R){const P=t.filter(j=>{const q=R-k.length;return j>S&&j<=s(S,q)});k.push(...P)}const O=k.reduce((P,j)=>{const q=n.ISOWeek?c(j):u(j),U=P.find(H=>H.weekNumber===q),z=new kK(j,w,r);return U?U.days.push(z):P.push(new gCe(q,[z])),P},[]),M=new mCe(w,O);return v.push(M),v},[]);return n.reverseMonths?y.reverse():y}function w3e(e,t){let{startMonth:n,endMonth:r}=e;const{startOfYear:s,startOfDay:o,startOfMonth:i,endOfMonth:a,addYears:l,endOfYear:c,newDate:u,today:f}=t,{fromYear:m,toYear:g,fromMonth:y,toMonth:v}=e;!n&&y&&(n=y),!n&&m&&(n=t.newDate(m,0,1)),!r&&v&&(r=v),!r&&g&&(r=u(g,11,31));const w=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return n?n=i(n):m?n=u(m,0,1):!n&&w&&(n=s(l(e.today??f(),-100))),r?r=a(r):g?r=u(g,11,31):!r&&w&&(r=c(e.today??f())),[n&&o(n),r&&o(r)]}function E3e(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:s,numberOfMonths:o=1}=n,{startOfMonth:i,addMonths:a,differenceInCalendarMonths:l}=r,c=s?o:1,u=i(e);if(!t)return a(u,c);if(!(l(t,e)<o))return a(u,c)}function _3e(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:s,numberOfMonths:o}=n,{startOfMonth:i,addMonths:a,differenceInCalendarMonths:l}=r,c=s?o??1:1,u=i(e);if(!t)return a(u,-c);if(!(l(u,t)<=0))return a(u,-c)}function S3e(e){const t=[];return e.reduce((n,r)=>n.concat(r.weeks.slice()),t.slice())}function nC(e,t){const[n,r]=x.useState(e);return[t===void 0?n:t,r]}function T3e(e,t){var R;const[n,r]=w3e(e,t),{startOfMonth:s,endOfMonth:o}=t,i=C$(e,n,r,t),[a,l]=nC(i,e.month?i:void 0);x.useEffect(()=>{const O=C$(e,n,r,t);l(O)},[e.timeZone]);const{months:c,weeks:u,days:f,previousMonth:m,nextMonth:g}=x.useMemo(()=>{const O=v3e(a,r,{numberOfMonths:e.numberOfMonths},t),M=b3e(O,e.endMonth?o(e.endMonth):void 0,{ISOWeek:e.ISOWeek,fixedWeeks:e.fixedWeeks,broadcastCalendar:e.broadcastCalendar},t),P=x3e(O,M,{broadcastCalendar:e.broadcastCalendar,fixedWeeks:e.fixedWeeks,ISOWeek:e.ISOWeek,reverseMonths:e.reverseMonths},t),j=S3e(P),q=y3e(P),U=_3e(a,n,e,t),z=E3e(a,r,e,t);return{months:P,weeks:j,days:q,previousMonth:U,nextMonth:z}},[t,a.getTime(),r==null?void 0:r.getTime(),n==null?void 0:n.getTime(),e.disableNavigation,e.broadcastCalendar,(R=e.endMonth)==null?void 0:R.getTime(),e.fixedWeeks,e.ISOWeek,e.numberOfMonths,e.pagedNavigation,e.reverseMonths]),{disableNavigation:y,onMonthChange:v}=e,w=O=>u.some(M=>M.days.some(P=>P.isEqualTo(O))),_=O=>{if(y)return;let M=s(O);n&&M<s(n)&&(M=s(n)),r&&M>s(r)&&(M=s(r)),l(M),v==null||v(M)};return{months:c,weeks:u,days:f,navStart:n,navEnd:r,previousMonth:m,nextMonth:g,goToMonth:_,goToDay:O=>{w(O)||_(O.date)}}}var nd;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(nd||(nd={}));function k$(e){return!e[Io.disabled]&&!e[Io.hidden]&&!e[Io.outside]}function C3e(e,t,n,r){let s,o=-1;for(const i of e){const a=t(i);k$(a)&&(a[Io.focused]&&o<nd.FocusedModifier?(s=i,o=nd.FocusedModifier):r!=null&&r.isEqualTo(i)&&o<nd.LastFocused?(s=i,o=nd.LastFocused):n(i.date)&&o<nd.Selected?(s=i,o=nd.Selected):a[Io.today]&&o<nd.Today&&(s=i,o=nd.Today))}return s||(s=e.find(i=>k$(t(i)))),s}function k3e(e,t,n,r,s,o,i){const{ISOWeek:a,broadcastCalendar:l}=o,{addDays:c,addMonths:u,addWeeks:f,addYears:m,endOfBroadcastWeek:g,endOfISOWeek:y,endOfWeek:v,max:w,min:_,startOfBroadcastWeek:S,startOfISOWeek:k,startOfWeek:R}=i;let M={day:c,week:f,month:u,year:m,startOfWeek:P=>l?S(P,i):a?k(P):R(P),endOfWeek:P=>l?g(P):a?y(P):v(P)}[e](n,t==="after"?1:-1);return t==="before"&&r?M=w([r,M]):t==="after"&&s&&(M=_([s,M])),M}function zK(e,t,n,r,s,o,i,a=0){if(a>365)return;const l=k3e(e,t,n.date,r,s,o,i),c=!!(o.disabled&&Of(l,o.disabled,i)),u=!!(o.hidden&&Of(l,o.hidden,i)),f=l,m=new kK(l,f,i);return!c&&!u?m:zK(e,t,m,r,s,o,i,a+1)}function A3e(e,t,n,r,s){const{autoFocus:o}=e,[i,a]=x.useState(),l=C3e(t.days,n,r||(()=>!1),i),[c,u]=x.useState(o?l:void 0);return{isFocusTarget:v=>!!(l!=null&&l.isEqualTo(v)),setFocused:u,focused:c,blur:()=>{a(c),u(void 0)},moveFocus:(v,w)=>{if(!c)return;const _=zK(v,w,c,t.navStart,t.navEnd,e,s);_&&(e.disableNavigation&&!t.days.some(k=>k.isEqualTo(_))||(t.goToDay(_),u(_)))}}}function N3e(e,t){const{selected:n,required:r,onSelect:s}=e,[o,i]=nC(n,s?n:void 0),a=s?n:o,{isSameDay:l}=t,c=g=>(a==null?void 0:a.some(y=>l(y,g)))??!1,{min:u,max:f}=e;return{selected:a,select:(g,y,v)=>{let w=[...a??[]];if(c(g)){if((a==null?void 0:a.length)===u||r&&(a==null?void 0:a.length)===1)return;w=a==null?void 0:a.filter(_=>!l(_,g))}else(a==null?void 0:a.length)===f?w=[g]:w=[...w,g];return s||i(w),s==null||s(w,g,y,v),w},isSelected:c}}function I3e(e,t,n=0,r=0,s=!1,o=Ad){const{from:i,to:a}=t||{},{isSameDay:l,isAfter:c,isBefore:u}=o;let f;if(!i&&!a)f={from:e,to:n>0?void 0:e};else if(i&&!a)l(i,e)?n===0?f={from:i,to:e}:s?f={from:i,to:void 0}:f=void 0:u(e,i)?f={from:e,to:i}:f={from:i,to:e};else if(i&&a)if(l(i,e)&&l(a,e))s?f={from:i,to:a}:f=void 0;else if(l(i,e))f={from:i,to:n>0?void 0:e};else if(l(a,e))f={from:e,to:n>0?void 0:e};else if(u(e,i))f={from:e,to:a};else if(c(e,i))f={from:i,to:e};else if(c(e,a))f={from:i,to:e};else throw new Error("Invalid range");if(f!=null&&f.from&&(f!=null&&f.to)){const m=o.differenceInCalendarDays(f.to,f.from);r>0&&m>r?f={from:e,to:void 0}:n>1&&m<n&&(f={from:e,to:void 0})}return f}function R3e(e,t,n=Ad){const r=Array.isArray(t)?t:[t];let s=e.from;const o=n.differenceInCalendarDays(e.to,e.from),i=Math.min(o,6);for(let a=0;a<=i;a++){if(r.includes(s.getDay()))return!0;s=n.addDays(s,1)}return!1}function A$(e,t,n=Ad){return Mf(e,t.from,!1,n)||Mf(e,t.to,!1,n)||Mf(t,e.from,!1,n)||Mf(t,e.to,!1,n)}function M3e(e,t,n=Ad){const r=Array.isArray(t)?t:[t];if(r.filter(a=>typeof a!="function").some(a=>typeof a=="boolean"?a:n.isDate(a)?Mf(e,a,!1,n):IK(a,n)?a.some(l=>Mf(e,l,!1,n)):tC(a)?a.from&&a.to?A$(e,{from:a.from,to:a.to},n):!1:NK(a)?R3e(e,a.dayOfWeek,n):y8(a)?n.isAfter(a.before,a.after)?A$(e,{from:n.addDays(a.after,1),to:n.addDays(a.before,-1)},n):Of(e.from,a,n)||Of(e.to,a,n):v8(a)||x8(a)?Of(e.from,a,n)||Of(e.to,a,n):!1))return!0;const i=r.filter(a=>typeof a=="function");if(i.length){let a=e.from;const l=n.differenceInCalendarDays(e.to,e.from);for(let c=0;c<=l;c++){if(i.some(u=>u(a)))return!0;a=n.addDays(a,1)}}return!1}function O3e(e,t){const{disabled:n,excludeDisabled:r,selected:s,required:o,onSelect:i}=e,[a,l]=nC(s,i?s:void 0),c=i?s:a;return{selected:c,select:(m,g,y)=>{const{min:v,max:w}=e,_=m?I3e(m,c,v,w,o,t):void 0;return r&&n&&(_!=null&&_.from)&&_.to&&M3e({from:_.from,to:_.to},n,t)&&(_.from=m,_.to=void 0),i||l(_),i==null||i(_,m,g,y),_},isSelected:m=>c&&Mf(c,m,!1,t)}}function D3e(e,t){const{selected:n,required:r,onSelect:s}=e,[o,i]=nC(n,s?n:void 0),a=s?n:o,{isSameDay:l}=t;return{selected:a,select:(f,m,g)=>{let y=f;return!r&&a&&a&&l(f,a)&&(y=void 0),s||i(y),s==null||s(y,f,m,g),y},isSelected:f=>a?l(a,f):!1}}function P3e(e,t){const n=D3e(e,t),r=N3e(e,t),s=O3e(e,t);switch(e.mode){case"single":return n;case"multiple":return r;case"range":return s;default:return}}function sa(e,t){return e instanceof Rf&&e.timeZone===t?e:new Rf(e,t)}function N$(e,t){return typeof e=="boolean"||typeof e=="function"?e:e instanceof Date?sa(e,t):Array.isArray(e)?e.map(n=>n instanceof Date?sa(n,t):n):tC(e)?{...e,from:e.from?sa(e.from,t):e.from,to:e.to?sa(e.to,t):e.to}:y8(e)?{before:sa(e.before,t),after:sa(e.after,t)}:v8(e)?{after:sa(e.after,t)}:x8(e)?{before:sa(e.before,t)}:e}function Q5(e,t){return e&&(Array.isArray(e)?e.map(n=>N$(n,t)):N$(e,t))}function L3e(e){var Wa;let t=e;const n=t.timeZone;if(n&&(t={...e,timeZone:n},t.today&&(t.today=sa(t.today,n)),t.month&&(t.month=sa(t.month,n)),t.defaultMonth&&(t.defaultMonth=sa(t.defaultMonth,n)),t.startMonth&&(t.startMonth=sa(t.startMonth,n)),t.endMonth&&(t.endMonth=sa(t.endMonth,n)),t.mode==="single"&&t.selected?t.selected=sa(t.selected,n):t.mode==="multiple"&&t.selected?t.selected=(Wa=t.selected)==null?void 0:Wa.map(An=>sa(An,n)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?sa(t.selected.from,n):t.selected.from,to:t.selected.to?sa(t.selected.to,n):t.selected.to}),t.disabled!==void 0&&(t.disabled=Q5(t.disabled,n)),t.hidden!==void 0&&(t.hidden=Q5(t.hidden,n)),t.modifiers)){const An={};Object.keys(t.modifiers).forEach(er=>{var wt;An[er]=Q5((wt=t.modifiers)==null?void 0:wt[er],n)}),t.modifiers=An}const{components:r,formatters:s,labels:o,dateLib:i,locale:a,classNames:l}=x.useMemo(()=>{const An={...CK,...t.locale},er=new ec({locale:An,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib);return{dateLib:er,components:GCe(t.components),formatters:r3e(t.formatters),labels:l3e(t.labels,er.options),locale:An,classNames:{...YCe(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]);t.today||(t={...t,today:i.today()});const{captionLayout:c,mode:u,navLayout:f,numberOfMonths:m=1,onDayBlur:g,onDayClick:y,onDayFocus:v,onDayKeyDown:w,onDayMouseEnter:_,onDayMouseLeave:S,onNextClick:k,onPrevClick:R,showWeekNumber:O,styles:M}=t,{formatCaption:P,formatDay:j,formatMonthDropdown:q,formatWeekNumber:U,formatWeekNumberHeader:z,formatWeekdayName:H,formatYearDropdown:F}=s,W=T3e(t,i),{days:X,months:J,navStart:ee,navEnd:re,previousMonth:ie,nextMonth:Z,goToMonth:te}=W,oe=VCe(X,t,ee,re,i),{isSelected:Q,select:Te,selected:ge}=P3e(t,i)??{},{blur:Ce,focused:he,isFocusTarget:Fe,moveFocus:De,setFocused:Re}=A3e(t,W,oe,Q??(()=>!1),i),{labelDayButton:tt,labelGridcell:fe,labelGrid:nt,labelMonthDropdown:ot,labelNav:Ht,labelPrevious:qt,labelNext:Pt,labelWeekday:tn,labelWeekNumber:xt,labelWeekNumberHeader:pe,labelYearDropdown:Ne}=o,$e=x.useMemo(()=>d3e(i,t.ISOWeek,t.broadcastCalendar,t.today),[i,t.ISOWeek,t.broadcastCalendar,t.today]),Je=u!==void 0||y!==void 0,Le=x.useCallback(()=>{ie&&(te(ie),R==null||R(ie))},[ie,te,R]),Ve=x.useCallback(()=>{Z&&(te(Z),k==null||k(Z))},[te,Z,k]),_e=x.useCallback((An,er)=>wt=>{wt.preventDefault(),wt.stopPropagation(),Re(An),!er.disabled&&(Te==null||Te(An.date,er,wt),y==null||y(An.date,er,wt))},[Te,y,Re]),Y=x.useCallback((An,er)=>wt=>{Re(An),v==null||v(An.date,er,wt)},[v,Re]),L=x.useCallback((An,er)=>wt=>{Ce(),g==null||g(An.date,er,wt)},[Ce,g]),B=x.useCallback((An,er)=>wt=>{const on={ArrowLeft:[wt.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[wt.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[wt.shiftKey?"year":"week","after"],ArrowUp:[wt.shiftKey?"year":"week","before"],PageUp:[wt.shiftKey?"year":"month","before"],PageDown:[wt.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(on[wt.key]){wt.preventDefault(),wt.stopPropagation();const[ye,Ue]=on[wt.key];De(ye,Ue)}w==null||w(An.date,er,wt)},[De,w,t.dir]),ce=x.useCallback((An,er)=>wt=>{_==null||_(An.date,er,wt)},[_]),we=x.useCallback((An,er)=>wt=>{S==null||S(An.date,er,wt)},[S]),ze=x.useCallback(An=>er=>{const wt=Number(er.target.value),on=i.setMonth(i.startOfMonth(An),wt);te(on)},[i,te]),Be=x.useCallback(An=>er=>{const wt=Number(er.target.value),on=i.setYear(i.startOfMonth(An),wt);te(on)},[i,te]),{className:ut,style:ln}=x.useMemo(()=>({className:[l[Rn.Root],t.className].filter(Boolean).join(" "),style:{...M==null?void 0:M[Rn.Root],...t.style}}),[l,t.className,t.style,M]),jt=WCe(t),fn=x.useRef(null);g3e(fn,!!t.animate,{classNames:l,months:J,focused:he,dateLib:i});const an={dayPickerProps:t,selected:ge,select:Te,isSelected:Q,months:J,nextMonth:Z,previousMonth:ie,goToMonth:te,getModifiers:oe,components:r,classNames:l,styles:M,labels:o,formatters:s};return Me.createElement(AK.Provider,{value:an},Me.createElement(r.Root,{rootRef:t.animate?fn:void 0,className:ut,style:ln,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],...jt},Me.createElement(r.Months,{className:l[Rn.Months],style:M==null?void 0:M[Rn.Months]},!t.hideNavigation&&!f&&Me.createElement(r.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[Rn.Nav],style:M==null?void 0:M[Rn.Nav],"aria-label":Ht(),onPreviousClick:Le,onNextClick:Ve,previousMonth:ie,nextMonth:Z}),J.map((An,er)=>Me.createElement(r.Month,{"data-animated-month":t.animate?"true":void 0,className:l[Rn.Month],style:M==null?void 0:M[Rn.Month],key:er,displayIndex:er,calendarMonth:An},f==="around"&&!t.hideNavigation&&er===0&&Me.createElement(r.PreviousMonthButton,{type:"button",className:l[Rn.PreviousMonthButton],tabIndex:ie?void 0:-1,"aria-disabled":ie?void 0:!0,"aria-label":qt(ie),onClick:Le,"data-animated-button":t.animate?"true":void 0},Me.createElement(r.Chevron,{disabled:ie?void 0:!0,className:l[Rn.Chevron],orientation:t.dir==="rtl"?"right":"left"})),Me.createElement(r.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:l[Rn.MonthCaption],style:M==null?void 0:M[Rn.MonthCaption],calendarMonth:An,displayIndex:er},c!=null&&c.startsWith("dropdown")?Me.createElement(r.DropdownNav,{className:l[Rn.Dropdowns],style:M==null?void 0:M[Rn.Dropdowns]},(()=>{const wt=c==="dropdown"||c==="dropdown-months"?Me.createElement(r.MonthsDropdown,{key:"month",className:l[Rn.MonthsDropdown],"aria-label":ot(),classNames:l,components:r,disabled:!!t.disableNavigation,onChange:ze(An.date),options:c3e(An.date,ee,re,s,i),style:M==null?void 0:M[Rn.Dropdown],value:i.getMonth(An.date)}):Me.createElement("span",{key:"month"},q(An.date,i)),on=c==="dropdown"||c==="dropdown-years"?Me.createElement(r.YearsDropdown,{key:"year",className:l[Rn.YearsDropdown],"aria-label":Ne(i.options),classNames:l,components:r,disabled:!!t.disableNavigation,onChange:Be(An.date),options:f3e(ee,re,s,i,!!t.reverseYears),style:M==null?void 0:M[Rn.Dropdown],value:i.getYear(An.date)}):Me.createElement("span",{key:"year"},F(An.date,i));return i.getMonthYearOrder()==="year-first"?[on,wt]:[wt,on]})(),Me.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},P(An.date,i.options,i))):Me.createElement(r.CaptionLabel,{className:l[Rn.CaptionLabel],role:"status","aria-live":"polite"},P(An.date,i.options,i))),f==="around"&&!t.hideNavigation&&er===m-1&&Me.createElement(r.NextMonthButton,{type:"button",className:l[Rn.NextMonthButton],tabIndex:Z?void 0:-1,"aria-disabled":Z?void 0:!0,"aria-label":Pt(Z),onClick:Ve,"data-animated-button":t.animate?"true":void 0},Me.createElement(r.Chevron,{disabled:Z?void 0:!0,className:l[Rn.Chevron],orientation:t.dir==="rtl"?"left":"right"})),er===m-1&&f==="after"&&!t.hideNavigation&&Me.createElement(r.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[Rn.Nav],style:M==null?void 0:M[Rn.Nav],"aria-label":Ht(),onPreviousClick:Le,onNextClick:Ve,previousMonth:ie,nextMonth:Z}),Me.createElement(r.MonthGrid,{role:"grid","aria-multiselectable":u==="multiple"||u==="range","aria-label":nt(An.date,i.options,i)||void 0,className:l[Rn.MonthGrid],style:M==null?void 0:M[Rn.MonthGrid]},!t.hideWeekdays&&Me.createElement(r.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:l[Rn.Weekdays],style:M==null?void 0:M[Rn.Weekdays]},O&&Me.createElement(r.WeekNumberHeader,{"aria-label":pe(i.options),className:l[Rn.WeekNumberHeader],style:M==null?void 0:M[Rn.WeekNumberHeader],scope:"col"},z()),$e.map(wt=>Me.createElement(r.Weekday,{"aria-label":tn(wt,i.options,i),className:l[Rn.Weekday],key:String(wt),style:M==null?void 0:M[Rn.Weekday],scope:"col"},H(wt,i.options,i)))),Me.createElement(r.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:l[Rn.Weeks],style:M==null?void 0:M[Rn.Weeks]},An.weeks.map(wt=>Me.createElement(r.Week,{className:l[Rn.Week],key:wt.weekNumber,style:M==null?void 0:M[Rn.Week],week:wt},O&&Me.createElement(r.WeekNumber,{week:wt,style:M==null?void 0:M[Rn.WeekNumber],"aria-label":xt(wt.weekNumber,{locale:a}),className:l[Rn.WeekNumber],scope:"row",role:"rowheader"},U(wt.weekNumber,i)),wt.days.map(on=>{const{date:ye}=on,Ue=oe(on);if(Ue[Io.focused]=!Ue.hidden&&!!(he!=null&&he.isEqualTo(on)),Ue[gu.selected]=(Q==null?void 0:Q(ye))||Ue.selected,tC(ge)){const{from:Kn,to:Rt}=ge;Ue[gu.range_start]=!!(Kn&&Rt&&i.isSameDay(ye,Kn)),Ue[gu.range_end]=!!(Kn&&Rt&&i.isSameDay(ye,Rt)),Ue[gu.range_middle]=Mf(ge,ye,!0,i)}const ht=u3e(Ue,M,t.modifiersStyles),Jt=qCe(Ue,l,t.modifiersClassNames),mr=!Je&&!Ue.hidden?fe(ye,Ue,i.options,i):void 0;return Me.createElement(r.Day,{key:`${on.isoDate}_${on.displayMonthId}`,day:on,modifiers:Ue,className:Jt.join(" "),style:ht,role:"gridcell","aria-selected":Ue.selected||void 0,"aria-label":mr,"data-day":on.isoDate,"data-month":on.outside?on.dateMonthId:void 0,"data-selected":Ue.selected||void 0,"data-disabled":Ue.disabled||void 0,"data-hidden":Ue.hidden||void 0,"data-outside":on.outside||void 0,"data-focused":Ue.focused||void 0,"data-today":Ue.today||void 0},!Ue.hidden&&Je?Me.createElement(r.DayButton,{className:l[Rn.DayButton],style:M==null?void 0:M[Rn.DayButton],type:"button",day:on,modifiers:Ue,disabled:!Ue.focused&&Ue.disabled||void 0,"aria-disabled":Ue.focused&&Ue.disabled||void 0,tabIndex:Fe(on)?0:-1,"aria-label":tt(ye,Ue,i.options,i),onClick:_e(on,Ue),onBlur:L(on,Ue),onFocus:Y(on,Ue),onKeyDown:B(on,Ue),onMouseEnter:ce(on,Ue),onMouseLeave:we(on,Ue)},j(ye,i.options,i)):!Ue.hidden&&j(on.date,i.options,i))})))))))),t.footer&&Me.createElement(r.Footer,{className:l[Rn.Footer],style:M==null?void 0:M[Rn.Footer],role:"status","aria-live":"polite"},t.footer)))}function vx({className:e,showOutsideDays:t=!0,showYearSwitcher:n=!0,yearRange:r=12,numberOfMonths:s,...o}){const[i,a]=x.useState("days"),[l,c]=x.useState(x.useMemo(()=>{const Q=new Date().getFullYear();return{from:Q-Math.floor(r/2-1),to:Q+Math.ceil(r/2)}},[r])),{onNextClick:u,onPrevClick:f,startMonth:m,endMonth:g}=o,y=i==="years"?1:s,v=Qe("relative flex",o.monthsClassName),w=Qe("relative mx-10 flex h-7 items-center justify-center",o.monthCaptionClassName),_=Qe("flex flex-row",o.weekdaysClassName),S=Qe("w-8 text-sm font-normal text-muted-foreground",o.weekdayClassName),k=Qe("w-full",o.monthClassName),R=Qe("relative flex items-center justify-center pt-1",o.captionClassName),O=Qe("truncate text-sm font-medium",o.captionLabelClassName),M=wN({variant:"outline",className:"absolute h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"}),P=Qe(M,"right-0",o.buttonNextClassName),j=Qe(M,"left-0",o.buttonPreviousClassName),q=Qe("flex items-start",o.navClassName),U=Qe("mx-auto mt-4",o.monthGridClassName),z=Qe("mt-2 flex w-max items-start",o.weekClassName),H=Qe("flex size-8 flex-1 items-center justify-center p-0 text-sm",o.dayClassName),F=Qe(wN({variant:"ghost"}),"size-8 rounded-md p-0 font-normal transition-none aria-selected:opacity-100",o.dayButtonClassName),W="bg-accent [&>button]:bg-primary [&>button]:text-primary-foreground [&>button]:hover:bg-primary [&>button]:hover:text-primary-foreground",X=Qe(W,"day-range-start rounded-s-md",o.rangeStartClassName),J=Qe(W,"day-range-end rounded-e-md",o.rangeEndClassName),ee=Qe("bg-accent !text-foreground [&>button]:bg-transparent [&>button]:!text-foreground [&>button]:hover:bg-transparent [&>button]:hover:!text-foreground",o.rangeMiddleClassName),re=Qe("[&>button]:bg-primary [&>button]:text-primary-foreground [&>button]:hover:bg-primary [&>button]:hover:text-primary-foreground",o.selectedClassName),ie=Qe("[&>button]:bg-accent [&>button]:text-accent-foreground",o.todayClassName),Z=Qe("day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",o.outsideClassName),te=Qe("text-muted-foreground opacity-50",o.disabledClassName),oe=Qe("invisible flex-1",o.hiddenClassName);return h.jsx(L3e,{showOutsideDays:t,className:Qe("p-3",e),style:{width:248.8*(y??1)+"px"},classNames:{months:v,month_caption:w,weekdays:_,weekday:S,month:k,caption:R,caption_label:O,button_next:P,button_previous:j,nav:q,month_grid:U,week:z,day:H,day_button:F,range_start:X,range_middle:ee,range_end:J,selected:re,today:ie,outside:Z,disabled:te,hidden:oe},components:{Chevron:({orientation:Q})=>{const Te=Q==="left"?w1:Nf;return h.jsx(Te,{className:"h-4 w-4"})},Nav:({className:Q})=>h.jsx($3e,{className:Q,displayYears:l,navView:i,setDisplayYears:c,startMonth:m,endMonth:g,onPrevClick:f}),CaptionLabel:Q=>h.jsx(F3e,{showYearSwitcher:n,navView:i,setNavView:a,displayYears:l,...Q}),MonthGrid:({className:Q,children:Te,...ge})=>h.jsx(B3e,{children:Te,className:Q,displayYears:l,startMonth:m,endMonth:g,navView:i,setNavView:a,...ge})},numberOfMonths:y,...o})}vx.displayName="Calendar";function $3e({className:e,navView:t,startMonth:n,endMonth:r,displayYears:s,setDisplayYears:o,onPrevClick:i,onNextClick:a}){const{nextMonth:l,previousMonth:c,goToMonth:u}=Om(),f=t==="years"?n&&If(new Date(s.from-1,0,1),n)<0||r&&If(new Date(s.from-1,0,1),r)>0:!c,m=t==="years"?n&&If(new Date(s.to+1,0,1),n)<0||r&&If(new Date(s.to+1,0,1),r)>0:!l,g=x.useCallback(()=>{if(c){if(t==="years"){o(v=>({from:v.from-(v.to-v.from+1),to:v.to-(v.to-v.from+1)})),i==null||i(new Date(s.from-(s.to-s.from),0,1));return}u(c),i==null||i(c)}},[c,u]),y=x.useCallback(()=>{if(l){if(t==="years"){o(v=>({from:v.from+(v.to-v.from+1),to:v.to+(v.to-v.from+1)})),a==null||a(new Date(s.from+(s.to-s.from),0,1));return}u(l),a==null||a(l)}},[u,l]);return h.jsxs("nav",{className:Qe("flex items-center",e),children:[h.jsx(_r,{variant:"outline",className:"absolute left-0 h-7 w-7 bg-transparent p-0 opacity-80 hover:opacity-100",type:"button",tabIndex:f?void 0:-1,disabled:f,"aria-label":t==="years"?`Go to the previous ${s.to-s.from+1} years`:S8(),onClick:g,children:h.jsx(w1,{className:"h-4 w-4"})}),h.jsx(_r,{variant:"outline",className:"absolute right-0 h-7 w-7 bg-transparent p-0 opacity-80 hover:opacity-100",type:"button",tabIndex:m?void 0:-1,disabled:m,"aria-label":t==="years"?`Go to the next ${s.to-s.from+1} years`:_8(),onClick:y,children:h.jsx(Nf,{className:"h-4 w-4"})})]})}function F3e({children:e,showYearSwitcher:t,navView:n,setNavView:r,displayYears:s,...o}){return t?h.jsx(_r,{className:"h-7 w-full truncate text-sm font-medium",variant:"ghost",size:"sm",onClick:()=>r(i=>i==="days"?"years":"days"),children:n==="days"?e:s.from+" - "+s.to}):h.jsx("span",{...o,children:e})}function B3e({className:e,children:t,displayYears:n,startMonth:r,endMonth:s,navView:o,setNavView:i,...a}){return o==="years"?h.jsx(z3e,{displayYears:n,startMonth:r,endMonth:s,setNavView:i,navView:o,className:e,...a}):h.jsx("table",{className:e,...a,children:t})}function z3e({className:e,displayYears:t,startMonth:n,endMonth:r,setNavView:s,navView:o,...i}){const{goToMonth:a,selected:l}=Om();return h.jsx("div",{className:Qe("grid grid-cols-4 gap-y-2",e),...i,children:Array.from({length:t.to-t.from+1},(c,u)=>{const f=If(new Date(t.from+u,11,31),n)<0,m=If(new Date(t.from+u,0,0),r)>0,g=f||m;return h.jsx(_r,{className:Qe("text-foreground h-7 w-full text-sm font-normal",t.from+u===new Date().getFullYear()&&"bg-accent text-accent-foreground font-medium"),variant:"ghost",onClick:()=>{s("days"),a(new Date(t.from+u,(l==null?void 0:l.getMonth())??0))},disabled:o==="years"?g:void 0,children:t.from+u},u)})})}function rC(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var sC="Checkbox",[j3e]=Ha(sC),[U3e,T8]=j3e(sC);function H3e(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:o,form:i,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:f}=e,[m,g]=bl({prop:n,defaultProp:s??!1,onChange:l,caller:sC}),[y,v]=x.useState(null),[w,_]=x.useState(null),S=x.useRef(!1),k=y?!!i||!!y.closest("form"):!0,R={checked:m,disabled:o,setChecked:g,control:y,setControl:v,name:a,form:i,value:u,hasConsumerStoppedPropagationRef:S,required:c,defaultChecked:g0(s)?!1:s,isFormControl:k,bubbleInput:w,setBubbleInput:_};return h.jsx(U3e,{scope:t,...R,children:V3e(f)?f(R):r})}var jK="CheckboxTrigger",UK=x.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:o,value:i,disabled:a,checked:l,required:c,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:g,bubbleInput:y}=T8(jK,e),v=Rr(s,u),w=x.useRef(l);return x.useEffect(()=>{const _=o==null?void 0:o.form;if(_){const S=()=>f(w.current);return _.addEventListener("reset",S),()=>_.removeEventListener("reset",S)}},[o,f]),h.jsx(Pn.button,{type:"button",role:"checkbox","aria-checked":g0(l)?"mixed":l,"aria-required":c,"data-state":YK(l),"data-disabled":a?"":void 0,disabled:a,value:i,...r,ref:v,onKeyDown:Wt(t,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:Wt(n,_=>{f(S=>g0(S)?!0:!S),y&&g&&(m.current=_.isPropagationStopped(),m.current||_.stopPropagation())})})});UK.displayName=jK;var HK=x.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:i,disabled:a,value:l,onCheckedChange:c,form:u,...f}=e;return h.jsx(H3e,{__scopeCheckbox:n,checked:s,defaultChecked:o,disabled:a,required:i,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:m})=>h.jsxs(h.Fragment,{children:[h.jsx(UK,{...f,ref:t,__scopeCheckbox:n}),m&&h.jsx(WK,{__scopeCheckbox:n})]})})});HK.displayName=sC;var VK="CheckboxIndicator",qK=x.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,o=T8(VK,n);return h.jsx(yl,{present:r||g0(o.checked)||o.checked===!0,children:h.jsx(Pn.span,{"data-state":YK(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});qK.displayName=VK;var GK="CheckboxBubbleInput",WK=x.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:i,required:a,disabled:l,name:c,value:u,form:f,bubbleInput:m,setBubbleInput:g}=T8(GK,e),y=Rr(n,g),v=rC(o),w=k4(r);x.useEffect(()=>{const S=m;if(!S)return;const k=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(k,"checked").set,M=!s.current;if(v!==o&&O){const P=new Event("click",{bubbles:M});S.indeterminate=g0(o),O.call(S,g0(o)?!1:o),S.dispatchEvent(P)}},[m,v,o,s]);const _=x.useRef(g0(o)?!1:o);return h.jsx(Pn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??_.current,required:a,disabled:l,name:c,value:u,form:f,...t,tabIndex:-1,ref:y,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});WK.displayName=GK;function V3e(e){return typeof e=="function"}function g0(e){return e==="indeterminate"}function YK(e){return g0(e)?"indeterminate":e?"checked":"unchecked"}function xx({className:e,...t}){return h.jsx(HK,{"data-slot":"checkbox",className:Qe("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:h.jsx(qK,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:h.jsx(Cs,{className:"size-3.5"})})})}var q3e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],G3e=q3e.reduce((e,t)=>{const n=lw(`Primitive.${t}`),r=x.forwardRef((s,o)=>{const{asChild:i,...a}=s,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),W3e="Label",KK=x.forwardRef((e,t)=>h.jsx(G3e.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));KK.displayName=W3e;var Y3e=KK;function Hl({className:e,...t}){return h.jsx(Y3e,{"data-slot":"label",className:Qe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function K3e(e){const t=Z3e(e),n=x.forwardRef((r,s)=>{const{children:o,...i}=r,a=x.Children.toArray(o),l=a.find(X3e);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:s,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}function Z3e(e){const t=x.forwardRef((n,r)=>{const{children:s,...o}=n;if(x.isValidElement(s)){const i=e5e(s),a=Q3e(o,s.props);return s.type!==x.Fragment&&(a.ref=r?Cd(r,i):i),x.cloneElement(s,a)}return x.Children.count(s)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var J3e=Symbol("radix.slottable");function X3e(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===J3e}function Q3e(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const l=o(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function e5e(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var oC="Popover",[ZK]=Ha(oC,[z0]),kw=z0(),[t5e,j0]=ZK(oC),JK=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!1}=e,a=kw(t),l=x.useRef(null),[c,u]=x.useState(!1),[f,m]=bl({prop:r,defaultProp:s??!1,onChange:o,caller:oC});return h.jsx(A4,{...a,children:h.jsx(t5e,{scope:t,contentId:Rc(),triggerRef:l,open:f,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:c,onCustomAnchorAdd:x.useCallback(()=>u(!0),[]),onCustomAnchorRemove:x.useCallback(()=>u(!1),[]),modal:i,children:n})})};JK.displayName=oC;var XK="PopoverAnchor",n5e=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=j0(XK,n),o=kw(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=s;return x.useEffect(()=>(i(),()=>a()),[i,a]),h.jsx(dw,{...o,...r,ref:t})});n5e.displayName=XK;var QK="PopoverTrigger",eZ=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=j0(QK,n),o=kw(n),i=Rr(t,s.triggerRef),a=h.jsx(Pn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":oZ(s.open),...r,ref:i,onClick:Wt(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:h.jsx(dw,{asChild:!0,...o,children:a})});eZ.displayName=QK;var C8="PopoverPortal",[r5e,s5e]=ZK(C8,{forceMount:void 0}),tZ=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,o=j0(C8,t);return h.jsx(r5e,{scope:t,forceMount:n,children:h.jsx(yl,{present:n||o.open,children:h.jsx(fw,{asChild:!0,container:s,children:r})})})};tZ.displayName=C8;var K1="PopoverContent",nZ=x.forwardRef((e,t)=>{const n=s5e(K1,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,o=j0(K1,e.__scopePopover);return h.jsx(yl,{present:r||o.open,children:o.modal?h.jsx(i5e,{...s,ref:t}):h.jsx(a5e,{...s,ref:t})})});nZ.displayName=K1;var o5e=K3e("PopoverContent.RemoveScroll"),i5e=x.forwardRef((e,t)=>{const n=j0(K1,e.__scopePopover),r=x.useRef(null),s=Rr(t,r),o=x.useRef(!1);return x.useEffect(()=>{const i=r.current;if(i)return L4(i)},[]),h.jsx(pw,{as:o5e,allowPinchZoom:!0,children:h.jsx(rZ,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wt(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),o.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Wt(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Wt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),a5e=x.forwardRef((e,t)=>{const n=j0(K1,e.__scopePopover),r=x.useRef(!1),s=x.useRef(!1);return h.jsx(rZ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),rZ=x.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...f}=e,m=j0(K1,n),g=kw(n);return D4(),h.jsx(hw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:h.jsx(Eb,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:h.jsx(N4,{"data-state":oZ(m.open),role:"dialog",id:m.contentId,...g,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),sZ="PopoverClose",l5e=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=j0(sZ,n);return h.jsx(Pn.button,{type:"button",...r,ref:t,onClick:Wt(e.onClick,()=>s.onOpenChange(!1))})});l5e.displayName=sZ;var c5e="PopoverArrow",u5e=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=kw(n);return h.jsx(I4,{...s,...r,ref:t})});u5e.displayName=c5e;function oZ(e){return e?"open":"closed"}var d5e=JK,f5e=eZ,h5e=tZ,p5e=nZ;function wx({...e}){return h.jsx(d5e,{"data-slot":"popover",...e})}function Ex({...e}){return h.jsx(f5e,{"data-slot":"popover-trigger",...e})}function _x({className:e,align:t="center",sideOffset:n=4,...r}){return h.jsx(h5e,{children:h.jsx(p5e,{"data-slot":"popover-content",align:t,sideOffset:n,className:Qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-hidden",e),...r})})}var k8="Radio",[m5e,iZ]=Ha(k8),[g5e,b5e]=m5e(k8),aZ=x.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:o,disabled:i,value:a="on",onCheck:l,form:c,...u}=e,[f,m]=x.useState(null),g=Rr(t,w=>m(w)),y=x.useRef(!1),v=f?c||!!f.closest("form"):!0;return h.jsxs(g5e,{scope:n,checked:s,disabled:i,children:[h.jsx(Pn.button,{type:"button",role:"radio","aria-checked":s,"data-state":dZ(s),"data-disabled":i?"":void 0,disabled:i,value:a,...u,ref:g,onClick:Wt(e.onClick,w=>{s||l==null||l(),v&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),v&&h.jsx(uZ,{control:f,bubbles:!y.current,name:r,value:a,checked:s,required:o,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});aZ.displayName=k8;var lZ="RadioIndicator",cZ=x.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,o=b5e(lZ,n);return h.jsx(yl,{present:r||o.checked,children:h.jsx(Pn.span,{"data-state":dZ(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t})})});cZ.displayName=lZ;var y5e="RadioBubbleInput",uZ=x.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},o)=>{const i=x.useRef(null),a=Rr(i,o),l=rC(n),c=k4(t);return x.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&g){const y=new Event("click",{bubbles:r});g.call(u,n),u.dispatchEvent(y)}},[l,n,r]),h.jsx(Pn.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});uZ.displayName=y5e;function dZ(e){return e?"checked":"unchecked"}var v5e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],iC="RadioGroup",[x5e]=Ha(iC,[B0,iZ]),fZ=B0(),hZ=iZ(),[w5e,E5e]=x5e(iC),pZ=x.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:o,required:i=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:f,...m}=e,g=fZ(n),y=wb(c),[v,w]=bl({prop:o,defaultProp:s??null,onChange:f,caller:iC});return h.jsx(w5e,{scope:n,name:r,required:i,disabled:a,value:v,onValueChange:w,children:h.jsx(x4,{asChild:!0,...g,orientation:l,dir:y,loop:u,children:h.jsx(Pn.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":a?"":void 0,dir:y,...m,ref:t})})})});pZ.displayName=iC;var mZ="RadioGroupItem",gZ=x.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,o=E5e(mZ,n),i=o.disabled||r,a=fZ(n),l=hZ(n),c=x.useRef(null),u=Rr(t,c),f=o.value===s.value,m=x.useRef(!1);return x.useEffect(()=>{const g=v=>{v5e.includes(v.key)&&(m.current=!0)},y=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",y)}},[]),h.jsx(w4,{asChild:!0,...a,focusable:!i,active:f,children:h.jsx(aZ,{disabled:i,required:o.required,checked:f,...l,...s,name:o.name,ref:u,onCheck:()=>o.onValueChange(s.value),onKeyDown:Wt(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:Wt(s.onFocus,()=>{var g;m.current&&((g=c.current)==null||g.click())})})})});gZ.displayName=mZ;var _5e="RadioGroupIndicator",bZ=x.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=hZ(n);return h.jsx(cZ,{...s,...r,ref:t})});bZ.displayName=_5e;var S5e=pZ,T5e=gZ,C5e=bZ;function k5e({className:e,...t}){return h.jsx(S5e,{"data-slot":"radio-group",className:Qe("grid gap-3",e),...t})}function A5e({className:e,...t}){return h.jsx(T5e,{"data-slot":"radio-group-item",className:Qe("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:h.jsx(C5e,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:h.jsx(gN,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function I$(e,[t,n]){return Math.min(n,Math.max(t,e))}function N5e(e){const t=I5e(e),n=x.forwardRef((r,s)=>{const{children:o,...i}=r,a=x.Children.toArray(o),l=a.find(M5e);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:s,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}function I5e(e){const t=x.forwardRef((n,r)=>{const{children:s,...o}=n;if(x.isValidElement(s)){const i=D5e(s),a=O5e(o,s.props);return s.type!==x.Fragment&&(a.ref=r?Cd(r,i):i),x.cloneElement(s,a)}return x.Children.count(s)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var R5e=Symbol("radix.slottable");function M5e(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===R5e}function O5e(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const l=o(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function D5e(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var P5e=[" ","Enter","ArrowUp","ArrowDown"],L5e=[" ","Enter"],pm="Select",[aC,lC,$5e]=vR(pm),[Nb]=Ha(pm,[$5e,z0]),cC=z0(),[F5e,U0]=Nb(pm),[B5e,z5e]=Nb(pm),yZ=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:o,value:i,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:m,required:g,form:y}=e,v=cC(t),[w,_]=x.useState(null),[S,k]=x.useState(null),[R,O]=x.useState(!1),M=wb(c),[P,j]=bl({prop:r,defaultProp:s??!1,onChange:o,caller:pm}),[q,U]=bl({prop:i,defaultProp:a,onChange:l,caller:pm}),z=x.useRef(null),H=w?y||!!w.closest("form"):!0,[F,W]=x.useState(new Set),X=Array.from(F).map(J=>J.props.value).join(";");return h.jsx(A4,{...v,children:h.jsxs(F5e,{required:g,scope:t,trigger:w,onTriggerChange:_,valueNode:S,onValueNodeChange:k,valueNodeHasChildren:R,onValueNodeHasChildrenChange:O,contentId:Rc(),value:q,onValueChange:U,open:P,onOpenChange:j,dir:M,triggerPointerDownPosRef:z,disabled:m,children:[h.jsx(aC.Provider,{scope:t,children:h.jsx(B5e,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(J=>{W(ee=>new Set(ee).add(J))},[]),onNativeOptionRemove:x.useCallback(J=>{W(ee=>{const re=new Set(ee);return re.delete(J),re})},[]),children:n})}),H?h.jsxs(zZ,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:f,value:q,onChange:J=>U(J.target.value),disabled:m,form:y,children:[q===void 0?h.jsx("option",{value:""}):null,Array.from(F)]},X):null]})})};yZ.displayName=pm;var vZ="SelectTrigger",xZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,o=cC(n),i=U0(vZ,n),a=i.disabled||r,l=Rr(t,i.onTriggerChange),c=lC(n),u=x.useRef("touch"),[f,m,g]=UZ(v=>{const w=c().filter(k=>!k.disabled),_=w.find(k=>k.value===i.value),S=HZ(w,v,_);S!==void 0&&i.onValueChange(S.value)}),y=v=>{a||(i.onOpenChange(!0),g()),v&&(i.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return h.jsx(dw,{asChild:!0,...o,children:h.jsx(Pn.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":jZ(i.value)?"":void 0,...s,ref:l,onClick:Wt(s.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&y(v)}),onPointerDown:Wt(s.onPointerDown,v=>{u.current=v.pointerType;const w=v.target;w.hasPointerCapture(v.pointerId)&&w.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:Wt(s.onKeyDown,v=>{const w=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(w&&v.key===" ")&&P5e.includes(v.key)&&(y(),v.preventDefault())})})})});xZ.displayName=vZ;var wZ="SelectValue",EZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:i="",...a}=e,l=U0(wZ,n),{onValueNodeHasChildrenChange:c}=l,u=o!==void 0,f=Rr(t,l.onValueNodeChange);return Mi(()=>{c(u)},[c,u]),h.jsx(Pn.span,{...a,ref:f,style:{pointerEvents:"none"},children:jZ(l.value)?h.jsx(h.Fragment,{children:i}):o})});EZ.displayName=wZ;var j5e="SelectIcon",_Z=x.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return h.jsx(Pn.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});_Z.displayName=j5e;var U5e="SelectPortal",SZ=e=>h.jsx(fw,{asChild:!0,...e});SZ.displayName=U5e;var mm="SelectContent",TZ=x.forwardRef((e,t)=>{const n=U0(mm,e.__scopeSelect),[r,s]=x.useState();if(Mi(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?pl.createPortal(h.jsx(CZ,{scope:e.__scopeSelect,children:h.jsx(aC.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),o):null}return h.jsx(kZ,{...e,ref:t})});TZ.displayName=mm;var iu=10,[CZ,H0]=Nb(mm),H5e="SelectContentImpl",V5e=N5e("SelectContent.RemoveScroll"),kZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:w,..._}=e,S=U0(mm,n),[k,R]=x.useState(null),[O,M]=x.useState(null),P=Rr(t,he=>R(he)),[j,q]=x.useState(null),[U,z]=x.useState(null),H=lC(n),[F,W]=x.useState(!1),X=x.useRef(!1);x.useEffect(()=>{if(k)return L4(k)},[k]),D4();const J=x.useCallback(he=>{const[Fe,...De]=H().map(fe=>fe.ref.current),[Re]=De.slice(-1),tt=document.activeElement;for(const fe of he)if(fe===tt||(fe==null||fe.scrollIntoView({block:"nearest"}),fe===Fe&&O&&(O.scrollTop=0),fe===Re&&O&&(O.scrollTop=O.scrollHeight),fe==null||fe.focus(),document.activeElement!==tt))return},[H,O]),ee=x.useCallback(()=>J([j,k]),[J,j,k]);x.useEffect(()=>{F&&ee()},[F,ee]);const{onOpenChange:re,triggerPointerDownPosRef:ie}=S;x.useEffect(()=>{if(k){let he={x:0,y:0};const Fe=Re=>{var tt,fe;he={x:Math.abs(Math.round(Re.pageX)-(((tt=ie.current)==null?void 0:tt.x)??0)),y:Math.abs(Math.round(Re.pageY)-(((fe=ie.current)==null?void 0:fe.y)??0))}},De=Re=>{he.x<=10&&he.y<=10?Re.preventDefault():k.contains(Re.target)||re(!1),document.removeEventListener("pointermove",Fe),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",Fe),document.addEventListener("pointerup",De,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Fe),document.removeEventListener("pointerup",De,{capture:!0})}}},[k,re,ie]),x.useEffect(()=>{const he=()=>re(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[re]);const[Z,te]=UZ(he=>{const Fe=H().filter(tt=>!tt.disabled),De=Fe.find(tt=>tt.ref.current===document.activeElement),Re=HZ(Fe,he,De);Re&&setTimeout(()=>Re.ref.current.focus())}),oe=x.useCallback((he,Fe,De)=>{const Re=!X.current&&!De;(S.value!==void 0&&S.value===Fe||Re)&&(q(he),Re&&(X.current=!0))},[S.value]),Q=x.useCallback(()=>k==null?void 0:k.focus(),[k]),Te=x.useCallback((he,Fe,De)=>{const Re=!X.current&&!De;(S.value!==void 0&&S.value===Fe||Re)&&z(he)},[S.value]),ge=r==="popper"?jN:AZ,Ce=ge===jN?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:w}:{};return h.jsx(CZ,{scope:n,content:k,viewport:O,onViewportChange:M,itemRefCallback:oe,selectedItem:j,onItemLeave:Q,itemTextRefCallback:Te,focusSelectedItem:ee,selectedItemText:U,position:r,isPositioned:F,searchRef:Z,children:h.jsx(pw,{as:V5e,allowPinchZoom:!0,children:h.jsx(hw,{asChild:!0,trapped:S.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:Wt(s,he=>{var Fe;(Fe=S.trigger)==null||Fe.focus({preventScroll:!0}),he.preventDefault()}),children:h.jsx(Eb,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:h.jsx(ge,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:he=>he.preventDefault(),..._,...Ce,onPlaced:()=>W(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Wt(_.onKeyDown,he=>{const Fe=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!Fe&&he.key.length===1&&te(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let Re=H().filter(tt=>!tt.disabled).map(tt=>tt.ref.current);if(["ArrowUp","End"].includes(he.key)&&(Re=Re.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const tt=he.target,fe=Re.indexOf(tt);Re=Re.slice(fe+1)}setTimeout(()=>J(Re)),he.preventDefault()}})})})})})})});kZ.displayName=H5e;var q5e="SelectItemAlignedPosition",AZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,o=U0(mm,n),i=H0(mm,n),[a,l]=x.useState(null),[c,u]=x.useState(null),f=Rr(t,P=>u(P)),m=lC(n),g=x.useRef(!1),y=x.useRef(!0),{viewport:v,selectedItem:w,selectedItemText:_,focusSelectedItem:S}=i,k=x.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&c&&v&&w&&_){const P=o.trigger.getBoundingClientRect(),j=c.getBoundingClientRect(),q=o.valueNode.getBoundingClientRect(),U=_.getBoundingClientRect();if(o.dir!=="rtl"){const tt=U.left-j.left,fe=q.left-tt,nt=P.left-fe,ot=P.width+nt,Ht=Math.max(ot,j.width),qt=window.innerWidth-iu,Pt=I$(fe,[iu,Math.max(iu,qt-Ht)]);a.style.minWidth=ot+"px",a.style.left=Pt+"px"}else{const tt=j.right-U.right,fe=window.innerWidth-q.right-tt,nt=window.innerWidth-P.right-fe,ot=P.width+nt,Ht=Math.max(ot,j.width),qt=window.innerWidth-iu,Pt=I$(fe,[iu,Math.max(iu,qt-Ht)]);a.style.minWidth=ot+"px",a.style.right=Pt+"px"}const z=m(),H=window.innerHeight-iu*2,F=v.scrollHeight,W=window.getComputedStyle(c),X=parseInt(W.borderTopWidth,10),J=parseInt(W.paddingTop,10),ee=parseInt(W.borderBottomWidth,10),re=parseInt(W.paddingBottom,10),ie=X+J+F+re+ee,Z=Math.min(w.offsetHeight*5,ie),te=window.getComputedStyle(v),oe=parseInt(te.paddingTop,10),Q=parseInt(te.paddingBottom,10),Te=P.top+P.height/2-iu,ge=H-Te,Ce=w.offsetHeight/2,he=w.offsetTop+Ce,Fe=X+J+he,De=ie-Fe;if(Fe<=Te){const tt=z.length>0&&w===z[z.length-1].ref.current;a.style.bottom="0px";const fe=c.clientHeight-v.offsetTop-v.offsetHeight,nt=Math.max(ge,Ce+(tt?Q:0)+fe+ee),ot=Fe+nt;a.style.height=ot+"px"}else{const tt=z.length>0&&w===z[0].ref.current;a.style.top="0px";const nt=Math.max(Te,X+v.offsetTop+(tt?oe:0)+Ce)+De;a.style.height=nt+"px",v.scrollTop=Fe-Te+v.offsetTop}a.style.margin=`${iu}px 0`,a.style.minHeight=Z+"px",a.style.maxHeight=H+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,o.trigger,o.valueNode,a,c,v,w,_,o.dir,r]);Mi(()=>k(),[k]);const[R,O]=x.useState();Mi(()=>{c&&O(window.getComputedStyle(c).zIndex)},[c]);const M=x.useCallback(P=>{P&&y.current===!0&&(k(),S==null||S(),y.current=!1)},[k,S]);return h.jsx(W5e,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:M,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:h.jsx(Pn.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});AZ.displayName=q5e;var G5e="SelectPopperPosition",jN=x.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=iu,...o}=e,i=cC(n);return h.jsx(N4,{...i,...o,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});jN.displayName=G5e;var[W5e,A8]=Nb(mm,{}),UN="SelectViewport",NZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,o=H0(UN,n),i=A8(UN,n),a=Rr(t,o.onViewportChange),l=x.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(aC.Slot,{scope:n,children:h.jsx(Pn.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Wt(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&f){const g=Math.abs(l.current-u.scrollTop);if(g>0){const y=window.innerHeight-iu*2,v=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),_=Math.max(v,w);if(_<y){const S=_+g,k=Math.min(y,S),R=S-k;f.style.height=k+"px",f.style.bottom==="0px"&&(u.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});NZ.displayName=UN;var IZ="SelectGroup",[Y5e,K5e]=Nb(IZ),Z5e=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Rc();return h.jsx(Y5e,{scope:n,id:s,children:h.jsx(Pn.div,{role:"group","aria-labelledby":s,...r,ref:t})})});Z5e.displayName=IZ;var RZ="SelectLabel",J5e=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=K5e(RZ,n);return h.jsx(Pn.div,{id:s.id,...r,ref:t})});J5e.displayName=RZ;var SS="SelectItem",[X5e,MZ]=Nb(SS),OZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...i}=e,a=U0(SS,n),l=H0(SS,n),c=a.value===r,[u,f]=x.useState(o??""),[m,g]=x.useState(!1),y=Rr(t,S=>{var k;return(k=l.itemRefCallback)==null?void 0:k.call(l,S,r,s)}),v=Rc(),w=x.useRef("touch"),_=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(X5e,{scope:n,value:r,disabled:s,textId:v,isSelected:c,onItemTextChange:x.useCallback(S=>{f(k=>k||((S==null?void 0:S.textContent)??"").trim())},[]),children:h.jsx(aC.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:h.jsx(Pn.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:y,onFocus:Wt(i.onFocus,()=>g(!0)),onBlur:Wt(i.onBlur,()=>g(!1)),onClick:Wt(i.onClick,()=>{w.current!=="mouse"&&_()}),onPointerUp:Wt(i.onPointerUp,()=>{w.current==="mouse"&&_()}),onPointerDown:Wt(i.onPointerDown,S=>{w.current=S.pointerType}),onPointerMove:Wt(i.onPointerMove,S=>{var k;w.current=S.pointerType,s?(k=l.onItemLeave)==null||k.call(l):w.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Wt(i.onPointerLeave,S=>{var k;S.currentTarget===document.activeElement&&((k=l.onItemLeave)==null||k.call(l))}),onKeyDown:Wt(i.onKeyDown,S=>{var R;((R=l.searchRef)==null?void 0:R.current)!==""&&S.key===" "||(L5e.includes(S.key)&&_(),S.key===" "&&S.preventDefault())})})})})});OZ.displayName=SS;var hv="SelectItemText",DZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...o}=e,i=U0(hv,n),a=H0(hv,n),l=MZ(hv,n),c=z5e(hv,n),[u,f]=x.useState(null),m=Rr(t,_=>f(_),l.onItemTextChange,_=>{var S;return(S=a.itemTextRefCallback)==null?void 0:S.call(a,_,l.value,l.disabled)}),g=u==null?void 0:u.textContent,y=x.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:w}=c;return Mi(()=>(v(y),()=>w(y)),[v,w,y]),h.jsxs(h.Fragment,{children:[h.jsx(Pn.span,{id:l.textId,...o,ref:m}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?pl.createPortal(o.children,i.valueNode):null]})});DZ.displayName=hv;var PZ="SelectItemIndicator",LZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return MZ(PZ,n).isSelected?h.jsx(Pn.span,{"aria-hidden":!0,...r,ref:t}):null});LZ.displayName=PZ;var HN="SelectScrollUpButton",$Z=x.forwardRef((e,t)=>{const n=H0(HN,e.__scopeSelect),r=A8(HN,e.__scopeSelect),[s,o]=x.useState(!1),i=Rr(t,r.onScrollButtonChange);return Mi(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;o(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?h.jsx(BZ,{...e,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});$Z.displayName=HN;var VN="SelectScrollDownButton",FZ=x.forwardRef((e,t)=>{const n=H0(VN,e.__scopeSelect),r=A8(VN,e.__scopeSelect),[s,o]=x.useState(!1),i=Rr(t,r.onScrollButtonChange);return Mi(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;o(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?h.jsx(BZ,{...e,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});FZ.displayName=VN;var BZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,o=H0("SelectScrollButton",n),i=x.useRef(null),a=lC(n),l=x.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),Mi(()=>{var u;const c=a().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Pn.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Wt(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:Wt(s.onPointerMove,()=>{var c;(c=o.onItemLeave)==null||c.call(o),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:Wt(s.onPointerLeave,()=>{l()})})}),Q5e="SelectSeparator",eke=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return h.jsx(Pn.div,{"aria-hidden":!0,...r,ref:t})});eke.displayName=Q5e;var qN="SelectArrow",tke=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=cC(n),o=U0(qN,n),i=H0(qN,n);return o.open&&i.position==="popper"?h.jsx(I4,{...s,...r,ref:t}):null});tke.displayName=qN;var nke="SelectBubbleInput",zZ=x.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=x.useRef(null),o=Rr(r,s),i=rC(t);return x.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==t&&u){const f=new Event("change",{bubbles:!0});u.call(a,t),a.dispatchEvent(f)}},[i,t]),h.jsx(Pn.select,{...n,style:{...qG,...n.style},ref:o,defaultValue:t})});zZ.displayName=nke;function jZ(e){return e===""||e===void 0}function UZ(e){const t=xu(e),n=x.useRef(""),r=x.useRef(0),s=x.useCallback(i=>{const a=n.current+i;t(a),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(a)},[t]),o=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function HZ(e,t,n){const s=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=rke(e,Math.max(o,0));s.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function rke(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var ske=yZ,oke=xZ,ike=EZ,ake=_Z,lke=SZ,cke=TZ,uke=NZ,dke=OZ,fke=DZ,hke=LZ,pke=$Z,mke=FZ;function TS({...e}){return h.jsx(ske,{"data-slot":"select",...e})}function CS({...e}){return h.jsx(ike,{"data-slot":"select-value",...e})}function kS({className:e,size:t="default",children:n,...r}){return h.jsxs(oke,{"data-slot":"select-trigger","data-size":t,className:Qe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,h.jsx(ake,{asChild:!0,children:h.jsx($f,{className:"size-4 opacity-50"})})]})}function AS({className:e,children:t,position:n="popper",...r}){return h.jsx(lke,{children:h.jsxs(cke,{"data-slot":"select-content",className:Qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[h.jsx(gke,{}),h.jsx(uke,{className:Qe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),h.jsx(bke,{})]})})}function NS({className:e,children:t,...n}){return h.jsxs(dke,{"data-slot":"select-item",className:Qe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[h.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:h.jsx(hke,{children:h.jsx(Cs,{className:"size-4"})})}),h.jsx(fke,{children:t})]})}function gke({className:e,...t}){return h.jsx(pke,{"data-slot":"select-scroll-up-button",className:Qe("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(yq,{className:"size-4"})})}function bke({className:e,...t}){return h.jsx(mke,{"data-slot":"select-scroll-down-button",className:Qe("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx($f,{className:"size-4"})})}function N8({className:e,...t}){return h.jsx("textarea",{"data-slot":"textarea",className:Qe("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function yke({event:e,isOpen:t,onClose:n,onSave:r,onDelete:s}){var ie;const[o,i]=x.useState(""),[a,l]=x.useState(""),[c,u]=x.useState(new Date),[f,m]=x.useState(new Date),[g,y]=x.useState(`${FN}:00`),[v,w]=x.useState(`${d$}:00`),[_,S]=x.useState(!1),[k,R]=x.useState(""),[O,M]=x.useState("sky"),[P,j]=x.useState(null),[q,U]=x.useState(!1),[z,H]=x.useState(!1);x.useEffect(()=>{console.log("EventDialog received event:",e)},[e]),x.useEffect(()=>{if(e){i(e.title||""),l(e.description||"");const Z=new Date(e.start),te=new Date(e.end);u(Z),m(te),y(W(Z)),w(W(te)),S(e.allDay||!1),R(e.location||""),M(e.color||"sky"),j(null)}else F()},[e]);const F=()=>{i(""),l(""),u(new Date),m(new Date),y(`${FN}:00`),w(`${d$}:00`),S(!1),R(""),M("sky"),j(null)},W=Z=>{const te=Z.getHours().toString().padStart(2,"0"),oe=Math.floor(Z.getMinutes()/15)*15;return`${te}:${oe.toString().padStart(2,"0")}`},X=x.useMemo(()=>{const Z=[];for(let te=md;te<=Vp;te++)for(let oe=0;oe<60;oe+=15){const Q=te.toString().padStart(2,"0"),Te=oe.toString().padStart(2,"0"),ge=`${Q}:${Te}`,Ce=new Date(2e3,0,1,te,oe),he=ar(Ce,"h:mm a");Z.push({value:ge,label:he})}return Z},[]),J=()=>{const Z=new Date(c),te=new Date(f);if(_)Z.setHours(0,0,0,0),te.setHours(23,59,59,999);else{const[Q=0,Te=0]=g.split(":").map(Number),[ge=0,Ce=0]=v.split(":").map(Number);if(Q<md||Q>Vp||ge<md||ge>Vp){j(`Selected time must be between ${md}:00 and ${Vp}:00`);return}Z.setHours(Q,Te,0),te.setHours(ge,Ce,0)}if(ES(te,Z)){j("End date cannot be before start date");return}const oe=o.trim()?o:"(no title)";r({id:(e==null?void 0:e.id)||"",title:oe,description:a,start:Z,end:te,allDay:_,location:k,color:O})},ee=()=>{e!=null&&e.id&&s(e.id)},re=[{value:"sky",label:"Sky",bgClass:"bg-sky-400 data-[state=checked]:bg-sky-400",borderClass:"border-sky-400 data-[state=checked]:border-sky-400"},{value:"amber",label:"Amber",bgClass:"bg-amber-400 data-[state=checked]:bg-amber-400",borderClass:"border-amber-400 data-[state=checked]:border-amber-400"},{value:"violet",label:"Violet",bgClass:"bg-violet-400 data-[state=checked]:bg-violet-400",borderClass:"border-violet-400 data-[state=checked]:border-violet-400"},{value:"rose",label:"Rose",bgClass:"bg-rose-400 data-[state=checked]:bg-rose-400",borderClass:"border-rose-400 data-[state=checked]:border-rose-400"},{value:"emerald",label:"Emerald",bgClass:"bg-emerald-400 data-[state=checked]:bg-emerald-400",borderClass:"border-emerald-400 data-[state=checked]:border-emerald-400"},{value:"orange",label:"Orange",bgClass:"bg-orange-400 data-[state=checked]:bg-orange-400",borderClass:"border-orange-400 data-[state=checked]:border-orange-400"}];return h.jsx(DW,{open:t,onOpenChange:Z=>!Z&&n(),children:h.jsxs(PW,{className:"sm:max-w-[425px]",children:[h.jsxs(LW,{children:[h.jsx($W,{children:e!=null&&e.id?"Edit Event":"Create Event"}),h.jsx(HEe,{className:"sr-only",children:e!=null&&e.id?"Edit the details of this event":"Add a new event to your calendar"})]}),P&&h.jsx("div",{className:"bg-destructive/15 text-destructive rounded-md px-3 py-2 text-sm",children:P}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"*:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"title",children:"Title"}),h.jsx(Ed,{id:"title",value:o,onChange:Z=>i(Z.target.value)})]}),h.jsxs("div",{className:"*:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"description",children:"Description"}),h.jsx(N8,{id:"description",value:a,onChange:Z=>l(Z.target.value),rows:3})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{className:"flex-1 *:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"start-date",children:"Start Date"}),h.jsxs(wx,{open:q,onOpenChange:U,children:[h.jsx(Ex,{asChild:!0,children:h.jsxs(_r,{id:"start-date",variant:"outline",className:Qe("group bg-background hover:bg-background border-input w-full justify-between px-3 font-normal outline-offset-0 outline-none focus-visible:outline-[3px]",!c&&"text-muted-foreground"),children:[h.jsx("span",{className:Qe("truncate",!c&&"text-muted-foreground"),children:c?ar(c,"PPP"):"Pick a date"}),h.jsx(E$,{size:16,className:"text-muted-foreground/80 shrink-0","aria-hidden":"true"})]})}),h.jsx(_x,{className:"w-auto p-2",align:"start",children:h.jsx(vx,{mode:"single",selected:c,defaultMonth:c,onSelect:Z=>{Z&&(u(Z),ES(f,Z)&&m(Z),j(null),U(!1))}})})]})]}),!_&&h.jsxs("div",{className:"min-w-28 *:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"start-time",children:"Start Time"}),h.jsxs(TS,{value:g,onValueChange:y,children:[h.jsx(kS,{id:"start-time",children:h.jsx(CS,{placeholder:"Select time"})}),h.jsx(AS,{children:X.map(Z=>h.jsx(NS,{value:Z.value,children:Z.label},Z.value))})]})]})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{className:"flex-1 *:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"end-date",children:"End Date"}),h.jsxs(wx,{open:z,onOpenChange:H,children:[h.jsx(Ex,{asChild:!0,children:h.jsxs(_r,{id:"end-date",variant:"outline",className:Qe("group bg-background hover:bg-background border-input w-full justify-between px-3 font-normal outline-offset-0 outline-none focus-visible:outline-[3px]",!f&&"text-muted-foreground"),children:[h.jsx("span",{className:Qe("truncate",!f&&"text-muted-foreground"),children:f?ar(f,"PPP"):"Pick a date"}),h.jsx(E$,{size:16,className:"text-muted-foreground/80 shrink-0","aria-hidden":"true"})]})}),h.jsx(_x,{className:"w-auto p-2",align:"start",children:h.jsx(vx,{mode:"single",selected:f,defaultMonth:f,disabled:{before:c},onSelect:Z=>{Z&&(m(Z),j(null),H(!1))}})})]})]}),!_&&h.jsxs("div",{className:"min-w-28 *:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"end-time",children:"End Time"}),h.jsxs(TS,{value:v,onValueChange:w,children:[h.jsx(kS,{id:"end-time",children:h.jsx(CS,{placeholder:"Select time"})}),h.jsx(AS,{children:X.map(Z=>h.jsx(NS,{value:Z.value,children:Z.label},Z.value))})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xx,{id:"all-day",checked:_,onCheckedChange:Z=>S(Z===!0)}),h.jsx(Hl,{htmlFor:"all-day",children:"All day"})]}),h.jsxs("div",{className:"*:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"location",children:"Location"}),h.jsx(Ed,{id:"location",value:k,onChange:Z=>R(Z.target.value)})]}),h.jsxs("fieldset",{className:"space-y-4",children:[h.jsx("legend",{className:"text-foreground text-sm leading-none font-medium",children:"Etiquette"}),h.jsx(k5e,{className:"flex gap-1.5",defaultValue:(ie=re[0])==null?void 0:ie.value,value:O,onValueChange:Z=>M(Z),children:re.map(Z=>h.jsx(A5e,{id:`color-${Z.value}`,value:Z.value,"aria-label":Z.label,className:Qe("size-6 shadow-none",Z.bgClass,Z.borderClass)},Z.value))})]})]}),h.jsxs(UEe,{className:"flex-row sm:justify-between",children:[(e==null?void 0:e.id)&&h.jsx(_r,{variant:"outline",size:"icon",onClick:ee,"aria-label":"Delete event",children:h.jsx(eCe,{size:16,"aria-hidden":"true"})}),h.jsxs("div",{className:"flex flex-1 justify-end gap-2",children:[h.jsx(_r,{variant:"outline",onClick:n,children:"Cancel"}),h.jsx(_r,{onClick:J,children:"Save"})]})]})]})})}function vke({currentDate:e,events:t,onEventSelect:n,onEventCreate:r}){const s=x.useMemo(()=>{const m=hK(e),g=uK(m),y=Pc(m,{weekStartsOn:0}),v=Ab(g,{weekStartsOn:0});return dK({start:y,end:v})},[e]),o=x.useMemo(()=>Array.from({length:7}).map((m,g)=>{const y=Tf(Pc(new Date),g);return ar(y,"EEE")}),[]),i=x.useMemo(()=>{const m=[];let g=[];for(let y=0;y<s.length;y++)g.push(s[y]),(g.length===7||y===s.length-1)&&(m.push(g),g=[]);return m},[s]),a=(m,g)=>{g.stopPropagation(),n(m)},[l,c]=x.useState(!1),{contentRef:u,getVisibleEventCount:f}=Z4e({eventHeight:$N,eventGap:sK});return x.useEffect(()=>{c(!0)},[]),h.jsxs("div",{"data-slot":"month-view",className:"contents",children:[h.jsx("div",{className:"border-border/70 grid grid-cols-7 border-b",children:o.map(m=>h.jsx("div",{className:"text-muted-foreground/70 py-2 text-center text-sm",children:m},m))}),h.jsx("div",{className:"grid flex-1 auto-rows-fr",children:i.map((m,g)=>h.jsx("div",{className:"grid grid-cols-7 [&:last-child>*]:border-b-0",children:m.map((y,v)=>{if(!y)return null;const w=q4e(t,y),_=G4e(t,y),S=_S(y,e),k=`month-cell-${y.toISOString()}`,R=[..._,...w],O=W4e(t,y),M=g===0&&v===0,P=l?f(R.length):void 0,j=P!==void 0&&R.length>P,q=j?R.length-P:0;return h.jsx("div",{className:"group border-border/70 data-outside-cell:bg-muted/25 data-outside-cell:text-muted-foreground/70 border-r border-b last:border-r-0","data-today":h1(y)||void 0,"data-outside-cell":!S||void 0,children:h.jsxs(b8,{id:k,date:y,onClick:()=>{const U=new Date(y);U.setHours(FN,0,0),r(U)},children:[h.jsx("div",{className:"group-data-today:bg-primary group-data-today:text-primary-foreground mt-1 inline-flex size-6 items-center justify-center rounded-full text-sm",children:ar(y,"d")}),h.jsxs("div",{ref:M?u:null,className:"min-h-[calc((var(--event-height)+var(--event-gap))*2)] sm:min-h-[calc((var(--event-height)+var(--event-gap))*3)] lg:min-h-[calc((var(--event-height)+var(--event-gap))*4)]",children:[v$(R).map((U,z)=>{const H=new Date(U.start),F=new Date(U.end),W=bs(y,H),X=bs(y,F),J=l&&P&&z>=P;return P?W?h.jsx("div",{className:"aria-hidden:hidden","aria-hidden":J?"true":void 0,children:h.jsx(g8,{event:U,view:"month",onClick:ee=>a(U,ee),isFirstDay:W,isLastDay:X})},U.id):h.jsx("div",{className:"aria-hidden:hidden","aria-hidden":J?"true":void 0,children:h.jsx(hm,{onClick:ee=>a(U,ee),event:U,view:"month",isFirstDay:W,isLastDay:X,children:h.jsxs("div",{className:"invisible","aria-hidden":!0,children:[!U.allDay&&h.jsxs("span",{children:[ar(new Date(U.start),"h:mm")," "]}),U.title]})})},`spanning-${U.id}-${y.toISOString().slice(0,10)}`):null}),j&&h.jsxs(wx,{modal:!0,children:[h.jsx(Ex,{asChild:!0,children:h.jsx("button",{className:"focus-visible:border-ring focus-visible:ring-ring/50 text-muted-foreground hover:text-foreground hover:bg-muted/50 mt-[var(--event-gap)] flex h-[var(--event-height)] w-full items-center overflow-hidden px-1 text-left text-[10px] backdrop-blur-md transition outline-none select-none focus-visible:ring-[3px] sm:px-2 sm:text-xs",onClick:U=>U.stopPropagation(),children:h.jsxs("span",{children:["+ ",q," ",h.jsx("span",{className:"max-sm:sr-only",children:"more"})]})})}),h.jsx(_x,{align:"center",className:"max-w-52 p-3",style:{"--event-height":`${$N}px`},children:h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-sm font-medium",children:ar(y,"EEE d")}),h.jsx("div",{className:"space-y-1",children:v$(O).map(U=>{const z=new Date(U.start),H=new Date(U.end),F=bs(y,z),W=bs(y,H);return h.jsx(hm,{onClick:X=>a(U,X),event:U,view:"month",isFirstDay:F,isLastDay:W},U.id)})})]})})]})]})]})},y.toString())})},`week-${g}`))})]})}function xke({currentDate:e,events:t,onEventSelect:n,onEventCreate:r}){const s=x.useMemo(()=>{const g=Pc(e,{weekStartsOn:0}),y=Ab(e,{weekStartsOn:0});return dK({start:g,end:y})},[e]),o=x.useMemo(()=>Pc(e,{weekStartsOn:0}),[e]),i=x.useMemo(()=>{const g=Wf(e);return fK({start:A1(g,md),end:A1(g,Vp-1)})},[e]),a=x.useMemo(()=>t.filter(g=>g.allDay||fm(g)).filter(g=>{const y=new Date(g.start),v=new Date(g.end);return s.some(w=>bs(w,y)||bs(w,v)||w>y&&w<v)}),[t,s]),l=x.useMemo(()=>s.map(y=>{const w=[...t.filter(R=>{if(R.allDay||fm(R))return!1;const O=new Date(R.start),M=new Date(R.end);return bs(y,O)||bs(y,M)||O<y&&M>y})].sort((R,O)=>{const M=new Date(R.start),P=new Date(O.start),j=new Date(R.end),q=new Date(O.end);if(M<P)return-1;if(M>P)return 1;const U=Y1(j,M);return Y1(q,P)-U}),_=[],S=Wf(y),k=[];return w.forEach(R=>{const O=new Date(R.start),M=new Date(R.end),P=bs(y,O)?O:S,j=bs(y,M)?M:A1(S,24),q=N1(P)+yx(P)/60,U=N1(j)+yx(j)/60,z=(q-md)*gx,H=(U-q)*gx;let F=0,W=!1;for(;!W;){const re=k[F]||[];re.length===0?(k[F]=re,W=!0):re.some(Z=>lK({start:P,end:j},{start:new Date(Z.event.start),end:new Date(Z.event.end)}))?F++:W=!0}const X=k[F]||[];k[F]=X,X.push({event:R,end:j});const J=F===0?1:.9,ee=F===0?0:F*.1;_.push({event:R,top:z,height:H,left:ee,width:J,zIndex:10+F})}),_}),[s,t]),c=(g,y)=>{y.stopPropagation(),n(g)},u=a.length>0,{currentTimePosition:f,currentTimeVisible:m}=_K(e,"week");return h.jsxs("div",{"data-slot":"week-view",className:"flex h-full flex-col",children:[h.jsxs("div",{className:"bg-background/80 border-border/70 sticky top-0 z-30 grid grid-cols-8 border-b backdrop-blur-md",children:[h.jsx("div",{className:"text-muted-foreground/70 py-2 text-center text-sm",children:h.jsx("span",{className:"max-[479px]:sr-only",children:ar(new Date,"O")})}),s.map(g=>h.jsxs("div",{className:"data-today:text-foreground text-muted-foreground/70 py-2 text-center text-sm data-today:font-medium","data-today":h1(g)||void 0,children:[h.jsxs("span",{className:"sm:hidden","aria-hidden":"true",children:[ar(g,"E")[0]," ",ar(g,"d")]}),h.jsx("span",{className:"max-sm:hidden",children:ar(g,"EEE dd")})]},g.toString()))]}),u&&h.jsx("div",{className:"border-border/70 bg-muted/50 border-b",children:h.jsxs("div",{className:"grid grid-cols-8",children:[h.jsx("div",{className:"border-border/70 relative border-r",children:h.jsx("span",{className:"text-muted-foreground/70 absolute bottom-0 left-0 h-6 w-16 max-w-full pe-2 text-right text-[10px] sm:pe-4 sm:text-xs",children:"All day"})}),s.map((g,y)=>{const v=a.filter(w=>{const _=new Date(w.start),S=new Date(w.end);return bs(g,_)||g>_&&g<S||bs(g,S)});return h.jsx("div",{className:"border-border/70 relative border-r p-1 last:border-r-0","data-today":h1(g)||void 0,children:v.map(w=>{const _=new Date(w.start),S=new Date(w.end),k=bs(g,_),R=bs(g,S),O=y===0&&ES(_,o),M=k||O;return h.jsx(hm,{onClick:P=>c(w,P),event:w,view:"month",isFirstDay:k,isLastDay:R,children:h.jsx("div",{className:Qe("truncate",!M&&"invisible"),"aria-hidden":!M,children:w.title})},`spanning-${w.id}`)})},g.toString())})]})}),h.jsxs("div",{className:"grid flex-1 grid-cols-8 overflow-hidden",children:[h.jsx("div",{className:"border-border/70 grid auto-cols-fr border-r",children:i.map((g,y)=>h.jsx("div",{className:"border-border/70 relative min-h-[var(--week-cells-height)] border-b last:border-b-0",children:y>0&&h.jsx("span",{className:"bg-background text-muted-foreground/70 absolute -top-3 left-0 flex h-6 w-16 max-w-full items-center justify-end pe-2 text-[10px] sm:pe-4 sm:text-xs",children:ar(g,"h a")})},g.toString()))}),s.map((g,y)=>h.jsxs("div",{className:"border-border/70 relative grid auto-cols-fr border-r last:border-r-0","data-today":h1(g)||void 0,children:[(l[y]??[]).map(v=>h.jsx("div",{className:"absolute z-10 px-0.5",style:{top:`${v.top}px`,height:`${v.height}px`,left:`${v.left*100}%`,width:`${v.width*100}%`,zIndex:v.zIndex},onClick:w=>w.stopPropagation(),children:h.jsx("div",{className:"size-full",children:h.jsx(g8,{event:v.event,view:"week",onClick:w=>c(v.event,w),showTime:!0,height:v.height})})},v.event.id)),m&&h1(g)&&h.jsx("div",{className:"pointer-events-none absolute right-0 left-0 z-20",style:{top:`${f}%`},children:h.jsxs("div",{className:"relative flex items-center",children:[h.jsx("div",{className:"bg-primary absolute -left-1 h-2 w-2 rounded-full"}),h.jsx("div",{className:"bg-primary h-[2px] w-full"})]})}),i.map(v=>{const w=N1(v);return h.jsx("div",{className:"border-border/70 relative min-h-[var(--week-cells-height)] border-b last:border-b-0",children:[0,1,2,3].map(_=>{const S=w+_*.25;return h.jsx(b8,{id:`week-cell-${g.toISOString()}-${S}`,date:g,time:S,className:Qe("absolute h-[calc(var(--week-cells-height)/4)] w-full",_===0&&"top-0",_===1&&"top-[calc(var(--week-cells-height)/4)]",_===2&&"top-[calc(var(--week-cells-height)/4*2)]",_===3&&"top-[calc(var(--week-cells-height)/4*3)]"),onClick:()=>{const k=new Date(g);k.setHours(w),k.setMinutes(_*15),r(k)}},`${v.toString()}-${_}`)})},v.toString())})]},g.toString()))]})]})}const R$=e=>{let t;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const m=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(g=>g(t,m))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(r,s,a);return a},wke=(e=>e?R$(e):R$),Eke=e=>e;function _ke(e,t=Eke){const n=Me.useSyncExternalStore(e.subscribe,Me.useCallback(()=>t(e.getState()),[e,t]),Me.useCallback(()=>t(e.getInitialState()),[e,t]));return Me.useDebugValue(n),n}const M$=e=>{const t=wke(e),n=r=>_ke(t,r);return Object.assign(n,t),n},Ske=(e=>e?M$(e):M$),na=[];for(let e=0;e<256;++e)na.push((e+256).toString(16).slice(1));function Tke(e,t=0){return(na[e[t+0]]+na[e[t+1]]+na[e[t+2]]+na[e[t+3]]+"-"+na[e[t+4]]+na[e[t+5]]+"-"+na[e[t+6]]+na[e[t+7]]+"-"+na[e[t+8]]+na[e[t+9]]+"-"+na[e[t+10]]+na[e[t+11]]+na[e[t+12]]+na[e[t+13]]+na[e[t+14]]+na[e[t+15]]).toLowerCase()}let ek;const Cke=new Uint8Array(16);function kke(){if(!ek){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ek=crypto.getRandomValues.bind(crypto)}return ek(Cke)}const Ake=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),O$={randomUUID:Ake};function Nke(e,t,n){var s;e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??kke();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Tke(r)}function v2(e,t,n){return O$.randomUUID&&!e?O$.randomUUID():Nke(e)}const uC=Ske(e=>({todos:[],selectedTodoId:null,activeTab:"all",isAddDialogOpen:!1,isTodoSheetOpen:!1,viewMode:"list",filterUser:null,filterPriority:null,showStarredOnly:!1,searchQuery:"",setTodos:t=>e(()=>({todos:t})),addTodo:t=>e(n=>({todos:[...n.todos,{...t,id:v2(),createdAt:new Date,comments:[],files:[],subTasks:[],starred:!1}]})),updateTodo:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,...n}:s)})),deleteTodo:t=>e(n=>({todos:n.todos.filter(r=>r.id!==t)})),setSelectedTodoId:t=>e(()=>({selectedTodoId:t})),setActiveTab:t=>e(()=>({activeTab:t})),setAddDialogOpen:t=>e(()=>({isAddDialogOpen:t})),setTodoSheetOpen:t=>e(()=>({isTodoSheetOpen:t})),addComment:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,comments:[...s.comments,{id:v2(),text:n,createdAt:new Date}]}:s)})),deleteComment:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,comments:s.comments.filter(o=>o.id!==n)}:s)})),reorderTodos:t=>e(n=>{const r=[...n.todos];return t.forEach(({id:s,position:o})=>{const i=r.findIndex(a=>a.id===s);if(i!==-1){const[a]=r.splice(i,1);r.splice(o,0,a)}}),{todos:r}}),setViewMode:t=>e(()=>({viewMode:t})),setFilterUser:t=>e(()=>({filterUser:t})),setFilterPriority:t=>e(()=>({filterPriority:t})),setSearchQuery:t=>e(()=>({searchQuery:t})),toggleShowStarredOnly:()=>e(t=>({showStarredOnly:!t.showStarredOnly})),addFile:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,files:[...s.files||[],{...n,id:v2()}]}:s)})),removeFile:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,files:(s.files||[]).filter(o=>o.id!==n)}:s)})),addSubTask:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,subTasks:[...s.subTasks||[],{id:v2(),title:n,completed:!1}]}:s)})),updateSubTask:(t,n,r)=>e(s=>({todos:s.todos.map(o=>o.id===t?{...o,subTasks:(o.subTasks||[]).map(i=>i.id===n?{...i,completed:r}:i)}:o)})),removeSubTask:(t,n)=>e(r=>({todos:r.todos.map(s=>s.id===t?{...s,subTasks:(s.subTasks||[]).filter(o=>o.id!==n)}:s)})),toggleStarred:t=>e(n=>({todos:n.todos.map(r=>r.id===t?{...r,starred:!r.starred}:r)}))})),Ike=[{id:"4",title:"Design homepage layout",description:"Create wireframes and mockups for the homepage",assignedTo:["Emily Carter","Liam Walker"],comments:[{id:"c3",text:"Consider using a grid layout for responsiveness",createdAt:new Date("2023-05-20T00:00:00.000Z")}],status:"in-progress",priority:"high",createdAt:new Date("2023-05-18T00:00:00.000Z"),dueDate:new Date("2023-06-05T00:00:00.000Z"),reminderDate:new Date("2023-05-30T00:00:00.000Z"),subTasks:[{id:"st4",title:"Sketch wireframe",completed:!0},{id:"st5",title:"Create high-fidelity mockup",completed:!1}],files:[],starred:!0},{id:"5",title:"Conduct user interviews",description:"Schedule and conduct interviews with 5 users",assignedTo:["Liam Walker"],comments:[],status:"pending",priority:"medium",createdAt:new Date("2023-05-22T00:00:00.000Z"),dueDate:new Date("2023-06-12T00:00:00.000Z"),reminderDate:new Date("2023-06-10T00:00:00.000Z"),subTasks:[{id:"st6",title:"Prepare interview questions",completed:!0},{id:"st7",title:"Send invites",completed:!1}],files:[],starred:!1},{id:"6",title:"Write unit tests",description:"Add unit tests for authentication module",assignedTo:["Sophie Lee"],comments:[{id:"c4",text:"Make sure to cover edge cases",createdAt:new Date("2023-05-25T00:00:00.000Z")}],status:"in-progress",priority:"high",createdAt:new Date("2023-05-24T00:00:00.000Z"),dueDate:new Date("2023-06-07T00:00:00.000Z"),reminderDate:new Date("2023-06-05T00:00:00.000Z"),subTasks:[{id:"st8",title:"Write tests for login",completed:!1},{id:"st9",title:"Write tests for logout",completed:!1}],files:[],starred:!0},{id:"7",title:"Prepare launch checklist",description:"Create a checklist of items before launch day",assignedTo:["Daniel Kim","Olivia Adams"],comments:[],status:"pending",priority:"low",createdAt:new Date("2023-05-27T00:00:00.000Z"),dueDate:new Date("2023-06-20T00:00:00.000Z"),reminderDate:void 0,subTasks:[{id:"st10",title:"Domain verification",completed:!1}],files:[],starred:!1},{id:"8",title:"Update privacy policy",description:"Add GDPR compliance section",assignedTo:["Olivia Adams"],comments:[{id:"c5",text:"Consult with the legal team for accuracy",createdAt:new Date("2023-05-29T00:00:00.000Z")}],status:"in-progress",priority:"medium",createdAt:new Date("2023-05-28T00:00:00.000Z"),dueDate:new Date("2023-06-14T00:00:00.000Z"),reminderDate:new Date("2023-06-12T00:00:00.000Z"),subTasks:[{id:"st11",title:"Review existing policy",completed:!0},{id:"st12",title:"Add new GDPR section",completed:!1}],files:[],starred:!1},{id:"9",title:"Deploy to staging",description:"Deploy the latest build to the staging environment",assignedTo:["Noah Bennett"],comments:[],status:"completed",priority:"high",createdAt:new Date("2023-05-30T00:00:00.000Z"),dueDate:new Date("2023-06-02T00:00:00.000Z"),reminderDate:new Date("2023-05-30T00:00:00.000Z"),subTasks:[{id:"st13",title:"Merge main branch",completed:!0},{id:"st14",title:"Trigger CI/CD",completed:!0}],files:[],starred:!0},{id:"10",title:"Organize team retro",description:"Plan and host the sprint retrospective meeting",assignedTo:["Mia Turner","Olivia Adams"],comments:[],status:"pending",priority:"low",createdAt:new Date("2023-06-01T00:00:00.000Z"),dueDate:new Date("2023-06-10T00:00:00.000Z"),reminderDate:new Date("2023-06-09T00:00:00.000Z"),subTasks:[{id:"st15",title:"Book meeting room",completed:!1},{id:"st16",title:"Prepare feedback board",completed:!1}],files:[],starred:!1},{id:"11",title:"Refactor dashboard UI",description:"Improve layout and responsiveness of the dashboard page",assignedTo:["Lucas Evans","Mia Turner","Olivia Adams"],comments:[{id:"c6",text:"Don't forget mobile breakpoints",createdAt:new Date("2023-06-03T00:00:00.000Z")}],status:"in-progress",priority:"high",createdAt:new Date("2023-06-02T00:00:00.000Z"),dueDate:new Date("2023-06-18T00:00:00.000Z"),reminderDate:new Date("2023-06-15T00:00:00.000Z"),subTasks:[{id:"st17",title:"Fix sidebar behavior",completed:!0},{id:"st18",title:"Adjust grid layout",completed:!1}],files:[],starred:!0}];var Sx=(e=>(e.High="high",e.Medium="medium",e.Low="low",e))(Sx||{}),Tx=(e=>(e.Pending="pending",e.InProgress="in-progress",e.Completed="completed",e))(Tx||{});const GN={high:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",low:"bg-gray-200 text-green-80 dark:bg-gray-700 dark:text-gray-200"},VZ={high:"bg-red-500",medium:"bg-yellow-500",low:"bg-gray-400"},WN={pending:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200","in-progress":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",completed:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"},qZ={pending:"Pending","in-progress":"In Progress",completed:"Completed"},Rke={pending:"bg-blue-500","in-progress":"bg-purple-500",completed:"bg-green-500"},Mke=e=>{let{transform:t}=e;return{...t,x:0}};var GZ="Toggle",I8=x.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:s,...o}=e,[i,a]=bl({prop:n,onChange:s,defaultProp:r??!1,caller:GZ});return h.jsx(Pn.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...o,ref:t,onClick:Wt(e.onClick,()=>{e.disabled||a(!i)})})});I8.displayName=GZ;var Oke=I8,V0="ToggleGroup",[WZ]=Ha(V0,[B0]),YZ=B0(),R8=Me.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const s=r;return h.jsx(Dke,{...s,ref:t})}if(n==="multiple"){const s=r;return h.jsx(Pke,{...s,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${V0}\``)});R8.displayName=V0;var[KZ,ZZ]=WZ(V0),Dke=Me.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...o}=e,[i,a]=bl({prop:n,defaultProp:r??"",onChange:s,caller:V0});return h.jsx(KZ,{scope:e.__scopeToggleGroup,type:"single",value:Me.useMemo(()=>i?[i]:[],[i]),onItemActivate:a,onItemDeactivate:Me.useCallback(()=>a(""),[a]),children:h.jsx(JZ,{...o,ref:t})})}),Pke=Me.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...o}=e,[i,a]=bl({prop:n,defaultProp:r??[],onChange:s,caller:V0}),l=Me.useCallback(u=>a((f=[])=>[...f,u]),[a]),c=Me.useCallback(u=>a((f=[])=>f.filter(m=>m!==u)),[a]);return h.jsx(KZ,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:l,onItemDeactivate:c,children:h.jsx(JZ,{...o,ref:t})})});R8.displayName=V0;var[Lke,$ke]=WZ(V0),JZ=Me.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:s=!0,orientation:o,dir:i,loop:a=!0,...l}=e,c=YZ(n),u=wb(i),f={role:"group",dir:u,...l};return h.jsx(Lke,{scope:n,rovingFocus:s,disabled:r,children:s?h.jsx(x4,{asChild:!0,...c,orientation:o,dir:u,loop:a,children:h.jsx(Pn.div,{...f,ref:t})}):h.jsx(Pn.div,{...f,ref:t})})}),IS="ToggleGroupItem",XZ=Me.forwardRef((e,t)=>{const n=ZZ(IS,e.__scopeToggleGroup),r=$ke(IS,e.__scopeToggleGroup),s=YZ(e.__scopeToggleGroup),o=n.value.includes(e.value),i=r.disabled||e.disabled,a={...e,pressed:o,disabled:i},l=Me.useRef(null);return r.rovingFocus?h.jsx(w4,{asChild:!0,...s,focusable:!i,active:o,ref:l,children:h.jsx(D$,{...a,ref:t})}):h.jsx(D$,{...a,ref:t})});XZ.displayName=IS;var D$=Me.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...s}=e,o=ZZ(IS,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},a=o.type==="single"?i:void 0;return h.jsx(I8,{...a,...s,ref:t,onPressedChange:l=>{l?o.onItemActivate(r):o.onItemDeactivate(r)}})}),Fke=R8,Bke=XZ;const QZ=yR("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function YN({className:e,variant:t,size:n,...r}){return h.jsx(Oke,{"data-slot":"toggle",className:Qe(QZ({variant:t,size:n,className:e})),...r})}const eJ=x.createContext({size:"default",variant:"default"});function zke({className:e,variant:t,size:n,children:r,...s}){return h.jsx(Fke,{"data-slot":"toggle-group","data-variant":t,"data-size":n,className:Qe("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",e),...s,children:h.jsx(eJ.Provider,{value:{variant:t,size:n},children:r})})}function P$({className:e,children:t,variant:n,size:r,...s}){const o=x.useContext(eJ);return h.jsx(Bke,{"data-slot":"toggle-group-item","data-variant":o.variant||n,"data-size":o.size||r,className:Qe(QZ({variant:o.variant||n,size:o.size||r}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",e),...s,children:t})}const x2=({todo:e,onClick:t,onStatusChange:n,viewMode:r,onStarToggle:s,isDraggingOverlay:o=!1})=>{var w,_,S,k;const i=((w=e.subTasks)==null?void 0:w.filter(R=>R.completed).length)||0,a=((_=e.subTasks)==null?void 0:_.length)||0,{attributes:l,listeners:c,setNodeRef:u,transform:f,transition:m,isDragging:g}=u8({id:e.id}),y={transform:Cu.Transform.toString(f),transition:m,opacity:g?o?.8:.4:1,zIndex:g?100:1},v=e.reminderDate?ar(new Date(e.reminderDate),"MMM d, yyyy - h:mm a"):null;return r==="grid"?h.jsx("div",{ref:u,...l,...c,style:y,children:h.jsxs(_N,{className:Qe("flex h-full cursor-pointer flex-col transition-shadow hover:shadow-md",e.status==="completed"?"opacity-70":""),onClick:t,children:[h.jsx(SN,{className:"flex h-full flex-col justify-between",children:h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx(xx,{checked:e.status==="completed",onCheckedChange:()=>n?n(e.id,e.status==="completed"?"pending":"completed"):void 0,onClick:R=>R.stopPropagation()}),h.jsx("h3",{className:Qe("text-md flex-1 leading-none font-medium",e.status==="completed"?"text-muted-foreground line-through":""),children:e.title}),h.jsx(iL,{className:Qe("size-5 cursor-pointer",e.starred?"fill-yellow-400 text-yellow-400":"text-muted-foreground/50 hover:text-muted-foreground"),onClick:R=>s?s(e.id,R):void 0})]}),h.jsxs("div",{className:"text-muted-foreground flex flex-wrap items-center gap-1 text-sm",children:[h.jsx("span",{children:"Assigned to:"}),e.assignedTo.map((R,O)=>h.jsx(Sc,{variant:"outline",className:"font-normal",children:R},O))]}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.dueDate&&h.jsxs("div",{className:"text-muted-foreground flex items-center gap-1 text-sm",children:[h.jsx(B1,{className:"h-3 w-3"}),h.jsx("span",{children:ar(new Date(e.dueDate),"MMM d, yyyy")})]}),e.reminderDate&&h.jsx(V1,{children:h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:h.jsx("div",{className:"flex items-center gap-1 text-xs",children:h.jsx(qP,{className:"size-3"})})}),h.jsx(um,{children:h.jsxs("p",{children:["Reminder: ",v]})})]})})]}),a>0&&h.jsxs("div",{className:"text-muted-foreground text-xs",children:["Subtasks: ",i,"/",a]})]})}),h.jsxs(vve,{className:"flex flex-wrap justify-between border-t",children:[h.jsxs("div",{className:"flex items-center gap-2 capitalize",children:[h.jsx(Sc,{className:WN[e.status],children:e.status.replace("-"," ")}),h.jsx(Sc,{className:GN[e.priority],children:e.priority})]}),(((S=e.files)==null?void 0:S.length)||0)>0&&h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(lx,{className:"text-muted-foreground size-3"}),h.jsx("span",{className:"text-muted-foreground text-xs",children:(k=e.files)==null?void 0:k.length})]})]})]})}):h.jsx("div",{ref:u,...l,...c,style:y,children:h.jsx(_N,{className:Qe("cursor-pointer transition-shadow hover:shadow-md",e.status==="completed"?"opacity-70":""),onClick:t,children:h.jsxs(SN,{className:"flex items-start gap-3",children:[h.jsx(xx,{checked:e.status==="completed",onCheckedChange:()=>n?n(e.id,e.status==="completed"?"pending":"completed"):void 0,onClick:R=>R.stopPropagation()}),h.jsxs("div",{className:"flex grow flex-col space-y-2",children:[h.jsxs("div",{className:"flex flex-col items-start justify-between space-y-1 lg:flex-row lg:space-y-0",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("h3",{className:Qe("text-md leading-none font-medium",e.status==="completed"?"text-muted-foreground line-through":""),children:e.title}),h.jsx(iL,{className:Qe("size-4 cursor-pointer",e.starred?"fill-yellow-400 text-yellow-400":"text-muted-foreground/50 hover:text-muted-foreground"),onClick:R=>s?s(e.id,R):void 0})]}),h.jsxs("div",{className:"flex items-center gap-2 capitalize",children:[h.jsx(Sc,{className:WN[e.status],children:e.status.replace("-"," ")}),h.jsx(Sc,{className:GN[e.priority],children:e.priority})]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[h.jsx("div",{className:"flex flex-wrap gap-1",children:e.assignedTo.map((R,O)=>h.jsx(Sc,{variant:"outline",className:"font-normal",children:R},O))}),e.dueDate&&h.jsxs("div",{className:"text-muted-foreground flex items-center gap-1 text-xs",children:[h.jsx(B1,{className:"h-3 w-3"}),h.jsx("span",{children:ar(new Date(e.dueDate),"MMM d, yyyy")})]}),e.reminderDate&&h.jsx(V1,{children:h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:h.jsx("div",{className:"flex items-center gap-1 text-xs",children:h.jsx(qP,{className:"size-3"})})}),h.jsx(um,{children:h.jsxs("p",{children:["Reminder: ",v]})})]})}),e.files&&e.files.length>0&&h.jsxs("div",{className:"text-muted-foreground flex items-center gap-1 text-xs",children:[h.jsx(lx,{className:"size-3"}),h.jsx("span",{children:e.files.length})]}),a>0&&h.jsxs("div",{className:"text-muted-foreground text-xs",children:["Subtasks: ",i,"/",a]})]})]})]})})})},jke=({onTabChange:e,activeTab:t})=>h.jsx(cG,{defaultValue:t,onValueChange:n=>e(n),value:t,children:h.jsxs(uG,{children:[h.jsx(Iv,{value:"all",children:"All"}),Object.values(Tx).map(n=>h.jsx(Iv,{value:n,children:qZ[n]},n))]})});function Uke({activeTab:e,onSelectTodo:t,onAddTodoClick:n}){const[r,s]=Me.useState(null),{todos:o,updateTodo:i,reorderTodos:a,viewMode:l,setViewMode:c,filterUser:u,setFilterUser:f,filterPriority:m,setFilterPriority:g,searchQuery:y,setSearchQuery:v,toggleStarred:w,showStarredOnly:_,toggleShowStarredOnly:S,setActiveTab:k}=uC(),[,R]=Me.useState([]),O=t8(m0(W4,{activationConstraint:{distance:3}}),m0(G4,{coordinateGetter:lTe})),M=ie=>{k(ie)},P=Array.from(new Set((o||[]).flatMap(ie=>ie.assignedTo))),j=(o||[]).filter(ie=>{var Z;if(e!=="all")return ie.status===e;if(u&&u.length>0&&!u.some(te=>ie.assignedTo.includes(te))||m&&ie.priority!==m||_&&!ie.starred)return!1;if(y.trim()){const te=y.toLowerCase();return ie.title.toLowerCase().includes(te)||((Z=ie.description)==null?void 0:Z.toLowerCase().includes(te))||ie.assignedTo.some(oe=>oe.toLowerCase().includes(te))}return!0}),q=(ie,Z)=>{i(ie,{status:Z}),Ui.success(`Task status changed to ${Z.replace("-"," ")}`)},U=ie=>{console.log("event.active.id",ie.active.id),s(ie.active.id)},z=ie=>{const{active:Z,over:te}=ie;if(!te||Z.id===te.id)return;const oe=j.findIndex(Ce=>Ce.id===Z.id),Q=j.findIndex(Ce=>Ce.id===te.id);if(oe===-1||Q===-1)return;const Te=C1(j,oe,Q),ge=Te.map((Ce,he)=>({id:Ce.id,position:he}));a(ge),R(ge),console.log("Todos after reordering:",{reorderedTodos:Te.map(Ce=>{var he;return{id:Ce.id,title:Ce.title,position:(he=ge.find(Fe=>Fe.id===Ce.id))==null?void 0:he.position}})}),Ui.success("The to-do items have been reordered successfully.")},H=ie=>{s(null)},F=(ie,Z)=>{if(!u)f(Z?[ie]:null);else{const te=Z?[...u,ie]:u.filter(oe=>oe!==ie);f(te.length>0?te:null)}},W=()=>{f(null),g(null),v(""),_&&S()},X=(ie,Z)=>{Z.stopPropagation(),w(ie)},J=()=>h.jsxs("div",{className:"space-y-6 p-4",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Assigned Users"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(ie=>h.jsx(YN,{variant:"outline",size:"sm",pressed:(u==null?void 0:u.includes(ie))||!1,onPressedChange:Z=>F(ie,Z),className:"px-3 text-xs",children:ie},ie))})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xx,{id:"starred",checked:_,onCheckedChange:S}),h.jsx(Hl,{htmlFor:"starred",children:"Show starred only"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Priority"}),h.jsx("div",{className:"flex gap-2 *:grow",children:Object.values(Sx).map(ie=>h.jsxs(YN,{variant:"outline",size:"sm",pressed:(m==null?void 0:m.includes(ie))||!1,onPressedChange:()=>g(ie),className:"px-3 text-xs capitalize",children:[h.jsx("span",{className:Qe("size-2 rounded-full",VZ[ie])}),ie]},ie))}),(u||m||_)&&h.jsx("div",{className:"text-end",children:h.jsxs(_r,{variant:"link",size:"sm",className:"px-0!",onClick:W,children:["Clear Filters",h.jsx(qr,{})]})})]})]}),ee=(o||[]).map(ie=>ie.id),re=()=>l==="grid"?h.jsxs(bS,{sensors:O,collisionDetection:mS,onDragStart:U,onDragEnd:z,onDragCancel:H,children:[h.jsx(xS,{items:ee,strategy:vS,children:h.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:j.map(ie=>h.jsx(x2,{todo:ie,onClick:()=>t(ie.id),onStatusChange:q,viewMode:"grid",onStarToggle:X},ie.id))})}),h.jsx(yS,{children:r?h.jsx(x2,{todo:j.find(ie=>ie.id===r),viewMode:"grid",isDraggingOverlay:!0}):null})]}):h.jsxs(bS,{sensors:O,collisionDetection:mS,onDragStart:U,onDragEnd:z,onDragCancel:H,modifiers:[Mke],children:[h.jsx(xS,{items:ee,strategy:vS,children:h.jsx("div",{className:"grid grid-cols-1 space-y-4",children:j.map(ie=>h.jsx(x2,{todo:ie,onClick:()=>t(ie.id),onStatusChange:q,viewMode:"list",onStarToggle:X},ie.id))})}),h.jsx(yS,{children:r?h.jsx(x2,{todo:j.find(ie=>ie.id===r),viewMode:"list",isDraggingOverlay:!0}):null})]});return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 lg:flex-row lg:items-center",children:[h.jsx(jke,{activeTab:e,onTabChange:M}),h.jsxs("div",{className:"flex w-full items-center gap-2 lg:w-auto",children:[h.jsxs("div",{className:"relative w-auto",children:[h.jsx(Gf,{className:"absolute top-2.5 left-3 size-4 opacity-50"}),h.jsx(Ed,{placeholder:"Search tasks...",className:"ps-10",value:y,onChange:ie=>v(ie.target.value)})]}),h.jsxs(bw,{children:[h.jsx(yw,{asChild:!0,children:h.jsxs(_r,{size:"icon",variant:"outline",className:"relative",children:[h.jsx(kq,{}),(u||m||_)&&h.jsx(Sc,{variant:"secondary",className:"absolute -end-1.5 -top-1.5 size-4 rounded-full p-0",children:(u?1:0)+(m?1:0)+(_?1:0)})]})}),h.jsx(vw,{className:"w-80",align:"end",children:J()})]}),h.jsxs(zke,{type:"single",variant:"outline",value:l,onValueChange:ie=>ie&&c(ie),children:[h.jsx(P$,{value:"list","aria-label":"List view",children:h.jsx(P1e,{})}),h.jsx(P$,{value:"grid","aria-label":"Grid view",children:h.jsx(E1e,{})})]}),h.jsx(V1,{children:h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:h.jsx(_r,{size:"icon",onClick:n,className:"fixed end-6 bottom-6 z-10 rounded-full! md:size-14",children:h.jsx(qf,{className:"md:size-6"})})}),h.jsx(um,{side:"left",children:h.jsx("p",{children:"Add To-Do"})})]})})]})]}),j.length===0?h.jsxs("div",{className:"flex h-[calc(100vh-12rem)] flex-col items-center justify-center py-12 text-center",children:[h.jsx("h3",{className:"text-xl font-medium",children:"No tasks found"}),h.jsx("p",{className:"text-muted-foreground mt-2",children:"Add a new task to get started"})]}):re()]})}var Aw=e=>e.type==="checkbox",Gp=e=>e instanceof Date,ul=e=>e==null;const tJ=e=>typeof e=="object";var mi=e=>!ul(e)&&!Array.isArray(e)&&tJ(e)&&!Gp(e),nJ=e=>mi(e)&&e.target?Aw(e.target)?e.target.checked:e.target.value:e,Hke=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,rJ=(e,t)=>e.has(Hke(t)),Vke=e=>{const t=e.constructor&&e.constructor.prototype;return mi(t)&&t.hasOwnProperty("isPrototypeOf")},M8=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ai(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(M8&&(e instanceof Blob||r))&&(n||mi(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!Vke(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Ai(e[s]));else return e;return t}var dC=e=>/^\w*$/.test(e),Go=e=>e===void 0,O8=e=>Array.isArray(e)?e.filter(Boolean):[],D8=e=>O8(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Yt=(e,t,n)=>{if(!t||!mi(e))return n;const r=(dC(t)?[t]:D8(t)).reduce((s,o)=>ul(s)?s:s[o],e);return Go(r)||r===e?Go(e[t])?n:e[t]:r},Vl=e=>typeof e=="boolean",_s=(e,t,n)=>{let r=-1;const s=dC(t)?[t]:D8(t),o=s.length,i=o-1;for(;++r<o;){const a=s[r];let l=n;if(r!==i){const c=e[a];l=mi(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=l,e=e[a]}};const RS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},du={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},pf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},P8=Me.createContext(null);P8.displayName="HookFormContext";const fC=()=>Me.useContext(P8),qke=e=>{const{children:t,...n}=e;return Me.createElement(P8.Provider,{value:n},t)};var sJ=(e,t,n,r=!0)=>{const s={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(s,o,{get:()=>{const i=o;return t._proxyFormState[i]!==du.all&&(t._proxyFormState[i]=!r||du.all),n&&(n[i]=!0),e[i]}});return s};const L8=typeof window<"u"?Me.useLayoutEffect:Me.useEffect;function oJ(e){const t=fC(),{control:n=t.control,disabled:r,name:s,exact:o}=e||{},[i,a]=Me.useState(n._formState),l=Me.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return L8(()=>n._subscribe({name:s,formState:l.current,exact:o,callback:c=>{!r&&a({...n._formState,...c})}}),[s,r,o]),Me.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),Me.useMemo(()=>sJ(i,n,l.current,!1),[i,n])}var ql=e=>typeof e=="string",KN=(e,t,n,r,s)=>ql(e)?(r&&t.watch.add(e),Yt(n,e,s)):Array.isArray(e)?e.map(o=>(r&&t.watch.add(o),Yt(n,o))):(r&&(t.watchAll=!0),n),ZN=e=>ul(e)||!tJ(e);function fu(e,t,n=new WeakSet){if(ZN(e)||ZN(t))return Object.is(e,t);if(Gp(e)&&Gp(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const o of r){const i=e[o];if(!s.includes(o))return!1;if(o!=="ref"){const a=t[o];if(Gp(i)&&Gp(a)||mi(i)&&mi(a)||Array.isArray(i)&&Array.isArray(a)?!fu(i,a,n):!Object.is(i,a))return!1}}return!0}function Gke(e){const t=fC(),{control:n=t.control,name:r,defaultValue:s,disabled:o,exact:i,compute:a}=e||{},l=Me.useRef(s),c=Me.useRef(a),u=Me.useRef(void 0),f=Me.useRef(n),m=Me.useRef(r);c.current=a;const[g,y]=Me.useState(()=>{const R=n._getWatch(r,l.current);return c.current?c.current(R):R}),v=Me.useCallback(R=>{const O=KN(r,n._names,R||n._formValues,!1,l.current);return c.current?c.current(O):O},[n._formValues,n._names,r]),w=Me.useCallback(R=>{if(!o){const O=KN(r,n._names,R||n._formValues,!1,l.current);if(c.current){const M=c.current(O);fu(M,u.current)||(y(M),u.current=M)}else y(O)}},[n._formValues,n._names,o,r]);L8(()=>((f.current!==n||!fu(m.current,r))&&(f.current=n,m.current=r,w()),n._subscribe({name:r,formState:{values:!0},exact:i,callback:R=>{w(R.values)}})),[n,i,r,w]),Me.useEffect(()=>n._removeUnmounted());const _=f.current!==n,S=m.current,k=Me.useMemo(()=>{if(o)return null;const R=!_&&!fu(S,r);return _||R?v():null},[o,_,r,S,v]);return k!==null?k:g}function Wke(e){const t=fC(),{name:n,disabled:r,control:s=t.control,shouldUnregister:o,defaultValue:i,exact:a=!0}=e,l=rJ(s._names.array,n),c=Me.useMemo(()=>Yt(s._formValues,n,Yt(s._defaultValues,n,i)),[s,n,i]),u=Gke({control:s,name:n,defaultValue:c,exact:a}),f=oJ({control:s,name:n,exact:a}),m=Me.useRef(e),g=Me.useRef(void 0),y=Me.useRef(s.register(n,{...e.rules,value:u,...Vl(e.disabled)?{disabled:e.disabled}:{}}));m.current=e;const v=Me.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Yt(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!Yt(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Yt(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Yt(f.validatingFields,n)},error:{enumerable:!0,get:()=>Yt(f.errors,n)}}),[f,n]),w=Me.useCallback(R=>y.current.onChange({target:{value:nJ(R),name:n},type:RS.CHANGE}),[n]),_=Me.useCallback(()=>y.current.onBlur({target:{value:Yt(s._formValues,n),name:n},type:RS.BLUR}),[n,s._formValues]),S=Me.useCallback(R=>{const O=Yt(s._fields,n);O&&R&&(O._f.ref={focus:()=>R.focus&&R.focus(),select:()=>R.select&&R.select(),setCustomValidity:M=>R.setCustomValidity(M),reportValidity:()=>R.reportValidity()})},[s._fields,n]),k=Me.useMemo(()=>({name:n,value:u,...Vl(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:w,onBlur:_,ref:S}),[n,r,f.disabled,w,_,S,u]);return Me.useEffect(()=>{const R=s._options.shouldUnregister||o,O=g.current;O&&O!==n&&!l&&s.unregister(O),s.register(n,{...m.current.rules,...Vl(m.current.disabled)?{disabled:m.current.disabled}:{}});const M=(P,j)=>{const q=Yt(s._fields,P);q&&q._f&&(q._f.mount=j)};if(M(n,!0),R){const P=Ai(Yt(s._options.defaultValues,n,m.current.defaultValue));_s(s._defaultValues,n,P),Go(Yt(s._formValues,n))&&_s(s._formValues,n,P)}return!l&&s.register(n),g.current=n,()=>{(l?R&&!s._state.action:R)?s.unregister(n):M(n,!1)}},[n,s,l,o]),Me.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),Me.useMemo(()=>({field:k,formState:f,fieldState:v}),[k,f,v])}const Yke=e=>e.render(Wke(e));var $8=(e,t,n,r,s)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:s||!0}}:{},Dv=e=>Array.isArray(e)?e:[e],L$=()=>{let e=[];return{get observers(){return e},next:s=>{for(const o of e)o.next&&o.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(o=>o!==s)}}),unsubscribe:()=>{e=[]}}};function iJ(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const s=e[r],o=t[r];if(s&&mi(s)&&o){const i=iJ(s,o);mi(i)&&(n[r]=i)}else e[r]&&(n[r]=o)}return n}var Da=e=>mi(e)&&!Object.keys(e).length,F8=e=>e.type==="file",hu=e=>typeof e=="function",MS=e=>{if(!M8)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},aJ=e=>e.type==="select-multiple",B8=e=>e.type==="radio",Kke=e=>B8(e)||Aw(e),tk=e=>MS(e)&&e.isConnected;function Zke(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Go(e)?r++:e[t[r++]];return e}function Jke(e){for(const t in e)if(e.hasOwnProperty(t)&&!Go(e[t]))return!1;return!0}function ci(e,t){const n=Array.isArray(t)?t:dC(t)?[t]:D8(t),r=n.length===1?e:Zke(e,n),s=n.length-1,o=n[s];return r&&delete r[o],s!==0&&(mi(r)&&Da(r)||Array.isArray(r)&&Jke(r))&&ci(e,n.slice(0,-1)),e}var Xke=e=>{for(const t in e)if(hu(e[t]))return!0;return!1};function lJ(e){return Array.isArray(e)||mi(e)&&!Xke(e)}function JN(e,t={}){for(const n in e){const r=e[n];lJ(r)?(t[n]=Array.isArray(r)?[]:{},JN(r,t[n])):Go(r)||(t[n]=!0)}return t}function n1(e,t,n){n||(n=JN(t));for(const r in e){const s=e[r];if(lJ(s))Go(t)||ZN(n[r])?n[r]=JN(s,Array.isArray(s)?[]:{}):n1(s,ul(t)?{}:t[r],n[r]);else{const o=t[r];n[r]=!fu(s,o)}}return n}const $$={value:!1,isValid:!1},F$={value:!0,isValid:!0};var cJ=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Go(e[0].attributes.value)?Go(e[0].value)||e[0].value===""?F$:{value:e[0].value,isValid:!0}:F$:$$}return $$},uJ=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Go(e)?e:t?e===""?NaN:e&&+e:n&&ql(e)?new Date(e):r?r(e):e;const B$={isValid:!1,value:null};var dJ=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,B$):B$;function z$(e){const t=e.ref;return F8(t)?t.files:B8(t)?dJ(e.refs).value:aJ(t)?[...t.selectedOptions].map(({value:n})=>n):Aw(t)?cJ(e.refs).value:uJ(Go(t.value)?e.ref.value:t.value,e)}var Qke=(e,t,n,r)=>{const s={};for(const o of e){const i=Yt(t,o);i&&_s(s,o,i._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},OS=e=>e instanceof RegExp,Vy=e=>Go(e)?e:OS(e)?e.source:mi(e)?OS(e.value)?e.value.source:e.value:e,j$=e=>({isOnSubmit:!e||e===du.onSubmit,isOnBlur:e===du.onBlur,isOnChange:e===du.onChange,isOnAll:e===du.all,isOnTouch:e===du.onTouched});const U$="AsyncFunction";var eAe=e=>!!e&&!!e.validate&&!!(hu(e.validate)&&e.validate.constructor.name===U$||mi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===U$)),tAe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),H$=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Pv=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const o=Yt(e,s);if(o){const{_f:i,...a}=o;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],s)&&!r)return!0;if(i.ref&&t(i.ref,i.name)&&!r)return!0;if(Pv(a,t))break}else if(mi(a)&&Pv(a,t))break}}};function V$(e,t,n){const r=Yt(e,n);if(r||dC(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const o=s.join("."),i=Yt(t,o),a=Yt(e,o);if(i&&!Array.isArray(i)&&n!==o)return{name:n};if(a&&a.type)return{name:o,error:a};if(a&&a.root&&a.root.type)return{name:`${o}.root`,error:a.root};s.pop()}return{name:n}}var nAe=(e,t,n,r)=>{n(e);const{name:s,...o}=e;return Da(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(i=>t[i]===(!r||du.all))},rAe=(e,t,n)=>!e||!t||e===t||Dv(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),sAe=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,oAe=(e,t)=>!O8(Yt(e,t)).length&&ci(e,t),iAe=(e,t,n)=>{const r=Dv(Yt(e,n));return _s(r,"root",t[n]),_s(e,n,r),e};function q$(e,t,n="validate"){if(ql(e)||Array.isArray(e)&&e.every(ql)||Vl(e)&&!e)return{type:n,message:ql(e)?e:"",ref:t}}var qg=e=>mi(e)&&!OS(e)?e:{value:e,message:""},G$=async(e,t,n,r,s,o)=>{const{ref:i,refs:a,required:l,maxLength:c,minLength:u,min:f,max:m,pattern:g,validate:y,name:v,valueAsNumber:w,mount:_}=e._f,S=Yt(n,v);if(!_||t.has(v))return{};const k=a?a[0]:i,R=H=>{s&&k.reportValidity&&(k.setCustomValidity(Vl(H)?"":H||""),k.reportValidity())},O={},M=B8(i),P=Aw(i),j=M||P,q=(w||F8(i))&&Go(i.value)&&Go(S)||MS(i)&&i.value===""||S===""||Array.isArray(S)&&!S.length,U=$8.bind(null,v,r,O),z=(H,F,W,X=pf.maxLength,J=pf.minLength)=>{const ee=H?F:W;O[v]={type:H?X:J,message:ee,ref:i,...U(H?X:J,ee)}};if(o?!Array.isArray(S)||!S.length:l&&(!j&&(q||ul(S))||Vl(S)&&!S||P&&!cJ(a).isValid||M&&!dJ(a).isValid)){const{value:H,message:F}=ql(l)?{value:!!l,message:l}:qg(l);if(H&&(O[v]={type:pf.required,message:F,ref:k,...U(pf.required,F)},!r))return R(F),O}if(!q&&(!ul(f)||!ul(m))){let H,F;const W=qg(m),X=qg(f);if(!ul(S)&&!isNaN(S)){const J=i.valueAsNumber||S&&+S;ul(W.value)||(H=J>W.value),ul(X.value)||(F=J<X.value)}else{const J=i.valueAsDate||new Date(S),ee=Z=>new Date(new Date().toDateString()+" "+Z),re=i.type=="time",ie=i.type=="week";ql(W.value)&&S&&(H=re?ee(S)>ee(W.value):ie?S>W.value:J>new Date(W.value)),ql(X.value)&&S&&(F=re?ee(S)<ee(X.value):ie?S<X.value:J<new Date(X.value))}if((H||F)&&(z(!!H,W.message,X.message,pf.max,pf.min),!r))return R(O[v].message),O}if((c||u)&&!q&&(ql(S)||o&&Array.isArray(S))){const H=qg(c),F=qg(u),W=!ul(H.value)&&S.length>+H.value,X=!ul(F.value)&&S.length<+F.value;if((W||X)&&(z(W,H.message,F.message),!r))return R(O[v].message),O}if(g&&!q&&ql(S)){const{value:H,message:F}=qg(g);if(OS(H)&&!S.match(H)&&(O[v]={type:pf.pattern,message:F,ref:i,...U(pf.pattern,F)},!r))return R(F),O}if(y){if(hu(y)){const H=await y(S,n),F=q$(H,k);if(F&&(O[v]={...F,...U(pf.validate,F.message)},!r))return R(F.message),O}else if(mi(y)){let H={};for(const F in y){if(!Da(H)&&!r)break;const W=q$(await y[F](S,n),k,F);W&&(H={...W,...U(F,W.message)},R(W.message),r&&(O[v]=H))}if(!Da(H)&&(O[v]={ref:k,...H},!r))return O}}return R(!0),O};const aAe={mode:du.onSubmit,reValidateMode:du.onChange,shouldFocusError:!0};function lAe(e={}){let t={...aAe,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:hu(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},s=mi(t.defaultValues)||mi(t.values)?Ai(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:Ai(s),i={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const m={array:L$(),state:L$()},g=t.criteriaMode===du.all,y=pe=>Ne=>{clearTimeout(c),c=setTimeout(pe,Ne)},v=async pe=>{if(!t.disabled&&(u.isValid||f.isValid||pe)){const Ne=t.resolver?Da((await P()).errors):await q(r,!0);Ne!==n.isValid&&m.state.next({isValid:Ne})}},w=(pe,Ne)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((pe||Array.from(a.mount)).forEach($e=>{$e&&(Ne?_s(n.validatingFields,$e,Ne):ci(n.validatingFields,$e))}),m.state.next({validatingFields:n.validatingFields,isValidating:!Da(n.validatingFields)}))},_=(pe,Ne=[],$e,Je,Le=!0,Ve=!0)=>{if(Je&&$e&&!t.disabled){if(i.action=!0,Ve&&Array.isArray(Yt(r,pe))){const _e=$e(Yt(r,pe),Je.argA,Je.argB);Le&&_s(r,pe,_e)}if(Ve&&Array.isArray(Yt(n.errors,pe))){const _e=$e(Yt(n.errors,pe),Je.argA,Je.argB);Le&&_s(n.errors,pe,_e),oAe(n.errors,pe)}if((u.touchedFields||f.touchedFields)&&Ve&&Array.isArray(Yt(n.touchedFields,pe))){const _e=$e(Yt(n.touchedFields,pe),Je.argA,Je.argB);Le&&_s(n.touchedFields,pe,_e)}(u.dirtyFields||f.dirtyFields)&&(n.dirtyFields=n1(s,o)),m.state.next({name:pe,isDirty:z(pe,Ne),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else _s(o,pe,Ne)},S=(pe,Ne)=>{_s(n.errors,pe,Ne),m.state.next({errors:n.errors})},k=pe=>{n.errors=pe,m.state.next({errors:n.errors,isValid:!1})},R=(pe,Ne,$e,Je)=>{const Le=Yt(r,pe);if(Le){const Ve=Yt(o,pe,Go($e)?Yt(s,pe):$e);Go(Ve)||Je&&Je.defaultChecked||Ne?_s(o,pe,Ne?Ve:z$(Le._f)):W(pe,Ve),i.mount&&!i.action&&v()}},O=(pe,Ne,$e,Je,Le)=>{let Ve=!1,_e=!1;const Y={name:pe};if(!t.disabled){if(!$e||Je){(u.isDirty||f.isDirty)&&(_e=n.isDirty,n.isDirty=Y.isDirty=z(),Ve=_e!==Y.isDirty);const L=fu(Yt(s,pe),Ne);_e=!!Yt(n.dirtyFields,pe),L?ci(n.dirtyFields,pe):_s(n.dirtyFields,pe,!0),Y.dirtyFields=n.dirtyFields,Ve=Ve||(u.dirtyFields||f.dirtyFields)&&_e!==!L}if($e){const L=Yt(n.touchedFields,pe);L||(_s(n.touchedFields,pe,$e),Y.touchedFields=n.touchedFields,Ve=Ve||(u.touchedFields||f.touchedFields)&&L!==$e)}Ve&&Le&&m.state.next(Y)}return Ve?Y:{}},M=(pe,Ne,$e,Je)=>{const Le=Yt(n.errors,pe),Ve=(u.isValid||f.isValid)&&Vl(Ne)&&n.isValid!==Ne;if(t.delayError&&$e?(l=y(()=>S(pe,$e)),l(t.delayError)):(clearTimeout(c),l=null,$e?_s(n.errors,pe,$e):ci(n.errors,pe)),($e?!fu(Le,$e):Le)||!Da(Je)||Ve){const _e={...Je,...Ve&&Vl(Ne)?{isValid:Ne}:{},errors:n.errors,name:pe};n={...n,..._e},m.state.next(_e)}},P=async pe=>{w(pe,!0);const Ne=await t.resolver(o,t.context,Qke(pe||a.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return w(pe),Ne},j=async pe=>{const{errors:Ne}=await P(pe);if(pe)for(const $e of pe){const Je=Yt(Ne,$e);Je?_s(n.errors,$e,Je):ci(n.errors,$e)}else n.errors=Ne;return Ne},q=async(pe,Ne,$e={valid:!0})=>{for(const Je in pe){const Le=pe[Je];if(Le){const{_f:Ve,..._e}=Le;if(Ve){const Y=a.array.has(Ve.name),L=Le._f&&eAe(Le._f);L&&u.validatingFields&&w([Ve.name],!0);const B=await G$(Le,a.disabled,o,g,t.shouldUseNativeValidation&&!Ne,Y);if(L&&u.validatingFields&&w([Ve.name]),B[Ve.name]&&($e.valid=!1,Ne))break;!Ne&&(Yt(B,Ve.name)?Y?iAe(n.errors,B,Ve.name):_s(n.errors,Ve.name,B[Ve.name]):ci(n.errors,Ve.name))}!Da(_e)&&await q(_e,Ne,$e)}}return $e.valid},U=()=>{for(const pe of a.unMount){const Ne=Yt(r,pe);Ne&&(Ne._f.refs?Ne._f.refs.every($e=>!tk($e)):!tk(Ne._f.ref))&&he(pe)}a.unMount=new Set},z=(pe,Ne)=>!t.disabled&&(pe&&Ne&&_s(o,pe,Ne),!fu(Z(),s)),H=(pe,Ne,$e)=>KN(pe,a,{...i.mount?o:Go(Ne)?s:ql(pe)?{[pe]:Ne}:Ne},$e,Ne),F=pe=>O8(Yt(i.mount?o:s,pe,t.shouldUnregister?Yt(s,pe,[]):[])),W=(pe,Ne,$e={})=>{const Je=Yt(r,pe);let Le=Ne;if(Je){const Ve=Je._f;Ve&&(!Ve.disabled&&_s(o,pe,uJ(Ne,Ve)),Le=MS(Ve.ref)&&ul(Ne)?"":Ne,aJ(Ve.ref)?[...Ve.ref.options].forEach(_e=>_e.selected=Le.includes(_e.value)):Ve.refs?Aw(Ve.ref)?Ve.refs.forEach(_e=>{(!_e.defaultChecked||!_e.disabled)&&(Array.isArray(Le)?_e.checked=!!Le.find(Y=>Y===_e.value):_e.checked=Le===_e.value||!!Le)}):Ve.refs.forEach(_e=>_e.checked=_e.value===Le):F8(Ve.ref)?Ve.ref.value="":(Ve.ref.value=Le,Ve.ref.type||m.state.next({name:pe,values:Ai(o)})))}($e.shouldDirty||$e.shouldTouch)&&O(pe,Le,$e.shouldTouch,$e.shouldDirty,!0),$e.shouldValidate&&ie(pe)},X=(pe,Ne,$e)=>{for(const Je in Ne){if(!Ne.hasOwnProperty(Je))return;const Le=Ne[Je],Ve=pe+"."+Je,_e=Yt(r,Ve);(a.array.has(pe)||mi(Le)||_e&&!_e._f)&&!Gp(Le)?X(Ve,Le,$e):W(Ve,Le,$e)}},J=(pe,Ne,$e={})=>{const Je=Yt(r,pe),Le=a.array.has(pe),Ve=Ai(Ne);_s(o,pe,Ve),Le?(m.array.next({name:pe,values:Ai(o)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&$e.shouldDirty&&m.state.next({name:pe,dirtyFields:n1(s,o),isDirty:z(pe,Ve)})):Je&&!Je._f&&!ul(Ve)?X(pe,Ve,$e):W(pe,Ve,$e),H$(pe,a)&&m.state.next({...n,name:pe}),m.state.next({name:i.mount?pe:void 0,values:Ai(o)})},ee=async pe=>{i.mount=!0;const Ne=pe.target;let $e=Ne.name,Je=!0;const Le=Yt(r,$e),Ve=L=>{Je=Number.isNaN(L)||Gp(L)&&isNaN(L.getTime())||fu(L,Yt(o,$e,L))},_e=j$(t.mode),Y=j$(t.reValidateMode);if(Le){let L,B;const ce=Ne.type?z$(Le._f):nJ(pe),we=pe.type===RS.BLUR||pe.type===RS.FOCUS_OUT,ze=!tAe(Le._f)&&!t.resolver&&!Yt(n.errors,$e)&&!Le._f.deps||sAe(we,Yt(n.touchedFields,$e),n.isSubmitted,Y,_e),Be=H$($e,a,we);_s(o,$e,ce),we?(!Ne||!Ne.readOnly)&&(Le._f.onBlur&&Le._f.onBlur(pe),l&&l(0)):Le._f.onChange&&Le._f.onChange(pe);const ut=O($e,ce,we),ln=!Da(ut)||Be;if(!we&&m.state.next({name:$e,type:pe.type,values:Ai(o)}),ze)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?we&&v():we||v()),ln&&m.state.next({name:$e,...Be?{}:ut});if(!we&&Be&&m.state.next({...n}),t.resolver){const{errors:jt}=await P([$e]);if(Ve(ce),Je){const fn=V$(n.errors,r,$e),an=V$(jt,r,fn.name||$e);L=an.error,$e=an.name,B=Da(jt)}}else w([$e],!0),L=(await G$(Le,a.disabled,o,g,t.shouldUseNativeValidation))[$e],w([$e]),Ve(ce),Je&&(L?B=!1:(u.isValid||f.isValid)&&(B=await q(r,!0)));Je&&(Le._f.deps&&(!Array.isArray(Le._f.deps)||Le._f.deps.length>0)&&ie(Le._f.deps),M($e,B,L,ut))}},re=(pe,Ne)=>{if(Yt(n.errors,Ne)&&pe.focus)return pe.focus(),1},ie=async(pe,Ne={})=>{let $e,Je;const Le=Dv(pe);if(t.resolver){const Ve=await j(Go(pe)?pe:Le);$e=Da(Ve),Je=pe?!Le.some(_e=>Yt(Ve,_e)):$e}else pe?(Je=(await Promise.all(Le.map(async Ve=>{const _e=Yt(r,Ve);return await q(_e&&_e._f?{[Ve]:_e}:_e)}))).every(Boolean),!(!Je&&!n.isValid)&&v()):Je=$e=await q(r);return m.state.next({...!ql(pe)||(u.isValid||f.isValid)&&$e!==n.isValid?{}:{name:pe},...t.resolver||!pe?{isValid:$e}:{},errors:n.errors}),Ne.shouldFocus&&!Je&&Pv(r,re,pe?Le:a.mount),Je},Z=(pe,Ne)=>{let $e={...i.mount?o:s};return Ne&&($e=iJ(Ne.dirtyFields?n.dirtyFields:n.touchedFields,$e)),Go(pe)?$e:ql(pe)?Yt($e,pe):pe.map(Je=>Yt($e,Je))},te=(pe,Ne)=>({invalid:!!Yt((Ne||n).errors,pe),isDirty:!!Yt((Ne||n).dirtyFields,pe),error:Yt((Ne||n).errors,pe),isValidating:!!Yt(n.validatingFields,pe),isTouched:!!Yt((Ne||n).touchedFields,pe)}),oe=pe=>{pe&&Dv(pe).forEach(Ne=>ci(n.errors,Ne)),m.state.next({errors:pe?n.errors:{}})},Q=(pe,Ne,$e)=>{const Je=(Yt(r,pe,{_f:{}})._f||{}).ref,Le=Yt(n.errors,pe)||{},{ref:Ve,message:_e,type:Y,...L}=Le;_s(n.errors,pe,{...L,...Ne,ref:Je}),m.state.next({name:pe,errors:n.errors,isValid:!1}),$e&&$e.shouldFocus&&Je&&Je.focus&&Je.focus()},Te=(pe,Ne)=>hu(pe)?m.state.subscribe({next:$e=>"values"in $e&&pe(H(void 0,Ne),$e)}):H(pe,Ne,!0),ge=pe=>m.state.subscribe({next:Ne=>{rAe(pe.name,Ne.name,pe.exact)&&nAe(Ne,pe.formState||u,Pt,pe.reRenderRoot)&&pe.callback({values:{...o},...n,...Ne,defaultValues:s})}}).unsubscribe,Ce=pe=>(i.mount=!0,f={...f,...pe.formState},ge({...pe,formState:f})),he=(pe,Ne={})=>{for(const $e of pe?Dv(pe):a.mount)a.mount.delete($e),a.array.delete($e),Ne.keepValue||(ci(r,$e),ci(o,$e)),!Ne.keepError&&ci(n.errors,$e),!Ne.keepDirty&&ci(n.dirtyFields,$e),!Ne.keepTouched&&ci(n.touchedFields,$e),!Ne.keepIsValidating&&ci(n.validatingFields,$e),!t.shouldUnregister&&!Ne.keepDefaultValue&&ci(s,$e);m.state.next({values:Ai(o)}),m.state.next({...n,...Ne.keepDirty?{isDirty:z()}:{}}),!Ne.keepIsValid&&v()},Fe=({disabled:pe,name:Ne})=>{(Vl(pe)&&i.mount||pe||a.disabled.has(Ne))&&(pe?a.disabled.add(Ne):a.disabled.delete(Ne))},De=(pe,Ne={})=>{let $e=Yt(r,pe);const Je=Vl(Ne.disabled)||Vl(t.disabled);return _s(r,pe,{...$e||{},_f:{...$e&&$e._f?$e._f:{ref:{name:pe}},name:pe,mount:!0,...Ne}}),a.mount.add(pe),$e?Fe({disabled:Vl(Ne.disabled)?Ne.disabled:t.disabled,name:pe}):R(pe,!0,Ne.value),{...Je?{disabled:Ne.disabled||t.disabled}:{},...t.progressive?{required:!!Ne.required,min:Vy(Ne.min),max:Vy(Ne.max),minLength:Vy(Ne.minLength),maxLength:Vy(Ne.maxLength),pattern:Vy(Ne.pattern)}:{},name:pe,onChange:ee,onBlur:ee,ref:Le=>{if(Le){De(pe,Ne),$e=Yt(r,pe);const Ve=Go(Le.value)&&Le.querySelectorAll&&Le.querySelectorAll("input,select,textarea")[0]||Le,_e=Kke(Ve),Y=$e._f.refs||[];if(_e?Y.find(L=>L===Ve):Ve===$e._f.ref)return;_s(r,pe,{_f:{...$e._f,..._e?{refs:[...Y.filter(tk),Ve,...Array.isArray(Yt(s,pe))?[{}]:[]],ref:{type:Ve.type,name:pe}}:{ref:Ve}}}),R(pe,!1,void 0,Ve)}else $e=Yt(r,pe,{}),$e._f&&($e._f.mount=!1),(t.shouldUnregister||Ne.shouldUnregister)&&!(rJ(a.array,pe)&&i.action)&&a.unMount.add(pe)}}},Re=()=>t.shouldFocusError&&Pv(r,re,a.mount),tt=pe=>{Vl(pe)&&(m.state.next({disabled:pe}),Pv(r,(Ne,$e)=>{const Je=Yt(r,$e);Je&&(Ne.disabled=Je._f.disabled||pe,Array.isArray(Je._f.refs)&&Je._f.refs.forEach(Le=>{Le.disabled=Je._f.disabled||pe}))},0,!1))},fe=(pe,Ne)=>async $e=>{let Je;$e&&($e.preventDefault&&$e.preventDefault(),$e.persist&&$e.persist());let Le=Ai(o);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:Ve,values:_e}=await P();n.errors=Ve,Le=Ai(_e)}else await q(r);if(a.disabled.size)for(const Ve of a.disabled)ci(Le,Ve);if(ci(n.errors,"root"),Da(n.errors)){m.state.next({errors:{}});try{await pe(Le,$e)}catch(Ve){Je=Ve}}else Ne&&await Ne({...n.errors},$e),Re(),setTimeout(Re);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Da(n.errors)&&!Je,submitCount:n.submitCount+1,errors:n.errors}),Je)throw Je},nt=(pe,Ne={})=>{Yt(r,pe)&&(Go(Ne.defaultValue)?J(pe,Ai(Yt(s,pe))):(J(pe,Ne.defaultValue),_s(s,pe,Ai(Ne.defaultValue))),Ne.keepTouched||ci(n.touchedFields,pe),Ne.keepDirty||(ci(n.dirtyFields,pe),n.isDirty=Ne.defaultValue?z(pe,Ai(Yt(s,pe))):z()),Ne.keepError||(ci(n.errors,pe),u.isValid&&v()),m.state.next({...n}))},ot=(pe,Ne={})=>{const $e=pe?Ai(pe):s,Je=Ai($e),Le=Da(pe),Ve=Le?s:Je;if(Ne.keepDefaultValues||(s=$e),!Ne.keepValues){if(Ne.keepDirtyValues){const _e=new Set([...a.mount,...Object.keys(n1(s,o))]);for(const Y of Array.from(_e))Yt(n.dirtyFields,Y)?_s(Ve,Y,Yt(o,Y)):J(Y,Yt(Ve,Y))}else{if(M8&&Go(pe))for(const _e of a.mount){const Y=Yt(r,_e);if(Y&&Y._f){const L=Array.isArray(Y._f.refs)?Y._f.refs[0]:Y._f.ref;if(MS(L)){const B=L.closest("form");if(B){B.reset();break}}}}if(Ne.keepFieldsRef)for(const _e of a.mount)J(_e,Yt(Ve,_e));else r={}}o=t.shouldUnregister?Ne.keepDefaultValues?Ai(s):{}:Ai(Ve),m.array.next({values:{...Ve}}),m.state.next({values:{...Ve}})}a={mount:Ne.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!u.isValid||!!Ne.keepIsValid||!!Ne.keepDirtyValues||!t.shouldUnregister&&!Da(Ve),i.watch=!!t.shouldUnregister,i.action=!1,Ne.keepErrors||(n.errors={}),m.state.next({submitCount:Ne.keepSubmitCount?n.submitCount:0,isDirty:Le?!1:Ne.keepDirty?n.isDirty:!!(Ne.keepDefaultValues&&!fu(pe,s)),isSubmitted:Ne.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Le?{}:Ne.keepDirtyValues?Ne.keepDefaultValues&&o?n1(s,o):n.dirtyFields:Ne.keepDefaultValues&&pe?n1(s,pe):Ne.keepDirty?n.dirtyFields:{},touchedFields:Ne.keepTouched?n.touchedFields:{},errors:Ne.keepErrors?n.errors:{},isSubmitSuccessful:Ne.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Ht=(pe,Ne)=>ot(hu(pe)?pe(o):pe,Ne),qt=(pe,Ne={})=>{const $e=Yt(r,pe),Je=$e&&$e._f;if(Je){const Le=Je.refs?Je.refs[0]:Je.ref;Le.focus&&(Le.focus(),Ne.shouldSelect&&hu(Le.select)&&Le.select())}},Pt=pe=>{n={...n,...pe}},xt={control:{register:De,unregister:he,getFieldState:te,handleSubmit:fe,setError:Q,_subscribe:ge,_runSchema:P,_focusError:Re,_getWatch:H,_getDirty:z,_setValid:v,_setFieldArray:_,_setDisabledField:Fe,_setErrors:k,_getFieldArray:F,_reset:ot,_resetDefaultValues:()=>hu(t.defaultValues)&&t.defaultValues().then(pe=>{Ht(pe,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:U,_disableForm:tt,_subjects:m,_proxyFormState:u,get _fields(){return r},get _formValues(){return o},get _state(){return i},set _state(pe){i=pe},get _defaultValues(){return s},get _names(){return a},set _names(pe){a=pe},get _formState(){return n},get _options(){return t},set _options(pe){t={...t,...pe}}},subscribe:Ce,trigger:ie,register:De,handleSubmit:fe,watch:Te,setValue:J,getValues:Z,reset:Ht,resetField:nt,clearErrors:oe,unregister:he,setError:Q,setFocus:qt,getFieldState:te};return{...xt,formControl:xt}}function cAe(e={}){const t=Me.useRef(void 0),n=Me.useRef(void 0),[r,s]=Me.useState({isDirty:!1,isValidating:!1,isLoading:hu(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:hu(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!hu(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...a}=lAe(e);t.current={...a,formState:r}}const o=t.current.control;return o._options=e,L8(()=>{const i=o._subscribe({formState:o._proxyFormState,callback:()=>s({...o._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),o._formState.isReady=!0,i},[o]),Me.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),Me.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),Me.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),Me.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),Me.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==r.isDirty&&o._subjects.state.next({isDirty:i})}},[o,r.isDirty]),Me.useEffect(()=>{var i;e.values&&!fu(e.values,n.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),!((i=o._options.resetOptions)===null||i===void 0)&&i.keepIsValid||o._setValid(),n.current=e.values,s(a=>({...a}))):o._resetDefaultValues()},[o,e.values]),Me.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=sJ(r,o),t.current}const W$=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Yt(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},XN=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?W$(r.ref,n,e):r&&r.refs&&r.refs.forEach(s=>W$(s,n,e))}},Y$=(e,t)=>{t.shouldUseNativeValidation&&XN(e,t);const n={};for(const r in e){const s=Yt(t.fields,r),o=Object.assign(e[r]||{},{ref:s&&s.ref});if(uAe(t.names||Object.keys(e),r)){const i=Object.assign({},Yt(n,r));_s(i,"root",o),_s(n,r,i)}else _s(n,r,o)}return n},uAe=(e,t)=>{const n=K$(t);return e.some(r=>K$(r).match(`^${n}\\.\\d+`))};function K$(e){return e.replace(/\]|\[/g,"")}function it(e,t,n){function r(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in i.prototype)u in a||Object.defineProperty(a,u,{value:i.prototype[u].bind(a)});a._zod.constr=i,a._zod.def=l}const s=(n==null?void 0:n.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:e});function i(a){var l;const c=n!=null&&n.Parent?new o:this;r(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>{var l,c;return n!=null&&n.Parent&&a instanceof n.Parent?!0:(c=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:c.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class Cx extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const fJ={};function T0(e){return fJ}function hJ(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,s])=>t.indexOf(+r)===-1).map(([r,s])=>s)}function dAe(e,t){return typeof t=="bigint"?t.toString():t}function z8(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function j8(e){return e==null}function U8(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function fAe(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,o=Number.parseInt(e.toFixed(s).replace(".","")),i=Number.parseInt(t.toFixed(s).replace(".",""));return o%i/10**s}function ys(e,t,n){Object.defineProperty(e,t,{get(){{const r=n();return e[t]=r,r}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function H8(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function qy(e){return JSON.stringify(e)}const pJ=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function DS(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const hAe=z8(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function PS(e){if(DS(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(DS(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const pAe=new Set(["string","number","symbol"]);function Nw(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Dm(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(r._zod.parent=e),r}function kn(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function mAe(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const gAe={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function bAe(e,t){const n={},r=e._zod.def;for(const s in t){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(n[s]=r.shape[s])}return Dm(e,{...e._zod.def,shape:n,checks:[]})}function yAe(e,t){const n={...e._zod.def.shape},r=e._zod.def;for(const s in t){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete n[s]}return Dm(e,{...e._zod.def,shape:n,checks:[]})}function vAe(e,t){if(!PS(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return H8(this,"shape",r),r},checks:[]};return Dm(e,n)}function xAe(e,t){return Dm(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return H8(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function wAe(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const o in n){if(!(o in r))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(s[o]=e?new e({type:"optional",innerType:r[o]}):r[o])}else for(const o in r)s[o]=e?new e({type:"optional",innerType:r[o]}):r[o];return Dm(t,{...t._zod.def,shape:s,checks:[]})}function EAe(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const o in n){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(s[o]=new e({type:"nonoptional",innerType:r[o]}))}else for(const o in r)s[o]=new e({type:"nonoptional",innerType:r[o]});return Dm(t,{...t._zod.def,shape:s,checks:[]})}function Lv(e,t=0){var n;for(let r=t;r<e.issues.length;r++)if(((n=e.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Wp(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function w2(e){return typeof e=="string"?e:e==null?void 0:e.message}function C0(e,t,n){var s,o,i,a,l,c;const r={...e,path:e.path??[]};if(!e.message){const u=w2((i=(o=(s=e.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:i.call(o,e))??w2((a=t==null?void 0:t.error)==null?void 0:a.call(t,e))??w2((l=n.customError)==null?void 0:l.call(n,e))??w2((c=n.localeError)==null?void 0:c.call(n,e))??"Invalid input";r.message=u}return delete r.inst,delete r.continue,t!=null&&t.reportInput||delete r.input,r}function V8(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function kx(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const mJ=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,dAe,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},q8=it("$ZodError",mJ),hC=it("$ZodError",mJ,{Parent:Error});function _Ae(e,t=n=>n.message){const n={},r=[];for(const s of e.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:n}}function SAe(e,t){const n=t||function(o){return o.message},r={_errors:[]},s=o=>{for(const i of o.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>s({issues:a}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)r._errors.push(n(i));else{let a=r,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(i))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(e),r}const gJ=e=>(t,n,r,s)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise)throw new Cx;if(i.issues.length){const a=new((s==null?void 0:s.Err)??e)(i.issues.map(l=>C0(l,o,T0())));throw pJ(a,s==null?void 0:s.callee),a}return i.value},TAe=gJ(hC),bJ=e=>async(t,n,r,s)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){const a=new((s==null?void 0:s.Err)??e)(i.issues.map(l=>C0(l,o,T0())));throw pJ(a,s==null?void 0:s.callee),a}return i.value},CAe=bJ(hC),yJ=e=>(t,n,r)=>{const s=r?{...r,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new Cx;return o.issues.length?{success:!1,error:new(e??q8)(o.issues.map(i=>C0(i,s,T0())))}:{success:!0,data:o.value}},kAe=yJ(hC),vJ=e=>async(t,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(i=>C0(i,s,T0())))}:{success:!0,data:o.value}},AAe=vJ(hC),NAe=/^[cC][^\s-]{8,}$/,IAe=/^[0-9a-z]+$/,RAe=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,MAe=/^[0-9a-vA-V]{20}$/,OAe=/^[A-Za-z0-9]{27}$/,DAe=/^[a-zA-Z0-9_-]{21}$/,PAe=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,LAe=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Z$=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,$Ae=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,FAe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function BAe(){return new RegExp(FAe,"u")}const zAe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,jAe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,UAe=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,HAe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,VAe=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,xJ=/^[A-Za-z0-9_-]*$/,qAe=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,GAe=/^\+(?:[0-9]){6,14}[0-9]$/,wJ="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",WAe=new RegExp(`^${wJ}$`);function EJ(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function YAe(e){return new RegExp(`^${EJ(e)}$`)}function KAe(e){const t=EJ({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${wJ}T(?:${r})$`)}const ZAe=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},JAe=/^\d+$/,XAe=/^-?\d+(?:\.\d+)?/i,QAe=/true|false/i,eNe=/null/i,tNe=/^[^A-Z]*$/,nNe=/^[^a-z]*$/,vl=it("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),_J={number:"number",bigint:"bigint",object:"date"},SJ=it("$ZodCheckLessThan",(e,t)=>{vl.init(e,t);const n=_J[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,o=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),TJ=it("$ZodCheckGreaterThan",(e,t)=>{vl.init(e,t);const n=_J[typeof t.value];e._zod.onattach.push(r=>{const s=r._zod.bag,o=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),rNe=it("$ZodCheckMultipleOf",(e,t)=>{vl.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):fAe(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),sNe=it("$ZodCheckNumberFormat",(e,t)=>{var i;vl.init(e,t),t.format=t.format||"float64";const n=(i=t.format)==null?void 0:i.includes("int"),r=n?"int":"number",[s,o]=gAe[t.format];e._zod.onattach.push(a=>{const l=a._zod.bag;l.format=t.format,l.minimum=s,l.maximum=o,n&&(l.pattern=JAe)}),e._zod.check=a=>{const l=a.value;if(n){if(!Number.isInteger(l)){a.issues.push({expected:r,format:t.format,code:"invalid_type",input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?a.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):a.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}l<s&&a.issues.push({origin:"number",input:l,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),l>o&&a.issues.push({origin:"number",input:l,code:"too_big",maximum:o,inst:e})}}),oNe=it("$ZodCheckMaxLength",(e,t)=>{var n;vl.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!j8(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const s=r.value;if(s.length<=t.maximum)return;const i=V8(s);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),iNe=it("$ZodCheckMinLength",(e,t)=>{var n;vl.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!j8(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const s=r.value;if(s.length>=t.minimum)return;const i=V8(s);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),aNe=it("$ZodCheckLengthEquals",(e,t)=>{var n;vl.init(e,t),(n=e._zod.def).when??(n.when=r=>{const s=r.value;return!j8(s)&&s.length!==void 0}),e._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=r=>{const s=r.value,o=s.length;if(o===t.length)return;const i=V8(s),a=o>t.length;r.issues.push({origin:i,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),pC=it("$ZodCheckStringFormat",(e,t)=>{var n,r;vl.init(e,t),e._zod.onattach.push(s=>{const o=s._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),lNe=it("$ZodCheckRegex",(e,t)=>{pC.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),cNe=it("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=tNe),pC.init(e,t)}),uNe=it("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=nNe),pC.init(e,t)}),dNe=it("$ZodCheckIncludes",(e,t)=>{vl.init(e,t);const n=Nw(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),fNe=it("$ZodCheckStartsWith",(e,t)=>{vl.init(e,t);const n=new RegExp(`^${Nw(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),hNe=it("$ZodCheckEndsWith",(e,t)=>{vl.init(e,t);const n=new RegExp(`.*${Nw(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),pNe=it("$ZodCheckOverwrite",(e,t)=>{vl.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class mNe{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),s=Math.min(...r.map(i=>i.length-i.trimStart().length)),o=r.map(i=>i.slice(s)).map(i=>" ".repeat(this.indent*2)+i);for(const i of o)this.content.push(i)}compile(){const t=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new t(...n,s.join(`
`))}}const gNe={major:4,minor:0,patch:0},qs=it("$ZodType",(e,t)=>{var s;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=gNe;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const o of r)for(const i of o._zod.onattach)i(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,a,l)=>{let c=Lv(i),u;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(i))continue}else if(c)continue;const m=i.issues.length,g=f._zod.check(i);if(g instanceof Promise&&(l==null?void 0:l.async)===!1)throw new Cx;if(u||g instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await g,i.issues.length!==m&&(c||(c=Lv(i,m)))});else{if(i.issues.length===m)continue;c||(c=Lv(i,m))}}return u?u.then(()=>i):i};e._zod.run=(i,a)=>{const l=e._zod.parse(i,a);if(l instanceof Promise){if(a.async===!1)throw new Cx;return l.then(c=>o(c,r,a))}return o(l,r,a)}}e["~standard"]={validate:o=>{var i;try{const a=kAe(e,o);return a.success?{value:a.data}:{issues:(i=a.error)==null?void 0:i.issues}}catch{return AAe(e,o).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),G8=it("$ZodString",(e,t)=>{var n;qs.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??ZAe(e._zod.bag),e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),yo=it("$ZodStringFormat",(e,t)=>{pC.init(e,t),G8.init(e,t)}),bNe=it("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=LAe),yo.init(e,t)}),yNe=it("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Z$(r))}else t.pattern??(t.pattern=Z$());yo.init(e,t)}),vNe=it("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=$Ae),yo.init(e,t)}),xNe=it("$ZodURL",(e,t)=>{yo.init(e,t),e._zod.check=n=>{try{const r=n.value,s=new URL(r),o=s.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:qAe.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!r.endsWith("/")&&o.endsWith("/")?n.value=o.slice(0,-1):n.value=o;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),wNe=it("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=BAe()),yo.init(e,t)}),ENe=it("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=DAe),yo.init(e,t)}),_Ne=it("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=NAe),yo.init(e,t)}),SNe=it("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=IAe),yo.init(e,t)}),TNe=it("$ZodULID",(e,t)=>{t.pattern??(t.pattern=RAe),yo.init(e,t)}),CNe=it("$ZodXID",(e,t)=>{t.pattern??(t.pattern=MAe),yo.init(e,t)}),kNe=it("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=OAe),yo.init(e,t)}),ANe=it("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=KAe(t)),yo.init(e,t)}),NNe=it("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=WAe),yo.init(e,t)}),INe=it("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=YAe(t)),yo.init(e,t)}),RNe=it("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=PAe),yo.init(e,t)}),MNe=it("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=zAe),yo.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),ONe=it("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=jAe),yo.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),DNe=it("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=UAe),yo.init(e,t)}),PNe=it("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=HAe),yo.init(e,t),e._zod.check=n=>{const[r,s]=n.value.split("/");try{if(!s)throw new Error;const o=Number(s);if(`${o}`!==s)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function CJ(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const LNe=it("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=VAe),yo.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{CJ(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function $Ne(e){if(!xJ.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return CJ(n)}const FNe=it("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=xJ),yo.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{$Ne(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),BNe=it("$ZodE164",(e,t)=>{t.pattern??(t.pattern=GAe),yo.init(e,t)});function zNe(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const jNe=it("$ZodJWT",(e,t)=>{yo.init(e,t),e._zod.check=n=>{zNe(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),kJ=it("$ZodNumber",(e,t)=>{qs.init(e,t),e._zod.pattern=e._zod.bag.pattern??XAe,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...o?{received:o}:{}}),n}}),UNe=it("$ZodNumber",(e,t)=>{sNe.init(e,t),kJ.init(e,t)}),HNe=it("$ZodBoolean",(e,t)=>{qs.init(e,t),e._zod.pattern=QAe,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),n}}),VNe=it("$ZodNull",(e,t)=>{qs.init(e,t),e._zod.pattern=eNe,e._zod.values=new Set([null]),e._zod.parse=(n,r)=>{const s=n.value;return s===null||n.issues.push({expected:"null",code:"invalid_type",input:s,inst:e}),n}}),qNe=it("$ZodAny",(e,t)=>{qs.init(e,t),e._zod.parse=n=>n}),GNe=it("$ZodUnknown",(e,t)=>{qs.init(e,t),e._zod.parse=n=>n}),WNe=it("$ZodNever",(e,t)=>{qs.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function J$(e,t,n){e.issues.length&&t.issues.push(...Wp(n,e.issues)),t.value[n]=e.value}const YNe=it("$ZodArray",(e,t)=>{qs.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),n;n.value=Array(s.length);const o=[];for(let i=0;i<s.length;i++){const a=s[i],l=t.element._zod.run({value:a,issues:[]},r);l instanceof Promise?o.push(l.then(c=>J$(c,n,i))):J$(l,n,i)}return o.length?Promise.all(o).then(()=>n):n}});function E2(e,t,n){e.issues.length&&t.issues.push(...Wp(n,e.issues)),t.value[n]=e.value}function X$(e,t,n,r){e.issues.length?r[n]===void 0?n in r?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...Wp(n,e.issues)):e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const KNe=it("$ZodObject",(e,t)=>{qs.init(e,t);const n=z8(()=>{const f=Object.keys(t.shape);for(const g of f)if(!(t.shape[g]instanceof qs))throw new Error(`Invalid element at key "${g}": expected a Zod schema`);const m=mAe(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});ys(e._zod,"propValues",()=>{const f=t.shape,m={};for(const g in f){const y=f[g]._zod;if(y.values){m[g]??(m[g]=new Set);for(const v of y.values)m[g].add(v)}}return m});const r=f=>{const m=new mNe(["shape","payload","ctx"]),g=n.value,y=S=>{const k=qy(S);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`};m.write("const input = payload.value;");const v=Object.create(null);let w=0;for(const S of g.keys)v[S]=`key_${w++}`;m.write("const newResult = {}");for(const S of g.keys)if(g.optionalKeys.has(S)){const k=v[S];m.write(`const ${k} = ${y(S)};`);const R=qy(S);m.write(`
        if (${k}.issues.length) {
          if (input[${R}] === undefined) {
            if (${R} in input) {
              newResult[${R}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${k}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${R}, ...iss.path] : [${R}],
              }))
            );
          }
        } else if (${k}.value === undefined) {
          if (${R} in input) newResult[${R}] = undefined;
        } else {
          newResult[${R}] = ${k}.value;
        }
        `)}else{const k=v[S];m.write(`const ${k} = ${y(S)};`),m.write(`
          if (${k}.issues.length) payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${qy(S)}, ...iss.path] : [${qy(S)}]
          })));`),m.write(`newResult[${qy(S)}] = ${k}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const _=m.compile();return(S,k)=>_(f,S,k)};let s;const o=DS,i=!fJ.jitless,l=i&&hAe.value,c=t.catchall;let u;e._zod.parse=(f,m)=>{u??(u=n.value);const g=f.value;if(!o(g))return f.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),f;const y=[];if(i&&l&&(m==null?void 0:m.async)===!1&&m.jitless!==!0)s||(s=r(t.shape)),f=s(f,m);else{f.value={};const k=u.shape;for(const R of u.keys){const O=k[R],M=O._zod.run({value:g[R],issues:[]},m),P=O._zod.optin==="optional"&&O._zod.optout==="optional";M instanceof Promise?y.push(M.then(j=>P?X$(j,f,R,g):E2(j,f,R))):P?X$(M,f,R,g):E2(M,f,R)}}if(!c)return y.length?Promise.all(y).then(()=>f):f;const v=[],w=u.keySet,_=c._zod,S=_.def.type;for(const k of Object.keys(g)){if(w.has(k))continue;if(S==="never"){v.push(k);continue}const R=_.run({value:g[k],issues:[]},m);R instanceof Promise?y.push(R.then(O=>E2(O,f,k))):E2(R,f,k)}return v.length&&f.issues.push({code:"unrecognized_keys",keys:v,input:g,inst:e}),y.length?Promise.all(y).then(()=>f):f}});function Q$(e,t,n,r){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(o=>C0(o,r,T0())))}),t}const AJ=it("$ZodUnion",(e,t)=>{qs.init(e,t),ys(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),ys(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),ys(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),ys(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>U8(r.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let s=!1;const o=[];for(const i of t.options){const a=i._zod.run({value:n.value,issues:[]},r);if(a instanceof Promise)o.push(a),s=!0;else{if(a.issues.length===0)return a;o.push(a)}}return s?Promise.all(o).then(i=>Q$(i,n,e,r)):Q$(o,n,e,r)}}),ZNe=it("$ZodDiscriminatedUnion",(e,t)=>{AJ.init(e,t);const n=e._zod.parse;ys(e._zod,"propValues",()=>{const s={};for(const o of t.options){const i=o._zod.propValues;if(!i||Object.keys(i).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(const[a,l]of Object.entries(i)){s[a]||(s[a]=new Set);for(const c of l)s[a].add(c)}}return s});const r=z8(()=>{const s=t.options,o=new Map;for(const i of s){const a=i._zod.propValues[t.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(const l of a){if(o.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);o.set(l,i)}}return o});e._zod.parse=(s,o)=>{const i=s.value;if(!DS(i))return s.issues.push({code:"invalid_type",expected:"object",input:i,inst:e}),s;const a=r.value.get(i==null?void 0:i[t.discriminator]);return a?a._zod.run(s,o):t.unionFallback?n(s,o):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:i,path:[t.discriminator],inst:e}),s)}}),JNe=it("$ZodIntersection",(e,t)=>{qs.init(e,t),e._zod.parse=(n,r)=>{const s=n.value,o=t.left._zod.run({value:s,issues:[]},r),i=t.right._zod.run({value:s,issues:[]},r);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([l,c])=>eF(n,l,c)):eF(n,o,i)}});function QN(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(PS(e)&&PS(t)){const n=Object.keys(t),r=Object.keys(e).filter(o=>n.indexOf(o)!==-1),s={...e,...t};for(const o of r){const i=QN(e[o],t[o]);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};s[o]=i.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r],i=QN(s,o);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function eF(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Lv(e))return e;const r=QN(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const XNe=it("$ZodRecord",(e,t)=>{qs.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!PS(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),n;const o=[];if(t.keyType._zod.values){const i=t.keyType._zod.values;n.value={};for(const l of i)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const c=t.valueType._zod.run({value:s[l],issues:[]},r);c instanceof Promise?o.push(c.then(u=>{u.issues.length&&n.issues.push(...Wp(l,u.issues)),n.value[l]=u.value})):(c.issues.length&&n.issues.push(...Wp(l,c.issues)),n.value[l]=c.value)}let a;for(const l in s)i.has(l)||(a=a??[],a.push(l));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:a})}else{n.value={};for(const i of Reflect.ownKeys(s)){if(i==="__proto__")continue;const a=t.keyType._zod.run({value:i,issues:[]},r);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(c=>C0(c,r,T0())),input:i,path:[i],inst:e}),n.value[a.value]=a.value;continue}const l=t.valueType._zod.run({value:s[i],issues:[]},r);l instanceof Promise?o.push(l.then(c=>{c.issues.length&&n.issues.push(...Wp(i,c.issues)),n.value[a.value]=c.value})):(l.issues.length&&n.issues.push(...Wp(i,l.issues)),n.value[a.value]=l.value)}}return o.length?Promise.all(o).then(()=>n):n}}),QNe=it("$ZodEnum",(e,t)=>{qs.init(e,t);const n=hJ(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(r=>pAe.has(typeof r)).map(r=>typeof r=="string"?Nw(r):r.toString()).join("|")})$`),e._zod.parse=(r,s)=>{const o=r.value;return e._zod.values.has(o)||r.issues.push({code:"invalid_value",values:n,input:o,inst:e}),r}}),e6e=it("$ZodLiteral",(e,t)=>{qs.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?Nw(n):n?n.toString():String(n)).join("|")})$`),e._zod.parse=(n,r)=>{const s=n.value;return e._zod.values.has(s)||n.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),n}}),t6e=it("$ZodTransform",(e,t)=>{qs.init(e,t),e._zod.parse=(n,r)=>{const s=t.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(n.value=i,n));if(s instanceof Promise)throw new Cx;return n.value=s,n}}),n6e=it("$ZodOptional",(e,t)=>{qs.init(e,t),e._zod.optin="optional",e._zod.optout="optional",ys(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),ys(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${U8(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,r):n.value===void 0?n:t.innerType._zod.run(n,r)}),r6e=it("$ZodNullable",(e,t)=>{qs.init(e,t),ys(e._zod,"optin",()=>t.innerType._zod.optin),ys(e._zod,"optout",()=>t.innerType._zod.optout),ys(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${U8(n.source)}|null)$`):void 0}),ys(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),s6e=it("$ZodDefault",(e,t)=>{qs.init(e,t),e._zod.optin="optional",ys(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>tF(o,t)):tF(s,t)}});function tF(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const o6e=it("$ZodPrefault",(e,t)=>{qs.init(e,t),e._zod.optin="optional",ys(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),i6e=it("$ZodNonOptional",(e,t)=>{qs.init(e,t),ys(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>nF(o,e)):nF(s,e)}});function nF(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const a6e=it("$ZodCatch",(e,t)=>{qs.init(e,t),e._zod.optin="optional",ys(e._zod,"optout",()=>t.innerType._zod.optout),ys(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(i=>C0(i,r,T0()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(o=>C0(o,r,T0()))},input:n.value}),n.issues=[]),n)}}),l6e=it("$ZodPipe",(e,t)=>{qs.init(e,t),ys(e._zod,"values",()=>t.in._zod.values),ys(e._zod,"optin",()=>t.in._zod.optin),ys(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(n,r)=>{const s=t.in._zod.run(n,r);return s instanceof Promise?s.then(o=>rF(o,t,r)):rF(s,t,r)}});function rF(e,t,n){return Lv(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const c6e=it("$ZodReadonly",(e,t)=>{qs.init(e,t),ys(e._zod,"propValues",()=>t.innerType._zod.propValues),ys(e._zod,"values",()=>t.innerType._zod.values),ys(e._zod,"optin",()=>t.innerType._zod.optin),ys(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(sF):sF(s)}});function sF(e){return e.value=Object.freeze(e.value),e}const u6e=it("$ZodLazy",(e,t)=>{qs.init(e,t),ys(e._zod,"innerType",()=>t.getter()),ys(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),ys(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),ys(e._zod,"optin",()=>e._zod.innerType._zod.optin),ys(e._zod,"optout",()=>e._zod.innerType._zod.optout),e._zod.parse=(n,r)=>e._zod.innerType._zod.run(n,r)}),d6e=it("$ZodCustom",(e,t)=>{vl.init(e,t),qs.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,s=t.fn(r);if(s instanceof Promise)return s.then(o=>oF(o,n,r,e));oF(s,n,r,e)}});function oF(e,t,n,r){if(!e){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),t.issues.push(kx(s))}}class NJ{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function f6e(){return new NJ}const pv=f6e();function h6e(e,t){return new e({type:"string",...kn(t)})}function p6e(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...kn(t)})}function iF(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...kn(t)})}function m6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...kn(t)})}function g6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...kn(t)})}function b6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...kn(t)})}function y6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...kn(t)})}function v6e(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...kn(t)})}function x6e(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...kn(t)})}function w6e(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...kn(t)})}function E6e(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...kn(t)})}function _6e(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...kn(t)})}function S6e(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...kn(t)})}function T6e(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...kn(t)})}function C6e(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...kn(t)})}function k6e(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...kn(t)})}function A6e(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...kn(t)})}function N6e(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...kn(t)})}function I6e(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...kn(t)})}function R6e(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...kn(t)})}function M6e(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...kn(t)})}function O6e(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...kn(t)})}function D6e(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...kn(t)})}function P6e(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...kn(t)})}function L6e(e,t){return new e({type:"string",format:"date",check:"string_format",...kn(t)})}function $6e(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...kn(t)})}function F6e(e,t){return new e({type:"string",format:"duration",check:"string_format",...kn(t)})}function B6e(e,t){return new e({type:"number",checks:[],...kn(t)})}function z6e(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...kn(t)})}function j6e(e,t){return new e({type:"boolean",...kn(t)})}function U6e(e,t){return new e({type:"null",...kn(t)})}function H6e(e){return new e({type:"any"})}function V6e(e){return new e({type:"unknown"})}function q6e(e,t){return new e({type:"never",...kn(t)})}function aF(e,t){return new SJ({check:"less_than",...kn(t),value:e,inclusive:!1})}function nk(e,t){return new SJ({check:"less_than",...kn(t),value:e,inclusive:!0})}function lF(e,t){return new TJ({check:"greater_than",...kn(t),value:e,inclusive:!1})}function rk(e,t){return new TJ({check:"greater_than",...kn(t),value:e,inclusive:!0})}function cF(e,t){return new rNe({check:"multiple_of",...kn(t),value:e})}function IJ(e,t){return new oNe({check:"max_length",...kn(t),maximum:e})}function LS(e,t){return new iNe({check:"min_length",...kn(t),minimum:e})}function RJ(e,t){return new aNe({check:"length_equals",...kn(t),length:e})}function G6e(e,t){return new lNe({check:"string_format",format:"regex",...kn(t),pattern:e})}function W6e(e){return new cNe({check:"string_format",format:"lowercase",...kn(e)})}function Y6e(e){return new uNe({check:"string_format",format:"uppercase",...kn(e)})}function K6e(e,t){return new dNe({check:"string_format",format:"includes",...kn(t),includes:e})}function Z6e(e,t){return new fNe({check:"string_format",format:"starts_with",...kn(t),prefix:e})}function J6e(e,t){return new hNe({check:"string_format",format:"ends_with",...kn(t),suffix:e})}function Iw(e){return new pNe({check:"overwrite",tx:e})}function X6e(e){return Iw(t=>t.normalize(e))}function Q6e(){return Iw(e=>e.trim())}function eIe(){return Iw(e=>e.toLowerCase())}function tIe(){return Iw(e=>e.toUpperCase())}function nIe(e,t,n){return new e({type:"array",element:t,...kn(n)})}function rIe(e,t,n){const r=kn(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}function sIe(e,t,n){return new e({type:"custom",check:"custom",fn:t,...kn(n)})}class uF{constructor(t){this.counter=0,this.metadataRegistry=(t==null?void 0:t.metadata)??pv,this.target=(t==null?void 0:t.target)??"draft-2020-12",this.unrepresentable=(t==null?void 0:t.unrepresentable)??"throw",this.override=(t==null?void 0:t.override)??(()=>{}),this.io=(t==null?void 0:t.io)??"output",this.seen=new Map}process(t,n={path:[],schemaPath:[]}){var f,m,g;var r;const s=t._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},i=this.seen.get(t);if(i)return i.count++,n.schemaPath.includes(t)&&(i.cycle=n.path),i.schema;const a={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(t,a);const l=(m=(f=t._zod).toJSONSchema)==null?void 0:m.call(f);if(l)a.schema=l;else{const y={...n,schemaPath:[...n.schemaPath,t],path:n.path},v=t._zod.parent;if(v)a.ref=v,this.process(v,y),this.seen.get(v).isParent=!0;else{const w=a.schema;switch(s.type){case"string":{const _=w;_.type="string";const{minimum:S,maximum:k,format:R,patterns:O,contentEncoding:M}=t._zod.bag;if(typeof S=="number"&&(_.minLength=S),typeof k=="number"&&(_.maxLength=k),R&&(_.format=o[R]??R,_.format===""&&delete _.format),M&&(_.contentEncoding=M),O&&O.size>0){const P=[...O];P.length===1?_.pattern=P[0].source:P.length>1&&(a.schema.allOf=[...P.map(j=>({...this.target==="draft-7"?{type:"string"}:{},pattern:j.source}))])}break}case"number":{const _=w,{minimum:S,maximum:k,format:R,multipleOf:O,exclusiveMaximum:M,exclusiveMinimum:P}=t._zod.bag;typeof R=="string"&&R.includes("int")?_.type="integer":_.type="number",typeof P=="number"&&(_.exclusiveMinimum=P),typeof S=="number"&&(_.minimum=S,typeof P=="number"&&(P>=S?delete _.minimum:delete _.exclusiveMinimum)),typeof M=="number"&&(_.exclusiveMaximum=M),typeof k=="number"&&(_.maximum=k,typeof M=="number"&&(M<=k?delete _.maximum:delete _.exclusiveMaximum)),typeof O=="number"&&(_.multipleOf=O);break}case"boolean":{const _=w;_.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{w.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{w.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const _=w,{minimum:S,maximum:k}=t._zod.bag;typeof S=="number"&&(_.minItems=S),typeof k=="number"&&(_.maxItems=k),_.type="array",_.items=this.process(s.element,{...y,path:[...y.path,"items"]});break}case"object":{const _=w;_.type="object",_.properties={};const S=s.shape;for(const O in S)_.properties[O]=this.process(S[O],{...y,path:[...y.path,"properties",O]});const k=new Set(Object.keys(S)),R=new Set([...k].filter(O=>{const M=s.shape[O]._zod;return this.io==="input"?M.optin===void 0:M.optout===void 0}));R.size>0&&(_.required=Array.from(R)),((g=s.catchall)==null?void 0:g._zod.def.type)==="never"?_.additionalProperties=!1:s.catchall?s.catchall&&(_.additionalProperties=this.process(s.catchall,{...y,path:[...y.path,"additionalProperties"]})):this.io==="output"&&(_.additionalProperties=!1);break}case"union":{const _=w;_.anyOf=s.options.map((S,k)=>this.process(S,{...y,path:[...y.path,"anyOf",k]}));break}case"intersection":{const _=w,S=this.process(s.left,{...y,path:[...y.path,"allOf",0]}),k=this.process(s.right,{...y,path:[...y.path,"allOf",1]}),R=M=>"allOf"in M&&Object.keys(M).length===1,O=[...R(S)?S.allOf:[S],...R(k)?k.allOf:[k]];_.allOf=O;break}case"tuple":{const _=w;_.type="array";const S=s.items.map((O,M)=>this.process(O,{...y,path:[...y.path,"prefixItems",M]}));if(this.target==="draft-2020-12"?_.prefixItems=S:_.items=S,s.rest){const O=this.process(s.rest,{...y,path:[...y.path,"items"]});this.target==="draft-2020-12"?_.items=O:_.additionalItems=O}s.rest&&(_.items=this.process(s.rest,{...y,path:[...y.path,"items"]}));const{minimum:k,maximum:R}=t._zod.bag;typeof k=="number"&&(_.minItems=k),typeof R=="number"&&(_.maxItems=R);break}case"record":{const _=w;_.type="object",_.propertyNames=this.process(s.keyType,{...y,path:[...y.path,"propertyNames"]}),_.additionalProperties=this.process(s.valueType,{...y,path:[...y.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const _=w,S=hJ(s.entries);S.every(k=>typeof k=="number")&&(_.type="number"),S.every(k=>typeof k=="string")&&(_.type="string"),_.enum=S;break}case"literal":{const _=w,S=[];for(const k of s.values)if(k===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof k=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");S.push(Number(k))}else S.push(k);if(S.length!==0)if(S.length===1){const k=S[0];_.type=k===null?"null":typeof k,_.const=k}else S.every(k=>typeof k=="number")&&(_.type="number"),S.every(k=>typeof k=="string")&&(_.type="string"),S.every(k=>typeof k=="boolean")&&(_.type="string"),S.every(k=>k===null)&&(_.type="null"),_.enum=S;break}case"file":{const _=w,S={type:"string",format:"binary",contentEncoding:"binary"},{minimum:k,maximum:R,mime:O}=t._zod.bag;k!==void 0&&(S.minLength=k),R!==void 0&&(S.maxLength=R),O?O.length===1?(S.contentMediaType=O[0],Object.assign(_,S)):_.anyOf=O.map(M=>({...S,contentMediaType:M})):Object.assign(_,S);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const _=this.process(s.innerType,y);w.anyOf=[_,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,y),a.ref=s.innerType;break}case"success":{const _=w;_.type="boolean";break}case"default":{this.process(s.innerType,y),a.ref=s.innerType,w.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,y),a.ref=s.innerType,this.io==="input"&&(w._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,y),a.ref=s.innerType;let _;try{_=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}w.default=_;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const _=w,S=t._zod.pattern;if(!S)throw new Error("Pattern not found in template literal");_.type="string",_.pattern=S.source;break}case"pipe":{const _=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(_,y),a.ref=_;break}case"readonly":{this.process(s.innerType,y),a.ref=s.innerType,w.readOnly=!0;break}case"promise":{this.process(s.innerType,y),a.ref=s.innerType;break}case"optional":{this.process(s.innerType,y),a.ref=s.innerType;break}case"lazy":{const _=t._zod.innerType;this.process(_,y),a.ref=_;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const c=this.metadataRegistry.get(t);return c&&Object.assign(a.schema,c),this.io==="input"&&ki(t)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(t).schema}emit(t,n){var u,f,m,g,y,v;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},s=this.seen.get(t);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=w=>{var O;const _=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const M=(O=r.external.registry.get(w[0]))==null?void 0:O.id,P=r.external.uri??(q=>q);if(M)return{ref:P(M)};const j=w[1].defId??w[1].schema.id??`schema${this.counter++}`;return w[1].defId=j,{defId:j,ref:`${P("__shared")}#/${_}/${j}`}}if(w[1]===s)return{ref:"#"};const k=`#/${_}/`,R=w[1].schema.id??`__schema${this.counter++}`;return{defId:R,ref:k+R}},i=w=>{if(w[1].schema.$ref)return;const _=w[1],{ref:S,defId:k}=o(w);_.def={..._.schema},k&&(_.defId=k);const R=_.schema;for(const O in R)delete R[O];R.$ref=S};if(r.cycles==="throw")for(const w of this.seen.entries()){const _=w[1];if(_.cycle)throw new Error(`Cycle detected: #/${(u=_.cycle)==null?void 0:u.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const w of this.seen.entries()){const _=w[1];if(t===w[0]){i(w);continue}if(r.external){const k=(f=r.external.registry.get(w[0]))==null?void 0:f.id;if(t!==w[0]&&k){i(w);continue}}if((m=this.metadataRegistry.get(w[0]))==null?void 0:m.id){i(w);continue}if(_.cycle){i(w);continue}if(_.count>1&&r.reused==="ref"){i(w);continue}}const a=(w,_)=>{const S=this.seen.get(w),k=S.def??S.schema,R={...k};if(S.ref===null)return;const O=S.ref;if(S.ref=null,O){a(O,_);const M=this.seen.get(O).schema;M.$ref&&_.target==="draft-7"?(k.allOf=k.allOf??[],k.allOf.push(M)):(Object.assign(k,M),Object.assign(k,R))}S.isParent||this.override({zodSchema:w,jsonSchema:k,path:S.path??[]})};for(const w of[...this.seen.entries()].reverse())a(w[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(g=r.external)!=null&&g.uri){const w=(y=r.external.registry.get(t))==null?void 0:y.id;if(!w)throw new Error("Schema is missing an `id` property");l.$id=r.external.uri(w)}Object.assign(l,s.def);const c=((v=r.external)==null?void 0:v.defs)??{};for(const w of this.seen.entries()){const _=w[1];_.def&&_.defId&&(c[_.defId]=_.def)}r.external||Object.keys(c).length>0&&(this.target==="draft-2020-12"?l.$defs=c:l.definitions=c);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function oIe(e,t){if(e instanceof NJ){const r=new uF(t),s={};for(const a of e._idmap.entries()){const[l,c]=a;r.process(c)}const o={},i={registry:e,uri:t==null?void 0:t.uri,defs:s};for(const a of e._idmap.entries()){const[l,c]=a;o[l]=r.emit(c,{...t,external:i})}if(Object.keys(s).length>0){const a=r.target==="draft-2020-12"?"$defs":"definitions";o.__shared={[a]:s}}return{schemas:o}}const n=new uF(t);return n.process(e),n.emit(e,t)}function ki(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const s=e._zod.def;switch(s.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return ki(s.element,n);case"object":{for(const o in s.shape)if(ki(s.shape[o],n))return!0;return!1}case"union":{for(const o of s.options)if(ki(o,n))return!0;return!1}case"intersection":return ki(s.left,n)||ki(s.right,n);case"tuple":{for(const o of s.items)if(ki(o,n))return!0;return!!(s.rest&&ki(s.rest,n))}case"record":return ki(s.keyType,n)||ki(s.valueType,n);case"map":return ki(s.keyType,n)||ki(s.valueType,n);case"set":return ki(s.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return ki(s.innerType,n);case"lazy":return ki(s.getter(),n);case"default":return ki(s.innerType,n);case"prefault":return ki(s.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return ki(s.in,n)||ki(s.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${s.type}`)}function dF(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}function iIe(e,t){for(var n={};e.length;){var r=e[0],s=r.code,o=r.message,i=r.path.join(".");if(!n[i])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[i]={message:a.message,type:a.code}}else n[i]={message:o,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return e.push(f)})}),t){var l=n[i].types,c=l&&l[r.code];n[i]=$8(i,t,n,s,c?[].concat(c,r.message):r.message)}e.shift()}return n}function aIe(e,t){for(var n={};e.length;){var r=e[0],s=r.code,o=r.message,i=r.path.join(".");if(!n[i])if(r.code==="invalid_union"&&r.errors.length>0){var a=r.errors[0][0];n[i]={message:a.message,type:a.code}}else n[i]={message:o,type:s};if(r.code==="invalid_union"&&r.errors.forEach(function(u){return u.forEach(function(f){return e.push(f)})}),t){var l=n[i].types,c=l&&l[r.code];n[i]=$8(i,t,n,s,c?[].concat(c,r.message):r.message)}e.shift()}return n}function lIe(e,t,n){if(n===void 0&&(n={}),(function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def})(e))return function(r,s,o){try{return Promise.resolve(dF(function(){return Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(i){return o.shouldUseNativeValidation&&XN({},o),{errors:{},values:n.raw?Object.assign({},r):i}})},function(i){if((function(a){return Array.isArray(a==null?void 0:a.issues)})(i))return{values:{},errors:Y$(iIe(i.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw i}))}catch(i){return Promise.reject(i)}};if((function(r){return"_zod"in r&&typeof r._zod=="object"})(e))return function(r,s,o){try{return Promise.resolve(dF(function(){return Promise.resolve((n.mode==="sync"?TAe:CAe)(e,r,t)).then(function(i){return o.shouldUseNativeValidation&&XN({},o),{errors:{},values:n.raw?Object.assign({},r):i}})},function(i){if((function(a){return a instanceof q8})(i))return{values:{},errors:Y$(aIe(i.issues,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw i}))}catch(i){return Promise.reject(i)}};throw new Error("Invalid input: not a Zod schema")}var is;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const o={};for(const i of s)o[i]=i;return o},e.getValidEnumValues=s=>{const o=e.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),i={};for(const a of o)i[a]=s[a];return e.objectValues(i)},e.objectValues=s=>e.objectKeys(s).map(function(o){return s[o]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&o.push(i);return o},e.find=(s,o)=>{for(const i of s)if(o(i))return i},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(o)}e.joinValues=r,e.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(is||(is={}));var fF;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(fF||(fF={}));const vn=is.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),n0=e=>{switch(typeof e){case"undefined":return vn.undefined;case"string":return vn.string;case"number":return Number.isNaN(e)?vn.nan:vn.number;case"boolean":return vn.boolean;case"function":return vn.function;case"bigint":return vn.bigint;case"symbol":return vn.symbol;case"object":return Array.isArray(e)?vn.array:e===null?vn.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?vn.promise:typeof Map<"u"&&e instanceof Map?vn.map:typeof Set<"u"&&e instanceof Set?vn.set:typeof Date<"u"&&e instanceof Date?vn.date:vn.object;default:return vn.unknown}},Lt=is.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Yf extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(o){return o.message},r={_errors:[]},s=o=>{for(const i of o.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)r._errors.push(n(i));else{let a=r,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(i))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(t){if(!(t instanceof Yf))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,is.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const o=s.path[0];n[o]=n[o]||[],n[o].push(t(s))}else r.push(t(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Yf.create=e=>new Yf(e);const e6=(e,t)=>{let n;switch(e.code){case Lt.invalid_type:e.received===vn.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Lt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,is.jsonStringifyReplacer)}`;break;case Lt.unrecognized_keys:n=`Unrecognized key(s) in object: ${is.joinValues(e.keys,", ")}`;break;case Lt.invalid_union:n="Invalid input";break;case Lt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${is.joinValues(e.options)}`;break;case Lt.invalid_enum_value:n=`Invalid enum value. Expected ${is.joinValues(e.options)}, received '${e.received}'`;break;case Lt.invalid_arguments:n="Invalid function arguments";break;case Lt.invalid_return_type:n="Invalid function return type";break;case Lt.invalid_date:n="Invalid date";break;case Lt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:is.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Lt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Lt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Lt.custom:n="Invalid input";break;case Lt.invalid_intersection_types:n="Intersection results could not be merged";break;case Lt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Lt.not_finite:n="Number must be finite";break;default:n=t.defaultError,is.assertNever(e)}return{message:n}};let cIe=e6;function uIe(){return cIe}const dIe=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,o=[...n,...s.path||[]],i={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(i,{data:t,defaultError:a}).message;return{...s,path:o,message:a}};function nn(e,t){const n=uIe(),r=dIe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===e6?void 0:e6].filter(s=>!!s)});e.common.issues.push(r)}class tc{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return lr;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n){const o=await s.key,i=await s.value;r.push({key:o,value:i})}return tc.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:o,value:i}=s;if(o.status==="aborted"||i.status==="aborted")return lr;o.status==="dirty"&&t.dirty(),i.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(r[o.value]=i.value)}return{status:t.value,value:r}}}const lr=Object.freeze({status:"aborted"}),mv=e=>({status:"dirty",value:e}),Fc=e=>({status:"valid",value:e}),hF=e=>e.status==="aborted",pF=e=>e.status==="dirty",Z1=e=>e.status==="valid",$S=e=>typeof Promise<"u"&&e instanceof Promise;var Sn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Sn||(Sn={}));class k0{constructor(t,n,r,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const mF=(e,t)=>{if(Z1(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Yf(e.common.issues);return this._error=n,this._error}}};function Ir(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(i,a)=>{const{message:l}=e;return i.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:s}}let Jr=class{get description(){return this._def.description}_getType(t){return n0(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:n0(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new tc,ctx:{common:t.parent.common,data:t.data,parsedType:n0(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if($S(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:n0(t)},s=this._parseSync({data:t,path:r.path,parent:r});return mF(r,s)}"~validate"(t){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:n0(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:n});return Z1(o)?{value:o.value}:{issues:n.common.issues}}catch(o){(s=(r=o==null?void 0:o.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(o=>Z1(o)?{value:o.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:n0(t)},s=this._parse({data:t,path:r.path,parent:r}),o=await($S(s)?s:Promise.resolve(s));return mF(r,o)}refine(t,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,o)=>{const i=t(s),a=()=>o.addIssue({code:Lt.custom,...r(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(l=>l?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(t){return new X1({schema:this,typeName:Bt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return b0.create(this,this._def)}nullable(){return Q1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return J1.create(this)}promise(){return zS.create(this,this._def)}or(t){return FS.create([this,t],this._def)}and(t){return BS.create(this,t,this._def)}transform(t){return new X1({...Ir(this._def),schema:this,typeName:Bt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new a6({...Ir(this._def),innerType:this,defaultValue:n,typeName:Bt.ZodDefault})}brand(){return new DIe({typeName:Bt.ZodBranded,type:this,...Ir(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new l6({...Ir(this._def),innerType:this,catchValue:n,typeName:Bt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Y8.create(this,t)}readonly(){return c6.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const fIe=/^c[^\s-]{8,}$/i,hIe=/^[0-9a-z]+$/,pIe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,mIe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,gIe=/^[a-z0-9_-]{21}$/i,bIe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,yIe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vIe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xIe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let sk;const wIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,EIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,_Ie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,SIe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,TIe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,CIe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,MJ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",kIe=new RegExp(`^${MJ}$`);function OJ(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function AIe(e){return new RegExp(`^${OJ(e)}$`)}function NIe(e){let t=`${MJ}T${OJ(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function IIe(e,t){return!!((t==="v4"||!t)&&wIe.test(e)||(t==="v6"||!t)&&_Ie.test(e))}function RIe(e,t){if(!bIe.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function MIe(e,t){return!!((t==="v4"||!t)&&EIe.test(e)||(t==="v6"||!t)&&SIe.test(e))}let t6=class gv extends Jr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==vn.string){const o=this._getOrReturnCtx(t);return nn(o,{code:Lt.invalid_type,expected:vn.string,received:o.parsedType}),lr}const r=new tc;let s;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(s=this._getOrReturnCtx(t,s),nn(s,{code:Lt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")t.data.length>o.value&&(s=this._getOrReturnCtx(t,s),nn(s,{code:Lt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const i=t.data.length>o.value,a=t.data.length<o.value;(i||a)&&(s=this._getOrReturnCtx(t,s),i?nn(s,{code:Lt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&nn(s,{code:Lt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")vIe.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"email",code:Lt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")sk||(sk=new RegExp(xIe,"u")),sk.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"emoji",code:Lt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")mIe.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"uuid",code:Lt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")gIe.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"nanoid",code:Lt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")fIe.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"cuid",code:Lt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")hIe.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"cuid2",code:Lt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")pIe.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"ulid",code:Lt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),nn(s,{validation:"url",code:Lt.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"regex",code:Lt.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(t,s),nn(s,{code:Lt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(s=this._getOrReturnCtx(t,s),nn(s,{code:Lt.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(s=this._getOrReturnCtx(t,s),nn(s,{code:Lt.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?NIe(o).test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{code:Lt.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?kIe.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{code:Lt.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?AIe(o).test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{code:Lt.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?yIe.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"duration",code:Lt.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?IIe(t.data,o.version)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"ip",code:Lt.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?RIe(t.data,o.alg)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"jwt",code:Lt.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?MIe(t.data,o.version)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"cidr",code:Lt.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?TIe.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"base64",code:Lt.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?CIe.test(t.data)||(s=this._getOrReturnCtx(t,s),nn(s,{validation:"base64url",code:Lt.invalid_string,message:o.message}),r.dirty()):is.assertNever(o);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:Lt.invalid_string,...Sn.errToObj(r)})}_addCheck(t){return new gv({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Sn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Sn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Sn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Sn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Sn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Sn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Sn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Sn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Sn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Sn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Sn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Sn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Sn.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Sn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Sn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Sn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Sn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Sn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Sn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Sn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Sn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Sn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Sn.errToObj(n)})}nonempty(t){return this.min(1,Sn.errToObj(t))}trim(){return new gv({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new gv({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new gv({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}};t6.create=e=>new t6({checks:[],typeName:Bt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Ir(e)});function OIe(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,o=Number.parseInt(e.toFixed(s).replace(".","")),i=Number.parseInt(t.toFixed(s).replace(".",""));return o%i/10**s}let n6=class r6 extends Jr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==vn.number){const o=this._getOrReturnCtx(t);return nn(o,{code:Lt.invalid_type,expected:vn.number,received:o.parsedType}),lr}let r;const s=new tc;for(const o of this._def.checks)o.kind==="int"?is.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?OIe(t.data,o.value)!==0&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.not_finite,message:o.message}),s.dirty()):is.assertNever(o);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Sn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Sn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Sn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Sn.toString(n))}setLimit(t,n,r,s){return new r6({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Sn.toString(s)}]})}_addCheck(t){return new r6({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Sn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Sn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Sn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Sn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Sn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Sn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Sn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Sn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Sn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&is.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}};n6.create=e=>new n6({checks:[],typeName:Bt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ir(e)});class Ax extends Jr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==vn.bigint)return this._getInvalidInput(t);let r;const s=new tc;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):is.assertNever(o);return{status:s.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return nn(n,{code:Lt.invalid_type,expected:vn.bigint,received:n.parsedType}),lr}gte(t,n){return this.setLimit("min",t,!0,Sn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Sn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Sn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Sn.toString(n))}setLimit(t,n,r,s){return new Ax({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Sn.toString(s)}]})}_addCheck(t){return new Ax({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Sn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Sn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Sn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Sn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Sn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ax.create=e=>new Ax({checks:[],typeName:Bt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Ir(e)});let s6=class extends Jr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==vn.boolean){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.boolean,received:r.parsedType}),lr}return Fc(t.data)}};s6.create=e=>new s6({typeName:Bt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ir(e)});class Nx extends Jr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==vn.date){const o=this._getOrReturnCtx(t);return nn(o,{code:Lt.invalid_type,expected:vn.date,received:o.parsedType}),lr}if(Number.isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return nn(o,{code:Lt.invalid_date}),lr}const r=new tc;let s;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(s=this._getOrReturnCtx(t,s),nn(s,{code:Lt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(s=this._getOrReturnCtx(t,s),nn(s,{code:Lt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):is.assertNever(o);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Nx({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Sn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Sn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Nx.create=e=>new Nx({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Bt.ZodDate,...Ir(e)});class gF extends Jr{_parse(t){if(this._getType(t)!==vn.symbol){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.symbol,received:r.parsedType}),lr}return Fc(t.data)}}gF.create=e=>new gF({typeName:Bt.ZodSymbol,...Ir(e)});class bF extends Jr{_parse(t){if(this._getType(t)!==vn.undefined){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.undefined,received:r.parsedType}),lr}return Fc(t.data)}}bF.create=e=>new bF({typeName:Bt.ZodUndefined,...Ir(e)});let yF=class extends Jr{_parse(t){if(this._getType(t)!==vn.null){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.null,received:r.parsedType}),lr}return Fc(t.data)}};yF.create=e=>new yF({typeName:Bt.ZodNull,...Ir(e)});let vF=class extends Jr{constructor(){super(...arguments),this._any=!0}_parse(t){return Fc(t.data)}};vF.create=e=>new vF({typeName:Bt.ZodAny,...Ir(e)});let xF=class extends Jr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Fc(t.data)}};xF.create=e=>new xF({typeName:Bt.ZodUnknown,...Ir(e)});let A0=class extends Jr{_parse(t){const n=this._getOrReturnCtx(t);return nn(n,{code:Lt.invalid_type,expected:vn.never,received:n.parsedType}),lr}};A0.create=e=>new A0({typeName:Bt.ZodNever,...Ir(e)});class wF extends Jr{_parse(t){if(this._getType(t)!==vn.undefined){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.void,received:r.parsedType}),lr}return Fc(t.data)}}wF.create=e=>new wF({typeName:Bt.ZodVoid,...Ir(e)});let J1=class N_ extends Jr{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==vn.array)return nn(n,{code:Lt.invalid_type,expected:vn.array,received:n.parsedType}),lr;if(s.exactLength!==null){const i=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(i||a)&&(nn(n,{code:i?Lt.too_big:Lt.too_small,minimum:a?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(nn(n,{code:Lt.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(nn(n,{code:Lt.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((i,a)=>s.type._parseAsync(new k0(n,i,n.path,a)))).then(i=>tc.mergeArray(r,i));const o=[...n.data].map((i,a)=>s.type._parseSync(new k0(n,i,n.path,a)));return tc.mergeArray(r,o)}get element(){return this._def.type}min(t,n){return new N_({...this._def,minLength:{value:t,message:Sn.toString(n)}})}max(t,n){return new N_({...this._def,maxLength:{value:t,message:Sn.toString(n)}})}length(t,n){return new N_({...this._def,exactLength:{value:t,message:Sn.toString(n)}})}nonempty(t){return this.min(1,t)}};J1.create=(e,t)=>new J1({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Bt.ZodArray,...Ir(t)});function r1(e){if(e instanceof Kf){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=b0.create(r1(r))}return new Kf({...e._def,shape:()=>t})}else return e instanceof J1?new J1({...e._def,type:r1(e.element)}):e instanceof b0?b0.create(r1(e.unwrap())):e instanceof Q1?Q1.create(r1(e.unwrap())):e instanceof gm?gm.create(e.items.map(t=>r1(t))):e}let Kf=class ou extends Jr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=is.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==vn.object){const c=this._getOrReturnCtx(t);return nn(c,{code:Lt.invalid_type,expected:vn.object,received:c.parsedType}),lr}const{status:r,ctx:s}=this._processInputParams(t),{shape:o,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof A0&&this._def.unknownKeys==="strip"))for(const c in s.data)i.includes(c)||a.push(c);const l=[];for(const c of i){const u=o[c],f=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new k0(s,f,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof A0){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(nn(s,{code:Lt.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const f=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new k0(s,f,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,m=await u.value;c.push({key:f,value:m,alwaysSet:u.alwaysSet})}return c}).then(c=>tc.mergeObjectSync(r,c)):tc.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return Sn.errToObj,new ou({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var o,i;const s=((i=(o=this._def).errorMap)==null?void 0:i.call(o,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Sn.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new ou({...this._def,unknownKeys:"strip"})}passthrough(){return new ou({...this._def,unknownKeys:"passthrough"})}extend(t){return new ou({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ou({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Bt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new ou({...this._def,catchall:t})}pick(t){const n={};for(const r of is.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new ou({...this._def,shape:()=>n})}omit(t){const n={};for(const r of is.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new ou({...this._def,shape:()=>n})}deepPartial(){return r1(this)}partial(t){const n={};for(const r of is.objectKeys(this.shape)){const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}return new ou({...this._def,shape:()=>n})}required(t){const n={};for(const r of is.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof b0;)o=o._def.innerType;n[r]=o}return new ou({...this._def,shape:()=>n})}keyof(){return DJ(is.objectKeys(this.shape))}};Kf.create=(e,t)=>new Kf({shape:()=>e,unknownKeys:"strip",catchall:A0.create(),typeName:Bt.ZodObject,...Ir(t)});Kf.strictCreate=(e,t)=>new Kf({shape:()=>e,unknownKeys:"strict",catchall:A0.create(),typeName:Bt.ZodObject,...Ir(t)});Kf.lazycreate=(e,t)=>new Kf({shape:e,unknownKeys:"strip",catchall:A0.create(),typeName:Bt.ZodObject,...Ir(t)});let FS=class extends Jr{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function s(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const i=o.map(a=>new Yf(a.ctx.common.issues));return nn(n,{code:Lt.invalid_union,unionErrors:i}),lr}if(n.common.async)return Promise.all(r.map(async o=>{const i={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:i}),ctx:i}})).then(s);{let o;const i=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!o&&(o={result:u,ctx:c}),c.common.issues.length&&i.push(c.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(l=>new Yf(l));return nn(n,{code:Lt.invalid_union,unionErrors:a}),lr}}get options(){return this._def.options}};FS.create=(e,t)=>new FS({options:e,typeName:Bt.ZodUnion,...Ir(t)});function o6(e,t){const n=n0(e),r=n0(t);if(e===t)return{valid:!0,data:e};if(n===vn.object&&r===vn.object){const s=is.objectKeys(t),o=is.objectKeys(e).filter(a=>s.indexOf(a)!==-1),i={...e,...t};for(const a of o){const l=o6(e[a],t[a]);if(!l.valid)return{valid:!1};i[a]=l.data}return{valid:!0,data:i}}else if(n===vn.array&&r===vn.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let o=0;o<e.length;o++){const i=e[o],a=t[o],l=o6(i,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===vn.date&&r===vn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}let BS=class extends Jr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=(o,i)=>{if(hF(o)||hF(i))return lr;const a=o6(o.value,i.value);return a.valid?((pF(o)||pF(i))&&n.dirty(),{status:n.value,value:a.data}):(nn(r,{code:Lt.invalid_intersection_types}),lr)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,i])=>s(o,i)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};BS.create=(e,t,n)=>new BS({left:e,right:t,typeName:Bt.ZodIntersection,...Ir(n)});class gm extends Jr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==vn.array)return nn(r,{code:Lt.invalid_type,expected:vn.array,received:r.parsedType}),lr;if(r.data.length<this._def.items.length)return nn(r,{code:Lt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),lr;!this._def.rest&&r.data.length>this._def.items.length&&(nn(r,{code:Lt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((i,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new k0(r,i,r.path,a)):null}).filter(i=>!!i);return r.common.async?Promise.all(o).then(i=>tc.mergeArray(n,i)):tc.mergeArray(n,o)}get items(){return this._def.items}rest(t){return new gm({...this._def,rest:t})}}gm.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new gm({items:e,typeName:Bt.ZodTuple,rest:null,...Ir(t)})};class EF extends Jr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==vn.map)return nn(r,{code:Lt.invalid_type,expected:vn.map,received:r.parsedType}),lr;const s=this._def.keyType,o=this._def.valueType,i=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new k0(r,a,r.path,[c,"key"])),value:o._parse(new k0(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of i){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return lr;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of i){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return lr;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}EF.create=(e,t,n)=>new EF({valueType:t,keyType:e,typeName:Bt.ZodMap,...Ir(n)});class Ix extends Jr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==vn.set)return nn(r,{code:Lt.invalid_type,expected:vn.set,received:r.parsedType}),lr;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(nn(r,{code:Lt.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(nn(r,{code:Lt.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const o=this._def.valueType;function i(l){const c=new Set;for(const u of l){if(u.status==="aborted")return lr;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>o._parse(new k0(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>i(l)):i(a)}min(t,n){return new Ix({...this._def,minSize:{value:t,message:Sn.toString(n)}})}max(t,n){return new Ix({...this._def,maxSize:{value:t,message:Sn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Ix.create=(e,t)=>new Ix({valueType:e,minSize:null,maxSize:null,typeName:Bt.ZodSet,...Ir(t)});let _F=class extends Jr{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};_F.create=(e,t)=>new _F({getter:e,typeName:Bt.ZodLazy,...Ir(t)});let SF=class extends Jr{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return nn(n,{received:n.data,code:Lt.invalid_literal,expected:this._def.value}),lr}return{status:"valid",value:t.data}}get value(){return this._def.value}};SF.create=(e,t)=>new SF({value:e,typeName:Bt.ZodLiteral,...Ir(t)});function DJ(e,t){return new W8({values:e,typeName:Bt.ZodEnum,...Ir(t)})}let W8=class i6 extends Jr{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return nn(n,{expected:is.joinValues(r),received:n.parsedType,code:Lt.invalid_type}),lr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return nn(n,{received:n.data,code:Lt.invalid_enum_value,options:r}),lr}return Fc(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return i6.create(t,{...this._def,...n})}exclude(t,n=this._def){return i6.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}};W8.create=DJ;class TF extends Jr{_parse(t){const n=is.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==vn.string&&r.parsedType!==vn.number){const s=is.objectValues(n);return nn(r,{expected:is.joinValues(s),received:r.parsedType,code:Lt.invalid_type}),lr}if(this._cache||(this._cache=new Set(is.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=is.objectValues(n);return nn(r,{received:r.data,code:Lt.invalid_enum_value,options:s}),lr}return Fc(t.data)}get enum(){return this._def.values}}TF.create=(e,t)=>new TF({values:e,typeName:Bt.ZodNativeEnum,...Ir(t)});class zS extends Jr{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==vn.promise&&n.common.async===!1)return nn(n,{code:Lt.invalid_type,expected:vn.promise,received:n.parsedType}),lr;const r=n.parsedType===vn.promise?n.data:Promise.resolve(n.data);return Fc(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}zS.create=(e,t)=>new zS({type:e,typeName:Bt.ZodPromise,...Ir(t)});class X1 extends Jr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Bt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=this._def.effect||null,o={addIssue:i=>{nn(r,i),i.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const i=s.transform(r.data,o);if(r.common.async)return Promise.resolve(i).then(async a=>{if(n.value==="aborted")return lr;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?lr:l.status==="dirty"||n.value==="dirty"?mv(l.value):l});{if(n.value==="aborted")return lr;const a=this._def.schema._parseSync({data:i,path:r.path,parent:r});return a.status==="aborted"?lr:a.status==="dirty"||n.value==="dirty"?mv(a.value):a}}if(s.type==="refinement"){const i=a=>{const l=s.refinement(a,o);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?lr:(a.status==="dirty"&&n.dirty(),i(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?lr:(a.status==="dirty"&&n.dirty(),i(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Z1(i))return lr;const a=s.transform(i.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>Z1(i)?Promise.resolve(s.transform(i.value,o)).then(a=>({status:n.value,value:a})):lr);is.assertNever(s)}}X1.create=(e,t,n)=>new X1({schema:e,typeName:Bt.ZodEffects,effect:t,...Ir(n)});X1.createWithPreprocess=(e,t,n)=>new X1({schema:t,effect:{type:"preprocess",transform:e},typeName:Bt.ZodEffects,...Ir(n)});let b0=class extends Jr{_parse(t){return this._getType(t)===vn.undefined?Fc(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};b0.create=(e,t)=>new b0({innerType:e,typeName:Bt.ZodOptional,...Ir(t)});let Q1=class extends Jr{_parse(t){return this._getType(t)===vn.null?Fc(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Q1.create=(e,t)=>new Q1({innerType:e,typeName:Bt.ZodNullable,...Ir(t)});let a6=class extends Jr{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===vn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};a6.create=(e,t)=>new a6({innerType:e,typeName:Bt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ir(t)});let l6=class extends Jr{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return $S(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Yf(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Yf(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};l6.create=(e,t)=>new l6({innerType:e,typeName:Bt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ir(t)});class CF extends Jr{_parse(t){if(this._getType(t)!==vn.nan){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.nan,received:r.parsedType}),lr}return{status:"valid",value:t.data}}}CF.create=e=>new CF({typeName:Bt.ZodNaN,...Ir(e)});class DIe extends Jr{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Y8 extends Jr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?lr:o.status==="dirty"?(n.dirty(),mv(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?lr:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new Y8({in:t,out:n,typeName:Bt.ZodPipeline})}}let c6=class extends Jr{_parse(t){const n=this._def.innerType._parse(t),r=s=>(Z1(s)&&(s.value=Object.freeze(s.value)),s);return $S(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}};c6.create=(e,t)=>new c6({innerType:e,typeName:Bt.ZodReadonly,...Ir(t)});var Bt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Bt||(Bt={}));const ss=t6.create,_2=n6.create,S2=s6.create,kF=Nx.create;A0.create;const u6=J1.create,li=Kf.create;FS.create;BS.create;gm.create;const d6=W8.create;zS.create;b0.create;Q1.create;const PIe=li({title:ss().min(1,"Title is required"),description:ss().optional(),assignedTo:u6(ss()).min(1,"At least one assignee is required"),status:d6(Object.values(Tx)),priority:d6(Object.values(Sx)),dueDate:kF().optional().nullable(),reminderDate:kF().optional().nullable()});function PJ({...e}){return h.jsx(AW,{"data-slot":"sheet",...e})}function LIe({...e}){return h.jsx(NW,{"data-slot":"sheet-portal",...e})}function $Ie({className:e,...t}){return h.jsx(IW,{"data-slot":"sheet-overlay",className:Qe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function LJ({className:e,children:t,side:n="right",...r}){return h.jsxs(LIe,{children:[h.jsx($Ie,{}),h.jsxs(RW,{"data-slot":"sheet-content",className:Qe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[t,h.jsxs(OW,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[h.jsx(qr,{className:"size-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function $J({className:e,...t}){return h.jsx("div",{"data-slot":"sheet-header",className:Qe("flex flex-col gap-1.5 p-4",e),...t})}function FJ({className:e,...t}){return h.jsx(MW,{"data-slot":"sheet-title",className:Qe("text-foreground font-semibold",e),...t})}const FIe=qke,BJ=x.createContext({}),Gg=({...e})=>h.jsx(BJ.Provider,{value:{name:e.name},children:h.jsx(Yke,{...e})}),K8=()=>{const e=x.useContext(BJ),t=x.useContext(zJ),{getFieldState:n}=fC(),r=oJ({name:e.name}),s=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=t;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...s}},zJ=x.createContext({});function Lp({className:e,...t}){const n=x.useId();return h.jsx(zJ.Provider,{value:{id:n},children:h.jsx("div",{"data-slot":"form-item",className:Qe("grid gap-2",e),...t})})}function $p({className:e,...t}){const{error:n,formItemId:r}=K8();return h.jsx(Hl,{"data-slot":"form-label","data-error":!!n,className:Qe("data-[error=true]:text-destructive",e),htmlFor:r,...t})}function Wg({...e}){const{error:t,formItemId:n,formDescriptionId:r,formMessageId:s}=K8();return h.jsx(Nm,{"data-slot":"form-control",id:n,"aria-describedby":t?`${r} ${s}`:`${r}`,"aria-invalid":!!t,...e})}function Yg({className:e,...t}){const{error:n,formMessageId:r}=K8(),s=n?String((n==null?void 0:n.message)??""):t.children;return s?h.jsx("p",{"data-slot":"form-message",id:r,className:Qe("text-destructive text-sm",e),...t,children:s}):null}const BIe=({isOpen:e,onClose:t,editTodoId:n})=>{const{addTodo:r,updateTodo:s,todos:o}=uC(),[i,a]=Me.useState([]),[l,c]=Me.useState(""),u={title:"",description:"",assignedTo:[],status:Tx.Pending,priority:Sx.Medium,dueDate:void 0,reminderDate:void 0},f=cAe({resolver:lIe(PIe),defaultValues:u});Me.useEffect(()=>{if(n){const v=o.find(w=>w.id===n);v&&(f.reset({title:v.title,description:v.description,assignedTo:v.assignedTo,status:v.status,priority:v.priority,dueDate:v.dueDate,reminderDate:v.reminderDate}),a(v.assignedTo))}else f.reset(u),a([])},[n,o,e,f]);const m=v=>{v.assignedTo=i,n?(s(n,v),Ui.success("Your to-do has been updated successfully.")):(r(v),Ui.success("Your new to-do has been added successfully.")),f.reset(),a([]),c(""),t()},g=()=>{if(l.trim()&&!i.includes(l.trim())){const v=[...i,l.trim()];a(v),f.setValue("assignedTo",v),c("")}},y=v=>{const w=i.filter(_=>_!==v);a(w),f.setValue("assignedTo",w)};return h.jsx(PJ,{open:e,onOpenChange:v=>!v&&t(),children:h.jsxs(LJ,{className:"overflow-y-auto",children:[h.jsx($J,{children:h.jsx(FJ,{children:n?"Edit To-Do":"Add New To-Do"})}),h.jsx(FIe,{...f,children:h.jsxs("form",{onSubmit:f.handleSubmit(m),className:"space-y-6 p-4 pt-0",children:[h.jsx(Gg,{control:f.control,name:"title",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Title"}),h.jsx(Wg,{children:h.jsx(Ed,{placeholder:"Enter title",...v})}),h.jsx(Yg,{})]})}),h.jsx(Gg,{control:f.control,name:"description",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Description"}),h.jsx(Wg,{children:h.jsx(N8,{placeholder:"Enter description",rows:4,...v,value:v.value||""})}),h.jsx(Yg,{})]})}),h.jsxs(Lp,{children:[h.jsx($p,{children:"Assigned To"}),h.jsx("div",{className:"flex flex-wrap items-center gap-2",children:i.map(v=>h.jsxs(Sc,{variant:"outline",className:"cursor-pointer",onClick:()=>y(v),children:[v,h.jsx(qr,{className:"size-3"})]},v))}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ed,{value:l,onChange:v=>c(v.target.value),placeholder:"Enter user name",onKeyDown:v=>{v.key==="Enter"&&(v.preventDefault(),g())}}),h.jsx(_r,{type:"button",variant:"outline",size:"icon",onClick:g,children:h.jsx(qf,{})})]}),f.formState.errors.assignedTo&&h.jsx("p",{className:"text-destructive mt-1 text-sm font-medium",children:f.formState.errors.assignedTo.message})]}),h.jsx(Gg,{control:f.control,name:"dueDate",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Due Date"}),h.jsx(Wg,{children:h.jsxs(wx,{children:[h.jsx(Ex,{asChild:!0,children:h.jsxs(_r,{variant:"outline",className:Qe("w-full justify-start text-left font-normal",!v.value&&"text-muted-foreground"),children:[h.jsx(B1,{}),v.value?ar(v.value,"PPP"):"Select a date"]})}),h.jsx(_x,{className:"w-auto p-0",align:"start",children:h.jsx(vx,{mode:"single",disabled:{before:new Date},selected:v.value||void 0,onSelect:v.onChange})})]})}),h.jsx(Yg,{})]})}),h.jsx(Gg,{control:f.control,name:"reminderDate",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Reminder Date"}),h.jsx(Wg,{children:h.jsxs(wx,{children:[h.jsx(Ex,{asChild:!0,children:h.jsxs(_r,{variant:"outline",className:Qe("w-full justify-start text-left font-normal",!v.value&&"text-muted-foreground"),children:[h.jsx(B1,{}),v.value?ar(v.value,"PPP"):"Select a date"]})}),h.jsx(_x,{className:"w-auto p-0",align:"start",children:h.jsx(vx,{mode:"single",disabled:{before:new Date},selected:v.value||void 0,onSelect:v.onChange})})]})}),h.jsx(Yg,{})]})}),h.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[h.jsx(Gg,{control:f.control,name:"status",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Status"}),h.jsx(Wg,{children:h.jsxs(TS,{value:v.value,onValueChange:v.onChange,children:[h.jsx(kS,{className:"w-full",children:h.jsx(CS,{placeholder:"Select status"})}),h.jsx(AS,{children:Object.values(Tx).map(w=>h.jsxs(NS,{value:w,children:[h.jsx("span",{className:Qe("size-2 rounded-full",Rke[w])}),qZ[w]]},w))})]})}),h.jsx(Yg,{})]})}),h.jsx(Gg,{control:f.control,name:"priority",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Priority"}),h.jsx(Wg,{children:h.jsxs(TS,{value:v.value,onValueChange:v.onChange,children:[h.jsx(kS,{className:"w-full capitalize",children:h.jsx(CS,{placeholder:"Select priority"})}),h.jsx(AS,{children:Object.values(Sx).map(w=>h.jsxs(NS,{className:"capitalize",value:w,children:[h.jsx("span",{className:Qe("size-2 rounded-full",VZ[w])}),w]},w))})]})}),h.jsx(Yg,{})]})})]}),h.jsx(_r,{className:"w-full",type:"submit",children:n?"Save Changes":"Add To-Do"})]})})]})})},zIe=({isOpen:e,onClose:t,todoId:n,onEditClick:r})=>{const{todos:s,addComment:o,deleteComment:i,addFile:a,removeFile:l,addSubTask:c,updateSubTask:u,removeSubTask:f}=uC(),[m,g]=Me.useState(""),[y,v]=Me.useState(""),[w,_]=Me.useState(!1),S=s.find(q=>q.id===n);if(!S)return null;const k=()=>{if(!m.trim()){Ui.error("Both comment and author name are required");return}o(S.id,m),g(""),Ui.success("Your comment has been added successfully.")},R=q=>{const U=q.target.files;!U||U.length===0||(Array.from(U).forEach(z=>{const H=new FileReader;H.readAsDataURL(z),H.onload=()=>{a(S.id,{name:z.name,url:H.result,type:z.type,size:z.size,uploadedAt:new Date}),Ui.success(`${z.name} has been added to the task`)}}),q.target.value="")},O=()=>{if(!y.trim()){Ui.error("Subtask title is required");return}c(S.id,y),v(""),_(!1),Ui.success("Your subtask has been added successfully.")},M=(q,U)=>{u(S.id,q,U)},P=q=>{f(S.id,q),Ui.success("The subtask has been removed successfully.")},j=q=>q<1024?q+" bytes":q<1048576?(q/1024).toFixed(1)+" KB":(q/1048576).toFixed(1)+" MB";return h.jsx(PJ,{open:e,onOpenChange:q=>!q&&t(),children:h.jsxs(LJ,{children:[h.jsxs($J,{children:[h.jsxs("div",{className:"flex items-start justify-between pe-6",children:[h.jsx(FJ,{children:S.title}),r&&h.jsxs(_r,{variant:"outline",onClick:()=>r(S.id),children:[h.jsx(vbe,{}),"Edit"]})]}),h.jsxs("div",{className:"flex items-center gap-2 capitalize",children:[h.jsx(Sc,{className:WN[S.status],children:S.status.replace("-"," ")}),h.jsx(Sc,{className:GN[S.priority],children:S.priority})]})]}),h.jsxs("div",{className:"space-y-6 p-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Description"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:S.description||"No description provided."})]}),h.jsxs("div",{className:"grid grid-cols-3",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Assigned To"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:S.assignedTo||"Unassigned"})]}),S.dueDate&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Due Date"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:ar(new Date(S.dueDate),"PPP")})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Created"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:ar(new Date(S.createdAt),"PPP")})]})]})]}),h.jsx(Bf,{}),h.jsxs("div",{className:"space-y-4 p-4",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Subtasks"}),S.subTasks&&S.subTasks.length>0?h.jsx("div",{className:"space-y-2",children:S.subTasks.map(q=>h.jsxs("div",{className:"bg-muted flex items-center justify-between rounded-md p-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xx,{checked:q.completed,onCheckedChange:U=>M(q.id,!!U)}),h.jsx("span",{className:Qe("text-sm",q.completed&&"text-muted-foreground line-through"),children:q.title})]}),h.jsx(_r,{variant:"ghost",className:"text-red-400!",size:"sm",onClick:()=>P(q.id),children:h.jsx(Ff,{})})]},q.id))}):h.jsx("div",{className:"bg-muted text-muted-foreground rounded-md p-4 text-center text-sm",children:"No subtasks yet."}),!w&&h.jsx("div",{children:h.jsxs(_r,{variant:"outline",size:"sm",onClick:()=>_(!0),children:[h.jsx(vq,{}),h.jsx("span",{children:"Add Sub Task"})]})}),w&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ed,{value:y,onChange:q=>v(q.target.value),placeholder:"Enter subtask title",className:"flex-1",onKeyDown:q=>{q.key==="Enter"?O():q.key==="Escape"&&(_(!1),v(""))}}),h.jsx(_r,{onClick:O,children:h.jsx(Cs,{})}),h.jsx(_r,{variant:"destructive",onClick:()=>{_(!1),v("")},children:h.jsx(qr,{})})]})]}),h.jsx(Bf,{}),h.jsxs("div",{className:"space-y-2 p-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Attachments"}),h.jsxs("div",{children:[h.jsx("input",{type:"file",id:"file-upload",multiple:!0,className:"sr-only",onChange:R}),h.jsx("label",{htmlFor:"file-upload",children:h.jsx(_r,{variant:"outline",size:"sm",asChild:!0,children:h.jsxs("span",{children:[h.jsx(bN,{}),"Upload"]})})})]})]}),S.files&&S.files.length>0?h.jsx("div",{className:"space-y-2",children:S.files.map(q=>h.jsxs("div",{className:"bg-muted flex items-center justify-between rounded-md p-2",children:[h.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[h.jsx(lx,{className:"h-4 w-4 shrink-0"}),h.jsxs("div",{className:"overflow-hidden",children:[h.jsx("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-sm hover:underline",children:q.name}),h.jsxs("span",{className:"text-muted-foreground text-xs",children:[j(q.size)," "," ",ar(new Date(q.uploadedAt),"MMM d, yyyy")]})]})]}),h.jsx(_r,{variant:"ghost",size:"sm",onClick:()=>l(S.id,q.id),className:"text-red-400!",children:h.jsx(Ff,{})})]},q.id))}):h.jsx("div",{className:"bg-muted text-muted-foreground rounded-md p-4 text-center text-sm",children:"No files attached."})]}),h.jsx(Bf,{}),h.jsxs("div",{className:"space-y-4 p-4",children:[h.jsxs("h4",{className:"text-sm font-medium",children:["Comments (",S.comments.length,")"]}),S.comments.length===0&&h.jsx("div",{className:"bg-muted text-muted-foreground rounded-md p-4 text-center text-sm",children:"No comments yet."}),h.jsx("div",{className:"space-y-2",children:S.comments.map(q=>h.jsxs("div",{className:"bg-muted group relative space-y-3 rounded-md p-3",children:[h.jsx("p",{className:"text-sm",children:q.text}),h.jsxs("div",{className:"text-muted-foreground flex justify-between text-xs",children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(fR,{className:"size-3"})," ",ar(new Date(q.createdAt),"PPp")]}),h.jsx("div",{className:"absolute end-2 bottom-2 flex items-center opacity-0 group-hover:opacity-100",children:h.jsx(_r,{variant:"ghost",onClick:()=>i(S.id,q.id),className:"text-red-400!",size:"sm",children:h.jsx(Ff,{className:"size-3"})})})]})]},q.id))}),h.jsxs("div",{className:"space-y-3",children:[h.jsx(N8,{placeholder:"Write your comment...",value:m,onChange:q=>g(q.target.value)}),h.jsx(_r,{onClick:k,children:"Add Comment"})]})]})]})})};function jIe({tasks:e=Ike}){const{setTodos:t,activeTab:n,isAddDialogOpen:r,setAddDialogOpen:s,isTodoSheetOpen:o,setTodoSheetOpen:i,selectedTodoId:a,setSelectedTodoId:l}=uC();x.useEffect(()=>{e&&e.length>0&&t(e)},[e,t]);const[c,u]=Me.useState(null),f=()=>{u(null),s(!0)},m=w=>{u(w),s(!0)},g=w=>{l(w),i(!0)},y=()=>{s(!1),u(null)},v=()=>{i(!1),l(null)};return h.jsxs("div",{className:"space-y-4",children:[h.jsx("header",{className:"mb-4",children:h.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Todo List"})}),h.jsx(Uke,{activeTab:n,onSelectTodo:g,onAddTodoClick:f}),h.jsx(BIe,{isOpen:r,onClose:y,editTodoId:c}),h.jsx(zIe,{isOpen:o,onClose:v,todoId:a,onEditClick:w=>{v(),m(w)}})]})}function AF({defaultView:e="kanban",onViewChange:t,className:n}){const[r,s]=x.useState(e),[o,i]=x.useState(""),[a,l]=x.useState({backlog:[{id:"1",title:"Integrate payment gateway",description:"Set up and configure payment API for handling transactions.",priority:"high",dueDate:"2024-09-20",users:[{name:"Emma",src:"",fallback:"EJ"},{name:"Daniel",src:"",fallback:"DS"}],progress:10,attachments:2,comments:4},{id:"2",title:"Redesign homepage",description:"Update the homepage with the new brand colors and hero section.",priority:"medium",dueDate:"2024-09-25",users:[{name:"Lucas",src:"",fallback:"LB"}],progress:0,attachments:1,comments:1}],inProgress:[{id:"3",title:"Dark mode implementation",description:"Allow users to switch between light and dark themes.",priority:"high",dueDate:"2024-09-18",users:[{name:"Charlie",src:"",fallback:"CW"},{name:"Ava",src:"",fallback:"AR"}],progress:40,attachments:2,comments:6},{id:"4",title:"Database optimization",description:"Improve query performance for large datasets.",priority:"medium",dueDate:"2024-09-19",users:[{name:"Liam",src:"",fallback:"LM"}],progress:55,attachments:3,comments:2}],done:[{id:"5",title:"CI/CD pipeline setup",description:"Automate deployment process using GitHub Actions.",priority:"high",dueDate:"2024-09-12",users:[{name:"Ethan",src:"",fallback:"EC"}],progress:100,attachments:2,comments:4}]}),[c]=x.useState({backlog:"Backlog",inProgress:"In Progress",done:"Done"}),[u,f]=x.useState(!1),[m,g]=x.useState(""),y=_=>{s(_),t==null||t(_)},v=_=>{const S=`col-${Date.now()}`;l(k=>({...k,[S]:[]})),g(""),f(!1)},w=x.useMemo(()=>{if(!o.trim())return a;const _={};return Object.entries(a).forEach(([S,k])=>{_[S]=k.filter(R=>{var O;return R.title.toLowerCase().includes(o.toLowerCase())||((O=R.description)==null?void 0:O.toLowerCase().includes(o.toLowerCase()))})}),_},[a,o]);return h.jsx(V1,{children:h.jsxs("div",{className:Qe("flex h-full flex-col",n),children:[h.jsxs("div",{className:"flex items-center justify-between gap-4 px-4 py-3 border-b",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx(cG,{value:r,onValueChange:_=>y(_),children:h.jsxs(uG,{className:"h-9",children:[h.jsxs(Iv,{value:"kanban",className:"gap-1.5",children:[h.jsx(I1e,{className:"size-4"}),h.jsx("span",{className:"hidden sm:inline",children:"Kanban"})]}),h.jsxs(Iv,{value:"tasks",className:"gap-1.5",children:[h.jsx(O1e,{className:"size-4"}),h.jsx("span",{className:"hidden sm:inline",children:"Tasks"})]}),h.jsxs(Iv,{value:"calendar",className:"gap-1.5",children:[h.jsx(B1,{className:"size-4"}),h.jsx("span",{className:"hidden sm:inline",children:"Calendar"})]})]})})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"relative hidden md:block",children:[h.jsx(Gf,{className:"absolute left-2.5 top-2.5 size-4 text-muted-foreground"}),h.jsx(Ed,{placeholder:"Search...",className:"w-[200px] pl-8",value:o,onChange:_=>i(_.target.value)})]}),h.jsxs(bw,{children:[h.jsx(yw,{asChild:!0,children:h.jsx(_r,{variant:"outline",size:"icon",children:h.jsx(kq,{className:"size-4"})})}),h.jsxs(vw,{align:"end",className:"w-48",children:[h.jsx(p_e,{children:"Filter by"}),h.jsx(YL,{}),h.jsx(uu,{children:"High Priority"}),h.jsx(uu,{children:"Medium Priority"}),h.jsx(uu,{children:"Low Priority"}),h.jsx(YL,{}),h.jsx(uu,{children:"Due Today"}),h.jsx(uu,{children:"Overdue"})]})]}),r==="kanban"&&h.jsxs(DW,{open:u,onOpenChange:f,children:[h.jsx(BEe,{asChild:!0,children:h.jsxs(_r,{size:"sm",children:[h.jsx(qf,{className:"size-4 mr-1"}),h.jsx("span",{className:"hidden sm:inline",children:"Add Column"})]})}),h.jsxs(PW,{className:"sm:max-w-[425px]",children:[h.jsx(LW,{children:h.jsx($W,{children:"Add New Column"})}),h.jsxs("div",{className:"mt-4 flex gap-2",children:[h.jsx(Ed,{value:m,onChange:_=>g(_.target.value),placeholder:"Enter column name...",autoFocus:!0,onKeyDown:_=>{_.key==="Enter"&&m.trim()&&v(m.trim())}}),h.jsx(_r,{size:"icon",disabled:!m.trim(),onClick:()=>v(m.trim()),children:h.jsx(Cs,{className:"size-4"})})]})]})]})]})]}),h.jsxs("div",{className:"flex-1 overflow-hidden",children:[r==="kanban"&&h.jsx("div",{className:"h-full overflow-x-auto p-4",children:h.jsxs(hTe,{value:w,onValueChange:l,getItemValue:_=>_.id,children:[h.jsx(eK,{className:"flex gap-4 pb-4",children:Object.entries(w).map(([_,S])=>h.jsxs(tK,{value:_,className:"w-[320px] min-w-[320px] shrink-0",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-semibold",children:c[_]||_}),h.jsx(Sc,{variant:"secondary",className:"text-xs",children:S.length})]}),h.jsxs("div",{className:"flex",children:[h.jsx(nK,{asChild:!0,children:h.jsx(_r,{variant:"ghost",size:"icon",className:"size-8",children:h.jsx(S1e,{className:"size-4"})})}),h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:h.jsx(_r,{variant:"ghost",size:"icon",className:"size-8",children:h.jsx(vq,{className:"size-4"})})}),h.jsx(um,{children:"Add Task"})]})]})]}),S.length>0?h.jsx("div",{className:"flex flex-col gap-2",children:S.map(k=>h.jsx(rK,{value:k.id,asHandle:!0,asChild:!0,children:h.jsxs(_N,{className:"cursor-grab active:cursor-grabbing border-0 shadow-sm",children:[h.jsxs(gve,{className:"p-3 pb-2",children:[h.jsx(bve,{className:"text-sm font-medium line-clamp-2",children:k.title}),k.description&&h.jsx(yve,{className:"text-xs line-clamp-2",children:k.description})]}),h.jsxs(SN,{className:"p-3 pt-0 space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex -space-x-1.5",children:[k.users.slice(0,3).map((R,O)=>h.jsxs(xL,{className:"size-6 border-2 border-background",children:[R.src&&h.jsx(Mve,{src:R.src,alt:R.alt}),h.jsx(wL,{className:"text-[10px]",children:R.fallback})]},O)),k.users.length>3&&h.jsx(xL,{className:"size-6 border-2 border-background",children:h.jsxs(wL,{className:"text-[10px]",children:["+",k.users.length-3]})})]}),h.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[h.jsx(C_e,{value:k.progress,className:"w-12 h-1.5"}),h.jsxs("span",{children:[k.progress,"%"]})]})]}),h.jsx(Bf,{}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(Sc,{variant:k.priority==="high"?"destructive":k.priority==="medium"?"default":"secondary",className:"text-[10px] capitalize",children:k.priority}),h.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground",children:[k.attachments?h.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[h.jsx(J1e,{className:"size-3"}),h.jsx("span",{children:k.attachments})]}):null,k.comments?h.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[h.jsx(Sq,{className:"size-3"}),h.jsx("span",{children:k.comments})]}):null]})]})]})]})},k.id))}):h.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-8 text-center",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"No tasks yet"}),h.jsxs(_r,{variant:"outline",size:"sm",children:[h.jsx(qf,{className:"size-4 mr-1"}),"Add Task"]})]})]},_))}),h.jsx(vTe,{children:h.jsx("div",{className:"bg-primary/10 size-full rounded-md"})})]})}),r==="tasks"&&h.jsx("div",{className:"h-full overflow-auto",children:h.jsx(jIe,{})}),r==="calendar"&&h.jsx("div",{className:"h-full overflow-auto p-4",children:h.jsx(lCe,{})})]})]})})}function ra(e){this.content=e}ra.prototype={constructor:ra,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,s=r.find(e),o=r.content.slice();return s==-1?o.push(n||e,t):(o[s+1]=t,n&&(o[s]=n)),new ra(o)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new ra(n)},addToStart:function(e,t){return new ra([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new ra(n)},addBefore:function(e,t,n){var r=this.remove(t),s=r.content.slice(),o=r.find(e);return s.splice(o==-1?s.length:o,0,t,n),new ra(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=ra.from(e),e.size?new ra(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=ra.from(e),e.size?new ra(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=ra.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};ra.from=function(e){if(e instanceof ra)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new ra(t)};function jJ(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let s=e.child(r),o=t.child(r);if(s==o){n+=s.nodeSize;continue}if(!s.sameMarkup(o))return n;if(s.isText&&s.text!=o.text){for(let i=0;s.text[i]==o.text[i];i++)n++;return n}if(s.content.size||o.content.size){let i=jJ(s.content,o.content,n+1);if(i!=null)return i}n+=s.nodeSize}}function UJ(e,t,n,r){for(let s=e.childCount,o=t.childCount;;){if(s==0||o==0)return s==o?null:{a:n,b:r};let i=e.child(--s),a=t.child(--o),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=UJ(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class bt{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,s=0,o){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>t&&r(l,s+a,o||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,n-u),r,s+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,s){let o="",i=!0;return this.nodesBetween(t,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:o+=r),o+=c},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,s=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),o=1);o<t.content.length;o++)s.push(t.content[o]);return new bt(s,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],s=0;if(n>t)for(let o=0,i=0;i<n;o++){let a=this.content[o],l=i+a.nodeSize;l>t&&((i<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,t-i-1),Math.min(a.content.size,n-i-1))),r.push(a),s+=a.nodeSize),i=l}return new bt(r,s)}cutByIndex(t,n){return t==n?bt.empty:t==0&&n==this.content.length?this:new bt(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let s=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return s[t]=n,new bt(s,o)}addToStart(t){return new bt([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new bt(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];t(s,r,n),r+=s.nodeSize}}findDiffStart(t,n=0){return jJ(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return UJ(this,t,n,r)}findIndex(t){if(t==0)return T2(0,t);if(t==this.size)return T2(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),o=r+s.nodeSize;if(o>=t)return o==t?T2(n+1,o):T2(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return bt.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new bt(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return bt.empty;let n,r=0;for(let s=0;s<t.length;s++){let o=t[s];r+=o.nodeSize,s&&o.isText&&t[s-1].sameMarkup(o)?(n||(n=t.slice(0,s)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new bt(n||t,r)}static from(t){if(!t)return bt.empty;if(t instanceof bt)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new bt([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}bt.empty=new bt([],0);const ok={index:0,offset:0};function T2(e,t){return ok.index=e,ok.offset=t,ok}function jS(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!jS(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!jS(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Hs=class f6{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let s=0;s<t.length;s++){let o=t[s];if(this.eq(o))return t;if(this.type.excludes(o.type))n||(n=t.slice(0,s));else{if(o.type.excludes(this.type))return t;!r&&o.type.rank>this.type.rank&&(n||(n=t.slice(0,s)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&jS(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return f6.none;if(t instanceof f6)return[t];let n=t.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};Hs.none=[];class US extends Error{}class Zt{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=VJ(this.content,t+this.openStart,n);return r&&new Zt(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Zt(HJ(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Zt.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Zt(bt.fromJSON(t,n.content),r,s)}static maxOpen(t,n=!0){let r=0,s=0;for(let o=t.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=t.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)s++;return new Zt(t,r,s)}}Zt.empty=new Zt(bt.empty,0,0);function HJ(e,t,n){let{index:r,offset:s}=e.findIndex(t),o=e.maybeChild(r),{index:i,offset:a}=e.findIndex(n);if(s==t||o.isText){if(a!=n&&!e.child(i).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(HJ(o.content,t-s-1,n-s-1)))}function VJ(e,t,n,r){let{index:s,offset:o}=e.findIndex(t),i=e.maybeChild(s);if(o==t||i.isText)return r&&!r.canReplace(s,s,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=VJ(i.content,t-o-1,n,i);return a&&e.replaceChild(s,i.copy(a))}function UIe(e,t,n){if(n.openStart>e.depth)throw new US("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new US("Inconsistent open depths");return qJ(e,t,n,0)}function qJ(e,t,n,r){let s=e.index(r),o=e.node(r);if(s==t.index(r)&&r<e.depth-n.openStart){let i=qJ(e,t,n,r+1);return o.copy(o.content.replaceChild(s,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let i=e.parent,a=i.content;return nm(i,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:i,end:a}=HIe(n,e);return nm(o,WJ(e,i,a,t,r))}else return nm(o,HS(e,t,r))}function GJ(e,t){if(!t.type.compatibleContent(e.type))throw new US("Cannot join "+t.type.name+" onto "+e.type.name)}function h6(e,t,n){let r=e.node(n);return GJ(r,t.node(n)),r}function tm(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function $v(e,t,n,r){let s=(t||e).node(n),o=0,i=t?t.index(n):s.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(tm(e.nodeAfter,r),o++));for(let a=o;a<i;a++)tm(s.child(a),r);t&&t.depth==n&&t.textOffset&&tm(t.nodeBefore,r)}function nm(e,t){return e.type.checkContent(t),e.copy(t)}function WJ(e,t,n,r,s){let o=e.depth>s&&h6(e,t,s+1),i=r.depth>s&&h6(n,r,s+1),a=[];return $v(null,e,s,a),o&&i&&t.index(s)==n.index(s)?(GJ(o,i),tm(nm(o,WJ(e,t,n,r,s+1)),a)):(o&&tm(nm(o,HS(e,t,s+1)),a),$v(t,n,s,a),i&&tm(nm(i,HS(n,r,s+1)),a)),$v(r,null,s,a),new bt(a)}function HS(e,t,n){let r=[];if($v(null,e,n,r),e.depth>n){let s=h6(e,t,n+1);tm(nm(s,HS(e,t,n+1)),r)}return $v(t,null,n,r),new bt(r)}function HIe(e,t){let n=t.depth-e.openStart,s=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)s=t.node(o).copy(bt.from(s));return{start:s.resolveNoCache(e.openStart+n),end:s.resolveNoCache(s.content.size-e.openEnd-n)}}class Rx{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=t.child(n);return r?t.child(n).cut(r):s}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let o=0;o<t;o++)s+=r.child(o).nodeSize;return s}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Hs.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),s=t.maybeChild(n);if(!r){let a=r;r=s,s=a}let o=r.marks;for(var i=0;i<o.length;i++)o[i].type.spec.inclusive===!1&&(!s||!o[i].isInSet(s.marks))&&(o=o[i--].removeFromSet(o));return o}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=t.parent.maybeChild(t.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new VS(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,o=n;for(let i=t;;){let{index:a,offset:l}=i.content.findIndex(o),c=o-l;if(r.push(i,a,s+l),!c||(i=i.child(a),i.isText))break;o=c-1,s+=l+1}return new Rx(n,r,o)}static resolveCached(t,n){let r=NF.get(t);if(r)for(let o=0;o<r.elts.length;o++){let i=r.elts[o];if(i.pos==n)return i}else NF.set(t,r=new VIe);let s=r.elts[r.i]=Rx.resolve(t,n);return r.i=(r.i+1)%qIe,s}}class VIe{constructor(){this.elts=[],this.i=0}}const qIe=12,NF=new WeakMap;class VS{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const GIe=Object.create(null);let y0=class p6{constructor(t,n,r,s=Hs.none){this.type=t,this.attrs=n,this.marks=s,this.content=r||bt.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,s=0){this.content.nodesBetween(t,n,r,s,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,s){return this.content.textBetween(t,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&jS(this.attrs,n||t.defaultAttrs||GIe)&&Hs.sameSet(this.marks,r||Hs.none)}copy(t=null){return t==this.content?this:new p6(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new p6(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Zt.empty;let s=this.resolve(t),o=this.resolve(n),i=r?0:s.sharedDepth(n),a=s.start(i),c=s.node(i).content.cut(s.pos-a,o.pos-a);return new Zt(c,s.depth-i,o.depth-i)}replace(t,n,r){return UIe(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(s==t||n.isText)return n;t-=s+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(t){return Rx.resolveCached(this,t)}resolveNoCache(t){return Rx.resolve(this,t)}rangeHasMark(t,n,r){let s=!1;return n>t&&this.nodesBetween(t,n,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),YJ(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=bt.empty,s=0,o=r.childCount){let i=this.contentMatchAt(t).matchFragment(r,s,o),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=s;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(t).matchType(r),i=o&&o.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Hs.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Hs.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let s=bt.fromJSON(t,n.content),o=t.nodeType(n.type).create(n.attrs,s,r);return o.type.checkAttrs(o.attrs),o}};y0.prototype.text=void 0;let WIe=class m6 extends y0{constructor(t,n,r,s){if(super(t,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):YJ(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new m6(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new m6(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}};function YJ(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class bm{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new YIe(t,n);if(r.next==null)return bm.empty;let s=KJ(r);r.next&&r.err("Unexpected trailing text");let o=tRe(eRe(s));return nRe(o,r),o}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let s=this;for(let o=n;s&&o<r;o++)s=s.matchType(t.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let s=[this];function o(i,a){let l=i.matchFragment(t,r);if(l&&(!n||l.validEnd))return bt.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:f}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(f)==-1){s.push(f);let m=o(f,a.concat(u));if(m)return m}}return null}return o(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(t)){let i=[];for(let a=s;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<o.next.length;i++){let{type:a,next:l}=o.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let s=0;s<r.next.length;s++)t.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),t.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)o+=(i?", ":"")+r.next[i].type.name+"->"+t.indexOf(r.next[i].next);return o}).join(`
`)}}bm.empty=new bm(!0);class YIe{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function KJ(e){let t=[];do t.push(KIe(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function KIe(e){let t=[];do t.push(ZIe(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function ZIe(e){let t=QIe(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=JIe(e,t);else break;return t}function IF(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function JIe(e,t){let n=IF(e),r=n;return e.eat(",")&&(e.next!="}"?r=IF(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function XIe(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let s=[];for(let o in n){let i=n[o];i.isInGroup(t)&&s.push(i)}return s.length==0&&e.err("No node type or group '"+t+"' found"),s}function QIe(e){if(e.eat("(")){let t=KJ(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=XIe(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function eRe(e){let t=[[]];return s(o(e,0),n()),t;function n(){return t.push([])-1}function r(i,a,l){let c={term:l,to:a};return t[i].push(c),c}function s(i,a){i.forEach(l=>l.to=a)}function o(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=o(i.exprs[l],a);if(l==i.exprs.length-1)return c;s(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),s(o(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return s(o(i.expr,a),l),s(o(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(o(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=n();s(o(i.expr,l),u),l=u}if(i.max==-1)s(o(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=n();r(l,u),s(o(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function ZJ(e,t){return t-e}function RF(e,t){let n=[];return r(t),n.sort(ZJ);function r(s){let o=e[s];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(s);for(let i=0;i<o.length;i++){let{term:a,to:l}=o[i];!a&&n.indexOf(l)==-1&&r(l)}}}function tRe(e){let t=Object.create(null);return n(RF(e,0));function n(r){let s=[];r.forEach(i=>{e[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);RF(e,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=t[r.join(",")]=new bm(r.indexOf(e.length-1)>-1);for(let i=0;i<s.length;i++){let a=s[i][1].sort(ZJ);o.next.push({type:s[i][0],next:t[a.join(",")]||n(a)})}return o}}function nRe(e,t){for(let n=0,r=[e];n<r.length;n++){let s=r[n],o=!s.validEnd,i=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];i.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function JJ(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function XJ(e,t){let n=Object.create(null);for(let r in e){let s=t&&t[r];if(s===void 0){let o=e[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function QJ(e,t,n,r){for(let s in t)if(!(s in e))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in e){let o=e[s];o.validate&&o.validate(t[s])}}function eX(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new sRe(e,r,t[r]);return n}let MF=class tX{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=eX(t,r.attrs),this.defaultAttrs=JJ(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==bm.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:XJ(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new y0(this,this.computeAttrs(t),bt.from(n),Hs.setFrom(r))}createChecked(t=null,n,r){return n=bt.from(n),this.checkContent(n),new y0(this,this.computeAttrs(t),n,Hs.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=bt.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let s=this.contentMatch.matchFragment(n),o=s&&s.fillBefore(bt.empty,!0);return o?new y0(this,t,n.append(o),Hs.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){QJ(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Hs.none:t}static compile(t,n){let r=Object.create(null);t.forEach((o,i)=>r[o]=new tX(o,n,i));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function rRe(e,t,n){let r=n.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${o}`)}}class sRe{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?rRe(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class mC{constructor(t,n,r,s){this.name=t,this.rank=n,this.schema=r,this.spec=s,this.attrs=eX(t,s.attrs),this.excluded=null;let o=JJ(this.attrs);this.instance=o?new Hs(this,o):null}create(t=null){return!t&&this.instance?this.instance:new Hs(this,XJ(this.attrs,t))}static compile(t,n){let r=Object.create(null),s=0;return t.forEach((o,i)=>r[o]=new mC(o,s++,n,i)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){QJ(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let nX=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in t)n[s]=t[s];n.nodes=ra.from(t.nodes),n.marks=ra.from(t.marks||{}),this.nodes=MF.compile(this.spec.nodes,this),this.marks=mC.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],i=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[i]||(r[i]=bm.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?OF(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],i=o.spec.excludes;o.excluded=i==null?[o]:i==""?[]:OF(this,i.split(" "))}this.nodeFromJSON=s=>y0.fromJSON(this,s),this.markFromJSON=s=>Hs.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,s){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof MF){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,s)}text(t,n){let r=this.nodes.text;return new WIe(r,r.defaultAttrs,t,Hs.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function OF(e,t){let n=[];for(let r=0;r<t.length;r++){let s=t[r],o=e.marks[s],i=o;if(o)n.push(o);else for(let a in e.marks){let l=e.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function oRe(e){return e.tag!=null}function iRe(e){return e.style!=null}let Fv=class g6{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(oRe(s))this.tags.push(s);else if(iRe(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=t.nodes[s.node];return o.contentMatch.matchType(o)})}parse(t,n={}){let r=new PF(this,n,!1);return r.addAll(t,Hs.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new PF(this,n,!0);return r.addAll(t,Hs.none,n.from,n.to),Zt.maxOpen(r.finish())}matchTag(t,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(cRe(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let i=o.getAttrs(t);if(i===!1)continue;o.attrs=i||void 0}return o}}}matchStyle(t,n,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let i=this.styles[o],a=i.style;if(!(a.indexOf(t)!=0||i.context&&!r.matchesContext(i.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(t){let n=[];function r(s){let o=s.priority==null?50:s.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<o)break}n.splice(i,0,s)}for(let s in t.marks){let o=t.marks[s].spec.parseDOM;o&&o.forEach(i=>{r(i=LF(i)),i.mark||i.ignore||i.clearMark||(i.mark=s)})}for(let s in t.nodes){let o=t.nodes[s].spec.parseDOM;o&&o.forEach(i=>{r(i=LF(i)),i.node||i.ignore||i.mark||(i.node=s)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new g6(t,g6.schemaRules(t)))}};const rX={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},aRe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},sX={ol:!0,ul:!0},Mx=1,b6=2,Bv=4;function DF(e,t,n){return t!=null?(t?Mx:0)|(t==="full"?b6:0):e&&e.whitespace=="pre"?Mx|b6:n&~Bv}class C2{constructor(t,n,r,s,o,i){this.type=t,this.attrs=n,this.marks=r,this.solid=s,this.options=i,this.content=[],this.activeMarks=Hs.none,this.match=o||(i&Bv?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(bt.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(t.type))?(this.match=r,s):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Mx)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let n=bt.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(bt.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!rX.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class PF{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,o,i=DF(null,n.preserveWhitespace,0)|(r?Bv:0);s?o=new C2(s.type,s.attrs,Hs.none,!0,n.topMatch||s.type.contentMatch,i):r?o=new C2(null,null,Hs.none,!0,null,i):o=new C2(t.schema.topNodeType,null,Hs.none,!0,null,i),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,s=this.top,o=s.options&b6?"full":this.localPreserveWS||(s.options&Mx)>0,{schema:i}=this.parser;if(o==="full"||s.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(i.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(i.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(i.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(i.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=s.content[s.content.length-1],l=t.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(i.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let s=this.localPreserveWS,o=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let i=t.nodeName.toLowerCase(),a;sX.hasOwnProperty(i)&&this.parser.normalizeLists&&lRe(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:aRe.hasOwnProperty(i))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,u=this.needsBlock;if(rX.hasOwnProperty(i))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let f=l&&l.skip?n:this.readStyles(t,n);f&&this.addAll(t,f),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(t,n);c&&this.addElementByRule(t,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],i=r.getPropertyValue(o);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(o,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,r,s){let o,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(t);else if(s)this.addElement(t,r,s);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}o&&this.sync(a)&&this.open--}addAll(t,n,r,s){let o=r||0;for(let i=r?t.childNodes[r]:t.firstChild,a=s==null?null:t.childNodes[s];i!=a;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i,n);this.findAtPoint(t,o)}findPlace(t,n,r){let s,o;for(let i=this.open,a=0;i>=0;i--){let l=this.nodes[i],c=l.findWrapping(t);if(c&&(!s||s.length>c.length+a)&&(s=c,o=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!s)return null;this.sync(o);for(let i=0;i<s.length;i++)n=this.enterInner(s[i],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let s=this.findPlace(t,n,r);if(s){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(t.type));let i=Hs.none;for(let a of s.concat(t.marks))(o.type?o.type.allowsMarkType(a.type):$F(a.type,t.type))&&(i=a.addToSet(i));return o.content.push(t.mark(i)),!0}return!1}enter(t,n,r,s){let o=this.findPlace(t.create(n),r,!1);return o&&(o=this.enterInner(t,n,r,!0,s)),o}enterInner(t,n,r,s=!1,o){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(t);let a=DF(t,o,i.options);i.options&Bv&&i.content.length==0&&(a|=Bv);let l=Hs.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):$F(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new C2(t,n,l,s,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Mx)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)t+=r[s].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&t.nodeType==1&&t.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function lRe(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&sX.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function cRe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function LF(e){let t={};for(let n in e)t[n]=e[n];return t}function $F(e,t){let n=t.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(e))continue;let o=[],i=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||o.indexOf(u)<0&&i(u))return!0}};if(i(s.contentMatch))return!0}}class Pm{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=ik(n).createDocumentFragment());let s=r,o=[];return t.forEach(i=>{if(o.length||i.marks.length){let a=0,l=0;for(;a<o.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)s=o.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,n);u&&(o.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:s}=I_(ik(n),this.nodes[t.type.name](t),null,t.attrs);if(s){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,s)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let s=t.marks.length-1;s>=0;s--){let o=this.serializeMark(t.marks[s],t.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(t,n,r={}){let s=this.marks[t.type.name];return s&&I_(ik(r),s(t,n),null,t.attrs)}static renderSpec(t,n,r=null,s){return I_(t,n,r,s)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Pm(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=FF(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return FF(t.marks)}}function FF(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function ik(e){return e.document||window.document}const BF=new WeakMap;function uRe(e){let t=BF.get(e);return t===void 0&&BF.set(e,t=dRe(e)),t}function dRe(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(e),t}function I_(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let s=t[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=uRe(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=s.indexOf(" ");i>0&&(n=s.slice(0,i),s=s.slice(i+1));let a,l=n?e.createElementNS(n,s):e.createElement(s),c=t[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let m=f.indexOf(" ");m>0?l.setAttributeNS(f.slice(0,m),f.slice(m+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=u;f<t.length;f++){let m=t[f];if(m===0){if(f<t.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:g,contentDOM:y}=I_(e,m,n,r);if(l.appendChild(g),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:l,contentDOM:a}}const oX=65535,iX=Math.pow(2,16);function fRe(e,t){return e+t*iX}function zF(e){return e&oX}function hRe(e){return(e-(e&oX))/iX}const aX=1,lX=2,R_=4,cX=8;class y6{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&cX)>0}get deletedBefore(){return(this.delInfo&(aX|R_))>0}get deletedAfter(){return(this.delInfo&(lX|R_))>0}get deletedAcross(){return(this.delInfo&R_)>0}}class Gl{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&Gl.empty)return Gl.empty}recover(t){let n=0,r=zF(t);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+hRe(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let s=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>t)break;let c=this.ranges[a+o],u=this.ranges[a+i],f=l+c;if(t<=f){let m=c?t==l?-1:t==f?1:n:n,g=l+s+(m<0?0:u);if(r)return g;let y=t==(n<0?l:f)?null:fRe(a/3,t-l),v=t==l?lX:t==f?aX:R_;return(n<0?t!=l:t!=f)&&(v|=cX),new y6(g,v,y)}s+=u-c}return r?t+s:new y6(t+s,0,null)}touches(t,n){let r=0,s=zF(n),o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+o],u=l+c;if(t<=u&&a==s*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let i=this.ranges[s],a=i-(this.inverted?o:0),l=i+(this.inverted?0:o),c=this.ranges[s+n],u=this.ranges[s+r];t(a,a+c,l,l+u),o+=u-c}}invert(){return new Gl(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Gl.empty:new Gl(t<0?[0,-t,0]:[0,0,t])}}Gl.empty=new Gl([]);class Ox{constructor(t,n,r=0,s=t?t.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Ox(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let s=t.getMirror(n);this.appendMap(t._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let s=t.getMirror(n);this.appendMap(t._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let t=new Ox;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let s=0;for(let o=this.from;o<this.to;o++){let i=this._maps[o],a=i.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,t=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,t=a.pos}return r?t:new y6(t,s,null)}}const ak=Object.create(null);class Ea{getMap(){return Gl.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ak[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in ak)throw new RangeError("Duplicate use of step JSON ID "+t);return ak[t]=n,n.prototype.jsonID=t,n}}class pi{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new pi(t,null)}static fail(t){return new pi(null,t)}static fromReplace(t,n,r,s){try{return pi.ok(t.replace(n,r,s))}catch(o){if(o instanceof US)return pi.fail(o.message);throw o}}}function Z8(e,t,n){let r=[];for(let s=0;s<e.childCount;s++){let o=e.child(s);o.content.size&&(o=o.copy(Z8(o.content,t,o))),o.isInline&&(o=t(o,n,s)),r.push(o)}return bt.fromArray(r)}class l0 extends Ea{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new Zt(Z8(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),s),n.openStart,n.openEnd);return pi.fromReplace(t,this.from,this.to,o)}invert(){return new bu(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new l0(n.pos,r.pos,this.mark)}merge(t){return t instanceof l0&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new l0(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new l0(n.from,n.to,t.markFromJSON(n.mark))}}Ea.jsonID("addMark",l0);class bu extends Ea{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Zt(Z8(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),t),n.openStart,n.openEnd);return pi.fromReplace(t,this.from,this.to,r)}invert(){return new l0(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new bu(n.pos,r.pos,this.mark)}merge(t){return t instanceof bu&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new bu(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new bu(n.from,n.to,t.markFromJSON(n.mark))}}Ea.jsonID("removeMark",bu);class c0 extends Ea{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return pi.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return pi.fromReplace(t,this.pos,this.pos+1,new Zt(bt.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new c0(this.pos,n.marks[s]);return new c0(this.pos,this.mark)}}return new ym(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new c0(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new c0(n.pos,t.markFromJSON(n.mark))}}Ea.jsonID("addNodeMark",c0);class ym extends Ea{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return pi.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return pi.fromReplace(t,this.pos,this.pos+1,new Zt(bt.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new c0(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ym(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ym(n.pos,t.markFromJSON(n.mark))}}Ea.jsonID("removeNodeMark",ym);class Ri extends Ea{constructor(t,n,r,s=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=s}apply(t){return this.structure&&v6(t,this.from,this.to)?pi.fail("Structure replace would overwrite content"):pi.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Gl([this.from,this.to-this.from,this.slice.size])}invert(t){return new Ri(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ri(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof Ri)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Zt.empty:new Zt(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Ri(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Zt.empty:new Zt(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Ri(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ri(n.from,n.to,Zt.fromJSON(t,n.slice),!!n.structure)}}Ea.jsonID("replace",Ri);class qi extends Ea{constructor(t,n,r,s,o,i,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=i,this.structure=a}apply(t){if(this.structure&&(v6(t,this.from,this.gapFrom)||v6(t,this.gapTo,this.to)))return pi.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return pi.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?pi.fromReplace(t,this.from,this.to,r):pi.fail("Content does not fit in gap")}getMap(){return new Gl([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new qi(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||o>r.pos?null:new qi(n.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new qi(n.from,n.to,n.gapFrom,n.gapTo,Zt.fromJSON(t,n.slice),n.insert,!!n.structure)}}Ea.jsonID("replaceAround",qi);function v6(e,t,n){let r=e.resolve(t),s=n-t,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let i=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,s--}}return!1}function pRe(e,t,n,r){let s=[],o=[],i,a;e.doc.nodesBetween(t,n,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let m=Math.max(c,t),g=Math.min(c+l.nodeSize,n),y=r.addToSet(f);for(let v=0;v<f.length;v++)f[v].isInSet(y)||(i&&i.to==m&&i.mark.eq(f[v])?i.to=g:s.push(i=new bu(m,g,f[v])));a&&a.to==m?a.to=g:o.push(a=new l0(m,g,r))}}),s.forEach(l=>e.step(l)),o.forEach(l=>e.step(l))}function mRe(e,t,n,r){let s=[],o=0;e.doc.nodesBetween(t,n,(i,a)=>{if(!i.isInline)return;o++;let l=null;if(r instanceof mC){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let u=0;u<l.length;u++){let f=l[u],m;for(let g=0;g<s.length;g++){let y=s[g];y.step==o-1&&f.eq(s[g].style)&&(m=y)}m?(m.to=c,m.step=o):s.push({style:f,from:Math.max(a,t),to:c,step:o})}}}),s.forEach(i=>e.step(new bu(i.from,i.to,i.style)))}function J8(e,t,n,r=n.contentMatch,s=!0){let o=e.doc.nodeAt(t),i=[],a=t+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=a+c.nodeSize,f=r.matchType(c.type);if(!f)i.push(new Ri(a,u,Zt.empty));else{r=f;for(let m=0;m<c.marks.length;m++)n.allowsMarkType(c.marks[m].type)||e.step(new bu(a,u,c.marks[m]));if(s&&c.isText&&n.whitespace!="pre"){let m,g=/\r?\n|\r/g,y;for(;m=g.exec(c.text);)y||(y=new Zt(bt.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new Ri(a+m.index,a+m.index+m[0].length,y))}}a=u}if(!r.validEnd){let l=r.fillBefore(bt.empty,!0);e.replace(a,a,new Zt(l,0,0))}for(let l=i.length-1;l>=0;l--)e.step(i[l])}function gRe(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Ib(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,s=0,o=0;;--r){let i=e.$from.node(r),a=e.$from.index(r)+s,l=e.$to.indexAfter(r)-o;if(r<e.depth&&i.canReplace(a,l,n))return r;if(r==0||i.type.spec.isolating||!gRe(i,a,l))break;a&&(s=1),l<i.childCount&&(o=1)}return null}function bRe(e,t,n){let{$from:r,$to:s,depth:o}=t,i=r.before(o+1),a=s.after(o+1),l=i,c=a,u=bt.empty,f=0;for(let y=o,v=!1;y>n;y--)v||r.index(y)>0?(v=!0,u=bt.from(r.node(y).copy(u)),f++):l--;let m=bt.empty,g=0;for(let y=o,v=!1;y>n;y--)v||s.after(y+1)<s.end(y)?(v=!0,m=bt.from(s.node(y).copy(m)),g++):c++;e.step(new qi(l,c,i,a,new Zt(u.append(m),f,g),u.size-f,!0))}function X8(e,t,n=null,r=e){let s=yRe(e,t),o=s&&vRe(r,t);return o?s.map(jF).concat({type:t,attrs:n}).concat(o.map(jF)):null}function jF(e){return{type:e,attrs:null}}function yRe(e,t){let{parent:n,startIndex:r,endIndex:s}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let i=o.length?o[0]:t;return n.canReplaceWith(r,s,i)?o:null}function vRe(e,t){let{parent:n,startIndex:r,endIndex:s}=e,o=n.child(r),i=t.contentMatch.findWrapping(o.type);if(!i)return null;let l=(i.length?i[i.length-1]:t).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function xRe(e,t,n){let r=bt.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=bt.from(n[i].type.create(n[i].attrs,r))}let s=t.start,o=t.end;e.step(new qi(s,o,s,o,new Zt(r,0,0),n.length,!0))}function wRe(e,t,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,(i,a)=>{let l=typeof s=="function"?s(i):s;if(i.isTextblock&&!i.hasMarkup(r,l)&&ERe(e.doc,e.mapping.slice(o).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let g=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);g&&!y?c=!1:!g&&y&&(c=!0)}c===!1&&dX(e,i,a,o),J8(e,e.mapping.slice(o).map(a,1),r,void 0,c===null);let u=e.mapping.slice(o),f=u.map(a,1),m=u.map(a+i.nodeSize,1);return e.step(new qi(f,m,f+1,m-1,new Zt(bt.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&uX(e,i,a,o),!1}})}function uX(e,t,n,r){t.forEach((s,o)=>{if(s.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(s.text);){let l=e.mapping.slice(r).map(n+1+o+i.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function dX(e,t,n,r){t.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+o);e.replaceWith(i,i+1,t.type.schema.text(`
`))}})}function ERe(e,t,n){let r=e.resolve(t),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function _Re(e,t,n,r,s){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let i=n.create(r,null,s||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,i);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new qi(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new Zt(bt.from(i),0,0),1,!0))}function zf(e,t,n=1,r){let s=e.resolve(t),o=s.depth-n,i=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!i.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=n-2;c>o;c--,u--){let f=s.node(c),m=s.index(c);if(f.type.spec.isolating)return!1;let g=f.content.cutByIndex(m,f.childCount),y=r&&r[u+1];y&&(g=g.replaceChild(0,y.type.create(y.attrs)));let v=r&&r[u]||f;if(!f.canReplace(m+1,f.childCount)||!v.type.validContent(g))return!1}let a=s.indexAfter(o),l=r&&r[0];return s.node(o).canReplaceWith(a,a,l?l.type:s.node(o+1).type)}function SRe(e,t,n=1,r){let s=e.doc.resolve(t),o=bt.empty,i=bt.empty;for(let a=s.depth,l=s.depth-n,c=n-1;a>l;a--,c--){o=bt.from(s.node(a).copy(o));let u=r&&r[c];i=bt.from(u?u.type.create(u.attrs,i):s.node(a).copy(i))}e.step(new Ri(t,t,new Zt(o.append(i),n,n),!0))}function q0(e,t){let n=e.resolve(t),r=n.index();return fX(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function TRe(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let s=0;s<t.childCount;s++){let o=t.child(s),i=o.type==r?e.type.schema.nodes.text:o.type;if(n=n.matchType(i),!n||!e.type.allowsMarks(o.marks))return!1}return n.validEnd}function fX(e,t){return!!(e&&t&&!e.isLeaf&&TRe(e,t))}function gC(e,t,n=-1){let r=e.resolve(t);for(let s=r.depth;;s--){let o,i,a=r.index(s);if(s==r.depth?(o=r.nodeBefore,i=r.nodeAfter):n>0?(o=r.node(s+1),a++,i=r.node(s).maybeChild(a)):(o=r.node(s).maybeChild(a-1),i=r.node(s+1)),o&&!o.isTextblock&&fX(o,i)&&r.node(s).canReplace(a,a+1))return t;if(s==0)break;t=n<0?r.before(s):r.after(s)}}function CRe(e,t,n){let r=null,{linebreakReplacement:s}=e.doc.type.schema,o=e.doc.resolve(t-n),i=o.node().type;if(s&&i.inlineContent){let u=i.whitespace=="pre",f=!!i.contentMatch.matchType(s);u&&!f?r=!1:!u&&f&&(r=!0)}let a=e.steps.length;if(r===!1){let u=e.doc.resolve(t+n);dX(e,u.node(),u.before(),a)}i.inlineContent&&J8(e,t+n-1,i,o.node().contentMatchAt(o.index()),r==null);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new Ri(c,l.map(t+n,-1),Zt.empty,!0)),r===!0){let u=e.doc.resolve(c);uX(e,u.node(),u.before(),e.steps.length)}return e}function kRe(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,n))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,n))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function hX(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let s=n.content;for(let o=0;o<n.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(o==1)u=c.canReplace(l,l,s);else{let f=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function bC(e,t,n=t,r=Zt.empty){if(t==n&&!r.size)return null;let s=e.resolve(t),o=e.resolve(n);return pX(s,o,r)?new Ri(t,n,r):new ARe(s,o,r).fit()}function pX(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class ARe{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=bt.empty;for(let s=0;s<=t.depth;s++){let o=t.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(s))})}for(let s=t.depth;s>0;s--)this.placed=bt.from(t.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(t<0?this.$to:r.doc.resolve(t));if(!s)return null;let o=this.placed,i=r.depth,a=s.depth;for(;i&&a&&o.childCount==1;)o=o.firstChild.content,i--,a--;let l=new Zt(o,i,a);return t>-1?new qi(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ri(r.pos,s.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<t;r++){let o=n.firstChild;if(n.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){t=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=lk(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let i=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(n==1&&(i?c.matchType(i.type)||(f=c.fillBefore(bt.from(i),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:f};if(n==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=lk(t,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Zt(t,n+1,Math.max(r,s.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=lk(t,n);if(s.childCount<=1&&n>0){let o=t.size-n<=n+s.size;this.unplaced=new Zt(bv(t,n-1,1),n-1,o?n-1:r)}else this.unplaced=new Zt(bv(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:s,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let v=0;v<o.length;v++)this.openFrontierNode(o[v]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-t,c=0,u=[],{match:f,type:m}=this.frontier[n];if(s){for(let v=0;v<s.childCount;v++)u.push(s.child(v));f=f.matchFragment(s)}let g=a.size+t-(i.content.size-i.openEnd);for(;c<a.childCount;){let v=a.child(c),w=f.matchType(v.type);if(!w)break;c++,(c>1||l==0||v.content.size)&&(f=w,u.push(mX(v.mark(m.allowedMarks(v.marks)),c==1?l:0,c==a.childCount?g:-1)))}let y=c==a.childCount;y||(g=-1),this.placed=yv(this.placed,n,bt.from(u)),this.frontier[n].match=f,y&&g<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,w=a;v<g;v++){let _=w.lastChild;this.frontier.push({type:_.type,match:_.contentMatchAt(_.childCount)}),w=_.content}this.unplaced=y?t==0?Zt.empty:new Zt(bv(i.content,t-1,1),t-1,g<0?i.openEnd:t-1):new Zt(bv(i.content,t,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!ck(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],o=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),i=ck(t,n,s,r,o);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=ck(t,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:i,move:o?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=yv(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let s=t.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,t.index(r));this.openFrontierNode(s.type,s.attrs,o)}return t}openFrontierNode(t,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(t),this.placed=yv(this.placed,this.depth,bt.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(bt.empty,!0);n.childCount&&(this.placed=yv(this.placed,this.frontier.length,n))}}function bv(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(bv(e.firstChild.content,t-1,n)))}function yv(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(yv(e.lastChild.content,t-1,n)))}function lk(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function mX(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,mX(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(bt.empty,!0)))),e.copy(r)}function ck(e,t,n,r,s){let o=e.node(t),i=s?e.indexAfter(t):e.index(t);if(i==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,i);return a&&!NRe(n,o.content,i)?a:null}function NRe(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function IRe(e){return e.spec.defining||e.spec.definingForContent}function RRe(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let s=e.doc.resolve(t),o=e.doc.resolve(n);if(pX(s,o,r))return e.step(new Ri(t,n,r));let i=bX(s,o);i[i.length-1]==0&&i.pop();let a=-(s.depth+1);i.unshift(a);for(let m=s.depth,g=s.pos-1;m>0;m--,g--){let y=s.node(m).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;i.indexOf(m)>-1?a=m:s.before(m)==g&&i.splice(1,0,-m)}let l=i.indexOf(a),c=[],u=r.openStart;for(let m=r.content,g=0;;g++){let y=m.firstChild;if(c.push(y),g==r.openStart)break;m=y.content}for(let m=u-1;m>=0;m--){let g=c[m],y=IRe(g.type);if(y&&!g.sameMarkup(s.node(Math.abs(a)-1)))u=m;else if(y||!g.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let g=(m+u+1)%(r.openStart+1),y=c[g];if(y)for(let v=0;v<i.length;v++){let w=i[(v+l)%i.length],_=!0;w<0&&(_=!1,w=-w);let S=s.node(w-1),k=s.index(w-1);if(S.canReplaceWith(k,k,y.type,y.marks))return e.replace(s.before(w),_?o.after(w):n,new Zt(gX(r.content,0,r.openStart,g),g,r.openEnd))}}let f=e.steps.length;for(let m=i.length-1;m>=0&&(e.replace(t,n,r),!(e.steps.length>f));m--){let g=i[m];g<0||(t=s.before(g),n=o.after(g))}}function gX(e,t,n,r,s){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy(gX(o.content,t+1,n,r,o)))}if(t>r){let o=s.contentMatchAt(0),i=o.fillBefore(e).append(e);e=i.append(o.matchFragment(i).fillBefore(bt.empty,!0))}return e}function MRe(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let s=kRe(e.doc,t,r.type);s!=null&&(t=n=s)}e.replaceRange(t,n,new Zt(bt.from(r),0,0))}function ORe(e,t,n){let r=e.doc.resolve(t),s=e.doc.resolve(n),o=bX(r,s);for(let i=0;i<o.length;i++){let a=o[i],l=i==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return e.delete(r.before(a),s.after(a))}for(let i=1;i<=r.depth&&i<=s.depth;i++)if(t-r.start(i)==r.depth-i&&n>r.end(i)&&s.end(i)-n!=s.depth-i&&r.start(i-1)==s.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),s.index(i-1)))return e.delete(r.before(i),n);e.delete(t,n)}function bX(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let s=r;s>=0;s--){let o=e.start(s);if(o<e.pos-(e.depth-s)||t.end(s)>t.pos+(t.depth-s)||e.node(s).type.spec.isolating||t.node(s).type.spec.isolating)break;(o==t.start(s)||s==e.depth&&s==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&s&&t.start(s-1)==o-1)&&n.push(s)}return n}class I1 extends Ea{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return pi.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return pi.fromReplace(t,this.pos,this.pos+1,new Zt(bt.from(s),0,n.isLeaf?0:1))}getMap(){return Gl.empty}invert(t){return new I1(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new I1(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new I1(n.pos,n.attr,n.value)}}Ea.jsonID("attr",I1);class Dx extends Ea{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return pi.ok(r)}getMap(){return Gl.empty}invert(t){return new Dx(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Dx(n.attr,n.value)}}Ea.jsonID("docAttr",Dx);let eb=class extends Error{};eb=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};eb.prototype=Object.create(Error.prototype);eb.prototype.constructor=eb;eb.prototype.name="TransformError";class yX{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Ox}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new eb(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Zt.empty){let s=bC(this.doc,t,n,r);return s&&this.step(s),this}replaceWith(t,n,r){return this.replace(t,n,new Zt(bt.from(r),0,0))}delete(t,n){return this.replace(t,n,Zt.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return RRe(this,t,n,r),this}replaceRangeWith(t,n,r){return MRe(this,t,n,r),this}deleteRange(t,n){return ORe(this,t,n),this}lift(t,n){return bRe(this,t,n),this}join(t,n=1){return CRe(this,t,n),this}wrap(t,n){return xRe(this,t,n),this}setBlockType(t,n=t,r,s=null){return wRe(this,t,n,r,s),this}setNodeMarkup(t,n,r=null,s){return _Re(this,t,n,r,s),this}setNodeAttribute(t,n,r){return this.step(new I1(t,n,r)),this}setDocAttribute(t,n){return this.step(new Dx(t,n)),this}addNodeMark(t,n){return this.step(new c0(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Hs)n.isInSet(r.marks)&&this.step(new ym(t,n));else{let s=r.marks,o,i=[];for(;o=n.isInSet(s);)i.push(new ym(t,o)),s=o.removeFromSet(s);for(let a=i.length-1;a>=0;a--)this.step(i[a])}return this}split(t,n=1,r){return SRe(this,t,n,r),this}addMark(t,n,r){return pRe(this,t,n,r),this}removeMark(t,n,r){return mRe(this,t,n,r),this}clearIncompatible(t,n,r){return J8(this,t,n,r),this}}const uk=Object.create(null);let Vn=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new vX(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Zt.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let o=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=t.mapping.slice(o);t.replaceRange(u.map(l.pos),u.map(c.pos),a?Zt.empty:n),a==0&&VF(t,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:i,$to:a}=s[o],l=t.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);o?t.deleteRange(c,u):(t.replaceRangeWith(c,u,n),VF(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let s=t.parent.inlineContent?new qn(t):s1(t.node(0),t.parent,t.pos,t.index(),n,r);if(s)return s;for(let o=t.depth-1;o>=0;o--){let i=n<0?s1(t.node(0),t.node(o),t.before(o+1),t.index(o),n,r):s1(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,n,r);if(i)return i}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new Zl(t.node(0))}static atStart(t){return s1(t,t,0,0,1)||new Zl(t)}static atEnd(t){return s1(t,t,t.content.size,t.childCount,-1)||new Zl(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=uk[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in uk)throw new RangeError("Duplicate use of selection JSON ID "+t);return uk[t]=n,n.prototype.jsonID=t,n}getBookmark(){return qn.between(this.$anchor,this.$head).getBookmark()}};Vn.prototype.visible=!0;class vX{constructor(t,n){this.$from=t,this.$to=n}}let UF=!1;function HF(e){!UF&&!e.parent.inlineContent&&(UF=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class qn extends Vn{constructor(t,n=t){HF(t),HF(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Vn.near(r);let s=t.resolve(n.map(this.anchor));return new qn(s.parent.inlineContent?s:r,r)}replace(t,n=Zt.empty){if(super.replace(t,n),n==Zt.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof qn&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new yC(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new qn(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let s=t.resolve(n);return new this(s,r==n?s:t.resolve(r))}static between(t,n,r){let s=t.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let o=Vn.findFrom(n,r,!0)||Vn.findFrom(n,-r,!0);if(o)n=o.$head;else return Vn.near(n,r)}return t.parent.inlineContent||(s==0?t=n:(t=(Vn.findFrom(t,-r,!0)||Vn.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=s<0&&(t=n))),new qn(t,n)}}Vn.jsonID("text",qn);class yC{constructor(t,n){this.anchor=t,this.head=n}map(t){return new yC(t.map(this.anchor),t.map(this.head))}resolve(t){return qn.between(t.resolve(this.anchor),t.resolve(this.head))}}class Nn extends Vn{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),o=t.resolve(s);return r?Vn.near(o):new Nn(o)}content(){return new Zt(bt.from(this.node),0,0)}eq(t){return t instanceof Nn&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Q8(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Nn(t.resolve(n.anchor))}static create(t,n){return new Nn(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Nn.prototype.visible=!1;Vn.jsonID("node",Nn);class Q8{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new yC(r,r):new Q8(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Nn.isSelectable(r)?new Nn(n):Vn.near(n)}}class Zl extends Vn{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Zt.empty){if(n==Zt.empty){t.delete(0,t.doc.content.size);let r=Vn.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new Zl(t)}map(t){return new Zl(t)}eq(t){return t instanceof Zl}getBookmark(){return DRe}}Vn.jsonID("all",Zl);const DRe={map(){return this},resolve(e){return new Zl(e)}};function s1(e,t,n,r,s,o=!1){if(t.inlineContent)return qn.create(e,n);for(let i=r-(s>0?0:1);s>0?i<t.childCount:i>=0;i+=s){let a=t.child(i);if(a.isAtom){if(!o&&Nn.isSelectable(a))return Nn.create(e,n-(s<0?a.nodeSize:0))}else{let l=s1(e,a,n+s,s<0?a.childCount:0,s,o);if(l)return l}n+=a.nodeSize*s}return null}function VF(e,t,n){let r=e.steps.length-1;if(r<t)return;let s=e.steps[r];if(!(s instanceof Ri||s instanceof qi))return;let o=e.mapping.maps[r],i;o.forEach((a,l,c,u)=>{i==null&&(i=u)}),e.setSelection(Vn.near(e.doc.resolve(i),n))}const qF=1,k2=2,GF=4;class PRe extends yX{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|qF)&~k2,this.storedMarks=null,this}get selectionSet(){return(this.updated&qF)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=k2,this}ensureMarks(t){return Hs.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&k2)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~k2,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Hs.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let s=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(s.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),!t)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let i=this.doc.resolve(n);o=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(t,o)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(Vn.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=GF,this}get scrolledIntoView(){return(this.updated&GF)>0}}function WF(e,t){return!t||!e?e:e.bind(t)}class vv{constructor(t,n,r){this.name=t,this.init=WF(n.init,r),this.apply=WF(n.apply,r)}}const LRe=[new vv("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new vv("selection",{init(e,t){return e.selection||Vn.atStart(t.doc)},apply(e){return e.selection}}),new vv("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new vv("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class dk{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=LRe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new vv(r.key,r.spec.state,r))})}}class p1{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),s=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=s?s[i].n:0,c=s?s[i].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",t),!s){s=[];for(let f=0;f<this.config.plugins.length;f++)s.push(f<i?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}s&&(s[i]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new p1(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];n[o.name]=o.apply(t,this[o.name],this,n)}return n}get tr(){return new PRe(this)}static create(t){let n=new dk(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new p1(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(t,r);return r}reconfigure(t){let n=new dk(this.schema,t.plugins),r=n.fields,s=new p1(n);for(let o=0;o<r.length;o++){let i=r[o].name;s[i]=this.hasOwnProperty(i)?this[i]:r[o].init(t,s)}return s}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=t[r],o=s.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(s,this[s.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let s=new dk(t.schema,t.plugins),o=new p1(s);return s.fields.forEach(i=>{if(i.name=="doc")o.doc=y0.fromJSON(t.schema,n.doc);else if(i.name=="selection")o.selection=Vn.fromJSON(o.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[i.name]=c.fromJSON.call(l,t,n[a],o);return}}o[i.name]=i.init(t,o)}}),o}}function xX(e,t,n){for(let r in e){let s=e[r];s instanceof Function?s=s.bind(t):r=="handleDOMEvents"&&(s=xX(s,t,{})),n[r]=s}return n}class vs{constructor(t){this.spec=t,this.props={},t.props&&xX(t.props,this,this.props),this.key=t.key?t.key.key:wX("plugin")}getState(t){return t[this.key]}}const fk=Object.create(null);function wX(e){return e in fk?e+"$"+ ++fk[e]:(fk[e]=0,e+"$")}class Bs{constructor(t="key"){this.key=wX(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const e7=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function EX(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const _X=(e,t,n)=>{let r=EX(e,n);if(!r)return!1;let s=t7(r);if(!s){let i=r.blockRange(),a=i&&Ib(i);return a==null?!1:(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}let o=s.nodeBefore;if(MX(e,s,t,-1))return!0;if(r.parent.content.size==0&&(tb(o,"end")||Nn.isSelectable(o)))for(let i=r.depth;;i--){let a=bC(e.doc,r.before(i),r.after(i),Zt.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(tb(o,"end")?Vn.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):Nn.create(l.doc,s.pos-o.nodeSize)),t(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},$Re=(e,t,n)=>{let r=EX(e,n);if(!r)return!1;let s=t7(r);return s?SX(e,s,t):!1},FRe=(e,t,n)=>{let r=CX(e,n);if(!r)return!1;let s=n7(r);return s?SX(e,s,t):!1};function SX(e,t,n){let r=t.nodeBefore,s=r,o=t.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let i=t.nodeAfter,a=i,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=bC(e.doc,o,l,Zt.empty);if(!c||c.from!=o||c instanceof Ri&&c.slice.size>=l-o)return!1;if(n){let u=e.tr.step(c);u.setSelection(qn.create(u.doc,o)),n(u.scrollIntoView())}return!0}function tb(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const TX=(e,t,n)=>{let{$head:r,empty:s}=e.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=t7(r)}let i=o&&o.nodeBefore;return!i||!Nn.isSelectable(i)?!1:(t&&t(e.tr.setSelection(Nn.create(e.doc,o.pos-i.nodeSize)).scrollIntoView()),!0)};function t7(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function CX(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const kX=(e,t,n)=>{let r=CX(e,n);if(!r)return!1;let s=n7(r);if(!s)return!1;let o=s.nodeAfter;if(MX(e,s,t,1))return!0;if(r.parent.content.size==0&&(tb(o,"start")||Nn.isSelectable(o))){let i=bC(e.doc,r.before(),r.after(),Zt.empty);if(i&&i.slice.size<i.to-i.from){if(t){let a=e.tr.step(i);a.setSelection(tb(o,"start")?Vn.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):Nn.create(a.doc,a.mapping.map(s.pos))),t(a.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},AX=(e,t,n)=>{let{$head:r,empty:s}=e.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=n7(r)}let i=o&&o.nodeAfter;return!i||!Nn.isSelectable(i)?!1:(t&&t(e.tr.setSelection(Nn.create(e.doc,o.pos)).scrollIntoView()),!0)};function n7(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const BRe=(e,t)=>{let n=e.selection,r=n instanceof Nn,s;if(r){if(n.node.isTextblock||!q0(e.doc,n.from))return!1;s=n.from}else if(s=gC(e.doc,n.from,-1),s==null)return!1;if(t){let o=e.tr.join(s);r&&o.setSelection(Nn.create(o.doc,s-e.doc.resolve(s).nodeBefore.nodeSize)),t(o.scrollIntoView())}return!0},zRe=(e,t)=>{let n=e.selection,r;if(n instanceof Nn){if(n.node.isTextblock||!q0(e.doc,n.to))return!1;r=n.to}else if(r=gC(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},jRe=(e,t)=>{let{$from:n,$to:r}=e.selection,s=n.blockRange(r),o=s&&Ib(s);return o==null?!1:(t&&t(e.tr.lift(s,o).scrollIntoView()),!0)},NX=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function r7(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const URe=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),o=n.indexAfter(-1),i=r7(s.contentMatchAt(o));if(!i||!s.canReplaceWith(o,o,i))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,i.createAndFill());l.setSelection(Vn.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},IX=(e,t)=>{let n=e.selection,{$from:r,$to:s}=n;if(n instanceof Zl||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=r7(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let i=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=e.tr.insert(i,o.createAndFill());a.setSelection(qn.create(a.doc,i+1)),t(a.scrollIntoView())}return!0},RX=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(zf(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),s=r&&Ib(r);return s==null?!1:(t&&t(e.tr.lift(r,s).scrollIntoView()),!0)};function HRe(e){return(t,n)=>{let{$from:r,$to:s}=t.selection;if(t.selection instanceof Nn&&t.selection.node.isBlock)return!r.parentOffset||!zf(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],i,a,l=!1,c=!1;for(let g=r.depth;;g--)if(r.node(g).isBlock){l=r.end(g)==r.pos+(r.depth-g),c=r.start(g)==r.pos-(r.depth-g),a=r7(r.node(g-1).contentMatchAt(r.indexAfter(g-1))),o.unshift(l&&a?{type:a}:null),i=g;break}else{if(g==1)return!1;o.unshift(null)}let u=t.tr;(t.selection instanceof qn||t.selection instanceof Zl)&&u.deleteSelection();let f=u.mapping.map(r.pos),m=zf(u.doc,f,o.length,o);if(m||(o[0]=a?{type:a}:null,m=zf(u.doc,f,o.length,o)),!m)return!1;if(u.split(f,o.length,o),!l&&c&&r.node(i).type!=a){let g=u.mapping.map(r.before(i)),y=u.doc.resolve(g);a&&r.node(i-1).canReplaceWith(y.index(),y.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(i)),a)}return n&&n(u.scrollIntoView()),!0}}const VRe=HRe(),qRe=(e,t)=>{let{$from:n,to:r}=e.selection,s,o=n.sharedDepth(r);return o==0?!1:(s=n.before(o),t&&t(e.tr.setSelection(Nn.create(e.doc,s))),!0)};function GRe(e,t,n){let r=t.nodeBefore,s=t.nodeAfter,o=t.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(s.isTextblock||q0(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function MX(e,t,n,r){let s=t.nodeBefore,o=t.nodeAfter,i,a,l=s.type.spec.isolating||o.type.spec.isolating;if(!l&&GRe(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(i=(a=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&a.matchType(i[0]||o.type).validEnd){if(n){let g=t.pos+o.nodeSize,y=bt.empty;for(let _=i.length-1;_>=0;_--)y=bt.from(i[_].create(null,y));y=bt.from(s.copy(y));let v=e.tr.step(new qi(t.pos-1,g,t.pos,g,new Zt(y,1,0),i.length,!0)),w=v.doc.resolve(g+2*i.length);w.nodeAfter&&w.nodeAfter.type==s.type&&q0(v.doc,w.pos)&&v.join(w.pos),n(v.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:Vn.findFrom(t,1),f=u&&u.$from.blockRange(u.$to),m=f&&Ib(f);if(m!=null&&m>=t.depth)return n&&n(e.tr.lift(f,m).scrollIntoView()),!0;if(c&&tb(o,"start",!0)&&tb(s,"end")){let g=s,y=[];for(;y.push(g),!g.isTextblock;)g=g.lastChild;let v=o,w=1;for(;!v.isTextblock;v=v.firstChild)w++;if(g.canReplace(g.childCount,g.childCount,v.content)){if(n){let _=bt.empty;for(let k=y.length-1;k>=0;k--)_=bt.from(y[k].copy(_));let S=e.tr.step(new qi(t.pos-y.length,t.pos+o.nodeSize,t.pos+w,t.pos+o.nodeSize-w,new Zt(_,y.length,0),0,!0));n(S.scrollIntoView())}return!0}}return!1}function OX(e){return function(t,n){let r=t.selection,s=e<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(n&&n(t.tr.setSelection(qn.create(t.doc,e<0?s.start(o):s.end(o)))),!0):!1}}const WRe=OX(-1),YRe=OX(1);function KRe(e,t=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o),a=i&&X8(i,e,t);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function YF(e,t=null){return function(n,r){let s=!1;for(let o=0;o<n.selection.ranges.length&&!s;o++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(i,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)s=!0;else{let u=n.doc.resolve(c),f=u.index();s=u.parent.canReplaceWith(f,f+1,e)}})}if(!s)return!1;if(r){let o=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];o.setBlockType(a,l,e,t)}r(o.scrollIntoView())}return!0}}function s7(...e){return function(t,n,r){for(let s=0;s<e.length;s++)if(e[s](t,n,r))return!0;return!1}}s7(e7,_X,TX);s7(e7,kX,AX);s7(NX,IX,RX,VRe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function ZRe(e,t=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o);if(!i)return!1;let a=r?n.tr:null;return JRe(a,i,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function JRe(e,t,n,r=null){let s=!1,o=t,i=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=i.resolve(t.start-2);o=new VS(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new VS(t.$from,i.resolve(t.$to.end(t.depth)),t.depth)),s=!0}let a=X8(o,n,r,t);return a?(e&&XRe(e,t,a,s,n),!0):!1}function XRe(e,t,n,r,s){let o=bt.empty;for(let u=n.length-1;u>=0;u--)o=bt.from(n[u].type.create(n[u].attrs,o));e.step(new qi(t.start-(r?2:0),t.end,t.start,t.end,new Zt(o,0,0),n.length,!0));let i=0;for(let u=0;u<n.length;u++)n[u].type==s&&(i=u+1);let a=n.length-i,l=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,f=t.endIndex,m=!0;u<f;u++,m=!1)!m&&zf(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return e}function QRe(e){return function(t,n){let{$from:r,$to:s}=t.selection,o=r.blockRange(s,i=>i.childCount>0&&i.firstChild.type==e);return o?n?r.node(o.depth-1).type==e?e8e(t,n,e,o):t8e(t,n,o):!0:!1}}function e8e(e,t,n,r){let s=e.tr,o=r.end,i=r.$to.end(r.depth);o<i&&(s.step(new qi(o-1,i,o,i,new Zt(bt.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new VS(s.doc.resolve(r.$from.pos),s.doc.resolve(i),r.depth));const a=Ib(r);if(a==null)return!1;s.lift(r,a);let l=s.doc.resolve(s.mapping.map(o,-1)-1);return q0(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),t(s.scrollIntoView()),!0}function t8e(e,t,n){let r=e.tr,s=n.parent;for(let g=n.end,y=n.endIndex-1,v=n.startIndex;y>v;y--)g-=s.child(y).nodeSize,r.delete(g-1,g+1);let o=r.doc.resolve(n.start),i=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==s.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?bt.empty:bt.from(s))))return!1;let f=o.pos,m=f+i.nodeSize;return r.step(new qi(f-(a?1:0),m+(l?1:0),f+1,m-1,new Zt((a?bt.empty:bt.from(s.copy(bt.empty))).append(l?bt.empty:bt.from(s.copy(bt.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function n8e(e){return function(t,n){let{$from:r,$to:s}=t.selection,o=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==e);if(!o)return!1;let i=o.startIndex;if(i==0)return!1;let a=o.parent,l=a.child(i-1);if(l.type!=e)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=bt.from(c?e.create():null),f=new Zt(bt.from(e.create(null,bt.from(a.type.create(null,u)))),c?3:1,0),m=o.start,g=o.end;n(t.tr.step(new qi(m-(c?3:1),g,m,g,f,1,!0)).scrollIntoView())}return!0}}const oa=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},nb=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let x6=null;const wf=function(e,t,n){let r=x6||(x6=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},r8e=function(){x6=null},vm=function(e,t,n,r){return n&&(KF(e,t,n,r,-1)||KF(e,t,n,r,1))},s8e=/^(img|br|input|textarea|hr)$/i;function KF(e,t,n,r,s){for(var o;;){if(e==n&&t==r)return!0;if(t==(s<0?0:Ac(e))){let i=e.parentNode;if(!i||i.nodeType!=1||Rw(e)||s8e.test(e.nodeName)||e.contentEditable=="false")return!1;t=oa(e)+(s<0?0:1),e=i}else if(e.nodeType==1){let i=e.childNodes[t+(s<0?-1:0)];if(i.nodeType==1&&i.contentEditable=="false")if(!((o=i.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)t+=s;else return!1;else e=i,t=s<0?Ac(e):0}else return!1}}function Ac(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function o8e(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Ac(e)}else if(e.parentNode&&!Rw(e))t=oa(e),e=e.parentNode;else return null}}function i8e(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Rw(e))t=oa(e)+1,e=e.parentNode;else return null}}function a8e(e,t,n){for(let r=t==0,s=t==Ac(e);r||s;){if(e==n)return!0;let o=oa(e);if(e=e.parentNode,!e)return!1;r=r&&o==0,s=s&&o==Ac(e)}}function Rw(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const vC=function(e){return e.focusNode&&vm(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Hp(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function l8e(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function c8e(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Ac(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Ac(r.startContainer),r.startOffset)}}}const Sd=typeof navigator<"u"?navigator:null,ZF=typeof document<"u"?document:null,G0=Sd&&Sd.userAgent||"",w6=/Edge\/(\d+)/.exec(G0),DX=/MSIE \d/.exec(G0),E6=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(G0),gl=!!(DX||E6||w6),v0=DX?document.documentMode:E6?+E6[1]:w6?+w6[1]:0,Oc=!gl&&/gecko\/(\d+)/i.test(G0);Oc&&+(/Firefox\/(\d+)/.exec(G0)||[0,0])[1];const _6=!gl&&/Chrome\/(\d+)/.exec(G0),Vi=!!_6,PX=_6?+_6[1]:0,wa=!gl&&!!Sd&&/Apple Computer/.test(Sd.vendor),rb=wa&&(/Mobile\/\w+/.test(G0)||!!Sd&&Sd.maxTouchPoints>2),_c=rb||(Sd?/Mac/.test(Sd.platform):!1),LX=Sd?/Win/.test(Sd.platform):!1,Df=/Android \d/.test(G0),Mw=!!ZF&&"webkitFontSmoothing"in ZF.documentElement.style,u8e=Mw?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function d8e(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function mf(e,t){return typeof e=="number"?e:e[t]}function f8e(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function JF(e,t,n){let r=e.someProp("scrollThreshold")||0,s=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let i=n||e.dom;i;){if(i.nodeType!=1){i=nb(i);continue}let a=i,l=a==o.body,c=l?d8e(o):f8e(a),u=0,f=0;if(t.top<c.top+mf(r,"top")?f=-(c.top-t.top+mf(s,"top")):t.bottom>c.bottom-mf(r,"bottom")&&(f=t.bottom-t.top>c.bottom-c.top?t.top+mf(s,"top")-c.top:t.bottom-c.bottom+mf(s,"bottom")),t.left<c.left+mf(r,"left")?u=-(c.left-t.left+mf(s,"left")):t.right>c.right-mf(r,"right")&&(u=t.right-c.right+mf(s,"right")),u||f)if(l)o.defaultView.scrollBy(u,f);else{let g=a.scrollLeft,y=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let v=a.scrollLeft-g,w=a.scrollTop-y;t={left:t.left-v,top:t.top-w,right:t.right-v,bottom:t.bottom-w}}let m=l?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(m))break;i=m=="absolute"?i.offsetParent:nb(i)}}function h8e(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,s;for(let o=(t.left+t.right)/2,i=n+1;i<Math.min(innerHeight,t.bottom);i+=5){let a=e.root.elementFromPoint(o,i);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:$X(e.dom)}}function $X(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=nb(r));return t}function p8e({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;FX(n,r==0?0:r-t)}function FX(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:s,left:o}=e[n];r.scrollTop!=s+t&&(r.scrollTop=s+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Kg=null;function m8e(e){if(e.setActive)return e.setActive();if(Kg)return e.focus(Kg);let t=$X(e);e.focus(Kg==null?{get preventScroll(){return Kg={preventScroll:!0},!0}}:void 0),Kg||(Kg=!1,FX(t,0))}function BX(e,t){let n,r=2e8,s,o=0,i=t.top,a=t.top,l,c;for(let u=e.firstChild,f=0;u;u=u.nextSibling,f++){let m;if(u.nodeType==1)m=u.getClientRects();else if(u.nodeType==3)m=wf(u).getClientRects();else continue;for(let g=0;g<m.length;g++){let y=m[g];if(y.top<=i&&y.bottom>=a){i=Math.max(y.bottom,i),a=Math.min(y.top,a);let v=y.left>t.left?y.left-t.left:y.right<t.left?t.left-y.right:0;if(v<r){n=u,r=v,s=v&&n.nodeType==3?{left:y.right<t.left?y.right:y.left,top:t.top}:t,u.nodeType==1&&v&&(o=f+(t.left>=(y.left+y.right)/2?1:0));continue}}else y.top>t.top&&!l&&y.left<=t.left&&y.right>=t.left&&(l=u,c={left:Math.max(y.left,Math.min(y.right,t.left)),top:y.top});!n&&(t.left>=y.right&&t.top>=y.top||t.left>=y.left&&t.top>=y.bottom)&&(o=f+1)}}return!n&&l&&(n=l,s=c,r=0),n&&n.nodeType==3?g8e(n,s):!n||r&&n.nodeType==1?{node:e,offset:o}:BX(n,s)}function g8e(e,t){let n=e.nodeValue.length,r=document.createRange(),s;for(let o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);let i=Xh(r,1);if(i.top!=i.bottom&&o7(t,i)){s={node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)};break}}return r.detach(),s||{node:e,offset:0}}function o7(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function b8e(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function y8e(e,t,n){let{node:r,offset:s}=BX(t,n),o=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();o=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return e.docView.posFromDOM(r,s,o)}function v8e(e,t,n,r){let s=-1;for(let o=t,i=!1;o!=e.dom;){let a=e.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!i&&l.left>r.left||l.top>r.top?s=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),i=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return s>-1?s:e.docView.posFromDOM(t,n,-1)}function zX(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=s;;){let i=e.childNodes[o];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(o7(t,c))return zX(i,t,c)}}if((o=(o+1)%r)==s)break}return e}function x8e(e,t){let n=e.dom.ownerDocument,r,s=0,o=c8e(n,t.left,t.top);o&&({node:r,offset:s}=o);let i=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!i||!e.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=e.dom.getBoundingClientRect();if(!o7(t,c)||(i=zX(e.dom,t,c),!i))return null}if(wa)for(let c=i;r&&c;c=nb(c))c.draggable&&(r=void 0);if(i=b8e(i,t),r){if(Oc&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&s++}let c;Mw&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&s--,r==e.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=v8e(e,r,s,t))}a==null&&(a=y8e(e,i,t));let l=e.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function XF(e){return e.top<e.bottom||e.left<e.right}function Xh(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(XF(r))return r}return Array.prototype.find.call(n,XF)||e.getBoundingClientRect()}const w8e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function jX(e,t,n){let{node:r,offset:s,atom:o}=e.docView.domFromPos(t,n<0?-1:1),i=Mw||Oc;if(r.nodeType==3)if(i&&(w8e.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let l=Xh(wf(r,s,s),n);if(Oc&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=Xh(wf(r,s-1,s-1),-1);if(c.top==l.top){let u=Xh(wf(r,s,s+1),-1);if(u.top!=l.top)return Gy(u,u.left<c.left)}}return l}else{let l=s,c=s,u=n<0?1:-1;return n<0&&!s?(c++,u=-1):n>=0&&s==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Gy(Xh(wf(r,l,c),u),u<0)}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(o==null&&s&&(n<0||s==Ac(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return hk(l.getBoundingClientRect(),!1)}if(o==null&&s<Ac(r)){let l=r.childNodes[s];if(l.nodeType==1)return hk(l.getBoundingClientRect(),!0)}return hk(r.getBoundingClientRect(),n>=0)}if(o==null&&s&&(n<0||s==Ac(r))){let l=r.childNodes[s-1],c=l.nodeType==3?wf(l,Ac(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Gy(Xh(c,1),!1)}if(o==null&&s<Ac(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?wf(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return Gy(Xh(c,-1),!0)}return Gy(Xh(r.nodeType==3?wf(r):r,-n),n>=0)}function Gy(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function hk(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function UX(e,t,n){let r=e.state,s=e.root.activeElement;r!=t&&e.updateState(t),s!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),s!=e.dom&&s&&s.focus()}}function E8e(e,t,n){let r=t.selection,s=n=="up"?r.$from:r.$to;return UX(e,t,()=>{let{node:o}=e.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let i=jX(e,s.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=wf(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const _8e=/[\u0590-\u08ac]/;function S8e(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,i=s==r.parent.content.size,a=e.domSelection();return a?!_8e.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:i:UX(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=e.domSelectionRange(),m=a.caretBidiLevel;a.modify("move",n,"character");let g=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:y,focusOffset:v}=e.domSelectionRange(),w=y&&!g.contains(y.nodeType==1?y:y.parentNode)||l==y&&c==v;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return m!=null&&(a.caretBidiLevel=m),w}):r.pos==r.start()||r.pos==r.end()}let QF=null,eB=null,tB=!1;function T8e(e,t,n){return QF==t&&eB==n?tB:(QF=t,eB=n,tB=n=="up"||n=="down"?E8e(e,t,n):S8e(e,t,n))}const Dc=0,nB=1,Yp=2,Td=3;class Ow{constructor(t,n,r,s){this.parent=t,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=Dc,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==t)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let o,i;if(t==this.contentDOM)o=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}else{let o,i;if(t==this.contentDOM)o=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(i):this.posAtEnd}let s;if(t==this.dom&&this.contentDOM)s=n>oa(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=t;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&n==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,s=t;s;s=s.parentNode){let o=this.getDesc(s),i;if(o&&(!n||o.node))if(r&&(i=o.nodeDOM)&&!(i.nodeType==1?i.contains(t.nodeType==1?t:t.parentNode):i==t))r=!1;else return o}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let s=t;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],o=r+s.size;if(r==t&&o!=r){for(;!s.border&&s.children.length;)for(let i=0;i<s.children.length;i++){let a=s.children[i];if(a.size){s=a;break}}return s}if(t<o)return s.descAt(t-r-s.border);r=o}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let i=this.children[r],a=o+i.size;if(a>t||i instanceof VX){s=t-o;break}o=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof HX&&o.side>=0;r--);if(n<=0){let o,i=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,i=!1);return o&&n&&i&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?oa(o.dom)+1:0}}else{let o,i=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,i=!1);return o&&i&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?oa(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(s==-1&&t<=c){let u=i+l.border;if(t>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,u);t=i;for(let f=a;f>0;f--){let m=this.children[f-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){s=oa(m.dom)+1;break}t-=m.size}s==-1&&(s=0)}if(s>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=oa(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:n,fromOffset:s,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,s=!1){let o=Math.min(t,n),i=Math.max(t,n);for(let g=0,y=0;g<this.children.length;g++){let v=this.children[g],w=y+v.size;if(o>y&&i<w)return v.setSelection(t-y-v.border,n-y-v.border,r,s);y=w}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((Oc||wa)&&t==n){let{node:g,offset:y}=a;if(g.nodeType==3){if(f=!!(y&&g.nodeValue[y-1]==`
`),f&&y==g.nodeValue.length)for(let v=g,w;v;v=v.parentNode){if(w=v.nextSibling){w.nodeName=="BR"&&(a=l={node:w.parentNode,offset:oa(w)+1});break}let _=v.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let v=g.childNodes[y-1];f=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(Oc&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let g=u.focusNode.childNodes[u.focusOffset];g&&g.contentEditable=="false"&&(s=!0)}if(!(s||f&&wa)&&vm(a.node,a.offset,u.anchorNode,u.anchorOffset)&&vm(l.node,l.offset,u.focusNode,u.focusOffset))return;let m=!1;if((c.extend||t==n)&&!(f&&Oc)){c.collapse(a.node,a.offset);try{t!=n&&c.extend(l.node,l.offset),m=!0}catch{}}if(!m){if(t>n){let y=a;a=l,l=y}let g=document.createRange();g.setEnd(l.node,l.offset),g.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(g)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],i=r+o.size;if(r==i?t<=i&&n>=r:t<i&&n>r){let a=r+o.border,l=i-o.border;if(t>=a&&n<=l){this.dirty=t==r||n==i?Yp:nB,t==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Td:o.markDirty(t-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Yp:Td}r=i}this.dirty=Yp}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Yp:nB;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class HX extends Ow{constructor(t,n,r,s){let o,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(t,[],i,null),this.widget=n,this.widget=n,o=this}matchesWidget(t){return this.dirty==Dc&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class C8e extends Ow{constructor(t,n,r,s){super(t,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class xm extends Ow{constructor(t,n,r,s,o){super(t,[],r,s),this.mark=n,this.spec=o}static create(t,n,r,s){let o=s.nodeViews[n.type.name],i=o&&o(n,s,r);return(!i||!i.dom)&&(i=Pm.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new xm(t,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&Td||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Td&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Dc){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Dc}}slice(t,n,r){let s=xm.create(this.parent,this.mark,!0,r),o=this.children,i=this.size;n<i&&(o=T6(o,n,i,r)),t>0&&(o=T6(o,0,t,r));for(let a=0;a<o.length;a++)o[a].parent=s;return s.children=o,s}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class x0 extends Ow{constructor(t,n,r,s,o,i,a,l,c){super(t,[],o,i),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(t,n,r,s,o,i){let a=o.nodeViews[n.type.name],l,c=a&&a(n,o,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,s),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=Pm.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let m=u;return u=WX(u,r,n),c?l=new k8e(t,n,r,s,u,f||null,m,c,o,i+1):n.isText?new xC(t,n,r,s,u,m,o):new x0(t,n,r,s,u,f||null,m,o,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>bt.empty)}return t}matchesNode(t,n,r){return this.dirty==Dc&&t.eq(this.node)&&qS(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,s=n,o=t.composing?this.localCompositionInfo(t,n):null,i=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new N8e(this,i&&i.node,t);M8e(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,t):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?Hs.none:this.node.child(u).marks,r,t),l.placeWidget(c,t,s)},(c,u,f,m)=>{l.syncToMarks(c.marks,r,t);let g;l.findNodeMatch(c,u,f,m)||a&&t.state.selection.from>s&&t.state.selection.to<s+c.nodeSize&&(g=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,f,g,t)||l.updateNextNode(c,u,f,t,m,s)||l.addNode(c,u,f,t,s),s+=c.nodeSize}),l.syncToMarks([],r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Yp)&&(i&&this.protectLocalComposition(t,i),qX(this.contentDOM,this.children,t),rb&&O8e(this.dom))}localCompositionInfo(t,n){let{from:r,to:s}=t.state.selection;if(!(t.state.selection instanceof qn)||r<n||s>n+this.node.content.size)return null;let o=t.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let i=o.nodeValue,a=D8e(this.node.content,i,r-n,s-n);return a<0?null:{node:o,pos:a,text:i}}else return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let i=new C8e(this,o,n,s);t.input.compositionNodes.push(i),this.children=T6(this.children,r,r+s.length,t,i)}update(t,n,r,s){return this.dirty==Td||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,s),!0)}updateInner(t,n,r,s){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Dc}updateOuterDeco(t){if(qS(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=GX(this.dom,this.nodeDOM,S6(this.outerDeco,this.node,n),S6(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function rB(e,t,n,r,s){WX(r,t,e);let o=new x0(void 0,e,t,n,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class xC extends x0{constructor(t,n,r,s,o,i,a){super(t,n,r,s,o,null,i,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,s){return this.dirty==Td||this.dirty!=Dc&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Dc||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=t,this.dirty=Dc,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let s=this.node.cut(t,n),o=document.createTextNode(s.text);return new xC(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Td)}get domAtom(){return!1}isText(t){return this.node.text==t}}class VX extends Ow{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Dc&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class k8e extends x0{constructor(t,n,r,s,o,i,a,l,c,u){super(t,n,r,s,o,i,a,c,u),this.spec=l}update(t,n,r,s){if(this.dirty==Td)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let o=this.spec.update(t,n,r);return o&&this.updateInner(t,n,r,s),o}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,s){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function qX(e,t,n){let r=e.firstChild,s=!1;for(let o=0;o<t.length;o++){let i=t[o],a=i.dom;if(a.parentNode==e){for(;a!=r;)r=sB(r),s=!0;r=r.nextSibling}else s=!0,e.insertBefore(a,r);if(i instanceof xm){let l=r?r.previousSibling:e.lastChild;qX(i.contentDOM,i.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=sB(r),s=!0;s&&n.trackWrites==e&&(n.trackWrites=null)}const zv=function(e){e&&(this.nodeName=e)};zv.prototype=Object.create(null);const Kp=[new zv];function S6(e,t,n){if(e.length==0)return Kp;let r=n?Kp[0]:new zv,s=[r];for(let o=0;o<e.length;o++){let i=e[o].type.attrs;if(i){i.nodeName&&s.push(r=new zv(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&s.length==1&&s.push(r=new zv(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function GX(e,t,n,r){if(n==Kp&&r==Kp)return t;let s=t;for(let o=0;o<r.length;o++){let i=r[o],a=n[o];if(o){let l;a&&a.nodeName==i.nodeName&&s!=e&&(l=s.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=Kp[0]),s=l}A8e(s,a||Kp[0],i)}return s}function A8e(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&e.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&e.classList.add(s[o]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(t.style);)e.style.removeProperty(s[1])}n.style&&(e.style.cssText+=n.style)}}function WX(e,t,n){return GX(e,e,Kp,S6(t,n,e.nodeType!=1))}function qS(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function sB(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class N8e{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=I8e(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let s=0,o=this.stack.length>>1,i=Math.min(o,t.length);for(;s<i&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Dc,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=xm.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,s){let o=-1,i;if(s>=this.preMatch.index&&(i=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&i.matchesNode(t,n,r))o=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,n,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,n,r,s,o){let i=this.top.children[s];return i.dirty==Td&&i.dom==i.contentDOM&&(i.dirty=Yp),i.update(t,n,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}t=n}}updateNextNode(t,n,r,s,o,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof x0){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,f,m=this.isLocked(u)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=Td&&qS(n,l.outerDeco));if(!m&&l.update(t,n,r,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!m&&(f=this.recreateWrapper(l,t,n,r,s,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Yp,f.updateChildren(s,i+1),f.dirty=Dc),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,s,o,i){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!qS(r,t.outerDeco)||!s.eq(t.innerDeco))return null;let a=x0.create(this.top,n,r,s,o,i);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,r,s,o){let i=x0.create(this.top,t,n,r,s,o);i.contentDOM&&i.updateChildren(s,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(t,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(t)&&(t==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new HX(this.top,t,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof xm;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof xC)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((wa||Vi)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new VX(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function I8e(e,t){let n=t,r=n.children.length,s=e.childCount,o=new Map,i=[];e:for(;s>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof xm)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(s-1))break;--s,o.set(a,s),i.push(a)}}return{index:s,matched:o,matches:i.reverse()}}function R8e(e,t){return e.type.side-t.type.side}function M8e(e,t,n,r){let s=t.locals(e),o=0;if(s.length==0){for(let c=0;c<e.childCount;c++){let u=e.child(c);r(u,s,t.forChild(o,u),c),o+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let u,f;for(;i<s.length&&s[i].to==o;){let w=s[i++];w.widget&&(u?(f||(f=[u])).push(w):u=w)}if(u)if(f){f.sort(R8e);for(let w=0;w<f.length;w++)n(f[w],c,!!l)}else n(u,c,!!l);let m,g;if(l)g=-1,m=l,l=null;else if(c<e.childCount)g=c,m=e.child(c++);else break;for(let w=0;w<a.length;w++)a[w].to<=o&&a.splice(w--,1);for(;i<s.length&&s[i].from<=o&&s[i].to>o;)a.push(s[i++]);let y=o+m.nodeSize;if(m.isText){let w=y;i<s.length&&s[i].from<w&&(w=s[i].from);for(let _=0;_<a.length;_++)a[_].to<w&&(w=a[_].to);w<y&&(l=m.cut(w-o),m=m.cut(0,w-o),y=w,g=-1)}else for(;i<s.length&&s[i].to<y;)i++;let v=m.isInline&&!m.isLeaf?a.filter(w=>!w.inline):a.slice();r(m,v,t.forChild(o,m),g),o=y}}function O8e(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function D8e(e,t,n,r){for(let s=0,o=0;s<e.childCount&&o<=r;){let i=e.child(s++),a=o;if(o+=i.nodeSize,!i.isText)continue;let l=i.text;for(;s<e.childCount;){let c=e.child(s++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){if(o>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let c=a<r?l.lastIndexOf(t,r-a-1):-1;if(c>=0&&c+t.length+a>=n)return a+c;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function T6(e,t,n,r,s){let o=[];for(let i=0,a=0;i<e.length;i++){let l=e[i],c=a,u=a+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),s&&(o.push(s),s=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function i7(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let s=e.docView.nearestDesc(n.focusNode),o=s&&s.size==0,i=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(vC(n)){for(l=i;s&&!s.node;)s=s.parent;let f=s.node;if(s&&f.isAtom&&Nn.isSelectable(f)&&s.parent&&!(f.isInline&&a8e(n.focusNode,n.focusOffset,s.dom))){let m=s.posBefore;c=new Nn(i==m?a:r.resolve(m))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=i,m=i;for(let g=0;g<n.rangeCount;g++){let y=n.getRangeAt(g);f=Math.min(f,e.docView.posFromDOM(y.startContainer,y.startOffset,1)),m=Math.max(m,e.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(f<0)return null;[l,i]=m==e.state.selection.anchor?[m,f]:[f,m],a=r.resolve(i)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let f=t=="pointer"||e.state.selection.head<a.pos&&!o?1:-1;c=a7(e,u,a,f)}return c}function YX(e){return e.editable?e.hasFocus():ZX(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function jf(e,t=!1){let n=e.state.selection;if(KX(e,n),!!YX(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Vi){let r=e.domSelectionRange(),s=e.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&vm(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)L8e(e);else{let{anchor:r,head:s}=n,o,i;oB&&!(n instanceof qn)&&(n.$from.parent.inlineContent||(o=iB(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=iB(e,n.to))),e.docView.setSelection(r,s,e,t),oB&&(o&&aB(o),i&&aB(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&P8e(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const oB=wa||Vi&&PX<63;function iB(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),s=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(wa&&s&&s.contentEditable=="false")return pk(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return pk(s);if(o)return pk(o)}}function pk(e){return e.contentEditable="true",wa&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function aB(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function P8e(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!YX(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function L8e(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,oa(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&gl&&v0<=11&&(n.disabled=!0,n.disabled=!1)}function KX(e,t){if(t instanceof Nn){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(lB(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else lB(e)}function lB(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function a7(e,t,n,r){return e.someProp("createSelectionBetween",s=>s(e,t,n))||qn.between(t,n,r)}function cB(e){return e.editable&&!e.hasFocus()?!1:ZX(e)}function ZX(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function $8e(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return vm(t.node,t.offset,n.anchorNode,n.anchorOffset)}function C6(e,t){let{$anchor:n,$head:r}=e.selection,s=t>0?n.max(r):n.min(r),o=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return o&&Vn.findFrom(o,t)}function r0(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function uB(e,t,n){let r=e.state.selection;if(r instanceof qn)if(n.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let i=e.state.doc.resolve(s.pos+o.nodeSize*(t<0?-1:1));return r0(e,new qn(r.$anchor,i))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let s=C6(e.state,t);return s&&s instanceof Nn?r0(e,s):!1}else if(!(_c&&n.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter,i;if(!o||o.isText)return!1;let a=t<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(i=e.docView.descAt(a))&&!i.contentDOM?Nn.isSelectable(o)?r0(e,new Nn(t<0?e.state.doc.resolve(s.pos-o.nodeSize):s)):Mw?r0(e,new qn(e.state.doc.resolve(t<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Nn&&r.node.isInline)return r0(e,new qn(t>0?r.$to:r.$from));{let s=C6(e.state,t);return s?r0(e,s):!1}}}function GS(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function jv(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Zg(e,t){return t<0?F8e(e):B8e(e)}function F8e(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s,o,i=!1;for(Oc&&n.nodeType==1&&r<GS(n)&&jv(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(jv(a,-1))s=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(JX(n))break;{let a=n.previousSibling;for(;a&&jv(a,-1);)s=n.parentNode,o=oa(a),a=a.previousSibling;if(a)n=a,r=GS(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}i?k6(e,n,r):s&&k6(e,s,o)}function B8e(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s=GS(n),o,i;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(jv(a,1))o=n,i=++r;else break}else{if(JX(n))break;{let a=n.nextSibling;for(;a&&jv(a,1);)o=a.parentNode,i=oa(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=GS(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}o&&k6(e,o,i)}function JX(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function z8e(e,t){for(;e&&t==e.childNodes.length&&!Rw(e);)t=oa(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function j8e(e,t){for(;e&&!t&&!Rw(e);)t=oa(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function k6(e,t,n){if(t.nodeType!=3){let o,i;(i=z8e(t,n))?(t=i,n=0):(o=j8e(t,n))&&(t=o,n=o.nodeValue.length)}let r=e.domSelection();if(!r)return;if(vC(r)){let o=document.createRange();o.setEnd(t,n),o.setStart(t,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:s}=e;setTimeout(()=>{e.state==s&&jf(e)},50)}function dB(e,t){let n=e.state.doc.resolve(t);if(!(Vi||LX)&&n.parent.inlineContent){let s=e.coordsAtPos(t);if(t>n.start()){let o=e.coordsAtPos(t-1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(t<n.end()){let o=e.coordsAtPos(t+1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function fB(e,t,n){let r=e.state.selection;if(r instanceof qn&&!r.empty||n.indexOf("s")>-1||_c&&n.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let i=C6(e.state,t);if(i&&i instanceof Nn)return r0(e,i)}if(!s.parent.inlineContent){let i=t<0?s:o,a=r instanceof Zl?Vn.near(i,t):Vn.findFrom(i,t);return a?r0(e,a):!1}return!1}function hB(e,t){if(!(e.state.selection instanceof qn))return!0;let{$head:n,$anchor:r,empty:s}=e.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let i=e.state.tr;return t<0?i.delete(n.pos-o.nodeSize,n.pos):i.delete(n.pos,n.pos+o.nodeSize),e.dispatch(i),!0}return!1}function pB(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function U8e(e){if(!wa||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;pB(e,r,"true"),setTimeout(()=>pB(e,r,"false"),20)}return!1}function H8e(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function V8e(e,t){let n=t.keyCode,r=H8e(t);if(n==8||_c&&n==72&&r=="c")return hB(e,-1)||Zg(e,-1);if(n==46&&!t.shiftKey||_c&&n==68&&r=="c")return hB(e,1)||Zg(e,1);if(n==13||n==27)return!0;if(n==37||_c&&n==66&&r=="c"){let s=n==37?dB(e,e.state.selection.from)=="ltr"?-1:1:-1;return uB(e,s,r)||Zg(e,s)}else if(n==39||_c&&n==70&&r=="c"){let s=n==39?dB(e,e.state.selection.from)=="ltr"?1:-1:1;return uB(e,s,r)||Zg(e,s)}else{if(n==38||_c&&n==80&&r=="c")return fB(e,-1,r)||Zg(e,-1);if(n==40||_c&&n==78&&r=="c")return U8e(e)||fB(e,1,r)||Zg(e,1);if(r==(_c?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function l7(e,t){e.someProp("transformCopied",g=>{t=g(t,e)});let n=[],{content:r,openStart:s,openEnd:o}=t;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let g=r.firstChild;n.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),r=g.content}let i=e.someProp("clipboardSerializer")||Pm.fromSchema(e.state.schema),a=rQ(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=nQ[c.nodeName.toLowerCase()]);){for(let g=u.length-1;g>=0;g--){let y=a.createElement(u[g]);for(;l.firstChild;)y.appendChild(l.firstChild);l.appendChild(y),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let m=e.someProp("clipboardTextSerializer",g=>g(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:m,slice:t}}function XX(e,t,n,r,s){let o=s.parent.type.spec.code,i,a;if(!n&&!t)return null;let l=!!t&&(r||o||!n);if(l){if(e.someProp("transformPastedText",m=>{t=m(t,o||r,e)}),o)return a=new Zt(bt.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",m=>{a=m(a,e,!0)}),a;let f=e.someProp("clipboardTextParser",m=>m(t,s,r,e));if(f)a=f;else{let m=s.marks(),{schema:g}=e.state,y=Pm.fromSchema(g);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(v=>{let w=i.appendChild(document.createElement("p"));v&&w.appendChild(y.serializeNode(g.text(v,m)))})}}else e.someProp("transformPastedHTML",f=>{n=f(n,e)}),i=Y8e(n),Mw&&K8e(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let m=i.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;i=m}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||Fv.fromSchema(e.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!q8e.test(m.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Z8e(mB(a,+u[1],+u[2]),u[4]);else if(a=Zt.maxOpen(G8e(a.content,s),!0),a.openStart||a.openEnd){let f=0,m=0;for(let g=a.content.firstChild;f<a.openStart&&!g.type.spec.isolating;f++,g=g.firstChild);for(let g=a.content.lastChild;m<a.openEnd&&!g.type.spec.isolating;m++,g=g.lastChild);a=mB(a,f,m)}return e.someProp("transformPasted",f=>{a=f(a,e,l)}),a}const q8e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function G8e(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let s=t.node(n).contentMatchAt(t.index(n)),o,i=[];if(e.forEach(a=>{if(!i)return;let l=s.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&o.length&&eQ(l,o,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=tQ(i[i.length-1],o.length));let u=QX(a,l);i.push(u),s=s.matchType(u.type),o=l}}),i)return bt.from(i)}return e}function QX(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,bt.from(e));return e}function eQ(e,t,n,r,s){if(s<e.length&&s<t.length&&e[s]==t[s]){let o=eQ(e,t,n,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==e.length-1?n.type:e[s+1]))return r.copy(r.content.append(bt.from(QX(n,e,s+1))))}}function tQ(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,tQ(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(bt.empty,!0);return e.copy(n.append(r))}function A6(e,t,n,r,s,o){let i=t<0?e.firstChild:e.lastChild,a=i.content;return e.childCount>1&&(o=0),s<r-1&&(a=A6(a,t,n,r,s+1,o)),s>=n&&(a=t<0?i.contentMatchAt(0).fillBefore(a,o<=s).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(bt.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,i.copy(a))}function mB(e,t,n){return t<e.openStart&&(e=new Zt(A6(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Zt(A6(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const nQ={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let gB=null;function rQ(){return gB||(gB=document.implementation.createHTMLDocument("title"))}let mk=null;function W8e(e){let t=window.trustedTypes;return t?(mk||(mk=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),mk.createHTML(e)):e}function Y8e(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=rQ().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),s;if((s=r&&nQ[r[1].toLowerCase()])&&(e=s.map(o=>"<"+o+">").join("")+e+s.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=W8e(e),s)for(let o=0;o<s.length;o++)n=n.querySelector(s[o])||n;return n}function K8e(e){let t=e.querySelectorAll(Vi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function Z8e(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:s,openStart:o,openEnd:i}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=bt.from(l.create(r[a+1],s)),o++,i++}return new Zt(s,o,i)}const za={},ja={},J8e={touchstart:!0,touchmove:!0};class X8e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Q8e(e){for(let t in za){let n=za[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{t7e(e,r)&&!c7(e,r)&&(e.editable||!(r.type in ja))&&n(e,r)},J8e[t]?{passive:!0}:void 0)}wa&&e.dom.addEventListener("input",()=>null),N6(e)}function u0(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function e7e(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function N6(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>c7(e,r))})}function c7(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function t7e(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function n7e(e,t){!c7(e,t)&&za[t.type]&&(e.editable||!(t.type in ja))&&za[t.type](e,t)}ja.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!oQ(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Df&&Vi&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),rb&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",s=>s(e,Hp(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||V8e(e,n)?n.preventDefault():u0(e,"key")};ja.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};ja.keypress=(e,t)=>{let n=t;if(oQ(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||_c&&n.metaKey)return;if(e.someProp("handleKeyPress",s=>s(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof qn)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),o=()=>e.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!e.someProp("handleTextInput",i=>i(e,r.$from.pos,r.$to.pos,s,o))&&e.dispatch(o()),n.preventDefault()}};function wC(e){return{left:e.clientX,top:e.clientY}}function r7e(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function u7(e,t,n,r,s){if(r==-1)return!1;let o=e.state.doc.resolve(r);for(let i=o.depth+1;i>0;i--)if(e.someProp(t,a=>i>o.depth?a(e,n,o.nodeAfter,o.before(i),s,!0):a(e,n,o.node(i),o.before(i),s,!1)))return!0;return!1}function R1(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function s7e(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Nn.isSelectable(r)?(R1(e,new Nn(n)),!0):!1}function o7e(e,t){if(t==-1)return!1;let n=e.state.selection,r,s;n instanceof Nn&&(r=n.node);let o=e.state.doc.resolve(t);for(let i=o.depth+1;i>0;i--){let a=i>o.depth?o.nodeAfter:o.node(i);if(Nn.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?s=o.before(n.$from.depth):s=o.before(i);break}}return s!=null?(R1(e,Nn.create(e.state.doc,s)),!0):!1}function i7e(e,t,n,r,s){return u7(e,"handleClickOn",t,n,r)||e.someProp("handleClick",o=>o(e,t,r))||(s?o7e(e,n):s7e(e,n))}function a7e(e,t,n,r){return u7(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",s=>s(e,t,r))}function l7e(e,t,n,r){return u7(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",s=>s(e,t,r))||c7e(e,n,r)}function c7e(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(R1(e,qn.create(r,0,r.content.size)),!0):!1;let s=r.resolve(t);for(let o=s.depth+1;o>0;o--){let i=o>s.depth?s.nodeAfter:s.node(o),a=s.before(o);if(i.inlineContent)R1(e,qn.create(r,a+1,a+1+i.content.size));else if(Nn.isSelectable(i))R1(e,Nn.create(r,a));else continue;return!0}}function d7(e){return WS(e)}const sQ=_c?"metaKey":"ctrlKey";za.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=d7(e),s=Date.now(),o="singleClick";s-e.input.lastClick.time<500&&r7e(n,e.input.lastClick)&&!n[sQ]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?o="doubleClick":e.input.lastClick.type=="doubleClick"&&(o="tripleClick")),e.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:o,button:n.button};let i=e.posAtCoords(wC(n));i&&(o=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new u7e(e,i,n,!!r)):(o=="doubleClick"?a7e:l7e)(e,i.pos,i.inside,n)?n.preventDefault():u0(e,"pointer"))};class u7e{constructor(t,n,r,s){this.view=t,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[sQ],this.allowDefault=r.shiftKey;let o,i;if(n.inside>-1)o=t.state.doc.nodeAt(n.inside),i=n.inside;else{let u=t.state.doc.resolve(n.pos);o=u.parent,i=u.depth?u.before():0}const a=s?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=t.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof Nn&&c.from<=i&&c.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Oc&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),u0(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>jf(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(wC(t))),this.updateAllowDefault(t),this.allowDefault||!n?u0(this.view,"pointer"):i7e(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||wa&&this.mightDrag&&!this.mightDrag.node.isAtom||Vi&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(R1(this.view,Vn.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):u0(this.view,"pointer")}move(t){this.updateAllowDefault(t),u0(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}za.touchstart=e=>{e.input.lastTouch=Date.now(),d7(e),u0(e,"pointer")};za.touchmove=e=>{e.input.lastTouch=Date.now(),u0(e,"pointer")};za.contextmenu=e=>d7(e);function oQ(e,t){return e.composing?!0:wa&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const d7e=Df?5e3:-1;ja.compositionstart=ja.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof qn&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Vi&&LX&&f7e(e)))e.markCursor=e.state.storedMarks||n.marks(),WS(e,!0),e.markCursor=null;else if(WS(e,!t.selection.empty),Oc&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let i=o<0?s.lastChild:s.childNodes[o-1];if(!i)break;if(i.nodeType==3){let a=e.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else s=i,o=-1}}e.input.composing=!0}iQ(e,d7e)};function f7e(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||t.nodeType!=1||n>=t.childNodes.length)return!1;let r=t.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}ja.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,iQ(e,20))};function iQ(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>WS(e),t))}function aQ(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=p7e());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function h7e(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=o8e(t.focusNode,t.focusOffset),r=i8e(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,o=e.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function p7e(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function WS(e,t=!1){if(!(Df&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),aQ(e),t||e.docView&&e.docView.dirty){let n=i7(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function m7e(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Px=gl&&v0<15||rb&&u8e<604;za.copy=ja.cut=(e,t)=>{let n=t,r=e.state.selection,s=n.type=="cut";if(r.empty)return;let o=Px?null:n.clipboardData,i=r.content(),{dom:a,text:l}=l7(e,i);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):m7e(e,a),s&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function g7e(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function b7e(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Lx(e,r.value,null,s,t):Lx(e,r.textContent,r.innerHTML,s,t)},50)}function Lx(e,t,n,r,s){let o=XX(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,s,o||Zt.empty)))return!0;if(!o)return!1;let i=g7e(o),a=i?e.state.tr.replaceSelectionWith(i,r):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function lQ(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ja.paste=(e,t)=>{let n=t;if(e.composing&&!Df)return;let r=Px?null:n.clipboardData,s=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Lx(e,lQ(r),r.getData("text/html"),s,n)?n.preventDefault():b7e(e,n)};class cQ{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const y7e=_c?"altKey":"ctrlKey";function uQ(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[y7e]}za.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=e.state.selection,o=s.empty?null:e.posAtCoords(wC(n)),i;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof Nn?s.to-1:s.to))){if(r&&r.mightDrag)i=Nn.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=e.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(i=Nn.create(e.state.doc,f.posBefore))}}let a=(i||e.state.selection).content(),{dom:l,text:c,slice:u}=l7(e,a);(!n.dataTransfer.files.length||!Vi||PX>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Px?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Px||n.dataTransfer.setData("text/plain",c),e.dragging=new cQ(u,uQ(e,n),i)};za.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};ja.dragover=ja.dragenter=(e,t)=>t.preventDefault();ja.drop=(e,t)=>{try{v7e(e,t,e.dragging)}finally{e.dragging=null}};function v7e(e,t,n){if(!t.dataTransfer)return;let r=e.posAtCoords(wC(t));if(!r)return;let s=e.state.doc.resolve(r.pos),o=n&&n.slice;o?e.someProp("transformPasted",g=>{o=g(o,e,!1)}):o=XX(e,lQ(t.dataTransfer),Px?null:t.dataTransfer.getData("text/html"),!1,s);let i=!!(n&&uQ(e,t));if(e.someProp("handleDrop",g=>g(e,t,o||Zt.empty,i))){t.preventDefault();return}if(!o)return;t.preventDefault();let a=o?hX(e.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let l=e.state.tr;if(i){let{node:g}=n;g?g.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=l.doc;if(u?l.replaceRangeWith(c,c,o.content.firstChild):l.replaceRange(c,c,o),l.doc.eq(f))return;let m=l.doc.resolve(c);if(u&&Nn.isSelectable(o.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new Nn(m));else{let g=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((y,v,w,_)=>g=_),l.setSelection(a7(e,m,l.doc.resolve(g)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}za.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&jf(e)},20))};za.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};za.beforeinput=(e,t)=>{if(Vi&&Df&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",o=>o(e,Hp(8,"Backspace")))))return;let{$cursor:s}=e.state.selection;s&&s.pos>0&&e.dispatch(e.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let e in ja)za[e]=ja[e];function $x(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class YS{constructor(t,n){this.toDOM=t,this.spec=n||rm,this.side=this.spec.side||0}map(t,n,r,s){let{pos:o,deleted:i}=t.mapResult(n.from+s,this.side<0?-1:1);return i?null:new la(o-r,o-r,this)}valid(){return!0}eq(t){return this==t||t instanceof YS&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&$x(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class w0{constructor(t,n){this.attrs=t,this.spec=n||rm}map(t,n,r,s){let o=t.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,i=t.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=i?null:new la(o,i,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof w0&&$x(this.attrs,t.attrs)&&$x(this.spec,t.spec)}static is(t){return t.type instanceof w0}destroy(){}}class f7{constructor(t,n){this.attrs=t,this.spec=n||rm}map(t,n,r,s){let o=t.mapResult(n.from+s,1);if(o.deleted)return null;let i=t.mapResult(n.to+s,-1);return i.deleted||i.pos<=o.pos?null:new la(o.pos-r,i.pos-r,this)}valid(t,n){let{index:r,offset:s}=t.content.findIndex(n.from),o;return s==n.from&&!(o=t.child(r)).isText&&s+o.nodeSize==n.to}eq(t){return this==t||t instanceof f7&&$x(this.attrs,t.attrs)&&$x(this.spec,t.spec)}destroy(){}}class la{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new la(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new la(t,t,new YS(n,r))}static inline(t,n,r,s){return new la(t,n,new w0(r,s))}static node(t,n,r,s){return new la(t,n,new f7(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof w0}get widget(){return this.type instanceof YS}}const o1=[],rm={};class co{constructor(t,n){this.local=t.length?t:o1,this.children=n.length?n:o1}static create(t,n){return n.length?KS(n,t,0,rm):ga}find(t,n,r){let s=[];return this.findInner(t??0,n??1e9,s,0,r),s}findInner(t,n,r,s,o){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=t&&(!o||o(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>t){let a=this.children[i]+1;this.children[i+2].findInner(t-a,n-a,r,s+a,o)}}map(t,n,r){return this==ga||t.maps.length==0?this:this.mapInner(t,n,0,0,r||rm)}mapInner(t,n,r,s,o){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,s);l&&l.type.valid(n,l)?(i||(i=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?x7e(this.children,i||[],t,n,r,s,o):i?new co(i.sort(sm),o1):ga}add(t,n){return n.length?this==ga?co.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let s,o=0;t.forEach((a,l)=>{let c=l+r,u;if(u=fQ(n,a,c)){for(s||(s=this.children.slice());o<s.length&&s[o]<l;)o+=3;s[o]==l?s[o+2]=s[o+2].addInner(a,u,c+1):s.splice(o,0,l,l+a.nodeSize,KS(u,a,c+1,rm)),o+=3}});let i=dQ(o?hQ(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(t,i[a])||i.splice(a--,1);return new co(i.length?this.local.concat(i).sort(sm):this.local,s||this.children)}remove(t){return t.length==0||this==ga?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let i,a=r[o]+n,l=r[o+1]+n;for(let u=0,f;u<t.length;u++)(f=t[u])&&f.from>a&&f.to<l&&(t[u]=null,(i||(i=[])).push(f));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(i,a+1);c!=ga?r[o+2]=c:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,i;o<t.length;o++)if(i=t[o])for(let a=0;a<s.length;a++)s[a].eq(i,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new co(s,r):ga}forChild(t,n){if(this==ga)return this;if(n.isLeaf)return co.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let o=t+1,i=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>o&&l.type instanceof w0){let c=Math.max(o,l.from)-o,u=Math.min(i,l.to)-o;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new co(s.sort(sm),o1);return r?new i0([a,r]):a}return r||ga}eq(t){if(this==t)return!0;if(!(t instanceof co)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return h7(this.localsInner(t))}localsInner(t){if(this==ga)return o1;if(t.inlineContent||!this.local.some(w0.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof w0||n.push(this.local[r]);return n}forEachSet(t){t(this)}}co.empty=new co([],[]);co.removeOverlap=h7;const ga=co.empty;class i0{constructor(t){this.members=t}map(t,n){const r=this.members.map(s=>s.map(t,n,rm));return i0.from(r)}forChild(t,n){if(n.isLeaf)return co.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(t,n);o!=ga&&(o instanceof i0?r=r.concat(o.members):r.push(o))}return i0.from(r)}eq(t){if(!(t instanceof i0)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(t);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let i=0;i<o.length;i++)n.push(o[i])}}return n?h7(r?n:n.sort(sm)):o1}static from(t){switch(t.length){case 0:return ga;case 1:return t[0];default:return new i0(t.every(n=>n instanceof co)?t:t.reduce((n,r)=>n.concat(r instanceof co?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function x7e(e,t,n,r,s,o,i){let a=e.slice();for(let c=0,u=o;c<n.maps.length;c++){let f=0;n.maps[c].forEach((m,g,y,v)=>{let w=v-y-(g-m);for(let _=0;_<a.length;_+=3){let S=a[_+1];if(S<0||m>S+u-f)continue;let k=a[_]+u-f;g>=k?a[_+1]=m<=k?-2:-1:m>=u&&w&&(a[_]+=w,a[_+1]+=w)}f+=w}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(e[c]+o),f=u-s;if(f<0||f>=r.content.size){l=!0;continue}let m=n.map(e[c+1]+o,-1),g=m-s,{index:y,offset:v}=r.content.findIndex(f),w=r.maybeChild(y);if(w&&v==f&&v+w.nodeSize==g){let _=a[c+2].mapInner(n,w,u+1,e[c]+o+1,i);_!=ga?(a[c]=f,a[c+1]=g,a[c+2]=_):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=w7e(a,e,t,n,s,o,i),u=KS(c,r,0,i);t=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,m=0;f<u.children.length;f+=3){let g=u.children[f];for(;m<a.length&&a[m]<g;)m+=3;a.splice(m,0,u.children[f],u.children[f+1],u.children[f+2])}}return new co(t.sort(sm),a)}function dQ(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let s=e[r];n.push(new la(s.from+t,s.to+t,s.type))}return n}function w7e(e,t,n,r,s,o,i){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,s,c);f?n.push(f):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+o+1);return n}function fQ(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,s=null;for(let o=0,i;o<e.length;o++)(i=e[o])&&i.from>n&&i.to<r&&((s||(s=[])).push(i),e[o]=null);return s}function hQ(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function KS(e,t,n,r){let s=[],o=!1;t.forEach((a,l)=>{let c=fQ(e,a,l+n);if(c){o=!0;let u=KS(c,a,n+l+1,r);u!=ga&&s.push(l,l+a.nodeSize,u)}});let i=dQ(o?hQ(e):e,-n).sort(sm);for(let a=0;a<i.length;a++)i[a].type.valid(t,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||s.length?new co(i,s):ga}function sm(e,t){return e.from-t.from||e.to-t.to}function h7(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let s=n+1;s<t.length;s++){let o=t[s];if(o.from==r.from){o.to!=r.to&&(t==e&&(t=e.slice()),t[s]=o.copy(o.from,r.to),bB(t,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),bB(t,s,r.copy(o.from,r.to)));break}}}return t}function bB(e,t,n){for(;t<e.length&&sm(n,e[t])>0;)t++;e.splice(t,0,n)}function gk(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=ga&&t.push(r)}),e.cursorWrapper&&t.push(co.create(e.state.doc,[e.cursorWrapper.deco])),i0.from(t)}const E7e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},_7e=gl&&v0<=11;class S7e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class T7e{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new S7e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);gl&&v0<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),_7e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,E7e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(cB(this.view)){if(this.suppressingSelectionUpdates)return jf(this.view);if(gl&&v0<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&vm(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let o=t.focusNode;o;o=nb(o))n.add(o);for(let o=t.anchorNode;o;o=nb(o))if(n.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&cB(t)&&!this.ignoreSelectionChange(r),o=-1,i=-1,a=!1,l=[];if(t.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],l);f&&(o=o<0?f.from:Math.min(f.from,o),i=i<0?f.to:Math.max(f.to,i),f.typeOver&&(a=!0))}if(Oc&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,m]=u;f.parentNode&&f.parentNode.parentNode==m.parentNode?m.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let m of u){let g=m.parentNode;g&&g.nodeName=="LI"&&(!f||A7e(t,f)!=g)&&m.remove()}}}else if((Vi||wa)&&l.some(u=>u.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let f=u.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;o<0&&s&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&vC(r)&&(c=i7(t))&&c.eq(Vn.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,jf(t),this.currentSelection.set(r),t.scrollToSelection()):(o>-1||s)&&(o>-1&&(t.docView.markDirty(o,i),C7e(t)),this.handleDOMChange(o,i,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||jf(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let f=t.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let s=t.previousSibling,o=t.nextSibling;if(gl&&v0<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:f,nextSibling:m}=t.addedNodes[u];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(s=f),(!m||Array.prototype.indexOf.call(t.addedNodes,m)<0)&&(o=m)}let i=s&&s.parentNode==t.target?oa(s)+1:0,a=r.localPosFromDOM(t.target,i,-1),l=o&&o.parentNode==t.target?oa(o):t.target.childNodes.length,c=r.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let yB=new WeakMap,vB=!1;function C7e(e){if(!yB.has(e)&&(yB.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Oc,vB)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),vB=!0}}function xB(e,t){let n=t.startContainer,r=t.startOffset,s=t.endContainer,o=t.endOffset,i=e.domAtPos(e.state.selection.anchor);return vm(i.node,i.offset,s,o)&&([n,r,s,o]=[s,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}}function k7e(e,t){if(t.getComposedRanges){let s=t.getComposedRanges(e.root)[0];if(s)return xB(e,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?xB(e,n):null}function A7e(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function N7e(e,t,n){let{node:r,fromOffset:s,toOffset:o,from:i,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),c,u=l.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],vC(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Vi&&e.input.lastKeyCode===8)for(let w=o;w>s;w--){let _=r.childNodes[w-1],S=_.pmViewDesc;if(_.nodeName=="BR"&&!S){o=w;break}if(!S||S.size)break}let f=e.state.doc,m=e.someProp("domParser")||Fv.fromSchema(e.state.schema),g=f.resolve(i),y=null,v=m.parse(r,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:s,to:o,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:I7e,context:g});if(c&&c[0].pos!=null){let w=c[0].pos,_=c[1]&&c[1].pos;_==null&&(_=w),y={anchor:w+i,head:_+i}}return{doc:v,sel:y,from:i,to:a}}function I7e(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(wa&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||wa&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const R7e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function M7e(e,t,n,r,s){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let P=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,j=i7(e,P);if(j&&!e.state.selection.eq(j)){if(Vi&&Df&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",U=>U(e,Hp(13,"Enter"))))return;let q=e.state.tr.setSelection(j);P=="pointer"?q.setMeta("pointer",!0):P=="key"&&q.scrollIntoView(),o&&q.setMeta("composition",o),e.dispatch(q)}return}let i=e.state.doc.resolve(t),a=i.sharedDepth(n);t=i.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,c=N7e(e,t,n),u=e.state.doc,f=u.slice(c.from,c.to),m,g;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(m=e.state.selection.to,g="end"):(m=e.state.selection.from,g="start"),e.input.lastKeyCode=null;let y=P7e(f.content,c.doc.content,c.from,m,g);if(y&&e.input.domChangeCount++,(rb&&e.input.lastIOSEnter>Date.now()-225||Df)&&s.some(P=>P.nodeType==1&&!R7e.test(P.nodeName))&&(!y||y.endA>=y.endB)&&e.someProp("handleKeyDown",P=>P(e,Hp(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!y)if(r&&l instanceof qn&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))y={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let P=wB(e,e.state.doc,c.sel);if(P&&!P.eq(e.state.selection)){let j=e.state.tr.setSelection(P);o&&j.setMeta("composition",o),e.dispatch(j)}}return}e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof qn&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),gl&&v0<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>c.from&&c.doc.textBetween(y.start-c.from-1,y.start-c.from+1)==" "&&(y.start--,y.endA--,y.endB--);let v=c.doc.resolveNoCache(y.start-c.from),w=c.doc.resolveNoCache(y.endB-c.from),_=u.resolve(y.start),S=v.sameParent(w)&&v.parent.inlineContent&&_.end()>=y.endA;if((rb&&e.input.lastIOSEnter>Date.now()-225&&(!S||s.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!S&&v.pos<c.doc.content.size&&(!v.sameParent(w)||!v.parent.inlineContent)&&v.pos<w.pos&&!/\S/.test(c.doc.textBetween(v.pos,w.pos,"","")))&&e.someProp("handleKeyDown",P=>P(e,Hp(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>y.start&&D7e(u,y.start,y.endA,v,w)&&e.someProp("handleKeyDown",P=>P(e,Hp(8,"Backspace")))){Df&&Vi&&e.domObserver.suppressSelectionUpdates();return}Vi&&y.endB==y.start&&(e.input.lastChromeDelete=Date.now()),Df&&!S&&v.start()!=w.start()&&w.parentOffset==0&&v.depth==w.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==y.endA&&(y.endB-=2,w=c.doc.resolveNoCache(y.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(P){return P(e,Hp(13,"Enter"))})},20));let k=y.start,R=y.endA,O=P=>{let j=P||e.state.tr.replace(k,R,c.doc.slice(y.start-c.from,y.endB-c.from));if(c.sel){let q=wB(e,j.doc,c.sel);q&&!(Vi&&e.composing&&q.empty&&(y.start!=y.endB||e.input.lastChromeDelete<Date.now()-100)&&(q.head==k||q.head==j.mapping.map(R)-1)||gl&&q.empty&&q.head==k)&&j.setSelection(q)}return o&&j.setMeta("composition",o),j.scrollIntoView()},M;if(S)if(v.pos==w.pos){gl&&v0<=11&&v.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>jf(e),20));let P=O(e.state.tr.delete(k,R)),j=u.resolve(y.start).marksAcross(u.resolve(y.endA));j&&P.ensureMarks(j),e.dispatch(P)}else if(y.endA==y.endB&&(M=O7e(v.parent.content.cut(v.parentOffset,w.parentOffset),_.parent.content.cut(_.parentOffset,y.endA-_.start())))){let P=O(e.state.tr);M.type=="add"?P.addMark(k,R,M.mark):P.removeMark(k,R,M.mark),e.dispatch(P)}else if(v.parent.child(v.index()).isText&&v.index()==w.index()-(w.textOffset?0:1)){let P=v.parent.textBetween(v.parentOffset,w.parentOffset),j=()=>O(e.state.tr.insertText(P,k,R));e.someProp("handleTextInput",q=>q(e,k,R,P,j))||e.dispatch(j())}else e.dispatch(O());else e.dispatch(O())}function wB(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:a7(e,t.resolve(n.anchor),t.resolve(n.head))}function O7e(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,s=n,o=r,i,a,l;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(s.length==1&&o.length==0)a=s[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&o.length==1)a=o[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(bt.from(c).eq(e))return{mark:a,type:i}}function D7e(e,t,n,r,s){if(n-t<=s.pos-r.pos||bk(r,!0,!1)<s.pos)return!1;let o=e.resolve(t);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==t+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let i=e.resolve(bk(o,!0,!0));return!i.parent.isTextblock||i.pos>n||bk(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function bk(e,t,n){let r=e.depth,s=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,s++,t=!1;if(n){let o=e.node(r).maybeChild(e.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function P7e(e,t,n,r,s){let o=e.findDiffStart(t,n);if(o==null)return null;let{a:i,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(s=="end"){let l=Math.max(0,o-Math.min(i,a));r-=i+l-o}if(i<o&&e.size<t.size){let l=r<=o&&r>=i?o-r:0;o-=l,o&&o<t.size&&EB(t.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-i),i=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<e.size&&EB(e.textBetween(o-1,o+1))&&(o+=l?1:-1),i=o+(i-a),a=o}return{start:o,endA:i,endB:a}}function EB(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class pQ{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new X8e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(kB),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=TB(this),SB(this),this.nodeViews=CB(this),this.docView=rB(this.state.doc,_B(this),gk(this),this.dom,this),this.domObserver=new T7e(this,(r,s,o,i)=>M7e(this,r,s,o,i)),this.domObserver.start(),Q8e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&N6(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(kB),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let s=this.state,o=!1,i=!1;t.storedMarks&&this.composing&&(aQ(this),i=!0),this.state=t;let a=s.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let g=CB(this);$7e(g,this.nodeViews)&&(this.nodeViews=g,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&N6(this),this.editable=TB(this),SB(this);let l=gk(this),c=_B(this),u=s.plugins!=t.plugins&&!s.doc.eq(t.doc)?"reset":t.scrollToSelection>s.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(t.doc,c,l);(f||!t.selection.eq(s.selection))&&(i=!0);let m=u=="preserve"&&i&&this.dom.style.overflowAnchor==null&&h8e(this);if(i){this.domObserver.stop();let g=f&&(gl||Vi)&&!this.composing&&!s.selection.empty&&!t.selection.empty&&L7e(s.selection,t.selection);if(f){let y=Vi?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=h7e(this)),(o||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=rB(t.doc,c,l,this.dom,this)),y&&!this.trackWrites&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&$8e(this))?jf(this,g):(KX(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():m&&p8e(m)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Nn){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&JF(this,n.getBoundingClientRect(),t)}else JF(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new cQ(t.slice,t.move,s<0?void 0:Nn.create(this.state.doc,s))}someProp(t,n){let r=this._props&&this._props[t],s;if(r!=null&&(s=n?n(r):r))return s;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[t];if(a!=null&&(s=n?n(a):a))return s}let o=this.state.plugins;if(o)for(let i=0;i<o.length;i++){let a=o[i].props[t];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(gl){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&m8e(this.dom),jf(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return x8e(this,t)}coordsAtPos(t,n=1){return jX(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let s=this.docView.posFromDOM(t,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(t,n){return T8e(this,n||this.state,t)}pasteHTML(t,n){return Lx(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Lx(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return l7(this,t)}destroy(){this.docView&&(e7e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],gk(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,r8e())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return n7e(this,t)}domSelectionRange(){let t=this.domSelection();return t?wa&&this.root.nodeType===11&&l8e(this.dom.ownerDocument)==this.dom&&k7e(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}pQ.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function _B(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[la.node(0,e.state.doc.content.size,t)]}function SB(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:la.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function TB(e){return!e.someProp("editable",t=>t(e.state)===!1)}function L7e(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function CB(e){let t=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(t,s)||(t[s]=r[s])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function $7e(e,t){let n=0,r=0;for(let s in e){if(e[s]!=t[s])return!0;n++}for(let s in t)r++;return n!=r}function kB(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var N0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ZS={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},F7e=typeof navigator<"u"&&/Mac/.test(navigator.platform),B7e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ia=0;ia<10;ia++)N0[48+ia]=N0[96+ia]=String(ia);for(var ia=1;ia<=24;ia++)N0[ia+111]="F"+ia;for(var ia=65;ia<=90;ia++)N0[ia]=String.fromCharCode(ia+32),ZS[ia]=String.fromCharCode(ia);for(var yk in N0)ZS.hasOwnProperty(yk)||(ZS[yk]=N0[yk]);function z7e(e){var t=F7e&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||B7e&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?ZS:N0)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const j7e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),U7e=typeof navigator<"u"&&/Win/.test(navigator.platform);function H7e(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))j7e?i=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),i&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function V7e(e){let t=Object.create(null);for(let n in e)t[H7e(n)]=e[n];return t}function vk(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function q7e(e){return new vs({props:{handleKeyDown:p7(e)}})}function p7(e){let t=V7e(e);return function(n,r){let s=z7e(r),o,i=t[vk(s,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=t[vk(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(U7e&&r.ctrlKey&&r.altKey)&&(o=N0[r.keyCode])&&o!=s){let a=t[vk(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var G7e=Object.defineProperty,m7=(e,t)=>{for(var n in t)G7e(e,n,{get:t[n],enumerable:!0})};function EC(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}var _C=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:s}=n,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([i,a])=>[i,(...c)=>{const u=a(...c)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,i=[],a=!!e,l=e||s.tr,c=()=>(!a&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(l),i.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(n).map(([f,m])=>[f,(...y)=>{const v=this.buildProps(l,t),w=m(...y)(v);return i.push(w),u}])),run:c};return u}createCan(e){const{rawCommands:t,state:n}=this,r=!1,s=e||n.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...c)=>l(...c)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,i={tr:e,editor:r,view:o,state:EC({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(i)]))}};return i}},mQ={};m7(mQ,{blur:()=>W7e,clearContent:()=>Y7e,clearNodes:()=>K7e,command:()=>Z7e,createParagraphNear:()=>J7e,cut:()=>X7e,deleteCurrentNode:()=>Q7e,deleteNode:()=>eMe,deleteRange:()=>tMe,deleteSelection:()=>nMe,enter:()=>rMe,exitCode:()=>sMe,extendMarkRange:()=>oMe,first:()=>iMe,focus:()=>aMe,forEach:()=>lMe,insertContent:()=>cMe,insertContentAt:()=>fMe,joinBackward:()=>mMe,joinDown:()=>pMe,joinForward:()=>gMe,joinItemBackward:()=>bMe,joinItemForward:()=>yMe,joinTextblockBackward:()=>vMe,joinTextblockForward:()=>xMe,joinUp:()=>hMe,keyboardShortcut:()=>EMe,lift:()=>_Me,liftEmptyBlock:()=>SMe,liftListItem:()=>TMe,newlineInCode:()=>CMe,resetAttributes:()=>kMe,scrollIntoView:()=>AMe,selectAll:()=>NMe,selectNodeBackward:()=>IMe,selectNodeForward:()=>RMe,selectParentNode:()=>MMe,selectTextblockEnd:()=>OMe,selectTextblockStart:()=>DMe,setContent:()=>PMe,setMark:()=>e9e,setMeta:()=>t9e,setNode:()=>n9e,setNodeSelection:()=>r9e,setTextDirection:()=>s9e,setTextSelection:()=>o9e,sinkListItem:()=>i9e,splitBlock:()=>a9e,splitListItem:()=>l9e,toggleList:()=>c9e,toggleMark:()=>u9e,toggleNode:()=>d9e,toggleWrap:()=>f9e,undoInputRule:()=>h9e,unsetAllMarks:()=>p9e,unsetMark:()=>m9e,unsetTextDirection:()=>g9e,updateAttributes:()=>b9e,wrapIn:()=>y9e,wrapInList:()=>v9e});var W7e=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),Y7e=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),K7e=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:i})=>{e.doc.nodesBetween(o.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=t,f=c.resolve(u.map(l)),m=c.resolve(u.map(l+a.nodeSize)),g=f.blockRange(m);if(!g)return;const y=Ib(g);if(a.type.isTextblock){const{defaultType:v}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(g.start,v)}(y||y===0)&&t.lift(g,y)})}),!0},Z7e=e=>t=>e(t),J7e=()=>({state:e,dispatch:t})=>IX(e,t),X7e=(e,t)=>({editor:n,tr:r})=>{const{state:s}=n,o=s.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const i=r.mapping.map(t);return r.insert(i,o.content),r.setSelection(new qn(r.doc.resolve(Math.max(i-1,0)))),!0},Q7e=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(t){const a=s.before(o),l=s.after(o);e.delete(a,l).scrollIntoView()}return!0}return!1};function gi(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var eMe=e=>({tr:t,state:n,dispatch:r})=>{const s=gi(e,n.schema),o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const l=o.before(i),c=o.after(i);t.delete(l,c).scrollIntoView()}return!0}return!1},tMe=e=>({tr:t,dispatch:n})=>{const{from:r,to:s}=e;return n&&t.delete(r,s),!0},nMe=()=>({state:e,dispatch:t})=>e7(e,t),rMe=()=>({commands:e})=>e.keyboardShortcut("Enter"),sMe=()=>({state:e,dispatch:t})=>URe(e,t);function g7(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function JS(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(s=>n.strict?t[s]===e[s]:g7(t[s])?t[s].test(e[s]):t[s]===e[s]):!0}function gQ(e,t,n={}){return e.find(r=>r.type===t&&JS(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function AB(e,t,n={}){return!!gQ(e,t,n)}function SC(e,t,n){var r;if(!e||!t)return;let s=e.parent.childAfter(e.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===t))&&(s=e.parent.childBefore(e.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===t)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!gQ([...s.node.marks],t,n)))return;let i=s.index,a=e.start()+s.offset,l=i+1,c=a+s.node.nodeSize;for(;i>0&&AB([...e.parent.child(i-1).marks],t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;l<e.parent.childCount&&AB([...e.parent.child(l).marks],t,n);)c+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function sh(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var oMe=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const o=sh(e,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(s){const f=SC(l,o,t);if(f&&f.from<=c&&f.to>=u){const m=qn.create(i,f.from,f.to);n.setSelection(m)}}return!0},iMe=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function b7(e){return e instanceof qn}function Pf(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function bQ(e,t=null){if(!t)return null;const n=Vn.atStart(e),r=Vn.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const s=n.from,o=r.to;return t==="all"?qn.create(e,Pf(0,s,o),Pf(e.content.size,s,o)):qn.create(e,Pf(t,s,o),Pf(t,s,o))}function yQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function TC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var aMe=(e=null,t={})=>({editor:n,view:r,tr:s,dispatch:o})=>{t={scrollIntoView:!0,...t};const i=()=>{(TC()||yQ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(o&&e===null&&!b7(n.state.selection))return i(),!0;const a=bQ(s.doc,e)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0},lMe=(e,t)=>n=>e.every((r,s)=>t(r,{...n,index:s})),cMe=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),vQ=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&vQ(r)}return e};function A2(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return vQ(n)}function Fx(e,t,n){if(e instanceof y0||e instanceof bt)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,s=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return bt.fromArray(e.map(a=>t.nodeFromJSON(a)));const i=t.nodeFromJSON(e);return n.errorOnInvalidContent&&i.check(),i}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",o),Fx("",t,n)}if(s){if(n.errorOnInvalidContent){let i=!1,a="";const l=new nX({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Fv.fromSchema(l).parseSlice(A2(e),n.parseOptions):Fv.fromSchema(l).parse(A2(e),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=Fv.fromSchema(t);return n.slice?o.parseSlice(A2(e),n.parseOptions).content:o.parse(A2(e),n.parseOptions)}return Fx("",t,n)}function uMe(e,t,n){const r=e.steps.length-1;if(r<t)return;const s=e.steps[r];if(!(s instanceof Ri||s instanceof qi))return;const o=e.mapping.maps[r];let i=0;o.forEach((a,l,c,u)=>{i===0&&(i=u)}),e.setSelection(Vn.near(e.doc.resolve(i),n))}var dMe=e=>!("type"in e),fMe=(e,t,n)=>({tr:r,dispatch:s,editor:o})=>{var i;if(s){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=w=>{o.emit("contentError",{editor:o,error:w,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Fx(t,o.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(w){l(w)}try{a=Fx(t,o.schema,{parseOptions:c,errorOnInvalidContent:(i=n.errorOnInvalidContent)!=null?i:o.options.enableContentCheck})}catch(w){return l(w),!1}let{from:u,to:f}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},m=!0,g=!0;if((dMe(a)?a:[a]).forEach(w=>{w.check(),m=m?w.isText&&w.marks.length===0:!1,g=g?w.isBlock:!1}),u===f&&g){const{parent:w}=r.doc.resolve(u);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(u-=1,f+=1)}let v;if(m){if(Array.isArray(t))v=t.map(w=>w.text||"").join("");else if(t instanceof bt){let w="";t.forEach(_=>{_.text&&(w+=_.text)}),v=w}else typeof t=="object"&&t&&t.text?v=t.text:v=t;r.insertText(v,u,f)}else{v=a;const w=r.doc.resolve(u),_=w.node(),S=w.parentOffset===0,k=_.isText||_.isTextblock,R=_.content.size>0;S&&k&&R&&(u=Math.max(0,u-1)),r.replaceWith(u,f,v)}n.updateSelection&&uMe(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:v}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:v})}return!0},hMe=()=>({state:e,dispatch:t})=>BRe(e,t),pMe=()=>({state:e,dispatch:t})=>zRe(e,t),mMe=()=>({state:e,dispatch:t})=>_X(e,t),gMe=()=>({state:e,dispatch:t})=>kX(e,t),bMe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=gC(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},yMe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=gC(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},vMe=()=>({state:e,dispatch:t})=>$Re(e,t),xMe=()=>({state:e,dispatch:t})=>FRe(e,t);function xQ(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function wMe(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))TC()||xQ()?i=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var EMe=e=>({editor:t,view:n,tr:r,dispatch:s})=>{const o=wMe(e).split(/-(?!$)/),i=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function I0(e,t,n={}){const{from:r,to:s,empty:o}=e.selection,i=t?gi(t,e.schema):null,a=[];e.doc.nodesBetween(r,s,(f,m)=>{if(f.isText)return;const g=Math.max(r,m),y=Math.min(s,m+f.nodeSize);a.push({node:f,from:g,to:y})});const l=s-r,c=a.filter(f=>i?i.name===f.node.type.name:!0).filter(f=>JS(f.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((f,m)=>f+m.to-m.from,0)>=l}var _Me=(e,t={})=>({state:n,dispatch:r})=>{const s=gi(e,n.schema);return I0(n,s,t)?jRe(n,r):!1},SMe=()=>({state:e,dispatch:t})=>RX(e,t),TMe=e=>({state:t,dispatch:n})=>{const r=gi(e,t.schema);return QRe(r)(t,n)},CMe=()=>({state:e,dispatch:t})=>NX(e,t);function CC(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function NB(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,s)=>(n.includes(s)||(r[s]=e[s]),r),{})}var kMe=(e,t)=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=CC(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(o=gi(e,r.schema)),a==="mark"&&(i=sh(e,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,f)=>{o&&o===u.type&&(l=!0,s&&n.setNodeMarkup(f,void 0,NB(u.attrs,t))),i&&u.marks.length&&u.marks.forEach(m=>{i===m.type&&(l=!0,s&&n.addMark(f,f+u.nodeSize,i.create(NB(m.attrs,t))))})})}),l},AMe=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),NMe=()=>({tr:e,dispatch:t})=>{if(t){const n=new Zl(e.doc);e.setSelection(n)}return!0},IMe=()=>({state:e,dispatch:t})=>TX(e,t),RMe=()=>({state:e,dispatch:t})=>AX(e,t),MMe=()=>({state:e,dispatch:t})=>qRe(e,t),OMe=()=>({state:e,dispatch:t})=>YRe(e,t),DMe=()=>({state:e,dispatch:t})=>WRe(e,t);function I6(e,t,n={},r={}){return Fx(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var PMe=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:o,dispatch:i,commands:a})=>{const{doc:l}=o;if(r.preserveWhitespace!=="full"){const c=I6(e,s.schema,r,{errorOnInvalidContent:t??s.options.enableContentCheck});return i&&o.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return i&&o.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:t??s.options.enableContentCheck})};function wQ(e,t){const n=sh(t,e.schema),{from:r,to:s,empty:o}=e.selection,i=[];o?(e.storedMarks&&i.push(...e.storedMarks),i.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,s,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function EQ(e,t){const n=new yX(e);return t.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function LMe(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function R6(e,t){const n=[];return e.descendants((r,s)=>{t(r)&&n.push({node:r,pos:s})}),n}function $Me(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(s,o)=>{n(s)&&r.push({node:s,pos:o})}),r}function FMe(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function kC(e){return t=>FMe(t.$from,e)}function On(e,t,n){return e.config[t]===void 0&&e.parent?On(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?On(e.parent,t,n):null}):e.config[t]}function y7(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=On(t,"addExtensions",n);return r?[t,...y7(r())]:t}).flat(10)}function v7(e,t){const n=Pm.fromSchema(t).serializeFragment(e),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function _Q(e){return typeof e=="function"}function Ss(e,t=void 0,...n){return _Q(e)?t?e.bind(t)(...n):e(...n):e}function BMe(e={}){return Object.keys(e).length===0&&e.constructor===Object}function sb(e){const t=e.filter(s=>s.type==="extension"),n=e.filter(s=>s.type==="node"),r=e.filter(s=>s.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function SQ(e){const t=[],{nodeExtensions:n,markExtensions:r}=sb(e),s=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:s},l=On(i,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([m,g])=>{t.push({type:f,name:m,attribute:{...o,...g}})})})})}),s.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=On(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,f])=>{const m={...o,...f};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,t.push({type:i.name,name:u,attribute:m})})}),t}function Mo(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const a=o?String(o).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[f,m]=u.split(":").map(g=>g.trim());c.set(f,m)}),a.forEach(u=>{const[f,m]=u.split(":").map(g=>g.trim());c.set(f,m)}),r[s]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[s]=o}),r},{})}function Bx(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Mo(n,r),{})}function zMe(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function IB(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const s=t.reduce((o,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):zMe(n.getAttribute(i.name));return a==null?o:{...o,[i.name]:a}},{});return{...r,...s}}}}function RB(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&BMe(n)?!1:n!=null))}function MB(e){var t,n;const r={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(r.default=e.attribute.default),((n=e==null?void 0:e.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=e.attribute.validate),[e.name,r]}function jMe(e,t){var n;const r=SQ(e),{nodeExtensions:s,markExtensions:o}=sb(e),i=(n=s.find(c=>On(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(_=>_.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},m=e.reduce((_,S)=>{const k=On(S,"extendNodeSchema",f);return{..._,...k?k(c):{}}},{}),g=RB({...m,content:Ss(On(c,"content",f)),marks:Ss(On(c,"marks",f)),group:Ss(On(c,"group",f)),inline:Ss(On(c,"inline",f)),atom:Ss(On(c,"atom",f)),selectable:Ss(On(c,"selectable",f)),draggable:Ss(On(c,"draggable",f)),code:Ss(On(c,"code",f)),whitespace:Ss(On(c,"whitespace",f)),linebreakReplacement:Ss(On(c,"linebreakReplacement",f)),defining:Ss(On(c,"defining",f)),isolating:Ss(On(c,"isolating",f)),attrs:Object.fromEntries(u.map(MB))}),y=Ss(On(c,"parseHTML",f));y&&(g.parseDOM=y.map(_=>IB(_,u)));const v=On(c,"renderHTML",f);v&&(g.toDOM=_=>v({node:_,HTMLAttributes:Bx(_,u)}));const w=On(c,"renderText",f);return w&&(g.toText=w),[c.name,g]})),l=Object.fromEntries(o.map(c=>{const u=r.filter(w=>w.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},m=e.reduce((w,_)=>{const S=On(_,"extendMarkSchema",f);return{...w,...S?S(c):{}}},{}),g=RB({...m,inclusive:Ss(On(c,"inclusive",f)),excludes:Ss(On(c,"excludes",f)),group:Ss(On(c,"group",f)),spanning:Ss(On(c,"spanning",f)),code:Ss(On(c,"code",f)),attrs:Object.fromEntries(u.map(MB))}),y=Ss(On(c,"parseHTML",f));y&&(g.parseDOM=y.map(w=>IB(w,u)));const v=On(c,"renderHTML",f);return v&&(g.toDOM=w=>v({mark:w,HTMLAttributes:Bx(w,u)})),[c.name,g]}));return new nX({topNode:i,nodes:a,marks:l})}function UMe(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function x7(e){return e.sort((n,r)=>{const s=On(n,"priority")||100,o=On(r,"priority")||100;return s>o?-1:s<o?1:0})}function TQ(e){const t=x7(y7(e)),n=UMe(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function CQ(e,t,n){const{from:r,to:s}=t,{blockSeparator:o=`

`,textSerializers:i={}}=n||{};let a="";return e.nodesBetween(r,s,(l,c,u,f)=>{var m;l.isBlock&&c>r&&(a+=o);const g=i==null?void 0:i[l.type.name];if(g)return u&&(a+=g({node:l,pos:c,parent:u,index:f,range:t})),!1;l.isText&&(a+=(m=l==null?void 0:l.text)==null?void 0:m.slice(Math.max(r,c)-c,s-c))}),a}function kQ(e,t){const n={from:0,to:e.content.size};return CQ(e,n,t)}function w7(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function HMe(e,t){const n=gi(t,e.schema),{from:r,to:s}=e.selection,o=[];e.doc.nodesBetween(r,s,a=>{o.push(a)});const i=o.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function AQ(e,t){const n=CC(typeof t=="string"?t:t.name,e.schema);return n==="node"?HMe(e,t):n==="mark"?wQ(e,t):{}}function VMe(e,t=JSON.stringify){const n={};return e.filter(r=>{const s=t(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function qMe(e){const t=VMe(e);return t.length===1?t:t.filter((n,r)=>!t.filter((o,i)=>i!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function NQ(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((s,o)=>{const i=[];if(s.ranges.length)s.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[o];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=t.slice(o).map(a,-1),u=t.slice(o).map(l),f=t.invert().map(c,-1),m=t.invert().map(u);r.push({oldRange:{from:f,to:m},newRange:{from:c,to:u}})})}),qMe(r)}function E7(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(s=>{const o=n.resolve(e),i=SC(o,s.type);i&&r.push({mark:s,...i})}):n.nodesBetween(e,t,(s,o)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(i=>({from:o,to:o+s.nodeSize,mark:i})))}),r}var GMe=(e,t,n,r=20)=>{const s=e.doc.resolve(n);let o=r,i=null;for(;o>0&&i===null;){const a=s.node(o);(a==null?void 0:a.type.name)===t?i=a:o-=1}return[i,o]};function xk(e,t){return t.nodes[e]||t.marks[e]||null}function M_(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=e.find(o=>o.type===t&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}var WMe=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(s,o,i,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)==null?void 0:c.call(l,{node:s,pos:o,parent:i,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-o))}),n};function M6(e,t,n={}){const{empty:r,ranges:s}=e.selection,o=t?sh(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>JS(f.attrs,n,{strict:!1}));let i=0;const a=[];if(s.forEach(({$from:f,$to:m})=>{const g=f.pos,y=m.pos;e.doc.nodesBetween(g,y,(v,w)=>{if(!v.isText&&!v.marks.length)return;const _=Math.max(g,w),S=Math.min(y,w+v.nodeSize),k=S-_;i+=k,a.push(...v.marks.map(R=>({mark:R,from:_,to:S})))})}),i===0)return!1;const l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>JS(f.mark.attrs,n,{strict:!1})).reduce((f,m)=>f+m.to-m.from,0),c=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,m)=>f+m.to-m.from,0);return(l>0?l+c:l)>=i}function YMe(e,t,n={}){if(!t)return I0(e,null,n)||M6(e,null,n);const r=CC(t,e.schema);return r==="node"?I0(e,t,n):r==="mark"?M6(e,t,n):!1}var KMe=(e,t)=>{const{$from:n,$to:r,$anchor:s}=e.selection;if(t){const o=kC(a=>a.type.name===t)(e.selection);if(!o)return!1;const i=e.doc.resolve(o.pos+1);return s.pos+1===i.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},ZMe=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function OB(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function DB(e,t){const{nodeExtensions:n}=sb(t),r=n.find(i=>i.name===e);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=Ss(On(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function AC(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let s=!0;return e.content.forEach(o=>{s!==!1&&(AC(o,{ignoreWhitespace:n,checkChildren:t})||(s=!1))}),s}return!1}function IQ(e){return e instanceof Nn}var RQ=class MQ{constructor(t){this.position=t}static fromJSON(t){return new MQ(t.position)}toJSON(){return{position:this.position}}};function JMe(e,t){const n=t.mapping.mapResult(e.position);return{position:new RQ(n.pos),mapResult:n}}function XMe(e){return new RQ(e)}function OQ(e,t,n){const s=e.state.doc.content.size,o=Pf(t,0,s),i=Pf(n,0,s),a=e.coordsAtPos(o),l=e.coordsAtPos(i,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),m=Math.max(a.right,l.right),g=m-f,y=u-c,_={top:c,bottom:u,left:f,right:m,width:g,height:y,x:f,y:c};return{..._,toJSON:()=>_}}function QMe(e,t,n){var r;const{selection:s}=t;let o=null;if(b7(s)&&(o=s.$cursor),o){const a=(r=e.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:i}=s;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(u,f,m)=>{if(c)return!1;if(u.isInline){const g=!m||m.type.allowsMarkType(n),y=!!n.isInSet(u.marks)||!u.marks.some(v=>v.type.excludes(n));c=g&&y}return!c}),c})}var e9e=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:i,ranges:a}=o,l=sh(e,r.schema);if(s)if(i){const c=wQ(r,l);n.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(m,g)=>{const y=Math.max(g,u),v=Math.min(g+m.nodeSize,f);m.marks.find(_=>_.type===l)?m.marks.forEach(_=>{l===_.type&&n.addMark(y,v,l.create({..._.attrs,...t}))}):n.addMark(y,v,l.create(t))})});return QMe(r,n,l)},t9e=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),n9e=(e,t={})=>({state:n,dispatch:r,chain:s})=>{const o=gi(e,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:a})=>YF(o,{...i,...t})(n)?!0:a.clearNodes()).command(({state:a})=>YF(o,{...i,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},r9e=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,s=Pf(e,0,r.content.size),o=Nn.create(r,s);t.setSelection(o)}return!0},s9e=(e,t)=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=r;let i,a;return typeof t=="number"?(i=t,a=t):t&&"from"in t&&"to"in t?(i=t.from,a=t.to):(i=o.from,a=o.to),s&&n.doc.nodesBetween(i,a,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:e})}),!0},o9e=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:s,to:o}=typeof e=="number"?{from:e,to:e}:e,i=qn.atStart(r).from,a=qn.atEnd(r).to,l=Pf(s,i,a),c=Pf(o,i,a),u=qn.create(r,l,c);t.setSelection(u)}return!0},i9e=e=>({state:t,dispatch:n})=>{const r=gi(e,t.schema);return n8e(r)(t,n)};function PB(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(s=>t==null?void 0:t.includes(s.type.name));e.tr.ensureMarks(r)}}var a9e=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:i}=t,{$from:a,$to:l}=o,c=s.extensionManager.attributes,u=M_(c,a.node().type.name,a.node().attrs);if(o instanceof Nn&&o.node.isBlock)return!a.parentOffset||!zf(i,a.pos)?!1:(r&&(e&&PB(n,s.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,m=a.depth===0?void 0:LMe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let g=f&&m?[{type:m,attrs:u}]:void 0,y=zf(t.doc,t.mapping.map(a.pos),1,g);if(!g&&!y&&zf(t.doc,t.mapping.map(a.pos),1,m?[{type:m}]:void 0)&&(y=!0,g=m?[{type:m,attrs:u}]:void 0),r){if(y&&(o instanceof qn&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,g),m&&!f&&!a.parentOffset&&a.parent.type!==m)){const v=t.mapping.map(a.before()),w=t.doc.resolve(v);a.node(-1).canReplaceWith(w.index(),w.index()+1,m)&&t.setNodeMarkup(t.mapping.map(a.before()),m)}e&&PB(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return y},l9e=(e,t={})=>({tr:n,state:r,dispatch:s,editor:o})=>{var i;const a=gi(e,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const m=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let _=bt.empty;const S=l.index(-1)?1:l.index(-2)?2:3;for(let j=l.depth-S;j>=l.depth-3;j-=1)_=bt.from(l.node(j).copy(_));const k=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,R={...M_(m,l.node().type.name,l.node().attrs),...t},O=((i=a.contentMatch.defaultType)==null?void 0:i.createAndFill(R))||void 0;_=_.append(bt.from(a.createAndFill(null,O)||void 0));const M=l.before(l.depth-(S-1));n.replace(M,l.after(-k),new Zt(_,4-S,0));let P=-1;n.doc.nodesBetween(M,n.doc.content.size,(j,q)=>{if(P>-1)return!1;j.isTextblock&&j.content.size===0&&(P=q+1)}),P>-1&&n.setSelection(qn.near(n.doc.resolve(P))),n.scrollIntoView()}return!0}const g=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,y={...M_(m,f.type.name,f.attrs),...t},v={...M_(m,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const w=g?[{type:a,attrs:y},{type:g,attrs:v}]:[{type:a,attrs:y}];if(!zf(n.doc,l.pos,2))return!1;if(s){const{selection:_,storedMarks:S}=r,{splittableMarks:k}=o.extensionManager,R=S||_.$to.parentOffset&&_.$from.marks();if(n.split(l.pos,2,w).scrollIntoView(),!R||!s)return!0;const O=R.filter(M=>k.includes(M.type.name));n.ensureMarks(O)}return!0},wk=(e,t)=>{const n=kC(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&q0(e.doc,n.pos)&&e.join(n.pos),!0},Ek=(e,t)=>{const n=kC(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&q0(e.doc,r)&&e.join(r),!0},c9e=(e,t,n,r={})=>({editor:s,tr:o,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:m}=s.extensionManager,g=gi(e,i.schema),y=gi(t,i.schema),{selection:v,storedMarks:w}=i,{$from:_,$to:S}=v,k=_.blockRange(S),R=w||v.$to.parentOffset&&v.$from.marks();if(!k)return!1;const O=kC(M=>DB(M.type.name,f))(v);if(k.depth>=1&&O&&k.depth-O.depth<=1){if(O.node.type===g)return c.liftListItem(y);if(DB(O.node.type.name,f)&&g.validContent(O.node.content)&&a)return l().command(()=>(o.setNodeMarkup(O.pos,g),!0)).command(()=>wk(o,g)).command(()=>Ek(o,g)).run()}return!n||!R||!a?l().command(()=>u().wrapInList(g,r)?!0:c.clearNodes()).wrapInList(g,r).command(()=>wk(o,g)).command(()=>Ek(o,g)).run():l().command(()=>{const M=u().wrapInList(g,r),P=R.filter(j=>m.includes(j.type.name));return o.ensureMarks(P),M?!0:c.clearNodes()}).wrapInList(g,r).command(()=>wk(o,g)).command(()=>Ek(o,g)).run()},u9e=(e,t={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,i=sh(e,r.schema);return M6(r,i,t)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,t)},d9e=(e,t,n={})=>({state:r,commands:s})=>{const o=gi(e,r.schema),i=gi(t,r.schema),a=I0(r,o,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(i,l):s.setNode(o,{...l,...n})},f9e=(e,t={})=>({state:n,commands:r})=>{const s=gi(e,n.schema);return I0(n,s,t)?r.lift(s):r.wrapIn(s,t)},h9e=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(e))){if(t){const i=e.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,e.schema.text(o.text,l))}else i.delete(o.from,o.to)}return!0}}return!1},p9e=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:s}=n;return r||t&&s.forEach(o=>{e.removeMark(o.$from.pos,o.$to.pos)}),!0},m9e=(e,t={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=t,{selection:a}=n,l=sh(e,r.schema),{$from:c,empty:u,ranges:f}=a;if(!s)return!0;if(u&&i){let{from:m,to:g}=a;const y=(o=c.marks().find(w=>w.type===l))==null?void 0:o.attrs,v=SC(c,l,y);v&&(m=v.from,g=v.to),n.removeMark(m,g,l)}else f.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,l)});return n.removeStoredMark(l),!0},g9e=e=>({tr:t,state:n,dispatch:r})=>{const{selection:s}=n;let o,i;return typeof e=="number"?(o=e,i=e):e&&"from"in e&&"to"in e?(o=e.from,i=e.to):(o=s.from,i=s.to),r&&t.doc.nodesBetween(o,i,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,t.setNodeMarkup(l,void 0,c)}),!0},b9e=(e,t={})=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=CC(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(o=gi(e,r.schema)),a==="mark"&&(i=sh(e,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;let m,g,y,v;n.selection.empty?r.doc.nodesBetween(u,f,(w,_)=>{o&&o===w.type&&(l=!0,y=Math.max(_,u),v=Math.min(_+w.nodeSize,f),m=_,g=w)}):r.doc.nodesBetween(u,f,(w,_)=>{_<u&&o&&o===w.type&&(l=!0,y=Math.max(_,u),v=Math.min(_+w.nodeSize,f),m=_,g=w),_>=u&&_<=f&&(o&&o===w.type&&(l=!0,s&&n.setNodeMarkup(_,void 0,{...w.attrs,...t})),i&&w.marks.length&&w.marks.forEach(S=>{if(i===S.type&&(l=!0,s)){const k=Math.max(_,u),R=Math.min(_+w.nodeSize,f);n.addMark(k,R,i.create({...S.attrs,...t}))}}))}),g&&(m!==void 0&&s&&n.setNodeMarkup(m,void 0,{...g.attrs,...t}),i&&g.marks.length&&g.marks.forEach(w=>{i===w.type&&s&&n.addMark(y,v,i.create({...w.attrs,...t}))}))}),l},y9e=(e,t={})=>({state:n,dispatch:r})=>{const s=gi(e,n.schema);return KRe(s,t)(n,r)},v9e=(e,t={})=>({state:n,dispatch:r})=>{const s=gi(e,n.schema);return ZRe(s,t)(n,r)},x9e=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},Dw=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},w9e=(e,t)=>{if(g7(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function N2(e){var t;const{editor:n,from:r,to:s,text:o,rules:i,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(t=c.nodeBefore||c.nodeAfter)!=null&&t.marks.find(m=>m.type.spec.code))return!1;let u=!1;const f=WMe(c)+o;return i.forEach(m=>{if(u)return;const g=w9e(f,m.find);if(!g)return;const y=l.state.tr,v=EC({state:l.state,transaction:y}),w={from:r-(g[0].length-o.length),to:s},{commands:_,chain:S,can:k}=new _C({editor:n,state:v});m.handler({state:v,range:w,match:g,commands:_,chain:S,can:k})===null||!y.steps.length||(m.undoable&&y.setMeta(a,{transform:y,from:r,to:s,text:o}),l.dispatch(y),u=!0)}),u}function E9e(e){const{editor:t,rules:n}=e,r=new vs({state:{init(){return null},apply(s,o,i){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=v7(bt.from(u),i.schema);const{from:f}=l,m=f+u.length;N2({editor:t,from:f,to:m,text:u,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,i,a){return N2({editor:t,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&N2({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:i}=s.state.selection;return i?N2({editor:t,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function _9e(e){return Object.prototype.toString.call(e).slice(8,-1)}function I2(e){return _9e(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function DQ(e,t){const n={...e};return I2(e)&&I2(t)&&Object.keys(t).forEach(r=>{I2(t[r])&&I2(e[r])?n[r]=DQ(e[r],t[r]):n[r]=t[r]}),n}var _7=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...Ss(On(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ss(On(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>DQ(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},W0=class PQ extends _7{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new PQ(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,s=t.state.selection.$from;if(s.pos===s.end()){const i=s.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function S9e(e){return typeof e=="number"}var T9e=class{constructor(e){this.find=e.find,this.handler=e.handler}},C9e=(e,t,n)=>{if(g7(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=e,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function k9e(e){const{editor:t,state:n,from:r,to:s,rule:o,pasteEvent:i,dropEvent:a}=e,{commands:l,chain:c,can:u}=new _C({editor:t,state:n}),f=[];return n.doc.nodesBetween(r,s,(g,y)=>{var v,w,_,S,k;if((w=(v=g.type)==null?void 0:v.spec)!=null&&w.code||!(g.isText||g.isTextblock||g.isInline))return;const R=(k=(S=(_=g.content)==null?void 0:_.size)!=null?S:g.nodeSize)!=null?k:0,O=Math.max(r,y),M=Math.min(s,y+R);if(O>=M)return;const P=g.isText?g.text||"":g.textBetween(O-y,M-y,void 0,"");C9e(P,o.find,i).forEach(q=>{if(q.index===void 0)return;const U=O+q.index+1,z=U+q[0].length,H={from:n.tr.mapping.map(U),to:n.tr.mapping.map(z)},F=o.handler({state:n,range:H,match:q,commands:l,chain:c,can:u,pasteEvent:i,dropEvent:a});f.push(F)})}),f.every(g=>g!==null)}var R2=null,A9e=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function N9e(e){const{editor:t,rules:n}=e;let r=null,s=!1,o=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:f,to:m,rule:g,pasteEvt:y})=>{const v=u.tr,w=EC({state:u,transaction:v});if(!(!k9e({editor:t,state:w,from:Math.max(f-1,0),to:m.b-1,rule:g,pasteEvent:y,dropEvent:a})||!v.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}};return n.map(u=>new vs({view(f){const m=y=>{var v;r=(v=f.dom.parentElement)!=null&&v.contains(y.target)?f.dom.parentElement:null,r&&(R2=t)},g=()=>{R2&&(R2=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",g),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",g)}}},props:{handleDOMEvents:{drop:(f,m)=>{if(o=r===f.dom.parentElement,a=m,!o){const g=R2;g!=null&&g.isEditable&&setTimeout(()=>{const y=g.state.selection;y&&g.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(f,m)=>{var g;const y=(g=m.clipboardData)==null?void 0:g.getData("text/html");return i=m,s=!!(y!=null&&y.includes("data-pm-slice")),!1}}},appendTransaction:(f,m,g)=>{const y=f[0],v=y.getMeta("uiEvent")==="paste"&&!s,w=y.getMeta("uiEvent")==="drop"&&!o,_=y.getMeta("applyPasteRules"),S=!!_;if(!v&&!w&&!S)return;if(S){let{text:O}=_;typeof O=="string"?O=O:O=v7(bt.from(O),g.schema);const{from:M}=_,P=M+O.length,j=A9e(O);return l({rule:u,state:g,from:M,to:{b:P},pasteEvt:j})}const k=m.doc.content.findDiffStart(g.doc.content),R=m.doc.content.findDiffEnd(g.doc.content);if(!(!S9e(k)||!R||k===R.b))return l({rule:u,state:g,from:k,to:R,pasteEvt:i})}}))}var NC=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=TQ(e),this.schema=jMe(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:xk(t.name,this.schema)},r=On(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return x7([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:xk(r.name,this.schema)},o=[],i=On(r,"addKeyboardShortcuts",s);let a={};if(r.type==="mark"&&On(r,"exitable",s)&&(a.ArrowRight=()=>W0.handleExit({editor:e,mark:r})),i){const m=Object.fromEntries(Object.entries(i()).map(([g,y])=>[g,()=>y({editor:e})]));a={...a,...m}}const l=q7e(a);o.push(l);const c=On(r,"addInputRules",s);if(OB(r,e.options.enableInputRules)&&c){const m=c();if(m&&m.length){const g=E9e({editor:e,rules:m}),y=Array.isArray(g)?g:[g];o.push(...y)}}const u=On(r,"addPasteRules",s);if(OB(r,e.options.enablePasteRules)&&u){const m=u();if(m&&m.length){const g=N9e({editor:e,rules:m});o.push(...g)}}const f=On(r,"addProseMirrorPlugins",s);if(f){const m=f();o.push(...m)}return o})}get attributes(){return SQ(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=sb(this.extensions);return Object.fromEntries(t.filter(n=>!!On(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:gi(n.name,this.schema)},o=On(n,"addNodeView",s);if(!o)return[];const i=o();if(!i)return[];const a=(l,c,u,f,m)=>{const g=Bx(l,r);return i({node:l,view:c,getPos:u,decorations:f,innerDecorations:m,editor:e,extension:n,HTMLAttributes:g})};return[n.name,a]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=sb(this.extensions);return Object.fromEntries(t.filter(n=>!!On(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:sh(n.name,this.schema)},o=On(n,"addMarkView",s);if(!o)return[];const i=(a,l,c)=>{const u=Bx(a,r);return o()({mark:a,view:l,inline:c,editor:e,extension:n,HTMLAttributes:u,updateAttributes:f=>{V9e(a,e,f)}})};return[n.name,i]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:xk(t.name,this.schema)};t.type==="mark"&&((n=Ss(On(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const s=On(t,"onBeforeCreate",r),o=On(t,"onCreate",r),i=On(t,"onUpdate",r),a=On(t,"onSelectionUpdate",r),l=On(t,"onTransaction",r),c=On(t,"onFocus",r),u=On(t,"onBlur",r),f=On(t,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}};NC.resolve=TQ;NC.sort=x7;NC.flatten=y7;var I9e={};m7(I9e,{ClipboardTextSerializer:()=>$Q,Commands:()=>FQ,Delete:()=>BQ,Drop:()=>zQ,Editable:()=>jQ,FocusEvents:()=>HQ,Keymap:()=>VQ,Paste:()=>qQ,Tabindex:()=>GQ,TextDirection:()=>WQ,focusEventsPluginKey:()=>UQ});var Gr=class LQ extends _7{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new LQ(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},$Q=Gr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new vs({key:new Bs("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:s}=t,{ranges:o}=s,i=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=w7(n);return CQ(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),FQ=Gr.create({name:"commands",addCommands(){return{...mQ}}}),BQ=Gr.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,s;const o=()=>{var i,a,l,c;if((c=(l=(a=(i=this.editor.options.coreExtensionOptions)==null?void 0:i.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,e))!=null?c:e.getMeta("y-sync$"))return;const u=EQ(e.before,[e,...t]);NQ(u).forEach(g=>{u.mapping.mapResult(g.oldRange.from).deletedAfter&&u.mapping.mapResult(g.oldRange.to).deletedBefore&&u.before.nodesBetween(g.oldRange.from,g.oldRange.to,(y,v)=>{const w=v+y.nodeSize-2,_=g.oldRange.from<=v&&w<=g.oldRange.to;this.editor.emit("delete",{type:"node",node:y,from:v,to:w,newFrom:u.mapping.map(v),newTo:u.mapping.map(w),deletedRange:g.oldRange,newRange:g.newRange,partial:!_,editor:this.editor,transaction:e,combinedTransform:u})})});const m=u.mapping;u.steps.forEach((g,y)=>{var v,w;if(g instanceof bu){const _=m.slice(y).map(g.from,-1),S=m.slice(y).map(g.to),k=m.invert().map(_,-1),R=m.invert().map(S),O=(v=u.doc.nodeAt(_-1))==null?void 0:v.marks.some(P=>P.eq(g.mark)),M=(w=u.doc.nodeAt(S))==null?void 0:w.marks.some(P=>P.eq(g.mark));this.editor.emit("delete",{type:"mark",mark:g.mark,from:g.from,to:g.to,deletedRange:{from:k,to:R},newRange:{from:_,to:S},partial:!!(M||O),editor:this.editor,transaction:e,combinedTransform:u})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(o,0):o()}}),zQ=Gr.create({name:"drop",addProseMirrorPlugins(){return[new vs({key:new Bs("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),jQ=Gr.create({name:"editable",addProseMirrorPlugins(){return[new vs({key:new Bs("editable"),props:{editable:()=>this.editor.options.editable}})]}}),UQ=new Bs("focusEvents"),HQ=Gr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new vs({key:UQ,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),VQ=Gr.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:m,parent:g}=f,y=f.parent.isTextblock&&m>0?a.doc.resolve(m-1):f,v=y.parent.type.spec.isolating,w=f.pos-f.parentOffset,_=v&&y.parent.childCount===1?w===f.pos:Vn.atStart(c).from===m;return!u||!g.type.isTextblock||g.textContent.length||!_||_&&f.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return TC()||xQ()?o:s},addProseMirrorPlugins(){return[new vs({key:new Bs("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(v=>v.getMeta("composition")))return;const r=e.some(v=>v.docChanged)&&!t.doc.eq(n.doc),s=e.some(v=>v.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:i,to:a}=t.selection,l=Vn.atStart(t.doc).from,c=Vn.atEnd(t.doc).to;if(o||!(i===l&&a===c)||!AC(n.doc))return;const m=n.tr,g=EC({state:n,transaction:m}),{commands:y}=new _C({editor:this.editor,state:g});if(y.clearNodes(),!!m.steps.length)return m}})]}}),qQ=Gr.create({name:"paste",addProseMirrorPlugins(){return[new vs({key:new Bs("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),GQ=Gr.create({name:"tabindex",addProseMirrorPlugins(){return[new vs({key:new Bs("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),WQ=Gr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=sb(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new vs({key:new Bs("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),R9e=class i1{constructor(t,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new i1(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new i1(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new i1(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,i=this.pos+r+(o?0:1);if(i<0||i>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(i);if(!s&&a.depth<=this.depth)return;const l=new i1(a,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),t.push(new i1(a,this.editor,s,s?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===t)if(Object.keys(n).length>0){const o=s.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(o[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(n);return this.children.forEach(i=>{r&&s.length>0||(i.node.type.name===t&&o.every(l=>n[l]===i.node.attrs[l])&&s.push(i),!(r&&s.length>0)&&(s=s.concat(i.querySelectorAll(t,n,r))))}),s}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},M9e=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function O9e(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.setAttribute("data-tiptap-style",""),s.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(s),s}var D9e=class extends x9e{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:JMe,createMappablePosition:XMe},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:o})=>this.options.onDrop(r,s,o)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=bQ(t,this.options.autofocus);this.editorState=p1.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=O9e(M9e,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=_Q(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;n=n.filter(i=>!i.key.startsWith(o))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[jQ,$Q.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),FQ,HQ,VQ,GQ,zQ,qQ,BQ,WQ.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new NC(r,this)}createCommandManager(){this.commandManager=new _C({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=I6(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=I6(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new pQ(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),s=n.includes(e),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!s)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=i==null?void 0:i.getMeta("focus"),l=i==null?void 0:i.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:i}),l&&this.emit("blur",{editor:this,event:l.event,transaction:i}),!(e.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||o.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return AQ(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return YMe(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return v7(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return kQ(this.state.doc,{blockSeparator:t,textSerializers:{...w7(this.schema),...n}})}get isEmpty(){return AC(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new R9e(t,this)}get $doc(){return this.$pos(0)}};function ob(e){return new Dw({find:e.find,handler:({state:t,range:n,match:r})=>{const s=Ss(e.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=t,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),u=c+i.length;if(E7(n.from,n.to,t.doc).filter(g=>g.mark.type.excluded.find(v=>v===e.type&&v!==g.mark.type)).filter(g=>g.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+l,c);const m=n.from+l+i.length;o.addMark(n.from+l,m,e.type.create(s||{})),o.removeStoredMark(e.type)}},undoable:e.undoable})}function YQ(e){return new Dw({find:e.find,handler:({state:t,range:n,match:r})=>{const s=Ss(e.getAttributes,void 0,r)||{},{tr:o}=t,i=n.from;let a=n.to;const l=e.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=i+c;u>a?u=a:a=u+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,i+r[0].length-1),o.replaceWith(u,a,l)}else if(r[0]){const c=e.type.isInline?i:i-1;o.insert(c,e.type.create(s)).delete(o.mapping.map(i),o.mapping.map(a))}o.scrollIntoView()},undoable:e.undoable})}function O6(e){return new Dw({find:e.find,handler:({state:t,range:n,match:r})=>{const s=t.doc.resolve(n.from),o=Ss(e.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,o)},undoable:e.undoable})}function Yo(e){return new Dw({find:e.find,handler:({state:t,range:n,match:r})=>{let s=e.replace,o=n.from;const i=n.to;if(r[1]){const a=r[0].lastIndexOf(r[1]);s+=r[0].slice(a+r[1].length),o+=a;const l=o-i;l>0&&(s=r[0].slice(a-l,a)+s,o=i)}t.tr.insertText(s,o,i)},undoable:e.undoable})}function ib(e){return new Dw({find:e.find,handler:({state:t,range:n,match:r,chain:s})=>{const o=Ss(e.getAttributes,void 0,r)||{},i=t.tr.delete(n.from,n.to),l=i.doc.resolve(n.from).blockRange(),c=l&&X8(l,e.type,o);if(!c)return null;if(i.wrap(l,c),e.keepMarks&&e.editor){const{selection:f,storedMarks:m}=t,{splittableMarks:g}=e.editor.extensionManager,y=m||f.$to.parentOffset&&f.$from.marks();if(y){const v=y.filter(w=>g.includes(w.type.name));i.ensureMarks(v)}}if(e.keepAttributes){const f=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(f,o).run()}const u=i.doc.resolve(n.from-1).nodeBefore;u&&u.type===e.type&&q0(i.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,u))&&i.join(n.from-1)},undoable:e.undoable})}var P9e=e=>"touches"in e,L9e=class{constructor(e){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.clientX-this.startX,c=a.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.touches[0];if(!l)return;const c=l.clientX-this.startX,u=l.clientY-this.startY;this.handleResize(c,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(a,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var t,n,r,s,o,i;this.node=e.node,this.editor=e.editor,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(t=e.options)!=null&&t.min&&(this.minSize={...this.minSize,...e.options.min}),(n=e.options)!=null&&n.max&&(this.maxSize=e.options.max),(r=e==null?void 0:e.options)!=null&&r.directions&&(this.directions=e.options.directions),(s=e.options)!=null&&s.preserveAspectRatio&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(o=e.options)!=null&&o.className&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),(i=e.options)!=null&&i.createCustomHandle&&(this.createCustomHandle=e.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const e=this.editor.isEditable;e!==this.lastEditableState&&(this.lastEditableState=e,e?e&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(e,t,n){return e.type!==this.node.type?!1:(this.node=e,this.onUpdate?this.onUpdate(e,t,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){const e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){const t=document.createElement("div");return t.dataset.resizeHandle=e,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(e,t){const n=t.includes("top"),r=t.includes("bottom"),s=t.includes("left"),o=t.includes("right");n&&(e.style.top="0"),r&&(e.style.bottom="0"),s&&(e.style.left="0"),o&&(e.style.right="0"),(t==="top"||t==="bottom")&&(e.style.left="0",e.style.right="0"),(t==="left"||t==="right")&&(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{let t;this.createCustomHandle?t=this.createCustomHandle(e):t=this.createHandle(e),t instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${e}") did not return an HTMLElement. Falling back to default handle.`),t=this.createHandle(e)),this.createCustomHandle||this.positionHandle(t,e),t.addEventListener("mousedown",n=>this.handleResizeStart(n,e)),t.addEventListener("touchstart",n=>this.handleResizeStart(n,e)),this.handleMap.set(e,t),this.wrapper.appendChild(t)})}removeHandles(){this.handleMap.forEach(e=>e.remove()),this.handleMap.clear()}applyInitialSize(){const e=this.node.attrs.width,t=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,t){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=t,P9e(e)?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,t){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:s}=this.calculateNewDimensions(this.activeHandle,e,t),o=this.applyConstraints(r,s,n);this.element.style.width=`${o.width}px`,this.element.style.height=`${o.height}px`,this.onResize&&this.onResize(o.width,o.height)}calculateNewDimensions(e,t,n){let r=this.startWidth,s=this.startHeight;const o=e.includes("right"),i=e.includes("left"),a=e.includes("bottom"),l=e.includes("top");return o?r=this.startWidth+t:i&&(r=this.startWidth-t),a?s=this.startHeight+n:l&&(s=this.startHeight-n),(e==="right"||e==="left")&&(r=this.startWidth+(o?t:-t)),(e==="top"||e==="bottom")&&(s=this.startHeight+(a?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,s,e):{width:r,height:s}}applyConstraints(e,t,n){var r,s,o,i;if(!n){let c=Math.max(this.minSize.width,e),u=Math.max(this.minSize.height,t);return(r=this.maxSize)!=null&&r.width&&(c=Math.min(this.maxSize.width,c)),(s=this.maxSize)!=null&&s.height&&(u=Math.min(this.maxSize.height,u)),{width:c,height:u}}let a=e,l=t;return a<this.minSize.width&&(a=this.minSize.width,l=a/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,a=l*this.aspectRatio),(o=this.maxSize)!=null&&o.width&&a>this.maxSize.width&&(a=this.maxSize.width,l=a/this.aspectRatio),(i=this.maxSize)!=null&&i.height&&l>this.maxSize.height&&(l=this.maxSize.height,a=l*this.aspectRatio),{width:a,height:l}}applyAspectRatio(e,t,n){const r=n==="left"||n==="right",s=n==="top"||n==="bottom";return r?{width:e,height:e/this.aspectRatio}:s?{width:t*this.aspectRatio,height:t}:{width:e,height:e/this.aspectRatio}}};function $9e(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Nn){const o=r.index();return r.parent.canReplaceWith(o,o+1,t)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(t))return!0;s-=1}return!1}var F9e={};m7(F9e,{createAtomBlockMarkdownSpec:()=>B9e,createBlockMarkdownSpec:()=>z9e,createInlineMarkdownSpec:()=>H9e,parseAttributes:()=>S7,parseIndentedBlocks:()=>D6,renderNestedMarkdownContent:()=>C7,serializeAttributes:()=>T7});function S7(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const c=s.map(u=>u.trim().slice(1));t.class=c.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(t.id=o[1]);const i=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(i)).forEach(([,c,u])=>{var f;const m=parseInt(((f=u.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),g=n[m];g&&(t[c]=g.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(t[u]=!0)}),t}function T7(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function B9e(e){const{nodeName:t,name:n,parseAttributes:r=S7,serializeAttributes:s=T7,defaultAttributes:o={},requiredAttributes:i=[],allowedAttributes:a}=e,l=n||t,c=u=>{if(!a)return u;const f={};return a.forEach(m=>{m in u&&(f[m]=u[m])}),f};return{parseMarkdown:(u,f)=>{const m={...o,...u.attributes};return f.createNode(t,m,[])},markdownTokenizer:{name:t,level:"block",start(u){var f;const m=new RegExp(`^:::${l}(?:\\s|$)`,"m"),g=(f=u.match(m))==null?void 0:f.index;return g!==void 0?g:-1},tokenize(u,f,m){const g=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),y=u.match(g);if(!y)return;const v=y[1]||"",w=r(v);if(!i.find(S=>!(S in w)))return{type:t,raw:y[0],attributes:w}}},renderMarkdown:u=>{const f=c(u.attrs||{}),m=s(f),g=m?` {${m}}`:"";return`:::${l}${g} :::`}}}function z9e(e){const{nodeName:t,name:n,getContent:r,parseAttributes:s=S7,serializeAttributes:o=T7,defaultAttributes:i={},content:a="block",allowedAttributes:l}=e,c=n||t,u=f=>{if(!l)return f;const m={};return l.forEach(g=>{g in f&&(m[g]=f[g])}),m};return{parseMarkdown:(f,m)=>{let g;if(r){const v=r(f);g=typeof v=="string"?[{type:"text",text:v}]:v}else a==="block"?g=m.parseChildren(f.tokens||[]):g=m.parseInline(f.tokens||[]);const y={...i,...f.attributes};return m.createNode(t,y,g)},markdownTokenizer:{name:t,level:"block",start(f){var m;const g=new RegExp(`^:::${c}`,"m"),y=(m=f.match(g))==null?void 0:m.index;return y!==void 0?y:-1},tokenize(f,m,g){var y;const v=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),w=f.match(v);if(!w)return;const[_,S=""]=w,k=s(S);let R=1;const O=_.length;let M="";const P=/^:::([\w-]*)(\s.*)?/gm,j=f.slice(O);for(P.lastIndex=0;;){const q=P.exec(j);if(q===null)break;const U=q.index,z=q[1];if(!((y=q[2])!=null&&y.endsWith(":::"))){if(z)R+=1;else if(R-=1,R===0){const H=j.slice(0,U);M=H.trim();const F=f.slice(0,O+U+q[0].length);let W=[];if(M)if(a==="block")for(W=g.blockTokens(H),W.forEach(X=>{X.text&&(!X.tokens||X.tokens.length===0)&&(X.tokens=g.inlineTokens(X.text))});W.length>0;){const X=W[W.length-1];if(X.type==="paragraph"&&(!X.text||X.text.trim()===""))W.pop();else break}else W=g.inlineTokens(M);return{type:t,raw:F,attributes:k,content:M,tokens:W}}}}}},renderMarkdown:(f,m)=>{const g=u(f.attrs||{}),y=o(g),v=y?` {${y}}`:"",w=m.renderChildren(f.content||[],`

`);return`:::${c}${v}

${w}

:::`}}}function j9e(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,s,o,i]=r;t[s]=o||i,r=n.exec(e)}return t}function U9e(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function H9e(e){const{nodeName:t,name:n,getContent:r,parseAttributes:s=j9e,serializeAttributes:o=U9e,defaultAttributes:i={},selfClosing:a=!1,allowedAttributes:l}=e,c=n||t,u=m=>{if(!l)return m;const g={};return l.forEach(y=>{const v=typeof y=="string"?y:y.name,w=typeof y=="string"?void 0:y.skipIfDefault;if(v in m){const _=m[v];if(w!==void 0&&_===w)return;g[v]=_}}),g},f=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(m,g)=>{const y={...i,...m.attributes};if(a)return g.createNode(t,y);const v=r?r(m):m.content||"";return v?g.createNode(t,y,[g.createTextNode(v)]):g.createNode(t,y,[])},markdownTokenizer:{name:t,level:"inline",start(m){const g=a?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),y=m.match(g),v=y==null?void 0:y.index;return v!==void 0?v:-1},tokenize(m,g,y){const v=a?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),w=m.match(v);if(!w)return;let _="",S="";if(a){const[,R]=w;S=R}else{const[,R,O]=w;S=R,_=O||""}const k=s(S.trim());return{type:t,raw:w[0],content:_.trim(),attributes:k}}},renderMarkdown:m=>{let g="";r?g=r(m):m.content&&m.content.length>0&&(g=m.content.filter(_=>_.type==="text").map(_=>_.text).join(""));const y=u(m.attrs||{}),v=o(y),w=v?` ${v}`:"";return a?`[${c}${w}]`:`[${c}${w}]${g}[/${c}]`}}}function D6(e,t,n){var r,s,o,i;const a=e.split(`
`),l=[];let c="",u=0;const f=t.baseIndentSize||2;for(;u<a.length;){const m=a[u],g=m.match(t.itemPattern);if(!g){if(l.length>0)break;if(m.trim()===""){u+=1,c=`${c}${m}
`;continue}else return}const y=t.extractItemData(g),{indentLevel:v,mainContent:w}=y;c=`${c}${m}
`;const _=[w];for(u+=1;u<a.length;){const O=a[u];if(O.trim()===""){const P=a.slice(u+1).findIndex(U=>U.trim()!=="");if(P===-1)break;if((((s=(r=a[u+1+P].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>v){_.push(O),c=`${c}${O}
`,u+=1;continue}else break}if((((i=(o=O.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:i.length)||0)>v)_.push(O),c=`${c}${O}
`,u+=1;else break}let S;const k=_.slice(1);if(k.length>0){const O=k.map(M=>M.slice(v+f)).join(`
`);O.trim()&&(t.customNestedParser?S=t.customNestedParser(O):S=n.blockTokens(O))}const R=t.createToken(y,S);l.push(R)}if(l.length!==0)return{items:l,raw:c}}function C7(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const s=typeof n=="function"?n(r):n,[o,...i]=e.content,a=t.renderChildren([o]),l=[`${s}${a}`];return i&&i.length>0&&i.forEach(c=>{const u=t.renderChildren([c]);if(u){const f=u.split(`
`).map(m=>m?t.indent(m):"").join(`
`);l.push(f)}}),l.join(`
`)}function V9e(e,t,n={}){const{state:r}=t,{doc:s,tr:o}=r,i=e;s.descendants((a,l)=>{const c=o.mapping.map(l),u=o.mapping.map(l)+a.nodeSize;let f=null;if(a.marks.forEach(g=>{if(g!==i)return!1;f=g}),!f)return;let m=!1;if(Object.keys(n).forEach(g=>{n[g]!==f.attrs[g]&&(m=!0)}),m){const g=e.type.create({...e.attrs,...n});o.removeMark(c,u,e.type),o.addMark(c,u,g)}}),o.docChanged&&t.view.dispatch(o)}var xl=class KQ extends _7{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new KQ(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},q9e=class{constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,n,r,s,o,i,a;const{view:l}=this.editor,c=e.target,u=c.nodeType===3?(t=c.parentElement)==null?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(c)||!u)return;let f=0,m=0;if(this.dom!==u){const S=this.dom.getBoundingClientRect(),k=u.getBoundingClientRect(),R=(s=e.offsetX)!=null?s:(r=e.nativeEvent)==null?void 0:r.offsetX,O=(i=e.offsetY)!=null?i:(o=e.nativeEvent)==null?void 0:o.offsetY;f=k.x-S.x+R,m=k.y-S.y+O}const g=this.dom.cloneNode(!0);try{const S=this.dom.getBoundingClientRect();g.style.width=`${Math.round(S.width)}px`,g.style.height=`${Math.round(S.height)}px`,g.style.boxSizing="border-box",g.style.pointerEvents="none"}catch{}let y=null;try{y=document.createElement("div"),y.style.position="absolute",y.style.top="-9999px",y.style.left="-9999px",y.style.pointerEvents="none",y.appendChild(g),document.body.appendChild(y),(a=e.dataTransfer)==null||a.setDragImage(g,f,m)}finally{y&&setTimeout(()=>{try{y==null||y.remove()}catch{}},0)}const v=this.getPos();if(typeof v!="number")return;const w=Nn.create(l.state.doc,v),_=l.state.tr.setSelection(w);l.dispatch(_)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const n=e.target;if(!(this.dom.contains(n)&&!((t=this.contentDOM)!=null&&t.contains(n))))return!1;const s=e.type.startsWith("drag"),o=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!o&&!s)return!0;const{isEditable:a}=this.editor,{isDragging:l}=this,c=!!this.node.type.spec.draggable,u=Nn.isSelectable(this.node),f=e.type==="copy",m=e.type==="paste",g=e.type==="cut",y=e.type==="mousedown";if(!c&&u&&s&&e.target===this.dom&&e.preventDefault(),c&&s&&!l&&e.target===this.dom)return e.preventDefault(),!1;if(c&&a&&!l&&y){const v=n.closest("[data-drag-handle]");v&&(this.dom===v||this.dom.contains(v))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||o||f||m||g||y&&u)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(TC()||yQ())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const n=this.getPos();return typeof n!="number"?!1:(t.setNodeMarkup(n,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}};function wm(e){return new T9e({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:s})=>{const o=Ss(e.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:i}=t,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),f=n.from+l.indexOf(a),m=f+a.length;if(E7(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(w=>w===e.type&&w!==y.mark.type)).filter(y=>y.to>f).length)return null;m<n.to&&i.delete(m,n.to),f>n.from&&i.delete(n.from+u,f),c=n.from+u+a.length,i.addMark(n.from+u,c,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}var G9e=Object.getOwnPropertyNames,W9e=Object.getOwnPropertySymbols,Y9e=Object.prototype.hasOwnProperty;function LB(e,t){return function(r,s,o){return e(r,s,o)&&t(r,s,o)}}function M2(e){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,s);var o=s.cache,i=o.get(n),a=o.get(r);if(i&&a)return i===r&&a===n;o.set(n,r),o.set(r,n);var l=e(n,r,s);return o.delete(n),o.delete(r),l}}function K9e(e){return e!=null?e[Symbol.toStringTag]:void 0}function $B(e){return G9e(e).concat(W9e(e))}var Z9e=Object.hasOwn||(function(e,t){return Y9e.call(e,t)});function Lm(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var J9e="__v",X9e="__o",Q9e="_owner",FB=Object.getOwnPropertyDescriptor,BB=Object.keys;function eOe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function tOe(e,t){return Lm(e.getTime(),t.getTime())}function nOe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function rOe(e,t){return e===t}function zB(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var s=new Array(r),o=e.entries(),i,a,l=0;(i=o.next())&&!i.done;){for(var c=t.entries(),u=!1,f=0;(a=c.next())&&!a.done;){if(s[f]){f++;continue}var m=i.value,g=a.value;if(n.equals(m[0],g[0],l,f,e,t,n)&&n.equals(m[1],g[1],m[0],g[0],e,t,n)){u=s[f]=!0;break}f++}if(!u)return!1;l++}return!0}var sOe=Lm;function oOe(e,t,n){var r=BB(e),s=r.length;if(BB(t).length!==s)return!1;for(;s-- >0;)if(!ZQ(e,t,n,r[s]))return!1;return!0}function Wy(e,t,n){var r=$B(e),s=r.length;if($B(t).length!==s)return!1;for(var o,i,a;s-- >0;)if(o=r[s],!ZQ(e,t,n,o)||(i=FB(e,o),a=FB(t,o),(i||a)&&(!i||!a||i.configurable!==a.configurable||i.enumerable!==a.enumerable||i.writable!==a.writable)))return!1;return!0}function iOe(e,t){return Lm(e.valueOf(),t.valueOf())}function aOe(e,t){return e.source===t.source&&e.flags===t.flags}function jB(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var s=new Array(r),o=e.values(),i,a;(i=o.next())&&!i.done;){for(var l=t.values(),c=!1,u=0;(a=l.next())&&!a.done;){if(!s[u]&&n.equals(i.value,a.value,i.value,a.value,e,t,n)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function lOe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function cOe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function ZQ(e,t,n,r){return(r===Q9e||r===X9e||r===J9e)&&(e.$$typeof||t.$$typeof)?!0:Z9e(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var uOe="[object Arguments]",dOe="[object Boolean]",fOe="[object Date]",hOe="[object Error]",pOe="[object Map]",mOe="[object Number]",gOe="[object Object]",bOe="[object RegExp]",yOe="[object Set]",vOe="[object String]",xOe="[object URL]",wOe=Array.isArray,UB=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,HB=Object.assign,EOe=Object.prototype.toString.call.bind(Object.prototype.toString);function _Oe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,s=e.areFunctionsEqual,o=e.areMapsEqual,i=e.areNumbersEqual,a=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,f=e.areTypedArraysEqual,m=e.areUrlsEqual,g=e.unknownTagComparators;return function(v,w,_){if(v===w)return!0;if(v==null||w==null)return!1;var S=typeof v;if(S!==typeof w)return!1;if(S!=="object")return S==="number"?i(v,w,_):S==="function"?s(v,w,_):!1;var k=v.constructor;if(k!==w.constructor)return!1;if(k===Object)return a(v,w,_);if(wOe(v))return t(v,w,_);if(UB!=null&&UB(v))return f(v,w,_);if(k===Date)return n(v,w,_);if(k===RegExp)return c(v,w,_);if(k===Map)return o(v,w,_);if(k===Set)return u(v,w,_);var R=EOe(v);if(R===fOe)return n(v,w,_);if(R===bOe)return c(v,w,_);if(R===pOe)return o(v,w,_);if(R===yOe)return u(v,w,_);if(R===gOe)return typeof v.then!="function"&&typeof w.then!="function"&&a(v,w,_);if(R===xOe)return m(v,w,_);if(R===hOe)return r(v,w,_);if(R===uOe)return a(v,w,_);if(R===dOe||R===mOe||R===vOe)return l(v,w,_);if(g){var O=g[R];if(!O){var M=K9e(v);M&&(O=g[M])}if(O)return O(v,w,_)}return!1}}function SOe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,s={areArraysEqual:r?Wy:eOe,areDatesEqual:tOe,areErrorsEqual:nOe,areFunctionsEqual:rOe,areMapsEqual:r?LB(zB,Wy):zB,areNumbersEqual:sOe,areObjectsEqual:r?Wy:oOe,arePrimitiveWrappersEqual:iOe,areRegExpsEqual:aOe,areSetsEqual:r?LB(jB,Wy):jB,areTypedArraysEqual:r?Wy:lOe,areUrlsEqual:cOe,unknownTagComparators:void 0};if(n&&(s=HB({},s,n(s))),t){var o=M2(s.areArraysEqual),i=M2(s.areMapsEqual),a=M2(s.areObjectsEqual),l=M2(s.areSetsEqual);s=HB({},s,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:a,areSetsEqual:l})}return s}function TOe(e){return function(t,n,r,s,o,i,a){return e(t,n,a)}}function COe(e){var t=e.circular,n=e.comparator,r=e.createState,s=e.equals,o=e.strict;if(r)return function(l,c){var u=r(),f=u.cache,m=f===void 0?t?new WeakMap:void 0:f,g=u.meta;return n(l,c,{cache:m,equals:s,meta:g,strict:o})};if(t)return function(l,c){return n(l,c,{cache:new WeakMap,equals:s,meta:void 0,strict:o})};var i={cache:void 0,equals:s,meta:void 0,strict:o};return function(l,c){return n(l,c,i)}}var kOe=Y0();Y0({strict:!0});Y0({circular:!0});Y0({circular:!0,strict:!0});Y0({createInternalComparator:function(){return Lm}});Y0({strict:!0,createInternalComparator:function(){return Lm}});Y0({circular:!0,createInternalComparator:function(){return Lm}});Y0({circular:!0,createInternalComparator:function(){return Lm},strict:!0});function Y0(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,s=e.createState,o=e.strict,i=o===void 0?!1:o,a=SOe(e),l=_Oe(a),c=r?r(l):TOe(l);return COe({circular:n,comparator:l,createState:s,equals:c,strict:i})}var _k={exports:{}},Sk={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VB;function AOe(){if(VB)return Sk;VB=1;var e=aw(),t=dG();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,o=e.useRef,i=e.useEffect,a=e.useMemo,l=e.useDebugValue;return Sk.useSyncExternalStoreWithSelector=function(c,u,f,m,g){var y=o(null);if(y.current===null){var v={hasValue:!1,value:null};y.current=v}else v=y.current;y=a(function(){function _(M){if(!S){if(S=!0,k=M,M=m(M),g!==void 0&&v.hasValue){var P=v.value;if(g(P,M))return R=P}return R=M}if(P=R,r(k,M))return P;var j=m(M);return g!==void 0&&g(P,j)?(k=M,P):(k=M,R=j)}var S=!1,k,R,O=f===void 0?null:f;return[function(){return _(u())},O===null?void 0:function(){return _(O())}]},[u,f,m,g]);var w=s(c,y[0],y[1]);return i(function(){v.hasValue=!0,v.value=w},[w]),l(w),w},Sk}var qB;function NOe(){return qB||(qB=1,_k.exports=AOe()),_k.exports}var IOe=NOe(),ROe=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},MOe=({contentComponent:e})=>{const t=_R.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return h.jsx(h.Fragment,{children:Object.values(t)})};function OOe(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:xR.createPortal(r.reactElement,r.element,n)},e.forEach(s=>s())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(s=>s())}}}var DOe=class extends Me.Component{constructor(e){var t;super(e),this.editorContentRef=Me.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=OOe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return h.jsxs(h.Fragment,{children:[h.jsx("div",{ref:ROe(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&h.jsx(MOe,{contentComponent:e.contentComponent})]})}},POe=x.forwardRef((e,t)=>{const n=Me.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Me.createElement(DOe,{key:n,innerRef:t,...e})}),LOe=Me.memo(POe),$Oe=typeof window<"u"?x.useLayoutEffect:x.useEffect,FOe=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function BOe(e){var t;const[n]=x.useState(()=>new FOe(e.editor)),r=IOe.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:kOe);return $Oe(()=>n.watch(e.editor),[e.editor,n]),x.useDebugValue(r),r}var zOe=!1,P6=typeof window>"u",jOe=P6||!!(typeof window<"u"&&window.next),UOe=class JQ{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?P6||jOe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)==null?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)==null?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)==null?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)==null?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)==null?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)==null?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)==null?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)==null?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)==null?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)==null?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)==null?void 0:o.call(s,...r)},onDelete:(...r)=>{var s,o;return(o=(s=this.options.current).onDelete)==null?void 0:o.call(s,...r)}};return new D9e(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((s,o)=>{var i;return s===((i=n.extensions)==null?void 0:i[o])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?JQ.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,s)=>r===t[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function HOe(e={},t=[]){const n=x.useRef(e);n.current=e;const[r]=x.useState(()=>new UOe(n)),s=_R.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return x.useDebugValue(s),x.useEffect(r.onRender(t)),BOe({editor:s,selector:({transactionNumber:o})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&o===0?0:o+1}),s}var XQ=x.createContext({editor:null});XQ.Consumer;var QQ=()=>x.useContext(XQ),eee=x.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),VOe=()=>x.useContext(eee),qOe=Me.forwardRef((e,t)=>{const{onDragStart:n}=VOe(),r=e.as||"div";return h.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});function GB(e){return!!(typeof e=="function"&&e.prototype&&e.prototype.isReactComponent)}function WB(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.forward_ref)"||e.$$typeof.description==="react.forward_ref"))}function GOe(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.memo)"||e.$$typeof.description==="react.memo"))}function WOe(e){if(GB(e)||WB(e))return!0;if(GOe(e)){const t=e.type;if(t)return GB(t)||WB(t)}return!1}function YOe(){try{if(x.version)return parseInt(x.version.split(".")[0],10)>=19}catch{}return!1}var KOe=class{constructor(e,{editor:t,props:n={},as:r="div",className:s=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?pl.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const t=this.component,n=this.props,r=this.editor,s=YOe(),o=WOe(t),i={...n};i.ref&&!(s||o)&&delete i.ref,!i.ref&&(s||o)&&(i.ref=a=>{this.ref=a}),this.reactElement=h.jsx(t,{...i}),(e=r==null?void 0:r.contentComponent)==null||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)==null||e.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}};Me.createContext({markViewContentRef:()=>{}});var ZOe=class extends q9e{constructor(e,t,n){if(super(e,t,n),this.selectionRafId=null,!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const r=this.dom.querySelector("[data-node-view-content]");if(!r)return;r.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(l={})=>this.updateAttributes(l),deleteNode:()=>this.deleteNode(),ref:x.createRef()};if(!this.component.displayName){const l=c=>c.charAt(0).toUpperCase()+c.substring(1);this.component.displayName=l(this.extension.name)}const r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:l=>{l&&this.contentDOMElement&&l.firstChild!==this.contentDOMElement&&(l.hasAttribute("data-node-view-wrapper")&&l.removeAttribute("data-node-view-wrapper"),l.appendChild(this.contentDOMElement))}},s=this.component,o=x.memo(l=>h.jsx(eee.Provider,{value:r,children:x.createElement(s,l)}));o.displayName="ReactNodeView";let i=this.node.isInline?"span":"div";this.options.as&&(i=this.options.as);const{className:a=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new KOe(o,{editor:this.editor,props:e,as:i,className:`node-${this.node.type.name} ${a}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!((e=this.renderer.element.firstElementChild)!=null&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null),this.selectionRafId=requestAnimationFrame(()=>{this.selectionRafId=null;const{from:e,to:t}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(e<=n&&t>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}})}update(e,t,n){const r=s=>{this.renderer.updateProps(s),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const s=this.node,o=this.decorations,i=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:s,oldDecorations:o,newNode:e,newDecorations:t,oldInnerDecorations:i,innerDecorations:n,updateProps:()=>r({node:e,decorations:t,innerDecorations:n})})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,r({node:e,decorations:t,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null,this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null)}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,n=Bx(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}};function JOe(e,t){return n=>n.editor.contentComponent?new ZOe(e,n,t):{}}function Wi(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var XOe=["color"],tee=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,XOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M4.18179 6.18181C4.35753 6.00608 4.64245 6.00608 4.81819 6.18181L7.49999 8.86362L10.1818 6.18181C10.3575 6.00608 10.6424 6.00608 10.8182 6.18181C10.9939 6.35755 10.9939 6.64247 10.8182 6.81821L7.81819 9.81821C7.73379 9.9026 7.61934 9.95001 7.49999 9.95001C7.38064 9.95001 7.26618 9.9026 7.18179 9.81821L4.18179 6.81821C4.00605 6.64247 4.00605 6.35755 4.18179 6.18181Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),QOe=["color"],eDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,QOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),tDe=["color"],nDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,tDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M9.96424 2.68571C10.0668 2.42931 9.94209 2.13833 9.6857 2.03577C9.4293 1.93322 9.13832 2.05792 9.03576 2.31432L5.03576 12.3143C4.9332 12.5707 5.05791 12.8617 5.3143 12.9642C5.5707 13.0668 5.86168 12.9421 5.96424 12.6857L9.96424 2.68571ZM3.85355 5.14646C4.04882 5.34172 4.04882 5.6583 3.85355 5.85356L2.20711 7.50001L3.85355 9.14646C4.04882 9.34172 4.04882 9.6583 3.85355 9.85356C3.65829 10.0488 3.34171 10.0488 3.14645 9.85356L1.14645 7.85356C0.951184 7.6583 0.951184 7.34172 1.14645 7.14646L3.14645 5.14646C3.34171 4.9512 3.65829 4.9512 3.85355 5.14646ZM11.1464 5.14646C11.3417 4.9512 11.6583 4.9512 11.8536 5.14646L13.8536 7.14646C14.0488 7.34172 14.0488 7.6583 13.8536 7.85356L11.8536 9.85356C11.6583 10.0488 11.3417 10.0488 11.1464 9.85356C10.9512 9.6583 10.9512 9.34172 11.1464 9.14646L12.7929 7.50001L11.1464 5.85356C10.9512 5.6583 10.9512 5.34172 11.1464 5.14646Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),rDe=["color"],sDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,rDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),oDe=["color"],nee=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,oDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),iDe=["color"],aDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,iDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M7.50005 1.04999C7.74858 1.04999 7.95005 1.25146 7.95005 1.49999V8.41359L10.1819 6.18179C10.3576 6.00605 10.6425 6.00605 10.8182 6.18179C10.994 6.35753 10.994 6.64245 10.8182 6.81819L7.81825 9.81819C7.64251 9.99392 7.35759 9.99392 7.18185 9.81819L4.18185 6.81819C4.00611 6.64245 4.00611 6.35753 4.18185 6.18179C4.35759 6.00605 4.64251 6.00605 4.81825 6.18179L7.05005 8.41359V1.49999C7.05005 1.25146 7.25152 1.04999 7.50005 1.04999ZM2.5 10C2.77614 10 3 10.2239 3 10.5V12C3 12.5539 3.44565 13 3.99635 13H11.0012C11.5529 13 12 12.5528 12 12V10.5C12 10.2239 12.2239 10 12.5 10C12.7761 10 13 10.2239 13 10.5V12C13 13.1041 12.1062 14 11.0012 14H3.99635C2.89019 14 2 13.103 2 12V10.5C2 10.2239 2.22386 10 2.5 10Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),lDe=["color"],cDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,lDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M3 2C2.44772 2 2 2.44772 2 3V12C2 12.5523 2.44772 13 3 13H12C12.5523 13 13 12.5523 13 12V8.5C13 8.22386 12.7761 8 12.5 8C12.2239 8 12 8.22386 12 8.5V12H3V3L6.5 3C6.77614 3 7 2.77614 7 2.5C7 2.22386 6.77614 2 6.5 2H3ZM12.8536 2.14645C12.9015 2.19439 12.9377 2.24964 12.9621 2.30861C12.9861 2.36669 12.9996 2.4303 13 2.497L13 2.5V2.50049V5.5C13 5.77614 12.7761 6 12.5 6C12.2239 6 12 5.77614 12 5.5V3.70711L6.85355 8.85355C6.65829 9.04882 6.34171 9.04882 6.14645 8.85355C5.95118 8.65829 5.95118 8.34171 6.14645 8.14645L11.2929 3H9.5C9.22386 3 9 2.77614 9 2.5C9 2.22386 9.22386 2 9.5 2H12.4999H12.5C12.5678 2 12.6324 2.01349 12.6914 2.03794C12.7504 2.06234 12.8056 2.09851 12.8536 2.14645Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),uDe=["color"],dDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,uDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M5.10505 12C4.70805 12 4.4236 11.912 4.25171 11.736C4.0839 11.5559 4 11.2715 4 10.8827V4.11733C4 3.72033 4.08595 3.43588 4.25784 3.26398C4.43383 3.08799 4.71623 3 5.10505 3C6.42741 3 8.25591 3 9.02852 3C10.1373 3 11.0539 3.98153 11.0539 5.1846C11.0539 6.08501 10.6037 6.81855 9.70327 7.23602C10.8657 7.44851 11.5176 8.62787 11.5176 9.48128C11.5176 10.5125 10.9902 12 9.27734 12C8.77742 12 6.42626 12 5.10505 12ZM8.37891 8.00341H5.8V10.631H8.37891C8.9 10.631 9.6296 10.1211 9.6296 9.29877C9.6296 8.47643 8.9 8.00341 8.37891 8.00341ZM5.8 4.36903V6.69577H8.17969C8.53906 6.69577 9.27734 6.35939 9.27734 5.50002C9.27734 4.64064 8.48047 4.36903 8.17969 4.36903H5.8Z",fill:r}))}),fDe=["color"],hDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,fDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M5.67494 3.50017C5.67494 3.25164 5.87641 3.05017 6.12494 3.05017H10.6249C10.8735 3.05017 11.0749 3.25164 11.0749 3.50017C11.0749 3.7487 10.8735 3.95017 10.6249 3.95017H9.00587L7.2309 11.05H8.87493C9.12345 11.05 9.32493 11.2515 9.32493 11.5C9.32493 11.7486 9.12345 11.95 8.87493 11.95H4.37493C4.1264 11.95 3.92493 11.7486 3.92493 11.5C3.92493 11.2515 4.1264 11.05 4.37493 11.05H5.99397L7.76894 3.95017H6.12494C5.87641 3.95017 5.67494 3.7487 5.67494 3.50017Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),pDe=["color"],mDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,pDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),gDe=["color"],bDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,gDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M8.51194 3.00541C9.18829 2.54594 10.0435 2.53694 10.6788 2.95419C10.8231 3.04893 10.9771 3.1993 11.389 3.61119C11.8009 4.02307 11.9513 4.17714 12.046 4.32141C12.4633 4.95675 12.4543 5.81192 11.9948 6.48827C11.8899 6.64264 11.7276 6.80811 11.3006 7.23511L10.6819 7.85383C10.4867 8.04909 10.4867 8.36567 10.6819 8.56093C10.8772 8.7562 11.1938 8.7562 11.389 8.56093L12.0077 7.94221L12.0507 7.89929C12.4203 7.52976 12.6568 7.2933 12.822 7.0502C13.4972 6.05623 13.5321 4.76252 12.8819 3.77248C12.7233 3.53102 12.4922 3.30001 12.1408 2.94871L12.0961 2.90408L12.0515 2.85942C11.7002 2.508 11.4692 2.27689 11.2277 2.11832C10.2377 1.46813 8.94398 1.50299 7.95001 2.17822C7.70691 2.34336 7.47044 2.57991 7.1009 2.94955L7.058 2.99247L6.43928 3.61119C6.24401 3.80645 6.24401 4.12303 6.43928 4.31829C6.63454 4.51355 6.95112 4.51355 7.14638 4.31829L7.7651 3.69957C8.1921 3.27257 8.35757 3.11027 8.51194 3.00541ZM4.31796 7.14672C4.51322 6.95146 4.51322 6.63487 4.31796 6.43961C4.12269 6.24435 3.80611 6.24435 3.61085 6.43961L2.99213 7.05833L2.94922 7.10124C2.57957 7.47077 2.34303 7.70724 2.17788 7.95035C1.50265 8.94432 1.4678 10.238 2.11799 11.2281C2.27656 11.4695 2.50766 11.7005 2.8591 12.0518L2.90374 12.0965L2.94837 12.1411C3.29967 12.4925 3.53068 12.7237 3.77214 12.8822C4.76219 13.5324 6.05589 13.4976 7.04986 12.8223C7.29296 12.6572 7.52943 12.4206 7.89896 12.051L7.89897 12.051L7.94188 12.0081L8.5606 11.3894C8.75586 11.1941 8.75586 10.8775 8.5606 10.6823C8.36533 10.487 8.04875 10.487 7.85349 10.6823L7.23477 11.301C6.80777 11.728 6.6423 11.8903 6.48794 11.9951C5.81158 12.4546 4.95642 12.4636 4.32107 12.0464C4.17681 11.9516 4.02274 11.8012 3.61085 11.3894C3.19896 10.9775 3.0486 10.8234 2.95385 10.6791C2.53661 10.0438 2.54561 9.18863 3.00507 8.51227C3.10993 8.35791 3.27224 8.19244 3.69924 7.76544L4.31796 7.14672ZM9.62172 6.08558C9.81698 5.89032 9.81698 5.57373 9.62172 5.37847C9.42646 5.18321 9.10988 5.18321 8.91461 5.37847L5.37908 8.91401C5.18382 9.10927 5.18382 9.42585 5.37908 9.62111C5.57434 9.81637 5.89092 9.81637 6.08619 9.62111L9.62172 6.08558Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),yDe=["color"],vDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,yDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M4.50021 0C4.77635 0 5.0002 0.223853 5.0002 0.49999V2.49995C5.0002 2.77609 4.77635 2.99994 4.50021 2.99994C4.22408 2.99994 4.00022 2.77609 4.00022 2.49995V0.49999C4.00022 0.223853 4.22408 0 4.50021 0ZM0.646451 0.64647C0.84171 0.451212 1.15829 0.451212 1.35354 0.64647L2.85351 2.14644C3.04877 2.3417 3.04877 2.65827 2.85351 2.85353C2.65826 3.04879 2.34168 3.04879 2.14642 2.85353L0.646452 1.35356C0.451193 1.1583 0.451193 0.841728 0.646451 0.64647ZM0.00030517 4.49991C0.00030517 4.22377 0.224158 3.99992 0.500295 3.99992H2.50025C2.77639 3.99992 3.00024 4.22377 3.00024 4.49991C3.00024 4.77605 2.77639 4.9999 2.50025 4.9999H0.500295C0.224158 4.9999 0.00030517 4.77605 0.00030517 4.49991ZM12.0001 10.4998C12.0001 10.2236 12.2239 9.9998 12.5001 9.9998H14.5C14.7761 9.9998 15 10.2236 15 10.4998C15 10.7759 14.7761 10.9998 14.5 10.9998H12.5001C12.2239 10.9998 12.0001 10.7759 12.0001 10.4998ZM10.5001 11.9998C10.7762 11.9998 11.0001 12.2236 11.0001 12.4997V14.4997C11.0001 14.7758 10.7762 14.9997 10.5001 14.9997C10.224 14.9997 10.0001 14.7758 10.0001 14.4997V12.4997C10.0001 12.2236 10.224 11.9998 10.5001 11.9998ZM12.1462 12.1462C12.3415 11.951 12.658 11.951 12.8533 12.1462L14.3533 13.6462C14.5485 13.8415 14.5485 14.158 14.3533 14.3533C14.158 14.5485 13.8414 14.5485 13.6462 14.3533L12.1462 12.8533C11.951 12.6581 11.951 12.3415 12.1462 12.1462ZM7.76478 3.69938C8.19177 3.27238 8.35724 3.11008 8.5116 3.00522C9.18794 2.54577 10.0431 2.53677 10.6784 2.95401C10.8227 3.04875 10.9767 3.19911 11.3886 3.61099C11.8005 4.02287 11.9509 4.17694 12.0456 4.3212C12.4628 4.95653 12.4539 5.81168 11.9944 6.48802C11.8895 6.64238 11.7272 6.80785 11.3002 7.23484L10.6815 7.85354C10.4863 8.0488 10.4863 8.36538 10.6815 8.56064C10.8768 8.75589 11.1934 8.75589 11.3886 8.56064L12.0073 7.94193L12.0502 7.89903C12.4199 7.5295 12.6564 7.29303 12.8216 7.04993C13.4968 6.05598 13.5316 4.7623 12.8815 3.77228C12.7229 3.53083 12.4918 3.29982 12.1404 2.94853L12.0957 2.9039L12.0511 2.85925C11.6998 2.50782 11.4688 2.27672 11.2273 2.11816C10.2373 1.46798 8.94364 1.50284 7.94968 2.17805C7.70659 2.34319 7.47012 2.57973 7.1006 2.94936L7.1006 2.94937L7.05769 2.99228L6.43898 3.61099C6.24372 3.80625 6.24372 4.12282 6.43898 4.31808C6.63424 4.51334 6.95081 4.51334 7.14607 4.31808L7.76478 3.69938ZM2.99191 7.05807L2.94899 7.10097C2.57935 7.4705 2.34282 7.70697 2.17767 7.95006C1.50246 8.94401 1.4676 10.2377 2.11778 11.2277C2.27634 11.4692 2.50744 11.7002 2.85886 12.0515L2.85888 12.0515L2.90352 12.0961L2.94815 12.1407L2.94815 12.1407L2.94817 12.1408C3.29945 12.4922 3.53045 12.7233 3.7719 12.8818C4.76193 13.532 6.0556 13.4972 7.04956 12.8219C7.29265 12.6568 7.52912 12.4203 7.89865 12.0506L7.94155 12.0077L8.56026 11.389C8.75552 11.1937 8.75552 10.8772 8.56026 10.6819C8.365 10.4867 8.04842 10.4867 7.85317 10.6819L7.23446 11.3006C6.80747 11.7276 6.642 11.8899 6.48764 11.9948C5.8113 12.4542 4.95615 12.4632 4.32082 12.046C4.17656 11.9512 4.02249 11.8009 3.61061 11.389C3.19873 10.9771 3.04837 10.8231 2.95363 10.6788C2.53639 10.0435 2.54539 9.18832 3.00484 8.51198C3.10971 8.35761 3.27201 8.19215 3.699 7.76516L4.3177 7.14645C4.51296 6.95119 4.51296 6.63462 4.3177 6.43936C4.12245 6.2441 3.80587 6.2441 3.61061 6.43936L2.99191 7.05807Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),xDe=["color"],ree=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,xDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M1.5 5.25C1.91421 5.25 2.25 4.91421 2.25 4.5C2.25 4.08579 1.91421 3.75 1.5 3.75C1.08579 3.75 0.75 4.08579 0.75 4.5C0.75 4.91421 1.08579 5.25 1.5 5.25ZM4 4.5C4 4.22386 4.22386 4 4.5 4H13.5C13.7761 4 14 4.22386 14 4.5C14 4.77614 13.7761 5 13.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM4.5 7C4.22386 7 4 7.22386 4 7.5C4 7.77614 4.22386 8 4.5 8H13.5C13.7761 8 14 7.77614 14 7.5C14 7.22386 13.7761 7 13.5 7H4.5ZM4.5 10C4.22386 10 4 10.2239 4 10.5C4 10.7761 4.22386 11 4.5 11H13.5C13.7761 11 14 10.7761 14 10.5C14 10.2239 13.7761 10 13.5 10H4.5ZM2.25 7.5C2.25 7.91421 1.91421 8.25 1.5 8.25C1.08579 8.25 0.75 7.91421 0.75 7.5C0.75 7.08579 1.08579 6.75 1.5 6.75C1.91421 6.75 2.25 7.08579 2.25 7.5ZM1.5 11.25C1.91421 11.25 2.25 10.9142 2.25 10.5C2.25 10.0858 1.91421 9.75 1.5 9.75C1.08579 9.75 0.75 10.0858 0.75 10.5C0.75 10.9142 1.08579 11.25 1.5 11.25Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),wDe=["color"],EDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,wDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M11.5 3.04999C11.7485 3.04999 11.95 3.25146 11.95 3.49999V7.49999C11.95 7.74852 11.7485 7.94999 11.5 7.94999C11.2515 7.94999 11.05 7.74852 11.05 7.49999V4.58639L4.58638 11.05H7.49999C7.74852 11.05 7.94999 11.2515 7.94999 11.5C7.94999 11.7485 7.74852 11.95 7.49999 11.95L3.49999 11.95C3.38064 11.95 3.26618 11.9026 3.18179 11.8182C3.0974 11.7338 3.04999 11.6193 3.04999 11.5L3.04999 7.49999C3.04999 7.25146 3.25146 7.04999 3.49999 7.04999C3.74852 7.04999 3.94999 7.25146 3.94999 7.49999L3.94999 10.4136L10.4136 3.94999L7.49999 3.94999C7.25146 3.94999 7.04999 3.74852 7.04999 3.49999C7.04999 3.25146 7.25146 3.04999 7.49999 3.04999L11.5 3.04999Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),_De=["color"],SDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,_De);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M5.00003 3.25C5.00003 2.97386 4.77617 2.75 4.50003 2.75C4.22389 2.75 4.00003 2.97386 4.00003 3.25V7.10003H2.49998C2.27906 7.10003 2.09998 7.27912 2.09998 7.50003C2.09998 7.72094 2.27906 7.90003 2.49998 7.90003H4.00003V8.55C4.00003 10.483 5.56703 12.05 7.50003 12.05C9.43303 12.05 11 10.483 11 8.55V7.90003H12.5C12.7209 7.90003 12.9 7.72094 12.9 7.50003C12.9 7.27912 12.7209 7.10003 12.5 7.10003H11V3.25C11 2.97386 10.7762 2.75 10.5 2.75C10.2239 2.75 10 2.97386 10 3.25V7.10003H5.00003V3.25ZM5.00003 7.90003V8.55C5.00003 9.93071 6.11932 11.05 7.50003 11.05C8.88074 11.05 10 9.93071 10 8.55V7.90003H5.00003Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),TDe=["color"],CDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,TDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L11.9291 2.36383C11.9159 2.32246 11.897 2.28368 11.8732 2.24845C11.7923 2.12875 11.6554 2.05005 11.5001 2.05005H3.50005C3.29909 2.05005 3.1289 2.18178 3.07111 2.3636C3.05743 2.40665 3.05005 2.45249 3.05005 2.50007V4.50001C3.05005 4.74854 3.25152 4.95001 3.50005 4.95001C3.74858 4.95001 3.95005 4.74854 3.95005 4.50001V2.95005H6.95006V7.34284L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L6.95006 8.75705V12.0501H5.7544C5.50587 12.0501 5.3044 12.2515 5.3044 12.5001C5.3044 12.7486 5.50587 12.9501 5.7544 12.9501H9.2544C9.50293 12.9501 9.7044 12.7486 9.7044 12.5001C9.7044 12.2515 9.50293 12.0501 9.2544 12.0501H8.05006V7.65705L13.3536 2.35355ZM8.05006 6.24284L11.0501 3.24283V2.95005H8.05006V6.24284Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),kDe=["color"],ADe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,kDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),NDe=["color"],IDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Wi(e,NDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),x.createElement("path",{d:"M5.00001 2.75C5.00001 2.47386 4.77615 2.25 4.50001 2.25C4.22387 2.25 4.00001 2.47386 4.00001 2.75V8.05C4.00001 9.983 5.56702 11.55 7.50001 11.55C9.43301 11.55 11 9.983 11 8.05V2.75C11 2.47386 10.7762 2.25 10.5 2.25C10.2239 2.25 10 2.47386 10 2.75V8.05C10 9.43071 8.88072 10.55 7.50001 10.55C6.1193 10.55 5.00001 9.43071 5.00001 8.05V2.75ZM3.49998 13.1001C3.27906 13.1001 3.09998 13.2791 3.09998 13.5001C3.09998 13.721 3.27906 13.9001 3.49998 13.9001H11.5C11.7209 13.9001 11.9 13.721 11.9 13.5001C11.9 13.2791 11.7209 13.1001 11.5 13.1001H3.49998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const Zp=x.forwardRef(({isActive:e,children:t,tooltip:n,className:r,tooltipOptions:s,...o},i)=>{const a=h.jsx(YN,{size:"sm",ref:i,className:Qe("size-8 p-0",{"bg-accent":e},r),...o,children:t});return n?h.jsx(V1,{children:h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:a}),h.jsx(um,{...s,children:h.jsx("div",{className:"flex flex-col items-center text-center",children:n})})]})}):a});Zp.displayName="ToolbarButton";const RDe=()=>typeof window<"u",YB=()=>RDe()&&window.navigator.platform==="MacIntel",MDe={mod:YB()?{symbol:"",readable:"Command"}:{symbol:"Ctrl",readable:"Control"},alt:YB()?{symbol:"",readable:"Option"}:{symbol:"Alt",readable:"Alt"},shift:{symbol:"",readable:"Shift"}},see=e=>MDe[e.toLowerCase()]||{symbol:e,readable:e},KB=(e,t)=>{switch(t){case"json":return e.getJSON();case"html":return e.isEmpty?"":e.getHTML();default:return e.getText()}},L6=(e,t={requireHostname:!1})=>{if(e.includes(`
`))return!1;try{const n=new URL(e);return["javascript:","file:","vbscript:",...t.allowBase64?[]:["data:"]].includes(n.protocol)?!1:t.allowBase64&&n.protocol==="data:"?/^data:image\/[a-z]+;base64,/.test(e):n.hostname?!0:n.protocol!==""&&(n.pathname.startsWith("//")||n.pathname.startsWith("http"))&&!t.requireHostname}catch{return!1}},ODe=(e,t={})=>{if(e)return t.allowBase64&&e.startsWith("data:image")?L6(e,{requireHostname:!1,allowBase64:!0})?e:void 0:L6(e,{requireHostname:!1,allowBase64:t.allowBase64})||/^(\/|#|mailto:|sms:|fax:|tel:)/.test(e)?e:`https://${e}`},DDe=async e=>{const n=await(await fetch(e)).blob();return new Promise((r,s)=>{const o=new FileReader;o.onloadend=()=>{typeof o.result=="string"?r(o.result):s(new Error("Failed to convert Blob to base64"))},o.onerror=s,o.readAsDataURL(n)})},zx=()=>Math.random().toString(36).slice(2,11),Tk=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{typeof r.result=="string"?t(r.result):n(new Error("Failed to convert File to base64"))},r.onerror=n,r.readAsDataURL(e)}),ZB=(e,t,n,r,s)=>{const{isValidType:o,isValidSize:i}=PDe(e,t);o&&i?r.push(n):(o||s.push({file:e,reason:"type"}),i||s.push({file:e,reason:"size"}))},PDe=(e,{allowedMimeTypes:t,maxFileSize:n})=>{const r=e instanceof File?e.type:LDe(e),s=e instanceof File?e.size:atob(e.split(",")[1]).length,o=t.length===0||t.includes(r)||t.includes(`${r.split("/")[0]}/*`),i=!n||s<=n;return{isValidType:o,isValidSize:i}},LDe=e=>{const t=e.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/);return t&&t.length>1?t[1]:"unknown"},$De=e=>{if(e.startsWith("data:")){const t=e.match(/^data:[^;]+;base64,(.+)$/);if(t&&t[1])e=t[1];else return!1}try{return btoa(atob(e))===e}catch{return!1}},XS=(e,t)=>{const n=[],r=[];return e.forEach(s=>{const o="src"in s?s.src:s;o instanceof File?ZB(o,t,s,n,r):typeof o=="string"&&($De(o)?t.allowBase64?ZB(o,t,s,n,r):r.push({file:o,reason:"base64NotAllowed"}):ODe(o,{allowBase64:t.allowBase64})?n.push(s):r.push({file:o,reason:"invalidBase64"}))}),[n,r]},oee=x.forwardRef(({className:e,keys:t,...n},r)=>{const s=t.map(i=>see(i)),o=s.map(i=>i.readable).join(" + ");return h.jsx("span",{"aria-label":o,className:Qe("inline-flex items-center gap-0.5",e),...n,ref:r,children:s.map(i=>h.jsx("kbd",{className:Qe("inline-block min-w-2.5 text-center align-baseline font-sans text-xs font-medium capitalize text-[rgb(156,157,160)]",e),...n,ref:r,children:i.symbol},i.symbol))})});oee.displayName="ShortcutKey";const iee=({editor:e,actions:t,activeActions:n=t.map(c=>c.value),mainActionCount:r=0,dropdownIcon:s,dropdownTooltip:o="More options",dropdownClassName:i="w-12",size:a,variant:l})=>{const{mainActions:c,dropdownActions:u}=x.useMemo(()=>{const y=t.filter(v=>n.includes(v.value)).sort((v,w)=>n.indexOf(v.value)-n.indexOf(w.value));return{mainActions:y.slice(0,r),dropdownActions:y.slice(r)}},[t,n,r]),f=x.useCallback(y=>h.jsx(Zp,{onClick:()=>y.action(e),disabled:!y.canExecute(e),isActive:y.isActive(e),tooltip:`${y.label} ${y.shortcuts.map(v=>see(v).symbol).join(" ")}`,"aria-label":y.label,size:a,variant:l,children:y.icon},y.label),[e,a,l]),m=x.useCallback(y=>h.jsxs(uu,{onClick:()=>y.action(e),disabled:!y.canExecute(e),className:Qe("flex flex-row items-center justify-between gap-4",{"bg-accent":y.isActive(e)}),"aria-label":y.label,children:[h.jsx("span",{className:"grow",children:y.label}),h.jsx(oee,{keys:y.shortcuts})]},y.label),[e]),g=x.useMemo(()=>u.some(y=>y.isActive(e)),[u,e]);return h.jsxs(h.Fragment,{children:[c.map(f),u.length>0&&h.jsxs(bw,{children:[h.jsx(yw,{asChild:!0,children:h.jsx(Zp,{isActive:g,tooltip:o,"aria-label":o,className:Qe(i),size:a,variant:l,children:s||h.jsx(tee,{className:"size-5"})})}),h.jsx(vw,{align:"start",className:"w-full",children:u.map(m)})]})]})},JB=[{value:"bold",label:"Bold",icon:h.jsx(dDe,{className:"size-5"}),action:e=>e.chain().focus().toggleBold().run(),isActive:e=>e.isActive("bold"),canExecute:e=>e.can().chain().focus().toggleBold().run()&&!e.isActive("codeBlock"),shortcuts:["mod","B"]},{value:"italic",label:"Italic",icon:h.jsx(hDe,{className:"size-5"}),action:e=>e.chain().focus().toggleItalic().run(),isActive:e=>e.isActive("italic"),canExecute:e=>e.can().chain().focus().toggleItalic().run()&&!e.isActive("codeBlock"),shortcuts:["mod","I"]},{value:"underline",label:"Underline",icon:h.jsx(IDe,{className:"size-5"}),action:e=>e.chain().focus().toggleUnderline().run(),isActive:e=>e.isActive("underline"),canExecute:e=>e.can().chain().focus().toggleUnderline().run()&&!e.isActive("codeBlock"),shortcuts:["mod","U"]},{value:"strikethrough",label:"Strikethrough",icon:h.jsx(SDe,{className:"size-5"}),action:e=>e.chain().focus().toggleStrike().run(),isActive:e=>e.isActive("strike"),canExecute:e=>e.can().chain().focus().toggleStrike().run()&&!e.isActive("codeBlock"),shortcuts:["mod","shift","S"]},{value:"code",label:"Code",icon:h.jsx(nDe,{className:"size-5"}),action:e=>e.chain().focus().toggleCode().run(),isActive:e=>e.isActive("code"),canExecute:e=>e.can().chain().focus().toggleCode().run()&&!e.isActive("codeBlock"),shortcuts:["mod","E"]},{value:"clearFormatting",label:"Clear formatting",icon:h.jsx(CDe,{className:"size-5"}),action:e=>e.chain().focus().unsetAllMarks().run(),isActive:()=>!1,canExecute:e=>e.can().chain().focus().unsetAllMarks().run()&&!e.isActive("codeBlock"),shortcuts:["mod","\\"]}],aee=({editor:e,activeActions:t=JB.map(o=>o.value),mainActionCount:n=2,size:r,variant:s})=>h.jsx(iee,{editor:e,actions:JB,activeActions:t,mainActionCount:n,dropdownIcon:h.jsx(nee,{className:"size-5"}),dropdownTooltip:"More formatting",dropdownClassName:"w-8",size:r,variant:s});aee.displayName="SectionTwo";const XB=[{value:"orderedList",label:"Numbered list",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 -960 960 960",width:"20px",fill:"currentColor",children:h.jsx("path",{d:"M144-144v-48h96v-24h-48v-48h48v-24h-96v-48h120q10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v48q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9 10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v48q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9H144Zm0-240v-96q0-10.2 6.9-17.1 6.9-6.9 17.1-6.9h72v-24h-96v-48h120q10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v72q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9h-72v24h96v48H144Zm48-240v-144h-48v-48h96v192h-48Zm168 384v-72h456v72H360Zm0-204v-72h456v72H360Zm0-204v-72h456v72H360Z"})}),isActive:e=>e.isActive("orderedList"),action:e=>e.chain().focus().toggleOrderedList().run(),canExecute:e=>e.can().chain().focus().toggleOrderedList().run(),shortcuts:["mod","shift","7"]},{value:"bulletList",label:"Bullet list",icon:h.jsx(ree,{className:"size-5"}),isActive:e=>e.isActive("bulletList"),action:e=>e.chain().focus().toggleBulletList().run(),canExecute:e=>e.can().chain().focus().toggleBulletList().run(),shortcuts:["mod","shift","8"]}],lee=({editor:e,activeActions:t=XB.map(o=>o.value),mainActionCount:n=0,size:r,variant:s})=>h.jsx(iee,{editor:e,actions:XB,activeActions:t,mainActionCount:n,dropdownIcon:h.jsxs(h.Fragment,{children:[h.jsx(ree,{className:"size-5"}),h.jsx(tee,{className:"size-5"})]}),dropdownTooltip:"Lists",size:r,variant:s});lee.displayName="SectionFour";let $6,F6;if(typeof WeakMap<"u"){let e=new WeakMap;$6=t=>e.get(t),F6=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;$6=r=>{for(let s=0;s<e.length;s+=2)if(e[s]==r)return e[s+1]},F6=(r,s)=>(n==10&&(n=0),e[n++]=r,e[n++]=s)}var _f=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,s=t/this.width|0;let o=r+1,i=s+1;for(let a=1;o<this.width&&this.map[t+a]==n;a++)o++;for(let a=1;i<this.height&&this.map[t+this.width*a]==n;a++)i++;return{left:r,top:s,right:o,bottom:i}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:s,top:o,bottom:i}=this.findCell(e);return t=="horiz"?(n<0?r==0:s==this.width)?null:this.map[o*this.width+(n<0?r-1:s)]:(n<0?o==0:i==this.height)?null:this.map[r+this.width*(n<0?o-1:i)]}rectBetween(e,t){const{left:n,right:r,top:s,bottom:o}=this.findCell(e),{left:i,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,i),top:Math.min(s,l),right:Math.max(r,a),bottom:Math.max(o,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let s=e.left;s<e.right;s++){const o=r*this.width+s,i=this.map[o];n[i]||(n[i]=!0,!(s==e.left&&s&&this.map[o-1]==i||r==e.top&&r&&this.map[o-this.width]==i)&&t.push(i))}return t}positionAt(e,t,n){for(let r=0,s=0;;r++){const o=s+n.child(r).nodeSize;if(r==e){let i=t+e*this.width;const a=(e+1)*this.width;for(;i<a&&this.map[i]<s;)i++;return i==a?o-1:this.map[i]}s=o}}static get(e){return $6(e)||F6(e,FDe(e))}};function FDe(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=BDe(e),n=e.childCount,r=[];let s=0,o=null;const i=[];for(let c=0,u=t*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const f=e.child(c);u++;for(let y=0;;y++){for(;s<r.length&&r[s]!=0;)s++;if(y==f.childCount)break;const v=f.child(y),{colspan:w,rowspan:_,colwidth:S}=v.attrs;for(let k=0;k<_;k++){if(k+c>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:u,n:_-k});break}const R=s+k*t;for(let O=0;O<w;O++){r[R+O]==0?r[R+O]=u:(o||(o=[])).push({type:"collision",row:c,pos:u,n:w-O});const M=S&&S[O];if(M){const P=(R+O)%t*2,j=i[P];j==null||j!=M&&i[P+1]==1?(i[P]=M,i[P+1]=1):j==M&&i[P+1]++}}}s+=w,u+=v.nodeSize}const m=(c+1)*t;let g=0;for(;s<m;)r[s++]==0&&g++;g&&(o||(o=[])).push({type:"missing",row:c,n:g}),u++}(t===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const a=new _f(t,n,r,o);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&zDe(a,i,e),a}function BDe(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const s=e.child(r);let o=0;if(n)for(let i=0;i<r;i++){const a=e.child(i);for(let l=0;l<a.childCount;l++){const c=a.child(l);i+c.attrs.rowspan>r&&(o+=c.attrs.colspan)}}for(let i=0;i<s.childCount;i++){const a=s.child(i);o+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=o:t!=o&&(t=Math.max(t,o))}return t}function zDe(e,t,n){e.problems||(e.problems=[]);const r={};for(let s=0;s<e.map.length;s++){const o=e.map[s];if(r[o])continue;r[o]=!0;const i=n.nodeAt(o);if(!i)throw new RangeError(`No cell with offset ${o} found`);let a=null;const l=i.attrs;for(let c=0;c<l.colspan;c++){const u=t[(s+c)%e.width*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=jDe(l)))[c]=u)}a&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}function jDe(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function k7(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],s=r.spec.tableRole;s&&(t[s]=r)}}return t}new Bs("selectingCells");function UDe(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function cee(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function HDe(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=UDe(t.$head)||VDe(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function VDe(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function QB(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function uee(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function dee(e,t,n){const r=e.node(-1),s=_f.get(r),o=e.start(-1),i=s.nextCell(e.pos-o,t,n);return i==null?null:e.node(0).resolve(o+i)}function ez(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}var wd=class vf extends Vn{constructor(t,n=t){const r=t.node(-1),s=_f.get(r),o=t.start(-1),i=s.rectBetween(t.pos-o,n.pos-o),a=t.node(0),l=s.cellsInRect(i).filter(u=>u!=n.pos-o);l.unshift(n.pos-o);const c=l.map(u=>{const f=r.nodeAt(u);if(!f)throw new RangeError(`No cell with offset ${u} found`);const m=o+u+1;return new vX(a.resolve(m),a.resolve(m+f.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),s=t.resolve(n.map(this.$headCell.pos));if(QB(r)&&QB(s)&&uee(r,s)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?vf.rowSelection(r,s):o&&this.isColSelection()?vf.colSelection(r,s):new vf(r,s)}return qn.between(r,s)}content(){const t=this.$anchorCell.node(-1),n=_f.get(t),r=this.$anchorCell.start(-1),s=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},i=[];for(let l=s.top;l<s.bottom;l++){const c=[];for(let u=l*n.width+s.left,f=s.left;f<s.right;f++,u++){const m=n.map[u];if(o[m])continue;o[m]=!0;const g=n.findCell(m);let y=t.nodeAt(m);if(!y)throw new RangeError(`No cell with offset ${m} found`);const v=s.left-g.left,w=g.right-s.right;if(v>0||w>0){let _=y.attrs;if(v>0&&(_=ez(_,0,v)),w>0&&(_=ez(_,_.colspan-w,w)),g.left<s.left){if(y=y.type.createAndFill(_),!y)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(_)}`)}else y=y.type.create(_,y.content)}if(g.top<s.top||g.bottom>s.bottom){const _={...y.attrs,rowspan:Math.min(g.bottom,s.bottom)-Math.max(g.top,s.top)};g.top<s.top?y=y.type.createAndFill(_):y=y.type.create(_,y.content)}c.push(y)}i.push(t.child(l).copy(bt.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?t:i;return new Zt(bt.from(a),1,1)}replace(t,n=Zt.empty){const r=t.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){const{$from:a,$to:l}=s[i],c=t.mapping.slice(r);t.replace(c.map(a.pos),c.map(l.pos),i?Zt.empty:n)}const o=Vn.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);o&&t.setSelection(o)}replaceWith(t,n){this.replace(t,new Zt(bt.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=_f.get(n),s=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let i=0;i<o.length;i++)t(n.nodeAt(o[i]),s+o[i])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,s=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),s=_f.get(r),o=t.start(-1),i=s.findCell(t.pos-o),a=s.findCell(n.pos-o),l=t.node(0);return i.top<=a.top?(i.top>0&&(t=l.resolve(o+s.map[i.left])),a.bottom<s.height&&(n=l.resolve(o+s.map[s.width*(s.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(o+s.map[a.left])),i.bottom<s.height&&(t=l.resolve(o+s.map[s.width*(s.height-1)+i.right-1]))),new vf(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=_f.get(t),r=this.$anchorCell.start(-1),s=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(s,o)>0)return!1;const i=s+this.$anchorCell.nodeAfter.attrs.colspan,a=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==n.width}eq(t){return t instanceof vf&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),s=_f.get(r),o=t.start(-1),i=s.findCell(t.pos-o),a=s.findCell(n.pos-o),l=t.node(0);return i.left<=a.left?(i.left>0&&(t=l.resolve(o+s.map[i.top*s.width])),a.right<s.width&&(n=l.resolve(o+s.map[s.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(o+s.map[a.top*s.width])),i.right<s.width&&(t=l.resolve(o+s.map[s.width*(i.top+1)-1]))),new vf(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new vf(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new vf(t.resolve(n),t.resolve(r))}getBookmark(){return new qDe(this.$anchorCell.pos,this.$headCell.pos)}};wd.prototype.visible=!1;Vn.jsonID("cell",wd);var qDe=class fee{constructor(t,n){this.anchor=t,this.head=n}map(t){return new fee(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&uee(n,r)?new wd(n,r):Vn.near(r,1)}};new Bs("fix-tables");function hee(e){const t=e.selection,n=HDe(e),r=n.node(-1),s=n.start(-1),o=_f.get(r);return{...t instanceof wd?o.rectBetween(t.$anchorCell.pos-s,t.$headCell.pos-s):o.findCell(n.pos-s),tableStart:s,map:o,table:r}}function GDe(e){return function(t,n){if(!cee(t))return!1;if(n){const r=k7(t.schema),s=hee(t),o=t.tr,i=s.map.cellsInRect(e=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:e=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),a=i.map(l=>s.table.nodeAt(l));for(let l=0;l<i.length;l++)a[l].type==r.header_cell&&o.setNodeMarkup(s.tableStart+i[l],r.cell,a[l].attrs);if(o.steps.length===0)for(let l=0;l<i.length;l++)o.setNodeMarkup(s.tableStart+i[l],r.header_cell,a[l].attrs);n(o)}return!0}}function tz(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let s=0;s<r.length;s++){const o=t.table.nodeAt(r[s]);if(o&&o.type!==n.header_cell)return!1}return!0}function A7(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?GDe(e):function(n,r){if(!cee(n))return!1;if(r){const s=k7(n.schema),o=hee(n),i=n.tr,a=tz("row",o,s),l=tz("column",o,s),c=(e==="column"?a:e==="row"&&l)?1:0,u=e=="column"?{left:0,top:c,right:1,bottom:o.map.height}:e=="row"?{left:c,top:0,right:o.map.width,bottom:1}:o,f=e=="column"?l?s.cell:s.header_cell:e=="row"?a?s.cell:s.header_cell:s.cell;o.map.cellsInRect(u).forEach(m=>{const g=m+o.tableStart,y=i.doc.nodeAt(g);y&&i.setNodeMarkup(g,f,y.attrs)}),r(i)}return!0}}A7("row",{useDeprecatedLogic:!0});A7("column",{useDeprecatedLogic:!0});A7("cell",{useDeprecatedLogic:!0});function O2(e,t){const n=e.selection;if(!(n instanceof wd))return!1;if(t){const r=e.tr,s=k7(e.schema).cell.createAndFill().content;n.forEachCell((o,i)=>{o.content.eq(s)||r.replace(r.mapping.map(i+1),r.mapping.map(i+o.nodeSize-1),new Zt(s,0,0))}),r.docChanged&&t(r)}return!0}p7({ArrowLeft:D2("horiz",-1),ArrowRight:D2("horiz",1),ArrowUp:D2("vert",-1),ArrowDown:D2("vert",1),"Shift-ArrowLeft":P2("horiz",-1),"Shift-ArrowRight":P2("horiz",1),"Shift-ArrowUp":P2("vert",-1),"Shift-ArrowDown":P2("vert",1),Backspace:O2,"Mod-Backspace":O2,Delete:O2,"Mod-Delete":O2});function O_(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function D2(e,t){return(n,r,s)=>{if(!s)return!1;const o=n.selection;if(o instanceof wd)return O_(n,r,Vn.near(o.$headCell,t));if(e!="horiz"&&!o.empty)return!1;const i=pee(s,e,t);if(i==null)return!1;if(e=="horiz")return O_(n,r,Vn.near(n.doc.resolve(o.head+t),t));{const a=n.doc.resolve(i),l=dee(a,e,t);let c;return l?c=Vn.near(l,1):t<0?c=Vn.near(n.doc.resolve(a.before(-1)),-1):c=Vn.near(n.doc.resolve(a.after(-1)),1),O_(n,r,c)}}}function P2(e,t){return(n,r,s)=>{if(!s)return!1;const o=n.selection;let i;if(o instanceof wd)i=o;else{const l=pee(s,e,t);if(l==null)return!1;i=new wd(n.doc.resolve(l))}const a=dee(i.$headCell,e,t);return a?O_(n,r,new wd(i.$anchorCell,a)):!1}}function pee(e,t,n){if(!(e.state.selection instanceof qn))return null;const{$head:r}=e.state.selection;for(let s=r.depth-1;s>=0;s--){const o=r.node(s);if((n<0?r.index(s):r.indexAfter(s))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const i=r.before(s),a=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(a)?i:null}}return null}new Bs("tableColumnResizing");function WDe(e,t){const n=Math.min(e.top,t.top),r=Math.max(e.bottom,t.bottom),s=Math.min(e.left,t.left),i=Math.max(e.right,t.right)-s,a=r-n,l=s,c=n;return new DOMRect(l,c,i,a)}var YDe=class{constructor({editor:e,element:t,view:n,updateDelay:r=250,resizeDelay:s=60,shouldShow:o,appendTo:i,getReferencedVirtualElement:a,options:l}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:u,state:f,from:m,to:g})=>{const{doc:y,selection:v}=f,{empty:w}=v,_=!y.textBetween(m,g).length&&b7(f.selection),S=this.element.contains(document.activeElement);return!(!(u.hasFocus()||S)||w||_||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var f;if(this.editor.isDestroyed){this.destroy();return}if(this.preventHide){this.preventHide=!1;return}u!=null&&u.relatedTarget&&((f=this.element.parentNode)!=null&&f.contains(u.relatedTarget))||(u==null?void 0:u.relatedTarget)!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(u,f)=>{const m=!(f!=null&&f.selection.eq(u.state.selection)),g=!(f!=null&&f.doc.eq(u.state.doc));!m&&!g||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,m,g,f)},this.updateDelay))},this.updateHandler=(u,f,m,g)=>{const{composing:y}=u;if(y||!f&&!m)return;if(!this.getShouldShow(g)){this.hide();return}this.updatePosition(),this.show()},this.transactionHandler=({transaction:u})=>{u.getMeta("bubbleMenu")==="updatePosition"&&this.updatePosition()};var c;this.editor=e,this.element=t,this.view=n,this.updateDelay=r,this.resizeDelay=s,this.appendTo=i,this.scrollTarget=(c=l==null?void 0:l.scrollTarget)!=null?c:window,this.getReferencedVirtualElement=a,this.floatingUIOptions={...this.floatingUIOptions,...l},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(DR(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(OR(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(MR(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push(oS(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(PR(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(MG(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push(LR(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(OG(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),e}get virtualElement(){var e;const{selection:t}=this.editor.state,n=(e=this.getReferencedVirtualElement)==null?void 0:e.call(this);if(n)return n;const r=OQ(this.view,t.from,t.to);let s={getBoundingClientRect:()=>r,getClientRects:()=>[r]};if(t instanceof Nn){let o=this.view.nodeDOM(t.from);const i=o.dataset.nodeViewWrapper?o:o.querySelector("[data-node-view-wrapper]");i&&(o=i),o&&(s={getBoundingClientRect:()=>o.getBoundingClientRect(),getClientRects:()=>[o.getBoundingClientRect()]})}if(t instanceof wd){const{$anchorCell:o,$headCell:i}=t,a=o?o.pos:i.pos,l=i?i.pos:o.pos,c=this.view.nodeDOM(a),u=this.view.nodeDOM(l);if(!c||!u)return;const f=c===u?c.getBoundingClientRect():WDe(c.getBoundingClientRect(),u.getBoundingClientRect());s={getBoundingClientRect:()=>f,getClientRects:()=>[f]}}return s}updatePosition(){const e=this.virtualElement;e&&$R(e,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:t,y:n,strategy:r})=>{this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${t}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const{state:n}=e,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(e,t);return}const s=!(t!=null&&t.selection.eq(e.state.selection)),o=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,s,o,t)}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:s}=r,o=Math.min(...s.map(l=>l.$from.pos)),i=Math.max(...s.map(l=>l.$to.pos));return((t=this.shouldShow)==null?void 0:t.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:e,from:o,to:i}))||!1}show(){var e;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const t=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(e=t??this.view.dom.parentElement)==null||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},mee=e=>new vs({key:typeof e.pluginKey=="string"?new Bs(e.pluginKey):e.pluginKey,view:t=>new YDe({view:t,...e})});Gr.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[mee({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}});var KDe=class{constructor({editor:e,element:t,view:n,options:r,appendTo:s,shouldShow:o}){this.preventHide=!1,this.isVisible=!1,this.shouldShow=({view:i,state:a})=>{const{selection:l}=a,{$anchor:c,empty:u}=l,f=c.depth===1,m=c.parent.isTextblock&&!c.parent.type.spec.code&&!c.parent.textContent&&c.parent.childCount===0&&!this.getTextContent(c.parent);return!(!i.hasFocus()||!u||!f||!m||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(i,a,l,c)=>{const{composing:u}=i;if(u||!a&&!l)return;if(!this.getShouldShow(c)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:i})=>{var a;if(this.preventHide){this.preventHide=!1;return}i!=null&&i.relatedTarget&&((a=this.element.parentNode)!=null&&a.contains(i.relatedTarget))||(i==null?void 0:i.relatedTarget)!==this.editor.view.dom&&this.hide()},this.editor=e,this.element=t,this.view=n,this.appendTo=s,this.floatingUIOptions={...this.floatingUIOptions,...r},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}getTextContent(e){return kQ(e,{textSerializers:w7(this.editor.schema)})}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(DR(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(OR(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(MR(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push(oS(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(PR(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(MG(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push(LR(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(OG(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),e}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:s}=r,o=Math.min(...s.map(l=>l.$from.pos)),i=Math.max(...s.map(l=>l.$to.pos));return(t=this.shouldShow)==null?void 0:t.call(this,{editor:this.editor,view:this.view,state:n,oldState:e,from:o,to:i})}updatePosition(){const{selection:e}=this.editor.state,t=OQ(this.view,e.from,e.to);$R({getBoundingClientRect:()=>t,getClientRects:()=>[t]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:s,strategy:o})=>{this.element.style.width="max-content",this.element.style.position=o,this.element.style.left=`${r}px`,this.element.style.top=`${s}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const n=!(t!=null&&t.selection.eq(e.state.selection)),r=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,n,r,t)}show(){var e;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const t=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(e=t??this.view.dom.parentElement)==null||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},gee=e=>new vs({key:typeof e.pluginKey=="string"?new Bs(e.pluginKey):e.pluginKey,view:t=>new KDe({view:t,...e})});Gr.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[gee({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var ZDe=Me.forwardRef(({pluginKey:e="bubbleMenu",editor:t,updateDelay:n,resizeDelay:r,appendTo:s,shouldShow:o=null,getReferencedVirtualElement:i,options:a,children:l,...c},u)=>{const f=x.useRef(document.createElement("div"));typeof u=="function"?u(f.current):u&&(u.current=f.current);const{editor:m}=QQ(),g=t||m,y={updateDelay:n,resizeDelay:r,appendTo:s,pluginKey:e,shouldShow:o,getReferencedVirtualElement:i,options:a},v=x.useRef(y);return v.current=y,x.useEffect(()=>{if(g!=null&&g.isDestroyed)return;if(!g){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const w=f.current;w.style.visibility="hidden",w.style.position="absolute";const _=mee({...v.current,editor:g,element:w});g.registerPlugin(_);const S=v.current.pluginKey;return()=>{g.unregisterPlugin(S),window.requestAnimationFrame(()=>{w.parentNode&&w.parentNode.removeChild(w)})}},[g]),pl.createPortal(h.jsx("div",{...c,children:l}),f.current)});Me.forwardRef(({pluginKey:e="floatingMenu",editor:t,appendTo:n,shouldShow:r=null,options:s,children:o,...i},a)=>{const l=x.useRef(document.createElement("div"));typeof a=="function"?a(l.current):a&&(a.current=l.current);const{editor:c}=QQ();return x.useEffect(()=>{const u=l.current;if(u.style.visibility="hidden",u.style.position="absolute",t!=null&&t.isDestroyed||c!=null&&c.isDestroyed)return;const f=t||c;if(!f){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const m=gee({editor:f,element:u,pluginKey:e,appendTo:n,shouldShow:r,options:s});return f.registerPlugin(m),()=>{f.unregisterPlugin(e),window.requestAnimationFrame(()=>{u.parentNode&&u.parentNode.removeChild(u)})}},[t,c,n,e,r,s]),pl.createPortal(h.jsx("div",{...i,children:o}),l.current)});var IC="Switch",[JDe]=Ha(IC),[XDe,QDe]=JDe(IC),bee=x.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:i,disabled:a,value:l="on",onCheckedChange:c,form:u,...f}=e,[m,g]=x.useState(null),y=Rr(t,k=>g(k)),v=x.useRef(!1),w=m?u||!!m.closest("form"):!0,[_,S]=bl({prop:s,defaultProp:o??!1,onChange:c,caller:IC});return h.jsxs(XDe,{scope:n,checked:_,disabled:a,children:[h.jsx(Pn.button,{type:"button",role:"switch","aria-checked":_,"aria-required":i,"data-state":wee(_),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:y,onClick:Wt(e.onClick,k=>{S(R=>!R),w&&(v.current=k.isPropagationStopped(),v.current||k.stopPropagation())})}),w&&h.jsx(xee,{control:m,bubbles:!v.current,name:r,value:l,checked:_,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});bee.displayName=IC;var yee="SwitchThumb",vee=x.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=QDe(yee,n);return h.jsx(Pn.span,{"data-state":wee(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});vee.displayName=yee;var ePe="SwitchBubbleInput",xee=x.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},o)=>{const i=x.useRef(null),a=Rr(i,o),l=rC(n),c=k4(t);return x.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&g){const y=new Event("click",{bubbles:r});g.call(u,n),u.dispatchEvent(y)}},[l,n,r]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});xee.displayName=ePe;function wee(e){return e?"checked":"unchecked"}var tPe=bee,nPe=vee;function rPe({className:e,...t}){return h.jsx(tPe,{"data-slot":"switch",className:Qe("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:h.jsx(nPe,{"data-slot":"switch-thumb",className:Qe("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const Eee=x.forwardRef(({onSave:e,defaultIsNewTab:t,defaultUrl:n,defaultText:r,className:s},o)=>{const i=x.useRef(null),[a,l]=x.useState(n||""),[c,u]=x.useState(r||""),[f,m]=x.useState(t||!1),g=x.useCallback(y=>{y.preventDefault(),i.current&&(Array.from(i.current.querySelectorAll("input")).every(w=>w.checkValidity())?e(a,c,f):i.current.querySelectorAll("input").forEach(w=>{w.checkValidity()||w.reportValidity()}))},[e,a,c,f]);return x.useImperativeHandle(o,()=>i.current),h.jsx("div",{ref:i,children:h.jsxs("div",{className:Qe("space-y-4",s),children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(Hl,{children:"URL"}),h.jsx(Ed,{type:"url",required:!0,placeholder:"Enter URL",value:a,onChange:y=>l(y.target.value)})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(Hl,{children:"Display Text (optional)"}),h.jsx(Ed,{type:"text",placeholder:"Enter display text",value:c,onChange:y=>u(y.target.value)})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Hl,{children:"Open in New Tab"}),h.jsx(rPe,{checked:f,onCheckedChange:m})]}),h.jsx("div",{className:"flex justify-end space-x-2",children:h.jsx(_r,{type:"button",onClick:g,children:"Save"})})]})})});Eee.displayName="LinkEditBlock";const sPe=({url:e,onClear:t,onEdit:n})=>{const[r,s]=x.useState("Copy"),o=x.useCallback(a=>{a.preventDefault(),navigator.clipboard.writeText(e).then(()=>{s("Copied!"),setTimeout(()=>s("Copy"),1e3)}).catch(console.error)},[e]),i=x.useCallback(()=>{window.open(e,"_blank","noopener,noreferrer")},[e]);return h.jsx("div",{className:"flex h-10 overflow-hidden rounded bg-background p-2 shadow-lg",children:h.jsxs("div",{className:"inline-flex items-center gap-1",children:[h.jsx(Zp,{tooltip:"Edit link",onClick:n,className:"w-auto px-2",children:"Edit link"}),h.jsx(Bf,{orientation:"vertical"}),h.jsx(Zp,{tooltip:"Open link in a new tab",onClick:i,children:h.jsx(cDe,{className:"size-4"})}),h.jsx(Bf,{orientation:"vertical"}),h.jsx(Zp,{tooltip:"Clear link",onClick:t,children:h.jsx(vDe,{className:"size-4"})}),h.jsx(Bf,{orientation:"vertical"}),h.jsx(Zp,{tooltip:r,onClick:o,tooltipOptions:{onPointerDownOutside:a=>{a.target===a.currentTarget&&a.preventDefault()}},children:h.jsx(sDe,{className:"size-4"})})]})})},oPe=({editor:e})=>{const[t,n]=x.useState(!1),[r,s]=x.useState({href:"",target:""}),[o,i]=x.useState(""),a=x.useCallback(()=>{const{from:m,to:g}=e.state.selection,{href:y,target:v}=e.getAttributes("link"),w=e.state.doc.textBetween(m,g," ");s({href:y,target:v}),i(w)},[e]),l=x.useCallback(({editor:m,from:g,to:y})=>{if(g===y)return!1;const{href:v}=m.getAttributes("link");return!m.isActive("link")||!m.isEditable?!1:v?(a(),!0):!1},[a]),c=x.useCallback(()=>{n(!0)},[]),u=x.useCallback((m,g,y)=>{e.chain().focus().extendMarkRange("link").insertContent({type:"text",text:g||m,marks:[{type:"link",attrs:{href:m,target:y?"_blank":""}}]}).setLink({href:m,target:y?"_blank":""}).run(),n(!1),a()},[e,a]),f=x.useCallback(()=>{e.chain().focus().extendMarkRange("link").unsetLink().run(),n(!1),a()},[e,a]);return h.jsx(ZDe,{editor:e,shouldShow:l,tippyOptions:{placement:"bottom-start",onHidden:()=>n(!1)},children:t?h.jsx(Eee,{defaultUrl:r.href,defaultText:o,defaultIsNewTab:r.target==="_blank",onSave:u,className:"w-full min-w-80 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-hidden"}):h.jsx(sPe,{onClear:f,url:r.href,onEdit:c})})};var QS=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},iPe=/^\s*>\s$/,aPe=xl.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return QS("blockquote",{...Mo(this.options.HTMLAttributes,e),children:QS("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",r=[];return e.content.forEach(s=>{const a=t.renderChildren([s]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ib({find:iPe,type:this.type})]}}),lPe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,cPe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,uPe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,dPe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,fPe=W0.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return QS("strong",{...Mo(this.options.HTMLAttributes,e),children:QS("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ob({find:lPe,type:this.type}),ob({find:uPe,type:this.type})]},addPasteRules(){return[wm({find:cPe,type:this.type}),wm({find:dPe,type:this.type})]}}),hPe=/(^|[^`])`([^`]+)`(?!`)$/,pPe=/(^|[^`])`([^`]+)`(?!`)/g,mPe=W0.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Mo(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ob({find:hPe,type:this.type})]},addPasteRules(){return[wm({find:pPe,type:this.type})]}}),Ck=4,gPe=/^```([a-z]+)?[\s\n]$/,bPe=/^~~~([a-z]+)?[\s\n]$/,_ee=xl.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Ck,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Mo(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let r="";const s=((n=e.attrs)==null?void 0:n.language)||"";return e.content?r=[`\`\`\`${s}`,t.renderChildren(e.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:Ck,{state:r}=e,{selection:s}=r,{$from:o,empty:i}=s;if(o.parent.type!==this.type)return!1;const a=" ".repeat(n);return i?e.commands.insertContent(a):e.commands.command(({tr:l})=>{const{from:c,to:u}=s,g=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(y=>a+y).join(`
`);return l.replaceWith(c,u,r.schema.text(g)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:Ck,{state:r}=e,{selection:s}=r,{$from:o,empty:i}=s;return o.parent.type!==this.type?!1:i?e.commands.command(({tr:a})=>{var l;const{pos:c}=o,u=o.start(),f=o.end(),g=r.doc.textBetween(u,f,`
`,`
`).split(`
`);let y=0,v=0;const w=c-u;for(let M=0;M<g.length;M+=1){if(v+g[M].length>=w){y=M;break}v+=g[M].length+1}const S=((l=g[y].match(/^ */))==null?void 0:l[0])||"",k=Math.min(S.length,n);if(k===0)return!0;let R=u;for(let M=0;M<y;M+=1)R+=g[M].length+1;return a.delete(R,R+k),c-R<=k&&a.setSelection(qn.create(a.doc,R)),!0}):e.commands.command(({tr:a})=>{const{from:l,to:c}=s,m=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(g=>{var y;const v=((y=g.match(/^ */))==null?void 0:y[0])||"",w=Math.min(v.length,n);return g.slice(w)}).join(`
`);return a.replaceWith(l,c,r.schema.text(m)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!o||!i?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?e.commands.command(({tr:c})=>(c.setSelection(Vn.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[O6({find:gPe,type:this.type,getAttributes:e=>({language:e[1]})}),O6({find:bPe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new vs({key:new Bs("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s==null?void 0:s.mode;if(!n||!o)return!1;const{tr:i,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:o},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(qn.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),e.dispatch(i),!0}}})]}}),yPe=_ee,vPe=xl.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),xPe=xl.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Mo(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=o||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const f=l.filter(m=>a.includes(m.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),wPe=xl.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Mo(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const r=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,s="#".repeat(r);return e.content?`${s} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>O6({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),See=xl.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Mo(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!$9e(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,s=e();return IQ(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:o,tr:i,dispatch:a})=>{if(a){const{$to:l}=i.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?i.setSelection(qn.create(i.doc,l.pos+1)):l.nodeAfter.isBlock?i.setSelection(Nn.create(i.doc,l.pos)):i.setSelection(qn.create(i.doc,l.pos));else{const u=o.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,f=u==null?void 0:u.create();f&&(i.insert(c,f),i.setSelection(qn.create(i.doc,c+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[YQ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),EPe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,_Pe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,SPe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,TPe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,CPe=W0.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Mo(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ob({find:EPe,type:this.type}),ob({find:SPe,type:this.type})]},addPasteRules(){return[wm({find:_Pe,type:this.type}),wm({find:TPe,type:this.type})]}});const kPe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",APe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",B6="numeric",z6="ascii",j6="alpha",Uv="asciinumeric",xv="alphanumeric",U6="domain",Tee="emoji",NPe="scheme",IPe="slashscheme",kk="whitespace";function RPe(e,t){return e in t||(t[e]=[]),t[e]}function Jp(e,t,n){t[B6]&&(t[Uv]=!0,t[xv]=!0),t[z6]&&(t[Uv]=!0,t[j6]=!0),t[Uv]&&(t[xv]=!0),t[j6]&&(t[xv]=!0),t[xv]&&(t[U6]=!0),t[Tee]&&(t[U6]=!0);for(const r in t){const s=RPe(r,n);s.indexOf(e)<0&&s.push(e)}}function MPe(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function hl(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}hl.groups={};hl.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const s=t.jr[r][0],o=t.jr[r][1];if(o&&s.test(e))return o}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let s=0;s<e.length;s++)this.tt(e[s],t,n,r)},tr(e,t,n,r){r=r||hl.groups;let s;return t&&t.j?s=t:(s=new hl(t),n&&r&&Jp(t,n,r)),this.jr.push([e,s]),s},ts(e,t,n,r){let s=this;const o=e.length;if(!o)return s;for(let i=0;i<o-1;i++)s=s.tt(e[i]);return s.tt(e[o-1],t,n,r)},tt(e,t,n,r){r=r||hl.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const o=t;let i,a=s.go(e);if(a?(i=new hl,Object.assign(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new hl,o){if(r)if(i.t&&typeof i.t=="string"){const l=Object.assign(MPe(i.t,r),n);Jp(o,l,r)}else n&&Jp(o,n,r);i.t=o}return s.j[e]=i,i}};const Er=(e,t,n,r,s)=>e.ta(t,n,r,s),Vo=(e,t,n,r,s)=>e.tr(t,n,r,s),nz=(e,t,n,r,s)=>e.ts(t,n,r,s),At=(e,t,n,r,s)=>e.tt(t,n,r,s),xf="WORD",H6="UWORD",Cee="ASCIINUMERICAL",kee="ALPHANUMERICAL",jx="LOCALHOST",V6="TLD",q6="UTLD",D_="SCHEME",a1="SLASH_SCHEME",N7="NUM",G6="WS",I7="NL",Hv="OPENBRACE",Vv="CLOSEBRACE",eT="OPENBRACKET",tT="CLOSEBRACKET",nT="OPENPAREN",rT="CLOSEPAREN",sT="OPENANGLEBRACKET",oT="CLOSEANGLEBRACKET",iT="FULLWIDTHLEFTPAREN",aT="FULLWIDTHRIGHTPAREN",lT="LEFTCORNERBRACKET",cT="RIGHTCORNERBRACKET",uT="LEFTWHITECORNERBRACKET",dT="RIGHTWHITECORNERBRACKET",fT="FULLWIDTHLESSTHAN",hT="FULLWIDTHGREATERTHAN",pT="AMPERSAND",mT="APOSTROPHE",gT="ASTERISK",s0="AT",bT="BACKSLASH",yT="BACKTICK",vT="CARET",a0="COLON",R7="COMMA",xT="DOLLAR",rd="DOT",wT="EQUALS",M7="EXCLAMATION",vc="HYPHEN",qv="PERCENT",ET="PIPE",_T="PLUS",ST="POUND",Gv="QUERY",O7="QUOTE",Aee="FULLWIDTHMIDDLEDOT",D7="SEMI",sd="SLASH",Wv="TILDE",TT="UNDERSCORE",Nee="EMOJI",CT="SYM";var Iee=Object.freeze({__proto__:null,ALPHANUMERICAL:kee,AMPERSAND:pT,APOSTROPHE:mT,ASCIINUMERICAL:Cee,ASTERISK:gT,AT:s0,BACKSLASH:bT,BACKTICK:yT,CARET:vT,CLOSEANGLEBRACKET:oT,CLOSEBRACE:Vv,CLOSEBRACKET:tT,CLOSEPAREN:rT,COLON:a0,COMMA:R7,DOLLAR:xT,DOT:rd,EMOJI:Nee,EQUALS:wT,EXCLAMATION:M7,FULLWIDTHGREATERTHAN:hT,FULLWIDTHLEFTPAREN:iT,FULLWIDTHLESSTHAN:fT,FULLWIDTHMIDDLEDOT:Aee,FULLWIDTHRIGHTPAREN:aT,HYPHEN:vc,LEFTCORNERBRACKET:lT,LEFTWHITECORNERBRACKET:uT,LOCALHOST:jx,NL:I7,NUM:N7,OPENANGLEBRACKET:sT,OPENBRACE:Hv,OPENBRACKET:eT,OPENPAREN:nT,PERCENT:qv,PIPE:ET,PLUS:_T,POUND:ST,QUERY:Gv,QUOTE:O7,RIGHTCORNERBRACKET:cT,RIGHTWHITECORNERBRACKET:dT,SCHEME:D_,SEMI:D7,SLASH:sd,SLASH_SCHEME:a1,SYM:CT,TILDE:Wv,TLD:V6,UNDERSCORE:TT,UTLD:q6,UWORD:H6,WORD:xf,WS:G6});const gf=/[a-z]/,Yy=new RegExp("\\p{L}","u"),Ak=new RegExp("\\p{Emoji}","u"),bf=/\d/,Nk=/\s/,rz="\r",Ik=`
`,OPe="",DPe="",Rk="";let L2=null,$2=null;function PPe(e=[]){const t={};hl.groups=t;const n=new hl;L2==null&&(L2=sz(kPe)),$2==null&&($2=sz(APe)),At(n,"'",mT),At(n,"{",Hv),At(n,"}",Vv),At(n,"[",eT),At(n,"]",tT),At(n,"(",nT),At(n,")",rT),At(n,"<",sT),At(n,">",oT),At(n,"",iT),At(n,"",aT),At(n,"",lT),At(n,"",cT),At(n,"",uT),At(n,"",dT),At(n,"",fT),At(n,"",hT),At(n,"&",pT),At(n,"*",gT),At(n,"@",s0),At(n,"`",yT),At(n,"^",vT),At(n,":",a0),At(n,",",R7),At(n,"$",xT),At(n,".",rd),At(n,"=",wT),At(n,"!",M7),At(n,"-",vc),At(n,"%",qv),At(n,"|",ET),At(n,"+",_T),At(n,"#",ST),At(n,"?",Gv),At(n,'"',O7),At(n,"/",sd),At(n,";",D7),At(n,"~",Wv),At(n,"_",TT),At(n,"\\",bT),At(n,"",Aee);const r=Vo(n,bf,N7,{[B6]:!0});Vo(r,bf,r);const s=Vo(r,gf,Cee,{[Uv]:!0}),o=Vo(r,Yy,kee,{[xv]:!0}),i=Vo(n,gf,xf,{[z6]:!0});Vo(i,bf,s),Vo(i,gf,i),Vo(s,bf,s),Vo(s,gf,s);const a=Vo(n,Yy,H6,{[j6]:!0});Vo(a,gf),Vo(a,bf,o),Vo(a,Yy,a),Vo(o,bf,o),Vo(o,gf),Vo(o,Yy,o);const l=At(n,Ik,I7,{[kk]:!0}),c=At(n,rz,G6,{[kk]:!0}),u=Vo(n,Nk,G6,{[kk]:!0});At(n,Rk,u),At(c,Ik,l),At(c,Rk,u),Vo(c,Nk,u),At(u,rz),At(u,Ik),Vo(u,Nk,u),At(u,Rk,u);const f=Vo(n,Ak,Nee,{[Tee]:!0});At(f,"#"),Vo(f,Ak,f),At(f,OPe,f);const m=At(f,DPe);At(m,"#"),Vo(m,Ak,f);const g=[[gf,i],[bf,s]],y=[[gf,null],[Yy,a],[bf,o]];for(let v=0;v<L2.length;v++)Wh(n,L2[v],V6,xf,g);for(let v=0;v<$2.length;v++)Wh(n,$2[v],q6,H6,y);Jp(V6,{tld:!0,ascii:!0},t),Jp(q6,{utld:!0,alpha:!0},t),Wh(n,"file",D_,xf,g),Wh(n,"mailto",D_,xf,g),Wh(n,"http",a1,xf,g),Wh(n,"https",a1,xf,g),Wh(n,"ftp",a1,xf,g),Wh(n,"ftps",a1,xf,g),Jp(D_,{scheme:!0,ascii:!0},t),Jp(a1,{slashscheme:!0,ascii:!0},t),e=e.sort((v,w)=>v[0]>w[0]?1:-1);for(let v=0;v<e.length;v++){const w=e[v][0],S=e[v][1]?{[NPe]:!0}:{[IPe]:!0};w.indexOf("-")>=0?S[U6]=!0:gf.test(w)?bf.test(w)?S[Uv]=!0:S[z6]=!0:S[B6]=!0,nz(n,w,w,S)}return nz(n,"localhost",jx,{ascii:!0}),n.jd=new hl(CT),{start:n,tokens:Object.assign({groups:t},Iee)}}function Ree(e,t){const n=LPe(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let o=0,i=0;for(;i<r;){let a=e,l=null,c=0,u=null,f=-1,m=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(f=0,m=0,u=a):f>=0&&(f+=n[i].length,m++),c+=n[i].length,o+=n[i].length,i++;o-=f,i-=m,c-=f,s.push({t:u.t,v:t.slice(o-c,o),s:o-c,e:o})}return s}function LPe(e){const t=[],n=e.length;let r=0;for(;r<n;){let s=e.charCodeAt(r),o,i=s<55296||s>56319||r+1===n||(o=e.charCodeAt(r+1))<56320||o>57343?e[r]:e.slice(r,r+2);t.push(i),r+=i.length}return t}function Wh(e,t,n,r,s){let o;const i=t.length;for(let a=0;a<i-1;a++){const l=t[a];e.j[l]?o=e.j[l]:(o=new hl(r),o.jr=s.slice(),e.j[l]=o),e=o}return o=new hl(n),o.jr=s.slice(),e.j[t[i-1]]=o,o}function sz(e){const t=[],n=[];let r=0,s="0123456789";for(;r<e.length;){let o=0;for(;s.indexOf(e[r+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let i=parseInt(e.substring(r,r+o),10);i>0;i--)n.pop();r+=o}else n.push(e[r]),r++}return t}const Ux={defaultProtocol:"http",events:null,format:oz,formatHref:oz,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function P7(e,t=null){let n=Object.assign({},Ux);e&&(n=Object.assign(n,e instanceof P7?e.o:e));const r=n.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=s}P7.prototype={o:Ux,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Ux[e],typeof s=="function"&&r&&(s=s(t,n))):typeof s=="function"&&r&&(s=s(t,n.t,n)),s)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function oz(e){return e}function Mee(e,t){this.t="token",this.v=e,this.tk=t}Mee.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Ux.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),s=e.get("tagName",n,t),o=this.toFormattedString(e),i={},a=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),f=e.getObj("events",n,t);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),u&&Object.assign(i,u),{tagName:s,attributes:i,content:o,eventListeners:f}}};function RC(e,t){class n extends Mee{constructor(s,o){super(s,o),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const iz=RC("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),az=RC("text"),$Pe=RC("nl"),F2=RC("url",{isLink:!0,toHref(e=Ux.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==jx&&e[1].t===a0}}),gc=e=>new hl(e);function FPe({groups:e}){const t=e.domain.concat([pT,gT,s0,bT,yT,vT,xT,wT,vc,N7,qv,ET,_T,ST,sd,CT,Wv,TT]),n=[mT,a0,R7,rd,M7,qv,Gv,O7,D7,sT,oT,Hv,Vv,tT,eT,nT,rT,iT,aT,lT,cT,uT,dT,fT,hT],r=[pT,mT,gT,bT,yT,vT,xT,wT,vc,Hv,Vv,qv,ET,_T,ST,Gv,sd,CT,Wv,TT],s=gc(),o=At(s,Wv);Er(o,r,o),Er(o,e.domain,o);const i=gc(),a=gc(),l=gc();Er(s,e.domain,i),Er(s,e.scheme,a),Er(s,e.slashscheme,l),Er(i,r,o),Er(i,e.domain,i);const c=At(i,s0);At(o,s0,c),At(a,s0,c),At(l,s0,c);const u=At(o,rd);Er(u,r,o),Er(u,e.domain,o);const f=gc();Er(c,e.domain,f),Er(f,e.domain,f);const m=At(f,rd);Er(m,e.domain,f);const g=gc(iz);Er(m,e.tld,g),Er(m,e.utld,g),At(c,jx,g);const y=At(f,vc);At(y,vc,y),Er(y,e.domain,f),Er(g,e.domain,f),At(g,rd,m),At(g,vc,y);const v=At(g,a0);Er(v,e.numeric,iz);const w=At(i,vc),_=At(i,rd);At(w,vc,w),Er(w,e.domain,i),Er(_,r,o),Er(_,e.domain,i);const S=gc(F2);Er(_,e.tld,S),Er(_,e.utld,S),Er(S,e.domain,i),Er(S,r,o),At(S,rd,_),At(S,vc,w),At(S,s0,c);const k=At(S,a0),R=gc(F2);Er(k,e.numeric,R);const O=gc(F2),M=gc();Er(O,t,O),Er(O,n,M),Er(M,t,O),Er(M,n,M),At(S,sd,O),At(R,sd,O);const P=At(a,a0),j=At(l,a0),q=At(j,sd),U=At(q,sd);Er(a,e.domain,i),At(a,rd,_),At(a,vc,w),Er(l,e.domain,i),At(l,rd,_),At(l,vc,w),Er(P,e.domain,O),At(P,sd,O),At(P,Gv,O),Er(U,e.domain,O),Er(U,t,O),At(U,sd,O);const z=[[Hv,Vv],[eT,tT],[nT,rT],[sT,oT],[iT,aT],[lT,cT],[uT,dT],[fT,hT]];for(let H=0;H<z.length;H++){const[F,W]=z[H],X=At(O,F);At(M,F,X),At(X,W,O);const J=gc(F2);Er(X,t,J);const ee=gc();Er(X,n),Er(J,t,J),Er(J,n,ee),Er(ee,t,J),Er(ee,n,ee),At(J,W,O),At(ee,W,O)}return At(s,jx,S),At(s,I7,$Pe),{start:s,tokens:Iee}}function BPe(e,t,n){let r=n.length,s=0,o=[],i=[];for(;s<r;){let a=e,l=null,c=null,u=0,f=null,m=-1;for(;s<r&&!(l=a.go(n[s].t));)i.push(n[s++]);for(;s<r&&(c=l||a.go(n[s].t));)l=null,a=c,a.accepts()?(m=0,f=a):m>=0&&m++,s++,u++;if(m<0)s-=u,s<r&&(i.push(n[s]),s++);else{i.length>0&&(o.push(Mk(az,t,i)),i=[]),s-=m,u-=m;const g=f.t,y=n.slice(s-u,s);o.push(Mk(g,t,y))}}return i.length>0&&o.push(Mk(az,t,i)),o}function Mk(e,t,n){const r=n[0].s,s=n[n.length-1].e,o=t.slice(r,s);return new e(o,n)}const zPe=typeof console<"u"&&console&&console.warn||(()=>{}),jPe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",lo={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function UPe(){return hl.groups={},lo.scanner=null,lo.parser=null,lo.tokenQueue=[],lo.pluginQueue=[],lo.customSchemes=[],lo.initialized=!1,lo}function lz(e,t=!1){if(lo.initialized&&zPe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${jPe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);lo.customSchemes.push([e,t])}function HPe(){lo.scanner=PPe(lo.customSchemes);for(let e=0;e<lo.tokenQueue.length;e++)lo.tokenQueue[e][1]({scanner:lo.scanner});lo.parser=FPe(lo.scanner.tokens);for(let e=0;e<lo.pluginQueue.length;e++)lo.pluginQueue[e][1]({scanner:lo.scanner,parser:lo.parser});return lo.initialized=!0,lo}function L7(e){return lo.initialized||HPe(),BPe(lo.parser.start,e,Ree(lo.scanner.start,e))}L7.scan=Ree;function Oee(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new P7(n),s=L7(e),o=[];for(let i=0;i<s.length;i++){const a=s[i];a.isLink&&(!t||a.t===t)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}var $7="[\0- -\u2029]",VPe=new RegExp($7),qPe=new RegExp(`${$7}$`),GPe=new RegExp($7,"g");function WPe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function YPe(e){return new vs({key:new Bs("autolink"),appendTransaction:(t,n,r)=>{const s=t.some(c=>c.docChanged)&&!n.doc.eq(r.doc),o=t.some(c=>c.getMeta("preventAutolink"));if(!s||o)return;const{tr:i}=r,a=EQ(n.doc,[...t]);if(NQ(a).forEach(({newRange:c})=>{const u=$Me(r.doc,c,g=>g.isTextblock);let f,m;if(u.length>1)f=u[0],m=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(u.length){const g=r.doc.textBetween(c.from,c.to," "," ");if(!qPe.test(g))return;f=u[0],m=r.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&m){const g=m.split(VPe).filter(Boolean);if(g.length<=0)return!1;const y=g[g.length-1],v=f.pos+m.lastIndexOf(y);if(!y)return!1;const w=L7(y).map(_=>_.toObject(e.defaultProtocol));if(!WPe(w))return!1;w.filter(_=>_.isLink).map(_=>({..._,from:v+_.start+1,to:v+_.end+1})).filter(_=>r.schema.marks.code?!r.doc.rangeHasMark(_.from,_.to,r.schema.marks.code):!0).filter(_=>e.validate(_.value)).filter(_=>e.shouldAutoLink(_.value)).forEach(_=>{E7(_.from,_.to,r.doc).some(S=>S.mark.type===e.type)||i.addMark(_.from,_.to,e.type.create({href:_.href}))})}}),!!i.steps.length)return i}})}function KPe(e){return new vs({key:new Bs("handleClickLink"),props:{handleClick:(t,n,r)=>{var s,o;if(r.button!==0||!t.editable)return!1;let i=!1;if(e.enableClickSelection&&(i=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let f=r.target;const m=[];for(;f.nodeName!=="DIV";)m.push(f),f=f.parentNode;a=m.find(g=>g.nodeName==="A")}if(!a)return i;const l=AQ(t.state,e.type.name),c=(s=a==null?void 0:a.href)!=null?s:l.href,u=(o=a==null?void 0:a.target)!=null?o:l.target;a&&c&&(window.open(c,u),i=!0)}return i}}})}function ZPe(e){return new vs({key:new Bs("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:s}=e,{state:o}=t,{selection:i}=o,{empty:a}=i;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=Oee(l,{defaultProtocol:e.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||s!==void 0&&!s(c.href)?!1:e.editor.commands.setMark(e.type,{href:c.href})}}})}function Fp(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!e||e.replace(GPe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Dee=W0.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){lz(e);return}lz(e.scheme,e.optionalSlashes)})},onDestroy(){UPe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Fp(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!Fp(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!Fp(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Mo(this.options.HTMLAttributes,e),0]:["a",Mo(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n;const r=((n=e.attrs)==null?void 0:n.href)||"";return`[${t.renderChildren(e)}](${r})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Fp(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Fp(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[wm({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,s=Oee(e).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:i=>!!Fp(i,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(o=>{this.options.shouldAutoLink(o.value)&&t.push({text:o.value,data:{href:o.href},index:o.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(YPe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Fp(s,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(KPe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(ZPe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),JPe=Dee,XPe=Object.defineProperty,QPe=(e,t)=>{for(var n in t)XPe(e,n,{get:t[n],enumerable:!0})},eLe="listItem",cz="textStyle",uz=/^\s*([-+*])\s$/,Pee=xl.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Mo(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(eLe,this.editor.getAttributes(cz)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=ib({find:uz,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ib({find:uz,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(cz),editor:this.editor})),[e]}}),Lee=xl.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Mo(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(s=>s.type==="paragraph"))n=t.parseChildren(e.tokens);else{const s=e.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(s.tokens)}],e.tokens.length>1){const i=e.tokens.slice(1),a=t.parseChildren(i);n.push(...a)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>C7(e,t,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),tLe={};QPe(tLe,{findListItemPos:()=>Pw,getNextListDepth:()=>F7,handleBackspace:()=>W6,handleDelete:()=>Y6,hasListBefore:()=>$ee,hasListItemAfter:()=>nLe,hasListItemBefore:()=>Fee,listItemHasSubList:()=>Bee,nextListIsDeeper:()=>zee,nextListIsHigher:()=>jee});var Pw=(e,t)=>{const{$from:n}=t.selection,r=gi(e,t.schema);let s=null,o=n.depth,i=n.pos,a=null;for(;o>0&&a===null;)s=n.node(o),s.type===r?a=o:(o-=1,i-=1);return a===null?null:{$pos:t.doc.resolve(i),depth:a}},F7=(e,t)=>{const n=Pw(e,t);if(!n)return!1;const[,r]=GMe(t,e,n.$pos.pos+4);return r},$ee=(e,t,n)=>{const{$anchor:r}=e.selection,s=Math.max(0,r.pos-2),o=e.doc.resolve(s).node();return!(!o||!n.includes(o.type.name))},Fee=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==e)},Bee=(e,t,n)=>{if(!n)return!1;const r=gi(e,t.schema);let s=!1;return n.descendants(o=>{o.type===r&&(s=!0)}),s},W6=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!I0(e.state,t)&&$ee(e.state,t,n)){const{$anchor:a}=e.state.selection,l=e.state.doc.resolve(a.before()-1),c=[];l.node().descendants((m,g)=>{m.type.name===t&&c.push({node:m,pos:g})});const u=c.at(-1);if(!u)return!1;const f=e.state.doc.resolve(l.start()+u.pos+1);return e.chain().cut({from:a.start()-1,to:a.end()+1},f.end()).joinForward().run()}if(!I0(e.state,t)||!ZMe(e.state))return!1;const r=Pw(t,e.state);if(!r)return!1;const o=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),i=Bee(t,e.state,o);return Fee(t,e.state)&&!i?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},zee=(e,t)=>{const n=F7(e,t),r=Pw(e,t);return!r||!n?!1:n>r.depth},jee=(e,t)=>{const n=F7(e,t),r=Pw(e,t);return!r||!n?!1:n<r.depth},Y6=(e,t)=>{if(!I0(e.state,t)||!KMe(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:zee(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():jee(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},nLe=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==e)},Uee=Gr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&Y6(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&Y6(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&W6(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&W6(e,n,r)&&(t=!0)}),t}}}}),dz=/^(\s*)(\d+)\.\s+(.*)$/,rLe=/^\s/;function sLe(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n],o=s.match(dz);if(!o)break;const[,i,a,l]=o,c=i.length;let u=l,f=n+1;const m=[s];for(;f<e.length;){const g=e[f];if(g.match(dz))break;if(g.trim()==="")m.push(g),u+=`
`,f+=1;else if(g.match(rLe))m.push(g),u+=`
${g.slice(c+2)}`,f+=1;else break}t.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:m.join(`
`)}),r=f,n=f}return[t,r]}function Hee(e,t,n){var r;const s=[];let o=0;for(;o<e.length;){const i=e[o];if(i.indent===t){const a=i.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const g=n.blockTokens(u);c.push(...g)}let f=o+1;const m=[];for(;f<e.length&&e[f].indent>t;)m.push(e[f]),f+=1;if(m.length>0){const g=Math.min(...m.map(v=>v.indent)),y=Hee(m,g,n);c.push({type:"list",ordered:!0,start:m[0].number,items:y,raw:m.map(v=>v.raw).join(`
`)})}s.push({type:"list_item",raw:i.raw,tokens:c}),o=f}else o+=1}return s}function oLe(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...t.parseChildren([s]));else if(s.type==="text"&&s.tokens){const o=t.parseChildren([s]);r.push({type:"paragraph",content:o})}else{const o=t.parseChildren([s]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var iLe="listItem",fz="textStyle",hz=/^(\d+)\.\s$/,Vee=xl.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Mo(this.options.HTMLAttributes,n),0]:["ol",Mo(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,r=e.items?oLe(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t==null?void 0:t.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var r;const s=e.split(`
`),[o,i]=sLe(s);if(o.length===0)return;const a=Hee(o,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:a,raw:s.slice(0,i).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(iLe,this.editor.getAttributes(fz)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=ib({find:hz,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ib({find:hz,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(fz)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),aLe=/^\s*(\[([( |x])?\])\s$/,lLe=xl.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Mo(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const r=t.parseChildren(e.nestedTokens);n.push(...r)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const s=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return C7(e,t,s)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const s=document.createElement("li"),o=document.createElement("label"),i=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=u=>{var f,m;a.ariaLabel=((m=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:m.call(f,u,a.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return c(e),o.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:m})=>{const g=n();if(typeof g!="number")return!1;const y=m.doc.nodeAt(g);return m.setNodeMarkup(g,void 0,{...y==null?void 0:y.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,f])=>{s.setAttribute(u,f)}),s.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,o.append(a,i),s.append(o,l),Object.entries(t).forEach(([u,f])=>{s.setAttribute(u,f)}),{dom:s,contentDOM:l,update:u=>u.type!==this.type?!1:(s.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,c(u),!0)}}},addInputRules(){return[ib({find:aLe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),cLe=xl.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Mo(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const r=o=>{const i=D6(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return i?[{type:"taskList",raw:i.raw,items:i.items}]:n.blockTokens(o)},s=D6(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,i)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:i}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Gr.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(Pee.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(Lee.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(Uee.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(Vee.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(lLe.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(cLe.configure(this.options.taskList)),e}});var uLe=xl.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Mo(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];return n.length===1&&n[0].type==="image"?t.parseChildren([n[0]]):t.createNode("paragraph",void 0,t.parseInline(n))},renderMarkdown:(e,t)=>!e||!Array.isArray(e.content)?"":t.renderChildren(e.content),addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),dLe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,fLe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,hLe=W0.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Mo(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ob({find:dLe,type:this.type})]},addPasteRules(){return[wm({find:fLe,type:this.type})]}}),pLe=xl.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),qee=W0.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Mo(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!s)return;const o=s[2].trim();return{type:"underline",raw:s[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function mLe(e={}){return new vs({view(t){return new gLe(t,e)}})}class gLe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=i=>{this[s](i)};return t.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),i=o.width/s.offsetWidth,a=o.height/s.offsetHeight;if(n){let f=t.nodeBefore,m=t.nodeAfter;if(f||m){let g=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(g){let y=g.getBoundingClientRect(),v=f?y.bottom:y.top;f&&m&&(v=(v+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*a;r={left:y.left,right:y.right,top:v-w,bottom:v+w}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*i;r={left:f.left-m,right:f.left+m,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let f=l.getBoundingClientRect(),m=f.width/l.offsetWidth,g=f.height/l.offsetHeight;c=f.left-l.scrollLeft*m,u=f.top-l.scrollTop*g}this.element.style.left=(r.left-c)/i+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,n,t):s;if(n&&!o){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=hX(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Wo extends Vn{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Wo.valid(r)?new Wo(r):Vn.near(r)}content(){return Zt.empty}eq(t){return t instanceof Wo&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Wo(t.resolve(n.pos))}getBookmark(){return new B7(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!bLe(t)||!yLe(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Wo.valid(t))return t;let s=t.pos,o=null;for(let i=t.depth;;i--){let a=t.node(i);if(n>0?t.indexAfter(i)<a.childCount:t.index(i)>0){o=a.child(n>0?t.indexAfter(i):t.index(i)-1);break}else if(i==0)return null;s+=n;let l=t.doc.resolve(s);if(Wo.valid(l))return l}for(;;){let i=n>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!Nn.isSelectable(o)){t=t.doc.resolve(s+o.nodeSize*n),r=!1;continue e}break}o=i,s+=n;let a=t.doc.resolve(s);if(Wo.valid(a))return a}return null}}}Wo.prototype.visible=!1;Wo.findFrom=Wo.findGapCursorFrom;Vn.jsonID("gapcursor",Wo);class B7{constructor(t){this.pos=t}map(t){return new B7(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Wo.valid(n)?new Wo(n):Vn.near(n)}}function Gee(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function bLe(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||Gee(s.type))return!0;if(s.inlineContent)return!1}}return!0}function yLe(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||Gee(s.type))return!0;if(s.inlineContent)return!1}}return!0}function vLe(){return new vs({props:{decorations:_Le,createSelectionBetween(e,t,n){return t.pos==n.pos&&Wo.valid(n)?new Wo(n):null},handleClick:wLe,handleKeyDown:xLe,handleDOMEvents:{beforeinput:ELe}}})}const xLe=p7({ArrowLeft:B2("horiz",-1),ArrowRight:B2("horiz",1),ArrowUp:B2("vert",-1),ArrowDown:B2("vert",1)});function B2(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,s,o){let i=r.selection,a=t>0?i.$to:i.$from,l=i.empty;if(i instanceof qn){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let c=Wo.findGapCursorFrom(a,t,l);return c?(s&&s(r.tr.setSelection(new Wo(c))),!0):!1}}function wLe(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Wo.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Nn.isSelectable(e.state.doc.nodeAt(s.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Wo(r))),!0)}function ELe(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Wo))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=bt.empty;for(let i=r.length-1;i>=0;i--)s=bt.from(r[i].createAndFill(null,s));let o=e.state.tr.replace(n.pos,n.pos,new Zt(s,0,0));return o.setSelection(qn.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function _Le(e){if(!(e.selection instanceof Wo))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",co.create(e.doc,[la.widget(e.selection.head,t,{key:"gapcursor"})])}var kT=200,Gi=function(){};Gi.prototype.append=function(t){return t.length?(t=Gi.from(t),!this.length&&t||t.length<kT&&this.leafAppend(t)||this.length<kT&&t.leafPrepend(this)||this.appendInner(t)):this};Gi.prototype.prepend=function(t){return t.length?Gi.from(t).append(this):this};Gi.prototype.appendInner=function(t){return new SLe(this,t)};Gi.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Gi.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Gi.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Gi.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Gi.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,i){return s.push(t(o,i))},n,r),s};Gi.from=function(t){return t instanceof Gi?t:t&&t.length?new Wee(t):Gi.empty};var Wee=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new t(this.values.slice(s,o))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,o,i,a){for(var l=o;l<i;l++)if(s(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(s,o,i,a){for(var l=o-1;l>=i;l--)if(s(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=kT)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=kT)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(Gi);Gi.empty=new Wee([]);var SLe=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,o,i){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(o,a),i)===!1||o>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,o)-a,i+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,o,i){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(o,a)-a,i+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(s,a),o,i)===!1)return!1},t.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(Gi);const TLe=500;class pu{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;n&&(s=this.remapping(r,this.items.length),o=s.maps.length);let i=t.tr,a,l,c=[],u=[];return this.items.forEach((f,m)=>{if(!f.step){s||(s=this.remapping(r,m+1),o=s.maps.length),o--,u.push(f);return}if(s){u.push(new od(f.map));let g=f.step.map(s.slice(o)),y;g&&i.maybeStep(g).doc&&(y=i.mapping.maps[i.mapping.maps.length-1],c.push(new od(y,void 0,void 0,c.length+u.length))),o--,y&&s.appendMap(y,o)}else i.maybeStep(f.step);if(f.selection)return a=s?f.selection.map(s.slice(o)):f.selection,l=new pu(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(t,n,r,s){let o=[],i=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let f=t.steps[u].invert(t.docs[u]),m=new od(t.mapping.maps[u],f,n),g;(g=l&&l.merge(m))&&(m=g,u?o.pop():a=a.slice(0,a.length-1)),o.push(m),n&&(i++,n=void 0),s||(l=m)}let c=i-r.depth;return c>kLe&&(a=CLe(a,c),i-=c),new pu(a.append(o),i)}remapping(t,n){let r=new Ox;return this.items.forEach((s,o)=>{let i=s.mirrorOffset!=null&&o-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,i)},t,n),r}addMaps(t){return this.eventCount==0?this:new pu(this.items.append(t.map(n=>new od(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),o=t.mapping,i=t.steps.length,a=this.eventCount;this.items.forEach(m=>{m.selection&&a--},s);let l=n;this.items.forEach(m=>{let g=o.getMirror(--l);if(g==null)return;i=Math.min(i,g);let y=o.maps[g];if(m.step){let v=t.steps[g].invert(t.docs[g]),w=m.selection&&m.selection.map(o.slice(l+1,g));w&&a++,r.push(new od(y,v,w))}else r.push(new od(y))},s);let c=[];for(let m=n;m<i;m++)c.push(new od(o.maps[m]));let u=this.items.slice(0,s).append(c).append(r),f=new pu(u,a);return f.emptyItemCount()>TLe&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,s=[],o=0;return this.items.forEach((i,a)=>{if(a>=t)s.push(i),i.selection&&o++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=i.selection&&i.selection.map(n.slice(r));u&&o++;let f=new od(c.invert(),l,u),m,g=s.length-1;(m=s.length&&s[g].merge(f))?s[g]=m:s.push(f)}}else i.map&&r--},this.items.length,0),new pu(Gi.from(s.reverse()),o)}}pu.empty=new pu(Gi.empty,0);function CLe(e,t){let n;return e.forEach((r,s)=>{if(r.selection&&t--==0)return n=s,!1}),e.slice(n)}class od{constructor(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new od(n.getMap().invert(),n,this.selection)}}}class o0{constructor(t,n,r,s,o){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const kLe=20;function ALe(e,t,n,r){let s=n.getMeta(om),o;if(s)return s.historyState;n.getMeta(RLe)&&(e=new o0(e.done,e.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(i&&i.getMeta(om))return i.getMeta(om).redo?new o0(e.done.addTransform(n,void 0,r,P_(t)),e.undone,pz(n.mapping.maps),e.prevTime,e.prevComposition):new o0(e.done,e.undone.addTransform(n,void 0,r,P_(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!i&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!NLe(n,e.prevRanges)),c=i?Ok(e.prevRanges,n.mapping):pz(n.mapping.maps);return new o0(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,P_(t)),pu.empty,c,n.time,a??e.prevComposition)}else return(o=n.getMeta("rebased"))?new o0(e.done.rebased(n,o),e.undone.rebased(n,o),Ok(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new o0(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Ok(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function NLe(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<t.length;o+=2)r<=t[o+1]&&s>=t[o]&&(n=!0)}),n}function pz(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,s,o,i)=>t.push(o,i));return t}function Ok(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),o=t.map(e[r+1],-1);s<=o&&n.push(s,o)}return n}function ILe(e,t,n){let r=P_(t),s=om.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(!o)return null;let i=o.selection.resolve(o.transform.doc),a=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),s,r),l=new o0(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(i).setMeta(om,{redo:n,historyState:l})}let Dk=!1,mz=null;function P_(e){let t=e.plugins;if(mz!=t){Dk=!1,mz=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Dk=!0;break}}return Dk}const om=new Bs("history"),RLe=new Bs("closeHistory");function MLe(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new vs({key:om,state:{init(){return new o0(pu.empty,pu.empty,null,0,-1)},apply(t,n,r){return ALe(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,s=r=="historyUndo"?Kee:r=="historyRedo"?Zee:null;return!s||!t.editable?!1:(n.preventDefault(),s(t.state,t.dispatch))}}}})}function Yee(e,t){return(n,r)=>{let s=om.getState(n);if(!s||(e?s.undone:s.done).eventCount==0)return!1;if(r){let o=ILe(s,n,e);o&&r(t?o.scrollIntoView():o)}return!0}}const Kee=Yee(!1,!0),Zee=Yee(!0,!0);Gr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new vs({key:new Bs("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const s=this.options.limit;if(s==null||s===0){e=!0;return}const o=this.storage.characters({node:r.doc});if(o>s){const i=o-s,a=0,l=i;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return e=!0,c}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),o=this.storage.characters({node:t.doc});if(o<=r||s>r&&o>r&&o<=s)return!0;if(s>r&&o>r&&o>s||!t.getMeta("paste"))return!1;const a=t.selection.$head.pos,l=o-r,c=a-l,u=a;return t.deleteRange(c,u),!(this.storage.characters({node:t.doc})>r)}})]}});var OLe=Gr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[mLe(this.options)]}});Gr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new vs({key:new Bs("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=t,o=[];if(!n||!r)return co.create(e,[]);let i=0;this.options.mode==="deepest"&&e.descendants((l,c)=>{if(l.isText)return;if(!(s>=c&&s<=c+l.nodeSize-1))return!1;i+=1});let a=0;return e.descendants((l,c)=>{if(l.isText||!(s>=c&&s<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&i-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";o.push(la.node(c,c+l.nodeSize,{class:this.options.className}))}),co.create(e,o)}}})]}});var DLe=Gr.create({name:"gapCursor",addProseMirrorPlugins(){return[vLe()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Ss(On(e,"allowGapCursor",n)))!=null?t:null}}}),PLe=Gr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new vs({key:new Bs("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,s=[];if(!n)return null;const o=this.editor.isEmpty;return e.descendants((i,a)=>{const l=r>=a&&r<=a+i.nodeSize,c=!i.isLeaf&&AC(i);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];o&&u.push(this.options.emptyEditorClass);const f=la.node(a,a+i.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:i,pos:a,hasAnchor:l}):this.options.placeholder});s.push(f)}return this.options.includeChildren}),co.create(e,s)}}})]}});Gr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new vs({key:new Bs("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||IQ(n.selection)||e.view.dragging?null:co.create(n.doc,[la.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function gz({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var LLe=Gr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new Bs(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new vs({key:t,appendTransaction:(s,o,i)=>{const{doc:a,tr:l,schema:c}=i,u=t.getState(i),f=a.content.size,m=c.nodes[n];if(u)return l.insert(f,m.create())},state:{init:(s,o)=>{const i=o.tr.doc.lastChild;return!gz({node:i,types:r})},apply:(s,o)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return o;const i=s.doc.lastChild;return!gz({node:i,types:r})}}})]}}),$Le=Gr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Kee(e,t),redo:()=>({state:e,dispatch:t})=>Zee(e,t)}},addProseMirrorPlugins(){return[MLe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),FLe=Gr.create({name:"starterKit",addExtensions(){var e,t,n,r;const s=[];return this.options.bold!==!1&&s.push(fPe.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(aPe.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(Pee.configure(this.options.bulletList)),this.options.code!==!1&&s.push(mPe.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(_ee.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(vPe.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(OLe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(DLe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(xPe.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(wPe.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push($Le.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(See.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(CPe.configure(this.options.italic)),this.options.listItem!==!1&&s.push(Lee.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(Uee.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&s.push(Dee.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&s.push(Vee.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(uLe.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(hLe.configure(this.options.strike)),this.options.text!==!1&&s.push(pLe.configure(this.options.text)),this.options.underline!==!1&&s.push(qee.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(LLe.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),BLe=e=>Yo({find:/--$/,replace:e??""}),zLe=e=>Yo({find:/\.\.\.$/,replace:e??""}),jLe=e=>Yo({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:e??""}),ULe=e=>Yo({find:/"$/,replace:e??""}),HLe=e=>Yo({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:e??""}),VLe=e=>Yo({find:/'$/,replace:e??""}),qLe=e=>Yo({find:/<-$/,replace:e??""}),GLe=e=>Yo({find:/->$/,replace:e??""}),WLe=e=>Yo({find:/\(c\)$/,replace:e??""}),YLe=e=>Yo({find:/\(tm\)$/,replace:e??""}),KLe=e=>Yo({find:/\(sm\)$/,replace:e??""}),ZLe=e=>Yo({find:/\(r\)$/,replace:e??""}),JLe=e=>Yo({find:/(?:^|\s)(1\/2)\s$/,replace:e??""}),XLe=e=>Yo({find:/\+\/-$/,replace:e??""}),QLe=e=>Yo({find:/!=$/,replace:e??""}),e$e=e=>Yo({find:/<<$/,replace:e??""}),t$e=e=>Yo({find:/>>$/,replace:e??""}),n$e=e=>Yo({find:/\d+\s?([*x])\s?\d+$/,replace:e??""}),r$e=e=>Yo({find:/\^2$/,replace:e??""}),s$e=e=>Yo({find:/\^3$/,replace:e??""}),o$e=e=>Yo({find:/(?:^|\s)(1\/4)\s$/,replace:e??""}),i$e=e=>Yo({find:/(?:^|\s)(3\/4)\s$/,replace:e??""}),a$e=Gr.create({name:"typography",addOptions(){return{closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}},addInputRules(){const e=[];return this.options.emDash!==!1&&e.push(BLe(this.options.emDash)),this.options.ellipsis!==!1&&e.push(zLe(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&e.push(jLe(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&e.push(ULe(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&e.push(HLe(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&e.push(VLe(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&e.push(qLe(this.options.leftArrow)),this.options.rightArrow!==!1&&e.push(GLe(this.options.rightArrow)),this.options.copyright!==!1&&e.push(WLe(this.options.copyright)),this.options.trademark!==!1&&e.push(YLe(this.options.trademark)),this.options.servicemark!==!1&&e.push(KLe(this.options.servicemark)),this.options.registeredTrademark!==!1&&e.push(ZLe(this.options.registeredTrademark)),this.options.oneHalf!==!1&&e.push(JLe(this.options.oneHalf)),this.options.plusMinus!==!1&&e.push(XLe(this.options.plusMinus)),this.options.notEqual!==!1&&e.push(QLe(this.options.notEqual)),this.options.laquo!==!1&&e.push(e$e(this.options.laquo)),this.options.raquo!==!1&&e.push(t$e(this.options.raquo)),this.options.multiplication!==!1&&e.push(n$e(this.options.multiplication)),this.options.superscriptTwo!==!1&&e.push(r$e(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&e.push(s$e(this.options.superscriptThree)),this.options.oneQuarter!==!1&&e.push(o$e(this.options.oneQuarter)),this.options.threeQuarters!==!1&&e.push(i$e(this.options.threeQuarters)),e}}),l$e=20,Jee=(e,t=0)=>{const n=[];return!e.children.length||t>l$e||Array.from(e.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...Jee(r,t+1))}),n},c$e=e=>{if(!e.children.length)return;const t=Jee(e);t&&t.forEach(n=>{var r,s;const o=n.getAttribute("style"),i=(s=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:s.getAttribute("style");n.setAttribute("style",`${i};${o}`)})},Xee=W0.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:e=>e.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&c$e(e),{}):!1}]},renderHTML({HTMLAttributes:e}){return["span",Mo(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleTextStyle:e=>({commands:t})=>t.toggleMark(this.name,e),removeEmptyTextStyle:()=>({tr:e})=>{const{selection:t}=e;return e.doc.nodesBetween(t.from,t.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(o=>!!o))||e.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),u$e=Gr.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const o=r[s].split(":");if(o.length>=2){const i=o[0].trim().toLowerCase(),a=o.slice(1).join(":").trim();if(i==="background-color")return a.replace(/['"]+/g,"")}}}return(t=e.style.backgroundColor)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.backgroundColor?{style:`background-color: ${e.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:e=>({chain:t})=>t().setMark("textStyle",{backgroundColor:e}).run(),unsetBackgroundColor:()=>({chain:e})=>e().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Qee=Gr.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const o=r[s].split(":");if(o.length>=2){const i=o[0].trim().toLowerCase(),a=o.slice(1).join(":").trim();if(i==="color")return a.replace(/['"]+/g,"")}}}return(t=e.style.color)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.color?{style:`color: ${e.color}`}:{}}}}]},addCommands(){return{setColor:e=>({chain:t})=>t().setMark("textStyle",{color:e}).run(),unsetColor:()=>({chain:e})=>e().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),d$e=Gr.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:e=>e.style.fontFamily,renderHTML:e=>e.fontFamily?{style:`font-family: ${e.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:e=>({chain:t})=>t().setMark("textStyle",{fontFamily:e}).run(),unsetFontFamily:()=>({chain:e})=>e().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),f$e=Gr.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:e=>e.style.fontSize,renderHTML:e=>e.fontSize?{style:`font-size: ${e.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:e=>({chain:t})=>t().setMark("textStyle",{fontSize:e}).run(),unsetFontSize:()=>({chain:e})=>e().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),h$e=Gr.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:e=>e.style.lineHeight,renderHTML:e=>e.lineHeight?{style:`line-height: ${e.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:e=>({chain:t})=>t().setMark("textStyle",{lineHeight:e}).run(),unsetLineHeight:()=>({chain:e})=>e().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Gr.create({name:"textStyleKit",addExtensions(){const e=[];return this.options.backgroundColor!==!1&&e.push(u$e.configure(this.options.backgroundColor)),this.options.color!==!1&&e.push(Qee.configure(this.options.color)),this.options.fontFamily!==!1&&e.push(d$e.configure(this.options.fontFamily)),this.options.fontSize!==!1&&e.push(f$e.configure(this.options.fontSize)),this.options.lineHeight!==!1&&e.push(h$e.configure(this.options.lineHeight)),this.options.textStyle!==!1&&e.push(Xee.configure(this.options.textStyle)),e}});var Pk,bz;function p$e(){if(bz)return Pk;bz=1;function e(ye){return ye instanceof Map?ye.clear=ye.delete=ye.set=function(){throw new Error("map is read-only")}:ye instanceof Set&&(ye.add=ye.clear=ye.delete=function(){throw new Error("set is read-only")}),Object.freeze(ye),Object.getOwnPropertyNames(ye).forEach(Ue=>{const ht=ye[Ue],Jt=typeof ht;(Jt==="object"||Jt==="function")&&!Object.isFrozen(ht)&&e(ht)}),ye}class t{constructor(Ue){Ue.data===void 0&&(Ue.data={}),this.data=Ue.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(ye){return ye.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(ye,...Ue){const ht=Object.create(null);for(const Jt in ye)ht[Jt]=ye[Jt];return Ue.forEach(function(Jt){for(const mr in Jt)ht[mr]=Jt[mr]}),ht}const s="</span>",o=ye=>!!ye.scope,i=(ye,{prefix:Ue})=>{if(ye.startsWith("language:"))return ye.replace("language:","language-");if(ye.includes(".")){const ht=ye.split(".");return[`${Ue}${ht.shift()}`,...ht.map((Jt,mr)=>`${Jt}${"_".repeat(mr+1)}`)].join(" ")}return`${Ue}${ye}`};class a{constructor(Ue,ht){this.buffer="",this.classPrefix=ht.classPrefix,Ue.walk(this)}addText(Ue){this.buffer+=n(Ue)}openNode(Ue){if(!o(Ue))return;const ht=i(Ue.scope,{prefix:this.classPrefix});this.span(ht)}closeNode(Ue){o(Ue)&&(this.buffer+=s)}value(){return this.buffer}span(Ue){this.buffer+=`<span class="${Ue}">`}}const l=(ye={})=>{const Ue={children:[]};return Object.assign(Ue,ye),Ue};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Ue){this.top.children.push(Ue)}openNode(Ue){const ht=l({scope:Ue});this.add(ht),this.stack.push(ht)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Ue){return this.constructor._walk(Ue,this.rootNode)}static _walk(Ue,ht){return typeof ht=="string"?Ue.addText(ht):ht.children&&(Ue.openNode(ht),ht.children.forEach(Jt=>this._walk(Ue,Jt)),Ue.closeNode(ht)),Ue}static _collapse(Ue){typeof Ue!="string"&&Ue.children&&(Ue.children.every(ht=>typeof ht=="string")?Ue.children=[Ue.children.join("")]:Ue.children.forEach(ht=>{c._collapse(ht)}))}}class u extends c{constructor(Ue){super(),this.options=Ue}addText(Ue){Ue!==""&&this.add(Ue)}startScope(Ue){this.openNode(Ue)}endScope(){this.closeNode()}__addSublanguage(Ue,ht){const Jt=Ue.root;ht&&(Jt.scope=`language:${ht}`),this.add(Jt)}toHTML(){return new a(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function f(ye){return ye?typeof ye=="string"?ye:ye.source:null}function m(ye){return v("(?=",ye,")")}function g(ye){return v("(?:",ye,")*")}function y(ye){return v("(?:",ye,")?")}function v(...ye){return ye.map(ht=>f(ht)).join("")}function w(ye){const Ue=ye[ye.length-1];return typeof Ue=="object"&&Ue.constructor===Object?(ye.splice(ye.length-1,1),Ue):{}}function _(...ye){return"("+(w(ye).capture?"":"?:")+ye.map(Jt=>f(Jt)).join("|")+")"}function S(ye){return new RegExp(ye.toString()+"|").exec("").length-1}function k(ye,Ue){const ht=ye&&ye.exec(Ue);return ht&&ht.index===0}const R=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function O(ye,{joinWith:Ue}){let ht=0;return ye.map(Jt=>{ht+=1;const mr=ht;let Kn=f(Jt),Rt="";for(;Kn.length>0;){const zt=R.exec(Kn);if(!zt){Rt+=Kn;break}Rt+=Kn.substring(0,zt.index),Kn=Kn.substring(zt.index+zt[0].length),zt[0][0]==="\\"&&zt[1]?Rt+="\\"+String(Number(zt[1])+mr):(Rt+=zt[0],zt[0]==="("&&ht++)}return Rt}).map(Jt=>`(${Jt})`).join(Ue)}const M=/\b\B/,P="[a-zA-Z]\\w*",j="[a-zA-Z_]\\w*",q="\\b\\d+(\\.\\d+)?",U="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",z="\\b(0b[01]+)",H="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",F=(ye={})=>{const Ue=/^#![ ]*\//;return ye.binary&&(ye.begin=v(Ue,/.*\b/,ye.binary,/\b.*/)),r({scope:"meta",begin:Ue,end:/$/,relevance:0,"on:begin":(ht,Jt)=>{ht.index!==0&&Jt.ignoreMatch()}},ye)},W={begin:"\\\\[\\s\\S]",relevance:0},X={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[W]},J={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[W]},ee={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},re=function(ye,Ue,ht={}){const Jt=r({scope:"comment",begin:ye,end:Ue,contains:[]},ht);Jt.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const mr=_("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Jt.contains.push({begin:v(/[ ]+/,"(",mr,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Jt},ie=re("//","$"),Z=re("/\\*","\\*/"),te=re("#","$"),oe={scope:"number",begin:q,relevance:0},Q={scope:"number",begin:U,relevance:0},Te={scope:"number",begin:z,relevance:0},ge={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[W,{begin:/\[/,end:/\]/,relevance:0,contains:[W]}]},Ce={scope:"title",begin:P,relevance:0},he={scope:"title",begin:j,relevance:0},Fe={begin:"\\.\\s*"+j,relevance:0};var Re=Object.freeze({__proto__:null,APOS_STRING_MODE:X,BACKSLASH_ESCAPE:W,BINARY_NUMBER_MODE:Te,BINARY_NUMBER_RE:z,COMMENT:re,C_BLOCK_COMMENT_MODE:Z,C_LINE_COMMENT_MODE:ie,C_NUMBER_MODE:Q,C_NUMBER_RE:U,END_SAME_AS_BEGIN:function(ye){return Object.assign(ye,{"on:begin":(Ue,ht)=>{ht.data._beginMatch=Ue[1]},"on:end":(Ue,ht)=>{ht.data._beginMatch!==Ue[1]&&ht.ignoreMatch()}})},HASH_COMMENT_MODE:te,IDENT_RE:P,MATCH_NOTHING_RE:M,METHOD_GUARD:Fe,NUMBER_MODE:oe,NUMBER_RE:q,PHRASAL_WORDS_MODE:ee,QUOTE_STRING_MODE:J,REGEXP_MODE:ge,RE_STARTERS_RE:H,SHEBANG:F,TITLE_MODE:Ce,UNDERSCORE_IDENT_RE:j,UNDERSCORE_TITLE_MODE:he});function tt(ye,Ue){ye.input[ye.index-1]==="."&&Ue.ignoreMatch()}function fe(ye,Ue){ye.className!==void 0&&(ye.scope=ye.className,delete ye.className)}function nt(ye,Ue){Ue&&ye.beginKeywords&&(ye.begin="\\b("+ye.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",ye.__beforeBegin=tt,ye.keywords=ye.keywords||ye.beginKeywords,delete ye.beginKeywords,ye.relevance===void 0&&(ye.relevance=0))}function ot(ye,Ue){Array.isArray(ye.illegal)&&(ye.illegal=_(...ye.illegal))}function Ht(ye,Ue){if(ye.match){if(ye.begin||ye.end)throw new Error("begin & end are not supported with match");ye.begin=ye.match,delete ye.match}}function qt(ye,Ue){ye.relevance===void 0&&(ye.relevance=1)}const Pt=(ye,Ue)=>{if(!ye.beforeMatch)return;if(ye.starts)throw new Error("beforeMatch cannot be used with starts");const ht=Object.assign({},ye);Object.keys(ye).forEach(Jt=>{delete ye[Jt]}),ye.keywords=ht.keywords,ye.begin=v(ht.beforeMatch,m(ht.begin)),ye.starts={relevance:0,contains:[Object.assign(ht,{endsParent:!0})]},ye.relevance=0,delete ht.beforeMatch},tn=["of","and","for","in","not","or","if","then","parent","list","value"],xt="keyword";function pe(ye,Ue,ht=xt){const Jt=Object.create(null);return typeof ye=="string"?mr(ht,ye.split(" ")):Array.isArray(ye)?mr(ht,ye):Object.keys(ye).forEach(function(Kn){Object.assign(Jt,pe(ye[Kn],Ue,Kn))}),Jt;function mr(Kn,Rt){Ue&&(Rt=Rt.map(zt=>zt.toLowerCase())),Rt.forEach(function(zt){const hn=zt.split("|");Jt[hn[0]]=[Kn,Ne(hn[0],hn[1])]})}}function Ne(ye,Ue){return Ue?Number(Ue):$e(ye)?0:1}function $e(ye){return tn.includes(ye.toLowerCase())}const Je={},Le=ye=>{console.error(ye)},Ve=(ye,...Ue)=>{console.log(`WARN: ${ye}`,...Ue)},_e=(ye,Ue)=>{Je[`${ye}/${Ue}`]||(console.log(`Deprecated as of ${ye}. ${Ue}`),Je[`${ye}/${Ue}`]=!0)},Y=new Error;function L(ye,Ue,{key:ht}){let Jt=0;const mr=ye[ht],Kn={},Rt={};for(let zt=1;zt<=Ue.length;zt++)Rt[zt+Jt]=mr[zt],Kn[zt+Jt]=!0,Jt+=S(Ue[zt-1]);ye[ht]=Rt,ye[ht]._emit=Kn,ye[ht]._multi=!0}function B(ye){if(Array.isArray(ye.begin)){if(ye.skip||ye.excludeBegin||ye.returnBegin)throw Le("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Y;if(typeof ye.beginScope!="object"||ye.beginScope===null)throw Le("beginScope must be object"),Y;L(ye,ye.begin,{key:"beginScope"}),ye.begin=O(ye.begin,{joinWith:""})}}function ce(ye){if(Array.isArray(ye.end)){if(ye.skip||ye.excludeEnd||ye.returnEnd)throw Le("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Y;if(typeof ye.endScope!="object"||ye.endScope===null)throw Le("endScope must be object"),Y;L(ye,ye.end,{key:"endScope"}),ye.end=O(ye.end,{joinWith:""})}}function we(ye){ye.scope&&typeof ye.scope=="object"&&ye.scope!==null&&(ye.beginScope=ye.scope,delete ye.scope)}function ze(ye){we(ye),typeof ye.beginScope=="string"&&(ye.beginScope={_wrap:ye.beginScope}),typeof ye.endScope=="string"&&(ye.endScope={_wrap:ye.endScope}),B(ye),ce(ye)}function Be(ye){function Ue(Rt,zt){return new RegExp(f(Rt),"m"+(ye.case_insensitive?"i":"")+(ye.unicodeRegex?"u":"")+(zt?"g":""))}class ht{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(zt,hn){hn.position=this.position++,this.matchIndexes[this.matchAt]=hn,this.regexes.push([hn,zt]),this.matchAt+=S(zt)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const zt=this.regexes.map(hn=>hn[1]);this.matcherRe=Ue(O(zt,{joinWith:"|"}),!0),this.lastIndex=0}exec(zt){this.matcherRe.lastIndex=this.lastIndex;const hn=this.matcherRe.exec(zt);if(!hn)return null;const In=hn.findIndex((xo,Gs)=>Gs>0&&xo!==void 0),Lr=this.matchIndexes[In];return hn.splice(0,In),Object.assign(hn,Lr)}}class Jt{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(zt){if(this.multiRegexes[zt])return this.multiRegexes[zt];const hn=new ht;return this.rules.slice(zt).forEach(([In,Lr])=>hn.addRule(In,Lr)),hn.compile(),this.multiRegexes[zt]=hn,hn}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(zt,hn){this.rules.push([zt,hn]),hn.type==="begin"&&this.count++}exec(zt){const hn=this.getMatcher(this.regexIndex);hn.lastIndex=this.lastIndex;let In=hn.exec(zt);if(this.resumingScanAtSamePosition()&&!(In&&In.index===this.lastIndex)){const Lr=this.getMatcher(0);Lr.lastIndex=this.lastIndex+1,In=Lr.exec(zt)}return In&&(this.regexIndex+=In.position+1,this.regexIndex===this.count&&this.considerAll()),In}}function mr(Rt){const zt=new Jt;return Rt.contains.forEach(hn=>zt.addRule(hn.begin,{rule:hn,type:"begin"})),Rt.terminatorEnd&&zt.addRule(Rt.terminatorEnd,{type:"end"}),Rt.illegal&&zt.addRule(Rt.illegal,{type:"illegal"}),zt}function Kn(Rt,zt){const hn=Rt;if(Rt.isCompiled)return hn;[fe,Ht,ze,Pt].forEach(Lr=>Lr(Rt,zt)),ye.compilerExtensions.forEach(Lr=>Lr(Rt,zt)),Rt.__beforeBegin=null,[nt,ot,qt].forEach(Lr=>Lr(Rt,zt)),Rt.isCompiled=!0;let In=null;return typeof Rt.keywords=="object"&&Rt.keywords.$pattern&&(Rt.keywords=Object.assign({},Rt.keywords),In=Rt.keywords.$pattern,delete Rt.keywords.$pattern),In=In||/\w+/,Rt.keywords&&(Rt.keywords=pe(Rt.keywords,ye.case_insensitive)),hn.keywordPatternRe=Ue(In,!0),zt&&(Rt.begin||(Rt.begin=/\B|\b/),hn.beginRe=Ue(hn.begin),!Rt.end&&!Rt.endsWithParent&&(Rt.end=/\B|\b/),Rt.end&&(hn.endRe=Ue(hn.end)),hn.terminatorEnd=f(hn.end)||"",Rt.endsWithParent&&zt.terminatorEnd&&(hn.terminatorEnd+=(Rt.end?"|":"")+zt.terminatorEnd)),Rt.illegal&&(hn.illegalRe=Ue(Rt.illegal)),Rt.contains||(Rt.contains=[]),Rt.contains=[].concat(...Rt.contains.map(function(Lr){return ln(Lr==="self"?Rt:Lr)})),Rt.contains.forEach(function(Lr){Kn(Lr,hn)}),Rt.starts&&Kn(Rt.starts,zt),hn.matcher=mr(hn),hn}if(ye.compilerExtensions||(ye.compilerExtensions=[]),ye.contains&&ye.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return ye.classNameAliases=r(ye.classNameAliases||{}),Kn(ye)}function ut(ye){return ye?ye.endsWithParent||ut(ye.starts):!1}function ln(ye){return ye.variants&&!ye.cachedVariants&&(ye.cachedVariants=ye.variants.map(function(Ue){return r(ye,{variants:null},Ue)})),ye.cachedVariants?ye.cachedVariants:ut(ye)?r(ye,{starts:ye.starts?r(ye.starts):null}):Object.isFrozen(ye)?r(ye):ye}var jt="11.11.1";class fn extends Error{constructor(Ue,ht){super(Ue),this.name="HTMLInjectionError",this.html=ht}}const an=n,Wa=r,An=Symbol("nomatch"),er=7,wt=function(ye){const Ue=Object.create(null),ht=Object.create(null),Jt=[];let mr=!0;const Kn="Could not find the language '{}', did you forget to load/include a language module?",Rt={disableAutodetect:!0,name:"Plain text",contains:[]};let zt={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:u};function hn(ft){return zt.noHighlightRe.test(ft)}function In(ft){let Nt=ft.className+" ";Nt+=ft.parentNode?ft.parentNode.className:"";const pn=zt.languageDetectRe.exec(Nt);if(pn){const wn=Hr(pn[1]);return wn||(Ve(Kn.replace("{}",pn[1])),Ve("Falling back to no-highlight mode for this block.",ft)),wn?pn[1]:"no-highlight"}return Nt.split(/\s+/).find(wn=>hn(wn)||Hr(wn))}function Lr(ft,Nt,pn){let wn="",kr="";typeof Nt=="object"?(wn=ft,pn=Nt.ignoreIllegals,kr=Nt.language):(_e("10.7.0","highlight(lang, code, ...args) has been deprecated."),_e("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),kr=ft,wn=Nt),pn===void 0&&(pn=!0);const Ws={code:wn,language:kr};Po("before:highlight",Ws);const ho=Ws.result?Ws.result:xo(Ws.language,Ws.code,pn);return ho.code=Ws.code,Po("after:highlight",ho),ho}function xo(ft,Nt,pn,wn){const kr=Object.create(null);function Ws($t,Kt){return $t.keywords[Kt]}function ho(){if(!Dn.keywords){po.addText(Wr);return}let $t=0;Dn.keywordPatternRe.lastIndex=0;let Kt=Dn.keywordPatternRe.exec(Wr),Jn="";for(;Kt;){Jn+=Wr.substring($t,Kt.index);const ur=Jo.case_insensitive?Kt[0].toLowerCase():Kt[0],zs=Ws(Dn,ur);if(zs){const[da,uh]=zs;if(po.addText(Jn),Jn="",kr[ur]=(kr[ur]||0)+1,kr[ur]<=er&&(Ou+=uh),da.startsWith("_"))Jn+=Kt[0];else{const dh=Jo.classNameAliases[da]||da;Eo(Kt[0],dh)}}else Jn+=Kt[0];$t=Dn.keywordPatternRe.lastIndex,Kt=Dn.keywordPatternRe.exec(Wr)}Jn+=Wr.substring($t),po.addText(Jn)}function Zo(){if(Wr==="")return;let $t=null;if(typeof Dn.subLanguage=="string"){if(!Ue[Dn.subLanguage]){po.addText(Wr);return}$t=xo(Dn.subLanguage,Wr,!0,Q0[Dn.subLanguage]),Q0[Dn.subLanguage]=$t._top}else $t=wo(Wr,Dn.subLanguage.length?Dn.subLanguage:null);Dn.relevance>0&&(Ou+=$t.relevance),po.__addSublanguage($t._emitter,$t.language)}function zr(){Dn.subLanguage!=null?Zo():ho(),Wr=""}function Eo($t,Kt){$t!==""&&(po.startScope(Kt),po.addText($t),po.endScope())}function Vm($t,Kt){let Jn=1;const ur=Kt.length-1;for(;Jn<=ur;){if(!$t._emit[Jn]){Jn++;continue}const zs=Jo.classNameAliases[$t[Jn]]||$t[Jn],da=Kt[Jn];zs?Eo(da,zs):(Wr=da,ho(),Wr=""),Jn++}}function Mu($t,Kt){return $t.scope&&typeof $t.scope=="string"&&po.openNode(Jo.classNameAliases[$t.scope]||$t.scope),$t.beginScope&&($t.beginScope._wrap?(Eo(Wr,Jo.classNameAliases[$t.beginScope._wrap]||$t.beginScope._wrap),Wr=""):$t.beginScope._multi&&(Vm($t.beginScope,Kt),Wr="")),Dn=Object.create($t,{parent:{value:Dn}}),Dn}function X0($t,Kt,Jn){let ur=k($t.endRe,Jn);if(ur){if($t["on:end"]){const zs=new t($t);$t["on:end"](Kt,zs),zs.isMatchIgnored&&(ur=!1)}if(ur){for(;$t.endsParent&&$t.parent;)$t=$t.parent;return $t}}if($t.endsWithParent)return X0($t.parent,Kt,Jn)}function Pd($t){return Dn.matcher.regexIndex===0?(Wr+=$t[0],1):(Sl=!0,0)}function lh($t){const Kt=$t[0],Jn=$t.rule,ur=new t(Jn),zs=[Jn.__beforeBegin,Jn["on:begin"]];for(const da of zs)if(da&&(da($t,ur),ur.isMatchIgnored))return Pd(Kt);return Jn.skip?Wr+=Kt:(Jn.excludeBegin&&(Wr+=Kt),zr(),!Jn.returnBegin&&!Jn.excludeBegin&&(Wr=Kt)),Mu(Jn,$t),Jn.returnBegin?0:Kt.length}function Yi($t){const Kt=$t[0],Jn=Nt.substring($t.index),ur=X0(Dn,$t,Jn);if(!ur)return An;const zs=Dn;Dn.endScope&&Dn.endScope._wrap?(zr(),Eo(Kt,Dn.endScope._wrap)):Dn.endScope&&Dn.endScope._multi?(zr(),Vm(Dn.endScope,$t)):zs.skip?Wr+=Kt:(zs.returnEnd||zs.excludeEnd||(Wr+=Kt),zr(),zs.excludeEnd&&(Wr=Kt));do Dn.scope&&po.closeNode(),!Dn.skip&&!Dn.subLanguage&&(Ou+=Dn.relevance),Dn=Dn.parent;while(Dn!==ur.parent);return ur.starts&&Mu(ur.starts,$t),zs.returnEnd?0:Kt.length}function _l(){const $t=[];for(let Kt=Dn;Kt!==Jo;Kt=Kt.parent)Kt.scope&&$t.unshift(Kt.scope);$t.forEach(Kt=>po.openNode(Kt))}let oc={};function jc($t,Kt){const Jn=Kt&&Kt[0];if(Wr+=$t,Jn==null)return zr(),0;if(oc.type==="begin"&&Kt.type==="end"&&oc.index===Kt.index&&Jn===""){if(Wr+=Nt.slice(Kt.index,Kt.index+1),!mr){const ur=new Error(`0 width match regex (${ft})`);throw ur.languageName=ft,ur.badRule=oc.rule,ur}return 1}if(oc=Kt,Kt.type==="begin")return lh(Kt);if(Kt.type==="illegal"&&!pn){const ur=new Error('Illegal lexeme "'+Jn+'" for mode "'+(Dn.scope||"<unnamed>")+'"');throw ur.mode=Dn,ur}else if(Kt.type==="end"){const ur=Yi(Kt);if(ur!==An)return ur}if(Kt.type==="illegal"&&Jn==="")return Wr+=`
`,1;if(Du>1e5&&Du>Kt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Wr+=Jn,Jn.length}const Jo=Hr(ft);if(!Jo)throw Le(Kn.replace("{}",ft)),new Error('Unknown language: "'+ft+'"');const Ld=Be(Jo);let ch="",Dn=wn||Ld;const Q0={},po=new zt.__emitter(zt);_l();let Wr="",Ou=0,yi=0,Du=0,Sl=!1;try{if(Jo.__emitTokens)Jo.__emitTokens(Nt,po);else{for(Dn.matcher.considerAll();;){Du++,Sl?Sl=!1:Dn.matcher.considerAll(),Dn.matcher.lastIndex=yi;const $t=Dn.matcher.exec(Nt);if(!$t)break;const Kt=Nt.substring(yi,$t.index),Jn=jc(Kt,$t);yi=$t.index+Jn}jc(Nt.substring(yi))}return po.finalize(),ch=po.toHTML(),{language:ft,value:ch,relevance:Ou,illegal:!1,_emitter:po,_top:Dn}}catch($t){if($t.message&&$t.message.includes("Illegal"))return{language:ft,value:an(Nt),illegal:!0,relevance:0,_illegalBy:{message:$t.message,index:yi,context:Nt.slice(yi-100,yi+100),mode:$t.mode,resultSoFar:ch},_emitter:po};if(mr)return{language:ft,value:an(Nt),illegal:!1,relevance:0,errorRaised:$t,_emitter:po,_top:Dn};throw $t}}function Gs(ft){const Nt={value:an(ft),illegal:!1,relevance:0,_top:Rt,_emitter:new zt.__emitter(zt)};return Nt._emitter.addText(ft),Nt}function wo(ft,Nt){Nt=Nt||zt.languages||Object.keys(Ue);const pn=Gs(ft),wn=Nt.filter(Hr).filter(kt).map(zr=>xo(zr,ft,!1));wn.unshift(pn);const kr=wn.sort((zr,Eo)=>{if(zr.relevance!==Eo.relevance)return Eo.relevance-zr.relevance;if(zr.language&&Eo.language){if(Hr(zr.language).supersetOf===Eo.language)return 1;if(Hr(Eo.language).supersetOf===zr.language)return-1}return 0}),[Ws,ho]=kr,Zo=Ws;return Zo.secondBest=ho,Zo}function Xr(ft,Nt,pn){const wn=Nt&&ht[Nt]||pn;ft.classList.add("hljs"),ft.classList.add(`language-${wn}`)}function gr(ft){let Nt=null;const pn=In(ft);if(hn(pn))return;if(Po("before:highlightElement",{el:ft,language:pn}),ft.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",ft);return}if(ft.children.length>0&&(zt.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(ft)),zt.throwUnescapedHTML))throw new fn("One of your code blocks includes unescaped HTML.",ft.innerHTML);Nt=ft;const wn=Nt.textContent,kr=pn?Lr(wn,{language:pn,ignoreIllegals:!0}):wo(wn);ft.innerHTML=kr.value,ft.dataset.highlighted="yes",Xr(ft,pn,kr.language),ft.result={language:kr.language,re:kr.relevance,relevance:kr.relevance},kr.secondBest&&(ft.secondBest={language:kr.secondBest.language,relevance:kr.secondBest.relevance}),Po("after:highlightElement",{el:ft,result:kr,text:wn})}function Do(ft){zt=Wa(zt,ft)}const at=()=>{Vt(),_e("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function rt(){Vt(),_e("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let pt=!1;function Vt(){function ft(){Vt()}if(document.readyState==="loading"){pt||window.addEventListener("DOMContentLoaded",ft,!1),pt=!0;return}document.querySelectorAll(zt.cssSelector).forEach(gr)}function Ur(ft,Nt){let pn=null;try{pn=Nt(ye)}catch(wn){if(Le("Language definition for '{}' could not be registered.".replace("{}",ft)),mr)Le(wn);else throw wn;pn=Rt}pn.name||(pn.name=ft),Ue[ft]=pn,pn.rawDefinition=Nt.bind(null,ye),pn.aliases&&ua(pn.aliases,{languageName:ft})}function As(ft){delete Ue[ft];for(const Nt of Object.keys(ht))ht[Nt]===ft&&delete ht[Nt]}function Zn(){return Object.keys(Ue)}function Hr(ft){return ft=(ft||"").toLowerCase(),Ue[ft]||Ue[ht[ft]]}function ua(ft,{languageName:Nt}){typeof ft=="string"&&(ft=[ft]),ft.forEach(pn=>{ht[pn.toLowerCase()]=Nt})}function kt(ft){const Nt=Hr(ft);return Nt&&!Nt.disableAutodetect}function Fn(ft){ft["before:highlightBlock"]&&!ft["before:highlightElement"]&&(ft["before:highlightElement"]=Nt=>{ft["before:highlightBlock"](Object.assign({block:Nt.el},Nt))}),ft["after:highlightBlock"]&&!ft["after:highlightElement"]&&(ft["after:highlightElement"]=Nt=>{ft["after:highlightBlock"](Object.assign({block:Nt.el},Nt))})}function mt(ft){Fn(ft),Jt.push(ft)}function Qr(ft){const Nt=Jt.indexOf(ft);Nt!==-1&&Jt.splice(Nt,1)}function Po(ft,Nt){const pn=ft;Jt.forEach(function(wn){wn[pn]&&wn[pn](Nt)})}function rr(ft){return _e("10.7.0","highlightBlock will be removed entirely in v12.0"),_e("10.7.0","Please use highlightElement now."),gr(ft)}Object.assign(ye,{highlight:Lr,highlightAuto:wo,highlightAll:Vt,highlightElement:gr,highlightBlock:rr,configure:Do,initHighlighting:at,initHighlightingOnLoad:rt,registerLanguage:Ur,unregisterLanguage:As,listLanguages:Zn,getLanguage:Hr,registerAliases:ua,autoDetection:kt,inherit:Wa,addPlugin:mt,removePlugin:Qr}),ye.debugMode=function(){mr=!1},ye.safeMode=function(){mr=!0},ye.versionString=jt,ye.regex={concat:v,lookahead:m,either:_,optional:y,anyNumberOfTimes:g};for(const ft in Re)typeof Re[ft]=="object"&&e(Re[ft]);return Object.assign(ye,Re),ye},on=wt({});return on.newInstance=()=>wt({}),Pk=on,on.HighlightJS=on,on.default=on,Pk}var m$e=p$e();const ete=km(m$e);function tte(e,t=[]){return e.flatMap(n=>{const r=[...t,...n.properties?n.properties.className:[]];return n.children?tte(n.children,r):{text:n.value,classes:r}})}function yz(e){return e.value||e.children||[]}function g$e(e){return!!ete.getLanguage(e)}function vz({doc:e,name:t,lowlight:n,defaultLanguage:r}){const s=[];return R6(e,o=>o.type.name===t).forEach(o=>{var i;let a=o.pos+1;const l=o.node.attrs.language||r,c=n.listLanguages(),u=l&&(c.includes(l)||g$e(l)||(i=n.registered)!=null&&i.call(n,l))?yz(n.highlight(l,o.node.textContent)):yz(n.highlightAuto(o.node.textContent));tte(u).forEach(f=>{const m=a+f.text.length;if(f.classes.length){const g=la.inline(a,m,{class:f.classes.join(" ")});s.push(g)}a=m})}),co.create(e,s)}function b$e(e){return typeof e=="function"}function y$e({name:e,lowlight:t,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(s=>b$e(t[s])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new vs({key:new Bs("lowlight"),state:{init:(s,{doc:o})=>vz({doc:o,name:e,lowlight:t,defaultLanguage:n}),apply:(s,o,i,a)=>{const l=i.selection.$head.parent.type.name,c=a.selection.$head.parent.type.name,u=R6(i.doc,m=>m.type.name===e),f=R6(a.doc,m=>m.type.name===e);return s.docChanged&&([l,c].includes(e)||f.length!==u.length||s.steps.some(m=>m.from!==void 0&&m.to!==void 0&&u.some(g=>g.pos>=m.from&&g.pos+g.node.nodeSize<=m.to)))?vz({doc:s.doc,name:e,lowlight:t,defaultLanguage:n}):o.map(s.mapping,s.doc)}},props:{decorations(s){return r.getState(s)}}});return r}var v$e=yPe.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},addProseMirrorPlugins(){var e;return[...((e=this.parent)==null?void 0:e.call(this))||[],y$e({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}});function x$e(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",i="(?!struct)("+r+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},g=t.optional(s)+e.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],w=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],R={type:v,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:w},O={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},M=[O,f,a,n,e.C_BLOCK_COMMENT_MODE,u,c],P={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:R,contains:M.concat([{begin:/\(/,end:/\)/,keywords:R,contains:M.concat(["self"]),relevance:0}]),relevance:0},j={className:"function",begin:"("+i+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:R,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:R,relevance:0},{begin:g,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:R,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:R,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:R,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(P,j,O,M,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:R,contains:["self",a]},{begin:e.IDENT_RE+"::",keywords:R},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function w$e(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=x$e(e),r=n.keywords;return r.type=[...r.type,...t.type],r.literal=[...r.literal,...t.literal],r.built_in=[...r.built_in,...t.built_in],r._hints=t._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function E$e(e){const t=e.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const s={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},o=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),i={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,s]};s.contains.push(a);const l={match:/\\"/},c={className:"string",begin:/'/,end:/'/},u={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},m=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],g=e.SHEBANG({binary:`(${m.join("|")})`,relevance:10}),y={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},v=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],w=["true","false"],_={match:/(\/[a-z._-]+)+/},S=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],k=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],R=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],O=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:v,literal:w,built_in:[...S,...k,"set","shopt",...R,...O]},contains:[g,e.SHEBANG(),y,f,o,i,_,a,l,c,u,n]}}function _$e(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",i="("+r+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},g=t.optional(s)+e.IDENT_RE+"\\s*\\(",w={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},_=[f,a,n,e.C_BLOCK_COMMENT_MODE,u,c],S={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:w,contains:_.concat([{begin:/\(/,end:/\)/,keywords:w,contains:_.concat(["self"]),relevance:0}]),relevance:0},k={begin:"("+i+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:w,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:w,relevance:0},{begin:g,returnBegin:!0,contains:[e.inherit(m,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:w,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:w,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:w,disableAutodetect:!0,illegal:"</",contains:[].concat(S,k,_,[f,{begin:e.IDENT_RE+"::",keywords:w},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:f,strings:c,keywords:w}}}function S$e(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",i="(?!struct)("+r+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},g=t.optional(s)+e.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],w=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],R={type:v,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:w},O={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},M=[O,f,a,n,e.C_BLOCK_COMMENT_MODE,u,c],P={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:R,contains:M.concat([{begin:/\(/,end:/\)/,keywords:R,contains:M.concat(["self"]),relevance:0}]),relevance:0},j={className:"function",begin:"("+i+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:R,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:R,relevance:0},{begin:g,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:R,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:R,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:R,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(P,j,O,M,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:R,contains:["self",a]},{begin:e.IDENT_RE+"::",keywords:R},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function T$e(e){const t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],s=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],o=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],i={keyword:s.concat(o),built_in:t,literal:r},a=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},u={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=e.inherit(u,{illegal:/\n/}),m={className:"subst",begin:/\{/,end:/\}/,keywords:i},g=e.inherit(m,{illegal:/\n/}),y={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,g]},v={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},m]},w=e.inherit(v,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},g]});m.contains=[v,y,u,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,l,e.C_BLOCK_COMMENT_MODE],g.contains=[w,y,f,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,l,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const _={variants:[c,v,y,u,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},S={begin:"<",end:">",contains:[{beginKeywords:"in out"},a]},k=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",R={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:i,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},_,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},a,S,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,S,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+k+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:i,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,S],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,relevance:0,contains:[_,l,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},R]}}const C$e=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),k$e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],A$e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],N$e=[...k$e,...A$e],I$e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),R$e=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),M$e=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),O$e=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function D$e(e){const t=e.regex,n=C$e(e),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",o=/@-?\w[\w]*(-\w+)*/,i="[a-zA-Z-][a-zA-Z0-9_-]*",a=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+i,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+R$e.join("|")+")"},{begin:":(:)?("+M$e.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+O$e.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...a,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...a,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:o},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:I$e.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...a,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+N$e.join("|")+")\\b"}]}}function P$e(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function L$e(e){const o={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:o,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:o,illegal:/["']/}]}]}}function $$e(e){const t=e.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(n,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function F$e(e){const t=e.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},r=e.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const s={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},o={className:"literal",begin:/\bon|off|true|false|yes|no\b/},i={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},a={begin:/\[/,end:/\]/,contains:[r,o,s,i,n,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,c=/"(\\"|[^"])*"/,u=/'[^']*'/,f=t.either(l,c,u),m=t.concat(f,"(\\s*\\.\\s*",f,")*",t.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:m,className:"attr",starts:{end:/$/,contains:[r,a,o,s,i,n]}}]}}var l1="[0-9](_*[0-9])*",z2=`\\.(${l1})`,j2="[0-9a-fA-F](_*[0-9a-fA-F])*",xz={className:"number",variants:[{begin:`(\\b(${l1})((${z2})|\\.)?|(${z2}))[eE][+-]?(${l1})[fFdD]?\\b`},{begin:`\\b(${l1})((${z2})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${z2})[fFdD]?\\b`},{begin:`\\b(${l1})[fFdD]\\b`},{begin:`\\b0[xX]((${j2})\\.?|(${j2})?\\.(${j2}))[pP][+-]?(${l1})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${j2})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function nte(e,t,n){return n===-1?"":e.replace(t,r=>nte(e,t,n-1))}function B$e(e){const t=e.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+nte("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},c={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},u={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[u,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[c,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,xz,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},xz,c]}}const wz="[A-Za-z$_][0-9A-Za-z$_]*",z$e=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],j$e=["true","false","null","undefined","NaN","Infinity"],rte=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ste=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],ote=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],U$e=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],H$e=[].concat(ote,rte,ste);function V$e(e){const t=e.regex,n=(re,{after:ie})=>{const Z="</"+re[0].slice(1);return re.input.indexOf(Z,ie)!==-1},r=wz,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(re,ie)=>{const Z=re[0].length+re.index,te=re.input[Z];if(te==="<"||te===","){ie.ignoreMatch();return}te===">"&&(n(re,{after:Z})||ie.ignoreMatch());let oe;const Q=re.input.substring(Z);if(oe=Q.match(/^\s*=/)){ie.ignoreMatch();return}if((oe=Q.match(/^\s+extends\s+/))&&oe.index===0){ie.ignoreMatch();return}}},a={$pattern:wz,keyword:z$e,literal:j$e,built_in:H$e,"variable.language":U$e},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},g={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},w={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,m]},S={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},k=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,w,{match:/\$\d+/},f];m.contains=k.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(k)});const R=[].concat(S,m.contains),O=R.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(R)}]),M={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O},P={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},j={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...rte,...ste]}},q={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},U={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[M],illegal:/%/},z={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function H(re){return t.concat("(?!",re.join("|"),")")}const F={match:t.concat(/\b/,H([...ote,"super","import"].map(re=>`${re}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},W={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},X={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},M]},J="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ee={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(J)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[M]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:O,CLASS_REFERENCE:j},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),q,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,w,S,{match:/\$\d+/},f,j,{scope:"attr",match:r+t.lookahead(":"),relevance:0},ee,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[S,e.REGEXP_MODE,{className:"function",begin:J,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},U,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[M,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},W,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[M]},F,z,P,X,{match:/\$[(.]/}]}}function q$e(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],s={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[t,n,e.QUOTE_STRING_MODE,s,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var c1="[0-9](_*[0-9])*",U2=`\\.(${c1})`,H2="[0-9a-fA-F](_*[0-9a-fA-F])*",G$e={className:"number",variants:[{begin:`(\\b(${c1})((${U2})|\\.)?|(${U2}))[eE][+-]?(${c1})[fFdD]?\\b`},{begin:`\\b(${c1})((${U2})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${U2})[fFdD]?\\b`},{begin:`\\b(${c1})[fFdD]\\b`},{begin:`\\b0[xX]((${H2})\\.?|(${H2})?\\.(${H2}))[pP][+-]?(${c1})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${H2})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function W$e(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},s={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},o={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},i={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[o,s]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,o,s]}]};s.contains.push(i);const a={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(i,{className:"string"}),"self"]}]},c=G$e,u=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},m=f;return m.variants[1].contains=[f],f.variants[1].contains=[m],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,u,n,r,a,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,e.C_LINE_COMMENT_MODE,u],relevance:0},e.C_LINE_COMMENT_MODE,u,a,l,i,e.C_NUMBER_MODE]},u]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},a,l]},i,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},c]}}const Y$e=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),K$e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Z$e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],J$e=[...K$e,...Z$e],X$e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),ite=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),ate=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Q$e=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),eFe=ite.concat(ate).sort().reverse();function tFe(e){const t=Y$e(e),n=eFe,r="and or not only",s="[\\w-]+",o="("+s+"|@\\{"+s+"\\})",i=[],a=[],l=function(k){return{className:"string",begin:"~?"+k+".*?"+k}},c=function(k,R,O){return{className:k,begin:R,relevance:O}},u={$pattern:/[a-z-]+/,keyword:r,attribute:X$e.join(" ")},f={begin:"\\(",end:"\\)",contains:a,keywords:u,relevance:0};a.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,l("'"),l('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,f,c("variable","@@?"+s,10),c("variable","@\\{"+s+"\\}"),c("built_in","~?`[^`]*?`"),{className:"attribute",begin:s+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const m=a.concat({begin:/\{/,end:/\}/,contains:i}),g={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(a)},y={begin:o+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Q$e.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:a}}]},v={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:u,returnEnd:!0,contains:a,relevance:0}},w={className:"variable",variants:[{begin:"@"+s+"\\s*:",relevance:15},{begin:"@"+s}],starts:{end:"[;}]",returnEnd:!0,contains:m}},_={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:o,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,g,c("keyword","all\\b"),c("variable","@\\{"+s+"\\}"),{begin:"\\b("+J$e.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,c("selector-tag",o,0),c("selector-id","#"+o),c("selector-class","\\."+o,0),c("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+ite.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+ate.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:m},{begin:"!important"},t.FUNCTION_DISPATCH]},S={begin:s+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[_]};return i.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,v,w,S,y,_,g,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:i}}function nFe(e){const t="\\[=*\\[",n="\\]=*\\]",r={begin:t,end:n,contains:["self"]},s=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:s.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:s}].concat(s)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:n,contains:[r],relevance:5}])}}function rFe(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,n]},s={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},o={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},i={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,n,r,s,o,i]}}function sFe(e){const t=e.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},s={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},o={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},i={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},a=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,a,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},c={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=e.inherit(c,{contains:[]}),m=e.inherit(u,{contains:[]});c.contains.push(m),u.contains.push(f);let g=[n,l];return[c,u,f,m].forEach(_=>{_.contains=_.contains.concat(g)}),g=g.concat(c,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:g},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:g}]}]},n,o,c,u,{className:"quote",begin:"^>\\s+",contains:g,end:"$"},s,r,l,i,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function oFe(e){const t={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,a={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:a,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}function iFe(e){const t=e.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,s={$pattern:/[\w.]+/,keyword:n.join(" ")},o={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:s},i={begin:/->\{/,end:/\}/},a={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[a]},c={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},u=[e.BACKSLASH_ESCAPE,o,l],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],m=(v,w,_="\\1")=>{const S=_==="\\1"?_:t.concat(_,w);return t.concat(t.concat("(?:",v,")"),w,/(?:\\.|[^\\\/])*?/,S,/(?:\\.|[^\\\/])*?/,_,r)},g=(v,w,_)=>t.concat(t.concat("(?:",v,")"),w,/(?:\\.|[^\\\/])*?/,_,r),y=[l,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),i,{className:"string",contains:u,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},c,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:m("s|tr|y",t.either(...f,{capture:!0}))},{begin:m("s|tr|y","\\(","\\)")},{begin:m("s|tr|y","\\[","\\]")},{begin:m("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:g("(?:m|qr)?",/\//,/\//)},{begin:g("m|qr",t.either(...f,{capture:!0}),/\1/)},{begin:g("m|qr",/\(/,/\)/)},{begin:g("m|qr",/\[/,/\]/)},{begin:g("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,a]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,a,c]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return o.contains=y,i.contains=y,{name:"Perl",aliases:["pl","pm"],keywords:s,contains:y}}function aFe(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,r=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),s=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),o=t.concat(/[A-Z]+/,n),i={scope:"variable",match:"\\$+"+r},a={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=e.inherit(e.APOS_STRING_MODE,{illegal:null}),u=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(l)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(W,X)=>{X.data._beginMatch=W[1]||W[2]},"on:end":(W,X)=>{X.data._beginMatch!==W[1]&&X.ignoreMatch()}},m=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),g=`[ 	
]`,y={scope:"string",variants:[u,c,f,m]},v={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},w=["false","null","true"],_=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],S=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],R={keyword:_,literal:(W=>{const X=[];return W.forEach(J=>{X.push(J),J.toLowerCase()===J?X.push(J.toUpperCase()):X.push(J.toLowerCase())}),X})(w),built_in:S},O=W=>W.map(X=>X.replace(/\|\d+$/,"")),M={variants:[{match:[/new/,t.concat(g,"+"),t.concat("(?!",O(S).join("\\b|"),"\\b)"),s],scope:{1:"keyword",4:"title.class"}}]},P=t.concat(r,"\\b(?!\\()"),j={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),P],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[s,t.concat(/::/,t.lookahead(/(?!class\b)/)),P],scope:{1:"title.class",3:"variable.constant"}},{match:[s,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[s,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},q={scope:"attr",match:t.concat(r,t.lookahead(":"),t.lookahead(/(?!::)/))},U={relevance:0,begin:/\(/,end:/\)/,keywords:R,contains:[q,i,j,e.C_BLOCK_COMMENT_MODE,y,v,M]},z={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",O(_).join("\\b|"),"|",O(S).join("\\b|"),"\\b)"),r,t.concat(g,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[U]};U.contains.push(z);const H=[q,j,e.C_BLOCK_COMMENT_MODE,y,v,M],F={begin:t.concat(/#\[\s*\\?/,t.either(s,o)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:w,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:w,keyword:["new","array"]},contains:["self",...H]},...H,{scope:"meta",variants:[{match:s},{match:o}]}]};return{case_insensitive:!1,keywords:R,contains:[F,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},a,{scope:"variable.language",match:/\$this\b/},i,z,j,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},M,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:R,contains:["self",F,i,j,e.C_BLOCK_COMMENT_MODE,y,v]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},y,v]}}function lFe(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function cFe(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function uFe(e){const t=e.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],a={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},c={className:"subst",begin:/\{/,end:/\}/,keywords:a,illegal:/#/},u={begin:/\{\{/,relevance:0},f={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,l,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,l,u,c]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,u,c]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},m="[0-9](_?[0-9])*",g=`(\\b(${m}))?\\.(${m})|\\b(${m})\\.`,y=`\\b|${r.join("|")}`,v={className:"number",relevance:0,variants:[{begin:`(\\b(${m})|(${g}))[eE][+-]?(${m})[jJ]?(?=${y})`},{begin:`(${g})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${y})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${y})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${y})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${y})`},{begin:`\\b(${m})[jJ](?=${y})`}]},w={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:a,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},_={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:["self",l,v,f,e.HASH_COMMENT_MODE]}]};return c.contains=[f,v,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:a,illegal:/(<\/|\?)|=>/,contains:[l,v,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,w,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[_]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[v,_,f]}]}}function dFe(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function fFe(e){const t=e.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),s=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,o=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[s,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[o,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:s},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:o},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function hFe(e){const t=e.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),s=t.concat(r,/(::\w+)*/),i={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},a={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},c=[e.COMMENT("#","$",{contains:[a]}),e.COMMENT("^=begin","^=end",{contains:[a],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],u={className:"subst",begin:/#\{/,end:/\}/,keywords:i},f={className:"string",contains:[e.BACKSLASH_ESCAPE,u],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,u]})]}]},m="[1-9](_?[0-9])*|0",g="[0-9](_?[0-9])*",y={className:"number",relevance:0,variants:[{begin:`\\b(${m})(\\.(${g}))?([eE][+-]?(${g})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},v={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:i}]},M=[f,{variants:[{match:[/class\s+/,s,/\s+<\s+/,s]},{match:[/\b(class|module)\s+/,s]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:i},{match:[/(include|extend)\s+/,s],scope:{2:"title.class"},keywords:i},{relevance:0,match:[s,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[v]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:n}],relevance:0},y,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:i},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,u],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,c),relevance:0}].concat(l,c);u.contains=M,v.contains=M;const U=[{begin:/^\s*=>/,starts:{end:"$",contains:M}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:i,contains:M}}];return c.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:i,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(U).concat(c).concat(M)}}function pFe(e){const t=e.regex,n=/(r#)?/,r=t.concat(n,e.UNDERSCORE_IDENT_RE),s=t.concat(n,e.IDENT_RE),o={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,s,t.lookahead(/\s*\(/))},i="([ui](8|16|32|64|128|size)|f(32|64))?",a=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],c=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],u=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:u,keyword:a,literal:l,built_in:c},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+i},{begin:"\\b0o([0-7_]+)"+i},{begin:"\\b0x([A-Fa-f0-9_]+)"+i},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+i}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:c,type:u}},{className:"punctuation",begin:"->"},o]}}const mFe=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),gFe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],bFe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],yFe=[...gFe,...bFe],vFe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),xFe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),wFe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),EFe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function _Fe(e){const t=mFe(e),n=wFe,r=xFe,s="@[a-z-]+",o="and or not only",a={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+yFe.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},a,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+EFe.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,a,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:s,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:vFe.join(" ")},contains:[{begin:s,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},a,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function SFe(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function TFe(e){const t=e.regex,n=e.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},s={begin:/"/,end:/"/,contains:[{match:/""/}]},o=["true","false","unknown"],i=["double precision","large object","with timezone","without timezone"],a=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],c=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],u=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],m=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],g=u,y=[...c,...l].filter(O=>!u.includes(O)),v={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},w={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},_={match:t.concat(/\b/,t.either(...g),/\s*\(/),relevance:0,keywords:{built_in:g}};function S(O){return t.concat(/\b/,t.either(...O.map(M=>M.replace(/\s+/,"\\s+"))),/\b/)}const k={scope:"keyword",match:S(m),relevance:0};function R(O,{exceptions:M,when:P}={}){const j=P;return M=M||[],O.map(q=>q.match(/\|\d+$/)||M.includes(q)?q:j(q)?`${q}|0`:q)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:R(y,{when:O=>O.length<3}),literal:o,type:a,built_in:f},contains:[{scope:"type",match:S(i)},k,_,v,r,s,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,w]}}function lte(e){return e?typeof e=="string"?e:e.source:null}function Ky(e){return Ls("(?=",e,")")}function Ls(...e){return e.map(n=>lte(n)).join("")}function CFe(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Pa(...e){return"("+(CFe(e).capture?"":"?:")+e.map(r=>lte(r)).join("|")+")"}const z7=e=>Ls(/\b/,e,/\w$/.test(e)?/\b/:/\B/),kFe=["Protocol","Type"].map(z7),Ez=["init","self"].map(z7),AFe=["Any","Self"],Lk=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],_z=["false","nil","true"],NFe=["assignment","associativity","higherThan","left","lowerThan","none","right"],IFe=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],Sz=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],cte=Pa(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),ute=Pa(cte,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),$k=Ls(cte,ute,"*"),dte=Pa(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),AT=Pa(dte,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Xu=Ls(dte,AT,"*"),V2=Ls(/[A-Z]/,AT,"*"),RFe=["attached","autoclosure",Ls(/convention\(/,Pa("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Ls(/objc\(/,Xu,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],MFe=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function OFe(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[e.C_LINE_COMMENT_MODE,n],s={match:[/\./,Pa(...kFe,...Ez)],className:{2:"keyword"}},o={match:Ls(/\./,Pa(...Lk)),relevance:0},i=Lk.filter(qt=>typeof qt=="string").concat(["_|0"]),a=Lk.filter(qt=>typeof qt!="string").concat(AFe).map(z7),l={variants:[{className:"keyword",match:Pa(...a,...Ez)}]},c={$pattern:Pa(/\b\w+/,/#\w+/),keyword:i.concat(IFe),literal:_z},u=[s,o,l],f={match:Ls(/\./,Pa(...Sz)),relevance:0},m={className:"built_in",match:Ls(/\b/,Pa(...Sz),/(?=\()/)},g=[f,m],y={match:/->/,relevance:0},v={className:"operator",relevance:0,variants:[{match:$k},{match:`\\.(\\.|${ute})+`}]},w=[y,v],_="([0-9]_*)+",S="([0-9a-fA-F]_*)+",k={className:"number",relevance:0,variants:[{match:`\\b(${_})(\\.(${_}))?([eE][+-]?(${_}))?\\b`},{match:`\\b0x(${S})(\\.(${S}))?([pP][+-]?(${_}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},R=(qt="")=>({className:"subst",variants:[{match:Ls(/\\/,qt,/[0\\tnr"']/)},{match:Ls(/\\/,qt,/u\{[0-9a-fA-F]{1,8}\}/)}]}),O=(qt="")=>({className:"subst",match:Ls(/\\/,qt,/[\t ]*(?:[\r\n]|\r\n)/)}),M=(qt="")=>({className:"subst",label:"interpol",begin:Ls(/\\/,qt,/\(/),end:/\)/}),P=(qt="")=>({begin:Ls(qt,/"""/),end:Ls(/"""/,qt),contains:[R(qt),O(qt),M(qt)]}),j=(qt="")=>({begin:Ls(qt,/"/),end:Ls(/"/,qt),contains:[R(qt),M(qt)]}),q={className:"string",variants:[P(),P("#"),P("##"),P("###"),j(),j("#"),j("##"),j("###")]},U=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],z={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:U},H=qt=>{const Pt=Ls(qt,/\//),tn=Ls(/\//,qt);return{begin:Pt,end:tn,contains:[...U,{scope:"comment",begin:`#(?!.*${tn})`,end:/$/}]}},F={scope:"regexp",variants:[H("###"),H("##"),H("#"),z]},W={match:Ls(/`/,Xu,/`/)},X={className:"variable",match:/\$\d+/},J={className:"variable",match:`\\$${AT}+`},ee=[W,X,J],re={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:MFe,contains:[...w,k,q]}]}},ie={scope:"keyword",match:Ls(/@/,Pa(...RFe),Ky(Pa(/\(/,/\s+/)))},Z={scope:"meta",match:Ls(/@/,Xu)},te=[re,ie,Z],oe={match:Ky(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Ls(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,AT,"+")},{className:"type",match:V2,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Ls(/\s+&\s+/,Ky(V2)),relevance:0}]},Q={begin:/</,end:/>/,keywords:c,contains:[...r,...u,...te,y,oe]};oe.contains.push(Q);const Te={match:Ls(Xu,/\s*:/),keywords:"_|0",relevance:0},ge={begin:/\(/,end:/\)/,relevance:0,keywords:c,contains:["self",Te,...r,F,...u,...g,...w,k,q,...ee,...te,oe]},Ce={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,oe]},he={begin:Pa(Ky(Ls(Xu,/\s*:/)),Ky(Ls(Xu,/\s+/,Xu,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Xu}]},Fe={begin:/\(/,end:/\)/,keywords:c,contains:[he,...r,...u,...w,k,q,...te,oe,ge],endsParent:!0,illegal:/["']/},De={match:[/(func|macro)/,/\s+/,Pa(W.match,Xu,$k)],className:{1:"keyword",3:"title.function"},contains:[Ce,Fe,t],illegal:[/\[/,/%/]},Re={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Ce,Fe,t],illegal:/\[|%/},tt={match:[/operator/,/\s+/,$k],className:{1:"keyword",3:"title"}},fe={begin:[/precedencegroup/,/\s+/,V2],className:{1:"keyword",3:"title"},contains:[oe],keywords:[...NFe,..._z],end:/}/},nt={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},ot={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},Ht={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Xu,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:c,contains:[Ce,...u,{begin:/:/,end:/\{/,keywords:c,contains:[{scope:"title.class.inherited",match:V2},...u],relevance:0}]};for(const qt of q.variants){const Pt=qt.contains.find(xt=>xt.label==="interpol");Pt.keywords=c;const tn=[...u,...g,...w,k,q,...ee];Pt.contains=[...tn,{begin:/\(/,end:/\)/,contains:["self",...tn]}]}return{name:"Swift",keywords:c,contains:[...r,De,Re,nt,ot,Ht,tt,fe,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},F,...u,...g,...w,k,q,...ee,...te,oe,ge]}}const NT="[A-Za-z$_][0-9A-Za-z$_]*",fte=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],hte=["true","false","null","undefined","NaN","Infinity"],pte=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],mte=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],gte=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],bte=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],yte=[].concat(gte,pte,mte);function DFe(e){const t=e.regex,n=(re,{after:ie})=>{const Z="</"+re[0].slice(1);return re.input.indexOf(Z,ie)!==-1},r=NT,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(re,ie)=>{const Z=re[0].length+re.index,te=re.input[Z];if(te==="<"||te===","){ie.ignoreMatch();return}te===">"&&(n(re,{after:Z})||ie.ignoreMatch());let oe;const Q=re.input.substring(Z);if(oe=Q.match(/^\s*=/)){ie.ignoreMatch();return}if((oe=Q.match(/^\s+extends\s+/))&&oe.index===0){ie.ignoreMatch();return}}},a={$pattern:NT,keyword:fte,literal:hte,built_in:yte,"variable.language":bte},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},g={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},w={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,m]},S={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},k=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,w,{match:/\$\d+/},f];m.contains=k.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(k)});const R=[].concat(S,m.contains),O=R.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(R)}]),M={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O},P={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},j={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...pte,...mte]}},q={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},U={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[M],illegal:/%/},z={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function H(re){return t.concat("(?!",re.join("|"),")")}const F={match:t.concat(/\b/,H([...gte,"super","import"].map(re=>`${re}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},W={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},X={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},M]},J="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ee={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(J)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[M]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:O,CLASS_REFERENCE:j},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),q,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,w,S,{match:/\$\d+/},f,j,{scope:"attr",match:r+t.lookahead(":"),relevance:0},ee,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[S,e.REGEXP_MODE,{className:"function",begin:J,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:O}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},U,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[M,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},W,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[M]},F,z,P,X,{match:/\$[(.]/}]}}function PFe(e){const t=e.regex,n=DFe(e),r=NT,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],o={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},i={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[n.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],c={$pattern:NT,keyword:fte.concat(l),literal:hte,built_in:yte.concat(s),"variable.language":bte},u={className:"meta",begin:"@"+r},f=(v,w,_)=>{const S=v.contains.findIndex(k=>k.label===w);if(S===-1)throw new Error("can not find mode to replace");v.contains.splice(S,1,_)};Object.assign(n.keywords,c),n.exports.PARAMS_CONTAINS.push(u);const m=n.contains.find(v=>v.scope==="attr"),g=Object.assign({},m,{match:t.concat(r,t.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,m,g]),n.contains=n.contains.concat([u,o,i,g]),f(n,"shebang",e.SHEBANG()),f(n,"use_strict",a);const y=n.contains.find(v=>v.label==="func.def");return y.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function LFe(e){const t=e.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},s=/\d{1,2}\/\d{1,2}\/\d{4}/,o=/\d{4}-\d{1,2}-\d{1,2}/,i=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,a=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:t.concat(/# */,t.either(o,s),/ *#/)},{begin:t.concat(/# */,a,/ *#/)},{begin:t.concat(/# */,i,/ *#/)},{begin:t.concat(/# */,t.either(o,s),/ +/,t.either(i,a),/ *#/)}]},c={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},u={className:"label",begin:/^\w+:/},f=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),m=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,l,c,u,f,m,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[m]}]}}function $Fe(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");const n=e.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],s={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},o={className:"variable",begin:/\$[\w_]+/},i={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},a={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},c={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},o,i,s,e.QUOTE_STRING_MODE,l,c,a]}}function FFe(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},o={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},i=e.inherit(o,{begin:/\(/,end:/\)/}),a=e.inherit(e.APOS_STRING_MODE,{className:"string"}),l=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[o,l,a,i,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[o,i,l,a]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:c}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function BFe(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},s={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},o={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},i={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,s]},a=e.inherit(i,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),m={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},g={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},y={begin:/\{/,end:/\}/,contains:[g],illegal:"\\n",relevance:0},v={begin:"\\[",end:"\\]",contains:[g],illegal:"\\n",relevance:0},w=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},m,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},y,v,o,i],_=[...w];return _.pop(),_.push(a),g.contains=_,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:w}}const zFe={arduino:w$e,bash:E$e,c:_$e,cpp:S$e,csharp:T$e,css:D$e,diff:P$e,go:L$e,graphql:$$e,ini:F$e,java:B$e,javascript:V$e,json:q$e,kotlin:W$e,less:tFe,lua:nFe,makefile:rFe,markdown:sFe,objectivec:oFe,perl:iFe,php:aFe,"php-template":lFe,plaintext:cFe,python:uFe,"python-repl":dFe,r:fFe,ruby:hFe,rust:pFe,scss:_Fe,shell:SFe,sql:TFe,swift:OFe,typescript:PFe,vbnet:LFe,wasm:$Fe,xml:FFe,yaml:BFe};const Tz={},jFe="hljs-";function UFe(e){const t=ete.newInstance();return e&&o(e),{highlight:n,highlightAuto:r,listLanguages:s,register:o,registerAlias:i,registered:a};function n(l,c,u){const f=u||Tz,m=typeof f.prefix=="string"?f.prefix:jFe;if(!t.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");t.configure({__emitter:HFe,classPrefix:m});const g=t.highlight(c,{ignoreIllegals:!0,language:l});if(g.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:g.errorRaised});const y=g._emitter.root,v=y.data;return v.language=g.language,v.relevance=g.relevance,y}function r(l,c){const f=(c||Tz).subset||s();let m=-1,g=0,y;for(;++m<f.length;){const v=f[m];if(!t.getLanguage(v))continue;const w=n(v,l,c);w.data&&w.data.relevance!==void 0&&w.data.relevance>g&&(g=w.data.relevance,y=w)}return y||{type:"root",children:[],data:{language:void 0,relevance:g}}}function s(){return t.listLanguages()}function o(l,c){if(typeof l=="string")t.registerLanguage(l,c);else{let u;for(u in l)Object.hasOwn(l,u)&&t.registerLanguage(u,l[u])}}function i(l,c){if(typeof l=="string")t.registerAliases(typeof c=="string"?c:[...c],{languageName:l});else{let u;for(u in l)if(Object.hasOwn(l,u)){const f=l[u];t.registerAliases(typeof f=="string"?f:[...f],{languageName:u})}}}function a(l){return!!t.getLanguage(l)}}class HFe{constructor(t){this.options=t,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(t){if(t==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=t:n.children.push({type:"text",value:t})}startScope(t){this.openNode(String(t))}endScope(){this.closeNode()}__addSublanguage(t,n){const r=this.stack[this.stack.length-1],s=t.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:s}):r.children.push(...s)}openNode(t){const n=this,r=t.split(".").map(function(i,a){return a?i+"_".repeat(a):n.options.classPrefix+i}),s=this.stack[this.stack.length-1],o={type:"element",tagName:"span",properties:{className:r},children:[]};s.children.push(o),this.stack.push(o)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const VFe=v$e.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),lowlight:UFe(zFe),defaultLanguage:null,HTMLAttributes:{class:"block-node"}}}}),qFe=Qee.extend({addProseMirrorPlugins(){var e;return[...((e=this.parent)==null?void 0:e.call(this))||[],new vs({props:{handleKeyDown:(t,n)=>(n.key==="Enter"&&this.editor.commands.unsetColor(),!1)}})]}}),GFe=See.extend({addKeyboardShortcuts(){return{"Mod-Alt--":()=>this.editor.commands.insertContent({type:this.name})}}});var WFe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,YFe=xl.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",Mo(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,n,r,s,o,i;const a=(n=(t=e.attrs)==null?void 0:t.src)!=null?n:"",l=(s=(r=e.attrs)==null?void 0:r.alt)!=null?s:"",c=(i=(o=e.attrs)==null?void 0:o.title)!=null?i:"";return c?`![${l}](${a} "${c}")`:`![${l}](${a})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:e,minWidth:t,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:s,getPos:o,HTMLAttributes:i,editor:a})=>{const l=document.createElement("img");Object.entries(i).forEach(([f,m])=>{if(m!=null)switch(f){case"width":case"height":break;default:l.setAttribute(f,m);break}}),l.src=i.src;const c=new L9e({element:l,editor:a,node:s,getPos:o,onResize:(f,m)=>{l.style.width=`${f}px`,l.style.height=`${m}px`},onCommit:(f,m)=>{const g=o();g!==void 0&&this.editor.chain().setNodeSelection(g).updateAttributes(this.name,{width:f,height:m}).run()},onUpdate:(f,m,g)=>f.type===s.type,options:{directions:e,min:{width:t,height:n},preserveAspectRatio:r===!0}}),u=c.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",l.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},c}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[YQ({find:WFe,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}});function KFe({initialWidth:e,initialHeight:t,contentWidth:n,contentHeight:r,gridInterval:s,minWidth:o,minHeight:i,maxWidth:a,onDimensionsChange:l}){const[c,u]=x.useState({width:Math.max(e??o,o),height:Math.max(t??i,i)}),[f,m]=x.useState(1/0),[g,y]=x.useState(0),[v,w]=x.useState(c),[_,S]=x.useState(),k=x.useCallback((j,q)=>{const U=Math.max(o,Math.min(n??o,s/100*q));return Math.min(q,Math.max(j,U))},[s,n,o]),R=x.useCallback(j=>{j.preventDefault();const q=(_==="left"?g-j.pageX:j.pageX-g)*2,U=s/100*f,z=v.width+q,H=Math.round(z/U)*U,F=k(H,f),W=r&&n?r/n:1;u({width:Math.max(F,o),height:Math.max(n?F*W:r??i,i)})},[k,_,f,g,s,r,n,v.width,o,i]),O=x.useCallback(j=>{j.preventDefault(),j.stopPropagation(),y(0),S(void 0),l==null||l(c)},[l,c]),M=x.useCallback(j=>{j.key==="Escape"&&(j.preventDefault(),j.stopPropagation(),u({width:Math.max(v.width,o),height:Math.max(v.height,i)}),S(void 0))},[v,o,i]),P=x.useCallback(j=>q=>{q.preventDefault(),q.stopPropagation(),m(a),w({width:Math.max(k(c.width,a),o),height:Math.max(c.height,i)}),y(q.pageX),S(j)},[a,k,c.width,c.height,o,i]);return x.useEffect(()=>{if(_)return document.addEventListener("keydown",M),document.addEventListener("pointermove",R),document.addEventListener("pointerup",O),()=>{document.removeEventListener("keydown",M),document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",O)}},[_,M,R,O]),{initiateResize:P,isResizing:!!_,updateDimensions:u,currentWidth:Math.max(c.width,o),currentHeight:Math.max(c.height,i)}}const K6=x.forwardRef(({className:e,isResizing:t=!1,...n},r)=>h.jsx("div",{className:Qe("absolute top-1/2 h-10 max-h-full w-1.5 -translate-y-1/2 transform cursor-col-resize rounded border border-solid border-[var(--mt-transparent-foreground)] bg-[var(--mt-bg-secondary)] p-px transition-all","opacity-0 [backdrop-filter:saturate(1.8)_blur(20px)]",{"opacity-80":t,"group-hover/node-image:opacity-80":!t},"before:absolute before:inset-y-0 before:-left-1 before:-right-1",e),ref:r,...n}));K6.displayName="ResizeHandle";function ZFe(){return Me.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-unzoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Me.createElement("path",{d:"M 14.144531 1.148438 L 9 6.292969 L 9 3 L 8 3 L 8 8 L 13 8 L 13 7 L 9.707031 7 L 14.855469 1.851563 Z M 8 8 L 3 8 L 3 9 L 6.292969 9 L 1.148438 14.144531 L 1.851563 14.855469 L 7 9.707031 L 7 13 L 8 13 Z"}))}function JFe(){return Me.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-zoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Me.createElement("path",{d:"M 9 1 L 9 2 L 12.292969 2 L 2 12.292969 L 2 9 L 1 9 L 1 14 L 6 14 L 6 13 L 2.707031 13 L 13 2.707031 L 13 6 L 14 6 L 14 1 Z"}))}const IT=(e,t)=>{var n,r;return e===((r=(n=t==null?void 0:t.tagName)==null?void 0:n.toUpperCase)==null?void 0:r.call(n))},j7=e=>IT("DIV",e)||IT("SPAN",e),RT=e=>IT("IMG",e),Cz=e=>e.complete&&e.naturalHeight!==0,L_=e=>IT("SVG",e),vte=({height:e,offset:t,width:n})=>Math.min((window.innerWidth-t*2)/n,(window.innerHeight-t*2)/e),XFe=({containerHeight:e,containerWidth:t,offset:n,targetHeight:r,targetWidth:s})=>{const o=vte({height:r,offset:n,width:s}),i=s>r?s/t:r/e;return o>1?i:o*i},im=({containerHeight:e,containerWidth:t,hasScalableSrc:n,offset:r,targetHeight:s,targetWidth:o})=>!e||!t?1:!n&&s&&o?XFe({containerHeight:e,containerWidth:t,offset:r,targetHeight:s,targetWidth:o}):vte({height:e,offset:r,width:t}),QFe=/url(?:\(['"]?)(.*?)(?:['"]?\))/,kz=e=>{var t;if(e){if(RT(e))return e.currentSrc;if(j7(e)){const n=window.getComputedStyle(e).backgroundImage;if(n)return(t=QFe.exec(n))==null?void 0:t[1]}}},eBe=e=>{if(e)return RT(e)?e.alt??void 0:e.getAttribute("aria-label")??void 0},tBe=({containerHeight:e,containerLeft:t,containerTop:n,containerWidth:r,hasScalableSrc:s,offset:o,targetHeight:i,targetWidth:a})=>{const l=im({containerHeight:e,containerWidth:r,hasScalableSrc:s,offset:o,targetHeight:i,targetWidth:a});return{top:n,left:t,width:r*l,height:e*l,transform:`translate(0,0) scale(${1/l})`}},wc=({position:e,relativeNum:t})=>{const n=parseFloat(e);return e.endsWith("%")?t*n/100:n},nBe=({containerHeight:e,containerLeft:t,containerTop:n,containerWidth:r,hasScalableSrc:s,objectFit:o,objectPosition:i,offset:a,targetHeight:l,targetWidth:c})=>{if(o==="scale-down"&&(c<=r&&l<=e?o="none":o="contain"),o==="cover"||o==="contain"){const u=r/c,f=e/l,m=o==="cover"?Math.max(u,f):Math.min(u,f),[g="50%",y="50%"]=i.split(" "),v=wc({position:g,relativeNum:r-c*m}),w=wc({position:y,relativeNum:e-l*m}),_=im({containerHeight:l*m,containerWidth:c*m,hasScalableSrc:s,offset:a,targetHeight:l,targetWidth:c});return{top:n+w,left:t+v,width:c*m*_,height:l*m*_,transform:`translate(0,0) scale(${1/_})`}}else if(o==="none"){const[u="50%",f="50%"]=i.split(" "),m=wc({position:u,relativeNum:r-c}),g=wc({position:f,relativeNum:e-l}),y=im({containerHeight:l,containerWidth:c,hasScalableSrc:s,offset:a,targetHeight:l,targetWidth:c});return{top:n+g,left:t+m,width:c*y,height:l*y,transform:`translate(0,0) scale(${1/y})`}}else if(o==="fill"){const u=r/c,f=e/l,m=Math.max(u,f),g=im({containerHeight:l*m,containerWidth:c*m,hasScalableSrc:s,offset:a,targetHeight:l,targetWidth:c});return{width:r*g,height:e*g,transform:`translate(0,0) scale(${1/g})`}}else return{}},rBe=({backgroundPosition:e,backgroundSize:t,containerHeight:n,containerLeft:r,containerTop:s,containerWidth:o,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c})=>{if(t==="cover"||t==="contain"){const u=o/c,f=n/l,m=t==="cover"?Math.max(u,f):Math.min(u,f),[g="50%",y="50%"]=e.split(" "),v=wc({position:g,relativeNum:o-c*m}),w=wc({position:y,relativeNum:n-l*m}),_=im({containerHeight:l*m,containerWidth:c*m,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c});return{top:s+w,left:r+v,width:c*m*_,height:l*m*_,transform:`translate(0,0) scale(${1/_})`}}else if(t==="auto"){const[u="50%",f="50%"]=e.split(" "),m=wc({position:u,relativeNum:o-c}),g=wc({position:f,relativeNum:n-l}),y=im({containerHeight:l,containerWidth:c,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c});return{top:s+g,left:r+m,width:c*y,height:l*y,transform:`translate(0,0) scale(${1/y})`}}else{const[u="50%",f="50%"]=t.split(" "),m=wc({position:u,relativeNum:o}),g=wc({position:f,relativeNum:n}),y=m/c,v=g/l,w=Math.min(y,v),[_="50%",S="50%"]=e.split(" "),k=wc({position:_,relativeNum:o-c*w}),R=wc({position:S,relativeNum:n-l*w}),O=im({containerHeight:l*w,containerWidth:c*w,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c});return{top:s+R,left:r+k,width:c*w*O,height:l*w*O,transform:`translate(0,0) scale(${1/O})`}}},sBe=/\.svg$/i,oBe=({hasZoomImg:e,imgSrc:t,isSvg:n,isZoomed:r,loadedImgEl:s,offset:o,shouldRefresh:i,targetEl:a})=>{var _;const l=n||((_=t==null?void 0:t.slice)==null?void 0:_.call(t,0,18))==="data:image/svg+xml"||e||!!(t&&sBe.test(t)),c=a.getBoundingClientRect(),u=window.getComputedStyle(a),f=s!=null&&j7(a),m=s!=null&&!f,g=tBe({containerHeight:c.height,containerLeft:c.left,containerTop:c.top,containerWidth:c.width,hasScalableSrc:l,offset:o,targetHeight:(s==null?void 0:s.naturalHeight)||c.height,targetWidth:(s==null?void 0:s.naturalWidth)||c.width}),y=m?nBe({containerHeight:c.height,containerLeft:c.left,containerTop:c.top,containerWidth:c.width,hasScalableSrc:l,objectFit:u.objectFit,objectPosition:u.objectPosition,offset:o,targetHeight:(s==null?void 0:s.naturalHeight)||c.height,targetWidth:(s==null?void 0:s.naturalWidth)||c.width}):void 0,v=f?rBe({backgroundPosition:u.backgroundPosition,backgroundSize:u.backgroundSize,containerHeight:c.height,containerLeft:c.left,containerTop:c.top,containerWidth:c.width,hasScalableSrc:l,offset:o,targetHeight:(s==null?void 0:s.naturalHeight)||c.height,targetWidth:(s==null?void 0:s.naturalWidth)||c.width}):void 0,w=Object.assign({},g,y,v);if(r){const S=window.innerWidth/2,k=window.innerHeight/2,R=parseFloat(String(w.left||0))+parseFloat(String(w.width||0))/2,O=parseFloat(String(w.top||0))+parseFloat(String(w.height||0))/2,M=S-R,P=k-O;i&&(w.transitionDuration="0.01ms"),w.transform=`translate(${M}px,${P}px) scale(1)`}return w},Fk=e=>{if(!e)return{};if(L_(e)){const t=e.parentElement,n=e.getBoundingClientRect();if(t){const r=t.getBoundingClientRect();return{height:n.height,left:r.left-n.left,top:r.top-n.top,width:n.width}}else return{height:n.height,left:n.left,width:n.width,top:n.top}}else return{height:e.offsetHeight,left:e.offsetLeft,width:e.offsetWidth,top:e.offsetTop}},iBe=e=>{const t="-zoom",n=["clip-path","fill","mask","marker-start","marker-mid","marker-end"],r=new Map;if(e.hasAttribute("id")){const s=e.id,o=s+t;r.set(s,o),e.id=o}e.querySelectorAll("[id]").forEach(s=>{const o=s.id,i=o+t;r.set(o,i),s.id=i}),r.forEach((s,o)=>{const i=`url(#${o})`,a=`url(#${s})`,l=n.map(c=>`[${c}="${i}"]`).join(", ");e.querySelectorAll(l).forEach(c=>{n.forEach(u=>{c.getAttribute(u)===i&&c.setAttribute(u,a)})})}),e.querySelectorAll("style").forEach(s=>{r.forEach((o,i)=>{s.textContent&&(s.textContent=s.textContent.replaceAll(`#${i}`,`#${o}`))})})},aBe=["img","svg",'[role="img"]',"[data-zoom]"].map(e=>`${e}:not([aria-hidden="true"])`).join(","),Az={overflow:"",width:""};function lBe(e){return Me.createElement(xte,{...e})}class xte extends Me.Component{constructor(){super(...arguments),this.state={id:"",isZoomImgLoaded:!1,loadedImgEl:void 0,modalState:"UNLOADED",shouldRefresh:!1,styleGhost:{}},this.refContent=Me.createRef(),this.refDialog=Me.createRef(),this.refModalContent=Me.createRef(),this.refModalImg=Me.createRef(),this.refWrap=Me.createRef(),this.imgEl=null,this.isScaling=!1,this.prevBodyAttrs=Az,this.styleModalImg={},this.handleModalStateChange=t=>{var r,s,o,i;const{modalState:n}=this.state;t!=="LOADING"&&n==="LOADING"?(this.loadZoomImg(),window.addEventListener("resize",this.handleResize,{passive:!0}),window.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),window.addEventListener("touchmove",this.handleTouchMove,{passive:!0}),window.addEventListener("touchend",this.handleTouchEnd,{passive:!0}),window.addEventListener("touchcancel",this.handleTouchCancel,{passive:!0}),document.addEventListener("keydown",this.handleKeyDown,!0)):t!=="LOADED"&&n==="LOADED"?window.addEventListener("wheel",this.handleWheel,{passive:!0}):t!=="UNLOADING"&&n==="UNLOADING"?(this.ensureImgTransitionEnd(),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),document.removeEventListener("keydown",this.handleKeyDown,!0)):t!=="UNLOADED"&&n==="UNLOADED"&&(this.bodyScrollEnable(),window.removeEventListener("resize",this.handleResize),(s=(r=this.refModalImg.current)==null?void 0:r.removeEventListener)==null||s.call(r,"transitionend",this.handleImgTransitionEnd),(i=(o=this.refDialog.current)==null?void 0:o.close)==null||i.call(o))},this.getDialogContainer=()=>{let t=document.querySelector("[data-rmiz-portal]");return t==null&&(t=document.createElement("div"),t.setAttribute("data-rmiz-portal",""),document.body.appendChild(t)),t},this.setId=()=>{const t=()=>Math.random().toString(16).slice(-4);this.setState({id:t()+t()+t()})},this.setAndTrackImg=()=>{var n,r;const t=this.refContent.current;t&&(this.imgEl=t.querySelector(aBe),this.imgEl?((r=(n=this.contentNotFoundChangeObserver)==null?void 0:n.disconnect)==null||r.call(n),this.imgEl.addEventListener("load",this.handleImgLoad),this.imgEl.addEventListener("click",this.handleZoom),this.state.loadedImgEl||this.handleImgLoad(),this.imgElResizeObserver=new ResizeObserver(s=>{const o=s[0];o!=null&&o.target&&(this.imgEl=o.target,this.setState({styleGhost:Fk(this.imgEl)}))}),this.imgElResizeObserver.observe(this.imgEl),this.contentChangeObserver||(this.contentChangeObserver=new MutationObserver(()=>{this.setState({styleGhost:Fk(this.imgEl)})}),this.contentChangeObserver.observe(t,{attributes:!0,childList:!0,subtree:!0}))):this.contentNotFoundChangeObserver||(this.contentNotFoundChangeObserver=new MutationObserver(this.setAndTrackImg),this.contentNotFoundChangeObserver.observe(t,{childList:!0,subtree:!0})))},this.handleIfZoomChanged=t=>{const{isZoomed:n}=this.props;!t&&n?this.zoom():t&&!n&&this.unzoom()},this.handleImgLoad=()=>{const t=kz(this.imgEl);if(!t)return;const n=new Image;RT(this.imgEl)&&(n.sizes=this.imgEl.sizes,n.srcset=this.imgEl.srcset,n.crossOrigin=this.imgEl.crossOrigin),n.src=t;const r=()=>{this.setState({loadedImgEl:n,styleGhost:Fk(this.imgEl)})};n.decode().then(r).catch(()=>{if(Cz(n)){r();return}n.onload=r})},this.handleZoom=t=>{var n,r;!this.props.isDisabled&&this.hasImage()&&((r=(n=this.props).onZoomChange)==null||r.call(n,!0,{event:t}))},this.handleUnzoom=t=>{var n,r;this.props.isDisabled||(r=(n=this.props).onZoomChange)==null||r.call(n,!1,{event:t})},this.handleBtnUnzoomClick=t=>{t.preventDefault(),t.stopPropagation(),this.handleUnzoom(t)},this.handleDialogCancel=t=>{t.preventDefault()},this.handleDialogClick=t=>{(t.target===this.refModalContent.current||t.target===this.refModalImg.current)&&(t.stopPropagation(),this.handleUnzoom(t))},this.handleDialogClose=t=>{t.stopPropagation(),this.handleUnzoom(t)},this.handleKeyDown=t=>{(t.key==="Escape"||t.keyCode===27)&&(t.preventDefault(),t.stopPropagation(),this.handleUnzoom(t))},this.handleWheel=t=>{t.ctrlKey||(t.stopPropagation(),queueMicrotask(()=>{this.handleUnzoom(t)}))},this.handleTouchStart=t=>{if(t.touches.length>1){this.isScaling=!0;return}t.changedTouches.length===1&&t.changedTouches[0]&&(this.touchYStart=t.changedTouches[0].screenY)},this.handleTouchMove=t=>{var r;const n=((r=window.visualViewport)==null?void 0:r.scale)??1;if(this.props.canSwipeToUnzoom&&!this.isScaling&&n<=1&&this.touchYStart!=null&&t.changedTouches[0]){this.touchYEnd=t.changedTouches[0].screenY;const s=Math.max(this.touchYStart,this.touchYEnd),o=Math.min(this.touchYStart,this.touchYEnd);Math.abs(s-o)>this.props.swipeToUnzoomThreshold&&(this.touchYStart=void 0,this.touchYEnd=void 0,this.handleUnzoom(t))}},this.handleTouchEnd=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleTouchCancel=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleResize=()=>{this.setState({shouldRefresh:!0})},this.hasImage=()=>this.imgEl&&(this.state.loadedImgEl||L_(this.imgEl))&&window.getComputedStyle(this.imgEl).display!=="none",this.zoom=()=>{var t,n,r,s;this.bodyScrollDisable(),(n=(t=this.refDialog.current)==null?void 0:t.showModal)==null||n.call(t),(s=(r=this.refModalImg.current)==null?void 0:r.addEventListener)==null||s.call(r,"transitionend",this.handleImgTransitionEnd),this.setState({modalState:"LOADING"})},this.unzoom=()=>{this.setState({modalState:"UNLOADING"})},this.handleImgTransitionEnd=()=>{clearTimeout(this.timeoutTransitionEnd),this.state.modalState==="LOADING"?this.setState({modalState:"LOADED"}):this.state.modalState==="UNLOADING"&&this.setState({shouldRefresh:!1,modalState:"UNLOADED"})},this.ensureImgTransitionEnd=()=>{if(this.refModalImg.current){const t=window.getComputedStyle(this.refModalImg.current).transitionDuration,n=parseFloat(t);if(n){const r=n*(t.endsWith("ms")?1:1e3)+50;this.timeoutTransitionEnd=setTimeout(this.handleImgTransitionEnd,r)}}},this.bodyScrollDisable=()=>{this.prevBodyAttrs={overflow:document.body.style.overflow,width:document.body.style.width};const t=document.body.clientWidth;document.body.style.overflow="hidden",document.body.style.width=`${t}px`},this.bodyScrollEnable=()=>{document.body.style.width=this.prevBodyAttrs.width,document.body.style.overflow=this.prevBodyAttrs.overflow,this.prevBodyAttrs=Az},this.loadZoomImg=()=>{const{props:{zoomImg:t}}=this,n=t==null?void 0:t.src;if(n){const r=new Image;r.sizes=(t==null?void 0:t.sizes)??"",r.srcset=(t==null?void 0:t.srcSet)??"",r.crossOrigin=(t==null?void 0:t.crossOrigin)??void 0,r.src=n;const s=()=>{this.setState({isZoomImgLoaded:!0})};r.decode().then(s).catch(()=>{if(Cz(r)){s();return}r.onload=s})}},this.UNSAFE_handleSvg=()=>{var s,o,i,a,l;const{imgEl:t,refModalImg:n,styleModalImg:r}=this;if(L_(t)){const c=t.cloneNode(!0);iBe(c),c.style.width=`${r.width||0}px`,c.style.height=`${r.height||0}px`,c.addEventListener("click",this.handleUnzoom),(i=(o=(s=n.current)==null?void 0:s.firstChild)==null?void 0:o.remove)==null||i.call(o),(l=(a=n.current)==null?void 0:a.appendChild)==null||l.call(a,c)}}}render(){const{handleBtnUnzoomClick:t,handleDialogCancel:n,handleDialogClick:r,handleDialogClose:s,handleUnzoom:o,handleZoom:i,imgEl:a,props:{a11yNameButtonUnzoom:l,a11yNameButtonZoom:c,children:u,classDialog:f,IconUnzoom:m,IconZoom:g,isZoomed:y,wrapElement:v,ZoomContent:w,zoomImg:_,zoomMargin:S},refContent:k,refDialog:R,refModalContent:O,refModalImg:M,refWrap:P,state:{id:j,isZoomImgLoaded:q,loadedImgEl:U,modalState:z,shouldRefresh:H,styleGhost:F}}=this,W=`rmiz-modal-${j}`,X=`rmiz-modal-img-${j}`,J=j7(a),ee=RT(a),re=L_(a),ie=eBe(a),Z=kz(a),te=ee?a.sizes:void 0,oe=ee?a.srcset:void 0,Q=ee?a.crossOrigin:void 0,Te=!!(_!=null&&_.src),ge=this.hasImage(),Ce=ie?`${c}: ${ie}`:c,he=z==="LOADING"||z==="LOADED",Fe=ge?"found":"not-found",De=z==="UNLOADED"||z==="UNLOADING"?"hidden":"visible",Re={visibility:z==="UNLOADED"?"visible":"hidden"};this.styleModalImg=ge?oBe({hasZoomImg:Te,imgSrc:Z,isSvg:re,isZoomed:y&&he,loadedImgEl:U,offset:S,shouldRefresh:H,targetEl:a}):{};let tt=null;if(ge){const fe=ee||J?Me.createElement("img",{alt:ie,crossOrigin:Q,sizes:te,src:Z,srcSet:oe,...q&&z==="LOADED"?_:{},"data-rmiz-modal-img":"",height:this.styleModalImg.height||void 0,id:X,ref:M,style:this.styleModalImg,width:this.styleModalImg.width||void 0}):re?Me.createElement("div",{"data-rmiz-modal-img":!0,ref:M,style:this.styleModalImg}):null,nt=Me.createElement("button",{"aria-label":l,"data-rmiz-btn-unzoom":"",onClick:t,type:"button"},Me.createElement(m,null));tt=w?Me.createElement(w,{buttonUnzoom:nt,modalState:z,img:fe,isZoomImgLoaded:q,onUnzoom:o}):Me.createElement(Me.Fragment,null,fe,nt)}return Me.createElement(v,{"aria-owns":W,"data-rmiz":"",ref:P},Me.createElement(v,{"data-rmiz-content":Fe,ref:k,style:Re},u),ge&&Me.createElement(v,{"data-rmiz-ghost":"",style:F},Me.createElement("button",{"aria-label":Ce,"data-rmiz-btn-zoom":"",onClick:i,type:"button"},Me.createElement(g,null))),ge&&xR.createPortal(Me.createElement("dialog",{"aria-labelledby":X,"aria-modal":"true",className:f,"data-rmiz-modal":"",id:W,onClick:r,onClose:s,onCancel:n,ref:R,role:"dialog"},Me.createElement("div",{"data-rmiz-modal-overlay":De}),Me.createElement("div",{"data-rmiz-modal-content":"",ref:O},tt)),this.getDialogContainer()))}componentDidMount(){this.setId(),this.setAndTrackImg(),this.handleImgLoad(),this.UNSAFE_handleSvg()}componentWillUnmount(){var t,n,r,s,o,i,a,l,c,u,f,m;this.state.modalState!=="UNLOADED"&&this.bodyScrollEnable(),(n=(t=this.contentChangeObserver)==null?void 0:t.disconnect)==null||n.call(t),(s=(r=this.contentNotFoundChangeObserver)==null?void 0:r.disconnect)==null||s.call(r),(i=(o=this.imgElResizeObserver)==null?void 0:o.disconnect)==null||i.call(o),(l=(a=this.imgEl)==null?void 0:a.removeEventListener)==null||l.call(a,"load",this.handleImgLoad),(u=(c=this.imgEl)==null?void 0:c.removeEventListener)==null||u.call(c,"click",this.handleZoom),(m=(f=this.refModalImg.current)==null?void 0:f.removeEventListener)==null||m.call(f,"transitionend",this.handleImgTransitionEnd),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),window.removeEventListener("resize",this.handleResize),document.removeEventListener("keydown",this.handleKeyDown,!0)}componentDidUpdate(t,n){this.handleModalStateChange(n.modalState),this.UNSAFE_handleSvg(),this.handleIfZoomChanged(t.isZoomed)}}xte.defaultProps={a11yNameButtonUnzoom:"Minimize image",a11yNameButtonZoom:"Expand image",canSwipeToUnzoom:!0,IconUnzoom:ZFe,IconZoom:JFe,isDisabled:!1,swipeToUnzoomThreshold:10,wrapElement:"div",zoomMargin:0};const U7=x.memo(x.forwardRef(({children:e,className:t,...n},r)=>h.jsx("div",{ref:r,className:Qe("absolute right-3 top-3 flex flex-row rounded px-0.5 opacity-0 group-hover/node-image:opacity-100","border-[0.5px] bg-[var(--mt-bg-secondary)] [backdrop-filter:saturate(1.8)_blur(20px)]",t),...n,children:e})));U7.displayName="ActionWrapper";const MT=x.memo(x.forwardRef(({icon:e,tooltip:t,className:n,...r},s)=>h.jsx(V1,{children:h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:h.jsx(_r,{ref:s,variant:"ghost",className:Qe("relative flex h-7 w-7 flex-row rounded-none p-0 text-muted-foreground hover:text-foreground","bg-transparent hover:bg-transparent",n),...r,children:e})}),h.jsx(um,{side:"bottom",children:t})]})})));MT.displayName="ActionButton";const cBe=[{key:"onView",icon:h.jsx(EDe,{className:"size-4"}),tooltip:"View image"},{key:"onDownload",icon:h.jsx(aDe,{className:"size-4"}),tooltip:"Download image"},{key:"onCopy",icon:h.jsx(eDe,{className:"size-4"}),tooltip:"Copy image to clipboard"},{key:"onCopyLink",icon:h.jsx(bDe,{className:"size-4"}),tooltip:"Copy image link",isLink:!0}],wte=x.memo(({shouldMerge:e=!1,isLink:t=!1,...n})=>{const[r,s]=x.useState(!1),o=x.useCallback((a,l)=>{a.preventDefault(),a.stopPropagation(),l==null||l()},[]),i=x.useMemo(()=>cBe.filter(a=>t||!a.isLink),[t]);return h.jsx(U7,{className:Qe({"opacity-100":r}),children:e?h.jsxs(bw,{open:r,onOpenChange:s,children:[h.jsx(yw,{asChild:!0,children:h.jsx(MT,{icon:h.jsx(nee,{className:"size-4"}),tooltip:"Open menu",onClick:a=>a.preventDefault()})}),h.jsx(vw,{className:"w-56",align:"end",children:i.map(({key:a,icon:l,tooltip:c})=>h.jsx(uu,{onClick:u=>o(u,n[a]),children:h.jsxs("div",{className:"flex flex-row items-center gap-2",children:[l,h.jsx("span",{children:c})]})},a))})]}):i.map(({key:a,icon:l,tooltip:c})=>h.jsx(MT,{icon:l,tooltip:c,onClick:u=>o(u,n[a])},a))})});wte.displayName="ImageActions";const uBe=({editor:e,node:t,src:n,onViewClick:r})=>{const s=x.useMemo(()=>L6(n),[n]),o=x.useCallback(()=>{r(!0)},[r]),i=x.useCallback(()=>{e.commands.downloadImage({src:t.attrs.src,alt:t.attrs.alt})},[e.commands,t.attrs.alt,t.attrs.src]),a=x.useCallback(()=>{e.commands.copyImage({src:t.attrs.src})},[e.commands,t.attrs.src]),l=x.useCallback(()=>{e.commands.copyLink({src:t.attrs.src})},[e.commands,t.attrs.src]),c=x.useCallback(()=>{e.commands.command(({tr:u,dispatch:f})=>{const{selection:m}=u,g=u.doc.nodeAt(m.from);return g&&g.type.name==="image"&&f?(u.deleteSelection(),!0):!1})},[e.commands]);return{isLink:s,onView:o,onDownload:i,onCopy:a,onCopyLink:l,onRemoveImg:c}},Ete=x.forwardRef(function({className:t,...n},r){return h.jsxs("svg",{ref:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:Qe("animate-spin",t),...n,children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})});Ete.displayName="Spinner";const _te=x.memo(Ete),Ste=x.memo(()=>h.jsx("div",{className:Qe("flex flex-row items-center justify-center","absolute inset-0 rounded bg-[var(--mt-overlay)] opacity-100 transition-opacity"),children:h.jsx(_te,{className:"size-7"})}));Ste.displayName="ImageOverlay";const Bk=600,dBe=120,Nz=120,fBe=e=>({src:typeof e=="string"?e:e.src,id:typeof e=="string"?zx():e.id}),hBe=({editor:e,node:t,selected:n,updateAttributes:r})=>{const{src:s,width:o,height:i,fileName:a}=t.attrs,l=x.useRef(!1),c=x.useMemo(()=>typeof s=="string"?s:s.src,[s]),[u,f]=x.useState({src:c,isServerUploading:!1,imageLoaded:!1,isZoomed:!1,error:!1,naturalSize:{width:o,height:i}}),m=x.useRef(null),[g,y]=x.useState(null),v=x.useCallback(({width:ie,height:Z})=>{r({width:ie,height:Z})},[r]),w=u.naturalSize.width/u.naturalSize.height,_=Bk*w,S=m.current?parseFloat(getComputedStyle(m.current).getPropertyValue("--editor-width")):1/0,{isLink:k,onView:R,onDownload:O,onCopy:M,onCopyLink:P,onRemoveImg:j}=uBe({editor:e,node:t,src:u.src,onViewClick:ie=>f(Z=>({...Z,isZoomed:ie}))}),{currentWidth:q,currentHeight:U,updateDimensions:z,initiateResize:H,isResizing:F}=KFe({initialWidth:o??u.naturalSize.width,initialHeight:i??u.naturalSize.height,contentWidth:u.naturalSize.width,contentHeight:u.naturalSize.height,gridInterval:.1,onDimensionsChange:v,minWidth:Nz,minHeight:dBe,maxWidth:S>0?S:_}),W=x.useMemo(()=>q<=180,[q]),X=x.useCallback(ie=>{const Z=ie.target,te={width:Z.naturalWidth,height:Z.naturalHeight};f(oe=>({...oe,naturalSize:te,imageLoaded:!0})),r({width:Z.width||te.width,height:Z.height||te.height,alt:Z.alt,title:Z.title}),o||z(oe=>({...oe,width:te.width}))},[o,r,z]),J=x.useCallback(()=>{f(ie=>({...ie,error:!0,imageLoaded:!0}))},[]),ee=x.useCallback(ie=>Z=>{y(ie),H(ie)(Z)},[H]),re=x.useCallback(()=>{y(null)},[]);return x.useEffect(()=>{F||re()},[F,re]),x.useEffect(()=>{(async()=>{if(!c.startsWith("blob:")||l.current)return;l.current=!0;const Z=e.options.extensions.find(oe=>oe.name==="image"),{uploadFn:te}=(Z==null?void 0:Z.options)??{};if(!te){try{const oe=await DDe(c);f(Q=>({...Q,src:oe})),r({src:oe})}catch{f(oe=>({...oe,error:!0}))}return}try{f(he=>({...he,isServerUploading:!0}));const Q=await(await fetch(c)).blob(),Te=new File([Q],a,{type:Q.type}),ge=await te(Te,e),Ce=fBe(ge);f(he=>({...he,...Ce,isServerUploading:!1})),r(Ce)}catch{f(Q=>({...Q,error:!0,isServerUploading:!1}))}})()},[e,a,c,r]),h.jsx(qOe,{ref:m,"data-drag-handle":!0,className:"relative text-center leading-none",children:h.jsx("div",{className:"group/node-image relative mx-auto rounded-md object-contain",style:{maxWidth:`min(${_}px, 100%)`,width:q,maxHeight:Bk,aspectRatio:`${u.naturalSize.width} / ${u.naturalSize.height}`},children:h.jsxs("div",{className:Qe("relative flex h-full cursor-default flex-col items-center gap-2 rounded",{"outline-primary outline outline-offset-1":n||F}),children:[h.jsxs("div",{className:"h-full contain-paint",children:[h.jsxs("div",{className:"relative h-full",children:[u.isServerUploading&&!u.error&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx(_te,{className:"size-7"})}),u.error&&h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[h.jsx(mDe,{className:"text-destructive size-8"}),h.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"Failed to load image"})]}),h.jsx(lBe,{isZoomed:u.isZoomed,onZoomChange:()=>f(ie=>({...ie,isZoomed:!1})),children:h.jsx("img",{className:Qe("h-auto rounded object-contain transition-shadow",{"opacity-0":!u.imageLoaded||u.error}),style:{maxWidth:`min(100%, ${_}px)`,minWidth:`${Nz}px`,maxHeight:Bk},width:q,height:U,src:u.src,onError:J,onLoad:X,alt:t.attrs.alt||"",title:t.attrs.title||"",id:t.attrs.id})})]}),u.isServerUploading&&h.jsx(Ste,{}),e.isEditable&&u.imageLoaded&&!u.error&&!u.isServerUploading&&h.jsxs(h.Fragment,{children:[h.jsx(K6,{onPointerDown:ee("left"),className:Qe("left-1",{hidden:F&&g==="right"}),isResizing:F&&g==="left"}),h.jsx(K6,{onPointerDown:ee("right"),className:Qe("right-1",{hidden:F&&g==="left"}),isResizing:F&&g==="right"})]})]}),u.error&&h.jsx(U7,{children:h.jsx(MT,{icon:h.jsx(ADe,{className:"size-4"}),tooltip:"Remove image",onClick:j})}),!F&&!u.error&&!u.isServerUploading&&h.jsx(wte,{shouldMerge:W,isLink:k,onView:R,onDownload:O,onCopy:M,onCopyLink:P})]})})})},H7=(e,t,n)=>{const r=e instanceof Error?e:new Error("Unknown error");n==null||n(r,t)},pBe=e=>{const[t,n]=e.split(","),r=t.split(":")[1].split(";")[0],s=r.split("/")[1],o=atob(n),i=new Uint8Array(o.length);for(let l=0;l<o.length;l++)i[l]=o.charCodeAt(l);return{blob:new Blob([i],{type:r}),extension:s}},mBe=async e=>{const t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch image");const n=await t.blob(),r=n.type.split(/\/|\+/)[1];return{blob:n,extension:r}},gBe=async e=>e.startsWith("data:")?pBe(e):mBe(e),bBe=async(e,t,n)=>{const r=URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download=`${t}.${n}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},yBe=async(e,t)=>{var o;const{src:n,alt:r}=e,s=r||"image";try{const{blob:i,extension:a}=await gBe(n);await bBe(i,s,a),(o=t.onActionSuccess)==null||o.call(t,{...e,action:"download"})}catch(i){H7(i,{...e,action:"download"},t.onActionError)}},vBe=async(e,t)=>{var r;const{src:n}=e;try{const o=await(await fetch(n)).blob();await navigator.clipboard.write([new ClipboardItem({[o.type]:o})]),(r=t.onActionSuccess)==null||r.call(t,{...e,action:"copyImage"})}catch(s){H7(s,{...e,action:"copyImage"},t.onActionError)}},xBe=async(e,t)=>{var r;const{src:n}=e;try{await navigator.clipboard.writeText(n),(r=t.onActionSuccess)==null||r.call(t,{...e,action:"copyLink"})}catch(s){H7(s,{...e,action:"copyLink"},t.onActionError)}},wBe=YFe.extend({atom:!0,addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),allowedMimeTypes:[],maxFileSize:0,uploadFn:void 0,onToggle:void 0,downloadImage:void 0,copyImage:void 0,copyLink:void 0}},addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},id:{default:null},width:{default:null},height:{default:null},fileName:{default:null}}},addCommands(){return{setImages:e=>({commands:t})=>{const[n,r]=XS(e,{allowedMimeTypes:this.options.allowedMimeTypes,maxFileSize:this.options.maxFileSize,allowBase64:this.options.allowBase64});return r.length>0&&this.options.onValidationError&&this.options.onValidationError(r),n.length>0?t.insertContent(n.map(s=>{if(s.src instanceof File){const o=URL.createObjectURL(s.src),i=zx();return{type:this.type.name,attrs:{id:i,src:o,alt:s.alt,title:s.title,fileName:s.src.name}}}else return{type:this.type.name,attrs:{id:zx(),src:s.src,alt:s.alt,title:s.title,fileName:null}}})):!1},downloadImage:e=>()=>((this.options.downloadImage||yBe)({...e,action:"download"},this.options),!0),copyImage:e=>()=>((this.options.copyImage||vBe)({...e,action:"copyImage"},this.options),!0),copyLink:e=>()=>((this.options.copyLink||xBe)({...e,action:"copyLink"},this.options),!0),toggleImage:()=>({editor:e})=>{const t=document.createElement("input");return t.type="file",t.accept=this.options.allowedMimeTypes.join(","),t.onchange=()=>{const n=t.files;if(!n)return;const[r,s]=XS(Array.from(n),{allowedMimeTypes:this.options.allowedMimeTypes,maxFileSize:this.options.maxFileSize,allowBase64:this.options.allowBase64});return s.length>0&&this.options.onValidationError?(this.options.onValidationError(s),!1):(r.length===0||this.options.onToggle&&this.options.onToggle(e,r,e.state.selection.from),!1)},t.click(),!0}}},onTransaction({transaction:e}){e.steps.forEach(t=>{t instanceof Ri&&t.slice.size===0&&e.before.content.cut(t.from,t.to).forEach(r=>{var s,o;if(r.type.name==="image"){const i=r.attrs;i.src.startsWith("blob:")&&URL.revokeObjectURL(i.src),(o=(s=this.options).onImageRemoved)==null||o.call(s,i)}})})},addNodeView(){return JOe(hBe,{className:"block-node"})}}),EBe=JPe.extend({inclusive:!1,parseHTML(){return[{tag:'a[href]:not([data-type="button"]):not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:e}){return["a",Mo(this.options.HTMLAttributes,e),0]},addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),openOnClick:!1,HTMLAttributes:{class:"link"}}},addProseMirrorPlugins(){var t;const{editor:e}=this;return[...((t=this.parent)==null?void 0:t.call(this))||[],new vs({props:{handleKeyDown:(n,r)=>{const{selection:s}=e.state;return r.key==="Escape"&&s.empty!==!0&&e.commands.focus(s.to,{scrollIntoView:!1}),!1},handleClick(n,r){const{schema:s,doc:o,tr:i}=n.state,a=SC(o.resolve(r),s.marks.link);if(!a)return;const{from:l,to:c}=a,u=Math.min(l,c),f=Math.max(l,c);if(r<u||r>f)return;const m=o.resolve(u),g=o.resolve(f),y=i.setSelection(new qn(m,g));n.dispatch(y)}}})]}}),_Be=Gr.create({name:"selection",addProseMirrorPlugins(){const{editor:e}=this;return[new vs({key:new Bs("selection"),props:{decorations(t){return t.selection.empty||e.isFocused===!0||!e.isEditable?null:co.create(t.doc,[la.inline(t.selection.from,t.selection.to,{class:"selection"})])}}})]}}),SBe=Gr.create({addKeyboardShortcuts(){return{"Mod-\\":()=>this.editor.commands.unsetAllMarks()}}}),TBe=Gr.create({name:"resetMarksOnEnter",addKeyboardShortcuts(){return{Enter:({editor:e})=>e.isActive("bold")||e.isActive("italic")||e.isActive("strike")||e.isActive("underline")||e.isActive("code")?(e.commands.splitBlock({keepMarks:!1}),!0):!1}}}),CBe=e=>{const{key:t,editor:n,onPaste:r,onDrop:s,onValidationError:o,allowedMimeTypes:i,maxFileSize:a}=e;return new vs({key:t||new Bs("fileHandler"),props:{handleDrop(l,c){c.preventDefault(),c.stopPropagation();const{dataTransfer:u}=c;if(!(u!=null&&u.files.length))return;const f=l.posAtCoords({left:c.clientX,top:c.clientY}),[m,g]=XS(Array.from(u.files),{allowedMimeTypes:i,maxFileSize:a,allowBase64:e.allowBase64});g.length>0&&o&&o(g),m.length>0&&s&&s(n,m,(f==null?void 0:f.pos)??0)},handlePaste(l,c){c.preventDefault(),c.stopPropagation();const{clipboardData:u}=c;if(!(u!=null&&u.files.length))return;const[f,m]=XS(Array.from(u.files),{allowedMimeTypes:i,maxFileSize:a,allowBase64:e.allowBase64}),g=u.getData("text/html");m.length>0&&o&&o(m),f.length>0&&r&&r(n,f,g)}}})},kBe=Gr.create({name:"fileHandler",addOptions(){return{allowBase64:!1,allowedMimeTypes:[],maxFileSize:0}},addProseMirrorPlugins(){return[CBe({key:new Bs(this.name),editor:this.editor,...this.options})]}});function ABe(e,t){const n=x.useRef(Date.now()),r=x.useRef(null);return x.useCallback((...s)=>{(()=>{Date.now()-n.current>=t?(e(...s),n.current=Date.now()):(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{e(...s),n.current=Date.now()},t-(Date.now()-n.current)))})()},[e,t])}const NBe=e=>[FLe.configure({horizontalRule:!1,codeBlock:!1,paragraph:{HTMLAttributes:{class:"text-node"}},heading:{HTMLAttributes:{class:"heading-node"}},blockquote:{HTMLAttributes:{class:"block-node"}},bulletList:{HTMLAttributes:{class:"list-node"}},orderedList:{HTMLAttributes:{class:"list-node"}},code:{HTMLAttributes:{class:"inline",spellcheck:"false"}},dropcursor:{width:2,class:"ProseMirror-dropcursor border"}}),EBe,qee,wBe.configure({allowedMimeTypes:["image/*"],maxFileSize:5*1024*1024,allowBase64:!0,uploadFn:async t=>{await new Promise(r=>setTimeout(r,3e3));const n=await Tk(t);return{id:zx(),src:n}},onToggle(t,n,r){t.commands.insertContentAt(r,n.map(s=>{const o=URL.createObjectURL(s);return{type:"image",attrs:{id:zx(),src:o,alt:s.name,title:s.name,fileName:s.name}}}))},onImageRemoved({id:t,src:n}){},onValidationError(t){t.forEach(n=>{Ui.error("Image validation error",{position:"bottom-right",description:n.reason})})},onActionSuccess({action:t}){const n={copyImage:"Copy Image",copyLink:"Copy Link",download:"Download"};Ui.success(n[t],{position:"bottom-right",description:"Image action success"})},onActionError(t,{action:n}){const r={copyImage:"Copy Image",copyLink:"Copy Link",download:"Download"};Ui.error(`Failed to ${r[n]}`,{position:"bottom-right",description:t.message})}}),kBe.configure({allowBase64:!0,allowedMimeTypes:["image/*"],maxFileSize:5*1024*1024,onDrop:(t,n,r)=>{n.forEach(async s=>{const o=await Tk(s);t.commands.insertContentAt(r,{type:"image",attrs:{src:o}})})},onPaste:(t,n)=>{n.forEach(async r=>{const s=await Tk(r);t.commands.insertContent({type:"image",attrs:{src:s}})})},onValidationError:t=>{t.forEach(n=>{Ui.error("Image validation error",{position:"bottom-right",description:n.reason})})}}),qFe,Xee,_Be,a$e,SBe,GFe,TBe,VFe,PLe.configure({placeholder:()=>e})],IBe=({value:e,output:t="html",placeholder:n="",editorClassName:r,throttleDelay:s=0,onUpdate:o,onBlur:i,...a})=>{const l=ABe(g=>o==null?void 0:o(g),s),c=x.useCallback(g=>l(KB(g,t)),[t,l]),u=x.useCallback(g=>{e&&g.isEmpty&&g.commands.setContent(e)},[e]),f=x.useCallback(g=>i==null?void 0:i(KB(g,t)),[t,i]);return HOe({extensions:NBe(n),editorProps:{attributes:{autocomplete:"off",autocorrect:"off",autocapitalize:"off",class:Qe("focus:outline-hidden",r)}},onUpdate:({editor:g})=>c(g),onCreate:({editor:g})=>u(g),onBlur:({editor:g})=>f(g),...a})},RBe={top:0,left:0,bottom:0,right:0,x:0,y:0,width:0,height:0,toJSON:()=>"{}"};function MBe(e){const[t,n]=x.useState(()=>(e==null?void 0:e.getBoundingClientRect())??RBe),r=x.useCallback(()=>{if(!e)return;const s=e.getBoundingClientRect();n(o=>Math.round(o.width)===Math.round(s.width)&&Math.round(o.height)===Math.round(s.height)&&Math.round(o.x)===Math.round(s.x)&&Math.round(o.y)===Math.round(s.y)?o:s)},[e]);return x.useEffect(()=>{if(!e)return;const s=new ResizeObserver(r);return s.observe(e),window.addEventListener("click",r),window.addEventListener("resize",r),()=>{s.disconnect(),window.removeEventListener("click",r),window.removeEventListener("resize",r)}},[e,r]),t}const Tte=x.forwardRef(({as:e,name:t,children:n,style:r={},...s},o)=>{const i=x.useRef(null),a=MBe(i.current);x.useImperativeHandle(o,()=>i.current);const l={[`--${t}-width`]:`${a.width}px`,[`--${t}-height`]:`${a.height}px`};return h.jsx(e,{...s,ref:i,style:{...l,...r},children:n})});Tte.displayName="MeasuredContainer";const OBe=({editor:e})=>h.jsx("div",{className:"shrink-0 overflow-x-auto border-b border-border p-2",children:h.jsxs("div",{className:"flex w-max items-center gap-px",children:[h.jsx(aee,{editor:e,activeActions:["bold","italic","underline","strikethrough","code","clearFormatting"],mainActionCount:3}),h.jsx(Bf,{orientation:"vertical",className:"mx-2 h-7"}),h.jsx(lee,{editor:e,activeActions:["orderedList","bulletList"],mainActionCount:0})]})}),Cte=x.forwardRef(({value:e,onChange:t,className:n,editorContentClassName:r,...s},o)=>{const i=IBe({value:e,onUpdate:t,...s});return i?h.jsxs(Tte,{as:"div",name:"editor",ref:o,className:Qe("flex h-auto min-h-72 w-full flex-col rounded-md border border-input shadow-xs focus-within:border-primary",n),children:[h.jsx(OBe,{editor:i}),h.jsx(LOe,{editor:i,className:Qe("minimal-tiptap-editor",r)}),h.jsx(oPe,{editor:i})]}):null});Cte.displayName="MinimalTiptapEditor";function DBe({content:e,isDarkMode:t,onUpdateContent:n,className:r,placeholder:s="Start writing your notes..."}){const o=x.useCallback(i=>{typeof i=="string"&&n(i)},[n]);return h.jsx("div",{className:Qe("flex h-full flex-col overflow-hidden",t?"bg-neutral-900":"bg-stone-50",r),children:h.jsx(Cte,{value:e,onChange:o,output:"html",placeholder:s,throttleDelay:500,className:Qe("flex-1 border-0 shadow-none rounded-none",t&&"dark"),editorContentClassName:Qe("flex-1 overflow-y-auto p-6",t?"prose-invert":""),editable:!0,autofocus:"end"})})}var Iz={};const wv=()=>{var e;return typeof window<"u"&&((e=window.electronAPI)==null?void 0:e.isElectron)===!0},zk=()=>typeof window<"u"&&!wv(),PBe=()=>window.location.origin;function LBe({className:e}){return h.jsxs("svg",{viewBox:"0 0 100 100",className:e,fill:"currentColor",children:[h.jsx("circle",{cx:"42",cy:"42",r:"30",fill:"none",stroke:"currentColor",strokeWidth:"8"}),h.jsx("line",{x1:"64",y1:"64",x2:"90",y2:"90",stroke:"currentColor",strokeWidth:"10",strokeLinecap:"round"}),h.jsx("circle",{cx:"42",cy:"42",r:"12",fill:"currentColor"}),h.jsx("circle",{cx:"47",cy:"38",r:"4",fill:"white"})]})}const kte="cluso-recent-projects",$Be=10;function Cf(){try{const e=localStorage.getItem(kte);if(e)return JSON.parse(e)}catch(e){Kr.general.error("Failed to load recent projects:",e)}return[]}function V7(e){try{localStorage.setItem(kte,JSON.stringify(e))}catch(t){Kr.general.error("Failed to save recent projects:",t)}}function Z6(e,t,n){const r=Cf(),s=r.find(a=>a.path===t),o=r.filter(a=>a.path!==t),i=[{name:e,path:t,port:n??(s==null?void 0:s.port),lastOpened:Date.now()},...o].slice(0,$Be);V7(i)}function FBe(e){return Cf().find(t=>t.path===e)}function BBe(e){const n=Cf().filter(r=>r.path!==e);V7(n)}function zBe(e,t){const r=Cf().map(s=>s.path===e?{...s,...t,lastOpened:Date.now()}:s);V7(r)}function jBe({onOpenProject:e,onOpenUrl:t,isDarkMode:n,lockedProjectPath:r}){const[s,o]=x.useState(""),[i,a]=x.useState([]),[l,c]=x.useState(null),[u,f]=x.useState({name:"",path:"",port:""}),[m,g]=x.useState(null),[y,v]=x.useState(!1),w=x.useCallback(async()=>{if(zk()){v(!0);try{const z=await fetch(`${PBe()}/api/files/cwd`);if(z.ok){const H=await z.json();H.success&&H.data&&(g(H.data),Kr.general.log("[WebMode] Server project:",H.data))}}catch(z){Kr.general.error("[WebMode] Failed to fetch server project:",z)}finally{v(!1)}}},[]),_=async(z,H)=>{var F,W;if(r){if(r===z){e(z,H);return}if((F=window.electronAPI)!=null&&F.window){await window.electronAPI.window.openProject(z,H);return}}if((W=window.electronAPI)!=null&&W.window){const{isOpen:X,windowId:J}=await window.electronAPI.window.isProjectOpen(z);if(X&&J!==null){await window.electronAPI.window.focus(J);return}}e(z,H)};x.useEffect(()=>{a(Cf()),w()},[w]);const S=async()=>{var z;if((z=window.electronAPI)!=null&&z.dialog){const H=await window.electronAPI.dialog.openFolder();if(H.success&&H.data){const{path:F,name:W}=H.data;Z6(W,F),a(Cf()),await _(F,W)}}},k=async z=>{Z6(z.name,z.path),a(Cf()),await _(z.path,z.name)},R=(z,H)=>{z.stopPropagation(),BBe(H),a(Cf())},O=(z,H)=>{var F;z.stopPropagation(),c(H.path),f({name:H.name,path:H.path,port:((F=H.port)==null?void 0:F.toString())||""})},M=(z,H)=>{z.stopPropagation();const F=u.port?parseInt(u.port):void 0;zBe(H,{name:u.name,path:u.path,port:F}),a(Cf()),c(null)},P=z=>{z.stopPropagation(),c(null)},j=z=>{if(z.preventDefault(),s.trim()){let H=s.trim();!H.startsWith("http://")&&!H.startsWith("https://")&&(H="http://"+H),t(H)}},q=z=>{const H=Iz.HOME||Iz.USERPROFILE||"";return z.startsWith(H)?"~"+z.slice(H.length):z},U=z=>{const F=Date.now()-z,W=Math.floor(F/6e4),X=Math.floor(F/36e5),J=Math.floor(F/864e5);return W<1?"Just now":W<60?`${W}m ago`:X<24?`${X}h ago`:J<7?`${J}d ago`:new Date(z).toLocaleDateString()};return h.jsxs("div",{className:`flex-1 flex flex-col items-center pt-16 px-8 min-h-full ${n?"bg-neutral-900 text-white":"bg-white text-stone-900"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(LBe,{className:"w-12 h-12"}),h.jsx("h1",{className:"text-4xl font-semibold tracking-tight",children:"Cluso"})]}),h.jsx("p",{className:`text-sm mb-4 ${n?"text-neutral-500":"text-stone-400"}`,children:"AI-Powered Browser Dev Tools"}),r&&h.jsxs("div",{className:`
          flex items-center gap-2 px-3 py-1.5 rounded-full mb-6 text-xs
          ${n?"bg-blue-500/10 text-blue-400":"bg-blue-50 text-blue-600"}
        `,children:[h.jsx(E1,{size:12}),h.jsxs("span",{children:["Window locked to: ",q(r)]})]}),zk()&&m&&h.jsxs("button",{onClick:()=>e(m.cwd,m.name),className:`
            w-72 p-6 rounded-xl border-2 mb-6 text-left
            transition-all duration-200 group
            ${n?"border-green-500/50 bg-green-500/10 hover:bg-green-500/20":"border-green-500/50 bg-green-50 hover:bg-green-100"}
          `,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`
              w-10 h-10 rounded-lg flex items-center justify-center
              ${n?"bg-green-500/20":"bg-green-100"}
            `,children:h.jsx(Cq,{size:20,className:`${n?"text-green-400":"text-green-600"}`})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("span",{className:`block text-sm font-medium ${n?"text-green-300":"text-green-700"}`,children:m.name}),h.jsx("span",{className:`block text-xs truncate ${n?"text-green-400/60":"text-green-600/60"}`,children:q(m.cwd)})]})]}),h.jsx("div",{className:`mt-3 text-xs ${n?"text-green-400/80":"text-green-600/80"}`,children:"Click to open server project"})]}),zk()&&y&&h.jsx("div",{className:`w-72 p-6 rounded-xl border-2 border-dashed mb-6 text-center ${n?"border-neutral-700 text-neutral-500":"border-stone-200 text-stone-400"}`,children:"Loading server project..."}),h.jsx("button",{onClick:wv()?S:void 0,disabled:!wv(),className:`
          w-72 p-6 rounded-xl border-2 border-dashed mb-10 text-left
          transition-all duration-200 group
          ${wv()?n?"border-neutral-700 hover:border-blue-500/50 hover:bg-blue-500/5":"border-stone-200 hover:border-blue-500/50 hover:bg-blue-50/50":n?"border-neutral-800 opacity-50":"border-stone-200 opacity-50"}
        `,children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`
            w-10 h-10 rounded-lg flex items-center justify-center
            transition-colors
            ${n?"bg-neutral-800 group-hover:bg-blue-500/20":"bg-stone-100 group-hover:bg-blue-100"}
          `,children:h.jsx(qf,{size:20,className:`${n?"text-neutral-400 group-hover:text-blue-400":"text-stone-500 group-hover:text-blue-600"}`})}),h.jsxs("div",{children:[h.jsx("span",{className:`block text-sm font-medium ${n?"text-neutral-200":"text-stone-700"}`,children:r?"Open Project in New Window":"Open Project"}),h.jsx("span",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:wv()?r?"Opens in separate window":"Select a local folder":"Use cluso CLI with --cwd to open a project"})]})]})}),i.length>0&&h.jsxs("div",{className:"w-full max-w-xl",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(fR,{size:14,className:n?"text-neutral-500":"text-stone-400"}),h.jsx("h2",{className:`text-xs font-medium uppercase tracking-wider ${n?"text-neutral-500":"text-stone-400"}`,children:"Recent Projects"})]}),h.jsx("div",{className:`rounded-xl overflow-hidden border ${n?"border-neutral-800":"border-stone-200"}`,children:i.map((z,H)=>h.jsx("div",{className:`
                  w-full px-4 py-3
                  transition-colors text-left
                  ${H!==i.length-1?n?"border-b border-neutral-800":"border-b border-stone-100":""}
                  ${l===z.path?"":"cursor-pointer group"}
                  ${n?"hover:bg-neutral-800/50":"hover:bg-stone-50"}
                `,onClick:l===z.path?void 0:()=>k(z),children:l===z.path?h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:u.name,onChange:F=>f(W=>({...W,name:F.target.value})),onClick:F=>F.stopPropagation(),placeholder:"Project name",className:`flex-1 px-2 py-1 text-sm rounded border ${n?"bg-neutral-800 border-neutral-700 text-neutral-200":"bg-white border-stone-200 text-stone-800"}`}),h.jsx("input",{type:"number",value:u.port,onChange:F=>f(W=>({...W,port:F.target.value})),onClick:F=>F.stopPropagation(),placeholder:"Port",className:`w-20 px-2 py-1 text-sm rounded border ${n?"bg-neutral-800 border-neutral-700 text-neutral-200":"bg-white border-stone-200 text-stone-800"}`})]}),h.jsx("input",{type:"text",value:u.path,onChange:F=>f(W=>({...W,path:F.target.value})),onClick:F=>F.stopPropagation(),placeholder:"Path",className:`w-full px-2 py-1 text-sm rounded border ${n?"bg-neutral-800 border-neutral-700 text-neutral-200":"bg-white border-stone-200 text-stone-800"}`}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx("button",{onClick:P,className:`px-2 py-1 text-xs rounded ${n?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,children:"Cancel"}),h.jsxs("button",{onClick:F=>M(F,z.path),className:"px-2 py-1 text-xs rounded flex items-center gap-1 bg-blue-600 text-white hover:bg-blue-500",children:[h.jsx(Cs,{size:12})," Save"]})]})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[h.jsx(E1,{size:18,className:n?"text-neutral-500":"text-stone-400"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("span",{className:`block text-sm font-medium truncate ${n?"text-neutral-200":"text-stone-800"}`,children:z.name}),h.jsxs("span",{className:`block text-xs truncate ${n?"text-neutral-600":"text-stone-400"}`,children:[q(z.path),z.port&&h.jsxs("span",{className:"ml-2 text-blue-500",children:[":",z.port]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[h.jsx("span",{className:`text-xs whitespace-nowrap ${n?"text-neutral-600":"text-stone-400"}`,children:U(z.lastOpened)}),h.jsx("button",{onClick:F=>O(F,z),className:`
                          opacity-0 group-hover:opacity-100 p-1 rounded
                          transition-opacity
                          ${n?"hover:bg-neutral-700":"hover:bg-stone-200"}
                        `,children:h.jsx(X_,{size:14,className:n?"text-neutral-500":"text-stone-400"})}),h.jsx("button",{onClick:F=>R(F,z.path),className:`
                          opacity-0 group-hover:opacity-100 p-1 rounded
                          transition-opacity
                          ${n?"hover:bg-neutral-700":"hover:bg-stone-200"}
                        `,children:h.jsx(qr,{size:14,className:n?"text-neutral-500":"text-stone-400"})})]})]})},z.path))})]}),i.length===0&&h.jsxs("div",{className:`text-center py-8 ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(E1,{size:32,className:"mx-auto mb-3 opacity-50"}),h.jsx("p",{className:"text-sm",children:"No recent projects"}),h.jsx("p",{className:"text-xs mt-1",children:"Open a folder to get started"})]}),h.jsxs("form",{onSubmit:j,className:"mt-auto mb-8 w-full max-w-md pt-8",children:[h.jsx("div",{className:`text-xs text-center mb-2 ${n?"text-neutral-600":"text-stone-400"}`,children:"Or enter a URL to inspect"}),h.jsx("input",{type:"text",value:s,onChange:z=>o(z.target.value),placeholder:"https://example.com",className:`
            w-full px-4 py-2.5 text-sm rounded-lg border
            focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/50
            ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"}
          `})]})]})}function UBe(){const e=window.electronAPI;if(!e)throw new Error("electronAPI is not available in this context");return{git:{async getCurrentBranch(){try{const t=await e.git.getCurrentBranch();return t.success?{success:!0,data:t.data}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async getBranches(){try{const t=await e.git.getBranches();return t.success?{success:!0,data:t.data}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async getStatus(){try{const t=await e.git.getStatus();return t.success?{success:!0,data:t.data}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async checkout(t){try{const n=await e.git.checkout(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async checkoutFile(t){try{const n=await e.git.checkout(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async createBranch(t){try{const n=await e.git.createBranch(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async commit(t){try{const n=await e.git.commit(t);return n.success?{success:!0,data:n.data}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async push(){try{const t=await e.git.push();return t.success?{success:!0,data:void 0}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async pull(){try{const t=await e.git.pull();return t.success?{success:!0,data:void 0}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async stash(t){try{const n=t?await e.git.stashWithMessage(t):await e.git.stash();return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async stashPop(){try{const t=await e.git.stashPop();return t.success?{success:!0,data:void 0}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}},files:{async readFile(t){try{const n=await e.files.readFile(t);return n.success?{success:!0,data:n.data}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async writeFile(t,n){try{const r=await e.files.writeFile(t,n);return r.success?{success:!0,data:void 0}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async createFile(t,n){try{const r=await e.files.createFile(t,n);return r.success?{success:!0,data:void 0}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async deleteFile(t){try{const n=await e.files.deleteFile(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async renameFile(t,n){try{const r=await e.files.renameFile(t,n);return r.success?{success:!0,data:void 0}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async copyFile(t,n){try{const r=await e.files.copyFile(t,n);return r.success?{success:!0,data:void 0}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async saveImage(t,n){try{const r=await e.files.saveImage(t,n);return r.success?{success:!0,data:r.data}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async exists(t){try{const n=await e.files.exists(t);return n.success?{success:!0,data:n.exists}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async stat(t){try{const n=await e.files.stat(t);return n.success?{success:!0,data:n.data}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async listDirectory(t){try{const n=await e.files.listDirectory(t);return n.success?{success:!0,data:n.data}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async createDirectory(t){try{const n=await e.files.createDirectory(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async deleteDirectory(t){try{const n=await e.files.deleteDirectory(t);return n.success?{success:!0,data:void 0}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async getCwd(){try{const t=await e.files.getCwd();return t.success?{success:!0,data:t.data}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async searchInFiles(t,n,r){try{const s=await e.files.searchInFiles(t,n,r);return s.success?{success:!0,data:s.data}:{success:!1,error:s.error||"Unknown error"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async glob(t,n){try{const r=await e.files.glob(t,n);return r.success?{success:!0,data:r.data}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async getTree(t,n){try{const r=await e.files.getTree(t,n);return r.success?{success:!0,data:r.data}:{success:!1,error:r.error||"Unknown error"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async readMultiple(t){try{const n=await e.files.readMultiple(t);return n.success?{success:!0,data:n.data}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}},oauth:{async startLogin(t){try{const n=await e.oauth.startLogin(t);return n.success&&n.authUrl?{success:!0,data:{authUrl:n.authUrl,verifier:"",state:""}}:{success:!1,error:n.error||"Unknown error"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},async completeLogin(t,n,r){try{const s=await e.oauth.completeLogin(t);return s.success?{success:!0,data:void 0}:{success:!1,error:s.error||"Unknown error"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async getStatus(){try{const t=await e.oauth.getStatus();return t.authenticated!==void 0?{success:!0,data:{authenticated:t.authenticated,expiresAt:t.expiresAt}}:{success:!1,error:"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async logout(){try{const t=await e.oauth.logout();return t.success?{success:!0,data:void 0}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},async getAccessToken(){try{const t=await e.oauth.getAccessToken();return t.success&&t.accessToken?{success:!0,data:t.accessToken}:{success:!1,error:t.error||"Unknown error"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}},backup:{async create(){return{success:!1,error:"Backup not implemented in Electron adapter yet"}},async list(){return{success:!1,error:"Backup not implemented in Electron adapter yet"}},async restore(t){return{success:!1,error:"Backup not implemented in Electron adapter yet"}},async delete(t){return{success:!1,error:"Backup not implemented in Electron adapter yet"}}}}}function HBe(e){const t=e.replace(/\/$/,"");async function n(r,s){const o=await fetch(`${t}${r}`,{headers:{"Content-Type":"application/json"},...s});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);return o.json()}return{git:{async getCurrentBranch(){try{return await n("/api/git/current-branch")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async getBranches(){try{return await n("/api/git/branches")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async getStatus(){try{return await n("/api/git/status")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async checkout(r){try{return await n("/api/git/checkout",{method:"POST",body:JSON.stringify({branch:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async checkoutFile(r){try{return await n("/api/git/checkout-file",{method:"POST",body:JSON.stringify({filePath:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async createBranch(r){try{return await n("/api/git/create-branch",{method:"POST",body:JSON.stringify({name:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async commit(r){try{return await n("/api/git/commit",{method:"POST",body:JSON.stringify({message:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async push(){try{return await n("/api/git/push",{method:"POST"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async pull(){try{return await n("/api/git/pull",{method:"POST"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async stash(r){try{return await n("/api/git/stash",{method:"POST",body:JSON.stringify({message:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async stashPop(){try{return await n("/api/git/stash-pop",{method:"POST"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}},files:{async readFile(r){try{const s=await n("/api/files/read",{method:"POST",body:JSON.stringify({path:r})});return s.success&&s.data?{success:!0,data:s.data.content}:{success:!1,error:s.error||"Unknown error"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async writeFile(r,s){try{return await n("/api/files/write",{method:"POST",body:JSON.stringify({path:r,content:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async createFile(r,s){try{return await n("/api/files/create",{method:"POST",body:JSON.stringify({path:r,content:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async deleteFile(r){try{return await n("/api/files/delete",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async renameFile(r,s){try{return await n("/api/files/rename",{method:"POST",body:JSON.stringify({oldPath:r,newPath:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async copyFile(r,s){try{return await n("/api/files/copy",{method:"POST",body:JSON.stringify({srcPath:r,destPath:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async saveImage(r,s){try{return await n("/api/files/save-image",{method:"POST",body:JSON.stringify({base64DataUrl:r,destPath:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async exists(r){try{return await n("/api/files/exists",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async stat(r){try{return await n("/api/files/stat",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async listDirectory(r){try{return await n("/api/files/list-directory",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async createDirectory(r){try{return await n("/api/files/create-directory",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async deleteDirectory(r){try{return await n("/api/files/delete-directory",{method:"POST",body:JSON.stringify({path:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async getCwd(){try{return await n("/api/files/cwd")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async searchInFiles(r,s,o){try{return await n("/api/files/search",{method:"POST",body:JSON.stringify({pattern:r,dirPath:s,options:o})})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}},async glob(r,s){try{return await n("/api/files/glob",{method:"POST",body:JSON.stringify({pattern:r,dirPath:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async getTree(r,s){try{return await n("/api/files/tree",{method:"POST",body:JSON.stringify({path:r,options:s})})}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}},async readMultiple(r){try{return await n("/api/files/read-multiple",{method:"POST",body:JSON.stringify({paths:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}},oauth:{async startLogin(r){try{return await n("/api/oauth/start-login",{method:"POST",body:JSON.stringify({mode:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async completeLogin(r,s,o){try{return await n("/api/oauth/complete-login",{method:"POST",body:JSON.stringify({code:r,verifier:s,state:o})})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}},async getStatus(){try{return await n("/api/oauth/status")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async logout(){try{return await n("/api/oauth/logout",{method:"POST"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async getAccessToken(){try{return await n("/api/oauth/access-token")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}},backup:{async create(){try{return await n("/api/backup/create",{method:"POST"})}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async list(){try{return await n("/api/backup/list")}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async restore(r){try{return await n("/api/backup/restore",{method:"POST",body:JSON.stringify({backupName:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},async delete(r){try{return await n("/api/backup/delete",{method:"POST",body:JSON.stringify({backupName:r})})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}}}}let Zy=null;function VBe(){var t;if(Zy)return Zy;if(typeof window<"u"&&((t=window.electronAPI)==null?void 0:t.isElectron)===!0)Zy=UBe();else{const n=qBe();Zy=HBe(n)}return Zy}function qBe(){return typeof window>"u"?"http://localhost:3001":window.location.origin}const jk={react:{name:"React",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},next:{name:"Next.js",color:"bg-white/10 text-white border-white/20"},vue:{name:"Vue",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},svelte:{name:"Svelte",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},vite:{name:"Vite",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},typescript:{name:"TypeScript",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},tailwindcss:{name:"Tailwind",color:"bg-sky-500/20 text-sky-400 border-sky-500/30"},"@remix-run/react":{name:"Remix",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},astro:{name:"Astro",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},express:{name:"Express",color:"bg-gray-500/20 text-gray-400 border-gray-500/30"},prisma:{name:"Prisma",color:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30"},"drizzle-orm":{name:"Drizzle",color:"bg-lime-500/20 text-lime-400 border-lime-500/30"},zod:{name:"Zod",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"@tanstack/react-query":{name:"React Query",color:"bg-red-500/20 text-red-400 border-red-500/30"},zustand:{name:"Zustand",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"framer-motion":{name:"Framer",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},three:{name:"Three.js",color:"bg-white/10 text-white border-white/20"},"@react-three/fiber":{name:"R3F",color:"bg-white/10 text-white border-white/20"},electron:{name:"Electron",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},"@google/generative-ai":{name:"Gemini",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"@anthropic-ai/sdk":{name:"Claude SDK",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},openai:{name:"OpenAI",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},langchain:{name:"LangChain",color:"bg-green-500/20 text-green-400 border-green-500/30"},"@vercel/ai":{name:"Vercel AI",color:"bg-white/10 text-white border-white/20"},ai:{name:"AI SDK",color:"bg-white/10 text-white border-white/20"},supabase:{name:"Supabase",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},"@supabase/supabase-js":{name:"Supabase",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},firebase:{name:"Firebase",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},stripe:{name:"Stripe",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},playwright:{name:"Playwright",color:"bg-green-500/20 text-green-400 border-green-500/30"},vitest:{name:"Vitest",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},jest:{name:"Jest",color:"bg-red-500/20 text-red-400 border-red-500/30"},"@trpc/server":{name:"tRPC",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},hono:{name:"Hono",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},elysia:{name:"Elysia",color:"bg-violet-500/20 text-violet-400 border-violet-500/30"},"socket.io":{name:"Socket.io",color:"bg-white/10 text-white border-white/20"},graphql:{name:"GraphQL",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},mongoose:{name:"MongoDB",color:"bg-green-500/20 text-green-400 border-green-500/30"},redis:{name:"Redis",color:"bg-red-500/20 text-red-400 border-red-500/30"},ioredis:{name:"Redis",color:"bg-red-500/20 text-red-400 border-red-500/30"}},GBe={"CLAUDE.md":{name:"Claude Ready",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"claude.md":{name:"Claude Ready",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"AGENTS.md":{name:"AI Agents",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"agents.md":{name:"AI Agents",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},".cursorrules":{name:"Cursor",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},".cursorignore":{name:"Cursor",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"docker-compose.yml":{name:"Docker",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"docker-compose.yaml":{name:"Docker",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},Dockerfile:{name:"Docker",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},".github":{name:"GitHub Actions",color:"bg-gray-500/20 text-gray-400 border-gray-500/30"},"turbo.json":{name:"Turborepo",color:"bg-red-500/20 text-red-400 border-red-500/30"},"nx.json":{name:"Nx",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"vercel.json":{name:"Vercel",color:"bg-white/10 text-white border-white/20"},"netlify.toml":{name:"Netlify",color:"bg-teal-500/20 text-teal-400 border-teal-500/30"},"fly.toml":{name:"Fly.io",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"railway.json":{name:"Railway",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},".env":{name:"Env Config",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},".env.local":{name:"Local Env",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},"biome.json":{name:"Biome",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},".prettierrc":{name:"Prettier",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},"prettier.config.js":{name:"Prettier",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},".eslintrc":{name:"ESLint",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},".eslintrc.js":{name:"ESLint",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"eslint.config.js":{name:"ESLint",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"wrangler.toml":{name:"Cloudflare",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},".wrangler":{name:"Cloudflare",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},convex:{name:"Convex",color:"bg-red-500/20 text-red-400 border-red-500/30"},"sanity.config.ts":{name:"Sanity",color:"bg-red-500/20 text-red-400 border-red-500/30"},"contentlayer.config.ts":{name:"Contentlayer",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"mdx-components.tsx":{name:"MDX",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},"schema.prisma":{name:"Prisma",color:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30"},"drizzle.config.ts":{name:"Drizzle",color:"bg-lime-500/20 text-lime-400 border-lime-500/30"},".claude":{name:"Claude Config",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"mcp.json":{name:"MCP",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},".mcp":{name:"MCP",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},storybook:{name:"Storybook",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},".storybook":{name:"Storybook",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},cypress:{name:"Cypress",color:"bg-green-500/20 text-green-400 border-green-500/30"},"cypress.config.ts":{name:"Cypress",color:"bg-green-500/20 text-green-400 border-green-500/30"},"playwright.config.ts":{name:"Playwright",color:"bg-green-500/20 text-green-400 border-green-500/30"},k8s:{name:"Kubernetes",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},kubernetes:{name:"Kubernetes",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},terraform:{name:"Terraform",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},pulumi:{name:"Pulumi",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"}},WBe={bun:{name:"Bun",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},pnpm:{name:"pnpm",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},yarn:{name:"Yarn",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},npm:{name:"npm",color:"bg-red-500/20 text-red-400 border-red-500/30"}},Rz={Vite:5173,"Next.js":3e3,"Create React App":3e3,Remix:3e3,Astro:4321,Vue:5173,Svelte:5173};function YBe({projectPath:e,projectName:t,initialPort:n,isDarkMode:r,onComplete:s,onCancel:o}){const[i,a]=x.useState([{id:"scan",label:"Scanning project",status:"pending"},{id:"deps",label:"Analyzing dependencies",status:"pending"},{id:"port",label:"Detecting port",status:"pending"}]),[l,c]=x.useState({name:t,path:e,techStack:[]}),[u,f]=x.useState(!1),[m,g]=x.useState(null),[y,v]=x.useState(!1),[w,_]=x.useState([]),S=x.useCallback((P,j)=>{a(q=>q.map(U=>U.id===P?{...U,...j}:U))},[]),k=x.useCallback(P=>{const j=new Set,q=P.filter(U=>j.has(U.name)?!1:(j.add(U.name),!0));_([]),q.forEach((U,z)=>{setTimeout(()=>{_(H=>[...H,U])},z*150)})},[]),R=x.useCallback(async()=>{const j=VBe().files;S("scan",{status:"running"}),await new Promise(F=>setTimeout(F,200));const q=await j.listDirectory(e);if(!q.success||!q.data){S("scan",{status:"error",message:"Could not read directory"}),g("Failed to read project directory");return}const U=q.data.map(F=>F.name);S("scan",{status:"success",message:`${U.length} files`}),S("deps",{status:"running"}),await new Promise(F=>setTimeout(F,200));const z=`${e}/package.json`,H=await j.readFile(z);if(!H.success||!H.data){S("deps",{status:"error",message:"No package.json"}),g("No package.json found");return}try{const F=JSON.parse(H.data),W={...F.dependencies,...F.devDependencies},X={...l,techStack:[]},J=[],ee=new Set,re=(Te,ge)=>{ee.has(Te)||(J.push({name:Te,color:ge}),ee.add(Te))};for(const[Te,ge]of Object.entries(jk))W[Te]&&re(ge.name,ge.color);U.includes("tsconfig.json")&&re(jk.typescript.name,jk.typescript.color);for(const[Te,ge]of Object.entries(GBe))U.includes(Te)&&re(ge.name,ge.color);let ie="npm";U.includes("bun.lockb")||U.includes("bun.lock")?ie="bun":U.includes("pnpm-lock.yaml")?ie="pnpm":U.includes("yarn.lock")&&(ie="yarn");const Z=WBe[ie];re(Z.name,Z.color),X.packageManager=ie,X.hasNodeModules=U.includes("node_modules"),X.techStack=J,W.next?X.framework="Next.js":W["@remix-run/react"]?X.framework="Remix":W.vite?X.framework="Vite":W["react-scripts"]?X.framework="Create React App":W.vue?X.framework="Vue":W.svelte?X.framework="Svelte":W.astro&&(X.framework="Astro");const te=F.scripts||{};let oe="";te.dev?oe="dev":te.start?oe="start":te.serve?oe="serve":te.develop&&(oe="develop"),oe&&(X.devCommand=`${ie}${ie==="npm"?" run":""} ${oe}`),c(X),k(J),S("deps",{status:"success",message:`${J.length} technologies`}),S("port",{status:"running"}),await new Promise(Te=>setTimeout(Te,300));let Q=3e3;if(U.includes("vite.config.ts")||U.includes("vite.config.js")){const Te=U.includes("vite.config.ts")?`${e}/vite.config.ts`:`${e}/vite.config.js`,ge=await j.readFile(Te);if(ge.success&&ge.data){const Ce=ge.data.match(/port:\s*(\d+)/);if(Ce){Q=parseInt(Ce[1]),S("port",{status:"success",message:`Port ${Q}`,detail:"from vite.config"}),c(he=>({...he,port:Q})),f(!0);return}}}if(U.includes("next.config.js")||U.includes("next.config.mjs")){const Te=U.includes("next.config.mjs")?`${e}/next.config.mjs`:`${e}/next.config.js`,ge=await j.readFile(Te);if(ge.success&&ge.data){const Ce=ge.data.match(/port:\s*(\d+)/);if(Ce){Q=parseInt(Ce[1]),S("port",{status:"success",message:`Port ${Q}`,detail:"from next.config"}),c(he=>({...he,port:Q})),f(!0);return}}}X.framework&&Rz[X.framework]?(Q=Rz[X.framework],S("port",{status:"success",message:`Port ${Q}`,detail:`${X.framework} default`})):S("port",{status:"success",message:`Port ${Q}`,detail:"default"}),c(Te=>({...Te,port:Q})),f(!0)}catch{S("deps",{status:"error",message:"Invalid package.json"}),g("Could not parse package.json")}},[e,t,S,k]);x.useEffect(()=>{y||(v(!0),R())},[y,R]);const O=()=>{const P=n||l.port||3e3,j=`http://localhost:${P}`;s(j,P)},M=P=>{switch(P){case"pending":return h.jsx(gN,{size:14,className:"text-neutral-600"});case"running":return h.jsx(hs,{size:14,className:"text-blue-400 animate-spin"});case"success":return h.jsx(jge,{size:14,className:"text-emerald-400"});case"error":return h.jsx(mN,{size:14,className:"text-red-400"});case"skipped":return h.jsx(gN,{size:14,className:"text-neutral-700"})}};return h.jsxs("div",{className:`flex-1 flex flex-col items-center justify-center px-8 min-h-full ${r?"bg-neutral-900 text-white":"bg-white text-stone-900"}`,children:[h.jsx("h1",{className:"text-2xl font-semibold mb-2",children:t}),h.jsx("p",{className:`text-xs font-mono mb-6 ${r?"text-neutral-500":"text-stone-400"}`,children:e}),h.jsx("div",{className:"flex flex-wrap justify-center content-start gap-2 mb-8 h-[80px] max-w-md overflow-hidden",children:w.filter((P,j,q)=>q.findIndex(U=>U.name===P.name)===j).map((P,j)=>h.jsx("span",{className:`
              px-3 py-1.5 text-xs font-medium rounded-full border
              animate-in fade-in zoom-in-95 duration-200
              ${P.color}
            `,style:{animationDelay:`${j*80}ms`},children:P.name},P.name))}),h.jsx("div",{className:`w-full max-w-md rounded-2xl p-6 mb-8 ${r?"bg-neutral-800/50 border border-neutral-700/50":"bg-stone-50 border border-stone-200"}`,children:h.jsx("div",{className:"space-y-4",children:i.map(P=>h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"flex-shrink-0",children:M(P.status)}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("div",{className:`text-sm ${P.status==="pending"?"text-neutral-500":P.status==="error"?"text-red-400":r?"text-neutral-200":"text-stone-700"}`,children:P.label})}),P.message&&h.jsx("div",{className:`text-xs ${P.status==="error"?"text-red-400":"text-neutral-500"}`,children:P.message})]},P.id))})}),m&&h.jsxs("div",{className:`mb-6 p-4 rounded-xl flex items-start gap-3 max-w-sm w-full ${r?"bg-red-500/10 border border-red-500/20":"bg-red-50 border border-red-100"}`,children:[h.jsx(_0,{size:16,className:"text-red-400 mt-0.5 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-red-400",children:m})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:o,className:`
            px-4 py-2 text-sm rounded-lg transition-colors
            ${r?"text-neutral-400 hover:bg-neutral-800":"text-stone-500 hover:bg-stone-100"}
          `,children:"Cancel"}),u&&h.jsxs("button",{onClick:O,className:`
              flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium
              transition-colors
              ${r?"bg-white text-neutral-900 hover:bg-neutral-200":"bg-stone-800 text-white hover:bg-stone-700"}
            `,children:[h.jsx(cu,{size:14}),h.jsx("span",{children:"Open in Browser"})]})]}),u&&h.jsxs("p",{className:`mt-4 text-xs ${r?"text-neutral-600":"text-stone-400"}`,children:["localhost:",n||l.port||3e3]})]})}function Ev(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return`${(e/Math.pow(t,r)).toFixed(1)} ${n[r]}`}function Mz(e){return`${Ev(e)}/s`}function Oz(e){return e<60?`${Math.round(e)}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h ${Math.round(e%3600/60)}m`}function KBe({isDarkMode:e,isPro:t=!0}){const[n,r]=x.useState(null),[s,o]=x.useState([]),[i,a]=x.useState(!0),[l,c]=x.useState(null),[u,f]=x.useState(null),[m,g]=x.useState(null),[y,v]=x.useState(null),[w,_]=x.useState(!1);x.useEffect(()=>{var W,X,J,ee,re,ie;S();const z=(X=(W=window.electronAPI)==null?void 0:W.fastApply)==null?void 0:X.onProgress(Z=>{g(Z)}),H=(ee=(J=window.electronAPI)==null?void 0:J.fastApply)==null?void 0:ee.onModelLoaded(()=>{S()}),F=(ie=(re=window.electronAPI)==null?void 0:re.fastApply)==null?void 0:ie.onModelUnloaded(()=>{S()});return()=>{z==null||z(),H==null||H(),F==null||F()}},[]);const S=async()=>{var z;if(!((z=window.electronAPI)!=null&&z.fastApply)){c("Fast Apply is only available in the desktop app"),a(!1);return}try{a(!0),c(null);const[H,F]=await Promise.all([window.electronAPI.fastApply.getStatus(),window.electronAPI.fastApply.listModels()]);r(H);const W=(F==null?void 0:F.models)||(Array.isArray(F)?F:[]);o(W),F&&!F.success&&F.error&&c(F.error)}catch(H){c(H instanceof Error?H.message:"Failed to load Fast Apply status"),o([])}finally{a(!1)}},k=async z=>{var H;if(console.log("[FastApplySettings] handleDownload called for:",z),u!==null){console.log("[FastApplySettings] Already downloading, ignoring click");return}if(!((H=window.electronAPI)!=null&&H.fastApply)){console.error("[FastApplySettings] fastApply API not available"),c("Fast Apply API not available");return}try{f(z),g(null),c(null),console.log("[FastApplySettings] Calling download IPC...");const F=await window.electronAPI.fastApply.download(z);console.log("[FastApplySettings] Download result:",F),F.success?console.log("[FastApplySettings] Download succeeded, path:",F.path):(console.error("[FastApplySettings] Download failed:",F.error),c(F.error||"Download failed")),await S()}catch(F){console.error("[FastApplySettings] Download exception:",F),c(F instanceof Error?F.message:"Download failed")}finally{f(null),g(null)}},R=async()=>{var z;(z=window.electronAPI)!=null&&z.fastApply&&(await window.electronAPI.fastApply.cancel(),f(null),g(null))},O=async z=>{var H;if((H=window.electronAPI)!=null&&H.fastApply)try{v(z);const F=await window.electronAPI.fastApply.delete(z);F.success||c(F.error||"Delete failed"),await S()}catch(F){c(F instanceof Error?F.message:"Delete failed")}finally{v(null)}},M=async z=>{var H;if((H=window.electronAPI)!=null&&H.fastApply)try{c(null);const F=await window.electronAPI.fastApply.setModel(z);if(!F.success){c(F.error||"Failed to set model");return}await S()}catch(F){c(F instanceof Error?F.message:"Failed to set model")}};if(!t)return h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:`p-6 rounded-xl border ${e?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:`p-2 rounded-lg ${e?"bg-yellow-500/20":"bg-yellow-100"}`,children:h.jsx(Yl,{size:24,className:"text-yellow-500"})}),h.jsxs("div",{children:[h.jsx("h3",{className:`font-semibold ${e?"text-white":"text-stone-900"}`,children:"Fast Apply - Pro Feature"}),h.jsx("p",{className:`text-sm ${e?"text-neutral-400":"text-stone-500"}`,children:"Instant local code merging with AI"})]})]}),h.jsx("p",{className:`text-sm mb-4 ${e?"text-neutral-300":"text-stone-600"}`,children:"Upgrade to Pro to unlock Fast Apply - a local AI model that merges code changes in ~500ms, completely offline after downloading. No API costs, complete privacy."}),h.jsx("button",{className:"w-full py-2.5 px-4 rounded-lg bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-medium hover:from-yellow-600 hover:to-orange-600 transition-all",children:"Upgrade to Pro"})]})});if(i)return h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(hs,{className:`animate-spin ${e?"text-neutral-400":"text-stone-500"}`,size:32})});if(l&&!n)return h.jsx("div",{className:`p-4 rounded-lg ${e?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_0,{size:18}),h.jsx("span",{className:"text-sm font-medium",children:l})]})});const P=async()=>{var z;if(!(!((z=window.electronAPI)!=null&&z.fastApply)||w)){_(!0);try{n!=null&&n.ready?await window.electronAPI.fastApply.unload():n!=null&&n.activeModel&&await window.electronAPI.fastApply.load(),await S()}catch(H){c(H instanceof Error?H.message:"Failed to toggle Fast Apply")}finally{_(!1)}}},j=(n==null?void 0:n.activeModel)&&!w,q=n==null?void 0:n.ready,U=u!==null&&m!==null;return h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:`p-4 rounded-xl border ${U?e?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200":q?e?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200":e?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:U?h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${e?"bg-blue-500/20":"bg-blue-100"}`,children:h.jsx(Z_,{size:20,className:"text-blue-500"})}),h.jsxs("div",{children:[h.jsxs("h4",{className:`font-medium ${e?"text-blue-400":"text-blue-700"}`,children:["Downloading ",m.variant,"..."]}),h.jsxs("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[Ev(m.downloaded)," / ",Ev(m.total)]})]})]}),h.jsx("button",{onClick:R,className:`text-xs px-3 py-1.5 rounded-lg transition-colors ${e?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:"Cancel"})]}),h.jsx("div",{className:`w-full h-2 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-blue-200"}`,children:h.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${m.percent}%`}})}),h.jsx("div",{className:"flex justify-end mt-2",children:h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[Mz(m.speed)," - ",Oz(m.eta)," remaining"]})})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${q?e?"bg-green-500/20":"bg-green-100":e?"bg-neutral-700":"bg-stone-200"}`,children:h.jsx(Yl,{size:20,className:q?"text-green-500":e?"text-neutral-400":"text-stone-400"})}),h.jsxs("div",{children:[h.jsx("h4",{className:`font-medium ${q?"text-green-500":e?"text-white":"text-stone-900"}`,children:q?"Ready":"Fast Apply"}),h.jsx("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:n!=null&&n.activeModel?q?`${n.activeModel} loaded`:`${n.activeModel} available`:"Download a model to enable"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:P,disabled:!j,className:`relative w-11 h-6 rounded-full transition-all duration-200 ${j?q?"bg-green-500":e?"bg-neutral-600 hover:bg-neutral-500":"bg-stone-300 hover:bg-stone-400":e?"bg-neutral-700 cursor-not-allowed":"bg-stone-200 cursor-not-allowed"}`,children:h.jsx("div",{className:`absolute top-0.5 w-5 h-5 rounded-full transition-all duration-200 flex items-center justify-center ${q?"left-[22px]":"left-0.5"} ${w?"bg-white/80":"bg-white shadow-sm"}`,children:w&&h.jsx(hs,{size:12,className:"animate-spin text-neutral-500"})})}),h.jsx("button",{onClick:S,className:`p-2 rounded-lg transition-colors ${e?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,children:h.jsx(p0,{size:16})})]})]})}),l&&h.jsx("div",{className:`p-3 rounded-lg ${e?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_0,{size:16}),h.jsx("span",{className:"text-sm",children:l})]})}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${e?"text-neutral-200":"text-stone-800"}`,children:"Available Models"}),h.jsx("div",{className:"space-y-2",children:(s||[]).map(z=>{const H=u===z.variant&&m;return h.jsx("div",{className:`p-4 rounded-xl border transition-colors ${H?e?"border-blue-500/50 bg-blue-500/10":"border-blue-300 bg-blue-50":(n==null?void 0:n.activeModel)===z.variant?e?"border-blue-500 bg-blue-500/10":"border-blue-500 bg-blue-50":e?"border-neutral-700 hover:border-neutral-600":"border-stone-200 hover:border-stone-300"}`,children:H?h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("span",{className:`font-medium ${e?"text-blue-400":"text-blue-700"}`,children:["Downloading ",z.variant,"..."]}),h.jsx("button",{onClick:R,className:`text-xs px-3 py-1 rounded-lg transition-colors ${e?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:"Cancel"})]}),h.jsx("div",{className:`w-full h-2 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-blue-200"}`,children:h.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${m.percent}%`}})}),h.jsxs("div",{className:"flex justify-between mt-2",children:[h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[Ev(m.downloaded)," / ",Ev(m.total)]}),h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[Mz(m.speed)," - ",Oz(m.eta)," remaining"]})]})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`font-medium ${e?"text-white":"text-stone-900"}`,children:z.variant}),z.downloaded&&h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-700"}`,children:"Downloaded"}),(n==null?void 0:n.activeModel)===z.variant&&h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-700"}`,children:"Active"})]}),h.jsx("p",{className:`text-xs mt-1 ${e?"text-neutral-400":"text-stone-500"}`,children:z.description}),h.jsxs("div",{className:`flex items-center gap-4 mt-2 text-xs ${e?"text-neutral-500":"text-stone-400"}`,children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(cx,{size:12}),z.size," MB"]}),h.jsxs("span",{children:["Quality: ",z.quality]}),h.jsxs("span",{children:["RAM: ~",z.memory," MB"]})]})]}),h.jsx("div",{className:"flex items-center gap-2 ml-4",children:z.downloaded?h.jsxs(h.Fragment,{children:[(n==null?void 0:n.activeModel)!==z.variant&&h.jsx("button",{onClick:()=>M(z.variant),className:`text-xs px-3 py-1.5 rounded-lg transition-colors ${e?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:"Select"}),h.jsx("button",{onClick:()=>O(z.variant),disabled:y===z.variant,className:`p-2 rounded-lg transition-colors ${e?"hover:bg-red-500/20 text-neutral-400 hover:text-red-400":"hover:bg-red-100 text-stone-400 hover:text-red-600"} ${y===z.variant?"opacity-50 cursor-not-allowed":""}`,children:y===z.variant?h.jsx(hs,{size:16,className:"animate-spin"}):h.jsx(Ff,{size:16})})]}):h.jsxs("button",{onClick:()=>k(z.variant),disabled:u!==null,className:`flex items-center gap-2 text-xs px-3 py-1.5 rounded-lg transition-colors ${u!==null?"opacity-50 cursor-not-allowed bg-neutral-800 text-neutral-500":e?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:[h.jsx(Z_,{size:14}),"Download"]})})]})},z.variant)})})]}),(n==null?void 0:n.storageDir)&&h.jsx("div",{className:`text-xs ${e?"text-neutral-500":"text-stone-400"}`,children:h.jsxs("p",{children:["Models stored in: ",n.storageDir]})})]})}function ZBe(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return`${(e/Math.pow(t,r)).toFixed(1)} ${n[r]}`}function JBe(e){return e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function XBe({isDarkMode:e,projectPath:t}){const[n,r]=x.useState([]),[s,o]=x.useState(!0),[i,a]=x.useState(null),[l,c]=x.useState(null),[u,f]=x.useState({}),[m,g]=x.useState(""),[y,v]=x.useState(""),[w,_]=x.useState("both"),[S,k]=x.useState(!1),[R,O]=x.useState(null),[M,P]=x.useState(null),[j,q]=x.useState(null),[U,z]=x.useState(null),[H,F]=x.useState([]),[W,X]=x.useState(!1),J=x.useRef(null),ee=(ge,Ce)=>{F(he=>[...he.slice(-49),{timestamp:new Date,type:ge,message:Ce}])};x.useEffect(()=>{var Ce,he;re(),ee("info","Code Index settings loaded");const ge=(he=(Ce=window.electronAPI)==null?void 0:Ce.mgrep)==null?void 0:he.onEvent(Fe=>{var Re,tt;console.log("[CodeIndexSettings] *** mgrep event received ***",Fe.type,Fe);const De=Fe.projectPath?Fe.projectPath.split("/").pop():"unknown";if(Fe.projectPath)switch(Fe.type){case"scanning-start":f(fe=>({...fe,[Fe.projectPath]:{phase:"scanning",current:0,total:0}}));break;case"scanning-complete":f(fe=>({...fe,[Fe.projectPath]:{phase:"scanning",current:Fe.filesFound||0,total:Fe.filesFound||0}}));break;case"indexing-start":f(fe=>({...fe,[Fe.projectPath]:{phase:"indexing",current:0,total:Fe.totalFiles||0}}));break;case"indexing-progress":f(fe=>({...fe,[Fe.projectPath]:{phase:"indexing",current:Fe.current||0,total:Fe.total||0,currentFile:Fe.currentFile}}));break;case"indexing-complete":case"error":f(fe=>{const nt={...fe};return delete nt[Fe.projectPath],nt});break}switch(Fe.type){case"ready":ee("success",`[${De}] Index ready`);break;case"scanning-start":ee("info",`[${De}] Scanning project files...`);break;case"scanning-complete":ee("info",`[${De}] Found ${Fe.filesFound||0} files to index`);break;case"indexing-start":ee("info",`[${De}] Indexing started (${Fe.totalFiles||0} files)`);break;case"indexing-progress":break;case"indexing-complete":ee("success",`[${De}] Indexing complete: ${Fe.totalChunks||Fe.chunksIndexed||0} chunks`);break;case"file-indexed":break;case"stats-updated":ee("success",`[${De}] Stats updated: ${((Re=Fe.stats)==null?void 0:Re.totalFiles)||0} files, ${((tt=Fe.stats)==null?void 0:tt.totalChunks)||0} chunks`);break;case"error":ee("error",`[${De}] Error: ${Fe.error}`);break;default:ee("event",`[${De}] ${Fe.type}`)}["ready","indexing-complete","indexing-start","scanning-complete","stats-updated"].includes(Fe.type)&&re()});return()=>{ge==null||ge()}},[t]),x.useEffect(()=>{J.current&&(J.current.scrollTop=J.current.scrollHeight)},[H]),x.useEffect(()=>{if(n.length>0&&!y){const ge=n.find(Ce=>Ce.ready);ge&&v(ge.projectPath)}},[n,y]);const re=async()=>{var ge;if(!((ge=window.electronAPI)!=null&&ge.mgrep)){a("Code Index is only available in the desktop app"),o(!1);return}try{o(!0),a(null);const Ce=await window.electronAPI.mgrep.getAllProjectsStatus();Ce.success&&Ce.projects&&r(Ce.projects)}catch(Ce){const he=Ce instanceof Error?Ce.message:"Failed to load status";a(he),ee("error",he)}finally{o(!1)}},ie=async ge=>{var Ce;if((Ce=window.electronAPI)!=null&&Ce.mgrep)try{c(ge),a(null),ee("info",`Initializing index for: ${ge.split("/").pop()}`);const he=await window.electronAPI.mgrep.initialize(ge);he.success?ee("success","Index initialized successfully"):(a(he.error||"Failed to initialize"),ee("error",he.error||"Failed to initialize")),await re()}catch(he){const Fe=he instanceof Error?he.message:"Failed to initialize";a(Fe),ee("error",Fe)}finally{c(null)}},Z=async ge=>{var Ce;if((Ce=window.electronAPI)!=null&&Ce.mgrep)try{c(ge),a(null),ee("info",`Clearing index for: ${ge.split("/").pop()}`);const he=await window.electronAPI.mgrep.clearIndex(ge);he.success?(ee("success","Index cleared"),O(null),P(null),q(null),z(null)):(a(he.error||"Failed to clear index"),ee("error",he.error||"Failed to clear")),await re()}catch(he){const Fe=he instanceof Error?he.message:"Failed to clear index";a(Fe),ee("error",Fe)}finally{c(null)}},te=async ge=>{var Ce;if((Ce=window.electronAPI)!=null&&Ce.mgrep)try{c(ge),a(null),ee("info",`Re-syncing index for: ${ge.split("/").pop()}`),window.electronAPI.mgrep.resync(ge).then(he=>{he.success||ee("error",he.error||"Resync failed"),re()}).catch(he=>{ee("error",he instanceof Error?he.message:"Resync failed")}),c(null)}catch(he){const Fe=he instanceof Error?he.message:"Failed to resync";a(Fe),ee("error",Fe),c(null)}},oe=async()=>{var ge,Ce,he;if(!(!m.trim()||!y))try{k(!0),O(null),P(null),q(null),z(null);const Fe=y.split("/").pop();if(ee("info",`Searching "${m}" in ${Fe} (${w})`),w==="both"){const[De,Re]=await Promise.all([(async()=>{var fe;if(!((fe=window.electronAPI)!=null&&fe.mgrep))return null;const tt=performance.now();try{const nt=await window.electronAPI.mgrep.search(m,{limit:5,projectPath:y}),ot=performance.now()-tt;return q(ot),nt.success&&nt.results?(O(nt.results),{success:!0,count:nt.results.length,time:ot}):{success:!1,error:nt.error}}catch(nt){return{success:!1,error:nt instanceof Error?nt.message:"Failed"}}})(),(async()=>{var fe,nt;if(!((nt=(fe=window.electronAPI)==null?void 0:fe.files)!=null&&nt.searchInFiles))return null;const tt=performance.now();try{const ot=await window.electronAPI.files.searchInFiles(m,y,{maxResults:5}),Ht=performance.now()-tt;return z(Ht),ot.success&&ot.data?(P(ot.data),{success:!0,count:ot.data.length,time:Ht}):{success:!1,error:ot.error}}catch(ot){return{success:!1,error:ot instanceof Error?ot.message:"Failed"}}})()]);if(De!=null&&De.success&&(Re!=null&&Re.success)){const tt=(Re.time/De.time).toFixed(2);ee("success",`Semantic: ${De.count} results (${De.time.toFixed(0)}ms) | Grep: ${Re.count} results (${Re.time.toFixed(0)}ms) | ${tt}x`)}}else if(w==="semantic"){if(!((ge=window.electronAPI)!=null&&ge.mgrep))return;const De=performance.now(),Re=await window.electronAPI.mgrep.search(m,{limit:5,projectPath:y}),tt=performance.now()-De;q(tt),Re.success&&Re.results?(O(Re.results),ee("success",`Found ${Re.results.length} semantic results (${tt.toFixed(0)}ms)`)):ee("error",Re.error||"Search failed")}else if(w==="grep"){if(!((he=(Ce=window.electronAPI)==null?void 0:Ce.files)!=null&&he.searchInFiles))return;const De=performance.now(),Re=await window.electronAPI.files.searchInFiles(m,y,{maxResults:5}),tt=performance.now()-De;z(tt),Re.success&&Re.data?(P(Re.data),ee("success",`Found ${Re.data.length} grep results (${tt.toFixed(0)}ms)`)):ee("error",Re.error||"Search failed")}}catch(Fe){const De=Fe instanceof Error?Fe.message:"Search failed";ee("error",De)}finally{k(!1)}};if(s)return h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(hs,{className:`animate-spin ${e?"text-neutral-400":"text-stone-500"}`,size:32})});const Q=n.filter(ge=>ge.ready),Te=t&&!n.find(ge=>ge.projectPath===t);return h.jsxs("div",{className:"space-y-6",children:[i&&h.jsx("div",{className:`p-3 rounded-lg ${e?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_0,{size:16}),h.jsx("span",{className:"text-sm",children:i})]})}),Q.length>0&&h.jsxs("div",{className:`p-4 rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("h4",{className:`text-sm font-medium mb-3 flex items-center gap-2 ${e?"text-neutral-200":"text-stone-800"}`,children:[h.jsx(Gf,{size:14,className:"text-blue-500"}),"Test Search"]}),h.jsx("div",{className:"flex gap-2 mb-3",children:["both","semantic","grep"].map(ge=>h.jsx("button",{onClick:()=>_(ge),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${w===ge?"bg-blue-500 text-white":e?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:ge==="both"?"Both":ge==="semantic"?"Cluso (AI)":"Grep"},ge))}),h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx("select",{value:y,onChange:ge=>v(ge.target.value),className:`px-3 py-2 rounded-lg border text-sm ${e?"bg-neutral-900 border-neutral-600 text-white":"bg-white border-stone-300 text-stone-900"}`,children:Q.map(ge=>h.jsx("option",{value:ge.projectPath,children:ge.projectPath.split("/").pop()},ge.projectPath))}),h.jsx("input",{type:"text",value:m,onChange:ge=>g(ge.target.value),onKeyDown:ge=>ge.key==="Enter"&&oe(),placeholder:w==="grep"?"Search with grep...":"Search by meaning...",className:`flex-1 px-3 py-2 rounded-lg border text-sm ${e?"bg-neutral-900 border-neutral-600 text-white placeholder-neutral-500":"bg-white border-stone-300 text-stone-900 placeholder-stone-400"}`}),h.jsx("button",{onClick:oe,disabled:S||!m.trim(),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${S||!m.trim()?"opacity-50 cursor-not-allowed bg-neutral-700 text-neutral-400":e?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:S?h.jsx(hs,{size:14,className:"animate-spin"}):h.jsx(Gf,{size:14})})]}),w==="both"&&(R||M)&&h.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:`text-xs font-medium ${e?"text-purple-400":"text-purple-600"}`,children:"Cluso (AI Semantic)"}),j&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-600"}`,children:[j.toFixed(0),"ms"]})]}),R&&R.length>0?h.jsx("div",{className:"space-y-2",children:R.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.filePath.split("/").pop(),":",ge.metadata.startLine]}),h.jsxs("span",{className:`px-2 py-0.5 rounded-full ${ge.similarity>.7?"bg-green-500/20 text-green-400":ge.similarity>.5?"bg-yellow-500/20 text-yellow-400":"bg-neutral-500/20 text-neutral-400"}`,children:[(ge.similarity*100).toFixed(0),"%"]})]}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,150),ge.content.length>150?"...":""]})]},Ce))}):h.jsx("p",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:"No semantic results"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:`text-xs font-medium ${e?"text-green-400":"text-green-600"}`,children:"Grep (Keyword)"}),U&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600"}`,children:[U.toFixed(0),"ms"]})]}),M&&M.length>0?h.jsx("div",{className:"space-y-2",children:M.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("div",{className:"mb-1",children:h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.file.split("/").pop(),":",ge.line]})}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,150),ge.content.length>150?"...":""]})]},Ce))}):h.jsx("p",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:"No grep results"})]})]}),w==="semantic"&&R&&h.jsxs("div",{className:"mt-3",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("span",{className:`text-xs font-medium ${e?"text-purple-400":"text-purple-600"}`,children:["Cluso (AI Semantic) - ",R.length," results"]}),j&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-600"}`,children:[j.toFixed(0),"ms"]})]}),R.length>0?h.jsx("div",{className:"space-y-2",children:R.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.filePath.split("/").pop(),":",ge.metadata.startLine]}),h.jsxs("span",{className:`px-2 py-0.5 rounded-full ${ge.similarity>.7?"bg-green-500/20 text-green-400":ge.similarity>.5?"bg-yellow-500/20 text-yellow-400":"bg-neutral-500/20 text-neutral-400"}`,children:[(ge.similarity*100).toFixed(0),"%"]})]}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,200),ge.content.length>200?"...":""]})]},Ce))}):h.jsx("p",{className:`text-sm ${e?"text-neutral-500":"text-stone-500"}`,children:"No results found"})]}),w==="grep"&&M&&h.jsxs("div",{className:"mt-3",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("span",{className:`text-xs font-medium ${e?"text-green-400":"text-green-600"}`,children:["Grep (Keyword) - ",M.length," results"]}),U&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600"}`,children:[U.toFixed(0),"ms"]})]}),M.length>0?h.jsx("div",{className:"space-y-2",children:M.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("div",{className:"mb-1",children:h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.file.split("/").pop(),":",ge.line]})}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,200),ge.content.length>200?"...":""]})]},Ce))}):h.jsx("p",{className:`text-sm ${e?"text-neutral-500":"text-stone-500"}`,children:"No results found"})]})]}),Te&&h.jsx("div",{className:`p-4 rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-500"}),h.jsxs("div",{children:[h.jsxs("div",{className:`text-sm font-medium ${e?"text-white":"text-stone-900"}`,children:[t==null?void 0:t.split("/").pop(),h.jsx("span",{className:`ml-2 text-xs px-1.5 py-0.5 rounded ${e?"bg-yellow-500/20 text-yellow-400":"bg-yellow-100 text-yellow-600"}`,children:"current"})]}),h.jsx("div",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:"Not indexed"})]})]}),h.jsxs("button",{onClick:()=>ie(t),disabled:l===t,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${l===t?"opacity-50 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white"}`,children:[l===t?h.jsx(hs,{size:12,className:"animate-spin"}):h.jsx(vN,{size:12}),"Initialize"]})]})}),n.length>0&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(cx,{size:16,className:e?"text-neutral-400":"text-stone-500"}),h.jsx("span",{className:`text-sm font-medium ${e?"text-neutral-200":"text-stone-800"}`,children:"Indexed Projects"}),h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,children:n.length})]}),h.jsx("button",{onClick:re,className:`p-1.5 rounded-lg transition-colors ${e?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Refresh",children:h.jsx(p0,{size:14})})]}),n.map(ge=>{var tt;const Ce=ge.projectPath.split("/").pop()||ge.projectPath,he=ge.projectPath===t,Fe=l===ge.projectPath,De=u[ge.projectPath],Re=!!De;return h.jsxs("div",{className:`p-4 rounded-xl border ${he?e?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200":e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${Re||ge.indexing?"bg-blue-500 animate-pulse":ge.ready?"bg-green-500":"bg-neutral-500"}`}),h.jsxs("div",{children:[h.jsxs("div",{className:`text-sm font-medium ${e?"text-white":"text-stone-900"}`,children:[Ce,he&&h.jsx("span",{className:`ml-2 text-xs px-1.5 py-0.5 rounded ${e?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-600"}`,children:"current"})]}),h.jsx("div",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:Re?De.phase==="scanning"?`Scanning... ${De.total>0?`${De.total} files found`:""}`:`Indexing ${De.current}/${De.total} files`:ge.indexing?"Indexing...":ge.ready?"Ready":ge.error||"Not initialized"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[(Re||ge.indexing)&&h.jsx(hs,{size:14,className:"text-blue-500 animate-spin"}),!ge.ready&&!ge.indexing&&h.jsxs("button",{onClick:()=>ie(ge.projectPath),disabled:Fe,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${Fe?"opacity-50 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white"}`,children:[Fe?h.jsx(hs,{size:12,className:"animate-spin"}):h.jsx(vN,{size:12}),"Initialize"]}),ge.ready&&h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:()=>te(ge.projectPath),disabled:Fe||ge.indexing||Re,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${Fe||ge.indexing||Re?"opacity-50 cursor-not-allowed":e?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:[h.jsx(p0,{size:12}),"Resync"]}),h.jsxs("button",{onClick:()=>Z(ge.projectPath),disabled:Fe||ge.indexing||Re,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${Fe||ge.indexing||Re?"opacity-50 cursor-not-allowed":e?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:[h.jsx(Ff,{size:12}),"Clear"]})]})]})]}),Re&&h.jsx("div",{className:"mb-3",children:De.phase==="scanning"?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`h-1.5 flex-1 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-stone-200"}`,children:h.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 animate-pulse",style:{width:"100%"}})}),h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:["Scanning",De.total>0?` (${De.total} files)`:"..."]})]}):De.total>0?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:((tt=De.currentFile)==null?void 0:tt.split("/").pop())||"Processing..."}),h.jsxs("span",{className:`text-xs font-mono ${e?"text-neutral-500":"text-stone-400"}`,children:[Math.round(De.current/De.total*100),"%"]})]}),h.jsx("div",{className:`h-1.5 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-stone-200"}`,children:h.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${Math.round(De.current/De.total*100)}%`}})})]}):h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(hs,{size:12,className:"text-blue-500 animate-spin"}),h.jsx("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:"Preparing..."})]})}),ge.stats&&!Re&&h.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(r1e,{size:12,className:e?"text-blue-400":"text-blue-600"}),h.jsxs("span",{className:e?"text-neutral-400":"text-stone-600",children:[ge.stats.totalFiles.toLocaleString()," files"]})]}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(m1e,{size:12,className:e?"text-purple-400":"text-purple-600"}),h.jsxs("span",{className:e?"text-neutral-400":"text-stone-600",children:[ge.stats.totalChunks.toLocaleString()," chunks"]})]}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(Xge,{size:12,className:e?"text-green-400":"text-green-600"}),h.jsx("span",{className:e?"text-neutral-400":"text-stone-600",children:ZBe(ge.stats.databaseSize)})]})]})]},ge.projectPath)})]}),n.length===0&&!Te&&h.jsx("div",{className:`p-4 rounded-xl border ${e?"bg-yellow-500/10 border-yellow-500/30":"bg-yellow-50 border-yellow-200"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_0,{size:16,className:"text-yellow-500"}),h.jsx("span",{className:`text-sm ${e?"text-yellow-400":"text-yellow-700"}`,children:"Open a project folder to enable code indexing"})]})}),h.jsxs("div",{className:`rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("button",{onClick:()=>X(!W),className:`w-full p-4 flex items-center justify-between ${e?"text-neutral-200":"text-stone-800"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(abe,{size:16,className:e?"text-neutral-400":"text-stone-500"}),h.jsx("span",{className:"text-sm font-medium",children:"Activity Log"}),h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,children:H.length})]}),W?h.jsx(yq,{size:16}):h.jsx($f,{size:16})]}),W&&h.jsx("div",{ref:J,className:`px-4 pb-4 max-h-48 overflow-y-auto font-mono text-xs space-y-1 ${e?"text-neutral-400":"text-stone-600"}`,children:H.length===0?h.jsx("p",{className:"text-center py-4 opacity-50",children:"No activity yet"}):H.map((ge,Ce)=>h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("span",{className:e?"text-neutral-600":"text-stone-400",children:["[",JBe(ge.timestamp),"]"]}),h.jsx("span",{className:ge.type==="success"?"text-green-500":ge.type==="error"?"text-red-500":ge.type==="event"?"text-purple-400":e?"text-neutral-300":"text-stone-700",children:ge.message})]},Ce))})]}),h.jsxs("div",{className:`p-4 rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsx("h4",{className:`text-sm font-medium mb-3 ${e?"text-neutral-200":"text-stone-800"}`,children:"Features"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(ud,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Local embeddings (no API costs)"})]}),h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(ud,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Real-time indexing on file changes"})]}),h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(ud,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Code-aware chunking (functions, classes)"})]}),h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(ud,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Hybrid search (semantic + keyword boost)"})]})]})]})]})}const q2={autoConnect:!0,sendAnalytics:!1,fontSize:"medium",showLineNumbers:!0,providers:[{id:"google",name:"Google AI (Gemini)",apiKey:"",enabled:!0},{id:"openai",name:"OpenAI",apiKey:"",enabled:!1},{id:"anthropic",name:"Anthropic",apiKey:"",enabled:!1}],models:[{id:"claude-sonnet-4-5",name:"Claude Sonnet 4.5",provider:"claude-code",enabled:!0},{id:"claude-opus-4-5",name:"Claude Opus 4.5",provider:"claude-code",enabled:!0},{id:"claude-haiku-4-5",name:"Claude Haiku 4.5",provider:"claude-code",enabled:!0},{id:"claude-3-5-sonnet",name:"Claude 3.5 Sonnet",provider:"anthropic",enabled:!1},{id:"claude-3-opus",name:"Claude 3 Opus",provider:"anthropic",enabled:!1},{id:"gpt-4o",name:"GPT-4o",provider:"openai",enabled:!1},{id:"gpt-4o-mini",name:"GPT-4o Mini",provider:"openai",enabled:!1},{id:"gpt-5.1",name:"GPT-5.1",provider:"codex",enabled:!1},{id:"gpt-5.1-mini",name:"GPT-5.1 Mini",provider:"codex",enabled:!1},{id:"gpt-5.1-nano",name:"GPT-5.1 Nano",provider:"codex",enabled:!1},{id:"gpt-5.1-codex",name:"GPT-5.1 Codex",provider:"codex",enabled:!1},{id:"gemini-3-pro-preview",name:"Gemini 3.0 Pro",provider:"google",enabled:!0},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",provider:"google",enabled:!0},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",provider:"google",enabled:!0},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash Lite",provider:"google",enabled:!0}],connections:[{id:"1",name:"Example SSE Server",type:"mcp",transport:{type:"sse",url:"http://localhost:3001"},enabled:!1}]},Dz=[{id:"general",label:"General",icon:h.jsx(Q_,{size:18})},{id:"display",label:"Display",icon:h.jsx(yN,{size:18})},{id:"providers",label:"Providers",icon:h.jsx(Eq,{size:18})},{id:"models",label:"Models",icon:h.jsx(f1,{size:18})},{id:"mcp",label:"MCP Servers",icon:h.jsx(Cq,{size:18})},{id:"lsp",label:"Language Servers",icon:h.jsx(dd,{size:18})},{id:"themes",label:"Themes",icon:h.jsx(uv,{size:18})},{id:"codeindex",label:"Code Index",icon:h.jsx(cx,{size:18})},{id:"pro",label:"Pro Features",icon:h.jsx(Yl,{size:18})}],Ate={small:"14px",medium:"16px",large:"18px"};function Uk(e,t){e=e.replace(/^#/,"");let n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return n=Math.min(255,Math.max(0,Math.round(n+n*t/100))),r=Math.min(255,Math.max(0,Math.round(r+r*t/100))),s=Math.min(255,Math.max(0,Math.round(s+s*t/100))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}function QBe({isOpen:e,onClose:t,isDarkMode:n,onToggleDarkMode:r,settings:s,onSettingsChange:o,projectPath:i}){var Do;const[a,l]=x.useState("general"),[c,u]=x.useState({}),{currentTheme:f,setTheme:m,themes:g}=dR(),[y,v]=x.useState(!1),[w,_]=x.useState(null),[S,k]=x.useState(null),[R,O]=x.useState(""),[M,P]=x.useState({authenticated:!1,expiresAt:null}),[j,q]=x.useState(null),[U,z]=x.useState(!1),[H,F]=x.useState({authenticated:!1,expiresAt:null}),[W,X]=x.useState(!1),[J,ee]=x.useState(null),[re,ie]=x.useState(!1),[Z,te]=x.useState("idle"),[oe,Q]=x.useState(null),[Te,ge]=x.useState(null),[Ce,he]=x.useState(null),[Fe,De]=x.useState(""),[Re,tt]=x.useState({}),[fe,nt]=x.useState(!1),[ot,Ht]=x.useState(new Set),[qt,Pt]=x.useState([]),[tn,xt]=x.useState(!1),[pe,Ne]=x.useState(new Set),[$e,Je]=x.useState(null);x.useEffect(()=>{var at,rt,pt,Vt,Ur,As;e&&((at=window.electronAPI)!=null&&at.oauth)&&window.electronAPI.oauth.getStatus().then(Zn=>{P(Zn),Zn.authenticated!==s.claudeCodeAuthenticated&&o({...s,claudeCodeAuthenticated:Zn.authenticated,claudeCodeExpiresAt:Zn.expiresAt,models:s.models.map(Hr=>Hr.provider==="claude-code"?{...Hr,enabled:Zn.authenticated}:Hr)})}),e&&((rt=window.electronAPI)!=null&&rt.codex)&&window.electronAPI.codex.getStatus().then(Zn=>{F(Zn),Zn.authenticated!==s.codexAuthenticated&&o({...s,codexAuthenticated:Zn.authenticated,codexExpiresAt:Zn.expiresAt,models:s.models.map(Hr=>Hr.provider==="codex"?{...Hr,enabled:Zn.authenticated}:Hr)})}),e&&((Vt=(pt=window.electronAPI)==null?void 0:pt.mcp)!=null&&Vt.discover)&&Le(),e&&((As=(Ur=window.electronAPI)==null?void 0:Ur.lsp)!=null&&As.getStatus)&&(Ve(),L())},[e]),x.useEffect(()=>{var rt,pt,Vt,Ur,As;if(!e)return;if(!((rt=window.electronAPI)!=null&&rt.updates)){De(Fe||"web");return}(Vt=(pt=window.electronAPI.updates).getVersion)==null||Vt.call(pt).then(Zn=>{Zn!=null&&Zn.version&&De(Zn.version)}).catch(()=>{});const at=(As=(Ur=window.electronAPI.updates).onEvent)==null?void 0:As.call(Ur,Zn=>{var Hr;if(Zn!=null&&Zn.type)switch(he(null),Zn.type){case"checking":te("checking"),ge(null);break;case"available":te("available"),Q(Zn.info||null),ge(null);break;case"none":te("idle"),Q(null),ge(null);break;case"progress":te("downloading"),ge(typeof((Hr=Zn==null?void 0:Zn.progress)==null?void 0:Hr.percent)=="number"?Zn.progress.percent:null);break;case"ready":te("ready"),Q(Zn.info||oe),ge(null);break;case"error":te("error"),he(Zn.message||"Update error");break}});return()=>{at==null||at()}},[Fe,e,oe]);const Le=async()=>{var at,rt,pt,Vt;if((rt=(at=window.electronAPI)==null?void 0:at.mcp)!=null&&rt.discover){nt(!0);try{let Ur;if((Vt=(pt=window.electronAPI)==null?void 0:pt.files)!=null&&Vt.getCwd)try{const Zn=await window.electronAPI.files.getCwd();Zn!=null&&Zn.path&&(Ur=Zn.path)}catch{}const As=await window.electronAPI.mcp.discover(Ur);As.success&&As.discovered&&(tt(As.discovered),console.log("Discovered MCP servers:",As.discovered))}catch(Ur){console.error("Failed to discover MCP servers:",Ur)}finally{nt(!1)}}},Ve=async()=>{var at,rt;if((rt=(at=window.electronAPI)==null?void 0:at.lsp)!=null&&rt.getStatus){xt(!0);try{const pt=await window.electronAPI.lsp.getStatus();pt.success&&pt.data&&Pt(pt.data)}catch(pt){console.error("Failed to load LSP status:",pt)}finally{xt(!1)}}},_e=async(at,rt)=>{var pt,Vt;if((Vt=(pt=window.electronAPI)==null?void 0:pt.lsp)!=null&&Vt.setServerEnabled)try{await window.electronAPI.lsp.setServerEnabled(at,rt),Ve()}catch(Ur){console.error("Failed to toggle LSP server:",Ur)}},Y=async at=>{var rt,pt;if((pt=(rt=window.electronAPI)==null?void 0:rt.lsp)!=null&&pt.installServer){Ne(Vt=>new Set([...Vt,at]));try{const Vt=await window.electronAPI.lsp.installServer(at);Vt.success?(await Ve(),await L()):console.error("Failed to install LSP server:",Vt.error)}catch(Vt){console.error("Failed to install LSP server:",Vt)}finally{Ne(Vt=>{const Ur=new Set(Vt);return Ur.delete(at),Ur})}}},L=async()=>{var at,rt;if((rt=(at=window.electronAPI)==null?void 0:at.lsp)!=null&&rt.getCacheInfo)try{const pt=await window.electronAPI.lsp.getCacheInfo();pt.success&&pt.data&&Je({cacheSize:pt.data.cacheSize,cacheDir:pt.data.cacheDir})}catch(pt){console.error("Failed to load LSP cache info:",pt)}},B=async()=>{var at,rt;if((rt=(at=window.electronAPI)==null?void 0:at.lsp)!=null&&rt.clearCache)try{(await window.electronAPI.lsp.clearCache()).success&&(await L(),await Ve())}catch(pt){console.error("Failed to clear LSP cache:",pt)}},ce=async()=>{var rt,pt;if(!((pt=(rt=window.electronAPI)==null?void 0:rt.updates)!=null&&pt.check)){he("Updates are available only in the desktop app"),te("error");return}he(null),ge(null),te("checking");const at=await window.electronAPI.updates.check();(at==null?void 0:at.success)===!1&&(te("error"),he(at.error||"Failed to check for updates"))},we=async()=>{var rt,pt;if(!((pt=(rt=window.electronAPI)==null?void 0:rt.updates)!=null&&pt.download)){he("Updates are available only in the desktop app"),te("error");return}he(null),te("downloading"),ge(null);const at=await window.electronAPI.updates.download();(at==null?void 0:at.success)===!1&&(te("error"),he(at.error||"Failed to download update"))},ze=async()=>{var at,rt;if(!((rt=(at=window.electronAPI)==null?void 0:at.updates)!=null&&rt.install)){he("Updates are available only in the desktop app"),te("error");return}he(null),await window.electronAPI.updates.install()},Be=at=>{Ht(rt=>{const pt=new Set(rt);return pt.has(at)?pt.delete(at):pt.add(at),pt})};if(!e)return null;const ut=at=>{o({...s,...at})},ln=at=>{u(rt=>({...rt,[at]:!rt[at]}))},jt=(at,rt)=>{ut({providers:s.providers.map(pt=>pt.id===at?{...pt,apiKey:rt,verified:!1}:pt)})},fn=at=>{ut({providers:s.providers.map(rt=>rt.id===at?{...rt,enabled:!rt.enabled}:rt)})},an=async at=>{const rt=s.providers.find(pt=>pt.id===at);if(rt!=null&&rt.apiKey){ut({providers:s.providers.map(pt=>pt.id===at?{...pt,verifying:!0,verified:!1}:pt)});try{let pt=!1;at==="google"?pt=(await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${rt.apiKey}`)).ok:at==="openai"?pt=(await fetch("https://api.openai.com/v1/models",{headers:{Authorization:`Bearer ${rt.apiKey}`}})).ok:at==="anthropic"&&(pt=rt.apiKey.startsWith("sk-ant-")),ut({providers:s.providers.map(Vt=>Vt.id===at?{...Vt,verifying:!1,verified:pt}:Vt)})}catch{ut({providers:s.providers.map(pt=>pt.id===at?{...pt,verifying:!1,verified:!1}:pt)})}}},Wa=async(at,rt)=>{var pt;if(!((pt=window.electronAPI)!=null&&pt.oauth)){_("OAuth is only available in the desktop app");return}v(!0),_(null);try{const Vt=await window.electronAPI.oauth.startLogin(at);if(Vt.success)if(Vt.autoCompleted){if(Vt.mode==="api-key"&&Vt.apiKey)ut({providers:s.providers.map(Ur=>Ur.id==="anthropic"?{...Ur,apiKey:Vt.apiKey,verified:!0,enabled:!0}:Ur)});else if(Vt.mode==="oauth"){const Ur=await window.electronAPI.oauth.getStatus();P(Ur),ut({claudeCodeAuthenticated:!0,claudeCodeExpiresAt:Ur.expiresAt,models:s.models.map(As=>As.provider==="claude-code"?{...As,enabled:!0}:As)})}k(null),O("")}else k({mode:at,createKey:rt}),O("");else _(Vt.error||"Failed to start OAuth flow")}catch(Vt){_(Vt instanceof Error?Vt.message:"Unknown error")}finally{v(!1)}},An=async()=>{var at;if(!(!((at=window.electronAPI)!=null&&at.oauth)||!S)){v(!0),_(null);try{const rt=await window.electronAPI.oauth.completeLogin(R,S.createKey);if(rt.success){if(rt.mode==="api-key"&&rt.apiKey)ut({providers:s.providers.map(pt=>pt.id==="anthropic"?{...pt,apiKey:rt.apiKey,verified:!0,enabled:!0}:pt)});else if(rt.mode==="oauth"){const pt=await window.electronAPI.oauth.getStatus();P(pt),ut({claudeCodeAuthenticated:!0,claudeCodeExpiresAt:pt.expiresAt,models:s.models.map(Vt=>Vt.provider==="claude-code"?{...Vt,enabled:!0}:Vt)})}k(null),O("")}else _(rt.error||"Failed to complete OAuth flow")}catch(rt){_(rt instanceof Error?rt.message:"Unknown error")}finally{v(!1)}}},er=async()=>{var at;(at=window.electronAPI)!=null&&at.oauth&&await window.electronAPI.oauth.cancel(),k(null),O(""),_(null)},wt=async()=>{var at;if((at=window.electronAPI)!=null&&at.oauth)try{await window.electronAPI.oauth.logout(),P({authenticated:!1,expiresAt:null}),ut({claudeCodeAuthenticated:!1,claudeCodeExpiresAt:null,models:s.models.map(rt=>rt.provider==="claude-code"?{...rt,enabled:!1}:rt)})}catch(rt){_(rt instanceof Error?rt.message:"Unknown error")}},on=async()=>{var at,rt;if((rt=(at=window.electronAPI)==null?void 0:at.oauth)!=null&&rt.testApi){z(!0),q(null);try{const pt=await window.electronAPI.oauth.testApi();pt.success?(q({success:!0,message:"API call succeeded!"}),Kr.general.log("API Test Response:",pt.response)):(q({success:!1,message:pt.error||"API call failed"}),Kr.general.log("API Test Error:",pt.error))}catch(pt){q({success:!1,message:pt instanceof Error?pt.message:"Unknown error"})}finally{z(!1)}}},ye=async()=>{var at;if(!((at=window.electronAPI)!=null&&at.codex)){_("Codex OAuth is only available in the desktop app");return}X(!0),_(null);try{const rt=await window.electronAPI.codex.startLogin();if(rt.success){if(rt.autoCompleted){const pt=await window.electronAPI.codex.getStatus();F(pt),ut({codexAuthenticated:!0,codexExpiresAt:pt.expiresAt,models:s.models.map(Vt=>Vt.provider==="codex"?{...Vt,enabled:!0}:Vt)})}}else _(rt.error||"Failed to start Codex OAuth flow")}catch(rt){_(rt instanceof Error?rt.message:"Unknown error")}finally{X(!1)}},Ue=async()=>{var at;if((at=window.electronAPI)!=null&&at.codex)try{await window.electronAPI.codex.logout(),F({authenticated:!1,expiresAt:null}),ut({codexAuthenticated:!1,codexExpiresAt:null,models:s.models.map(rt=>rt.provider==="codex"?{...rt,enabled:!1}:rt)})}catch(rt){_(rt instanceof Error?rt.message:"Unknown error")}},ht=async()=>{var at,rt;if((rt=(at=window.electronAPI)==null?void 0:at.codex)!=null&&rt.testApi){ie(!0),ee(null);try{const pt=await window.electronAPI.codex.testApi();pt.success?(ee({success:!0,message:"Codex API call succeeded!"}),Kr.general.log("Codex API Test Response:",pt.response)):(ee({success:!1,message:pt.error||"Codex API call failed"}),Kr.general.log("Codex API Test Error:",pt.error))}catch(pt){ee({success:!1,message:pt instanceof Error?pt.message:"Unknown error"})}finally{ie(!1)}}},Jt=at=>{ut({models:s.models.map(rt=>rt.id===at?{...rt,enabled:!rt.enabled}:rt)})},mr=at=>{ut({connections:s.connections.map(rt=>rt.id===at?{...rt,enabled:!rt.enabled}:rt)})},Kn=at=>{ut({connections:s.connections.filter(rt=>rt.id!==at)})},Rt=at=>{if(at==="claude-code")return"Claude Code (OAuth)";if(at==="codex")return"Codex (ChatGPT Plus/Pro)";const rt=s.providers.find(pt=>pt.id===at);return(rt==null?void 0:rt.name)||at},zt=at=>{const rt=s.providers.find(pt=>pt.id===at);return(rt==null?void 0:rt.enabled)&&!!(rt!=null&&rt.apiKey)},hn=()=>{var at,rt,pt,Vt,Ur,As,Zn,Hr,ua;switch(a){case"general":return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Startup"}),h.jsxs("label",{className:"flex items-center justify-between py-2",children:[h.jsx("span",{className:`text-sm ${n?"text-neutral-300":"text-stone-600"}`,children:"Auto-connect on launch"}),h.jsx("button",{onClick:()=>ut({autoConnect:!s.autoConnect}),className:`w-10 h-6 rounded-full transition-colors relative ${s.autoConnect?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${s.autoConnect?"left-5":"left-1"}`})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Updates"}),h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{children:[h.jsxs("p",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:["Current version: ",Fe||"unknown"]}),h.jsxs("p",{className:`text-xs mt-1 ${n?"text-neutral-500":"text-stone-500"}`,children:[Z==="available"&&h.jsxs(h.Fragment,{children:["Update available",oe!=null&&oe.version?` (${oe.version})`:""]}),Z==="checking"&&"Checking for updates...",Z==="downloading"&&"Downloading update...",Z==="ready"&&"Update downloaded. Restart to install.",Z==="idle"&&"Manual checks only. No auto-downloads.",Z==="error"&&(Ce||"Update error"),!((at=window.electronAPI)!=null&&at.updates)&&"Updates are only available in the desktop app."]})]}),Z==="downloading"&&h.jsx("div",{className:`text-xs px-2 py-1 rounded ${n?"bg-blue-500/20 text-blue-200":"bg-blue-50 text-blue-600"}`,children:`${Math.round(Te||0)}%`}),Z==="available"&&(oe==null?void 0:oe.version)&&h.jsx("div",{className:`text-xs px-2 py-1 rounded ${n?"bg-emerald-500/20 text-emerald-200":"bg-emerald-50 text-emerald-700"}`,children:`v${oe.version}`}),Z==="ready"&&h.jsx("div",{className:`text-xs px-2 py-1 rounded ${n?"bg-emerald-500/20 text-emerald-200":"bg-emerald-50 text-emerald-700"}`,children:"Downloaded"})]}),h.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[h.jsxs("button",{onClick:ce,disabled:Z==="checking"||Z==="downloading"||!((rt=window.electronAPI)!=null&&rt.updates),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Z==="checking"||Z==="downloading"||!((pt=window.electronAPI)!=null&&pt.updates)?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[Z==="checking"?h.jsx(hs,{size:14,className:"animate-spin"}):h.jsx(p0,{size:14}),"Check for updates"]}),h.jsxs("button",{onClick:we,disabled:Z!=="available"&&Z!=="downloading"||!((Vt=window.electronAPI)!=null&&Vt.updates),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Z!=="available"&&Z!=="downloading"||!((Ur=window.electronAPI)!=null&&Ur.updates)?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:[Z==="downloading"?h.jsx(hs,{size:14,className:"animate-spin"}):h.jsx(Z_,{size:14}),Z==="downloading"&&typeof Te=="number"?`Downloading (${Math.round(Te)}%)`:"Download update"]}),h.jsxs("button",{onClick:ze,disabled:Z!=="ready"||!((As=window.electronAPI)!=null&&As.updates),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Z!=="ready"||!((Zn=window.electronAPI)!=null&&Zn.updates)?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20":"bg-purple-50 text-purple-600 hover:bg-purple-100"}`,children:[h.jsx(cx,{size:14}),"Restart to install"]})]}),Ce&&h.jsx("p",{className:`text-xs mt-2 ${n?"text-red-400":"text-red-600"}`,children:Ce})]})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Privacy"}),h.jsxs("label",{className:"flex items-center justify-between py-2",children:[h.jsxs("div",{children:[h.jsx("span",{className:`text-sm ${n?"text-neutral-300":"text-stone-600"}`,children:"Send anonymous usage data"}),h.jsx("p",{className:`text-xs mt-0.5 ${n?"text-neutral-500":"text-stone-400"}`,children:"Help improve Cluso by sharing anonymous analytics"})]}),h.jsx("button",{onClick:()=>ut({sendAnalytics:!s.sendAnalytics}),className:`w-10 h-6 rounded-full transition-colors relative flex-shrink-0 ml-4 ${s.sendAnalytics?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${s.sendAnalytics?"left-5":"left-1"}`})})]})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Data"}),h.jsx("button",{className:`text-sm px-3 py-2 rounded-lg transition-colors ${n?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:"Clear all local data"})]})]});case"display":return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Theme"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:()=>n&&r(),className:`flex-1 flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${n?"border-neutral-700 hover:border-neutral-600":"border-blue-500 bg-blue-50 ring-2 ring-blue-500/20"}`,children:[h.jsx(Iq,{size:24,className:n?"text-neutral-400":"text-blue-500"}),h.jsx("span",{className:`text-sm font-medium ${n?"text-neutral-400":"text-blue-600"}`,children:"Light"})]}),h.jsxs("button",{onClick:()=>!n&&r(),className:`flex-1 flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${n?"border-blue-500 bg-blue-500/10 ring-2 ring-blue-500/20":"border-stone-200 hover:border-stone-300"}`,children:[h.jsx(Tq,{size:24,className:n?"text-blue-400":"text-stone-400"}),h.jsx("span",{className:`text-sm font-medium ${n?"text-blue-400":"text-stone-400"}`,children:"Dark"})]})]})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Font Size"}),h.jsx("div",{className:"flex gap-2",children:["small","medium","large"].map(kt=>h.jsx("button",{onClick:()=>ut({fontSize:kt}),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${s.fontSize===kt?"bg-blue-500 text-white":n?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,style:{fontSize:Ate[kt]},children:kt.charAt(0).toUpperCase()+kt.slice(1)},kt))}),h.jsx("p",{className:`text-xs mt-2 ${n?"text-neutral-500":"text-stone-400"}`,children:"Affects chat messages and code blocks"})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Code Editor"}),h.jsxs("label",{className:"flex items-center justify-between py-2",children:[h.jsx("span",{className:`text-sm ${n?"text-neutral-300":"text-stone-600"}`,children:"Show line numbers"}),h.jsx("button",{onClick:()=>ut({showLineNumbers:!s.showLineNumbers}),className:`w-10 h-6 rounded-full transition-colors relative ${s.showLineNumbers?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${s.showLineNumbers?"left-5":"left-1"}`})})]})]})]});case"providers":return h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:`text-sm ${n?"text-neutral-400":"text-stone-500"}`,children:"Configure API providers for AI models. Add your API keys to enable different providers."}),w&&h.jsx("div",{className:`p-3 rounded-lg ${n?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(mN,{size:16}),h.jsx("span",{className:"text-sm",children:w}),h.jsx("button",{onClick:()=>_(null),className:"ml-auto",children:h.jsx(qr,{size:14})})]})}),S&&h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-blue-500/30 bg-blue-500/10":"border-blue-200 bg-blue-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(tL,{size:16,className:n?"text-blue-400":"text-blue-600"}),h.jsx("span",{className:`text-sm font-medium ${n?"text-blue-300":"text-blue-700"}`,children:"Enter OAuth Code"})]}),h.jsx("p",{className:`text-xs mb-3 ${n?"text-blue-400":"text-blue-600"}`,children:"A browser window opened. After authorizing, copy the code and paste it here."}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:R,onChange:kt=>O(kt.target.value),placeholder:"Paste authorization code...",className:`flex-1 px-3 py-2 rounded-lg text-sm ${n?"bg-neutral-700 border-neutral-600 text-neutral-200 placeholder-neutral-500":"bg-white border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`}),h.jsxs("button",{onClick:An,disabled:!R||y,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${R?n?"bg-purple-500 text-white hover:bg-purple-600":"bg-purple-600 text-white hover:bg-purple-700":n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed"}`,children:[y?h.jsx(hs,{size:14,className:"animate-spin"}):h.jsx(Cs,{size:14}),"Complete"]}),h.jsx("button",{onClick:er,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,children:"Cancel"})]})]}),h.jsx("div",{className:"space-y-3",children:s.providers.map(kt=>{var Fn;return h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${kt.enabled&&kt.apiKey?"bg-green-500/10 text-green-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(Eq,{size:16})}),h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:kt.name}),kt.verified&&h.jsx(ud,{size:16,className:"text-green-500"})]}),h.jsx("button",{onClick:()=>fn(kt.id),className:`w-10 h-6 rounded-full transition-colors relative ${kt.enabled?"bg-green-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${kt.enabled?"left-5":"left-1"}`})})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"flex-1 relative",children:[h.jsx("input",{type:c[kt.id]?"text":"password",value:kt.apiKey,onChange:mt=>jt(kt.id,mt.target.value),placeholder:"Enter API key...",className:`w-full px-3 py-2 pr-10 rounded-lg text-sm ${n?"bg-neutral-700 border-neutral-600 text-neutral-200 placeholder-neutral-500":"bg-white border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-blue-500/50`}),h.jsx("button",{onClick:()=>ln(kt.id),className:`absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded ${n?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,children:c[kt.id]?h.jsx(_q,{size:16}):h.jsx(hR,{size:16})})]}),h.jsxs("button",{onClick:()=>an(kt.id),disabled:!kt.apiKey||kt.verifying,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${kt.apiKey?kt.verified?"bg-green-500/10 text-green-500":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100":n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed"}`,children:[kt.verifying?h.jsx(hs,{size:14,className:"animate-spin"}):kt.verified?h.jsx(ud,{size:14}):h.jsx(Cs,{size:14}),kt.verifying?"Verifying":kt.verified?"Verified":"Verify"]})]}),kt.id==="anthropic"&&((Fn=window.electronAPI)==null?void 0:Fn.oauth)&&h.jsxs("div",{className:`mt-3 pt-3 border-t ${n?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("button",{onClick:()=>Wa("console",!0),disabled:y||!!S,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${y||S?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-orange-500/10 text-orange-400 hover:bg-orange-500/20":"bg-orange-50 text-orange-600 hover:bg-orange-100"}`,children:[y?h.jsx(hs,{size:14,className:"animate-spin"}):h.jsx(tL,{size:14}),"Get API Key via OAuth"]}),h.jsx("p",{className:`text-xs mt-1.5 ${n?"text-neutral-500":"text-stone-400"}`,children:"Use your Anthropic Console account to create an API key"})]})]},kt.id)})}),((Hr=window.electronAPI)==null?void 0:Hr.oauth)&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"} my-4`}),h.jsxs("div",{className:`p-4 rounded-xl border ${M.authenticated?n?"border-blue-500/30 bg-blue-500/10":"border-blue-200 bg-blue-50":n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${M.authenticated?"bg-blue-500/20 text-blue-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(mR,{size:16})}),h.jsxs("div",{children:[h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"Claude Code"}),h.jsx("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:"Use Claude with your Pro/Max subscription"})]})]}),M.authenticated&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ud,{size:16,className:"text-blue-500"}),h.jsx("span",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:"Connected"})]})]}),M.authenticated?h.jsxs("div",{className:"space-y-3",children:[M.expiresAt&&h.jsxs("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:["Token expires: ",new Date(M.expiresAt).toLocaleString()]}),h.jsxs("button",{onClick:on,disabled:U,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${U?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[U?h.jsx(hs,{size:14,className:"animate-spin"}):h.jsx(Cs,{size:14}),"Test API Call (Direct)"]}),j&&h.jsx("p",{className:`text-xs ${j.success?n?"text-green-400":"text-green-600":n?"text-red-400":"text-red-600"}`,children:j.message}),h.jsxs("button",{onClick:wt,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:[h.jsx(rL,{size:14}),"Disconnect"]})]}):h.jsxs("button",{onClick:()=>Wa("max",!1),disabled:y||!!S,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${y||S?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-purple-500 text-white hover:bg-purple-600":"bg-purple-600 text-white hover:bg-purple-700"}`,children:[y?h.jsx(hs,{size:14,className:"animate-spin"}):h.jsx(nL,{size:14}),"Login with Claude Pro/Max"]})]})]}),((ua=window.electronAPI)==null?void 0:ua.codex)&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"} my-4`}),h.jsxs("div",{className:`p-4 rounded-xl border ${H.authenticated?n?"border-blue-500/30 bg-blue-500/10":"border-blue-200 bg-blue-50":n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${H.authenticated?"bg-blue-500/20 text-blue-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(Yl,{size:16})}),h.jsxs("div",{children:[h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"Codex"}),h.jsx("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:"Use ChatGPT with your Plus/Pro subscription"})]})]}),H.authenticated&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ud,{size:16,className:"text-blue-500"}),h.jsx("span",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:"Connected"})]})]}),H.authenticated?h.jsxs("div",{className:"space-y-3",children:[H.expiresAt&&h.jsxs("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:["Token expires: ",new Date(H.expiresAt).toLocaleString()]}),h.jsxs("button",{onClick:ht,disabled:re,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${re?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[re?h.jsx(hs,{size:14,className:"animate-spin"}):h.jsx(Cs,{size:14}),"Test API Call (Direct)"]}),J&&h.jsx("p",{className:`text-xs ${J.success?n?"text-green-400":"text-green-600":n?"text-red-400":"text-red-600"}`,children:J.message}),h.jsxs("button",{onClick:Ue,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:[h.jsx(rL,{size:14}),"Disconnect"]})]}):h.jsxs("button",{onClick:ye,disabled:W,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${W?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-emerald-600 text-white hover:bg-emerald-700"}`,children:[W?h.jsx(hs,{size:14,className:"animate-spin"}):h.jsx(nL,{size:14}),"Login with ChatGPT Plus/Pro"]})]})]})]});case"models":return h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:`text-sm ${n?"text-neutral-400":"text-stone-500"}`,children:"Select which models are available in the model picker. Models require their provider to be configured."}),["google","openai","anthropic","claude-code","codex"].map(kt=>{const Fn=s.models.filter(Qr=>Qr.provider===kt);if(Fn.length===0)return null;const mt=kt==="claude-code"?M.authenticated:kt==="codex"?H.authenticated:zt(kt);return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("h4",{className:`text-sm font-medium ${n?"text-neutral-300":"text-stone-700"}`,children:Rt(kt)}),!mt&&h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${n?"bg-yellow-500/10 text-yellow-400":"bg-yellow-50 text-yellow-600"}`,children:kt==="claude-code"||kt==="codex"?"Login with OAuth first":"Configure API key first"})]}),h.jsx("div",{className:"space-y-1",children:Fn.map(Qr=>h.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"} ${mt?"":"opacity-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${Qr.enabled&&mt?"bg-blue-500/10 text-blue-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(f1,{size:16})}),h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:Qr.name})]}),h.jsx("button",{onClick:()=>Jt(Qr.id),disabled:!mt,className:`w-10 h-6 rounded-full transition-colors relative ${Qr.enabled&&mt?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"} ${mt?"":"cursor-not-allowed"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${Qr.enabled&&mt?"left-5":"left-1"}`})})]},Qr.id))})]},kt)})]});case"mcp":return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"MCP Servers"}),h.jsx("p",{className:`text-xs mt-0.5 ${n?"text-neutral-500":"text-stone-400"}`,children:"Connect to Model Context Protocol servers for extended AI capabilities"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{onClick:Le,disabled:fe,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${n?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-100 text-stone-600 hover:bg-stone-200"} ${fe?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx(p0,{size:14,className:fe?"animate-spin":""}),fe?"Discovering...":"Refresh"]}),h.jsxs("button",{onClick:()=>{const Fn={id:`mcp_${Date.now()}`,name:"New MCP Server",type:"mcp",transport:{type:"stdio",command:"npx",args:["-y","@your/mcp-server"]},enabled:!1,status:"disconnected"};ut({connections:[...s.connections,Fn]})},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${n?"bg-purple-500/10 text-purple-400 hover:bg-purple-500/20":"bg-purple-50 text-purple-600 hover:bg-purple-100"}`,children:[h.jsx(qf,{size:14}),"Add Server"]})]})]}),Object.keys(Re).length>0&&h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("p",{className:`text-sm font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:["Discovered Servers (",Object.keys(Re).length,")"]})}),Object.entries(Re).map(([kt,Fn])=>{var rr;const mt=Fn.name,Qr=!ot.has(mt),Po=Fn.config.type==="stdio";return h.jsx("div",{className:`p-4 rounded-xl border transition-opacity ${Qr?n?"border-blue-500/30 bg-blue-500/5":"border-blue-200 bg-blue-50/50":n?"border-neutral-700 bg-neutral-800/30 opacity-60":"border-stone-200 bg-stone-50 opacity-60"}`,children:h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:mt}),h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold uppercase tracking-wide ${n?"bg-neutral-700 text-neutral-300":"bg-stone-200 text-stone-600"}`,children:Fn.source}),h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Po?n?"bg-blue-500/10 text-blue-400":"bg-blue-50 text-blue-600":n?"bg-orange-500/10 text-orange-400":"bg-orange-50 text-orange-600"}`,children:Po?"STDIO":"SSE"})]}),h.jsx("p",{className:`mt-1 text-xs truncate ${n?"text-neutral-500":"text-stone-400"}`,children:Po?`${Fn.config.command}${(rr=Fn.config.args)!=null&&rr.length?` ${Fn.config.args.join(" ")}`:""}`:Fn.config.url}),Fn.tools&&Fn.tools.length>0&&h.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[Fn.tools.slice(0,5).map(ft=>h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,title:ft.description,children:ft.displayName},ft.name)),Fn.tools.length>5&&h.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,children:["+",Fn.tools.length-5," more"]})]}),Fn.error&&h.jsx("p",{className:`mt-1 text-xs ${n?"text-red-400":"text-red-600"}`,children:Fn.error})]}),h.jsx("button",{onClick:()=>Be(mt),className:`relative w-10 h-5 rounded-full transition-colors ${Qr?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${Qr?"left-5":"left-0.5"}`})})]})},kt)})]}),s.connections.filter(kt=>kt.type==="mcp").length>0&&h.jsxs("p",{className:`text-sm font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:["Configured Servers (",s.connections.filter(kt=>kt.type==="mcp").length,")"]}),h.jsxs("div",{className:"space-y-3",children:[s.connections.filter(kt=>kt.type==="mcp").map(kt=>{var rr,ft;const Fn=kt;let mt;if(!("transport"in kt)&&Fn.url)mt={...kt,type:"mcp",transport:{type:"sse",url:Fn.url}};else if("transport"in kt)mt=kt;else return null;const Qr=mt.transport.type==="stdio",Po=mt.status==="connected"?"green":mt.status==="connecting"?"yellow":mt.status==="error"?"red":"neutral";return h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${mt.status==="connected"?"bg-green-500/10 text-green-500":mt.status==="connecting"?"bg-yellow-500/10 text-yellow-500":mt.status==="error"?"bg-red-500/10 text-red-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:Qr?h.jsx(dd,{size:16}):h.jsx(cu,{size:16})}),h.jsxs("div",{children:[h.jsx("input",{type:"text",value:mt.name,onChange:Nt=>{ut({connections:s.connections.map(pn=>pn.id===mt.id?{...pn,name:Nt.target.value}:pn)})},className:`font-medium bg-transparent border-none outline-none ${n?"text-neutral-200":"text-stone-800"}`}),h.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Qr?n?"bg-blue-500/10 text-blue-400":"bg-blue-50 text-blue-600":n?"bg-orange-500/10 text-orange-400":"bg-orange-50 text-orange-600"}`,children:Qr?"STDIO":"SSE"}),mt.status&&mt.status!=="disconnected"&&h.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded flex items-center gap-1 ${Po==="green"?n?"bg-green-500/10 text-green-400":"bg-green-50 text-green-600":Po==="yellow"?n?"bg-yellow-500/10 text-yellow-400":"bg-yellow-50 text-yellow-600":Po==="red"?n?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600":""}`,children:[mt.status==="connecting"&&h.jsx(hs,{size:10,className:"animate-spin"}),mt.status==="connected"&&h.jsx(ud,{size:10}),mt.status==="error"&&h.jsx(_0,{size:10}),mt.status]}),mt.toolCount!==void 0&&mt.status==="connected"&&h.jsxs("span",{className:`text-xs flex items-center gap-1 ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(Mq,{size:10}),mt.toolCount," tools"]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[((rr=window.electronAPI)==null?void 0:rr.mcp)&&h.jsx("button",{onClick:async()=>{var pn;const Nt=(pn=window.electronAPI)==null?void 0:pn.mcp;if(Nt)if(mt.status==="connected"||mt.status==="connecting")await Nt.disconnect(mt.id),ut({connections:s.connections.map(wn=>wn.id===mt.id?{...wn,status:"disconnected",toolCount:void 0,error:void 0}:wn)});else{ut({connections:s.connections.map(wn=>wn.id===mt.id?{...wn,status:"connecting",error:void 0}:wn)});try{const wn=await Nt.connect({id:mt.id,name:mt.name,transport:mt.transport,enabled:!0});if(wn.success){const kr=await Nt.listTools(mt.id);ut({connections:s.connections.map(Ws=>{var ho;return Ws.id===mt.id?{...Ws,status:"connected",toolCount:((ho=kr.tools)==null?void 0:ho.length)||0,error:void 0}:Ws})})}else ut({connections:s.connections.map(kr=>kr.id===mt.id?{...kr,status:"error",error:wn.error}:kr)})}catch(wn){ut({connections:s.connections.map(kr=>kr.id===mt.id?{...kr,status:"error",error:wn instanceof Error?wn.message:"Connection failed"}:kr)})}}},className:`p-1.5 rounded-lg transition-colors ${mt.status==="connected"||mt.status==="connecting"?n?"text-red-400 hover:bg-red-500/10":"text-red-500 hover:bg-red-50":n?"text-green-400 hover:bg-green-500/10":"text-green-500 hover:bg-green-50"}`,title:mt.status==="connected"?"Disconnect":mt.status==="connecting"?"Cancel":"Connect",children:mt.status==="connecting"?h.jsx(mN,{size:14}):mt.status==="connected"?h.jsx(Nq,{size:14}):h.jsx(vN,{size:14})}),h.jsx("button",{onClick:()=>Kn(mt.id),className:`p-1.5 rounded-lg transition-colors ${n?"text-neutral-500 hover:bg-red-500/10 hover:text-red-400":"text-stone-400 hover:bg-red-50 hover:text-red-500"}`,children:h.jsx(Ff,{size:14})}),h.jsx("button",{onClick:()=>mr(mt.id),className:`w-10 h-6 rounded-full transition-colors relative ${mt.enabled?"bg-purple-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${mt.enabled?"left-5":"left-1"}`})})]})]}),mt.error&&h.jsx("div",{className:`text-xs px-3 py-2 rounded-lg mb-3 ${n?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:mt.error}),h.jsxs("div",{className:`space-y-2 p-3 rounded-lg ${n?"bg-neutral-900/50":"bg-white"}`,children:[h.jsxs("div",{className:"flex gap-2 mb-3",children:[h.jsxs("button",{onClick:()=>{ut({connections:s.connections.map(Nt=>Nt.id===mt.id?{...Nt,transport:{type:"stdio",command:"npx",args:["-y","@your/mcp-server"]}}:Nt)})},className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${Qr?n?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-blue-100 text-blue-700 border border-blue-200":n?"bg-neutral-800 text-neutral-400 border border-neutral-700 hover:border-neutral-600":"bg-stone-100 text-stone-500 border border-stone-200 hover:border-stone-300"}`,children:[h.jsx(dd,{size:14}),"stdio"]}),h.jsxs("button",{onClick:()=>{ut({connections:s.connections.map(Nt=>Nt.id===mt.id?{...Nt,transport:{type:"sse",url:"http://localhost:3001"}}:Nt)})},className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${Qr?n?"bg-neutral-800 text-neutral-400 border border-neutral-700 hover:border-neutral-600":"bg-stone-100 text-stone-500 border border-stone-200 hover:border-stone-300":n?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"bg-orange-100 text-orange-700 border border-orange-200"}`,children:[h.jsx(cu,{size:14}),"SSE/HTTP"]})]}),Qr&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Command"}),h.jsx("input",{type:"text",value:mt.transport.command,onChange:Nt=>{ut({connections:s.connections.map(pn=>pn.id===mt.id?{...pn,transport:{...mt.transport,command:Nt.target.value}}:pn)})},placeholder:"npx, node, python, etc.",className:`w-full mt-1 px-3 py-2 rounded-lg text-sm ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`})]}),h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Arguments (one per line)"}),h.jsx("textarea",{value:((ft=mt.transport.args)==null?void 0:ft.join(`
`))||"",onChange:Nt=>{const pn=Nt.target.value.split(`
`).filter(wn=>wn.trim());ut({connections:s.connections.map(wn=>wn.id===mt.id?{...wn,transport:{...mt.transport,args:pn}}:wn)})},placeholder:`claude
mcp
serve`,rows:3,className:`w-full mt-1 px-3 py-2 rounded-lg text-sm font-mono ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`})]})]}),!Qr&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Server URL"}),h.jsx("input",{type:"text",value:mt.transport.url,onChange:Nt=>{ut({connections:s.connections.map(pn=>pn.id===mt.id?{...pn,transport:{...mt.transport,url:Nt.target.value}}:pn)})},placeholder:"http://localhost:3001",className:`w-full mt-1 px-3 py-2 rounded-lg text-sm ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`})]}),h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Headers (JSON)"}),h.jsx("input",{type:"text",value:JSON.stringify(mt.transport.headers||{}),onChange:Nt=>{try{const pn=JSON.parse(Nt.target.value||"{}");ut({connections:s.connections.map(wn=>wn.id===mt.id?{...wn,transport:{...mt.transport,headers:pn}}:wn)})}catch{}},placeholder:'{"Authorization": "Bearer token"}',className:`w-full mt-1 px-3 py-2 rounded-lg text-sm font-mono ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`}),h.jsx("p",{className:`text-xs mt-1 ${n?"text-neutral-500":"text-stone-400"}`,children:"Optional auth headers for remote servers"})]})]})]})]},mt.id)}),s.connections.filter(kt=>kt.type==="mcp").length===0&&h.jsxs("div",{className:`text-center py-8 rounded-xl border-2 border-dashed ${n?"border-neutral-700 text-neutral-500":"border-stone-200 text-stone-400"}`,children:[h.jsx(tbe,{size:32,className:"mx-auto mb-2 opacity-50"}),h.jsx("p",{children:"No MCP servers configured"}),h.jsx("p",{className:`text-xs mt-1 ${n?"text-neutral-600":"text-stone-300"}`,children:"Add a server to extend AI capabilities with custom tools"})]})]}),h.jsx("div",{className:`p-3 rounded-lg ${n?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-100"}`,children:h.jsxs("p",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:[h.jsx("strong",{children:"MCP (Model Context Protocol)"})," servers extend AI capabilities with custom tools. Use ",h.jsx("strong",{children:"stdio"})," for local servers (npx, node, python) or ",h.jsx("strong",{children:"SSE"})," for remote HTTP servers."]})})]});case"lsp":return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"Language Servers"}),h.jsx("p",{className:`text-xs mt-1 ${n?"text-neutral-500":"text-stone-400"}`,children:"LSP servers provide code intelligence in the background"})]}),h.jsx("button",{onClick:Ve,disabled:tn,className:`p-2 rounded-lg transition-colors ${n?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"} ${tn?"animate-spin":""}`,children:h.jsx(p0,{size:16})})]}),h.jsx("div",{className:"space-y-3",children:tn&&qt.length===0?h.jsxs("div",{className:`p-4 text-center ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(hs,{size:20,className:"animate-spin mx-auto mb-2"}),h.jsx("p",{className:"text-sm",children:"Loading language servers..."})]}):qt.length===0?h.jsxs("div",{className:`p-4 text-center ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(dd,{size:24,className:"mx-auto mb-2 opacity-50"}),h.jsx("p",{className:"text-sm",children:"No language servers available"})]}):qt.map(kt=>h.jsxs("div",{className:`p-4 rounded-lg border ${n?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${kt.running?"bg-green-500":kt.installed?"bg-yellow-500":"bg-neutral-500"}`}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:kt.name}),kt.running&&h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${n?"bg-green-500/20 text-green-400":"bg-green-100 text-green-700"}`,children:"Running"}),!kt.installed&&kt.installable&&h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${n?"bg-yellow-500/20 text-yellow-400":"bg-yellow-100 text-yellow-700"}`,children:"Not installed"})]}),h.jsx("div",{className:`text-xs mt-0.5 ${n?"text-neutral-500":"text-stone-400"}`,children:kt.extensions.join(", ")})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[!kt.installed&&kt.installable&&h.jsx("button",{onClick:()=>Y(kt.id),disabled:pe.has(kt.id),className:`px-2.5 py-1 text-xs font-medium rounded-lg flex items-center gap-1.5 transition-colors ${pe.has(kt.id)?n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400":n?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:pe.has(kt.id)?h.jsxs(h.Fragment,{children:[h.jsx(hs,{size:12,className:"animate-spin"}),"Installing..."]}):h.jsxs(h.Fragment,{children:[h.jsx(Z_,{size:12}),"Install"]})}),h.jsx("button",{onClick:()=>_e(kt.id,!kt.enabled),className:`w-10 h-6 rounded-full transition-colors relative ${kt.enabled?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${kt.enabled?"left-5":"left-1"}`})})]})]}),kt.running&&kt.instances.length>0&&h.jsx("div",{className:`mt-3 pt-3 border-t ${n?"border-neutral-700":"border-stone-200"}`,children:h.jsx("div",{className:"space-y-1",children:kt.instances.map((Fn,mt)=>h.jsxs("div",{className:`flex items-center justify-between text-xs ${n?"text-neutral-400":"text-stone-500"}`,children:[h.jsx("span",{className:"font-mono truncate max-w-[200px]",title:Fn.root,children:Fn.root.split("/").pop()}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{children:[Fn.openDocuments," files"]}),Fn.diagnosticCount>0&&h.jsxs("span",{className:`flex items-center gap-1 ${n?"text-yellow-400":"text-yellow-600"}`,children:[h.jsx(_0,{size:12}),Fn.diagnosticCount]})]})]},mt))})})]},kt.id))}),$e&&$e.cacheSize>0&&h.jsx("div",{className:`p-4 rounded-lg border ${n?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(cx,{size:16,className:n?"text-neutral-400":"text-stone-500"}),h.jsxs("div",{children:[h.jsx("div",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"LSP Cache"}),h.jsxs("div",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:[($e.cacheSize/1024/1024).toFixed(1)," MB used"]})]})]}),h.jsxs("button",{onClick:B,className:`px-2.5 py-1 text-xs font-medium rounded-lg flex items-center gap-1.5 transition-colors ${n?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[h.jsx(Ff,{size:12}),"Clear Cache"]})]})}),h.jsx("div",{className:`p-3 rounded-lg ${n?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-100"}`,children:h.jsxs("p",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:[h.jsx("strong",{children:"Language Servers"})," provide real-time diagnostics, completions, and code navigation. They run in the background and activate automatically based on file types."]})})]});case"themes":{const kt=rr=>{if(!rr.colors)return!1;const ft=rr.colors.background,Nt=parseInt(ft.slice(1,3),16),pn=parseInt(ft.slice(3,5),16),wn=parseInt(ft.slice(5,7),16);return(.299*Nt+.587*pn+.114*wn)/255>.5},Fn=g.find(rr=>rr.id==="system-default"),mt=g.filter(rr=>rr.id!=="system-default"&&!kt(rr)),Qr=g.filter(rr=>rr.id!=="system-default"&&kt(rr)),Po=rr=>{var Ws,ho,Zo,zr;const ft=f.id===rr.id,Nt=((Ws=rr.colors)==null?void 0:Ws.background)||(n?"#1a1b26":"#d6d3d1"),pn=((ho=rr.colors)==null?void 0:ho.foreground)||(n?"#c0caf5":"#171717"),wn=((Zo=rr.colors)==null?void 0:Zo.primary)||"#7aa2f7",kr=((zr=rr.colors)==null?void 0:zr.accent)||"#7dcfff";return h.jsxs("button",{onClick:()=>m(rr.id),className:"relative p-3 rounded-xl border-2 transition-all text-left",style:{borderColor:ft?wo:Gs,boxShadow:ft?`0 0 0 3px ${wo}33`:"none"},children:[h.jsx("div",{className:"h-16 rounded-lg mb-2 relative overflow-hidden",style:{backgroundColor:Nt},children:h.jsxs("div",{className:"absolute inset-2 flex flex-col gap-1",children:[h.jsx("div",{className:"h-2 w-3/4 rounded",style:{backgroundColor:pn,opacity:.8}}),h.jsx("div",{className:"h-2 w-1/2 rounded",style:{backgroundColor:wn}}),h.jsxs("div",{className:"flex gap-1 mt-auto",children:[h.jsx("div",{className:"h-3 w-8 rounded",style:{backgroundColor:wn}}),h.jsx("div",{className:"h-3 w-6 rounded",style:{backgroundColor:kr}})]})]})}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-sm font-medium",style:{color:xo},children:rr.name}),h.jsx("p",{className:"text-xs",style:{color:gr},children:rr.description})]}),ft&&h.jsx(ud,{size:16,style:{color:wo},className:"flex-shrink-0"})]})]},rr.id)};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium mb-2",style:{color:xo},children:"Application Theme"}),h.jsx("p",{className:"text-xs mb-4",style:{color:gr},children:"Choose a color theme for the application. Themes change the overall look and feel."})]}),Fn&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:gr},children:"Automatic"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:Po(Fn)})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:gr},children:"Dark Themes"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:mt.map(Po)})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:gr},children:"Light Themes"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:Qr.map(Po)})]}),h.jsx("div",{className:"p-3 rounded-lg border",style:{backgroundColor:`${wo}10`,borderColor:`${wo}30`},children:h.jsxs("p",{className:"text-xs",style:{color:wo},children:[h.jsx("strong",{children:"Tip:"}),` Select "System Default" to automatically follow your system's light/dark mode preference.`]})})]})}case"codeindex":return h.jsx(XBe,{isDarkMode:n,projectPath:i});case"pro":return h.jsx(KBe,{isDarkMode:n,isPro:!0});default:return null}},In=f.colors,Lr=(In==null?void 0:In.background)||(n?"#171717":"#d6d3d1"),xo=(In==null?void 0:In.foreground)||(n?"#f5f5f5":"#171717"),Gs=(In==null?void 0:In.border)||(n?"#404040":"#a8a29e"),wo=(In==null?void 0:In.primary)||(n?"#3b82f6":"#2563eb"),Xr=In?Uk(In.background,-10):n?"#262626":"#c4c0bc",gr=In?Uk(In.foreground,-30):n?"#a3a3a3":"#57534e";return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),h.jsxs("div",{className:"relative w-full max-w-5xl h-[700px] rounded-2xl shadow-2xl flex overflow-hidden",style:{backgroundColor:Lr,color:xo},children:[h.jsxs("div",{className:"w-52 flex-shrink-0 border-r",style:{backgroundColor:Xr,borderColor:Gs},children:[h.jsx("div",{className:"px-5 py-4 border-b",style:{borderColor:Gs},children:h.jsx("h2",{className:"text-lg font-semibold",style:{color:xo},children:"Settings"})}),h.jsx("nav",{className:"p-2",children:Dz.map(at=>{const rt=a===at.id;return h.jsxs("button",{onClick:()=>l(at.id),className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-left transition-colors",style:{backgroundColor:rt?In?Uk(Lr,15):n?"#404040":"#e7e5e4":"transparent",color:rt?xo:gr},children:[at.icon,h.jsx("span",{className:"text-sm font-medium",children:at.label}),rt&&h.jsx(Nf,{size:14,className:"ml-auto"})]},at.id)})})]}),h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:Gs},children:[h.jsx("h3",{className:"text-lg font-medium",style:{color:xo},children:(Do=Dz.find(at=>at.id===a))==null?void 0:Do.label}),h.jsx("button",{onClick:t,className:"p-2 rounded-lg transition-colors",style:{color:gr},children:h.jsx(qr,{size:18})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:hn()})]})]})]})}function Pz(e){return Ate[e]}const Lz=[{file:"src/auth/login.tsx",line:45,content:"const handleLogin = async (email, password) => {",match:!1},{file:"src/components/LoginForm.tsx",line:12,content:"export function LoginForm() {",match:!1},{file:"src/api/auth.ts",line:78,content:"// Authentication endpoint",match:!1},{file:"src/utils/validation.ts",line:23,content:"function validateEmail(email: string) {",match:!1}],$z=[{file:"src/auth/AuthProvider.tsx",line:156,content:`async function handleAuthentication(credentials: LoginCredentials) {
  // JWT token validation and user session management
  const token = await validateCredentials(credentials);`,similarity:89,match:!0},{file:"src/middleware/authMiddleware.ts",line:34,content:`export const requireAuth = async (req, res, next) => {
  // Check JWT token and verify user permissions`,similarity:76,match:!0},{file:"src/hooks/useAuth.ts",line:23,content:`export function useAuth() {
  const login = async (email: string, password: string) => {`,similarity:68,match:!0}];function eze({isDarkMode:e,onAccept:t,onDecline:n,onClose:r}){const[s,o]=x.useState("intro"),[i,a]=x.useState([]),[l,c]=x.useState([]),[u,f]=x.useState(null),[m,g]=x.useState(null),[y]=x.useState("authentication handler");return x.useEffect(()=>{if(s==="demo"){a([]),c([]),f(null),g(null);const v=[],w=[],_=setTimeout(()=>{let k=0;const R=setInterval(()=>{k<Lz.length?(a(O=>[...O,Lz[k]]),k++):(clearInterval(R),f(847))},120);w.push(R)},100);v.push(_);const S=setTimeout(()=>{let k=0;const R=setInterval(()=>{if(k<$z.length)c(O=>[...O,$z[k]]),k++;else{clearInterval(R),g(234);const O=setTimeout(()=>o("results"),800);v.push(O)}},80);w.push(R)},100);return v.push(S),()=>{v.forEach(clearTimeout),w.forEach(clearInterval)}}},[s]),h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),h.jsxs("div",{className:`relative max-w-4xl w-full rounded-2xl border ${e?"bg-neutral-900 border-neutral-700":"bg-white border-stone-200"} shadow-2xl overflow-hidden`,children:[h.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${e?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:h.jsx(Yl,{size:20,className:"text-white"})}),h.jsxs("div",{children:[h.jsx("h2",{className:`text-lg font-semibold ${e?"text-white":"text-stone-900"}`,children:"AI-Powered Code Search"}),h.jsx("p",{className:`text-sm ${e?"text-neutral-400":"text-stone-500"}`,children:"Find code by meaning, not just keywords"})]})]}),h.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors ${e?"hover:bg-neutral-800":"hover:bg-stone-100"}`,children:h.jsx(qr,{size:18,className:e?"text-neutral-400":"text-stone-500"})})]}),h.jsxs("div",{className:"p-6",children:[s==="intro"&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-base font-medium mb-2 ${e?"text-white":"text-stone-900"}`,children:"What is Semantic Search?"}),h.jsxs("p",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"} leading-relaxed`,children:["Instead of searching for exact keywords, Cluso understands ",h.jsx("strong",{children:"what you mean"}),`. Ask for "authentication handler" and it finds JWT validation code, login functions, and auth middleware - even if they don't contain those exact words.`]})]}),h.jsx("div",{className:`p-4 rounded-xl ${e?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-200"}`,children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Yl,{size:16,className:"text-blue-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h4",{className:`text-sm font-medium mb-1 ${e?"text-blue-400":"text-blue-600"}`,children:"Fast & Local"}),h.jsx("p",{className:`text-xs ${e?"text-blue-300/80":"text-blue-700"}`,children:"Runs completely offline with local AI models. No API costs, no internet required."})]})]})}),h.jsx("button",{onClick:()=>o("demo"),className:"w-full px-4 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-medium transition-all",children:"See Live Demo"})]}),s==="demo"&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:`p-3 rounded-lg ${e?"bg-neutral-800":"bg-stone-100"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Gf,{size:14,className:"text-blue-500"}),h.jsxs("span",{className:`text-sm font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:['"',y,'"']})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("span",{className:`text-sm font-medium ${e?"text-green-400":"text-green-600"}`,children:"Grep (Keyword)"}),u&&h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(fR,{size:12,className:"text-green-500"}),h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600"}`,children:[u,"ms"]})]})]}),h.jsx("div",{className:"space-y-2 min-h-[300px]",children:i.map((v,w)=>h.jsxs("div",{className:`p-3 rounded-lg border animate-fadeIn ${e?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,style:{animationDelay:`${w*120}ms`},children:[h.jsx("div",{className:"mb-1",children:h.jsxs("span",{className:`text-xs font-mono ${e?"text-neutral-400":"text-stone-500"}`,children:[v.file,":",v.line]})}),h.jsx("pre",{className:`text-xs font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:v.content})]},w))})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("span",{className:`text-sm font-medium ${e?"text-purple-400":"text-purple-600"}`,children:"Cluso (AI)"}),m&&h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(Yl,{size:12,className:"text-purple-500"}),h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-600"}`,children:[m,"ms"]})]})]}),h.jsx("div",{className:"space-y-2 min-h-[300px]",children:l.map((v,w)=>h.jsxs("div",{className:`p-3 rounded-lg border animate-fadeIn ${v.match?e?"bg-purple-500/10 border-purple-500/30":"bg-purple-50 border-purple-200":e?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,style:{animationDelay:`${w*80}ms`},children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("span",{className:`text-xs font-mono ${e?"text-purple-400":"text-purple-600"}`,children:[v.file,":",v.line]}),h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${v.similarity>80?"bg-green-500/20 text-green-400":v.similarity>65?"bg-yellow-500/20 text-yellow-400":"bg-neutral-500/20 text-neutral-400"}`,children:[v.similarity,"%"]})]}),h.jsx("pre",{className:`text-xs font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:v.content})]},w))})]})]})]}),s==="results"&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gradient-to-br from-purple-500/20 to-blue-500/20 border border-purple-500/30":"bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200"}`,children:[h.jsx("h3",{className:`text-base font-semibold mb-3 ${e?"text-white":"text-stone-900"}`,children:"The Difference"}),h.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${e?"bg-green-500/20":"bg-green-100"}`,children:h.jsx("span",{className:"text-green-500 text-sm font-bold",children:"Grep"})}),h.jsx("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-600"}`,children:"847ms"})]}),h.jsx("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-600"}`,children:"Found 4 matches, but none were actually authentication handlers - just files with similar words."})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:h.jsx(Yl,{size:16,className:"text-purple-500"})}),h.jsx("span",{className:`text-xs ${e?"text-purple-400":"text-purple-600"} font-semibold`,children:"234ms"})]}),h.jsxs("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-600"}`,children:["Found 3 results - all actual authentication code. ",h.jsx("strong",{className:"text-purple-500",children:"3.6x faster"})," and more accurate."]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${e?"text-white":"text-stone-900"}`,children:"Enable for your project?"}),h.jsx("p",{className:`text-sm mb-4 ${e?"text-neutral-400":"text-stone-600"}`,children:"Indexing will run in the background (takes ~30 seconds for typical projects). You can always disable it later in Settings."}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{localStorage.setItem("mgrep-onboarding-seen","true"),localStorage.setItem("mgrep-auto-init","true"),t()},className:"flex-1 px-4 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-medium transition-all",children:"Enable AI Search"}),h.jsx("button",{onClick:()=>{localStorage.setItem("mgrep-onboarding-seen","true"),localStorage.setItem("mgrep-auto-init","false"),n()},className:`px-4 py-3 rounded-xl transition-colors ${e?"bg-neutral-800 hover:bg-neutral-700 text-neutral-300":"bg-stone-100 hover:bg-stone-200 text-stone-700"}`,children:"Maybe Later"})]})]})]})]})]}),h.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(8px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fadeIn {
          animation: fadeIn 0.3s ease-out forwards;
          opacity: 0;
        }
      `})]})}const tze="modulepreload",nze=function(e,t){return new URL(e,t).href},Fz={},me=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=i(n.map(u=>{if(u=nze(u,r),u in Fz)return;Fz[u]=!0;const f=u.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(!!r)for(let v=a.length-1;v>=0;v--){const w=a[v];if(w.href===u&&(!f||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${m}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":tze,f||(y.as="script"),y.crossOrigin="",y.href=u,c&&y.setAttribute("nonce",c),document.head.appendChild(y),f)return new Promise((v,w)=>{y.addEventListener("load",v),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};let hi=class extends Error{constructor(t){super(t),this.name="ShikiError"}};function rze(e){return q7(e)}function q7(e){return Array.isArray(e)?sze(e):e instanceof RegExp?e:typeof e=="object"?oze(e):e}function sze(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=q7(e[n]);return t}function oze(e){let t={};for(let n in e)t[n]=q7(e[n]);return t}function Nte(e,...t){return t.forEach(n=>{for(let r in n)e[r]=n[r]}),e}function Ite(e){const t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return t===0?e:~t===e.length-1?Ite(e.substring(0,e.length-1)):e.substr(~t+1)}var Hk=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,G2=class{static hasCaptures(e){return e===null?!1:(Hk.lastIndex=0,Hk.test(e))}static replaceCaptures(e,t,n){return e.replace(Hk,(r,s,o,i)=>{let a=n[parseInt(s||o,10)];if(a){let l=t.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(i){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function Rte(e,t){return e<t?-1:e>t?1:0}function Mte(e,t){if(e===null&&t===null)return 0;if(!e)return-1;if(!t)return 1;let n=e.length,r=t.length;if(n===r){for(let s=0;s<n;s++){let o=Rte(e[s],t[s]);if(o!==0)return o}return 0}return n-r}function Bz(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function Ote(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Dte=class{constructor(e){Ze(this,"cache",new Map);this.fn=e}get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}},OT=class{constructor(e,t,n){Ze(this,"_cachedMatchRoot",new Dte(e=>this._root.match(e)));this._colorMap=e,this._defaults=t,this._root=n}static createFromRawTheme(e,t){return this.createFromParsedTheme(lze(e),t)}static createFromParsedTheme(e,t){return uze(e,t)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(e===null)return this._defaults;const t=e.scopeName,r=this._cachedMatchRoot.get(t).find(s=>ize(e.parent,s.parentScopes));return r?new Pte(r.fontStyle,r.foreground,r.background):null}},Vk=class $_{constructor(t,n){this.parent=t,this.scopeName=n}static push(t,n){for(const r of n)t=new $_(t,r);return t}static from(...t){let n=null;for(let r=0;r<t.length;r++)n=new $_(n,t[r]);return n}push(t){return new $_(this,t)}getSegments(){let t=this;const n=[];for(;t;)n.push(t.scopeName),t=t.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(t){return this===t?!0:this.parent===null?!1:this.parent.extends(t)}getExtensionIfDefined(t){const n=[];let r=this;for(;r&&r!==t;)n.push(r.scopeName),r=r.parent;return r===t?n.reverse():void 0}};function ize(e,t){if(t.length===0)return!0;for(let n=0;n<t.length;n++){let r=t[n],s=!1;if(r===">"){if(n===t.length-1)return!1;r=t[++n],s=!0}for(;e&&!aze(e.scopeName,r);){if(s)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0}function aze(e,t){return t===e||e.startsWith(t)&&e[t.length]==="."}var Pte=class{constructor(e,t,n){this.fontStyle=e,this.foregroundId=t,this.backgroundId=n}};function lze(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,n=[],r=0;for(let s=0,o=t.length;s<o;s++){let i=t[s];if(!i.settings)continue;let a;if(typeof i.scope=="string"){let f=i.scope;f=f.replace(/^[,]+/,""),f=f.replace(/[,]+$/,""),a=f.split(",")}else Array.isArray(i.scope)?a=i.scope:a=[""];let l=-1;if(typeof i.settings.fontStyle=="string"){l=0;let f=i.settings.fontStyle.split(" ");for(let m=0,g=f.length;m<g;m++)switch(f[m]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof i.settings.foreground=="string"&&Bz(i.settings.foreground)&&(c=i.settings.foreground);let u=null;typeof i.settings.background=="string"&&Bz(i.settings.background)&&(u=i.settings.background);for(let f=0,m=a.length;f<m;f++){let y=a[f].trim().split(" "),v=y[y.length-1],w=null;y.length>1&&(w=y.slice(0,y.length-1),w.reverse()),n[r++]=new cze(v,w,s,l,c,u)}}return n}var cze=class{constructor(e,t,n,r,s,o){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=s,this.background=o}},ya=(e=>(e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e))(ya||{});function uze(e,t){e.sort((l,c)=>{let u=Rte(l.scope,c.scope);return u!==0||(u=Mte(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let n=0,r="#000000",s="#ffffff";for(;e.length>=1&&e[0].scope==="";){let l=e.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(s=l.background)}let o=new dze(t),i=new Pte(n,o.getId(r),o.getId(s)),a=new hze(new J6(0,null,-1,0,0),[]);for(let l=0,c=e.length;l<c;l++){let u=e[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,o.getId(u.foreground),o.getId(u.background))}return new OT(o,i,a)}var dze=class{constructor(e){Ze(this,"_isFrozen");Ze(this,"_lastColorId");Ze(this,"_id2color");Ze(this,"_color2id");if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(e===null)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}},fze=Object.freeze([]),J6=class Lte{constructor(t,n,r,s,o){Ze(this,"scopeDepth");Ze(this,"parentScopes");Ze(this,"fontStyle");Ze(this,"foreground");Ze(this,"background");this.scopeDepth=t,this.parentScopes=n||fze,this.fontStyle=r,this.foreground=s,this.background=o}clone(){return new Lte(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(t){let n=[];for(let r=0,s=t.length;r<s;r++)n[r]=t[r].clone();return n}acceptOverwrite(t,n,r,s){this.scopeDepth>t?console.log("how did this happen?"):this.scopeDepth=t,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},hze=class X6{constructor(t,n=[],r={}){Ze(this,"_rulesWithParentScopes");this._mainRule=t,this._children=r,this._rulesWithParentScopes=n}static _cmpBySpecificity(t,n){if(t.scopeDepth!==n.scopeDepth)return n.scopeDepth-t.scopeDepth;let r=0,s=0;for(;t.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=t.parentScopes.length||s>=n.parentScopes.length);){const o=n.parentScopes[s].length-t.parentScopes[r].length;if(o!==0)return o;r++,s++}return n.parentScopes.length-t.parentScopes.length}match(t){if(t!==""){let r=t.indexOf("."),s,o;if(r===-1?(s=t,o=""):(s=t.substring(0,r),o=t.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(o)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(X6._cmpBySpecificity),n}insert(t,n,r,s,o,i){if(n===""){this._doInsertHere(t,r,s,o,i);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new X6(this._mainRule.clone(),J6.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(t+1,c,r,s,o,i)}_doInsertHere(t,n,r,s,o){if(n===null){this._mainRule.acceptOverwrite(t,r,s,o);return}for(let i=0,a=this._rulesWithParentScopes.length;i<a;i++){let l=this._rulesWithParentScopes[i];if(Mte(l.parentScopes,n)===0){l.acceptOverwrite(t,r,s,o);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),o===0&&(o=this._mainRule.background),this._rulesWithParentScopes.push(new J6(t,n,r,s,o))}},ab=class yc{static toBinaryStr(t){return t.toString(2).padStart(32,"0")}static print(t){const n=yc.getLanguageId(t),r=yc.getTokenType(t),s=yc.getFontStyle(t),o=yc.getForeground(t),i=yc.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:o,background:i})}static getLanguageId(t){return(t&255)>>>0}static getTokenType(t){return(t&768)>>>8}static containsBalancedBrackets(t){return(t&1024)!==0}static getFontStyle(t){return(t&30720)>>>11}static getForeground(t){return(t&16744448)>>>15}static getBackground(t){return(t&4278190080)>>>24}static set(t,n,r,s,o,i,a){let l=yc.getLanguageId(t),c=yc.getTokenType(t),u=yc.containsBalancedBrackets(t)?1:0,f=yc.getFontStyle(t),m=yc.getForeground(t),g=yc.getBackground(t);return n!==0&&(l=n),r!==8&&(c=r),s!==null&&(u=s?1:0),o!==-1&&(f=o),i!==0&&(m=i),a!==0&&(g=a),(l<<0|c<<8|u<<10|f<<11|m<<15|g<<24)>>>0}};function DT(e,t){const n=[],r=pze(e);let s=r.next();for(;s!==null;){let l=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let c=i();if(n.push({matcher:c,priority:l}),s!==",")break;s=r.next()}return n;function o(){if(s==="-"){s=r.next();const l=o();return c=>!!l&&!l(c)}if(s==="("){s=r.next();const l=a();return s===")"&&(s=r.next()),l}if(zz(s)){const l=[];do l.push(s),s=r.next();while(zz(s));return c=>t(l,c)}return null}function i(){const l=[];let c=o();for(;c;)l.push(c),c=o();return u=>l.every(f=>f(u))}function a(){const l=[];let c=i();for(;c&&(l.push(c),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");c=i()}return u=>l.some(f=>f(u))}}function zz(e){return!!e&&!!e.match(/[\w\.:]+/)}function pze(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:()=>{if(!n)return null;const r=n[0];return n=t.exec(e),r}}}function $te(e){typeof e.dispose=="function"&&e.dispose()}var Hx=class{constructor(e){this.scopeName=e}toKey(){return this.scopeName}},mze=class{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}},gze=class{constructor(){Ze(this,"_references",[]);Ze(this,"_seenReferenceKeys",new Set);Ze(this,"visitedRule",new Set)}get references(){return this._references}add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}},bze=class{constructor(e,t){Ze(this,"seenFullScopeRequests",new Set);Ze(this,"seenPartialScopeRequests",new Set);Ze(this,"Q");this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Hx(this.initialScopeName)]}processQueue(){const e=this.Q;this.Q=[];const t=new gze;for(const n of e)yze(n,this.initialScopeName,this.repo,t);for(const n of t.references)if(n instanceof Hx){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function yze(e,t,n,r){const s=n.lookup(e.scopeName);if(!s){if(e.scopeName===t)throw new Error(`No grammar provided for <${t}>`);return}const o=n.lookup(t);e instanceof Hx?F_({baseGrammar:o,selfGrammar:s},r):Q6(e.ruleName,{baseGrammar:o,selfGrammar:s,repository:s.repository},r);const i=n.injections(e.scopeName);if(i)for(const a of i)r.add(new Hx(a))}function Q6(e,t,n){if(t.repository&&t.repository[e]){const r=t.repository[e];PT([r],t,n)}}function F_(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&PT(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&PT(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function PT(e,t,n){for(const r of e){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?Nte({},t.repository,r.repository):t.repository;Array.isArray(r.patterns)&&PT(r.patterns,{...t,repository:s},n);const o=r.include;if(!o)continue;const i=Fte(o);switch(i.kind){case 0:F_({...t,selfGrammar:t.baseGrammar},n);break;case 1:F_(t,n);break;case 2:Q6(i.ruleName,{...t,repository:s},n);break;case 3:case 4:const a=i.scopeName===t.selfGrammar.scopeName?t.selfGrammar:i.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(a){const l={baseGrammar:t.baseGrammar,selfGrammar:a,repository:s};i.kind===4?Q6(i.ruleName,l,n):F_(l,n)}else i.kind===4?n.add(new mze(i.scopeName,i.ruleName)):n.add(new Hx(i.scopeName));break}}}var vze=class{constructor(){Ze(this,"kind",0)}},xze=class{constructor(){Ze(this,"kind",1)}},wze=class{constructor(e){Ze(this,"kind",2);this.ruleName=e}},Eze=class{constructor(e){Ze(this,"kind",3);this.scopeName=e}},_ze=class{constructor(e,t){Ze(this,"kind",4);this.scopeName=e,this.ruleName=t}};function Fte(e){if(e==="$base")return new vze;if(e==="$self")return new xze;const t=e.indexOf("#");if(t===-1)return new Eze(e);if(t===0)return new wze(e.substring(1));{const n=e.substring(0,t),r=e.substring(t+1);return new _ze(n,r)}}var Sze=/\\(\d+)/,jz=/\\(\d+)/g,Tze=-1,Bte=-2;var Lw=class{constructor(e,t,n,r){Ze(this,"$location");Ze(this,"id");Ze(this,"_nameIsCapturing");Ze(this,"_name");Ze(this,"_contentNameIsCapturing");Ze(this,"_contentName");this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=G2.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=G2.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${Ite(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return!this._nameIsCapturing||this._name===null||e===null||t===null?this._name:G2.replaceCaptures(this._name,e,t)}getContentName(e,t){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:G2.replaceCaptures(this._contentName,e,t)}},Cze=class extends Lw{constructor(t,n,r,s,o){super(t,n,r,s);Ze(this,"retokenizeCapturedWithRuleId");this.retokenizeCapturedWithRuleId=o}dispose(){}collectPatterns(t,n){throw new Error("Not supported!")}compile(t,n){throw new Error("Not supported!")}compileAG(t,n,r,s){throw new Error("Not supported!")}},kze=class extends Lw{constructor(t,n,r,s,o){super(t,n,r,null);Ze(this,"_match");Ze(this,"captures");Ze(this,"_cachedCompiledPatterns");this._match=new Vx(s,this.id),this.captures=o,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,n){n.push(this._match)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,s){return this._getCachedCompiledPatterns(t).compileAG(t,r,s)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new qx,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Uz=class extends Lw{constructor(t,n,r,s,o){super(t,n,r,s);Ze(this,"hasMissingPatterns");Ze(this,"patterns");Ze(this,"_cachedCompiledPatterns");this.patterns=o.patterns,this.hasMissingPatterns=o.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,n){for(const r of this.patterns)t.getRule(r).collectPatterns(t,n)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,s){return this._getCachedCompiledPatterns(t).compileAG(t,r,s)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new qx,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},eI=class extends Lw{constructor(t,n,r,s,o,i,a,l,c,u){super(t,n,r,s);Ze(this,"_begin");Ze(this,"beginCaptures");Ze(this,"_end");Ze(this,"endHasBackReferences");Ze(this,"endCaptures");Ze(this,"applyEndPatternLast");Ze(this,"hasMissingPatterns");Ze(this,"patterns");Ze(this,"_cachedCompiledPatterns");this._begin=new Vx(o,this.id),this.beginCaptures=i,this._end=new Vx(a||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=c||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,n){return this._end.resolveBackReferences(t,n)}collectPatterns(t,n){n.push(this._begin)}compile(t,n){return this._getCachedCompiledPatterns(t,n).compile(t)}compileAG(t,n,r,s){return this._getCachedCompiledPatterns(t,n).compileAG(t,r,s)}_getCachedCompiledPatterns(t,n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new qx;for(const r of this.patterns)t.getRule(r).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,n):this._cachedCompiledPatterns.setSource(0,n)),this._cachedCompiledPatterns}},LT=class extends Lw{constructor(t,n,r,s,o,i,a,l,c){super(t,n,r,s);Ze(this,"_begin");Ze(this,"beginCaptures");Ze(this,"whileCaptures");Ze(this,"_while");Ze(this,"whileHasBackReferences");Ze(this,"hasMissingPatterns");Ze(this,"patterns");Ze(this,"_cachedCompiledPatterns");Ze(this,"_cachedCompiledWhilePatterns");this._begin=new Vx(o,this.id),this.beginCaptures=i,this.whileCaptures=l,this._while=new Vx(a,Bte),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,n){return this._while.resolveBackReferences(t,n)}collectPatterns(t,n){n.push(this._begin)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,s){return this._getCachedCompiledPatterns(t).compileAG(t,r,s)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new qx;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,n){return this._getCachedCompiledWhilePatterns(t,n).compile(t)}compileWhileAG(t,n,r,s){return this._getCachedCompiledWhilePatterns(t,n).compileAG(t,r,s)}_getCachedCompiledWhilePatterns(t,n){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new qx,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,n||""),this._cachedCompiledWhilePatterns}},zte=class ma{static createCaptureRule(t,n,r,s,o){return t.registerRule(i=>new Cze(n,i,r,s,o))}static getCompiledRuleId(t,n,r){return t.id||n.registerRule(s=>{if(t.id=s,t.match)return new kze(t.$vscodeTextmateLocation,t.id,t.name,t.match,ma._compileCaptures(t.captures,n,r));if(typeof t.begin>"u"){t.repository&&(r=Nte({},r,t.repository));let o=t.patterns;return typeof o>"u"&&t.include&&(o=[{include:t.include}]),new Uz(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,ma._compilePatterns(o,n,r))}return t.while?new LT(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,ma._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,ma._compileCaptures(t.whileCaptures||t.captures,n,r),ma._compilePatterns(t.patterns,n,r)):new eI(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,ma._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,ma._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,ma._compilePatterns(t.patterns,n,r))}),t.id}static _compileCaptures(t,n,r){let s=[];if(t){let o=0;for(const i in t){if(i==="$vscodeTextmateLocation")continue;const a=parseInt(i,10);a>o&&(o=a)}for(let i=0;i<=o;i++)s[i]=null;for(const i in t){if(i==="$vscodeTextmateLocation")continue;const a=parseInt(i,10);let l=0;t[i].patterns&&(l=ma.getCompiledRuleId(t[i],n,r)),s[a]=ma.createCaptureRule(n,t[i].$vscodeTextmateLocation,t[i].name,t[i].contentName,l)}}return s}static _compilePatterns(t,n,r){let s=[];if(t)for(let o=0,i=t.length;o<i;o++){const a=t[o];let l=-1;if(a.include){const c=Fte(a.include);switch(c.kind){case 0:case 1:l=ma.getCompiledRuleId(r[a.include],n,r);break;case 2:let u=r[c.ruleName];u&&(l=ma.getCompiledRuleId(u,n,r));break;case 3:case 4:const f=c.scopeName,m=c.kind===4?c.ruleName:null,g=n.getExternalGrammar(f,r);if(g)if(m){let y=g.repository[m];y&&(l=ma.getCompiledRuleId(y,n,g.repository))}else l=ma.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else l=ma.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let u=!1;if((c instanceof Uz||c instanceof eI||c instanceof LT)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;s.push(l)}}return{patterns:s,hasMissingPatterns:(t?t.length:0)!==s.length}}},Vx=class jte{constructor(t,n){Ze(this,"source");Ze(this,"ruleId");Ze(this,"hasAnchor");Ze(this,"hasBackReferences");Ze(this,"_anchorCache");if(t&&typeof t=="string"){const r=t.length;let s=0,o=[],i=!1;for(let a=0;a<r;a++)if(t.charAt(a)==="\\"&&a+1<r){const c=t.charAt(a+1);c==="z"?(o.push(t.substring(s,a)),o.push("$(?!\\n)(?<!\\n)"),s=a+2):(c==="A"||c==="G")&&(i=!0),a++}this.hasAnchor=i,s===0?this.source=t:(o.push(t.substring(s,r)),this.source=o.join(""))}else this.hasAnchor=!1,this.source=t;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=Sze.test(this.source):this.hasBackReferences=!1}clone(){return new jte(this.source,this.ruleId)}setSource(t){this.source!==t&&(this.source=t,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(t,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>t.substring(s.start,s.end));return jz.lastIndex=0,this.source.replace(jz,(s,o)=>Ote(r[parseInt(o,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let t=[],n=[],r=[],s=[],o,i,a,l;for(o=0,i=this.source.length;o<i;o++)a=this.source.charAt(o),t[o]=a,n[o]=a,r[o]=a,s[o]=a,a==="\\"&&o+1<i&&(l=this.source.charAt(o+1),l==="A"?(t[o+1]="",n[o+1]="",r[o+1]="A",s[o+1]="A"):l==="G"?(t[o+1]="",n[o+1]="G",r[o+1]="",s[o+1]="G"):(t[o+1]=l,n[o+1]=l,r[o+1]=l,s[o+1]=l),o++);return{A0_G0:t.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(t,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:t?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},qx=class{constructor(){Ze(this,"_items");Ze(this,"_hasAnchors");Ze(this,"_cached");Ze(this,"_anchorCache");this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map(n=>n.source);this._cached=new Hz(e,t,this._items.map(n=>n.ruleId))}return this._cached}compileAG(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,n){let r=this._items.map(s=>s.resolveAnchors(t,n));return new Hz(e,r,this._items.map(s=>s.ruleId))}},Hz=class{constructor(e,t,n){Ze(this,"scanner");this.regExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const e=[];for(let t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join(`
`)}findNextMatchSync(e,t,n){const r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},qk=class{constructor(e,t){this.languageId=e,this.tokenType=t}},Af,Aze=(Af=class{constructor(t,n){Ze(this,"_defaultAttributes");Ze(this,"_embeddedLanguagesMatcher");Ze(this,"_getBasicScopeAttributes",new Dte(t=>{const n=this._scopeToLanguage(t),r=this._toStandardTokenType(t);return new qk(n,r)}));this._defaultAttributes=new qk(t,8),this._embeddedLanguagesMatcher=new Nze(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(t){return t===null?Af._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}_scopeToLanguage(t){return this._embeddedLanguagesMatcher.match(t)||0}_toStandardTokenType(t){const n=t.match(Af.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}},Ze(Af,"_NULL_SCOPE_METADATA",new qk(0,0)),Ze(Af,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),Af),Nze=class{constructor(e){Ze(this,"values");Ze(this,"scopesRegExp");if(e.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map(([n,r])=>Ote(n));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);if(t)return this.values.get(t[1])}},Vz=class{constructor(e,t){this.stack=e,this.stoppedEarly=t}};function Ute(e,t,n,r,s,o,i,a){const l=t.content.length;let c=!1,u=-1;if(i){const g=Ize(e,t,n,r,s,o);s=g.stack,r=g.linePos,n=g.isFirstLine,u=g.anchorPosition}const f=Date.now();for(;!c;){if(a!==0&&Date.now()-f>a)return new Vz(s,!0);m()}return new Vz(s,!1);function m(){const g=Rze(e,t,n,r,s,u);if(!g){o.produce(s,l),c=!0;return}const y=g.captureIndices,v=g.matchedRuleId,w=y&&y.length>0?y[0].end>r:!1;if(v===Tze){const _=s.getRule(e);o.produce(s,y[0].start),s=s.withContentNameScopesList(s.nameScopesList),_v(e,t,n,s,o,_.endCaptures,y),o.produce(s,y[0].end);const S=s;if(s=s.parent,u=S.getAnchorPos(),!w&&S.getEnterPos()===r){s=S,o.produce(s,l),c=!0;return}}else{const _=e.getRule(v);o.produce(s,y[0].start);const S=s,k=_.getName(t.content,y),R=s.contentNameScopesList.pushAttributed(k,e);if(s=s.push(v,r,u,y[0].end===l,null,R,R),_ instanceof eI){const O=_;_v(e,t,n,s,o,O.beginCaptures,y),o.produce(s,y[0].end),u=y[0].end;const M=O.getContentName(t.content,y),P=R.pushAttributed(M,e);if(s=s.withContentNameScopesList(P),O.endHasBackReferences&&(s=s.withEndRule(O.getEndWithResolvedBackReferences(t.content,y))),!w&&S.hasSameRuleAs(s)){s=s.pop(),o.produce(s,l),c=!0;return}}else if(_ instanceof LT){const O=_;_v(e,t,n,s,o,O.beginCaptures,y),o.produce(s,y[0].end),u=y[0].end;const M=O.getContentName(t.content,y),P=R.pushAttributed(M,e);if(s=s.withContentNameScopesList(P),O.whileHasBackReferences&&(s=s.withEndRule(O.getWhileWithResolvedBackReferences(t.content,y))),!w&&S.hasSameRuleAs(s)){s=s.pop(),o.produce(s,l),c=!0;return}}else if(_v(e,t,n,s,o,_.captures,y),o.produce(s,y[0].end),s=s.pop(),!w){s=s.safePop(),o.produce(s,l),c=!0;return}}y[0].end>r&&(r=y[0].end,n=!1)}}function Ize(e,t,n,r,s,o){let i=s.beginRuleCapturedEOL?0:-1;const a=[];for(let l=s;l;l=l.pop()){const c=l.getRule(e);c instanceof LT&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=Dze(l.rule,e,l.stack.endRule,n,r===i),f=c.findNextMatchSync(t,r,u);if(f){if(f.ruleId!==Bte){s=l.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(o.produce(l.stack,f.captureIndices[0].start),_v(e,t,n,l.stack,o,l.rule.whileCaptures,f.captureIndices),o.produce(l.stack,f.captureIndices[0].end),i=f.captureIndices[0].end,f.captureIndices[0].end>r&&(r=f.captureIndices[0].end,n=!1))}else{s=l.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:i,isFirstLine:n}}function Rze(e,t,n,r,s,o){const i=Mze(e,t,n,r,s,o),a=e.getInjections();if(a.length===0)return i;const l=Oze(a,e,t,n,r,s,o);if(!l)return i;if(!i)return l;const c=i.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:i}function Mze(e,t,n,r,s,o){const i=s.getRule(e),{ruleScanner:a,findOptions:l}=Hte(i,e,s.endRule,n,r===o),c=a.findNextMatchSync(t,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function Oze(e,t,n,r,s,o,i){let a=Number.MAX_VALUE,l=null,c,u=0;const f=o.contentNameScopesList.getScopeNames();for(let m=0,g=e.length;m<g;m++){const y=e[m];if(!y.matcher(f))continue;const v=t.getRule(y.ruleId),{ruleScanner:w,findOptions:_}=Hte(v,t,null,r,s===i),S=w.findNextMatchSync(n,s,_);if(!S)continue;const k=S.captureIndices[0].start;if(!(k>=a)&&(a=k,l=S.captureIndices,c=S.ruleId,u=y.priority,a===s))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function Hte(e,t,n,r,s){return{ruleScanner:e.compileAG(t,n,r,s),findOptions:0}}function Dze(e,t,n,r,s){return{ruleScanner:e.compileWhileAG(t,n,r,s),findOptions:0}}function _v(e,t,n,r,s,o,i){if(o.length===0)return;const a=t.content,l=Math.min(o.length,i.length),c=[],u=i[0].end;for(let f=0;f<l;f++){const m=o[f];if(m===null)continue;const g=i[f];if(g.length===0)continue;if(g.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=g.start;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?s.produceFromScopes(c[c.length-1].scopes,g.start):s.produce(r,g.start),m.retokenizeCapturedWithRuleId){const v=m.getName(a,i),w=r.contentNameScopesList.pushAttributed(v,e),_=m.getContentName(a,i),S=w.pushAttributed(_,e),k=r.push(m.retokenizeCapturedWithRuleId,g.start,-1,!1,null,w,S),R=e.createOnigString(a.substring(0,g.end));Ute(e,R,n&&g.start===0,g.start,k,s,!1,0),$te(R);continue}const y=m.getName(a,i);if(y!==null){const w=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(y,e);c.push(new Pze(w,g.end))}}for(;c.length>0;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var Pze=class{constructor(e,t){Ze(this,"scopes");Ze(this,"endPos");this.scopes=e,this.endPos=t}};function Lze(e,t,n,r,s,o,i,a){return new Fze(e,t,n,r,s,o,i,a)}function qz(e,t,n,r,s){const o=DT(t,$T),i=zte.getCompiledRuleId(n,r,s.repository);for(const a of o)e.push({debugSelector:t,matcher:a.matcher,ruleId:i,grammar:s,priority:a.priority})}function $T(e,t){if(t.length<e.length)return!1;let n=0;return e.every(r=>{for(let s=n;s<t.length;s++)if($ze(t[s],r))return n=s+1,!0;return!1})}function $ze(e,t){if(!e)return!1;if(e===t)return!0;const n=t.length;return e.length>n&&e.substr(0,n)===t&&e[n]==="."}var Fze=class{constructor(e,t,n,r,s,o,i,a){Ze(this,"_rootId");Ze(this,"_lastRuleId");Ze(this,"_ruleId2desc");Ze(this,"_includedGrammars");Ze(this,"_grammarRepository");Ze(this,"_grammar");Ze(this,"_injections");Ze(this,"_basicScopeAttributesProvider");Ze(this,"_tokenTypeMatchers");if(this._rootScopeName=e,this.balancedBracketSelectors=o,this._onigLib=a,this._basicScopeAttributesProvider=new Aze(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=i,this._grammar=Gz(t,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const l of Object.keys(s)){const c=DT(l,$T);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:s[l]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},t=[],n=this._rootScopeName,r=e.lookup(n);if(r){const s=r.injections;if(s)for(let i in s)qz(t,i,s[i],this,r);const o=this._grammarRepository.injections(n);o&&o.forEach(i=>{const a=this.getExternalGrammar(i);if(a){const l=a.injectionSelector;l&&qz(t,l,a,this,a)}})}return t.sort((s,o)=>s.priority-o.priority),t}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(e){const t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=Gz(n,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,n=0){const r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t,n=0){const r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,n,r){this._rootId===-1&&(this._rootId=zte.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!t||t===tI.NULL){s=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),f=ab.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),m=this.getRule(this._rootId).getName(null,null);let g;m?g=Yv.createRootAndLookUpScopeName(m,f,this):g=Yv.createRoot("unknown",f),t=new tI(null,this._rootId,-1,-1,!1,null,g,g)}else s=!1,t.reset();e=e+`
`;const o=this.createOnigString(e),i=o.content.length,a=new zze(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),l=Ute(this,o,s,0,t,a,!0,r);return $te(o),{lineLength:i,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function Gz(e,t){return e=rze(e),e.repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var Yv=class Qu{constructor(t,n,r){this.parent=t,this.scopePath=n,this.tokenAttributes=r}static fromExtension(t,n){let r=t,s=(t==null?void 0:t.scopePath)??null;for(const o of n)s=Vk.push(s,o.scopeNames),r=new Qu(r,s,o.encodedTokenAttributes);return r}static createRoot(t,n){return new Qu(null,new Vk(null,t),n)}static createRootAndLookUpScopeName(t,n,r){const s=r.getMetadataForScope(t),o=new Vk(null,t),i=r.themeProvider.themeMatch(o),a=Qu.mergeAttributes(n,s,i);return new Qu(null,o,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return Qu.equals(this,t)}static equals(t,n){do{if(t===n||!t&&!n)return!0;if(!t||!n||t.scopeName!==n.scopeName||t.tokenAttributes!==n.tokenAttributes)return!1;t=t.parent,n=n.parent}while(!0)}static mergeAttributes(t,n,r){let s=-1,o=0,i=0;return r!==null&&(s=r.fontStyle,o=r.foregroundId,i=r.backgroundId),ab.set(t,n.languageId,n.tokenType,null,s,o,i)}pushAttributed(t,n){if(t===null)return this;if(t.indexOf(" ")===-1)return Qu._pushAttributed(this,t,n);const r=t.split(/ /g);let s=this;for(const o of r)s=Qu._pushAttributed(s,o,n);return s}static _pushAttributed(t,n,r){const s=r.getMetadataForScope(n),o=t.scopePath.push(n),i=r.themeProvider.themeMatch(o),a=Qu.mergeAttributes(t.tokenAttributes,s,i);return new Qu(t,o,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(t){var s;const n=[];let r=this;for(;r&&r!==t;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(((s=r.parent)==null?void 0:s.scopePath)??null)}),r=r.parent;return r===t?n.reverse():void 0}},kc,tI=(kc=class{constructor(t,n,r,s,o,i,a,l){Ze(this,"_stackElementBrand");Ze(this,"_enterPos");Ze(this,"_anchorPos");Ze(this,"depth");this.parent=t,this.ruleId=n,this.beginRuleCapturedEOL=o,this.endRule=i,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}equals(t){return t===null?!1:kc._equals(this,t)}static _equals(t,n){return t===n?!0:this._structuralEquals(t,n)?Yv.equals(t.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(t,n){do{if(t===n||!t&&!n)return!0;if(!t||!n||t.depth!==n.depth||t.ruleId!==n.ruleId||t.endRule!==n.endRule)return!1;t=t.parent,n=n.parent}while(!0)}clone(){return this}static _reset(t){for(;t;)t._enterPos=-1,t._anchorPos=-1,t=t.parent}reset(){kc._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,n,r,s,o,i,a){return new kc(this,t,n,r,s,o,i,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(t){return t.getRule(this.ruleId)}toString(){const t=[];return this._writeString(t,0),"["+t.join(",")+"]"}_writeString(t,n){var r,s;return this.parent&&(n=this.parent._writeString(t,n)),t[n++]=`(${this.ruleId}, ${(r=this.nameScopesList)==null?void 0:r.toString()}, ${(s=this.contentNameScopesList)==null?void 0:s.toString()})`,n}withContentNameScopesList(t){return this.contentNameScopesList===t?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,t)}withEndRule(t){return this.endRule===t?this:new kc(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(t){let n=this;for(;n&&n._enterPos===t._enterPos;){if(n.ruleId===t.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){var t,n,r;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((n=this.nameScopesList)==null?void 0:n.getExtensionIfDefined(((t=this.parent)==null?void 0:t.nameScopesList)??null))??[],contentNameScopesList:((r=this.contentNameScopesList)==null?void 0:r.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(t,n){const r=Yv.fromExtension((t==null?void 0:t.nameScopesList)??null,n.nameScopesList);return new kc(t,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,Yv.fromExtension(r,n.contentNameScopesList))}},Ze(kc,"NULL",new kc(null,0,0,0,!1,null,null,null)),kc),Bze=class{constructor(e,t){Ze(this,"balancedBracketScopes");Ze(this,"unbalancedBracketScopes");Ze(this,"allowAny",!1);this.balancedBracketScopes=e.flatMap(n=>n==="*"?(this.allowAny=!0,[]):DT(n,$T).map(r=>r.matcher)),this.unbalancedBracketScopes=t.flatMap(n=>DT(n,$T).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}},zze=class{constructor(e,t,n,r){Ze(this,"_emitBinaryTokens");Ze(this,"_lineText");Ze(this,"_tokens");Ze(this,"_binaryTokens");Ze(this,"_lastTokenEndIndex");Ze(this,"_tokenTypeOverrides");this.balancedBracketSelectors=r,this._emitBinaryTokens=e,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){var r;if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let s=(e==null?void 0:e.tokenAttributes)??0,o=!1;if((r=this.balancedBracketSelectors)!=null&&r.matchesAlways&&(o=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=(e==null?void 0:e.getScopeNames())??[];for(const a of this._tokenTypeOverrides)a.matcher(i)&&(s=ab.set(s,0,a.type,null,-1,0,0));this.balancedBracketSelectors&&(o=this.balancedBracketSelectors.match(i))}if(o&&(s=ab.set(s,0,8,o,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===s){this._lastTokenEndIndex=t;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(s),this._lastTokenEndIndex=t;return}const n=(e==null?void 0:e.getScopeNames())??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:n}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},jze=class{constructor(e,t){Ze(this,"_grammars",new Map);Ze(this,"_rawGrammars",new Map);Ze(this,"_injectionGrammars",new Map);Ze(this,"_theme");this._onigLib=t,this._theme=e}dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}grammarForScopeName(e,t,n,r,s){if(!this._grammars.has(e)){let o=this._rawGrammars.get(e);if(!o)return null;this._grammars.set(e,Lze(e,o,t,n,r,s,this,this._onigLib))}return this._grammars.get(e)}},Uze=class{constructor(t){Ze(this,"_options");Ze(this,"_syncRegistry");Ze(this,"_ensureGrammarCache");this._options=t,this._syncRegistry=new jze(OT.createFromRawTheme(t.theme,t.colorMap),t.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(t,n){this._syncRegistry.setTheme(OT.createFromRawTheme(t,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(t,n,r){return this.loadGrammarWithConfiguration(t,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(t,n,r){return this._loadGrammar(t,n,r.embeddedLanguages,r.tokenTypes,new Bze(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(t){return this._loadGrammar(t,0,null,null,null)}_loadGrammar(t,n,r,s,o){const i=new bze(this._syncRegistry,t);for(;i.Q.length>0;)i.Q.map(a=>this._loadSingleGrammar(a.scopeName)),i.processQueue();return this._grammarForScopeName(t,n,r,s,o)}_loadSingleGrammar(t){this._ensureGrammarCache.has(t)||(this._doLoadSingleGrammar(t),this._ensureGrammarCache.set(t,!0))}_doLoadSingleGrammar(t){const n=this._options.loadGrammar(t);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(t):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(t,n=[],r=0,s=null){return this._syncRegistry.addGrammar(t,n),this._grammarForScopeName(t.scopeName,r,s)}_grammarForScopeName(t,n=0,r=null,s=null,o=null){return this._syncRegistry.grammarForScopeName(t,n,r,s,o)}},nI=tI.NULL;const Vte=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];let $w=class{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}};$w.prototype.normal={};$w.prototype.property={};$w.prototype.space=void 0;function qte(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new $w(n,r,t)}function Gx(e){return e.toLowerCase()}let wl=class{constructor(t,n){this.attribute=n,this.property=t}};wl.prototype.attribute="";wl.prototype.booleanish=!1;wl.prototype.boolean=!1;wl.prototype.commaOrSpaceSeparated=!1;wl.prototype.commaSeparated=!1;wl.prototype.defined=!1;wl.prototype.mustUseProperty=!1;wl.prototype.number=!1;wl.prototype.overloadedBoolean=!1;wl.prototype.property="";wl.prototype.spaceSeparated=!1;wl.prototype.space=void 0;let Hze=0;const yr=$m(),di=$m(),rI=$m(),Ot=$m(),Js=$m(),M1=$m(),Bl=$m();function $m(){return 2**++Hze}const sI=Object.freeze(Object.defineProperty({__proto__:null,boolean:yr,booleanish:di,commaOrSpaceSeparated:Bl,commaSeparated:M1,number:Ot,overloadedBoolean:rI,spaceSeparated:Js},Symbol.toStringTag,{value:"Module"})),Gk=Object.keys(sI);let G7=class extends wl{constructor(t,n,r,s){let o=-1;if(super(t,n),Wz(this,"space",s),typeof r=="number")for(;++o<Gk.length;){const i=Gk[o];Wz(this,Gk[o],(r&sI[i])===sI[i])}}};G7.prototype.defined=!0;function Wz(e,t,n){n&&(e[t]=n)}function Rb(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const o=new G7(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[Gx(r)]=r,n[Gx(o.attribute)]=r}return new $w(t,n,e.space)}const Gte=Rb({properties:{ariaActiveDescendant:null,ariaAtomic:di,ariaAutoComplete:null,ariaBusy:di,ariaChecked:di,ariaColCount:Ot,ariaColIndex:Ot,ariaColSpan:Ot,ariaControls:Js,ariaCurrent:null,ariaDescribedBy:Js,ariaDetails:null,ariaDisabled:di,ariaDropEffect:Js,ariaErrorMessage:null,ariaExpanded:di,ariaFlowTo:Js,ariaGrabbed:di,ariaHasPopup:null,ariaHidden:di,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Js,ariaLevel:Ot,ariaLive:null,ariaModal:di,ariaMultiLine:di,ariaMultiSelectable:di,ariaOrientation:null,ariaOwns:Js,ariaPlaceholder:null,ariaPosInSet:Ot,ariaPressed:di,ariaReadOnly:di,ariaRelevant:null,ariaRequired:di,ariaRoleDescription:Js,ariaRowCount:Ot,ariaRowIndex:Ot,ariaRowSpan:Ot,ariaSelected:di,ariaSetSize:Ot,ariaSort:null,ariaValueMax:Ot,ariaValueMin:Ot,ariaValueNow:Ot,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Wte(e,t){return t in e?e[t]:t}function Yte(e,t){return Wte(e,t.toLowerCase())}const Vze=Rb({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:M1,acceptCharset:Js,accessKey:Js,action:null,allow:null,allowFullScreen:yr,allowPaymentRequest:yr,allowUserMedia:yr,alt:null,as:null,async:yr,autoCapitalize:null,autoComplete:Js,autoFocus:yr,autoPlay:yr,blocking:Js,capture:null,charSet:null,checked:yr,cite:null,className:Js,cols:Ot,colSpan:null,content:null,contentEditable:di,controls:yr,controlsList:Js,coords:Ot|M1,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yr,defer:yr,dir:null,dirName:null,disabled:yr,download:rI,draggable:di,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yr,formTarget:null,headers:Js,height:Ot,hidden:rI,high:Ot,href:null,hrefLang:null,htmlFor:Js,httpEquiv:Js,id:null,imageSizes:null,imageSrcSet:null,inert:yr,inputMode:null,integrity:null,is:null,isMap:yr,itemId:null,itemProp:Js,itemRef:Js,itemScope:yr,itemType:Js,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yr,low:Ot,manifest:null,max:null,maxLength:Ot,media:null,method:null,min:null,minLength:Ot,multiple:yr,muted:yr,name:null,nonce:null,noModule:yr,noValidate:yr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yr,optimum:Ot,pattern:null,ping:Js,placeholder:null,playsInline:yr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yr,referrerPolicy:null,rel:Js,required:yr,reversed:yr,rows:Ot,rowSpan:Ot,sandbox:Js,scope:null,scoped:yr,seamless:yr,selected:yr,shadowRootClonable:yr,shadowRootDelegatesFocus:yr,shadowRootMode:null,shape:null,size:Ot,sizes:null,slot:null,span:Ot,spellCheck:di,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ot,step:null,style:null,tabIndex:Ot,target:null,title:null,translate:null,type:null,typeMustMatch:yr,useMap:null,value:di,width:Ot,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Js,axis:null,background:null,bgColor:null,border:Ot,borderColor:null,bottomMargin:Ot,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yr,declare:yr,event:null,face:null,frame:null,frameBorder:null,hSpace:Ot,leftMargin:Ot,link:null,longDesc:null,lowSrc:null,marginHeight:Ot,marginWidth:Ot,noResize:yr,noHref:yr,noShade:yr,noWrap:yr,object:null,profile:null,prompt:null,rev:null,rightMargin:Ot,rules:null,scheme:null,scrolling:di,standby:null,summary:null,text:null,topMargin:Ot,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ot,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yr,disableRemotePlayback:yr,prefix:null,property:null,results:Ot,security:null,unselectable:null},space:"html",transform:Yte}),qze=Rb({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Bl,accentHeight:Ot,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ot,amplitude:Ot,arabicForm:null,ascent:Ot,attributeName:null,attributeType:null,azimuth:Ot,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ot,by:null,calcMode:null,capHeight:Ot,className:Js,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ot,diffuseConstant:Ot,direction:null,display:null,dur:null,divisor:Ot,dominantBaseline:null,download:yr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ot,enableBackground:null,end:null,event:null,exponent:Ot,externalResourcesRequired:null,fill:null,fillOpacity:Ot,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:M1,g2:M1,glyphName:M1,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ot,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ot,horizOriginX:Ot,horizOriginY:Ot,id:null,ideographic:Ot,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ot,k:Ot,k1:Ot,k2:Ot,k3:Ot,k4:Ot,kernelMatrix:Bl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ot,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ot,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ot,overlineThickness:Ot,paintOrder:null,panose1:null,path:null,pathLength:Ot,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Js,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ot,pointsAtY:Ot,pointsAtZ:Ot,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Bl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Bl,rev:Bl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Bl,requiredFeatures:Bl,requiredFonts:Bl,requiredFormats:Bl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ot,specularExponent:Ot,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ot,strikethroughThickness:Ot,string:null,stroke:null,strokeDashArray:Bl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ot,strokeOpacity:Ot,strokeWidth:null,style:null,surfaceScale:Ot,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Bl,tabIndex:Ot,tableValues:null,target:null,targetX:Ot,targetY:Ot,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Bl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ot,underlineThickness:Ot,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ot,values:null,vAlphabetic:Ot,vMathematical:Ot,vectorEffect:null,vHanging:Ot,vIdeographic:Ot,version:null,vertAdvY:Ot,vertOriginX:Ot,vertOriginY:Ot,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ot,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Wte}),Kte=Rb({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Zte=Rb({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Yte}),Jte=Rb({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Gze={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Wze=/[A-Z]/g,Yz=/-[a-z]/g,Yze=/^data[-\w.:]+$/i;function MC(e,t){const n=Gx(t);let r=t,s=wl;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Yze.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(Yz,Zze);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!Yz.test(o)){let i=o.replace(Wze,Kze);i.charAt(0)!=="-"&&(i="-"+i),t="data"+i}}s=G7}return new s(r,t)}function Kze(e){return"-"+e.toLowerCase()}function Zze(e){return e.charAt(1).toUpperCase()}const Fw=qte([Gte,Vze,Kte,Zte,Jte],"html"),K0=qte([Gte,qze,Kte,Zte,Jte],"svg"),Kz={}.hasOwnProperty;function W7(e,t){const n=t||{};function r(s,...o){let i=r.invalid;const a=r.handlers;if(s&&Kz.call(s,e)){const l=String(s[e]);i=Kz.call(a,l)?a[l]:r.unknown}if(i)return i.call(this,s,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Jze=/["&'<>`]/g,Xze=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qze=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,eje=/[|\\{}()[\]^$+*?.]/g,Zz=new WeakMap;function tje(e,t){if(e=e.replace(t.subset?nje(t.subset):Jze,r),t.subset||t.escapeOnly)return e;return e.replace(Xze,n).replace(Qze,r);function n(s,o,i){return t.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,i.charCodeAt(o+2),t)}function r(s,o,i){return t.format(s.charCodeAt(0),i.charCodeAt(o+1),t)}}function nje(e){let t=Zz.get(e);return t||(t=rje(e),Zz.set(e,t)),t}function rje(e){const t=[];let n=-1;for(;++n<e.length;)t.push(e[n].replace(eje,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}const sje=/[\dA-Fa-f]/;function oje(e,t,n){const r="&#x"+e.toString(16).toUpperCase();return n&&t&&!sje.test(String.fromCharCode(t))?r:r+";"}const ije=/\d/;function aje(e,t,n){const r="&#"+String(e);return n&&t&&!ije.test(String.fromCharCode(t))?r:r+";"}const lje=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Wk={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},cje=["cent","copy","divide","gt","lt","not","para","times"],Xte={}.hasOwnProperty,oI={};let W2;for(W2 in Wk)Xte.call(Wk,W2)&&(oI[Wk[W2]]=W2);const uje=/[^\dA-Za-z]/;function dje(e,t,n,r){const s=String.fromCharCode(e);if(Xte.call(oI,s)){const o=oI[s],i="&"+o;return n&&lje.includes(o)&&!cje.includes(o)&&(!r||t&&t!==61&&uje.test(String.fromCharCode(t)))?i:i+";"}return""}function fje(e,t,n){let r=oje(e,t,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=dje(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const o=aje(e,t,n.omitOptionalSemicolons);o.length<r.length&&(r=o)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function O1(e,t){return tje(e,Object.assign({format:fje},t))}const hje=/^>|^->|<!--|-->|--!>|<!-$/g,pje=[">"],mje=["<",">"];function gje(e,t,n,r){return r.settings.bogusComments?"<?"+O1(e.value,Object.assign({},r.settings.characterReferences,{subset:pje}))+">":"<!--"+e.value.replace(hje,s)+"-->";function s(o){return O1(o,Object.assign({},r.settings.characterReferences,{subset:mje}))}}function bje(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function FT(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}function Jz(e){const t=[],n=String(e||"");let r=n.indexOf(","),s=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const i=n.slice(s,r).trim();(i||!o)&&t.push(i),s=r+1,r=n.indexOf(",",s)}return t}function Y7(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function Xz(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function K7(e){return e.join(" ").trim()}const yje=/[ \t\n\f\r]/g;function OC(e){return typeof e=="object"?e.type==="text"?Qz(e.value):!1:Qz(e)}function Qz(e){return e.replace(yje,"")===""}const Di=ene(1),Qte=ene(-1),vje=[];function ene(e){return t;function t(n,r,s){const o=n?n.children:vje;let i=(r||0)+e,a=o[i];if(!s)for(;a&&OC(a);)i+=e,a=o[i];return a}}const xje={}.hasOwnProperty;function tne(e){return t;function t(n,r,s){return xje.call(e,n.tagName)&&e[n.tagName](n,r,s)}}const Z7=tne({body:Eje,caption:Yk,colgroup:Yk,dd:Cje,dt:Tje,head:Yk,html:wje,li:Sje,optgroup:kje,option:Aje,p:_je,rp:ej,rt:ej,tbody:Ije,td:tj,tfoot:Rje,th:tj,thead:Nje,tr:Mje});function Yk(e,t,n){const r=Di(n,t,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&OC(r.value.charAt(0)))}function wje(e,t,n){const r=Di(n,t);return!r||r.type!=="comment"}function Eje(e,t,n){const r=Di(n,t);return!r||r.type!=="comment"}function _je(e,t,n){const r=Di(n,t);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function Sje(e,t,n){const r=Di(n,t);return!r||r.type==="element"&&r.tagName==="li"}function Tje(e,t,n){const r=Di(n,t);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function Cje(e,t,n){const r=Di(n,t);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function ej(e,t,n){const r=Di(n,t);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function kje(e,t,n){const r=Di(n,t);return!r||r.type==="element"&&r.tagName==="optgroup"}function Aje(e,t,n){const r=Di(n,t);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function Nje(e,t,n){const r=Di(n,t);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function Ije(e,t,n){const r=Di(n,t);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function Rje(e,t,n){return!Di(n,t)}function Mje(e,t,n){const r=Di(n,t);return!r||r.type==="element"&&r.tagName==="tr"}function tj(e,t,n){const r=Di(n,t);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const Oje=tne({body:Lje,colgroup:$je,head:Pje,html:Dje,tbody:Fje});function Dje(e){const t=Di(e,-1);return!t||t.type!=="comment"}function Pje(e){const t=new Set;for(const r of e.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(t.has(r.tagName))return!1;t.add(r.tagName)}const n=e.children[0];return!n||n.type==="element"}function Lje(e){const t=Di(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&OC(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function $je(e,t,n){const r=Qte(n,t),s=Di(e,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&Z7(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function Fje(e,t,n){const r=Qte(n,t),s=Di(e,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&Z7(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const Y2={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Bje(e,t,n,r){const s=r.schema,o=s.space==="svg"?!1:r.settings.omitOptionalTags;let i=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase());const a=[];let l;s.space==="html"&&e.tagName==="svg"&&(r.schema=K0);const c=zje(r,e.properties),u=r.all(s.space==="html"&&e.tagName==="template"?e.content:e);return r.schema=s,u&&(i=!1),(c||!o||!Oje(e,t,n))&&(a.push("<",e.tagName,c?" "+c:""),i&&(s.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!i&&(!o||!Z7(e,t,n))&&a.push("</"+e.tagName+">"),a.join("")}function zje(e,t){const n=[];let r=-1,s;if(t){for(s in t)if(t[s]!==null&&t[s]!==void 0){const o=jje(e,s,t[s]);o&&n.push(o)}}for(;++r<n.length;){const o=e.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&o!=='"'&&o!=="'"&&(n[r]+=" ")}return n.join("")}function jje(e,t,n){const r=MC(e.schema,t),s=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,o=e.settings.allowDangerousCharacters?0:1;let i=e.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=O1(r.attribute,Object.assign({},e.settings.characterReferences,{subset:Y2.name[s][o]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?Y7:K7)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?l:(e.settings.preferUnquoted&&(a=O1(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:Y2.unquoted[s][o]}))),a!==n&&(e.settings.quoteSmart&&FT(n,i)>FT(n,e.alternative)&&(i=e.alternative),a=i+O1(n,Object.assign({},e.settings.characterReferences,{subset:(i==="'"?Y2.single:Y2.double)[s][o],attribute:!0}))+i),l+(a&&"="+a))}const Uje=["<","&"];function nne(e,t,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:O1(e.value,Object.assign({},r.settings.characterReferences,{subset:Uje}))}function Hje(e,t,n,r){return r.settings.allowDangerousHtml?e.value:nne(e,t,n,r)}function Vje(e,t,n,r){return r.all(e)}const qje=W7("type",{invalid:Gje,unknown:Wje,handlers:{comment:gje,doctype:bje,element:Bje,raw:Hje,root:Vje,text:nne}});function Gje(e){throw new Error("Expected node, not `"+e+"`")}function Wje(e){const t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}const Yje={},Kje={},Zje=[];function Jje(e,t){const n=t||Yje,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:Xje,all:Qje,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||Vte,characterReferences:n.characterReferences||Kje,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?K0:Fw,quote:r,alternative:s}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function Xje(e,t,n){return qje(e,t,n,this)}function Qje(e){const t=[],n=e&&e.children||Zje;let r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function BT(e,t){const n=typeof e=="string"?{}:{...e.colorReplacements},r=typeof e=="string"?e:e.name;for(const[s,o]of Object.entries((t==null?void 0:t.colorReplacements)||{}))typeof o=="string"?n[s]=o:s===r&&Object.assign(n,o);return n}function E0(e,t){return e&&((t==null?void 0:t[e==null?void 0:e.toLowerCase()])||e)}function eUe(e){return Array.isArray(e)?e:[e]}async function rne(e){return Promise.resolve(typeof e=="function"?e():e).then(t=>t.default||t)}function J7(e){return!e||["plaintext","txt","text","plain"].includes(e)}function sne(e){return e==="ansi"||J7(e)}function X7(e){return e==="none"}function one(e){return X7(e)}function ine(e,t){var r;if(!t)return e;e.properties||(e.properties={}),(r=e.properties).class||(r.class=[]),typeof e.properties.class=="string"&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]);const n=Array.isArray(t)?t:t.split(/\s+/g);for(const s of n)s&&!e.properties.class.includes(s)&&e.properties.class.push(s);return e}function DC(e,t=!1){var o;const n=e.split(/(\r?\n)/g);let r=0;const s=[];for(let i=0;i<n.length;i+=2){const a=t?n[i]+(n[i+1]||""):n[i];s.push([a,r]),r+=n[i].length,r+=((o=n[i+1])==null?void 0:o.length)||0}return s}function tUe(e){const t=DC(e,!0).map(([s])=>s);function n(s){if(s===e.length)return{line:t.length-1,character:t[t.length-1].length};let o=s,i=0;for(const a of t){if(o<a.length)break;o-=a.length,i++}return{line:i,character:o}}function r(s,o){let i=0;for(let a=0;a<s;a++)i+=t[a].length;return i+=o,i}return{lines:t,indexToPos:n,posToIndex:r}}function nUe(e,t,n){const r=new Set;for(const o of e.matchAll(/lang=["']([\w-]+)["']/g))r.add(o[1]);for(const o of e.matchAll(/(?:```|~~~)([\w-]+)/g))r.add(o[1]);for(const o of e.matchAll(/\\begin\{([\w-]+)\}/g))r.add(o[1]);if(!n)return Array.from(r);const s=n.getBundledLanguages();return Array.from(r).filter(o=>o&&s[o])}const Q7="light-dark()",rUe=["color","background-color"];function sUe(e,t){let n=0;const r=[];for(const s of t)s>n&&r.push({...e,content:e.content.slice(n,s),offset:e.offset+n}),n=s;return n<e.content.length&&r.push({...e,content:e.content.slice(n),offset:e.offset+n}),r}function oUe(e,t){const n=Array.from(t instanceof Set?t:new Set(t)).sort((r,s)=>r-s);return n.length?e.map(r=>r.flatMap(s=>{const o=n.filter(i=>s.offset<i&&i<s.offset+s.content.length).map(i=>i-s.offset).sort((i,a)=>i-a);return o.length?sUe(s,o):s})):e}function iUe(e,t,n,r,s="css-vars"){const o={content:e.content,explanation:e.explanation,offset:e.offset},i=t.map(u=>zT(e.variants[u])),a=new Set(i.flatMap(u=>Object.keys(u))),l={},c=(u,f)=>{const m=f==="color"?"":f==="background-color"?"-bg":`-${f}`;return n+t[u]+(f==="color"?"":m)};return i.forEach((u,f)=>{for(const m of a){const g=u[m]||"inherit";if(f===0&&r&&rUe.includes(m))if(r===Q7&&i.length>1){const y=t.findIndex(S=>S==="light"),v=t.findIndex(S=>S==="dark");if(y===-1||v===-1)throw new hi('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const w=i[y][m]||"inherit",_=i[v][m]||"inherit";l[m]=`light-dark(${w}, ${_})`,s==="css-vars"&&(l[c(f,m)]=g)}else l[m]=g;else s==="css-vars"&&(l[c(f,m)]=g)}}),o.htmlStyle=l,o}function zT(e){const t={};if(e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle){e.fontStyle&ya.Italic&&(t["font-style"]="italic"),e.fontStyle&ya.Bold&&(t["font-weight"]="bold");const n=[];e.fontStyle&ya.Underline&&n.push("underline"),e.fontStyle&ya.Strikethrough&&n.push("line-through"),n.length&&(t["text-decoration"]=n.join(" "))}return t}function iI(e){return typeof e=="string"?e:Object.entries(e).map(([t,n])=>`${t}:${n}`).join(";")}const ane=new WeakMap;function PC(e,t){ane.set(e,t)}function Wx(e){return ane.get(e)}class Mb{constructor(...t){Ze(this,"_stacks",{});Ze(this,"lang");if(t.length===2){const[n,r]=t;this.lang=r,this._stacks=n}else{const[n,r,s]=t;this.lang=r,this._stacks={[s]:n}}}get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(t,n){return new Mb(Object.fromEntries(eUe(n).map(r=>[r,nI])),t)}getInternalStack(t=this.theme){return this._stacks[t]}getScopes(t=this.theme){return aUe(this._stacks[t])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function aUe(e){const t=[],n=new Set;function r(s){var i;if(n.has(s))return;n.add(s);const o=(i=s==null?void 0:s.nameScopesList)==null?void 0:i.scopeName;o&&t.push(o),s.parent&&r(s.parent)}return r(e),t}function lUe(e,t){if(!(e instanceof Mb))throw new hi("Invalid grammar state");return e.getInternalStack(t)}function cUe(){const e=new WeakMap;function t(n){if(!e.has(n.meta)){let r=function(i){if(typeof i=="number"){if(i<0||i>n.source.length)throw new hi(`Invalid decoration offset: ${i}. Code length: ${n.source.length}`);return{...s.indexToPos(i),offset:i}}else{const a=s.lines[i.line];if(a===void 0)throw new hi(`Invalid decoration position ${JSON.stringify(i)}. Lines length: ${s.lines.length}`);let l=i.character;if(l<0&&(l=a.length+l),l<0||l>a.length)throw new hi(`Invalid decoration position ${JSON.stringify(i)}. Line ${i.line} length: ${a.length}`);return{...i,character:l,offset:s.posToIndex(i.line,l)}}};const s=tUe(n.source),o=(n.options.decorations||[]).map(i=>({...i,start:r(i.start),end:r(i.end)}));uUe(o),e.set(n.meta,{decorations:o,converter:s,source:n.source})}return e.get(n.meta)}return{name:"shiki:decorations",tokens(n){var i;if(!((i=this.options.decorations)!=null&&i.length))return;const s=t(this).decorations.flatMap(a=>[a.start.offset,a.end.offset]);return oUe(n,s)},code(n){var u;if(!((u=this.options.decorations)!=null&&u.length))return;const r=t(this),s=Array.from(n.children).filter(f=>f.type==="element"&&f.tagName==="span");if(s.length!==r.converter.lines.length)throw new hi(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function o(f,m,g,y){const v=s[f];let w="",_=-1,S=-1;if(m===0&&(_=0),g===0&&(S=0),g===Number.POSITIVE_INFINITY&&(S=v.children.length),_===-1||S===-1)for(let R=0;R<v.children.length;R++)w+=lne(v.children[R]),_===-1&&w.length===m&&(_=R+1),S===-1&&w.length===g&&(S=R+1);if(_===-1)throw new hi(`Failed to find start index for decoration ${JSON.stringify(y.start)}`);if(S===-1)throw new hi(`Failed to find end index for decoration ${JSON.stringify(y.end)}`);const k=v.children.slice(_,S);if(!y.alwaysWrap&&k.length===v.children.length)a(v,y,"line");else if(!y.alwaysWrap&&k.length===1&&k[0].type==="element")a(k[0],y,"token");else{const R={type:"element",tagName:"span",properties:{},children:k};a(R,y,"wrapper"),v.children.splice(_,k.length,R)}}function i(f,m){s[f]=a(s[f],m,"line")}function a(f,m,g){var w;const y=m.properties||{},v=m.transform||(_=>_);return f.tagName=m.tagName||"span",f.properties={...f.properties,...y,class:f.properties.class},(w=m.properties)!=null&&w.class&&ine(f,m.properties.class),f=v(f,g)||f,f}const l=[],c=r.decorations.sort((f,m)=>m.start.offset-f.start.offset||f.end.offset-m.end.offset);for(const f of c){const{start:m,end:g}=f;if(m.line===g.line)o(m.line,m.character,g.character,f);else if(m.line<g.line){o(m.line,m.character,Number.POSITIVE_INFINITY,f);for(let y=m.line+1;y<g.line;y++)l.unshift(()=>i(y,f));o(g.line,0,g.character,f)}}l.forEach(f=>f())}}}function uUe(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.start.offset>n.end.offset)throw new hi(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=t+1;r<e.length;r++){const s=e[r],o=n.start.offset<=s.start.offset&&s.start.offset<n.end.offset,i=n.start.offset<s.end.offset&&s.end.offset<=n.end.offset,a=s.start.offset<=n.start.offset&&n.start.offset<s.end.offset,l=s.start.offset<n.end.offset&&n.end.offset<=s.end.offset;if(o||i||a||l){if(o&&i||a&&l||a&&n.start.offset===n.end.offset||i&&s.start.offset===s.end.offset)continue;throw new hi(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function lne(e){return e.type==="text"?e.value:e.type==="element"?e.children.map(lne).join(""):""}const dUe=[cUe()];function jT(e){const t=fUe(e.transformers||[]);return[...t.pre,...t.normal,...t.post,...dUe]}function fUe(e){const t=[],n=[],r=[];for(const s of e)switch(s.enforce){case"pre":t.push(s);break;case"post":n.push(s);break;default:r.push(s)}return{pre:t,post:n,normal:r}}var Xp=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Kk={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function hUe(e,t){const n=e.indexOf("\x1B",t);if(n!==-1&&e[n+1]==="["){const r=e.indexOf("m",n);if(r!==-1)return{sequence:e.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:e.length}}function nj(e){const t=e.shift();if(t==="2"){const n=e.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(t==="5"){const n=e.shift();if(n)return{type:"table",index:Number(n)}}}function pUe(e){const t=[];for(;e.length>0;){const n=e.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)t.push({type:"resetAll"});else if(r<=9)Kk[r]&&t.push({type:"setDecoration",value:Kk[r]});else if(r<=29){const s=Kk[r-20];s&&(t.push({type:"resetDecoration",value:s}),s==="dim"&&t.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)t.push({type:"setForegroundColor",value:{type:"named",name:Xp[r-30]}});else if(r===38){const s=nj(e);s&&t.push({type:"setForegroundColor",value:s})}else if(r===39)t.push({type:"resetForegroundColor"});else if(r<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:Xp[r-40]}});else if(r===48){const s=nj(e);s&&t.push({type:"setBackgroundColor",value:s})}else r===49?t.push({type:"resetBackgroundColor"}):r===53?t.push({type:"setDecoration",value:"overline"}):r===55?t.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?t.push({type:"setForegroundColor",value:{type:"named",name:Xp[r-90+8]}}):r>=100&&r<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:Xp[r-100+8]}})}return t}function mUe(){let e=null,t=null,n=new Set;return{parse(r){const s=[];let o=0;do{const i=hUe(r,o),a=i.sequence?r.substring(o,i.startPosition):r.substring(o);if(a.length>0&&s.push({value:a,foreground:e,background:t,decorations:new Set(n)}),i.sequence){const l=pUe(i.sequence);for(const c of l)c.type==="resetAll"?(e=null,t=null,n.clear()):c.type==="resetForegroundColor"?e=null:c.type==="resetBackgroundColor"?t=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?e=c.value:c.type==="setBackgroundColor"?t=c.value:c.type==="setDecoration"&&n.add(c.value)}o=i.position}while(o<r.length);return s}}}var gUe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function bUe(e=gUe){function t(a){return e[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let c=0;c<Xp.length;c++)r.push(t(Xp[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let f=0;f<6;f++)r.push(n([a[c],a[u],a[f]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function o(a){return s()[a]}function i(a){switch(a.type){case"named":return t(a.name);case"rgb":return n(a.rgb);case"table":return o(a.index)}}return{value:i}}const yUe={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function vUe(e,t,n){const r=BT(e,n),s=DC(t),o=Object.fromEntries(Xp.map(l=>{var f;const c=`terminal.ansi${l[0].toUpperCase()}${l.substring(1)}`,u=(f=e.colors)==null?void 0:f[c];return[l,u||yUe[l]]})),i=bUe(o),a=mUe();return s.map(l=>a.parse(l[0]).map(c=>{let u,f;c.decorations.has("reverse")?(u=c.background?i.value(c.background):e.bg,f=c.foreground?i.value(c.foreground):e.fg):(u=c.foreground?i.value(c.foreground):e.fg,f=c.background?i.value(c.background):void 0),u=E0(u,r),f=E0(f,r),c.decorations.has("dim")&&(u=xUe(u));let m=ya.None;return c.decorations.has("bold")&&(m|=ya.Bold),c.decorations.has("italic")&&(m|=ya.Italic),c.decorations.has("underline")&&(m|=ya.Underline),c.decorations.has("strikethrough")&&(m|=ya.Strikethrough),{content:c.value,offset:l[1],color:u,bgColor:f,fontStyle:m}}))}function xUe(e){const t=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/i);if(t)if(t[3]){const r=Math.round(Number.parseInt(t[3],16)/2).toString(16).padStart(2,"0");return`#${t[1]}${t[2]}${r}`}else return t[2]?`#${t[1]}${t[2]}80`:`#${Array.from(t[1]).map(r=>`${r}${r}`).join("")}80`;const n=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:e}function eM(e,t,n={}){const{lang:r="text",theme:s=e.getLoadedThemes()[0]}=n;if(J7(r)||X7(s))return DC(t).map(l=>[{content:l[0],offset:l[1]}]);const{theme:o,colorMap:i}=e.setTheme(s);if(r==="ansi")return vUe(o,t,n);const a=e.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new hi(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(o.name))throw new hi(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${o.name}"`)}return EUe(t,a,o,i,n)}function wUe(...e){if(e.length===2)return Wx(e[1]);const[t,n,r={}]=e,{lang:s="text",theme:o=t.getLoadedThemes()[0]}=r;if(J7(s)||X7(o))throw new hi("Plain language does not have grammar state");if(s==="ansi")throw new hi("ANSI language does not have grammar state");const{theme:i,colorMap:a}=t.setTheme(o),l=t.getLanguage(s);return new Mb(UT(n,l,i,a,r).stateStack,l.name,i.name)}function EUe(e,t,n,r,s){const o=UT(e,t,n,r,s),i=new Mb(UT(e,t,n,r,s).stateStack,t.name,n.name);return PC(o.tokens,i),o.tokens}function UT(e,t,n,r,s){const o=BT(n,s),{tokenizeMaxLineLength:i=0,tokenizeTimeLimit:a=500}=s,l=DC(e);let c=s.grammarState?lUe(s.grammarState,n.name)??nI:s.grammarContextCode!=null?UT(s.grammarContextCode,t,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:nI,u=[];const f=[];for(let m=0,g=l.length;m<g;m++){const[y,v]=l[m];if(y===""){u=[],f.push([]);continue}if(i>0&&y.length>=i){u=[],f.push([{content:y,offset:v,color:"",fontStyle:0}]);continue}let w,_,S;s.includeExplanation&&(w=t.tokenizeLine(y,c,a),_=w.tokens,S=0);const k=t.tokenizeLine2(y,c,a),R=k.tokens.length/2;for(let O=0;O<R;O++){const M=k.tokens[2*O],P=O+1<R?k.tokens[2*O+2]:y.length;if(M===P)continue;const j=k.tokens[2*O+1],q=E0(r[ab.getForeground(j)],o),U=ab.getFontStyle(j),z={content:y.substring(M,P),offset:v+M,color:q,fontStyle:U};if(s.includeExplanation){const H=[];if(s.includeExplanation!=="scopeName")for(const W of n.settings){let X;switch(typeof W.scope){case"string":X=W.scope.split(/,/).map(J=>J.trim());break;case"object":X=W.scope;break;default:continue}H.push({settings:W,selectors:X.map(J=>J.split(/ /))})}z.explanation=[];let F=0;for(;M+F<P;){const W=_[S],X=y.substring(W.startIndex,W.endIndex);F+=X.length,z.explanation.push({content:X,scopes:s.includeExplanation==="scopeName"?_Ue(W.scopes):SUe(H,W.scopes)}),S+=1}}u.push(z)}f.push(u),u=[],c=k.ruleStack}return{tokens:f,stateStack:c}}function _Ue(e){return e.map(t=>({scopeName:t}))}function SUe(e,t){const n=[];for(let r=0,s=t.length;r<s;r++){const o=t[r];n[r]={scopeName:o,themeMatches:CUe(e,o,t.slice(0,r))}}return n}function rj(e,t){return e===t||t.substring(0,e.length)===e&&t[e.length]==="."}function TUe(e,t,n){if(!rj(e[e.length-1],t))return!1;let r=e.length-2,s=n.length-1;for(;r>=0&&s>=0;)rj(e[r],n[s])&&(r-=1),s-=1;return r===-1}function CUe(e,t,n){const r=[];for(const{selectors:s,settings:o}of e)for(const i of s)if(TUe(i,t,n)){r.push(o);break}return r}function cne(e,t,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),s=r.map(l=>{const c=eM(e,t,{...n,theme:l.theme}),u=Wx(c),f=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:f}}),o=kUe(...s.map(l=>l.tokens)),i=o[0].map((l,c)=>l.map((u,f)=>{const m={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in n&&n.includeExplanation&&(m.explanation=u.explanation),o.forEach((g,y)=>{const{content:v,explanation:w,offset:_,...S}=g[c][f];m.variants[r[y].color]=S}),m})),a=s[0].state?new Mb(Object.fromEntries(s.map(l=>{var c;return[l.theme,(c=l.state)==null?void 0:c.getInternalStack(l.theme)]})),s[0].state.lang):void 0;return a&&PC(i,a),i}function kUe(...e){const t=e.map(()=>[]),n=e.length;for(let r=0;r<e[0].length;r++){const s=e.map(l=>l[r]),o=t.map(()=>[]);t.forEach((l,c)=>l.push(o[c]));const i=s.map(()=>0),a=s.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const u=a[c];u.content.length===l?(o[c].push(u),i[c]+=1,a[c]=s[c][i[c]]):(o[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return t}function HT(e,t,n){let r,s,o,i,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-",colorsRendering:f="css-vars"}=n,m=Object.entries(n.themes).filter(_=>_[1]).map(_=>({color:_[0],theme:_[1]})).sort((_,S)=>_.color===c?-1:S.color===c?1:0);if(m.length===0)throw new hi("`themes` option must not be empty");const g=cne(e,t,n);if(l=Wx(g),c&&Q7!==c&&!m.find(_=>_.color===c))throw new hi(`\`themes\` option must contain the defaultColor key \`${c}\``);const y=m.map(_=>e.getTheme(_.theme)),v=m.map(_=>_.color);o=g.map(_=>_.map(S=>iUe(S,v,u,c,f))),l&&PC(o,l);const w=m.map(_=>BT(_.theme,n));s=sj(m,y,w,u,c,"fg",f),r=sj(m,y,w,u,c,"bg",f),i=`shiki-themes ${y.map(_=>_.name).join(" ")}`,a=c?void 0:[s,r].join(";")}else if("theme"in n){const c=BT(n.theme,n);o=eM(e,t,n);const u=e.getTheme(n.theme);r=E0(u.bg,c),s=E0(u.fg,c),i=u.name,l=Wx(o)}else throw new hi("Invalid options, either `theme` or `themes` must be provided");return{tokens:o,fg:s,bg:r,themeName:i,rootStyle:a,grammarState:l}}function sj(e,t,n,r,s,o,i){return e.map((a,l)=>{const c=E0(t[l][o],n[l])||"inherit",u=`${r+a.color}${o==="bg"?"-bg":""}:${c}`;if(l===0&&s){if(s===Q7&&e.length>1){const f=e.findIndex(v=>v.color==="light"),m=e.findIndex(v=>v.color==="dark");if(f===-1||m===-1)throw new hi('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const g=E0(t[f][o],n[f])||"inherit",y=E0(t[m][o],n[m])||"inherit";return`light-dark(${g}, ${y});${u}`}return c}return i==="css-vars"?u:null}).filter(a=>!!a).join(";")}function VT(e,t,n,r={meta:{},options:n,codeToHast:(s,o)=>VT(e,s,o),codeToTokens:(s,o)=>HT(e,s,o)}){var y,v;let s=t;for(const w of jT(n))s=((y=w.preprocess)==null?void 0:y.call(r,s,n))||s;let{tokens:o,fg:i,bg:a,themeName:l,rootStyle:c,grammarState:u}=HT(e,s,n);const{mergeWhitespaces:f=!0,mergeSameStyleTokens:m=!1}=n;f===!0?o=NUe(o):f==="never"&&(o=IUe(o)),m&&(o=RUe(o));const g={...r,get source(){return s}};for(const w of jT(n))o=((v=w.tokens)==null?void 0:v.call(g,o))||o;return AUe(o,{...n,fg:i,bg:a,themeName:l,rootStyle:c},g,u)}function AUe(e,t,n,r=Wx(e)){var y,v,w,_;const s=jT(t),o=[],i={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=t;let c={type:"element",tagName:"pre",properties:{class:`shiki ${t.themeName||""}`,style:t.rootStyle||`background-color:${t.bg};color:${t.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(t.meta||{})).filter(([S])=>!S.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:o};const f=[],m={...n,structure:a,addClassToHast:ine,get source(){return n.source},get tokens(){return e},get options(){return t},get root(){return i},get pre(){return c},get code(){return u},get lines(){return f}};if(e.forEach((S,k)=>{var M,P;k&&(a==="inline"?i.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&o.push({type:"text",value:`
`}));let R={type:"element",tagName:"span",properties:{class:"line"},children:[]},O=0;for(const j of S){let q={type:"element",tagName:"span",properties:{...j.htmlAttrs},children:[{type:"text",value:j.content}]};const U=iI(j.htmlStyle||zT(j));U&&(q.properties.style=U);for(const z of s)q=((M=z==null?void 0:z.span)==null?void 0:M.call(m,q,k+1,O,R,j))||q;a==="inline"?i.children.push(q):a==="classic"&&R.children.push(q),O+=j.content.length}if(a==="classic"){for(const j of s)R=((P=j==null?void 0:j.line)==null?void 0:P.call(m,R,k+1))||R;f.push(R),o.push(R)}else a==="inline"&&f.push(R)}),a==="classic"){for(const S of s)u=((y=S==null?void 0:S.code)==null?void 0:y.call(m,u))||u;c.children.push(u);for(const S of s)c=((v=S==null?void 0:S.pre)==null?void 0:v.call(m,c))||c;i.children.push(c)}else if(a==="inline"){const S=[];let k={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const M of i.children)M.type==="element"&&M.tagName==="br"?(S.push(k),k={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(M.type==="element"||M.type==="text")&&k.children.push(M);S.push(k);let O={type:"element",tagName:"code",properties:{},children:S};for(const M of s)O=((w=M==null?void 0:M.code)==null?void 0:w.call(m,O))||O;i.children=[];for(let M=0;M<O.children.length;M++){M>0&&i.children.push({type:"element",tagName:"br",properties:{},children:[]});const P=O.children[M];P.type==="element"&&i.children.push(...P.children)}}let g=i;for(const S of s)g=((_=S==null?void 0:S.root)==null?void 0:_.call(m,g))||g;return r&&PC(g,r),g}function NUe(e){return e.map(t=>{const n=[];let r="",s=0;return t.forEach((o,i)=>{const l=!(o.fontStyle&&(o.fontStyle&ya.Underline||o.fontStyle&ya.Strikethrough));l&&o.content.match(/^\s+$/)&&t[i+1]?(s||(s=o.offset),r+=o.content):r?(l?n.push({...o,offset:s,content:r+o.content}):n.push({content:r,offset:s},o),s=0,r=""):n.push(o)}),n})}function IUe(e){return e.map(t=>t.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,o,i]=r;if(!s&&!i)return n;const a=[{...n,offset:n.offset+s.length,content:o}];return s&&a.unshift({content:s,offset:n.offset}),i&&a.push({content:i,offset:n.offset+s.length+o.length}),a}))}function RUe(e){return e.map(t=>{const n=[];for(const r of t){if(n.length===0){n.push({...r});continue}const s=n[n.length-1],o=iI(s.htmlStyle||zT(s)),i=iI(r.htmlStyle||zT(r)),a=s.fontStyle&&(s.fontStyle&ya.Underline||s.fontStyle&ya.Strikethrough),l=r.fontStyle&&(r.fontStyle&ya.Underline||r.fontStyle&ya.Strikethrough);!a&&!l&&o===i?s.content+=r.content:n.push({...r})}return n})}const MUe=Jje;function OUe(e,t,n){var o;const r={meta:{},options:n,codeToHast:(i,a)=>VT(e,i,a),codeToTokens:(i,a)=>HT(e,i,a)};let s=MUe(VT(e,t,n,r));for(const i of jT(n))s=((o=i.postprocess)==null?void 0:o.call(r,s,n))||s;return s}const oj={light:"#333333",dark:"#bbbbbb"},ij={light:"#fffffe",dark:"#1e1e1e"},aj="__shiki_resolved";function tM(e){var a,l,c,u,f;if(e!=null&&e[aj])return e;const t={...e};t.tokenColors&&!t.settings&&(t.settings=t.tokenColors,delete t.tokenColors),t.type||(t.type="dark"),t.colorReplacements={...t.colorReplacements},t.settings||(t.settings=[]);let{bg:n,fg:r}=t;if(!n||!r){const m=t.settings?t.settings.find(g=>!g.name&&!g.scope):void 0;(a=m==null?void 0:m.settings)!=null&&a.foreground&&(r=m.settings.foreground),(l=m==null?void 0:m.settings)!=null&&l.background&&(n=m.settings.background),!r&&((c=t==null?void 0:t.colors)!=null&&c["editor.foreground"])&&(r=t.colors["editor.foreground"]),!n&&((u=t==null?void 0:t.colors)!=null&&u["editor.background"])&&(n=t.colors["editor.background"]),r||(r=t.type==="light"?oj.light:oj.dark),n||(n=t.type==="light"?ij.light:ij.dark),t.fg=r,t.bg=n}t.settings[0]&&t.settings[0].settings&&!t.settings[0].scope||t.settings.unshift({settings:{foreground:t.fg,background:t.bg}});let s=0;const o=new Map;function i(m){var y;if(o.has(m))return o.get(m);s+=1;const g=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return(y=t.colorReplacements)!=null&&y[`#${g}`]?i(m):(o.set(m,g),g)}t.settings=t.settings.map(m=>{var w,_;const g=((w=m.settings)==null?void 0:w.foreground)&&!m.settings.foreground.startsWith("#"),y=((_=m.settings)==null?void 0:_.background)&&!m.settings.background.startsWith("#");if(!g&&!y)return m;const v={...m,settings:{...m.settings}};if(g){const S=i(m.settings.foreground);t.colorReplacements[S]=m.settings.foreground,v.settings.foreground=S}if(y){const S=i(m.settings.background);t.colorReplacements[S]=m.settings.background,v.settings.background=S}return v});for(const m of Object.keys(t.colors||{}))if((m==="editor.foreground"||m==="editor.background"||m.startsWith("terminal.ansi"))&&!((f=t.colors[m])!=null&&f.startsWith("#"))){const g=i(t.colors[m]);t.colorReplacements[g]=t.colors[m],t.colors[m]=g}return Object.defineProperty(t,aj,{enumerable:!1,writable:!1,value:!0}),t}async function une(e){return Array.from(new Set((await Promise.all(e.filter(t=>!sne(t)).map(async t=>await rne(t).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function dne(e){return(await Promise.all(e.map(async n=>one(n)?null:tM(await rne(n))))).filter(n=>!!n)}let DUe=3;function PUe(e,t=3){t>DUe||console.trace(`[SHIKI DEPRECATE]: ${e}`)}let m1=class extends Error{constructor(t){super(t),this.name="ShikiError"}};class LUe extends Uze{constructor(n,r,s,o={}){super(n);Ze(this,"_resolvedThemes",new Map);Ze(this,"_resolvedGrammars",new Map);Ze(this,"_langMap",new Map);Ze(this,"_langGraph",new Map);Ze(this,"_textmateThemeCache",new WeakMap);Ze(this,"_loadedThemesCache",null);Ze(this,"_loadedLanguagesCache",null);this._resolver=n,this._themes=r,this._langs=s,this._alias=o,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}getTheme(n){return typeof n=="string"?this._resolvedThemes.get(n):this.loadTheme(n)}loadTheme(n){const r=tM(n);return r.name&&(this._resolvedThemes.set(r.name,r),this._loadedThemesCache=null),r}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(n){let r=this._textmateThemeCache.get(n);r||(r=OT.createFromRawTheme(n),this._textmateThemeCache.set(n,r)),this._syncRegistry.setTheme(r)}getGrammar(n){if(this._alias[n]){const r=new Set([n]);for(;this._alias[n];){if(n=this._alias[n],r.has(n))throw new m1(`Circular alias \`${Array.from(r).join(" -> ")} -> ${n}\``);r.add(n)}}return this._resolvedGrammars.get(n)}loadLanguage(n){var i,a,l,c;if(this.getGrammar(n.name))return;const r=new Set([...this._langMap.values()].filter(u=>{var f;return(f=u.embeddedLangsLazy)==null?void 0:f.includes(n.name)}));this._resolver.addLanguage(n);const s={balancedBracketSelectors:n.balancedBracketSelectors||["*"],unbalancedBracketSelectors:n.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(n.scopeName,n);const o=this.loadGrammarWithConfiguration(n.scopeName,1,s);if(o.name=n.name,this._resolvedGrammars.set(n.name,o),n.aliases&&n.aliases.forEach(u=>{this._alias[u]=n.name}),this._loadedLanguagesCache=null,r.size)for(const u of r)this._resolvedGrammars.delete(u.name),this._loadedLanguagesCache=null,(a=(i=this._syncRegistry)==null?void 0:i._injectionGrammars)==null||a.delete(u.scopeName),(c=(l=this._syncRegistry)==null?void 0:l._grammars)==null||c.delete(u.scopeName),this.loadLanguage(this._langMap.get(u.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(n){for(const o of n)this.resolveEmbeddedLanguages(o);const r=Array.from(this._langGraph.entries()),s=r.filter(([o,i])=>!i);if(s.length){const o=r.filter(([i,a])=>{var l;return a&&((l=a.embeddedLangs)==null?void 0:l.some(c=>s.map(([u])=>u).includes(c)))}).filter(i=>!s.includes(i));throw new m1(`Missing languages ${s.map(([i])=>`\`${i}\``).join(", ")}, required by ${o.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[o,i]of r)this._resolver.addLanguage(i);for(const[o,i]of r)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(n){this._langMap.set(n.name,n),this._langGraph.set(n.name,n);const r=n.embeddedLanguages??n.embeddedLangs;if(r)for(const s of r)this._langGraph.set(s,this._langMap.get(s))}}class $Ue{constructor(t,n){Ze(this,"_langs",new Map);Ze(this,"_scopeToLang",new Map);Ze(this,"_injections",new Map);Ze(this,"_onigLib");this._onigLib={createOnigScanner:r=>t.createScanner(r),createOnigString:r=>t.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(t){return this._langs.get(t)}loadGrammar(t){return this._scopeToLang.get(t)}addLanguage(t){this._langs.set(t.name,t),t.aliases&&t.aliases.forEach(n=>{this._langs.set(n,t)}),this._scopeToLang.set(t.scopeName,t),t.injectTo&&t.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(t.scopeName)})}getInjections(t){const n=t.split(".");let r=[];for(let s=1;s<=n.length;s++){const o=n.slice(0,s).join(".");r=[...r,...this._injections.get(o)||[]]}return r}}let Jy=0;function FUe(e){Jy+=1,e.warnings!==!1&&Jy>=10&&Jy%10===0&&console.warn(`[Shiki] ${Jy} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let t=!1;if(!e.engine)throw new m1("`engine` option is required for synchronous mode");const n=(e.langs||[]).flat(1),r=(e.themes||[]).flat(1).map(tM),s=new $Ue(e.engine,n),o=new LUe(s,r,n,e.langAlias);let i;function a(S){w();const k=o.getGrammar(typeof S=="string"?S:S.name);if(!k)throw new m1(`Language \`${S}\` not found, you may need to load it first`);return k}function l(S){if(S==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};w();const k=o.getTheme(S);if(!k)throw new m1(`Theme \`${S}\` not found, you may need to load it first`);return k}function c(S){w();const k=l(S);i!==S&&(o.setTheme(k),i=S);const R=o.getColorMap();return{theme:k,colorMap:R}}function u(){return w(),o.getLoadedThemes()}function f(){return w(),o.getLoadedLanguages()}function m(...S){w(),o.loadLanguages(S.flat(1))}async function g(...S){return m(await une(S))}function y(...S){w();for(const k of S.flat(1))o.loadTheme(k)}async function v(...S){return w(),y(await dne(S))}function w(){if(t)throw new m1("Shiki instance has been disposed")}function _(){t||(t=!0,o.dispose(),Jy-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:u,getLoadedLanguages:f,loadLanguage:g,loadLanguageSync:m,loadTheme:v,loadThemeSync:y,dispose:_,[Symbol.dispose]:_}}async function BUe(e){e.engine||PUe("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[t,n,r]=await Promise.all([dne(e.themes||[]),une(e.langs||[]),e.engine]);return FUe({...e,themes:t,langs:n,engine:r})}async function zUe(e){const t=await BUe(e);return{getLastGrammarState:(...n)=>wUe(t,...n),codeToTokensBase:(n,r)=>eM(t,n,r),codeToTokensWithThemes:(n,r)=>cne(t,n,r),codeToTokens:(n,r)=>HT(t,n,r),codeToHast:(n,r)=>VT(t,n,r),codeToHtml:(n,r)=>OUe(t,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...t,getInternalContext:()=>t}}function jUe(e){const t=e.langs,n=e.themes,r=e.engine;async function s(o){function i(f){var m;if(typeof f=="string"){if(sne(f))return[];f=((m=o.langAlias)==null?void 0:m[f])||f;const g=t[f];if(!g)throw new hi(`Language \`${f}\` is not included in this bundle. You may want to load it from external source.`);return g}return f}function a(f){if(one(f))return"none";if(typeof f=="string"){const m=n[f];if(!m)throw new hi(`Theme \`${f}\` is not included in this bundle. You may want to load it from external source.`);return m}return f}const l=(o.themes??[]).map(f=>a(f)),c=(o.langs??[]).map(f=>i(f)),u=await zUe({engine:o.engine??r(),...o,themes:l,langs:c});return{...u,loadLanguage(...f){return u.loadLanguage(...f.map(i))},loadTheme(...f){return u.loadTheme(...f.map(a))},getBundledLanguages(){return t},getBundledThemes(){return n}}}return s}function UUe(e){let t;async function n(r={}){if(t){const s=await t;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else{t=e({...r,themes:[],langs:[]});const s=await t;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}}return n}function HUe(e,t){const n=UUe(e);async function r(s,o){var l;const i=await n({langs:[o.lang],themes:"theme"in o?[o.theme]:Object.values(o.themes)}),a=await((l=t==null?void 0:t.guessEmbeddedLanguages)==null?void 0:l.call(t,s,o.lang,i));return a&&await i.loadLanguage(...a),i}return{getSingletonHighlighter(s){return n(s)},async codeToHtml(s,o){return(await r(s,o)).codeToHtml(s,o)},async codeToHast(s,o){return(await r(s,o)).codeToHast(s,o)},async codeToTokens(s,o){return(await r(s,o)).codeToTokens(s,o)},async codeToTokensBase(s,o){return(await r(s,o)).codeToTokensBase(s,o)},async codeToTokensWithThemes(s,o){return(await r(s,o)).codeToTokensWithThemes(s,o)},async getLastGrammarState(s,o){return(await n({langs:[o.lang],themes:[o.theme]})).getLastGrammarState(s,o)}}}const fne=[{id:"abap",name:"ABAP",import:(()=>me(()=>import("./abap-BdImnpbu.js"),[],import.meta.url))},{id:"actionscript-3",name:"ActionScript",import:(()=>me(()=>import("./actionscript-3-CfeIJUat.js"),[],import.meta.url))},{id:"ada",name:"Ada",import:(()=>me(()=>import("./ada-bCR0ucgS.js"),[],import.meta.url))},{id:"angular-html",name:"Angular HTML",import:(()=>me(()=>import("./angular-html-CU67Zn6k.js").then(e=>e.f),__vite__mapDeps([0,1,2,3]),import.meta.url))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>me(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5]),import.meta.url))},{id:"apache",name:"Apache Conf",import:(()=>me(()=>import("./apache-Pmp26Uib.js"),[],import.meta.url))},{id:"apex",name:"Apex",import:(()=>me(()=>import("./apex-DDbsPZ6N.js"),[],import.meta.url))},{id:"apl",name:"APL",import:(()=>me(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9]),import.meta.url))},{id:"applescript",name:"AppleScript",import:(()=>me(()=>import("./applescript-Co6uUVPk.js"),[],import.meta.url))},{id:"ara",name:"Ara",import:(()=>me(()=>import("./ara-BRHolxvo.js"),[],import.meta.url))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>me(()=>import("./asciidoc-Dv7Oe6Be.js"),[],import.meta.url))},{id:"asm",name:"Assembly",import:(()=>me(()=>import("./asm-D_Q5rh1f.js"),[],import.meta.url))},{id:"astro",name:"Astro",import:(()=>me(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13]),import.meta.url))},{id:"awk",name:"AWK",import:(()=>me(()=>import("./awk-DMzUqQB5.js"),[],import.meta.url))},{id:"ballerina",name:"Ballerina",import:(()=>me(()=>import("./ballerina-BFfxhgS-.js"),[],import.meta.url))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>me(()=>import("./bat-BkioyH1T.js"),[],import.meta.url))},{id:"beancount",name:"Beancount",import:(()=>me(()=>import("./beancount-k_qm7-4y.js"),[],import.meta.url))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>me(()=>import("./berry-uYugtg8r.js"),[],import.meta.url))},{id:"bibtex",name:"BibTeX",import:(()=>me(()=>import("./bibtex-CHM0blh-.js"),[],import.meta.url))},{id:"bicep",name:"Bicep",import:(()=>me(()=>import("./bicep-Bmn6On1c.js"),[],import.meta.url))},{id:"blade",name:"Blade",import:(()=>me(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9]),import.meta.url))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>me(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18]),import.meta.url))},{id:"c",name:"C",import:(()=>me(()=>import("./c-BIGW1oBm.js"),[],import.meta.url))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>me(()=>import("./cadence-Bv_4Rxtq.js"),[],import.meta.url))},{id:"cairo",name:"Cairo",import:(()=>me(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20]),import.meta.url))},{id:"clarity",name:"Clarity",import:(()=>me(()=>import("./clarity-D53aC0YG.js"),[],import.meta.url))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>me(()=>import("./clojure-P80f7IUj.js"),[],import.meta.url))},{id:"cmake",name:"CMake",import:(()=>me(()=>import("./cmake-D1j8_8rp.js"),[],import.meta.url))},{id:"cobol",name:"COBOL",import:(()=>me(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8]),import.meta.url))},{id:"codeowners",name:"CODEOWNERS",import:(()=>me(()=>import("./codeowners-Bp6g37R7.js"),[],import.meta.url))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>me(()=>import("./codeql-DsOJ9woJ.js"),[],import.meta.url))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>me(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2]),import.meta.url))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>me(()=>import("./common-lisp-Cg-RD9OK.js"),[],import.meta.url))},{id:"coq",name:"Coq",import:(()=>me(()=>import("./coq-DkFqJrB1.js"),[],import.meta.url))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>me(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16]),import.meta.url))},{id:"crystal",name:"Crystal",import:(()=>me(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28]),import.meta.url))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>me(()=>import("./csharp-K5feNrxe.js"),[],import.meta.url))},{id:"css",name:"CSS",import:(()=>me(()=>import("./css-DPfMkruS.js"),[],import.meta.url))},{id:"csv",name:"CSV",import:(()=>me(()=>import("./csv-fuZLfV_i.js"),[],import.meta.url))},{id:"cue",name:"CUE",import:(()=>me(()=>import("./cue-D82EKSYY.js"),[],import.meta.url))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>me(()=>import("./cypher-COkxafJQ.js"),[],import.meta.url))},{id:"d",name:"D",import:(()=>me(()=>import("./d-85-TOEBH.js"),[],import.meta.url))},{id:"dart",name:"Dart",import:(()=>me(()=>import("./dart-CF10PKvl.js"),[],import.meta.url))},{id:"dax",name:"DAX",import:(()=>me(()=>import("./dax-CEL-wOlO.js"),[],import.meta.url))},{id:"desktop",name:"Desktop",import:(()=>me(()=>import("./desktop-BmXAJ9_W.js"),[],import.meta.url))},{id:"diff",name:"Diff",import:(()=>me(()=>import("./diff-D97Zzqfu.js"),[],import.meta.url))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>me(()=>import("./docker-BcOcwvcX.js"),[],import.meta.url))},{id:"dotenv",name:"dotEnv",import:(()=>me(()=>import("./dotenv-Da5cRb03.js"),[],import.meta.url))},{id:"dream-maker",name:"Dream Maker",import:(()=>me(()=>import("./dream-maker-BtqSS_iP.js"),[],import.meta.url))},{id:"edge",name:"Edge",import:(()=>me(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15]),import.meta.url))},{id:"elixir",name:"Elixir",import:(()=>me(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3]),import.meta.url))},{id:"elm",name:"Elm",import:(()=>me(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26]),import.meta.url))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>me(()=>import("./emacs-lisp-C9XAeP06.js"),[],import.meta.url))},{id:"erb",name:"ERB",import:(()=>me(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>me(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40]),import.meta.url))},{id:"fennel",name:"Fennel",import:(()=>me(()=>import("./fennel-BYunw83y.js"),[],import.meta.url))},{id:"fish",name:"Fish",import:(()=>me(()=>import("./fish-BvzEVeQv.js"),[],import.meta.url))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>me(()=>import("./fluent-C4IJs8-o.js"),[],import.meta.url))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>me(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42]),import.meta.url))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>me(()=>import("./fortran-free-form-D22FLkUw.js"),[],import.meta.url))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>me(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40]),import.meta.url))},{id:"gdresource",name:"GDResource",import:(()=>me(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46]),import.meta.url))},{id:"gdscript",name:"GDScript",import:(()=>me(()=>import("./gdscript-DTMYz4Jt.js"),[],import.meta.url))},{id:"gdshader",name:"GDShader",import:(()=>me(()=>import("./gdshader-DkwncUOv.js"),[],import.meta.url))},{id:"genie",name:"Genie",import:(()=>me(()=>import("./genie-D0YGMca9.js"),[],import.meta.url))},{id:"gherkin",name:"Gherkin",import:(()=>me(()=>import("./gherkin-DyxjwDmM.js"),[],import.meta.url))},{id:"git-commit",name:"Git Commit Message",import:(()=>me(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48]),import.meta.url))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>me(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28]),import.meta.url))},{id:"gleam",name:"Gleam",import:(()=>me(()=>import("./gleam-BspZqrRM.js"),[],import.meta.url))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>me(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1]),import.meta.url))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>me(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1]),import.meta.url))},{id:"glsl",name:"GLSL",import:(()=>me(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26]),import.meta.url))},{id:"gnuplot",name:"Gnuplot",import:(()=>me(()=>import("./gnuplot-DdkO51Og.js"),[],import.meta.url))},{id:"go",name:"Go",import:(()=>me(()=>import("./go-Dn2_MT6a.js"),[],import.meta.url))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>me(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13]),import.meta.url))},{id:"groovy",name:"Groovy",import:(()=>me(()=>import("./groovy-gcz8RCvz.js"),[],import.meta.url))},{id:"hack",name:"Hack",import:(()=>me(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16]),import.meta.url))},{id:"haml",name:"Ruby Haml",import:(()=>me(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3]),import.meta.url))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>me(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38]),import.meta.url))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>me(()=>import("./haskell-Df6bDoY_.js"),[],import.meta.url))},{id:"haxe",name:"Haxe",import:(()=>me(()=>import("./haxe-CzTSHFRz.js"),[],import.meta.url))},{id:"hcl",name:"HashiCorp HCL",import:(()=>me(()=>import("./hcl-BWvSN4gD.js"),[],import.meta.url))},{id:"hjson",name:"Hjson",import:(()=>me(()=>import("./hjson-D5-asLiD.js"),[],import.meta.url))},{id:"hlsl",name:"HLSL",import:(()=>me(()=>import("./hlsl-D3lLCCz7.js"),[],import.meta.url))},{id:"html",name:"HTML",import:(()=>me(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3]),import.meta.url))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>me(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3]),import.meta.url))},{id:"http",name:"HTTP",import:(()=>me(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13]),import.meta.url))},{id:"hurl",name:"Hurl",import:(()=>me(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56]),import.meta.url))},{id:"hxml",name:"HXML",import:(()=>me(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58]),import.meta.url))},{id:"hy",name:"Hy",import:(()=>me(()=>import("./hy-DFXneXwc.js"),[],import.meta.url))},{id:"imba",name:"Imba",import:(()=>me(()=>import("./imba-DGztddWO.js"),[],import.meta.url))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>me(()=>import("./ini-BEwlwnbL.js"),[],import.meta.url))},{id:"java",name:"Java",import:(()=>me(()=>import("./java-CylS5w8V.js"),[],import.meta.url))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>me(()=>import("./javascript-wDzz0qaB.js"),[],import.meta.url))},{id:"jinja",name:"Jinja",import:(()=>me(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3]),import.meta.url))},{id:"jison",name:"Jison",import:(()=>me(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2]),import.meta.url))},{id:"json",name:"JSON",import:(()=>me(()=>import("./json-Cp-IABpG.js"),[],import.meta.url))},{id:"json5",name:"JSON5",import:(()=>me(()=>import("./json5-C9tS-k6U.js"),[],import.meta.url))},{id:"jsonc",name:"JSON with Comments",import:(()=>me(()=>import("./jsonc-Des-eS-w.js"),[],import.meta.url))},{id:"jsonl",name:"JSON Lines",import:(()=>me(()=>import("./jsonl-DcaNXYhu.js"),[],import.meta.url))},{id:"jsonnet",name:"Jsonnet",import:(()=>me(()=>import("./jsonnet-DFQXde-d.js"),[],import.meta.url))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>me(()=>import("./jssm-C2t-YnRu.js"),[],import.meta.url))},{id:"jsx",name:"JSX",import:(()=>me(()=>import("./jsx-g9-lgVsj.js"),[],import.meta.url))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>me(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62]),import.meta.url))},{id:"kdl",name:"KDL",import:(()=>me(()=>import("./kdl-DV7GczEv.js"),[],import.meta.url))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>me(()=>import("./kotlin-BdnUsdx6.js"),[],import.meta.url))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>me(()=>import("./kusto-BvAqAH-y.js"),[],import.meta.url))},{id:"latex",name:"LaTeX",import:(()=>me(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62]),import.meta.url))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>me(()=>import("./lean-Bc6EcWN3.js"),[],import.meta.url))},{id:"less",name:"Less",import:(()=>me(()=>import("./less-B1dDrJ26.js"),[],import.meta.url))},{id:"liquid",name:"Liquid",import:(()=>me(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9]),import.meta.url))},{id:"llvm",name:"LLVM IR",import:(()=>me(()=>import("./llvm-BtvRca6l.js"),[],import.meta.url))},{id:"log",name:"Log file",import:(()=>me(()=>import("./log-2UxHyX5q.js"),[],import.meta.url))},{id:"logo",name:"Logo",import:(()=>me(()=>import("./logo-BtOb2qkB.js"),[],import.meta.url))},{id:"lua",name:"Lua",import:(()=>me(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26]),import.meta.url))},{id:"luau",name:"Luau",import:(()=>me(()=>import("./luau-CXu1NL6O.js"),[],import.meta.url))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>me(()=>import("./make-CHLpvVh8.js"),[],import.meta.url))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>me(()=>import("./markdown-Cvjx9yec.js"),[],import.meta.url))},{id:"marko",name:"Marko",import:(()=>me(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11]),import.meta.url))},{id:"matlab",name:"MATLAB",import:(()=>me(()=>import("./matlab-D7o27uSR.js"),[],import.meta.url))},{id:"mdc",name:"MDC",import:(()=>me(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3]),import.meta.url))},{id:"mdx",name:"MDX",import:(()=>me(()=>import("./mdx-Cmh6b_Ma.js"),[],import.meta.url))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>me(()=>import("./mermaid-DKYwYmdq.js"),[],import.meta.url))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>me(()=>import("./mipsasm-CKIfxQSi.js"),[],import.meta.url))},{id:"mojo",name:"Mojo",import:(()=>me(()=>import("./mojo-1DNp92w6.js"),[],import.meta.url))},{id:"move",name:"Move",import:(()=>me(()=>import("./move-Bu9oaDYs.js"),[],import.meta.url))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>me(()=>import("./narrat-DRg8JJMk.js"),[],import.meta.url))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>me(()=>import("./nextflow-BrzmwbiE.js"),[],import.meta.url))},{id:"nginx",name:"Nginx",import:(()=>me(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26]),import.meta.url))},{id:"nim",name:"Nim",import:(()=>me(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40]),import.meta.url))},{id:"nix",name:"Nix",import:(()=>me(()=>import("./nix-c8nO5XWb.js"),[],import.meta.url))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>me(()=>import("./nushell-C-sUppwS.js"),[],import.meta.url))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>me(()=>import("./objective-c-DXmwc3jG.js"),[],import.meta.url))},{id:"objective-cpp",name:"Objective-C++",import:(()=>me(()=>import("./objective-cpp-CLxacb5B.js"),[],import.meta.url))},{id:"ocaml",name:"OCaml",import:(()=>me(()=>import("./ocaml-C0hk2d4L.js"),[],import.meta.url))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>me(()=>import("./openscad-C4EeE6gA.js"),[],import.meta.url))},{id:"pascal",name:"Pascal",import:(()=>me(()=>import("./pascal-D93ZcfNL.js"),[],import.meta.url))},{id:"perl",name:"Perl",import:(()=>me(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16]),import.meta.url))},{id:"php",name:"PHP",import:(()=>me(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9]),import.meta.url))},{id:"pkl",name:"Pkl",import:(()=>me(()=>import("./pkl-u5AG7uiY.js"),[],import.meta.url))},{id:"plsql",name:"PL/SQL",import:(()=>me(()=>import("./plsql-ChMvpjG-.js"),[],import.meta.url))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>me(()=>import("./po-BTJTHyun.js"),[],import.meta.url))},{id:"polar",name:"Polar",import:(()=>me(()=>import("./polar-C0HS_06l.js"),[],import.meta.url))},{id:"postcss",name:"PostCSS",import:(()=>me(()=>import("./postcss-CXtECtnM.js"),[],import.meta.url))},{id:"powerquery",name:"PowerQuery",import:(()=>me(()=>import("./powerquery-CEu0bR-o.js"),[],import.meta.url))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>me(()=>import("./powershell-Dpen1YoG.js"),[],import.meta.url))},{id:"prisma",name:"Prisma",import:(()=>me(()=>import("./prisma-Dd19v3D-.js"),[],import.meta.url))},{id:"prolog",name:"Prolog",import:(()=>me(()=>import("./prolog-CbFg5uaA.js"),[],import.meta.url))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>me(()=>import("./proto-DyJlTyXw.js"),[],import.meta.url))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>me(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1]),import.meta.url))},{id:"puppet",name:"Puppet",import:(()=>me(()=>import("./puppet-BMWR74SV.js"),[],import.meta.url))},{id:"purescript",name:"PureScript",import:(()=>me(()=>import("./purescript-CklMAg4u.js"),[],import.meta.url))},{id:"python",name:"Python",aliases:["py"],import:(()=>me(()=>import("./python-B6aJPvgy.js"),[],import.meta.url))},{id:"qml",name:"QML",import:(()=>me(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2]),import.meta.url))},{id:"qmldir",name:"QML Directory",import:(()=>me(()=>import("./qmldir-C8lEn-DE.js"),[],import.meta.url))},{id:"qss",name:"Qt Style Sheets",import:(()=>me(()=>import("./qss-IeuSbFQv.js"),[],import.meta.url))},{id:"r",name:"R",import:(()=>me(()=>import("./r-DiinP2Uv.js"),[],import.meta.url))},{id:"racket",name:"Racket",import:(()=>me(()=>import("./racket-BqYA7rlc.js"),[],import.meta.url))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>me(()=>import("./raku-DXvB9xmW.js"),[],import.meta.url))},{id:"razor",name:"ASP.NET Razor",import:(()=>me(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76]),import.meta.url))},{id:"reg",name:"Windows Registry Script",import:(()=>me(()=>import("./reg-C-SQnVFl.js"),[],import.meta.url))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>me(()=>import("./regexp-CDVJQ6XC.js"),[],import.meta.url))},{id:"rel",name:"Rel",import:(()=>me(()=>import("./rel-C3B-1QV4.js"),[],import.meta.url))},{id:"riscv",name:"RISC-V",import:(()=>me(()=>import("./riscv-BM1_JUlF.js"),[],import.meta.url))},{id:"rosmsg",name:"ROS Interface",import:(()=>me(()=>import("./rosmsg-BJDFO7_C.js"),[],import.meta.url))},{id:"rst",name:"reStructuredText",import:(()=>me(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37]),import.meta.url))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>me(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>me(()=>import("./rust-B1yitclQ.js"),[],import.meta.url))},{id:"sas",name:"SAS",import:(()=>me(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16]),import.meta.url))},{id:"sass",name:"Sass",import:(()=>me(()=>import("./sass-Cj5Yp3dK.js"),[],import.meta.url))},{id:"scala",name:"Scala",import:(()=>me(()=>import("./scala-C151Ov-r.js"),[],import.meta.url))},{id:"scheme",name:"Scheme",import:(()=>me(()=>import("./scheme-C98Dy4si.js"),[],import.meta.url))},{id:"scss",name:"SCSS",import:(()=>me(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3]),import.meta.url))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>me(()=>import("./sdbl-DVxCFoDh.js"),[],import.meta.url))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>me(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81]),import.meta.url))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>me(()=>import("./shellscript-Yzrsuije.js"),[],import.meta.url))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>me(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28]),import.meta.url))},{id:"smalltalk",name:"Smalltalk",import:(()=>me(()=>import("./smalltalk-BERRCDM3.js"),[],import.meta.url))},{id:"solidity",name:"Solidity",import:(()=>me(()=>import("./solidity-rGO070M0.js"),[],import.meta.url))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>me(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3]),import.meta.url))},{id:"sparql",name:"SPARQL",import:(()=>me(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85]),import.meta.url))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>me(()=>import("./splunk-BtCnVYZw.js"),[],import.meta.url))},{id:"sql",name:"SQL",import:(()=>me(()=>import("./sql-BLtJtn59.js"),[],import.meta.url))},{id:"ssh-config",name:"SSH Config",import:(()=>me(()=>import("./ssh-config-_ykCGR6B.js"),[],import.meta.url))},{id:"stata",name:"Stata",import:(()=>me(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16]),import.meta.url))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>me(()=>import("./stylus-BEDo0Tqx.js"),[],import.meta.url))},{id:"svelte",name:"Svelte",import:(()=>me(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12]),import.meta.url))},{id:"swift",name:"Swift",import:(()=>me(()=>import("./swift-Dg5xB15N.js"),[],import.meta.url))},{id:"system-verilog",name:"SystemVerilog",import:(()=>me(()=>import("./system-verilog-CnnmHF94.js"),[],import.meta.url))},{id:"systemd",name:"Systemd Units",import:(()=>me(()=>import("./systemd-4A_iFExJ.js"),[],import.meta.url))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>me(()=>import("./talonscript-CkByrt1z.js"),[],import.meta.url))},{id:"tasl",name:"Tasl",import:(()=>me(()=>import("./tasl-QIJgUcNo.js"),[],import.meta.url))},{id:"tcl",name:"Tcl",import:(()=>me(()=>import("./tcl-dwOrl1Do.js"),[],import.meta.url))},{id:"templ",name:"Templ",import:(()=>me(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3]),import.meta.url))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>me(()=>import("./terraform-BETggiCN.js"),[],import.meta.url))},{id:"tex",name:"TeX",import:(()=>me(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62]),import.meta.url))},{id:"toml",name:"TOML",import:(()=>me(()=>import("./toml-vGWfd6FD.js"),[],import.meta.url))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>me(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8]),import.meta.url))},{id:"tsv",name:"TSV",import:(()=>me(()=>import("./tsv-B_m7g4N7.js"),[],import.meta.url))},{id:"tsx",name:"TSX",import:(()=>me(()=>import("./tsx-COt5Ahok.js"),[],import.meta.url))},{id:"turtle",name:"Turtle",import:(()=>me(()=>import("./turtle-BsS91CYL.js"),[],import.meta.url))},{id:"twig",name:"Twig",import:(()=>me(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>me(()=>import("./typescript-BPQ3VLAy.js"),[],import.meta.url))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>me(()=>import("./typespec-BGHnOYBU.js"),[],import.meta.url))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>me(()=>import("./typst-DHCkPAjA.js"),[],import.meta.url))},{id:"v",name:"V",import:(()=>me(()=>import("./v-BcVCzyr7.js"),[],import.meta.url))},{id:"vala",name:"Vala",import:(()=>me(()=>import("./vala-CsfeWuGM.js"),[],import.meta.url))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>me(()=>import("./vb-D17OF-Vu.js"),[],import.meta.url))},{id:"verilog",name:"Verilog",import:(()=>me(()=>import("./verilog-BQ8w6xss.js"),[],import.meta.url))},{id:"vhdl",name:"VHDL",import:(()=>me(()=>import("./vhdl-CeAyd5Ju.js"),[],import.meta.url))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>me(()=>import("./viml-CJc9bBzg.js"),[],import.meta.url))},{id:"vue",name:"Vue",import:(()=>me(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1]),import.meta.url))},{id:"vue-html",name:"Vue HTML",import:(()=>me(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1]),import.meta.url))},{id:"vue-vine",name:"Vue Vine",import:(()=>me(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1]),import.meta.url))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>me(()=>import("./vyper-CDx5xZoG.js"),[],import.meta.url))},{id:"wasm",name:"WebAssembly",import:(()=>me(()=>import("./wasm-MzD3tlZU.js"),[],import.meta.url))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>me(()=>import("./wenyan-BV7otONQ.js"),[],import.meta.url))},{id:"wgsl",name:"WGSL",import:(()=>me(()=>import("./wgsl-Dx-B1_4e.js"),[],import.meta.url))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>me(()=>import("./wikitext-BhOHFoWU.js"),[],import.meta.url))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>me(()=>import("./wit-5i3qLPDT.js"),[],import.meta.url))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>me(()=>import("./wolfram-lXgVvXCa.js"),[],import.meta.url))},{id:"xml",name:"XML",import:(()=>me(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8]),import.meta.url))},{id:"xsl",name:"XSL",import:(()=>me(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8]),import.meta.url))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>me(()=>import("./yaml-Buea-lGh.js"),[],import.meta.url))},{id:"zenscript",name:"ZenScript",import:(()=>me(()=>import("./zenscript-DVFEvuxE.js"),[],import.meta.url))},{id:"zig",name:"Zig",import:(()=>me(()=>import("./zig-VOosw3JB.js"),[],import.meta.url))}],VUe=Object.fromEntries(fne.map(e=>[e.id,e.import])),qUe=Object.fromEntries(fne.flatMap(e=>{var t;return((t=e.aliases)==null?void 0:t.map(n=>[n,e.import]))||[]})),GUe={...VUe,...qUe},WUe=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>me(()=>import("./andromeeda-C-Jbm3Hp.js"),[],import.meta.url))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>me(()=>import("./aurora-x-D-2ljcwZ.js"),[],import.meta.url))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>me(()=>import("./ayu-dark-Cv9koXgw.js"),[],import.meta.url))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>me(()=>import("./catppuccin-frappe-DFWUc33u.js"),[],import.meta.url))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>me(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[],import.meta.url))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>me(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[],import.meta.url))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>me(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[],import.meta.url))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>me(()=>import("./dark-plus-C3mMm8J8.js"),[],import.meta.url))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>me(()=>import("./dracula-BzJJZx-M.js"),[],import.meta.url))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>me(()=>import("./dracula-soft-BXkSAIEj.js"),[],import.meta.url))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>me(()=>import("./everforest-dark-BgDCqdQA.js"),[],import.meta.url))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>me(()=>import("./everforest-light-C8M2exoo.js"),[],import.meta.url))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>me(()=>import("./github-dark-DHJKELXO.js"),[],import.meta.url))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>me(()=>import("./github-dark-default-Cuk6v7N8.js"),[],import.meta.url))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>me(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[],import.meta.url))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>me(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[],import.meta.url))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>me(()=>import("./github-light-DAi9KRSo.js"),[],import.meta.url))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>me(()=>import("./github-light-default-D7oLnXFd.js"),[],import.meta.url))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>me(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[],import.meta.url))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>me(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[],import.meta.url))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>me(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[],import.meta.url))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>me(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[],import.meta.url))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>me(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[],import.meta.url))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>me(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[],import.meta.url))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>me(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[],import.meta.url))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>me(()=>import("./houston-DnULxvSX.js"),[],import.meta.url))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>me(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[],import.meta.url))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>me(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[],import.meta.url))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>me(()=>import("./kanagawa-wave-DWedfzmr.js"),[],import.meta.url))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>me(()=>import("./laserwave-DUszq2jm.js"),[],import.meta.url))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>me(()=>import("./light-plus-B7mTdjB0.js"),[],import.meta.url))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>me(()=>import("./material-theme-D5KoaKCx.js"),[],import.meta.url))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>me(()=>import("./material-theme-darker-BfHTSMKl.js"),[],import.meta.url))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>me(()=>import("./material-theme-lighter-B0m2ddpp.js"),[],import.meta.url))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>me(()=>import("./material-theme-ocean-CyktbL80.js"),[],import.meta.url))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>me(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[],import.meta.url))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>me(()=>import("./min-dark-CafNBF8u.js"),[],import.meta.url))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>me(()=>import("./min-light-CTRr51gU.js"),[],import.meta.url))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>me(()=>import("./monokai-D4h5O-jR.js"),[],import.meta.url))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>me(()=>import("./night-owl-C39BiMTA.js"),[],import.meta.url))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>me(()=>import("./nord-Ddv68eIx.js"),[],import.meta.url))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>me(()=>import("./one-dark-pro-DVMEJ2y_.js"),[],import.meta.url))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>me(()=>import("./one-light-PoHY5YXO.js"),[],import.meta.url))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>me(()=>import("./plastic-3e1v2bzS.js"),[],import.meta.url))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>me(()=>import("./poimandres-CS3Unz2-.js"),[],import.meta.url))},{id:"red",displayName:"Red",type:"dark",import:(()=>me(()=>import("./red-bN70gL4F.js"),[],import.meta.url))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>me(()=>import("./rose-pine-qdsjHGoJ.js"),[],import.meta.url))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>me(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[],import.meta.url))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>me(()=>import("./rose-pine-moon-D4_iv3hh.js"),[],import.meta.url))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>me(()=>import("./slack-dark-BthQWCQV.js"),[],import.meta.url))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>me(()=>import("./slack-ochin-DqwNpetd.js"),[],import.meta.url))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>me(()=>import("./snazzy-light-Bw305WKR.js"),[],import.meta.url))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>me(()=>import("./solarized-dark-DXbdFlpD.js"),[],import.meta.url))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>me(()=>import("./solarized-light-L9t79GZl.js"),[],import.meta.url))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>me(()=>import("./synthwave-84-CbfX1IO0.js"),[],import.meta.url))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>me(()=>import("./tokyo-night-hegEt444.js"),[],import.meta.url))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>me(()=>import("./vesper-DU1UobuO.js"),[],import.meta.url))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>me(()=>import("./vitesse-black-Bkuqu6BP.js"),[],import.meta.url))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>me(()=>import("./vitesse-dark-D0r3Knsf.js"),[],import.meta.url))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>me(()=>import("./vitesse-light-CVO1_9PV.js"),[],import.meta.url))}],YUe=Object.fromEntries(WUe.map(e=>[e.id,e.import]));class nM extends Error{constructor(t){super(t),this.name="ShikiError"}}function KUe(){return 2147483648}function ZUe(){return typeof performance<"u"?performance.now():Date.now()}const JUe=(e,t)=>e+(t-e%t)%t;async function XUe(e){let t,n;const r={};function s(g){n=g,r.HEAPU8=new Uint8Array(g),r.HEAPU32=new Uint32Array(g)}function o(g,y,v){r.HEAPU8.copyWithin(g,y,y+v)}function i(g){try{return t.grow(g-n.byteLength+65535>>>16),s(t.buffer),1}catch{}}function a(g){const y=r.HEAPU8.length;g=g>>>0;const v=KUe();if(g>v)return!1;for(let w=1;w<=4;w*=2){let _=y*(1+.2/w);_=Math.min(_,g+100663296);const S=Math.min(v,JUe(Math.max(g,_),65536));if(i(S))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(g,y,v=1024){const w=y+v;let _=y;for(;g[_]&&!(_>=w);)++_;if(_-y>16&&g.buffer&&l)return l.decode(g.subarray(y,_));let S="";for(;y<_;){let k=g[y++];if(!(k&128)){S+=String.fromCharCode(k);continue}const R=g[y++]&63;if((k&224)===192){S+=String.fromCharCode((k&31)<<6|R);continue}const O=g[y++]&63;if((k&240)===224?k=(k&15)<<12|R<<6|O:k=(k&7)<<18|R<<12|O<<6|g[y++]&63,k<65536)S+=String.fromCharCode(k);else{const M=k-65536;S+=String.fromCharCode(55296|M>>10,56320|M&1023)}}return S}function u(g,y){return g?c(r.HEAPU8,g,y):""}const f={emscripten_get_now:ZUe,emscripten_memcpy_big:o,emscripten_resize_heap:a,fd_write:()=>0};async function m(){const y=await e({env:f,wasi_snapshot_preview1:f});t=y.memory,s(t.buffer),Object.assign(r,y),r.UTF8ToString=u}return await m(),r}var QUe=Object.defineProperty,eHe=(e,t,n)=>t in e?QUe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ni=(e,t,n)=>eHe(e,typeof t!="symbol"?t+"":t,n);let zi=null;function tHe(e){throw new nM(e.UTF8ToString(e.getLastOnigError()))}class LC{constructor(t){Ni(this,"utf16Length"),Ni(this,"utf8Length"),Ni(this,"utf16Value"),Ni(this,"utf8Value"),Ni(this,"utf16OffsetToUtf8"),Ni(this,"utf8OffsetToUtf16");const n=t.length,r=LC._utf8ByteLength(t),s=r!==n,o=s?new Uint32Array(n+1):null;s&&(o[n]=r);const i=s?new Uint32Array(r+1):null;s&&(i[r]=n);const a=new Uint8Array(r);let l=0;for(let c=0;c<n;c++){const u=t.charCodeAt(c);let f=u,m=!1;if(u>=55296&&u<=56319&&c+1<n){const g=t.charCodeAt(c+1);g>=56320&&g<=57343&&(f=(u-55296<<10)+65536|g-56320,m=!0)}s&&(o[c]=l,m&&(o[c+1]=l),f<=127?i[l+0]=c:f<=2047?(i[l+0]=c,i[l+1]=c):f<=65535?(i[l+0]=c,i[l+1]=c,i[l+2]=c):(i[l+0]=c,i[l+1]=c,i[l+2]=c,i[l+3]=c)),f<=127?a[l++]=f:f<=2047?(a[l++]=192|(f&1984)>>>6,a[l++]=128|(f&63)>>>0):f<=65535?(a[l++]=224|(f&61440)>>>12,a[l++]=128|(f&4032)>>>6,a[l++]=128|(f&63)>>>0):(a[l++]=240|(f&1835008)>>>18,a[l++]=128|(f&258048)>>>12,a[l++]=128|(f&4032)>>>6,a[l++]=128|(f&63)>>>0),m&&c++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=t,this.utf8Value=a,this.utf16OffsetToUtf8=o,this.utf8OffsetToUtf16=i}static _utf8ByteLength(t){let n=0;for(let r=0,s=t.length;r<s;r++){const o=t.charCodeAt(r);let i=o,a=!1;if(o>=55296&&o<=56319&&r+1<s){const l=t.charCodeAt(r+1);l>=56320&&l<=57343&&(i=(o-55296<<10)+65536|l-56320,a=!0)}i<=127?n+=1:i<=2047?n+=2:i<=65535?n+=3:n+=4,a&&r++}return n}createString(t){const n=t.omalloc(this.utf8Length);return t.HEAPU8.set(this.utf8Value,n),n}}const $C=class ed{constructor(t){if(Ni(this,"id",++ed.LAST_ID),Ni(this,"_onigBinding"),Ni(this,"content"),Ni(this,"utf16Length"),Ni(this,"utf8Length"),Ni(this,"utf16OffsetToUtf8"),Ni(this,"utf8OffsetToUtf16"),Ni(this,"ptr"),!zi)throw new nM("Must invoke loadWasm first.");this._onigBinding=zi,this.content=t;const n=new LC(t);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!ed._sharedPtrInUse?(ed._sharedPtr||(ed._sharedPtr=zi.omalloc(1e4)),ed._sharedPtrInUse=!0,zi.HEAPU8.set(n.utf8Value,ed._sharedPtr),this.ptr=ed._sharedPtr):this.ptr=n.createString(zi)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===ed._sharedPtr?ed._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Ni($C,"LAST_ID",0);Ni($C,"_sharedPtr",0);Ni($C,"_sharedPtrInUse",!1);let hne=$C;class nHe{constructor(t){if(Ni(this,"_onigBinding"),Ni(this,"_ptr"),!zi)throw new nM("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=t.length;a<l;a++){const c=new LC(t[a]);n[a]=c.createString(zi),r[a]=c.utf8Length}const s=zi.omalloc(4*t.length);zi.HEAPU32.set(n,s/4);const o=zi.omalloc(4*t.length);zi.HEAPU32.set(r,o/4);const i=zi.createOnigScanner(s,o,t.length);for(let a=0,l=t.length;a<l;a++)zi.ofree(n[a]);zi.ofree(o),zi.ofree(s),i===0&&tHe(zi),this._onigBinding=zi,this._ptr=i}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(t,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof t=="string"){t=new hne(t);const o=this._findNextMatchSync(t,n,!1,s);return t.dispose(),o}return this._findNextMatchSync(t,n,!1,s)}_findNextMatchSync(t,n,r,s){const o=this._onigBinding,i=o.findNextOnigScannerMatch(this._ptr,t.id,t.ptr,t.utf8Length,t.convertUtf16OffsetToUtf8(n),s);if(i===0)return null;const a=o.HEAPU32;let l=i/4;const c=a[l++],u=a[l++],f=[];for(let m=0;m<u;m++){const g=t.convertUtf8OffsetToUtf16(a[l++]),y=t.convertUtf8OffsetToUtf16(a[l++]);f[m]={start:g,end:y,length:y-g}}return{index:c,captureIndices:f}}}function rHe(e){return typeof e.instantiator=="function"}function sHe(e){return typeof e.default=="function"}function oHe(e){return typeof e.data<"u"}function iHe(e){return typeof Response<"u"&&e instanceof Response}function aHe(e){var t;return typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||ArrayBuffer.isView(e))||typeof Buffer<"u"&&((t=Buffer.isBuffer)==null?void 0:t.call(Buffer,e))||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&e instanceof Uint32Array}let K2;function lHe(e){if(K2)return K2;async function t(){zi=await XUe(async n=>{let r=e;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),rHe(r)?r=await r.instantiator(n):sHe(r)?r=await r.default(n):(oHe(r)&&(r=r.data),iHe(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await cHe(r)(n):r=await uHe(r)(n):aHe(r)?r=await Zk(r)(n):r instanceof WebAssembly.Module?r=await Zk(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await Zk(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return K2=t(),K2}function Zk(e){return t=>WebAssembly.instantiate(e,t)}function cHe(e){return t=>WebAssembly.instantiateStreaming(e,t)}function uHe(e){return async t=>{const n=await e.arrayBuffer();return WebAssembly.instantiate(n,t)}}async function dHe(e){return e&&await lHe(e),{createScanner(t){return new nHe(t.map(n=>typeof n=="string"?n:n.source))},createString(t){return new hne(t)}}}const fHe=jUe({langs:GUe,themes:YUe,engine:()=>dHe(me(()=>import("./wasm-CG6Dc4jp.js"),[],import.meta.url))}),{codeToHtml:lj}=HUe(fHe,{guessEmbeddedLanguages:nUe}),pne=x.createContext({code:""}),hHe={name:"line-numbers",line(e,t){e.children.unshift({type:"element",tagName:"span",properties:{className:["inline-block","min-w-10","mr-4","text-right","select-none","text-muted-foreground"]},children:[{type:"text",value:String(t)}]})}};async function pHe(e,t,n=!1){const r=n?[hHe]:[];try{return await Promise.all([lj(e,{lang:t,theme:"one-light",transformers:r}),lj(e,{lang:t,theme:"one-dark-pro",transformers:r})])}catch(s){console.error("[CodeBlock] Shiki highlighting failed:",s);const i=`<pre><code>${e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`;return[i,i]}}const aI=({code:e,language:t,showLineNumbers:n=!1,isDarkMode:r=!1,className:s,children:o,...i})=>{const[a,l]=x.useState(""),[c,u]=x.useState(""),f=x.useRef(!1);return x.useEffect(()=>(pHe(e,t,n).then(([m,g])=>{f.current||(l(m),u(g),f.current=!0)}).catch(m=>{console.error("[CodeBlock] Async error caught:",m)}),()=>{f.current=!1}),[e,t,n]),h.jsx(pne.Provider,{value:{code:e},children:h.jsx("div",{className:Qe("group relative w-full rounded-lg border overflow-hidden",r?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-stone-50 border-stone-200 text-stone-900",s),...i,children:h.jsxs("div",{className:"relative",children:[r?h.jsx("div",{className:"overflow-x-auto [&>pre]:m-0 [&>pre]:p-4 [&>pre]:text-sm [&>pre]:bg-transparent [&_code]:font-mono [&_code]:text-sm",dangerouslySetInnerHTML:{__html:c}}):h.jsx("div",{className:"overflow-x-auto [&>pre]:m-0 [&>pre]:p-4 [&>pre]:text-sm [&>pre]:bg-transparent [&_code]:font-mono [&_code]:text-sm",dangerouslySetInnerHTML:{__html:a}}),o&&h.jsx("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:o})]})})})},mHe=({onCopy:e,onError:t,timeout:n=2e3,children:r,className:s,...o})=>{const[i,a]=x.useState(!1),{code:l}=x.useContext(pne),c=async()=>{var f;if(typeof window>"u"||!((f=navigator==null?void 0:navigator.clipboard)!=null&&f.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{await navigator.clipboard.writeText(l),a(!0),e==null||e(),setTimeout(()=>a(!1),n)}catch(m){t==null||t(m)}},u=i?Cs:wq;return h.jsx(_r,{className:Qe("shrink-0",s),onClick:c,size:"icon",variant:"ghost",...o,children:r??h.jsx(u,{size:14})})},Bw=(function(e){if(e==null)return vHe;if(typeof e=="function")return FC(e);if(typeof e=="object")return Array.isArray(e)?gHe(e):bHe(e);if(typeof e=="string")return yHe(e);throw new Error("Expected function, string, or object as test")});function gHe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Bw(e[n]);return FC(r);function r(...s){let o=-1;for(;++o<t.length;)if(t[o].apply(this,s))return!0;return!1}}function bHe(e){const t=e;return FC(n);function n(r){const s=r;let o;for(o in e)if(s[o]!==t[o])return!1;return!0}}function yHe(e){return FC(t);function t(n){return n&&n.type===e}}function FC(e){return t;function t(n,r,s){return!!(xHe(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function vHe(){return!0}function xHe(e){return e!==null&&typeof e=="object"&&"type"in e}const mne=[],Sv=!0,lI=!1,qT="skip";function rM(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const o=Bw(s),i=r?-1:1;a(e,void 0,[])();function a(l,c,u){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const g=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=mne,y,v,w;if((!t||o(l,c,u[u.length-1]||void 0))&&(g=wHe(n(l,u)),g[0]===lI))return g;if("children"in l&&l.children){const _=l;if(_.children&&g[0]!==qT)for(v=(r?_.children.length:-1)+i,w=u.concat(_);v>-1&&v<_.children.length;){const S=_.children[v];if(y=a(S,v,w)(),y[0]===lI)return y;v=typeof y[1]=="number"?y[1]:v+i}}return g}}}function wHe(e){return Array.isArray(e)?e:typeof e=="number"?[Sv,e]:e==null?mne:[e]}function lb(e,t,n,r){let s,o,i;typeof t=="function"&&typeof n!="function"?(o=void 0,i=t,s=n):(o=t,i=n,s=r),rM(e,o,a,s);function a(l,c){const u=c[c.length-1],f=u?u.children.indexOf(l):void 0;return i(l,f,u)}}function EHe({defaultOrigin:e="",allowedLinkPrefixes:t=[],allowedImagePrefixes:n=[],allowDataImages:r=!1,allowedProtocols:s=[],blockedImageClass:o="inline-block bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-3 py-1 rounded text-sm",blockedLinkClass:i="text-gray-500"}){const a=t.length&&!t.every(c=>c==="*"),l=n.length&&!n.every(c=>c==="*");if(!e&&(a||l))throw new Error("defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided");return c=>{const u=CHe(e,t,n,r,s,o,i);lb(c,u)}}function cj(e,t){if(typeof e!="string")return null;try{return new URL(e)}catch{if(t)try{return new URL(e,t)}catch{return null}return null}}function _He(e){return typeof e!="string"?!1:e.startsWith("/")}const SHe=new Set(["https:","http:","irc:","ircs:","mailto:","xmpp:","blob:"]),THe=new Set(["javascript:","data:","file:","vbscript:"]);function uj(e,t,n,r=!1,s=!1,o=[]){if(!e)return null;if(typeof e=="string"&&e.startsWith("#")&&!s)try{if(new URL(e,"http://example.com").hash===e)return e}catch{}if(typeof e=="string"&&e.startsWith("data:"))return s&&r&&e.startsWith("data:image/")?e:null;if(typeof e=="string"&&e.startsWith("blob:")){try{if(new URL(e).protocol==="blob:"&&e.length>5){const u=e.substring(5);if(u&&u.length>0&&u!=="invalid")return e}}catch{return null}return null}const i=cj(e,n);if(!i||THe.has(i.protocol)||!(SHe.has(i.protocol)||o.includes(i.protocol)||o.includes("*")))return null;if(i.protocol==="mailto:"||!i.protocol.match(/^https?:$/))return i.href;const l=_He(e);return i&&t.some(c=>{const u=cj(c,n);return!u||u.origin!==i.origin?!1:i.href.startsWith(u.href)})?l?i.pathname+i.search+i.hash:i.href:t.includes("*")?i.protocol!=="https:"&&i.protocol!=="http:"?null:l?i.pathname+i.search+i.hash:i.href:null}const Jk=Symbol("node-seen"),CHe=(e,t,n,r,s,o,i)=>{const a=(l,c,u)=>{if(l.type!=="element"||l[Jk])return Sv;if(l.tagName==="a"){const f=uj(l.properties.href,t,e,!1,!1,s);return f===null?(l[Jk]=!0,lb(l,a),u&&typeof c=="number"&&(u.children[c]={type:"element",tagName:"span",properties:{title:"Blocked URL: "+String(l.properties.href),class:i},children:[...l.children,{type:"text",value:" [blocked]"}]}),qT):(l.properties.href=f,l.properties.target="_blank",l.properties.rel="noopener noreferrer",Sv)}if(l.tagName==="img"){const f=uj(l.properties.src,n,e,r,!0,s);return f===null?(l[Jk]=!0,lb(l,a),u&&typeof c=="number"&&(u.children[c]={type:"element",tagName:"span",properties:{class:o},children:[{type:"text",value:"[Image blocked: "+String(l.properties.alt||"No description")+"]"}]}),qT):(l.properties.src=f,Sv)}return Sv};return a},dj=/[#.]/g;function kHe(e,t){const n=e||"",r={};let s=0,o,i;for(;s<n.length;){dj.lastIndex=s;const a=dj.exec(n),l=n.slice(s,a?a.index:n.length);l&&(o?o==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:i=l,s+=l.length),a&&(o=a[0],s++)}return{type:"element",tagName:i||t||"div",properties:r,children:[]}}function gne(e,t,n){const r=n?RHe(n):void 0;function s(o,i,...a){let l;if(o==null){l={type:"root",children:[]};const c=i;a.unshift(c)}else{l=kHe(o,t);const c=l.tagName.toLowerCase(),u=r?r.get(c):void 0;if(l.tagName=u||c,AHe(i))a.unshift(i);else for(const[f,m]of Object.entries(i))NHe(e,l.properties,f,m)}for(const c of a)cI(l.children,c);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return s}function AHe(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const r of n){const s=t[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const o=s;for(const i of o)if(typeof i!="number"&&typeof i!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function NHe(e,t,n,r){const s=MC(e,n);let o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?s.spaceSeparated?o=Xz(r):s.commaSeparated?o=Jz(r):s.commaOrSpaceSeparated?o=Xz(Jz(r).join(" ")):o=fj(s,s.property,r):Array.isArray(r)?o=[...r]:o=s.property==="style"?IHe(r):String(r);if(Array.isArray(o)){const i=[];for(const a of o)i.push(fj(s,s.property,a));o=i}s.property==="className"&&Array.isArray(t.className)&&(o=t.className.concat(o)),t[s.property]=o}}function cI(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)cI(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?cI(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function fj(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||Gx(n)===Gx(t)))return!0}return n}function IHe(e){const t=[];for(const[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}function RHe(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const MHe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],bne=gne(Fw,"div"),yne=gne(K0,"g",MHe),bd={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function OHe(e,t){return vne(e,{})||{type:"root",children:[]}}function vne(e,t){const n=DHe(e,t);return n&&t.afterTransform&&t.afterTransform(e,n),n}function DHe(e,t){switch(e.nodeType){case 1:return FHe(e,t);case 3:return LHe(e);case 8:return $He(e);case 9:return hj(e,t);case 10:return PHe();case 11:return hj(e,t);default:return}}function hj(e,t){return{type:"root",children:xne(e,t)}}function PHe(){return{type:"doctype"}}function LHe(e){return{type:"text",value:e.nodeValue||""}}function $He(e){return{type:"comment",value:e.nodeValue||""}}function FHe(e,t){const n=e.namespaceURI,r=n===bd.svg?yne:bne,s=n===bd.html?e.tagName.toLowerCase():e.tagName,o=n===bd.html&&s==="template"?e.content:e,i=e.getAttributeNames(),a={};let l=-1;for(;++l<i.length;)a[i[l]]=e.getAttribute(i[l])||"";return r(s,a,xne(o,t))}function xne(e,t){const n=e.childNodes,r=[];let s=-1;for(;++s<n.length;){const o=vne(n[s],t);o!==void 0&&r.push(o)}return r}new DOMParser;function BHe(e,t){const n=zHe(e);return OHe(n)}function zHe(e){const t=document.createElement("template");return t.innerHTML=e,t.content}const pj=(function(e,t,n){const r=Bw(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(r(e.children[t],t,e))return e.children[t]}),Fm=(function(e){if(e==null)return HHe;if(typeof e=="string")return UHe(e);if(typeof e=="object")return jHe(e);if(typeof e=="function")return sM(e);throw new Error("Expected function, string, or array as `test`")});function jHe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Fm(e[n]);return sM(r);function r(...s){let o=-1;for(;++o<t.length;)if(t[o].apply(this,s))return!0;return!1}}function UHe(e){return sM(t);function t(n){return n.tagName===e}}function sM(e){return t;function t(n,r,s){return!!(VHe(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function HHe(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function VHe(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const mj=/\n/g,gj=/[\t ]+/g,uI=Fm("br"),bj=Fm(XHe),qHe=Fm("p"),yj=Fm("tr"),GHe=Fm(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",JHe,QHe]),wne=Fm(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function WHe(e,t){const n=t||{},r="children"in e?e.children:[],s=wne(e),o=Sne(e,{whitespace:n.whitespace||"normal"}),i=[];(e.type==="text"||e.type==="comment")&&i.push(..._ne(e,{breakBefore:!0,breakAfter:!0}));let a=-1;for(;++a<r.length;)i.push(...Ene(r[a],e,{whitespace:o,breakBefore:a?void 0:s,breakAfter:a<r.length-1?uI(r[a+1]):s}));const l=[];let c;for(a=-1;++a<i.length;){const u=i[a];typeof u=="number"?c!==void 0&&u>c&&(c=u):u&&(c!==void 0&&c>-1&&l.push(`
`.repeat(c)||" "),c=-1,l.push(u))}return l.join("")}function Ene(e,t,n){return e.type==="element"?YHe(e,t,n):e.type==="text"?n.whitespace==="normal"?_ne(e,n):KHe(e):[]}function YHe(e,t,n){const r=Sne(e,n),s=e.children||[];let o=-1,i=[];if(GHe(e))return i;let a,l;for(uI(e)||yj(e)&&pj(t,e,yj)?l=`
`:qHe(e)?(a=2,l=2):wne(e)&&(a=1,l=1);++o<s.length;)i=i.concat(Ene(s[o],e,{whitespace:r,breakBefore:o?void 0:a,breakAfter:o<s.length-1?uI(s[o+1]):l}));return bj(e)&&pj(t,e,bj)&&i.push("	"),a&&i.unshift(a),l&&i.push(l),i}function _ne(e,t){const n=String(e.value),r=[],s=[];let o=0;for(;o<=n.length;){mj.lastIndex=o;const l=mj.exec(n),c=l&&"index"in l?l.index:n.length;r.push(ZHe(n.slice(o,c).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),o===0?t.breakBefore:!0,c===n.length?t.breakAfter:!0)),o=c+1}let i=-1,a;for(;++i<r.length;)r[i].charCodeAt(r[i].length-1)===8203||i<r.length-1&&r[i+1].charCodeAt(0)===8203?(s.push(r[i]),a=void 0):r[i]?(typeof a=="number"&&s.push(a),s.push(r[i]),a=0):(i===0||i===r.length-1)&&s.push(0);return s}function KHe(e){return[String(e.value)]}function ZHe(e,t,n){const r=[];let s=0,o;for(;s<e.length;){gj.lastIndex=s;const i=gj.exec(e);o=i?i.index:e.length,!s&&!o&&i&&!t&&r.push(""),s!==o&&r.push(e.slice(s,o)),s=i?o+i[0].length:o}return s!==o&&!n&&r.push(""),r.join(" ")}function Sne(e,t){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function JHe(e){return!!(e.properties||{}).hidden}function XHe(e){return e.tagName==="td"||e.tagName==="th"}function QHe(e){return e.tagName==="dialog"&&!(e.properties||{}).open}class fl{constructor(t,n,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=n,this.end=r}static range(t,n){return n?!t||!t.loc||!n.loc||t.loc.lexer!==n.loc.lexer?null:new fl(t.loc.lexer,t.loc.start,n.loc.end):t&&t.loc}}class Jl{constructor(t,n){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=n}range(t,n){return new Jl(n,fl.range(this,t))}}let It=class Tne{constructor(t,n){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+t,s,o,i=n&&n.loc;if(i&&i.start<=i.end){var a=i.lexer.input;s=i.start,o=i.end,s===a.length?r+=" at end of input: ":r+=" at position "+(s+1)+": ";var l=a.slice(s,o).replace(/[^]/g,"$&"),c;s>15?c=""+a.slice(s-15,s):c=a.slice(0,s);var u;o+15<a.length?u=a.slice(o,o+15)+"":u=a.slice(o),r+=c+l+u}var f=new Error(r);return f.name="ParseError",f.__proto__=Tne.prototype,f.position=s,s!=null&&o!=null&&(f.length=o-s),f.rawMessage=t,f}};It.prototype.__proto__=Error.prototype;var eVe=function(t,n){return t===void 0?n:t},tVe=/([A-Z])/g,nVe=function(t){return t.replace(tVe,"-$1").toLowerCase()},rVe={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},sVe=/[&><"']/g;function oVe(e){return String(e).replace(sVe,t=>rVe[t])}var Cne=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},iVe=function(t){var n=Cne(t);return n.type==="mathord"||n.type==="textord"||n.type==="atom"},aVe=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},lVe=function(t){var n=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return n?n[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(n[1])?null:n[1].toLowerCase():"_relative"},as={deflt:eVe,escape:oVe,hyphenate:nVe,getBaseElem:Cne,isCharacterBox:iVe,protocolFromUrl:lVe},Kv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function cVe(e){if(e.default)return e.default;var t=e.type,n=Array.isArray(t)?t[0]:t;if(typeof n!="string")return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class oM{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var n in Kv)if(Kv.hasOwnProperty(n)){var r=Kv[n];this[n]=t[n]!==void 0?r.processor?r.processor(t[n]):t[n]:cVe(r)}}reportNonstrict(t,n,r){var s=this.strict;if(typeof s=="function"&&(s=s(t,n,r)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new It("LaTeX-incompatible input and strict mode is set to 'error': "+(n+" ["+t+"]"),r);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+n+" ["+t+"]"))}}useStrictBehavior(t,n,r){var s=this.strict;if(typeof s=="function")try{s=s(t,n,r)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+n+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var n=as.protocolFromUrl(t.url);if(n==null)return!1;t.protocol=n}var r=typeof this.trust=="function"?this.trust(t):this.trust;return!!r}}class Yh{constructor(t,n,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=n,this.cramped=r}sup(){return fd[uVe[this.id]]}sub(){return fd[dVe[this.id]]}fracNum(){return fd[fVe[this.id]]}fracDen(){return fd[hVe[this.id]]}cramp(){return fd[pVe[this.id]]}text(){return fd[mVe[this.id]]}isTight(){return this.size>=2}}var iM=0,GT=1,D1=2,Uf=3,Yx=4,Nc=5,cb=6,$a=7,fd=[new Yh(iM,0,!1),new Yh(GT,0,!0),new Yh(D1,1,!1),new Yh(Uf,1,!0),new Yh(Yx,2,!1),new Yh(Nc,2,!0),new Yh(cb,3,!1),new Yh($a,3,!0)],uVe=[Yx,Nc,Yx,Nc,cb,$a,cb,$a],dVe=[Nc,Nc,Nc,Nc,$a,$a,$a,$a],fVe=[D1,Uf,Yx,Nc,cb,$a,cb,$a],hVe=[Uf,Uf,Nc,Nc,$a,$a,$a,$a],pVe=[GT,GT,Uf,Uf,Nc,Nc,$a,$a],mVe=[iM,GT,D1,Uf,D1,Uf,D1,Uf],$n={DISPLAY:fd[iM],TEXT:fd[D1],SCRIPT:fd[Yx],SCRIPTSCRIPT:fd[cb]},dI=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function gVe(e){for(var t=0;t<dI.length;t++)for(var n=dI[t],r=0;r<n.blocks.length;r++){var s=n.blocks[r];if(e>=s[0]&&e<=s[1])return n.name}return null}var B_=[];dI.forEach(e=>e.blocks.forEach(t=>B_.push(...t)));function kne(e){for(var t=0;t<B_.length;t+=2)if(e>=B_[t]&&e<=B_[t+1])return!0;return!1}var Jg=80,bVe=function(t,n){return"M95,"+(622+t+n)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+n+"h400000v"+(40+t)+"h-400000z"},yVe=function(t,n){return"M263,"+(601+t+n)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+n+"h400000v"+(40+t)+"h-400000z"},vVe=function(t,n){return"M983 "+(10+t+n)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+n+"h400000v"+(40+t)+"h-400000z"},xVe=function(t,n){return"M424,"+(2398+t+n)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+n+`
h400000v`+(40+t)+"h-400000z"},wVe=function(t,n){return"M473,"+(2713+t+n)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+n+"h400000v"+(40+t)+"H1017.7z"},EVe=function(t){var n=t/2;return"M400000 "+t+" H0 L"+n+" 0 l65 45 L145 "+(t-80)+" H400000z"},_Ve=function(t,n,r){var s=r-54-n-t;return"M702 "+(t+n)+"H400000"+(40+t)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+n+"H400000v"+(40+t)+"H742z"},SVe=function(t,n,r){n=1e3*n;var s="";switch(t){case"sqrtMain":s=bVe(n,Jg);break;case"sqrtSize1":s=yVe(n,Jg);break;case"sqrtSize2":s=vVe(n,Jg);break;case"sqrtSize3":s=xVe(n,Jg);break;case"sqrtSize4":s=wVe(n,Jg);break;case"sqrtTall":s=_Ve(n,Jg,r)}return s},TVe=function(t,n){switch(t){case"":return"M291 0 H417 V"+n+" H291z M291 0 H417 V"+n+" H291z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z"+("M367 0 H410 V"+n+" H367z M367 0 H410 V"+n+" H367z");case"":return"M457 0 H583 V"+n+" H457z M457 0 H583 V"+n+" H457z";case"":return"M319 0 H403 V"+n+" H319z M319 0 H403 V"+n+" H319z";case"":return"M263 0 H347 V"+n+" H263z M263 0 H347 V"+n+" H263z";case"":return"M384 0 H504 V"+n+" H384z M384 0 H504 V"+n+" H384z";case"":return"M312 0 H355 V"+n+" H312z M312 0 H355 V"+n+" H312z";case"":return"M257 0 H300 V"+n+" H257z M257 0 H300 V"+n+" H257z"+("M478 0 H521 V"+n+" H478z M478 0 H521 V"+n+" H478z");default:return""}},vj={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},CVe=function(t,n){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+n+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+n+" v1759 h84z";case"vert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+" v585 h43z";case"doublevert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+` v585 h43z
M367 15 v585 v`+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+n+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+n+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+n+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v602 h84z
M403 1759 V0 H319 V1759 v`+n+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v602 h84z
M347 1759 V0 h-84 V1759 v`+n+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(n+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(n+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(n+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(n+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};let zw=class{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),n=0;n<this.children.length;n++)t.appendChild(this.children[n].toNode());return t}toMarkup(){for(var t="",n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t}toText(){var t=n=>n.toText();return this.children.map(t).join("")}};var yd={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Z2={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},xj={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Ane(e,t){yd[e]=t}function aM(e,t,n){if(!yd[t])throw new Error("Font metrics not found for font: "+t+".");var r=e.charCodeAt(0),s=yd[t][r];if(!s&&e[0]in xj&&(r=xj[e[0]].charCodeAt(0),s=yd[t][r]),!s&&n==="text"&&kne(r)&&(s=yd[t][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var Xk={};function kVe(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!Xk[t]){var n=Xk[t]={cssEmPerMu:Z2.quad[t]/18};for(var r in Z2)Z2.hasOwnProperty(r)&&(n[r]=Z2[r][t])}return Xk[t]}var AVe=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],wj=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Ej=function(t,n){return n.size<2?t:AVe[t-1][n.size-1]};class Sf{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||Sf.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=wj[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return new Sf(n)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:Ej(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:wj[t-1]})}havingBaseStyle(t){t=t||this.style.text();var n=Ej(Sf.BASESIZE,t);return this.size===n&&this.textSize===Sf.BASESIZE&&this.style===t?this:this.extend({style:t,size:n})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Sf.BASESIZE?["sizing","reset-size"+this.size,"size"+Sf.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=kVe(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Sf.BASESIZE=6;var fI={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},NVe={ex:!0,em:!0,mu:!0},Nne=function(t){return typeof t!="string"&&(t=t.unit),t in fI||t in NVe||t==="ex"},Ro=function(t,n){var r;if(t.unit in fI)r=fI[t.unit]/n.fontMetrics().ptPerEm/n.sizeMultiplier;else if(t.unit==="mu")r=n.fontMetrics().cssEmPerMu;else{var s;if(n.style.isTight()?s=n.havingStyle(n.style.text()):s=n,t.unit==="ex")r=s.fontMetrics().xHeight;else if(t.unit==="em")r=s.fontMetrics().quad;else throw new It("Invalid unit: '"+t.unit+"'");s!==n&&(r*=s.sizeMultiplier/n.sizeMultiplier)}return Math.min(t.number*r,n.maxSize)},Ut=function(t){return+t.toFixed(4)+"em"},R0=function(t){return t.filter(n=>n).join(" ")},Ine=function(t,n,r){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},n){n.style.isTight()&&this.classes.push("mtight");var s=n.getColor();s&&(this.style.color=s)}},Rne=function(t){var n=document.createElement(t);n.className=R0(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(n.style[r]=this.style[r]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&n.setAttribute(s,this.attributes[s]);for(var o=0;o<this.children.length;o++)n.appendChild(this.children[o].toNode());return n},IVe=/[\s"'>/=\x00-\x1f]/,Mne=function(t){var n="<"+t;this.classes.length&&(n+=' class="'+as.escape(R0(this.classes))+'"');var r="";for(var s in this.style)this.style.hasOwnProperty(s)&&(r+=as.hyphenate(s)+":"+this.style[s]+";");r&&(n+=' style="'+as.escape(r)+'"');for(var o in this.attributes)if(this.attributes.hasOwnProperty(o)){if(IVe.test(o))throw new It("Invalid attribute name '"+o+"'");n+=" "+o+'="'+as.escape(this.attributes[o])+'"'}n+=">";for(var i=0;i<this.children.length;i++)n+=this.children[i].toMarkup();return n+="</"+t+">",n};class jw{constructor(t,n,r,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Ine.call(this,t,r,s),this.children=n||[]}setAttribute(t,n){this.attributes[t]=n}hasClass(t){return this.classes.includes(t)}toNode(){return Rne.call(this,"span")}toMarkup(){return Mne.call(this,"span")}}class lM{constructor(t,n,r,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Ine.call(this,n,s),this.children=r||[],this.setAttribute("href",t)}setAttribute(t,n){this.attributes[t]=n}hasClass(t){return this.classes.includes(t)}toNode(){return Rne.call(this,"a")}toMarkup(){return Mne.call(this,"a")}}class RVe{constructor(t,n,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=n,this.src=t,this.classes=["mord"],this.style=r}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var n in this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);return t}toMarkup(){var t='<img src="'+as.escape(this.src)+'"'+(' alt="'+as.escape(this.alt)+'"'),n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=as.hyphenate(r)+":"+this.style[r]+";");return n&&(t+=' style="'+as.escape(n)+'"'),t+="'/>",t}}var MVe={:"",:"",:"",:""};class Lc{constructor(t,n,r,s,o,i,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=n||0,this.depth=r||0,this.italic=s||0,this.skew=o||0,this.width=i||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var c=gVe(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[]/.test(this.text)&&(this.text=MVe[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),n=null;this.italic>0&&(n=document.createElement("span"),n.style.marginRight=Ut(this.italic)),this.classes.length>0&&(n=n||document.createElement("span"),n.className=R0(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(n=n||document.createElement("span"),n.style[r]=this.style[r]);return n?(n.appendChild(t),n):t}toMarkup(){var t=!1,n="<span";this.classes.length&&(t=!0,n+=' class="',n+=as.escape(R0(this.classes)),n+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(r+=as.hyphenate(s)+":"+this.style[s]+";");r&&(t=!0,n+=' style="'+as.escape(r)+'"');var o=as.escape(this.text);return t?(n+=">",n+=o,n+="</span>",n):o}}class Zf{constructor(t,n){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=n||{}}toNode(){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);for(var s=0;s<this.children.length;s++)n.appendChild(this.children[s].toNode());return n}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=" "+n+'="'+as.escape(this.attributes[n])+'"');t+=">";for(var r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t+="</svg>",t}}class M0{constructor(t,n){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=n}toNode(){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"path");return this.alternate?n.setAttribute("d",this.alternate):n.setAttribute("d",vj[this.pathName]),n}toMarkup(){return this.alternate?'<path d="'+as.escape(this.alternate)+'"/>':'<path d="'+as.escape(vj[this.pathName])+'"/>'}}class hI{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);return n}toMarkup(){var t="<line";for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=" "+n+'="'+as.escape(this.attributes[n])+'"');return t+="/>",t}}function _j(e){if(e instanceof Lc)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function OVe(e){if(e instanceof jw)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var DVe={bin:1,close:1,inner:1,open:1,punct:1,rel:1},PVe={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},eo={math:{},text:{}};function $(e,t,n,r,s,o){eo[e][s]={font:t,group:n,replace:r},o&&r&&(eo[e][r]=eo[e][s])}var V="math",yt="text",ne="main",xe="ams",vo="accent-token",sn="bin",Ga="close",Ob="inner",Ln="mathord",bi="op-token",sc="open",BC="punct",Ee="rel",oh="spacing",Pe="textord";$(V,ne,Ee,"","\\equiv",!0);$(V,ne,Ee,"","\\prec",!0);$(V,ne,Ee,"","\\succ",!0);$(V,ne,Ee,"","\\sim",!0);$(V,ne,Ee,"","\\perp");$(V,ne,Ee,"","\\preceq",!0);$(V,ne,Ee,"","\\succeq",!0);$(V,ne,Ee,"","\\simeq",!0);$(V,ne,Ee,"","\\mid",!0);$(V,ne,Ee,"","\\ll",!0);$(V,ne,Ee,"","\\gg",!0);$(V,ne,Ee,"","\\asymp",!0);$(V,ne,Ee,"","\\parallel");$(V,ne,Ee,"","\\bowtie",!0);$(V,ne,Ee,"","\\smile",!0);$(V,ne,Ee,"","\\sqsubseteq",!0);$(V,ne,Ee,"","\\sqsupseteq",!0);$(V,ne,Ee,"","\\doteq",!0);$(V,ne,Ee,"","\\frown",!0);$(V,ne,Ee,"","\\ni",!0);$(V,ne,Ee,"","\\propto",!0);$(V,ne,Ee,"","\\vdash",!0);$(V,ne,Ee,"","\\dashv",!0);$(V,ne,Ee,"","\\owns");$(V,ne,BC,".","\\ldotp");$(V,ne,BC,"","\\cdotp");$(V,ne,Pe,"#","\\#");$(yt,ne,Pe,"#","\\#");$(V,ne,Pe,"&","\\&");$(yt,ne,Pe,"&","\\&");$(V,ne,Pe,"","\\aleph",!0);$(V,ne,Pe,"","\\forall",!0);$(V,ne,Pe,"","\\hbar",!0);$(V,ne,Pe,"","\\exists",!0);$(V,ne,Pe,"","\\nabla",!0);$(V,ne,Pe,"","\\flat",!0);$(V,ne,Pe,"","\\ell",!0);$(V,ne,Pe,"","\\natural",!0);$(V,ne,Pe,"","\\clubsuit",!0);$(V,ne,Pe,"","\\wp",!0);$(V,ne,Pe,"","\\sharp",!0);$(V,ne,Pe,"","\\diamondsuit",!0);$(V,ne,Pe,"","\\Re",!0);$(V,ne,Pe,"","\\heartsuit",!0);$(V,ne,Pe,"","\\Im",!0);$(V,ne,Pe,"","\\spadesuit",!0);$(V,ne,Pe,"","\\S",!0);$(yt,ne,Pe,"","\\S");$(V,ne,Pe,"","\\P",!0);$(yt,ne,Pe,"","\\P");$(V,ne,Pe,"","\\dag");$(yt,ne,Pe,"","\\dag");$(yt,ne,Pe,"","\\textdagger");$(V,ne,Pe,"","\\ddag");$(yt,ne,Pe,"","\\ddag");$(yt,ne,Pe,"","\\textdaggerdbl");$(V,ne,Ga,"","\\rmoustache",!0);$(V,ne,sc,"","\\lmoustache",!0);$(V,ne,Ga,"","\\rgroup",!0);$(V,ne,sc,"","\\lgroup",!0);$(V,ne,sn,"","\\mp",!0);$(V,ne,sn,"","\\ominus",!0);$(V,ne,sn,"","\\uplus",!0);$(V,ne,sn,"","\\sqcap",!0);$(V,ne,sn,"","\\ast");$(V,ne,sn,"","\\sqcup",!0);$(V,ne,sn,"","\\bigcirc",!0);$(V,ne,sn,"","\\bullet",!0);$(V,ne,sn,"","\\ddagger");$(V,ne,sn,"","\\wr",!0);$(V,ne,sn,"","\\amalg");$(V,ne,sn,"&","\\And");$(V,ne,Ee,"","\\longleftarrow",!0);$(V,ne,Ee,"","\\Leftarrow",!0);$(V,ne,Ee,"","\\Longleftarrow",!0);$(V,ne,Ee,"","\\longrightarrow",!0);$(V,ne,Ee,"","\\Rightarrow",!0);$(V,ne,Ee,"","\\Longrightarrow",!0);$(V,ne,Ee,"","\\leftrightarrow",!0);$(V,ne,Ee,"","\\longleftrightarrow",!0);$(V,ne,Ee,"","\\Leftrightarrow",!0);$(V,ne,Ee,"","\\Longleftrightarrow",!0);$(V,ne,Ee,"","\\mapsto",!0);$(V,ne,Ee,"","\\longmapsto",!0);$(V,ne,Ee,"","\\nearrow",!0);$(V,ne,Ee,"","\\hookleftarrow",!0);$(V,ne,Ee,"","\\hookrightarrow",!0);$(V,ne,Ee,"","\\searrow",!0);$(V,ne,Ee,"","\\leftharpoonup",!0);$(V,ne,Ee,"","\\rightharpoonup",!0);$(V,ne,Ee,"","\\swarrow",!0);$(V,ne,Ee,"","\\leftharpoondown",!0);$(V,ne,Ee,"","\\rightharpoondown",!0);$(V,ne,Ee,"","\\nwarrow",!0);$(V,ne,Ee,"","\\rightleftharpoons",!0);$(V,xe,Ee,"","\\nless",!0);$(V,xe,Ee,"","\\@nleqslant");$(V,xe,Ee,"","\\@nleqq");$(V,xe,Ee,"","\\lneq",!0);$(V,xe,Ee,"","\\lneqq",!0);$(V,xe,Ee,"","\\@lvertneqq");$(V,xe,Ee,"","\\lnsim",!0);$(V,xe,Ee,"","\\lnapprox",!0);$(V,xe,Ee,"","\\nprec",!0);$(V,xe,Ee,"","\\npreceq",!0);$(V,xe,Ee,"","\\precnsim",!0);$(V,xe,Ee,"","\\precnapprox",!0);$(V,xe,Ee,"","\\nsim",!0);$(V,xe,Ee,"","\\@nshortmid");$(V,xe,Ee,"","\\nmid",!0);$(V,xe,Ee,"","\\nvdash",!0);$(V,xe,Ee,"","\\nvDash",!0);$(V,xe,Ee,"","\\ntriangleleft");$(V,xe,Ee,"","\\ntrianglelefteq",!0);$(V,xe,Ee,"","\\subsetneq",!0);$(V,xe,Ee,"","\\@varsubsetneq");$(V,xe,Ee,"","\\subsetneqq",!0);$(V,xe,Ee,"","\\@varsubsetneqq");$(V,xe,Ee,"","\\ngtr",!0);$(V,xe,Ee,"","\\@ngeqslant");$(V,xe,Ee,"","\\@ngeqq");$(V,xe,Ee,"","\\gneq",!0);$(V,xe,Ee,"","\\gneqq",!0);$(V,xe,Ee,"","\\@gvertneqq");$(V,xe,Ee,"","\\gnsim",!0);$(V,xe,Ee,"","\\gnapprox",!0);$(V,xe,Ee,"","\\nsucc",!0);$(V,xe,Ee,"","\\nsucceq",!0);$(V,xe,Ee,"","\\succnsim",!0);$(V,xe,Ee,"","\\succnapprox",!0);$(V,xe,Ee,"","\\ncong",!0);$(V,xe,Ee,"","\\@nshortparallel");$(V,xe,Ee,"","\\nparallel",!0);$(V,xe,Ee,"","\\nVDash",!0);$(V,xe,Ee,"","\\ntriangleright");$(V,xe,Ee,"","\\ntrianglerighteq",!0);$(V,xe,Ee,"","\\@nsupseteqq");$(V,xe,Ee,"","\\supsetneq",!0);$(V,xe,Ee,"","\\@varsupsetneq");$(V,xe,Ee,"","\\supsetneqq",!0);$(V,xe,Ee,"","\\@varsupsetneqq");$(V,xe,Ee,"","\\nVdash",!0);$(V,xe,Ee,"","\\precneqq",!0);$(V,xe,Ee,"","\\succneqq",!0);$(V,xe,Ee,"","\\@nsubseteqq");$(V,xe,sn,"","\\unlhd");$(V,xe,sn,"","\\unrhd");$(V,xe,Ee,"","\\nleftarrow",!0);$(V,xe,Ee,"","\\nrightarrow",!0);$(V,xe,Ee,"","\\nLeftarrow",!0);$(V,xe,Ee,"","\\nRightarrow",!0);$(V,xe,Ee,"","\\nleftrightarrow",!0);$(V,xe,Ee,"","\\nLeftrightarrow",!0);$(V,xe,Ee,"","\\vartriangle");$(V,xe,Pe,"","\\hslash");$(V,xe,Pe,"","\\triangledown");$(V,xe,Pe,"","\\lozenge");$(V,xe,Pe,"","\\circledS");$(V,xe,Pe,"","\\circledR");$(yt,xe,Pe,"","\\circledR");$(V,xe,Pe,"","\\measuredangle",!0);$(V,xe,Pe,"","\\nexists");$(V,xe,Pe,"","\\mho");$(V,xe,Pe,"","\\Finv",!0);$(V,xe,Pe,"","\\Game",!0);$(V,xe,Pe,"","\\backprime");$(V,xe,Pe,"","\\blacktriangle");$(V,xe,Pe,"","\\blacktriangledown");$(V,xe,Pe,"","\\blacksquare");$(V,xe,Pe,"","\\blacklozenge");$(V,xe,Pe,"","\\bigstar");$(V,xe,Pe,"","\\sphericalangle",!0);$(V,xe,Pe,"","\\complement",!0);$(V,xe,Pe,"","\\eth",!0);$(yt,ne,Pe,"","");$(V,xe,Pe,"","\\diagup");$(V,xe,Pe,"","\\diagdown");$(V,xe,Pe,"","\\square");$(V,xe,Pe,"","\\Box");$(V,xe,Pe,"","\\Diamond");$(V,xe,Pe,"","\\yen",!0);$(yt,xe,Pe,"","\\yen",!0);$(V,xe,Pe,"","\\checkmark",!0);$(yt,xe,Pe,"","\\checkmark");$(V,xe,Pe,"","\\beth",!0);$(V,xe,Pe,"","\\daleth",!0);$(V,xe,Pe,"","\\gimel",!0);$(V,xe,Pe,"","\\digamma",!0);$(V,xe,Pe,"","\\varkappa");$(V,xe,sc,"","\\@ulcorner",!0);$(V,xe,Ga,"","\\@urcorner",!0);$(V,xe,sc,"","\\@llcorner",!0);$(V,xe,Ga,"","\\@lrcorner",!0);$(V,xe,Ee,"","\\leqq",!0);$(V,xe,Ee,"","\\leqslant",!0);$(V,xe,Ee,"","\\eqslantless",!0);$(V,xe,Ee,"","\\lesssim",!0);$(V,xe,Ee,"","\\lessapprox",!0);$(V,xe,Ee,"","\\approxeq",!0);$(V,xe,sn,"","\\lessdot");$(V,xe,Ee,"","\\lll",!0);$(V,xe,Ee,"","\\lessgtr",!0);$(V,xe,Ee,"","\\lesseqgtr",!0);$(V,xe,Ee,"","\\lesseqqgtr",!0);$(V,xe,Ee,"","\\doteqdot");$(V,xe,Ee,"","\\risingdotseq",!0);$(V,xe,Ee,"","\\fallingdotseq",!0);$(V,xe,Ee,"","\\backsim",!0);$(V,xe,Ee,"","\\backsimeq",!0);$(V,xe,Ee,"","\\subseteqq",!0);$(V,xe,Ee,"","\\Subset",!0);$(V,xe,Ee,"","\\sqsubset",!0);$(V,xe,Ee,"","\\preccurlyeq",!0);$(V,xe,Ee,"","\\curlyeqprec",!0);$(V,xe,Ee,"","\\precsim",!0);$(V,xe,Ee,"","\\precapprox",!0);$(V,xe,Ee,"","\\vartriangleleft");$(V,xe,Ee,"","\\trianglelefteq");$(V,xe,Ee,"","\\vDash",!0);$(V,xe,Ee,"","\\Vvdash",!0);$(V,xe,Ee,"","\\smallsmile");$(V,xe,Ee,"","\\smallfrown");$(V,xe,Ee,"","\\bumpeq",!0);$(V,xe,Ee,"","\\Bumpeq",!0);$(V,xe,Ee,"","\\geqq",!0);$(V,xe,Ee,"","\\geqslant",!0);$(V,xe,Ee,"","\\eqslantgtr",!0);$(V,xe,Ee,"","\\gtrsim",!0);$(V,xe,Ee,"","\\gtrapprox",!0);$(V,xe,sn,"","\\gtrdot");$(V,xe,Ee,"","\\ggg",!0);$(V,xe,Ee,"","\\gtrless",!0);$(V,xe,Ee,"","\\gtreqless",!0);$(V,xe,Ee,"","\\gtreqqless",!0);$(V,xe,Ee,"","\\eqcirc",!0);$(V,xe,Ee,"","\\circeq",!0);$(V,xe,Ee,"","\\triangleq",!0);$(V,xe,Ee,"","\\thicksim");$(V,xe,Ee,"","\\thickapprox");$(V,xe,Ee,"","\\supseteqq",!0);$(V,xe,Ee,"","\\Supset",!0);$(V,xe,Ee,"","\\sqsupset",!0);$(V,xe,Ee,"","\\succcurlyeq",!0);$(V,xe,Ee,"","\\curlyeqsucc",!0);$(V,xe,Ee,"","\\succsim",!0);$(V,xe,Ee,"","\\succapprox",!0);$(V,xe,Ee,"","\\vartriangleright");$(V,xe,Ee,"","\\trianglerighteq");$(V,xe,Ee,"","\\Vdash",!0);$(V,xe,Ee,"","\\shortmid");$(V,xe,Ee,"","\\shortparallel");$(V,xe,Ee,"","\\between",!0);$(V,xe,Ee,"","\\pitchfork",!0);$(V,xe,Ee,"","\\varpropto");$(V,xe,Ee,"","\\blacktriangleleft");$(V,xe,Ee,"","\\therefore",!0);$(V,xe,Ee,"","\\backepsilon");$(V,xe,Ee,"","\\blacktriangleright");$(V,xe,Ee,"","\\because",!0);$(V,xe,Ee,"","\\llless");$(V,xe,Ee,"","\\gggtr");$(V,xe,sn,"","\\lhd");$(V,xe,sn,"","\\rhd");$(V,xe,Ee,"","\\eqsim",!0);$(V,ne,Ee,"","\\Join");$(V,xe,Ee,"","\\Doteq",!0);$(V,xe,sn,"","\\dotplus",!0);$(V,xe,sn,"","\\smallsetminus");$(V,xe,sn,"","\\Cap",!0);$(V,xe,sn,"","\\Cup",!0);$(V,xe,sn,"","\\doublebarwedge",!0);$(V,xe,sn,"","\\boxminus",!0);$(V,xe,sn,"","\\boxplus",!0);$(V,xe,sn,"","\\divideontimes",!0);$(V,xe,sn,"","\\ltimes",!0);$(V,xe,sn,"","\\rtimes",!0);$(V,xe,sn,"","\\leftthreetimes",!0);$(V,xe,sn,"","\\rightthreetimes",!0);$(V,xe,sn,"","\\curlywedge",!0);$(V,xe,sn,"","\\curlyvee",!0);$(V,xe,sn,"","\\circleddash",!0);$(V,xe,sn,"","\\circledast",!0);$(V,xe,sn,"","\\centerdot");$(V,xe,sn,"","\\intercal",!0);$(V,xe,sn,"","\\doublecap");$(V,xe,sn,"","\\doublecup");$(V,xe,sn,"","\\boxtimes",!0);$(V,xe,Ee,"","\\dashrightarrow",!0);$(V,xe,Ee,"","\\dashleftarrow",!0);$(V,xe,Ee,"","\\leftleftarrows",!0);$(V,xe,Ee,"","\\leftrightarrows",!0);$(V,xe,Ee,"","\\Lleftarrow",!0);$(V,xe,Ee,"","\\twoheadleftarrow",!0);$(V,xe,Ee,"","\\leftarrowtail",!0);$(V,xe,Ee,"","\\looparrowleft",!0);$(V,xe,Ee,"","\\leftrightharpoons",!0);$(V,xe,Ee,"","\\curvearrowleft",!0);$(V,xe,Ee,"","\\circlearrowleft",!0);$(V,xe,Ee,"","\\Lsh",!0);$(V,xe,Ee,"","\\upuparrows",!0);$(V,xe,Ee,"","\\upharpoonleft",!0);$(V,xe,Ee,"","\\downharpoonleft",!0);$(V,ne,Ee,"","\\origof",!0);$(V,ne,Ee,"","\\imageof",!0);$(V,xe,Ee,"","\\multimap",!0);$(V,xe,Ee,"","\\leftrightsquigarrow",!0);$(V,xe,Ee,"","\\rightrightarrows",!0);$(V,xe,Ee,"","\\rightleftarrows",!0);$(V,xe,Ee,"","\\twoheadrightarrow",!0);$(V,xe,Ee,"","\\rightarrowtail",!0);$(V,xe,Ee,"","\\looparrowright",!0);$(V,xe,Ee,"","\\curvearrowright",!0);$(V,xe,Ee,"","\\circlearrowright",!0);$(V,xe,Ee,"","\\Rsh",!0);$(V,xe,Ee,"","\\downdownarrows",!0);$(V,xe,Ee,"","\\upharpoonright",!0);$(V,xe,Ee,"","\\downharpoonright",!0);$(V,xe,Ee,"","\\rightsquigarrow",!0);$(V,xe,Ee,"","\\leadsto");$(V,xe,Ee,"","\\Rrightarrow",!0);$(V,xe,Ee,"","\\restriction");$(V,ne,Pe,"","`");$(V,ne,Pe,"$","\\$");$(yt,ne,Pe,"$","\\$");$(yt,ne,Pe,"$","\\textdollar");$(V,ne,Pe,"%","\\%");$(yt,ne,Pe,"%","\\%");$(V,ne,Pe,"_","\\_");$(yt,ne,Pe,"_","\\_");$(yt,ne,Pe,"_","\\textunderscore");$(V,ne,Pe,"","\\angle",!0);$(V,ne,Pe,"","\\infty",!0);$(V,ne,Pe,"","\\prime");$(V,ne,Pe,"","\\triangle");$(V,ne,Pe,"","\\Gamma",!0);$(V,ne,Pe,"","\\Delta",!0);$(V,ne,Pe,"","\\Theta",!0);$(V,ne,Pe,"","\\Lambda",!0);$(V,ne,Pe,"","\\Xi",!0);$(V,ne,Pe,"","\\Pi",!0);$(V,ne,Pe,"","\\Sigma",!0);$(V,ne,Pe,"","\\Upsilon",!0);$(V,ne,Pe,"","\\Phi",!0);$(V,ne,Pe,"","\\Psi",!0);$(V,ne,Pe,"","\\Omega",!0);$(V,ne,Pe,"A","");$(V,ne,Pe,"B","");$(V,ne,Pe,"E","");$(V,ne,Pe,"Z","");$(V,ne,Pe,"H","");$(V,ne,Pe,"I","");$(V,ne,Pe,"K","");$(V,ne,Pe,"M","");$(V,ne,Pe,"N","");$(V,ne,Pe,"O","");$(V,ne,Pe,"P","");$(V,ne,Pe,"T","");$(V,ne,Pe,"X","");$(V,ne,Pe,"","\\neg",!0);$(V,ne,Pe,"","\\lnot");$(V,ne,Pe,"","\\top");$(V,ne,Pe,"","\\bot");$(V,ne,Pe,"","\\emptyset");$(V,xe,Pe,"","\\varnothing");$(V,ne,Ln,"","\\alpha",!0);$(V,ne,Ln,"","\\beta",!0);$(V,ne,Ln,"","\\gamma",!0);$(V,ne,Ln,"","\\delta",!0);$(V,ne,Ln,"","\\epsilon",!0);$(V,ne,Ln,"","\\zeta",!0);$(V,ne,Ln,"","\\eta",!0);$(V,ne,Ln,"","\\theta",!0);$(V,ne,Ln,"","\\iota",!0);$(V,ne,Ln,"","\\kappa",!0);$(V,ne,Ln,"","\\lambda",!0);$(V,ne,Ln,"","\\mu",!0);$(V,ne,Ln,"","\\nu",!0);$(V,ne,Ln,"","\\xi",!0);$(V,ne,Ln,"","\\omicron",!0);$(V,ne,Ln,"","\\pi",!0);$(V,ne,Ln,"","\\rho",!0);$(V,ne,Ln,"","\\sigma",!0);$(V,ne,Ln,"","\\tau",!0);$(V,ne,Ln,"","\\upsilon",!0);$(V,ne,Ln,"","\\phi",!0);$(V,ne,Ln,"","\\chi",!0);$(V,ne,Ln,"","\\psi",!0);$(V,ne,Ln,"","\\omega",!0);$(V,ne,Ln,"","\\varepsilon",!0);$(V,ne,Ln,"","\\vartheta",!0);$(V,ne,Ln,"","\\varpi",!0);$(V,ne,Ln,"","\\varrho",!0);$(V,ne,Ln,"","\\varsigma",!0);$(V,ne,Ln,"","\\varphi",!0);$(V,ne,sn,"","*",!0);$(V,ne,sn,"+","+");$(V,ne,sn,"","-",!0);$(V,ne,sn,"","\\cdot",!0);$(V,ne,sn,"","\\circ",!0);$(V,ne,sn,"","\\div",!0);$(V,ne,sn,"","\\pm",!0);$(V,ne,sn,"","\\times",!0);$(V,ne,sn,"","\\cap",!0);$(V,ne,sn,"","\\cup",!0);$(V,ne,sn,"","\\setminus",!0);$(V,ne,sn,"","\\land");$(V,ne,sn,"","\\lor");$(V,ne,sn,"","\\wedge",!0);$(V,ne,sn,"","\\vee",!0);$(V,ne,Pe,"","\\surd");$(V,ne,sc,"","\\langle",!0);$(V,ne,sc,"","\\lvert");$(V,ne,sc,"","\\lVert");$(V,ne,Ga,"?","?");$(V,ne,Ga,"!","!");$(V,ne,Ga,"","\\rangle",!0);$(V,ne,Ga,"","\\rvert");$(V,ne,Ga,"","\\rVert");$(V,ne,Ee,"=","=");$(V,ne,Ee,":",":");$(V,ne,Ee,"","\\approx",!0);$(V,ne,Ee,"","\\cong",!0);$(V,ne,Ee,"","\\ge");$(V,ne,Ee,"","\\geq",!0);$(V,ne,Ee,"","\\gets");$(V,ne,Ee,">","\\gt",!0);$(V,ne,Ee,"","\\in",!0);$(V,ne,Ee,"","\\@not");$(V,ne,Ee,"","\\subset",!0);$(V,ne,Ee,"","\\supset",!0);$(V,ne,Ee,"","\\subseteq",!0);$(V,ne,Ee,"","\\supseteq",!0);$(V,xe,Ee,"","\\nsubseteq",!0);$(V,xe,Ee,"","\\nsupseteq",!0);$(V,ne,Ee,"","\\models");$(V,ne,Ee,"","\\leftarrow",!0);$(V,ne,Ee,"","\\le");$(V,ne,Ee,"","\\leq",!0);$(V,ne,Ee,"<","\\lt",!0);$(V,ne,Ee,"","\\rightarrow",!0);$(V,ne,Ee,"","\\to");$(V,xe,Ee,"","\\ngeq",!0);$(V,xe,Ee,"","\\nleq",!0);$(V,ne,oh,"","\\ ");$(V,ne,oh,"","\\space");$(V,ne,oh,"","\\nobreakspace");$(yt,ne,oh,"","\\ ");$(yt,ne,oh,""," ");$(yt,ne,oh,"","\\space");$(yt,ne,oh,"","\\nobreakspace");$(V,ne,oh,null,"\\nobreak");$(V,ne,oh,null,"\\allowbreak");$(V,ne,BC,",",",");$(V,ne,BC,";",";");$(V,xe,sn,"","\\barwedge",!0);$(V,xe,sn,"","\\veebar",!0);$(V,ne,sn,"","\\odot",!0);$(V,ne,sn,"","\\oplus",!0);$(V,ne,sn,"","\\otimes",!0);$(V,ne,Pe,"","\\partial",!0);$(V,ne,sn,"","\\oslash",!0);$(V,xe,sn,"","\\circledcirc",!0);$(V,xe,sn,"","\\boxdot",!0);$(V,ne,sn,"","\\bigtriangleup");$(V,ne,sn,"","\\bigtriangledown");$(V,ne,sn,"","\\dagger");$(V,ne,sn,"","\\diamond");$(V,ne,sn,"","\\star");$(V,ne,sn,"","\\triangleleft");$(V,ne,sn,"","\\triangleright");$(V,ne,sc,"{","\\{");$(yt,ne,Pe,"{","\\{");$(yt,ne,Pe,"{","\\textbraceleft");$(V,ne,Ga,"}","\\}");$(yt,ne,Pe,"}","\\}");$(yt,ne,Pe,"}","\\textbraceright");$(V,ne,sc,"{","\\lbrace");$(V,ne,Ga,"}","\\rbrace");$(V,ne,sc,"[","\\lbrack",!0);$(yt,ne,Pe,"[","\\lbrack",!0);$(V,ne,Ga,"]","\\rbrack",!0);$(yt,ne,Pe,"]","\\rbrack",!0);$(V,ne,sc,"(","\\lparen",!0);$(V,ne,Ga,")","\\rparen",!0);$(yt,ne,Pe,"<","\\textless",!0);$(yt,ne,Pe,">","\\textgreater",!0);$(V,ne,sc,"","\\lfloor",!0);$(V,ne,Ga,"","\\rfloor",!0);$(V,ne,sc,"","\\lceil",!0);$(V,ne,Ga,"","\\rceil",!0);$(V,ne,Pe,"\\","\\backslash");$(V,ne,Pe,"","|");$(V,ne,Pe,"","\\vert");$(yt,ne,Pe,"|","\\textbar",!0);$(V,ne,Pe,"","\\|");$(V,ne,Pe,"","\\Vert");$(yt,ne,Pe,"","\\textbardbl");$(yt,ne,Pe,"~","\\textasciitilde");$(yt,ne,Pe,"\\","\\textbackslash");$(yt,ne,Pe,"^","\\textasciicircum");$(V,ne,Ee,"","\\uparrow",!0);$(V,ne,Ee,"","\\Uparrow",!0);$(V,ne,Ee,"","\\downarrow",!0);$(V,ne,Ee,"","\\Downarrow",!0);$(V,ne,Ee,"","\\updownarrow",!0);$(V,ne,Ee,"","\\Updownarrow",!0);$(V,ne,bi,"","\\coprod");$(V,ne,bi,"","\\bigvee");$(V,ne,bi,"","\\bigwedge");$(V,ne,bi,"","\\biguplus");$(V,ne,bi,"","\\bigcap");$(V,ne,bi,"","\\bigcup");$(V,ne,bi,"","\\int");$(V,ne,bi,"","\\intop");$(V,ne,bi,"","\\iint");$(V,ne,bi,"","\\iiint");$(V,ne,bi,"","\\prod");$(V,ne,bi,"","\\sum");$(V,ne,bi,"","\\bigotimes");$(V,ne,bi,"","\\bigoplus");$(V,ne,bi,"","\\bigodot");$(V,ne,bi,"","\\oint");$(V,ne,bi,"","\\oiint");$(V,ne,bi,"","\\oiiint");$(V,ne,bi,"","\\bigsqcup");$(V,ne,bi,"","\\smallint");$(yt,ne,Ob,"","\\textellipsis");$(V,ne,Ob,"","\\mathellipsis");$(yt,ne,Ob,"","\\ldots",!0);$(V,ne,Ob,"","\\ldots",!0);$(V,ne,Ob,"","\\@cdots",!0);$(V,ne,Ob,"","\\ddots",!0);$(V,ne,Pe,"","\\varvdots");$(yt,ne,Pe,"","\\varvdots");$(V,ne,vo,"","\\acute");$(V,ne,vo,"","\\grave");$(V,ne,vo,"","\\ddot");$(V,ne,vo,"~","\\tilde");$(V,ne,vo,"","\\bar");$(V,ne,vo,"","\\breve");$(V,ne,vo,"","\\check");$(V,ne,vo,"^","\\hat");$(V,ne,vo,"","\\vec");$(V,ne,vo,"","\\dot");$(V,ne,vo,"","\\mathring");$(V,ne,Ln,"","\\@imath");$(V,ne,Ln,"","\\@jmath");$(V,ne,Pe,"","");$(V,ne,Pe,"","");$(yt,ne,Pe,"","\\i",!0);$(yt,ne,Pe,"","\\j",!0);$(yt,ne,Pe,"","\\ss",!0);$(yt,ne,Pe,"","\\ae",!0);$(yt,ne,Pe,"","\\oe",!0);$(yt,ne,Pe,"","\\o",!0);$(yt,ne,Pe,"","\\AE",!0);$(yt,ne,Pe,"","\\OE",!0);$(yt,ne,Pe,"","\\O",!0);$(yt,ne,vo,"","\\'");$(yt,ne,vo,"","\\`");$(yt,ne,vo,"","\\^");$(yt,ne,vo,"","\\~");$(yt,ne,vo,"","\\=");$(yt,ne,vo,"","\\u");$(yt,ne,vo,"","\\.");$(yt,ne,vo,"","\\c");$(yt,ne,vo,"","\\r");$(yt,ne,vo,"","\\v");$(yt,ne,vo,"",'\\"');$(yt,ne,vo,"","\\H");$(yt,ne,vo,"","\\textcircled");var One={"--":!0,"---":!0,"``":!0,"''":!0};$(yt,ne,Pe,"","--",!0);$(yt,ne,Pe,"","\\textendash");$(yt,ne,Pe,"","---",!0);$(yt,ne,Pe,"","\\textemdash");$(yt,ne,Pe,"","`",!0);$(yt,ne,Pe,"","\\textquoteleft");$(yt,ne,Pe,"","'",!0);$(yt,ne,Pe,"","\\textquoteright");$(yt,ne,Pe,"","``",!0);$(yt,ne,Pe,"","\\textquotedblleft");$(yt,ne,Pe,"","''",!0);$(yt,ne,Pe,"","\\textquotedblright");$(V,ne,Pe,"","\\degree",!0);$(yt,ne,Pe,"","\\degree");$(yt,ne,Pe,"","\\textdegree",!0);$(V,ne,Pe,"","\\pounds");$(V,ne,Pe,"","\\mathsterling",!0);$(yt,ne,Pe,"","\\pounds");$(yt,ne,Pe,"","\\textsterling",!0);$(V,xe,Pe,"","\\maltese");$(yt,xe,Pe,"","\\maltese");var Sj='0123456789/@."';for(var Qk=0;Qk<Sj.length;Qk++){var Tj=Sj.charAt(Qk);$(V,ne,Pe,Tj,Tj)}var Cj='0123456789!@*()-=+";:?/.,';for(var eA=0;eA<Cj.length;eA++){var kj=Cj.charAt(eA);$(yt,ne,Pe,kj,kj)}var WT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var tA=0;tA<WT.length;tA++){var J2=WT.charAt(tA);$(V,ne,Ln,J2,J2),$(yt,ne,Pe,J2,J2)}$(V,xe,Pe,"C","");$(yt,xe,Pe,"C","");$(V,xe,Pe,"H","");$(yt,xe,Pe,"H","");$(V,xe,Pe,"N","");$(yt,xe,Pe,"N","");$(V,xe,Pe,"P","");$(yt,xe,Pe,"P","");$(V,xe,Pe,"Q","");$(yt,xe,Pe,"Q","");$(V,xe,Pe,"R","");$(yt,xe,Pe,"R","");$(V,xe,Pe,"Z","");$(yt,xe,Pe,"Z","");$(V,ne,Ln,"h","");$(yt,ne,Ln,"h","");var Wn="";for(var Ma=0;Ma<WT.length;Ma++){var qo=WT.charAt(Ma);Wn=String.fromCharCode(55349,56320+Ma),$(V,ne,Ln,qo,Wn),$(yt,ne,Pe,qo,Wn),Wn=String.fromCharCode(55349,56372+Ma),$(V,ne,Ln,qo,Wn),$(yt,ne,Pe,qo,Wn),Wn=String.fromCharCode(55349,56424+Ma),$(V,ne,Ln,qo,Wn),$(yt,ne,Pe,qo,Wn),Wn=String.fromCharCode(55349,56580+Ma),$(V,ne,Ln,qo,Wn),$(yt,ne,Pe,qo,Wn),Wn=String.fromCharCode(55349,56684+Ma),$(V,ne,Ln,qo,Wn),$(yt,ne,Pe,qo,Wn),Wn=String.fromCharCode(55349,56736+Ma),$(V,ne,Ln,qo,Wn),$(yt,ne,Pe,qo,Wn),Wn=String.fromCharCode(55349,56788+Ma),$(V,ne,Ln,qo,Wn),$(yt,ne,Pe,qo,Wn),Wn=String.fromCharCode(55349,56840+Ma),$(V,ne,Ln,qo,Wn),$(yt,ne,Pe,qo,Wn),Wn=String.fromCharCode(55349,56944+Ma),$(V,ne,Ln,qo,Wn),$(yt,ne,Pe,qo,Wn),Ma<26&&(Wn=String.fromCharCode(55349,56632+Ma),$(V,ne,Ln,qo,Wn),$(yt,ne,Pe,qo,Wn),Wn=String.fromCharCode(55349,56476+Ma),$(V,ne,Ln,qo,Wn),$(yt,ne,Pe,qo,Wn))}Wn="";$(V,ne,Ln,"k",Wn);$(yt,ne,Pe,"k",Wn);for(var Bp=0;Bp<10;Bp++){var Kh=Bp.toString();Wn=String.fromCharCode(55349,57294+Bp),$(V,ne,Ln,Kh,Wn),$(yt,ne,Pe,Kh,Wn),Wn=String.fromCharCode(55349,57314+Bp),$(V,ne,Ln,Kh,Wn),$(yt,ne,Pe,Kh,Wn),Wn=String.fromCharCode(55349,57324+Bp),$(V,ne,Ln,Kh,Wn),$(yt,ne,Pe,Kh,Wn),Wn=String.fromCharCode(55349,57334+Bp),$(V,ne,Ln,Kh,Wn),$(yt,ne,Pe,Kh,Wn)}var pI="";for(var nA=0;nA<pI.length;nA++){var X2=pI.charAt(nA);$(V,ne,Ln,X2,X2),$(yt,ne,Pe,X2,X2)}var Q2=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Aj=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],LVe=function(t,n){var r=t.charCodeAt(0),s=t.charCodeAt(1),o=(r-55296)*1024+(s-56320)+65536,i=n==="math"?0:1;if(119808<=o&&o<120484){var a=Math.floor((o-119808)/26);return[Q2[a][2],Q2[a][i]]}else if(120782<=o&&o<=120831){var l=Math.floor((o-120782)/10);return[Aj[l][2],Aj[l][i]]}else{if(o===120485||o===120486)return[Q2[0][2],Q2[0][i]];if(120486<o&&o<120782)return["",""];throw new It("Unsupported character: "+t)}},zC=function(t,n,r){return eo[r][t]&&eo[r][t].replace&&(t=eo[r][t].replace),{value:t,metrics:aM(t,n,r)}},au=function(t,n,r,s,o){var i=zC(t,n,r),a=i.metrics;t=i.value;var l;if(a){var c=a.italic;(r==="text"||s&&s.font==="mathit")&&(c=0),l=new Lc(t,a.height,a.depth,c,a.skew,a.width,o)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+n+"' and mode '"+r+"'")),l=new Lc(t,0,0,0,0,0,o);if(s){l.maxFontSize=s.sizeMultiplier,s.style.isTight()&&l.classes.push("mtight");var u=s.getColor();u&&(l.style.color=u)}return l},$Ve=function(t,n,r,s){return s===void 0&&(s=[]),r.font==="boldsymbol"&&zC(t,"Main-Bold",n).metrics?au(t,"Main-Bold",n,r,s.concat(["mathbf"])):t==="\\"||eo[n][t].font==="main"?au(t,"Main-Regular",n,r,s):au(t,"AMS-Regular",n,r,s.concat(["amsrm"]))},FVe=function(t,n,r,s,o){return o!=="textord"&&zC(t,"Math-BoldItalic",n).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},BVe=function(t,n,r){var s=t.mode,o=t.text,i=["mord"],a=s==="math"||s==="text"&&n.font,l=a?n.font:n.fontFamily,c="",u="";if(o.charCodeAt(0)===55349&&([c,u]=LVe(o,s)),c.length>0)return au(o,c,s,n,i.concat(u));if(l){var f,m;if(l==="boldsymbol"){var g=FVe(o,s,n,i,r);f=g.fontName,m=[g.fontClass]}else a?(f=Lne[l].fontName,m=[l]):(f=e_(l,n.fontWeight,n.fontShape),m=[l,n.fontWeight,n.fontShape]);if(zC(o,f,s).metrics)return au(o,f,s,n,i.concat(m));if(One.hasOwnProperty(o)&&f.slice(0,10)==="Typewriter"){for(var y=[],v=0;v<o.length;v++)y.push(au(o[v],f,s,n,i.concat(m)));return Pne(y)}}if(r==="mathord")return au(o,"Math-Italic",s,n,i.concat(["mathnormal"]));if(r==="textord"){var w=eo[s][o]&&eo[s][o].font;if(w==="ams"){var _=e_("amsrm",n.fontWeight,n.fontShape);return au(o,_,s,n,i.concat("amsrm",n.fontWeight,n.fontShape))}else if(w==="main"||!w){var S=e_("textrm",n.fontWeight,n.fontShape);return au(o,S,s,n,i.concat(n.fontWeight,n.fontShape))}else{var k=e_(w,n.fontWeight,n.fontShape);return au(o,k,s,n,i.concat(k,n.fontWeight,n.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},zVe=(e,t)=>{if(R0(e.classes)!==R0(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var n=e.classes[0];if(n==="mbin"||n==="mord")return!1}for(var r in e.style)if(e.style.hasOwnProperty(r)&&e.style[r]!==t.style[r])return!1;for(var s in t.style)if(t.style.hasOwnProperty(s)&&e.style[s]!==t.style[s])return!1;return!0},jVe=e=>{for(var t=0;t<e.length-1;t++){var n=e[t],r=e[t+1];n instanceof Lc&&r instanceof Lc&&zVe(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,e.splice(t+1,1),t--)}return e},cM=function(t){for(var n=0,r=0,s=0,o=0;o<t.children.length;o++){var i=t.children[o];i.height>n&&(n=i.height),i.depth>r&&(r=i.depth),i.maxFontSize>s&&(s=i.maxFontSize)}t.height=n,t.depth=r,t.maxFontSize=s},cl=function(t,n,r,s){var o=new jw(t,n,r,s);return cM(o),o},Dne=(e,t,n,r)=>new jw(e,t,n,r),UVe=function(t,n,r){var s=cl([t],[],n);return s.height=Math.max(r||n.fontMetrics().defaultRuleThickness,n.minRuleThickness),s.style.borderBottomWidth=Ut(s.height),s.maxFontSize=1,s},HVe=function(t,n,r,s){var o=new lM(t,n,r,s);return cM(o),o},Pne=function(t){var n=new zw(t);return cM(n),n},VVe=function(t,n){return t instanceof zw?cl([],[t],n):t},qVe=function(t){if(t.positionType==="individualShift"){for(var n=t.children,r=[n[0]],s=-n[0].shift-n[0].elem.depth,o=s,i=1;i<n.length;i++){var a=-n[i].shift-o-n[i].elem.depth,l=a-(n[i-1].elem.height+n[i-1].elem.depth);o=o+a,r.push({type:"kern",size:l}),r.push(n[i])}return{children:r,depth:s}}var c;if(t.positionType==="top"){for(var u=t.positionData,f=0;f<t.children.length;f++){var m=t.children[f];u-=m.type==="kern"?m.size:m.elem.height+m.elem.depth}c=u}else if(t.positionType==="bottom")c=-t.positionData;else{var g=t.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")c=-g.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")c=-g.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:c}},GVe=function(t,n){for(var{children:r,depth:s}=qVe(t),o=0,i=0;i<r.length;i++){var a=r[i];if(a.type==="elem"){var l=a.elem;o=Math.max(o,l.maxFontSize,l.height)}}o+=2;var c=cl(["pstrut"],[]);c.style.height=Ut(o);for(var u=[],f=s,m=s,g=s,y=0;y<r.length;y++){var v=r[y];if(v.type==="kern")g+=v.size;else{var w=v.elem,_=v.wrapperClasses||[],S=v.wrapperStyle||{},k=cl(_,[c,w],void 0,S);k.style.top=Ut(-o-g-w.depth),v.marginLeft&&(k.style.marginLeft=v.marginLeft),v.marginRight&&(k.style.marginRight=v.marginRight),u.push(k),g+=w.height+w.depth}f=Math.min(f,g),m=Math.max(m,g)}var R=cl(["vlist"],u);R.style.height=Ut(m);var O;if(f<0){var M=cl([],[]),P=cl(["vlist"],[M]);P.style.height=Ut(-f);var j=cl(["vlist-s"],[new Lc("")]);O=[cl(["vlist-r"],[R,j]),cl(["vlist-r"],[P])]}else O=[cl(["vlist-r"],[R])];var q=cl(["vlist-t"],O);return O.length===2&&q.classes.push("vlist-t2"),q.height=m,q.depth=-f,q},WVe=(e,t)=>{var n=cl(["mspace"],[],t),r=Ro(e,t);return n.style.marginRight=Ut(r),n},e_=function(t,n,r){var s="";switch(t){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=t}var o;return n==="textbf"&&r==="textit"?o="BoldItalic":n==="textbf"?o="Bold":n==="textit"?o="Italic":o="Regular",s+"-"+o},Lne={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},$ne={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},YVe=function(t,n){var[r,s,o]=$ne[t],i=new M0(r),a=new Zf([i],{width:Ut(s),height:Ut(o),style:"width:"+Ut(s),viewBox:"0 0 "+1e3*s+" "+1e3*o,preserveAspectRatio:"xMinYMin"}),l=Dne(["overlay"],[a],n);return l.height=o,l.style.height=Ut(o),l.style.width=Ut(s),l},We={fontMap:Lne,makeSymbol:au,mathsym:$Ve,makeSpan:cl,makeSvgSpan:Dne,makeLineSpan:UVe,makeAnchor:HVe,makeFragment:Pne,wrapFragment:VVe,makeVList:GVe,makeOrd:BVe,makeGlue:WVe,staticSvg:YVe,svgData:$ne,tryCombineChars:jVe},No={number:3,unit:"mu"},zp={number:4,unit:"mu"},yf={number:5,unit:"mu"},KVe={mord:{mop:No,mbin:zp,mrel:yf,minner:No},mop:{mord:No,mop:No,mrel:yf,minner:No},mbin:{mord:zp,mop:zp,mopen:zp,minner:zp},mrel:{mord:yf,mop:yf,mopen:yf,minner:yf},mopen:{},mclose:{mop:No,mbin:zp,mrel:yf,minner:No},mpunct:{mord:No,mop:No,mrel:yf,mopen:No,mclose:No,mpunct:No,minner:No},minner:{mord:No,mop:No,mbin:zp,mrel:yf,mopen:No,mpunct:No,minner:No}},ZVe={mord:{mop:No},mop:{mord:No,mop:No},mbin:{},mrel:{},mopen:{},mclose:{mop:No},mpunct:{},minner:{mop:No}},Fne={},YT={},KT={};function Qt(e){for(var{type:t,names:n,props:r,handler:s,htmlBuilder:o,mathmlBuilder:i}=e,a={type:t,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:s},l=0;l<n.length;++l)Fne[n[l]]=a;t&&(o&&(YT[t]=o),i&&(KT[t]=i))}function Bm(e){var{type:t,htmlBuilder:n,mathmlBuilder:r}=e;Qt({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var ZT=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},ri=function(t){return t.type==="ordgroup"?t.body:[t]},Jf=We.makeSpan,JVe=["leftmost","mbin","mopen","mrel","mop","mpunct"],XVe=["rightmost","mrel","mclose","mpunct"],QVe={display:$n.DISPLAY,text:$n.TEXT,script:$n.SCRIPT,scriptscript:$n.SCRIPTSCRIPT},eqe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Oi=function(t,n,r,s){s===void 0&&(s=[null,null]);for(var o=[],i=0;i<t.length;i++){var a=Zr(t[i],n);if(a instanceof zw){var l=a.children;o.push(...l)}else o.push(a)}if(We.tryCombineChars(o),!r)return o;var c=n;if(t.length===1){var u=t[0];u.type==="sizing"?c=n.havingSize(u.size):u.type==="styling"&&(c=n.havingStyle(QVe[u.style]))}var f=Jf([s[0]||"leftmost"],[],n),m=Jf([s[1]||"rightmost"],[],n),g=r==="root";return Nj(o,(y,v)=>{var w=v.classes[0],_=y.classes[0];w==="mbin"&&XVe.includes(_)?v.classes[0]="mord":_==="mbin"&&JVe.includes(w)&&(y.classes[0]="mord")},{node:f},m,g),Nj(o,(y,v)=>{var w=mI(v),_=mI(y),S=w&&_?y.hasClass("mtight")?ZVe[w][_]:KVe[w][_]:null;if(S)return We.makeGlue(S,c)},{node:f},m,g),o},Nj=function e(t,n,r,s,o){s&&t.push(s);for(var i=0;i<t.length;i++){var a=t[i],l=Bne(a);if(l){e(l.children,n,r,null,o);continue}var c=!a.hasClass("mspace");if(c){var u=n(a,r.node);u&&(r.insertAfter?r.insertAfter(u):(t.unshift(u),i++))}c?r.node=a:o&&a.hasClass("newline")&&(r.node=Jf(["leftmost"])),r.insertAfter=(f=>m=>{t.splice(f+1,0,m),i++})(i)}s&&t.pop()},Bne=function(t){return t instanceof zw||t instanceof lM||t instanceof jw&&t.hasClass("enclosing")?t:null},tqe=function e(t,n){var r=Bne(t);if(r){var s=r.children;if(s.length){if(n==="right")return e(s[s.length-1],"right");if(n==="left")return e(s[0],"left")}}return t},mI=function(t,n){return t?(n&&(t=tqe(t,n)),eqe[t.classes[0]]||null):null},Kx=function(t,n){var r=["nulldelimiter"].concat(t.baseSizingClasses());return Jf(n.concat(r))},Zr=function(t,n,r){if(!t)return Jf();if(YT[t.type]){var s=YT[t.type](t,n);if(r&&n.size!==r.size){s=Jf(n.sizingClasses(r),[s],n);var o=n.sizeMultiplier/r.sizeMultiplier;s.height*=o,s.depth*=o}return s}else throw new It("Got group of unknown type: '"+t.type+"'")};function t_(e,t){var n=Jf(["base"],e,t),r=Jf(["strut"]);return r.style.height=Ut(n.height+n.depth),n.depth&&(r.style.verticalAlign=Ut(-n.depth)),n.children.unshift(r),n}function gI(e,t){var n=null;e.length===1&&e[0].type==="tag"&&(n=e[0].tag,e=e[0].body);var r=Oi(e,t,"root"),s;r.length===2&&r[1].hasClass("tag")&&(s=r.pop());for(var o=[],i=[],a=0;a<r.length;a++)if(i.push(r[a]),r[a].hasClass("mbin")||r[a].hasClass("mrel")||r[a].hasClass("allowbreak")){for(var l=!1;a<r.length-1&&r[a+1].hasClass("mspace")&&!r[a+1].hasClass("newline");)a++,i.push(r[a]),r[a].hasClass("nobreak")&&(l=!0);l||(o.push(t_(i,t)),i=[])}else r[a].hasClass("newline")&&(i.pop(),i.length>0&&(o.push(t_(i,t)),i=[]),o.push(r[a]));i.length>0&&o.push(t_(i,t));var c;n?(c=t_(Oi(n,t,!0)),c.classes=["tag"],o.push(c)):s&&o.push(s);var u=Jf(["katex-html"],o);if(u.setAttribute("aria-hidden","true"),c){var f=c.children[0];f.style.height=Ut(u.height+u.depth),u.depth&&(f.style.verticalAlign=Ut(-u.depth))}return u}function zne(e){return new zw(e)}class Wl{constructor(t,n,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=n||[],this.classes=r||[]}setAttribute(t,n){this.attributes[t]=n}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);this.classes.length>0&&(t.className=R0(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof vd&&this.children[r+1]instanceof vd){for(var s=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof vd;)s+=this.children[++r].toText();t.appendChild(new vd(s).toNode())}else t.appendChild(this.children[r].toNode());return t}toMarkup(){var t="<"+this.type;for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=" "+n+'="',t+=as.escape(this.attributes[n]),t+='"');this.classes.length>0&&(t+=' class ="'+as.escape(R0(this.classes))+'"'),t+=">";for(var r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class vd{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return as.escape(this.toText())}toText(){return this.text}}class nqe{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",Ut(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Ut(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ct={MathNode:Wl,TextNode:vd,SpaceNode:nqe,newDocumentFragment:zne},$c=function(t,n,r){return eo[n][t]&&eo[n][t].replace&&t.charCodeAt(0)!==55349&&!(One.hasOwnProperty(t)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(t=eo[n][t].replace),new Ct.TextNode(t)},uM=function(t){return t.length===1?t[0]:new Ct.MathNode("mrow",t)},dM=function(t,n){if(n.fontFamily==="texttt")return"monospace";if(n.fontFamily==="textsf")return n.fontShape==="textit"&&n.fontWeight==="textbf"?"sans-serif-bold-italic":n.fontShape==="textit"?"sans-serif-italic":n.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(n.fontShape==="textit"&&n.fontWeight==="textbf")return"bold-italic";if(n.fontShape==="textit")return"italic";if(n.fontWeight==="textbf")return"bold";var r=n.font;if(!r||r==="mathnormal")return null;var s=t.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var o=t.text;if(["\\imath","\\jmath"].includes(o))return null;eo[s][o]&&eo[s][o].replace&&(o=eo[s][o].replace);var i=We.fontMap[r].fontName;return aM(o,i,s)?We.fontMap[r].variant:null};function rA(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof vd&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var n=e.children[0];return n instanceof vd&&n.text===","}else return!1}var El=function(t,n,r){if(t.length===1){var s=Vs(t[0],n);return r&&s instanceof Wl&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var o=[],i,a=0;a<t.length;a++){var l=Vs(t[a],n);if(l instanceof Wl&&i instanceof Wl){if(l.type==="mtext"&&i.type==="mtext"&&l.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...l.children);continue}else if(l.type==="mn"&&i.type==="mn"){i.children.push(...l.children);continue}else if(rA(l)&&i.type==="mn"){i.children.push(...l.children);continue}else if(l.type==="mn"&&rA(i))l.children=[...i.children,...l.children],o.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(i.type==="mn"||rA(i))){var c=l.children[0];c instanceof Wl&&c.type==="mn"&&(c.children=[...i.children,...c.children],o.pop())}else if(i.type==="mi"&&i.children.length===1){var u=i.children[0];if(u instanceof vd&&u.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var f=l.children[0];f instanceof vd&&f.text.length>0&&(f.text=f.text.slice(0,1)+""+f.text.slice(1),o.pop())}}}o.push(l),i=l}return o},O0=function(t,n,r){return uM(El(t,n,r))},Vs=function(t,n){if(!t)return new Ct.MathNode("mrow");if(KT[t.type]){var r=KT[t.type](t,n);return r}else throw new It("Got group of unknown type: '"+t.type+"'")};function Ij(e,t,n,r,s){var o=El(e,n),i;o.length===1&&o[0]instanceof Wl&&["mrow","mtable"].includes(o[0].type)?i=o[0]:i=new Ct.MathNode("mrow",o);var a=new Ct.MathNode("annotation",[new Ct.TextNode(t)]);a.setAttribute("encoding","application/x-tex");var l=new Ct.MathNode("semantics",[i,a]),c=new Ct.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&c.setAttribute("display","block");var u=s?"katex":"katex-mathml";return We.makeSpan([u],[c])}var jne=function(t){return new Sf({style:t.displayMode?$n.DISPLAY:$n.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},Une=function(t,n){if(n.displayMode){var r=["katex-display"];n.leqno&&r.push("leqno"),n.fleqn&&r.push("fleqn"),t=We.makeSpan(r,[t])}return t},rqe=function(t,n,r){var s=jne(r),o;if(r.output==="mathml")return Ij(t,n,s,r.displayMode,!0);if(r.output==="html"){var i=gI(t,s);o=We.makeSpan(["katex"],[i])}else{var a=Ij(t,n,s,r.displayMode,!1),l=gI(t,s);o=We.makeSpan(["katex"],[a,l])}return Une(o,r)},sqe=function(t,n,r){var s=jne(r),o=gI(t,s),i=We.makeSpan(["katex"],[o]);return Une(i,r)},oqe={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},iqe=function(t){var n=new Ct.MathNode("mo",[new Ct.TextNode(oqe[t.replace(/^\\/,"")])]);return n.setAttribute("stretchy","true"),n},aqe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},lqe=function(t){return t.type==="ordgroup"?t.body.length:1},cqe=function(t,n){function r(){var a=4e5,l=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(l)){var c=t,u=lqe(c.base),f,m,g;if(u>5)l==="widehat"||l==="widecheck"?(f=420,a=2364,g=.42,m=l+"4"):(f=312,a=2340,g=.34,m="tilde4");else{var y=[1,1,2,2,3,3][u];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][y],f=[0,239,300,360,420][y],g=[0,.24,.3,.3,.36,.42][y],m=l+y):(a=[0,600,1033,2339,2340][y],f=[0,260,286,306,312][y],g=[0,.26,.286,.3,.306,.34][y],m="tilde"+y)}var v=new M0(m),w=new Zf([v],{width:"100%",height:Ut(g),viewBox:"0 0 "+a+" "+f,preserveAspectRatio:"none"});return{span:We.makeSvgSpan([],[w],n),minWidth:0,height:g}}else{var _=[],S=aqe[l],[k,R,O]=S,M=O/1e3,P=k.length,j,q;if(P===1){var U=S[3];j=["hide-tail"],q=[U]}else if(P===2)j=["halfarrow-left","halfarrow-right"],q=["xMinYMin","xMaxYMin"];else if(P===3)j=["brace-left","brace-center","brace-right"],q=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+P+" children.");for(var z=0;z<P;z++){var H=new M0(k[z]),F=new Zf([H],{width:"400em",height:Ut(M),viewBox:"0 0 "+a+" "+O,preserveAspectRatio:q[z]+" slice"}),W=We.makeSvgSpan([j[z]],[F],n);if(P===1)return{span:W,minWidth:R,height:M};W.style.height=Ut(M),_.push(W)}return{span:We.makeSpan(["stretchy"],_,n),minWidth:R,height:M}}}var{span:s,minWidth:o,height:i}=r();return s.height=i,s.style.height=Ut(i),o>0&&(s.style.minWidth=Ut(o)),s},uqe=function(t,n,r,s,o){var i,a=t.height+t.depth+r+s;if(/fbox|color|angl/.test(n)){if(i=We.makeSpan(["stretchy",n],[],o),n==="fbox"){var l=o.color&&o.getColor();l&&(i.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(n)&&c.push(new hI({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(n)&&c.push(new hI({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new Zf(c,{width:"100%",height:Ut(a)});i=We.makeSvgSpan([],[u],o)}return i.height=a,i.style.height=Ut(a),i},Xf={encloseSpan:uqe,mathMLnode:iqe,svgSpan:cqe};function xr(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function fM(e){var t=jC(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function jC(e){return e&&(e.type==="atom"||PVe.hasOwnProperty(e.type))?e:null}var hM=(e,t)=>{var n,r,s;e&&e.type==="supsub"?(r=xr(e.base,"accent"),n=r.base,e.base=n,s=OVe(Zr(e,t)),e.base=r):(r=xr(e,"accent"),n=r.base);var o=Zr(n,t.havingCrampedStyle()),i=r.isShifty&&as.isCharacterBox(n),a=0;if(i){var l=as.getBaseElem(n),c=Zr(l,t.havingCrampedStyle());a=_j(c).skew}var u=r.label==="\\c",f=u?o.height+o.depth:Math.min(o.height,t.fontMetrics().xHeight),m;if(r.isStretchy)m=Xf.svgSpan(r,t),m=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"elem",elem:m,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+Ut(2*a)+")",marginLeft:Ut(2*a)}:void 0}]},t);else{var g,y;r.label==="\\vec"?(g=We.staticSvg("vec",t),y=We.svgData.vec[1]):(g=We.makeOrd({mode:r.mode,text:r.label},t,"textord"),g=_j(g),g.italic=0,y=g.width,u&&(f+=g.depth)),m=We.makeSpan(["accent-body"],[g]);var v=r.label==="\\textcircled";v&&(m.classes.push("accent-full"),f=o.height);var w=a;v||(w-=y/2),m.style.left=Ut(w),r.label==="\\textcircled"&&(m.style.top=".2em"),m=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:-f},{type:"elem",elem:m}]},t)}var _=We.makeSpan(["mord","accent"],[m],t);return s?(s.children[0]=_,s.height=Math.max(_.height,s.height),s.classes[0]="mord",s):_},Hne=(e,t)=>{var n=e.isStretchy?Xf.mathMLnode(e.label):new Ct.MathNode("mo",[$c(e.label,e.mode)]),r=new Ct.MathNode("mover",[Vs(e.base,t),n]);return r.setAttribute("accent","true"),r},dqe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));Qt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var n=ZT(t[0]),r=!dqe.test(e.funcName),s=!r||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:r,isShifty:s,base:n}},htmlBuilder:hM,mathmlBuilder:Hne});Qt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var n=t[0],r=e.parser.mode;return r==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:e.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:hM,mathmlBuilder:Hne});Qt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0];return{type:"accentUnder",mode:n.mode,label:r,base:s}},htmlBuilder:(e,t)=>{var n=Zr(e.base,t),r=Xf.svgSpan(e,t),s=e.label==="\\utilde"?.12:0,o=We.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:n}]},t);return We.makeSpan(["mord","accentunder"],[o],t)},mathmlBuilder:(e,t)=>{var n=Xf.mathMLnode(e.label),r=new Ct.MathNode("munder",[Vs(e.base,t),n]);return r.setAttribute("accentunder","true"),r}});var n_=e=>{var t=new Ct.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};Qt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r,funcName:s}=e;return{type:"xArrow",mode:r.mode,label:s,body:t[0],below:n[0]}},htmlBuilder(e,t){var n=t.style,r=t.havingStyle(n.sup()),s=We.wrapFragment(Zr(e.body,r,t),t),o=e.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(o+"-arrow-pad");var i;e.below&&(r=t.havingStyle(n.sub()),i=We.wrapFragment(Zr(e.below,r,t),t),i.classes.push(o+"-arrow-pad"));var a=Xf.svgSpan(e,t),l=-t.fontMetrics().axisHeight+.5*a.height,c=-t.fontMetrics().axisHeight-.5*a.height-.111;(s.depth>.25||e.label==="\\xleftequilibrium")&&(c-=s.depth);var u;if(i){var f=-t.fontMetrics().axisHeight+i.height+.5*a.height+.111;u=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:c},{type:"elem",elem:a,shift:l},{type:"elem",elem:i,shift:f}]},t)}else u=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:c},{type:"elem",elem:a,shift:l}]},t);return u.children[0].children[0].children[1].classes.push("svg-align"),We.makeSpan(["mrel","x-arrow"],[u],t)},mathmlBuilder(e,t){var n=Xf.mathMLnode(e.label);n.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(e.body){var s=n_(Vs(e.body,t));if(e.below){var o=n_(Vs(e.below,t));r=new Ct.MathNode("munderover",[n,o,s])}else r=new Ct.MathNode("mover",[n,s])}else if(e.below){var i=n_(Vs(e.below,t));r=new Ct.MathNode("munder",[n,i])}else r=n_(),r=new Ct.MathNode("mover",[n,r]);return r}});var fqe=We.makeSpan;function Vne(e,t){var n=Oi(e.body,t,!0);return fqe([e.mclass],n,t)}function qne(e,t){var n,r=El(e.body,t);return e.mclass==="minner"?n=new Ct.MathNode("mpadded",r):e.mclass==="mord"?e.isCharacterBox?(n=r[0],n.type="mi"):n=new Ct.MathNode("mi",r):(e.isCharacterBox?(n=r[0],n.type="mo"):n=new Ct.MathNode("mo",r),e.mclass==="mbin"?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):e.mclass==="mpunct"?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(n.attributes.lspace="0em",n.attributes.rspace="0em"):e.mclass==="minner"&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}Qt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:n,funcName:r}=e,s=t[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),body:ri(s),isCharacterBox:as.isCharacterBox(s)}},htmlBuilder:Vne,mathmlBuilder:qne});var UC=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};Qt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:n}=e;return{type:"mclass",mode:n.mode,mclass:UC(t[0]),body:ri(t[1]),isCharacterBox:as.isCharacterBox(t[1])}}});Qt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:n,funcName:r}=e,s=t[1],o=t[0],i;r!=="\\stackrel"?i=UC(s):i="mrel";var a={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:ri(s)},l={type:"supsub",mode:o.mode,base:a,sup:r==="\\underset"?null:o,sub:r==="\\underset"?o:null};return{type:"mclass",mode:n.mode,mclass:i,body:[l],isCharacterBox:as.isCharacterBox(l)}},htmlBuilder:Vne,mathmlBuilder:qne});Qt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"pmb",mode:n.mode,mclass:UC(t[0]),body:ri(t[0])}},htmlBuilder(e,t){var n=Oi(e.body,t,!0),r=We.makeSpan([e.mclass],n,t);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(e,t){var n=El(e.body,t),r=new Ct.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var hqe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Rj=()=>({type:"styling",body:[],mode:"math",style:"display"}),Mj=e=>e.type==="textord"&&e.text==="@",pqe=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function mqe(e,t,n){var r=hqe[e];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var s=n.callFunction("\\\\cdleft",[t[0]],[]),o={type:"atom",text:r,mode:"math",family:"rel"},i=n.callFunction("\\Big",[o],[]),a=n.callFunction("\\\\cdright",[t[1]],[]),l={type:"ordgroup",mode:"math",body:[s,i,a]};return n.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return n.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function gqe(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var n=e.fetch().text;if(n==="&"||n==="\\\\")e.consume();else if(n==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new It("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var r=[],s=[r],o=0;o<t.length;o++){for(var i=t[o],a=Rj(),l=0;l<i.length;l++)if(!Mj(i[l]))a.body.push(i[l]);else{r.push(a),l+=1;var c=fM(i[l]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var f=0;f<2;f++){for(var m=!0,g=l+1;g<i.length;g++){if(pqe(i[g],c)){m=!1,l=g;break}if(Mj(i[g]))throw new It("Missing a "+c+" character to complete a CD arrow.",i[g]);u[f].body.push(i[g])}if(m)throw new It("Missing a "+c+" character to complete a CD arrow.",i[l])}else throw new It('Expected one of "<>AV=|." after @',i[l]);var y=mqe(c,u,e),v={type:"styling",body:[y],mode:"math",style:"display"};r.push(v),a=Rj()}o%2===0?r.push(a):r.shift(),r=[],s.push(r)}e.gullet.endGroup(),e.gullet.endGroup();var w=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}Qt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:t[0]}},htmlBuilder(e,t){var n=t.havingStyle(t.style.sup()),r=We.wrapFragment(Zr(e.label,n,t),t);return r.classes.push("cd-label-"+e.side),r.style.bottom=Ut(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(e,t){var n=new Ct.MathNode("mrow",[Vs(e.label,t)]);return n=new Ct.MathNode("mpadded",[n]),n.setAttribute("width","0"),e.side==="left"&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),n=new Ct.MathNode("mstyle",[n]),n.setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}});Qt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:n}=e;return{type:"cdlabelparent",mode:n.mode,fragment:t[0]}},htmlBuilder(e,t){var n=We.wrapFragment(Zr(e.fragment,t),t);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder(e,t){return new Ct.MathNode("mrow",[Vs(e.fragment,t)])}});Qt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:n}=e,r=xr(t[0],"ordgroup"),s=r.body,o="",i=0;i<s.length;i++){var a=xr(s[i],"textord");o+=a.text}var l=parseInt(o),c;if(isNaN(l))throw new It("\\@char has non-numeric argument "+o);if(l<0||l>=1114111)throw new It("\\@char with invalid code point "+o);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:n.mode,text:c}}});var Gne=(e,t)=>{var n=Oi(e.body,t.withColor(e.color),!1);return We.makeFragment(n)},Wne=(e,t)=>{var n=El(e.body,t.withColor(e.color)),r=new Ct.MathNode("mstyle",n);return r.setAttribute("mathcolor",e.color),r};Qt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:n}=e,r=xr(t[0],"color-token").color,s=t[1];return{type:"color",mode:n.mode,color:r,body:ri(s)}},htmlBuilder:Gne,mathmlBuilder:Wne});Qt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:n,breakOnTokenText:r}=e,s=xr(t[0],"color-token").color;n.gullet.macros.set("\\current@color",s);var o=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:s,body:o}},htmlBuilder:Gne,mathmlBuilder:Wne});Qt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,n){var{parser:r}=e,s=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,o=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:o,size:s&&xr(s,"size").value}},htmlBuilder(e,t){var n=We.makeSpan(["mspace"],[],t);return e.newLine&&(n.classes.push("newline"),e.size&&(n.style.marginTop=Ut(Ro(e.size,t)))),n},mathmlBuilder(e,t){var n=new Ct.MathNode("mspace");return e.newLine&&(n.setAttribute("linebreak","newline"),e.size&&n.setAttribute("height",Ut(Ro(e.size,t)))),n}});var bI={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Yne=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new It("Expected a control sequence",e);return t},bqe=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},Kne=(e,t,n,r)=>{var s=e.gullet.macros.get(n.text);s==null&&(n.noexpand=!0,s={tokens:[n],numArgs:0,unexpandable:!e.gullet.isExpandable(n.text)}),e.gullet.macros.set(t,s,r)};Qt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:n}=e;t.consumeSpaces();var r=t.fetch();if(bI[r.text])return(n==="\\global"||n==="\\\\globallong")&&(r.text=bI[r.text]),xr(t.parseFunction(),"internal");throw new It("Invalid token after macro prefix",r)}});Qt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=t.gullet.popToken(),s=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new It("Expected a control sequence",r);for(var o=0,i,a=[[]];t.gullet.future().text!=="{";)if(r=t.gullet.popToken(),r.text==="#"){if(t.gullet.future().text==="{"){i=t.gullet.future(),a[o].push("{");break}if(r=t.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new It('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==o+1)throw new It('Argument number "'+r.text+'" out of order');o++,a.push([])}else{if(r.text==="EOF")throw new It("Expected a macro definition");a[o].push(r.text)}var{tokens:l}=t.gullet.consumeArg();return i&&l.unshift(i),(n==="\\edef"||n==="\\xdef")&&(l=t.gullet.expandTokens(l),l.reverse()),t.gullet.macros.set(s,{tokens:l,numArgs:o,delimiters:a},n===bI[n]),{type:"internal",mode:t.mode}}});Qt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=Yne(t.gullet.popToken());t.gullet.consumeSpaces();var s=bqe(t);return Kne(t,r,s,n==="\\\\globallet"),{type:"internal",mode:t.mode}}});Qt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=Yne(t.gullet.popToken()),s=t.gullet.popToken(),o=t.gullet.popToken();return Kne(t,r,o,n==="\\\\globalfuture"),t.gullet.pushToken(o),t.gullet.pushToken(s),{type:"internal",mode:t.mode}}});var Tv=function(t,n,r){var s=eo.math[t]&&eo.math[t].replace,o=aM(s||t,n,r);if(!o)throw new Error("Unsupported symbol "+t+" and font size "+n+".");return o},pM=function(t,n,r,s){var o=r.havingBaseStyle(n),i=We.makeSpan(s.concat(o.sizingClasses(r)),[t],r),a=o.sizeMultiplier/r.sizeMultiplier;return i.height*=a,i.depth*=a,i.maxFontSize=o.sizeMultiplier,i},Zne=function(t,n,r){var s=n.havingBaseStyle(r),o=(1-n.sizeMultiplier/s.sizeMultiplier)*n.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=Ut(o),t.height-=o,t.depth+=o},yqe=function(t,n,r,s,o,i){var a=We.makeSymbol(t,"Main-Regular",o,s),l=pM(a,n,s,i);return r&&Zne(l,s,n),l},vqe=function(t,n,r,s){return We.makeSymbol(t,"Size"+n+"-Regular",r,s)},Jne=function(t,n,r,s,o,i){var a=vqe(t,n,o,s),l=pM(We.makeSpan(["delimsizing","size"+n],[a],s),$n.TEXT,s,i);return r&&Zne(l,s,$n.TEXT),l},sA=function(t,n,r){var s;n==="Size1-Regular"?s="delim-size1":s="delim-size4";var o=We.makeSpan(["delimsizinginner",s],[We.makeSpan([],[We.makeSymbol(t,n,r)])]);return{type:"elem",elem:o}},oA=function(t,n,r){var s=yd["Size4-Regular"][t.charCodeAt(0)]?yd["Size4-Regular"][t.charCodeAt(0)][4]:yd["Size1-Regular"][t.charCodeAt(0)][4],o=new M0("inner",TVe(t,Math.round(1e3*n))),i=new Zf([o],{width:Ut(s),height:Ut(n),style:"width:"+Ut(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*n),preserveAspectRatio:"xMinYMin"}),a=We.makeSvgSpan([],[i],r);return a.height=n,a.style.height=Ut(n),a.style.width=Ut(s),{type:"elem",elem:a}},yI=.008,r_={type:"kern",size:-1*yI},xqe=["|","\\lvert","\\rvert","\\vert"],wqe=["\\|","\\lVert","\\rVert","\\Vert"],Xne=function(t,n,r,s,o,i){var a,l,c,u,f="",m=0;a=c=u=t,l=null;var g="Size1-Regular";t==="\\uparrow"?c=u="":t==="\\Uparrow"?c=u="":t==="\\downarrow"?a=c="":t==="\\Downarrow"?a=c="":t==="\\updownarrow"?(a="\\uparrow",c="",u="\\downarrow"):t==="\\Updownarrow"?(a="\\Uparrow",c="",u="\\Downarrow"):xqe.includes(t)?(c="",f="vert",m=333):wqe.includes(t)?(c="",f="doublevert",m=556):t==="["||t==="\\lbrack"?(a="",c="",u="",g="Size4-Regular",f="lbrack",m=667):t==="]"||t==="\\rbrack"?(a="",c="",u="",g="Size4-Regular",f="rbrack",m=667):t==="\\lfloor"||t===""?(c=a="",u="",g="Size4-Regular",f="lfloor",m=667):t==="\\lceil"||t===""?(a="",c=u="",g="Size4-Regular",f="lceil",m=667):t==="\\rfloor"||t===""?(c=a="",u="",g="Size4-Regular",f="rfloor",m=667):t==="\\rceil"||t===""?(a="",c=u="",g="Size4-Regular",f="rceil",m=667):t==="("||t==="\\lparen"?(a="",c="",u="",g="Size4-Regular",f="lparen",m=875):t===")"||t==="\\rparen"?(a="",c="",u="",g="Size4-Regular",f="rparen",m=875):t==="\\{"||t==="\\lbrace"?(a="",l="",u="",c="",g="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(a="",l="",u="",c="",g="Size4-Regular"):t==="\\lgroup"||t===""?(a="",u="",c="",g="Size4-Regular"):t==="\\rgroup"||t===""?(a="",u="",c="",g="Size4-Regular"):t==="\\lmoustache"||t===""?(a="",u="",c="",g="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(a="",u="",c="",g="Size4-Regular");var y=Tv(a,g,o),v=y.height+y.depth,w=Tv(c,g,o),_=w.height+w.depth,S=Tv(u,g,o),k=S.height+S.depth,R=0,O=1;if(l!==null){var M=Tv(l,g,o);R=M.height+M.depth,O=2}var P=v+k+R,j=Math.max(0,Math.ceil((n-P)/(O*_))),q=P+j*O*_,U=s.fontMetrics().axisHeight;r&&(U*=s.sizeMultiplier);var z=q/2-U,H=[];if(f.length>0){var F=q-v-k,W=Math.round(q*1e3),X=CVe(f,Math.round(F*1e3)),J=new M0(f,X),ee=(m/1e3).toFixed(3)+"em",re=(W/1e3).toFixed(3)+"em",ie=new Zf([J],{width:ee,height:re,viewBox:"0 0 "+m+" "+W}),Z=We.makeSvgSpan([],[ie],s);Z.height=W/1e3,Z.style.width=ee,Z.style.height=re,H.push({type:"elem",elem:Z})}else{if(H.push(sA(u,g,o)),H.push(r_),l===null){var te=q-v-k+2*yI;H.push(oA(c,te,s))}else{var oe=(q-v-k-R)/2+2*yI;H.push(oA(c,oe,s)),H.push(r_),H.push(sA(l,g,o)),H.push(r_),H.push(oA(c,oe,s))}H.push(r_),H.push(sA(a,g,o))}var Q=s.havingBaseStyle($n.TEXT),Te=We.makeVList({positionType:"bottom",positionData:z,children:H},Q);return pM(We.makeSpan(["delimsizing","mult"],[Te],Q),$n.TEXT,s,i)},iA=80,aA=.08,lA=function(t,n,r,s,o){var i=SVe(t,s,r),a=new M0(t,i),l=new Zf([a],{width:"400em",height:Ut(n),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return We.makeSvgSpan(["hide-tail"],[l],o)},Eqe=function(t,n){var r=n.havingBaseSizing(),s=nre("\\surd",t*r.sizeMultiplier,tre,r),o=r.sizeMultiplier,i=Math.max(0,n.minRuleThickness-n.fontMetrics().sqrtRuleThickness),a,l=0,c=0,u=0,f;return s.type==="small"?(u=1e3+1e3*i+iA,t<1?o=1:t<1.4&&(o=.7),l=(1+i+aA)/o,c=(1+i)/o,a=lA("sqrtMain",l,u,i,n),a.style.minWidth="0.853em",f=.833/o):s.type==="large"?(u=(1e3+iA)*Zv[s.size],c=(Zv[s.size]+i)/o,l=(Zv[s.size]+i+aA)/o,a=lA("sqrtSize"+s.size,l,u,i,n),a.style.minWidth="1.02em",f=1/o):(l=t+i+aA,c=t+i,u=Math.floor(1e3*t+i)+iA,a=lA("sqrtTall",l,u,i,n),a.style.minWidth="0.742em",f=1.056),a.height=c,a.style.height=Ut(l),{span:a,advanceWidth:f,ruleWidth:(n.fontMetrics().sqrtRuleThickness+i)*o}},Qne=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],_qe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],ere=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Zv=[0,1.2,1.8,2.4,3],Sqe=function(t,n,r,s,o){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),Qne.includes(t)||ere.includes(t))return Jne(t,n,!1,r,s,o);if(_qe.includes(t))return Xne(t,Zv[n],!1,r,s,o);throw new It("Illegal delimiter: '"+t+"'")},Tqe=[{type:"small",style:$n.SCRIPTSCRIPT},{type:"small",style:$n.SCRIPT},{type:"small",style:$n.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Cqe=[{type:"small",style:$n.SCRIPTSCRIPT},{type:"small",style:$n.SCRIPT},{type:"small",style:$n.TEXT},{type:"stack"}],tre=[{type:"small",style:$n.SCRIPTSCRIPT},{type:"small",style:$n.SCRIPT},{type:"small",style:$n.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],kqe=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},nre=function(t,n,r,s){for(var o=Math.min(2,3-s.style.size),i=o;i<r.length&&r[i].type!=="stack";i++){var a=Tv(t,kqe(r[i]),"math"),l=a.height+a.depth;if(r[i].type==="small"){var c=s.havingBaseStyle(r[i].style);l*=c.sizeMultiplier}if(l>n)return r[i]}return r[r.length-1]},rre=function(t,n,r,s,o,i){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var a;ere.includes(t)?a=Tqe:Qne.includes(t)?a=tre:a=Cqe;var l=nre(t,n,a,s);return l.type==="small"?yqe(t,l.style,r,s,o,i):l.type==="large"?Jne(t,l.size,r,s,o,i):Xne(t,n,r,s,o,i)},Aqe=function(t,n,r,s,o,i){var a=s.fontMetrics().axisHeight*s.sizeMultiplier,l=901,c=5/s.fontMetrics().ptPerEm,u=Math.max(n-a,r+a),f=Math.max(u/500*l,2*u-c);return rre(t,f,!0,s,o,i)},Hf={sqrtImage:Eqe,sizedDelim:Sqe,sizeToMaxHeight:Zv,customSizedDelim:rre,leftRightDelim:Aqe},Oj={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Nqe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function HC(e,t){var n=jC(e);if(n&&Nqe.includes(n.text))return n;throw n?new It("Invalid delimiter '"+n.text+"' after '"+t.funcName+"'",e):new It("Invalid delimiter type '"+e.type+"'",e)}Qt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var n=HC(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:Oj[e.funcName].size,mclass:Oj[e.funcName].mclass,delim:n.text}},htmlBuilder:(e,t)=>e.delim==="."?We.makeSpan([e.mclass]):Hf.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push($c(e.delim,e.mode));var n=new Ct.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=Ut(Hf.sizeToMaxHeight[e.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}});function Dj(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Qt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=e.parser.gullet.macros.get("\\current@color");if(n&&typeof n!="string")throw new It("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:HC(t[0],e).text,color:n}}});Qt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=HC(t[0],e),r=e.parser;++r.leftrightDepth;var s=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var o=xr(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:s,left:n.text,right:o.delim,rightColor:o.color}},htmlBuilder:(e,t)=>{Dj(e);for(var n=Oi(e.body,t,!0,["mopen","mclose"]),r=0,s=0,o=!1,i=0;i<n.length;i++)n[i].isMiddle?o=!0:(r=Math.max(n[i].height,r),s=Math.max(n[i].depth,s));r*=t.sizeMultiplier,s*=t.sizeMultiplier;var a;if(e.left==="."?a=Kx(t,["mopen"]):a=Hf.leftRightDelim(e.left,r,s,t,e.mode,["mopen"]),n.unshift(a),o)for(var l=1;l<n.length;l++){var c=n[l],u=c.isMiddle;u&&(n[l]=Hf.leftRightDelim(u.delim,r,s,u.options,e.mode,[]))}var f;if(e.right===".")f=Kx(t,["mclose"]);else{var m=e.rightColor?t.withColor(e.rightColor):t;f=Hf.leftRightDelim(e.right,r,s,m,e.mode,["mclose"])}return n.push(f),We.makeSpan(["minner"],n,t)},mathmlBuilder:(e,t)=>{Dj(e);var n=El(e.body,t);if(e.left!=="."){var r=new Ct.MathNode("mo",[$c(e.left,e.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if(e.right!=="."){var s=new Ct.MathNode("mo",[$c(e.right,e.mode)]);s.setAttribute("fence","true"),e.rightColor&&s.setAttribute("mathcolor",e.rightColor),n.push(s)}return uM(n)}});Qt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=HC(t[0],e);if(!e.parser.leftrightDepth)throw new It("\\middle without preceding \\left",n);return{type:"middle",mode:e.parser.mode,delim:n.text}},htmlBuilder:(e,t)=>{var n;if(e.delim===".")n=Kx(t,[]);else{n=Hf.sizedDelim(e.delim,1,t,e.mode,[]);var r={delim:e.delim,options:t};n.isMiddle=r}return n},mathmlBuilder:(e,t)=>{var n=e.delim==="\\vert"||e.delim==="|"?$c("|","text"):$c(e.delim,e.mode),r=new Ct.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var mM=(e,t)=>{var n=We.wrapFragment(Zr(e.body,t),t),r=e.label.slice(1),s=t.sizeMultiplier,o,i=0,a=as.isCharacterBox(e.body);if(r==="sout")o=We.makeSpan(["stretchy","sout"]),o.height=t.fontMetrics().defaultRuleThickness/s,i=-.5*t.fontMetrics().xHeight;else if(r==="phase"){var l=Ro({number:.6,unit:"pt"},t),c=Ro({number:.35,unit:"ex"},t),u=t.havingBaseSizing();s=s/u.sizeMultiplier;var f=n.height+n.depth+l+c;n.style.paddingLeft=Ut(f/2+l);var m=Math.floor(1e3*f*s),g=EVe(m),y=new Zf([new M0("phase",g)],{width:"400em",height:Ut(m/1e3),viewBox:"0 0 400000 "+m,preserveAspectRatio:"xMinYMin slice"});o=We.makeSvgSpan(["hide-tail"],[y],t),o.style.height=Ut(f),i=n.depth+l+c}else{/cancel/.test(r)?a||n.classes.push("cancel-pad"):r==="angl"?n.classes.push("anglpad"):n.classes.push("boxpad");var v=0,w=0,_=0;/box/.test(r)?(_=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),v=t.fontMetrics().fboxsep+(r==="colorbox"?0:_),w=v):r==="angl"?(_=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),v=4*_,w=Math.max(0,.25-n.depth)):(v=a?.2:0,w=v),o=Xf.encloseSpan(n,r,v,w,t),/fbox|boxed|fcolorbox/.test(r)?(o.style.borderStyle="solid",o.style.borderWidth=Ut(_)):r==="angl"&&_!==.049&&(o.style.borderTopWidth=Ut(_),o.style.borderRightWidth=Ut(_)),i=n.depth+w,e.backgroundColor&&(o.style.backgroundColor=e.backgroundColor,e.borderColor&&(o.style.borderColor=e.borderColor))}var S;if(e.backgroundColor)S=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:i},{type:"elem",elem:n,shift:0}]},t);else{var k=/cancel|phase/.test(r)?["svg-align"]:[];S=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:o,shift:i,wrapperClasses:k}]},t)}return/cancel/.test(r)&&(S.height=n.height,S.depth=n.depth),/cancel/.test(r)&&!a?We.makeSpan(["mord","cancel-lap"],[S],t):We.makeSpan(["mord"],[S],t)},gM=(e,t)=>{var n=0,r=new Ct.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Vs(e.body,t)]);switch(e.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),e.label==="\\fcolorbox"){var s=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);r.setAttribute("style","border: "+s+"em solid "+String(e.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};Qt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,n){var{parser:r,funcName:s}=e,o=xr(t[0],"color-token").color,i=t[1];return{type:"enclose",mode:r.mode,label:s,backgroundColor:o,body:i}},htmlBuilder:mM,mathmlBuilder:gM});Qt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,n){var{parser:r,funcName:s}=e,o=xr(t[0],"color-token").color,i=xr(t[1],"color-token").color,a=t[2];return{type:"enclose",mode:r.mode,label:s,backgroundColor:i,borderColor:o,body:a}},htmlBuilder:mM,mathmlBuilder:gM});Qt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\fbox",body:t[0]}}});Qt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e,s=t[0];return{type:"enclose",mode:n.mode,label:r,body:s}},htmlBuilder:mM,mathmlBuilder:gM});Qt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\angl",body:t[0]}}});var sre={};function Nd(e){for(var{type:t,names:n,props:r,handler:s,htmlBuilder:o,mathmlBuilder:i}=e,a={type:t,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},l=0;l<n.length;++l)sre[n[l]]=a;o&&(YT[t]=o),i&&(KT[t]=i)}var ore={};function le(e,t){ore[e]=t}function Pj(e){var t=[];e.consumeSpaces();var n=e.fetch().text;for(n==="\\relax"&&(e.consume(),e.consumeSpaces(),n=e.fetch().text);n==="\\hline"||n==="\\hdashline";)e.consume(),t.push(n==="\\hdashline"),e.consumeSpaces(),n=e.fetch().text;return t}var VC=e=>{var t=e.parser.settings;if(!t.displayMode)throw new It("{"+e.envName+"} can be used only in display mode.")};function bM(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function Z0(e,t,n){var{hskipBeforeAndAfter:r,addJot:s,cols:o,arraystretch:i,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:f,leqno:m}=t;if(e.gullet.beginGroup(),c||e.gullet.macros.set("\\cr","\\\\\\relax"),!i){var g=e.gullet.expandMacroAsText("\\arraystretch");if(g==null)i=1;else if(i=parseFloat(g),!i||i<0)throw new It("Invalid \\arraystretch: "+g)}e.gullet.beginGroup();var y=[],v=[y],w=[],_=[],S=l!=null?[]:void 0;function k(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function R(){S&&(e.gullet.macros.get("\\df@tag")?(S.push(e.subparse([new Jl("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):S.push(!!l&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(k(),_.push(Pj(e));;){var O=e.parseExpression(!1,c?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),O={type:"ordgroup",mode:e.mode,body:O},n&&(O={type:"styling",mode:e.mode,style:n,body:[O]}),y.push(O);var M=e.fetch().text;if(M==="&"){if(f&&y.length===f){if(c||a)throw new It("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(M==="\\end"){R(),y.length===1&&O.type==="styling"&&O.body[0].body.length===0&&(v.length>1||!u)&&v.pop(),_.length<v.length+1&&_.push([]);break}else if(M==="\\\\"){e.consume();var P=void 0;e.gullet.future().text!==" "&&(P=e.parseSizeGroup(!0)),w.push(P?P.value:null),R(),_.push(Pj(e)),y=[],v.push(y),k()}else throw new It("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:s,arraystretch:i,body:v,cols:o,rowGaps:w,hskipBeforeAndAfter:r,hLinesBeforeRow:_,colSeparationType:a,tags:S,leqno:m}}function yM(e){return e.slice(0,1)==="d"?"display":"text"}var Id=function(t,n){var r,s,o=t.body.length,i=t.hLinesBeforeRow,a=0,l=new Array(o),c=[],u=Math.max(n.fontMetrics().arrayRuleWidth,n.minRuleThickness),f=1/n.fontMetrics().ptPerEm,m=5*f;if(t.colSeparationType&&t.colSeparationType==="small"){var g=n.havingStyle($n.SCRIPT).sizeMultiplier;m=.2778*(g/n.sizeMultiplier)}var y=t.colSeparationType==="CD"?Ro({number:3,unit:"ex"},n):12*f,v=3*f,w=t.arraystretch*y,_=.7*w,S=.3*w,k=0;function R(tn){for(var xt=0;xt<tn.length;++xt)xt>0&&(k+=.25),c.push({pos:k,isDashed:tn[xt]})}for(R(i[0]),r=0;r<t.body.length;++r){var O=t.body[r],M=_,P=S;a<O.length&&(a=O.length);var j=new Array(O.length);for(s=0;s<O.length;++s){var q=Zr(O[s],n);P<q.depth&&(P=q.depth),M<q.height&&(M=q.height),j[s]=q}var U=t.rowGaps[r],z=0;U&&(z=Ro(U,n),z>0&&(z+=S,P<z&&(P=z),z=0)),t.addJot&&(P+=v),j.height=M,j.depth=P,k+=M,j.pos=k,k+=P+z,l[r]=j,R(i[r+1])}var H=k/2+n.fontMetrics().axisHeight,F=t.cols||[],W=[],X,J,ee=[];if(t.tags&&t.tags.some(tn=>tn))for(r=0;r<o;++r){var re=l[r],ie=re.pos-H,Z=t.tags[r],te=void 0;Z===!0?te=We.makeSpan(["eqn-num"],[],n):Z===!1?te=We.makeSpan([],[],n):te=We.makeSpan([],Oi(Z,n,!0),n),te.depth=re.depth,te.height=re.height,ee.push({type:"elem",elem:te,shift:ie})}for(s=0,J=0;s<a||J<F.length;++s,++J){for(var oe=F[J]||{},Q=!0;oe.type==="separator";){if(Q||(X=We.makeSpan(["arraycolsep"],[]),X.style.width=Ut(n.fontMetrics().doubleRuleSep),W.push(X)),oe.separator==="|"||oe.separator===":"){var Te=oe.separator==="|"?"solid":"dashed",ge=We.makeSpan(["vertical-separator"],[],n);ge.style.height=Ut(k),ge.style.borderRightWidth=Ut(u),ge.style.borderRightStyle=Te,ge.style.margin="0 "+Ut(-u/2);var Ce=k-H;Ce&&(ge.style.verticalAlign=Ut(-Ce)),W.push(ge)}else throw new It("Invalid separator type: "+oe.separator);J++,oe=F[J]||{},Q=!1}if(!(s>=a)){var he=void 0;(s>0||t.hskipBeforeAndAfter)&&(he=as.deflt(oe.pregap,m),he!==0&&(X=We.makeSpan(["arraycolsep"],[]),X.style.width=Ut(he),W.push(X)));var Fe=[];for(r=0;r<o;++r){var De=l[r],Re=De[s];if(Re){var tt=De.pos-H;Re.depth=De.depth,Re.height=De.height,Fe.push({type:"elem",elem:Re,shift:tt})}}Fe=We.makeVList({positionType:"individualShift",children:Fe},n),Fe=We.makeSpan(["col-align-"+(oe.align||"c")],[Fe]),W.push(Fe),(s<a-1||t.hskipBeforeAndAfter)&&(he=as.deflt(oe.postgap,m),he!==0&&(X=We.makeSpan(["arraycolsep"],[]),X.style.width=Ut(he),W.push(X)))}}if(l=We.makeSpan(["mtable"],W),c.length>0){for(var fe=We.makeLineSpan("hline",n,u),nt=We.makeLineSpan("hdashline",n,u),ot=[{type:"elem",elem:l,shift:0}];c.length>0;){var Ht=c.pop(),qt=Ht.pos-H;Ht.isDashed?ot.push({type:"elem",elem:nt,shift:qt}):ot.push({type:"elem",elem:fe,shift:qt})}l=We.makeVList({positionType:"individualShift",children:ot},n)}if(ee.length===0)return We.makeSpan(["mord"],[l],n);var Pt=We.makeVList({positionType:"individualShift",children:ee},n);return Pt=We.makeSpan(["tag"],[Pt],n),We.makeFragment([l,Pt])},Iqe={c:"center ",l:"left ",r:"right "},Rd=function(t,n){for(var r=[],s=new Ct.MathNode("mtd",[],["mtr-glue"]),o=new Ct.MathNode("mtd",[],["mml-eqn-num"]),i=0;i<t.body.length;i++){for(var a=t.body[i],l=[],c=0;c<a.length;c++)l.push(new Ct.MathNode("mtd",[Vs(a[c],n)]));t.tags&&t.tags[i]&&(l.unshift(s),l.push(s),t.leqno?l.unshift(o):l.push(o)),r.push(new Ct.MathNode("mtr",l))}var u=new Ct.MathNode("mtable",r),f=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);u.setAttribute("rowspacing",Ut(f));var m="",g="";if(t.cols&&t.cols.length>0){var y=t.cols,v="",w=!1,_=0,S=y.length;y[0].type==="separator"&&(m+="top ",_=1),y[y.length-1].type==="separator"&&(m+="bottom ",S-=1);for(var k=_;k<S;k++)y[k].type==="align"?(g+=Iqe[y[k].align],w&&(v+="none "),w=!0):y[k].type==="separator"&&w&&(v+=y[k].separator==="|"?"solid ":"dashed ",w=!1);u.setAttribute("columnalign",g.trim()),/[sd]/.test(v)&&u.setAttribute("columnlines",v.trim())}if(t.colSeparationType==="align"){for(var R=t.cols||[],O="",M=1;M<R.length;M++)O+=M%2?"0em ":"1em ";u.setAttribute("columnspacing",O.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var P="",j=t.hLinesBeforeRow;m+=j[0].length>0?"left ":"",m+=j[j.length-1].length>0?"right ":"";for(var q=1;q<j.length-1;q++)P+=j[q].length===0?"none ":j[q][0]?"dashed ":"solid ";return/[sd]/.test(P)&&u.setAttribute("rowlines",P.trim()),m!==""&&(u=new Ct.MathNode("menclose",[u]),u.setAttribute("notation",m.trim())),t.arraystretch&&t.arraystretch<1&&(u=new Ct.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},ire=function(t,n){t.envName.indexOf("ed")===-1&&VC(t);var r=[],s=t.envName.indexOf("at")>-1?"alignat":"align",o=t.envName==="split",i=Z0(t.parser,{cols:r,addJot:!0,autoTag:o?void 0:bM(t.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:o?2:void 0,leqno:t.parser.settings.leqno},"display"),a,l=0,c={type:"ordgroup",mode:t.mode,body:[]};if(n[0]&&n[0].type==="ordgroup"){for(var u="",f=0;f<n[0].body.length;f++){var m=xr(n[0].body[f],"textord");u+=m.text}a=Number(u),l=a*2}var g=!l;i.body.forEach(function(_){for(var S=1;S<_.length;S+=2){var k=xr(_[S],"styling"),R=xr(k.body[0],"ordgroup");R.body.unshift(c)}if(g)l<_.length&&(l=_.length);else{var O=_.length/2;if(a<O)throw new It("Too many math in a row: "+("expected "+a+", but got "+O),_[0])}});for(var y=0;y<l;++y){var v="r",w=0;y%2===1?v="l":y>0&&g&&(w=1),r[y]={type:"align",align:v,pregap:w,postgap:0}}return i.colSeparationType=g?"align":"alignat",i};Nd({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var n=jC(t[0]),r=n?[t[0]]:xr(t[0],"ordgroup").body,s=r.map(function(i){var a=fM(i),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new It("Unknown column alignment: "+l,i)}),o={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return Z0(e.parser,o,yM(e.envName))},htmlBuilder:Id,mathmlBuilder:Rd});Nd({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if(e.envName.charAt(e.envName.length-1)==="*"){var s=e.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),n=s.fetch().text,"lcr".indexOf(n)===-1)throw new It("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),r.cols=[{type:"align",align:n}]}}var o=Z0(e.parser,r,yM(e.envName)),i=Math.max(0,...o.body.map(a=>a.length));return o.cols=new Array(i).fill({type:"align",align:n}),t?{type:"leftright",mode:e.mode,body:[o],left:t[0],right:t[1],rightColor:void 0}:o},htmlBuilder:Id,mathmlBuilder:Rd});Nd({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},n=Z0(e.parser,t,"script");return n.colSeparationType="small",n},htmlBuilder:Id,mathmlBuilder:Rd});Nd({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var n=jC(t[0]),r=n?[t[0]]:xr(t[0],"ordgroup").body,s=r.map(function(i){var a=fM(i),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new It("Unknown column alignment: "+l,i)});if(s.length>1)throw new It("{subarray} can contain only one column");var o={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(o=Z0(e.parser,o,"script"),o.body.length>0&&o.body[0].length>1)throw new It("{subarray} can contain only one column");return o},htmlBuilder:Id,mathmlBuilder:Rd});Nd({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},n=Z0(e.parser,t,yM(e.envName));return{type:"leftright",mode:e.mode,body:[n],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Id,mathmlBuilder:Rd});Nd({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:ire,htmlBuilder:Id,mathmlBuilder:Rd});Nd({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&VC(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:bM(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return Z0(e.parser,t,"display")},htmlBuilder:Id,mathmlBuilder:Rd});Nd({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:ire,htmlBuilder:Id,mathmlBuilder:Rd});Nd({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){VC(e);var t={autoTag:bM(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return Z0(e.parser,t,"display")},htmlBuilder:Id,mathmlBuilder:Rd});Nd({type:"array",names:["CD"],props:{numArgs:0},handler(e){return VC(e),gqe(e.parser)},htmlBuilder:Id,mathmlBuilder:Rd});le("\\nonumber","\\gdef\\@eqnsw{0}");le("\\notag","\\nonumber");Qt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new It(e.funcName+" valid only within array environment")}});var Lj=sre;Qt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:n,funcName:r}=e,s=t[0];if(s.type!=="ordgroup")throw new It("Invalid environment name",s);for(var o="",i=0;i<s.body.length;++i)o+=xr(s.body[i],"textord").text;if(r==="\\begin"){if(!Lj.hasOwnProperty(o))throw new It("No such environment: "+o,s);var a=Lj[o],{args:l,optArgs:c}=n.parseArguments("\\begin{"+o+"}",a),u={mode:n.mode,envName:o,parser:n},f=a.handler(u,l,c);n.expect("\\end",!1);var m=n.nextToken,g=xr(n.parseFunction(),"environment");if(g.name!==o)throw new It("Mismatch: \\begin{"+o+"} matched by \\end{"+g.name+"}",m);return f}return{type:"environment",mode:n.mode,name:o,nameGroup:s}}});var are=(e,t)=>{var n=e.font,r=t.withFont(n);return Zr(e.body,r)},lre=(e,t)=>{var n=e.font,r=t.withFont(n);return Vs(e.body,r)},$j={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Qt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=ZT(t[0]),o=r;return o in $j&&(o=$j[o]),{type:"font",mode:n.mode,font:o.slice(1),body:s}},htmlBuilder:are,mathmlBuilder:lre});Qt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:n}=e,r=t[0],s=as.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:UC(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:s}}});Qt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r,breakOnTokenText:s}=e,{mode:o}=n,i=n.parseExpression(!0,s),a="math"+r.slice(1);return{type:"font",mode:o,font:a,body:{type:"ordgroup",mode:n.mode,body:i}}},htmlBuilder:are,mathmlBuilder:lre});var cre=(e,t)=>{var n=t;return e==="display"?n=n.id>=$n.SCRIPT.id?n.text():$n.DISPLAY:e==="text"&&n.size===$n.DISPLAY.size?n=$n.TEXT:e==="script"?n=$n.SCRIPT:e==="scriptscript"&&(n=$n.SCRIPTSCRIPT),n},vM=(e,t)=>{var n=cre(e.size,t.style),r=n.fracNum(),s=n.fracDen(),o;o=t.havingStyle(r);var i=Zr(e.numer,o,t);if(e.continued){var a=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;i.height=i.height<a?a:i.height,i.depth=i.depth<l?l:i.depth}o=t.havingStyle(s);var c=Zr(e.denom,o,t),u,f,m;e.hasBarLine?(e.barSize?(f=Ro(e.barSize,t),u=We.makeLineSpan("frac-line",t,f)):u=We.makeLineSpan("frac-line",t),f=u.height,m=u.height):(u=null,f=0,m=t.fontMetrics().defaultRuleThickness);var g,y,v;n.size===$n.DISPLAY.size||e.size==="display"?(g=t.fontMetrics().num1,f>0?y=3*m:y=7*m,v=t.fontMetrics().denom1):(f>0?(g=t.fontMetrics().num2,y=m):(g=t.fontMetrics().num3,y=3*m),v=t.fontMetrics().denom2);var w;if(u){var S=t.fontMetrics().axisHeight;g-i.depth-(S+.5*f)<y&&(g+=y-(g-i.depth-(S+.5*f))),S-.5*f-(c.height-v)<y&&(v+=y-(S-.5*f-(c.height-v)));var k=-(S-.5*f);w=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:u,shift:k},{type:"elem",elem:i,shift:-g}]},t)}else{var _=g-i.depth-(c.height-v);_<y&&(g+=.5*(y-_),v+=.5*(y-_)),w=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:i,shift:-g}]},t)}o=t.havingStyle(n),w.height*=o.sizeMultiplier/t.sizeMultiplier,w.depth*=o.sizeMultiplier/t.sizeMultiplier;var R;n.size===$n.DISPLAY.size?R=t.fontMetrics().delim1:n.size===$n.SCRIPTSCRIPT.size?R=t.havingStyle($n.SCRIPT).fontMetrics().delim2:R=t.fontMetrics().delim2;var O,M;return e.leftDelim==null?O=Kx(t,["mopen"]):O=Hf.customSizedDelim(e.leftDelim,R,!0,t.havingStyle(n),e.mode,["mopen"]),e.continued?M=We.makeSpan([]):e.rightDelim==null?M=Kx(t,["mclose"]):M=Hf.customSizedDelim(e.rightDelim,R,!0,t.havingStyle(n),e.mode,["mclose"]),We.makeSpan(["mord"].concat(o.sizingClasses(t)),[O,We.makeSpan(["mfrac"],[w]),M],t)},xM=(e,t)=>{var n=new Ct.MathNode("mfrac",[Vs(e.numer,t),Vs(e.denom,t)]);if(!e.hasBarLine)n.setAttribute("linethickness","0px");else if(e.barSize){var r=Ro(e.barSize,t);n.setAttribute("linethickness",Ut(r))}var s=cre(e.size,t.style);if(s.size!==t.style.size){n=new Ct.MathNode("mstyle",[n]);var o=s.size===$n.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",o),n.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var i=[];if(e.leftDelim!=null){var a=new Ct.MathNode("mo",[new Ct.TextNode(e.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),i.push(a)}if(i.push(n),e.rightDelim!=null){var l=new Ct.MathNode("mo",[new Ct.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),i.push(l)}return uM(i)}return n};Qt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0],o=t[1],i,a=null,l=null,c="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,a="(",l=")";break;case"\\\\bracefrac":i=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":i=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:n.mode,continued:!1,numer:s,denom:o,hasBarLine:i,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:vM,mathmlBuilder:xM});Qt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0],o=t[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:s,denom:o,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Qt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:n,token:r}=e,s;switch(n){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:s,token:r}}});var Fj=["display","text","script","scriptscript"],Bj=function(t){var n=null;return t.length>0&&(n=t,n=n==="."?null:n),n};Qt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:n}=e,r=t[4],s=t[5],o=ZT(t[0]),i=o.type==="atom"&&o.family==="open"?Bj(o.text):null,a=ZT(t[1]),l=a.type==="atom"&&a.family==="close"?Bj(a.text):null,c=xr(t[2],"size"),u,f=null;c.isBlank?u=!0:(f=c.value,u=f.number>0);var m="auto",g=t[3];if(g.type==="ordgroup"){if(g.body.length>0){var y=xr(g.body[0],"textord");m=Fj[Number(y.text)]}}else g=xr(g,"textord"),m=Fj[Number(g.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:s,continued:!1,hasBarLine:u,barSize:f,leftDelim:i,rightDelim:l,size:m}},htmlBuilder:vM,mathmlBuilder:xM});Qt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:n,funcName:r,token:s}=e;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:xr(t[0],"size").value,token:s}}});Qt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0],o=aVe(xr(t[1],"infix").size),i=t[2],a=o.number>0;return{type:"genfrac",mode:n.mode,numer:s,denom:i,continued:!1,hasBarLine:a,barSize:o,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:vM,mathmlBuilder:xM});var ure=(e,t)=>{var n=t.style,r,s;e.type==="supsub"?(r=e.sup?Zr(e.sup,t.havingStyle(n.sup()),t):Zr(e.sub,t.havingStyle(n.sub()),t),s=xr(e.base,"horizBrace")):s=xr(e,"horizBrace");var o=Zr(s.base,t.havingBaseStyle($n.DISPLAY)),i=Xf.svgSpan(s,t),a;if(s.isOver?(a=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:i}]},t),a.children[0].children[0].children[1].classes.push("svg-align")):(a=We.makeVList({positionType:"bottom",positionData:o.depth+.1+i.height,children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:o}]},t),a.children[0].children[0].children[0].classes.push("svg-align")),r){var l=We.makeSpan(["mord",s.isOver?"mover":"munder"],[a],t);s.isOver?a=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},t):a=We.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return We.makeSpan(["mord",s.isOver?"mover":"munder"],[a],t)},Rqe=(e,t)=>{var n=Xf.mathMLnode(e.label);return new Ct.MathNode(e.isOver?"mover":"munder",[Vs(e.base,t),n])};Qt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:t[0]}},htmlBuilder:ure,mathmlBuilder:Rqe});Qt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[1],s=xr(t[0],"url").url;return n.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:n.mode,href:s,body:ri(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var n=Oi(e.body,t,!1);return We.makeAnchor(e.href,[],n,t)},mathmlBuilder:(e,t)=>{var n=O0(e.body,t);return n instanceof Wl||(n=new Wl("mrow",[n])),n.setAttribute("href",e.href),n}});Qt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=xr(t[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var s=[],o=0;o<r.length;o++){var i=r[o];i==="~"&&(i="\\textasciitilde"),s.push({type:"textord",mode:"text",text:i})}var a={type:"text",mode:n.mode,font:"\\texttt",body:s};return{type:"href",mode:n.mode,href:r,body:ri(a)}}});Qt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:n}=e;return{type:"hbox",mode:n.mode,body:ri(t[0])}},htmlBuilder(e,t){var n=Oi(e.body,t,!1);return We.makeFragment(n)},mathmlBuilder(e,t){return new Ct.MathNode("mrow",El(e.body,t))}});Qt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r,token:s}=e,o=xr(t[0],"raw").string,i=t[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(r){case"\\htmlClass":l.class=o,a={command:"\\htmlClass",class:o};break;case"\\htmlId":l.id=o,a={command:"\\htmlId",id:o};break;case"\\htmlStyle":l.style=o,a={command:"\\htmlStyle",style:o};break;case"\\htmlData":{for(var c=o.split(","),u=0;u<c.length;u++){var f=c[u].split("=");if(f.length!==2)throw new It("Error parsing key-value for \\htmlData");l["data-"+f[0].trim()]=f[1].trim()}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(a)?{type:"html",mode:n.mode,attributes:l,body:ri(i)}:n.formatUnsupportedCmd(r)},htmlBuilder:(e,t)=>{var n=Oi(e.body,t,!1),r=["enclosing"];e.attributes.class&&r.push(...e.attributes.class.trim().split(/\s+/));var s=We.makeSpan(r,n,t);for(var o in e.attributes)o!=="class"&&e.attributes.hasOwnProperty(o)&&s.setAttribute(o,e.attributes[o]);return s},mathmlBuilder:(e,t)=>O0(e.body,t)});Qt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"htmlmathml",mode:n.mode,html:ri(t[0]),mathml:ri(t[1])}},htmlBuilder:(e,t)=>{var n=Oi(e.html,t,!1);return We.makeFragment(n)},mathmlBuilder:(e,t)=>O0(e.mathml,t)});var cA=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!n)throw new It("Invalid size: '"+t+"' in \\includegraphics");var r={number:+(n[1]+n[2]),unit:n[3]};if(!Nne(r))throw new It("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};Qt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,n)=>{var{parser:r}=e,s={number:0,unit:"em"},o={number:.9,unit:"em"},i={number:0,unit:"em"},a="";if(n[0])for(var l=xr(n[0],"raw").string,c=l.split(","),u=0;u<c.length;u++){var f=c[u].split("=");if(f.length===2){var m=f[1].trim();switch(f[0].trim()){case"alt":a=m;break;case"width":s=cA(m);break;case"height":o=cA(m);break;case"totalheight":i=cA(m);break;default:throw new It("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var g=xr(t[0],"url").url;return a===""&&(a=g,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:r.mode,alt:a,width:s,height:o,totalheight:i,src:g}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var n=Ro(e.height,t),r=0;e.totalheight.number>0&&(r=Ro(e.totalheight,t)-n);var s=0;e.width.number>0&&(s=Ro(e.width,t));var o={height:Ut(n+r)};s>0&&(o.width=Ut(s)),r>0&&(o.verticalAlign=Ut(-r));var i=new RVe(e.src,e.alt,o);return i.height=n,i.depth=r,i},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mglyph",[]);n.setAttribute("alt",e.alt);var r=Ro(e.height,t),s=0;if(e.totalheight.number>0&&(s=Ro(e.totalheight,t)-r,n.setAttribute("valign",Ut(-s))),n.setAttribute("height",Ut(r+s)),e.width.number>0){var o=Ro(e.width,t);n.setAttribute("width",Ut(o))}return n.setAttribute("src",e.src),n}});Qt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,s=xr(t[0],"size");if(n.settings.strict){var o=r[1]==="m",i=s.value.unit==="mu";o?(i||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+s.value.unit+" units")),n.mode!=="math"&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):i&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:s.value}},htmlBuilder(e,t){return We.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var n=Ro(e.dimension,t);return new Ct.SpaceNode(n)}});Qt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:s}},htmlBuilder:(e,t)=>{var n;e.alignment==="clap"?(n=We.makeSpan([],[Zr(e.body,t)]),n=We.makeSpan(["inner"],[n],t)):n=We.makeSpan(["inner"],[Zr(e.body,t)]);var r=We.makeSpan(["fix"],[]),s=We.makeSpan([e.alignment],[n,r],t),o=We.makeSpan(["strut"]);return o.style.height=Ut(s.height+s.depth),s.depth&&(o.style.verticalAlign=Ut(-s.depth)),s.children.unshift(o),s=We.makeSpan(["thinbox"],[s],t),We.makeSpan(["mord","vbox"],[s],t)},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mpadded",[Vs(e.body,t)]);if(e.alignment!=="rlap"){var r=e.alignment==="llap"?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}});Qt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:n,parser:r}=e,s=r.mode;r.switchMode("math");var o=n==="\\("?"\\)":"$",i=r.parseExpression(!1,o);return r.expect(o),r.switchMode(s),{type:"styling",mode:r.mode,style:"text",body:i}}});Qt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new It("Mismatched "+e.funcName)}});var zj=(e,t)=>{switch(t.style.size){case $n.DISPLAY.size:return e.display;case $n.TEXT.size:return e.text;case $n.SCRIPT.size:return e.script;case $n.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};Qt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"mathchoice",mode:n.mode,display:ri(t[0]),text:ri(t[1]),script:ri(t[2]),scriptscript:ri(t[3])}},htmlBuilder:(e,t)=>{var n=zj(e,t),r=Oi(n,t,!1);return We.makeFragment(r)},mathmlBuilder:(e,t)=>{var n=zj(e,t);return O0(n,t)}});var dre=(e,t,n,r,s,o,i)=>{e=We.makeSpan([],[e]);var a=n&&as.isCharacterBox(n),l,c;if(t){var u=Zr(t,r.havingStyle(s.sup()),r);c={elem:u,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-u.depth)}}if(n){var f=Zr(n,r.havingStyle(s.sub()),r);l={elem:f,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-f.height)}}var m;if(c&&l){var g=r.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+e.depth+i;m=We.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Ut(-o)},{type:"kern",size:l.kern},{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Ut(o)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(l){var y=e.height-i;m=We.makeVList({positionType:"top",positionData:y,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Ut(-o)},{type:"kern",size:l.kern},{type:"elem",elem:e}]},r)}else if(c){var v=e.depth+i;m=We.makeVList({positionType:"bottom",positionData:v,children:[{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Ut(o)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return e;var w=[m];if(l&&o!==0&&!a){var _=We.makeSpan(["mspace"],[],r);_.style.marginRight=Ut(o),w.unshift(_)}return We.makeSpan(["mop","op-limits"],w,r)},fre=["\\smallint"],Db=(e,t)=>{var n,r,s=!1,o;e.type==="supsub"?(n=e.sup,r=e.sub,o=xr(e.base,"op"),s=!0):o=xr(e,"op");var i=t.style,a=!1;i.size===$n.DISPLAY.size&&o.symbol&&!fre.includes(o.name)&&(a=!0);var l;if(o.symbol){var c=a?"Size2-Regular":"Size1-Regular",u="";if((o.name==="\\oiint"||o.name==="\\oiiint")&&(u=o.name.slice(1),o.name=u==="oiint"?"\\iint":"\\iiint"),l=We.makeSymbol(o.name,c,"math",t,["mop","op-symbol",a?"large-op":"small-op"]),u.length>0){var f=l.italic,m=We.staticSvg(u+"Size"+(a?"2":"1"),t);l=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:m,shift:a?.08:0}]},t),o.name="\\"+u,l.classes.unshift("mop"),l.italic=f}}else if(o.body){var g=Oi(o.body,t,!0);g.length===1&&g[0]instanceof Lc?(l=g[0],l.classes[0]="mop"):l=We.makeSpan(["mop"],g,t)}else{for(var y=[],v=1;v<o.name.length;v++)y.push(We.mathsym(o.name[v],o.mode,t));l=We.makeSpan(["mop"],y,t)}var w=0,_=0;return(l instanceof Lc||o.name==="\\oiint"||o.name==="\\oiiint")&&!o.suppressBaseShift&&(w=(l.height-l.depth)/2-t.fontMetrics().axisHeight,_=l.italic),s?dre(l,n,r,t,i,_,w):(w&&(l.style.position="relative",l.style.top=Ut(w)),l)},Uw=(e,t)=>{var n;if(e.symbol)n=new Wl("mo",[$c(e.name,e.mode)]),fre.includes(e.name)&&n.setAttribute("largeop","false");else if(e.body)n=new Wl("mo",El(e.body,t));else{n=new Wl("mi",[new vd(e.name.slice(1))]);var r=new Wl("mo",[$c("","text")]);e.parentIsSupSub?n=new Wl("mrow",[n,r]):n=zne([n,r])}return n},Mqe={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Qt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=r;return s.length===1&&(s=Mqe[s]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:Db,mathmlBuilder:Uw});Qt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ri(r)}},htmlBuilder:Db,mathmlBuilder:Uw});var Oqe={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Qt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:Db,mathmlBuilder:Uw});Qt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:Db,mathmlBuilder:Uw});Qt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e,r=n;return r.length===1&&(r=Oqe[r]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:Db,mathmlBuilder:Uw});var hre=(e,t)=>{var n,r,s=!1,o;e.type==="supsub"?(n=e.sup,r=e.sub,o=xr(e.base,"operatorname"),s=!0):o=xr(e,"operatorname");var i;if(o.body.length>0){for(var a=o.body.map(f=>{var m=f.text;return typeof m=="string"?{type:"textord",mode:f.mode,text:m}:f}),l=Oi(a,t.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof Lc&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=We.makeSpan(["mop"],l,t)}else i=We.makeSpan(["mop"],[],t);return s?dre(i,n,r,t,t.style,0,0):i},Dqe=(e,t)=>{for(var n=El(e.body,t.withFont("mathrm")),r=!0,s=0;s<n.length;s++){var o=n[s];if(!(o instanceof Ct.SpaceNode))if(o instanceof Ct.MathNode)switch(o.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var i=o.children[0];o.children.length===1&&i instanceof Ct.TextNode?i.text=i.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var a=n.map(u=>u.toText()).join("");n=[new Ct.TextNode(a)]}var l=new Ct.MathNode("mi",n);l.setAttribute("mathvariant","normal");var c=new Ct.MathNode("mo",[$c("","text")]);return e.parentIsSupSub?new Ct.MathNode("mrow",[l,c]):Ct.newDocumentFragment([l,c])};Qt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,s=t[0];return{type:"operatorname",mode:n.mode,body:ri(s),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:hre,mathmlBuilder:Dqe});le("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Bm({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?We.makeFragment(Oi(e.body,t,!1)):We.makeSpan(["mord"],Oi(e.body,t,!0),t)},mathmlBuilder(e,t){return O0(e.body,t,!0)}});Qt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:n}=e,r=t[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(e,t){var n=Zr(e.body,t.havingCrampedStyle()),r=We.makeLineSpan("overline-line",t),s=t.fontMetrics().defaultRuleThickness,o=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:r},{type:"kern",size:s}]},t);return We.makeSpan(["mord","overline"],[o],t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[new Ct.TextNode("")]);n.setAttribute("stretchy","true");var r=new Ct.MathNode("mover",[Vs(e.body,t),n]);return r.setAttribute("accent","true"),r}});Qt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"phantom",mode:n.mode,body:ri(r)}},htmlBuilder:(e,t)=>{var n=Oi(e.body,t.withPhantom(),!1);return We.makeFragment(n)},mathmlBuilder:(e,t)=>{var n=El(e.body,t);return new Ct.MathNode("mphantom",n)}});Qt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=We.makeSpan([],[Zr(e.body,t.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t),We.makeSpan(["mord"],[n],t)},mathmlBuilder:(e,t)=>{var n=El(ri(e.body),t),r=new Ct.MathNode("mphantom",n),s=new Ct.MathNode("mpadded",[r]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});Qt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=We.makeSpan(["inner"],[Zr(e.body,t.withPhantom())]),r=We.makeSpan(["fix"],[]);return We.makeSpan(["mord","rlap"],[n,r],t)},mathmlBuilder:(e,t)=>{var n=El(ri(e.body),t),r=new Ct.MathNode("mphantom",n),s=new Ct.MathNode("mpadded",[r]);return s.setAttribute("width","0px"),s}});Qt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e,r=xr(t[0],"size").value,s=t[1];return{type:"raisebox",mode:n.mode,dy:r,body:s}},htmlBuilder(e,t){var n=Zr(e.body,t),r=Ro(e.dy,t);return We.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mpadded",[Vs(e.body,t)]),r=e.dy.number+e.dy.unit;return n.setAttribute("voffset",r),n}});Qt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});Qt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,n){var{parser:r}=e,s=n[0],o=xr(t[0],"size"),i=xr(t[1],"size");return{type:"rule",mode:r.mode,shift:s&&xr(s,"size").value,width:o.value,height:i.value}},htmlBuilder(e,t){var n=We.makeSpan(["mord","rule"],[],t),r=Ro(e.width,t),s=Ro(e.height,t),o=e.shift?Ro(e.shift,t):0;return n.style.borderRightWidth=Ut(r),n.style.borderTopWidth=Ut(s),n.style.bottom=Ut(o),n.width=r,n.height=s+o,n.depth=-o,n.maxFontSize=s*1.125*t.sizeMultiplier,n},mathmlBuilder(e,t){var n=Ro(e.width,t),r=Ro(e.height,t),s=e.shift?Ro(e.shift,t):0,o=t.color&&t.getColor()||"black",i=new Ct.MathNode("mspace");i.setAttribute("mathbackground",o),i.setAttribute("width",Ut(n)),i.setAttribute("height",Ut(r));var a=new Ct.MathNode("mpadded",[i]);return s>=0?a.setAttribute("height",Ut(s)):(a.setAttribute("height",Ut(s)),a.setAttribute("depth",Ut(-s))),a.setAttribute("voffset",Ut(s)),a}});function pre(e,t,n){for(var r=Oi(e,t,!1),s=t.sizeMultiplier/n.sizeMultiplier,o=0;o<r.length;o++){var i=r[o].classes.indexOf("sizing");i<0?Array.prototype.push.apply(r[o].classes,t.sizingClasses(n)):r[o].classes[i+1]==="reset-size"+t.size&&(r[o].classes[i+1]="reset-size"+n.size),r[o].height*=s,r[o].depth*=s}return We.makeFragment(r)}var jj=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Pqe=(e,t)=>{var n=t.havingSize(e.size);return pre(e.body,n,t)};Qt({type:"sizing",names:jj,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:n,funcName:r,parser:s}=e,o=s.parseExpression(!1,n);return{type:"sizing",mode:s.mode,size:jj.indexOf(r)+1,body:o}},htmlBuilder:Pqe,mathmlBuilder:(e,t)=>{var n=t.havingSize(e.size),r=El(e.body,n),s=new Ct.MathNode("mstyle",r);return s.setAttribute("mathsize",Ut(n.sizeMultiplier)),s}});Qt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,n)=>{var{parser:r}=e,s=!1,o=!1,i=n[0]&&xr(n[0],"ordgroup");if(i)for(var a="",l=0;l<i.body.length;++l){var c=i.body[l];if(a=c.text,a==="t")s=!0;else if(a==="b")o=!0;else{s=!1,o=!1;break}}else s=!0,o=!0;var u=t[0];return{type:"smash",mode:r.mode,body:u,smashHeight:s,smashDepth:o}},htmlBuilder:(e,t)=>{var n=We.makeSpan([],[Zr(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return n;if(e.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(e.smashDepth&&(n.depth=0,n.children))for(var s=0;s<n.children.length;s++)n.children[s].depth=0;var o=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t);return We.makeSpan(["mord"],[o],t)},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mpadded",[Vs(e.body,t)]);return e.smashHeight&&n.setAttribute("height","0px"),e.smashDepth&&n.setAttribute("depth","0px"),n}});Qt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r}=e,s=n[0],o=t[0];return{type:"sqrt",mode:r.mode,body:o,index:s}},htmlBuilder(e,t){var n=Zr(e.body,t.havingCrampedStyle());n.height===0&&(n.height=t.fontMetrics().xHeight),n=We.wrapFragment(n,t);var r=t.fontMetrics(),s=r.defaultRuleThickness,o=s;t.style.id<$n.TEXT.id&&(o=t.fontMetrics().xHeight);var i=s+o/4,a=n.height+n.depth+i+s,{span:l,ruleWidth:c,advanceWidth:u}=Hf.sqrtImage(a,t),f=l.height-c;f>n.height+n.depth+i&&(i=(i+f-n.height-n.depth)/2);var m=l.height-n.height-i-c;n.style.paddingLeft=Ut(u);var g=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+m)},{type:"elem",elem:l},{type:"kern",size:c}]},t);if(e.index){var y=t.havingStyle($n.SCRIPTSCRIPT),v=Zr(e.index,y,t),w=.6*(g.height-g.depth),_=We.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:v}]},t),S=We.makeSpan(["root"],[_]);return We.makeSpan(["mord","sqrt"],[S,g],t)}else return We.makeSpan(["mord","sqrt"],[g],t)},mathmlBuilder(e,t){var{body:n,index:r}=e;return r?new Ct.MathNode("mroot",[Vs(n,t),Vs(r,t)]):new Ct.MathNode("msqrt",[Vs(n,t)])}});var Uj={display:$n.DISPLAY,text:$n.TEXT,script:$n.SCRIPT,scriptscript:$n.SCRIPTSCRIPT};Qt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:n,funcName:r,parser:s}=e,o=s.parseExpression(!0,n),i=r.slice(1,r.length-5);return{type:"styling",mode:s.mode,style:i,body:o}},htmlBuilder(e,t){var n=Uj[e.style],r=t.havingStyle(n).withFont("");return pre(e.body,r,t)},mathmlBuilder(e,t){var n=Uj[e.style],r=t.havingStyle(n),s=El(e.body,r),o=new Ct.MathNode("mstyle",s),i={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=i[e.style];return o.setAttribute("scriptlevel",a[0]),o.setAttribute("displaystyle",a[1]),o}});var Lqe=function(t,n){var r=t.base;if(r)if(r.type==="op"){var s=r.limits&&(n.style.size===$n.DISPLAY.size||r.alwaysHandleSupSub);return s?Db:null}else if(r.type==="operatorname"){var o=r.alwaysHandleSupSub&&(n.style.size===$n.DISPLAY.size||r.limits);return o?hre:null}else{if(r.type==="accent")return as.isCharacterBox(r.base)?hM:null;if(r.type==="horizBrace"){var i=!t.sub;return i===r.isOver?ure:null}else return null}else return null};Bm({type:"supsub",htmlBuilder(e,t){var n=Lqe(e,t);if(n)return n(e,t);var{base:r,sup:s,sub:o}=e,i=Zr(r,t),a,l,c=t.fontMetrics(),u=0,f=0,m=r&&as.isCharacterBox(r);if(s){var g=t.havingStyle(t.style.sup());a=Zr(s,g,t),m||(u=i.height-g.fontMetrics().supDrop*g.sizeMultiplier/t.sizeMultiplier)}if(o){var y=t.havingStyle(t.style.sub());l=Zr(o,y,t),m||(f=i.depth+y.fontMetrics().subDrop*y.sizeMultiplier/t.sizeMultiplier)}var v;t.style===$n.DISPLAY?v=c.sup1:t.style.cramped?v=c.sup3:v=c.sup2;var w=t.sizeMultiplier,_=Ut(.5/c.ptPerEm/w),S=null;if(l){var k=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(i instanceof Lc||k)&&(S=Ut(-i.italic))}var R;if(a&&l){u=Math.max(u,v,a.depth+.25*c.xHeight),f=Math.max(f,c.sub2);var O=c.defaultRuleThickness,M=4*O;if(u-a.depth-(l.height-f)<M){f=M-(u-a.depth)+l.height;var P=.8*c.xHeight-(u-a.depth);P>0&&(u+=P,f-=P)}var j=[{type:"elem",elem:l,shift:f,marginRight:_,marginLeft:S},{type:"elem",elem:a,shift:-u,marginRight:_}];R=We.makeVList({positionType:"individualShift",children:j},t)}else if(l){f=Math.max(f,c.sub1,l.height-.8*c.xHeight);var q=[{type:"elem",elem:l,marginLeft:S,marginRight:_}];R=We.makeVList({positionType:"shift",positionData:f,children:q},t)}else if(a)u=Math.max(u,v,a.depth+.25*c.xHeight),R=We.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:a,marginRight:_}]},t);else throw new Error("supsub must have either sup or sub.");var U=mI(i,"right")||"mord";return We.makeSpan([U],[i,We.makeSpan(["msupsub"],[R])],t)},mathmlBuilder(e,t){var n=!1,r,s;e.base&&e.base.type==="horizBrace"&&(s=!!e.sup,s===e.base.isOver&&(n=!0,r=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var o=[Vs(e.base,t)];e.sub&&o.push(Vs(e.sub,t)),e.sup&&o.push(Vs(e.sup,t));var i;if(n)i=r?"mover":"munder";else if(e.sub)if(e.sup){var c=e.base;c&&c.type==="op"&&c.limits&&t.style===$n.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(t.style===$n.DISPLAY||c.limits)?i="munderover":i="msubsup"}else{var l=e.base;l&&l.type==="op"&&l.limits&&(t.style===$n.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||t.style===$n.DISPLAY)?i="munder":i="msub"}else{var a=e.base;a&&a.type==="op"&&a.limits&&(t.style===$n.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||t.style===$n.DISPLAY)?i="mover":i="msup"}return new Ct.MathNode(i,o)}});Bm({type:"atom",htmlBuilder(e,t){return We.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[$c(e.text,e.mode)]);if(e.family==="bin"){var r=dM(e,t);r==="bold-italic"&&n.setAttribute("mathvariant",r)}else e.family==="punct"?n.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&n.setAttribute("stretchy","false");return n}});var mre={mi:"italic",mn:"normal",mtext:"normal"};Bm({type:"mathord",htmlBuilder(e,t){return We.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var n=new Ct.MathNode("mi",[$c(e.text,e.mode,t)]),r=dM(e,t)||"italic";return r!==mre[n.type]&&n.setAttribute("mathvariant",r),n}});Bm({type:"textord",htmlBuilder(e,t){return We.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var n=$c(e.text,e.mode,t),r=dM(e,t)||"normal",s;return e.mode==="text"?s=new Ct.MathNode("mtext",[n]):/[0-9]/.test(e.text)?s=new Ct.MathNode("mn",[n]):e.text==="\\prime"?s=new Ct.MathNode("mo",[n]):s=new Ct.MathNode("mi",[n]),r!==mre[s.type]&&s.setAttribute("mathvariant",r),s}});var uA={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},dA={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Bm({type:"spacing",htmlBuilder(e,t){if(dA.hasOwnProperty(e.text)){var n=dA[e.text].className||"";if(e.mode==="text"){var r=We.makeOrd(e,t,"textord");return r.classes.push(n),r}else return We.makeSpan(["mspace",n],[We.mathsym(e.text,e.mode,t)],t)}else{if(uA.hasOwnProperty(e.text))return We.makeSpan(["mspace",uA[e.text]],[],t);throw new It('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var n;if(dA.hasOwnProperty(e.text))n=new Ct.MathNode("mtext",[new Ct.TextNode("")]);else{if(uA.hasOwnProperty(e.text))return new Ct.MathNode("mspace");throw new It('Unknown type of space "'+e.text+'"')}return n}});var Hj=()=>{var e=new Ct.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};Bm({type:"tag",mathmlBuilder(e,t){var n=new Ct.MathNode("mtable",[new Ct.MathNode("mtr",[Hj(),new Ct.MathNode("mtd",[O0(e.body,t)]),Hj(),new Ct.MathNode("mtd",[O0(e.tag,t)])])]);return n.setAttribute("width","100%"),n}});var Vj={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},qj={"\\textbf":"textbf","\\textmd":"textmd"},$qe={"\\textit":"textit","\\textup":"textup"},Gj=(e,t)=>{var n=e.font;if(n){if(Vj[n])return t.withTextFontFamily(Vj[n]);if(qj[n])return t.withTextFontWeight(qj[n]);if(n==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape($qe[n])};Qt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,s=t[0];return{type:"text",mode:n.mode,body:ri(s),font:r}},htmlBuilder(e,t){var n=Gj(e,t),r=Oi(e.body,n,!0);return We.makeSpan(["mord","text"],r,n)},mathmlBuilder(e,t){var n=Gj(e,t);return O0(e.body,n)}});Qt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"underline",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=Zr(e.body,t),r=We.makeLineSpan("underline-line",t),s=t.fontMetrics().defaultRuleThickness,o=We.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:s},{type:"elem",elem:r},{type:"kern",size:3*s},{type:"elem",elem:n}]},t);return We.makeSpan(["mord","underline"],[o],t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[new Ct.TextNode("")]);n.setAttribute("stretchy","true");var r=new Ct.MathNode("munder",[Vs(e.body,t),n]);return r.setAttribute("accentunder","true"),r}});Qt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"vcenter",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=Zr(e.body,t),r=t.fontMetrics().axisHeight,s=.5*(n.height-r-(n.depth+r));return We.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:n}]},t)},mathmlBuilder(e,t){return new Ct.MathNode("mpadded",[Vs(e.body,t)],["vcenter"])}});Qt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,n){throw new It("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var n=Wj(e),r=[],s=t.havingStyle(t.style.text()),o=0;o<n.length;o++){var i=n[o];i==="~"&&(i="\\textasciitilde"),r.push(We.makeSymbol(i,"Typewriter-Regular",e.mode,s,["mord","texttt"]))}return We.makeSpan(["mord","text"].concat(s.sizingClasses(t)),We.tryCombineChars(r),s)},mathmlBuilder(e,t){var n=new Ct.TextNode(Wj(e)),r=new Ct.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var Wj=e=>e.body.replace(/ /g,e.star?"":""),d0=Fne,gre=`[ \r
	]`,Fqe="\\\\[a-zA-Z@]+",Bqe="\\\\[^\uD800-\uDFFF]",zqe="("+Fqe+")"+gre+"*",jqe=`\\\\(
|[ \r	]+
?)[ \r	]*`,vI="[-]",Uqe=new RegExp(vI+"+$"),Hqe="("+gre+"+)|"+(jqe+"|")+"([!-\\[\\]---]"+(vI+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(vI+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+zqe)+("|"+Bqe+")");class Yj{constructor(t,n){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=n,this.tokenRegex=new RegExp(Hqe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,n){this.catcodes[t]=n}lex(){var t=this.input,n=this.tokenRegex.lastIndex;if(n===t.length)return new Jl("EOF",new fl(this,n,n));var r=this.tokenRegex.exec(t);if(r===null||r.index!==n)throw new It("Unexpected character: '"+t[n]+"'",new Jl(t[n],new fl(this,n,n+1)));var s=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[s]===14){var o=t.indexOf(`
`,this.tokenRegex.lastIndex);return o===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=o+1,this.lex()}return new Jl(s,new fl(this,n,this.tokenRegex.lastIndex))}}class Vqe{constructor(t,n){t===void 0&&(t={}),n===void 0&&(n={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=n,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new It("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var n in t)t.hasOwnProperty(n)&&(t[n]==null?delete this.current[n]:this.current[n]=t[n])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,n,r){if(r===void 0&&(r=!1),r){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=n)}else{var o=this.undefStack[this.undefStack.length-1];o&&!o.hasOwnProperty(t)&&(o[t]=this.current[t])}n==null?delete this.current[t]:this.current[t]=n}}var qqe=ore;le("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});le("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});le("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});le("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});le("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var n=e.future();return t[0].length===1&&t[0][0].text===n.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});le("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");le("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var Kj={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};le("\\char",function(e){var t=e.popToken(),n,r="";if(t.text==="'")n=8,t=e.popToken();else if(t.text==='"')n=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")r=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new It("\\char` missing argument");r=t.text.charCodeAt(0)}else n=10;if(n){if(r=Kj[t.text],r==null||r>=n)throw new It("Invalid base-"+n+" digit "+t.text);for(var s;(s=Kj[e.future().text])!=null&&s<n;)r*=n,r+=s,e.popToken()}return"\\@char{"+r+"}"});var wM=(e,t,n,r)=>{var s=e.consumeArg().tokens;if(s.length!==1)throw new It("\\newcommand's first argument must be a macro name");var o=s[0].text,i=e.isDefined(o);if(i&&!t)throw new It("\\newcommand{"+o+"} attempting to redefine "+(o+"; use \\renewcommand"));if(!i&&!n)throw new It("\\renewcommand{"+o+"} when command "+o+" does not yet exist; use \\newcommand");var a=0;if(s=e.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var l="",c=e.expandNextToken();c.text!=="]"&&c.text!=="EOF";)l+=c.text,c=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new It("Invalid number of arguments: "+l);a=parseInt(l),s=e.consumeArg().tokens}return i&&r||e.macros.set(o,{tokens:s,numArgs:a}),""};le("\\newcommand",e=>wM(e,!1,!0,!1));le("\\renewcommand",e=>wM(e,!0,!1,!1));le("\\providecommand",e=>wM(e,!0,!0,!0));le("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(n=>n.text).join("")),""});le("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(n=>n.text).join("")),""});le("\\show",e=>{var t=e.popToken(),n=t.text;return console.log(t,e.macros.get(n),d0[n],eo.math[n],eo.text[n]),""});le("\\bgroup","{");le("\\egroup","}");le("~","\\nobreakspace");le("\\lq","`");le("\\rq","'");le("\\aa","\\r a");le("\\AA","\\r A");le("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");le("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");le("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");le("","\\mathscr{B}");le("","\\mathscr{E}");le("","\\mathscr{F}");le("","\\mathscr{H}");le("","\\mathscr{I}");le("","\\mathscr{L}");le("","\\mathscr{M}");le("","\\mathscr{R}");le("","\\mathfrak{C}");le("","\\mathfrak{H}");le("","\\mathfrak{Z}");le("\\Bbbk","\\Bbb{k}");le("","\\cdotp");le("\\llap","\\mathllap{\\textrm{#1}}");le("\\rlap","\\mathrlap{\\textrm{#1}}");le("\\clap","\\mathclap{\\textrm{#1}}");le("\\mathstrut","\\vphantom{(}");le("\\underbar","\\underline{\\text{#1}}");le("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');le("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");le("\\ne","\\neq");le("","\\neq");le("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");le("","\\notin");le("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");le("","\\perp");le("","\\mathclose{!\\mkern-0.8mu!}");le("","\\notni");le("","\\ulcorner");le("","\\urcorner");le("","\\llcorner");le("","\\lrcorner");le("","\\copyright");le("","\\textregistered");le("","\\textregistered");le("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');le("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');le("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');le("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');le("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");le("","\\vdots");le("\\varGamma","\\mathit{\\Gamma}");le("\\varDelta","\\mathit{\\Delta}");le("\\varTheta","\\mathit{\\Theta}");le("\\varLambda","\\mathit{\\Lambda}");le("\\varXi","\\mathit{\\Xi}");le("\\varPi","\\mathit{\\Pi}");le("\\varSigma","\\mathit{\\Sigma}");le("\\varUpsilon","\\mathit{\\Upsilon}");le("\\varPhi","\\mathit{\\Phi}");le("\\varPsi","\\mathit{\\Psi}");le("\\varOmega","\\mathit{\\Omega}");le("\\substack","\\begin{subarray}{c}#1\\end{subarray}");le("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");le("\\boxed","\\fbox{$\\displaystyle{#1}$}");le("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");le("\\implies","\\DOTSB\\;\\Longrightarrow\\;");le("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");le("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");le("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var Zj={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};le("\\dots",function(e){var t="\\dotso",n=e.expandAfterFuture().text;return n in Zj?t=Zj[n]:(n.slice(0,4)==="\\not"||n in eo.math&&["bin","rel"].includes(eo.math[n].group))&&(t="\\dotsb"),t});var EM={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};le("\\dotso",function(e){var t=e.future().text;return t in EM?"\\ldots\\,":"\\ldots"});le("\\dotsc",function(e){var t=e.future().text;return t in EM&&t!==","?"\\ldots\\,":"\\ldots"});le("\\cdots",function(e){var t=e.future().text;return t in EM?"\\@cdots\\,":"\\@cdots"});le("\\dotsb","\\cdots");le("\\dotsm","\\cdots");le("\\dotsi","\\!\\cdots");le("\\dotsx","\\ldots\\,");le("\\DOTSI","\\relax");le("\\DOTSB","\\relax");le("\\DOTSX","\\relax");le("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");le("\\,","\\tmspace+{3mu}{.1667em}");le("\\thinspace","\\,");le("\\>","\\mskip{4mu}");le("\\:","\\tmspace+{4mu}{.2222em}");le("\\medspace","\\:");le("\\;","\\tmspace+{5mu}{.2777em}");le("\\thickspace","\\;");le("\\!","\\tmspace-{3mu}{.1667em}");le("\\negthinspace","\\!");le("\\negmedspace","\\tmspace-{4mu}{.2222em}");le("\\negthickspace","\\tmspace-{5mu}{.277em}");le("\\enspace","\\kern.5em ");le("\\enskip","\\hskip.5em\\relax");le("\\quad","\\hskip1em\\relax");le("\\qquad","\\hskip2em\\relax");le("\\tag","\\@ifstar\\tag@literal\\tag@paren");le("\\tag@paren","\\tag@literal{({#1})}");le("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new It("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});le("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");le("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");le("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");le("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");le("\\newline","\\\\\\relax");le("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var bre=Ut(yd["Main-Regular"][84][1]-.7*yd["Main-Regular"][65][1]);le("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+bre+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");le("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+bre+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");le("\\hspace","\\@ifstar\\@hspacer\\@hspace");le("\\@hspace","\\hskip #1\\relax");le("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");le("\\ordinarycolon",":");le("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");le("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');le("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');le("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');le("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');le("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');le("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');le("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');le("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');le("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');le("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');le("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');le("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');le("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');le("","\\dblcolon");le("","\\eqcolon");le("","\\coloneqq");le("","\\eqqcolon");le("","\\Coloneqq");le("\\ratio","\\vcentcolon");le("\\coloncolon","\\dblcolon");le("\\colonequals","\\coloneqq");le("\\coloncolonequals","\\Coloneqq");le("\\equalscolon","\\eqqcolon");le("\\equalscoloncolon","\\Eqqcolon");le("\\colonminus","\\coloneq");le("\\coloncolonminus","\\Coloneq");le("\\minuscolon","\\eqcolon");le("\\minuscoloncolon","\\Eqcolon");le("\\coloncolonapprox","\\Colonapprox");le("\\coloncolonsim","\\Colonsim");le("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");le("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");le("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");le("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");le("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");le("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");le("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");le("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");le("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");le("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");le("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");le("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");le("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");le("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");le("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");le("\\ngeqq","\\html@mathml{\\@ngeqq}{}");le("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");le("\\nleqq","\\html@mathml{\\@nleqq}{}");le("\\nleqslant","\\html@mathml{\\@nleqslant}{}");le("\\nshortmid","\\html@mathml{\\@nshortmid}{}");le("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");le("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");le("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");le("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");le("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");le("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");le("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");le("\\imath","\\html@mathml{\\@imath}{}");le("\\jmath","\\html@mathml{\\@jmath}{}");le("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");le("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");le("","\\llbracket");le("","\\rrbracket");le("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");le("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");le("","\\lBrace");le("","\\rBrace");le("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");le("","\\minuso");le("\\darr","\\downarrow");le("\\dArr","\\Downarrow");le("\\Darr","\\Downarrow");le("\\lang","\\langle");le("\\rang","\\rangle");le("\\uarr","\\uparrow");le("\\uArr","\\Uparrow");le("\\Uarr","\\Uparrow");le("\\N","\\mathbb{N}");le("\\R","\\mathbb{R}");le("\\Z","\\mathbb{Z}");le("\\alef","\\aleph");le("\\alefsym","\\aleph");le("\\Alpha","\\mathrm{A}");le("\\Beta","\\mathrm{B}");le("\\bull","\\bullet");le("\\Chi","\\mathrm{X}");le("\\clubs","\\clubsuit");le("\\cnums","\\mathbb{C}");le("\\Complex","\\mathbb{C}");le("\\Dagger","\\ddagger");le("\\diamonds","\\diamondsuit");le("\\empty","\\emptyset");le("\\Epsilon","\\mathrm{E}");le("\\Eta","\\mathrm{H}");le("\\exist","\\exists");le("\\harr","\\leftrightarrow");le("\\hArr","\\Leftrightarrow");le("\\Harr","\\Leftrightarrow");le("\\hearts","\\heartsuit");le("\\image","\\Im");le("\\infin","\\infty");le("\\Iota","\\mathrm{I}");le("\\isin","\\in");le("\\Kappa","\\mathrm{K}");le("\\larr","\\leftarrow");le("\\lArr","\\Leftarrow");le("\\Larr","\\Leftarrow");le("\\lrarr","\\leftrightarrow");le("\\lrArr","\\Leftrightarrow");le("\\Lrarr","\\Leftrightarrow");le("\\Mu","\\mathrm{M}");le("\\natnums","\\mathbb{N}");le("\\Nu","\\mathrm{N}");le("\\Omicron","\\mathrm{O}");le("\\plusmn","\\pm");le("\\rarr","\\rightarrow");le("\\rArr","\\Rightarrow");le("\\Rarr","\\Rightarrow");le("\\real","\\Re");le("\\reals","\\mathbb{R}");le("\\Reals","\\mathbb{R}");le("\\Rho","\\mathrm{P}");le("\\sdot","\\cdot");le("\\sect","\\S");le("\\spades","\\spadesuit");le("\\sub","\\subset");le("\\sube","\\subseteq");le("\\supe","\\supseteq");le("\\Tau","\\mathrm{T}");le("\\thetasym","\\vartheta");le("\\weierp","\\wp");le("\\Zeta","\\mathrm{Z}");le("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");le("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");le("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");le("\\bra","\\mathinner{\\langle{#1}|}");le("\\ket","\\mathinner{|{#1}\\rangle}");le("\\braket","\\mathinner{\\langle{#1}\\rangle}");le("\\Bra","\\left\\langle#1\\right|");le("\\Ket","\\left|#1\\right\\rangle");var yre=e=>t=>{var n=t.consumeArg().tokens,r=t.consumeArg().tokens,s=t.consumeArg().tokens,o=t.consumeArg().tokens,i=t.macros.get("|"),a=t.macros.get("\\|");t.macros.beginGroup();var l=f=>m=>{e&&(m.macros.set("|",i),s.length&&m.macros.set("\\|",a));var g=f;if(!f&&s.length){var y=m.future();y.text==="|"&&(m.popToken(),g=!0)}return{tokens:g?s:r,numArgs:0}};t.macros.set("|",l(!1)),s.length&&t.macros.set("\\|",l(!0));var c=t.consumeArg().tokens,u=t.expandTokens([...o,...c,...n]);return t.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};le("\\bra@ket",yre(!1));le("\\bra@set",yre(!0));le("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");le("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");le("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");le("\\angln","{\\angl n}");le("\\blue","\\textcolor{##6495ed}{#1}");le("\\orange","\\textcolor{##ffa500}{#1}");le("\\pink","\\textcolor{##ff00af}{#1}");le("\\red","\\textcolor{##df0030}{#1}");le("\\green","\\textcolor{##28ae7b}{#1}");le("\\gray","\\textcolor{gray}{#1}");le("\\purple","\\textcolor{##9d38bd}{#1}");le("\\blueA","\\textcolor{##ccfaff}{#1}");le("\\blueB","\\textcolor{##80f6ff}{#1}");le("\\blueC","\\textcolor{##63d9ea}{#1}");le("\\blueD","\\textcolor{##11accd}{#1}");le("\\blueE","\\textcolor{##0c7f99}{#1}");le("\\tealA","\\textcolor{##94fff5}{#1}");le("\\tealB","\\textcolor{##26edd5}{#1}");le("\\tealC","\\textcolor{##01d1c1}{#1}");le("\\tealD","\\textcolor{##01a995}{#1}");le("\\tealE","\\textcolor{##208170}{#1}");le("\\greenA","\\textcolor{##b6ffb0}{#1}");le("\\greenB","\\textcolor{##8af281}{#1}");le("\\greenC","\\textcolor{##74cf70}{#1}");le("\\greenD","\\textcolor{##1fab54}{#1}");le("\\greenE","\\textcolor{##0d923f}{#1}");le("\\goldA","\\textcolor{##ffd0a9}{#1}");le("\\goldB","\\textcolor{##ffbb71}{#1}");le("\\goldC","\\textcolor{##ff9c39}{#1}");le("\\goldD","\\textcolor{##e07d10}{#1}");le("\\goldE","\\textcolor{##a75a05}{#1}");le("\\redA","\\textcolor{##fca9a9}{#1}");le("\\redB","\\textcolor{##ff8482}{#1}");le("\\redC","\\textcolor{##f9685d}{#1}");le("\\redD","\\textcolor{##e84d39}{#1}");le("\\redE","\\textcolor{##bc2612}{#1}");le("\\maroonA","\\textcolor{##ffbde0}{#1}");le("\\maroonB","\\textcolor{##ff92c6}{#1}");le("\\maroonC","\\textcolor{##ed5fa6}{#1}");le("\\maroonD","\\textcolor{##ca337c}{#1}");le("\\maroonE","\\textcolor{##9e034e}{#1}");le("\\purpleA","\\textcolor{##ddd7ff}{#1}");le("\\purpleB","\\textcolor{##c6b9fc}{#1}");le("\\purpleC","\\textcolor{##aa87ff}{#1}");le("\\purpleD","\\textcolor{##7854ab}{#1}");le("\\purpleE","\\textcolor{##543b78}{#1}");le("\\mintA","\\textcolor{##f5f9e8}{#1}");le("\\mintB","\\textcolor{##edf2df}{#1}");le("\\mintC","\\textcolor{##e0e5cc}{#1}");le("\\grayA","\\textcolor{##f6f7f7}{#1}");le("\\grayB","\\textcolor{##f0f1f2}{#1}");le("\\grayC","\\textcolor{##e3e5e6}{#1}");le("\\grayD","\\textcolor{##d6d8da}{#1}");le("\\grayE","\\textcolor{##babec2}{#1}");le("\\grayF","\\textcolor{##888d93}{#1}");le("\\grayG","\\textcolor{##626569}{#1}");le("\\grayH","\\textcolor{##3b3e40}{#1}");le("\\grayI","\\textcolor{##21242c}{#1}");le("\\kaBlue","\\textcolor{##314453}{#1}");le("\\kaGreen","\\textcolor{##71B307}{#1}");var vre={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Gqe{constructor(t,n,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=n,this.expansionCount=0,this.feed(t),this.macros=new Vqe(qqe,n.macros),this.mode=r,this.stack=[]}feed(t){this.lexer=new Yj(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var n,r,s;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;n=this.popToken(),{tokens:s,end:r}=this.consumeArg(["]"])}else({tokens:s,start:n,end:r}=this.consumeArg());return this.pushToken(new Jl("EOF",r.loc)),this.pushTokens(s),new Jl("",fl.range(n,r))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var n=[],r=t&&t.length>0;r||this.consumeSpaces();var s=this.future(),o,i=0,a=0;do{if(o=this.popToken(),n.push(o),o.text==="{")++i;else if(o.text==="}"){if(--i,i===-1)throw new It("Extra }",o)}else if(o.text==="EOF")throw new It("Unexpected end of input in a macro argument, expected '"+(t&&r?t[a]:"}")+"'",o);if(t&&r)if((i===0||i===1&&t[a]==="{")&&o.text===t[a]){if(++a,a===t.length){n.splice(-a,a);break}}else a=0}while(i!==0||r);return s.text==="{"&&n[n.length-1].text==="}"&&(n.pop(),n.shift()),n.reverse(),{tokens:n,start:s,end:o}}consumeArgs(t,n){if(n){if(n.length!==t+1)throw new It("The length of delimiters doesn't match the number of args!");for(var r=n[0],s=0;s<r.length;s++){var o=this.popToken();if(r[s]!==o.text)throw new It("Use of the macro doesn't match its definition",o)}}for(var i=[],a=0;a<t;a++)i.push(this.consumeArg(n&&n[a+1]).tokens);return i}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new It("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var n=this.popToken(),r=n.text,s=n.noexpand?null:this._getExpansion(r);if(s==null||t&&s.unexpandable){if(t&&s==null&&r[0]==="\\"&&!this.isDefined(r))throw new It("Undefined control sequence: "+r);return this.pushToken(n),!1}this.countExpansion(1);var o=s.tokens,i=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){o=o.slice();for(var a=o.length-1;a>=0;--a){var l=o[a];if(l.text==="#"){if(a===0)throw new It("Incomplete placeholder at end of macro body",l);if(l=o[--a],l.text==="#")o.splice(a+1,1);else if(/^[1-9]$/.test(l.text))o.splice(a,2,...i[+l.text-1]);else throw new It("Not a valid argument number",l)}}}return this.pushTokens(o),o.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Jl(t)]):void 0}expandTokens(t){var n=[],r=this.stack.length;for(this.pushTokens(t);this.stack.length>r;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),n.push(s)}return this.countExpansion(n.length),n}expandMacroAsText(t){var n=this.expandMacro(t);return n&&n.map(r=>r.text).join("")}_getExpansion(t){var n=this.macros.get(t);if(n==null)return n;if(t.length===1){var r=this.lexer.catcodes[t];if(r!=null&&r!==13)return}var s=typeof n=="function"?n(this):n;if(typeof s=="string"){var o=0;if(s.indexOf("#")!==-1)for(var i=s.replace(/##/g,"");i.indexOf("#"+(o+1))!==-1;)++o;for(var a=new Yj(s,this.settings),l=[],c=a.lex();c.text!=="EOF";)l.push(c),c=a.lex();l.reverse();var u={tokens:l,numArgs:o};return u}return s}isDefined(t){return this.macros.has(t)||d0.hasOwnProperty(t)||eo.math.hasOwnProperty(t)||eo.text.hasOwnProperty(t)||vre.hasOwnProperty(t)}isExpandable(t){var n=this.macros.get(t);return n!=null?typeof n=="string"||typeof n=="function"||!n.unexpandable:d0.hasOwnProperty(t)&&!d0[t].primitive}}var Jj=/^[]/,s_=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),fA={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},Xj={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};let xre=class wre{constructor(t,n){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Gqe(t,n,this.mode),this.settings=n,this.leftrightDepth=0}expect(t,n){if(n===void 0&&(n=!0),this.fetch().text!==t)throw new It("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());n&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var n=this.nextToken;this.consume(),this.gullet.pushToken(new Jl("}")),this.gullet.pushTokens(t);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=n,r}parseExpression(t,n){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(wre.endOfExpression.indexOf(s.text)!==-1||n&&s.text===n||t&&d0[s.text]&&d0[s.text].infix)break;var o=this.parseAtom(n);if(o){if(o.type==="internal")continue}else break;r.push(o)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(t){for(var n=-1,r,s=0;s<t.length;s++)if(t[s].type==="infix"){if(n!==-1)throw new It("only one infix operator per group",t[s].token);n=s,r=t[s].replaceWith}if(n!==-1&&r){var o,i,a=t.slice(0,n),l=t.slice(n+1);a.length===1&&a[0].type==="ordgroup"?o=a[0]:o={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?i=l[0]:i={type:"ordgroup",mode:this.mode,body:l};var c;return r==="\\\\abovefrac"?c=this.callFunction(r,[o,t[n],i],[]):c=this.callFunction(r,[o,i],[]),[c]}else return t}handleSupSubscript(t){var n=this.fetch(),r=n.text;this.consume(),this.consumeSpaces();var s;do{var o;s=this.parseGroup(t)}while(((o=s)==null?void 0:o.type)==="internal");if(!s)throw new It("Expected group after '"+r+"'",n);return s}formatUnsupportedCmd(t){for(var n=[],r=0;r<t.length;r++)n.push({type:"textord",mode:"text",text:t[r]});var s={type:"text",mode:this.mode,body:n},o={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return o}parseAtom(t){var n=this.parseGroup("atom",t);if((n==null?void 0:n.type)==="internal"||this.mode==="text")return n;for(var r,s;;){this.consumeSpaces();var o=this.fetch();if(o.text==="\\limits"||o.text==="\\nolimits"){if(n&&n.type==="op"){var i=o.text==="\\limits";n.limits=i,n.alwaysHandleSupSub=!0}else if(n&&n.type==="operatorname")n.alwaysHandleSupSub&&(n.limits=o.text==="\\limits");else throw new It("Limit controls must follow a math operator",o);this.consume()}else if(o.text==="^"){if(r)throw new It("Double superscript",o);r=this.handleSupSubscript("superscript")}else if(o.text==="_"){if(s)throw new It("Double subscript",o);s=this.handleSupSubscript("subscript")}else if(o.text==="'"){if(r)throw new It("Double superscript",o);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:l}}else if(s_[o.text]){var c=Jj.test(o.text),u=[];for(u.push(new Jl(s_[o.text])),this.consume();;){var f=this.fetch().text;if(!s_[f]||Jj.test(f)!==c)break;u.unshift(new Jl(s_[f])),this.consume()}var m=this.subparse(u);c?s={type:"ordgroup",mode:"math",body:m}:r={type:"ordgroup",mode:"math",body:m}}else break}return r||s?{type:"supsub",mode:this.mode,base:n,sup:r,sub:s}:n}parseFunction(t,n){var r=this.fetch(),s=r.text,o=d0[s];if(!o)return null;if(this.consume(),n&&n!=="atom"&&!o.allowedInArgument)throw new It("Got function '"+s+"' with no arguments"+(n?" as "+n:""),r);if(this.mode==="text"&&!o.allowedInText)throw new It("Can't use function '"+s+"' in text mode",r);if(this.mode==="math"&&o.allowedInMath===!1)throw new It("Can't use function '"+s+"' in math mode",r);var{args:i,optArgs:a}=this.parseArguments(s,o);return this.callFunction(s,i,a,r,t)}callFunction(t,n,r,s,o){var i={funcName:t,parser:this,token:s,breakOnTokenText:o},a=d0[t];if(a&&a.handler)return a.handler(i,n,r);throw new It("No function handler for "+t)}parseArguments(t,n){var r=n.numArgs+n.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var s=[],o=[],i=0;i<r;i++){var a=n.argTypes&&n.argTypes[i],l=i<n.numOptionalArgs;(n.primitive&&a==null||n.type==="sqrt"&&i===1&&o[0]==null)&&(a="primitive");var c=this.parseGroupOfType("argument to '"+t+"'",a,l);if(l)o.push(c);else if(c!=null)s.push(c);else throw new It("Null argument, please report this as a bug")}return{args:s,optArgs:o}}parseGroupOfType(t,n,r){switch(n){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,n);case"hbox":{var s=this.parseArgumentGroup(r,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var o=this.parseStringGroup("raw",r);return o!=null?{type:"raw",mode:"text",string:o.text}:null}case"primitive":{if(r)throw new It("A primitive argument cannot be optional");var i=this.parseGroup(t);if(i==null)throw new It("Expected group as "+t,this.fetch());return i}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new It("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,n){var r=this.gullet.scanArgument(n);if(r==null)return null;for(var s="",o;(o=this.fetch()).text!=="EOF";)s+=o.text,this.consume();return this.consume(),r.text=s,r}parseRegexGroup(t,n){for(var r=this.fetch(),s=r,o="",i;(i=this.fetch()).text!=="EOF"&&t.test(o+i.text);)s=i,o+=s.text,this.consume();if(o==="")throw new It("Invalid "+n+": '"+r.text+"'",r);return r.range(s,o)}parseColorGroup(t){var n=this.parseStringGroup("color",t);if(n==null)return null;var r=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(n.text);if(!r)throw new It("Invalid color: '"+n.text+"'",n);var s=r[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(t){var n,r=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?n=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):n=this.parseStringGroup("size",t),!n)return null;!t&&n.text.length===0&&(n.text="0pt",r=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(n.text);if(!s)throw new It("Invalid size: '"+n.text+"'",n);var o={number:+(s[1]+s[2]),unit:s[3]};if(!Nne(o))throw new It("Invalid unit: '"+o.unit+"'",n);return{type:"size",mode:this.mode,value:o,isBlank:r}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var n=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),n==null)return null;var r=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(t,n){var r=this.gullet.scanArgument(t);if(r==null)return null;var s=this.mode;n&&this.switchMode(n),this.gullet.beginGroup();var o=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var i={type:"ordgroup",mode:this.mode,loc:r.loc,body:o};return n&&this.switchMode(s),i}parseGroup(t,n){var r=this.fetch(),s=r.text,o;if(s==="{"||s==="\\begingroup"){this.consume();var i=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,i),l=this.fetch();this.expect(i),this.gullet.endGroup(),o={type:"ordgroup",mode:this.mode,loc:fl.range(r,l),body:a,semisimple:s==="\\begingroup"||void 0}}else if(o=this.parseFunction(n,t)||this.parseSymbol(),o==null&&s[0]==="\\"&&!vre.hasOwnProperty(s)){if(this.settings.throwOnError)throw new It("Undefined control sequence: "+s,r);o=this.formatUnsupportedCmd(s),this.consume()}return o}formLigatures(t){for(var n=t.length-1,r=0;r<n;++r){var s=t[r],o=s.text;o==="-"&&t[r+1].text==="-"&&(r+1<n&&t[r+2].text==="-"?(t.splice(r,3,{type:"textord",mode:"text",loc:fl.range(s,t[r+2]),text:"---"}),n-=2):(t.splice(r,2,{type:"textord",mode:"text",loc:fl.range(s,t[r+1]),text:"--"}),n-=1)),(o==="'"||o==="`")&&t[r+1].text===o&&(t.splice(r,2,{type:"textord",mode:"text",loc:fl.range(s,t[r+1]),text:o+o}),n-=1)}}parseSymbol(){var t=this.fetch(),n=t.text;if(/^\\verb[^a-zA-Z]/.test(n)){this.consume();var r=n.slice(5),s=r.charAt(0)==="*";if(s&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new It(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:s}}Xj.hasOwnProperty(n[0])&&!eo[this.mode][n[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+n[0]+'" used in math mode',t),n=Xj[n[0]]+n.slice(1));var o=Uqe.exec(n);o&&(n=n.substring(0,o.index),n==="i"?n="":n==="j"&&(n=""));var i;if(eo[this.mode][n]){this.settings.strict&&this.mode==="math"&&pI.indexOf(n)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+n[0]+'" used in math mode',t);var a=eo[this.mode][n].group,l=fl.range(t),c;if(DVe.hasOwnProperty(a)){var u=a;c={type:"atom",mode:this.mode,family:u,loc:l,text:n}}else c={type:a,mode:this.mode,loc:l,text:n};i=c}else if(n.charCodeAt(0)>=128)this.settings.strict&&(kne(n.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+n[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+n[0]+'"'+(" ("+n.charCodeAt(0)+")"),t)),i={type:"textord",mode:"text",loc:fl.range(t),text:n};else return null;if(this.consume(),o)for(var f=0;f<o[0].length;f++){var m=o[0][f];if(!fA[m])throw new It("Unknown accent ' "+m+"'",t);var g=fA[m][this.mode]||fA[m].text;if(!g)throw new It("Accent "+m+" unsupported in "+this.mode+" mode",t);i={type:"accent",mode:this.mode,loc:fl.range(t),label:g,isStretchy:!1,isShifty:!0,base:i}}return i}};xre.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var _M=function(t,n){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new xre(t,n);delete r.gullet.macros.current["\\df@tag"];var s=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!n.displayMode)throw new It("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:r.subparse([new Jl("\\df@tag")])}]}return s},SM=function(t,n,r){n.textContent="";var s=qC(t,r).toNode();n.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),SM=function(){throw new It("KaTeX doesn't work in quirks mode.")});var Ere=function(t,n){var r=qC(t,n).toMarkup();return r},_re=function(t,n){var r=new oM(n);return _M(t,r)},Sre=function(t,n,r){if(r.throwOnError||!(t instanceof It))throw t;var s=We.makeSpan(["katex-error"],[new Lc(n)]);return s.setAttribute("title",t.toString()),s.setAttribute("style","color:"+r.errorColor),s},qC=function(t,n){var r=new oM(n);try{var s=_M(t,r);return rqe(s,t,r)}catch(o){return Sre(o,t,r)}},Tre=function(t,n){var r=new oM(n);try{var s=_M(t,r);return sqe(s,t,r)}catch(o){return Sre(o,t,r)}},Cre="0.16.25",kre={Span:jw,Anchor:lM,SymbolNode:Lc,SvgNode:Zf,PathNode:M0,LineNode:hI},xI={version:Cre,render:SM,renderToString:Ere,ParseError:It,SETTINGS_SCHEMA:Kv,__parse:_re,__renderToDomTree:qC,__renderToHTMLTree:Tre,__setFontMetrics:Ane,__defineSymbol:$,__defineFunction:Qt,__defineMacro:le,__domTree:kre};const dht=Object.freeze(Object.defineProperty({__proto__:null,ParseError:It,SETTINGS_SCHEMA:Kv,__defineFunction:Qt,__defineMacro:le,__defineSymbol:$,__domTree:kre,__parse:_re,__renderToDomTree:qC,__renderToHTMLTree:Tre,__setFontMetrics:Ane,default:xI,get render(){return SM},renderToString:Ere,version:Cre},Symbol.toStringTag,{value:"Module"})),Wqe={},Yqe=[];function wI(e){const t=e||Wqe;return function(n,r){rM(n,"element",function(s,o){const i=Array.isArray(s.properties.className)?s.properties.className:Yqe,a=i.includes("language-math"),l=i.includes("math-display"),c=i.includes("math-inline");let u=l;if(!a&&!l&&!c)return;let f=o[o.length-1],m=s;if(s.tagName==="code"&&a&&f&&f.type==="element"&&f.tagName==="pre"&&(m=f,f=o[o.length-2],u=!0),!f)return;const g=WHe(m,{whitespace:"pre"});let y;try{y=xI.renderToString(g,{...t,displayMode:u,throwOnError:!0})}catch(w){const _=w,S=_.name.toLowerCase();r.message("Could not render math with KaTeX",{ancestors:[...o,s],cause:_,place:s.position,ruleId:S,source:"rehype-katex"});try{y=xI.renderToString(g,{...t,displayMode:u,strict:"ignore",throwOnError:!1})}catch{y=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(t.errorColor||"#cc0000"),title:String(w)},children:[{type:"text",value:g}]}]}}typeof y=="string"&&(y=BHe(y).children);const v=f.children.indexOf(m);return f.children.splice(v,1,...y),qT})}}const Are=-1,GC=0,Jv=1,JT=2,TM=3,CM=4,kM=5,AM=6,Nre=7,Ire=8,Qj=typeof self=="object"?self:globalThis,Kqe=(e,t)=>{const n=(s,o)=>(e.set(o,s),s),r=s=>{if(e.has(s))return e.get(s);const[o,i]=t[s];switch(o){case GC:case Are:return n(i,s);case Jv:{const a=n([],s);for(const l of i)a.push(r(l));return a}case JT:{const a=n({},s);for(const[l,c]of i)a[r(l)]=r(c);return a}case TM:return n(new Date(i),s);case CM:{const{source:a,flags:l}=i;return n(new RegExp(a,l),s)}case kM:{const a=n(new Map,s);for(const[l,c]of i)a.set(r(l),r(c));return a}case AM:{const a=n(new Set,s);for(const l of i)a.add(r(l));return a}case Nre:{const{name:a,message:l}=i;return n(new Qj[a](l),s)}case Ire:return n(BigInt(i),s);case"BigInt":return n(Object(BigInt(i)),s);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:a}=new Uint8Array(i);return n(new DataView(a),i)}}return n(new Qj[o](i),s)};return r},eU=e=>Kqe(new Map,e)(0),Xg="",{toString:Zqe}={},{keys:Jqe}=Object,Xy=e=>{const t=typeof e;if(t!=="object"||!e)return[GC,t];const n=Zqe.call(e).slice(8,-1);switch(n){case"Array":return[Jv,Xg];case"Object":return[JT,Xg];case"Date":return[TM,Xg];case"RegExp":return[CM,Xg];case"Map":return[kM,Xg];case"Set":return[AM,Xg];case"DataView":return[Jv,n]}return n.includes("Array")?[Jv,n]:n.includes("Error")?[Nre,n]:[JT,n]},o_=([e,t])=>e===GC&&(t==="function"||t==="symbol"),Xqe=(e,t,n,r)=>{const s=(i,a)=>{const l=r.push(i)-1;return n.set(a,l),l},o=i=>{if(n.has(i))return n.get(i);let[a,l]=Xy(i);switch(a){case GC:{let u=i;switch(l){case"bigint":a=Ire,u=i.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return s([Are],i)}return s([a,u],i)}case Jv:{if(l){let m=i;return l==="DataView"?m=new Uint8Array(i.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(i)),s([l,[...m]],i)}const u=[],f=s([a,u],i);for(const m of i)u.push(o(m));return f}case JT:{if(l)switch(l){case"BigInt":return s([l,i.toString()],i);case"Boolean":case"Number":case"String":return s([l,i.valueOf()],i)}if(t&&"toJSON"in i)return o(i.toJSON());const u=[],f=s([a,u],i);for(const m of Jqe(i))(e||!o_(Xy(i[m])))&&u.push([o(m),o(i[m])]);return f}case TM:return s([a,i.toISOString()],i);case CM:{const{source:u,flags:f}=i;return s([a,{source:u,flags:f}],i)}case kM:{const u=[],f=s([a,u],i);for(const[m,g]of i)(e||!(o_(Xy(m))||o_(Xy(g))))&&u.push([o(m),o(g)]);return f}case AM:{const u=[],f=s([a,u],i);for(const m of i)(e||!o_(Xy(m)))&&u.push(o(m));return f}}const{message:c}=i;return s([a,{name:l,message:c}],i)};return o},tU=(e,{json:t,lossy:n}={})=>{const r=[];return Xqe(!(t||n),!!t,new Map,r)(e),r},ub=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?eU(tU(e,t)):structuredClone(e):(e,t)=>eU(tU(e,t));function Qqe(e){const t=String(e),n=[];return{toOffset:s,toPoint:r};function r(o){if(typeof o=="number"&&o>-1&&o<=t.length){let i=0;for(;;){let a=n[i];if(a===void 0){const l=nU(t,n[i-1]);a=l===-1?t.length+1:l+1,n[i]=a}if(a>o)return{line:i+1,column:o-(i>0?n[i-1]:0)+1,offset:o};i++}}}function s(o){if(o&&typeof o.line=="number"&&typeof o.column=="number"&&!Number.isNaN(o.line)&&!Number.isNaN(o.column)){for(;n.length<o.line;){const a=n[n.length-1],l=nU(t,a),c=l===-1?t.length+1:l+1;if(a===c)break;n.push(c)}const i=(o.line>1?n[o.line-2]:0)+o.column-1;if(i<n[o.line-1])return i}}}function nU(e,t){const n=e.indexOf("\r",t),r=e.indexOf(`
`,t);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Rre={}.hasOwnProperty,eGe=Object.prototype;function tGe(e,t){const n=t||{};return NM({file:n.file||void 0,location:!1,schema:n.space==="svg"?K0:Fw,verbose:n.verbose||!1},e)}function NM(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},z_(e,r,n),n}case"#document":case"#document-fragment":{const r=t,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Mre(e,t.childNodes),data:{quirksMode:s}},e.file&&e.location){const o=String(e.file),i=Qqe(o),a=i.toPoint(0),l=i.toPoint(o.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=t;return n={type:"doctype"},z_(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},z_(e,r,n),n}default:return n=nGe(e,t),n}}function Mre(e,t){let n=-1;const r=[];for(;++n<t.length;){const s=NM(e,t[n]);r.push(s)}return r}function nGe(e,t){const n=e.schema;e.schema=t.namespaceURI===bd.svg?K0:Fw;let r=-1;const s={};for(;++r<t.attrs.length;){const a=t.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;Rre.call(eGe,l)||(s[l]=a.value)}const i=(e.schema.space==="svg"?yne:bne)(t.tagName,s,Mre(e,t.childNodes));if(z_(e,t,i),i.tagName==="template"){const a=t,l=a.sourceCodeLocation,c=l&&l.startTag&&g1(l.startTag),u=l&&l.endTag&&g1(l.endTag),f=NM(e,a.content);c&&u&&e.file&&(f.position={start:c.end,end:u.start}),i.content=f}return e.schema=n,i}function z_(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=rGe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function rGe(e,t,n){const r=g1(n);if(t.type==="element"){const s=t.children[t.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),e.verbose){const o={};let i;if(n.attrs)for(i in n.attrs)Rre.call(n.attrs,i)&&(o[MC(e.schema,i).property]=g1(n.attrs[i]));n.startTag;const a=g1(n.startTag),l=n.endTag?g1(n.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=o,t.data={position:c}}}return r}function g1(e){const t=rU({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=rU({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function rU(e){return e.line&&e.column?e:void 0}class Hw{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}Hw.prototype.property={};Hw.prototype.normal={};Hw.prototype.space=null;function Ore(e,t){const n={},r={};let s=-1;for(;++s<e.length;)Object.assign(n,e[s].property),Object.assign(r,e[s].normal);return new Hw(n,r,t)}function EI(e){return e.toLowerCase()}class Bc{constructor(t,n){this.property=t,this.attribute=n}}Bc.prototype.space=null;Bc.prototype.boolean=!1;Bc.prototype.booleanish=!1;Bc.prototype.overloadedBoolean=!1;Bc.prototype.number=!1;Bc.prototype.commaSeparated=!1;Bc.prototype.spaceSeparated=!1;Bc.prototype.commaOrSpaceSeparated=!1;Bc.prototype.mustUseProperty=!1;Bc.prototype.defined=!1;let sGe=0;const hr=zm(),fi=zm(),Dre=zm(),Dt=zm(),Xs=zm(),P1=zm(),zl=zm();function zm(){return 2**++sGe}const _I=Object.freeze(Object.defineProperty({__proto__:null,boolean:hr,booleanish:fi,commaOrSpaceSeparated:zl,commaSeparated:P1,number:Dt,overloadedBoolean:Dre,spaceSeparated:Xs},Symbol.toStringTag,{value:"Module"})),hA=Object.keys(_I);class IM extends Bc{constructor(t,n,r,s){let o=-1;if(super(t,n),sU(this,"space",s),typeof r=="number")for(;++o<hA.length;){const i=hA[o];sU(this,hA[o],(r&_I[i])===_I[i])}}}IM.prototype.defined=!0;function sU(e,t,n){n&&(e[t]=n)}const oGe={}.hasOwnProperty;function Pb(e){const t={},n={};let r;for(r in e.properties)if(oGe.call(e.properties,r)){const s=e.properties[r],o=new IM(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[EI(r)]=r,n[EI(o.attribute)]=r}return new Hw(t,n,e.space)}const Pre=Pb({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Lre=Pb({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function $re(e,t){return t in e?e[t]:t}function Fre(e,t){return $re(e,t.toLowerCase())}const Bre=Pb({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Fre,properties:{xmlns:null,xmlnsXLink:null}}),zre=Pb({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:fi,ariaAutoComplete:null,ariaBusy:fi,ariaChecked:fi,ariaColCount:Dt,ariaColIndex:Dt,ariaColSpan:Dt,ariaControls:Xs,ariaCurrent:null,ariaDescribedBy:Xs,ariaDetails:null,ariaDisabled:fi,ariaDropEffect:Xs,ariaErrorMessage:null,ariaExpanded:fi,ariaFlowTo:Xs,ariaGrabbed:fi,ariaHasPopup:null,ariaHidden:fi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Xs,ariaLevel:Dt,ariaLive:null,ariaModal:fi,ariaMultiLine:fi,ariaMultiSelectable:fi,ariaOrientation:null,ariaOwns:Xs,ariaPlaceholder:null,ariaPosInSet:Dt,ariaPressed:fi,ariaReadOnly:fi,ariaRelevant:null,ariaRequired:fi,ariaRoleDescription:Xs,ariaRowCount:Dt,ariaRowIndex:Dt,ariaRowSpan:Dt,ariaSelected:fi,ariaSetSize:Dt,ariaSort:null,ariaValueMax:Dt,ariaValueMin:Dt,ariaValueNow:Dt,ariaValueText:null,role:null}}),iGe=Pb({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Fre,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:P1,acceptCharset:Xs,accessKey:Xs,action:null,allow:null,allowFullScreen:hr,allowPaymentRequest:hr,allowUserMedia:hr,alt:null,as:null,async:hr,autoCapitalize:null,autoComplete:Xs,autoFocus:hr,autoPlay:hr,blocking:Xs,capture:null,charSet:null,checked:hr,cite:null,className:Xs,cols:Dt,colSpan:null,content:null,contentEditable:fi,controls:hr,controlsList:Xs,coords:Dt|P1,crossOrigin:null,data:null,dateTime:null,decoding:null,default:hr,defer:hr,dir:null,dirName:null,disabled:hr,download:Dre,draggable:fi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:hr,formTarget:null,headers:Xs,height:Dt,hidden:hr,high:Dt,href:null,hrefLang:null,htmlFor:Xs,httpEquiv:Xs,id:null,imageSizes:null,imageSrcSet:null,inert:hr,inputMode:null,integrity:null,is:null,isMap:hr,itemId:null,itemProp:Xs,itemRef:Xs,itemScope:hr,itemType:Xs,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:hr,low:Dt,manifest:null,max:null,maxLength:Dt,media:null,method:null,min:null,minLength:Dt,multiple:hr,muted:hr,name:null,nonce:null,noModule:hr,noValidate:hr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:hr,optimum:Dt,pattern:null,ping:Xs,placeholder:null,playsInline:hr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:hr,referrerPolicy:null,rel:Xs,required:hr,reversed:hr,rows:Dt,rowSpan:Dt,sandbox:Xs,scope:null,scoped:hr,seamless:hr,selected:hr,shadowRootClonable:hr,shadowRootDelegatesFocus:hr,shadowRootMode:null,shape:null,size:Dt,sizes:null,slot:null,span:Dt,spellCheck:fi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Dt,step:null,style:null,tabIndex:Dt,target:null,title:null,translate:null,type:null,typeMustMatch:hr,useMap:null,value:fi,width:Dt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Xs,axis:null,background:null,bgColor:null,border:Dt,borderColor:null,bottomMargin:Dt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:hr,declare:hr,event:null,face:null,frame:null,frameBorder:null,hSpace:Dt,leftMargin:Dt,link:null,longDesc:null,lowSrc:null,marginHeight:Dt,marginWidth:Dt,noResize:hr,noHref:hr,noShade:hr,noWrap:hr,object:null,profile:null,prompt:null,rev:null,rightMargin:Dt,rules:null,scheme:null,scrolling:fi,standby:null,summary:null,text:null,topMargin:Dt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Dt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:hr,disableRemotePlayback:hr,prefix:null,property:null,results:Dt,security:null,unselectable:null}}),aGe=Pb({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:$re,properties:{about:zl,accentHeight:Dt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Dt,amplitude:Dt,arabicForm:null,ascent:Dt,attributeName:null,attributeType:null,azimuth:Dt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Dt,by:null,calcMode:null,capHeight:Dt,className:Xs,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Dt,diffuseConstant:Dt,direction:null,display:null,dur:null,divisor:Dt,dominantBaseline:null,download:hr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Dt,enableBackground:null,end:null,event:null,exponent:Dt,externalResourcesRequired:null,fill:null,fillOpacity:Dt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:P1,g2:P1,glyphName:P1,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Dt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Dt,horizOriginX:Dt,horizOriginY:Dt,id:null,ideographic:Dt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Dt,k:Dt,k1:Dt,k2:Dt,k3:Dt,k4:Dt,kernelMatrix:zl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Dt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Dt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Dt,overlineThickness:Dt,paintOrder:null,panose1:null,path:null,pathLength:Dt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Xs,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Dt,pointsAtY:Dt,pointsAtZ:Dt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zl,rev:zl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zl,requiredFeatures:zl,requiredFonts:zl,requiredFormats:zl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Dt,specularExponent:Dt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Dt,strikethroughThickness:Dt,string:null,stroke:null,strokeDashArray:zl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Dt,strokeOpacity:Dt,strokeWidth:null,style:null,surfaceScale:Dt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zl,tabIndex:Dt,tableValues:null,target:null,targetX:Dt,targetY:Dt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Dt,underlineThickness:Dt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Dt,values:null,vAlphabetic:Dt,vMathematical:Dt,vectorEffect:null,vHanging:Dt,vIdeographic:Dt,version:null,vertAdvY:Dt,vertOriginX:Dt,vertOriginY:Dt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Dt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),lGe=/^data[-\w.:]+$/i,oU=/-[a-z]/g,cGe=/[A-Z]/g;function uGe(e,t){const n=EI(t);let r=t,s=Bc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&lGe.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(oU,fGe);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!oU.test(o)){let i=o.replace(cGe,dGe);i.charAt(0)!=="-"&&(i="-"+i),t="data"+i}}s=IM}return new s(r,t)}function dGe(e){return"-"+e.toLowerCase()}function fGe(e){return e.charAt(1).toUpperCase()}const hGe=Ore([Lre,Pre,Bre,zre,iGe],"html"),jre=Ore([Lre,Pre,Bre,zre,aGe],"svg"),pGe={},mGe={}.hasOwnProperty,Ure=W7("type",{handlers:{root:bGe,element:EGe,text:xGe,comment:wGe,doctype:vGe}});function gGe(e,t){const r=(t||pGe).space;return Ure(e,r==="svg"?jre:hGe)}function bGe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=RM(e.children,n,t),Lb(e,n),n}function yGe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=RM(e.children,n,t),Lb(e,n),n}function vGe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Lb(e,t),t}function xGe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Lb(e,t),t}function wGe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Lb(e,t),t}function EGe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=jre);const s=[];let o;if(e.properties){for(o in e.properties)if(o!=="children"&&mGe.call(e.properties,o)){const l=_Ge(r,o,e.properties[o]);l&&s.push(l)}}const i=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:s,namespaceURI:bd[i],childNodes:[],parentNode:null};return a.childNodes=RM(e.children,a,r),Lb(e,a),e.tagName==="template"&&e.content&&(a.content=yGe(e.content,r)),a}function _Ge(e,t,n){const r=uGe(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Y7(n):K7(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const o=s.name.indexOf(":");o<0?s.prefix="":(s.name=s.name.slice(o+1),s.prefix=r.attribute.slice(0,o)),s.namespace=bd[r.space]}return s}function RM(e,t,n){let r=-1;const s=[];if(e)for(;++r<e.length;){const o=Ure(e[r],n);o.parentNode=t,s.push(o)}return s}function Lb(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const SGe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),bo="";var de;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(de||(de={}));const il={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Hre(e){return e>=55296&&e<=57343}function TGe(e){return e>=56320&&e<=57343}function CGe(e,t){return(e-55296)*1024+9216+t}function Vre(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function qre(e){return e>=64976&&e<=65007||SGe.has(e)}var et;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(et||(et={}));const kGe=65536;class AGe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=kGe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:r,col:s,offset:o}=this,i=s+n,a=o+n;return{code:t,startLine:r,endLine:r,startCol:i,endCol:i,startOffset:a,endOffset:a}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(TGe(n))return this.pos++,this._addGap(),CGe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,de.EOF;return this._err(et.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,de.EOF;const r=this.html.charCodeAt(n);return r===de.CARRIAGE_RETURN?de.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,de.EOF;let t=this.html.charCodeAt(this.pos);return t===de.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,de.LINE_FEED):t===de.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Hre(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===de.LINE_FEED||t===de.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Vre(t)?this._err(et.controlCharacterInInputStream):qre(t)&&this._err(et.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Ar;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Ar||(Ar={}));function Gre(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const NGe=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),IGe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function RGe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=IGe.get(e))!==null&&t!==void 0?t:e}var Hi;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Hi||(Hi={}));const MGe=32;var f0;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(f0||(f0={}));function SI(e){return e>=Hi.ZERO&&e<=Hi.NINE}function OGe(e){return e>=Hi.UPPER_A&&e<=Hi.UPPER_F||e>=Hi.LOWER_A&&e<=Hi.LOWER_F}function DGe(e){return e>=Hi.UPPER_A&&e<=Hi.UPPER_Z||e>=Hi.LOWER_A&&e<=Hi.LOWER_Z||SI(e)}function PGe(e){return e===Hi.EQUALS||DGe(e)}var Bi;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Bi||(Bi={}));var kf;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(kf||(kf={}));class LGe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Bi.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=kf.Strict}startEntity(t){this.decodeMode=t,this.state=Bi.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Bi.EntityStart:return t.charCodeAt(n)===Hi.NUM?(this.state=Bi.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Bi.NamedEntity,this.stateNamedEntity(t,n));case Bi.NumericStart:return this.stateNumericStart(t,n);case Bi.NumericDecimal:return this.stateNumericDecimal(t,n);case Bi.NumericHex:return this.stateNumericHex(t,n);case Bi.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|MGe)===Hi.LOWER_X?(this.state=Bi.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Bi.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,s){if(n!==r){const o=r-n;this.result=this.result*Math.pow(s,o)+Number.parseInt(t.substr(n,o),s),this.consumed+=o}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(SI(s)||OGe(s))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(SI(s))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Hi.SEMI)this.consumed+=1;else if(this.decodeMode===kf.Strict)return 0;return this.emitCodePoint(RGe(this.result),this.consumed),this.errors&&(t!==Hi.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let s=r[this.treeIndex],o=(s&f0.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const i=t.charCodeAt(n);if(this.treeIndex=$Ge(r,s,this.treeIndex+Math.max(1,o),i),this.treeIndex<0)return this.result===0||this.decodeMode===kf.Attribute&&(o===0||PGe(i))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],o=(s&f0.VALUE_LENGTH)>>14,o!==0){if(i===Hi.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==kf.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,s=(r[n]&f0.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[t]&~f0.VALUE_LENGTH:s[t+1],r),n===3&&this.emitCodePoint(s[t+2],r),r}end(){var t;switch(this.state){case Bi.NamedEntity:return this.result!==0&&(this.decodeMode!==kf.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Bi.NumericDecimal:return this.emitNumericEntity(0,2);case Bi.NumericHex:return this.emitNumericEntity(0,3);case Bi.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Bi.EntityStart:return 0}}}function $Ge(e,t,n,r){const s=(t&f0.BRANCH_LENGTH)>>7,o=t&f0.JUMP_TABLE;if(s===0)return o!==0&&r===o?n:-1;if(o){const l=r-o;return l<0||l>=s?-1:e[n+l]-1}let i=n,a=i+s-1;for(;i<=a;){const l=i+a>>>1,c=e[l];if(c<r)i=l+1;else if(c>r)a=l-1;else return e[l+s]}return-1}var vt;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(vt||(vt={}));var am;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(am||(am={}));var Tc;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Tc||(Tc={}));var qe;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(qe||(qe={}));var D;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(D||(D={}));const FGe=new Map([[qe.A,D.A],[qe.ADDRESS,D.ADDRESS],[qe.ANNOTATION_XML,D.ANNOTATION_XML],[qe.APPLET,D.APPLET],[qe.AREA,D.AREA],[qe.ARTICLE,D.ARTICLE],[qe.ASIDE,D.ASIDE],[qe.B,D.B],[qe.BASE,D.BASE],[qe.BASEFONT,D.BASEFONT],[qe.BGSOUND,D.BGSOUND],[qe.BIG,D.BIG],[qe.BLOCKQUOTE,D.BLOCKQUOTE],[qe.BODY,D.BODY],[qe.BR,D.BR],[qe.BUTTON,D.BUTTON],[qe.CAPTION,D.CAPTION],[qe.CENTER,D.CENTER],[qe.CODE,D.CODE],[qe.COL,D.COL],[qe.COLGROUP,D.COLGROUP],[qe.DD,D.DD],[qe.DESC,D.DESC],[qe.DETAILS,D.DETAILS],[qe.DIALOG,D.DIALOG],[qe.DIR,D.DIR],[qe.DIV,D.DIV],[qe.DL,D.DL],[qe.DT,D.DT],[qe.EM,D.EM],[qe.EMBED,D.EMBED],[qe.FIELDSET,D.FIELDSET],[qe.FIGCAPTION,D.FIGCAPTION],[qe.FIGURE,D.FIGURE],[qe.FONT,D.FONT],[qe.FOOTER,D.FOOTER],[qe.FOREIGN_OBJECT,D.FOREIGN_OBJECT],[qe.FORM,D.FORM],[qe.FRAME,D.FRAME],[qe.FRAMESET,D.FRAMESET],[qe.H1,D.H1],[qe.H2,D.H2],[qe.H3,D.H3],[qe.H4,D.H4],[qe.H5,D.H5],[qe.H6,D.H6],[qe.HEAD,D.HEAD],[qe.HEADER,D.HEADER],[qe.HGROUP,D.HGROUP],[qe.HR,D.HR],[qe.HTML,D.HTML],[qe.I,D.I],[qe.IMG,D.IMG],[qe.IMAGE,D.IMAGE],[qe.INPUT,D.INPUT],[qe.IFRAME,D.IFRAME],[qe.KEYGEN,D.KEYGEN],[qe.LABEL,D.LABEL],[qe.LI,D.LI],[qe.LINK,D.LINK],[qe.LISTING,D.LISTING],[qe.MAIN,D.MAIN],[qe.MALIGNMARK,D.MALIGNMARK],[qe.MARQUEE,D.MARQUEE],[qe.MATH,D.MATH],[qe.MENU,D.MENU],[qe.META,D.META],[qe.MGLYPH,D.MGLYPH],[qe.MI,D.MI],[qe.MO,D.MO],[qe.MN,D.MN],[qe.MS,D.MS],[qe.MTEXT,D.MTEXT],[qe.NAV,D.NAV],[qe.NOBR,D.NOBR],[qe.NOFRAMES,D.NOFRAMES],[qe.NOEMBED,D.NOEMBED],[qe.NOSCRIPT,D.NOSCRIPT],[qe.OBJECT,D.OBJECT],[qe.OL,D.OL],[qe.OPTGROUP,D.OPTGROUP],[qe.OPTION,D.OPTION],[qe.P,D.P],[qe.PARAM,D.PARAM],[qe.PLAINTEXT,D.PLAINTEXT],[qe.PRE,D.PRE],[qe.RB,D.RB],[qe.RP,D.RP],[qe.RT,D.RT],[qe.RTC,D.RTC],[qe.RUBY,D.RUBY],[qe.S,D.S],[qe.SCRIPT,D.SCRIPT],[qe.SEARCH,D.SEARCH],[qe.SECTION,D.SECTION],[qe.SELECT,D.SELECT],[qe.SOURCE,D.SOURCE],[qe.SMALL,D.SMALL],[qe.SPAN,D.SPAN],[qe.STRIKE,D.STRIKE],[qe.STRONG,D.STRONG],[qe.STYLE,D.STYLE],[qe.SUB,D.SUB],[qe.SUMMARY,D.SUMMARY],[qe.SUP,D.SUP],[qe.TABLE,D.TABLE],[qe.TBODY,D.TBODY],[qe.TEMPLATE,D.TEMPLATE],[qe.TEXTAREA,D.TEXTAREA],[qe.TFOOT,D.TFOOT],[qe.TD,D.TD],[qe.TH,D.TH],[qe.THEAD,D.THEAD],[qe.TITLE,D.TITLE],[qe.TR,D.TR],[qe.TRACK,D.TRACK],[qe.TT,D.TT],[qe.U,D.U],[qe.UL,D.UL],[qe.SVG,D.SVG],[qe.VAR,D.VAR],[qe.WBR,D.WBR],[qe.XMP,D.XMP]]);function $b(e){var t;return(t=FGe.get(e))!==null&&t!==void 0?t:D.UNKNOWN}const Tt=D,BGe={[vt.HTML]:new Set([Tt.ADDRESS,Tt.APPLET,Tt.AREA,Tt.ARTICLE,Tt.ASIDE,Tt.BASE,Tt.BASEFONT,Tt.BGSOUND,Tt.BLOCKQUOTE,Tt.BODY,Tt.BR,Tt.BUTTON,Tt.CAPTION,Tt.CENTER,Tt.COL,Tt.COLGROUP,Tt.DD,Tt.DETAILS,Tt.DIR,Tt.DIV,Tt.DL,Tt.DT,Tt.EMBED,Tt.FIELDSET,Tt.FIGCAPTION,Tt.FIGURE,Tt.FOOTER,Tt.FORM,Tt.FRAME,Tt.FRAMESET,Tt.H1,Tt.H2,Tt.H3,Tt.H4,Tt.H5,Tt.H6,Tt.HEAD,Tt.HEADER,Tt.HGROUP,Tt.HR,Tt.HTML,Tt.IFRAME,Tt.IMG,Tt.INPUT,Tt.LI,Tt.LINK,Tt.LISTING,Tt.MAIN,Tt.MARQUEE,Tt.MENU,Tt.META,Tt.NAV,Tt.NOEMBED,Tt.NOFRAMES,Tt.NOSCRIPT,Tt.OBJECT,Tt.OL,Tt.P,Tt.PARAM,Tt.PLAINTEXT,Tt.PRE,Tt.SCRIPT,Tt.SECTION,Tt.SELECT,Tt.SOURCE,Tt.STYLE,Tt.SUMMARY,Tt.TABLE,Tt.TBODY,Tt.TD,Tt.TEMPLATE,Tt.TEXTAREA,Tt.TFOOT,Tt.TH,Tt.THEAD,Tt.TITLE,Tt.TR,Tt.TRACK,Tt.UL,Tt.WBR,Tt.XMP]),[vt.MATHML]:new Set([Tt.MI,Tt.MO,Tt.MN,Tt.MS,Tt.MTEXT,Tt.ANNOTATION_XML]),[vt.SVG]:new Set([Tt.TITLE,Tt.FOREIGN_OBJECT,Tt.DESC]),[vt.XLINK]:new Set,[vt.XML]:new Set,[vt.XMLNS]:new Set},TI=new Set([Tt.H1,Tt.H2,Tt.H3,Tt.H4,Tt.H5,Tt.H6]);qe.STYLE,qe.SCRIPT,qe.XMP,qe.IFRAME,qe.NOEMBED,qe.NOFRAMES,qe.PLAINTEXT;var be;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(be||(be={}));const ni={DATA:be.DATA,RCDATA:be.RCDATA,RAWTEXT:be.RAWTEXT,SCRIPT_DATA:be.SCRIPT_DATA,PLAINTEXT:be.PLAINTEXT,CDATA_SECTION:be.CDATA_SECTION};function zGe(e){return e>=de.DIGIT_0&&e<=de.DIGIT_9}function Cv(e){return e>=de.LATIN_CAPITAL_A&&e<=de.LATIN_CAPITAL_Z}function jGe(e){return e>=de.LATIN_SMALL_A&&e<=de.LATIN_SMALL_Z}function Qh(e){return jGe(e)||Cv(e)}function iU(e){return Qh(e)||zGe(e)}function i_(e){return e+32}function Wre(e){return e===de.SPACE||e===de.LINE_FEED||e===de.TABULATION||e===de.FORM_FEED}function aU(e){return Wre(e)||e===de.SOLIDUS||e===de.GREATER_THAN_SIGN}function UGe(e){return e===de.NULL?et.nullCharacterReference:e>1114111?et.characterReferenceOutsideUnicodeRange:Hre(e)?et.surrogateCharacterReference:qre(e)?et.noncharacterCharacterReference:Vre(e)||e===de.CARRIAGE_RETURN?et.controlCharacterReference:null}class HGe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=be.DATA,this.returnState=be.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new AGe(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new LGe(NGe,(r,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(et.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(et.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const s=UGe(r);s&&this._err(s,1)}}:void 0)}_err(t,n=0){var r,s;(s=(r=this.handler).onParseError)===null||s===void 0||s.call(r,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Ar.START_TAG,tagName:"",tagID:D.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Ar.END_TAG,tagName:"",tagID:D.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Ar.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Ar.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Gre(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const s=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(et.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=$b(t.tagName),t.type===Ar.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(et.endTagWithAttributes),t.selfClosing&&this._err(et.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Ar.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Ar.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Ar.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Ar.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=Wre(t)?Ar.WHITESPACE_CHARACTER:t===de.NULL?Ar.NULL_CHARACTER:Ar.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Ar.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=be.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?kf.Attribute:kf.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===be.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===be.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===be.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case be.DATA:{this._stateData(t);break}case be.RCDATA:{this._stateRcdata(t);break}case be.RAWTEXT:{this._stateRawtext(t);break}case be.SCRIPT_DATA:{this._stateScriptData(t);break}case be.PLAINTEXT:{this._statePlaintext(t);break}case be.TAG_OPEN:{this._stateTagOpen(t);break}case be.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case be.TAG_NAME:{this._stateTagName(t);break}case be.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case be.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case be.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case be.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case be.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case be.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case be.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case be.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case be.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case be.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case be.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case be.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case be.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case be.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case be.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case be.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case be.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case be.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case be.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case be.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case be.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case be.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case be.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case be.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case be.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case be.BOGUS_COMMENT:{this._stateBogusComment(t);break}case be.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case be.COMMENT_START:{this._stateCommentStart(t);break}case be.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case be.COMMENT:{this._stateComment(t);break}case be.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case be.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case be.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case be.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case be.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case be.COMMENT_END:{this._stateCommentEnd(t);break}case be.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case be.DOCTYPE:{this._stateDoctype(t);break}case be.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case be.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case be.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case be.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case be.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case be.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case be.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case be.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case be.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case be.CDATA_SECTION:{this._stateCdataSection(t);break}case be.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case be.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case be.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case be.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case de.LESS_THAN_SIGN:{this.state=be.TAG_OPEN;break}case de.AMPERSAND:{this._startCharacterReference();break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitCodePoint(t);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case de.AMPERSAND:{this._startCharacterReference();break}case de.LESS_THAN_SIGN:{this.state=be.RCDATA_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(bo);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case de.LESS_THAN_SIGN:{this.state=be.RAWTEXT_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(bo);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case de.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(bo);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(bo);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Qh(t))this._createStartTagToken(),this.state=be.TAG_NAME,this._stateTagName(t);else switch(t){case de.EXCLAMATION_MARK:{this.state=be.MARKUP_DECLARATION_OPEN;break}case de.SOLIDUS:{this.state=be.END_TAG_OPEN;break}case de.QUESTION_MARK:{this._err(et.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=be.BOGUS_COMMENT,this._stateBogusComment(t);break}case de.EOF:{this._err(et.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(et.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=be.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Qh(t))this._createEndTagToken(),this.state=be.TAG_NAME,this._stateTagName(t);else switch(t){case de.GREATER_THAN_SIGN:{this._err(et.missingEndTagName),this.state=be.DATA;break}case de.EOF:{this._err(et.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(et.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=be.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=be.BEFORE_ATTRIBUTE_NAME;break}case de.SOLIDUS:{this.state=be.SELF_CLOSING_START_TAG;break}case de.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentTagToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.tagName+=bo;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Cv(t)?i_(t):t)}}_stateRcdataLessThanSign(t){t===de.SOLIDUS?this.state=be.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=be.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Qh(t)?(this.state=be.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=be.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=be.BEFORE_ATTRIBUTE_NAME,!1;case de.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=be.SELF_CLOSING_START_TAG,!1;case de.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=be.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===de.SOLIDUS?this.state=be.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=be.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Qh(t)?(this.state=be.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=be.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case de.SOLIDUS:{this.state=be.SCRIPT_DATA_END_TAG_OPEN;break}case de.EXCLAMATION_MARK:{this.state=be.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=be.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Qh(t)?(this.state=be.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===de.HYPHEN_MINUS?(this.state=be.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===de.HYPHEN_MINUS?(this.state=be.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case de.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(bo);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case de.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_ESCAPED,this._emitChars(bo);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case de.HYPHEN_MINUS:{this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.GREATER_THAN_SIGN:{this.state=be.SCRIPT_DATA,this._emitChars(">");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_ESCAPED,this._emitChars(bo);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===de.SOLIDUS?this.state=be.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Qh(t)?(this._emitChars("<"),this.state=be.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Qh(t)?(this.state=be.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(il.SCRIPT,!1)&&aU(this.preprocessor.peek(il.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<il.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case de.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(bo);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case de.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bo);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case de.HYPHEN_MINUS:{this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.GREATER_THAN_SIGN:{this.state=be.SCRIPT_DATA,this._emitChars(">");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bo);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===de.SOLIDUS?(this.state=be.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(il.SCRIPT,!1)&&aU(this.preprocessor.peek(il.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<il.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=be.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.SOLIDUS:case de.GREATER_THAN_SIGN:case de.EOF:{this.state=be.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case de.EQUALS_SIGN:{this._err(et.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=be.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=be.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:case de.SOLIDUS:case de.GREATER_THAN_SIGN:case de.EOF:{this._leaveAttrName(),this.state=be.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case de.EQUALS_SIGN:{this._leaveAttrName(),this.state=be.BEFORE_ATTRIBUTE_VALUE;break}case de.QUOTATION_MARK:case de.APOSTROPHE:case de.LESS_THAN_SIGN:{this._err(et.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.name+=bo;break}default:this.currentAttr.name+=String.fromCodePoint(Cv(t)?i_(t):t)}}_stateAfterAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.SOLIDUS:{this.state=be.SELF_CLOSING_START_TAG;break}case de.EQUALS_SIGN:{this.state=be.BEFORE_ATTRIBUTE_VALUE;break}case de.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=be.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{this.state=be.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this.state=be.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingAttributeValue),this.state=be.DATA,this.emitCurrentTagToken();break}default:this.state=be.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case de.QUOTATION_MARK:{this.state=be.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case de.AMPERSAND:{this._startCharacterReference();break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=bo;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case de.APOSTROPHE:{this.state=be.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case de.AMPERSAND:{this._startCharacterReference();break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=bo;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this._leaveAttrValue(),this.state=be.BEFORE_ATTRIBUTE_NAME;break}case de.AMPERSAND:{this._startCharacterReference();break}case de.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=be.DATA,this.emitCurrentTagToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=bo;break}case de.QUOTATION_MARK:case de.APOSTROPHE:case de.LESS_THAN_SIGN:case de.EQUALS_SIGN:case de.GRAVE_ACCENT:{this._err(et.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this._leaveAttrValue(),this.state=be.BEFORE_ATTRIBUTE_NAME;break}case de.SOLIDUS:{this._leaveAttrValue(),this.state=be.SELF_CLOSING_START_TAG;break}case de.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=be.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._err(et.missingWhitespaceBetweenAttributes),this.state=be.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case de.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=be.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._err(et.unexpectedSolidusInTag),this.state=be.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentComment(n);break}case de.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.data+=bo;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(il.DASH_DASH,!0)?(this._createCommentToken(il.DASH_DASH.length+1),this.state=be.COMMENT_START):this._consumeSequenceIfMatch(il.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(il.DOCTYPE.length+1),this.state=be.DOCTYPE):this._consumeSequenceIfMatch(il.CDATA_START,!0)?this.inForeignNode?this.state=be.CDATA_SECTION:(this._err(et.cdataInHtmlContent),this._createCommentToken(il.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=be.BOGUS_COMMENT):this._ensureHibernation()||(this._err(et.incorrectlyOpenedComment),this._createCommentToken(2),this.state=be.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case de.HYPHEN_MINUS:{this.state=be.COMMENT_START_DASH;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptClosingOfEmptyComment),this.state=be.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=be.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=be.COMMENT_END;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptClosingOfEmptyComment),this.state=be.DATA,this.emitCurrentComment(n);break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=be.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=be.COMMENT_END_DASH;break}case de.LESS_THAN_SIGN:{n.data+="<",this.state=be.COMMENT_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.data+=bo;break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case de.EXCLAMATION_MARK:{n.data+="!",this.state=be.COMMENT_LESS_THAN_SIGN_BANG;break}case de.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=be.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===de.HYPHEN_MINUS?this.state=be.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=be.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===de.HYPHEN_MINUS?this.state=be.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=be.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==de.GREATER_THAN_SIGN&&t!==de.EOF&&this._err(et.nestedComment),this.state=be.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=be.COMMENT_END;break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=be.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentComment(n);break}case de.EXCLAMATION_MARK:{this.state=be.COMMENT_END_BANG;break}case de.HYPHEN_MINUS:{n.data+="-";break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=be.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{n.data+="--!",this.state=be.COMMENT_END_DASH;break}case de.GREATER_THAN_SIGN:{this._err(et.incorrectlyClosedComment),this.state=be.DATA,this.emitCurrentComment(n);break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=be.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=be.BEFORE_DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this.state=be.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case de.EOF:{this._err(et.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingWhitespaceBeforeDoctypeName),this.state=be.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Cv(t))this._createDoctypeToken(String.fromCharCode(i_(t))),this.state=be.DOCTYPE_NAME;else switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.NULL:{this._err(et.unexpectedNullCharacter),this._createDoctypeToken(bo),this.state=be.DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case de.EOF:{this._err(et.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=be.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=be.AFTER_DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentDoctype(n);break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.name+=bo;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Cv(t)?i_(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(il.PUBLIC,!1)?this.state=be.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(il.SYSTEM,!1)?this.state=be.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(et.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=be.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case de.QUOTATION_MARK:{this.state=be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.publicId+=bo;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case de.APOSTROPHE:{this.state=be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.publicId+=bo;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=be.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case de.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentDoctype(n);break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=be.DATA;break}case de.QUOTATION_MARK:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=be.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case de.QUOTATION_MARK:{this.state=be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.systemId+=bo;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case de.APOSTROPHE:{this.state=be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.systemId+=bo;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=be.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=be.DATA;break}case de.NULL:{this._err(et.unexpectedNullCharacter);break}case de.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case de.RIGHT_SQUARE_BRACKET:{this.state=be.CDATA_SECTION_BRACKET;break}case de.EOF:{this._err(et.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===de.RIGHT_SQUARE_BRACKET?this.state=be.CDATA_SECTION_END:(this._emitChars("]"),this.state=be.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case de.GREATER_THAN_SIGN:{this.state=be.DATA;break}case de.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=be.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&iU(this.preprocessor.peek(1))?be.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){iU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===de.SEMICOLON&&this._err(et.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const Yre=new Set([D.DD,D.DT,D.LI,D.OPTGROUP,D.OPTION,D.P,D.RB,D.RP,D.RT,D.RTC]),lU=new Set([...Yre,D.CAPTION,D.COLGROUP,D.TBODY,D.TD,D.TFOOT,D.TH,D.THEAD,D.TR]),XT=new Set([D.APPLET,D.CAPTION,D.HTML,D.MARQUEE,D.OBJECT,D.TABLE,D.TD,D.TEMPLATE,D.TH]),VGe=new Set([...XT,D.OL,D.UL]),qGe=new Set([...XT,D.BUTTON]),cU=new Set([D.ANNOTATION_XML,D.MI,D.MN,D.MO,D.MS,D.MTEXT]),uU=new Set([D.DESC,D.FOREIGN_OBJECT,D.TITLE]),GGe=new Set([D.TR,D.TEMPLATE,D.HTML]),WGe=new Set([D.TBODY,D.TFOOT,D.THEAD,D.TEMPLATE,D.HTML]),YGe=new Set([D.TABLE,D.TEMPLATE,D.HTML]),KGe=new Set([D.TD,D.TH]);class ZGe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=D.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===D.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===vt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const s=this._indexOf(t)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,r),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==vt.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(TI,vt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(KGe,vt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(YGe,vt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(WGe,vt.HTML)}clearBackToTableRowContext(){this.clearBackTo(GGe,vt.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===D.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===D.HTML}hasInDynamicScope(t,n){for(let r=this.stackTop;r>=0;r--){const s=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case vt.HTML:{if(s===t)return!0;if(n.has(s))return!1;break}case vt.SVG:{if(uU.has(s))return!1;break}case vt.MATHML:{if(cU.has(s))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,XT)}hasInListItemScope(t){return this.hasInDynamicScope(t,VGe)}hasInButtonScope(t){return this.hasInDynamicScope(t,qGe)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case vt.HTML:{if(TI.has(n))return!0;if(XT.has(n))return!1;break}case vt.SVG:{if(uU.has(n))return!1;break}case vt.MATHML:{if(cU.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===vt.HTML)switch(this.tagIDs[n]){case t:return!0;case D.TABLE:case D.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===vt.HTML)switch(this.tagIDs[t]){case D.TBODY:case D.THEAD:case D.TFOOT:return!0;case D.TABLE:case D.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===vt.HTML)switch(this.tagIDs[n]){case t:return!0;case D.OPTION:case D.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&Yre.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&lU.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&lU.has(this.currentTagId);)this.pop()}}const pA=3;var hd;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(hd||(hd={}));const dU={type:hd.Marker};class JGe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],s=n.length,o=this.treeAdapter.getTagName(t),i=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===hd.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===o&&this.treeAdapter.getNamespaceURI(c)===i){const u=this.treeAdapter.getAttrList(c);u.length===s&&r.push({idx:a,attrs:u})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<pA)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<pA)return;const s=new Map(n.map(i=>[i.name,i.value]));let o=0;for(let i=0;i<r.length;i++){const a=r[i];a.attrs.every(l=>s.get(l.name)===l.value)&&(o+=1,o>=pA&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(dU)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:hd.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:hd.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(dU);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===hd.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===hd.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===hd.Element&&n.element===t)}}const e0={createDocument(){return{nodeName:"#document",mode:Tc.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const s=e.childNodes.find(o=>o.nodeName==="#documentType");if(s)s.name=t,s.publicId=n,s.systemId=r;else{const o={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};e0.appendChild(e,o)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(e0.isTextNode(n)){n.value+=t;return}}e0.appendChild(e,e0.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&e0.isTextNode(r)?r.value+=t:e0.insertBefore(e,e0.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Kre="html",XGe="about:legacy-compat",QGe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Zre=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],eWe=[...Zre,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],tWe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Jre=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],nWe=[...Jre,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function fU(e,t){return t.some(n=>e.startsWith(n))}function rWe(e){return e.name===Kre&&e.publicId===null&&(e.systemId===null||e.systemId===XGe)}function sWe(e){if(e.name!==Kre)return Tc.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===QGe)return Tc.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),tWe.has(n))return Tc.QUIRKS;let r=t===null?eWe:Zre;if(fU(n,r))return Tc.QUIRKS;if(r=t===null?Jre:nWe,fU(n,r))return Tc.LIMITED_QUIRKS}return Tc.NO_QUIRKS}const hU={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},oWe="definitionurl",iWe="definitionURL",aWe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),lWe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:vt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:vt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:vt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:vt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:vt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:vt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:vt.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:vt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:vt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:vt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:vt.XMLNS}]]),cWe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),uWe=new Set([D.B,D.BIG,D.BLOCKQUOTE,D.BODY,D.BR,D.CENTER,D.CODE,D.DD,D.DIV,D.DL,D.DT,D.EM,D.EMBED,D.H1,D.H2,D.H3,D.H4,D.H5,D.H6,D.HEAD,D.HR,D.I,D.IMG,D.LI,D.LISTING,D.MENU,D.META,D.NOBR,D.OL,D.P,D.PRE,D.RUBY,D.S,D.SMALL,D.SPAN,D.STRONG,D.STRIKE,D.SUB,D.SUP,D.TABLE,D.TT,D.U,D.UL,D.VAR]);function dWe(e){const t=e.tagID;return t===D.FONT&&e.attrs.some(({name:r})=>r===am.COLOR||r===am.SIZE||r===am.FACE)||uWe.has(t)}function Xre(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===oWe){e.attrs[t].name=iWe;break}}function Qre(e){for(let t=0;t<e.attrs.length;t++){const n=aWe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function MM(e){for(let t=0;t<e.attrs.length;t++){const n=lWe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function fWe(e){const t=cWe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=$b(e.tagName))}function hWe(e,t){return t===vt.MATHML&&(e===D.MI||e===D.MO||e===D.MN||e===D.MS||e===D.MTEXT)}function pWe(e,t,n){if(t===vt.MATHML&&e===D.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===am.ENCODING){const s=n[r].value.toLowerCase();return s===hU.TEXT_HTML||s===hU.APPLICATION_XML}}return t===vt.SVG&&(e===D.FOREIGN_OBJECT||e===D.DESC||e===D.TITLE)}function mWe(e,t,n,r){return(!r||r===vt.HTML)&&pWe(e,t,n)||(!r||r===vt.MATHML)&&hWe(e,t)}const gWe="hidden",bWe=8,yWe=3;var Se;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Se||(Se={}));const vWe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},ese=new Set([D.TABLE,D.TBODY,D.TFOOT,D.THEAD,D.TR]),pU={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:e0,onParseError:null};class mU{constructor(t,n,r=null,s=null){this.fragmentContext=r,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=Se.INITIAL,this.originalInsertionMode=Se.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...pU,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new HGe(this.options,this),this.activeFormattingElements=new JGe(this.treeAdapter),this.fragmentContextID=r?$b(this.treeAdapter.getTagName(r)):D.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new ZGe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...pU,...n};t??(t=r.treeAdapter.createElement(qe.TEMPLATE,vt.HTML,[]));const s=r.treeAdapter.createElement("documentmock",vt.HTML,[]),o=new this(r,s,t);return o.fragmentContextID===D.TEMPLATE&&o.tmplInsertionModeStack.unshift(Se.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var s;if(!this.onParseError)return;const o=(s=t.location)!==null&&s!==void 0?s:vWe,i={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(i)}onItemPush(t,n,r){var s,o;(o=(s=this.treeAdapter).onItemPush)===null||o===void 0||o.call(s,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(s=(r=this.treeAdapter).onItemPop)===null||s===void 0||s.call(r,t,this.openElements.current),n){let o,i;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,i=this.fragmentContextID):{current:o,currentTagId:i}=this.openElements,this._setContextModes(o,i)}}_setContextModes(t,n){const r=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===vt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,vt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Se.TEXT}switchToPlaintextParsing(){this.insertionMode=Se.TEXT,this.originalInsertionMode=Se.IN_BODY,this.tokenizer.state=ni.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===qe.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==vt.HTML))switch(this.fragmentContextID){case D.TITLE:case D.TEXTAREA:{this.tokenizer.state=ni.RCDATA;break}case D.STYLE:case D.XMP:case D.IFRAME:case D.NOEMBED:case D.NOFRAMES:case D.NOSCRIPT:{this.tokenizer.state=ni.RAWTEXT;break}case D.SCRIPT:{this.tokenizer.state=ni.SCRIPT_DATA;break}case D.PLAINTEXT:{this.tokenizer.state=ni.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",s=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,s),t.location){const i=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));i&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,vt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,vt.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(qe.HTML,vt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,D.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const s=this.treeAdapter.getChildNodes(n),o=r?s.lastIndexOf(r):s.length,i=s[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(i)){const{endLine:l,endCol:c,endOffset:u}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(i,{endLine:l,endCol:c,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,s=this.treeAdapter.getTagName(t),o=n.type===Ar.END_TAG&&s===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,o)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===D.SVG&&this.treeAdapter.getTagName(n)===qe.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===vt.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===D.MGLYPH||t.tagID===D.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,vt.HTML)}_processToken(t){switch(t.type){case Ar.CHARACTER:{this.onCharacter(t);break}case Ar.NULL_CHARACTER:{this.onNullCharacter(t);break}case Ar.COMMENT:{this.onComment(t);break}case Ar.DOCTYPE:{this.onDoctype(t);break}case Ar.START_TAG:{this._processStartTag(t);break}case Ar.END_TAG:{this.onEndTag(t);break}case Ar.EOF:{this.onEof(t);break}case Ar.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const s=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return mWe(t,s,o,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===hd.Marker||this.openElements.contains(s.element)),r=n===-1?t-1:n-1;for(let s=r;s>=0;s--){const o=this.activeFormattingElements.entries[s];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Se.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(D.P),this.openElements.popUntilTagNamePopped(D.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case D.TR:{this.insertionMode=Se.IN_ROW;return}case D.TBODY:case D.THEAD:case D.TFOOT:{this.insertionMode=Se.IN_TABLE_BODY;return}case D.CAPTION:{this.insertionMode=Se.IN_CAPTION;return}case D.COLGROUP:{this.insertionMode=Se.IN_COLUMN_GROUP;return}case D.TABLE:{this.insertionMode=Se.IN_TABLE;return}case D.BODY:{this.insertionMode=Se.IN_BODY;return}case D.FRAMESET:{this.insertionMode=Se.IN_FRAMESET;return}case D.SELECT:{this._resetInsertionModeForSelect(t);return}case D.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case D.HTML:{this.insertionMode=this.headElement?Se.AFTER_HEAD:Se.BEFORE_HEAD;return}case D.TD:case D.TH:{if(t>0){this.insertionMode=Se.IN_CELL;return}break}case D.HEAD:{if(t>0){this.insertionMode=Se.IN_HEAD;return}break}}this.insertionMode=Se.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===D.TEMPLATE)break;if(r===D.TABLE){this.insertionMode=Se.IN_SELECT_IN_TABLE;return}}this.insertionMode=Se.IN_SELECT}_isElementCausesFosterParenting(t){return ese.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case D.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===vt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case D.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return BGe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){KYe(this,t);return}switch(this.insertionMode){case Se.INITIAL:{Qy(this,t);break}case Se.BEFORE_HTML:{Xv(this,t);break}case Se.BEFORE_HEAD:{Qv(this,t);break}case Se.IN_HEAD:{ex(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{tx(this,t);break}case Se.AFTER_HEAD:{nx(this,t);break}case Se.IN_BODY:case Se.IN_CAPTION:case Se.IN_CELL:case Se.IN_TEMPLATE:{nse(this,t);break}case Se.TEXT:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{mA(this,t);break}case Se.IN_TABLE_TEXT:{lse(this,t);break}case Se.IN_COLUMN_GROUP:{QT(this,t);break}case Se.AFTER_BODY:{e4(this,t);break}case Se.AFTER_AFTER_BODY:{j_(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){YYe(this,t);return}switch(this.insertionMode){case Se.INITIAL:{Qy(this,t);break}case Se.BEFORE_HTML:{Xv(this,t);break}case Se.BEFORE_HEAD:{Qv(this,t);break}case Se.IN_HEAD:{ex(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{tx(this,t);break}case Se.AFTER_HEAD:{nx(this,t);break}case Se.TEXT:{this._insertCharacters(t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{mA(this,t);break}case Se.IN_COLUMN_GROUP:{QT(this,t);break}case Se.AFTER_BODY:{e4(this,t);break}case Se.AFTER_AFTER_BODY:{j_(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){CI(this,t);return}switch(this.insertionMode){case Se.INITIAL:case Se.BEFORE_HTML:case Se.BEFORE_HEAD:case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:case Se.IN_BODY:case Se.IN_TABLE:case Se.IN_CAPTION:case Se.IN_COLUMN_GROUP:case Se.IN_TABLE_BODY:case Se.IN_ROW:case Se.IN_CELL:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:case Se.IN_TEMPLATE:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:{CI(this,t);break}case Se.IN_TABLE_TEXT:{ev(this,t);break}case Se.AFTER_BODY:{CWe(this,t);break}case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{kWe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Se.INITIAL:{AWe(this,t);break}case Se.BEFORE_HEAD:case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:{this._err(t,et.misplacedDoctype);break}case Se.IN_TABLE_TEXT:{ev(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,et.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?ZYe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Se.INITIAL:{Qy(this,t);break}case Se.BEFORE_HTML:{NWe(this,t);break}case Se.BEFORE_HEAD:{RWe(this,t);break}case Se.IN_HEAD:{Ru(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{DWe(this,t);break}case Se.AFTER_HEAD:{LWe(this,t);break}case Se.IN_BODY:{_a(this,t);break}case Se.IN_TABLE:{db(this,t);break}case Se.IN_TABLE_TEXT:{ev(this,t);break}case Se.IN_CAPTION:{MYe(this,t);break}case Se.IN_COLUMN_GROUP:{PM(this,t);break}case Se.IN_TABLE_BODY:{KC(this,t);break}case Se.IN_ROW:{ZC(this,t);break}case Se.IN_CELL:{PYe(this,t);break}case Se.IN_SELECT:{dse(this,t);break}case Se.IN_SELECT_IN_TABLE:{$Ye(this,t);break}case Se.IN_TEMPLATE:{BYe(this,t);break}case Se.AFTER_BODY:{jYe(this,t);break}case Se.IN_FRAMESET:{UYe(this,t);break}case Se.AFTER_FRAMESET:{VYe(this,t);break}case Se.AFTER_AFTER_BODY:{GYe(this,t);break}case Se.AFTER_AFTER_FRAMESET:{WYe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?JYe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Se.INITIAL:{Qy(this,t);break}case Se.BEFORE_HTML:{IWe(this,t);break}case Se.BEFORE_HEAD:{MWe(this,t);break}case Se.IN_HEAD:{OWe(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{PWe(this,t);break}case Se.AFTER_HEAD:{$We(this,t);break}case Se.IN_BODY:{YC(this,t);break}case Se.TEXT:{EYe(this,t);break}case Se.IN_TABLE:{Zx(this,t);break}case Se.IN_TABLE_TEXT:{ev(this,t);break}case Se.IN_CAPTION:{OYe(this,t);break}case Se.IN_COLUMN_GROUP:{DYe(this,t);break}case Se.IN_TABLE_BODY:{kI(this,t);break}case Se.IN_ROW:{use(this,t);break}case Se.IN_CELL:{LYe(this,t);break}case Se.IN_SELECT:{fse(this,t);break}case Se.IN_SELECT_IN_TABLE:{FYe(this,t);break}case Se.IN_TEMPLATE:{zYe(this,t);break}case Se.AFTER_BODY:{pse(this,t);break}case Se.IN_FRAMESET:{HYe(this,t);break}case Se.AFTER_FRAMESET:{qYe(this,t);break}case Se.AFTER_AFTER_BODY:{j_(this,t);break}}}onEof(t){switch(this.insertionMode){case Se.INITIAL:{Qy(this,t);break}case Se.BEFORE_HTML:{Xv(this,t);break}case Se.BEFORE_HEAD:{Qv(this,t);break}case Se.IN_HEAD:{ex(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{tx(this,t);break}case Se.AFTER_HEAD:{nx(this,t);break}case Se.IN_BODY:case Se.IN_TABLE:case Se.IN_CAPTION:case Se.IN_COLUMN_GROUP:case Se.IN_TABLE_BODY:case Se.IN_ROW:case Se.IN_CELL:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:{ise(this,t);break}case Se.TEXT:{_Ye(this,t);break}case Se.IN_TABLE_TEXT:{ev(this,t);break}case Se.IN_TEMPLATE:{hse(this,t);break}case Se.AFTER_BODY:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{DM(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===de.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:case Se.TEXT:case Se.IN_COLUMN_GROUP:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:{this._insertCharacters(t);break}case Se.IN_BODY:case Se.IN_CAPTION:case Se.IN_CELL:case Se.IN_TEMPLATE:case Se.AFTER_BODY:case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{tse(this,t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{mA(this,t);break}case Se.IN_TABLE_TEXT:{ase(this,t);break}}}}function xWe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):ose(e,t),n}function wWe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const s=e.openElements.items[r];if(s===t.element)break;e._isSpecialElement(s,e.openElements.tagIDs[r])&&(n=s)}return n||(e.openElements.shortenToLength(Math.max(r,0)),e.activeFormattingElements.removeEntry(t)),n}function EWe(e,t,n){let r=t,s=e.openElements.getCommonAncestor(t);for(let o=0,i=s;i!==n;o++,i=s){s=e.openElements.getCommonAncestor(i);const a=e.activeFormattingElements.getElementEntry(i),l=a&&o>=yWe;!a||l?(l&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(i)):(i=_We(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(i,r),r=i)}return r}function _We(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function SWe(e,t,n){const r=e.treeAdapter.getTagName(t),s=$b(r);if(e._isElementCausesFosterParenting(s))e._fosterParentElement(n);else{const o=e.treeAdapter.getNamespaceURI(t);s===D.TEMPLATE&&o===vt.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function TWe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:s}=n,o=e.treeAdapter.createElement(s.tagName,r,s.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,s),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,s.tagID)}function OM(e,t){for(let n=0;n<bWe;n++){const r=xWe(e,t);if(!r)break;const s=wWe(e,r);if(!s)break;e.activeFormattingElements.bookmark=r;const o=EWe(e,s,r.element),i=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(o),i&&SWe(e,i,o),TWe(e,s,r)}}function CI(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function CWe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function kWe(e,t){e._appendCommentNode(t,e.document)}function DM(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],s=e.treeAdapter.getNodeSourceCodeLocation(r);if(s&&!s.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],i=e.treeAdapter.getNodeSourceCodeLocation(o);i&&!i.endTag&&e._setEndLocation(o,t)}}}}function AWe(e,t){e._setDocumentType(t);const n=t.forceQuirks?Tc.QUIRKS:sWe(t);rWe(t)||e._err(t,et.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Se.BEFORE_HTML}function Qy(e,t){e._err(t,et.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Tc.QUIRKS),e.insertionMode=Se.BEFORE_HTML,e._processToken(t)}function NWe(e,t){t.tagID===D.HTML?(e._insertElement(t,vt.HTML),e.insertionMode=Se.BEFORE_HEAD):Xv(e,t)}function IWe(e,t){const n=t.tagID;(n===D.HTML||n===D.HEAD||n===D.BODY||n===D.BR)&&Xv(e,t)}function Xv(e,t){e._insertFakeRootElement(),e.insertionMode=Se.BEFORE_HEAD,e._processToken(t)}function RWe(e,t){switch(t.tagID){case D.HTML:{_a(e,t);break}case D.HEAD:{e._insertElement(t,vt.HTML),e.headElement=e.openElements.current,e.insertionMode=Se.IN_HEAD;break}default:Qv(e,t)}}function MWe(e,t){const n=t.tagID;n===D.HEAD||n===D.BODY||n===D.HTML||n===D.BR?Qv(e,t):e._err(t,et.endTagWithoutMatchingOpenElement)}function Qv(e,t){e._insertFakeElement(qe.HEAD,D.HEAD),e.headElement=e.openElements.current,e.insertionMode=Se.IN_HEAD,e._processToken(t)}function Ru(e,t){switch(t.tagID){case D.HTML:{_a(e,t);break}case D.BASE:case D.BASEFONT:case D.BGSOUND:case D.LINK:case D.META:{e._appendElement(t,vt.HTML),t.ackSelfClosing=!0;break}case D.TITLE:{e._switchToTextParsing(t,ni.RCDATA);break}case D.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ni.RAWTEXT):(e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_HEAD_NO_SCRIPT);break}case D.NOFRAMES:case D.STYLE:{e._switchToTextParsing(t,ni.RAWTEXT);break}case D.SCRIPT:{e._switchToTextParsing(t,ni.SCRIPT_DATA);break}case D.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Se.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Se.IN_TEMPLATE);break}case D.HEAD:{e._err(t,et.misplacedStartTagForHeadElement);break}default:ex(e,t)}}function OWe(e,t){switch(t.tagID){case D.HEAD:{e.openElements.pop(),e.insertionMode=Se.AFTER_HEAD;break}case D.BODY:case D.BR:case D.HTML:{ex(e,t);break}case D.TEMPLATE:{jm(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function jm(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==D.TEMPLATE&&e._err(t,et.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(D.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,et.endTagWithoutMatchingOpenElement)}function ex(e,t){e.openElements.pop(),e.insertionMode=Se.AFTER_HEAD,e._processToken(t)}function DWe(e,t){switch(t.tagID){case D.HTML:{_a(e,t);break}case D.BASEFONT:case D.BGSOUND:case D.HEAD:case D.LINK:case D.META:case D.NOFRAMES:case D.STYLE:{Ru(e,t);break}case D.NOSCRIPT:{e._err(t,et.nestedNoscriptInHead);break}default:tx(e,t)}}function PWe(e,t){switch(t.tagID){case D.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Se.IN_HEAD;break}case D.BR:{tx(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function tx(e,t){const n=t.type===Ar.EOF?et.openElementsLeftAfterEof:et.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Se.IN_HEAD,e._processToken(t)}function LWe(e,t){switch(t.tagID){case D.HTML:{_a(e,t);break}case D.BODY:{e._insertElement(t,vt.HTML),e.framesetOk=!1,e.insertionMode=Se.IN_BODY;break}case D.FRAMESET:{e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_FRAMESET;break}case D.BASE:case D.BASEFONT:case D.BGSOUND:case D.LINK:case D.META:case D.NOFRAMES:case D.SCRIPT:case D.STYLE:case D.TEMPLATE:case D.TITLE:{e._err(t,et.abandonedHeadElementChild),e.openElements.push(e.headElement,D.HEAD),Ru(e,t),e.openElements.remove(e.headElement);break}case D.HEAD:{e._err(t,et.misplacedStartTagForHeadElement);break}default:nx(e,t)}}function $We(e,t){switch(t.tagID){case D.BODY:case D.HTML:case D.BR:{nx(e,t);break}case D.TEMPLATE:{jm(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function nx(e,t){e._insertFakeElement(qe.BODY,D.BODY),e.insertionMode=Se.IN_BODY,WC(e,t)}function WC(e,t){switch(t.type){case Ar.CHARACTER:{nse(e,t);break}case Ar.WHITESPACE_CHARACTER:{tse(e,t);break}case Ar.COMMENT:{CI(e,t);break}case Ar.START_TAG:{_a(e,t);break}case Ar.END_TAG:{YC(e,t);break}case Ar.EOF:{ise(e,t);break}}}function tse(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function nse(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function FWe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function BWe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function zWe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_FRAMESET)}function jWe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML)}function UWe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&TI.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,vt.HTML)}function HWe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function VWe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML),n||(e.formElement=e.openElements.current))}function qWe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const s=e.openElements.tagIDs[r];if(n===D.LI&&s===D.LI||(n===D.DD||n===D.DT)&&(s===D.DD||s===D.DT)){e.openElements.generateImpliedEndTagsWithExclusion(s),e.openElements.popUntilTagNamePopped(s);break}if(s!==D.ADDRESS&&s!==D.DIV&&s!==D.P&&e._isSpecialElement(e.openElements.items[r],s))break}e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML)}function GWe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML),e.tokenizer.state=ni.PLAINTEXT}function WWe(e,t){e.openElements.hasInScope(D.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(D.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML),e.framesetOk=!1}function YWe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(qe.A);n&&(OM(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function KWe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function ZWe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(D.NOBR)&&(OM(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,vt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function JWe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function XWe(e,t){e.treeAdapter.getDocumentMode(e.document)!==Tc.QUIRKS&&e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._insertElement(t,vt.HTML),e.framesetOk=!1,e.insertionMode=Se.IN_TABLE}function rse(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,vt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function sse(e){const t=Gre(e,am.TYPE);return t!=null&&t.toLowerCase()===gWe}function QWe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,vt.HTML),sse(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function eYe(e,t){e._appendElement(t,vt.HTML),t.ackSelfClosing=!0}function tYe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._appendElement(t,vt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function nYe(e,t){t.tagName=qe.IMG,t.tagID=D.IMG,rse(e,t)}function rYe(e,t){e._insertElement(t,vt.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ni.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Se.TEXT}function sYe(e,t){e.openElements.hasInButtonScope(D.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ni.RAWTEXT)}function oYe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ni.RAWTEXT)}function gU(e,t){e._switchToTextParsing(t,ni.RAWTEXT)}function iYe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Se.IN_TABLE||e.insertionMode===Se.IN_CAPTION||e.insertionMode===Se.IN_TABLE_BODY||e.insertionMode===Se.IN_ROW||e.insertionMode===Se.IN_CELL?Se.IN_SELECT_IN_TABLE:Se.IN_SELECT}function aYe(e,t){e.openElements.currentTagId===D.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML)}function lYe(e,t){e.openElements.hasInScope(D.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,vt.HTML)}function cYe(e,t){e.openElements.hasInScope(D.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(D.RTC),e._insertElement(t,vt.HTML)}function uYe(e,t){e._reconstructActiveFormattingElements(),Xre(t),MM(t),t.selfClosing?e._appendElement(t,vt.MATHML):e._insertElement(t,vt.MATHML),t.ackSelfClosing=!0}function dYe(e,t){e._reconstructActiveFormattingElements(),Qre(t),MM(t),t.selfClosing?e._appendElement(t,vt.SVG):e._insertElement(t,vt.SVG),t.ackSelfClosing=!0}function bU(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,vt.HTML)}function _a(e,t){switch(t.tagID){case D.I:case D.S:case D.B:case D.U:case D.EM:case D.TT:case D.BIG:case D.CODE:case D.FONT:case D.SMALL:case D.STRIKE:case D.STRONG:{KWe(e,t);break}case D.A:{YWe(e,t);break}case D.H1:case D.H2:case D.H3:case D.H4:case D.H5:case D.H6:{UWe(e,t);break}case D.P:case D.DL:case D.OL:case D.UL:case D.DIV:case D.DIR:case D.NAV:case D.MAIN:case D.MENU:case D.ASIDE:case D.CENTER:case D.FIGURE:case D.FOOTER:case D.HEADER:case D.HGROUP:case D.DIALOG:case D.DETAILS:case D.ADDRESS:case D.ARTICLE:case D.SEARCH:case D.SECTION:case D.SUMMARY:case D.FIELDSET:case D.BLOCKQUOTE:case D.FIGCAPTION:{jWe(e,t);break}case D.LI:case D.DD:case D.DT:{qWe(e,t);break}case D.BR:case D.IMG:case D.WBR:case D.AREA:case D.EMBED:case D.KEYGEN:{rse(e,t);break}case D.HR:{tYe(e,t);break}case D.RB:case D.RTC:{lYe(e,t);break}case D.RT:case D.RP:{cYe(e,t);break}case D.PRE:case D.LISTING:{HWe(e,t);break}case D.XMP:{sYe(e,t);break}case D.SVG:{dYe(e,t);break}case D.HTML:{FWe(e,t);break}case D.BASE:case D.LINK:case D.META:case D.STYLE:case D.TITLE:case D.SCRIPT:case D.BGSOUND:case D.BASEFONT:case D.TEMPLATE:{Ru(e,t);break}case D.BODY:{BWe(e,t);break}case D.FORM:{VWe(e,t);break}case D.NOBR:{ZWe(e,t);break}case D.MATH:{uYe(e,t);break}case D.TABLE:{XWe(e,t);break}case D.INPUT:{QWe(e,t);break}case D.PARAM:case D.TRACK:case D.SOURCE:{eYe(e,t);break}case D.IMAGE:{nYe(e,t);break}case D.BUTTON:{WWe(e,t);break}case D.APPLET:case D.OBJECT:case D.MARQUEE:{JWe(e,t);break}case D.IFRAME:{oYe(e,t);break}case D.SELECT:{iYe(e,t);break}case D.OPTION:case D.OPTGROUP:{aYe(e,t);break}case D.NOEMBED:case D.NOFRAMES:{gU(e,t);break}case D.FRAMESET:{zWe(e,t);break}case D.TEXTAREA:{rYe(e,t);break}case D.NOSCRIPT:{e.options.scriptingEnabled?gU(e,t):bU(e,t);break}case D.PLAINTEXT:{GWe(e,t);break}case D.COL:case D.TH:case D.TD:case D.TR:case D.HEAD:case D.FRAME:case D.TBODY:case D.TFOOT:case D.THEAD:case D.CAPTION:case D.COLGROUP:break;default:bU(e,t)}}function fYe(e,t){if(e.openElements.hasInScope(D.BODY)&&(e.insertionMode=Se.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function hYe(e,t){e.openElements.hasInScope(D.BODY)&&(e.insertionMode=Se.AFTER_BODY,pse(e,t))}function pYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function mYe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(D.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(D.FORM):n&&e.openElements.remove(n))}function gYe(e){e.openElements.hasInButtonScope(D.P)||e._insertFakeElement(qe.P,D.P),e._closePElement()}function bYe(e){e.openElements.hasInListItemScope(D.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(D.LI),e.openElements.popUntilTagNamePopped(D.LI))}function yYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function vYe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function xYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function wYe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(qe.BR,D.BR),e.openElements.pop(),e.framesetOk=!1}function ose(e,t){const n=t.tagName,r=t.tagID;for(let s=e.openElements.stackTop;s>0;s--){const o=e.openElements.items[s],i=e.openElements.tagIDs[s];if(r===i&&(r!==D.UNKNOWN||e.treeAdapter.getTagName(o)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=s&&e.openElements.shortenToLength(s);break}if(e._isSpecialElement(o,i))break}}function YC(e,t){switch(t.tagID){case D.A:case D.B:case D.I:case D.S:case D.U:case D.EM:case D.TT:case D.BIG:case D.CODE:case D.FONT:case D.NOBR:case D.SMALL:case D.STRIKE:case D.STRONG:{OM(e,t);break}case D.P:{gYe(e);break}case D.DL:case D.UL:case D.OL:case D.DIR:case D.DIV:case D.NAV:case D.PRE:case D.MAIN:case D.MENU:case D.ASIDE:case D.BUTTON:case D.CENTER:case D.FIGURE:case D.FOOTER:case D.HEADER:case D.HGROUP:case D.DIALOG:case D.ADDRESS:case D.ARTICLE:case D.DETAILS:case D.SEARCH:case D.SECTION:case D.SUMMARY:case D.LISTING:case D.FIELDSET:case D.BLOCKQUOTE:case D.FIGCAPTION:{pYe(e,t);break}case D.LI:{bYe(e);break}case D.DD:case D.DT:{yYe(e,t);break}case D.H1:case D.H2:case D.H3:case D.H4:case D.H5:case D.H6:{vYe(e);break}case D.BR:{wYe(e);break}case D.BODY:{fYe(e,t);break}case D.HTML:{hYe(e,t);break}case D.FORM:{mYe(e);break}case D.APPLET:case D.OBJECT:case D.MARQUEE:{xYe(e,t);break}case D.TEMPLATE:{jm(e,t);break}default:ose(e,t)}}function ise(e,t){e.tmplInsertionModeStack.length>0?hse(e,t):DM(e,t)}function EYe(e,t){var n;t.tagID===D.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function _Ye(e,t){e._err(t,et.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function mA(e,t){if(e.openElements.currentTagId!==void 0&&ese.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Se.IN_TABLE_TEXT,t.type){case Ar.CHARACTER:{lse(e,t);break}case Ar.WHITESPACE_CHARACTER:{ase(e,t);break}}else Vw(e,t)}function SYe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_CAPTION}function TYe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_COLUMN_GROUP}function CYe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(qe.COLGROUP,D.COLGROUP),e.insertionMode=Se.IN_COLUMN_GROUP,PM(e,t)}function kYe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_TABLE_BODY}function AYe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(qe.TBODY,D.TBODY),e.insertionMode=Se.IN_TABLE_BODY,KC(e,t)}function NYe(e,t){e.openElements.hasInTableScope(D.TABLE)&&(e.openElements.popUntilTagNamePopped(D.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function IYe(e,t){sse(t)?e._appendElement(t,vt.HTML):Vw(e,t),t.ackSelfClosing=!0}function RYe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,vt.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function db(e,t){switch(t.tagID){case D.TD:case D.TH:case D.TR:{AYe(e,t);break}case D.STYLE:case D.SCRIPT:case D.TEMPLATE:{Ru(e,t);break}case D.COL:{CYe(e,t);break}case D.FORM:{RYe(e,t);break}case D.TABLE:{NYe(e,t);break}case D.TBODY:case D.TFOOT:case D.THEAD:{kYe(e,t);break}case D.INPUT:{IYe(e,t);break}case D.CAPTION:{SYe(e,t);break}case D.COLGROUP:{TYe(e,t);break}default:Vw(e,t)}}function Zx(e,t){switch(t.tagID){case D.TABLE:{e.openElements.hasInTableScope(D.TABLE)&&(e.openElements.popUntilTagNamePopped(D.TABLE),e._resetInsertionMode());break}case D.TEMPLATE:{jm(e,t);break}case D.BODY:case D.CAPTION:case D.COL:case D.COLGROUP:case D.HTML:case D.TBODY:case D.TD:case D.TFOOT:case D.TH:case D.THEAD:case D.TR:break;default:Vw(e,t)}}function Vw(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,WC(e,t),e.fosterParentingEnabled=n}function ase(e,t){e.pendingCharacterTokens.push(t)}function lse(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function ev(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Vw(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const cse=new Set([D.CAPTION,D.COL,D.COLGROUP,D.TBODY,D.TD,D.TFOOT,D.TH,D.THEAD,D.TR]);function MYe(e,t){const n=t.tagID;cse.has(n)?e.openElements.hasInTableScope(D.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(D.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_TABLE,db(e,t)):_a(e,t)}function OYe(e,t){const n=t.tagID;switch(n){case D.CAPTION:case D.TABLE:{e.openElements.hasInTableScope(D.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(D.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_TABLE,n===D.TABLE&&Zx(e,t));break}case D.BODY:case D.COL:case D.COLGROUP:case D.HTML:case D.TBODY:case D.TD:case D.TFOOT:case D.TH:case D.THEAD:case D.TR:break;default:YC(e,t)}}function PM(e,t){switch(t.tagID){case D.HTML:{_a(e,t);break}case D.COL:{e._appendElement(t,vt.HTML),t.ackSelfClosing=!0;break}case D.TEMPLATE:{Ru(e,t);break}default:QT(e,t)}}function DYe(e,t){switch(t.tagID){case D.COLGROUP:{e.openElements.currentTagId===D.COLGROUP&&(e.openElements.pop(),e.insertionMode=Se.IN_TABLE);break}case D.TEMPLATE:{jm(e,t);break}case D.COL:break;default:QT(e,t)}}function QT(e,t){e.openElements.currentTagId===D.COLGROUP&&(e.openElements.pop(),e.insertionMode=Se.IN_TABLE,e._processToken(t))}function KC(e,t){switch(t.tagID){case D.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_ROW;break}case D.TH:case D.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(qe.TR,D.TR),e.insertionMode=Se.IN_ROW,ZC(e,t);break}case D.CAPTION:case D.COL:case D.COLGROUP:case D.TBODY:case D.TFOOT:case D.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE,db(e,t));break}default:db(e,t)}}function kI(e,t){const n=t.tagID;switch(t.tagID){case D.TBODY:case D.TFOOT:case D.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE);break}case D.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE,Zx(e,t));break}case D.BODY:case D.CAPTION:case D.COL:case D.COLGROUP:case D.HTML:case D.TD:case D.TH:case D.TR:break;default:Zx(e,t)}}function ZC(e,t){switch(t.tagID){case D.TH:case D.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,vt.HTML),e.insertionMode=Se.IN_CELL,e.activeFormattingElements.insertMarker();break}case D.CAPTION:case D.COL:case D.COLGROUP:case D.TBODY:case D.TFOOT:case D.THEAD:case D.TR:{e.openElements.hasInTableScope(D.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,KC(e,t));break}default:db(e,t)}}function use(e,t){switch(t.tagID){case D.TR:{e.openElements.hasInTableScope(D.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY);break}case D.TABLE:{e.openElements.hasInTableScope(D.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,kI(e,t));break}case D.TBODY:case D.TFOOT:case D.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(D.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,kI(e,t));break}case D.BODY:case D.CAPTION:case D.COL:case D.COLGROUP:case D.HTML:case D.TD:case D.TH:break;default:Zx(e,t)}}function PYe(e,t){const n=t.tagID;cse.has(n)?(e.openElements.hasInTableScope(D.TD)||e.openElements.hasInTableScope(D.TH))&&(e._closeTableCell(),ZC(e,t)):_a(e,t)}function LYe(e,t){const n=t.tagID;switch(n){case D.TD:case D.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_ROW);break}case D.TABLE:case D.TBODY:case D.TFOOT:case D.THEAD:case D.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),use(e,t));break}case D.BODY:case D.CAPTION:case D.COL:case D.COLGROUP:case D.HTML:break;default:YC(e,t)}}function dse(e,t){switch(t.tagID){case D.HTML:{_a(e,t);break}case D.OPTION:{e.openElements.currentTagId===D.OPTION&&e.openElements.pop(),e._insertElement(t,vt.HTML);break}case D.OPTGROUP:{e.openElements.currentTagId===D.OPTION&&e.openElements.pop(),e.openElements.currentTagId===D.OPTGROUP&&e.openElements.pop(),e._insertElement(t,vt.HTML);break}case D.HR:{e.openElements.currentTagId===D.OPTION&&e.openElements.pop(),e.openElements.currentTagId===D.OPTGROUP&&e.openElements.pop(),e._appendElement(t,vt.HTML),t.ackSelfClosing=!0;break}case D.INPUT:case D.KEYGEN:case D.TEXTAREA:case D.SELECT:{e.openElements.hasInSelectScope(D.SELECT)&&(e.openElements.popUntilTagNamePopped(D.SELECT),e._resetInsertionMode(),t.tagID!==D.SELECT&&e._processStartTag(t));break}case D.SCRIPT:case D.TEMPLATE:{Ru(e,t);break}}}function fse(e,t){switch(t.tagID){case D.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===D.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===D.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===D.OPTGROUP&&e.openElements.pop();break}case D.OPTION:{e.openElements.currentTagId===D.OPTION&&e.openElements.pop();break}case D.SELECT:{e.openElements.hasInSelectScope(D.SELECT)&&(e.openElements.popUntilTagNamePopped(D.SELECT),e._resetInsertionMode());break}case D.TEMPLATE:{jm(e,t);break}}}function $Ye(e,t){const n=t.tagID;n===D.CAPTION||n===D.TABLE||n===D.TBODY||n===D.TFOOT||n===D.THEAD||n===D.TR||n===D.TD||n===D.TH?(e.openElements.popUntilTagNamePopped(D.SELECT),e._resetInsertionMode(),e._processStartTag(t)):dse(e,t)}function FYe(e,t){const n=t.tagID;n===D.CAPTION||n===D.TABLE||n===D.TBODY||n===D.TFOOT||n===D.THEAD||n===D.TR||n===D.TD||n===D.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(D.SELECT),e._resetInsertionMode(),e.onEndTag(t)):fse(e,t)}function BYe(e,t){switch(t.tagID){case D.BASE:case D.BASEFONT:case D.BGSOUND:case D.LINK:case D.META:case D.NOFRAMES:case D.SCRIPT:case D.STYLE:case D.TEMPLATE:case D.TITLE:{Ru(e,t);break}case D.CAPTION:case D.COLGROUP:case D.TBODY:case D.TFOOT:case D.THEAD:{e.tmplInsertionModeStack[0]=Se.IN_TABLE,e.insertionMode=Se.IN_TABLE,db(e,t);break}case D.COL:{e.tmplInsertionModeStack[0]=Se.IN_COLUMN_GROUP,e.insertionMode=Se.IN_COLUMN_GROUP,PM(e,t);break}case D.TR:{e.tmplInsertionModeStack[0]=Se.IN_TABLE_BODY,e.insertionMode=Se.IN_TABLE_BODY,KC(e,t);break}case D.TD:case D.TH:{e.tmplInsertionModeStack[0]=Se.IN_ROW,e.insertionMode=Se.IN_ROW,ZC(e,t);break}default:e.tmplInsertionModeStack[0]=Se.IN_BODY,e.insertionMode=Se.IN_BODY,_a(e,t)}}function zYe(e,t){t.tagID===D.TEMPLATE&&jm(e,t)}function hse(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(D.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):DM(e,t)}function jYe(e,t){t.tagID===D.HTML?_a(e,t):e4(e,t)}function pse(e,t){var n;if(t.tagID===D.HTML){if(e.fragmentContext||(e.insertionMode=Se.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===D.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else e4(e,t)}function e4(e,t){e.insertionMode=Se.IN_BODY,WC(e,t)}function UYe(e,t){switch(t.tagID){case D.HTML:{_a(e,t);break}case D.FRAMESET:{e._insertElement(t,vt.HTML);break}case D.FRAME:{e._appendElement(t,vt.HTML),t.ackSelfClosing=!0;break}case D.NOFRAMES:{Ru(e,t);break}}}function HYe(e,t){t.tagID===D.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==D.FRAMESET&&(e.insertionMode=Se.AFTER_FRAMESET))}function VYe(e,t){switch(t.tagID){case D.HTML:{_a(e,t);break}case D.NOFRAMES:{Ru(e,t);break}}}function qYe(e,t){t.tagID===D.HTML&&(e.insertionMode=Se.AFTER_AFTER_FRAMESET)}function GYe(e,t){t.tagID===D.HTML?_a(e,t):j_(e,t)}function j_(e,t){e.insertionMode=Se.IN_BODY,WC(e,t)}function WYe(e,t){switch(t.tagID){case D.HTML:{_a(e,t);break}case D.NOFRAMES:{Ru(e,t);break}}}function YYe(e,t){t.chars=bo,e._insertCharacters(t)}function KYe(e,t){e._insertCharacters(t),e.framesetOk=!1}function mse(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==vt.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function ZYe(e,t){if(dWe(t))mse(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===vt.MATHML?Xre(t):r===vt.SVG&&(fWe(t),Qre(t)),MM(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function JYe(e,t){if(t.tagID===D.P||t.tagID===D.BR){mse(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===vt.HTML){e._endTagOutsideForeignContent(t);break}const s=e.treeAdapter.getTagName(r);if(s.toLowerCase()===t.tagName){t.tagName=s,e.openElements.shortenToLength(n);break}}}qe.AREA,qe.BASE,qe.BASEFONT,qe.BGSOUND,qe.BR,qe.COL,qe.EMBED,qe.FRAME,qe.HR,qe.IMG,qe.INPUT,qe.KEYGEN,qe.LINK,qe.META,qe.PARAM,qe.SOURCE,qe.TRACK,qe.WBR;const JC=gse("end"),Md=gse("start");function gse(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function XYe(e){const t=Md(e),n=JC(e);if(t&&n)return{start:t,end:n}}const QYe=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,eKe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),yU={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function bse(e,t){const n=uKe(e),r=W7("type",{handlers:{root:tKe,element:nKe,text:rKe,comment:vse,doctype:sKe,raw:iKe},unknown:aKe}),s={parser:n?new mU(yU):mU.getFragmentParser(void 0,yU),handle(a){r(a,s)},stitches:!1,options:t||{}};r(e,s),Fb(s,Md());const o=n?s.parser.document:s.parser.getFragment(),i=tGe(o,{file:s.options.file});return s.stitches&&lb(i,"comment",function(a,l,c){const u=a;if(u.value.stitch&&c&&l!==void 0){const f=c.children;return f[l]=u.value.stitch,l}}),i.type==="root"&&i.children.length===1&&i.children[0].type===e.type?i.children[0]:i}function yse(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function tKe(e,t){yse(e.children,t)}function nKe(e,t){lKe(e,t),yse(e.children,t),cKe(e,t)}function rKe(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:Ar.CHARACTER,chars:e.value,location:qw(e)};Fb(t,Md(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function sKe(e,t){const n={type:Ar.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:qw(e)};Fb(t,Md(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function oKe(e,t){t.stitches=!0;const n=dKe(e);if("children"in e&&"children"in n){const r=bse({type:"root",children:e.children},t.options);n.children=r.children}vse({type:"comment",value:{stitch:n}},t)}function vse(e,t){const n=e.value,r={type:Ar.COMMENT,data:n,location:qw(e)};Fb(t,Md(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function iKe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,xse(t,Md(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(QYe,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function aKe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))oKe(n,t);else{let r="";throw eKe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Fb(e,t){xse(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ni.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function xse(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function lKe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ni.PLAINTEXT)return;Fb(t,Md(e));const r=t.parser.openElements.current;let s="namespaceURI"in r?r.namespaceURI:bd.html;s===bd.html&&n==="svg"&&(s=bd.svg);const o=gGe({...e,children:[]},{space:s===bd.svg?"svg":"html"}),i={type:Ar.START_TAG,tagName:n,tagID:$b(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:qw(e)};t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function cKe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Vte.includes(n)||t.parser.tokenizer.state===ni.PLAINTEXT)return;Fb(t,JC(e));const r={type:Ar.END_TAG,tagName:n,tagID:$b(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:qw(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ni.RCDATA||t.parser.tokenizer.state===ni.RAWTEXT||t.parser.tokenizer.state===ni.SCRIPT_DATA)&&(t.parser.tokenizer.state=ni.DATA)}function uKe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function qw(e){const t=Md(e)||{line:void 0,column:void 0,offset:void 0},n=JC(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function dKe(e){return"children"in e?ub({...e,children:[]}):ub(e)}function fKe(e){return function(t,n){return bse(t,{...e,file:n})}}const Lf={eof:null,asterisk:42,underscore:95,tilde:126},fb={attentionSideAfter:2,characterGroupPunctuation:2,characterGroupWhitespace:1},id={data:"data",characterEscape:"characterEscape",emphasis:"emphasis",emphasisSequence:"emphasisSequence",emphasisText:"emphasisText",strong:"strong",strongSequence:"strongSequence",strongText:"strongText"},La=J0(/[A-Za-z]/),xa=J0(/[\dA-Za-z]/),hKe=J0(/[#-'*+\--9=?A-Z^-~]/);function t4(e){return e!==null&&(e<32||e===127)}const AI=J0(/\d/),pKe=J0(/[\dA-Fa-f]/),mKe=J0(/[!-/:-@[-`{-~]/);function Cn(e){return e!==null&&e<-2}function Fs(e){return e!==null&&(e<0||e===32)}function Pr(e){return e===-2||e===-1||e===32}const XC=J0(new RegExp("\\p{P}|\\p{S}","u")),Em=J0(/\s/);function J0(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function gKe(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function bKe(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function yKe(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9776&&e<=9783||e>=9800&&e<=9811||e===9855||e>=9866&&e<=9871||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e>=94192&&e<=94198||e>=94208&&e<=101589||e>=101631&&e<=101662||e>=101760&&e<=101874||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128728||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129674||e>=129678&&e<=129734||e===129736||e>=129741&&e<=129756||e>=129759&&e<=129770||e>=129775&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function vKe(e){return gKe(e)?"ambiguous":bKe(e)?"fullwidth":e===8361||e>=65377&&e<=65470||e>=65474&&e<=65479||e>=65482&&e<=65487||e>=65490&&e<=65495||e>=65498&&e<=65500||e>=65512&&e<=65518?"halfwidth":e>=32&&e<=126||e===162||e===163||e===165||e===166||e===172||e===175||e>=10214&&e<=10221||e===10629||e===10630?"narrow":yKe(e)?"wide":"neutral"}function xKe(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function wKe(e){return xKe(e),vKe(e)}var EKe=Object.defineProperty,_Ke=(e,t,n)=>t in e?EKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SKe=(e,t,n)=>_Ke(e,t+"",n);function TKe(e){return new RegExp("^\\p{Emoji_Presentation}","u").test(String.fromCodePoint(e))}function CKe(e){if(!e||e<4352)return!1;switch(wKe(e)){case"fullwidth":case"halfwidth":return!0;case"wide":return!TKe(e);case"narrow":return!1;case"ambiguous":return 917760<=e&&e<=917999?null:!1;case"neutral":return new RegExp("^\\p{sc=Hangul}","u").test(String.fromCodePoint(e))}}function kKe(e,t){return t!==65025||!e||e<8216?!1:e===8216||e===8217||e===8220||e===8221}function AKe(e){return e!==null&&e>=65024&&e<=65038}var NKe=wse(new RegExp("\\p{P}|\\p{S}","u")),IKe=wse(/\s/);function wse(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCodePoint(n))}}var Xl;(e=>{e.spaceOrPunctuation=3,e.cjk=4096,e.cjkPunctuation=4098,e.ivs=8192,e.cjkOrIvs=12288,e.nonEmojiGeneralUseVS=16384,e.variationSelector=24576,e.ivsToCjkRightShift=1})(Xl||(Xl={}));function L1(e){if(e===Lf.eof||Fs(e)||IKe(e))return fb.characterGroupWhitespace;let t=0;if(e>=4352){if(AKe(e))return Xl.nonEmojiGeneralUseVS;switch(CKe(e)){case null:return Xl.ivs;case!0:t|=Xl.cjk;break}}return NKe(e)&&(t|=fb.characterGroupPunctuation),t}function Ese(e,t,n){if(!DKe(e))return e;const r=t(),s=L1(r);return!r||Jx(s)?e:kKe(r,n)?Xl.cjkPunctuation:RKe(s)}function RKe(e){return e&~Xl.ivs}function Jx(e){return!!(e&fb.characterGroupWhitespace)}function n4(e){return(e&Xl.cjkPunctuation)===fb.characterGroupPunctuation}function NI(e){return!!(e&Xl.cjk)}function MKe(e){return e===Xl.ivs}function OKe(e){return!!(e&Xl.cjkOrIvs)}function DKe(e){return e===Xl.nonEmojiGeneralUseVS}function vU(e){return!!(e&Xl.spaceOrPunctuation)}function _se(e){return!!(e&&e>=55296&&e<=56319)}function Sse(e){return!!(e&&e>=56320&&e<=57343)}function Tse(e,t,n){if(t._bufferIndex<2)return e;const s=n({start:{...t,_bufferIndex:t._bufferIndex-2},end:t}).codePointAt(0);return s&&s>=65536?s:e}function PKe(e,t,n){const r=e>=65536?2:1;if(t._bufferIndex<1+r)return null;const s=t._bufferIndex-r-2,o=n({start:{...t,_bufferIndex:s>=0?s:0},end:{...t,_bufferIndex:t._bufferIndex-r}}),i=o.charCodeAt(o.length-1);if(Number.isNaN(i))return null;if(o.length<2||i<56320||57343<i)return i;const a=o.codePointAt(0);return a&&a>=65536?a:i}var Cse=class{constructor(e,t,n){this.previousCode=e,this.nowPoint=t,this.sliceSerialize=n,SKe(this,"cachedValue")}value(){return this.cachedValue===void 0&&(this.cachedValue=PKe(this.previousCode,this.nowPoint,this.sliceSerialize)),this.cachedValue}};function kse(e,t,n){const r=n({start:t,end:{...t,_bufferIndex:t._bufferIndex+2}}).codePointAt(0);return r&&r>=65536?r:e}function ca(e,t,n,r){const s=e.length;let o=0,i;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);o<r.length;)i=r.slice(o,o+1e4),i.unshift(t,0),e.splice(...i),o+=1e4,t+=1e4}function aa(e,t){return e.length>0?(ca(e,e.length,0,t),e):t}function Bb(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const o=e[s].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}var gA={name:"attention",resolveAll:LKe,tokenize:$Ke};function LKe(e,t){let n=-1,r,s,o,i,a,l,c,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},m={...e[n][1].start};xU(f,-l),xU(m,l),i={type:l>1?id.strongSequence:id.emphasisSequence,start:f,end:{...e[r][1].end}},a={type:l>1?id.strongSequence:id.emphasisSequence,start:{...e[n][1].start},end:m},o={type:l>1?id.strongText:id.emphasisText,start:{...e[r][1].end},end:{...e[n][1].start}},s={type:l>1?id.strong:id.emphasis,start:{...i.start},end:{...a.end}},e[r][1].end={...i.start},e[n][1].start={...a.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=aa(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=aa(c,[["enter",s,t],["enter",i,t],["exit",i,t],["enter",o,t]]),t.parser.constructs.insideSpan.null,c=aa(c,Bb(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=aa(c,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,c=aa(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,ca(e,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function $Ke(e,t){const n=this.parser.constructs.attentionMarkers.null,{now:r,sliceSerialize:s,previous:o}=this,i=Sse(o)?Tse(o,r(),s):o,a=L1(i),l=new Cse(i,r(),s),c=Ese(a,l.value.bind(l),i);let u;return f;function f(g){return u=g,e.enter("attentionSequence"),m(g)}function m(g){if(g===u)return e.consume(g),m;const y=e.exit("attentionSequence"),v=_se(g)?kse(g,r(),s):g,w=L1(v),_=n4(c),S=_||Jx(c),k=n4(w),R=k||Jx(w),O=OKe(c),M=!R||k&&(S||O)||n.includes(g),P=!S||_&&(R||NI(w))||n.includes(i);return y._open=!!(u===Lf.asterisk?M:M&&(vU(c)||!P)),y._close=!!(u===Lf.asterisk?P:P&&(vU(w)||!M)),t(g)}}function xU(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}function FKe(){return{text:{[Lf.asterisk]:gA,[Lf.underscore]:gA},insideSpan:{null:[gA]}}}function BKe(){const e=this.data();(e.micromarkExtensions||(e.micromarkExtensions=[])).push(FKe())}function zKe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:s};return n==null&&(n=!0),{text:{[Lf.tilde]:r},insideSpan:{null:[r]},attentionMarkers:{null:[Lf.tilde]}};function s(i,a){let l=-1;for(;++l<i.length;)if(i[l][0]==="enter"&&i[l][1].type==="strikethroughSequenceTemporary"&&i[l][1]._close){let c=l;for(;c--;)if(i[c][0]==="exit"&&i[c][1].type==="strikethroughSequenceTemporary"&&i[c][1]._open&&i[l][1].end.offset-i[l][1].start.offset===i[c][1].end.offset-i[c][1].start.offset){i[l][1].type="strikethroughSequence",i[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},i[c][1].start),end:Object.assign({},i[l][1].end)},f={type:"strikethroughText",start:Object.assign({},i[c][1].end),end:Object.assign({},i[l][1].start)},m=[["enter",u,a],["enter",i[c][1],a],["exit",i[c][1],a],["enter",f,a]],g=a.parser.constructs.insideSpan.null;g&&ca(m,m.length,0,Bb(g,i.slice(c+1,l),a)),ca(m,m.length,0,[["exit",f,a],["enter",i[l][1],a],["exit",i[l][1],a],["exit",u,a]]),ca(i,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<i.length;)i[l][1].type==="strikethroughSequenceTemporary"&&(i[l][1].type=id.data);return i}function o(i,a,l){const{now:c,sliceSerialize:u,previous:f}=this,m=Sse(f)?Tse(f,c(),u):f,g=L1(m),y=new Cse(m,c(),u),v=Ese(g,y.value.bind(y),m),w=this.events;let _=0;return S;function S(R){return m===Lf.tilde&&w[w.length-1][1].type!==id.characterEscape?l(R):(i.enter("strikethroughSequenceTemporary"),k(R))}function k(R){const O=L1(m);if(R===Lf.tilde)return _>1?l(R):(i.consume(R),_++,k);if(_<2&&!n)return l(R);const M=i.exit("strikethroughSequenceTemporary"),P=_se(R)?kse(R,c(),u):R,j=L1(P),U=n4(v)||Jx(v),H=n4(j)||Jx(j),F=NI(v)||MKe(O);return M._open=!H||j===fb.attentionSideAfter&&(U||F),M._close=!U||O===fb.attentionSideAfter&&(H||NI(j)),a(R)}}}function jKe(e){const t=this.data();(t.micromarkExtensions||(t.micromarkExtensions=[])).push(zKe(e))}function UKe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function HKe(e,t,n){const s=Bw((n||{}).ignore||[]),o=VKe(t);let i=-1;for(;++i<o.length;)rM(e,"text",a);function a(c,u){let f=-1,m;for(;++f<u.length;){const g=u[f],y=m?m.children:void 0;if(s(g,y?y.indexOf(g):void 0,m))return;m=g}if(m)return l(c,u)}function l(c,u){const f=u[u.length-1],m=o[i][0],g=o[i][1];let y=0;const w=f.children.indexOf(c);let _=!1,S=[];m.lastIndex=0;let k=m.exec(c.value);for(;k;){const R=k.index,O={index:k.index,input:k.input,stack:[...u,c]};let M=g(...k,O);if(typeof M=="string"&&(M=M.length>0?{type:"text",value:M}:void 0),M===!1?m.lastIndex=R+1:(y!==R&&S.push({type:"text",value:c.value.slice(y,R)}),Array.isArray(M)?S.push(...M):M&&S.push(M),y=R+k[0].length,_=!0),!m.global)break;k=m.exec(c.value)}return _?(y<c.value.length&&S.push({type:"text",value:c.value.slice(y)}),f.children.splice(w,1,...S)):S=[c],w+S.length}}function VKe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const s=n[r];t.push([qKe(s[0]),GKe(s[1])])}return t}function qKe(e){return typeof e=="string"?new RegExp(UKe(e),"g"):e}function GKe(e){return typeof e=="function"?e:function(){return e}}const bA="phrasing",yA=["autolink","link","image","label"];function WKe(){return{transforms:[eZe],enter:{literalAutolink:KKe,literalAutolinkEmail:vA,literalAutolinkHttp:vA,literalAutolinkWww:vA},exit:{literalAutolink:QKe,literalAutolinkEmail:XKe,literalAutolinkHttp:ZKe,literalAutolinkWww:JKe}}}function YKe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:bA,notInConstruct:yA},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:bA,notInConstruct:yA},{character:":",before:"[ps]",after:"\\/",inConstruct:bA,notInConstruct:yA}]}}function KKe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function vA(e){this.config.enter.autolinkProtocol.call(this,e)}function ZKe(e){this.config.exit.autolinkProtocol.call(this,e)}function JKe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function XKe(e){this.config.exit.autolinkEmail.call(this,e)}function QKe(e){this.exit(e)}function eZe(e){HKe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,tZe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),nZe]],{ignore:["link","linkReference"]})}function tZe(e,t,n,r,s){let o="";if(!Ase(s)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!rZe(n)))return!1;const i=sZe(n+r);if(!i[0])return!1;const a={type:"link",title:null,url:o+t+i[0],children:[{type:"text",value:t+i[0]}]};return i[1]?[a,{type:"text",value:i[1]}]:a}function nZe(e,t,n,r){return!Ase(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function rZe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function sZe(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=FT(e,"(");let o=FT(e,")");for(;r!==-1&&s>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function Ase(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Em(n)||XC(n))&&(!t||n!==47)}function vu(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}Nse.peek=hZe;function oZe(){this.buffer()}function iZe(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function aZe(){this.buffer()}function lZe(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function cZe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=vu(this.sliceSerialize(e)).toLowerCase(),n.label=t}function uZe(e){this.exit(e)}function dZe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=vu(this.sliceSerialize(e)).toLowerCase(),n.label=t}function fZe(e){this.exit(e)}function hZe(){return"["}function Nse(e,t,n,r){const s=n.createTracker(r);let o=s.move("[^");const i=n.enter("footnoteReference"),a=n.enter("reference");return o+=s.move(n.safe(n.associationId(e),{after:"]",before:o})),a(),i(),o+=s.move("]"),o}function pZe(){return{enter:{gfmFootnoteCallString:oZe,gfmFootnoteCall:iZe,gfmFootnoteDefinitionLabelString:aZe,gfmFootnoteDefinition:lZe},exit:{gfmFootnoteCallString:cZe,gfmFootnoteCall:uZe,gfmFootnoteDefinitionLabelString:dZe,gfmFootnoteDefinition:fZe}}}function mZe(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Nse},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,o,i){const a=o.createTracker(i);let l=a.move("[^");const c=o.enter("footnoteDefinition"),u=o.enter("label");return l+=a.move(o.safe(o.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,a.current()),t?Ise:gZe))),c(),l}}function gZe(e,t,n){return t===0?e:Ise(e,t,n)}function Ise(e,t,n){return(n?"":"    ")+e}const bZe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Rse.peek=EZe;function yZe(){return{canContainEols:["delete"],enter:{strikethrough:xZe},exit:{strikethrough:wZe}}}function vZe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:bZe}],handlers:{delete:Rse}}}function xZe(e){this.enter({type:"delete",children:[]},e)}function wZe(e){this.exit(e)}function Rse(e,t,n,r){const s=n.createTracker(r),o=n.enter("strikethrough");let i=s.move("~~");return i+=n.containerPhrasing(e,{...s.current(),before:i,after:"~"}),i+=s.move("~~"),o(),i}function EZe(){return"~"}function _Ze(e){return e.length}function SZe(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||_Ze,o=[],i=[],a=[],l=[];let c=0,u=-1;for(;++u<e.length;){const v=[],w=[];let _=-1;for(e[u].length>c&&(c=e[u].length);++_<e[u].length;){const S=TZe(e[u][_]);if(n.alignDelimiters!==!1){const k=s(S);w[_]=k,(l[_]===void 0||k>l[_])&&(l[_]=k)}v.push(S)}i[u]=v,a[u]=w}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<c;)o[f]=wU(r[f]);else{const v=wU(r);for(;++f<c;)o[f]=v}f=-1;const m=[],g=[];for(;++f<c;){const v=o[f];let w="",_="";v===99?(w=":",_=":"):v===108?w=":":v===114&&(_=":");let S=n.alignDelimiters===!1?1:Math.max(1,l[f]-w.length-_.length);const k=w+"-".repeat(S)+_;n.alignDelimiters!==!1&&(S=w.length+S+_.length,S>l[f]&&(l[f]=S),g[f]=S),m[f]=k}i.splice(1,0,m),a.splice(1,0,g),u=-1;const y=[];for(;++u<i.length;){const v=i[u],w=a[u];f=-1;const _=[];for(;++f<c;){const S=v[f]||"";let k="",R="";if(n.alignDelimiters!==!1){const O=l[f]-(w[f]||0),M=o[f];M===114?k=" ".repeat(O):M===99?O%2?(k=" ".repeat(O/2+.5),R=" ".repeat(O/2-.5)):(k=" ".repeat(O/2),R=k):R=" ".repeat(O)}n.delimiterStart!==!1&&!f&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&S==="")&&(n.delimiterStart!==!1||f)&&_.push(" "),n.alignDelimiters!==!1&&_.push(k),_.push(S),n.alignDelimiters!==!1&&_.push(R),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||f!==c-1)&&_.push("|")}y.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return y.join(`
`)}function TZe(e){return e==null?"":String(e)}function wU(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function CZe(e,t,n,r){const s=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const i=n.indentLines(n.containerFlow(e,o.current()),kZe);return s(),i}function kZe(e,t,n){return">"+(n?"":" ")+e}function AZe(e,t){return EU(e,t.inConstruct,!0)&&!EU(e,t.notInConstruct,!1)}function EU(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function _U(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&AZe(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Mse(e,t){const n=String(e);let r=n.indexOf(t),s=r,o=0,i=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++o>i&&(i=o):o=1,s=r+t.length,r=n.indexOf(t,s);return i}function NZe(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function IZe(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function RZe(e,t,n,r){const s=IZe(n),o=e.value||"",i=s==="`"?"GraveAccent":"Tilde";if(NZe(e,n)){const f=n.enter("codeIndented"),m=n.indentLines(o,MZe);return f(),m}const a=n.createTracker(r),l=s.repeat(Math.max(Mse(o,s)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(e.lang){const f=n.enter(`codeFencedLang${i}`);u+=a.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...a.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${i}`);u+=a.move(" "),u+=a.move(n.safe(e.meta,{before:u,after:`
`,encode:["`"],...a.current()})),f()}return u+=a.move(`
`),o&&(u+=a.move(o+`
`)),u+=a.move(l),c(),u}function MZe(e,t,n){return(n?"":"    ")+e}function LM(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function OZe(e,t,n,r){const s=LM(n),o=s==='"'?"Quote":"Apostrophe",i=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":`
`,...l.current()}))),a(),e.title&&(a=n.enter(`title${o}`),c+=l.move(" "+s),c+=l.move(n.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),i(),c}function DZe(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Xx(e){return"&#x"+e.toString(16).toUpperCase()+";"}function hb(e){if(e===null||Fs(e)||Em(e))return 1;if(XC(e))return 2}function r4(e,t,n){const r=hb(e),s=hb(t);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Ose.peek=PZe;function Ose(e,t,n,r){const s=DZe(n),o=n.enter("emphasis"),i=n.createTracker(r),a=i.move(s);let l=i.move(n.containerPhrasing(e,{after:s,before:a,...i.current()}));const c=l.charCodeAt(0),u=r4(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=Xx(c)+l.slice(1));const f=l.charCodeAt(l.length-1),m=r4(r.after.charCodeAt(0),f,s);m.inside&&(l=l.slice(0,-1)+Xx(f));const g=i.move(s);return o(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function PZe(e,t,n){return n.options.emphasis||"*"}const LZe={};function $M(e,t){const n=LZe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Dse(e,r,s)}function Dse(e,t,n){if($Ze(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return SU(e.children,t,n)}return Array.isArray(e)?SU(e,t,n):""}function SU(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Dse(e[s],t,n);return r.join("")}function $Ze(e){return!!(e&&typeof e=="object")}function FZe(e,t){let n=!1;return lb(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,lI}),!!((!e.depth||e.depth<3)&&$M(e)&&(t.options.setext||n))}function BZe(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(FZe(e,n)){const u=n.enter("headingSetext"),f=n.enter("phrasing"),m=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return f(),u(),m+`
`+(s===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const i="#".repeat(s),a=n.enter("headingAtx"),l=n.enter("phrasing");o.move(i+" ");let c=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(c)&&(c=Xx(c.charCodeAt(0))+c.slice(1)),c=c?i+" "+c:i,n.options.closeAtx&&(c+=" "+i),l(),a(),c}Pse.peek=zZe;function Pse(e){return e.value||""}function zZe(){return"<"}Lse.peek=jZe;function Lse(e,t,n,r){const s=LM(n),o=s==='"'?"Quote":"Apostrophe",i=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=n.enter(`title${o}`),c+=l.move(" "+s),c+=l.move(n.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),c+=l.move(")"),i(),c}function jZe(){return"!"}$se.peek=UZe;function $se(e,t,n,r){const s=e.referenceType,o=n.enter("imageReference");let i=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),i();const u=n.stack;n.stack=[],i=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return i(),n.stack=u,o(),s==="full"||!c||c!==f?l+=a.move(f+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function UZe(){return"!"}Fse.peek=HZe;function Fse(e,t,n){let r=e.value||"",s="`",o=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const i=n.unsafe[o],a=n.compilePattern(i);let l;if(i.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return s+r+s}function HZe(){return"`"}function Bse(e,t){const n=$M(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}zse.peek=VZe;function zse(e,t,n,r){const s=LM(n),o=s==='"'?"Quote":"Apostrophe",i=n.createTracker(r);let a,l;if(Bse(e,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let f=i.move("<");return f+=i.move(n.containerPhrasing(e,{before:f,after:">",...i.current()})),f+=i.move(">"),a(),n.stack=u,f}a=n.enter("link"),l=n.enter("label");let c=i.move("[");return c+=i.move(n.containerPhrasing(e,{before:c,after:"](",...i.current()})),c+=i.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=i.move("<"),c+=i.move(n.safe(e.url,{before:c,after:">",...i.current()})),c+=i.move(">")):(l=n.enter("destinationRaw"),c+=i.move(n.safe(e.url,{before:c,after:e.title?" ":")",...i.current()}))),l(),e.title&&(l=n.enter(`title${o}`),c+=i.move(" "+s),c+=i.move(n.safe(e.title,{before:c,after:s,...i.current()})),c+=i.move(s),l()),c+=i.move(")"),a(),c}function VZe(e,t,n){return Bse(e,n)?"<":"["}jse.peek=qZe;function jse(e,t,n,r){const s=e.referenceType,o=n.enter("linkReference");let i=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),i();const u=n.stack;n.stack=[],i=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return i(),n.stack=u,o(),s==="full"||!c||c!==f?l+=a.move(f+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function qZe(){return"["}function FM(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function GZe(e){const t=FM(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function WZe(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Use(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function YZe(e,t,n,r){const s=n.enter("list"),o=n.bulletCurrent;let i=e.ordered?WZe(n):FM(n);const a=e.ordered?i==="."?")":".":GZe(n);let l=t&&n.bulletLastUsed?i===n.bulletLastUsed:!1;if(!e.ordered){const u=e.children?e.children[0]:void 0;if((i==="*"||i==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),Use(n)===i&&u){let f=-1;for(;++f<e.children.length;){const m=e.children[f];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(i=a),n.bulletCurrent=i;const c=n.containerFlow(e,r);return n.bulletLastUsed=i,n.bulletCurrent=o,s(),c}function KZe(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function ZZe(e,t,n,r){const s=KZe(n);let o=n.bulletCurrent||FM(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let i=o.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(i=Math.ceil(i/4)*4);const a=n.createTracker(r);a.move(o+" ".repeat(i-o.length)),a.shift(i);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,a.current()),u);return l(),c;function u(f,m,g){return m?(g?"":" ".repeat(i))+f:(g?o:o+" ".repeat(i-o.length))+f}}function JZe(e,t,n,r){const s=n.enter("paragraph"),o=n.enter("phrasing"),i=n.containerPhrasing(e,r);return o(),s(),i}const XZe=Bw(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function QZe(e,t,n,r){return(e.children.some(function(i){return XZe(i)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function eJe(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Hse.peek=tJe;function Hse(e,t,n,r){const s=eJe(n),o=n.enter("strong"),i=n.createTracker(r),a=i.move(s+s);let l=i.move(n.containerPhrasing(e,{after:s,before:a,...i.current()}));const c=l.charCodeAt(0),u=r4(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=Xx(c)+l.slice(1));const f=l.charCodeAt(l.length-1),m=r4(r.after.charCodeAt(0),f,s);m.inside&&(l=l.slice(0,-1)+Xx(f));const g=i.move(s+s);return o(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function tJe(e,t,n){return n.options.strong||"*"}function nJe(e,t,n,r){return n.safe(e.value,r)}function rJe(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function sJe(e,t,n){const r=(Use(n)+(n.options.ruleSpaces?" ":"")).repeat(rJe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Vse={blockquote:CZe,break:_U,code:RZe,definition:OZe,emphasis:Ose,hardBreak:_U,heading:BZe,html:Pse,image:Lse,imageReference:$se,inlineCode:Fse,link:zse,linkReference:jse,list:YZe,listItem:ZZe,paragraph:JZe,root:QZe,strong:Hse,text:nJe,thematicBreak:sJe},TU=document.createElement("i");function BM(e){const t="&"+e+";";TU.innerHTML=t;const n=TU.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function qse(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const oJe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function iJe(e){return e.replace(oJe,aJe)}function aJe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),o=s===120||s===88;return qse(n.slice(o?2:1),o?16:10)}return BM(n)||e}function lJe(){return{enter:{table:cJe,tableData:CU,tableHeader:CU,tableRow:dJe},exit:{codeText:fJe,table:uJe,tableData:xA,tableHeader:xA,tableRow:xA}}}function cJe(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function uJe(e){this.exit(e),this.data.inTable=void 0}function dJe(e){this.enter({type:"tableRow",children:[]},e)}function xA(e){this.exit(e)}function CU(e){this.enter({type:"tableCell",children:[]},e)}function fJe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,hJe));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function hJe(e,t){return t==="|"?t:e}function pJe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:i,tableCell:l,tableRow:a}};function i(g,y,v,w){return c(u(g,v,w),g.align)}function a(g,y,v,w){const _=f(g,v,w),S=c([_]);return S.slice(0,S.indexOf(`
`))}function l(g,y,v,w){const _=v.enter("tableCell"),S=v.enter("phrasing"),k=v.containerPhrasing(g,{...w,before:o,after:o});return S(),_(),k}function c(g,y){return SZe(g,{align:y,alignDelimiters:r,padding:n,stringLength:s})}function u(g,y,v){const w=g.children;let _=-1;const S=[],k=y.enter("table");for(;++_<w.length;)S[_]=f(w[_],y,v);return k(),S}function f(g,y,v){const w=g.children;let _=-1;const S=[],k=y.enter("tableRow");for(;++_<w.length;)S[_]=l(w[_],g,y,v);return k(),S}function m(g,y,v){let w=Vse.inlineCode(g,y,v);return v.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function mJe(){return{exit:{taskListCheckValueChecked:kU,taskListCheckValueUnchecked:kU,paragraph:bJe}}}function gJe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:yJe}}}function kU(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function bJe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=t.children;let o=-1,i;for(;++o<s.length;){const a=s[o];if(a.type==="paragraph"){i=a;break}}i===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function yJe(e,t,n,r){const s=e.children[0],o=typeof e.checked=="boolean"&&s&&s.type==="paragraph",i="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);o&&a.move(i);let l=Vse.listItem(e,t,n,{...r,...a.current()});return o&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+i}}function vJe(){return[WKe(),pZe(),yZe(),lJe(),mJe()]}function xJe(e){return{extensions:[YKe(),mZe(e),vZe(),pJe(e),gJe()]}}const AU={}.hasOwnProperty;function Gse(e){const t={};let n=-1;for(;++n<e.length;)wJe(t,e[n]);return t}function wJe(e,t){let n;for(n in t){const s=(AU.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let i;if(o)for(i in o){AU.call(s,i)||(s[i]=[]);const a=o[i];EJe(s[i],Array.isArray(a)?a:a?[a]:[])}}}function EJe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ca(e,0,0,r)}const _Je={tokenize:NJe,partial:!0},Wse={tokenize:IJe,partial:!0},Yse={tokenize:RJe,partial:!0},Kse={tokenize:MJe,partial:!0},SJe={tokenize:OJe,partial:!0},Zse={name:"wwwAutolink",tokenize:kJe,previous:Xse},Jse={name:"protocolAutolink",tokenize:AJe,previous:Qse},ih={name:"emailAutolink",tokenize:CJe,previous:eoe},Od={};function TJe(){return{text:Od}}let jp=48;for(;jp<123;)Od[jp]=ih,jp++,jp===58?jp=65:jp===91&&(jp=97);Od[43]=ih;Od[45]=ih;Od[46]=ih;Od[95]=ih;Od[72]=[ih,Jse];Od[104]=[ih,Jse];Od[87]=[ih,Zse];Od[119]=[ih,Zse];function CJe(e,t,n){const r=this;let s,o;return i;function i(f){return!II(f)||!eoe.call(r,r.previous)||zM(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(f))}function a(f){return II(f)?(e.consume(f),a):f===64?(e.consume(f),l):n(f)}function l(f){return f===46?e.check(SJe,u,c)(f):f===45||f===95||xa(f)?(o=!0,e.consume(f),l):u(f)}function c(f){return e.consume(f),s=!0,l}function u(f){return o&&s&&La(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function kJe(e,t,n){const r=this;return s;function s(i){return i!==87&&i!==119||!Xse.call(r,r.previous)||zM(r.events)?n(i):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(_Je,e.attempt(Wse,e.attempt(Yse,o),n),n)(i))}function o(i){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(i)}}function AJe(e,t,n){const r=this;let s="",o=!1;return i;function i(f){return(f===72||f===104)&&Qse.call(r,r.previous)&&!zM(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(f),e.consume(f),a):n(f)}function a(f){if(La(f)&&s.length<5)return s+=String.fromCodePoint(f),e.consume(f),a;if(f===58){const m=s.toLowerCase();if(m==="http"||m==="https")return e.consume(f),l}return n(f)}function l(f){return f===47?(e.consume(f),o?c:(o=!0,l)):n(f)}function c(f){return f===null||t4(f)||Fs(f)||Em(f)||XC(f)?n(f):e.attempt(Wse,e.attempt(Yse,u),n)(f)}function u(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function NJe(e,t,n){let r=0;return s;function s(i){return(i===87||i===119)&&r<3?(r++,e.consume(i),s):i===46&&r===3?(e.consume(i),o):n(i)}function o(i){return i===null?n(i):t(i)}}function IJe(e,t,n){let r,s,o;return i;function i(c){return c===46||c===95?e.check(Kse,l,a)(c):c===null||Fs(c)||Em(c)||c!==45&&XC(c)?l(c):(o=!0,e.consume(c),i)}function a(c){return c===95?r=!0:(s=r,r=void 0),e.consume(c),i}function l(c){return s||r||!o?n(c):t(c)}}function RJe(e,t){let n=0,r=0;return s;function s(i){return i===40?(n++,e.consume(i),s):i===41&&r<n?o(i):i===33||i===34||i===38||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===60||i===63||i===93||i===95||i===126?e.check(Kse,t,o)(i):i===null||Fs(i)||Em(i)?t(i):(e.consume(i),s)}function o(i){return i===41&&r++,e.consume(i),s}}function MJe(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),o):a===93?(e.consume(a),s):a===60||a===null||Fs(a)||Em(a)?t(a):n(a)}function s(a){return a===null||a===40||a===91||Fs(a)||Em(a)?t(a):r(a)}function o(a){return La(a)?i(a):n(a)}function i(a){return a===59?(e.consume(a),r):La(a)?(e.consume(a),i):n(a)}}function OJe(e,t,n){return r;function r(o){return e.consume(o),s}function s(o){return xa(o)?n(o):t(o)}}function Xse(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Fs(e)}function Qse(e){return!La(e)}function eoe(e){return!(e===47||II(e))}function II(e){return e===43||e===45||e===46||e===95||xa(e)}function zM(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function zb(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const o=e.charCodeAt(n);let i="";if(o===37&&xa(e.charCodeAt(n+1))&&xa(e.charCodeAt(n+2)))s=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(i=String.fromCharCode(o));else if(o>55295&&o<57344){const a=e.charCodeAt(n+1);o<56320&&a>56319&&a<57344?(i=String.fromCharCode(o,a),s=1):i=""}else i=String.fromCharCode(o);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+s+1,i=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}const RI={name:"attention",resolveAll:DJe,tokenize:PJe};function DJe(e,t){let n=-1,r,s,o,i,a,l,c,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},m={...e[n][1].start};NU(f,-l),NU(m,l),i={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},o={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:l>1?"strong":"emphasis",start:{...i.start},end:{...a.end}},e[r][1].end={...i.start},e[n][1].start={...a.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=aa(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=aa(c,[["enter",s,t],["enter",i,t],["exit",i,t],["enter",o,t]]),c=aa(c,Bb(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=aa(c,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,c=aa(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,ca(e,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function PJe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=hb(r);let o;return i;function i(l){return o=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===o)return e.consume(l),a;const c=e.exit("attentionSequence"),u=hb(l),f=!u||u===2&&s||n.includes(l),m=!s||s===2&&u||n.includes(r);return c._open=!!(o===42?f:f&&(s||!m)),c._close=!!(o===42?m:m&&(u||!f)),t(l)}}function NU(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const LJe={name:"autolink",tokenize:$Je};function $Je(e,t,n){let r=0;return s;function s(g){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(g){return La(g)?(e.consume(g),i):g===64?n(g):c(g)}function i(g){return g===43||g===45||g===46||xa(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(e.consume(g),r=0,l):(g===43||g===45||g===46||xa(g))&&r++<32?(e.consume(g),a):(r=0,c(g))}function l(g){return g===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):g===null||g===32||g===60||t4(g)?n(g):(e.consume(g),l)}function c(g){return g===64?(e.consume(g),u):hKe(g)?(e.consume(g),c):n(g)}function u(g){return xa(g)?f(g):n(g)}function f(g){return g===46?(e.consume(g),r=0,u):g===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):m(g)}function m(g){if((g===45||xa(g))&&r++<63){const y=g===45?m:f;return e.consume(g),y}return n(g)}}function Nr(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let o=0;return i;function i(l){return Pr(l)?(e.enter(n),a(l)):t(l)}function a(l){return Pr(l)&&o++<s?(e.consume(l),a):(e.exit(n),t(l))}}const Gw={partial:!0,tokenize:FJe};function FJe(e,t,n){return r;function r(o){return Pr(o)?Nr(e,s,"linePrefix")(o):s(o)}function s(o){return o===null||Cn(o)?t(o):n(o)}}const toe={continuation:{tokenize:zJe},exit:jJe,name:"blockQuote",tokenize:BJe};function BJe(e,t,n){const r=this;return s;function s(i){if(i===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(i),e.exit("blockQuoteMarker"),o}return n(i)}function o(i){return Pr(i)?(e.enter("blockQuotePrefixWhitespace"),e.consume(i),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(i))}}function zJe(e,t,n){const r=this;return s;function s(i){return Pr(i)?Nr(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i):o(i)}function o(i){return e.attempt(toe,t,n)(i)}}function jJe(e){e.exit("blockQuote")}const noe={name:"characterEscape",tokenize:UJe};function UJe(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),s}function s(o){return mKe(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const roe={name:"characterReference",tokenize:HJe};function HJe(e,t,n){const r=this;let s=0,o,i;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),l}function l(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),o=31,i=xa,u(f))}function c(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,i=pKe,u):(e.enter("characterReferenceValue"),o=7,i=AI,u(f))}function u(f){if(f===59&&s){const m=e.exit("characterReferenceValue");return i===xa&&!BM(r.sliceSerialize(m))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return i(f)&&s++<o?(e.consume(f),u):n(f)}}const IU={partial:!0,tokenize:qJe},RU={concrete:!0,name:"codeFenced",tokenize:VJe};function VJe(e,t,n){const r=this,s={partial:!0,tokenize:O};let o=0,i=0,a;return l;function l(M){return c(M)}function c(M){const P=r.events[r.events.length-1];return o=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,a=M,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(M)}function u(M){return M===a?(i++,e.consume(M),u):i<3?n(M):(e.exit("codeFencedFenceSequence"),Pr(M)?Nr(e,f,"whitespace")(M):f(M))}function f(M){return M===null||Cn(M)?(e.exit("codeFencedFence"),r.interrupt?t(M):e.check(IU,v,R)(M)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(M))}function m(M){return M===null||Cn(M)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(M)):Pr(M)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Nr(e,g,"whitespace")(M)):M===96&&M===a?n(M):(e.consume(M),m)}function g(M){return M===null||Cn(M)?f(M):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(M))}function y(M){return M===null||Cn(M)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(M)):M===96&&M===a?n(M):(e.consume(M),y)}function v(M){return e.attempt(s,R,w)(M)}function w(M){return e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),_}function _(M){return o>0&&Pr(M)?Nr(e,S,"linePrefix",o+1)(M):S(M)}function S(M){return M===null||Cn(M)?e.check(IU,v,R)(M):(e.enter("codeFlowValue"),k(M))}function k(M){return M===null||Cn(M)?(e.exit("codeFlowValue"),S(M)):(e.consume(M),k)}function R(M){return e.exit("codeFenced"),t(M)}function O(M,P,j){let q=0;return U;function U(X){return M.enter("lineEnding"),M.consume(X),M.exit("lineEnding"),z}function z(X){return M.enter("codeFencedFence"),Pr(X)?Nr(M,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):H(X)}function H(X){return X===a?(M.enter("codeFencedFenceSequence"),F(X)):j(X)}function F(X){return X===a?(q++,M.consume(X),F):q>=i?(M.exit("codeFencedFenceSequence"),Pr(X)?Nr(M,W,"whitespace")(X):W(X)):j(X)}function W(X){return X===null||Cn(X)?(M.exit("codeFencedFence"),P(X)):j(X)}}}function qJe(e,t,n){const r=this;return s;function s(i){return i===null?n(i):(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),o)}function o(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}const wA={name:"codeIndented",tokenize:WJe},GJe={partial:!0,tokenize:YJe};function WJe(e,t,n){const r=this;return s;function s(c){return e.enter("codeIndented"),Nr(e,o,"linePrefix",5)(c)}function o(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?i(c):n(c)}function i(c){return c===null?l(c):Cn(c)?e.attempt(GJe,i,l)(c):(e.enter("codeFlowValue"),a(c))}function a(c){return c===null||Cn(c)?(e.exit("codeFlowValue"),i(c)):(e.consume(c),a)}function l(c){return e.exit("codeIndented"),t(c)}}function YJe(e,t,n){const r=this;return s;function s(i){return r.parser.lazy[r.now().line]?n(i):Cn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),s):Nr(e,o,"linePrefix",5)(i)}function o(i){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):Cn(i)?s(i):n(i)}}const KJe={name:"codeText",previous:JJe,resolve:ZJe,tokenize:XJe};function ZJe(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function JJe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function XJe(e,t,n){let r=0,s,o;return i;function i(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),l):f===96?(o=e.enter("codeTextSequence"),s=0,u(f)):Cn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||Cn(f)?(e.exit("codeTextData"),l(f)):(e.consume(f),c)}function u(f){return f===96?(e.consume(f),s++,u):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(o.type="codeTextData",c(f))}}class QJe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&tv(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),tv(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),tv(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);tv(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);tv(this.left,n.reverse())}}}function tv(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function soe(e){const t={};let n=-1,r,s,o,i,a,l,c;const u=new QJe(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,o=0,o<l.length&&l[o][1].type==="lineEndingBlank"&&(o+=2),o<l.length&&l[o][1].type==="content"))for(;++o<l.length&&l[o][1].type!=="content";)l[o][1].type==="chunkText"&&(l[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,eXe(u,n)),n=t[n],c=!0);else if(r[1]._container){for(o=n,s=void 0;o--;)if(i=u.get(o),i[1].type==="lineEnding"||i[1].type==="lineEndingBlank")i[0]==="enter"&&(s&&(u.get(s)[1].type="lineEndingBlank"),i[1].type="lineEnding",s=o);else if(!(i[1].type==="linePrefix"||i[1].type==="listItemIndent"))break;s&&(r[1].end={...u.get(s)[1].start},a=u.slice(s,n),a.unshift(r),u.splice(s,n-s+1,a))}}return ca(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function eXe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const o=[];let i=n._tokenizer;i||(i=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const a=i.events,l=[],c={};let u,f,m=-1,g=n,y=0,v=0;const w=[v];for(;g;){for(;e.get(++s)[1]!==g;);o.push(s),g._tokenizer||(u=r.sliceStream(g),g.next||u.push(null),f&&i.defineSkip(g.start),g._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(u),g._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),f=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(v=m+1,w.push(v),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(i.events=[],g?(g._tokenizer=void 0,g.previous=void 0):w.pop(),m=w.length;m--;){const _=a.slice(w[m],w[m+1]),S=o.pop();l.push([S,S+_.length-1]),e.splice(S,2,_)}for(l.reverse(),m=-1;++m<l.length;)c[y+l[m][0]]=y+l[m][1],y+=l[m][1]-l[m][0]-1;return c}const tXe={resolve:rXe,tokenize:sXe},nXe={partial:!0,tokenize:oXe};function rXe(e){return soe(e),e}function sXe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(a)}function s(a){return a===null?o(a):Cn(a)?e.check(nXe,i,o)(a):(e.consume(a),s)}function o(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function i(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function oXe(e,t,n){const r=this;return s;function s(i){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Nr(e,o,"linePrefix")}function o(i){if(i===null||Cn(i))return n(i);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}function ooe(e,t,n,r,s,o,i,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return f;function f(_){return _===60?(e.enter(r),e.enter(s),e.enter(o),e.consume(_),e.exit(o),m):_===null||_===32||_===41||t4(_)?n(_):(e.enter(r),e.enter(i),e.enter(a),e.enter("chunkString",{contentType:"string"}),v(_))}function m(_){return _===62?(e.enter(o),e.consume(_),e.exit(o),e.exit(s),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),g(_))}function g(_){return _===62?(e.exit("chunkString"),e.exit(a),m(_)):_===null||_===60||Cn(_)?n(_):(e.consume(_),_===92?y:g)}function y(_){return _===60||_===62||_===92?(e.consume(_),g):g(_)}function v(_){return!u&&(_===null||_===41||Fs(_))?(e.exit("chunkString"),e.exit(a),e.exit(i),e.exit(r),t(_)):u<c&&_===40?(e.consume(_),u++,v):_===41?(e.consume(_),u--,v):_===null||_===32||_===40||t4(_)?n(_):(e.consume(_),_===92?w:v)}function w(_){return _===40||_===41||_===92?(e.consume(_),v):v(_)}}function ioe(e,t,n,r,s,o){const i=this;let a=0,l;return c;function c(g){return e.enter(r),e.enter(s),e.consume(g),e.exit(s),e.enter(o),u}function u(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in i.parser.constructs?n(g):g===93?(e.exit(o),e.enter(s),e.consume(g),e.exit(s),e.exit(r),t):Cn(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||g===91||g===93||Cn(g)||a++>999?(e.exit("chunkString"),u(g)):(e.consume(g),l||(l=!Pr(g)),g===92?m:f)}function m(g){return g===91||g===92||g===93?(e.consume(g),a++,f):f(g)}}function aoe(e,t,n,r,s,o){let i;return a;function a(m){return m===34||m===39||m===40?(e.enter(r),e.enter(s),e.consume(m),e.exit(s),i=m===40?41:m,l):n(m)}function l(m){return m===i?(e.enter(s),e.consume(m),e.exit(s),e.exit(r),t):(e.enter(o),c(m))}function c(m){return m===i?(e.exit(o),l(i)):m===null?n(m):Cn(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Nr(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===i||m===null||Cn(m)?(e.exit("chunkString"),c(m)):(e.consume(m),m===92?f:u)}function f(m){return m===i||m===92?(e.consume(m),u):u(m)}}function rx(e,t){let n;return r;function r(s){return Cn(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):Pr(s)?Nr(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const iXe={name:"definition",tokenize:lXe},aXe={partial:!0,tokenize:cXe};function lXe(e,t,n){const r=this;let s;return o;function o(g){return e.enter("definition"),i(g)}function i(g){return ioe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return s=vu(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),l):n(g)}function l(g){return Fs(g)?rx(e,c)(g):c(g)}function c(g){return ooe(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function u(g){return e.attempt(aXe,f,f)(g)}function f(g){return Pr(g)?Nr(e,m,"whitespace")(g):m(g)}function m(g){return g===null||Cn(g)?(e.exit("definition"),r.parser.defined.push(s),t(g)):n(g)}}function cXe(e,t,n){return r;function r(a){return Fs(a)?rx(e,s)(a):n(a)}function s(a){return aoe(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return Pr(a)?Nr(e,i,"whitespace")(a):i(a)}function i(a){return a===null||Cn(a)?t(a):n(a)}}const uXe={name:"hardBreakEscape",tokenize:dXe};function dXe(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),s}function s(o){return Cn(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const fXe={name:"headingAtx",resolve:hXe,tokenize:pXe};function hXe(e,t){let n=e.length-2,r=3,s,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ca(e,r,n-r+1,[["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t]])),e}function pXe(e,t,n){let r=0;return s;function s(u){return e.enter("atxHeading"),o(u)}function o(u){return e.enter("atxHeadingSequence"),i(u)}function i(u){return u===35&&r++<6?(e.consume(u),i):u===null||Fs(u)?(e.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(e.enter("atxHeadingSequence"),l(u)):u===null||Cn(u)?(e.exit("atxHeading"),t(u)):Pr(u)?Nr(e,a,"whitespace")(u):(e.enter("atxHeadingText"),c(u))}function l(u){return u===35?(e.consume(u),l):(e.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||Fs(u)?(e.exit("atxHeadingText"),a(u)):(e.consume(u),c)}}const mXe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],MU=["pre","script","style","textarea"],gXe={concrete:!0,name:"htmlFlow",resolveTo:vXe,tokenize:xXe},bXe={partial:!0,tokenize:EXe},yXe={partial:!0,tokenize:wXe};function vXe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function xXe(e,t,n){const r=this;let s,o,i,a,l;return c;function c(Q){return u(Q)}function u(Q){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Q),f}function f(Q){return Q===33?(e.consume(Q),m):Q===47?(e.consume(Q),o=!0,v):Q===63?(e.consume(Q),s=3,r.interrupt?t:Z):La(Q)?(e.consume(Q),i=String.fromCharCode(Q),w):n(Q)}function m(Q){return Q===45?(e.consume(Q),s=2,g):Q===91?(e.consume(Q),s=5,a=0,y):La(Q)?(e.consume(Q),s=4,r.interrupt?t:Z):n(Q)}function g(Q){return Q===45?(e.consume(Q),r.interrupt?t:Z):n(Q)}function y(Q){const Te="CDATA[";return Q===Te.charCodeAt(a++)?(e.consume(Q),a===Te.length?r.interrupt?t:H:y):n(Q)}function v(Q){return La(Q)?(e.consume(Q),i=String.fromCharCode(Q),w):n(Q)}function w(Q){if(Q===null||Q===47||Q===62||Fs(Q)){const Te=Q===47,ge=i.toLowerCase();return!Te&&!o&&MU.includes(ge)?(s=1,r.interrupt?t(Q):H(Q)):mXe.includes(i.toLowerCase())?(s=6,Te?(e.consume(Q),_):r.interrupt?t(Q):H(Q)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(Q):o?S(Q):k(Q))}return Q===45||xa(Q)?(e.consume(Q),i+=String.fromCharCode(Q),w):n(Q)}function _(Q){return Q===62?(e.consume(Q),r.interrupt?t:H):n(Q)}function S(Q){return Pr(Q)?(e.consume(Q),S):U(Q)}function k(Q){return Q===47?(e.consume(Q),U):Q===58||Q===95||La(Q)?(e.consume(Q),R):Pr(Q)?(e.consume(Q),k):U(Q)}function R(Q){return Q===45||Q===46||Q===58||Q===95||xa(Q)?(e.consume(Q),R):O(Q)}function O(Q){return Q===61?(e.consume(Q),M):Pr(Q)?(e.consume(Q),O):k(Q)}function M(Q){return Q===null||Q===60||Q===61||Q===62||Q===96?n(Q):Q===34||Q===39?(e.consume(Q),l=Q,P):Pr(Q)?(e.consume(Q),M):j(Q)}function P(Q){return Q===l?(e.consume(Q),l=null,q):Q===null||Cn(Q)?n(Q):(e.consume(Q),P)}function j(Q){return Q===null||Q===34||Q===39||Q===47||Q===60||Q===61||Q===62||Q===96||Fs(Q)?O(Q):(e.consume(Q),j)}function q(Q){return Q===47||Q===62||Pr(Q)?k(Q):n(Q)}function U(Q){return Q===62?(e.consume(Q),z):n(Q)}function z(Q){return Q===null||Cn(Q)?H(Q):Pr(Q)?(e.consume(Q),z):n(Q)}function H(Q){return Q===45&&s===2?(e.consume(Q),J):Q===60&&s===1?(e.consume(Q),ee):Q===62&&s===4?(e.consume(Q),te):Q===63&&s===3?(e.consume(Q),Z):Q===93&&s===5?(e.consume(Q),ie):Cn(Q)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(bXe,oe,F)(Q)):Q===null||Cn(Q)?(e.exit("htmlFlowData"),F(Q)):(e.consume(Q),H)}function F(Q){return e.check(yXe,W,oe)(Q)}function W(Q){return e.enter("lineEnding"),e.consume(Q),e.exit("lineEnding"),X}function X(Q){return Q===null||Cn(Q)?F(Q):(e.enter("htmlFlowData"),H(Q))}function J(Q){return Q===45?(e.consume(Q),Z):H(Q)}function ee(Q){return Q===47?(e.consume(Q),i="",re):H(Q)}function re(Q){if(Q===62){const Te=i.toLowerCase();return MU.includes(Te)?(e.consume(Q),te):H(Q)}return La(Q)&&i.length<8?(e.consume(Q),i+=String.fromCharCode(Q),re):H(Q)}function ie(Q){return Q===93?(e.consume(Q),Z):H(Q)}function Z(Q){return Q===62?(e.consume(Q),te):Q===45&&s===2?(e.consume(Q),Z):H(Q)}function te(Q){return Q===null||Cn(Q)?(e.exit("htmlFlowData"),oe(Q)):(e.consume(Q),te)}function oe(Q){return e.exit("htmlFlow"),t(Q)}}function wXe(e,t,n){const r=this;return s;function s(i){return Cn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),o):n(i)}function o(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}function EXe(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Gw,t,n)}}const _Xe={name:"htmlText",tokenize:SXe};function SXe(e,t,n){const r=this;let s,o,i;return a;function a(Z){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(Z),l}function l(Z){return Z===33?(e.consume(Z),c):Z===47?(e.consume(Z),O):Z===63?(e.consume(Z),k):La(Z)?(e.consume(Z),j):n(Z)}function c(Z){return Z===45?(e.consume(Z),u):Z===91?(e.consume(Z),o=0,y):La(Z)?(e.consume(Z),S):n(Z)}function u(Z){return Z===45?(e.consume(Z),g):n(Z)}function f(Z){return Z===null?n(Z):Z===45?(e.consume(Z),m):Cn(Z)?(i=f,ee(Z)):(e.consume(Z),f)}function m(Z){return Z===45?(e.consume(Z),g):f(Z)}function g(Z){return Z===62?J(Z):Z===45?m(Z):f(Z)}function y(Z){const te="CDATA[";return Z===te.charCodeAt(o++)?(e.consume(Z),o===te.length?v:y):n(Z)}function v(Z){return Z===null?n(Z):Z===93?(e.consume(Z),w):Cn(Z)?(i=v,ee(Z)):(e.consume(Z),v)}function w(Z){return Z===93?(e.consume(Z),_):v(Z)}function _(Z){return Z===62?J(Z):Z===93?(e.consume(Z),_):v(Z)}function S(Z){return Z===null||Z===62?J(Z):Cn(Z)?(i=S,ee(Z)):(e.consume(Z),S)}function k(Z){return Z===null?n(Z):Z===63?(e.consume(Z),R):Cn(Z)?(i=k,ee(Z)):(e.consume(Z),k)}function R(Z){return Z===62?J(Z):k(Z)}function O(Z){return La(Z)?(e.consume(Z),M):n(Z)}function M(Z){return Z===45||xa(Z)?(e.consume(Z),M):P(Z)}function P(Z){return Cn(Z)?(i=P,ee(Z)):Pr(Z)?(e.consume(Z),P):J(Z)}function j(Z){return Z===45||xa(Z)?(e.consume(Z),j):Z===47||Z===62||Fs(Z)?q(Z):n(Z)}function q(Z){return Z===47?(e.consume(Z),J):Z===58||Z===95||La(Z)?(e.consume(Z),U):Cn(Z)?(i=q,ee(Z)):Pr(Z)?(e.consume(Z),q):J(Z)}function U(Z){return Z===45||Z===46||Z===58||Z===95||xa(Z)?(e.consume(Z),U):z(Z)}function z(Z){return Z===61?(e.consume(Z),H):Cn(Z)?(i=z,ee(Z)):Pr(Z)?(e.consume(Z),z):q(Z)}function H(Z){return Z===null||Z===60||Z===61||Z===62||Z===96?n(Z):Z===34||Z===39?(e.consume(Z),s=Z,F):Cn(Z)?(i=H,ee(Z)):Pr(Z)?(e.consume(Z),H):(e.consume(Z),W)}function F(Z){return Z===s?(e.consume(Z),s=void 0,X):Z===null?n(Z):Cn(Z)?(i=F,ee(Z)):(e.consume(Z),F)}function W(Z){return Z===null||Z===34||Z===39||Z===60||Z===61||Z===96?n(Z):Z===47||Z===62||Fs(Z)?q(Z):(e.consume(Z),W)}function X(Z){return Z===47||Z===62||Fs(Z)?q(Z):n(Z)}function J(Z){return Z===62?(e.consume(Z),e.exit("htmlTextData"),e.exit("htmlText"),t):n(Z)}function ee(Z){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(Z),e.exit("lineEnding"),re}function re(Z){return Pr(Z)?Nr(e,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Z):ie(Z)}function ie(Z){return e.enter("htmlTextData"),i(Z)}}const jM={name:"labelEnd",resolveAll:AXe,resolveTo:NXe,tokenize:IXe},TXe={tokenize:RXe},CXe={tokenize:MXe},kXe={tokenize:OXe};function AXe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&ca(e,0,e.length,n),e}function NXe(e,t){let n=e.length,r=0,s,o,i,a;for(;n--;)if(s=e[n][1],o){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(i){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(o=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(i=n);const l={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[o][1].start},end:{...e[i][1].end}},u={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[i-2][1].start}};return a=[["enter",l,t],["enter",c,t]],a=aa(a,e.slice(o+1,o+r+3)),a=aa(a,[["enter",u,t]]),a=aa(a,Bb(t.parser.constructs.insideSpan.null,e.slice(o+r+4,i-3),t)),a=aa(a,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),a=aa(a,e.slice(i+1)),a=aa(a,[["exit",l,t]]),ca(e,o,e.length,a),e}function IXe(e,t,n){const r=this;let s=r.events.length,o,i;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){o=r.events[s][1];break}return a;function a(m){return o?o._inactive?f(m):(i=r.parser.defined.includes(vu(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),l):n(m)}function l(m){return m===40?e.attempt(TXe,u,i?u:f)(m):m===91?e.attempt(CXe,u,i?c:f)(m):i?u(m):f(m)}function c(m){return e.attempt(kXe,u,f)(m)}function u(m){return t(m)}function f(m){return o._balanced=!0,n(m)}}function RXe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),s}function s(f){return Fs(f)?rx(e,o)(f):o(f)}function o(f){return f===41?u(f):ooe(e,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function i(f){return Fs(f)?rx(e,l)(f):u(f)}function a(f){return n(f)}function l(f){return f===34||f===39||f===40?aoe(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function c(f){return Fs(f)?rx(e,u)(f):u(f)}function u(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function MXe(e,t,n){const r=this;return s;function s(a){return ioe.call(r,e,o,i,"reference","referenceMarker","referenceString")(a)}function o(a){return r.parser.defined.includes(vu(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function i(a){return n(a)}}function OXe(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),s}function s(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const DXe={name:"labelStartImage",resolveAll:jM.resolveAll,tokenize:PXe};function PXe(e,t,n){const r=this;return s;function s(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),o}function o(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),i):n(a)}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const LXe={name:"labelStartLink",resolveAll:jM.resolveAll,tokenize:$Xe};function $Xe(e,t,n){const r=this;return s;function s(i){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(i),e.exit("labelMarker"),e.exit("labelLink"),o}function o(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):t(i)}}const EA={name:"lineEnding",tokenize:FXe};function FXe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Nr(e,t,"linePrefix")}}const U_={name:"thematicBreak",tokenize:BXe};function BXe(e,t,n){let r=0,s;return o;function o(c){return e.enter("thematicBreak"),i(c)}function i(c){return s=c,a(c)}function a(c){return c===s?(e.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Cn(c))?(e.exit("thematicBreak"),t(c)):n(c)}function l(c){return c===s?(e.consume(c),r++,l):(e.exit("thematicBreakSequence"),Pr(c)?Nr(e,a,"whitespace")(c):a(c))}}const ll={continuation:{tokenize:HXe},exit:qXe,name:"list",tokenize:UXe},zXe={partial:!0,tokenize:GXe},jXe={partial:!0,tokenize:VXe};function UXe(e,t,n){const r=this,s=r.events[r.events.length-1];let o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,i=0;return a;function a(g){const y=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:AI(g)){if(r.containerState.type||(r.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),g===42||g===45?e.check(U_,n,c)(g):c(g);if(!r.interrupt||g===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(g)}return n(g)}function l(g){return AI(g)&&++i<10?(e.consume(g),l):(!r.interrupt||i<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(e.exit("listItemValue"),c(g)):n(g)}function c(g){return e.enter("listItemMarker"),e.consume(g),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,e.check(Gw,r.interrupt?n:u,e.attempt(zXe,m,f))}function u(g){return r.containerState.initialBlankLine=!0,o++,m(g)}function f(g){return Pr(g)?(e.enter("listItemPrefixWhitespace"),e.consume(g),e.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(g)}}function HXe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Gw,s,o);function s(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Nr(e,t,"listItemIndent",r.containerState.size+1)(a)}function o(a){return r.containerState.furtherBlankLines||!Pr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(jXe,t,i)(a))}function i(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Nr(e,e.attempt(ll,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function VXe(e,t,n){const r=this;return Nr(e,s,"listItemIndent",r.containerState.size+1);function s(o){const i=r.events[r.events.length-1];return i&&i[1].type==="listItemIndent"&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(o):n(o)}}function qXe(e){e.exit(this.containerState.type)}function GXe(e,t,n){const r=this;return Nr(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(o){const i=r.events[r.events.length-1];return!Pr(o)&&i&&i[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const OU={name:"setextUnderline",resolveTo:WXe,tokenize:YXe};function WXe(e,t){let n=e.length,r,s,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const i={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",o?(e.splice(s,0,["enter",i,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=i,e.push(["exit",i,t]),e}function YXe(e,t,n){const r=this;let s;return o;function o(c){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),s=c,i(c)):n(c)}function i(c){return e.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===s?(e.consume(c),a):(e.exit("setextHeadingLineSequence"),Pr(c)?Nr(e,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Cn(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const KXe={tokenize:rQe,partial:!0};function ZXe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:eQe,continuation:{tokenize:tQe},exit:nQe}},text:{91:{name:"gfmFootnoteCall",tokenize:QXe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:JXe,resolveTo:XXe}}}}function JXe(e,t,n){const r=this;let s=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i;for(;s--;){const l=r.events[s][1];if(l.type==="labelImage"){i=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!i||!i._balanced)return n(l);const c=vu(r.sliceSerialize({start:i.end,end:r.now()}));return c.codePointAt(0)!==94||!o.includes(c.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function XXe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",o,t],["enter",i,t],["exit",i,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function QXe(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,i;return a;function a(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(f){if(o>999||f===93&&!i||f===null||f===91||Fs(f))return n(f);if(f===93){e.exit("chunkString");const m=e.exit("gfmFootnoteCallString");return s.includes(vu(r.sliceSerialize(m)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return Fs(f)||(i=!0),o++,e.consume(f),f===92?u:c}function u(f){return f===91||f===92||f===93?(e.consume(f),o++,c):c(f)}}function eQe(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,i=0,a;return l;function l(y){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(y){return y===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(y)}function u(y){if(i>999||y===93&&!a||y===null||y===91||Fs(y))return n(y);if(y===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return o=vu(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),m}return Fs(y)||(a=!0),i++,e.consume(y),y===92?f:u}function f(y){return y===91||y===92||y===93?(e.consume(y),i++,u):u(y)}function m(y){return y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),s.includes(o)||s.push(o),Nr(e,g,"gfmFootnoteDefinitionWhitespace")):n(y)}function g(y){return t(y)}}function tQe(e,t,n){return e.check(Gw,t,e.attempt(KXe,t,n))}function nQe(e){e.exit("gfmFootnoteDefinition")}function rQe(e,t,n){const r=this;return Nr(e,s,"gfmFootnoteDefinitionIndent",5);function s(o){const i=r.events[r.events.length-1];return i&&i[1].type==="gfmFootnoteDefinitionIndent"&&i[2].sliceSerialize(i[1],!0).length===4?t(o):n(o)}}function sQe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(i,a){let l=-1;for(;++l<i.length;)if(i[l][0]==="enter"&&i[l][1].type==="strikethroughSequenceTemporary"&&i[l][1]._close){let c=l;for(;c--;)if(i[c][0]==="exit"&&i[c][1].type==="strikethroughSequenceTemporary"&&i[c][1]._open&&i[l][1].end.offset-i[l][1].start.offset===i[c][1].end.offset-i[c][1].start.offset){i[l][1].type="strikethroughSequence",i[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},i[c][1].start),end:Object.assign({},i[l][1].end)},f={type:"strikethroughText",start:Object.assign({},i[c][1].end),end:Object.assign({},i[l][1].start)},m=[["enter",u,a],["enter",i[c][1],a],["exit",i[c][1],a],["enter",f,a]],g=a.parser.constructs.insideSpan.null;g&&ca(m,m.length,0,Bb(g,i.slice(c+1,l),a)),ca(m,m.length,0,[["exit",f,a],["enter",i[l][1],a],["exit",i[l][1],a],["exit",u,a]]),ca(i,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<i.length;)i[l][1].type==="strikethroughSequenceTemporary"&&(i[l][1].type="data");return i}function o(i,a,l){const c=this.previous,u=this.events;let f=0;return m;function m(y){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(y):(i.enter("strikethroughSequenceTemporary"),g(y))}function g(y){const v=hb(c);if(y===126)return f>1?l(y):(i.consume(y),f++,g);if(f<2&&!n)return l(y);const w=i.exit("strikethroughSequenceTemporary"),_=hb(y);return w._open=!_||_===2&&!!v,w._close=!v||v===2&&!!_,a(y)}}}class oQe{constructor(){this.map=[]}add(t,n,r){iQe(this,t,n,r)}consume(t){if(this.map.sort(function(o,i){return o[0]-i[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let s=r.pop();for(;s;){for(const o of s)t.push(o);s=r.pop()}this.map.length=0}}function iQe(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function aQe(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function lQe(){return{flow:{null:{name:"table",tokenize:cQe,resolveAll:uQe}}}}function cQe(e,t,n){const r=this;let s=0,o=0,i;return a;function a(U){let z=r.events.length-1;for(;z>-1;){const W=r.events[z][1].type;if(W==="lineEnding"||W==="linePrefix")z--;else break}const H=z>-1?r.events[z][1].type:null,F=H==="tableHead"||H==="tableRow"?M:l;return F===M&&r.parser.lazy[r.now().line]?n(U):F(U)}function l(U){return e.enter("tableHead"),e.enter("tableRow"),c(U)}function c(U){return U===124||(i=!0,o+=1),u(U)}function u(U){return U===null?n(U):Cn(U)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),g):n(U):Pr(U)?Nr(e,u,"whitespace")(U):(o+=1,i&&(i=!1,s+=1),U===124?(e.enter("tableCellDivider"),e.consume(U),e.exit("tableCellDivider"),i=!0,u):(e.enter("data"),f(U)))}function f(U){return U===null||U===124||Fs(U)?(e.exit("data"),u(U)):(e.consume(U),U===92?m:f)}function m(U){return U===92||U===124?(e.consume(U),f):f(U)}function g(U){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(U):(e.enter("tableDelimiterRow"),i=!1,Pr(U)?Nr(e,y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):y(U))}function y(U){return U===45||U===58?w(U):U===124?(i=!0,e.enter("tableCellDivider"),e.consume(U),e.exit("tableCellDivider"),v):O(U)}function v(U){return Pr(U)?Nr(e,w,"whitespace")(U):w(U)}function w(U){return U===58?(o+=1,i=!0,e.enter("tableDelimiterMarker"),e.consume(U),e.exit("tableDelimiterMarker"),_):U===45?(o+=1,_(U)):U===null||Cn(U)?R(U):O(U)}function _(U){return U===45?(e.enter("tableDelimiterFiller"),S(U)):O(U)}function S(U){return U===45?(e.consume(U),S):U===58?(i=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(U),e.exit("tableDelimiterMarker"),k):(e.exit("tableDelimiterFiller"),k(U))}function k(U){return Pr(U)?Nr(e,R,"whitespace")(U):R(U)}function R(U){return U===124?y(U):U===null||Cn(U)?!i||s!==o?O(U):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(U)):O(U)}function O(U){return n(U)}function M(U){return e.enter("tableRow"),P(U)}function P(U){return U===124?(e.enter("tableCellDivider"),e.consume(U),e.exit("tableCellDivider"),P):U===null||Cn(U)?(e.exit("tableRow"),t(U)):Pr(U)?Nr(e,P,"whitespace")(U):(e.enter("data"),j(U))}function j(U){return U===null||U===124||Fs(U)?(e.exit("data"),P(U)):(e.consume(U),U===92?q:j)}function q(U){return U===92||U===124?(e.consume(U),j):j(U)}}function uQe(e,t){let n=-1,r=!0,s=0,o=[0,0,0,0],i=[0,0,0,0],a=!1,l=0,c,u,f;const m=new oQe;for(;++n<e.length;){const g=e[n],y=g[1];g[0]==="enter"?y.type==="tableHead"?(a=!1,l!==0&&(DU(m,t,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",c,t]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(r=!0,f=void 0,o=[0,0,0,0],i=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",u,t]])),s=y.type==="tableDelimiterRow"?2:u?3:1):s&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(r=!1,i[2]===0&&(o[1]!==0&&(i[0]=i[1],f=a_(m,t,o,s,void 0,f),o=[0,0,0,0]),i[2]=n)):y.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(i[0]=i[1],f=a_(m,t,o,s,void 0,f)),o=i,i=[o[1],n,0,0])):y.type==="tableHead"?(a=!0,l=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(l=n,o[1]!==0?(i[0]=i[1],f=a_(m,t,o,s,n,f)):i[1]!==0&&(f=a_(m,t,i,s,n,f)),s=0):s&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(i[3]=n)}for(l!==0&&DU(m,t,l,c,u),m.consume(t.events),n=-1;++n<t.events.length;){const g=t.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=aQe(t.events,n))}return e}function a_(e,t,n,r,s,o){const i=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(o.end=Object.assign({},u1(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const l=u1(t.events,n[1]);if(o={type:i,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const c=u1(t.events,n[2]),u=u1(t.events,n[3]),f={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const m=t.events[n[2]],g=t.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,v=n[3]-n[2]-1;e.add(y,v,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return s!==void 0&&(o.end=Object.assign({},u1(t.events,s)),e.add(s,0,[["exit",o,t]]),o=void 0),o}function DU(e,t,n,r,s){const o=[],i=u1(t.events,n);s&&(s.end=Object.assign({},i),o.push(["exit",s,t])),r.end=Object.assign({},i),o.push(["exit",r,t]),e.add(n+1,0,o)}function u1(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const dQe={name:"tasklistCheck",tokenize:hQe};function fQe(){return{text:{91:dQe}}}function hQe(e,t,n){const r=this;return s;function s(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),o)}function o(l){return Fs(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),i):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),i):n(l)}function i(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(l)}function a(l){return Cn(l)?t(l):Pr(l)?e.check({tokenize:pQe},t,n)(l):n(l)}}function pQe(e,t,n){return Nr(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function mQe(e){return Gse([TJe(),ZXe(),sQe(e),lQe(),fQe()])}const gQe={};function bQe(e){const t=this,n=e||gQe,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(mQe(n)),o.push(vJe()),i.push(xJe(n))}function yQe(){return{enter:{mathFlow:e,mathFlowFenceMeta:t,mathText:o},exit:{mathFlow:s,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:a,mathText:i,mathTextData:a}};function e(l){const c={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[c]}},l)}function t(){this.buffer()}function n(){const l=this.resume(),c=this.stack[this.stack.length-1];c.type,c.meta=l}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function s(l){const c=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u=this.stack[this.stack.length-1];u.type,this.exit(l),u.value=c;const f=u.data.hChildren[0];f.type,f.tagName,f.children.push({type:"text",value:c}),this.data.mathFlowInside=void 0}function o(l){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},l),this.buffer()}function i(l){const c=this.resume(),u=this.stack[this.stack.length-1];u.type,this.exit(l),u.value=c,u.data.hChildren.push({type:"text",value:c})}function a(l){this.config.enter.data.call(this,l),this.config.exit.data.call(this,l)}}function vQe(e){let t=(e||{}).singleDollarTextMath;return t==null&&(t=!0),r.peek=s,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:t?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(o,i,a,l){const c=o.value||"",u=a.createTracker(l),f="$".repeat(Math.max(Mse(c,"$")+1,2)),m=a.enter("mathFlow");let g=u.move(f);if(o.meta){const y=a.enter("mathFlowMeta");g+=u.move(a.safe(o.meta,{after:`
`,before:g,encode:["$"],...u.current()})),y()}return g+=u.move(`
`),c&&(g+=u.move(c+`
`)),g+=u.move(f),m(),g}function r(o,i,a){let l=o.value||"",c=1;for(t||c++;new RegExp("(^|[^$])"+"\\$".repeat(c)+"([^$]|$)").test(l);)c++;const u="$".repeat(c);/[^ \r\n]/.test(l)&&(/^[ \r\n]/.test(l)&&/[ \r\n]$/.test(l)||/^\$|\$$/.test(l))&&(l=" "+l+" ");let f=-1;for(;++f<a.unsafe.length;){const m=a.unsafe[f];if(!m.atBreak)continue;const g=a.compilePattern(m);let y;for(;y=g.exec(l);){let v=y.index;l.codePointAt(v)===10&&l.codePointAt(v-1)===13&&v--,l=l.slice(0,v)+" "+l.slice(y.index+1)}}return u+l+u}function s(){return"$"}}const xQe={tokenize:wQe,concrete:!0,name:"mathFlow"},PU={tokenize:EQe,partial:!0};function wQe(e,t,n){const r=this,s=r.events[r.events.length-1],o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0;let i=0;return a;function a(S){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),l(S)}function l(S){return S===36?(e.consume(S),i++,l):i<2?n(S):(e.exit("mathFlowFenceSequence"),Nr(e,c,"whitespace")(S))}function c(S){return S===null||Cn(S)?f(S):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),u(S))}function u(S){return S===null||Cn(S)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),f(S)):S===36?n(S):(e.consume(S),u)}function f(S){return e.exit("mathFlowFence"),r.interrupt?t(S):e.attempt(PU,m,w)(S)}function m(S){return e.attempt({tokenize:_,partial:!0},w,g)(S)}function g(S){return(o?Nr(e,y,"linePrefix",o+1):y)(S)}function y(S){return S===null?w(S):Cn(S)?e.attempt(PU,m,w)(S):(e.enter("mathFlowValue"),v(S))}function v(S){return S===null||Cn(S)?(e.exit("mathFlowValue"),y(S)):(e.consume(S),v)}function w(S){return e.exit("mathFlow"),t(S)}function _(S,k,R){let O=0;return Nr(S,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function M(q){return S.enter("mathFlowFence"),S.enter("mathFlowFenceSequence"),P(q)}function P(q){return q===36?(O++,S.consume(q),P):O<i?R(q):(S.exit("mathFlowFenceSequence"),Nr(S,j,"whitespace")(q))}function j(q){return q===null||Cn(q)?(S.exit("mathFlowFence"),k(q)):R(q)}}}function EQe(e,t,n){const r=this;return s;function s(i){return i===null?t(i):(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),o)}function o(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}function _Qe(e){let n=(e||{}).singleDollarTextMath;return n==null&&(n=!0),{tokenize:r,resolve:SQe,previous:TQe,name:"mathText"};function r(s,o,i){let a=0,l,c;return u;function u(v){return s.enter("mathText"),s.enter("mathTextSequence"),f(v)}function f(v){return v===36?(s.consume(v),a++,f):a<2&&!n?i(v):(s.exit("mathTextSequence"),m(v))}function m(v){return v===null?i(v):v===36?(c=s.enter("mathTextSequence"),l=0,y(v)):v===32?(s.enter("space"),s.consume(v),s.exit("space"),m):Cn(v)?(s.enter("lineEnding"),s.consume(v),s.exit("lineEnding"),m):(s.enter("mathTextData"),g(v))}function g(v){return v===null||v===32||v===36||Cn(v)?(s.exit("mathTextData"),m(v)):(s.consume(v),g)}function y(v){return v===36?(s.consume(v),l++,y):l===a?(s.exit("mathTextSequence"),s.exit("mathText"),o(v)):(c.type="mathTextData",g(v))}}}function SQe(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="mathTextData"){e[t][1].type="mathTextPadding",e[n][1].type="mathTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="mathTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function TQe(e){return e!==36||this.events[this.events.length-1][1].type==="characterEscape"}function CQe(e){return{flow:{36:xQe},text:{36:_Qe(e)}}}const kQe={};function MI(e){const t=this,n=e||kQe,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(CQe(n)),o.push(yQe()),i.push(vQe(n))}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NQe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),LU=e=>{const t=NQe(e);return t.charAt(0).toUpperCase()+t.slice(1)},loe=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),IQe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RQe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQe=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:i,...a},l)=>x.createElement("svg",{ref:l,...RQe,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:loe("lucide",s),...!o&&!IQe(a)&&{"aria-hidden":"true"},...a},[...i.map(([c,u])=>x.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=(e,t)=>{const n=x.forwardRef(({className:r,...s},o)=>x.createElement(MQe,{ref:o,iconNode:t,className:loe(`lucide-${AQe(LU(e))}`,`lucide-${e}`,r),...s}));return n.displayName=LU(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],coe=ah("check",OQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],uoe=ah("copy",DQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],QC=ah("download",PQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$Qe=ah("loader-circle",LQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],BQe=ah("maximize-2",FQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],jQe=ah("rotate-ccw",zQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],HQe=ah("x",UQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],qQe=ah("zoom-in",VQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],WQe=ah("zoom-out",GQe),YQe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,KQe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ZQe={};function $U(e,t){return(ZQe.jsx?KQe:YQe).test(e)}var Qg={},_A,FU;function JQe(){if(FU)return _A;FU=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,i=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,c="/",u="*",f="",m="comment",g="declaration";function y(w,_){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];_=_||{};var S=1,k=1;function R(W){var X=W.match(t);X&&(S+=X.length);var J=W.lastIndexOf(l);k=~J?W.length-J:k+W.length}function O(){var W={line:S,column:k};return function(X){return X.position=new M(W),q(),X}}function M(W){this.start=W,this.end={line:S,column:k},this.source=_.source}M.prototype.content=w;function P(W){var X=new Error(_.source+":"+S+":"+k+": "+W);if(X.reason=W,X.filename=_.source,X.line=S,X.column=k,X.source=w,!_.silent)throw X}function j(W){var X=W.exec(w);if(X){var J=X[0];return R(J),w=w.slice(J.length),X}}function q(){j(n)}function U(W){var X;for(W=W||[];X=z();)X!==!1&&W.push(X);return W}function z(){var W=O();if(!(c!=w.charAt(0)||u!=w.charAt(1))){for(var X=2;f!=w.charAt(X)&&(u!=w.charAt(X)||c!=w.charAt(X+1));)++X;if(X+=2,f===w.charAt(X-1))return P("End of comment missing");var J=w.slice(2,X-2);return k+=2,R(J),w=w.slice(X),k+=2,W({type:m,comment:J})}}function H(){var W=O(),X=j(r);if(X){if(z(),!j(s))return P("property missing ':'");var J=j(o),ee=W({type:g,property:v(X[0].replace(e,f)),value:J?v(J[0].replace(e,f)):f});return j(i),ee}}function F(){var W=[];U(W);for(var X;X=H();)X!==!1&&(W.push(X),U(W));return W}return q(),F()}function v(w){return w?w.replace(a,f):f}return _A=y,_A}var BU;function XQe(){if(BU)return Qg;BU=1;var e=Qg&&Qg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.default=n;const t=e(JQe());function n(r,s){let o=null;if(!r||typeof r!="string")return o;const i=(0,t.default)(r),a=typeof s=="function";return i.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:u}=l;a?s(c,u,l):u&&(o=o||{},o[c]=u)}),o}return Qg}var nv={},zU;function QQe(){if(zU)return nv;zU=1,Object.defineProperty(nv,"__esModule",{value:!0}),nv.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,o=function(c){return!c||n.test(c)||e.test(c)},i=function(c,u){return u.toUpperCase()},a=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),o(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(s,a):c=c.replace(r,a),c.replace(t,i))};return nv.camelCase=l,nv}var rv,jU;function eet(){if(jU)return rv;jU=1;var e=rv&&rv.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},t=e(XQe()),n=QQe();function r(s,o){var i={};return!s||typeof s!="string"||(0,t.default)(s,function(a,l){a&&l&&(i[(0,n.camelCase)(a,o)]=l)}),i}return r.default=r,rv=r,rv}var tet=eet();const net=km(tet);function sx(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?UU(e.position):"start"in e||"end"in e?UU(e):"line"in e||"column"in e?OI(e):""}function OI(e){return HU(e&&e.line)+":"+HU(e&&e.column)}function UU(e){return OI(e&&e.start)+"-"+OI(e&&e.end)}function HU(e){return e&&typeof e=="number"?e:1}class Sa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",o={},i=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?s=t:!o.cause&&t&&(i=!0,s=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?o.ruleId=r:(o.source=r.slice(0,l),o.ruleId=r.slice(l+1))}if(!o.place&&o.ancestors&&o.ancestors){const l=o.ancestors[o.ancestors.length-1];l&&(o.place=l.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=a?a.line:void 0,this.name=sx(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=i&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Sa.prototype.file="";Sa.prototype.name="";Sa.prototype.reason="";Sa.prototype.message="";Sa.prototype.stack="";Sa.prototype.column=void 0;Sa.prototype.line=void 0;Sa.prototype.ancestors=void 0;Sa.prototype.cause=void 0;Sa.prototype.fatal=void 0;Sa.prototype.place=void 0;Sa.prototype.ruleId=void 0;Sa.prototype.source=void 0;const UM={}.hasOwnProperty,ret=new Map,set=/[A-Z]/g,oet=new Set(["table","tbody","thead","tfoot","tr"]),iet=new Set(["td","th"]),doe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function aet(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=get(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=met(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?K0:Fw,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=foe(s,e,void 0);return o&&typeof o!="string"?o:s.create(e,s.Fragment,{children:o||void 0},void 0)}function foe(e,t,n){if(t.type==="element")return cet(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return uet(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return fet(e,t,n);if(t.type==="mdxjsEsm")return det(e,t);if(t.type==="root")return het(e,t,n);if(t.type==="text")return pet(e,t)}function cet(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=K0,e.schema=s),e.ancestors.push(t);const o=poe(e,t.tagName,!1),i=bet(e,t);let a=VM(e,t);return oet.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!OC(l):!0})),hoe(e,i,o,t),HM(i,a),e.ancestors.pop(),e.schema=r,e.create(t,o,i,n)}function uet(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Qx(e,t.position)}function det(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Qx(e,t.position)}function fet(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=K0,e.schema=s),e.ancestors.push(t);const o=t.name===null?e.Fragment:poe(e,t.name,!0),i=yet(e,t),a=VM(e,t);return hoe(e,i,o,t),HM(i,a),e.ancestors.pop(),e.schema=r,e.create(t,o,i,n)}function het(e,t,n){const r={};return HM(r,VM(e,t)),e.create(t,e.Fragment,r,n)}function pet(e,t){return t.value}function hoe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function HM(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function met(e,t,n){return r;function r(s,o,i,a){const c=Array.isArray(i.children)?n:t;return a?c(o,i,a):c(o,i)}}function get(e,t){return n;function n(r,s,o,i){const a=Array.isArray(o.children),l=Md(r);return t(s,o,i,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function bet(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&UM.call(t.properties,s)){const o=vet(e,s,t.properties[s]);if(o){const[i,a]=o;e.tableCellAlignToStyle&&i==="align"&&typeof a=="string"&&iet.has(t.tagName)?r=a:n[i]=a}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function yet(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const i=o.expression;i.type;const a=i.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else Qx(e,t.position);else{const s=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,o=e.evaluater.evaluateExpression(a.expression)}else Qx(e,t.position);else o=r.value===null?!0:r.value;n[s]=o}return n}function VM(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:ret;for(;++r<t.children.length;){const o=t.children[r];let i;if(e.passKeys){const l=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(l){const c=s.get(l)||0;i=l+"-"+c,s.set(l,c+1)}}const a=foe(e,o,i);a!==void 0&&n.push(a)}return n}function vet(e,t,n){const r=MC(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Y7(n):K7(n)),r.property==="style"){let s=typeof n=="object"?n:xet(e,String(n));return e.stylePropertyNameCase==="css"&&(s=wet(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?Gze[r.property]||r.property:r.attribute,n]}}function xet(e,t){try{return net(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new Sa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=doe+"#cannot-parse-style-attribute",s}}function poe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let o=-1,i;for(;++o<s.length;){const a=$U(s[o])?{type:"Identifier",name:s[o]}:{type:"Literal",value:s[o]};i=i?{type:"MemberExpression",object:i,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}r=i}else r=$U(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return UM.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);Qx(e)}function Qx(e,t){const n=new Sa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=doe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function wet(e){const t={};let n;for(n in e)UM.call(e,n)&&(t[Eet(n)]=e[n]);return t}function Eet(e){let t=e.replace(set,_et);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function _et(e){return"-"+e.toLowerCase()}const Tet={tokenize:Cet};function Cet(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Nr(e,t,"linePrefix")}function s(a){return e.enter("paragraph"),o(a)}function o(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,i(a)}function i(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Cn(a)?(e.consume(a),e.exit("chunkText"),o):(e.consume(a),i)}}const ket={tokenize:Aet},VU={tokenize:Net};function Aet(e){const t=this,n=[];let r=0,s,o,i;return a;function a(k){if(r<n.length){const R=n[r];return t.containerState=R[1],e.attempt(R[0].continuation,l,c)(k)}return c(k)}function l(k){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&S();const R=t.events.length;let O=R,M;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){M=t.events[O][1].end;break}_(r);let P=R;for(;P<t.events.length;)t.events[P][1].end={...M},P++;return ca(t.events,O+1,0,t.events.slice(R)),t.events.length=P,c(k)}return a(k)}function c(k){if(r===n.length){if(!s)return m(k);if(s.currentConstruct&&s.currentConstruct.concrete)return y(k);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(VU,u,f)(k)}function u(k){return s&&S(),_(r),m(k)}function f(k){return t.parser.lazy[t.now().line]=r!==n.length,i=t.now().offset,y(k)}function m(k){return t.containerState={},e.attempt(VU,g,y)(k)}function g(k){return r++,n.push([t.currentConstruct,t.containerState]),m(k)}function y(k){if(k===null){s&&S(),_(0),e.consume(k);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:o}),v(k)}function v(k){if(k===null){w(e.exit("chunkFlow"),!0),_(0),e.consume(k);return}return Cn(k)?(e.consume(k),w(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(k),v)}function w(k,R){const O=t.sliceStream(k);if(R&&O.push(null),k.previous=o,o&&(o.next=k),o=k,s.defineSkip(k.start),s.write(O),t.parser.lazy[k.start.line]){let M=s.events.length;for(;M--;)if(s.events[M][1].start.offset<i&&(!s.events[M][1].end||s.events[M][1].end.offset>i))return;const P=t.events.length;let j=P,q,U;for(;j--;)if(t.events[j][0]==="exit"&&t.events[j][1].type==="chunkFlow"){if(q){U=t.events[j][1].end;break}q=!0}for(_(r),M=P;M<t.events.length;)t.events[M][1].end={...U},M++;ca(t.events,j+1,0,t.events.slice(P)),t.events.length=M}}function _(k){let R=n.length;for(;R-- >k;){const O=n[R];t.containerState=O[1],O[0].exit.call(t,e)}n.length=k}function S(){s.write([null]),o=void 0,s=void 0,t.containerState._closeFlow=void 0}}function Net(e,t,n){return Nr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const Iet={tokenize:Ret};function Ret(e){const t=this,n=e.attempt(Gw,r,e.attempt(this.parser.constructs.flowInitial,s,Nr(e,e.attempt(this.parser.constructs.flow,s,e.attempt(tXe,s)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Met={resolveAll:goe()},Oet=moe("string"),Det=moe("text");function moe(e){return{resolveAll:goe(e==="text"?Pet:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],o=n.attempt(s,i,a);return i;function i(u){return c(u)?o(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),o(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const f=s[u];let m=-1;if(f)for(;++m<f.length;){const g=f[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function goe(e){return t;function t(n,r){let s=-1,o;for(;++s<=n.length;)o===void 0?n[s]&&n[s][1].type==="data"&&(o=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==o+2&&(n[o][1].end=n[s-1][1].end,n.splice(o+2,s-o-2),s=o+2),o=void 0);return e?e(n,r):n}}function Pet(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let o=s.length,i=-1,a=0,l;for(;o--;){const c=s[o];if(typeof c=="string"){for(i=c.length;c.charCodeAt(i-1)===32;)a++,i--;if(i)break;i=-1}else if(c===-2)l=!0,a++;else if(c!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const c={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?i:r.start._bufferIndex+i,_index:r.start._index+o,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}const Let={42:ll,43:ll,45:ll,48:ll,49:ll,50:ll,51:ll,52:ll,53:ll,54:ll,55:ll,56:ll,57:ll,62:toe},$et={91:iXe},Fet={[-2]:wA,[-1]:wA,32:wA},Bet={35:fXe,42:U_,45:[OU,U_],60:gXe,61:OU,95:U_,96:RU,126:RU},zet={38:roe,92:noe},jet={[-5]:EA,[-4]:EA,[-3]:EA,33:DXe,38:roe,42:RI,60:[LJe,_Xe],91:LXe,92:[uXe,noe],93:jM,95:RI,96:KJe},Uet={null:[RI,Met]},Het={null:[42,95]},Vet={null:[]},qet=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Het,contentInitial:$et,disable:Vet,document:Let,flow:Bet,flowInitial:Fet,insideSpan:Uet,string:zet,text:jet},Symbol.toStringTag,{value:"Module"}));function Get(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},o=[];let i=[],a=[];const l={attempt:P(O),check:P(M),consume:S,enter:k,exit:R,interrupt:P(M,{interrupt:!0})},c={code:null,containerState:{},defineSkip:v,events:[],now:y,parser:e,previous:null,sliceSerialize:m,sliceStream:g,write:f};let u=t.tokenize.call(c,l);return t.resolveAll&&o.push(t),c;function f(z){return i=aa(i,z),w(),i[i.length-1]!==null?[]:(j(t,0),c.events=Bb(o,c.events,c),c.events)}function m(z,H){return Yet(g(z),H)}function g(z){return Wet(i,z)}function y(){const{_bufferIndex:z,_index:H,line:F,column:W,offset:X}=r;return{_bufferIndex:z,_index:H,line:F,column:W,offset:X}}function v(z){s[z.line]=z.column,U()}function w(){let z;for(;r._index<i.length;){const H=i[r._index];if(typeof H=="string")for(z=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===z&&r._bufferIndex<H.length;)_(H.charCodeAt(r._bufferIndex));else _(H)}}function _(z){u=u(z)}function S(z){Cn(z)?(r.line++,r.column=1,r.offset+=z===-3?2:1,U()):z!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=z}function k(z,H){const F=H||{};return F.type=z,F.start=y(),c.events.push(["enter",F,c]),a.push(F),F}function R(z){const H=a.pop();return H.end=y(),c.events.push(["exit",H,c]),H}function O(z,H){j(z,H.from)}function M(z,H){H.restore()}function P(z,H){return F;function F(W,X,J){let ee,re,ie,Z;return Array.isArray(W)?oe(W):"tokenize"in W?oe([W]):te(W);function te(Ce){return he;function he(Fe){const De=Fe!==null&&Ce[Fe],Re=Fe!==null&&Ce.null,tt=[...Array.isArray(De)?De:De?[De]:[],...Array.isArray(Re)?Re:Re?[Re]:[]];return oe(tt)(Fe)}}function oe(Ce){return ee=Ce,re=0,Ce.length===0?J:Q(Ce[re])}function Q(Ce){return he;function he(Fe){return Z=q(),ie=Ce,Ce.partial||(c.currentConstruct=Ce),Ce.name&&c.parser.constructs.disable.null.includes(Ce.name)?ge():Ce.tokenize.call(H?Object.assign(Object.create(c),H):c,l,Te,ge)(Fe)}}function Te(Ce){return z(ie,Z),X}function ge(Ce){return Z.restore(),++re<ee.length?Q(ee[re]):J}}}function j(z,H){z.resolveAll&&!o.includes(z)&&o.push(z),z.resolve&&ca(c.events,H,c.events.length-H,z.resolve(c.events.slice(H),c)),z.resolveTo&&(c.events=z.resolveTo(c.events,c))}function q(){const z=y(),H=c.previous,F=c.currentConstruct,W=c.events.length,X=Array.from(a);return{from:W,restore:J};function J(){r=z,c.previous=H,c.currentConstruct=F,c.events.length=W,a=X,U()}}function U(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Wet(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,o=t.end._bufferIndex;let i;if(n===s)i=[e[n].slice(r,o)];else{if(i=e.slice(n,s),r>-1){const a=i[0];typeof a=="string"?i[0]=a.slice(r):i.shift()}o>0&&i.push(e[s].slice(0,o))}return i}function Yet(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const o=e[n];let i;if(typeof o=="string")i=o;else switch(o){case-5:{i="\r";break}case-4:{i=`
`;break}case-3:{i=`\r
`;break}case-2:{i=t?" ":"	";break}case-1:{if(!t&&s)continue;i=" ";break}default:i=String.fromCharCode(o)}s=o===-2,r.push(i)}return r.join("")}function Ket(e){const r={constructs:Gse([qet,...(e||{}).extensions||[]]),content:s(Tet),defined:[],document:s(ket),flow:s(Iet),lazy:{},string:s(Oet),text:s(Det)};return r;function s(o){return i;function i(a){return Get(r,o,a)}}}function Zet(e){for(;!soe(e););return e}const qU=/[\0\t\n\r]/g;function Jet(){let e=1,t="",n=!0,r;return s;function s(o,i,a){const l=[];let c,u,f,m,g;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(i||void 0).decode(o)),f=0,t="",n&&(o.charCodeAt(0)===65279&&f++,n=void 0);f<o.length;){if(qU.lastIndex=f,c=qU.exec(o),m=c&&c.index!==void 0?c.index:o.length,g=o.charCodeAt(m),!c){t=o.slice(f);break}if(g===10&&f===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<m&&(l.push(o.slice(f,m)),e+=m-f),g){case 0:{l.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,l.push(-2);e++<u;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}f=m+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const boe={}.hasOwnProperty;function Xet(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Qet(n)(Zet(Ket(n).document().write(Jet()(e,t,!0))))}function Qet(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(xt),autolinkProtocol:q,autolinkEmail:q,atxHeading:o(Ht),blockQuote:o(Re),characterEscape:q,characterReference:q,codeFenced:o(tt),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:o(tt,i),codeText:o(fe,i),codeTextData:q,data:q,codeFlowValue:q,definition:o(nt),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:o(ot),hardBreakEscape:o(qt),hardBreakTrailing:o(qt),htmlFlow:o(Pt,i),htmlFlowData:q,htmlText:o(Pt,i),htmlTextData:q,image:o(tn),label:i,link:o(xt),listItem:o(Ne),listItemValue:m,listOrdered:o(pe,f),listUnordered:o(pe),paragraph:o($e),reference:Q,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:o(Ht),strong:o(Je),thematicBreak:o(Ve)},exit:{atxHeading:l(),atxHeadingSequence:O,autolink:l(),autolinkEmail:De,autolinkProtocol:Fe,blockQuote:l(),characterEscapeValue:U,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:Ce,characterReference:he,codeFenced:l(w),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:U,codeIndented:l(_),codeText:l(X),codeTextData:U,data:U,definition:l(),definitionDestinationString:R,definitionLabelString:S,definitionTitleString:k,emphasis:l(),hardBreakEscape:l(H),hardBreakTrailing:l(H),htmlFlow:l(F),htmlFlowData:U,htmlText:l(W),htmlTextData:U,image:l(ee),label:ie,labelText:re,lineEnding:z,link:l(J),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Te,resourceDestinationString:Z,resourceTitleString:te,resource:oe,setextHeading:l(j),setextHeadingLineSequence:P,setextHeadingText:M,strong:l(),thematicBreak:l()}};yoe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(_e){let Y={type:"root",children:[]};const L={stack:[Y],tokenStack:[],config:t,enter:a,exit:c,buffer:i,resume:u,data:n},B=[];let ce=-1;for(;++ce<_e.length;)if(_e[ce][1].type==="listOrdered"||_e[ce][1].type==="listUnordered")if(_e[ce][0]==="enter")B.push(ce);else{const we=B.pop();ce=s(_e,we,ce)}for(ce=-1;++ce<_e.length;){const we=t[_e[ce][0]];boe.call(we,_e[ce][1].type)&&we[_e[ce][1].type].call(Object.assign({sliceSerialize:_e[ce][2].sliceSerialize},L),_e[ce][1])}if(L.tokenStack.length>0){const we=L.tokenStack[L.tokenStack.length-1];(we[1]||GU).call(L,void 0,we[0])}for(Y.position={start:Zh(_e.length>0?_e[0][1].start:{line:1,column:1,offset:0}),end:Zh(_e.length>0?_e[_e.length-2][1].end:{line:1,column:1,offset:0})},ce=-1;++ce<t.transforms.length;)Y=t.transforms[ce](Y)||Y;return Y}function s(_e,Y,L){let B=Y-1,ce=-1,we=!1,ze,Be,ut,ln;for(;++B<=L;){const jt=_e[B];switch(jt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{jt[0]==="enter"?ce++:ce--,ln=void 0;break}case"lineEndingBlank":{jt[0]==="enter"&&(ze&&!ln&&!ce&&!ut&&(ut=B),ln=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ln=void 0}if(!ce&&jt[0]==="enter"&&jt[1].type==="listItemPrefix"||ce===-1&&jt[0]==="exit"&&(jt[1].type==="listUnordered"||jt[1].type==="listOrdered")){if(ze){let fn=B;for(Be=void 0;fn--;){const an=_e[fn];if(an[1].type==="lineEnding"||an[1].type==="lineEndingBlank"){if(an[0]==="exit")continue;Be&&(_e[Be][1].type="lineEndingBlank",we=!0),an[1].type="lineEnding",Be=fn}else if(!(an[1].type==="linePrefix"||an[1].type==="blockQuotePrefix"||an[1].type==="blockQuotePrefixWhitespace"||an[1].type==="blockQuoteMarker"||an[1].type==="listItemIndent"))break}ut&&(!Be||ut<Be)&&(ze._spread=!0),ze.end=Object.assign({},Be?_e[Be][1].start:jt[1].end),_e.splice(Be||B,0,["exit",ze,jt[2]]),B++,L++}if(jt[1].type==="listItemPrefix"){const fn={type:"listItem",_spread:!1,start:Object.assign({},jt[1].start),end:void 0};ze=fn,_e.splice(B,0,["enter",fn,jt[2]]),B++,L++,ut=void 0,ln=!0}}}return _e[Y][1]._spread=we,L}function o(_e,Y){return L;function L(B){a.call(this,_e(B),B),Y&&Y.call(this,B)}}function i(){this.stack.push({type:"fragment",children:[]})}function a(_e,Y,L){this.stack[this.stack.length-1].children.push(_e),this.stack.push(_e),this.tokenStack.push([Y,L||void 0]),_e.position={start:Zh(Y.start),end:void 0}}function l(_e){return Y;function Y(L){_e&&_e.call(this,L),c.call(this,L)}}function c(_e,Y){const L=this.stack.pop(),B=this.tokenStack.pop();if(B)B[0].type!==_e.type&&(Y?Y.call(this,_e,B[0]):(B[1]||GU).call(this,_e,B[0]));else throw new Error("Cannot close `"+_e.type+"` ("+sx({start:_e.start,end:_e.end})+"): its not open");L.position.end=Zh(_e.end)}function u(){return $M(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(_e){if(this.data.expectingFirstListItemValue){const Y=this.stack[this.stack.length-2];Y.start=Number.parseInt(this.sliceSerialize(_e),10),this.data.expectingFirstListItemValue=void 0}}function g(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.lang=_e}function y(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.meta=_e}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.value=_e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.value=_e.replace(/(\r?\n|\r)$/g,"")}function S(_e){const Y=this.resume(),L=this.stack[this.stack.length-1];L.label=Y,L.identifier=vu(this.sliceSerialize(_e)).toLowerCase()}function k(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.title=_e}function R(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.url=_e}function O(_e){const Y=this.stack[this.stack.length-1];if(!Y.depth){const L=this.sliceSerialize(_e).length;Y.depth=L}}function M(){this.data.setextHeadingSlurpLineEnding=!0}function P(_e){const Y=this.stack[this.stack.length-1];Y.depth=this.sliceSerialize(_e).codePointAt(0)===61?1:2}function j(){this.data.setextHeadingSlurpLineEnding=void 0}function q(_e){const L=this.stack[this.stack.length-1].children;let B=L[L.length-1];(!B||B.type!=="text")&&(B=Le(),B.position={start:Zh(_e.start),end:void 0},L.push(B)),this.stack.push(B)}function U(_e){const Y=this.stack.pop();Y.value+=this.sliceSerialize(_e),Y.position.end=Zh(_e.end)}function z(_e){const Y=this.stack[this.stack.length-1];if(this.data.atHardBreak){const L=Y.children[Y.children.length-1];L.position.end=Zh(_e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Y.type)&&(q.call(this,_e),U.call(this,_e))}function H(){this.data.atHardBreak=!0}function F(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.value=_e}function W(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.value=_e}function X(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.value=_e}function J(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const Y=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=Y,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function ee(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const Y=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=Y,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function re(_e){const Y=this.sliceSerialize(_e),L=this.stack[this.stack.length-2];L.label=iJe(Y),L.identifier=vu(Y).toLowerCase()}function ie(){const _e=this.stack[this.stack.length-1],Y=this.resume(),L=this.stack[this.stack.length-1];if(this.data.inReference=!0,L.type==="link"){const B=_e.children;L.children=B}else L.alt=Y}function Z(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.url=_e}function te(){const _e=this.resume(),Y=this.stack[this.stack.length-1];Y.title=_e}function oe(){this.data.inReference=void 0}function Q(){this.data.referenceType="collapsed"}function Te(_e){const Y=this.resume(),L=this.stack[this.stack.length-1];L.label=Y,L.identifier=vu(this.sliceSerialize(_e)).toLowerCase(),this.data.referenceType="full"}function ge(_e){this.data.characterReferenceType=_e.type}function Ce(_e){const Y=this.sliceSerialize(_e),L=this.data.characterReferenceType;let B;L?(B=qse(Y,L==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):B=BM(Y);const ce=this.stack[this.stack.length-1];ce.value+=B}function he(_e){const Y=this.stack.pop();Y.position.end=Zh(_e.end)}function Fe(_e){U.call(this,_e);const Y=this.stack[this.stack.length-1];Y.url=this.sliceSerialize(_e)}function De(_e){U.call(this,_e);const Y=this.stack[this.stack.length-1];Y.url="mailto:"+this.sliceSerialize(_e)}function Re(){return{type:"blockquote",children:[]}}function tt(){return{type:"code",lang:null,meta:null,value:""}}function fe(){return{type:"inlineCode",value:""}}function nt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ot(){return{type:"emphasis",children:[]}}function Ht(){return{type:"heading",depth:0,children:[]}}function qt(){return{type:"break"}}function Pt(){return{type:"html",value:""}}function tn(){return{type:"image",title:null,url:"",alt:null}}function xt(){return{type:"link",title:null,url:"",children:[]}}function pe(_e){return{type:"list",ordered:_e.type==="listOrdered",start:null,spread:_e._spread,children:[]}}function Ne(_e){return{type:"listItem",spread:_e._spread,checked:null,children:[]}}function $e(){return{type:"paragraph",children:[]}}function Je(){return{type:"strong",children:[]}}function Le(){return{type:"text",value:""}}function Ve(){return{type:"thematicBreak"}}}function Zh(e){return{line:e.line,column:e.column,offset:e.offset}}function yoe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?yoe(e,r):ett(e,r)}}function ett(e,t){let n;for(n in t)if(boe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function GU(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+sx({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+sx({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+sx({start:t.start,end:t.end})+") is still open")}function ttt(e){const t=this;t.parser=n;function n(r){return Xet(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function ntt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function rtt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function stt(e,t){const n=t.value?t.value+`
`:"",r={},s=t.lang?t.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function ott(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function itt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function att(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=zb(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let i,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=o+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}function ltt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ctt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function voe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),o=s[0];o&&o.type==="text"?o.value="["+o.value:s.unshift({type:"text",value:"["});const i=s[s.length-1];return i&&i.type==="text"?i.value+=r:s.push({type:"text",value:r}),s}function utt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return voe(e,t);const s={src:zb(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,o),e.applyData(t,o)}function dtt(e,t){const n={src:zb(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function ftt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function htt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return voe(e,t);const s={href:zb(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function ptt(e,t){const n={href:zb(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function mtt(e,t,n){const r=e.all(t),s=n?gtt(n):xoe(t),o={},i=[];if(typeof t.checked=="boolean"){const u=r[0];let f;u&&u.type==="element"&&u.tagName==="p"?f=u:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(s||a!==0||u.type!=="element"||u.tagName!=="p")&&i.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!s?i.push(...u.children):i.push(u)}const l=r[r.length-1];l&&(s||l.type!=="element"||l.tagName!=="p")&&i.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:o,children:i};return e.patch(t,c),e.applyData(t,c)}function gtt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=xoe(n[r])}return t}function xoe(e){const t=e.spread;return t??e.children.length>1}function btt(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const i=r[s];if(i.type==="element"&&i.tagName==="li"&&i.properties&&Array.isArray(i.properties.className)&&i.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function ytt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vtt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function xtt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function wtt(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const i={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],i),s.push(i)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Md(t.children[1]),l=JC(t.children[t.children.length-1]);a&&l&&(i.position={start:a,end:l}),s.push(i)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,o),e.applyData(t,o)}function Ett(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",i=n&&n.type==="table"?n.align:void 0,a=i?i.length:t.children.length;let l=-1;const c=[];for(;++l<a;){const f=t.children[l],m={},g=i?i[l]:void 0;g&&(m.align=g);let y={type:"element",tagName:o,properties:m,children:[]};f&&(y.children=e.all(f),e.patch(f,y),y=e.applyData(f,y)),c.push(y)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,u),e.applyData(t,u)}function _tt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const WU=9,YU=32;function Stt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const o=[];for(;r;)o.push(KU(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return o.push(KU(t.slice(s),s>0,!1)),o.join("")}function KU(e,t,n){let r=0,s=e.length;if(t){let o=e.codePointAt(r);for(;o===WU||o===YU;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(s-1);for(;o===WU||o===YU;)s--,o=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function Ttt(e,t){const n={type:"text",value:Stt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Ctt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const ktt={blockquote:ntt,break:rtt,code:stt,delete:ott,emphasis:itt,footnoteReference:att,heading:ltt,html:ctt,imageReference:utt,image:dtt,inlineCode:ftt,linkReference:htt,link:ptt,listItem:mtt,list:btt,paragraph:ytt,root:vtt,strong:xtt,table:wtt,tableCell:_tt,tableRow:Ett,text:Ttt,thematicBreak:Ctt,toml:l_,yaml:l_,definition:l_,footnoteDefinition:l_};function l_(){}function Att(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Ntt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Itt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Att,r=e.options.footnoteBackLabel||Ntt,s=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[l]);if(!c)continue;const u=e.all(c),f=String(c.identifier).toUpperCase(),m=zb(f.toLowerCase());let g=0;const y=[],v=e.footnoteCounts.get(f);for(;v!==void 0&&++g<=v;){y.length>0&&y.push({type:"text",value:" "});let S=typeof n=="string"?n:n(l,g);typeof S=="string"&&(S={type:"text",value:S}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(S)?S:[S]})}const w=u[u.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const S=w.children[w.children.length-1];S&&S.type==="text"?S.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...y)}else u.push(...y);const _={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(u,!0)};e.patch(c,_),a.push(_)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...ub(i),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const DI={}.hasOwnProperty,Rtt={};function Mtt(e,t){const n=t||Rtt,r=new Map,s=new Map,o=new Map,i={...ktt,...n.handlers},a={all:c,applyData:Dtt,definitionById:r,footnoteById:s,footnoteCounts:o,footnoteOrder:[],handlers:i,one:l,options:n,patch:Ott,wrap:Ltt};return lb(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const f=u.type==="definition"?r:s,m=String(u.identifier).toUpperCase();f.has(m)||f.set(m,u)}}),a;function l(u,f){const m=u.type,g=a.handlers[m];if(DI.call(a.handlers,m)&&g)return g(a,u,f);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in u){const{children:v,...w}=u,_=ub(w);return _.children=a.all(u),_}return ub(u)}return(a.options.unknownHandler||Ptt)(a,u,f)}function c(u){const f=[];if("children"in u){const m=u.children;let g=-1;for(;++g<m.length;){const y=a.one(m[g],u);if(y){if(g&&m[g-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=ZU(y.value)),!Array.isArray(y)&&y.type==="element")){const v=y.children[0];v&&v.type==="text"&&(v.value=ZU(v.value))}Array.isArray(y)?f.push(...y):f.push(y)}}}return f}}function Ott(e,t){e.position&&(t.position=XYe(e))}function Dtt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const i="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:i}}n.type==="element"&&o&&Object.assign(n.properties,ub(o)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function Ptt(e,t){const n=t.data||{},r="value"in t&&!(DI.call(n,"hProperties")||DI.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Ltt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function ZU(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function JU(e,t){const n=Mtt(e,t),r=n.one(e,void 0),s=Itt(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&o.children.push({type:"text",value:`
`},s),o}function $tt(e,t){return e&&"run"in e?async function(n,r){const s=JU(n,{file:r,...t});await e.run(s,r)}:function(n,r){return JU(n,{file:r,...e||t})}}function XU(e){if(e)throw e}var SA,QU;function Ftt(){if(QU)return SA;QU=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(c){return typeof Array.isArray=="function"?Array.isArray(c):t.call(c)==="[object Array]"},o=function(c){if(!c||t.call(c)!=="[object Object]")return!1;var u=e.call(c,"constructor"),f=c.constructor&&c.constructor.prototype&&e.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!f)return!1;var m;for(m in c);return typeof m>"u"||e.call(c,m)},i=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},a=function(c,u){if(u==="__proto__")if(e.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return SA=function l(){var c,u,f,m,g,y,v=arguments[0],w=1,_=arguments.length,S=!1;for(typeof v=="boolean"&&(S=v,v=arguments[1]||{},w=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});w<_;++w)if(c=arguments[w],c!=null)for(u in c)f=a(v,u),m=a(c,u),v!==m&&(S&&m&&(o(m)||(g=s(m)))?(g?(g=!1,y=f&&s(f)?f:[]):y=f&&o(f)?f:{},i(v,{name:u,newValue:l(S,y,m)})):typeof m<"u"&&i(v,{name:u,newValue:m}));return v},SA}var Btt=Ftt();const TA=km(Btt);function PI(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ztt(){const e=[],t={run:n,use:r};return t;function n(...s){let o=-1;const i=s.pop();if(typeof i!="function")throw new TypeError("Expected function as last argument, not "+i);a(null,...s);function a(l,...c){const u=e[++o];let f=-1;if(l){i(l);return}for(;++f<s.length;)(c[f]===null||c[f]===void 0)&&(c[f]=s[f]);s=c,u?jtt(u,a)(...c):i(null,...c)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function jtt(e,t){let n;return r;function r(...i){const a=e.length>i.length;let l;a&&i.push(s);try{l=e.apply(this,i)}catch(c){const u=c;if(a&&n)throw u;return s(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(o,s):l instanceof Error?s(l):o(l))}function s(i,...a){n||(n=!0,t(i,...a))}function o(i){s(null,i)}}const ad={basename:Utt,dirname:Htt,extname:Vtt,join:qtt,sep:"/"};function Utt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ww(e);let n=0,r=-1,s=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(o){n=s+1;break}}else r<0&&(o=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let i=-1,a=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(o){n=s+1;break}}else i<0&&(o=!0,i=s+1),a>-1&&(e.codePointAt(s)===t.codePointAt(a--)?a<0&&(r=s):(a=-1,r=i));return n===r?r=i:r<0&&(r=e.length),e.slice(n,r)}function Htt(e){if(Ww(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Vtt(e){Ww(e);let t=e.length,n=-1,r=0,s=-1,o=0,i;for(;t--;){const a=e.codePointAt(t);if(a===47){if(i){r=t+1;break}continue}n<0&&(i=!0,n=t+1),a===46?s<0?s=t:o!==1&&(o=1):s>-1&&(o=-1)}return s<0||n<0||o===0||o===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function qtt(...e){let t=-1,n;for(;++t<e.length;)Ww(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Gtt(n)}function Gtt(e){Ww(e);const t=e.codePointAt(0)===47;let n=Wtt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Wtt(e,t){let n="",r=0,s=-1,o=0,i=-1,a,l;for(;++i<=e.length;){if(i<e.length)a=e.codePointAt(i);else{if(a===47)break;a=47}if(a===47){if(!(s===i-1||o===1))if(s!==i-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=i,o=0;continue}}else if(n.length>0){n="",r=0,s=i,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,i):n=e.slice(s+1,i),r=i-s-1;s=i,o=0}else a===46&&o>-1?o++:o=-1}return n}function Ww(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ytt={cwd:Ktt};function Ktt(){return"/"}function LI(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Ztt(e){if(typeof e=="string")e=new URL(e);else if(!LI(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Jtt(e)}function Jtt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const CA=["history","path","basename","stem","extname","dirname"];class Xtt{constructor(t){let n;t?LI(t)?n={path:t}:typeof t=="string"||Qtt(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Ytt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<CA.length;){const o=CA[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let s;for(s in n)CA.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?ad.basename(this.path):void 0}set basename(t){AA(t,"basename"),kA(t,"basename"),this.path=ad.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?ad.dirname(this.path):void 0}set dirname(t){eH(this.basename,"dirname"),this.path=ad.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?ad.extname(this.path):void 0}set extname(t){if(kA(t,"extname"),eH(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ad.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){LI(t)&&(t=Ztt(t)),AA(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?ad.basename(this.path,this.extname):void 0}set stem(t){AA(t,"stem"),kA(t,"stem"),this.path=ad.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new Sa(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function kA(e,t){if(e&&e.includes(ad.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ad.sep+"`")}function AA(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function eH(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Qtt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ent=(function(e){const r=this.constructor.prototype,s=r[e],o=function(){return s.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),tnt={}.hasOwnProperty;class qM extends ent{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ztt()}copy(){const t=new qM;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(TA(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(RA("data",this.frozen),this.namespace[t]=n,this):tnt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(RA("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=c_(t),r=this.parser||this.Parser;return NA("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),NA("process",this.parser||this.Parser),IA("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(o,i){const a=c_(t),l=r.parse(a);r.run(l,a,function(u,f,m){if(u||!f||!m)return c(u);const g=f,y=r.stringify(g,m);snt(y)?m.value=y:m.result=y,c(u,m)});function c(u,f){u||!f?i(u):o?o(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),NA("processSync",this.parser||this.Parser),IA("processSync",this.compiler||this.Compiler),this.process(t,s),nH("processSync","process",n),r;function s(o,i){n=!0,XU(o),r=i}}run(t,n,r){tH(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(i,a){const l=c_(n);s.run(t,l,c);function c(u,f,m){const g=f||t;u?a(u):i?i(g):r(void 0,g,m)}}}runSync(t,n){let r=!1,s;return this.run(t,n,o),nH("runSync","run",r),s;function o(i,a){XU(i),s=a,r=!0}}stringify(t,n){this.freeze();const r=c_(n),s=this.compiler||this.Compiler;return IA("stringify",s),tH(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(RA("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):i(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...f]=c;l(u,f)}else i(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function i(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(s.settings=TA(!0,s.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const f=c[u];o(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let f=-1,m=-1;for(;++f<r.length;)if(r[f][0]===c){m=f;break}if(m===-1)r.push([c,...u]);else if(u.length>0){let[g,...y]=u;const v=r[m][1];PI(v)&&PI(g)&&(g=TA(!0,v,g)),r[m]=[c,g,...y]}}}}const nnt=new qM().freeze();function NA(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function IA(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function RA(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function tH(e){if(!PI(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function nH(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function c_(e){return rnt(e)?e:new Xtt(e)}function rnt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function snt(e){return typeof e=="string"||ont(e)}function ont(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}function GM(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Um=GM();function woe(e){Um=e}var ox={exec:()=>null};function cs(e,t=""){let n=typeof e=="string"?e:e.source,r={replace:(s,o)=>{let i=typeof o=="string"?o:o.source;return i=i.replace(Fa.caret,"$1"),n=n.replace(s,i),r},getRegex:()=>new RegExp(n,t)};return r}var int=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Fa={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},ant=/^(?:[ \t]*(?:\n|$))+/,lnt=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,cnt=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Yw=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,unt=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,WM=/(?:[*+-]|\d{1,9}[.)])/,Eoe=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_oe=cs(Eoe).replace(/bull/g,WM).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),dnt=cs(Eoe).replace(/bull/g,WM).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),YM=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,fnt=/^[^\n]+/,KM=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,hnt=cs(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",KM).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),pnt=cs(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,WM).getRegex(),e3="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ZM=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,mnt=cs("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ZM).replace("tag",e3).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Soe=cs(YM).replace("hr",Yw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",e3).getRegex(),gnt=cs(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Soe).getRegex(),JM={blockquote:gnt,code:lnt,def:hnt,fences:cnt,heading:unt,hr:Yw,html:mnt,lheading:_oe,list:pnt,newline:ant,paragraph:Soe,table:ox,text:fnt},rH=cs("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Yw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",e3).getRegex(),bnt={...JM,lheading:dnt,table:rH,paragraph:cs(YM).replace("hr",Yw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",rH).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",e3).getRegex()},ynt={...JM,html:cs(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ZM).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ox,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:cs(YM).replace("hr",Yw).replace("heading",` *#{1,6} *[^
]`).replace("lheading",_oe).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},vnt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,xnt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Toe=/^( {2,}|\\)\n(?!\s*$)/,wnt=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,t3=/[\p{P}\p{S}]/u,XM=/[\s\p{P}\p{S}]/u,Coe=/[^\s\p{P}\p{S}]/u,Ent=cs(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,XM).getRegex(),koe=/(?!~)[\p{P}\p{S}]/u,_nt=/(?!~)[\s\p{P}\p{S}]/u,Snt=/(?:[^\s\p{P}\p{S}]|~)/u,Tnt=cs(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",int?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Aoe=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Cnt=cs(Aoe,"u").replace(/punct/g,t3).getRegex(),knt=cs(Aoe,"u").replace(/punct/g,koe).getRegex(),Noe="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Ant=cs(Noe,"gu").replace(/notPunctSpace/g,Coe).replace(/punctSpace/g,XM).replace(/punct/g,t3).getRegex(),Nnt=cs(Noe,"gu").replace(/notPunctSpace/g,Snt).replace(/punctSpace/g,_nt).replace(/punct/g,koe).getRegex(),Int=cs("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Coe).replace(/punctSpace/g,XM).replace(/punct/g,t3).getRegex(),Rnt=cs(/\\(punct)/,"gu").replace(/punct/g,t3).getRegex(),Mnt=cs(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ont=cs(ZM).replace("(?:-->|$)","-->").getRegex(),Dnt=cs("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ont).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),s4=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Pnt=cs(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",s4).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ioe=cs(/^!?\[(label)\]\[(ref)\]/).replace("label",s4).replace("ref",KM).getRegex(),Roe=cs(/^!?\[(ref)\](?:\[\])?/).replace("ref",KM).getRegex(),Lnt=cs("reflink|nolink(?!\\()","g").replace("reflink",Ioe).replace("nolink",Roe).getRegex(),sH=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,QM={_backpedal:ox,anyPunctuation:Rnt,autolink:Mnt,blockSkip:Tnt,br:Toe,code:xnt,del:ox,emStrongLDelim:Cnt,emStrongRDelimAst:Ant,emStrongRDelimUnd:Int,escape:vnt,link:Pnt,nolink:Roe,punctuation:Ent,reflink:Ioe,reflinkSearch:Lnt,tag:Dnt,text:wnt,url:ox},$nt={...QM,link:cs(/^!?\[(label)\]\((.*?)\)/).replace("label",s4).getRegex(),reflink:cs(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",s4).getRegex()},$I={...QM,emStrongRDelimAst:Nnt,emStrongLDelim:knt,url:cs(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",sH).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:cs(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",sH).getRegex()},Fnt={...$I,br:cs(Toe).replace("{2,}","*").getRegex(),text:cs($I.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},u_={normal:JM,gfm:bnt,pedantic:ynt},sv={normal:QM,gfm:$I,breaks:Fnt,pedantic:$nt},Bnt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oH=e=>Bnt[e];function td(e,t){if(t){if(Fa.escapeTest.test(e))return e.replace(Fa.escapeReplace,oH)}else if(Fa.escapeTestNoEncode.test(e))return e.replace(Fa.escapeReplaceNoEncode,oH);return e}function iH(e){try{e=encodeURI(e).replace(Fa.percentDecode,"%")}catch{return null}return e}function aH(e,t){var o;let n=e.replace(Fa.findPipe,(i,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(Fa.splitPipe),s=0;if(r[0].trim()||r.shift(),r.length>0&&!((o=r.at(-1))!=null&&o.trim())&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(Fa.slashPipe,"|");return r}function ov(e,t,n){let r=e.length;if(r===0)return"";let s=0;for(;s<r&&e.charAt(r-s-1)===t;)s++;return e.slice(0,r-s)}function znt(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function lH(e,t,n,r,s){let o=t.href,i=t.title||null,a=e[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:o,title:i,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function jnt(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(r===null)return t;let s=r[1];return t.split(`
`).map(o=>{let i=o.match(n.other.beginningSpace);if(i===null)return o;let[a]=i;return a.length>=s.length?o.slice(s.length):o}).join(`
`)}var o4=class{constructor(t){Ze(this,"options");Ze(this,"rules");Ze(this,"lexer");this.options=t||Um}space(t){let n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){let n=this.rules.block.code.exec(t);if(n){let r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ov(r,`
`)}}}fences(t){let n=this.rules.block.fences.exec(t);if(n){let r=n[0],s=jnt(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:s}}}heading(t){let n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){let s=ov(r,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(r=s.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){let n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:ov(n[0],`
`)}}blockquote(t){let n=this.rules.block.blockquote.exec(t);if(n){let r=ov(n[0],`
`).split(`
`),s="",o="",i=[];for(;r.length>0;){let a=!1,l=[],c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))l.push(r[c]),a=!0;else if(!a)l.push(r[c]);else break;r=r.slice(c);let u=l.join(`
`),f=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${u}`:u,o=o?`${o}
${f}`:f;let m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=m,r.length===0)break;let g=i.at(-1);if((g==null?void 0:g.type)==="code")break;if((g==null?void 0:g.type)==="blockquote"){let y=g,v=y.raw+`
`+r.join(`
`),w=this.blockquote(v);i[i.length-1]=w,s=s.substring(0,s.length-y.raw.length)+w.raw,o=o.substring(0,o.length-y.text.length)+w.text;break}else if((g==null?void 0:g.type)==="list"){let y=g,v=y.raw+`
`+r.join(`
`),w=this.list(v);i[i.length-1]=w,s=s.substring(0,s.length-g.raw.length)+w.raw,o=o.substring(0,o.length-y.raw.length)+w.raw,r=v.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:i,text:o}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r=n[1].trim(),s=r.length>1,o={type:"list",raw:"",ordered:s,start:s?+r.slice(0,-1):"",loose:!1,items:[]};r=s?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=s?r:"[*+-]");let i=this.rules.other.listItemRegex(r),a=!1;for(;t;){let c=!1,u="",f="";if(!(n=i.exec(t))||this.rules.block.hr.test(t))break;u=n[0],t=t.substring(u.length);let m=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,S=>" ".repeat(3*S.length)),g=t.split(`
`,1)[0],y=!m.trim(),v=0;if(this.options.pedantic?(v=2,f=m.trimStart()):y?v=n[1].length+1:(v=n[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,f=m.slice(v),v+=n[1].length),y&&this.rules.other.blankLine.test(g)&&(u+=g+`
`,t=t.substring(g.length+1),c=!0),!c){let S=this.rules.other.nextBulletRegex(v),k=this.rules.other.hrRegex(v),R=this.rules.other.fencesBeginRegex(v),O=this.rules.other.headingBeginRegex(v),M=this.rules.other.htmlBeginRegex(v);for(;t;){let P=t.split(`
`,1)[0],j;if(g=P,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),j=g):j=g.replace(this.rules.other.tabCharGlobal,"    "),R.test(g)||O.test(g)||M.test(g)||S.test(g)||k.test(g))break;if(j.search(this.rules.other.nonSpaceChar)>=v||!g.trim())f+=`
`+j.slice(v);else{if(y||m.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||R.test(m)||O.test(m)||k.test(m))break;f+=`
`+g}!y&&!g.trim()&&(y=!0),u+=P+`
`,t=t.substring(P.length+1),m=j.slice(v)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0));let w=null,_;this.options.gfm&&(w=this.rules.other.listIsTask.exec(f),w&&(_=w[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:u,task:!!w,checked:_,loose:!1,text:f,tokens:[]}),o.raw+=u}let l=o.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let c=0;c<o.items.length;c++)if(this.lexer.state.top=!1,o.items[c].tokens=this.lexer.blockTokens(o.items[c].text,[]),!o.loose){let u=o.items[c].tokens.filter(m=>m.type==="space"),f=u.length>0&&u.some(m=>this.rules.other.anyLine.test(m.raw));o.loose=f}if(o.loose)for(let c=0;c<o.items.length;c++)o.items[c].loose=!0;return o}}html(t){let n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){let n=this.rules.block.def.exec(t);if(n){let r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:s,title:o}}}table(t){var a;let n=this.rules.block.table.exec(t);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let r=aH(n[1]),s=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===s.length){for(let l of s)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<r.length;l++)i.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:i.align[l]});for(let l of o)i.rows.push(aH(l,i.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:i.align[u]})));return i}}lheading(t){let n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){let n=this.rules.block.paragraph.exec(t);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){let n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){let n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(t){let n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){let n=this.rules.inline.link.exec(t);if(n){let r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let i=ov(r.slice(0,-1),"\\");if((r.length-i.length)%2===0)return}else{let i=znt(n[2],"()");if(i===-2)return;if(i>-1){let a=(n[0].indexOf("!")===0?5:4)+n[1].length+i;n[2]=n[2].substring(0,i),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let s=n[2],o="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(s);i&&(s=i[1],o=i[3])}else o=n[3]?n[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?s=s.slice(1):s=s.slice(1,-1)),lH(n,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let s=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=n[s.toLowerCase()];if(!o){let i=r[0].charAt(0);return{type:"text",raw:i,text:i}}return lH(r,o,r[0],this.lexer,this.rules)}}emStrong(t,n,r=""){let s=this.rules.inline.emStrongLDelim.exec(t);if(!(!s||s[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!r||this.rules.inline.punctuation.exec(r))){let o=[...s[0]].length-1,i,a,l=o,c=0,u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,n=n.slice(-1*t.length+o);(s=u.exec(n))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(a=[...i].length,s[3]||s[4]){l+=a;continue}else if((s[5]||s[6])&&o%3&&!((o+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let f=[...s[0]][0].length,m=t.slice(0,o+s.index+f+a);if(Math.min(o,a)%2){let y=m.slice(1,-1);return{type:"em",raw:m,text:y,tokens:this.lexer.inlineTokens(y)}}let g=m.slice(2,-2);return{type:"strong",raw:m,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(t){let n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(r),o=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return s&&o&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(t){let n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){let n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){let n=this.rules.inline.autolink.exec(t);if(n){let r,s;return n[2]==="@"?(r=n[1],s="mailto:"+r):(r=n[1],s=r),{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(t){var r;let n;if(n=this.rules.inline.url.exec(t)){let s,o;if(n[2]==="@")s=n[0],o="mailto:"+s;else{let i;do i=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(i!==n[0]);s=n[0],n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(t){let n=this.rules.inline.text.exec(t);if(n){let r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}},Cc=class FI{constructor(t){Ze(this,"tokens");Ze(this,"options");Ze(this,"state");Ze(this,"tokenizer");Ze(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Um,this.options.tokenizer=this.options.tokenizer||new o4,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Fa,block:u_.normal,inline:sv.normal};this.options.pedantic?(n.block=u_.pedantic,n.inline=sv.pedantic):this.options.gfm&&(n.block=u_.gfm,this.options.breaks?n.inline=sv.breaks:n.inline=sv.gfm),this.tokenizer.rules=n}static get rules(){return{block:u_,inline:sv}}static lex(t,n){return new FI(n).lex(t)}static lexInline(t,n){return new FI(n).inlineTokens(t)}lex(t){t=t.replace(Fa.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){var s,o,i;for(this.options.pedantic&&(t=t.replace(Fa.tabCharGlobal,"    ").replace(Fa.spaceLine,""));t;){let a;if((o=(s=this.options.extensions)==null?void 0:s.block)!=null&&o.some(c=>(a=c.call({lexer:this},t,n))?(t=t.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);let c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},n.push(a));continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),n.push(a);continue}let l=t;if((i=this.options.extensions)!=null&&i.startBlock){let c=1/0,u=t.slice(1),f;this.options.extensions.startBlock.forEach(m=>{f=m.call({lexer:this},u),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){let c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),r=l.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var l,c,u,f,m;let r=t,s=null;if(this.tokens.links){let g=Object.keys(this.tokens.links);if(g.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)g.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let o;for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)o=s[2]?s[2].length:0,r=r.slice(0,s.index+o)+"["+"a".repeat(s[0].length-o-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=((c=(l=this.options.hooks)==null?void 0:l.emStrongMask)==null?void 0:c.call({lexer:this},r))??r;let i=!1,a="";for(;t;){i||(a=""),i=!1;let g;if((f=(u=this.options.extensions)==null?void 0:u.inline)!=null&&f.some(v=>(g=v.call({lexer:this},t,n))?(t=t.substring(g.raw.length),n.push(g),!0):!1))continue;if(g=this.tokenizer.escape(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.tag(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.link(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(g.raw.length);let v=n.at(-1);g.type==="text"&&(v==null?void 0:v.type)==="text"?(v.raw+=g.raw,v.text+=g.text):n.push(g);continue}if(g=this.tokenizer.emStrong(t,r,a)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.codespan(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.br(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.del(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.autolink(t)){t=t.substring(g.raw.length),n.push(g);continue}if(!this.state.inLink&&(g=this.tokenizer.url(t))){t=t.substring(g.raw.length),n.push(g);continue}let y=t;if((m=this.options.extensions)!=null&&m.startInline){let v=1/0,w=t.slice(1),_;this.options.extensions.startInline.forEach(S=>{_=S.call({lexer:this},w),typeof _=="number"&&_>=0&&(v=Math.min(v,_))}),v<1/0&&v>=0&&(y=t.substring(0,v+1))}if(g=this.tokenizer.inlineText(y)){t=t.substring(g.raw.length),g.raw.slice(-1)!=="_"&&(a=g.raw.slice(-1)),i=!0;let v=n.at(-1);(v==null?void 0:v.type)==="text"?(v.raw+=g.raw,v.text+=g.text):n.push(g);continue}if(t){let v="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(v);break}else throw new Error(v)}}return n}},i4=class{constructor(t){Ze(this,"options");Ze(this,"parser");this.options=t||Um}space(t){return""}code({text:t,lang:n,escaped:r}){var i;let s=(i=(n||"").match(Fa.notSpaceStart))==null?void 0:i[0],o=t.replace(Fa.endingNewline,"")+`
`;return s?'<pre><code class="language-'+td(s)+'">'+(r?o:td(o,!0))+`</code></pre>
`:"<pre><code>"+(r?o:td(o,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:n}){return`<h${n}>${this.parser.parseInline(t)}</h${n}>
`}hr(t){return`<hr>
`}list(t){let n=t.ordered,r=t.start,s="";for(let a=0;a<t.items.length;a++){let l=t.items[a];s+=this.listitem(l)}let o=n?"ol":"ul",i=n&&r!==1?' start="'+r+'"':"";return"<"+o+i+`>
`+s+"</"+o+`>
`}listitem(t){var r;let n="";if(t.task){let s=this.checkbox({checked:!!t.checked});t.loose?((r=t.tokens[0])==null?void 0:r.type)==="paragraph"?(t.tokens[0].text=s+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=s+" "+td(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):n+=s+" "}return n+=this.parser.parse(t.tokens,!!t.loose),`<li>${n}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let n="",r="";for(let o=0;o<t.header.length;o++)r+=this.tablecell(t.header[o]);n+=this.tablerow({text:r});let s="";for(let o=0;o<t.rows.length;o++){let i=t.rows[o];r="";for(let a=0;a<i.length;a++)r+=this.tablecell(i[a]);s+=this.tablerow({text:r})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+s+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let n=this.parser.parseInline(t.tokens),r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${td(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:n,tokens:r}){let s=this.parser.parseInline(r),o=iH(t);if(o===null)return s;t=o;let i='<a href="'+t+'"';return n&&(i+=' title="'+td(n)+'"'),i+=">"+s+"</a>",i}image({href:t,title:n,text:r,tokens:s}){s&&(r=this.parser.parseInline(s,this.parser.textRenderer));let o=iH(t);if(o===null)return td(r);t=o;let i=`<img src="${t}" alt="${r}"`;return n&&(i+=` title="${td(n)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:td(t.text)}},e9=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},lu=class BI{constructor(t){Ze(this,"options");Ze(this,"renderer");Ze(this,"textRenderer");this.options=t||Um,this.options.renderer=this.options.renderer||new i4,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new e9}static parse(t,n){return new BI(n).parse(t)}static parseInline(t,n){return new BI(n).parseInline(t)}parse(t,n=!0){var s,o;let r="";for(let i=0;i<t.length;i++){let a=t[i];if((o=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&o[a.type]){let c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){r+=u||"";continue}}let l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"def":{r+=this.renderer.def(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;i+1<t.length&&t[i+1].type==="text";)c=t[++i],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(t,n=this.renderer){var s,o;let r="";for(let i=0;i<t.length;i++){let a=t[i];if((o=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&o[a.type]){let c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}let l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},w_,kv=(w_=class{constructor(t){Ze(this,"options");Ze(this,"block");this.options=t||Um}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Cc.lex:Cc.lexInline}provideParser(){return this.block?lu.parse:lu.parseInline}},Ze(w_,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Ze(w_,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),w_),Unt=class{constructor(...t){Ze(this,"defaults",GM());Ze(this,"options",this.setOptions);Ze(this,"parse",this.parseMarkdown(!0));Ze(this,"parseInline",this.parseMarkdown(!1));Ze(this,"Parser",lu);Ze(this,"Renderer",i4);Ze(this,"TextRenderer",e9);Ze(this,"Lexer",Cc);Ze(this,"Tokenizer",o4);Ze(this,"Hooks",kv);this.use(...t)}walkTokens(t,n){var s,o;let r=[];for(let i of t)switch(r=r.concat(n.call(this,i)),i.type){case"table":{let a=i;for(let l of a.header)r=r.concat(this.walkTokens(l.tokens,n));for(let l of a.rows)for(let c of l)r=r.concat(this.walkTokens(c.tokens,n));break}case"list":{let a=i;r=r.concat(this.walkTokens(a.items,n));break}default:{let a=i;(o=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...t){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{let s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let i=n.renderers[o.name];i?n.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=i.apply(this,a)),l}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=n[o.level];i?i.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),s.extensions=n),r.renderer){let o=this.defaults.renderer||new i4(this.defaults);for(let i in r.renderer){if(!(i in o))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let a=i,l=r.renderer[a],c=o[a];o[a]=(...u)=>{let f=l.apply(o,u);return f===!1&&(f=c.apply(o,u)),f||""}}s.renderer=o}if(r.tokenizer){let o=this.defaults.tokenizer||new o4(this.defaults);for(let i in r.tokenizer){if(!(i in o))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let a=i,l=r.tokenizer[a],c=o[a];o[a]=(...u)=>{let f=l.apply(o,u);return f===!1&&(f=c.apply(o,u)),f}}s.tokenizer=o}if(r.hooks){let o=this.defaults.hooks||new kv;for(let i in r.hooks){if(!(i in o))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let a=i,l=r.hooks[a],c=o[a];kv.passThroughHooks.has(i)?o[a]=u=>{if(this.defaults.async&&kv.passThroughHooksRespectAsync.has(i))return(async()=>{let m=await l.call(o,u);return c.call(o,m)})();let f=l.call(o,u);return c.call(o,f)}:o[a]=(...u)=>{if(this.defaults.async)return(async()=>{let m=await l.apply(o,u);return m===!1&&(m=await c.apply(o,u)),m})();let f=l.apply(o,u);return f===!1&&(f=c.apply(o,u)),f}}s.hooks=o}if(r.walkTokens){let o=this.defaults.walkTokens,i=r.walkTokens;s.walkTokens=function(a){let l=[];return l.push(i.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return Cc.lex(t,n??this.defaults)}parser(t,n){return lu.parse(t,n??this.defaults)}parseMarkdown(t){return(n,r)=>{let s={...r},o={...this.defaults,...s},i=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&s.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=t),o.async)return(async()=>{let a=o.hooks?await o.hooks.preprocess(n):n,l=await(o.hooks?await o.hooks.provideLexer():t?Cc.lex:Cc.lexInline)(a,o),c=o.hooks?await o.hooks.processAllTokens(l):l;o.walkTokens&&await Promise.all(this.walkTokens(c,o.walkTokens));let u=await(o.hooks?await o.hooks.provideParser():t?lu.parse:lu.parseInline)(c,o);return o.hooks?await o.hooks.postprocess(u):u})().catch(i);try{o.hooks&&(n=o.hooks.preprocess(n));let a=(o.hooks?o.hooks.provideLexer():t?Cc.lex:Cc.lexInline)(n,o);o.hooks&&(a=o.hooks.processAllTokens(a)),o.walkTokens&&this.walkTokens(a,o.walkTokens);let l=(o.hooks?o.hooks.provideParser():t?lu.parse:lu.parseInline)(a,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(a){return i(a)}}}onError(t,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let s="<p>An error occurred:</p><pre>"+td(r.message+"",!0)+"</pre>";return n?Promise.resolve(s):s}if(n)return Promise.reject(r);throw r}}},_m=new Unt;function $s(e,t){return _m.parse(e,t)}$s.options=$s.setOptions=function(e){return _m.setOptions(e),$s.defaults=_m.defaults,woe($s.defaults),$s};$s.getDefaults=GM;$s.defaults=Um;$s.use=function(...e){return _m.use(...e),$s.defaults=_m.defaults,woe($s.defaults),$s};$s.walkTokens=function(e,t){return _m.walkTokens(e,t)};$s.parseInline=_m.parseInline;$s.Parser=lu;$s.parser=lu.parse;$s.Renderer=i4;$s.TextRenderer=e9;$s.Lexer=Cc;$s.lexer=Cc.lex;$s.Tokenizer=o4;$s.Hooks=kv;$s.parse=$s;$s.options;$s.setOptions;$s.use;$s.walkTokens;$s.parseInline;lu.parse;Cc.lex;var vr=(...e)=>Gq(gR(e)),$1=(e,t,n)=>{let r=typeof t=="string"?new Blob([t],{type:n}):t,s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},Hnt=x.createContext({code:""}),Moe=()=>x.useContext(Hnt),cH=({onCopy:e,onError:t,timeout:n=2e3,children:r,className:s,code:o,...i})=>{let[a,l]=x.useState(!1),c=x.useRef(0),{code:u}=Moe(),{isAnimating:f}=x.useContext(Au),m=o??u,g=async()=>{var v;if(typeof window>"u"||!((v=navigator==null?void 0:navigator.clipboard)!=null&&v.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{a||(await navigator.clipboard.writeText(m),l(!0),e==null||e(),c.current=window.setTimeout(()=>l(!1),n))}catch(w){t==null||t(w)}};x.useEffect(()=>()=>{window.clearTimeout(c.current)},[]);let y=a?coe:uoe;return h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),"data-streamdown":"code-block-copy-button",disabled:f,onClick:g,title:"Copy Code",type:"button",...i,children:r??h.jsx(y,{size:14})})},uH={"1c":"1c","1c-query":"1cq",abap:"abap","actionscript-3":"as",ada:"ada",adoc:"adoc","angular-html":"html","angular-ts":"ts",apache:"conf",apex:"cls",apl:"apl",applescript:"applescript",ara:"ara",asciidoc:"adoc",asm:"asm",astro:"astro",awk:"awk",ballerina:"bal",bash:"sh",bat:"bat",batch:"bat",be:"be",beancount:"beancount",berry:"berry",bibtex:"bib",bicep:"bicep",blade:"blade.php",bsl:"bsl",c:"c","c#":"cs","c++":"cpp",cadence:"cdc",cairo:"cairo",cdc:"cdc",clarity:"clar",clj:"clj",clojure:"clj","closure-templates":"soy",cmake:"cmake",cmd:"cmd",cobol:"cob",codeowners:"CODEOWNERS",codeql:"ql",coffee:"coffee",coffeescript:"coffee","common-lisp":"lisp",console:"sh",coq:"v",cpp:"cpp",cql:"cql",crystal:"cr",cs:"cs",csharp:"cs",css:"css",csv:"csv",cue:"cue",cypher:"cql",d:"d",dart:"dart",dax:"dax",desktop:"desktop",diff:"diff",docker:"dockerfile",dockerfile:"dockerfile",dotenv:"env","dream-maker":"dm",edge:"edge",elisp:"el",elixir:"ex",elm:"elm","emacs-lisp":"el",erb:"erb",erl:"erl",erlang:"erl",f:"f","f#":"fs",f03:"f03",f08:"f08",f18:"f18",f77:"f77",f90:"f90",f95:"f95",fennel:"fnl",fish:"fish",fluent:"ftl",for:"for","fortran-fixed-form":"f","fortran-free-form":"f90",fs:"fs",fsharp:"fs",fsl:"fsl",ftl:"ftl",gdresource:"tres",gdscript:"gd",gdshader:"gdshader",genie:"gs",gherkin:"feature","git-commit":"gitcommit","git-rebase":"gitrebase",gjs:"js",gleam:"gleam","glimmer-js":"js","glimmer-ts":"ts",glsl:"glsl",gnuplot:"plt",go:"go",gql:"gql",graphql:"graphql",groovy:"groovy",gts:"gts",hack:"hack",haml:"haml",handlebars:"hbs",haskell:"hs",haxe:"hx",hbs:"hbs",hcl:"hcl",hjson:"hjson",hlsl:"hlsl",hs:"hs",html:"html","html-derivative":"html",http:"http",hxml:"hxml",hy:"hy",imba:"imba",ini:"ini",jade:"jade",java:"java",javascript:"js",jinja:"jinja",jison:"jison",jl:"jl",js:"js",json:"json",json5:"json5",jsonc:"jsonc",jsonl:"jsonl",jsonnet:"jsonnet",jssm:"jssm",jsx:"jsx",julia:"jl",kotlin:"kt",kql:"kql",kt:"kt",kts:"kts",kusto:"kql",latex:"tex",lean:"lean",lean4:"lean",less:"less",liquid:"liquid",lisp:"lisp",lit:"lit",llvm:"ll",log:"log",logo:"logo",lua:"lua",luau:"luau",make:"mak",makefile:"mak",markdown:"md",marko:"marko",matlab:"m",md:"md",mdc:"mdc",mdx:"mdx",mediawiki:"wiki",mermaid:"mmd",mips:"s",mipsasm:"s",mmd:"mmd",mojo:"mojo",move:"move",nar:"nar",narrat:"narrat",nextflow:"nf",nf:"nf",nginx:"conf",nim:"nim",nix:"nix",nu:"nu",nushell:"nu",objc:"m","objective-c":"m","objective-cpp":"mm",ocaml:"ml",pascal:"pas",perl:"pl",perl6:"p6",php:"php",plsql:"pls",po:"po",polar:"polar",postcss:"pcss",pot:"pot",potx:"potx",powerquery:"pq",powershell:"ps1",prisma:"prisma",prolog:"pl",properties:"properties",proto:"proto",protobuf:"proto",ps:"ps",ps1:"ps1",pug:"pug",puppet:"pp",purescript:"purs",py:"py",python:"py",ql:"ql",qml:"qml",qmldir:"qmldir",qss:"qss",r:"r",racket:"rkt",raku:"raku",razor:"cshtml",rb:"rb",reg:"reg",regex:"regex",regexp:"regexp",rel:"rel",riscv:"s",rs:"rs",rst:"rst",ruby:"rb",rust:"rs",sas:"sas",sass:"sass",scala:"scala",scheme:"scm",scss:"scss",sdbl:"sdbl",sh:"sh",shader:"shader",shaderlab:"shader",shell:"sh",shellscript:"sh",shellsession:"sh",smalltalk:"st",solidity:"sol",soy:"soy",sparql:"rq",spl:"spl",splunk:"spl",sql:"sql","ssh-config":"config",stata:"do",styl:"styl",stylus:"styl",svelte:"svelte",swift:"swift","system-verilog":"sv",systemd:"service",talon:"talon",talonscript:"talon",tasl:"tasl",tcl:"tcl",templ:"templ",terraform:"tf",tex:"tex",tf:"tf",tfvars:"tfvars",toml:"toml",ts:"ts","ts-tags":"ts",tsp:"tsp",tsv:"tsv",tsx:"tsx",turtle:"ttl",twig:"twig",typ:"typ",typescript:"ts",typespec:"tsp",typst:"typ",v:"v",vala:"vala",vb:"vb",verilog:"v",vhdl:"vhdl",vim:"vim",viml:"vim",vimscript:"vim",vue:"vue","vue-html":"html","vue-vine":"vine",vy:"vy",vyper:"vy",wasm:"wasm",wenyan:"wy",wgsl:"wgsl",wiki:"wiki",wikitext:"wiki",wit:"wit",wl:"wl",wolfram:"wl",xml:"xml",xsl:"xsl",yaml:"yaml",yml:"yml",zenscript:"zs",zig:"zig",zsh:"zsh",:"wy"},Vnt=({onDownload:e,onError:t,language:n,children:r,className:s,code:o,...i})=>{let{code:a}=Moe(),{isAnimating:l}=x.useContext(Au),c=o??a,u=`file.${n&&n in uH?uH[n]:"txt"}`,f="text/plain",m=()=>{try{$1(u,c,f),e==null||e()}catch(g){t==null||t(g)}};return h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),"data-streamdown":"code-block-download-button",disabled:l,onClick:m,title:"Download file",type:"button",...i,children:r??h.jsx(QC,{size:14})})},dH=()=>h.jsxs("div",{className:"w-full divide-y divide-border overflow-hidden rounded-xl border border-border",children:[h.jsx("div",{className:"h-[46px] w-full bg-muted/80"}),h.jsx("div",{className:"flex w-full items-center justify-center p-4",children:h.jsx($Qe,{className:"size-4 animate-spin"})})]}),qnt=/\.[^/.]+$/,Gnt=({node:e,className:t,src:n,alt:r,...s})=>{let o=async()=>{if(n)try{let i=await(await fetch(n)).blob(),a=new URL(n,window.location.origin).pathname.split("/").pop()||"",l=a.split(".").pop(),c=a.includes(".")&&l!==void 0&&l.length<=4,u="";if(c)u=a;else{let f=i.type,m="png";f.includes("jpeg")||f.includes("jpg")?m="jpg":f.includes("png")?m="png":f.includes("svg")?m="svg":f.includes("gif")?m="gif":f.includes("webp")&&(m="webp"),u=`${(r||a||"image").replace(qnt,"")}.${m}`}$1(u,i,i.type)}catch(i){console.error("Failed to download image:",i)}};return n?h.jsxs("div",{className:"group relative my-4 inline-block","data-streamdown":"image-wrapper",children:[h.jsx("img",{alt:r,className:vr("max-w-full rounded-lg",t),"data-streamdown":"image",src:n,...s}),h.jsx("div",{className:"pointer-events-none absolute inset-0 hidden rounded-lg bg-black/10 group-hover:block"}),h.jsx("button",{className:vr("absolute right-2 bottom-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border border-border bg-background/90 shadow-sm backdrop-blur-sm transition-all duration-200 hover:bg-background","opacity-0 group-hover:opacity-100"),onClick:o,title:"Download image",type:"button",children:h.jsx(QC,{size:14})})]}):null},Ooe=async e=>{let t={startOnLoad:!1,theme:"default",securityLevel:"strict",fontFamily:"monospace",suppressErrorRendering:!0,...e},n=(await me(async()=>{const{default:r}=await import("./mermaid.core-BN1S8kPW.js").then(s=>s.bC);return{default:r}},[],import.meta.url)).default;return n.initialize(t),n},Wnt=(e,t)=>{var n;let r=(n=void 0)!=null?n:5;return new Promise((s,o)=>{let i="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e))),a=new Image;a.crossOrigin="anonymous",a.onload=()=>{let l=document.createElement("canvas"),c=a.width*r,u=a.height*r;l.width=c,l.height=u;let f=l.getContext("2d");if(!f){o(new Error("Failed to create 2D canvas context for PNG export"));return}f.drawImage(a,0,0,c,u),l.toBlob(m=>{if(!m){o(new Error("Failed to create PNG blob"));return}s(m)},"image/png")},a.onerror=()=>o(new Error("Failed to load SVG image")),a.src=i})},Ynt=({chart:e,children:t,className:n,onDownload:r,config:s,onError:o})=>{let[i,a]=x.useState(!1),l=x.useRef(null),{isAnimating:c}=x.useContext(Au),u=async f=>{try{if(f==="mmd"){$1("diagram.mmd",e,"text/plain"),a(!1),r==null||r(f);return}let m=await Ooe(s),g=e.split("").reduce((w,_)=>(w<<5)-w+_.charCodeAt(0)|0,0),y=`mermaid-${Math.abs(g)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:v}=await m.render(y,e);if(!v){o==null||o(new Error("SVG not found. Please wait for the diagram to render."));return}if(f==="svg"){$1("diagram.svg",v,"image/svg+xml"),a(!1),r==null||r(f);return}if(f==="png"){let w=await Wnt(v);$1("diagram.png",w,"image/png"),r==null||r(f),a(!1);return}}catch(m){o==null||o(m)}};return x.useEffect(()=>{let f=m=>{l.current&&!l.current.contains(m.target)&&a(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]),h.jsxs("div",{className:"relative",ref:l,children:[h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",n),disabled:c,onClick:()=>a(!i),title:"Download diagram",type:"button",children:t??h.jsx(QC,{size:14})}),i&&h.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>u("svg"),type:"button",title:"Download diagram as SVG",children:"SVG"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>u("png"),type:"button",title:"Download diagram as PNG",children:"PNG"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>u("mmd"),type:"button",title:"Download diagram as MMD",children:"MMD"})]})]})},ix=0,Knt=()=>{ix+=1,ix===1&&(document.body.style.overflow="hidden")},Znt=()=>{ix=Math.max(0,ix-1),ix===0&&(document.body.style.overflow="")},Jnt=({chart:e,config:t,onFullscreen:n,onExit:r,className:s,...o})=>{let[i,a]=x.useState(!1),{isAnimating:l,controls:c}=x.useContext(Au),u=(()=>{if(typeof c=="boolean")return c;let m=c.mermaid;return m===!1?!1:m===!0||m===void 0?!0:m.panZoom!==!1})(),f=()=>{a(!i)};return x.useEffect(()=>{if(i){Knt();let m=g=>{g.key==="Escape"&&a(!1)};return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m),Znt()}}},[i]),x.useEffect(()=>{i?n==null||n():r&&r()},[i,n,r]),h.jsxs(h.Fragment,{children:[h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),disabled:l,onClick:f,title:"View fullscreen",type:"button",...o,children:h.jsx(BQe,{size:14})}),i&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm",onClick:f,onKeyDown:m=>{m.key==="Escape"&&f()},role:"button",tabIndex:0,children:[h.jsx("button",{className:"absolute top-4 right-4 z-10 rounded-md p-2 text-muted-foreground transition-all hover:bg-muted hover:text-foreground",onClick:f,title:"Exit fullscreen",type:"button",children:h.jsx(HQe,{size:20})}),h.jsx("div",{className:"flex h-full w-full items-center justify-center p-4",onClick:m=>m.stopPropagation(),onKeyDown:m=>m.stopPropagation(),role:"presentation",children:h.jsx(die,{chart:e,className:"h-full w-full [&>div]:h-full [&>div]:overflow-hidden [&_svg]:h-auto [&_svg]:w-auto",config:t,fullscreen:!0,showControls:u})})]})]})},Doe=e=>{var t,n;let r=[],s=[],o=e.querySelectorAll("thead th");for(let a of o)r.push(((t=a.textContent)==null?void 0:t.trim())||"");let i=e.querySelectorAll("tbody tr");for(let a of i){let l=[],c=a.querySelectorAll("td");for(let u of c)l.push(((n=u.textContent)==null?void 0:n.trim())||"");s.push(l)}return{headers:r,rows:s}},Poe=e=>{let{headers:t,rows:n}=e,r=a=>{let l=!1,c=!1;for(let u=0;u<a.length;u+=1){let f=a[u];if(f==='"'){l=!0,c=!0;break}(f===","||f===`
`)&&(l=!0)}return l?c?`"${a.replace(/"/g,'""')}"`:`"${a}"`:a},s=t.length>0?n.length+1:n.length,o=new Array(s),i=0;t.length>0&&(o[i]=t.map(r).join(","),i+=1);for(let a of n)o[i]=a.map(r).join(","),i+=1;return o.join(`
`)},Xnt=e=>{let{headers:t,rows:n}=e,r=a=>{let l=!1;for(let u=0;u<a.length;u+=1){let f=a[u];if(f==="	"||f===`
`||f==="\r"){l=!0;break}}if(!l)return a;let c=[];for(let u=0;u<a.length;u+=1){let f=a[u];f==="	"?c.push("\\t"):f===`
`?c.push("\\n"):f==="\r"?c.push("\\r"):c.push(f)}return c.join("")},s=t.length>0?n.length+1:n.length,o=new Array(s),i=0;t.length>0&&(o[i]=t.map(r).join("	"),i+=1);for(let a of n)o[i]=a.map(r).join("	"),i+=1;return o.join(`
`)},MA=e=>{let t=!1;for(let r=0;r<e.length;r+=1){let s=e[r];if(s==="\\"||s==="|"){t=!0;break}}if(!t)return e;let n=[];for(let r=0;r<e.length;r+=1){let s=e[r];s==="\\"?n.push("\\\\"):s==="|"?n.push("\\|"):n.push(s)}return n.join("")},Qnt=e=>{let{headers:t,rows:n}=e;if(t.length===0)return"";let r=new Array(n.length+2),s=0,o=t.map(a=>MA(a));r[s]=`| ${o.join(" | ")} |`,s+=1;let i=new Array(t.length);for(let a=0;a<t.length;a+=1)i[a]="---";r[s]=`| ${i.join(" | ")} |`,s+=1;for(let a of n)if(a.length<t.length){let l=new Array(t.length);for(let c=0;c<t.length;c+=1)l[c]=c<a.length?MA(a[c]):"";r[s]=`| ${l.join(" | ")} |`,s+=1}else{let l=a.map(c=>MA(c));r[s]=`| ${l.join(" | ")} |`,s+=1}return r.join(`
`)},ert=({children:e,className:t,onCopy:n,onError:r,timeout:s=2e3})=>{let[o,i]=x.useState(!1),[a,l]=x.useState(!1),c=x.useRef(null),u=x.useRef(0),{isAnimating:f}=x.useContext(Au),m=async y=>{var v,w;if(typeof window>"u"||!((v=navigator==null?void 0:navigator.clipboard)!=null&&v.write)){r==null||r(new Error("Clipboard API not available"));return}try{let _=(w=c.current)==null?void 0:w.closest('[data-streamdown="table-wrapper"]'),S=_==null?void 0:_.querySelector("table");if(!S){r==null||r(new Error("Table not found"));return}let k=Doe(S),R=y==="csv"?Poe(k):Xnt(k),O=new ClipboardItem({"text/plain":new Blob([R],{type:"text/plain"}),"text/html":new Blob([S.outerHTML],{type:"text/html"})});await navigator.clipboard.write([O]),l(!0),i(!1),n==null||n(y),u.current=window.setTimeout(()=>l(!1),s)}catch(_){r==null||r(_)}};x.useEffect(()=>{let y=v=>{c.current&&!c.current.contains(v.target)&&i(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y),window.clearTimeout(u.current)}},[]);let g=a?coe:uoe;return h.jsxs("div",{className:"relative",ref:c,children:[h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:f,onClick:()=>i(!o),title:"Copy table",type:"button",children:e??h.jsx(g,{size:14})}),o&&h.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>m("csv"),type:"button",title:"Copy table as CSV",children:"CSV"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>m("tsv"),type:"button",title:"Copy table as TSV",children:"TSV"})]})]})},trt=({children:e,className:t,onDownload:n,onError:r})=>{let[s,o]=x.useState(!1),i=x.useRef(null),{isAnimating:a}=x.useContext(Au),l=c=>{var u;try{let f=(u=i.current)==null?void 0:u.closest('[data-streamdown="table-wrapper"]'),m=f==null?void 0:f.querySelector("table");if(!m){r==null||r(new Error("Table not found"));return}let g=Doe(m),y=c==="csv"?Poe(g):Qnt(g);$1(`table.${c==="csv"?"csv":"md"}`,y,c==="csv"?"text/csv":"text/markdown"),o(!1),n==null||n(c)}catch(f){r==null||r(f)}};return x.useEffect(()=>{let c=u=>{i.current&&!i.current.contains(u.target)&&o(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),h.jsxs("div",{className:"relative",ref:i,children:[h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:a,onClick:()=>o(!s),title:"Download table",type:"button",children:e??h.jsx(QC,{size:14})}),s&&h.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("csv"),type:"button",title:"Download table as CSV",children:"CSV"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("markdown"),type:"button",title:"Download table as Markdown",children:"Markdown"})]})]})},nrt=({children:e,className:t,showControls:n,...r})=>h.jsxs("div",{className:"my-4 flex flex-col space-y-2","data-streamdown":"table-wrapper",children:[n&&h.jsxs("div",{className:"flex items-center justify-end gap-1",children:[h.jsx(ert,{}),h.jsx(trt,{})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsx("table",{className:vr("w-full border-collapse border border-border",t),"data-streamdown":"table",...r,children:e})})]}),rrt=x.lazy(()=>me(()=>import("./code-block-JS6V4U2P-BQyXistB.js"),[],import.meta.url).then(e=>({default:e.CodeBlock}))),srt=x.lazy(()=>me(()=>Promise.resolve().then(()=>Lft),void 0,import.meta.url).then(e=>({default:e.Mermaid}))),ort=/language-([^\s]+)/;function n3(e,t){if(!(e!=null&&e.position||t!=null&&t.position))return!0;if(!(e!=null&&e.position&&t!=null&&t.position))return!1;let n=e.position.start,r=t.position.start,s=e.position.end,o=t.position.end;return(n==null?void 0:n.line)===(r==null?void 0:r.line)&&(n==null?void 0:n.column)===(r==null?void 0:r.column)&&(s==null?void 0:s.line)===(o==null?void 0:o.line)&&(s==null?void 0:s.column)===(o==null?void 0:o.column)}function Ko(e,t){return e.className===t.className&&n3(e.node,t.node)}var zI=(e,t)=>typeof e=="boolean"?e:e[t]!==!1,d_=(e,t)=>{if(typeof e=="boolean")return e;let n=e.mermaid;return n===!1?!1:n===!0||n===void 0?!0:n[t]!==!1},t9=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("ol",{className:vr("list-inside list-decimal whitespace-normal",t),"data-streamdown":"ordered-list",...r,children:e}),(e,t)=>Ko(e,t));t9.displayName="MarkdownOl";var Loe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("li",{className:vr("py-1 [&>p]:inline",t),"data-streamdown":"list-item",...r,children:e}),(e,t)=>e.className===t.className&&n3(e.node,t.node));Loe.displayName="MarkdownLi";var $oe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("ul",{className:vr("list-inside list-disc whitespace-normal",t),"data-streamdown":"unordered-list",...r,children:e}),(e,t)=>Ko(e,t));$oe.displayName="MarkdownUl";var Foe=x.memo(({className:e,node:t,...n})=>h.jsx("hr",{className:vr("my-6 border-border",e),"data-streamdown":"horizontal-rule",...n}),(e,t)=>Ko(e,t));Foe.displayName="MarkdownHr";var Boe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("span",{className:vr("font-semibold",t),"data-streamdown":"strong",...r,children:e}),(e,t)=>Ko(e,t));Boe.displayName="MarkdownStrong";var zoe=x.memo(({children:e,className:t,href:n,node:r,...s})=>{let o=n==="streamdown:incomplete-link";return h.jsx("a",{className:vr("wrap-anywhere font-medium text-primary underline",t),"data-incomplete":o,"data-streamdown":"link",href:n,rel:"noreferrer",target:"_blank",...s,children:e})},(e,t)=>Ko(e,t)&&e.href===t.href);zoe.displayName="MarkdownA";var joe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h1",{className:vr("mt-6 mb-2 font-semibold text-3xl",t),"data-streamdown":"heading-1",...r,children:e}),(e,t)=>Ko(e,t));joe.displayName="MarkdownH1";var Uoe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h2",{className:vr("mt-6 mb-2 font-semibold text-2xl",t),"data-streamdown":"heading-2",...r,children:e}),(e,t)=>Ko(e,t));Uoe.displayName="MarkdownH2";var Hoe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h3",{className:vr("mt-6 mb-2 font-semibold text-xl",t),"data-streamdown":"heading-3",...r,children:e}),(e,t)=>Ko(e,t));Hoe.displayName="MarkdownH3";var Voe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h4",{className:vr("mt-6 mb-2 font-semibold text-lg",t),"data-streamdown":"heading-4",...r,children:e}),(e,t)=>Ko(e,t));Voe.displayName="MarkdownH4";var qoe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h5",{className:vr("mt-6 mb-2 font-semibold text-base",t),"data-streamdown":"heading-5",...r,children:e}),(e,t)=>Ko(e,t));qoe.displayName="MarkdownH5";var Goe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h6",{className:vr("mt-6 mb-2 font-semibold text-sm",t),"data-streamdown":"heading-6",...r,children:e}),(e,t)=>Ko(e,t));Goe.displayName="MarkdownH6";var Woe=x.memo(({children:e,className:t,node:n,...r})=>{let{controls:s}=x.useContext(Au),o=zI(s,"table");return h.jsx(nrt,{className:t,"data-streamdown":"table-wrapper",showControls:o,...r,children:e})},(e,t)=>Ko(e,t));Woe.displayName="MarkdownTable";var Yoe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("thead",{className:vr("bg-muted/80",t),"data-streamdown":"table-header",...r,children:e}),(e,t)=>Ko(e,t));Yoe.displayName="MarkdownThead";var Koe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("tbody",{className:vr("divide-y divide-border bg-muted/40",t),"data-streamdown":"table-body",...r,children:e}),(e,t)=>Ko(e,t));Koe.displayName="MarkdownTbody";var Zoe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("tr",{className:vr("border-border border-b",t),"data-streamdown":"table-row",...r,children:e}),(e,t)=>Ko(e,t));Zoe.displayName="MarkdownTr";var Joe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("th",{className:vr("whitespace-nowrap px-4 py-2 text-left font-semibold text-sm",t),"data-streamdown":"table-header-cell",...r,children:e}),(e,t)=>Ko(e,t));Joe.displayName="MarkdownTh";var Xoe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("td",{className:vr("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...r,children:e}),(e,t)=>Ko(e,t));Xoe.displayName="MarkdownTd";var Qoe=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("blockquote",{className:vr("my-4 border-muted-foreground/30 border-l-4 pl-4 text-muted-foreground italic",t),"data-streamdown":"blockquote",...r,children:e}),(e,t)=>Ko(e,t));Qoe.displayName="MarkdownBlockquote";var eie=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("sup",{className:vr("text-sm",t),"data-streamdown":"superscript",...r,children:e}),(e,t)=>Ko(e,t));eie.displayName="MarkdownSup";var tie=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("sub",{className:vr("text-sm",t),"data-streamdown":"subscript",...r,children:e}),(e,t)=>Ko(e,t));tie.displayName="MarkdownSub";var nie=x.memo(({children:e,className:t,node:n,...r})=>{if("data-footnotes"in r){let s=i=>{var a,l;if(!x.isValidElement(i))return!1;let c=Array.isArray(i.props.children)?i.props.children:[i.props.children],u=!1,f=!1;for(let m of c)if(m){if(typeof m=="string")m.trim()!==""&&(u=!0);else if(x.isValidElement(m))if(((a=m.props)==null?void 0:a["data-footnote-backref"])!==void 0)f=!0;else{let g=Array.isArray(m.props.children)?m.props.children:[m.props.children];for(let y of g){if(typeof y=="string"&&y.trim()!==""){u=!0;break}if(x.isValidElement(y)&&((l=y.props)==null?void 0:l["data-footnote-backref"])===void 0){u=!0;break}}}}return f&&!u},o=Array.isArray(e)?e.map(i=>{if(!x.isValidElement(i))return i;if(i.type===t9){let a=(Array.isArray(i.props.children)?i.props.children:[i.props.children]).filter(l=>!s(l));return a.length===0?null:{...i,props:{...i.props,children:a}}}return i}):e;return(Array.isArray(o)?o.some(i=>i!==null):o!==null)?h.jsx("section",{className:t,...r,children:o}):null}return h.jsx("section",{className:t,...r,children:e})},(e,t)=>Ko(e,t));nie.displayName="MarkdownSection";var irt=({node:e,className:t,children:n,...r})=>{var s,o,i;let a=((s=e==null?void 0:e.position)==null?void 0:s.start.line)===((o=e==null?void 0:e.position)==null?void 0:o.end.line),{mermaid:l,controls:c}=x.useContext(Au);if(a)return h.jsx("code",{className:vr("rounded bg-muted px-1.5 py-0.5 font-mono text-sm",t),"data-streamdown":"inline-code",...r,children:n});let u=t==null?void 0:t.match(ort),f=(i=u==null?void 0:u.at(1))!=null?i:"",m="";if(x.isValidElement(n)&&n.props&&typeof n.props=="object"&&"children"in n.props&&typeof n.props.children=="string"?m=n.props.children:typeof n=="string"&&(m=n),f==="mermaid"){let y=zI(c,"mermaid"),v=d_(c,"download"),w=d_(c,"copy"),_=d_(c,"fullscreen"),S=d_(c,"panZoom");return h.jsx(x.Suspense,{fallback:h.jsx(dH,{}),children:h.jsxs("div",{className:vr("group relative my-4 h-auto rounded-xl border p-4",t),"data-streamdown":"mermaid-block",children:[y&&(v||w||_)&&h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[v&&h.jsx(Ynt,{chart:m,config:l==null?void 0:l.config}),w&&h.jsx(cH,{code:m}),_&&h.jsx(Jnt,{chart:m,config:l==null?void 0:l.config})]}),h.jsx(srt,{chart:m,config:l==null?void 0:l.config,showControls:S})]})})}let g=zI(c,"code");return h.jsx(x.Suspense,{fallback:h.jsx(dH,{}),children:h.jsx(rrt,{className:vr("overflow-x-auto border-border border-t",t),code:m,language:f,children:g&&h.jsxs(h.Fragment,{children:[h.jsx(Vnt,{code:m,language:f}),h.jsx(cH,{})]})})})},rie=x.memo(irt,(e,t)=>e.className===t.className&&n3(e.node,t.node));rie.displayName="MarkdownCode";var sie=x.memo(Gnt,(e,t)=>e.className===t.className&&n3(e.node,t.node));sie.displayName="MarkdownImg";var oie=x.memo(({children:e,className:t,node:n,...r})=>{var s;let o=(Array.isArray(e)?e:[e]).filter(i=>i!=null&&i!=="");return o.length===1&&x.isValidElement(o[0])&&((s=o[0].props.node)==null?void 0:s.tagName)==="img"?h.jsx(h.Fragment,{children:e}):h.jsx("p",{className:t,...r,children:e})},(e,t)=>Ko(e,t));oie.displayName="MarkdownParagraph";var art={ol:t9,li:Loe,ul:$oe,hr:Foe,strong:Boe,a:zoe,h1:joe,h2:Uoe,h3:Hoe,h4:Voe,h5:qoe,h6:Goe,table:Woe,thead:Yoe,tbody:Koe,tr:Zoe,th:Joe,td:Xoe,blockquote:Qoe,code:rie,img:sie,pre:({children:e})=>e,sup:eie,sub:tie,p:oie,section:nie},fH=[],hH={allowDangerousHtml:!0},f_=new WeakMap,lrt=class{constructor(){this.cache=new Map,this.keyCache=new WeakMap,this.maxSize=100}generateCacheKey(t){let n=this.keyCache.get(t);if(n)return n;let r=t.rehypePlugins,s=t.remarkPlugins,o=t.remarkRehypeOptions;if(!(r||s||o)){let f="default";return this.keyCache.set(t,f),f}let i=f=>{if(!f||f.length===0)return"";let m="";for(let g=0;g<f.length;g+=1){let y=f[g];if(g>0&&(m+=","),Array.isArray(y)){let[v,w]=y;if(typeof v=="function"){let _=f_.get(v);_||(_=v.name,f_.set(v,_)),m+=_}else m+=String(v);m+=":",m+=JSON.stringify(w)}else if(typeof y=="function"){let v=f_.get(y);v||(v=y.name,f_.set(y,v)),m+=v}else m+=String(y)}return m},a=i(r),l=i(s),c=o?JSON.stringify(o):"",u=`${l}::${a}::${c}`;return this.keyCache.set(t,u),u}get(t){let n=this.generateCacheKey(t),r=this.cache.get(n);return r&&(this.cache.delete(n),this.cache.set(n,r)),r}set(t,n){let r=this.generateCacheKey(t);if(this.cache.size>=this.maxSize){let s=this.cache.keys().next().value;s&&this.cache.delete(s)}this.cache.set(r,n)}clear(){this.cache.clear()}},pH=new lrt,iie=e=>{let t=crt(e),n=e.children||"";return drt(t.runSync(t.parse(n),n),e)},crt=e=>{let t=pH.get(e);if(t)return t;let n=urt(e);return pH.set(e,n),n},urt=e=>{let t=e.rehypePlugins||fH,n=e.remarkPlugins||fH,r=e.remarkRehypeOptions?{...hH,...e.remarkRehypeOptions}:hH;return nnt().use(ttt).use(n).use($tt,r).use(t)},drt=(e,t)=>aet(e,{Fragment:h.Fragment,components:t.components,ignoreInvalidStyle:!0,jsx:h.jsx,jsxs:h.jsxs,passKeys:!0,passNode:!0}),frt=/\[\^[^\]\s]{1,200}\](?!:)/,hrt=/\[\^[^\]\s]{1,200}\]:/,prt=/<\/(\w+)>/,mrt=/<(\w+)[\s>]/,OA=e=>{let t=0;for(;t<e.length&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t+=1;return t+1<e.length&&e[t]==="$"&&e[t+1]==="$"},grt=e=>{let t=e.length-1;for(;t>=0&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t-=1;return t>=1&&e[t]==="$"&&e[t-1]==="$"},DA=e=>{let t=0;for(let n=0;n<e.length-1;n+=1)e[n]==="$"&&e[n+1]==="$"&&(t+=1,n+=1);return t},brt=e=>{let t=frt.test(e),n=hrt.test(e);if(t||n)return[e];let r=Cc.lex(e,{gfm:!0}),s=[],o=[];for(let i of r){let a=i.raw,l=s.length;if(o.length>0){if(s[l-1]+=a,i.type==="html"){let c=a.match(prt);if(c){let u=c[1];o.at(-1)===u&&o.pop()}}continue}if(i.type==="html"&&i.block){let c=a.match(mrt);if(c){let u=c[1];a.includes(`</${u}>`)||o.push(u)}}if(a.trim()==="$$"&&l>0){let c=s[l-1],u=OA(c),f=DA(c);if(u&&f%2===1){s[l-1]=c+a;continue}}if(l>0&&grt(a)){let c=s[l-1],u=OA(c),f=DA(c),m=DA(a);if(u&&f%2===1&&!OA(a)&&m===1){s[l-1]=c+a;continue}}s.push(a)}return s},yrt=/(\*\*)([^*]*?)$/,vrt=/(__)([^_]*?)$/,xrt=/(\*\*\*)([^*]*?)$/,wrt=/(\*)([^*]*?)$/,Ert=/(_)([^_]*?)$/,_rt=/(`)([^`]*?)$/,Srt=/(~~)([^~]*?)$/,Hm=/^[\s_~*`]*$/,aie=/^[\s]*[-*+][\s]+$/,Trt=/[\p{L}\p{N}_]/u,Crt=/^```[^`\n]*```?$/,krt=/^\*{4,}$/,D0=e=>{if(!e)return!1;let t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||t===95?!0:Trt.test(e)},r3=e=>{let t=(e.match(/```/g)||[]).length;return t>0&&t%2===0&&e.includes(`
`)},Art=(e,t)=>{let n=1;for(let r=t-1;r>=0;r-=1)if(e[r]==="]")n+=1;else if(e[r]==="["&&(n-=1,n===0))return r;return-1},Nrt=(e,t)=>{let n=1;for(let r=t+1;r<e.length;r+=1)if(e[r]==="[")n+=1;else if(e[r]==="]"&&(n-=1,n===0))return r;return-1},PA=(e,t)=>{let n=!1,r=!1;for(let s=0;s<t;s+=1){if(e.substring(s,s+3)==="```"){r=!r,s+=2;continue}!r&&e[s]==="`"&&(n=!n)}return n||r},Irt=e=>{let t=e.lastIndexOf("](");if(t!==-1&&!PA(e,t)&&!e.substring(t+2).includes(")")){let n=Art(e,t);if(n!==-1&&!PA(e,n)){let r=n>0&&e[n-1]==="!",s=r?n-1:n,o=e.substring(0,s),i=e.substring(n+1,t);return r?o:`${o}[${i}](streamdown:incomplete-link)`}}for(let n=e.length-1;n>=0;n-=1)if(e[n]==="["&&!PA(e,n)){let r=n>0&&e[n-1]==="!",s=r?n-1:n;if(!e.substring(n+1).includes("]")){let o=e.substring(0,s);return r?o:`${e}](streamdown:incomplete-link)`}if(Nrt(e,n)===-1){let o=e.substring(0,s);return r?o:`${e}](streamdown:incomplete-link)`}}return e},Rrt=e=>{if(r3(e))return e;let t=e.match(yrt);if(t){let n=t[2];if(!n||Hm.test(n))return e;let r=e.lastIndexOf(t[1]),s=e.substring(0,r).lastIndexOf(`
`),o=s===-1?0:s+1,i=e.substring(o,r);if(aie.test(i)&&n.includes(`
`))return e;if((e.match(/\*\*/g)||[]).length%2===1)return`${e}**`}return e},Mrt=e=>{let t=e.match(vrt);if(t){let n=t[2];if(!n||Hm.test(n))return e;let r=e.lastIndexOf(t[1]),s=e.substring(0,r).lastIndexOf(`
`),o=s===-1?0:s+1,i=e.substring(o,r);if(aie.test(i)&&n.includes(`
`))return e;if((e.match(/__/g)||[]).length%2===1)return`${e}__`}return e},Ort=e=>{let t=0,n=e.length;for(let r=0;r<n;r+=1){if(e[r]!=="*")continue;let s=r>0?e[r-1]:"",o=r<n-1?e[r+1]:"";if(s==="\\"||s==="*"||o==="*"||s&&o&&D0(s)&&D0(o))continue;let i=0;for(let l=r-1;l>=0;l-=1)if(e[l]===`
`){i=l+1;break}let a=!0;for(let l=i;l<r;l+=1)if(e[l]!==" "&&e[l]!=="	"){a=!1;break}a&&(o===" "||o==="	")||(t+=1)}return t},Drt=e=>{if(r3(e))return e;if(e.match(wrt)){let t=-1;for(let r=0;r<e.length;r+=1)if(e[r]==="*"&&e[r-1]!=="*"&&e[r+1]!=="*"&&e[r-1]!=="\\"){let s=r>0?e[r-1]:"",o=r<e.length-1?e[r+1]:"";if(s&&o&&D0(s)&&D0(o))continue;t=r;break}if(t===-1)return e;let n=e.substring(t+1);if(!n||Hm.test(n))return e;if(Ort(e)%2===1)return`${e}*`}return e},lie=(e,t)=>{let n=!1,r=!1;for(let s=0;s<e.length&&s<t;s+=1){if(e[s]==="\\"&&e[s+1]==="$"){s+=1;continue}e[s]==="$"&&(e[s+1]==="$"?(r=!r,s+=1,n=!1):r||(n=!n))}return n||r},Prt=e=>{let t=e.includes("$"),n=0,r=e.length;for(let s=0;s<r;s+=1){if(e[s]!=="_")continue;let o=s>0?e[s-1]:"",i=s<r-1?e[s+1]:"";o!=="\\"&&(t&&lie(e,s)||o==="_"||i==="_"||o&&i&&D0(o)&&D0(i)||(n+=1))}return n},Lrt=e=>{if(r3(e))return e;if(e.match(Ert)){let t=-1;for(let r=0;r<e.length;r+=1)if(e[r]==="_"&&e[r-1]!=="_"&&e[r+1]!=="_"&&e[r-1]!=="\\"&&!lie(e,r)){let s=r>0?e[r-1]:"",o=r<e.length-1?e[r+1]:"";if(s&&o&&D0(s)&&D0(o))continue;t=r;break}if(t===-1)return e;let n=e.substring(t+1);if(!n||Hm.test(n))return e;if(Prt(e)%2===1){let r=e.length;for(;r>0&&e[r-1]===`
`;)r-=1;if(r<e.length){let s=e.slice(0,r),o=e.slice(r);return`${s}_${o}`}return`${e}_`}}return e},$rt=(e,t)=>{let n=e.substring(t,t+3)==="```",r=t>0&&e.substring(t-1,t+2)==="```",s=t>1&&e.substring(t-2,t+1)==="```";return n||r||s},Frt=e=>{let t=0;for(let n=0;n<e.length;n+=1)e[n]==="`"&&!$rt(e,n)&&(t+=1);return t},Brt=e=>{if(e.match(Crt)&&!e.includes(`
`))return e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e;let t=(e.match(/```/g)||[]).length,n=t%2===1;if(t>0&&t%2===0&&e.includes(`
`)||(e.endsWith("```\n")||e.endsWith("```"))&&t%2===0)return e;let r=e.match(_rt);if(r&&!n){let s=r[2];if(!s||Hm.test(s))return e;if(Frt(e)%2===1)return`${e}\``}return e},zrt=e=>{let t=e.match(Srt);if(t){let n=t[2];if(!n||Hm.test(n))return e;if((e.match(/~~/g)||[]).length%2===1)return`${e}~~`}return e},jrt=e=>{if((e.match(/\$\$/g)||[]).length%2===0)return e;let t=e.indexOf("$$");return t!==-1&&e.indexOf(`
`,t)!==-1&&!e.endsWith(`
`)?`${e}
$$`:`${e}$$`},Urt=e=>{let t=0,n=0;for(let r=0;r<e.length;r+=1)e[r]==="*"?n+=1:(n>=3&&(t+=Math.floor(n/3)),n=0);return n>=3&&(t+=Math.floor(n/3)),t},Hrt=e=>{if(r3(e)||krt.test(e))return e;let t=e.match(xrt);if(t){let n=t[2];if(!n||Hm.test(n))return e;if(Urt(e)%2===1)return`${e}***`}return e},Vrt=e=>{if(!e||typeof e!="string")return e;let t=e,n=Irt(t);return n.endsWith("](streamdown:incomplete-link)")?n:(t=n,t=Hrt(t),t=Rrt(t),t=Mrt(t),t=Drt(t),t=Lrt(t),t=Brt(t),t=zrt(t),t=jrt(t),t)},qrt={raw:fKe,katex:[wI,{errorColor:"var(--color-muted-foreground)"}],harden:[EHe,{allowedImagePrefixes:["*"],allowedLinkPrefixes:["*"],allowedProtocols:["*"],defaultOrigin:void 0,allowDataImages:!0}]},Grt={gfm:[bQe,{}],math:[MI,{singleDollarTextMath:!1}],cjkFriendly:[BKe,{}],cjkFriendlyGfmStrikethrough:[jKe,{}]},Wrt=Object.values(qrt),Yrt=Object.values(Grt),Krt={shikiTheme:["github-light","github-dark"],controls:!0,isAnimating:!1,mode:"streaming",mermaid:void 0},Au=x.createContext(Krt),cie=x.memo(({content:e,shouldParseIncompleteMarkdown:t,...n})=>{let r=x.useMemo(()=>typeof e=="string"&&t?Vrt(e.trim()):e,[e,t]);return h.jsx(iie,{...n,children:r})},(e,t)=>{if(e.content!==t.content||e.shouldParseIncompleteMarkdown!==t.shouldParseIncompleteMarkdown||e.index!==t.index)return!1;if(e.components!==t.components){let n=Object.keys(e.components||{}),r=Object.keys(t.components||{});if(n.length!==r.length||n.some(s=>{var o,i;return((o=e.components)==null?void 0:o[s])!==((i=t.components)==null?void 0:i[s])}))return!1}return!(e.rehypePlugins!==t.rehypePlugins||e.remarkPlugins!==t.remarkPlugins)});cie.displayName="Block";var Zrt=["github-light","github-dark"],uie=x.memo(({children:e,mode:t="streaming",parseIncompleteMarkdown:n=!0,components:r,rehypePlugins:s=Wrt,remarkPlugins:o=Yrt,className:i,shikiTheme:a=Zrt,mermaid:l,controls:c=!0,isAnimating:u=!1,BlockComponent:f=cie,parseMarkdownIntoBlocksFn:m=brt,...g})=>{let y=x.useId(),[v,w]=x.useTransition(),[_,S]=x.useState([]),k=x.useMemo(()=>m(typeof e=="string"?e:""),[e,m]);x.useEffect(()=>{t==="streaming"?w(()=>{S(k)}):S(k)},[k,t]);let R=t==="streaming"?_:k,O=x.useMemo(()=>R.map((j,q)=>`${y}-${q}`),[R.length,y]),M=x.useMemo(()=>({shikiTheme:a,controls:c,isAnimating:u,mode:t,mermaid:l}),[a,c,u,t,l]),P=x.useMemo(()=>({...art,...r}),[r]);return x.useEffect(()=>{if(!(Array.isArray(s)&&s.some(H=>Array.isArray(H)?H[0]===wI:H===wI)))return;let j=!1;if(Array.isArray(o)){let H=o.find(F=>Array.isArray(F)?F[0]===MI:F===MI);H&&Array.isArray(H)&&H[1]&&(j=H[1].singleDollarTextMath===!0)}let q=typeof e=="string"?e:"",U=q.includes("$$"),z=j&&(/[^$]\$[^$]/.test(q)||/^\$[^$]/.test(q)||/[^$]\$$/.test(q));(U||z)&&me(()=>Promise.resolve({}),__vite__mapDeps([97]),import.meta.url)},[s,o,e]),t==="static"?h.jsx(Au.Provider,{value:M,children:h.jsx("div",{className:vr("space-y-4 whitespace-normal",i),children:h.jsx(iie,{components:P,rehypePlugins:s,remarkPlugins:o,...g,children:e})})}):h.jsx(Au.Provider,{value:M,children:h.jsx("div",{className:vr("space-y-4 whitespace-normal",i),children:R.map((j,q)=>h.jsx(f,{components:P,content:j,index:q,rehypePlugins:s,remarkPlugins:o,shouldParseIncompleteMarkdown:n,...g},O[q]))})})},(e,t)=>e.children===t.children&&e.shikiTheme===t.shikiTheme&&e.isAnimating===t.isAnimating&&e.mode===t.mode);uie.displayName="Streamdown";var Jrt=({children:e,className:t,minZoom:n=.5,maxZoom:r=3,zoomStep:s=.1,showControls:o=!0,initialZoom:i=1,fullscreen:a=!1})=>{let l=x.useRef(null),c=x.useRef(null),[u,f]=x.useState(i),[m,g]=x.useState({x:0,y:0}),[y,v]=x.useState(!1),[w,_]=x.useState({x:0,y:0}),[S,k]=x.useState({x:0,y:0}),R=x.useCallback(H=>{f(F=>Math.max(n,Math.min(r,F+H)))},[n,r]),O=x.useCallback(()=>{R(s)},[R,s]),M=x.useCallback(()=>{R(-s)},[R,s]),P=x.useCallback(()=>{f(i),g({x:0,y:0})},[i]),j=x.useCallback(H=>{H.preventDefault();let F=H.deltaY>0?-s:s;R(F)},[R,s]),q=x.useCallback(H=>{if(H.button!==0||H.isPrimary===!1)return;v(!0),_({x:H.clientX,y:H.clientY}),k(m);let F=H.currentTarget;F instanceof HTMLElement&&F.setPointerCapture(H.pointerId)},[m]),U=x.useCallback(H=>{if(!y)return;H.preventDefault();let F=H.clientX-w.x,W=H.clientY-w.y;g({x:S.x+F,y:S.y+W})},[y,w,S]),z=x.useCallback(H=>{v(!1);let F=H.currentTarget;F instanceof HTMLElement&&F.releasePointerCapture(H.pointerId)},[]);return x.useEffect(()=>{let H=l.current;if(H)return H.addEventListener("wheel",j,{passive:!1}),()=>{H.removeEventListener("wheel",j)}},[j]),x.useEffect(()=>{let H=c.current;if(H&&y)return document.body.style.userSelect="none",H.addEventListener("pointermove",U,{passive:!1}),H.addEventListener("pointerup",z),H.addEventListener("pointercancel",z),()=>{document.body.style.userSelect="",H.removeEventListener("pointermove",U),H.removeEventListener("pointerup",z),H.removeEventListener("pointercancel",z)}},[y,U,z]),h.jsxs("div",{className:vr("relative",a?"h-full w-full":"w-full",t),ref:l,style:{cursor:y?"grabbing":"grab"},children:[o&&h.jsxs("div",{className:vr("absolute z-10 flex flex-col gap-1 rounded-md border border-border bg-background/90 p-1 shadow-sm backdrop-blur-sm",a?"bottom-4 left-4":"bottom-2 left-2"),children:[h.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:u>=r,onClick:O,title:"Zoom in",type:"button",children:h.jsx(qQe,{size:16})}),h.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:u<=n,onClick:M,title:"Zoom out",type:"button",children:h.jsx(WQe,{size:16})}),h.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",onClick:P,title:"Reset zoom and pan",type:"button",children:h.jsx(jQe,{size:16})})]}),h.jsx("div",{className:vr("origin-center transition-transform duration-150 ease-out",a&&"flex w-full items-center justify-center"),onPointerDown:q,ref:c,role:"application",style:{transform:`translate(${m.x}px, ${m.y}px) scale(${u})`,transformOrigin:"center center",touchAction:"none",willChange:"transform"},children:e})]})},die=({chart:e,className:t,config:n,fullscreen:r=!1,showControls:s=!0})=>{let[o,i]=x.useState(null),[a,l]=x.useState(!0),[c,u]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(0),{mermaid:v}=x.useContext(Au),w=v==null?void 0:v.errorComponent;if(x.useEffect(()=>{(async()=>{try{i(null),l(!0);let S=await Ooe(n),k=e.split("").reduce((M,P)=>(M<<5)-M+P.charCodeAt(0)|0,0),R=`mermaid-${Math.abs(k)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:O}=await S.render(R,e);u(O),m(O)}catch(S){if(!(f||c)){let k=S instanceof Error?S.message:"Failed to render Mermaid chart";i(k)}}finally{l(!1)}})()},[e,n,g]),a&&!c&&!f)return h.jsx("div",{className:vr("my-4 flex justify-center p-4",t),children:h.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[h.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-current border-b-2"}),h.jsx("span",{className:"text-sm",children:"Loading diagram..."})]})});if(o&&!c&&!f){let S=()=>y(k=>k+1);return w?h.jsx(w,{chart:e,error:o,retry:S}):h.jsxs("div",{className:vr("rounded-lg border border-red-200 bg-red-50 p-4",t),children:[h.jsxs("p",{className:"font-mono text-red-700 text-sm",children:["Mermaid Error: ",o]}),h.jsxs("details",{className:"mt-2",children:[h.jsx("summary",{className:"cursor-pointer text-red-600 text-xs",children:"Show Code"}),h.jsx("pre",{className:"mt-2 overflow-x-auto rounded bg-red-100 p-2 text-red-800 text-xs",children:e})]})]})}let _=c||f;return h.jsx(Jrt,{className:vr(r?"h-full w-full overflow-hidden":"my-4 overflow-hidden",t),fullscreen:r,maxZoom:3,minZoom:.5,showControls:s,zoomStep:.1,children:h.jsx("div",{"aria-label":"Mermaid chart",className:vr("flex justify-center",r&&"h-full w-full items-center"),dangerouslySetInnerHTML:{__html:_},role:"img"})})};x.createContext(null);const jI=x.memo(({className:e,...t})=>h.jsx(uie,{className:Qe("size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",e),...t}),(e,t)=>e.children===t.children);jI.displayName="MessageResponse";function UI(e){return typeof e=="object"&&e!==null&&"_def"in e}function Xrt(e){var r,s,o,i;if(!UI(e))return{type:"object",properties:{}};if(!e.shape)return{type:"object",properties:{}};const t={},n=[];for(const[a,l]of Object.entries(e.shape)){if(!UI(l))continue;const c=l;let u=l;for(;u._def&&(u._def.typeName==="ZodOptional"||u._def.typeName==="ZodNullable"||u._def.typeName==="ZodDefault"||u._def.typeName==="ZodEffects");){const v=u._def.innerType||u._def.schema;if(!v)break;u=v}const f=((r=u._def)==null?void 0:r.typeName)||"ZodString",g={type:{ZodString:"string",ZodNumber:"number",ZodBoolean:"boolean",ZodArray:"array",ZodObject:"object",ZodEnum:"string",ZodNativeEnum:"string"}[f]||"string"},y=((s=u._def)==null?void 0:s.description)||u.description||c.description;y&&(g.description=y),f==="ZodEnum"&&((o=u._def)!=null&&o.values)&&(g.enum=u._def.values),t[a]=g,(i=c.isOptional)!=null&&i.call(c)||n.push(a)}return{type:"object",properties:t,required:n.length>0?n:void 0}}function Qrt(e){if(UI(e))return Xrt(e);if(typeof e=="object"&&e!==null){const t=e;return t.type?t.properties?t:{...t,properties:{}}:{type:"object",...t}}return{type:"object",properties:{}}}const LA=()=>{var e;return!((e=window.electronAPI)!=null&&e.isElectron)},$A=()=>window.location.origin,est=new Set(["claude-sonnet-4-5","claude-sonnet-4-5-20250929","claude-opus-4-5","claude-opus-4-5-20251101","claude-haiku-4-5","claude-haiku-4-5-20251001","claude-code"]);function tst(e){if(est.has(e))return!0;const t=e.toLowerCase();return!!(t.includes("sonnet-4-5")||t.includes("opus-4-5")||t.includes("haiku-4-5"))}const mH={"gemini-3-pro-preview":"google","gemini-2.5-pro":"google","gemini-2.5-flash":"google","gemini-2.5-flash-lite":"google","gpt-4o":"openai","gpt-4o-mini":"openai","gpt-4-turbo":"openai","gpt-4":"openai","gpt-3.5-turbo":"openai",o1:"openai","o1-mini":"openai","o1-preview":"openai",o3:"openai","o3-mini":"openai","claude-3-5-sonnet":"anthropic","claude-3-5-sonnet-20241022":"anthropic","claude-4-sonnet":"anthropic","claude-4-sonnet-20250514":"anthropic","claude-sonnet-4-20250514":"anthropic","claude-3-opus":"anthropic","claude-3-opus-20240229":"anthropic","claude-3-sonnet-20240229":"anthropic","claude-3-haiku-20240307":"anthropic","claude-code":"claude-code","claude-sonnet-4-5":"claude-code","claude-sonnet-4-5-20250929":"claude-code","claude-opus-4-5":"claude-code","claude-opus-4-5-20251101":"claude-code","claude-haiku-4-5":"claude-code","claude-haiku-4-5-20251001":"claude-code",codex:"codex","codex-gpt-4o":"codex","codex-o1":"codex","codex-o1-pro":"codex","gpt-5.1-codex":"codex","gpt-5.1-codex-mini":"codex","gpt-5.1-nano":"codex","gpt-5-codex":"codex","gpt-5-codex-mini":"codex"};function nst(e){if(mH[e])return mH[e];const t=e.toLowerCase();return t.startsWith("gemini-")?"google":t.startsWith("gpt-")||t.startsWith("o1")||t.startsWith("o3")?"openai":t.startsWith("claude-")?t.includes("sonnet-4-5")||t.includes("opus-4-5")||t.includes("haiku-4-5")?"claude-code":"anthropic":t.includes("codex")?"codex":null}function rst(e={}){const[t,n]=x.useState(!1),[r,s]=x.useState(!1),[o,i]=x.useState(null),[a,l]=x.useState(!1),c=x.useRef(null),u=x.useRef([]),f=x.useRef(e);x.useEffect(()=>{f.current=e},[e]),x.useEffect(()=>{var w;if(LA()){fetch(`${$A()}/api/ai/providers`).then(_=>_.json()).then(_=>{_.success&&(_.data,l(!0))}).catch(_=>{l(!0)});return}if((w=window.electronAPI)!=null&&w.aiSdk)return window.electronAPI.aiSdk.initialize().then(()=>{l(!0)}).catch(_=>{Kr.aiChat.error("Failed to initialize AI SDK:",_)}),()=>{var _,S,k;u.current.forEach(R=>R()),u.current=[],(k=(S=(_=window.electronAPI)==null?void 0:_.aiSdk)==null?void 0:S.removeAllListeners)==null||k.call(S)}},[]);const m=x.useCallback(w=>{const _={};for(const S of w)_[S.id]=S.apiKey;return _},[]),g=x.useCallback(async({modelId:w,messages:_,providers:S,system:k,tools:R,maxSteps:O=5,onChunk:M,onStepFinish:P,enableReasoning:j=!1,onReasoningChunk:q,mcpTools:U=[],projectFolder:z})=>{var W,X,J,ee,re,ie,Z,te,oe,Q,Te,ge,Ce;if(LA()){n(!0),s(!0),i(null);try{const he=$A(),Fe=_.map(ot=>({role:ot.role,content:ot.content})),De={};for(const ot of S)De[ot.id]=ot.apiKey;const Re=await fetch(`${he}/api/ai/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:Fe,modelId:w,system:k,providers:De})});if(!Re.ok){const ot=await Re.json().catch(()=>({}));throw new Error(ot.error||`HTTP ${Re.status}`)}const tt=(W=Re.body)==null?void 0:W.getReader();if(!tt)throw new Error("No response body");const fe=new TextDecoder;let nt="";for(;;){const{done:ot,value:Ht}=await tt.read();if(ot)break;const Pt=fe.decode(Ht,{stream:!0}).split(`
`);for(const tn of Pt)if(tn.startsWith("data: ")){const xt=tn.slice(6);if(xt==="[DONE]")continue;try{const pe=JSON.parse(xt);if(pe.type==="text-delta"&&pe.text)nt+=pe.text,M==null||M(pe.text),(J=(X=f.current).onTextDelta)==null||J.call(X,pe.text);else if(pe.type==="error")throw new Error(pe.error)}catch{}}}return n(!1),s(!1),(re=(ee=f.current).onResponse)==null||re.call(ee,nt),(Z=(ie=f.current).onFinish)==null||Z.call(ie),{text:nt}}catch(he){const Fe=he instanceof Error?he:new Error(String(he));return i(Fe),n(!1),s(!1),(oe=(te=f.current).onError)==null||oe.call(te,Fe),{text:null}}}if(!((Q=window.electronAPI)!=null&&Q.aiSdk)){const he=new Error("AI SDK not available - requires Electron environment");return i(he),(ge=(Te=f.current).onError)==null||ge.call(Te,he),{text:null}}const H=window.electronAPI.aiSdk;u.current.forEach(he=>he()),u.current=[],n(!0),s(!0),i(null);const F=crypto.randomUUID();if(c.current=F,tst(w)&&((Ce=window.electronAPI)!=null&&Ce.agentSdk)){const he=window.electronAPI.agentSdk;return new Promise(Fe=>{let De="",Re="";const tt=[],fe=[],nt=new Map,ot=he.onTextChunk(Le=>{var Ve,_e,Y,L;Le.requestId===F&&(De+=Le.chunk,M==null||M(Le.chunk),(_e=(Ve=f.current).onTextDelta)==null||_e.call(Ve,Le.chunk),(L=(Y=f.current).onStreamEvent)==null||L.call(Y,{type:"text-delta",data:Le.chunk,timestamp:new Date}))}),Ht=he.onThinkingStart(Le=>{Le.requestId===F&&Kr.aiChat.log(`[Agent SDK] Thinking started at index ${Le.index}`)}),qt=he.onThinkingChunk(Le=>{var Ve,_e,Y,L;Le.requestId===F&&(Re+=Le.chunk,q==null||q(Le.chunk),(_e=(Ve=f.current).onReasoningDelta)==null||_e.call(Ve,Le.chunk),(L=(Y=f.current).onStreamEvent)==null||L.call(Y,{type:"reasoning-delta",data:Le.chunk,timestamp:new Date}))}),Pt=he.onToolStart(Le=>{Le.requestId===F&&(Kr.aiChat.log(`[Agent SDK] Tool started: ${Le.toolName} (${Le.toolCallId})`),nt.set(Le.toolCallId,{name:Le.toolName,partialJson:""}),P==null||P({text:De,toolCalls:[{type:"tool-call",toolCallId:Le.toolCallId,toolName:Le.toolName,args:{}}]}))}),tn=he.onToolInputDelta(Le=>{if(Le.requestId!==F)return;const Ve=nt.get(Le.toolCallId);Ve&&(Ve.partialJson+=Le.delta)}),xt=he.onToolResult(Le=>{var we,ze,Be,ut,ln,jt,fn,an;if(Le.requestId!==F)return;const Ve=nt.get(Le.toolCallId),_e=(Ve==null?void 0:Ve.name)||"unknown";let Y={};if(Ve!=null&&Ve.partialJson)try{Y=JSON.parse(Ve.partialJson)}catch{Y={raw:Ve.partialJson}}const L={type:"tool-call",toolCallId:Le.toolCallId,toolName:_e,args:Y};tt.push(L),(ze=(we=f.current).onToolCall)==null||ze.call(we,L),(ut=(Be=f.current).onStreamEvent)==null||ut.call(Be,{type:"tool-call",data:L,timestamp:new Date});let B;try{B=JSON.parse(Le.result)}catch{B=Le.result}const ce={type:"tool-result",toolCallId:Le.toolCallId,toolName:_e,result:Le.isError?{error:B}:B};fe.push(ce),(jt=(ln=f.current).onToolResult)==null||jt.call(ln,ce),(an=(fn=f.current).onStreamEvent)==null||an.call(fn,{type:"tool-result",data:ce,timestamp:new Date}),nt.delete(Le.toolCallId),P==null||P({text:De,toolResults:[ce]})}),pe=he.onBlockStop(Le=>{Le.requestId===F&&Kr.aiChat.log(`[Agent SDK] Block stopped at index ${Le.index}`)}),Ne=he.onComplete(Le=>{var Ve,_e,Y,L,B,ce,we,ze;if(Le.requestId===F){if(ot(),Ht(),qt(),Pt(),tn(),xt(),pe(),Ne(),$e(),Je(),Le.thinking||Re){const Be=Le.thinking||Re;(_e=(Ve=f.current).onReasoningComplete)==null||_e.call(Ve,{type:"thinking",content:Be,timestamp:new Date})}(L=(Y=f.current).onResponse)==null||L.call(Y,Le.text||De),(ce=(B=f.current).onFinish)==null||ce.call(B),(ze=(we=f.current).onStreamEvent)==null||ze.call(we,{type:"finish",data:{finishReason:"stop"},timestamp:new Date}),s(!1),n(!1),c.current=null,Fe({text:Le.text||De,toolCalls:tt.length>0?tt:void 0,toolResults:fe.length>0?fe:void 0,reasoning:Le.thinking||Re||void 0})}}),$e=he.onError(Le=>{var _e,Y;if(Le.requestId!==F)return;ot(),Ht(),qt(),Pt(),tn(),xt(),pe(),Ne(),$e(),Je();const Ve=new Error(Le.error);i(Ve),(Y=(_e=f.current).onError)==null||Y.call(_e,Ve),s(!1),n(!1),c.current=null,Fe({text:null})}),Je=he.onInterrupted(Le=>{Le.requestId===F&&s(!1)});u.current=[ot,Ht,qt,Pt,tn,xt,pe,Ne,$e,Je],he.stream({requestId:F,modelId:w,messages:_,system:k,maxThinkingTokens:j?16384:0,projectFolder:z,mcpTools:U}).catch(Le=>{var Ve,_e;i(Le),(_e=(Ve=f.current).onError)==null||_e.call(Ve,Le),s(!1),n(!1),Fe({text:null})})})}return new Promise(he=>{let Fe="",De="";const Re=[],tt=[],fe=H.onTextChunk(Pt=>{var tn,xt,pe,Ne;Pt.requestId===F&&(Fe+=Pt.chunk,M==null||M(Pt.chunk),(xt=(tn=f.current).onTextDelta)==null||xt.call(tn,Pt.chunk),(Ne=(pe=f.current).onStreamEvent)==null||Ne.call(pe,{type:"text-delta",data:Pt.chunk,timestamp:new Date}))}),nt=H.onStepFinish(Pt=>{var pe,Ne;if(Pt.requestId!==F)return;const tn=((pe=Pt.toolCalls)==null?void 0:pe.map($e=>({type:"tool-call",...$e})))||[],xt=((Ne=Pt.toolResults)==null?void 0:Ne.map($e=>({type:"tool-result",...$e})))||[];Re.push(...tn),tt.push(...xt),tn.forEach($e=>{var Je,Le;return(Le=(Je=f.current).onToolCall)==null?void 0:Le.call(Je,$e)}),xt.forEach($e=>{var Je,Le;return(Le=(Je=f.current).onToolResult)==null?void 0:Le.call(Je,$e)}),P==null||P({text:Pt.text,toolCalls:tn.length>0?tn:void 0,toolResults:xt.length>0?xt:void 0})}),ot=H.onComplete(Pt=>{var tn,xt,pe,Ne,$e,Je,Le,Ve,_e,Y,L,B,ce,we;if(Pt.requestId===F){if(fe(),nt(),ot(),Ht(),Pt.reasoning&&(De=Pt.reasoning,q==null||q(Pt.reasoning),(xt=(tn=f.current).onReasoningDelta)==null||xt.call(tn,Pt.reasoning),(Ne=(pe=f.current).onReasoningComplete)==null||Ne.call(pe,{type:"thinking",content:Pt.reasoning,timestamp:new Date})),Pt.toolCalls){for(const ze of Pt.toolCalls)if(!Re.find(Be=>Be.toolCallId===ze.toolCallId)){const Be={type:"tool-call",...ze};Re.push(Be),(Je=($e=f.current).onToolCall)==null||Je.call($e,Be)}}if(Pt.toolResults){for(const ze of Pt.toolResults)if(!tt.find(Be=>Be.toolCallId===ze.toolCallId)){const Be={type:"tool-result",...ze};tt.push(Be),(Ve=(Le=f.current).onToolResult)==null||Ve.call(Le,Be)}}(Y=(_e=f.current).onResponse)==null||Y.call(_e,Pt.text),(B=(L=f.current).onFinish)==null||B.call(L),(we=(ce=f.current).onStreamEvent)==null||we.call(ce,{type:"finish",data:{finishReason:Pt.finishReason},timestamp:new Date}),s(!1),n(!1),c.current=null,he({text:Pt.text,toolCalls:Re.length>0?Re:void 0,toolResults:tt.length>0?tt:void 0,reasoning:De||void 0})}}),Ht=H.onError(Pt=>{var xt,pe;if(Pt.requestId!==F)return;fe(),nt(),ot(),Ht();const tn=new Error(Pt.error);i(tn),(pe=(xt=f.current).onError)==null||pe.call(xt,tn),s(!1),n(!1),c.current=null,he({text:null})});u.current=[fe,nt,ot,Ht];const qt={};if(R)for(const[Pt,tn]of Object.entries(R)){const xt=Qrt(tn.parameters);qt[Pt]={description:tn.description,parameters:xt},Kr.aiChat.log(`Tool ${Pt} params:`,JSON.stringify(xt))}H.stream({requestId:F,modelId:w,messages:_,providers:m(S),system:k,tools:qt,maxSteps:O,enableReasoning:j,mcpTools:U,projectFolder:z}).catch(Pt=>{var tn,xt;i(Pt),(xt=(tn=f.current).onError)==null||xt.call(tn,Pt),n(!1),he({text:null})})})},[m]),y=x.useCallback(async({modelId:w,messages:_,providers:S,system:k,tools:R,maxSteps:O=5,mcpTools:M=[],projectFolder:P})=>{var q,U,z,H,F,W,X,J,ee,re,ie,Z,te,oe,Q,Te,ge,Ce,he,Fe,De,Re;if(LA()){n(!0),i(null);try{const tt=$A(),fe={};for(const Ht of S)fe[Ht.id]=Ht.apiKey;const nt=await fetch(`${tt}/api/ai/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:_,modelId:w,system:k,providers:fe})});if(!nt.ok){const Ht=await nt.json().catch(()=>({}));throw new Error(Ht.error||`HTTP ${nt.status}`)}const ot=await nt.json();if(n(!1),ot.success)return{text:ot.data.text};throw new Error(ot.error||"Unknown error")}catch(tt){const fe=tt instanceof Error?tt:new Error(String(tt));return i(fe),n(!1),(U=(q=f.current).onError)==null||U.call(q,fe),{text:null}}}if(!((z=window.electronAPI)!=null&&z.aiSdk)){const tt=new Error("AI SDK not available - requires Electron environment");return i(tt),(F=(H=f.current).onError)==null||F.call(H,tt),{text:null}}const j=window.electronAPI.aiSdk;n(!0),i(null);try{const tt={};if(R)for(const[nt,ot]of Object.entries(R)){let Ht;if(ot.parameters&&typeof ot.parameters=="object"&&"_def"in ot.parameters)try{if("shape"in ot.parameters){const qt=ot.parameters.shape,Pt={},tn=[];for(const[xt,pe]of Object.entries(qt)){const Ne=pe,$e=((W=Ne._def)==null?void 0:W.typeName)||"ZodString",Je={ZodString:"string",ZodNumber:"number",ZodBoolean:"boolean",ZodArray:"array",ZodObject:"object"};Pt[xt]={type:Je[$e]||"string",description:((X=Ne._def)==null?void 0:X.description)||Ne.description||""},(J=Ne.isOptional)!=null&&J.call(Ne)||tn.push(xt)}Ht={type:"object",properties:Pt,required:tn.length>0?tn:void 0}}else Ht={type:"object",properties:{}}}catch{Ht={type:"object",properties:{}}}else ot.parameters&&typeof ot.parameters=="object"?Ht=ot.parameters:Ht={type:"object",properties:{}};tt[nt]={description:ot.description,parameters:Ht}}const fe=await j.generate({modelId:w,messages:_,providers:m(S),system:k,tools:tt,maxSteps:O,mcpTools:M,projectFolder:P});if(!fe.success){const nt=new Error(fe.error||"Unknown error");return i(nt),(re=(ee=f.current).onError)==null||re.call(ee,nt),{text:null}}if(fe.toolCalls)for(const nt of fe.toolCalls){const ot={type:"tool-call",...nt};(Z=(ie=f.current).onToolCall)==null||Z.call(ie,ot)}if(fe.toolResults)for(const nt of fe.toolResults){const ot={type:"tool-result",...nt};(oe=(te=f.current).onToolResult)==null||oe.call(te,ot)}return(Te=(Q=f.current).onResponse)==null||Te.call(Q,fe.text),(Ce=(ge=f.current).onFinish)==null||Ce.call(ge),{text:fe.text,toolCalls:(he=fe.toolCalls)==null?void 0:he.map(nt=>({type:"tool-call",...nt})),toolResults:(Fe=fe.toolResults)==null?void 0:Fe.map(nt=>({type:"tool-result",...nt}))}}catch(tt){const fe=tt instanceof Error?tt:new Error(String(tt));return i(fe),(Re=(De=f.current).onError)==null||Re.call(De,fe),{text:null}}finally{n(!1)}},[m]),v=x.useCallback(()=>{var w,_;u.current.forEach(S=>S()),u.current=[],c.current=null,s(!1),n(!1),(_=(w=f.current).onFinish)==null||_.call(w)},[]);return{stream:g,generate:y,cancel:v,isLoading:t,isGenerating:r,error:o,isInitialized:a}}function sst(e){return e.map(t=>({role:t.role,content:t.content}))}function ost(e){var t;return`You are a UI editor. Given an element and a request, output a JSON object with the changes.

Element:
- Tag: ${e.tagName}
- Classes: ${e.className||"none"}
- ID: ${e.id||"none"}
- Text: ${((t=e.text)==null?void 0:t.substring(0,100))||"none"}
- Styles: ${JSON.stringify(e.computedStyle||{}).substring(0,300)}

Output ONLY valid JSON:
{
  "cssChanges": { "property": "value" },
  "textChange": "new text if changing",
  "description": "Brief description"
}

Rules:
- "textChange" for text content changes
- "cssChanges" for style changes (use camelCase: backgroundColor, fontSize)
- Keep descriptions under 20 words`}function gH(e){return`You are a coding assistant with DIRECT file system access.

CRITICAL: USE TOOLS IMMEDIATELY - NEVER ASK THE USER TO:
- Provide file contents (use read_file)
- Run commands (use your tools)
- Share output (read it yourself)
- Paste anything (you have direct access)

Your tools:
- list_directory(path): List files in a directory
- read_file(path): Read file contents
- write_file(path, content): Write to file
- create_file(path, content): Create new file
- delete_file(path): Delete file
- semantic_search(query): AI-powered search - **USE THIS FOR ALL CODE SEARCHES**
- search_in_files(pattern, path): Grep (only for exact regex like "TODO:|FIXME:")
- find_files(pattern, path): Glob (only for filenames like "*.config.js")
- ask_clarifying_question(question, type, options?): Ask user for clarification with structured input

${e.projectPath?`Project: ${e.projectPath}`:""}

SEARCH STRATEGY - READ THIS CAREFULLY:
 ALWAYS use semantic_search as your FIRST choice for finding code:
  - "Quick start"  semantic_search("quick start onboarding")
  - "auth code"  semantic_search("authentication handler")
  - "API endpoint"  semantic_search("API endpoint definition")
  - "error handling"  semantic_search("error handling")

 ONLY use search_in_files for exact regex patterns:
  - Finding TODO comments  search_in_files("TODO:|FIXME:")
  - Finding specific syntax  search_in_files("import.*React")

FORMATTING: Use separate paragraphs for distinct thoughts. Add a blank line between paragraphs.

START WORKING IMMEDIATELY. Read files, make changes, execute.`}function bH(e){var n;const t=[];return t.push(`You are an AI assistant with DIRECT access to the user's development environment.

CRITICAL BEHAVIOR:
- NEVER ask the user to provide files, run commands, or share output
- NEVER say "could you share" or "please paste" - USE YOUR TOOLS
- When you need to see files: READ THEM with read_file or list_directory
- When you need to search code: ALWAYS use semantic_search FIRST
- BE PROACTIVE - just do the work, don't ask for permission

FORMATTING: Use separate paragraphs for distinct thoughts. Add a blank line between paragraphs for readability.

Your tools:
- list_directory(path): List files in a directory
- read_file(path): Read file contents
- write_file(path, content): Write to file
- semantic_search(query): **DEFAULT SEARCH TOOL** - Finds code by meaning, intent, and context
- search_in_files(pattern, path): Grep (only for exact regex like "TODO:|import.*")
- find_files(pattern, path): Glob (only for filenames like "*.test.ts")
- ask_clarifying_question(question, type, options?): Ask user for structured input when you need clarification

${e.projectPath?`Project: ${e.projectPath}`:""}
${e.mcpToolCount?`MCP tools available: ${e.mcpToolCount}`:""}

SEARCH STRATEGY:
 semantic_search is your PRIMARY search tool - use it for:
  - Finding features: "user authentication", "payment processing"
  - Finding patterns: "error handling", "validation logic"
  - Finding concepts: "state management", "API endpoints"
  - Finding ANYTHING: "Quick start", "navbar component", "config file"

 ONLY use search_in_files/find_files when semantic_search says "Index is empty" or for exact regex

CLARIFYING QUESTIONS:
Use ask_clarifying_question when you need user input BEFORE taking action:
- Ambiguous requests: "Which authentication method: OAuth, JWT, or session-based?"
- Multiple options: "Should I use React Query or SWR for data fetching?"
- Confirmation: "This will delete 15 files. Proceed?"
- Preferences: "What styling approach: Tailwind, CSS modules, or styled-components?"

Types:
- single-select: User picks ONE option (radio buttons)
- multi-select: User picks MULTIPLE options (checkboxes)
- text: Free text input for open-ended questions
- confirm: Simple yes/no confirmation`),e.selectedElement&&t.push(`
Selected Element:
- ${e.selectedElement.tagName}${e.selectedElement.id?"#"+e.selectedElement.id:""}
- Classes: ${e.selectedElement.className||"none"}
- Text: ${((n=e.selectedElement.text)==null?void 0:n.substring(0,50))||"none"}`),t.join(`
`)}function ist(e){return`You are a voice assistant for development. Keep responses SHORT (1-2 sentences).

${e.projectPath?`Working in: ${e.projectPath}`:""}

Respond conversationally. For actions, confirm briefly then execute.
Don't read code aloud - summarize what you found.`}function ast(e,t){switch(e){case"dom_edit":return t.selectedElement?ost(t.selectedElement):gH(t);case"file_ops":return gH(t);case"chat":return bH(t);case"voice":return ist(t);default:return bH(t)}}function lst(e,t){return(e==="ui_modify"||e==="ui_build")&&t?"dom_edit":["code_edit","code_create","code_delete","file_operation","code_refactor","test","document","deploy","configure"].includes(e)?"file_ops":"chat"}function cst(){const e=x.useMemo(()=>{var n;return typeof window<"u"&&!!((n=window.electronAPI)!=null&&n.isElectron)},[]),t=x.useMemo(()=>!e||!window.electronAPI?null:window.electronAPI,[e]);return{isElectron:e,api:t,git:(t==null?void 0:t.git)??null,files:(t==null?void 0:t.files)??null,aiSdk:(t==null?void 0:t.aiSdk)??null,oauth:(t==null?void 0:t.oauth)??null,codex:(t==null?void 0:t.codex)??null,claudeCode:(t==null?void 0:t.claudeCode)??null,mcp:(t==null?void 0:t.mcp)??null,voice:(t==null?void 0:t.voice)??null,tabdata:(t==null?void 0:t.tabdata)??null,lsp:(t==null?void 0:t.lsp)??null,dialog:(t==null?void 0:t.dialog)??null}}function ui(){var n;const e=typeof window<"u"&&!!((n=window.electronAPI)!=null&&n.isElectron),t=e?window.electronAPI:null;return{isElectron:e,api:t,git:(t==null?void 0:t.git)??null,files:(t==null?void 0:t.files)??null,aiSdk:(t==null?void 0:t.aiSdk)??null,oauth:(t==null?void 0:t.oauth)??null,codex:(t==null?void 0:t.codex)??null,claudeCode:(t==null?void 0:t.claudeCode)??null,mcp:(t==null?void 0:t.mcp)??null,voice:(t==null?void 0:t.voice)??null,tabdata:(t==null?void 0:t.tabdata)??null,lsp:(t==null?void 0:t.lsp)??null,dialog:(t==null?void 0:t.dialog)??null}}const ust=[{type:"code_edit",patterns:[/(?:edit|change|modify|update|fix)\s+(?:the\s+)?(?:code|function|method|class|component)/i,/(?:make|set)\s+(?:it|this|the)\s+/i,/(?:replace|swap)\s+/i],keywords:["edit","change","modify","update","fix","replace","swap","alter"]},{type:"code_create",patterns:[/(?:create|add|new|generate|make)\s+(?:a\s+)?(?:new\s+)?(?:file|function|method|class|component)/i,/(?:write|implement)\s+(?:a\s+)?/i],keywords:["create","add","new","generate","write","implement"]},{type:"code_delete",patterns:[/(?:delete|remove|drop)\s+(?:the\s+)?(?:file|function|method|class|component)/i],keywords:["delete","remove","drop"]},{type:"code_explain",patterns:[/(?:explain|what\s+does|how\s+does|describe)\s+(?:this|the)/i,/(?:what\s+is|what's)\s+(?:this|the)/i],keywords:["explain","describe","what does","how does","what is"]},{type:"code_refactor",patterns:[/(?:refactor|clean\s+up|improve|optimize)/i,/(?:make\s+(?:it|this)\s+)?(?:better|cleaner|faster|more\s+efficient)/i],keywords:["refactor","clean up","improve","optimize","better","cleaner"]},{type:"file_operation",patterns:[/(?:list|show|find|what)\s+(?:files|folders|directories)/i,/(?:rename|move|copy)\s+(?:the\s+)?(?:file|folder)/i,/(?:what(?:'s| is)?\s+in)\s+(?:the\s+)?(?:folder|directory|\.)/i,/(?:ls|dir)\b/i,/(?:read|open|view|cat)\s+(?:the\s+)?(?:file|content)/i,/(?:write|save|create|edit|modify|update|change)\s+(?:the\s+)?(?:file|code)/i,/(?:delete|remove)\s+(?:the\s+)?(?:file|folder)/i,/(?:show|what's|whats|what is)\s+(?:in\s+)?(?:the\s+)?(?:project|folder|directory|codebase|repo)/i],keywords:["list files","show files","rename","move file","copy file","what files","whats in","folder contents","directory","ls","read file","write file","create file","edit file","save file","delete file","project files","codebase","show me"]},{type:"ui_inspect",patterns:[/(?:what\s+is|describe|analyze)\s+(?:this\s+)?(?:element|button|component)/i,/(?:look\s+at|check)\s+(?:this|the)/i],keywords:["inspect","analyze element","what is this element"]},{type:"ui_modify",patterns:[/(?:change|modify|update)\s+(?:this\s+)?(?:element|button|style|color|text|font|background)?/i,/(?:make\s+(?:it|this|that)\s*)/i,/(?:set|change)\s+(?:the\s+)?(?:color|background|font|size|width|height|padding|margin)?/i,/(?:add|remove)\s+(?:a\s+)?(?:border|shadow|padding|margin)/i,/\b(?:red|blue|green|black|white|bigger|smaller|larger|bold|italic)\b/i,/^["'][^"']+["']$/i,/(?:change|set|update)\s+(?:it\s+)?to\s+/i,/(?:text|label|title|content)\s*(?:to|:|\=)\s*/i,/(?:remove|delete|hide)\s+(?:this|that|it|the\s+element)/i,/(?:use|replace\s+with|change\s+to|swap\s+with)\s+(?:this\s+)?(?:image|photo|picture|attached)/i,/(?:replace|change|update|swap)\s+(?:this\s+)?(?:image|photo|picture|img)/i,/(?:set|use)\s+(?:the\s+)?attached\s+(?:image|photo|picture|file)?/i],keywords:["change","make it","make this","set","red","blue","green","black","white","bigger","smaller","larger","bold","italic","background","color","font","size","padding","margin","border","style","update","modify","change to","set to","remove this","delete this","hide this","remove","delete","hide","use this image","replace image","change image","swap image","use attached","replace with attached"]},{type:"debug",patterns:[/(?:debug|fix|solve)\s+(?:this|the)\s+(?:issue|bug|error|problem)/i,/(?:why\s+is|what's\s+causing)\s+/i],keywords:["debug","fix bug","solve error","why is","not working"]},{type:"question",patterns:[/^(?:how|what|why|when|where|can|could|should|would|is|are|do|does)/i,/\?$/],keywords:["how","what","why","question"]},{type:"ui_build",patterns:[/(?:build|create|make)\s+(?:a\s+)?(?:new\s+)?(?:page|screen|view|layout|form|modal|dialog|menu|nav|sidebar|header|footer|component|widget)/i,/(?:add|implement)\s+(?:a\s+)?(?:new\s+)?(?:feature|section|area)/i],keywords:["build","create page","new page","new screen","add section","new component","create form","add modal"]},{type:"research",patterns:[/(?:research|investigate|look\s+into|find\s+out|explore|discover)/i,/(?:what\s+are\s+the\s+best|best\s+practices|how\s+do\s+others|industry\s+standard)/i,/(?:search\s+for|look\s+up|google|find\s+examples)/i],keywords:["research","investigate","explore","best practices","find out","look into","examples of"]},{type:"analyze",patterns:[/(?:analyze|analysis|audit|assess|evaluate|examine|study)/i,/(?:what's\s+wrong|find\s+issues|identify\s+problems|check\s+for)/i],keywords:["analyze","analysis","audit","assess","evaluate","examine","study","find issues"]},{type:"compare",patterns:[/(?:compare|versus|vs\.?|which\s+is\s+better|pros\s+and\s+cons|trade-?offs)/i,/(?:difference\s+between|similarities|options)/i],keywords:["compare","versus","vs","better","pros cons","trade-offs","difference between","options"]},{type:"plan",patterns:[/(?:plan|design|architect|outline|strategy|roadmap|approach)/i,/(?:how\s+should\s+we|what's\s+the\s+best\s+way\s+to|steps\s+to)/i],keywords:["plan","design","architect","outline","strategy","roadmap","approach","steps"]},{type:"document",patterns:[/(?:document|write\s+docs|readme|jsdoc|comment|annotate)/i,/(?:add\s+documentation|explain\s+in\s+code|write\s+comments)/i],keywords:["document","documentation","readme","jsdoc","comments","annotate"]},{type:"test",patterns:[/(?:test|write\s+tests|unit\s+test|integration\s+test|e2e|spec)/i,/(?:verify|validate|check\s+if\s+works|make\s+sure)/i],keywords:["test","tests","unit test","integration test","e2e","spec","verify","validate"]},{type:"review",patterns:[/(?:review|code\s+review|security\s+review|check\s+code|audit\s+code)/i,/(?:is\s+this\s+code\s+(?:good|safe|secure)|any\s+issues|improvements)/i],keywords:["review","code review","security review","audit","check code","improvements"]},{type:"deploy",patterns:[/(?:deploy|publish|release|ship|push\s+to\s+prod|go\s+live)/i,/(?:build\s+for\s+production|production\s+build|package)/i],keywords:["deploy","publish","release","ship","production","go live"]},{type:"configure",patterns:[/(?:configure|config|setup|set\s+up|settings|environment|env)/i,/(?:install|add\s+package|npm\s+install|add\s+dependency)/i],keywords:["configure","config","setup","settings","environment","env","install","package"]},{type:"chat",patterns:[/^(?:hi|hello|hey|thanks|thank\s+you|ok|okay|sure|cool|nice|great)\s*[!.]?$/i],keywords:["hi","hello","hey","thanks","ok"]}];function dst(e,t){const n=e.toLowerCase(),r={},s=[];for(const u of ust){let f=0,m=0,g=0,y=0;for(const v of u.patterns)v.test(e)&&(m+=3);f+=m;for(const v of u.keywords)n.includes(v.toLowerCase())&&(g+=1);f+=g,t.selectedElement&&(u.type==="ui_inspect"||u.type==="ui_modify"||u.type==="ui_build")&&(y+=2),t.selectedFiles.length>0&&u.type.startsWith("code_")&&(y+=1),t.selectedLogs.length>0&&u.type==="debug"&&(y+=2),f+=y,r[u.type]={pattern:m,keyword:g,context:y,total:f},f>0&&s.push({type:u.type,score:f})}s.sort((u,f)=>f.score-u.score);const o=s[0]||{type:"unknown",score:0},i=Math.max(o.score*.5,2),a=s.slice(1).filter(u=>u.score>=i).slice(0,2).map(u=>u.type);console.log("[Intent] Classification for:",e.substring(0,50)),console.log("[Intent] Top scores:",s.slice(0,5)),console.log("[Intent] Primary:",o.type,"| Secondary:",a);const l=[];t.selectedFiles.length>0&&l.push(...t.selectedFiles.map(u=>u.path)),t.selectedElement&&l.push(`element:${t.selectedElement.tagName}${t.selectedElement.id?"#"+t.selectedElement.id:""}`);const c={code_edit:"edit",code_create:"create",code_delete:"delete",code_explain:"explain",code_refactor:"refactor",file_operation:"file_op",ui_inspect:"inspect",ui_modify:"modify",ui_build:"build",research:"research",analyze:"analyze",compare:"compare",plan:"plan",document:"document",test:"test",debug:"debug",review:"review",deploy:"deploy",configure:"configure",question:"answer",chat:"chat",unknown:"process"};return{type:o.type,secondaryTypes:a,confidence:Math.min(o.score/10,1),targets:l,action:c[o.type]||"process",description:`${c[o.type]||"process"} ${l.join(", ")||"context"}`}}function fst(e,t,n){var s;const r=[];if(r.push(`You are a coding assistant running in Electron with DIRECT ACCESS to the local file system.

CRITICAL EXECUTION RULES:
1. You have DIRECT file system access. USE IT.
2. When asked to CREATE a file - CREATE IT IMMEDIATELY. Don't read first.
3. When asked to EDIT a file - READ IT ONCE, then WRITE the changes.
4. If a read fails (file not found) and you're creating - JUST CREATE THE FILE.
5. NEVER get stuck in a read loop. If you've tried reading and it failed, MOVE ON.
6. NEVER ask the user to do anything - YOU have the tools, USE THEM.
7. EXECUTE tools directly. Don't explain or ask permission.

ACTION-FIRST BEHAVIOR:
- CREATE tasks: Use write_file or create_file IMMEDIATELY with the content
- EDIT tasks: Read file ONCE, then write_file with changes
- If read fails with "not found" and you're creating: That's EXPECTED - just create it
- If you've read 2+ files without making progress: STOP READING and TAKE ACTION

ANTI-LOOP RULES:
- Do NOT call list_directory more than once per request
- Do NOT call read_file on the same path twice
- Do NOT search for files you should be creating
- If tools return errors, ADAPT - don't retry the same thing

Your tools:

WRITING (use these for CREATE/EDIT):
- write_file: Creates or overwrites file - USE THIS FIRST for create/edit tasks
- create_file: Creates new file (fails if exists)
- delete_file: Deletes file
- rename_file: Renames/moves file
- create_directory: Creates folder

READING (use sparingly):
- read_file: Read file content
- list_directory: List directory contents
- get_file_tree: Get project structure
- read_multiple_files: Read several files at once

SEARCH - CRITICAL INSTRUCTIONS:
- semantic_search: **YOUR PRIMARY SEARCH TOOL** - Finds code by meaning and context
   USE FOR: "Quick start", "auth code", "error handling", "API endpoint", ANY code search
   This understands INTENT, not just keywords
- search_in_files: Grep (ONLY for exact regex patterns like "TODO:|FIXME:")
- find_files: Glob (ONLY for filenames like "*.test.ts")

 IMPORTANT: ALWAYS use semantic_search for finding code. It's faster and smarter than grep.
Only fall back to search_in_files if semantic_search returns "Index is empty".

Current intent: ${t.type} (${t.description})
Confidence: ${Math.round(t.confidence*100)}%`),e.projectPath&&r.push(`
## Project Context
Project root: ${e.projectPath}

IMPORTANT: This is where the source files live. When the user asks about the page or wants changes:
1. Use Glob to find relevant source files (e.g., *.tsx, *.jsx, *.html)
2. Use Read to examine the full file before making changes
3. Common patterns: src/, components/, pages/, app/`),e.selectedElement&&(r.push(`
## Selected UI Element (FOCUS AREA - but read the FULL file for context)
Tag: ${e.selectedElement.tagName}
${e.selectedElement.id?`ID: ${e.selectedElement.id}`:""}
${e.selectedElement.className?`Classes: ${e.selectedElement.className}`:""}
${e.selectedElement.text?`Text: ${e.selectedElement.text.substring(0,100)}`:""}
${e.selectedElement.xpath?`XPath: ${e.selectedElement.xpath}`:""}
${(s=e.selectedElement.sourceLocation)!=null&&s.summary?`Source: ${e.selectedElement.sourceLocation.summary}`:""}

 CRITICAL FOR UI EDITS:
1. This HTML snippet is just the SELECTED element - the user wants to focus on this area
2. You MUST read the ENTIRE source file to understand the full context before editing
3. The element exists within a larger component/page - understand that structure first
4. Don't assume what's around it - READ THE FILE to see the full picture`),e.selectedElement.outerHTML&&r.push(`
HTML Snippet (selected element only):
\`\`\`html
${e.selectedElement.outerHTML.substring(0,500)}
\`\`\``)),e.selectedFiles.length>0){r.push(`
## Selected Files`);for(const o of e.selectedFiles)if(r.push(`
### ${o.path}
\`\`\`
${o.content.substring(0,2e3)}${o.content.length>2e3?`
... (truncated)`:""}
\`\`\``),o.diagnostics&&o.diagnostics.length>0){const i=o.diagnostics.filter(c=>c.severity==="error"),a=o.diagnostics.filter(c=>c.severity==="warning"),l=o.diagnostics.filter(c=>c.severity==="info"||c.severity==="hint");if(r.push(`
**Diagnostics:**`),i.length>0){r.push(`
 **Errors (${i.length}):**`);for(const c of i.slice(0,10))r.push(`- Line ${c.line}:${c.character}: ${c.message}${c.source?` [${c.source}]`:""}`);i.length>10&&r.push(`  ... and ${i.length-10} more errors`)}if(a.length>0){r.push(`
 **Warnings (${a.length}):**`);for(const c of a.slice(0,5))r.push(`- Line ${c.line}:${c.character}: ${c.message}${c.source?` [${c.source}]`:""}`);a.length>5&&r.push(`  ... and ${a.length-5} more warnings`)}if(l.length>0&&i.length===0&&a.length===0){r.push(`
 **Hints (${l.length}):**`);for(const c of l.slice(0,3))r.push(`- Line ${c.line}:${c.character}: ${c.message}`)}}}if(e.selectedLogs.length>0){r.push(`
## Console Logs`);for(const o of e.selectedLogs.slice(-10))r.push(`[${o.type}] ${o.message}`)}switch(t.type){case"code_create":r.push(`
## CREATE INSTRUCTIONS - DO THIS NOW:
1. Call write_file with the FULL content immediately
2. Do NOT read files first - you're CREATING, not editing
3. Do NOT search for where to put the file - the user told you
4. If you need to see project structure, ONE list_directory call max
5. WRITE THE FILE. That is your primary task.`);break;case"code_edit":case"code_refactor":r.push(`
## EDIT INSTRUCTIONS:
1. Read the target file ONCE with read_file
2. Make your changes and call write_file with the new content
3. Do NOT read other files unless absolutely necessary
4. If read_file returns "not found" error, use write_file to create it`);break;case"code_explain":case"question":r.push(`
## EXPLAIN INSTRUCTIONS:
Read the relevant files and provide clear explanations.
Reference specific line numbers when discussing code.`);break;case"ui_inspect":case"ui_modify":r.push(`
## UI INSTRUCTIONS:
1. The element info is above - USE IT
2. If modifying, call write_file to update the source
3. Do NOT over-analyze - make the change`);break;case"debug":r.push(`
## DEBUG INSTRUCTIONS:
1. Read the error info provided
2. Call read_file on the suspected file
3. Call write_file with the fix
4. Do NOT endlessly search - make your best fix attempt`);break}if(n&&n.length>0){const o=n.reduce((i,a)=>(i[a.serverId]||(i[a.serverId]=[]),i[a.serverId].push(a),i),{});r.push(`
## MCP Tools (External Capabilities)
You have access to additional tools from connected MCP (Model Context Protocol) servers.
These extend your capabilities beyond local file operations.

To call an MCP tool, use the format: mcp_<serverId>_<toolName>`);for(const[i,a]of Object.entries(o)){r.push(`
### Server: ${i}`);for(const l of a){const c=l.inputSchema.properties?Object.keys(l.inputSchema.properties).join(", "):"none";r.push(`- **mcp_${i}_${l.name}**: ${l.description||"No description"} (params: ${c})`)}}}return r.join(`
`)}function hst(e={}){const{onFileModified:t,onAskClarifyingQuestion:n}=e;return{read_file:{description:"Read the contents of a file",parameters:li({path:ss().describe("Absolute path to the file").optional(),filePath:ss().describe("Legacy alias for path").optional()}),execute:async r=>{var c;const{path:s,filePath:o}=r,i=s??o;if(!i)return{error:'read_file requires a "path" argument'};const{api:a}=ui();if(!((c=a==null?void 0:a.files)!=null&&c.readFile))return{error:"File operations not available (not in Electron)"};const l=await a.files.readFile(i);return l.success?{content:l.data,path:i}:{error:l.error}}},write_file:{description:"Write content to a file (creates or overwrites)",parameters:li({path:ss().describe("Absolute path to the file"),content:ss().describe("Content to write")}),execute:async r=>{var c,u;const{path:s,content:o}=r,{api:i}=ui();if(!((c=i==null?void 0:i.files)!=null&&c.writeFile))return{error:"File operations not available (not in Electron)"};let a;if((u=i==null?void 0:i.files)!=null&&u.readFile){const f=await i.files.readFile(s);f.success&&(a=f.data)}const l=await i.files.writeFile(s,o);return l.success?(t==null||t({type:"write",path:s,originalContent:a,newContent:o}),{success:!0,path:s,bytesWritten:o.length}):{error:l.error}}},create_file:{description:"Create a new file (fails if file exists)",parameters:li({path:ss().describe("Absolute path for the new file"),content:ss().optional().describe("Initial content")}),execute:async r=>{var l;const{path:s,content:o}=r,{api:i}=ui();if(!((l=i==null?void 0:i.files)!=null&&l.createFile))return{error:"File operations not available (not in Electron)"};const a=await i.files.createFile(s,o||"");return a.success?(t==null||t({type:"create",path:s,newContent:o||""}),{success:!0,path:s}):{error:a.error}}},delete_file:{description:"Delete a file",parameters:li({path:ss().describe("Absolute path to the file to delete")}),execute:async r=>{var l,c;const{path:s}=r,{api:o}=ui();if(!((l=o==null?void 0:o.files)!=null&&l.deleteFile))return{error:"File operations not available (not in Electron)"};let i;if((c=o==null?void 0:o.files)!=null&&c.readFile){const u=await o.files.readFile(s);u.success&&(i=u.data)}const a=await o.files.deleteFile(s);return a.success?(t==null||t({type:"delete",path:s,originalContent:i}),{success:!0,path:s}):{error:a.error}}},rename_file:{description:"Rename or move a file",parameters:li({oldPath:ss().describe("Current path"),newPath:ss().describe("New path")}),execute:async r=>{var l;const{oldPath:s,newPath:o}=r,{api:i}=ui();if(!((l=i==null?void 0:i.files)!=null&&l.renameFile))return{error:"File operations not available (not in Electron)"};const a=await i.files.renameFile(s,o);return a.success?{success:!0,oldPath:s,newPath:o}:{error:a.error}}},list_directory:{description:"List files and folders in a directory",parameters:li({path:ss().optional().describe("Directory path (defaults to project root)")}),execute:async r=>{var a;const{path:s}=r,{api:o}=ui();if(!((a=o==null?void 0:o.files)!=null&&a.listDirectory))return{error:"File operations not available (not in Electron)"};const i=await o.files.listDirectory(s);return i.success?{entries:i.data,path:s||"project root"}:{error:i.error}}},create_directory:{description:"Create a new directory",parameters:li({path:ss().describe("Path for the new directory")}),execute:async r=>{var a;const{path:s}=r,{api:o}=ui();if(!((a=o==null?void 0:o.files)!=null&&a.createDirectory))return{error:"File operations not available (not in Electron)"};const i=await o.files.createDirectory(s);return i.success?{success:!0,path:s}:{error:i.error}}},file_exists:{description:"Check if a file or directory exists",parameters:li({path:ss().describe("Path to check")}),execute:async r=>{var a;const{path:s}=r,{api:o}=ui();return(a=o==null?void 0:o.files)!=null&&a.exists?{exists:(await o.files.exists(s)).exists,path:s}:{error:"File operations not available (not in Electron)"}}},file_stat:{description:"Get file/directory information (size, modified time, etc)",parameters:li({path:ss().describe("Path to check")}),execute:async r=>{var a;const{path:s}=r,{api:o}=ui();if(!((a=o==null?void 0:o.files)!=null&&a.stat))return{error:"File operations not available (not in Electron)"};const i=await o.files.stat(s);return i.success?{...i.data,path:s}:{error:i.error}}},git_status:{description:"Get current git status (modified files, etc)",parameters:li({includeUntracked:S2().optional().describe("Include untracked files (default: true)")}),execute:async()=>{var o;const{api:r}=ui();if(!((o=r==null?void 0:r.git)!=null&&o.getStatus))return{error:"Git operations not available (not in Electron)"};const s=await r.git.getStatus();return s.success?s.data:{error:s.error}}},git_commit:{description:"Commit staged changes with a message",parameters:li({message:ss().describe("Commit message")}),execute:async r=>{var a;const{message:s}=r,{api:o}=ui();if(!((a=o==null?void 0:o.git)!=null&&a.commit))return{error:"Git operations not available (not in Electron)"};const i=await o.git.commit(s);return i.success?{success:!0,message:s}:{error:i.error}}},search_in_files:{description:"Search for text pattern in files (like grep). Returns matching lines with file paths and line numbers.",parameters:li({pattern:ss().describe("Text or regex pattern to search"),directory:ss().optional().describe("Directory to search in (defaults to project root)"),filePattern:ss().optional().describe('File pattern filter (e.g., "*.ts", "*.tsx,*.js")'),caseSensitive:S2().optional().describe("Case sensitive search (default: false)"),maxResults:_2().optional().describe("Maximum results to return (default: 100)")}),execute:async r=>{var f;const{pattern:s,directory:o,filePattern:i,caseSensitive:a,maxResults:l}=r,{api:c}=ui();if(!((f=c==null?void 0:c.files)!=null&&f.searchInFiles))return{error:"Search not available (not in Electron)"};const u=await c.files.searchInFiles(s,o,{filePattern:i,caseSensitive:a,maxResults:l});return u.success?{matches:u.data,count:u.data.length}:{error:u.error}}},semantic_search:{description:"PRIMARY SEARCH TOOL: Search codebase by meaning, intent, and context using AI. Finds code even when exact keywords don't match. Use this for ALL code searches: features, concepts, components, functions, patterns, documentation - everything. 3-10x faster than grep and finds more relevant results. Only falls back to grep if index is empty.",parameters:li({query:ss().describe('Natural language description of what to find (e.g., "authentication handler", "error handling for API calls")'),limit:_2().optional().describe("Maximum results to return (default: 10)"),threshold:_2().optional().describe("Minimum similarity score 0-1 (default: 0.3)")}),execute:async r=>{var l,c;const{query:s,limit:o,threshold:i}=r,{api:a}=ui();if((l=a==null?void 0:a.mgrep)!=null&&l.search){const u=await a.mgrep.search(s,{limit:o,threshold:i});if(u.success&&u.results)return{matches:u.results.map(f=>{var m,g,y,v;return{file:f.filePath,content:f.content,score:f.score,startLine:(m=f.metadata)==null?void 0:m.startLine,endLine:(g=f.metadata)==null?void 0:g.endLine,language:(y=f.metadata)==null?void 0:y.language,functionName:(v=f.metadata)==null?void 0:v.functionName}}),count:u.results.length,semantic:!0};console.log("[semantic_search] mgrep failed, falling back to grep:",u.error)}if((c=a==null?void 0:a.files)!=null&&c.searchInFiles){const u=await a.files.searchInFiles(s,void 0,{maxResults:o||10});return u.success?{matches:u.data,count:u.data.length,semantic:!1,warning:" Fell back to keyword search (slower, less accurate). Code Index not initialized - go to Settings  Code Index to enable AI-powered semantic search for better results."}:{error:u.error}}return{error:"Search not available. Enable Code Index in Settings for semantic search."}}},find_files:{description:'Find files matching a glob pattern (e.g., "**/*.ts", "src/**/*.tsx")',parameters:li({pattern:ss().describe("Glob pattern (supports *, **, ?)"),directory:ss().optional().describe("Directory to search in")}),execute:async r=>{var l;const{pattern:s,directory:o}=r,{api:i}=ui();if(!((l=i==null?void 0:i.files)!=null&&l.glob))return{error:"Glob not available (not in Electron)"};const a=await i.files.glob(s,o);return a.success?{files:a.data,count:a.data.length}:{error:a.error}}},copy_file:{description:"Copy a file to a new location",parameters:li({sourcePath:ss().describe("Source file path"),destPath:ss().describe("Destination file path")}),execute:async r=>{var l;const{sourcePath:s,destPath:o}=r,{api:i}=ui();if(!((l=i==null?void 0:i.files)!=null&&l.copyFile))return{error:"Copy not available (not in Electron)"};const a=await i.files.copyFile(s,o);return a.success?{success:!0,sourcePath:s,destPath:o}:{error:a.error}}},read_multiple_files:{description:"Read multiple files at once - more efficient than calling read_file multiple times",parameters:li({paths:u6(ss()).describe("Array of file paths to read")}),execute:async r=>{var a;const{paths:s}=r,{api:o}=ui();if(!((a=o==null?void 0:o.files)!=null&&a.readMultiple))return{error:"Read multiple not available (not in Electron)"};const i=await o.files.readMultiple(s);return i.success?{files:i.data}:{error:i.error}}},get_file_tree:{description:"Get a recursive file tree of a directory - useful for understanding project structure",parameters:li({directory:ss().optional().describe("Directory path (defaults to project root)"),maxDepth:_2().optional().describe("Maximum depth to traverse (default: 5)"),includeHidden:S2().optional().describe("Include hidden files (default: false)")}),execute:async r=>{var c;const{directory:s,maxDepth:o,includeHidden:i}=r,{api:a}=ui();if(!((c=a==null?void 0:a.files)!=null&&c.getTree))return{error:"Get tree not available (not in Electron)"};const l=await a.files.getTree(s,{maxDepth:o,includeHidden:i});return l.success?{tree:l.data}:{error:l.error}}},ask_clarifying_question:{description:"Ask the user a clarifying question to better understand their needs. Use this when you need more information before proceeding. Supports single-select, multi-select, text input, or simple confirmation.",parameters:li({question:ss().describe("The question to ask the user"),type:d6(["single-select","multi-select","text","confirm"]).describe("Type of input: single-select (one choice), multi-select (multiple choices), text (free text), confirm (yes/no)"),options:u6(li({id:ss().describe("Unique ID for this option"),label:ss().describe("Display text for the option"),description:ss().optional().describe("Additional context for this option")})).optional().describe("Options for single-select or multi-select types"),placeholder:ss().optional().describe("Placeholder text for text input type"),required:S2().optional().describe("Whether the user must answer (default: false)")}),execute:async r=>{const{question:s,type:o,options:i,placeholder:a,required:l}=r;if(!n)return{error:"Clarifying questions not available in this context"};if((o==="single-select"||o==="multi-select")&&(!i||i.length===0))return{error:"Options are required for single-select and multi-select question types"};const c={id:`q_${Date.now()}`,question:s,type:o,options:i,placeholder:a,required:l};try{const u=await n(c);return{success:!0,question:s,response:u,type:o}}catch(u){return{error:`Failed to get user response: ${u}`}}}}}}function pst(e={}){const{mcpTools:t=[],callMCPTool:n,onFileModified:r,onAskClarifyingQuestion:s}=e,[o,i]=x.useState({context:{selectedElement:null,selectedFiles:[],selectedLogs:[],projectPath:null,recentMessages:[]},lastIntent:null,isProcessing:!1}),a=x.useMemo(()=>hst({onFileModified:r,onAskClarifyingQuestion:s}),[r,s]),l=x.useMemo(()=>a,[a,t,n]),c=x.useCallback(m=>{i(g=>({...g,context:{...g.context,...m}}))},[]),u=x.useCallback((m,g)=>{const y=dst(m,o.context);i(_=>({..._,lastIntent:y}));const v=(g==null?void 0:g.forceMode)??lst(y.type,!!o.context.selectedElement);let w;return v==="dom_edit"?w=ast("dom_edit",{selectedElement:o.context.selectedElement,projectPath:o.context.projectPath}):w=fst(o.context,y,t.length>0?t:void 0),{intent:y,systemPrompt:w,tools:l,promptMode:v}},[o.context,t,l]),f=x.useCallback(m=>{i(g=>({...g,isProcessing:m}))},[]);return{context:o.context,lastIntent:o.lastIntent,isProcessing:o.isProcessing,updateContext:c,processMessage:u,setProcessing:f,tools:l}}const mst=({data:e,onSubmit:t,onSkip:n,isDarkMode:r=!0})=>{const[s,o]=x.useState(new Set),[i,a]=x.useState(""),[l,c]=x.useState(!1),u=y=>{if(e.type==="single-select")o(new Set([y]));else{const v=new Set(s);v.has(y)?v.delete(y):v.add(y),o(v)}},f=()=>{if(c(!0),e.type==="text")t(e.id,i);else if(e.type==="confirm")t(e.id,"confirmed");else{const y=Array.from(s);t(e.id,e.type==="single-select"?y[0]:y)}},m=()=>{n&&n(e.id)},g=()=>e.type==="text"?!e.required||i.trim().length>0:e.type==="confirm"?!0:!e.required||s.size>0;return h.jsxs("div",{className:`rounded-xl p-4 my-3 border transition-all duration-200 ${r?"bg-amber-900/20 border-amber-700/50":"bg-amber-50 border-amber-200"}`,children:[h.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${r?"bg-amber-800/50":"bg-amber-100"}`,children:h.jsx(pN,{size:18,className:r?"text-amber-400":"text-amber-600"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:`text-sm font-medium ${r?"text-amber-200":"text-amber-900"}`,children:e.question}),e.type==="multi-select"&&h.jsx("p",{className:`text-xs mt-1 ${r?"text-amber-400/70":"text-amber-700/70"}`,children:"Select all that apply"})]})]}),(e.type==="single-select"||e.type==="multi-select")&&e.options&&h.jsx("div",{className:"space-y-2 mb-4",children:e.options.map(y=>h.jsxs("button",{onClick:()=>u(y.id),disabled:l,className:`w-full text-left px-3 py-2.5 rounded-lg text-sm transition-all duration-200 flex items-center gap-3 ${s.has(y.id)?r?"bg-amber-700/50 text-amber-100 ring-1 ring-amber-500":"bg-amber-200 text-amber-900 ring-1 ring-amber-400":r?"bg-neutral-800/50 text-neutral-300 hover:bg-neutral-700/50":"bg-white text-stone-700 hover:bg-stone-50 border border-stone-200"} ${l?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx("div",{className:`w-4 h-4 rounded-${e.type==="single-select"?"full":"sm"} border-2 flex items-center justify-center transition-colors ${s.has(y.id)?"bg-amber-500 border-amber-500":r?"border-neutral-500":"border-stone-300"}`,children:s.has(y.id)&&h.jsx(Cs,{size:10,className:"text-white"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:"font-medium",children:y.label}),y.description&&h.jsx("p",{className:`text-xs mt-0.5 ${r?"text-neutral-400":"text-stone-500"}`,children:y.description})]})]},y.id))}),e.type==="text"&&h.jsx("div",{className:"mb-4",children:h.jsx("textarea",{value:i,onChange:y=>a(y.target.value),placeholder:e.placeholder||"Type your answer...",disabled:l,className:`w-full px-3 py-2 rounded-lg text-sm resize-none transition-colors ${r?"bg-neutral-800 text-neutral-200 placeholder-neutral-500 border border-neutral-700 focus:border-amber-500":"bg-white text-stone-800 placeholder-stone-400 border border-stone-200 focus:border-amber-400"} focus:outline-none focus:ring-1 focus:ring-amber-500/50 ${l?"opacity-50 cursor-not-allowed":""}`,rows:3})}),e.type==="confirm"&&h.jsx("div",{className:"mb-4",children:h.jsx("p",{className:`text-sm ${r?"text-neutral-400":"text-stone-600"}`,children:"Click confirm to proceed, or skip to provide more context."})}),h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n&&!e.required&&h.jsx("button",{onClick:m,disabled:l,className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${r?"text-neutral-400 hover:text-neutral-200 hover:bg-neutral-800":"text-stone-500 hover:text-stone-700 hover:bg-stone-100"} ${l?"opacity-50 cursor-not-allowed":""}`,children:"Skip"}),h.jsx("button",{onClick:f,disabled:!g()||l,className:`px-4 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${g()&&!l?r?"bg-amber-600 text-white hover:bg-amber-500":"bg-amber-500 text-white hover:bg-amber-600":r?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-200 text-stone-400 cursor-not-allowed"}`,children:l?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):h.jsxs(h.Fragment,{children:[h.jsx(Cs,{size:14}),e.type==="confirm"?"Confirm":"Submit"]})})]})]})};function gst(){const{isElectron:e,api:t}=cst(),n=x.useMemo(()=>e?t==null?void 0:t.lsp:null,[e,t]),r=x.useRef(new Map),s=x.useCallback((v,w,_=200)=>(...S)=>{const k=r.current;k.has(v)&&clearTimeout(k.get(v));const R=setTimeout(()=>{w(...S),k.delete(v)},_);k.set(v,R)},[]),o=x.useCallback(async(v,w,_)=>{if(!n)return null;try{const S=await n.hover(v,w,_);return S.success&&S.data?S.data:null}catch(S){return console.error("[useElectronLSP] Hover failed:",S),null}},[n]),i=x.useCallback(async(v,w,_)=>{if(!n)return[];try{const S=await n.completion(v,w,_);return S.success&&S.data?S.data:[]}catch(S){return console.error("[useElectronLSP] Completion failed:",S),[]}},[n]),a=x.useCallback(async(v,w,_)=>{if(!n)return null;try{const S=await n.definition(v,w,_);return S.success&&S.data?S.data:null}catch(S){return console.error("[useElectronLSP] Definition failed:",S),null}},[n]),l=x.useCallback(async(v,w,_)=>{if(!n)return[];try{const S=await n.references(v,w,_);return S.success&&S.data?S.data:[]}catch(S){return console.error("[useElectronLSP] References failed:",S),[]}},[n]),c=x.useCallback(async v=>{if(!n)return[];try{const w=await n.getDiagnosticsForFile(v);return w.success&&w.data?w.data:[]}catch(w){return console.error("[useElectronLSP] Get diagnostics failed:",w),[]}},[n]),u=x.useCallback(async v=>{if(!n)return!1;try{return(await n.fileSaved(v)).success}catch(w){return console.error("[useElectronLSP] File saved failed:",w),!1}},[n]),f=x.useCallback(async(v,w)=>{if(!n)return!1;try{return(await n.fileChanged(v,w)).success}catch(_){return console.error("[useElectronLSP] File changed failed:",_),!1}},[n]),m=x.useCallback(async v=>{if(!n)return!1;try{return(await n.init(v)).success}catch(w){return console.error("[useElectronLSP] Init failed:",w),!1}},[n]),g=x.useCallback(async()=>{if(!n)return!1;try{return(await n.shutdown()).success}catch(v){return console.error("[useElectronLSP] Shutdown failed:",v),!1}},[n]),y=x.useCallback(v=>{if(!n)return()=>{};try{return n.onEvent(v)}catch(w){return console.error("[useElectronLSP] Event subscription failed:",w),()=>{}}},[n]);return{isAvailable:!!n,hover:o,completion:i,definition:a,references:l,getDiagnostics:c,fileSaved:u,fileChanged:f,init:m,shutdown:g,onEvent:y,debounce:s}}function bst(e){const t=gst(),[n,r]=x.useState({hoverTooltip:{isVisible:!1,data:null,position:null},autocomplete:{isVisible:!1,items:[],position:null,filterText:""}}),s=x.useRef(null),o=x.useRef(null),i=x.useRef(new Map),a=x.useRef(new Map),l=x.useCallback(async(_,S,k,R)=>{!e||!t.isAvailable||(s.current={x:_,y:S,line:k,character:R},o.current&&clearTimeout(o.current),o.current=setTimeout(async()=>{const O=`${e}:${k}:${R}`;if(i.current.has(O)){const P=i.current.get(O);r(j=>({...j,hoverTooltip:{isVisible:!0,data:P,position:{x:_,y:S}}}));return}const M=await t.hover(e,k,R);M&&(i.current.set(O,M),r(P=>({...P,hoverTooltip:{isVisible:!0,data:M,position:{x:_,y:S}}})))},200))},[e,t]),c=x.useCallback(()=>{o.current&&clearTimeout(o.current),r(_=>({..._,hoverTooltip:{isVisible:!1,data:null,position:null}}))},[]),u=x.useCallback(async(_,S,k,R,O="")=>{if(!e||!t.isAvailable)return;const M=`${e}:${k}:${R}`;if(a.current.has(M)){const j=a.current.get(M);r(q=>({...q,autocomplete:{isVisible:!0,items:j,position:{x:_,y:S},filterText:O}}));return}const P=await t.completion(e,k,R);P&&(a.current.set(M,P),r(j=>({...j,autocomplete:{isVisible:!0,items:P,position:{x:_,y:S},filterText:O}})))},[e,t]),f=x.useCallback(_=>{r(S=>({...S,autocomplete:{...S.autocomplete,filterText:_}}))},[]),m=x.useCallback(()=>{r(_=>({..._,autocomplete:{isVisible:!1,items:[],position:null,filterText:""}}))},[]),g=x.useCallback(async _=>{console.log("[LSP] Selected completion:",_.label,_.insertText||_.label),m()},[m]),y=x.useCallback(async(_,S)=>{if(!e||!t.isAvailable)return;const k=await t.definition(e,_,S);if(k){const R=Array.isArray(k)?k:k?[k]:[];if(R.length>0)return console.log("[LSP] Go to definition:",R[0]),R[0]}return null},[e,t]),v=x.useCallback(async(_,S)=>!e||!t.isAvailable?[]:await t.references(e,_,S),[e,t]),w=x.useCallback(()=>{i.current.clear(),a.current.clear()},[]);return x.useEffect(()=>()=>{o.current&&clearTimeout(o.current),w()},[w]),{uiState:n,showHover:l,hideHover:c,showAutocomplete:u,hideAutocomplete:m,updateAutocompleteFilter:f,selectCompletion:g,goToDefinition:y,findReferences:v,clearCache:w}}function yst(e){return typeof e=="string"?e:Array.isArray(e)?e.map(t=>typeof t=="string"?t:t.value).join(`

`):e&&typeof e=="object"&&"value"in e?e.value:""}function vst({content:e}){const t=e.split(/(`{1,3}[\s\S]*?`{1,3})/g);return h.jsx("div",{className:"space-y-2 text-sm",children:t.map((n,r)=>{var s;if(n.startsWith("`")&&n.endsWith("`")&&!n.includes(`
`))return h.jsx("code",{className:"inline-block bg-black/40 text-amber-200 px-1.5 py-0.5 rounded font-mono text-xs",children:n.slice(1,-1)},r);if(n.startsWith("```")&&n.endsWith("```")){const o=n.slice(3,-3).trim().split(`
`),a=((s=o[0])!=null&&s.match(/^(\w+)$/)?o[0]:null)?o.slice(1).join(`
`):n.slice(3,-3);return h.jsx("pre",{className:"bg-black/60 text-amber-100 p-2 rounded overflow-x-auto font-mono text-xs",children:h.jsx("code",{children:a})},r)}return h.jsx("p",{className:"text-gray-300",children:n},r)})})}const xst=({data:e,position:t,isVisible:n,onDismiss:r})=>{const s=x.useRef(null),[o,i]=x.useState(null);if(x.useEffect(()=>{if(!n||!t||!s.current)return;const l=8;let c=t.y+l,u=t.x;const f=s.current.getBoundingClientRect(),m=f.width,g=f.height,y=window.innerWidth,v=window.innerHeight;u+m>y-10&&(u=Math.max(10,y-m-10)),c+g>v-10&&(c=Math.max(10,t.y-g-l)),i({top:c,left:u})},[n,t]),!n||!e||!o)return null;const a=yst(e.contents);return h.jsxs("div",{ref:s,className:"fixed z-50 bg-gray-900 border border-gray-700 rounded-lg shadow-2xl max-w-sm",style:{top:`${o.top}px`,left:`${o.left}px`},onMouseLeave:r,children:[h.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-700/50",children:[h.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Type Information"}),h.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-300 transition-colors p-1","aria-label":"Close tooltip",children:h.jsx(qr,{size:14})})]}),h.jsx("div",{className:"p-3 max-h-64 overflow-y-auto custom-scrollbar",children:h.jsx(vst,{content:a})}),h.jsx("div",{className:"absolute bottom-full left-4 -mb-1 w-2 h-2 bg-gray-900 border-l border-t border-gray-700 transform rotate-45"})]})},yH={1:{label:"Text",color:"text-gray-400"},2:{label:"Method",color:"text-blue-400"},3:{label:"Function",color:"text-blue-400"},4:{label:"Constructor",color:"text-green-400"},5:{label:"Field",color:"text-amber-400"},6:{label:"Variable",color:"text-amber-400"},7:{label:"Class",color:"text-green-400"},8:{label:"Interface",color:"text-green-400"},9:{label:"Module",color:"text-purple-400"},10:{label:"Property",color:"text-amber-400"},11:{label:"Unit",color:"text-gray-400"},12:{label:"Value",color:"text-gray-400"},13:{label:"Enum",color:"text-green-400"},14:{label:"Keyword",color:"text-red-400"},15:{label:"Snippet",color:"text-pink-400"},16:{label:"Color",color:"text-cyan-400"},17:{label:"Reference",color:"text-gray-400"},18:{label:"Folder",color:"text-blue-300"},19:{label:"EnumMember",color:"text-green-400"},20:{label:"Constant",color:"text-red-400"},21:{label:"Struct",color:"text-green-400"},22:{label:"Event",color:"text-pink-400"},23:{label:"Operator",color:"text-red-400"},24:{label:"TypeParameter",color:"text-cyan-400"}};function wst(e){return!e||!yH[e]?{label:"Unknown",color:"text-gray-400"}:yH[e]}function Est(e,t){if(!t)return e;const n=t.toLowerCase();return e.filter(r=>(r.filterText||r.label).toLowerCase().includes(n))}function _st({text:e,match:t}){if(!t)return h.jsx(h.Fragment,{children:e});const n=t.toLowerCase(),s=e.toLowerCase().indexOf(n);return s===-1?h.jsx(h.Fragment,{children:e}):h.jsxs(h.Fragment,{children:[e.slice(0,s),h.jsx("span",{className:"bg-amber-500/30 text-amber-200 font-semibold",children:e.slice(s,s+t.length)}),e.slice(s+t.length)]})}const Sst=({items:e,position:t,isVisible:n,filterText:r="",onSelect:s,onDismiss:o})=>{const i=x.useRef(null),a=x.useRef(null),[l,c]=x.useState(null),[u,f]=x.useState(0),m=x.useMemo(()=>Est(e,r),[e,r]);x.useEffect(()=>{f(0)},[r]),x.useEffect(()=>{if(!n||!t||!i.current)return;const y=4;let v=t.y+y,w=t.x;const _=i.current.getBoundingClientRect(),S=_.width,k=_.height,R=window.innerWidth,O=window.innerHeight;w+S>R-10&&(w=Math.max(10,R-S-10)),v+k>O-10&&(v=Math.max(10,t.y-k-y)),c({top:v,left:w})},[n,t]),x.useEffect(()=>{if(!a.current)return;const v=a.current.querySelectorAll("[data-index]")[u];v&&v.scrollIntoView({block:"nearest"})},[u]);const g=x.useCallback(y=>{switch(y.key){case"ArrowDown":y.preventDefault(),f(v=>v<m.length-1?v+1:v);break;case"ArrowUp":y.preventDefault(),f(v=>v>0?v-1:v);break;case"Enter":y.preventDefault(),m[u]&&(s(m[u]),o());break;case"Escape":y.preventDefault(),o();break}},[m,u,s,o]);return!n||!l||m.length===0?null:h.jsxs("div",{ref:i,className:"fixed z-50 bg-gray-900 border border-gray-700 rounded-lg shadow-2xl max-w-sm min-w-80",style:{top:`${l.top}px`,left:`${l.left}px`},onKeyDown:g,tabIndex:-1,children:[h.jsx("div",{className:"px-3 py-2 border-b border-gray-700/50",children:h.jsxs("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:["Suggestions (",m.length,")"]})}),h.jsx("div",{ref:a,className:"max-h-64 overflow-y-auto custom-scrollbar",role:"listbox",children:m.map((y,v)=>{const w=wst(y.kind),_=v===u;return h.jsxs("button",{"data-index":v,onClick:()=>{s(y),o()},onMouseEnter:()=>f(v),className:`w-full text-left px-3 py-2 transition-colors flex items-center gap-2 ${_?"bg-amber-600/40 border-l-2 border-amber-500":"hover:bg-gray-800/50 border-l-2 border-transparent"}`,role:"option","aria-selected":_,children:[h.jsx("span",{className:`flex-shrink-0 text-sm ${w.color}`,children:h.jsx(Yl,{size:14})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"text-sm font-medium text-gray-100 truncate",children:h.jsx(_st,{text:y.label,match:r})}),y.detail&&h.jsx("div",{className:"text-xs text-gray-500 truncate",children:y.detail})]}),_&&h.jsx(Nf,{size:16,className:"flex-shrink-0 text-amber-500"})]},`${y.label}-${v}`)})}),h.jsx("div",{className:"px-3 py-2 border-t border-gray-700/50 bg-gray-900/50",children:h.jsx("div",{className:"text-xs text-gray-500 text-center",children:h.jsx("span",{children:" Navigate  Enter Select  Esc Close"})})})]})};var FA={};function Tst(e,t,n){return{id:`${n}_${e}`,name:e,transport:{type:"stdio",command:t.command,args:t.args||[],env:t.env||{},cwd:t.cwd},enabled:!0,autoConnect:!0}}async function fie(e,t){var n;if(!((n=window.electronAPI)!=null&&n.files))return[];try{if(!await window.electronAPI.files.exists(e))return[];const s=await window.electronAPI.files.readFile(e);if(!s||typeof s!="string")return[];const o=JSON.parse(s),i=[];if(o.mcpServers)for(const[a,l]of Object.entries(o.mcpServers))i.push({source:t,config:Tst(a,l,t)});return i}catch(r){return console.warn(`[mcpDiscovery] Failed to read ${e}:`,r),[]}}async function Cst(e){const t=`${e}/.mcp.json`;return fie(t,"project")}async function kst(){var n,r;let e="";if(typeof process<"u"&&FA&&(e=FA.HOME||FA.USERPROFILE||""),!e)try{if((r=(n=window.electronAPI)==null?void 0:n.files)!=null&&r.getCwd){const s=await window.electronAPI.files.getCwd(),o=s==null?void 0:s.match(/^(\/Users\/[^/]+|\/home\/[^/]+|C:\\Users\\[^\\]+)/);o&&(e=o[1])}}catch{return[]}if(!e)return[];const t=`${e}/.claude/mcp.json`;return fie(t,"global")}async function Ast(e){const t=[],n=await kst();if(t.push(...n),e){const r=await Cst(e);t.push(...r)}return t}function Nst(e,t){const n=new Map;for(const r of t)n.set(r.config.name,r.config);for(const r of e)n.set(r.name,r);return Array.from(n.values())}function vH(){var e,t,n,r;return!!((t=(e=window.electronAPI)==null?void 0:e.files)!=null&&t.exists&&((r=(n=window.electronAPI)==null?void 0:n.files)!=null&&r.readFile))}const h_=e=>({config:e,status:"disconnected",tools:[],resources:[],prompts:[]});function Ist(e={}){const{initialServers:t=[],autoConnect:n=!1,autoDiscover:r=!1,projectPath:s,onEvent:o,onError:i,onServersDiscovered:a}=e,[l,c]=x.useState(()=>{const F={};for(const W of t)F[W.id]=h_(W);return F}),u=x.useRef(!1),[f,m]=x.useState(!1),g=x.useRef(null);x.useEffect(()=>{var F;m(!!((F=window.electronAPI)!=null&&F.mcp))},[]),x.useEffect(()=>{var W;if(!((W=window.electronAPI)!=null&&W.mcp))return;const F=window.electronAPI.mcp.onEvent(X=>{c(J=>{const ee=J[X.serverId];if(!ee)return J;switch(X.type){case"connecting":return{...J,[X.serverId]:{...ee,status:"connecting"}};case"connected":return{...J,[X.serverId]:{...ee,status:"connected",error:void 0,lastConnected:X.timestamp}};case"disconnected":return{...J,[X.serverId]:{...ee,status:"disconnected",tools:[],resources:[],prompts:[]}};case"error":return{...J,[X.serverId]:{...ee,status:"error",error:String(X.data)}};case"tools-changed":return{...J,[X.serverId]:{...ee,tools:X.data}};case"resources-changed":return{...J,[X.serverId]:{...ee,resources:X.data}};case"prompts-changed":return{...J,[X.serverId]:{...ee,prompts:X.data}};default:return J}}),o==null||o(X)});return g.current=F,()=>{F(),g.current=null}},[o]),x.useEffect(()=>{if(!(!n||!f))for(const F of t)F.enabled&&w(F).catch(W=>{i==null||i(W instanceof Error?W:new Error(String(W)),F.id)})},[f]);const y=x.useCallback(async()=>{if(!(!r||!vH()))try{const F=await Ast(s);if(F.length>0){a==null||a(F);const W=Nst(t,F);if(c(X=>{const J={...X};for(const ee of W)J[ee.id]||(J[ee.id]=h_(ee));return J}),n)for(const X of W)X.autoConnect&&X.enabled&&w(X).catch(ee=>{i==null||i(ee instanceof Error?ee:new Error(String(ee)),X.id)})}}catch(F){console.warn("[useMCP] Auto-discovery failed:",F)}},[r,s,t,n,a,i]);x.useEffect(()=>{!r||!f||u.current||(u.current=!0,y())},[r,f,s,y]);const v=x.useCallback(async()=>{u.current=!1,await y()},[y]),w=x.useCallback(async F=>{var W;if(!((W=window.electronAPI)!=null&&W.mcp))return i==null||i(new Error("MCP is only available in Electron environment"),F.id),!1;c(X=>({...X,[F.id]:{...X[F.id]||h_(F),config:F,status:"connecting",error:void 0}}));try{const X=await window.electronAPI.mcp.connect(F);if(!X.success)return c(ie=>({...ie,[F.id]:{...ie[F.id],status:"error",error:X.error||"Connection failed"}})),i==null||i(new Error(X.error||"Connection failed"),F.id),!1;const J=await window.electronAPI.mcp.listTools(F.id),ee=await window.electronAPI.mcp.listResources(F.id),re=await window.electronAPI.mcp.listPrompts(F.id);return c(ie=>({...ie,[F.id]:{...ie[F.id],status:"connected",capabilities:X.capabilities,tools:J.tools||[],resources:ee.resources||[],prompts:re.prompts||[],lastConnected:Date.now()}})),!0}catch(X){const J=X instanceof Error?X:new Error(String(X));return c(ee=>({...ee,[F.id]:{...ee[F.id],status:"error",error:J.message}})),i==null||i(J,F.id),!1}},[i]),_=x.useCallback(async F=>{var W;if((W=window.electronAPI)!=null&&W.mcp)try{await window.electronAPI.mcp.disconnect(F),c(X=>({...X,[F]:{...X[F],status:"disconnected",tools:[],resources:[],prompts:[]}}))}catch(X){const J=X instanceof Error?X:new Error(String(X));i==null||i(J,F)}},[i]),S=x.useCallback(F=>{c(W=>({...W,[F.id]:h_(F)}))},[]),k=x.useCallback(async F=>{const W=l[F];((W==null?void 0:W.status)==="connected"||(W==null?void 0:W.status)==="connecting")&&await _(F),c(X=>{const{[F]:J,...ee}=X;return ee})},[l,_]),R=x.useCallback((F,W)=>{c(X=>{const J=X[F];return J?{...X,[F]:{...J,config:{...J.config,...W}}}:X})},[]),O=x.useCallback(async(F,W,X)=>{var ee;if(!((ee=window.electronAPI)!=null&&ee.mcp))return{success:!1,error:"MCP is only available in Electron environment"};const J=l[F];if(!J||J.status!=="connected")return{success:!1,error:"Server not connected"};try{return await window.electronAPI.mcp.callTool({serverId:F,toolName:W,arguments:X})}catch(re){const ie=re instanceof Error?re:new Error(String(re));return i==null||i(ie,F),{success:!1,error:ie.message}}},[l,i]),M=x.useCallback(async F=>{var X;if(!((X=window.electronAPI)!=null&&X.mcp))return[];const W=l[F];if(!W||W.status!=="connected")return[];try{const ee=(await window.electronAPI.mcp.listTools(F)).tools||[];return c(re=>({...re,[F]:{...re[F],tools:ee}})),ee}catch(J){const ee=J instanceof Error?J:new Error(String(J));return i==null||i(ee,F),[]}},[l,i]),P=x.useCallback(async(F,W=10)=>{var X,J;if(!((J=(X=window.electronAPI)==null?void 0:X.mcp)!=null&&J.scoreToolRelevance))return console.warn("[useMCP] Smart MCP features not available"),[];try{const ee=Object.entries(l).flatMap(([Z,te])=>te.status==="connected"?te.tools.map(oe=>({...oe,serverId:Z})):[]),re=ee.filter(Z=>{var te;return Z.serverId===((te=ee[0])==null?void 0:te.serverId)});return(await window.electronAPI.mcp.scoreToolRelevance(re,F)).sort((Z,te)=>te.relevanceScore-Z.relevanceScore).slice(0,W)}catch(ee){return console.error("[useMCP] Failed to get relevant tools:",ee),[]}},[l]),j=x.useCallback(async(F,W,X,J)=>{var ee,re;if((re=(ee=window.electronAPI)==null?void 0:ee.mcp)!=null&&re.trackToolUsage)try{await window.electronAPI.mcp.trackToolUsage(F,W,X,J)}catch(ie){console.error("[useMCP] Failed to track tool usage:",ie)}},[]),q=x.useCallback(async(F,W)=>{var X,J;if(!((J=(X=window.electronAPI)==null?void 0:X.mcp)!=null&&J.getToolUsageStats))return null;try{return await window.electronAPI.mcp.getToolUsageStats(F,W)}catch(ee){return console.error("[useMCP] Failed to get tool usage stats:",ee),null}},[]),U=x.useCallback(async F=>{var W,X;if(!((X=(W=window.electronAPI)==null?void 0:W.mcp)!=null&&X.getIndexHealth))return{ready:!1,indexing:!1,totalChunks:0,totalFiles:0,healthPercentage:0};try{return await window.electronAPI.mcp.getIndexHealth(F)}catch(J){return console.error("[useMCP] Failed to get index health:",J),{ready:!1,indexing:!1,totalChunks:0,totalFiles:0,healthPercentage:0}}},[]),z=Object.entries(l).flatMap(([F,W])=>W.status==="connected"?W.tools.map(X=>({...X,serverId:F})):[]),H=Object.values(l).some(F=>F.status==="connecting");return{servers:l,allTools:z,connect:w,disconnect:_,addServer:S,removeServer:k,updateServer:R,callTool:O,refreshTools:M,rediscover:v,getRelevantTools:P,trackToolUsage:j,getToolUsageStats:q,getIndexHealth:U,isConnecting:H,isAvailable:f,isDiscoveryAvailable:vH()}}function Rst(e={}){const{onSelectionResult:t,onTextChunk:n,onReady:r,onError:s,autoInit:o=!1,cwd:i}=e,[a,l]=x.useState(!1),[c,u]=x.useState(!1),[f,m]=x.useState(!1),[g,y]=x.useState(!1),[v,w]=x.useState(null),[_,S]=x.useState(null),[k,R]=x.useState(null),O=x.useRef({onSelectionResult:t,onTextChunk:n,onReady:r,onError:s});O.current={onSelectionResult:t,onTextChunk:n,onReady:r,onError:s};const M=x.useRef(!1);x.useEffect(()=>{var Z,te;const W=!!((Z=window.electronAPI)!=null&&Z.selectorAgent);if(l(W),!W||!((te=window.electronAPI)!=null&&te.selectorAgent))return;const X=window.electronAPI.selectorAgent,J=X.onTextChunk(oe=>{var Q,Te;(Te=(Q=O.current).onTextChunk)==null||Te.call(Q,oe)}),ee=X.onSelectionResult(oe=>{var Q,Te;m(!1),S(oe),(Te=(Q=O.current).onSelectionResult)==null||Te.call(Q,oe)}),re=X.onReady(()=>{var oe,Q;M.current=!1,u(!0),w(null),(Q=(oe=O.current).onReady)==null||Q.call(oe)}),ie=X.onError(oe=>{var Q,Te;M.current=!1,m(!1),w(oe),(Te=(Q=O.current).onError)==null||Te.call(Q,oe)});return X.isActive().then(oe=>{u(oe.active),oe.active&&X.getContextState().then(R)}),()=>{J(),ee(),re(),ie()}},[]),x.useEffect(()=>{o&&a&&!c&&P({cwd:i})},[o,a,c,i]);const P=x.useCallback(async W=>{var X;if(!((X=window.electronAPI)!=null&&X.selectorAgent))return w("Selector agent is only available in the desktop app"),!1;if(M.current||c)return!0;M.current=!0,w(null);try{const J=await window.electronAPI.selectorAgent.init({cwd:(W==null?void 0:W.cwd)||i});return J.success?!0:(w(J.error||"Failed to initialize selector agent"),M.current=!1,!1)}catch(J){const ee=J instanceof Error?J.message:"Unknown error";return w(ee),M.current=!1,!1}},[i,c]),j=x.useCallback(async W=>{var X;if(!((X=window.electronAPI)!=null&&X.selectorAgent))return w("Selector agent is only available in the desktop app"),!1;w(null);try{const J=await window.electronAPI.selectorAgent.prime(W);if(!J.success)return w(J.error||"Failed to prime context"),!1;y(!0);const ee=await window.electronAPI.selectorAgent.getContextState();return R(ee),!0}catch(J){const ee=J instanceof Error?J.message:"Unknown error";return w(ee),!1}},[]),q=x.useCallback(async(W,X)=>{var J;if(!((J=window.electronAPI)!=null&&J.selectorAgent))return w("Selector agent is only available in the desktop app"),!1;w(null),m(!0);try{const ee=await window.electronAPI.selectorAgent.select(W,X);return ee.success?!0:(m(!1),w(ee.error||"Failed to request selection"),!1)}catch(ee){m(!1);const re=ee instanceof Error?ee.message:"Unknown error";return w(re),!1}},[]),U=x.useCallback(async W=>{var X;if(!((X=window.electronAPI)!=null&&X.selectorAgent))return w("Selector agent is only available in the desktop app"),!1;w(null),m(!0);try{const J=await window.electronAPI.selectorAgent.send(W);return J.success?!0:(m(!1),w(J.error||"Failed to send message"),!1)}catch(J){m(!1);const ee=J instanceof Error?J.message:"Unknown error";return w(ee),!1}},[]),z=x.useCallback(async()=>{var W;if(!((W=window.electronAPI)!=null&&W.selectorAgent))return!1;try{const X=await window.electronAPI.selectorAgent.interrupt();return X.success&&m(!1),X.success}catch(X){return Kr.general.error("Failed to interrupt selector agent:",X),!1}},[]),H=x.useCallback(async()=>{var W;if(!((W=window.electronAPI)!=null&&W.selectorAgent))return!1;try{const X=await window.electronAPI.selectorAgent.reset();return X.success&&(u(!1),m(!1),y(!1),S(null),R(null),w(null)),X.success}catch(X){return Kr.general.error("Failed to reset selector agent:",X),!1}},[]),F=x.useCallback(async()=>{var W;if((W=window.electronAPI)!=null&&W.selectorAgent)try{const X=await window.electronAPI.selectorAgent.getContextState();R(X),y(X.isPrimed)}catch(X){Kr.general.error("Failed to refresh context state:",X)}},[]);return{isAvailable:a,isActive:c,isWaiting:f,isPrimed:g,error:v,latestResult:_,contextState:k,initialize:P,primeContext:j,selectElement:q,sendMessage:U,interrupt:z,reset:H,refreshContextState:F}}function Mst(){const[e,t]=x.useState(new Map),n=x.useRef({}),r=x.useCallback(l=>{const c={id:l.id,name:l.name,args:l.args,status:"running",startTime:Date.now()};t(f=>new Map(f).set(l.id,c));const u=setTimeout(()=>{t(f=>{const m=new Map(f),g=m.get(c.id);if(g&&g.status==="running"){const y=Date.now();g.status="error",g.error="Tool execution timeout (30s)",g.endTime=y,g.duration=y-g.startTime}return m}),delete n.current[l.id]},3e4);n.current[l.id]=u},[]),s=x.useCallback((l,c)=>{n.current[l]&&(clearTimeout(n.current[l]),delete n.current[l]),t(u=>{const f=new Map(u),m=f.get(l);if(m){const g=Date.now();m.status="success",m.result=c,m.endTime=g,m.duration=g-m.startTime}return f})},[]),o=x.useCallback((l,c)=>{n.current[l]&&(clearTimeout(n.current[l]),delete n.current[l]),t(u=>{const f=new Map(u),m=f.get(l);if(m){const g=Date.now();m.status="error",m.error=c,m.endTime=g,m.duration=g-m.startTime}return f})},[]),i=x.useCallback(()=>{Object.values(n.current).forEach(l=>clearTimeout(l)),n.current={},t(new Map)},[]);return{toolCalls:x.useCallback(()=>Array.from(e.values()),[e])(),trackStart:r,trackSuccess:s,trackError:o,clear:i,_internal:{toolCalls:e}}}const BA={"connect-button":{selector:'[data-control-id="connect-button"]',description:"Start voice streaming with AI",action:"click"},"disconnect-button":{selector:'[data-control-id="disconnect-button"]',description:"Stop voice streaming",action:"click"},"video-button":{selector:'[data-control-id="video-button"]',description:"Toggle video/camera feed",action:"click"},"screen-button":{selector:'[data-control-id="screen-button"]',description:"Toggle screen sharing",action:"click"},"inspector-button":{selector:'[data-control-id="inspector-button"]',description:"Toggle element inspector mode - select elements on page",action:"click"},"move-button":{selector:'[data-control-id="move-button"]',description:"Toggle move/resize mode for elements",action:"click"},"devtools-button":{selector:'[data-control-id="devtools-button"]',description:"Open browser DevTools for the webview",action:"click"},"agent-button":{selector:'[data-control-id="agent-button"]',description:"Toggle the Cluso Agent demo panel",action:"click"},"voice-button":{selector:'[data-control-id="voice-button"]',description:"Start/stop voice session with Gemini - small mic icon in chat area",action:"click"},"chat-input":{selector:'[data-control-id="chat-input"]',description:"Main chat input field - type messages here",action:"focus"},"send-button":{selector:'[data-control-id="send-button"]',description:"Send chat message to AI",action:"click"},"url-bar":{selector:'[data-control-id="url-bar"]',description:"URL input for navigation",action:"focus"},"go-button":{selector:'[data-action="navigate"]',description:"Navigate to URL",action:"click"},"approve-button":{selector:'[data-action="approve"]',description:"Approve pending change",action:"click"},"reject-button":{selector:'[data-action="reject"]',description:"Reject pending change",action:"click"}},hie=`
# Cluso - AI-Powered Development Assistant

## Core Capabilities

### Voice Control (Connect Button)
- Real-time voice interaction with AI
- Speak naturally to request UI changes
- AI responds with voice and actions
- Press connect button to start/stop

### Element Inspector (Inspector Button)
- Click inspector button to enter selection mode
- Hover over any element on the page
- Click to select an element
- Selected element info sent to AI for context
- AI can make changes to selected elements

### Screenshot Tool (Screenshot Button)
- Click screenshot button to enter capture mode
- Draw rectangle to capture area
- Screenshot sent to AI for analysis
- AI can describe or edit what it sees

### Live Preview (Browser Tab)
- View your app/website in real-time
- Enter URL in the URL bar
- Changes reflect instantly
- Inspector works on this view

### Code Editing
- AI can edit source files directly
- Changes go through approval workflow
- Approve or reject each change
- Undo capability available

### Model Selection
- Choose between different AI models
- Gemini models for voice/live
- Claude/GPT for text chat
- Each has different strengths

## Workflows

### Making a UI Change via Voice:
1. Click Connect to start voice
2. Click Inspector to select element
3. Click element you want to change
4. Speak your change request
5. AI makes instant preview
6. Approve or reject the change

### Making a UI Change via Chat:
1. Click Inspector to select element
2. Click element you want to change
3. Type your request in chat
4. AI makes instant preview
5. Approve or reject the change

### Demo Mode:
- AI can control the entire interface
- Highlight buttons before clicking
- Show tooltips explaining actions
- Perform guided walkthroughs
`;function Ost(){const[e,t]=x.useState({highlightedElements:[],activeTooltip:null,isDemoMode:!1,demoStep:0}),n=x.useRef(new Map),r=x.useRef(null),s=x.useCallback(v=>{const w=BA[v],_=(w==null?void 0:w.selector)||v;return document.querySelector(_)},[]),o=v=>({blue:"#3b82f6",green:"#22c55e",red:"#ef4444",orange:"#f97316",purple:"#a855f7",yellow:"#eab308",pink:"#ec4899",cyan:"#06b6d4"})[v.toLowerCase()]||(v.startsWith("#")?v:"#3b82f6"),i=x.useCallback((v,w={})=>{const{color:_="#3b82f6",duration:S=3e3,pulse:k=!0,label:R}=w,O=o(_),M=s(v);if(!M)return console.warn(`[AppControl] Element not found: ${v}`),!1;const P=M.style.outline,j=M.style.boxShadow,q=M.style.position,U=M.style.zIndex;M.style.outline=`3px solid ${O}`,M.style.boxShadow=k?`0 0 0 0 ${O}40, 0 0 20px ${O}60`:`0 0 20px ${O}60`,M.style.position="relative",M.style.zIndex="10000",k&&M.animate([{boxShadow:`0 0 0 0 ${O}40, 0 0 20px ${O}60`},{boxShadow:`0 0 0 15px ${O}00, 0 0 20px ${O}60`}],{duration:1e3,iterations:Math.ceil(S/1e3)});let z=null;R&&(z=document.createElement("div"),z.textContent=R,z.style.cssText=`
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translateX(-50%);
        background: ${O};
        color: white;
        padding: 4px 12px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 600;
        white-space: nowrap;
        z-index: 10001;
        pointer-events: none;
      `,M.appendChild(z)),t(W=>({...W,highlightedElements:[...W.highlightedElements,v]}));const H=n.current.get(v);H&&clearTimeout(H);const F=setTimeout(()=>{M.style.outline=P,M.style.boxShadow=j,M.style.position=q,M.style.zIndex=U,z&&z.remove(),t(W=>({...W,highlightedElements:W.highlightedElements.filter(X=>X!==v)})),n.current.delete(v)},S);return n.current.set(v,F),!0},[s]),a=x.useCallback((v,w)=>{const{message:_,position:S="top",duration:k=4e3}=w,R=s(v);if(!R)return console.warn(`[AppControl] Element not found for tooltip: ${v}`),!1;const O=document.getElementById("app-control-tooltip");O&&O.remove(),r.current&&clearTimeout(r.current);const M=document.createElement("div");M.id="app-control-tooltip",M.textContent=_;const P=R.getBoundingClientRect();let j=0,q=0;switch(S){case"top":j=P.top-40,q=P.left+P.width/2;break;case"bottom":j=P.bottom+10,q=P.left+P.width/2;break;case"left":j=P.top+P.height/2,q=P.left-10;break;case"right":j=P.top+P.height/2,q=P.right+10;break}return M.style.cssText=`
      position: fixed;
      top: ${j}px;
      left: ${q}px;
      transform: ${S==="top"||S==="bottom"?"translateX(-50%)":"translateY(-50%)"};
      background: #1f2937;
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 14px;
      max-width: 300px;
      z-index: 100002;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      animation: fadeIn 0.2s ease-out;
      pointer-events: none;
    `,document.body.appendChild(M),t(U=>({...U,activeTooltip:{element:v,message:_}})),r.current=setTimeout(()=>{M.remove(),t(U=>({...U,activeTooltip:null}))},k),!0},[s]),l=x.useCallback(v=>{const w=s(v);return w?(w.click(),!0):(console.warn(`[AppControl] Element not found for click: ${v}`),!1)},[s]),c=x.useCallback(v=>{const w=s(v);return w?(w.focus(),!0):(console.warn(`[AppControl] Element not found for focus: ${v}`),!1)},[s]),u=x.useCallback((v,w,_=50)=>{const S=s(v);return S?(S.focus(),new Promise(k=>{let R=0;const O=setInterval(()=>{R<w.length?(S.value+=w[R],S.dispatchEvent(new Event("input",{bubbles:!0})),R++):(clearInterval(O),k(!0))},_)})):(console.warn(`[AppControl] Element not found for typing: ${v}`),Promise.resolve(!1))},[s]),f=x.useCallback(v=>new Promise(w=>setTimeout(w,v)),[]),m=x.useCallback(async v=>{t(w=>({...w,isDemoMode:!0,demoStep:0}));for(let w=0;w<v.length;w++){const _=v[w];switch(t(S=>({...S,demoStep:w+1})),_.type){case"highlight":_.target&&i(_.target,_.options);break;case"tooltip":_.target&&a(_.target,{message:_.text||"",..._.options});break;case"click":_.target&&l(_.target);break;case"focus":_.target&&c(_.target);break;case"type":_.target&&_.text&&await u(_.target,_.text);break;case"wait":await f(_.duration||1e3);break;case"speak":if(_.text&&"speechSynthesis"in window){const S=new SpeechSynthesisUtterance(_.text);speechSynthesis.speak(S),await new Promise(k=>{S.onend=()=>k()})}break}_.type!=="wait"&&await f(300)}t(w=>({...w,isDemoMode:!1,demoStep:0}))},[i,a,l,c,u,f]),g=x.useCallback(()=>Object.entries(BA).map(([v,w])=>({name:v,...w,exists:!!s(v)})),[s]);return{state:e,highlightElement:i,showTooltip:a,clickElement:l,focusElement:c,typeText:u,wait:f,executeSequence:m,getAvailableElements:g,tools:{highlight_element:{name:"highlight_element",description:"Highlight a UI element in Cluso to draw attention to it",parameters:{type:"object",properties:{element:{type:"string",description:"Element name or selector to highlight"},color:{type:"string",description:"Highlight color (default: blue)"},duration:{type:"number",description:"Duration in ms (default: 3000)"},label:{type:"string",description:"Optional label to show above element"}},required:["element"]},execute:v=>i(v.element,{color:v.color,duration:v.duration,label:v.label,pulse:!0})},show_tooltip:{name:"show_tooltip",description:"Show a tooltip message near a UI element",parameters:{type:"object",properties:{element:{type:"string",description:"Element name or selector"},message:{type:"string",description:"Tooltip message to display"},position:{type:"string",enum:["top","bottom","left","right"]}},required:["element","message"]},execute:v=>a(v.element,{message:v.message,position:v.position})},click_ui_element:{name:"click_ui_element",description:"Click a button or interactive element in Cluso",parameters:{type:"object",properties:{element:{type:"string",description:"Element name or selector to click"}},required:["element"]},execute:v=>l(v.element)},type_in_field:{name:"type_in_field",description:"Type text into an input field with typewriter effect",parameters:{type:"object",properties:{element:{type:"string",description:"Input element name or selector"},text:{type:"string",description:"Text to type"}},required:["element","text"]},execute:async v=>await u(v.element,v.text)},speak:{name:"speak",description:"Speak a message using text-to-speech",parameters:{type:"object",properties:{message:{type:"string",description:"Message to speak"}},required:["message"]},execute:v=>{if("speechSynthesis"in window){const w=new SpeechSynthesisUtterance(v.message);return speechSynthesis.speak(w),!0}return!1}},get_ui_elements:{name:"get_ui_elements",description:"Get list of all controllable UI elements in Cluso",parameters:{type:"object",properties:{}},execute:()=>g()},run_demo_sequence:{name:"run_demo_sequence",description:"Run a sequence of UI actions for a demo",parameters:{type:"object",properties:{actions:{type:"array",items:{type:"object",properties:{type:{type:"string",enum:["highlight","tooltip","click","focus","type","wait","speak"]},target:{type:"string"},text:{type:"string"},duration:{type:"number"}}}}},required:["actions"]},execute:async v=>(await m(v.actions),!0)}},knowledge:hie,elementRegistry:BA}}const Dst="http://127.0.0.1:1234/v1/chat/completions",xH=["qwen2.5-0.5b-instruct-mlx","qwen2.5-0.5b-instruct-mlx:2","qwen2.5-0.5b-instruct-mlx:3","qwen2.5-0.5b-instruct-mlx:4"];let zA=0;function Pst(){const e=xH[zA];return zA=(zA+1)%xH.length,e}const Lst=[{type:"function",function:{name:"highlight_element",description:"Highlight a UI element to draw user attention. Use for guiding users or demos.",parameters:{type:"object",properties:{element:{type:"string",description:"Element ID: connect-button, video-button, screen-button, inspector-button, move-button, devtools-button, chat-input, send-button, url-bar, disconnect-button"},color:{type:"string",description:"Highlight color (default: blue). Options: blue, green, red, orange, purple"},label:{type:"string",description:"Optional label to show above the element"},duration:{type:"number",description:"Duration in ms (default: 3000)"}},required:["element"]}}},{type:"function",function:{name:"click_element",description:"Click a UI element button",parameters:{type:"object",properties:{element:{type:"string",description:"Element ID to click"}},required:["element"]}}},{type:"function",function:{name:"show_tooltip",description:"Show an informational tooltip near a UI element",parameters:{type:"object",properties:{element:{type:"string",description:"Element ID"},message:{type:"string",description:"Tooltip message"},position:{type:"string",enum:["top","bottom","left","right"],description:"Tooltip position"}},required:["element","message"]}}},{type:"function",function:{name:"type_text",description:"Type text into an input field with typewriter effect",parameters:{type:"object",properties:{element:{type:"string",description:"Input element ID (chat-input or url-bar)"},text:{type:"string",description:"Text to type"}},required:["element","text"]}}},{type:"function",function:{name:"speak",description:"Speak a message using text-to-speech for narration",parameters:{type:"object",properties:{message:{type:"string",description:"Message to speak aloud"}},required:["message"]}}},{type:"function",function:{name:"wait",description:"Pause for a duration before next action",parameters:{type:"object",properties:{duration:{type:"number",description:"Duration in milliseconds"}},required:["duration"]}}}],wH=`You are Cluso Agent - an AI assistant that controls the Cluso application UI.

${hie}

## Available UI Elements
You can interact with these elements using their IDs:
- connect-button: Start voice streaming with AI
- disconnect-button: Stop voice streaming
- video-button: Toggle camera feed
- screen-button: Toggle screen sharing
- inspector-button: Toggle element inspector mode
- move-button: Toggle move/resize mode
- devtools-button: Open browser DevTools
- chat-input: Main chat text input
- send-button: Send chat message
- url-bar: URL navigation input

## Your Role
1. Guide users through features when asked
2. Demonstrate capabilities with highlight + tooltip + speak
3. Execute demo sequences for presentations
4. Answer questions about how to use features
5. Control the UI to help users accomplish tasks

## Important Rules
- ALWAYS use tools to interact with UI - don't just describe
- Highlight before clicking to show users what will happen
- Use speak() to narrate what you're doing
- Use wait() between actions so users can follow
- Be concise and helpful

When showing how to do something:
1. speak() what you're about to demonstrate
2. highlight_element() the relevant button with a label
3. wait() a moment
4. click_element() if appropriate
5. Repeat for multi-step workflows`;class $st{constructor(t){this.messages=[],this.isProcessing=!1,this.callbacks=t,this.messages=[{role:"system",content:wH}]}async chat(t){if(this.isProcessing)return"Already processing a request...";this.isProcessing=!0,this.messages.push({role:"user",content:t});try{let n=await this.callModel(),r=0;const s=10;for(;n.tool_calls&&n.tool_calls.length>0&&r<s;){r++;const o=await Promise.all(n.tool_calls.map(async i=>{const a=JSON.parse(i.function.arguments),l=await this.executeTool(i.function.name,a);return{toolCall:i,result:l}}));for(const{toolCall:i,result:a}of o)this.messages.push({role:"tool",content:JSON.stringify(a),tool_call_id:i.id});n=await this.callModel()}return n.content&&this.messages.push({role:"assistant",content:n.content}),n.content||"Done!"}catch(n){return console.error("[ClusoAgent] Error:",n),`Error: ${n instanceof Error?n.message:"Unknown error"}`}finally{this.isProcessing=!1}}async callModel(){var s,o;const t=await fetch(Dst,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Pst(),messages:this.messages,tools:Lst,temperature:.3,max_tokens:500})});if(!t.ok)throw new Error(`Model API error: ${t.status}`);const r=(s=(await t.json()).choices[0])==null?void 0:s.message;if(!r)throw new Error("No message in response");return(o=r.tool_calls)!=null&&o.length&&this.messages.push({role:"assistant",content:r.content||"",tool_calls:r.tool_calls}),{content:r.content||"",tool_calls:r.tool_calls}}async executeTool(t,n){console.log(`[ClusoAgent] Executing tool: ${t}`,n);try{switch(t){case"highlight_element":return this.callbacks.onHighlight(n.element,{color:n.color,label:n.label,duration:n.duration}),{success:!0,message:`Highlighted ${n.element}`};case"click_element":return this.callbacks.onClick(n.element),{success:!0,message:`Clicked ${n.element}`};case"show_tooltip":return this.callbacks.onTooltip(n.element,n.message,n.position),{success:!0,message:`Showed tooltip on ${n.element}`};case"type_text":return await this.callbacks.onType(n.element,n.text),{success:!0,message:`Typed in ${n.element}`};case"speak":return this.callbacks.onSpeak(n.message),{success:!0,message:"Speaking"};case"wait":return await this.callbacks.onWait(n.duration),{success:!0,message:`Waited ${n.duration}ms`};default:return{success:!1,message:`Unknown tool: ${t}`}}}catch(r){return{success:!1,message:r instanceof Error?r.message:"Tool execution failed"}}}reset(){this.messages=[{role:"system",content:wH}]}}let EH=null;function Fst(e){return EH=new $st(e),EH}var jA={},iv={},_H;function Bst(){if(_H)return iv;_H=1,iv.byteLength=a,iv.toByteArray=c,iv.fromByteArray=m;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=r.length;s<o;++s)e[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function i(g){var y=g.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=y);var w=v===y?0:4-v%4;return[v,w]}function a(g){var y=i(g),v=y[0],w=y[1];return(v+w)*3/4-w}function l(g,y,v){return(y+v)*3/4-v}function c(g){var y,v=i(g),w=v[0],_=v[1],S=new n(l(g,w,_)),k=0,R=_>0?w-4:w,O;for(O=0;O<R;O+=4)y=t[g.charCodeAt(O)]<<18|t[g.charCodeAt(O+1)]<<12|t[g.charCodeAt(O+2)]<<6|t[g.charCodeAt(O+3)],S[k++]=y>>16&255,S[k++]=y>>8&255,S[k++]=y&255;return _===2&&(y=t[g.charCodeAt(O)]<<2|t[g.charCodeAt(O+1)]>>4,S[k++]=y&255),_===1&&(y=t[g.charCodeAt(O)]<<10|t[g.charCodeAt(O+1)]<<4|t[g.charCodeAt(O+2)]>>2,S[k++]=y>>8&255,S[k++]=y&255),S}function u(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}function f(g,y,v){for(var w,_=[],S=y;S<v;S+=3)w=(g[S]<<16&16711680)+(g[S+1]<<8&65280)+(g[S+2]&255),_.push(u(w));return _.join("")}function m(g){for(var y,v=g.length,w=v%3,_=[],S=16383,k=0,R=v-w;k<R;k+=S)_.push(f(g,k,k+S>R?R:k+S));return w===1?(y=g[v-1],_.push(e[y>>2]+e[y<<4&63]+"==")):w===2&&(y=(g[v-2]<<8)+g[v-1],_.push(e[y>>10]+e[y>>4&63]+e[y<<2&63]+"=")),_.join("")}return iv}var p_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var SH;function zst(){return SH||(SH=1,p_.read=function(e,t,n,r,s){var o,i,a=s*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,f=n?s-1:0,m=n?-1:1,g=e[t+f];for(f+=m,o=g&(1<<-u)-1,g>>=-u,u+=a;u>0;o=o*256+e[t+f],f+=m,u-=8);for(i=o&(1<<-u)-1,o>>=-u,u+=r;u>0;i=i*256+e[t+f],f+=m,u-=8);if(o===0)o=1-c;else{if(o===l)return i?NaN:(g?-1:1)*(1/0);i=i+Math.pow(2,r),o=o-c}return(g?-1:1)*i*Math.pow(2,o-r)},p_.write=function(e,t,n,r,s,o){var i,a,l,c=o*8-s-1,u=(1<<c)-1,f=u>>1,m=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:o-1,y=r?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+f>=1?t+=m/l:t+=m*Math.pow(2,1-f),t*l>=2&&(i++,l/=2),i+f>=u?(a=0,i=u):i+f>=1?(a=(t*l-1)*Math.pow(2,s),i=i+f):(a=t*Math.pow(2,f-1)*Math.pow(2,s),i=0));s>=8;e[n+g]=a&255,g+=y,a/=256,s-=8);for(i=i<<s|a,c+=s;c>0;e[n+g]=i&255,g+=y,i/=256,c-=8);e[n+g-y]|=v*128}),p_}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var TH;function jst(){return TH||(TH=1,(function(e){const t=Bst(),n=zst(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=S,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const Y=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(Y,L),Y.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function i(Y){if(Y>s)throw new RangeError('The value "'+Y+'" is invalid for option "size"');const L=new Uint8Array(Y);return Object.setPrototypeOf(L,a.prototype),L}function a(Y,L,B){if(typeof Y=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(Y)}return l(Y,L,B)}a.poolSize=8192;function l(Y,L,B){if(typeof Y=="string")return m(Y,L);if(ArrayBuffer.isView(Y))return y(Y);if(Y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y);if($e(Y,ArrayBuffer)||Y&&$e(Y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($e(Y,SharedArrayBuffer)||Y&&$e(Y.buffer,SharedArrayBuffer)))return v(Y,L,B);if(typeof Y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ce=Y.valueOf&&Y.valueOf();if(ce!=null&&ce!==Y)return a.from(ce,L,B);const we=w(Y);if(we)return we;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Y[Symbol.toPrimitive]=="function")return a.from(Y[Symbol.toPrimitive]("string"),L,B);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y)}a.from=function(Y,L,B){return l(Y,L,B)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(Y){if(typeof Y!="number")throw new TypeError('"size" argument must be of type number');if(Y<0)throw new RangeError('The value "'+Y+'" is invalid for option "size"')}function u(Y,L,B){return c(Y),Y<=0?i(Y):L!==void 0?typeof B=="string"?i(Y).fill(L,B):i(Y).fill(L):i(Y)}a.alloc=function(Y,L,B){return u(Y,L,B)};function f(Y){return c(Y),i(Y<0?0:_(Y)|0)}a.allocUnsafe=function(Y){return f(Y)},a.allocUnsafeSlow=function(Y){return f(Y)};function m(Y,L){if((typeof L!="string"||L==="")&&(L="utf8"),!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const B=k(Y,L)|0;let ce=i(B);const we=ce.write(Y,L);return we!==B&&(ce=ce.slice(0,we)),ce}function g(Y){const L=Y.length<0?0:_(Y.length)|0,B=i(L);for(let ce=0;ce<L;ce+=1)B[ce]=Y[ce]&255;return B}function y(Y){if($e(Y,Uint8Array)){const L=new Uint8Array(Y);return v(L.buffer,L.byteOffset,L.byteLength)}return g(Y)}function v(Y,L,B){if(L<0||Y.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<L+(B||0))throw new RangeError('"length" is outside of buffer bounds');let ce;return L===void 0&&B===void 0?ce=new Uint8Array(Y):B===void 0?ce=new Uint8Array(Y,L):ce=new Uint8Array(Y,L,B),Object.setPrototypeOf(ce,a.prototype),ce}function w(Y){if(a.isBuffer(Y)){const L=_(Y.length)|0,B=i(L);return B.length===0||Y.copy(B,0,0,L),B}if(Y.length!==void 0)return typeof Y.length!="number"||Je(Y.length)?i(0):g(Y);if(Y.type==="Buffer"&&Array.isArray(Y.data))return g(Y.data)}function _(Y){if(Y>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return Y|0}function S(Y){return+Y!=Y&&(Y=0),a.alloc(+Y)}a.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==a.prototype},a.compare=function(L,B){if($e(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),$e(B,Uint8Array)&&(B=a.from(B,B.offset,B.byteLength)),!a.isBuffer(L)||!a.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===B)return 0;let ce=L.length,we=B.length;for(let ze=0,Be=Math.min(ce,we);ze<Be;++ze)if(L[ze]!==B[ze]){ce=L[ze],we=B[ze];break}return ce<we?-1:we<ce?1:0},a.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(L,B){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return a.alloc(0);let ce;if(B===void 0)for(B=0,ce=0;ce<L.length;++ce)B+=L[ce].length;const we=a.allocUnsafe(B);let ze=0;for(ce=0;ce<L.length;++ce){let Be=L[ce];if($e(Be,Uint8Array))ze+Be.length>we.length?(a.isBuffer(Be)||(Be=a.from(Be)),Be.copy(we,ze)):Uint8Array.prototype.set.call(we,Be,ze);else if(a.isBuffer(Be))Be.copy(we,ze);else throw new TypeError('"list" argument must be an Array of Buffers');ze+=Be.length}return we};function k(Y,L){if(a.isBuffer(Y))return Y.length;if(ArrayBuffer.isView(Y)||$e(Y,ArrayBuffer))return Y.byteLength;if(typeof Y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Y);const B=Y.length,ce=arguments.length>2&&arguments[2]===!0;if(!ce&&B===0)return 0;let we=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":return Pt(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B*2;case"hex":return B>>>1;case"base64":return pe(Y).length;default:if(we)return ce?-1:Pt(Y).length;L=(""+L).toLowerCase(),we=!0}}a.byteLength=k;function R(Y,L,B){let ce=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((B===void 0||B>this.length)&&(B=this.length),B<=0)||(B>>>=0,L>>>=0,B<=L))return"";for(Y||(Y="utf8");;)switch(Y){case"hex":return ie(this,L,B);case"utf8":case"utf-8":return W(this,L,B);case"ascii":return ee(this,L,B);case"latin1":case"binary":return re(this,L,B);case"base64":return F(this,L,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,L,B);default:if(ce)throw new TypeError("Unknown encoding: "+Y);Y=(Y+"").toLowerCase(),ce=!0}}a.prototype._isBuffer=!0;function O(Y,L,B){const ce=Y[L];Y[L]=Y[B],Y[B]=ce}a.prototype.swap16=function(){const L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let B=0;B<L;B+=2)O(this,B,B+1);return this},a.prototype.swap32=function(){const L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let B=0;B<L;B+=4)O(this,B,B+3),O(this,B+1,B+2);return this},a.prototype.swap64=function(){const L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let B=0;B<L;B+=8)O(this,B,B+7),O(this,B+1,B+6),O(this,B+2,B+5),O(this,B+3,B+4);return this},a.prototype.toString=function(){const L=this.length;return L===0?"":arguments.length===0?W(this,0,L):R.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(L){if(!a.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:a.compare(this,L)===0},a.prototype.inspect=function(){let L="";const B=e.INSPECT_MAX_BYTES;return L=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(L+=" ... "),"<Buffer "+L+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(L,B,ce,we,ze){if($e(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),!a.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(B===void 0&&(B=0),ce===void 0&&(ce=L?L.length:0),we===void 0&&(we=0),ze===void 0&&(ze=this.length),B<0||ce>L.length||we<0||ze>this.length)throw new RangeError("out of range index");if(we>=ze&&B>=ce)return 0;if(we>=ze)return-1;if(B>=ce)return 1;if(B>>>=0,ce>>>=0,we>>>=0,ze>>>=0,this===L)return 0;let Be=ze-we,ut=ce-B;const ln=Math.min(Be,ut),jt=this.slice(we,ze),fn=L.slice(B,ce);for(let an=0;an<ln;++an)if(jt[an]!==fn[an]){Be=jt[an],ut=fn[an];break}return Be<ut?-1:ut<Be?1:0};function M(Y,L,B,ce,we){if(Y.length===0)return-1;if(typeof B=="string"?(ce=B,B=0):B>2147483647?B=2147483647:B<-2147483648&&(B=-2147483648),B=+B,Je(B)&&(B=we?0:Y.length-1),B<0&&(B=Y.length+B),B>=Y.length){if(we)return-1;B=Y.length-1}else if(B<0)if(we)B=0;else return-1;if(typeof L=="string"&&(L=a.from(L,ce)),a.isBuffer(L))return L.length===0?-1:P(Y,L,B,ce,we);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?we?Uint8Array.prototype.indexOf.call(Y,L,B):Uint8Array.prototype.lastIndexOf.call(Y,L,B):P(Y,[L],B,ce,we);throw new TypeError("val must be string, number or Buffer")}function P(Y,L,B,ce,we){let ze=1,Be=Y.length,ut=L.length;if(ce!==void 0&&(ce=String(ce).toLowerCase(),ce==="ucs2"||ce==="ucs-2"||ce==="utf16le"||ce==="utf-16le")){if(Y.length<2||L.length<2)return-1;ze=2,Be/=2,ut/=2,B/=2}function ln(fn,an){return ze===1?fn[an]:fn.readUInt16BE(an*ze)}let jt;if(we){let fn=-1;for(jt=B;jt<Be;jt++)if(ln(Y,jt)===ln(L,fn===-1?0:jt-fn)){if(fn===-1&&(fn=jt),jt-fn+1===ut)return fn*ze}else fn!==-1&&(jt-=jt-fn),fn=-1}else for(B+ut>Be&&(B=Be-ut),jt=B;jt>=0;jt--){let fn=!0;for(let an=0;an<ut;an++)if(ln(Y,jt+an)!==ln(L,an)){fn=!1;break}if(fn)return jt}return-1}a.prototype.includes=function(L,B,ce){return this.indexOf(L,B,ce)!==-1},a.prototype.indexOf=function(L,B,ce){return M(this,L,B,ce,!0)},a.prototype.lastIndexOf=function(L,B,ce){return M(this,L,B,ce,!1)};function j(Y,L,B,ce){B=Number(B)||0;const we=Y.length-B;ce?(ce=Number(ce),ce>we&&(ce=we)):ce=we;const ze=L.length;ce>ze/2&&(ce=ze/2);let Be;for(Be=0;Be<ce;++Be){const ut=parseInt(L.substr(Be*2,2),16);if(Je(ut))return Be;Y[B+Be]=ut}return Be}function q(Y,L,B,ce){return Ne(Pt(L,Y.length-B),Y,B,ce)}function U(Y,L,B,ce){return Ne(tn(L),Y,B,ce)}function z(Y,L,B,ce){return Ne(pe(L),Y,B,ce)}function H(Y,L,B,ce){return Ne(xt(L,Y.length-B),Y,B,ce)}a.prototype.write=function(L,B,ce,we){if(B===void 0)we="utf8",ce=this.length,B=0;else if(ce===void 0&&typeof B=="string")we=B,ce=this.length,B=0;else if(isFinite(B))B=B>>>0,isFinite(ce)?(ce=ce>>>0,we===void 0&&(we="utf8")):(we=ce,ce=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ze=this.length-B;if((ce===void 0||ce>ze)&&(ce=ze),L.length>0&&(ce<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");we||(we="utf8");let Be=!1;for(;;)switch(we){case"hex":return j(this,L,B,ce);case"utf8":case"utf-8":return q(this,L,B,ce);case"ascii":case"latin1":case"binary":return U(this,L,B,ce);case"base64":return z(this,L,B,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,L,B,ce);default:if(Be)throw new TypeError("Unknown encoding: "+we);we=(""+we).toLowerCase(),Be=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(Y,L,B){return L===0&&B===Y.length?t.fromByteArray(Y):t.fromByteArray(Y.slice(L,B))}function W(Y,L,B){B=Math.min(Y.length,B);const ce=[];let we=L;for(;we<B;){const ze=Y[we];let Be=null,ut=ze>239?4:ze>223?3:ze>191?2:1;if(we+ut<=B){let ln,jt,fn,an;switch(ut){case 1:ze<128&&(Be=ze);break;case 2:ln=Y[we+1],(ln&192)===128&&(an=(ze&31)<<6|ln&63,an>127&&(Be=an));break;case 3:ln=Y[we+1],jt=Y[we+2],(ln&192)===128&&(jt&192)===128&&(an=(ze&15)<<12|(ln&63)<<6|jt&63,an>2047&&(an<55296||an>57343)&&(Be=an));break;case 4:ln=Y[we+1],jt=Y[we+2],fn=Y[we+3],(ln&192)===128&&(jt&192)===128&&(fn&192)===128&&(an=(ze&15)<<18|(ln&63)<<12|(jt&63)<<6|fn&63,an>65535&&an<1114112&&(Be=an))}}Be===null?(Be=65533,ut=1):Be>65535&&(Be-=65536,ce.push(Be>>>10&1023|55296),Be=56320|Be&1023),ce.push(Be),we+=ut}return J(ce)}const X=4096;function J(Y){const L=Y.length;if(L<=X)return String.fromCharCode.apply(String,Y);let B="",ce=0;for(;ce<L;)B+=String.fromCharCode.apply(String,Y.slice(ce,ce+=X));return B}function ee(Y,L,B){let ce="";B=Math.min(Y.length,B);for(let we=L;we<B;++we)ce+=String.fromCharCode(Y[we]&127);return ce}function re(Y,L,B){let ce="";B=Math.min(Y.length,B);for(let we=L;we<B;++we)ce+=String.fromCharCode(Y[we]);return ce}function ie(Y,L,B){const ce=Y.length;(!L||L<0)&&(L=0),(!B||B<0||B>ce)&&(B=ce);let we="";for(let ze=L;ze<B;++ze)we+=Le[Y[ze]];return we}function Z(Y,L,B){const ce=Y.slice(L,B);let we="";for(let ze=0;ze<ce.length-1;ze+=2)we+=String.fromCharCode(ce[ze]+ce[ze+1]*256);return we}a.prototype.slice=function(L,B){const ce=this.length;L=~~L,B=B===void 0?ce:~~B,L<0?(L+=ce,L<0&&(L=0)):L>ce&&(L=ce),B<0?(B+=ce,B<0&&(B=0)):B>ce&&(B=ce),B<L&&(B=L);const we=this.subarray(L,B);return Object.setPrototypeOf(we,a.prototype),we};function te(Y,L,B){if(Y%1!==0||Y<0)throw new RangeError("offset is not uint");if(Y+L>B)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(L,B,ce){L=L>>>0,B=B>>>0,ce||te(L,B,this.length);let we=this[L],ze=1,Be=0;for(;++Be<B&&(ze*=256);)we+=this[L+Be]*ze;return we},a.prototype.readUintBE=a.prototype.readUIntBE=function(L,B,ce){L=L>>>0,B=B>>>0,ce||te(L,B,this.length);let we=this[L+--B],ze=1;for(;B>0&&(ze*=256);)we+=this[L+--B]*ze;return we},a.prototype.readUint8=a.prototype.readUInt8=function(L,B){return L=L>>>0,B||te(L,1,this.length),this[L]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(L,B){return L=L>>>0,B||te(L,2,this.length),this[L]|this[L+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(L,B){return L=L>>>0,B||te(L,2,this.length),this[L]<<8|this[L+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(L,B){return L=L>>>0,B||te(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(L,B){return L=L>>>0,B||te(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},a.prototype.readBigUInt64LE=Ve(function(L){L=L>>>0,nt(L,"offset");const B=this[L],ce=this[L+7];(B===void 0||ce===void 0)&&ot(L,this.length-8);const we=B+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,ze=this[++L]+this[++L]*2**8+this[++L]*2**16+ce*2**24;return BigInt(we)+(BigInt(ze)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ve(function(L){L=L>>>0,nt(L,"offset");const B=this[L],ce=this[L+7];(B===void 0||ce===void 0)&&ot(L,this.length-8);const we=B*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],ze=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+ce;return(BigInt(we)<<BigInt(32))+BigInt(ze)}),a.prototype.readIntLE=function(L,B,ce){L=L>>>0,B=B>>>0,ce||te(L,B,this.length);let we=this[L],ze=1,Be=0;for(;++Be<B&&(ze*=256);)we+=this[L+Be]*ze;return ze*=128,we>=ze&&(we-=Math.pow(2,8*B)),we},a.prototype.readIntBE=function(L,B,ce){L=L>>>0,B=B>>>0,ce||te(L,B,this.length);let we=B,ze=1,Be=this[L+--we];for(;we>0&&(ze*=256);)Be+=this[L+--we]*ze;return ze*=128,Be>=ze&&(Be-=Math.pow(2,8*B)),Be},a.prototype.readInt8=function(L,B){return L=L>>>0,B||te(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},a.prototype.readInt16LE=function(L,B){L=L>>>0,B||te(L,2,this.length);const ce=this[L]|this[L+1]<<8;return ce&32768?ce|4294901760:ce},a.prototype.readInt16BE=function(L,B){L=L>>>0,B||te(L,2,this.length);const ce=this[L+1]|this[L]<<8;return ce&32768?ce|4294901760:ce},a.prototype.readInt32LE=function(L,B){return L=L>>>0,B||te(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},a.prototype.readInt32BE=function(L,B){return L=L>>>0,B||te(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},a.prototype.readBigInt64LE=Ve(function(L){L=L>>>0,nt(L,"offset");const B=this[L],ce=this[L+7];(B===void 0||ce===void 0)&&ot(L,this.length-8);const we=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(ce<<24);return(BigInt(we)<<BigInt(32))+BigInt(B+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),a.prototype.readBigInt64BE=Ve(function(L){L=L>>>0,nt(L,"offset");const B=this[L],ce=this[L+7];(B===void 0||ce===void 0)&&ot(L,this.length-8);const we=(B<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(we)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+ce)}),a.prototype.readFloatLE=function(L,B){return L=L>>>0,B||te(L,4,this.length),n.read(this,L,!0,23,4)},a.prototype.readFloatBE=function(L,B){return L=L>>>0,B||te(L,4,this.length),n.read(this,L,!1,23,4)},a.prototype.readDoubleLE=function(L,B){return L=L>>>0,B||te(L,8,this.length),n.read(this,L,!0,52,8)},a.prototype.readDoubleBE=function(L,B){return L=L>>>0,B||te(L,8,this.length),n.read(this,L,!1,52,8)};function oe(Y,L,B,ce,we,ze){if(!a.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>we||L<ze)throw new RangeError('"value" argument is out of bounds');if(B+ce>Y.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(L,B,ce,we){if(L=+L,B=B>>>0,ce=ce>>>0,!we){const ut=Math.pow(2,8*ce)-1;oe(this,L,B,ce,ut,0)}let ze=1,Be=0;for(this[B]=L&255;++Be<ce&&(ze*=256);)this[B+Be]=L/ze&255;return B+ce},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(L,B,ce,we){if(L=+L,B=B>>>0,ce=ce>>>0,!we){const ut=Math.pow(2,8*ce)-1;oe(this,L,B,ce,ut,0)}let ze=ce-1,Be=1;for(this[B+ze]=L&255;--ze>=0&&(Be*=256);)this[B+ze]=L/Be&255;return B+ce},a.prototype.writeUint8=a.prototype.writeUInt8=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,1,255,0),this[B]=L&255,B+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,2,65535,0),this[B]=L&255,this[B+1]=L>>>8,B+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,2,65535,0),this[B]=L>>>8,this[B+1]=L&255,B+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,4,4294967295,0),this[B+3]=L>>>24,this[B+2]=L>>>16,this[B+1]=L>>>8,this[B]=L&255,B+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,4,4294967295,0),this[B]=L>>>24,this[B+1]=L>>>16,this[B+2]=L>>>8,this[B+3]=L&255,B+4};function Q(Y,L,B,ce,we){fe(L,ce,we,Y,B,7);let ze=Number(L&BigInt(4294967295));Y[B++]=ze,ze=ze>>8,Y[B++]=ze,ze=ze>>8,Y[B++]=ze,ze=ze>>8,Y[B++]=ze;let Be=Number(L>>BigInt(32)&BigInt(4294967295));return Y[B++]=Be,Be=Be>>8,Y[B++]=Be,Be=Be>>8,Y[B++]=Be,Be=Be>>8,Y[B++]=Be,B}function Te(Y,L,B,ce,we){fe(L,ce,we,Y,B,7);let ze=Number(L&BigInt(4294967295));Y[B+7]=ze,ze=ze>>8,Y[B+6]=ze,ze=ze>>8,Y[B+5]=ze,ze=ze>>8,Y[B+4]=ze;let Be=Number(L>>BigInt(32)&BigInt(4294967295));return Y[B+3]=Be,Be=Be>>8,Y[B+2]=Be,Be=Be>>8,Y[B+1]=Be,Be=Be>>8,Y[B]=Be,B+8}a.prototype.writeBigUInt64LE=Ve(function(L,B=0){return Q(this,L,B,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ve(function(L,B=0){return Te(this,L,B,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(L,B,ce,we){if(L=+L,B=B>>>0,!we){const ln=Math.pow(2,8*ce-1);oe(this,L,B,ce,ln-1,-ln)}let ze=0,Be=1,ut=0;for(this[B]=L&255;++ze<ce&&(Be*=256);)L<0&&ut===0&&this[B+ze-1]!==0&&(ut=1),this[B+ze]=(L/Be>>0)-ut&255;return B+ce},a.prototype.writeIntBE=function(L,B,ce,we){if(L=+L,B=B>>>0,!we){const ln=Math.pow(2,8*ce-1);oe(this,L,B,ce,ln-1,-ln)}let ze=ce-1,Be=1,ut=0;for(this[B+ze]=L&255;--ze>=0&&(Be*=256);)L<0&&ut===0&&this[B+ze+1]!==0&&(ut=1),this[B+ze]=(L/Be>>0)-ut&255;return B+ce},a.prototype.writeInt8=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,1,127,-128),L<0&&(L=255+L+1),this[B]=L&255,B+1},a.prototype.writeInt16LE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,2,32767,-32768),this[B]=L&255,this[B+1]=L>>>8,B+2},a.prototype.writeInt16BE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,2,32767,-32768),this[B]=L>>>8,this[B+1]=L&255,B+2},a.prototype.writeInt32LE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,4,2147483647,-2147483648),this[B]=L&255,this[B+1]=L>>>8,this[B+2]=L>>>16,this[B+3]=L>>>24,B+4},a.prototype.writeInt32BE=function(L,B,ce){return L=+L,B=B>>>0,ce||oe(this,L,B,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[B]=L>>>24,this[B+1]=L>>>16,this[B+2]=L>>>8,this[B+3]=L&255,B+4},a.prototype.writeBigInt64LE=Ve(function(L,B=0){return Q(this,L,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ve(function(L,B=0){return Te(this,L,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(Y,L,B,ce,we,ze){if(B+ce>Y.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function Ce(Y,L,B,ce,we){return L=+L,B=B>>>0,we||ge(Y,L,B,4),n.write(Y,L,B,ce,23,4),B+4}a.prototype.writeFloatLE=function(L,B,ce){return Ce(this,L,B,!0,ce)},a.prototype.writeFloatBE=function(L,B,ce){return Ce(this,L,B,!1,ce)};function he(Y,L,B,ce,we){return L=+L,B=B>>>0,we||ge(Y,L,B,8),n.write(Y,L,B,ce,52,8),B+8}a.prototype.writeDoubleLE=function(L,B,ce){return he(this,L,B,!0,ce)},a.prototype.writeDoubleBE=function(L,B,ce){return he(this,L,B,!1,ce)},a.prototype.copy=function(L,B,ce,we){if(!a.isBuffer(L))throw new TypeError("argument should be a Buffer");if(ce||(ce=0),!we&&we!==0&&(we=this.length),B>=L.length&&(B=L.length),B||(B=0),we>0&&we<ce&&(we=ce),we===ce||L.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(ce<0||ce>=this.length)throw new RangeError("Index out of range");if(we<0)throw new RangeError("sourceEnd out of bounds");we>this.length&&(we=this.length),L.length-B<we-ce&&(we=L.length-B+ce);const ze=we-ce;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(B,ce,we):Uint8Array.prototype.set.call(L,this.subarray(ce,we),B),ze},a.prototype.fill=function(L,B,ce,we){if(typeof L=="string"){if(typeof B=="string"?(we=B,B=0,ce=this.length):typeof ce=="string"&&(we=ce,ce=this.length),we!==void 0&&typeof we!="string")throw new TypeError("encoding must be a string");if(typeof we=="string"&&!a.isEncoding(we))throw new TypeError("Unknown encoding: "+we);if(L.length===1){const Be=L.charCodeAt(0);(we==="utf8"&&Be<128||we==="latin1")&&(L=Be)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(B<0||this.length<B||this.length<ce)throw new RangeError("Out of range index");if(ce<=B)return this;B=B>>>0,ce=ce===void 0?this.length:ce>>>0,L||(L=0);let ze;if(typeof L=="number")for(ze=B;ze<ce;++ze)this[ze]=L;else{const Be=a.isBuffer(L)?L:a.from(L,we),ut=Be.length;if(ut===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(ze=0;ze<ce-B;++ze)this[ze+B]=Be[ze%ut]}return this};const Fe={};function De(Y,L,B){Fe[Y]=class extends B{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Y}]`,this.stack,delete this.name}get code(){return Y}set code(we){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:we,writable:!0})}toString(){return`${this.name} [${Y}]: ${this.message}`}}}De("ERR_BUFFER_OUT_OF_BOUNDS",function(Y){return Y?`${Y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),De("ERR_INVALID_ARG_TYPE",function(Y,L){return`The "${Y}" argument must be of type number. Received type ${typeof L}`},TypeError),De("ERR_OUT_OF_RANGE",function(Y,L,B){let ce=`The value of "${Y}" is out of range.`,we=B;return Number.isInteger(B)&&Math.abs(B)>2**32?we=Re(String(B)):typeof B=="bigint"&&(we=String(B),(B>BigInt(2)**BigInt(32)||B<-(BigInt(2)**BigInt(32)))&&(we=Re(we)),we+="n"),ce+=` It must be ${L}. Received ${we}`,ce},RangeError);function Re(Y){let L="",B=Y.length;const ce=Y[0]==="-"?1:0;for(;B>=ce+4;B-=3)L=`_${Y.slice(B-3,B)}${L}`;return`${Y.slice(0,B)}${L}`}function tt(Y,L,B){nt(L,"offset"),(Y[L]===void 0||Y[L+B]===void 0)&&ot(L,Y.length-(B+1))}function fe(Y,L,B,ce,we,ze){if(Y>B||Y<L){const Be=typeof L=="bigint"?"n":"";let ut;throw L===0||L===BigInt(0)?ut=`>= 0${Be} and < 2${Be} ** ${(ze+1)*8}${Be}`:ut=`>= -(2${Be} ** ${(ze+1)*8-1}${Be}) and < 2 ** ${(ze+1)*8-1}${Be}`,new Fe.ERR_OUT_OF_RANGE("value",ut,Y)}tt(ce,we,ze)}function nt(Y,L){if(typeof Y!="number")throw new Fe.ERR_INVALID_ARG_TYPE(L,"number",Y)}function ot(Y,L,B){throw Math.floor(Y)!==Y?(nt(Y,B),new Fe.ERR_OUT_OF_RANGE("offset","an integer",Y)):L<0?new Fe.ERR_BUFFER_OUT_OF_BOUNDS:new Fe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${L}`,Y)}const Ht=/[^+/0-9A-Za-z-_]/g;function qt(Y){if(Y=Y.split("=")[0],Y=Y.trim().replace(Ht,""),Y.length<2)return"";for(;Y.length%4!==0;)Y=Y+"=";return Y}function Pt(Y,L){L=L||1/0;let B;const ce=Y.length;let we=null;const ze=[];for(let Be=0;Be<ce;++Be){if(B=Y.charCodeAt(Be),B>55295&&B<57344){if(!we){if(B>56319){(L-=3)>-1&&ze.push(239,191,189);continue}else if(Be+1===ce){(L-=3)>-1&&ze.push(239,191,189);continue}we=B;continue}if(B<56320){(L-=3)>-1&&ze.push(239,191,189),we=B;continue}B=(we-55296<<10|B-56320)+65536}else we&&(L-=3)>-1&&ze.push(239,191,189);if(we=null,B<128){if((L-=1)<0)break;ze.push(B)}else if(B<2048){if((L-=2)<0)break;ze.push(B>>6|192,B&63|128)}else if(B<65536){if((L-=3)<0)break;ze.push(B>>12|224,B>>6&63|128,B&63|128)}else if(B<1114112){if((L-=4)<0)break;ze.push(B>>18|240,B>>12&63|128,B>>6&63|128,B&63|128)}else throw new Error("Invalid code point")}return ze}function tn(Y){const L=[];for(let B=0;B<Y.length;++B)L.push(Y.charCodeAt(B)&255);return L}function xt(Y,L){let B,ce,we;const ze=[];for(let Be=0;Be<Y.length&&!((L-=2)<0);++Be)B=Y.charCodeAt(Be),ce=B>>8,we=B%256,ze.push(we),ze.push(ce);return ze}function pe(Y){return t.toByteArray(qt(Y))}function Ne(Y,L,B,ce){let we;for(we=0;we<ce&&!(we+B>=L.length||we>=Y.length);++we)L[we+B]=Y[we];return we}function $e(Y,L){return Y instanceof L||Y!=null&&Y.constructor!=null&&Y.constructor.name!=null&&Y.constructor.name===L.name}function Je(Y){return Y!==Y}const Le=(function(){const Y="0123456789abcdef",L=new Array(256);for(let B=0;B<16;++B){const ce=B*16;for(let we=0;we<16;++we)L[ce+we]=Y[B]+Y[we]}return L})();function Ve(Y){return typeof BigInt>"u"?_e:Y}function _e(){throw new Error("BigInt not supported")}})(jA)),jA}var Ust=jst();typeof window<"u"&&!window.Buffer&&(window.Buffer=Ust.Buffer);let HI=null,al=null,a4=new Set,m_=0;const pie={user:"Puck",app:"Zephyr"};function Hst(e){return console.log("[GeminiTTS] Initializing with API key:",`${e.substring(0,8)}...`),HI=new uR({apiKey:e}),console.log("[GeminiTTS] Client created successfully"),!0}async function n9(e,t="Zephyr"){if(!HI){console.warn("[GeminiTTS] Not initialized, falling back to browser TTS"),CH(e);return}try{(!al||al.state==="closed")&&(al=new AudioContext({sampleRate:24e3})),al.state==="suspended"&&await al.resume(),Wst(),m_=al.currentTime,console.log(`[GeminiTTS] Speaking with voice "${t}": ${e.substring(0,50)}...`);const n="gemini-2.5-flash-native-audio-preview-09-2025";console.log(`[GeminiTTS] Connecting to ${n}...`);const r=await HI.live.connect({model:n,config:{responseModalities:[F1.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}},systemInstruction:"You are a voice assistant. Speak the text exactly as provided, nothing more."}});console.log("[GeminiTTS] Session connected");let s=!1;r.on("audio",async i=>{if(i.data&&al){console.log("[GeminiTTS] Received audio chunk");const a=Uint8Array.from(atob(i.data),f=>f.charCodeAt(0)),l=await pq(a,al,24e3),c=al.createBufferSource();c.buffer=l,c.connect(al.destination);const u=Math.max(al.currentTime,m_);c.start(u),m_=u+l.duration,c.onended=()=>a4.delete(c),a4.add(c)}}),r.on("close",()=>{console.log("[GeminiTTS] Session closed"),s=!0}),console.log("[GeminiTTS] Sending text to speak..."),await r.sendClientContent({turns:[{role:"user",parts:[{text:`Say exactly: "${e}"`}]}],turnComplete:!0}),await new Promise(i=>setTimeout(i,2e3+e.length*50)),r.close();const o=m_-((al==null?void 0:al.currentTime)||0);o>0&&await new Promise(i=>setTimeout(i,o*1e3+300))}catch(n){console.error("[GeminiTTS] FAILED - Error details:",n),console.error("[GeminiTTS] Error name:",n==null?void 0:n.name),console.error("[GeminiTTS] Error message:",n==null?void 0:n.message),console.error("[GeminiTTS] Falling back to browser TTS"),CH(e)}}async function Vst(e){return n9(e,pie.user)}async function qst(e){return n9(e,pie.app)}async function Gst(e,t=500){console.log("[GeminiTTS] Starting demo conversation with",e.length,"lines");for(const n of e)n.action&&(await n.action(),await new Promise(r=>setTimeout(r,300))),n.role==="user"?await Vst(n.text):await qst(n.text),await new Promise(r=>setTimeout(r,t));console.log("[GeminiTTS] Demo conversation complete")}function CH(e){if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.rate=1.1,speechSynthesis.speak(t)}}function Wst(){a4.forEach(e=>{try{e.stop()}catch{}}),a4.clear()}function Yst(e){return[{role:"user",text:"Hey, I need to add a Support page to the website."},{role:"app",text:"Sure! I'll create a Support page for you. Let me highlight the tools we'll use.",action:async()=>{e.highlightElement("inspector-button",{color:"blue",label:"Inspector",duration:2e3})}},{role:"user",text:"Great, what do you need from me?"},{role:"app",text:"I'll show you how to navigate to where we need to make changes. First, let me highlight the URL bar.",action:async()=>{e.highlightElement("url-bar",{color:"green",label:"Navigate here",duration:3e3})}},{role:"user",text:"I see it. What's next?"},{role:"app",text:"Now I'll create the Support page component. Watch the chat area where I'll type the request.",action:async()=>{e.highlightElement("chat-input",{color:"purple",label:"Type here",duration:2e3}),await e.wait(1e3),await e.typeText("chat-input","Create a new Support page with FAQ section")}},{role:"user",text:"Wow, that was easy! Can you show me how it looks?"},{role:"app",text:"The Support page is ready! It includes a header, FAQ accordion, and contact form. You can preview it in the browser."},{role:"user",text:"Perfect, thanks for the help!"},{role:"app",text:"You're welcome! Let me know if you need any other pages or changes."}]}function Kst(e){return[{role:"app",text:"Welcome to Cluso! I'm your AI development assistant. Let me show you around.",action:async()=>{await e.wait(500)}},{role:"app",text:"This is the element inspector. Click it to select any element on the page.",action:async()=>{e.highlightElement("inspector-button",{color:"blue",label:"Inspector",duration:3e3})}},{role:"app",text:"And this is where you can chat with me to make changes to your UI.",action:async()=>{e.highlightElement("chat-input",{color:"purple",label:"Chat with AI",duration:3e3})}},{role:"user",text:"That looks great! How do I start voice chat?"},{role:"app",text:"Just click this microphone button to start a voice session with me.",action:async()=>{e.highlightElement("voice-button",{color:"green",label:"Voice Chat",duration:3e3})}}]}async function Zst(e,t,n){let r;switch(e){case"support-page":r=Yst(t);break;case"intro":r=Kst(t);break;case"custom":r=[];break;default:console.warn("[DemoScript] Unknown demo:",e);return}console.log(`[DemoScript] Running demo: ${e}`),await Gst(r),console.log(`[DemoScript] Demo complete: ${e}`)}const mie=["support-page","intro"],gie={inspector:"Show me how to use the element inspector to select an element on the page.",voice:"Demonstrate how to start voice chat with the AI.","full-tour":"Give me a full tour of all the main features of Cluso.","edit-workflow":"Show me the workflow for making a UI change to a webpage."};function Jst(e={}){const{googleApiKey:t}=e,[n,r]=x.useState(!1),[s,o]=x.useState(!1),[i,a]=x.useState(""),[l,c]=x.useState(null),u=x.useRef(null),f=Ost();x.useEffect(()=>{Hst(t||"AIzaSyAuAGR2YNrczzJKRcqVr924j71lRqc02IU"),console.log("[ClusoAgent] Gemini TTS initialized with API key");const _={onHighlight:(S,k)=>{console.log("[ClusoAgent] Highlight:",S,k),f.highlightElement(S,k)},onClick:S=>{console.log("[ClusoAgent] Click:",S),f.clickElement(S)},onTooltip:(S,k,R)=>{console.log("[ClusoAgent] Tooltip:",S,k),f.showTooltip(S,{message:k,position:R})},onType:async(S,k)=>{console.log("[ClusoAgent] Type:",S,k),await f.typeText(S,k)},onSpeak:S=>{console.log("[ClusoAgent] Speak (Gemini voice):",S),n9(S)},onWait:S=>(console.log("[ClusoAgent] Wait:",S),f.wait(S))};return u.current=Fst(_),r(!0),()=>{u.current=null}},[f,t]);const m=x.useCallback(async w=>{if(!u.current)return c("Agent not initialized"),"Error: Agent not initialized";o(!0),c(null);try{const _=await u.current.chat(w);return a(_),_}catch(_){const S=_ instanceof Error?_.message:"Unknown error";return c(S),`Error: ${S}`}finally{o(!1)}},[]),g=x.useCallback(()=>{u.current&&(u.current.reset(),a(""),c(null))},[]),y=x.useCallback(async w=>{const _=gie[w];if(!_){c(`Unknown demo: ${w}`);return}await m(_)},[m]),v=x.useCallback(async w=>{o(!0),c(null),a(`Running ${w} demo...`);try{await Zst(w,{highlightElement:f.highlightElement,clickElement:f.clickElement,typeText:f.typeText,wait:f.wait}),a(`${w} demo complete!`)}catch(_){const S=_ instanceof Error?_.message:"Demo failed";c(S)}finally{o(!1)}},[f]);return{isReady:n,isProcessing:s,lastResponse:i,error:l,chat:m,reset:g,runDemo:y,runScriptedDemo:v,availableScripts:mie}}const Xst=Object.keys(gie),Qst={"getting-started":[{id:"gs-1",text:"What would you like to build today?",category:"getting-started",relevance:1},{id:"gs-2",text:"Show me the project structure",category:"getting-started",relevance:.9},{id:"gs-3",text:"Help me understand this codebase",category:"getting-started",relevance:.85},{id:"gs-4",text:"What are the main features?",category:"getting-started",relevance:.8},{id:"gs-5",text:"How do I set up the development environment?",category:"getting-started",relevance:.75}],debugging:[{id:"dbg-1",text:"What error are you seeing?",category:"debugging",relevance:.95},{id:"dbg-2",text:"When did this start happening?",category:"debugging",relevance:.9},{id:"dbg-3",text:"Can you help me debug this?",category:"debugging",relevance:.85},{id:"dbg-4",text:"Why is this component not rendering?",category:"debugging",relevance:.8},{id:"dbg-5",text:"Check the console for errors",category:"debugging",relevance:.75}],"ui-changes":[{id:"ui-1",text:"Which element should I modify?",category:"ui-changes",relevance:.95},{id:"ui-2",text:"What style changes do you want?",category:"ui-changes",relevance:.9},{id:"ui-3",text:"Change the color scheme",category:"ui-changes",relevance:.85},{id:"ui-4",text:"Make this button more prominent",category:"ui-changes",relevance:.8},{id:"ui-5",text:"Improve the spacing and layout",category:"ui-changes",relevance:.75}],"code-review":[{id:"cr-1",text:"What should I look for?",category:"code-review",relevance:.9},{id:"cr-2",text:"Any specific concerns?",category:"code-review",relevance:.85},{id:"cr-3",text:"Review this code for best practices",category:"code-review",relevance:.8},{id:"cr-4",text:"Is this implementation correct?",category:"code-review",relevance:.75},{id:"cr-5",text:"Suggest performance improvements",category:"code-review",relevance:.7}]};function eot(e){const t=[];if(e.messages.length===0)return t.push({category:"getting-started",weight:1}),t.push({category:"ui-changes",weight:.6}),t;const r=e.messages.slice(-5).map(s=>s.content.toLowerCase()).join(" ");return(r.includes("error")||r.includes("bug")||r.includes("broken")||r.includes("debug")||r.includes("fix"))&&(t.push({category:"debugging",weight:1}),t.push({category:"code-review",weight:.7})),(e.selectedElement||r.includes("style")||r.includes("color")||r.includes("button")||r.includes("layout")||r.includes("spacing"))&&(t.push({category:"ui-changes",weight:1}),e.selectedElement&&t.push({category:"ui-changes",weight:1.2})),(r.includes("review")||r.includes("refactor")||r.includes("improve")||r.includes("optimize"))&&t.push({category:"code-review",weight:1}),t.length===0&&(t.push({category:"getting-started",weight:.5}),t.push({category:"ui-changes",weight:.6})),t}function tot(e,t,n){if(n.has(e.id))return 0;const r=t.get(e.category)||0;return e.relevance*r}function not(){const[e,t]=x.useState(new Set),[n,r]=x.useState(null),s=x.useMemo(()=>{if(!n)return[];const l=eot(n),c=new Map(l.map(m=>[m.category,m.weight]));return Object.values(Qst).flat().map(m=>({...m,score:tot(m,c,e)})).filter(m=>m.score>0).sort((m,g)=>g.score-m.score).slice(0,3).map(({score:m,...g})=>g)},[n,e]),o=x.useCallback(l=>{t(c=>new Set([...c,l]))},[]),i=x.useCallback(l=>{const c=s.find(u=>u.id===l);return c?(o(l),c.text):""},[s,o]),a=x.useCallback(l=>{r(l)},[]);return{questions:s,dismissedQuestions:e,dismissQuestion:o,selectQuestion:i,refreshQuestions:a}}const rot=({questions:e,onSelectQuestion:t,onDismissQuestion:n,isDarkMode:r=!0,isVisible:s=!0,isEmptyChat:o=!1})=>{const[i,a]=x.useState(new Set),[l,c]=x.useState([]);if(x.useEffect(()=>{c(e)},[e]),!s||l.length===0)return null;const u=m=>{t(m.text)},f=()=>{c([])};return h.jsxs("div",{className:`p-3 rounded-xl shadow-lg transition-all duration-300 ${r?"bg-neutral-800/95 border border-neutral-700 backdrop-blur-sm":"bg-white/95 border border-stone-200 backdrop-blur-sm"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(J_,{size:14,className:r?"text-amber-400":"text-amber-600"}),h.jsx("span",{className:`text-xs font-medium ${r?"text-neutral-400":"text-stone-500"}`,children:"Suggestions"})]}),h.jsx("button",{onClick:f,className:`p-1 rounded-md transition-colors ${r?"hover:bg-neutral-700 text-neutral-500":"hover:bg-stone-100 text-stone-400"}`,title:"Collapse",children:h.jsx($f,{size:14})})]}),h.jsx("div",{className:"flex flex-wrap gap-1.5",children:l.map(m=>h.jsx("button",{onClick:()=>u(m),className:`px-2.5 py-1 rounded-md text-xs transition-all duration-200 ${i.has(m.id)?"opacity-0 scale-95":"opacity-100 scale-100"} ${r?"bg-neutral-700/80 text-neutral-300 hover:bg-neutral-600 hover:text-white":"bg-stone-100 text-stone-600 hover:bg-stone-200 hover:text-stone-800"}`,children:m.text},m.id))})]})};function sot(){const e=Date.now(),t=Math.random().toString(36).slice(2,7);return`turn-${e}-${t}`}function oot(e,t,n){const r=Date.now();if(n instanceof Error){const s=n.message.toLowerCase();return s.includes("timeout")?{id:e,toolName:t,code:"TIMEOUT",message:`Tool "${t}" timed out after 30 seconds. The operation took too long to complete.`,recoveryActions:["Retry the operation","Try a simpler/smaller request","Check your system resources (CPU, memory)","Try again after waiting a moment"],timestamp:r}:s.includes("not found")||s.includes("does not exist")?{id:e,toolName:t,code:"NOT_FOUND",message:`Tool "${t}" is not available or the target resource was not found.`,recoveryActions:["Check that the file or element exists","Verify the path or selector is correct","Restart the application to reload tools","Check the browser console for details"],timestamp:r}:s.includes("validation")||s.includes("invalid")?{id:e,toolName:t,code:"VALIDATION",message:`Invalid input for tool "${t}": ${n.message}`,recoveryActions:["Check the input parameters are correct","Try with different arguments","Review the error message for hints"],timestamp:r}:{id:e,toolName:t,code:"EXECUTION",message:`Tool "${t}" failed: ${n.message}`,recoveryActions:["Retry the operation","Try a different approach","Check the browser console for more details"],timestamp:r}}return{id:e,toolName:t,code:"UNKNOWN",message:`Tool "${t}" encountered an unexpected error: ${String(n)}`,recoveryActions:["Retry the operation","Try reloading the page","Check the browser console for details"],timestamp:r}}function iot(e){return{title:{TIMEOUT:" Tool Timeout",NOT_FOUND:" Not Found",VALIDATION:" Invalid Input",EXECUTION:" Tool Failed",UNKNOWN:" Unknown Error"}[e.code],description:e.message,actions:e.recoveryActions}}var UA={exports:{}},kH;function aot(){return kH||(kH=1,(function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,r=1,s=0;t.Diff=function(o,i){return[o,i]},t.prototype.diff_main=function(o,i,a,l){typeof l>"u"&&(this.Diff_Timeout<=0?l=Number.MAX_VALUE:l=new Date().getTime()+this.Diff_Timeout*1e3);var c=l;if(o==null||i==null)throw new Error("Null input. (diff_main)");if(o==i)return o?[new t.Diff(s,o)]:[];typeof a>"u"&&(a=!0);var u=a,f=this.diff_commonPrefix(o,i),m=o.substring(0,f);o=o.substring(f),i=i.substring(f),f=this.diff_commonSuffix(o,i);var g=o.substring(o.length-f);o=o.substring(0,o.length-f),i=i.substring(0,i.length-f);var y=this.diff_compute_(o,i,u,c);return m&&y.unshift(new t.Diff(s,m)),g&&y.push(new t.Diff(s,g)),this.diff_cleanupMerge(y),y},t.prototype.diff_compute_=function(o,i,a,l){var c;if(!o)return[new t.Diff(r,i)];if(!i)return[new t.Diff(n,o)];var u=o.length>i.length?o:i,f=o.length>i.length?i:o,m=u.indexOf(f);if(m!=-1)return c=[new t.Diff(r,u.substring(0,m)),new t.Diff(s,f),new t.Diff(r,u.substring(m+f.length))],o.length>i.length&&(c[0][0]=c[2][0]=n),c;if(f.length==1)return[new t.Diff(n,o),new t.Diff(r,i)];var g=this.diff_halfMatch_(o,i);if(g){var y=g[0],v=g[1],w=g[2],_=g[3],S=g[4],k=this.diff_main(y,w,a,l),R=this.diff_main(v,_,a,l);return k.concat([new t.Diff(s,S)],R)}return a&&o.length>100&&i.length>100?this.diff_lineMode_(o,i,l):this.diff_bisect_(o,i,l)},t.prototype.diff_lineMode_=function(o,i,a){var l=this.diff_linesToChars_(o,i);o=l.chars1,i=l.chars2;var c=l.lineArray,u=this.diff_main(o,i,!1,a);this.diff_charsToLines_(u,c),this.diff_cleanupSemantic(u),u.push(new t.Diff(s,""));for(var f=0,m=0,g=0,y="",v="";f<u.length;){switch(u[f][0]){case r:g++,v+=u[f][1];break;case n:m++,y+=u[f][1];break;case s:if(m>=1&&g>=1){u.splice(f-m-g,m+g),f=f-m-g;for(var w=this.diff_main(y,v,!1,a),_=w.length-1;_>=0;_--)u.splice(f,0,w[_]);f=f+w.length}g=0,m=0,y="",v="";break}f++}return u.pop(),u},t.prototype.diff_bisect_=function(o,i,a){for(var l=o.length,c=i.length,u=Math.ceil((l+c)/2),f=u,m=2*u,g=new Array(m),y=new Array(m),v=0;v<m;v++)g[v]=-1,y[v]=-1;g[f+1]=0,y[f+1]=0;for(var w=l-c,_=w%2!=0,S=0,k=0,R=0,O=0,M=0;M<u&&!(new Date().getTime()>a);M++){for(var P=-M+S;P<=M-k;P+=2){var j=f+P,q;P==-M||P!=M&&g[j-1]<g[j+1]?q=g[j+1]:q=g[j-1]+1;for(var U=q-P;q<l&&U<c&&o.charAt(q)==i.charAt(U);)q++,U++;if(g[j]=q,q>l)k+=2;else if(U>c)S+=2;else if(_){var z=f+w-P;if(z>=0&&z<m&&y[z]!=-1){var H=l-y[z];if(q>=H)return this.diff_bisectSplit_(o,i,q,U,a)}}}for(var F=-M+R;F<=M-O;F+=2){var z=f+F,H;F==-M||F!=M&&y[z-1]<y[z+1]?H=y[z+1]:H=y[z-1]+1;for(var W=H-F;H<l&&W<c&&o.charAt(l-H-1)==i.charAt(c-W-1);)H++,W++;if(y[z]=H,H>l)O+=2;else if(W>c)R+=2;else if(!_){var j=f+w-F;if(j>=0&&j<m&&g[j]!=-1){var q=g[j],U=f+q-j;if(H=l-H,q>=H)return this.diff_bisectSplit_(o,i,q,U,a)}}}}return[new t.Diff(n,o),new t.Diff(r,i)]},t.prototype.diff_bisectSplit_=function(o,i,a,l,c){var u=o.substring(0,a),f=i.substring(0,l),m=o.substring(a),g=i.substring(l),y=this.diff_main(u,f,!1,c),v=this.diff_main(m,g,!1,c);return y.concat(v)},t.prototype.diff_linesToChars_=function(o,i){var a=[],l={};a[0]="";function c(g){for(var y="",v=0,w=-1,_=a.length;w<g.length-1;){w=g.indexOf(`
`,v),w==-1&&(w=g.length-1);var S=g.substring(v,w+1);(l.hasOwnProperty?l.hasOwnProperty(S):l[S]!==void 0)?y+=String.fromCharCode(l[S]):(_==u&&(S=g.substring(v),w=g.length),y+=String.fromCharCode(_),l[S]=_,a[_++]=S),v=w+1}return y}var u=4e4,f=c(o);u=65535;var m=c(i);return{chars1:f,chars2:m,lineArray:a}},t.prototype.diff_charsToLines_=function(o,i){for(var a=0;a<o.length;a++){for(var l=o[a][1],c=[],u=0;u<l.length;u++)c[u]=i[l.charCodeAt(u)];o[a][1]=c.join("")}},t.prototype.diff_commonPrefix=function(o,i){if(!o||!i||o.charAt(0)!=i.charAt(0))return 0;for(var a=0,l=Math.min(o.length,i.length),c=l,u=0;a<c;)o.substring(u,c)==i.substring(u,c)?(a=c,u=a):l=c,c=Math.floor((l-a)/2+a);return c},t.prototype.diff_commonSuffix=function(o,i){if(!o||!i||o.charAt(o.length-1)!=i.charAt(i.length-1))return 0;for(var a=0,l=Math.min(o.length,i.length),c=l,u=0;a<c;)o.substring(o.length-c,o.length-u)==i.substring(i.length-c,i.length-u)?(a=c,u=a):l=c,c=Math.floor((l-a)/2+a);return c},t.prototype.diff_commonOverlap_=function(o,i){var a=o.length,l=i.length;if(a==0||l==0)return 0;a>l?o=o.substring(a-l):a<l&&(i=i.substring(0,a));var c=Math.min(a,l);if(o==i)return c;for(var u=0,f=1;;){var m=o.substring(c-f),g=i.indexOf(m);if(g==-1)return u;f+=g,(g==0||o.substring(c-f)==i.substring(0,f))&&(u=f,f++)}},t.prototype.diff_halfMatch_=function(o,i){if(this.Diff_Timeout<=0)return null;var a=o.length>i.length?o:i,l=o.length>i.length?i:o;if(a.length<4||l.length*2<a.length)return null;var c=this;function u(k,R,O){for(var M=k.substring(O,O+Math.floor(k.length/4)),P=-1,j="",q,U,z,H;(P=R.indexOf(M,P+1))!=-1;){var F=c.diff_commonPrefix(k.substring(O),R.substring(P)),W=c.diff_commonSuffix(k.substring(0,O),R.substring(0,P));j.length<W+F&&(j=R.substring(P-W,P)+R.substring(P,P+F),q=k.substring(0,O-W),U=k.substring(O+F),z=R.substring(0,P-W),H=R.substring(P+F))}return j.length*2>=k.length?[q,U,z,H,j]:null}var f=u(a,l,Math.ceil(a.length/4)),m=u(a,l,Math.ceil(a.length/2)),g;if(!f&&!m)return null;m?f?g=f[4].length>m[4].length?f:m:g=m:g=f;var y,v,w,_;o.length>i.length?(y=g[0],v=g[1],w=g[2],_=g[3]):(w=g[0],_=g[1],y=g[2],v=g[3]);var S=g[4];return[y,v,w,_,S]},t.prototype.diff_cleanupSemantic=function(o){for(var i=!1,a=[],l=0,c=null,u=0,f=0,m=0,g=0,y=0;u<o.length;)o[u][0]==s?(a[l++]=u,f=g,m=y,g=0,y=0,c=o[u][1]):(o[u][0]==r?g+=o[u][1].length:y+=o[u][1].length,c&&c.length<=Math.max(f,m)&&c.length<=Math.max(g,y)&&(o.splice(a[l-1],0,new t.Diff(n,c)),o[a[l-1]+1][0]=r,l--,l--,u=l>0?a[l-1]:-1,f=0,m=0,g=0,y=0,c=null,i=!0)),u++;for(i&&this.diff_cleanupMerge(o),this.diff_cleanupSemanticLossless(o),u=1;u<o.length;){if(o[u-1][0]==n&&o[u][0]==r){var v=o[u-1][1],w=o[u][1],_=this.diff_commonOverlap_(v,w),S=this.diff_commonOverlap_(w,v);_>=S?(_>=v.length/2||_>=w.length/2)&&(o.splice(u,0,new t.Diff(s,w.substring(0,_))),o[u-1][1]=v.substring(0,v.length-_),o[u+1][1]=w.substring(_),u++):(S>=v.length/2||S>=w.length/2)&&(o.splice(u,0,new t.Diff(s,v.substring(0,S))),o[u-1][0]=r,o[u-1][1]=w.substring(0,w.length-S),o[u+1][0]=n,o[u+1][1]=v.substring(S),u++),u++}u++}},t.prototype.diff_cleanupSemanticLossless=function(o){function i(S,k){if(!S||!k)return 6;var R=S.charAt(S.length-1),O=k.charAt(0),M=R.match(t.nonAlphaNumericRegex_),P=O.match(t.nonAlphaNumericRegex_),j=M&&R.match(t.whitespaceRegex_),q=P&&O.match(t.whitespaceRegex_),U=j&&R.match(t.linebreakRegex_),z=q&&O.match(t.linebreakRegex_),H=U&&S.match(t.blanklineEndRegex_),F=z&&k.match(t.blanklineStartRegex_);return H||F?5:U||z?4:M&&!j&&q?3:j||q?2:M||P?1:0}for(var a=1;a<o.length-1;){if(o[a-1][0]==s&&o[a+1][0]==s){var l=o[a-1][1],c=o[a][1],u=o[a+1][1],f=this.diff_commonSuffix(l,c);if(f){var m=c.substring(c.length-f);l=l.substring(0,l.length-f),c=m+c.substring(0,c.length-f),u=m+u}for(var g=l,y=c,v=u,w=i(l,c)+i(c,u);c.charAt(0)===u.charAt(0);){l+=c.charAt(0),c=c.substring(1)+u.charAt(0),u=u.substring(1);var _=i(l,c)+i(c,u);_>=w&&(w=_,g=l,y=c,v=u)}o[a-1][1]!=g&&(g?o[a-1][1]=g:(o.splice(a-1,1),a--),o[a][1]=y,v?o[a+1][1]=v:(o.splice(a+1,1),a--))}a++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(o){for(var i=!1,a=[],l=0,c=null,u=0,f=!1,m=!1,g=!1,y=!1;u<o.length;)o[u][0]==s?(o[u][1].length<this.Diff_EditCost&&(g||y)?(a[l++]=u,f=g,m=y,c=o[u][1]):(l=0,c=null),g=y=!1):(o[u][0]==n?y=!0:g=!0,c&&(f&&m&&g&&y||c.length<this.Diff_EditCost/2&&f+m+g+y==3)&&(o.splice(a[l-1],0,new t.Diff(n,c)),o[a[l-1]+1][0]=r,l--,c=null,f&&m?(g=y=!0,l=0):(l--,u=l>0?a[l-1]:-1,g=y=!1),i=!0)),u++;i&&this.diff_cleanupMerge(o)},t.prototype.diff_cleanupMerge=function(o){o.push(new t.Diff(s,""));for(var i=0,a=0,l=0,c="",u="",f;i<o.length;)switch(o[i][0]){case r:l++,u+=o[i][1],i++;break;case n:a++,c+=o[i][1],i++;break;case s:a+l>1?(a!==0&&l!==0&&(f=this.diff_commonPrefix(u,c),f!==0&&(i-a-l>0&&o[i-a-l-1][0]==s?o[i-a-l-1][1]+=u.substring(0,f):(o.splice(0,0,new t.Diff(s,u.substring(0,f))),i++),u=u.substring(f),c=c.substring(f)),f=this.diff_commonSuffix(u,c),f!==0&&(o[i][1]=u.substring(u.length-f)+o[i][1],u=u.substring(0,u.length-f),c=c.substring(0,c.length-f))),i-=a+l,o.splice(i,a+l),c.length&&(o.splice(i,0,new t.Diff(n,c)),i++),u.length&&(o.splice(i,0,new t.Diff(r,u)),i++),i++):i!==0&&o[i-1][0]==s?(o[i-1][1]+=o[i][1],o.splice(i,1)):i++,l=0,a=0,c="",u="";break}o[o.length-1][1]===""&&o.pop();var m=!1;for(i=1;i<o.length-1;)o[i-1][0]==s&&o[i+1][0]==s&&(o[i][1].substring(o[i][1].length-o[i-1][1].length)==o[i-1][1]?(o[i][1]=o[i-1][1]+o[i][1].substring(0,o[i][1].length-o[i-1][1].length),o[i+1][1]=o[i-1][1]+o[i+1][1],o.splice(i-1,1),m=!0):o[i][1].substring(0,o[i+1][1].length)==o[i+1][1]&&(o[i-1][1]+=o[i+1][1],o[i][1]=o[i][1].substring(o[i+1][1].length)+o[i+1][1],o.splice(i+1,1),m=!0)),i++;m&&this.diff_cleanupMerge(o)},t.prototype.diff_xIndex=function(o,i){var a=0,l=0,c=0,u=0,f;for(f=0;f<o.length&&(o[f][0]!==r&&(a+=o[f][1].length),o[f][0]!==n&&(l+=o[f][1].length),!(a>i));f++)c=a,u=l;return o.length!=f&&o[f][0]===n?u:u+(i-c)},t.prototype.diff_prettyHtml=function(o){for(var i=[],a=/&/g,l=/</g,c=/>/g,u=/\n/g,f=0;f<o.length;f++){var m=o[f][0],g=o[f][1],y=g.replace(a,"&amp;").replace(l,"&lt;").replace(c,"&gt;").replace(u,"&para;<br>");switch(m){case r:i[f]='<ins style="background:#e6ffe6;">'+y+"</ins>";break;case n:i[f]='<del style="background:#ffe6e6;">'+y+"</del>";break;case s:i[f]="<span>"+y+"</span>";break}}return i.join("")},t.prototype.diff_text1=function(o){for(var i=[],a=0;a<o.length;a++)o[a][0]!==r&&(i[a]=o[a][1]);return i.join("")},t.prototype.diff_text2=function(o){for(var i=[],a=0;a<o.length;a++)o[a][0]!==n&&(i[a]=o[a][1]);return i.join("")},t.prototype.diff_levenshtein=function(o){for(var i=0,a=0,l=0,c=0;c<o.length;c++){var u=o[c][0],f=o[c][1];switch(u){case r:a+=f.length;break;case n:l+=f.length;break;case s:i+=Math.max(a,l),a=0,l=0;break}}return i+=Math.max(a,l),i},t.prototype.diff_toDelta=function(o){for(var i=[],a=0;a<o.length;a++)switch(o[a][0]){case r:i[a]="+"+encodeURI(o[a][1]);break;case n:i[a]="-"+o[a][1].length;break;case s:i[a]="="+o[a][1].length;break}return i.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(o,i){for(var a=[],l=0,c=0,u=i.split(/\t/g),f=0;f<u.length;f++){var m=u[f].substring(1);switch(u[f].charAt(0)){case"+":try{a[l++]=new t.Diff(r,decodeURI(m))}catch{throw new Error("Illegal escape in diff_fromDelta: "+m)}break;case"-":case"=":var g=parseInt(m,10);if(isNaN(g)||g<0)throw new Error("Invalid number in diff_fromDelta: "+m);var y=o.substring(c,c+=g);u[f].charAt(0)=="="?a[l++]=new t.Diff(s,y):a[l++]=new t.Diff(n,y);break;default:if(u[f])throw new Error("Invalid diff operation in diff_fromDelta: "+u[f])}}if(c!=o.length)throw new Error("Delta length ("+c+") does not equal source text length ("+o.length+").");return a},t.prototype.match_main=function(o,i,a){if(o==null||i==null||a==null)throw new Error("Null input. (match_main)");return a=Math.max(0,Math.min(a,o.length)),o==i?0:o.length?o.substring(a,a+i.length)==i?a:this.match_bitap_(o,i,a):-1},t.prototype.match_bitap_=function(o,i,a){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var l=this.match_alphabet_(i),c=this;function u(q,U){var z=q/i.length,H=Math.abs(a-U);return c.Match_Distance?z+H/c.Match_Distance:H?1:z}var f=this.Match_Threshold,m=o.indexOf(i,a);m!=-1&&(f=Math.min(u(0,m),f),m=o.lastIndexOf(i,a+i.length),m!=-1&&(f=Math.min(u(0,m),f)));var g=1<<i.length-1;m=-1;for(var y,v,w=i.length+o.length,_,S=0;S<i.length;S++){for(y=0,v=w;y<v;)u(S,a+v)<=f?y=v:w=v,v=Math.floor((w-y)/2+y);w=v;var k=Math.max(1,a-v+1),R=Math.min(a+v,o.length)+i.length,O=Array(R+2);O[R+1]=(1<<S)-1;for(var M=R;M>=k;M--){var P=l[o.charAt(M-1)];if(S===0?O[M]=(O[M+1]<<1|1)&P:O[M]=(O[M+1]<<1|1)&P|((_[M+1]|_[M])<<1|1)|_[M+1],O[M]&g){var j=u(S,M-1);if(j<=f)if(f=j,m=M-1,m>a)k=Math.max(1,2*a-m);else break}}if(u(S+1,a)>f)break;_=O}return m},t.prototype.match_alphabet_=function(o){for(var i={},a=0;a<o.length;a++)i[o.charAt(a)]=0;for(var a=0;a<o.length;a++)i[o.charAt(a)]|=1<<o.length-a-1;return i},t.prototype.patch_addContext_=function(o,i){if(i.length!=0){if(o.start2===null)throw Error("patch not initialized");for(var a=i.substring(o.start2,o.start2+o.length1),l=0;i.indexOf(a)!=i.lastIndexOf(a)&&a.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,a=i.substring(o.start2-l,o.start2+o.length1+l);l+=this.Patch_Margin;var c=i.substring(o.start2-l,o.start2);c&&o.diffs.unshift(new t.Diff(s,c));var u=i.substring(o.start2+o.length1,o.start2+o.length1+l);u&&o.diffs.push(new t.Diff(s,u)),o.start1-=c.length,o.start2-=c.length,o.length1+=c.length+u.length,o.length2+=c.length+u.length}},t.prototype.patch_make=function(o,i,a){var l,c;if(typeof o=="string"&&typeof i=="string"&&typeof a>"u")l=o,c=this.diff_main(l,i,!0),c.length>2&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(o&&typeof o=="object"&&typeof i>"u"&&typeof a>"u")c=o,l=this.diff_text1(c);else if(typeof o=="string"&&i&&typeof i=="object"&&typeof a>"u")l=o,c=i;else if(typeof o=="string"&&typeof i=="string"&&a&&typeof a=="object")l=o,c=a;else throw new Error("Unknown call format to patch_make.");if(c.length===0)return[];for(var u=[],f=new t.patch_obj,m=0,g=0,y=0,v=l,w=l,_=0;_<c.length;_++){var S=c[_][0],k=c[_][1];switch(!m&&S!==s&&(f.start1=g,f.start2=y),S){case r:f.diffs[m++]=c[_],f.length2+=k.length,w=w.substring(0,y)+k+w.substring(y);break;case n:f.length1+=k.length,f.diffs[m++]=c[_],w=w.substring(0,y)+w.substring(y+k.length);break;case s:k.length<=2*this.Patch_Margin&&m&&c.length!=_+1?(f.diffs[m++]=c[_],f.length1+=k.length,f.length2+=k.length):k.length>=2*this.Patch_Margin&&m&&(this.patch_addContext_(f,v),u.push(f),f=new t.patch_obj,m=0,v=w,g=y);break}S!==r&&(g+=k.length),S!==n&&(y+=k.length)}return m&&(this.patch_addContext_(f,v),u.push(f)),u},t.prototype.patch_deepCopy=function(o){for(var i=[],a=0;a<o.length;a++){var l=o[a],c=new t.patch_obj;c.diffs=[];for(var u=0;u<l.diffs.length;u++)c.diffs[u]=new t.Diff(l.diffs[u][0],l.diffs[u][1]);c.start1=l.start1,c.start2=l.start2,c.length1=l.length1,c.length2=l.length2,i[a]=c}return i},t.prototype.patch_apply=function(o,i){if(o.length==0)return[i,[]];o=this.patch_deepCopy(o);var a=this.patch_addPadding(o);i=a+i+a,this.patch_splitMax(o);for(var l=0,c=[],u=0;u<o.length;u++){var f=o[u].start2+l,m=this.diff_text1(o[u].diffs),g,y=-1;if(m.length>this.Match_MaxBits?(g=this.match_main(i,m.substring(0,this.Match_MaxBits),f),g!=-1&&(y=this.match_main(i,m.substring(m.length-this.Match_MaxBits),f+m.length-this.Match_MaxBits),(y==-1||g>=y)&&(g=-1))):g=this.match_main(i,m,f),g==-1)c[u]=!1,l-=o[u].length2-o[u].length1;else{c[u]=!0,l=g-f;var v;if(y==-1?v=i.substring(g,g+m.length):v=i.substring(g,y+this.Match_MaxBits),m==v)i=i.substring(0,g)+this.diff_text2(o[u].diffs)+i.substring(g+m.length);else{var w=this.diff_main(m,v,!1);if(m.length>this.Match_MaxBits&&this.diff_levenshtein(w)/m.length>this.Patch_DeleteThreshold)c[u]=!1;else{this.diff_cleanupSemanticLossless(w);for(var _=0,S,k=0;k<o[u].diffs.length;k++){var R=o[u].diffs[k];R[0]!==s&&(S=this.diff_xIndex(w,_)),R[0]===r?i=i.substring(0,g+S)+R[1]+i.substring(g+S):R[0]===n&&(i=i.substring(0,g+S)+i.substring(g+this.diff_xIndex(w,_+R[1].length))),R[0]!==n&&(_+=R[1].length)}}}}}return i=i.substring(a.length,i.length-a.length),[i,c]},t.prototype.patch_addPadding=function(o){for(var i=this.Patch_Margin,a="",l=1;l<=i;l++)a+=String.fromCharCode(l);for(var l=0;l<o.length;l++)o[l].start1+=i,o[l].start2+=i;var c=o[0],u=c.diffs;if(u.length==0||u[0][0]!=s)u.unshift(new t.Diff(s,a)),c.start1-=i,c.start2-=i,c.length1+=i,c.length2+=i;else if(i>u[0][1].length){var f=i-u[0][1].length;u[0][1]=a.substring(u[0][1].length)+u[0][1],c.start1-=f,c.start2-=f,c.length1+=f,c.length2+=f}if(c=o[o.length-1],u=c.diffs,u.length==0||u[u.length-1][0]!=s)u.push(new t.Diff(s,a)),c.length1+=i,c.length2+=i;else if(i>u[u.length-1][1].length){var f=i-u[u.length-1][1].length;u[u.length-1][1]+=a.substring(0,f),c.length1+=f,c.length2+=f}return a},t.prototype.patch_splitMax=function(o){for(var i=this.Match_MaxBits,a=0;a<o.length;a++)if(!(o[a].length1<=i)){var l=o[a];o.splice(a--,1);for(var c=l.start1,u=l.start2,f="";l.diffs.length!==0;){var m=new t.patch_obj,g=!0;for(m.start1=c-f.length,m.start2=u-f.length,f!==""&&(m.length1=m.length2=f.length,m.diffs.push(new t.Diff(s,f)));l.diffs.length!==0&&m.length1<i-this.Patch_Margin;){var y=l.diffs[0][0],v=l.diffs[0][1];y===r?(m.length2+=v.length,u+=v.length,m.diffs.push(l.diffs.shift()),g=!1):y===n&&m.diffs.length==1&&m.diffs[0][0]==s&&v.length>2*i?(m.length1+=v.length,c+=v.length,g=!1,m.diffs.push(new t.Diff(y,v)),l.diffs.shift()):(v=v.substring(0,i-m.length1-this.Patch_Margin),m.length1+=v.length,c+=v.length,y===s?(m.length2+=v.length,u+=v.length):g=!1,m.diffs.push(new t.Diff(y,v)),v==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(v.length))}f=this.diff_text2(m.diffs),f=f.substring(f.length-this.Patch_Margin);var w=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);w!==""&&(m.length1+=w.length,m.length2+=w.length,m.diffs.length!==0&&m.diffs[m.diffs.length-1][0]===s?m.diffs[m.diffs.length-1][1]+=w:m.diffs.push(new t.Diff(s,w))),g||o.splice(++a,0,m)}}},t.prototype.patch_toText=function(o){for(var i=[],a=0;a<o.length;a++)i[a]=o[a];return i.join("")},t.prototype.patch_fromText=function(o){var i=[];if(!o)return i;for(var a=o.split(`
`),l=0,c=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<a.length;){var u=a[l].match(c);if(!u)throw new Error("Invalid patch string: "+a[l]);var f=new t.patch_obj;for(i.push(f),f.start1=parseInt(u[1],10),u[2]===""?(f.start1--,f.length1=1):u[2]=="0"?f.length1=0:(f.start1--,f.length1=parseInt(u[2],10)),f.start2=parseInt(u[3],10),u[4]===""?(f.start2--,f.length2=1):u[4]=="0"?f.length2=0:(f.start2--,f.length2=parseInt(u[4],10)),l++;l<a.length;){var m=a[l].charAt(0);try{var g=decodeURI(a[l].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+g)}if(m=="-")f.diffs.push(new t.Diff(n,g));else if(m=="+")f.diffs.push(new t.Diff(r,g));else if(m==" ")f.diffs.push(new t.Diff(s,g));else{if(m=="@")break;if(m!=="")throw new Error('Invalid patch mode "'+m+'" in: '+g)}l++}}return i},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var o,i;this.length1===0?o=this.start1+",0":this.length1==1?o=this.start1+1:o=this.start1+1+","+this.length1,this.length2===0?i=this.start2+",0":this.length2==1?i=this.start2+1:i=this.start2+1+","+this.length2;for(var a=["@@ -"+o+" +"+i+` @@
`],l,c=0;c<this.diffs.length;c++){switch(this.diffs[c][0]){case r:l="+";break;case n:l="-";break;case s:l=" ";break}a[c+1]=l+encodeURI(this.diffs[c][1])+`
`}return a.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=r,e.exports.DIFF_EQUAL=s})(UA)),UA.exports}var lot=aot();const cot=km(lot),AH=new cot;function uot(e,t){const n=AH.diff_main(e,t);return AH.diff_cleanup_semantic(n),{before:e,after:t,diffs:n}}function HA(e,t,n,r){const s=`patch-decisions-${e}`,o=JSON.parse(localStorage.getItem(s)||"[]");o.push({filePath:t,timestamp:Date.now(),decision:n,changeType:r}),o.length>100&&o.shift(),localStorage.setItem(s,JSON.stringify(o))}function dot(e){var r;const t=((r=e.split(".").pop())==null?void 0:r.toLowerCase())||"";return{js:"javascript",jsx:"javascript",mjs:"javascript",cjs:"javascript",ts:"typescript",tsx:"typescript",mts:"typescript",cts:"typescript",py:"python",pyw:"python",pyi:"python",go:"go",rs:"rust",java:"java",cpp:"cpp",cc:"cpp",cxx:"cpp",c:"c",h:"c",hpp:"cpp",html:"html",htm:"html",vue:"vue",css:"css",scss:"scss",sass:"sass",less:"less",json:"json",jsonc:"jsonc",yaml:"yaml",yml:"yaml",md:"markdown",mdx:"mdx",xml:"xml",sql:"sql",sh:"bash",bash:"bash",zsh:"bash",fish:"fish",ps1:"powershell",rb:"ruby",erb:"ruby",php:"php",swift:"swift",kt:"kotlin",kts:"kotlin",scala:"scala",clj:"clojure",cljs:"clojure",edn:"clojure",elm:"elm",ex:"elixir",exs:"elixir",erl:"erlang",hrl:"erlang",fs:"fsharp",fsi:"fsharp",fsx:"fsharp",ml:"ocaml",mli:"ocaml",pl:"perl",pm:"perl",t:"perl",r:"r",R:"r",rmd:"rmarkdown",groovy:"groovy",gradle:"groovy",nix:"nix",dhall:"dhall",hcl:"hcl",tf:"hcl",dart:"dart",lua:"lua",vim:"vim",vimrc:"vim",lisp:"lisp",cl:"lisp",el:"lisp",scm:"scheme",rkt:"racket",jl:"julia",hs:"haskell",lhs:"haskell",purescript:"purescript",purs:"purescript",pyx:"cython",pxd:"cython",pxi:"cython",proto:"protobuf",thrift:"thrift",graphql:"graphql",gql:"graphql",dockerfile:"dockerfile",Dockerfile:"dockerfile","docker-compose.yml":"yaml","docker-compose.yaml":"yaml",makefile:"makefile",Makefile:"makefile",cmake:"cmake","CMakeLists.txt":"cmake",gradle:"gradle",maven:"xml","pom.xml":"xml",nuget:"xml","packages.config":"xml",gemfile:"ruby",Gemfile:"ruby","Gemfile.lock":"ruby",podfile:"ruby",Podfile:"ruby",cartfile:"plaintext",Cartfile:"plaintext","requirements.txt":"plaintext","setup.py":"python","setup.cfg":"ini","pyproject.toml":"toml","tox.ini":"ini","pytest.ini":"ini","package.json":"json","package-lock.json":"json","yarn.lock":"plaintext","pnpm-lock.yaml":"yaml","tsconfig.json":"json","jest.config.js":"javascript","webpack.config.js":"javascript","vite.config.js":"javascript","vite.config.ts":"typescript",env:"plaintext",".env":"plaintext",".env.local":"plaintext",".env.example":"plaintext",editorconfig:"ini",".editorconfig":"ini",gitignore:"plaintext",".gitignore":"plaintext",npmignore:"plaintext",".npmignore":"plaintext",prettierignore:"plaintext",".prettierignore":"plaintext",eslintignore:"plaintext",".eslintignore":"plaintext",prettierrc:"json",".prettierrc":"json","prettierrc.json":"json",".prettierrc.json":"json","prettierrc.yaml":"yaml",".prettierrc.yaml":"yaml","prettierrc.yml":"yaml",".prettierrc.yml":"yaml","prettierrc.js":"javascript",".prettierrc.js":"javascript",eslintrc:"json",".eslintrc":"json","eslintrc.json":"json",".eslintrc.json":"json","eslintrc.yaml":"yaml",".eslintrc.yaml":"yaml","eslintrc.yml":"yaml",".eslintrc.yml":"yaml","eslintrc.js":"javascript",".eslintrc.js":"javascript",babelrc:"json",".babelrc":"json","babelrc.json":"json",".babelrc.json":"json","babelrc.js":"javascript",".babelrc.js":"javascript"}[t]||"plaintext"}const fot=({before:e,after:t,language:n})=>h.jsxs("div",{className:"grid grid-cols-2 gap-4 min-h-[200px] max-h-[500px]",children:[h.jsxs("div",{className:"rounded-lg border border-neutral-700 bg-neutral-900/50 overflow-hidden flex flex-col",children:[h.jsx("div",{className:"bg-neutral-800/80 px-4 py-2 border-b border-neutral-700",children:h.jsx("h3",{className:"text-sm font-semibold text-neutral-300",children:"Before"})}),h.jsx("div",{className:"flex-1 overflow-auto",children:h.jsx(aI,{code:e,language:n,showLineNumbers:!0,isDarkMode:!0,className:"!bg-transparent !p-0 text-sm"})})]}),h.jsxs("div",{className:"rounded-lg border border-neutral-700 bg-neutral-900/50 overflow-hidden flex flex-col",children:[h.jsx("div",{className:"bg-neutral-800/80 px-4 py-2 border-b border-neutral-700",children:h.jsx("h3",{className:"text-sm font-semibold text-neutral-300",children:"After"})}),h.jsx("div",{className:"flex-1 overflow-auto",children:h.jsx(aI,{code:t,language:n,showLineNumbers:!0,isDarkMode:!0,className:"!bg-transparent !p-0 text-sm"})})]})]}),hot=({diff:e,language:t})=>{const n=e.diffs.map(([r,s])=>s.split(`
`).filter(i=>i).map(i=>({type:r,text:i}))).flat();return h.jsx("div",{className:"rounded-lg border border-neutral-700 bg-neutral-900/50 overflow-auto max-h-[500px]",children:h.jsx("div",{className:"text-sm font-mono",children:n.map((r,s)=>h.jsxs("div",{className:`px-4 py-1 ${r.type===1?"bg-green-900/20 text-green-200":r.type===-1?"bg-red-900/20 text-red-200":"text-neutral-400"}`,children:[h.jsx("span",{className:"mr-3 text-neutral-600",children:r.type===1?"+":r.type===-1?"-":" "}),r.text]},s))})})},pot=({patch:e,onApprove:t,onReject:n,onEdit:r,projectPath:s="default",isOpen:o,totalPatches:i=0,currentPatchIndex:a=0})=>{const[l,c]=x.useState(!1),[u,f]=x.useState(!1),m=e?uot(e.originalContent,e.patchedContent):null,g=e?dot(e.filePath):"plaintext";x.useEffect(()=>{if(!o||!e)return;const k=R=>{(R.metaKey||R.ctrlKey)&&R.key==="y"&&(R.preventDefault(),y()),(R.metaKey||R.ctrlKey)&&R.key==="n"&&(R.preventDefault(),v()),(R.metaKey||R.ctrlKey)&&R.key==="e"&&(R.preventDefault(),w()),R.key==="Escape"&&(R.preventDefault(),v())};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[o,e]);const y=x.useCallback(()=>{e&&(f(!0),HA(s,e.filePath,"accept","code-change"),setTimeout(()=>{t(e),f(!1)},300))},[e,t,s]),v=x.useCallback(()=>{e&&(f(!0),HA(s,e.filePath,"reject","code-change"),setTimeout(()=>{n(e),f(!1)},300))},[e,n,s]),w=x.useCallback(()=>{e&&(f(!0),HA(s,e.filePath,"edit","code-change"),setTimeout(()=>{r(e),f(!1)},300))},[e,r,s]);if(!o||!e||!m)return null;e.filePath.split("/").pop();const _=e.patchedContent.length,S=m.diffs.filter(([k])=>k!==0).length;return h.jsx("div",{className:`fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 transition-opacity duration-300 ${u?"opacity-0":"opacity-100"}`,children:h.jsxs("div",{className:`bg-neutral-900 border border-neutral-700 rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col transition-all duration-300 ${u?"scale-95 opacity-0":"scale-100 opacity-100"}`,children:[h.jsxs("div",{className:"border-b border-neutral-700 bg-neutral-800/50 px-6 py-4 flex items-start justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-semibold text-white mb-1",children:"Review Code Change"}),h.jsxs("p",{className:"text-sm text-neutral-400",children:["File: ",h.jsx("code",{className:"bg-neutral-800 px-2 py-1 rounded",children:e.filePath})]}),h.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:[S," lines changed  ",_," bytes",i>1&&`  Patch ${a+1} of ${i}`]})]}),i>1&&h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[a+1,"/",i]}),h.jsx("p",{className:"text-xs text-neutral-500",children:"remaining patches"})]})]}),h.jsxs("div",{className:"border-b border-neutral-700 bg-neutral-900/30 px-6 py-2 flex items-center gap-2",children:[h.jsx("button",{onClick:()=>c(!1),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${l?"text-neutral-400 hover:text-neutral-200":"bg-blue-600 text-white"}`,children:"Side-by-Side"}),h.jsx("button",{onClick:()=>c(!0),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${l?"bg-blue-600 text-white":"text-neutral-400 hover:text-neutral-200"}`,children:"Inline"})]}),h.jsx("div",{className:"flex-1 overflow-auto p-6",children:l?h.jsx(hot,{diff:m,language:g}):h.jsx(fot,{before:e.originalContent,after:e.patchedContent,language:g})}),h.jsxs("div",{className:"border-t border-neutral-700 bg-neutral-800/50 px-6 py-4 flex items-center justify-between gap-3",children:[h.jsx("div",{className:"text-xs text-neutral-500",children:h.jsx("p",{children:"Y = Accept  N = Reject  E = Edit  ESC = Reject"})}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:v,className:"px-4 py-2 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600/30 transition-colors flex items-center gap-2 font-medium",children:[h.jsx(qr,{className:"w-4 h-4"}),"Reject"]}),h.jsxs("button",{onClick:w,className:"px-4 py-2 rounded-lg bg-amber-600/20 text-amber-400 hover:bg-amber-600/30 transition-colors flex items-center gap-2 font-medium",children:[h.jsx(X_,{className:"w-4 h-4"}),"Edit"]}),h.jsxs("button",{onClick:y,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-500 transition-colors flex items-center gap-2 font-medium shadow-lg shadow-green-600/30",children:[h.jsx(Cs,{className:"w-4 h-4"}),"Accept"]})]})]})]})})};var bie="vercel.ai.error",mot=Symbol.for(bie),yie,got=class vie extends Error{constructor({name:t,message:n,cause:r}){super(n),this[yie]=!0,this.name=t,this.cause=r}static isInstance(t){return vie.hasMarker(t,bie)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};yie=mot;var Cr=got,xie="AI_APICallError",wie=`vercel.ai.error.${xie}`,bot=Symbol.for(wie),Eie,Ba=class extends Cr{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:s,responseBody:o,cause:i,isRetryable:a=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:xie,message:e,cause:i}),this[Eie]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=s,this.responseBody=o,this.isRetryable=a,this.data=l}static isInstance(e){return Cr.hasMarker(e,wie)}};Eie=bot;var _ie="AI_EmptyResponseBodyError",Sie=`vercel.ai.error.${_ie}`,yot=Symbol.for(Sie),Tie,vot=class extends Cr{constructor({message:e="Empty response body"}={}){super({name:_ie,message:e}),this[Tie]=!0}static isInstance(e){return Cr.hasMarker(e,Sie)}};Tie=yot;function Kw(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var Cie="AI_InvalidArgumentError",kie=`vercel.ai.error.${Cie}`,xot=Symbol.for(kie),Aie,Nie=class extends Cr{constructor({message:t,cause:n,argument:r}){super({name:Cie,message:t,cause:n}),this[Aie]=!0,this.argument=r}static isInstance(t){return Cr.hasMarker(t,kie)}};Aie=xot;var Iie="AI_InvalidPromptError",Rie=`vercel.ai.error.${Iie}`,wot=Symbol.for(Rie),Mie,e1=class extends Cr{constructor({prompt:e,message:t,cause:n}){super({name:Iie,message:`Invalid prompt: ${t}`,cause:n}),this[Mie]=!0,this.prompt=e}static isInstance(e){return Cr.hasMarker(e,Rie)}};Mie=wot;var Oie="AI_JSONParseError",Die=`vercel.ai.error.${Oie}`,Eot=Symbol.for(Die),Pie,l4=class extends Cr{constructor({text:e,cause:t}){super({name:Oie,message:`JSON parsing failed: Text: ${e}.
Error message: ${Kw(t)}`,cause:t}),this[Pie]=!0,this.text=e}static isInstance(e){return Cr.hasMarker(e,Die)}};Pie=Eot;var Lie="AI_LoadAPIKeyError",$ie=`vercel.ai.error.${Lie}`,_ot=Symbol.for($ie),Fie,g_=class extends Cr{constructor({message:e}){super({name:Lie,message:e}),this[Fie]=!0}static isInstance(e){return Cr.hasMarker(e,$ie)}};Fie=_ot;var Bie="AI_TooManyEmbeddingValuesForCallError",zie=`vercel.ai.error.${Bie}`,Sot=Symbol.for(zie),jie,Tot=class extends Cr{constructor(e){super({name:Bie,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[jie]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Cr.hasMarker(e,zie)}};jie=Sot;var Uie="AI_TypeValidationError",Hie=`vercel.ai.error.${Uie}`,Cot=Symbol.for(Hie),Vie,kot=class VI extends Cr{constructor({value:t,cause:n}){super({name:Uie,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Kw(n)}`,cause:n}),this[Vie]=!0,this.value=t}static isInstance(t){return Cr.hasMarker(t,Hie)}static wrap({value:t,cause:n}){return VI.isInstance(n)&&n.value===t?n:new VI({value:t,cause:n})}};Vie=Cot;var ew=kot,qie="AI_UnsupportedFunctionalityError",Gie=`vercel.ai.error.${qie}`,Aot=Symbol.for(Gie),Wie,H_=class extends Cr{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:qie,message:t}),this[Wie]=!0,this.functionality=e}static isInstance(e){return Cr.hasMarker(e,Gie)}};Wie=Aot;class NH extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function VA(e){}function Not(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=VA,onError:n=VA,onRetry:r=VA,onComment:s}=e;let o="",i=!0,a,l="",c="";function u(v){const w=i?v.replace(/^\xEF\xBB\xBF/,""):v,[_,S]=Iot(`${o}${w}`);for(const k of _)f(k);o=S,i=!1}function f(v){if(v===""){g();return}if(v.startsWith(":")){s&&s(v.slice(v.startsWith(": ")?2:1));return}const w=v.indexOf(":");if(w!==-1){const _=v.slice(0,w),S=v[w+1]===" "?2:1,k=v.slice(w+S);m(_,k,v);return}m(v,"",v)}function m(v,w,_){switch(v){case"event":c=w;break;case"data":l=`${l}${w}
`;break;case"id":a=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?r(parseInt(w,10)):n(new NH(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:_}));break;default:n(new NH(`Unknown field "${v.length>20?`${v.slice(0,20)}`:v}"`,{type:"unknown-field",field:v,value:w,line:_}));break}}function g(){l.length>0&&t({id:a,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",c=""}function y(v={}){o&&v.consume&&f(o),i=!0,a=void 0,l="",c="",o=""}return{feed:u,reset:y}}function Iot(e){const t=[];let n="",r=0;for(;r<e.length;){const s=e.indexOf("\r",r),o=e.indexOf(`
`,r);let i=-1;if(s!==-1&&o!==-1?i=Math.min(s,o):s!==-1?s===e.length-1?i=-1:i=s:o!==-1&&(i=o),i===-1){n=e.slice(r);break}else{const a=e.slice(r,i);t.push(a),r=i+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class Rot extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let s;super({start(o){s=Not({onEvent:i=>{o.enqueue(i)},onError(i){t==="terminate"?o.error(i):typeof t=="function"&&t(i)},onRetry:n,onComment:r})},transform(o){s.feed(o)}})}}const Mot=it("ZodISODateTime",(e,t)=>{ANe.init(e,t),Oo.init(e,t)});function Oot(e){return P6e(Mot,e)}const Dot=it("ZodISODate",(e,t)=>{NNe.init(e,t),Oo.init(e,t)});function Pot(e){return L6e(Dot,e)}const Lot=it("ZodISOTime",(e,t)=>{INe.init(e,t),Oo.init(e,t)});function $ot(e){return $6e(Lot,e)}const Fot=it("ZodISODuration",(e,t)=>{RNe.init(e,t),Oo.init(e,t)});function Bot(e){return F6e(Fot,e)}const zot=(e,t)=>{q8.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>SAe(e,n)},flatten:{value:n=>_Ae(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},s3=it("ZodError",zot,{Parent:Error}),jot=gJ(s3),Uot=bJ(s3),Hot=yJ(s3),Yie=vJ(s3),fo=it("ZodType",(e,t)=>(qs.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>Dm(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>jot(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>Hot(e,n,r),e.parseAsync=async(n,r)=>Uot(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>Yie(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(jit(n,r)),e.superRefine=n=>e.check(Uit(n)),e.overwrite=n=>e.check(Iw(n)),e.optional=()=>MH(e),e.nullable=()=>OH(e),e.nullish=()=>MH(OH(e)),e.nonoptional=n=>Rit(e,n),e.array=()=>Br(e),e.or=n=>Ua([e,n]),e.and=n=>wit(e,n),e.transform=n=>DH(e,Tit(n)),e.default=n=>Ait(e,n),e.prefault=n=>Iit(e,n),e.catch=n=>Oit(e,n),e.pipe=n=>DH(e,n),e.readonly=()=>Lit(e),e.describe=n=>{const r=e.clone();return pv.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){var n;return(n=pv.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return pv.get(e);const r=e.clone();return pv.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Kie=it("_ZodString",(e,t)=>{G8.init(e,t),fo.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(G6e(...r)),e.includes=(...r)=>e.check(K6e(...r)),e.startsWith=(...r)=>e.check(Z6e(...r)),e.endsWith=(...r)=>e.check(J6e(...r)),e.min=(...r)=>e.check(LS(...r)),e.max=(...r)=>e.check(IJ(...r)),e.length=(...r)=>e.check(RJ(...r)),e.nonempty=(...r)=>e.check(LS(1,...r)),e.lowercase=r=>e.check(W6e(r)),e.uppercase=r=>e.check(Y6e(r)),e.trim=()=>e.check(Q6e()),e.normalize=(...r)=>e.check(X6e(...r)),e.toLowerCase=()=>e.check(eIe()),e.toUpperCase=()=>e.check(tIe())}),Vot=it("ZodString",(e,t)=>{G8.init(e,t),Kie.init(e,t),e.email=n=>e.check(p6e(qot,n)),e.url=n=>e.check(v6e(Got,n)),e.jwt=n=>e.check(D6e(ait,n)),e.emoji=n=>e.check(x6e(Wot,n)),e.guid=n=>e.check(iF(IH,n)),e.uuid=n=>e.check(m6e(b_,n)),e.uuidv4=n=>e.check(g6e(b_,n)),e.uuidv6=n=>e.check(b6e(b_,n)),e.uuidv7=n=>e.check(y6e(b_,n)),e.nanoid=n=>e.check(w6e(Yot,n)),e.guid=n=>e.check(iF(IH,n)),e.cuid=n=>e.check(E6e(Kot,n)),e.cuid2=n=>e.check(_6e(Zot,n)),e.ulid=n=>e.check(S6e(Jot,n)),e.base64=n=>e.check(R6e(sit,n)),e.base64url=n=>e.check(M6e(oit,n)),e.xid=n=>e.check(T6e(Xot,n)),e.ksuid=n=>e.check(C6e(Qot,n)),e.ipv4=n=>e.check(k6e(eit,n)),e.ipv6=n=>e.check(A6e(tit,n)),e.cidrv4=n=>e.check(N6e(nit,n)),e.cidrv6=n=>e.check(I6e(rit,n)),e.e164=n=>e.check(O6e(iit,n)),e.datetime=n=>e.check(Oot(n)),e.date=n=>e.check(Pot(n)),e.time=n=>e.check($ot(n)),e.duration=n=>e.check(Bot(n))});function Ft(e){return h6e(Vot,e)}const Oo=it("ZodStringFormat",(e,t)=>{yo.init(e,t),Kie.init(e,t)}),qot=it("ZodEmail",(e,t)=>{vNe.init(e,t),Oo.init(e,t)}),IH=it("ZodGUID",(e,t)=>{bNe.init(e,t),Oo.init(e,t)}),b_=it("ZodUUID",(e,t)=>{yNe.init(e,t),Oo.init(e,t)}),Got=it("ZodURL",(e,t)=>{xNe.init(e,t),Oo.init(e,t)}),Wot=it("ZodEmoji",(e,t)=>{wNe.init(e,t),Oo.init(e,t)}),Yot=it("ZodNanoID",(e,t)=>{ENe.init(e,t),Oo.init(e,t)}),Kot=it("ZodCUID",(e,t)=>{_Ne.init(e,t),Oo.init(e,t)}),Zot=it("ZodCUID2",(e,t)=>{SNe.init(e,t),Oo.init(e,t)}),Jot=it("ZodULID",(e,t)=>{TNe.init(e,t),Oo.init(e,t)}),Xot=it("ZodXID",(e,t)=>{CNe.init(e,t),Oo.init(e,t)}),Qot=it("ZodKSUID",(e,t)=>{kNe.init(e,t),Oo.init(e,t)}),eit=it("ZodIPv4",(e,t)=>{MNe.init(e,t),Oo.init(e,t)}),tit=it("ZodIPv6",(e,t)=>{ONe.init(e,t),Oo.init(e,t)}),nit=it("ZodCIDRv4",(e,t)=>{DNe.init(e,t),Oo.init(e,t)}),rit=it("ZodCIDRv6",(e,t)=>{PNe.init(e,t),Oo.init(e,t)}),sit=it("ZodBase64",(e,t)=>{LNe.init(e,t),Oo.init(e,t)}),oit=it("ZodBase64URL",(e,t)=>{FNe.init(e,t),Oo.init(e,t)}),iit=it("ZodE164",(e,t)=>{BNe.init(e,t),Oo.init(e,t)}),ait=it("ZodJWT",(e,t)=>{jNe.init(e,t),Oo.init(e,t)}),Zie=it("ZodNumber",(e,t)=>{kJ.init(e,t),fo.init(e,t),e.gt=(r,s)=>e.check(lF(r,s)),e.gte=(r,s)=>e.check(rk(r,s)),e.min=(r,s)=>e.check(rk(r,s)),e.lt=(r,s)=>e.check(aF(r,s)),e.lte=(r,s)=>e.check(nk(r,s)),e.max=(r,s)=>e.check(nk(r,s)),e.int=r=>e.check(RH(r)),e.safe=r=>e.check(RH(r)),e.positive=r=>e.check(lF(0,r)),e.nonnegative=r=>e.check(rk(0,r)),e.negative=r=>e.check(aF(0,r)),e.nonpositive=r=>e.check(nk(0,r)),e.multipleOf=(r,s)=>e.check(cF(r,s)),e.step=(r,s)=>e.check(cF(r,s)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Qs(e){return B6e(Zie,e)}const lit=it("ZodNumberFormat",(e,t)=>{UNe.init(e,t),Zie.init(e,t)});function RH(e){return z6e(lit,e)}const cit=it("ZodBoolean",(e,t)=>{HNe.init(e,t),fo.init(e,t)});function lm(e){return j6e(cit,e)}const uit=it("ZodNull",(e,t)=>{VNe.init(e,t),fo.init(e,t)});function dit(e){return U6e(uit,e)}const fit=it("ZodAny",(e,t)=>{qNe.init(e,t),fo.init(e,t)});function h0(){return H6e(fit)}const hit=it("ZodUnknown",(e,t)=>{GNe.init(e,t),fo.init(e,t)});function P0(){return V6e(hit)}const pit=it("ZodNever",(e,t)=>{WNe.init(e,t),fo.init(e,t)});function mit(e){return q6e(pit,e)}const git=it("ZodArray",(e,t)=>{YNe.init(e,t),fo.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(LS(n,r)),e.nonempty=n=>e.check(LS(1,n)),e.max=(n,r)=>e.check(IJ(n,r)),e.length=(n,r)=>e.check(RJ(n,r)),e.unwrap=()=>e.element});function Br(e,t){return nIe(git,e,t)}const bit=it("ZodObject",(e,t)=>{KNe.init(e,t),fo.init(e,t),ys(e,"shape",()=>t.shape),e.keyof=()=>dl(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:P0()}),e.loose=()=>e.clone({...e._zod.def,catchall:P0()}),e.strict=()=>e.clone({...e._zod.def,catchall:mit()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>vAe(e,n),e.merge=n=>xAe(e,n),e.pick=n=>bAe(e,n),e.omit=n=>yAe(e,n),e.partial=(...n)=>wAe(Xie,e,n[0]),e.required=(...n)=>EAe(Qie,e,n[0])});function Gt(e,t){const n={type:"object",get shape(){return H8(this,"shape",{...e}),this.shape},...kn(t)};return new bit(n)}const Jie=it("ZodUnion",(e,t)=>{AJ.init(e,t),fo.init(e,t),e.options=t.options});function Ua(e,t){return new Jie({type:"union",options:e,...kn(t)})}const yit=it("ZodDiscriminatedUnion",(e,t)=>{Jie.init(e,t),ZNe.init(e,t)});function vit(e,t,n){return new yit({type:"union",options:t,discriminator:e,...kn(n)})}const xit=it("ZodIntersection",(e,t)=>{JNe.init(e,t),fo.init(e,t)});function wit(e,t){return new xit({type:"intersection",left:e,right:t})}const Eit=it("ZodRecord",(e,t)=>{XNe.init(e,t),fo.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Sm(e,t,n){return new Eit({type:"record",keyType:e,valueType:t,...kn(n)})}const qI=it("ZodEnum",(e,t)=>{QNe.init(e,t),fo.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,s)=>{const o={};for(const i of r)if(n.has(i))o[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new qI({...t,checks:[],...kn(s),entries:o})},e.exclude=(r,s)=>{const o={...t.entries};for(const i of r)if(n.has(i))delete o[i];else throw new Error(`Key ${i} not found in enum`);return new qI({...t,checks:[],...kn(s),entries:o})}});function dl(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new qI({type:"enum",entries:n,...kn(t)})}const _it=it("ZodLiteral",(e,t)=>{e6e.init(e,t),fo.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function ti(e,t){return new _it({type:"literal",values:Array.isArray(e)?e:[e],...kn(t)})}const Sit=it("ZodTransform",(e,t)=>{t6e.init(e,t),fo.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=o=>{if(typeof o=="string")n.issues.push(kx(o,n.value,t));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!0),n.issues.push(kx(i))}};const s=t.transform(n.value,n);return s instanceof Promise?s.then(o=>(n.value=o,n)):(n.value=s,n)}});function Tit(e){return new Sit({type:"transform",transform:e})}const Xie=it("ZodOptional",(e,t)=>{n6e.init(e,t),fo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function MH(e){return new Xie({type:"optional",innerType:e})}const Cit=it("ZodNullable",(e,t)=>{r6e.init(e,t),fo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function OH(e){return new Cit({type:"nullable",innerType:e})}const kit=it("ZodDefault",(e,t)=>{s6e.init(e,t),fo.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Ait(e,t){return new kit({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Nit=it("ZodPrefault",(e,t)=>{o6e.init(e,t),fo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Iit(e,t){return new Nit({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Qie=it("ZodNonOptional",(e,t)=>{i6e.init(e,t),fo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Rit(e,t){return new Qie({type:"nonoptional",innerType:e,...kn(t)})}const Mit=it("ZodCatch",(e,t)=>{a6e.init(e,t),fo.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Oit(e,t){return new Mit({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Dit=it("ZodPipe",(e,t)=>{l6e.init(e,t),fo.init(e,t),e.in=t.in,e.out=t.out});function DH(e,t){return new Dit({type:"pipe",in:e,out:t})}const Pit=it("ZodReadonly",(e,t)=>{c6e.init(e,t),fo.init(e,t)});function Lit(e){return new Pit({type:"readonly",innerType:e})}const $it=it("ZodLazy",(e,t)=>{u6e.init(e,t),fo.init(e,t),e.unwrap=()=>e._zod.def.getter()});function Fit(e){return new $it({type:"lazy",getter:e})}const r9=it("ZodCustom",(e,t)=>{d6e.init(e,t),fo.init(e,t)});function Bit(e){const t=new vl({check:"custom"});return t._zod.check=e,t}function zit(e,t){return rIe(r9,e??(()=>!0),t)}function jit(e,t={}){return sIe(r9,e,t)}function Uit(e){const t=Bit(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(kx(r,n.value,t._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),n.issues.push(kx(s))}},e(n.value,n)));return t}function c4(e,t={error:`Input not instance of ${e.name}`}){const n=new r9({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...kn(t)});return n._zod.bag.Class=e,n}var eae={};function L0(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}async function Hit(e,t){if(e==null)return Promise.resolve();const n=t==null?void 0:t.abortSignal;return new Promise((r,s)=>{if(n!=null&&n.aborted){s(PH());return}const o=setTimeout(()=>{i(),r()},e),i=()=>{clearTimeout(o),n==null||n.removeEventListener("abort",a)},a=()=>{i(),s(PH())};n==null||n.addEventListener("abort",a)})}function PH(){return new DOMException("Delay was aborted","AbortError")}function Zw(e){return Object.fromEntries([...e.headers])}var Jw=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=()=>{const o=n.length,i=new Array(t);for(let a=0;a<t;a++)i[a]=n[Math.random()*o|0];return i.join("")};if(e==null)return s;if(n.includes(r))throw new Nie({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${s()}`},tae=Jw();function nae(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function pb(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var Vit=["fetch failed","failed to fetch"];function rae({error:e,url:t,requestBodyValues:n}){if(pb(e))return e;if(e instanceof TypeError&&Vit.includes(e.message.toLowerCase())){const r=e.cause;if(r!=null)return new Ba({message:`Cannot connect to API: ${r.message}`,cause:r,url:t,requestBodyValues:n,isRetryable:!0})}return e}function s9(e=globalThis){var t,n,r;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(r=(n=e.process)==null?void 0:n.versions)!=null&&r.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function qit(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((n,r)=>{t[r.toLowerCase()]=n});else{Array.isArray(e)||(e=Object.entries(e));for(const[n,r]of e)r!=null&&(t[n.toLowerCase()]=r)}return t}function jb(e,...t){const n=new Headers(qit(e)),r=n.get("user-agent")||"";return n.set("user-agent",[r,...t].filter(Boolean).join(" ")),Object.fromEntries(n.entries())}var sae="3.0.18",Git=()=>globalThis.fetch,LH=async({url:e,headers:t={},successfulResponseHandler:n,failedResponseHandler:r,abortSignal:s,fetch:o=Git()})=>{try{const i=await o(e,{method:"GET",headers:jb(t,`ai-sdk/provider-utils/${sae}`,s9()),signal:s}),a=Zw(i);if(!i.ok){let l;try{l=await r({response:i,url:e,requestBodyValues:{}})}catch(c){throw pb(c)||Ba.isInstance(c)?c:new Ba({message:"Failed to process error response",cause:c,statusCode:i.status,url:e,responseHeaders:a,requestBodyValues:{}})}throw l.value}try{return await n({response:i,url:e,requestBodyValues:{}})}catch(l){throw l instanceof Error&&(pb(l)||Ba.isInstance(l))?l:new Ba({message:"Failed to process successful response",cause:l,statusCode:i.status,url:e,responseHeaders:a,requestBodyValues:{}})}}catch(i){throw rae({error:i,url:e,requestBodyValues:{}})}};function Wit({mediaType:e,url:t,supportedUrls:n}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(n).map(([r,s])=>{const o=r.toLowerCase();return o==="*"||o==="*/*"?{mediaTypePrefix:"",regexes:s}:{mediaTypePrefix:o.replace(/\*/,""),regexes:s}}).filter(({mediaTypePrefix:r})=>e.startsWith(r)).flatMap(({regexes:r})=>r).some(r=>r.test(t))}function Yit({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new g_({message:`${r} API key must be a string.`});if(typeof process>"u")throw new g_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=eae[t],e==null)throw new g_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new g_({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function V_({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=eae[t],!(e==null||typeof e!="string")))return e}var Kit=/"__proto__"\s*:/,Zit=/"constructor"\s*:/;function $H(e){const t=JSON.parse(e);return t===null||typeof t!="object"||Kit.test(e)===!1&&Zit.test(e)===!1?t:Jit(t)}function Jit(e){let t=[e];for(;t.length;){const n=t;t=[];for(const r of n){if(Object.prototype.hasOwnProperty.call(r,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const s in r){const o=r[s];o&&typeof o=="object"&&t.push(o)}}}return e}function oae(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return $H(e)}try{return $H(e)}finally{Error.stackTraceLimit=t}}var u4=Symbol.for("vercel.ai.validator");function Xit(e){return{[u4]:!0,validate:e}}function Qit(e){return typeof e=="object"&&e!==null&&u4 in e&&e[u4]===!0&&"validate"in e}function Ub(e){let t;return()=>(t==null&&(t=e()),t)}function eat(e){return Qit(e)?e:typeof e=="function"?e():tat(e)}function tat(e){return Xit(async t=>{const n=await e["~standard"].validate(t);return n.issues==null?{success:!0,value:n.value}:{success:!1,error:new ew({value:t,cause:n.issues})}})}async function nat({value:e,schema:t}){const n=await Qf({value:e,schema:t});if(!n.success)throw ew.wrap({value:e,cause:n.error});return n.value}async function Qf({value:e,schema:t}){const n=eat(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};const r=await n.validate(e);return r.success?{success:!0,value:r.value,rawValue:e}:{success:!1,error:ew.wrap({value:e,cause:r.error}),rawValue:e}}catch(r){return{success:!1,error:ew.wrap({value:e,cause:r}),rawValue:e}}}async function rat({text:e,schema:t}){try{const n=oae(e);return t==null?n:nat({value:n,schema:t})}catch(n){throw l4.isInstance(n)||ew.isInstance(n)?n:new l4({text:e,cause:n})}}async function Tm({text:e,schema:t}){try{const n=oae(e);return t==null?{success:!0,value:n,rawValue:n}:await Qf({value:n,schema:t})}catch(n){return{success:!1,error:l4.isInstance(n)?n:new l4({text:e,cause:n}),rawValue:void 0}}}function sat({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new Rot).pipeThrough(new TransformStream({async transform({data:n},r){n!=="[DONE]"&&r.enqueue(await Tm({text:n,schema:t}))}}))}async function o9({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=await Qf({value:t[e],schema:n});if(!r.success)throw new Nie({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var oat=()=>globalThis.fetch,eh=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:o,fetch:i})=>iat({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:o,fetch:i}),iat=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:o,fetch:i=oat()})=>{try{const a=await i(e,{method:"POST",headers:jb(t,`ai-sdk/provider-utils/${sae}`,s9()),body:n.content,signal:o}),l=Zw(a);if(!a.ok){let c;try{c=await s({response:a,url:e,requestBodyValues:n.values})}catch(u){throw pb(u)||Ba.isInstance(u)?u:new Ba({message:"Failed to process error response",cause:u,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(pb(c)||Ba.isInstance(c))?c:new Ba({message:"Failed to process successful response",cause:c,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(a){throw rae({error:a,url:e,requestBodyValues:n.values})}};function o3({id:e,name:t,inputSchema:n}){return({execute:r,outputSchema:s,toModelOutput:o,onInputStart:i,onInputDelta:a,onInputAvailable:l,...c})=>({type:"provider-defined",id:e,name:t,args:c,inputSchema:n,outputSchema:s,execute:r,toModelOutput:o,onInputStart:i,onInputDelta:a,onInputAvailable:l})}function aat({id:e,name:t,inputSchema:n,outputSchema:r}){return({execute:s,toModelOutput:o,onInputStart:i,onInputDelta:a,onInputAvailable:l,...c})=>({type:"provider-defined",id:e,name:t,args:c,inputSchema:n,outputSchema:r,execute:s,toModelOutput:o,onInputStart:i,onInputDelta:a,onInputAvailable:l})}async function ml(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Cm=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:s,requestBodyValues:o})=>{const i=await r.text(),a=Zw(r);if(i.trim()==="")return{responseHeaders:a,value:new Ba({message:r.statusText,url:s,requestBodyValues:o,statusCode:r.status,responseHeaders:a,responseBody:i,isRetryable:n==null?void 0:n(r)})};try{const l=await rat({text:i,schema:e});return{responseHeaders:a,value:new Ba({message:t(l),url:s,requestBodyValues:o,statusCode:r.status,responseHeaders:a,responseBody:i,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:a,value:new Ba({message:r.statusText,url:s,requestBodyValues:o,statusCode:r.status,responseHeaders:a,responseBody:i,isRetryable:n==null?void 0:n(r)})}}},iae=e=>async({response:t})=>{const n=Zw(t);if(t.body==null)throw new vot({});return{responseHeaders:n,value:sat({stream:t.body,schema:e})}},th=e=>async({response:t,url:n,requestBodyValues:r})=>{const s=await t.text(),o=await Tm({text:s,schema:e}),i=Zw(t);if(!o.success)throw new Ba({message:"Invalid JSON response",cause:o.error,statusCode:t.status,responseHeaders:i,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:i,value:o.value,rawValue:o.rawValue}},lat=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},cat=Symbol("Let zodToJsonSchema decide on which parser to use"),FH={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},uat=e=>typeof e=="string"?{...FH,name:e}:{...FH,...e};function nc(){return{}}function dat(e,t){var n,r,s;const o={type:"array"};return(n=e.type)!=null&&n._def&&((s=(r=e.type)==null?void 0:r._def)==null?void 0:s.typeName)!==Bt.ZodAny&&(o.items=ks(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(o.minItems=e.minLength.value),e.maxLength&&(o.maxItems=e.maxLength.value),e.exactLength&&(o.minItems=e.exactLength.value,o.maxItems=e.exactLength.value),o}function fat(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function hat(){return{type:"boolean"}}function aae(e,t){return ks(e.type._def,t)}var pat=(e,t)=>ks(e.innerType._def,t);function lae(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,o)=>lae(e,t,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return mat(e)}}var mat=e=>{const t={type:"integer",format:"unix-time"};for(const n of e.checks)switch(n.kind){case"min":t.minimum=n.value;break;case"max":t.maximum=n.value;break}return t};function gat(e,t){return{...ks(e.innerType._def,t),default:e.defaultValue()}}function bat(e,t){return t.effectStrategy==="input"?ks(e.schema._def,t):nc()}function yat(e){return{type:"string",enum:Array.from(e.values)}}var vat=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function xat(e,t){const n=[ks(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),ks(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(s=>!!s),r=[];return n.forEach(s=>{if(vat(s))r.push(...s.allOf);else{let o=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:i,...a}=s;o=a}r.push(o)}}),r.length?{allOf:r}:void 0}function wat(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var qA=void 0,ru={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(qA===void 0&&(qA=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),qA),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function cae(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value;break;case"max":n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"email":switch(t.emailStrategy){case"format:email":su(n,"email",r.message,t);break;case"format:idn-email":su(n,"idn-email",r.message,t);break;case"pattern:zod":Oa(n,ru.email,r.message,t);break}break;case"url":su(n,"uri",r.message,t);break;case"uuid":su(n,"uuid",r.message,t);break;case"regex":Oa(n,r.regex,r.message,t);break;case"cuid":Oa(n,ru.cuid,r.message,t);break;case"cuid2":Oa(n,ru.cuid2,r.message,t);break;case"startsWith":Oa(n,RegExp(`^${GA(r.value,t)}`),r.message,t);break;case"endsWith":Oa(n,RegExp(`${GA(r.value,t)}$`),r.message,t);break;case"datetime":su(n,"date-time",r.message,t);break;case"date":su(n,"date",r.message,t);break;case"time":su(n,"time",r.message,t);break;case"duration":su(n,"duration",r.message,t);break;case"length":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"includes":{Oa(n,RegExp(GA(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&su(n,"ipv4",r.message,t),r.version!=="v4"&&su(n,"ipv6",r.message,t);break}case"base64url":Oa(n,ru.base64url,r.message,t);break;case"jwt":Oa(n,ru.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&Oa(n,ru.ipv4Cidr,r.message,t),r.version!=="v4"&&Oa(n,ru.ipv6Cidr,r.message,t);break}case"emoji":Oa(n,ru.emoji(),r.message,t);break;case"ulid":{Oa(n,ru.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{su(n,"binary",r.message,t);break}case"contentEncoding:base64":{n.contentEncoding="base64";break}case"pattern:zod":{Oa(n,ru.base64,r.message,t);break}}break}case"nanoid":Oa(n,ru.nanoid,r.message,t)}return n}function GA(e,t){return t.patternStrategy==="escape"?_at(e):e}var Eat=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function _at(e){let t="";for(let n=0;n<e.length;n++)Eat.has(e[n])||(t+="\\"),t+=e[n];return t}function su(e,t,n,r){var s;e.format||(s=e.anyOf)!=null&&s.some(o=>o.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):e.format=t}function Oa(e,t,n,r){var s;e.pattern||(s=e.allOf)!=null&&s.some(o=>o.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:BH(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):e.pattern=BH(t,r)}function BH(e,t){var n;if(!t.applyRegexFlags||!e.flags)return e.source;const r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},s=r.i?e.source.toLowerCase():e.source;let o="",i=!1,a=!1,l=!1;for(let c=0;c<s.length;c++){if(i){o+=s[c],i=!1;continue}if(r.i){if(a){if(s[c].match(/[a-z]/)){l?(o+=s[c],o+=`${s[c-2]}-${s[c]}`.toUpperCase(),l=!1):s[c+1]==="-"&&((n=s[c+2])!=null&&n.match(/[a-z]/))?(o+=s[c],l=!0):o+=`${s[c]}${s[c].toUpperCase()}`;continue}}else if(s[c].match(/[a-z]/)){o+=`[${s[c]}${s[c].toUpperCase()}]`;continue}}if(r.m){if(s[c]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(s[c]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&s[c]==="."){o+=a?`${s[c]}\r
`:`[${s[c]}\r
]`;continue}o+=s[c],s[c]==="\\"?i=!0:a&&s[c]==="]"?a=!1:!a&&s[c]==="["&&(a=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}function uae(e,t){var n,r,s,o,i,a;const l={type:"object",additionalProperties:(n=ks(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?n:t.allowedAdditionalProperties};if(((r=e.keyType)==null?void 0:r._def.typeName)===Bt.ZodString&&((s=e.keyType._def.checks)!=null&&s.length)){const{type:c,...u}=cae(e.keyType._def,t);return{...l,propertyNames:u}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===Bt.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===Bt.ZodBranded&&e.keyType._def.type._def.typeName===Bt.ZodString&&((a=e.keyType._def.type._def.checks)!=null&&a.length)){const{type:c,...u}=aae(e.keyType._def,t);return{...l,propertyNames:u}}}return l}function Sat(e,t){if(t.mapStrategy==="record")return uae(e,t);const n=ks(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||nc(),r=ks(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||nc();return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Tat(e){const t=e.values,r=Object.keys(e.values).filter(o=>typeof t[t[o]]!="number").map(o=>t[o]),s=Array.from(new Set(r.map(o=>typeof o)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function Cat(){return{not:nc()}}function kat(){return{type:"null"}}var GI={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Aat(e,t){const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in GI&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,o)=>{const i=GI[o._def.typeName];return i&&!s.includes(i)?[...s,i]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,o)=>{const i=typeof o._def.value;switch(i){case"string":case"number":case"boolean":return[...s,i];case"bigint":return[...s,"integer"];case"object":if(o._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((o,i,a)=>a.indexOf(o)===i);return{type:s.length>1?s:s[0],enum:n.reduce((o,i)=>o.includes(i._def.value)?o:[...o,i._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(o=>!r.includes(o))],[])};return Nat(e,t)}var Nat=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,s)=>ks(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Iat(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[GI[e.innerType._def.typeName],"null"]};const n=ks(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Rat(e){const t={type:"number"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"int":t.type="integer";break;case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function Mat(e,t){const n={type:"object",properties:{}},r=[],s=e.shape();for(const i in s){let a=s[i];if(a===void 0||a._def===void 0)continue;const l=Dat(a),c=ks(a._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});c!==void 0&&(n.properties[i]=c,l||r.push(i))}r.length&&(n.required=r);const o=Oat(e,t);return o!==void 0&&(n.additionalProperties=o),n}function Oat(e,t){if(e.catchall._def.typeName!=="ZodNever")return ks(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Dat(e){try{return e.isOptional()}catch{return!0}}var Pat=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return ks(e.innerType._def,t);const r=ks(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:nc()},r]}:nc()},Lat=(e,t)=>{if(t.pipeStrategy==="input")return ks(e.in._def,t);if(t.pipeStrategy==="output")return ks(e.out._def,t);const n=ks(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=ks(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function $at(e,t){return ks(e.type._def,t)}function Fat(e,t){const r={type:"array",uniqueItems:!0,items:ks(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(r.minItems=e.minSize.value),e.maxSize&&(r.maxItems=e.maxSize.value),r}function Bat(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>ks(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:ks(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>ks(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function zat(){return{not:nc()}}function jat(){return nc()}var Uat=(e,t)=>ks(e.innerType._def,t),Hat=(e,t,n)=>{switch(t){case Bt.ZodString:return cae(e,n);case Bt.ZodNumber:return Rat(e);case Bt.ZodObject:return Mat(e,n);case Bt.ZodBigInt:return fat(e);case Bt.ZodBoolean:return hat();case Bt.ZodDate:return lae(e,n);case Bt.ZodUndefined:return zat();case Bt.ZodNull:return kat();case Bt.ZodArray:return dat(e,n);case Bt.ZodUnion:case Bt.ZodDiscriminatedUnion:return Aat(e,n);case Bt.ZodIntersection:return xat(e,n);case Bt.ZodTuple:return Bat(e,n);case Bt.ZodRecord:return uae(e,n);case Bt.ZodLiteral:return wat(e);case Bt.ZodEnum:return yat(e);case Bt.ZodNativeEnum:return Tat(e);case Bt.ZodNullable:return Iat(e,n);case Bt.ZodOptional:return Pat(e,n);case Bt.ZodMap:return Sat(e,n);case Bt.ZodSet:return Fat(e,n);case Bt.ZodLazy:return()=>e.getter()._def;case Bt.ZodPromise:return $at(e,n);case Bt.ZodNaN:case Bt.ZodNever:return Cat();case Bt.ZodEffects:return bat(e,n);case Bt.ZodAny:return nc();case Bt.ZodUnknown:return jat();case Bt.ZodDefault:return gat(e,n);case Bt.ZodBranded:return aae(e,n);case Bt.ZodReadonly:return Uat(e,n);case Bt.ZodCatch:return pat(e,n);case Bt.ZodPipeline:return Lat(e,n);case Bt.ZodFunction:case Bt.ZodVoid:case Bt.ZodSymbol:return;default:return(r=>{})()}};function ks(e,t,n=!1){var r;const s=t.seen.get(e);if(t.override){const l=(r=t.override)==null?void 0:r.call(t,e,t,s,n);if(l!==cat)return l}if(s&&!n){const l=Vat(s,t);if(l!==void 0)return l}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const i=Hat(e,e.typeName,t),a=typeof i=="function"?ks(i(),t):i;if(a&&qat(e,t,a),t.postProcess){const l=t.postProcess(a,e,t);return o.jsonSchema=a,l}return o.jsonSchema=a,a}var Vat=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:lat(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),nc()):t.$refStrategy==="seen"?nc():void 0}},qat=(e,t,n)=>(e.description&&(n.description=e.description),n),Gat=e=>{const t=uat(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}},Wat=(e,t)=>{var n;const r=Gat(t);let s=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((c,[u,f])=>{var m;return{...c,[u]:(m=ks(f._def,{...r,currentPath:[...r.basePath,r.definitionPath,u]},!0))!=null?m:nc()}},{}):void 0;const o=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=(n=ks(e._def,o===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1))!=null?n:nc(),a=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;a!==void 0&&(i.title=a);const l=o===void 0?s?{...i,[r.definitionPath]:s}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...s,[o]:i}};return l.$schema="http://json-schema.org/draft-07/schema#",l},Yat=Wat;function Kat(e,t){var n;const r=(n=void 0)!=null?n:!1;return i9(()=>Yat(e,{$refStrategy:r?"root":"none"}),{validate:async s=>{const o=await e.safeParseAsync(s);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}function Zat(e,t){var n;const r=(n=void 0)!=null?n:!1;return i9(()=>oIe(e,{target:"draft-7",io:"output",reused:r?"ref":"inline"}),{validate:async s=>{const o=await Yie(e,s);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}function Jat(e){return"_zod"in e}function Pi(e,t){return Jat(e)?Zat(e):Kat(e)}var WI=Symbol.for("vercel.ai.schema");function zc(e){let t;return()=>(t==null&&(t=e()),t)}function i9(e,{validate:t}={}){return{[WI]:!0,_type:void 0,[u4]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function Xat(e){return typeof e=="object"&&e!==null&&WI in e&&e[WI]===!0&&"jsonSchema"in e&&"validate"in e}function i3(e){return e==null?i9({properties:{},additionalProperties:!1}):Xat(e)?e:typeof e=="function"?e():Pi(e)}var{btoa:Qat,atob:elt}=globalThis;function a9(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=elt(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function d4(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Qat(t)}function zH(e){return e instanceof Uint8Array?d4(e):e}function dae(e){return e==null?void 0:e.replace(/\/$/,"")}function tlt(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}async function*nlt({execute:e,input:t,options:n}){const r=e(t,n);if(tlt(r)){let s;for await(const o of r)s=o,yield{type:"preliminary",output:o};yield{type:"final",output:s}}else yield{type:"final",output:await r}}var rlt="2.0.44",slt=zc(()=>Pi(Gt({error:Gt({code:Qs().nullable(),message:Ft(),status:Ft()})}))),tw=Cm({errorSchema:slt,errorToMessage:e=>e.error.message}),olt=zc(()=>Pi(Gt({outputDimensionality:Qs().optional(),taskType:dl(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),ilt=class{constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){const s=await o9({provider:"google",providerOptions:r,schema:olt});if(e.length>this.maxEmbeddingsPerCall)throw new Tot({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const o=L0(await ml(this.config.headers),t);if(e.length===1){const{responseHeaders:c,value:u,rawValue:f}=await eh({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:o,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:s==null?void 0:s.outputDimensionality,taskType:s==null?void 0:s.taskType},failedResponseHandler:tw,successfulResponseHandler:th(llt),abortSignal:n,fetch:this.config.fetch});return{embeddings:[u.embedding.values],usage:void 0,response:{headers:c,body:f}}}const{responseHeaders:i,value:a,rawValue:l}=await eh({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:o,body:{requests:e.map(c=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:c}]},outputDimensionality:s==null?void 0:s.outputDimensionality,taskType:s==null?void 0:s.taskType}))},failedResponseHandler:tw,successfulResponseHandler:th(alt),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.embeddings.map(c=>c.values),usage:void 0,response:{headers:i,body:l}}}},alt=zc(()=>Pi(Gt({embeddings:Br(Gt({values:Br(Qs())}))}))),llt=zc(()=>Pi(Gt({embedding:Gt({values:Br(Qs())})})));function ld(e){if(e==null||clt(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:s,items:o,allOf:i,anyOf:a,oneOf:l,format:c,const:u,minLength:f,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),u!==void 0&&(g.enum=[u]),t)if(Array.isArray(t)){const y=t.includes("null"),v=t.filter(w=>w!=="null");v.length===0?g.type="null":(g.anyOf=v.map(w=>({type:w})),y&&(g.nullable=!0))}else g.type=t;if(m!==void 0&&(g.enum=m),s!=null&&(g.properties=Object.entries(s).reduce((y,[v,w])=>(y[v]=ld(w),y),{})),o&&(g.items=Array.isArray(o)?o.map(ld):ld(o)),i&&(g.allOf=i.map(ld)),a)if(a.some(y=>typeof y=="object"&&(y==null?void 0:y.type)==="null")){const y=a.filter(v=>!(typeof v=="object"&&(v==null?void 0:v.type)==="null"));if(y.length===1){const v=ld(y[0]);typeof v=="object"&&(g.nullable=!0,Object.assign(g,v))}else g.anyOf=y.map(ld),g.nullable=!0}else g.anyOf=a.map(ld);return l&&(g.oneOf=l.map(ld)),f!==void 0&&(g.minLength=f),g}function clt(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)&&!e.additionalProperties}function ult(e,t){var n;const r=[],s=[];let o=!0;const i=(n=t==null?void 0:t.isGemmaModel)!=null?n:!1;for(const{role:a,content:l}of e)switch(a){case"system":{if(!o)throw new H_({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:l});break}case"user":{o=!1;const c=[];for(const u of l)switch(u.type){case"text":{c.push({text:u.text});break}case"file":{const f=u.mediaType==="image/*"?"image/jpeg":u.mediaType;c.push(u.data instanceof URL?{fileData:{mimeType:f,fileUri:u.data.toString()}}:{inlineData:{mimeType:f,data:zH(u.data)}});break}}s.push({role:"user",parts:c});break}case"assistant":{o=!1,s.push({role:"model",parts:l.map(c=>{var u,f,m;const g=((f=(u=c.providerOptions)==null?void 0:u.google)==null?void 0:f.thoughtSignature)!=null?String((m=c.providerOptions.google)==null?void 0:m.thoughtSignature):void 0;switch(c.type){case"text":return c.text.length===0?void 0:{text:c.text,thoughtSignature:g};case"reasoning":return c.text.length===0?void 0:{text:c.text,thought:!0,thoughtSignature:g};case"file":{if(c.mediaType!=="image/png")throw new H_({functionality:"Only PNG images are supported in assistant messages"});if(c.data instanceof URL)throw new H_({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:c.mediaType,data:zH(c.data)}}}case"tool-call":return{functionCall:{name:c.toolName,args:c.input},thoughtSignature:g}}}).filter(c=>c!==void 0)});break}case"tool":{o=!1;const c=[];for(const u of l){const f=u.output;if(f.type==="content")for(const m of f.value)switch(m.type){case"text":c.push({functionResponse:{name:u.toolName,response:{name:u.toolName,content:m.text}}});break;case"media":c.push({inlineData:{mimeType:m.mediaType,data:m.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:c.push({text:JSON.stringify(m)});break}else c.push({functionResponse:{name:u.toolName,response:{name:u.toolName,content:f.value}}})}s.push({role:"user",parts:c});break}}if(i&&r.length>0&&s.length>0&&s[0].role==="user"){const a=r.map(l=>l.text).join(`

`);s[0].parts.unshift({text:a+`

`})}return{systemInstruction:r.length>0&&!i?{parts:r}:void 0,contents:s}}function jH(e){return e.includes("/")?e:`models/${e}`}var dlt=zc(()=>Pi(Gt({responseModalities:Br(dl(["TEXT","IMAGE"])).optional(),thinkingConfig:Gt({thinkingBudget:Qs().optional(),includeThoughts:lm().optional(),thinkingLevel:dl(["low","medium","high"]).optional()}).optional(),cachedContent:Ft().optional(),structuredOutputs:lm().optional(),safetySettings:Br(Gt({category:dl(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:dl(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:dl(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:lm().optional(),labels:Sm(Ft(),Ft()).optional(),mediaResolution:dl(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:Gt({aspectRatio:dl(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:dl(["1K","2K","4K"]).optional()}).optional()})));function flt({tools:e,toolChoice:t,modelId:n}){var r;e=e!=null&&e.length?e:void 0;const s=[],o=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(g=>g===n),i=n.includes("gemini-2")||n.includes("gemini-3")||o,a=n.includes("gemini-1.5-flash")&&!n.includes("-8b"),l=n.includes("gemini-2.5");if(e==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const c=e.some(g=>g.type==="function"),u=e.some(g=>g.type==="provider-defined");if(c&&u){const g=e.filter(y=>y.type==="function");s.push({type:"unsupported-tool",tool:e.find(y=>y.type==="function"),details:`Cannot mix function tools with provider-defined tools in the same request. Falling back to provider-defined tools only. The following function tools will be ignored: ${g.map(y=>y.name).join(", ")}. Please use either function tools or provider-defined tools, but not both.`})}if(u){const g=[];return e.filter(v=>v.type==="provider-defined").forEach(v=>{switch(v.id){case"google.google_search":i?g.push({googleSearch:{}}):a?g.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:v.args.mode,dynamicThreshold:v.args.dynamicThreshold}}}):g.push({googleSearchRetrieval:{}});break;case"google.url_context":i?g.push({urlContext:{}}):s.push({type:"unsupported-tool",tool:v,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":i?g.push({codeExecution:{}}):s.push({type:"unsupported-tool",tool:v,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":l?g.push({fileSearch:{...v.args}}):s.push({type:"unsupported-tool",tool:v,details:"The file search tool is only supported with Gemini 2.5 models."});break;case"google.vertex_rag_store":i?g.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:v.args.ragCorpus},similarity_top_k:v.args.topK}}}):s.push({type:"unsupported-tool",tool:v,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;default:s.push({type:"unsupported-tool",tool:v});break}}),{tools:g.length>0?g:void 0,toolConfig:void 0,toolWarnings:s}}const f=[];for(const g of e)switch(g.type){case"function":f.push({name:g.name,description:(r=g.description)!=null?r:"",parameters:ld(g.inputSchema)});break;default:s.push({type:"unsupported-tool",tool:g});break}if(t==null)return{tools:[{functionDeclarations:f}],toolConfig:void 0,toolWarnings:s};const m=t.type;switch(m){case"auto":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:s};default:{const g=m;throw new H_({functionality:`tool choice type: ${g}`})}}}function UH({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var hlt=class{constructor(e,t){this.specificationVersion="v2";var n;this.modelId=e,this.config=t,this.generateId=(n=t.generateId)!=null?n:tae}get provider(){return this.config.provider}get supportedUrls(){var e,t,n;return(n=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?n:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:r,topK:s,frequencyPenalty:o,presencePenalty:i,stopSequences:a,responseFormat:l,seed:c,tools:u,toolChoice:f,providerOptions:m}){var g;const y=[],v=await o9({provider:"google",providerOptions:m,schema:dlt});u!=null&&u.some(M=>M.type==="provider-defined"&&M.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&y.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const w=this.modelId.toLowerCase().startsWith("gemma-"),{contents:_,systemInstruction:S}=ult(e,{isGemmaModel:w}),{tools:k,toolConfig:R,toolWarnings:O}=flt({tools:u,toolChoice:f,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:t,temperature:n,topK:s,topP:r,frequencyPenalty:o,presencePenalty:i,stopSequences:a,seed:c,responseMimeType:(l==null?void 0:l.type)==="json"?"application/json":void 0,responseSchema:(l==null?void 0:l.type)==="json"&&l.schema!=null&&((g=v==null?void 0:v.structuredOutputs)==null||g)?ld(l.schema):void 0,...(v==null?void 0:v.audioTimestamp)&&{audioTimestamp:v.audioTimestamp},responseModalities:v==null?void 0:v.responseModalities,thinkingConfig:v==null?void 0:v.thinkingConfig,...(v==null?void 0:v.imageConfig)&&{imageConfig:v.imageConfig},...(v==null?void 0:v.mediaResolution)&&{mediaResolution:v.mediaResolution}},contents:_,systemInstruction:w?void 0:S,safetySettings:v==null?void 0:v.safetySettings,tools:k,toolConfig:R,cachedContent:v==null?void 0:v.cachedContent,labels:v==null?void 0:v.labels},warnings:[...y,...O]}}async doGenerate(e){var t,n,r,s,o,i,a,l,c,u,f,m,g;const{args:y,warnings:v}=await this.getArgs(e),w=JSON.stringify(y),_=L0(await ml(this.config.headers),e.headers),{responseHeaders:S,value:k,rawValue:R}=await eh({url:`${this.config.baseURL}/${jH(this.modelId)}:generateContent`,headers:_,body:y,failedResponseHandler:tw,successfulResponseHandler:th(mlt),abortSignal:e.abortSignal,fetch:this.config.fetch}),O=k.candidates[0],M=[],P=(n=(t=O.content)==null?void 0:t.parts)!=null?n:[],j=k.usageMetadata;let q;for(const z of P)if("executableCode"in z&&((r=z.executableCode)!=null&&r.code)){const H=this.config.generateId();q=H,M.push({type:"tool-call",toolCallId:H,toolName:"code_execution",input:JSON.stringify(z.executableCode),providerExecuted:!0})}else"codeExecutionResult"in z&&z.codeExecutionResult?(M.push({type:"tool-result",toolCallId:q,toolName:"code_execution",result:{outcome:z.codeExecutionResult.outcome,output:z.codeExecutionResult.output},providerExecuted:!0}),q=void 0):"text"in z&&z.text!=null&&z.text.length>0?M.push({type:z.thought===!0?"reasoning":"text",text:z.text,providerMetadata:z.thoughtSignature?{google:{thoughtSignature:z.thoughtSignature}}:void 0}):"functionCall"in z?M.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:z.functionCall.name,input:JSON.stringify(z.functionCall.args),providerMetadata:z.thoughtSignature?{google:{thoughtSignature:z.thoughtSignature}}:void 0}):"inlineData"in z&&M.push({type:"file",data:z.inlineData.data,mediaType:z.inlineData.mimeType});const U=(s=HH({groundingMetadata:O.groundingMetadata,generateId:this.config.generateId}))!=null?s:[];for(const z of U)M.push(z);return{content:M,finishReason:UH({finishReason:O.finishReason,hasToolCalls:M.some(z=>z.type==="tool-call")}),usage:{inputTokens:(o=j==null?void 0:j.promptTokenCount)!=null?o:void 0,outputTokens:(i=j==null?void 0:j.candidatesTokenCount)!=null?i:void 0,totalTokens:(a=j==null?void 0:j.totalTokenCount)!=null?a:void 0,reasoningTokens:(l=j==null?void 0:j.thoughtsTokenCount)!=null?l:void 0,cachedInputTokens:(c=j==null?void 0:j.cachedContentTokenCount)!=null?c:void 0},warnings:v,providerMetadata:{google:{promptFeedback:(u=k.promptFeedback)!=null?u:null,groundingMetadata:(f=O.groundingMetadata)!=null?f:null,urlContextMetadata:(m=O.urlContextMetadata)!=null?m:null,safetyRatings:(g=O.safetyRatings)!=null?g:null,usageMetadata:j??null}},request:{body:w},response:{headers:S,body:R}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),s=L0(await ml(this.config.headers),e.headers),{responseHeaders:o,value:i}=await eh({url:`${this.config.baseURL}/${jH(this.modelId)}:streamGenerateContent?alt=sse`,headers:s,body:t,failedResponseHandler:tw,successfulResponseHandler:iae(glt),abortSignal:e.abortSignal,fetch:this.config.fetch});let a="unknown";const l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let c;const u=this.config.generateId;let f=!1,m=null,g=null,y=0;const v=new Set;let w;return{stream:i.pipeThrough(new TransformStream({start(_){_.enqueue({type:"stream-start",warnings:n})},transform(_,S){var k,R,O,M,P,j,q,U,z,H,F,W;if(e.includeRawChunks&&S.enqueue({type:"raw",rawValue:_.rawValue}),!_.success){S.enqueue({type:"error",error:_.error});return}const X=_.value,J=X.usageMetadata;J!=null&&(l.inputTokens=(k=J.promptTokenCount)!=null?k:void 0,l.outputTokens=(R=J.candidatesTokenCount)!=null?R:void 0,l.totalTokens=(O=J.totalTokenCount)!=null?O:void 0,l.reasoningTokens=(M=J.thoughtsTokenCount)!=null?M:void 0,l.cachedInputTokens=(P=J.cachedContentTokenCount)!=null?P:void 0);const ee=(j=X.candidates)==null?void 0:j[0];if(ee==null)return;const re=ee.content,ie=HH({groundingMetadata:ee.groundingMetadata,generateId:u});if(ie!=null)for(const Z of ie)Z.sourceType==="url"&&!v.has(Z.url)&&(v.add(Z.url),S.enqueue(Z));if(re!=null){const Z=(q=re.parts)!=null?q:[];for(const oe of Z)if("executableCode"in oe&&((U=oe.executableCode)!=null&&U.code)){const Q=u();w=Q,S.enqueue({type:"tool-call",toolCallId:Q,toolName:"code_execution",input:JSON.stringify(oe.executableCode),providerExecuted:!0}),f=!0}else if("codeExecutionResult"in oe&&oe.codeExecutionResult){const Q=w;Q&&(S.enqueue({type:"tool-result",toolCallId:Q,toolName:"code_execution",result:{outcome:oe.codeExecutionResult.outcome,output:oe.codeExecutionResult.output},providerExecuted:!0}),w=void 0)}else"text"in oe&&oe.text!=null&&oe.text.length>0?oe.thought===!0?(m!==null&&(S.enqueue({type:"text-end",id:m}),m=null),g===null&&(g=String(y++),S.enqueue({type:"reasoning-start",id:g,providerMetadata:oe.thoughtSignature?{google:{thoughtSignature:oe.thoughtSignature}}:void 0})),S.enqueue({type:"reasoning-delta",id:g,delta:oe.text,providerMetadata:oe.thoughtSignature?{google:{thoughtSignature:oe.thoughtSignature}}:void 0})):(g!==null&&(S.enqueue({type:"reasoning-end",id:g}),g=null),m===null&&(m=String(y++),S.enqueue({type:"text-start",id:m,providerMetadata:oe.thoughtSignature?{google:{thoughtSignature:oe.thoughtSignature}}:void 0})),S.enqueue({type:"text-delta",id:m,delta:oe.text,providerMetadata:oe.thoughtSignature?{google:{thoughtSignature:oe.thoughtSignature}}:void 0})):"inlineData"in oe&&S.enqueue({type:"file",mediaType:oe.inlineData.mimeType,data:oe.inlineData.data});const te=plt({parts:re.parts,generateId:u});if(te!=null)for(const oe of te)S.enqueue({type:"tool-input-start",id:oe.toolCallId,toolName:oe.toolName,providerMetadata:oe.providerMetadata}),S.enqueue({type:"tool-input-delta",id:oe.toolCallId,delta:oe.args,providerMetadata:oe.providerMetadata}),S.enqueue({type:"tool-input-end",id:oe.toolCallId,providerMetadata:oe.providerMetadata}),S.enqueue({type:"tool-call",toolCallId:oe.toolCallId,toolName:oe.toolName,input:oe.args,providerMetadata:oe.providerMetadata}),f=!0}ee.finishReason!=null&&(a=UH({finishReason:ee.finishReason,hasToolCalls:f}),c={google:{promptFeedback:(z=X.promptFeedback)!=null?z:null,groundingMetadata:(H=ee.groundingMetadata)!=null?H:null,urlContextMetadata:(F=ee.urlContextMetadata)!=null?F:null,safetyRatings:(W=ee.safetyRatings)!=null?W:null}},J!=null&&(c.google.usageMetadata=J))},flush(_){m!==null&&_.enqueue({type:"text-end",id:m}),g!==null&&_.enqueue({type:"reasoning-end",id:g}),_.enqueue({type:"finish",finishReason:a,usage:l,providerMetadata:c})}})),response:{headers:o},request:{body:r}}}};function plt({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({type:"tool-call",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args),providerMetadata:r.thoughtSignature?{google:{thoughtSignature:r.thoughtSignature}}:void 0}))}function HH({groundingMetadata:e,generateId:t}){var n,r,s,o;if(!(e!=null&&e.groundingChunks))return;const i=[];for(const a of e.groundingChunks)if(a.web!=null)i.push({type:"source",sourceType:"url",id:t(),url:a.web.uri,title:(n=a.web.title)!=null?n:void 0});else if(a.retrievedContext!=null){const l=a.retrievedContext.uri,c=a.retrievedContext.fileSearchStore;if(l&&(l.startsWith("http://")||l.startsWith("https://")))i.push({type:"source",sourceType:"url",id:t(),url:l,title:(r=a.retrievedContext.title)!=null?r:void 0});else if(l){const u=(s=a.retrievedContext.title)!=null?s:"Unknown Document";let f="application/octet-stream",m;l.endsWith(".pdf")?(f="application/pdf",m=l.split("/").pop()):l.endsWith(".txt")?(f="text/plain",m=l.split("/").pop()):l.endsWith(".docx")?(f="application/vnd.openxmlformats-officedocument.wordprocessingml.document",m=l.split("/").pop()):l.endsWith(".doc")?(f="application/msword",m=l.split("/").pop()):(l.match(/\.(md|markdown)$/)&&(f="text/markdown"),m=l.split("/").pop()),i.push({type:"source",sourceType:"document",id:t(),mediaType:f,title:u,filename:m})}else if(c){const u=(o=a.retrievedContext.title)!=null?o:"Unknown Document";i.push({type:"source",sourceType:"document",id:t(),mediaType:"application/octet-stream",title:u,filename:c.split("/").pop()})}}return i.length>0?i:void 0}var fae=()=>Gt({webSearchQueries:Br(Ft()).nullish(),retrievalQueries:Br(Ft()).nullish(),searchEntryPoint:Gt({renderedContent:Ft()}).nullish(),groundingChunks:Br(Gt({web:Gt({uri:Ft(),title:Ft().nullish()}).nullish(),retrievedContext:Gt({uri:Ft().nullish(),title:Ft().nullish(),text:Ft().nullish(),fileSearchStore:Ft().nullish()}).nullish()})).nullish(),groundingSupports:Br(Gt({segment:Gt({startIndex:Qs().nullish(),endIndex:Qs().nullish(),text:Ft().nullish()}),segment_text:Ft().nullish(),groundingChunkIndices:Br(Qs()).nullish(),supportChunkIndices:Br(Qs()).nullish(),confidenceScores:Br(Qs()).nullish(),confidenceScore:Br(Qs()).nullish()})).nullish(),retrievalMetadata:Ua([Gt({webDynamicRetrievalScore:Qs()}),Gt({})]).nullish()}),hae=()=>Gt({parts:Br(Ua([Gt({functionCall:Gt({name:Ft(),args:P0()}),thoughtSignature:Ft().nullish()}),Gt({inlineData:Gt({mimeType:Ft(),data:Ft()})}),Gt({executableCode:Gt({language:Ft(),code:Ft()}).nullish(),codeExecutionResult:Gt({outcome:Ft(),output:Ft()}).nullish(),text:Ft().nullish(),thought:lm().nullish(),thoughtSignature:Ft().nullish()})])).nullish()}),f4=()=>Gt({category:Ft().nullish(),probability:Ft().nullish(),probabilityScore:Qs().nullish(),severity:Ft().nullish(),severityScore:Qs().nullish(),blocked:lm().nullish()}),pae=Gt({cachedContentTokenCount:Qs().nullish(),thoughtsTokenCount:Qs().nullish(),promptTokenCount:Qs().nullish(),candidatesTokenCount:Qs().nullish(),totalTokenCount:Qs().nullish(),trafficType:Ft().nullish()}),mae=()=>Gt({urlMetadata:Br(Gt({retrievedUrl:Ft(),urlRetrievalStatus:Ft()}))}),mlt=zc(()=>Pi(Gt({candidates:Br(Gt({content:hae().nullish().or(Gt({}).strict()),finishReason:Ft().nullish(),safetyRatings:Br(f4()).nullish(),groundingMetadata:fae().nullish(),urlContextMetadata:mae().nullish()})),usageMetadata:pae.nullish(),promptFeedback:Gt({blockReason:Ft().nullish(),safetyRatings:Br(f4()).nullish()}).nullish()}))),glt=zc(()=>Pi(Gt({candidates:Br(Gt({content:hae().nullish(),finishReason:Ft().nullish(),safetyRatings:Br(f4()).nullish(),groundingMetadata:fae().nullish(),urlContextMetadata:mae().nullish()})).nullish(),usageMetadata:pae.nullish(),promptFeedback:Gt({blockReason:Ft().nullish(),safetyRatings:Br(f4()).nullish()}).nullish()}))),blt=aat({id:"google.code_execution",name:"code_execution",inputSchema:Gt({language:Ft().describe("The programming language of the code."),code:Ft().describe("The code to be executed.")}),outputSchema:Gt({outcome:Ft().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:Ft().describe("The output from the code execution.")})}),ylt=Gt({fileSearchStoreNames:Br(Ft()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:Qs().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:Ft().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),vlt=zc(()=>Pi(ylt)),xlt=o3({id:"google.file_search",name:"file_search",inputSchema:vlt}),wlt=o3({id:"google.google_search",name:"google_search",inputSchema:zc(()=>Pi(Gt({mode:dl(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:Qs().default(1)})))}),Elt=o3({id:"google.url_context",name:"url_context",inputSchema:zc(()=>Pi(Gt({})))}),_lt=o3({id:"google.vertex_rag_store",name:"vertex_rag_store",inputSchema:Gt({ragCorpus:Ft(),topK:Qs().optional()})}),Slt={googleSearch:wlt,urlContext:Elt,fileSearch:xlt,codeExecution:blt,vertexRagStore:_lt},Tlt=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:4}get provider(){return this.config.provider}async doGenerate(e){var t,n,r;const{prompt:s,n:o=1,size:i="1024x1024",aspectRatio:a="1:1",seed:l,providerOptions:c,headers:u,abortSignal:f}=e,m=[];i!=null&&m.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),l!=null&&m.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});const g=await o9({provider:"google",providerOptions:c,schema:klt}),y=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,v={sampleCount:o};a!=null&&(v.aspectRatio=a),g&&Object.assign(v,g);const w={instances:[{prompt:s}],parameters:v},{responseHeaders:_,value:S}=await eh({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:L0(await ml(this.config.headers),u),body:w,failedResponseHandler:tw,successfulResponseHandler:th(Clt),abortSignal:f,fetch:this.config.fetch});return{images:S.predictions.map(k=>k.bytesBase64Encoded),warnings:m??[],providerMetadata:{google:{images:S.predictions.map(k=>({}))}},response:{timestamp:y,modelId:this.modelId,headers:_}}}},Clt=zc(()=>Pi(Gt({predictions:Br(Gt({bytesBase64Encoded:Ft()})).default([])}))),klt=zc(()=>Pi(Gt({personGeneration:dl(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:dl(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function gae(e={}){var t,n;const r=(t=dae(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",s=(n=e.name)!=null?n:"google.generative-ai",o=()=>jb({"x-goog-api-key":Yit({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},`ai-sdk/google/${rlt}`),i=u=>{var f;return new hlt(u,{provider:s,baseURL:r,headers:o,generateId:(f=e.generateId)!=null?f:tae,supportedUrls:()=>({"*":[new RegExp(`^${r}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},a=u=>new ilt(u,{provider:s,baseURL:r,headers:o,fetch:e.fetch}),l=(u,f={})=>new Tlt(u,f,{provider:s,baseURL:r,headers:o,fetch:e.fetch}),c=function(u){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return i(u)};return c.languageModel=i,c.chat=i,c.generativeAI=i,c.embedding=a,c.textEmbedding=a,c.textEmbeddingModel=a,c.image=l,c.imageModel=l,c.tools=Slt,c}gae();var WA,VH;function Alt(){if(VH)return WA;VH=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,s=(u,f)=>{for(var m in f)e(u,m,{get:f[m],enumerable:!0})},o=(u,f,m,g)=>{if(f&&typeof f=="object"||typeof f=="function")for(let y of n(f))!r.call(u,y)&&y!==m&&e(u,y,{get:()=>f[y],enumerable:!(g=t(f,y))||g.enumerable});return u},i=u=>o(e({},"__esModule",{value:!0}),u),a={};s(a,{SYMBOL_FOR_REQ_CONTEXT:()=>l,getContext:()=>c}),WA=i(a);const l=Symbol.for("@vercel/request-context");function c(){var f,m;return((m=(f=globalThis[l])==null?void 0:f.get)==null?void 0:m.call(f))??{}}return WA}var YA,qH;function Nlt(){if(qH)return YA;qH=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,s=(f,m)=>{for(var g in m)e(f,g,{get:m[g],enumerable:!0})},o=(f,m,g,y)=>{if(m&&typeof m=="object"||typeof m=="function")for(let v of n(m))!r.call(f,v)&&v!==g&&e(f,v,{get:()=>m[v],enumerable:!(y=t(m,v))||y.enumerable});return f},i=f=>o(e({},"__esModule",{value:!0}),f),a={};s(a,{getContext:()=>l.getContext,getVercelOidcToken:()=>c,getVercelOidcTokenSync:()=>u}),YA=i(a);var l=Alt();async function c(){return""}function u(){return""}return YA}var bae=Nlt(),Ilt="vercel.ai.gateway.error",KA=Symbol.for(Ilt),GH,WH,rc=class yae extends(WH=Error,GH=KA,WH){constructor({message:t,statusCode:n=500,cause:r}){super(t),this[GH]=!0,this.statusCode=n,this.cause=r}static isInstance(t){return yae.hasMarker(t)}static hasMarker(t){return typeof t=="object"&&t!==null&&KA in t&&t[KA]===!0}},vae="GatewayAuthenticationError",Rlt=`vercel.ai.gateway.error.${vae}`,YH=Symbol.for(Rlt),KH,ZH,l9=class xae extends(ZH=rc,KH=YH,ZH){constructor({message:t="Authentication failed",statusCode:n=401,cause:r}={}){super({message:t,statusCode:n,cause:r}),this[KH]=!0,this.name=vae,this.type="authentication_error"}static isInstance(t){return rc.hasMarker(t)&&YH in t}static createContextualError({apiKeyProvided:t,oidcTokenProvided:n,message:r="Authentication failed",statusCode:s=401,cause:o}){let i;return t?i=`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:n?i=`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:i=`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,new xae({message:i,statusCode:s,cause:o})}},wae="GatewayInvalidRequestError",Mlt=`vercel.ai.gateway.error.${wae}`,JH=Symbol.for(Mlt),XH,QH,Olt=class extends(QH=rc,XH=JH,QH){constructor({message:e="Invalid request",statusCode:t=400,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[XH]=!0,this.name=wae,this.type="invalid_request_error"}static isInstance(e){return rc.hasMarker(e)&&JH in e}},Eae="GatewayRateLimitError",Dlt=`vercel.ai.gateway.error.${Eae}`,eV=Symbol.for(Dlt),tV,nV,Plt=class extends(nV=rc,tV=eV,nV){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[tV]=!0,this.name=Eae,this.type="rate_limit_exceeded"}static isInstance(e){return rc.hasMarker(e)&&eV in e}},_ae="GatewayModelNotFoundError",Llt=`vercel.ai.gateway.error.${_ae}`,rV=Symbol.for(Llt),$lt=Ub(()=>Pi(Gt({modelId:Ft()}))),sV,oV,Sae=class extends(oV=rc,sV=rV,oV){constructor({message:e="Model not found",statusCode:t=404,modelId:n,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[sV]=!0,this.name=_ae,this.type="model_not_found",this.modelId=n}static isInstance(e){return rc.hasMarker(e)&&rV in e}},Tae="GatewayInternalServerError",Flt=`vercel.ai.gateway.error.${Tae}`,iV=Symbol.for(Flt),aV,lV,cV=class extends(lV=rc,aV=iV,lV){constructor({message:e="Internal server error",statusCode:t=500,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[aV]=!0,this.name=Tae,this.type="internal_server_error"}static isInstance(e){return rc.hasMarker(e)&&iV in e}},Cae="GatewayResponseError",Blt=`vercel.ai.gateway.error.${Cae}`,uV=Symbol.for(Blt),dV,fV,zlt=class extends(fV=rc,dV=uV,fV){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:n,validationError:r,cause:s}={}){super({message:e,statusCode:t,cause:s}),this[dV]=!0,this.name=Cae,this.type="response_error",this.response=n,this.validationError=r}static isInstance(e){return rc.hasMarker(e)&&uV in e}};async function hV({response:e,statusCode:t,defaultMessage:n="Gateway request failed",cause:r,authMethod:s}){const o=await Qf({value:e,schema:jlt});if(!o.success)return new zlt({message:`Invalid error response format: ${n}`,statusCode:t,response:e,validationError:o.error,cause:r});const i=o.value,a=i.error.type,l=i.error.message;switch(a){case"authentication_error":return l9.createContextualError({apiKeyProvided:s==="api-key",oidcTokenProvided:s==="oidc",statusCode:t,cause:r});case"invalid_request_error":return new Olt({message:l,statusCode:t,cause:r});case"rate_limit_exceeded":return new Plt({message:l,statusCode:t,cause:r});case"model_not_found":{const c=await Qf({value:i.error.param,schema:$lt});return new Sae({message:l,statusCode:t,modelId:c.success?c.value.modelId:void 0,cause:r})}case"internal_server_error":return new cV({message:l,statusCode:t,cause:r});default:return new cV({message:l,statusCode:t,cause:r})}}var jlt=Ub(()=>Pi(Gt({error:Gt({message:Ft(),type:Ft().nullish(),param:P0().nullish(),code:Ua([Ft(),Qs()]).nullish()})})));function $0(e,t){var n;return rc.isInstance(e)?e:Ba.isInstance(e)?hV({response:Ult(e),statusCode:(n=e.statusCode)!=null?n:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):hV({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}function Ult(e){if(e.data!==void 0)return e.data;if(e.responseBody!=null)try{return JSON.parse(e.responseBody)}catch{return e.responseBody}return{}}var kae="ai-gateway-auth-method";async function mb(e){const t=await Qf({value:e[kae],schema:Hlt});return t.success?t.value:void 0}var Hlt=Ub(()=>Pi(Ua([ti("api-key"),ti("oidc")]))),pV=class{constructor(e){this.config=e}async getAvailableModels(){try{const{value:e}=await LH({url:`${this.config.baseURL}/config`,headers:await ml(this.config.headers()),successfulResponseHandler:th(Vlt),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:t=>t}),fetch:this.config.fetch});return e}catch(e){throw await $0(e)}}async getCredits(){try{const e=new URL(this.config.baseURL),{value:t}=await LH({url:`${e.origin}/v1/credits`,headers:await ml(this.config.headers()),successfulResponseHandler:th(qlt),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:n=>n}),fetch:this.config.fetch});return t}catch(e){throw await $0(e)}}},Vlt=Ub(()=>Pi(Gt({models:Br(Gt({id:Ft(),name:Ft(),description:Ft().nullish(),pricing:Gt({input:Ft(),output:Ft(),input_cache_read:Ft().nullish(),input_cache_write:Ft().nullish()}).transform(({input:e,output:t,input_cache_read:n,input_cache_write:r})=>({input:e,output:t,...n?{cachedInputTokens:n}:{},...r?{cacheCreationInputTokens:r}:{}})).nullish(),specification:Gt({specificationVersion:ti("v2"),provider:Ft(),modelId:Ft()}),modelType:dl(["language","embedding","image"]).nullish()}))}))),qlt=Ub(()=>Pi(Gt({balance:Ft(),total_used:Ft()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),Glt=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){const{abortSignal:t,...n}=e;return{args:this.maybeEncodeFileParts(n),warnings:[]}}async doGenerate(e){const{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,s=await ml(this.config.headers());try{const{responseHeaders:o,value:i,rawValue:a}=await eh({url:this.getUrl(),headers:L0(s,e.headers,this.getModelConfigHeaders(this.modelId,!1),await ml(this.config.o11yHeaders)),body:t,successfulResponseHandler:th(h0()),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:l=>l}),...r&&{abortSignal:r},fetch:this.config.fetch});return{...i,request:{body:t},response:{headers:o,body:a},warnings:n}}catch(o){throw await $0(o,await mb(s))}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,s=await ml(this.config.headers());try{const{value:o,responseHeaders:i}=await eh({url:this.getUrl(),headers:L0(s,e.headers,this.getModelConfigHeaders(this.modelId,!0),await ml(this.config.o11yHeaders)),body:t,successfulResponseHandler:iae(h0()),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:a=>a}),...r&&{abortSignal:r},fetch:this.config.fetch});return{stream:o.pipeThrough(new TransformStream({start(a){n.length>0&&a.enqueue({type:"stream-start",warnings:n})},transform(a,l){if(a.success){const c=a.value;if(c.type==="raw"&&!e.includeRawChunks)return;c.type==="response-metadata"&&c.timestamp&&typeof c.timestamp=="string"&&(c.timestamp=new Date(c.timestamp)),l.enqueue(c)}else l.error(a.error)}})),request:{body:t},response:{headers:i}}}catch(o){throw await $0(o,await mb(s))}}isFilePart(e){return e&&typeof e=="object"&&"type"in e&&e.type==="file"}maybeEncodeFileParts(e){for(const t of e.prompt)for(const n of t.content)if(this.isFilePart(n)){const r=n;if(r.data instanceof Uint8Array){const s=Uint8Array.from(r.data),o=Buffer.from(s).toString("base64");r.data=new URL(`data:${r.mediaType||"application/octet-stream"};base64,${o}`)}}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},Wlt=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){var s;const o=await ml(this.config.headers());try{const{responseHeaders:i,value:a,rawValue:l}=await eh({url:this.getUrl(),headers:L0(o,t??{},this.getModelConfigHeaders(),await ml(this.config.o11yHeaders)),body:{input:e.length===1?e[0]:e,...r?{providerOptions:r}:{}},successfulResponseHandler:th(Ylt),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:c=>c}),...n&&{abortSignal:n},fetch:this.config.fetch});return{embeddings:a.embeddings,usage:(s=a.usage)!=null?s:void 0,providerMetadata:a.providerMetadata,response:{headers:i,body:l}}}catch(i){throw await $0(i,await mb(o))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},Ylt=Ub(()=>Pi(Gt({embeddings:Br(Br(Qs())),usage:Gt({tokens:Qs()}).nullish(),providerMetadata:Sm(Ft(),Sm(Ft(),P0())).optional()}))),Klt=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxImagesPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:s,providerOptions:o,headers:i,abortSignal:a}){var l;const c=await ml(this.config.headers());try{const{responseHeaders:u,value:f,rawValue:m}=await eh({url:this.getUrl(),headers:L0(c,i??{},this.getModelConfigHeaders(),await ml(this.config.o11yHeaders)),body:{prompt:e,n:t,...n&&{size:n},...r&&{aspectRatio:r},...s&&{seed:s},...o&&{providerOptions:o}},successfulResponseHandler:th(Jlt),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:g=>g}),...a&&{abortSignal:a},fetch:this.config.fetch});return{images:f.images,warnings:(l=f.warnings)!=null?l:[],providerMetadata:f.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:u}}}catch(u){throw $0(u,await mb(c))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":"2","ai-model-id":this.modelId}}},Zlt=Gt({images:Br(P0()).optional()}).catchall(P0()),Jlt=Gt({images:Br(Ft()),warnings:Br(Gt({type:ti("other"),message:Ft()})).optional(),providerMetadata:Sm(Ft(),Zlt).optional()});async function Xlt(){var e;return(e=bae.getContext().headers)==null?void 0:e["x-vercel-id"]}var Qlt="2.0.17",ect="0.0.1";function tct(e={}){var t,n;let r=null,s=null;const o=(t=e.metadataCacheRefreshMillis)!=null?t:1e3*60*5;let i=0;const a=(n=dae(e.baseURL))!=null?n:"https://ai-gateway.vercel.sh/v1/ai",l=async()=>{const y=await rct(e);if(y)return jb({Authorization:`Bearer ${y.token}`,"ai-gateway-protocol-version":ect,[kae]:y.authMethod,...e.headers},`ai-sdk/gateway/${Qlt}`);throw l9.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},c=()=>{const y=V_({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),v=V_({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),w=V_({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{const _=await Xlt();return{...y&&{"ai-o11y-deployment-id":y},...v&&{"ai-o11y-environment":v},...w&&{"ai-o11y-region":w},..._&&{"ai-o11y-request-id":_}}}},u=y=>new Glt(y,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),f=async()=>{var y,v,w;const _=(w=(v=(y=e._internal)==null?void 0:y.currentDate)==null?void 0:v.call(y).getTime())!=null?w:Date.now();return(!r||_-i>o)&&(i=_,r=new pV({baseURL:a,headers:l,fetch:e.fetch}).getAvailableModels().then(S=>(s=S,S)).catch(async S=>{throw await $0(S,await mb(await l()))})),s?Promise.resolve(s):r},m=async()=>new pV({baseURL:a,headers:l,fetch:e.fetch}).getCredits().catch(async y=>{throw await $0(y,await mb(await l()))}),g=function(y){if(new.target)throw new Error("The Gateway Provider model function cannot be called with the new keyword.");return u(y)};return g.getAvailableModels=f,g.getCredits=m,g.imageModel=y=>new Klt(y,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),g.languageModel=u,g.textEmbeddingModel=y=>new Wlt(y,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),g}var nct=tct();async function rct(e){const t=V_({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await bae.getVercelOidcToken(),authMethod:"oidc"}}catch{return null}}var sct=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof globalThis=="object"?globalThis:{},Qp="1.9.0",mV=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function oct(e){var t=new Set([e]),n=new Set,r=e.match(mV);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(s.prerelease!=null)return function(l){return l===e};function o(a){return n.add(a),!1}function i(a){return t.add(a),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var c=l.match(mV);if(!c)return o(l);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||s.major!==u.major?o(l):s.major===0?s.minor===u.minor&&s.patch<=u.patch?i(l):o(l):s.minor<=u.minor?i(l):o(l)}}var ict=oct(Qp),act=Qp.split(".")[0],nw=Symbol.for("opentelemetry.js.api."+act),rw=sct;function c9(e,t,n,r){var s;r===void 0&&(r=!1);var o=rw[nw]=(s=rw[nw])!==null&&s!==void 0?s:{version:Qp};if(!r&&o[e]){var i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(i.stack||i.message),!1}if(o.version!==Qp){var i=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+e+" does not match previously registered API v"+Qp);return n.error(i.stack||i.message),!1}return o[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Qp+"."),!0}function sw(e){var t,n,r=(t=rw[nw])===null||t===void 0?void 0:t.version;if(!(!r||!ict(r)))return(n=rw[nw])===null||n===void 0?void 0:n[e]}function u9(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Qp+".");var n=rw[nw];n&&delete n[e]}var lct=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},cct=function(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},uct=(function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return av("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return av("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return av("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return av("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return av("verbose",this._namespace,t)},e})();function av(e,t,n){var r=sw("diag");if(r)return n.unshift(t),r[e].apply(r,cct([],lct(n),!1))}var jl;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(jl||(jl={}));function dct(e,t){e<jl.NONE?e=jl.NONE:e>jl.ALL&&(e=jl.ALL),t=t||{};function n(r,s){var o=t[r];return typeof o=="function"&&e>=s?o.bind(t):function(){}}return{error:n("error",jl.ERROR),warn:n("warn",jl.WARN),info:n("info",jl.INFO),debug:n("debug",jl.DEBUG),verbose:n("verbose",jl.VERBOSE)}}var fct=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},hct=function(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},pct="diag",h4=(function(){function e(){function t(s){return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=sw("diag");if(a)return a[s].apply(a,hct([],fct(o),!1))}}var n=this,r=function(s,o){var i,a,l;if(o===void 0&&(o={logLevel:jl.INFO}),s===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((i=c.stack)!==null&&i!==void 0?i:c.message),!1}typeof o=="number"&&(o={logLevel:o});var u=sw("diag"),f=dct((a=o.logLevel)!==null&&a!==void 0?a:jl.INFO,s);if(u&&!o.suppressOverrideMessage){var m=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+m),f.warn("Current logger will overwrite one already registered from "+m)}return c9("diag",f,n,!0)};n.setLogger=r,n.disable=function(){u9(pct,n)},n.createComponentLogger=function(s){return new uct(s)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e})();function mct(e){return Symbol.for(e)}var gct=(function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,s){var o=new e(n._currentContext);return o._currentContext.set(r,s),o},n.deleteValue=function(r){var s=new e(n._currentContext);return s._currentContext.delete(r),s}}return e})(),bct=new gct,yct=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},vct=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},xct=(function(){function e(){}return e.prototype.active=function(){return bct},e.prototype.with=function(t,n,r){for(var s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return n.call.apply(n,vct([r],yct(s),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e})(),wct=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},Ect=function(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},ZA="context",_ct=new xct,Aae=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return c9(ZA,t,h4.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var s,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(s=this._getContextManager()).with.apply(s,Ect([t,n,r],wct(o),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return sw(ZA)||_ct},e.prototype.disable=function(){this._getContextManager().disable(),u9(ZA,h4.instance())},e})(),YI;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(YI||(YI={}));var Nae="0000000000000000",Iae="00000000000000000000000000000000",Sct={traceId:Iae,spanId:Nae,traceFlags:YI.NONE},ax=(function(){function e(t){t===void 0&&(t=Sct),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e})(),d9=mct("OpenTelemetry Context Key SPAN");function f9(e){return e.getValue(d9)||void 0}function Tct(){return f9(Aae.getInstance().active())}function h9(e,t){return e.setValue(d9,t)}function Cct(e){return e.deleteValue(d9)}function kct(e,t){return h9(e,new ax(t))}function Rae(e){var t;return(t=f9(e))===null||t===void 0?void 0:t.spanContext()}var Act=/^([0-9a-f]{32})$/i,Nct=/^[0-9a-f]{16}$/i;function Ict(e){return Act.test(e)&&e!==Iae}function Rct(e){return Nct.test(e)&&e!==Nae}function Mae(e){return Ict(e.traceId)&&Rct(e.spanId)}function Mct(e){return new ax(e)}var JA=Aae.getInstance(),Oae=(function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=JA.active());var s=!!(n!=null&&n.root);if(s)return new ax;var o=r&&Rae(r);return Oct(o)&&Mae(o)?new ax(o):new ax},e.prototype.startActiveSpan=function(t,n,r,s){var o,i,a;if(!(arguments.length<2)){arguments.length===2?a=n:arguments.length===3?(o=n,a=r):(o=n,i=r,a=s);var l=i??JA.active(),c=this.startSpan(t,o,l),u=h9(l,c);return JA.with(u,a,void 0,c)}},e})();function Oct(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Dct=new Oae,Pct=(function(){function e(t,n,r,s){this._provider=t,this.name=n,this.version=r,this.options=s}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,s){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Dct},e})(),Lct=(function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new Oae},e})(),$ct=new Lct,gV=(function(){function e(){}return e.prototype.getTracer=function(t,n,r){var s;return(s=this.getDelegateTracer(t,n,r))!==null&&s!==void 0?s:new Pct(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:$ct},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,n,r)},e})(),p4;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(p4||(p4={}));var XA="trace",Fct=(function(){function e(){this._proxyTracerProvider=new gV,this.wrapSpanContext=Mct,this.isSpanContextValid=Mae,this.deleteSpan=Cct,this.getSpan=f9,this.getActiveSpan=Tct,this.getSpanContext=Rae,this.setSpan=h9,this.setSpanContext=kct}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=c9(XA,this._proxyTracerProvider,h4.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return sw(XA)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){u9(XA,h4.instance()),this._proxyTracerProvider=new gV},e})(),Bct=Fct.getInstance(),zct=Object.defineProperty,jct=(e,t)=>{for(var n in t)zct(e,n,{get:t[n],enumerable:!0})},Dae="AI_NoOutputSpecifiedError",Pae=`vercel.ai.error.${Dae}`,Uct=Symbol.for(Pae),Lae,Hct=class extends Cr{constructor({message:e="No output specified."}={}){super({name:Dae,message:e}),this[Lae]=!0}static isInstance(e){return Cr.hasMarker(e,Pae)}};Lae=Uct;function Vct(e){const t="AI SDK Warning:";switch(e.type){case"unsupported-setting":{let n=`${t} The "${e.setting}" setting is not supported by this model`;return e.details&&(n+=` - ${e.details}`),n}case"unsupported-tool":{const n="name"in e.tool?e.tool.name:"unknown tool";let r=`${t} The tool "${n}" is not supported by this model`;return e.details&&(r+=` - ${e.details}`),r}case"other":return`${t} ${e.message}`;default:return`${t} ${JSON.stringify(e,null,2)}`}}var qct="AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.",bV=!1,Gct=e=>{if(e.length===0)return;const t=globalThis.AI_SDK_LOG_WARNINGS;if(t!==!1){if(typeof t=="function"){t(e);return}bV||(bV=!0,console.info(qct));for(const n of e)console.warn(Vct(n))}},$ae="AI_InvalidArgumentError",Fae=`vercel.ai.error.${$ae}`,Wct=Symbol.for(Fae),Bae,cd=class extends Cr{constructor({parameter:e,value:t,message:n}){super({name:$ae,message:`Invalid argument for parameter ${e}: ${n}`}),this[Bae]=!0,this.parameter=e,this.value=t}static isInstance(e){return Cr.hasMarker(e,Fae)}};Bae=Wct;var zae="AI_InvalidToolInputError",jae=`vercel.ai.error.${zae}`,Yct=Symbol.for(jae),Uae,Hae=class extends Cr{constructor({toolInput:e,toolName:t,cause:n,message:r=`Invalid input for tool ${t}: ${Kw(n)}`}){super({name:zae,message:r,cause:n}),this[Uae]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return Cr.hasMarker(e,jae)}};Uae=Yct;var Vae="AI_NoObjectGeneratedError",qae=`vercel.ai.error.${Vae}`,Kct=Symbol.for(qae),Gae,yV=class extends Cr{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:s,finishReason:o}){super({name:Vae,message:e,cause:t}),this[Gae]=!0,this.text=n,this.response=r,this.usage=s,this.finishReason=o}static isInstance(e){return Cr.hasMarker(e,qae)}};Gae=Kct;var Wae="AI_NoSuchToolError",Yae=`vercel.ai.error.${Wae}`,Zct=Symbol.for(Yae),Kae,KI=class extends Cr{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:Wae,message:n}),this[Kae]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Cr.hasMarker(e,Yae)}};Kae=Zct;var Zae="AI_ToolCallRepairError",Jae=`vercel.ai.error.${Zae}`,Jct=Symbol.for(Jae),Xae,Xct=class extends Cr{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${Kw(e)}`}){super({name:Zae,message:n,cause:e}),this[Xae]=!0,this.originalError=t}static isInstance(e){return Cr.hasMarker(e,Jae)}};Xae=Jct;var Qct=class extends Cr{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},Qae="AI_InvalidMessageRoleError",ele=`vercel.ai.error.${Qae}`,eut=Symbol.for(ele),tle,tut=class extends Cr{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Qae,message:t}),this[tle]=!0,this.role=e}static isInstance(e){return Cr.hasMarker(e,ele)}};tle=eut;var nle="AI_DownloadError",rle=`vercel.ai.error.${nle}`,nut=Symbol.for(rle),sle,QA=class extends Cr{constructor({url:e,statusCode:t,statusText:n,cause:r,message:s=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:nle,message:s,cause:r}),this[sle]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Cr.hasMarker(e,rle)}};sle=nut;var ole="AI_RetryError",ile=`vercel.ai.error.${ole}`,rut=Symbol.for(ile),ale,vV=class extends Cr{constructor({message:e,reason:t,errors:n}){super({name:ole,message:e}),this[ale]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Cr.hasMarker(e,ile)}};ale=rut;function xV(e){if(typeof e!="string"){if(e.specificationVersion!=="v2")throw new Qct({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return e}return sut().languageModel(e)}function sut(){var e;return(e=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?e:nct}var out=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],iut=e=>{const t=typeof e=="string"?a9(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function aut(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?iut(e):e}function lut({data:e,signatures:t}){const n=aut(e),r=typeof n=="string"?a9(n.substring(0,Math.min(n.length,24))):n;for(const s of t)if(r.length>=s.bytesPrefix.length&&s.bytesPrefix.every((o,i)=>o===null||r[i]===o))return s.mediaType}var lle="5.0.104",cut=async({url:e})=>{var t;const n=e.toString();try{const r=await fetch(n,{headers:jb({},`ai-sdk/${lle}`,s9())});if(!r.ok)throw new QA({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mediaType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw QA.isInstance(r)?r:new QA({url:n,cause:r})}},uut=(e=cut)=>t=>Promise.all(t.map(async n=>n.isUrlSupportedByModel?null:e(n)));function dut(e){try{const[t,n]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mediaType:void 0,base64Content:void 0}}}var cle=Ua([Ft(),c4(Uint8Array),c4(ArrayBuffer),zit(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function ule(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if(typeof e=="string")try{e=new URL(e)}catch{}if(e instanceof URL&&e.protocol==="data:"){const{mediaType:t,base64Content:n}=dut(e.toString());if(t==null||n==null)throw new Cr({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:n,mediaType:t}}return{data:e,mediaType:void 0}}function fut(e){return typeof e=="string"?e:e instanceof ArrayBuffer?d4(new Uint8Array(e)):d4(e)}async function hut({prompt:e,supportedUrls:t,download:n=uut()}){const r=await mut(e.messages,n,t);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(s=>put({message:s,downloadedAssets:r}))]}function put({message:e,downloadedAssets:t}){const n=e.role;switch(n){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"user",content:e.content.map(r=>gut(r,t)).filter(r=>r.type!=="text"||r.text!==""),providerOptions:e.providerOptions};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"assistant",content:e.content.filter(r=>r.type!=="text"||r.text!==""||r.providerOptions!=null).map(r=>{const s=r.providerOptions;switch(r.type){case"file":{const{data:o,mediaType:i}=ule(r.data);return{type:"file",data:o,filename:r.filename,mediaType:i??r.mediaType,providerOptions:s}}case"reasoning":return{type:"reasoning",text:r.text,providerOptions:s};case"text":return{type:"text",text:r.text,providerOptions:s};case"tool-call":return{type:"tool-call",toolCallId:r.toolCallId,toolName:r.toolName,input:r.input,providerExecuted:r.providerExecuted,providerOptions:s};case"tool-result":return{type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,output:r.output,providerOptions:s}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.map(r=>({type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,output:r.output,providerOptions:r.providerOptions})),providerOptions:e.providerOptions};default:{const r=n;throw new tut({role:r})}}}async function mut(e,t,n){const r=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").map(o=>{var i;const a=(i=o.mediaType)!=null?i:o.type==="image"?"image/*":void 0;let l=o.type==="image"?o.image:o.data;if(typeof l=="string")try{l=new URL(l)}catch{}return{mediaType:a,data:l}}).filter(o=>o.data instanceof URL).map(o=>({url:o.data,isUrlSupportedByModel:o.mediaType!=null&&Wit({url:o.data.toString(),mediaType:o.mediaType,supportedUrls:n})})),s=await t(r);return Object.fromEntries(s.map((o,i)=>o==null?null:[r[i].url.toString(),{data:o.data,mediaType:o.mediaType}]).filter(o=>o!=null))}function gut(e,t){var n;if(e.type==="text")return{type:"text",text:e.text,providerOptions:e.providerOptions};let r;const s=e.type;switch(s){case"image":r=e.image;break;case"file":r=e.data;break;default:throw new Error(`Unsupported part type: ${s}`)}const{data:o,mediaType:i}=ule(r);let a=i??e.mediaType,l=o;if(l instanceof URL){const c=t[l.toString()];c&&(l=c.data,a??(a=c.mediaType))}switch(s){case"image":return(l instanceof Uint8Array||typeof l=="string")&&(a=(n=lut({data:l,signatures:out}))!=null?n:a),{type:"file",mediaType:a??"image/*",filename:void 0,data:l,providerOptions:e.providerOptions};case"file":{if(a==null)throw new Error("Media type is missing for file part");return{type:"file",mediaType:a,filename:e.filename,data:l,providerOptions:e.providerOptions}}}}function wV({maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:s,frequencyPenalty:o,seed:i,stopSequences:a}){if(e!=null){if(!Number.isInteger(e))throw new cd({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new cd({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new cd({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new cd({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new cd({parameter:"topK",value:r,message:"topK must be a number"});if(s!=null&&typeof s!="number")throw new cd({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(o!=null&&typeof o!="number")throw new cd({parameter:"frequencyPenalty",value:o,message:"frequencyPenalty must be a number"});if(i!=null&&!Number.isInteger(i))throw new cd({parameter:"seed",value:i,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:s,frequencyPenalty:o,stopSequences:a,seed:i}}function but(e){return e!=null&&Object.keys(e).length>0}function yut({tools:e,toolChoice:t,activeTools:n}){return but(e)?{tools:(n!=null?Object.entries(e).filter(([s])=>n.includes(s)):Object.entries(e)).map(([s,o])=>{const i=o.type;switch(i){case void 0:case"dynamic":case"function":return{type:"function",name:s,description:o.description,inputSchema:i3(o.inputSchema).jsonSchema,providerOptions:o.providerOptions};case"provider-defined":return{type:"provider-defined",name:s,id:o.id,args:o.args};default:{const a=i;throw new Error(`Unsupported tool type: ${a}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var ow=Fit(()=>Ua([dit(),Ft(),Qs(),lm(),Sm(Ft(),ow),Br(ow)])),Dd=Sm(Ft(),Sm(Ft(),ow)),dle=Gt({type:ti("text"),text:Ft(),providerOptions:Dd.optional()}),vut=Gt({type:ti("image"),image:Ua([cle,c4(URL)]),mediaType:Ft().optional(),providerOptions:Dd.optional()}),fle=Gt({type:ti("file"),data:Ua([cle,c4(URL)]),filename:Ft().optional(),mediaType:Ft(),providerOptions:Dd.optional()}),xut=Gt({type:ti("reasoning"),text:Ft(),providerOptions:Dd.optional()}),wut=Gt({type:ti("tool-call"),toolCallId:Ft(),toolName:Ft(),input:P0(),providerOptions:Dd.optional(),providerExecuted:lm().optional()}),Eut=vit("type",[Gt({type:ti("text"),value:Ft()}),Gt({type:ti("json"),value:ow}),Gt({type:ti("error-text"),value:Ft()}),Gt({type:ti("error-json"),value:ow}),Gt({type:ti("content"),value:Br(Ua([Gt({type:ti("text"),text:Ft()}),Gt({type:ti("media"),data:Ft(),mediaType:Ft()})]))})]),hle=Gt({type:ti("tool-result"),toolCallId:Ft(),toolName:Ft(),output:Eut,providerOptions:Dd.optional()}),_ut=Gt({role:ti("system"),content:Ft(),providerOptions:Dd.optional()}),Sut=Gt({role:ti("user"),content:Ua([Ft(),Br(Ua([dle,vut,fle]))]),providerOptions:Dd.optional()}),Tut=Gt({role:ti("assistant"),content:Ua([Ft(),Br(Ua([dle,fle,xut,wut,hle]))]),providerOptions:Dd.optional()}),Cut=Gt({role:ti("tool"),content:Br(hle),providerOptions:Dd.optional()}),kut=Ua([_ut,Sut,Tut,Cut]);async function Aut(e){if(e.prompt==null&&e.messages==null)throw new e1({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new e1({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new e1({prompt:e,message:"system must be a string"});let t;if(e.prompt!=null&&typeof e.prompt=="string")t=[{role:"user",content:e.prompt}];else if(e.prompt!=null&&Array.isArray(e.prompt))t=e.prompt;else if(e.messages!=null)t=e.messages;else throw new e1({prompt:e,message:"prompt or messages must be defined"});if(t.length===0)throw new e1({prompt:e,message:"messages must not be empty"});const n=await Qf({value:t,schema:Br(kut)});if(!n.success)throw new e1({prompt:e,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:n.error});return{messages:t,system:e.system}}function Nut(e){return l9.isInstance(e)||Sae.isInstance(e)?new Cr({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:e}):e}function ZI({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function Iut({model:e,settings:t,telemetry:n,headers:r}){var s;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((o,[i,a])=>(o[`ai.settings.${i}`]=a,o),{}),...Object.entries((s=n==null?void 0:n.metadata)!=null?s:{}).reduce((o,[i,a])=>(o[`ai.telemetry.metadata.${i}`]=a,o),{}),...Object.entries(r??{}).reduce((o,[i,a])=>(a!==void 0&&(o[`ai.request.headers.${i}`]=a),o),{})}}var Rut={startSpan(){return y_},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(y_);if(typeof n=="function")return n(y_);if(typeof r=="function")return r(y_)}},y_={spanContext(){return Mut},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Mut={traceId:"",spanId:"",traceFlags:0};function Out({isEnabled:e=!1,tracer:t}={}){return e?t||Bct.getTracer("ai"):Rut}function JI({name:e,tracer:t,attributes:n,fn:r,endWhenDone:s=!0}){return t.startActiveSpan(e,{attributes:n},async o=>{try{const i=await r(o);return s&&o.end(),i}catch(i){try{ple(o,i)}finally{o.end()}throw i}})}function ple(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:p4.ERROR,message:t.message})):e.setStatus({code:p4.ERROR})}function b1({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,s])=>{if(s==null)return n;if(typeof s=="object"&&"input"in s&&typeof s.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const o=s.input();return o==null?n:{...n,[r]:o}}if(typeof s=="object"&&"output"in s&&typeof s.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const o=s.output();return o==null?n:{...n,[r]:o}}return{...n,[r]:s}},{})}function Dut(e){return JSON.stringify(e.map(t=>({...t,content:typeof t.content=="string"?t.content:t.content.map(n=>n.type==="file"?{...n,data:n.data instanceof Uint8Array?fut(n.data):n.data}:n)})))}function Put(e,t){return{inputTokens:lv(e.inputTokens,t.inputTokens),outputTokens:lv(e.outputTokens,t.outputTokens),totalTokens:lv(e.totalTokens,t.totalTokens),reasoningTokens:lv(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:lv(e.cachedInputTokens,t.cachedInputTokens)}}function lv(e,t){return e==null&&t==null?void 0:(e??0)+(t??0)}function Lut(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function $ut({error:e,exponentialBackoffDelay:t}){const n=e.responseHeaders;if(!n)return t;let r;const s=n["retry-after-ms"];if(s){const i=parseFloat(s);Number.isNaN(i)||(r=i)}const o=n["retry-after"];if(o&&r===void 0){const i=parseFloat(o);Number.isNaN(i)?r=Date.parse(o)-Date.now():r=i*1e3}return r!=null&&!Number.isNaN(r)&&0<=r&&(r<60*1e3||r<t)?r:t}var Fut=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2,abortSignal:r}={})=>async s=>mle(s,{maxRetries:e,delayInMs:t,backoffFactor:n,abortSignal:r});async function mle(e,{maxRetries:t,delayInMs:n,backoffFactor:r,abortSignal:s},o=[]){try{return await e()}catch(i){if(pb(i)||t===0)throw i;const a=nae(i),l=[...o,i],c=l.length;if(c>t)throw new vV({message:`Failed after ${c} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:l});if(i instanceof Error&&Ba.isInstance(i)&&i.isRetryable===!0&&c<=t)return await Hit($ut({error:i,exponentialBackoffDelay:n}),{abortSignal:s}),mle(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r,abortSignal:s},l);throw c===1?i:new vV({message:`Failed after ${c} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:l})}}function But({maxRetries:e,abortSignal:t}){if(e!=null){if(!Number.isInteger(e))throw new cd({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new cd({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const n=e??2;return{maxRetries:n,retry:Fut({maxRetries:n,abortSignal:t})}}function EV(e){const t=e.filter(n=>n.type==="text");if(t.length!==0)return t.map(n=>n.text).join("")}var zut=class{constructor({data:e,mediaType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mediaType=t}get base64(){return this.base64Data==null&&(this.base64Data=d4(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=a9(this.base64Data)),this.uint8ArrayData}};async function jut({toolCall:e,tools:t,repairToolCall:n,system:r,messages:s}){try{if(t==null)throw new KI({toolName:e.toolName});try{return await _V({toolCall:e,tools:t})}catch(o){if(n==null||!(KI.isInstance(o)||Hae.isInstance(o)))throw o;let i=null;try{i=await n({toolCall:e,tools:t,inputSchema:({toolName:a})=>{const{inputSchema:l}=t[a];return i3(l).jsonSchema},system:r,messages:s,error:o})}catch(a){throw new Xct({cause:a,originalError:o})}if(i==null)throw o;return await _V({toolCall:i,tools:t})}}catch(o){const i=await Tm({text:e.input}),a=i.success?i.value:e.input;return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:a,dynamic:!0,invalid:!0,error:o}}}async function _V({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new KI({toolName:e.toolName,availableTools:Object.keys(t)});const s=i3(r.inputSchema),o=e.input.trim()===""?await Qf({value:{},schema:s}):await Tm({text:e.input,schema:s});if(o.success===!1)throw new Hae({toolName:n,toolInput:e.input,cause:o.error});return r.type==="dynamic"?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:o.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:e.toolCallId,toolName:n,input:o.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}var Uut=class{constructor({content:e,finishReason:t,usage:n,warnings:r,request:s,response:o,providerMetadata:i}){this.content=e,this.finishReason=t,this.usage=n,this.warnings=r,this.request=s,this.response=o,this.providerMetadata=i}get text(){return this.content.filter(e=>e.type==="text").map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>e.type==="reasoning")}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>e.type==="file").map(e=>e.file)}get sources(){return this.content.filter(e=>e.type==="source")}get toolCalls(){return this.content.filter(e=>e.type==="tool-call")}get staticToolCalls(){return this.toolCalls.filter(e=>e.dynamic!==!0)}get dynamicToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!0)}get toolResults(){return this.content.filter(e=>e.type==="tool-result")}get staticToolResults(){return this.toolResults.filter(e=>e.dynamic!==!0)}get dynamicToolResults(){return this.toolResults.filter(e=>e.dynamic===!0)}};function Hut(e){return({steps:t})=>t.length===e}async function Vut({stopConditions:e,steps:t}){return(await Promise.all(e.map(n=>n({steps:t})))).some(n=>n)}function eN({output:e,tool:t,errorMode:n}){return n==="text"?{type:"error-text",value:Kw(e)}:n==="json"?{type:"error-json",value:SV(e)}:t!=null&&t.toModelOutput?t.toModelOutput(e):typeof e=="string"?{type:"text",value:e}:{type:"json",value:SV(e)}}function SV(e){return e===void 0?null:e}function qut({content:e,tools:t}){const n=[],r=e.filter(o=>o.type!=="source").filter(o=>(o.type!=="tool-result"||o.providerExecuted)&&(o.type!=="tool-error"||o.providerExecuted)).filter(o=>o.type!=="text"||o.text.length>0).map(o=>{switch(o.type){case"text":return{type:"text",text:o.text,providerOptions:o.providerMetadata};case"reasoning":return{type:"reasoning",text:o.text,providerOptions:o.providerMetadata};case"file":return{type:"file",data:o.file.base64,mediaType:o.file.mediaType,providerOptions:o.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:o.toolCallId,toolName:o.toolName,input:o.input,providerExecuted:o.providerExecuted,providerOptions:o.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:eN({tool:t==null?void 0:t[o.toolName],output:o.output,errorMode:"none"}),providerExecuted:!0,providerOptions:o.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:eN({tool:t==null?void 0:t[o.toolName],output:o.error,errorMode:"json"}),providerOptions:o.providerMetadata}}});r.length>0&&n.push({role:"assistant",content:r});const s=e.filter(o=>o.type==="tool-result"||o.type==="tool-error").filter(o=>!o.providerExecuted).map(o=>({type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:eN({tool:t==null?void 0:t[o.toolName],output:o.type==="tool-result"?o.output:o.error,errorMode:o.type==="tool-error"?"text":"none"}),...o.providerMetadata!=null?{providerOptions:o.providerMetadata}:{}}));return s.length>0&&n.push({role:"tool",content:s}),n}var Gut=Jw({prefix:"aitxt",size:24});async function Wut({model:e,tools:t,toolChoice:n,system:r,prompt:s,messages:o,maxRetries:i,abortSignal:a,headers:l,stopWhen:c=Hut(1),experimental_output:u,experimental_telemetry:f,providerOptions:m,experimental_activeTools:g,activeTools:y=g,experimental_prepareStep:v,prepareStep:w=v,experimental_repairToolCall:_,experimental_download:S,experimental_context:k,_internal:{generateId:R=Gut,currentDate:O=()=>new Date}={},onStepFinish:M,...P}){const j=xV(e),q=Lut(c),{maxRetries:U,retry:z}=But({maxRetries:i,abortSignal:a}),H=wV(P),F=jb(l??{},`ai/${lle}`),W=Iut({model:j,telemetry:f,headers:F,settings:{...H,maxRetries:U}}),X=await Aut({system:r,prompt:s,messages:o}),J=Out(f);try{return await JI({name:"ai.generateText",attributes:b1({telemetry:f,attributes:{...ZI({operationId:"ai.generateText",telemetry:f}),...W,"ai.model.provider":j.provider,"ai.model.id":j.modelId,"ai.prompt":{input:()=>JSON.stringify({system:r,prompt:s,messages:o})}}}),tracer:J,fn:async ee=>{var re,ie,Z,te,oe,Q,Te;const ge=wV(P);let Ce,he=[],Fe=[];const De=[],Re=[];do{const nt=[...X.messages,...De],ot=await(w==null?void 0:w({model:j,steps:Re,stepNumber:Re.length,messages:nt})),Ht=xV((re=ot==null?void 0:ot.model)!=null?re:j),qt=await hut({prompt:{system:(ie=ot==null?void 0:ot.system)!=null?ie:X.system,messages:(Z=ot==null?void 0:ot.messages)!=null?Z:nt},supportedUrls:await Ht.supportedUrls,download:S}),{toolChoice:Pt,tools:tn}=yut({tools:t,toolChoice:(te=ot==null?void 0:ot.toolChoice)!=null?te:n,activeTools:(oe=ot==null?void 0:ot.activeTools)!=null?oe:y});Ce=await z(()=>{var Je;return JI({name:"ai.generateText.doGenerate",attributes:b1({telemetry:f,attributes:{...ZI({operationId:"ai.generateText.doGenerate",telemetry:f}),...W,"ai.model.provider":Ht.provider,"ai.model.id":Ht.modelId,"ai.prompt.messages":{input:()=>Dut(qt)},"ai.prompt.tools":{input:()=>tn==null?void 0:tn.map(Le=>JSON.stringify(Le))},"ai.prompt.toolChoice":{input:()=>Pt!=null?JSON.stringify(Pt):void 0},"gen_ai.system":Ht.provider,"gen_ai.request.model":Ht.modelId,"gen_ai.request.frequency_penalty":P.frequencyPenalty,"gen_ai.request.max_tokens":P.maxOutputTokens,"gen_ai.request.presence_penalty":P.presencePenalty,"gen_ai.request.stop_sequences":P.stopSequences,"gen_ai.request.temperature":(Je=P.temperature)!=null?Je:void 0,"gen_ai.request.top_k":P.topK,"gen_ai.request.top_p":P.topP}}),tracer:J,fn:async Le=>{var Ve,_e,Y,L,B,ce,we,ze;const Be=await Ht.doGenerate({...ge,tools:tn,toolChoice:Pt,responseFormat:u==null?void 0:u.responseFormat,prompt:qt,providerOptions:m,abortSignal:a,headers:F}),ut={id:(_e=(Ve=Be.response)==null?void 0:Ve.id)!=null?_e:R(),timestamp:(L=(Y=Be.response)==null?void 0:Y.timestamp)!=null?L:O(),modelId:(ce=(B=Be.response)==null?void 0:B.modelId)!=null?ce:Ht.modelId,headers:(we=Be.response)==null?void 0:we.headers,body:(ze=Be.response)==null?void 0:ze.body};return Le.setAttributes(b1({telemetry:f,attributes:{"ai.response.finishReason":Be.finishReason,"ai.response.text":{output:()=>EV(Be.content)},"ai.response.toolCalls":{output:()=>{const ln=TV(Be.content);return ln==null?void 0:JSON.stringify(ln)}},"ai.response.id":ut.id,"ai.response.model":ut.modelId,"ai.response.timestamp":ut.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(Be.providerMetadata),"ai.usage.promptTokens":Be.usage.inputTokens,"ai.usage.completionTokens":Be.usage.outputTokens,"gen_ai.response.finish_reasons":[Be.finishReason],"gen_ai.response.id":ut.id,"gen_ai.response.model":ut.modelId,"gen_ai.usage.input_tokens":Be.usage.inputTokens,"gen_ai.usage.output_tokens":Be.usage.outputTokens}})),{...Be,response:ut}}})});const xt=await Promise.all(Ce.content.filter(Je=>Je.type==="tool-call").map(Je=>jut({toolCall:Je,tools:t,repairToolCall:_,system:r,messages:nt})));for(const Je of xt){if(Je.invalid)continue;const Le=t[Je.toolName];(Le==null?void 0:Le.onInputAvailable)!=null&&await Le.onInputAvailable({input:Je.input,toolCallId:Je.toolCallId,messages:nt,abortSignal:a,experimental_context:k})}const pe=xt.filter(Je=>Je.invalid&&Je.dynamic);Fe=[];for(const Je of pe)Fe.push({type:"tool-error",toolCallId:Je.toolCallId,toolName:Je.toolName,input:Je.input,error:nae(Je.error),dynamic:!0});he=xt.filter(Je=>!Je.providerExecuted),t!=null&&Fe.push(...await Yut({toolCalls:he.filter(Je=>!Je.invalid),tools:t,tracer:J,telemetry:f,messages:nt,abortSignal:a,experimental_context:k}));const Ne=Zut({content:Ce.content,toolCalls:xt,toolOutputs:Fe});De.push(...qut({content:Ne,tools:t}));const $e=new Uut({content:Ne,finishReason:Ce.finishReason,usage:Ce.usage,warnings:Ce.warnings,providerMetadata:Ce.providerMetadata,request:(Q=Ce.request)!=null?Q:{},response:{...Ce.response,messages:structuredClone(De)}});Gct((Te=Ce.warnings)!=null?Te:[]),Re.push($e),await(M==null?void 0:M($e))}while(he.length>0&&Fe.length===he.length&&!await Vut({stopConditions:q,steps:Re}));ee.setAttributes(b1({telemetry:f,attributes:{"ai.response.finishReason":Ce.finishReason,"ai.response.text":{output:()=>EV(Ce.content)},"ai.response.toolCalls":{output:()=>{const nt=TV(Ce.content);return nt==null?void 0:JSON.stringify(nt)}},"ai.response.providerMetadata":JSON.stringify(Ce.providerMetadata),"ai.usage.promptTokens":Ce.usage.inputTokens,"ai.usage.completionTokens":Ce.usage.outputTokens}}));const tt=Re[Re.length-1];let fe;return tt.finishReason==="stop"&&(fe=await(u==null?void 0:u.parseOutput({text:tt.text},{response:tt.response,usage:tt.usage,finishReason:tt.finishReason}))),new Kut({steps:Re,resolvedOutput:fe})}})}catch(ee){throw Nut(ee)}}async function Yut({toolCalls:e,tools:t,tracer:n,telemetry:r,messages:s,abortSignal:o,experimental_context:i}){return(await Promise.all(e.map(async({toolCallId:l,toolName:c,input:u})=>{const f=t[c];if((f==null?void 0:f.execute)!=null)return JI({name:"ai.toolCall",attributes:b1({telemetry:r,attributes:{...ZI({operationId:"ai.toolCall",telemetry:r}),"ai.toolCall.name":c,"ai.toolCall.id":l,"ai.toolCall.args":{output:()=>JSON.stringify(u)}}}),tracer:n,fn:async m=>{try{const g=nlt({execute:f.execute.bind(f),input:u,options:{toolCallId:l,messages:s,abortSignal:o,experimental_context:i}});let y;for await(const v of g)v.type==="final"&&(y=v.output);try{m.setAttributes(b1({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(y)}}}))}catch{}return{type:"tool-result",toolCallId:l,toolName:c,input:u,output:y,dynamic:f.type==="dynamic"}}catch(g){return ple(m,g),{type:"tool-error",toolCallId:l,toolName:c,input:u,error:g,dynamic:f.type==="dynamic"}}}})}))).filter(l=>l!=null)}var Kut=class{constructor(e){this.steps=e.steps,this.resolvedOutput=e.resolvedOutput}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get totalUsage(){return this.steps.reduce((e,t)=>Put(e,t.usage),{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0})}get experimental_output(){if(this.resolvedOutput==null)throw new Hct;return this.resolvedOutput}};function TV(e){const t=e.filter(n=>n.type==="tool-call");if(t.length!==0)return t.map(n=>({toolCallId:n.toolCallId,toolName:n.toolName,input:n.input}))}function Zut({content:e,toolCalls:t,toolOutputs:n}){return[...e.map(r=>{switch(r.type){case"text":case"reasoning":case"source":return r;case"file":return{type:"file",file:new zut(r)};case"tool-call":return t.find(s=>s.toolCallId===r.toolCallId);case"tool-result":{const s=t.find(o=>o.toolCallId===r.toolCallId);if(s==null)throw new Error(`Tool call ${r.toolCallId} not found.`);return r.isError?{type:"tool-error",toolCallId:r.toolCallId,toolName:r.toolName,input:s.input,error:r.result,providerExecuted:!0,dynamic:s.dynamic}:{type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,input:s.input,output:r.result,providerExecuted:!0,dynamic:s.dynamic}}}}),...n]}(class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}});function Jut(e){const t=["ROOT"];let n=-1,r=null;function s(l,c,u){switch(l){case'"':{n=c,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function o(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function i(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":s(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{o(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,t.pop();break}default:{n=l,s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const f=e.substring(r,l+1);!"false".startsWith(f)&&!"true".startsWith(f)&&!"null".startsWith(f)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?o(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l)):n=l;break}}}let a=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=e.substring(r,e.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}async function Xut(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await Tm({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await Tm({text:Jut(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}Jw({prefix:"aitxt",size:24});Jw({prefix:"aiobj",size:24});Jw({prefix:"aiobj",size:24});var Qut={};jct(Qut,{object:()=>tdt,text:()=>edt});var edt=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:e}){return{partial:e}},async parseOutput({text:e}){return e}}),tdt=({schema:e})=>{const t=i3(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:n}){const r=await Xut(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const s=r.state;throw new Error(`Unsupported parse state: ${s}`)}}},async parseOutput({text:n},r){const s=await Tm({text:n});if(!s.success)throw new yV({message:"No object generated: could not parse the response.",cause:s.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const o=await Qf({value:s.value,schema:t});if(!o.success)throw new yV({message:"No object generated: response did not match schema.",cause:o.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return o.value}}};function ndt(e,t){const n=e.startsWith("/Users/")||e.startsWith("/home/")||e.startsWith("/var/")||/^[A-Z]:\\/.test(e);let r=e;const s=r.match(/localhost:\d+\/(.+)$/);return s&&(r=s[1]),r=r.replace(/^\/+/,""),r=r.split("?")[0],console.log("[Source Patch] Cleaned path:",r),n?{resolved:e}:t?{resolved:`${t}/${r}`}:{resolved:null,error:"No projectPath provided for relative path"}}function rdt(e,t,n){console.log("[Source Patch] FAST PATH: Image src change detected"),console.log("[Source Patch] New src:",n);const r=e.split(`
`);let s=t;s>r.length&&(s=r.length);const o=15,i=Math.max(0,s-o-1),a=Math.min(r.length,s+o);for(let l=i;l<a;l++){const c=r[l];if(/<img\s/i.test(c)||/src\s*=/i.test(c)){console.log("[Source Patch] Found potential img at line",l+1,":",c.substring(0,60));const u=c.match(/src\s*=\s*(['"])([^'"]*)\1/),f=c.match(/src\s*=\s*\{([^}]*)\}/);if(u){const m=u[1];return r[l]=c.replace(u[0],`src=${m}${n}${m}`),console.log("[Source Patch] Replaced quoted src attribute"),r.join(`
`)}else if(f)return r[l]=c.replace(f[0],`src="${n}"`),console.log("[Source Patch] Replaced JSX src expression"),r.join(`
`)}}return null}function sdt(e,t,n){console.log("[Source Patch] FAST PATH: Simple text change detected"),console.log("[Source Patch] Old text:",t.substring(0,50)),console.log("[Source Patch] New text:",n.substring(0,50));const r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=[new RegExp(`(>\\s*)${r}(\\s*<)`,"g"),new RegExp(`(['"])${r}\\1`,"g"),new RegExp(`(\`)${r}(\`)`,"g")];for(const o of s)if(o.test(e)){const i=e.replace(o,(a,l,c)=>(console.log("[Source Patch] Found match:",a.substring(0,50)),`${l}${n}${c||l}`));if(i!==e)return console.log("[Source Patch] FAST PATH SUCCESS - replaced text directly"),i}return null}function odt(e,t,n,r){var y,v;console.log("[Source Patch] FAST PATH: CSS-only change detected"),console.log("[Source Patch] CSS changes:",r);const s=e.split(`
`);let o=t;o>s.length&&(o=s.length);const i=Object.entries(r).map(([w,_])=>`${w}: '${_}'`).join(", "),a=`{ ${i} }`,l=30,c=Math.max(0,o-l-1),u=Math.min(s.length,o+l),f=(y=n.tagName)==null?void 0:y.toLowerCase(),m=(v=n.className)==null?void 0:v.split(" ")[0],g=n.id;if(console.log("[Source Patch] CSS Fast Path searching for:"),console.log("[Source Patch]   tagName:",f),console.log("[Source Patch]   className:",m),console.log("[Source Patch]   targetLine:",o),console.log("[Source Patch]   searchRange:",c+1,"to",u),!m&&!g)return console.log("[Source Patch] No class or id - skipping fast path (too ambiguous)"),null;for(let w=c;w<u;w++){const _=s[w],S=new RegExp(`<${f}[\\s>]`,"i"),k=m?new RegExp(`className=["'\`][^"'\`]*\\b${m}\\b`):null,R=g?new RegExp(`id=["'\`]${g}["'\`]`):null,O=S.test(_),M=k&&k.test(_),P=R&&R.test(_);if(O&&M||O&&P||P&&!O){console.log("[Source Patch] Found element at line",w+1,":",_.substring(0,60));const q=_.match(/style=\{(\{[^}]*\})\}/),U=_.match(/style="([^"]*)"/);if(q){const z=q[1],H=Object.entries(r).filter(([F])=>!z.includes(F)).map(([F,W])=>`${F}: '${W}'`).join(", ");if(H){const F=z.replace(/\s*\}$/,"")+", "+H+" }";return s[w]=_.replace(q[0],`style={${F}}`),console.log("[Source Patch] Merged into existing style prop"),s.join(`
`)}else return console.log("[Source Patch] Style properties already exist - no change needed"),e}else if(U){const H=U[1].split(";").filter(W=>W.trim()).map(W=>{const[X,J]=W.split(":").map(re=>re.trim());return`${X.replace(/-([a-z])/g,(re,ie)=>ie.toUpperCase())}: '${J}'`}).join(", "),F=H?`{ ${H}, ${i} }`:a;return s[w]=_.replace(U[0],`style={${F}}`),console.log("[Source Patch] Converted string style and merged"),s.join(`
`)}else{const z=_.match(new RegExp(`(<${f})([\\s>])`,"i"));if(z)return s[w]=_.replace(z[0],`${z[1]} style={${a}}${z[2]}`),console.log("[Source Patch] Added new style prop"),s.join(`
`)}}}return null}async function idt(e,t,n,r){var s;if(!((s=window.electronAPI)!=null&&s.fastApply))return{success:!1,error:"Fast Apply not available"};try{console.log("[Source Patch] Checking Fast Apply availability...");const o=await window.electronAPI.fastApply.getStatus();if(!o.activeModel)return{success:!1,error:"No model selected"};console.log("[Source Patch] Fast Apply has active model:",o.activeModel);const i=Object.keys(n).length>0,a=r&&/(?:remove|delete|hide)\s+(?:this|that|it|the|element)?/i.test(r);let l="";const c=t.className?` className="${t.className.split(" ")[0]}"`:"",u=`<${t.tagName}${c}>`;if(a)l=`FIND: ${u}
REPLACE WITH: {false && ${u}...${t.tagName}>}`;else if(i){const v=Object.entries(n).map(([_,S])=>`${_}: '${S}'`).join(", "),w=`<${t.tagName} style={{ ${v} }}${c}>`;l=`FIND: ${u}
REPLACE WITH: ${w}`}else l=r||"";const f=await window.electronAPI.fastApply.apply(e,l);if(!f.success||!f.code)return{success:!1,error:f.error||"Unknown error"};const m=[/^The provided/i,/^I cannot/i,/^I apologize/i,/^Unfortunately/i,/^This (code|update|change)/i,/^Here'?s (how|an example)/i,/does not make sense/i,/is not (a )?valid/i,/you (should|can|need to)/i],g=f.code.trim().split(`
`)[0];return m.some(v=>v.test(g))?(console.log("[Source Patch] Fast Apply returned PROSE instead of code - rejecting"),{success:!1,error:"Model returned prose instead of code"}):{success:!0,code:f.code,durationMs:f.durationMs}}catch(o){return console.log("[Source Patch] Fast Apply error:",o),{success:!1,error:String(o)}}}async function adt(e,t,n,r,s,o,i,a,l){var S,k,R;if(!((k=(S=window.electronAPI)==null?void 0:S.aiSdk)!=null&&k.generate))return console.log("[Source Patch] AI SDK generate not available"),null;const c=Object.keys(n).length>0,u=c?Object.entries(n).map(([O,M])=>`${O.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${M}`).join("; "):"";let f="";if(c&&l)f=`CSS changes to apply: ${u}

User's request: "${l}"`;else if(c)f=`CSS changes to apply: ${u}`;else if(l)f=`User's request: "${l}"`;else return console.log("[Source Patch] No changes specified, skipping"),null;const m=e.split(`
`),g=o<=m.length,y=!g||t.text||t.className;let v="";if(y?(v=`1. SEARCH the snippet for a <${t.tagName}> element`,t.text&&(v+=` containing text "${t.text.substring(0,50)}"`),t.className&&(v+=` with class "${t.className.split(" ")[0]}"`)):v=`1. Find the JSX element near line ${o} (should be near the middle of the snippet)`,c&&(v+=`
2. MODIFY the existing element's opening tag to add/merge a style prop - DO NOT create a duplicate element
3. If using Tailwind, convert to Tailwind classes where appropriate
4. The result should have the SAME NUMBER of elements - only the style prop changes`),l){const O=/^["'][^"']+["']$/.test(l.trim())||/(?:change|set|update)\s+(?:text|label|content|title)/i.test(l)||/text\s*(?:to|:|=)/i.test(l);/(?:remove|delete|hide)\s+(?:this|that|it|the)/i.test(l)?v+=`
2. To remove/delete/hide the element, add style={{ display: 'none' }} to it
3. Or if the user wants it fully removed, wrap it in {false && <element>...</element>}`:(O||!c)&&(v+=`
2. Update the text content of the element based on the user's request
3. If the request is quoted text like "New Text", use that as the new content`)}v+=`
${c?"5":"3"}. Output ONLY the modified snippet (lines ${i+1} to ${a}), no explanations
${c?"6":"4"}. Preserve exact indentation and formatting
${c?"7":"5"}. CRITICAL: Do NOT duplicate elements - modify in-place`;const w="You are a React/TypeScript code modifier. Given a code snippet and requested changes, output ONLY the modified snippet. Do not include explanations, markdown code blocks, or any other text - just the raw code.",_=`Source file: ${s}
${g?`Target line in original file: ${o}`:"(Line number from source map may be inaccurate - search by element characteristics)"}
Snippet shows lines ${i+1} to ${a}

Code snippet:
${e}

Element being modified:
- Tag: ${t.tagName}
- Classes: ${t.className||"none"}
- ID: ${t.id||"none"}
- Current text content: ${((R=t.text)==null?void 0:R.substring(0,100))||"none"}

${f}

Instructions:
${v}

Output the modified code snippet:`;try{const O=r.modelId||"claude-haiku-4-5";console.log("[Source Patch] Calling AI SDK for code modification with model:",O);const M={};for(const F of r.providers)F.apiKey&&(M[F.id]=F.apiKey);const P=await window.electronAPI.aiSdk.generate({modelId:O,messages:[{role:"user",content:_}],providers:M,system:w,maxSteps:1});if(!P.success||!P.text)return console.log("[Source Patch] AI SDK generate failed:",P.error||"No text returned"),null;console.log("[Source Patch] AI SDK response received, length:",P.text.length);let j=P.text.trim();const q=j.match(/```(?:tsx?|jsx?|typescript|javascript)?\s*([\s\S]*?)```/);q&&(j=q[1].trim(),console.log("[Source Patch] Extracted code from markdown block"));const U=[/^The provided/i,/^I cannot/i,/^I apologize/i,/^Unfortunately/i,/^This (code|update|change)/i,/^Here'?s (how|an example)/i,/does not make sense/i,/is not (a )?valid/i,/you (should|can|need to)/i],z=j.split(`
`)[0];return U.some(F=>F.test(z))?(console.log("[Source Patch] AI returned PROSE instead of code - aborting"),console.log("[Source Patch] First line:",z.substring(0,100)),null):j}catch(O){return console.error("[Source Patch] EXCEPTION during AI SDK generation:",O),null}}async function ldt(e){var ee,re,ie,Z,te,oe,Q,Te,ge,Ce,he,Fe;const{element:t,cssChanges:n,providerConfig:r,projectPath:s,userRequest:o,textChange:i,srcChange:a}=e;if(console.log("=".repeat(60)),console.log("[Source Patch] === STARTING PATCH GENERATION ==="),console.log("[Source Patch] Input:",{elementTag:t.tagName,hasSourceLocation:!!t.sourceLocation,sourceFile:(ie=(re=(ee=t.sourceLocation)==null?void 0:ee.sources)==null?void 0:re[0])==null?void 0:ie.file,sourceLine:(oe=(te=(Z=t.sourceLocation)==null?void 0:Z.sources)==null?void 0:te[0])==null?void 0:oe.line,cssChanges:Object.keys(n).length>0?n:"none",projectPath:s||"NOT SET",userRequest:(o==null?void 0:o.substring(0,50))||"none",modelId:r.modelId,hasSrcChange:!!a}),console.log("=".repeat(60)),!((Te=(Q=t.sourceLocation)==null?void 0:Q.sources)!=null&&Te[0]))return console.log("[Source Patch] ABORT: No source location available in element"),console.log("[Source Patch] element.sourceLocation =",JSON.stringify(t.sourceLocation,null,2)),null;const l=t.sourceLocation.sources[0];let c=l.file;console.log("[Source Patch] Original source file:",c,"line:",l.line);const{resolved:u,error:f}=ndt(c,s);if(u)c=u,console.log("[Source Patch] Path resolved:",c);else if((Ce=(ge=window.electronAPI)==null?void 0:ge.files)!=null&&Ce.getCwd){console.log("[Source Patch] No projectPath, trying getCwd fallback...");const De=await window.electronAPI.files.getCwd();if(console.log("[Source Patch] getCwd result:",De),De.success&&De.data){let Re=c;const tt=Re.match(/localhost:\d+\/(.+)$/);tt&&(Re=tt[1]),Re=Re.replace(/^\/+/,"").split("?")[0],c=`${De.data}/${Re}`,console.log("[Source Patch] Full path with CWD fallback:",c)}else return console.log("[Source Patch] ABORT: getCwd failed:",De.error),null}else return console.log("[Source Patch] ABORT:",f),null;if(c.includes("/ai-cluso/")&&!c.includes("/ai-cluso/website/"))return console.log("[Source Patch] ABORT: BLOCKED - Cannot patch app source files:",c),null;if(!((Fe=(he=window.electronAPI)==null?void 0:he.files)!=null&&Fe.readFile))return console.log("[Source Patch] ABORT: File API (readFile) not available"),null;console.log("[Source Patch] Reading source file:",c);const m=await window.electronAPI.files.readFile(c);if(!m.success||!m.data)return console.log("[Source Patch] ABORT: Failed to read source file"),console.log("[Source Patch] Error:",m.error),null;console.log("[Source Patch] File read successfully, length:",m.data.length);const g=m.data,y=Object.keys(n).length>0,v=i&&i.oldText&&i.newText;if(a&&a.newSrc&&!y&&!v){const De=rdt(g,l.line,a.newSrc);if(De&&De!==g)return console.log("[Source Patch] FAST PATH SUCCESS - replaced img src directly"),{filePath:c,originalContent:g,patchedContent:De,lineNumber:l.line,generatedBy:"fast-path"};console.log("[Source Patch] Src fast path failed - falling back to AI")}if(v&&!y){const De=sdt(g,i.oldText,i.newText);if(De)return{filePath:c,originalContent:g,patchedContent:De,lineNumber:l.line,generatedBy:"fast-path"};console.log("[Source Patch] Text fast path failed - falling back to AI")}if(y&&(!i||!i.newText)){const De=odt(g,l.line,t,n);if(De&&De!==g)return console.log("[Source Patch] FAST PATH SUCCESS - modified style directly"),{filePath:c,originalContent:g,patchedContent:De,lineNumber:l.line,generatedBy:"fast-path"};console.log("[Source Patch] CSS fast path failed - falling back to AI")}const _=g.split(`
`);let S=l.line;S>_.length&&(console.log("[Source Patch] Source map line",S,"exceeds file length",_.length),console.log("[Source Patch] Clamping target to end of file"),S=_.length);const k=30,R=Math.max(0,S-k),O=Math.min(_.length,S+k),M=_.slice(R,O).join(`
`);console.log("[Source Patch] Fast Apply snippet: lines",R+1,"to",O,"(",M.length,"chars)");const P=await idt(M,t,n,o);if(P.success&&P.code){console.log("[Source Patch] Fast Apply SUCCESS! Duration:",P.durationMs,"ms");const De=P.code.split(`
`),Re=_.slice(0,R),tt=_.slice(O),fe=[...Re,...De,...tt].join(`
`);if(fe!==g)return console.log("=".repeat(60)),console.log("[Source Patch] === FAST APPLY PATCH GENERATED ==="),console.log("[Source Patch] Output:",{filePath:c,originalLength:g.length,patchedLength:fe.length,lineNumber:l.line,durationMs:P.durationMs}),console.log("=".repeat(60)),{filePath:c,originalContent:g,patchedContent:fe,lineNumber:l.line,generatedBy:"fast-apply",durationMs:P.durationMs};console.log("[Source Patch] Fast Apply returned unchanged content, falling back to Gemini")}else console.log("[Source Patch] Fast Apply not available or failed:",P.error);const j=100,q=Math.max(0,S-j),U=Math.min(_.length,S+j);if(q>=U)return console.log("[Source Patch] ABORT: Invalid line range:",q,"to",U),null;const z=_.slice(q,U).join(`
`);console.log("[Source Patch] AI SDK snippet: lines",q+1,"to",U,"(",z.length,"chars)");const H=await adt(z,t,n,r,l.file,S,q,U,o);if(!H)return null;const F=H.split(`
`),W=_.slice(0,q),X=_.slice(U),J=[...W,...F,...X].join(`
`);return console.log("=".repeat(60)),console.log("[Source Patch] === PATCH GENERATED SUCCESSFULLY ==="),console.log("[Source Patch] Output:",{filePath:c,originalLength:g.length,patchedLength:J.length,lineNumber:l.line,changed:g!==J}),console.log("=".repeat(60)),{filePath:c,originalContent:g,patchedContent:J,lineNumber:l.line,generatedBy:"gemini"}}const q_=new Map,cdt=[{pattern:/Invalid hook call/i,category:"react",keywords:["hook","rules","component"],description:"React Hook called outside of functional component"},{pattern:/Cannot read propert[ies]? of (undefined|null)/i,category:"react",keywords:["undefined","null reference","property access"],description:"Attempting to access property on undefined/null value"},{pattern:/Maximum update depth exceeded/i,category:"react",keywords:["infinite loop","useEffect","dependency"],description:"Infinite loop in React component updates"},{pattern:/Type '[^']+' is not assignable to type/i,category:"typescript",keywords:["type mismatch","typescript","assignment"],description:"TypeScript type incompatibility"},{pattern:/Property '[^']+' does not exist/i,category:"typescript",keywords:["property","typescript","interface"],description:"TypeScript property not found on type"},{pattern:/Module not found|Cannot find module/i,category:"build",keywords:["import","module","path resolution"],description:"Build error - module cannot be resolved"},{pattern:/Failed to compile/i,category:"build",keywords:["compilation","syntax","import"],description:"General compilation error"},{pattern:/CORS error|Access-Control-Allow|Cross-Origin/i,category:"network",keywords:["cors","cross-origin","api"],description:"Cross-Origin Resource Sharing (CORS) error"},{pattern:/Failed to fetch|Network request failed|fetch.*error/i,category:"network",keywords:["network","api","connection"],description:"Network request failed"},{pattern:/(404|500|502|503) (?:Not Found|Internal Server Error|Bad Gateway|Service Unavailable)/i,category:"network",keywords:["http error","server error"],description:"HTTP error response"},{pattern:/ReferenceError.*is not defined/i,category:"runtime",keywords:["undefined variable","reference error"],description:"Variable is not defined"},{pattern:/Cannot find name/i,category:"typescript",keywords:["typescript","undefined variable"],description:"TypeScript: variable name not found"}];function a3(e){e.toLowerCase();for(const t of cdt)if(t.pattern.test(e))return{signature:t,category:t.category,errorKey:XI(e),isKnownError:!0};return{signature:null,category:"unknown",errorKey:XI(e),isKnownError:!1}}function XI(e){const t=e.replace(/line \d+/gi,"LINE_N").replace(/column \d+/gi,"COL_N").replace(/at .*?\.js:\d+/g,"AT_FILE").substring(0,100);return Buffer.from(t).toString("base64").substring(0,32)}function udt(e,t,n){const r=a3(e),s={errorKey:r.errorKey,message:e,solution:t,category:r.category,timestamp:Date.now(),searchQuery:n};q_.set(r.errorKey,s);try{const o=`error_solution_${r.errorKey}`;localStorage.setItem(o,JSON.stringify(s))}catch(o){console.warn("[ErrorSolutions] localStorage not available:",o)}return s}function ddt(e){const t=a3(e);if(q_.has(t.errorKey))return q_.get(t.errorKey)||null;try{const n=`error_solution_${t.errorKey}`,r=localStorage.getItem(n);if(r){const s=JSON.parse(r);return q_.set(t.errorKey,s),s}}catch(n){console.warn("[ErrorSolutions] Error reading from localStorage:",n)}return null}function CV(e){const t=a3(e);if(!t.signature)return e.split(`
`)[0].substring(0,100);const n=t.signature.keywords.slice(0,3);return`${t.signature.description} ${n.join(" ")}`}function fdt(e){return{react:"",typescript:"",build:"",network:"",runtime:"",unknown:""}[e]}function hdt(e){return["build","typescript"].includes(e)}function pdt(e=500){const t=new Map;return n=>{const r=XI(n),s=Date.now(),o=t.get(r);return o&&s-o<e?!1:(t.set(r,s),!0)}}function mdt(e={}){const{onErrorDetected:t,onSolutionFound:n,debounceMs:r=500,enableAutoSearch:s=!0,maxCachedErrors:o=50}=e,[i,a]=x.useState([]),[l,c]=x.useState(!1),u=x.useRef(pdt(r)),f=x.useRef(null);x.useEffect(()=>{const w=console.error,_=console.warn,S=k=>{if(!u.current(k))return;const R=a3(k),O=`error_${Date.now()}_${Math.random()}`,M=ddt(k),P=CV(k),j={id:O,message:k,level:"error",category:R.category,timestamp:Date.now(),icon:fdt(R.category),isCritical:hdt(R.category),solution:M?{text:M.solution,source:"cached",query:M.searchQuery}:void 0,isSearching:s&&!M};a(q=>[j,...q].slice(0,o)),t&&t(j),s&&!M&&R.isKnownError&&m(j,P,k)};return console.error=(...k)=>{const R=k.map(O=>{if(typeof O=="object")try{return JSON.stringify(O)}catch{return String(O)}return String(O)}).join(" ");S(R),w.apply(console,k)},console.warn=(...k)=>{const R=k.map(O=>{if(typeof O=="object")try{return JSON.stringify(O)}catch{return String(O)}return String(O)}).join(" ");R.includes("Warning")||R.includes("deprecated")||R.includes("React"),_.apply(console,k)},f.current=()=>{console.error=w,console.warn=_},()=>{f.current&&f.current()}},[s,t,o]);const m=x.useCallback(async(w,_,S)=>{c(!0);try{const k=gdt(w.category,_);k?(udt(S,k,_),a(R=>R.map(O=>O.id===w.id?{...O,solution:{text:k,source:"search",query:_},isSearching:!1}:O)),n&&n({...w,solution:{text:k,source:"search",query:_},isSearching:!1})):a(R=>R.map(O=>O.id===w.id?{...O,isSearching:!1}:O))}catch(k){console.warn("[useErrorPrefetch] Search failed:",k),a(R=>R.map(O=>O.id===w.id?{...O,isSearching:!1}:O))}finally{c(!1)}},[n]),g=x.useCallback(async w=>{const _=i.find(k=>k.id===w);if(!_)return;const S=CV(_.message);await m(_,S,_.message)},[i,m]),y=x.useCallback(()=>{a([])},[]),v=x.useCallback(w=>{a(_=>_.filter(S=>S.id!==w))},[]);return{errors:i,isSearching:l,clearErrors:y,removeError:v,searchForSolution:g}}function gdt(e,t){const n={react:`This is a React-related error. Common fixes:
1. Check that hooks are only called at the top level of components
2. Ensure dependencies in useEffect are correct
3. Verify component names start with uppercase
4. Check for invalid hook calls in conditionals
Search: "${t}"`,typescript:`This is a TypeScript error. Common fixes:
1. Verify the type matches what's expected
2. Check import statements for correct types
3. Ensure all required properties are provided
4. Use type assertions carefully (as const)
Search: "${t}"`,build:`This is a build error. Common fixes:
1. Check that all imports use correct file paths
2. Verify node_modules is installed (npm install / pnpm install)
3. Clear build cache (rm -rf .next/build or dist/)
4. Check for syntax errors in modified files
Search: "${t}"`,network:`This is a network error. Common fixes:
1. Check CORS headers on the API endpoint
2. Verify the API endpoint is accessible
3. Check network tab in DevTools for the actual error
4. Ensure request headers are correct (auth, content-type)
Search: "${t}"`,runtime:`This is a runtime error. Common fixes:
1. Check that variables are defined before use
2. Verify array/object access is safe
3. Add null/undefined checks
4. Check browser console for actual error
Search: "${t}"`,unknown:`Unable to categorize this error. General debugging steps:
1. Check the browser console for more details
2. Search the error message online
3. Check if this is a known issue in your dependencies
4. Try restarting the development server
Search: "${t}"`};return n[e]||n.unknown}const bdt=({error:e,isDarkMode:t=!1,onRemove:n,onSearch:r})=>{var l;const[s,o]=x.useState(!1),i=!!e.solution,a=e.isSearching;return h.jsxs("div",{className:`error-solution-badge-container ${t?"dark":""}`,children:[h.jsxs("div",{className:`error-solution-badge ${e.isCritical?"critical":"warning"}`,children:[h.jsx("span",{className:"badge-icon",children:e.isCritical?h.jsx(Rq,{size:14}):h.jsx(_0,{size:14})}),h.jsx("span",{className:"badge-text",children:i?h.jsxs(h.Fragment,{children:[h.jsx(J_,{size:12,className:"inline mr-1"}),"Solution available"]}):a?h.jsxs(h.Fragment,{children:[h.jsx(Gf,{size:12,className:"inline mr-1 animate-spin"}),"Searching..."]}):"No solution found"}),i&&h.jsx("button",{className:"badge-toggle",onClick:()=>o(!s),title:s?"Hide solution":"Show solution",children:h.jsx($f,{size:14,className:`transition-transform ${s?"rotate-180":""}`})}),!i&&!a&&r&&h.jsx("button",{className:"badge-search",onClick:()=>r(e.id),title:"Search for solution",children:h.jsx(Gf,{size:12})}),n&&h.jsx("button",{className:"badge-close",onClick:()=>n(e.id),title:"Dismiss error",children:h.jsx(qr,{size:12})})]}),s&&i&&h.jsxs("div",{className:"error-solution-detail",children:[h.jsx("div",{className:"solution-header",children:h.jsx("span",{className:"solution-source",children:e.solution.source==="cached"?" Cached":" Found"})}),h.jsx("div",{className:"solution-text",children:e.solution.text}),e.solution.query&&h.jsxs("div",{className:"solution-query",children:[h.jsx("span",{className:"query-label",children:"Search query:"}),h.jsx("code",{className:"query-code",children:e.solution.query})]}),h.jsxs("div",{className:"solution-actions",children:[typeof window<"u"&&((l=window.electronAPI)==null?void 0:l.openExternal)&&h.jsx("button",{className:"action-button secondary",onClick:()=>{var u;const c=`https://www.google.com/search?q=${encodeURIComponent(((u=e.solution)==null?void 0:u.query)||"")}`;window.electronAPI.openExternal(c)},children:"Search Web"}),n&&h.jsx("button",{className:"action-button primary",onClick:()=>n(e.id),children:"Got it"})]})]}),h.jsx("style",{children:`
        .error-solution-badge-container {
          margin: 8px 0;
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        .error-solution-badge {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 8px 12px;
          border-radius: 6px;
          font-size: 13px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.15s ease-out;
          border: 1px solid transparent;
        }

        .error-solution-badge.critical {
          background-color: rgba(239, 68, 68, 0.1);
          color: #dc2626;
          border-color: rgba(239, 68, 68, 0.3);
        }

        .dark .error-solution-badge.critical {
          background-color: rgba(239, 68, 68, 0.2);
          color: #f87171;
          border-color: rgba(239, 68, 68, 0.4);
        }

        .error-solution-badge.warning {
          background-color: rgba(245, 158, 11, 0.1);
          color: #d97706;
          border-color: rgba(245, 158, 11, 0.3);
        }

        .dark .error-solution-badge.warning {
          background-color: rgba(245, 158, 11, 0.2);
          color: #fbbf24;
          border-color: rgba(245, 158, 11, 0.4);
        }

        .error-solution-badge:hover {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .dark .error-solution-badge:hover {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .badge-icon {
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .badge-text {
          display: flex;
          align-items: center;
          flex: 1;
        }

        .badge-toggle,
        .badge-search,
        .badge-close {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 4px;
          cursor: pointer;
          border: none;
          background: transparent;
          color: inherit;
          border-radius: 4px;
          transition: background-color 0.15s;
        }

        .badge-toggle:hover,
        .badge-search:hover {
          background-color: rgba(0, 0, 0, 0.1);
        }

        .dark .badge-toggle:hover,
        .dark .badge-search:hover {
          background-color: rgba(255, 255, 255, 0.1);
        }

        .badge-close:hover {
          background-color: rgba(239, 68, 68, 0.2);
          color: #dc2626;
        }

        .dark .badge-close:hover {
          background-color: rgba(239, 68, 68, 0.3);
          color: #f87171;
        }

        .error-solution-detail {
          margin-top: 8px;
          padding: 12px;
          background-color: rgba(255, 255, 255, 0.5);
          border: 1px solid rgba(0, 0, 0, 0.1);
          border-radius: 6px;
          font-size: 12px;
          line-height: 1.5;
          color: rgba(0, 0, 0, 0.7);
        }

        .dark .error-solution-detail {
          background-color: rgba(0, 0, 0, 0.3);
          border-color: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.8);
        }

        .solution-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 8px;
          padding-bottom: 8px;
          border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .dark .solution-header {
          border-color: rgba(255, 255, 255, 0.1);
        }

        .solution-source {
          font-weight: 600;
          color: rgba(0, 0, 0, 0.8);
        }

        .dark .solution-source {
          color: rgba(255, 255, 255, 0.9);
        }

        .solution-text {
          margin: 8px 0;
          white-space: pre-wrap;
          word-break: break-word;
          color: rgba(0, 0, 0, 0.7);
        }

        .dark .solution-text {
          color: rgba(255, 255, 255, 0.8);
        }

        .solution-query {
          margin: 8px 0;
          padding: 8px;
          background-color: rgba(0, 0, 0, 0.05);
          border-radius: 4px;
          font-family: "Monaco", "Menlo", monospace;
          font-size: 11px;
        }

        .dark .solution-query {
          background-color: rgba(0, 0, 0, 0.3);
        }

        .query-label {
          display: block;
          font-weight: 600;
          margin-bottom: 4px;
          color: rgba(0, 0, 0, 0.6);
        }

        .dark .query-label {
          color: rgba(255, 255, 255, 0.6);
        }

        .query-code {
          display: block;
          padding: 4px;
          background-color: rgba(0, 0, 0, 0.1);
          border-radius: 3px;
          color: rgba(0, 0, 0, 0.8);
          break: break-all;
        }

        .dark .query-code {
          background-color: rgba(0, 0, 0, 0.4);
          color: rgba(255, 255, 255, 0.9);
        }

        .solution-actions {
          display: flex;
          gap: 8px;
          margin-top: 12px;
          padding-top: 8px;
          border-top: 1px solid rgba(0, 0, 0, 0.1);
          justify-content: flex-end;
        }

        .dark .solution-actions {
          border-color: rgba(255, 255, 255, 0.1);
        }

        .action-button {
          padding: 6px 12px;
          border: none;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.15s;
        }

        .action-button.primary {
          background-color: rgba(59, 130, 246, 0.9);
          color: white;
        }

        .action-button.primary:hover {
          background-color: rgb(59, 130, 246);
          transform: translateY(-1px);
        }

        .action-button.secondary {
          background-color: rgba(0, 0, 0, 0.1);
          color: rgba(0, 0, 0, 0.7);
        }

        .dark .action-button.secondary {
          background-color: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.7);
        }

        .action-button.secondary:hover {
          background-color: rgba(0, 0, 0, 0.2);
          transform: translateY(-1px);
        }

        .dark .action-button.secondary:hover {
          background-color: rgba(255, 255, 255, 0.2);
        }

        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }

        .animate-spin {
          animation: spin 1s linear infinite;
        }
      `})]})},ydt=({errors:e,isVisible:t,isDarkMode:n=!1,onToggle:r,onRemoveError:s,onSearchForSolution:o,onClearAll:i})=>{const a=e.length,l=e.filter(u=>u.isCritical).length,c=e.filter(u=>u.solution).length;return!t||a===0?null:h.jsxs("div",{className:`error-solution-panel ${n?"dark":""}`,children:[h.jsxs("div",{className:"panel-header",children:[h.jsxs("div",{className:"header-title",children:[h.jsx(Rq,{size:18}),h.jsx("span",{className:"title-text",children:"Error Solutions"}),h.jsxs("span",{className:"error-badge",children:[l>0&&h.jsx("span",{className:"critical-count",children:l}),a]})]}),h.jsxs("div",{className:"header-actions",children:[c>0&&h.jsxs("span",{className:"solved-indicator",children:[" ",c," solved"]}),i&&a>0&&h.jsx("button",{className:"action-button clear",onClick:i,title:"Clear all errors",children:h.jsx(Ff,{size:16})}),r&&h.jsx("button",{className:"close-button",onClick:r,title:"Close panel",children:h.jsx(qr,{size:18})})]})]}),h.jsx("div",{className:"error-list",children:e.map(u=>h.jsxs("div",{className:"error-item",children:[h.jsxs("div",{className:"error-header",children:[h.jsx("span",{className:"error-icon",children:u.icon}),h.jsxs("div",{className:"error-info",children:[h.jsx("span",{className:"error-category",children:u.category.toUpperCase()}),h.jsx("span",{className:"error-time",children:new Date(u.timestamp).toLocaleTimeString()})]}),u.isCritical&&h.jsx("span",{className:"critical-indicator",title:"Critical error",children:"!"})]}),h.jsxs("div",{className:"error-message",children:[h.jsx("code",{children:u.message.substring(0,200)}),u.message.length>200&&h.jsx("span",{children:"..."})]}),h.jsx(bdt,{error:u,isDarkMode:n,onRemove:s,onSearch:o})]},u.id))}),a>0&&h.jsx("div",{className:"panel-footer",children:h.jsxs("div",{className:"footer-stats",children:[h.jsxs("span",{className:"stat",children:[h.jsx("span",{className:"stat-label",children:"Critical:"}),h.jsx("span",{className:"stat-value",children:l})]}),h.jsxs("span",{className:"stat",children:[h.jsx("span",{className:"stat-label",children:"Warnings:"}),h.jsx("span",{className:"stat-value",children:a-l})]}),h.jsxs("span",{className:"stat",children:[h.jsx("span",{className:"stat-label",children:"Solved:"}),h.jsx("span",{className:"stat-value",children:c})]})]})}),h.jsx("style",{children:`
        .error-solution-panel {
          position: fixed;
          bottom: 0;
          right: 0;
          width: 100%;
          max-width: 600px;
          max-height: 500px;
          background: white;
          border-top: 1px solid #e5e7eb;
          border-left: 1px solid #e5e7eb;
          border-radius: 12px 12px 0 0;
          box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
          display: flex;
          flex-direction: column;
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
          z-index: 9999;
          animation: slideUp 0.3s ease-out;
        }

        .error-solution-panel.dark {
          background: #1f2937;
          border-color: #374151;
          box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.4);
        }

        @keyframes slideUp {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }

        .panel-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 16px;
          border-bottom: 1px solid #e5e7eb;
          background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
          border-radius: 12px 12px 0 0;
        }

        .dark .panel-header {
          border-color: #374151;
          background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
        }

        .header-title {
          display: flex;
          align-items: center;
          gap: 12px;
          font-size: 16px;
          font-weight: 600;
          color: #1f2937;
        }

        .dark .header-title {
          color: #f3f4f6;
        }

        .header-title svg {
          color: #ef4444;
        }

        .title-text {
          flex: 1;
        }

        .error-badge {
          display: flex;
          align-items: center;
          justify-content: center;
          min-width: 28px;
          height: 28px;
          padding: 0 8px;
          background: rgba(239, 68, 68, 0.1);
          color: #dc2626;
          border-radius: 14px;
          font-size: 13px;
          font-weight: 600;
          position: relative;
        }

        .dark .error-badge {
          background: rgba(239, 68, 68, 0.2);
          color: #f87171;
        }

        .critical-count {
          position: absolute;
          top: -4px;
          right: -4px;
          width: 18px;
          height: 18px;
          background: #ef4444;
          color: white;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 11px;
          font-weight: 700;
        }

        .header-actions {
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .solved-indicator {
          font-size: 12px;
          color: #10b981;
          font-weight: 600;
          padding: 4px 8px;
          background: rgba(16, 185, 129, 0.1);
          border-radius: 4px;
        }

        .dark .solved-indicator {
          background: rgba(16, 185, 129, 0.2);
          color: #34d399;
        }

        .action-button {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 6px;
          border: none;
          background: transparent;
          color: #6b7280;
          cursor: pointer;
          border-radius: 6px;
          transition: all 0.15s;
        }

        .dark .action-button {
          color: #9ca3af;
        }

        .action-button:hover {
          background: rgba(0, 0, 0, 0.1);
          color: #1f2937;
        }

        .dark .action-button:hover {
          background: rgba(255, 255, 255, 0.1);
          color: #f3f4f6;
        }

        .action-button.clear:hover {
          background: rgba(239, 68, 68, 0.1);
          color: #dc2626;
        }

        .dark .action-button.clear:hover {
          background: rgba(239, 68, 68, 0.2);
          color: #f87171;
        }

        .close-button {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 6px;
          border: none;
          background: transparent;
          color: #6b7280;
          cursor: pointer;
          border-radius: 6px;
          transition: all 0.15s;
        }

        .dark .close-button {
          color: #9ca3af;
        }

        .close-button:hover {
          background: rgba(0, 0, 0, 0.1);
          color: #1f2937;
        }

        .dark .close-button:hover {
          background: rgba(255, 255, 255, 0.1);
          color: #f3f4f6;
        }

        .error-list {
          flex: 1;
          overflow-y: auto;
          padding: 12px 16px;
          gap: 12px;
          display: flex;
          flex-direction: column;
        }

        .error-list::-webkit-scrollbar {
          width: 8px;
        }

        .error-list::-webkit-scrollbar-track {
          background: transparent;
        }

        .error-list::-webkit-scrollbar-thumb {
          background: #d1d5db;
          border-radius: 4px;
        }

        .dark .error-list::-webkit-scrollbar-thumb {
          background: #4b5563;
        }

        .error-list::-webkit-scrollbar-thumb:hover {
          background: #9ca3af;
        }

        .dark .error-list::-webkit-scrollbar-thumb:hover {
          background: #6b7280;
        }

        .error-item {
          padding: 12px;
          background: #f9fafb;
          border: 1px solid #e5e7eb;
          border-radius: 8px;
          transition: all 0.15s;
        }

        .dark .error-item {
          background: #111827;
          border-color: #374151;
        }

        .error-item:hover {
          background: #ffffff;
          border-color: #d1d5db;
        }

        .dark .error-item:hover {
          background: #1f2937;
          border-color: #4b5563;
        }

        .error-header {
          display: flex;
          align-items: center;
          gap: 8px;
          margin-bottom: 8px;
        }

        .error-icon {
          font-size: 16px;
          line-height: 1;
        }

        .error-info {
          display: flex;
          align-items: center;
          gap: 12px;
          flex: 1;
        }

        .error-category {
          font-size: 11px;
          font-weight: 600;
          text-transform: uppercase;
          color: #6b7280;
          padding: 2px 6px;
          background: rgba(0, 0, 0, 0.05);
          border-radius: 3px;
        }

        .dark .error-category {
          color: #9ca3af;
          background: rgba(255, 255, 255, 0.1);
        }

        .error-time {
          font-size: 11px;
          color: #9ca3af;
        }

        .dark .error-time {
          color: #6b7280;
        }

        .critical-indicator {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 20px;
          height: 20px;
          background: #dc2626;
          color: white;
          border-radius: 50%;
          font-size: 12px;
          font-weight: 700;
        }

        .error-message {
          padding: 8px;
          background: rgba(0, 0, 0, 0.05);
          border-radius: 4px;
          margin-bottom: 8px;
        }

        .dark .error-message {
          background: rgba(0, 0, 0, 0.3);
        }

        .error-message code {
          font-family: "Monaco", "Menlo", monospace;
          font-size: 11px;
          color: #374151;
          word-break: break-all;
          white-space: pre-wrap;
        }

        .dark .error-message code {
          color: #d1d5db;
        }

        .panel-footer {
          padding: 12px 16px;
          border-top: 1px solid #e5e7eb;
          background: #f9fafb;
          border-radius: 0 0 12px 12px;
        }

        .dark .panel-footer {
          border-color: #374151;
          background: #111827;
        }

        .footer-stats {
          display: flex;
          gap: 16px;
          font-size: 12px;
        }

        .stat {
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .stat-label {
          color: #6b7280;
          font-weight: 500;
        }

        .dark .stat-label {
          color: #9ca3af;
        }

        .stat-value {
          color: #1f2937;
          font-weight: 600;
          font-size: 14px;
        }

        .dark .stat-value {
          color: #f3f4f6;
        }

        @media (max-width: 768px) {
          .error-solution-panel {
            max-width: 100%;
            max-height: 60vh;
          }

          .header-title {
            font-size: 14px;
          }

          .error-list {
            padding: 12px;
          }

          .error-item {
            padding: 10px;
          }
        }
      `})]})};function vdt(e){e=e.replace(/^#/,"");const t=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,r=parseInt(e.substring(4,6),16)/255;return .299*t+.587*n+.114*r}function tN(e,t){e=e.replace(/^#/,"");let n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return n=Math.min(255,Math.max(0,Math.round(n+n*t/100))),r=Math.min(255,Math.max(0,Math.round(r+r*t/100))),s=Math.min(255,Math.max(0,Math.round(s+s*t/100))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}async function xdt(e,t,n,r="gemini-2.5-flash-lite"){var i,a;const s=gae({apiKey:n}),o=`You are a UI modification assistant. Given an HTML element and a user request, output ONLY a JSON object with changes.

Element:
- Tag: ${e.tagName}
- Classes: ${e.className||"none"}
- ID: ${e.id||"none"}
- Current text: ${((i=e.text)==null?void 0:i.substring(0,100))||"none"}
- Current styles: ${JSON.stringify(e.computedStyle||{})}
- HTML: ${((a=e.outerHTML)==null?void 0:a.substring(0,500))||"N/A"}

User request: "${t}"

Respond with ONLY valid JSON. Use "textChange" for text modifications, "cssChanges" for style changes:
{
  "cssChanges": { "property": "value", ... },
  "textChange": "new text content if changing text",
  "description": "Brief description of changes"
}

IMPORTANT:
- For TEXT changes (changing what the element says): use "textChange" with the new text
- For STYLE changes (colors, sizes, spacing): use "cssChanges" with CSS properties
- Do NOT use cssChanges.content for text - that only works for ::before/::after pseudo-elements

Examples:
- "make it red"  {"cssChanges": {"color": "red"}, "description": "Changed text color to red"}
- "change to Download"  {"textChange": "Download", "description": "Changed text to Download"}
- "Download Now"  {"textChange": "Download Now", "description": "Changed text to Download Now"}
- "bigger font"  {"cssChanges": {"fontSize": "1.5em"}, "description": "Increased font size"}
- "make it say Hello"  {"textChange": "Hello", "description": "Changed text to Hello"}
- "red and say Click Me"  {"cssChanges": {"color": "red"}, "textChange": "Click Me", "description": "Changed color to red and text to Click Me"}`;try{console.log(`[UI Update] Calling ${r} for UI changes...`),console.log("[UI Update] API Key present:",!!n,"length:",n==null?void 0:n.length);const c=(await Wut({model:s(r),prompt:o,maxTokens:200})).text.trim();console.log("[UI Update] Gemini response:",c);const f=(c.match(/```(?:json)?\s*([\s\S]*?)```/)||[null,c])[1]||c;console.log("[UI Update] Parsing JSON:",f);const m=JSON.parse(f);return console.log("[UI Update] Parsed result:",m),{cssChanges:m.cssChanges||{},textChange:m.textChange,description:m.description||"UI updated",success:!0}}catch(l){return console.error("[UI Update] Failed to generate:",l),{cssChanges:{},description:"Failed to generate UI changes",success:!1}}}function wdt(e){const n=new Date().getTime()-e.getTime(),r=Math.floor(n/1e3),s=Math.floor(r/60),o=Math.floor(s/60),i=Math.floor(o/24);return r<30?"just now":r<60?`${r}s ago`:s<60?`${s}m ago`:o<24?`${o}h ago`:`${i}d ago`}const gle=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M4.709 15.955l4.72-2.647.08-.23-.08-.128H9.2l-.79-.048-2.698-.073-2.339-.097-2.266-.122-.571-.121L0 11.784l.055-.352.48-.321.686.06 1.52.103 2.278.158 1.652.097 2.449.255h.389l.055-.157-.134-.098-.103-.097-2.358-1.596-2.552-1.688-1.336-.972-.724-.491-.364-.462-.158-1.008.656-.722.881.06.225.061.893.686 1.908 1.476 2.491 1.833.365.304.145-.103.019-.073-.164-.274-1.355-2.446-1.446-2.49-.644-1.032-.17-.619a2.97 2.97 0 01-.104-.729L6.283.134 6.696 0l.996.134.42.364.62 1.414 1.002 2.229 1.555 3.03.456.898.243.832.091.255h.158V9.01l.128-1.706.237-2.095.23-2.695.08-.76.376-.91.747-.492.584.28.48.685-.067.444-.286 1.851-.559 2.903-.364 1.942h.212l.243-.242.985-1.306 1.652-2.064.73-.82.85-.904.547-.431h1.033l.76 1.129-.34 1.166-1.064 1.347-.881 1.142-1.264 1.7-.79 1.36.073.11.188-.02 2.856-.606 1.543-.28 1.841-.315.833.388.091.395-.328.807-1.969.486-2.309.462-3.439.813-.042.03.049.061 1.549.146.662.036h1.622l3.02.225.79.522.474.638-.079.485-1.215.62-1.64-.389-3.829-.91-1.312-.329h-.182v.11l1.093 1.068 2.006 1.81 2.509 2.33.127.578-.322.455-.34-.049-2.205-1.657-.851-.747-1.926-1.62h-.128v.17l.444.649 2.345 3.521.122 1.08-.17.353-.608.213-.668-.122-1.374-1.925-1.415-2.167-1.143-1.943-.14.08-.674 7.254-.316.37-.729.28-.607-.461-.322-.747.322-1.476.389-1.924.315-1.53.286-1.9.17-.632-.012-.042-.14.018-1.434 1.967-2.18 2.945-1.726 1.845-.414.164-.717-.37.067-.662.401-.589 2.388-3.036 1.44-1.882.93-1.086-.006-.158h-.055L4.132 18.56l-1.13.146-.487-.456.061-.746.231-.243 1.908-1.312-.006.006z",fill:"#D97757",fillRule:"nonzero"})}),Edt=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fill:"currentColor",d:"M16.765 5h-3.308l5.923 15h3.23zM7.226 5L1.38 20h3.308l1.307-3.154h6.154l1.23 3.077h3.309L10.688 5zm-.308 9.077l2-5.308l2.077 5.308z"})}),kV=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fill:"currentColor",d:"M20.562 10.188c.25-.688.313-1.376.25-2.063c-.062-.687-.312-1.375-.625-2c-.562-.937-1.375-1.687-2.312-2.125c-1-.437-2.063-.562-3.125-.312c-.5-.5-1.063-.938-1.688-1.25S11.687 2 11 2a5.17 5.17 0 0 0-3 .938c-.875.624-1.5 1.5-1.813 2.5c-.75.187-1.375.5-2 .875c-.562.437-1 1-1.375 1.562c-.562.938-.75 2-.625 3.063a5.44 5.44 0 0 0 1.25 2.874a4.7 4.7 0 0 0-.25 2.063c.063.688.313 1.375.625 2c.563.938 1.375 1.688 2.313 2.125c1 .438 2.062.563 3.125.313c.5.5 1.062.937 1.687 1.25S12.312 22 13 22a5.17 5.17 0 0 0 3-.937c.875-.625 1.5-1.5 1.812-2.5a4.54 4.54 0 0 0 1.938-.875c.562-.438 1.062-.938 1.375-1.563c.562-.937.75-2 .625-3.062c-.125-1.063-.5-2.063-1.188-2.876m-7.5 10.5c-1 0-1.75-.313-2.437-.875c0 0 .062-.063.125-.063l4-2.312a.5.5 0 0 0 .25-.25a.57.57 0 0 0 .062-.313V11.25l1.688 1v4.625a3.685 3.685 0 0 1-3.688 3.813M5 17.25c-.438-.75-.625-1.625-.438-2.5c0 0 .063.063.125.063l4 2.312a.56.56 0 0 0 .313.063c.125 0 .25 0 .312-.063l4.875-2.812v1.937l-4.062 2.375A3.7 3.7 0 0 1 7.312 19c-1-.25-1.812-.875-2.312-1.75M3.937 8.563a3.8 3.8 0 0 1 1.938-1.626v4.751c0 .124 0 .25.062.312a.5.5 0 0 0 .25.25l4.875 2.813l-1.687 1l-4-2.313a3.7 3.7 0 0 1-1.75-2.25c-.25-.937-.188-2.062.312-2.937M17.75 11.75l-4.875-2.812l1.687-1l4 2.312c.625.375 1.125.875 1.438 1.5s.5 1.313.437 2.063a3.7 3.7 0 0 1-.75 1.937c-.437.563-1 1-1.687 1.25v-4.75c0-.125 0-.25-.063-.312c0 0-.062-.126-.187-.188m1.687-2.5s-.062-.062-.125-.062l-4-2.313c-.125-.062-.187-.062-.312-.062s-.25 0-.313.062L9.812 9.688V7.75l4.063-2.375c.625-.375 1.312-.5 2.062-.5c.688 0 1.375.25 2 .688c.563.437 1.063 1 1.313 1.625s.312 1.375.187 2.062m-10.5 3.5l-1.687-1V7.063c0-.688.187-1.438.562-2C8.187 4.438 8.75 4 9.375 3.688a3.37 3.37 0 0 1 2.062-.313c.688.063 1.375.375 1.938.813c0 0-.063.062-.125.062l-4 2.313a.5.5 0 0 0-.25.25c-.063.125-.063.187-.063.312zm.875-2L12 9.5l2.187 1.25v2.5L12 14.5l-2.188-1.25z"})}),_dt=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fill:"currentColor",d:"M24 12.024c-6.437.388-11.59 5.539-11.977 11.976h-.047C11.588 17.563 6.436 12.412 0 12.024v-.047C6.437 11.588 11.588 6.437 11.976 0h.047c.388 6.437 5.54 11.588 11.977 11.977z"})}),Sdt={"claude-code":gle},Tdt={google:_dt,openai:kV,codex:kV,anthropic:Edt,"claude-code":gle},Cdt=(e,t)=>Sdt[e]||Tdt[t]||mR,AV=e=>e.startsWith("Claude ")||e.startsWith("Gemini ")?e.slice(7):e,kdt={id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash Lite",Icon:Yl,provider:"google"},NV="";function Adt(){var mo,Cp,Nh,kp,_g,dc,Ap,Sg,Tg;const[e,t]=x.useState(null),[n,r]=x.useState(null),[s,o]=x.useState(null),[i,a]=x.useState(()=>[{...By("tab-1","browser"),url:NV,title:"New Tab"}]),[l,c]=x.useState("tab-1"),u=i.find(N=>N.id===l)||i[0],[f,m]=x.useState(!1),{errors:g,clearErrors:y,removeError:v,searchForSolution:w}=mdt({onErrorDetected:N=>{console.log("[App] Error detected:",N.category,"-",N.message.substring(0,100)),N.isCritical&&m(!0)},onSolutionFound:N=>{console.log("[App] Solution found for:",N.category)},enableAutoSearch:!0,debounceMs:1e3}),_=x.useCallback((N="browser")=>{const G=By(void 0,N);a(se=>[...se,G]),c(G.id)},[]),S=x.useCallback(N=>{const G=i.find(se=>se.id===N);G!=null&&G.projectPath&&!window.confirm(`Close project "${G.title||"Untitled"}"?

This will close the project and clear its chat history.`)||(a(se=>{const ve=se.filter(Ae=>Ae.id!==N);if(ve.length===0)return se;if(N===l){const Ae=se.findIndex(He=>He.id===N),Ie=Math.min(Ae,ve.length-1);c(ve[Ie].id)}return ve}),G!=null&&G.projectPath&&(he([]),Qr([]),nt(null)))},[l,i]),k=x.useCallback(N=>{c(N)},[]),R=x.useCallback(N=>{a(G=>{const se=new Map(G.map(ve=>[ve.id,ve]));return N.map(ve=>se.get(ve.id)).filter(Boolean)})},[]);x.useEffect(()=>{ee(u.url||"")},[l,u.url]),x.useEffect(()=>{async function N(){var G;if(!H.current&&(H.current=!0,!!((G=window.electronAPI)!=null&&G.tabdata)))try{const[se,ve,Ae]=await Promise.all([window.electronAPI.tabdata.loadKanban(void 0),window.electronAPI.tabdata.loadTodos(void 0),window.electronAPI.tabdata.loadNotes(void 0)]),Ie=[];if(se.success&&Array.isArray(se.data)&&se.data.length>0)for(const He of se.data)console.log("[TabData] Loaded kanban board:",He.boardId,He.boardTitle),Ie.push({...By(void 0,"kanban"),title:He.boardTitle||"Kanban",kanbanData:{boardId:He.boardId,boardTitle:He.boardTitle||"Kanban",columns:He.columns||[]}});ve.success&&ve.data&&(console.log("[TabData] Loaded todos data"),Ie.push({...By(void 0,"todos"),todosData:{items:ve.data.items}})),Ae.success&&Ae.data&&(console.log("[TabData] Loaded notes data"),Ie.push({...By(void 0,"notes"),notesData:{content:Ae.data.content}})),Ie.length>0&&a(He=>[...He,...Ie])}catch(se){console.error("[TabData] Error loading tab data:",se)}}N()},[]);const O=x.useCallback(N=>{a(G=>G.map(se=>se.id===l?{...se,...N}:se))},[l]),M=x.useCallback((N,G)=>{a(se=>se.map(ve=>ve.id===N?{...ve,...G}:ve))},[]),P=x.useRef(null),j=x.useRef(null),q=x.useRef(null),U=x.useRef(i),z=x.useRef(l),H=x.useRef(!1);x.useEffect(()=>{U.current=i},[i]),x.useEffect(()=>{z.current=l},[l]),x.useEffect(()=>{var se,ve,Ae;async function N(){var Ie;if((Ie=window.electronAPI)!=null&&Ie.window)try{const He=await window.electronAPI.window.getInfo();He.windowId&&t(He.windowId),He.projectPath&&(r(He.projectPath),o(He.projectName),console.log(`[Window] Window ${He.windowId} locked to project: ${He.projectPath}`))}catch(He){console.warn("[Window] Failed to get window info:",He)}}N();const G=(Ae=(ve=(se=window.electronAPI)==null?void 0:se.window)==null?void 0:ve.onInfo)==null?void 0:Ae.call(ve,Ie=>{Ie.windowId&&t(Ie.windowId),Ie.projectPath&&(r(Ie.projectPath),o(Ie.projectName))});return()=>{G==null||G()}},[]);const F=x.useRef(new Set);x.useEffect(()=>{var ve;const N=u==null?void 0:u.projectPath;if(!N||!((ve=window.electronAPI)!=null&&ve.mgrep))return;if(F.current.has(N)){console.log("[mgrep] Already handled for:",N);return}let G=!1;return(async()=>{try{const Ae=await Promise.race([window.electronAPI.mgrep.getStatus(N),new Promise((Ie,He)=>setTimeout(()=>He(new Error("Timeout")),5e3))]);if(G)return;if(Ae.success&&Ae.status&&!Ae.status.ready){if(!localStorage.getItem("mgrep-onboarding-seen")){F.current.has("__onboarding_shown__")||(setTimeout(()=>{G||op(!0)},1500),F.current.add("__onboarding_shown__"));return}localStorage.getItem("mgrep-auto-init")==="true"?(console.log("[mgrep] Initializing for:",N),window.electronAPI.mgrep.initialize(N).then(()=>{F.current.add(N),console.log("[mgrep]  Initialized for:",N)}).catch(gt=>{console.error("[mgrep] Auto-init failed:",gt)})):F.current.add(N)}else Ae.success&&Ae.status&&Ae.status.ready&&(F.current.add(N),console.log("[mgrep] Already ready for:",N))}catch(Ae){console.error("[mgrep] Status check failed:",Ae)}})(),()=>{G=!0}},[u==null?void 0:u.projectPath]),x.useCallback(N=>{console.log("[TabData] handleUpdateKanbanColumns called, columns:",N.length);const G=U.current.find(se=>se.id===z.current);G!=null&&G.kanbanData&&(O({kanbanData:{...G.kanbanData,columns:N}}),P.current&&clearTimeout(P.current),P.current=setTimeout(async()=>{var ve,Ae,Ie;const se=U.current.find(He=>He.id===z.current);if(console.log("[TabData] Debounce fired, activeTab:",se==null?void 0:se.id,"type:",se==null?void 0:se.type,"hasTabdata:",!!((ve=window.electronAPI)!=null&&ve.tabdata)),(Ae=window.electronAPI)!=null&&Ae.tabdata&&(se!=null&&se.kanbanData))try{const He=await window.electronAPI.tabdata.saveKanban(se.projectPath,{boardId:se.kanbanData.boardId,boardTitle:se.kanbanData.boardTitle,columns:N,updatedAt:new Date().toISOString()});console.log("[TabData] Kanban save result:",He)}catch(He){console.error("[TabData] Failed to save kanban:",He)}else console.warn("[TabData] Cannot save - tabdata API:",!!((Ie=window.electronAPI)!=null&&Ie.tabdata),"activeTab:",!!se)},500))},[O]),x.useCallback(N=>{O({todosData:{items:N}}),j.current&&clearTimeout(j.current),j.current=setTimeout(async()=>{var se;const G=U.current.find(ve=>ve.id===z.current);if((se=window.electronAPI)!=null&&se.tabdata&&G)try{await window.electronAPI.tabdata.saveTodos(G.projectPath,{items:N,updatedAt:new Date().toISOString()}),console.log("[TabData] Todos saved")}catch(ve){console.error("[TabData] Failed to save todos:",ve)}},500)},[O]);const W=x.useCallback(N=>{O({notesData:{content:N}}),q.current&&clearTimeout(q.current),q.current=setTimeout(async()=>{var se;const G=U.current.find(ve=>ve.id===z.current);if((se=window.electronAPI)!=null&&se.tabdata&&G)try{await window.electronAPI.tabdata.saveNotes(G.projectPath,{content:N,updatedAt:new Date().toISOString()}),console.log("[TabData] Notes saved")}catch(ve){console.error("[TabData] Failed to save notes:",ve)}},500)},[O]);x.useCallback(N=>{const G=U.current.find(se=>se.id===z.current);G!=null&&G.kanbanData&&(O({title:N,kanbanData:{...G.kanbanData,boardTitle:N}}),P.current&&clearTimeout(P.current),P.current=setTimeout(async()=>{var ve;const se=U.current.find(Ae=>Ae.id===z.current);if((ve=window.electronAPI)!=null&&ve.tabdata&&(se!=null&&se.kanbanData))try{const Ae=await window.electronAPI.tabdata.saveKanban(se.projectPath,{boardId:se.kanbanData.boardId,boardTitle:N,columns:se.kanbanData.columns,updatedAt:new Date().toISOString()});console.log("[TabData] Kanban title saved:",Ae)}catch(Ae){console.error("[TabData] Failed to save kanban title:",Ae)}},500))},[O]);const X=i.map(N=>({id:N.id,title:N.title||"Cluso",url:N.url,favicon:N.favicon,type:N.type||"browser",isProject:!!N.projectPath})),[J,ee]=x.useState(NV),[re,ie]=x.useState(!1),[Z,te]=x.useState(!1),[oe,Q]=x.useState(!1),[Te,ge]=x.useState(""),[Ce,he]=x.useState([]),[Fe,De]=x.useState(""),[Re,tt]=x.useState(null),[fe,nt]=x.useState(null),ot=x.useRef(null);x.useEffect(()=>{ot.current=fe},[fe]);const{questions:Ht,dismissQuestion:qt,refreshQuestions:Pt}=not();x.useEffect(()=>{Pt({messages:Ce,selectedElement:fe,currentTab:"chat"})},[Ce,fe,Pt]);const tn=x.useRef(()=>{}),[xt,pe]=x.useState(null),[Ne,$e]=x.useState(null),[Je,Le]=x.useState(null),[Ve,_e]=x.useState(!1),[Y,L]=x.useState(!1),[B,ce]=x.useState(!0),[we,ze]=x.useState(420),[Be,ut]=x.useState(!1),ln=x.useRef(null),jt=x.useRef(null),[fn,an]=x.useState(!0),[Wa,An]=x.useState(!1),er=x.useRef(!1),[wt,on]=x.useState(!1),[ye,Ue]=x.useState(!1),[ht,Jt]=x.useState(!1),[mr,Kn]=x.useState(null),Rt=x.useRef(!1),zt=x.useRef(!1),hn=x.useRef(!1),In=x.useRef(null),[Lr,xo]=x.useState([]),[Gs,wo]=x.useState(!1),[Xr,gr]=x.useState([]),[Do,at]=x.useState(!1),rt=x.useRef(null),pt=x.useRef(null),[Vt,Ur]=x.useState(kdt),[As,Zn]=x.useState(!1),[Hr,ua]=x.useState(""),[kt,Fn]=x.useState(!1);x.useEffect(()=>{fe&&!B&&Fn(!0)},[fe,B]);const[mt,Qr]=x.useState([]),[Po,rr]=x.useState(""),[ft,Nt]=x.useState(!1),[pn,wn]=x.useState([]),[kr,Ws]=x.useState(""),[ho,Zo]=x.useState([]),[zr,Eo]=x.useState(0),Vm=x.useCallback(N=>{let ve=(N.path.split("/").pop()||N.path).split("?")[0];if(N.elementType&&(ve+=` / ${N.elementType}`),N.lineStart!==void 0)if(N.lineEnd!==void 0&&N.lineEnd!==N.lineStart){const Ae=N.lineStart.toString(),Ie=N.lineEnd.toString();let He=0;for(;He<Ae.length&&He<Ie.length&&Ae[He]===Ie[He];)He++;const gt=He>0?Ie.slice(He):Ie;ve+=` (${Ae}-${gt})`}else ve+=` (${N.lineStart})`;return ve},[]),[Mu,X0]=x.useState([]),[Pd,lh]=x.useState(""),[Yi,_l]=x.useState(!1),[oc,jc]=x.useState([]),[Jo,Ld]=x.useState([]),[ch,Dn]=x.useState(!1),[Q0,po]=x.useState(""),[Wr,Ou]=x.useState("include"),[yi,Du]=x.useState("off"),[Sl,$t]=x.useState(!1),Kt=fge(),[Jn,ur]=x.useState(!1),zs=Mst(),[da,uh]=x.useState(!1),[dh,fh]=x.useState(""),[Tl,qm]=x.useState(""),[ep,Cl]=x.useState(!1),[tp,kl]=x.useState(null),[Al,hh]=x.useState(null),[vi,np]=x.useState(null),[Ta,$d]=x.useState(""),[rp,ph]=x.useState(!1),[l3,sp]=x.useState(!1),[Nl,Fd]=x.useState(null),[ue,eE]=x.useState(()=>{if(typeof window<"u"){const N=localStorage.getItem("darkMode");return N!==null?N==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),{currentTheme:c3}=dR(),to=c3.colors,Gm=to?vdt(to.background)<.5:ue,Uc=to!=null&&to.background?tN(to.background,Gm?25:3):ue?"#262626":"#ffffff",Hc=(to==null?void 0:to.border)||(ue?"#404040":"#e7e5e4");to!=null&&to.foreground,to!=null&&to.foreground&&tN(to.foreground,Gm?-30:30);const u3=to!=null&&to.background?tN(to.background,Gm?10:-3):ue?"#1a1a1a":"#fafaf9",[d3,tE]=x.useState(!1),[f3,Wm]=x.useState(!1),[h3,Hb]=x.useState(!1),[Vb,op]=x.useState(!1),[Pu,qb]=x.useState([]),[Bd,ip]=x.useState(0),[nE,Ym]=x.useState(!1),[Lo,p3]=x.useState(()=>{try{const N=localStorage.getItem("cluso-settings");if(N){const G=JSON.parse(N),se=new Set((G.models||[]).map(Et=>Et.id)),ve=q2.models.filter(Et=>!se.has(Et.id)),Ae=[...G.models||[],...ve],Ie=new Set((G.providers||[]).map(Et=>Et.id)),He=q2.providers.filter(Et=>!Ie.has(Et.id)),gt=[...G.providers||[],...He],un=(G.connections||[]).map(Et=>Et.type==="mcp"&&Et.url&&!Et.transport?{...Et,transport:{type:"sse",url:Et.url}}:Et);return{...q2,...G,models:Ae,providers:gt,connections:un}}}catch(N){console.error("Failed to load settings from localStorage:",N)}return q2}),Xo=Jst({googleApiKey:(mo=Lo.providers.find(N=>N.id==="google"))==null?void 0:mo.apiKey});x.useEffect(()=>{try{localStorage.setItem("cluso-settings",JSON.stringify(Lo))}catch(N){console.error("Failed to save settings to localStorage:",N)}},[Lo]);const Km=x.useRef(void 0);x.useEffect(()=>{const N=u==null?void 0:u.projectPath;if(Km.current===void 0){Km.current=N;return}Km.current!==N&&Vb&&op(!1),Km.current=N},[u==null?void 0:u.projectPath,Vb]);const rE={"claude-code":1,anthropic:2,openai:3,codex:4,google:5},zd=x.useMemo(()=>Lo.models.map(G=>{const se=Lo.providers.find(He=>He.id===G.provider),ve=G.provider==="claude-code"?!!Lo.claudeCodeAuthenticated:G.provider==="codex"?!!Lo.codexAuthenticated:(se==null?void 0:se.enabled)&&!!(se!=null&&se.apiKey),Ae=G.enabled&&ve,Ie=Cdt(G.id,G.provider);return{id:G.id,name:G.name,provider:G.provider,Icon:Ie,isAvailable:Ae,isEnabled:G.enabled,isProviderConfigured:ve}}).sort((G,se)=>{const ve=rE[G.provider]||99,Ae=rE[se.provider]||99;return ve-Ae}),[Lo.models,Lo.providers,Lo.claudeCodeAuthenticated,Lo.codexAuthenticated]);x.useMemo(()=>zd.filter(N=>N.isAvailable),[zd]);const Zm=x.useMemo(()=>Lo.providers.filter(N=>N.enabled&&N.apiKey).map(N=>({id:N.id,apiKey:N.apiKey})),[Lo.providers]),sE=x.useRef(Zm);sE.current=Zm;const Jm=x.useRef(Vt);Jm.current=Vt;const[Qo,_o]=x.useState(null),[mh,Il]=x.useState(!1),[gh,jd]=x.useState("disconnected"),[ap,ic]=x.useState([]);x.useEffect(()=>{if(ap.length>0){const N=setTimeout(()=>{ic([])},5e3);return()=>clearTimeout(N)}},[ap]);const[xi,oE]=x.useState(null),[iE,Xm]=x.useState(!1),[Bn,$o]=x.useState(null),[Vc,aE]=x.useState(!1),{stream:Qm,cancel:lE,isInitialized:Gb}=rst({onError:N=>console.error("[AI SDK] Error:",N),onTextDelta:N=>{console.log("[Stream] Text delta:",N.substring(0,50)),_o(G=>G?{...G,content:G.content+N}:(console.warn("[Stream] No streaming message state!"),null))},onReasoningDelta:N=>{console.log("[Stream] Reasoning delta:",N.substring(0,50)),_o(G=>G?{...G,reasoning:G.reasoning+N}:null)},onToolCall:N=>{_o(G=>G?{...G,toolCalls:[...G.toolCalls,{id:N.toolCallId,name:N.toolName,args:N.args,status:"running"}]}:null),zs.trackStart({id:N.toolCallId,name:N.toolName,args:N.args})},onToolResult:N=>{var se,ve;if(_o(Ae=>Ae?{...Ae,toolCalls:Ae.toolCalls.map(Ie=>Ie.id===N.toolCallId?{...Ie,status:"complete",result:N.result}:Ie)}:null),N.result&&typeof N.result=="object"&&"error"in N.result){const Ae=String(N.result.error),Ie=((se=N.toolName)==null?void 0:se.replace(/^mcp_[^_]+_/,""))||"tool",He=oot(N.toolCallId,Ie,new Error(Ae)),gt=iot(He);console.log(`[Tool Error] ${gt.title}: ${gt.description}`),zs.trackError(N.toolCallId,Ae)}else{zs.trackSuccess(N.toolCallId,N.result);const Ae=((ve=N.toolName)==null?void 0:ve.toLowerCase())||"";if(Ae.includes("write")||Ae.includes("edit")){const Ie=N.result,He=(Ie==null?void 0:Ie.path)||(Ie==null?void 0:Ie.file_path)||(Ie==null?void 0:Ie.filePath);typeof He=="string"&&(console.log("[Tool Result] File modification detected:",Ae,He),tn.current({type:"write",path:He,newContent:void 0}))}}}});x.useEffect(()=>{Gb&&gh==="disconnected"&&jd("idle")},[Gb,gh]);const Wb=x.useMemo(()=>(Lo.connections||[]).filter(N=>N.type==="mcp"&&"transport"in N).filter(N=>N.enabled),[Lo.connections]),{allTools:eg,callTool:cE}=Ist({initialServers:Wb,autoConnect:!0,onError:(N,G)=>{console.error(`[MCP] Error${G?` on server ${G}`:""}:`,N.message)}}),tg=x.useMemo(()=>eg.map(N=>{var G,se;return{name:N.name,description:N.description,inputSchema:{type:"object",properties:((G=N.inputSchema)==null?void 0:G.properties)||{},required:((se=N.inputSchema)==null?void 0:se.required)||[]},serverId:N.serverId}}),[eg]),[Yb,Kb]=x.useState(null),Ud=x.useRef(null),m3=x.useCallback(N=>new Promise(G=>{Ud.current=G,Kb(N)}),[]),g3=x.useCallback((N,G)=>{Ud.current&&(Ud.current(G),Ud.current=null),Kb(null)},[]),b3=x.useCallback(N=>{Ud.current&&(Ud.current("skipped"),Ud.current=null),Kb(null)},[]),{isProcessing:Ca,updateContext:lp,processMessage:ng,setProcessing:rg}=pst({mcpTools:tg,callMCPTool:cE,onFileModified:x.useCallback(N=>{tn.current(N)},[]),onAskClarifyingQuestion:m3}),[uE,bh]=x.useState(!1),[cp,sg]=x.useState(""),[Sr,Ya]=x.useState(null),[up,dp]=x.useState(!1),[Ka,wi]=x.useState([]),[Lu,fp]=x.useState(!1),[ka,Za]=x.useState("desktop"),Zb=[{name:"iPhone SE",width:375,height:667,type:"mobile"},{name:"iPhone 14",width:390,height:844,type:"mobile"},{name:"iPhone 14 Pro Max",width:430,height:932,type:"mobile"},{name:"iPhone 15 Pro",width:393,height:852,type:"mobile"},{name:"Samsung Galaxy S21",width:360,height:800,type:"mobile"},{name:"Pixel 7",width:412,height:915,type:"mobile"},{name:"iPad Mini",width:768,height:1024,type:"tablet"},{name:"iPad Air",width:820,height:1180,type:"tablet"},{name:'iPad Pro 11"',width:834,height:1194,type:"tablet"},{name:'iPad Pro 12.9"',width:1024,height:1366,type:"tablet"},{name:"Surface Pro 7",width:912,height:1368,type:"tablet"},{name:"Galaxy Tab S7",width:800,height:1280,type:"tablet"}],[Li,Jb]=x.useState(null),[dE,y3]=x.useState(375),[fE,hE]=x.useState(667),[yh,og]=x.useState(!1),[Aa,Hd]=x.useState(!1),[Ki,vh]=x.useState("fit"),[hp,xh]=x.useState(!1),pp=[{value:"fit",label:"Fit"},{value:"50",label:"50%"},{value:"75",label:"75%"},{value:"100",label:"100%"},{value:"125",label:"125%"},{value:"150",label:"150%"}],mp=yh?dE:(Li==null?void 0:Li.width)??(ka==="tablet"?768:375),qc=yh?fE:(Li==null?void 0:Li.height)??(ka==="tablet"?1024:667),Xb=N=>{Jb(N),og(!1),Za(N.type),Hd(!1)},ig=()=>{og(!0),Jb(null),Za("mobile"),Hd(!1)},[Zi,ag]=x.useState([]),[Fo,lg]=x.useState(!1),[Rl,pE]=x.useState(192),[Ml,$u]=x.useState(new Set),[wh,Qb]=x.useState(!1),cg=x.useRef(0),ey=x.useRef(192),fa=x.useRef(null),[si,ac]=x.useState(new Set),Gc=x.useRef(null),[Eh,Ol]=x.useState(!1);x.useCallback((N,G,se)=>{const ve=se!==void 0?`[${N}] ${G}: ${typeof se=="object"?JSON.stringify(se,null,2):se}`:`[${N}] ${G}`;console.log(ve),Eh&&ag(Ae=>[...Ae.slice(-199),{type:"info",message:ve,timestamp:new Date}])},[Eh]);const[ps,Ja]=x.useState(null),[Bo,Dl]=x.useState(null),So=bst(Bo==null?void 0:Bo.fileName),mE=x.useCallback(N=>{if(!Bo)return;const se=N.target.closest("pre");if(!se)return;const ve=se.getBoundingClientRect(),Ae=20,Ie=8,He=N.clientY-ve.top,gt=N.clientX-ve.left,un=Math.floor(He/Ae)+Bo.startLine,Et=Math.floor(gt/Ie);So.showHover(N.clientX,N.clientY,un,Et)},[Bo,So]),[Vd,$i]=x.useState([]),[ug,no]=x.useState(!1),[us,Mr]=x.useState(""),ds=x.useRef([]),Ns=x.useRef(!1);x.useEffect(()=>{ds.current=Vd,Ns.current=ug},[Vd,ug]);const lc=x.useRef(null),Wc=x.useRef(null),Xn=x.useRef(new Map);x.useCallback(N=>Xn.current.get(N),[]),Xn.current.get(l);const ro=u.isWebviewReady,Tn=typeof window<"u"&&((Cp=window.electronAPI)==null?void 0:Cp.isElectron);x.useEffect(()=>{console.log("isElectron:",Tn),console.log("electronAPI:",window.electronAPI)},[Tn]),x.useEffect(()=>{localStorage.setItem("darkMode",String(ue))},[ue]),x.useEffect(()=>{var ve,Ae,Ie,He;(async()=>{var gt;if((gt=window.electronAPI)!=null&&gt.fastApply)try{const un=await window.electronAPI.fastApply.getStatus();Wm(un.ready)}catch(un){console.log("[FastApply] Status check error:",un)}})();const G=(Ae=(ve=window.electronAPI)==null?void 0:ve.fastApply)==null?void 0:Ae.onModelLoaded(()=>{Wm(!0)}),se=(He=(Ie=window.electronAPI)==null?void 0:Ie.fastApply)==null?void 0:He.onModelUnloaded(()=>{Wm(!1)});return()=>{G==null||G(),se==null||se()}},[]),x.useEffect(()=>{Rt.current=wt},[wt]),x.useEffect(()=>{zt.current=ye},[ye]),x.useEffect(()=>{hn.current=ht},[ht]),x.useEffect(()=>{if(wt){In.current={model:Vt,thinkingLevel:yi};const N=zd.find(G=>G.id==="claude-haiku-4-5"&&G.isAvailable)||zd.find(G=>G.id.includes("haiku")&&G.isAvailable)||zd.find(G=>G.id.includes("gemini-2")&&G.id.includes("flash")&&G.isAvailable)||zd.find(G=>G.id.includes("flash")&&G.isAvailable);N&&(console.log("[Inspector] Switching to fast model:",N.id),Ur({id:N.id,name:N.name,provider:N.provider,Icon:N.Icon})),yi!=="off"&&(console.log("[Inspector] Disabling thinking mode"),Du("off"))}else In.current&&(console.log("[Inspector] Restoring previous model:",In.current.model.id),Ur(In.current.model),Du(In.current.thinkingLevel),In.current=null)},[wt]);const Fu=x.useCallback(()=>{eE(N=>!N)},[]),ty=x.useCallback(N=>{N.preventDefault(),ut(!0)},[]);x.useEffect(()=>{if(!Be)return;const N=se=>{const ve=window.innerWidth-se.clientX;ze(Math.max(430,Math.min(800,ve)))},G=()=>{ut(!1)};return document.addEventListener("mousemove",N),document.addEventListener("mouseup",G),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",G)}},[Be]);const gp=x.useCallback(N=>{N.preventDefault(),cg.current=N.clientY,ey.current=Rl,Qb(!0)},[Rl]);x.useEffect(()=>{if(!wh)return;const N=se=>{const ve=cg.current-se.clientY,Ae=ey.current+ve;pE(Math.max(100,Math.min(500,Ae)))},G=()=>{Qb(!1)};return document.addEventListener("mousemove",N),document.addEventListener("mouseup",G),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",G)}},[wh]);const dg=x.useCallback(async N=>{kl("stash"),N&&N.trim()?await Kt.stashWithMessage(N.trim()):await Kt.stash(),kl(null),bh(!1),sg("")},[Kt]),Pl=x.useCallback(()=>{console.log("[Exec] Changes confirmed"),Ya(null),he(N=>[...N,{id:Date.now().toString(),role:"system",content:"Changes confirmed.",timestamp:new Date}]),$me().catch(N=>console.error("[Audio] Approval sound error:",N))},[]),ha=x.useCallback(async()=>{const N=Xn.current.get(l);console.log("[Exec] Rejecting change, pendingChange:",Sr),console.log("[Exec] undoCode:",Sr==null?void 0:Sr.undoCode),console.log("[Exec] webview:",!!N);let G=!1;if(Sr!=null&&Sr.undoCode&&N){console.log("[Exec] Rejecting - running undo code:",Sr.undoCode);try{await N.executeJavaScript(Sr.undoCode),console.log("[Exec] Undo executed successfully"),G=!0}catch(se){console.error("[Exec] Undo error:",se)}}else console.log("[Exec] No undo code available or no webview");if(!G&&N){console.log("[Exec] Undo failed - reloading page as fallback");try{N.reload(),he(se=>[...se,{id:Date.now().toString(),role:"system",content:"Changes discarded. Page reloaded to restore state.",timestamp:new Date}])}catch(se){console.error("[Exec] Failed to reload:",se)}}else he(se=>[...se,{id:Date.now().toString(),role:"system",content:"Changes discarded.",timestamp:new Date}]);Ya(null),Fme().catch(se=>console.error("[Audio] Rejection sound error:",se))},[Sr,l]),Bu=x.useCallback(N=>{console.log("[Voice] User said approve:",N),Pl()},[]),Yc=x.useCallback(N=>{console.log("[Voice] User said reject:",N),ha()},[]),ny=x.useCallback(N=>{console.log("[Voice] User said undo:",N),Sr?ha():(Bme().catch(G=>console.error("[Audio] Undo sound error:",G)),console.log("[Voice] No pending change to undo"))},[Sr]),fg=x.useCallback(N=>{let G=N.trim();!G.startsWith("http://")&&!G.startsWith("https://")&&(G="http://"+G),console.log("Navigating to:",G);const se=i.find(ve=>ve.projectPath&&ve.url&&ve.url.toLowerCase()===G.toLowerCase());ee(G),se&&!u.projectPath?(console.log("Inheriting projectPath from matching tab:",se.projectPath),O({url:G,projectPath:se.projectPath})):O({url:G})},[O,i,u.projectPath]),_h=x.useCallback(N=>{N.preventDefault(),fg(J)},[J,fg]),hg=x.useCallback(()=>{const N=Xn.current.get(l);N&&Tn&&N.goBack()},[Tn,l]),qd=x.useCallback(()=>{const N=Xn.current.get(l);N&&Tn&&N.goForward()},[Tn,l]),Ei=x.useCallback(()=>{const N=Xn.current.get(l);N&&Tn&&N.reload()},[Tn,l]),Sh=x.useCallback((N,G)=>{console.log("[AI] Requesting element selection:",N,G);const se=[{pattern:/:contains\s*\(/i,name:":contains()"},{pattern:/:has\s*\([^)]*text/i,name:":has(text)"},{pattern:/:eq\s*\(/i,name:":eq()"},{pattern:/:gt\s*\(/i,name:":gt()"},{pattern:/:lt\s*\(/i,name:":lt()"},{pattern:/:first(?!\-)/i,name:":first (use :first-child or :first-of-type)"},{pattern:/:last(?!\-)/i,name:":last (use :last-child or :last-of-type)"}];for(const{pattern:Ae,name:Ie}of se)if(Ae.test(N)){console.error(`[AI] Invalid selector: ${Ie} is not valid CSS. Use attribute selectors like [attr*="text"] instead.`),he(He=>[...He,{id:Date.now().toString(),role:"system",content:`Invalid selector: ${Ie} is jQuery-only, not valid CSS. Use attribute selectors like [attr*="text"] or call get_page_elements first.`,timestamp:new Date}]);return}const ve=Xn.current.get(l);ve&&ro&&(ve.send("select-element-by-selector",N),Ja({selector:N,reasoning:G||""}))},[ro,l]),gE=x.useCallback((N,G)=>{console.log("[AI] Executing code:",G),console.log("[AI] Code to execute:",N);const se=Xn.current.get(l);if(se&&ro){const ve=`
        (function() {
          try {
            ${N}
            return { success: true };
          } catch (err) {
            return { success: false, error: err.message, stack: err.stack };
          }
        })()
      `;se.executeJavaScript(ve).then(Ae=>{if(Ae&&Ae.success)console.log("[AI] Code executed successfully"),he(Ie=>[...Ie,{id:Date.now().toString(),role:"system",content:` ${G}`,timestamp:new Date}]);else{const Ie=(Ae==null?void 0:Ae.error)||"Unknown error";console.error("[AI] Code execution error inside webview:",Ie),Ae!=null&&Ae.stack&&console.error("[AI] Stack:",Ae.stack),he(He=>[...He,{id:Date.now().toString(),role:"system",content:` Error: ${Ie}`,timestamp:new Date}])}}).catch(Ae=>{console.error("[AI] Code execution error (syntax/parse):",Ae),he(Ie=>[...Ie,{id:Date.now().toString(),role:"system",content:` Syntax Error: ${Ae.message}`,timestamp:new Date}])})}},[ro,l]),bp=x.useCallback((N,G)=>{console.log("[AI] Voice confirmation:",N,"element number:",G);const se=Xn.current.get(l);if(N&&(ps!=null&&ps.elements)&&ps.elements.length>0){const ve=G?Math.min(Math.max(G-1,0),ps.elements.length-1):0;nt(ps.elements[ve]),se==null||se.send("clear-selection"),Ja(null)}else se==null||se.send("clear-selection"),Ja(null)},[ps,l]),v3=x.useCallback(async N=>{console.log("[AI] Highlighting element by number:",N);const G=Xn.current.get(l);if(!G||!ro)return{success:!1,error:"Webview not ready"};const se=`
      (function() {
        const elementNumber = ${N};
        const elements = window.__numberedElements;

        if (!elements || elements.length === 0) {
          return { success: false, error: 'No numbered elements. Call get_page_elements first.' };
        }

        const index = elementNumber - 1; // Convert to 0-indexed
        if (index < 0 || index >= elements.length) {
          return { success: false, error: 'Element ' + elementNumber + ' not found. Valid range: 1-' + elements.length };
        }

        const element = elements[index];

        // Clear any previous highlight
        document.querySelectorAll('.cluso-highlighted').forEach(el => {
          el.classList.remove('cluso-highlighted');
          el.style.outline = '';
          el.style.outlineOffset = '';
        });

        // Clear all number badges now that user has selected one
        document.querySelectorAll('.element-number-badge').forEach(b => b.remove());

        // Highlight the selected element
        element.classList.add('cluso-highlighted');
        element.style.outline = '3px solid #3b82f6';
        element.style.outlineOffset = '2px';
        element.scrollIntoView({ behavior: 'smooth', block: 'center' });

        // Store as current focus for subsequent operations
        window.__focusedElement = element;

        const text = element.innerText?.substring(0, 50) || '';
        const tag = element.tagName.toLowerCase();

        return {
          success: true,
          element: { number: elementNumber, tag, text: text.trim(), totalElements: elements.length }
        };
      })()
    `;try{const ve=await G.executeJavaScript(se);return console.log("[AI] Highlight by number result:",ve),ve}catch(ve){return console.error("[AI] Highlight by number error:",ve),{success:!1,error:ve.message}}},[ro,l]),x3=x.useCallback(async()=>{console.log("[AI] Clearing focus scope");const N=Xn.current.get(l);if(!N||!ro)return{success:!1};const G=`
      (function() {
        // Clear focus
        window.__focusedElement = null;

        // Clear all highlights
        document.querySelectorAll('.cluso-highlighted').forEach(el => {
          el.classList.remove('cluso-highlighted');
          el.style.outline = '';
          el.style.outlineOffset = '';
        });

        // Clear number badges
        document.querySelectorAll('.element-number-badge').forEach(b => b.remove());

        // Clear stored elements
        window.__numberedElements = [];

        return { success: true };
      })()
    `;try{return await N.executeJavaScript(G),console.log("[AI] Focus cleared"),{success:!0}}catch(se){return console.error("[AI] Clear focus error:",se),{success:!1}}},[ro,l]),zo=x.useCallback(async N=>(console.log("[AI] Setting viewport to:",N),Za(N),{success:!0}),[]),ry=x.useCallback(async N=>{console.log("[AI] Switching to tab type:",N);const G=i.find(se=>se.type===N);return G?c(G.id):_(N),{success:!0}},[i,_]),Gd=x.useCallback(async(N,G=!0)=>{console.log("[AI] Getting page elements, category:",N,"showBadges:",G);const se=Xn.current.get(l);if(!se||!ro)return"Error: Webview not ready";const ve={buttons:'button, [role="button"], [data-slot="button"], input[type="button"], input[type="submit"]',links:'a[href], [role="link"]',inputs:'input, textarea, select, [role="textbox"], [contenteditable="true"]',images:'img, [role="img"], svg',headings:'h1, h2, h3, h4, h5, h6, [role="heading"]',all:'button, [role="button"], a[href], input, textarea, select, img, h1, h2, h3, h4, h5, h6'},Ae=ve[N||"all"]||ve.all,Ie=`
      (function() {
        const category = '${N||"all"}';
        const selector = '${Ae}';
        const showBadges = ${G};
        const results = {};

        // Clear existing number badges
        document.querySelectorAll('.element-number-badge').forEach(b => b.remove());

        // Check if we have a focused element (scoped search)
        const focusScope = window.__focusedElement;
        const searchRoot = focusScope || document;

        // Helper to get element summary
        function summarize(el, number) {
          const text = el.innerText?.substring(0, 50) || '';
          const id = el.id ? '#' + el.id : '';
          const classes = el.className ? '.' + String(el.className).split(' ').filter(c => c && !c.includes('inspector') && !c.includes('cluso')).slice(0, 2).join('.') : '';
          const href = el.getAttribute('href') || '';
          const ariaLabel = el.getAttribute('aria-label') || '';
          return { number, tag: el.tagName.toLowerCase(), id, classes, text: text.trim(), href, ariaLabel };
        }

        // Create number badge
        function createBadge(number) {
          const badge = document.createElement('div');
          badge.className = 'element-number-badge';
          badge.textContent = number;
          badge.style.cssText = 'position:absolute;top:-8px;left:-8px;width:20px;height:20px;background:#3b82f6;color:white;border-radius:50%;font-size:11px;font-weight:bold;display:flex;align-items:center;justify-content:center;z-index:999999;pointer-events:none;box-shadow:0 1px 3px rgba(0,0,0,0.3);';
          return badge;
        }

        // Find elements - scoped to focused element if exists
        const elements = searchRoot.querySelectorAll(selector);
        const numberedElements = [];

        // Collect element info (and optionally add badges)
        elements.forEach((el, idx) => {
          // Skip if element is hidden
          const style = window.getComputedStyle(el);
          if (style.display === 'none' || style.visibility === 'hidden') return;

          const num = numberedElements.length + 1;

          // Only create badges if showBadges is true
          if (showBadges) {
            const badge = createBadge(num);

            // Make element position relative if static
            const pos = style.position;
            if (pos === 'static') {
              el.style.position = 'relative';
            }

            el.appendChild(badge);
          }
          numberedElements.push({ ...summarize(el, num), element: el });
        });

        // Store elements for highlight_element_by_number to use
        window.__numberedElements = numberedElements.map(e => e.element);

        results.totalElements = numberedElements.length;
        results.category = category;
        results.elements = numberedElements.slice(0, 20).map(({ element, ...rest }) => rest); // Return first 20 for AI context
        results.focusScope = focusScope ? {
          tag: focusScope.tagName.toLowerCase(),
          text: (focusScope.innerText || '').substring(0, 30),
          hint: 'Showing elements WITHIN focused scope. Say "clear focus" to see all elements.'
        } : null;
        results.note = numberedElements.length > 0
          ? 'Elements numbered on page. Use highlight_element_by_number(N) to highlight or set focus.'
          : 'No elements found' + (focusScope ? ' within focused area.' : '.');

        return JSON.stringify(results, null, 2);
      })()
    `;try{const He=await se.executeJavaScript(Ie);return console.log("[AI] Page elements result:",He),He}catch(He){return console.error("[AI] Failed to scan page elements:",He),"Error scanning page: "+He.message}},[ro,l]),{isActive:cc,isPrimed:pg,initialize:Wd,primeContext:Yd}=Rst({cwd:(u==null?void 0:u.projectPath)||void 0,onSelectionResult:x.useCallback(N=>{var G;console.log("[SelectorAgent] Selection result:",N),N.selector?Sh(N.selector,N.reasoning):(G=N.suggestions)!=null&&G.length&&console.log("[SelectorAgent] No match, suggestions:",N.suggestions)},[Sh]),onError:x.useCallback(N=>{console.error("[SelectorAgent] Error:",N)},[])});x.useEffect(()=>{Tn&&!cc&&Wd().then(N=>{N&&console.log("[SelectorAgent] Initialized successfully")})},[Tn,cc,Wd]);const bE=x.useCallback(async()=>{if(!cc)return;const N=await Gd("all",!1);if(N&&!N.startsWith("Error")){const G=Xn.current.get(l),se=G?await G.executeJavaScript("window.location.href").catch(()=>""):"",ve=G?await G.executeJavaScript("document.title").catch(()=>""):"";await Yd({pageElements:N,pageUrl:se,pageTitle:ve}),console.log("[SelectorAgent] Context primed")}},[cc,Gd,Yd,l]);x.useEffect(()=>{if(cc&&ro&&!pg){const N=setTimeout(()=>{bE()},500);return()=>clearTimeout(N)}},[cc,ro,pg,bE]);const yE=x.useCallback(async(N,G,se,ve)=>{var Ae;if(console.log("[AI] Patching source file:",N,ve),!Tn||!((Ae=window.electronAPI)!=null&&Ae.files))return{success:!1,error:"File editing only available in Electron mode"};try{const Ie=await window.electronAPI.files.readFile(N);if(!Ie.success||!Ie.data)return{success:!1,error:`Could not read file: ${N}`};const He=Ie.data;if(!He.includes(G))return{success:!1,error:`Could not find the code to replace in ${N}. The file may have changed.`};const gt=He.replace(G,se);return(await window.electronAPI.files.writeFile(N,gt)).success?(he(Et=>[...Et,{id:Date.now().toString(),role:"system",content:` Patched ${N}: ${ve}`,timestamp:new Date}]),{success:!0}):{success:!1,error:`Failed to write file: ${N}`}}catch(Ie){return console.error("[AI] Failed to patch source file:",Ie),{success:!1,error:Ie.message}}},[Tn]);x.useCallback(async N=>{var G;if(console.log("[AI] Listing files:",N),!Tn||!((G=window.electronAPI)!=null&&G.files))return"Error: File listing only available in Electron mode";try{const se=await window.electronAPI.files.listDirectory(N);return se.success&&se.data?se.data.map(Ae=>`${Ae.isDirectory?"":""} ${Ae.name}${Ae.isDirectory?"/":""}`).join(`
`)||"Empty directory":"Error: Could not list directory"}catch(se){return"Error: "+se.message}},[Tn]);const w3=x.useCallback(async N=>{var G;if(console.log("[AI] Reading file:",N),!Tn||!((G=window.electronAPI)!=null&&G.files))return"Error: File reading only available in Electron mode";try{const se=await window.electronAPI.files.readFile(N);if(se.success&&se.data){const ve=se.data;return ve.length>1e4?ve.substring(0,1e4)+`
... (truncated, file is `+ve.length+" chars)":ve}return"Error: Could not read file"}catch(se){return"Error: "+se.message}},[Tn]),vE=x.useCallback(async N=>{console.log("[AI] Clicking element:",N);const G=Xn.current.get(l);if(!G||!ro)return{success:!1,error:"Webview not ready"};try{const se=`
        (function() {
          const el = document.querySelector('${N.replace(/'/g,"\\'")}');
          if (el) {
            el.click();
            return { success: true };
          }
          return { success: false, error: 'Element not found' };
        })()
      `;return await G.executeJavaScript(se)}catch(se){return{success:!1,error:se.message}}},[ro,l]),Kd=x.useCallback(async(N,G)=>{console.log("[AI] Navigating:",N,G);const se=Xn.current.get(l);if(!se)return{success:!1,error:"Webview not available"};try{switch(N){case"back":se.goBack();break;case"forward":se.goForward();break;case"reload":se.reload();break;case"goto":if(G)se.loadURL(G);else return{success:!1,error:"URL required for goto action"};break;default:return{success:!1,error:`Unknown action: ${N}`}}return{success:!0}}catch(ve){return{success:!1,error:ve.message}}},[l]),sy=x.useCallback(async N=>{console.log("[AI] Scrolling to:",N);const G=Xn.current.get(l);if(!G||!ro)return{success:!1,error:"Webview not ready"};try{let se;return N==="top"?se="window.scrollTo({ top: 0, behavior: 'smooth' }); true;":N==="bottom"?se="window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }); true;":se=`
          (function() {
            const el = document.querySelector('${N.replace(/'/g,"\\'")}');
            if (el) {
              el.scrollIntoView({ behavior: 'smooth', block: 'center' });
              return true;
            }
            return false;
          })()
        `,{success:!!await G.executeJavaScript(se)}}catch(se){return{success:!1,error:se.message}}},[ro,l]),yp=x.useCallback(async N=>{var G;if(console.log("[FileBrowser] Opening:",N),!Tn||!((G=window.electronAPI)!=null&&G.files))return"Error: File browser only available in Electron mode";try{const se=N||us||".",ve=await window.electronAPI.files.listDirectory(se);if(ve.success&&ve.data){const Ae=ve.data.map(He=>({name:He.name,isDirectory:He.isDirectory,path:`${se}/${He.name}`.replace(/\/\//g,"/")}));us||Mr(se);const Ie={type:"directory",path:se,title:se.split("/").pop()||se,items:Ae};return ds.current=[Ie],Ns.current=!0,$i([Ie]),no(!0),console.log("[FileBrowser] Opened - refs updated:",Ns.current,ds.current.length),`Showing ${Ae.length} items. Say "open" followed by a number to open an item.`}return"Error: Could not list directory"}catch(se){return"Error: "+se.message}},[Tn,us]),oy=x.useCallback(async N=>{var He,gt,un;console.log("[FileBrowser] Opening item:",N),console.log("[FileBrowser] State check - visible:",Ns.current,"stack length:",ds.current.length);const G=ds.current,se=Ns.current;if(!se||G.length===0)return`Error: No file browser open. (visible: ${se}, stack: ${G.length})`;const ve=G[G.length-1];if(ve.type!=="directory"||!ve.items)return"Error: Current panel is not a directory";const Ae=N-1;if(Ae<0||Ae>=ve.items.length)return`Error: Invalid item number. Choose 1-${ve.items.length}`;const Ie=ve.items[Ae];if(Ie.isDirectory){if(!Tn||!((He=window.electronAPI)!=null&&He.files))return"Error: File browser only available in Electron mode";const Et=await window.electronAPI.files.listDirectory(Ie.path);if(Et.success&&Et.data){const _n=Et.data.map(_t=>({name:_t.name,isDirectory:_t.isDirectory,path:`${Ie.path}/${_t.name}`.replace(/\/\//g,"/")})),lt={type:"directory",path:Ie.path,title:Ie.name,items:_n};return ds.current=[...G,lt],$i(_t=>[..._t,lt]),`Opened folder "${Ie.name}" with ${_n.length} items.`}return"Error: Could not open folder"}else{const Et=(gt=Ie.name.split(".").pop())==null?void 0:gt.toLowerCase();if(["png","jpg","jpeg","gif","svg","webp","ico"].includes(Et||"")){const lt={type:"image",path:Ie.path,title:Ie.name};return ds.current=[...G,lt],$i(_t=>[..._t,lt]),`Showing image "${Ie.name}"`}else{if(!Tn||!((un=window.electronAPI)!=null&&un.files))return"Error: File reading only available in Electron mode";const lt=await window.electronAPI.files.readFile(Ie.path);if(lt.success&&lt.data){const _t=lt.data.length>5e4?lt.data.substring(0,5e4)+`
... (truncated)`:lt.data,yn={type:"file",path:Ie.path,title:Ie.name,content:_t};return ds.current=[...G,yn],$i(Yn=>[...Yn,yn]),`Opened file "${Ie.name}"`}return"Error: Could not read file"}}},[Tn]),Zd=x.useCallback(()=>{const N=Ns.current,G=ds.current;if(!N)return"No file browser open";if(G.length<=1)return Ns.current=!1,ds.current=[],no(!1),$i([]),"Closed file browser";ds.current=G.slice(0,-1),$i(ve=>ve.slice(0,-1));const se=G[G.length-2];return`Back to "${(se==null?void 0:se.title)||"root"}"`},[]),vp=x.useCallback(()=>(Ns.current=!1,ds.current=[],no(!1),$i([]),"Closed file browser"),[]),mg=x.useCallback(async(N,G)=>{var un;console.log("[FileBrowser] Opening folder:",N||`#${G}`),console.log("[FileBrowser] State check - visible:",Ns.current,"stack length:",ds.current.length);const se=ds.current,ve=Ns.current;if(!ve||se.length===0)return`Error: No file browser open. Use list_files first to show the file browser. (visible: ${ve}, stack: ${se.length})`;const Ae=se[se.length-1];if(Ae.type!=="directory"||!Ae.items)return"Error: Current panel is not a directory";let Ie,He=-1;if(N){const Et=N.toLowerCase();if(He=Ae.items.findIndex(_n=>_n.isDirectory&&_n.name.toLowerCase()===Et),He===-1&&(He=Ae.items.findIndex(_n=>_n.isDirectory&&_n.name.toLowerCase().includes(Et))),He!==-1)Ie=Ae.items[He];else{const _n=Ae.items.filter(lt=>lt.isDirectory).map(lt=>lt.name).join(", ");return`Error: No folder named "${N}" found. Available folders: ${_n||"none"}`}}else if(G!==void 0){const Et=G-1;if(Et<0||Et>=Ae.items.length)return`Error: Invalid item number. Choose 1-${Ae.items.length}`;const _n=Ae.items[Et];if(!_n.isDirectory)return`Error: Item ${G} "${_n.name}" is a file, not a folder. Use open_item for files.`;Ie=_n,He=Et}else return"Error: Please provide either a folder name or item number";if(!Ie)return"Error: Could not find folder";if(!Tn||!((un=window.electronAPI)!=null&&un.files))return"Error: File browser only available in Electron mode";const gt=await window.electronAPI.files.listDirectory(Ie.path);if(gt.success&&gt.data){const Et=gt.data.map(lt=>({name:lt.name,isDirectory:lt.isDirectory,path:`${Ie.path}/${lt.name}`.replace(/\/\//g,"/")})),_n={type:"directory",path:Ie.path,title:Ie.name,items:Et};return ds.current=[...se,_n],$i(lt=>[...lt,_n]),`Opened folder "${Ie.name}" (item ${He+1}) with ${Et.length} items: ${Et.slice(0,5).map((lt,_t)=>`${_t+1}. ${lt.name}${lt.isDirectory?"/":""}`).join(", ")}${Et.length>5?"...":""}`}return"Error: Could not open folder"},[Tn]),gg=x.useCallback(async(N,G)=>{var Ie,He,gt;if(console.log("[FileBrowser] Opening file:",N||G),!Tn||!((Ie=window.electronAPI)!=null&&Ie.files))return"Error: File browser only available in Electron mode";if(G){const un=await window.electronAPI.files.readFile(G);if(un.success&&un.data){const Et=G.split("/").pop()||G,_n=(He=Et.split(".").pop())==null?void 0:He.toLowerCase();if(["png","jpg","jpeg","gif","svg","webp","ico"].includes(_n||"")){const _t={type:"image",path:G,title:Et};return ds.current=[_t],Ns.current=!0,$i([_t]),no(!0),`Showing image "${Et}"`}else{const _t=un.data.length>5e4?un.data.substring(0,5e4)+`
... (truncated)`:un.data,yn={type:"file",path:G,title:Et,content:_t};return ds.current=[yn],Ns.current=!0,$i([yn]),no(!0),`Opened file "${Et}"`}}return`Error: Could not read file at ${G}`}if(!N)return"Error: Please provide either a file name or path";const se=ds.current;let ve=us||".";se.length>0&&se[se.length-1].type==="directory"&&(ve=se[se.length-1].path);const Ae=await window.electronAPI.files.listDirectory(ve);if(Ae.success&&Ae.data){const un=N.toLowerCase();let Et=Ae.data.find(lt=>!lt.isDirectory&&lt.name.toLowerCase()===un);if(Et||(Et=Ae.data.find(lt=>!lt.isDirectory&&lt.name.toLowerCase().includes(un))),Et){const lt=`${ve}/${Et.name}`.replace(/\/\//g,"/"),_t=await window.electronAPI.files.readFile(lt);if(_t.success&&_t.data){const yn=(gt=Et.name.split(".").pop())==null?void 0:gt.toLowerCase(),Yn=["png","jpg","jpeg","gif","svg","webp","ico"].includes(yn||"");if(Ns.current)if(Yn){const es={type:"image",path:lt,title:Et.name};return ds.current=[...se,es],$i(so=>[...so,es]),`Showing image "${Et.name}"`}else{const es=_t.data.length>5e4?_t.data.substring(0,5e4)+`
... (truncated)`:_t.data,so={type:"file",path:lt,title:Et.name,content:es};return ds.current=[...se,so],$i(ts=>[...ts,so]),`Opened file "${Et.name}"`}else{const es=Ae.data.map(ts=>({name:ts.name,isDirectory:ts.isDirectory,path:`${ve}/${ts.name}`.replace(/\/\//g,"/")})),so={type:"directory",path:ve,title:ve.split("/").pop()||ve,items:es};if(Yn){const ts={type:"image",path:lt,title:Et.name};return ds.current=[so,ts],Ns.current=!0,$i([so,ts]),no(!0),`Showing image "${Et.name}"`}else{const ts=_t.data.length>5e4?_t.data.substring(0,5e4)+`
... (truncated)`:_t.data,_i={type:"file",path:lt,title:Et.name,content:ts};return ds.current=[so,_i],Ns.current=!0,$i([so,_i]),no(!0),`Opened file "${Et.name}"`}}}return`Error: Could not read file "${Et.name}"`}const _n=Ae.data.filter(lt=>!lt.isDirectory).map(lt=>lt.name).slice(0,10).join(", ");return`Error: File "${N}" not found in ${ve}. Available files: ${_n||"none"}${Ae.data.filter(lt=>!lt.isDirectory).length>10?"...":""}`}return"Error: Could not search directory"},[Tn,us]),xE=x.useCallback(async N=>yp(N),[yp]),wE=x.useCallback(N=>{console.log("[InstantEdit] Applying HTML update to DOM");const G=Xn.current.get(l);if(!G||!ro){console.warn("[InstantEdit] Webview not ready");return}const se=`
      (function() {
        try {
          // Replace entire document with new HTML
          document.documentElement.innerHTML = \`${N.replace(/`/g,"\\`")}\`;
          return { success: true, message: 'HTML updated' };
        } catch (err) {
          return { success: false, error: err.message };
        }
      })()
    `;G.executeJavaScript(se).then(ve=>{ve!=null&&ve.success?(console.log("[InstantEdit] HTML applied to DOM successfully"),he(Ae=>[...Ae,{id:Date.now().toString(),role:"system",content:" UI updated instantly",timestamp:new Date}])):console.error("[InstantEdit] Failed to apply HTML:",ve==null?void 0:ve.error)}).catch(ve=>{console.error("[InstantEdit] Error injecting HTML:",ve)})},[ro,l]),{streamState:Xa,connect:Jd,disconnect:EE,startVideoStreaming:iy,stopVideoStreaming:zu,stopSpeaking:xp}=dge({videoRef:lc,canvasRef:Wc,onCodeUpdate:wE,onElementSelect:Sh,onExecuteCode:gE,onConfirmSelection:bp,onGetPageElements:Gd,onPatchSourceFile:yE,onListFiles:xE,onReadFile:w3,onClickElement:vE,onNavigate:Kd,onScroll:sy,onOpenItem:oy,onOpenFile:gg,onOpenFolder:mg,onBrowserBack:Zd,onCloseBrowser:vp,onApproveChange:Bu,onRejectChange:Yc,onUndoChange:ny,onHighlightByNumber:v3,onClearFocus:x3,onSetViewport:zo,onSwitchTab:ry,selectedElement:fe,googleApiKey:(Nh=Lo.providers.find(N=>N.id==="google"))==null?void 0:Nh.apiKey,selectedModelId:Vt.id});x.useEffect(()=>{var N;Tn&&((N=window.electronAPI)!=null&&N.files)&&(window.electronAPI.files.listPrompts().then(G=>{G.success&&G.data&&X0(G.data.map(se=>({name:se,prompt:""})))}),window.electronAPI.files.listDirectory().then(G=>{G.success&&G.data&&(console.log("[Files] Loaded directory:",G.data.length,"files"),wn(G.data))}))},[Tn]);const uc=x.useCallback(async N=>{var se;if(!Tn||!((se=window.electronAPI)!=null&&se.files))return;console.log("[@ Files] Loading directory:",N||"(default)");const G=await window.electronAPI.files.listDirectory(N);G.success&&G.data&&(console.log("[@ Files] Loaded",G.data.length,"files from:",N||"(default)"),wn(G.data),N&&Ws(N))},[Tn]),Th=x.useCallback(N=>{Zo(G=>[...G,kr]),uc(N),rr(""),Eo(0)},[kr,uc]),wp=x.useCallback(()=>{const N=[...ho],G=N.pop();Zo(N),uc(G||u.projectPath||void 0),rr(""),Eo(0)},[ho,uc,u.projectPath]),ay=x.useCallback(async N=>{var se;if(!Tn||!((se=window.electronAPI)!=null&&se.files))return;const G=await window.electronAPI.files.selectFile(N);if(G.success&&G.data){const{path:ve,content:Ae}=G.data;let Ie,He,gt;const un=ve.match(/\((\d+)-(\d+)\)$/);if(un)Ie=parseInt(un[1],10),He=parseInt(un[2],10);else{const Et=ve.match(/\((\d+)\)$/);Et&&(Ie=parseInt(Et[1],10))}if(Ae&&Ie){const lt=(Ae.split(`
`)[0]||"").match(/(?:function|const|export\s+(?:default\s+)?(?:function|const)?)\s+(\w+)/);lt&&(gt=lt[1])}Qr(Et=>[...Et,{path:ve,content:Ae,lineStart:Ie,lineEnd:He,elementType:gt}]),De(Et=>{const _n=Et.lastIndexOf("@");if(_n===-1)return"";const lt=Et.substring(0,_n),_t=ve.split("/").pop()||ve;return`${lt}[${_t}] `}),Nt(!1),rr(""),Eo(0)}},[Tn]),ju=x.useCallback(async N=>{var se;if(!Tn||!((se=window.electronAPI)!=null&&se.files))return;const G=await window.electronAPI.files.readPrompt(N);G.success&&G.data&&(De(G.data),_l(!1),lh(""),Eo(0))},[Tn]),Ch=pn.filter(N=>!N.name.startsWith(".")&&N.name.toLowerCase().includes(Po.toLowerCase())),Kc=x.useMemo(()=>[{name:"new",prompt:"Clear the conversation"},{name:"clear",prompt:"Clear the conversation"},{name:"compact",prompt:"Compact context with optional guidance"},{name:"thinking",prompt:"Set reasoning level: off, low, med, high, ultrathink"}],[]),Xd=x.useMemo(()=>[...Kc,...Mu].filter(G=>G.name.toLowerCase().includes(Pd.toLowerCase())),[Kc,Mu,Pd]),bg=x.useMemo(()=>Jo.filter(N=>{const G=N.name.toLowerCase().includes(Q0.toLowerCase()),se=oc.some(ve=>ve.name===N.name&&ve.type===N.type);return G&&!se}),[Jo,Q0,oc]),Uu=x.useCallback(N=>{jc(G=>G.some(ve=>ve.name===N.name&&ve.type===N.type)?G:[...G,N]),De(G=>{const se=N.type==="include"?"+":"-",ve=new RegExp(`\\${se}[a-zA-Z0-9_-]*$`);return G.replace(ve,"")}),Dn(!1),po("")},[]),Hu=x.useCallback(N=>{console.log("[Input] Changed:",N);const G=/\+([a-zA-Z0-9_-]+)\s/g;let se=N;const ve=[];let Ae;for(;(Ae=G.exec(N))!==null;)ve.push({name:Ae[1],type:"include"}),se=se.replace(Ae[0],"");const Ie=N.matchAll(/(?:^|\s)-([a-zA-Z][a-zA-Z0-9_-]*)\s/g);for(const lt of Ie)ve.push({name:lt[1],type:"exclude"}),se=se.replace(lt[0],lt[0].startsWith(" ")?" ":"");ve.length>0?(jc(lt=>{const _t=[...lt];return ve.forEach(yn=>{_t.some(es=>es.name===yn.name&&es.type===yn.type)||_t.push(yn)}),_t}),Ld(lt=>{const _t=[...lt];ve.forEach(Yn=>{const es=_t.findIndex(so=>so.name===Yn.name);es!==-1&&_t.splice(es,1),_t.unshift(Yn)});const yn=_t.slice(0,20);try{const Yn=`cluso-context-chips-${u.projectPath||"global"}`;localStorage.setItem(Yn,JSON.stringify(yn))}catch(Yn){console.warn("[ContextChips] Failed to save to localStorage:",Yn)}return yn}),De(se)):De(N),Eo(0);const He=se.lastIndexOf("+"),gt=se.lastIndexOf("-");let un=null,Et=-1;if(He!==-1){const lt=He>0?se.charAt(He-1):" ",_t=se.substring(He+1),yn=lt===" "||He===0,Yn=_t.includes(" ");yn&&!Yn&&(un="+",Et=He)}if(gt!==-1&&gt>Et){const lt=gt>0?se.charAt(gt-1):" ",_t=se.substring(gt+1),yn=lt===" "||gt===0,Yn=_t.includes(" "),es=/^[a-zA-Z]/.test(_t);yn&&!Yn&&es&&(un="-",Et=gt)}if(un&&Et!==-1){const lt=se.substring(Et+1);po(lt),Ou(un==="+"?"include":"exclude"),Dn(!0),Nt(!1),_l(!1);return}Dn(!1),po("");const _n=N.lastIndexOf("@");if(_n!==-1){const lt=N.substring(_n+1);if(lt.includes(" "))Nt(!1),rr("");else{const yn=lt;console.log("[Input] @ detected at position",_n,"query:",yn),rr(yn),Nt(!0),_l(!1),yn===""&&(console.log("[@ Files] First @, using project path:",u.projectPath||"(none)"),uc(u.projectPath||void 0))}}else if(N.startsWith("/")){const lt=N.substring(1);console.log("[Input] / detected, query:",lt),lh(lt),_l(!0),Nt(!1)}else Nt(!1),_l(!1),rr(""),lh("");if(N.trim().length>=3&&!N.startsWith("@")&&!N.startsWith("/")){const{intent:lt}=ng(N),_t={code_edit:"Edit Code",code_create:"Create",code_delete:"Delete",code_explain:"Explain",code_refactor:"Refactor",file_operation:"File Op",ui_inspect:"Inspect",ui_modify:"Modify UI",ui_build:"Build UI",research:"Research",analyze:"Analyze",compare:"Compare",plan:"Plan",document:"Document",test:"Test",debug:"Debug",review:"Review",deploy:"Deploy",configure:"Configure",question:"Question",chat:"Chat",unknown:""};if(lt.type!=="unknown"&&lt.confidence>.2){const yn=(lt.secondaryTypes||[]).filter(Yn=>Yn!==lt.type&&Yn!=="unknown");tt({type:lt.type,label:_t[lt.type]||lt.type,secondaryTypes:yn,secondaryLabels:yn.map(Yn=>_t[Yn]||Yn)})}else tt(null)}else tt(null)},[uc,ng,u.projectPath]);x.useEffect(()=>{const N=pt.current;N&&(N.style.height="auto",N.style.height=Math.min(N.scrollHeight,144)+"px")},[Fe]),x.useEffect(()=>{Xa.isConnected&&Y?navigator.mediaDevices.getDisplayMedia({video:!0}).then(N=>{lc.current&&(lc.current.srcObject=N,iy()),N.getVideoTracks()[0].onended=()=>{L(!1),zu()}}).catch(N=>{console.error("Failed to get display media",N),L(!1)}):(zu(),lc.current&&lc.current.srcObject&&(lc.current.srcObject.getTracks().forEach(G=>G.stop()),lc.current.srcObject=null))},[Y,Xa.isConnected,iy,zu]);const Vu=x.useRef(new Map),yg=x.useRef(new Map),vg=x.useCallback((N,G)=>{console.log(`[Tab ${N}] Setting up webview event handlers`);const se=()=>{const lt=G.getURL();console.log(`[Tab ${N}] Did navigate:`,lt),M(N,{canGoBack:G.canGoBack(),canGoForward:G.canGoForward()}),N===l&&ee(lt)},ve=()=>{console.log(`[Tab ${N}] Started loading`),M(N,{isLoading:!0})},Ae=()=>{console.log(`[Tab ${N}] Stopped loading`),M(N,{isLoading:!1})},Ie=()=>{const lt=G.getURL();console.log(`[Tab ${N}] Page finished loading, URL:`,lt),G.send("set-inspector-mode",Rt.current),G.send("set-screenshot-mode",zt.current),M(N,{isWebviewReady:!0})},He=lt=>{console.error(`[Tab ${N}] Failed to load:`,lt.errorCode,lt.errorDescription,lt.validatedURL)},gt=lt=>{M(N,{title:lt.title})},un=lt=>{var Yn,es,so,ts,_i,Ia,fc,Ih,Yu,Ku,Rh,ef,Is,Co,Si,tf,Np,nf,el,Ip;const{channel:_t,args:yn}=lt;if(_t==="inspector-hover"){const Mt=yn[0];pe({element:Mt.element,rect:Mt.rect})}else if(_t==="inspector-hover-end")pe(null);else if(_t==="inspector-select"){const Mt=yn[0];nt({...Mt.element,x:Mt.x,y:Mt.y,rect:Mt.rect}),pe(null)}else if(_t==="screenshot-select"){const Mt=yn[0];$e(Mt.element),Ue(!1),G&&Mt.rect&&(G.send("hide-move-handles"),setTimeout(()=>{G.capturePage({x:Math.floor(Mt.rect.left),y:Math.floor(Mt.rect.top),width:Math.ceil(Mt.rect.width),height:Math.ceil(Mt.rect.height)}).then(tr=>{Le(tr.toDataURL()),G.send("show-move-handles")}).catch(tr=>{console.error("Failed to capture screenshot:",tr),G.send("show-move-handles")})},50))}else if(_t==="console-log"){const Mt=yn[0],tr=Mt.level.toLowerCase()==="warning"?"warn":Mt.level.toLowerCase();ag(zn=>[...zn.slice(-99),{type:tr,message:Mt.message,timestamp:new Date}])}else if(_t==="ai-selection-confirmed"){const Mt=yn[0];console.log("[AI] Element selection confirmed:",Mt),Ja(tr=>({selector:Mt.selector,reasoning:(tr==null?void 0:tr.reasoning)||"",count:Mt.count,elements:Mt.elements.map(zn=>({...zn.element,rect:zn.rect}))}))}else if(_t==="ai-selection-failed"){const Mt=yn[0];console.error("[AI] Element selection failed:",Mt),Ja(null),he(tr=>[...tr,{id:Date.now().toString(),role:"system",content:`Could not find element: ${Mt.selector}. ${Mt.error}`,timestamp:new Date}])}else if(_t==="move-select"){const Mt=yn[0];console.log("[Move] Element selected for repositioning:",Mt.element.tagName),nt({...Mt.element,rect:Mt.rect}),Kn({x:Mt.rect.left,y:Mt.rect.top,width:Mt.rect.width,height:Mt.rect.height}),pe(null)}else if(_t==="move-update"){const Mt=yn[0];console.log("[Move] Position updated:",Mt.targetRect),Kn(Mt.targetRect)}else if(_t==="move-confirmed"){const Mt=yn[0];console.log("[Move] Position confirmed:",Mt.targetRect),nt(tr=>tr?{...tr,targetPosition:Mt.targetRect,originalPosition:Mt.originalRect}:null),Jt(!1),Kn(null)}else if(_t==="move-cancelled")console.log("[Move] Cancelled"),nt(null),Jt(!1),Kn(null);else if(_t==="drop-image-on-element"){const Mt=yn[0],tr=ot.current,zn={...Mt.element,sourceLocation:tr==null?void 0:tr.sourceLocation},Vr=((Yn=Mt.element.tagName)==null?void 0:Yn.toLowerCase())||"";console.log("[Drop] Image dropped on element:",Vr,"classes:",Mt.element.className,"hasSource:",!!zn.sourceLocation);const jr=U.current.find(dr=>dr.id===N),Gn=jr==null?void 0:jr.projectPath;if(!Gn){console.error("[Drop] No project path set for tab:",N,"tab:",jr),he(dr=>[...dr,{id:Date.now().toString(),role:"system",content:"Cannot save dropped image: no project folder selected. Please set a project folder first.",timestamp:new Date}]);return}const Rs=(dr=>{let fr=0;for(let Hn=0;Hn<Math.min(dr.length,1e4);Hn++){const Un=dr.charCodeAt(Hn);fr=(fr<<5)-fr+Un,fr=fr&fr}return Math.abs(fr).toString(16).padStart(8,"0")})(Mt.imageData),or=Mt.imageData.match(/^data:image\/(\w+);/),ko=or?or[1].replace("jpeg","jpg"):"png",Yr=`img-${Rs}.${ko}`,Xt=`${`${Gn}/public/uploads`}/${Yr}`,mn=`/uploads/${Yr}`,rn=Vr==="img",cn=["div","section","article","aside","header","footer","main","figure","span","p"].includes(Vr);(es=window.electronAPI)==null||es.files.saveImage(Mt.imageData,Xt).then(async dr=>{var wr,nr,Ys,Ms,oi,Rp,Ao,Ra;if(!(dr!=null&&dr.success))throw new Error((dr==null?void 0:dr.error)||"Failed to save");console.log("[Drop] Image saved:",mn);let fr,Hn,Un,Qn;if(rn){Qn="src";const gs=await G.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  return el ? el.src : '';
                })();
              `);if(fr=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${mn}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Hn=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${gs}';
                    return 'Reverted';
                  }
                  return 'Element not found';
                })();
              `,Un=`Set image src to ${Yr}`,(nr=(wr=zn.sourceLocation)==null?void 0:wr.sources)!=null&&nr[0]){const Ks=`dom-drop-${Date.now()}`;$o({id:Ks,element:zn,cssChanges:{},srcChange:{oldSrc:gs||"",newSrc:mn},description:Un,undoCode:Hn,applyCode:fr,userRequest:"Drop image on element",patchStatus:"preparing"}),Ji(Ks,zn,{},Un,Hn,fr,"Drop image on element",Gn,void 0,{oldSrc:gs||"",newSrc:mn})}}else if(cn){const gs=await G.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (!el) return null;
                  const img = el.querySelector('img');
                  if (img) {
                    return { hasChildImg: true, childSrc: img.src };
                  }
                  return { hasChildImg: false, currentBg: el.style.backgroundImage };
                })();
              `);if(gs!=null&&gs.hasChildImg){if(Qn="child-img",fr=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${mn}';
                        return 'Applied to child img';
                      }
                    }
                    return 'Element not found';
                  })();
                `,Hn=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${gs.childSrc}';
                        return 'Reverted';
                      }
                    }
                    return 'Element not found';
                  })();
                `,Un=`Set child image src to ${Yr}`,(Ms=(Ys=zn.sourceLocation)==null?void 0:Ys.sources)!=null&&Ms[0]){const Ks=`dom-drop-${Date.now()}`,Zs={id:Ks,element:zn,cssChanges:{},srcChange:{oldSrc:gs.childSrc||"",newSrc:mn},description:Un,undoCode:Hn,applyCode:fr,userRequest:"Drop image on child img element",patchStatus:"preparing"};$o(Zs),Ji(Ks,zn,{},Un,Hn,fr,"Drop image on child img element",Gn,void 0,{oldSrc:gs.childSrc||"",newSrc:mn})}}else{Qn="background";const Ks=await G.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    return el ? { text: el.textContent, bg: el.style.backgroundImage, bgSize: el.style.backgroundSize, bgPos: el.style.backgroundPosition } : null;
                  })();
                `);if(fr=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = 'url(${mn})';
                      el.style.backgroundSize = 'cover';
                      el.style.backgroundPosition = 'center';
                      el.textContent = '';
                      return 'Applied background-image';
                    }
                    return 'Element not found';
                  })();
                `,Hn=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = '${(Ks==null?void 0:Ks.bg)||""}';
                      el.style.backgroundSize = '${(Ks==null?void 0:Ks.bgSize)||""}';
                      el.style.backgroundPosition = '${(Ks==null?void 0:Ks.bgPos)||""}';
                      el.textContent = '${((Ks==null?void 0:Ks.text)||"").replace(/'/g,"\\'")}';
                      return 'Reverted';
                    }
                    return 'Element not found';
                  })();
                `,Un=`Set background-image to ${Yr}`,(Rp=(oi=zn.sourceLocation)==null?void 0:oi.sources)!=null&&Rp[0]){const Zs=`dom-drop-${Date.now()}`,Os={id:Zs,element:zn,cssChanges:{backgroundImage:`url(${mn})`,backgroundSize:"cover",backgroundPosition:"center"},description:Un,undoCode:Hn,applyCode:fr,userRequest:"Drop image on container element",patchStatus:"preparing"};$o(Os),Ji(Zs,zn,{backgroundImage:`url(${mn})`,backgroundSize:"cover",backgroundPosition:"center"},Un,Hn,fr,"Drop image on container element",Gn)}}}else{Qn="src";const gs=await G.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  return el ? el.src : '';
                })();
              `);if(fr=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el) {
                    el.src = '${mn}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Hn=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el) {
                    el.src = '${gs}';
                    return 'Reverted';
                  }
                  return 'Element not found';
                })();
              `,Un=`Set ${Vr} src to ${Yr}`,(Ra=(Ao=zn.sourceLocation)==null?void 0:Ao.sources)!=null&&Ra[0]){const Ks=`dom-drop-${Date.now()}`,Zs={id:Ks,element:zn,cssChanges:{},srcChange:{oldSrc:gs||"",newSrc:mn},description:Un,undoCode:Hn,applyCode:fr,userRequest:`Drop image on ${Vr} element`,patchStatus:"preparing"};$o(Zs),Ji(Ks,zn,{},Un,Hn,fr,`Drop image on ${Vr} element`,Gn,void 0,{oldSrc:gs||"",newSrc:mn})}}await G.executeJavaScript(fr),console.log("[Drop] Applied image with method:",Qn),he(gs=>[...gs,{id:Date.now().toString(),role:"assistant",content:Un,timestamp:new Date,model:"system",intent:"ui_modify"}]),Ya({code:fr,undoCode:Hn,description:Un,additions:1,deletions:1,source:"dom"})}).catch(dr=>{console.error("[Drop] Failed to save/apply image:",dr),he(fr=>[...fr,{id:Date.now().toString(),role:"system",content:`Failed to apply image: ${dr.message}`,timestamp:new Date}])})}else if(_t==="drop-url-on-element"){const Mt=yn[0];console.log("[Drop] URL dropped on element:",Mt.element.tagName,Mt.url);const tr=(so=Mt.element.tagName)==null?void 0:so.toLowerCase();let zn="src";tr==="a"?zn="href":(tr==="img"||tr==="video"||tr==="audio"||tr==="iframe")&&(zn="src");const Vr=`
          (function() {
            const elements = document.querySelectorAll('${Mt.element.tagName}');
            for (const el of elements) {
              if (el.className === '${Mt.element.className}') {
                el.${zn} = '${Mt.url}';
                return 'Applied';
              }
            }
            return 'Element not found';
          })();
        `;G.executeJavaScript(Vr),he(jr=>[...jr,{id:Date.now().toString(),role:"assistant",content:`Set ${zn} to dropped URL on ${Mt.element.tagName}`,timestamp:new Date,model:"system",intent:"ui_modify"}])}else if(_t==="inline-edit-accept"){const Mt=yn[0];console.log("[Inline Edit] Accepted:",{old:(ts=Mt.oldText)==null?void 0:ts.substring(0,30),new:(_i=Mt.newText)==null?void 0:_i.substring(0,30),hasSourceLocation:!!((Ia=Mt.element)!=null&&Ia.sourceLocation),sourceFile:(Ku=(Yu=(Ih=(fc=Mt.element)==null?void 0:fc.sourceLocation)==null?void 0:Ih.sources)==null?void 0:Yu[0])==null?void 0:Ku.file});const tr=(Is=(ef=(Rh=Mt.element)==null?void 0:Rh.sourceLocation)==null?void 0:ef.sources)!=null&&Is[0]?Mt.element:ot.current,zn=U.current.find(jr=>jr.id===N),Vr=zn==null?void 0:zn.projectPath;if((Si=(Co=tr==null?void 0:tr.sourceLocation)==null?void 0:Co.sources)!=null&&Si[0]&&Vr){const jr={oldText:Mt.oldText,newText:Mt.newText},Gn=`inline-${Date.now()}`;$o({id:Gn,element:tr,cssChanges:{},textChange:Mt.newText,description:`Change text: "${(tf=Mt.oldText)==null?void 0:tf.substring(0,20)}..."  "${(Np=Mt.newText)==null?void 0:Np.substring(0,20)}..."`,undoCode:`document.querySelector('*').textContent = ${JSON.stringify(Mt.oldText)}`,applyCode:`document.querySelector('*').textContent = ${JSON.stringify(Mt.newText)}`,userRequest:"Inline text edit",patchStatus:"preparing",userApproved:!0}),Ji(Gn,tr,{},`Change text to "${(nf=Mt.newText)==null?void 0:nf.substring(0,30)}..."`,"","","Inline text edit",Vr,jr)}else console.log("[Inline Edit] Cannot create source patch - missing source location or project path",{hasSourceLocation:!!((Ip=(el=tr==null?void 0:tr.sourceLocation)==null?void 0:el.sources)!=null&&Ip[0]),projectPath:Vr,element:tr==null?void 0:tr.tagName});he(jr=>{var Gn,xs;return[...jr,{id:Date.now().toString(),role:"assistant",content:`Text changed: "${(Gn=Mt.oldText)==null?void 0:Gn.substring(0,30)}..."  "${(xs=Mt.newText)==null?void 0:xs.substring(0,30)}..."`,timestamp:new Date,model:"system",intent:"ui_modify"}]})}},Et=()=>{console.log(`[Tab ${N}] Webview DOM ready`),M(N,{isWebviewReady:!0}),G.send("set-inspector-mode",Rt.current),G.send("set-screenshot-mode",zt.current)},_n=lt=>{const yn={0:"log",1:"info",2:"warn",3:"error"}[lt.level]||"log";ag(Yn=>[...Yn.slice(-99),{type:yn,message:lt.message,timestamp:new Date}])};G.addEventListener("dom-ready",Et),G.addEventListener("console-message",_n),G.addEventListener("did-navigate",se),G.addEventListener("did-navigate-in-page",se),G.addEventListener("did-start-loading",ve),G.addEventListener("did-stop-loading",Ae),G.addEventListener("did-finish-load",Ie),G.addEventListener("did-fail-load",He),G.addEventListener("page-title-updated",gt),G.addEventListener("ipc-message",un);try{G.getURL()&&(M(N,{isWebviewReady:!0}),G.send("set-inspector-mode",Rt.current),G.send("set-screenshot-mode",zt.current))}catch{console.log(`[Tab ${N}] Webview not yet ready for getURL`)}return()=>{G.removeEventListener("dom-ready",Et),G.removeEventListener("console-message",_n),G.removeEventListener("did-navigate",se),G.removeEventListener("did-navigate-in-page",se),G.removeEventListener("did-start-loading",ve),G.removeEventListener("did-stop-loading",Ae),G.removeEventListener("did-finish-load",Ie),G.removeEventListener("did-fail-load",He),G.removeEventListener("page-title-updated",gt),G.removeEventListener("ipc-message",un)}},[M]),Ep=x.useCallback(N=>{let G=yg.current.get(N);return G||(G=se=>{if(se){const ve=se;Xn.current.set(N,ve),setTimeout(()=>{const Ae=Vu.current.get(N);Ae&&Ae();const Ie=vg(N,ve);Vu.current.set(N,Ie)},100)}else{const ve=Vu.current.get(N);ve&&ve(),Vu.current.delete(N),Xn.current.delete(N)}},yg.current.set(N,G),G)},[vg]);x.useEffect(()=>{fa.current&&Fo&&fa.current.scrollIntoView({behavior:"smooth"})},[Zi,Fo]);const _p=x.useCallback((N,G)=>{ac(se=>{const ve=new Set(se);if(G.shiftKey&&Gc.current!==null){const Ae=Math.min(Gc.current,N),Ie=Math.max(Gc.current,N);for(let He=Ae;He<=Ie;He++)ve.add(He)}else ve.has(N)?ve.delete(N):ve.add(N),Gc.current=N;return ve})},[]),jo=x.useMemo(()=>si.size===0?null:Array.from(si).sort((N,G)=>N-G).map(N=>Zi[N]).filter(Boolean),[si,Zi]);x.useEffect(()=>{lp({selectedElement:fe||null,selectedFiles:mt,selectedLogs:(jo==null?void 0:jo.map(N=>({type:N.type,message:N.message})))||[],projectPath:(u==null?void 0:u.projectPath)||null,recentMessages:Ce.slice(-10)})},[fe,mt,jo,u==null?void 0:u.projectPath,Ce]);const _E=x.useCallback(()=>{ag([]),ac(new Set),Gc.current=null},[]),Zc=x.useCallback(N=>{$u(G=>{const se=new Set(G);return se.has(N)?se.delete(N):se.add(N),se})},[]),xg=x.useCallback(()=>{$u(new Set)},[]),ly=x.useCallback(async N=>{var G,se;if(!N.trim()||!((se=(G=window.electronAPI)==null?void 0:G.aiSdk)!=null&&se.webSearch)){console.warn("[Search] No query or webSearch not available");return}ph(!0),$d(N),sp(!0),np(null);try{const ve=`${N.slice(0,500)} solution fix`;console.log("[Search] Searching for:",ve);const Ae=await window.electronAPI.aiSdk.webSearch(ve,5);Ae.success&&Ae.results?(np(Ae.results),console.log("[Search] Found",Ae.results.length,"results")):(console.error("[Search] Failed:",Ae.error),np([]))}catch(ve){console.error("[Search] Error:",ve),np([])}finally{ph(!1)}},[]),cy=x.useCallback(()=>{vi&&vi.length>0&&(Fd(vi),sp(!1))},[vi]);x.useEffect(()=>{const N=G=>{if(!Fo||si.size===0)return;const ve=navigator.platform.toUpperCase().indexOf("MAC")>=0?G.metaKey:G.ctrlKey;if(G.key==="Escape")ac(new Set),G.preventDefault();else if(ve&&G.key==="g"){const Ae=Array.from(si).sort((Ie,He)=>Ie-He).map(Ie=>{var He;return((He=Zi[Ie])==null?void 0:He.message)||""}).join(`
`);ly(Ae),G.preventDefault()}else if(ve&&G.key==="c"&&si.size>0){const Ae=document.activeElement;if(!((Ae==null?void 0:Ae.tagName)==="INPUT"||(Ae==null?void 0:Ae.tagName)==="TEXTAREA")){const He=Array.from(si).sort((gt,un)=>gt-un).map(gt=>{const un=Zi[gt];return un?`[${un.type}] ${un.message}`:""}).filter(Boolean).join(`
`);navigator.clipboard.writeText(He),G.preventDefault()}}};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[Fo,si,Zi,De]);const Sp=x.useMemo(()=>Ml.size===0?Zi:Zi.filter(N=>Ml.has(N.type)),[Zi,Ml]);x.useEffect(()=>{if(!Sl)return;const N=G=>{G.target.closest("[data-thinking-popover]")||$t(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[Sl]);const ei=x.useCallback(N=>{const se=(N.path.split("/").pop()||N.path).split("?")[0];wi(ve=>{const Ae=ve.findIndex(Ie=>Ie.path===N.path);if(Ae>=0){const Ie=[...ve];return Ie[Ae]={...Ie[Ae],additions:Ie[Ae].additions+(N.additions||0),deletions:Ie[Ae].deletions+(N.deletions||0),undoCode:N.undoCode||Ie[Ae].undoCode,originalContent:Ie[Ae].originalContent||N.originalContent,isFileModification:N.isFileModification||Ie[Ae].isFileModification,timestamp:new Date},Ie}return[...ve,{path:N.path,fileName:se,additions:N.additions||0,deletions:N.deletions||0,undoCode:N.undoCode,originalContent:N.originalContent,isFileModification:N.isFileModification,timestamp:new Date}]})},[]),Qa=x.useCallback(async N=>{var se,ve;const G=Ka.find(Ae=>Ae.path===N);if(G){if(G.isFileModification&&G.originalContent!==void 0){console.log("[Undo] Restoring file:",N);const{api:Ae}=ui();if((se=Ae==null?void 0:Ae.files)!=null&&se.writeFile){const Ie=await Ae.files.writeFile(N,G.originalContent);Ie.success?(console.log("[Undo] File restored successfully"),wi(He=>He.filter(gt=>gt.path!==N))):console.error("[Undo] Failed to restore file:",Ie.error)}return}if(G.undoCode){const Ae=Xn.current.get(l);Ae&&Ae.executeJavaScript(G.undoCode).then(()=>{wi(Ie=>Ie.filter(He=>He.path!==N))}).catch(Ie=>console.error("[Undo] Error:",Ie))}else if(G.isFileModification){console.log("[Undo] Using git checkoutFile to restore:",N);const{api:Ae}=ui();if((ve=Ae==null?void 0:Ae.git)!=null&&ve.checkoutFile)try{const Ie=await Ae.git.checkoutFile(N);Ie.success?(console.log("[Undo] File restored via git checkoutFile"),wi(He=>He.filter(gt=>gt.path!==N))):(console.error("[Undo] Git checkoutFile failed:",Ie.error),wi(He=>He.filter(gt=>gt.path!==N)))}catch(Ie){console.error("[Undo] Git checkoutFile error:",Ie),wi(He=>He.filter(gt=>gt.path!==N))}else console.warn("[Undo] Git checkoutFile not available, cannot restore file"),wi(Ie=>Ie.filter(He=>He.path!==N))}else wi(Ae=>Ae.filter(Ie=>Ie.path!==N))}},[Ka,l]),qu=x.useCallback(async()=>{var ve,Ae;const N=Xn.current.get(l),{api:G}=ui(),se=[...Ka].reverse();for(const Ie of se)Ie.isFileModification&&Ie.originalContent!==void 0?(ve=G==null?void 0:G.files)!=null&&ve.writeFile&&await G.files.writeFile(Ie.path,Ie.originalContent).catch(()=>{}):Ie.isFileModification?(Ae=G==null?void 0:G.git)!=null&&Ae.checkoutFile&&await G.git.checkoutFile(Ie.path).catch(()=>{}):Ie.undoCode&&N&&await N.executeJavaScript(Ie.undoCode).catch(()=>{});wi([]),fp(!1)},[Ka,l]),uy=x.useCallback(()=>{wi([]),fp(!1)},[]);x.useEffect(()=>{tn.current=N=>{console.log("[File Modified] Event:",N.type,N.path);let G=0,se=0;if(N.type==="write"&&N.originalContent&&N.newContent){const ve=N.originalContent.split(`
`).length,Ae=N.newContent.split(`
`).length;G=Math.max(0,Ae-ve),se=Math.max(0,ve-Ae),G===0&&se===0&&(G=1,se=1)}else N.type==="create"&&N.newContent?G=N.newContent.split(`
`).length:N.type==="delete"&&N.originalContent&&(se=N.originalContent.split(`
`).length);ei({path:N.path,additions:G,deletions:se,originalContent:N.originalContent,isFileModification:!0})}},[ei]),x.useEffect(()=>{var G,se;return!Tn||!((se=(G=window.electronAPI)==null?void 0:G.agentSdk)!=null&&se.onFileModified)?void 0:window.electronAPI.agentSdk.onFileModified(ve=>{console.log("[Agent SDK File Modified]",ve.type,ve.path);let Ae=0,Ie=0;if(ve.type==="write"&&ve.originalContent&&ve.newContent){const He=ve.originalContent.split(`
`).length,gt=ve.newContent.split(`
`).length;Ae=Math.max(0,gt-He),Ie=Math.max(0,He-gt),Ae===0&&Ie===0&&(Ae=1,Ie=1)}else ve.type==="create"&&ve.newContent?Ae=ve.newContent.split(`
`).length:ve.type==="delete"&&ve.originalContent&&(Ie=ve.originalContent.split(`
`).length);ei({path:ve.path,additions:Ae,deletions:Ie,originalContent:ve.originalContent,isFileModification:!0})})},[Tn,ei]);const dy=x.useRef(new Set);x.useEffect(()=>{var G;if(!Tn||!((G=window.electronAPI)!=null&&G.fileWatcher))return;const N=window.electronAPI.fileWatcher.onChange(se=>{console.log("[FileWatcher] File changed:",se.type,se.relativePath),ei({path:se.path,additions:se.type==="add"||se.type==="change"?1:0,deletions:se.type==="unlink"||se.type==="change"?1:0,isFileModification:!0})});return()=>{console.log("[FileWatcher] App unmounting"),N()}},[Tn]),x.useEffect(()=>{var G;const N=u.projectPath;if(!Tn||!N||!((G=window.electronAPI)!=null&&G.fileWatcher)){Hb(!1);return}if(dy.current.has(N)){console.log("[FileWatcher] Already watching:",N),Hb(!0);return}console.log("[FileWatcher] Starting watcher for:",N),window.electronAPI.fileWatcher.start(N).then(se=>{se.success&&(dy.current.add(N),Hb(!0),console.log("[FileWatcher]  Watching:",N))}).catch(se=>{console.error("[FileWatcher] Start failed:",se)})},[Tn,u.projectPath]),x.useEffect(()=>{try{const N=`cluso-context-chips-${u.projectPath||"global"}`,G=localStorage.getItem(N);if(G){const se=JSON.parse(G);Array.isArray(se)&&(Ld(se),console.log("[ContextChips] Loaded",se.length,"recent chips for",N))}else Ld([])}catch(N){console.warn("[ContextChips] Failed to load from localStorage:",N),Ld([])}jc([])},[u.projectPath]),x.useEffect(()=>{if(u.type!=="browser")return;const N=Xn.current.get(l);if(console.log("[Inspector Sync] Effect triggered:",{isElectron:Tn,hasWebview:!!N,isWebviewReady:ro,isInspectorActive:wt,isScreenshotActive:ye}),!Tn){console.log("[Inspector Sync] Skipping: not in Electron");return}if(!N){console.log("[Inspector Sync] Skipping: no webview ref");return}if(!ro){console.log("[Inspector Sync] Skipping: webview not ready");return}try{if(!N.isConnected){console.log("[Inspector Sync] Skipping: webview not connected to DOM");return}}catch(G){console.log("[Inspector Sync] Skipping: webview check failed",G);return}try{N.getWebContentsId()}catch{console.log("[Inspector Sync] Skipping: webview not ready to receive messages");return}console.log("[Inspector Sync] Sending inspector modes to webview:",{isInspectorActive:wt,isScreenshotActive:ye,isMoveActive:ht});try{N.send("set-inspector-mode",wt),N.send("set-screenshot-mode",ye),N.send("set-move-mode",ht),!wt&&!ht&&(nt(null),Fn(!1),N.send("clear-selection"))}catch(G){console.warn("[Inspector Sync] Failed to send to webview:",G)}},[wt,ye,ht,Tn,ro,l]),x.useEffect(()=>{const N=Xn.current.get(l)},[Tn,l]),x.useEffect(()=>{B&&Fn(!1)},[B]);const Gu=(Qo==null?void 0:Qo.content)??"";x.useEffect(()=>{var N;fn&&!er.current?(N=ln.current)==null||N.scrollIntoView({behavior:"smooth"}):!fn&&(Ce.length>0||mh)&&An(!0)},[Ce,fn,Gu,mh]),x.useEffect(()=>{const N=jt.current;if(!N)return;let G;const se=()=>{er.current=!0,clearTimeout(G),N.scrollHeight-N.scrollTop-N.clientHeight<100?(an(!0),An(!1)):(an(!1),An(!0)),G=setTimeout(()=>{er.current=!1},150)};return N.addEventListener("scroll",se,{passive:!0}),()=>{N.removeEventListener("scroll",se),clearTimeout(G)}},[]);const Na=x.useCallback(()=>{var N;an(!0),An(!1),(N=ln.current)==null||N.scrollIntoView({behavior:"smooth"})},[]),To=N=>{const G=N.target.files;if(!G)return;Array.from(G).slice(0,5-Xr.length).forEach(ve=>{if(!ve.type.startsWith("image/"))return;const Ae=new FileReader;Ae.onloadend=()=>{const Ie=Ae.result;gr(He=>He.length>=5?He:[...He,Ie])},Ae.readAsDataURL(ve)})},wg=x.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.dataTransfer.types.includes("Files")&&at(!0)},[]),Jc=x.useCallback(N=>{N.preventDefault(),N.stopPropagation(),at(!1)},[]),sr=x.useCallback(N=>{N.preventDefault(),N.stopPropagation(),at(!1),Array.from(N.dataTransfer.files).filter(Ae=>Ae.type.startsWith("image/")).slice(0,5-Xr.length).forEach(Ae=>{const Ie=new FileReader;Ie.onloadend=()=>{const He=Ie.result;gr(gt=>gt.length>=5?gt:[...gt,He])},Ie.readAsDataURL(Ae)})},[Xr.length]),ms=x.useCallback(N=>{gr(G=>G.filter((se,ve)=>ve!==N))},[]),Uo=x.useCallback(N=>{const G=N.trim();if(!G.startsWith("/"))return!1;const se=G.slice(1).split(/\s+/),ve=se[0].toLowerCase(),Ae=se.slice(1).join(" ");if(ve==="new"||ve==="clear")return he([]),De(""),he([{id:Date.now().toString(),role:"system",content:" Conversation cleared.",timestamp:new Date}]),setTimeout(()=>he([]),1500),!0;if(ve==="compact"){const He=`Please provide a concise summary of our conversation so far. Focus on:
1. Key topics discussed
2. Decisions made
3. Important code changes or files mentioned
4. Outstanding tasks or questions

${Ae?`Additional guidance: ${Ae||"Summarize the key points and decisions from this conversation"}`:""}

Keep the summary brief but comprehensive enough to continue the conversation effectively.`;return he(gt=>[...gt,{id:Date.now().toString(),role:"system",content:` Compacting context${Ae?` with guidance: "${Ae}"`:""}...`,timestamp:new Date}]),setTimeout(()=>{De(He);const gt=document.querySelector("form[data-chat-form]");gt&&gt.requestSubmit()},100),!0}if(ve==="thinking"){const Ie=Ae.toLowerCase(),He=["off","low","med","high","ultrathink"];let gt="med";if(Ie==="on"||Ie==="")gt=yi==="off"?"med":"off";else if(He.includes(Ie))gt=Ie;else return he(un=>[...un,{id:Date.now().toString(),role:"system",content:` Invalid thinking level: "${Ae}". Valid options: off, low, med, high, ultrathink`,timestamp:new Date}]),De(""),!0;return Du(gt),he(un=>[...un,{id:Date.now().toString(),role:"system",content:`Thinking mode: ${gt.toUpperCase()}`,timestamp:new Date}]),De(""),!0}return!1},[yi]),Qd=async N=>{var lt,_t,yn,Yn,es,so,ts,_i,Ia,fc,Ih,Yu,Ku,Rh,ef;if(Uo(N)||!N.trim()&&!fe&&Xr.length===0&&!Ne)return;const G=sot();console.log("[Turn]",G);const se={id:Date.now().toString(),role:"user",content:N,timestamp:new Date,selectedElement:fe||void 0,turnId:G,sequenceNumber:0};he(Is=>[...Is,se]),De("");let ve="";if(fe){const Is=fe.targetPosition&&fe.originalPosition;ve=`
<selected_element>
${fe.outerHTML||`<${fe.tagName}${fe.id?` id="${fe.id}"`:""}${fe.className?` class="${fe.className}"`:""}>${fe.text||""}</${fe.tagName}>`}

Element Details:
- Tag: ${fe.tagName}
${fe.id?`- ID: ${fe.id}`:""}
${fe.className?`- Classes: ${fe.className}`:""}
${fe.xpath?`- XPath: ${fe.xpath}`:""}
${fe.text?`- Text Content: "${fe.text}"`:""}
${fe.attributes?`- Attributes: ${JSON.stringify(fe.attributes)}`:""}
${fe.computedStyle?`- Computed Style: display=${fe.computedStyle.display}, position=${fe.computedStyle.position}, color=${fe.computedStyle.color}, bg=${fe.computedStyle.backgroundColor}`:""}
${fe.rect?`- Current Position: ${Math.round(fe.rect.width)}x${Math.round(fe.rect.height)} at (${Math.round(fe.rect.left)}, ${Math.round(fe.rect.top)})`:""}
${Is?`
<repositioning_request>
The user wants to MOVE this element to a new position.
- Original Position: ${Math.round(fe.originalPosition.width)}x${Math.round(fe.originalPosition.height)} at (${Math.round(fe.originalPosition.left)}, ${Math.round(fe.originalPosition.top)})
- Target Position: ${Math.round(fe.targetPosition.width)}x${Math.round(fe.targetPosition.height)} at (${Math.round(fe.targetPosition.x)}, ${Math.round(fe.targetPosition.y)})
- Width Change: ${fe.targetPosition.width-fe.originalPosition.width}px
- Height Change: ${fe.targetPosition.height-fe.originalPosition.height}px
- X Offset: ${fe.targetPosition.x-fe.originalPosition.left}px
- Y Offset: ${fe.targetPosition.y-fe.originalPosition.top}px

Please help the user achieve this repositioning by modifying the CSS/layout of the element. Consider:
1. Position property (relative, absolute, fixed, or using flexbox/grid)
2. The element's current CSS and its impact on layout
3. Whether the element needs to be extracted from the normal flow
4. Responsive considerations
</repositioning_request>`:""}
</selected_element>`}let Ae="";mt.length>0&&(Ae=`

Attached Files:
${mt.map(Is=>`
File: ${Is.path}
\`\`\`
${Is.content}
\`\`\`
`).join(`
`)}`);const Ie=u==null?void 0:u.projectPath,He=Ie?Ie.split("/").pop():null;let gt=`
Current Page: ${J}
${Te?`Page Title: ${Te}`:""}
${Ie?`Project Folder: ${Ie}`:""}
${He?`Project Name: ${He}`:""}

User Request: ${se.content}
${ve}
${Ae}
${Ne?`Context: User selected element for visual reference: <${Ne.tagName}>`:""}

${Ie?`IMPORTANT: The source files for this page are in ${Ie}. Use the Read and Glob tools to explore the project structure and find relevant source files before making changes.`:""}
    `;if(Gs&&Lr.length>0&&(gt+=`

Recent Console Logs:
${Lr.join(`
`)}`),jo&&jo.length>0){const Is=jo.map(Co=>`[${Co.timestamp.toLocaleTimeString()}] [${Co.type}] ${Co.message}`).join(`
`);gt+=`

Selected Console Logs (${jo.length} entries):
${Is}`}if(Nl&&Nl.length>0){const Is=Nl.map((Co,Si)=>`${Si+1}. ${Co.title}
   URL: ${Co.url}
   ${Co.snippet}`).join(`

`);gt+=`

Web Search Results (${Nl.length} results for context):
${Is}`}fe||/\b(change|modify|update|edit|delete|remove|add|make|set|fix|replace|style|color|size|font|width|height|margin|padding|border)\b/i.test(se.content)?gt+=`
Instructions:
You are an AI UI assistant that can modify web pages. The user has selected an element to focus on.

CRITICAL WORKFLOW FOR SOURCE CODE CHANGES:
1. FIRST: Use the Read tool to read the ENTIRE source file (the component/page containing this element)
2. UNDERSTAND the full context - how this element fits in the page structure, what styles affect it, what props/data it uses
3. THEN make your changes, considering how they impact the whole page
4. The selected element is just the FOCUS AREA - you need the full file context to make good edits

For QUICK DOM PREVIEWS (temporary, not saved):
- Output: \`\`\`json-exec {"code": "...", "undo": "..."}\`\`\`
- The "code" executes immediately, "undo" restores original
- Use for quick style/text changes before committing to source

For SOURCE CODE EDITS (permanent):
1. READ the full source file first using the Read tool
2. Understand the component structure and how the element is rendered
3. Use the Edit tool to modify the source, preserving the overall structure
4. NEVER guess at the source code - always read it first

Selected Element Context:
- XPath: ${(fe==null?void 0:fe.xpath)||"N/A"}
- ID: ${(fe==null?void 0:fe.id)||"N/A"}
- Classes: ${(fe==null?void 0:fe.className)||"N/A"}

IMPORTANT: The selected element HTML above is just a snippet. For source edits, you MUST read the full file to understand the complete context. Don't assume the structure - READ IT.

Be concise. Confirm what you changed.
      `:gt+=`
Instructions:
You are a helpful AI assistant. Answer the user's question conversationally.
DO NOT modify the page or execute any code unless the user explicitly asks you to change something.
If you're not sure what the user wants, ask for clarification.
      `;const _n=[{type:"text",text:gt}];Xr.forEach((Is,Co)=>{Xr.length>1&&_n.push({type:"text",text:`
[Image ${Co+1} of ${Xr.length}]:`});const Si=Is.split(",")[1],tf=Is.split(";")[0].split(":")[1]||"image/png";_n.push({type:"image",image:{base64Data:Si,mimeType:tf}})}),wo(!1),gr([]),$e(null),Le(null),_e(!1),Fd(null),rt.current&&(rt.current.value="");try{const Is=nst(Vt.id);let Co=null;const{intent:Si,systemPrompt:tf,tools:Np,promptMode:nf}=ng(se.content);console.log(`[Coding Agent] Intent: ${Si.type} (${Math.round(Si.confidence*100)}%) | Mode: ${nf}`);const el=Lo.providers.find(zn=>zn.id==="google"&&zn.enabled&&zn.apiKey),Ip=Xr.length>0,Mt=/(?:add|insert|put|use|replace|change|swap|set|place|show|save|upload).*(?:image|photo|picture|attached|this|screenshot)|(?:this|the|attached)\s*(?:image|photo|picture|screenshot)|(?:image|photo|picture|screenshot)\s*(?:here|to|in|on|as)/i.test(se.content);if(Ip&&Mt){const zn=u==null?void 0:u.projectPath;if(!zn){const Vr={id:`msg-error-${Date.now()}`,role:"assistant",content:"Cannot save image: No project folder is set. Please open a project first.",timestamp:new Date,model:"system"};he(jr=>[...jr,Vr]),gr([]);return}try{const Vr=rn=>{let cn=0;for(let dr=0;dr<Math.min(rn.length,1e4);dr++){const fr=rn.charCodeAt(dr);cn=(cn<<5)-cn+fr,cn=cn&cn}return Math.abs(cn).toString(16).padStart(8,"0")},jr=Xr[0],Gn=Vr(jr),xs=jr.match(/^data:image\/(\w+);/),Rs=xs?xs[1].replace("jpeg","jpg"):"png",or=`img-${Gn}.${Rs}`,Yr=`${`${zn}/public/uploads`}/${or}`,oo=`/uploads/${or}`;console.log("[Image Save] Saving to:",Yr);const Xt=await((lt=window.electronAPI)==null?void 0:lt.files.saveImage(jr,Yr));if(!(Xt!=null&&Xt.success))throw new Error((Xt==null?void 0:Xt.error)||"Failed to save image");if(console.log("[Image Save] Image saved successfully"),fe){const rn=Xn.current.get(l);if(rn){const cn=((_t=fe.tagName)==null?void 0:_t.toLowerCase())||"",dr=cn==="img",fr=["div","section","article","aside","header","footer","main","figure","span","p"].includes(cn);let Hn,Un,Qn;if(dr){const nr=await rn.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    return el ? el.src : '';
                  })();
                `);Hn=`
                  (function() {
                    const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el && el.tagName === 'IMG') { el.src = '${oo}'; return 'Applied'; }
                    return 'Not found';
                  })();
                `,Un=`
                  (function() {
                    const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el && el.tagName === 'IMG') { el.src = '${nr}'; return 'Reverted'; }
                    return 'Not found';
                  })();
                `,Qn=`Set image src to ${or}`,await rn.executeJavaScript(Hn);const Ys=`dom-img-${Date.now()}`,Ms={id:Ys,element:fe,cssChanges:{},srcChange:{oldSrc:nr||"",newSrc:oo},description:Qn,undoCode:Un,applyCode:Hn,userRequest:se.content||"Insert image",patchStatus:"preparing"};$o(Ms),Ji(Ys,fe,{},Qn,Un,Hn,se.content||"Insert image",zn,void 0,{oldSrc:nr||"",newSrc:oo})}else if(fr){const nr=await rn.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (!el) return null;
                    const img = el.querySelector('img');
                    if (img) return { hasChildImg: true, childSrc: img.src };
                    return { hasChildImg: false, currentBg: el.style.backgroundImage };
                  })();
                `);if(nr!=null&&nr.hasChildImg)Hn=`
                    (function() {
                      const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) { const img = el.querySelector('img'); if (img) { img.src = '${oo}'; return 'Applied'; } }
                      return 'Not found';
                    })();
                  `,Un=`
                    (function() {
                      const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) { const img = el.querySelector('img'); if (img) { img.src = '${nr.childSrc}'; return 'Reverted'; } }
                      return 'Not found';
                    })();
                  `,Qn=`Set child image src to ${or}`;else{const oi=await rn.executeJavaScript(`
                    (function() {
                      const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      return el ? { text: el.textContent, bg: el.style.backgroundImage, bgSize: el.style.backgroundSize, bgPos: el.style.backgroundPosition } : null;
                    })();
                  `);Hn=`
                    (function() {
                      const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) {
                        el.textContent = '';
                        el.style.backgroundImage = 'url(${oo})';
                        el.style.backgroundSize = 'cover';
                        el.style.backgroundPosition = 'center';
                        return 'Applied as background';
                      }
                      return 'Not found';
                    })();
                  `,Un=`
                    (function() {
                      const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) {
                        el.textContent = ${JSON.stringify((oi==null?void 0:oi.text)||"")};
                        el.style.backgroundImage = '${(oi==null?void 0:oi.bg)||""}';
                        el.style.backgroundSize = '${(oi==null?void 0:oi.bgSize)||""}';
                        el.style.backgroundPosition = '${(oi==null?void 0:oi.bgPos)||""}';
                        return 'Reverted';
                      }
                      return 'Not found';
                    })();
                  `,Qn=`Set background image to ${or}`}await rn.executeJavaScript(Hn);const Ys=`dom-img-${Date.now()}`,Ms={id:Ys,element:fe,cssChanges:nr!=null&&nr.hasChildImg?{}:{backgroundImage:`url(${oo})`,backgroundSize:"cover",backgroundPosition:"center"},srcChange:nr!=null&&nr.hasChildImg?{oldSrc:nr.childSrc||"",newSrc:oo}:void 0,description:Qn,undoCode:Un,applyCode:Hn,userRequest:se.content||"Insert image",patchStatus:"preparing"};$o(Ms),Ji(Ys,fe,nr!=null&&nr.hasChildImg?{}:{backgroundImage:`url(${oo})`,backgroundSize:"cover",backgroundPosition:"center"},Qn,Un,Hn,se.content||"Insert image",zn)}else Hn=`
                  (function() {
                    const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) { el.src = '${oo}'; return 'Applied'; }
                    return 'Not found';
                  })();
                `,Un="location.reload()",Qn=`Set ${cn} src to ${or}`,await rn.executeJavaScript(Hn);const wr={id:`msg-img-${Date.now()}`,role:"assistant",content:` ${Qn}`,timestamp:new Date,model:"system",intent:"ui_modify"};he(nr=>[...nr,wr]),Ya({code:Hn,undoCode:Un,description:Qn,additions:1,deletions:1,source:"dom"}),gr([]);return}}const mn={id:`msg-img-${Date.now()}`,role:"assistant",content:` Image saved to \`${oo}\`

To insert this image into an element, select an element first and then attach the image.`,timestamp:new Date,model:"system"};he(rn=>[...rn,mn]),gr([]);return}catch(Vr){console.error("[Image Save] Error:",Vr);const jr={id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to save image: ${Vr instanceof Error?Vr.message:"Unknown error"}`,timestamp:new Date,model:"system"};he(Gn=>[...Gn,jr]),gr([]);return}}if(console.log("[Instant UI] Check conditions:",{intentType:Si.type,hasSelectedElement:!!fe,hasGoogleProvider:!!(el!=null&&el.apiKey),hasSourceLocation:!!((Yn=(yn=fe==null?void 0:fe.sourceLocation)==null?void 0:yn.sources)!=null&&Yn[0])}),Si.type==="ui_modify"&&!fe){console.log("[Instant UI] ui_modify detected but no element selected");const zn={id:`msg-nosel-${Date.now()}`,role:"assistant",content:`To modify the UI, first select an element using the inspector (crosshair icon) or say "highlight the buttons" to see what's available.`,timestamp:new Date,model:"system",intent:"ui_modify"};he(Vr=>[...Vr,zn]);return}if(Si.type==="ui_modify"&&fe&&(el!=null&&el.apiKey)){console.log("[Instant UI] Triggering instant UI update with source patch..."),console.log("[Instant UI] Selected element:",{tagName:fe.tagName,xpath:fe.xpath,sourceLocation:fe.sourceLocation}),Il(!0),jd("streaming"),ic([]),_o({id:`instant-ui-${Date.now()}`,content:` Analyzing \`<${fe.tagName.toLowerCase()}>\` element...`,reasoning:"",toolCalls:[]});const zn=Xr.length>0,Vr=/(?:add|insert|put|use|replace|change|swap|set|place|show).*(?:image|photo|picture|attached|this)|(?:this|the|attached)\s*(?:image|photo|picture)|image\s*(?:here|to|in|on)/i.test(se.content);if(zn&&(Vr||se.content.trim()==="")){const Xt=((es=fe.tagName)==null?void 0:es.toLowerCase())||"";console.log("[Image Insert] Detected image insertion request for:",Xt);const mn=u==null?void 0:u.projectPath;if(!mn){const rn={id:`msg-error-${Date.now()}`,role:"assistant",content:"Cannot insert image: No project folder is set. Please open a project first.",timestamp:new Date,model:"system"};he(cn=>[...cn,rn]),gr([]);return}try{const rn=Zs=>{let Os=0;for(let hc=0;hc<Math.min(Zs.length,1e4);hc++){const Cg=Zs.charCodeAt(hc);Os=(Os<<5)-Os+Cg,Os=Os&Os}return Math.abs(Os).toString(16).padStart(8,"0")},cn=Xr[0],dr=rn(cn),fr=cn.match(/^data:image\/(\w+);/),Hn=fr?fr[1].replace("jpeg","jpg"):"png",Un=`img-${dr}.${Hn}`,wr=`${`${mn}/public/uploads`}/${Un}`,nr=`/uploads/${Un}`;console.log("[Image Insert] Saving to:",wr);const Ys=await((so=window.electronAPI)==null?void 0:so.files.saveImage(cn,wr));if(!(Ys!=null&&Ys.success))throw new Error((Ys==null?void 0:Ys.error)||"Failed to save image");console.log("[Image Insert] Image saved successfully");const Ms=Xn.current.get(l);if(!Ms)throw new Error("Webview not available");const oi=Xt==="img",Rp=["div","section","article","aside","header","footer","main","figure","span","p"].includes(Xt);let Ao,Ra,gs;if(oi){const Zs=await Ms.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  return el ? el.src : '';
                })();
              `);if(Ao=`
                (function() {
                  const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${nr}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Ra=`
                (function() {
                  const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${Zs}';
                    return 'Reverted';
                  }
                  return 'Element not found';
                })();
              `,gs=`Set image src to ${Un}`,await Ms.executeJavaScript(Ao),(_i=(ts=fe.sourceLocation)==null?void 0:ts.sources)!=null&&_i[0]){const Os=`dom-img-${Date.now()}`,hc={id:Os,element:fe,cssChanges:{},srcChange:{oldSrc:Zs||"",newSrc:nr},description:gs,undoCode:Ra,applyCode:Ao,userRequest:se.content||"Insert image",patchStatus:"preparing"};$o(hc),Ji(Os,fe,{},gs,Ra,Ao,se.content||"Insert image",mn,void 0,{oldSrc:Zs||"",newSrc:nr})}}else if(Rp){const Zs=await Ms.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (!el) return null;
                  const img = el.querySelector('img');
                  if (img) {
                    return { hasChildImg: true, childSrc: img.src };
                  }
                  return { hasChildImg: false, currentBg: el.style.backgroundImage };
                })();
              `);if(Zs!=null&&Zs.hasChildImg)Ao=`
                  (function() {
                    const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${nr}';
                        return 'Applied to child img';
                      }
                    }
                    return 'Element not found';
                  })();
                `,Ra=`
                  (function() {
                    const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${Zs.childSrc}';
                        return 'Reverted';
                      }
                    }
                    return 'Element not found';
                  })();
                `,gs=`Set child image src to ${Un}`;else{const Os=await Ms.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    return el ? { text: el.textContent, bg: el.style.backgroundImage, bgSize: el.style.backgroundSize, bgPos: el.style.backgroundPosition } : null;
                  })();
                `);if(Ao=`
                  (function() {
                    const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = 'url(${nr})';
                      el.style.backgroundSize = 'cover';
                      el.style.backgroundPosition = 'center';
                      el.textContent = '';
                      return 'Applied background-image';
                    }
                    return 'Element not found';
                  })();
                `,Ra=`
                  (function() {
                    const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = '${(Os==null?void 0:Os.bg)||""}';
                      el.style.backgroundSize = '${(Os==null?void 0:Os.bgSize)||""}';
                      el.style.backgroundPosition = '${(Os==null?void 0:Os.bgPos)||""}';
                      el.textContent = '${((Os==null?void 0:Os.text)||"").replace(/'/g,"\\'")}';
                      return 'Reverted';
                    }
                    return 'Element not found';
                  })();
                `,gs=`Set background-image to ${Un}`,(fc=(Ia=fe.sourceLocation)==null?void 0:Ia.sources)!=null&&fc[0]){const hc=`dom-img-${Date.now()}`,Cg={id:hc,element:fe,cssChanges:{backgroundImage:`url(${nr})`,backgroundSize:"cover",backgroundPosition:"center"},description:gs,undoCode:Ra,applyCode:Ao,userRequest:se.content||"Insert image",patchStatus:"preparing"};$o(Cg),Ji(hc,fe,{backgroundImage:`url(${nr})`,backgroundSize:"cover",backgroundPosition:"center"},gs,Ra,Ao,se.content||"Insert image",mn)}}await Ms.executeJavaScript(Ao)}else Ao=`
                (function() {
                  const el = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el) {
                    el.src = '${nr}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Ra="location.reload()",gs=`Set ${Xt} src to ${Un}`,await Ms.executeJavaScript(Ao);const Ks={id:`msg-img-${Date.now()}`,role:"assistant",content:`Preview: ${gs}`,timestamp:new Date,model:Vt.id,intent:"ui_modify"};he(Zs=>[...Zs,Ks]),Ya({code:Ao,undoCode:Ra,description:gs,additions:1,deletions:1,source:"dom"}),gr([]);return}catch(rn){console.error("[Image Insert] Error:",rn);const cn={id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to insert image: ${rn instanceof Error?rn.message:"Unknown error"}`,timestamp:new Date,model:"system"};he(dr=>[...dr,cn]),gr([]);return}}if(fe.sourceLocation){if(console.log("[Instant UI] sourceLocation.sources:",fe.sourceLocation.sources),console.log("[Instant UI] sourceLocation.summary:",fe.sourceLocation.summary),(Ih=fe.sourceLocation.sources)!=null&&Ih[0]){const Xt=fe.sourceLocation.sources[0];console.log("[Instant UI] Source file:",Xt.file,"line:",Xt.line,"name:",Xt.name)}}else console.log("[Instant UI] NO sourceLocation on selectedElement!");const jr="gemini-2.5-flash-lite";_o(Xt=>Xt?{...Xt,content:` Analyzing \`<${fe.tagName.toLowerCase()}>\` element...

 Generating CSS changes with Gemini Flash Lite...`}:null);const Gn=await xdt(fe,se.content,el.apiKey,jr),xs=Object.keys(Gn.cssChanges).length>0,Rs=!!Gn.textChange,or=xs||Rs;if(console.log("[Instant UI] Result:",{hasCssChanges:xs,hasTextChange:Rs,textChange:Gn.textChange,cssChanges:Gn.cssChanges}),or){const Xt=[...Object.entries(Gn.cssChanges).map(([mn,rn])=>`   \`${mn}\`: \`${rn}\``),...Rs?[`   text: "${Gn.textChange}"`]:[]].join(`
`);_o(mn=>mn?{...mn,content:` Analyzing \`<${fe.tagName.toLowerCase()}>\` element...

 Generated changes:
${Xt}

 Applying to preview...`}:null)}const ko=Xn.current.get(l);let Yr="",oo="";if(Gn.success&&or&&ko){const Xt=`
            (function() {
              const element = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
              if (element) {
                const original = {
                  textContent: element.textContent || '',
                  styles: {}
                };
                ${xs?Object.keys(Gn.cssChanges).map(mn=>`original.styles['${mn}'] = element.style.${mn} || '';`).join(`
`):""}
                return JSON.stringify(original);
              }
              return null;
            })();
          `;try{const mn=await ko.executeJavaScript(Xt),rn=mn?JSON.parse(mn):{textContent:"",styles:{}};console.log("[Instant UI] Original captured:",rn);let cn="";Rs&&(cn+=`element.textContent = ${JSON.stringify(rn.textContent)};
`),xs&&(cn+=Object.entries(rn.styles).map(([wr,nr])=>`element.style.${wr} = '${nr}';`).join(`
`)),Yr=`
              (function() {
                const element = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                if (element) {
                  ${cn}
                  return 'Reverted';
                }
                return 'Element not found';
              })();
            `;let dr="";Rs&&(dr+=`element.textContent = ${JSON.stringify(Gn.textChange)};
`),xs&&(dr+=Object.entries(Gn.cssChanges).map(([wr,nr])=>`element.style.${wr} = '${nr}';`).join(`
`)),oo=`
              (function() {
                const element = document.evaluate('${fe.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                if (element) {
                  ${dr}
                  return 'Applied';
                }
                return 'Element not found';
              })();
            `;const fr=await ko.executeJavaScript(oo);console.log("[Instant UI] DOM update result:",fr);const Hn={id:`msg-ui-${Date.now()}`,role:"assistant",content:`Preview: ${Gn.description}`,timestamp:new Date,model:Vt.id,intent:"ui_modify"};he(wr=>[...wr,Hn]);const Un=Object.keys(Gn.cssChanges).length,Qn=Rs?1:0;if(Ya({code:oo,undoCode:Yr,description:Gn.description,additions:Un+Qn,deletions:Un+Qn,source:"dom"}),(Ku=(Yu=fe.sourceLocation)==null?void 0:Yu.sources)!=null&&Ku[0]){const wr=`dom-${Date.now()}`,nr={id:wr,element:fe,cssChanges:Gn.cssChanges,textChange:Gn.textChange,description:Gn.description,undoCode:Yr,applyCode:oo,userRequest:se.content,patchStatus:"preparing"};console.log("[Instant UI] Pending DOM approval created:",wr),_o(Ms=>Ms?{...Ms,content:` Preview applied!

${Gn.description}

 Preparing source code patch...`}:null),$o(nr);const Ys=Rs?{oldText:rn.textContent,newText:Gn.textChange}:void 0;Ji(wr,fe,Gn.cssChanges,Gn.description,Yr,oo,se.content,u==null?void 0:u.projectPath,Ys)}Il(!1),_o(null);return}catch(mn){console.error("[Instant UI] Failed to apply DOM changes:",mn),Il(!1),_o(null);const rn={id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to apply preview: ${mn instanceof Error?mn.message:"Unknown error"}`,timestamp:new Date,model:Vt.id,intent:"ui_modify"};he(cn=>[...cn,rn]);return}}else if(!or){Il(!1),_o(null);const Xt={id:`msg-nochange-${Date.now()}`,role:"assistant",content:`No changes to apply for: "${se.content}"`,timestamp:new Date,model:Vt.id,intent:"ui_modify"};he(mn=>[...mn,Xt]);return}}const tr=nf!=="dom_edit";if(console.log(`[AI SDK] Mode: ${nf} | MCP tools: ${tg.length} | Tools enabled: ${tr}`),Is&&(Zm.length>0||Is==="claude-code"||Is==="codex"||Is==="google")){console.log(`[AI SDK] Using provider: ${Is} for model: ${Vt.id}`),console.log(`[AI SDK] Using tools: ${tr}`);const zn=sst(Ce.filter(Xt=>Xt.role!=="system").slice(-10)),Vr={role:"user",content:_n},jr=[...zn,Vr];rg(!0),Il(!0),jd("streaming"),ic([]);const Gn=`streaming-${Date.now()}`;_o({id:Gn,content:"",reasoning:"",toolCalls:[]});const xs=[];console.log("[AI SDK] Starting stream...");let Rs="";console.log("[AI SDK] Streaming with project folder:",(u==null?void 0:u.projectPath)||"(none)");const or=await Qm({modelId:Vt.id,messages:jr,providers:Zm,system:tr?tf:void 0,tools:tr?Np:void 0,maxSteps:15,enableReasoning:yi!=="off",mcpTools:tg,projectFolder:(u==null?void 0:u.projectPath)||void 0,onChunk:Xt=>{const mn=typeof Xt=="string"?Xt:String(Xt??"");Rs+=mn,_o(rn=>rn?{...rn,content:Rs}:null)},onStepFinish:Xt=>{var rn,cn,dr,fr,Hn,Un;if(console.log("[AI SDK] Step finished:",{textLength:(rn=Xt==null?void 0:Xt.text)==null?void 0:rn.length,toolCalls:(cn=Xt==null?void 0:Xt.toolCalls)==null?void 0:cn.length,toolResults:(dr=Xt==null?void 0:Xt.toolResults)==null?void 0:dr.length}),Xt!=null&&Xt.toolCalls&&Xt.toolCalls.length>0)for(const Qn of Xt.toolCalls){const wr=Qn.toolCallId||`tool-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,nr=((fr=Qn.toolName)==null?void 0:fr.replace(/^mcp_[^_]+_/,""))||"tool";xs.find(Ms=>Ms.id===wr)||xs.push({id:wr,name:nr,args:Qn.args||{},status:"running"})}if(Xt!=null&&Xt.toolResults&&Xt.toolResults.length>0)for(const Qn of Xt.toolResults){const wr=Qn.toolCallId,nr=((Hn=Qn.toolName)==null?void 0:Hn.replace(/^mcp_[^_]+_/,""))||"tool",Ys=wr?xs.find(Ms=>Ms.id===wr):xs.find(Ms=>Ms.name===nr&&Ms.status==="running");Ys&&(Ys.status=(Un=Qn.result)!=null&&Un.error?"error":"done",Ys.result=Qn.result)}const mn=xs.map(Qn=>`${Qn.status==="running"?"":Qn.status==="error"?"":""} ${Qn.name}`).join("  ");mn&&_o(Qn=>Qn?{...Qn,content:Rs||`Working: ${mn}`,toolCalls:xs.map(wr=>({id:wr.id,name:wr.name,args:wr.args,status:wr.status==="done"?"complete":wr.status,result:wr.result}))}:null)},onReasoningChunk:Xt=>{const mn=typeof Xt=="string"?Xt:(Xt==null?void 0:Xt.content)??String(Xt??"");console.log("[AI SDK] Reasoning chunk:",mn.substring(0,100)),_o(rn=>rn?{...rn,reasoning:(rn.reasoning||"")+mn}:null)}});if(console.log("[AI SDK] Stream complete, clearing streaming state"),Il(!1),rg(!1),jd("idle"),Qo!=null&&Qo.toolCalls&&Qo.toolCalls.length>0){const Xt=Qo.toolCalls.map(mn=>({id:mn.id,name:mn.name,status:mn.status==="error"?"error":"success",timestamp:new Date}));ic(Xt)}_o(null);let ko=(or.text||Rs||"").trim();if(!ko&&or.toolResults&&or.toolResults.length>0&&(ko=or.toolResults.map(mn=>{var fr;const rn=((fr=mn.toolName)==null?void 0:fr.replace(/^mcp_[^_]+_/,""))||"tool",cn=mn.result;if(cn!=null&&cn.error)return` ${rn}: ${cn.error}`;if(cn!=null&&cn.content&&typeof cn.content=="string"){const Hn=cn.content.length>200?cn.content.substring(0,200)+"...":cn.content;return` ${rn}: ${cn.path||"file"}
\`\`\`
${Hn}
\`\`\``}if(cn!=null&&cn.tree&&Array.isArray(cn.tree)){const Hn=Un=>{let Qn=Un.length;for(const wr of Un)wr!=null&&wr.children&&(Qn+=Hn(wr.children));return Qn};return` ${rn}: Found ${Hn(cn.tree)} items`}if(cn!=null&&cn.entries&&Array.isArray(cn.entries)){const Hn=cn.entries,Un=Hn.slice(0,5).map(Qn=>Qn.isDirectory?` ${Qn.name}`:` ${Qn.name}`).join(", ");return` ${rn}: ${Hn.length} items (${Un}${Hn.length>5?"...":""})`}if(cn!=null&&cn.matches&&Array.isArray(cn.matches))return` ${rn}: Found ${cn.matches.length} matches`;if(cn!=null&&cn.success)return` ${rn}: Success`;const dr=JSON.stringify(cn,null,2);return` ${rn}: ${dr.length>200?dr.substring(0,200)+"...":dr}`}).join(`

`)||"Tasks completed."),ko||(xs.length>0?ko=`Done.

${xs.map(mn=>` ${mn.name}${mn.status==="error"?" (error)":""}`).join(`
`)}`:ko="No response generated."),Co=ko,or.reasoning){const Xt=typeof or.reasoning=="string"?or.reasoning:String(or.reasoning);console.log("[AI SDK] Reasoning received:",Xt.substring(0,200))}const Yr=[];if(or.toolCalls&&or.toolCalls.length>0){console.log("[AI SDK] Tool calls:",or.toolCalls);for(let Xt=0;Xt<or.toolCalls.length;Xt++){const mn=or.toolCalls[Xt],rn=(Rh=or.toolResults)==null?void 0:Rh[Xt];Yr.push({id:mn.toolCallId,name:mn.toolName,args:mn.args,result:rn==null?void 0:rn.result,isError:rn?((ef=rn.result)==null?void 0:ef.error)!==void 0:!1})}}window.__pendingToolUsage=Yr.length>0?Yr:void 0,window.__pendingIntent=Si.type!=="unknown"?Si.type:void 0,console.log("[AI SDK] Result reasoning:",{hasReasoning:!!or.reasoning,type:typeof or.reasoning,length:typeof or.reasoning=="string"?or.reasoning.length:"N/A"});const oo=or.reasoning&&typeof or.reasoning=="string"?or.reasoning:void 0;window.__pendingReasoning=oo,console.log("[AI SDK] Stored pending reasoning:",oo?`${oo.substring(0,100)}...`:"none")}else{console.log("[AI SDK] Falling back to GoogleGenAI with streaming");const zn="AIzaSyAuAGR2YNrczzJKRcqVr924j71lRqc02IU",Vr=new uR({apiKey:zn}),jr=[{role:"user",parts:_n.map(Rs=>Rs.type==="text"?{text:Rs.text}:{inlineData:{data:Rs.image.base64Data,mimeType:Rs.image.mimeType||"image/png"}})}];Il(!0),jd("streaming"),ic([]),_o({id:`streaming-fallback-${Date.now()}`,content:"",reasoning:"",toolCalls:[]});const Gn=await Vr.models.generateContentStream({model:Vt.id,contents:jr});let xs="";for await(const Rs of Gn){const or=Rs.text||"";xs+=or,_o(ko=>ko?{...ko,content:ko.content+or}:null)}Il(!1),_o(null),Co=xs}if(Co){const zn=/```json-exec\s*(\{[\s\S]*?\})\s*```/g;let Vr;const jr=[];for(;(Vr=zn.exec(Co))!==null;)try{const Yr=JSON.parse(Vr[1]);Yr.code&&jr.push({code:Yr.code,undo:Yr.undo})}catch(Yr){console.error("[Exec] Failed to parse:",Yr)}const Gn=Co.replace(/```json-exec\s*\{[\s\S]*?\}\s*```/g,"").trim(),xs=window.__pendingToolUsage,Rs=window.__pendingIntent,or=window.__pendingReasoning;delete window.__pendingToolUsage,delete window.__pendingIntent,delete window.__pendingReasoning,he(Yr=>[...Yr,{id:(Date.now()+1).toString(),role:"assistant",content:Gn||"Changes applied.",timestamp:new Date,model:Vt.name,intent:Rs,toolUsage:xs,reasoning:or,turnId:G,parentTurnId:se.id,sequenceNumber:1}]);const ko=Xn.current.get(l);if(jr.length>0&&ko&&ro){const Yr=jr.map(rn=>rn.code).join(`;
`),oo=jr.map(rn=>rn.undo||"").filter(Boolean).join(`;
`);console.log("[Exec] Executing immediately:",Yr),ko.executeJavaScript(Yr).then(()=>console.log("[Exec] Applied")).catch(rn=>console.error("[Exec] Error:",rn));const Xt=jr.length,mn=jr.filter(rn=>rn.undo).length;Ya({code:Yr,undoCode:oo||"",description:Gn||"Change applied",additions:Xt,deletions:mn,source:"code"})}}}catch(Is){console.error("[AI] Error:",Is);const Co=Is instanceof Error?Is.message:"Unknown error occurred";he(Si=>[...Si,{id:Date.now().toString(),role:"assistant",content:`Sorry, I encountered an error: ${Co}`,timestamp:new Date,model:Vt.name}])}finally{Il(!1),_o(null),rg(!1)}},kh=()=>{const N=Xn.current.get(l);if(!fe||!fe.rect||!N)return{display:"none"};const G=N.getBoundingClientRect(),se=48,ve=376,Ae=150,Ie=8,He=fe.rect,gt=G.top+He.top,un=gt+He.height,Et=G.left+He.left,_n=Et+He.width;let lt,_t;_n+Ie+ve<window.innerWidth-10?_t=_n+Ie:Et-Ie-se>10?_t=Et-se-Ie:_t=Math.max(10,Et);const yn=window.innerHeight-un-Ie,Yn=gt-Ie;return yn>=Ae+20?lt=un+Ie:Yn>=Ae+20?lt=gt-Ae-Ie:lt=Math.max(10,Math.min(gt,window.innerHeight-Ae-10)),_t=Math.max(10,Math.min(_t,window.innerWidth-se-10)),lt=Math.max(10,Math.min(lt,window.innerHeight-se-10)),{top:`${lt}px`,left:`${_t}px`}},[Wu,Eg]=x.useState("");x.useEffect(()=>{var N;Tn&&((N=window.electronAPI)!=null&&N.getWebviewPreloadPath)&&window.electronAPI.getWebviewPreloadPath().then(G=>{console.log("Webview preload path:",G),Eg(G)})},[Tn]);const Tp=x.useCallback(async()=>{var Ie,He,gt,un,Et;if(!((He=(Ie=fe==null?void 0:fe.sourceLocation)==null?void 0:Ie.sources)!=null&&He[0]))return;const N=fe.sourceLocation.sources[0];let G=N.file;const se=N.line||1,ve=N.endLine||se+10;if(!G||!Tn||!((un=(gt=window.electronAPI)==null?void 0:gt.files)!=null&&un.readFile)){console.log("Cannot read file:",{filePath:G,isElectron:Tn,hasFiles:!!((Et=window.electronAPI)!=null&&Et.files)});return}if(!(G.startsWith("/")&&(G.startsWith("/Users/")||G.startsWith("/home/")||G.startsWith("/var/")||G.startsWith("/tmp/")))&&u.projectPath){const _n=G.replace(/^\.\//,"").replace(/^\//,"");G=`${u.projectPath}/${_n}`,console.log("Resolved relative path:",G)}try{const _n=await window.electronAPI.files.readFile(G);if(_n.success&&_n.data){const lt=_n.data.split(`
`),_t=3,yn=7,Yn=Math.max(1,se-_t),es=Math.min(lt.length,ve+yn),so=lt.slice(Yn-1,es);Dl({code:so.join(`
`),fileName:G.split("/").pop()||"unknown",startLine:Yn,endLine:es})}}catch(_n){console.error("Failed to read source file:",_n)}},[fe,Tn,u.projectPath]),Ji=x.useCallback((N,G,se,ve,Ae,Ie,He,gt,un,Et)=>{var lt,_t,yn,Yn,es,so;console.log("=".repeat(60)),console.log("[DOM Approval] === PREPARING SOURCE PATCH ==="),console.log("[DOM Approval] Inputs:",{approvalId:N,elementTag:G.tagName,cssChanges:Object.keys(se).length>0?se:"none",projectPath:gt||"NOT SET",hasSourceLocation:!!G.sourceLocation,sourceFile:((yn=(_t=(lt=G.sourceLocation)==null?void 0:lt.sources)==null?void 0:_t[0])==null?void 0:yn.file)||"NONE",sourceLine:((so=(es=(Yn=G.sourceLocation)==null?void 0:Yn.sources)==null?void 0:es[0])==null?void 0:so.line)||"NONE",userRequest:He==null?void 0:He.substring(0,50),hasSrcChange:!!Et}),console.log("=".repeat(60));const _n={modelId:Jm.current.id,providers:sE.current};ldt({element:G,cssChanges:se,providerConfig:_n,projectPath:gt||void 0,userRequest:He,textChange:un,srcChange:Et}).then(ts=>{console.log("[DOM Approval] Patch generation completed:",{approvalId:N,success:!!ts}),$o(_i=>{if(!_i||_i.id!==N)return _i;if(ts){const Ia={id:`patch-${Date.now()}`,filePath:ts.filePath,originalContent:ts.originalContent,patchedContent:ts.patchedContent,description:ve,elementSelector:G.xpath||void 0,cssChanges:se,undoCode:Ae,applyCode:Ie,generatedBy:ts.generatedBy,durationMs:ts.durationMs};return console.log("[DOM Approval] Patch ready:",{approvalId:N,filePath:ts.filePath,generatedBy:ts.generatedBy}),{..._i,patchStatus:"ready",patch:Ia,patchError:void 0}}return console.warn("[DOM Approval] Patch generation returned null:",N),{..._i,patchStatus:"error",patch:void 0,patchError:"Could not generate source patch."}})}).catch(ts=>{const _i=ts instanceof Error?ts.message:"Failed to generate source patch";console.error("[DOM Approval] Patch generation failed:",{approvalId:N,error:_i}),$o(Ia=>!Ia||Ia.id!==N?Ia:{...Ia,patchStatus:"error",patch:void 0,patchError:_i})})},[]),Ah=x.useCallback(async()=>{var G,se,ve,Ae,Ie,He,gt,un,Et,_n,lt;if(!Bn)return;if(console.log("[DOM Approval] Accept clicked:",{id:Bn.id,status:Bn.patchStatus,hasPatch:!!Bn.patch,userApproved:Bn.userApproved}),Bn.patchStatus==="preparing"){console.log("[DOM Approval] Patch still preparing, marking as user-approved for auto-apply"),$o(_t=>_t?{..._t,userApproved:!0}:null);return}if(Bn.patchStatus==="error"||!Bn.patch){he(_t=>[..._t,{id:`msg-error-${Date.now()}`,role:"assistant",content:Bn.patchError||"Could not prepare a source patch for this change.",timestamp:new Date}]),$o(null),Ya(null);return}const N=Bn.patch;aE(!0),console.log("=".repeat(60)),console.log("[DOM Approval] === USER APPROVED PATCH ==="),console.log("[DOM Approval] Patch details:",{id:N.id,filePath:N.filePath,originalLength:((G=N.originalContent)==null?void 0:G.length)||0,patchedLength:((se=N.patchedContent)==null?void 0:se.length)||0,description:N.description}),console.log("=".repeat(60)),he(_t=>[..._t,{id:`msg-approved-${Date.now()}`,role:"assistant",content:`Approved: ${Bn.description}. Updating source code...`,timestamp:new Date,model:Vt.id,intent:"ui_modify"}]);try{if(!((Ae=(ve=window.electronAPI)==null?void 0:ve.files)!=null&&Ae.writeFile))throw console.log("[DOM Approval]  ABORT: writeFile API not available"),new Error("File API not available");const _t=N.originalContent!==N.patchedContent;console.log("[DOM Approval] Content changed:",_t),_t||(console.log("[DOM Approval]  WARNING: Patch content is IDENTICAL to original!"),console.log("[DOM Approval] This means the AI did not make any changes.")),console.log("[DOM Approval] Writing patch to disk:",N.filePath),console.log("[DOM Approval] Original length:",((Ie=N.originalContent)==null?void 0:Ie.length)||0),console.log("[DOM Approval] Patched length:",((He=N.patchedContent)==null?void 0:He.length)||0),console.log("[DOM Approval] First 200 chars of patched content:",(gt=N.patchedContent)==null?void 0:gt.substring(0,200));const yn=await window.electronAPI.files.writeFile(N.filePath,N.patchedContent);if(console.log("[DOM Approval] writeFile result:",yn),yn.success&&((Et=(un=window.electronAPI)==null?void 0:un.files)!=null&&Et.readFile)){const Yn=await window.electronAPI.files.readFile(N.filePath);if(Yn.success){const es=Yn.data===N.patchedContent;console.log("[DOM Approval] Verification read-back:",es?" MATCHES":" MISMATCH"),es||(console.log("[DOM Approval] Expected length:",(_n=N.patchedContent)==null?void 0:_n.length),console.log("[DOM Approval] Actual length:",(lt=Yn.data)==null?void 0:lt.length))}}if(yn.success)console.log("[Source Patch]  Applied successfully to:",N.filePath),he(Yn=>[...Yn,{id:`msg-patch-${Date.now()}`,role:"assistant",content:`Source code updated: ${N.filePath.split("/").pop()}`,timestamp:new Date}]),ei({path:N.filePath,additions:1,deletions:1,undoCode:N.undoCode});else throw new Error(yn.error||"Failed to save file")}catch(_t){console.error("[Source Patch] Failed:",_t),he(yn=>[...yn,{id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to save: ${_t instanceof Error?_t.message:"Unknown error"}`,timestamp:new Date}])}aE(!1),$o(null),Ya(null)},[Bn,ei]);x.useEffect(()=>{Bn!=null&&Bn.userApproved&&Bn.patchStatus==="ready"&&Bn.patch&&(console.log("[DOM Approval] Auto-applying: patch ready and user already approved"),Ah())},[Bn==null?void 0:Bn.patchStatus,Bn==null?void 0:Bn.userApproved,Ah]);const js=x.useCallback(()=>{if(!Bn)return;const N=Xn.current.get(l);Bn.undoCode&&N&&N.executeJavaScript(Bn.undoCode),$o(null),Ya(null)},[Bn,l]);x.useEffect(()=>{const N=G=>{!Sr&&!Bn||((G.metaKey||G.ctrlKey)&&G.key==="Enter"&&(G.preventDefault(),Bn?Ah():Pl()),G.key==="Escape"&&(G.preventDefault(),Bn?js():ha()))};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[Sr,Bn,Pl,ha,Ah,js]);const fy=x.useCallback(async(N,G)=>{var ve,Ae;if(console.log("Starting project setup flow:",N,G),!n&&((ve=window.electronAPI)!=null&&ve.window)){const Ie=await window.electronAPI.window.lockProject(N,G);if(Ie.success)r(N),o(G),console.log(`[Window] Locked to project: ${N}`);else if((Ae=Ie.error)!=null&&Ae.includes("already open in another window")){Ie.existingWindowId&&await window.electronAPI.window.focus(Ie.existingWindowId);return}}const se=FBe(N);hh({path:N,name:G,port:se==null?void 0:se.port})},[n]),hy=x.useCallback((N,G)=>{Al&&(O({url:N,title:Al.name,projectPath:Al.path}),Z6(Al.name,Al.path,G),hh(null))},[Al,O]),SE=x.useCallback(()=>{hh(null)},[]),TE=x.useCallback(N=>{O({url:N,title:new URL(N).hostname})},[O]),E3=x.useCallback(N=>{console.log("[PatchApproval] Approved patch:",N.filePath);const G=Bd+1;G<Pu.length?ip(G):(qb([]),ip(0),Ym(!1))},[Bd,Pu.length]),py=x.useCallback(N=>{console.log("[PatchApproval] Rejected patch:",N.filePath);const G=Pu.filter((se,ve)=>ve!==Bd);qb(G),G.length>0?ip(Math.min(Bd,G.length-1)):(ip(0),Ym(!1))},[Bd,Pu]),my=x.useCallback(N=>{console.log("[PatchApproval] Edit requested for patch:",N.filePath),Ym(!1)},[]);x.useCallback(N=>{qb(N),ip(0),Ym(!0)},[]);const gy=!u.url,Xi=(to==null?void 0:to.background)||(ue?"#171717":"#d6d3d1");return h.jsxs("div",{className:`flex flex-col h-screen w-full overflow-hidden font-sans ${ue?"dark text-neutral-100":"text-neutral-900"}`,style:{backgroundColor:Xi},children:[h.jsx(Pbe,{tabs:X,activeTabId:l,onTabSelect:k,onTabClose:S,onNewTab:_,onReorderTabs:R,isDarkMode:ue,onToggleDarkMode:Fu,onOpenSettings:()=>tE(!0),fastApplyReady:f3,fileWatcherActive:h3}),h.jsxs("div",{className:"flex flex-1 overflow-hidden pt-1 pb-2 px-2 gap-1",children:[Al?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:h.jsx(YBe,{projectPath:Al.path,projectName:Al.name,initialPort:Al.port,isDarkMode:ue,onComplete:hy,onCancel:SE})}):u.type==="kanban"?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:h.jsx(AF,{defaultView:"kanban",className:ue?"dark":""})}):u.type==="todos"?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:h.jsx(AF,{defaultView:"tasks",className:ue?"dark":""})}):u.type==="notes"?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:h.jsx(DBe,{content:((kp=u.notesData)==null?void 0:kp.content)||"",isDarkMode:ue,onUpdateContent:W})}):gy?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:h.jsx(jBe,{onOpenProject:fy,onOpenUrl:TE,isDarkMode:ue,lockedProjectPath:n})}):h.jsxs("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:[h.jsxs("div",{className:"h-12 border-b flex items-center gap-2 px-3 flex-shrink-0",style:{borderColor:Hc,backgroundColor:u3},children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:hg,disabled:!re,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${re?ue?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-200 text-stone-600":ue?"text-neutral-600 cursor-not-allowed":"text-stone-300 cursor-not-allowed"}`,title:"Back",children:h.jsx(w1,{size:16})}),h.jsx("button",{onClick:qd,disabled:!Z,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${Z?ue?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-200 text-stone-600":ue?"text-neutral-600 cursor-not-allowed":"text-stone-300 cursor-not-allowed"}`,title:"Forward",children:h.jsx(Nf,{size:16})}),h.jsx("button",{onClick:Ei,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${ue?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-200 text-stone-600"}`,title:"Reload",children:oe?h.jsx(hs,{size:16,className:"animate-spin"}):h.jsx(p0,{size:16})})]}),h.jsxs("div",{className:`flex items-center rounded-lg p-0.5 ${ue?"bg-neutral-700":"bg-stone-100"}`,children:[h.jsx("button",{onClick:()=>Za("desktop"),className:`w-7 h-7 rounded-md flex items-center justify-center transition-colors ${ka==="desktop"?ue?"bg-neutral-600 text-white":"bg-white text-stone-900 shadow-sm":ue?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,title:"Desktop view",children:h.jsx(yN,{size:14})}),h.jsx("button",{onClick:()=>Za("tablet"),className:`w-7 h-7 rounded-md flex items-center justify-center transition-colors ${ka==="tablet"?ue?"bg-neutral-600 text-white":"bg-white text-stone-900 shadow-sm":ue?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,title:"Tablet view (768px)",children:h.jsx(N5,{size:14})}),h.jsx("button",{onClick:()=>Za("mobile"),className:`w-7 h-7 rounded-md flex items-center justify-center transition-colors ${ka==="mobile"?ue?"bg-neutral-600 text-white":"bg-white text-stone-900 shadow-sm":ue?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,title:"Mobile view (375px)",children:h.jsx(A5,{size:14})})]}),h.jsx("form",{onSubmit:_h,className:"flex-1",children:h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",value:J,onChange:N=>!u.projectPath&&ee(N.target.value),readOnly:!!u.projectPath,"data-control-id":"url-bar","data-control-type":"input",className:`w-full h-8 px-3 pr-8 text-sm rounded-full focus:outline-none ${u.projectPath?`cursor-default ${ue?"bg-neutral-800 border-neutral-700 text-neutral-400":"bg-stone-100 border-stone-200 text-stone-500"}`:`focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 ${ue?"bg-neutral-700 border-neutral-600 text-neutral-100 placeholder-neutral-400":"bg-white border border-stone-200"}`}`,placeholder:"Enter URL...",title:u.projectPath?`Locked to project: ${u.projectPath}`:"Enter URL..."}),oe&&h.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:h.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})})]})}),h.jsx("button",{onClick:()=>{on(!wt),Ue(!1),Jt(!1)},"data-control-id":"inspector-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${wt?"bg-blue-100 text-blue-600":ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Element Inspector",children:h.jsx(o2,{size:16})}),h.jsx("button",{onClick:()=>{Jt(!ht),on(!1)},"data-control-id":"move-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${ht?"bg-orange-100 text-orange-600":ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Move & Resize Element",children:h.jsx(i2,{size:16})}),h.jsx("button",{onClick:()=>{const N=Xn.current.get(l);N&&N.openDevTools()},"data-control-id":"devtools-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Open Webview DevTools",children:h.jsx(zy,{size:16})}),h.jsx("button",{onClick:()=>uh(!da),"data-control-id":"agent-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${da?"bg-purple-100 text-purple-600":ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Cluso Agent Demos",children:h.jsx(WP,{size:16})}),h.jsx("button",{onClick:()=>lg(!Fo),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${Fo?"bg-blue-100 text-blue-600":ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Toggle Console",children:h.jsx(dd,{size:16})}),h.jsx("button",{onClick:()=>ce(!B),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:B?"Hide sidebar":"Show sidebar",children:h.jsx(K1e,{size:16})})]}),h.jsxs("div",{"data-browser-content":!0,className:"flex-1 relative overflow-hidden flex flex-col ",children:[h.jsxs("div",{className:`flex-1 relative overflow-hidden flex flex-col justify-center items-center ${ka==="desktop"?"":"py-4 gap-3"} ${ue?"bg-neutral-900":"bg-stone-200"}`,children:[ka!=="desktop"&&h.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>{Hd(!Aa),xh(!1)},className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors ${ue?"bg-neutral-800 hover:bg-neutral-700 text-neutral-200 border border-neutral-700":"bg-white hover:bg-stone-50 text-stone-700 border border-stone-200 shadow-sm"}`,children:[ka==="mobile"?h.jsx(A5,{size:14}):h.jsx(N5,{size:14}),h.jsx("span",{children:yh?"Custom":(Li==null?void 0:Li.name)||(ka==="mobile"?"iPhone SE":"iPad Mini")}),h.jsxs("span",{className:`text-xs ${ue?"text-neutral-500":"text-stone-400"}`,children:[mp,"  ",qc]}),h.jsx($f,{size:14,className:`transition-transform ${Aa?"rotate-180":""}`})]}),Aa&&h.jsxs("div",{className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 w-72 max-h-80 overflow-y-auto rounded-xl shadow-xl z-50 ${ue?"bg-neutral-800 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("div",{className:`px-3 py-2 text-xs font-semibold uppercase tracking-wider ${ue?"text-neutral-500":"text-stone-400"}`,children:"Mobile"}),Zb.filter(N=>N.type==="mobile").map(N=>h.jsxs("button",{onClick:()=>Xb(N),className:`w-full flex items-center justify-between px-3 py-2.5 text-sm transition-colors ${(Li==null?void 0:Li.name)===N.name?ue?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":ue?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(A5,{size:14}),N.name]}),h.jsxs("span",{className:`text-xs ${ue?"text-neutral-500":"text-stone-400"}`,children:[N.width,"  ",N.height]})]},N.name)),h.jsx("div",{className:`px-3 py-2 text-xs font-semibold uppercase tracking-wider border-t ${ue?"text-neutral-500 border-neutral-700":"text-stone-400 border-stone-100"}`,children:"Tablet"}),Zb.filter(N=>N.type==="tablet").map(N=>h.jsxs("button",{onClick:()=>Xb(N),className:`w-full flex items-center justify-between px-3 py-2.5 text-sm transition-colors ${(Li==null?void 0:Li.name)===N.name?ue?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":ue?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(N5,{size:14}),N.name]}),h.jsxs("span",{className:`text-xs ${ue?"text-neutral-500":"text-stone-400"}`,children:[N.width,"  ",N.height]})]},N.name)),h.jsxs("div",{className:`border-t ${ue?"border-neutral-700":"border-stone-100"}`,children:[h.jsxs("button",{onClick:ig,className:`w-full flex items-center gap-2 px-3 py-2.5 text-sm transition-colors ${yh?ue?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":ue?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:[h.jsx(Q_,{size:14}),"Custom Size"]}),yh&&h.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 ${ue?"bg-neutral-900/50":"bg-stone-50"}`,children:[h.jsx("input",{type:"number",value:dE,onChange:N=>y3(parseInt(N.target.value)||375),className:`w-20 px-2 py-1 text-sm rounded-lg text-center ${ue?"bg-neutral-700 border-neutral-600 text-neutral-200":"bg-white border-stone-200 text-stone-700"} border focus:outline-none focus:ring-2 focus:ring-blue-500/30`,placeholder:"Width"}),h.jsx("span",{className:`text-xs ${ue?"text-neutral-500":"text-stone-400"}`,children:""}),h.jsx("input",{type:"number",value:fE,onChange:N=>hE(parseInt(N.target.value)||667),className:`w-20 px-2 py-1 text-sm rounded-lg text-center ${ue?"bg-neutral-700 border-neutral-600 text-neutral-200":"bg-white border-stone-200 text-stone-700"} border focus:outline-none focus:ring-2 focus:ring-blue-500/30`,placeholder:"Height"})]})]})]})]}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>{xh(!hp),Hd(!1)},className:`flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium transition-colors ${ue?"bg-neutral-800 hover:bg-neutral-700 text-neutral-200 border border-neutral-700":"bg-white hover:bg-stone-50 text-stone-700 border border-stone-200 shadow-sm"}`,children:[h.jsx("span",{children:(_g=pp.find(N=>N.value===Ki))==null?void 0:_g.label}),h.jsx($f,{size:14,className:`transition-transform ${hp?"rotate-180":""}`})]}),hp&&h.jsx("div",{className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 w-24 rounded-xl shadow-xl z-50 overflow-hidden ${ue?"bg-neutral-800 border border-neutral-700":"bg-white border border-stone-200"}`,children:pp.map(N=>h.jsx("button",{onClick:()=>{vh(N.value),xh(!1)},className:`w-full px-3 py-2 text-sm text-center transition-colors ${Ki===N.value?ue?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":ue?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:N.label},N.value))})]})]}),Tn&&Wu?h.jsx(h.Fragment,{children:i.filter(N=>N.url).map(N=>h.jsx("div",{className:`transition-all duration-300 origin-center ${ka==="desktop"?"w-full h-full":"rounded-3xl shadow-2xl ring-4 ring-neutral-700 overflow-hidden flex-shrink-0"}`,style:{...ka==="desktop"?{}:Ki==="fit"?{aspectRatio:`${mp} / ${qc}`,maxWidth:"calc(100% - 48px)",maxHeight:"calc(100% - 80px)",width:"auto",height:"100%"}:{width:`${mp}px`,height:`${qc}px`,transform:`scale(${parseInt(Ki)/100})`,transformOrigin:"center center"},display:N.id===l?"block":"none",position:N.id===l?"relative":"absolute"},children:h.jsx("webview",{ref:Ep(N.id),src:N.url||"about:blank",preload:`file://${Wu}`,className:"w-full h-full",style:ka==="desktop"?{width:"100%"}:void 0,allowpopups:"true",nodeintegration:"true",webpreferences:"contextIsolation=no"})},N.id))}):Tn?h.jsx("div",{className:`w-full h-full flex items-center justify-center ${ue?"bg-neutral-800":"bg-stone-50"}`,children:h.jsx("div",{className:`w-8 h-8 border-2 rounded-full animate-spin ${ue?"border-neutral-600 border-t-neutral-400":"border-stone-300 border-t-stone-600"}`})}):(()=>{const N=u.url||"";return N.includes("localhost")||N.includes("127.0.0.1")?h.jsx("div",{className:`w-full h-full flex items-center justify-center ${ue?"bg-neutral-800":"bg-stone-50"}`,children:h.jsxs("div",{className:"text-center p-8 max-w-md",children:[h.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${ue?"bg-green-900/30":"bg-green-100"}`,children:h.jsx(cu,{size:32,className:ue?"text-green-400":"text-green-600"})}),h.jsx("h3",{className:`text-lg font-medium mb-2 ${ue?"text-neutral-200":"text-stone-700"}`,children:"Project Running"}),h.jsx("p",{className:`text-sm mb-4 ${ue?"text-neutral-400":"text-stone-500"}`,children:"Your project is available at:"}),h.jsxs("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${ue?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:[h.jsx(cu,{size:16}),N]}),h.jsxs("p",{className:`text-xs mt-4 ${ue?"text-neutral-500":"text-stone-400"}`,children:["Localhost preview requires the Electron desktop app.",h.jsx("br",{}),"Use the chat sidebar to work with your code."]})]})}):h.jsx("iframe",{src:N,className:"w-full h-full border-0",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups",title:"Web Preview"})})(),!B&&h.jsxs("div",{className:`absolute bottom-8 left-1/2 transform -translate-x-1/2 flex items-center gap-1 backdrop-blur shadow-2xl p-2 rounded-full z-40 ${ue?"bg-neutral-800/90 border border-neutral-700/50":"bg-white/90 border border-stone-200/50"}`,children:[h.jsx("button",{onClick:()=>L(!Y),className:`w-9 h-9 rounded-full flex items-center justify-center transition-all ${Y?"bg-green-100 text-green-600":ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,title:"Toggle Screen Share",children:h.jsx(yN,{size:16})}),h.jsx("button",{onClick:()=>{on(!wt),Ue(!1),Jt(!1)},className:`w-9 h-9 rounded-full flex items-center justify-center transition-all ${wt?"bg-blue-100 text-blue-600":ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,title:"Toggle Element Inspector",children:h.jsx(o2,{size:16})}),h.jsx("button",{onClick:()=>{Jt(!ht),on(!1)},className:`w-9 h-9 rounded-full flex items-center justify-center transition-all ${ht?"bg-orange-100 text-orange-600":ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,title:"Move & Resize Element",children:h.jsx(i2,{size:16})}),h.jsx("div",{className:`w-[1px] h-5 mx-0.5 ${ue?"bg-neutral-600":"bg-stone-200"}`}),h.jsx("button",{onClick:()=>{Xa.isConnected?(xp(),EE()):Jd()},"data-control-id":"voice-button","data-control-type":"button",className:`flex items-center justify-center w-9 h-9 rounded-full font-medium transition-all ${Xa.isConnected?"bg-red-50 text-red-600 ring-1 ring-red-100":ue?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-800"}`,title:Xa.isConnected?"End voice session":"Start voice session",children:Xa.isConnected?h.jsxs("span",{className:"relative flex h-2 w-2",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}):h.jsx(U1e,{size:16})})]}),(wt||ye||ht)&&xt&&h.jsx("div",{className:"fixed z-[60] pointer-events-none",style:{top:Math.max(8,(((dc=Xn.current.get(l))==null?void 0:dc.getBoundingClientRect().top)||0)+xt.rect.top-32),left:Math.max(8,(((Ap=Xn.current.get(l))==null?void 0:Ap.getBoundingClientRect().left)||0)+xt.rect.left)},children:h.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-mono shadow-lg ${ye?"bg-purple-600 text-white":ht?"bg-orange-500 text-white":"bg-blue-600 text-white"}`,style:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:[h.jsx("span",{className:"font-semibold",children:(Sg=xt.element.tagName)==null?void 0:Sg.toLowerCase()}),xt.element.id&&h.jsxs("span",{className:"opacity-80",children:["#",xt.element.id]}),xt.element.className&&h.jsxs("span",{className:"opacity-60 max-w-[200px] truncate",children:[".",xt.element.className.split(" ")[0]]}),h.jsxs("span",{className:"opacity-50 text-[10px] ml-1",children:[Math.round(xt.rect.width),"",Math.round(xt.rect.height)]})]})}),!B&&fe&&kt&&h.jsx("div",{className:"absolute z-50",style:kh(),children:h.jsxs("div",{className:`rounded-2xl shadow-2xl w-80 p-3 ${ue?"bg-neutral-800/95 border border-neutral-700":"bg-white/95 border border-stone-200"}`,style:{backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:[h.jsxs("div",{className:"flex flex-col gap-2 mb-2",children:[h.jsxs("div",{className:`flex items-center gap-2 text-xs ${ue?"text-neutral-400":"text-stone-500"}`,children:[h.jsx("div",{className:"bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded font-mono font-medium",children:fe.tagName}),h.jsx("span",{className:"truncate max-w-[150px]",children:fe.text}),h.jsx("div",{className:"flex-1"}),h.jsx("button",{onClick:()=>{Fn(!1),nt(null);const N=Xn.current.get(l);N==null||N.send("clear-selection")},className:`p-1 rounded hover:bg-black/10 ${ue?"hover:text-neutral-200":"hover:text-stone-900"}`,title:"Dismiss (Esc)",children:h.jsx(qr,{size:14})})]}),fe.sourceLocation&&h.jsx("div",{className:`text-xs font-mono ${ue?"text-neutral-500":"text-stone-400"}`,children:fe.sourceLocation.summary})]}),h.jsxs("form",{onSubmit:N=>{N.preventDefault(),Qd(Hr),ua(""),Fn(!1)},children:[h.jsx("textarea",{value:Hr,onChange:N=>ua(N.target.value),placeholder:"What would you like to change?",className:`w-full text-sm p-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 resize-none ${ue?"bg-neutral-700 border-neutral-600 text-neutral-100 placeholder-neutral-400":"bg-stone-50 border-stone-200"}`,rows:2,autoFocus:!0,onKeyDown:N=>{if(N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),Qd(Hr),ua(""),Fn(!1)),N.key==="Escape"){Fn(!1),nt(null);const G=Xn.current.get(l);G==null||G.send("clear-selection")}}}),h.jsx("div",{className:"flex justify-end mt-2",children:h.jsx("button",{type:"submit",disabled:!Hr.trim(),className:`w-7 h-7 rounded-full flex items-center justify-center disabled:opacity-50 ${ue?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-700"}`,children:h.jsx(k5,{size:14})})})]})]})})]}),wh&&h.jsx("div",{className:"fixed inset-0 z-50 cursor-ns-resize"}),da&&h.jsxs("div",{className:`absolute bottom-4 right-4 w-80 rounded-xl shadow-2xl border z-50 ${ue?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,children:[h.jsxs("div",{className:`flex items-center justify-between px-4 py-3 border-b ${ue?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(WP,{size:18,className:"text-purple-500"}),h.jsx("span",{className:`font-medium ${ue?"text-white":"text-stone-800"}`,children:"Cluso Agent"}),Xo.isProcessing&&h.jsx("div",{className:"w-3 h-3 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})]}),h.jsx("button",{onClick:()=>uh(!1),className:`w-6 h-6 rounded flex items-center justify-center ${ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,children:h.jsx(qr,{size:14})})]}),h.jsxs("div",{className:"p-4 space-y-3",children:[h.jsx("div",{className:`text-xs ${Xo.isReady?"text-green-500":"text-orange-500"}`,children:Xo.isReady?" Connected to local model":" Connecting..."}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:`text-xs font-medium ${ue?"text-neutral-400":"text-stone-500"}`,children:" Two-Voice Demos (User + App)"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:mie.map(N=>h.jsx("button",{onClick:()=>Xo.runScriptedDemo(N),disabled:Xo.isProcessing||!Xo.isReady,className:`px-3 py-2 text-sm rounded-lg transition-colors capitalize ${Xo.isProcessing?"opacity-50 cursor-not-allowed":ue?"bg-purple-600 hover:bg-purple-500 text-white":"bg-purple-100 hover:bg-purple-200 text-purple-700"}`,children:N.replace("-"," ")},N))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:`text-xs font-medium ${ue?"text-neutral-400":"text-stone-500"}`,children:" Quick Commands"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:Xst.map(N=>h.jsx("button",{onClick:()=>Xo.runDemo(N),disabled:Xo.isProcessing||!Xo.isReady,className:`px-3 py-2 text-sm rounded-lg transition-colors capitalize ${Xo.isProcessing?"opacity-50 cursor-not-allowed":ue?"bg-neutral-700 hover:bg-neutral-600 text-neutral-200":"bg-stone-100 hover:bg-stone-200 text-stone-700"}`,children:N.replace("-"," ")},N))})]}),h.jsx("div",{className:"flex gap-2",children:h.jsx("input",{type:"text",placeholder:"Ask agent to do something...",className:`flex-1 px-3 py-2 text-sm rounded-lg border ${ue?"bg-neutral-700 border-neutral-600 text-white placeholder-neutral-400":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"}`,onKeyDown:async N=>{if(N.key==="Enter"&&!Xo.isProcessing){const G=N.currentTarget,se=G.value.trim();se&&(G.value="",await Xo.chat(se))}}})}),Xo.lastResponse&&h.jsxs("div",{className:`text-xs p-2 rounded ${ue?"bg-neutral-700 text-neutral-300":"bg-stone-50 text-stone-600"}`,children:[Xo.lastResponse.substring(0,150),Xo.lastResponse.length>150&&"..."]}),Xo.error&&h.jsx("div",{className:"text-xs p-2 rounded bg-red-500/10 text-red-500",children:Xo.error}),h.jsx("button",{onClick:()=>Xo.reset(),className:`w-full px-3 py-1.5 text-xs rounded ${ue?"text-neutral-400 hover:bg-neutral-700":"text-stone-500 hover:bg-stone-100"}`,children:"Reset conversation"})]})]}),Fo&&h.jsxs("div",{className:`flex flex-col overflow-hidden ${ue?"bg-neutral-900":"bg-stone-50"}`,style:{height:Rl},children:[h.jsx("div",{className:`h-2 cursor-ns-resize flex-shrink-0 flex items-center justify-center group ${ue?"bg-neutral-900":"bg-stone-50"}`,onMouseDown:gp,children:h.jsx("div",{className:`w-8 h-0.5 rounded-full transition-colors ${wh?ue?"bg-neutral-400":"bg-stone-500":ue?"bg-neutral-600 group-hover:bg-neutral-500":"bg-stone-300 group-hover:bg-stone-400"}`})}),h.jsxs("div",{className:`flex items-center justify-between px-3 py-1.5 border-b ${ue?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-1.5",style:{position:"relative",top:"-3px"},children:[h.jsxs("button",{onClick:xg,className:`flex items-center gap-2 px-2.5 py-1 rounded-full transition-colors ${Ml.size===0?ue?"bg-neutral-600 text-neutral-200":"bg-stone-300 text-stone-700":ue?"bg-neutral-700 text-neutral-400 hover:bg-neutral-600":"bg-stone-200 text-stone-500 hover:bg-stone-300"}`,title:"Show all logs",children:[h.jsx(dd,{size:14}),h.jsx("span",{className:"text-xs font-medium",children:"Console"}),h.jsx("span",{className:"text-xs opacity-70",children:Sp.length})]}),h.jsx("button",{onClick:()=>Zc("log"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Ml.has("log")?ue?"bg-neutral-500 text-white":"bg-stone-500 text-white":ue?"bg-neutral-800 text-neutral-400 hover:bg-neutral-700":"bg-stone-100 text-stone-500 hover:bg-stone-200"}`,title:"Filter by log",children:"log"}),h.jsx("button",{onClick:()=>Zc("info"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Ml.has("info")?"bg-blue-500 text-white":ue?"bg-neutral-800 text-blue-400 hover:bg-neutral-700":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,title:"Filter by info",children:"info"}),h.jsx("button",{onClick:()=>Zc("warn"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Ml.has("warn")?"bg-yellow-500 text-white":ue?"bg-neutral-800 text-yellow-400 hover:bg-neutral-700":"bg-yellow-50 text-yellow-600 hover:bg-yellow-100"}`,title:"Filter by warn",children:"warn"}),h.jsx("button",{onClick:()=>Zc("error"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Ml.has("error")?"bg-red-500 text-white":ue?"bg-neutral-800 text-red-400 hover:bg-neutral-700":"bg-red-50 text-red-600 hover:bg-red-100"}`,title:"Filter by error",children:"error"})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[si.size>0&&h.jsxs(h.Fragment,{children:[h.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${ue?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-600"}`,children:[si.size," selected"]}),h.jsxs("div",{className:"flex items-center gap-0.5 ml-1",children:[h.jsx("button",{onClick:()=>{const N=(jo==null?void 0:jo.map(G=>G.message).join(`
`))||"";ly(N)},className:`p-1.5 rounded transition-colors ${ue?"hover:bg-neutral-600 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-200 text-stone-500 hover:text-stone-700"}`,title:"Search for solutions (G)",children:h.jsx(Gf,{size:14})}),h.jsx("button",{onClick:()=>{const N=(jo==null?void 0:jo.map(G=>`[${G.type}] ${G.message}`).join(`
`))||"";navigator.clipboard.writeText(N)},className:`p-1.5 rounded transition-colors ${ue?"hover:bg-neutral-600 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-200 text-stone-500 hover:text-stone-700"}`,title:"Copy (C)",children:h.jsx(wq,{size:14})}),h.jsx("button",{onClick:()=>ac(new Set),className:`p-1.5 rounded transition-colors ${ue?"hover:bg-neutral-600 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-200 text-stone-500 hover:text-stone-700"}`,title:"Clear selection (Esc)",children:h.jsx(qr,{size:14})})]})]}),h.jsx("button",{onClick:_E,className:`p-1 rounded hover:bg-opacity-80 transition ${ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Clear console",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("path",{d:"m4.9 4.9 14.2 14.2"})]})}),h.jsx("button",{onClick:()=>lg(!1),className:`p-1 rounded hover:bg-opacity-80 transition ${ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Close console",children:h.jsx(qr,{size:14})})]})]}),h.jsxs("div",{className:`flex-1 overflow-y-auto font-mono text-xs p-2 space-y-0.5 ${ue?"text-neutral-300":"text-stone-700"}`,children:[Sp.length===0?h.jsx("div",{className:`text-center py-8 ${ue?"text-neutral-500":"text-stone-400"}`,children:Zi.length===0?"No console messages yet":"No logs match current filters"}):Sp.map((N,G)=>h.jsxs("div",{onClick:se=>_p(G,se),className:`flex items-start gap-2 px-2 py-0.5 rounded cursor-pointer select-none transition-colors ${si.has(G)?ue?"bg-blue-500/20 ring-1 ring-blue-500/50":"bg-blue-100 ring-1 ring-blue-300":N.type==="error"?ue?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100":N.type==="warn"?ue?"bg-yellow-500/10 text-yellow-400 hover:bg-yellow-500/20":"bg-yellow-50 text-yellow-600 hover:bg-yellow-100":N.type==="info"?ue?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100":ue?"hover:bg-neutral-700":"hover:bg-stone-100"}`,title:"Click to select, Shift+click for range",children:[h.jsx("span",{className:`flex-shrink-0 ${ue?"text-neutral-500":"text-stone-400"}`,children:N.timestamp.toLocaleTimeString()}),h.jsxs("span",{className:"flex-shrink-0 w-12 text-center",children:["[",N.type,"]"]}),h.jsx("span",{className:"break-all flex-1",children:N.message}),h.jsx("span",{className:`flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${si.has(G)?"bg-blue-500 border-blue-500":ue?"border-neutral-500 hover:border-neutral-400":"border-stone-300 hover:border-stone-400"}`,children:si.has(G)&&h.jsx(Cs,{size:10,className:"text-white"})})]},G)),h.jsx("div",{ref:fa})]})]}),l3&&h.jsxs("div",{className:`absolute bottom-full left-0 right-0 mb-2 mx-2 rounded-xl border shadow-xl overflow-hidden z-50 ${ue?"bg-neutral-800 border-neutral-600":"bg-white border-stone-200"}`,style:{maxHeight:"300px"},children:[h.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b ${ue?"border-neutral-700":"border-stone-100"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(cu,{size:14,className:ue?"text-blue-400":"text-blue-500"}),h.jsx("span",{className:`text-sm font-medium ${ue?"text-neutral-200":"text-stone-700"}`,children:rp?"Searching...":`${(vi==null?void 0:vi.length)||0} Results`})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[vi&&vi.length>0&&h.jsxs("button",{onClick:cy,className:`flex items-center gap-1.5 px-2 py-1 text-xs font-medium rounded transition-colors ${ue?"bg-blue-500/20 text-blue-300 hover:bg-blue-500/30":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,title:"Send to chat",children:[h.jsx(ube,{size:12}),"Add to Chat"]}),h.jsx("button",{onClick:()=>sp(!1),className:`p-1 rounded transition-colors ${ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,children:h.jsx(qr,{size:14})})]})]}),h.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"240px"},children:rp?h.jsxs("div",{className:`flex items-center justify-center py-8 ${ue?"text-neutral-400":"text-stone-500"}`,children:[h.jsx(hs,{size:20,className:"animate-spin mr-2"}),h.jsx("span",{className:"text-sm",children:"Searching the web..."})]}):vi&&vi.length>0?h.jsx("div",{className:"divide-y divide-stone-100 dark:divide-neutral-700",children:vi.map((N,G)=>h.jsxs("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:`block px-3 py-2 transition-colors ${ue?"hover:bg-neutral-700":"hover:bg-stone-50"}`,children:[h.jsx("div",{className:`text-sm font-medium truncate ${ue?"text-blue-400":"text-blue-600"}`,children:N.title}),h.jsx("div",{className:`text-xs truncate mt-0.5 ${ue?"text-neutral-500":"text-stone-400"}`,children:N.url}),N.snippet&&h.jsx("div",{className:`text-xs mt-1 line-clamp-2 ${ue?"text-neutral-400":"text-stone-500"}`,children:N.snippet})]},G))}):vi&&vi.length===0?h.jsx("div",{className:`text-center py-8 text-sm ${ue?"text-neutral-400":"text-stone-500"}`,children:"No results found"}):null})]})]})]}),Be&&h.jsx("div",{className:"fixed inset-0 z-50 cursor-ew-resize"}),B&&h.jsx("div",{className:`w-1 cursor-ew-resize z-10 transition-colors flex-shrink-0 ${Be?ue?"bg-neutral-500":"bg-stone-400":ue?"hover:bg-neutral-600":"hover:bg-stone-300"}`,onMouseDown:ty}),B&&h.jsxs("div",{className:"flex flex-col rounded-xl shadow-sm flex-shrink-0 border",style:{width:we,minWidth:430,backgroundColor:Uc,borderColor:Hc},children:[h.jsxs("div",{className:"h-12 border-b flex items-center justify-between px-3 flex-shrink-0",style:{borderColor:Hc},children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>ur(!Jn),className:`flex items-center gap-1.5 text-sm px-2 py-1 rounded transition ${ue?"text-neutral-300 hover:bg-neutral-700":"text-stone-600 hover:bg-stone-100"}`,children:[h.jsx(y1e,{size:14}),h.jsx("span",{children:Kt.currentBranch})]}),Jn&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{ur(!1),Cl(!1)}}),h.jsx("div",{className:`absolute top-full left-0 mt-1 w-56 rounded-xl shadow-xl py-1 z-50 max-h-64 overflow-y-auto ${ue?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:ep?h.jsx("div",{className:"p-2",children:h.jsx("input",{type:"text",value:Tl,onChange:N=>qm(N.target.value),placeholder:"New branch name...",className:`w-full text-sm px-2 py-1.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${ue?"bg-neutral-600 border border-neutral-500 text-neutral-100 placeholder-neutral-400":"border border-stone-200"}`,autoFocus:!0,onKeyDown:async N=>{N.key==="Enter"&&Tl.trim()&&(await Kt.createBranch(Tl.trim()),qm(""),Cl(!1),ur(!1)),N.key==="Escape"&&Cl(!1)}})}):h.jsx(h.Fragment,{children:Kt.branches.filter(N=>!N.startsWith("remotes/")).map(N=>h.jsxs("button",{onClick:async()=>{await Kt.checkout(N),ur(!1)},className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${ue?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[N===Kt.currentBranch&&h.jsx(Cs,{size:12,className:"text-green-600"}),h.jsx("span",{className:N===Kt.currentBranch?"font-medium":"",children:N})]},N))})})]})]}),h.jsx("button",{onClick:()=>{ur(!0),Cl(!0)},className:`p-1 rounded transition ${ue?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"New branch",children:h.jsx(qf,{size:14})})]}),h.jsx("div",{className:"flex-1 mx-3",children:h.jsx("input",{type:"text",value:dh,onChange:N=>fh(N.target.value),placeholder:"Message ( to commit)",className:`w-full text-xs px-3 py-1.5 rounded-3xl focus:outline-none ${ue?"bg-neutral-800/60 text-neutral-300 placeholder-neutral-600 focus:bg-neutral-800":"bg-stone-50 border border-stone-200 text-stone-600 placeholder-stone-400 focus:ring-1 focus:ring-stone-300"}`,onKeyDown:async N=>{N.key==="Enter"&&(N.metaKey||N.ctrlKey)&&dh.trim()&&(kl("commit"),await Kt.commit(dh.trim()),fh(""),kl(null))}})}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>bh(!0),className:`p-1.5 rounded transition ${tp==="stash"?"animate-pulse":""} ${ue?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"Stash changes",disabled:!Kt.hasChanges,children:h.jsx(Ege,{size:14})}),h.jsx("button",{onClick:async()=>{kl("pull"),await Kt.pull(),kl(null)},className:`p-1.5 rounded transition ${tp==="pull"?"animate-pulse":""} ${ue?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"Pull",children:h.jsx(VP,{size:14})}),h.jsx("button",{onClick:async()=>{kl("push"),await Kt.push(),kl(null)},className:`p-1.5 rounded transition ${tp==="push"?"animate-pulse":""} ${ue?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"Push",children:h.jsx(k5,{size:14})})]})]}),h.jsxs("div",{className:"relative flex-1",children:[h.jsxs("div",{ref:jt,className:"absolute inset-0 overflow-y-auto p-4 space-y-4",children:[Ht.length>0&&h.jsx(rot,{questions:Ht,onSelectQuestion:N=>{var G;De(N),(G=pt.current)==null||G.focus()},onDismissQuestion:qt,isDarkMode:ue,isVisible:Ht.length>0,isEmptyChat:Ce.length===0}),Ce.length===0&&h.jsx("div",{className:`h-full flex items-center justify-center text-sm ${ue?"text-neutral-500":"text-stone-300"}`,children:"Start a conversation..."}),Ce.map(N=>h.jsxs("div",{className:`flex flex-col ${N.role==="user"?"items-end":"items-start"}`,children:[N.role==="assistant"&&N.reasoning&&h.jsxs("details",{className:`mb-2 w-full rounded-lg overflow-hidden ${ue?"bg-purple-500/10 border border-purple-500/20":"bg-purple-50 border border-purple-200"}`,children:[h.jsxs("summary",{className:`px-3 py-2 text-xs cursor-pointer flex items-center gap-2 ${ue?"text-purple-300 hover:bg-purple-500/20":"text-purple-700 hover:bg-purple-100"}`,children:[h.jsx(f1,{size:14}),h.jsx("span",{children:"View Reasoning"})]}),h.jsx("div",{className:`px-3 py-2 text-xs font-mono whitespace-pre-wrap max-h-48 overflow-y-auto ${ue?"text-purple-200/80 border-t border-purple-500/20":"text-purple-600 border-t border-purple-200"}`,children:N.reasoning})]}),N.role==="assistant"&&N.toolUsage&&N.toolUsage.length>0&&h.jsx("div",{className:"mb-2 flex flex-wrap gap-1.5",children:N.toolUsage.map((G,se)=>h.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${G.isError?ue?"bg-red-500/20 text-red-300":"bg-red-100 text-red-700":ue?"bg-emerald-500/20 text-emerald-300":"bg-emerald-100 text-emerald-700"}`,children:[G.isError?h.jsx(qr,{size:10}):h.jsx(Cs,{size:10}),h.jsx("span",{className:"font-mono",children:G.name})]},G.id||se))}),h.jsx("div",{className:`leading-relaxed overflow-hidden ${N.role==="user"?`px-3 py-2 max-w-[85%] ${ue?"bg-white text-neutral-900 rounded-xl":"bg-stone-900 text-white rounded-xl"}`:N.role==="system"?`px-4 py-3 ${ue?"bg-yellow-500/20 text-yellow-200 rounded-2xl":"bg-yellow-50 text-yellow-800 rounded-2xl"}`:`w-full ${ue?"text-neutral-200":"text-stone-700"}`}`,style:{fontSize:Pz(Lo.fontSize)},children:h.jsx(jI,{children:N.content})}),h.jsxs("div",{className:`text-[10px] mt-1 ${N.role==="user"?"text-right pr-1":"text-left"} ${ue?"text-neutral-500":"text-stone-400"}`,children:[wdt(N.timestamp),N.role==="assistant"&&N.model&&`  ${N.model}`,N.role==="assistant"&&N.intent&&`  ${N.intent}`]})]},N.id)),Yb&&h.jsx(mst,{data:Yb,onSubmit:g3,onSkip:b3,isDarkMode:ue}),mh&&Qo&&h.jsxs("div",{className:"flex flex-col items-start",children:[Qo.toolCalls.length>0&&h.jsx("div",{className:"mb-2 flex flex-wrap gap-1.5",children:Qo.toolCalls.map((N,G)=>h.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium transition-all ${N.status==="running"?ue?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-700":N.status==="error"?ue?"bg-red-500/20 text-red-300":"bg-red-100 text-red-700":ue?"bg-emerald-500/20 text-emerald-300":"bg-emerald-100 text-emerald-700"}`,children:[N.status==="running"&&h.jsx(hs,{size:10,className:"animate-spin"}),N.status==="done"&&h.jsx(Cs,{size:10}),N.status==="error"&&h.jsx(qr,{size:10}),h.jsx("span",{className:"font-mono",children:N.name})]},N.id||G))}),Qo.reasoning&&h.jsxs("div",{className:`mb-2 w-full px-3 py-2 rounded-lg text-xs ${ue?"bg-purple-500/10 text-purple-300 border border-purple-500/20":"bg-purple-50 text-purple-700 border border-purple-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1 font-medium",children:[h.jsx(f1,{size:14}),h.jsx("span",{children:"Thinking..."})]}),h.jsx("div",{className:"font-mono text-xs opacity-80 max-h-32 overflow-y-auto whitespace-pre-wrap",children:Qo.reasoning})]}),h.jsxs("div",{className:`w-full ${ue?"text-neutral-200":"text-stone-700"}`,style:{fontSize:Pz(Lo.fontSize)},children:[Qo.content?h.jsx(jI,{children:Qo.content}):h.jsxs("div",{className:"flex items-center gap-2 text-sm opacity-60",children:[h.jsx(hs,{size:14,className:"animate-spin"}),h.jsx("span",{children:"Generating response..."})]}),h.jsx("span",{className:"inline-block w-2 h-4 ml-0.5 bg-current animate-pulse",style:{verticalAlign:"text-bottom"}})]})]}),!mh&&ap.length>0&&h.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5 animate-in fade-in duration-300",children:ap.map(N=>h.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium transition-all ${N.status==="error"?ue?"bg-red-500/20 text-red-300":"bg-red-100 text-red-700":ue?"bg-emerald-500/20 text-emerald-300":"bg-emerald-100 text-emerald-700"}`,children:[N.status==="error"?h.jsx(qr,{size:10}):h.jsx(Cs,{size:10}),h.jsx("span",{className:"font-mono",children:N.name})]},N.id))}),Ca&&!mh&&h.jsxs("div",{className:"flex items-center gap-2 text-sm opacity-60",children:[h.jsx(hs,{size:14,className:"animate-spin"}),h.jsx("span",{children:"Processing..."})]}),Bn&&!Vc&&h.jsxs("div",{className:`mx-4 my-3 p-3 rounded-xl border ${ue?"bg-blue-950/50 border-blue-800/50":"bg-blue-50 border-blue-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(uv,{size:16,className:ue?"text-blue-400":"text-blue-600"}),h.jsx("span",{className:`text-sm font-medium truncate ${ue?"text-blue-300":"text-blue-800"}`,children:Bn.description})]}),h.jsxs("div",{className:"flex gap-2 items-center shrink-0",children:[Bn.patchStatus==="preparing"&&h.jsxs("div",{className:`flex items-center gap-1 text-xs ${ue?"text-blue-300/70":"text-blue-700/70"}`,children:[h.jsx(hs,{size:14,className:"animate-spin"}),h.jsx("span",{children:"Preparing source patch"})]}),Bn.patchStatus==="error"&&h.jsx("div",{className:`text-xs ${ue?"text-red-300/80":"text-red-600/80"}`,children:Bn.patchError||"Failed to prepare patch"}),h.jsx("button",{onClick:js,className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${ue?"bg-neutral-700 hover:bg-neutral-600 text-neutral-300":"bg-stone-200 hover:bg-stone-300 text-stone-700"}`,children:"Reject"}),h.jsx("button",{onClick:Ah,disabled:Bn.userApproved,className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors flex items-center gap-1.5 ${ue?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} ${Bn.userApproved?"opacity-60 cursor-not-allowed":""}`,children:Bn.userApproved?h.jsxs(h.Fragment,{children:[h.jsx(hs,{size:14,className:"animate-spin"}),"Applying"]}):Bn.patchStatus==="ready"?h.jsxs(h.Fragment,{children:[h.jsx(Cs,{size:14}),"Accept"]}):h.jsxs(h.Fragment,{children:[h.jsx(Cs,{size:14}),"Accept"]})})]})]}),Bn.patchStatus==="ready"&&Bn.patch&&h.jsx("div",{className:`mt-2 pt-2 border-t ${ue?"border-blue-800/30":"border-blue-200"}`,children:h.jsxs("div",{className:`flex items-center gap-2 text-xs ${ue?"text-blue-300/70":"text-blue-700/70"}`,children:[Bn.patch.generatedBy==="fast-apply"?h.jsxs(h.Fragment,{children:[h.jsx(Yl,{size:12,className:"text-yellow-500"}),h.jsx("span",{className:"font-medium text-yellow-500",children:"Fast Apply"}),h.jsx("span",{children:""}),h.jsxs("span",{children:[Bn.patch.durationMs,"ms"]})]}):Bn.patch.generatedBy==="fast-path"?h.jsxs(h.Fragment,{children:[h.jsx(Yl,{size:12,className:"text-green-500"}),h.jsx("span",{className:"font-medium text-green-500",children:"Fast Path"}),h.jsx("span",{children:" instant"})]}):h.jsxs(h.Fragment,{children:[h.jsx(mR,{size:12}),h.jsx("span",{className:"font-medium",children:"Gemini"})]}),h.jsx("span",{children:""}),h.jsx("span",{className:"truncate",children:Bn.patch.filePath.split("/").pop()})]})})]}),(Sr==null?void 0:Sr.source)==="code"&&h.jsx("div",{className:`mx-4 my-3 p-3 rounded-xl border ${ue?"bg-blue-950/50 border-blue-800/50":"bg-blue-50 border-blue-200"}`,children:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(zy,{size:16,className:ue?"text-blue-400":"text-blue-600"}),h.jsx("span",{className:`text-sm font-medium truncate ${ue?"text-blue-300":"text-blue-800"}`,children:Sr.description})]}),h.jsxs("div",{className:"flex gap-2 items-center shrink-0",children:[h.jsx("button",{onClick:ha,title:"Reject (Esc)",className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${ue?"bg-neutral-700 hover:bg-neutral-600 text-neutral-300":"bg-stone-200 hover:bg-stone-300 text-stone-700"}`,children:"Reject"}),h.jsxs("button",{onClick:Pl,title:"Accept (+Enter)",className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors flex items-center gap-1.5 ${ue?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[h.jsx(Cs,{size:14}),"Accept"]})]})]})}),Vc&&h.jsx("div",{className:`mx-4 my-3 p-3 rounded-xl border ${ue?"bg-blue-950/50 border-blue-800/50":"bg-blue-50 border-blue-200"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(hs,{size:16,className:`animate-spin ${ue?"text-blue-400":"text-blue-600"}`}),h.jsx("span",{className:`text-sm ${ue?"text-blue-300":"text-blue-800"}`,children:"Updating source code..."})]})}),xi&&h.jsx("div",{className:`mx-4 my-3 p-4 rounded-xl border ${ue?"bg-emerald-950/50 border-emerald-800/50":"bg-emerald-50 border-emerald-200"}`,children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${ue?"bg-emerald-900/50":"bg-emerald-100"}`,children:h.jsx(zy,{size:18,className:ue?"text-emerald-400":"text-emerald-600"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:`text-sm font-medium ${ue?"text-emerald-300":"text-emerald-800"}`,children:"Apply to Source Code?"}),h.jsx("div",{className:`text-xs mt-0.5 ${ue?"text-emerald-400/70":"text-emerald-600/70"}`,children:xi.description}),h.jsx("div",{className:`text-xs mt-1 font-mono truncate ${ue?"text-neutral-400":"text-stone-500"}`,children:xi.filePath.split("/").slice(-2).join("/")})]}),h.jsxs("div",{className:"flex gap-2 items-center",children:[xi.undoCode&&xi.applyCode&&h.jsx("button",{onMouseDown:()=>{const N=Xn.current.get(l);xi.undoCode&&N&&(console.log("[Preview] Showing original"),N.executeJavaScript(xi.undoCode),Xm(!0))},onMouseUp:()=>{const N=Xn.current.get(l);xi.applyCode&&N&&(console.log("[Preview] Showing change"),N.executeJavaScript(xi.applyCode),Xm(!1))},onMouseLeave:()=>{if(!iE)return;const N=Xn.current.get(l);xi.applyCode&&N&&(console.log("[Preview] Showing change (mouse leave)"),N.executeJavaScript(xi.applyCode),Xm(!1))},className:`p-1.5 rounded-lg transition-colors ${ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Hold to see original",children:iE?h.jsx(_q,{size:16}):h.jsx(hR,{size:16})}),h.jsx("button",{onClick:()=>{if(xi.undoCode){const N=Xn.current.get(l);N&&N.executeJavaScript(xi.undoCode)}oE(null)},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${ue?"bg-neutral-700 hover:bg-neutral-600 text-neutral-300":"bg-stone-200 hover:bg-stone-300 text-stone-700"}`,children:"Dismiss"}),h.jsxs("button",{onClick:async()=>{var N,G;if((G=(N=window.electronAPI)==null?void 0:N.files)!=null&&G.writeFile&&xi){const se=await window.electronAPI.files.writeFile(xi.filePath,xi.patchedContent);se.success?(console.log("[Source Patch] Applied successfully"),he(ve=>[...ve,{id:`msg-patch-${Date.now()}`,role:"assistant",content:`Source code updated: ${xi.filePath.split("/").pop()}`,timestamp:new Date}])):console.error("[Source Patch] Failed to apply:",se.error),oE(null)}},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors flex items-center gap-1.5 ${ue?"bg-emerald-600 hover:bg-emerald-500 text-white":"bg-emerald-600 hover:bg-emerald-700 text-white"}`,children:[h.jsx(Cs,{size:14}),"Apply"]})]})]})}),h.jsx("div",{ref:ln})]}),Wa&&h.jsxs("button",{onClick:Na,className:`absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex items-center gap-1.5 px-3 py-1.5 rounded-full shadow-lg transition-all duration-200 hover:scale-105 ${ue?"bg-neutral-700 text-neutral-200 hover:bg-neutral-600 border border-neutral-600":"bg-white text-stone-700 hover:bg-stone-50 border border-stone-200"}`,title:"Scroll to bottom",children:[h.jsx(VP,{size:14}),h.jsx("span",{className:"text-xs font-medium",children:"New messages"})]})]}),Ka.length>0&&h.jsx("div",{className:"px-4 pb-2",children:h.jsxs("div",{className:`rounded-t-2xl border border-b-0 overflow-hidden transition-all duration-300 shadow-lg ${ue?"bg-neutral-800 border-neutral-600":"bg-stone-100 border-stone-200"}`,children:[h.jsxs("div",{onClick:()=>fp(!Lu),className:`w-full flex items-center justify-between px-4 py-2.5 transition-colors cursor-pointer ${ue?"hover:bg-neutral-700":"hover:bg-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Nf,{size:16,className:`transition-transform duration-200 ${Lu?"rotate-90":""} ${ue?"text-neutral-400":"text-stone-500"}`}),h.jsxs("span",{className:`text-sm font-medium ${ue?"text-neutral-200":"text-stone-700"}`,children:[Ka.length," File",Ka.length!==1?"s":""," Changed"]}),h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${ue?"bg-amber-500/20 text-amber-400":"bg-amber-100 text-amber-700"}`,children:"Pending"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:N=>{N.stopPropagation(),qu()},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${ue?"text-red-400 hover:bg-red-500/20 border border-red-500/30":"text-red-600 hover:bg-red-50 border border-red-200"}`,children:"Reject"}),h.jsx("button",{onClick:N=>{N.stopPropagation(),uy()},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${ue?"text-green-400 hover:bg-green-500/20 border border-green-500/30":"text-green-600 hover:bg-green-50 border border-green-200"}`,children:"Accept"})]})]}),h.jsx("div",{className:`overflow-hidden transition-all duration-300 ${Lu?"max-h-80":"max-h-0"}`,children:h.jsx("div",{className:`border-t max-h-72 overflow-y-auto ${ue?"border-neutral-700":"border-stone-200"}`,children:Ka.map((N,G)=>h.jsxs("div",{className:`flex items-center justify-between px-4 py-2 ${G!==Ka.length-1?ue?"border-b border-neutral-700":"border-b border-stone-200":""} ${ue?"hover:bg-neutral-700":"hover:bg-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(zy,{size:14,className:ue?"text-neutral-400":"text-stone-500"}),h.jsx("span",{className:`text-sm font-mono truncate ${ue?"text-neutral-200":"text-stone-700"}`,children:N.fileName}),h.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono",children:[N.additions>0&&h.jsxs("span",{className:"text-green-500",children:["+",N.additions]}),N.deletions>0&&h.jsxs("span",{className:"text-red-500",children:["-",N.deletions]})]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[(N.undoCode||N.isFileModification)&&h.jsx("button",{onClick:()=>Qa(N.path),className:`p-1.5 rounded-lg text-xs transition-colors ${ue?"text-red-400 hover:bg-red-500/20":"text-red-500 hover:bg-red-50"}`,title:"Reject this change",children:h.jsx(qr,{size:14})}),h.jsx("button",{onClick:()=>wi(se=>se.filter(ve=>ve.path!==N.path)),className:`p-1.5 rounded-lg text-xs transition-colors ${ue?"text-green-400 hover:bg-green-500/20":"text-green-500 hover:bg-green-50"}`,title:"Accept this change",children:h.jsx(Cs,{size:14})})]})]},N.path))})})]})}),h.jsx("div",{className:`p-4 ${Ka.length>0?"pt-0":""}`,style:{overflow:"visible"},children:h.jsxs("div",{className:`rounded-2xl border relative ${Ka.length>0?"rounded-t-none border-t-0":""} ${ue?"bg-neutral-700 border-neutral-600":"bg-stone-50 border-stone-200"} ${Do?"ring-2 ring-blue-400 ring-opacity-50":""}`,style:{overflow:"visible"},onDragOver:wg,onDragLeave:Jc,onDrop:sr,children:[Do&&h.jsx("div",{className:"absolute inset-0 bg-blue-500/10 rounded-2xl flex items-center justify-center z-10 pointer-events-none",children:h.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg ${ue?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-600"}`,children:[h.jsx(eL,{size:20}),h.jsx("span",{className:"font-medium",children:"Drop images here (max 5)"})]})}),(fe||Ne||Gs||jo||Nl)&&h.jsxs("div",{className:"px-3 pt-3 flex flex-wrap gap-2",children:[Gs&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-yellow-50 text-yellow-700 rounded-lg text-xs border border-yellow-200",children:[h.jsx(dd,{size:12}),h.jsx("span",{className:"font-medium",children:"Console Logs"}),h.jsx("button",{onClick:()=>wo(!1),className:"ml-0.5 hover:text-yellow-900",children:h.jsx(qr,{size:12})})]}),jo&&jo.length>0&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-purple-50 text-purple-700 rounded-lg text-xs border border-purple-200",children:[h.jsx(dd,{size:12}),h.jsxs("span",{className:"font-medium",children:[jo.length," Log",jo.length>1?"s":""," Selected"]}),h.jsx("button",{onClick:()=>{ac(new Set),Gc.current=null},className:"ml-0.5 hover:text-purple-900",children:h.jsx(qr,{size:12})})]}),Nl&&Nl.length>0&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-xs border border-blue-200",children:[h.jsx(cu,{size:12}),h.jsxs("span",{className:"font-medium",children:[Nl.length," Search Result",Nl.length>1?"s":""]}),h.jsx("button",{onClick:()=>Fd(null),className:"ml-0.5 hover:text-blue-900",children:h.jsx(qr,{size:12})})]}),fe&&h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs border cursor-pointer transition-colors ${fe.targetPosition?"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100":"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100"}`,onClick:Tp,title:fe.targetPosition?"Element with repositioning target":"Click to view source code",children:[fe.targetPosition?h.jsx(i2,{size:12}):h.jsx(Cs,{size:12}),fe.sourceLocation?h.jsx("span",{className:"font-mono font-medium",children:(()=>{var Ae;const N=(Ae=fe.sourceLocation.sources)==null?void 0:Ae[0];if(!N)return fe.sourceLocation.summary;let G="unknown";if(N.file){const Ie=N.file.replace(/^\/\/localhost:\d+\//,""),He=Ie.split("/");G=He[He.length-1]||Ie}const se=N.line||0,ve=N.endLine||se+5;return`${G} (${se}-${ve})`})()}):h.jsx("span",{className:"font-medium",children:fe.tagName.toLowerCase()}),fe.targetPosition&&h.jsxs("span",{className:"text-[10px] opacity-70",children:[" ",Math.round(fe.targetPosition.x),",",Math.round(fe.targetPosition.y)]}),h.jsx("button",{onClick:N=>{N.stopPropagation(),nt(null),Dl(null),Kn(null);const G=Xn.current.get(l);G==null||G.send("clear-selection")},className:`ml-0.5 ${fe.targetPosition?"hover:text-orange-900":"hover:text-blue-900"}`,children:h.jsx(qr,{size:12})})]}),Ne&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-purple-50 text-purple-700 rounded-lg text-xs border border-purple-200",children:[h.jsx(KP,{size:12}),h.jsx("span",{className:"font-medium",children:Ne.tagName.toLowerCase()}),h.jsx("button",{onClick:()=>{$e(null),Le(null);const N=Xn.current.get(l);N==null||N.send("clear-selection")},className:"ml-0.5 hover:text-purple-900",children:h.jsx(qr,{size:12})})]})]}),Re&&Re.label&&h.jsxs("div",{className:"px-3 pt-2 flex flex-wrap gap-1.5",children:[h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium ${ue?"bg-gradient-to-r from-violet-500/20 to-purple-500/20 text-violet-300 border border-violet-500/30":"bg-gradient-to-r from-violet-50 to-purple-50 text-violet-700 border border-violet-200"}`,children:[Re.type==="code_edit"&&h.jsx(X_,{size:12}),Re.type==="code_create"&&h.jsx(bN,{size:12}),Re.type==="code_delete"&&h.jsx(Ff,{size:12}),Re.type==="code_explain"&&h.jsx(J_,{size:12}),Re.type==="code_refactor"&&h.jsx(p0,{size:12}),Re.type==="file_operation"&&h.jsx(E1,{size:12}),Re.type==="ui_inspect"&&h.jsx(Gf,{size:12}),Re.type==="ui_modify"&&h.jsx(uv,{size:12}),Re.type==="ui_build"&&h.jsx(QP,{size:12}),Re.type==="research"&&h.jsx(GP,{size:12}),Re.type==="analyze"&&h.jsx(ZP,{size:12}),Re.type==="compare"&&h.jsx(XP,{size:12}),Re.type==="plan"&&h.jsx(sL,{size:12}),Re.type==="document"&&h.jsx(i1e,{size:12}),Re.type==="test"&&h.jsx(aL,{size:12}),Re.type==="debug"&&h.jsx(YP,{size:12}),Re.type==="review"&&h.jsx(oL,{size:12}),Re.type==="deploy"&&h.jsx(Nbe,{size:12}),Re.type==="configure"&&h.jsx(Mq,{size:12}),Re.type==="question"&&h.jsx(pN,{size:12}),Re.type==="chat"&&h.jsx(Sq,{size:12}),h.jsx("span",{children:Re.label})]}),(Tg=Re.secondaryLabels)==null?void 0:Tg.map((N,G)=>{var se,ve,Ae,Ie,He,gt,un,Et,_n,lt,_t,yn;return h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium ${ue?"bg-gradient-to-r from-blue-500/15 to-cyan-500/15 text-blue-300 border border-blue-500/25":"bg-gradient-to-r from-blue-50 to-cyan-50 text-blue-600 border border-blue-200"}`,children:[((se=Re.secondaryTypes)==null?void 0:se[G])==="research"&&h.jsx(GP,{size:12}),((ve=Re.secondaryTypes)==null?void 0:ve[G])==="analyze"&&h.jsx(ZP,{size:12}),((Ae=Re.secondaryTypes)==null?void 0:Ae[G])==="compare"&&h.jsx(XP,{size:12}),((Ie=Re.secondaryTypes)==null?void 0:Ie[G])==="plan"&&h.jsx(sL,{size:12}),((He=Re.secondaryTypes)==null?void 0:He[G])==="test"&&h.jsx(aL,{size:12}),((gt=Re.secondaryTypes)==null?void 0:gt[G])==="review"&&h.jsx(oL,{size:12}),((un=Re.secondaryTypes)==null?void 0:un[G])==="debug"&&h.jsx(YP,{size:12}),((Et=Re.secondaryTypes)==null?void 0:Et[G])==="question"&&h.jsx(pN,{size:12}),((_n=Re.secondaryTypes)==null?void 0:_n[G])==="ui_modify"&&h.jsx(uv,{size:12}),((lt=Re.secondaryTypes)==null?void 0:lt[G])==="ui_build"&&h.jsx(QP,{size:12}),((_t=Re.secondaryTypes)==null?void 0:_t[G])==="code_edit"&&h.jsx(X_,{size:12}),((yn=Re.secondaryTypes)==null?void 0:yn[G])==="code_create"&&h.jsx(bN,{size:12}),h.jsx("span",{children:N})]},G)})]}),(mt.length>0||oc.length>0)&&h.jsxs("div",{className:"px-3 pt-2 flex flex-wrap gap-2",children:[mt.map((N,G)=>h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs ${ue?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[h.jsx(zy,{size:12}),h.jsx("span",{className:"font-mono max-w-[200px] truncate",title:N.path,children:Vm(N)}),h.jsx("button",{onClick:()=>Qr(se=>se.filter((ve,Ae)=>Ae!==G)),className:"hover:opacity-70",children:h.jsx(qr,{size:12})})]},`file-${G}`)),oc.map(N=>h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs ${N.type==="exclude"?ue?"bg-red-500/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200":ue?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[h.jsx("span",{className:"font-medium uppercase",children:N.name}),h.jsx("button",{onClick:()=>jc(G=>G.filter(se=>!(se.name===N.name&&se.type===N.type))),className:"hover:opacity-70",children:h.jsx(qr,{size:12})})]},`chip-${N.name}-${N.type}`))]}),Xr.length>0&&h.jsxs("div",{className:"px-3 pt-2 flex flex-wrap gap-2",children:[Xr.map((N,G)=>h.jsxs("div",{className:`relative group rounded-lg overflow-hidden border ${ue?"border-neutral-500":"border-stone-300"}`,children:[h.jsx("img",{src:N,alt:`Attachment ${G+1}`,className:"h-16 w-16 object-cover"}),h.jsx("button",{onClick:()=>ms(G),className:"absolute top-0.5 right-0.5 p-0.5 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70",children:h.jsx(qr,{size:12})})]},G)),Xr.length<5&&h.jsxs("div",{className:`text-xs self-center ${ue?"text-neutral-400":"text-stone-400"}`,children:[5-Xr.length," more"]})]}),Bo&&h.jsxs("div",{className:"px-3 pt-3",children:[h.jsxs("div",{className:`text-xs font-mono mb-1 ${ue?"text-neutral-400":"text-stone-500"}`,children:[Bo.fileName," (",Bo.startLine,"-",Bo.endLine,")"]}),h.jsx("div",{onMouseMove:mE,onMouseLeave:()=>So.hideHover(),children:h.jsx(aI,{code:Bo.code,language:"tsx",showLineNumbers:!0,isDarkMode:ue,children:h.jsx(mHe,{})})})]}),h.jsx(xst,{data:So.uiState.hoverTooltip.data,position:So.uiState.hoverTooltip.position,isVisible:So.uiState.hoverTooltip.isVisible,onDismiss:()=>So.hideHover()}),h.jsx(Sst,{items:So.uiState.autocomplete.items,position:So.uiState.autocomplete.position,isVisible:So.uiState.autocomplete.isVisible,filterText:So.uiState.autocomplete.filterText,onSelect:N=>So.selectCompletion(N),onDismiss:()=>So.hideAutocomplete()}),h.jsxs("div",{className:"relative",children:[h.jsx("textarea",{ref:pt,value:Fe,onChange:N=>Hu(N.target.value),style:{overflowY:"auto"},onKeyDown:N=>{if(ft&&Ch.length>0){const G=Math.min(Ch.length-1,5);if(N.key==="ArrowDown")N.preventDefault(),Eo(se=>Math.min(se+1,G));else if(N.key==="ArrowUp")N.preventDefault(),Eo(se=>Math.max(se-1,0));else if(N.key==="Tab"||N.key==="Enter"){N.preventDefault();const se=Ch[zr];se&&(se.isDirectory?Th(se.path):ay(se.path))}else N.key==="Backspace"&&ho.length>0&&Po===""?(N.preventDefault(),wp()):N.key==="Escape"&&(Nt(!1),rr(""),Zo([]),Ws(""),uc(u.projectPath||void 0),De(""));return}if(Yi&&Xd.length>0){const G=Math.min(Xd.length-1,5);if(N.key==="ArrowDown")N.preventDefault(),Eo(se=>Math.min(se+1,G));else if(N.key==="ArrowUp")N.preventDefault(),Eo(se=>Math.max(se-1,0));else if(N.key==="Tab"||N.key==="Enter"){N.preventDefault();const se=Xd[zr];se&&ju(se.name)}else N.key==="Escape"&&(_l(!1),lh(""),De(""));return}N.key==="Enter"&&(N.metaKey||N.ctrlKey)&&(N.preventDefault(),Qd(Fe),Qr([])),N.key==="Escape"&&(Nt(!1),_l(!1))},placeholder:"Plan, @ for context, / for commands","data-control-id":"chat-input","data-control-type":"input",className:`w-full bg-transparent px-4 py-3 text-sm resize-none focus:outline-none min-h-[56px] ${ue?"text-neutral-100 placeholder-neutral-400":""}`,rows:2}),ft&&Tn&&h.jsxs("div",{className:`absolute bottom-full left-0 mb-2 w-80 rounded-xl shadow-xl py-1 z-[100] max-h-[264px] overflow-y-auto ${ue?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:[ho.length>0&&h.jsxs("button",{onClick:wp,className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 border-b ${ue?"hover:bg-neutral-600 text-neutral-300 border-neutral-600":"hover:bg-stone-50 text-stone-600 border-stone-100"}`,children:[h.jsx(w1,{size:14}),h.jsx("span",{children:".."}),h.jsx("span",{className:`text-xs truncate ${ue?"text-neutral-500":"text-stone-400"}`,children:kr.split("/").pop()})]}),Ch.length===0?h.jsx("div",{className:`px-3 py-2 text-sm ${ue?"text-neutral-400":"text-stone-400"}`,children:pn.length===0?"Loading...":"No matching files"}):Ch.slice(0,6).map((N,G)=>h.jsxs("button",{onClick:()=>{N.isDirectory?Th(N.path):ay(N.path)},className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${G===zr?ue?"bg-neutral-600":"bg-stone-100":""} ${ue?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[N.isDirectory?h.jsx(E1,{size:14,className:ue?"text-yellow-400":"text-yellow-600"}):h.jsx(lx,{size:14,className:ue?"text-neutral-400":"text-stone-400"}),h.jsx("span",{className:`truncate ${N.isDirectory?"font-medium":""}`,children:N.name}),N.isDirectory&&h.jsx(Nf,{size:12,className:ue?"text-neutral-500 ml-auto":"text-stone-400 ml-auto"})]},N.path))]}),Yi&&h.jsx("div",{className:`absolute bottom-full left-0 mb-2 w-64 rounded-xl shadow-xl py-1 z-[100] max-h-[264px] overflow-y-auto ${ue?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:Xd.length===0?h.jsx("div",{className:`px-3 py-2 text-sm ${ue?"text-neutral-400":"text-stone-400"}`,children:Mu.length===0?"Loading...":"No matching commands"}):Xd.slice(0,6).map((N,G)=>h.jsxs("button",{onClick:()=>ju(N.name),className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${G===zr?ue?"bg-neutral-600":"bg-stone-100":""} ${ue?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[h.jsx(dd,{size:14}),"/",N.name]},N.name))}),ch&&h.jsx("div",{className:`absolute bottom-full left-0 mb-2 w-64 rounded-xl shadow-xl py-1 z-[100] max-h-[264px] overflow-y-auto ${ue?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:bg.length===0?h.jsx("div",{className:`px-3 py-2 text-sm ${ue?"text-neutral-400":"text-stone-400"}`,children:Jo.length===0?"No recent chips":"No matching chips"}):bg.slice(0,6).map((N,G)=>h.jsxs("button",{onClick:()=>Uu({...N,type:Wr}),className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${G===zr?ue?"bg-neutral-600":"bg-stone-100":""} ${ue?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[h.jsx("span",{className:`inline-flex items-center justify-center w-4 h-4 rounded text-[10px] font-bold ${Wr==="exclude"?ue?"bg-red-500/30 text-red-300":"bg-red-100 text-red-600":ue?"bg-blue-500/30 text-blue-300":"bg-blue-100 text-blue-600"}`,children:Wr==="exclude"?"-":"+"}),h.jsx("span",{className:"uppercase font-medium",children:N.name})]},`${N.type}-${N.name}`))})]}),h.jsxs("div",{className:`flex items-center justify-between px-2 py-1.5 border-t ${ue?"border-neutral-600":"border-stone-100"}`,children:[h.jsxs("div",{className:"flex items-center gap-0.5",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>!wt&&Zn(!As),className:`flex items-center gap-1.5 px-2 py-1 text-sm rounded-full border transition ${wt?ue?"border-blue-500/50 bg-blue-500/10 text-blue-300 cursor-not-allowed":"border-blue-300 bg-blue-50 text-blue-600 cursor-not-allowed":ue?"border-neutral-600 hover:bg-neutral-600 text-neutral-200 bg-neutral-700":"border-stone-200 hover:bg-stone-50 text-stone-700 bg-white"}`,title:wt?"Model locked while inspector is active":Vt.name,children:[h.jsx(Vt.Icon,{size:14,className:"flex-shrink-0"}),h.jsx("span",{className:"truncate max-w-[100px]",children:AV(Vt.name)}),wt?h.jsx(o2,{size:10,className:ue?"text-blue-400":"text-blue-500"}):h.jsx($f,{size:10,className:ue?"text-neutral-400":"text-stone-400"})]}),As&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-[99]",onClick:()=>Zn(!1)}),h.jsx("div",{className:`absolute bottom-full left-0 mb-2 w-56 rounded-xl shadow-xl py-1 z-[100] max-h-80 overflow-y-auto ${ue?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:zd.filter(N=>N.isEnabled).map(N=>h.jsxs("button",{onClick:()=>{N.isAvailable&&(Ur({id:N.id,name:N.name,Icon:N.Icon}),Zn(!1))},className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${N.isAvailable?ue?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50":"opacity-40 cursor-not-allowed"}`,disabled:!N.isAvailable,title:N.isProviderConfigured?N.name:"Configure provider API key in Settings",children:[h.jsx(N.Icon,{size:14,className:N.isAvailable?ue?"text-neutral-400":"text-stone-500":"text-stone-300"}),h.jsx("span",{className:`flex-1 ${Vt.id===N.id?"font-medium":""}`,children:AV(N.name)}),Vt.id===N.id&&h.jsx(Cs,{size:12,className:"text-blue-600"})]},N.id))})]})]}),h.jsxs("div",{className:"relative","data-thinking-popover":!0,children:[h.jsx("button",{onClick:()=>!wt&&$t(!Sl),className:`p-2 rounded-lg transition-colors ${wt?ue?"text-neutral-600 cursor-not-allowed":"text-stone-300 cursor-not-allowed":yi!=="off"?ue?"bg-violet-500/20 text-violet-300 hover:bg-violet-500/30":"bg-violet-50 text-violet-700 hover:bg-violet-100":ue?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:wt?"Thinking disabled while inspector is active":`Thinking: ${yi}`,children:h.jsx(f1,{size:18})}),Sl&&!wt&&h.jsxs("div",{className:`absolute bottom-full right-0 mb-2 p-2 rounded-lg shadow-lg border min-w-[200px] z-50 ${ue?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,children:[h.jsx("div",{className:`text-xs font-medium mb-2 px-2 ${ue?"text-neutral-400":"text-stone-500"}`,children:"Extended Thinking"}),h.jsxs("div",{className:`text-xs px-2 py-1.5 mb-2 rounded ${ue?"bg-neutral-700/50 text-neutral-400":"bg-stone-50 text-stone-500"}`,children:[h.jsx("span",{className:"font-medium",children:Vt.name}),Vt.id.includes("claude")||Vt.id.includes("opus")||Vt.id.includes("sonnet")||Vt.id.includes("haiku")?h.jsx("span",{className:"ml-1 text-emerald-500",children:"(native)"}):h.jsx("span",{className:"ml-1 text-amber-500",children:"(prompted)"})]}),["off","low","med","high","ultrathink"].map(N=>h.jsxs("button",{onClick:()=>{Du(N),$t(!1)},className:`w-full flex items-center gap-2 px-2 py-1.5 rounded text-sm transition ${yi===N?ue?"bg-violet-500/20 text-violet-300":"bg-violet-50 text-violet-700":ue?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-50 text-stone-700"}`,children:[N==="off"&&h.jsx(qr,{size:14}),N==="low"&&h.jsx(J_,{size:14}),N==="med"&&h.jsx(f1,{size:14}),N==="high"&&h.jsx(d1e,{size:14}),N==="ultrathink"&&h.jsx(obe,{size:14}),h.jsx("span",{className:"capitalize",children:N==="ultrathink"?"Ultra":N}),yi===N&&h.jsx(Cs,{size:14,className:"ml-auto"})]},N))]})]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>{on(!wt),Ue(!1),Jt(!1)},className:`p-2 rounded-lg transition-colors ${wt?"bg-blue-100 text-blue-600":ue?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Select Element",children:h.jsx(o2,{size:18})}),h.jsx("button",{onClick:()=>{Jt(!ht),on(!1)},className:`p-2 rounded-lg transition-colors ${ht?"bg-orange-100 text-orange-600":ue?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Move & Resize Element",children:h.jsx(i2,{size:18})}),h.jsx("button",{onClick:()=>wo(!Gs),className:`p-2 rounded-lg transition-colors ${Gs?"bg-yellow-100 text-yellow-600":ue?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Attach Console Logs",children:h.jsx(dd,{size:18})}),h.jsx("input",{type:"file",ref:rt,className:"hidden",accept:"image/*",multiple:!0,onChange:To}),Je&&h.jsx("button",{onClick:()=>_e(!0),className:"relative w-8 h-8 rounded-lg overflow-hidden border-2 border-purple-500 hover:border-purple-600 transition-colors",title:"View captured screenshot",children:h.jsx("img",{src:Je,alt:"Screenshot preview",className:"w-full h-full object-cover"})}),h.jsx("button",{onClick:()=>{Ue(!ye),on(!1)},className:`p-2 rounded-lg transition-colors ${ye?"bg-purple-100 text-purple-600":ue?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Screenshot Element",children:h.jsx(KP,{size:18})}),gh==="streaming"&&h.jsx("button",{onClick:()=>{lE(),Il(!1),jd("idle"),_o(null),setStreamingContent("")},className:`p-1.5 rounded-lg transition-colors ${ue?"bg-red-600 text-white hover:bg-red-500":"bg-red-500 text-white hover:bg-red-600"}`,title:"Stop generating",children:h.jsx(Nq,{size:12,fill:"currentColor"})}),gh==="idle"&&h.jsx("div",{className:`p-1.5 rounded-lg ${ue?"bg-emerald-600/20 text-emerald-400":"bg-emerald-100 text-emerald-600"}`,title:"Connected (idle)",children:h.jsx(Cs,{size:12})}),h.jsx("button",{onClick:()=>Qd(Fe),disabled:!Fe.trim(),"data-control-id":"send-button","data-control-type":"button",className:`p-1.5 rounded-lg transition-colors ml-1 disabled:opacity-30 disabled:cursor-not-allowed ${ue?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-800"}`,title:gh==="streaming"?"Queue message":"Send message",children:h.jsx(k5,{size:14})})]})]})]})})]}),uE&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>bh(!1)}),h.jsxs("div",{className:`fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 w-96 rounded-xl shadow-2xl p-5 ${ue?"bg-neutral-800 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("h3",{className:`text-lg font-semibold mb-3 ${ue?"text-neutral-100":"text-stone-900"}`,children:"Stash Changes"}),h.jsx("p",{className:`text-sm mb-4 ${ue?"text-neutral-400":"text-stone-500"}`,children:'This will temporarily save your uncommitted changes. You can restore them later with "stash pop".'}),h.jsx("input",{type:"text",value:cp,onChange:N=>sg(N.target.value),placeholder:"Optional stash message...",className:`w-full text-sm px-3 py-2 rounded-lg border mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${ue?"bg-neutral-700 border-neutral-600 text-neutral-100 placeholder-neutral-400":"bg-stone-50 border-stone-200"}`,autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&dg(cp),N.key==="Escape"&&(bh(!1),sg(""))}}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx("button",{onClick:()=>{bh(!1),sg("")},className:`px-4 py-2 text-sm rounded-lg transition ${ue?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-100 text-stone-600"}`,children:"Cancel"}),h.jsx("button",{onClick:()=>dg(cp),className:`px-4 py-2 text-sm rounded-lg font-medium transition ${ue?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-800"}`,children:"Stash Changes"})]})]})]}),ps&&ps.elements&&ps.elements.length>0&&h.jsx("div",{className:`absolute top-20 left-1/2 transform -translate-x-1/2 rounded-lg shadow-2xl px-4 py-3 z-50 max-w-3xl ${ue?"bg-neutral-800 border border-neutral-700":"bg-white border border-neutral-200"}`,children:ps.count===1?h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${ue?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:h.jsx(Cs,{size:16})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsxs("div",{className:`text-sm leading-relaxed ${ue?"text-neutral-200":"text-neutral-800"}`,children:["Found ",h.jsx("code",{className:`px-1.5 py-0.5 rounded font-mono text-xs ${ue?"bg-neutral-700 text-blue-400":"bg-blue-50 text-blue-700"}`,children:ps.elements[0].tagName}),ps.elements[0].text&&h.jsxs("span",{className:"ml-1",children:['"',ps.elements[0].text.substring(0,40),ps.elements[0].text.length>40?"...":"",'"']}),h.jsx("span",{className:`ml-1 ${ue?"text-neutral-400":"text-neutral-500"}`,children:"- Is this correct?"})]})}),h.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[h.jsx("button",{onClick:()=>bp(!1),className:`px-4 py-2 text-sm rounded-lg font-medium transition ${ue?"bg-neutral-700 hover:bg-neutral-600 text-neutral-200":"bg-neutral-100 hover:bg-neutral-200 text-neutral-700"}`,children:"No"}),h.jsx("button",{onClick:()=>bp(!0,1),className:`px-4 py-2 text-sm rounded-lg font-medium transition ${ue?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:"Yes"})]})]}):h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${ue?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:h.jsx(Cs,{size:16})}),h.jsxs("div",{className:`text-sm font-medium ${ue?"text-neutral-200":"text-neutral-800"}`,children:["Found ",ps.count," elements - which one?"]}),h.jsx("button",{onClick:()=>bp(!1),className:`ml-auto px-3 py-1.5 text-sm rounded-lg font-medium transition ${ue?"bg-neutral-700 hover:bg-neutral-600 text-neutral-200":"bg-neutral-100 hover:bg-neutral-200 text-neutral-700"}`,children:"Cancel"})]}),h.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-60 overflow-y-auto",children:ps.elements.map((N,G)=>h.jsxs("button",{onClick:()=>bp(!0,G+1),className:`flex items-center gap-3 p-2 rounded-lg text-left transition ${ue?"hover:bg-neutral-700":"hover:bg-neutral-50"}`,children:[h.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold ${ue?"bg-blue-500 text-white":"bg-blue-600 text-white"}`,children:G+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("code",{className:`text-xs font-mono ${ue?"text-blue-400":"text-blue-700"}`,children:N.tagName}),N.text&&h.jsxs("span",{className:`ml-2 text-xs ${ue?"text-neutral-400":"text-neutral-600"}`,children:['"',N.text.substring(0,50),N.text.length>50?"...":"",'"']})]})]},G))})]})}),((Sr==null?void 0:Sr.source)==="dom"||(Sr==null?void 0:Sr.source)==="code")&&h.jsxs("div",{className:`absolute bottom-24 left-1/2 transform -translate-x-1/2 flex items-center gap-2 rounded-full shadow-xl p-2 z-50 ${ue?"bg-neutral-800 border border-neutral-700":"bg-white border border-neutral-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-1.5 px-2 text-xs font-mono",children:[h.jsxs("span",{className:"text-green-500",children:["+",Sr.additions]}),h.jsxs("span",{className:"text-red-500",children:["-",Sr.deletions]})]}),h.jsx("div",{className:`w-[1px] h-6 ${ue?"bg-neutral-600":"bg-neutral-200"}`}),h.jsx("button",{onMouseDown:()=>{const N=Xn.current.get(l);Sr.undoCode&&N&&(console.log("[Preview] Showing original"),N.executeJavaScript(Sr.undoCode),dp(!0))},onMouseUp:()=>{const N=Xn.current.get(l);Sr.code&&N&&(console.log("[Preview] Showing change"),N.executeJavaScript(Sr.code),dp(!1))},onMouseLeave:()=>{if(!up)return;const N=Xn.current.get(l);Sr.code&&N&&(console.log("[Preview] Showing change (mouse leave)"),N.executeJavaScript(Sr.code),dp(!1))},className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${ue?"hover:bg-neutral-700 text-neutral-400":"hover:bg-neutral-100 text-neutral-600"}`,title:"Hold to see original",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),h.jsx("div",{className:`w-[1px] h-6 ${ue?"bg-neutral-600":"bg-neutral-200"}`}),h.jsx("button",{onClick:Bn?js:ha,className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${ue?"hover:bg-red-900/20 text-neutral-400 hover:text-red-400":"hover:bg-red-50 text-neutral-600 hover:text-red-600"}`,title:"Reject (Esc)",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 6 6 18"}),h.jsx("path",{d:"m6 6 12 12"})]})}),h.jsx("button",{onClick:Bn?Ah:Pl,disabled:Vc,className:`w-10 h-10 rounded-full flex items-center justify-center shadow-md transition-colors disabled:opacity-50 ${Vc?"cursor-not-allowed":ue?"bg-neutral-100 text-neutral-900 hover:bg-white":"bg-neutral-900 text-white hover:bg-neutral-800"}`,title:"Accept (+Enter)",children:Vc?h.jsx(hs,{size:20,className:"animate-spin"}):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M20 6 9 17l-5-5"})})})]}),Ve&&Je&&h.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:()=>_e(!1),children:h.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] p-4",children:[h.jsx("button",{onClick:()=>_e(!1),className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",title:"Close preview",children:h.jsx(qr,{size:24})}),h.jsx("img",{src:Je,alt:"Screenshot preview",className:"max-w-full max-h-[90vh] rounded-lg shadow-2xl",onClick:N=>N.stopPropagation()})]})}),h.jsx("video",{ref:lc,className:"hidden",autoPlay:!0,playsInline:!0,muted:!0}),h.jsx("canvas",{ref:Wc,className:"hidden"}),ug&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 bg-black/70 z-[100] backdrop-blur-md",onClick:vp}),h.jsx("div",{className:"fixed inset-0 z-[101] flex items-center justify-center pointer-events-none",children:Vd.map((N,G)=>{const se=G===Vd.length-1,ve=(Vd.length-1-G)*350,Ae=(Ie,He)=>{var un;if(He)return h.jsx(E1,{size:18,className:"text-blue-400"});const gt=((un=Ie.split(".").pop())==null?void 0:un.toLowerCase())||"";return["png","jpg","jpeg","gif","svg","webp","ico"].includes(gt)?h.jsx(eL,{size:18,className:"text-purple-400"}):["ts","tsx"].includes(gt)?h.jsx(JP,{size:18,className:"text-blue-400"}):["js","jsx"].includes(gt)?h.jsx(JP,{size:18,className:"text-yellow-400"}):["css","scss","less"].includes(gt)?h.jsx(uv,{size:18,className:"text-pink-400"}):["json","yaml","yml","toml"].includes(gt)?h.jsx(Q_,{size:18,className:"text-orange-400"}):["md","txt","mdx"].includes(gt)?h.jsx(pR,{size:18,className:"text-neutral-400"}):["html","htm"].includes(gt)?h.jsx(cu,{size:18,className:"text-orange-400"}):h.jsx(lx,{size:18,className:"text-neutral-500"})};return h.jsxs("div",{className:`absolute pointer-events-auto transition-all duration-500 ease-out backdrop-blur-xl border rounded-xl shadow-2xl overflow-hidden ${ue?"bg-neutral-900/80 border-white/10":"bg-white/80 border-black/10"}`,style:{width:N.type==="image"?"auto":"480px",maxWidth:"90vw",maxHeight:"60vh",transform:se?"translateX(0) scale(1)":`translateX(-${ve}px) scale(0.95)`,opacity:se?1:.4,zIndex:G},children:[h.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 border-b ${ue?"border-white/10":"border-black/5"}`,children:[h.jsx("button",{onClick:Zd,className:`p-1 rounded transition ${ue?"hover:bg-white/10 text-neutral-400":"hover:bg-black/5 text-neutral-500"}`,children:h.jsx(w1,{size:18})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("div",{className:`text-sm font-medium truncate ${ue?"text-white":"text-neutral-900"}`,children:N.title})}),h.jsx("button",{onClick:vp,className:`p-1 rounded transition ${ue?"hover:bg-white/10 text-neutral-400":"hover:bg-black/5 text-neutral-500"}`,children:h.jsx(qr,{size:18})})]}),h.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:"calc(60vh - 44px)"},children:[N.type==="directory"&&N.items&&h.jsx("div",{className:"py-1",children:N.items.length===0?h.jsx("div",{className:`text-center py-6 text-sm ${ue?"text-neutral-500":"text-neutral-400"}`,children:"Empty folder"}):N.items.map((Ie,He)=>h.jsxs("button",{onClick:()=>oy(He+1),className:`w-full flex items-center gap-3 px-3 py-2 text-left transition ${ue?"hover:bg-white/5":"hover:bg-black/5"}`,children:[h.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center text-xs font-bold flex-shrink-0 ${ue?"bg-blue-500/20 text-blue-400":"bg-blue-500/10 text-blue-600"}`,children:He+1}),h.jsx("div",{className:"flex-shrink-0",children:Ae(Ie.name,Ie.isDirectory)}),h.jsx("div",{className:`flex-1 min-w-0 text-sm truncate ${ue?"text-white":"text-neutral-900"}`,children:Ie.name}),Ie.isDirectory&&h.jsx(Nf,{size:16,className:ue?"text-neutral-600":"text-neutral-400"})]},Ie.path))}),N.type==="file"&&N.content&&h.jsx("pre",{className:`p-3 text-xs font-mono overflow-x-auto ${ue?"text-neutral-300":"text-neutral-700"}`,children:N.content}),N.type==="image"&&h.jsx("div",{className:"p-3 flex items-center justify-center",children:h.jsx("img",{src:`file://${N.path}`,alt:N.title,className:"max-w-full max-h-[50vh] object-contain rounded"})})]})]},`${N.path}-${G}`)})}),h.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[102] pointer-events-none",children:h.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs backdrop-blur-xl ${ue?"bg-white/10 text-white/60":"bg-black/10 text-black/60"}`,children:'"open 3" / "open App.tsx" / "open src folder" / "go back" / "close"'})})]}),h.jsx(QBe,{isOpen:d3,onClose:()=>tE(!1),isDarkMode:ue,onToggleDarkMode:Fu,settings:Lo,onSettingsChange:p3,projectPath:u==null?void 0:u.projectPath}),Vb&&h.jsx(eze,{isDarkMode:ue,onAccept:()=>{var G;const N=u==null?void 0:u.projectPath;N&&((G=window.electronAPI)!=null&&G.mgrep)&&window.electronAPI.mgrep.initialize(N),op(!1)},onDecline:()=>{op(!1)},onClose:()=>{localStorage.setItem("mgrep-onboarding-seen","true"),op(!1)}}),h.jsx(pot,{patch:Pu[Bd]||null,onApprove:E3,onReject:py,onEdit:my,projectPath:(u==null?void 0:u.projectPath)||"default",isOpen:nE,totalPatches:Pu.length,currentPatchIndex:Bd}),h.jsx(ydt,{errors:g,isVisible:f,isDarkMode:Gm,onToggle:()=>m(!f),onRemoveError:v,onSearchForSolution:w,onClearAll:y}),g.length>0&&h.jsxs("button",{className:"fixed top-12 right-6 z-40 px-3 py-1.5 rounded-full text-xs font-semibold transition-all hover:scale-105",onClick:()=>m(!f),style:{backgroundColor:g.some(N=>N.isCritical)?"#ef4444":"#f59e0b",color:"white"},title:`${g.length} error${g.length!==1?"s":""} detected`,children:[g.length>0&&g.some(N=>N.solution)&&""," ",g.length]})]})]})}const Xw=x.createContext(null);function Ndt({children:e}){const t=x.useRef(new Map),n=x.useRef(new Map),[,r]=x.useState({}),s=x.useCallback(g=>{t.current.set(g.id,g),r({})},[]),o=x.useCallback(g=>{t.current.delete(g),r({})},[]),i=x.useCallback(g=>t.current.get(g),[]),a=x.useCallback(()=>Array.from(t.current.values()),[]),l=x.useCallback((g,y={})=>{const v=t.current.get(g);if(!(v!=null&&v.ref.current))return;const w=v.ref.current,{color:_="#3b82f6",duration:S=3e3,pulse:k=!0,label:R,glow:O=!0}=y,M={outline:w.style.outline,boxShadow:w.style.boxShadow,position:w.style.position,zIndex:w.style.zIndex,transform:w.style.transform};w.style.outline=`2px solid ${_}`,w.style.boxShadow=O?`0 0 20px ${_}80, 0 0 40px ${_}40`:"none",w.style.position="relative",w.style.zIndex="10000",k&&w.animate([{transform:"scale(1)",boxShadow:`0 0 20px ${_}80`},{transform:"scale(1.02)",boxShadow:`0 0 30px ${_}`},{transform:"scale(1)",boxShadow:`0 0 20px ${_}80`}],{duration:600,iterations:Math.ceil(S/600),easing:"ease-in-out"});let P=null;R&&(P=document.createElement("div"),P.className="cluso-control-label",P.textContent=R,P.style.cssText=`
        position: absolute;
        top: -28px;
        left: 50%;
        transform: translateX(-50%);
        background: ${_};
        color: white;
        padding: 4px 10px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: 600;
        white-space: nowrap;
        z-index: 10001;
        pointer-events: none;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      `,w.style.position="relative",w.appendChild(P));const j=n.current.get(g);j&&clearTimeout(j);const q=setTimeout(()=>{w.style.outline=M.outline,w.style.boxShadow=M.boxShadow,w.style.position=M.position,w.style.zIndex=M.zIndex,w.style.transform=M.transform,P&&P.remove(),n.current.delete(g)},S);n.current.set(g,q)},[]),c=x.useCallback(g=>{const y=n.current.get(g);y&&(clearTimeout(y),n.current.delete(g));const v=t.current.get(g);if(v!=null&&v.ref.current){const w=v.ref.current;w.style.outline="",w.style.boxShadow="",w.style.zIndex="";const _=w.querySelector(".cluso-control-label");_&&_.remove()}},[]),u=x.useCallback(()=>{n.current.forEach((g,y)=>{clearTimeout(g),c(y)}),n.current.clear()},[c]),f=x.useCallback((g,y)=>{var S;const v=t.current.get(g);if(!(v!=null&&v.ref.current))return!1;const w=v.ref.current,_=y||((S=v.actions)==null?void 0:S[0])||"click";switch(_){case"click":w.click();break;case"focus":w.focus();break;case"blur":w.blur();break;default:w.dispatchEvent(new CustomEvent(`cluso:${_}`,{bubbles:!0}))}return!0},[]),m=x.useCallback((g,y)=>{const v=t.current.get(g);v&&(v.state={...v.state,...y},r({}))},[]);return h.jsx(Xw.Provider,{value:{elements:t.current,register:s,unregister:o,getElement:i,getAllElements:a,highlight:l,clearHighlight:c,clearAllHighlights:u,triggerAction:f,setElementState:m},children:e})}const Idt=x.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,children:s,...o},i)=>{const a=x.useRef(null),l=i||a,c=x.useContext(Xw);return x.useEffect(()=>{if(c&&l.current)return c.register({id:e,ref:l,type:"button",label:t,description:n,group:r,actions:["click","focus"]}),()=>c.unregister(e)},[c,e,t,n,r,l]),h.jsx("button",{ref:l,"data-control-id":e,"data-control-type":"button",...o,children:s})});Idt.displayName="ControllableButton";const Rdt=x.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,...s},o)=>{const i=x.useRef(null),a=o||i,l=x.useContext(Xw);return x.useEffect(()=>{if(l&&a.current)return l.register({id:e,ref:a,type:"input",label:t,description:n,group:r,actions:["focus","clear","type"],state:{value:a.current.value}}),()=>l.unregister(e)},[l,e,t,n,r,a]),h.jsx("input",{ref:a,"data-control-id":e,"data-control-type":"input",...s})});Rdt.displayName="ControllableInput";const Mdt=x.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,...s},o)=>{const i=x.useRef(null),a=o||i,l=x.useContext(Xw);return x.useEffect(()=>{if(l&&a.current)return l.register({id:e,ref:a,type:"checkbox",label:t,description:n,group:r,actions:["toggle","check","uncheck"],state:{checked:a.current.checked}}),()=>l.unregister(e)},[l,e,t,n,r,a]),h.jsx("input",{ref:a,type:"checkbox","data-control-id":e,"data-control-type":"checkbox",...s})});Mdt.displayName="ControllableCheckbox";const Odt=x.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,controlType:s="generic",controlActions:o=["click","focus"],as:i="div",children:a,...l},c)=>{const u=x.useRef(null),f=c||u,m=x.useContext(Xw);x.useEffect(()=>{if(m&&f.current)return m.register({id:e,ref:f,type:s,label:t,description:n,group:r,actions:o}),()=>m.unregister(e)},[m,e,t,n,r,s,o,f]);const g=i;return h.jsx(g,{ref:f,"data-control-id":e,"data-control-type":s,...l,children:a})});Odt.displayName="Controllable";/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const Ddt="0.5.16",ble=`bippy-${Ddt}`,IV=Object.defineProperty,Pdt=Object.prototype.hasOwnProperty,Av=()=>{},yle=e=>{try{Function.prototype.toString.call(e).indexOf("^_^")>-1&&setTimeout(()=>{throw Error("React is running in production mode, but dead code elimination has not been applied. Read how to correctly configure React for production: https://reactjs.org/link/perf-use-production-build")})}catch{}},Ldt=(e=Qw())=>"getFiberRoots"in e;let vle=!1,v_;const RV=(e=Qw())=>vle?!0:(typeof e.inject=="function"&&(v_=e.inject.toString()),!!(v_!=null&&v_.includes("(injected)"))),QI=new Set,iw=new Set,$dt=e=>{let t=new Map,n=0,r={_instrumentationIsActive:!1,_instrumentationSource:ble,checkDCE:yle,hasUnsupportedRendererAttached:!1,inject(s){let o=++n;return t.set(o,s),iw.add(s),r._instrumentationIsActive||(r._instrumentationIsActive=!0,QI.forEach(i=>i())),o},on:Av,onCommitFiberRoot:Av,onCommitFiberUnmount:Av,onPostCommitFiberRoot:Av,renderers:t,supportsFiber:!0,supportsFlight:!0};try{IV(globalThis,"__REACT_DEVTOOLS_GLOBAL_HOOK__",{configurable:!0,enumerable:!0,get(){return r},set(i){if(i&&typeof i=="object"){let a=r.renderers;r=i,a.size>0&&(a.forEach((l,c)=>{iw.add(l),i.renderers.set(c,l)}),eR(e))}}});let s=window.hasOwnProperty,o=!1;IV(window,"hasOwnProperty",{configurable:!0,value:function(...i){try{if(!o&&i[0]==="__REACT_DEVTOOLS_GLOBAL_HOOK__")return globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__=void 0,o=!0,-0}catch{}return s.apply(this,i)},writable:!0})}catch{eR(e)}return r},eR=e=>{try{let t=globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t)return;if(!t._instrumentationSource){t.checkDCE=yle,t.supportsFiber=!0,t.supportsFlight=!0,t.hasUnsupportedRendererAttached=!1,t._instrumentationSource=ble,t._instrumentationIsActive=!1;let n=Ldt(t);if(n||(t.on=Av),t.renderers.size){t._instrumentationIsActive=!0,QI.forEach(o=>o());return}let r=t.inject,s=RV(t);s&&!n&&(vle=!0,t.inject({scheduleRefresh(){}})&&(t._instrumentationIsActive=!0)),t.inject=o=>{let i=r(o);return iw.add(o),s&&t.renderers.set(i,o),t._instrumentationIsActive=!0,QI.forEach(a=>a()),i}}(t.renderers.size||t._instrumentationIsActive||RV())&&(e==null||e())}catch{}},Fdt=()=>Pdt.call(globalThis,"__REACT_DEVTOOLS_GLOBAL_HOOK__"),Qw=e=>Fdt()?(eR(e),globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__):$dt(e),Bdt=()=>{var e,t;return!!(typeof window<"u"&&((e=window.document)!=null&&e.createElement||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))},zdt=()=>{try{Bdt()&&Qw()}catch{}};/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */zdt();/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const xle=0,wle=1,Ele=5,_le=11,jdt=13,Udt=14,Sle=15,Hdt=16,Vdt=19,Tle=26,Cle=27,qdt=28,Gdt=30,Wdt=e=>{switch(e.tag){case Ele:case Tle:case Cle:return!0;default:return typeof e.type=="string"}},kle=e=>{switch(e.tag){case wle:case _le:case xle:case Udt:case Sle:return!0;default:return!1}};function Ale(e,t,n=!1){if(!e)return null;let r=t(e);if(r instanceof Promise)return(async()=>{if(await r===!0)return e;let o=n?e.return:e.child;for(;o;){let i=await Ile(o,t,n);if(i)return i;o=n?null:o.sibling}return null})();if(r===!0)return e;let s=n?e.return:e.child;for(;s;){let o=Nle(s,t,n);if(o)return o;s=n?null:s.sibling}return null}const Nle=(e,t,n=!1)=>{if(!e)return null;if(t(e)===!0)return e;let r=n?e.return:e.child;for(;r;){let s=Nle(r,t,n);if(s)return s;r=n?null:r.sibling}return null},Ile=async(e,t,n=!1)=>{if(!e)return null;if(await t(e)===!0)return e;let r=n?e.return:e.child;for(;r;){let s=await Ile(r,t,n);if(s)return s;r=n?null:r.sibling}return null},Rle=e=>{let t=e;return typeof t=="function"?t:typeof t=="object"&&t?Rle(t.type||t.render):null},MV=e=>{let t=e;if(typeof t=="string")return t;if(typeof t!="function"&&!(typeof t=="object"&&t))return null;let n=t.displayName||t.name||null;if(n)return n;let r=Rle(t);return r&&(r.displayName||r.name)||null},Mle=e=>{let t=e.alternate;if(!t)return e;if(t.actualStartTime&&e.actualStartTime)return t.actualStartTime>e.actualStartTime?t:e;for(let n of Ydt){let r=Ale(n.current,s=>{if(s===e)return!0});if(r)return r}return e},m4=e=>{var n,r,s,o;let t=Qw();for(let i of t.renderers.values())try{let a=(n=i.findFiberByHostInstance)==null?void 0:n.call(i,e);if(a)return a}catch{}if(typeof e=="object"&&e){if("_reactRootContainer"in e)return(o=(s=(r=e._reactRootContainer)==null?void 0:r._internalRoot)==null?void 0:s.current)==null?void 0:o.child;for(let i in e)if(i.startsWith("__reactContainer$")||i.startsWith("__reactInternalInstance$")||i.startsWith("__reactFiber"))return e[i]||null}return null},Ydt=new Set;/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kdt=Object.create,Ole=Object.defineProperty,Zdt=Object.getOwnPropertyDescriptor,Jdt=Object.getOwnPropertyNames,Xdt=Object.getPrototypeOf,Qdt=Object.prototype.hasOwnProperty,eft=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),tft=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(var s=Jdt(t),o=0,i=s.length,a;o<i;o++)a=s[o],!Qdt.call(e,a)&&a!==n&&Ole(e,a,{get:(l=>t[l]).bind(null,a),enumerable:!(r=Zdt(t,a))||r.enumerable});return e},nft=(e,t,n)=>(n=e==null?{}:Kdt(Xdt(e)),tft(Ole(n,"default",{value:e,enumerable:!0}),e));const rft=()=>{let e=Qw();for(let t of[...Array.from(iw),...Array.from(e.renderers.values())]){let n=t.currentDispatcherRef;if(n&&typeof n=="object")return"H"in n?n.H:n.current}return null},OV=e=>{for(let t of iw){let n=t.currentDispatcherRef;n&&typeof n=="object"&&("H"in n?n.H=e:n.current=e)}},Ef=e=>`
    in ${e}`,sft=(e,t)=>{let n=Ef(e);return t&&(n+=` (at ${t})`),n};let nN=!1;const rN=(e,t)=>{if(!e||nN)return"";let n=Error.prepareStackTrace;Error.prepareStackTrace=void 0,nN=!0;let r=rft();OV(null);let s=console.error,o=console.warn;console.error=()=>{},console.warn=()=>{};try{let l={DetermineComponentFrameRoot(){let m;try{if(t){let g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(y){m=y}Reflect.construct(e,[],g)}else{try{g.call()}catch(y){m=y}e.call(g.prototype)}}else{try{throw Error()}catch(y){m=y}let g=e();g&&typeof g.catch=="function"&&g.catch(()=>{})}}catch(g){if(g instanceof Error&&m instanceof Error&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";let c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c!=null&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});let[u,f]=l.DetermineComponentFrameRoot();if(u&&f){let m=u.split(`
`),g=f.split(`
`),y=0,v=0;for(;y<m.length&&!m[y].includes("DetermineComponentFrameRoot");)y++;for(;v<g.length&&!g[v].includes("DetermineComponentFrameRoot");)v++;if(y===m.length||v===g.length)for(y=m.length-1,v=g.length-1;y>=1&&v>=0&&m[y]!==g[v];)v--;for(;y>=1&&v>=0;y--,v--)if(m[y]!==g[v]){if(y!==1||v!==1)do if(y--,v--,v<0||m[y]!==g[v]){let w=`
${m[y].replace(" at new "," at ")}`,_=MV(e);return _&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",_)),w}while(y>=1&&v>=0);break}}}finally{nN=!1,Error.prepareStackTrace=n,OV(r),console.error=s,console.warn=o}let i=e?MV(e):"";return i?Ef(i):""},oft=(e,t)=>{let n=e.tag,r="";switch(n){case qdt:r=Ef("Activity");break;case wle:r=rN(e.type,!0);break;case _le:r=rN(e.type.render,!1);break;case xle:case Sle:r=rN(e.type,!1);break;case Ele:case Tle:case Cle:r=Ef(e.type);break;case Hdt:r=Ef("Lazy");break;case jdt:r=e.child!==t&&t!==null?Ef("Suspense Fallback"):Ef("Suspense");break;case Vdt:r=Ef("SuspenseList");break;case Gdt:r=Ef("ViewTransition");break;default:return""}return r},ift=e=>{try{let t="",n=e,r=null;do{t+=oft(n,r);let s=n._debugInfo;if(s&&Array.isArray(s))for(let o=s.length-1;o>=0;o--){let i=s[o];typeof i.name=="string"&&(t+=sft(i.name,i.env))}r=n,n=n.return}while(n);return t}catch(t){return t instanceof Error?`
Error generating stack: ${t.message}
${t.stack}`:""}},aft=e=>{let t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;let n=e;if(!n)return"";Error.prepareStackTrace=t,n.startsWith(`Error: react-stack-top-frame
`)&&(n=n.slice(29));let r=n.indexOf(`
`);if(r!==-1&&(n=n.slice(r+1)),r=Math.max(n.indexOf("react_stack_bottom_frame"),n.indexOf("react-stack-bottom-frame")),r!==-1&&(r=n.lastIndexOf(`
`,r)),r!==-1)n=n.slice(0,r);else return"";return n},lft=/(^|@)\S+:\d+/,Dle=/^\s*at .*(\S+:\d+|\(native\))/m,cft=/^(eval@)?(\[native code\])?$/,Ple=(e,t)=>{if((t==null?void 0:t.includeInElement)!==!1){let n=e.split(`
`),r=[];for(let s of n)if(/^\s*at\s+/.test(s)){let o=DV(s,void 0)[0];o&&r.push(o)}else if(/^\s*in\s+/.test(s)){let o=s.replace(/^\s*in\s+/,"").replace(/\s*\(at .*\)$/,"");r.push({function:o,raw:s})}else if(s.match(lft)){let o=PV(s,void 0)[0];o&&r.push(o)}return p9(r,t)}return e.match(Dle)?DV(e,t):PV(e,t)},Lle=e=>{if(!e.includes(":"))return[e,void 0,void 0];let t=/(.+?)(?::(\d+))?(?::(\d+))?$/,n=t.exec(e.replace(/[()]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},p9=(e,t)=>t&&t.slice!=null?Array.isArray(t.slice)?e.slice(t.slice[0],t.slice[1]):e.slice(0,t.slice):e,DV=(e,t)=>p9(e.split(`
`).filter(r=>!!r.match(Dle)),t).map(r=>{let s=r;s.includes("(eval ")&&(s=s.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));let o=s.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),i=o.match(/ (\(.+\)$)/);o=i?o.replace(i[0],""):o;let a=Lle(i?i[1]:o),l=i&&o||void 0,c=["eval","<anonymous>"].includes(a[0])?void 0:a[0];return{function:l,file:c,line:a[1]?+a[1]:void 0,col:a[2]?+a[2]:void 0,raw:s}}),PV=(e,t)=>p9(e.split(`
`).filter(r=>!r.match(cft)),t).map(r=>{let s=r;if(s.includes(" > eval")&&(s=s.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),!s.includes("@")&&!s.includes(":"))return{function:s};{let o=/(([^\n\r"\u2028\u2029]*".[^\n\r"\u2028\u2029]*"[^\n\r@\u2028\u2029]*(?:@[^\n\r"\u2028\u2029]*"[^\n\r@\u2028\u2029]*)*(?:[\n\r\u2028\u2029][^@]*)?)?[^@]*)@/,i=s.match(o),a=i&&i[1]?i[1]:void 0,l=Lle(s.replace(o,""));return{function:a,file:l[0],line:l[1]?+l[1]:void 0,col:l[2]?+l[2]:void 0,raw:s}}});var uft=eft((e,t)=>{(function(n,r){typeof e=="object"&&t!==void 0?r(e):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.sourcemapCodec={}))})(void 0,function(n){let r=44,s=59,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(64),a=new Uint8Array(128);for(let z=0;z<o.length;z++){let H=o.charCodeAt(z);i[z]=H,a[H]=z}function l(z,H){let F=0,W=0,X=0;do{let ee=z.next();X=a[ee],F|=(X&31)<<W,W+=5}while(X&32);let J=F&1;return F>>>=1,J&&(F=-2147483648|-F),H+F}function c(z,H,F){let W=H-F;W=W<0?-W<<1|1:W<<1;do{let X=W&31;W>>>=5,W>0&&(X|=32),z.write(i[X])}while(W>0);return H}function u(z,H){return z.pos>=H?!1:z.peek()!==r}let f=1024*16,m=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(z){return Buffer.from(z.buffer,z.byteOffset,z.byteLength).toString()}}:{decode(z){let H="";for(let F=0;F<z.length;F++)H+=String.fromCharCode(z[F]);return H}};class g{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(f)}write(H){let{buffer:F}=this;F[this.pos++]=H,this.pos===f&&(this.out+=m.decode(F),this.pos=0)}flush(){let{buffer:H,out:F,pos:W}=this;return W>0?F+m.decode(H.subarray(0,W)):F}}class y{constructor(H){this.pos=0,this.buffer=H}next(){return this.buffer.charCodeAt(this.pos++)}peek(){return this.buffer.charCodeAt(this.pos)}indexOf(H){let{buffer:F,pos:W}=this,X=F.indexOf(H,W);return X===-1?F.length:X}}let v=[];function w(z){let{length:H}=z,F=new y(z),W=[],X=[],J=0;for(;F.pos<H;F.pos++){J=l(F,J);let ee=l(F,0);if(!u(F,H)){let Q=X.pop();Q[2]=J,Q[3]=ee;continue}let re=l(F,0),ie=l(F,0),Z=ie&1,te=Z?[J,ee,0,0,re,l(F,0)]:[J,ee,0,0,re],oe=v;if(u(F,H)){oe=[];do{let Q=l(F,0);oe.push(Q)}while(u(F,H))}te.vars=oe,W.push(te),X.push(te)}return W}function _(z){let H=new g;for(let F=0;F<z.length;)F=S(z,F,H,[0]);return H.flush()}function S(z,H,F,W){let X=z[H],{0:J,1:ee,2:re,3:ie,4:Z,vars:te}=X;H>0&&F.write(r),W[0]=c(F,J,W[0]),c(F,ee,0),c(F,Z,0);let oe=X.length===6?1:0;c(F,oe,0),X.length===6&&c(F,X[5],0);for(let Q of te)c(F,Q,0);for(H++;H<z.length;){let Q=z[H],{0:Te,1:ge}=Q;if(Te>re||Te===re&&ge>=ie)break;H=S(z,H,F,W)}return F.write(r),W[0]=c(F,re,W[0]),c(F,ie,0),H}function k(z){let{length:H}=z,F=new y(z),W=[],X=[],J=0,ee=0,re=0,ie=0,Z=0,te=0,oe=0,Q=0;do{let Te=F.indexOf(";"),ge=0;for(;F.pos<Te;F.pos++){if(ge=l(F,ge),!u(F,Te)){let nt=X.pop();nt[2]=J,nt[3]=ge;continue}let Ce=l(F,0),he=Ce&1,Fe=Ce&2,De=Ce&4,Re=null,tt=v,fe;if(he){let nt=l(F,ee);re=l(F,ee===nt?re:0),ee=nt,fe=[J,ge,0,0,nt,re]}else fe=[J,ge,0,0];if(fe.isScope=!!De,Fe){let nt=ie,ot=Z;ie=l(F,ie);let Ht=nt===ie;Z=l(F,Ht?Z:0),te=l(F,Ht&&ot===Z?te:0),Re=[ie,Z,te]}if(fe.callsite=Re,u(F,Te)){tt=[];do{oe=J,Q=ge;let nt=l(F,0),ot;if(nt<-1){ot=[[l(F,0)]];for(let Ht=-1;Ht>nt;Ht--){let qt=oe;oe=l(F,oe),Q=l(F,oe===qt?Q:0);let Pt=l(F,0);ot.push([Pt,oe,Q])}}else ot=[[nt]];tt.push(ot)}while(u(F,Te))}fe.bindings=tt,W.push(fe),X.push(fe)}J++,F.pos=Te+1}while(F.pos<H);return W}function R(z){if(z.length===0)return"";let H=new g;for(let F=0;F<z.length;)F=O(z,F,H,[0,0,0,0,0,0,0]);return H.flush()}function O(z,H,F,W){let X=z[H],{0:J,1:ee,2:re,3:ie,isScope:Z,callsite:te,bindings:oe}=X;W[0]<J?(M(F,W[0],J),W[0]=J,W[1]=0):H>0&&F.write(r),W[1]=c(F,X[1],W[1]);let Q=(X.length===6?1:0)|(te?2:0)|(Z?4:0);if(c(F,Q,0),X.length===6){let{4:Te,5:ge}=X;Te!==W[2]&&(W[3]=0),W[2]=c(F,Te,W[2]),W[3]=c(F,ge,W[3])}if(te){let{0:Te,1:ge,2:Ce}=X.callsite;Te===W[4]?ge!==W[5]&&(W[6]=0):(W[5]=0,W[6]=0),W[4]=c(F,Te,W[4]),W[5]=c(F,ge,W[5]),W[6]=c(F,Ce,W[6])}if(oe)for(let Te of oe){Te.length>1&&c(F,-Te.length,0);let ge=Te[0][0];c(F,ge,0);let Ce=J,he=ee;for(let Fe=1;Fe<Te.length;Fe++){let De=Te[Fe];Ce=c(F,De[1],Ce),he=c(F,De[2],he),c(F,De[0],0)}}for(H++;H<z.length;){let Te=z[H],{0:ge,1:Ce}=Te;if(ge>re||ge===re&&Ce>=ie)break;H=O(z,H,F,W)}return W[0]<re?(M(F,W[0],re),W[0]=re,W[1]=0):F.write(r),W[1]=c(F,ie,W[1]),H}function M(z,H,F){do z.write(s);while(++H<F)}function P(z){let{length:H}=z,F=new y(z),W=[],X=0,J=0,ee=0,re=0,ie=0;do{let Z=F.indexOf(";"),te=[],oe=!0,Q=0;for(X=0;F.pos<Z;){let Te;X=l(F,X),X<Q&&(oe=!1),Q=X,u(F,Z)?(J=l(F,J),ee=l(F,ee),re=l(F,re),u(F,Z)?(ie=l(F,ie),Te=[X,J,ee,re,ie]):Te=[X,J,ee,re]):Te=[X],te.push(Te),F.pos++}oe||j(te),W.push(te),F.pos=Z+1}while(F.pos<=H);return W}function j(z){z.sort(q)}function q(z,H){return z[0]-H[0]}function U(z){let H=new g,F=0,W=0,X=0,J=0;for(let ee=0;ee<z.length;ee++){let re=z[ee];if(ee>0&&H.write(s),re.length===0)continue;let ie=0;for(let Z=0;Z<re.length;Z++){let te=re[Z];Z>0&&H.write(r),ie=c(H,te[0],ie),te.length!==1&&(F=c(H,te[1],F),W=c(H,te[2],W),X=c(H,te[3],X),te.length!==4&&(J=c(H,te[4],J)))}}return H.flush()}n.decode=P,n.decodeGeneratedRanges=k,n.decodeOriginalScopes=w,n.encode=U,n.encodeGeneratedRanges=R,n.encodeOriginalScopes=_,Object.defineProperty(n,"__esModule",{value:!0})})}),$le=nft(uft());const Fle=/^[a-zA-Z][a-zA-Z\d+\-.]*:/,dft=/^data:application\/json[^,]+base64,/,fft=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)|(?:\/\*[@#][ \t]+sourceMappingURL=([^*]+?)[ \t]*(?:\*\/)[ \t]*$)/,Ble=typeof WeakRef<"u",cv=new Map,x_=new Map,hft=e=>Ble&&e instanceof WeakRef,LV=(e,t,n,r)=>{if(n<0||n>=e.length)return null;let s=e[n];if(!s||s.length===0)return null;let o=null;for(let u of s)if(u[0]<=r)o=u;else break;if(!o||o.length<4)return null;let[,i,a,l]=o;if(i===void 0||a===void 0||l===void 0)return null;let c=t[i];return c?{columnNumber:l,fileName:c,lineNumber:a+1}:null},pft=(e,t,n)=>{if(e.sections){let r=null;for(let i of e.sections)if(t>i.offset.line||t===i.offset.line&&n>=i.offset.column)r=i;else break;if(!r)return null;let s=t-r.offset.line,o=t===r.offset.line?n-r.offset.column:n;return LV(r.map.mappings,r.map.sources,s,o)}return LV(e.mappings,e.sources,t-1,n)},mft=(e,t)=>{let n=t.split(`
`),r;for(let o=n.length-1;o>=0&&!r;o--){let i=n[o].match(fft);i&&(r=i[1]||i[2])}if(!r)return null;let s=Fle.test(r);if(!(dft.test(r)||s||r.startsWith("/"))){let o=e.split("/");o[o.length-1]=r,r=o.join("/")}return r},gft=e=>({file:e.file,mappings:(0,$le.decode)(e.mappings),names:e.names,sourceRoot:e.sourceRoot,sources:e.sources,sourcesContent:e.sourcesContent,version:3}),bft=e=>{let t=e.sections.map(({map:r,offset:s})=>({map:{...r,mappings:(0,$le.decode)(r.mappings)},offset:s})),n=new Set;for(let r of t)for(let s of r.map.sources)n.add(s);return{file:e.file,mappings:[],names:[],sections:t,sourceRoot:void 0,sources:Array.from(n),sourcesContent:void 0,version:3}},$V=e=>{if(!e)return!1;let t=e.trim();if(!t)return!1;let n=t.match(Fle);if(!n)return!0;let r=n[0].toLowerCase();return r==="http:"||r==="https:"},yft=async(e,t=fetch)=>{if(!$V(e))return null;let n;try{n=await(await t(e)).text()}catch{return null}if(!n)return null;let r=mft(e,n);if(!r||!$V(r))return null;try{let s=await t(r),o=await s.json();return"sections"in o?bft(o):gft(o)}catch{return null}},vft=async(e,t=!0,n)=>{if(t&&cv.has(e)){let o=cv.get(e);if(o==null)return null;if(hft(o)){let i=o.deref();if(i)return i;cv.delete(e)}else return o}if(t&&x_.has(e))return x_.get(e);let r=yft(e,n);t&&x_.set(e,r);let s=await r;return t&&x_.delete(e),t&&(s===null?cv.set(e,null):cv.set(e,Ble?new WeakRef(s):s)),s},FV=/^[a-zA-Z][a-zA-Z\d+\-.]*:/,xft=["rsc://","file:///","webpack://","node:","turbopack://","metro://"],BV="about://React/",wft=["<anonymous>","eval",""],Eft=/\.(jsx|tsx|ts|js)$/,_ft=/(\.min|bundle|chunk|vendor|vendors|runtime|polyfill|polyfills)\.(js|mjs|cjs)$|(chunk|bundle|vendor|vendors|runtime|polyfill|polyfills|framework|app|main|index)[-_.][A-Za-z0-9_-]{4,}\.(js|mjs|cjs)$|[\da-f]{8,}\.(js|mjs|cjs)$|[-_.][\da-f]{20,}\.(js|mjs|cjs)$|\/dist\/|\/build\/|\/.next\/|\/out\/|\/node_modules\/|\.webpack\.|\.vite\.|\.turbopack\./i,Sft=/^\?[\w~.\-]+(?:=[^&#]*)?(?:&[\w~.\-]+(?:=[^&#]*)?)*$/,Tft=e=>{var t;return e._debugStack instanceof Error&&typeof((t=e._debugStack)==null?void 0:t.stack)=="string"},Cft=e=>{let t=e._debugSource;return t?typeof t=="object"&&!!t&&"fileName"in t&&typeof t.fileName=="string"&&"lineNumber"in t&&typeof t.lineNumber=="number":!1},kft=async(e,t=!0,n)=>{if(Cft(e))return e._debugSource||null;let r=zle(e),s=await jle(r,1,t,n);return!s||s.length===0?null:s[0]},zle=e=>Tft(e)?aft(e._debugStack.stack):ift(e),Aft=async(e,t=!0,n)=>{let r=await jle(e,1,t,n);return!r||r.length===0?null:r[0]},jle=async(e,t=1,n=!0,r)=>{let s=Ple(e,{slice:t??1}),o=[];for(let i of s){if(!(i!=null&&i.file))continue;let a=await vft(i.file,n,r);if(a&&typeof i.line=="number"&&typeof i.col=="number"){let l=pft(a,i.line,i.col);if(l){o.push(l);continue}}o.push({fileName:i.file,lineNumber:i.line,columnNumber:i.col,functionName:i.function})}return o},G_=e=>{if(!e||wft.includes(e))return"";let t=e;if(t.startsWith(BV)){let r=t.slice(BV.length),s=r.indexOf("/"),o=r.indexOf(":");t=s!==-1&&(o===-1||s<o)?r.slice(s+1):r}for(let r of xft)if(t.startsWith(r)){t=t.slice(r.length),r==="file:///"&&(t=`/${t.replace(/^\/+/,"")}`);break}if(FV.test(t)){let r=t.match(FV);r&&(t=t.slice(r[0].length))}let n=t.indexOf("?");if(n!==-1){let r=t.slice(n);Sft.test(r)&&(t=t.slice(0,n))}return t},Nft=e=>{let t=G_(e);return!(!t||!Eft.test(t)||_ft.test(t))},Ift=async(e,t=!0,n)=>{let r=Ale(e,i=>{if(kle(i))return!0},!0);if(r){let i=await kft(r,t,n);if(i!=null&&i.fileName){let a=G_(i.fileName);if(Nft(a))return{fileName:a,lineNumber:i.lineNumber,columnNumber:i.columnNumber,functionName:i.functionName}}}let s=Ple(zle(e),{includeInElement:!1}),o=null;for(;s.length;){let i=s.pop();if(!i||!i.raw||!i.file)continue;let a=await Aft(i.raw,t,n);if(a)return{fileName:G_(a.fileName),lineNumber:a.lineNumber,columnNumber:a.columnNumber,functionName:a.functionName};o={fileName:G_(i.file),lineNumber:i.line,columnNumber:i.col,functionName:i.function}}return o},Ule=async(e,t=!0,n)=>{let r=m4(e);if(!r||!Wdt(r))return null;let s=Mle(r);return s?Ift(s,t,n):null};async function Rft(e){try{Kr.sourcePatch.log("Attempting to get source for element:",e.tagName,e.id||e.className);const t=await Ule(e);if(Kr.sourcePatch.log("Source info from bippy:",t),!t||!t.fileName)return Kr.sourcePatch.warn("No source info found"),null;const n={name:t.functionName||"Unknown",file:t.fileName,line:t.lineNumber||0,column:t.columnNumber||0},r=`${n.file}:${n.line}`;return{sources:[n],summary:r}}catch(t){return Kr.sourcePatch.error("Error getting source location:",t),null}}function Mft(e){var t;try{const n=m4(e);if(!n)return null;let s=Mle(n);for(;s;){if(kle(s)){const o=Oft(s);if(o)return{name:o,type:((t=s.type)==null?void 0:t.name)||"Component"}}s=s.return}return null}catch(n){return console.error("[SourceLocation] Error getting fiber info:",n),null}}function Oft(e){try{return e.type&&typeof e.type=="function"?e.type.name||null:e.type&&typeof e.type=="object"&&"displayName"in e.type?e.type.displayName||null:e.elementType&&typeof e.elementType=="function"&&e.elementType.name||null}catch{return null}}function Dft(){window.__SOURCE_LOCATION__={getElementSourceLocation:Rft,getElementFiberInfo:Mft},console.log("[SourceLocation] Tracking initialized"),console.log("[SourceLocation] API available at window.__SOURCE_LOCATION__"),console.log("[SourceLocation] Testing bippy availability:",{getFiberFromHostInstance:typeof m4,getSourceFromHostInstance:typeof Ule}),setTimeout(()=>{const e=document.getElementById("root");if(e){const t=m4(e);console.log("[SourceLocation] React root fiber test:",!!t)}},1e3)}Dft();window.addEventListener("error",e=>{var t,n,r;((t=e.message)!=null&&t.includes("dynamically imported module")||(n=e.message)!=null&&n.includes("Failed to fetch")||(r=e.message)!=null&&r.includes("Loading chunk"))&&(console.error("[GlobalErrorHandler] Module loading failed:",e.message),e.preventDefault(),console.warn("[GlobalErrorHandler] A component failed to load. Try refreshing the page."))});window.addEventListener("unhandledrejection",e=>{var n;const t=((n=e.reason)==null?void 0:n.message)||String(e.reason);(t!=null&&t.includes("dynamically imported module")||t!=null&&t.includes("Failed to fetch")||t!=null&&t.includes("Loading chunk"))&&(console.error("[GlobalErrorHandler] Async module loading failed:",t),e.preventDefault())});const Hle=document.getElementById("root");if(!Hle)throw new Error("Could not find root element to mount to");const Pft=oue.createRoot(Hle);Pft.render(h.jsx(Me.StrictMode,{children:h.jsx(pge,{children:h.jsx(Ndt,{children:h.jsx(Adt,{})})})}));const Lft=Object.freeze(Object.defineProperty({__proto__:null,Mermaid:die},Symbol.toStringTag,{value:"Module"}));export{Hnt as H,Au as M,me as _,dht as a,GUe as b,fHe as c,km as g,h as j,$s as k,x as r,vr as u};
//# sourceMappingURL=index-DlSjwZ2F.js.map
