const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./angular-html-CU67Zn6k.js","./html-GMplVEZG.js","./javascript-wDzz0qaB.js","./css-DPfMkruS.js","./angular-ts-BwZT4LLn.js","./scss-OYdSNvt2.js","./apl-dKokRX4l.js","./xml-sdJ4AIDG.js","./java-CylS5w8V.js","./json-Cp-IABpG.js","./astro-CbQHKStN.js","./typescript-BPQ3VLAy.js","./postcss-CXtECtnM.js","./tsx-COt5Ahok.js","./blade-DVc8C-J4.js","./html-derivative-BFtXZ54Q.js","./sql-BLtJtn59.js","./bsl-BO_Y6i37.js","./sdbl-DVxCFoDh.js","./cairo-KRGpt6FW.js","./python-B6aJPvgy.js","./cobol-nwyudZeR.js","./coffee-Ch7k5sss.js","./cpp-CofmeUqb.js","./regexp-CDVJQ6XC.js","./glsl-DplSGwfg.js","./c-BIGW1oBm.js","./crystal-tKQVLTB8.js","./shellscript-Yzrsuije.js","./edge-BkV0erSs.js","./elixir-CDX3lj18.js","./elm-DbKCFpqz.js","./erb-BOJIQeun.js","./ruby-BvKwtOVI.js","./haml-B8DHNrY2.js","./graphql-ChdNCCLP.js","./jsx-g9-lgVsj.js","./lua-BbnMAYS6.js","./yaml-Buea-lGh.js","./erlang-DsQrWhSR.js","./markdown-Cvjx9yec.js","./fortran-fixed-form-BZjJHVRy.js","./fortran-free-form-D22FLkUw.js","./fsharp-CXgrBDvD.js","./gdresource-B7Tvp0Sc.js","./gdshader-DkwncUOv.js","./gdscript-DTMYz4Jt.js","./git-commit-F4YmCXRG.js","./diff-D97Zzqfu.js","./git-rebase-r7XF79zn.js","./glimmer-js-Rg0-pVw9.js","./glimmer-ts-U6CK756n.js","./hack-CaT9iCJl.js","./handlebars-BL8al0AC.js","./http-jrhK8wxY.js","./hurl-irOxFIW8.js","./csv-fuZLfV_i.js","./hxml-Bvhsp5Yf.js","./haxe-CzTSHFRz.js","./jinja-4LBKfQ-Z.js","./jison-wvAkD_A8.js","./julia-C8NyazO9.js","./r-DiinP2Uv.js","./latex-BdAV_C_H.js","./tex-CxkMU7Pf.js","./liquid-DYVedYrR.js","./marko-CPi9NSCl.js","./less-B1dDrJ26.js","./mdc-DUICxH0z.js","./nginx-DknmC5AR.js","./nim-CVrawwO9.js","./perl-C0TMdlhV.js","./php-CDn_0X-4.js","./pug-CGlum2m_.js","./qml-3beO22l8.js","./razor-CE9lU5zL.js","./csharp-K5feNrxe.js","./rst-B0xPkSld.js","./cmake-D1j8_8rp.js","./sas-cz2c8ADy.js","./shaderlab-Dg9Lc6iA.js","./hlsl-D3lLCCz7.js","./shellsession-BADoaaVG.js","./soy-Brmx7dQM.js","./sparql-rVzFXLq3.js","./turtle-BsS91CYL.js","./stata-BH5u7GGu.js","./svelte-3Dk4HxPD.js","./templ-W15q3VgB.js","./go-Dn2_MT6a.js","./ts-tags-zn1MmPIZ.js","./twig-CO9l9SDP.js","./vue-DnHKYNfI.js","./vue-html-CChd_i61.js","./vue-vine-8moa0y9V.js","./stylus-BEDo0Tqx.js","./xsl-CtQFsRM5.js","./katex-Cj-o_lxR.css"])))=>i.map(i=>d[i]);
var Hce=Object.defineProperty;var Vce=(e,t,n)=>t in e?Hce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ze=(e,t,n)=>Vce(e,typeof t!="symbol"?t+"":t,n);function qce(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function km(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var y5={exports:{}},Ly={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nO;function Gce(){if(nO)return Ly;nO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,s){var i=null;if(s!==void 0&&(i=""+s),o.key!==void 0&&(i=""+o.key),"key"in o){s={};for(var a in o)a!=="key"&&(s[a]=o[a])}else s=o;return o=s.ref,{$$typeof:e,type:r,key:i,ref:o!==void 0?o:null,props:s}}return Ly.Fragment=t,Ly.jsx=n,Ly.jsxs=n,Ly}var rO;function Wce(){return rO||(rO=1,y5.exports=Gce()),y5.exports}var h=Wce(),v5={exports:{}},ir={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oO;function Yce(){if(oO)return ir;oO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;function g(te){return te===null||typeof te!="object"?null:(te=m&&te[m]||te["@@iterator"],typeof te=="function"?te:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function _(te,se,Q){this.props=te,this.context=se,this.refs=w,this.updater=Q||y}_.prototype.isReactComponent={},_.prototype.setState=function(te,se){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,se,"setState")},_.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function T(){}T.prototype=_.prototype;function k(te,se,Q){this.props=te,this.context=se,this.refs=w,this.updater=Q||y}var M=k.prototype=new T;M.constructor=k,v(M,_.prototype),M.isPureReactComponent=!0;var D=Array.isArray;function I(){}var P={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function U(te,se,Q){var Te=Q.ref;return{$$typeof:e,type:te,key:se,ref:Te!==void 0?Te:null,props:Q}}function j(te,se){return U(te.type,se,te.props)}function H(te){return typeof te=="object"&&te!==null&&te.$$typeof===e}function q(te){var se={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(Q){return se[Q]})}var z=/\/+/g;function Z(te,se){return typeof te=="object"&&te!==null&&te.key!=null?q(""+te.key):se.toString(36)}function X(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(I,I):(te.status="pending",te.then(function(se){te.status==="pending"&&(te.status="fulfilled",te.value=se)},function(se){te.status==="pending"&&(te.status="rejected",te.reason=se)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function J(te,se,Q,Te,ge){var Ce=typeof te;(Ce==="undefined"||Ce==="boolean")&&(te=null);var he=!1;if(te===null)he=!0;else switch(Ce){case"bigint":case"string":case"number":he=!0;break;case"object":switch(te.$$typeof){case e:case t:he=!0;break;case u:return he=te._init,J(he(te._payload),se,Q,Te,ge)}}if(he)return ge=ge(te),he=Te===""?"."+Z(te,0):Te,D(ge)?(Q="",he!=null&&(Q=he.replace(z,"$&/")+"/"),J(ge,se,Q,"",function(Re){return Re})):ge!=null&&(H(ge)&&(ge=j(ge,Q+(ge.key==null||te&&te.key===ge.key?"":(""+ge.key).replace(z,"$&/")+"/")+he)),se.push(ge)),1;he=0;var Fe=Te===""?".":Te+":";if(D(te))for(var Oe=0;Oe<te.length;Oe++)Te=te[Oe],Ce=Fe+Z(Te,Oe),he+=J(Te,se,Q,Ce,ge);else if(Oe=g(te),typeof Oe=="function")for(te=Oe.call(te),Oe=0;!(Te=te.next()).done;)Te=Te.value,Ce=Fe+Z(Te,Oe++),he+=J(Te,se,Q,Ce,ge);else if(Ce==="object"){if(typeof te.then=="function")return J(X(te),se,Q,Te,ge);throw se=String(te),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return he}function ee(te,se,Q){if(te==null)return te;var Te=[],ge=0;return J(te,Te,"","",function(Ce){return se.call(Q,Ce,ge++)}),Te}function re(te){if(te._status===-1){var se=te._result;se=se(),se.then(function(Q){(te._status===0||te._status===-1)&&(te._status=1,te._result=Q)},function(Q){(te._status===0||te._status===-1)&&(te._status=2,te._result=Q)}),te._status===-1&&(te._status=0,te._result=se)}if(te._status===1)return te._result.default;throw te._result}var ie=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)},K={map:ee,forEach:function(te,se,Q){ee(te,function(){se.apply(this,arguments)},Q)},count:function(te){var se=0;return ee(te,function(){se++}),se},toArray:function(te){return ee(te,function(se){return se})||[]},only:function(te){if(!H(te))throw Error("React.Children.only expected to receive a single React element child.");return te}};return ir.Activity=f,ir.Children=K,ir.Component=_,ir.Fragment=n,ir.Profiler=o,ir.PureComponent=k,ir.StrictMode=r,ir.Suspense=l,ir.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ir.__COMPILER_RUNTIME={__proto__:null,c:function(te){return P.H.useMemoCache(te)}},ir.cache=function(te){return function(){return te.apply(null,arguments)}},ir.cacheSignal=function(){return null},ir.cloneElement=function(te,se,Q){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var Te=v({},te.props),ge=te.key;if(se!=null)for(Ce in se.key!==void 0&&(ge=""+se.key),se)!B.call(se,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&se.ref===void 0||(Te[Ce]=se[Ce]);var Ce=arguments.length-2;if(Ce===1)Te.children=Q;else if(1<Ce){for(var he=Array(Ce),Fe=0;Fe<Ce;Fe++)he[Fe]=arguments[Fe+2];Te.children=he}return U(te.type,ge,Te)},ir.createContext=function(te){return te={$$typeof:i,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:s,_context:te},te},ir.createElement=function(te,se,Q){var Te,ge={},Ce=null;if(se!=null)for(Te in se.key!==void 0&&(Ce=""+se.key),se)B.call(se,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(ge[Te]=se[Te]);var he=arguments.length-2;if(he===1)ge.children=Q;else if(1<he){for(var Fe=Array(he),Oe=0;Oe<he;Oe++)Fe[Oe]=arguments[Oe+2];ge.children=Fe}if(te&&te.defaultProps)for(Te in he=te.defaultProps,he)ge[Te]===void 0&&(ge[Te]=he[Te]);return U(te,Ce,ge)},ir.createRef=function(){return{current:null}},ir.forwardRef=function(te){return{$$typeof:a,render:te}},ir.isValidElement=H,ir.lazy=function(te){return{$$typeof:u,_payload:{_status:-1,_result:te},_init:re}},ir.memo=function(te,se){return{$$typeof:c,type:te,compare:se===void 0?null:se}},ir.startTransition=function(te){var se=P.T,Q={};P.T=Q;try{var Te=te(),ge=P.S;ge!==null&&ge(Q,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(I,ie)}catch(Ce){ie(Ce)}finally{se!==null&&Q.types!==null&&(se.types=Q.types),P.T=se}},ir.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ir.use=function(te){return P.H.use(te)},ir.useActionState=function(te,se,Q){return P.H.useActionState(te,se,Q)},ir.useCallback=function(te,se){return P.H.useCallback(te,se)},ir.useContext=function(te){return P.H.useContext(te)},ir.useDebugValue=function(){},ir.useDeferredValue=function(te,se){return P.H.useDeferredValue(te,se)},ir.useEffect=function(te,se){return P.H.useEffect(te,se)},ir.useEffectEvent=function(te){return P.H.useEffectEvent(te)},ir.useId=function(){return P.H.useId()},ir.useImperativeHandle=function(te,se,Q){return P.H.useImperativeHandle(te,se,Q)},ir.useInsertionEffect=function(te,se){return P.H.useInsertionEffect(te,se)},ir.useLayoutEffect=function(te,se){return P.H.useLayoutEffect(te,se)},ir.useMemo=function(te,se){return P.H.useMemo(te,se)},ir.useOptimistic=function(te,se){return P.H.useOptimistic(te,se)},ir.useReducer=function(te,se,Q){return P.H.useReducer(te,se,Q)},ir.useRef=function(te){return P.H.useRef(te)},ir.useState=function(te){return P.H.useState(te)},ir.useSyncExternalStore=function(te,se,Q){return P.H.useSyncExternalStore(te,se,Q)},ir.useTransition=function(){return P.H.useTransition()},ir.version="19.2.0",ir}var sO;function sw(){return sO||(sO=1,v5.exports=Yce()),v5.exports}var x=sw();const Me=km(x),XI=qce({__proto__:null,default:Me},[x]);var x5={exports:{}},$y={},w5={exports:{}},E5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iO;function Kce(){return iO||(iO=1,(function(e){function t(J,ee){var re=J.length;J.push(ee);e:for(;0<re;){var ie=re-1>>>1,K=J[ie];if(0<o(K,ee))J[ie]=ee,J[re]=K,re=ie;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ee=J[0],re=J.pop();if(re!==ee){J[0]=re;e:for(var ie=0,K=J.length,te=K>>>1;ie<te;){var se=2*(ie+1)-1,Q=J[se],Te=se+1,ge=J[Te];if(0>o(Q,re))Te<K&&0>o(ge,Q)?(J[ie]=ge,J[Te]=re,ie=Te):(J[ie]=Q,J[se]=re,ie=se);else if(Te<K&&0>o(ge,re))J[ie]=ge,J[Te]=re,ie=Te;else break e}}return ee}function o(J,ee){var re=J.sortIndex-ee.sortIndex;return re!==0?re:J.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,f=null,m=3,g=!1,y=!1,v=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function M(J){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=J)r(c),ee.sortIndex=ee.expirationTime,t(l,ee);else break;ee=n(c)}}function D(J){if(v=!1,M(J),!y)if(n(l)!==null)y=!0,I||(I=!0,q());else{var ee=n(c);ee!==null&&X(D,ee.startTime-J)}}var I=!1,P=-1,B=5,U=-1;function j(){return w?!0:!(e.unstable_now()-U<B)}function H(){if(w=!1,I){var J=e.unstable_now();U=J;var ee=!0;try{e:{y=!1,v&&(v=!1,T(P),P=-1),g=!0;var re=m;try{t:{for(M(J),f=n(l);f!==null&&!(f.expirationTime>J&&j());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,m=f.priorityLevel;var K=ie(f.expirationTime<=J);if(J=e.unstable_now(),typeof K=="function"){f.callback=K,M(J),ee=!0;break t}f===n(l)&&r(l),M(J)}else r(l);f=n(l)}if(f!==null)ee=!0;else{var te=n(c);te!==null&&X(D,te.startTime-J),ee=!1}}break e}finally{f=null,m=re,g=!1}ee=void 0}}finally{ee?q():I=!1}}}var q;if(typeof k=="function")q=function(){k(H)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Z=z.port2;z.port1.onmessage=H,q=function(){Z.postMessage(null)}}else q=function(){_(H,0)};function X(J,ee){P=_(function(){J(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(J){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var re=m;m=ee;try{return J()}finally{m=re}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(J,ee){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var re=m;m=J;try{return ee()}finally{m=re}},e.unstable_scheduleCallback=function(J,ee,re){var ie=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ie+re:ie):re=ie,J){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=re+K,J={id:u++,callback:ee,priorityLevel:J,startTime:re,expirationTime:K,sortIndex:-1},re>ie?(J.sortIndex=re,t(c,J),n(l)===null&&J===n(c)&&(v?(T(P),P=-1):v=!0,X(D,re-ie))):(J.sortIndex=K,t(l,J),y||g||(y=!0,I||(I=!0,q()))),J},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(J){var ee=m;return function(){var re=m;m=ee;try{return J.apply(this,arguments)}finally{m=re}}}})(E5)),E5}var aO;function Zce(){return aO||(aO=1,w5.exports=Kce()),w5.exports}var _5={exports:{}},pa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lO;function Jce(){if(lO)return pa;lO=1;var e=sw();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function s(l,c,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:f==null?null:""+f,children:l,containerInfo:c,implementation:u}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return pa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,pa.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return s(l,c,null,u)},pa.flushSync=function(l){var c=i.T,u=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=c,r.p=u,r.d.f()}},pa.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},pa.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},pa.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:m,fetchPriority:g}):u==="script"&&r.d.X(l,{crossOrigin:f,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},pa.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},pa.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},pa.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},pa.requestFormReset=function(l){r.d.r(l)},pa.unstable_batchedUpdates=function(l,c){return l(c)},pa.useFormState=function(l,c,u){return i.H.useFormState(l,c,u)},pa.useFormStatus=function(){return i.H.useHostTransitionStatus()},pa.version="19.2.0",pa}var cO;function FV(){if(cO)return _5.exports;cO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),_5.exports=Jce(),_5.exports}var uO;function Xce(){if(uO)return $y;uO=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=Zce(),t=sw(),n=FV();function r(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function s(d){var p=d,b=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(b=p.return),d=p.return;while(d)}return p.tag===3?b:null}function i(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function a(d){if(d.tag===31){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function l(d){if(s(d)!==d)throw Error(r(188))}function c(d){var p=d.alternate;if(!p){if(p=s(d),p===null)throw Error(r(188));return p!==d?null:d}for(var b=d,E=p;;){var A=b.return;if(A===null)break;var R=A.alternate;if(R===null){if(E=A.return,E!==null){b=E;continue}break}if(A.child===R.child){for(R=A.child;R;){if(R===b)return l(A),d;if(R===E)return l(A),p;R=R.sibling}throw Error(r(188))}if(b.return!==E.return)b=A,E=R;else{for(var Y=!1,ae=A.child;ae;){if(ae===b){Y=!0,b=A,E=R;break}if(ae===E){Y=!0,E=A,b=R;break}ae=ae.sibling}if(!Y){for(ae=R.child;ae;){if(ae===b){Y=!0,b=R,E=A;break}if(ae===E){Y=!0,E=R,b=A;break}ae=ae.sibling}if(!Y)throw Error(r(189))}}if(b.alternate!==E)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?d:p}function u(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d;for(d=d.child;d!==null;){if(p=u(d),p!==null)return p;d=d.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),k=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function q(d){return d===null||typeof d!="object"?null:(d=H&&d[H]||d["@@iterator"],typeof d=="function"?d:null)}var z=Symbol.for("react.client.reference");function Z(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===z?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case v:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case I:return"SuspenseList";case U:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case y:return"Portal";case k:return d.displayName||"Context";case T:return(d._context.displayName||"Context")+".Consumer";case M:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case P:return p=d.displayName||null,p!==null?p:Z(d.type)||"Memo";case B:p=d._payload,d=d._init;try{return Z(d(p))}catch{}}return null}var X=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ie=[],K=-1;function te(d){return{current:d}}function se(d){0>K||(d.current=ie[K],ie[K]=null,K--)}function Q(d,p){K++,ie[K]=d.current,d.current=p}var Te=te(null),ge=te(null),Ce=te(null),he=te(null);function Fe(d,p){switch(Q(Ce,p),Q(ge,d),Q(Te,null),p.nodeType){case 9:case 11:d=(d=p.documentElement)&&(d=d.namespaceURI)?TD(d):0;break;default:if(d=p.tagName,p=p.namespaceURI)p=TD(p),d=CD(p,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}se(Te),Q(Te,d)}function Oe(){se(Te),se(ge),se(Ce)}function Re(d){d.memoizedState!==null&&Q(he,d);var p=Te.current,b=CD(p,d.type);p!==b&&(Q(ge,d),Q(Te,b))}function nt(d){ge.current===d&&(se(Te),se(ge)),he.current===d&&(se(he),My._currentValue=re)}var ue,et;function ut(d){if(ue===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);ue=p&&p[1]||"",et=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+d+et}var Yt=!1;function Ht(d,p){if(!d||Yt)return"";Yt=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Xe){var Ke=Xe}Reflect.construct(d,[],dt)}else{try{dt.call()}catch(Xe){Ke=Xe}d.call(dt.prototype)}}else{try{throw Error()}catch(Xe){Ke=Xe}(dt=d())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Xe){if(Xe&&Ke&&typeof Xe.stack=="string")return[Xe.stack,Ke.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=E.DetermineComponentFrameRoot(),Y=R[0],ae=R[1];if(Y&&ae){var ke=Y.split(`
`),Ye=ae.split(`
`);for(A=E=0;E<ke.length&&!ke[E].includes("DetermineComponentFrameRoot");)E++;for(;A<Ye.length&&!Ye[A].includes("DetermineComponentFrameRoot");)A++;if(E===ke.length||A===Ye.length)for(E=ke.length-1,A=Ye.length-1;1<=E&&0<=A&&ke[E]!==Ye[A];)A--;for(;1<=E&&0<=A;E--,A--)if(ke[E]!==Ye[A]){if(E!==1||A!==1)do if(E--,A--,0>A||ke[E]!==Ye[A]){var ot=`
`+ke[E].replace(" at new "," at ");return d.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",d.displayName)),ot}while(1<=E&&0<=A);break}}}finally{Yt=!1,Error.prepareStackTrace=b}return(b=d?d.displayName||d.name:"")?ut(b):""}function Pt(d,p){switch(d.tag){case 26:case 27:case 5:return ut(d.type);case 16:return ut("Lazy");case 13:return d.child!==p&&p!==null?ut("Suspense Fallback"):ut("Suspense");case 19:return ut("SuspenseList");case 0:case 15:return Ht(d.type,!1);case 11:return Ht(d.type.render,!1);case 1:return Ht(d.type,!0);case 31:return ut("Activity");default:return""}}function tn(d){try{var p="",b=null;do p+=Pt(d,b),b=d,d=d.return;while(d);return p}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var vt=Object.prototype.hasOwnProperty,me=e.unstable_scheduleCallback,Ne=e.unstable_cancelCallback,$e=e.unstable_shouldYield,Je=e.unstable_requestPaint,Le=e.unstable_now,Ve=e.unstable_getCurrentPriorityLevel,_e=e.unstable_ImmediatePriority,W=e.unstable_UserBlockingPriority,L=e.unstable_NormalPriority,F=e.unstable_LowPriority,ce=e.unstable_IdlePriority,we=e.log,ze=e.unstable_setDisableYieldValue,Be=null,ct=null;function ln(d){if(typeof we=="function"&&ze(d),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(Be,d)}catch{}}var jt=Math.clz32?Math.clz32:Wa,fn=Math.log,an=Math.LN2;function Wa(d){return d>>>=0,d===0?32:31-(fn(d)/an|0)|0}var An=256,er=262144,wt=4194304;function sn(d){var p=d&42;if(p!==0)return p;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function ye(d,p,b){var E=d.pendingLanes;if(E===0)return 0;var A=0,R=d.suspendedLanes,Y=d.pingedLanes;d=d.warmLanes;var ae=E&134217727;return ae!==0?(E=ae&~R,E!==0?A=sn(E):(Y&=ae,Y!==0?A=sn(Y):b||(b=ae&~d,b!==0&&(A=sn(b))))):(ae=E&~R,ae!==0?A=sn(ae):Y!==0?A=sn(Y):b||(b=E&~d,b!==0&&(A=sn(b)))),A===0?0:p!==0&&p!==A&&(p&R)===0&&(R=A&-A,b=p&-p,R>=b||R===32&&(b&4194048)!==0)?p:A}function Ue(d,p){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&p)===0}function ht(d,p){switch(d){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jt(){var d=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),d}function mr(d){for(var p=[],b=0;31>b;b++)p.push(d);return p}function Kn(d,p){d.pendingLanes|=p,p!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Rt(d,p,b,E,A,R){var Y=d.pendingLanes;d.pendingLanes=b,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=b,d.entangledLanes&=b,d.errorRecoveryDisabledLanes&=b,d.shellSuspendCounter=0;var ae=d.entanglements,ke=d.expirationTimes,Ye=d.hiddenUpdates;for(b=Y&~b;0<b;){var ot=31-jt(b),dt=1<<ot;ae[ot]=0,ke[ot]=-1;var Ke=Ye[ot];if(Ke!==null)for(Ye[ot]=null,ot=0;ot<Ke.length;ot++){var Xe=Ke[ot];Xe!==null&&(Xe.lane&=-536870913)}b&=~dt}E!==0&&zt(d,E,0),R!==0&&A===0&&d.tag!==0&&(d.suspendedLanes|=R&~(Y&~p))}function zt(d,p,b){d.pendingLanes|=p,d.suspendedLanes&=~p;var E=31-jt(p);d.entangledLanes|=p,d.entanglements[E]=d.entanglements[E]|1073741824|b&261930}function hn(d,p){var b=d.entangledLanes|=p;for(d=d.entanglements;b;){var E=31-jt(b),A=1<<E;A&p|d[E]&p&&(d[E]|=p),b&=~A}}function In(d,p){var b=p&-p;return b=(b&42)!==0?1:Lr(b),(b&(d.suspendedLanes|p))!==0?0:b}function Lr(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function xs(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Go(){var d=ee.p;return d!==0?d:(d=window.event,d===void 0?32:KD(d.type))}function ws(d,p){var b=ee.p;try{return ee.p=d,p()}finally{ee.p=b}}var Jr=Math.random().toString(36).slice(2),gr="__reactFiber$"+Jr,Os="__reactProps$"+Jr,it="__reactContainer$"+Jr,rt="__reactEvents$"+Jr,pt="__reactListeners$"+Jr,Vt="__reactHandles$"+Jr,Ur="__reactResources$"+Jr,Ao="__reactMarker$"+Jr;function Zn(d){delete d[gr],delete d[Os],delete d[rt],delete d[pt],delete d[Vt]}function Hr(d){var p=d[gr];if(p)return p;for(var b=d.parentNode;b;){if(p=b[it]||b[gr]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(d=DD(d);d!==null;){if(b=d[gr])return b;d=DD(d)}return p}d=b,b=d.parentNode}return null}function ua(d){if(d=d[gr]||d[it]){var p=d.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return d}return null}function kt(d){var p=d.tag;if(p===5||p===26||p===27||p===6)return d.stateNode;throw Error(r(33))}function Fn(d){var p=d[Ur];return p||(p=d[Ur]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function mt(d){d[Ao]=!0}var Xr=new Set,Ps={};function rr(d,p){ft(d,p),ft(d+"Capture",p)}function ft(d,p){for(Ps[d]=p,d=0;d<p.length;d++)Xr.add(p[d])}var Nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pn={},wn={};function kr(d){return vt.call(wn,d)?!0:vt.call(pn,d)?!1:Nt.test(d)?wn[d]=!0:(pn[d]=!0,!1)}function Wo(d,p,b){if(kr(p))if(b===null)d.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":d.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){d.removeAttribute(p);return}}d.setAttribute(p,""+b)}}function hs(d,p,b){if(b===null)d.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(p);return}d.setAttribute(p,""+b)}}function Zs(d,p,b,E){if(E===null)d.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(b);return}d.setAttributeNS(p,b,""+E)}}function zr(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Es(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Vm(d,p,b){var E=Object.getOwnPropertyDescriptor(d.constructor.prototype,p);if(!d.hasOwnProperty(p)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var A=E.get,R=E.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return A.call(this)},set:function(Y){b=""+Y,R.call(this,Y)}}),Object.defineProperty(d,p,{enumerable:E.enumerable}),{getValue:function(){return b},setValue:function(Y){b=""+Y},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function Ru(d){if(!d._valueTracker){var p=Es(d)?"checked":"value";d._valueTracker=Vm(d,p,""+d[p])}}function X0(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var b=p.getValue(),E="";return d&&(E=Es(d)?d.checked?"true":"false":d.value),d=E,d!==b?(p.setValue(d),!0):!1}function Od(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var lh=/[\n"\\]/g;function Yi(d){return d.replace(lh,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function _l(d,p,b,E,A,R,Y,ae){d.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?d.type=Y:d.removeAttribute("type"),p!=null?Y==="number"?(p===0&&d.value===""||d.value!=p)&&(d.value=""+zr(p)):d.value!==""+zr(p)&&(d.value=""+zr(p)):Y!=="submit"&&Y!=="reset"||d.removeAttribute("value"),p!=null?jc(d,Y,zr(p)):b!=null?jc(d,Y,zr(b)):E!=null&&d.removeAttribute("value"),A==null&&R!=null&&(d.defaultChecked=!!R),A!=null&&(d.checked=A&&typeof A!="function"&&typeof A!="symbol"),ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?d.name=""+zr(ae):d.removeAttribute("name")}function oc(d,p,b,E,A,R,Y,ae){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(d.type=R),p!=null||b!=null){if(!(R!=="submit"&&R!=="reset"||p!=null)){Ru(d);return}b=b!=null?""+zr(b):"",p=p!=null?""+zr(p):b,ae||p===d.value||(d.value=p),d.defaultValue=p}E=E??A,E=typeof E!="function"&&typeof E!="symbol"&&!!E,d.checked=ae?d.checked:!!E,d.defaultChecked=!!E,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(d.name=Y),Ru(d)}function jc(d,p,b){p==="number"&&Od(d.ownerDocument)===d||d.defaultValue===""+b||(d.defaultValue=""+b)}function Js(d,p,b,E){if(d=d.options,p){p={};for(var A=0;A<b.length;A++)p["$"+b[A]]=!0;for(b=0;b<d.length;b++)A=p.hasOwnProperty("$"+d[b].value),d[b].selected!==A&&(d[b].selected=A),A&&E&&(d[b].defaultSelected=!0)}else{for(b=""+zr(b),p=null,A=0;A<d.length;A++){if(d[A].value===b){d[A].selected=!0,E&&(d[A].defaultSelected=!0);return}p!==null||d[A].disabled||(p=d[A])}p!==null&&(p.selected=!0)}}function Pd(d,p,b){if(p!=null&&(p=""+zr(p),p!==d.value&&(d.value=p),b==null)){d.defaultValue!==p&&(d.defaultValue=p);return}d.defaultValue=b!=null?""+zr(b):""}function ch(d,p,b,E){if(p==null){if(E!=null){if(b!=null)throw Error(r(92));if(X(E)){if(1<E.length)throw Error(r(93));E=E[0]}b=E}b==null&&(b=""),p=b}b=zr(p),d.defaultValue=b,E=d.textContent,E===b&&E!==""&&E!==null&&(d.value=E),Ru(d)}function On(d,p){if(p){var b=d.firstChild;if(b&&b===d.lastChild&&b.nodeType===3){b.nodeValue=p;return}}d.textContent=p}var Q0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ps(d,p,b){var E=p.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?E?d.setProperty(p,""):p==="float"?d.cssFloat="":d[p]="":E?d.setProperty(p,b):typeof b!="number"||b===0||Q0.has(p)?p==="float"?d.cssFloat=b:d[p]=(""+b).trim():d[p]=b+"px"}function Wr(d,p,b){if(p!=null&&typeof p!="object")throw Error(r(62));if(d=d.style,b!=null){for(var E in b)!b.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?d.setProperty(E,""):E==="float"?d.cssFloat="":d[E]="");for(var A in p)E=p[A],p.hasOwnProperty(A)&&b[A]!==E&&ps(d,A,E)}else for(var R in p)p.hasOwnProperty(R)&&ps(d,R,p[R])}function Mu(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Du=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sl(d){return Du.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}function $t(){}var Kt=null;function Jn(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var ur=null,zo=null;function da(d){var p=ua(d);if(p&&(d=p.stateNode)){var b=d[Os]||null;e:switch(d=p.stateNode,p.type){case"input":if(_l(d,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),p=b.name,b.type==="radio"&&p!=null){for(b=d;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Yi(""+p)+'"][type="radio"]'),p=0;p<b.length;p++){var E=b[p];if(E!==d&&E.form===d.form){var A=E[Os]||null;if(!A)throw Error(r(90));_l(E,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(p=0;p<b.length;p++)E=b[p],E.form===d.form&&X0(E)}break e;case"textarea":Pd(d,b.value,b.defaultValue);break e;case"select":p=b.value,p!=null&&Js(d,!!b.multiple,p,!1)}}}var uh=!1;function dh(d,p,b){if(uh)return d(p,b);uh=!0;try{var E=d(p);return E}finally{if(uh=!1,(ur!==null||zo!==null)&&(OE(),ur&&(p=ur,d=zo,zo=ur=null,da(p),d)))for(p=0;p<d.length;p++)da(d[p])}}function fh(d,p){var b=d.stateNode;if(b===null)return null;var E=b[Os]||null;if(E===null)return null;b=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(d=d.type,E=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!E;break e;default:d=!1}if(d)return null;if(b&&typeof b!="function")throw Error(r(231,p,typeof b));return b}var Tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qm=!1;if(Tl)try{var ep={};Object.defineProperty(ep,"passive",{get:function(){qm=!0}}),window.addEventListener("test",ep,ep),window.removeEventListener("test",ep,ep)}catch{qm=!1}var Cl=null,tp=null,kl=null;function Al(){if(kl)return kl;var d,p=tp,b=p.length,E,A="value"in Cl?Cl.value:Cl.textContent,R=A.length;for(d=0;d<b&&p[d]===A[d];d++);var Y=b-d;for(E=1;E<=Y&&p[b-E]===A[R-E];E++);return kl=A.slice(d,1<E?1-E:void 0)}function hh(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function vi(){return!0}function np(){return!1}function Ta(d){function p(b,E,A,R,Y){this._reactName=b,this._targetInst=A,this.type=E,this.nativeEvent=R,this.target=Y,this.currentTarget=null;for(var ae in d)d.hasOwnProperty(ae)&&(b=d[ae],this[ae]=b?b(R):R[ae]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?vi:np,this.isPropagationStopped=np,this}return f(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=vi)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=vi)},persist:function(){},isPersistent:vi}),p}var Ld={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rp=Ta(Ld),ph=f({},Ld,{view:0,detail:0}),i3=Ta(ph),op,Nl,$d,de=f({},ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ou,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==$d&&($d&&d.type==="mousemove"?(op=d.screenX-$d.screenX,Nl=d.screenY-$d.screenY):Nl=op=0,$d=d),op)},movementY:function(d){return"movementY"in d?d.movementY:Nl}}),Xw=Ta(de),a3=f({},de,{dataTransfer:0}),ts=Ta(a3),Gm=f({},ph,{relatedTarget:0}),Uc=Ta(Gm),Hc=f({},Ld,{animationName:0,elapsedTime:0,pseudoElement:0}),l3=Ta(Hc),c3=f({},Ld,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Qw=Ta(c3),u3=f({},Ld,{data:0}),Wm=Ta(u3),d3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sp(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=Vb[d])?!!p[d]:!1}function Ou(){return sp}var qb=f({},ph,{key:function(d){if(d.key){var p=d3[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=hh(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Hb[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ou,charCode:function(d){return d.type==="keypress"?hh(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?hh(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Fd=Ta(qb),ip=f({},de,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eE=Ta(ip),Ym=f({},ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ou}),Ls=Ta(Ym),f3=f({},Ld,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xs=Ta(f3),Km=f({},de,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),tE=Ta(Km),Bd=f({},Ld,{newState:0,oldState:0}),Zm=Ta(Bd),nE=[9,13,27,32],Jm=Tl&&"CompositionEvent"in window,Qs=null;Tl&&"documentMode"in document&&(Qs=document.documentMode);var _s=Tl&&"TextEvent"in window&&!Qs,mh=Tl&&(!Jm||Qs&&8<Qs&&11>=Qs),Il=" ",gh=!1;function zd(d,p){switch(d){case"keyup":return nE.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ap(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var sc=!1;function xi(d,p){switch(d){case"compositionend":return ap(p);case"keypress":return p.which!==32?null:(gh=!0,Il);case"textInput":return d=p.data,d===Il&&gh?null:d;default:return null}}function rE(d,p){if(sc)return d==="compositionend"||!Jm&&zd(d,p)?(d=Al(),kl=tp=Cl=null,sc=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return mh&&p.locale!=="ko"?null:p.data;default:return null}}var oE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xm(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!oE[d.type]:p==="textarea"}function Bn(d,p,b,E){ur?zo?zo.push(E):zo=[E]:ur=E,p=jE(p,"onChange"),0<p.length&&(b=new rp("onChange","change",null,b,E),d.push({event:b,listeners:p}))}var $s=null,Vc=null;function sE(d){vD(d,0)}function Qm(d){var p=kt(d);if(X0(p))return d}function iE(d,p){if(d==="change")return p}var Gb=!1;if(Tl){var Wb;if(Tl){var eg="oninput"in document;if(!eg){var aE=document.createElement("div");aE.setAttribute("oninput","return;"),eg=typeof aE.oninput=="function"}Wb=eg}else Wb=!1;Gb=Wb&&(!document.documentMode||9<document.documentMode)}function tg(){$s&&($s.detachEvent("onpropertychange",Yb),Vc=$s=null)}function Yb(d){if(d.propertyName==="value"&&Qm(Vc)){var p=[];Bn(p,Vc,d,Jn(d)),dh(sE,p)}}function Kb(d,p,b){d==="focusin"?(tg(),$s=p,Vc=b,$s.attachEvent("onpropertychange",Yb)):d==="focusout"&&tg()}function jd(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Qm(Vc)}function h3(d,p){if(d==="click")return Qm(p)}function p3(d,p){if(d==="input"||d==="change")return Qm(p)}function m3(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var Ca=typeof Object.is=="function"?Object.is:m3;function lp(d,p){if(Ca(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var b=Object.keys(d),E=Object.keys(p);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var A=b[E];if(!vt.call(p,A)||!Ca(d[A],p[A]))return!1}return!0}function ng(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function rg(d,p){var b=ng(d);d=0;for(var E;b;){if(b.nodeType===3){if(E=d+b.textContent.length,d<=p&&E>=p)return{node:b,offset:p-d};d=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=ng(b)}}function lE(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?lE(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function bh(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var p=Od(d.document);p instanceof d.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)d=p.contentWindow;else break;p=Od(d.document)}return p}function cp(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}var og=Tl&&"documentMode"in document&&11>=document.documentMode,Sr=null,Ya=null,up=null,dp=!1;function Ka(d,p,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;dp||Sr==null||Sr!==Od(E)||(E=Sr,"selectionStart"in E&&cp(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),up&&lp(up,E)||(up=E,E=jE(Ya,"onSelect"),0<E.length&&(p=new rp("onSelect","select",null,p,b),d.push({event:p,listeners:E}),p.target=Sr)))}function wi(d,p){var b={};return b[d.toLowerCase()]=p.toLowerCase(),b["Webkit"+d]="webkit"+p,b["Moz"+d]="moz"+p,b}var Pu={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionrun:wi("Transition","TransitionRun"),transitionstart:wi("Transition","TransitionStart"),transitioncancel:wi("Transition","TransitionCancel"),transitionend:wi("Transition","TransitionEnd")},fp={},ka={};Tl&&(ka=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function Za(d){if(fp[d])return fp[d];if(!Pu[d])return d;var p=Pu[d],b;for(b in p)if(p.hasOwnProperty(b)&&b in ka)return fp[d]=p[b];return d}var Zb=Za("animationend"),Li=Za("animationiteration"),Jb=Za("animationstart"),cE=Za("transitionrun"),g3=Za("transitionstart"),uE=Za("transitioncancel"),dE=Za("transitionend"),yh=new Map,sg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sg.push("scrollEnd");function Aa(d,p){yh.set(d,p),rr(p,[d])}var Ud=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},Ki=[],vh=0,hp=0;function xh(){for(var d=vh,p=hp=vh=0;p<d;){var b=Ki[p];Ki[p++]=null;var E=Ki[p];Ki[p++]=null;var A=Ki[p];Ki[p++]=null;var R=Ki[p];if(Ki[p++]=null,E!==null&&A!==null){var Y=E.pending;Y===null?A.next=A:(A.next=Y.next,Y.next=A),E.pending=A}R!==0&&Xb(b,A,R)}}function pp(d,p,b,E){Ki[vh++]=d,Ki[vh++]=p,Ki[vh++]=b,Ki[vh++]=E,hp|=E,d.lanes|=E,d=d.alternate,d!==null&&(d.lanes|=E)}function mp(d,p,b,E){return pp(d,p,b,E),ig(d)}function qc(d,p){return pp(d,null,null,p),ig(d)}function Xb(d,p,b){d.lanes|=b;var E=d.alternate;E!==null&&(E.lanes|=b);for(var A=!1,R=d.return;R!==null;)R.childLanes|=b,E=R.alternate,E!==null&&(E.childLanes|=b),R.tag===22&&(d=R.stateNode,d===null||d._visibility&1||(A=!0)),d=R,R=R.return;return d.tag===3?(R=d.stateNode,A&&p!==null&&(A=31-jt(b),d=R.hiddenUpdates,E=d[A],E===null?d[A]=[p]:E.push(p),p.lane=b|536870912),R):null}function ig(d){if(50<Ty)throw Ty=0,U3=null,Error(r(185));for(var p=d.return;p!==null;)d=p,p=d.return;return d.tag===3?d.stateNode:null}var Zi={};function ag(d,p,b,E){this.tag=d,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(d,p,b,E){return new ag(d,p,b,E)}function lg(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Rl(d,p){var b=d.alternate;return b===null?(b=Fs(d.tag,p,d.key,d.mode),b.elementType=d.elementType,b.type=d.type,b.stateNode=d.stateNode,b.alternate=d,d.alternate=b):(b.pendingProps=p,b.type=d.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=d.flags&65011712,b.childLanes=d.childLanes,b.lanes=d.lanes,b.child=d.child,b.memoizedProps=d.memoizedProps,b.memoizedState=d.memoizedState,b.updateQueue=d.updateQueue,p=d.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=d.sibling,b.index=d.index,b.ref=d.ref,b.refCleanup=d.refCleanup,b}function fE(d,p){d.flags&=65011714;var b=d.alternate;return b===null?(d.childLanes=0,d.lanes=p,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=b.childLanes,d.lanes=b.lanes,d.child=b.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=b.memoizedProps,d.memoizedState=b.memoizedState,d.updateQueue=b.updateQueue,d.type=b.type,p=b.dependencies,d.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),d}function Ml(d,p,b,E,A,R){var Y=0;if(E=d,typeof d=="function")lg(d)&&(Y=1);else if(typeof d=="string")Y=Rce(d,b,Te.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case U:return d=Fs(31,b,p,A),d.elementType=U,d.lanes=R,d;case v:return Lu(b.children,A,R,p);case w:Y=8,A|=24;break;case _:return d=Fs(12,b,p,A|2),d.elementType=_,d.lanes=R,d;case D:return d=Fs(13,b,p,A),d.elementType=D,d.lanes=R,d;case I:return d=Fs(19,b,p,A),d.elementType=I,d.lanes=R,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case k:Y=10;break e;case T:Y=9;break e;case M:Y=11;break e;case P:Y=14;break e;case B:Y=16,E=null;break e}Y=29,b=Error(r(130,d===null?"null":typeof d,"")),E=null}return p=Fs(Y,b,p,A),p.elementType=d,p.type=E,p.lanes=R,p}function Lu(d,p,b,E){return d=Fs(7,d,E,p),d.lanes=b,d}function wh(d,p,b){return d=Fs(6,d,null,p),d.lanes=b,d}function Qb(d){var p=Fs(18,null,null,0);return p.stateNode=d,p}function cg(d,p,b){return p=Fs(4,d.children!==null?d.children:[],d.key,p),p.lanes=b,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}var ey=new WeakMap;function fa(d,p){if(typeof d=="object"&&d!==null){var b=ey.get(d);return b!==void 0?b:(p={value:d,source:p,stack:tn(p)},ey.set(d,p),p)}return{value:d,source:p,stack:tn(p)}}var oi=[],ic=0,Gc=null,Eh=0,Dl=[],po=0,Ja=null,Bs=1,Ol="";function Ss(d,p){oi[ic++]=Eh,oi[ic++]=Gc,Gc=d,Eh=p}function hE(d,p,b){Dl[po++]=Bs,Dl[po++]=Ol,Dl[po++]=Ja,Ja=d;var E=Bs;d=Ol;var A=32-jt(E)-1;E&=~(1<<A),b+=1;var R=32-jt(p)+A;if(30<R){var Y=A-A%5;R=(E&(1<<Y)-1).toString(32),E>>=Y,A-=Y,Bs=1<<32-jt(p)+A|b<<A|E,Ol=R+d}else Bs=1<<R|b<<A|E,Ol=d}function Hd(d){d.return!==null&&(Ss(d,1),hE(d,1,0))}function $i(d){for(;d===Gc;)Gc=oi[--ic],oi[ic]=null,Eh=oi[--ic],oi[ic]=null;for(;d===Ja;)Ja=Dl[--po],Dl[po]=null,Ol=Dl[--po],Dl[po]=null,Bs=Dl[--po],Dl[po]=null}function ug(d,p){Dl[po++]=Bs,Dl[po++]=Ol,Dl[po++]=Ja,Bs=p.id,Ol=p.overflow,Ja=d}var ns=null,lo=null,Mr=!1,co=null,No=!1,ac=Error(r(519));function Wc(d){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gp(fa(p,d)),ac}function Xn(d){var p=d.stateNode,b=d.type,E=d.memoizedProps;switch(p[gr]=d,p[Os]=E,b){case"dialog":Or("cancel",p),Or("close",p);break;case"iframe":case"object":case"embed":Or("load",p);break;case"video":case"audio":for(b=0;b<ky.length;b++)Or(ky[b],p);break;case"source":Or("error",p);break;case"img":case"image":case"link":Or("error",p),Or("load",p);break;case"details":Or("toggle",p);break;case"input":Or("invalid",p),oc(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":Or("invalid",p);break;case"textarea":Or("invalid",p),ch(p,E.value,E.defaultValue,E.children)}b=E.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||p.textContent===""+b||E.suppressHydrationWarning===!0||_D(p.textContent,b)?(E.popover!=null&&(Or("beforetoggle",p),Or("toggle",p)),E.onScroll!=null&&Or("scroll",p),E.onScrollEnd!=null&&Or("scrollend",p),E.onClick!=null&&(p.onclick=$t),p=!0):p=!1,p||Wc(d,!0)}function rs(d){for(ns=d.return;ns;)switch(ns.tag){case 5:case 31:case 13:No=!1;return;case 27:case 3:No=!0;return;default:ns=ns.return}}function Tn(d){if(d!==ns)return!1;if(!Mr)return rs(d),Mr=!0,!1;var p=d.tag,b;if((b=p!==3&&p!==27)&&((b=p===5)&&(b=d.type,b=!(b!=="form"&&b!=="button")||r5(d.type,d.memoizedProps)),b=!b),b&&lo&&Wc(d),rs(d),p===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));lo=MD(d)}else if(p===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));lo=MD(d)}else p===27?(p=lo,Bh(d.type)?(d=l5,l5=null,lo=d):lo=p):lo=ns?hc(d.stateNode.nextSibling):null;return!0}function $u(){lo=ns=null,Mr=!1}function ty(){var d=co;return d!==null&&(ol===null?ol=d:ol.push.apply(ol,d),co=null),d}function gp(d){co===null?co=[d]:co.push(d)}var dg=te(null),Pl=null,ha=null;function Fu(d,p,b){Q(dg,p._currentValue),p._currentValue=b}function Yc(d){d._currentValue=dg.current,se(dg)}function ny(d,p,b){for(;d!==null;){var E=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),d===b)break;d=d.return}}function fg(d,p,b,E){var A=d.child;for(A!==null&&(A.return=d);A!==null;){var R=A.dependencies;if(R!==null){var Y=A.child;R=R.firstContext;e:for(;R!==null;){var ae=R;R=A;for(var ke=0;ke<p.length;ke++)if(ae.context===p[ke]){R.lanes|=b,ae=R.alternate,ae!==null&&(ae.lanes|=b),ny(R.return,b,d),E||(Y=null);break e}R=ae.next}}else if(A.tag===18){if(Y=A.return,Y===null)throw Error(r(341));Y.lanes|=b,R=Y.alternate,R!==null&&(R.lanes|=b),ny(Y,b,d),Y=null}else Y=A.child;if(Y!==null)Y.return=A;else for(Y=A;Y!==null;){if(Y===d){Y=null;break}if(A=Y.sibling,A!==null){A.return=Y.return,Y=A;break}Y=Y.return}A=Y}}function _h(d,p,b,E){d=null;for(var A=p,R=!1;A!==null;){if(!R){if((A.flags&524288)!==0)R=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var Y=A.alternate;if(Y===null)throw Error(r(387));if(Y=Y.memoizedProps,Y!==null){var ae=A.type;Ca(A.pendingProps.value,Y.value)||(d!==null?d.push(ae):d=[ae])}}else if(A===he.current){if(Y=A.alternate,Y===null)throw Error(r(387));Y.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(d!==null?d.push(My):d=[My])}A=A.return}d!==null&&fg(p,d,b,E),p.flags|=262144}function hg(d){for(d=d.firstContext;d!==null;){if(!Ca(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function Vd(d){Pl=d,ha=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function Ei(d){return pE(Pl,d)}function Sh(d,p){return Pl===null&&Vd(d),pE(d,p)}function pE(d,p){var b=p._currentValue;if(p={context:p,memoizedValue:b,next:null},ha===null){if(d===null)throw Error(r(308));ha=p,d.dependencies={lanes:0,firstContext:p},d.flags|=524288}else ha=ha.next=p;return b}var bp=typeof AbortController<"u"?AbortController:function(){var d=[],p=this.signal={aborted:!1,addEventListener:function(b,E){d.push(E)}};this.abort=function(){p.aborted=!0,d.forEach(function(b){return b()})}},b3=e.unstable_scheduleCallback,y3=e.unstable_NormalPriority,zs={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ry(){return{controller:new bp,data:new Map,refCount:0}}function qd(d){d.refCount--,d.refCount===0&&b3(y3,function(){d.controller.abort()})}var lc=null,pg=0,Gd=0,Wd=null;function mE(d,p){if(lc===null){var b=lc=[];pg=0,Gd=Y3(),Wd={status:"pending",value:void 0,then:function(E){b.push(E)}}}return pg++,p.then(gE,gE),p}function gE(){if(--pg===0&&lc!==null){Wd!==null&&(Wd.status="fulfilled");var d=lc;lc=null,Gd=0,Wd=null;for(var p=0;p<d.length;p++)(0,d[p])()}}function v3(d,p){var b=[],E={status:"pending",value:null,reason:null,then:function(A){b.push(A)}};return d.then(function(){E.status="fulfilled",E.value=p;for(var A=0;A<b.length;A++)(0,b[A])(p)},function(A){for(E.status="rejected",E.reason=A,A=0;A<b.length;A++)(0,b[A])(void 0)}),E}var bE=J.S;J.S=function(d,p){W9=Le(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&mE(d,p),bE!==null&&bE(d,p)};var Yd=te(null);function oy(){var d=Yd.current;return d!==null?d:Uo.pooledCache}function yp(d,p){p===null?Q(Yd,Yd.current):Q(Yd,p.pool)}function sy(){var d=oy();return d===null?null:{parent:zs._currentValue,pool:d}}var Kd=Error(r(460)),vp=Error(r(474)),mg=Error(r(542)),gg={then:function(){}};function yE(d){return d=d.status,d==="fulfilled"||d==="rejected"}function vE(d,p,b){switch(b=d[b],b===void 0?d.push(p):b!==p&&(p.then($t,$t),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,iy(d),d;default:if(typeof p.status=="string")p.then($t,$t);else{if(d=Uo,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=p,d.status="pending",d.then(function(E){if(p.status==="pending"){var A=p;A.status="fulfilled",A.value=E}},function(E){if(p.status==="pending"){var A=p;A.status="rejected",A.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw d=p.reason,iy(d),d}throw Zd=p,Kd}}function Xa(d){try{var p=d._init;return p(d._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(Zd=b,Kd):b}}var Zd=null;function xE(){if(Zd===null)throw Error(r(459));var d=Zd;return Zd=null,d}function iy(d){if(d===Kd||d===mg)throw Error(r(483))}var Bu=null,xp=0;function cc(d){var p=xp;return xp+=1,Bu===null&&(Bu=[]),vE(Bu,d,p)}function Th(d,p){p=p.props.ref,d.ref=p!==void 0?p:null}function wp(d,p){throw p.$$typeof===m?Error(r(525)):(d=Object.prototype.toString.call(p),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d)))}function ay(d){function p(je,De){if(d){var Ge=je.deletions;Ge===null?(je.deletions=[De],je.flags|=16):Ge.push(De)}}function b(je,De){if(!d)return null;for(;De!==null;)p(je,De),De=De.sibling;return null}function E(je){for(var De=new Map;je!==null;)je.key!==null?De.set(je.key,je):De.set(je.index,je),je=je.sibling;return De}function A(je,De){return je=Rl(je,De),je.index=0,je.sibling=null,je}function R(je,De,Ge){return je.index=Ge,d?(Ge=je.alternate,Ge!==null?(Ge=Ge.index,Ge<De?(je.flags|=67108866,De):Ge):(je.flags|=67108866,De)):(je.flags|=1048576,De)}function Y(je){return d&&je.alternate===null&&(je.flags|=67108866),je}function ae(je,De,Ge,lt){return De===null||De.tag!==6?(De=wh(Ge,je.mode,lt),De.return=je,De):(De=A(De,Ge),De.return=je,De)}function ke(je,De,Ge,lt){var Mn=Ge.type;return Mn===v?ot(je,De,Ge.props.children,lt,Ge.key):De!==null&&(De.elementType===Mn||typeof Mn=="object"&&Mn!==null&&Mn.$$typeof===B&&Xa(Mn)===De.type)?(De=A(De,Ge.props),Th(De,Ge),De.return=je,De):(De=Ml(Ge.type,Ge.key,Ge.props,null,je.mode,lt),Th(De,Ge),De.return=je,De)}function Ye(je,De,Ge,lt){return De===null||De.tag!==4||De.stateNode.containerInfo!==Ge.containerInfo||De.stateNode.implementation!==Ge.implementation?(De=cg(Ge,je.mode,lt),De.return=je,De):(De=A(De,Ge.children||[]),De.return=je,De)}function ot(je,De,Ge,lt,Mn){return De===null||De.tag!==7?(De=Lu(Ge,je.mode,lt,Mn),De.return=je,De):(De=A(De,Ge),De.return=je,De)}function dt(je,De,Ge){if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return De=wh(""+De,je.mode,Ge),De.return=je,De;if(typeof De=="object"&&De!==null){switch(De.$$typeof){case g:return Ge=Ml(De.type,De.key,De.props,null,je.mode,Ge),Th(Ge,De),Ge.return=je,Ge;case y:return De=cg(De,je.mode,Ge),De.return=je,De;case B:return De=Xa(De),dt(je,De,Ge)}if(X(De)||q(De))return De=Lu(De,je.mode,Ge,null),De.return=je,De;if(typeof De.then=="function")return dt(je,cc(De),Ge);if(De.$$typeof===k)return dt(je,Sh(je,De),Ge);wp(je,De)}return null}function Ke(je,De,Ge,lt){var Mn=De!==null?De.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Mn!==null?null:ae(je,De,""+Ge,lt);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case g:return Ge.key===Mn?ke(je,De,Ge,lt):null;case y:return Ge.key===Mn?Ye(je,De,Ge,lt):null;case B:return Ge=Xa(Ge),Ke(je,De,Ge,lt)}if(X(Ge)||q(Ge))return Mn!==null?null:ot(je,De,Ge,lt,null);if(typeof Ge.then=="function")return Ke(je,De,cc(Ge),lt);if(Ge.$$typeof===k)return Ke(je,De,Sh(je,Ge),lt);wp(je,Ge)}return null}function Xe(je,De,Ge,lt,Mn){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return je=je.get(Ge)||null,ae(De,je,""+lt,Mn);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case g:return je=je.get(lt.key===null?Ge:lt.key)||null,ke(De,je,lt,Mn);case y:return je=je.get(lt.key===null?Ge:lt.key)||null,Ye(De,je,lt,Mn);case B:return lt=Xa(lt),Xe(je,De,Ge,lt,Mn)}if(X(lt)||q(lt))return je=je.get(Ge)||null,ot(De,je,lt,Mn,null);if(typeof lt.then=="function")return Xe(je,De,Ge,cc(lt),Mn);if(lt.$$typeof===k)return Xe(je,De,Ge,Sh(De,lt),Mn);wp(De,lt)}return null}function dn(je,De,Ge,lt){for(var Mn=null,to=null,En=De,br=De=0,Fr=null;En!==null&&br<Ge.length;br++){En.index>br?(Fr=En,En=null):Fr=En.sibling;var no=Ke(je,En,Ge[br],lt);if(no===null){En===null&&(En=Fr);break}d&&En&&no.alternate===null&&p(je,En),De=R(no,De,br),to===null?Mn=no:to.sibling=no,to=no,En=Fr}if(br===Ge.length)return b(je,En),Mr&&Ss(je,br),Mn;if(En===null){for(;br<Ge.length;br++)En=dt(je,Ge[br],lt),En!==null&&(De=R(En,De,br),to===null?Mn=En:to.sibling=En,to=En);return Mr&&Ss(je,br),Mn}for(En=E(En);br<Ge.length;br++)Fr=Xe(En,je,br,Ge[br],lt),Fr!==null&&(d&&Fr.alternate!==null&&En.delete(Fr.key===null?br:Fr.key),De=R(Fr,De,br),to===null?Mn=Fr:to.sibling=Fr,to=Fr);return d&&En.forEach(function(Vh){return p(je,Vh)}),Mr&&Ss(je,br),Mn}function jn(je,De,Ge,lt){if(Ge==null)throw Error(r(151));for(var Mn=null,to=null,En=De,br=De=0,Fr=null,no=Ge.next();En!==null&&!no.done;br++,no=Ge.next()){En.index>br?(Fr=En,En=null):Fr=En.sibling;var Vh=Ke(je,En,no.value,lt);if(Vh===null){En===null&&(En=Fr);break}d&&En&&Vh.alternate===null&&p(je,En),De=R(Vh,De,br),to===null?Mn=Vh:to.sibling=Vh,to=Vh,En=Fr}if(no.done)return b(je,En),Mr&&Ss(je,br),Mn;if(En===null){for(;!no.done;br++,no=Ge.next())no=dt(je,no.value,lt),no!==null&&(De=R(no,De,br),to===null?Mn=no:to.sibling=no,to=no);return Mr&&Ss(je,br),Mn}for(En=E(En);!no.done;br++,no=Ge.next())no=Xe(En,je,br,no.value,lt),no!==null&&(d&&no.alternate!==null&&En.delete(no.key===null?br:no.key),De=R(no,De,br),to===null?Mn=no:to.sibling=no,to=no);return d&&En.forEach(function(Uce){return p(je,Uce)}),Mr&&Ss(je,br),Mn}function Po(je,De,Ge,lt){if(typeof Ge=="object"&&Ge!==null&&Ge.type===v&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case g:e:{for(var Mn=Ge.key;De!==null;){if(De.key===Mn){if(Mn=Ge.type,Mn===v){if(De.tag===7){b(je,De.sibling),lt=A(De,Ge.props.children),lt.return=je,je=lt;break e}}else if(De.elementType===Mn||typeof Mn=="object"&&Mn!==null&&Mn.$$typeof===B&&Xa(Mn)===De.type){b(je,De.sibling),lt=A(De,Ge.props),Th(lt,Ge),lt.return=je,je=lt;break e}b(je,De);break}else p(je,De);De=De.sibling}Ge.type===v?(lt=Lu(Ge.props.children,je.mode,lt,Ge.key),lt.return=je,je=lt):(lt=Ml(Ge.type,Ge.key,Ge.props,null,je.mode,lt),Th(lt,Ge),lt.return=je,je=lt)}return Y(je);case y:e:{for(Mn=Ge.key;De!==null;){if(De.key===Mn)if(De.tag===4&&De.stateNode.containerInfo===Ge.containerInfo&&De.stateNode.implementation===Ge.implementation){b(je,De.sibling),lt=A(De,Ge.children||[]),lt.return=je,je=lt;break e}else{b(je,De);break}else p(je,De);De=De.sibling}lt=cg(Ge,je.mode,lt),lt.return=je,je=lt}return Y(je);case B:return Ge=Xa(Ge),Po(je,De,Ge,lt)}if(X(Ge))return dn(je,De,Ge,lt);if(q(Ge)){if(Mn=q(Ge),typeof Mn!="function")throw Error(r(150));return Ge=Mn.call(Ge),jn(je,De,Ge,lt)}if(typeof Ge.then=="function")return Po(je,De,cc(Ge),lt);if(Ge.$$typeof===k)return Po(je,De,Sh(je,Ge),lt);wp(je,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint"?(Ge=""+Ge,De!==null&&De.tag===6?(b(je,De.sibling),lt=A(De,Ge),lt.return=je,je=lt):(b(je,De),lt=wh(Ge,je.mode,lt),lt.return=je,je=lt),Y(je)):b(je,De)}return function(je,De,Ge,lt){try{xp=0;var Mn=Po(je,De,Ge,lt);return Bu=null,Mn}catch(En){if(En===Kd||En===mg)throw En;var to=Fs(29,En,null,je.mode);return to.lanes=lt,to.return=je,to}finally{}}}var zu=ay(!0),Ch=ay(!1),Kc=!1;function Jd(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bg(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function ju(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Uu(d,p,b){var E=d.updateQueue;if(E===null)return null;if(E=E.shared,(uo&2)!==0){var A=E.pending;return A===null?p.next=p:(p.next=A.next,A.next=p),E.pending=p,p=ig(d),Xb(d,null,b),p}return pp(d,E,p,b),ig(d)}function Hu(d,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var E=p.lanes;E&=d.pendingLanes,b|=E,p.lanes=b,hn(d,b)}}function yg(d,p){var b=d.updateQueue,E=d.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var A=null,R=null;if(b=b.firstBaseUpdate,b!==null){do{var Y={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};R===null?A=R=Y:R=R.next=Y,b=b.next}while(b!==null);R===null?A=R=p:R=R.next=p}else A=R=p;b={baseState:E.baseState,firstBaseUpdate:A,lastBaseUpdate:R,shared:E.shared,callbacks:E.callbacks},d.updateQueue=b;return}d=b.lastBaseUpdate,d===null?b.firstBaseUpdate=p:d.next=p,b.lastBaseUpdate=p}var vg=!1;function Ep(){if(vg){var d=Wd;if(d!==null)throw d}}function _p(d,p,b,E){vg=!1;var A=d.updateQueue;Kc=!1;var R=A.firstBaseUpdate,Y=A.lastBaseUpdate,ae=A.shared.pending;if(ae!==null){A.shared.pending=null;var ke=ae,Ye=ke.next;ke.next=null,Y===null?R=Ye:Y.next=Ye,Y=ke;var ot=d.alternate;ot!==null&&(ot=ot.updateQueue,ae=ot.lastBaseUpdate,ae!==Y&&(ae===null?ot.firstBaseUpdate=Ye:ae.next=Ye,ot.lastBaseUpdate=ke))}if(R!==null){var dt=A.baseState;Y=0,ot=Ye=ke=null,ae=R;do{var Ke=ae.lane&-536870913,Xe=Ke!==ae.lane;if(Xe?($r&Ke)===Ke:(E&Ke)===Ke){Ke!==0&&Ke===Gd&&(vg=!0),ot!==null&&(ot=ot.next={lane:0,tag:ae.tag,payload:ae.payload,callback:null,next:null});e:{var dn=d,jn=ae;Ke=p;var Po=b;switch(jn.tag){case 1:if(dn=jn.payload,typeof dn=="function"){dt=dn.call(Po,dt,Ke);break e}dt=dn;break e;case 3:dn.flags=dn.flags&-65537|128;case 0:if(dn=jn.payload,Ke=typeof dn=="function"?dn.call(Po,dt,Ke):dn,Ke==null)break e;dt=f({},dt,Ke);break e;case 2:Kc=!0}}Ke=ae.callback,Ke!==null&&(d.flags|=64,Xe&&(d.flags|=8192),Xe=A.callbacks,Xe===null?A.callbacks=[Ke]:Xe.push(Ke))}else Xe={lane:Ke,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},ot===null?(Ye=ot=Xe,ke=dt):ot=ot.next=Xe,Y|=Ke;if(ae=ae.next,ae===null){if(ae=A.shared.pending,ae===null)break;Xe=ae,ae=Xe.next,Xe.next=null,A.lastBaseUpdate=Xe,A.shared.pending=null}}while(!0);ot===null&&(ke=dt),A.baseState=ke,A.firstBaseUpdate=Ye,A.lastBaseUpdate=ot,R===null&&(A.shared.lanes=0),Oh|=Y,d.lanes=Y,d.memoizedState=dt}}function js(d,p){if(typeof d!="function")throw Error(r(191,d));d.call(p)}function wE(d,p){var b=d.callbacks;if(b!==null)for(d.callbacks=null,d=0;d<b.length;d++)js(b[d],p)}var Zc=te(null),xg=te(0);function ly(d,p){d=cf,Q(xg,d),Q(Zc,p),cf=d|p.baseLanes}function cy(){Q(xg,cf),Q(Zc,Zc.current)}function Sp(){cf=xg.current,se(Zc),se(xg)}var ei=te(null),Qa=null;function Vu(d){var p=d.alternate;Q(Ts,Ts.current&1),Q(ei,d),Qa===null&&(p===null||Zc.current!==null||p.memoizedState!==null)&&(Qa=d)}function uy(d){Q(Ts,Ts.current),Q(ei,d),Qa===null&&(Qa=d)}function dy(d){d.tag===22?(Q(Ts,Ts.current),Q(ei,d),Qa===null&&(Qa=d)):qu()}function qu(){Q(Ts,Ts.current),Q(ei,ei.current)}function Na(d){se(ei),Qa===d&&(Qa=null),se(Ts)}var Ts=te(0);function wg(d){for(var p=d;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||i5(b)||a5(b)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Jc=0,or=null,mo=null,Us=null,Xd=!1,kh=!1,Gu=!1,Eg=0,Tp=0,Ji=null,Ah=0;function jo(){throw Error(r(321))}function fy(d,p){if(p===null)return!1;for(var b=0;b<p.length&&b<d.length;b++)if(!Ca(d[b],p[b]))return!1;return!0}function hy(d,p,b,E,A,R){return Jc=R,or=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,J.H=d===null||d.memoizedState===null?Qn:wr,Gu=!1,R=b(E,A),Gu=!1,kh&&(R=_E(p,b,E,A)),EE(d),R}function EE(d){J.H=Un;var p=mo!==null&&mo.next!==null;if(Jc=0,Us=mo=or=null,Xd=!1,Tp=0,Ji=null,p)throw Error(r(300));d===null||ii||(d=d.dependencies,d!==null&&hg(d)&&(ii=!0))}function _E(d,p,b,E){or=d;var A=0;do{if(kh&&(Ji=null),Tp=0,kh=!1,25<=A)throw Error(r(301));if(A+=1,Us=mo=null,d.updateQueue!=null){var R=d.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}J.H=nr,R=p(b,E)}while(kh);return R}function x3(){var d=J.H,p=d.useState()[0];return p=typeof p.then=="function"?Nh(p):p,d=d.useState()[0],(mo!==null?mo.memoizedState:null)!==d&&(or.flags|=1024),p}function py(){var d=Eg!==0;return Eg=0,d}function my(d,p,b){p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~b}function gy(d){if(Xd){for(d=d.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Xd=!1}Jc=0,Us=mo=or=null,kh=!1,Tp=Eg=0,Ji=null}function Xi(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Us===null?or.memoizedState=Us=d:Us=Us.next=d,Us}function ms(){if(mo===null){var d=or.alternate;d=d!==null?d.memoizedState:null}else d=mo.next;var p=Us===null?or.memoizedState:Us.next;if(p!==null)Us=p,mo=d;else{if(d===null)throw or.alternate===null?Error(r(467)):Error(r(310));mo=d,d={memoizedState:mo.memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},Us===null?or.memoizedState=Us=d:Us=Us.next=d}return Us}function Cp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nh(d){var p=Tp;return Tp+=1,Ji===null&&(Ji=[]),d=vE(Ji,d,p),p=or,(Us===null?p.memoizedState:Us.next)===null&&(p=p.alternate,J.H=p===null||p.memoizedState===null?Qn:wr),d}function kp(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Nh(d);if(d.$$typeof===k)return Ei(d)}throw Error(r(438,String(d)))}function _g(d){var p=null,b=or.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var E=or.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(A){return A.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=Cp(),or.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(d),E=0;E<d;E++)b[E]=j;return p.index++,b}function uc(d,p){return typeof p=="function"?p(d):p}function Ap(d){var p=ms();return Sg(p,mo,d)}function Sg(d,p,b){var E=d.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=b;var A=d.baseQueue,R=E.pending;if(R!==null){if(A!==null){var Y=A.next;A.next=R.next,R.next=Y}p.baseQueue=A=R,E.pending=null}if(R=d.baseState,A===null)d.memoizedState=R;else{p=A.next;var ae=Y=null,ke=null,Ye=p,ot=!1;do{var dt=Ye.lane&-536870913;if(dt!==Ye.lane?($r&dt)===dt:(Jc&dt)===dt){var Ke=Ye.revertLane;if(Ke===0)ke!==null&&(ke=ke.next={lane:0,revertLane:0,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),dt===Gd&&(ot=!0);else if((Jc&Ke)===Ke){Ye=Ye.next,Ke===Gd&&(ot=!0);continue}else dt={lane:0,revertLane:Ye.revertLane,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ke===null?(ae=ke=dt,Y=R):ke=ke.next=dt,or.lanes|=Ke,Oh|=Ke;dt=Ye.action,Gu&&b(R,dt),R=Ye.hasEagerState?Ye.eagerState:b(R,dt)}else Ke={lane:dt,revertLane:Ye.revertLane,gesture:Ye.gesture,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ke===null?(ae=ke=Ke,Y=R):ke=ke.next=Ke,or.lanes|=dt,Oh|=dt;Ye=Ye.next}while(Ye!==null&&Ye!==p);if(ke===null?Y=R:ke.next=ae,!Ca(R,d.memoizedState)&&(ii=!0,ot&&(b=Wd,b!==null)))throw b;d.memoizedState=R,d.baseState=Y,d.baseQueue=ke,E.lastRenderedState=R}return A===null&&(E.lanes=0),[d.memoizedState,E.dispatch]}function Tg(d){var p=ms(),b=p.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=d;var E=b.dispatch,A=b.pending,R=p.memoizedState;if(A!==null){b.pending=null;var Y=A=A.next;do R=d(R,Y.action),Y=Y.next;while(Y!==A);Ca(R,p.memoizedState)||(ii=!0),p.memoizedState=R,p.baseQueue===null&&(p.baseState=R),b.lastRenderedState=R}return[R,E]}function N(d,p,b){var E=or,A=ms(),R=Mr;if(R){if(b===void 0)throw Error(r(407));b=b()}else b=p();var Y=!Ca((mo||A).memoizedState,b);if(Y&&(A.memoizedState=b,ii=!0),A=A.queue,Qd(ve.bind(null,E,A,d),[d]),A.getSnapshot!==p||Y||Us!==null&&Us.memoizedState.tag&1){if(E.flags|=2048,dc(9,{destroy:void 0},oe.bind(null,E,A,b,p),null),Uo===null)throw Error(r(349));R||(Jc&127)!==0||G(E,p,b)}return b}function G(d,p,b){d.flags|=16384,d={getSnapshot:p,value:b},p=or.updateQueue,p===null?(p=Cp(),or.updateQueue=p,p.stores=[d]):(b=p.stores,b===null?p.stores=[d]:b.push(d))}function oe(d,p,b,E){p.value=b,p.getSnapshot=E,Ae(p)&&Ie(d)}function ve(d,p,b){return b(function(){Ae(p)&&Ie(d)})}function Ae(d){var p=d.getSnapshot;d=d.value;try{var b=p();return!Ca(d,b)}catch{return!0}}function Ie(d){var p=qc(d,2);p!==null&&sl(p,d,2)}function He(d){var p=Xi();if(typeof d=="function"){var b=d;if(d=b(),Gu){ln(!0);try{b()}finally{ln(!1)}}}return p.memoizedState=p.baseState=d,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uc,lastRenderedState:d},p}function gt(d,p,b,E){return d.baseState=b,Sg(d,mo,typeof E=="function"?E:uc)}function un(d,p,b,E,A){if(dr(d))throw Error(r(485));if(d=p.action,d!==null){var R={payload:A,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){R.listeners.push(Y)}};J.T!==null?b(!0):R.isTransition=!1,E(R),b=p.pending,b===null?(R.next=p.pending=R,Et(p,R)):(R.next=b.next,p.pending=b.next=R)}}function Et(d,p){var b=p.action,E=p.payload,A=d.state;if(p.isTransition){var R=J.T,Y={};J.T=Y;try{var ae=b(A,E),ke=J.S;ke!==null&&ke(Y,ae),_n(d,p,ae)}catch(Ye){_t(d,p,Ye)}finally{R!==null&&Y.types!==null&&(R.types=Y.types),J.T=R}}else try{R=b(A,E),_n(d,p,R)}catch(Ye){_t(d,p,Ye)}}function _n(d,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(E){at(d,p,E)},function(E){return _t(d,p,E)}):at(d,p,b)}function at(d,p,b){p.status="fulfilled",p.value=b,yn(p),d.state=b,p=d.pending,p!==null&&(b=p.next,b===p?d.pending=null:(b=b.next,p.next=b,Et(d,b)))}function _t(d,p,b){var E=d.pending;if(d.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=b,yn(p),p=p.next;while(p!==E)}d.action=null}function yn(d){d=d.listeners;for(var p=0;p<d.length;p++)(0,d[p])()}function Yn(d,p){return p}function Qr(d,p){if(Mr){var b=Uo.formState;if(b!==null){e:{var E=or;if(Mr){if(lo){t:{for(var A=lo,R=No;A.nodeType!==8;){if(!R){A=null;break t}if(A=hc(A.nextSibling),A===null){A=null;break t}}R=A.data,A=R==="F!"||R==="F"?A:null}if(A){lo=hc(A.nextSibling),E=A.data==="F!";break e}}Wc(E)}E=!1}E&&(p=b[0])}}return b=Xi(),b.memoizedState=b.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:p},b.queue=E,b=mn.bind(null,or,E),E.dispatch=b,E=He(!1),R=cn.bind(null,or,!1,E.queue),E=Xi(),A={state:p,dispatch:null,action:d,pending:null},E.queue=A,b=un.bind(null,or,A,R,b),A.dispatch=b,E.memoizedState=d,[p,b,!1]}function ss(d){var p=ms();return eo(p,mo,d)}function eo(d,p,b){if(p=Sg(d,p,Yn)[0],d=Ap(uc)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=Nh(p)}catch(Y){throw Y===Kd?mg:Y}else E=p;p=ms();var A=p.queue,R=A.dispatch;return b!==p.memoizedState&&(or.flags|=2048,dc(9,{destroy:void 0},_i.bind(null,A,b),null)),[E,R,d]}function _i(d,p){d.action=p}function Ia(d){var p=ms(),b=mo;if(b!==null)return eo(p,b,d);ms(),p=p.memoizedState,b=ms();var E=b.queue.dispatch;return b.memoizedState=d,[p,E,!1]}function dc(d,p,b,E){return d={tag:d,create:b,deps:E,inst:p,next:null},p=or.updateQueue,p===null&&(p=Cp(),or.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=d.next=d:(E=b.next,b.next=d,d.next=E,p.lastEffect=d),d}function Ih(){return ms().memoizedState}function Wu(d,p,b,E){var A=Xi();or.flags|=d,A.memoizedState=dc(1|p,{destroy:void 0},b,E===void 0?null:E)}function Yu(d,p,b,E){var A=ms();E=E===void 0?null:E;var R=A.memoizedState.inst;mo!==null&&E!==null&&fy(E,mo.memoizedState.deps)?A.memoizedState=dc(p,R,b,E):(or.flags|=d,A.memoizedState=dc(1|p,R,b,E))}function Rh(d,p){Wu(8390656,8,d,p)}function Qd(d,p){Yu(2048,8,d,p)}function Io(d){or.flags|=4;var p=or.updateQueue;if(p===null)p=Cp(),or.updateQueue=p,p.events=[d];else{var b=p.events;b===null?p.events=[d]:b.push(d)}}function Cs(d){var p=ms().memoizedState;return Io({ref:p,nextImpl:d}),function(){if((uo&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function Si(d,p){return Yu(4,2,d,p)}function ef(d,p){return Yu(4,4,d,p)}function Np(d,p){if(typeof p=="function"){d=d();var b=p(d);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function tf(d,p,b){b=b!=null?b.concat([d]):null,Yu(4,4,Np.bind(null,p,d),b)}function el(){}function Ip(d,p){var b=ms();p=p===void 0?null:p;var E=b.memoizedState;return p!==null&&fy(p,E[1])?E[0]:(b.memoizedState=[d,p],d)}function Mt(d,p){var b=ms();p=p===void 0?null:p;var E=b.memoizedState;if(p!==null&&fy(p,E[1]))return E[0];if(E=d(),Gu){ln(!0);try{d()}finally{ln(!1)}}return b.memoizedState=[E,p],E}function tr(d,p,b){return b===void 0||(Jc&1073741824)!==0&&($r&261930)===0?d.memoizedState=p:(d.memoizedState=b,d=K9(),or.lanes|=d,Oh|=d,b)}function zn(d,p,b,E){return Ca(b,p)?b:Zc.current!==null?(d=tr(d,b,E),Ca(d,p)||(ii=!0),d):(Jc&42)===0||(Jc&1073741824)!==0&&($r&261930)===0?(ii=!0,d.memoizedState=b):(d=K9(),or.lanes|=d,Oh|=d,p)}function Vr(d,p,b,E,A){var R=ee.p;ee.p=R!==0&&8>R?R:8;var Y=J.T,ae={};J.T=ae,cn(d,!1,p,b);try{var ke=A(),Ye=J.S;if(Ye!==null&&Ye(ae,ke),ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var ot=v3(ke,E);rn(d,p,ot,Fl(d))}else rn(d,p,E,Fl(d))}catch(dt){rn(d,p,{then:function(){},status:"rejected",reason:dt},Fl())}finally{ee.p=R,Y!==null&&ae.types!==null&&(Y.types=ae.types),J.T=Y}}function jr(){}function Gn(d,p,b,E){if(d.tag!==5)throw Error(r(476));var A=xo(d).queue;Vr(d,A,p,re,b===null?jr:function(){return Ro(d),b(E)})}function xo(d){var p=d.memoizedState;if(p!==null)return p;p={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:uc,lastRenderedState:re},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:uc,lastRenderedState:b},next:null},d.memoizedState=p,d=d.alternate,d!==null&&(d.memoizedState=p),p}function Ro(d){var p=xo(d);p.next===null&&(p=d.alternate.memoizedState),rn(d,p.next.queue,{},Fl())}function sr(){return Ei(My)}function ks(){return ms().memoizedState}function Yr(){return ms().memoizedState}function is(d){for(var p=d.return;p!==null;){switch(p.tag){case 24:case 3:var b=Fl();d=ju(b);var E=Uu(p,d,b);E!==null&&(sl(E,p,b),Hu(E,p,b)),p={cache:ry()},d.payload=p;return}p=p.return}}function Xt(d,p,b){var E=Fl();b={lane:E,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},dr(d)?fr(p,b):(b=mp(d,p,b,E),b!==null&&(sl(b,d,E),Hn(b,p,E)))}function mn(d,p,b){var E=Fl();rn(d,p,b,E)}function rn(d,p,b,E){var A={lane:E,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(dr(d))fr(p,A);else{var R=d.alternate;if(d.lanes===0&&(R===null||R.lanes===0)&&(R=p.lastRenderedReducer,R!==null))try{var Y=p.lastRenderedState,ae=R(Y,b);if(A.hasEagerState=!0,A.eagerState=ae,Ca(ae,Y))return pp(d,p,A,0),Uo===null&&xh(),!1}catch{}finally{}if(b=mp(d,p,A,E),b!==null)return sl(b,d,E),Hn(b,p,E),!0}return!1}function cn(d,p,b,E){if(E={lane:2,revertLane:Y3(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},dr(d)){if(p)throw Error(r(479))}else p=mp(d,b,E,2),p!==null&&sl(p,d,2)}function dr(d){var p=d.alternate;return d===or||p!==null&&p===or}function fr(d,p){kh=Xd=!0;var b=d.pending;b===null?p.next=p:(p.next=b.next,b.next=p),d.pending=p}function Hn(d,p,b){if((b&4194048)!==0){var E=p.lanes;E&=d.pendingLanes,b|=E,p.lanes=b,hn(d,b)}}var Un={readContext:Ei,use:kp,useCallback:jo,useContext:jo,useEffect:jo,useImperativeHandle:jo,useLayoutEffect:jo,useInsertionEffect:jo,useMemo:jo,useReducer:jo,useRef:jo,useState:jo,useDebugValue:jo,useDeferredValue:jo,useTransition:jo,useSyncExternalStore:jo,useId:jo,useHostTransitionStatus:jo,useFormState:jo,useActionState:jo,useOptimistic:jo,useMemoCache:jo,useCacheRefresh:jo};Un.useEffectEvent=jo;var Qn={readContext:Ei,use:kp,useCallback:function(d,p){return Xi().memoizedState=[d,p===void 0?null:p],d},useContext:Ei,useEffect:Rh,useImperativeHandle:function(d,p,b){b=b!=null?b.concat([d]):null,Wu(4194308,4,Np.bind(null,p,d),b)},useLayoutEffect:function(d,p){return Wu(4194308,4,d,p)},useInsertionEffect:function(d,p){Wu(4,2,d,p)},useMemo:function(d,p){var b=Xi();p=p===void 0?null:p;var E=d();if(Gu){ln(!0);try{d()}finally{ln(!1)}}return b.memoizedState=[E,p],E},useReducer:function(d,p,b){var E=Xi();if(b!==void 0){var A=b(p);if(Gu){ln(!0);try{b(p)}finally{ln(!1)}}}else A=p;return E.memoizedState=E.baseState=A,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:A},E.queue=d,d=d.dispatch=Xt.bind(null,or,d),[E.memoizedState,d]},useRef:function(d){var p=Xi();return d={current:d},p.memoizedState=d},useState:function(d){d=He(d);var p=d.queue,b=mn.bind(null,or,p);return p.dispatch=b,[d.memoizedState,b]},useDebugValue:el,useDeferredValue:function(d,p){var b=Xi();return tr(b,d,p)},useTransition:function(){var d=He(!1);return d=Vr.bind(null,or,d.queue,!0,!1),Xi().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,p,b){var E=or,A=Xi();if(Mr){if(b===void 0)throw Error(r(407));b=b()}else{if(b=p(),Uo===null)throw Error(r(349));($r&127)!==0||G(E,p,b)}A.memoizedState=b;var R={value:b,getSnapshot:p};return A.queue=R,Rh(ve.bind(null,E,R,d),[d]),E.flags|=2048,dc(9,{destroy:void 0},oe.bind(null,E,R,b,p),null),b},useId:function(){var d=Xi(),p=Uo.identifierPrefix;if(Mr){var b=Ol,E=Bs;b=(E&~(1<<32-jt(E)-1)).toString(32)+b,p="_"+p+"R_"+b,b=Eg++,0<b&&(p+="H"+b.toString(32)),p+="_"}else b=Ah++,p="_"+p+"r_"+b.toString(32)+"_";return d.memoizedState=p},useHostTransitionStatus:sr,useFormState:Qr,useActionState:Qr,useOptimistic:function(d){var p=Xi();p.memoizedState=p.baseState=d;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=cn.bind(null,or,!0,b),b.dispatch=p,[d,p]},useMemoCache:_g,useCacheRefresh:function(){return Xi().memoizedState=is.bind(null,or)},useEffectEvent:function(d){var p=Xi(),b={impl:d};return p.memoizedState=b,function(){if((uo&2)!==0)throw Error(r(440));return b.impl.apply(void 0,arguments)}}},wr={readContext:Ei,use:kp,useCallback:Ip,useContext:Ei,useEffect:Qd,useImperativeHandle:tf,useInsertionEffect:Si,useLayoutEffect:ef,useMemo:Mt,useReducer:Ap,useRef:Ih,useState:function(){return Ap(uc)},useDebugValue:el,useDeferredValue:function(d,p){var b=ms();return zn(b,mo.memoizedState,d,p)},useTransition:function(){var d=Ap(uc)[0],p=ms().memoizedState;return[typeof d=="boolean"?d:Nh(d),p]},useSyncExternalStore:N,useId:ks,useHostTransitionStatus:sr,useFormState:ss,useActionState:ss,useOptimistic:function(d,p){var b=ms();return gt(b,mo,d,p)},useMemoCache:_g,useCacheRefresh:Yr};wr.useEffectEvent=Cs;var nr={readContext:Ei,use:kp,useCallback:Ip,useContext:Ei,useEffect:Qd,useImperativeHandle:tf,useInsertionEffect:Si,useLayoutEffect:ef,useMemo:Mt,useReducer:Tg,useRef:Ih,useState:function(){return Tg(uc)},useDebugValue:el,useDeferredValue:function(d,p){var b=ms();return mo===null?tr(b,d,p):zn(b,mo.memoizedState,d,p)},useTransition:function(){var d=Tg(uc)[0],p=ms().memoizedState;return[typeof d=="boolean"?d:Nh(d),p]},useSyncExternalStore:N,useId:ks,useHostTransitionStatus:sr,useFormState:Ia,useActionState:Ia,useOptimistic:function(d,p){var b=ms();return mo!==null?gt(b,mo,d,p):(b.baseState=d,[d,b.queue.dispatch])},useMemoCache:_g,useCacheRefresh:Yr};nr.useEffectEvent=Cs;function Yo(d,p,b,E){p=d.memoizedState,b=b(E,p),b=b==null?p:f({},p,b),d.memoizedState=b,d.lanes===0&&(d.updateQueue.baseState=b)}var Mo={enqueueSetState:function(d,p,b){d=d._reactInternals;var E=Fl(),A=ju(E);A.payload=p,b!=null&&(A.callback=b),p=Uu(d,A,E),p!==null&&(sl(p,d,E),Hu(p,d,E))},enqueueReplaceState:function(d,p,b){d=d._reactInternals;var E=Fl(),A=ju(E);A.tag=1,A.payload=p,b!=null&&(A.callback=b),p=Uu(d,A,E),p!==null&&(sl(p,d,E),Hu(p,d,E))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var b=Fl(),E=ju(b);E.tag=2,p!=null&&(E.callback=p),p=Uu(d,E,b),p!==null&&(sl(p,d,b),Hu(p,d,b))}};function si(d,p,b,E,A,R,Y){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(E,R,Y):p.prototype&&p.prototype.isPureReactComponent?!lp(b,E)||!lp(A,R):!0}function Rp(d,p,b,E){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,E),p.state!==d&&Mo.enqueueReplaceState(p,p.state,null)}function As(d,p){var b=p;if("ref"in p){b={};for(var E in p)E!=="ref"&&(b[E]=p[E])}if(d=d.defaultProps){b===p&&(b=f({},b));for(var A in d)b[A]===void 0&&(b[A]=d[A])}return b}function Ra(d){Ud(d)}function go(d){console.error(d)}function Ko(d){Ud(d)}function Zo(d,p){try{var b=d.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function Do(d,p,b){try{var E=d.onCaughtError;E(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function fc(d,p,b){return b=ju(b),b.tag=3,b.payload={element:null},b.callback=function(){Zo(d,p)},b}function Cg(d){return d=ju(d),d.tag=3,d}function h9(d,p,b,E){var A=b.type.getDerivedStateFromError;if(typeof A=="function"){var R=E.value;d.payload=function(){return A(R)},d.callback=function(){Do(p,b,E)}}var Y=b.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(d.callback=function(){Do(p,b,E),typeof A!="function"&&(Ph===null?Ph=new Set([this]):Ph.add(this));var ae=E.stack;this.componentDidCatch(E.value,{componentStack:ae!==null?ae:""})})}function zle(d,p,b,E,A){if(b.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=b.alternate,p!==null&&_h(p,b,A,!0),b=ei.current,b!==null){switch(b.tag){case 31:case 13:return Qa===null?PE():b.alternate===null&&Hs===0&&(Hs=3),b.flags&=-257,b.flags|=65536,b.lanes=A,E===gg?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([E]):p.add(E),q3(d,E,A)),!1;case 22:return b.flags|=65536,E===gg?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([E]):b.add(E)),q3(d,E,A)),!1}throw Error(r(435,b.tag))}return q3(d,E,A),PE(),!1}if(Mr)return p=ei.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=A,E!==ac&&(d=Error(r(422),{cause:E}),gp(fa(d,b)))):(E!==ac&&(p=Error(r(423),{cause:E}),gp(fa(p,b))),d=d.current.alternate,d.flags|=65536,A&=-A,d.lanes|=A,E=fa(E,b),A=fc(d.stateNode,E,A),yg(d,A),Hs!==4&&(Hs=2)),!1;var R=Error(r(520),{cause:E});if(R=fa(R,b),Sy===null?Sy=[R]:Sy.push(R),Hs!==4&&(Hs=2),p===null)return!0;E=fa(E,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,d=A&-A,b.lanes|=d,d=fc(b.stateNode,E,d),yg(b,d),!1;case 1:if(p=b.type,R=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Ph===null||!Ph.has(R))))return b.flags|=65536,A&=-A,b.lanes|=A,A=Cg(A),h9(A,d,b,E),yg(b,A),!1}b=b.return}while(b!==null);return!1}var w3=Error(r(461)),ii=!1;function Qi(d,p,b,E){p.child=d===null?Ch(p,null,b,E):zu(p,d.child,b,E)}function p9(d,p,b,E,A){b=b.render;var R=p.ref;if("ref"in E){var Y={};for(var ae in E)ae!=="ref"&&(Y[ae]=E[ae])}else Y=E;return Vd(p),E=hy(d,p,b,Y,R,A),ae=py(),d!==null&&!ii?(my(d,p,A),nf(d,p,A)):(Mr&&ae&&Hd(p),p.flags|=1,Qi(d,p,E,A),p.child)}function m9(d,p,b,E,A){if(d===null){var R=b.type;return typeof R=="function"&&!lg(R)&&R.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=R,g9(d,p,R,E,A)):(d=Ml(b.type,null,E,p,p.mode,A),d.ref=p.ref,d.return=p,p.child=d)}if(R=d.child,!N3(d,A)){var Y=R.memoizedProps;if(b=b.compare,b=b!==null?b:lp,b(Y,E)&&d.ref===p.ref)return nf(d,p,A)}return p.flags|=1,d=Rl(R,E),d.ref=p.ref,d.return=p,p.child=d}function g9(d,p,b,E,A){if(d!==null){var R=d.memoizedProps;if(lp(R,E)&&d.ref===p.ref)if(ii=!1,p.pendingProps=E=R,N3(d,A))(d.flags&131072)!==0&&(ii=!0);else return p.lanes=d.lanes,nf(d,p,A)}return E3(d,p,b,E,A)}function b9(d,p,b,E){var A=E.children,R=d!==null?d.memoizedState:null;if(d===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((p.flags&128)!==0){if(R=R!==null?R.baseLanes|b:b,d!==null){for(E=p.child=d.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;E=A&~R}else E=0,p.child=null;return y9(d,p,R,b,E)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},d!==null&&yp(p,R!==null?R.cachePool:null),R!==null?ly(p,R):cy(),dy(p);else return E=p.lanes=536870912,y9(d,p,R!==null?R.baseLanes|b:b,b,E)}else R!==null?(yp(p,R.cachePool),ly(p,R),qu(),p.memoizedState=null):(d!==null&&yp(p,null),cy(),qu());return Qi(d,p,A,b),p.child}function by(d,p){return d!==null&&d.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function y9(d,p,b,E,A){var R=oy();return R=R===null?null:{parent:zs._currentValue,pool:R},p.memoizedState={baseLanes:b,cachePool:R},d!==null&&yp(p,null),cy(),dy(p),d!==null&&_h(d,p,E,!0),p.childLanes=A,null}function SE(d,p){return p=CE({mode:p.mode,children:p.children},d.mode),p.ref=d.ref,d.child=p,p.return=d,p}function v9(d,p,b){return zu(p,d.child,null,b),d=SE(p,p.pendingProps),d.flags|=2,Na(p),p.memoizedState=null,d}function jle(d,p,b){var E=p.pendingProps,A=(p.flags&128)!==0;if(p.flags&=-129,d===null){if(Mr){if(E.mode==="hidden")return d=SE(p,E),p.lanes=536870912,by(null,d);if(uy(p),(d=lo)?(d=RD(d,No),d=d!==null&&d.data==="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:Ja!==null?{id:Bs,overflow:Ol}:null,retryLane:536870912,hydrationErrors:null},b=Qb(d),b.return=p,p.child=b,ns=p,lo=null)):d=null,d===null)throw Wc(p);return p.lanes=536870912,null}return SE(p,E)}var R=d.memoizedState;if(R!==null){var Y=R.dehydrated;if(uy(p),A)if(p.flags&256)p.flags&=-257,p=v9(d,p,b);else if(p.memoizedState!==null)p.child=d.child,p.flags|=128,p=null;else throw Error(r(558));else if(ii||_h(d,p,b,!1),A=(b&d.childLanes)!==0,ii||A){if(E=Uo,E!==null&&(Y=In(E,b),Y!==0&&Y!==R.retryLane))throw R.retryLane=Y,qc(d,Y),sl(E,d,Y),w3;PE(),p=v9(d,p,b)}else d=R.treeContext,lo=hc(Y.nextSibling),ns=p,Mr=!0,co=null,No=!1,d!==null&&ug(p,d),p=SE(p,E),p.flags|=4096;return p}return d=Rl(d.child,{mode:E.mode,children:E.children}),d.ref=p.ref,p.child=d,d.return=p,d}function TE(d,p){var b=p.ref;if(b===null)d!==null&&d.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(d===null||d.ref!==b)&&(p.flags|=4194816)}}function E3(d,p,b,E,A){return Vd(p),b=hy(d,p,b,E,void 0,A),E=py(),d!==null&&!ii?(my(d,p,A),nf(d,p,A)):(Mr&&E&&Hd(p),p.flags|=1,Qi(d,p,b,A),p.child)}function x9(d,p,b,E,A,R){return Vd(p),p.updateQueue=null,b=_E(p,E,b,A),EE(d),E=py(),d!==null&&!ii?(my(d,p,R),nf(d,p,R)):(Mr&&E&&Hd(p),p.flags|=1,Qi(d,p,b,R),p.child)}function w9(d,p,b,E,A){if(Vd(p),p.stateNode===null){var R=Zi,Y=b.contextType;typeof Y=="object"&&Y!==null&&(R=Ei(Y)),R=new b(E,R),p.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Mo,p.stateNode=R,R._reactInternals=p,R=p.stateNode,R.props=E,R.state=p.memoizedState,R.refs={},Jd(p),Y=b.contextType,R.context=typeof Y=="object"&&Y!==null?Ei(Y):Zi,R.state=p.memoizedState,Y=b.getDerivedStateFromProps,typeof Y=="function"&&(Yo(p,b,Y,E),R.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(Y=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),Y!==R.state&&Mo.enqueueReplaceState(R,R.state,null),_p(p,E,R,A),Ep(),R.state=p.memoizedState),typeof R.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(d===null){R=p.stateNode;var ae=p.memoizedProps,ke=As(b,ae);R.props=ke;var Ye=R.context,ot=b.contextType;Y=Zi,typeof ot=="object"&&ot!==null&&(Y=Ei(ot));var dt=b.getDerivedStateFromProps;ot=typeof dt=="function"||typeof R.getSnapshotBeforeUpdate=="function",ae=p.pendingProps!==ae,ot||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(ae||Ye!==Y)&&Rp(p,R,E,Y),Kc=!1;var Ke=p.memoizedState;R.state=Ke,_p(p,E,R,A),Ep(),Ye=p.memoizedState,ae||Ke!==Ye||Kc?(typeof dt=="function"&&(Yo(p,b,dt,E),Ye=p.memoizedState),(ke=Kc||si(p,b,ke,E,Ke,Ye,Y))?(ot||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(p.flags|=4194308)):(typeof R.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=Ye),R.props=E,R.state=Ye,R.context=Y,E=ke):(typeof R.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{R=p.stateNode,bg(d,p),Y=p.memoizedProps,ot=As(b,Y),R.props=ot,dt=p.pendingProps,Ke=R.context,Ye=b.contextType,ke=Zi,typeof Ye=="object"&&Ye!==null&&(ke=Ei(Ye)),ae=b.getDerivedStateFromProps,(Ye=typeof ae=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(Y!==dt||Ke!==ke)&&Rp(p,R,E,ke),Kc=!1,Ke=p.memoizedState,R.state=Ke,_p(p,E,R,A),Ep();var Xe=p.memoizedState;Y!==dt||Ke!==Xe||Kc||d!==null&&d.dependencies!==null&&hg(d.dependencies)?(typeof ae=="function"&&(Yo(p,b,ae,E),Xe=p.memoizedState),(ot=Kc||si(p,b,ot,E,Ke,Xe,ke)||d!==null&&d.dependencies!==null&&hg(d.dependencies))?(Ye||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(E,Xe,ke),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(E,Xe,ke)),typeof R.componentDidUpdate=="function"&&(p.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof R.componentDidUpdate!="function"||Y===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Y===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=Xe),R.props=E,R.state=Xe,R.context=ke,E=ot):(typeof R.componentDidUpdate!="function"||Y===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Y===d.memoizedProps&&Ke===d.memoizedState||(p.flags|=1024),E=!1)}return R=E,TE(d,p),E=(p.flags&128)!==0,R||E?(R=p.stateNode,b=E&&typeof b.getDerivedStateFromError!="function"?null:R.render(),p.flags|=1,d!==null&&E?(p.child=zu(p,d.child,null,A),p.child=zu(p,null,b,A)):Qi(d,p,b,A),p.memoizedState=R.state,d=p.child):d=nf(d,p,A),d}function E9(d,p,b,E){return $u(),p.flags|=256,Qi(d,p,b,E),p.child}var _3={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function S3(d){return{baseLanes:d,cachePool:sy()}}function T3(d,p,b){return d=d!==null?d.childLanes&~b:0,p&&(d|=$l),d}function _9(d,p,b){var E=p.pendingProps,A=!1,R=(p.flags&128)!==0,Y;if((Y=R)||(Y=d!==null&&d.memoizedState===null?!1:(Ts.current&2)!==0),Y&&(A=!0,p.flags&=-129),Y=(p.flags&32)!==0,p.flags&=-33,d===null){if(Mr){if(A?Vu(p):qu(),(d=lo)?(d=RD(d,No),d=d!==null&&d.data!=="&"?d:null,d!==null&&(p.memoizedState={dehydrated:d,treeContext:Ja!==null?{id:Bs,overflow:Ol}:null,retryLane:536870912,hydrationErrors:null},b=Qb(d),b.return=p,p.child=b,ns=p,lo=null)):d=null,d===null)throw Wc(p);return a5(d)?p.lanes=32:p.lanes=536870912,null}var ae=E.children;return E=E.fallback,A?(qu(),A=p.mode,ae=CE({mode:"hidden",children:ae},A),E=Lu(E,A,b,null),ae.return=p,E.return=p,ae.sibling=E,p.child=ae,E=p.child,E.memoizedState=S3(b),E.childLanes=T3(d,Y,b),p.memoizedState=_3,by(null,E)):(Vu(p),C3(p,ae))}var ke=d.memoizedState;if(ke!==null&&(ae=ke.dehydrated,ae!==null)){if(R)p.flags&256?(Vu(p),p.flags&=-257,p=k3(d,p,b)):p.memoizedState!==null?(qu(),p.child=d.child,p.flags|=128,p=null):(qu(),ae=E.fallback,A=p.mode,E=CE({mode:"visible",children:E.children},A),ae=Lu(ae,A,b,null),ae.flags|=2,E.return=p,ae.return=p,E.sibling=ae,p.child=E,zu(p,d.child,null,b),E=p.child,E.memoizedState=S3(b),E.childLanes=T3(d,Y,b),p.memoizedState=_3,p=by(null,E));else if(Vu(p),a5(ae)){if(Y=ae.nextSibling&&ae.nextSibling.dataset,Y)var Ye=Y.dgst;Y=Ye,E=Error(r(419)),E.stack="",E.digest=Y,gp({value:E,source:null,stack:null}),p=k3(d,p,b)}else if(ii||_h(d,p,b,!1),Y=(b&d.childLanes)!==0,ii||Y){if(Y=Uo,Y!==null&&(E=In(Y,b),E!==0&&E!==ke.retryLane))throw ke.retryLane=E,qc(d,E),sl(Y,d,E),w3;i5(ae)||PE(),p=k3(d,p,b)}else i5(ae)?(p.flags|=192,p.child=d.child,p=null):(d=ke.treeContext,lo=hc(ae.nextSibling),ns=p,Mr=!0,co=null,No=!1,d!==null&&ug(p,d),p=C3(p,E.children),p.flags|=4096);return p}return A?(qu(),ae=E.fallback,A=p.mode,ke=d.child,Ye=ke.sibling,E=Rl(ke,{mode:"hidden",children:E.children}),E.subtreeFlags=ke.subtreeFlags&65011712,Ye!==null?ae=Rl(Ye,ae):(ae=Lu(ae,A,b,null),ae.flags|=2),ae.return=p,E.return=p,E.sibling=ae,p.child=E,by(null,E),E=p.child,ae=d.child.memoizedState,ae===null?ae=S3(b):(A=ae.cachePool,A!==null?(ke=zs._currentValue,A=A.parent!==ke?{parent:ke,pool:ke}:A):A=sy(),ae={baseLanes:ae.baseLanes|b,cachePool:A}),E.memoizedState=ae,E.childLanes=T3(d,Y,b),p.memoizedState=_3,by(d.child,E)):(Vu(p),b=d.child,d=b.sibling,b=Rl(b,{mode:"visible",children:E.children}),b.return=p,b.sibling=null,d!==null&&(Y=p.deletions,Y===null?(p.deletions=[d],p.flags|=16):Y.push(d)),p.child=b,p.memoizedState=null,b)}function C3(d,p){return p=CE({mode:"visible",children:p},d.mode),p.return=d,d.child=p}function CE(d,p){return d=Fs(22,d,null,p),d.lanes=0,d}function k3(d,p,b){return zu(p,d.child,null,b),d=C3(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function S9(d,p,b){d.lanes|=p;var E=d.alternate;E!==null&&(E.lanes|=p),ny(d.return,p,b)}function A3(d,p,b,E,A,R){var Y=d.memoizedState;Y===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:A,treeForkCount:R}:(Y.isBackwards=p,Y.rendering=null,Y.renderingStartTime=0,Y.last=E,Y.tail=b,Y.tailMode=A,Y.treeForkCount=R)}function T9(d,p,b){var E=p.pendingProps,A=E.revealOrder,R=E.tail;E=E.children;var Y=Ts.current,ae=(Y&2)!==0;if(ae?(Y=Y&1|2,p.flags|=128):Y&=1,Q(Ts,Y),Qi(d,p,E,b),E=Mr?Eh:0,!ae&&d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&S9(d,b,p);else if(d.tag===19)S9(d,b,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(A){case"forwards":for(b=p.child,A=null;b!==null;)d=b.alternate,d!==null&&wg(d)===null&&(A=b),b=b.sibling;b=A,b===null?(A=p.child,p.child=null):(A=b.sibling,b.sibling=null),A3(p,!1,A,b,R,E);break;case"backwards":case"unstable_legacy-backwards":for(b=null,A=p.child,p.child=null;A!==null;){if(d=A.alternate,d!==null&&wg(d)===null){p.child=A;break}d=A.sibling,A.sibling=b,b=A,A=d}A3(p,!0,b,null,R,E);break;case"together":A3(p,!1,null,null,void 0,E);break;default:p.memoizedState=null}return p.child}function nf(d,p,b){if(d!==null&&(p.dependencies=d.dependencies),Oh|=p.lanes,(b&p.childLanes)===0)if(d!==null){if(_h(d,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(d!==null&&p.child!==d.child)throw Error(r(153));if(p.child!==null){for(d=p.child,b=Rl(d,d.pendingProps),p.child=b,b.return=p;d.sibling!==null;)d=d.sibling,b=b.sibling=Rl(d,d.pendingProps),b.return=p;b.sibling=null}return p.child}function N3(d,p){return(d.lanes&p)!==0?!0:(d=d.dependencies,!!(d!==null&&hg(d)))}function Ule(d,p,b){switch(p.tag){case 3:Fe(p,p.stateNode.containerInfo),Fu(p,zs,d.memoizedState.cache),$u();break;case 27:case 5:Re(p);break;case 4:Fe(p,p.stateNode.containerInfo);break;case 10:Fu(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,uy(p),null;break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(Vu(p),p.flags|=128,null):(b&p.child.childLanes)!==0?_9(d,p,b):(Vu(p),d=nf(d,p,b),d!==null?d.sibling:null);Vu(p);break;case 19:var A=(d.flags&128)!==0;if(E=(b&p.childLanes)!==0,E||(_h(d,p,b,!1),E=(b&p.childLanes)!==0),A){if(E)return T9(d,p,b);p.flags|=128}if(A=p.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Q(Ts,Ts.current),E)break;return null;case 22:return p.lanes=0,b9(d,p,b,p.pendingProps);case 24:Fu(p,zs,d.memoizedState.cache)}return nf(d,p,b)}function C9(d,p,b){if(d!==null)if(d.memoizedProps!==p.pendingProps)ii=!0;else{if(!N3(d,b)&&(p.flags&128)===0)return ii=!1,Ule(d,p,b);ii=(d.flags&131072)!==0}else ii=!1,Mr&&(p.flags&1048576)!==0&&hE(p,Eh,p.index);switch(p.lanes=0,p.tag){case 16:e:{var E=p.pendingProps;if(d=Xa(p.elementType),p.type=d,typeof d=="function")lg(d)?(E=As(d,E),p.tag=1,p=w9(null,p,d,E,b)):(p.tag=0,p=E3(null,p,d,E,b));else{if(d!=null){var A=d.$$typeof;if(A===M){p.tag=11,p=p9(null,p,d,E,b);break e}else if(A===P){p.tag=14,p=m9(null,p,d,E,b);break e}}throw p=Z(d)||d,Error(r(306,p,""))}}return p;case 0:return E3(d,p,p.type,p.pendingProps,b);case 1:return E=p.type,A=As(E,p.pendingProps),w9(d,p,E,A,b);case 3:e:{if(Fe(p,p.stateNode.containerInfo),d===null)throw Error(r(387));E=p.pendingProps;var R=p.memoizedState;A=R.element,bg(d,p),_p(p,E,null,b);var Y=p.memoizedState;if(E=Y.cache,Fu(p,zs,E),E!==R.cache&&fg(p,[zs],b,!0),Ep(),E=Y.element,R.isDehydrated)if(R={element:E,isDehydrated:!1,cache:Y.cache},p.updateQueue.baseState=R,p.memoizedState=R,p.flags&256){p=E9(d,p,E,b);break e}else if(E!==A){A=fa(Error(r(424)),p),gp(A),p=E9(d,p,E,b);break e}else{switch(d=p.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(lo=hc(d.firstChild),ns=p,Mr=!0,co=null,No=!0,b=Ch(p,null,E,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if($u(),E===A){p=nf(d,p,b);break e}Qi(d,p,E,b)}p=p.child}return p;case 26:return TE(d,p),d===null?(b=$D(p.type,null,p.pendingProps,null))?p.memoizedState=b:Mr||(b=p.type,d=p.pendingProps,E=UE(Ce.current).createElement(b),E[gr]=p,E[Os]=d,ea(E,b,d),mt(E),p.stateNode=E):p.memoizedState=$D(p.type,d.memoizedProps,p.pendingProps,d.memoizedState),null;case 27:return Re(p),d===null&&Mr&&(E=p.stateNode=OD(p.type,p.pendingProps,Ce.current),ns=p,No=!0,A=lo,Bh(p.type)?(l5=A,lo=hc(E.firstChild)):lo=A),Qi(d,p,p.pendingProps.children,b),TE(d,p),d===null&&(p.flags|=4194304),p.child;case 5:return d===null&&Mr&&((A=E=lo)&&(E=yce(E,p.type,p.pendingProps,No),E!==null?(p.stateNode=E,ns=p,lo=hc(E.firstChild),No=!1,A=!0):A=!1),A||Wc(p)),Re(p),A=p.type,R=p.pendingProps,Y=d!==null?d.memoizedProps:null,E=R.children,r5(A,R)?E=null:Y!==null&&r5(A,Y)&&(p.flags|=32),p.memoizedState!==null&&(A=hy(d,p,x3,null,null,b),My._currentValue=A),TE(d,p),Qi(d,p,E,b),p.child;case 6:return d===null&&Mr&&((d=b=lo)&&(b=vce(b,p.pendingProps,No),b!==null?(p.stateNode=b,ns=p,lo=null,d=!0):d=!1),d||Wc(p)),null;case 13:return _9(d,p,b);case 4:return Fe(p,p.stateNode.containerInfo),E=p.pendingProps,d===null?p.child=zu(p,null,E,b):Qi(d,p,E,b),p.child;case 11:return p9(d,p,p.type,p.pendingProps,b);case 7:return Qi(d,p,p.pendingProps,b),p.child;case 8:return Qi(d,p,p.pendingProps.children,b),p.child;case 12:return Qi(d,p,p.pendingProps.children,b),p.child;case 10:return E=p.pendingProps,Fu(p,p.type,E.value),Qi(d,p,E.children,b),p.child;case 9:return A=p.type._context,E=p.pendingProps.children,Vd(p),A=Ei(A),E=E(A),p.flags|=1,Qi(d,p,E,b),p.child;case 14:return m9(d,p,p.type,p.pendingProps,b);case 15:return g9(d,p,p.type,p.pendingProps,b);case 19:return T9(d,p,b);case 31:return jle(d,p,b);case 22:return b9(d,p,b,p.pendingProps);case 24:return Vd(p),E=Ei(zs),d===null?(A=oy(),A===null&&(A=Uo,R=ry(),A.pooledCache=R,R.refCount++,R!==null&&(A.pooledCacheLanes|=b),A=R),p.memoizedState={parent:E,cache:A},Jd(p),Fu(p,zs,A)):((d.lanes&b)!==0&&(bg(d,p),_p(p,null,null,b),Ep()),A=d.memoizedState,R=p.memoizedState,A.parent!==E?(A={parent:E,cache:E},p.memoizedState=A,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=A),Fu(p,zs,E)):(E=R.cache,Fu(p,zs,E),E!==A.cache&&fg(p,[zs],b,!0))),Qi(d,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function rf(d){d.flags|=4}function I3(d,p,b,E,A){if((p=(d.mode&32)!==0)&&(p=!1),p){if(d.flags|=16777216,(A&335544128)===A)if(d.stateNode.complete)d.flags|=8192;else if(Q9())d.flags|=8192;else throw Zd=gg,vp}else d.flags&=-16777217}function k9(d,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!UD(p))if(Q9())d.flags|=8192;else throw Zd=gg,vp}function kE(d,p){p!==null&&(d.flags|=4),d.flags&16384&&(p=d.tag!==22?Jt():536870912,d.lanes|=p,Ig|=p)}function yy(d,p){if(!Mr)switch(d.tailMode){case"hidden":p=d.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?d.tail=null:b.sibling=null;break;case"collapsed":b=d.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:E.sibling=null}}function as(d){var p=d.alternate!==null&&d.alternate.child===d.child,b=0,E=0;if(p)for(var A=d.child;A!==null;)b|=A.lanes|A.childLanes,E|=A.subtreeFlags&65011712,E|=A.flags&65011712,A.return=d,A=A.sibling;else for(A=d.child;A!==null;)b|=A.lanes|A.childLanes,E|=A.subtreeFlags,E|=A.flags,A.return=d,A=A.sibling;return d.subtreeFlags|=E,d.childLanes=b,p}function Hle(d,p,b){var E=p.pendingProps;switch($i(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(p),null;case 1:return as(p),null;case 3:return b=p.stateNode,E=null,d!==null&&(E=d.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),Yc(zs),Oe(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(d===null||d.child===null)&&(Tn(p)?rf(p):d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,ty())),as(p),null;case 26:var A=p.type,R=p.memoizedState;return d===null?(rf(p),R!==null?(as(p),k9(p,R)):(as(p),I3(p,A,null,E,b))):R?R!==d.memoizedState?(rf(p),as(p),k9(p,R)):(as(p),p.flags&=-16777217):(d=d.memoizedProps,d!==E&&rf(p),as(p),I3(p,A,d,E,b)),null;case 27:if(nt(p),b=Ce.current,A=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==E&&rf(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return as(p),null}d=Te.current,Tn(p)?Xn(p):(d=OD(A,E,b),p.stateNode=d,rf(p))}return as(p),null;case 5:if(nt(p),A=p.type,d!==null&&p.stateNode!=null)d.memoizedProps!==E&&rf(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return as(p),null}if(R=Te.current,Tn(p))Xn(p);else{var Y=UE(Ce.current);switch(R){case 1:R=Y.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:R=Y.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":R=Y.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":R=Y.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":R=Y.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof E.is=="string"?Y.createElement("select",{is:E.is}):Y.createElement("select"),E.multiple?R.multiple=!0:E.size&&(R.size=E.size);break;default:R=typeof E.is=="string"?Y.createElement(A,{is:E.is}):Y.createElement(A)}}R[gr]=p,R[Os]=E;e:for(Y=p.child;Y!==null;){if(Y.tag===5||Y.tag===6)R.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===p)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===p)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}p.stateNode=R;e:switch(ea(R,A,E),A){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&rf(p)}}return as(p),I3(p,p.type,d===null?null:d.memoizedProps,p.pendingProps,b),null;case 6:if(d&&p.stateNode!=null)d.memoizedProps!==E&&rf(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(r(166));if(d=Ce.current,Tn(p)){if(d=p.stateNode,b=p.memoizedProps,E=null,A=ns,A!==null)switch(A.tag){case 27:case 5:E=A.memoizedProps}d[gr]=p,d=!!(d.nodeValue===b||E!==null&&E.suppressHydrationWarning===!0||_D(d.nodeValue,b)),d||Wc(p,!0)}else d=UE(d).createTextNode(E),d[gr]=p,p.stateNode=d}return as(p),null;case 31:if(b=p.memoizedState,d===null||d.memoizedState!==null){if(E=Tn(p),b!==null){if(d===null){if(!E)throw Error(r(318));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(557));d[gr]=p}else $u(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;as(p),d=!1}else b=ty(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=b),d=!0;if(!d)return p.flags&256?(Na(p),p):(Na(p),null);if((p.flags&128)!==0)throw Error(r(558))}return as(p),null;case 13:if(E=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(A=Tn(p),E!==null&&E.dehydrated!==null){if(d===null){if(!A)throw Error(r(318));if(A=p.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[gr]=p}else $u(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;as(p),A=!1}else A=ty(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=A),A=!0;if(!A)return p.flags&256?(Na(p),p):(Na(p),null)}return Na(p),(p.flags&128)!==0?(p.lanes=b,p):(b=E!==null,d=d!==null&&d.memoizedState!==null,b&&(E=p.child,A=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(A=E.alternate.memoizedState.cachePool.pool),R=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(R=E.memoizedState.cachePool.pool),R!==A&&(E.flags|=2048)),b!==d&&b&&(p.child.flags|=8192),kE(p,p.updateQueue),as(p),null);case 4:return Oe(),d===null&&X3(p.stateNode.containerInfo),as(p),null;case 10:return Yc(p.type),as(p),null;case 19:if(se(Ts),E=p.memoizedState,E===null)return as(p),null;if(A=(p.flags&128)!==0,R=E.rendering,R===null)if(A)yy(E,!1);else{if(Hs!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(R=wg(d),R!==null){for(p.flags|=128,yy(E,!1),d=R.updateQueue,p.updateQueue=d,kE(p,d),p.subtreeFlags=0,d=b,b=p.child;b!==null;)fE(b,d),b=b.sibling;return Q(Ts,Ts.current&1|2),Mr&&Ss(p,E.treeForkCount),p.child}d=d.sibling}E.tail!==null&&Le()>ME&&(p.flags|=128,A=!0,yy(E,!1),p.lanes=4194304)}else{if(!A)if(d=wg(R),d!==null){if(p.flags|=128,A=!0,d=d.updateQueue,p.updateQueue=d,kE(p,d),yy(E,!0),E.tail===null&&E.tailMode==="hidden"&&!R.alternate&&!Mr)return as(p),null}else 2*Le()-E.renderingStartTime>ME&&b!==536870912&&(p.flags|=128,A=!0,yy(E,!1),p.lanes=4194304);E.isBackwards?(R.sibling=p.child,p.child=R):(d=E.last,d!==null?d.sibling=R:p.child=R,E.last=R)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=Le(),d.sibling=null,b=Ts.current,Q(Ts,A?b&1|2:b&1),Mr&&Ss(p,E.treeForkCount),d):(as(p),null);case 22:case 23:return Na(p),Sp(),E=p.memoizedState!==null,d!==null?d.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(b&536870912)!==0&&(p.flags&128)===0&&(as(p),p.subtreeFlags&6&&(p.flags|=8192)):as(p),b=p.updateQueue,b!==null&&kE(p,b.retryQueue),b=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048),d!==null&&se(Yd),null;case 24:return b=null,d!==null&&(b=d.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),Yc(zs),as(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function Vle(d,p){switch($i(p),p.tag){case 1:return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return Yc(zs),Oe(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 26:case 27:case 5:return nt(p),null;case 31:if(p.memoizedState!==null){if(Na(p),p.alternate===null)throw Error(r(340));$u()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 13:if(Na(p),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(r(340));$u()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return se(Ts),null;case 4:return Oe(),null;case 10:return Yc(p.type),null;case 22:case 23:return Na(p),Sp(),d!==null&&se(Yd),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 24:return Yc(zs),null;case 25:return null;default:return null}}function A9(d,p){switch($i(p),p.tag){case 3:Yc(zs),Oe();break;case 26:case 27:case 5:nt(p);break;case 4:Oe();break;case 31:p.memoizedState!==null&&Na(p);break;case 13:Na(p);break;case 19:se(Ts);break;case 10:Yc(p.type);break;case 22:case 23:Na(p),Sp(),d!==null&&se(Yd);break;case 24:Yc(zs)}}function vy(d,p){try{var b=p.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var A=E.next;b=A;do{if((b.tag&d)===d){E=void 0;var R=b.create,Y=b.inst;E=R(),Y.destroy=E}b=b.next}while(b!==A)}}catch(ae){Eo(p,p.return,ae)}}function Mh(d,p,b){try{var E=p.updateQueue,A=E!==null?E.lastEffect:null;if(A!==null){var R=A.next;E=R;do{if((E.tag&d)===d){var Y=E.inst,ae=Y.destroy;if(ae!==void 0){Y.destroy=void 0,A=p;var ke=b,Ye=ae;try{Ye()}catch(ot){Eo(A,ke,ot)}}}E=E.next}while(E!==R)}}catch(ot){Eo(p,p.return,ot)}}function N9(d){var p=d.updateQueue;if(p!==null){var b=d.stateNode;try{wE(p,b)}catch(E){Eo(d,d.return,E)}}}function I9(d,p,b){b.props=As(d.type,d.memoizedProps),b.state=d.memoizedState;try{b.componentWillUnmount()}catch(E){Eo(d,p,E)}}function xy(d,p){try{var b=d.ref;if(b!==null){switch(d.tag){case 26:case 27:case 5:var E=d.stateNode;break;case 30:E=d.stateNode;break;default:E=d.stateNode}typeof b=="function"?d.refCleanup=b(E):b.current=E}}catch(A){Eo(d,p,A)}}function Ku(d,p){var b=d.ref,E=d.refCleanup;if(b!==null)if(typeof E=="function")try{E()}catch(A){Eo(d,p,A)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(A){Eo(d,p,A)}else b.current=null}function R9(d){var p=d.type,b=d.memoizedProps,E=d.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":b.autoFocus&&E.focus();break e;case"img":b.src?E.src=b.src:b.srcSet&&(E.srcset=b.srcSet)}}catch(A){Eo(d,d.return,A)}}function R3(d,p,b){try{var E=d.stateNode;fce(E,d.type,b,p),E[Os]=p}catch(A){Eo(d,d.return,A)}}function M9(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&Bh(d.type)||d.tag===4}function M3(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||M9(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&Bh(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function D3(d,p,b){var E=d.tag;if(E===5||E===6)d=d.stateNode,p?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(d,p):(p=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,p.appendChild(d),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=$t));else if(E!==4&&(E===27&&Bh(d.type)&&(b=d.stateNode,p=null),d=d.child,d!==null))for(D3(d,p,b),d=d.sibling;d!==null;)D3(d,p,b),d=d.sibling}function AE(d,p,b){var E=d.tag;if(E===5||E===6)d=d.stateNode,p?b.insertBefore(d,p):b.appendChild(d);else if(E!==4&&(E===27&&Bh(d.type)&&(b=d.stateNode),d=d.child,d!==null))for(AE(d,p,b),d=d.sibling;d!==null;)AE(d,p,b),d=d.sibling}function D9(d){var p=d.stateNode,b=d.memoizedProps;try{for(var E=d.type,A=p.attributes;A.length;)p.removeAttributeNode(A[0]);ea(p,E,b),p[gr]=d,p[Os]=b}catch(R){Eo(d,d.return,R)}}var of=!1,ai=!1,O3=!1,O9=typeof WeakSet=="function"?WeakSet:Set,Fi=null;function qle(d,p){if(d=d.containerInfo,t5=KE,d=bh(d),cp(d)){if("selectionStart"in d)var b={start:d.selectionStart,end:d.selectionEnd};else e:{b=(b=d.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var A=E.anchorOffset,R=E.focusNode;E=E.focusOffset;try{b.nodeType,R.nodeType}catch{b=null;break e}var Y=0,ae=-1,ke=-1,Ye=0,ot=0,dt=d,Ke=null;t:for(;;){for(var Xe;dt!==b||A!==0&&dt.nodeType!==3||(ae=Y+A),dt!==R||E!==0&&dt.nodeType!==3||(ke=Y+E),dt.nodeType===3&&(Y+=dt.nodeValue.length),(Xe=dt.firstChild)!==null;)Ke=dt,dt=Xe;for(;;){if(dt===d)break t;if(Ke===b&&++Ye===A&&(ae=Y),Ke===R&&++ot===E&&(ke=Y),(Xe=dt.nextSibling)!==null)break;dt=Ke,Ke=dt.parentNode}dt=Xe}b=ae===-1||ke===-1?null:{start:ae,end:ke}}else b=null}b=b||{start:0,end:0}}else b=null;for(n5={focusedElem:d,selectionRange:b},KE=!1,Fi=p;Fi!==null;)if(p=Fi,d=p.child,(p.subtreeFlags&1028)!==0&&d!==null)d.return=p,Fi=d;else for(;Fi!==null;){switch(p=Fi,R=p.alternate,d=p.flags,p.tag){case 0:if((d&4)!==0&&(d=p.updateQueue,d=d!==null?d.events:null,d!==null))for(b=0;b<d.length;b++)A=d[b],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((d&1024)!==0&&R!==null){d=void 0,b=p,A=R.memoizedProps,R=R.memoizedState,E=b.stateNode;try{var dn=As(b.type,A);d=E.getSnapshotBeforeUpdate(dn,R),E.__reactInternalSnapshotBeforeUpdate=d}catch(jn){Eo(b,b.return,jn)}}break;case 3:if((d&1024)!==0){if(d=p.stateNode.containerInfo,b=d.nodeType,b===9)s5(d);else if(b===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":s5(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=p.sibling,d!==null){d.return=p.return,Fi=d;break}Fi=p.return}}function P9(d,p,b){var E=b.flags;switch(b.tag){case 0:case 11:case 15:af(d,b),E&4&&vy(5,b);break;case 1:if(af(d,b),E&4)if(d=b.stateNode,p===null)try{d.componentDidMount()}catch(Y){Eo(b,b.return,Y)}else{var A=As(b.type,p.memoizedProps);p=p.memoizedState;try{d.componentDidUpdate(A,p,d.__reactInternalSnapshotBeforeUpdate)}catch(Y){Eo(b,b.return,Y)}}E&64&&N9(b),E&512&&xy(b,b.return);break;case 3:if(af(d,b),E&64&&(d=b.updateQueue,d!==null)){if(p=null,b.child!==null)switch(b.child.tag){case 27:case 5:p=b.child.stateNode;break;case 1:p=b.child.stateNode}try{wE(d,p)}catch(Y){Eo(b,b.return,Y)}}break;case 27:p===null&&E&4&&D9(b);case 26:case 5:af(d,b),p===null&&E&4&&R9(b),E&512&&xy(b,b.return);break;case 12:af(d,b);break;case 31:af(d,b),E&4&&F9(d,b);break;case 13:af(d,b),E&4&&B9(d,b),E&64&&(d=b.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(b=ece.bind(null,b),xce(d,b))));break;case 22:if(E=b.memoizedState!==null||of,!E){p=p!==null&&p.memoizedState!==null||ai,A=of;var R=ai;of=E,(ai=p)&&!R?lf(d,b,(b.subtreeFlags&8772)!==0):af(d,b),of=A,ai=R}break;case 30:break;default:af(d,b)}}function L9(d){var p=d.alternate;p!==null&&(d.alternate=null,L9(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&Zn(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var gs=null,tl=!1;function sf(d,p,b){for(b=b.child;b!==null;)$9(d,p,b),b=b.sibling}function $9(d,p,b){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(Be,b)}catch{}switch(b.tag){case 26:ai||Ku(b,p),sf(d,p,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:ai||Ku(b,p);var E=gs,A=tl;Bh(b.type)&&(gs=b.stateNode,tl=!1),sf(d,p,b),Ny(b.stateNode),gs=E,tl=A;break;case 5:ai||Ku(b,p);case 6:if(E=gs,A=tl,gs=null,sf(d,p,b),gs=E,tl=A,gs!==null)if(tl)try{(gs.nodeType===9?gs.body:gs.nodeName==="HTML"?gs.ownerDocument.body:gs).removeChild(b.stateNode)}catch(R){Eo(b,p,R)}else try{gs.removeChild(b.stateNode)}catch(R){Eo(b,p,R)}break;case 18:gs!==null&&(tl?(d=gs,ND(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,b.stateNode),Fg(d)):ND(gs,b.stateNode));break;case 4:E=gs,A=tl,gs=b.stateNode.containerInfo,tl=!0,sf(d,p,b),gs=E,tl=A;break;case 0:case 11:case 14:case 15:Mh(2,b,p),ai||Mh(4,b,p),sf(d,p,b);break;case 1:ai||(Ku(b,p),E=b.stateNode,typeof E.componentWillUnmount=="function"&&I9(b,p,E)),sf(d,p,b);break;case 21:sf(d,p,b);break;case 22:ai=(E=ai)||b.memoizedState!==null,sf(d,p,b),ai=E;break;default:sf(d,p,b)}}function F9(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{Fg(d)}catch(b){Eo(p,p.return,b)}}}function B9(d,p){if(p.memoizedState===null&&(d=p.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Fg(d)}catch(b){Eo(p,p.return,b)}}function Gle(d){switch(d.tag){case 31:case 13:case 19:var p=d.stateNode;return p===null&&(p=d.stateNode=new O9),p;case 22:return d=d.stateNode,p=d._retryCache,p===null&&(p=d._retryCache=new O9),p;default:throw Error(r(435,d.tag))}}function NE(d,p){var b=Gle(d);p.forEach(function(E){if(!b.has(E)){b.add(E);var A=tce.bind(null,d,E);E.then(A,A)}})}function nl(d,p){var b=p.deletions;if(b!==null)for(var E=0;E<b.length;E++){var A=b[E],R=d,Y=p,ae=Y;e:for(;ae!==null;){switch(ae.tag){case 27:if(Bh(ae.type)){gs=ae.stateNode,tl=!1;break e}break;case 5:gs=ae.stateNode,tl=!1;break e;case 3:case 4:gs=ae.stateNode.containerInfo,tl=!0;break e}ae=ae.return}if(gs===null)throw Error(r(160));$9(R,Y,A),gs=null,tl=!1,R=A.alternate,R!==null&&(R.return=null),A.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)z9(p,d),p=p.sibling}var Xc=null;function z9(d,p){var b=d.alternate,E=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:nl(p,d),rl(d),E&4&&(Mh(3,d,d.return),vy(3,d),Mh(5,d,d.return));break;case 1:nl(p,d),rl(d),E&512&&(ai||b===null||Ku(b,b.return)),E&64&&of&&(d=d.updateQueue,d!==null&&(E=d.callbacks,E!==null&&(b=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=b===null?E:b.concat(E))));break;case 26:var A=Xc;if(nl(p,d),rl(d),E&512&&(ai||b===null||Ku(b,b.return)),E&4){var R=b!==null?b.memoizedState:null;if(E=d.memoizedState,b===null)if(E===null)if(d.stateNode===null){e:{E=d.type,b=d.memoizedProps,A=A.ownerDocument||A;t:switch(E){case"title":R=A.getElementsByTagName("title")[0],(!R||R[Ao]||R[gr]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=A.createElement(E),A.head.insertBefore(R,A.querySelector("head > title"))),ea(R,E,b),R[gr]=d,mt(R),E=R;break e;case"link":var Y=zD("link","href",A).get(E+(b.href||""));if(Y){for(var ae=0;ae<Y.length;ae++)if(R=Y[ae],R.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&R.getAttribute("rel")===(b.rel==null?null:b.rel)&&R.getAttribute("title")===(b.title==null?null:b.title)&&R.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){Y.splice(ae,1);break t}}R=A.createElement(E),ea(R,E,b),A.head.appendChild(R);break;case"meta":if(Y=zD("meta","content",A).get(E+(b.content||""))){for(ae=0;ae<Y.length;ae++)if(R=Y[ae],R.getAttribute("content")===(b.content==null?null:""+b.content)&&R.getAttribute("name")===(b.name==null?null:b.name)&&R.getAttribute("property")===(b.property==null?null:b.property)&&R.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&R.getAttribute("charset")===(b.charSet==null?null:b.charSet)){Y.splice(ae,1);break t}}R=A.createElement(E),ea(R,E,b),A.head.appendChild(R);break;default:throw Error(r(468,E))}R[gr]=d,mt(R),E=R}d.stateNode=E}else jD(A,d.type,d.stateNode);else d.stateNode=BD(A,E,d.memoizedProps);else R!==E?(R===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):R.count--,E===null?jD(A,d.type,d.stateNode):BD(A,E,d.memoizedProps)):E===null&&d.stateNode!==null&&R3(d,d.memoizedProps,b.memoizedProps)}break;case 27:nl(p,d),rl(d),E&512&&(ai||b===null||Ku(b,b.return)),b!==null&&E&4&&R3(d,d.memoizedProps,b.memoizedProps);break;case 5:if(nl(p,d),rl(d),E&512&&(ai||b===null||Ku(b,b.return)),d.flags&32){A=d.stateNode;try{On(A,"")}catch(dn){Eo(d,d.return,dn)}}E&4&&d.stateNode!=null&&(A=d.memoizedProps,R3(d,A,b!==null?b.memoizedProps:A)),E&1024&&(O3=!0);break;case 6:if(nl(p,d),rl(d),E&4){if(d.stateNode===null)throw Error(r(162));E=d.memoizedProps,b=d.stateNode;try{b.nodeValue=E}catch(dn){Eo(d,d.return,dn)}}break;case 3:if(qE=null,A=Xc,Xc=HE(p.containerInfo),nl(p,d),Xc=A,rl(d),E&4&&b!==null&&b.memoizedState.isDehydrated)try{Fg(p.containerInfo)}catch(dn){Eo(d,d.return,dn)}O3&&(O3=!1,j9(d));break;case 4:E=Xc,Xc=HE(d.stateNode.containerInfo),nl(p,d),rl(d),Xc=E;break;case 12:nl(p,d),rl(d);break;case 31:nl(p,d),rl(d),E&4&&(E=d.updateQueue,E!==null&&(d.updateQueue=null,NE(d,E)));break;case 13:nl(p,d),rl(d),d.child.flags&8192&&d.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(RE=Le()),E&4&&(E=d.updateQueue,E!==null&&(d.updateQueue=null,NE(d,E)));break;case 22:A=d.memoizedState!==null;var ke=b!==null&&b.memoizedState!==null,Ye=of,ot=ai;if(of=Ye||A,ai=ot||ke,nl(p,d),ai=ot,of=Ye,rl(d),E&8192)e:for(p=d.stateNode,p._visibility=A?p._visibility&-2:p._visibility|1,A&&(b===null||ke||of||ai||Mp(d)),b=null,p=d;;){if(p.tag===5||p.tag===26){if(b===null){ke=b=p;try{if(R=ke.stateNode,A)Y=R.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ae=ke.stateNode;var dt=ke.memoizedProps.style,Ke=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;ae.style.display=Ke==null||typeof Ke=="boolean"?"":(""+Ke).trim()}}catch(dn){Eo(ke,ke.return,dn)}}}else if(p.tag===6){if(b===null){ke=p;try{ke.stateNode.nodeValue=A?"":ke.memoizedProps}catch(dn){Eo(ke,ke.return,dn)}}}else if(p.tag===18){if(b===null){ke=p;try{var Xe=ke.stateNode;A?ID(Xe,!0):ID(ke.stateNode,!1)}catch(dn){Eo(ke,ke.return,dn)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===d)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break e;for(;p.sibling===null;){if(p.return===null||p.return===d)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=d.updateQueue,E!==null&&(b=E.retryQueue,b!==null&&(E.retryQueue=null,NE(d,b))));break;case 19:nl(p,d),rl(d),E&4&&(E=d.updateQueue,E!==null&&(d.updateQueue=null,NE(d,E)));break;case 30:break;case 21:break;default:nl(p,d),rl(d)}}function rl(d){var p=d.flags;if(p&2){try{for(var b,E=d.return;E!==null;){if(M9(E)){b=E;break}E=E.return}if(b==null)throw Error(r(160));switch(b.tag){case 27:var A=b.stateNode,R=M3(d);AE(d,R,A);break;case 5:var Y=b.stateNode;b.flags&32&&(On(Y,""),b.flags&=-33);var ae=M3(d);AE(d,ae,Y);break;case 3:case 4:var ke=b.stateNode.containerInfo,Ye=M3(d);D3(d,Ye,ke);break;default:throw Error(r(161))}}catch(ot){Eo(d,d.return,ot)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function j9(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var p=d;j9(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),d=d.sibling}}function af(d,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)P9(d,p.alternate,p),p=p.sibling}function Mp(d){for(d=d.child;d!==null;){var p=d;switch(p.tag){case 0:case 11:case 14:case 15:Mh(4,p,p.return),Mp(p);break;case 1:Ku(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&I9(p,p.return,b),Mp(p);break;case 27:Ny(p.stateNode);case 26:case 5:Ku(p,p.return),Mp(p);break;case 22:p.memoizedState===null&&Mp(p);break;case 30:Mp(p);break;default:Mp(p)}d=d.sibling}}function lf(d,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,A=d,R=p,Y=R.flags;switch(R.tag){case 0:case 11:case 15:lf(A,R,b),vy(4,R);break;case 1:if(lf(A,R,b),E=R,A=E.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ye){Eo(E,E.return,Ye)}if(E=R,A=E.updateQueue,A!==null){var ae=E.stateNode;try{var ke=A.shared.hiddenCallbacks;if(ke!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ke.length;A++)js(ke[A],ae)}catch(Ye){Eo(E,E.return,Ye)}}b&&Y&64&&N9(R),xy(R,R.return);break;case 27:D9(R);case 26:case 5:lf(A,R,b),b&&E===null&&Y&4&&R9(R),xy(R,R.return);break;case 12:lf(A,R,b);break;case 31:lf(A,R,b),b&&Y&4&&F9(A,R);break;case 13:lf(A,R,b),b&&Y&4&&B9(A,R);break;case 22:R.memoizedState===null&&lf(A,R,b),xy(R,R.return);break;case 30:break;default:lf(A,R,b)}p=p.sibling}}function P3(d,p){var b=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),d=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(d=p.memoizedState.cachePool.pool),d!==b&&(d!=null&&d.refCount++,b!=null&&qd(b))}function L3(d,p){d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&qd(d))}function Qc(d,p,b,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)U9(d,p,b,E),p=p.sibling}function U9(d,p,b,E){var A=p.flags;switch(p.tag){case 0:case 11:case 15:Qc(d,p,b,E),A&2048&&vy(9,p);break;case 1:Qc(d,p,b,E);break;case 3:Qc(d,p,b,E),A&2048&&(d=null,p.alternate!==null&&(d=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==d&&(p.refCount++,d!=null&&qd(d)));break;case 12:if(A&2048){Qc(d,p,b,E),d=p.stateNode;try{var R=p.memoizedProps,Y=R.id,ae=R.onPostCommit;typeof ae=="function"&&ae(Y,p.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(ke){Eo(p,p.return,ke)}}else Qc(d,p,b,E);break;case 31:Qc(d,p,b,E);break;case 13:Qc(d,p,b,E);break;case 23:break;case 22:R=p.stateNode,Y=p.alternate,p.memoizedState!==null?R._visibility&2?Qc(d,p,b,E):wy(d,p):R._visibility&2?Qc(d,p,b,E):(R._visibility|=2,kg(d,p,b,E,(p.subtreeFlags&10256)!==0||!1)),A&2048&&P3(Y,p);break;case 24:Qc(d,p,b,E),A&2048&&L3(p.alternate,p);break;default:Qc(d,p,b,E)}}function kg(d,p,b,E,A){for(A=A&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var R=d,Y=p,ae=b,ke=E,Ye=Y.flags;switch(Y.tag){case 0:case 11:case 15:kg(R,Y,ae,ke,A),vy(8,Y);break;case 23:break;case 22:var ot=Y.stateNode;Y.memoizedState!==null?ot._visibility&2?kg(R,Y,ae,ke,A):wy(R,Y):(ot._visibility|=2,kg(R,Y,ae,ke,A)),A&&Ye&2048&&P3(Y.alternate,Y);break;case 24:kg(R,Y,ae,ke,A),A&&Ye&2048&&L3(Y.alternate,Y);break;default:kg(R,Y,ae,ke,A)}p=p.sibling}}function wy(d,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=d,E=p,A=E.flags;switch(E.tag){case 22:wy(b,E),A&2048&&P3(E.alternate,E);break;case 24:wy(b,E),A&2048&&L3(E.alternate,E);break;default:wy(b,E)}p=p.sibling}}var Ey=8192;function Ag(d,p,b){if(d.subtreeFlags&Ey)for(d=d.child;d!==null;)H9(d,p,b),d=d.sibling}function H9(d,p,b){switch(d.tag){case 26:Ag(d,p,b),d.flags&Ey&&d.memoizedState!==null&&Mce(b,Xc,d.memoizedState,d.memoizedProps);break;case 5:Ag(d,p,b);break;case 3:case 4:var E=Xc;Xc=HE(d.stateNode.containerInfo),Ag(d,p,b),Xc=E;break;case 22:d.memoizedState===null&&(E=d.alternate,E!==null&&E.memoizedState!==null?(E=Ey,Ey=16777216,Ag(d,p,b),Ey=E):Ag(d,p,b));break;default:Ag(d,p,b)}}function V9(d){var p=d.alternate;if(p!==null&&(d=p.child,d!==null)){p.child=null;do p=d.sibling,d.sibling=null,d=p;while(d!==null)}}function _y(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];Fi=E,G9(E,d)}V9(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)q9(d),d=d.sibling}function q9(d){switch(d.tag){case 0:case 11:case 15:_y(d),d.flags&2048&&Mh(9,d,d.return);break;case 3:_y(d);break;case 12:_y(d);break;case 22:var p=d.stateNode;d.memoizedState!==null&&p._visibility&2&&(d.return===null||d.return.tag!==13)?(p._visibility&=-3,IE(d)):_y(d);break;default:_y(d)}}function IE(d){var p=d.deletions;if((d.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var E=p[b];Fi=E,G9(E,d)}V9(d)}for(d=d.child;d!==null;){switch(p=d,p.tag){case 0:case 11:case 15:Mh(8,p,p.return),IE(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,IE(p));break;default:IE(p)}d=d.sibling}}function G9(d,p){for(;Fi!==null;){var b=Fi;switch(b.tag){case 0:case 11:case 15:Mh(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var E=b.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:qd(b.memoizedState.cache)}if(E=b.child,E!==null)E.return=b,Fi=E;else e:for(b=d;Fi!==null;){E=Fi;var A=E.sibling,R=E.return;if(L9(E),E===b){Fi=null;break e}if(A!==null){A.return=R,Fi=A;break e}Fi=R}}}var Wle={getCacheForType:function(d){var p=Ei(zs),b=p.data.get(d);return b===void 0&&(b=d(),p.data.set(d,b)),b},cacheSignal:function(){return Ei(zs).controller.signal}},Yle=typeof WeakMap=="function"?WeakMap:Map,uo=0,Uo=null,Dr=null,$r=0,wo=0,Ll=null,Dh=!1,Ng=!1,$3=!1,cf=0,Hs=0,Oh=0,Dp=0,F3=0,$l=0,Ig=0,Sy=null,ol=null,B3=!1,RE=0,W9=0,ME=1/0,DE=null,Ph=null,Ti=0,Lh=null,Rg=null,uf=0,z3=0,j3=null,Y9=null,Ty=0,U3=null;function Fl(){return(uo&2)!==0&&$r!==0?$r&-$r:J.T!==null?Y3():Go()}function K9(){if($l===0)if(($r&536870912)===0||Mr){var d=er;er<<=1,(er&3932160)===0&&(er=262144),$l=d}else $l=536870912;return d=ei.current,d!==null&&(d.flags|=32),$l}function sl(d,p,b){(d===Uo&&(wo===2||wo===9)||d.cancelPendingCommit!==null)&&(Mg(d,0),$h(d,$r,$l,!1)),Kn(d,b),((uo&2)===0||d!==Uo)&&(d===Uo&&((uo&2)===0&&(Dp|=b),Hs===4&&$h(d,$r,$l,!1)),Zu(d))}function Z9(d,p,b){if((uo&6)!==0)throw Error(r(327));var E=!b&&(p&127)===0&&(p&d.expiredLanes)===0||Ue(d,p),A=E?Jle(d,p):V3(d,p,!0),R=E;do{if(A===0){Ng&&!E&&$h(d,p,0,!1);break}else{if(b=d.current.alternate,R&&!Kle(b)){A=V3(d,p,!1),R=!1;continue}if(A===2){if(R=p,d.errorRecoveryDisabledLanes&R)var Y=0;else Y=d.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){p=Y;e:{var ae=d;A=Sy;var ke=ae.current.memoizedState.isDehydrated;if(ke&&(Mg(ae,Y).flags|=256),Y=V3(ae,Y,!1),Y!==2){if($3&&!ke){ae.errorRecoveryDisabledLanes|=R,Dp|=R,A=4;break e}R=ol,ol=A,R!==null&&(ol===null?ol=R:ol.push.apply(ol,R))}A=Y}if(R=!1,A!==2)continue}}if(A===1){Mg(d,0),$h(d,p,0,!0);break}e:{switch(E=d,R=A,R){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:$h(E,p,$l,!Dh);break e;case 2:ol=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(A=RE+300-Le(),10<A)){if($h(E,p,$l,!Dh),ye(E,0,!0)!==0)break e;uf=p,E.timeoutHandle=kD(J9.bind(null,E,b,ol,DE,B3,p,$l,Dp,Ig,Dh,R,"Throttled",-0,0),A);break e}J9(E,b,ol,DE,B3,p,$l,Dp,Ig,Dh,R,null,-0,0)}}break}while(!0);Zu(d)}function J9(d,p,b,E,A,R,Y,ae,ke,Ye,ot,dt,Ke,Xe){if(d.timeoutHandle=-1,dt=p.subtreeFlags,dt&8192||(dt&16785408)===16785408){dt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$t},H9(p,R,dt);var dn=(R&62914560)===R?RE-Le():(R&4194048)===R?W9-Le():0;if(dn=Dce(dt,dn),dn!==null){uf=R,d.cancelPendingCommit=dn(sD.bind(null,d,p,R,b,E,A,Y,ae,ke,ot,dt,null,Ke,Xe)),$h(d,R,Y,!Ye);return}}sD(d,p,R,b,E,A,Y,ae,ke)}function Kle(d){for(var p=d;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var E=0;E<b.length;E++){var A=b[E],R=A.getSnapshot;A=A.value;try{if(!Ca(R(),A))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function $h(d,p,b,E){p&=~F3,p&=~Dp,d.suspendedLanes|=p,d.pingedLanes&=~p,E&&(d.warmLanes|=p),E=d.expirationTimes;for(var A=p;0<A;){var R=31-jt(A),Y=1<<R;E[R]=-1,A&=~Y}b!==0&&zt(d,b,p)}function OE(){return(uo&6)===0?(Cy(0),!1):!0}function H3(){if(Dr!==null){if(wo===0)var d=Dr.return;else d=Dr,ha=Pl=null,gy(d),Bu=null,xp=0,d=Dr;for(;d!==null;)A9(d.alternate,d),d=d.return;Dr=null}}function Mg(d,p){var b=d.timeoutHandle;b!==-1&&(d.timeoutHandle=-1,mce(b)),b=d.cancelPendingCommit,b!==null&&(d.cancelPendingCommit=null,b()),uf=0,H3(),Uo=d,Dr=b=Rl(d.current,null),$r=p,wo=0,Ll=null,Dh=!1,Ng=Ue(d,p),$3=!1,Ig=$l=F3=Dp=Oh=Hs=0,ol=Sy=null,B3=!1,(p&8)!==0&&(p|=p&32);var E=d.entangledLanes;if(E!==0)for(d=d.entanglements,E&=p;0<E;){var A=31-jt(E),R=1<<A;p|=d[A],E&=~R}return cf=p,xh(),b}function X9(d,p){or=null,J.H=Un,p===Kd||p===mg?(p=xE(),wo=3):p===vp?(p=xE(),wo=4):wo=p===w3?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Ll=p,Dr===null&&(Hs=1,Zo(d,fa(p,d.current)))}function Q9(){var d=ei.current;return d===null?!0:($r&4194048)===$r?Qa===null:($r&62914560)===$r||($r&536870912)!==0?d===Qa:!1}function eD(){var d=J.H;return J.H=Un,d===null?Un:d}function tD(){var d=J.A;return J.A=Wle,d}function PE(){Hs=4,Dh||($r&4194048)!==$r&&ei.current!==null||(Ng=!0),(Oh&134217727)===0&&(Dp&134217727)===0||Uo===null||$h(Uo,$r,$l,!1)}function V3(d,p,b){var E=uo;uo|=2;var A=eD(),R=tD();(Uo!==d||$r!==p)&&(DE=null,Mg(d,p)),p=!1;var Y=Hs;e:do try{if(wo!==0&&Dr!==null){var ae=Dr,ke=Ll;switch(wo){case 8:H3(),Y=6;break e;case 3:case 2:case 9:case 6:ei.current===null&&(p=!0);var Ye=wo;if(wo=0,Ll=null,Dg(d,ae,ke,Ye),b&&Ng){Y=0;break e}break;default:Ye=wo,wo=0,Ll=null,Dg(d,ae,ke,Ye)}}Zle(),Y=Hs;break}catch(ot){X9(d,ot)}while(!0);return p&&d.shellSuspendCounter++,ha=Pl=null,uo=E,J.H=A,J.A=R,Dr===null&&(Uo=null,$r=0,xh()),Y}function Zle(){for(;Dr!==null;)nD(Dr)}function Jle(d,p){var b=uo;uo|=2;var E=eD(),A=tD();Uo!==d||$r!==p?(DE=null,ME=Le()+500,Mg(d,p)):Ng=Ue(d,p);e:do try{if(wo!==0&&Dr!==null){p=Dr;var R=Ll;t:switch(wo){case 1:wo=0,Ll=null,Dg(d,p,R,1);break;case 2:case 9:if(yE(R)){wo=0,Ll=null,rD(p);break}p=function(){wo!==2&&wo!==9||Uo!==d||(wo=7),Zu(d)},R.then(p,p);break e;case 3:wo=7;break e;case 4:wo=5;break e;case 7:yE(R)?(wo=0,Ll=null,rD(p)):(wo=0,Ll=null,Dg(d,p,R,7));break;case 5:var Y=null;switch(Dr.tag){case 26:Y=Dr.memoizedState;case 5:case 27:var ae=Dr;if(Y?UD(Y):ae.stateNode.complete){wo=0,Ll=null;var ke=ae.sibling;if(ke!==null)Dr=ke;else{var Ye=ae.return;Ye!==null?(Dr=Ye,LE(Ye)):Dr=null}break t}}wo=0,Ll=null,Dg(d,p,R,5);break;case 6:wo=0,Ll=null,Dg(d,p,R,6);break;case 8:H3(),Hs=6;break e;default:throw Error(r(462))}}Xle();break}catch(ot){X9(d,ot)}while(!0);return ha=Pl=null,J.H=E,J.A=A,uo=b,Dr!==null?0:(Uo=null,$r=0,xh(),Hs)}function Xle(){for(;Dr!==null&&!$e();)nD(Dr)}function nD(d){var p=C9(d.alternate,d,cf);d.memoizedProps=d.pendingProps,p===null?LE(d):Dr=p}function rD(d){var p=d,b=p.alternate;switch(p.tag){case 15:case 0:p=x9(b,p,p.pendingProps,p.type,void 0,$r);break;case 11:p=x9(b,p,p.pendingProps,p.type.render,p.ref,$r);break;case 5:gy(p);default:A9(b,p),p=Dr=fE(p,cf),p=C9(b,p,cf)}d.memoizedProps=d.pendingProps,p===null?LE(d):Dr=p}function Dg(d,p,b,E){ha=Pl=null,gy(p),Bu=null,xp=0;var A=p.return;try{if(zle(d,A,p,b,$r)){Hs=1,Zo(d,fa(b,d.current)),Dr=null;return}}catch(R){if(A!==null)throw Dr=A,R;Hs=1,Zo(d,fa(b,d.current)),Dr=null;return}p.flags&32768?(Mr||E===1?d=!0:Ng||($r&536870912)!==0?d=!1:(Dh=d=!0,(E===2||E===9||E===3||E===6)&&(E=ei.current,E!==null&&E.tag===13&&(E.flags|=16384))),oD(p,d)):LE(p)}function LE(d){var p=d;do{if((p.flags&32768)!==0){oD(p,Dh);return}d=p.return;var b=Hle(p.alternate,p,cf);if(b!==null){Dr=b;return}if(p=p.sibling,p!==null){Dr=p;return}Dr=p=d}while(p!==null);Hs===0&&(Hs=5)}function oD(d,p){do{var b=Vle(d.alternate,d);if(b!==null){b.flags&=32767,Dr=b;return}if(b=d.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(d=d.sibling,d!==null)){Dr=d;return}Dr=d=b}while(d!==null);Hs=6,Dr=null}function sD(d,p,b,E,A,R,Y,ae,ke){d.cancelPendingCommit=null;do $E();while(Ti!==0);if((uo&6)!==0)throw Error(r(327));if(p!==null){if(p===d.current)throw Error(r(177));if(R=p.lanes|p.childLanes,R|=hp,Rt(d,b,R,Y,ae,ke),d===Uo&&(Dr=Uo=null,$r=0),Rg=p,Lh=d,uf=b,z3=R,j3=A,Y9=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,nce(L,function(){return uD(),null})):(d.callbackNode=null,d.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=J.T,J.T=null,A=ee.p,ee.p=2,Y=uo,uo|=4;try{qle(d,p,b)}finally{uo=Y,ee.p=A,J.T=E}}Ti=1,iD(),aD(),lD()}}function iD(){if(Ti===1){Ti=0;var d=Lh,p=Rg,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=J.T,J.T=null;var E=ee.p;ee.p=2;var A=uo;uo|=4;try{z9(p,d);var R=n5,Y=bh(d.containerInfo),ae=R.focusedElem,ke=R.selectionRange;if(Y!==ae&&ae&&ae.ownerDocument&&lE(ae.ownerDocument.documentElement,ae)){if(ke!==null&&cp(ae)){var Ye=ke.start,ot=ke.end;if(ot===void 0&&(ot=Ye),"selectionStart"in ae)ae.selectionStart=Ye,ae.selectionEnd=Math.min(ot,ae.value.length);else{var dt=ae.ownerDocument||document,Ke=dt&&dt.defaultView||window;if(Ke.getSelection){var Xe=Ke.getSelection(),dn=ae.textContent.length,jn=Math.min(ke.start,dn),Po=ke.end===void 0?jn:Math.min(ke.end,dn);!Xe.extend&&jn>Po&&(Y=Po,Po=jn,jn=Y);var je=rg(ae,jn),De=rg(ae,Po);if(je&&De&&(Xe.rangeCount!==1||Xe.anchorNode!==je.node||Xe.anchorOffset!==je.offset||Xe.focusNode!==De.node||Xe.focusOffset!==De.offset)){var Ge=dt.createRange();Ge.setStart(je.node,je.offset),Xe.removeAllRanges(),jn>Po?(Xe.addRange(Ge),Xe.extend(De.node,De.offset)):(Ge.setEnd(De.node,De.offset),Xe.addRange(Ge))}}}}for(dt=[],Xe=ae;Xe=Xe.parentNode;)Xe.nodeType===1&&dt.push({element:Xe,left:Xe.scrollLeft,top:Xe.scrollTop});for(typeof ae.focus=="function"&&ae.focus(),ae=0;ae<dt.length;ae++){var lt=dt[ae];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}KE=!!t5,n5=t5=null}finally{uo=A,ee.p=E,J.T=b}}d.current=p,Ti=2}}function aD(){if(Ti===2){Ti=0;var d=Lh,p=Rg,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=J.T,J.T=null;var E=ee.p;ee.p=2;var A=uo;uo|=4;try{P9(d,p.alternate,p)}finally{uo=A,ee.p=E,J.T=b}}Ti=3}}function lD(){if(Ti===4||Ti===3){Ti=0,Je();var d=Lh,p=Rg,b=uf,E=Y9;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Ti=5:(Ti=0,Rg=Lh=null,cD(d,d.pendingLanes));var A=d.pendingLanes;if(A===0&&(Ph=null),xs(b),p=p.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(Be,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=J.T,A=ee.p,ee.p=2,J.T=null;try{for(var R=d.onRecoverableError,Y=0;Y<E.length;Y++){var ae=E[Y];R(ae.value,{componentStack:ae.stack})}}finally{J.T=p,ee.p=A}}(uf&3)!==0&&$E(),Zu(d),A=d.pendingLanes,(b&261930)!==0&&(A&42)!==0?d===U3?Ty++:(Ty=0,U3=d):Ty=0,Cy(0)}}function cD(d,p){(d.pooledCacheLanes&=p)===0&&(p=d.pooledCache,p!=null&&(d.pooledCache=null,qd(p)))}function $E(){return iD(),aD(),lD(),uD()}function uD(){if(Ti!==5)return!1;var d=Lh,p=z3;z3=0;var b=xs(uf),E=J.T,A=ee.p;try{ee.p=32>b?32:b,J.T=null,b=j3,j3=null;var R=Lh,Y=uf;if(Ti=0,Rg=Lh=null,uf=0,(uo&6)!==0)throw Error(r(331));var ae=uo;if(uo|=4,q9(R.current),U9(R,R.current,Y,b),uo=ae,Cy(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(Be,R)}catch{}return!0}finally{ee.p=A,J.T=E,cD(d,p)}}function dD(d,p,b){p=fa(b,p),p=fc(d.stateNode,p,2),d=Uu(d,p,2),d!==null&&(Kn(d,2),Zu(d))}function Eo(d,p,b){if(d.tag===3)dD(d,d,b);else for(;p!==null;){if(p.tag===3){dD(p,d,b);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ph===null||!Ph.has(E))){d=fa(b,d),b=Cg(2),E=Uu(p,b,2),E!==null&&(h9(b,E,p,d),Kn(E,2),Zu(E));break}}p=p.return}}function q3(d,p,b){var E=d.pingCache;if(E===null){E=d.pingCache=new Yle;var A=new Set;E.set(p,A)}else A=E.get(p),A===void 0&&(A=new Set,E.set(p,A));A.has(b)||($3=!0,A.add(b),d=Qle.bind(null,d,p,b),p.then(d,d))}function Qle(d,p,b){var E=d.pingCache;E!==null&&E.delete(p),d.pingedLanes|=d.suspendedLanes&b,d.warmLanes&=~b,Uo===d&&($r&b)===b&&(Hs===4||Hs===3&&($r&62914560)===$r&&300>Le()-RE?(uo&2)===0&&Mg(d,0):F3|=b,Ig===$r&&(Ig=0)),Zu(d)}function fD(d,p){p===0&&(p=Jt()),d=qc(d,p),d!==null&&(Kn(d,p),Zu(d))}function ece(d){var p=d.memoizedState,b=0;p!==null&&(b=p.retryLane),fD(d,b)}function tce(d,p){var b=0;switch(d.tag){case 31:case 13:var E=d.stateNode,A=d.memoizedState;A!==null&&(b=A.retryLane);break;case 19:E=d.stateNode;break;case 22:E=d.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(p),fD(d,b)}function nce(d,p){return me(d,p)}var FE=null,Og=null,G3=!1,BE=!1,W3=!1,Fh=0;function Zu(d){d!==Og&&d.next===null&&(Og===null?FE=Og=d:Og=Og.next=d),BE=!0,G3||(G3=!0,oce())}function Cy(d,p){if(!W3&&BE){W3=!0;do for(var b=!1,E=FE;E!==null;){if(d!==0){var A=E.pendingLanes;if(A===0)var R=0;else{var Y=E.suspendedLanes,ae=E.pingedLanes;R=(1<<31-jt(42|d)+1)-1,R&=A&~(Y&~ae),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(b=!0,gD(E,R))}else R=$r,R=ye(E,E===Uo?R:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(R&3)===0||Ue(E,R)||(b=!0,gD(E,R));E=E.next}while(b);W3=!1}}function rce(){hD()}function hD(){BE=G3=!1;var d=0;Fh!==0&&pce()&&(d=Fh);for(var p=Le(),b=null,E=FE;E!==null;){var A=E.next,R=pD(E,p);R===0?(E.next=null,b===null?FE=A:b.next=A,A===null&&(Og=b)):(b=E,(d!==0||(R&3)!==0)&&(BE=!0)),E=A}Ti!==0&&Ti!==5||Cy(d),Fh!==0&&(Fh=0)}function pD(d,p){for(var b=d.suspendedLanes,E=d.pingedLanes,A=d.expirationTimes,R=d.pendingLanes&-62914561;0<R;){var Y=31-jt(R),ae=1<<Y,ke=A[Y];ke===-1?((ae&b)===0||(ae&E)!==0)&&(A[Y]=ht(ae,p)):ke<=p&&(d.expiredLanes|=ae),R&=~ae}if(p=Uo,b=$r,b=ye(d,d===p?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),E=d.callbackNode,b===0||d===p&&(wo===2||wo===9)||d.cancelPendingCommit!==null)return E!==null&&E!==null&&Ne(E),d.callbackNode=null,d.callbackPriority=0;if((b&3)===0||Ue(d,b)){if(p=b&-b,p===d.callbackPriority)return p;switch(E!==null&&Ne(E),xs(b)){case 2:case 8:b=W;break;case 32:b=L;break;case 268435456:b=ce;break;default:b=L}return E=mD.bind(null,d),b=me(b,E),d.callbackPriority=p,d.callbackNode=b,p}return E!==null&&E!==null&&Ne(E),d.callbackPriority=2,d.callbackNode=null,2}function mD(d,p){if(Ti!==0&&Ti!==5)return d.callbackNode=null,d.callbackPriority=0,null;var b=d.callbackNode;if($E()&&d.callbackNode!==b)return null;var E=$r;return E=ye(d,d===Uo?E:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),E===0?null:(Z9(d,E,p),pD(d,Le()),d.callbackNode!=null&&d.callbackNode===b?mD.bind(null,d):null)}function gD(d,p){if($E())return null;Z9(d,p,!0)}function oce(){gce(function(){(uo&6)!==0?me(_e,rce):hD()})}function Y3(){if(Fh===0){var d=Gd;d===0&&(d=An,An<<=1,(An&261888)===0&&(An=256)),Fh=d}return Fh}function bD(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Sl(""+d)}function yD(d,p){var b=p.ownerDocument.createElement("input");return b.name=p.name,b.value=p.value,d.id&&b.setAttribute("form",d.id),p.parentNode.insertBefore(b,p),d=new FormData(d),b.parentNode.removeChild(b),d}function sce(d,p,b,E,A){if(p==="submit"&&b&&b.stateNode===A){var R=bD((A[Os]||null).action),Y=E.submitter;Y&&(p=(p=Y[Os]||null)?bD(p.formAction):Y.getAttribute("formAction"),p!==null&&(R=p,Y=null));var ae=new rp("action","action",null,E,A);d.push({event:ae,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(Fh!==0){var ke=Y?yD(A,Y):new FormData(A);Gn(b,{pending:!0,data:ke,method:A.method,action:R},null,ke)}}else typeof R=="function"&&(ae.preventDefault(),ke=Y?yD(A,Y):new FormData(A),Gn(b,{pending:!0,data:ke,method:A.method,action:R},R,ke))},currentTarget:A}]})}}for(var K3=0;K3<sg.length;K3++){var Z3=sg[K3],ice=Z3.toLowerCase(),ace=Z3[0].toUpperCase()+Z3.slice(1);Aa(ice,"on"+ace)}Aa(Zb,"onAnimationEnd"),Aa(Li,"onAnimationIteration"),Aa(Jb,"onAnimationStart"),Aa("dblclick","onDoubleClick"),Aa("focusin","onFocus"),Aa("focusout","onBlur"),Aa(cE,"onTransitionRun"),Aa(g3,"onTransitionStart"),Aa(uE,"onTransitionCancel"),Aa(dE,"onTransitionEnd"),ft("onMouseEnter",["mouseout","mouseover"]),ft("onMouseLeave",["mouseout","mouseover"]),ft("onPointerEnter",["pointerout","pointerover"]),ft("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ky="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lce=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ky));function vD(d,p){p=(p&4)!==0;for(var b=0;b<d.length;b++){var E=d[b],A=E.event;E=E.listeners;e:{var R=void 0;if(p)for(var Y=E.length-1;0<=Y;Y--){var ae=E[Y],ke=ae.instance,Ye=ae.currentTarget;if(ae=ae.listener,ke!==R&&A.isPropagationStopped())break e;R=ae,A.currentTarget=Ye;try{R(A)}catch(ot){Ud(ot)}A.currentTarget=null,R=ke}else for(Y=0;Y<E.length;Y++){if(ae=E[Y],ke=ae.instance,Ye=ae.currentTarget,ae=ae.listener,ke!==R&&A.isPropagationStopped())break e;R=ae,A.currentTarget=Ye;try{R(A)}catch(ot){Ud(ot)}A.currentTarget=null,R=ke}}}}function Or(d,p){var b=p[rt];b===void 0&&(b=p[rt]=new Set);var E=d+"__bubble";b.has(E)||(xD(p,d,2,!1),b.add(E))}function J3(d,p,b){var E=0;p&&(E|=4),xD(b,d,E,p)}var zE="_reactListening"+Math.random().toString(36).slice(2);function X3(d){if(!d[zE]){d[zE]=!0,Xr.forEach(function(b){b!=="selectionchange"&&(lce.has(b)||J3(b,!1,d),J3(b,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[zE]||(p[zE]=!0,J3("selectionchange",!1,p))}}function xD(d,p,b,E){switch(KD(p)){case 2:var A=Lce;break;case 8:A=$ce;break;default:A=h5}b=A.bind(null,p,b,d),A=void 0,!qm||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(A=!0),E?A!==void 0?d.addEventListener(p,b,{capture:!0,passive:A}):d.addEventListener(p,b,!0):A!==void 0?d.addEventListener(p,b,{passive:A}):d.addEventListener(p,b,!1)}function Q3(d,p,b,E,A){var R=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var Y=E.tag;if(Y===3||Y===4){var ae=E.stateNode.containerInfo;if(ae===A)break;if(Y===4)for(Y=E.return;Y!==null;){var ke=Y.tag;if((ke===3||ke===4)&&Y.stateNode.containerInfo===A)return;Y=Y.return}for(;ae!==null;){if(Y=Hr(ae),Y===null)return;if(ke=Y.tag,ke===5||ke===6||ke===26||ke===27){E=R=Y;continue e}ae=ae.parentNode}}E=E.return}dh(function(){var Ye=R,ot=Jn(b),dt=[];e:{var Ke=yh.get(d);if(Ke!==void 0){var Xe=rp,dn=d;switch(d){case"keypress":if(hh(b)===0)break e;case"keydown":case"keyup":Xe=Fd;break;case"focusin":dn="focus",Xe=Uc;break;case"focusout":dn="blur",Xe=Uc;break;case"beforeblur":case"afterblur":Xe=Uc;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=Xw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=ts;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=Ls;break;case Zb:case Li:case Jb:Xe=l3;break;case dE:Xe=Xs;break;case"scroll":case"scrollend":Xe=i3;break;case"wheel":Xe=tE;break;case"copy":case"cut":case"paste":Xe=Qw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=eE;break;case"toggle":case"beforetoggle":Xe=Zm}var jn=(p&4)!==0,Po=!jn&&(d==="scroll"||d==="scrollend"),je=jn?Ke!==null?Ke+"Capture":null:Ke;jn=[];for(var De=Ye,Ge;De!==null;){var lt=De;if(Ge=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||Ge===null||je===null||(lt=fh(De,je),lt!=null&&jn.push(Ay(De,lt,Ge))),Po)break;De=De.return}0<jn.length&&(Ke=new Xe(Ke,dn,null,b,ot),dt.push({event:Ke,listeners:jn}))}}if((p&7)===0){e:{if(Ke=d==="mouseover"||d==="pointerover",Xe=d==="mouseout"||d==="pointerout",Ke&&b!==Kt&&(dn=b.relatedTarget||b.fromElement)&&(Hr(dn)||dn[it]))break e;if((Xe||Ke)&&(Ke=ot.window===ot?ot:(Ke=ot.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,Xe?(dn=b.relatedTarget||b.toElement,Xe=Ye,dn=dn?Hr(dn):null,dn!==null&&(Po=s(dn),jn=dn.tag,dn!==Po||jn!==5&&jn!==27&&jn!==6)&&(dn=null)):(Xe=null,dn=Ye),Xe!==dn)){if(jn=Xw,lt="onMouseLeave",je="onMouseEnter",De="mouse",(d==="pointerout"||d==="pointerover")&&(jn=eE,lt="onPointerLeave",je="onPointerEnter",De="pointer"),Po=Xe==null?Ke:kt(Xe),Ge=dn==null?Ke:kt(dn),Ke=new jn(lt,De+"leave",Xe,b,ot),Ke.target=Po,Ke.relatedTarget=Ge,lt=null,Hr(ot)===Ye&&(jn=new jn(je,De+"enter",dn,b,ot),jn.target=Ge,jn.relatedTarget=Po,lt=jn),Po=lt,Xe&&dn)t:{for(jn=cce,je=Xe,De=dn,Ge=0,lt=je;lt;lt=jn(lt))Ge++;lt=0;for(var Mn=De;Mn;Mn=jn(Mn))lt++;for(;0<Ge-lt;)je=jn(je),Ge--;for(;0<lt-Ge;)De=jn(De),lt--;for(;Ge--;){if(je===De||De!==null&&je===De.alternate){jn=je;break t}je=jn(je),De=jn(De)}jn=null}else jn=null;Xe!==null&&wD(dt,Ke,Xe,jn,!1),dn!==null&&Po!==null&&wD(dt,Po,dn,jn,!0)}}e:{if(Ke=Ye?kt(Ye):window,Xe=Ke.nodeName&&Ke.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&Ke.type==="file")var to=iE;else if(Xm(Ke))if(Gb)to=p3;else{to=jd;var En=Kb}else Xe=Ke.nodeName,!Xe||Xe.toLowerCase()!=="input"||Ke.type!=="checkbox"&&Ke.type!=="radio"?Ye&&Mu(Ye.elementType)&&(to=iE):to=h3;if(to&&(to=to(d,Ye))){Bn(dt,to,b,ot);break e}En&&En(d,Ke,Ye),d==="focusout"&&Ye&&Ke.type==="number"&&Ye.memoizedProps.value!=null&&jc(Ke,"number",Ke.value)}switch(En=Ye?kt(Ye):window,d){case"focusin":(Xm(En)||En.contentEditable==="true")&&(Sr=En,Ya=Ye,up=null);break;case"focusout":up=Ya=Sr=null;break;case"mousedown":dp=!0;break;case"contextmenu":case"mouseup":case"dragend":dp=!1,Ka(dt,b,ot);break;case"selectionchange":if(og)break;case"keydown":case"keyup":Ka(dt,b,ot)}var br;if(Jm)e:{switch(d){case"compositionstart":var Fr="onCompositionStart";break e;case"compositionend":Fr="onCompositionEnd";break e;case"compositionupdate":Fr="onCompositionUpdate";break e}Fr=void 0}else sc?zd(d,b)&&(Fr="onCompositionEnd"):d==="keydown"&&b.keyCode===229&&(Fr="onCompositionStart");Fr&&(mh&&b.locale!=="ko"&&(sc||Fr!=="onCompositionStart"?Fr==="onCompositionEnd"&&sc&&(br=Al()):(Cl=ot,tp="value"in Cl?Cl.value:Cl.textContent,sc=!0)),En=jE(Ye,Fr),0<En.length&&(Fr=new Wm(Fr,d,null,b,ot),dt.push({event:Fr,listeners:En}),br?Fr.data=br:(br=ap(b),br!==null&&(Fr.data=br)))),(br=_s?xi(d,b):rE(d,b))&&(Fr=jE(Ye,"onBeforeInput"),0<Fr.length&&(En=new Wm("onBeforeInput","beforeinput",null,b,ot),dt.push({event:En,listeners:Fr}),En.data=br)),sce(dt,d,Ye,b,ot)}vD(dt,p)})}function Ay(d,p,b){return{instance:d,listener:p,currentTarget:b}}function jE(d,p){for(var b=p+"Capture",E=[];d!==null;){var A=d,R=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||R===null||(A=fh(d,b),A!=null&&E.unshift(Ay(d,A,R)),A=fh(d,p),A!=null&&E.push(Ay(d,A,R))),d.tag===3)return E;d=d.return}return[]}function cce(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function wD(d,p,b,E,A){for(var R=p._reactName,Y=[];b!==null&&b!==E;){var ae=b,ke=ae.alternate,Ye=ae.stateNode;if(ae=ae.tag,ke!==null&&ke===E)break;ae!==5&&ae!==26&&ae!==27||Ye===null||(ke=Ye,A?(Ye=fh(b,R),Ye!=null&&Y.unshift(Ay(b,Ye,ke))):A||(Ye=fh(b,R),Ye!=null&&Y.push(Ay(b,Ye,ke)))),b=b.return}Y.length!==0&&d.push({event:p,listeners:Y})}var uce=/\r\n?/g,dce=/\u0000|\uFFFD/g;function ED(d){return(typeof d=="string"?d:""+d).replace(uce,`
`).replace(dce,"")}function _D(d,p){return p=ED(p),ED(d)===p}function Oo(d,p,b,E,A,R){switch(b){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||On(d,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&On(d,""+E);break;case"className":hs(d,"class",E);break;case"tabIndex":hs(d,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(d,b,E);break;case"style":Wr(d,E,R);break;case"data":if(p!=="object"){hs(d,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||b!=="href")){d.removeAttribute(b);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){d.removeAttribute(b);break}E=Sl(""+E),d.setAttribute(b,E);break;case"action":case"formAction":if(typeof E=="function"){d.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(b==="formAction"?(p!=="input"&&Oo(d,p,"name",A.name,A,null),Oo(d,p,"formEncType",A.formEncType,A,null),Oo(d,p,"formMethod",A.formMethod,A,null),Oo(d,p,"formTarget",A.formTarget,A,null)):(Oo(d,p,"encType",A.encType,A,null),Oo(d,p,"method",A.method,A,null),Oo(d,p,"target",A.target,A,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){d.removeAttribute(b);break}E=Sl(""+E),d.setAttribute(b,E);break;case"onClick":E!=null&&(d.onclick=$t);break;case"onScroll":E!=null&&Or("scroll",d);break;case"onScrollEnd":E!=null&&Or("scrollend",d);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(b=E.__html,b!=null){if(A.children!=null)throw Error(r(60));d.innerHTML=b}}break;case"multiple":d.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":d.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){d.removeAttribute("xlink:href");break}b=Sl(""+E),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?d.setAttribute(b,""+E):d.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?d.setAttribute(b,""):d.removeAttribute(b);break;case"capture":case"download":E===!0?d.setAttribute(b,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?d.setAttribute(b,E):d.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?d.setAttribute(b,E):d.removeAttribute(b);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?d.removeAttribute(b):d.setAttribute(b,E);break;case"popover":Or("beforetoggle",d),Or("toggle",d),Wo(d,"popover",E);break;case"xlinkActuate":Zs(d,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":Zs(d,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":Zs(d,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":Zs(d,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":Zs(d,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":Zs(d,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":Zs(d,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":Zs(d,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":Zs(d,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":Wo(d,"is",E);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=yi.get(b)||b,Wo(d,b,E))}}function e5(d,p,b,E,A,R){switch(b){case"style":Wr(d,E,R);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(b=E.__html,b!=null){if(A.children!=null)throw Error(r(60));d.innerHTML=b}}break;case"children":typeof E=="string"?On(d,E):(typeof E=="number"||typeof E=="bigint")&&On(d,""+E);break;case"onScroll":E!=null&&Or("scroll",d);break;case"onScrollEnd":E!=null&&Or("scrollend",d);break;case"onClick":E!=null&&(d.onclick=$t);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ps.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(A=b.endsWith("Capture"),p=b.slice(2,A?b.length-7:void 0),R=d[Os]||null,R=R!=null?R[b]:null,typeof R=="function"&&d.removeEventListener(p,R,A),typeof E=="function")){typeof R!="function"&&R!==null&&(b in d?d[b]=null:d.hasAttribute(b)&&d.removeAttribute(b)),d.addEventListener(p,E,A);break e}b in d?d[b]=E:E===!0?d.setAttribute(b,""):Wo(d,b,E)}}}function ea(d,p,b){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Or("error",d),Or("load",d);var E=!1,A=!1,R;for(R in b)if(b.hasOwnProperty(R)){var Y=b[R];if(Y!=null)switch(R){case"src":E=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Oo(d,p,R,Y,b,null)}}A&&Oo(d,p,"srcSet",b.srcSet,b,null),E&&Oo(d,p,"src",b.src,b,null);return;case"input":Or("invalid",d);var ae=R=Y=A=null,ke=null,Ye=null;for(E in b)if(b.hasOwnProperty(E)){var ot=b[E];if(ot!=null)switch(E){case"name":A=ot;break;case"type":Y=ot;break;case"checked":ke=ot;break;case"defaultChecked":Ye=ot;break;case"value":R=ot;break;case"defaultValue":ae=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(r(137,p));break;default:Oo(d,p,E,ot,b,null)}}oc(d,R,ae,ke,Ye,Y,A,!1);return;case"select":Or("invalid",d),E=Y=R=null;for(A in b)if(b.hasOwnProperty(A)&&(ae=b[A],ae!=null))switch(A){case"value":R=ae;break;case"defaultValue":Y=ae;break;case"multiple":E=ae;default:Oo(d,p,A,ae,b,null)}p=R,b=Y,d.multiple=!!E,p!=null?Js(d,!!E,p,!1):b!=null&&Js(d,!!E,b,!0);return;case"textarea":Or("invalid",d),R=A=E=null;for(Y in b)if(b.hasOwnProperty(Y)&&(ae=b[Y],ae!=null))switch(Y){case"value":E=ae;break;case"defaultValue":A=ae;break;case"children":R=ae;break;case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(91));break;default:Oo(d,p,Y,ae,b,null)}ch(d,E,A,R);return;case"option":for(ke in b)if(b.hasOwnProperty(ke)&&(E=b[ke],E!=null))switch(ke){case"selected":d.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:Oo(d,p,ke,E,b,null)}return;case"dialog":Or("beforetoggle",d),Or("toggle",d),Or("cancel",d),Or("close",d);break;case"iframe":case"object":Or("load",d);break;case"video":case"audio":for(E=0;E<ky.length;E++)Or(ky[E],d);break;case"image":Or("error",d),Or("load",d);break;case"details":Or("toggle",d);break;case"embed":case"source":case"link":Or("error",d),Or("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in b)if(b.hasOwnProperty(Ye)&&(E=b[Ye],E!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:Oo(d,p,Ye,E,b,null)}return;default:if(Mu(p)){for(ot in b)b.hasOwnProperty(ot)&&(E=b[ot],E!==void 0&&e5(d,p,ot,E,b,void 0));return}}for(ae in b)b.hasOwnProperty(ae)&&(E=b[ae],E!=null&&Oo(d,p,ae,E,b,null))}function fce(d,p,b,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,R=null,Y=null,ae=null,ke=null,Ye=null,ot=null;for(Xe in b){var dt=b[Xe];if(b.hasOwnProperty(Xe)&&dt!=null)switch(Xe){case"checked":break;case"value":break;case"defaultValue":ke=dt;default:E.hasOwnProperty(Xe)||Oo(d,p,Xe,null,E,dt)}}for(var Ke in E){var Xe=E[Ke];if(dt=b[Ke],E.hasOwnProperty(Ke)&&(Xe!=null||dt!=null))switch(Ke){case"type":R=Xe;break;case"name":A=Xe;break;case"checked":Ye=Xe;break;case"defaultChecked":ot=Xe;break;case"value":Y=Xe;break;case"defaultValue":ae=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(r(137,p));break;default:Xe!==dt&&Oo(d,p,Ke,Xe,E,dt)}}_l(d,Y,ae,ke,Ye,ot,R,A);return;case"select":Xe=Y=ae=Ke=null;for(R in b)if(ke=b[R],b.hasOwnProperty(R)&&ke!=null)switch(R){case"value":break;case"multiple":Xe=ke;default:E.hasOwnProperty(R)||Oo(d,p,R,null,E,ke)}for(A in E)if(R=E[A],ke=b[A],E.hasOwnProperty(A)&&(R!=null||ke!=null))switch(A){case"value":Ke=R;break;case"defaultValue":ae=R;break;case"multiple":Y=R;default:R!==ke&&Oo(d,p,A,R,E,ke)}p=ae,b=Y,E=Xe,Ke!=null?Js(d,!!b,Ke,!1):!!E!=!!b&&(p!=null?Js(d,!!b,p,!0):Js(d,!!b,b?[]:"",!1));return;case"textarea":Xe=Ke=null;for(ae in b)if(A=b[ae],b.hasOwnProperty(ae)&&A!=null&&!E.hasOwnProperty(ae))switch(ae){case"value":break;case"children":break;default:Oo(d,p,ae,null,E,A)}for(Y in E)if(A=E[Y],R=b[Y],E.hasOwnProperty(Y)&&(A!=null||R!=null))switch(Y){case"value":Ke=A;break;case"defaultValue":Xe=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==R&&Oo(d,p,Y,A,E,R)}Pd(d,Ke,Xe);return;case"option":for(var dn in b)if(Ke=b[dn],b.hasOwnProperty(dn)&&Ke!=null&&!E.hasOwnProperty(dn))switch(dn){case"selected":d.selected=!1;break;default:Oo(d,p,dn,null,E,Ke)}for(ke in E)if(Ke=E[ke],Xe=b[ke],E.hasOwnProperty(ke)&&Ke!==Xe&&(Ke!=null||Xe!=null))switch(ke){case"selected":d.selected=Ke&&typeof Ke!="function"&&typeof Ke!="symbol";break;default:Oo(d,p,ke,Ke,E,Xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jn in b)Ke=b[jn],b.hasOwnProperty(jn)&&Ke!=null&&!E.hasOwnProperty(jn)&&Oo(d,p,jn,null,E,Ke);for(Ye in E)if(Ke=E[Ye],Xe=b[Ye],E.hasOwnProperty(Ye)&&Ke!==Xe&&(Ke!=null||Xe!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(r(137,p));break;default:Oo(d,p,Ye,Ke,E,Xe)}return;default:if(Mu(p)){for(var Po in b)Ke=b[Po],b.hasOwnProperty(Po)&&Ke!==void 0&&!E.hasOwnProperty(Po)&&e5(d,p,Po,void 0,E,Ke);for(ot in E)Ke=E[ot],Xe=b[ot],!E.hasOwnProperty(ot)||Ke===Xe||Ke===void 0&&Xe===void 0||e5(d,p,ot,Ke,E,Xe);return}}for(var je in b)Ke=b[je],b.hasOwnProperty(je)&&Ke!=null&&!E.hasOwnProperty(je)&&Oo(d,p,je,null,E,Ke);for(dt in E)Ke=E[dt],Xe=b[dt],!E.hasOwnProperty(dt)||Ke===Xe||Ke==null&&Xe==null||Oo(d,p,dt,Ke,E,Xe)}function SD(d){switch(d){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hce(){if(typeof performance.getEntriesByType=="function"){for(var d=0,p=0,b=performance.getEntriesByType("resource"),E=0;E<b.length;E++){var A=b[E],R=A.transferSize,Y=A.initiatorType,ae=A.duration;if(R&&ae&&SD(Y)){for(Y=0,ae=A.responseEnd,E+=1;E<b.length;E++){var ke=b[E],Ye=ke.startTime;if(Ye>ae)break;var ot=ke.transferSize,dt=ke.initiatorType;ot&&SD(dt)&&(ke=ke.responseEnd,Y+=ot*(ke<ae?1:(ae-Ye)/(ke-Ye)))}if(--E,p+=8*(R+Y)/(A.duration/1e3),d++,10<d)break}}if(0<d)return p/d/1e6}return navigator.connection&&(d=navigator.connection.downlink,typeof d=="number")?d:5}var t5=null,n5=null;function UE(d){return d.nodeType===9?d:d.ownerDocument}function TD(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function CD(d,p){if(d===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&p==="foreignObject"?0:d}function r5(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var o5=null;function pce(){var d=window.event;return d&&d.type==="popstate"?d===o5?!1:(o5=d,!0):(o5=null,!1)}var kD=typeof setTimeout=="function"?setTimeout:void 0,mce=typeof clearTimeout=="function"?clearTimeout:void 0,AD=typeof Promise=="function"?Promise:void 0,gce=typeof queueMicrotask=="function"?queueMicrotask:typeof AD<"u"?function(d){return AD.resolve(null).then(d).catch(bce)}:kD;function bce(d){setTimeout(function(){throw d})}function Bh(d){return d==="head"}function ND(d,p){var b=p,E=0;do{var A=b.nextSibling;if(d.removeChild(b),A&&A.nodeType===8)if(b=A.data,b==="/$"||b==="/&"){if(E===0){d.removeChild(A),Fg(p);return}E--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")E++;else if(b==="html")Ny(d.ownerDocument.documentElement);else if(b==="head"){b=d.ownerDocument.head,Ny(b);for(var R=b.firstChild;R;){var Y=R.nextSibling,ae=R.nodeName;R[Ao]||ae==="SCRIPT"||ae==="STYLE"||ae==="LINK"&&R.rel.toLowerCase()==="stylesheet"||b.removeChild(R),R=Y}}else b==="body"&&Ny(d.ownerDocument.body);b=A}while(b);Fg(p)}function ID(d,p){var b=d;d=0;do{var E=b.nextSibling;if(b.nodeType===1?p?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(p?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),E&&E.nodeType===8)if(b=E.data,b==="/$"){if(d===0)break;d--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||d++;b=E}while(b)}function s5(d){var p=d.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var b=p;switch(p=p.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":s5(b),Zn(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}d.removeChild(b)}}function yce(d,p,b,E){for(;d.nodeType===1;){var A=b;if(d.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(E){if(!d[Ao])switch(p){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(R=d.getAttribute("rel"),R==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(R!==A.rel||d.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||d.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||d.getAttribute("title")!==(A.title==null?null:A.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(R=d.getAttribute("src"),(R!==(A.src==null?null:A.src)||d.getAttribute("type")!==(A.type==null?null:A.type)||d.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&R&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(p==="input"&&d.type==="hidden"){var R=A.name==null?null:""+A.name;if(A.type==="hidden"&&d.getAttribute("name")===R)return d}else return d;if(d=hc(d.nextSibling),d===null)break}return null}function vce(d,p,b){if(p==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!b||(d=hc(d.nextSibling),d===null))return null;return d}function RD(d,p){for(;d.nodeType!==8;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!p||(d=hc(d.nextSibling),d===null))return null;return d}function i5(d){return d.data==="$?"||d.data==="$~"}function a5(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState!=="loading"}function xce(d,p){var b=d.ownerDocument;if(d.data==="$~")d._reactRetry=p;else if(d.data!=="$?"||b.readyState!=="loading")p();else{var E=function(){p(),b.removeEventListener("DOMContentLoaded",E)};b.addEventListener("DOMContentLoaded",E),d._reactRetry=E}}function hc(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return d}var l5=null;function MD(d){d=d.nextSibling;for(var p=0;d;){if(d.nodeType===8){var b=d.data;if(b==="/$"||b==="/&"){if(p===0)return hc(d.nextSibling);p--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||p++}d=d.nextSibling}return null}function DD(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var b=d.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(p===0)return d;p--}else b!=="/$"&&b!=="/&"||p++}d=d.previousSibling}return null}function OD(d,p,b){switch(p=UE(b),d){case"html":if(d=p.documentElement,!d)throw Error(r(452));return d;case"head":if(d=p.head,!d)throw Error(r(453));return d;case"body":if(d=p.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function Ny(d){for(var p=d.attributes;p.length;)d.removeAttributeNode(p[0]);Zn(d)}var pc=new Map,PD=new Set;function HE(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var df=ee.d;ee.d={f:wce,r:Ece,D:_ce,C:Sce,L:Tce,m:Cce,X:Ace,S:kce,M:Nce};function wce(){var d=df.f(),p=OE();return d||p}function Ece(d){var p=ua(d);p!==null&&p.tag===5&&p.type==="form"?Ro(p):df.r(d)}var Pg=typeof document>"u"?null:document;function LD(d,p,b){var E=Pg;if(E&&typeof p=="string"&&p){var A=Yi(p);A='link[rel="'+d+'"][href="'+A+'"]',typeof b=="string"&&(A+='[crossorigin="'+b+'"]'),PD.has(A)||(PD.add(A),d={rel:d,crossOrigin:b,href:p},E.querySelector(A)===null&&(p=E.createElement("link"),ea(p,"link",d),mt(p),E.head.appendChild(p)))}}function _ce(d){df.D(d),LD("dns-prefetch",d,null)}function Sce(d,p){df.C(d,p),LD("preconnect",d,p)}function Tce(d,p,b){df.L(d,p,b);var E=Pg;if(E&&d&&p){var A='link[rel="preload"][as="'+Yi(p)+'"]';p==="image"&&b&&b.imageSrcSet?(A+='[imagesrcset="'+Yi(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(A+='[imagesizes="'+Yi(b.imageSizes)+'"]')):A+='[href="'+Yi(d)+'"]';var R=A;switch(p){case"style":R=Lg(d);break;case"script":R=$g(d)}pc.has(R)||(d=f({rel:"preload",href:p==="image"&&b&&b.imageSrcSet?void 0:d,as:p},b),pc.set(R,d),E.querySelector(A)!==null||p==="style"&&E.querySelector(Iy(R))||p==="script"&&E.querySelector(Ry(R))||(p=E.createElement("link"),ea(p,"link",d),mt(p),E.head.appendChild(p)))}}function Cce(d,p){df.m(d,p);var b=Pg;if(b&&d){var E=p&&typeof p.as=="string"?p.as:"script",A='link[rel="modulepreload"][as="'+Yi(E)+'"][href="'+Yi(d)+'"]',R=A;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=$g(d)}if(!pc.has(R)&&(d=f({rel:"modulepreload",href:d},p),pc.set(R,d),b.querySelector(A)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(Ry(R)))return}E=b.createElement("link"),ea(E,"link",d),mt(E),b.head.appendChild(E)}}}function kce(d,p,b){df.S(d,p,b);var E=Pg;if(E&&d){var A=Fn(E).hoistableStyles,R=Lg(d);p=p||"default";var Y=A.get(R);if(!Y){var ae={loading:0,preload:null};if(Y=E.querySelector(Iy(R)))ae.loading=5;else{d=f({rel:"stylesheet",href:d,"data-precedence":p},b),(b=pc.get(R))&&c5(d,b);var ke=Y=E.createElement("link");mt(ke),ea(ke,"link",d),ke._p=new Promise(function(Ye,ot){ke.onload=Ye,ke.onerror=ot}),ke.addEventListener("load",function(){ae.loading|=1}),ke.addEventListener("error",function(){ae.loading|=2}),ae.loading|=4,VE(Y,p,E)}Y={type:"stylesheet",instance:Y,count:1,state:ae},A.set(R,Y)}}}function Ace(d,p){df.X(d,p);var b=Pg;if(b&&d){var E=Fn(b).hoistableScripts,A=$g(d),R=E.get(A);R||(R=b.querySelector(Ry(A)),R||(d=f({src:d,async:!0},p),(p=pc.get(A))&&u5(d,p),R=b.createElement("script"),mt(R),ea(R,"link",d),b.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},E.set(A,R))}}function Nce(d,p){df.M(d,p);var b=Pg;if(b&&d){var E=Fn(b).hoistableScripts,A=$g(d),R=E.get(A);R||(R=b.querySelector(Ry(A)),R||(d=f({src:d,async:!0,type:"module"},p),(p=pc.get(A))&&u5(d,p),R=b.createElement("script"),mt(R),ea(R,"link",d),b.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},E.set(A,R))}}function $D(d,p,b,E){var A=(A=Ce.current)?HE(A):null;if(!A)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(p=Lg(b.href),b=Fn(A).hoistableStyles,E=b.get(p),E||(E={type:"style",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){d=Lg(b.href);var R=Fn(A).hoistableStyles,Y=R.get(d);if(Y||(A=A.ownerDocument||A,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(d,Y),(R=A.querySelector(Iy(d)))&&!R._p&&(Y.instance=R,Y.state.loading=5),pc.has(d)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},pc.set(d,b),R||Ice(A,d,b,Y.state))),p&&E===null)throw Error(r(528,""));return Y}if(p&&E!==null)throw Error(r(529,""));return null;case"script":return p=b.async,b=b.src,typeof b=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=$g(b),b=Fn(A).hoistableScripts,E=b.get(p),E||(E={type:"script",instance:null,count:0,state:null},b.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function Lg(d){return'href="'+Yi(d)+'"'}function Iy(d){return'link[rel="stylesheet"]['+d+"]"}function FD(d){return f({},d,{"data-precedence":d.precedence,precedence:null})}function Ice(d,p,b,E){d.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=d.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),ea(p,"link",b),mt(p),d.head.appendChild(p))}function $g(d){return'[src="'+Yi(d)+'"]'}function Ry(d){return"script[async]"+d}function BD(d,p,b){if(p.count++,p.instance===null)switch(p.type){case"style":var E=d.querySelector('style[data-href~="'+Yi(b.href)+'"]');if(E)return p.instance=E,mt(E),E;var A=f({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return E=(d.ownerDocument||d).createElement("style"),mt(E),ea(E,"style",A),VE(E,b.precedence,d),p.instance=E;case"stylesheet":A=Lg(b.href);var R=d.querySelector(Iy(A));if(R)return p.state.loading|=4,p.instance=R,mt(R),R;E=FD(b),(A=pc.get(A))&&c5(E,A),R=(d.ownerDocument||d).createElement("link"),mt(R);var Y=R;return Y._p=new Promise(function(ae,ke){Y.onload=ae,Y.onerror=ke}),ea(R,"link",E),p.state.loading|=4,VE(R,b.precedence,d),p.instance=R;case"script":return R=$g(b.src),(A=d.querySelector(Ry(R)))?(p.instance=A,mt(A),A):(E=b,(A=pc.get(R))&&(E=f({},b),u5(E,A)),d=d.ownerDocument||d,A=d.createElement("script"),mt(A),ea(A,"link",E),d.head.appendChild(A),p.instance=A);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,VE(E,b.precedence,d));return p.instance}function VE(d,p,b){for(var E=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=E.length?E[E.length-1]:null,R=A,Y=0;Y<E.length;Y++){var ae=E[Y];if(ae.dataset.precedence===p)R=ae;else if(R!==A)break}R?R.parentNode.insertBefore(d,R.nextSibling):(p=b.nodeType===9?b.head:b,p.insertBefore(d,p.firstChild))}function c5(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.title==null&&(d.title=p.title)}function u5(d,p){d.crossOrigin==null&&(d.crossOrigin=p.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=p.referrerPolicy),d.integrity==null&&(d.integrity=p.integrity)}var qE=null;function zD(d,p,b){if(qE===null){var E=new Map,A=qE=new Map;A.set(b,E)}else A=qE,E=A.get(b),E||(E=new Map,A.set(b,E));if(E.has(d))return E;for(E.set(d,null),b=b.getElementsByTagName(d),A=0;A<b.length;A++){var R=b[A];if(!(R[Ao]||R[gr]||d==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=R.getAttribute(p)||"";Y=d+Y;var ae=E.get(Y);ae?ae.push(R):E.set(Y,[R])}}return E}function jD(d,p,b){d=d.ownerDocument||d,d.head.insertBefore(b,p==="title"?d.querySelector("head > title"):null)}function Rce(d,p,b){if(b===1||p.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return d=p.disabled,typeof p.precedence=="string"&&d==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function UD(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}function Mce(d,p,b,E){if(b.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var A=Lg(E.href),R=p.querySelector(Iy(A));if(R){p=R._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(d.count++,d=GE.bind(d),p.then(d,d)),b.state.loading|=4,b.instance=R,mt(R);return}R=p.ownerDocument||p,E=FD(E),(A=pc.get(A))&&c5(E,A),R=R.createElement("link"),mt(R);var Y=R;Y._p=new Promise(function(ae,ke){Y.onload=ae,Y.onerror=ke}),ea(R,"link",E),b.instance=R}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(b,p),(p=b.state.preload)&&(b.state.loading&3)===0&&(d.count++,b=GE.bind(d),p.addEventListener("load",b),p.addEventListener("error",b))}}var d5=0;function Dce(d,p){return d.stylesheets&&d.count===0&&YE(d,d.stylesheets),0<d.count||0<d.imgCount?function(b){var E=setTimeout(function(){if(d.stylesheets&&YE(d,d.stylesheets),d.unsuspend){var R=d.unsuspend;d.unsuspend=null,R()}},6e4+p);0<d.imgBytes&&d5===0&&(d5=62500*hce());var A=setTimeout(function(){if(d.waitingForImages=!1,d.count===0&&(d.stylesheets&&YE(d,d.stylesheets),d.unsuspend)){var R=d.unsuspend;d.unsuspend=null,R()}},(d.imgBytes>d5?50:800)+p);return d.unsuspend=b,function(){d.unsuspend=null,clearTimeout(E),clearTimeout(A)}}:null}function GE(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)YE(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var WE=null;function YE(d,p){d.stylesheets=null,d.unsuspend!==null&&(d.count++,WE=new Map,p.forEach(Oce,d),WE=null,GE.call(d))}function Oce(d,p){if(!(p.state.loading&4)){var b=WE.get(d);if(b)var E=b.get(null);else{b=new Map,WE.set(d,b);for(var A=d.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<A.length;R++){var Y=A[R];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(b.set(Y.dataset.precedence,Y),E=Y)}E&&b.set(null,E)}A=p.instance,Y=A.getAttribute("data-precedence"),R=b.get(Y)||E,R===E&&b.set(null,A),b.set(Y,A),this.count++,E=GE.bind(this),A.addEventListener("load",E),A.addEventListener("error",E),R?R.parentNode.insertBefore(A,R.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(A,d.firstChild)),p.state.loading|=4}}var My={$$typeof:k,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Pce(d,p,b,E,A,R,Y,ae,ke){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mr(0),this.hiddenUpdates=mr(null),this.identifierPrefix=E,this.onUncaughtError=A,this.onCaughtError=R,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ke,this.incompleteTransitions=new Map}function HD(d,p,b,E,A,R,Y,ae,ke,Ye,ot,dt){return d=new Pce(d,p,b,Y,ke,Ye,ot,dt,ae),p=1,R===!0&&(p|=24),R=Fs(3,null,null,p),d.current=R,R.stateNode=d,p=ry(),p.refCount++,d.pooledCache=p,p.refCount++,R.memoizedState={element:E,isDehydrated:b,cache:p},Jd(R),d}function VD(d){return d?(d=Zi,d):Zi}function qD(d,p,b,E,A,R){A=VD(A),E.context===null?E.context=A:E.pendingContext=A,E=ju(p),E.payload={element:b},R=R===void 0?null:R,R!==null&&(E.callback=R),b=Uu(d,E,p),b!==null&&(sl(b,d,p),Hu(b,d,p))}function GD(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var b=d.retryLane;d.retryLane=b!==0&&b<p?b:p}}function f5(d,p){GD(d,p),(d=d.alternate)&&GD(d,p)}function WD(d){if(d.tag===13||d.tag===31){var p=qc(d,67108864);p!==null&&sl(p,d,67108864),f5(d,67108864)}}function YD(d){if(d.tag===13||d.tag===31){var p=Fl();p=Lr(p);var b=qc(d,p);b!==null&&sl(b,d,p),f5(d,p)}}var KE=!0;function Lce(d,p,b,E){var A=J.T;J.T=null;var R=ee.p;try{ee.p=2,h5(d,p,b,E)}finally{ee.p=R,J.T=A}}function $ce(d,p,b,E){var A=J.T;J.T=null;var R=ee.p;try{ee.p=8,h5(d,p,b,E)}finally{ee.p=R,J.T=A}}function h5(d,p,b,E){if(KE){var A=p5(E);if(A===null)Q3(d,p,E,ZE,b),ZD(d,E);else if(Bce(A,d,p,b,E))E.stopPropagation();else if(ZD(d,E),p&4&&-1<Fce.indexOf(d)){for(;A!==null;){var R=ua(A);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var Y=sn(R.pendingLanes);if(Y!==0){var ae=R;for(ae.pendingLanes|=2,ae.entangledLanes|=2;Y;){var ke=1<<31-jt(Y);ae.entanglements[1]|=ke,Y&=~ke}Zu(R),(uo&6)===0&&(ME=Le()+500,Cy(0))}}break;case 31:case 13:ae=qc(R,2),ae!==null&&sl(ae,R,2),OE(),f5(R,2)}if(R=p5(E),R===null&&Q3(d,p,E,ZE,b),R===A)break;A=R}A!==null&&E.stopPropagation()}else Q3(d,p,E,null,b)}}function p5(d){return d=Jn(d),m5(d)}var ZE=null;function m5(d){if(ZE=null,d=Hr(d),d!==null){var p=s(d);if(p===null)d=null;else{var b=p.tag;if(b===13){if(d=i(p),d!==null)return d;d=null}else if(b===31){if(d=a(p),d!==null)return d;d=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null)}}return ZE=d,null}function KD(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ve()){case _e:return 2;case W:return 8;case L:case F:return 32;case ce:return 268435456;default:return 32}default:return 32}}var g5=!1,zh=null,jh=null,Uh=null,Dy=new Map,Oy=new Map,Hh=[],Fce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ZD(d,p){switch(d){case"focusin":case"focusout":zh=null;break;case"dragenter":case"dragleave":jh=null;break;case"mouseover":case"mouseout":Uh=null;break;case"pointerover":case"pointerout":Dy.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oy.delete(p.pointerId)}}function Py(d,p,b,E,A,R){return d===null||d.nativeEvent!==R?(d={blockedOn:p,domEventName:b,eventSystemFlags:E,nativeEvent:R,targetContainers:[A]},p!==null&&(p=ua(p),p!==null&&WD(p)),d):(d.eventSystemFlags|=E,p=d.targetContainers,A!==null&&p.indexOf(A)===-1&&p.push(A),d)}function Bce(d,p,b,E,A){switch(p){case"focusin":return zh=Py(zh,d,p,b,E,A),!0;case"dragenter":return jh=Py(jh,d,p,b,E,A),!0;case"mouseover":return Uh=Py(Uh,d,p,b,E,A),!0;case"pointerover":var R=A.pointerId;return Dy.set(R,Py(Dy.get(R)||null,d,p,b,E,A)),!0;case"gotpointercapture":return R=A.pointerId,Oy.set(R,Py(Oy.get(R)||null,d,p,b,E,A)),!0}return!1}function JD(d){var p=Hr(d.target);if(p!==null){var b=s(p);if(b!==null){if(p=b.tag,p===13){if(p=i(b),p!==null){d.blockedOn=p,ws(d.priority,function(){YD(b)});return}}else if(p===31){if(p=a(b),p!==null){d.blockedOn=p,ws(d.priority,function(){YD(b)});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){d.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}d.blockedOn=null}function JE(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var b=p5(d.nativeEvent);if(b===null){b=d.nativeEvent;var E=new b.constructor(b.type,b);Kt=E,b.target.dispatchEvent(E),Kt=null}else return p=ua(b),p!==null&&WD(p),d.blockedOn=b,!1;p.shift()}return!0}function XD(d,p,b){JE(d)&&b.delete(p)}function zce(){g5=!1,zh!==null&&JE(zh)&&(zh=null),jh!==null&&JE(jh)&&(jh=null),Uh!==null&&JE(Uh)&&(Uh=null),Dy.forEach(XD),Oy.forEach(XD)}function XE(d,p){d.blockedOn===p&&(d.blockedOn=null,g5||(g5=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zce)))}var QE=null;function QD(d){QE!==d&&(QE=d,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){QE===d&&(QE=null);for(var p=0;p<d.length;p+=3){var b=d[p],E=d[p+1],A=d[p+2];if(typeof E!="function"){if(m5(E||b)===null)continue;break}var R=ua(b);R!==null&&(d.splice(p,3),p-=3,Gn(R,{pending:!0,data:A,method:b.method,action:E},E,A))}}))}function Fg(d){function p(ke){return XE(ke,d)}zh!==null&&XE(zh,d),jh!==null&&XE(jh,d),Uh!==null&&XE(Uh,d),Dy.forEach(p),Oy.forEach(p);for(var b=0;b<Hh.length;b++){var E=Hh[b];E.blockedOn===d&&(E.blockedOn=null)}for(;0<Hh.length&&(b=Hh[0],b.blockedOn===null);)JD(b),b.blockedOn===null&&Hh.shift();if(b=(d.ownerDocument||d).$$reactFormReplay,b!=null)for(E=0;E<b.length;E+=3){var A=b[E],R=b[E+1],Y=A[Os]||null;if(typeof R=="function")Y||QD(b);else if(Y){var ae=null;if(R&&R.hasAttribute("formAction")){if(A=R,Y=R[Os]||null)ae=Y.formAction;else if(m5(A)!==null)continue}else ae=Y.action;typeof ae=="function"?b[E+1]=ae:(b.splice(E,3),E-=3),QD(b)}}}function eO(){function d(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(Y){return A=Y})},focusReset:"manual",scroll:"manual"})}function p(){A!==null&&(A(),A=null),E||setTimeout(b,20)}function b(){if(!E&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,A=null;return navigation.addEventListener("navigate",d),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(b,100),function(){E=!0,navigation.removeEventListener("navigate",d),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),A!==null&&(A(),A=null)}}}function b5(d){this._internalRoot=d}e2.prototype.render=b5.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(r(409));var b=p.current,E=Fl();qD(b,E,d,p,null,null)},e2.prototype.unmount=b5.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;qD(d.current,2,null,d,null,null),OE(),p[it]=null}};function e2(d){this._internalRoot=d}e2.prototype.unstable_scheduleHydration=function(d){if(d){var p=Go();d={blockedOn:null,target:d,priority:p};for(var b=0;b<Hh.length&&p!==0&&p<Hh[b].priority;b++);Hh.splice(b,0,d),b===0&&JD(d)}};var tO=t.version;if(tO!=="19.2.0")throw Error(r(527,tO,"19.2.0"));ee.findDOMNode=function(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=c(p),d=d!==null?u(d):null,d=d===null?null:d.stateNode,d};var jce={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t2.isDisabled&&t2.supportsFiber)try{Be=t2.inject(jce),ct=t2}catch{}}return $y.createRoot=function(d,p){if(!o(d))throw Error(r(299));var b=!1,E="",A=Ra,R=go,Y=Ko;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(A=p.onUncaughtError),p.onCaughtError!==void 0&&(R=p.onCaughtError),p.onRecoverableError!==void 0&&(Y=p.onRecoverableError)),p=HD(d,1,!1,null,null,b,E,null,A,R,Y,eO),d[it]=p.current,X3(d),new b5(p)},$y.hydrateRoot=function(d,p,b){if(!o(d))throw Error(r(299));var E=!1,A="",R=Ra,Y=go,ae=Ko,ke=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(A=b.identifierPrefix),b.onUncaughtError!==void 0&&(R=b.onUncaughtError),b.onCaughtError!==void 0&&(Y=b.onCaughtError),b.onRecoverableError!==void 0&&(ae=b.onRecoverableError),b.formState!==void 0&&(ke=b.formState)),p=HD(d,1,!0,p,b??null,E,A,ke,R,Y,ae,eO),p.context=VD(null),b=p.current,E=Fl(),E=Lr(E),A=ju(E),A.callback=null,Uu(b,A,E),b=E,p.current.lanes=b,Kn(p,b),Zu(p),d[it]=p.current,X3(d),new e2(p)},$y.version="19.2.0",$y}var dO;function Qce(){if(dO)return x5.exports;dO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),x5.exports=Xce(),x5.exports}var eue=Qce();const tue=km(eue);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nue,rue;function oue(){return{geminiUrl:nue,vertexUrl:rue}}function sue(e,t,n,r){var o,s;if(!(e!=null&&e.baseUrl)){const i=oue();return t?(o=i.vertexUrl)!==null&&o!==void 0?o:n:(s=i.geminiUrl)!==null&&s!==void 0?s:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nh{}function en(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const s=t[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function C(e,t,n){for(let s=0;s<t.length-1;s++){const i=t[s];if(i.endsWith("[]")){const a=i.slice(0,-2);if(!(a in e))if(Array.isArray(n))e[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(e[a])){const l=e[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const u=l[c];C(u,t.slice(s+1),n[c])}else for(const c of l)C(c,t.slice(s+1),n)}return}else if(i.endsWith("[0]")){const a=i.slice(0,-3);a in e||(e[a]=[{}]);const l=e[a];C(l[0],t.slice(s+1),n);return}(!e[i]||typeof e[i]!="object")&&(e[i]={}),e=e[i]}const r=t[t.length-1],o=e[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function S(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const o=t[r];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in e){const i=e[s];return Array.isArray(i)?i.map(a=>S(a,t.slice(r+1),n)):n}else return n}else e=e[o]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function iue(e,t){for(const[n,r]of Object.entries(t)){const o=n.split("."),s=r.split("."),i=new Set;let a=-1;for(let l=0;l<o.length;l++)if(o[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&i.add(c)}tN(e,o,s,0,i)}}function tN(e,t,n,r,o){if(r>=t.length||typeof e!="object"||e===null)return;const s=t[r];if(s.endsWith("[]")){const i=s.slice(0,-2),a=e;if(i in a&&Array.isArray(a[i]))for(const l of a[i])tN(l,t,n,r+1,o)}else if(s==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const i=e,a=Object.keys(i).filter(c=>!c.startsWith("_")&&!o.has(c)),l={};for(const c of a)l[c]=i[c];for(const[c,u]of Object.entries(l)){const f=[];for(const m of n.slice(r))m==="*"?f.push(c):f.push(m);C(i,f,u)}for(const c of a)delete i[c]}}else{const i=e;s in i&&tN(i[s],t,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QI(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aue(e){const t={},n=S(e,["operationName"]);n!=null&&C(t,["operationName"],n);const r=S(e,["resourceName"]);return r!=null&&C(t,["_url","resourceName"],r),t}function lue(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const o=S(e,["done"]);o!=null&&C(t,["done"],o);const s=S(e,["error"]);s!=null&&C(t,["error"],s);const i=S(e,["response","generateVideoResponse"]);return i!=null&&C(t,["response"],uue(i)),t}function cue(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const o=S(e,["done"]);o!=null&&C(t,["done"],o);const s=S(e,["error"]);s!=null&&C(t,["error"],s);const i=S(e,["response"]);return i!=null&&C(t,["response"],due(i)),t}function uue(e){const t={},n=S(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>fue(i))),C(t,["generatedVideos"],s)}const r=S(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const o=S(e,["raiMediaFilteredReasons"]);return o!=null&&C(t,["raiMediaFilteredReasons"],o),t}function due(e){const t={},n=S(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>hue(i))),C(t,["generatedVideos"],s)}const r=S(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const o=S(e,["raiMediaFilteredReasons"]);return o!=null&&C(t,["raiMediaFilteredReasons"],o),t}function fue(e){const t={},n=S(e,["video"]);return n!=null&&C(t,["video"],vue(n)),t}function hue(e){const t={},n=S(e,["_self"]);return n!=null&&C(t,["video"],xue(n)),t}function pue(e){const t={},n=S(e,["operationName"]);return n!=null&&C(t,["_url","operationName"],n),t}function mue(e){const t={},n=S(e,["operationName"]);return n!=null&&C(t,["_url","operationName"],n),t}function gue(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const o=S(e,["done"]);o!=null&&C(t,["done"],o);const s=S(e,["error"]);s!=null&&C(t,["error"],s);const i=S(e,["response"]);return i!=null&&C(t,["response"],bue(i)),t}function bue(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["parent"]);r!=null&&C(t,["parent"],r);const o=S(e,["documentName"]);return o!=null&&C(t,["documentName"],o),t}function BV(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const o=S(e,["done"]);o!=null&&C(t,["done"],o);const s=S(e,["error"]);s!=null&&C(t,["error"],s);const i=S(e,["response"]);return i!=null&&C(t,["response"],yue(i)),t}function yue(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["parent"]);r!=null&&C(t,["parent"],r);const o=S(e,["documentName"]);return o!=null&&C(t,["documentName"],o),t}function vue(e){const t={},n=S(e,["uri"]);n!=null&&C(t,["uri"],n);const r=S(e,["encodedVideo"]);r!=null&&C(t,["videoBytes"],QI(r));const o=S(e,["encoding"]);return o!=null&&C(t,["mimeType"],o),t}function xue(e){const t={},n=S(e,["gcsUri"]);n!=null&&C(t,["uri"],n);const r=S(e,["bytesBase64Encoded"]);r!=null&&C(t,["videoBytes"],QI(r));const o=S(e,["mimeType"]);return o!=null&&C(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fO;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(fO||(fO={}));var hO;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(hO||(hO={}));var pO;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(pO||(pO={}));var xn;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(xn||(xn={}));var mO;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(mO||(mO={}));var gO;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(gO||(gO={}));var bO;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(bO||(bO={}));var yO;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(yO||(yO={}));var vO;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(vO||(vO={}));var xO;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(xO||(xO={}));var wO;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(wO||(wO={}));var EO;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(EO||(EO={}));var _O;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(_O||(_O={}));var SO;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(SO||(SO={}));var TO;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(TO||(TO={}));var CO;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(CO||(CO={}));var kO;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(kO||(kO={}));var AO;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(AO||(AO={}));var NO;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(NO||(NO={}));var F1;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(F1||(F1={}));var IO;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(IO||(IO={}));var RO;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(RO||(RO={}));var MO;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(MO||(MO={}));var nN;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(nN||(nN={}));var DO;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(DO||(DO={}));var OO;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(OO||(OO={}));var PO;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(PO||(PO={}));var LO;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(LO||(LO={}));var $O;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})($O||($O={}));var FO;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(FO||(FO={}));var BO;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(BO||(BO={}));var zO;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(zO||(zO={}));var jO;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(jO||(jO={}));var UO;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(UO||(UO={}));var HO;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(HO||(HO={}));var VO;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(VO||(VO={}));var qO;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(qO||(qO={}));var GO;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(GO||(GO={}));var WO;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(WO||(WO={}));var YO;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(YO||(YO={}));var KO;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(KO||(KO={}));var ZO;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(ZO||(ZO={}));var JO;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(JO||(JO={}));var XO;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(XO||(XO={}));var QO;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(QO||(QO={}));var eP;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(eP||(eP={}));var tP;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(tP||(tP={}));var nP;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(nP||(nP={}));var rP;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(rP||(rP={}));var oP;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(oP||(oP={}));var sP;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(sP||(sP={}));var iP;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(iP||(iP={}));var aP;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(aP||(aP={}));var lP;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(lP||(lP={}));var d1;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(d1||(d1={}));class rN{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Fy{get text(){var t,n,r,o,s,i,a,l;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const f=[];for(const m of(l=(a=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&f.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var t,n,r,o,s,i,a,l;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const f of(l=(a=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(f))m!=="inlineData"&&(g!==null||g!==void 0)&&u.push(m);f.inlineData&&typeof f.inlineData.data=="string"&&(c+=atob(f.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,r,o,s,i,a,l;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,n,r,o,s,i,a,l,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.executableCode).map(f=>f.executableCode).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,r,o,s,i,a,l,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.codeExecutionResult).map(f=>f.codeExecutionResult).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class cP{}class uP{}class wue{}class Eue{}class _ue{}class Sue{}class dP{}class fP{}class hP{}class Tue{}class q_{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new q_;let o;const s=t;return n?o=cue(s):o=lue(s),Object.assign(r,o),r}}class pP{}class mP{}class gP{}class Cue{}class kue{}class Aue{}class eR{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new eR,s=gue(t);return Object.assign(r,s),r}}class Nue{}class Iue{}class Rue{}class bP{}class Mue{get text(){var t,n,r;let o="",s=!1;const i=[];for(const a of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&i.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,o+=a.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var t,n,r;let o="";const s=[];for(const i of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(i))a!=="inlineData"&&l!==null&&s.push(a);i.inlineData&&typeof i.inlineData.data=="string"&&(o+=atob(i.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Due{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class tR{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new tR,s=BV(t);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function io(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function zV(e,t){const n=io(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function jV(e){return Array.isArray(e)?e.map(t=>G_(t)):[G_(e)]}function G_(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function UV(e){const t=G_(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function HV(e){const t=G_(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function yP(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function VV(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>yP(t)):[yP(e)]}function oN(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function vP(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function xP(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function va(e){if(e==null)throw new Error("ContentUnion is required");return oN(e)?e:{role:"user",parts:VV(e)}}function nR(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=va(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=va(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>va(n)):[va(t)]}function Ic(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(vP(e)||xP(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[va(e)]}const t=[],n=[],r=oN(e[0]);for(const o of e){const s=oN(o);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(o);else{if(vP(o)||xP(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||t.push({role:"user",parts:VV(n)}),t}function Oue(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(xn).includes(n[0].toUpperCase())?n[0].toUpperCase():xn.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(xn).includes(r.toUpperCase())?r.toUpperCase():xn.TYPE_UNSPECIFIED})}}function y1(e){const t={},n=["items"],r=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=e.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,e=s[1]):s[1].type==="null"&&(t.nullable=!0,e=s[0])),e.type instanceof Array&&Oue(e.type,t);for(const[i,a]of Object.entries(e))if(a!=null)if(i=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(xn).includes(a.toUpperCase())?a.toUpperCase():xn.TYPE_UNSPECIFIED}else if(n.includes(i))t[i]=y1(a);else if(r.includes(i)){const l=[];for(const c of a){if(c.type=="null"){t.nullable=!0;continue}l.push(y1(c))}t[i]=l}else if(o.includes(i)){const l={};for(const[c,u]of Object.entries(a))l[c]=y1(u);t[i]=l}else{if(i==="additionalProperties")continue;t[i]=a}return t}function rR(e){return y1(e)}function oR(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function sR(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function gb(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=y1(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=y1(t.response));return e}function bb(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Pue(e,t,n,r=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function rh(e,t){if(typeof t!="string")throw new Error("name must be a string");return Pue(e,t,"cachedContents")}function qV(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function F0(e){return QI(e)}function Lue(e){return e!=null&&typeof e=="object"&&"name"in e}function $ue(e){return e!=null&&typeof e=="object"&&"video"in e}function Fue(e){return e!=null&&typeof e=="object"&&"uri"in e}function GV(e){var t;let n;if(Lue(e)&&(n=e.name),!(Fue(e)&&(n=e.uri,n===void 0))&&!($ue(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function WV(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function YV(e){for(const t of["models","tunedModels","publisherModels"])if(Bue(e,t))return e[t];return[]}function Bue(e,t){return e!==null&&typeof e=="object"&&t in e}function zue(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function jue(e,t={}){const n=[],r=new Set;for(const o of e){const s=o.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const i=zue(o,t);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function KV(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Uue(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function ZV(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let s=!1;for(const i of o){if(typeof i!="object"||i===null)continue;const l=i.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function yb(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function JV(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hue(e){const t={},n=S(e,["responsesFile"]);n!=null&&C(t,["fileName"],n);const r=S(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>_de(i))),C(t,["inlinedResponses"],s)}const o=S(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),C(t,["inlinedEmbedContentResponses"],s)}return t}function Vue(e){const t={},n=S(e,["predictionsFormat"]);n!=null&&C(t,["format"],n);const r=S(e,["gcsDestination","outputUriPrefix"]);r!=null&&C(t,["gcsUri"],r);const o=S(e,["bigqueryDestination","outputUri"]);return o!=null&&C(t,["bigqueryUri"],o),t}function que(e){const t={},n=S(e,["format"]);n!=null&&C(t,["predictionsFormat"],n);const r=S(e,["gcsUri"]);r!=null&&C(t,["gcsDestination","outputUriPrefix"],r);const o=S(e,["bigqueryUri"]);if(o!=null&&C(t,["bigqueryDestination","outputUri"],o),S(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(S(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function x_(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata","displayName"]);r!=null&&C(t,["displayName"],r);const o=S(e,["metadata","state"]);o!=null&&C(t,["state"],JV(o));const s=S(e,["metadata","createTime"]);s!=null&&C(t,["createTime"],s);const i=S(e,["metadata","endTime"]);i!=null&&C(t,["endTime"],i);const a=S(e,["metadata","updateTime"]);a!=null&&C(t,["updateTime"],a);const l=S(e,["metadata","model"]);l!=null&&C(t,["model"],l);const c=S(e,["metadata","output"]);return c!=null&&C(t,["dest"],Hue(ZV(c))),t}function sN(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["displayName"]);r!=null&&C(t,["displayName"],r);const o=S(e,["state"]);o!=null&&C(t,["state"],JV(o));const s=S(e,["error"]);s!=null&&C(t,["error"],s);const i=S(e,["createTime"]);i!=null&&C(t,["createTime"],i);const a=S(e,["startTime"]);a!=null&&C(t,["startTime"],a);const l=S(e,["endTime"]);l!=null&&C(t,["endTime"],l);const c=S(e,["updateTime"]);c!=null&&C(t,["updateTime"],c);const u=S(e,["model"]);u!=null&&C(t,["model"],u);const f=S(e,["inputConfig"]);f!=null&&C(t,["src"],Gue(f));const m=S(e,["outputConfig"]);m!=null&&C(t,["dest"],Vue(ZV(m)));const g=S(e,["completionStats"]);return g!=null&&C(t,["completionStats"],g),t}function Gue(e){const t={},n=S(e,["instancesFormat"]);n!=null&&C(t,["format"],n);const r=S(e,["gcsSource","uris"]);r!=null&&C(t,["gcsUri"],r);const o=S(e,["bigquerySource","inputUri"]);return o!=null&&C(t,["bigqueryUri"],o),t}function Wue(e,t){const n={};if(S(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(S(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=S(t,["fileName"]);r!=null&&C(n,["fileName"],r);const o=S(t,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>Ede(e,i))),C(n,["requests","requests"],s)}return n}function Yue(e){const t={},n=S(e,["format"]);n!=null&&C(t,["instancesFormat"],n);const r=S(e,["gcsUri"]);r!=null&&C(t,["gcsSource","uris"],r);const o=S(e,["bigqueryUri"]);if(o!=null&&C(t,["bigquerySource","inputUri"],o),S(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Kue(e){const t={},n=S(e,["data"]);if(n!=null&&C(t,["data"],n),S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Zue(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function Jue(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function Xue(e){const t={},n=S(e,["content"]);n!=null&&C(t,["content"],n);const r=S(e,["citationMetadata"]);r!=null&&C(t,["citationMetadata"],Que(r));const o=S(e,["tokenCount"]);o!=null&&C(t,["tokenCount"],o);const s=S(e,["finishReason"]);s!=null&&C(t,["finishReason"],s);const i=S(e,["avgLogprobs"]);i!=null&&C(t,["avgLogprobs"],i);const a=S(e,["groundingMetadata"]);a!=null&&C(t,["groundingMetadata"],a);const l=S(e,["index"]);l!=null&&C(t,["index"],l);const c=S(e,["logprobsResult"]);c!=null&&C(t,["logprobsResult"],c);const u=S(e,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),C(t,["safetyRatings"],m)}const f=S(e,["urlContextMetadata"]);return f!=null&&C(t,["urlContextMetadata"],f),t}function Que(e){const t={},n=S(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),C(t,["citations"],r)}return t}function XV(e){const t={},n=S(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ide(s))),C(t,["parts"],o)}const r=S(e,["role"]);return r!=null&&C(t,["role"],r),t}function ede(e,t){const n={},r=S(e,["displayName"]);if(t!==void 0&&r!=null&&C(t,["batch","displayName"],r),S(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function tde(e,t){const n={},r=S(e,["displayName"]);t!==void 0&&r!=null&&C(t,["displayName"],r);const o=S(e,["dest"]);return t!==void 0&&o!=null&&C(t,["outputConfig"],que(Uue(o))),n}function wP(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["src"]);o!=null&&C(n,["batch","inputConfig"],Wue(e,KV(e,o)));const s=S(t,["config"]);return s!=null&&ede(s,n),n}function nde(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["model"],io(e,r));const o=S(t,["src"]);o!=null&&C(n,["inputConfig"],Yue(KV(e,o)));const s=S(t,["config"]);return s!=null&&tde(s,n),n}function rde(e,t){const n={},r=S(e,["displayName"]);return t!==void 0&&r!=null&&C(t,["batch","displayName"],r),n}function ode(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["src"]);o!=null&&C(n,["batch","inputConfig"],dde(e,o));const s=S(t,["config"]);return s!=null&&rde(s,n),n}function sde(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function ide(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function ade(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["name"]);r!=null&&C(t,["name"],r);const o=S(e,["done"]);o!=null&&C(t,["done"],o);const s=S(e,["error"]);return s!=null&&C(t,["error"],s),t}function lde(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["name"]);r!=null&&C(t,["name"],r);const o=S(e,["done"]);o!=null&&C(t,["done"],o);const s=S(e,["error"]);return s!=null&&C(t,["error"],s),t}function cde(e,t){const n={},r=S(t,["contents"]);if(r!=null){let s=nR(e,r);Array.isArray(s)&&(s=s.map(i=>i)),C(n,["requests[]","request","content"],s)}const o=S(t,["config"]);return o!=null&&(C(n,["_self"],ude(o,n)),iue(n,{"requests[].*":"requests[].request.*"})),n}function ude(e,t){const n={},r=S(e,["taskType"]);t!==void 0&&r!=null&&C(t,["requests[]","taskType"],r);const o=S(e,["title"]);t!==void 0&&o!=null&&C(t,["requests[]","title"],o);const s=S(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&C(t,["requests[]","outputDimensionality"],s),S(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function dde(e,t){const n={},r=S(t,["fileName"]);r!=null&&C(n,["file_name"],r);const o=S(t,["inlinedRequests"]);return o!=null&&C(n,["requests"],cde(e,o)),n}function fde(e){const t={};if(S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function hde(e){const t={},n=S(e,["id"]);n!=null&&C(t,["id"],n);const r=S(e,["args"]);r!=null&&C(t,["args"],r);const o=S(e,["name"]);if(o!=null&&C(t,["name"],o),S(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function pde(e){const t={},n=S(e,["mode"]);n!=null&&C(t,["mode"],n);const r=S(e,["allowedFunctionNames"]);if(r!=null&&C(t,["allowedFunctionNames"],r),S(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function mde(e,t,n){const r={},o=S(t,["systemInstruction"]);n!==void 0&&o!=null&&C(n,["systemInstruction"],XV(va(o)));const s=S(t,["temperature"]);s!=null&&C(r,["temperature"],s);const i=S(t,["topP"]);i!=null&&C(r,["topP"],i);const a=S(t,["topK"]);a!=null&&C(r,["topK"],a);const l=S(t,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=S(t,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=S(t,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const f=S(t,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const m=S(t,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=S(t,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=S(t,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=S(t,["seed"]);v!=null&&C(r,["seed"],v);const w=S(t,["responseMimeType"]);w!=null&&C(r,["responseMimeType"],w);const _=S(t,["responseSchema"]);_!=null&&C(r,["responseSchema"],rR(_));const T=S(t,["responseJsonSchema"]);if(T!=null&&C(r,["responseJsonSchema"],T),S(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=S(t,["safetySettings"]);if(n!==void 0&&k!=null){let q=k;Array.isArray(q)&&(q=q.map(z=>Rde(z))),C(n,["safetySettings"],q)}const M=S(t,["tools"]);if(n!==void 0&&M!=null){let q=bb(M);Array.isArray(q)&&(q=q.map(z=>Dde(gb(z)))),C(n,["tools"],q)}const D=S(t,["toolConfig"]);if(n!==void 0&&D!=null&&C(n,["toolConfig"],Mde(D)),S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=S(t,["cachedContent"]);n!==void 0&&I!=null&&C(n,["cachedContent"],rh(e,I));const P=S(t,["responseModalities"]);P!=null&&C(r,["responseModalities"],P);const B=S(t,["mediaResolution"]);B!=null&&C(r,["mediaResolution"],B);const U=S(t,["speechConfig"]);if(U!=null&&C(r,["speechConfig"],oR(U)),S(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=S(t,["thinkingConfig"]);j!=null&&C(r,["thinkingConfig"],j);const H=S(t,["imageConfig"]);return H!=null&&C(r,["imageConfig"],wde(H)),r}function gde(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Xue(c))),C(t,["candidates"],l)}const o=S(e,["modelVersion"]);o!=null&&C(t,["modelVersion"],o);const s=S(e,["promptFeedback"]);s!=null&&C(t,["promptFeedback"],s);const i=S(e,["responseId"]);i!=null&&C(t,["responseId"],i);const a=S(e,["usageMetadata"]);return a!=null&&C(t,["usageMetadata"],a),t}function bde(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function yde(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],yb(e,r)),n}function vde(e){const t={};if(S(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function xde(e){const t={};if(S(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function wde(e){const t={},n=S(e,["aspectRatio"]);n!=null&&C(t,["aspectRatio"],n);const r=S(e,["imageSize"]);if(r!=null&&C(t,["imageSize"],r),S(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Ede(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["request","model"],io(e,r));const o=S(t,["contents"]);if(o!=null){let a=Ic(o);Array.isArray(a)&&(a=a.map(l=>XV(l))),C(n,["request","contents"],a)}const s=S(t,["metadata"]);s!=null&&C(n,["metadata"],s);const i=S(t,["config"]);return i!=null&&C(n,["request","generationConfig"],mde(e,i,S(n,["request"],{}))),n}function _de(e){const t={},n=S(e,["response"]);n!=null&&C(t,["response"],gde(n));const r=S(e,["error"]);return r!=null&&C(t,["error"],r),t}function Sde(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const o=S(e,["pageToken"]);if(t!==void 0&&o!=null&&C(t,["_query","pageToken"],o),S(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Tde(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const o=S(e,["pageToken"]);t!==void 0&&o!=null&&C(t,["_query","pageToken"],o);const s=S(e,["filter"]);return t!==void 0&&s!=null&&C(t,["_query","filter"],s),n}function Cde(e){const t={},n=S(e,["config"]);return n!=null&&Sde(n,t),t}function kde(e){const t={},n=S(e,["config"]);return n!=null&&Tde(n,t),t}function Ade(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const o=S(e,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>x_(i))),C(t,["batchJobs"],s)}return t}function Nde(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const o=S(e,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>sN(i))),C(t,["batchJobs"],s)}return t}function Ide(e){const t={},n=S(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=S(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const o=S(e,["executableCode"]);o!=null&&C(t,["executableCode"],o);const s=S(e,["fileData"]);s!=null&&C(t,["fileData"],fde(s));const i=S(e,["functionCall"]);i!=null&&C(t,["functionCall"],hde(i));const a=S(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=S(e,["inlineData"]);l!=null&&C(t,["inlineData"],Kue(l));const c=S(e,["text"]);c!=null&&C(t,["text"],c);const u=S(e,["thought"]);u!=null&&C(t,["thought"],u);const f=S(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=S(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function Rde(e){const t={},n=S(e,["category"]);if(n!=null&&C(t,["category"],n),S(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(e,["threshold"]);return r!=null&&C(t,["threshold"],r),t}function Mde(e){const t={},n=S(e,["functionCallingConfig"]);n!=null&&C(t,["functionCallingConfig"],pde(n));const r=S(e,["retrievalConfig"]);return r!=null&&C(t,["retrievalConfig"],r),t}function Dde(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(S(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const o=S(e,["computerUse"]);o!=null&&C(t,["computerUse"],o);const s=S(e,["fileSearch"]);s!=null&&C(t,["fileSearch"],s);const i=S(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),S(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],vde(a));const l=S(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],xde(l));const c=S(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vf;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Vf||(Vf={}));class Am{constructor(t,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,o)}init(t,n,r){var o,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(s=(o=i.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ode extends nh{constructor(t){super(),this.apiClient=t,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Am(Vf.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=wP(this.apiClient,t),r=n._url,o=en("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const u of l){const f=Object.assign({},u);if(f.systemInstruction){const m=f.systemInstruction;delete f.systemInstruction;const g=f.request;g.systemInstruction=m,f.request=g}c.push(f)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const s=this.getGcsUri(t),i=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${o}`;else if(i)r.dest=`${i}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=nde(this.apiClient,t);return a=en("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>sN(u))}else{const c=wP(this.apiClient,t);return a=en("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),i.then(u=>x_(u))}}async createEmbeddingsInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ode(this.apiClient,t);return s=en("{model}:asyncBatchEmbedContent",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>x_(l))}}async get(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=yde(this.apiClient,t);return a=en("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>sN(u))}else{const c=bde(this.apiClient,t);return a=en("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),i.then(u=>x_(u))}}async cancel(t){var n,r,o,s;let i="",a={};if(this.apiClient.isVertexAI()){const l=Jue(this.apiClient,t);i=en("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=Zue(this.apiClient,t);i=en("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=kde(t);return a=en("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Nde(u),m=new bP;return Object.assign(m,f),m})}else{const c=Cde(t);return a=en("batches",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Ade(u),m=new bP;return Object.assign(m,f),m})}}async delete(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=ide(this.apiClient,t);return a=en("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>lde(u))}else{const c=sde(this.apiClient,t);return a=en("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>ade(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pde(e){const t={},n=S(e,["data"]);if(n!=null&&C(t,["data"],n),S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function EP(e){const t={},n=S(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ofe(s))),C(t,["parts"],o)}const r=S(e,["role"]);return r!=null&&C(t,["role"],r),t}function Lde(e,t){const n={},r=S(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const o=S(e,["expireTime"]);t!==void 0&&o!=null&&C(t,["expireTime"],o);const s=S(e,["displayName"]);t!==void 0&&s!=null&&C(t,["displayName"],s);const i=S(e,["contents"]);if(t!==void 0&&i!=null){let u=Ic(i);Array.isArray(u)&&(u=u.map(f=>EP(f))),C(t,["contents"],u)}const a=S(e,["systemInstruction"]);t!==void 0&&a!=null&&C(t,["systemInstruction"],EP(va(a)));const l=S(e,["tools"]);if(t!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>ife(f))),C(t,["tools"],u)}const c=S(e,["toolConfig"]);if(t!==void 0&&c!=null&&C(t,["toolConfig"],sfe(c)),S(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function $de(e,t){const n={},r=S(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const o=S(e,["expireTime"]);t!==void 0&&o!=null&&C(t,["expireTime"],o);const s=S(e,["displayName"]);t!==void 0&&s!=null&&C(t,["displayName"],s);const i=S(e,["contents"]);if(t!==void 0&&i!=null){let f=Ic(i);Array.isArray(f)&&(f=f.map(m=>m)),C(t,["contents"],f)}const a=S(e,["systemInstruction"]);t!==void 0&&a!=null&&C(t,["systemInstruction"],va(a));const l=S(e,["tools"]);if(t!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>afe(m))),C(t,["tools"],f)}const c=S(e,["toolConfig"]);t!==void 0&&c!=null&&C(t,["toolConfig"],c);const u=S(e,["kmsKeyName"]);return t!==void 0&&u!=null&&C(t,["encryption_spec","kmsKeyName"],u),n}function Fde(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["model"],zV(e,r));const o=S(t,["config"]);return o!=null&&Lde(o,n),n}function Bde(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["model"],zV(e,r));const o=S(t,["config"]);return o!=null&&$de(o,n),n}function zde(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],rh(e,r)),n}function jde(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],rh(e,r)),n}function Ude(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function Hde(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function Vde(e){const t={};if(S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function qde(e){const t={},n=S(e,["id"]);n!=null&&C(t,["id"],n);const r=S(e,["args"]);r!=null&&C(t,["args"],r);const o=S(e,["name"]);if(o!=null&&C(t,["name"],o),S(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Gde(e){const t={},n=S(e,["mode"]);n!=null&&C(t,["mode"],n);const r=S(e,["allowedFunctionNames"]);if(r!=null&&C(t,["allowedFunctionNames"],r),S(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Wde(e){const t={};if(S(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(e,["description"]);n!=null&&C(t,["description"],n);const r=S(e,["name"]);r!=null&&C(t,["name"],r);const o=S(e,["parameters"]);o!=null&&C(t,["parameters"],o);const s=S(e,["parametersJsonSchema"]);s!=null&&C(t,["parametersJsonSchema"],s);const i=S(e,["response"]);i!=null&&C(t,["response"],i);const a=S(e,["responseJsonSchema"]);return a!=null&&C(t,["responseJsonSchema"],a),t}function Yde(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],rh(e,r)),n}function Kde(e,t){const n={},r=S(t,["name"]);return r!=null&&C(n,["_url","name"],rh(e,r)),n}function Zde(e){const t={};if(S(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function Jde(e){const t={};if(S(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function Xde(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const o=S(e,["pageToken"]);return t!==void 0&&o!=null&&C(t,["_query","pageToken"],o),n}function Qde(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const o=S(e,["pageToken"]);return t!==void 0&&o!=null&&C(t,["_query","pageToken"],o),n}function efe(e){const t={},n=S(e,["config"]);return n!=null&&Xde(n,t),t}function tfe(e){const t={},n=S(e,["config"]);return n!=null&&Qde(n,t),t}function nfe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const o=S(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),C(t,["cachedContents"],s)}return t}function rfe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const o=S(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),C(t,["cachedContents"],s)}return t}function ofe(e){const t={},n=S(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=S(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const o=S(e,["executableCode"]);o!=null&&C(t,["executableCode"],o);const s=S(e,["fileData"]);s!=null&&C(t,["fileData"],Vde(s));const i=S(e,["functionCall"]);i!=null&&C(t,["functionCall"],qde(i));const a=S(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=S(e,["inlineData"]);l!=null&&C(t,["inlineData"],Pde(l));const c=S(e,["text"]);c!=null&&C(t,["text"],c);const u=S(e,["thought"]);u!=null&&C(t,["thought"],u);const f=S(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=S(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function sfe(e){const t={},n=S(e,["functionCallingConfig"]);n!=null&&C(t,["functionCallingConfig"],Gde(n));const r=S(e,["retrievalConfig"]);return r!=null&&C(t,["retrievalConfig"],r),t}function ife(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(S(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const o=S(e,["computerUse"]);o!=null&&C(t,["computerUse"],o);const s=S(e,["fileSearch"]);s!=null&&C(t,["fileSearch"],s);const i=S(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),S(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],Zde(a));const l=S(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],Jde(l));const c=S(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}function afe(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Wde(m))),C(t,["functionDeclarations"],f)}const r=S(e,["retrieval"]);r!=null&&C(t,["retrieval"],r);const o=S(e,["googleSearchRetrieval"]);o!=null&&C(t,["googleSearchRetrieval"],o);const s=S(e,["computerUse"]);if(s!=null&&C(t,["computerUse"],s),S(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=S(e,["codeExecution"]);i!=null&&C(t,["codeExecution"],i);const a=S(e,["enterpriseWebSearch"]);a!=null&&C(t,["enterpriseWebSearch"],a);const l=S(e,["googleMaps"]);l!=null&&C(t,["googleMaps"],l);const c=S(e,["googleSearch"]);c!=null&&C(t,["googleSearch"],c);const u=S(e,["urlContext"]);return u!=null&&C(t,["urlContext"],u),t}function lfe(e,t){const n={},r=S(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const o=S(e,["expireTime"]);return t!==void 0&&o!=null&&C(t,["expireTime"],o),n}function cfe(e,t){const n={},r=S(e,["ttl"]);t!==void 0&&r!=null&&C(t,["ttl"],r);const o=S(e,["expireTime"]);return t!==void 0&&o!=null&&C(t,["expireTime"],o),n}function ufe(e,t){const n={},r=S(t,["name"]);r!=null&&C(n,["_url","name"],rh(e,r));const o=S(t,["config"]);return o!=null&&lfe(o,n),n}function dfe(e,t){const n={},r=S(t,["name"]);r!=null&&C(n,["_url","name"],rh(e,r));const o=S(t,["config"]);return o!=null&&cfe(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ffe extends nh{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Am(Vf.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Bde(this.apiClient,t);return a=en("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}else{const c=Fde(this.apiClient,t);return a=en("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Kde(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}else{const c=Yde(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=jde(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Hde(u),m=new mP;return Object.assign(m,f),m})}else{const c=zde(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Ude(u),m=new mP;return Object.assign(m,f),m})}}async update(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=dfe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}else{const c=ufe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async listInternal(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=tfe(t);return a=en("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=rfe(u),m=new gP;return Object.assign(m,f),m})}else{const c=efe(t);return a=en("cachedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=nfe(u),m=new gP;return Object.assign(m,f),m})}}}function _P(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ls(e){return this instanceof ls?(this.v=e,this):new ls(e)}function v1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(g){return function(y){return Promise.resolve(y).then(g,f)}}function a(g,y){r[g]&&(o[g]=function(v){return new Promise(function(w,_){s.push([g,v,w,_])>1||l(g,v)})},y&&(o[g]=y(o[g])))}function l(g,y){try{c(r[g](y))}catch(v){m(s[0][3],v)}}function c(g){g.value instanceof ls?Promise.resolve(g.value.v).then(u,f):m(s[0][2],g)}function u(g){l("next",g)}function f(g){l("throw",g)}function m(g,y){g(y),s.shift(),s.length&&l(s[0][0],s[0][1])}}function kv(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof _P=="function"?_P(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(i){return new Promise(function(a,l){i=e[s](i),o(a,l,i.done,i.value)})}}function o(s,i,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hfe(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:QV(n)}function QV(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function pfe(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function SP(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const o=[];let s=!0;for(;r<n&&e[r].role==="model";)o.push(e[r]),s&&!QV(e[r])&&(s=!1),r++;s?t.push(...o):t.pop()}return t}class mfe{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new gfe(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class gfe{constructor(t,n,r,o={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),pfe(s)}async sendMessage(t){var n;await this.sendPromise;const r=va(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,i,a;const l=await o,c=(i=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content,u=l.automaticFunctionCallingHistory,f=this.getHistory(!0).length;let m=[];u!=null&&(m=(a=u.slice(f))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const r=va(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,r)}getHistory(t=!1){const n=t?SP(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var r,o;return v1(this,arguments,function*(){var i,a,l,c;const u=[];try{for(var f=!0,m=kv(t),g;g=yield ls(m.next()),i=g.done,!i;f=!0){c=g.value,f=!1;const y=c;if(hfe(y)){const v=(o=(r=y.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;v!==void 0&&u.push(v)}yield yield ls(y)}}catch(y){a={error:y}}finally{try{!f&&!i&&(l=m.return)&&(yield ls(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(n,u)})}recordHistory(t,n,r){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...SP(r)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p4 extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,p4.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bfe(e){const t={},n=S(e,["file"]);return n!=null&&C(t,["file"],n),t}function yfe(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function vfe(e){const t={},n=S(e,["name"]);return n!=null&&C(t,["_url","file"],GV(n)),t}function xfe(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function wfe(e){const t={},n=S(e,["name"]);return n!=null&&C(t,["_url","file"],GV(n)),t}function Efe(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const o=S(e,["pageToken"]);return t!==void 0&&o!=null&&C(t,["_query","pageToken"],o),n}function _fe(e){const t={},n=S(e,["config"]);return n!=null&&Efe(n,t),t}function Sfe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const o=S(e,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),C(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tfe extends nh{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Am(Vf.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_fe(t);return s=en("files",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>{const c=Sfe(l),u=new Nue;return Object.assign(u,c),u})}}async createInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=bfe(t);return s=en("upload/v1beta/files",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const c=yfe(l),u=new Iue;return Object.assign(u,c),u})}}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wfe(t);return s=en("files/{file}",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vfe(t);return s=en("files/{file}",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>{const c=xfe(l),u=new Rue;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w_(e){const t={},n=S(e,["data"]);if(n!=null&&C(t,["data"],n),S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Cfe(e){const t={},n=S(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ufe(s))),C(t,["parts"],o)}const r=S(e,["role"]);return r!=null&&C(t,["role"],r),t}function kfe(e){const t={};if(S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Afe(e){const t={},n=S(e,["id"]);n!=null&&C(t,["id"],n);const r=S(e,["args"]);r!=null&&C(t,["args"],r);const o=S(e,["name"]);if(o!=null&&C(t,["name"],o),S(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Nfe(e){const t={};if(S(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(e,["description"]);n!=null&&C(t,["description"],n);const r=S(e,["name"]);r!=null&&C(t,["name"],r);const o=S(e,["parameters"]);o!=null&&C(t,["parameters"],o);const s=S(e,["parametersJsonSchema"]);s!=null&&C(t,["parametersJsonSchema"],s);const i=S(e,["response"]);i!=null&&C(t,["response"],i);const a=S(e,["responseJsonSchema"]);return a!=null&&C(t,["responseJsonSchema"],a),t}function Ife(e){const t={},n=S(e,["modelSelectionConfig"]);n!=null&&C(t,["modelConfig"],n);const r=S(e,["responseJsonSchema"]);r!=null&&C(t,["responseJsonSchema"],r);const o=S(e,["audioTimestamp"]);o!=null&&C(t,["audioTimestamp"],o);const s=S(e,["candidateCount"]);s!=null&&C(t,["candidateCount"],s);const i=S(e,["enableAffectiveDialog"]);i!=null&&C(t,["enableAffectiveDialog"],i);const a=S(e,["frequencyPenalty"]);a!=null&&C(t,["frequencyPenalty"],a);const l=S(e,["logprobs"]);l!=null&&C(t,["logprobs"],l);const c=S(e,["maxOutputTokens"]);c!=null&&C(t,["maxOutputTokens"],c);const u=S(e,["mediaResolution"]);u!=null&&C(t,["mediaResolution"],u);const f=S(e,["presencePenalty"]);f!=null&&C(t,["presencePenalty"],f);const m=S(e,["responseLogprobs"]);m!=null&&C(t,["responseLogprobs"],m);const g=S(e,["responseMimeType"]);g!=null&&C(t,["responseMimeType"],g);const y=S(e,["responseModalities"]);y!=null&&C(t,["responseModalities"],y);const v=S(e,["responseSchema"]);v!=null&&C(t,["responseSchema"],v);const w=S(e,["routingConfig"]);w!=null&&C(t,["routingConfig"],w);const _=S(e,["seed"]);_!=null&&C(t,["seed"],_);const T=S(e,["speechConfig"]);T!=null&&C(t,["speechConfig"],eq(T));const k=S(e,["stopSequences"]);k!=null&&C(t,["stopSequences"],k);const M=S(e,["temperature"]);M!=null&&C(t,["temperature"],M);const D=S(e,["thinkingConfig"]);D!=null&&C(t,["thinkingConfig"],D);const I=S(e,["topK"]);I!=null&&C(t,["topK"],I);const P=S(e,["topP"]);if(P!=null&&C(t,["topP"],P),S(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Rfe(e){const t={};if(S(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function Mfe(e){const t={};if(S(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function Dfe(e,t){const n={},r=S(e,["generationConfig"]);t!==void 0&&r!=null&&C(t,["setup","generationConfig"],r);const o=S(e,["responseModalities"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","responseModalities"],o);const s=S(e,["temperature"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","temperature"],s);const i=S(e,["topP"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","topP"],i);const a=S(e,["topK"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","topK"],a);const l=S(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=S(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=S(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const f=S(e,["speechConfig"]);t!==void 0&&f!=null&&C(t,["setup","generationConfig","speechConfig"],sR(f));const m=S(e,["thinkingConfig"]);t!==void 0&&m!=null&&C(t,["setup","generationConfig","thinkingConfig"],m);const g=S(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=S(e,["systemInstruction"]);t!==void 0&&y!=null&&C(t,["setup","systemInstruction"],Cfe(va(y)));const v=S(e,["tools"]);if(t!==void 0&&v!=null){let I=bb(v);Array.isArray(I)&&(I=I.map(P=>Vfe(gb(P)))),C(t,["setup","tools"],I)}const w=S(e,["sessionResumption"]);t!==void 0&&w!=null&&C(t,["setup","sessionResumption"],Hfe(w));const _=S(e,["inputAudioTranscription"]);t!==void 0&&_!=null&&C(t,["setup","inputAudioTranscription"],_);const T=S(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&C(t,["setup","outputAudioTranscription"],T);const k=S(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&C(t,["setup","realtimeInputConfig"],k);const M=S(e,["contextWindowCompression"]);t!==void 0&&M!=null&&C(t,["setup","contextWindowCompression"],M);const D=S(e,["proactivity"]);return t!==void 0&&D!=null&&C(t,["setup","proactivity"],D),n}function Ofe(e,t){const n={},r=S(e,["generationConfig"]);t!==void 0&&r!=null&&C(t,["setup","generationConfig"],Ife(r));const o=S(e,["responseModalities"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","responseModalities"],o);const s=S(e,["temperature"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","temperature"],s);const i=S(e,["topP"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","topP"],i);const a=S(e,["topK"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","topK"],a);const l=S(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=S(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=S(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const f=S(e,["speechConfig"]);t!==void 0&&f!=null&&C(t,["setup","generationConfig","speechConfig"],eq(sR(f)));const m=S(e,["thinkingConfig"]);t!==void 0&&m!=null&&C(t,["setup","generationConfig","thinkingConfig"],m);const g=S(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=S(e,["systemInstruction"]);t!==void 0&&y!=null&&C(t,["setup","systemInstruction"],va(y));const v=S(e,["tools"]);if(t!==void 0&&v!=null){let I=bb(v);Array.isArray(I)&&(I=I.map(P=>qfe(gb(P)))),C(t,["setup","tools"],I)}const w=S(e,["sessionResumption"]);t!==void 0&&w!=null&&C(t,["setup","sessionResumption"],w);const _=S(e,["inputAudioTranscription"]);t!==void 0&&_!=null&&C(t,["setup","inputAudioTranscription"],_);const T=S(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&C(t,["setup","outputAudioTranscription"],T);const k=S(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&C(t,["setup","realtimeInputConfig"],k);const M=S(e,["contextWindowCompression"]);t!==void 0&&M!=null&&C(t,["setup","contextWindowCompression"],M);const D=S(e,["proactivity"]);return t!==void 0&&D!=null&&C(t,["setup","proactivity"],D),n}function Pfe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["setup","model"],io(e,r));const o=S(t,["config"]);return o!=null&&C(n,["config"],Dfe(o,n)),n}function Lfe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["setup","model"],io(e,r));const o=S(t,["config"]);return o!=null&&C(n,["config"],Ofe(o,n)),n}function $fe(e){const t={},n=S(e,["musicGenerationConfig"]);return n!=null&&C(t,["musicGenerationConfig"],n),t}function Ffe(e){const t={},n=S(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),C(t,["weightedPrompts"],r)}return t}function Bfe(e){const t={},n=S(e,["media"]);if(n!=null){let c=jV(n);Array.isArray(c)&&(c=c.map(u=>w_(u))),C(t,["mediaChunks"],c)}const r=S(e,["audio"]);r!=null&&C(t,["audio"],w_(HV(r)));const o=S(e,["audioStreamEnd"]);o!=null&&C(t,["audioStreamEnd"],o);const s=S(e,["video"]);s!=null&&C(t,["video"],w_(UV(s)));const i=S(e,["text"]);i!=null&&C(t,["text"],i);const a=S(e,["activityStart"]);a!=null&&C(t,["activityStart"],a);const l=S(e,["activityEnd"]);return l!=null&&C(t,["activityEnd"],l),t}function zfe(e){const t={},n=S(e,["media"]);if(n!=null){let c=jV(n);Array.isArray(c)&&(c=c.map(u=>u)),C(t,["mediaChunks"],c)}const r=S(e,["audio"]);r!=null&&C(t,["audio"],HV(r));const o=S(e,["audioStreamEnd"]);o!=null&&C(t,["audioStreamEnd"],o);const s=S(e,["video"]);s!=null&&C(t,["video"],UV(s));const i=S(e,["text"]);i!=null&&C(t,["text"],i);const a=S(e,["activityStart"]);a!=null&&C(t,["activityStart"],a);const l=S(e,["activityEnd"]);return l!=null&&C(t,["activityEnd"],l),t}function jfe(e){const t={},n=S(e,["setupComplete"]);n!=null&&C(t,["setupComplete"],n);const r=S(e,["serverContent"]);r!=null&&C(t,["serverContent"],r);const o=S(e,["toolCall"]);o!=null&&C(t,["toolCall"],o);const s=S(e,["toolCallCancellation"]);s!=null&&C(t,["toolCallCancellation"],s);const i=S(e,["usageMetadata"]);i!=null&&C(t,["usageMetadata"],Gfe(i));const a=S(e,["goAway"]);a!=null&&C(t,["goAway"],a);const l=S(e,["sessionResumptionUpdate"]);return l!=null&&C(t,["sessionResumptionUpdate"],l),t}function Ufe(e){const t={},n=S(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=S(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const o=S(e,["executableCode"]);o!=null&&C(t,["executableCode"],o);const s=S(e,["fileData"]);s!=null&&C(t,["fileData"],kfe(s));const i=S(e,["functionCall"]);i!=null&&C(t,["functionCall"],Afe(i));const a=S(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=S(e,["inlineData"]);l!=null&&C(t,["inlineData"],w_(l));const c=S(e,["text"]);c!=null&&C(t,["text"],c);const u=S(e,["thought"]);u!=null&&C(t,["thought"],u);const f=S(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=S(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function Hfe(e){const t={},n=S(e,["handle"]);if(n!=null&&C(t,["handle"],n),S(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function eq(e){const t={},n=S(e,["languageCode"]);n!=null&&C(t,["languageCode"],n);const r=S(e,["voiceConfig"]);if(r!=null&&C(t,["voiceConfig"],r),S(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Vfe(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(S(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const o=S(e,["computerUse"]);o!=null&&C(t,["computerUse"],o);const s=S(e,["fileSearch"]);s!=null&&C(t,["fileSearch"],s);const i=S(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),S(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],Rfe(a));const l=S(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],Mfe(l));const c=S(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}function qfe(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>Nfe(m))),C(t,["functionDeclarations"],f)}const r=S(e,["retrieval"]);r!=null&&C(t,["retrieval"],r);const o=S(e,["googleSearchRetrieval"]);o!=null&&C(t,["googleSearchRetrieval"],o);const s=S(e,["computerUse"]);if(s!=null&&C(t,["computerUse"],s),S(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=S(e,["codeExecution"]);i!=null&&C(t,["codeExecution"],i);const a=S(e,["enterpriseWebSearch"]);a!=null&&C(t,["enterpriseWebSearch"],a);const l=S(e,["googleMaps"]);l!=null&&C(t,["googleMaps"],l);const c=S(e,["googleSearch"]);c!=null&&C(t,["googleSearch"],c);const u=S(e,["urlContext"]);return u!=null&&C(t,["urlContext"],u),t}function Gfe(e){const t={},n=S(e,["promptTokenCount"]);n!=null&&C(t,["promptTokenCount"],n);const r=S(e,["cachedContentTokenCount"]);r!=null&&C(t,["cachedContentTokenCount"],r);const o=S(e,["candidatesTokenCount"]);o!=null&&C(t,["responseTokenCount"],o);const s=S(e,["toolUsePromptTokenCount"]);s!=null&&C(t,["toolUsePromptTokenCount"],s);const i=S(e,["thoughtsTokenCount"]);i!=null&&C(t,["thoughtsTokenCount"],i);const a=S(e,["totalTokenCount"]);a!=null&&C(t,["totalTokenCount"],a);const l=S(e,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["promptTokensDetails"],g)}const c=S(e,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["cacheTokensDetails"],g)}const u=S(e,["candidatesTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["responseTokensDetails"],g)}const f=S(e,["toolUsePromptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),C(t,["toolUsePromptTokensDetails"],g)}const m=S(e,["trafficType"]);return m!=null&&C(t,["trafficType"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wfe(e){const t={},n=S(e,["data"]);if(n!=null&&C(t,["data"],n),S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Yfe(e){const t={},n=S(e,["content"]);n!=null&&C(t,["content"],n);const r=S(e,["citationMetadata"]);r!=null&&C(t,["citationMetadata"],Kfe(r));const o=S(e,["tokenCount"]);o!=null&&C(t,["tokenCount"],o);const s=S(e,["finishReason"]);s!=null&&C(t,["finishReason"],s);const i=S(e,["avgLogprobs"]);i!=null&&C(t,["avgLogprobs"],i);const a=S(e,["groundingMetadata"]);a!=null&&C(t,["groundingMetadata"],a);const l=S(e,["index"]);l!=null&&C(t,["index"],l);const c=S(e,["logprobsResult"]);c!=null&&C(t,["logprobsResult"],c);const u=S(e,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),C(t,["safetyRatings"],m)}const f=S(e,["urlContextMetadata"]);return f!=null&&C(t,["urlContextMetadata"],f),t}function Kfe(e){const t={},n=S(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),C(t,["citations"],r)}return t}function Zfe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["contents"]);if(o!=null){let s=Ic(o);Array.isArray(s)&&(s=s.map(i=>i)),C(n,["contents"],s)}return n}function Jfe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),C(t,["tokensInfo"],o)}return t}function Xfe(e){const t={},n=S(e,["values"]);n!=null&&C(t,["values"],n);const r=S(e,["statistics"]);return r!=null&&C(t,["statistics"],Qfe(r)),t}function Qfe(e){const t={},n=S(e,["truncated"]);n!=null&&C(t,["truncated"],n);const r=S(e,["token_count"]);return r!=null&&C(t,["tokenCount"],r),t}function m4(e){const t={},n=S(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>l0e(s))),C(t,["parts"],o)}const r=S(e,["role"]);return r!=null&&C(t,["role"],r),t}function ehe(e){const t={},n=S(e,["controlType"]);n!=null&&C(t,["controlType"],n);const r=S(e,["enableControlImageComputation"]);return r!=null&&C(t,["computeControl"],r),t}function the(e){const t={};if(S(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(S(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(S(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function nhe(e,t){const n={},r=S(e,["systemInstruction"]);t!==void 0&&r!=null&&C(t,["systemInstruction"],va(r));const o=S(e,["tools"]);if(t!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>sq(a))),C(t,["tools"],i)}const s=S(e,["generationConfig"]);return t!==void 0&&s!=null&&C(t,["generationConfig"],Whe(s)),n}function rhe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["contents"]);if(o!=null){let i=Ic(o);Array.isArray(i)&&(i=i.map(a=>m4(a))),C(n,["contents"],i)}const s=S(t,["config"]);return s!=null&&the(s),n}function ohe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["contents"]);if(o!=null){let i=Ic(o);Array.isArray(i)&&(i=i.map(a=>a)),C(n,["contents"],i)}const s=S(t,["config"]);return s!=null&&nhe(s,n),n}function she(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["totalTokens"]);r!=null&&C(t,["totalTokens"],r);const o=S(e,["cachedContentTokenCount"]);return o!=null&&C(t,["cachedContentTokenCount"],o),t}function ihe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["totalTokens"]);return r!=null&&C(t,["totalTokens"],r),t}function ahe(e,t){const n={},r=S(t,["model"]);return r!=null&&C(n,["_url","name"],io(e,r)),n}function lhe(e,t){const n={},r=S(t,["model"]);return r!=null&&C(n,["_url","name"],io(e,r)),n}function che(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function uhe(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}function dhe(e,t){const n={},r=S(e,["outputGcsUri"]);t!==void 0&&r!=null&&C(t,["parameters","storageUri"],r);const o=S(e,["negativePrompt"]);t!==void 0&&o!=null&&C(t,["parameters","negativePrompt"],o);const s=S(e,["numberOfImages"]);t!==void 0&&s!=null&&C(t,["parameters","sampleCount"],s);const i=S(e,["aspectRatio"]);t!==void 0&&i!=null&&C(t,["parameters","aspectRatio"],i);const a=S(e,["guidanceScale"]);t!==void 0&&a!=null&&C(t,["parameters","guidanceScale"],a);const l=S(e,["seed"]);t!==void 0&&l!=null&&C(t,["parameters","seed"],l);const c=S(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&C(t,["parameters","safetySetting"],c);const u=S(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const f=S(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&C(t,["parameters","includeSafetyAttributes"],f);const m=S(e,["includeRaiReason"]);t!==void 0&&m!=null&&C(t,["parameters","includeRaiReason"],m);const g=S(e,["language"]);t!==void 0&&g!=null&&C(t,["parameters","language"],g);const y=S(e,["outputMimeType"]);t!==void 0&&y!=null&&C(t,["parameters","outputOptions","mimeType"],y);const v=S(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&C(t,["parameters","outputOptions","compressionQuality"],v);const w=S(e,["addWatermark"]);t!==void 0&&w!=null&&C(t,["parameters","addWatermark"],w);const _=S(e,["labels"]);t!==void 0&&_!=null&&C(t,["labels"],_);const T=S(e,["editMode"]);t!==void 0&&T!=null&&C(t,["parameters","editMode"],T);const k=S(e,["baseSteps"]);return t!==void 0&&k!=null&&C(t,["parameters","editConfig","baseSteps"],k),n}function fhe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["prompt"]);o!=null&&C(n,["instances[0]","prompt"],o);const s=S(t,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>p0e(l))),C(n,["instances[0]","referenceImages"],a)}const i=S(t,["config"]);return i!=null&&dhe(i,n),n}function hhe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>g4(s))),C(t,["generatedImages"],o)}return t}function phe(e,t){const n={},r=S(e,["taskType"]);t!==void 0&&r!=null&&C(t,["requests[]","taskType"],r);const o=S(e,["title"]);t!==void 0&&o!=null&&C(t,["requests[]","title"],o);const s=S(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&C(t,["requests[]","outputDimensionality"],s),S(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function mhe(e,t){const n={},r=S(e,["taskType"]);t!==void 0&&r!=null&&C(t,["instances[]","task_type"],r);const o=S(e,["title"]);t!==void 0&&o!=null&&C(t,["instances[]","title"],o);const s=S(e,["outputDimensionality"]);t!==void 0&&s!=null&&C(t,["parameters","outputDimensionality"],s);const i=S(e,["mimeType"]);t!==void 0&&i!=null&&C(t,["instances[]","mimeType"],i);const a=S(e,["autoTruncate"]);return t!==void 0&&a!=null&&C(t,["parameters","autoTruncate"],a),n}function ghe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["contents"]);if(o!=null){let a=nR(e,o);Array.isArray(a)&&(a=a.map(l=>l)),C(n,["requests[]","content"],a)}const s=S(t,["config"]);s!=null&&phe(s,n);const i=S(t,["model"]);return i!==void 0&&C(n,["requests[]","model"],io(e,i)),n}function bhe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["contents"]);if(o!=null){let i=nR(e,o);Array.isArray(i)&&(i=i.map(a=>a)),C(n,["instances[]","content"],i)}const s=S(t,["config"]);return s!=null&&mhe(s,n),n}function yhe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),C(t,["embeddings"],s)}const o=S(e,["metadata"]);return o!=null&&C(t,["metadata"],o),t}function vhe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Xfe(i))),C(t,["embeddings"],s)}const o=S(e,["metadata"]);return o!=null&&C(t,["metadata"],o),t}function xhe(e){const t={},n=S(e,["endpoint"]);n!=null&&C(t,["name"],n);const r=S(e,["deployedModelId"]);return r!=null&&C(t,["deployedModelId"],r),t}function whe(e){const t={};if(S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Ehe(e){const t={},n=S(e,["id"]);n!=null&&C(t,["id"],n);const r=S(e,["args"]);r!=null&&C(t,["args"],r);const o=S(e,["name"]);if(o!=null&&C(t,["name"],o),S(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function _he(e){const t={},n=S(e,["mode"]);n!=null&&C(t,["mode"],n);const r=S(e,["allowedFunctionNames"]);if(r!=null&&C(t,["allowedFunctionNames"],r),S(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function She(e){const t={};if(S(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(e,["description"]);n!=null&&C(t,["description"],n);const r=S(e,["name"]);r!=null&&C(t,["name"],r);const o=S(e,["parameters"]);o!=null&&C(t,["parameters"],o);const s=S(e,["parametersJsonSchema"]);s!=null&&C(t,["parametersJsonSchema"],s);const i=S(e,["response"]);i!=null&&C(t,["response"],i);const a=S(e,["responseJsonSchema"]);return a!=null&&C(t,["responseJsonSchema"],a),t}function The(e,t,n){const r={},o=S(t,["systemInstruction"]);n!==void 0&&o!=null&&C(n,["systemInstruction"],m4(va(o)));const s=S(t,["temperature"]);s!=null&&C(r,["temperature"],s);const i=S(t,["topP"]);i!=null&&C(r,["topP"],i);const a=S(t,["topK"]);a!=null&&C(r,["topK"],a);const l=S(t,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=S(t,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=S(t,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const f=S(t,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const m=S(t,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=S(t,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=S(t,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=S(t,["seed"]);v!=null&&C(r,["seed"],v);const w=S(t,["responseMimeType"]);w!=null&&C(r,["responseMimeType"],w);const _=S(t,["responseSchema"]);_!=null&&C(r,["responseSchema"],rR(_));const T=S(t,["responseJsonSchema"]);if(T!=null&&C(r,["responseJsonSchema"],T),S(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=S(t,["safetySettings"]);if(n!==void 0&&k!=null){let q=k;Array.isArray(q)&&(q=q.map(z=>m0e(z))),C(n,["safetySettings"],q)}const M=S(t,["tools"]);if(n!==void 0&&M!=null){let q=bb(M);Array.isArray(q)&&(q=q.map(z=>E0e(gb(z)))),C(n,["tools"],q)}const D=S(t,["toolConfig"]);if(n!==void 0&&D!=null&&C(n,["toolConfig"],w0e(D)),S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=S(t,["cachedContent"]);n!==void 0&&I!=null&&C(n,["cachedContent"],rh(e,I));const P=S(t,["responseModalities"]);P!=null&&C(r,["responseModalities"],P);const B=S(t,["mediaResolution"]);B!=null&&C(r,["mediaResolution"],B);const U=S(t,["speechConfig"]);if(U!=null&&C(r,["speechConfig"],oR(U)),S(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=S(t,["thinkingConfig"]);j!=null&&C(r,["thinkingConfig"],j);const H=S(t,["imageConfig"]);return H!=null&&C(r,["imageConfig"],Xhe(H)),r}function Che(e,t,n){const r={},o=S(t,["systemInstruction"]);n!==void 0&&o!=null&&C(n,["systemInstruction"],va(o));const s=S(t,["temperature"]);s!=null&&C(r,["temperature"],s);const i=S(t,["topP"]);i!=null&&C(r,["topP"],i);const a=S(t,["topK"]);a!=null&&C(r,["topK"],a);const l=S(t,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=S(t,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const u=S(t,["stopSequences"]);u!=null&&C(r,["stopSequences"],u);const f=S(t,["responseLogprobs"]);f!=null&&C(r,["responseLogprobs"],f);const m=S(t,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=S(t,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const y=S(t,["frequencyPenalty"]);y!=null&&C(r,["frequencyPenalty"],y);const v=S(t,["seed"]);v!=null&&C(r,["seed"],v);const w=S(t,["responseMimeType"]);w!=null&&C(r,["responseMimeType"],w);const _=S(t,["responseSchema"]);_!=null&&C(r,["responseSchema"],rR(_));const T=S(t,["responseJsonSchema"]);T!=null&&C(r,["responseJsonSchema"],T);const k=S(t,["routingConfig"]);k!=null&&C(r,["routingConfig"],k);const M=S(t,["modelSelectionConfig"]);M!=null&&C(r,["modelConfig"],M);const D=S(t,["safetySettings"]);if(n!==void 0&&D!=null){let J=D;Array.isArray(J)&&(J=J.map(ee=>ee)),C(n,["safetySettings"],J)}const I=S(t,["tools"]);if(n!==void 0&&I!=null){let J=bb(I);Array.isArray(J)&&(J=J.map(ee=>sq(gb(ee)))),C(n,["tools"],J)}const P=S(t,["toolConfig"]);n!==void 0&&P!=null&&C(n,["toolConfig"],P);const B=S(t,["labels"]);n!==void 0&&B!=null&&C(n,["labels"],B);const U=S(t,["cachedContent"]);n!==void 0&&U!=null&&C(n,["cachedContent"],rh(e,U));const j=S(t,["responseModalities"]);j!=null&&C(r,["responseModalities"],j);const H=S(t,["mediaResolution"]);H!=null&&C(r,["mediaResolution"],H);const q=S(t,["speechConfig"]);q!=null&&C(r,["speechConfig"],oq(oR(q)));const z=S(t,["audioTimestamp"]);z!=null&&C(r,["audioTimestamp"],z);const Z=S(t,["thinkingConfig"]);Z!=null&&C(r,["thinkingConfig"],Z);const X=S(t,["imageConfig"]);return X!=null&&C(r,["imageConfig"],Qhe(X)),r}function TP(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["contents"]);if(o!=null){let i=Ic(o);Array.isArray(i)&&(i=i.map(a=>m4(a))),C(n,["contents"],i)}const s=S(t,["config"]);return s!=null&&C(n,["generationConfig"],The(e,s,n)),n}function CP(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["contents"]);if(o!=null){let i=Ic(o);Array.isArray(i)&&(i=i.map(a=>a)),C(n,["contents"],i)}const s=S(t,["config"]);return s!=null&&C(n,["generationConfig"],Che(e,s,n)),n}function kP(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Yfe(c))),C(t,["candidates"],l)}const o=S(e,["modelVersion"]);o!=null&&C(t,["modelVersion"],o);const s=S(e,["promptFeedback"]);s!=null&&C(t,["promptFeedback"],s);const i=S(e,["responseId"]);i!=null&&C(t,["responseId"],i);const a=S(e,["usageMetadata"]);return a!=null&&C(t,["usageMetadata"],a),t}function AP(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>u)),C(t,["candidates"],c)}const o=S(e,["createTime"]);o!=null&&C(t,["createTime"],o);const s=S(e,["modelVersion"]);s!=null&&C(t,["modelVersion"],s);const i=S(e,["promptFeedback"]);i!=null&&C(t,["promptFeedback"],i);const a=S(e,["responseId"]);a!=null&&C(t,["responseId"],a);const l=S(e,["usageMetadata"]);return l!=null&&C(t,["usageMetadata"],l),t}function khe(e,t){const n={};if(S(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=S(e,["numberOfImages"]);t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r);const o=S(e,["aspectRatio"]);t!==void 0&&o!=null&&C(t,["parameters","aspectRatio"],o);const s=S(e,["guidanceScale"]);if(t!==void 0&&s!=null&&C(t,["parameters","guidanceScale"],s),S(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=S(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&C(t,["parameters","safetySetting"],i);const a=S(e,["personGeneration"]);t!==void 0&&a!=null&&C(t,["parameters","personGeneration"],a);const l=S(e,["includeSafetyAttributes"]);t!==void 0&&l!=null&&C(t,["parameters","includeSafetyAttributes"],l);const c=S(e,["includeRaiReason"]);t!==void 0&&c!=null&&C(t,["parameters","includeRaiReason"],c);const u=S(e,["language"]);t!==void 0&&u!=null&&C(t,["parameters","language"],u);const f=S(e,["outputMimeType"]);t!==void 0&&f!=null&&C(t,["parameters","outputOptions","mimeType"],f);const m=S(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&C(t,["parameters","outputOptions","compressionQuality"],m),S(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=S(e,["imageSize"]);if(t!==void 0&&g!=null&&C(t,["parameters","sampleImageSize"],g),S(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Ahe(e,t){const n={},r=S(e,["outputGcsUri"]);t!==void 0&&r!=null&&C(t,["parameters","storageUri"],r);const o=S(e,["negativePrompt"]);t!==void 0&&o!=null&&C(t,["parameters","negativePrompt"],o);const s=S(e,["numberOfImages"]);t!==void 0&&s!=null&&C(t,["parameters","sampleCount"],s);const i=S(e,["aspectRatio"]);t!==void 0&&i!=null&&C(t,["parameters","aspectRatio"],i);const a=S(e,["guidanceScale"]);t!==void 0&&a!=null&&C(t,["parameters","guidanceScale"],a);const l=S(e,["seed"]);t!==void 0&&l!=null&&C(t,["parameters","seed"],l);const c=S(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&C(t,["parameters","safetySetting"],c);const u=S(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const f=S(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&C(t,["parameters","includeSafetyAttributes"],f);const m=S(e,["includeRaiReason"]);t!==void 0&&m!=null&&C(t,["parameters","includeRaiReason"],m);const g=S(e,["language"]);t!==void 0&&g!=null&&C(t,["parameters","language"],g);const y=S(e,["outputMimeType"]);t!==void 0&&y!=null&&C(t,["parameters","outputOptions","mimeType"],y);const v=S(e,["outputCompressionQuality"]);t!==void 0&&v!=null&&C(t,["parameters","outputOptions","compressionQuality"],v);const w=S(e,["addWatermark"]);t!==void 0&&w!=null&&C(t,["parameters","addWatermark"],w);const _=S(e,["labels"]);t!==void 0&&_!=null&&C(t,["labels"],_);const T=S(e,["imageSize"]);t!==void 0&&T!=null&&C(t,["parameters","sampleImageSize"],T);const k=S(e,["enhancePrompt"]);return t!==void 0&&k!=null&&C(t,["parameters","enhancePrompt"],k),n}function Nhe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["prompt"]);o!=null&&C(n,["instances[0]","prompt"],o);const s=S(t,["config"]);return s!=null&&khe(s,n),n}function Ihe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["prompt"]);o!=null&&C(n,["instances[0]","prompt"],o);const s=S(t,["config"]);return s!=null&&Ahe(s,n),n}function Rhe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Hhe(i))),C(t,["generatedImages"],s)}const o=S(e,["positivePromptSafetyAttributes"]);return o!=null&&C(t,["positivePromptSafetyAttributes"],nq(o)),t}function Mhe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>g4(i))),C(t,["generatedImages"],s)}const o=S(e,["positivePromptSafetyAttributes"]);return o!=null&&C(t,["positivePromptSafetyAttributes"],rq(o)),t}function Dhe(e,t){const n={},r=S(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r),S(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=S(e,["durationSeconds"]);if(t!==void 0&&o!=null&&C(t,["parameters","durationSeconds"],o),S(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=S(e,["aspectRatio"]);t!==void 0&&s!=null&&C(t,["parameters","aspectRatio"],s);const i=S(e,["resolution"]);t!==void 0&&i!=null&&C(t,["parameters","resolution"],i);const a=S(e,["personGeneration"]);if(t!==void 0&&a!=null&&C(t,["parameters","personGeneration"],a),S(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=S(e,["negativePrompt"]);t!==void 0&&l!=null&&C(t,["parameters","negativePrompt"],l);const c=S(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&C(t,["parameters","enhancePrompt"],c),S(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const u=S(e,["lastFrame"]);t!==void 0&&u!=null&&C(t,["instances[0]","lastFrame"],b4(u));const f=S(e,["referenceImages"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>P0e(g))),C(t,["instances[0]","referenceImages"],m)}if(S(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(S(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Ohe(e,t){const n={},r=S(e,["numberOfVideos"]);t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r);const o=S(e,["outputGcsUri"]);t!==void 0&&o!=null&&C(t,["parameters","storageUri"],o);const s=S(e,["fps"]);t!==void 0&&s!=null&&C(t,["parameters","fps"],s);const i=S(e,["durationSeconds"]);t!==void 0&&i!=null&&C(t,["parameters","durationSeconds"],i);const a=S(e,["seed"]);t!==void 0&&a!=null&&C(t,["parameters","seed"],a);const l=S(e,["aspectRatio"]);t!==void 0&&l!=null&&C(t,["parameters","aspectRatio"],l);const c=S(e,["resolution"]);t!==void 0&&c!=null&&C(t,["parameters","resolution"],c);const u=S(e,["personGeneration"]);t!==void 0&&u!=null&&C(t,["parameters","personGeneration"],u);const f=S(e,["pubsubTopic"]);t!==void 0&&f!=null&&C(t,["parameters","pubsubTopic"],f);const m=S(e,["negativePrompt"]);t!==void 0&&m!=null&&C(t,["parameters","negativePrompt"],m);const g=S(e,["enhancePrompt"]);t!==void 0&&g!=null&&C(t,["parameters","enhancePrompt"],g);const y=S(e,["generateAudio"]);t!==void 0&&y!=null&&C(t,["parameters","generateAudio"],y);const v=S(e,["lastFrame"]);t!==void 0&&v!=null&&C(t,["instances[0]","lastFrame"],Au(v));const w=S(e,["referenceImages"]);if(t!==void 0&&w!=null){let k=w;Array.isArray(k)&&(k=k.map(M=>L0e(M))),C(t,["instances[0]","referenceImages"],k)}const _=S(e,["mask"]);t!==void 0&&_!=null&&C(t,["instances[0]","mask"],O0e(_));const T=S(e,["compressionQuality"]);return t!==void 0&&T!=null&&C(t,["parameters","compressionQuality"],T),n}function Phe(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const o=S(e,["done"]);o!=null&&C(t,["done"],o);const s=S(e,["error"]);s!=null&&C(t,["error"],s);const i=S(e,["response","generateVideoResponse"]);return i!=null&&C(t,["response"],Bhe(i)),t}function Lhe(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const o=S(e,["done"]);o!=null&&C(t,["done"],o);const s=S(e,["error"]);s!=null&&C(t,["error"],s);const i=S(e,["response"]);return i!=null&&C(t,["response"],zhe(i)),t}function $he(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["prompt"]);o!=null&&C(n,["instances[0]","prompt"],o);const s=S(t,["image"]);s!=null&&C(n,["instances[0]","image"],b4(s));const i=S(t,["video"]);i!=null&&C(n,["instances[0]","video"],iq(i));const a=S(t,["source"]);a!=null&&jhe(a,n);const l=S(t,["config"]);return l!=null&&Dhe(l,n),n}function Fhe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["prompt"]);o!=null&&C(n,["instances[0]","prompt"],o);const s=S(t,["image"]);s!=null&&C(n,["instances[0]","image"],Au(s));const i=S(t,["video"]);i!=null&&C(n,["instances[0]","video"],aq(i));const a=S(t,["source"]);a!=null&&Uhe(a,n);const l=S(t,["config"]);return l!=null&&Ohe(l,n),n}function Bhe(e){const t={},n=S(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>qhe(i))),C(t,["generatedVideos"],s)}const r=S(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const o=S(e,["raiMediaFilteredReasons"]);return o!=null&&C(t,["raiMediaFilteredReasons"],o),t}function zhe(e){const t={},n=S(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Ghe(i))),C(t,["generatedVideos"],s)}const r=S(e,["raiMediaFilteredCount"]);r!=null&&C(t,["raiMediaFilteredCount"],r);const o=S(e,["raiMediaFilteredReasons"]);return o!=null&&C(t,["raiMediaFilteredReasons"],o),t}function jhe(e,t){const n={},r=S(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const o=S(e,["image"]);t!==void 0&&o!=null&&C(t,["instances[0]","image"],b4(o));const s=S(e,["video"]);return t!==void 0&&s!=null&&C(t,["instances[0]","video"],iq(s)),n}function Uhe(e,t){const n={},r=S(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const o=S(e,["image"]);t!==void 0&&o!=null&&C(t,["instances[0]","image"],Au(o));const s=S(e,["video"]);return t!==void 0&&s!=null&&C(t,["instances[0]","video"],aq(s)),n}function Hhe(e){const t={},n=S(e,["_self"]);n!=null&&C(t,["image"],e0e(n));const r=S(e,["raiFilteredReason"]);r!=null&&C(t,["raiFilteredReason"],r);const o=S(e,["_self"]);return o!=null&&C(t,["safetyAttributes"],nq(o)),t}function g4(e){const t={},n=S(e,["_self"]);n!=null&&C(t,["image"],tq(n));const r=S(e,["raiFilteredReason"]);r!=null&&C(t,["raiFilteredReason"],r);const o=S(e,["_self"]);o!=null&&C(t,["safetyAttributes"],rq(o));const s=S(e,["prompt"]);return s!=null&&C(t,["enhancedPrompt"],s),t}function Vhe(e){const t={},n=S(e,["_self"]);n!=null&&C(t,["mask"],tq(n));const r=S(e,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),C(t,["labels"],o)}return t}function qhe(e){const t={},n=S(e,["video"]);return n!=null&&C(t,["video"],M0e(n)),t}function Ghe(e){const t={},n=S(e,["_self"]);return n!=null&&C(t,["video"],D0e(n)),t}function Whe(e){const t={},n=S(e,["modelSelectionConfig"]);n!=null&&C(t,["modelConfig"],n);const r=S(e,["responseJsonSchema"]);r!=null&&C(t,["responseJsonSchema"],r);const o=S(e,["audioTimestamp"]);o!=null&&C(t,["audioTimestamp"],o);const s=S(e,["candidateCount"]);s!=null&&C(t,["candidateCount"],s);const i=S(e,["enableAffectiveDialog"]);i!=null&&C(t,["enableAffectiveDialog"],i);const a=S(e,["frequencyPenalty"]);a!=null&&C(t,["frequencyPenalty"],a);const l=S(e,["logprobs"]);l!=null&&C(t,["logprobs"],l);const c=S(e,["maxOutputTokens"]);c!=null&&C(t,["maxOutputTokens"],c);const u=S(e,["mediaResolution"]);u!=null&&C(t,["mediaResolution"],u);const f=S(e,["presencePenalty"]);f!=null&&C(t,["presencePenalty"],f);const m=S(e,["responseLogprobs"]);m!=null&&C(t,["responseLogprobs"],m);const g=S(e,["responseMimeType"]);g!=null&&C(t,["responseMimeType"],g);const y=S(e,["responseModalities"]);y!=null&&C(t,["responseModalities"],y);const v=S(e,["responseSchema"]);v!=null&&C(t,["responseSchema"],v);const w=S(e,["routingConfig"]);w!=null&&C(t,["routingConfig"],w);const _=S(e,["seed"]);_!=null&&C(t,["seed"],_);const T=S(e,["speechConfig"]);T!=null&&C(t,["speechConfig"],oq(T));const k=S(e,["stopSequences"]);k!=null&&C(t,["stopSequences"],k);const M=S(e,["temperature"]);M!=null&&C(t,["temperature"],M);const D=S(e,["thinkingConfig"]);D!=null&&C(t,["thinkingConfig"],D);const I=S(e,["topK"]);I!=null&&C(t,["topK"],I);const P=S(e,["topP"]);if(P!=null&&C(t,["topP"],P),S(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Yhe(e,t){const n={},r=S(t,["model"]);return r!=null&&C(n,["_url","name"],io(e,r)),n}function Khe(e,t){const n={},r=S(t,["model"]);return r!=null&&C(n,["_url","name"],io(e,r)),n}function Zhe(e){const t={};if(S(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function Jhe(e){const t={};if(S(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function Xhe(e){const t={},n=S(e,["aspectRatio"]);n!=null&&C(t,["aspectRatio"],n);const r=S(e,["imageSize"]);if(r!=null&&C(t,["imageSize"],r),S(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Qhe(e){const t={},n=S(e,["aspectRatio"]);n!=null&&C(t,["aspectRatio"],n);const r=S(e,["imageSize"]);r!=null&&C(t,["imageSize"],r);const o=S(e,["outputMimeType"]);o!=null&&C(t,["imageOutputOptions","mimeType"],o);const s=S(e,["outputCompressionQuality"]);return s!=null&&C(t,["imageOutputOptions","compressionQuality"],s),t}function e0e(e){const t={},n=S(e,["bytesBase64Encoded"]);n!=null&&C(t,["imageBytes"],F0(n));const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function tq(e){const t={},n=S(e,["gcsUri"]);n!=null&&C(t,["gcsUri"],n);const r=S(e,["bytesBase64Encoded"]);r!=null&&C(t,["imageBytes"],F0(r));const o=S(e,["mimeType"]);return o!=null&&C(t,["mimeType"],o),t}function b4(e){const t={};if(S(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=S(e,["imageBytes"]);n!=null&&C(t,["bytesBase64Encoded"],F0(n));const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function Au(e){const t={},n=S(e,["gcsUri"]);n!=null&&C(t,["gcsUri"],n);const r=S(e,["imageBytes"]);r!=null&&C(t,["bytesBase64Encoded"],F0(r));const o=S(e,["mimeType"]);return o!=null&&C(t,["mimeType"],o),t}function t0e(e,t,n){const r={},o=S(t,["pageSize"]);n!==void 0&&o!=null&&C(n,["_query","pageSize"],o);const s=S(t,["pageToken"]);n!==void 0&&s!=null&&C(n,["_query","pageToken"],s);const i=S(t,["filter"]);n!==void 0&&i!=null&&C(n,["_query","filter"],i);const a=S(t,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],WV(e,a)),r}function n0e(e,t,n){const r={},o=S(t,["pageSize"]);n!==void 0&&o!=null&&C(n,["_query","pageSize"],o);const s=S(t,["pageToken"]);n!==void 0&&s!=null&&C(n,["_query","pageToken"],s);const i=S(t,["filter"]);n!==void 0&&i!=null&&C(n,["_query","filter"],i);const a=S(t,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],WV(e,a)),r}function r0e(e,t){const n={},r=S(t,["config"]);return r!=null&&t0e(e,r,n),n}function o0e(e,t){const n={},r=S(t,["config"]);return r!=null&&n0e(e,r,n),n}function s0e(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const o=S(e,["_self"]);if(o!=null){let s=YV(o);Array.isArray(s)&&(s=s.map(i=>iN(i))),C(t,["models"],s)}return t}function i0e(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const o=S(e,["_self"]);if(o!=null){let s=YV(o);Array.isArray(s)&&(s=s.map(i=>aN(i))),C(t,["models"],s)}return t}function a0e(e){const t={},n=S(e,["maskMode"]);n!=null&&C(t,["maskMode"],n);const r=S(e,["segmentationClasses"]);r!=null&&C(t,["maskClasses"],r);const o=S(e,["maskDilation"]);return o!=null&&C(t,["dilation"],o),t}function iN(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["displayName"]);r!=null&&C(t,["displayName"],r);const o=S(e,["description"]);o!=null&&C(t,["description"],o);const s=S(e,["version"]);s!=null&&C(t,["version"],s);const i=S(e,["_self"]);i!=null&&C(t,["tunedModelInfo"],_0e(i));const a=S(e,["inputTokenLimit"]);a!=null&&C(t,["inputTokenLimit"],a);const l=S(e,["outputTokenLimit"]);l!=null&&C(t,["outputTokenLimit"],l);const c=S(e,["supportedGenerationMethods"]);c!=null&&C(t,["supportedActions"],c);const u=S(e,["temperature"]);u!=null&&C(t,["temperature"],u);const f=S(e,["maxTemperature"]);f!=null&&C(t,["maxTemperature"],f);const m=S(e,["topP"]);m!=null&&C(t,["topP"],m);const g=S(e,["topK"]);g!=null&&C(t,["topK"],g);const y=S(e,["thinking"]);return y!=null&&C(t,["thinking"],y),t}function aN(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["displayName"]);r!=null&&C(t,["displayName"],r);const o=S(e,["description"]);o!=null&&C(t,["description"],o);const s=S(e,["versionId"]);s!=null&&C(t,["version"],s);const i=S(e,["deployedModels"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>xhe(m))),C(t,["endpoints"],f)}const a=S(e,["labels"]);a!=null&&C(t,["labels"],a);const l=S(e,["_self"]);l!=null&&C(t,["tunedModelInfo"],S0e(l));const c=S(e,["defaultCheckpointId"]);c!=null&&C(t,["defaultCheckpointId"],c);const u=S(e,["checkpoints"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(m=>m)),C(t,["checkpoints"],f)}return t}function l0e(e){const t={},n=S(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=S(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const o=S(e,["executableCode"]);o!=null&&C(t,["executableCode"],o);const s=S(e,["fileData"]);s!=null&&C(t,["fileData"],whe(s));const i=S(e,["functionCall"]);i!=null&&C(t,["functionCall"],Ehe(i));const a=S(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=S(e,["inlineData"]);l!=null&&C(t,["inlineData"],Wfe(l));const c=S(e,["text"]);c!=null&&C(t,["text"],c);const u=S(e,["thought"]);u!=null&&C(t,["thought"],u);const f=S(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=S(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function c0e(e){const t={},n=S(e,["productImage"]);return n!=null&&C(t,["image"],Au(n)),t}function u0e(e,t){const n={},r=S(e,["numberOfImages"]);t!==void 0&&r!=null&&C(t,["parameters","sampleCount"],r);const o=S(e,["baseSteps"]);t!==void 0&&o!=null&&C(t,["parameters","baseSteps"],o);const s=S(e,["outputGcsUri"]);t!==void 0&&s!=null&&C(t,["parameters","storageUri"],s);const i=S(e,["seed"]);t!==void 0&&i!=null&&C(t,["parameters","seed"],i);const a=S(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&C(t,["parameters","safetySetting"],a);const l=S(e,["personGeneration"]);t!==void 0&&l!=null&&C(t,["parameters","personGeneration"],l);const c=S(e,["addWatermark"]);t!==void 0&&c!=null&&C(t,["parameters","addWatermark"],c);const u=S(e,["outputMimeType"]);t!==void 0&&u!=null&&C(t,["parameters","outputOptions","mimeType"],u);const f=S(e,["outputCompressionQuality"]);t!==void 0&&f!=null&&C(t,["parameters","outputOptions","compressionQuality"],f);const m=S(e,["enhancePrompt"]);t!==void 0&&m!=null&&C(t,["parameters","enhancePrompt"],m);const g=S(e,["labels"]);return t!==void 0&&g!=null&&C(t,["labels"],g),n}function d0e(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["source"]);o!=null&&h0e(o,n);const s=S(t,["config"]);return s!=null&&u0e(s,n),n}function f0e(e){const t={},n=S(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>g4(o))),C(t,["generatedImages"],r)}return t}function h0e(e,t){const n={},r=S(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const o=S(e,["personImage"]);t!==void 0&&o!=null&&C(t,["instances[0]","personImage","image"],Au(o));const s=S(e,["productImages"]);if(t!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>c0e(a))),C(t,["instances[0]","productImages"],i)}return n}function p0e(e){const t={},n=S(e,["referenceImage"]);n!=null&&C(t,["referenceImage"],Au(n));const r=S(e,["referenceId"]);r!=null&&C(t,["referenceId"],r);const o=S(e,["referenceType"]);o!=null&&C(t,["referenceType"],o);const s=S(e,["maskImageConfig"]);s!=null&&C(t,["maskImageConfig"],a0e(s));const i=S(e,["controlImageConfig"]);i!=null&&C(t,["controlImageConfig"],ehe(i));const a=S(e,["styleImageConfig"]);a!=null&&C(t,["styleImageConfig"],a);const l=S(e,["subjectImageConfig"]);return l!=null&&C(t,["subjectImageConfig"],l),t}function nq(e){const t={},n=S(e,["safetyAttributes","categories"]);n!=null&&C(t,["categories"],n);const r=S(e,["safetyAttributes","scores"]);r!=null&&C(t,["scores"],r);const o=S(e,["contentType"]);return o!=null&&C(t,["contentType"],o),t}function rq(e){const t={},n=S(e,["safetyAttributes","categories"]);n!=null&&C(t,["categories"],n);const r=S(e,["safetyAttributes","scores"]);r!=null&&C(t,["scores"],r);const o=S(e,["contentType"]);return o!=null&&C(t,["contentType"],o),t}function m0e(e){const t={},n=S(e,["category"]);if(n!=null&&C(t,["category"],n),S(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(e,["threshold"]);return r!=null&&C(t,["threshold"],r),t}function g0e(e){const t={},n=S(e,["image"]);return n!=null&&C(t,["image"],Au(n)),t}function b0e(e,t){const n={},r=S(e,["mode"]);t!==void 0&&r!=null&&C(t,["parameters","mode"],r);const o=S(e,["maxPredictions"]);t!==void 0&&o!=null&&C(t,["parameters","maxPredictions"],o);const s=S(e,["confidenceThreshold"]);t!==void 0&&s!=null&&C(t,["parameters","confidenceThreshold"],s);const i=S(e,["maskDilation"]);t!==void 0&&i!=null&&C(t,["parameters","maskDilation"],i);const a=S(e,["binaryColorThreshold"]);t!==void 0&&a!=null&&C(t,["parameters","binaryColorThreshold"],a);const l=S(e,["labels"]);return t!==void 0&&l!=null&&C(t,["labels"],l),n}function y0e(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["source"]);o!=null&&x0e(o,n);const s=S(t,["config"]);return s!=null&&b0e(s,n),n}function v0e(e){const t={},n=S(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Vhe(o))),C(t,["generatedMasks"],r)}return t}function x0e(e,t){const n={},r=S(e,["prompt"]);t!==void 0&&r!=null&&C(t,["instances[0]","prompt"],r);const o=S(e,["image"]);t!==void 0&&o!=null&&C(t,["instances[0]","image"],Au(o));const s=S(e,["scribbleImage"]);return t!==void 0&&s!=null&&C(t,["instances[0]","scribble"],g0e(s)),n}function oq(e){const t={},n=S(e,["languageCode"]);n!=null&&C(t,["languageCode"],n);const r=S(e,["voiceConfig"]);if(r!=null&&C(t,["voiceConfig"],r),S(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function w0e(e){const t={},n=S(e,["functionCallingConfig"]);n!=null&&C(t,["functionCallingConfig"],_he(n));const r=S(e,["retrievalConfig"]);return r!=null&&C(t,["retrievalConfig"],r),t}function E0e(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(S(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const o=S(e,["computerUse"]);o!=null&&C(t,["computerUse"],o);const s=S(e,["fileSearch"]);s!=null&&C(t,["fileSearch"],s);const i=S(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),S(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],Zhe(a));const l=S(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],Jhe(l));const c=S(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}function sq(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>She(m))),C(t,["functionDeclarations"],f)}const r=S(e,["retrieval"]);r!=null&&C(t,["retrieval"],r);const o=S(e,["googleSearchRetrieval"]);o!=null&&C(t,["googleSearchRetrieval"],o);const s=S(e,["computerUse"]);if(s!=null&&C(t,["computerUse"],s),S(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=S(e,["codeExecution"]);i!=null&&C(t,["codeExecution"],i);const a=S(e,["enterpriseWebSearch"]);a!=null&&C(t,["enterpriseWebSearch"],a);const l=S(e,["googleMaps"]);l!=null&&C(t,["googleMaps"],l);const c=S(e,["googleSearch"]);c!=null&&C(t,["googleSearch"],c);const u=S(e,["urlContext"]);return u!=null&&C(t,["urlContext"],u),t}function _0e(e){const t={},n=S(e,["baseModel"]);n!=null&&C(t,["baseModel"],n);const r=S(e,["createTime"]);r!=null&&C(t,["createTime"],r);const o=S(e,["updateTime"]);return o!=null&&C(t,["updateTime"],o),t}function S0e(e){const t={},n=S(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&C(t,["baseModel"],n);const r=S(e,["createTime"]);r!=null&&C(t,["createTime"],r);const o=S(e,["updateTime"]);return o!=null&&C(t,["updateTime"],o),t}function T0e(e,t){const n={},r=S(e,["displayName"]);t!==void 0&&r!=null&&C(t,["displayName"],r);const o=S(e,["description"]);t!==void 0&&o!=null&&C(t,["description"],o);const s=S(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&C(t,["defaultCheckpointId"],s),n}function C0e(e,t){const n={},r=S(e,["displayName"]);t!==void 0&&r!=null&&C(t,["displayName"],r);const o=S(e,["description"]);t!==void 0&&o!=null&&C(t,["description"],o);const s=S(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&C(t,["defaultCheckpointId"],s),n}function k0e(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","name"],io(e,r));const o=S(t,["config"]);return o!=null&&T0e(o,n),n}function A0e(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["config"]);return o!=null&&C0e(o,n),n}function N0e(e,t){const n={},r=S(e,["outputGcsUri"]);t!==void 0&&r!=null&&C(t,["parameters","storageUri"],r);const o=S(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&C(t,["parameters","safetySetting"],o);const s=S(e,["personGeneration"]);t!==void 0&&s!=null&&C(t,["parameters","personGeneration"],s);const i=S(e,["includeRaiReason"]);t!==void 0&&i!=null&&C(t,["parameters","includeRaiReason"],i);const a=S(e,["outputMimeType"]);t!==void 0&&a!=null&&C(t,["parameters","outputOptions","mimeType"],a);const l=S(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&C(t,["parameters","outputOptions","compressionQuality"],l);const c=S(e,["enhanceInputImage"]);t!==void 0&&c!=null&&C(t,["parameters","upscaleConfig","enhanceInputImage"],c);const u=S(e,["imagePreservationFactor"]);t!==void 0&&u!=null&&C(t,["parameters","upscaleConfig","imagePreservationFactor"],u);const f=S(e,["labels"]);t!==void 0&&f!=null&&C(t,["labels"],f);const m=S(e,["numberOfImages"]);t!==void 0&&m!=null&&C(t,["parameters","sampleCount"],m);const g=S(e,["mode"]);return t!==void 0&&g!=null&&C(t,["parameters","mode"],g),n}function I0e(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["_url","model"],io(e,r));const o=S(t,["image"]);o!=null&&C(n,["instances[0]","image"],Au(o));const s=S(t,["upscaleFactor"]);s!=null&&C(n,["parameters","upscaleConfig","upscaleFactor"],s);const i=S(t,["config"]);return i!=null&&N0e(i,n),n}function R0e(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>g4(s))),C(t,["generatedImages"],o)}return t}function M0e(e){const t={},n=S(e,["uri"]);n!=null&&C(t,["uri"],n);const r=S(e,["encodedVideo"]);r!=null&&C(t,["videoBytes"],F0(r));const o=S(e,["encoding"]);return o!=null&&C(t,["mimeType"],o),t}function D0e(e){const t={},n=S(e,["gcsUri"]);n!=null&&C(t,["uri"],n);const r=S(e,["bytesBase64Encoded"]);r!=null&&C(t,["videoBytes"],F0(r));const o=S(e,["mimeType"]);return o!=null&&C(t,["mimeType"],o),t}function O0e(e){const t={},n=S(e,["image"]);n!=null&&C(t,["_self"],Au(n));const r=S(e,["maskMode"]);return r!=null&&C(t,["maskMode"],r),t}function P0e(e){const t={},n=S(e,["image"]);n!=null&&C(t,["image"],b4(n));const r=S(e,["referenceType"]);return r!=null&&C(t,["referenceType"],r),t}function L0e(e){const t={},n=S(e,["image"]);n!=null&&C(t,["image"],Au(n));const r=S(e,["referenceType"]);return r!=null&&C(t,["referenceType"],r),t}function iq(e){const t={},n=S(e,["uri"]);n!=null&&C(t,["uri"],n);const r=S(e,["videoBytes"]);r!=null&&C(t,["encodedVideo"],F0(r));const o=S(e,["mimeType"]);return o!=null&&C(t,["encoding"],o),t}function aq(e){const t={},n=S(e,["uri"]);n!=null&&C(t,["gcsUri"],n);const r=S(e,["videoBytes"]);r!=null&&C(t,["bytesBase64Encoded"],F0(r));const o=S(e,["mimeType"]);return o!=null&&C(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $0e="Content-Type",F0e="X-Server-Timeout",B0e="User-Agent",lN="x-goog-api-client",z0e="1.30.0",j0e=`google-genai-sdk/${z0e}`,U0e="v1beta1",H0e="v1beta",NP=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class V0e{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:U0e,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:H0e,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[i,a]of Object.entries(t.queryParams))o.searchParams.append(i,String(a));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.unaryApiCall(o,s,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[o,s]of Object.entries(n))typeof s=="object"?r[o]=Object.assign(Object.assign({},r[o]),s):s!==void 0&&(r[o]=s);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.streamApiCall(o,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,o){if(n&&n.timeout||o){const s=new AbortController,i=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),t.signal=i}return n&&n.extraBody!==null&&q0e(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await IP(o),new rN(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await IP(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){var n;return v1(this,arguments,function*(){const o=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let i="";for(;;){const{done:a,value:l}=yield ls(o.read());if(a){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=s.decode(l,{stream:!0});try{const f=JSON.parse(c);if("error"in f){const m=JSON.parse(JSON.stringify(f.error)),g=m.status,y=m.code,v=`got status: ${g}. ${JSON.stringify(f)}`;if(y>=400&&y<600)throw new p4({message:v,status:y})}}catch(f){if(f.name==="ApiError")throw f}i+=c;let u=i.match(NP);for(;u;){const f=u[1];try{const m=new Response(f,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield ls(new rN(m)),i=i.slice(u[0].length),u=i.match(NP)}catch(m){throw new Error(`exception parsing stream chunk ${f}. ${m}`)}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=j0e+" "+this.clientOptions.userAgentExtra;return t[B0e]=n,t[lN]=n,t[$0e]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[o,s]of Object.entries(t.headers))r.append(o,s);t.timeout&&t.timeout>0&&r.append(F0e,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,i=await s.stat(t);o.sizeBytes=String(i.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const l={file:o},c=this.getFileName(t),u=en("upload/v1beta/files",l._url),f=await this.fetchUploadUrl(u,o.sizeBytes,o.mimeType,c,l,n==null?void 0:n.httpOptions);return s.upload(t,f,this)}async uploadFileToFileSearchStore(t,n,r){var o;const s=this.clientOptions.uploader,i=await s.stat(n),a=String(i.size),l=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:i.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${t}:uploadToFileSearchStore`,u=this.getFileName(n),f={};r!=null&&r.customMetadata&&(f.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(f.chunkingConfig=r.chunkingConfig);const m=await this.fetchUploadUrl(c,a,l,u,f,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,o,s,i){var a;let l={};i?l=i:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const c=await this.request({path:t,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function IP(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new p4({message:o,status:n}):new Error(o)}}function q0e(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const s=JSON.parse(e.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,i){const a=Object.assign({},s);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const c=i[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=r(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const o=r(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G0e="mcp_used/unknown";let W0e=!1;function lq(e){for(const t of e)if(Y0e(t)||typeof t=="object"&&"inputSchema"in t)return!0;return W0e}function cq(e){var t;const n=(t=e[lN])!==null&&t!==void 0?t:"";e[lN]=(n+` ${G0e}`).trimStart()}function Y0e(e){return e!==null&&typeof e=="object"&&e instanceof iR}function K0e(e,t=100){return v1(this,arguments,function*(){let r,o=0;for(;o<t;){const s=yield ls(e.listTools({cursor:r}));for(const i of s.tools)yield yield ls(i),o++;if(!s.nextCursor)break;r=s.nextCursor}})}class iR{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new iR(t,n)}async initialize(){var t,n,r,o;if(this.mcpTools.length>0)return;const s={},i=[];for(const u of this.mcpClients)try{for(var a=!0,l=(n=void 0,kv(K0e(u))),c;c=await l.next(),t=c.done,!t;a=!0){o=c.value,a=!1;const f=o;i.push(f);const m=f.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=u}}catch(f){n={error:f}}finally{try{!a&&!t&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),jue(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const i=await o.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Z0e(e,t,n){const r=new Due;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),t(r)}class J0e{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),i=epe(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(k=>{c=k}),f=t.callbacks,m=function(){c({})},g=this.apiClient,y={onopen:m,onmessage:k=>{Z0e(g,f.onmessage,k)},onerror:(n=f==null?void 0:f.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=f==null?void 0:f.onclose)!==null&&r!==void 0?r:function(k){}},v=this.webSocketFactory.create(l,Q0e(i),y);v.connect(),await u;const T={setup:{model:io(this.apiClient,t.model)}};return v.send(JSON.stringify(T)),new X0e(v,this.apiClient)}}class X0e{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Ffe(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=$fe(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(d1.PLAY)}pause(){this.sendPlaybackControl(d1.PAUSE)}stop(){this.sendPlaybackControl(d1.STOP)}resetContext(){this.sendPlaybackControl(d1.RESET_CONTEXT)}close(){this.conn.close()}}function Q0e(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function epe(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tpe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function npe(e,t,n){const r=new Mue;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(e.isVertexAI()){const i=jfe(s);Object.assign(r,i)}else Object.assign(r,s);t(r)}class rpe{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new J0e(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,o,s,i,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const f=this.apiClient.getHeaders();t.config&&t.config.tools&&lq(t.config.tools)&&cq(f);const m=ape(f);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,u);else{const U=this.apiClient.getApiKey();let j="BidiGenerateContent",H="key";U!=null&&U.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),j="BidiGenerateContentConstrained",H="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${j}?${H}=${U}`}let g=()=>{};const y=new Promise(U=>{g=U}),v=t.callbacks,w=function(){var U;(U=v==null?void 0:v.onopen)===null||U===void 0||U.call(v),g({})},_=this.apiClient,T={onopen:w,onmessage:U=>{npe(_,v.onmessage,U)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(U){},onclose:(r=v==null?void 0:v.onclose)!==null&&r!==void 0?r:function(U){}},k=this.webSocketFactory.create(u,ipe(m),T);k.connect(),await y;let M=io(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const U=this.apiClient.getProject(),j=this.apiClient.getLocation();M=`projects/${U}/locations/${j}/`+M}let D={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[F1.AUDIO]}:t.config.responseModalities=[F1.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(a=(i=t.config)===null||i===void 0?void 0:i.tools)!==null&&a!==void 0?a:[],P=[];for(const U of I)if(this.isCallableTool(U)){const j=U;P.push(await j.tool())}else P.push(U);P.length>0&&(t.config.tools=P);const B={model:M,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?D=Lfe(this.apiClient,B):D=Pfe(this.apiClient,B),delete D.config,k.send(JSON.stringify(D)),new spe(k,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const ope={turnComplete:!0};class spe{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ic(n.turns),t.isVertexAI()||(r=r.map(o=>m4(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(tpe)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},ope),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:zfe(t)}:n={realtimeInput:Bfe(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ipe(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function ape(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RP=10;function MP(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const i of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(x1(i)){o=!0;break}if(!o)return!0;const s=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function x1(e){return"callTool"in e&&typeof e.callTool=="function"}function lpe(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>x1(o)))!==null&&r!==void 0?r:!1}function DP(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,o)=>{if(x1(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function OP(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cpe extends nh{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,o,s,i,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!lpe(n)||MP(n.config))return await this.generateContentInternal(l);const c=DP(n);if(c.length>0){const v=c.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let u,f;const m=Ic(l.contents),g=(s=(o=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:RP;let y=0;for(;y<g&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const v=u.candidates[0].content,w=[];for(const _ of(a=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&a!==void 0?a:[])if(x1(_)){const k=await _.callTool(u.functionCalls);w.push(...k)}y++,f={role:"user",parts:w},l.contents=Ic(l.contents),l.contents.push(v),l.contents.push(f),OP(l.config)&&(m.push(v),m.push(f))}return OP(l.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async n=>{var r,o,s,i,a;if(this.maybeMoveToResponseJsonSchem(n),MP(n.config)){const f=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(f)}const l=DP(n);if(l.length>0){const f=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${f}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,u=(a=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!u)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let s;const i=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((o=l==null?void 0:l.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:i.push(l);let a;return s?a={generatedImages:i,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new Am(Vf.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,s,i,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((i=(s=n.source)===null||s===void 0?void 0:s.video)===null||i===void 0)&&i.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,o;const s=(n=t.config)===null||n===void 0?void 0:n.tools;if(!s)return t;const i=await Promise.all(s.map(async l=>x1(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:i})};if(a.config.tools=i,t.config&&t.config.tools&&lq(t.config.tools)){const l=(o=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),cq(c),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(t){var n,r,o;const s=new Map;for(const i of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(x1(i)){const a=i,l=await a.tool();for(const c of(o=l.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(t){var n,r,o;const s=(o=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:RP;let i=!1,a=0;const l=await this.initAfcToolsMap(t);return(function(c,u,f){var m,g;return v1(this,arguments,function*(){for(var y,v,w,_;a<s;){i&&(a++,i=!1);const D=yield ls(c.processParamsMaybeAddMcpUsage(f)),I=yield ls(c.generateContentStreamInternal(D)),P=[],B=[];try{for(var T=!0,k=(v=void 0,kv(I)),M;M=yield ls(k.next()),y=M.done,!y;T=!0){_=M.value,T=!1;const U=_;if(yield yield ls(U),U.candidates&&(!((m=U.candidates[0])===null||m===void 0)&&m.content)){B.push(U.candidates[0].content);for(const j of(g=U.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(a<s&&j.functionCall){if(!j.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(j.functionCall.name)){const H=yield ls(u.get(j.functionCall.name).callTool([j.functionCall]));P.push(...H)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${j.functionCall.name}`)}}}}catch(U){v={error:U}}finally{try{!T&&!y&&(w=k.return)&&(yield ls(w.call(k)))}finally{if(v)throw v.error}}if(P.length>0){i=!0;const U=new Fy;U.candidates=[{content:{role:"user",parts:P}}],yield yield ls(U);const j=[];j.push(...B),j.push({role:"user",parts:P});const H=Ic(f.contents).concat(j);f.contents=H}else break}})})(this,l,t)}async generateContentInternal(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=CP(this.apiClient,t);return a=en("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=AP(u),m=new Fy;return Object.assign(m,f),m})}else{const c=TP(this.apiClient,t);return a=en("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=kP(u),m=new Fy;return Object.assign(m,f),m})}}async generateContentStreamInternal(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=CP(this.apiClient,t);return a=en("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(f){return v1(this,arguments,function*(){var m,g,y,v;try{for(var w=!0,_=kv(f),T;T=yield ls(_.next()),m=T.done,!m;w=!0){v=T.value,w=!1;const k=v,M=AP(yield ls(k.json()));M.sdkHttpResponse={headers:k.headers};const D=new Fy;Object.assign(D,M),yield yield ls(D)}}catch(k){g={error:k}}finally{try{!w&&!m&&(y=_.return)&&(yield ls(y.call(_)))}finally{if(g)throw g.error}}})})}else{const c=TP(this.apiClient,t);return a=en("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(f){return v1(this,arguments,function*(){var m,g,y,v;try{for(var w=!0,_=kv(f),T;T=yield ls(_.next()),m=T.done,!m;w=!0){v=T.value,w=!1;const k=v,M=kP(yield ls(k.json()));M.sdkHttpResponse={headers:k.headers};const D=new Fy;Object.assign(D,M),yield yield ls(D)}}catch(k){g={error:k}}finally{try{!w&&!m&&(y=_.return)&&(yield ls(y.call(_)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=bhe(this.apiClient,t);return a=en("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=vhe(u),m=new cP;return Object.assign(m,f),m})}else{const c=ghe(this.apiClient,t);return a=en("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=yhe(u),m=new cP;return Object.assign(m,f),m})}}async generateImagesInternal(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Ihe(this.apiClient,t);return a=en("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Mhe(u),m=new uP;return Object.assign(m,f),m})}else{const c=Nhe(this.apiClient,t);return a=en("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=Rhe(u),m=new uP;return Object.assign(m,f),m})}}async editImageInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=fhe(this.apiClient,t);return s=en("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>{const c=hhe(l),u=new wue;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=I0e(this.apiClient,t);return s=en("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>{const c=R0e(l),u=new Eue;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=d0e(this.apiClient,t);return s=en("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const c=f0e(l),u=new _ue;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=y0e(this.apiClient,t);return s=en("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const c=v0e(l),u=new Sue;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Khe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>aN(u))}else{const c=Yhe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),i.then(u=>iN(u))}}async listInternal(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=o0e(this.apiClient,t);return a=en("{models_url}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=i0e(u),m=new dP;return Object.assign(m,f),m})}else{const c=r0e(this.apiClient,t);return a=en("{models_url}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=s0e(u),m=new dP;return Object.assign(m,f),m})}}async update(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=A0e(this.apiClient,t);return a=en("{model}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>aN(u))}else{const c=k0e(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),i.then(u=>iN(u))}}async delete(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=lhe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=uhe(u),m=new fP;return Object.assign(m,f),m})}else{const c=ahe(this.apiClient,t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=che(u),m=new fP;return Object.assign(m,f),m})}}async countTokens(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=ohe(this.apiClient,t);return a=en("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=ihe(u),m=new hP;return Object.assign(m,f),m})}else{const c=rhe(this.apiClient,t);return a=en("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=she(u),m=new hP;return Object.assign(m,f),m})}}async computeTokens(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=Zfe(this.apiClient,t);return s=en("{model}:computeTokens",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>{const c=Jfe(l),u=new Tue;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=Fhe(this.apiClient,t);return a=en("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=Lhe(u),m=new q_;return Object.assign(m,f),m})}else{const c=$he(this.apiClient,t);return a=en("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),i.then(u=>{const f=Phe(u),m=new q_;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class upe extends nh{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=mue(t);return a=en("{operationName}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else{const c=pue(t);return a=en("{operationName}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),i}}async fetchPredictVideosOperationInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=aue(t);return s=en("{resourceName}:fetchPredictOperation",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dpe(e){const t={},n=S(e,["data"]);if(n!=null&&C(t,["data"],n),S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function fpe(e){const t={},n=S(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>wpe(s))),C(t,["parts"],o)}const r=S(e,["role"]);return r!=null&&C(t,["role"],r),t}function hpe(e,t,n){const r={},o=S(t,["expireTime"]);n!==void 0&&o!=null&&C(n,["expireTime"],o);const s=S(t,["newSessionExpireTime"]);n!==void 0&&s!=null&&C(n,["newSessionExpireTime"],s);const i=S(t,["uses"]);n!==void 0&&i!=null&&C(n,["uses"],i);const a=S(t,["liveConnectConstraints"]);n!==void 0&&a!=null&&C(n,["bidiGenerateContentSetup"],xpe(e,a));const l=S(t,["lockAdditionalFields"]);return n!==void 0&&l!=null&&C(n,["fieldMask"],l),r}function ppe(e,t){const n={},r=S(t,["config"]);return r!=null&&C(n,["config"],hpe(e,r,n)),n}function mpe(e){const t={};if(S(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(e,["fileUri"]);n!=null&&C(t,["fileUri"],n);const r=S(e,["mimeType"]);return r!=null&&C(t,["mimeType"],r),t}function gpe(e){const t={},n=S(e,["id"]);n!=null&&C(t,["id"],n);const r=S(e,["args"]);r!=null&&C(t,["args"],r);const o=S(e,["name"]);if(o!=null&&C(t,["name"],o),S(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function bpe(e){const t={};if(S(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(e,["enableWidget"]);return n!=null&&C(t,["enableWidget"],n),t}function ype(e){const t={};if(S(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(e,["timeRangeFilter"]);return n!=null&&C(t,["timeRangeFilter"],n),t}function vpe(e,t){const n={},r=S(e,["generationConfig"]);t!==void 0&&r!=null&&C(t,["setup","generationConfig"],r);const o=S(e,["responseModalities"]);t!==void 0&&o!=null&&C(t,["setup","generationConfig","responseModalities"],o);const s=S(e,["temperature"]);t!==void 0&&s!=null&&C(t,["setup","generationConfig","temperature"],s);const i=S(e,["topP"]);t!==void 0&&i!=null&&C(t,["setup","generationConfig","topP"],i);const a=S(e,["topK"]);t!==void 0&&a!=null&&C(t,["setup","generationConfig","topK"],a);const l=S(e,["maxOutputTokens"]);t!==void 0&&l!=null&&C(t,["setup","generationConfig","maxOutputTokens"],l);const c=S(e,["mediaResolution"]);t!==void 0&&c!=null&&C(t,["setup","generationConfig","mediaResolution"],c);const u=S(e,["seed"]);t!==void 0&&u!=null&&C(t,["setup","generationConfig","seed"],u);const f=S(e,["speechConfig"]);t!==void 0&&f!=null&&C(t,["setup","generationConfig","speechConfig"],sR(f));const m=S(e,["thinkingConfig"]);t!==void 0&&m!=null&&C(t,["setup","generationConfig","thinkingConfig"],m);const g=S(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&C(t,["setup","generationConfig","enableAffectiveDialog"],g);const y=S(e,["systemInstruction"]);t!==void 0&&y!=null&&C(t,["setup","systemInstruction"],fpe(va(y)));const v=S(e,["tools"]);if(t!==void 0&&v!=null){let I=bb(v);Array.isArray(I)&&(I=I.map(P=>_pe(gb(P)))),C(t,["setup","tools"],I)}const w=S(e,["sessionResumption"]);t!==void 0&&w!=null&&C(t,["setup","sessionResumption"],Epe(w));const _=S(e,["inputAudioTranscription"]);t!==void 0&&_!=null&&C(t,["setup","inputAudioTranscription"],_);const T=S(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&C(t,["setup","outputAudioTranscription"],T);const k=S(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&C(t,["setup","realtimeInputConfig"],k);const M=S(e,["contextWindowCompression"]);t!==void 0&&M!=null&&C(t,["setup","contextWindowCompression"],M);const D=S(e,["proactivity"]);return t!==void 0&&D!=null&&C(t,["setup","proactivity"],D),n}function xpe(e,t){const n={},r=S(t,["model"]);r!=null&&C(n,["setup","model"],io(e,r));const o=S(t,["config"]);return o!=null&&C(n,["config"],vpe(o,n)),n}function wpe(e){const t={},n=S(e,["mediaResolution"]);n!=null&&C(t,["mediaResolution"],n);const r=S(e,["codeExecutionResult"]);r!=null&&C(t,["codeExecutionResult"],r);const o=S(e,["executableCode"]);o!=null&&C(t,["executableCode"],o);const s=S(e,["fileData"]);s!=null&&C(t,["fileData"],mpe(s));const i=S(e,["functionCall"]);i!=null&&C(t,["functionCall"],gpe(i));const a=S(e,["functionResponse"]);a!=null&&C(t,["functionResponse"],a);const l=S(e,["inlineData"]);l!=null&&C(t,["inlineData"],dpe(l));const c=S(e,["text"]);c!=null&&C(t,["text"],c);const u=S(e,["thought"]);u!=null&&C(t,["thought"],u);const f=S(e,["thoughtSignature"]);f!=null&&C(t,["thoughtSignature"],f);const m=S(e,["videoMetadata"]);return m!=null&&C(t,["videoMetadata"],m),t}function Epe(e){const t={},n=S(e,["handle"]);if(n!=null&&C(t,["handle"],n),S(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function _pe(e){const t={},n=S(e,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),C(t,["functionDeclarations"],u)}if(S(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(e,["googleSearchRetrieval"]);r!=null&&C(t,["googleSearchRetrieval"],r);const o=S(e,["computerUse"]);o!=null&&C(t,["computerUse"],o);const s=S(e,["fileSearch"]);s!=null&&C(t,["fileSearch"],s);const i=S(e,["codeExecution"]);if(i!=null&&C(t,["codeExecution"],i),S(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(e,["googleMaps"]);a!=null&&C(t,["googleMaps"],bpe(a));const l=S(e,["googleSearch"]);l!=null&&C(t,["googleSearch"],ype(l));const c=S(e,["urlContext"]);return c!=null&&C(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Spe(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(s=>`${n}.${s}`);t.push(...o)}else t.push(n)}return t.join(",")}function Tpe(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(e.bidiGenerateContentSetup=s,n=s):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const s=Spe(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?e.fieldMask=s:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(c=>i.includes(c)?`generationConfig.${c}`:c));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class Cpe extends nh{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=ppe(this.apiClient,t);s=en("auth_tokens",a._url),i=a._query,delete a.config,delete a._url,delete a._query;const l=Tpe(a,t.config);return o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kpe(e,t){const n={},r=S(e,["displayName"]);return t!==void 0&&r!=null&&C(t,["displayName"],r),n}function Ape(e){const t={},n=S(e,["config"]);return n!=null&&kpe(n,t),t}function Npe(e,t){const n={},r=S(e,["force"]);return t!==void 0&&r!=null&&C(t,["_query","force"],r),n}function Ipe(e){const t={},n=S(e,["name"]);n!=null&&C(t,["_url","name"],n);const r=S(e,["config"]);return r!=null&&Npe(r,t),t}function Rpe(e){const t={},n=S(e,["name"]);return n!=null&&C(t,["_url","name"],n),t}function Mpe(e,t){const n={},r=S(e,["customMetadata"]);if(t!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),C(t,["customMetadata"],s)}const o=S(e,["chunkingConfig"]);return t!==void 0&&o!=null&&C(t,["chunkingConfig"],o),n}function Dpe(e){const t={},n=S(e,["name"]);n!=null&&C(t,["name"],n);const r=S(e,["metadata"]);r!=null&&C(t,["metadata"],r);const o=S(e,["done"]);o!=null&&C(t,["done"],o);const s=S(e,["error"]);s!=null&&C(t,["error"],s);const i=S(e,["response"]);return i!=null&&C(t,["response"],Ppe(i)),t}function Ope(e){const t={},n=S(e,["fileSearchStoreName"]);n!=null&&C(t,["_url","file_search_store_name"],n);const r=S(e,["fileName"]);r!=null&&C(t,["fileName"],r);const o=S(e,["config"]);return o!=null&&Mpe(o,t),t}function Ppe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["parent"]);r!=null&&C(t,["parent"],r);const o=S(e,["documentName"]);return o!=null&&C(t,["documentName"],o),t}function Lpe(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const o=S(e,["pageToken"]);return t!==void 0&&o!=null&&C(t,["_query","pageToken"],o),n}function $pe(e){const t={},n=S(e,["config"]);return n!=null&&Lpe(n,t),t}function Fpe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const o=S(e,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),C(t,["fileSearchStores"],s)}return t}function Bpe(e,t){const n={},r=S(e,["mimeType"]);t!==void 0&&r!=null&&C(t,["mimeType"],r);const o=S(e,["displayName"]);t!==void 0&&o!=null&&C(t,["displayName"],o);const s=S(e,["customMetadata"]);if(t!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),C(t,["customMetadata"],a)}const i=S(e,["chunkingConfig"]);return t!==void 0&&i!=null&&C(t,["chunkingConfig"],i),n}function zpe(e){const t={},n=S(e,["fileSearchStoreName"]);n!=null&&C(t,["_url","file_search_store_name"],n);const r=S(e,["config"]);return r!=null&&Bpe(r,t),t}function jpe(e){const t={},n=S(e,["sdkHttpResponse"]);return n!=null&&C(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Upe(e,t){const n={},r=S(e,["force"]);return t!==void 0&&r!=null&&C(t,["_query","force"],r),n}function Hpe(e){const t={},n=S(e,["name"]);n!=null&&C(t,["_url","name"],n);const r=S(e,["config"]);return r!=null&&Upe(r,t),t}function Vpe(e){const t={},n=S(e,["name"]);return n!=null&&C(t,["_url","name"],n),t}function qpe(e,t){const n={},r=S(e,["pageSize"]);t!==void 0&&r!=null&&C(t,["_query","pageSize"],r);const o=S(e,["pageToken"]);return t!==void 0&&o!=null&&C(t,["_query","pageToken"],o),n}function Gpe(e){const t={},n=S(e,["parent"]);n!=null&&C(t,["_url","parent"],n);const r=S(e,["config"]);return r!=null&&qpe(r,t),t}function Wpe(e){const t={},n=S(e,["sdkHttpResponse"]);n!=null&&C(t,["sdkHttpResponse"],n);const r=S(e,["nextPageToken"]);r!=null&&C(t,["nextPageToken"],r);const o=S(e,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),C(t,["documents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ype extends nh{constructor(t){super(),this.apiClient=t,this.list=async n=>new Am(Vf.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Vpe(t);return s=en("{name}",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,r;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=Hpe(t);o=en("{name}",i._url),s=i._query,delete i._url,delete i._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Gpe(t);return s=en("{parent}/documents",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const c=Wpe(l),u=new Cue;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kpe extends nh{constructor(t,n=new Ype(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new Am(Vf.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ape(t);return s=en("fileSearchStores",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Rpe(t);return s=en("{name}",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,r;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=Ipe(t);o=en("{name}",i._url),s=i._query,delete i._url,delete i._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$pe(t);return s=en("fileSearchStores",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const c=Fpe(l),u=new kue;return Object.assign(u,c),u})}}async uploadToFileSearchStoreInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zpe(t);return s=en("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const c=jpe(l),u=new Aue;return Object.assign(u,c),u})}}async importFile(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ope(t);return s=en("{file_search_store_name}:importFile",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const c=Dpe(l),u=new eR;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zpe(e,t){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Jpe(e,t){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Xpe(e,t,n){const r={};if(S(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=S(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&C(t,["displayName"],o),S(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=S(e,["epochCount"]);t!==void 0&&s!=null&&C(t,["tuningTask","hyperparameters","epochCount"],s);const i=S(e,["learningRateMultiplier"]);if(i!=null&&C(r,["tuningTask","hyperparameters","learningRateMultiplier"],i),S(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(S(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(S(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=S(e,["batchSize"]);t!==void 0&&a!=null&&C(t,["tuningTask","hyperparameters","batchSize"],a);const l=S(e,["learningRate"]);if(t!==void 0&&l!=null&&C(t,["tuningTask","hyperparameters","learningRate"],l),S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(S(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Qpe(e,t,n){const r={};let o=S(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const g=S(e,["validationDataset"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec"],PP(g))}else if(o==="PREFERENCE_TUNING"){const g=S(e,["validationDataset"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec"],PP(g))}const s=S(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&C(t,["tunedModelDisplayName"],s);const i=S(e,["description"]);t!==void 0&&i!=null&&C(t,["description"],i);let a=S(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=S(e,["epochCount"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=S(e,["epochCount"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=S(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=S(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=S(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=S(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=S(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=S(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let u=S(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=S(e,["adapterSize"]);t!==void 0&&g!=null&&C(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(u==="PREFERENCE_TUNING"){const g=S(e,["adapterSize"]);t!==void 0&&g!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(S(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(S(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const f=S(e,["labels"]);t!==void 0&&f!=null&&C(t,["labels"],f);const m=S(e,["beta"]);return t!==void 0&&m!=null&&C(t,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function eme(e,t){const n={},r=S(e,["baseModel"]);r!=null&&C(n,["baseModel"],r);const o=S(e,["preTunedModel"]);o!=null&&C(n,["preTunedModel"],o);const s=S(e,["trainingDataset"]);s!=null&&dme(s);const i=S(e,["config"]);return i!=null&&Xpe(i,n),n}function tme(e,t){const n={},r=S(e,["baseModel"]);r!=null&&C(n,["baseModel"],r);const o=S(e,["preTunedModel"]);o!=null&&C(n,["preTunedModel"],o);const s=S(e,["trainingDataset"]);s!=null&&fme(s,n,t);const i=S(e,["config"]);return i!=null&&Qpe(i,n,t),n}function nme(e,t){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function rme(e,t){const n={},r=S(e,["name"]);return r!=null&&C(n,["_url","name"],r),n}function ome(e,t,n){const r={},o=S(e,["pageSize"]);t!==void 0&&o!=null&&C(t,["_query","pageSize"],o);const s=S(e,["pageToken"]);t!==void 0&&s!=null&&C(t,["_query","pageToken"],s);const i=S(e,["filter"]);return t!==void 0&&i!=null&&C(t,["_query","filter"],i),r}function sme(e,t,n){const r={},o=S(e,["pageSize"]);t!==void 0&&o!=null&&C(t,["_query","pageSize"],o);const s=S(e,["pageToken"]);t!==void 0&&s!=null&&C(t,["_query","pageToken"],s);const i=S(e,["filter"]);return t!==void 0&&i!=null&&C(t,["_query","filter"],i),r}function ime(e,t){const n={},r=S(e,["config"]);return r!=null&&ome(r,n),n}function ame(e,t){const n={},r=S(e,["config"]);return r!=null&&sme(r,n),n}function lme(e,t){const n={},r=S(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const o=S(e,["nextPageToken"]);o!=null&&C(n,["nextPageToken"],o);const s=S(e,["tunedModels"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>uq(a))),C(n,["tuningJobs"],i)}return n}function cme(e,t){const n={},r=S(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const o=S(e,["nextPageToken"]);o!=null&&C(n,["nextPageToken"],o);const s=S(e,["tuningJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>cN(a))),C(n,["tuningJobs"],i)}return n}function ume(e,t){const n={},r=S(e,["name"]);r!=null&&C(n,["model"],r);const o=S(e,["name"]);return o!=null&&C(n,["endpoint"],o),n}function dme(e,t){const n={};if(S(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=S(e,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),C(n,["examples","examples"],o)}return n}function fme(e,t,n){const r={};let o=S(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const i=S(e,["gcsUri"]);t!==void 0&&i!=null&&C(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(o==="PREFERENCE_TUNING"){const i=S(e,["gcsUri"]);t!==void 0&&i!=null&&C(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}let s=S(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const i=S(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&C(t,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(s==="PREFERENCE_TUNING"){const i=S(e,["vertexDatasetResource"]);t!==void 0&&i!=null&&C(t,["preferenceOptimizationSpec","trainingDatasetUri"],i)}if(S(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function uq(e,t){const n={},r=S(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const o=S(e,["name"]);o!=null&&C(n,["name"],o);const s=S(e,["state"]);s!=null&&C(n,["state"],qV(s));const i=S(e,["createTime"]);i!=null&&C(n,["createTime"],i);const a=S(e,["tuningTask","startTime"]);a!=null&&C(n,["startTime"],a);const l=S(e,["tuningTask","completeTime"]);l!=null&&C(n,["endTime"],l);const c=S(e,["updateTime"]);c!=null&&C(n,["updateTime"],c);const u=S(e,["description"]);u!=null&&C(n,["description"],u);const f=S(e,["baseModel"]);f!=null&&C(n,["baseModel"],f);const m=S(e,["_self"]);return m!=null&&C(n,["tunedModel"],ume(m)),n}function cN(e,t){const n={},r=S(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const o=S(e,["name"]);o!=null&&C(n,["name"],o);const s=S(e,["state"]);s!=null&&C(n,["state"],qV(s));const i=S(e,["createTime"]);i!=null&&C(n,["createTime"],i);const a=S(e,["startTime"]);a!=null&&C(n,["startTime"],a);const l=S(e,["endTime"]);l!=null&&C(n,["endTime"],l);const c=S(e,["updateTime"]);c!=null&&C(n,["updateTime"],c);const u=S(e,["error"]);u!=null&&C(n,["error"],u);const f=S(e,["description"]);f!=null&&C(n,["description"],f);const m=S(e,["baseModel"]);m!=null&&C(n,["baseModel"],m);const g=S(e,["tunedModel"]);g!=null&&C(n,["tunedModel"],g);const y=S(e,["preTunedModel"]);y!=null&&C(n,["preTunedModel"],y);const v=S(e,["supervisedTuningSpec"]);v!=null&&C(n,["supervisedTuningSpec"],v);const w=S(e,["preferenceOptimizationSpec"]);w!=null&&C(n,["preferenceOptimizationSpec"],w);const _=S(e,["tuningDataStats"]);_!=null&&C(n,["tuningDataStats"],_);const T=S(e,["encryptionSpec"]);T!=null&&C(n,["encryptionSpec"],T);const k=S(e,["partnerModelTuningSpec"]);k!=null&&C(n,["partnerModelTuningSpec"],k);const M=S(e,["customBaseModel"]);M!=null&&C(n,["customBaseModel"],M);const D=S(e,["experiment"]);D!=null&&C(n,["experiment"],D);const I=S(e,["labels"]);I!=null&&C(n,["labels"],I);const P=S(e,["outputUri"]);P!=null&&C(n,["outputUri"],P);const B=S(e,["pipelineJob"]);B!=null&&C(n,["pipelineJob"],B);const U=S(e,["serviceAccount"]);U!=null&&C(n,["serviceAccount"],U);const j=S(e,["tunedModelDisplayName"]);j!=null&&C(n,["tunedModelDisplayName"],j);const H=S(e,["veoTuningSpec"]);return H!=null&&C(n,["veoTuningSpec"],H),n}function hme(e,t){const n={},r=S(e,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const o=S(e,["name"]);o!=null&&C(n,["name"],o);const s=S(e,["metadata"]);s!=null&&C(n,["metadata"],s);const i=S(e,["done"]);i!=null&&C(n,["done"],i);const a=S(e,["error"]);return a!=null&&C(n,["error"],a),n}function PP(e,t){const n={},r=S(e,["gcsUri"]);r!=null&&C(n,["validationDatasetUri"],r);const o=S(e,["vertexDatasetResource"]);return o!=null&&C(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pme extends nh{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Am(Vf.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let i="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?i=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(i=s.name.split("/operations/")[0]),{name:i,state:nN.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=rme(t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>cN(u))}else{const c=nme(t);return a=en("{name}",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>uq(u))}}async listInternal(t){var n,r,o,s;let i,a="",l={};if(this.apiClient.isVertexAI()){const c=ame(t);return a=en("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=cme(u),m=new pP;return Object.assign(m,f),m})}else{const c=ime(t);return a=en("tunedModels",c._url),l=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const f=lme(u),m=new pP;return Object.assign(m,f),m})}}async cancel(t){var n,r,o,s;let i="",a={};if(this.apiClient.isVertexAI()){const l=Jpe(t);i=en("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=Zpe(t);i=en("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=tme(t,t);return s=en("tuningJobs",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>cN(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=eme(t);return s=en("tunedModels",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>hme(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mme{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const gme=1024*1024*8,bme=3,yme=1e3,vme=2,W_="x-goog-upload-status";async function xme(e,t,n){var r;const o=await dq(e,t,n),s=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[W_])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function wme(e,t,n){var r;const o=await dq(e,t,n),s=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[W_])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const i=BV(s),a=new tR;return Object.assign(a,i),a}async function dq(e,t,n){var r,o;let s=0,i=0,a=new rN(new Response),l="upload";for(s=e.size;i<s;){const c=Math.min(gme,s-i),u=e.slice(i,i+c);i+c>=s&&(l+=", finalize");let f=0,m=yme;for(;f<bme&&(a=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(i),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[W_]));)f++,await _me(m),m=m*vme;if(i+=c,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[W_])!=="active")break;if(s<=i)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function Eme(e){return{size:e.size,type:e.type}}function _me(e){return new Promise(t=>setTimeout(t,e))}class Sme{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await xme(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await wme(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Eme(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tme{create(t,n,r){return new Cme(t,n,r)}}class Cme{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LP="x-goog-api-key";class kme{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(LP)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(LP,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ame="gl-node/";class aR{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=sue(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion;const o=new kme(this.apiKey);this.apiClient=new V0e({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:Ame+"web",uploader:new Sme,downloader:new mme}),this.models=new cpe(this.apiClient),this.live=new rpe(this.apiClient,o,new Tme),this.batches=new Ode(this.apiClient),this.chats=new mfe(this.models,this.apiClient),this.caches=new ffe(this.apiClient),this.files=new Tfe(this.apiClient),this.operations=new upe(this.apiClient),this.authTokens=new Cpe(this.apiClient),this.tunings=new pme(this.apiClient),this.fileSearchStores=new Kpe(this.apiClient)}}function Nme(e){const t=new Int16Array(e.length);for(let n=0;n<e.length;n++){const r=Math.max(-1,Math.min(1,e[n]));t[n]=r<0?r*32768:r*32767}return t}function Ime(e){let t="";const n=new Uint8Array(e.buffer),r=n.byteLength;for(let o=0;o<r;o++)t+=String.fromCharCode(n[o]);return btoa(t)}function Rme(e){const t=Nme(e);return{data:Ime(t),mimeType:"audio/pcm;rate=16000"}}function Mme(e){const t=atob(e),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.charCodeAt(o);return r}async function fq(e,t,n=24e3,r=1){const o=new Int16Array(e.buffer),s=o.length/r,i=t.createBuffer(r,s,n);for(let a=0;a<r;a++){const l=i.getChannelData(a);for(let c=0;c<s;c++)l[c]=o[c*r+a]/32768}return i}async function Dme(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.currentTime,n=e.createOscillator(),r=e.createGain();n.frequency.value=600,r.gain.setValueAtTime(.25,t),r.gain.exponentialRampToValueAtTime(.01,t+.1),n.connect(r),r.connect(e.destination),n.start(t),n.stop(t+.1);const o=e.createOscillator(),s=e.createGain();o.frequency.value=800,s.gain.setValueAtTime(.25,t+.05),s.gain.exponentialRampToValueAtTime(.01,t+.15),o.connect(s),s.connect(e.destination),o.start(t+.05),o.stop(t+.15),await new Promise(i=>setTimeout(i,150))}catch(e){console.error("[Audio] Failed to play approval sound:",e)}}async function Ome(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.currentTime,n=e.createOscillator(),r=e.createGain();n.frequency.value=800,r.gain.setValueAtTime(.25,t),r.gain.exponentialRampToValueAtTime(.01,t+.1),n.connect(r),r.connect(e.destination),n.start(t),n.stop(t+.1);const o=e.createOscillator(),s=e.createGain();o.frequency.value=500,s.gain.setValueAtTime(.25,t+.05),s.gain.exponentialRampToValueAtTime(.01,t+.15),o.connect(s),s.connect(e.destination),o.start(t+.05),o.stop(t+.15),await new Promise(i=>setTimeout(i,150))}catch(e){console.error("[Audio] Failed to play rejection sound:",e)}}async function Pme(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.currentTime,n=[700,600,500],r=[0,.05,.1];n.forEach((o,s)=>{const i=e.createOscillator(),a=e.createGain();i.frequency.value=o,a.gain.setValueAtTime(.2,t+r[s]),a.gain.exponentialRampToValueAtTime(.01,t+r[s]+.08),i.connect(a),a.connect(e.destination),i.start(t+r[s]),i.stop(t+r[s]+.08)}),await new Promise(o=>setTimeout(o,180))}catch(e){console.error("[Audio] Failed to play undo sound:",e)}}function ta(e){const t=n=>(...r)=>{};return{log:t(),warn:t(),error:(...n)=>{console.error(`[${e}]`,...n)},info:t()}}const fo={ai:ta("AI"),aiSdk:ta("AI SDK"),exec:ta("Exec"),inspector:ta("Inspector"),sourcePatch:ta("Source Patch"),tabData:ta("TabData"),fileBrowser:ta("FileBrowser"),instantUI:ta("Instant UI"),domApproval:ta("DOM Approval"),liveGemini:ta("useLiveGemini"),aiChat:ta("useAIChatV2"),codingAgent:ta("Coding Agent"),webview:ta("Webview"),input:ta("Input"),preview:ta("Preview"),mcp:ta("MCP"),general:ta("App")};function $P(...e){}class gc extends Error{constructor(t,n){super(`Operation "${t}" timed out after ${n}ms`),this.name="TimeoutError"}}function eu(e,t,n){let r;const o=new Promise((s,i)=>{r=setTimeout(()=>{i(new gc(n,t))},t)});return Promise.race([e,o]).finally(()=>{clearTimeout(r)})}const tu={TOOL_CALL:3e4,FILE_READ:1e4,FILE_LIST:1e4,API_CALL:6e4,QUICK:5e3},Lme={update_ui:(e,t,n)=>{const r=e.args.html;t.onCodeUpdate&&r&&t.onCodeUpdate(r),n(e.id,e.name,{result:"UI Updated Successfully"})},select_element:(e,t,n)=>{const{selector:r,reasoning:o}=e.args;t.onElementSelect&&r&&t.onElementSelect(r,o),n(e.id,e.name,{result:"Element selection requested",selector:r,reasoning:o})},execute_code:(e,t,n)=>{const{code:r,description:o}=e.args;t.onExecuteCode&&r&&t.onExecuteCode(r,o||""),n(e.id,e.name,{result:"Code executed successfully",description:o})},confirm_selection:(e,t,n)=>{const{confirmed:r,elementNumber:o}=e.args;t.onConfirmSelection&&t.onConfirmSelection(!!r,o),n(e.id,e.name,{result:r?o?`Element ${o} confirmed`:"Selection confirmed":"Selection rejected"})},get_page_elements:async(e,t,n)=>{const r=e.args.category||"all";if(!t.onGetPageElements){n(e.id,e.name,{error:"get_page_elements handler not available"});return}try{const o=await eu(t.onGetPageElements(r),tu.TOOL_CALL,"get_page_elements");n(e.id,e.name,{result:o})}catch(o){const s=o instanceof gc||o instanceof Error?o.message:"Failed to get page elements";n(e.id,e.name,{error:s})}},patch_source_file:async(e,t,n)=>{const{filePath:r,searchCode:o,replaceCode:s,description:i}=e.args;if(!t.onPatchSourceFile){n(e.id,e.name,{error:"patch_source_file handler not available - file editing not supported"});return}if(!r||!o||!s){n(e.id,e.name,{error:"Missing required arguments for patch_source_file"});return}try{const a=await eu(t.onPatchSourceFile(r,o,s,i||""),tu.TOOL_CALL,"patch_source_file");n(e.id,e.name,a.success?{result:`Successfully patched ${r}: ${i}`}:{error:a.error||"Failed to patch file"})}catch(a){const l=a instanceof gc||a instanceof Error?a.message:"Failed to patch source file";n(e.id,e.name,{error:l})}},list_files:async(e,t,n)=>{const r=e.args.path||".";if(!t.onListFiles){n(e.id,e.name,{error:"list_files not available"});return}try{const o=await eu(t.onListFiles(r),tu.FILE_LIST,"list_files");o==null?n(e.id,e.name,{error:"Directory listing returned no content"}):n(e.id,e.name,{result:String(o)})}catch(o){const s=o instanceof gc||o instanceof Error?o.message:"Failed to list files";n(e.id,e.name,{error:s})}},read_file:async(e,t,n)=>{const r=e.args.path??e.args.filePath;if(!r){n(e.id,e.name,{error:'read_file requires a "path" argument'});return}if(!t.onReadFile){n(e.id,e.name,{error:"read_file not available"});return}try{const o=await eu(t.onReadFile(r),tu.FILE_READ,"read_file");o==null?n(e.id,e.name,{error:"File read returned no content"}):n(e.id,e.name,{result:String(o)})}catch(o){const s=o instanceof gc||o instanceof Error?o.message:"Failed to read file";n(e.id,e.name,{error:s})}},click_element:async(e,t,n)=>{const{selector:r}=e.args;if(!t.onClickElement){n(e.id,e.name,{error:"click_element not available"});return}if(!r){n(e.id,e.name,{error:"click_element requires a selector"});return}try{const o=await eu(t.onClickElement(r),tu.QUICK,"click_element");n(e.id,e.name,o.success?{result:`Clicked element: ${r}`}:{error:o.error||"Failed to click element"})}catch(o){const s=o instanceof gc||o instanceof Error?o.message:"Failed to click element";n(e.id,e.name,{error:s})}},navigate:async(e,t,n)=>{const{action:r,url:o}=e.args;if(!t.onNavigate){n(e.id,e.name,{error:"navigate not available"});return}if(!r){n(e.id,e.name,{error:"navigate requires an action"});return}try{const s=await eu(t.onNavigate(r,o),tu.TOOL_CALL,"navigate");n(e.id,e.name,s.success?{result:`Navigation: ${r}${o?" to "+o:""}`}:{error:s.error||"Navigation failed"})}catch(s){const i=s instanceof gc||s instanceof Error?s.message:"Navigation failed";n(e.id,e.name,{error:i})}},scroll:async(e,t,n)=>{const{target:r}=e.args;if(!t.onScroll){n(e.id,e.name,{error:"scroll not available"});return}if(!r){n(e.id,e.name,{error:"scroll requires a target"});return}try{const o=await eu(t.onScroll(r),tu.QUICK,"scroll");n(e.id,e.name,o.success?{result:`Scrolled to: ${r}`}:{error:o.error||"Scroll failed"})}catch(o){const s=o instanceof gc||o instanceof Error?o.message:"Scroll failed";n(e.id,e.name,{error:s})}},open_item:async(e,t,n)=>{const{itemNumber:r}=e.args;if(!t.onOpenItem){n(e.id,e.name,{error:"open_item not available"});return}if(r===void 0){n(e.id,e.name,{error:"open_item requires itemNumber"});return}try{const o=await eu(t.onOpenItem(r),tu.FILE_READ,"open_item");n(e.id,e.name,{result:o??"Item opened"})}catch(o){const s=o instanceof gc||o instanceof Error?o.message:"Failed to open item";n(e.id,e.name,{error:s})}},open_file:async(e,t,n)=>{const{name:r,path:o}=e.args;if(!t.onOpenFile){n(e.id,e.name,{error:"open_file not available"});return}try{const s=await eu(t.onOpenFile(r,o),tu.FILE_READ,"open_file");n(e.id,e.name,{result:s??"File opened"})}catch(s){const i=s instanceof gc||s instanceof Error?s.message:"Failed to open file";n(e.id,e.name,{error:i})}},open_folder:async(e,t,n)=>{const{name:r,itemNumber:o}=e.args;if(!t.onOpenFolder){n(e.id,e.name,{error:"open_folder not available"});return}try{const s=await eu(t.onOpenFolder(r,o),tu.FILE_LIST,"open_folder");n(e.id,e.name,{result:s??"Folder opened"})}catch(s){const i=s instanceof gc||s instanceof Error?s.message:"Failed to open folder";n(e.id,e.name,{error:i})}},browser_back:(e,t,n)=>{if(!t.onBrowserBack){n(e.id,e.name,{error:"browser_back not available"});return}try{const r=t.onBrowserBack();n(e.id,e.name,{result:r??"Navigated back"})}catch(r){n(e.id,e.name,{error:r instanceof Error?r.message:"Failed to go back"})}},close_browser:(e,t,n)=>{if(!t.onCloseBrowser){n(e.id,e.name,{error:"close_browser not available"});return}try{const r=t.onCloseBrowser();n(e.id,e.name,{result:r??"Browser closed"})}catch(r){n(e.id,e.name,{error:r instanceof Error?r.message:"Failed to close browser"})}},approve_change:(e,t,n)=>{const{reason:r}=e.args;t.onApproveChange&&t.onApproveChange(r),n(e.id,e.name,{result:"Change approved"})},reject_change:(e,t,n)=>{const{reason:r}=e.args;t.onRejectChange&&t.onRejectChange(r),n(e.id,e.name,{result:"Change rejected"})},undo_change:(e,t,n)=>{const{reason:r}=e.args;t.onUndoChange&&t.onUndoChange(r),n(e.id,e.name,{result:"Change undone"})},highlight_element_by_number:async(e,t,n)=>{const{elementNumber:r,description:o}=e.args;if(!t.onHighlightByNumber){n(e.id,e.name,{error:"highlight_element_by_number not available"});return}if(r===void 0){n(e.id,e.name,{error:"highlight_element_by_number requires elementNumber"});return}try{const s=await eu(t.onHighlightByNumber(r),tu.QUICK,"highlight_element_by_number");if(s.success){const i=s.element?` (${s.element.tagName}${s.element.text?": "+s.element.text.substring(0,30):""})`:"";n(e.id,e.name,{result:`Element ${r} highlighted${i}${o?": "+o:""}`})}else n(e.id,e.name,{error:s.error||"Failed to highlight element"})}catch(s){const i=s instanceof gc||s instanceof Error?s.message:"Failed to highlight element";n(e.id,e.name,{error:i})}},clear_focus:async(e,t,n)=>{if(!t.onClearFocus){n(e.id,e.name,{error:"clear_focus not available"});return}try{const r=await t.onClearFocus();n(e.id,e.name,{result:"Focus cleared. Call get_page_elements() to see all elements."})}catch(r){const o=r instanceof Error?r.message:"Failed to clear focus";n(e.id,e.name,{error:o})}},set_viewport:async(e,t,n)=>{if(!t.onSetViewport){n(e.id,e.name,{error:"set_viewport not available"});return}const r=e.args.mode;if(!r||!["mobile","tablet","desktop"].includes(r)){n(e.id,e.name,{error:"Invalid mode. Use: mobile, tablet, or desktop"});return}try{await t.onSetViewport(r),n(e.id,e.name,{result:`Viewport switched to ${r} mode`})}catch(o){const s=o instanceof Error?o.message:"Failed to set viewport";n(e.id,e.name,{error:s})}},switch_tab:async(e,t,n)=>{if(!t.onSwitchTab){n(e.id,e.name,{error:"switch_tab not available"});return}const r=e.args.type;if(!r||!["browser","kanban","todos","notes"].includes(r)){n(e.id,e.name,{error:"Invalid type. Use: browser, kanban, todos, or notes"});return}try{await t.onSwitchTab(r),n(e.id,e.name,{result:`Switched to ${r} tab`})}catch(o){const s=o instanceof Error?o.message:"Failed to switch tab";n(e.id,e.name,{error:s})}}};async function FP(e,t){return new Promise(n=>{const r=(s,i,a)=>{n(a)},o=Lme[e.name];if(o){const s=o(e,t,r);s instanceof Promise&&s.catch(i=>{n({error:i instanceof Error?i.message:"Unknown error in tool handler"})})}else n({error:`Unknown tool: ${e.name}`})})}async function $me(e,t,n={}){const{parallel:r=!0}=n;if(r)return await Promise.all(e.map(async s=>({id:s.id,name:s.name,response:await FP(s,t)})));{const o=[];for(const s of e)o.push({id:s.id,name:s.name,response:await FP(s,t)});return o}}const Fme={name:"update_ui",description:"Update the user interface code (HTML/CSS/JS) based on the users request. Return the FULL updated HTML file content.",parameters:{type:xn.OBJECT,properties:{html:{type:xn.STRING,description:"The full HTML code for the page, including styles and scripts."}},required:["html"]}},Bme={name:"select_element",description:`Select elements on the page using a CSS selector.

 PREREQUISITE: You MUST call get_page_elements() FIRST before using this tool!
Never guess selectors - always check what elements actually exist on the page.

 FORBIDDEN SYNTAX (WILL CRASH):
- :contains() - NEVER USE
- :has(text) - NEVER USE
- jQuery pseudo-selectors

 VALID CSS SELECTORS:
- Tag: 'button', 'a', 'div', 'img', 'h1', 'h2', 'section'
- Class: '.btn', '.card', '.hero-section'
- ID: '#submit-btn', '#hero'
- Attribute contains: '[href*="download"]', '[src*="screenshot"]', '[alt*="app"]'
- Attribute exact: '[data-testid="login"]'
- Combined: 'button, [role="button"]', 'img, [role="img"]'

WORKFLOW:
1. Call get_page_elements() to see what exists
2. If element count is 0  tell user it doesn't exist
3. If elements exist  use selectors from the returned data

EXAMPLES (only after confirming elements exist):
- "screenshot image"  'img[alt*="screenshot"], img[src*="screenshot"]'
- "download button"  'a[href*="download"], button[aria-label*="download"]'
- "all buttons"  'button, [role="button"], input[type="button"]'`,parameters:{type:xn.OBJECT,properties:{selector:{type:xn.STRING,description:'CSS selector WITHOUT :contains() or jQuery syntax. Use [attr*="text"] for text matching.'},reasoning:{type:xn.STRING,description:"Brief explanation of selector choice"}},required:["selector","reasoning"]}},zme={name:"get_page_elements",description:` DISCOVERY TOOL - Call this FIRST before any select_element call!

Returns counts and details of elements on the page. Use the results to:
- Know if an element type exists (count > 0)
- Get class names and attributes for accurate selectors
- Tell the user "no [X] found" if count is 0

Categories: "buttons", "links", "inputs", "images", "headings", "all"

REQUIRED WORKFLOW:
User: "select the image"  YOU: get_page_elements("images")
  - If images.count = 0  "I don't see any images on this page"
  - If images.count > 0  Use returned selectors in select_element()`,parameters:{type:xn.OBJECT,properties:{category:{type:xn.STRING,description:'Filter to specific category - "buttons", "links", "inputs", "images", "headings", or "all" (default)'}},required:[]}},jme={name:"execute_code",description:"Execute JavaScript code on the page to modify elements. Use this to make changes to the UI after the user confirms the selected element.",parameters:{type:xn.OBJECT,properties:{code:{type:xn.STRING,description:"JavaScript code to execute. Can use document.querySelector() to select elements and modify them."},description:{type:xn.STRING,description:"Brief description of what this code will do"}},required:["code","description"]}},Ume={name:"confirm_selection",description:'Confirm or reject a pending element selection. Use this when the user says "yes"/"no"/"approve"/"reject" or specifies which numbered element they want.',parameters:{type:xn.OBJECT,properties:{confirmed:{type:xn.BOOLEAN,description:"true if user approved (yes/approve/do it/go ahead), false if rejected (no/reject/cancel/wrong)"},elementNumber:{type:xn.NUMBER,description:'Optional: If multiple elements were found, specify which one (1-indexed). Use when user says "the second one" (2), "number 3" (3), etc.'}},required:["confirmed"]}},Hme={name:"patch_source_file",description:`SAVE changes to the actual source code file. Use this AFTER execute_code to make changes permanent.

REQUIRES: The selected element must have sourceLocation info (file path and line number).
Use this to write the modified code to disk so it persists after page reload.

IMPORTANT: Provide the FULL updated content for the portion of the file being changed.`,parameters:{type:xn.OBJECT,properties:{filePath:{type:xn.STRING,description:"The source file path to modify (from selectedElement.sourceLocation)"},searchCode:{type:xn.STRING,description:"The original code to find and replace in the file"},replaceCode:{type:xn.STRING,description:"The new code to replace it with"},description:{type:xn.STRING,description:"Brief description of the change being made"}},required:["filePath","searchCode","replaceCode","description"]}},Vme={name:"list_files",description:"List files and folders in a directory. Use this to explore the project structure.",parameters:{type:xn.OBJECT,properties:{path:{type:xn.STRING,description:'Directory path to list. Use "." for current directory, or relative/absolute path.'}},required:[]}},qme={name:"read_file",description:"Read the contents of a file. Use this to see the current code before making changes.",parameters:{type:xn.OBJECT,properties:{path:{type:xn.STRING,description:"Absolute or relative path to the file to read"},filePath:{type:xn.STRING,description:'(Deprecated) Legacy alias for path; prefer using "path"'}},required:[]}},Gme={name:"click_element",description:"Click on an element (link, button, etc.) to navigate or trigger an action.",parameters:{type:xn.OBJECT,properties:{selector:{type:xn.STRING,description:"CSS selector for the element to click. Use valid CSS only (no :contains)."}},required:["selector"]}},Wme={name:"navigate",description:"Navigate the browser - go back, forward, reload, or to a specific URL.",parameters:{type:xn.OBJECT,properties:{action:{type:xn.STRING,description:'Action to take: "back", "forward", "reload", or "goto"'},url:{type:xn.STRING,description:'URL to navigate to (only needed if action is "goto")'}},required:["action"]}},Yme={name:"scroll",description:"Scroll the page - to top, bottom, or to a specific element.",parameters:{type:xn.OBJECT,properties:{target:{type:xn.STRING,description:'"top", "bottom", or a CSS selector to scroll to'}},required:["target"]}},Kme={name:"open_item",description:"Open an item from the file browser overlay by its number. Use after list_files shows the file browser.",parameters:{type:xn.OBJECT,properties:{itemNumber:{type:xn.NUMBER,description:"The number of the item to open (1-indexed)"}},required:["itemNumber"]}},Zme={name:"browser_back",description:"Go back to the previous panel in the file browser, or close it if at the root.",parameters:{type:xn.OBJECT,properties:{},required:[]}},Jme={name:"close_browser",description:'Close the file browser overlay completely. Use when user says "close that", "clear", "enough", "dismiss", etc.',parameters:{type:xn.OBJECT,properties:{},required:[]}},Xme={name:"open_file",description:`Open a file in the file browser by name or path.

USE THIS WHEN:
- User says "open LandingPage.tsx"  open_file({ name: "LandingPage.tsx" })
- User says "show me the App component"  open_file({ name: "App.tsx" })
- User says "open package.json"  open_file({ name: "package.json" })
- User says "open that file" (after mentioning a file)  open_file({ name: "filename.tsx" })

You can provide either:
- name: Just the filename - will search in the current file browser directory
- path: Full or relative path to the file

The file will open in the file browser overlay for viewing.`,parameters:{type:xn.OBJECT,properties:{name:{type:xn.STRING,description:'The filename to open (e.g., "LandingPage.tsx", "package.json")'},path:{type:xn.STRING,description:"Optional: Full path to the file if known"}},required:[]}},Qme={name:"open_folder",description:`Open a folder in the file browser by name or number.

USE THIS WHEN:
- User says "open the public folder"  open_folder({ name: "public" })
- User says "open number 3" or "open 3"  open_folder({ itemNumber: 3 })
- User says "go into src"  open_folder({ name: "src" })
- User says "check the hooks folder"  open_folder({ name: "hooks" })

You can use EITHER name OR itemNumber, not both. The itemNumber refers to the numbered items shown in the file browser overlay.`,parameters:{type:xn.OBJECT,properties:{name:{type:xn.STRING,description:'The folder name to open (e.g., "public", "src", "hooks")'},itemNumber:{type:xn.NUMBER,description:"The number of the folder in the file browser (1-indexed)"}},required:[]}},ege={name:"approve_change",description:`Approve a pending change when the user gives voice approval.

Use this when the user says "yes", "accept", "approve", "do it", "go ahead", or similar approval commands.
This confirms that the user wants to apply the proposed change.`,parameters:{type:xn.OBJECT,properties:{reason:{type:xn.STRING,description:"Brief explanation of what was approved (for confirmation message)"}},required:[]}},tge={name:"reject_change",description:`Reject a pending change when the user gives voice rejection.

Use this when the user says "no", "reject", "cancel", "undo", "wrong", or similar rejection commands.
This confirms that the user does not want to apply the proposed change.`,parameters:{type:xn.OBJECT,properties:{reason:{type:xn.STRING,description:"Brief explanation of why the change was rejected"}},required:[]}},nge={name:"undo_change",description:`Undo the last applied change when the user requests it via voice.

Use this when the user says "undo that", "undo the last change", "revert", "go back", or similar undo commands.
This reverts the application to the state before the last change was applied.`,parameters:{type:xn.OBJECT,properties:{reason:{type:xn.STRING,description:"Reason for undoing (for confirmation message)"}},required:[]}},rge={name:"highlight_element_by_number",description:`Highlight an element AND SET IT AS FOCUS for hierarchical navigation.

Elements on the page are numbered with visible badges (1, 2, 3, etc).
This is the PREFERRED way to highlight elements - no CSS selector errors!

 HIERARCHICAL FOCUSING:
When you highlight an element, it becomes the FOCUS. Subsequent get_page_elements
calls will ONLY show elements WITHIN the focused element. This lets users
drill down: "middle section"  "left side"  "that button"

WORKFLOW:
1. get_page_elements() - shows all page elements numbered
2. User: "the middle section"  highlight_element_by_number(N) for that section
3. get_page_elements() - now ONLY shows elements INSIDE the section
4. User: "the button on the left"  highlight_element_by_number(M)
5. User: "clear focus"  call clear_focus() to see all elements again

WHEN TO USE:
- "highlight 3" or "number 3"  highlight_element_by_number(3)
- "that section" / "the header"  highlight it to set focus
- User points to a region  set it as focus for drilling down`,parameters:{type:xn.OBJECT,properties:{elementNumber:{type:xn.NUMBER,description:"The 1-indexed element number to highlight (from the numbered badges on the page)"},description:{type:xn.STRING,description:"Brief description of what element you are highlighting (for user confirmation)"}},required:["elementNumber"]}},oge={name:"clear_focus",description:`Clear the current focus scope and show ALL page elements again.

Use this when the user wants to "zoom out" or see the full page elements again after
drilling down into a specific section.

TRIGGERS:
- "clear focus" / "zoom out" / "show all" / "reset" / "go back to all"
- "start over" / "full page" / "everything"

After clearing focus, call get_page_elements() to re-number all elements on the page.`,parameters:{type:xn.OBJECT,properties:{},required:[]}},sge={name:"set_viewport",description:`Switch the viewport/device preview mode in Cluso.

MODES:
- 'mobile' - Phone view (375px wide)
- 'tablet' - Tablet view (768px wide)
- 'desktop' - Full width desktop view

TRIGGERS:
- "switch to mobile" / "show mobile view" / "phone view"
- "switch to tablet" / "tablet view" / "iPad view"
- "switch to desktop" / "desktop view" / "full width"
- "how does it look on mobile?"`,parameters:{type:xn.OBJECT,properties:{mode:{type:xn.STRING,description:"Viewport mode: mobile, tablet, or desktop"}},required:["mode"]}},ige={name:"switch_tab",description:`Switch to or create a different tab type in Cluso.

TAB TYPES:
- 'browser' - Web browser tab for viewing/editing websites
- 'kanban' - Kanban board for project management
- 'todos' - Todo list for task tracking
- 'notes' - Notes tab for documentation

TRIGGERS:
- "open kanban" / "show kanban board" / "project board"
- "open todos" / "show my tasks" / "task list"
- "open notes" / "show notes"
- "go to browser" / "back to website"`,parameters:{type:xn.OBJECT,properties:{type:{type:xn.STRING,description:"Tab type: browser, kanban, todos, or notes"}},required:["type"]}};function age({videoRef:e,canvasRef:t,onCodeUpdate:n,onElementSelect:r,onExecuteCode:o,onConfirmSelection:s,onGetPageElements:i,onPatchSourceFile:a,onListFiles:l,onReadFile:c,onClickElement:u,onNavigate:f,onScroll:m,onOpenItem:g,onOpenFile:y,onOpenFolder:v,onBrowserBack:w,onCloseBrowser:_,onApproveChange:T,onRejectChange:k,onUndoChange:M,onHighlightByNumber:D,onClearFocus:I,onSetViewport:P,onSwitchTab:B,selectedElement:U,projectFolder:j,currentUrl:H,googleApiKey:q,selectedModelId:z}){const[Z,X]=x.useState({isConnected:!1,isStreaming:!1,error:null}),[J,ee]=x.useState(0),re=x.useRef(null),ie=x.useRef(null),K=x.useCallback(vt=>{var me;(me=re.current)==null||me.then(vt).catch(Ne=>{fo.liveGemini.error("Session error:",Ne)})},[]),te=x.useRef(null),se=x.useRef(null),Q=x.useRef(0),Te=x.useRef(new Set),ge=x.useRef(null),Ce=x.useRef(null),he=x.useRef(null),Fe=x.useRef(0),Oe=x.useRef(null),Re=5,nt=1e3,ue=x.useRef(null),et=x.useCallback((vt=!1)=>{Oe.current&&(clearTimeout(Oe.current),Oe.current=null),vt&&(Fe.current=Re),he.current&&(clearInterval(he.current),he.current=null),ge.current&&(ge.current.disconnect(),ge.current=null),Ce.current&&(Ce.current.getTracks().forEach($e=>$e.stop()),Ce.current=null);const me=Array.from(Te.current);Te.current.clear(),me.forEach($e=>{try{$e.stop()}catch{}}),te.current&&(te.current.close(),te.current=null),se.current&&(se.current.close(),se.current=null);const Ne=re.current;re.current=null,Ne&&Ne.then($e=>$e.close()).catch($e=>{console.error("[useLiveGemini] Error closing session:",$e)}),X($e=>({...$e,isConnected:!1,isStreaming:!1})),ee(0)},[]),ut=x.useCallback(async()=>{try{X({isConnected:!1,isStreaming:!0,error:null});const vt=q||"AIzaSyAuAGR2YNrczzJKRcqVr924j71lRqc02IU";ie.current=new aR({apiKey:vt});const me=window.AudioContext||window.webkitAudioContext;if(!me)throw new Error("AudioContext not supported");te.current=new me({sampleRate:16e3}),se.current=new me({sampleRate:24e3}),ue.current=se.current.createAnalyser(),ue.current.fftSize=256;const Ne=await navigator.mediaDevices.getUserMedia({audio:!0});Ce.current=Ne;const Je=`${z&&z.startsWith("gemini-")?z:"gemini-2.5-flash"}-native-audio-preview-09-2025`,Le=ie.current.live.connect({model:Je,config:{responseModalities:[F1.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Zephyr"}}},tools:[{functionDeclarations:[Fme,Bme,jme,Ume,zme,Hme,Vme,qme,Gme,Wme,Yme,Kme,Xme,Qme,Zme,Jme,ege,tge,nge,rge,oge,sge,ige]}],systemInstruction:`You are a specialized AI UI Engineer with voice control, file browsing, element selection, and browser navigation.

          You can see the user's screen or video feed if enabled.
          You can hear the user's voice commands.

          CAPABILITIES:
           FILE BROWSER: Browse files with numbered overlay, navigate folders, view files/images
           PAGE INSPECTION: Get page elements, highlight by number, execute code
           NAVIGATION: Click links, go back/forward, scroll, navigate to URLs
           EDITING: Preview changes with execute_code, save with patch_source_file

           ELEMENT HIGHLIGHTING - USE NUMBERS, NOT CSS SELECTORS!
          Elements on the page are numbered (1, 2, 3...). Use highlight_element_by_number() to highlight them.
          This is MORE RELIABLE than CSS selectors and never causes errors.

           HIERARCHICAL FOCUSING - DRILL DOWN INTO SECTIONS:
          When you highlight an element, it becomes the FOCUS. Subsequent get_page_elements
          calls will ONLY show elements WITHIN the focused element. This lets users drill down:

          Example conversation:
          User: "show me the page"  get_page_elements()
          You: "I see 20 elements. The header is #1, main section #5, footer #12"
          User: "that middle section"  highlight_element_by_number(5) - SETS FOCUS
          You: "Now focused on the main section"
          User: "what's in there?"  get_page_elements() - now shows ONLY elements inside #5
          You: "Within the main section: 3 buttons (#1, #2, #3)"
          User: "the left one"  highlight_element_by_number(1)
          User: "zoom out"  clear_focus() then get_page_elements() - shows all again

          WORKFLOW:
          1. get_page_elements() - shows all page elements numbered
          2. User picks a section  highlight_element_by_number(N) - sets focus to that section
          3. get_page_elements() - now ONLY shows children of focused section
          4. User: "clear focus" / "zoom out"  clear_focus() to see full page again

          NUMBER-BASED COMMANDS:
          - "highlight 3" / "number 3"  highlight_element_by_number(3)
          - "that section" / "the header"  highlight to set focus
          - "clear focus" / "zoom out" / "show all"  clear_focus()
          - "show me the buttons"  get_page_elements('buttons')

           IMPORTANT: highlight_element_by_number sets FOCUS for drilling down.
          Use execute_code or update_ui for actual code changes.

          FILE BROWSER OVERLAY:
          When user asks to see files ("show files", "list files", "check the public folder"), use list_files.
          This shows a numbered overlay. User can then say "open 3" to navigate.

          FILE BROWSER COMMANDS:
          - "show me the files" / "list files"  list_files()
          - "check the public folder"  list_files("public")
          - "open 3" / "open three" / "number 3"  open_item(3) OR open_folder({ itemNumber: 3 })
          - "open the src folder" / "go into hooks"  open_folder({ name: "src" })
          - "open LandingPage.tsx" / "show me App.tsx"  open_file({ name: "LandingPage.tsx" })
          - "go back" (in file browser)  browser_back()
          - "close that" / "clear" / "enough" / "dismiss"  close_browser()

          FILE TOOLS:
          - open_file: Open a specific file by name - searches in current directory
          - open_folder: For folders specifically - can use name OR number
          - open_item: For any item by number (files or folders)

          CLOSING CONTEXT:
          When user says "close that", "clear that", "enough of that", "dismiss":
          - If file browser is showing  close_browser()
          - If element is selected  confirm_selection(false)
          - Otherwise  acknowledge and do nothing

          ${U?`SELECTED ELEMENT: ${U.tagName} "${U.text||""}"`:""}

          VOICE APPROVAL COMMANDS:
          When user says these voice commands, use the approval tools:
          - "yes", "accept", "approve", "do it", "go ahead"  approve_change()
          - "no", "reject", "cancel", "nope", "wrong"  reject_change()
          - "undo that", "undo the last change", "revert", "go back"  undo_change()

          VOICE COMMANDS SUMMARY:
          HIGHLIGHTING: "highlight 3", "show me the buttons", "number 2"
          FILE BROWSER: "show files", "open 3", "go back", "close that"
          PAGE: "click that", "scroll down"
          APPROVAL: "yes"/"approve", "no"/"reject", "undo that"

           INSTANT DOM EDITS - CRITICAL:
          When user requests UI changes ("flip it back", "change the color", "move that button", etc):
          - IMMEDIATELY call update_ui with the modified HTML
          - Do NOT read source files first - you can infer changes from the current DOM
          - Do NOT explain or describe what you're doing
          - Do NOT use tools like read_file, get_page_elements, or list_files
          - Apply the change silently and instantly
          - Only respond AFTER the DOM update is complete

          Be silent on instant edits. Concise on other tasks.`},callbacks:{onopen:()=>{if($P("Connection Opened"),Fe.current=0,X(W=>({...W,isConnected:!0})),!te.current)return;const Ve=te.current.createMediaStreamSource(Ne),_e=te.current.createScriptProcessor(4096,1,1);_e.onaudioprocess=W=>{const L=W.inputBuffer.getChannelData(0),F=Rme(L);K(ce=>{ce.sendRealtimeInput({media:F})})},Ve.connect(_e),_e.connect(te.current.destination),ge.current=_e},onmessage:async Ve=>{var W,L,F,ce,we,ze;if(Ve.toolCall){fo.liveGemini.log("Tool call received",Ve.toolCall);const Be=Ve.toolCall.functionCalls;if(Be&&Be.length>0){const ct={onCodeUpdate:n,onElementSelect:r,onExecuteCode:o,onConfirmSelection:s,onGetPageElements:i,onPatchSourceFile:a,onListFiles:l,onReadFile:c,onClickElement:u,onNavigate:f,onScroll:m,onOpenItem:g,onOpenFile:y,onOpenFolder:v,onBrowserBack:w,onCloseBrowser:_,onApproveChange:T,onRejectChange:k,onUndoChange:M,onHighlightByNumber:D},ln=Be.map(jt=>({id:jt.id,name:jt.name,args:jt.args||{}}));try{fo.liveGemini.log(`Executing ${ln.length} tool call(s) in parallel...`);const jt=await $me(ln,ct,{parallel:!0});fo.liveGemini.log("Tool execution complete:",jt.map(fn=>`${fn.name}: ${fn.response.error||"success"}`)),K(fn=>{fn.sendToolResponse({functionResponses:jt.map(an=>({id:an.id,name:an.name,response:an.response}))})})}catch(jt){fo.liveGemini.error("Tool execution batch failed:",jt),K(fn=>{fn.sendToolResponse({functionResponses:ln.map(an=>({id:an.id,name:an.name,response:{error:jt instanceof Error?jt.message:"Unknown error"}}))})})}}}const _e=(we=(ce=(F=(L=(W=Ve.serverContent)==null?void 0:W.modelTurn)==null?void 0:L.parts)==null?void 0:F[0])==null?void 0:ce.inlineData)==null?void 0:we.data;if(_e&&se.current){const Be=se.current,ct=Mme(_e),ln=await fq(ct,Be,24e3),jt=Be.currentTime;Q.current=Math.max(Q.current,jt);const fn=Be.createBufferSource();fn.buffer=ln,ue.current?(fn.connect(ue.current),ue.current.connect(Be.destination)):fn.connect(Be.destination),fn.start(Q.current),Q.current+=ln.duration,fn.onended=()=>{Te.current.delete(fn)},Te.current.add(fn)}(ze=Ve.serverContent)!=null&&ze.interrupted&&(Te.current.forEach(Be=>Be.stop()),Te.current.clear(),Q.current=0)},onclose:()=>{$P("Connection Closed - Auto-reconnecting"),fo.liveGemini.log("Stream closed, auto-reconnecting to maintain persistent connection..."),Fe.current=0,ut().catch(Ve=>{fo.liveGemini.error("Auto-reconnect failed:",Ve),X(_e=>({..._e,error:"Auto-reconnect failed. Click connect to try again."}))})},onerror:Ve=>{if(fo.liveGemini.error("Connection Error",Ve),Fe.current<Re){const _e=nt*Math.pow(2,Fe.current);fo.liveGemini.log(`Error reconnect attempt ${Fe.current+1}/${Re} in ${_e}ms`),Fe.current++,Oe.current=window.setTimeout(()=>{fo.liveGemini.log("Attempting reconnect after error..."),ut().catch(W=>{fo.liveGemini.error("Error reconnect failed:",W)})},_e)}else fo.liveGemini.log("Max reconnect attempts reached after error"),X(_e=>({..._e,error:"Connection failed. Please try again."})),et()}}});re.current=Le}catch(vt){fo.liveGemini.error(vt),X(me=>({...me,error:vt instanceof Error?vt.message:"Failed to connect"})),et()}},[et,n,r,o,s,T,k,M,U,q,z]),Yt=x.useCallback(()=>{if(he.current)return;const vt=1;he.current=window.setInterval(async()=>{if(!e.current||!t.current||!re.current)return;const me=e.current,Ne=t.current,$e=Ne.getContext("2d");if(!$e||me.readyState<2)return;const Je=640/me.videoWidth,Le=640,Ve=me.videoHeight*Je;Ne.width=Le,Ne.height=Ve,$e.drawImage(me,0,0,Le,Ve);const _e=Ne.toDataURL("image/jpeg",.5).split(",")[1];re.current.then(W=>{W.sendRealtimeInput({media:{mimeType:"image/jpeg",data:_e}})})},1e3/vt)},[e,t]),Ht=x.useCallback(()=>{he.current&&(clearInterval(he.current),he.current=null)},[]);x.useEffect(()=>{if(!Z.isConnected)return;const vt=setInterval(()=>{if(ue.current){const me=new Uint8Array(ue.current.frequencyBinCount);ue.current.getByteFrequencyData(me);let Ne=0;for(let Je=0;Je<me.length;Je++)Ne+=me[Je];const $e=Ne/me.length;ee($e)}},50);return()=>clearInterval(vt)},[Z.isConnected]);const Pt=x.useCallback(()=>{const vt=Array.from(Te.current);Te.current.clear(),vt.forEach(me=>{try{me.stop()}catch{}}),Q.current=0},[]),tn=x.useCallback(()=>{et(!0)},[et]);return{streamState:Z,connect:ut,disconnect:tn,startVideoStreaming:Yt,stopVideoStreaming:Ht,stopSpeaking:Pt,volume:J}}function lge(){var m;const[e,t]=x.useState({currentBranch:"main",branches:[],hasChanges:!1,changedFiles:[],isLoading:!0,error:null}),n=typeof window<"u"&&((m=window.electronAPI)==null?void 0:m.git),r=x.useCallback(async()=>{var y;if(!n||!((y=window.electronAPI)!=null&&y.git)){t(v=>({...v,isLoading:!1}));return}const g=window.electronAPI.git;try{const[v,w,_]=await Promise.all([g.getCurrentBranch(),g.getBranches(),g.getStatus()]);t(T=>({...T,currentBranch:v.success&&v.data?v.data:T.currentBranch,branches:w.success&&w.data?w.data:T.branches,hasChanges:_.success&&_.data?_.data.hasChanges:!1,changedFiles:_.success&&_.data?_.data.files:[],isLoading:!1,error:null}))}catch(v){t(w=>({...w,isLoading:!1,error:v instanceof Error?v.message:"Git error"}))}},[n]);x.useEffect(()=>{r();const g=setInterval(r,5e3);return()=>clearInterval(g)},[r]);const o=x.useCallback(async g=>{var w;const y=(w=window.electronAPI)==null?void 0:w.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.checkout(g);return v.success&&await r(),v},[n,r]),s=x.useCallback(async g=>{var w;const y=(w=window.electronAPI)==null?void 0:w.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.createBranch(g);return v.success&&await r(),v},[n,r]),i=x.useCallback(async g=>{var w;const y=(w=window.electronAPI)==null?void 0:w.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.commit(g);return v.success&&await r(),v},[n,r]),a=x.useCallback(async()=>{var y;const g=(y=window.electronAPI)==null?void 0:y.git;return!n||!g?{success:!1,error:"Not in Electron"}:await g.push()},[n]),l=x.useCallback(async()=>{var v;const g=(v=window.electronAPI)==null?void 0:v.git;if(!n||!g)return{success:!1,error:"Not in Electron"};const y=await g.pull();return y.success&&await r(),y},[n,r]),c=x.useCallback(async()=>{var v;const g=(v=window.electronAPI)==null?void 0:v.git;if(!n||!g)return{success:!1,error:"Not in Electron"};const y=await g.stash();return y.success&&await r(),y},[n,r]),u=x.useCallback(async g=>{var w;const y=(w=window.electronAPI)==null?void 0:w.git;if(!n||!y)return{success:!1,error:"Not in Electron"};const v=await y.stashWithMessage(g);return v.success&&await r(),v},[n,r]),f=x.useCallback(async()=>{var v;const g=(v=window.electronAPI)==null?void 0:v.git;if(!n||!g)return{success:!1,error:"Not in Electron"};const y=await g.stashPop();return y.success&&await r(),y},[n,r]);return{...e,isElectron:n,refresh:r,checkout:o,createBranch:s,commit:i,push:a,pull:l,stash:c,stashWithMessage:u,stashPop:f}}const cge="system-default",uN=[{id:"system-default",name:"System Default",description:"Use system light/dark mode preferences"},{id:"tokyo-night",name:"Tokyo Night",description:"A dark theme inspired by Tokyo",colors:{background:"#1a1b26",foreground:"#c0caf5",primary:"#7aa2f7",secondary:"#bb9af7",accent:"#7dcfff",border:"#3b3f5c",success:"#9ece6a",error:"#f7768e",warning:"#e0af68",info:"#7aa2f7"}},{id:"dracula",name:"Dracula",description:"A dark theme with vibrant colors",colors:{background:"#282a36",foreground:"#f8f8f2",primary:"#bd93f9",secondary:"#ff79c6",accent:"#8be9fd",border:"#44475a",success:"#50fa7b",error:"#ff5555",warning:"#f1fa8c",info:"#8be9fd"}},{id:"nord",name:"Nord",description:"An arctic, north-bluish color palette",colors:{background:"#2e3440",foreground:"#d8dee9",primary:"#81a1c1",secondary:"#b48ead",accent:"#88c0d0",border:"#3b4252",success:"#a3be8c",error:"#bf616a",warning:"#ebcb8b",info:"#81a1c1"}},{id:"gruvbox-dark",name:"Gruvbox Dark",description:"Retro groove color scheme",colors:{background:"#282828",foreground:"#ebdbb2",primary:"#458588",secondary:"#b16286",accent:"#689d6a",border:"#3c3836",success:"#98971a",error:"#cc241d",warning:"#d79921",info:"#458588"}},{id:"one-dark",name:"One Dark",description:"Atom One Dark theme",colors:{background:"#282c34",foreground:"#abb2bf",primary:"#61afef",secondary:"#c678dd",accent:"#56b6c2",border:"#3e4451",success:"#98c379",error:"#e06c75",warning:"#e5c07b",info:"#61afef"}},{id:"catppuccin-mocha",name:"Catppuccin Mocha",description:"Soothing pastel theme",colors:{background:"#1e1e2e",foreground:"#cdd6f4",primary:"#89b4fa",secondary:"#f5c2e7",accent:"#94e2d5",border:"#313244",success:"#a6e3a1",error:"#f38ba8",warning:"#f9e2af",info:"#89b4fa"}},{id:"solarized-dark",name:"Solarized Dark",description:"Precision colors for machines and people",colors:{background:"#002b36",foreground:"#839496",primary:"#268bd2",secondary:"#d33682",accent:"#2aa198",border:"#073642",success:"#859900",error:"#dc322f",warning:"#b58900",info:"#268bd2"}},{id:"monokai-pro",name:"Monokai Pro",description:"Professional monochrome-inspired theme",colors:{background:"#2d2a2e",foreground:"#fcfcfa",primary:"#fc9867",secondary:"#ab9df2",accent:"#78dce8",border:"#403e41",success:"#a9dc76",error:"#ff6188",warning:"#ffd866",info:"#fc9867"}},{id:"github-dark",name:"GitHub Dark",description:"GitHub dark mode theme",colors:{background:"#0d1117",foreground:"#c9d1d9",primary:"#58a6ff",secondary:"#bc8cff",accent:"#39c5cf",border:"#30363d",success:"#3fb950",error:"#f85149",warning:"#d29922",info:"#58a6ff"}},{id:"synthwave-84",name:"Synthwave '84",description:"Neon retro future theme",colors:{background:"#262335",foreground:"#ffffff",primary:"#03edf9",secondary:"#ff7edb",accent:"#03edf9",border:"#614d85",success:"#72f1b8",error:"#fe4450",warning:"#fede5d",info:"#03edf9"}},{id:"everforest-dark",name:"Everforest Dark",description:"Comfortable green-based color palette",colors:{background:"#2b3339",foreground:"#d4be98",primary:"#7fbbb3",secondary:"#d699b6",accent:"#83c092",border:"#374145",success:"#83c092",error:"#e68183",warning:"#dbc77d",info:"#7fbbb3"}},{id:"rose-pine-moon",name:"Rose Pine Moon",description:"All natural pine, faux fur and a bit of soho vibes",colors:{background:"#232136",foreground:"#e0def4",primary:"#9ccfd8",secondary:"#f5bde6",accent:"#ebbcba",border:"#393552",success:"#90c695",error:"#eb6f92",warning:"#f6c177",info:"#9ccfd8"}},{id:"solarized-light",name:"Solarized Light",description:"Precision colors - light variant",colors:{background:"#fdf6e3",foreground:"#657b83",primary:"#268bd2",secondary:"#d33682",accent:"#2aa198",border:"#eee8d5",success:"#859900",error:"#dc322f",warning:"#b58900",info:"#268bd2"}},{id:"github-light",name:"GitHub Light",description:"GitHub light mode theme",colors:{background:"#ffffff",foreground:"#24292f",primary:"#0969da",secondary:"#8250df",accent:"#1b7c83",border:"#d0d7de",success:"#1a7f37",error:"#cf222e",warning:"#9a6700",info:"#0969da"}},{id:"one-light",name:"One Light",description:"Atom One Light theme",colors:{background:"#fafafa",foreground:"#383a42",primary:"#4078f2",secondary:"#a626a4",accent:"#0184bc",border:"#e5e5e6",success:"#50a14f",error:"#e45649",warning:"#c18401",info:"#4078f2"}},{id:"catppuccin-latte",name:"Catppuccin Latte",description:"Soothing pastel theme - light variant",colors:{background:"#eff1f5",foreground:"#4c4f69",primary:"#1e66f5",secondary:"#ea76cb",accent:"#179299",border:"#ccd0da",success:"#40a02b",error:"#d20f39",warning:"#df8e1d",info:"#1e66f5"}},{id:"rose-pine-dawn",name:"Rose Pine Dawn",description:"All natural pine - light variant",colors:{background:"#faf4ed",foreground:"#575279",primary:"#56949f",secondary:"#d7827e",accent:"#907aa9",border:"#f2e9e1",success:"#286983",error:"#b4637a",warning:"#ea9d34",info:"#56949f"}},{id:"nord-light",name:"Nord Light",description:"Arctic color palette - light variant",colors:{background:"#eceff4",foreground:"#2e3440",primary:"#5e81ac",secondary:"#b48ead",accent:"#88c0d0",border:"#d8dee9",success:"#a3be8c",error:"#bf616a",warning:"#ebcb8b",info:"#5e81ac"}},{id:"gruvbox-light",name:"Gruvbox Light",description:"Retro groove - light variant",colors:{background:"#fbf1c7",foreground:"#3c3836",primary:"#458588",secondary:"#b16286",accent:"#689d6a",border:"#ebdbb2",success:"#98971a",error:"#cc241d",warning:"#d79921",info:"#458588"}}];function BP(e){return uN.find(t=>t.id===e)||uN[0]}function n2(e){const t=document.documentElement,n=t.classList.contains("dark")||document.body.classList.contains("dark")||document.querySelector(".dark")!==null;if(e.id==="system-default"){t.removeAttribute("data-theme"),n?(t.style.setProperty("--color-background","#171717"),t.style.setProperty("--color-foreground","#f5f5f5"),t.style.setProperty("--color-primary","#3b82f6"),t.style.setProperty("--color-secondary","#8b5cf6"),t.style.setProperty("--color-accent","#06b6d4"),t.style.setProperty("--color-border","#404040"),t.style.setProperty("--color-success","#22c55e"),t.style.setProperty("--color-error","#ef4444"),t.style.setProperty("--color-warning","#f59e0b"),t.style.setProperty("--color-info","#3b82f6"),t.style.setProperty("--color-panel","#262626"),t.style.setProperty("--color-muted","#a3a3a3"),t.style.setProperty("--color-on-primary","#ffffff"),t.style.setProperty("--color-on-secondary","#ffffff"),t.style.setProperty("--color-on-accent","#000000"),t.style.setProperty("--color-on-success","#000000"),t.style.setProperty("--color-on-error","#ffffff"),t.style.setProperty("--color-on-warning","#000000")):(t.style.setProperty("--color-background","#d6d3d1"),t.style.setProperty("--color-foreground","#171717"),t.style.setProperty("--color-primary","#2563eb"),t.style.setProperty("--color-secondary","#7c3aed"),t.style.setProperty("--color-accent","#0891b2"),t.style.setProperty("--color-border","#e7e5e4"),t.style.setProperty("--color-success","#16a34a"),t.style.setProperty("--color-error","#dc2626"),t.style.setProperty("--color-warning","#d97706"),t.style.setProperty("--color-info","#2563eb"),t.style.setProperty("--color-panel","#ffffff"),t.style.setProperty("--color-muted","#78716c"),t.style.setProperty("--color-on-primary","#ffffff"),t.style.setProperty("--color-on-secondary","#ffffff"),t.style.setProperty("--color-on-accent","#ffffff"),t.style.setProperty("--color-on-success","#ffffff"),t.style.setProperty("--color-on-error","#ffffff"),t.style.setProperty("--color-on-warning","#000000"));return}const{colors:r}=e;if(!r){t.removeAttribute("data-theme");return}t.style.setProperty("--color-background",r.background),t.style.setProperty("--color-foreground",r.foreground),t.style.setProperty("--color-primary",r.primary),t.style.setProperty("--color-secondary",r.secondary),t.style.setProperty("--color-accent",r.accent),t.style.setProperty("--color-border",r.border),t.style.setProperty("--color-success",r.success),t.style.setProperty("--color-error",r.error),t.style.setProperty("--color-warning",r.warning),t.style.setProperty("--color-info",r.info);const s=hq(r.background)<.5;s?t.style.setProperty("--color-panel",S5(r.background,25)):t.style.setProperty("--color-panel",S5(r.background,3)),t.style.setProperty("--color-muted",S5(r.foreground,s?-30:30)),t.style.setProperty("--color-on-primary",Bg(r.primary)),t.style.setProperty("--color-on-secondary",Bg(r.secondary)),t.style.setProperty("--color-on-accent",Bg(r.accent)),t.style.setProperty("--color-on-success",Bg(r.success)),t.style.setProperty("--color-on-error",Bg(r.error)),t.style.setProperty("--color-on-warning",Bg(r.warning)),t.setAttribute("data-theme",e.id)}function hq(e){e=e.replace(/^#/,"");const t=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,r=parseInt(e.substring(4,6),16)/255;return .299*t+.587*n+.114*r}function S5(e,t){e=e.replace(/^#/,"");let n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);return n=Math.min(255,Math.max(0,Math.round(n+n*t/100))),r=Math.min(255,Math.max(0,Math.round(r+r*t/100))),o=Math.min(255,Math.max(0,Math.round(o+o*t/100))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`}function Bg(e){return hq(e)<.5?"#ffffff":"#1a1a1a"}const pq=x.createContext(void 0);function uge({children:e}){const[t,n]=x.useState(()=>{const s=localStorage.getItem("app-theme-id");return BP(s||cge)}),r=x.useCallback(s=>{console.log("[Theme] Setting theme:",s);const i=BP(s);console.log("[Theme] Theme object:",i),n(i),localStorage.setItem("app-theme-id",s),n2(i),console.log("[Theme] Applied. Root style:",document.documentElement.style.cssText)},[]),o=x.useCallback(()=>{n2(t)},[t]);return x.useEffect(()=>{n2(t)},[t]),x.useEffect(()=>{const s=new MutationObserver(i=>{for(const a of i)a.attributeName==="class"&&n2(t)});return s.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>s.disconnect()},[t]),h.jsx(pq.Provider,{value:{currentTheme:t,setTheme:r,themes:uN,reapplyTheme:o},children:e})}function lR(){const e=x.useContext(pq);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}const dge={browser:"Cluso",kanban:"Kanban",todos:"Todos",notes:"Notes"};let zP=0;function By(e,t="browser"){const n={id:e||`tab-${Date.now()}-${++zP}`,title:dge[t],url:"",favicon:void 0,type:t,canGoBack:!1,canGoForward:!1,isLoading:!1,isWebviewReady:!1,messages:[],selectedElement:null,screenshotElement:null,capturedScreenshot:null,logs:[],pendingChange:null,aiSelectedElement:null};if(t==="kanban"){const r=`kanban-${Date.now()}-${zP}`;return{...n,title:"New Board",kanbanData:{boardId:r,boardTitle:"New Board",columns:[{id:"backlog",title:"Backlog",cards:[]},{id:"todo",title:"To Do",cards:[]},{id:"in-progress",title:"In Progress",cards:[]},{id:"done",title:"Done",cards:[]}]}}}return t==="todos"?{...n,todosData:{items:[]}}:t==="notes"?{...n,notesData:{content:""}}:n}/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fge=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hge=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),jP=e=>{const t=hge(e);return t.charAt(0).toUpperCase()+t.slice(1)},mq=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),pge=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gge=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>x.createElement("svg",{ref:l,...mge,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:mq("lucide",o),...!s&&!pge(a)&&{"aria-hidden":"true"},...a},[...i.map(([c,u])=>x.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(e,t)=>{const n=x.forwardRef(({className:r,...o},s)=>x.createElement(gge,{ref:s,iconNode:t,className:mq(`lucide-${fge(jP(e))}`,`lucide-${e}`,r),...o}));return n.displayName=jP(e),n};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bge=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],yge=St("archive",bge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vge=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],UP=St("arrow-down",vge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xge=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],T5=St("arrow-up",xge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wge=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],HP=St("bell",wge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ege=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],VP=St("book-open",Ege);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ge=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],qP=St("bot",_ge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sge=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],f1=St("brain",Sge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tge=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],GP=St("bug",Tge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cge=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],B1=St("calendar",Cge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kge=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],WP=St("camera",kge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Age=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],YP=St("chart-no-axes-column",Age);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nge=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Co=St("check",Nge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ige=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Lf=St("chevron-down",Ige);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rge=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Af=St("chevron-right",Rge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mge=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],w1=St("chevron-left",Mge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dge=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gq=St("chevron-up",Dge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_0=St("circle-alert",Oge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pge=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],cd=St("circle-check-big",Pge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$ge=St("circle-check",Lge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],bq=St("circle-plus",Fge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dN=St("circle-question-mark",Bge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fN=St("circle-x",zge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hN=St("circle",jge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uge=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cR=St("clock",Uge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hge=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],zy=St("code-xml",Hge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vge=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],yq=St("columns-3",Vge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qge=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],vq=St("copy",qge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gge=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],xq=St("cpu",Gge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wge=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Yge=St("database",Wge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kge=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Y_=St("download",Kge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zge=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],wq=St("eye-off",Zge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jge=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uR=St("eye",Jge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xge=[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]],Qge=St("file-code-corner",Xge);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],KP=St("file-code",e1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1e=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],n1e=St("file-pen",t1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],pN=St("file-plus",r1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dR=St("file-text",o1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],ix=St("file",s1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1e=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],a1e=St("flame",i1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1e=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],c1e=St("folder-open",l1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1e=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],d1e=St("folder-search",u1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],E1=St("folder",f1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1e=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],p1e=St("git-branch",h1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1e=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],ZP=St("git-compare",m1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$f=St("globe",g1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],y1e=St("grid-3x3",b1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1e=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],x1e=St("grip-vertical",v1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1e=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],JP=St("hammer",w1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1e=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],ax=St("hard-drive",E1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],XP=St("image",_1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1e=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],QP=St("key",S1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],C1e=St("layout-grid",T1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],K_=St("lightbulb",k1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1e=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],N1e=St("list-todo",A1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1e=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],R1e=St("list",I1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ho=St("loader-circle",M1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1e=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],eL=St("log-in",D1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1e=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],tL=St("log-out",O1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1e=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],nL=St("map",P1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Eq=St("message-square",L1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1e=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],F1e=St("mic",$1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1e=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],mN=St("monitor",B1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1e=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],_q=St("moon",z1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1e=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],r2=St("mouse-pointer-2",j1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1e=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],o2=St("move",U1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],cv=St("palette",H1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],q1e=St("panel-right",V1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1e=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],W1e=St("paperclip",G1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Z_=St("pencil",Y1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1e=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],gN=St("play",K1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1e=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],J1e=St("plug",Z1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qf=St("plus",X1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],p0=St("refresh-cw",Q1e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ebe=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],tbe=St("rocket",ebe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nbe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],rbe=St("scroll-text",nbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const obe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Gf=St("search",obe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sbe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ibe=St("send",sbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const abe=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],lbe=St("server",abe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cbe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],J_=St("settings",cbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ube=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rL=St("shield-check",ube);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dbe=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],Sq=St("sliders-horizontal",dbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fbe=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],C5=St("smartphone",fbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hbe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],fR=St("sparkles",hbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pbe=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Tq=St("square-check-big",pbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mbe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],gbe=St("square-pen",mbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bbe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Cq=St("square",bbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ybe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],oL=St("star",ybe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vbe=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],kq=St("sun",vbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xbe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],k5=St("tablet",xbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wbe=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],ud=St("terminal",wbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ebe=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],sL=St("test-tube",Ebe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _be=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ff=St("trash-2",_be);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sbe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Aq=St("triangle-alert",Sbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tbe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Cbe=St("upload",Tbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kbe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Nq=St("wrench",kbe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Abe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qr=St("x",Abe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nbe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ac=St("zap",Nbe),Ibe=[{type:"browser",label:"Browser",icon:$f,description:"Web browser"},{type:"kanban",label:"Kanban",icon:yq,description:"Project board"},{type:"todos",label:"Todos",icon:Tq,description:"Task list"},{type:"notes",label:"Notes",icon:dR,description:"Rich text notes"}];function Rbe(e){switch(e){case"browser":return $f;case"kanban":return yq;case"todos":return Tq;case"notes":return dR;default:return $f}}function Mbe({tabs:e,activeTabId:t,onTabSelect:n,onTabClose:r,onNewTab:o,onReorderTabs:s,isDarkMode:i,onToggleDarkMode:a,onOpenSettings:l,fastApplyReady:c,fastApplyLoading:u,fileWatcherActive:f}){const{currentTheme:m}=lR(),[g,y]=x.useState(!1),[v,w]=x.useState(null),[_,T]=x.useState(null),k=x.useRef(null),M=x.useRef(null),D=x.useRef(null),I=m.colors,P=(I==null?void 0:I.background)||(i?"#171717":"#d6d3d1");I!=null&&I.foreground,I!=null&&I.border;const B=()=>{k.current&&(clearTimeout(k.current),k.current=null),y(!0)},U=()=>{k.current=setTimeout(()=>{y(!1)},150)},j=()=>{k.current&&(clearTimeout(k.current),k.current=null)};x.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]);const H=ee=>{y(!1),o(ee)},q=(ee,re)=>{w(re),ee.dataTransfer.effectAllowed="move",ee.dataTransfer.setData("text/plain",re),requestAnimationFrame(()=>{const ie=ee.target;ie.style.opacity="0.5"})},z=ee=>{const re=ee.target;re.style.opacity="1",w(null),T(null)},Z=(ee,re)=>{ee.preventDefault(),ee.dataTransfer.dropEffect="move",re!==v&&T(re)},X=()=>{T(null)},J=(ee,re)=>{if(ee.preventDefault(),!v||v===re||!s)return;const ie=e.findIndex(Q=>Q.id===v),K=e.findIndex(Q=>Q.id===re);if(ie===-1||K===-1)return;const te=[...e],[se]=te.splice(ie,1);te.splice(K,0,se),s(te),w(null),T(null)};return h.jsxs("div",{className:"h-11 flex items-center justify-between select-none",style:{WebkitAppRegion:"drag",backgroundColor:P},children:[h.jsx("div",{className:"w-20 flex-shrink-0"}),h.jsxs("div",{className:"flex-1 flex items-center gap-0.5 h-full overflow-x-auto overflow-y-visible px-1",style:{WebkitAppRegion:"no-drag"},children:[e.map(ee=>{const re=Rbe(ee.type||"browser"),ie=v===ee.id,K=_===ee.id;return h.jsxs("div",{draggable:!!s,onDragStart:te=>q(te,ee.id),onDragEnd:z,onDragOver:te=>Z(te,ee.id),onDragLeave:X,onDrop:te=>J(te,ee.id),onClick:()=>n(ee.id),className:`
                group relative flex items-center gap-2 h-8 px-3 rounded-lg cursor-pointer
                transition-all duration-150 min-w-[120px] max-w-[200px]
                ${ee.id===t?i?"bg-neutral-700/80 text-white":"bg-white text-stone-900 shadow-sm":i?"text-neutral-400 hover:bg-neutral-800 hover:text-neutral-200":"text-stone-500 hover:bg-stone-200/60 hover:text-stone-700"}
                ${ie?"opacity-50":""}
                ${K?i?"ring-2 ring-violet-500":"ring-2 ring-violet-400":""}
              `,style:{position:"relative",top:"3px"},children:[ee.isProject?h.jsx(c1e,{size:14,className:"flex-shrink-0 text-amber-500"}):ee.type==="browser"&&ee.favicon?h.jsx("img",{src:ee.favicon,alt:"",className:"w-4 h-4 flex-shrink-0"}):h.jsx(re,{size:14,className:"flex-shrink-0"}),h.jsx("span",{className:"text-xs font-medium truncate flex-1",children:ee.title}),e.length>1&&h.jsx("button",{onClick:te=>{te.stopPropagation(),r(ee.id)},className:`
                    w-4 h-4 rounded flex items-center justify-center flex-shrink-0
                    opacity-0 group-hover:opacity-100 transition-opacity
                    ${i?"hover:bg-neutral-600 text-neutral-400 hover:text-white":"hover:bg-stone-300 text-stone-400 hover:text-stone-700"}
                  `,children:h.jsx(qr,{size:12})})]},ee.id)}),h.jsxs("div",{className:"relative",style:{top:"3px"},children:[h.jsx("button",{ref:M,onClick:()=>o("browser"),onMouseEnter:B,onMouseLeave:U,className:`
              w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0
              transition-colors
              ${i?"text-neutral-500 hover:bg-neutral-800 hover:text-neutral-300":"text-stone-400 hover:bg-stone-200 hover:text-stone-600"}
            `,title:"New tab",children:h.jsx(qf,{size:16})}),g&&M.current&&h.jsx("div",{ref:D,onMouseEnter:j,onMouseLeave:U,className:`fixed py-1 rounded-lg shadow-xl border z-[9999] min-w-[160px] ${i?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,style:{top:M.current.getBoundingClientRect().bottom+4,left:M.current.getBoundingClientRect().left,WebkitAppRegion:"no-drag"},children:Ibe.map(({type:ee,label:re,icon:ie,description:K})=>h.jsxs("button",{onClick:()=>H(ee),className:`w-full flex items-center gap-3 px-3 py-2 text-left transition-colors ${i?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-100 text-stone-700"}`,children:[h.jsx(ie,{size:16,className:i?"text-neutral-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"text-sm font-medium",children:re}),h.jsx("div",{className:`text-xs ${i?"text-neutral-500":"text-stone-400"}`,children:K})]})]},ee))})]})]}),h.jsxs("div",{className:"flex items-center gap-1.5 pr-3 flex-shrink-0",style:{WebkitAppRegion:"no-drag"},children:[f&&h.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur-md transition-all ${i?"bg-gradient-to-r from-emerald-500/20 to-teal-500/20 text-emerald-300 border border-emerald-500/30 shadow-lg shadow-emerald-500/10":"bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700 border border-emerald-300/50 shadow-sm"}`,title:"File watcher active - monitoring project for changes",children:[h.jsx(uR,{size:10,className:i?"text-emerald-400":"text-emerald-600"}),h.jsx("span",{children:"Watching"})]}),(c||u)&&h.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-medium backdrop-blur-md transition-all ${u?i?"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 text-blue-300 border border-blue-500/30 shadow-lg shadow-blue-500/10":"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 border border-blue-300/50 shadow-sm":i?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 border border-yellow-500/30 shadow-lg shadow-yellow-500/10":"bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-700 border border-yellow-300/50 shadow-sm"}`,title:u?"Fast Apply is loading...":"Fast Apply is ready - local AI model loaded",children:[h.jsx(Ac,{size:10,className:u?i?"text-blue-400 animate-pulse":"text-blue-600 animate-pulse":i?"text-yellow-400":"text-yellow-600"}),h.jsx("span",{children:u?"Loading...":"Ready"})]}),m.id==="system-default"&&h.jsx("button",{onClick:a,className:`w-7 h-7 rounded-full flex items-center justify-center transition-colors ${i?"hover:bg-neutral-700 text-yellow-400":"hover:bg-stone-200 text-stone-500"}`,title:i?"Switch to Light Mode":"Switch to Dark Mode",children:i?h.jsx(kq,{size:14}):h.jsx(_q,{size:14})}),h.jsx("button",{onClick:l,className:`w-7 h-7 rounded-full flex items-center justify-center transition-colors ${i?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Settings",children:h.jsx(J_,{size:14})})]})]})}function Iq(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Iq(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function hR(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Iq(e))&&(r&&(r+=" "),r+=t);return r}const Dbe=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},Obe=(e,t)=>({classGroupId:e,validator:t}),Rq=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),X_="-",iL=[],Pbe="arbitrary..",Lbe=e=>{const t=Fbe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return $be(i);const a=i.split(X_),l=a[0]===""&&a.length>1?1:0;return Mq(a,l,t)},getConflictingClassGroupIds:(i,a)=>{if(a){const l=r[i],c=n[i];return l?c?Dbe(c,l):l:c||iL}return n[i]||iL}}},Mq=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const o=e[t],s=n.nextPart.get(o);if(s){const c=Mq(e,t+1,s);if(c)return c}const i=n.validators;if(i===null)return;const a=t===0?e.join(X_):e.slice(t).join(X_),l=i.length;for(let c=0;c<l;c++){const u=i[c];if(u.validator(a))return u.classGroupId}},$be=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?Pbe+r:void 0})(),Fbe=e=>{const{theme:t,classGroups:n}=e;return Bbe(n,t)},Bbe=(e,t)=>{const n=Rq();for(const r in e){const o=e[r];pR(o,n,r,t)}return n},pR=(e,t,n,r)=>{const o=e.length;for(let s=0;s<o;s++){const i=e[s];zbe(i,t,n,r)}},zbe=(e,t,n,r)=>{if(typeof e=="string"){jbe(e,t,n);return}if(typeof e=="function"){Ube(e,t,n,r);return}Hbe(e,t,n,r)},jbe=(e,t,n)=>{const r=e===""?t:Dq(t,e);r.classGroupId=n},Ube=(e,t,n,r)=>{if(Vbe(e)){pR(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(Obe(n,e))},Hbe=(e,t,n,r)=>{const o=Object.entries(e),s=o.length;for(let i=0;i<s;i++){const[a,l]=o[i];pR(l,Dq(t,a),n,r)}},Dq=(e,t)=>{let n=e;const r=t.split(X_),o=r.length;for(let s=0;s<o;s++){const i=r[s];let a=n.nextPart.get(i);a||(a=Rq(),n.nextPart.set(i,a)),n=a}return n},Vbe=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,qbe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const o=(s,i)=>{n[s]=i,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(s){let i=n[s];if(i!==void 0)return i;if((i=r[s])!==void 0)return o(s,i),i},set(s,i){s in n?n[s]=i:o(s,i)}}},bN="!",aL=":",Gbe=[],lL=(e,t,n,r,o)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:o}),Wbe=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=o=>{const s=[];let i=0,a=0,l=0,c;const u=o.length;for(let v=0;v<u;v++){const w=o[v];if(i===0&&a===0){if(w===aL){s.push(o.slice(l,v)),l=v+1;continue}if(w==="/"){c=v;continue}}w==="["?i++:w==="]"?i--:w==="("?a++:w===")"&&a--}const f=s.length===0?o:o.slice(l);let m=f,g=!1;f.endsWith(bN)?(m=f.slice(0,-1),g=!0):f.startsWith(bN)&&(m=f.slice(1),g=!0);const y=c&&c>l?c-l:void 0;return lL(s,g,m,y)};if(t){const o=t+aL,s=r;r=i=>i.startsWith(o)?s(i.slice(o.length)):lL(Gbe,!1,i,void 0,!0)}if(n){const o=r;r=s=>n({className:s,parseClassName:o})}return r},Ybe=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let o=[];for(let s=0;s<n.length;s++){const i=n[s],a=i[0]==="[",l=t.has(i);a||l?(o.length>0&&(o.sort(),r.push(...o),o=[]),r.push(i)):o.push(i)}return o.length>0&&(o.sort(),r.push(...o)),r}},Kbe=e=>({cache:qbe(e.cacheSize),parseClassName:Wbe(e),sortModifiers:Ybe(e),...Lbe(e)}),Zbe=/\s+/,Jbe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:s}=t,i=[],a=e.trim().split(Zbe);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:f,modifiers:m,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:v}=n(u);if(f){l=u+(l.length>0?" "+l:l);continue}let w=!!v,_=r(w?y.substring(0,v):y);if(!_){if(!w){l=u+(l.length>0?" "+l:l);continue}if(_=r(y),!_){l=u+(l.length>0?" "+l:l);continue}w=!1}const T=m.length===0?"":m.length===1?m[0]:s(m).join(":"),k=g?T+bN:T,M=k+_;if(i.indexOf(M)>-1)continue;i.push(M);const D=o(_,w);for(let I=0;I<D.length;++I){const P=D[I];i.push(k+P)}l=u+(l.length>0?" "+l:l)}return l},Xbe=(...e)=>{let t=0,n,r,o="";for(;t<e.length;)(n=e[t++])&&(r=Oq(n))&&(o&&(o+=" "),o+=r);return o},Oq=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Oq(e[r]))&&(n&&(n+=" "),n+=t);return n},Qbe=(e,...t)=>{let n,r,o,s;const i=l=>{const c=t.reduce((u,f)=>f(u),e());return n=Kbe(c),r=n.cache.get,o=n.cache.set,s=a,a(l)},a=l=>{const c=r(l);if(c)return c;const u=Jbe(l,n);return o(l,u),u};return s=i,(...l)=>s(Xbe(...l))},eye=[],Ci=e=>{const t=n=>n[e]||eye;return t.isThemeGetter=!0,t},Pq=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Lq=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tye=/^\d+\/\d+$/,nye=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rye=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oye=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,sye=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,iye=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zg=e=>tye.test(e),Tr=e=>!!e&&!Number.isNaN(Number(e)),qh=e=>!!e&&Number.isInteger(Number(e)),A5=e=>e.endsWith("%")&&Tr(e.slice(0,-1)),ff=e=>nye.test(e),aye=()=>!0,lye=e=>rye.test(e)&&!oye.test(e),$q=()=>!1,cye=e=>sye.test(e),uye=e=>iye.test(e),dye=e=>!gn(e)&&!bn(e),fye=e=>vb(e,zq,$q),gn=e=>Pq.test(e),Op=e=>vb(e,jq,lye),N5=e=>vb(e,bye,Tr),cL=e=>vb(e,Fq,$q),hye=e=>vb(e,Bq,uye),s2=e=>vb(e,Uq,cye),bn=e=>Lq.test(e),jy=e=>xb(e,jq),pye=e=>xb(e,yye),uL=e=>xb(e,Fq),mye=e=>xb(e,zq),gye=e=>xb(e,Bq),i2=e=>xb(e,Uq,!0),vb=(e,t,n)=>{const r=Pq.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},xb=(e,t,n=!1)=>{const r=Lq.exec(e);return r?r[1]?t(r[1]):n:!1},Fq=e=>e==="position"||e==="percentage",Bq=e=>e==="image"||e==="url",zq=e=>e==="length"||e==="size"||e==="bg-size",jq=e=>e==="length",bye=e=>e==="number",yye=e=>e==="family-name",Uq=e=>e==="shadow",vye=()=>{const e=Ci("color"),t=Ci("font"),n=Ci("text"),r=Ci("font-weight"),o=Ci("tracking"),s=Ci("leading"),i=Ci("breakpoint"),a=Ci("container"),l=Ci("spacing"),c=Ci("radius"),u=Ci("shadow"),f=Ci("inset-shadow"),m=Ci("text-shadow"),g=Ci("drop-shadow"),y=Ci("blur"),v=Ci("perspective"),w=Ci("aspect"),_=Ci("ease"),T=Ci("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...M(),bn,gn],I=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],B=()=>[bn,gn,l],U=()=>[zg,"full","auto",...B()],j=()=>[qh,"none","subgrid",bn,gn],H=()=>["auto",{span:["full",qh,bn,gn]},qh,bn,gn],q=()=>[qh,"auto",bn,gn],z=()=>["auto","min","max","fr",bn,gn],Z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],X=()=>["start","end","center","stretch","center-safe","end-safe"],J=()=>["auto",...B()],ee=()=>[zg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...B()],re=()=>[e,bn,gn],ie=()=>[...M(),uL,cL,{position:[bn,gn]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],te=()=>["auto","cover","contain",mye,fye,{size:[bn,gn]}],se=()=>[A5,jy,Op],Q=()=>["","none","full",c,bn,gn],Te=()=>["",Tr,jy,Op],ge=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>[Tr,A5,uL,cL],Fe=()=>["","none",y,bn,gn],Oe=()=>["none",Tr,bn,gn],Re=()=>["none",Tr,bn,gn],nt=()=>[Tr,bn,gn],ue=()=>[zg,"full",...B()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ff],breakpoint:[ff],color:[aye],container:[ff],"drop-shadow":[ff],ease:["in","out","in-out"],font:[dye],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ff],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ff],shadow:[ff],spacing:["px",Tr],text:[ff],"text-shadow":[ff],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",zg,gn,bn,w]}],container:["container"],columns:[{columns:[Tr,gn,bn,a]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:U()}],"inset-x":[{"inset-x":U()}],"inset-y":[{"inset-y":U()}],start:[{start:U()}],end:[{end:U()}],top:[{top:U()}],right:[{right:U()}],bottom:[{bottom:U()}],left:[{left:U()}],visibility:["visible","invisible","collapse"],z:[{z:[qh,"auto",bn,gn]}],basis:[{basis:[zg,"full","auto",a,...B()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Tr,zg,"auto","initial","none",gn]}],grow:[{grow:["",Tr,bn,gn]}],shrink:[{shrink:["",Tr,bn,gn]}],order:[{order:[qh,"first","last","none",bn,gn]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:B()}],"gap-x":[{"gap-x":B()}],"gap-y":[{"gap-y":B()}],"justify-content":[{justify:[...Z(),"normal"]}],"justify-items":[{"justify-items":[...X(),"normal"]}],"justify-self":[{"justify-self":["auto",...X()]}],"align-content":[{content:["normal",...Z()]}],"align-items":[{items:[...X(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...X(),{baseline:["","last"]}]}],"place-content":[{"place-content":Z()}],"place-items":[{"place-items":[...X(),"baseline"]}],"place-self":[{"place-self":["auto",...X()]}],p:[{p:B()}],px:[{px:B()}],py:[{py:B()}],ps:[{ps:B()}],pe:[{pe:B()}],pt:[{pt:B()}],pr:[{pr:B()}],pb:[{pb:B()}],pl:[{pl:B()}],m:[{m:J()}],mx:[{mx:J()}],my:[{my:J()}],ms:[{ms:J()}],me:[{me:J()}],mt:[{mt:J()}],mr:[{mr:J()}],mb:[{mb:J()}],ml:[{ml:J()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:ee()}],w:[{w:[a,"screen",...ee()]}],"min-w":[{"min-w":[a,"screen","none",...ee()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[i]},...ee()]}],h:[{h:["screen","lh",...ee()]}],"min-h":[{"min-h":["screen","lh","none",...ee()]}],"max-h":[{"max-h":["screen","lh",...ee()]}],"font-size":[{text:["base",n,jy,Op]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,bn,N5]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",A5,gn]}],"font-family":[{font:[pye,gn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,bn,gn]}],"line-clamp":[{"line-clamp":[Tr,"none",bn,N5]}],leading:[{leading:[s,...B()]}],"list-image":[{"list-image":["none",bn,gn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",bn,gn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:re()}],"text-color":[{text:re()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[Tr,"from-font","auto",bn,Op]}],"text-decoration-color":[{decoration:re()}],"underline-offset":[{"underline-offset":[Tr,"auto",bn,gn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",bn,gn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",bn,gn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:te()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},qh,bn,gn],radial:["",bn,gn],conic:[qh,bn,gn]},gye,hye]}],"bg-color":[{bg:re()}],"gradient-from-pos":[{from:se()}],"gradient-via-pos":[{via:se()}],"gradient-to-pos":[{to:se()}],"gradient-from":[{from:re()}],"gradient-via":[{via:re()}],"gradient-to":[{to:re()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:Te()}],"border-w-x":[{"border-x":Te()}],"border-w-y":[{"border-y":Te()}],"border-w-s":[{"border-s":Te()}],"border-w-e":[{"border-e":Te()}],"border-w-t":[{"border-t":Te()}],"border-w-r":[{"border-r":Te()}],"border-w-b":[{"border-b":Te()}],"border-w-l":[{"border-l":Te()}],"divide-x":[{"divide-x":Te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ge(),"hidden","none"]}],"divide-style":[{divide:[...ge(),"hidden","none"]}],"border-color":[{border:re()}],"border-color-x":[{"border-x":re()}],"border-color-y":[{"border-y":re()}],"border-color-s":[{"border-s":re()}],"border-color-e":[{"border-e":re()}],"border-color-t":[{"border-t":re()}],"border-color-r":[{"border-r":re()}],"border-color-b":[{"border-b":re()}],"border-color-l":[{"border-l":re()}],"divide-color":[{divide:re()}],"outline-style":[{outline:[...ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Tr,bn,gn]}],"outline-w":[{outline:["",Tr,jy,Op]}],"outline-color":[{outline:re()}],shadow:[{shadow:["","none",u,i2,s2]}],"shadow-color":[{shadow:re()}],"inset-shadow":[{"inset-shadow":["none",f,i2,s2]}],"inset-shadow-color":[{"inset-shadow":re()}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:re()}],"ring-offset-w":[{"ring-offset":[Tr,Op]}],"ring-offset-color":[{"ring-offset":re()}],"inset-ring-w":[{"inset-ring":Te()}],"inset-ring-color":[{"inset-ring":re()}],"text-shadow":[{"text-shadow":["none",m,i2,s2]}],"text-shadow-color":[{"text-shadow":re()}],opacity:[{opacity:[Tr,bn,gn]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Tr]}],"mask-image-linear-from-pos":[{"mask-linear-from":he()}],"mask-image-linear-to-pos":[{"mask-linear-to":he()}],"mask-image-linear-from-color":[{"mask-linear-from":re()}],"mask-image-linear-to-color":[{"mask-linear-to":re()}],"mask-image-t-from-pos":[{"mask-t-from":he()}],"mask-image-t-to-pos":[{"mask-t-to":he()}],"mask-image-t-from-color":[{"mask-t-from":re()}],"mask-image-t-to-color":[{"mask-t-to":re()}],"mask-image-r-from-pos":[{"mask-r-from":he()}],"mask-image-r-to-pos":[{"mask-r-to":he()}],"mask-image-r-from-color":[{"mask-r-from":re()}],"mask-image-r-to-color":[{"mask-r-to":re()}],"mask-image-b-from-pos":[{"mask-b-from":he()}],"mask-image-b-to-pos":[{"mask-b-to":he()}],"mask-image-b-from-color":[{"mask-b-from":re()}],"mask-image-b-to-color":[{"mask-b-to":re()}],"mask-image-l-from-pos":[{"mask-l-from":he()}],"mask-image-l-to-pos":[{"mask-l-to":he()}],"mask-image-l-from-color":[{"mask-l-from":re()}],"mask-image-l-to-color":[{"mask-l-to":re()}],"mask-image-x-from-pos":[{"mask-x-from":he()}],"mask-image-x-to-pos":[{"mask-x-to":he()}],"mask-image-x-from-color":[{"mask-x-from":re()}],"mask-image-x-to-color":[{"mask-x-to":re()}],"mask-image-y-from-pos":[{"mask-y-from":he()}],"mask-image-y-to-pos":[{"mask-y-to":he()}],"mask-image-y-from-color":[{"mask-y-from":re()}],"mask-image-y-to-color":[{"mask-y-to":re()}],"mask-image-radial":[{"mask-radial":[bn,gn]}],"mask-image-radial-from-pos":[{"mask-radial-from":he()}],"mask-image-radial-to-pos":[{"mask-radial-to":he()}],"mask-image-radial-from-color":[{"mask-radial-from":re()}],"mask-image-radial-to-color":[{"mask-radial-to":re()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[Tr]}],"mask-image-conic-from-pos":[{"mask-conic-from":he()}],"mask-image-conic-to-pos":[{"mask-conic-to":he()}],"mask-image-conic-from-color":[{"mask-conic-from":re()}],"mask-image-conic-to-color":[{"mask-conic-to":re()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:te()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",bn,gn]}],filter:[{filter:["","none",bn,gn]}],blur:[{blur:Fe()}],brightness:[{brightness:[Tr,bn,gn]}],contrast:[{contrast:[Tr,bn,gn]}],"drop-shadow":[{"drop-shadow":["","none",g,i2,s2]}],"drop-shadow-color":[{"drop-shadow":re()}],grayscale:[{grayscale:["",Tr,bn,gn]}],"hue-rotate":[{"hue-rotate":[Tr,bn,gn]}],invert:[{invert:["",Tr,bn,gn]}],saturate:[{saturate:[Tr,bn,gn]}],sepia:[{sepia:["",Tr,bn,gn]}],"backdrop-filter":[{"backdrop-filter":["","none",bn,gn]}],"backdrop-blur":[{"backdrop-blur":Fe()}],"backdrop-brightness":[{"backdrop-brightness":[Tr,bn,gn]}],"backdrop-contrast":[{"backdrop-contrast":[Tr,bn,gn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Tr,bn,gn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Tr,bn,gn]}],"backdrop-invert":[{"backdrop-invert":["",Tr,bn,gn]}],"backdrop-opacity":[{"backdrop-opacity":[Tr,bn,gn]}],"backdrop-saturate":[{"backdrop-saturate":[Tr,bn,gn]}],"backdrop-sepia":[{"backdrop-sepia":["",Tr,bn,gn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",bn,gn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Tr,"initial",bn,gn]}],ease:[{ease:["linear","initial",_,bn,gn]}],delay:[{delay:[Tr,bn,gn]}],animate:[{animate:["none",T,bn,gn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,bn,gn]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:Oe()}],"rotate-x":[{"rotate-x":Oe()}],"rotate-y":[{"rotate-y":Oe()}],"rotate-z":[{"rotate-z":Oe()}],scale:[{scale:Re()}],"scale-x":[{"scale-x":Re()}],"scale-y":[{"scale-y":Re()}],"scale-z":[{"scale-z":Re()}],"scale-3d":["scale-3d"],skew:[{skew:nt()}],"skew-x":[{"skew-x":nt()}],"skew-y":[{"skew-y":nt()}],transform:[{transform:[bn,gn,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ue()}],"translate-x":[{"translate-x":ue()}],"translate-y":[{"translate-y":ue()}],"translate-z":[{"translate-z":ue()}],"translate-none":["translate-none"],accent:[{accent:re()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:re()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",bn,gn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",bn,gn]}],fill:[{fill:["none",...re()]}],"stroke-w":[{stroke:[Tr,jy,Op,N5]}],stroke:[{stroke:["none",...re()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Hq=Qbe(vye);function Qe(...e){return Hq(hR(e))}const dL=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,fL=hR,mR=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return fL(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(c=>{const u=n==null?void 0:n[c],f=s==null?void 0:s[c];if(u===null)return null;const m=dL(u)||dL(f);return o[c][m]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,m]=u;return m===void 0||(c[f]=m),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:m,...g}=u;return Object.entries(g).every(y=>{let[v,w]=y;return Array.isArray(w)?w.includes({...s,...a}[v]):{...s,...a}[v]===w})?[...c,f,m]:c},[]);return fL(e,i,l,n==null?void 0:n.class,n==null?void 0:n.className)},xye=mR("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _c({className:e,variant:t,...n}){return h.jsx("div",{className:Qe(xye({variant:t}),e),...n})}function hL(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Td(...e){return t=>{let n=!1;const r=e.map(o=>{const s=hL(o,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():hL(e[o],null)}}}}function Rr(...e){return x.useCallback(Td(...e),e)}var wye=Symbol.for("react.lazy"),Q_=XI[" use ".trim().toString()];function Eye(e){return typeof e=="object"&&e!==null&&"then"in e}function Vq(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===wye&&"_payload"in e&&Eye(e._payload)}function iw(e){const t=_ye(e),n=x.forwardRef((r,o)=>{let{children:s,...i}=r;Vq(s)&&typeof Q_=="function"&&(s=Q_(s._payload));const a=x.Children.toArray(s),l=a.find(Tye);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:o,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}var Nm=iw("Slot");function _ye(e){const t=x.forwardRef((n,r)=>{let{children:o,...s}=n;if(Vq(o)&&typeof Q_=="function"&&(o=Q_(o._payload)),x.isValidElement(o)){const i=kye(o),a=Cye(s,o.props);return o.type!==x.Fragment&&(a.ref=r?Td(r,i):i),x.cloneElement(o,a)}return x.Children.count(o)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Sye=Symbol("radix.slottable");function Tye(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Sye}function Cye(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const l=s(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function kye(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const yN=mR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_r=x.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},s)=>{const i=r?Nm:"button";return h.jsx(i,{className:Qe(yN({variant:t,size:n,className:e})),ref:s,...o})});_r.displayName="Button";function wd({className:e,type:t,...n}){return h.jsx("input",{type:t,"data-slot":"input",className:Qe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function Gt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function Aye(e,t){const n=x.createContext(t),r=s=>{const{children:i,...a}=s,l=x.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:l,children:i})};r.displayName=e+"Provider";function o(s){const i=x.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,o]}function Ha(e,t=[]){let n=[];function r(s,i){const a=x.createContext(i),l=n.length;n=[...n,i];const c=f=>{var _;const{scope:m,children:g,...y}=f,v=((_=m==null?void 0:m[e])==null?void 0:_[l])||a,w=x.useMemo(()=>y,Object.values(y));return h.jsx(v.Provider,{value:w,children:g})};c.displayName=s+"Provider";function u(f,m){var v;const g=((v=m==null?void 0:m[e])==null?void 0:v[l])||a,y=x.useContext(g);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,u]}const o=()=>{const s=n.map(i=>x.createContext(i));return function(a){const l=(a==null?void 0:a[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return o.scopeName=e,[r,Nye(o,...t)]}function Nye(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function pL(e){const t=Iye(e),n=x.forwardRef((r,o)=>{const{children:s,...i}=r,a=x.Children.toArray(s),l=a.find(Mye);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:o,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function Iye(e){const t=x.forwardRef((n,r)=>{const{children:o,...s}=n;if(x.isValidElement(o)){const i=Oye(o),a=Dye(s,o.props);return o.type!==x.Fragment&&(a.ref=r?Td(r,i):i),x.cloneElement(o,a)}return x.Children.count(o)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Rye=Symbol("radix.slottable");function Mye(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Rye}function Dye(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const l=s(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function Oye(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function gR(e){const t=e+"CollectionProvider",[n,r]=Ha(t),[o,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=v=>{const{scope:w,children:_}=v,T=Me.useRef(null),k=Me.useRef(new Map).current;return h.jsx(o,{scope:w,itemMap:k,collectionRef:T,children:_})};i.displayName=t;const a=e+"CollectionSlot",l=pL(a),c=Me.forwardRef((v,w)=>{const{scope:_,children:T}=v,k=s(a,_),M=Rr(w,k.collectionRef);return h.jsx(l,{ref:M,children:T})});c.displayName=a;const u=e+"CollectionItemSlot",f="data-radix-collection-item",m=pL(u),g=Me.forwardRef((v,w)=>{const{scope:_,children:T,...k}=v,M=Me.useRef(null),D=Rr(w,M),I=s(u,_);return Me.useEffect(()=>(I.itemMap.set(M,{ref:M,...k}),()=>void I.itemMap.delete(M))),h.jsx(m,{[f]:"",ref:D,children:T})});g.displayName=u;function y(v){const w=s(e+"CollectionConsumer",v);return Me.useCallback(()=>{const T=w.collectionRef.current;if(!T)return[];const k=Array.from(T.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((I,P)=>k.indexOf(I.ref.current)-k.indexOf(P.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:c,ItemSlot:g},y,r]}var Mi=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},Pye=XI[" useId ".trim().toString()]||(()=>{}),Lye=0;function Rc(e){const[t,n]=x.useState(Pye());return Mi(()=>{n(r=>r??String(Lye++))},[e]),t?`radix-${t}`:""}var pl=FV();const bR=km(pl);function $ye(e){const t=Fye(e),n=x.forwardRef((r,o)=>{const{children:s,...i}=r,a=x.Children.toArray(s),l=a.find(zye);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:o,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function Fye(e){const t=x.forwardRef((n,r)=>{const{children:o,...s}=n;if(x.isValidElement(o)){const i=Uye(o),a=jye(s,o.props);return o.type!==x.Fragment&&(a.ref=r?Td(r,i):i),x.cloneElement(o,a)}return x.Children.count(o)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Bye=Symbol("radix.slottable");function zye(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Bye}function jye(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const l=s(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function Uye(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Hye=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pn=Hye.reduce((e,t)=>{const n=$ye(`Primitive.${t}`),r=x.forwardRef((o,s)=>{const{asChild:i,...a}=o,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function qq(e,t){e&&pl.flushSync(()=>e.dispatchEvent(t))}function vu(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}var Vye=XI[" useInsertionEffect ".trim().toString()]||Mi;function bl({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,s,i]=qye({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:o;{const u=x.useRef(e!==void 0);x.useEffect(()=>{const f=u.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=x.useCallback(u=>{var f;if(a){const m=Gye(u)?u(e):u;m!==e&&((f=i.current)==null||f.call(i,m))}else s(u)},[a,e,s,i]);return[l,c]}function qye({defaultProp:e,onChange:t}){const[n,r]=x.useState(e),o=x.useRef(n),s=x.useRef(t);return Vye(()=>{s.current=t},[t]),x.useEffect(()=>{var i;o.current!==n&&((i=s.current)==null||i.call(s,n),o.current=n)},[n,o]),[n,r,s]}function Gye(e){return typeof e=="function"}var Wye=x.createContext(void 0);function wb(e){const t=x.useContext(Wye);return e||t||"ltr"}var I5="rovingFocusGroup.onEntryFocus",Yye={bubbles:!1,cancelable:!0},aw="RovingFocusGroup",[vN,Gq,Kye]=gR(aw),[Zye,B0]=Ha(aw,[Kye]),[Jye,Xye]=Zye(aw),Wq=x.forwardRef((e,t)=>h.jsx(vN.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(vN.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(Qye,{...e,ref:t})})}));Wq.displayName=aw;var Qye=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=e,m=x.useRef(null),g=Rr(t,m),y=wb(s),[v,w]=bl({prop:i,defaultProp:a??null,onChange:l,caller:aw}),[_,T]=x.useState(!1),k=vu(c),M=Gq(n),D=x.useRef(!1),[I,P]=x.useState(0);return x.useEffect(()=>{const B=m.current;if(B)return B.addEventListener(I5,k),()=>B.removeEventListener(I5,k)},[k]),h.jsx(Jye,{scope:n,orientation:r,dir:y,loop:o,currentTabStopId:v,onItemFocus:x.useCallback(B=>w(B),[w]),onItemShiftTab:x.useCallback(()=>T(!0),[]),onFocusableItemAdd:x.useCallback(()=>P(B=>B+1),[]),onFocusableItemRemove:x.useCallback(()=>P(B=>B-1),[]),children:h.jsx(Pn.div,{tabIndex:_||I===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...e.style},onMouseDown:Gt(e.onMouseDown,()=>{D.current=!0}),onFocus:Gt(e.onFocus,B=>{const U=!D.current;if(B.target===B.currentTarget&&U&&!_){const j=new CustomEvent(I5,Yye);if(B.currentTarget.dispatchEvent(j),!j.defaultPrevented){const H=M().filter(J=>J.focusable),q=H.find(J=>J.active),z=H.find(J=>J.id===v),X=[q,z,...H].filter(Boolean).map(J=>J.ref.current);Zq(X,u)}}D.current=!1}),onBlur:Gt(e.onBlur,()=>T(!1))})})}),Yq="RovingFocusGroupItem",Kq=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,children:i,...a}=e,l=Rc(),c=s||l,u=Xye(Yq,n),f=u.currentTabStopId===c,m=Gq(n),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:v}=u;return x.useEffect(()=>{if(r)return g(),()=>y()},[r,g,y]),h.jsx(vN.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:h.jsx(Pn.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Gt(e.onMouseDown,w=>{r?u.onItemFocus(c):w.preventDefault()}),onFocus:Gt(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Gt(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const _=nve(w,u.orientation,u.dir);if(_!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let k=m().filter(M=>M.focusable).map(M=>M.ref.current);if(_==="last")k.reverse();else if(_==="prev"||_==="next"){_==="prev"&&k.reverse();const M=k.indexOf(w.currentTarget);k=u.loop?rve(k,M+1):k.slice(M+1)}setTimeout(()=>Zq(k))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:v!=null}):i})})});Kq.displayName=Yq;var eve={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tve(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function nve(e,t,n){const r=tve(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return eve[r]}function Zq(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function rve(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var y4=Wq,v4=Kq;function ove(e,t){return x.useReducer((n,r)=>t[n][r]??n,e)}var yl=e=>{const{present:t,children:n}=e,r=sve(t),o=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),s=Rr(r.ref,ive(o));return typeof n=="function"||r.isPresent?x.cloneElement(o,{ref:s}):null};yl.displayName="Presence";function sve(e){const[t,n]=x.useState(),r=x.useRef(null),o=x.useRef(e),s=x.useRef("none"),i=e?"mounted":"unmounted",[a,l]=ove(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=a2(r.current);s.current=a==="mounted"?c:"none"},[a]),Mi(()=>{const c=r.current,u=o.current;if(u!==e){const m=s.current,g=a2(c);e?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),Mi(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,f=g=>{const v=a2(r.current).includes(CSS.escape(g.animationName));if(g.target===t&&v&&(l("ANIMATION_END"),!o.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=g=>{g.target===t&&(s.current=a2(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function a2(e){return(e==null?void 0:e.animationName)||"none"}function ive(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var x4="Tabs",[ave]=Ha(x4,[B0]),Jq=B0(),[lve,yR]=ave(x4),Xq=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:s,orientation:i="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=wb(a),[f,m]=bl({prop:r,onChange:o,defaultProp:s??"",caller:x4});return h.jsx(lve,{scope:n,baseId:Rc(),value:f,onValueChange:m,orientation:i,dir:u,activationMode:l,children:h.jsx(Pn.div,{dir:u,"data-orientation":i,...c,ref:t})})});Xq.displayName=x4;var Qq="TabsList",eG=x.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,s=yR(Qq,n),i=Jq(n);return h.jsx(y4,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:r,children:h.jsx(Pn.div,{role:"tablist","aria-orientation":s.orientation,...o,ref:t})})});eG.displayName=Qq;var tG="TabsTrigger",nG=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...s}=e,i=yR(tG,n),a=Jq(n),l=oG(i.baseId,r),c=sG(i.baseId,r),u=r===i.value;return h.jsx(v4,{asChild:!0,...a,focusable:!o,active:u,children:h.jsx(Pn.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...s,ref:t,onMouseDown:Gt(e.onMouseDown,f=>{!o&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:Gt(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:Gt(e.onFocus,()=>{const f=i.activationMode!=="manual";!u&&!o&&f&&i.onValueChange(r)})})})});nG.displayName=tG;var rG="TabsContent",cve=x.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:s,...i}=e,a=yR(rG,n),l=oG(a.baseId,r),c=sG(a.baseId,r),u=r===a.value,f=x.useRef(u);return x.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),h.jsx(yl,{present:o||u,children:({present:m})=>h.jsx(Pn.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&s})})});cve.displayName=rG;function oG(e,t){return`${e}-trigger-${t}`}function sG(e,t){return`${e}-content-${t}`}var uve=Xq,dve=eG,fve=nG;function iG({className:e,...t}){return h.jsx(uve,{"data-slot":"tabs",className:Qe("flex flex-col gap-2",e),...t})}function aG({className:e,...t}){return h.jsx(dve,{"data-slot":"tabs-list",className:Qe("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function Av({className:e,...t}){return h.jsx(fve,{"data-slot":"tabs-trigger",className:Qe("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/50 inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function xN({className:e,...t}){return h.jsx("div",{"data-slot":"card",className:Qe("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6",e),...t})}function hve({className:e,...t}){return h.jsx("div",{"data-slot":"card-header",className:Qe("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-[data-slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function pve({className:e,...t}){return h.jsx("div",{"data-slot":"card-title",className:Qe("leading-none font-semibold",e),...t})}function mve({className:e,...t}){return h.jsx("div",{"data-slot":"card-description",className:Qe("text-muted-foreground text-sm",e),...t})}function wN({className:e,...t}){return h.jsx("div",{"data-slot":"card-content",className:Qe("px-6",e),...t})}function gve({className:e,...t}){return h.jsx("div",{"data-slot":"card-footer",className:Qe("flex items-center px-6 [.border-t]:pt-6",e),...t})}function bve(e,t=[]){let n=[];function r(s,i){const a=x.createContext(i);a.displayName=s+"Context";const l=n.length;n=[...n,i];const c=f=>{var _;const{scope:m,children:g,...y}=f,v=((_=m==null?void 0:m[e])==null?void 0:_[l])||a,w=x.useMemo(()=>y,Object.values(y));return h.jsx(v.Provider,{value:w,children:g})};c.displayName=s+"Provider";function u(f,m){var v;const g=((v=m==null?void 0:m[e])==null?void 0:v[l])||a,y=x.useContext(g);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,u]}const o=()=>{const s=n.map(i=>x.createContext(i));return function(a){const l=(a==null?void 0:a[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return o.scopeName=e,[r,yve(o,...t)]}function yve(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var vve=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vR=vve.reduce((e,t)=>{const n=iw(`Primitive.${t}`),r=x.forwardRef((o,s)=>{const{asChild:i,...a}=o,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),R5={exports:{}},M5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mL;function xve(){if(mL)return M5;mL=1;var e=sw();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function a(f,m){var g=m(),y=r({inst:{value:g,getSnapshot:m}}),v=y[0].inst,w=y[1];return s(function(){v.value=g,v.getSnapshot=m,l(v)&&w({inst:v})},[f,g,m]),o(function(){return l(v)&&w({inst:v}),f(function(){l(v)&&w({inst:v})})},[f]),i(g),g}function l(f){var m=f.getSnapshot;f=f.value;try{var g=m();return!n(f,g)}catch{return!0}}function c(f,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return M5.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,M5}var gL;function lG(){return gL||(gL=1,R5.exports=xve()),R5.exports}var xR=lG();function wve(){return xR.useSyncExternalStore(Eve,()=>!0,()=>!1)}function Eve(){return()=>{}}var wR="Avatar",[_ve]=bve(wR),[Sve,cG]=_ve(wR),uG=x.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,s]=x.useState("idle");return h.jsx(Sve,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:s,children:h.jsx(vR.span,{...r,ref:t})})});uG.displayName=wR;var dG="AvatarImage",fG=x.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...s}=e,i=cG(dG,n),a=Tve(r,s),l=vu(c=>{o(c),i.onImageLoadingStatusChange(c)});return Mi(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?h.jsx(vR.img,{...s,ref:t,src:r}):null});fG.displayName=dG;var hG="AvatarFallback",pG=x.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,s=cG(hG,n),[i,a]=x.useState(r===void 0);return x.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),i&&s.imageLoadingStatus!=="loaded"?h.jsx(vR.span,{...o,ref:t}):null});pG.displayName=hG;function bL(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Tve(e,{referrerPolicy:t,crossOrigin:n}){const r=wve(),o=x.useRef(null),s=r?(o.current||(o.current=new window.Image),o.current):null,[i,a]=x.useState(()=>bL(s,e));return Mi(()=>{a(bL(s,e))},[s,e]),Mi(()=>{const l=f=>()=>{a(f)};if(!s)return;const c=l("loaded"),u=l("error");return s.addEventListener("load",c),s.addEventListener("error",u),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",c),s.removeEventListener("error",u)}},[s,n,t]),i}var Cve=uG,kve=fG,Ave=pG;function yL({className:e,...t}){return h.jsx(Cve,{"data-slot":"avatar",className:Qe("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function Nve({className:e,...t}){return h.jsx(kve,{"data-slot":"avatar-image",className:Qe("aspect-square size-full object-cover",e),...t})}function vL({className:e,...t}){return h.jsx(Ave,{"data-slot":"avatar-fallback",className:Qe("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function Ive(e,t=globalThis==null?void 0:globalThis.document){const n=vu(e);x.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Rve="DismissableLayer",EN="dismissableLayer.update",Mve="dismissableLayer.pointerDownOutside",Dve="dismissableLayer.focusOutside",xL,mG=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Eb=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=e,c=x.useContext(mG),[u,f]=x.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=x.useState({}),y=Rr(t,P=>f(P)),v=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(w),T=u?v.indexOf(u):-1,k=c.layersWithOutsidePointerEventsDisabled.size>0,M=T>=_,D=Lve(P=>{const B=P.target,U=[...c.branches].some(j=>j.contains(B));!M||U||(o==null||o(P),i==null||i(P),P.defaultPrevented||a==null||a())},m),I=$ve(P=>{const B=P.target;[...c.branches].some(j=>j.contains(B))||(s==null||s(P),i==null||i(P),P.defaultPrevented||a==null||a())},m);return Ive(P=>{T===c.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},m),x.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(xL=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),wL(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=xL)}},[u,m,n,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),wL())},[u,c]),x.useEffect(()=>{const P=()=>g({});return document.addEventListener(EN,P),()=>document.removeEventListener(EN,P)},[]),h.jsx(Pn.div,{...l,ref:y,style:{pointerEvents:k?M?"auto":"none":void 0,...e.style},onFocusCapture:Gt(e.onFocusCapture,I.onFocusCapture),onBlurCapture:Gt(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Gt(e.onPointerDownCapture,D.onPointerDownCapture)})});Eb.displayName=Rve;var Ove="DismissableLayerBranch",Pve=x.forwardRef((e,t)=>{const n=x.useContext(mG),r=x.useRef(null),o=Rr(t,r);return x.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(Pn.div,{...e,ref:o})});Pve.displayName=Ove;function Lve(e,t=globalThis==null?void 0:globalThis.document){const n=vu(e),r=x.useRef(!1),o=x.useRef(()=>{});return x.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){gG(Mve,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",s),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function $ve(e,t=globalThis==null?void 0:globalThis.document){const n=vu(e),r=x.useRef(!1);return x.useEffect(()=>{const o=s=>{s.target&&!r.current&&gG(Dve,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function wL(){const e=new CustomEvent(EN);document.dispatchEvent(e)}function gG(e,t,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?qq(o,s):o.dispatchEvent(s)}const bG=["top","right","bottom","left"],EL=["start","end"],_L=bG.reduce((e,t)=>e.concat(t,t+"-"+EL[0],t+"-"+EL[1]),[]),xu=Math.min,ba=Math.max,eS=Math.round,l2=Math.floor,vd=e=>({x:e,y:e}),Fve={left:"right",right:"left",bottom:"top",top:"bottom"},Bve={start:"end",end:"start"};function _N(e,t,n){return ba(e,xu(t,n))}function wu(e,t){return typeof e=="function"?e(t):e}function Xl(e){return e.split("-")[0]}function bu(e){return e.split("-")[1]}function ER(e){return e==="x"?"y":"x"}function _R(e){return e==="y"?"height":"width"}const zve=new Set(["top","bottom"]);function pu(e){return zve.has(Xl(e))?"y":"x"}function SR(e){return ER(pu(e))}function yG(e,t,n){n===void 0&&(n=!1);const r=bu(e),o=SR(e),s=_R(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=nS(i)),[i,nS(i)]}function jve(e){const t=nS(e);return[tS(e),t,tS(t)]}function tS(e){return e.replace(/start|end/g,t=>Bve[t])}const SL=["left","right"],TL=["right","left"],Uve=["top","bottom"],Hve=["bottom","top"];function Vve(e,t,n){switch(e){case"top":case"bottom":return n?t?TL:SL:t?SL:TL;case"left":case"right":return t?Uve:Hve;default:return[]}}function qve(e,t,n,r){const o=bu(e);let s=Vve(Xl(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(tS)))),s}function nS(e){return e.replace(/left|right|bottom|top/g,t=>Fve[t])}function Gve(e){return{top:0,right:0,bottom:0,left:0,...e}}function TR(e){return typeof e!="number"?Gve(e):{top:e,right:e,bottom:e,left:e}}function z1(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function CL(e,t,n){let{reference:r,floating:o}=e;const s=pu(t),i=SR(t),a=_R(i),l=Xl(t),c=s==="y",u=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,m=r[a]/2-o[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-o.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-o.width,y:f};break;default:g={x:r.x,y:r.y}}switch(bu(t)){case"start":g[i]-=m*(n&&c?-1:1);break;case"end":g[i]+=m*(n&&c?-1:1);break}return g}const Wve=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:f}=CL(c,r,l),m=r,g={},y=0;for(let v=0;v<a.length;v++){const{name:w,fn:_}=a[v],{x:T,y:k,data:M,reset:D}=await _({x:u,y:f,initialPlacement:r,placement:m,strategy:o,middlewareData:g,rects:c,platform:i,elements:{reference:e,floating:t}});u=T??u,f=k??f,g={...g,[w]:{...g[w],...M}},D&&y<=50&&(y++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(c=D.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):D.rects),{x:u,y:f}=CL(c,m,l)),v=-1)}return{x:u,y:f,placement:m,strategy:o,middlewareData:g}};async function j1(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=wu(t,e),y=TR(g),w=a[m?f==="floating"?"reference":"floating":f],_=z1(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),T=f==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),M=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},D=z1(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:T,offsetParent:k,strategy:l}):T);return{top:(_.top-D.top+y.top)/M.y,bottom:(D.bottom-_.bottom+y.bottom)/M.y,left:(_.left-D.left+y.left)/M.x,right:(D.right-_.right+y.right)/M.x}}const Yve=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=wu(e,t)||{};if(c==null)return{};const f=TR(u),m={x:n,y:r},g=SR(o),y=_R(g),v=await i.getDimensions(c),w=g==="y",_=w?"top":"left",T=w?"bottom":"right",k=w?"clientHeight":"clientWidth",M=s.reference[y]+s.reference[g]-m[g]-s.floating[y],D=m[g]-s.reference[g],I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let P=I?I[k]:0;(!P||!await(i.isElement==null?void 0:i.isElement(I)))&&(P=a.floating[k]||s.floating[y]);const B=M/2-D/2,U=P/2-v[y]/2-1,j=xu(f[_],U),H=xu(f[T],U),q=j,z=P-v[y]-H,Z=P/2-v[y]/2+B,X=_N(q,Z,z),J=!l.arrow&&bu(o)!=null&&Z!==X&&s.reference[y]/2-(Z<q?j:H)-v[y]/2<0,ee=J?Z<q?Z-q:Z-z:0;return{[g]:m[g]+ee,data:{[g]:X,centerOffset:Z-X-ee,...J&&{alignmentOffset:ee}},reset:J}}});function Kve(e,t,n){return(e?[...n.filter(o=>bu(o)===e),...n.filter(o=>bu(o)!==e)]:n.filter(o=>Xl(o)===o)).filter(o=>e?bu(o)===e||(t?tS(o)!==o:!1):!0)}const Zve=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,o;const{rects:s,middlewareData:i,placement:a,platform:l,elements:c}=t,{crossAxis:u=!1,alignment:f,allowedPlacements:m=_L,autoAlignment:g=!0,...y}=wu(e,t),v=f!==void 0||m===_L?Kve(f||null,g,m):m,w=await j1(t,y),_=((n=i.autoPlacement)==null?void 0:n.index)||0,T=v[_];if(T==null)return{};const k=yG(T,s,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==T)return{reset:{placement:v[0]}};const M=[w[Xl(T)],w[k[0]],w[k[1]]],D=[...((r=i.autoPlacement)==null?void 0:r.overflows)||[],{placement:T,overflows:M}],I=v[_+1];if(I)return{data:{index:_+1,overflows:D},reset:{placement:I}};const P=D.map(j=>{const H=bu(j.placement);return[j.placement,H&&u?j.overflows.slice(0,2).reduce((q,z)=>q+z,0):j.overflows[0],j.overflows]}).sort((j,H)=>j[1]-H[1]),U=((o=P.filter(j=>j[2].slice(0,bu(j[0])?2:3).every(H=>H<=0))[0])==null?void 0:o[0])||P[0][0];return U!==a?{data:{index:_+1,overflows:D},reset:{placement:U}}:{}}}},Jve=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...w}=wu(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const _=Xl(o),T=pu(a),k=Xl(a)===a,M=await(l.isRTL==null?void 0:l.isRTL(c.floating)),D=m||(k||!v?[nS(a)]:jve(a)),I=y!=="none";!m&&I&&D.push(...qve(a,v,y,M));const P=[a,...D],B=await j1(t,w),U=[];let j=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&U.push(B[_]),f){const Z=yG(o,i,M);U.push(B[Z[0]],B[Z[1]])}if(j=[...j,{placement:o,overflows:U}],!U.every(Z=>Z<=0)){var H,q;const Z=(((H=s.flip)==null?void 0:H.index)||0)+1,X=P[Z];if(X&&(!(f==="alignment"?T!==pu(X):!1)||j.every(re=>pu(re.placement)===T?re.overflows[0]>0:!0)))return{data:{index:Z,overflows:j},reset:{placement:X}};let J=(q=j.filter(ee=>ee.overflows[0]<=0).sort((ee,re)=>ee.overflows[1]-re.overflows[1])[0])==null?void 0:q.placement;if(!J)switch(g){case"bestFit":{var z;const ee=(z=j.filter(re=>{if(I){const ie=pu(re.placement);return ie===T||ie==="y"}return!0}).map(re=>[re.placement,re.overflows.filter(ie=>ie>0).reduce((ie,K)=>ie+K,0)]).sort((re,ie)=>re[1]-ie[1])[0])==null?void 0:z[0];ee&&(J=ee);break}case"initialPlacement":J=a;break}if(o!==J)return{reset:{placement:J}}}return{}}}};function kL(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function AL(e){return bG.some(t=>e[t]>=0)}const Xve=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=wu(e,t);switch(r){case"referenceHidden":{const s=await j1(t,{...o,elementContext:"reference"}),i=kL(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:AL(i)}}}case"escaped":{const s=await j1(t,{...o,altBoundary:!0}),i=kL(s,n.floating);return{data:{escapedOffsets:i,escaped:AL(i)}}}default:return{}}}}};function vG(e){const t=xu(...e.map(s=>s.left)),n=xu(...e.map(s=>s.top)),r=ba(...e.map(s=>s.right)),o=ba(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:o-n}}function Qve(e){const t=e.slice().sort((o,s)=>o.y-s.y),n=[];let r=null;for(let o=0;o<t.length;o++){const s=t[o];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(o=>z1(vG(o)))}const exe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:o,platform:s,strategy:i}=t,{padding:a=2,x:l,y:c}=wu(e,t),u=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Qve(u),m=z1(vG(u)),g=TR(a);function y(){if(f.length===2&&f[0].left>f[1].right&&l!=null&&c!=null)return f.find(w=>l>w.left-g.left&&l<w.right+g.right&&c>w.top-g.top&&c<w.bottom+g.bottom)||m;if(f.length>=2){if(pu(n)==="y"){const j=f[0],H=f[f.length-1],q=Xl(n)==="top",z=j.top,Z=H.bottom,X=q?j.left:H.left,J=q?j.right:H.right,ee=J-X,re=Z-z;return{top:z,bottom:Z,left:X,right:J,width:ee,height:re,x:X,y:z}}const w=Xl(n)==="left",_=ba(...f.map(j=>j.right)),T=xu(...f.map(j=>j.left)),k=f.filter(j=>w?j.left===T:j.right===_),M=k[0].top,D=k[k.length-1].bottom,I=T,P=_,B=P-I,U=D-M;return{top:M,bottom:D,left:I,right:P,width:B,height:U,x:I,y:M}}return m}const v=await s.getElementRects({reference:{getBoundingClientRect:y},floating:r.floating,strategy:i});return o.reference.x!==v.reference.x||o.reference.y!==v.reference.y||o.reference.width!==v.reference.width||o.reference.height!==v.reference.height?{reset:{rects:v}}:{}}}},xG=new Set(["left","top"]);async function txe(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Xl(n),a=bu(n),l=pu(n)==="y",c=xG.has(i)?-1:1,u=s&&l?-1:1,f=wu(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(g=a==="end"?y*-1:y),l?{x:g*u,y:m*c}:{x:m*c,y:g*u}}const nxe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=t,l=await txe(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},rxe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:w=>{let{x:_,y:T}=w;return{x:_,y:T}}},...l}=wu(e,t),c={x:n,y:r},u=await j1(t,l),f=pu(Xl(o)),m=ER(f);let g=c[m],y=c[f];if(s){const w=m==="y"?"top":"left",_=m==="y"?"bottom":"right",T=g+u[w],k=g-u[_];g=_N(T,g,k)}if(i){const w=f==="y"?"top":"left",_=f==="y"?"bottom":"right",T=y+u[w],k=y-u[_];y=_N(T,y,k)}const v=a.fn({...t,[m]:g,[f]:y});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:s,[f]:i}}}}}},oxe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=wu(e,t),u={x:n,y:r},f=pu(o),m=ER(f);let g=u[m],y=u[f];const v=wu(a,t),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const k=m==="y"?"height":"width",M=s.reference[m]-s.floating[k]+w.mainAxis,D=s.reference[m]+s.reference[k]-w.mainAxis;g<M?g=M:g>D&&(g=D)}if(c){var _,T;const k=m==="y"?"width":"height",M=xG.has(Xl(o)),D=s.reference[f]-s.floating[k]+(M&&((_=i.offset)==null?void 0:_[f])||0)+(M?0:w.crossAxis),I=s.reference[f]+s.reference[k]+(M?0:((T=i.offset)==null?void 0:T[f])||0)-(M?w.crossAxis:0);y<D?y=D:y>I&&(y=I)}return{[m]:g,[f]:y}}}},sxe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:i,elements:a}=t,{apply:l=()=>{},...c}=wu(e,t),u=await j1(t,c),f=Xl(o),m=bu(o),g=pu(o)==="y",{width:y,height:v}=s.floating;let w,_;f==="top"||f==="bottom"?(w=f,_=m===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(_=f,w=m==="end"?"top":"bottom");const T=v-u.top-u.bottom,k=y-u.left-u.right,M=xu(v-u[w],T),D=xu(y-u[_],k),I=!t.middlewareData.shift;let P=M,B=D;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(B=k),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(P=T),I&&!m){const j=ba(u.left,0),H=ba(u.right,0),q=ba(u.top,0),z=ba(u.bottom,0);g?B=y-2*(j!==0||H!==0?j+H:ba(u.left,u.right)):P=v-2*(q!==0||z!==0?q+z:ba(u.top,u.bottom))}await l({...t,availableWidth:B,availableHeight:P});const U=await i.getDimensions(a.floating);return y!==U.width||v!==U.height?{reset:{rects:!0}}:{}}}};function w4(){return typeof window<"u"}function _b(e){return wG(e)?(e.nodeName||"").toLowerCase():"#document"}function Yl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Cd(e){var t;return(t=(wG(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function wG(e){return w4()?e instanceof Node||e instanceof Yl(e).Node:!1}function Eu(e){return w4()?e instanceof Element||e instanceof Yl(e).Element:!1}function Ed(e){return w4()?e instanceof HTMLElement||e instanceof Yl(e).HTMLElement:!1}function NL(e){return!w4()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Yl(e).ShadowRoot}const ixe=new Set(["inline","contents"]);function lw(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=_u(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!ixe.has(o)}const axe=new Set(["table","td","th"]);function lxe(e){return axe.has(_b(e))}const cxe=[":popover-open",":modal"];function E4(e){return cxe.some(t=>{try{return e.matches(t)}catch{return!1}})}const uxe=["transform","translate","scale","rotate","perspective"],dxe=["transform","translate","scale","rotate","perspective","filter"],fxe=["paint","layout","strict","content"];function CR(e){const t=kR(),n=Eu(e)?_u(e):e;return uxe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||dxe.some(r=>(n.willChange||"").includes(r))||fxe.some(r=>(n.contain||"").includes(r))}function hxe(e){let t=S0(e);for(;Ed(t)&&!U1(t);){if(CR(t))return t;if(E4(t))return null;t=S0(t)}return null}function kR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const pxe=new Set(["html","body","#document"]);function U1(e){return pxe.has(_b(e))}function _u(e){return Yl(e).getComputedStyle(e)}function _4(e){return Eu(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function S0(e){if(_b(e)==="html")return e;const t=e.assignedSlot||e.parentNode||NL(e)&&e.host||Cd(e);return NL(t)?t.host:t}function EG(e){const t=S0(e);return U1(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ed(t)&&lw(t)?t:EG(t)}function lx(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=EG(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=Yl(o);if(s){const a=SN(i);return t.concat(i,i.visualViewport||[],lw(o)?o:[],a&&n?lx(a):[])}return t.concat(o,lx(o,[],n))}function SN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _G(e){const t=_u(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Ed(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,a=eS(n)!==s||eS(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function AR(e){return Eu(e)?e:e.contextElement}function _1(e){const t=AR(e);if(!Ed(t))return vd(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=_G(t);let i=(s?eS(n.width):n.width)/r,a=(s?eS(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const mxe=vd(0);function SG(e){const t=Yl(e);return!kR()||!t.visualViewport?mxe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function gxe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Yl(e)?!1:t}function cm(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=AR(e);let i=vd(1);t&&(r?Eu(r)&&(i=_1(r)):i=_1(e));const a=gxe(s,n,r)?SG(s):vd(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,u=o.width/i.x,f=o.height/i.y;if(s){const m=Yl(s),g=r&&Eu(r)?Yl(r):r;let y=m,v=SN(y);for(;v&&r&&g!==y;){const w=_1(v),_=v.getBoundingClientRect(),T=_u(v),k=_.left+(v.clientLeft+parseFloat(T.paddingLeft))*w.x,M=_.top+(v.clientTop+parseFloat(T.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,f*=w.y,l+=k,c+=M,y=Yl(v),v=SN(y)}}return z1({width:u,height:f,x:l,y:c})}function S4(e,t){const n=_4(e).scrollLeft;return t?t.left+n:cm(Cd(e)).left+n}function TG(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-S4(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function bxe(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",i=Cd(r),a=t?E4(t.floating):!1;if(r===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=vd(1);const u=vd(0),f=Ed(r);if((f||!f&&!s)&&((_b(r)!=="body"||lw(i))&&(l=_4(r)),Ed(r))){const g=cm(r);c=_1(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const m=i&&!f&&!s?TG(i,l):vd(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:n.y*c.y-l.scrollTop*c.y+u.y+m.y}}function yxe(e){return Array.from(e.getClientRects())}function vxe(e){const t=Cd(e),n=_4(e),r=e.ownerDocument.body,o=ba(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ba(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+S4(e);const a=-n.scrollTop;return _u(r).direction==="rtl"&&(i+=ba(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}const IL=25;function xxe(e,t){const n=Yl(e),r=Cd(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const u=kR();(!u||u&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}const c=S4(r);if(c<=0){const u=r.ownerDocument,f=u.body,m=getComputedStyle(f),g=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,y=Math.abs(r.clientWidth-f.clientWidth-g);y<=IL&&(s-=y)}else c<=IL&&(s+=c);return{width:s,height:i,x:a,y:l}}const wxe=new Set(["absolute","fixed"]);function Exe(e,t){const n=cm(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=Ed(e)?_1(e):vd(1),i=e.clientWidth*s.x,a=e.clientHeight*s.y,l=o*s.x,c=r*s.y;return{width:i,height:a,x:l,y:c}}function RL(e,t,n){let r;if(t==="viewport")r=xxe(e,n);else if(t==="document")r=vxe(Cd(e));else if(Eu(t))r=Exe(t,n);else{const o=SG(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return z1(r)}function CG(e,t){const n=S0(e);return n===t||!Eu(n)||U1(n)?!1:_u(n).position==="fixed"||CG(n,t)}function _xe(e,t){const n=t.get(e);if(n)return n;let r=lx(e,[],!1).filter(a=>Eu(a)&&_b(a)!=="body"),o=null;const s=_u(e).position==="fixed";let i=s?S0(e):e;for(;Eu(i)&&!U1(i);){const a=_u(i),l=CR(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&wxe.has(o.position)||lw(i)&&!l&&CG(e,i))?r=r.filter(u=>u!==i):o=a,i=S0(i)}return t.set(e,r),r}function Sxe(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?E4(t)?[]:_xe(t,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const f=RL(t,u,o);return c.top=ba(f.top,c.top),c.right=xu(f.right,c.right),c.bottom=xu(f.bottom,c.bottom),c.left=ba(f.left,c.left),c},RL(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Txe(e){const{width:t,height:n}=_G(e);return{width:t,height:n}}function Cxe(e,t,n){const r=Ed(t),o=Cd(t),s=n==="fixed",i=cm(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=vd(0);function c(){l.x=S4(o)}if(r||!r&&!s)if((_b(t)!=="body"||lw(o))&&(a=_4(t)),r){const g=cm(t,!0,s,t);l.x=g.x+t.clientLeft,l.y=g.y+t.clientTop}else o&&c();s&&!r&&o&&c();const u=o&&!r&&!s?TG(o,a):vd(0),f=i.left+a.scrollLeft-l.x-u.x,m=i.top+a.scrollTop-l.y-u.y;return{x:f,y:m,width:i.width,height:i.height}}function D5(e){return _u(e).position==="static"}function ML(e,t){if(!Ed(e)||_u(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Cd(e)===n&&(n=n.ownerDocument.body),n}function kG(e,t){const n=Yl(e);if(E4(e))return n;if(!Ed(e)){let o=S0(e);for(;o&&!U1(o);){if(Eu(o)&&!D5(o))return o;o=S0(o)}return n}let r=ML(e,t);for(;r&&lxe(r)&&D5(r);)r=ML(r,t);return r&&U1(r)&&D5(r)&&!CR(r)?n:r||hxe(e)||n}const kxe=async function(e){const t=this.getOffsetParent||kG,n=this.getDimensions,r=await n(e.floating);return{reference:Cxe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Axe(e){return _u(e).direction==="rtl"}const Nxe={convertOffsetParentRelativeRectToViewportRelativeRect:bxe,getDocumentElement:Cd,getClippingRect:Sxe,getOffsetParent:kG,getElementRects:kxe,getClientRects:yxe,getDimensions:Txe,getScale:_1,isElement:Eu,isRTL:Axe};function AG(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ixe(e,t){let n=null,r;const o=Cd(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:f,width:m,height:g}=c;if(a||t(),!m||!g)return;const y=l2(f),v=l2(o.clientWidth-(u+m)),w=l2(o.clientHeight-(f+g)),_=l2(u),k={rootMargin:-y+"px "+-v+"px "+-w+"px "+-_+"px",threshold:ba(0,xu(1,l))||1};let M=!0;function D(I){const P=I[0].intersectionRatio;if(P!==l){if(!M)return i();P?i(!1,P):r=setTimeout(()=>{i(!1,1e-7)},1e3)}P===1&&!AG(c,e.getBoundingClientRect())&&i(),M=!1}try{n=new IntersectionObserver(D,{...k,root:o.ownerDocument})}catch{n=new IntersectionObserver(D,k)}n.observe(e)}return i(!0),s}function Rxe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=AR(e),u=o||s?[...c?lx(c):[],...lx(t)]:[];u.forEach(_=>{o&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const f=c&&a?Ixe(c,n):null;let m=-1,g=null;i&&(g=new ResizeObserver(_=>{let[T]=_;T&&T.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var k;(k=g)==null||k.observe(t)})),n()}),c&&!l&&g.observe(c),g.observe(t));let y,v=l?cm(e):null;l&&w();function w(){const _=cm(e);v&&!AG(v,_)&&n(),v=_,y=requestAnimationFrame(w)}return n(),()=>{var _;u.forEach(T=>{o&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const NR=nxe,NG=Zve,IR=rxe,RR=Jve,MR=sxe,DR=Xve,rS=Yve,IG=exe,Mxe=oxe,OR=(e,t,n)=>{const r=new Map,o={platform:Nxe,...n},s={...o.platform,_c:r};return Wve(e,t,{...o,platform:s})};var Dxe=typeof document<"u",Oxe=function(){},E_=Dxe?x.useLayoutEffect:Oxe;function oS(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!oS(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!oS(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function RG(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function DL(e,t){const n=RG(e);return Math.round(t*n)/n}function O5(e){const t=x.useRef(e);return E_(()=>{t.current=e}),t}function Pxe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,f]=x.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=x.useState(r);oS(m,r)||g(r);const[y,v]=x.useState(null),[w,_]=x.useState(null),T=x.useCallback(re=>{re!==I.current&&(I.current=re,v(re))},[]),k=x.useCallback(re=>{re!==P.current&&(P.current=re,_(re))},[]),M=s||y,D=i||w,I=x.useRef(null),P=x.useRef(null),B=x.useRef(u),U=l!=null,j=O5(l),H=O5(o),q=O5(c),z=x.useCallback(()=>{if(!I.current||!P.current)return;const re={placement:t,strategy:n,middleware:m};H.current&&(re.platform=H.current),OR(I.current,P.current,re).then(ie=>{const K={...ie,isPositioned:q.current!==!1};Z.current&&!oS(B.current,K)&&(B.current=K,pl.flushSync(()=>{f(K)}))})},[m,t,n,H,q]);E_(()=>{c===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,f(re=>({...re,isPositioned:!1})))},[c]);const Z=x.useRef(!1);E_(()=>(Z.current=!0,()=>{Z.current=!1}),[]),E_(()=>{if(M&&(I.current=M),D&&(P.current=D),M&&D){if(j.current)return j.current(M,D,z);z()}},[M,D,z,j,U]);const X=x.useMemo(()=>({reference:I,floating:P,setReference:T,setFloating:k}),[T,k]),J=x.useMemo(()=>({reference:M,floating:D}),[M,D]),ee=x.useMemo(()=>{const re={position:n,left:0,top:0};if(!J.floating)return re;const ie=DL(J.floating,u.x),K=DL(J.floating,u.y);return a?{...re,transform:"translate("+ie+"px, "+K+"px)",...RG(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:K}},[n,a,J.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:z,refs:X,elements:J,floatingStyles:ee}),[u,z,X,J,ee])}const Lxe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?rS({element:r.current,padding:o}).fn(n):{}:r?rS({element:r,padding:o}).fn(n):{}}}},$xe=(e,t)=>({...NR(e),options:[e,t]}),Fxe=(e,t)=>({...IR(e),options:[e,t]}),Bxe=(e,t)=>({...Mxe(e),options:[e,t]}),zxe=(e,t)=>({...RR(e),options:[e,t]}),jxe=(e,t)=>({...MR(e),options:[e,t]}),Uxe=(e,t)=>({...DR(e),options:[e,t]}),Hxe=(e,t)=>({...Lxe(e),options:[e,t]});var Vxe="Arrow",MG=x.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...s}=e;return h.jsx(Pn.svg,{...s,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});MG.displayName=Vxe;var qxe=MG;function T4(e){const[t,n]=x.useState(void 0);return Mi(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var PR="Popper",[DG,z0]=Ha(PR),[Gxe,OG]=DG(PR),PG=e=>{const{__scopePopper:t,children:n}=e,[r,o]=x.useState(null);return h.jsx(Gxe,{scope:t,anchor:r,onAnchorChange:o,children:n})};PG.displayName=PR;var LG="PopperAnchor",$G=x.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,s=OG(LG,n),i=x.useRef(null),a=Rr(t,i),l=x.useRef(null);return x.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||i.current,c!==l.current&&s.onAnchorChange(l.current)}),r?null:h.jsx(Pn.div,{...o,ref:a})});$G.displayName=LG;var LR="PopperContent",[Wxe,Yxe]=DG(LR),FG=x.forwardRef((e,t)=>{var he,Fe,Oe,Re,nt,ue;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:y,...v}=e,w=OG(LR,n),[_,T]=x.useState(null),k=Rr(t,et=>T(et)),[M,D]=x.useState(null),I=T4(M),P=(I==null?void 0:I.width)??0,B=(I==null?void 0:I.height)??0,U=r+(s!=="center"?"-"+s:""),j=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},H=Array.isArray(c)?c:[c],q=H.length>0,z={padding:j,boundary:H.filter(Zxe),altBoundary:q},{refs:Z,floatingStyles:X,placement:J,isPositioned:ee,middlewareData:re}=Pxe({strategy:"fixed",placement:U,whileElementsMounted:(...et)=>Rxe(...et,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[$xe({mainAxis:o+B,alignmentAxis:i}),l&&Fxe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Bxe():void 0,...z}),l&&zxe({...z}),jxe({...z,apply:({elements:et,rects:ut,availableWidth:Yt,availableHeight:Ht})=>{const{width:Pt,height:tn}=ut.reference,vt=et.floating.style;vt.setProperty("--radix-popper-available-width",`${Yt}px`),vt.setProperty("--radix-popper-available-height",`${Ht}px`),vt.setProperty("--radix-popper-anchor-width",`${Pt}px`),vt.setProperty("--radix-popper-anchor-height",`${tn}px`)}}),M&&Hxe({element:M,padding:a}),Jxe({arrowWidth:P,arrowHeight:B}),m&&Uxe({strategy:"referenceHidden",...z})]}),[ie,K]=jG(J),te=vu(y);Mi(()=>{ee&&(te==null||te())},[ee,te]);const se=(he=re.arrow)==null?void 0:he.x,Q=(Fe=re.arrow)==null?void 0:Fe.y,Te=((Oe=re.arrow)==null?void 0:Oe.centerOffset)!==0,[ge,Ce]=x.useState();return Mi(()=>{_&&Ce(window.getComputedStyle(_).zIndex)},[_]),h.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:ee?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[(Re=re.transformOrigin)==null?void 0:Re.x,(nt=re.transformOrigin)==null?void 0:nt.y].join(" "),...((ue=re.hide)==null?void 0:ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(Wxe,{scope:n,placedSide:ie,onArrowChange:D,arrowX:se,arrowY:Q,shouldHideArrow:Te,children:h.jsx(Pn.div,{"data-side":ie,"data-align":K,...v,ref:k,style:{...v.style,animation:ee?void 0:"none"}})})})});FG.displayName=LR;var BG="PopperArrow",Kxe={top:"bottom",right:"left",bottom:"top",left:"right"},zG=x.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,s=Yxe(BG,r),i=Kxe[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(qxe,{...o,ref:n,style:{...o.style,display:"block"}})})});zG.displayName=BG;function Zxe(e){return e!==null}var Jxe=e=>({name:"transformOrigin",options:e,fn(t){var w,_,T;const{placement:n,rects:r,middlewareData:o}=t,i=((w=o.arrow)==null?void 0:w.centerOffset)!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[c,u]=jG(n),f={start:"0%",center:"50%",end:"100%"}[u],m=(((_=o.arrow)==null?void 0:_.x)??0)+a/2,g=(((T=o.arrow)==null?void 0:T.y)??0)+l/2;let y="",v="";return c==="bottom"?(y=i?f:`${m}px`,v=`${-l}px`):c==="top"?(y=i?f:`${m}px`,v=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,v=i?f:`${g}px`):c==="left"&&(y=`${r.floating.width+l}px`,v=i?f:`${g}px`),{data:{x:y,y:v}}}});function jG(e){const[t,n="center"]=e.split("-");return[t,n]}var C4=PG,cw=$G,k4=FG,A4=zG,Xxe="Portal",uw=x.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[o,s]=x.useState(!1);Mi(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?bR.createPortal(h.jsx(Pn.div,{...r,ref:t}),i):null});uw.displayName=Xxe;var Qxe=Symbol("radix.slottable");function ewe(e){const t=({children:n})=>h.jsx(h.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Qxe,t}var UG=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),twe="VisuallyHidden",HG=x.forwardRef((e,t)=>h.jsx(Pn.span,{...e,ref:t,style:{...UG,...e.style}}));HG.displayName=twe;var nwe=HG,[N4]=Ha("Tooltip",[z0]),I4=z0(),VG="TooltipProvider",rwe=700,TN="tooltip.open",[owe,$R]=N4(VG),qG=e=>{const{__scopeTooltip:t,delayDuration:n=rwe,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=e,i=x.useRef(!0),a=x.useRef(!1),l=x.useRef(0);return x.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),h.jsx(owe,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:x.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:x.useCallback(c=>{a.current=c},[]),disableHoverableContent:o,children:s})};qG.displayName=VG;var cx="Tooltip",[swe,R4]=N4(cx),GG=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o,onOpenChange:s,disableHoverableContent:i,delayDuration:a}=e,l=$R(cx,e.__scopeTooltip),c=I4(t),[u,f]=x.useState(null),m=Rc(),g=x.useRef(0),y=i??l.disableHoverableContent,v=a??l.delayDuration,w=x.useRef(!1),[_,T]=bl({prop:r,defaultProp:o??!1,onChange:P=>{P?(l.onOpen(),document.dispatchEvent(new CustomEvent(TN))):l.onClose(),s==null||s(P)},caller:cx}),k=x.useMemo(()=>_?w.current?"delayed-open":"instant-open":"closed",[_]),M=x.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w.current=!1,T(!0)},[T]),D=x.useCallback(()=>{window.clearTimeout(g.current),g.current=0,T(!1)},[T]),I=x.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{w.current=!0,T(!0),g.current=0},v)},[v,T]);return x.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),h.jsx(C4,{...c,children:h.jsx(swe,{scope:t,contentId:m,open:_,stateAttribute:k,trigger:u,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{l.isOpenDelayedRef.current?I():M()},[l.isOpenDelayedRef,I,M]),onTriggerLeave:x.useCallback(()=>{y?D():(window.clearTimeout(g.current),g.current=0)},[D,y]),onOpen:M,onClose:D,disableHoverableContent:y,children:n})})};GG.displayName=cx;var CN="TooltipTrigger",WG=x.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=R4(CN,n),s=$R(CN,n),i=I4(n),a=x.useRef(null),l=Rr(t,a,o.onTriggerChange),c=x.useRef(!1),u=x.useRef(!1),f=x.useCallback(()=>c.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),h.jsx(cw,{asChild:!0,...i,children:h.jsx(Pn.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:Gt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:Gt(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:Gt(e.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Gt(e.onFocus,()=>{c.current||o.onOpen()}),onBlur:Gt(e.onBlur,o.onClose),onClick:Gt(e.onClick,o.onClose)})})});WG.displayName=CN;var iwe="TooltipPortal",[Ift,awe]=N4(iwe,{forceMount:void 0}),H1="TooltipContent",YG=x.forwardRef((e,t)=>{const n=awe(H1,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=e,i=R4(H1,e.__scopeTooltip);return h.jsx(yl,{present:r||i.open,children:i.disableHoverableContent?h.jsx(KG,{side:o,...s,ref:t}):h.jsx(lwe,{side:o,...s,ref:t})})}),lwe=x.forwardRef((e,t)=>{const n=R4(H1,e.__scopeTooltip),r=$R(H1,e.__scopeTooltip),o=x.useRef(null),s=Rr(t,o),[i,a]=x.useState(null),{trigger:l,onClose:c}=n,u=o.current,{onPointerInTransitChange:f}=r,m=x.useCallback(()=>{a(null),f(!1)},[f]),g=x.useCallback((y,v)=>{const w=y.currentTarget,_={x:y.clientX,y:y.clientY},T=hwe(_,w.getBoundingClientRect()),k=pwe(_,T),M=mwe(v.getBoundingClientRect()),D=bwe([...k,...M]);a(D),f(!0)},[f]);return x.useEffect(()=>()=>m(),[m]),x.useEffect(()=>{if(l&&u){const y=w=>g(w,u),v=w=>g(w,l);return l.addEventListener("pointerleave",y),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",v)}}},[l,u,g,m]),x.useEffect(()=>{if(i){const y=v=>{const w=v.target,_={x:v.clientX,y:v.clientY},T=(l==null?void 0:l.contains(w))||(u==null?void 0:u.contains(w)),k=!gwe(_,i);T?m():k&&(m(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,u,i,c,m]),h.jsx(KG,{...e,ref:s})}),[cwe,uwe]=N4(cx,{isInside:!1}),dwe=ewe("TooltipContent"),KG=x.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...a}=e,l=R4(H1,n),c=I4(n),{onClose:u}=l;return x.useEffect(()=>(document.addEventListener(TN,u),()=>document.removeEventListener(TN,u)),[u]),x.useEffect(()=>{if(l.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),h.jsx(Eb,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:h.jsxs(k4,{"data-state":l.stateAttribute,...c,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(dwe,{children:r}),h.jsx(cwe,{scope:n,isInside:!0,children:h.jsx(nwe,{id:l.contentId,role:"tooltip",children:o||r})})]})})});YG.displayName=H1;var ZG="TooltipArrow",fwe=x.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=I4(n);return uwe(ZG,n).isInside?null:h.jsx(A4,{...o,...r,ref:t})});fwe.displayName=ZG;function hwe(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function pwe(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function mwe(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function gwe(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s],l=t[i],c=a.x,u=a.y,f=l.x,m=l.y;u>r!=m>r&&n<(f-c)*(r-u)/(m-u)+c&&(o=!o)}return o}function bwe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),ywe(t)}function ywe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const s=t[t.length-1],i=t[t.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var vwe=qG,xwe=GG,wwe=WG,JG=YG;const V1=vwe,q1=xwe,G1=wwe,um=x.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(JG,{ref:r,sideOffset:t,className:Qe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));um.displayName=JG.displayName;var Ewe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_we=Ewe.reduce((e,t)=>{const n=iw(`Primitive.${t}`),r=x.forwardRef((o,s)=>{const{asChild:i,...a}=o,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Swe="Separator",OL="horizontal",Twe=["horizontal","vertical"],XG=x.forwardRef((e,t)=>{const{decorative:n,orientation:r=OL,...o}=e,s=Cwe(r)?r:OL,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return h.jsx(_we.div,{"data-orientation":s,...a,...o,ref:t})});XG.displayName=Swe;function Cwe(e){return Twe.includes(e)}var QG=XG;const Bf=x.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>h.jsx(QG,{ref:o,decorative:n,orientation:t,className:Qe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Bf.displayName=QG.displayName;var P5="focusScope.autoFocusOnMount",L5="focusScope.autoFocusOnUnmount",PL={bubbles:!1,cancelable:!0},kwe="FocusScope",dw=x.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=e,[a,l]=x.useState(null),c=vu(o),u=vu(s),f=x.useRef(null),m=Rr(t,v=>l(v)),g=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let v=function(k){if(g.paused||!a)return;const M=k.target;a.contains(M)?f.current=M:Jh(f.current,{select:!0})},w=function(k){if(g.paused||!a)return;const M=k.relatedTarget;M!==null&&(a.contains(M)||Jh(f.current,{select:!0}))},_=function(k){if(document.activeElement===document.body)for(const D of k)D.removedNodes.length>0&&Jh(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const T=new MutationObserver(_);return a&&T.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),T.disconnect()}}},[r,a,g.paused]),x.useEffect(()=>{if(a){$L.add(g);const v=document.activeElement;if(!a.contains(v)){const _=new CustomEvent(P5,PL);a.addEventListener(P5,c),a.dispatchEvent(_),_.defaultPrevented||(Awe(Dwe(eW(a)),{select:!0}),document.activeElement===v&&Jh(a))}return()=>{a.removeEventListener(P5,c),setTimeout(()=>{const _=new CustomEvent(L5,PL);a.addEventListener(L5,u),a.dispatchEvent(_),_.defaultPrevented||Jh(v??document.body,{select:!0}),a.removeEventListener(L5,u),$L.remove(g)},0)}}},[a,c,u,g]);const y=x.useCallback(v=>{if(!n&&!r||g.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,_=document.activeElement;if(w&&_){const T=v.currentTarget,[k,M]=Nwe(T);k&&M?!v.shiftKey&&_===M?(v.preventDefault(),n&&Jh(k,{select:!0})):v.shiftKey&&_===k&&(v.preventDefault(),n&&Jh(M,{select:!0})):_===T&&v.preventDefault()}},[n,r,g.paused]);return h.jsx(Pn.div,{tabIndex:-1,...i,ref:m,onKeyDown:y})});dw.displayName=kwe;function Awe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Jh(r,{select:t}),document.activeElement!==n)return}function Nwe(e){const t=eW(e),n=LL(t,e),r=LL(t.reverse(),e);return[n,r]}function eW(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function LL(e,t){for(const n of e)if(!Iwe(n,{upTo:t}))return n}function Iwe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Rwe(e){return e instanceof HTMLInputElement&&"select"in e}function Jh(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Rwe(e)&&t&&e.select()}}var $L=Mwe();function Mwe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=FL(e,t),e.unshift(t)},remove(t){var n;e=FL(e,t),(n=e[0])==null||n.resume()}}}function FL(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Dwe(e){return e.filter(t=>t.tagName!=="A")}var $5=0;function M4(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??BL()),document.body.insertAdjacentElement("beforeend",e[1]??BL()),$5++,()=>{$5===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),$5--}},[])}function BL(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var hd=function(){return hd=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},hd.apply(this,arguments)};function tW(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function Owe(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var __="right-scroll-bar-position",S_="width-before-scroll-bar",Pwe="with-scroll-bars-hidden",Lwe="--removed-body-scroll-bar-size";function F5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function $we(e,t){var n=x.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var Fwe=typeof window<"u"?x.useLayoutEffect:x.useEffect,zL=new WeakMap;function Bwe(e,t){var n=$we(null,function(r){return e.forEach(function(o){return F5(o,r)})});return Fwe(function(){var r=zL.get(n);if(r){var o=new Set(r),s=new Set(e),i=n.current;o.forEach(function(a){s.has(a)||F5(a,null)}),s.forEach(function(a){o.has(a)||F5(a,i)})}zL.set(n,e)},[e]),n}function zwe(e){return e}function jwe(e,t){t===void 0&&(t=zwe);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var i=t(s,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var l=function(){var u=i;i=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){i.push(u),c()},filter:function(u){return i=i.filter(u),n}}}};return o}function Uwe(e){e===void 0&&(e={});var t=jwe(null);return t.options=hd({async:!0,ssr:!1},e),t}var nW=function(e){var t=e.sideCar,n=tW(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,hd({},n))};nW.isSideCarExport=!0;function Hwe(e,t){return e.useMedium(t),nW}var rW=Uwe(),B5=function(){},D4=x.forwardRef(function(e,t){var n=x.useRef(null),r=x.useState({onScrollCapture:B5,onWheelCapture:B5,onTouchMoveCapture:B5}),o=r[0],s=r[1],i=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,f=e.shards,m=e.sideCar,g=e.noRelative,y=e.noIsolation,v=e.inert,w=e.allowPinchZoom,_=e.as,T=_===void 0?"div":_,k=e.gapMode,M=tW(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=m,I=Bwe([n,t]),P=hd(hd({},M),o);return x.createElement(x.Fragment,null,u&&x.createElement(D,{sideCar:rW,removeScrollBar:c,shards:f,noRelative:g,noIsolation:y,inert:v,setCallbacks:s,allowPinchZoom:!!w,lockRef:n,gapMode:k}),i?x.cloneElement(x.Children.only(a),hd(hd({},P),{ref:I})):x.createElement(T,hd({},P,{className:l,ref:I}),a))});D4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};D4.classNames={fullWidth:S_,zeroRight:__};var Vwe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qwe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Vwe();return t&&e.setAttribute("nonce",t),e}function Gwe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Wwe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ywe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=qwe())&&(Gwe(t,n),Wwe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Kwe=function(){var e=Ywe();return function(t,n){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},oW=function(){var e=Kwe(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},Zwe={left:0,top:0,right:0,gap:0},z5=function(e){return parseInt(e||"",10)||0},Jwe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[z5(n),z5(r),z5(o)]},Xwe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Zwe;var t=Jwe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Qwe=oW(),S1="data-scroll-locked",eEe=function(e,t,n,r){var o=e.left,s=e.top,i=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Pwe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(S1,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(__,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(S_,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(__," .").concat(__,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(S_," .").concat(S_,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(S1,`] {
    `).concat(Lwe,": ").concat(a,`px;
  }
`)},jL=function(){var e=parseInt(document.body.getAttribute(S1)||"0",10);return isFinite(e)?e:0},tEe=function(){x.useEffect(function(){return document.body.setAttribute(S1,(jL()+1).toString()),function(){var e=jL()-1;e<=0?document.body.removeAttribute(S1):document.body.setAttribute(S1,e.toString())}},[])},nEe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;tEe();var s=x.useMemo(function(){return Xwe(o)},[o]);return x.createElement(Qwe,{styles:eEe(s,!t,o,n?"":"!important")})},kN=!1;if(typeof window<"u")try{var c2=Object.defineProperty({},"passive",{get:function(){return kN=!0,!0}});window.addEventListener("test",c2,c2),window.removeEventListener("test",c2,c2)}catch{kN=!1}var jg=kN?{passive:!1}:!1,rEe=function(e){return e.tagName==="TEXTAREA"},sW=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!rEe(e)&&n[t]==="visible")},oEe=function(e){return sW(e,"overflowY")},sEe=function(e){return sW(e,"overflowX")},UL=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=iW(e,r);if(o){var s=aW(e,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},iEe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},aEe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},iW=function(e,t){return e==="v"?oEe(t):sEe(t)},aW=function(e,t){return e==="v"?iEe(t):aEe(t)},lEe=function(e,t){return e==="h"&&t==="rtl"?-1:1},cEe=function(e,t,n,r,o){var s=lEe(e,window.getComputedStyle(t).direction),i=s*r,a=n.target,l=t.contains(a),c=!1,u=i>0,f=0,m=0;do{if(!a)break;var g=aW(e,a),y=g[0],v=g[1],w=g[2],_=v-w-s*y;(y||_)&&iW(e,a)&&(f+=_,m+=y);var T=a.parentNode;a=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(f)<1||!u&&Math.abs(m)<1)&&(c=!0),c},u2=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},HL=function(e){return[e.deltaX,e.deltaY]},VL=function(e){return e&&"current"in e?e.current:e},uEe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},dEe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},fEe=0,Ug=[];function hEe(e){var t=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),o=x.useState(fEe++)[0],s=x.useState(oW)[0],i=x.useRef(e);x.useEffect(function(){i.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var v=Owe([e.lockRef.current],(e.shards||[]).map(VL),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=x.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var _=u2(v),T=n.current,k="deltaX"in v?v.deltaX:T[0]-_[0],M="deltaY"in v?v.deltaY:T[1]-_[1],D,I=v.target,P=Math.abs(k)>Math.abs(M)?"h":"v";if("touches"in v&&P==="h"&&I.type==="range")return!1;var B=window.getSelection(),U=B&&B.anchorNode,j=U?U===I||U.contains(I):!1;if(j)return!1;var H=UL(P,I);if(!H)return!0;if(H?D=P:(D=P==="v"?"h":"v",H=UL(P,I)),!H)return!1;if(!r.current&&"changedTouches"in v&&(k||M)&&(r.current=D),!D)return!0;var q=r.current||D;return cEe(q,w,v,q==="h"?k:M)},[]),l=x.useCallback(function(v){var w=v;if(!(!Ug.length||Ug[Ug.length-1]!==s)){var _="deltaY"in w?HL(w):u2(w),T=t.current.filter(function(D){return D.name===w.type&&(D.target===w.target||w.target===D.shadowParent)&&uEe(D.delta,_)})[0];if(T&&T.should){w.cancelable&&w.preventDefault();return}if(!T){var k=(i.current.shards||[]).map(VL).filter(Boolean).filter(function(D){return D.contains(w.target)}),M=k.length>0?a(w,k[0]):!i.current.noIsolation;M&&w.cancelable&&w.preventDefault()}}},[]),c=x.useCallback(function(v,w,_,T){var k={name:v,delta:w,target:_,should:T,shadowParent:pEe(_)};t.current.push(k),setTimeout(function(){t.current=t.current.filter(function(M){return M!==k})},1)},[]),u=x.useCallback(function(v){n.current=u2(v),r.current=void 0},[]),f=x.useCallback(function(v){c(v.type,HL(v),v.target,a(v,e.lockRef.current))},[]),m=x.useCallback(function(v){c(v.type,u2(v),v.target,a(v,e.lockRef.current))},[]);x.useEffect(function(){return Ug.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,jg),document.addEventListener("touchmove",l,jg),document.addEventListener("touchstart",u,jg),function(){Ug=Ug.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,jg),document.removeEventListener("touchmove",l,jg),document.removeEventListener("touchstart",u,jg)}},[]);var g=e.removeScrollBar,y=e.inert;return x.createElement(x.Fragment,null,y?x.createElement(s,{styles:dEe(o)}):null,g?x.createElement(nEe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function pEe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const mEe=Hwe(rW,hEe);var fw=x.forwardRef(function(e,t){return x.createElement(D4,hd({},e,{ref:t,sideCar:mEe}))});fw.classNames=D4.classNames;var gEe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Hg=new WeakMap,d2=new WeakMap,f2={},j5=0,lW=function(e){return e&&(e.host||lW(e.parentNode))},bEe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=lW(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},yEe=function(e,t,n,r){var o=bEe(t,Array.isArray(e)?e:[e]);f2[n]||(f2[n]=new WeakMap);var s=f2[n],i=[],a=new Set,l=new Set(o),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};o.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))u(m);else try{var g=m.getAttribute(r),y=g!==null&&g!=="false",v=(Hg.get(m)||0)+1,w=(s.get(m)||0)+1;Hg.set(m,v),s.set(m,w),i.push(m),v===1&&y&&d2.set(m,!0),w===1&&m.setAttribute(n,"true"),y||m.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",m,_)}})};return u(t),a.clear(),j5++,function(){i.forEach(function(f){var m=Hg.get(f)-1,g=s.get(f)-1;Hg.set(f,m),s.set(f,g),m||(d2.has(f)||f.removeAttribute(r),d2.delete(f)),g||f.removeAttribute(n)}),j5--,j5||(Hg=new WeakMap,Hg=new WeakMap,d2=new WeakMap,f2={})}},O4=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=gEe(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),yEe(r,o,n,"aria-hidden")):function(){return null}};function vEe(e){const t=xEe(e),n=x.forwardRef((r,o)=>{const{children:s,...i}=r,a=x.Children.toArray(s),l=a.find(EEe);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:o,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function xEe(e){const t=x.forwardRef((n,r)=>{const{children:o,...s}=n;if(x.isValidElement(o)){const i=SEe(o),a=_Ee(s,o.props);return o.type!==x.Fragment&&(a.ref=r?Td(r,i):i),x.cloneElement(o,a)}return x.Children.count(o)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var wEe=Symbol("radix.slottable");function EEe(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===wEe}function _Ee(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const l=s(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function SEe(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var P4="Dialog",[cW]=Ha(P4),[TEe,Nu]=cW(P4),uW=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=e,a=x.useRef(null),l=x.useRef(null),[c,u]=bl({prop:r,defaultProp:o??!1,onChange:s,caller:P4});return h.jsx(TEe,{scope:t,triggerRef:a,contentRef:l,contentId:Rc(),titleId:Rc(),descriptionId:Rc(),open:c,onOpenChange:u,onOpenToggle:x.useCallback(()=>u(f=>!f),[u]),modal:i,children:n})};uW.displayName=P4;var dW="DialogTrigger",fW=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Nu(dW,n),s=Rr(t,o.triggerRef);return h.jsx(Pn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":zR(o.open),...r,ref:s,onClick:Gt(e.onClick,o.onOpenToggle)})});fW.displayName=dW;var FR="DialogPortal",[CEe,hW]=cW(FR,{forceMount:void 0}),pW=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,s=Nu(FR,t);return h.jsx(CEe,{scope:t,forceMount:n,children:x.Children.map(r,i=>h.jsx(yl,{present:n||s.open,children:h.jsx(uw,{asChild:!0,container:o,children:i})}))})};pW.displayName=FR;var sS="DialogOverlay",mW=x.forwardRef((e,t)=>{const n=hW(sS,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=Nu(sS,e.__scopeDialog);return s.modal?h.jsx(yl,{present:r||s.open,children:h.jsx(AEe,{...o,ref:t})}):null});mW.displayName=sS;var kEe=vEe("DialogOverlay.RemoveScroll"),AEe=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Nu(sS,n);return h.jsx(fw,{as:kEe,allowPinchZoom:!0,shards:[o.contentRef],children:h.jsx(Pn.div,{"data-state":zR(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),dm="DialogContent",gW=x.forwardRef((e,t)=>{const n=hW(dm,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=Nu(dm,e.__scopeDialog);return h.jsx(yl,{present:r||s.open,children:s.modal?h.jsx(NEe,{...o,ref:t}):h.jsx(IEe,{...o,ref:t})})});gW.displayName=dm;var NEe=x.forwardRef((e,t)=>{const n=Nu(dm,e.__scopeDialog),r=x.useRef(null),o=Rr(t,n.contentRef,r);return x.useEffect(()=>{const s=r.current;if(s)return O4(s)},[]),h.jsx(bW,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(e.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Gt(e.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:Gt(e.onFocusOutside,s=>s.preventDefault())})}),IEe=x.forwardRef((e,t)=>{const n=Nu(dm,e.__scopeDialog),r=x.useRef(!1),o=x.useRef(!1);return h.jsx(bW,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),bW=x.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=e,a=Nu(dm,n),l=x.useRef(null),c=Rr(t,l);return M4(),h.jsxs(h.Fragment,{children:[h.jsx(dw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:h.jsx(Eb,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":zR(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(REe,{titleId:a.titleId}),h.jsx(DEe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),BR="DialogTitle",yW=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Nu(BR,n);return h.jsx(Pn.h2,{id:o.titleId,...r,ref:t})});yW.displayName=BR;var vW="DialogDescription",xW=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Nu(vW,n);return h.jsx(Pn.p,{id:o.descriptionId,...r,ref:t})});xW.displayName=vW;var wW="DialogClose",EW=x.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Nu(wW,n);return h.jsx(Pn.button,{type:"button",...r,ref:t,onClick:Gt(e.onClick,()=>o.onOpenChange(!1))})});EW.displayName=wW;function zR(e){return e?"open":"closed"}var _W="DialogTitleWarning",[Rft,SW]=Aye(_W,{contentName:dm,titleName:BR,docsSlug:"dialog"}),REe=({titleId:e})=>{const t=SW(_W),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},MEe="DialogDescriptionWarning",DEe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${SW(MEe).contentName}}.`;return x.useEffect(()=>{var s;const o=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},TW=uW,OEe=fW,CW=pW,kW=mW,AW=gW,NW=yW,PEe=xW,IW=EW;function RW({...e}){return h.jsx(TW,{"data-slot":"dialog",...e})}function LEe({...e}){return h.jsx(OEe,{"data-slot":"dialog-trigger",...e})}function $Ee({...e}){return h.jsx(CW,{"data-slot":"dialog-portal",...e})}function FEe({className:e,...t}){return h.jsx(kW,{"data-slot":"dialog-overlay",className:Qe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function MW({className:e,children:t,...n}){return h.jsxs($Ee,{"data-slot":"dialog-portal",children:[h.jsx(FEe,{}),h.jsxs(AW,{"data-slot":"dialog-content",className:Qe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,h.jsxs(IW,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[h.jsx(qr,{}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function DW({className:e,...t}){return h.jsx("div",{"data-slot":"dialog-header",className:Qe("flex flex-col gap-2 text-center sm:text-left",e),...t})}function BEe({className:e,...t}){return h.jsx("div",{"data-slot":"dialog-footer",className:Qe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function OW({className:e,...t}){return h.jsx(NW,{"data-slot":"dialog-title",className:Qe("text-lg leading-none font-semibold",e),...t})}function zEe({className:e,...t}){return h.jsx(PEe,{"data-slot":"dialog-description",className:Qe("text-muted-foreground text-sm",e),...t})}function jEe(e){const t=UEe(e),n=x.forwardRef((r,o)=>{const{children:s,...i}=r,a=x.Children.toArray(s),l=a.find(VEe);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:o,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function UEe(e){const t=x.forwardRef((n,r)=>{const{children:o,...s}=n;if(x.isValidElement(o)){const i=GEe(o),a=qEe(s,o.props);return o.type!==x.Fragment&&(a.ref=r?Td(r,i):i),x.cloneElement(o,a)}return x.Children.count(o)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var HEe=Symbol("radix.slottable");function VEe(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===HEe}function qEe(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const l=s(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function GEe(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var AN=["Enter"," "],WEe=["ArrowDown","PageUp","Home"],PW=["ArrowUp","PageDown","End"],YEe=[...WEe,...PW],KEe={ltr:[...AN,"ArrowRight"],rtl:[...AN,"ArrowLeft"]},ZEe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},hw="Menu",[ux,JEe,XEe]=gR(hw),[Im,LW]=Ha(hw,[XEe,z0,B0]),L4=z0(),$W=B0(),[QEe,Rm]=Im(hw),[e2e,pw]=Im(hw),FW=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=e,a=L4(t),[l,c]=x.useState(null),u=x.useRef(!1),f=vu(s),m=wb(o);return x.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),h.jsx(C4,{...a,children:h.jsx(QEe,{scope:t,open:n,onOpenChange:f,content:l,onContentChange:c,children:h.jsx(e2e,{scope:t,onClose:x.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:m,modal:i,children:r})})})};FW.displayName=hw;var t2e="MenuAnchor",jR=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=L4(n);return h.jsx(cw,{...o,...r,ref:t})});jR.displayName=t2e;var UR="MenuPortal",[n2e,BW]=Im(UR,{forceMount:void 0}),zW=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,s=Rm(UR,t);return h.jsx(n2e,{scope:t,forceMount:n,children:h.jsx(yl,{present:n||s.open,children:h.jsx(uw,{asChild:!0,container:o,children:r})})})};zW.displayName=UR;var Mc="MenuContent",[r2e,HR]=Im(Mc),jW=x.forwardRef((e,t)=>{const n=BW(Mc,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=Rm(Mc,e.__scopeMenu),i=pw(Mc,e.__scopeMenu);return h.jsx(ux.Provider,{scope:e.__scopeMenu,children:h.jsx(yl,{present:r||s.open,children:h.jsx(ux.Slot,{scope:e.__scopeMenu,children:i.modal?h.jsx(o2e,{...o,ref:t}):h.jsx(s2e,{...o,ref:t})})})})}),o2e=x.forwardRef((e,t)=>{const n=Rm(Mc,e.__scopeMenu),r=x.useRef(null),o=Rr(t,r);return x.useEffect(()=>{const s=r.current;if(s)return O4(s)},[]),h.jsx(VR,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Gt(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),s2e=x.forwardRef((e,t)=>{const n=Rm(Mc,e.__scopeMenu);return h.jsx(VR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),i2e=jEe("MenuContent.ScrollLock"),VR=x.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:y,...v}=e,w=Rm(Mc,n),_=pw(Mc,n),T=L4(n),k=$W(n),M=JEe(n),[D,I]=x.useState(null),P=x.useRef(null),B=Rr(t,P,w.onContentChange),U=x.useRef(0),j=x.useRef(""),H=x.useRef(0),q=x.useRef(null),z=x.useRef("right"),Z=x.useRef(0),X=y?fw:x.Fragment,J=y?{as:i2e,allowPinchZoom:!0}:void 0,ee=ie=>{var he,Fe;const K=j.current+ie,te=M().filter(Oe=>!Oe.disabled),se=document.activeElement,Q=(he=te.find(Oe=>Oe.ref.current===se))==null?void 0:he.textValue,Te=te.map(Oe=>Oe.textValue),ge=y2e(Te,K,Q),Ce=(Fe=te.find(Oe=>Oe.textValue===ge))==null?void 0:Fe.ref.current;(function Oe(Re){j.current=Re,window.clearTimeout(U.current),Re!==""&&(U.current=window.setTimeout(()=>Oe(""),1e3))})(K),Ce&&setTimeout(()=>Ce.focus())};x.useEffect(()=>()=>window.clearTimeout(U.current),[]),M4();const re=x.useCallback(ie=>{var te,se;return z.current===((te=q.current)==null?void 0:te.side)&&x2e(ie,(se=q.current)==null?void 0:se.area)},[]);return h.jsx(r2e,{scope:n,searchRef:j,onItemEnter:x.useCallback(ie=>{re(ie)&&ie.preventDefault()},[re]),onItemLeave:x.useCallback(ie=>{var K;re(ie)||((K=P.current)==null||K.focus(),I(null))},[re]),onTriggerLeave:x.useCallback(ie=>{re(ie)&&ie.preventDefault()},[re]),pointerGraceTimerRef:H,onPointerGraceIntentChange:x.useCallback(ie=>{q.current=ie},[]),children:h.jsx(X,{...J,children:h.jsx(dw,{asChild:!0,trapped:o,onMountAutoFocus:Gt(s,ie=>{var K;ie.preventDefault(),(K=P.current)==null||K.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:h.jsx(Eb,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:h.jsx(y4,{asChild:!0,...k,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:D,onCurrentTabStopIdChange:I,onEntryFocus:Gt(l,ie=>{_.isUsingKeyboardRef.current||ie.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(k4,{role:"menu","aria-orientation":"vertical","data-state":rY(w.open),"data-radix-menu-content":"",dir:_.dir,...T,...v,ref:B,style:{outline:"none",...v.style},onKeyDown:Gt(v.onKeyDown,ie=>{const te=ie.target.closest("[data-radix-menu-content]")===ie.currentTarget,se=ie.ctrlKey||ie.altKey||ie.metaKey,Q=ie.key.length===1;te&&(ie.key==="Tab"&&ie.preventDefault(),!se&&Q&&ee(ie.key));const Te=P.current;if(ie.target!==Te||!YEe.includes(ie.key))return;ie.preventDefault();const Ce=M().filter(he=>!he.disabled).map(he=>he.ref.current);PW.includes(ie.key)&&Ce.reverse(),g2e(Ce)}),onBlur:Gt(e.onBlur,ie=>{ie.currentTarget.contains(ie.target)||(window.clearTimeout(U.current),j.current="")}),onPointerMove:Gt(e.onPointerMove,dx(ie=>{const K=ie.target,te=Z.current!==ie.clientX;if(ie.currentTarget.contains(K)&&te){const se=ie.clientX>Z.current?"right":"left";z.current=se,Z.current=ie.clientX}}))})})})})})})});jW.displayName=Mc;var a2e="MenuGroup",qR=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Pn.div,{role:"group",...r,ref:t})});qR.displayName=a2e;var l2e="MenuLabel",UW=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Pn.div,{...r,ref:t})});UW.displayName=l2e;var iS="MenuItem",qL="menu.itemSelect",$4=x.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,s=x.useRef(null),i=pw(iS,e.__scopeMenu),a=HR(iS,e.__scopeMenu),l=Rr(t,s),c=x.useRef(!1),u=()=>{const f=s.current;if(!n&&f){const m=new CustomEvent(qL,{bubbles:!0,cancelable:!0});f.addEventListener(qL,g=>r==null?void 0:r(g),{once:!0}),qq(f,m),m.defaultPrevented?c.current=!1:i.onClose()}};return h.jsx(HW,{...o,ref:l,disabled:n,onClick:Gt(e.onClick,u),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),c.current=!0},onPointerUp:Gt(e.onPointerUp,f=>{var m;c.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:Gt(e.onKeyDown,f=>{const m=a.searchRef.current!=="";n||m&&f.key===" "||AN.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});$4.displayName=iS;var HW=x.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=e,i=HR(iS,n),a=$W(n),l=x.useRef(null),c=Rr(t,l),[u,f]=x.useState(!1),[m,g]=x.useState("");return x.useEffect(()=>{const y=l.current;y&&g((y.textContent??"").trim())},[s.children]),h.jsx(ux.ItemSlot,{scope:n,disabled:r,textValue:o??m,children:h.jsx(v4,{asChild:!0,...a,focusable:!r,children:h.jsx(Pn.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:Gt(e.onPointerMove,dx(y=>{r?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Gt(e.onPointerLeave,dx(y=>i.onItemLeave(y))),onFocus:Gt(e.onFocus,()=>f(!0)),onBlur:Gt(e.onBlur,()=>f(!1))})})})}),c2e="MenuCheckboxItem",VW=x.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return h.jsx(KW,{scope:e.__scopeMenu,checked:n,children:h.jsx($4,{role:"menuitemcheckbox","aria-checked":aS(n)?"mixed":n,...o,ref:t,"data-state":WR(n),onSelect:Gt(o.onSelect,()=>r==null?void 0:r(aS(n)?!0:!n),{checkForDefaultPrevented:!1})})})});VW.displayName=c2e;var qW="MenuRadioGroup",[u2e,d2e]=Im(qW,{value:void 0,onValueChange:()=>{}}),GW=x.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,s=vu(r);return h.jsx(u2e,{scope:e.__scopeMenu,value:n,onValueChange:s,children:h.jsx(qR,{...o,ref:t})})});GW.displayName=qW;var WW="MenuRadioItem",YW=x.forwardRef((e,t)=>{const{value:n,...r}=e,o=d2e(WW,e.__scopeMenu),s=n===o.value;return h.jsx(KW,{scope:e.__scopeMenu,checked:s,children:h.jsx($4,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":WR(s),onSelect:Gt(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});YW.displayName=WW;var GR="MenuItemIndicator",[KW,f2e]=Im(GR,{checked:!1}),ZW=x.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,s=f2e(GR,n);return h.jsx(yl,{present:r||aS(s.checked)||s.checked===!0,children:h.jsx(Pn.span,{...o,ref:t,"data-state":WR(s.checked)})})});ZW.displayName=GR;var h2e="MenuSeparator",JW=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Pn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});JW.displayName=h2e;var p2e="MenuArrow",XW=x.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=L4(n);return h.jsx(A4,{...o,...r,ref:t})});XW.displayName=p2e;var m2e="MenuSub",[Mft,QW]=Im(m2e),uv="MenuSubTrigger",eY=x.forwardRef((e,t)=>{const n=Rm(uv,e.__scopeMenu),r=pw(uv,e.__scopeMenu),o=QW(uv,e.__scopeMenu),s=HR(uv,e.__scopeMenu),i=x.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:e.__scopeMenu},u=x.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),h.jsx(jR,{asChild:!0,...c,children:h.jsx(HW,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":rY(n.open),...e,ref:Td(t,o.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Gt(e.onPointerMove,dx(f=>{s.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Gt(e.onPointerLeave,dx(f=>{var g,y;u();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const v=(y=n.content)==null?void 0:y.dataset.side,w=v==="right",_=w?-5:5,T=m[w?"left":"right"],k=m[w?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:T,y:m.top},{x:k,y:m.top},{x:k,y:m.bottom},{x:T,y:m.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Gt(e.onKeyDown,f=>{var g;const m=s.searchRef.current!=="";e.disabled||m&&f.key===" "||KEe[r.dir].includes(f.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),f.preventDefault())})})})});eY.displayName=uv;var tY="MenuSubContent",nY=x.forwardRef((e,t)=>{const n=BW(Mc,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=Rm(Mc,e.__scopeMenu),i=pw(Mc,e.__scopeMenu),a=QW(tY,e.__scopeMenu),l=x.useRef(null),c=Rr(t,l);return h.jsx(ux.Provider,{scope:e.__scopeMenu,children:h.jsx(yl,{present:r||s.open,children:h.jsx(ux.Slot,{scope:e.__scopeMenu,children:h.jsx(VR,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;i.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Gt(e.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Gt(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:Gt(e.onKeyDown,u=>{var g;const f=u.currentTarget.contains(u.target),m=ZEe[i.dir].includes(u.key);f&&m&&(s.onOpenChange(!1),(g=a.trigger)==null||g.focus(),u.preventDefault())})})})})})});nY.displayName=tY;function rY(e){return e?"open":"closed"}function aS(e){return e==="indeterminate"}function WR(e){return aS(e)?"indeterminate":e?"checked":"unchecked"}function g2e(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function b2e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function y2e(e,t,n){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let i=b2e(e,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function v2e(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s],l=t[i],c=a.x,u=a.y,f=l.x,m=l.y;u>r!=m>r&&n<(f-c)*(r-u)/(m-u)+c&&(o=!o)}return o}function x2e(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return v2e(n,t)}function dx(e){return t=>t.pointerType==="mouse"?e(t):void 0}var w2e=FW,E2e=jR,_2e=zW,S2e=jW,T2e=qR,C2e=UW,k2e=$4,A2e=VW,N2e=GW,I2e=YW,R2e=ZW,M2e=JW,D2e=XW,O2e=eY,P2e=nY,F4="DropdownMenu",[L2e]=Ha(F4,[LW]),Va=LW(),[$2e,oY]=L2e(F4),sY=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=Va(t),c=x.useRef(null),[u,f]=bl({prop:o,defaultProp:s??!1,onChange:i,caller:F4});return h.jsx($2e,{scope:t,triggerId:Rc(),triggerRef:c,contentId:Rc(),open:u,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(m=>!m),[f]),modal:a,children:h.jsx(w2e,{...l,open:u,onOpenChange:f,dir:r,modal:a,children:n})})};sY.displayName=F4;var iY="DropdownMenuTrigger",aY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,s=oY(iY,n),i=Va(n);return h.jsx(E2e,{asChild:!0,...i,children:h.jsx(Pn.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Td(t,s.triggerRef),onPointerDown:Gt(e.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Gt(e.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});aY.displayName=iY;var F2e="DropdownMenuPortal",lY=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Va(t);return h.jsx(_2e,{...r,...n})};lY.displayName=F2e;var cY="DropdownMenuContent",uY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=oY(cY,n),s=Va(n),i=x.useRef(!1);return h.jsx(S2e,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:t,onCloseAutoFocus:Gt(e.onCloseAutoFocus,a=>{var l;i.current||(l=o.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:Gt(e.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!o.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});uY.displayName=cY;var B2e="DropdownMenuGroup",z2e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Va(n);return h.jsx(T2e,{...o,...r,ref:t})});z2e.displayName=B2e;var j2e="DropdownMenuLabel",dY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Va(n);return h.jsx(C2e,{...o,...r,ref:t})});dY.displayName=j2e;var U2e="DropdownMenuItem",fY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Va(n);return h.jsx(k2e,{...o,...r,ref:t})});fY.displayName=U2e;var H2e="DropdownMenuCheckboxItem",V2e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Va(n);return h.jsx(A2e,{...o,...r,ref:t})});V2e.displayName=H2e;var q2e="DropdownMenuRadioGroup",G2e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Va(n);return h.jsx(N2e,{...o,...r,ref:t})});G2e.displayName=q2e;var W2e="DropdownMenuRadioItem",Y2e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Va(n);return h.jsx(I2e,{...o,...r,ref:t})});Y2e.displayName=W2e;var K2e="DropdownMenuItemIndicator",Z2e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Va(n);return h.jsx(R2e,{...o,...r,ref:t})});Z2e.displayName=K2e;var J2e="DropdownMenuSeparator",hY=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Va(n);return h.jsx(M2e,{...o,...r,ref:t})});hY.displayName=J2e;var X2e="DropdownMenuArrow",Q2e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Va(n);return h.jsx(D2e,{...o,...r,ref:t})});Q2e.displayName=X2e;var e_e="DropdownMenuSubTrigger",t_e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Va(n);return h.jsx(O2e,{...o,...r,ref:t})});t_e.displayName=e_e;var n_e="DropdownMenuSubContent",r_e=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Va(n);return h.jsx(P2e,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});r_e.displayName=n_e;var o_e=sY,s_e=aY,i_e=lY,a_e=uY,l_e=dY,c_e=fY,u_e=hY;function mw({...e}){return h.jsx(o_e,{"data-slot":"dropdown-menu",...e})}function gw({...e}){return h.jsx(s_e,{"data-slot":"dropdown-menu-trigger",...e})}function bw({className:e,sideOffset:t=4,...n}){return h.jsx(i_e,{children:h.jsx(a_e,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function cu({className:e,inset:t,variant:n="default",...r}){return h.jsx(c_e,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:Qe("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function d_e({className:e,inset:t,...n}){return h.jsx(l_e,{"data-slot":"dropdown-menu-label","data-inset":t,className:Qe("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function GL({className:e,...t}){return h.jsx(u_e,{"data-slot":"dropdown-menu-separator",className:Qe("bg-border -mx-1 my-1 h-px",e),...t})}function h2({className:e,...t}){return h.jsx("span",{"data-slot":"dropdown-menu-shortcut",className:Qe("text-muted-foreground ml-auto text-xs tracking-widest",e),...t})}function f_e(e,t=[]){let n=[];function r(s,i){const a=x.createContext(i);a.displayName=s+"Context";const l=n.length;n=[...n,i];const c=f=>{var _;const{scope:m,children:g,...y}=f,v=((_=m==null?void 0:m[e])==null?void 0:_[l])||a,w=x.useMemo(()=>y,Object.values(y));return h.jsx(v.Provider,{value:w,children:g})};c.displayName=s+"Provider";function u(f,m){var v;const g=((v=m==null?void 0:m[e])==null?void 0:v[l])||a,y=x.useContext(g);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,u]}const o=()=>{const s=n.map(i=>x.createContext(i));return function(a){const l=(a==null?void 0:a[e])||s;return x.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return o.scopeName=e,[r,h_e(o,...t)]}function h_e(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var p_e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],pY=p_e.reduce((e,t)=>{const n=iw(`Primitive.${t}`),r=x.forwardRef((o,s)=>{const{asChild:i,...a}=o,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),YR="Progress",KR=100,[m_e]=f_e(YR),[g_e,b_e]=m_e(YR),mY=x.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:o,getValueLabel:s=y_e,...i}=e;(o||o===0)&&!WL(o)&&console.error(v_e(`${o}`,"Progress"));const a=WL(o)?o:KR;r!==null&&!YL(r,a)&&console.error(x_e(`${r}`,"Progress"));const l=YL(r,a)?r:null,c=lS(l)?s(l,a):void 0;return h.jsx(g_e,{scope:n,value:l,max:a,children:h.jsx(pY.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":lS(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":yY(l,a),"data-value":l??void 0,"data-max":a,...i,ref:t})})});mY.displayName=YR;var gY="ProgressIndicator",bY=x.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,o=b_e(gY,n);return h.jsx(pY.div,{"data-state":yY(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:t})});bY.displayName=gY;function y_e(e,t){return`${Math.round(e/t*100)}%`}function yY(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function lS(e){return typeof e=="number"}function WL(e){return lS(e)&&!isNaN(e)&&e>0}function YL(e,t){return lS(e)&&!isNaN(e)&&e<=t&&e>=0}function v_e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${KR}\`.`}function x_e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${KR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var w_e=mY,E_e=bY;function __e({className:e,indicatorColor:t,value:n,...r}){return h.jsx(w_e,{"data-slot":"progress",className:Qe("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:h.jsx(E_e,{"data-slot":"progress-indicator",className:Qe("bg-primary h-full w-full flex-1 transition-all",t),style:{transform:`translateX(-${100-(n||0)}%)`}})})}function S_e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return x.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const B4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Sb(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function ZR(e){return"nodeType"in e}function qa(e){var t,n;return e?Sb(e)?e:ZR(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function JR(e){const{Document:t}=qa(e);return e instanceof t}function yw(e){return Sb(e)?!1:e instanceof qa(e).HTMLElement}function vY(e){return e instanceof qa(e).SVGElement}function Tb(e){return e?Sb(e)?e.document:ZR(e)?JR(e)?e:yw(e)||vY(e)?e.ownerDocument:document:document:document}const Su=B4?x.useLayoutEffect:x.useEffect;function z4(e){const t=x.useRef(e);return Su(()=>{t.current=e}),x.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function T_e(){const e=x.useRef(null),t=x.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=x.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function fx(e,t){t===void 0&&(t=[e]);const n=x.useRef(e);return Su(()=>{n.current!==e&&(n.current=e)},t),n}function vw(e,t){const n=x.useRef();return x.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function cS(e){const t=z4(e),n=x.useRef(null),r=x.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function uS(e){const t=x.useRef();return x.useEffect(()=>{t.current=e},[e]),t.current}let U5={};function xw(e,t){return x.useMemo(()=>{if(t)return t;const n=U5[e]==null?0:U5[e]+1;return U5[e]=n,e+"-"+n},[e,t])}function xY(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const a=Object.entries(i);for(const[l,c]of a){const u=s[l];u!=null&&(s[l]=u+e*c)}return s},{...t})}}const T1=xY(1),hx=xY(-1);function C_e(e){return"clientX"in e&&"clientY"in e}function j4(e){if(!e)return!1;const{KeyboardEvent:t}=qa(e.target);return t&&e instanceof t}function k_e(e){if(!e)return!1;const{TouchEvent:t}=qa(e.target);return t&&e instanceof t}function dS(e){if(k_e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return C_e(e)?{x:e.clientX,y:e.clientY}:null}const Tu=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Tu.Translate.toString(e),Tu.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),KL="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function A_e(e){return e.matches(KL)?e:e.querySelector(KL)}const N_e={display:"none"};function I_e(e){let{id:t,value:n}=e;return Me.createElement("div",{id:t,style:N_e},n)}function R_e(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Me.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function M_e(){const[e,t]=x.useState("");return{announce:x.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const wY=x.createContext(null);function D_e(e){const t=x.useContext(wY);x.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function O_e(){const[e]=x.useState(()=>new Set),t=x.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[x.useCallback(r=>{let{type:o,event:s}=r;e.forEach(i=>{var a;return(a=i[o])==null?void 0:a.call(i,s)})},[e]),t]}const P_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},L_e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function $_e(e){let{announcements:t=L_e,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=P_e}=e;const{announce:s,announcement:i}=M_e(),a=xw("DndLiveRegion"),[l,c]=x.useState(!1);if(x.useEffect(()=>{c(!0)},[]),D_e(x.useMemo(()=>({onDragStart(f){let{active:m}=f;s(t.onDragStart({active:m}))},onDragMove(f){let{active:m,over:g}=f;t.onDragMove&&s(t.onDragMove({active:m,over:g}))},onDragOver(f){let{active:m,over:g}=f;s(t.onDragOver({active:m,over:g}))},onDragEnd(f){let{active:m,over:g}=f;s(t.onDragEnd({active:m,over:g}))},onDragCancel(f){let{active:m,over:g}=f;s(t.onDragCancel({active:m,over:g}))}}),[s,t])),!l)return null;const u=Me.createElement(Me.Fragment,null,Me.createElement(I_e,{id:r,value:o.draggable}),Me.createElement(R_e,{id:a,announcement:i}));return n?pl.createPortal(u,n):u}var Ii;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ii||(Ii={}));function fS(){}function m0(e,t){return x.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function XR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return x.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Cu=Object.freeze({x:0,y:0});function QR(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function F_e(e,t){const n=dS(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function e8(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function B_e(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function NN(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function U4(e,t){if(!e||e.length===0)return null;const[n]=e;return t?n[t]:n}function ZL(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const hS=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=ZL(t,t.left,t.top),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=QR(ZL(l),o);s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(e8)},EY=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=NN(t),s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=NN(l),u=o.reduce((m,g,y)=>m+QR(c[y],g),0),f=Number((u/4).toFixed(4));s.push({id:a,data:{droppableContainer:i,value:f}})}}return s.sort(e8)};function z_e(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=o-r,a=s-n;if(r<o&&n<s){const l=t.width*t.height,c=e.width*e.height,u=i*a,f=u/(l+c-u);return Number(f.toFixed(4))}return 0}const _Y=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:i}=s,a=n.get(i);if(a){const l=z_e(a,t);l>0&&o.push({id:i,data:{droppableContainer:s,value:l}})}}return o.sort(B_e)};function j_e(e,t){const{top:n,left:r,bottom:o,right:s}=t;return n<=e.y&&e.y<=o&&r<=e.x&&e.x<=s}const U_e=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const o=[];for(const s of t){const{id:i}=s,a=n.get(i);if(a&&j_e(r,a)){const c=NN(a).reduce((f,m)=>f+QR(r,m),0),u=Number((c/4).toFixed(4));o.push({id:i,data:{droppableContainer:s,value:u}})}}return o.sort(e8)};function H_e(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function SY(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Cu}function V_e(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,a)=>({...i,top:i.top+e*a.y,bottom:i.bottom+e*a.y,left:i.left+e*a.x,right:i.right+e*a.x}),{...n})}}const q_e=V_e(1);function TY(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function G_e(e,t,n){const r=TY(t);if(!r)return e;const{scaleX:o,scaleY:s,x:i,y:a}=r,l=e.left-i-(1-o)*parseFloat(n),c=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=o?e.width/o:e.width,f=s?e.height/s:e.height;return{width:u,height:f,top:c,right:l+u,bottom:c+f,left:l}}const W_e={ignoreTransform:!1};function Cb(e,t){t===void 0&&(t=W_e);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:u}=qa(e).getComputedStyle(e);c&&(n=G_e(n,c,u))}const{top:r,left:o,width:s,height:i,bottom:a,right:l}=n;return{top:r,left:o,width:s,height:i,bottom:a,right:l}}function JL(e){return Cb(e,{ignoreTransform:!0})}function Y_e(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function K_e(e,t){return t===void 0&&(t=qa(e).getComputedStyle(e)),t.position==="fixed"}function Z_e(e,t){t===void 0&&(t=qa(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function H4(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(JR(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!yw(o)||vY(o)||n.includes(o))return n;const s=qa(e).getComputedStyle(o);return o!==e&&Z_e(o,s)&&n.push(o),K_e(o,s)?n:r(o.parentNode)}return e?r(e):n}function CY(e){const[t]=H4(e,1);return t??null}function H5(e){return!B4||!e?null:Sb(e)?e:ZR(e)?JR(e)||e===Tb(e).scrollingElement?window:yw(e)?e:null:null}function kY(e){return Sb(e)?e.scrollX:e.scrollLeft}function AY(e){return Sb(e)?e.scrollY:e.scrollTop}function IN(e){return{x:kY(e),y:AY(e)}}var ji;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ji||(ji={}));function NY(e){return!B4||!e?!1:e===document.scrollingElement}function IY(e){const t={x:0,y:0},n=NY(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:a,maxScroll:r,minScroll:t}}const J_e={x:.2,y:.2};function X_e(e,t,n,r,o){let{top:s,left:i,right:a,bottom:l}=n;r===void 0&&(r=10),o===void 0&&(o=J_e);const{isTop:c,isBottom:u,isLeft:f,isRight:m}=IY(e),g={x:0,y:0},y={x:0,y:0},v={height:t.height*o.y,width:t.width*o.x};return!c&&s<=t.top+v.height?(g.y=ji.Backward,y.y=r*Math.abs((t.top+v.height-s)/v.height)):!u&&l>=t.bottom-v.height&&(g.y=ji.Forward,y.y=r*Math.abs((t.bottom-v.height-l)/v.height)),!m&&a>=t.right-v.width?(g.x=ji.Forward,y.x=r*Math.abs((t.right-v.width-a)/v.width)):!f&&i<=t.left+v.width&&(g.x=ji.Backward,y.x=r*Math.abs((t.left+v.width-i)/v.width)),{direction:g,speed:y}}function Q_e(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function RY(e){return e.reduce((t,n)=>T1(t,IN(n)),Cu)}function eSe(e){return e.reduce((t,n)=>t+kY(n),0)}function tSe(e){return e.reduce((t,n)=>t+AY(n),0)}function MY(e,t){if(t===void 0&&(t=Cb),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);CY(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const nSe=[["x",["left","right"],eSe],["y",["top","bottom"],tSe]];class t8{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=H4(n),o=RY(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,i,a]of nSe)for(const l of i)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=o[s]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Nv{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function rSe(e){const{EventTarget:t}=qa(e);return e instanceof t?e:Tb(e)}function V5(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var wc;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(wc||(wc={}));function XL(e){e.preventDefault()}function oSe(e){e.stopPropagation()}var cr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(cr||(cr={}));const DY={start:[cr.Space,cr.Enter],cancel:[cr.Esc],end:[cr.Space,cr.Enter,cr.Tab]},sSe=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case cr.Right:return{...n,x:n.x+25};case cr.Left:return{...n,x:n.x-25};case cr.Down:return{...n,y:n.y+25};case cr.Up:return{...n,y:n.y-25}}};class V4{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Nv(Tb(n)),this.windowListeners=new Nv(qa(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(wc.Resize,this.handleCancel),this.windowListeners.add(wc.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(wc.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&MY(r),n(Cu)}handleKeyDown(t){if(j4(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=DY,coordinateGetter:i=sSe,scrollBehavior:a="smooth"}=o,{code:l}=t;if(s.end.includes(l)){this.handleEnd(t);return}if(s.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:Cu;this.referenceCoordinates||(this.referenceCoordinates=u);const f=i(t,{active:n,context:r.current,currentCoordinates:u});if(f){const m=hx(f,u),g={x:0,y:0},{scrollableAncestors:y}=r.current;for(const v of y){const w=t.code,{isTop:_,isRight:T,isLeft:k,isBottom:M,maxScroll:D,minScroll:I}=IY(v),P=Q_e(v),B={x:Math.min(w===cr.Right?P.right-P.width/2:P.right,Math.max(w===cr.Right?P.left:P.left+P.width/2,f.x)),y:Math.min(w===cr.Down?P.bottom-P.height/2:P.bottom,Math.max(w===cr.Down?P.top:P.top+P.height/2,f.y))},U=w===cr.Right&&!T||w===cr.Left&&!k,j=w===cr.Down&&!M||w===cr.Up&&!_;if(U&&B.x!==f.x){const H=v.scrollLeft+m.x,q=w===cr.Right&&H<=D.x||w===cr.Left&&H>=I.x;if(q&&!m.y){v.scrollTo({left:H,behavior:a});return}q?g.x=v.scrollLeft-H:g.x=w===cr.Right?v.scrollLeft-D.x:v.scrollLeft-I.x,g.x&&v.scrollBy({left:-g.x,behavior:a});break}else if(j&&B.y!==f.y){const H=v.scrollTop+m.y,q=w===cr.Down&&H<=D.y||w===cr.Up&&H>=I.y;if(q&&!m.x){v.scrollTo({top:H,behavior:a});return}q?g.y=v.scrollTop-H:g.y=w===cr.Down?v.scrollTop-D.y:v.scrollTop-I.y,g.y&&v.scrollBy({top:-g.y,behavior:a});break}}this.handleMove(t,T1(hx(f,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}V4.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=DY,onActivation:o}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const a=s.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function QL(e){return!!(e&&"distance"in e)}function e$(e){return!!(e&&"delay"in e)}class n8{constructor(t,n,r){var o;r===void 0&&(r=rSe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:i}=s;this.props=t,this.events=n,this.document=Tb(i),this.documentListeners=new Nv(this.document),this.listeners=new Nv(r),this.windowListeners=new Nv(qa(i)),this.initialCoordinates=(o=dS(s))!=null?o:Cu,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(wc.Resize,this.handleCancel),this.windowListeners.add(wc.DragStart,XL),this.windowListeners.add(wc.VisibilityChange,this.handleCancel),this.windowListeners.add(wc.ContextMenu,XL),this.documentListeners.add(wc.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(e$(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(QL(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(wc.Click,oSe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(wc.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!o)return;const l=(n=dS(t))!=null?n:Cu,c=hx(o,l);if(!r&&a){if(QL(a)){if(a.tolerance!=null&&V5(c,a.tolerance))return this.handleCancel();if(V5(c,a.distance))return this.handleStart()}if(e$(a)&&V5(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}t.cancelable&&t.preventDefault(),i(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===cr.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const iSe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class q4 extends n8{constructor(t){const{event:n}=t,r=Tb(n.target);super(t,iSe,r)}}q4.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const aSe={move:{name:"mousemove"},end:{name:"mouseup"}};var RN;(function(e){e[e.RightClick=2]="RightClick"})(RN||(RN={}));class r8 extends n8{constructor(t){super(t,aSe,Tb(t.event.target))}}r8.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===RN.RightClick?!1:(r==null||r({event:n}),!0)}}];const q5={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class o8 extends n8{constructor(t){super(t,q5)}static setup(){return window.addEventListener(q5.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(q5.move.name,t)};function t(){}}}o8.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var Iv;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Iv||(Iv={}));var pS;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(pS||(pS={}));function lSe(e){let{acceleration:t,activator:n=Iv.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:a=pS.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:f,threshold:m}=e;const g=uSe({delta:f,disabled:!s}),[y,v]=T_e(),w=x.useRef({x:0,y:0}),_=x.useRef({x:0,y:0}),T=x.useMemo(()=>{switch(n){case Iv.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Iv.DraggableRect:return o}},[n,o,l]),k=x.useRef(null),M=x.useCallback(()=>{const I=k.current;if(!I)return;const P=w.current.x*_.current.x,B=w.current.y*_.current.y;I.scrollBy(P,B)},[]),D=x.useMemo(()=>a===pS.TreeOrder?[...c].reverse():c,[a,c]);x.useEffect(()=>{if(!s||!c.length||!T){v();return}for(const I of D){if((r==null?void 0:r(I))===!1)continue;const P=c.indexOf(I),B=u[P];if(!B)continue;const{direction:U,speed:j}=X_e(I,B,T,t,m);for(const H of["x","y"])g[H][U[H]]||(j[H]=0,U[H]=0);if(j.x>0||j.y>0){v(),k.current=I,y(M,i),w.current=j,_.current=U;return}}w.current={x:0,y:0},_.current={x:0,y:0},v()},[t,M,r,v,s,i,JSON.stringify(T),JSON.stringify(g),y,c,D,u,JSON.stringify(m)])}const cSe={x:{[ji.Backward]:!1,[ji.Forward]:!1},y:{[ji.Backward]:!1,[ji.Forward]:!1}};function uSe(e){let{delta:t,disabled:n}=e;const r=uS(t);return vw(o=>{if(n||!r||!o)return cSe;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[ji.Backward]:o.x[ji.Backward]||s.x===-1,[ji.Forward]:o.x[ji.Forward]||s.x===1},y:{[ji.Backward]:o.y[ji.Backward]||s.y===-1,[ji.Forward]:o.y[ji.Forward]||s.y===1}}},[n,t,r])}function dSe(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return vw(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function fSe(e,t){return x.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...s]},[]),[e,t])}var W1;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(W1||(W1={}));var MN;(function(e){e.Optimized="optimized"})(MN||(MN={}));const t$=new Map;function hSe(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,i]=x.useState(null),{frequency:a,measure:l,strategy:c}=o,u=x.useRef(e),f=w(),m=fx(f),g=x.useCallback(function(_){_===void 0&&(_=[]),!m.current&&i(T=>T===null?_:T.concat(_.filter(k=>!T.includes(k))))},[m]),y=x.useRef(null),v=vw(_=>{if(f&&!n)return t$;if(!_||_===t$||u.current!==e||s!=null){const T=new Map;for(let k of e){if(!k)continue;if(s&&s.length>0&&!s.includes(k.id)&&k.rect.current){T.set(k.id,k.rect.current);continue}const M=k.node.current,D=M?new t8(l(M),M):null;k.rect.current=D,D&&T.set(k.id,D)}return T}return _},[e,s,n,f,l]);return x.useEffect(()=>{u.current=e},[e]),x.useEffect(()=>{f||g()},[n,f]),x.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),x.useEffect(()=>{f||typeof a!="number"||y.current!==null||(y.current=setTimeout(()=>{g(),y.current=null},a))},[a,f,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:s!=null};function w(){switch(c){case W1.Always:return!1;case W1.BeforeDragging:return n;default:return!n}}}function s8(e,t){return vw(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function pSe(e,t){return s8(e,t)}function mSe(e){let{callback:t,disabled:n}=e;const r=z4(t),o=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return x.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function G4(e){let{callback:t,disabled:n}=e;const r=z4(t),o=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return x.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function gSe(e){return new t8(Cb(e),e)}function n$(e,t,n){t===void 0&&(t=gSe);const[r,o]=x.useState(null);function s(){o(l=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=t(e);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const i=mSe({callback(l){if(e)for(const c of l){const{type:u,target:f}=c;if(u==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),a=G4({callback:s});return Su(()=>{s(),e?(a==null||a.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[e]),r}function bSe(e){const t=s8(e);return SY(e,t)}const r$=[];function ySe(e){const t=x.useRef(e),n=vw(r=>e?r&&r!==r$&&e&&t.current&&e.parentNode===t.current.parentNode?r:H4(e):r$,[e]);return x.useEffect(()=>{t.current=e},[e]),n}function vSe(e){const[t,n]=x.useState(null),r=x.useRef(e),o=x.useCallback(s=>{const i=H5(s.target);i&&n(a=>a?(a.set(i,IN(i)),new Map(a)):null)},[]);return x.useEffect(()=>{const s=r.current;if(e!==s){i(s);const a=e.map(l=>{const c=H5(l);return c?(c.addEventListener("scroll",o,{passive:!0}),[c,IN(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(s)};function i(a){a.forEach(l=>{const c=H5(l);c==null||c.removeEventListener("scroll",o)})}},[o,e]),x.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,i)=>T1(s,i),Cu):RY(e):Cu,[e,t])}function o$(e,t){t===void 0&&(t=[]);const n=x.useRef(null);return x.useEffect(()=>{n.current=null},t),x.useEffect(()=>{const r=e!==Cu;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?hx(e,n.current):Cu}function xSe(e){x.useEffect(()=>{if(!B4)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function wSe(e,t){return x.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,t)},n},{}),[e,t])}function OY(e){return x.useMemo(()=>e?Y_e(e):null,[e])}const s$=[];function ESe(e,t){t===void 0&&(t=Cb);const[n]=e,r=OY(n?qa(n):null),[o,s]=x.useState(s$);function i(){s(()=>e.length?e.map(l=>NY(l)?r:new t8(t(l),l)):s$)}const a=G4({callback:i});return Su(()=>{a==null||a.disconnect(),i(),e.forEach(l=>a==null?void 0:a.observe(l))},[e]),o}function PY(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return yw(t)?t:e}function _Se(e){let{measure:t}=e;const[n,r]=x.useState(null),o=x.useCallback(c=>{for(const{target:u}of c)if(yw(u)){r(f=>{const m=t(u);return f?{...f,width:m.width,height:m.height}:m});break}},[t]),s=G4({callback:o}),i=x.useCallback(c=>{const u=PY(c);s==null||s.disconnect(),u&&(s==null||s.observe(u)),r(u?t(u):null)},[t,s]),[a,l]=cS(i);return x.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const SSe=[{sensor:q4,options:{}},{sensor:V4,options:{}}],TSe={current:{}},T_={draggable:{measure:JL},droppable:{measure:JL,strategy:W1.WhileDragging,frequency:MN.Optimized},dragOverlay:{measure:Cb}};class Rv extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const CSe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Rv,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:fS},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:T_,measureDroppableContainers:fS,windowRect:null,measuringScheduled:!1},LY={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:fS,draggableNodes:new Map,over:null,measureDroppableContainers:fS},ww=x.createContext(LY),$Y=x.createContext(CSe);function kSe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Rv}}}function ASe(e,t){switch(t.type){case Ii.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ii.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ii.DragEnd:case Ii.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ii.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Rv(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case Ii.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Rv(e.droppable.containers);return i.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case Ii.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new Rv(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function NSe(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=x.useContext(ww),s=uS(r),i=uS(n==null?void 0:n.id);return x.useEffect(()=>{if(!t&&!r&&s&&i!=null){if(!j4(s)||document.activeElement===s.target)return;const a=o.get(i);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const f=A_e(u);if(f){f.focus();break}}})}},[r,t,o,i,s]),null}function FY(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function ISe(e){return x.useMemo(()=>({draggable:{...T_.draggable,...e==null?void 0:e.draggable},droppable:{...T_.droppable,...e==null?void 0:e.droppable},dragOverlay:{...T_.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function RSe(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=x.useRef(!1),{x:i,y:a}=typeof o=="boolean"?{x:o,y:o}:o;Su(()=>{if(!i&&!a||!t){s.current=!1;return}if(s.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const u=n(c),f=SY(u,r);if(i||(f.x=0),a||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=CY(c);m&&m.scrollBy({top:f.y,left:f.x})}},[t,i,a,r,n])}const W4=x.createContext({...Cu,scaleX:1,scaleY:1});var t0;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(t0||(t0={}));const mS=x.memo(function(t){var n,r,o,s;let{id:i,accessibility:a,autoScroll:l=!0,children:c,sensors:u=SSe,collisionDetection:f=_Y,measuring:m,modifiers:g,...y}=t;const v=x.useReducer(ASe,void 0,kSe),[w,_]=v,[T,k]=O_e(),[M,D]=x.useState(t0.Uninitialized),I=M===t0.Initialized,{draggable:{active:P,nodes:B,translate:U},droppable:{containers:j}}=w,H=P!=null?B.get(P):null,q=x.useRef({initial:null,translated:null}),z=x.useMemo(()=>{var wt;return P!=null?{id:P,data:(wt=H==null?void 0:H.data)!=null?wt:TSe,rect:q}:null},[P,H]),Z=x.useRef(null),[X,J]=x.useState(null),[ee,re]=x.useState(null),ie=fx(y,Object.values(y)),K=xw("DndDescribedBy",i),te=x.useMemo(()=>j.getEnabled(),[j]),se=ISe(m),{droppableRects:Q,measureDroppableContainers:Te,measuringScheduled:ge}=hSe(te,{dragging:I,dependencies:[U.x,U.y],config:se.droppable}),Ce=dSe(B,P),he=x.useMemo(()=>ee?dS(ee):null,[ee]),Fe=er(),Oe=pSe(Ce,se.draggable.measure);RSe({activeNode:P!=null?B.get(P):null,config:Fe.layoutShiftCompensation,initialRect:Oe,measure:se.draggable.measure});const Re=n$(Ce,se.draggable.measure,Oe),nt=n$(Ce?Ce.parentElement:null),ue=x.useRef({activatorEvent:null,active:null,activeNode:Ce,collisionRect:null,collisions:null,droppableRects:Q,draggableNodes:B,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),et=j.getNodeFor((n=ue.current.over)==null?void 0:n.id),ut=_Se({measure:se.dragOverlay.measure}),Yt=(r=ut.nodeRef.current)!=null?r:Ce,Ht=I?(o=ut.rect)!=null?o:Re:null,Pt=!!(ut.nodeRef.current&&ut.rect),tn=bSe(Pt?null:Re),vt=OY(Yt?qa(Yt):null),me=ySe(I?et??Ce:null),Ne=ESe(me),$e=FY(g,{transform:{x:U.x-tn.x,y:U.y-tn.y,scaleX:1,scaleY:1},activatorEvent:ee,active:z,activeNodeRect:Re,containerNodeRect:nt,draggingNodeRect:Ht,over:ue.current.over,overlayNodeRect:ut.rect,scrollableAncestors:me,scrollableAncestorRects:Ne,windowRect:vt}),Je=he?T1(he,U):null,Le=vSe(me),Ve=o$(Le),_e=o$(Le,[Re]),W=T1($e,Ve),L=Ht?q_e(Ht,$e):null,F=z&&L?f({active:z,collisionRect:L,droppableRects:Q,droppableContainers:te,pointerCoordinates:Je}):null,ce=U4(F,"id"),[we,ze]=x.useState(null),Be=Pt?$e:T1($e,_e),ct=H_e(Be,(s=we==null?void 0:we.rect)!=null?s:null,Re),ln=x.useRef(null),jt=x.useCallback((wt,sn)=>{let{sensor:ye,options:Ue}=sn;if(Z.current==null)return;const ht=B.get(Z.current);if(!ht)return;const Jt=wt.nativeEvent,mr=new ye({active:Z.current,activeNode:ht,event:Jt,options:Ue,context:ue,onAbort(Rt){if(!B.get(Rt))return;const{onDragAbort:hn}=ie.current,In={id:Rt};hn==null||hn(In),T({type:"onDragAbort",event:In})},onPending(Rt,zt,hn,In){if(!B.get(Rt))return;const{onDragPending:xs}=ie.current,Go={id:Rt,constraint:zt,initialCoordinates:hn,offset:In};xs==null||xs(Go),T({type:"onDragPending",event:Go})},onStart(Rt){const zt=Z.current;if(zt==null)return;const hn=B.get(zt);if(!hn)return;const{onDragStart:In}=ie.current,Lr={activatorEvent:Jt,active:{id:zt,data:hn.data,rect:q}};pl.unstable_batchedUpdates(()=>{In==null||In(Lr),D(t0.Initializing),_({type:Ii.DragStart,initialCoordinates:Rt,active:zt}),T({type:"onDragStart",event:Lr}),J(ln.current),re(Jt)})},onMove(Rt){_({type:Ii.DragMove,coordinates:Rt})},onEnd:Kn(Ii.DragEnd),onCancel:Kn(Ii.DragCancel)});ln.current=mr;function Kn(Rt){return async function(){const{active:hn,collisions:In,over:Lr,scrollAdjustedTranslate:xs}=ue.current;let Go=null;if(hn&&xs){const{cancelDrop:ws}=ie.current;Go={activatorEvent:Jt,active:hn,collisions:In,delta:xs,over:Lr},Rt===Ii.DragEnd&&typeof ws=="function"&&await Promise.resolve(ws(Go))&&(Rt=Ii.DragCancel)}Z.current=null,pl.unstable_batchedUpdates(()=>{_({type:Rt}),D(t0.Uninitialized),ze(null),J(null),re(null),ln.current=null;const ws=Rt===Ii.DragEnd?"onDragEnd":"onDragCancel";if(Go){const Jr=ie.current[ws];Jr==null||Jr(Go),T({type:ws,event:Go})}})}}},[B]),fn=x.useCallback((wt,sn)=>(ye,Ue)=>{const ht=ye.nativeEvent,Jt=B.get(Ue);if(Z.current!==null||!Jt||ht.dndKit||ht.defaultPrevented)return;const mr={active:Jt};wt(ye,sn.options,mr)===!0&&(ht.dndKit={capturedBy:sn.sensor},Z.current=Ue,jt(ye,sn))},[B,jt]),an=fSe(u,fn);xSe(u),Su(()=>{Re&&M===t0.Initializing&&D(t0.Initialized)},[Re,M]),x.useEffect(()=>{const{onDragMove:wt}=ie.current,{active:sn,activatorEvent:ye,collisions:Ue,over:ht}=ue.current;if(!sn||!ye)return;const Jt={active:sn,activatorEvent:ye,collisions:Ue,delta:{x:W.x,y:W.y},over:ht};pl.unstable_batchedUpdates(()=>{wt==null||wt(Jt),T({type:"onDragMove",event:Jt})})},[W.x,W.y]),x.useEffect(()=>{const{active:wt,activatorEvent:sn,collisions:ye,droppableContainers:Ue,scrollAdjustedTranslate:ht}=ue.current;if(!wt||Z.current==null||!sn||!ht)return;const{onDragOver:Jt}=ie.current,mr=Ue.get(ce),Kn=mr&&mr.rect.current?{id:mr.id,rect:mr.rect.current,data:mr.data,disabled:mr.disabled}:null,Rt={active:wt,activatorEvent:sn,collisions:ye,delta:{x:ht.x,y:ht.y},over:Kn};pl.unstable_batchedUpdates(()=>{ze(Kn),Jt==null||Jt(Rt),T({type:"onDragOver",event:Rt})})},[ce]),Su(()=>{ue.current={activatorEvent:ee,active:z,activeNode:Ce,collisionRect:L,collisions:F,droppableRects:Q,draggableNodes:B,draggingNode:Yt,draggingNodeRect:Ht,droppableContainers:j,over:we,scrollableAncestors:me,scrollAdjustedTranslate:W},q.current={initial:Ht,translated:L}},[z,Ce,F,L,B,Yt,Ht,Q,j,we,me,W]),lSe({...Fe,delta:U,draggingRect:L,pointerCoordinates:Je,scrollableAncestors:me,scrollableAncestorRects:Ne});const Wa=x.useMemo(()=>({active:z,activeNode:Ce,activeNodeRect:Re,activatorEvent:ee,collisions:F,containerNodeRect:nt,dragOverlay:ut,draggableNodes:B,droppableContainers:j,droppableRects:Q,over:we,measureDroppableContainers:Te,scrollableAncestors:me,scrollableAncestorRects:Ne,measuringConfiguration:se,measuringScheduled:ge,windowRect:vt}),[z,Ce,Re,ee,F,nt,ut,B,j,Q,we,Te,me,Ne,se,ge,vt]),An=x.useMemo(()=>({activatorEvent:ee,activators:an,active:z,activeNodeRect:Re,ariaDescribedById:{draggable:K},dispatch:_,draggableNodes:B,over:we,measureDroppableContainers:Te}),[ee,an,z,Re,_,K,B,we,Te]);return Me.createElement(wY.Provider,{value:k},Me.createElement(ww.Provider,{value:An},Me.createElement($Y.Provider,{value:Wa},Me.createElement(W4.Provider,{value:ct},c)),Me.createElement(NSe,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Me.createElement($_e,{...a,hiddenTextDescribedById:K}));function er(){const wt=(X==null?void 0:X.autoScrollEnabled)===!1,sn=typeof l=="object"?l.enabled===!1:l===!1,ye=I&&!wt&&!sn;return typeof l=="object"?{...l,enabled:ye}:{enabled:ye}}}),MSe=x.createContext(null),i$="button",DSe="Draggable";function BY(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=xw(DSe),{activators:i,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:f,over:m}=x.useContext(ww),{role:g=i$,roleDescription:y="draggable",tabIndex:v=0}=o??{},w=(l==null?void 0:l.id)===t,_=x.useContext(w?W4:MSe),[T,k]=cS(),[M,D]=cS(),I=wSe(i,t),P=fx(n);Su(()=>(f.set(t,{id:t,key:s,node:T,activatorNode:M,data:P}),()=>{const U=f.get(t);U&&U.key===s&&f.delete(t)}),[f,t]);const B=x.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":w&&g===i$?!0:void 0,"aria-roledescription":y,"aria-describedby":u.draggable}),[r,g,v,w,y,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:B,isDragging:w,listeners:r?void 0:I,node:T,over:m,setNodeRef:k,setActivatorNodeRef:D,transform:_}}function zY(){return x.useContext($Y)}const OSe="Droppable",PSe={timeout:25};function jY(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=xw(OSe),{active:i,dispatch:a,over:l,measureDroppableContainers:c}=x.useContext(ww),u=x.useRef({disabled:n}),f=x.useRef(!1),m=x.useRef(null),g=x.useRef(null),{disabled:y,updateMeasurementsFor:v,timeout:w}={...PSe,...o},_=fx(v??r),T=x.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(_.current)?_.current:[_.current]),g.current=null},w)},[w]),k=G4({callback:T,disabled:y||!i}),M=x.useCallback((B,U)=>{k&&(U&&(k.unobserve(U),f.current=!1),B&&k.observe(B))},[k]),[D,I]=cS(M),P=fx(t);return x.useEffect(()=>{!k||!D.current||(k.disconnect(),f.current=!1,k.observe(D.current))},[D,k]),x.useEffect(()=>(a({type:Ii.RegisterDroppable,element:{id:r,key:s,disabled:n,node:D,rect:m,data:P}}),()=>a({type:Ii.UnregisterDroppable,key:s,id:r})),[r]),x.useEffect(()=>{n!==u.current.disabled&&(a({type:Ii.SetDroppableDisabled,id:r,key:s,disabled:n}),u.current.disabled=n)},[r,s,n,a]),{active:i,rect:m,isOver:(l==null?void 0:l.id)===r,node:D,over:l,setNodeRef:I}}function LSe(e){let{animation:t,children:n}=e;const[r,o]=x.useState(null),[s,i]=x.useState(null),a=uS(n);return!n&&!r&&a&&o(a),Su(()=>{if(!s)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){o(null);return}Promise.resolve(t(c,s)).then(()=>{o(null)})},[t,r,s]),Me.createElement(Me.Fragment,null,n,r?x.cloneElement(r,{ref:i}):null)}const $Se={x:0,y:0,scaleX:1,scaleY:1};function FSe(e){let{children:t}=e;return Me.createElement(ww.Provider,{value:LY},Me.createElement(W4.Provider,{value:$Se},t))}const BSe={position:"fixed",touchAction:"none"},zSe=e=>j4(e)?"transform 250ms ease":void 0,jSe=x.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:s,className:i,rect:a,style:l,transform:c,transition:u=zSe}=e;if(!a)return null;const f=o?c:{...c,scaleX:1,scaleY:1},m={...BSe,width:a.width,height:a.height,top:a.top,left:a.left,transform:Tu.Transform.toString(f),transformOrigin:o&&r?F_e(r,a):void 0,transition:typeof u=="function"?u(r):u,...l};return Me.createElement(n,{className:i,style:m,ref:t},s)}),UY=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:s,className:i}=e;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(o[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[l,c]of Object.entries(o))n.node.style.setProperty(l,c);i!=null&&i.active&&n.node.classList.remove(i.active)}},USe=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Tu.Transform.toString(t)},{transform:Tu.Transform.toString(n)}]},HSe={duration:250,easing:"ease",keyframes:USe,sideEffects:UY({styles:{active:{opacity:"0"}}})};function VSe(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return z4((s,i)=>{if(t===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const c=PY(i);if(!c)return;const{transform:u}=qa(i).getComputedStyle(i),f=TY(u);if(!f)return;const m=typeof t=="function"?t:qSe(t);return MY(l,o.draggable.measure),m({active:{id:s,data:a.data,node:l,rect:o.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:i,rect:o.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:o,transform:f})})}function qSe(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...HSe,...e};return s=>{let{active:i,dragOverlay:a,transform:l,...c}=s;if(!t)return;const u={x:a.rect.left-i.rect.left,y:a.rect.top-i.rect.top},f={scaleX:l.scaleX!==1?i.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?i.rect.height*l.scaleY/a.rect.height:1},m={x:l.x-u.x,y:l.y-u.y,...f},g=o({...c,active:i,dragOverlay:a,transform:{initial:l,final:m}}),[y]=g,v=g[g.length-1];if(JSON.stringify(y)===JSON.stringify(v))return;const w=r==null?void 0:r({active:i,dragOverlay:a,...c}),_=a.node.animate(g,{duration:t,easing:n,fill:"forwards"});return new Promise(T=>{_.onfinish=()=>{w==null||w(),T()}})}}let a$=0;function GSe(e){return x.useMemo(()=>{if(e!=null)return a$++,a$},[e])}const gS=Me.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:s,modifiers:i,wrapperElement:a="div",className:l,zIndex:c=999}=e;const{activatorEvent:u,active:f,activeNodeRect:m,containerNodeRect:g,draggableNodes:y,droppableContainers:v,dragOverlay:w,over:_,measuringConfiguration:T,scrollableAncestors:k,scrollableAncestorRects:M,windowRect:D}=zY(),I=x.useContext(W4),P=GSe(f==null?void 0:f.id),B=FY(i,{activatorEvent:u,active:f,activeNodeRect:m,containerNodeRect:g,draggingNodeRect:w.rect,over:_,overlayNodeRect:w.rect,scrollableAncestors:k,scrollableAncestorRects:M,transform:I,windowRect:D}),U=s8(m),j=VSe({config:r,draggableNodes:y,droppableContainers:v,measuringConfiguration:T}),H=U?w.setRef:void 0;return Me.createElement(FSe,null,Me.createElement(LSe,{animation:j},f&&P?Me.createElement(jSe,{key:P,id:f.id,ref:H,as:a,activatorEvent:u,adjustScale:t,className:l,transition:s,rect:U,style:{zIndex:c,...o},transform:B},n):null))});function C1(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function WSe(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function p2(e){return e!==null&&e>=0}function YSe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function KSe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const m2={scaleX:1,scaleY:1},HY=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:o,overIndex:s,index:i}=e;const a=(t=n[o])!=null?t:r;if(!a)return null;const l=ZSe(n,i,o);if(i===o){const c=n[s];return c?{x:o<s?c.left+c.width-(a.left+a.width):c.left-a.left,y:0,...m2}:null}return i>o&&i<=s?{x:-a.width-l,y:0,...m2}:i<o&&i>=s?{x:a.width+l,y:0,...m2}:{x:0,y:0,...m2}};function ZSe(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return!r||!o&&!s?0:n<t?o?r.left-(o.left+o.width):s.left-(r.left+r.width):s?s.left-(r.left+r.width):r.left-(o.left+o.width)}const bS=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=C1(t,r,n),i=t[o],a=s[o];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},g2={scaleX:1,scaleY:1},i8=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:i}=e;const a=(t=s[n])!=null?t:r;if(!a)return null;if(o===n){const c=s[i];return c?{x:0,y:n<i?c.top+c.height-(a.top+a.height):c.top-a.top,...g2}:null}const l=JSe(s,o,n);return o>n&&o<=i?{x:0,y:-a.height-l,...g2}:o<n&&o>=i?{x:0,y:a.height+l,...g2}:{x:0,y:0,...g2}};function JSe(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return r?n<t?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const VY="Sortable",qY=Me.createContext({activeIndex:-1,containerId:VY,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:bS,disabled:{draggable:!1,droppable:!1}});function yS(e){let{children:t,id:n,items:r,strategy:o=bS,disabled:s=!1}=e;const{active:i,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=zY(),f=xw(VY,n),m=a.rect!==null,g=x.useMemo(()=>r.map(I=>typeof I=="object"&&"id"in I?I.id:I),[r]),y=i!=null,v=i?g.indexOf(i.id):-1,w=c?g.indexOf(c.id):-1,_=x.useRef(g),T=!YSe(g,_.current),k=w!==-1&&v===-1||T,M=KSe(s);Su(()=>{T&&y&&u(g)},[T,g,y,u]),x.useEffect(()=>{_.current=g},[g]);const D=x.useMemo(()=>({activeIndex:v,containerId:f,disabled:M,disableTransforms:k,items:g,overIndex:w,useDragOverlay:m,sortedRects:WSe(g,l),strategy:o}),[v,f,M.draggable,M.droppable,k,g,w,l,m,o]);return Me.createElement(qY.Provider,{value:D},t)}const XSe=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return C1(n,r,o).indexOf(t)},GY=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:a,previousContainerId:l,transition:c}=e;return!c||!r||a!==s&&o===i?!1:n?!0:i!==o&&t===l},QSe={duration:200,easing:"ease"},WY="transform",eTe=Tu.Transition.toString({property:WY,duration:0,easing:"linear"}),tTe={roleDescription:"sortable"};function nTe(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,i]=x.useState(null),a=x.useRef(n);return Su(()=>{if(!t&&n!==a.current&&r.current){const l=o.current;if(l){const c=Cb(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&i(u)}}n!==a.current&&(a.current=n)},[t,n,r,o]),x.useEffect(()=>{s&&i(null)},[s]),s}function a8(e){let{animateLayoutChanges:t=GY,attributes:n,disabled:r,data:o,getNewIndex:s=XSe,id:i,strategy:a,resizeObserverConfig:l,transition:c=QSe}=e;const{items:u,containerId:f,activeIndex:m,disabled:g,disableTransforms:y,sortedRects:v,overIndex:w,useDragOverlay:_,strategy:T}=x.useContext(qY),k=rTe(r,g),M=u.indexOf(i),D=x.useMemo(()=>({sortable:{containerId:f,index:M,items:u},...o}),[f,o,M,u]),I=x.useMemo(()=>u.slice(u.indexOf(i)),[u,i]),{rect:P,node:B,isOver:U,setNodeRef:j}=jY({id:i,data:D,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...l}}),{active:H,activatorEvent:q,activeNodeRect:z,attributes:Z,setNodeRef:X,listeners:J,isDragging:ee,over:re,setActivatorNodeRef:ie,transform:K}=BY({id:i,data:D,attributes:{...tTe,...n},disabled:k.draggable}),te=S_e(j,X),se=!!H,Q=se&&!y&&p2(m)&&p2(w),Te=!_&&ee,ge=Te&&Q?K:null,he=Q?ge??(a??T)({rects:v,activeNodeRect:z,activeIndex:m,overIndex:w,index:M}):null,Fe=p2(m)&&p2(w)?s({id:i,items:u,activeIndex:m,overIndex:w}):M,Oe=H==null?void 0:H.id,Re=x.useRef({activeId:Oe,items:u,newIndex:Fe,containerId:f}),nt=u!==Re.current.items,ue=t({active:H,containerId:f,isDragging:ee,isSorting:se,id:i,index:M,items:u,newIndex:Re.current.newIndex,previousItems:Re.current.items,previousContainerId:Re.current.containerId,transition:c,wasDragging:Re.current.activeId!=null}),et=nTe({disabled:!ue,index:M,node:B,rect:P});return x.useEffect(()=>{se&&Re.current.newIndex!==Fe&&(Re.current.newIndex=Fe),f!==Re.current.containerId&&(Re.current.containerId=f),u!==Re.current.items&&(Re.current.items=u)},[se,Fe,f,u]),x.useEffect(()=>{if(Oe===Re.current.activeId)return;if(Oe!=null&&Re.current.activeId==null){Re.current.activeId=Oe;return}const Yt=setTimeout(()=>{Re.current.activeId=Oe},50);return()=>clearTimeout(Yt)},[Oe]),{active:H,activeIndex:m,attributes:Z,data:D,rect:P,index:M,newIndex:Fe,items:u,isOver:U,isSorting:se,isDragging:ee,listeners:J,node:B,overIndex:w,over:re,setNodeRef:te,setActivatorNodeRef:ie,setDroppableNodeRef:j,setDraggableNodeRef:X,transform:et??he,transition:ut()};function ut(){if(et||nt&&Re.current.newIndex===M)return eTe;if(!(Te&&!j4(q)||!c)&&(se||ue))return Tu.Transition.toString({...c,property:WY})}}function rTe(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function vS(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const oTe=[cr.Down,cr.Right,cr.Up,cr.Left],sTe=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:i,scrollableAncestors:a}}=t;if(oTe.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const m=o.get(f.id);if(m)switch(e.code){case cr.Down:r.top<m.top&&l.push(f);break;case cr.Up:r.top>m.top&&l.push(f);break;case cr.Left:r.left>m.left&&l.push(f);break;case cr.Right:r.left<m.left&&l.push(f);break}});const c=EY({collisionRect:r,droppableRects:o,droppableContainers:l});let u=U4(c,"id");if(u===(i==null?void 0:i.id)&&c.length>1&&(u=c[1].id),u!=null){const f=s.get(n.id),m=s.get(u),g=m?o.get(m.id):null,y=m==null?void 0:m.node.current;if(y&&g&&f&&m){const w=H4(y).some((I,P)=>a[P]!==I),_=YY(f,m),T=iTe(f,m),k=w||!_?{x:0,y:0}:{x:T?r.width-g.width:0,y:T?r.height-g.height:0},M={x:g.left,y:g.top};return k.x&&k.y?M:hx(M,k)}}}};function YY(e,t){return!vS(e)||!vS(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function iTe(e,t){return!vS(e)||!vS(t)||!YY(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function l$(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function aTe(...e){return t=>{let n=!1;const r=e.map(o=>{const s=l$(o,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():l$(e[o],null)}}}}function Y4(...e){return x.useCallback(aTe(...e),e)}const lTe=[cr.Down,cr.Right,cr.Up,cr.Left],cTe=(e,{context:t})=>{var i,a;const{active:n,droppableRects:r,droppableContainers:o,collisionRect:s}=t;if(lTe.includes(e.code)){if(e.preventDefault(),!n||!s)return;const l=[];for(const f of o.getEnabled()){if(!f||f!=null&&f.disabled)return;const m=r.get(f.id);if(!m)return;const g=f.data.current;if(g){const{type:y,children:v}=g;if(y==="container"&&(v==null?void 0:v.length)>0&&((i=n.data.current)==null?void 0:i.type)!=="container")return}switch(e.code){case cr.Down:s.top<m.top&&l.push(f);break;case cr.Up:s.top>m.top&&l.push(f);break;case cr.Left:s.left>=m.left+m.width&&l.push(f);break;case cr.Right:s.left+s.width<=m.left&&l.push(f);break}}const c=EY({collisionRect:s,droppableRects:r,droppableContainers:l}),u=U4(c,"id");if(u!=null){const f=o.get(u),m=f==null?void 0:f.node.current,g=f==null?void 0:f.rect.current;if(m&&g)return f.id==="placeholder"?{x:g.left+(g.width-s.width)/2,y:g.top+(g.height-s.height)/2}:((a=f.data.current)==null?void 0:a.type)==="container"?{x:g.left+20,y:g.top+74}:{x:g.left,y:g.top}}}},KY="Kanban",Ew="KanbanBoard",em="KanbanColumn",ZY="KanbanColumnHandle",k1="KanbanItem",DN="KanbanItemHandle",l8="KanbanOverlay",c8=x.createContext(null);c8.displayName=KY;function kb(e){const t=x.useContext(c8);if(!t)throw new Error(`\`${e}\` must be used within \`${KY}\``);return t}function uTe(e){const{value:t,onValueChange:n,modifiers:r,strategy:o=i8,orientation:s="horizontal",onMove:i,getItemValue:a,accessibility:l,flatCursor:c=!1,...u}=e,f=x.useId(),[m,g]=x.useState(null),y=x.useRef(null),v=x.useRef(!1),w=XR(m0(r8),m0(o8),m0(V4,{coordinateGetter:cTe})),_=x.useCallback(j=>{if(typeof j=="object"&&!a)throw new Error("getItemValue is required when using array of objects");return a?a(j):j},[a]),T=x.useCallback(j=>{if(j in t)return j;for(const[H,q]of Object.entries(t))if(q.some(z=>_(z)===j))return H;return null},[t,_]),k=x.useCallback(j=>{var Z;if(m&&m in t)return hS({...j,droppableContainers:j.droppableContainers.filter(X=>X.id in t)});const H=U_e(j),q=H.length>0?H:_Y(j);let z=U4(q,"id");if(!z)return v.current&&(y.current=m),y.current?[{id:y.current}]:[];if(z in t){const X=t[z];if(X&&X.length>0){const J=hS({...j,droppableContainers:j.droppableContainers.filter(ee=>ee.id!==z&&X.some(re=>_(re)===ee.id))});J.length>0&&(z=((Z=J[0])==null?void 0:Z.id)??z)}}return y.current=z,[{id:z}]},[m,t,_]),M=x.useCallback(j=>{var H;(H=u.onDragStart)==null||H.call(u,j),!j.activatorEvent.defaultPrevented&&g(j.active.id)},[u]),D=x.useCallback(j=>{var X;if((X=u.onDragOver)==null||X.call(u,j),j.activatorEvent.defaultPrevented)return;const{active:H,over:q}=j;if(!q)return;const z=T(H.id),Z=T(q.id);if(!(!z||!Z))if(z===Z){const J=t[z];if(!J)return;const ee=J.findIndex(ie=>_(ie)===H.id),re=J.findIndex(ie=>_(ie)===q.id);if(ee!==re){const ie={...t};ie[z]=C1(J,ee,re),n==null||n(ie)}}else{const J=t[z],ee=t[Z];if(!J||!ee)return;const re=J.findIndex(te=>_(te)===H.id);if(re===-1)return;const ie=J[re];if(!ie)return;const K={...t,[z]:J.filter(te=>_(te)!==H.id),[Z]:[...ee,ie]};n==null||n(K),v.current=!0}},[t,T,_,n,u]),I=x.useCallback(j=>{var z;if((z=u.onDragEnd)==null||z.call(u,j),j.activatorEvent.defaultPrevented)return;const{active:H,over:q}=j;if(!q){g(null);return}if(H.id in t&&q.id in t){const Z=Object.keys(t).indexOf(H.id),X=Object.keys(t).indexOf(q.id);if(Z!==X){const J=Object.keys(t),ee=C1(J,Z,X),re={};for(const ie of ee){const K=t[ie];K&&(re[ie]=K)}i?i({...j,activeIndex:Z,overIndex:X}):n==null||n(re)}}else{const Z=T(H.id),X=T(q.id);if(!Z||!X){g(null);return}if(Z===X){const J=t[Z];if(!J){g(null);return}const ee=J.findIndex(ie=>_(ie)===H.id),re=J.findIndex(ie=>_(ie)===q.id);if(ee!==re){const ie={...t};ie[Z]=C1(J,ee,re),i?i({...j,activeIndex:ee,overIndex:re}):n==null||n(ie)}}}g(null),v.current=!1},[t,T,_,n,i,u]),P=x.useCallback(j=>{var H;(H=u.onDragCancel)==null||H.call(u,j),!j.activatorEvent.defaultPrevented&&(g(null),v.current=!1)},[u]),B=x.useMemo(()=>({onDragStart({active:j}){const H=j.id in t,q=H?"column":"item",z=H?Object.keys(t).indexOf(j.id)+1:(()=>{const X=T(j.id);return!X||!t[X]?1:t[X].findIndex(J=>_(J)===j.id)+1})(),Z=H?Object.keys(t).length:(()=>{var J;const X=T(j.id);return X?((J=t[X])==null?void 0:J.length)??0:0})();return`Picked up ${q} at position ${z} of ${Z}`},onDragOver({active:j,over:H}){if(!H)return;const q=j.id in t,z=q?"column":"item",Z=q?Object.keys(t).indexOf(H.id)+1:(()=>{const re=T(H.id);return!re||!t[re]?1:t[re].findIndex(ie=>_(ie)===H.id)+1})(),X=q?Object.keys(t).length:(()=>{var ie;const re=T(H.id);return re?((ie=t[re])==null?void 0:ie.length)??0:0})(),J=T(H.id),ee=T(j.id);return q?`${z} is now at position ${Z} of ${X}`:ee!==J?`${z} is now at position ${Z} of ${X} in ${J}`:`${z} is now at position ${Z} of ${X}`},onDragEnd({active:j,over:H}){if(!H)return;const q=j.id in t,z=q?"column":"item",Z=q?Object.keys(t).indexOf(H.id)+1:(()=>{const re=T(H.id);return!re||!t[re]?1:t[re].findIndex(ie=>_(ie)===H.id)+1})(),X=q?Object.keys(t).length:(()=>{var ie;const re=T(H.id);return re?((ie=t[re])==null?void 0:ie.length)??0:0})(),J=T(H.id),ee=T(j.id);return q?`${z} was dropped at position ${Z} of ${X}`:ee!==J?`${z} was dropped at position ${Z} of ${X} in ${J}`:`${z} was dropped at position ${Z} of ${X}`},onDragCancel({active:j}){return`Dragging was cancelled. ${j.id in t?"column":"item"} was dropped.`}}),[t,T,_]),U=x.useMemo(()=>({id:f,items:t,modifiers:r,strategy:o,orientation:s,activeId:m,setActiveId:g,getItemValue:_,flatCursor:c}),[f,t,m,r,o,s,_,c]);return h.jsx(c8.Provider,{value:U,children:h.jsx(mS,{collisionDetection:k,modifiers:r,sensors:w,...u,id:f,measuring:{droppable:{strategy:W1.Always}},onDragStart:M,onDragOver:D,onDragEnd:I,onDragCancel:P,accessibility:{announcements:B,screenReaderInstructions:{draggable:`
            To pick up a kanban item or column, press space or enter.
            While dragging, use the arrow keys to move the item.
            Press space or enter again to drop the item in its new position, or press escape to cancel.
          `},...l}})})}const K4=x.createContext(!1);K4.displayName=Ew;const JY=x.forwardRef((e,t)=>{const{asChild:n,className:r,...o}=e,s=kb(Ew),i=x.useMemo(()=>Object.keys(s.items),[s.items]),a=n?Nm:"div";return h.jsx(K4.Provider,{value:!0,children:h.jsx(yS,{items:i,strategy:s.orientation==="horizontal"?HY:i8,children:h.jsx(a,{"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-slot":"kanban-board",...o,ref:t,className:Qe("flex size-full gap-4",s.orientation==="horizontal"?"flex-row":"flex-col",r)})})})});JY.displayName=Ew;const u8=x.createContext(null);u8.displayName=em;function dTe(e){const t=x.useContext(u8);if(!t)throw new Error(`\`${e}\` must be used within \`${em}\``);return t}const fTe=e=>GY({...e,wasDragging:!0}),XY=x.forwardRef((e,t)=>{const{value:n,asChild:r,asHandle:o,disabled:s,className:i,style:a,...l}=e,c=x.useId(),u=kb(em),f=x.useContext(K4),m=x.useContext(Z4);if(!f&&!m)throw new Error(`\`${em}\` must be used within \`${Ew}\` or \`${l8}\``);if(n==="")throw new Error(`\`${em}\` value cannot be an empty string`);const{attributes:g,listeners:y,setNodeRef:v,setActivatorNodeRef:w,transform:_,transition:T,isDragging:k}=a8({id:n,disabled:s,animateLayoutChanges:fTe}),M=Y4(t,U=>{s||v(U)}),D=x.useMemo(()=>({transform:Tu.Transform.toString(_),transition:T,...a}),[_,T,a]),I=x.useMemo(()=>(u.items[n]??[]).map(j=>u.getItemValue(j)),[u.items,n,u.getItemValue]),P=x.useMemo(()=>({id:c,attributes:g,listeners:y,setActivatorNodeRef:w,isDragging:k,disabled:s}),[c,g,y,w,k,s]),B=r?Nm:"div";return h.jsx(u8.Provider,{value:P,children:h.jsx(yS,{items:I,strategy:u.orientation==="horizontal"?HY:i8,children:h.jsx(B,{id:c,"data-disabled":s,"data-dragging":k?"":void 0,"data-slot":"kanban-column",...l,...o&&!s?g:{},...o&&!s?y:{},ref:M,style:D,className:Qe("bg-muted flex size-full flex-col gap-2 rounded-lg p-2.5 aria-disabled:pointer-events-none aria-disabled:opacity-50",{"touch-none select-none":o,"cursor-default":u.flatCursor,"data-dragging:cursor-grabbing":!u.flatCursor,"cursor-grab":!k&&o&&!u.flatCursor,"opacity-50":k,"pointer-events-none opacity-50":s},i)})})})});XY.displayName=em;const QY=x.forwardRef((e,t)=>{const{asChild:n,disabled:r,className:o,...s}=e,i=kb(em),a=dTe(ZY),l=r??a.disabled,c=Y4(t,f=>{l||a.setActivatorNodeRef(f)}),u=n?Nm:"button";return h.jsx(u,{type:"button","aria-controls":a.id,"data-disabled":l,"data-dragging":a.isDragging?"":void 0,"data-slot":"kanban-column-handle",...s,...l?{}:a.attributes,...l?{}:a.listeners,ref:c,className:Qe("select-none disabled:pointer-events-none disabled:opacity-50",i.flatCursor?"cursor-default":"cursor-grab data-dragging:cursor-grabbing",o),disabled:l})});QY.displayName=ZY;const d8=x.createContext(null);d8.displayName=k1;function hTe(e){const t=x.useContext(d8);if(!t)throw new Error(`\`${e}\` must be used within \`${k1}\``);return t}const eK=x.forwardRef((e,t)=>{const{value:n,style:r,asHandle:o,asChild:s,disabled:i,className:a,...l}=e,c=x.useId(),u=kb(k1),f=x.useContext(K4),m=x.useContext(Z4);if(!f&&!m)throw new Error(`\`${k1}\` must be used within \`${Ew}\``);const{attributes:g,listeners:y,setNodeRef:v,setActivatorNodeRef:w,transform:_,transition:T,isDragging:k}=a8({id:n,disabled:i});if(n==="")throw new Error(`\`${k1}\` value cannot be an empty string`);const M=Y4(t,B=>{i||v(B)}),D=x.useMemo(()=>({transform:Tu.Transform.toString(_),transition:T,...r}),[_,T,r]),I=x.useMemo(()=>({id:c,attributes:g,listeners:y,setActivatorNodeRef:w,isDragging:k,disabled:i}),[c,g,y,w,k,i]),P=s?Nm:"div";return h.jsx(d8.Provider,{value:I,children:h.jsx(P,{id:c,"data-disabled":i,"data-dragging":k?"":void 0,"data-slot":"kanban-item",...l,...o&&!i?g:{},...o&&!i?y:{},ref:M,style:D,className:Qe("focus-visible:ring-ring focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden",{"touch-none select-none":o,"cursor-default":u.flatCursor,"data-dragging:cursor-grabbing":!u.flatCursor,"cursor-grab":!k&&o&&!u.flatCursor,"opacity-50":k,"pointer-events-none opacity-50":i},a)})})});eK.displayName=k1;const pTe=x.forwardRef((e,t)=>{const{asChild:n,disabled:r,className:o,...s}=e,i=kb(DN),a=hTe(DN),l=r??a.disabled,c=Y4(t,f=>{l||a.setActivatorNodeRef(f)}),u=n?Nm:"button";return h.jsx(u,{type:"button","aria-controls":a.id,"data-disabled":l,"data-dragging":a.isDragging?"":void 0,"data-slot":"kanban-item-handle",...s,...l?{}:a.attributes,...l?{}:a.listeners,ref:c,className:Qe("select-none disabled:pointer-events-none disabled:opacity-50",i.flatCursor?"cursor-default":"cursor-grab data-dragging:cursor-grabbing",o),disabled:l})});pTe.displayName=DN;const Z4=x.createContext(!1);Z4.displayName=l8;const mTe={sideEffects:UY({styles:{active:{opacity:"0.4"}}})};function gTe(e){var c;const{container:t,children:n,...r}=e,o=kb(l8),[s,i]=x.useState(!1);x.useLayoutEffect(()=>i(!0),[]);const a=t??(s?(c=globalThis.document)==null?void 0:c.body:null);if(!a)return null;const l=o.activeId&&o.activeId in o.items?"column":"item";return pl.createPortal(h.jsx(gS,{dropAnimation:mTe,modifiers:o.modifiers,className:Qe(!o.flatCursor&&"cursor-grabbing"),...r,children:h.jsx(Z4.Provider,{value:!0,children:o.activeId&&n?typeof n=="function"?n({value:o.activeId,variant:l}):n:null})}),a)}const ON=24,tK=4,px=64,C_=30,pd=0,Vp=24,PN=9,c$=10,nK=6048e5,bTe=864e5,rK=6e4,yTe=36e5,u$=Symbol.for("constructDateFrom");function ds(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&u$ in e?e[u$](t):e instanceof Date?new e.constructor(t):new Date(t)}function pr(e,t){return ds(t||e,e)}function Sf(e,t,n){const r=pr(e,n==null?void 0:n.in);return isNaN(t)?ds(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function J4(e,t,n){const r=pr(e,n==null?void 0:n.in);if(isNaN(t))return ds(e,NaN);if(!t)return r;const o=r.getDate(),s=ds(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);const i=s.getDate();return o>=i?s:(r.setFullYear(s.getFullYear(),s.getMonth(),o),r)}function vTe(e,t,n){return ds(e,+pr(e)+t)}function A1(e,t,n){return vTe(e,t*yTe)}let xTe={};function _w(){return xTe}function Pc(e,t){var a,l,c,u;const n=_w(),r=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,o=pr(e,t==null?void 0:t.in),s=o.getDay(),i=(s<r?7:0)+s-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function mx(e,t){return Pc(e,{...t,weekStartsOn:1})}function oK(e,t){const n=pr(e,t==null?void 0:t.in),r=n.getFullYear(),o=ds(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const s=mx(o),i=ds(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const a=mx(i);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function d$(e){const t=pr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Mm(e,...t){const n=ds.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function Wf(e,t){const n=pr(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Nf(e,t,n){const[r,o]=Mm(n==null?void 0:n.in,e,t),s=Wf(r),i=Wf(o),a=+s-d$(s),l=+i-d$(i);return Math.round((a-l)/bTe)}function wTe(e,t){const n=oK(e,t),r=ds(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),mx(r)}function ETe(e,t,n){const r=pr(e,n==null?void 0:n.in);return r.setTime(r.getTime()+t*rK),r}function f8(e,t,n){return Sf(e,t*7,n)}function _Te(e,t,n){return J4(e,t*12,n)}function sK(e,t,n){const[r,o]=[+pr(e.start,n==null?void 0:n.in),+pr(e.end,n==null?void 0:n.in)].sort((a,l)=>a-l),[s,i]=[+pr(t.start,n==null?void 0:n.in),+pr(t.end,n==null?void 0:n.in)].sort((a,l)=>a-l);return r<i&&s<o}function STe(e,t){let n,r=t==null?void 0:t.in;return e.forEach(o=>{!r&&typeof o=="object"&&(r=ds.bind(null,o));const s=pr(o,r);(!n||n<s||isNaN(+s))&&(n=s)}),ds(r,n||NaN)}function TTe(e,t){let n,r=t==null?void 0:t.in;return e.forEach(o=>{!r&&typeof o=="object"&&(r=ds.bind(null,o));const s=pr(o,r);(!n||n>s||isNaN(+s))&&(n=s)}),ds(r,n||NaN)}function CTe(e){return ds(e,Date.now())}function bo(e,t,n){const[r,o]=Mm(n==null?void 0:n.in,e,t);return+Wf(r)==+Wf(o)}function iK(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function kTe(e){return!(!iK(e)&&typeof e!="number"||isNaN(+pr(e)))}function ATe(e,t,n){const[r,o]=Mm(n==null?void 0:n.in,e,t),s=r.getFullYear()-o.getFullYear(),i=r.getMonth()-o.getMonth();return s*12+i}function NTe(e,t,n){const[r,o]=Mm(n==null?void 0:n.in,e,t),s=f$(r,o),i=Math.abs(Nf(r,o));r.setDate(r.getDate()-s*i);const a=+(f$(r,o)===-s),l=s*(i-a);return l===0?0:l}function f$(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function ITe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function RTe(e,t){return+pr(e)-+pr(t)}function Y1(e,t,n){const r=RTe(e,t)/rK;return ITe(n==null?void 0:n.roundingMethod)(r)}function aK(e,t){const n=pr(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function X4(e,t){const[n,r]=Mm(e,t.start,t.end);return{start:n,end:r}}function lK(e,t){const{start:n,end:r}=X4(t==null?void 0:t.in,e);let o=+n>+r;const s=o?+n:+r,i=o?r:n;i.setHours(0,0,0,0);let a=1;const l=[];for(;+i<=s;)l.push(ds(n,i)),i.setDate(i.getDate()+a),i.setHours(0,0,0,0);return o?l.reverse():l}function cK(e,t){const{start:n,end:r}=X4(t==null?void 0:t.in,e);let o=+n>+r;const s=o?+n:+r,i=o?r:n;i.setMinutes(0,0,0);let a=1;const l=[];for(;+i<=s;)l.push(ds(n,i)),i.setHours(i.getHours()+a);return o?l.reverse():l}function MTe(e,t){const{start:n,end:r}=X4(t==null?void 0:t.in,e);let o=+n>+r;const s=o?+n:+r,i=o?r:n;i.setHours(0,0,0,0),i.setDate(1);let a=1;const l=[];for(;+i<=s;)l.push(ds(n,i)),i.setMonth(i.getMonth()+a);return o?l.reverse():l}function uK(e,t){const n=pr(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function DTe(e,t){const n=pr(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function dK(e,t){const n=pr(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function OTe(e,t){const{start:n,end:r}=X4(t==null?void 0:t.in,e);let o=+n>+r;const s=o?+n:+r,i=o?r:n;i.setHours(0,0,0,0),i.setMonth(0,1);let a=1;const l=[];for(;+i<=s;)l.push(ds(n,i)),i.setFullYear(i.getFullYear()+a);return o?l.reverse():l}function Ab(e,t){var a,l,c,u;const n=_w(),r=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,o=pr(e,t==null?void 0:t.in),s=o.getDay(),i=(s<r?-7:0)+6-(s-r);return o.setDate(o.getDate()+i),o.setHours(23,59,59,999),o}function PTe(e,t){return Ab(e,{...t,weekStartsOn:1})}const LTe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$Te=(e,t,n)=>{let r;const o=LTe[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function G5(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const FTe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},BTe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zTe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jTe={date:G5({formats:FTe,defaultWidth:"full"}),time:G5({formats:BTe,defaultWidth:"full"}),dateTime:G5({formats:zTe,defaultWidth:"full"})},UTe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},HTe=(e,t,n,r)=>UTe[e];function Uy(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;o=e.formattingValues[a]||e.formattingValues[i]}else{const i=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;o=e.values[a]||e.values[i]}const s=e.argumentCallback?e.argumentCallback(t):t;return o[s]}}const VTe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qTe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},GTe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},WTe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},YTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},KTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ZTe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},JTe={ordinalNumber:ZTe,era:Uy({values:VTe,defaultWidth:"wide"}),quarter:Uy({values:qTe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Uy({values:GTe,defaultWidth:"wide"}),day:Uy({values:WTe,defaultWidth:"wide"}),dayPeriod:Uy({values:YTe,defaultWidth:"wide",formattingValues:KTe,defaultFormattingWidth:"wide"})};function Hy(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(o);if(!s)return null;const i=s[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?QTe(a,f=>f.test(i)):XTe(a,f=>f.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=t.slice(i.length);return{value:c,rest:u}}}function XTe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function QTe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function e4e(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],s=t.match(e.parsePattern);if(!s)return null;let i=e.valueCallback?e.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const a=t.slice(o.length);return{value:i,rest:a}}}const t4e=/^(\d+)(th|st|nd|rd)?/i,n4e=/\d+/i,r4e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},o4e={any:[/^b/i,/^(a|c)/i]},s4e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},i4e={any:[/1/i,/2/i,/3/i,/4/i]},a4e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},l4e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},c4e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},u4e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},d4e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},f4e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},h4e={ordinalNumber:e4e({matchPattern:t4e,parsePattern:n4e,valueCallback:e=>parseInt(e,10)}),era:Hy({matchPatterns:r4e,defaultMatchWidth:"wide",parsePatterns:o4e,defaultParseWidth:"any"}),quarter:Hy({matchPatterns:s4e,defaultMatchWidth:"wide",parsePatterns:i4e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Hy({matchPatterns:a4e,defaultMatchWidth:"wide",parsePatterns:l4e,defaultParseWidth:"any"}),day:Hy({matchPatterns:c4e,defaultMatchWidth:"wide",parsePatterns:u4e,defaultParseWidth:"any"}),dayPeriod:Hy({matchPatterns:d4e,defaultMatchWidth:"any",parsePatterns:f4e,defaultParseWidth:"any"})},t1={code:"en-US",formatDistance:$Te,formatLong:jTe,formatRelative:HTe,localize:JTe,match:h4e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function p4e(e,t){const n=pr(e,t==null?void 0:t.in);return Nf(n,dK(n))+1}function fK(e,t){const n=pr(e,t==null?void 0:t.in),r=+mx(n)-+wTe(n);return Math.round(r/nK)+1}function hK(e,t){var u,f,m,g;const n=pr(e,t==null?void 0:t.in),r=n.getFullYear(),o=_w(),s=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??o.firstWeekContainsDate??((g=(m=o.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,i=ds((t==null?void 0:t.in)||e,0);i.setFullYear(r+1,0,s),i.setHours(0,0,0,0);const a=Pc(i,t),l=ds((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Pc(l,t);return+n>=+a?r+1:+n>=+c?r:r-1}function m4e(e,t){var a,l,c,u;const n=_w(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,o=hK(e,t),s=ds((t==null?void 0:t.in)||e,0);return s.setFullYear(o,0,r),s.setHours(0,0,0,0),Pc(s,t)}function pK(e,t){const n=pr(e,t==null?void 0:t.in),r=+Pc(n,t)-+m4e(n,t);return Math.round(r/nK)+1}function To(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Gh={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return To(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):To(n+1,2)},d(e,t){return To(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return To(e.getHours()%12||12,t.length)},H(e,t){return To(e.getHours(),t.length)},m(e,t){return To(e.getMinutes(),t.length)},s(e,t){return To(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return To(o,t.length)}},Vg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},h$={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Gh.y(e,t)},Y:function(e,t,n,r){const o=hK(e,r),s=o>0?o:1-o;if(t==="YY"){const i=s%100;return To(i,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):To(s,t.length)},R:function(e,t){const n=oK(e);return To(n,t.length)},u:function(e,t){const n=e.getFullYear();return To(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return To(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return To(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Gh.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return To(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=pK(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):To(o,t.length)},I:function(e,t,n){const r=fK(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):To(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Gh.d(e,t)},D:function(e,t,n){const r=p4e(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):To(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return To(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return To(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return To(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(r===12?o=Vg.noon:r===0?o=Vg.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(r>=17?o=Vg.evening:r>=12?o=Vg.afternoon:r>=4?o=Vg.morning:o=Vg.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Gh.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Gh.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):To(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):To(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Gh.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Gh.s(e,t)},S:function(e,t){return Gh.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return m$(r);case"XXXX":case"XX":return Up(r);case"XXXXX":case"XXX":default:return Up(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return m$(r);case"xxxx":case"xx":return Up(r);case"xxxxx":case"xxx":default:return Up(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+p$(r,":");case"OOOO":default:return"GMT"+Up(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+p$(r,":");case"zzzz":default:return"GMT"+Up(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return To(r,t.length)},T:function(e,t,n){return To(+e,t.length)}};function p$(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),s=r%60;return s===0?n+String(o):n+String(o)+t+To(s,2)}function m$(e,t){return e%60===0?(e>0?"-":"+")+To(Math.abs(e)/60,2):Up(e,t)}function Up(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=To(Math.trunc(r/60),2),s=To(r%60,2);return n+o+t+s}const g$=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},mK=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},g4e=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return g$(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",g$(r,t)).replace("{{time}}",mK(o,t))},b4e={p:mK,P:g4e},y4e=/^D+$/,v4e=/^Y+$/,x4e=["D","DD","YY","YYYY"];function w4e(e){return y4e.test(e)}function E4e(e){return v4e.test(e)}function _4e(e,t,n){const r=S4e(e,t,n);if(console.warn(r),x4e.includes(e))throw new RangeError(r)}function S4e(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const T4e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,C4e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,k4e=/^'([^]*?)'?$/,A4e=/''/g,N4e=/[a-zA-Z]/;function ar(e,t,n){var u,f,m,g,y,v,w,_;const r=_w(),o=(n==null?void 0:n.locale)??r.locale??t1,s=(n==null?void 0:n.firstWeekContainsDate)??((f=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((v=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((_=(w=r.locale)==null?void 0:w.options)==null?void 0:_.weekStartsOn)??0,a=pr(e,n==null?void 0:n.in);if(!kTe(a))throw new RangeError("Invalid time value");let l=t.match(C4e).map(T=>{const k=T[0];if(k==="p"||k==="P"){const M=b4e[k];return M(T,o.formatLong)}return T}).join("").match(T4e).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const k=T[0];if(k==="'")return{isToken:!1,value:I4e(T)};if(h$[k])return{isToken:!0,value:T};if(k.match(N4e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:T}});o.localize.preprocessor&&(l=o.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:o};return l.map(T=>{if(!T.isToken)return T.value;const k=T.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&E4e(k)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&w4e(k))&&_4e(k,t,String(e));const M=h$[k[0]];return M(a,k,o.localize,c)}).join("")}function I4e(e){const t=e.match(k4e);return t?t[1].replace(A4e,"'"):e}function R4e(e,t){const n=pr(e,t==null?void 0:t.in),r=n.getFullYear(),o=n.getMonth(),s=ds(n,0);return s.setFullYear(r,o+1,0),s.setHours(0,0,0,0),s.getDate()}function N1(e,t){return pr(e,t==null?void 0:t.in).getHours()}function gx(e,t){return pr(e,t==null?void 0:t.in).getMinutes()}function M4e(e,t){return pr(e,t==null?void 0:t.in).getMonth()}function D4e(e,t){return pr(e,t==null?void 0:t.in).getFullYear()}function O4e(e,t){return+pr(e)>+pr(t)}function xS(e,t){return+pr(e)<+pr(t)}function gK(e){return+pr(e)<Date.now()}function wS(e,t,n){const[r,o]=Mm(n==null?void 0:n.in,e,t);return r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()}function P4e(e,t,n){const[r,o]=Mm(n==null?void 0:n.in,e,t);return r.getFullYear()===o.getFullYear()}function h1(e,t){return bo(ds(e,e),CTe(e))}function L4e(e,t,n){const r=+pr(e,n==null?void 0:n.in),[o,s]=[+pr(t.start,n==null?void 0:n.in),+pr(t.end,n==null?void 0:n.in)].sort((i,a)=>i-a);return r>=o&&r<=s}function $4e(e,t,n){const r=pr(e,n==null?void 0:n.in),o=r.getFullYear(),s=r.getDate(),i=ds(e,0);i.setFullYear(o,t,15),i.setHours(0,0,0,0);const a=R4e(i);return r.setMonth(t,Math.min(s,a)),r}function F4e(e,t,n){const r=pr(e,n==null?void 0:n.in);return isNaN(+r)?ds(e,NaN):(r.setFullYear(t),r)}function B4e(e,t,n){return J4(e,-1,n)}function z4e(e,t,n){return f8(e,-1,n)}function bK(e){switch(e||"sky"){case"sky":return"bg-sky-200/50 hover:bg-sky-200/40 text-sky-950/80 dark:bg-sky-400/25 dark:hover:bg-sky-400/20 dark:text-sky-200 shadow-sky-700/8";case"amber":return"bg-amber-200/50 hover:bg-amber-200/40 text-amber-950/80 dark:bg-amber-400/25 dark:hover:bg-amber-400/20 dark:text-amber-200 shadow-amber-700/8";case"violet":return"bg-violet-200/50 hover:bg-violet-200/40 text-violet-950/80 dark:bg-violet-400/25 dark:hover:bg-violet-400/20 dark:text-violet-200 shadow-violet-700/8";case"rose":return"bg-rose-200/50 hover:bg-rose-200/40 text-rose-950/80 dark:bg-rose-400/25 dark:hover:bg-rose-400/20 dark:text-rose-200 shadow-rose-700/8";case"emerald":return"bg-emerald-200/50 hover:bg-emerald-200/40 text-emerald-950/80 dark:bg-emerald-400/25 dark:hover:bg-emerald-400/20 dark:text-emerald-200 shadow-emerald-700/8";case"orange":return"bg-orange-200/50 hover:bg-orange-200/40 text-orange-950/80 dark:bg-orange-400/25 dark:hover:bg-orange-400/20 dark:text-orange-200 shadow-orange-700/8";default:return"bg-sky-200/50 hover:bg-sky-200/40 text-sky-950/80 dark:bg-sky-400/25 dark:hover:bg-sky-400/20 dark:text-sky-200 shadow-sky-700/8"}}function j4e(e,t){return e&&t?"rounded":e?"rounded-l rounded-r-none":t?"rounded-r rounded-l-none":"rounded-none"}function fm(e){const t=new Date(e.start),n=new Date(e.end);return e.allDay||t.getDate()!==n.getDate()}function U4e(e,t){return e.filter(n=>{const r=new Date(n.start);return bo(t,r)}).sort((n,r)=>new Date(n.start).getTime()-new Date(r.start).getTime())}function b$(e){return[...e].sort((t,n)=>{const r=fm(t),o=fm(n);return r&&!o?-1:!r&&o?1:new Date(t.start).getTime()-new Date(n.start).getTime()})}function H4e(e,t){return e.filter(n=>{if(!fm(n))return!1;const r=new Date(n.start),o=new Date(n.end);return!bo(t,r)&&(bo(t,o)||t>r&&t<o)})}function V4e(e,t){return e.filter(n=>{const r=new Date(n.start),o=new Date(n.end);return bo(t,r)||bo(t,o)||t>r&&t<o})}function y$(e,t){return e.filter(n=>{const r=new Date(n.start),o=new Date(n.end);return bo(t,r)||bo(t,o)||t>r&&t<o}).sort((n,r)=>new Date(n.start).getTime()-new Date(r.start).getTime())}function q4e(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}const Pp=e=>ar(e,gx(e)===0?"ha":"h:mma").toLowerCase();function v$({event:e,isFirstDay:t=!0,isLastDay:n=!0,isDragging:r,onClick:o,className:s,children:i,currentTime:a,dndListeners:l,dndAttributes:c,onMouseDown:u,onTouchStart:f}){const m=a?new Date(new Date(a).getTime()+(new Date(e.end).getTime()-new Date(e.start).getTime())):new Date(e.end),g=gK(m);return h.jsx("button",{className:Qe("focus-visible:border-ring focus-visible:ring-ring/50 flex size-full overflow-hidden px-1 text-left font-medium backdrop-blur-md transition outline-none select-none focus-visible:ring-[3px] data-dragging:cursor-grabbing data-dragging:shadow-lg data-past-event:line-through sm:px-2",bK(e.color),j4e(t,n),s),"data-dragging":r||void 0,"data-past-event":g||void 0,onClick:o,onMouseDown:u,onTouchStart:f,...l,...c,children:i})}function hm({event:e,view:t,isDragging:n,onClick:r,showTime:o,currentTime:s,isFirstDay:i=!0,isLastDay:a=!0,children:l,className:c,dndListeners:u,dndAttributes:f,onMouseDown:m,onTouchStart:g}){const y=e.color,v=x.useMemo(()=>s||new Date(e.start),[s,e.start]),w=x.useMemo(()=>s?new Date(new Date(s).getTime()+(new Date(e.end).getTime()-new Date(e.start).getTime())):new Date(e.end),[s,e.start,e.end]),_=x.useMemo(()=>Y1(w,v),[v,w]),T=()=>e.allDay?"All day":_<45?Pp(v):`${Pp(v)} - ${Pp(w)}`;return t==="month"?h.jsx(v$,{event:e,isFirstDay:i,isLastDay:a,isDragging:n,onClick:r,className:Qe("mt-[var(--event-gap)] h-[var(--event-height)] items-center text-[10px] sm:text-xs",c),currentTime:s,dndListeners:u,dndAttributes:f,onMouseDown:m,onTouchStart:g,children:l||h.jsxs("span",{className:"truncate",children:[!e.allDay&&h.jsxs("span",{className:"truncate font-normal opacity-70 sm:text-[11px]",children:[Pp(v)," "]}),e.title]})}):t==="week"||t==="day"?h.jsx(v$,{event:e,isFirstDay:i,isLastDay:a,isDragging:n,onClick:r,className:Qe("py-1",_<45?"items-center":"flex-col",t==="week"?"text-[10px] sm:text-xs":"text-xs",c),currentTime:s,dndListeners:u,dndAttributes:f,onMouseDown:m,onTouchStart:g,children:_<45?h.jsxs("div",{className:"truncate",children:[e.title," ",o&&h.jsx("span",{className:"opacity-70",children:Pp(v)})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"truncate font-medium",children:e.title}),o&&h.jsx("div",{className:"truncate font-normal opacity-70 sm:text-[11px]",children:T()})]})}):h.jsxs("button",{className:Qe("focus-visible:border-ring focus-visible:ring-ring/50 flex w-full flex-col gap-1 rounded p-2 text-left transition outline-none focus-visible:ring-[3px] data-past-event:line-through data-past-event:opacity-90",bK(y),c),"data-past-event":gK(new Date(e.end))||void 0,onClick:r,onMouseDown:m,onTouchStart:g,...u,...f,children:[h.jsx("div",{className:"text-sm font-medium",children:e.title}),h.jsxs("div",{className:"text-xs opacity-70",children:[e.allDay?h.jsx("span",{children:"All day"}):h.jsxs("span",{className:"uppercase",children:[Pp(v)," -"," ",Pp(w)]}),e.location&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"px-1 opacity-35",children:"  "}),h.jsx("span",{children:e.location})]})]}),e.description&&h.jsx("div",{className:"my-1 text-xs opacity-90",children:e.description})]})}const yK=x.createContext({activeEvent:null,activeId:null,activeView:null,currentTime:null,eventHeight:null,isMultiDay:!1,multiDayWidth:null,dragHandlePosition:null}),vK=()=>x.useContext(yK);function G4e({children:e,onEventUpdate:t}){var B,U;const[n,r]=x.useState(null),[o,s]=x.useState(null),[i,a]=x.useState(null),[l,c]=x.useState(null),[u,f]=x.useState(null),[m,g]=x.useState(!1),[y,v]=x.useState(null),[w,_]=x.useState(null),T=x.useRef({height:0}),k=XR(m0(r8,{activationConstraint:{distance:5}}),m0(o8,{activationConstraint:{delay:250,tolerance:5}}),m0(q4,{activationConstraint:{distance:5}})),M=x.useId(),D=j=>{const{active:H}=j;if(!H.data.current){console.error("Missing data in drag start event",j);return}const{event:q,view:z,height:Z,isMultiDay:X,multiDayWidth:J,dragHandlePosition:ee}=H.data.current;r(q),s(H.id),a(z),c(new Date(q.start)),g(X||!1),v(J||null),_(ee||null),Z&&(T.current.height=Z,f(Z))},I=j=>{const{over:H}=j;if(H&&n&&H.data.current){const{date:q,time:z}=H.data.current;if(z!==void 0&&i!=="month"){const Z=new Date(q),X=Math.floor(z),J=z-X;let ee=0;J<.125?ee=0:J<.375?ee=15:J<.625?ee=30:ee=45,Z.setHours(X,ee,0,0),(!l||Z.getHours()!==l.getHours()||Z.getMinutes()!==l.getMinutes()||Z.getDate()!==l.getDate()||Z.getMonth()!==l.getMonth()||Z.getFullYear()!==l.getFullYear())&&c(Z)}else if(i==="month"){const Z=new Date(q);l&&Z.setHours(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()),(!l||Z.getDate()!==l.getDate()||Z.getMonth()!==l.getMonth()||Z.getFullYear()!==l.getFullYear())&&c(Z)}}},P=j=>{const{active:H,over:q}=j;if(!q||!n||!l){r(null),s(null),a(null),c(null),f(null),g(!1),v(null),_(null);return}try{if(!H.data.current||!q.data.current)throw new Error("Missing data in drag event");const z=H.data.current,Z=q.data.current;if(!z.event||!Z.date)throw new Error("Missing required event data");const X=z.event,J=Z.date,ee=Z.time,re=new Date(J);if(ee!==void 0){const Te=Math.floor(ee),ge=ee-Te;let Ce=0;ge<.125?Ce=0:ge<.375?Ce=15:ge<.625?Ce=30:Ce=45,re.setHours(Te,Ce,0,0)}else re.setHours(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds());const ie=new Date(X.start),K=new Date(X.end),te=Y1(K,ie),se=ETe(re,te);(ie.getFullYear()!==re.getFullYear()||ie.getMonth()!==re.getMonth()||ie.getDate()!==re.getDate()||ie.getHours()!==re.getHours()||ie.getMinutes()!==re.getMinutes())&&t({...X,start:re,end:se})}catch(z){console.error("Error in drag end handler:",z)}finally{r(null),s(null),a(null),c(null),f(null),g(!1),v(null),_(null)}};return h.jsx(mS,{id:M,sensors:k,onDragStart:D,onDragOver:I,onDragEnd:P,children:h.jsxs(yK.Provider,{value:{activeEvent:n,activeId:o,activeView:i,currentTime:l,eventHeight:u,isMultiDay:m,multiDayWidth:y,dragHandlePosition:w},children:[e,h.jsx(gS,{adjustScale:!1,dropAnimation:null,children:n&&i&&h.jsx("div",{style:{height:u?`${u}px`:"auto",width:m&&y?`${y}%`:"100%"},children:h.jsx(hm,{event:n,view:i,isDragging:!0,showTime:i!=="month",currentTime:l||void 0,isFirstDay:((B=w==null?void 0:w.data)==null?void 0:B.isFirstDay)!==!1,isLastDay:((U=w==null?void 0:w.data)==null?void 0:U.isLastDay)!==!1})})})]})})}function xK(e,t){const[n,r]=x.useState(0),[o,s]=x.useState(!1);return x.useEffect(()=>{const i=()=>{const l=new Date,c=l.getHours(),u=l.getMinutes(),f=(c-pd)*60+u,m=0,g=(Vp-pd)*60,y=(f-m)/(g-m)*100;let v=!1;if(t==="day")v=bo(l,e);else if(t==="week"){const w=Pc(e,{weekStartsOn:0}),_=Ab(e,{weekStartsOn:0});v=L4e(l,{start:w,end:_})}r(y),s(v)};i();const a=setInterval(i,6e4);return()=>clearInterval(a)},[e,t]),{currentTimePosition:n,currentTimeVisible:o}}function W4e({eventHeight:e,eventGap:t}){const n=x.useRef(null),r=x.useRef(null),[o,s]=x.useState(null);x.useLayoutEffect(()=>{if(!n.current)return;const a=()=>{n.current&&s(n.current.clientHeight)};return a(),r.current||(r.current=new ResizeObserver(()=>{a()})),r.current.observe(n.current),()=>{r.current&&r.current.disconnect()}},[]);const i=x.useMemo(()=>a=>{if(!o)return a;const l=Math.floor(o/(e+t));return a<=l?a:l>0?l-1:0},[o,e,t]);return{contentRef:n,contentHeight:o,getVisibleEventCount:i}}function Y4e({currentDate:e,events:t,onEventSelect:n}){const r=x.useMemo(()=>(console.log("Agenda view updating with date:",e.toISOString()),Array.from({length:C_},(i,a)=>Sf(new Date(e),a))),[e]),o=(i,a)=>{a.stopPropagation(),console.log("Agenda view event clicked:",i),n(i)},s=r.some(i=>y$(t,i).length>0);return h.jsx("div",{className:"border-border/70 border-t px-4",children:s?r.map(i=>{const a=y$(t,i);return a.length===0?null:h.jsxs("div",{className:"border-border/70 relative my-12 border-t",children:[h.jsx("span",{className:"bg-background absolute -top-3 left-0 flex h-6 items-center pe-4 text-[10px] uppercase data-today:font-medium sm:pe-4 sm:text-xs","data-today":h1(i)||void 0,children:ar(i,"d MMM, EEEE")}),h.jsx("div",{className:"mt-6 space-y-2",children:a.map(l=>h.jsx(hm,{event:l,view:"agenda",onClick:c=>o(l,c)},l.id))})]},i.toString())}):h.jsxs("div",{className:"flex min-h-[70svh] flex-col items-center justify-center py-16 text-center",children:[h.jsx(B1,{size:32,className:"text-muted-foreground/50 mb-2"}),h.jsx("h3",{className:"text-lg font-medium",children:"No events found"}),h.jsx("p",{className:"text-muted-foreground",children:"There are no events scheduled for this time period."})]})})}function K4e({currentDate:e,events:t,onEventSelect:n,onEventCreate:r}){const o=x.useMemo(()=>{const g=Wf(e);return cK({start:A1(g,pd),end:A1(g,Vp-1)})},[e]),s=x.useMemo(()=>t.filter(g=>{const y=new Date(g.start),v=new Date(g.end);return bo(e,y)||bo(e,v)||e>y&&e<v}).sort((g,y)=>new Date(g.start).getTime()-new Date(y.start).getTime()),[e,t]),i=x.useMemo(()=>s.filter(g=>g.allDay||fm(g)),[s]),a=x.useMemo(()=>s.filter(g=>!g.allDay&&!fm(g)),[s]),l=x.useMemo(()=>{const g=[],y=Wf(e),v=[...a].sort((_,T)=>{const k=new Date(_.start),M=new Date(T.start),D=new Date(_.end),I=new Date(T.end);if(k<M)return-1;if(k>M)return 1;const P=Y1(D,k);return Y1(I,M)-P}),w=[];return v.forEach(_=>{const T=new Date(_.start),k=new Date(_.end),M=bo(e,T)?T:y,D=bo(e,k)?k:A1(y,24),I=N1(M)+gx(M)/60,P=N1(D)+gx(D)/60,B=(I-pd)*px,U=(P-I)*px;let j=0,H=!1;for(;!H;){const X=w[j]||[];X.length===0?(w[j]=X,H=!0):X.some(ee=>sK({start:M,end:D},{start:new Date(ee.event.start),end:new Date(ee.event.end)}))?j++:H=!0}const q=w[j]||[];w[j]=q,q.push({event:_,end:D});const z=j===0?1:.9,Z=j===0?0:j*.1;g.push({event:_,top:B,height:U,left:Z,width:z,zIndex:10+j})}),g},[e,a]),c=(g,y)=>{y.stopPropagation(),n(g)},u=i.length>0,{currentTimePosition:f,currentTimeVisible:m}=xK(e,"day");return h.jsxs("div",{"data-slot":"day-view",className:"contents",children:[u&&h.jsx("div",{className:"border-border/70 bg-muted/50 border-t",children:h.jsxs("div",{className:"grid grid-cols-[3rem_1fr] sm:grid-cols-[4rem_1fr]",children:[h.jsx("div",{className:"relative",children:h.jsx("span",{className:"text-muted-foreground/70 absolute bottom-0 left-0 h-6 w-16 max-w-full pe-2 text-right text-[10px] sm:pe-4 sm:text-xs",children:"All day"})}),h.jsx("div",{className:"border-border/70 relative border-r p-1 last:border-r-0",children:i.map(g=>{const y=new Date(g.start),v=new Date(g.end),w=bo(e,y),_=bo(e,v);return h.jsx(hm,{onClick:T=>c(g,T),event:g,view:"month",isFirstDay:w,isLastDay:_,children:h.jsx("div",{children:g.title})},`spanning-${g.id}`)})})]})}),h.jsxs("div",{className:"border-border/70 grid flex-1 grid-cols-[3rem_1fr] overflow-hidden border-t sm:grid-cols-[4rem_1fr]",children:[h.jsx("div",{children:o.map((g,y)=>h.jsx("div",{className:"border-border/70 relative h-[var(--week-cells-height)] border-b last:border-b-0",children:y>0&&h.jsx("span",{className:"bg-background text-muted-foreground/70 absolute -top-3 left-0 flex h-6 w-16 max-w-full items-center justify-end pe-2 text-[10px] sm:pe-4 sm:text-xs",children:ar(g,"h a")})},g.toString()))}),h.jsxs("div",{className:"relative",children:[l.map(g=>h.jsx("div",{className:"absolute z-10 px-0.5",style:{top:`${g.top}px`,height:`${g.height}px`,left:`${g.left*100}%`,width:`${g.width*100}%`,zIndex:g.zIndex},children:h.jsx("div",{className:"size-full",children:h.jsx(h8,{event:g.event,view:"day",onClick:y=>c(g.event,y),showTime:!0,height:g.height})})},g.event.id)),m&&h.jsx("div",{className:"pointer-events-none absolute right-0 left-0 z-20",style:{top:`${f}%`},children:h.jsxs("div",{className:"relative flex items-center",children:[h.jsx("div",{className:"bg-primary absolute -left-1 h-2 w-2 rounded-full"}),h.jsx("div",{className:"bg-primary h-[2px] w-full"})]})}),o.map(g=>{const y=N1(g);return h.jsx("div",{className:"border-border/70 relative h-[var(--week-cells-height)] border-b last:border-b-0",children:[0,1,2,3].map(v=>{const w=y+v*.25;return h.jsx(p8,{id:`day-cell-${e.toISOString()}-${w}`,date:e,time:w,className:Qe("absolute h-[calc(var(--week-cells-height)/4)] w-full",v===0&&"top-0",v===1&&"top-[calc(var(--week-cells-height)/4)]",v===2&&"top-[calc(var(--week-cells-height)/4*2)]",v===3&&"top-[calc(var(--week-cells-height)/4*3)]"),onClick:()=>{const _=new Date(e);_.setHours(y),_.setMinutes(v*15),r(_)}},`${g.toString()}-${v}`)})},g.toString())})]})]})]})}function h8({event:e,view:t,showTime:n,onClick:r,height:o,isMultiDay:s,multiDayWidth:i,isFirstDay:a=!0,isLastDay:l=!0,"aria-hidden":c}){var U;const{activeId:u}=vK(),f=x.useRef(null),[m,g]=x.useState(null),y=new Date(e.start),v=new Date(e.end),w=s||e.allDay||NTe(v,y)>=1,{attributes:_,listeners:T,setNodeRef:k,transform:M,isDragging:D}=BY({id:`${e.id}-${t}`,data:{event:e,view:t,height:o||((U=f.current)==null?void 0:U.offsetHeight)||null,isMultiDay:w,multiDayWidth:i,dragHandlePosition:m,isFirstDay:a,isLastDay:l}}),I=j=>{if(f.current){const H=f.current.getBoundingClientRect();g({x:j.clientX-H.left,y:j.clientY-H.top})}};if(D||u===`${e.id}-${t}`)return h.jsx("div",{ref:k,className:"opacity-0",style:{height:o||"auto"}});const P=M?{transform:Tu.Translate.toString(M),height:o||"auto",width:w&&i?`${i}%`:void 0}:{height:o||"auto",width:w&&i?`${i}%`:void 0},B=j=>{if(f.current){const H=f.current.getBoundingClientRect(),q=j.touches[0];q&&g({x:q.clientX-H.left,y:q.clientY-H.top})}};return h.jsx("div",{ref:j=>{k(j),f&&(f.current=j)},style:P,className:"touch-none",children:h.jsx(hm,{event:e,view:t,showTime:n,isFirstDay:a,isLastDay:l,isDragging:D,onClick:r,onMouseDown:I,onTouchStart:B,dndListeners:T,dndAttributes:_,"aria-hidden":c})})}function p8({id:e,date:t,time:n,children:r,className:o,onClick:s}){const{activeEvent:i}=vK(),{setNodeRef:a,isOver:l}=jY({id:e,data:{date:t,time:n}}),c=n!==void 0?`${Math.floor(n)}:${Math.round((n-Math.floor(n))*60).toString().padStart(2,"0")}`:null;return h.jsx("div",{ref:a,onClick:s,className:Qe("data-dragging:bg-accent flex h-full flex-col overflow-hidden px-0.5 py-1 sm:px-1",o),title:c?`${c}`:void 0,"data-dragging":l&&i?!0:void 0,children:r})}const Z4e=({color:e="currentColor",size:t=24,className:n,...r})=>Me.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:e,...r,className:"remixicon "+(n||"")},Me.createElement("path",{d:"M9 1V3H15V1H17V3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H7V1H9ZM20 10H4V19H20V10ZM15.0355 11.136L16.4497 12.5503L11.5 17.5L7.96447 13.9645L9.37868 12.5503L11.5 14.6716L15.0355 11.136ZM7 5H4V8H20V5H17V6H15V5H9V6H7V5Z"})),x$=({color:e="currentColor",size:t=24,className:n,...r})=>Me.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:e,...r,className:"remixicon "+(n||"")},Me.createElement("path",{d:"M9 1V3H15V1H17V3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H7V1H9ZM20 11H4V19H20V11ZM7 5H4V9H20V5H17V7H15V5H9V7H7V5Z"})),J4e=({color:e="currentColor",size:t=24,className:n,...r})=>Me.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:e,...r,className:"remixicon "+(n||"")},Me.createElement("path",{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"}));function X4e(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Array(12).fill(0);let LN=1;class Q4e{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...o}=t,s=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:LN++,i=this.toasts.find(l=>l.id===s),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:r}),{...l,...t,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...o,dismissible:a,id:s}),s},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const o=Promise.resolve(t instanceof Function?t():t);let s=r!==void 0,i;const a=o.then(async c=>{if(i=["resolve",c],Me.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(tCe(c)&&!c.ok){s=!1;const f=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,y=typeof f=="object"&&!Me.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:m,...y})}else if(c instanceof Error){s=!1;const f=typeof n.error=="function"?await n.error(c):n.error,m=typeof n.description=="function"?await n.description(c):n.description,y=typeof f=="object"&&!Me.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:m,...y})}else if(n.success!==void 0){s=!1;const f=typeof n.success=="function"?await n.success(c):n.success,m=typeof n.description=="function"?await n.description(c):n.description,y=typeof f=="object"&&!Me.isValidElement(f)?f:{message:f};this.create({id:r,type:"success",description:m,...y})}}).catch(async c=>{if(i=["reject",c],n.error!==void 0){s=!1;const u=typeof n.error=="function"?await n.error(c):n.error,f=typeof n.description=="function"?await n.description(c):n.description,g=typeof u=="object"&&!Me.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:f,...g})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>a.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||LN++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const vc=new Q4e,eCe=(e,t)=>{const n=(t==null?void 0:t.id)||LN++;return vc.addToast({title:e,...t,id:n}),n},tCe=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",nCe=eCe,rCe=()=>vc.toasts,oCe=()=>vc.getActiveToasts(),Ui=Object.assign(nCe,{success:vc.success,info:vc.info,warning:vc.warning,error:vc.error,custom:vc.custom,message:vc.message,promise:vc.promise,dismiss:vc.dismiss,loading:vc.loading},{getHistory:rCe,getToasts:oCe});X4e("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function sCe({events:e=[],onEventAdd:t,onEventUpdate:n,onEventDelete:r,className:o,initialView:s="month"}){const[i,a]=x.useState(new Date),[l,c]=x.useState(s),[u,f]=x.useState(!1),[m,g]=x.useState(null);x.useEffect(()=>{const P=B=>{if(!(u||B.target instanceof HTMLInputElement||B.target instanceof HTMLTextAreaElement||B.target instanceof HTMLElement&&B.target.isContentEditable))switch(B.key.toLowerCase()){case"m":c("month");break;case"w":c("week");break;case"d":c("day");break;case"a":c("agenda");break}};return window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P)}},[u]);const y=()=>{l==="month"?a(B4e(i)):l==="week"?a(z4e(i)):l==="day"?a(Sf(i,-1)):l==="agenda"&&a(Sf(i,-C_))},v=()=>{l==="month"?a(J4(i,1)):l==="week"?a(f8(i,1)):l==="day"?a(Sf(i,1)):l==="agenda"&&a(Sf(i,C_))},w=()=>{a(new Date)},_=P=>{console.log("Event selected:",P),g(P),f(!0)},T=P=>{console.log("Creating new event at:",P);const B=P.getMinutes(),U=B%15;U!==0&&(U<7.5?P.setMinutes(B-U):P.setMinutes(B+(15-U)),P.setSeconds(0),P.setMilliseconds(0));const j={id:"",title:"",start:P,end:q4e(P,1),allDay:!1};g(j),f(!0)},k=P=>{P.id?(n==null||n(P),Ui(`Event "${P.title}" updated`,{description:ar(new Date(P.start),"MMM d, yyyy"),position:"bottom-left"})):(t==null||t({...P,id:Math.random().toString(36).substring(2,11)}),Ui(`Event "${P.title}" added`,{description:ar(new Date(P.start),"MMM d, yyyy"),position:"bottom-left"})),f(!1),g(null)},M=P=>{const B=e.find(U=>U.id===P);r==null||r(P),f(!1),g(null),B&&Ui(`Event "${B.title}" deleted`,{description:ar(new Date(B.start),"MMM d, yyyy"),position:"bottom-left"})},D=P=>{n==null||n(P),Ui(`Event "${P.title}" moved`,{description:ar(new Date(P.start),"MMM d, yyyy"),position:"bottom-left"})},I=x.useMemo(()=>{if(l==="month")return ar(i,"MMMM yyyy");if(l==="week"){const P=Pc(i,{weekStartsOn:0}),B=Ab(i,{weekStartsOn:0});return wS(P,B)?ar(P,"MMMM yyyy"):`${ar(P,"MMM")} - ${ar(B,"MMM yyyy")}`}else{if(l==="day")return h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"min-[480px]:hidden","aria-hidden":"true",children:ar(i,"MMM d, yyyy")}),h.jsx("span",{className:"max-[479px]:hidden min-md:hidden","aria-hidden":"true",children:ar(i,"MMMM d, yyyy")}),h.jsx("span",{className:"max-md:hidden",children:ar(i,"EEE MMMM d, yyyy")})]});if(l==="agenda"){const P=i,B=Sf(i,C_-1);return wS(P,B)?ar(P,"MMMM yyyy"):`${ar(P,"MMM")} - ${ar(B,"MMM yyyy")}`}else return ar(i,"MMMM yyyy")}},[i,l]);return h.jsx("div",{className:"flex min-h-[calc(100vh-var(--header-height)-3rem)] flex-col rounded-lg border has-data-[slot=month-view]:flex-1",style:{"--event-height":`${ON}px`,"--event-gap":`${tK}px`,"--week-cells-height":`${px}px`},children:h.jsxs(G4e,{onEventUpdate:D,children:[h.jsxs("div",{className:Qe("flex items-center justify-between p-2 sm:p-4",o),children:[h.jsxs("div",{className:"flex items-center gap-1 sm:gap-4",children:[h.jsxs(_r,{variant:"outline",className:"max-[479px]:aspect-square max-[479px]:p-0!",onClick:w,children:[h.jsx(Z4e,{className:"min-[480px]:hidden",size:16,"aria-hidden":"true"}),h.jsx("span",{className:"max-[479px]:sr-only",children:"Today"})]}),h.jsxs("div",{className:"flex items-center sm:gap-2",children:[h.jsx(_r,{variant:"ghost",size:"icon",onClick:y,"aria-label":"Previous",children:h.jsx(w1,{size:16,"aria-hidden":"true"})}),h.jsx(_r,{variant:"ghost",size:"icon",onClick:v,"aria-label":"Next",children:h.jsx(Af,{size:16,"aria-hidden":"true"})})]}),h.jsx("h2",{className:"text-sm font-semibold sm:text-lg md:text-xl",children:I})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(mw,{children:[h.jsx(gw,{asChild:!0,children:h.jsxs(_r,{variant:"outline",className:"gap-1.5 max-[479px]:h-8",children:[h.jsxs("span",{children:[h.jsx("span",{className:"min-[480px]:hidden","aria-hidden":"true",children:l.charAt(0).toUpperCase()}),h.jsx("span",{className:"max-[479px]:sr-only",children:l.charAt(0).toUpperCase()+l.slice(1)})]}),h.jsx(Lf,{className:"-me-1 opacity-60",size:16,"aria-hidden":"true"})]})}),h.jsxs(bw,{align:"end",className:"min-w-32",children:[h.jsxs(cu,{onClick:()=>c("month"),children:["Month ",h.jsx(h2,{children:"M"})]}),h.jsxs(cu,{onClick:()=>c("week"),children:["Week ",h.jsx(h2,{children:"W"})]}),h.jsxs(cu,{onClick:()=>c("day"),children:["Day ",h.jsx(h2,{children:"D"})]}),h.jsxs(cu,{onClick:()=>c("agenda"),children:["Agenda ",h.jsx(h2,{children:"A"})]})]})]}),h.jsxs(_r,{className:"max-[479px]:aspect-square max-[479px]:p-0!",size:"sm",onClick:()=>{g(null),f(!0)},children:[h.jsx(qf,{className:"opacity-60 sm:-ms-1",size:16,"aria-hidden":"true"}),h.jsx("span",{className:"max-sm:sr-only",children:"New event"})]})]})]}),h.jsxs("div",{className:"flex flex-1 flex-col",children:[l==="month"&&h.jsx(gke,{currentDate:i,events:e,onEventSelect:_,onEventCreate:T}),l==="week"&&h.jsx(bke,{currentDate:i,events:e,onEventSelect:_,onEventCreate:T}),l==="day"&&h.jsx(K4e,{currentDate:i,events:e,onEventSelect:_,onEventCreate:T}),l==="agenda"&&h.jsx(Y4e,{currentDate:i,events:e,onEventSelect:_})]}),h.jsx(mke,{event:m,isOpen:u,onClose:()=>{f(!1),g(null)},onSave:k,onDelete:M})]})})}function iCe(e,t,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:n}).format(t).split(/\s/g).slice(2).join(" ")}const W5={},dv={};function qp(e,t){try{const r=(W5[e]||(W5[e]=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format))(t).split("GMT")[1];return r in dv?dv[r]:w$(r,r.split(":"))}catch{if(e in dv)return dv[e];const n=e==null?void 0:e.match(aCe);return n?w$(e,n.slice(1)):NaN}}const aCe=/([+-]\d\d):?(\d\d)?/;function w$(e,t){const n=+(t[0]||0),r=+(t[1]||0),o=+(t[2]||0)/60;return dv[e]=n*60+r>0?n*60+r+o:n*60-r-o}class md extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(qp(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),wK(this),$N(this)):this.setTime(Date.now())}static tz(t,...n){return n.length?new md(...n,t):new md(Date.now(),t)}withTimeZone(t){return new md(+this,t)}getTimezoneOffset(){const t=-qp(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),$N(this),+this}[Symbol.for("constructDateFrom")](t){return new md(+new Date(t),this.timeZone)}}const E$=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!E$.test(e))return;const t=e.replace(E$,"$1UTC");md.prototype[t]&&(e.startsWith("get")?md.prototype[e]=function(){return this.internal[t]()}:(md.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),lCe(this),+this},md.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),$N(this),+this}))});function $N(e){e.internal.setTime(+e),e.internal.setUTCSeconds(e.internal.getUTCSeconds()-Math.round(-qp(e.timeZone,e)*60))}function lCe(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),wK(e)}function wK(e){const t=qp(e.timeZone,e),n=t>0?Math.floor(t):Math.ceil(t),r=new Date(+e);r.setUTCHours(r.getUTCHours()-1);const o=-new Date(+e).getTimezoneOffset(),s=-new Date(+r).getTimezoneOffset(),i=o-s,a=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();i&&a&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+i);const l=o-n;l&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+l);const c=new Date(+e);c.setUTCSeconds(0);const u=o>0?c.getSeconds():(c.getSeconds()-60)%60,f=Math.round(-(qp(e.timeZone,e)*60))%60;(f||u)&&(e.internal.setUTCSeconds(e.internal.getUTCSeconds()+f),Date.prototype.setUTCSeconds.call(e,Date.prototype.getUTCSeconds.call(e)+f+u));const m=qp(e.timeZone,e),g=m>0?Math.floor(m):Math.ceil(m),v=-new Date(+e).getTimezoneOffset()-g,w=g!==n,_=v-l;if(w&&_){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+_);const T=qp(e.timeZone,e),k=T>0?Math.floor(T):Math.ceil(T),M=g-k;M&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+M),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+M))}}class If extends md{static tz(t,...n){return n.length?new If(...n,t):new If(Date.now(),t)}toISOString(){const[t,n,r]=this.tzComponents(),o=`${t}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+o}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,n,r,o]=this.internal.toUTCString().split(" ");return`${t==null?void 0:t.slice(0,-1)} ${r} ${n} ${o}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[n,r,o]=this.tzComponents();return`${t} GMT${n}${r}${o} (${iCe(this.timeZone,this)})`}toLocaleString(t,n){return Date.prototype.toLocaleString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleDateString(t,n){return Date.prototype.toLocaleDateString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleTimeString(t,n){return Date.prototype.toLocaleTimeString.call(this,t,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),n=t>0?"-":"+",r=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),o=String(Math.abs(t)%60).padStart(2,"0");return[n,r,o]}withTimeZone(t){return new If(+this,t)}[Symbol.for("constructDateFrom")](t){return new If(+new Date(t),this.timeZone)}}const _$=5,cCe=4;function uCe(e,t){const n=t.startOfMonth(e),r=n.getDay()>0?n.getDay():7,o=t.addDays(e,-r+1),s=t.addDays(o,_$*7-1);return t.getMonth(e)===t.getMonth(s)?_$:cCe}function EK(e,t){const n=t.startOfMonth(e),r=n.getDay();return r===1?n:r===0?t.addDays(n,-6):t.addDays(n,-1*(r-1))}function dCe(e,t){const n=EK(e,t),r=uCe(e,t);return t.addDays(n,r*7-1)}const _K={...t1,labels:{labelDayButton:(e,t,n,r)=>{let o;r&&typeof r.format=="function"?o=r.format.bind(r):o=(i,a)=>ar(i,a,{locale:t1,...n});let s=o(e,"PPPP");return t.today&&(s=`Today, ${s}`),t.selected&&(s=`${s}, selected`),s},labelMonthDropdown:"Choose the Month",labelNext:"Go to the Next Month",labelPrevious:"Go to the Previous Month",labelWeekNumber:e=>`Week ${e}`,labelYearDropdown:"Choose the Year",labelGrid:(e,t,n)=>{let r;return n&&typeof n.format=="function"?r=n.format.bind(n):r=(o,s)=>ar(o,s,{locale:t1,...t}),r(e,"LLLL yyyy")},labelGridcell:(e,t,n,r)=>{let o;r&&typeof r.format=="function"?o=r.format.bind(r):o=(i,a)=>ar(i,a,{locale:t1,...n});let s=o(e,"PPPP");return t!=null&&t.today&&(s=`Today, ${s}`),s},labelNav:"Navigation bar",labelWeekNumberHeader:"Week Number",labelWeekday:(e,t,n)=>{let r;return n&&typeof n.format=="function"?r=n.format.bind(n):r=(o,s)=>ar(o,s,{locale:t1,...t}),r(e,"cccc")}}};class Ql{constructor(t,n){this.Date=Date,this.today=()=>{var r;return(r=this.overrides)!=null&&r.today?this.overrides.today():this.options.timeZone?If.tz(this.options.timeZone):new this.Date},this.newDate=(r,o,s)=>{var i;return(i=this.overrides)!=null&&i.newDate?this.overrides.newDate(r,o,s):this.options.timeZone?new If(r,o,s,this.options.timeZone):new Date(r,o,s)},this.addDays=(r,o)=>{var s;return(s=this.overrides)!=null&&s.addDays?this.overrides.addDays(r,o):Sf(r,o)},this.addMonths=(r,o)=>{var s;return(s=this.overrides)!=null&&s.addMonths?this.overrides.addMonths(r,o):J4(r,o)},this.addWeeks=(r,o)=>{var s;return(s=this.overrides)!=null&&s.addWeeks?this.overrides.addWeeks(r,o):f8(r,o)},this.addYears=(r,o)=>{var s;return(s=this.overrides)!=null&&s.addYears?this.overrides.addYears(r,o):_Te(r,o)},this.differenceInCalendarDays=(r,o)=>{var s;return(s=this.overrides)!=null&&s.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,o):Nf(r,o)},this.differenceInCalendarMonths=(r,o)=>{var s;return(s=this.overrides)!=null&&s.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,o):ATe(r,o)},this.eachMonthOfInterval=r=>{var o;return(o=this.overrides)!=null&&o.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):MTe(r)},this.eachYearOfInterval=r=>{var a;const o=(a=this.overrides)!=null&&a.eachYearOfInterval?this.overrides.eachYearOfInterval(r):OTe(r),s=new Set(o.map(l=>this.getYear(l)));if(s.size===o.length)return o;const i=[];return s.forEach(l=>{i.push(new Date(l,0,1))}),i},this.endOfBroadcastWeek=r=>{var o;return(o=this.overrides)!=null&&o.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):dCe(r,this)},this.endOfISOWeek=r=>{var o;return(o=this.overrides)!=null&&o.endOfISOWeek?this.overrides.endOfISOWeek(r):PTe(r)},this.endOfMonth=r=>{var o;return(o=this.overrides)!=null&&o.endOfMonth?this.overrides.endOfMonth(r):aK(r)},this.endOfWeek=(r,o)=>{var s;return(s=this.overrides)!=null&&s.endOfWeek?this.overrides.endOfWeek(r,o):Ab(r,this.options)},this.endOfYear=r=>{var o;return(o=this.overrides)!=null&&o.endOfYear?this.overrides.endOfYear(r):DTe(r)},this.format=(r,o,s)=>{var a;const i=(a=this.overrides)!=null&&a.format?this.overrides.format(r,o,this.options):ar(r,o,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(i):i},this.getISOWeek=r=>{var o;return(o=this.overrides)!=null&&o.getISOWeek?this.overrides.getISOWeek(r):fK(r)},this.getMonth=(r,o)=>{var s;return(s=this.overrides)!=null&&s.getMonth?this.overrides.getMonth(r,this.options):M4e(r,this.options)},this.getYear=(r,o)=>{var s;return(s=this.overrides)!=null&&s.getYear?this.overrides.getYear(r,this.options):D4e(r,this.options)},this.getWeek=(r,o)=>{var s;return(s=this.overrides)!=null&&s.getWeek?this.overrides.getWeek(r,this.options):pK(r,this.options)},this.isAfter=(r,o)=>{var s;return(s=this.overrides)!=null&&s.isAfter?this.overrides.isAfter(r,o):O4e(r,o)},this.isBefore=(r,o)=>{var s;return(s=this.overrides)!=null&&s.isBefore?this.overrides.isBefore(r,o):xS(r,o)},this.isDate=r=>{var o;return(o=this.overrides)!=null&&o.isDate?this.overrides.isDate(r):iK(r)},this.isSameDay=(r,o)=>{var s;return(s=this.overrides)!=null&&s.isSameDay?this.overrides.isSameDay(r,o):bo(r,o)},this.isSameMonth=(r,o)=>{var s;return(s=this.overrides)!=null&&s.isSameMonth?this.overrides.isSameMonth(r,o):wS(r,o)},this.isSameYear=(r,o)=>{var s;return(s=this.overrides)!=null&&s.isSameYear?this.overrides.isSameYear(r,o):P4e(r,o)},this.max=r=>{var o;return(o=this.overrides)!=null&&o.max?this.overrides.max(r):STe(r)},this.min=r=>{var o;return(o=this.overrides)!=null&&o.min?this.overrides.min(r):TTe(r)},this.setMonth=(r,o)=>{var s;return(s=this.overrides)!=null&&s.setMonth?this.overrides.setMonth(r,o):$4e(r,o)},this.setYear=(r,o)=>{var s;return(s=this.overrides)!=null&&s.setYear?this.overrides.setYear(r,o):F4e(r,o)},this.startOfBroadcastWeek=(r,o)=>{var s;return(s=this.overrides)!=null&&s.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):EK(r,this)},this.startOfDay=r=>{var o;return(o=this.overrides)!=null&&o.startOfDay?this.overrides.startOfDay(r):Wf(r)},this.startOfISOWeek=r=>{var o;return(o=this.overrides)!=null&&o.startOfISOWeek?this.overrides.startOfISOWeek(r):mx(r)},this.startOfMonth=r=>{var o;return(o=this.overrides)!=null&&o.startOfMonth?this.overrides.startOfMonth(r):uK(r)},this.startOfWeek=(r,o)=>{var s;return(s=this.overrides)!=null&&s.startOfWeek?this.overrides.startOfWeek(r,this.options):Pc(r,this.options)},this.startOfYear=r=>{var o;return(o=this.overrides)!=null&&o.startOfYear?this.overrides.startOfYear(r):dK(r)},this.options={locale:_K,...t},this.overrides=n}getDigitMap(){const{numerals:t="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:t}),r={};for(let o=0;o<10;o++)r[o.toString()]=n.format(o);return r}replaceDigits(t){const n=this.getDigitMap();return t.replace(/\d/g,r=>n[r]||r)}formatNumber(t){return this.replaceDigits(t.toString())}getMonthYearOrder(){var n;const t=(n=this.options.locale)==null?void 0:n.code;return t&&Ql.yearFirstLocales.has(t)?"year-first":"month-first"}formatMonthYear(t){const{locale:n,timeZone:r,numerals:o}=this.options,s=n==null?void 0:n.code;if(s&&Ql.yearFirstLocales.has(s))try{return new Intl.DateTimeFormat(s,{month:"long",year:"numeric",timeZone:r,numberingSystem:o}).format(t)}catch{}const i=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(t,i)}}Ql.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const kd=new Ql;class SK{constructor(t,n,r=kd){this.date=t,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(t,n)),this.dateLib=r,this.isoDate=r.format(t,"yyyy-MM-dd"),this.displayMonthId=r.format(n,"yyyy-MM"),this.dateMonthId=r.format(t,"yyyy-MM")}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class fCe{constructor(t,n){this.date=t,this.weeks=n}}class hCe{constructor(t,n){this.days=n,this.weekNumber=t}}function pCe(e){return Me.createElement("button",{...e})}function mCe(e){return Me.createElement("span",{...e})}function gCe(e){const{size:t=24,orientation:n="left",className:r}=e;return Me.createElement("svg",{className:r,width:t,height:t,viewBox:"0 0 24 24"},n==="up"&&Me.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&Me.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&Me.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&Me.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function bCe(e){const{day:t,modifiers:n,...r}=e;return Me.createElement("td",{...r})}function yCe(e){const{day:t,modifiers:n,...r}=e,o=Me.useRef(null);return Me.useEffect(()=>{var s;n.focused&&((s=o.current)==null||s.focus())},[n.focused]),Me.createElement("button",{ref:o,...r})}var Rn;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(Rn||(Rn={}));var Is;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(Is||(Is={}));var mu;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(mu||(mu={}));var Ul;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(Ul||(Ul={}));function vCe(e){const{options:t,className:n,components:r,classNames:o,...s}=e,i=[o[Rn.Dropdown],n].join(" "),a=t==null?void 0:t.find(({value:l})=>l===s.value);return Me.createElement("span",{"data-disabled":s.disabled,className:o[Rn.DropdownRoot]},Me.createElement(r.Select,{className:i,...s},t==null?void 0:t.map(({value:l,label:c,disabled:u})=>Me.createElement(r.Option,{key:l,value:l,disabled:u},c))),Me.createElement("span",{className:o[Rn.CaptionLabel],"aria-hidden":!0},a==null?void 0:a.label,Me.createElement(r.Chevron,{orientation:"down",size:18,className:o[Rn.Chevron]})))}function xCe(e){return Me.createElement("div",{...e})}function wCe(e){return Me.createElement("div",{...e})}function ECe(e){const{calendarMonth:t,displayIndex:n,...r}=e;return Me.createElement("div",{...r},e.children)}function _Ce(e){const{calendarMonth:t,displayIndex:n,...r}=e;return Me.createElement("div",{...r})}function SCe(e){return Me.createElement("table",{...e})}function TCe(e){return Me.createElement("div",{...e})}const TK=x.createContext(void 0);function Dm(){const e=x.useContext(TK);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function CCe(e){const{components:t}=Dm();return Me.createElement(t.Dropdown,{...e})}function kCe(e){const{onPreviousClick:t,onNextClick:n,previousMonth:r,nextMonth:o,...s}=e,{components:i,classNames:a,labels:{labelPrevious:l,labelNext:c}}=Dm(),u=x.useCallback(m=>{o&&(n==null||n(m))},[o,n]),f=x.useCallback(m=>{r&&(t==null||t(m))},[r,t]);return Me.createElement("nav",{...s},Me.createElement(i.PreviousMonthButton,{type:"button",className:a[Rn.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":l(r),onClick:f},Me.createElement(i.Chevron,{disabled:r?void 0:!0,className:a[Rn.Chevron],orientation:"left"})),Me.createElement(i.NextMonthButton,{type:"button",className:a[Rn.NextMonthButton],tabIndex:o?void 0:-1,"aria-disabled":o?void 0:!0,"aria-label":c(o),onClick:u},Me.createElement(i.Chevron,{disabled:o?void 0:!0,orientation:"right",className:a[Rn.Chevron]})))}function ACe(e){const{components:t}=Dm();return Me.createElement(t.Button,{...e})}function NCe(e){return Me.createElement("option",{...e})}function ICe(e){const{components:t}=Dm();return Me.createElement(t.Button,{...e})}function RCe(e){const{rootRef:t,...n}=e;return Me.createElement("div",{...n,ref:t})}function MCe(e){return Me.createElement("select",{...e})}function DCe(e){const{week:t,...n}=e;return Me.createElement("tr",{...n})}function OCe(e){return Me.createElement("th",{...e})}function PCe(e){return Me.createElement("thead",{"aria-hidden":!0},Me.createElement("tr",{...e}))}function LCe(e){const{week:t,...n}=e;return Me.createElement("th",{...n})}function $Ce(e){return Me.createElement("th",{...e})}function FCe(e){return Me.createElement("tbody",{...e})}function BCe(e){const{components:t}=Dm();return Me.createElement(t.Dropdown,{...e})}const zCe=Object.freeze(Object.defineProperty({__proto__:null,Button:pCe,CaptionLabel:mCe,Chevron:gCe,Day:bCe,DayButton:yCe,Dropdown:vCe,DropdownNav:xCe,Footer:wCe,Month:ECe,MonthCaption:_Ce,MonthGrid:SCe,Months:TCe,MonthsDropdown:CCe,Nav:kCe,NextMonthButton:ACe,Option:NCe,PreviousMonthButton:ICe,Root:RCe,Select:MCe,Week:DCe,WeekNumber:LCe,WeekNumberHeader:$Ce,Weekday:OCe,Weekdays:PCe,Weeks:FCe,YearsDropdown:BCe},Symbol.toStringTag,{value:"Module"}));function Rf(e,t,n=!1,r=kd){let{from:o,to:s}=e;const{differenceInCalendarDays:i,isSameDay:a}=r;return o&&s?(i(s,o)<0&&([o,s]=[s,o]),i(t,o)>=(n?1:0)&&i(s,t)>=(n?1:0)):!n&&s?a(s,t):!n&&o?a(o,t):!1}function m8(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Q4(e){return!!(e&&typeof e=="object"&&"from"in e)}function g8(e){return!!(e&&typeof e=="object"&&"after"in e)}function b8(e){return!!(e&&typeof e=="object"&&"before"in e)}function CK(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function kK(e,t){return Array.isArray(e)&&e.every(t.isDate)}function Mf(e,t,n=kd){const r=Array.isArray(t)?t:[t],{isSameDay:o,differenceInCalendarDays:s,isAfter:i}=n;return r.some(a=>{if(typeof a=="boolean")return a;if(n.isDate(a))return o(e,a);if(kK(a,n))return a.some(l=>o(e,l));if(Q4(a))return Rf(a,e,!1,n);if(CK(a))return Array.isArray(a.dayOfWeek)?a.dayOfWeek.includes(e.getDay()):a.dayOfWeek===e.getDay();if(m8(a)){const l=s(a.before,e),c=s(a.after,e),u=l>0,f=c<0;return i(a.before,a.after)?f&&u:u||f}return g8(a)?s(e,a.after)>0:b8(a)?s(a.before,e)>0:typeof a=="function"?a(e):!1})}function jCe(e,t,n,r,o){const{disabled:s,hidden:i,modifiers:a,showOutsideDays:l,broadcastCalendar:c,today:u=o.today()}=t,{isSameDay:f,isSameMonth:m,startOfMonth:g,isBefore:y,endOfMonth:v,isAfter:w}=o,_=n&&g(n),T=r&&v(r),k={[Is.focused]:[],[Is.outside]:[],[Is.disabled]:[],[Is.hidden]:[],[Is.today]:[]},M={};for(const D of e){const{date:I,displayMonth:P}=D,B=!!(P&&!m(I,P)),U=!!(_&&y(I,_)),j=!!(T&&w(I,T)),H=!!(s&&Mf(I,s,o)),q=!!(i&&Mf(I,i,o))||U||j||!c&&!l&&B||c&&l===!1&&B,z=f(I,u);B&&k.outside.push(D),H&&k.disabled.push(D),q&&k.hidden.push(D),z&&k.today.push(D),a&&Object.keys(a).forEach(Z=>{const X=a==null?void 0:a[Z];X&&Mf(I,X,o)&&(M[Z]?M[Z].push(D):M[Z]=[D])})}return D=>{const I={[Is.focused]:!1,[Is.disabled]:!1,[Is.hidden]:!1,[Is.outside]:!1,[Is.today]:!1},P={};for(const B in k){const U=k[B];I[B]=U.some(j=>j===D)}for(const B in M)P[B]=M[B].some(U=>U===D);return{...I,...P}}}function UCe(e,t,n={}){return Object.entries(e).filter(([,o])=>o===!0).reduce((o,[s])=>(n[s]?o.push(n[s]):t[Is[s]]?o.push(t[Is[s]]):t[mu[s]]&&o.push(t[mu[s]]),o),[t[Rn.Day]])}function HCe(e){return{...zCe,...e}}function VCe(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([n,r])=>{n.startsWith("data-")&&(t[n]=r)}),t}function qCe(){const e={};for(const t in Rn)e[Rn[t]]=`rdp-${Rn[t]}`;for(const t in Is)e[Is[t]]=`rdp-${Is[t]}`;for(const t in mu)e[mu[t]]=`rdp-${mu[t]}`;for(const t in Ul)e[Ul[t]]=`rdp-${Ul[t]}`;return e}function AK(e,t,n){return(n??new Ql(t)).formatMonthYear(e)}const GCe=AK;function WCe(e,t,n){return(n??new Ql(t)).format(e,"d")}function YCe(e,t=kd){return t.format(e,"LLLL")}function KCe(e,t,n){return(n??new Ql(t)).format(e,"cccccc")}function ZCe(e,t=kd){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function JCe(){return""}function NK(e,t=kd){return t.format(e,"yyyy")}const XCe=NK,QCe=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:AK,formatDay:WCe,formatMonthCaption:GCe,formatMonthDropdown:YCe,formatWeekNumber:ZCe,formatWeekNumberHeader:JCe,formatWeekdayName:KCe,formatYearCaption:XCe,formatYearDropdown:NK},Symbol.toStringTag,{value:"Module"}));function e3e(e){return e!=null&&e.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e!=null&&e.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...QCe,...e}}function y8(e,t,n,r){let o=(r??new Ql(n)).format(e,"PPPP");return t.today&&(o=`Today, ${o}`),t.selected&&(o=`${o}, selected`),o}const t3e=y8;function v8(e,t,n){return(n??new Ql(t)).formatMonthYear(e)}const n3e=v8;function IK(e,t,n,r){let o=(r??new Ql(n)).format(e,"PPPP");return t!=null&&t.today&&(o=`Today, ${o}`),o}function RK(e){return"Choose the Month"}function MK(){return""}const r3e="Go to the Next Month";function x8(e,t){return r3e}function w8(e){return"Go to the Previous Month"}function DK(e,t,n){return(n??new Ql(t)).format(e,"cccc")}function OK(e,t){return`Week ${e}`}function PK(e){return"Week Number"}function LK(e){return"Choose the Year"}const o3e=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:n3e,labelDay:t3e,labelDayButton:y8,labelGrid:v8,labelGridcell:IK,labelMonthDropdown:RK,labelNav:MK,labelNext:x8,labelPrevious:w8,labelWeekNumber:OK,labelWeekNumberHeader:PK,labelWeekday:DK,labelYearDropdown:LK},Symbol.toStringTag,{value:"Module"})),nu=(e,t,n)=>t||(n?typeof n=="function"?n:(...r)=>n:e);function s3e(e,t){var r;const n=((r=t.locale)==null?void 0:r.labels)??{};return{...o3e,...e??{},labelDayButton:nu(y8,e==null?void 0:e.labelDayButton,n.labelDayButton),labelMonthDropdown:nu(RK,e==null?void 0:e.labelMonthDropdown,n.labelMonthDropdown),labelNext:nu(x8,e==null?void 0:e.labelNext,n.labelNext),labelPrevious:nu(w8,e==null?void 0:e.labelPrevious,n.labelPrevious),labelWeekNumber:nu(OK,e==null?void 0:e.labelWeekNumber,n.labelWeekNumber),labelYearDropdown:nu(LK,e==null?void 0:e.labelYearDropdown,n.labelYearDropdown),labelGrid:nu(v8,e==null?void 0:e.labelGrid,n.labelGrid),labelGridcell:nu(IK,e==null?void 0:e.labelGridcell,n.labelGridcell),labelNav:nu(MK,e==null?void 0:e.labelNav,n.labelNav),labelWeekNumberHeader:nu(PK,e==null?void 0:e.labelWeekNumberHeader,n.labelWeekNumberHeader),labelWeekday:nu(DK,e==null?void 0:e.labelWeekday,n.labelWeekday)}}function i3e(e,t,n,r,o){const{startOfMonth:s,startOfYear:i,endOfYear:a,eachMonthOfInterval:l,getMonth:c}=o;return l({start:i(e),end:a(e)}).map(m=>{const g=r.formatMonthDropdown(m,o),y=c(m),v=t&&m<s(t)||n&&m>s(n)||!1;return{value:y,label:g,disabled:v}})}function a3e(e,t={},n={}){let r={...t==null?void 0:t[Rn.Day]};return Object.entries(e).filter(([,o])=>o===!0).forEach(([o])=>{r={...r,...n==null?void 0:n[o]}}),r}function l3e(e,t,n,r){const o=r??e.today(),s=n?e.startOfBroadcastWeek(o,e):t?e.startOfISOWeek(o):e.startOfWeek(o),i=[];for(let a=0;a<7;a++){const l=e.addDays(s,a);i.push(l)}return i}function c3e(e,t,n,r,o=!1){if(!e||!t)return;const{startOfYear:s,endOfYear:i,eachYearOfInterval:a,getYear:l}=r,c=s(e),u=i(t),f=a({start:c,end:u});return o&&f.reverse(),f.map(m=>{const g=n.formatYearDropdown(m,r);return{value:l(m),label:g,disabled:!1}})}const Sw=e=>e instanceof HTMLElement?e:null,Y5=e=>[...e.querySelectorAll("[data-animated-month]")??[]],u3e=e=>Sw(e.querySelector("[data-animated-month]")),K5=e=>Sw(e.querySelector("[data-animated-caption]")),Z5=e=>Sw(e.querySelector("[data-animated-weeks]")),d3e=e=>Sw(e.querySelector("[data-animated-nav]")),f3e=e=>Sw(e.querySelector("[data-animated-weekdays]"));function h3e(e,t,{classNames:n,months:r,focused:o,dateLib:s}){const i=x.useRef(null),a=x.useRef(r),l=x.useRef(!1);x.useLayoutEffect(()=>{const c=a.current;if(a.current=r,!t||!e.current||!(e.current instanceof HTMLElement)||r.length===0||c.length===0||r.length!==c.length)return;const u=s.isSameMonth(r[0].date,c[0].date),f=s.isAfter(r[0].date,c[0].date),m=f?n[Ul.caption_after_enter]:n[Ul.caption_before_enter],g=f?n[Ul.weeks_after_enter]:n[Ul.weeks_before_enter],y=i.current,v=e.current.cloneNode(!0);if(v instanceof HTMLElement?(Y5(v).forEach(k=>{if(!(k instanceof HTMLElement))return;const M=u3e(k);M&&k.contains(M)&&k.removeChild(M);const D=K5(k);D&&D.classList.remove(m);const I=Z5(k);I&&I.classList.remove(g)}),i.current=v):i.current=null,l.current||u||o)return;const w=y instanceof HTMLElement?Y5(y):[],_=Y5(e.current);if(_!=null&&_.every(T=>T instanceof HTMLElement)&&w&&w.every(T=>T instanceof HTMLElement)){l.current=!0,e.current.style.isolation="isolate";const T=d3e(e.current);T&&(T.style.zIndex="1"),_.forEach((k,M)=>{const D=w[M];if(!D)return;k.style.position="relative",k.style.overflow="hidden";const I=K5(k);I&&I.classList.add(m);const P=Z5(k);P&&P.classList.add(g);const B=()=>{l.current=!1,e.current&&(e.current.style.isolation=""),T&&(T.style.zIndex=""),I&&I.classList.remove(m),P&&P.classList.remove(g),k.style.position="",k.style.overflow="",k.contains(D)&&k.removeChild(D)};D.style.pointerEvents="none",D.style.position="absolute",D.style.overflow="hidden",D.setAttribute("aria-hidden","true");const U=f3e(D);U&&(U.style.opacity="0");const j=K5(D);j&&(j.classList.add(f?n[Ul.caption_before_exit]:n[Ul.caption_after_exit]),j.addEventListener("animationend",B));const H=Z5(D);H&&H.classList.add(f?n[Ul.weeks_before_exit]:n[Ul.weeks_after_exit]),k.insertBefore(D,k.firstChild)})}})}function p3e(e,t,n,r){const o=e[0],s=e[e.length-1],{ISOWeek:i,fixedWeeks:a,broadcastCalendar:l}=n??{},{addDays:c,differenceInCalendarDays:u,differenceInCalendarMonths:f,endOfBroadcastWeek:m,endOfISOWeek:g,endOfMonth:y,endOfWeek:v,isAfter:w,startOfBroadcastWeek:_,startOfISOWeek:T,startOfWeek:k}=r,M=l?_(o,r):i?T(o):k(o),D=l?m(s):i?g(y(s)):v(y(s)),I=t&&(l?m(t):i?g(t):v(t)),P=I&&w(D,I)?I:D,B=u(P,M),U=f(s,o)+1,j=[];for(let z=0;z<=B;z++){const Z=c(M,z);j.push(Z)}const q=(l?35:42)*U;if(a&&j.length<q){const z=q-j.length;for(let Z=0;Z<z;Z++){const X=c(j[j.length-1],1);j.push(X)}}return j}function m3e(e){const t=[];return e.reduce((n,r)=>{const o=r.weeks.reduce((s,i)=>s.concat(i.days.slice()),t.slice());return n.concat(o.slice())},t.slice())}function g3e(e,t,n,r){const{numberOfMonths:o=1}=n,s=[];for(let i=0;i<o;i++){const a=r.addMonths(e,i);if(t&&a>t)break;s.push(a)}return s}function S$(e,t,n,r){const{month:o,defaultMonth:s,today:i=r.today(),numberOfMonths:a=1}=e;let l=o||s||i;const{differenceInCalendarMonths:c,addMonths:u,startOfMonth:f}=r;if(n&&c(n,l)<a-1){const m=-1*(a-1);l=u(n,m)}return t&&c(l,t)<0&&(l=t),f(l)}function b3e(e,t,n,r){const{addDays:o,endOfBroadcastWeek:s,endOfISOWeek:i,endOfMonth:a,endOfWeek:l,getISOWeek:c,getWeek:u,startOfBroadcastWeek:f,startOfISOWeek:m,startOfWeek:g}=r,y=e.reduce((v,w)=>{const _=n.broadcastCalendar?f(w,r):n.ISOWeek?m(w):g(w),T=n.broadcastCalendar?s(w):n.ISOWeek?i(a(w)):l(a(w)),k=t.filter(P=>P>=_&&P<=T),M=n.broadcastCalendar?35:42;if(n.fixedWeeks&&k.length<M){const P=t.filter(B=>{const U=M-k.length;return B>T&&B<=o(T,U)});k.push(...P)}const D=k.reduce((P,B)=>{const U=n.ISOWeek?c(B):u(B),j=P.find(q=>q.weekNumber===U),H=new SK(B,w,r);return j?j.days.push(H):P.push(new hCe(U,[H])),P},[]),I=new fCe(w,D);return v.push(I),v},[]);return n.reverseMonths?y.reverse():y}function y3e(e,t){let{startMonth:n,endMonth:r}=e;const{startOfYear:o,startOfDay:s,startOfMonth:i,endOfMonth:a,addYears:l,endOfYear:c,newDate:u,today:f}=t,{fromYear:m,toYear:g,fromMonth:y,toMonth:v}=e;!n&&y&&(n=y),!n&&m&&(n=t.newDate(m,0,1)),!r&&v&&(r=v),!r&&g&&(r=u(g,11,31));const w=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return n?n=i(n):m?n=u(m,0,1):!n&&w&&(n=o(l(e.today??f(),-100))),r?r=a(r):g?r=u(g,11,31):!r&&w&&(r=c(e.today??f())),[n&&s(n),r&&s(r)]}function v3e(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:o,numberOfMonths:s=1}=n,{startOfMonth:i,addMonths:a,differenceInCalendarMonths:l}=r,c=o?s:1,u=i(e);if(!t)return a(u,c);if(!(l(t,e)<s))return a(u,c)}function x3e(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:o,numberOfMonths:s}=n,{startOfMonth:i,addMonths:a,differenceInCalendarMonths:l}=r,c=o?s??1:1,u=i(e);if(!t)return a(u,-c);if(!(l(u,t)<=0))return a(u,-c)}function w3e(e){const t=[];return e.reduce((n,r)=>n.concat(r.weeks.slice()),t.slice())}function eC(e,t){const[n,r]=x.useState(e);return[t===void 0?n:t,r]}function E3e(e,t){var M;const[n,r]=y3e(e,t),{startOfMonth:o,endOfMonth:s}=t,i=S$(e,n,r,t),[a,l]=eC(i,e.month?i:void 0);x.useEffect(()=>{const D=S$(e,n,r,t);l(D)},[e.timeZone]);const{months:c,weeks:u,days:f,previousMonth:m,nextMonth:g}=x.useMemo(()=>{const D=g3e(a,r,{numberOfMonths:e.numberOfMonths},t),I=p3e(D,e.endMonth?s(e.endMonth):void 0,{ISOWeek:e.ISOWeek,fixedWeeks:e.fixedWeeks,broadcastCalendar:e.broadcastCalendar},t),P=b3e(D,I,{broadcastCalendar:e.broadcastCalendar,fixedWeeks:e.fixedWeeks,ISOWeek:e.ISOWeek,reverseMonths:e.reverseMonths},t),B=w3e(P),U=m3e(P),j=x3e(a,n,e,t),H=v3e(a,r,e,t);return{months:P,weeks:B,days:U,previousMonth:j,nextMonth:H}},[t,a.getTime(),r==null?void 0:r.getTime(),n==null?void 0:n.getTime(),e.disableNavigation,e.broadcastCalendar,(M=e.endMonth)==null?void 0:M.getTime(),e.fixedWeeks,e.ISOWeek,e.numberOfMonths,e.pagedNavigation,e.reverseMonths]),{disableNavigation:y,onMonthChange:v}=e,w=D=>u.some(I=>I.days.some(P=>P.isEqualTo(D))),_=D=>{if(y)return;let I=o(D);n&&I<o(n)&&(I=o(n)),r&&I>o(r)&&(I=o(r)),l(I),v==null||v(I)};return{months:c,weeks:u,days:f,navStart:n,navEnd:r,previousMonth:m,nextMonth:g,goToMonth:_,goToDay:D=>{w(D)||_(D.date)}}}var td;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(td||(td={}));function T$(e){return!e[Is.disabled]&&!e[Is.hidden]&&!e[Is.outside]}function _3e(e,t,n,r){let o,s=-1;for(const i of e){const a=t(i);T$(a)&&(a[Is.focused]&&s<td.FocusedModifier?(o=i,s=td.FocusedModifier):r!=null&&r.isEqualTo(i)&&s<td.LastFocused?(o=i,s=td.LastFocused):n(i.date)&&s<td.Selected?(o=i,s=td.Selected):a[Is.today]&&s<td.Today&&(o=i,s=td.Today))}return o||(o=e.find(i=>T$(t(i)))),o}function S3e(e,t,n,r,o,s,i){const{ISOWeek:a,broadcastCalendar:l}=s,{addDays:c,addMonths:u,addWeeks:f,addYears:m,endOfBroadcastWeek:g,endOfISOWeek:y,endOfWeek:v,max:w,min:_,startOfBroadcastWeek:T,startOfISOWeek:k,startOfWeek:M}=i;let I={day:c,week:f,month:u,year:m,startOfWeek:P=>l?T(P,i):a?k(P):M(P),endOfWeek:P=>l?g(P):a?y(P):v(P)}[e](n,t==="after"?1:-1);return t==="before"&&r?I=w([r,I]):t==="after"&&o&&(I=_([o,I])),I}function $K(e,t,n,r,o,s,i,a=0){if(a>365)return;const l=S3e(e,t,n.date,r,o,s,i),c=!!(s.disabled&&Mf(l,s.disabled,i)),u=!!(s.hidden&&Mf(l,s.hidden,i)),f=l,m=new SK(l,f,i);return!c&&!u?m:$K(e,t,m,r,o,s,i,a+1)}function T3e(e,t,n,r,o){const{autoFocus:s}=e,[i,a]=x.useState(),l=_3e(t.days,n,r||(()=>!1),i),[c,u]=x.useState(s?l:void 0);return{isFocusTarget:v=>!!(l!=null&&l.isEqualTo(v)),setFocused:u,focused:c,blur:()=>{a(c),u(void 0)},moveFocus:(v,w)=>{if(!c)return;const _=$K(v,w,c,t.navStart,t.navEnd,e,o);_&&(e.disableNavigation&&!t.days.some(k=>k.isEqualTo(_))||(t.goToDay(_),u(_)))}}}function C3e(e,t){const{selected:n,required:r,onSelect:o}=e,[s,i]=eC(n,o?n:void 0),a=o?n:s,{isSameDay:l}=t,c=g=>(a==null?void 0:a.some(y=>l(y,g)))??!1,{min:u,max:f}=e;return{selected:a,select:(g,y,v)=>{let w=[...a??[]];if(c(g)){if((a==null?void 0:a.length)===u||r&&(a==null?void 0:a.length)===1)return;w=a==null?void 0:a.filter(_=>!l(_,g))}else(a==null?void 0:a.length)===f?w=[g]:w=[...w,g];return o||i(w),o==null||o(w,g,y,v),w},isSelected:c}}function k3e(e,t,n=0,r=0,o=!1,s=kd){const{from:i,to:a}=t||{},{isSameDay:l,isAfter:c,isBefore:u}=s;let f;if(!i&&!a)f={from:e,to:n>0?void 0:e};else if(i&&!a)l(i,e)?n===0?f={from:i,to:e}:o?f={from:i,to:void 0}:f=void 0:u(e,i)?f={from:e,to:i}:f={from:i,to:e};else if(i&&a)if(l(i,e)&&l(a,e))o?f={from:i,to:a}:f=void 0;else if(l(i,e))f={from:i,to:n>0?void 0:e};else if(l(a,e))f={from:e,to:n>0?void 0:e};else if(u(e,i))f={from:e,to:a};else if(c(e,i))f={from:i,to:e};else if(c(e,a))f={from:i,to:e};else throw new Error("Invalid range");if(f!=null&&f.from&&(f!=null&&f.to)){const m=s.differenceInCalendarDays(f.to,f.from);r>0&&m>r?f={from:e,to:void 0}:n>1&&m<n&&(f={from:e,to:void 0})}return f}function A3e(e,t,n=kd){const r=Array.isArray(t)?t:[t];let o=e.from;const s=n.differenceInCalendarDays(e.to,e.from),i=Math.min(s,6);for(let a=0;a<=i;a++){if(r.includes(o.getDay()))return!0;o=n.addDays(o,1)}return!1}function C$(e,t,n=kd){return Rf(e,t.from,!1,n)||Rf(e,t.to,!1,n)||Rf(t,e.from,!1,n)||Rf(t,e.to,!1,n)}function N3e(e,t,n=kd){const r=Array.isArray(t)?t:[t];if(r.filter(a=>typeof a!="function").some(a=>typeof a=="boolean"?a:n.isDate(a)?Rf(e,a,!1,n):kK(a,n)?a.some(l=>Rf(e,l,!1,n)):Q4(a)?a.from&&a.to?C$(e,{from:a.from,to:a.to},n):!1:CK(a)?A3e(e,a.dayOfWeek,n):m8(a)?n.isAfter(a.before,a.after)?C$(e,{from:n.addDays(a.after,1),to:n.addDays(a.before,-1)},n):Mf(e.from,a,n)||Mf(e.to,a,n):g8(a)||b8(a)?Mf(e.from,a,n)||Mf(e.to,a,n):!1))return!0;const i=r.filter(a=>typeof a=="function");if(i.length){let a=e.from;const l=n.differenceInCalendarDays(e.to,e.from);for(let c=0;c<=l;c++){if(i.some(u=>u(a)))return!0;a=n.addDays(a,1)}}return!1}function I3e(e,t){const{disabled:n,excludeDisabled:r,selected:o,required:s,onSelect:i}=e,[a,l]=eC(o,i?o:void 0),c=i?o:a;return{selected:c,select:(m,g,y)=>{const{min:v,max:w}=e,_=m?k3e(m,c,v,w,s,t):void 0;return r&&n&&(_!=null&&_.from)&&_.to&&N3e({from:_.from,to:_.to},n,t)&&(_.from=m,_.to=void 0),i||l(_),i==null||i(_,m,g,y),_},isSelected:m=>c&&Rf(c,m,!1,t)}}function R3e(e,t){const{selected:n,required:r,onSelect:o}=e,[s,i]=eC(n,o?n:void 0),a=o?n:s,{isSameDay:l}=t;return{selected:a,select:(f,m,g)=>{let y=f;return!r&&a&&a&&l(f,a)&&(y=void 0),o||i(y),o==null||o(y,f,m,g),y},isSelected:f=>a?l(a,f):!1}}function M3e(e,t){const n=R3e(e,t),r=C3e(e,t),o=I3e(e,t);switch(e.mode){case"single":return n;case"multiple":return r;case"range":return o;default:return}}function oa(e,t){return e instanceof If&&e.timeZone===t?e:new If(e,t)}function k$(e,t){return typeof e=="boolean"||typeof e=="function"?e:e instanceof Date?oa(e,t):Array.isArray(e)?e.map(n=>n instanceof Date?oa(n,t):n):Q4(e)?{...e,from:e.from?oa(e.from,t):e.from,to:e.to?oa(e.to,t):e.to}:m8(e)?{before:oa(e.before,t),after:oa(e.after,t)}:g8(e)?{after:oa(e.after,t)}:b8(e)?{before:oa(e.before,t)}:e}function J5(e,t){return e&&(Array.isArray(e)?e.map(n=>k$(n,t)):k$(e,t))}function D3e(e){var Wa;let t=e;const n=t.timeZone;if(n&&(t={...e,timeZone:n},t.today&&(t.today=oa(t.today,n)),t.month&&(t.month=oa(t.month,n)),t.defaultMonth&&(t.defaultMonth=oa(t.defaultMonth,n)),t.startMonth&&(t.startMonth=oa(t.startMonth,n)),t.endMonth&&(t.endMonth=oa(t.endMonth,n)),t.mode==="single"&&t.selected?t.selected=oa(t.selected,n):t.mode==="multiple"&&t.selected?t.selected=(Wa=t.selected)==null?void 0:Wa.map(An=>oa(An,n)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?oa(t.selected.from,n):t.selected.from,to:t.selected.to?oa(t.selected.to,n):t.selected.to}),t.disabled!==void 0&&(t.disabled=J5(t.disabled,n)),t.hidden!==void 0&&(t.hidden=J5(t.hidden,n)),t.modifiers)){const An={};Object.keys(t.modifiers).forEach(er=>{var wt;An[er]=J5((wt=t.modifiers)==null?void 0:wt[er],n)}),t.modifiers=An}const{components:r,formatters:o,labels:s,dateLib:i,locale:a,classNames:l}=x.useMemo(()=>{const An={..._K,...t.locale},er=new Ql({locale:An,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib);return{dateLib:er,components:HCe(t.components),formatters:e3e(t.formatters),labels:s3e(t.labels,er.options),locale:An,classNames:{...qCe(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]);t.today||(t={...t,today:i.today()});const{captionLayout:c,mode:u,navLayout:f,numberOfMonths:m=1,onDayBlur:g,onDayClick:y,onDayFocus:v,onDayKeyDown:w,onDayMouseEnter:_,onDayMouseLeave:T,onNextClick:k,onPrevClick:M,showWeekNumber:D,styles:I}=t,{formatCaption:P,formatDay:B,formatMonthDropdown:U,formatWeekNumber:j,formatWeekNumberHeader:H,formatWeekdayName:q,formatYearDropdown:z}=o,Z=E3e(t,i),{days:X,months:J,navStart:ee,navEnd:re,previousMonth:ie,nextMonth:K,goToMonth:te}=Z,se=jCe(X,t,ee,re,i),{isSelected:Q,select:Te,selected:ge}=M3e(t,i)??{},{blur:Ce,focused:he,isFocusTarget:Fe,moveFocus:Oe,setFocused:Re}=T3e(t,Z,se,Q??(()=>!1),i),{labelDayButton:nt,labelGridcell:ue,labelGrid:et,labelMonthDropdown:ut,labelNav:Yt,labelPrevious:Ht,labelNext:Pt,labelWeekday:tn,labelWeekNumber:vt,labelWeekNumberHeader:me,labelYearDropdown:Ne}=s,$e=x.useMemo(()=>l3e(i,t.ISOWeek,t.broadcastCalendar,t.today),[i,t.ISOWeek,t.broadcastCalendar,t.today]),Je=u!==void 0||y!==void 0,Le=x.useCallback(()=>{ie&&(te(ie),M==null||M(ie))},[ie,te,M]),Ve=x.useCallback(()=>{K&&(te(K),k==null||k(K))},[te,K,k]),_e=x.useCallback((An,er)=>wt=>{wt.preventDefault(),wt.stopPropagation(),Re(An),!er.disabled&&(Te==null||Te(An.date,er,wt),y==null||y(An.date,er,wt))},[Te,y,Re]),W=x.useCallback((An,er)=>wt=>{Re(An),v==null||v(An.date,er,wt)},[v,Re]),L=x.useCallback((An,er)=>wt=>{Ce(),g==null||g(An.date,er,wt)},[Ce,g]),F=x.useCallback((An,er)=>wt=>{const sn={ArrowLeft:[wt.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[wt.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[wt.shiftKey?"year":"week","after"],ArrowUp:[wt.shiftKey?"year":"week","before"],PageUp:[wt.shiftKey?"year":"month","before"],PageDown:[wt.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(sn[wt.key]){wt.preventDefault(),wt.stopPropagation();const[ye,Ue]=sn[wt.key];Oe(ye,Ue)}w==null||w(An.date,er,wt)},[Oe,w,t.dir]),ce=x.useCallback((An,er)=>wt=>{_==null||_(An.date,er,wt)},[_]),we=x.useCallback((An,er)=>wt=>{T==null||T(An.date,er,wt)},[T]),ze=x.useCallback(An=>er=>{const wt=Number(er.target.value),sn=i.setMonth(i.startOfMonth(An),wt);te(sn)},[i,te]),Be=x.useCallback(An=>er=>{const wt=Number(er.target.value),sn=i.setYear(i.startOfMonth(An),wt);te(sn)},[i,te]),{className:ct,style:ln}=x.useMemo(()=>({className:[l[Rn.Root],t.className].filter(Boolean).join(" "),style:{...I==null?void 0:I[Rn.Root],...t.style}}),[l,t.className,t.style,I]),jt=VCe(t),fn=x.useRef(null);h3e(fn,!!t.animate,{classNames:l,months:J,focused:he,dateLib:i});const an={dayPickerProps:t,selected:ge,select:Te,isSelected:Q,months:J,nextMonth:K,previousMonth:ie,goToMonth:te,getModifiers:se,components:r,classNames:l,styles:I,labels:s,formatters:o};return Me.createElement(TK.Provider,{value:an},Me.createElement(r.Root,{rootRef:t.animate?fn:void 0,className:ct,style:ln,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],...jt},Me.createElement(r.Months,{className:l[Rn.Months],style:I==null?void 0:I[Rn.Months]},!t.hideNavigation&&!f&&Me.createElement(r.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[Rn.Nav],style:I==null?void 0:I[Rn.Nav],"aria-label":Yt(),onPreviousClick:Le,onNextClick:Ve,previousMonth:ie,nextMonth:K}),J.map((An,er)=>Me.createElement(r.Month,{"data-animated-month":t.animate?"true":void 0,className:l[Rn.Month],style:I==null?void 0:I[Rn.Month],key:er,displayIndex:er,calendarMonth:An},f==="around"&&!t.hideNavigation&&er===0&&Me.createElement(r.PreviousMonthButton,{type:"button",className:l[Rn.PreviousMonthButton],tabIndex:ie?void 0:-1,"aria-disabled":ie?void 0:!0,"aria-label":Ht(ie),onClick:Le,"data-animated-button":t.animate?"true":void 0},Me.createElement(r.Chevron,{disabled:ie?void 0:!0,className:l[Rn.Chevron],orientation:t.dir==="rtl"?"right":"left"})),Me.createElement(r.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:l[Rn.MonthCaption],style:I==null?void 0:I[Rn.MonthCaption],calendarMonth:An,displayIndex:er},c!=null&&c.startsWith("dropdown")?Me.createElement(r.DropdownNav,{className:l[Rn.Dropdowns],style:I==null?void 0:I[Rn.Dropdowns]},(()=>{const wt=c==="dropdown"||c==="dropdown-months"?Me.createElement(r.MonthsDropdown,{key:"month",className:l[Rn.MonthsDropdown],"aria-label":ut(),classNames:l,components:r,disabled:!!t.disableNavigation,onChange:ze(An.date),options:i3e(An.date,ee,re,o,i),style:I==null?void 0:I[Rn.Dropdown],value:i.getMonth(An.date)}):Me.createElement("span",{key:"month"},U(An.date,i)),sn=c==="dropdown"||c==="dropdown-years"?Me.createElement(r.YearsDropdown,{key:"year",className:l[Rn.YearsDropdown],"aria-label":Ne(i.options),classNames:l,components:r,disabled:!!t.disableNavigation,onChange:Be(An.date),options:c3e(ee,re,o,i,!!t.reverseYears),style:I==null?void 0:I[Rn.Dropdown],value:i.getYear(An.date)}):Me.createElement("span",{key:"year"},z(An.date,i));return i.getMonthYearOrder()==="year-first"?[sn,wt]:[wt,sn]})(),Me.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},P(An.date,i.options,i))):Me.createElement(r.CaptionLabel,{className:l[Rn.CaptionLabel],role:"status","aria-live":"polite"},P(An.date,i.options,i))),f==="around"&&!t.hideNavigation&&er===m-1&&Me.createElement(r.NextMonthButton,{type:"button",className:l[Rn.NextMonthButton],tabIndex:K?void 0:-1,"aria-disabled":K?void 0:!0,"aria-label":Pt(K),onClick:Ve,"data-animated-button":t.animate?"true":void 0},Me.createElement(r.Chevron,{disabled:K?void 0:!0,className:l[Rn.Chevron],orientation:t.dir==="rtl"?"left":"right"})),er===m-1&&f==="after"&&!t.hideNavigation&&Me.createElement(r.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[Rn.Nav],style:I==null?void 0:I[Rn.Nav],"aria-label":Yt(),onPreviousClick:Le,onNextClick:Ve,previousMonth:ie,nextMonth:K}),Me.createElement(r.MonthGrid,{role:"grid","aria-multiselectable":u==="multiple"||u==="range","aria-label":et(An.date,i.options,i)||void 0,className:l[Rn.MonthGrid],style:I==null?void 0:I[Rn.MonthGrid]},!t.hideWeekdays&&Me.createElement(r.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:l[Rn.Weekdays],style:I==null?void 0:I[Rn.Weekdays]},D&&Me.createElement(r.WeekNumberHeader,{"aria-label":me(i.options),className:l[Rn.WeekNumberHeader],style:I==null?void 0:I[Rn.WeekNumberHeader],scope:"col"},H()),$e.map(wt=>Me.createElement(r.Weekday,{"aria-label":tn(wt,i.options,i),className:l[Rn.Weekday],key:String(wt),style:I==null?void 0:I[Rn.Weekday],scope:"col"},q(wt,i.options,i)))),Me.createElement(r.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:l[Rn.Weeks],style:I==null?void 0:I[Rn.Weeks]},An.weeks.map(wt=>Me.createElement(r.Week,{className:l[Rn.Week],key:wt.weekNumber,style:I==null?void 0:I[Rn.Week],week:wt},D&&Me.createElement(r.WeekNumber,{week:wt,style:I==null?void 0:I[Rn.WeekNumber],"aria-label":vt(wt.weekNumber,{locale:a}),className:l[Rn.WeekNumber],scope:"row",role:"rowheader"},j(wt.weekNumber,i)),wt.days.map(sn=>{const{date:ye}=sn,Ue=se(sn);if(Ue[Is.focused]=!Ue.hidden&&!!(he!=null&&he.isEqualTo(sn)),Ue[mu.selected]=(Q==null?void 0:Q(ye))||Ue.selected,Q4(ge)){const{from:Kn,to:Rt}=ge;Ue[mu.range_start]=!!(Kn&&Rt&&i.isSameDay(ye,Kn)),Ue[mu.range_end]=!!(Kn&&Rt&&i.isSameDay(ye,Rt)),Ue[mu.range_middle]=Rf(ge,ye,!0,i)}const ht=a3e(Ue,I,t.modifiersStyles),Jt=UCe(Ue,l,t.modifiersClassNames),mr=!Je&&!Ue.hidden?ue(ye,Ue,i.options,i):void 0;return Me.createElement(r.Day,{key:`${sn.isoDate}_${sn.displayMonthId}`,day:sn,modifiers:Ue,className:Jt.join(" "),style:ht,role:"gridcell","aria-selected":Ue.selected||void 0,"aria-label":mr,"data-day":sn.isoDate,"data-month":sn.outside?sn.dateMonthId:void 0,"data-selected":Ue.selected||void 0,"data-disabled":Ue.disabled||void 0,"data-hidden":Ue.hidden||void 0,"data-outside":sn.outside||void 0,"data-focused":Ue.focused||void 0,"data-today":Ue.today||void 0},!Ue.hidden&&Je?Me.createElement(r.DayButton,{className:l[Rn.DayButton],style:I==null?void 0:I[Rn.DayButton],type:"button",day:sn,modifiers:Ue,disabled:!Ue.focused&&Ue.disabled||void 0,"aria-disabled":Ue.focused&&Ue.disabled||void 0,tabIndex:Fe(sn)?0:-1,"aria-label":nt(ye,Ue,i.options,i),onClick:_e(sn,Ue),onBlur:L(sn,Ue),onFocus:W(sn,Ue),onKeyDown:F(sn,Ue),onMouseEnter:ce(sn,Ue),onMouseLeave:we(sn,Ue)},B(ye,i.options,i)):!Ue.hidden&&B(sn.date,i.options,i))})))))))),t.footer&&Me.createElement(r.Footer,{className:l[Rn.Footer],style:I==null?void 0:I[Rn.Footer],role:"status","aria-live":"polite"},t.footer)))}function bx({className:e,showOutsideDays:t=!0,showYearSwitcher:n=!0,yearRange:r=12,numberOfMonths:o,...s}){const[i,a]=x.useState("days"),[l,c]=x.useState(x.useMemo(()=>{const Q=new Date().getFullYear();return{from:Q-Math.floor(r/2-1),to:Q+Math.ceil(r/2)}},[r])),{onNextClick:u,onPrevClick:f,startMonth:m,endMonth:g}=s,y=i==="years"?1:o,v=Qe("relative flex",s.monthsClassName),w=Qe("relative mx-10 flex h-7 items-center justify-center",s.monthCaptionClassName),_=Qe("flex flex-row",s.weekdaysClassName),T=Qe("w-8 text-sm font-normal text-muted-foreground",s.weekdayClassName),k=Qe("w-full",s.monthClassName),M=Qe("relative flex items-center justify-center pt-1",s.captionClassName),D=Qe("truncate text-sm font-medium",s.captionLabelClassName),I=yN({variant:"outline",className:"absolute h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"}),P=Qe(I,"right-0",s.buttonNextClassName),B=Qe(I,"left-0",s.buttonPreviousClassName),U=Qe("flex items-start",s.navClassName),j=Qe("mx-auto mt-4",s.monthGridClassName),H=Qe("mt-2 flex w-max items-start",s.weekClassName),q=Qe("flex size-8 flex-1 items-center justify-center p-0 text-sm",s.dayClassName),z=Qe(yN({variant:"ghost"}),"size-8 rounded-md p-0 font-normal transition-none aria-selected:opacity-100",s.dayButtonClassName),Z="bg-accent [&>button]:bg-primary [&>button]:text-primary-foreground [&>button]:hover:bg-primary [&>button]:hover:text-primary-foreground",X=Qe(Z,"day-range-start rounded-s-md",s.rangeStartClassName),J=Qe(Z,"day-range-end rounded-e-md",s.rangeEndClassName),ee=Qe("bg-accent !text-foreground [&>button]:bg-transparent [&>button]:!text-foreground [&>button]:hover:bg-transparent [&>button]:hover:!text-foreground",s.rangeMiddleClassName),re=Qe("[&>button]:bg-primary [&>button]:text-primary-foreground [&>button]:hover:bg-primary [&>button]:hover:text-primary-foreground",s.selectedClassName),ie=Qe("[&>button]:bg-accent [&>button]:text-accent-foreground",s.todayClassName),K=Qe("day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",s.outsideClassName),te=Qe("text-muted-foreground opacity-50",s.disabledClassName),se=Qe("invisible flex-1",s.hiddenClassName);return h.jsx(D3e,{showOutsideDays:t,className:Qe("p-3",e),style:{width:248.8*(y??1)+"px"},classNames:{months:v,month_caption:w,weekdays:_,weekday:T,month:k,caption:M,caption_label:D,button_next:P,button_previous:B,nav:U,month_grid:j,week:H,day:q,day_button:z,range_start:X,range_middle:ee,range_end:J,selected:re,today:ie,outside:K,disabled:te,hidden:se},components:{Chevron:({orientation:Q})=>{const Te=Q==="left"?w1:Af;return h.jsx(Te,{className:"h-4 w-4"})},Nav:({className:Q})=>h.jsx(O3e,{className:Q,displayYears:l,navView:i,setDisplayYears:c,startMonth:m,endMonth:g,onPrevClick:f}),CaptionLabel:Q=>h.jsx(P3e,{showYearSwitcher:n,navView:i,setNavView:a,displayYears:l,...Q}),MonthGrid:({className:Q,children:Te,...ge})=>h.jsx(L3e,{children:Te,className:Q,displayYears:l,startMonth:m,endMonth:g,navView:i,setNavView:a,...ge})},numberOfMonths:y,...s})}bx.displayName="Calendar";function O3e({className:e,navView:t,startMonth:n,endMonth:r,displayYears:o,setDisplayYears:s,onPrevClick:i,onNextClick:a}){const{nextMonth:l,previousMonth:c,goToMonth:u}=Dm(),f=t==="years"?n&&Nf(new Date(o.from-1,0,1),n)<0||r&&Nf(new Date(o.from-1,0,1),r)>0:!c,m=t==="years"?n&&Nf(new Date(o.to+1,0,1),n)<0||r&&Nf(new Date(o.to+1,0,1),r)>0:!l,g=x.useCallback(()=>{if(c){if(t==="years"){s(v=>({from:v.from-(v.to-v.from+1),to:v.to-(v.to-v.from+1)})),i==null||i(new Date(o.from-(o.to-o.from),0,1));return}u(c),i==null||i(c)}},[c,u]),y=x.useCallback(()=>{if(l){if(t==="years"){s(v=>({from:v.from+(v.to-v.from+1),to:v.to+(v.to-v.from+1)})),a==null||a(new Date(o.from+(o.to-o.from),0,1));return}u(l),a==null||a(l)}},[u,l]);return h.jsxs("nav",{className:Qe("flex items-center",e),children:[h.jsx(_r,{variant:"outline",className:"absolute left-0 h-7 w-7 bg-transparent p-0 opacity-80 hover:opacity-100",type:"button",tabIndex:f?void 0:-1,disabled:f,"aria-label":t==="years"?`Go to the previous ${o.to-o.from+1} years`:w8(),onClick:g,children:h.jsx(w1,{className:"h-4 w-4"})}),h.jsx(_r,{variant:"outline",className:"absolute right-0 h-7 w-7 bg-transparent p-0 opacity-80 hover:opacity-100",type:"button",tabIndex:m?void 0:-1,disabled:m,"aria-label":t==="years"?`Go to the next ${o.to-o.from+1} years`:x8(),onClick:y,children:h.jsx(Af,{className:"h-4 w-4"})})]})}function P3e({children:e,showYearSwitcher:t,navView:n,setNavView:r,displayYears:o,...s}){return t?h.jsx(_r,{className:"h-7 w-full truncate text-sm font-medium",variant:"ghost",size:"sm",onClick:()=>r(i=>i==="days"?"years":"days"),children:n==="days"?e:o.from+" - "+o.to}):h.jsx("span",{...s,children:e})}function L3e({className:e,children:t,displayYears:n,startMonth:r,endMonth:o,navView:s,setNavView:i,...a}){return s==="years"?h.jsx($3e,{displayYears:n,startMonth:r,endMonth:o,setNavView:i,navView:s,className:e,...a}):h.jsx("table",{className:e,...a,children:t})}function $3e({className:e,displayYears:t,startMonth:n,endMonth:r,setNavView:o,navView:s,...i}){const{goToMonth:a,selected:l}=Dm();return h.jsx("div",{className:Qe("grid grid-cols-4 gap-y-2",e),...i,children:Array.from({length:t.to-t.from+1},(c,u)=>{const f=Nf(new Date(t.from+u,11,31),n)<0,m=Nf(new Date(t.from+u,0,0),r)>0,g=f||m;return h.jsx(_r,{className:Qe("text-foreground h-7 w-full text-sm font-normal",t.from+u===new Date().getFullYear()&&"bg-accent text-accent-foreground font-medium"),variant:"ghost",onClick:()=>{o("days"),a(new Date(t.from+u,(l==null?void 0:l.getMonth())??0))},disabled:s==="years"?g:void 0,children:t.from+u},u)})})}function tC(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var nC="Checkbox",[F3e]=Ha(nC),[B3e,E8]=F3e(nC);function z3e(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:o,disabled:s,form:i,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:f}=e,[m,g]=bl({prop:n,defaultProp:o??!1,onChange:l,caller:nC}),[y,v]=x.useState(null),[w,_]=x.useState(null),T=x.useRef(!1),k=y?!!i||!!y.closest("form"):!0,M={checked:m,disabled:s,setChecked:g,control:y,setControl:v,name:a,form:i,value:u,hasConsumerStoppedPropagationRef:T,required:c,defaultChecked:g0(o)?!1:o,isFormControl:k,bubbleInput:w,setBubbleInput:_};return h.jsx(B3e,{scope:t,...M,children:j3e(f)?f(M):r})}var FK="CheckboxTrigger",BK=x.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},o)=>{const{control:s,value:i,disabled:a,checked:l,required:c,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:g,bubbleInput:y}=E8(FK,e),v=Rr(o,u),w=x.useRef(l);return x.useEffect(()=>{const _=s==null?void 0:s.form;if(_){const T=()=>f(w.current);return _.addEventListener("reset",T),()=>_.removeEventListener("reset",T)}},[s,f]),h.jsx(Pn.button,{type:"button",role:"checkbox","aria-checked":g0(l)?"mixed":l,"aria-required":c,"data-state":qK(l),"data-disabled":a?"":void 0,disabled:a,value:i,...r,ref:v,onKeyDown:Gt(t,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:Gt(n,_=>{f(T=>g0(T)?!0:!T),y&&g&&(m.current=_.isPropagationStopped(),m.current||_.stopPropagation())})})});BK.displayName=FK;var zK=x.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:s,required:i,disabled:a,value:l,onCheckedChange:c,form:u,...f}=e;return h.jsx(z3e,{__scopeCheckbox:n,checked:o,defaultChecked:s,disabled:a,required:i,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:m})=>h.jsxs(h.Fragment,{children:[h.jsx(BK,{...f,ref:t,__scopeCheckbox:n}),m&&h.jsx(VK,{__scopeCheckbox:n})]})})});zK.displayName=nC;var jK="CheckboxIndicator",UK=x.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,s=E8(jK,n);return h.jsx(yl,{present:r||g0(s.checked)||s.checked===!0,children:h.jsx(Pn.span,{"data-state":qK(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});UK.displayName=jK;var HK="CheckboxBubbleInput",VK=x.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:s,defaultChecked:i,required:a,disabled:l,name:c,value:u,form:f,bubbleInput:m,setBubbleInput:g}=E8(HK,e),y=Rr(n,g),v=tC(s),w=T4(r);x.useEffect(()=>{const T=m;if(!T)return;const k=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(k,"checked").set,I=!o.current;if(v!==s&&D){const P=new Event("click",{bubbles:I});T.indeterminate=g0(s),D.call(T,g0(s)?!1:s),T.dispatchEvent(P)}},[m,v,s,o]);const _=x.useRef(g0(s)?!1:s);return h.jsx(Pn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??_.current,required:a,disabled:l,name:c,value:u,form:f,...t,tabIndex:-1,ref:y,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});VK.displayName=HK;function j3e(e){return typeof e=="function"}function g0(e){return e==="indeterminate"}function qK(e){return g0(e)?"indeterminate":e?"checked":"unchecked"}function yx({className:e,...t}){return h.jsx(zK,{"data-slot":"checkbox",className:Qe("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:h.jsx(UK,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:h.jsx(Co,{className:"size-3.5"})})})}var U3e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],H3e=U3e.reduce((e,t)=>{const n=iw(`Primitive.${t}`),r=x.forwardRef((o,s)=>{const{asChild:i,...a}=o,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),V3e="Label",GK=x.forwardRef((e,t)=>h.jsx(H3e.label,{...e,ref:t,onMouseDown:n=>{var o;n.target.closest("button, input, select, textarea")||((o=e.onMouseDown)==null||o.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));GK.displayName=V3e;var q3e=GK;function Hl({className:e,...t}){return h.jsx(q3e,{"data-slot":"label",className:Qe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function G3e(e){const t=W3e(e),n=x.forwardRef((r,o)=>{const{children:s,...i}=r,a=x.Children.toArray(s),l=a.find(K3e);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:o,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function W3e(e){const t=x.forwardRef((n,r)=>{const{children:o,...s}=n;if(x.isValidElement(o)){const i=J3e(o),a=Z3e(s,o.props);return o.type!==x.Fragment&&(a.ref=r?Td(r,i):i),x.cloneElement(o,a)}return x.Children.count(o)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Y3e=Symbol("radix.slottable");function K3e(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Y3e}function Z3e(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const l=s(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function J3e(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var rC="Popover",[WK]=Ha(rC,[z0]),Tw=z0(),[X3e,j0]=WK(rC),YK=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!1}=e,a=Tw(t),l=x.useRef(null),[c,u]=x.useState(!1),[f,m]=bl({prop:r,defaultProp:o??!1,onChange:s,caller:rC});return h.jsx(C4,{...a,children:h.jsx(X3e,{scope:t,contentId:Rc(),triggerRef:l,open:f,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:c,onCustomAnchorAdd:x.useCallback(()=>u(!0),[]),onCustomAnchorRemove:x.useCallback(()=>u(!1),[]),modal:i,children:n})})};YK.displayName=rC;var KK="PopoverAnchor",Q3e=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=j0(KK,n),s=Tw(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=o;return x.useEffect(()=>(i(),()=>a()),[i,a]),h.jsx(cw,{...s,...r,ref:t})});Q3e.displayName=KK;var ZK="PopoverTrigger",JK=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=j0(ZK,n),s=Tw(n),i=Rr(t,o.triggerRef),a=h.jsx(Pn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":nZ(o.open),...r,ref:i,onClick:Gt(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:h.jsx(cw,{asChild:!0,...s,children:a})});JK.displayName=ZK;var _8="PopoverPortal",[e5e,t5e]=WK(_8,{forceMount:void 0}),XK=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,s=j0(_8,t);return h.jsx(e5e,{scope:t,forceMount:n,children:h.jsx(yl,{present:n||s.open,children:h.jsx(uw,{asChild:!0,container:o,children:r})})})};XK.displayName=_8;var K1="PopoverContent",QK=x.forwardRef((e,t)=>{const n=t5e(K1,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,s=j0(K1,e.__scopePopover);return h.jsx(yl,{present:r||s.open,children:s.modal?h.jsx(r5e,{...o,ref:t}):h.jsx(o5e,{...o,ref:t})})});QK.displayName=K1;var n5e=G3e("PopoverContent.RemoveScroll"),r5e=x.forwardRef((e,t)=>{const n=j0(K1,e.__scopePopover),r=x.useRef(null),o=Rr(t,r),s=x.useRef(!1);return x.useEffect(()=>{const i=r.current;if(i)return O4(i)},[]),h.jsx(fw,{as:n5e,allowPinchZoom:!0,children:h.jsx(eZ,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Gt(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Gt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),o5e=x.forwardRef((e,t)=>{const n=j0(K1,e.__scopePopover),r=x.useRef(!1),o=x.useRef(!1);return h.jsx(eZ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),eZ=x.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...f}=e,m=j0(K1,n),g=Tw(n);return M4(),h.jsx(dw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:h.jsx(Eb,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:h.jsx(k4,{"data-state":nZ(m.open),role:"dialog",id:m.contentId,...g,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),tZ="PopoverClose",s5e=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=j0(tZ,n);return h.jsx(Pn.button,{type:"button",...r,ref:t,onClick:Gt(e.onClick,()=>o.onOpenChange(!1))})});s5e.displayName=tZ;var i5e="PopoverArrow",a5e=x.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Tw(n);return h.jsx(A4,{...o,...r,ref:t})});a5e.displayName=i5e;function nZ(e){return e?"open":"closed"}var l5e=YK,c5e=JK,u5e=XK,d5e=QK;function vx({...e}){return h.jsx(l5e,{"data-slot":"popover",...e})}function xx({...e}){return h.jsx(c5e,{"data-slot":"popover-trigger",...e})}function wx({className:e,align:t="center",sideOffset:n=4,...r}){return h.jsx(u5e,{children:h.jsx(d5e,{"data-slot":"popover-content",align:t,sideOffset:n,className:Qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-hidden",e),...r})})}var S8="Radio",[f5e,rZ]=Ha(S8),[h5e,p5e]=f5e(S8),oZ=x.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:o=!1,required:s,disabled:i,value:a="on",onCheck:l,form:c,...u}=e,[f,m]=x.useState(null),g=Rr(t,w=>m(w)),y=x.useRef(!1),v=f?c||!!f.closest("form"):!0;return h.jsxs(h5e,{scope:n,checked:o,disabled:i,children:[h.jsx(Pn.button,{type:"button",role:"radio","aria-checked":o,"data-state":lZ(o),"data-disabled":i?"":void 0,disabled:i,value:a,...u,ref:g,onClick:Gt(e.onClick,w=>{o||l==null||l(),v&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),v&&h.jsx(aZ,{control:f,bubbles:!y.current,name:r,value:a,checked:o,required:s,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});oZ.displayName=S8;var sZ="RadioIndicator",iZ=x.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...o}=e,s=p5e(sZ,n);return h.jsx(yl,{present:r||s.checked,children:h.jsx(Pn.span,{"data-state":lZ(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:t})})});iZ.displayName=sZ;var m5e="RadioBubbleInput",aZ=x.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...o},s)=>{const i=x.useRef(null),a=Rr(i,s),l=tC(n),c=T4(t);return x.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&g){const y=new Event("click",{bubbles:r});g.call(u,n),u.dispatchEvent(y)}},[l,n,r]),h.jsx(Pn.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:a,style:{...o.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});aZ.displayName=m5e;function lZ(e){return e?"checked":"unchecked"}var g5e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],oC="RadioGroup",[b5e]=Ha(oC,[B0,rZ]),cZ=B0(),uZ=rZ(),[y5e,v5e]=b5e(oC),dZ=x.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:o,value:s,required:i=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:f,...m}=e,g=cZ(n),y=wb(c),[v,w]=bl({prop:s,defaultProp:o??null,onChange:f,caller:oC});return h.jsx(y5e,{scope:n,name:r,required:i,disabled:a,value:v,onValueChange:w,children:h.jsx(y4,{asChild:!0,...g,orientation:l,dir:y,loop:u,children:h.jsx(Pn.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":a?"":void 0,dir:y,...m,ref:t})})})});dZ.displayName=oC;var fZ="RadioGroupItem",hZ=x.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...o}=e,s=v5e(fZ,n),i=s.disabled||r,a=cZ(n),l=uZ(n),c=x.useRef(null),u=Rr(t,c),f=s.value===o.value,m=x.useRef(!1);return x.useEffect(()=>{const g=v=>{g5e.includes(v.key)&&(m.current=!0)},y=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",y)}},[]),h.jsx(v4,{asChild:!0,...a,focusable:!i,active:f,children:h.jsx(oZ,{disabled:i,required:s.required,checked:f,...l,...o,name:s.name,ref:u,onCheck:()=>s.onValueChange(o.value),onKeyDown:Gt(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:Gt(o.onFocus,()=>{var g;m.current&&((g=c.current)==null||g.click())})})})});hZ.displayName=fZ;var x5e="RadioGroupIndicator",pZ=x.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,o=uZ(n);return h.jsx(iZ,{...o,...r,ref:t})});pZ.displayName=x5e;var w5e=dZ,E5e=hZ,_5e=pZ;function S5e({className:e,...t}){return h.jsx(w5e,{"data-slot":"radio-group",className:Qe("grid gap-3",e),...t})}function T5e({className:e,...t}){return h.jsx(E5e,{"data-slot":"radio-group-item",className:Qe("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:h.jsx(_5e,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:h.jsx(hN,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function A$(e,[t,n]){return Math.min(n,Math.max(t,e))}function C5e(e){const t=k5e(e),n=x.forwardRef((r,o)=>{const{children:s,...i}=r,a=x.Children.toArray(s),l=a.find(N5e);if(l){const c=l.props.children,u=a.map(f=>f===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:f);return h.jsx(t,{...i,ref:o,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function k5e(e){const t=x.forwardRef((n,r)=>{const{children:o,...s}=n;if(x.isValidElement(o)){const i=R5e(o),a=I5e(s,o.props);return o.type!==x.Fragment&&(a.ref=r?Td(r,i):i),x.cloneElement(o,a)}return x.Children.count(o)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var A5e=Symbol("radix.slottable");function N5e(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===A5e}function I5e(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const l=s(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function R5e(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var M5e=[" ","Enter","ArrowUp","ArrowDown"],D5e=[" ","Enter"],pm="Select",[sC,iC,O5e]=gR(pm),[Nb]=Ha(pm,[O5e,z0]),aC=z0(),[P5e,U0]=Nb(pm),[L5e,$5e]=Nb(pm),mZ=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:s,value:i,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:m,required:g,form:y}=e,v=aC(t),[w,_]=x.useState(null),[T,k]=x.useState(null),[M,D]=x.useState(!1),I=wb(c),[P,B]=bl({prop:r,defaultProp:o??!1,onChange:s,caller:pm}),[U,j]=bl({prop:i,defaultProp:a,onChange:l,caller:pm}),H=x.useRef(null),q=w?y||!!w.closest("form"):!0,[z,Z]=x.useState(new Set),X=Array.from(z).map(J=>J.props.value).join(";");return h.jsx(C4,{...v,children:h.jsxs(P5e,{required:g,scope:t,trigger:w,onTriggerChange:_,valueNode:T,onValueNodeChange:k,valueNodeHasChildren:M,onValueNodeHasChildrenChange:D,contentId:Rc(),value:U,onValueChange:j,open:P,onOpenChange:B,dir:I,triggerPointerDownPosRef:H,disabled:m,children:[h.jsx(sC.Provider,{scope:t,children:h.jsx(L5e,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(J=>{Z(ee=>new Set(ee).add(J))},[]),onNativeOptionRemove:x.useCallback(J=>{Z(ee=>{const re=new Set(ee);return re.delete(J),re})},[]),children:n})}),q?h.jsxs($Z,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:f,value:U,onChange:J=>j(J.target.value),disabled:m,form:y,children:[U===void 0?h.jsx("option",{value:""}):null,Array.from(z)]},X):null]})})};mZ.displayName=pm;var gZ="SelectTrigger",bZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,s=aC(n),i=U0(gZ,n),a=i.disabled||r,l=Rr(t,i.onTriggerChange),c=iC(n),u=x.useRef("touch"),[f,m,g]=BZ(v=>{const w=c().filter(k=>!k.disabled),_=w.find(k=>k.value===i.value),T=zZ(w,v,_);T!==void 0&&i.onValueChange(T.value)}),y=v=>{a||(i.onOpenChange(!0),g()),v&&(i.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return h.jsx(cw,{asChild:!0,...s,children:h.jsx(Pn.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":FZ(i.value)?"":void 0,...o,ref:l,onClick:Gt(o.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&y(v)}),onPointerDown:Gt(o.onPointerDown,v=>{u.current=v.pointerType;const w=v.target;w.hasPointerCapture(v.pointerId)&&w.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:Gt(o.onKeyDown,v=>{const w=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(w&&v.key===" ")&&M5e.includes(v.key)&&(y(),v.preventDefault())})})})});bZ.displayName=gZ;var yZ="SelectValue",vZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:s,placeholder:i="",...a}=e,l=U0(yZ,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,f=Rr(t,l.onValueNodeChange);return Mi(()=>{c(u)},[c,u]),h.jsx(Pn.span,{...a,ref:f,style:{pointerEvents:"none"},children:FZ(l.value)?h.jsx(h.Fragment,{children:i}):s})});vZ.displayName=yZ;var F5e="SelectIcon",xZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return h.jsx(Pn.span,{"aria-hidden":!0,...o,ref:t,children:r||""})});xZ.displayName=F5e;var B5e="SelectPortal",wZ=e=>h.jsx(uw,{asChild:!0,...e});wZ.displayName=B5e;var mm="SelectContent",EZ=x.forwardRef((e,t)=>{const n=U0(mm,e.__scopeSelect),[r,o]=x.useState();if(Mi(()=>{o(new DocumentFragment)},[]),!n.open){const s=r;return s?pl.createPortal(h.jsx(_Z,{scope:e.__scopeSelect,children:h.jsx(sC.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),s):null}return h.jsx(SZ,{...e,ref:t})});EZ.displayName=mm;var iu=10,[_Z,H0]=Nb(mm),z5e="SelectContentImpl",j5e=C5e("SelectContent.RemoveScroll"),SZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:s,onPointerDownOutside:i,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:w,..._}=e,T=U0(mm,n),[k,M]=x.useState(null),[D,I]=x.useState(null),P=Rr(t,he=>M(he)),[B,U]=x.useState(null),[j,H]=x.useState(null),q=iC(n),[z,Z]=x.useState(!1),X=x.useRef(!1);x.useEffect(()=>{if(k)return O4(k)},[k]),M4();const J=x.useCallback(he=>{const[Fe,...Oe]=q().map(ue=>ue.ref.current),[Re]=Oe.slice(-1),nt=document.activeElement;for(const ue of he)if(ue===nt||(ue==null||ue.scrollIntoView({block:"nearest"}),ue===Fe&&D&&(D.scrollTop=0),ue===Re&&D&&(D.scrollTop=D.scrollHeight),ue==null||ue.focus(),document.activeElement!==nt))return},[q,D]),ee=x.useCallback(()=>J([B,k]),[J,B,k]);x.useEffect(()=>{z&&ee()},[z,ee]);const{onOpenChange:re,triggerPointerDownPosRef:ie}=T;x.useEffect(()=>{if(k){let he={x:0,y:0};const Fe=Re=>{var nt,ue;he={x:Math.abs(Math.round(Re.pageX)-(((nt=ie.current)==null?void 0:nt.x)??0)),y:Math.abs(Math.round(Re.pageY)-(((ue=ie.current)==null?void 0:ue.y)??0))}},Oe=Re=>{he.x<=10&&he.y<=10?Re.preventDefault():k.contains(Re.target)||re(!1),document.removeEventListener("pointermove",Fe),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",Fe),document.addEventListener("pointerup",Oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Fe),document.removeEventListener("pointerup",Oe,{capture:!0})}}},[k,re,ie]),x.useEffect(()=>{const he=()=>re(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[re]);const[K,te]=BZ(he=>{const Fe=q().filter(nt=>!nt.disabled),Oe=Fe.find(nt=>nt.ref.current===document.activeElement),Re=zZ(Fe,he,Oe);Re&&setTimeout(()=>Re.ref.current.focus())}),se=x.useCallback((he,Fe,Oe)=>{const Re=!X.current&&!Oe;(T.value!==void 0&&T.value===Fe||Re)&&(U(he),Re&&(X.current=!0))},[T.value]),Q=x.useCallback(()=>k==null?void 0:k.focus(),[k]),Te=x.useCallback((he,Fe,Oe)=>{const Re=!X.current&&!Oe;(T.value!==void 0&&T.value===Fe||Re)&&H(he)},[T.value]),ge=r==="popper"?FN:TZ,Ce=ge===FN?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:v,avoidCollisions:w}:{};return h.jsx(_Z,{scope:n,content:k,viewport:D,onViewportChange:I,itemRefCallback:se,selectedItem:B,onItemLeave:Q,itemTextRefCallback:Te,focusSelectedItem:ee,selectedItemText:j,position:r,isPositioned:z,searchRef:K,children:h.jsx(fw,{as:j5e,allowPinchZoom:!0,children:h.jsx(dw,{asChild:!0,trapped:T.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:Gt(o,he=>{var Fe;(Fe=T.trigger)==null||Fe.focus({preventScroll:!0}),he.preventDefault()}),children:h.jsx(Eb,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:h.jsx(ge,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:he=>he.preventDefault(),..._,...Ce,onPlaced:()=>Z(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Gt(_.onKeyDown,he=>{const Fe=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!Fe&&he.key.length===1&&te(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let Re=q().filter(nt=>!nt.disabled).map(nt=>nt.ref.current);if(["ArrowUp","End"].includes(he.key)&&(Re=Re.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const nt=he.target,ue=Re.indexOf(nt);Re=Re.slice(ue+1)}setTimeout(()=>J(Re)),he.preventDefault()}})})})})})})});SZ.displayName=z5e;var U5e="SelectItemAlignedPosition",TZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,s=U0(mm,n),i=H0(mm,n),[a,l]=x.useState(null),[c,u]=x.useState(null),f=Rr(t,P=>u(P)),m=iC(n),g=x.useRef(!1),y=x.useRef(!0),{viewport:v,selectedItem:w,selectedItemText:_,focusSelectedItem:T}=i,k=x.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&v&&w&&_){const P=s.trigger.getBoundingClientRect(),B=c.getBoundingClientRect(),U=s.valueNode.getBoundingClientRect(),j=_.getBoundingClientRect();if(s.dir!=="rtl"){const nt=j.left-B.left,ue=U.left-nt,et=P.left-ue,ut=P.width+et,Yt=Math.max(ut,B.width),Ht=window.innerWidth-iu,Pt=A$(ue,[iu,Math.max(iu,Ht-Yt)]);a.style.minWidth=ut+"px",a.style.left=Pt+"px"}else{const nt=B.right-j.right,ue=window.innerWidth-U.right-nt,et=window.innerWidth-P.right-ue,ut=P.width+et,Yt=Math.max(ut,B.width),Ht=window.innerWidth-iu,Pt=A$(ue,[iu,Math.max(iu,Ht-Yt)]);a.style.minWidth=ut+"px",a.style.right=Pt+"px"}const H=m(),q=window.innerHeight-iu*2,z=v.scrollHeight,Z=window.getComputedStyle(c),X=parseInt(Z.borderTopWidth,10),J=parseInt(Z.paddingTop,10),ee=parseInt(Z.borderBottomWidth,10),re=parseInt(Z.paddingBottom,10),ie=X+J+z+re+ee,K=Math.min(w.offsetHeight*5,ie),te=window.getComputedStyle(v),se=parseInt(te.paddingTop,10),Q=parseInt(te.paddingBottom,10),Te=P.top+P.height/2-iu,ge=q-Te,Ce=w.offsetHeight/2,he=w.offsetTop+Ce,Fe=X+J+he,Oe=ie-Fe;if(Fe<=Te){const nt=H.length>0&&w===H[H.length-1].ref.current;a.style.bottom="0px";const ue=c.clientHeight-v.offsetTop-v.offsetHeight,et=Math.max(ge,Ce+(nt?Q:0)+ue+ee),ut=Fe+et;a.style.height=ut+"px"}else{const nt=H.length>0&&w===H[0].ref.current;a.style.top="0px";const et=Math.max(Te,X+v.offsetTop+(nt?se:0)+Ce)+Oe;a.style.height=et+"px",v.scrollTop=Fe-Te+v.offsetTop}a.style.margin=`${iu}px 0`,a.style.minHeight=K+"px",a.style.maxHeight=q+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,s.trigger,s.valueNode,a,c,v,w,_,s.dir,r]);Mi(()=>k(),[k]);const[M,D]=x.useState();Mi(()=>{c&&D(window.getComputedStyle(c).zIndex)},[c]);const I=x.useCallback(P=>{P&&y.current===!0&&(k(),T==null||T(),y.current=!1)},[k,T]);return h.jsx(V5e,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:I,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:h.jsx(Pn.div,{...o,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});TZ.displayName=U5e;var H5e="SelectPopperPosition",FN=x.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=iu,...s}=e,i=aC(n);return h.jsx(k4,{...i,...s,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});FN.displayName=H5e;var[V5e,T8]=Nb(mm,{}),BN="SelectViewport",CZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,s=H0(BN,n),i=T8(BN,n),a=Rr(t,s.onViewportChange),l=x.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(sC.Slot,{scope:n,children:h.jsx(Pn.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:Gt(o.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&f){const g=Math.abs(l.current-u.scrollTop);if(g>0){const y=window.innerHeight-iu*2,v=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),_=Math.max(v,w);if(_<y){const T=_+g,k=Math.min(y,T),M=T-k;f.style.height=k+"px",f.style.bottom==="0px"&&(u.scrollTop=M>0?M:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});CZ.displayName=BN;var kZ="SelectGroup",[q5e,G5e]=Nb(kZ),W5e=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Rc();return h.jsx(q5e,{scope:n,id:o,children:h.jsx(Pn.div,{role:"group","aria-labelledby":o,...r,ref:t})})});W5e.displayName=kZ;var AZ="SelectLabel",Y5e=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=G5e(AZ,n);return h.jsx(Pn.div,{id:o.id,...r,ref:t})});Y5e.displayName=AZ;var ES="SelectItem",[K5e,NZ]=Nb(ES),IZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:s,...i}=e,a=U0(ES,n),l=H0(ES,n),c=a.value===r,[u,f]=x.useState(s??""),[m,g]=x.useState(!1),y=Rr(t,T=>{var k;return(k=l.itemRefCallback)==null?void 0:k.call(l,T,r,o)}),v=Rc(),w=x.useRef("touch"),_=()=>{o||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(K5e,{scope:n,value:r,disabled:o,textId:v,isSelected:c,onItemTextChange:x.useCallback(T=>{f(k=>k||((T==null?void 0:T.textContent)??"").trim())},[]),children:h.jsx(sC.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:h.jsx(Pn.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:y,onFocus:Gt(i.onFocus,()=>g(!0)),onBlur:Gt(i.onBlur,()=>g(!1)),onClick:Gt(i.onClick,()=>{w.current!=="mouse"&&_()}),onPointerUp:Gt(i.onPointerUp,()=>{w.current==="mouse"&&_()}),onPointerDown:Gt(i.onPointerDown,T=>{w.current=T.pointerType}),onPointerMove:Gt(i.onPointerMove,T=>{var k;w.current=T.pointerType,o?(k=l.onItemLeave)==null||k.call(l):w.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Gt(i.onPointerLeave,T=>{var k;T.currentTarget===document.activeElement&&((k=l.onItemLeave)==null||k.call(l))}),onKeyDown:Gt(i.onKeyDown,T=>{var M;((M=l.searchRef)==null?void 0:M.current)!==""&&T.key===" "||(D5e.includes(T.key)&&_(),T.key===" "&&T.preventDefault())})})})})});IZ.displayName=ES;var fv="SelectItemText",RZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...s}=e,i=U0(fv,n),a=H0(fv,n),l=NZ(fv,n),c=$5e(fv,n),[u,f]=x.useState(null),m=Rr(t,_=>f(_),l.onItemTextChange,_=>{var T;return(T=a.itemTextRefCallback)==null?void 0:T.call(a,_,l.value,l.disabled)}),g=u==null?void 0:u.textContent,y=x.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:w}=c;return Mi(()=>(v(y),()=>w(y)),[v,w,y]),h.jsxs(h.Fragment,{children:[h.jsx(Pn.span,{id:l.textId,...s,ref:m}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?pl.createPortal(s.children,i.valueNode):null]})});RZ.displayName=fv;var MZ="SelectItemIndicator",DZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return NZ(MZ,n).isSelected?h.jsx(Pn.span,{"aria-hidden":!0,...r,ref:t}):null});DZ.displayName=MZ;var zN="SelectScrollUpButton",OZ=x.forwardRef((e,t)=>{const n=H0(zN,e.__scopeSelect),r=T8(zN,e.__scopeSelect),[o,s]=x.useState(!1),i=Rr(t,r.onScrollButtonChange);return Mi(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?h.jsx(LZ,{...e,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});OZ.displayName=zN;var jN="SelectScrollDownButton",PZ=x.forwardRef((e,t)=>{const n=H0(jN,e.__scopeSelect),r=T8(jN,e.__scopeSelect),[o,s]=x.useState(!1),i=Rr(t,r.onScrollButtonChange);return Mi(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?h.jsx(LZ,{...e,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});PZ.displayName=jN;var LZ=x.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,s=H0("SelectScrollButton",n),i=x.useRef(null),a=iC(n),l=x.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),Mi(()=>{var u;const c=a().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Pn.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:Gt(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:Gt(o.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:Gt(o.onPointerLeave,()=>{l()})})}),Z5e="SelectSeparator",J5e=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return h.jsx(Pn.div,{"aria-hidden":!0,...r,ref:t})});J5e.displayName=Z5e;var UN="SelectArrow",X5e=x.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=aC(n),s=U0(UN,n),i=H0(UN,n);return s.open&&i.position==="popper"?h.jsx(A4,{...o,...r,ref:t}):null});X5e.displayName=UN;var Q5e="SelectBubbleInput",$Z=x.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const o=x.useRef(null),s=Rr(r,o),i=tC(t);return x.useEffect(()=>{const a=o.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==t&&u){const f=new Event("change",{bubbles:!0});u.call(a,t),a.dispatchEvent(f)}},[i,t]),h.jsx(Pn.select,{...n,style:{...UG,...n.style},ref:s,defaultValue:t})});$Z.displayName=Q5e;function FZ(e){return e===""||e===void 0}function BZ(e){const t=vu(e),n=x.useRef(""),r=x.useRef(0),o=x.useCallback(i=>{const a=n.current+i;t(a),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(a)},[t]),s=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,s]}function zZ(e,t,n){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let i=eke(e,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function eke(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var tke=mZ,nke=bZ,rke=vZ,oke=xZ,ske=wZ,ike=EZ,ake=CZ,lke=IZ,cke=RZ,uke=DZ,dke=OZ,fke=PZ;function _S({...e}){return h.jsx(tke,{"data-slot":"select",...e})}function SS({...e}){return h.jsx(rke,{"data-slot":"select-value",...e})}function TS({className:e,size:t="default",children:n,...r}){return h.jsxs(nke,{"data-slot":"select-trigger","data-size":t,className:Qe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,h.jsx(oke,{asChild:!0,children:h.jsx(Lf,{className:"size-4 opacity-50"})})]})}function CS({className:e,children:t,position:n="popper",...r}){return h.jsx(ske,{children:h.jsxs(ike,{"data-slot":"select-content",className:Qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[h.jsx(hke,{}),h.jsx(ake,{className:Qe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),h.jsx(pke,{})]})})}function kS({className:e,children:t,...n}){return h.jsxs(lke,{"data-slot":"select-item",className:Qe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[h.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:h.jsx(uke,{children:h.jsx(Co,{className:"size-4"})})}),h.jsx(cke,{children:t})]})}function hke({className:e,...t}){return h.jsx(dke,{"data-slot":"select-scroll-up-button",className:Qe("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(gq,{className:"size-4"})})}function pke({className:e,...t}){return h.jsx(fke,{"data-slot":"select-scroll-down-button",className:Qe("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(Lf,{className:"size-4"})})}function C8({className:e,...t}){return h.jsx("textarea",{"data-slot":"textarea",className:Qe("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function mke({event:e,isOpen:t,onClose:n,onSave:r,onDelete:o}){var ie;const[s,i]=x.useState(""),[a,l]=x.useState(""),[c,u]=x.useState(new Date),[f,m]=x.useState(new Date),[g,y]=x.useState(`${PN}:00`),[v,w]=x.useState(`${c$}:00`),[_,T]=x.useState(!1),[k,M]=x.useState(""),[D,I]=x.useState("sky"),[P,B]=x.useState(null),[U,j]=x.useState(!1),[H,q]=x.useState(!1);x.useEffect(()=>{console.log("EventDialog received event:",e)},[e]),x.useEffect(()=>{if(e){i(e.title||""),l(e.description||"");const K=new Date(e.start),te=new Date(e.end);u(K),m(te),y(Z(K)),w(Z(te)),T(e.allDay||!1),M(e.location||""),I(e.color||"sky"),B(null)}else z()},[e]);const z=()=>{i(""),l(""),u(new Date),m(new Date),y(`${PN}:00`),w(`${c$}:00`),T(!1),M(""),I("sky"),B(null)},Z=K=>{const te=K.getHours().toString().padStart(2,"0"),se=Math.floor(K.getMinutes()/15)*15;return`${te}:${se.toString().padStart(2,"0")}`},X=x.useMemo(()=>{const K=[];for(let te=pd;te<=Vp;te++)for(let se=0;se<60;se+=15){const Q=te.toString().padStart(2,"0"),Te=se.toString().padStart(2,"0"),ge=`${Q}:${Te}`,Ce=new Date(2e3,0,1,te,se),he=ar(Ce,"h:mm a");K.push({value:ge,label:he})}return K},[]),J=()=>{const K=new Date(c),te=new Date(f);if(_)K.setHours(0,0,0,0),te.setHours(23,59,59,999);else{const[Q=0,Te=0]=g.split(":").map(Number),[ge=0,Ce=0]=v.split(":").map(Number);if(Q<pd||Q>Vp||ge<pd||ge>Vp){B(`Selected time must be between ${pd}:00 and ${Vp}:00`);return}K.setHours(Q,Te,0),te.setHours(ge,Ce,0)}if(xS(te,K)){B("End date cannot be before start date");return}const se=s.trim()?s:"(no title)";r({id:(e==null?void 0:e.id)||"",title:se,description:a,start:K,end:te,allDay:_,location:k,color:D})},ee=()=>{e!=null&&e.id&&o(e.id)},re=[{value:"sky",label:"Sky",bgClass:"bg-sky-400 data-[state=checked]:bg-sky-400",borderClass:"border-sky-400 data-[state=checked]:border-sky-400"},{value:"amber",label:"Amber",bgClass:"bg-amber-400 data-[state=checked]:bg-amber-400",borderClass:"border-amber-400 data-[state=checked]:border-amber-400"},{value:"violet",label:"Violet",bgClass:"bg-violet-400 data-[state=checked]:bg-violet-400",borderClass:"border-violet-400 data-[state=checked]:border-violet-400"},{value:"rose",label:"Rose",bgClass:"bg-rose-400 data-[state=checked]:bg-rose-400",borderClass:"border-rose-400 data-[state=checked]:border-rose-400"},{value:"emerald",label:"Emerald",bgClass:"bg-emerald-400 data-[state=checked]:bg-emerald-400",borderClass:"border-emerald-400 data-[state=checked]:border-emerald-400"},{value:"orange",label:"Orange",bgClass:"bg-orange-400 data-[state=checked]:bg-orange-400",borderClass:"border-orange-400 data-[state=checked]:border-orange-400"}];return h.jsx(RW,{open:t,onOpenChange:K=>!K&&n(),children:h.jsxs(MW,{className:"sm:max-w-[425px]",children:[h.jsxs(DW,{children:[h.jsx(OW,{children:e!=null&&e.id?"Edit Event":"Create Event"}),h.jsx(zEe,{className:"sr-only",children:e!=null&&e.id?"Edit the details of this event":"Add a new event to your calendar"})]}),P&&h.jsx("div",{className:"bg-destructive/15 text-destructive rounded-md px-3 py-2 text-sm",children:P}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"*:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"title",children:"Title"}),h.jsx(wd,{id:"title",value:s,onChange:K=>i(K.target.value)})]}),h.jsxs("div",{className:"*:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"description",children:"Description"}),h.jsx(C8,{id:"description",value:a,onChange:K=>l(K.target.value),rows:3})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{className:"flex-1 *:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"start-date",children:"Start Date"}),h.jsxs(vx,{open:U,onOpenChange:j,children:[h.jsx(xx,{asChild:!0,children:h.jsxs(_r,{id:"start-date",variant:"outline",className:Qe("group bg-background hover:bg-background border-input w-full justify-between px-3 font-normal outline-offset-0 outline-none focus-visible:outline-[3px]",!c&&"text-muted-foreground"),children:[h.jsx("span",{className:Qe("truncate",!c&&"text-muted-foreground"),children:c?ar(c,"PPP"):"Pick a date"}),h.jsx(x$,{size:16,className:"text-muted-foreground/80 shrink-0","aria-hidden":"true"})]})}),h.jsx(wx,{className:"w-auto p-2",align:"start",children:h.jsx(bx,{mode:"single",selected:c,defaultMonth:c,onSelect:K=>{K&&(u(K),xS(f,K)&&m(K),B(null),j(!1))}})})]})]}),!_&&h.jsxs("div",{className:"min-w-28 *:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"start-time",children:"Start Time"}),h.jsxs(_S,{value:g,onValueChange:y,children:[h.jsx(TS,{id:"start-time",children:h.jsx(SS,{placeholder:"Select time"})}),h.jsx(CS,{children:X.map(K=>h.jsx(kS,{value:K.value,children:K.label},K.value))})]})]})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{className:"flex-1 *:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"end-date",children:"End Date"}),h.jsxs(vx,{open:H,onOpenChange:q,children:[h.jsx(xx,{asChild:!0,children:h.jsxs(_r,{id:"end-date",variant:"outline",className:Qe("group bg-background hover:bg-background border-input w-full justify-between px-3 font-normal outline-offset-0 outline-none focus-visible:outline-[3px]",!f&&"text-muted-foreground"),children:[h.jsx("span",{className:Qe("truncate",!f&&"text-muted-foreground"),children:f?ar(f,"PPP"):"Pick a date"}),h.jsx(x$,{size:16,className:"text-muted-foreground/80 shrink-0","aria-hidden":"true"})]})}),h.jsx(wx,{className:"w-auto p-2",align:"start",children:h.jsx(bx,{mode:"single",selected:f,defaultMonth:f,disabled:{before:c},onSelect:K=>{K&&(m(K),B(null),q(!1))}})})]})]}),!_&&h.jsxs("div",{className:"min-w-28 *:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"end-time",children:"End Time"}),h.jsxs(_S,{value:v,onValueChange:w,children:[h.jsx(TS,{id:"end-time",children:h.jsx(SS,{placeholder:"Select time"})}),h.jsx(CS,{children:X.map(K=>h.jsx(kS,{value:K.value,children:K.label},K.value))})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(yx,{id:"all-day",checked:_,onCheckedChange:K=>T(K===!0)}),h.jsx(Hl,{htmlFor:"all-day",children:"All day"})]}),h.jsxs("div",{className:"*:not-first:mt-1.5",children:[h.jsx(Hl,{htmlFor:"location",children:"Location"}),h.jsx(wd,{id:"location",value:k,onChange:K=>M(K.target.value)})]}),h.jsxs("fieldset",{className:"space-y-4",children:[h.jsx("legend",{className:"text-foreground text-sm leading-none font-medium",children:"Etiquette"}),h.jsx(S5e,{className:"flex gap-1.5",defaultValue:(ie=re[0])==null?void 0:ie.value,value:D,onValueChange:K=>I(K),children:re.map(K=>h.jsx(T5e,{id:`color-${K.value}`,value:K.value,"aria-label":K.label,className:Qe("size-6 shadow-none",K.bgClass,K.borderClass)},K.value))})]})]}),h.jsxs(BEe,{className:"flex-row sm:justify-between",children:[(e==null?void 0:e.id)&&h.jsx(_r,{variant:"outline",size:"icon",onClick:ee,"aria-label":"Delete event",children:h.jsx(J4e,{size:16,"aria-hidden":"true"})}),h.jsxs("div",{className:"flex flex-1 justify-end gap-2",children:[h.jsx(_r,{variant:"outline",onClick:n,children:"Cancel"}),h.jsx(_r,{onClick:J,children:"Save"})]})]})]})})}function gke({currentDate:e,events:t,onEventSelect:n,onEventCreate:r}){const o=x.useMemo(()=>{const m=uK(e),g=aK(m),y=Pc(m,{weekStartsOn:0}),v=Ab(g,{weekStartsOn:0});return lK({start:y,end:v})},[e]),s=x.useMemo(()=>Array.from({length:7}).map((m,g)=>{const y=Sf(Pc(new Date),g);return ar(y,"EEE")}),[]),i=x.useMemo(()=>{const m=[];let g=[];for(let y=0;y<o.length;y++)g.push(o[y]),(g.length===7||y===o.length-1)&&(m.push(g),g=[]);return m},[o]),a=(m,g)=>{g.stopPropagation(),n(m)},[l,c]=x.useState(!1),{contentRef:u,getVisibleEventCount:f}=W4e({eventHeight:ON,eventGap:tK});return x.useEffect(()=>{c(!0)},[]),h.jsxs("div",{"data-slot":"month-view",className:"contents",children:[h.jsx("div",{className:"border-border/70 grid grid-cols-7 border-b",children:s.map(m=>h.jsx("div",{className:"text-muted-foreground/70 py-2 text-center text-sm",children:m},m))}),h.jsx("div",{className:"grid flex-1 auto-rows-fr",children:i.map((m,g)=>h.jsx("div",{className:"grid grid-cols-7 [&:last-child>*]:border-b-0",children:m.map((y,v)=>{if(!y)return null;const w=U4e(t,y),_=H4e(t,y),T=wS(y,e),k=`month-cell-${y.toISOString()}`,M=[..._,...w],D=V4e(t,y),I=g===0&&v===0,P=l?f(M.length):void 0,B=P!==void 0&&M.length>P,U=B?M.length-P:0;return h.jsx("div",{className:"group border-border/70 data-outside-cell:bg-muted/25 data-outside-cell:text-muted-foreground/70 border-r border-b last:border-r-0","data-today":h1(y)||void 0,"data-outside-cell":!T||void 0,children:h.jsxs(p8,{id:k,date:y,onClick:()=>{const j=new Date(y);j.setHours(PN,0,0),r(j)},children:[h.jsx("div",{className:"group-data-today:bg-primary group-data-today:text-primary-foreground mt-1 inline-flex size-6 items-center justify-center rounded-full text-sm",children:ar(y,"d")}),h.jsxs("div",{ref:I?u:null,className:"min-h-[calc((var(--event-height)+var(--event-gap))*2)] sm:min-h-[calc((var(--event-height)+var(--event-gap))*3)] lg:min-h-[calc((var(--event-height)+var(--event-gap))*4)]",children:[b$(M).map((j,H)=>{const q=new Date(j.start),z=new Date(j.end),Z=bo(y,q),X=bo(y,z),J=l&&P&&H>=P;return P?Z?h.jsx("div",{className:"aria-hidden:hidden","aria-hidden":J?"true":void 0,children:h.jsx(h8,{event:j,view:"month",onClick:ee=>a(j,ee),isFirstDay:Z,isLastDay:X})},j.id):h.jsx("div",{className:"aria-hidden:hidden","aria-hidden":J?"true":void 0,children:h.jsx(hm,{onClick:ee=>a(j,ee),event:j,view:"month",isFirstDay:Z,isLastDay:X,children:h.jsxs("div",{className:"invisible","aria-hidden":!0,children:[!j.allDay&&h.jsxs("span",{children:[ar(new Date(j.start),"h:mm")," "]}),j.title]})})},`spanning-${j.id}-${y.toISOString().slice(0,10)}`):null}),B&&h.jsxs(vx,{modal:!0,children:[h.jsx(xx,{asChild:!0,children:h.jsx("button",{className:"focus-visible:border-ring focus-visible:ring-ring/50 text-muted-foreground hover:text-foreground hover:bg-muted/50 mt-[var(--event-gap)] flex h-[var(--event-height)] w-full items-center overflow-hidden px-1 text-left text-[10px] backdrop-blur-md transition outline-none select-none focus-visible:ring-[3px] sm:px-2 sm:text-xs",onClick:j=>j.stopPropagation(),children:h.jsxs("span",{children:["+ ",U," ",h.jsx("span",{className:"max-sm:sr-only",children:"more"})]})})}),h.jsx(wx,{align:"center",className:"max-w-52 p-3",style:{"--event-height":`${ON}px`},children:h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-sm font-medium",children:ar(y,"EEE d")}),h.jsx("div",{className:"space-y-1",children:b$(D).map(j=>{const H=new Date(j.start),q=new Date(j.end),z=bo(y,H),Z=bo(y,q);return h.jsx(hm,{onClick:X=>a(j,X),event:j,view:"month",isFirstDay:z,isLastDay:Z},j.id)})})]})})]})]})]})},y.toString())})},`week-${g}`))})]})}function bke({currentDate:e,events:t,onEventSelect:n,onEventCreate:r}){const o=x.useMemo(()=>{const g=Pc(e,{weekStartsOn:0}),y=Ab(e,{weekStartsOn:0});return lK({start:g,end:y})},[e]),s=x.useMemo(()=>Pc(e,{weekStartsOn:0}),[e]),i=x.useMemo(()=>{const g=Wf(e);return cK({start:A1(g,pd),end:A1(g,Vp-1)})},[e]),a=x.useMemo(()=>t.filter(g=>g.allDay||fm(g)).filter(g=>{const y=new Date(g.start),v=new Date(g.end);return o.some(w=>bo(w,y)||bo(w,v)||w>y&&w<v)}),[t,o]),l=x.useMemo(()=>o.map(y=>{const w=[...t.filter(M=>{if(M.allDay||fm(M))return!1;const D=new Date(M.start),I=new Date(M.end);return bo(y,D)||bo(y,I)||D<y&&I>y})].sort((M,D)=>{const I=new Date(M.start),P=new Date(D.start),B=new Date(M.end),U=new Date(D.end);if(I<P)return-1;if(I>P)return 1;const j=Y1(B,I);return Y1(U,P)-j}),_=[],T=Wf(y),k=[];return w.forEach(M=>{const D=new Date(M.start),I=new Date(M.end),P=bo(y,D)?D:T,B=bo(y,I)?I:A1(T,24),U=N1(P)+gx(P)/60,j=N1(B)+gx(B)/60,H=(U-pd)*px,q=(j-U)*px;let z=0,Z=!1;for(;!Z;){const re=k[z]||[];re.length===0?(k[z]=re,Z=!0):re.some(K=>sK({start:P,end:B},{start:new Date(K.event.start),end:new Date(K.event.end)}))?z++:Z=!0}const X=k[z]||[];k[z]=X,X.push({event:M,end:B});const J=z===0?1:.9,ee=z===0?0:z*.1;_.push({event:M,top:H,height:q,left:ee,width:J,zIndex:10+z})}),_}),[o,t]),c=(g,y)=>{y.stopPropagation(),n(g)},u=a.length>0,{currentTimePosition:f,currentTimeVisible:m}=xK(e,"week");return h.jsxs("div",{"data-slot":"week-view",className:"flex h-full flex-col",children:[h.jsxs("div",{className:"bg-background/80 border-border/70 sticky top-0 z-30 grid grid-cols-8 border-b backdrop-blur-md",children:[h.jsx("div",{className:"text-muted-foreground/70 py-2 text-center text-sm",children:h.jsx("span",{className:"max-[479px]:sr-only",children:ar(new Date,"O")})}),o.map(g=>h.jsxs("div",{className:"data-today:text-foreground text-muted-foreground/70 py-2 text-center text-sm data-today:font-medium","data-today":h1(g)||void 0,children:[h.jsxs("span",{className:"sm:hidden","aria-hidden":"true",children:[ar(g,"E")[0]," ",ar(g,"d")]}),h.jsx("span",{className:"max-sm:hidden",children:ar(g,"EEE dd")})]},g.toString()))]}),u&&h.jsx("div",{className:"border-border/70 bg-muted/50 border-b",children:h.jsxs("div",{className:"grid grid-cols-8",children:[h.jsx("div",{className:"border-border/70 relative border-r",children:h.jsx("span",{className:"text-muted-foreground/70 absolute bottom-0 left-0 h-6 w-16 max-w-full pe-2 text-right text-[10px] sm:pe-4 sm:text-xs",children:"All day"})}),o.map((g,y)=>{const v=a.filter(w=>{const _=new Date(w.start),T=new Date(w.end);return bo(g,_)||g>_&&g<T||bo(g,T)});return h.jsx("div",{className:"border-border/70 relative border-r p-1 last:border-r-0","data-today":h1(g)||void 0,children:v.map(w=>{const _=new Date(w.start),T=new Date(w.end),k=bo(g,_),M=bo(g,T),D=y===0&&xS(_,s),I=k||D;return h.jsx(hm,{onClick:P=>c(w,P),event:w,view:"month",isFirstDay:k,isLastDay:M,children:h.jsx("div",{className:Qe("truncate",!I&&"invisible"),"aria-hidden":!I,children:w.title})},`spanning-${w.id}`)})},g.toString())})]})}),h.jsxs("div",{className:"grid flex-1 grid-cols-8 overflow-hidden",children:[h.jsx("div",{className:"border-border/70 grid auto-cols-fr border-r",children:i.map((g,y)=>h.jsx("div",{className:"border-border/70 relative min-h-[var(--week-cells-height)] border-b last:border-b-0",children:y>0&&h.jsx("span",{className:"bg-background text-muted-foreground/70 absolute -top-3 left-0 flex h-6 w-16 max-w-full items-center justify-end pe-2 text-[10px] sm:pe-4 sm:text-xs",children:ar(g,"h a")})},g.toString()))}),o.map((g,y)=>h.jsxs("div",{className:"border-border/70 relative grid auto-cols-fr border-r last:border-r-0","data-today":h1(g)||void 0,children:[(l[y]??[]).map(v=>h.jsx("div",{className:"absolute z-10 px-0.5",style:{top:`${v.top}px`,height:`${v.height}px`,left:`${v.left*100}%`,width:`${v.width*100}%`,zIndex:v.zIndex},onClick:w=>w.stopPropagation(),children:h.jsx("div",{className:"size-full",children:h.jsx(h8,{event:v.event,view:"week",onClick:w=>c(v.event,w),showTime:!0,height:v.height})})},v.event.id)),m&&h1(g)&&h.jsx("div",{className:"pointer-events-none absolute right-0 left-0 z-20",style:{top:`${f}%`},children:h.jsxs("div",{className:"relative flex items-center",children:[h.jsx("div",{className:"bg-primary absolute -left-1 h-2 w-2 rounded-full"}),h.jsx("div",{className:"bg-primary h-[2px] w-full"})]})}),i.map(v=>{const w=N1(v);return h.jsx("div",{className:"border-border/70 relative min-h-[var(--week-cells-height)] border-b last:border-b-0",children:[0,1,2,3].map(_=>{const T=w+_*.25;return h.jsx(p8,{id:`week-cell-${g.toISOString()}-${T}`,date:g,time:T,className:Qe("absolute h-[calc(var(--week-cells-height)/4)] w-full",_===0&&"top-0",_===1&&"top-[calc(var(--week-cells-height)/4)]",_===2&&"top-[calc(var(--week-cells-height)/4*2)]",_===3&&"top-[calc(var(--week-cells-height)/4*3)]"),onClick:()=>{const k=new Date(g);k.setHours(w),k.setMinutes(_*15),r(k)}},`${v.toString()}-${_}`)})},v.toString())})]},g.toString()))]})]})}const N$=e=>{let t;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const m=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(g=>g(t,m))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(r,o,a);return a},yke=(e=>e?N$(e):N$),vke=e=>e;function xke(e,t=vke){const n=Me.useSyncExternalStore(e.subscribe,Me.useCallback(()=>t(e.getState()),[e,t]),Me.useCallback(()=>t(e.getInitialState()),[e,t]));return Me.useDebugValue(n),n}const I$=e=>{const t=yke(e),n=r=>xke(t,r);return Object.assign(n,t),n},wke=(e=>e?I$(e):I$),na=[];for(let e=0;e<256;++e)na.push((e+256).toString(16).slice(1));function Eke(e,t=0){return(na[e[t+0]]+na[e[t+1]]+na[e[t+2]]+na[e[t+3]]+"-"+na[e[t+4]]+na[e[t+5]]+"-"+na[e[t+6]]+na[e[t+7]]+"-"+na[e[t+8]]+na[e[t+9]]+"-"+na[e[t+10]]+na[e[t+11]]+na[e[t+12]]+na[e[t+13]]+na[e[t+14]]+na[e[t+15]]).toLowerCase()}let X5;const _ke=new Uint8Array(16);function Ske(){if(!X5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");X5=crypto.getRandomValues.bind(crypto)}return X5(_ke)}const Tke=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),R$={randomUUID:Tke};function Cke(e,t,n){var o;e=e||{};const r=e.random??((o=e.rng)==null?void 0:o.call(e))??Ske();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Eke(r)}function b2(e,t,n){return R$.randomUUID&&!e?R$.randomUUID():Cke(e)}const lC=wke(e=>({todos:[],selectedTodoId:null,activeTab:"all",isAddDialogOpen:!1,isTodoSheetOpen:!1,viewMode:"list",filterUser:null,filterPriority:null,showStarredOnly:!1,searchQuery:"",setTodos:t=>e(()=>({todos:t})),addTodo:t=>e(n=>({todos:[...n.todos,{...t,id:b2(),createdAt:new Date,comments:[],files:[],subTasks:[],starred:!1}]})),updateTodo:(t,n)=>e(r=>({todos:r.todos.map(o=>o.id===t?{...o,...n}:o)})),deleteTodo:t=>e(n=>({todos:n.todos.filter(r=>r.id!==t)})),setSelectedTodoId:t=>e(()=>({selectedTodoId:t})),setActiveTab:t=>e(()=>({activeTab:t})),setAddDialogOpen:t=>e(()=>({isAddDialogOpen:t})),setTodoSheetOpen:t=>e(()=>({isTodoSheetOpen:t})),addComment:(t,n)=>e(r=>({todos:r.todos.map(o=>o.id===t?{...o,comments:[...o.comments,{id:b2(),text:n,createdAt:new Date}]}:o)})),deleteComment:(t,n)=>e(r=>({todos:r.todos.map(o=>o.id===t?{...o,comments:o.comments.filter(s=>s.id!==n)}:o)})),reorderTodos:t=>e(n=>{const r=[...n.todos];return t.forEach(({id:o,position:s})=>{const i=r.findIndex(a=>a.id===o);if(i!==-1){const[a]=r.splice(i,1);r.splice(s,0,a)}}),{todos:r}}),setViewMode:t=>e(()=>({viewMode:t})),setFilterUser:t=>e(()=>({filterUser:t})),setFilterPriority:t=>e(()=>({filterPriority:t})),setSearchQuery:t=>e(()=>({searchQuery:t})),toggleShowStarredOnly:()=>e(t=>({showStarredOnly:!t.showStarredOnly})),addFile:(t,n)=>e(r=>({todos:r.todos.map(o=>o.id===t?{...o,files:[...o.files||[],{...n,id:b2()}]}:o)})),removeFile:(t,n)=>e(r=>({todos:r.todos.map(o=>o.id===t?{...o,files:(o.files||[]).filter(s=>s.id!==n)}:o)})),addSubTask:(t,n)=>e(r=>({todos:r.todos.map(o=>o.id===t?{...o,subTasks:[...o.subTasks||[],{id:b2(),title:n,completed:!1}]}:o)})),updateSubTask:(t,n,r)=>e(o=>({todos:o.todos.map(s=>s.id===t?{...s,subTasks:(s.subTasks||[]).map(i=>i.id===n?{...i,completed:r}:i)}:s)})),removeSubTask:(t,n)=>e(r=>({todos:r.todos.map(o=>o.id===t?{...o,subTasks:(o.subTasks||[]).filter(s=>s.id!==n)}:o)})),toggleStarred:t=>e(n=>({todos:n.todos.map(r=>r.id===t?{...r,starred:!r.starred}:r)}))})),kke=[{id:"4",title:"Design homepage layout",description:"Create wireframes and mockups for the homepage",assignedTo:["Emily Carter","Liam Walker"],comments:[{id:"c3",text:"Consider using a grid layout for responsiveness",createdAt:new Date("2023-05-20T00:00:00.000Z")}],status:"in-progress",priority:"high",createdAt:new Date("2023-05-18T00:00:00.000Z"),dueDate:new Date("2023-06-05T00:00:00.000Z"),reminderDate:new Date("2023-05-30T00:00:00.000Z"),subTasks:[{id:"st4",title:"Sketch wireframe",completed:!0},{id:"st5",title:"Create high-fidelity mockup",completed:!1}],files:[],starred:!0},{id:"5",title:"Conduct user interviews",description:"Schedule and conduct interviews with 5 users",assignedTo:["Liam Walker"],comments:[],status:"pending",priority:"medium",createdAt:new Date("2023-05-22T00:00:00.000Z"),dueDate:new Date("2023-06-12T00:00:00.000Z"),reminderDate:new Date("2023-06-10T00:00:00.000Z"),subTasks:[{id:"st6",title:"Prepare interview questions",completed:!0},{id:"st7",title:"Send invites",completed:!1}],files:[],starred:!1},{id:"6",title:"Write unit tests",description:"Add unit tests for authentication module",assignedTo:["Sophie Lee"],comments:[{id:"c4",text:"Make sure to cover edge cases",createdAt:new Date("2023-05-25T00:00:00.000Z")}],status:"in-progress",priority:"high",createdAt:new Date("2023-05-24T00:00:00.000Z"),dueDate:new Date("2023-06-07T00:00:00.000Z"),reminderDate:new Date("2023-06-05T00:00:00.000Z"),subTasks:[{id:"st8",title:"Write tests for login",completed:!1},{id:"st9",title:"Write tests for logout",completed:!1}],files:[],starred:!0},{id:"7",title:"Prepare launch checklist",description:"Create a checklist of items before launch day",assignedTo:["Daniel Kim","Olivia Adams"],comments:[],status:"pending",priority:"low",createdAt:new Date("2023-05-27T00:00:00.000Z"),dueDate:new Date("2023-06-20T00:00:00.000Z"),reminderDate:void 0,subTasks:[{id:"st10",title:"Domain verification",completed:!1}],files:[],starred:!1},{id:"8",title:"Update privacy policy",description:"Add GDPR compliance section",assignedTo:["Olivia Adams"],comments:[{id:"c5",text:"Consult with the legal team for accuracy",createdAt:new Date("2023-05-29T00:00:00.000Z")}],status:"in-progress",priority:"medium",createdAt:new Date("2023-05-28T00:00:00.000Z"),dueDate:new Date("2023-06-14T00:00:00.000Z"),reminderDate:new Date("2023-06-12T00:00:00.000Z"),subTasks:[{id:"st11",title:"Review existing policy",completed:!0},{id:"st12",title:"Add new GDPR section",completed:!1}],files:[],starred:!1},{id:"9",title:"Deploy to staging",description:"Deploy the latest build to the staging environment",assignedTo:["Noah Bennett"],comments:[],status:"completed",priority:"high",createdAt:new Date("2023-05-30T00:00:00.000Z"),dueDate:new Date("2023-06-02T00:00:00.000Z"),reminderDate:new Date("2023-05-30T00:00:00.000Z"),subTasks:[{id:"st13",title:"Merge main branch",completed:!0},{id:"st14",title:"Trigger CI/CD",completed:!0}],files:[],starred:!0},{id:"10",title:"Organize team retro",description:"Plan and host the sprint retrospective meeting",assignedTo:["Mia Turner","Olivia Adams"],comments:[],status:"pending",priority:"low",createdAt:new Date("2023-06-01T00:00:00.000Z"),dueDate:new Date("2023-06-10T00:00:00.000Z"),reminderDate:new Date("2023-06-09T00:00:00.000Z"),subTasks:[{id:"st15",title:"Book meeting room",completed:!1},{id:"st16",title:"Prepare feedback board",completed:!1}],files:[],starred:!1},{id:"11",title:"Refactor dashboard UI",description:"Improve layout and responsiveness of the dashboard page",assignedTo:["Lucas Evans","Mia Turner","Olivia Adams"],comments:[{id:"c6",text:"Don't forget mobile breakpoints",createdAt:new Date("2023-06-03T00:00:00.000Z")}],status:"in-progress",priority:"high",createdAt:new Date("2023-06-02T00:00:00.000Z"),dueDate:new Date("2023-06-18T00:00:00.000Z"),reminderDate:new Date("2023-06-15T00:00:00.000Z"),subTasks:[{id:"st17",title:"Fix sidebar behavior",completed:!0},{id:"st18",title:"Adjust grid layout",completed:!1}],files:[],starred:!0}];var Ex=(e=>(e.High="high",e.Medium="medium",e.Low="low",e))(Ex||{}),_x=(e=>(e.Pending="pending",e.InProgress="in-progress",e.Completed="completed",e))(_x||{});const HN={high:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",low:"bg-gray-200 text-green-80 dark:bg-gray-700 dark:text-gray-200"},jZ={high:"bg-red-500",medium:"bg-yellow-500",low:"bg-gray-400"},VN={pending:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200","in-progress":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",completed:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"},UZ={pending:"Pending","in-progress":"In Progress",completed:"Completed"},Ake={pending:"bg-blue-500","in-progress":"bg-purple-500",completed:"bg-green-500"},Nke=e=>{let{transform:t}=e;return{...t,x:0}};var HZ="Toggle",k8=x.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:o,...s}=e,[i,a]=bl({prop:n,onChange:o,defaultProp:r??!1,caller:HZ});return h.jsx(Pn.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...s,ref:t,onClick:Gt(e.onClick,()=>{e.disabled||a(!i)})})});k8.displayName=HZ;var Ike=k8,V0="ToggleGroup",[VZ]=Ha(V0,[B0]),qZ=B0(),A8=Me.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return h.jsx(Rke,{...o,ref:t})}if(n==="multiple"){const o=r;return h.jsx(Mke,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${V0}\``)});A8.displayName=V0;var[GZ,WZ]=VZ(V0),Rke=Me.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[i,a]=bl({prop:n,defaultProp:r??"",onChange:o,caller:V0});return h.jsx(GZ,{scope:e.__scopeToggleGroup,type:"single",value:Me.useMemo(()=>i?[i]:[],[i]),onItemActivate:a,onItemDeactivate:Me.useCallback(()=>a(""),[a]),children:h.jsx(YZ,{...s,ref:t})})}),Mke=Me.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[i,a]=bl({prop:n,defaultProp:r??[],onChange:o,caller:V0}),l=Me.useCallback(u=>a((f=[])=>[...f,u]),[a]),c=Me.useCallback(u=>a((f=[])=>f.filter(m=>m!==u)),[a]);return h.jsx(GZ,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:l,onItemDeactivate:c,children:h.jsx(YZ,{...s,ref:t})})});A8.displayName=V0;var[Dke,Oke]=VZ(V0),YZ=Me.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:s,dir:i,loop:a=!0,...l}=e,c=qZ(n),u=wb(i),f={role:"group",dir:u,...l};return h.jsx(Dke,{scope:n,rovingFocus:o,disabled:r,children:o?h.jsx(y4,{asChild:!0,...c,orientation:s,dir:u,loop:a,children:h.jsx(Pn.div,{...f,ref:t})}):h.jsx(Pn.div,{...f,ref:t})})}),AS="ToggleGroupItem",KZ=Me.forwardRef((e,t)=>{const n=WZ(AS,e.__scopeToggleGroup),r=Oke(AS,e.__scopeToggleGroup),o=qZ(e.__scopeToggleGroup),s=n.value.includes(e.value),i=r.disabled||e.disabled,a={...e,pressed:s,disabled:i},l=Me.useRef(null);return r.rovingFocus?h.jsx(v4,{asChild:!0,...o,focusable:!i,active:s,ref:l,children:h.jsx(M$,{...a,ref:t})}):h.jsx(M$,{...a,ref:t})});KZ.displayName=AS;var M$=Me.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,s=WZ(AS,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},a=s.type==="single"?i:void 0;return h.jsx(k8,{...a,...o,ref:t,onPressedChange:l=>{l?s.onItemActivate(r):s.onItemDeactivate(r)}})}),Pke=A8,Lke=KZ;const ZZ=mR("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function qN({className:e,variant:t,size:n,...r}){return h.jsx(Ike,{"data-slot":"toggle",className:Qe(ZZ({variant:t,size:n,className:e})),...r})}const JZ=x.createContext({size:"default",variant:"default"});function $ke({className:e,variant:t,size:n,children:r,...o}){return h.jsx(Pke,{"data-slot":"toggle-group","data-variant":t,"data-size":n,className:Qe("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",e),...o,children:h.jsx(JZ.Provider,{value:{variant:t,size:n},children:r})})}function D$({className:e,children:t,variant:n,size:r,...o}){const s=x.useContext(JZ);return h.jsx(Lke,{"data-slot":"toggle-group-item","data-variant":s.variant||n,"data-size":s.size||r,className:Qe(ZZ({variant:s.variant||n,size:s.size||r}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",e),...o,children:t})}const y2=({todo:e,onClick:t,onStatusChange:n,viewMode:r,onStarToggle:o,isDraggingOverlay:s=!1})=>{var w,_,T,k;const i=((w=e.subTasks)==null?void 0:w.filter(M=>M.completed).length)||0,a=((_=e.subTasks)==null?void 0:_.length)||0,{attributes:l,listeners:c,setNodeRef:u,transform:f,transition:m,isDragging:g}=a8({id:e.id}),y={transform:Tu.Transform.toString(f),transition:m,opacity:g?s?.8:.4:1,zIndex:g?100:1},v=e.reminderDate?ar(new Date(e.reminderDate),"MMM d, yyyy - h:mm a"):null;return r==="grid"?h.jsx("div",{ref:u,...l,...c,style:y,children:h.jsxs(xN,{className:Qe("flex h-full cursor-pointer flex-col transition-shadow hover:shadow-md",e.status==="completed"?"opacity-70":""),onClick:t,children:[h.jsx(wN,{className:"flex h-full flex-col justify-between",children:h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx(yx,{checked:e.status==="completed",onCheckedChange:()=>n?n(e.id,e.status==="completed"?"pending":"completed"):void 0,onClick:M=>M.stopPropagation()}),h.jsx("h3",{className:Qe("text-md flex-1 leading-none font-medium",e.status==="completed"?"text-muted-foreground line-through":""),children:e.title}),h.jsx(oL,{className:Qe("size-5 cursor-pointer",e.starred?"fill-yellow-400 text-yellow-400":"text-muted-foreground/50 hover:text-muted-foreground"),onClick:M=>o?o(e.id,M):void 0})]}),h.jsxs("div",{className:"text-muted-foreground flex flex-wrap items-center gap-1 text-sm",children:[h.jsx("span",{children:"Assigned to:"}),e.assignedTo.map((M,D)=>h.jsx(_c,{variant:"outline",className:"font-normal",children:M},D))]}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.dueDate&&h.jsxs("div",{className:"text-muted-foreground flex items-center gap-1 text-sm",children:[h.jsx(B1,{className:"h-3 w-3"}),h.jsx("span",{children:ar(new Date(e.dueDate),"MMM d, yyyy")})]}),e.reminderDate&&h.jsx(V1,{children:h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:h.jsx("div",{className:"flex items-center gap-1 text-xs",children:h.jsx(HP,{className:"size-3"})})}),h.jsx(um,{children:h.jsxs("p",{children:["Reminder: ",v]})})]})})]}),a>0&&h.jsxs("div",{className:"text-muted-foreground text-xs",children:["Subtasks: ",i,"/",a]})]})}),h.jsxs(gve,{className:"flex flex-wrap justify-between border-t",children:[h.jsxs("div",{className:"flex items-center gap-2 capitalize",children:[h.jsx(_c,{className:VN[e.status],children:e.status.replace("-"," ")}),h.jsx(_c,{className:HN[e.priority],children:e.priority})]}),(((T=e.files)==null?void 0:T.length)||0)>0&&h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(ix,{className:"text-muted-foreground size-3"}),h.jsx("span",{className:"text-muted-foreground text-xs",children:(k=e.files)==null?void 0:k.length})]})]})]})}):h.jsx("div",{ref:u,...l,...c,style:y,children:h.jsx(xN,{className:Qe("cursor-pointer transition-shadow hover:shadow-md",e.status==="completed"?"opacity-70":""),onClick:t,children:h.jsxs(wN,{className:"flex items-start gap-3",children:[h.jsx(yx,{checked:e.status==="completed",onCheckedChange:()=>n?n(e.id,e.status==="completed"?"pending":"completed"):void 0,onClick:M=>M.stopPropagation()}),h.jsxs("div",{className:"flex grow flex-col space-y-2",children:[h.jsxs("div",{className:"flex flex-col items-start justify-between space-y-1 lg:flex-row lg:space-y-0",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("h3",{className:Qe("text-md leading-none font-medium",e.status==="completed"?"text-muted-foreground line-through":""),children:e.title}),h.jsx(oL,{className:Qe("size-4 cursor-pointer",e.starred?"fill-yellow-400 text-yellow-400":"text-muted-foreground/50 hover:text-muted-foreground"),onClick:M=>o?o(e.id,M):void 0})]}),h.jsxs("div",{className:"flex items-center gap-2 capitalize",children:[h.jsx(_c,{className:VN[e.status],children:e.status.replace("-"," ")}),h.jsx(_c,{className:HN[e.priority],children:e.priority})]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[h.jsx("div",{className:"flex flex-wrap gap-1",children:e.assignedTo.map((M,D)=>h.jsx(_c,{variant:"outline",className:"font-normal",children:M},D))}),e.dueDate&&h.jsxs("div",{className:"text-muted-foreground flex items-center gap-1 text-xs",children:[h.jsx(B1,{className:"h-3 w-3"}),h.jsx("span",{children:ar(new Date(e.dueDate),"MMM d, yyyy")})]}),e.reminderDate&&h.jsx(V1,{children:h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:h.jsx("div",{className:"flex items-center gap-1 text-xs",children:h.jsx(HP,{className:"size-3"})})}),h.jsx(um,{children:h.jsxs("p",{children:["Reminder: ",v]})})]})}),e.files&&e.files.length>0&&h.jsxs("div",{className:"text-muted-foreground flex items-center gap-1 text-xs",children:[h.jsx(ix,{className:"size-3"}),h.jsx("span",{children:e.files.length})]}),a>0&&h.jsxs("div",{className:"text-muted-foreground text-xs",children:["Subtasks: ",i,"/",a]})]})]})]})})})},Fke=({onTabChange:e,activeTab:t})=>h.jsx(iG,{defaultValue:t,onValueChange:n=>e(n),value:t,children:h.jsxs(aG,{children:[h.jsx(Av,{value:"all",children:"All"}),Object.values(_x).map(n=>h.jsx(Av,{value:n,children:UZ[n]},n))]})});function Bke({activeTab:e,onSelectTodo:t,onAddTodoClick:n}){const[r,o]=Me.useState(null),{todos:s,updateTodo:i,reorderTodos:a,viewMode:l,setViewMode:c,filterUser:u,setFilterUser:f,filterPriority:m,setFilterPriority:g,searchQuery:y,setSearchQuery:v,toggleStarred:w,showStarredOnly:_,toggleShowStarredOnly:T,setActiveTab:k}=lC(),[,M]=Me.useState([]),D=XR(m0(q4,{activationConstraint:{distance:3}}),m0(V4,{coordinateGetter:sTe})),I=ie=>{k(ie)},P=Array.from(new Set((s||[]).flatMap(ie=>ie.assignedTo))),B=(s||[]).filter(ie=>{var K;if(e!=="all")return ie.status===e;if(u&&u.length>0&&!u.some(te=>ie.assignedTo.includes(te))||m&&ie.priority!==m||_&&!ie.starred)return!1;if(y.trim()){const te=y.toLowerCase();return ie.title.toLowerCase().includes(te)||((K=ie.description)==null?void 0:K.toLowerCase().includes(te))||ie.assignedTo.some(se=>se.toLowerCase().includes(te))}return!0}),U=(ie,K)=>{i(ie,{status:K}),Ui.success(`Task status changed to ${K.replace("-"," ")}`)},j=ie=>{console.log("event.active.id",ie.active.id),o(ie.active.id)},H=ie=>{const{active:K,over:te}=ie;if(!te||K.id===te.id)return;const se=B.findIndex(Ce=>Ce.id===K.id),Q=B.findIndex(Ce=>Ce.id===te.id);if(se===-1||Q===-1)return;const Te=C1(B,se,Q),ge=Te.map((Ce,he)=>({id:Ce.id,position:he}));a(ge),M(ge),console.log("Todos after reordering:",{reorderedTodos:Te.map(Ce=>{var he;return{id:Ce.id,title:Ce.title,position:(he=ge.find(Fe=>Fe.id===Ce.id))==null?void 0:he.position}})}),Ui.success("The to-do items have been reordered successfully.")},q=ie=>{o(null)},z=(ie,K)=>{if(!u)f(K?[ie]:null);else{const te=K?[...u,ie]:u.filter(se=>se!==ie);f(te.length>0?te:null)}},Z=()=>{f(null),g(null),v(""),_&&T()},X=(ie,K)=>{K.stopPropagation(),w(ie)},J=()=>h.jsxs("div",{className:"space-y-6 p-4",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Assigned Users"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(ie=>h.jsx(qN,{variant:"outline",size:"sm",pressed:(u==null?void 0:u.includes(ie))||!1,onPressedChange:K=>z(ie,K),className:"px-3 text-xs",children:ie},ie))})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(yx,{id:"starred",checked:_,onCheckedChange:T}),h.jsx(Hl,{htmlFor:"starred",children:"Show starred only"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Priority"}),h.jsx("div",{className:"flex gap-2 *:grow",children:Object.values(Ex).map(ie=>h.jsxs(qN,{variant:"outline",size:"sm",pressed:(m==null?void 0:m.includes(ie))||!1,onPressedChange:()=>g(ie),className:"px-3 text-xs capitalize",children:[h.jsx("span",{className:Qe("size-2 rounded-full",jZ[ie])}),ie]},ie))}),(u||m||_)&&h.jsx("div",{className:"text-end",children:h.jsxs(_r,{variant:"link",size:"sm",className:"px-0!",onClick:Z,children:["Clear Filters",h.jsx(qr,{})]})})]})]}),ee=(s||[]).map(ie=>ie.id),re=()=>l==="grid"?h.jsxs(mS,{sensors:D,collisionDetection:hS,onDragStart:j,onDragEnd:H,onDragCancel:q,children:[h.jsx(yS,{items:ee,strategy:bS,children:h.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:B.map(ie=>h.jsx(y2,{todo:ie,onClick:()=>t(ie.id),onStatusChange:U,viewMode:"grid",onStarToggle:X},ie.id))})}),h.jsx(gS,{children:r?h.jsx(y2,{todo:B.find(ie=>ie.id===r),viewMode:"grid",isDraggingOverlay:!0}):null})]}):h.jsxs(mS,{sensors:D,collisionDetection:hS,onDragStart:j,onDragEnd:H,onDragCancel:q,modifiers:[Nke],children:[h.jsx(yS,{items:ee,strategy:bS,children:h.jsx("div",{className:"grid grid-cols-1 space-y-4",children:B.map(ie=>h.jsx(y2,{todo:ie,onClick:()=>t(ie.id),onStatusChange:U,viewMode:"list",onStarToggle:X},ie.id))})}),h.jsx(gS,{children:r?h.jsx(y2,{todo:B.find(ie=>ie.id===r),viewMode:"list",isDraggingOverlay:!0}):null})]});return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 lg:flex-row lg:items-center",children:[h.jsx(Fke,{activeTab:e,onTabChange:I}),h.jsxs("div",{className:"flex w-full items-center gap-2 lg:w-auto",children:[h.jsxs("div",{className:"relative w-auto",children:[h.jsx(Gf,{className:"absolute top-2.5 left-3 size-4 opacity-50"}),h.jsx(wd,{placeholder:"Search tasks...",className:"ps-10",value:y,onChange:ie=>v(ie.target.value)})]}),h.jsxs(mw,{children:[h.jsx(gw,{asChild:!0,children:h.jsxs(_r,{size:"icon",variant:"outline",className:"relative",children:[h.jsx(Sq,{}),(u||m||_)&&h.jsx(_c,{variant:"secondary",className:"absolute -end-1.5 -top-1.5 size-4 rounded-full p-0",children:(u?1:0)+(m?1:0)+(_?1:0)})]})}),h.jsx(bw,{className:"w-80",align:"end",children:J()})]}),h.jsxs($ke,{type:"single",variant:"outline",value:l,onValueChange:ie=>ie&&c(ie),children:[h.jsx(D$,{value:"list","aria-label":"List view",children:h.jsx(R1e,{})}),h.jsx(D$,{value:"grid","aria-label":"Grid view",children:h.jsx(y1e,{})})]}),h.jsx(V1,{children:h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:h.jsx(_r,{size:"icon",onClick:n,className:"fixed end-6 bottom-6 z-10 rounded-full! md:size-14",children:h.jsx(qf,{className:"md:size-6"})})}),h.jsx(um,{side:"left",children:h.jsx("p",{children:"Add To-Do"})})]})})]})]}),B.length===0?h.jsxs("div",{className:"flex h-[calc(100vh-12rem)] flex-col items-center justify-center py-12 text-center",children:[h.jsx("h3",{className:"text-xl font-medium",children:"No tasks found"}),h.jsx("p",{className:"text-muted-foreground mt-2",children:"Add a new task to get started"})]}):re()]})}var Cw=e=>e.type==="checkbox",Gp=e=>e instanceof Date,ul=e=>e==null;const XZ=e=>typeof e=="object";var mi=e=>!ul(e)&&!Array.isArray(e)&&XZ(e)&&!Gp(e),QZ=e=>mi(e)&&e.target?Cw(e.target)?e.target.checked:e.target.value:e,zke=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,eJ=(e,t)=>e.has(zke(t)),jke=e=>{const t=e.constructor&&e.constructor.prototype;return mi(t)&&t.hasOwnProperty("isPrototypeOf")},N8=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ai(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(N8&&(e instanceof Blob||r))&&(n||mi(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!jke(e))t=e;else for(const o in e)e.hasOwnProperty(o)&&(t[o]=Ai(e[o]));else return e;return t}var cC=e=>/^\w*$/.test(e),Gs=e=>e===void 0,I8=e=>Array.isArray(e)?e.filter(Boolean):[],R8=e=>I8(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Wt=(e,t,n)=>{if(!t||!mi(e))return n;const r=(cC(t)?[t]:R8(t)).reduce((o,s)=>ul(o)?o:o[s],e);return Gs(r)||r===e?Gs(e[t])?n:e[t]:r},Vl=e=>typeof e=="boolean",_o=(e,t,n)=>{let r=-1;const o=cC(t)?[t]:R8(t),s=o.length,i=s-1;for(;++r<s;){const a=o[r];let l=n;if(r!==i){const c=e[a];l=mi(c)||Array.isArray(c)?c:isNaN(+o[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=l,e=e[a]}};const NS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},uu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},hf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},M8=Me.createContext(null);M8.displayName="HookFormContext";const uC=()=>Me.useContext(M8),Uke=e=>{const{children:t,...n}=e;return Me.createElement(M8.Provider,{value:n},t)};var tJ=(e,t,n,r=!0)=>{const o={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(o,s,{get:()=>{const i=s;return t._proxyFormState[i]!==uu.all&&(t._proxyFormState[i]=!r||uu.all),n&&(n[i]=!0),e[i]}});return o};const D8=typeof window<"u"?Me.useLayoutEffect:Me.useEffect;function nJ(e){const t=uC(),{control:n=t.control,disabled:r,name:o,exact:s}=e||{},[i,a]=Me.useState(n._formState),l=Me.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return D8(()=>n._subscribe({name:o,formState:l.current,exact:s,callback:c=>{!r&&a({...n._formState,...c})}}),[o,r,s]),Me.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),Me.useMemo(()=>tJ(i,n,l.current,!1),[i,n])}var ql=e=>typeof e=="string",GN=(e,t,n,r,o)=>ql(e)?(r&&t.watch.add(e),Wt(n,e,o)):Array.isArray(e)?e.map(s=>(r&&t.watch.add(s),Wt(n,s))):(r&&(t.watchAll=!0),n),WN=e=>ul(e)||!XZ(e);function du(e,t,n=new WeakSet){if(WN(e)||WN(t))return Object.is(e,t);if(Gp(e)&&Gp(t))return e.getTime()===t.getTime();const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const s of r){const i=e[s];if(!o.includes(s))return!1;if(s!=="ref"){const a=t[s];if(Gp(i)&&Gp(a)||mi(i)&&mi(a)||Array.isArray(i)&&Array.isArray(a)?!du(i,a,n):!Object.is(i,a))return!1}}return!0}function Hke(e){const t=uC(),{control:n=t.control,name:r,defaultValue:o,disabled:s,exact:i,compute:a}=e||{},l=Me.useRef(o),c=Me.useRef(a),u=Me.useRef(void 0),f=Me.useRef(n),m=Me.useRef(r);c.current=a;const[g,y]=Me.useState(()=>{const M=n._getWatch(r,l.current);return c.current?c.current(M):M}),v=Me.useCallback(M=>{const D=GN(r,n._names,M||n._formValues,!1,l.current);return c.current?c.current(D):D},[n._formValues,n._names,r]),w=Me.useCallback(M=>{if(!s){const D=GN(r,n._names,M||n._formValues,!1,l.current);if(c.current){const I=c.current(D);du(I,u.current)||(y(I),u.current=I)}else y(D)}},[n._formValues,n._names,s,r]);D8(()=>((f.current!==n||!du(m.current,r))&&(f.current=n,m.current=r,w()),n._subscribe({name:r,formState:{values:!0},exact:i,callback:M=>{w(M.values)}})),[n,i,r,w]),Me.useEffect(()=>n._removeUnmounted());const _=f.current!==n,T=m.current,k=Me.useMemo(()=>{if(s)return null;const M=!_&&!du(T,r);return _||M?v():null},[s,_,r,T,v]);return k!==null?k:g}function Vke(e){const t=uC(),{name:n,disabled:r,control:o=t.control,shouldUnregister:s,defaultValue:i,exact:a=!0}=e,l=eJ(o._names.array,n),c=Me.useMemo(()=>Wt(o._formValues,n,Wt(o._defaultValues,n,i)),[o,n,i]),u=Hke({control:o,name:n,defaultValue:c,exact:a}),f=nJ({control:o,name:n,exact:a}),m=Me.useRef(e),g=Me.useRef(void 0),y=Me.useRef(o.register(n,{...e.rules,value:u,...Vl(e.disabled)?{disabled:e.disabled}:{}}));m.current=e;const v=Me.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Wt(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!Wt(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Wt(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Wt(f.validatingFields,n)},error:{enumerable:!0,get:()=>Wt(f.errors,n)}}),[f,n]),w=Me.useCallback(M=>y.current.onChange({target:{value:QZ(M),name:n},type:NS.CHANGE}),[n]),_=Me.useCallback(()=>y.current.onBlur({target:{value:Wt(o._formValues,n),name:n},type:NS.BLUR}),[n,o._formValues]),T=Me.useCallback(M=>{const D=Wt(o._fields,n);D&&M&&(D._f.ref={focus:()=>M.focus&&M.focus(),select:()=>M.select&&M.select(),setCustomValidity:I=>M.setCustomValidity(I),reportValidity:()=>M.reportValidity()})},[o._fields,n]),k=Me.useMemo(()=>({name:n,value:u,...Vl(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:w,onBlur:_,ref:T}),[n,r,f.disabled,w,_,T,u]);return Me.useEffect(()=>{const M=o._options.shouldUnregister||s,D=g.current;D&&D!==n&&!l&&o.unregister(D),o.register(n,{...m.current.rules,...Vl(m.current.disabled)?{disabled:m.current.disabled}:{}});const I=(P,B)=>{const U=Wt(o._fields,P);U&&U._f&&(U._f.mount=B)};if(I(n,!0),M){const P=Ai(Wt(o._options.defaultValues,n,m.current.defaultValue));_o(o._defaultValues,n,P),Gs(Wt(o._formValues,n))&&_o(o._formValues,n,P)}return!l&&o.register(n),g.current=n,()=>{(l?M&&!o._state.action:M)?o.unregister(n):I(n,!1)}},[n,o,l,s]),Me.useEffect(()=>{o._setDisabledField({disabled:r,name:n})},[r,n,o]),Me.useMemo(()=>({field:k,formState:f,fieldState:v}),[k,f,v])}const qke=e=>e.render(Vke(e));var O8=(e,t,n,r,o)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:o||!0}}:{},Mv=e=>Array.isArray(e)?e:[e],O$=()=>{let e=[];return{get observers(){return e},next:o=>{for(const s of e)s.next&&s.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(s=>s!==o)}}),unsubscribe:()=>{e=[]}}};function rJ(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const o=e[r],s=t[r];if(o&&mi(o)&&s){const i=rJ(o,s);mi(i)&&(n[r]=i)}else e[r]&&(n[r]=s)}return n}var Oa=e=>mi(e)&&!Object.keys(e).length,P8=e=>e.type==="file",fu=e=>typeof e=="function",IS=e=>{if(!N8)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},oJ=e=>e.type==="select-multiple",L8=e=>e.type==="radio",Gke=e=>L8(e)||Cw(e),Q5=e=>IS(e)&&e.isConnected;function Wke(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Gs(e)?r++:e[t[r++]];return e}function Yke(e){for(const t in e)if(e.hasOwnProperty(t)&&!Gs(e[t]))return!1;return!0}function ci(e,t){const n=Array.isArray(t)?t:cC(t)?[t]:R8(t),r=n.length===1?e:Wke(e,n),o=n.length-1,s=n[o];return r&&delete r[s],o!==0&&(mi(r)&&Oa(r)||Array.isArray(r)&&Yke(r))&&ci(e,n.slice(0,-1)),e}var Kke=e=>{for(const t in e)if(fu(e[t]))return!0;return!1};function sJ(e){return Array.isArray(e)||mi(e)&&!Kke(e)}function YN(e,t={}){for(const n in e){const r=e[n];sJ(r)?(t[n]=Array.isArray(r)?[]:{},YN(r,t[n])):Gs(r)||(t[n]=!0)}return t}function n1(e,t,n){n||(n=YN(t));for(const r in e){const o=e[r];if(sJ(o))Gs(t)||WN(n[r])?n[r]=YN(o,Array.isArray(o)?[]:{}):n1(o,ul(t)?{}:t[r],n[r]);else{const s=t[r];n[r]=!du(o,s)}}return n}const P$={value:!1,isValid:!1},L$={value:!0,isValid:!0};var iJ=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Gs(e[0].attributes.value)?Gs(e[0].value)||e[0].value===""?L$:{value:e[0].value,isValid:!0}:L$:P$}return P$},aJ=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Gs(e)?e:t?e===""?NaN:e&&+e:n&&ql(e)?new Date(e):r?r(e):e;const $$={isValid:!1,value:null};var lJ=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,$$):$$;function F$(e){const t=e.ref;return P8(t)?t.files:L8(t)?lJ(e.refs).value:oJ(t)?[...t.selectedOptions].map(({value:n})=>n):Cw(t)?iJ(e.refs).value:aJ(Gs(t.value)?e.ref.value:t.value,e)}var Zke=(e,t,n,r)=>{const o={};for(const s of e){const i=Wt(t,s);i&&_o(o,s,i._f)}return{criteriaMode:n,names:[...e],fields:o,shouldUseNativeValidation:r}},RS=e=>e instanceof RegExp,Vy=e=>Gs(e)?e:RS(e)?e.source:mi(e)?RS(e.value)?e.value.source:e.value:e,B$=e=>({isOnSubmit:!e||e===uu.onSubmit,isOnBlur:e===uu.onBlur,isOnChange:e===uu.onChange,isOnAll:e===uu.all,isOnTouch:e===uu.onTouched});const z$="AsyncFunction";var Jke=e=>!!e&&!!e.validate&&!!(fu(e.validate)&&e.validate.constructor.name===z$||mi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===z$)),Xke=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),j$=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Dv=(e,t,n,r)=>{for(const o of n||Object.keys(e)){const s=Wt(e,o);if(s){const{_f:i,...a}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],o)&&!r)return!0;if(i.ref&&t(i.ref,i.name)&&!r)return!0;if(Dv(a,t))break}else if(mi(a)&&Dv(a,t))break}}};function U$(e,t,n){const r=Wt(e,n);if(r||cC(n))return{error:r,name:n};const o=n.split(".");for(;o.length;){const s=o.join("."),i=Wt(t,s),a=Wt(e,s);if(i&&!Array.isArray(i)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};o.pop()}return{name:n}}var Qke=(e,t,n,r)=>{n(e);const{name:o,...s}=e;return Oa(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!r||uu.all))},eAe=(e,t,n)=>!e||!t||e===t||Mv(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),tAe=(e,t,n,r,o)=>o.isOnAll?!1:!n&&o.isOnTouch?!(t||e):(n?r.isOnBlur:o.isOnBlur)?!e:(n?r.isOnChange:o.isOnChange)?e:!0,nAe=(e,t)=>!I8(Wt(e,t)).length&&ci(e,t),rAe=(e,t,n)=>{const r=Mv(Wt(e,n));return _o(r,"root",t[n]),_o(e,n,r),e};function H$(e,t,n="validate"){if(ql(e)||Array.isArray(e)&&e.every(ql)||Vl(e)&&!e)return{type:n,message:ql(e)?e:"",ref:t}}var qg=e=>mi(e)&&!RS(e)?e:{value:e,message:""},V$=async(e,t,n,r,o,s)=>{const{ref:i,refs:a,required:l,maxLength:c,minLength:u,min:f,max:m,pattern:g,validate:y,name:v,valueAsNumber:w,mount:_}=e._f,T=Wt(n,v);if(!_||t.has(v))return{};const k=a?a[0]:i,M=q=>{o&&k.reportValidity&&(k.setCustomValidity(Vl(q)?"":q||""),k.reportValidity())},D={},I=L8(i),P=Cw(i),B=I||P,U=(w||P8(i))&&Gs(i.value)&&Gs(T)||IS(i)&&i.value===""||T===""||Array.isArray(T)&&!T.length,j=O8.bind(null,v,r,D),H=(q,z,Z,X=hf.maxLength,J=hf.minLength)=>{const ee=q?z:Z;D[v]={type:q?X:J,message:ee,ref:i,...j(q?X:J,ee)}};if(s?!Array.isArray(T)||!T.length:l&&(!B&&(U||ul(T))||Vl(T)&&!T||P&&!iJ(a).isValid||I&&!lJ(a).isValid)){const{value:q,message:z}=ql(l)?{value:!!l,message:l}:qg(l);if(q&&(D[v]={type:hf.required,message:z,ref:k,...j(hf.required,z)},!r))return M(z),D}if(!U&&(!ul(f)||!ul(m))){let q,z;const Z=qg(m),X=qg(f);if(!ul(T)&&!isNaN(T)){const J=i.valueAsNumber||T&&+T;ul(Z.value)||(q=J>Z.value),ul(X.value)||(z=J<X.value)}else{const J=i.valueAsDate||new Date(T),ee=K=>new Date(new Date().toDateString()+" "+K),re=i.type=="time",ie=i.type=="week";ql(Z.value)&&T&&(q=re?ee(T)>ee(Z.value):ie?T>Z.value:J>new Date(Z.value)),ql(X.value)&&T&&(z=re?ee(T)<ee(X.value):ie?T<X.value:J<new Date(X.value))}if((q||z)&&(H(!!q,Z.message,X.message,hf.max,hf.min),!r))return M(D[v].message),D}if((c||u)&&!U&&(ql(T)||s&&Array.isArray(T))){const q=qg(c),z=qg(u),Z=!ul(q.value)&&T.length>+q.value,X=!ul(z.value)&&T.length<+z.value;if((Z||X)&&(H(Z,q.message,z.message),!r))return M(D[v].message),D}if(g&&!U&&ql(T)){const{value:q,message:z}=qg(g);if(RS(q)&&!T.match(q)&&(D[v]={type:hf.pattern,message:z,ref:i,...j(hf.pattern,z)},!r))return M(z),D}if(y){if(fu(y)){const q=await y(T,n),z=H$(q,k);if(z&&(D[v]={...z,...j(hf.validate,z.message)},!r))return M(z.message),D}else if(mi(y)){let q={};for(const z in y){if(!Oa(q)&&!r)break;const Z=H$(await y[z](T,n),k,z);Z&&(q={...Z,...j(z,Z.message)},M(Z.message),r&&(D[v]=q))}if(!Oa(q)&&(D[v]={ref:k,...q},!r))return D}}return M(!0),D};const oAe={mode:uu.onSubmit,reValidateMode:uu.onChange,shouldFocusError:!0};function sAe(e={}){let t={...oAe,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:fu(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},o=mi(t.defaultValues)||mi(t.values)?Ai(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Ai(o),i={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const m={array:O$(),state:O$()},g=t.criteriaMode===uu.all,y=me=>Ne=>{clearTimeout(c),c=setTimeout(me,Ne)},v=async me=>{if(!t.disabled&&(u.isValid||f.isValid||me)){const Ne=t.resolver?Oa((await P()).errors):await U(r,!0);Ne!==n.isValid&&m.state.next({isValid:Ne})}},w=(me,Ne)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((me||Array.from(a.mount)).forEach($e=>{$e&&(Ne?_o(n.validatingFields,$e,Ne):ci(n.validatingFields,$e))}),m.state.next({validatingFields:n.validatingFields,isValidating:!Oa(n.validatingFields)}))},_=(me,Ne=[],$e,Je,Le=!0,Ve=!0)=>{if(Je&&$e&&!t.disabled){if(i.action=!0,Ve&&Array.isArray(Wt(r,me))){const _e=$e(Wt(r,me),Je.argA,Je.argB);Le&&_o(r,me,_e)}if(Ve&&Array.isArray(Wt(n.errors,me))){const _e=$e(Wt(n.errors,me),Je.argA,Je.argB);Le&&_o(n.errors,me,_e),nAe(n.errors,me)}if((u.touchedFields||f.touchedFields)&&Ve&&Array.isArray(Wt(n.touchedFields,me))){const _e=$e(Wt(n.touchedFields,me),Je.argA,Je.argB);Le&&_o(n.touchedFields,me,_e)}(u.dirtyFields||f.dirtyFields)&&(n.dirtyFields=n1(o,s)),m.state.next({name:me,isDirty:H(me,Ne),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else _o(s,me,Ne)},T=(me,Ne)=>{_o(n.errors,me,Ne),m.state.next({errors:n.errors})},k=me=>{n.errors=me,m.state.next({errors:n.errors,isValid:!1})},M=(me,Ne,$e,Je)=>{const Le=Wt(r,me);if(Le){const Ve=Wt(s,me,Gs($e)?Wt(o,me):$e);Gs(Ve)||Je&&Je.defaultChecked||Ne?_o(s,me,Ne?Ve:F$(Le._f)):Z(me,Ve),i.mount&&!i.action&&v()}},D=(me,Ne,$e,Je,Le)=>{let Ve=!1,_e=!1;const W={name:me};if(!t.disabled){if(!$e||Je){(u.isDirty||f.isDirty)&&(_e=n.isDirty,n.isDirty=W.isDirty=H(),Ve=_e!==W.isDirty);const L=du(Wt(o,me),Ne);_e=!!Wt(n.dirtyFields,me),L?ci(n.dirtyFields,me):_o(n.dirtyFields,me,!0),W.dirtyFields=n.dirtyFields,Ve=Ve||(u.dirtyFields||f.dirtyFields)&&_e!==!L}if($e){const L=Wt(n.touchedFields,me);L||(_o(n.touchedFields,me,$e),W.touchedFields=n.touchedFields,Ve=Ve||(u.touchedFields||f.touchedFields)&&L!==$e)}Ve&&Le&&m.state.next(W)}return Ve?W:{}},I=(me,Ne,$e,Je)=>{const Le=Wt(n.errors,me),Ve=(u.isValid||f.isValid)&&Vl(Ne)&&n.isValid!==Ne;if(t.delayError&&$e?(l=y(()=>T(me,$e)),l(t.delayError)):(clearTimeout(c),l=null,$e?_o(n.errors,me,$e):ci(n.errors,me)),($e?!du(Le,$e):Le)||!Oa(Je)||Ve){const _e={...Je,...Ve&&Vl(Ne)?{isValid:Ne}:{},errors:n.errors,name:me};n={...n,..._e},m.state.next(_e)}},P=async me=>{w(me,!0);const Ne=await t.resolver(s,t.context,Zke(me||a.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return w(me),Ne},B=async me=>{const{errors:Ne}=await P(me);if(me)for(const $e of me){const Je=Wt(Ne,$e);Je?_o(n.errors,$e,Je):ci(n.errors,$e)}else n.errors=Ne;return Ne},U=async(me,Ne,$e={valid:!0})=>{for(const Je in me){const Le=me[Je];if(Le){const{_f:Ve,..._e}=Le;if(Ve){const W=a.array.has(Ve.name),L=Le._f&&Jke(Le._f);L&&u.validatingFields&&w([Ve.name],!0);const F=await V$(Le,a.disabled,s,g,t.shouldUseNativeValidation&&!Ne,W);if(L&&u.validatingFields&&w([Ve.name]),F[Ve.name]&&($e.valid=!1,Ne))break;!Ne&&(Wt(F,Ve.name)?W?rAe(n.errors,F,Ve.name):_o(n.errors,Ve.name,F[Ve.name]):ci(n.errors,Ve.name))}!Oa(_e)&&await U(_e,Ne,$e)}}return $e.valid},j=()=>{for(const me of a.unMount){const Ne=Wt(r,me);Ne&&(Ne._f.refs?Ne._f.refs.every($e=>!Q5($e)):!Q5(Ne._f.ref))&&he(me)}a.unMount=new Set},H=(me,Ne)=>!t.disabled&&(me&&Ne&&_o(s,me,Ne),!du(K(),o)),q=(me,Ne,$e)=>GN(me,a,{...i.mount?s:Gs(Ne)?o:ql(me)?{[me]:Ne}:Ne},$e,Ne),z=me=>I8(Wt(i.mount?s:o,me,t.shouldUnregister?Wt(o,me,[]):[])),Z=(me,Ne,$e={})=>{const Je=Wt(r,me);let Le=Ne;if(Je){const Ve=Je._f;Ve&&(!Ve.disabled&&_o(s,me,aJ(Ne,Ve)),Le=IS(Ve.ref)&&ul(Ne)?"":Ne,oJ(Ve.ref)?[...Ve.ref.options].forEach(_e=>_e.selected=Le.includes(_e.value)):Ve.refs?Cw(Ve.ref)?Ve.refs.forEach(_e=>{(!_e.defaultChecked||!_e.disabled)&&(Array.isArray(Le)?_e.checked=!!Le.find(W=>W===_e.value):_e.checked=Le===_e.value||!!Le)}):Ve.refs.forEach(_e=>_e.checked=_e.value===Le):P8(Ve.ref)?Ve.ref.value="":(Ve.ref.value=Le,Ve.ref.type||m.state.next({name:me,values:Ai(s)})))}($e.shouldDirty||$e.shouldTouch)&&D(me,Le,$e.shouldTouch,$e.shouldDirty,!0),$e.shouldValidate&&ie(me)},X=(me,Ne,$e)=>{for(const Je in Ne){if(!Ne.hasOwnProperty(Je))return;const Le=Ne[Je],Ve=me+"."+Je,_e=Wt(r,Ve);(a.array.has(me)||mi(Le)||_e&&!_e._f)&&!Gp(Le)?X(Ve,Le,$e):Z(Ve,Le,$e)}},J=(me,Ne,$e={})=>{const Je=Wt(r,me),Le=a.array.has(me),Ve=Ai(Ne);_o(s,me,Ve),Le?(m.array.next({name:me,values:Ai(s)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&$e.shouldDirty&&m.state.next({name:me,dirtyFields:n1(o,s),isDirty:H(me,Ve)})):Je&&!Je._f&&!ul(Ve)?X(me,Ve,$e):Z(me,Ve,$e),j$(me,a)&&m.state.next({...n,name:me}),m.state.next({name:i.mount?me:void 0,values:Ai(s)})},ee=async me=>{i.mount=!0;const Ne=me.target;let $e=Ne.name,Je=!0;const Le=Wt(r,$e),Ve=L=>{Je=Number.isNaN(L)||Gp(L)&&isNaN(L.getTime())||du(L,Wt(s,$e,L))},_e=B$(t.mode),W=B$(t.reValidateMode);if(Le){let L,F;const ce=Ne.type?F$(Le._f):QZ(me),we=me.type===NS.BLUR||me.type===NS.FOCUS_OUT,ze=!Xke(Le._f)&&!t.resolver&&!Wt(n.errors,$e)&&!Le._f.deps||tAe(we,Wt(n.touchedFields,$e),n.isSubmitted,W,_e),Be=j$($e,a,we);_o(s,$e,ce),we?(!Ne||!Ne.readOnly)&&(Le._f.onBlur&&Le._f.onBlur(me),l&&l(0)):Le._f.onChange&&Le._f.onChange(me);const ct=D($e,ce,we),ln=!Oa(ct)||Be;if(!we&&m.state.next({name:$e,type:me.type,values:Ai(s)}),ze)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?we&&v():we||v()),ln&&m.state.next({name:$e,...Be?{}:ct});if(!we&&Be&&m.state.next({...n}),t.resolver){const{errors:jt}=await P([$e]);if(Ve(ce),Je){const fn=U$(n.errors,r,$e),an=U$(jt,r,fn.name||$e);L=an.error,$e=an.name,F=Oa(jt)}}else w([$e],!0),L=(await V$(Le,a.disabled,s,g,t.shouldUseNativeValidation))[$e],w([$e]),Ve(ce),Je&&(L?F=!1:(u.isValid||f.isValid)&&(F=await U(r,!0)));Je&&(Le._f.deps&&(!Array.isArray(Le._f.deps)||Le._f.deps.length>0)&&ie(Le._f.deps),I($e,F,L,ct))}},re=(me,Ne)=>{if(Wt(n.errors,Ne)&&me.focus)return me.focus(),1},ie=async(me,Ne={})=>{let $e,Je;const Le=Mv(me);if(t.resolver){const Ve=await B(Gs(me)?me:Le);$e=Oa(Ve),Je=me?!Le.some(_e=>Wt(Ve,_e)):$e}else me?(Je=(await Promise.all(Le.map(async Ve=>{const _e=Wt(r,Ve);return await U(_e&&_e._f?{[Ve]:_e}:_e)}))).every(Boolean),!(!Je&&!n.isValid)&&v()):Je=$e=await U(r);return m.state.next({...!ql(me)||(u.isValid||f.isValid)&&$e!==n.isValid?{}:{name:me},...t.resolver||!me?{isValid:$e}:{},errors:n.errors}),Ne.shouldFocus&&!Je&&Dv(r,re,me?Le:a.mount),Je},K=(me,Ne)=>{let $e={...i.mount?s:o};return Ne&&($e=rJ(Ne.dirtyFields?n.dirtyFields:n.touchedFields,$e)),Gs(me)?$e:ql(me)?Wt($e,me):me.map(Je=>Wt($e,Je))},te=(me,Ne)=>({invalid:!!Wt((Ne||n).errors,me),isDirty:!!Wt((Ne||n).dirtyFields,me),error:Wt((Ne||n).errors,me),isValidating:!!Wt(n.validatingFields,me),isTouched:!!Wt((Ne||n).touchedFields,me)}),se=me=>{me&&Mv(me).forEach(Ne=>ci(n.errors,Ne)),m.state.next({errors:me?n.errors:{}})},Q=(me,Ne,$e)=>{const Je=(Wt(r,me,{_f:{}})._f||{}).ref,Le=Wt(n.errors,me)||{},{ref:Ve,message:_e,type:W,...L}=Le;_o(n.errors,me,{...L,...Ne,ref:Je}),m.state.next({name:me,errors:n.errors,isValid:!1}),$e&&$e.shouldFocus&&Je&&Je.focus&&Je.focus()},Te=(me,Ne)=>fu(me)?m.state.subscribe({next:$e=>"values"in $e&&me(q(void 0,Ne),$e)}):q(me,Ne,!0),ge=me=>m.state.subscribe({next:Ne=>{eAe(me.name,Ne.name,me.exact)&&Qke(Ne,me.formState||u,Pt,me.reRenderRoot)&&me.callback({values:{...s},...n,...Ne,defaultValues:o})}}).unsubscribe,Ce=me=>(i.mount=!0,f={...f,...me.formState},ge({...me,formState:f})),he=(me,Ne={})=>{for(const $e of me?Mv(me):a.mount)a.mount.delete($e),a.array.delete($e),Ne.keepValue||(ci(r,$e),ci(s,$e)),!Ne.keepError&&ci(n.errors,$e),!Ne.keepDirty&&ci(n.dirtyFields,$e),!Ne.keepTouched&&ci(n.touchedFields,$e),!Ne.keepIsValidating&&ci(n.validatingFields,$e),!t.shouldUnregister&&!Ne.keepDefaultValue&&ci(o,$e);m.state.next({values:Ai(s)}),m.state.next({...n,...Ne.keepDirty?{isDirty:H()}:{}}),!Ne.keepIsValid&&v()},Fe=({disabled:me,name:Ne})=>{(Vl(me)&&i.mount||me||a.disabled.has(Ne))&&(me?a.disabled.add(Ne):a.disabled.delete(Ne))},Oe=(me,Ne={})=>{let $e=Wt(r,me);const Je=Vl(Ne.disabled)||Vl(t.disabled);return _o(r,me,{...$e||{},_f:{...$e&&$e._f?$e._f:{ref:{name:me}},name:me,mount:!0,...Ne}}),a.mount.add(me),$e?Fe({disabled:Vl(Ne.disabled)?Ne.disabled:t.disabled,name:me}):M(me,!0,Ne.value),{...Je?{disabled:Ne.disabled||t.disabled}:{},...t.progressive?{required:!!Ne.required,min:Vy(Ne.min),max:Vy(Ne.max),minLength:Vy(Ne.minLength),maxLength:Vy(Ne.maxLength),pattern:Vy(Ne.pattern)}:{},name:me,onChange:ee,onBlur:ee,ref:Le=>{if(Le){Oe(me,Ne),$e=Wt(r,me);const Ve=Gs(Le.value)&&Le.querySelectorAll&&Le.querySelectorAll("input,select,textarea")[0]||Le,_e=Gke(Ve),W=$e._f.refs||[];if(_e?W.find(L=>L===Ve):Ve===$e._f.ref)return;_o(r,me,{_f:{...$e._f,..._e?{refs:[...W.filter(Q5),Ve,...Array.isArray(Wt(o,me))?[{}]:[]],ref:{type:Ve.type,name:me}}:{ref:Ve}}}),M(me,!1,void 0,Ve)}else $e=Wt(r,me,{}),$e._f&&($e._f.mount=!1),(t.shouldUnregister||Ne.shouldUnregister)&&!(eJ(a.array,me)&&i.action)&&a.unMount.add(me)}}},Re=()=>t.shouldFocusError&&Dv(r,re,a.mount),nt=me=>{Vl(me)&&(m.state.next({disabled:me}),Dv(r,(Ne,$e)=>{const Je=Wt(r,$e);Je&&(Ne.disabled=Je._f.disabled||me,Array.isArray(Je._f.refs)&&Je._f.refs.forEach(Le=>{Le.disabled=Je._f.disabled||me}))},0,!1))},ue=(me,Ne)=>async $e=>{let Je;$e&&($e.preventDefault&&$e.preventDefault(),$e.persist&&$e.persist());let Le=Ai(s);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:Ve,values:_e}=await P();n.errors=Ve,Le=Ai(_e)}else await U(r);if(a.disabled.size)for(const Ve of a.disabled)ci(Le,Ve);if(ci(n.errors,"root"),Oa(n.errors)){m.state.next({errors:{}});try{await me(Le,$e)}catch(Ve){Je=Ve}}else Ne&&await Ne({...n.errors},$e),Re(),setTimeout(Re);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Oa(n.errors)&&!Je,submitCount:n.submitCount+1,errors:n.errors}),Je)throw Je},et=(me,Ne={})=>{Wt(r,me)&&(Gs(Ne.defaultValue)?J(me,Ai(Wt(o,me))):(J(me,Ne.defaultValue),_o(o,me,Ai(Ne.defaultValue))),Ne.keepTouched||ci(n.touchedFields,me),Ne.keepDirty||(ci(n.dirtyFields,me),n.isDirty=Ne.defaultValue?H(me,Ai(Wt(o,me))):H()),Ne.keepError||(ci(n.errors,me),u.isValid&&v()),m.state.next({...n}))},ut=(me,Ne={})=>{const $e=me?Ai(me):o,Je=Ai($e),Le=Oa(me),Ve=Le?o:Je;if(Ne.keepDefaultValues||(o=$e),!Ne.keepValues){if(Ne.keepDirtyValues){const _e=new Set([...a.mount,...Object.keys(n1(o,s))]);for(const W of Array.from(_e))Wt(n.dirtyFields,W)?_o(Ve,W,Wt(s,W)):J(W,Wt(Ve,W))}else{if(N8&&Gs(me))for(const _e of a.mount){const W=Wt(r,_e);if(W&&W._f){const L=Array.isArray(W._f.refs)?W._f.refs[0]:W._f.ref;if(IS(L)){const F=L.closest("form");if(F){F.reset();break}}}}if(Ne.keepFieldsRef)for(const _e of a.mount)J(_e,Wt(Ve,_e));else r={}}s=t.shouldUnregister?Ne.keepDefaultValues?Ai(o):{}:Ai(Ve),m.array.next({values:{...Ve}}),m.state.next({values:{...Ve}})}a={mount:Ne.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!u.isValid||!!Ne.keepIsValid||!!Ne.keepDirtyValues||!t.shouldUnregister&&!Oa(Ve),i.watch=!!t.shouldUnregister,i.action=!1,Ne.keepErrors||(n.errors={}),m.state.next({submitCount:Ne.keepSubmitCount?n.submitCount:0,isDirty:Le?!1:Ne.keepDirty?n.isDirty:!!(Ne.keepDefaultValues&&!du(me,o)),isSubmitted:Ne.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Le?{}:Ne.keepDirtyValues?Ne.keepDefaultValues&&s?n1(o,s):n.dirtyFields:Ne.keepDefaultValues&&me?n1(o,me):Ne.keepDirty?n.dirtyFields:{},touchedFields:Ne.keepTouched?n.touchedFields:{},errors:Ne.keepErrors?n.errors:{},isSubmitSuccessful:Ne.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},Yt=(me,Ne)=>ut(fu(me)?me(s):me,Ne),Ht=(me,Ne={})=>{const $e=Wt(r,me),Je=$e&&$e._f;if(Je){const Le=Je.refs?Je.refs[0]:Je.ref;Le.focus&&(Le.focus(),Ne.shouldSelect&&fu(Le.select)&&Le.select())}},Pt=me=>{n={...n,...me}},vt={control:{register:Oe,unregister:he,getFieldState:te,handleSubmit:ue,setError:Q,_subscribe:ge,_runSchema:P,_focusError:Re,_getWatch:q,_getDirty:H,_setValid:v,_setFieldArray:_,_setDisabledField:Fe,_setErrors:k,_getFieldArray:z,_reset:ut,_resetDefaultValues:()=>fu(t.defaultValues)&&t.defaultValues().then(me=>{Yt(me,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:j,_disableForm:nt,_subjects:m,_proxyFormState:u,get _fields(){return r},get _formValues(){return s},get _state(){return i},set _state(me){i=me},get _defaultValues(){return o},get _names(){return a},set _names(me){a=me},get _formState(){return n},get _options(){return t},set _options(me){t={...t,...me}}},subscribe:Ce,trigger:ie,register:Oe,handleSubmit:ue,watch:Te,setValue:J,getValues:K,reset:Yt,resetField:et,clearErrors:se,unregister:he,setError:Q,setFocus:Ht,getFieldState:te};return{...vt,formControl:vt}}function iAe(e={}){const t=Me.useRef(void 0),n=Me.useRef(void 0),[r,o]=Me.useState({isDirty:!1,isValidating:!1,isLoading:fu(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:fu(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!fu(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...a}=sAe(e);t.current={...a,formState:r}}const s=t.current.control;return s._options=e,D8(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>o({...s._formState}),reRenderRoot:!0});return o(a=>({...a,isReady:!0})),s._formState.isReady=!0,i},[s]),Me.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),Me.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),Me.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),Me.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),Me.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==r.isDirty&&s._subjects.state.next({isDirty:i})}},[s,r.isDirty]),Me.useEffect(()=>{var i;e.values&&!du(e.values,n.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((i=s._options.resetOptions)===null||i===void 0)&&i.keepIsValid||s._setValid(),n.current=e.values,o(a=>({...a}))):s._resetDefaultValues()},[s,e.values]),Me.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=tJ(r,s),t.current}const q$=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Wt(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},KN=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?q$(r.ref,n,e):r&&r.refs&&r.refs.forEach(o=>q$(o,n,e))}},G$=(e,t)=>{t.shouldUseNativeValidation&&KN(e,t);const n={};for(const r in e){const o=Wt(t.fields,r),s=Object.assign(e[r]||{},{ref:o&&o.ref});if(aAe(t.names||Object.keys(e),r)){const i=Object.assign({},Wt(n,r));_o(i,"root",s),_o(n,r,i)}else _o(n,r,s)}return n},aAe=(e,t)=>{const n=W$(t);return e.some(r=>W$(r).match(`^${n}\\.\\d+`))};function W$(e){return e.replace(/\]|\[/g,"")}function st(e,t,n){function r(a,l){var c;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(c=a._zod).traits??(c.traits=new Set),a._zod.traits.add(e),t(a,l);for(const u in i.prototype)u in a||Object.defineProperty(a,u,{value:i.prototype[u].bind(a)});a._zod.constr=i,a._zod.def=l}const o=(n==null?void 0:n.Parent)??Object;class s extends o{}Object.defineProperty(s,"name",{value:e});function i(a){var l;const c=n!=null&&n.Parent?new s:this;r(c,a),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>{var l,c;return n!=null&&n.Parent&&a instanceof n.Parent?!0:(c=(l=a==null?void 0:a._zod)==null?void 0:l.traits)==null?void 0:c.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class Sx extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const cJ={};function T0(e){return cJ}function uJ(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}function lAe(e,t){return typeof t=="bigint"?t.toString():t}function $8(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function F8(e){return e==null}function B8(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function cAe(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,o=n>r?n:r,s=Number.parseInt(e.toFixed(o).replace(".","")),i=Number.parseInt(t.toFixed(o).replace(".",""));return s%i/10**o}function yo(e,t,n){Object.defineProperty(e,t,{get(){{const r=n();return e[t]=r,r}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function z8(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function qy(e){return JSON.stringify(e)}const dJ=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function MS(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const uAe=$8(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function DS(e){if(MS(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(MS(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const dAe=new Set(["string","number","symbol"]);function kw(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Om(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(r._zod.parent=e),r}function kn(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function fAe(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const hAe={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function pAe(e,t){const n={},r=e._zod.def;for(const o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(n[o]=r.shape[o])}return Om(e,{...e._zod.def,shape:n,checks:[]})}function mAe(e,t){const n={...e._zod.def.shape},r=e._zod.def;for(const o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete n[o]}return Om(e,{...e._zod.def,shape:n,checks:[]})}function gAe(e,t){if(!DS(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return z8(this,"shape",r),r},checks:[]};return Om(e,n)}function bAe(e,t){return Om(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return z8(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function yAe(e,t,n){const r=t._zod.def.shape,o={...r};if(n)for(const s in n){if(!(s in r))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=e?new e({type:"optional",innerType:r[s]}):r[s])}else for(const s in r)o[s]=e?new e({type:"optional",innerType:r[s]}):r[s];return Om(t,{...t._zod.def,shape:o,checks:[]})}function vAe(e,t,n){const r=t._zod.def.shape,o={...r};if(n)for(const s in n){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=new e({type:"nonoptional",innerType:r[s]}))}else for(const s in r)o[s]=new e({type:"nonoptional",innerType:r[s]});return Om(t,{...t._zod.def,shape:o,checks:[]})}function Ov(e,t=0){var n;for(let r=t;r<e.issues.length;r++)if(((n=e.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Wp(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function v2(e){return typeof e=="string"?e:e==null?void 0:e.message}function C0(e,t,n){var o,s,i,a,l,c;const r={...e,path:e.path??[]};if(!e.message){const u=v2((i=(s=(o=e.inst)==null?void 0:o._zod.def)==null?void 0:s.error)==null?void 0:i.call(s,e))??v2((a=t==null?void 0:t.error)==null?void 0:a.call(t,e))??v2((l=n.customError)==null?void 0:l.call(n,e))??v2((c=n.localeError)==null?void 0:c.call(n,e))??"Invalid input";r.message=u}return delete r.inst,delete r.continue,t!=null&&t.reportInput||delete r.input,r}function j8(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Tx(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const fJ=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,lAe,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},U8=st("$ZodError",fJ),dC=st("$ZodError",fJ,{Parent:Error});function xAe(e,t=n=>n.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function wAe(e,t){const n=t||function(s){return s.message},r={_errors:[]},o=s=>{for(const i of s.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>o({issues:a}));else if(i.code==="invalid_key")o({issues:i.issues});else if(i.code==="invalid_element")o({issues:i.issues});else if(i.path.length===0)r._errors.push(n(i));else{let a=r,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(i))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return o(e),r}const hJ=e=>(t,n,r,o)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new Sx;if(i.issues.length){const a=new((o==null?void 0:o.Err)??e)(i.issues.map(l=>C0(l,s,T0())));throw dJ(a,o==null?void 0:o.callee),a}return i.value},EAe=hJ(dC),pJ=e=>async(t,n,r,o)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){const a=new((o==null?void 0:o.Err)??e)(i.issues.map(l=>C0(l,s,T0())));throw dJ(a,o==null?void 0:o.callee),a}return i.value},_Ae=pJ(dC),mJ=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new Sx;return s.issues.length?{success:!1,error:new(e??U8)(s.issues.map(i=>C0(i,o,T0())))}:{success:!0,data:s.value}},SAe=mJ(dC),gJ=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(i=>C0(i,o,T0())))}:{success:!0,data:s.value}},TAe=gJ(dC),CAe=/^[cC][^\s-]{8,}$/,kAe=/^[0-9a-z]+$/,AAe=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,NAe=/^[0-9a-vA-V]{20}$/,IAe=/^[A-Za-z0-9]{27}$/,RAe=/^[a-zA-Z0-9_-]{21}$/,MAe=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,DAe=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Y$=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,OAe=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,PAe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function LAe(){return new RegExp(PAe,"u")}const $Ae=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,FAe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,BAe=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,zAe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,jAe=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,bJ=/^[A-Za-z0-9_-]*$/,UAe=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,HAe=/^\+(?:[0-9]){6,14}[0-9]$/,yJ="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",VAe=new RegExp(`^${yJ}$`);function vJ(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function qAe(e){return new RegExp(`^${vJ(e)}$`)}function GAe(e){const t=vJ({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${yJ}T(?:${r})$`)}const WAe=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},YAe=/^\d+$/,KAe=/^-?\d+(?:\.\d+)?/i,ZAe=/true|false/i,JAe=/null/i,XAe=/^[^A-Z]*$/,QAe=/^[^a-z]*$/,vl=st("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),xJ={number:"number",bigint:"bigint",object:"date"},wJ=st("$ZodCheckLessThan",(e,t)=>{vl.init(e,t);const n=xJ[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),EJ=st("$ZodCheckGreaterThan",(e,t)=>{vl.init(e,t);const n=xJ[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),eNe=st("$ZodCheckMultipleOf",(e,t)=>{vl.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):cAe(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),tNe=st("$ZodCheckNumberFormat",(e,t)=>{var i;vl.init(e,t),t.format=t.format||"float64";const n=(i=t.format)==null?void 0:i.includes("int"),r=n?"int":"number",[o,s]=hAe[t.format];e._zod.onattach.push(a=>{const l=a._zod.bag;l.format=t.format,l.minimum=o,l.maximum=s,n&&(l.pattern=YAe)}),e._zod.check=a=>{const l=a.value;if(n){if(!Number.isInteger(l)){a.issues.push({expected:r,format:t.format,code:"invalid_type",input:l,inst:e});return}if(!Number.isSafeInteger(l)){l>0?a.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):a.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}l<o&&a.issues.push({origin:"number",input:l,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),l>s&&a.issues.push({origin:"number",input:l,code:"too_big",maximum:s,inst:e})}}),nNe=st("$ZodCheckMaxLength",(e,t)=>{var n;vl.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!F8(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const o=r.value;if(o.length<=t.maximum)return;const i=j8(o);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),rNe=st("$ZodCheckMinLength",(e,t)=>{var n;vl.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!F8(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const o=r.value;if(o.length>=t.minimum)return;const i=j8(o);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),oNe=st("$ZodCheckLengthEquals",(e,t)=>{var n;vl.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!F8(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=r=>{const o=r.value,s=o.length;if(s===t.length)return;const i=j8(o),a=s>t.length;r.issues.push({origin:i,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),fC=st("$ZodCheckStringFormat",(e,t)=>{var n,r;vl.init(e,t),e._zod.onattach.push(o=>{const s=o._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),sNe=st("$ZodCheckRegex",(e,t)=>{fC.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),iNe=st("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=XAe),fC.init(e,t)}),aNe=st("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=QAe),fC.init(e,t)}),lNe=st("$ZodCheckIncludes",(e,t)=>{vl.init(e,t);const n=kw(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(o=>{const s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),cNe=st("$ZodCheckStartsWith",(e,t)=>{vl.init(e,t);const n=new RegExp(`^${kw(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),uNe=st("$ZodCheckEndsWith",(e,t)=>{vl.init(e,t);const n=new RegExp(`.*${kw(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),dNe=st("$ZodCheckOverwrite",(e,t)=>{vl.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class fNe{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),o=Math.min(...r.map(i=>i.length-i.trimStart().length)),s=r.map(i=>i.slice(o)).map(i=>" ".repeat(this.indent*2)+i);for(const i of s)this.content.push(i)}compile(){const t=Function,n=this==null?void 0:this.args,o=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new t(...n,o.join(`
`))}}const hNe={major:4,minor:0,patch:0},qo=st("$ZodType",(e,t)=>{var o;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=hNe;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const s of r)for(const i of s._zod.onattach)i(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),(o=e._zod.deferred)==null||o.push(()=>{e._zod.run=e._zod.parse});else{const s=(i,a,l)=>{let c=Ov(i),u;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(i))continue}else if(c)continue;const m=i.issues.length,g=f._zod.check(i);if(g instanceof Promise&&(l==null?void 0:l.async)===!1)throw new Sx;if(u||g instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await g,i.issues.length!==m&&(c||(c=Ov(i,m)))});else{if(i.issues.length===m)continue;c||(c=Ov(i,m))}}return u?u.then(()=>i):i};e._zod.run=(i,a)=>{const l=e._zod.parse(i,a);if(l instanceof Promise){if(a.async===!1)throw new Sx;return l.then(c=>s(c,r,a))}return s(l,r,a)}}e["~standard"]={validate:s=>{var i;try{const a=SAe(e,s);return a.success?{value:a.data}:{issues:(i=a.error)==null?void 0:i.issues}}catch{return TAe(e,s).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),H8=st("$ZodString",(e,t)=>{var n;qo.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??WAe(e._zod.bag),e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),ys=st("$ZodStringFormat",(e,t)=>{fC.init(e,t),H8.init(e,t)}),pNe=st("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=DAe),ys.init(e,t)}),mNe=st("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Y$(r))}else t.pattern??(t.pattern=Y$());ys.init(e,t)}),gNe=st("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=OAe),ys.init(e,t)}),bNe=st("$ZodURL",(e,t)=>{ys.init(e,t),e._zod.check=n=>{try{const r=n.value,o=new URL(r),s=o.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:UAe.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!r.endsWith("/")&&s.endsWith("/")?n.value=s.slice(0,-1):n.value=s;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),yNe=st("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=LAe()),ys.init(e,t)}),vNe=st("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=RAe),ys.init(e,t)}),xNe=st("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=CAe),ys.init(e,t)}),wNe=st("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=kAe),ys.init(e,t)}),ENe=st("$ZodULID",(e,t)=>{t.pattern??(t.pattern=AAe),ys.init(e,t)}),_Ne=st("$ZodXID",(e,t)=>{t.pattern??(t.pattern=NAe),ys.init(e,t)}),SNe=st("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=IAe),ys.init(e,t)}),TNe=st("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=GAe(t)),ys.init(e,t)}),CNe=st("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=VAe),ys.init(e,t)}),kNe=st("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=qAe(t)),ys.init(e,t)}),ANe=st("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=MAe),ys.init(e,t)}),NNe=st("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=$Ae),ys.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),INe=st("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=FAe),ys.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),RNe=st("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=BAe),ys.init(e,t)}),MNe=st("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=zAe),ys.init(e,t),e._zod.check=n=>{const[r,o]=n.value.split("/");try{if(!o)throw new Error;const s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function _J(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const DNe=st("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=jAe),ys.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{_J(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function ONe(e){if(!bJ.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return _J(n)}const PNe=st("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=bJ),ys.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{ONe(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),LNe=st("$ZodE164",(e,t)=>{t.pattern??(t.pattern=HAe),ys.init(e,t)});function $Ne(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const FNe=st("$ZodJWT",(e,t)=>{ys.init(e,t),e._zod.check=n=>{$Ne(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),SJ=st("$ZodNumber",(e,t)=>{qo.init(e,t),e._zod.pattern=e._zod.bag.pattern??KAe,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;const s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...s?{received:s}:{}}),n}}),BNe=st("$ZodNumber",(e,t)=>{tNe.init(e,t),SJ.init(e,t)}),zNe=st("$ZodBoolean",(e,t)=>{qo.init(e,t),e._zod.pattern=ZAe,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const o=n.value;return typeof o=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),n}}),jNe=st("$ZodNull",(e,t)=>{qo.init(e,t),e._zod.pattern=JAe,e._zod.values=new Set([null]),e._zod.parse=(n,r)=>{const o=n.value;return o===null||n.issues.push({expected:"null",code:"invalid_type",input:o,inst:e}),n}}),UNe=st("$ZodAny",(e,t)=>{qo.init(e,t),e._zod.parse=n=>n}),HNe=st("$ZodUnknown",(e,t)=>{qo.init(e,t),e._zod.parse=n=>n}),VNe=st("$ZodNever",(e,t)=>{qo.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function K$(e,t,n){e.issues.length&&t.issues.push(...Wp(n,e.issues)),t.value[n]=e.value}const qNe=st("$ZodArray",(e,t)=>{qo.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const s=[];for(let i=0;i<o.length;i++){const a=o[i],l=t.element._zod.run({value:a,issues:[]},r);l instanceof Promise?s.push(l.then(c=>K$(c,n,i))):K$(l,n,i)}return s.length?Promise.all(s).then(()=>n):n}});function x2(e,t,n){e.issues.length&&t.issues.push(...Wp(n,e.issues)),t.value[n]=e.value}function Z$(e,t,n,r){e.issues.length?r[n]===void 0?n in r?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...Wp(n,e.issues)):e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const GNe=st("$ZodObject",(e,t)=>{qo.init(e,t);const n=$8(()=>{const f=Object.keys(t.shape);for(const g of f)if(!(t.shape[g]instanceof qo))throw new Error(`Invalid element at key "${g}": expected a Zod schema`);const m=fAe(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});yo(e._zod,"propValues",()=>{const f=t.shape,m={};for(const g in f){const y=f[g]._zod;if(y.values){m[g]??(m[g]=new Set);for(const v of y.values)m[g].add(v)}}return m});const r=f=>{const m=new fNe(["shape","payload","ctx"]),g=n.value,y=T=>{const k=qy(T);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`};m.write("const input = payload.value;");const v=Object.create(null);let w=0;for(const T of g.keys)v[T]=`key_${w++}`;m.write("const newResult = {}");for(const T of g.keys)if(g.optionalKeys.has(T)){const k=v[T];m.write(`const ${k} = ${y(T)};`);const M=qy(T);m.write(`
        if (${k}.issues.length) {
          if (input[${M}] === undefined) {
            if (${M} in input) {
              newResult[${M}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${k}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${M}, ...iss.path] : [${M}],
              }))
            );
          }
        } else if (${k}.value === undefined) {
          if (${M} in input) newResult[${M}] = undefined;
        } else {
          newResult[${M}] = ${k}.value;
        }
        `)}else{const k=v[T];m.write(`const ${k} = ${y(T)};`),m.write(`
          if (${k}.issues.length) payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${qy(T)}, ...iss.path] : [${qy(T)}]
          })));`),m.write(`newResult[${qy(T)}] = ${k}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const _=m.compile();return(T,k)=>_(f,T,k)};let o;const s=MS,i=!cJ.jitless,l=i&&uAe.value,c=t.catchall;let u;e._zod.parse=(f,m)=>{u??(u=n.value);const g=f.value;if(!s(g))return f.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),f;const y=[];if(i&&l&&(m==null?void 0:m.async)===!1&&m.jitless!==!0)o||(o=r(t.shape)),f=o(f,m);else{f.value={};const k=u.shape;for(const M of u.keys){const D=k[M],I=D._zod.run({value:g[M],issues:[]},m),P=D._zod.optin==="optional"&&D._zod.optout==="optional";I instanceof Promise?y.push(I.then(B=>P?Z$(B,f,M,g):x2(B,f,M))):P?Z$(I,f,M,g):x2(I,f,M)}}if(!c)return y.length?Promise.all(y).then(()=>f):f;const v=[],w=u.keySet,_=c._zod,T=_.def.type;for(const k of Object.keys(g)){if(w.has(k))continue;if(T==="never"){v.push(k);continue}const M=_.run({value:g[k],issues:[]},m);M instanceof Promise?y.push(M.then(D=>x2(D,f,k))):x2(M,f,k)}return v.length&&f.issues.push({code:"unrecognized_keys",keys:v,input:g,inst:e}),y.length?Promise.all(y).then(()=>f):f}});function J$(e,t,n,r){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(o=>o.issues.map(s=>C0(s,r,T0())))}),t}const TJ=st("$ZodUnion",(e,t)=>{qo.init(e,t),yo(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),yo(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),yo(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),yo(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>B8(r.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let o=!1;const s=[];for(const i of t.options){const a=i._zod.run({value:n.value,issues:[]},r);if(a instanceof Promise)s.push(a),o=!0;else{if(a.issues.length===0)return a;s.push(a)}}return o?Promise.all(s).then(i=>J$(i,n,e,r)):J$(s,n,e,r)}}),WNe=st("$ZodDiscriminatedUnion",(e,t)=>{TJ.init(e,t);const n=e._zod.parse;yo(e._zod,"propValues",()=>{const o={};for(const s of t.options){const i=s._zod.propValues;if(!i||Object.keys(i).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(s)}"`);for(const[a,l]of Object.entries(i)){o[a]||(o[a]=new Set);for(const c of l)o[a].add(c)}}return o});const r=$8(()=>{const o=t.options,s=new Map;for(const i of o){const a=i._zod.propValues[t.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(const l of a){if(s.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);s.set(l,i)}}return s});e._zod.parse=(o,s)=>{const i=o.value;if(!MS(i))return o.issues.push({code:"invalid_type",expected:"object",input:i,inst:e}),o;const a=r.value.get(i==null?void 0:i[t.discriminator]);return a?a._zod.run(o,s):t.unionFallback?n(o,s):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:i,path:[t.discriminator],inst:e}),o)}}),YNe=st("$ZodIntersection",(e,t)=>{qo.init(e,t),e._zod.parse=(n,r)=>{const o=n.value,s=t.left._zod.run({value:o,issues:[]},r),i=t.right._zod.run({value:o,issues:[]},r);return s instanceof Promise||i instanceof Promise?Promise.all([s,i]).then(([l,c])=>X$(n,l,c)):X$(n,s,i)}});function ZN(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(DS(e)&&DS(t)){const n=Object.keys(t),r=Object.keys(e).filter(s=>n.indexOf(s)!==-1),o={...e,...t};for(const s of r){const i=ZN(e[s],t[s]);if(!i.valid)return{valid:!1,mergeErrorPath:[s,...i.mergeErrorPath]};o[s]=i.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=e[r],s=t[r],i=ZN(o,s);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function X$(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Ov(e))return e;const r=ZN(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const KNe=st("$ZodRecord",(e,t)=>{qo.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!DS(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),n;const s=[];if(t.keyType._zod.values){const i=t.keyType._zod.values;n.value={};for(const l of i)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const c=t.valueType._zod.run({value:o[l],issues:[]},r);c instanceof Promise?s.push(c.then(u=>{u.issues.length&&n.issues.push(...Wp(l,u.issues)),n.value[l]=u.value})):(c.issues.length&&n.issues.push(...Wp(l,c.issues)),n.value[l]=c.value)}let a;for(const l in o)i.has(l)||(a=a??[],a.push(l));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:a})}else{n.value={};for(const i of Reflect.ownKeys(o)){if(i==="__proto__")continue;const a=t.keyType._zod.run({value:i,issues:[]},r);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(c=>C0(c,r,T0())),input:i,path:[i],inst:e}),n.value[a.value]=a.value;continue}const l=t.valueType._zod.run({value:o[i],issues:[]},r);l instanceof Promise?s.push(l.then(c=>{c.issues.length&&n.issues.push(...Wp(i,c.issues)),n.value[a.value]=c.value})):(l.issues.length&&n.issues.push(...Wp(i,l.issues)),n.value[a.value]=l.value)}}return s.length?Promise.all(s).then(()=>n):n}}),ZNe=st("$ZodEnum",(e,t)=>{qo.init(e,t);const n=uJ(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(r=>dAe.has(typeof r)).map(r=>typeof r=="string"?kw(r):r.toString()).join("|")})$`),e._zod.parse=(r,o)=>{const s=r.value;return e._zod.values.has(s)||r.issues.push({code:"invalid_value",values:n,input:s,inst:e}),r}}),JNe=st("$ZodLiteral",(e,t)=>{qo.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?kw(n):n?n.toString():String(n)).join("|")})$`),e._zod.parse=(n,r)=>{const o=n.value;return e._zod.values.has(o)||n.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),n}}),XNe=st("$ZodTransform",(e,t)=>{qo.init(e,t),e._zod.parse=(n,r)=>{const o=t.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(i=>(n.value=i,n));if(o instanceof Promise)throw new Sx;return n.value=o,n}}),QNe=st("$ZodOptional",(e,t)=>{qo.init(e,t),e._zod.optin="optional",e._zod.optout="optional",yo(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),yo(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${B8(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,r):n.value===void 0?n:t.innerType._zod.run(n,r)}),e6e=st("$ZodNullable",(e,t)=>{qo.init(e,t),yo(e._zod,"optin",()=>t.innerType._zod.optin),yo(e._zod,"optout",()=>t.innerType._zod.optout),yo(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${B8(n.source)}|null)$`):void 0}),yo(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),t6e=st("$ZodDefault",(e,t)=>{qo.init(e,t),e._zod.optin="optional",yo(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Q$(s,t)):Q$(o,t)}});function Q$(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const n6e=st("$ZodPrefault",(e,t)=>{qo.init(e,t),e._zod.optin="optional",yo(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),r6e=st("$ZodNonOptional",(e,t)=>{qo.init(e,t),yo(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>eF(s,e)):eF(o,e)}});function eF(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const o6e=st("$ZodCatch",(e,t)=>{qo.init(e,t),e._zod.optin="optional",yo(e._zod,"optout",()=>t.innerType._zod.optout),yo(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(i=>C0(i,r,T0()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(s=>C0(s,r,T0()))},input:n.value}),n.issues=[]),n)}}),s6e=st("$ZodPipe",(e,t)=>{qo.init(e,t),yo(e._zod,"values",()=>t.in._zod.values),yo(e._zod,"optin",()=>t.in._zod.optin),yo(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(n,r)=>{const o=t.in._zod.run(n,r);return o instanceof Promise?o.then(s=>tF(s,t,r)):tF(o,t,r)}});function tF(e,t,n){return Ov(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const i6e=st("$ZodReadonly",(e,t)=>{qo.init(e,t),yo(e._zod,"propValues",()=>t.innerType._zod.propValues),yo(e._zod,"values",()=>t.innerType._zod.values),yo(e._zod,"optin",()=>t.innerType._zod.optin),yo(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(nF):nF(o)}});function nF(e){return e.value=Object.freeze(e.value),e}const a6e=st("$ZodLazy",(e,t)=>{qo.init(e,t),yo(e._zod,"innerType",()=>t.getter()),yo(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),yo(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),yo(e._zod,"optin",()=>e._zod.innerType._zod.optin),yo(e._zod,"optout",()=>e._zod.innerType._zod.optout),e._zod.parse=(n,r)=>e._zod.innerType._zod.run(n,r)}),l6e=st("$ZodCustom",(e,t)=>{vl.init(e,t),qo.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(s=>rF(s,n,r,e));rF(o,n,r,e)}});function rF(e,t,n,r){if(!e){const o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),t.issues.push(Tx(o))}}class CJ{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function c6e(){return new CJ}const hv=c6e();function u6e(e,t){return new e({type:"string",...kn(t)})}function d6e(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...kn(t)})}function oF(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...kn(t)})}function f6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...kn(t)})}function h6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...kn(t)})}function p6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...kn(t)})}function m6e(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...kn(t)})}function g6e(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...kn(t)})}function b6e(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...kn(t)})}function y6e(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...kn(t)})}function v6e(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...kn(t)})}function x6e(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...kn(t)})}function w6e(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...kn(t)})}function E6e(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...kn(t)})}function _6e(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...kn(t)})}function S6e(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...kn(t)})}function T6e(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...kn(t)})}function C6e(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...kn(t)})}function k6e(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...kn(t)})}function A6e(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...kn(t)})}function N6e(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...kn(t)})}function I6e(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...kn(t)})}function R6e(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...kn(t)})}function M6e(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...kn(t)})}function D6e(e,t){return new e({type:"string",format:"date",check:"string_format",...kn(t)})}function O6e(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...kn(t)})}function P6e(e,t){return new e({type:"string",format:"duration",check:"string_format",...kn(t)})}function L6e(e,t){return new e({type:"number",checks:[],...kn(t)})}function $6e(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...kn(t)})}function F6e(e,t){return new e({type:"boolean",...kn(t)})}function B6e(e,t){return new e({type:"null",...kn(t)})}function z6e(e){return new e({type:"any"})}function j6e(e){return new e({type:"unknown"})}function U6e(e,t){return new e({type:"never",...kn(t)})}function sF(e,t){return new wJ({check:"less_than",...kn(t),value:e,inclusive:!1})}function ek(e,t){return new wJ({check:"less_than",...kn(t),value:e,inclusive:!0})}function iF(e,t){return new EJ({check:"greater_than",...kn(t),value:e,inclusive:!1})}function tk(e,t){return new EJ({check:"greater_than",...kn(t),value:e,inclusive:!0})}function aF(e,t){return new eNe({check:"multiple_of",...kn(t),value:e})}function kJ(e,t){return new nNe({check:"max_length",...kn(t),maximum:e})}function OS(e,t){return new rNe({check:"min_length",...kn(t),minimum:e})}function AJ(e,t){return new oNe({check:"length_equals",...kn(t),length:e})}function H6e(e,t){return new sNe({check:"string_format",format:"regex",...kn(t),pattern:e})}function V6e(e){return new iNe({check:"string_format",format:"lowercase",...kn(e)})}function q6e(e){return new aNe({check:"string_format",format:"uppercase",...kn(e)})}function G6e(e,t){return new lNe({check:"string_format",format:"includes",...kn(t),includes:e})}function W6e(e,t){return new cNe({check:"string_format",format:"starts_with",...kn(t),prefix:e})}function Y6e(e,t){return new uNe({check:"string_format",format:"ends_with",...kn(t),suffix:e})}function Aw(e){return new dNe({check:"overwrite",tx:e})}function K6e(e){return Aw(t=>t.normalize(e))}function Z6e(){return Aw(e=>e.trim())}function J6e(){return Aw(e=>e.toLowerCase())}function X6e(){return Aw(e=>e.toUpperCase())}function Q6e(e,t,n){return new e({type:"array",element:t,...kn(n)})}function eIe(e,t,n){const r=kn(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}function tIe(e,t,n){return new e({type:"custom",check:"custom",fn:t,...kn(n)})}class lF{constructor(t){this.counter=0,this.metadataRegistry=(t==null?void 0:t.metadata)??hv,this.target=(t==null?void 0:t.target)??"draft-2020-12",this.unrepresentable=(t==null?void 0:t.unrepresentable)??"throw",this.override=(t==null?void 0:t.override)??(()=>{}),this.io=(t==null?void 0:t.io)??"output",this.seen=new Map}process(t,n={path:[],schemaPath:[]}){var f,m,g;var r;const o=t._zod.def,s={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},i=this.seen.get(t);if(i)return i.count++,n.schemaPath.includes(t)&&(i.cycle=n.path),i.schema;const a={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(t,a);const l=(m=(f=t._zod).toJSONSchema)==null?void 0:m.call(f);if(l)a.schema=l;else{const y={...n,schemaPath:[...n.schemaPath,t],path:n.path},v=t._zod.parent;if(v)a.ref=v,this.process(v,y),this.seen.get(v).isParent=!0;else{const w=a.schema;switch(o.type){case"string":{const _=w;_.type="string";const{minimum:T,maximum:k,format:M,patterns:D,contentEncoding:I}=t._zod.bag;if(typeof T=="number"&&(_.minLength=T),typeof k=="number"&&(_.maxLength=k),M&&(_.format=s[M]??M,_.format===""&&delete _.format),I&&(_.contentEncoding=I),D&&D.size>0){const P=[...D];P.length===1?_.pattern=P[0].source:P.length>1&&(a.schema.allOf=[...P.map(B=>({...this.target==="draft-7"?{type:"string"}:{},pattern:B.source}))])}break}case"number":{const _=w,{minimum:T,maximum:k,format:M,multipleOf:D,exclusiveMaximum:I,exclusiveMinimum:P}=t._zod.bag;typeof M=="string"&&M.includes("int")?_.type="integer":_.type="number",typeof P=="number"&&(_.exclusiveMinimum=P),typeof T=="number"&&(_.minimum=T,typeof P=="number"&&(P>=T?delete _.minimum:delete _.exclusiveMinimum)),typeof I=="number"&&(_.exclusiveMaximum=I),typeof k=="number"&&(_.maximum=k,typeof I=="number"&&(I<=k?delete _.maximum:delete _.exclusiveMaximum)),typeof D=="number"&&(_.multipleOf=D);break}case"boolean":{const _=w;_.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{w.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{w.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const _=w,{minimum:T,maximum:k}=t._zod.bag;typeof T=="number"&&(_.minItems=T),typeof k=="number"&&(_.maxItems=k),_.type="array",_.items=this.process(o.element,{...y,path:[...y.path,"items"]});break}case"object":{const _=w;_.type="object",_.properties={};const T=o.shape;for(const D in T)_.properties[D]=this.process(T[D],{...y,path:[...y.path,"properties",D]});const k=new Set(Object.keys(T)),M=new Set([...k].filter(D=>{const I=o.shape[D]._zod;return this.io==="input"?I.optin===void 0:I.optout===void 0}));M.size>0&&(_.required=Array.from(M)),((g=o.catchall)==null?void 0:g._zod.def.type)==="never"?_.additionalProperties=!1:o.catchall?o.catchall&&(_.additionalProperties=this.process(o.catchall,{...y,path:[...y.path,"additionalProperties"]})):this.io==="output"&&(_.additionalProperties=!1);break}case"union":{const _=w;_.anyOf=o.options.map((T,k)=>this.process(T,{...y,path:[...y.path,"anyOf",k]}));break}case"intersection":{const _=w,T=this.process(o.left,{...y,path:[...y.path,"allOf",0]}),k=this.process(o.right,{...y,path:[...y.path,"allOf",1]}),M=I=>"allOf"in I&&Object.keys(I).length===1,D=[...M(T)?T.allOf:[T],...M(k)?k.allOf:[k]];_.allOf=D;break}case"tuple":{const _=w;_.type="array";const T=o.items.map((D,I)=>this.process(D,{...y,path:[...y.path,"prefixItems",I]}));if(this.target==="draft-2020-12"?_.prefixItems=T:_.items=T,o.rest){const D=this.process(o.rest,{...y,path:[...y.path,"items"]});this.target==="draft-2020-12"?_.items=D:_.additionalItems=D}o.rest&&(_.items=this.process(o.rest,{...y,path:[...y.path,"items"]}));const{minimum:k,maximum:M}=t._zod.bag;typeof k=="number"&&(_.minItems=k),typeof M=="number"&&(_.maxItems=M);break}case"record":{const _=w;_.type="object",_.propertyNames=this.process(o.keyType,{...y,path:[...y.path,"propertyNames"]}),_.additionalProperties=this.process(o.valueType,{...y,path:[...y.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const _=w,T=uJ(o.entries);T.every(k=>typeof k=="number")&&(_.type="number"),T.every(k=>typeof k=="string")&&(_.type="string"),_.enum=T;break}case"literal":{const _=w,T=[];for(const k of o.values)if(k===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof k=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");T.push(Number(k))}else T.push(k);if(T.length!==0)if(T.length===1){const k=T[0];_.type=k===null?"null":typeof k,_.const=k}else T.every(k=>typeof k=="number")&&(_.type="number"),T.every(k=>typeof k=="string")&&(_.type="string"),T.every(k=>typeof k=="boolean")&&(_.type="string"),T.every(k=>k===null)&&(_.type="null"),_.enum=T;break}case"file":{const _=w,T={type:"string",format:"binary",contentEncoding:"binary"},{minimum:k,maximum:M,mime:D}=t._zod.bag;k!==void 0&&(T.minLength=k),M!==void 0&&(T.maxLength=M),D?D.length===1?(T.contentMediaType=D[0],Object.assign(_,T)):_.anyOf=D.map(I=>({...T,contentMediaType:I})):Object.assign(_,T);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const _=this.process(o.innerType,y);w.anyOf=[_,{type:"null"}];break}case"nonoptional":{this.process(o.innerType,y),a.ref=o.innerType;break}case"success":{const _=w;_.type="boolean";break}case"default":{this.process(o.innerType,y),a.ref=o.innerType,w.default=JSON.parse(JSON.stringify(o.defaultValue));break}case"prefault":{this.process(o.innerType,y),a.ref=o.innerType,this.io==="input"&&(w._prefault=JSON.parse(JSON.stringify(o.defaultValue)));break}case"catch":{this.process(o.innerType,y),a.ref=o.innerType;let _;try{_=o.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}w.default=_;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const _=w,T=t._zod.pattern;if(!T)throw new Error("Pattern not found in template literal");_.type="string",_.pattern=T.source;break}case"pipe":{const _=this.io==="input"?o.in._zod.def.type==="transform"?o.out:o.in:o.out;this.process(_,y),a.ref=_;break}case"readonly":{this.process(o.innerType,y),a.ref=o.innerType,w.readOnly=!0;break}case"promise":{this.process(o.innerType,y),a.ref=o.innerType;break}case"optional":{this.process(o.innerType,y),a.ref=o.innerType;break}case"lazy":{const _=t._zod.innerType;this.process(_,y),a.ref=_;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const c=this.metadataRegistry.get(t);return c&&Object.assign(a.schema,c),this.io==="input"&&ki(t)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(t).schema}emit(t,n){var u,f,m,g,y,v;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},o=this.seen.get(t);if(!o)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=w=>{var D;const _=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const I=(D=r.external.registry.get(w[0]))==null?void 0:D.id,P=r.external.uri??(U=>U);if(I)return{ref:P(I)};const B=w[1].defId??w[1].schema.id??`schema${this.counter++}`;return w[1].defId=B,{defId:B,ref:`${P("__shared")}#/${_}/${B}`}}if(w[1]===o)return{ref:"#"};const k=`#/${_}/`,M=w[1].schema.id??`__schema${this.counter++}`;return{defId:M,ref:k+M}},i=w=>{if(w[1].schema.$ref)return;const _=w[1],{ref:T,defId:k}=s(w);_.def={..._.schema},k&&(_.defId=k);const M=_.schema;for(const D in M)delete M[D];M.$ref=T};if(r.cycles==="throw")for(const w of this.seen.entries()){const _=w[1];if(_.cycle)throw new Error(`Cycle detected: #/${(u=_.cycle)==null?void 0:u.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const w of this.seen.entries()){const _=w[1];if(t===w[0]){i(w);continue}if(r.external){const k=(f=r.external.registry.get(w[0]))==null?void 0:f.id;if(t!==w[0]&&k){i(w);continue}}if((m=this.metadataRegistry.get(w[0]))==null?void 0:m.id){i(w);continue}if(_.cycle){i(w);continue}if(_.count>1&&r.reused==="ref"){i(w);continue}}const a=(w,_)=>{const T=this.seen.get(w),k=T.def??T.schema,M={...k};if(T.ref===null)return;const D=T.ref;if(T.ref=null,D){a(D,_);const I=this.seen.get(D).schema;I.$ref&&_.target==="draft-7"?(k.allOf=k.allOf??[],k.allOf.push(I)):(Object.assign(k,I),Object.assign(k,M))}T.isParent||this.override({zodSchema:w,jsonSchema:k,path:T.path??[]})};for(const w of[...this.seen.entries()].reverse())a(w[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(g=r.external)!=null&&g.uri){const w=(y=r.external.registry.get(t))==null?void 0:y.id;if(!w)throw new Error("Schema is missing an `id` property");l.$id=r.external.uri(w)}Object.assign(l,o.def);const c=((v=r.external)==null?void 0:v.defs)??{};for(const w of this.seen.entries()){const _=w[1];_.def&&_.defId&&(c[_.defId]=_.def)}r.external||Object.keys(c).length>0&&(this.target==="draft-2020-12"?l.$defs=c:l.definitions=c);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function nIe(e,t){if(e instanceof CJ){const r=new lF(t),o={};for(const a of e._idmap.entries()){const[l,c]=a;r.process(c)}const s={},i={registry:e,uri:t==null?void 0:t.uri,defs:o};for(const a of e._idmap.entries()){const[l,c]=a;s[l]=r.emit(c,{...t,external:i})}if(Object.keys(o).length>0){const a=r.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[a]:o}}return{schemas:s}}const n=new lF(t);return n.process(e),n.emit(e,t)}function ki(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const o=e._zod.def;switch(o.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return ki(o.element,n);case"object":{for(const s in o.shape)if(ki(o.shape[s],n))return!0;return!1}case"union":{for(const s of o.options)if(ki(s,n))return!0;return!1}case"intersection":return ki(o.left,n)||ki(o.right,n);case"tuple":{for(const s of o.items)if(ki(s,n))return!0;return!!(o.rest&&ki(o.rest,n))}case"record":return ki(o.keyType,n)||ki(o.valueType,n);case"map":return ki(o.keyType,n)||ki(o.valueType,n);case"set":return ki(o.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return ki(o.innerType,n);case"lazy":return ki(o.getter(),n);case"default":return ki(o.innerType,n);case"prefault":return ki(o.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return ki(o.in,n)||ki(o.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${o.type}`)}function cF(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}function rIe(e,t){for(var n={};e.length;){var r=e[0],o=r.code,s=r.message,i=r.path.join(".");if(!n[i])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[i]={message:a.message,type:a.code}}else n[i]={message:s,type:o};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return e.push(f)})}),t){var l=n[i].types,c=l&&l[r.code];n[i]=O8(i,t,n,o,c?[].concat(c,r.message):r.message)}e.shift()}return n}function oIe(e,t){for(var n={};e.length;){var r=e[0],o=r.code,s=r.message,i=r.path.join(".");if(!n[i])if(r.code==="invalid_union"&&r.errors.length>0){var a=r.errors[0][0];n[i]={message:a.message,type:a.code}}else n[i]={message:s,type:o};if(r.code==="invalid_union"&&r.errors.forEach(function(u){return u.forEach(function(f){return e.push(f)})}),t){var l=n[i].types,c=l&&l[r.code];n[i]=O8(i,t,n,o,c?[].concat(c,r.message):r.message)}e.shift()}return n}function sIe(e,t,n){if(n===void 0&&(n={}),(function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def})(e))return function(r,o,s){try{return Promise.resolve(cF(function(){return Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(i){return s.shouldUseNativeValidation&&KN({},s),{errors:{},values:n.raw?Object.assign({},r):i}})},function(i){if((function(a){return Array.isArray(a==null?void 0:a.issues)})(i))return{values:{},errors:G$(rIe(i.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw i}))}catch(i){return Promise.reject(i)}};if((function(r){return"_zod"in r&&typeof r._zod=="object"})(e))return function(r,o,s){try{return Promise.resolve(cF(function(){return Promise.resolve((n.mode==="sync"?EAe:_Ae)(e,r,t)).then(function(i){return s.shouldUseNativeValidation&&KN({},s),{errors:{},values:n.raw?Object.assign({},r):i}})},function(i){if((function(a){return a instanceof U8})(i))return{values:{},errors:G$(oIe(i.issues,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw i}))}catch(i){return Promise.reject(i)}};throw new Error("Invalid input: not a Zod schema")}var oo;(function(e){e.assertEqual=o=>{};function t(o){}e.assertIs=t;function n(o){throw new Error}e.assertNever=n,e.arrayToEnum=o=>{const s={};for(const i of o)s[i]=i;return s},e.getValidEnumValues=o=>{const s=e.objectKeys(o).filter(a=>typeof o[o[a]]!="number"),i={};for(const a of s)i[a]=o[a];return e.objectValues(i)},e.objectValues=o=>e.objectKeys(o).map(function(s){return o[s]}),e.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const s=[];for(const i in o)Object.prototype.hasOwnProperty.call(o,i)&&s.push(i);return s},e.find=(o,s)=>{for(const i of o)if(s(i))return i},e.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function r(o,s=" | "){return o.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}e.joinValues=r,e.jsonStringifyReplacer=(o,s)=>typeof s=="bigint"?s.toString():s})(oo||(oo={}));var uF;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(uF||(uF={}));const vn=oo.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),n0=e=>{switch(typeof e){case"undefined":return vn.undefined;case"string":return vn.string;case"number":return Number.isNaN(e)?vn.nan:vn.number;case"boolean":return vn.boolean;case"function":return vn.function;case"bigint":return vn.bigint;case"symbol":return vn.symbol;case"object":return Array.isArray(e)?vn.array:e===null?vn.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?vn.promise:typeof Map<"u"&&e instanceof Map?vn.map:typeof Set<"u"&&e instanceof Set?vn.set:typeof Date<"u"&&e instanceof Date?vn.date:vn.object;default:return vn.unknown}},Lt=oo.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Yf extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(s){return s.message},r={_errors:[]},o=s=>{for(const i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(o);else if(i.code==="invalid_return_type")o(i.returnTypeError);else if(i.code==="invalid_arguments")o(i.argumentsError);else if(i.path.length===0)r._errors.push(n(i));else{let a=r,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(i))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return o(this),r}static assert(t){if(!(t instanceof Yf))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,oo.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const o of this.issues)if(o.path.length>0){const s=o.path[0];n[s]=n[s]||[],n[s].push(t(o))}else r.push(t(o));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Yf.create=e=>new Yf(e);const JN=(e,t)=>{let n;switch(e.code){case Lt.invalid_type:e.received===vn.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Lt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,oo.jsonStringifyReplacer)}`;break;case Lt.unrecognized_keys:n=`Unrecognized key(s) in object: ${oo.joinValues(e.keys,", ")}`;break;case Lt.invalid_union:n="Invalid input";break;case Lt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${oo.joinValues(e.options)}`;break;case Lt.invalid_enum_value:n=`Invalid enum value. Expected ${oo.joinValues(e.options)}, received '${e.received}'`;break;case Lt.invalid_arguments:n="Invalid function arguments";break;case Lt.invalid_return_type:n="Invalid function return type";break;case Lt.invalid_date:n="Invalid date";break;case Lt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:oo.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Lt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Lt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Lt.custom:n="Invalid input";break;case Lt.invalid_intersection_types:n="Intersection results could not be merged";break;case Lt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Lt.not_finite:n="Number must be finite";break;default:n=t.defaultError,oo.assertNever(e)}return{message:n}};let iIe=JN;function aIe(){return iIe}const lIe=e=>{const{data:t,path:n,errorMaps:r,issueData:o}=e,s=[...n,...o.path||[]],i={...o,path:s};if(o.message!==void 0)return{...o,path:s,message:o.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(i,{data:t,defaultError:a}).message;return{...o,path:s,message:a}};function nn(e,t){const n=aIe(),r=lIe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===JN?void 0:JN].filter(o=>!!o)});e.common.issues.push(r)}class ec{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const o of n){if(o.status==="aborted")return lr;o.status==="dirty"&&t.dirty(),r.push(o.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const o of n){const s=await o.key,i=await o.value;r.push({key:s,value:i})}return ec.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const o of n){const{key:s,value:i}=o;if(s.status==="aborted"||i.status==="aborted")return lr;s.status==="dirty"&&t.dirty(),i.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof i.value<"u"||o.alwaysSet)&&(r[s.value]=i.value)}return{status:t.value,value:r}}}const lr=Object.freeze({status:"aborted"}),pv=e=>({status:"dirty",value:e}),Fc=e=>({status:"valid",value:e}),dF=e=>e.status==="aborted",fF=e=>e.status==="dirty",Z1=e=>e.status==="valid",PS=e=>typeof Promise<"u"&&e instanceof Promise;var Sn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Sn||(Sn={}));class k0{constructor(t,n,r,o){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const hF=(e,t)=>{if(Z1(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Yf(e.common.issues);return this._error=n,this._error}}};function Ir(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:o}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:o}:{errorMap:(i,a)=>{const{message:l}=e;return i.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:o}}let Zr=class{get description(){return this._def.description}_getType(t){return n0(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:n0(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ec,ctx:{common:t.parent.common,data:t.data,parsedType:n0(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(PS(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:n0(t)},o=this._parseSync({data:t,path:r.path,parent:r});return hF(r,o)}"~validate"(t){var r,o;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:n0(t)};if(!this["~standard"].async)try{const s=this._parseSync({data:t,path:[],parent:n});return Z1(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(o=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&o.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(s=>Z1(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:n0(t)},o=this._parse({data:t,path:r.path,parent:r}),s=await(PS(o)?o:Promise.resolve(o));return hF(r,s)}refine(t,n){const r=o=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(o):n;return this._refinement((o,s)=>{const i=t(o),a=()=>s.addIssue({code:Lt.custom,...r(o)});return typeof Promise<"u"&&i instanceof Promise?i.then(l=>l?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,o)=>t(r)?!0:(o.addIssue(typeof n=="function"?n(r,o):n),!1))}_refinement(t){return new X1({schema:this,typeName:Bt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return b0.create(this,this._def)}nullable(){return Q1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return J1.create(this)}promise(){return FS.create(this,this._def)}or(t){return LS.create([this,t],this._def)}and(t){return $S.create(this,t,this._def)}transform(t){return new X1({...Ir(this._def),schema:this,typeName:Bt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new o6({...Ir(this._def),innerType:this,defaultValue:n,typeName:Bt.ZodDefault})}brand(){return new RIe({typeName:Bt.ZodBranded,type:this,...Ir(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new s6({...Ir(this._def),innerType:this,catchValue:n,typeName:Bt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return q8.create(this,t)}readonly(){return i6.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const cIe=/^c[^\s-]{8,}$/i,uIe=/^[0-9a-z]+$/,dIe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,fIe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,hIe=/^[a-z0-9_-]{21}$/i,pIe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,mIe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,gIe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,bIe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nk;const yIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,vIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,xIe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,wIe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,EIe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,_Ie=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,NJ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",SIe=new RegExp(`^${NJ}$`);function IJ(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function TIe(e){return new RegExp(`^${IJ(e)}$`)}function CIe(e){let t=`${NJ}T${IJ(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function kIe(e,t){return!!((t==="v4"||!t)&&yIe.test(e)||(t==="v6"||!t)&&xIe.test(e))}function AIe(e,t){if(!pIe.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),o=JSON.parse(atob(r));return!(typeof o!="object"||o===null||"typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||t&&o.alg!==t)}catch{return!1}}function NIe(e,t){return!!((t==="v4"||!t)&&vIe.test(e)||(t==="v6"||!t)&&wIe.test(e))}let XN=class mv extends Zr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==vn.string){const s=this._getOrReturnCtx(t);return nn(s,{code:Lt.invalid_type,expected:vn.string,received:s.parsedType}),lr}const r=new ec;let o;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(o=this._getOrReturnCtx(t,o),nn(o,{code:Lt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")t.data.length>s.value&&(o=this._getOrReturnCtx(t,o),nn(o,{code:Lt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const i=t.data.length>s.value,a=t.data.length<s.value;(i||a)&&(o=this._getOrReturnCtx(t,o),i?nn(o,{code:Lt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&nn(o,{code:Lt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")gIe.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"email",code:Lt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")nk||(nk=new RegExp(bIe,"u")),nk.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"emoji",code:Lt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")fIe.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"uuid",code:Lt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")hIe.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"nanoid",code:Lt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")cIe.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"cuid",code:Lt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")uIe.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"cuid2",code:Lt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")dIe.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"ulid",code:Lt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{o=this._getOrReturnCtx(t,o),nn(o,{validation:"url",code:Lt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"regex",code:Lt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(o=this._getOrReturnCtx(t,o),nn(o,{code:Lt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(o=this._getOrReturnCtx(t,o),nn(o,{code:Lt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(o=this._getOrReturnCtx(t,o),nn(o,{code:Lt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?CIe(s).test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{code:Lt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?SIe.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{code:Lt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?TIe(s).test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{code:Lt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?mIe.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"duration",code:Lt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?kIe(t.data,s.version)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"ip",code:Lt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?AIe(t.data,s.alg)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"jwt",code:Lt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?NIe(t.data,s.version)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"cidr",code:Lt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?EIe.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"base64",code:Lt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?_Ie.test(t.data)||(o=this._getOrReturnCtx(t,o),nn(o,{validation:"base64url",code:Lt.invalid_string,message:s.message}),r.dirty()):oo.assertNever(s);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(o=>t.test(o),{validation:n,code:Lt.invalid_string,...Sn.errToObj(r)})}_addCheck(t){return new mv({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Sn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Sn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Sn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Sn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Sn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Sn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Sn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Sn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Sn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Sn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Sn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Sn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Sn.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Sn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Sn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Sn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Sn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Sn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Sn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Sn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Sn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Sn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Sn.errToObj(n)})}nonempty(t){return this.min(1,Sn.errToObj(t))}trim(){return new mv({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new mv({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new mv({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}};XN.create=e=>new XN({checks:[],typeName:Bt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Ir(e)});function IIe(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,o=n>r?n:r,s=Number.parseInt(e.toFixed(o).replace(".","")),i=Number.parseInt(t.toFixed(o).replace(".",""));return s%i/10**o}let QN=class e6 extends Zr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==vn.number){const s=this._getOrReturnCtx(t);return nn(s,{code:Lt.invalid_type,expected:vn.number,received:s.parsedType}),lr}let r;const o=new ec;for(const s of this._def.checks)s.kind==="int"?oo.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.invalid_type,expected:"integer",received:"float",message:s.message}),o.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),o.dirty()):s.kind==="multipleOf"?IIe(t.data,s.value)!==0&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.not_finite,message:s.message}),o.dirty()):oo.assertNever(s);return{status:o.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Sn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Sn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Sn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Sn.toString(n))}setLimit(t,n,r,o){return new e6({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Sn.toString(o)}]})}_addCheck(t){return new e6({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Sn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Sn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Sn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Sn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Sn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Sn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Sn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Sn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Sn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&oo.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}};QN.create=e=>new QN({checks:[],typeName:Bt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ir(e)});class Cx extends Zr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==vn.bigint)return this._getInvalidInput(t);let r;const o=new ec;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),o.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),nn(r,{code:Lt.not_multiple_of,multipleOf:s.value,message:s.message}),o.dirty()):oo.assertNever(s);return{status:o.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return nn(n,{code:Lt.invalid_type,expected:vn.bigint,received:n.parsedType}),lr}gte(t,n){return this.setLimit("min",t,!0,Sn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Sn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Sn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Sn.toString(n))}setLimit(t,n,r,o){return new Cx({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Sn.toString(o)}]})}_addCheck(t){return new Cx({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Sn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Sn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Sn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Sn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Sn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Cx.create=e=>new Cx({checks:[],typeName:Bt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Ir(e)});let t6=class extends Zr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==vn.boolean){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.boolean,received:r.parsedType}),lr}return Fc(t.data)}};t6.create=e=>new t6({typeName:Bt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ir(e)});class kx extends Zr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==vn.date){const s=this._getOrReturnCtx(t);return nn(s,{code:Lt.invalid_type,expected:vn.date,received:s.parsedType}),lr}if(Number.isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return nn(s,{code:Lt.invalid_date}),lr}const r=new ec;let o;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(o=this._getOrReturnCtx(t,o),nn(o,{code:Lt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(o=this._getOrReturnCtx(t,o),nn(o,{code:Lt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):oo.assertNever(s);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new kx({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Sn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Sn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}kx.create=e=>new kx({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Bt.ZodDate,...Ir(e)});class pF extends Zr{_parse(t){if(this._getType(t)!==vn.symbol){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.symbol,received:r.parsedType}),lr}return Fc(t.data)}}pF.create=e=>new pF({typeName:Bt.ZodSymbol,...Ir(e)});class mF extends Zr{_parse(t){if(this._getType(t)!==vn.undefined){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.undefined,received:r.parsedType}),lr}return Fc(t.data)}}mF.create=e=>new mF({typeName:Bt.ZodUndefined,...Ir(e)});let gF=class extends Zr{_parse(t){if(this._getType(t)!==vn.null){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.null,received:r.parsedType}),lr}return Fc(t.data)}};gF.create=e=>new gF({typeName:Bt.ZodNull,...Ir(e)});let bF=class extends Zr{constructor(){super(...arguments),this._any=!0}_parse(t){return Fc(t.data)}};bF.create=e=>new bF({typeName:Bt.ZodAny,...Ir(e)});let yF=class extends Zr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Fc(t.data)}};yF.create=e=>new yF({typeName:Bt.ZodUnknown,...Ir(e)});let A0=class extends Zr{_parse(t){const n=this._getOrReturnCtx(t);return nn(n,{code:Lt.invalid_type,expected:vn.never,received:n.parsedType}),lr}};A0.create=e=>new A0({typeName:Bt.ZodNever,...Ir(e)});class vF extends Zr{_parse(t){if(this._getType(t)!==vn.undefined){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.void,received:r.parsedType}),lr}return Fc(t.data)}}vF.create=e=>new vF({typeName:Bt.ZodVoid,...Ir(e)});let J1=class k_ extends Zr{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),o=this._def;if(n.parsedType!==vn.array)return nn(n,{code:Lt.invalid_type,expected:vn.array,received:n.parsedType}),lr;if(o.exactLength!==null){const i=n.data.length>o.exactLength.value,a=n.data.length<o.exactLength.value;(i||a)&&(nn(n,{code:i?Lt.too_big:Lt.too_small,minimum:a?o.exactLength.value:void 0,maximum:i?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),r.dirty())}if(o.minLength!==null&&n.data.length<o.minLength.value&&(nn(n,{code:Lt.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),r.dirty()),o.maxLength!==null&&n.data.length>o.maxLength.value&&(nn(n,{code:Lt.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((i,a)=>o.type._parseAsync(new k0(n,i,n.path,a)))).then(i=>ec.mergeArray(r,i));const s=[...n.data].map((i,a)=>o.type._parseSync(new k0(n,i,n.path,a)));return ec.mergeArray(r,s)}get element(){return this._def.type}min(t,n){return new k_({...this._def,minLength:{value:t,message:Sn.toString(n)}})}max(t,n){return new k_({...this._def,maxLength:{value:t,message:Sn.toString(n)}})}length(t,n){return new k_({...this._def,exactLength:{value:t,message:Sn.toString(n)}})}nonempty(t){return this.min(1,t)}};J1.create=(e,t)=>new J1({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Bt.ZodArray,...Ir(t)});function r1(e){if(e instanceof Kf){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=b0.create(r1(r))}return new Kf({...e._def,shape:()=>t})}else return e instanceof J1?new J1({...e._def,type:r1(e.element)}):e instanceof b0?b0.create(r1(e.unwrap())):e instanceof Q1?Q1.create(r1(e.unwrap())):e instanceof gm?gm.create(e.items.map(t=>r1(t))):e}let Kf=class su extends Zr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=oo.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==vn.object){const c=this._getOrReturnCtx(t);return nn(c,{code:Lt.invalid_type,expected:vn.object,received:c.parsedType}),lr}const{status:r,ctx:o}=this._processInputParams(t),{shape:s,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof A0&&this._def.unknownKeys==="strip"))for(const c in o.data)i.includes(c)||a.push(c);const l=[];for(const c of i){const u=s[c],f=o.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new k0(o,f,o.path,c)),alwaysSet:c in o.data})}if(this._def.catchall instanceof A0){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:o.data[u]}});else if(c==="strict")a.length>0&&(nn(o,{code:Lt.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const f=o.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new k0(o,f,o.path,u)),alwaysSet:u in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,m=await u.value;c.push({key:f,value:m,alwaysSet:u.alwaysSet})}return c}).then(c=>ec.mergeObjectSync(r,c)):ec.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return Sn.errToObj,new su({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var s,i;const o=((i=(s=this._def).errorMap)==null?void 0:i.call(s,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Sn.errToObj(t).message??o}:{message:o}}}:{}})}strip(){return new su({...this._def,unknownKeys:"strip"})}passthrough(){return new su({...this._def,unknownKeys:"passthrough"})}extend(t){return new su({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new su({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Bt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new su({...this._def,catchall:t})}pick(t){const n={};for(const r of oo.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new su({...this._def,shape:()=>n})}omit(t){const n={};for(const r of oo.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new su({...this._def,shape:()=>n})}deepPartial(){return r1(this)}partial(t){const n={};for(const r of oo.objectKeys(this.shape)){const o=this.shape[r];t&&!t[r]?n[r]=o:n[r]=o.optional()}return new su({...this._def,shape:()=>n})}required(t){const n={};for(const r of oo.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof b0;)s=s._def.innerType;n[r]=s}return new su({...this._def,shape:()=>n})}keyof(){return RJ(oo.objectKeys(this.shape))}};Kf.create=(e,t)=>new Kf({shape:()=>e,unknownKeys:"strip",catchall:A0.create(),typeName:Bt.ZodObject,...Ir(t)});Kf.strictCreate=(e,t)=>new Kf({shape:()=>e,unknownKeys:"strict",catchall:A0.create(),typeName:Bt.ZodObject,...Ir(t)});Kf.lazycreate=(e,t)=>new Kf({shape:e,unknownKeys:"strip",catchall:A0.create(),typeName:Bt.ZodObject,...Ir(t)});let LS=class extends Zr{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function o(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const i=s.map(a=>new Yf(a.ctx.common.issues));return nn(n,{code:Lt.invalid_union,unionErrors:i}),lr}if(n.common.async)return Promise.all(r.map(async s=>{const i={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:i}),ctx:i}})).then(o);{let s;const i=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&i.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=i.map(l=>new Yf(l));return nn(n,{code:Lt.invalid_union,unionErrors:a}),lr}}get options(){return this._def.options}};LS.create=(e,t)=>new LS({options:e,typeName:Bt.ZodUnion,...Ir(t)});function n6(e,t){const n=n0(e),r=n0(t);if(e===t)return{valid:!0,data:e};if(n===vn.object&&r===vn.object){const o=oo.objectKeys(t),s=oo.objectKeys(e).filter(a=>o.indexOf(a)!==-1),i={...e,...t};for(const a of s){const l=n6(e[a],t[a]);if(!l.valid)return{valid:!1};i[a]=l.data}return{valid:!0,data:i}}else if(n===vn.array&&r===vn.array){if(e.length!==t.length)return{valid:!1};const o=[];for(let s=0;s<e.length;s++){const i=e[s],a=t[s],l=n6(i,a);if(!l.valid)return{valid:!1};o.push(l.data)}return{valid:!0,data:o}}else return n===vn.date&&r===vn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}let $S=class extends Zr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),o=(s,i)=>{if(dF(s)||dF(i))return lr;const a=n6(s.value,i.value);return a.valid?((fF(s)||fF(i))&&n.dirty(),{status:n.value,value:a.data}):(nn(r,{code:Lt.invalid_intersection_types}),lr)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,i])=>o(s,i)):o(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};$S.create=(e,t,n)=>new $S({left:e,right:t,typeName:Bt.ZodIntersection,...Ir(n)});class gm extends Zr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==vn.array)return nn(r,{code:Lt.invalid_type,expected:vn.array,received:r.parsedType}),lr;if(r.data.length<this._def.items.length)return nn(r,{code:Lt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),lr;!this._def.rest&&r.data.length>this._def.items.length&&(nn(r,{code:Lt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((i,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new k0(r,i,r.path,a)):null}).filter(i=>!!i);return r.common.async?Promise.all(s).then(i=>ec.mergeArray(n,i)):ec.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new gm({...this._def,rest:t})}}gm.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new gm({items:e,typeName:Bt.ZodTuple,rest:null,...Ir(t)})};class xF extends Zr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==vn.map)return nn(r,{code:Lt.invalid_type,expected:vn.map,received:r.parsedType}),lr;const o=this._def.keyType,s=this._def.valueType,i=[...r.data.entries()].map(([a,l],c)=>({key:o._parse(new k0(r,a,r.path,[c,"key"])),value:s._parse(new k0(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of i){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return lr;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of i){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return lr;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}xF.create=(e,t,n)=>new xF({valueType:t,keyType:e,typeName:Bt.ZodMap,...Ir(n)});class Ax extends Zr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==vn.set)return nn(r,{code:Lt.invalid_type,expected:vn.set,received:r.parsedType}),lr;const o=this._def;o.minSize!==null&&r.data.size<o.minSize.value&&(nn(r,{code:Lt.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),n.dirty()),o.maxSize!==null&&r.data.size>o.maxSize.value&&(nn(r,{code:Lt.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),n.dirty());const s=this._def.valueType;function i(l){const c=new Set;for(const u of l){if(u.status==="aborted")return lr;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new k0(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>i(l)):i(a)}min(t,n){return new Ax({...this._def,minSize:{value:t,message:Sn.toString(n)}})}max(t,n){return new Ax({...this._def,maxSize:{value:t,message:Sn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Ax.create=(e,t)=>new Ax({valueType:e,minSize:null,maxSize:null,typeName:Bt.ZodSet,...Ir(t)});let wF=class extends Zr{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};wF.create=(e,t)=>new wF({getter:e,typeName:Bt.ZodLazy,...Ir(t)});let EF=class extends Zr{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return nn(n,{received:n.data,code:Lt.invalid_literal,expected:this._def.value}),lr}return{status:"valid",value:t.data}}get value(){return this._def.value}};EF.create=(e,t)=>new EF({value:e,typeName:Bt.ZodLiteral,...Ir(t)});function RJ(e,t){return new V8({values:e,typeName:Bt.ZodEnum,...Ir(t)})}let V8=class r6 extends Zr{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return nn(n,{expected:oo.joinValues(r),received:n.parsedType,code:Lt.invalid_type}),lr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return nn(n,{received:n.data,code:Lt.invalid_enum_value,options:r}),lr}return Fc(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return r6.create(t,{...this._def,...n})}exclude(t,n=this._def){return r6.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}};V8.create=RJ;class _F extends Zr{_parse(t){const n=oo.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==vn.string&&r.parsedType!==vn.number){const o=oo.objectValues(n);return nn(r,{expected:oo.joinValues(o),received:r.parsedType,code:Lt.invalid_type}),lr}if(this._cache||(this._cache=new Set(oo.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const o=oo.objectValues(n);return nn(r,{received:r.data,code:Lt.invalid_enum_value,options:o}),lr}return Fc(t.data)}get enum(){return this._def.values}}_F.create=(e,t)=>new _F({values:e,typeName:Bt.ZodNativeEnum,...Ir(t)});class FS extends Zr{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==vn.promise&&n.common.async===!1)return nn(n,{code:Lt.invalid_type,expected:vn.promise,received:n.parsedType}),lr;const r=n.parsedType===vn.promise?n.data:Promise.resolve(n.data);return Fc(r.then(o=>this._def.type.parseAsync(o,{path:n.path,errorMap:n.common.contextualErrorMap})))}}FS.create=(e,t)=>new FS({type:e,typeName:Bt.ZodPromise,...Ir(t)});class X1 extends Zr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Bt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),o=this._def.effect||null,s={addIssue:i=>{nn(r,i),i.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),o.type==="preprocess"){const i=o.transform(r.data,s);if(r.common.async)return Promise.resolve(i).then(async a=>{if(n.value==="aborted")return lr;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?lr:l.status==="dirty"||n.value==="dirty"?pv(l.value):l});{if(n.value==="aborted")return lr;const a=this._def.schema._parseSync({data:i,path:r.path,parent:r});return a.status==="aborted"?lr:a.status==="dirty"||n.value==="dirty"?pv(a.value):a}}if(o.type==="refinement"){const i=a=>{const l=o.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?lr:(a.status==="dirty"&&n.dirty(),i(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?lr:(a.status==="dirty"&&n.dirty(),i(a.value).then(()=>({status:n.value,value:a.value}))))}if(o.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Z1(i))return lr;const a=o.transform(i.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>Z1(i)?Promise.resolve(o.transform(i.value,s)).then(a=>({status:n.value,value:a})):lr);oo.assertNever(o)}}X1.create=(e,t,n)=>new X1({schema:e,typeName:Bt.ZodEffects,effect:t,...Ir(n)});X1.createWithPreprocess=(e,t,n)=>new X1({schema:t,effect:{type:"preprocess",transform:e},typeName:Bt.ZodEffects,...Ir(n)});let b0=class extends Zr{_parse(t){return this._getType(t)===vn.undefined?Fc(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};b0.create=(e,t)=>new b0({innerType:e,typeName:Bt.ZodOptional,...Ir(t)});let Q1=class extends Zr{_parse(t){return this._getType(t)===vn.null?Fc(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Q1.create=(e,t)=>new Q1({innerType:e,typeName:Bt.ZodNullable,...Ir(t)});let o6=class extends Zr{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===vn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};o6.create=(e,t)=>new o6({innerType:e,typeName:Bt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ir(t)});let s6=class extends Zr{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},o=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return PS(o)?o.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Yf(r.common.issues)},input:r.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Yf(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};s6.create=(e,t)=>new s6({innerType:e,typeName:Bt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ir(t)});class SF extends Zr{_parse(t){if(this._getType(t)!==vn.nan){const r=this._getOrReturnCtx(t);return nn(r,{code:Lt.invalid_type,expected:vn.nan,received:r.parsedType}),lr}return{status:"valid",value:t.data}}}SF.create=e=>new SF({typeName:Bt.ZodNaN,...Ir(e)});class RIe extends Zr{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class q8 extends Zr{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?lr:s.status==="dirty"?(n.dirty(),pv(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const o=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?lr:o.status==="dirty"?(n.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:r.path,parent:r})}}static create(t,n){return new q8({in:t,out:n,typeName:Bt.ZodPipeline})}}let i6=class extends Zr{_parse(t){const n=this._def.innerType._parse(t),r=o=>(Z1(o)&&(o.value=Object.freeze(o.value)),o);return PS(n)?n.then(o=>r(o)):r(n)}unwrap(){return this._def.innerType}};i6.create=(e,t)=>new i6({innerType:e,typeName:Bt.ZodReadonly,...Ir(t)});var Bt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Bt||(Bt={}));const ro=XN.create,w2=QN.create,E2=t6.create,TF=kx.create;A0.create;const a6=J1.create,li=Kf.create;LS.create;$S.create;gm.create;const l6=V8.create;FS.create;b0.create;Q1.create;const MIe=li({title:ro().min(1,"Title is required"),description:ro().optional(),assignedTo:a6(ro()).min(1,"At least one assignee is required"),status:l6(Object.values(_x)),priority:l6(Object.values(Ex)),dueDate:TF().optional().nullable(),reminderDate:TF().optional().nullable()});function MJ({...e}){return h.jsx(TW,{"data-slot":"sheet",...e})}function DIe({...e}){return h.jsx(CW,{"data-slot":"sheet-portal",...e})}function OIe({className:e,...t}){return h.jsx(kW,{"data-slot":"sheet-overlay",className:Qe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function DJ({className:e,children:t,side:n="right",...r}){return h.jsxs(DIe,{children:[h.jsx(OIe,{}),h.jsxs(AW,{"data-slot":"sheet-content",className:Qe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[t,h.jsxs(IW,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[h.jsx(qr,{className:"size-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function OJ({className:e,...t}){return h.jsx("div",{"data-slot":"sheet-header",className:Qe("flex flex-col gap-1.5 p-4",e),...t})}function PJ({className:e,...t}){return h.jsx(NW,{"data-slot":"sheet-title",className:Qe("text-foreground font-semibold",e),...t})}const PIe=Uke,LJ=x.createContext({}),Gg=({...e})=>h.jsx(LJ.Provider,{value:{name:e.name},children:h.jsx(qke,{...e})}),G8=()=>{const e=x.useContext(LJ),t=x.useContext($J),{getFieldState:n}=uC(),r=nJ({name:e.name}),o=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:s}=t;return{id:s,name:e.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...o}},$J=x.createContext({});function Lp({className:e,...t}){const n=x.useId();return h.jsx($J.Provider,{value:{id:n},children:h.jsx("div",{"data-slot":"form-item",className:Qe("grid gap-2",e),...t})})}function $p({className:e,...t}){const{error:n,formItemId:r}=G8();return h.jsx(Hl,{"data-slot":"form-label","data-error":!!n,className:Qe("data-[error=true]:text-destructive",e),htmlFor:r,...t})}function Wg({...e}){const{error:t,formItemId:n,formDescriptionId:r,formMessageId:o}=G8();return h.jsx(Nm,{"data-slot":"form-control",id:n,"aria-describedby":t?`${r} ${o}`:`${r}`,"aria-invalid":!!t,...e})}function Yg({className:e,...t}){const{error:n,formMessageId:r}=G8(),o=n?String((n==null?void 0:n.message)??""):t.children;return o?h.jsx("p",{"data-slot":"form-message",id:r,className:Qe("text-destructive text-sm",e),...t,children:o}):null}const LIe=({isOpen:e,onClose:t,editTodoId:n})=>{const{addTodo:r,updateTodo:o,todos:s}=lC(),[i,a]=Me.useState([]),[l,c]=Me.useState(""),u={title:"",description:"",assignedTo:[],status:_x.Pending,priority:Ex.Medium,dueDate:void 0,reminderDate:void 0},f=iAe({resolver:sIe(MIe),defaultValues:u});Me.useEffect(()=>{if(n){const v=s.find(w=>w.id===n);v&&(f.reset({title:v.title,description:v.description,assignedTo:v.assignedTo,status:v.status,priority:v.priority,dueDate:v.dueDate,reminderDate:v.reminderDate}),a(v.assignedTo))}else f.reset(u),a([])},[n,s,e,f]);const m=v=>{v.assignedTo=i,n?(o(n,v),Ui.success("Your to-do has been updated successfully.")):(r(v),Ui.success("Your new to-do has been added successfully.")),f.reset(),a([]),c(""),t()},g=()=>{if(l.trim()&&!i.includes(l.trim())){const v=[...i,l.trim()];a(v),f.setValue("assignedTo",v),c("")}},y=v=>{const w=i.filter(_=>_!==v);a(w),f.setValue("assignedTo",w)};return h.jsx(MJ,{open:e,onOpenChange:v=>!v&&t(),children:h.jsxs(DJ,{className:"overflow-y-auto",children:[h.jsx(OJ,{children:h.jsx(PJ,{children:n?"Edit To-Do":"Add New To-Do"})}),h.jsx(PIe,{...f,children:h.jsxs("form",{onSubmit:f.handleSubmit(m),className:"space-y-6 p-4 pt-0",children:[h.jsx(Gg,{control:f.control,name:"title",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Title"}),h.jsx(Wg,{children:h.jsx(wd,{placeholder:"Enter title",...v})}),h.jsx(Yg,{})]})}),h.jsx(Gg,{control:f.control,name:"description",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Description"}),h.jsx(Wg,{children:h.jsx(C8,{placeholder:"Enter description",rows:4,...v,value:v.value||""})}),h.jsx(Yg,{})]})}),h.jsxs(Lp,{children:[h.jsx($p,{children:"Assigned To"}),h.jsx("div",{className:"flex flex-wrap items-center gap-2",children:i.map(v=>h.jsxs(_c,{variant:"outline",className:"cursor-pointer",onClick:()=>y(v),children:[v,h.jsx(qr,{className:"size-3"})]},v))}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(wd,{value:l,onChange:v=>c(v.target.value),placeholder:"Enter user name",onKeyDown:v=>{v.key==="Enter"&&(v.preventDefault(),g())}}),h.jsx(_r,{type:"button",variant:"outline",size:"icon",onClick:g,children:h.jsx(qf,{})})]}),f.formState.errors.assignedTo&&h.jsx("p",{className:"text-destructive mt-1 text-sm font-medium",children:f.formState.errors.assignedTo.message})]}),h.jsx(Gg,{control:f.control,name:"dueDate",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Due Date"}),h.jsx(Wg,{children:h.jsxs(vx,{children:[h.jsx(xx,{asChild:!0,children:h.jsxs(_r,{variant:"outline",className:Qe("w-full justify-start text-left font-normal",!v.value&&"text-muted-foreground"),children:[h.jsx(B1,{}),v.value?ar(v.value,"PPP"):"Select a date"]})}),h.jsx(wx,{className:"w-auto p-0",align:"start",children:h.jsx(bx,{mode:"single",disabled:{before:new Date},selected:v.value||void 0,onSelect:v.onChange})})]})}),h.jsx(Yg,{})]})}),h.jsx(Gg,{control:f.control,name:"reminderDate",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Reminder Date"}),h.jsx(Wg,{children:h.jsxs(vx,{children:[h.jsx(xx,{asChild:!0,children:h.jsxs(_r,{variant:"outline",className:Qe("w-full justify-start text-left font-normal",!v.value&&"text-muted-foreground"),children:[h.jsx(B1,{}),v.value?ar(v.value,"PPP"):"Select a date"]})}),h.jsx(wx,{className:"w-auto p-0",align:"start",children:h.jsx(bx,{mode:"single",disabled:{before:new Date},selected:v.value||void 0,onSelect:v.onChange})})]})}),h.jsx(Yg,{})]})}),h.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[h.jsx(Gg,{control:f.control,name:"status",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Status"}),h.jsx(Wg,{children:h.jsxs(_S,{value:v.value,onValueChange:v.onChange,children:[h.jsx(TS,{className:"w-full",children:h.jsx(SS,{placeholder:"Select status"})}),h.jsx(CS,{children:Object.values(_x).map(w=>h.jsxs(kS,{value:w,children:[h.jsx("span",{className:Qe("size-2 rounded-full",Ake[w])}),UZ[w]]},w))})]})}),h.jsx(Yg,{})]})}),h.jsx(Gg,{control:f.control,name:"priority",render:({field:v})=>h.jsxs(Lp,{children:[h.jsx($p,{children:"Priority"}),h.jsx(Wg,{children:h.jsxs(_S,{value:v.value,onValueChange:v.onChange,children:[h.jsx(TS,{className:"w-full capitalize",children:h.jsx(SS,{placeholder:"Select priority"})}),h.jsx(CS,{children:Object.values(Ex).map(w=>h.jsxs(kS,{className:"capitalize",value:w,children:[h.jsx("span",{className:Qe("size-2 rounded-full",jZ[w])}),w]},w))})]})}),h.jsx(Yg,{})]})})]}),h.jsx(_r,{className:"w-full",type:"submit",children:n?"Save Changes":"Add To-Do"})]})})]})})},$Ie=({isOpen:e,onClose:t,todoId:n,onEditClick:r})=>{const{todos:o,addComment:s,deleteComment:i,addFile:a,removeFile:l,addSubTask:c,updateSubTask:u,removeSubTask:f}=lC(),[m,g]=Me.useState(""),[y,v]=Me.useState(""),[w,_]=Me.useState(!1),T=o.find(U=>U.id===n);if(!T)return null;const k=()=>{if(!m.trim()){Ui.error("Both comment and author name are required");return}s(T.id,m),g(""),Ui.success("Your comment has been added successfully.")},M=U=>{const j=U.target.files;!j||j.length===0||(Array.from(j).forEach(H=>{const q=new FileReader;q.readAsDataURL(H),q.onload=()=>{a(T.id,{name:H.name,url:q.result,type:H.type,size:H.size,uploadedAt:new Date}),Ui.success(`${H.name} has been added to the task`)}}),U.target.value="")},D=()=>{if(!y.trim()){Ui.error("Subtask title is required");return}c(T.id,y),v(""),_(!1),Ui.success("Your subtask has been added successfully.")},I=(U,j)=>{u(T.id,U,j)},P=U=>{f(T.id,U),Ui.success("The subtask has been removed successfully.")},B=U=>U<1024?U+" bytes":U<1048576?(U/1024).toFixed(1)+" KB":(U/1048576).toFixed(1)+" MB";return h.jsx(MJ,{open:e,onOpenChange:U=>!U&&t(),children:h.jsxs(DJ,{children:[h.jsxs(OJ,{children:[h.jsxs("div",{className:"flex items-start justify-between pe-6",children:[h.jsx(PJ,{children:T.title}),r&&h.jsxs(_r,{variant:"outline",onClick:()=>r(T.id),children:[h.jsx(gbe,{}),"Edit"]})]}),h.jsxs("div",{className:"flex items-center gap-2 capitalize",children:[h.jsx(_c,{className:VN[T.status],children:T.status.replace("-"," ")}),h.jsx(_c,{className:HN[T.priority],children:T.priority})]})]}),h.jsxs("div",{className:"space-y-6 p-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Description"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:T.description||"No description provided."})]}),h.jsxs("div",{className:"grid grid-cols-3",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Assigned To"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:T.assignedTo||"Unassigned"})]}),T.dueDate&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Due Date"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:ar(new Date(T.dueDate),"PPP")})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Created"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:ar(new Date(T.createdAt),"PPP")})]})]})]}),h.jsx(Bf,{}),h.jsxs("div",{className:"space-y-4 p-4",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Subtasks"}),T.subTasks&&T.subTasks.length>0?h.jsx("div",{className:"space-y-2",children:T.subTasks.map(U=>h.jsxs("div",{className:"bg-muted flex items-center justify-between rounded-md p-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(yx,{checked:U.completed,onCheckedChange:j=>I(U.id,!!j)}),h.jsx("span",{className:Qe("text-sm",U.completed&&"text-muted-foreground line-through"),children:U.title})]}),h.jsx(_r,{variant:"ghost",className:"text-red-400!",size:"sm",onClick:()=>P(U.id),children:h.jsx(Ff,{})})]},U.id))}):h.jsx("div",{className:"bg-muted text-muted-foreground rounded-md p-4 text-center text-sm",children:"No subtasks yet."}),!w&&h.jsx("div",{children:h.jsxs(_r,{variant:"outline",size:"sm",onClick:()=>_(!0),children:[h.jsx(bq,{}),h.jsx("span",{children:"Add Sub Task"})]})}),w&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx(wd,{value:y,onChange:U=>v(U.target.value),placeholder:"Enter subtask title",className:"flex-1",onKeyDown:U=>{U.key==="Enter"?D():U.key==="Escape"&&(_(!1),v(""))}}),h.jsx(_r,{onClick:D,children:h.jsx(Co,{})}),h.jsx(_r,{variant:"destructive",onClick:()=>{_(!1),v("")},children:h.jsx(qr,{})})]})]}),h.jsx(Bf,{}),h.jsxs("div",{className:"space-y-2 p-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"text-sm font-medium",children:"Attachments"}),h.jsxs("div",{children:[h.jsx("input",{type:"file",id:"file-upload",multiple:!0,className:"sr-only",onChange:M}),h.jsx("label",{htmlFor:"file-upload",children:h.jsx(_r,{variant:"outline",size:"sm",asChild:!0,children:h.jsxs("span",{children:[h.jsx(pN,{}),"Upload"]})})})]})]}),T.files&&T.files.length>0?h.jsx("div",{className:"space-y-2",children:T.files.map(U=>h.jsxs("div",{className:"bg-muted flex items-center justify-between rounded-md p-2",children:[h.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[h.jsx(ix,{className:"h-4 w-4 shrink-0"}),h.jsxs("div",{className:"overflow-hidden",children:[h.jsx("a",{href:U.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-sm hover:underline",children:U.name}),h.jsxs("span",{className:"text-muted-foreground text-xs",children:[B(U.size)," "," ",ar(new Date(U.uploadedAt),"MMM d, yyyy")]})]})]}),h.jsx(_r,{variant:"ghost",size:"sm",onClick:()=>l(T.id,U.id),className:"text-red-400!",children:h.jsx(Ff,{})})]},U.id))}):h.jsx("div",{className:"bg-muted text-muted-foreground rounded-md p-4 text-center text-sm",children:"No files attached."})]}),h.jsx(Bf,{}),h.jsxs("div",{className:"space-y-4 p-4",children:[h.jsxs("h4",{className:"text-sm font-medium",children:["Comments (",T.comments.length,")"]}),T.comments.length===0&&h.jsx("div",{className:"bg-muted text-muted-foreground rounded-md p-4 text-center text-sm",children:"No comments yet."}),h.jsx("div",{className:"space-y-2",children:T.comments.map(U=>h.jsxs("div",{className:"bg-muted group relative space-y-3 rounded-md p-3",children:[h.jsx("p",{className:"text-sm",children:U.text}),h.jsxs("div",{className:"text-muted-foreground flex justify-between text-xs",children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(cR,{className:"size-3"})," ",ar(new Date(U.createdAt),"PPp")]}),h.jsx("div",{className:"absolute end-2 bottom-2 flex items-center opacity-0 group-hover:opacity-100",children:h.jsx(_r,{variant:"ghost",onClick:()=>i(T.id,U.id),className:"text-red-400!",size:"sm",children:h.jsx(Ff,{className:"size-3"})})})]})]},U.id))}),h.jsxs("div",{className:"space-y-3",children:[h.jsx(C8,{placeholder:"Write your comment...",value:m,onChange:U=>g(U.target.value)}),h.jsx(_r,{onClick:k,children:"Add Comment"})]})]})]})})};function FIe({tasks:e=kke}){const{setTodos:t,activeTab:n,isAddDialogOpen:r,setAddDialogOpen:o,isTodoSheetOpen:s,setTodoSheetOpen:i,selectedTodoId:a,setSelectedTodoId:l}=lC();x.useEffect(()=>{e&&e.length>0&&t(e)},[e,t]);const[c,u]=Me.useState(null),f=()=>{u(null),o(!0)},m=w=>{u(w),o(!0)},g=w=>{l(w),i(!0)},y=()=>{o(!1),u(null)},v=()=>{i(!1),l(null)};return h.jsxs("div",{className:"space-y-4",children:[h.jsx("header",{className:"mb-4",children:h.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Todo List"})}),h.jsx(Bke,{activeTab:n,onSelectTodo:g,onAddTodoClick:f}),h.jsx(LIe,{isOpen:r,onClose:y,editTodoId:c}),h.jsx($Ie,{isOpen:s,onClose:v,todoId:a,onEditClick:w=>{v(),m(w)}})]})}function CF({defaultView:e="kanban",onViewChange:t,className:n}){const[r,o]=x.useState(e),[s,i]=x.useState(""),[a,l]=x.useState({backlog:[{id:"1",title:"Integrate payment gateway",description:"Set up and configure payment API for handling transactions.",priority:"high",dueDate:"2024-09-20",users:[{name:"Emma",src:"",fallback:"EJ"},{name:"Daniel",src:"",fallback:"DS"}],progress:10,attachments:2,comments:4},{id:"2",title:"Redesign homepage",description:"Update the homepage with the new brand colors and hero section.",priority:"medium",dueDate:"2024-09-25",users:[{name:"Lucas",src:"",fallback:"LB"}],progress:0,attachments:1,comments:1}],inProgress:[{id:"3",title:"Dark mode implementation",description:"Allow users to switch between light and dark themes.",priority:"high",dueDate:"2024-09-18",users:[{name:"Charlie",src:"",fallback:"CW"},{name:"Ava",src:"",fallback:"AR"}],progress:40,attachments:2,comments:6},{id:"4",title:"Database optimization",description:"Improve query performance for large datasets.",priority:"medium",dueDate:"2024-09-19",users:[{name:"Liam",src:"",fallback:"LM"}],progress:55,attachments:3,comments:2}],done:[{id:"5",title:"CI/CD pipeline setup",description:"Automate deployment process using GitHub Actions.",priority:"high",dueDate:"2024-09-12",users:[{name:"Ethan",src:"",fallback:"EC"}],progress:100,attachments:2,comments:4}]}),[c]=x.useState({backlog:"Backlog",inProgress:"In Progress",done:"Done"}),[u,f]=x.useState(!1),[m,g]=x.useState(""),y=_=>{o(_),t==null||t(_)},v=_=>{const T=`col-${Date.now()}`;l(k=>({...k,[T]:[]})),g(""),f(!1)},w=x.useMemo(()=>{if(!s.trim())return a;const _={};return Object.entries(a).forEach(([T,k])=>{_[T]=k.filter(M=>{var D;return M.title.toLowerCase().includes(s.toLowerCase())||((D=M.description)==null?void 0:D.toLowerCase().includes(s.toLowerCase()))})}),_},[a,s]);return h.jsx(V1,{children:h.jsxs("div",{className:Qe("flex h-full flex-col",n),children:[h.jsxs("div",{className:"flex items-center justify-between gap-4 px-4 py-3 border-b",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx(iG,{value:r,onValueChange:_=>y(_),children:h.jsxs(aG,{className:"h-9",children:[h.jsxs(Av,{value:"kanban",className:"gap-1.5",children:[h.jsx(C1e,{className:"size-4"}),h.jsx("span",{className:"hidden sm:inline",children:"Kanban"})]}),h.jsxs(Av,{value:"tasks",className:"gap-1.5",children:[h.jsx(N1e,{className:"size-4"}),h.jsx("span",{className:"hidden sm:inline",children:"Tasks"})]}),h.jsxs(Av,{value:"calendar",className:"gap-1.5",children:[h.jsx(B1,{className:"size-4"}),h.jsx("span",{className:"hidden sm:inline",children:"Calendar"})]})]})})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"relative hidden md:block",children:[h.jsx(Gf,{className:"absolute left-2.5 top-2.5 size-4 text-muted-foreground"}),h.jsx(wd,{placeholder:"Search...",className:"w-[200px] pl-8",value:s,onChange:_=>i(_.target.value)})]}),h.jsxs(mw,{children:[h.jsx(gw,{asChild:!0,children:h.jsx(_r,{variant:"outline",size:"icon",children:h.jsx(Sq,{className:"size-4"})})}),h.jsxs(bw,{align:"end",className:"w-48",children:[h.jsx(d_e,{children:"Filter by"}),h.jsx(GL,{}),h.jsx(cu,{children:"High Priority"}),h.jsx(cu,{children:"Medium Priority"}),h.jsx(cu,{children:"Low Priority"}),h.jsx(GL,{}),h.jsx(cu,{children:"Due Today"}),h.jsx(cu,{children:"Overdue"})]})]}),r==="kanban"&&h.jsxs(RW,{open:u,onOpenChange:f,children:[h.jsx(LEe,{asChild:!0,children:h.jsxs(_r,{size:"sm",children:[h.jsx(qf,{className:"size-4 mr-1"}),h.jsx("span",{className:"hidden sm:inline",children:"Add Column"})]})}),h.jsxs(MW,{className:"sm:max-w-[425px]",children:[h.jsx(DW,{children:h.jsx(OW,{children:"Add New Column"})}),h.jsxs("div",{className:"mt-4 flex gap-2",children:[h.jsx(wd,{value:m,onChange:_=>g(_.target.value),placeholder:"Enter column name...",autoFocus:!0,onKeyDown:_=>{_.key==="Enter"&&m.trim()&&v(m.trim())}}),h.jsx(_r,{size:"icon",disabled:!m.trim(),onClick:()=>v(m.trim()),children:h.jsx(Co,{className:"size-4"})})]})]})]})]})]}),h.jsxs("div",{className:"flex-1 overflow-hidden",children:[r==="kanban"&&h.jsx("div",{className:"h-full overflow-x-auto p-4",children:h.jsxs(uTe,{value:w,onValueChange:l,getItemValue:_=>_.id,children:[h.jsx(JY,{className:"flex gap-4 pb-4",children:Object.entries(w).map(([_,T])=>h.jsxs(XY,{value:_,className:"w-[320px] min-w-[320px] shrink-0",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-semibold",children:c[_]||_}),h.jsx(_c,{variant:"secondary",className:"text-xs",children:T.length})]}),h.jsxs("div",{className:"flex",children:[h.jsx(QY,{asChild:!0,children:h.jsx(_r,{variant:"ghost",size:"icon",className:"size-8",children:h.jsx(x1e,{className:"size-4"})})}),h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:h.jsx(_r,{variant:"ghost",size:"icon",className:"size-8",children:h.jsx(bq,{className:"size-4"})})}),h.jsx(um,{children:"Add Task"})]})]})]}),T.length>0?h.jsx("div",{className:"flex flex-col gap-2",children:T.map(k=>h.jsx(eK,{value:k.id,asHandle:!0,asChild:!0,children:h.jsxs(xN,{className:"cursor-grab active:cursor-grabbing border-0 shadow-sm",children:[h.jsxs(hve,{className:"p-3 pb-2",children:[h.jsx(pve,{className:"text-sm font-medium line-clamp-2",children:k.title}),k.description&&h.jsx(mve,{className:"text-xs line-clamp-2",children:k.description})]}),h.jsxs(wN,{className:"p-3 pt-0 space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex -space-x-1.5",children:[k.users.slice(0,3).map((M,D)=>h.jsxs(yL,{className:"size-6 border-2 border-background",children:[M.src&&h.jsx(Nve,{src:M.src,alt:M.alt}),h.jsx(vL,{className:"text-[10px]",children:M.fallback})]},D)),k.users.length>3&&h.jsx(yL,{className:"size-6 border-2 border-background",children:h.jsxs(vL,{className:"text-[10px]",children:["+",k.users.length-3]})})]}),h.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[h.jsx(__e,{value:k.progress,className:"w-12 h-1.5"}),h.jsxs("span",{children:[k.progress,"%"]})]})]}),h.jsx(Bf,{}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(_c,{variant:k.priority==="high"?"destructive":k.priority==="medium"?"default":"secondary",className:"text-[10px] capitalize",children:k.priority}),h.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground",children:[k.attachments?h.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[h.jsx(W1e,{className:"size-3"}),h.jsx("span",{children:k.attachments})]}):null,k.comments?h.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[h.jsx(Eq,{className:"size-3"}),h.jsx("span",{children:k.comments})]}):null]})]})]})]})},k.id))}):h.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-8 text-center",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"No tasks yet"}),h.jsxs(_r,{variant:"outline",size:"sm",children:[h.jsx(qf,{className:"size-4 mr-1"}),"Add Task"]})]})]},_))}),h.jsx(gTe,{children:h.jsx("div",{className:"bg-primary/10 size-full rounded-md"})})]})}),r==="tasks"&&h.jsx("div",{className:"h-full overflow-auto",children:h.jsx(FIe,{})}),r==="calendar"&&h.jsx("div",{className:"h-full overflow-auto p-4",children:h.jsx(sCe,{})})]})]})})}function ra(e){this.content=e}ra.prototype={constructor:ra,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),s=r.content.slice();return o==-1?s.push(n||e,t):(s[o+1]=t,n&&(s[o]=n)),new ra(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new ra(n)},addToStart:function(e,t){return new ra([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new ra(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),s=r.find(e);return o.splice(s==-1?o.length:s,0,t,n),new ra(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=ra.from(e),e.size?new ra(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=ra.from(e),e.size?new ra(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=ra.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};ra.from=function(e){if(e instanceof ra)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new ra(t)};function FJ(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let o=e.child(r),s=t.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=FJ(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function BJ(e,t,n,r){for(let o=e.childCount,s=t.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=e.child(--o),a=t.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=BJ(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class bt{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>t&&r(l,o+a,s||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,o){let s="",i=!0;return this.nodesBetween(t,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:s+=r),s+=c},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)o.push(t.content[s]);return new bt(o,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],o=0;if(n>t)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>t&&((i<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,t-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new bt(r,o)}cutByIndex(t,n){return t==n?bt.empty:t==0&&n==this.content.length?this:new bt(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[t]=n,new bt(o,s)}addToStart(t){return new bt([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new bt(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];t(o,r,n),r+=o.nodeSize}}findDiffStart(t,n=0){return FJ(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return BJ(this,t,n,r)}findIndex(t){if(t==0)return _2(0,t);if(t==this.size)return _2(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),s=r+o.nodeSize;if(s>=t)return s==t?_2(n+1,s):_2(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return bt.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new bt(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return bt.empty;let n,r=0;for(let o=0;o<t.length;o++){let s=t[o];r+=s.nodeSize,o&&s.isText&&t[o-1].sameMarkup(s)?(n||(n=t.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new bt(n||t,r)}static from(t){if(!t)return bt.empty;if(t instanceof bt)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new bt([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}bt.empty=new bt([],0);const rk={index:0,offset:0};function _2(e,t){return rk.index=e,rk.offset=t,rk}function BS(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!BS(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!BS(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Ho=class c6{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let o=0;o<t.length;o++){let s=t[o];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,o));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&BS(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return c6.none;if(t instanceof c6)return[t];let n=t.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Ho.none=[];class zS extends Error{}class Zt{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=jJ(this.content,t+this.openStart,n);return r&&new Zt(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Zt(zJ(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Zt.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Zt(bt.fromJSON(t,n.content),r,o)}static maxOpen(t,n=!0){let r=0,o=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new Zt(t,r,o)}}Zt.empty=new Zt(bt.empty,0,0);function zJ(e,t,n){let{index:r,offset:o}=e.findIndex(t),s=e.maybeChild(r),{index:i,offset:a}=e.findIndex(n);if(o==t||s.isText){if(a!=n&&!e.child(i).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(zJ(s.content,t-o-1,n-o-1)))}function jJ(e,t,n,r){let{index:o,offset:s}=e.findIndex(t),i=e.maybeChild(o);if(s==t||i.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=jJ(i.content,t-s-1,n,i);return a&&e.replaceChild(o,i.copy(a))}function BIe(e,t,n){if(n.openStart>e.depth)throw new zS("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new zS("Inconsistent open depths");return UJ(e,t,n,0)}function UJ(e,t,n,r){let o=e.index(r),s=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){let i=UJ(e,t,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let i=e.parent,a=i.content;return nm(i,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:i,end:a}=zIe(n,e);return nm(s,VJ(e,i,a,t,r))}else return nm(s,jS(e,t,r))}function HJ(e,t){if(!t.type.compatibleContent(e.type))throw new zS("Cannot join "+t.type.name+" onto "+e.type.name)}function u6(e,t,n){let r=e.node(n);return HJ(r,t.node(n)),r}function tm(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Pv(e,t,n,r){let o=(t||e).node(n),s=0,i=t?t.index(n):o.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(tm(e.nodeAfter,r),s++));for(let a=s;a<i;a++)tm(o.child(a),r);t&&t.depth==n&&t.textOffset&&tm(t.nodeBefore,r)}function nm(e,t){return e.type.checkContent(t),e.copy(t)}function VJ(e,t,n,r,o){let s=e.depth>o&&u6(e,t,o+1),i=r.depth>o&&u6(n,r,o+1),a=[];return Pv(null,e,o,a),s&&i&&t.index(o)==n.index(o)?(HJ(s,i),tm(nm(s,VJ(e,t,n,r,o+1)),a)):(s&&tm(nm(s,jS(e,t,o+1)),a),Pv(t,n,o,a),i&&tm(nm(i,jS(n,r,o+1)),a)),Pv(r,null,o,a),new bt(a)}function jS(e,t,n){let r=[];if(Pv(null,e,n,r),e.depth>n){let o=u6(e,t,n+1);tm(nm(o,jS(e,t,n+1)),r)}return Pv(t,null,n,r),new bt(r)}function zIe(e,t){let n=t.depth-e.openStart,o=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)o=t.node(s).copy(bt.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}class Nx{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=t.child(n);return r?t.child(n).cut(r):o}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)o+=r.child(s).nodeSize;return o}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Ho.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),o=t.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new US(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=t;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new Nx(n,r,s)}static resolveCached(t,n){let r=kF.get(t);if(r)for(let s=0;s<r.elts.length;s++){let i=r.elts[s];if(i.pos==n)return i}else kF.set(t,r=new jIe);let o=r.elts[r.i]=Nx.resolve(t,n);return r.i=(r.i+1)%UIe,o}}class jIe{constructor(){this.elts=[],this.i=0}}const UIe=12,kF=new WeakMap;class US{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const HIe=Object.create(null);let y0=class d6{constructor(t,n,r,o=Ho.none){this.type=t,this.attrs=n,this.marks=o,this.content=r||bt.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,o=0){this.content.nodesBetween(t,n,r,o,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,o){return this.content.textBetween(t,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&BS(this.attrs,n||t.defaultAttrs||HIe)&&Ho.sameSet(this.marks,r||Ho.none)}copy(t=null){return t==this.content?this:new d6(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new d6(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Zt.empty;let o=this.resolve(t),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),c=o.node(i).content.cut(o.pos-a,s.pos-a);return new Zt(c,o.depth-i,s.depth-i)}replace(t,n,r){return BIe(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(o==t||n.isText)return n;t-=o+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(t){return Nx.resolveCached(this,t)}resolveNoCache(t){return Nx.resolve(this,t)}rangeHasMark(t,n,r){let o=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),qJ(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=bt.empty,o=0,s=r.childCount){let i=this.contentMatchAt(t).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(t).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Ho.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Ho.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let o=bt.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,o,r);return s.type.checkAttrs(s.attrs),s}};y0.prototype.text=void 0;let VIe=class f6 extends y0{constructor(t,n,r,o){if(super(t,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):qJ(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new f6(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new f6(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}};function qJ(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class bm{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new qIe(t,n);if(r.next==null)return bm.empty;let o=GJ(r);r.next&&r.err("Unexpected trailing text");let s=XIe(JIe(o));return QIe(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(t.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(t,r);if(l&&(!n||l.validEnd))return bt.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:f}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(f)==-1){o.push(f);let m=s(f,a.concat(u));if(m)return m}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(t)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let o=0;o<r.next.length;o++)t.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),t.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+t.indexOf(r.next[i].next);return s}).join(`
`)}}bm.empty=new bm(!0);class qIe{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function GJ(e){let t=[];do t.push(GIe(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function GIe(e){let t=[];do t.push(WIe(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function WIe(e){let t=ZIe(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=YIe(e,t);else break;return t}function AF(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function YIe(e,t){let n=AF(e),r=n;return e.eat(",")&&(e.next!="}"?r=AF(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function KIe(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.isInGroup(t)&&o.push(i)}return o.length==0&&e.err("No node type or group '"+t+"' found"),o}function ZIe(e){if(e.eat("(")){let t=GJ(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=KIe(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function JIe(e){let t=[[]];return o(s(e,0),n()),t;function n(){return t.push([])-1}function r(i,a,l){let c={term:l,to:a};return t[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=n();o(s(i.expr,l),u),l=u}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=n();r(l,u),o(s(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function WJ(e,t){return t-e}function NF(e,t){let n=[];return r(t),n.sort(WJ);function r(o){let s=e[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function XIe(e){let t=Object.create(null);return n(NF(e,0));function n(r){let o=[];r.forEach(i=>{e[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);NF(e,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=t[r.join(",")]=new bm(r.indexOf(e.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort(WJ);s.next.push({type:o[i][0],next:t[a.join(",")]||n(a)})}return s}}function QIe(e,t){for(let n=0,r=[e];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function YJ(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function KJ(e,t){let n=Object.create(null);for(let r in e){let o=t&&t[r];if(o===void 0){let s=e[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function ZJ(e,t,n,r){for(let o in t)if(!(o in e))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in e){let s=e[o];s.validate&&s.validate(t[o])}}function JJ(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new tRe(e,r,t[r]);return n}let IF=class XJ{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=JJ(t,r.attrs),this.defaultAttrs=YJ(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==bm.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:KJ(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new y0(this,this.computeAttrs(t),bt.from(n),Ho.setFrom(r))}createChecked(t=null,n,r){return n=bt.from(n),this.checkContent(n),new y0(this,this.computeAttrs(t),n,Ho.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=bt.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(bt.empty,!0);return s?new y0(this,t,n.append(s),Ho.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){ZJ(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Ho.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,i)=>r[s]=new XJ(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function eRe(e,t,n){let r=n.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class tRe{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?eRe(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class hC{constructor(t,n,r,o){this.name=t,this.rank=n,this.schema=r,this.spec=o,this.attrs=JJ(t,o.attrs),this.excluded=null;let s=YJ(this.attrs);this.instance=s?new Ho(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Ho(this,KJ(this.attrs,t))}static compile(t,n){let r=Object.create(null),o=0;return t.forEach((s,i)=>r[s]=new hC(s,o++,n,i)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){ZJ(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let QJ=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in t)n[o]=t[o];n.nodes=ra.from(t.nodes),n.marks=ra.from(t.marks||{}),this.nodes=IF.compile(this.spec.nodes,this),this.marks=hC.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[i]||(r[i]=bm.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?RF(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:RF(this,i.split(" "))}this.nodeFromJSON=o=>y0.fromJSON(this,o),this.markFromJSON=o=>Ho.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,o){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof IF){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,o)}text(t,n){let r=this.nodes.text;return new VIe(r,r.defaultAttrs,t,Ho.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function RF(e,t){let n=[];for(let r=0;r<t.length;r++){let o=t[r],s=e.marks[o],i=s;if(s)n.push(s);else for(let a in e.marks){let l=e.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function nRe(e){return e.tag!=null}function rRe(e){return e.style!=null}let Lv=class h6{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(nRe(o))this.tags.push(o);else if(rRe(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=t.nodes[o.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new DF(this,n,!1);return r.addAll(t,Ho.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new DF(this,n,!0);return r.addAll(t,Ho.none,n.from,n.to),Zt.maxOpen(r.finish())}matchTag(t,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(iRe(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(t);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(t,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(t)!=0||i.context&&!r.matchesContext(i.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(t){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in t.marks){let s=t.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=OF(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in t.nodes){let s=t.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=OF(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new h6(t,h6.schemaRules(t)))}};const eX={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},oRe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},tX={ol:!0,ul:!0},Ix=1,p6=2,$v=4;function MF(e,t,n){return t!=null?(t?Ix:0)|(t==="full"?p6:0):e&&e.whitespace=="pre"?Ix|p6:n&~$v}class S2{constructor(t,n,r,o,s,i){this.type=t,this.attrs=n,this.marks=r,this.solid=o,this.options=i,this.content=[],this.activeMarks=Ho.none,this.match=s||(i&$v?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(bt.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(t.type))?(this.match=r,o):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Ix)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=bt.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(bt.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!eX.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class DF{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,i=MF(null,n.preserveWhitespace,0)|(r?$v:0);o?s=new S2(o.type,o.attrs,Ho.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new S2(null,null,Ho.none,!0,null,i):s=new S2(t.schema.topNodeType,null,Ho.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,o=this.top,s=o.options&p6?"full":this.localPreserveWS||(o.options&Ix)>0,{schema:i}=this.parser;if(s==="full"||o.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(i.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(i.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(i.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(i.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=o.content[o.content.length-1],l=t.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(i.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let o=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let i=t.nodeName.toLowerCase(),a;tX.hasOwnProperty(i)&&this.parser.normalizeLists&&sRe(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:oRe.hasOwnProperty(i))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,u=this.needsBlock;if(eX.hasOwnProperty(i))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let f=l&&l.skip?n:this.readStyles(t,n);f&&this.addAll(t,f),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(t,n);c&&this.addElementByRule(t,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],i=r.getPropertyValue(s);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(s,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,r,o){let s,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(t);else if(o)this.addElement(t,r,o);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}s&&this.sync(a)&&this.open--}addAll(t,n,r,o){let s=r||0;for(let i=r?t.childNodes[r]:t.firstChild,a=o==null?null:t.childNodes[o];i!=a;i=i.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(i,n);this.findAtPoint(t,s)}findPlace(t,n,r){let o,s;for(let i=this.open,a=0;i>=0;i--){let l=this.nodes[i],c=l.findWrapping(t);if(c&&(!o||o.length>c.length+a)&&(o=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(s);for(let i=0;i<o.length;i++)n=this.enterInner(o[i],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let o=this.findPlace(t,n,r);if(o){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let i=Ho.none;for(let a of o.concat(t.marks))(s.type?s.type.allowsMarkType(a.type):PF(a.type,t.type))&&(i=a.addToSet(i));return s.content.push(t.mark(i)),!0}return!1}enter(t,n,r,o){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,o)),s}enterInner(t,n,r,o=!1,s){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(t);let a=MF(t,s,i.options);i.options&$v&&i.content.length==0&&(a|=$v);let l=Ho.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):PF(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new S2(t,n,l,o,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Ix)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)t+=r[o].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&t.nodeType==1&&t.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function sRe(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&tX.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function iRe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function OF(e){let t={};for(let n in e)t[n]=e[n];return t}function PF(e,t){let n=t.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(e))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||s.indexOf(u)<0&&i(u))return!0}};if(i(o.contentMatch))return!0}}class Pm{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=ok(n).createDocumentFragment());let o=r,s=[];return t.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,n);u&&(s.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:o}=A_(ok(n),this.nodes[t.type.name](t),null,t.attrs);if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,o)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let o=t.marks.length-1;o>=0;o--){let s=this.serializeMark(t.marks[o],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let o=this.marks[t.type.name];return o&&A_(ok(r),o(t,n),null,t.attrs)}static renderSpec(t,n,r=null,o){return A_(t,n,r,o)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Pm(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=LF(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return LF(t.marks)}}function LF(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function ok(e){return e.document||window.document}const $F=new WeakMap;function aRe(e){let t=$F.get(e);return t===void 0&&$F.set(e,t=lRe(e)),t}function lRe(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(e),t}function A_(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let o=t[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=aRe(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let a,l=n?e.createElementNS(n,o):e.createElement(o),c=t[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let m=f.indexOf(" ");m>0?l.setAttributeNS(f.slice(0,m),f.slice(m+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=u;f<t.length;f++){let m=t[f];if(m===0){if(f<t.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:g,contentDOM:y}=A_(e,m,n,r);if(l.appendChild(g),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:l,contentDOM:a}}const nX=65535,rX=Math.pow(2,16);function cRe(e,t){return e+t*rX}function FF(e){return e&nX}function uRe(e){return(e-(e&nX))/rX}const oX=1,sX=2,N_=4,iX=8;class m6{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&iX)>0}get deletedBefore(){return(this.delInfo&(oX|N_))>0}get deletedAfter(){return(this.delInfo&(sX|N_))>0}get deletedAcross(){return(this.delInfo&N_)>0}}class Gl{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&Gl.empty)return Gl.empty}recover(t){let n=0,r=FF(t);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+uRe(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>t)break;let c=this.ranges[a+s],u=this.ranges[a+i],f=l+c;if(t<=f){let m=c?t==l?-1:t==f?1:n:n,g=l+o+(m<0?0:u);if(r)return g;let y=t==(n<0?l:f)?null:cRe(a/3,t-l),v=t==l?sX:t==f?oX:N_;return(n<0?t!=l:t!=f)&&(v|=iX),new m6(g,v,y)}o+=u-c}return r?t+o:new m6(t+o,0,null)}touches(t,n){let r=0,o=FF(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+s],u=l+c;if(t<=u&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],u=this.ranges[o+r];t(a,a+c,l,l+u),s+=u-c}}invert(){return new Gl(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Gl.empty:new Gl(t<0?[0,-t,0]:[0,0,t])}}Gl.empty=new Gl([]);class Rx{constructor(t,n,r=0,o=t?t.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Rx(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let o=t.getMirror(n);this.appendMap(t._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let o=t.getMirror(n);this.appendMap(t._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let t=new Rx;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this._maps[s],a=i.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,t=a.pos}return r?t:new m6(t,o,null)}}const sk=Object.create(null);class Ea{getMap(){return Gl.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=sk[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in sk)throw new RangeError("Duplicate use of step JSON ID "+t);return sk[t]=n,n.prototype.jsonID=t,n}}class pi{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new pi(t,null)}static fail(t){return new pi(null,t)}static fromReplace(t,n,r,o){try{return pi.ok(t.replace(n,r,o))}catch(s){if(s instanceof zS)return pi.fail(s.message);throw s}}}function W8(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let s=e.child(o);s.content.size&&(s=s.copy(W8(s.content,t,s))),s.isInline&&(s=t(s,n,o)),r.push(s)}return bt.fromArray(r)}class l0 extends Ea{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new Zt(W8(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return pi.fromReplace(t,this.from,this.to,s)}invert(){return new gu(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new l0(n.pos,r.pos,this.mark)}merge(t){return t instanceof l0&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new l0(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new l0(n.from,n.to,t.markFromJSON(n.mark))}}Ea.jsonID("addMark",l0);class gu extends Ea{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Zt(W8(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),t),n.openStart,n.openEnd);return pi.fromReplace(t,this.from,this.to,r)}invert(){return new l0(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new gu(n.pos,r.pos,this.mark)}merge(t){return t instanceof gu&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new gu(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new gu(n.from,n.to,t.markFromJSON(n.mark))}}Ea.jsonID("removeMark",gu);class c0 extends Ea{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return pi.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return pi.fromReplace(t,this.pos,this.pos+1,new Zt(bt.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new c0(this.pos,n.marks[o]);return new c0(this.pos,this.mark)}}return new ym(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new c0(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new c0(n.pos,t.markFromJSON(n.mark))}}Ea.jsonID("addNodeMark",c0);class ym extends Ea{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return pi.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return pi.fromReplace(t,this.pos,this.pos+1,new Zt(bt.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new c0(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ym(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ym(n.pos,t.markFromJSON(n.mark))}}Ea.jsonID("removeNodeMark",ym);class Ri extends Ea{constructor(t,n,r,o=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=o}apply(t){return this.structure&&g6(t,this.from,this.to)?pi.fail("Structure replace would overwrite content"):pi.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Gl([this.from,this.to-this.from,this.slice.size])}invert(t){return new Ri(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ri(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof Ri)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Zt.empty:new Zt(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Ri(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Zt.empty:new Zt(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Ri(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ri(n.from,n.to,Zt.fromJSON(t,n.slice),!!n.structure)}}Ea.jsonID("replace",Ri);class qi extends Ea{constructor(t,n,r,o,s,i,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(t){if(this.structure&&(g6(t,this.from,this.gapFrom)||g6(t,this.gapTo,this.to)))return pi.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return pi.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?pi.fromReplace(t,this.from,this.to,r):pi.fail("Content does not fit in gap")}getMap(){return new Gl([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new qi(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new qi(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new qi(n.from,n.to,n.gapFrom,n.gapTo,Zt.fromJSON(t,n.slice),n.insert,!!n.structure)}}Ea.jsonID("replaceAround",qi);function g6(e,t,n){let r=e.resolve(t),o=n-t,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function dRe(e,t,n,r){let o=[],s=[],i,a;e.doc.nodesBetween(t,n,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let m=Math.max(c,t),g=Math.min(c+l.nodeSize,n),y=r.addToSet(f);for(let v=0;v<f.length;v++)f[v].isInSet(y)||(i&&i.to==m&&i.mark.eq(f[v])?i.to=g:o.push(i=new gu(m,g,f[v])));a&&a.to==m?a.to=g:s.push(a=new l0(m,g,r))}}),o.forEach(l=>e.step(l)),s.forEach(l=>e.step(l))}function fRe(e,t,n,r){let o=[],s=0;e.doc.nodesBetween(t,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof hC){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let u=0;u<l.length;u++){let f=l[u],m;for(let g=0;g<o.length;g++){let y=o[g];y.step==s-1&&f.eq(o[g].style)&&(m=y)}m?(m.to=c,m.step=s):o.push({style:f,from:Math.max(a,t),to:c,step:s})}}}),o.forEach(i=>e.step(new gu(i.from,i.to,i.style)))}function Y8(e,t,n,r=n.contentMatch,o=!0){let s=e.doc.nodeAt(t),i=[],a=t+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,f=r.matchType(c.type);if(!f)i.push(new Ri(a,u,Zt.empty));else{r=f;for(let m=0;m<c.marks.length;m++)n.allowsMarkType(c.marks[m].type)||e.step(new gu(a,u,c.marks[m]));if(o&&c.isText&&n.whitespace!="pre"){let m,g=/\r?\n|\r/g,y;for(;m=g.exec(c.text);)y||(y=new Zt(bt.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new Ri(a+m.index,a+m.index+m[0].length,y))}}a=u}if(!r.validEnd){let l=r.fillBefore(bt.empty,!0);e.replace(a,a,new Zt(l,0,0))}for(let l=i.length-1;l>=0;l--)e.step(i[l])}function hRe(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Ib(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,o=0,s=0;;--r){let i=e.$from.node(r),a=e.$from.index(r)+o,l=e.$to.indexAfter(r)-s;if(r<e.depth&&i.canReplace(a,l,n))return r;if(r==0||i.type.spec.isolating||!hRe(i,a,l))break;a&&(o=1),l<i.childCount&&(s=1)}return null}function pRe(e,t,n){let{$from:r,$to:o,depth:s}=t,i=r.before(s+1),a=o.after(s+1),l=i,c=a,u=bt.empty,f=0;for(let y=s,v=!1;y>n;y--)v||r.index(y)>0?(v=!0,u=bt.from(r.node(y).copy(u)),f++):l--;let m=bt.empty,g=0;for(let y=s,v=!1;y>n;y--)v||o.after(y+1)<o.end(y)?(v=!0,m=bt.from(o.node(y).copy(m)),g++):c++;e.step(new qi(l,c,i,a,new Zt(u.append(m),f,g),u.size-f,!0))}function K8(e,t,n=null,r=e){let o=mRe(e,t),s=o&&gRe(r,t);return s?o.map(BF).concat({type:t,attrs:n}).concat(s.map(BF)):null}function BF(e){return{type:e,attrs:null}}function mRe(e,t){let{parent:n,startIndex:r,endIndex:o}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let i=s.length?s[0]:t;return n.canReplaceWith(r,o,i)?s:null}function gRe(e,t){let{parent:n,startIndex:r,endIndex:o}=e,s=n.child(r),i=t.contentMatch.findWrapping(s.type);if(!i)return null;let l=(i.length?i[i.length-1]:t).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function bRe(e,t,n){let r=bt.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=bt.from(n[i].type.create(n[i].attrs,r))}let o=t.start,s=t.end;e.step(new qi(o,s,o,s,new Zt(r,0,0),n.length,!0))}function yRe(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(i,a)=>{let l=typeof o=="function"?o(i):o;if(i.isTextblock&&!i.hasMarkup(r,l)&&vRe(e.doc,e.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let g=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);g&&!y?c=!1:!g&&y&&(c=!0)}c===!1&&lX(e,i,a,s),Y8(e,e.mapping.slice(s).map(a,1),r,void 0,c===null);let u=e.mapping.slice(s),f=u.map(a,1),m=u.map(a+i.nodeSize,1);return e.step(new qi(f,m,f+1,m-1,new Zt(bt.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&aX(e,i,a,s),!1}})}function aX(e,t,n,r){t.forEach((o,s)=>{if(o.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(o.text);){let l=e.mapping.slice(r).map(n+1+s+i.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function lX(e,t,n,r){t.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+s);e.replaceWith(i,i+1,t.type.schema.text(`
`))}})}function vRe(e,t,n){let r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function xRe(e,t,n,r,o){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new qi(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new Zt(bt.from(i),0,0),1,!0))}function zf(e,t,n=1,r){let o=e.resolve(t),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>s;c--,u--){let f=o.node(c),m=o.index(c);if(f.type.spec.isolating)return!1;let g=f.content.cutByIndex(m,f.childCount),y=r&&r[u+1];y&&(g=g.replaceChild(0,y.type.create(y.attrs)));let v=r&&r[u]||f;if(!f.canReplace(m+1,f.childCount)||!v.type.validContent(g))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function wRe(e,t,n=1,r){let o=e.doc.resolve(t),s=bt.empty,i=bt.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=bt.from(o.node(a).copy(s));let u=r&&r[c];i=bt.from(u?u.type.create(u.attrs,i):o.node(a).copy(i))}e.step(new Ri(t,t,new Zt(s.append(i),n,n),!0))}function q0(e,t){let n=e.resolve(t),r=n.index();return cX(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function ERe(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let o=0;o<t.childCount;o++){let s=t.child(o),i=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(i),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function cX(e,t){return!!(e&&t&&!e.isLeaf&&ERe(e,t))}function pC(e,t,n=-1){let r=e.resolve(t);for(let o=r.depth;;o--){let s,i,a=r.index(o);if(o==r.depth?(s=r.nodeBefore,i=r.nodeAfter):n>0?(s=r.node(o+1),a++,i=r.node(o).maybeChild(a)):(s=r.node(o).maybeChild(a-1),i=r.node(o+1)),s&&!s.isTextblock&&cX(s,i)&&r.node(o).canReplace(a,a+1))return t;if(o==0)break;t=n<0?r.before(o):r.after(o)}}function _Re(e,t,n){let r=null,{linebreakReplacement:o}=e.doc.type.schema,s=e.doc.resolve(t-n),i=s.node().type;if(o&&i.inlineContent){let u=i.whitespace=="pre",f=!!i.contentMatch.matchType(o);u&&!f?r=!1:!u&&f&&(r=!0)}let a=e.steps.length;if(r===!1){let u=e.doc.resolve(t+n);lX(e,u.node(),u.before(),a)}i.inlineContent&&Y8(e,t+n-1,i,s.node().contentMatchAt(s.index()),r==null);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new Ri(c,l.map(t+n,-1),Zt.empty,!0)),r===!0){let u=e.doc.resolve(c);aX(e,u.node(),u.before(),e.steps.length)}return e}function SRe(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function uX(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(s==1)u=c.canReplace(l,l,o);else{let f=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function mC(e,t,n=t,r=Zt.empty){if(t==n&&!r.size)return null;let o=e.resolve(t),s=e.resolve(n);return dX(o,s,r)?new Ri(t,n,r):new TRe(o,s,r).fit()}function dX(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class TRe{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=bt.empty;for(let o=0;o<=t.depth;o++){let s=t.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(o))})}for(let o=t.depth;o>0;o--)this.placed=bt.from(t.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new Zt(s,i,a);return t>-1?new qi(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ri(r.pos,o.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=ik(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(n==1&&(i?c.matchType(i.type)||(f=c.fillBefore(bt.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:f};if(n==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,o=ik(t,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Zt(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,o=ik(t,n);if(o.childCount<=1&&n>0){let s=t.size-n<=n+o.size;this.unplaced=new Zt(gv(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Zt(gv(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let v=0;v<s.length;v++)this.openFrontierNode(s[v]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-t,c=0,u=[],{match:f,type:m}=this.frontier[n];if(o){for(let v=0;v<o.childCount;v++)u.push(o.child(v));f=f.matchFragment(o)}let g=a.size+t-(i.content.size-i.openEnd);for(;c<a.childCount;){let v=a.child(c),w=f.matchType(v.type);if(!w)break;c++,(c>1||l==0||v.content.size)&&(f=w,u.push(fX(v.mark(m.allowedMarks(v.marks)),c==1?l:0,c==a.childCount?g:-1)))}let y=c==a.childCount;y||(g=-1),this.placed=bv(this.placed,n,bt.from(u)),this.frontier[n].match=f,y&&g<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,w=a;v<g;v++){let _=w.lastChild;this.frontier.push({type:_.type,match:_.contentMatchAt(_.childCount)}),w=_.content}this.unplaced=y?t==0?Zt.empty:new Zt(gv(i.content,t-1,1),t-1,g<0?i.openEnd:t-1):new Zt(gv(i.content,t,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!ak(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),i=ak(t,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=ak(t,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:i,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=bv(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let o=t.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,t.index(r));this.openFrontierNode(o.type,o.attrs,s)}return t}openFrontierNode(t,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=bv(this.placed,this.depth,bt.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(bt.empty,!0);n.childCount&&(this.placed=bv(this.placed,this.frontier.length,n))}}function gv(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(gv(e.firstChild.content,t-1,n)))}function bv(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(bv(e.lastChild.content,t-1,n)))}function ik(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function fX(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,fX(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(bt.empty,!0)))),e.copy(r)}function ak(e,t,n,r,o){let s=e.node(t),i=o?e.indexAfter(t):e.index(t);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!CRe(n,s.content,i)?a:null}function CRe(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function kRe(e){return e.spec.defining||e.spec.definingForContent}function ARe(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),s=e.doc.resolve(n);if(dX(o,s,r))return e.step(new Ri(t,n,r));let i=pX(o,s);i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let m=o.depth,g=o.pos-1;m>0;m--,g--){let y=o.node(m).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;i.indexOf(m)>-1?a=m:o.before(m)==g&&i.splice(1,0,-m)}let l=i.indexOf(a),c=[],u=r.openStart;for(let m=r.content,g=0;;g++){let y=m.firstChild;if(c.push(y),g==r.openStart)break;m=y.content}for(let m=u-1;m>=0;m--){let g=c[m],y=kRe(g.type);if(y&&!g.sameMarkup(o.node(Math.abs(a)-1)))u=m;else if(y||!g.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let g=(m+u+1)%(r.openStart+1),y=c[g];if(y)for(let v=0;v<i.length;v++){let w=i[(v+l)%i.length],_=!0;w<0&&(_=!1,w=-w);let T=o.node(w-1),k=o.index(w-1);if(T.canReplaceWith(k,k,y.type,y.marks))return e.replace(o.before(w),_?s.after(w):n,new Zt(hX(r.content,0,r.openStart,g),g,r.openEnd))}}let f=e.steps.length;for(let m=i.length-1;m>=0&&(e.replace(t,n,r),!(e.steps.length>f));m--){let g=i[m];g<0||(t=o.before(g),n=s.after(g))}}function hX(e,t,n,r,o){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(hX(s.content,t+1,n,r,s)))}if(t>r){let s=o.contentMatchAt(0),i=s.fillBefore(e).append(e);e=i.append(s.matchFragment(i).fillBefore(bt.empty,!0))}return e}function NRe(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=SRe(e.doc,t,r.type);o!=null&&(t=n=o)}e.replaceRange(t,n,new Zt(bt.from(r),0,0))}function IRe(e,t,n){let r=e.doc.resolve(t),o=e.doc.resolve(n),s=pX(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return e.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(t-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i&&r.start(i-1)==o.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),o.index(i-1)))return e.delete(r.before(i),n);e.delete(t,n)}function pX(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let o=r;o>=0;o--){let s=e.start(o);if(s<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(s==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==s-1)&&n.push(o)}return n}class I1 extends Ea{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return pi.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return pi.fromReplace(t,this.pos,this.pos+1,new Zt(bt.from(o),0,n.isLeaf?0:1))}getMap(){return Gl.empty}invert(t){return new I1(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new I1(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new I1(n.pos,n.attr,n.value)}}Ea.jsonID("attr",I1);class Mx extends Ea{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let o in t.attrs)n[o]=t.attrs[o];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return pi.ok(r)}getMap(){return Gl.empty}invert(t){return new Mx(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Mx(n.attr,n.value)}}Ea.jsonID("docAttr",Mx);let eb=class extends Error{};eb=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};eb.prototype=Object.create(Error.prototype);eb.prototype.constructor=eb;eb.prototype.name="TransformError";class mX{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Rx}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new eb(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Zt.empty){let o=mC(this.doc,t,n,r);return o&&this.step(o),this}replaceWith(t,n,r){return this.replace(t,n,new Zt(bt.from(r),0,0))}delete(t,n){return this.replace(t,n,Zt.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return ARe(this,t,n,r),this}replaceRangeWith(t,n,r){return NRe(this,t,n,r),this}deleteRange(t,n){return IRe(this,t,n),this}lift(t,n){return pRe(this,t,n),this}join(t,n=1){return _Re(this,t,n),this}wrap(t,n){return bRe(this,t,n),this}setBlockType(t,n=t,r,o=null){return yRe(this,t,n,r,o),this}setNodeMarkup(t,n,r=null,o){return xRe(this,t,n,r,o),this}setNodeAttribute(t,n,r){return this.step(new I1(t,n,r)),this}setDocAttribute(t,n){return this.step(new Mx(t,n)),this}addNodeMark(t,n){return this.step(new c0(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Ho)n.isInSet(r.marks)&&this.step(new ym(t,n));else{let o=r.marks,s,i=[];for(;s=n.isInSet(o);)i.push(new ym(t,s)),o=s.removeFromSet(o);for(let a=i.length-1;a>=0;a--)this.step(i[a])}return this}split(t,n=1,r){return wRe(this,t,n,r),this}addMark(t,n,r){return dRe(this,t,n,r),this}removeMark(t,n,r){return fRe(this,t,n,r),this}clearIncompatible(t,n,r){return Y8(this,t,n,r),this}}const lk=Object.create(null);let Vn=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new gX(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Zt.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=t.mapping.slice(s);t.replaceRange(u.map(l.pos),u.map(c.pos),a?Zt.empty:n),a==0&&UF(t,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=t.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);s?t.deleteRange(c,u):(t.replaceRangeWith(c,u,n),UF(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let o=t.parent.inlineContent?new qn(t):o1(t.node(0),t.parent,t.pos,t.index(),n,r);if(o)return o;for(let s=t.depth-1;s>=0;s--){let i=n<0?o1(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):o1(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(i)return i}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new Kl(t.node(0))}static atStart(t){return o1(t,t,0,0,1)||new Kl(t)}static atEnd(t){return o1(t,t,t.content.size,t.childCount,-1)||new Kl(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=lk[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in lk)throw new RangeError("Duplicate use of selection JSON ID "+t);return lk[t]=n,n.prototype.jsonID=t,n}getBookmark(){return qn.between(this.$anchor,this.$head).getBookmark()}};Vn.prototype.visible=!0;class gX{constructor(t,n){this.$from=t,this.$to=n}}let zF=!1;function jF(e){!zF&&!e.parent.inlineContent&&(zF=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class qn extends Vn{constructor(t,n=t){jF(t),jF(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Vn.near(r);let o=t.resolve(n.map(this.anchor));return new qn(o.parent.inlineContent?o:r,r)}replace(t,n=Zt.empty){if(super.replace(t,n),n==Zt.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof qn&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new gC(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new qn(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let o=t.resolve(n);return new this(o,r==n?o:t.resolve(r))}static between(t,n,r){let o=t.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=Vn.findFrom(n,r,!0)||Vn.findFrom(n,-r,!0);if(s)n=s.$head;else return Vn.near(n,r)}return t.parent.inlineContent||(o==0?t=n:(t=(Vn.findFrom(t,-r,!0)||Vn.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=o<0&&(t=n))),new qn(t,n)}}Vn.jsonID("text",qn);class gC{constructor(t,n){this.anchor=t,this.head=n}map(t){return new gC(t.map(this.anchor),t.map(this.head))}resolve(t){return qn.between(t.resolve(this.anchor),t.resolve(this.head))}}class Nn extends Vn{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=t.resolve(o);return r?Vn.near(s):new Nn(s)}content(){return new Zt(bt.from(this.node),0,0)}eq(t){return t instanceof Nn&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Z8(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Nn(t.resolve(n.anchor))}static create(t,n){return new Nn(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Nn.prototype.visible=!1;Vn.jsonID("node",Nn);class Z8{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new gC(r,r):new Z8(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Nn.isSelectable(r)?new Nn(n):Vn.near(n)}}class Kl extends Vn{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Zt.empty){if(n==Zt.empty){t.delete(0,t.doc.content.size);let r=Vn.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new Kl(t)}map(t){return new Kl(t)}eq(t){return t instanceof Kl}getBookmark(){return RRe}}Vn.jsonID("all",Kl);const RRe={map(){return this},resolve(e){return new Kl(e)}};function o1(e,t,n,r,o,s=!1){if(t.inlineContent)return qn.create(e,n);for(let i=r-(o>0?0:1);o>0?i<t.childCount:i>=0;i+=o){let a=t.child(i);if(a.isAtom){if(!s&&Nn.isSelectable(a))return Nn.create(e,n-(o<0?a.nodeSize:0))}else{let l=o1(e,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function UF(e,t,n){let r=e.steps.length-1;if(r<t)return;let o=e.steps[r];if(!(o instanceof Ri||o instanceof qi))return;let s=e.mapping.maps[r],i;s.forEach((a,l,c,u)=>{i==null&&(i=u)}),e.setSelection(Vn.near(e.doc.resolve(i),n))}const HF=1,T2=2,VF=4;class MRe extends mX{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|HF)&~T2,this.storedMarks=null,this}get selectionSet(){return(this.updated&HF)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=T2,this}ensureMarks(t){return Ho.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&T2)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~T2,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ho.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let o=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(o.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(t,s)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(Vn.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=VF,this}get scrolledIntoView(){return(this.updated&VF)>0}}function qF(e,t){return!t||!e?e:e.bind(t)}class yv{constructor(t,n,r){this.name=t,this.init=qF(n.init,r),this.apply=qF(n.apply,r)}}const DRe=[new yv("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new yv("selection",{init(e,t){return e.selection||Vn.atStart(t.doc)},apply(e){return e.selection}}),new yv("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new yv("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class ck{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=DRe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new yv(r.key,r.spec.state,r))})}}class p1{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",t),!o){o=[];for(let f=0;f<this.config.plugins.length;f++)o.push(f<i?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new p1(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new MRe(this)}static create(t){let n=new ck(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new p1(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(t,r);return r}reconfigure(t){let n=new ck(this.schema,t.plugins),r=n.fields,o=new p1(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(t,o)}return o}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=t[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let o=new ck(t.schema,t.plugins),s=new p1(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=y0.fromJSON(t.schema,n.doc);else if(i.name=="selection")s.selection=Vn.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,t,n[a],s);return}}s[i.name]=i.init(t,s)}}),s}}function bX(e,t,n){for(let r in e){let o=e[r];o instanceof Function?o=o.bind(t):r=="handleDOMEvents"&&(o=bX(o,t,{})),n[r]=o}return n}class vo{constructor(t){this.spec=t,this.props={},t.props&&bX(t.props,this,this.props),this.key=t.key?t.key.key:yX("plugin")}getState(t){return t[this.key]}}const uk=Object.create(null);function yX(e){return e in uk?e+"$"+ ++uk[e]:(uk[e]=0,e+"$")}class Bo{constructor(t="key"){this.key=yX(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const J8=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function vX(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const xX=(e,t,n)=>{let r=vX(e,n);if(!r)return!1;let o=X8(r);if(!o){let i=r.blockRange(),a=i&&Ib(i);return a==null?!1:(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(NX(e,o,t,-1))return!0;if(r.parent.content.size==0&&(tb(s,"end")||Nn.isSelectable(s)))for(let i=r.depth;;i--){let a=mC(e.doc,r.before(i),r.after(i),Zt.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(tb(s,"end")?Vn.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):Nn.create(l.doc,o.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(t&&t(e.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},ORe=(e,t,n)=>{let r=vX(e,n);if(!r)return!1;let o=X8(r);return o?wX(e,o,t):!1},PRe=(e,t,n)=>{let r=_X(e,n);if(!r)return!1;let o=Q8(r);return o?wX(e,o,t):!1};function wX(e,t,n){let r=t.nodeBefore,o=r,s=t.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let i=t.nodeAfter,a=i,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=mC(e.doc,s,l,Zt.empty);if(!c||c.from!=s||c instanceof Ri&&c.slice.size>=l-s)return!1;if(n){let u=e.tr.step(c);u.setSelection(qn.create(u.doc,s)),n(u.scrollIntoView())}return!0}function tb(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const EX=(e,t,n)=>{let{$head:r,empty:o}=e.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=X8(r)}let i=s&&s.nodeBefore;return!i||!Nn.isSelectable(i)?!1:(t&&t(e.tr.setSelection(Nn.create(e.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function X8(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function _X(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const SX=(e,t,n)=>{let r=_X(e,n);if(!r)return!1;let o=Q8(r);if(!o)return!1;let s=o.nodeAfter;if(NX(e,o,t,1))return!0;if(r.parent.content.size==0&&(tb(s,"start")||Nn.isSelectable(s))){let i=mC(e.doc,r.before(),r.after(),Zt.empty);if(i&&i.slice.size<i.to-i.from){if(t){let a=e.tr.step(i);a.setSelection(tb(s,"start")?Vn.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):Nn.create(a.doc,a.mapping.map(o.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(t&&t(e.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},TX=(e,t,n)=>{let{$head:r,empty:o}=e.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=Q8(r)}let i=s&&s.nodeAfter;return!i||!Nn.isSelectable(i)?!1:(t&&t(e.tr.setSelection(Nn.create(e.doc,s.pos)).scrollIntoView()),!0)};function Q8(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const LRe=(e,t)=>{let n=e.selection,r=n instanceof Nn,o;if(r){if(n.node.isTextblock||!q0(e.doc,n.from))return!1;o=n.from}else if(o=pC(e.doc,n.from,-1),o==null)return!1;if(t){let s=e.tr.join(o);r&&s.setSelection(Nn.create(s.doc,o-e.doc.resolve(o).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},$Re=(e,t)=>{let n=e.selection,r;if(n instanceof Nn){if(n.node.isTextblock||!q0(e.doc,n.to))return!1;r=n.to}else if(r=pC(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},FRe=(e,t)=>{let{$from:n,$to:r}=e.selection,o=n.blockRange(r),s=o&&Ib(o);return s==null?!1:(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)},CX=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function e7(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const BRe=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=e7(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,i.createAndFill());l.setSelection(Vn.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},kX=(e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof Kl||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=e7(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=e.tr.insert(i,s.createAndFill());a.setSelection(qn.create(a.doc,i+1)),t(a.scrollIntoView())}return!0},AX=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(zf(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Ib(r);return o==null?!1:(t&&t(e.tr.lift(r,o).scrollIntoView()),!0)};function zRe(e){return(t,n)=>{let{$from:r,$to:o}=t.selection;if(t.selection instanceof Nn&&t.selection.node.isBlock)return!r.parentOffset||!zf(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],i,a,l=!1,c=!1;for(let g=r.depth;;g--)if(r.node(g).isBlock){l=r.end(g)==r.pos+(r.depth-g),c=r.start(g)==r.pos-(r.depth-g),a=e7(r.node(g-1).contentMatchAt(r.indexAfter(g-1))),s.unshift(l&&a?{type:a}:null),i=g;break}else{if(g==1)return!1;s.unshift(null)}let u=t.tr;(t.selection instanceof qn||t.selection instanceof Kl)&&u.deleteSelection();let f=u.mapping.map(r.pos),m=zf(u.doc,f,s.length,s);if(m||(s[0]=a?{type:a}:null,m=zf(u.doc,f,s.length,s)),!m)return!1;if(u.split(f,s.length,s),!l&&c&&r.node(i).type!=a){let g=u.mapping.map(r.before(i)),y=u.doc.resolve(g);a&&r.node(i-1).canReplaceWith(y.index(),y.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(i)),a)}return n&&n(u.scrollIntoView()),!0}}const jRe=zRe(),URe=(e,t)=>{let{$from:n,to:r}=e.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),t&&t(e.tr.setSelection(Nn.create(e.doc,o))),!0)};function HRe(e,t,n){let r=t.nodeBefore,o=t.nodeAfter,s=t.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(o.isTextblock||q0(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function NX(e,t,n,r){let o=t.nodeBefore,s=t.nodeAfter,i,a,l=o.type.spec.isolating||s.type.spec.isolating;if(!l&&HRe(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(i=(a=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&a.matchType(i[0]||s.type).validEnd){if(n){let g=t.pos+s.nodeSize,y=bt.empty;for(let _=i.length-1;_>=0;_--)y=bt.from(i[_].create(null,y));y=bt.from(o.copy(y));let v=e.tr.step(new qi(t.pos-1,g,t.pos,g,new Zt(y,1,0),i.length,!0)),w=v.doc.resolve(g+2*i.length);w.nodeAfter&&w.nodeAfter.type==o.type&&q0(v.doc,w.pos)&&v.join(w.pos),n(v.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:Vn.findFrom(t,1),f=u&&u.$from.blockRange(u.$to),m=f&&Ib(f);if(m!=null&&m>=t.depth)return n&&n(e.tr.lift(f,m).scrollIntoView()),!0;if(c&&tb(s,"start",!0)&&tb(o,"end")){let g=o,y=[];for(;y.push(g),!g.isTextblock;)g=g.lastChild;let v=s,w=1;for(;!v.isTextblock;v=v.firstChild)w++;if(g.canReplace(g.childCount,g.childCount,v.content)){if(n){let _=bt.empty;for(let k=y.length-1;k>=0;k--)_=bt.from(y[k].copy(_));let T=e.tr.step(new qi(t.pos-y.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new Zt(_,y.length,0),0,!0));n(T.scrollIntoView())}return!0}}return!1}function IX(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(t.tr.setSelection(qn.create(t.doc,e<0?o.start(s):o.end(s)))),!0):!1}}const VRe=IX(-1),qRe=IX(1);function GRe(e,t=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&K8(i,e,t);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function GF(e,t=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)o=!0;else{let u=n.doc.resolve(c),f=u.index();o=u.parent.canReplaceWith(f,f+1,e)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,e,t)}r(s.scrollIntoView())}return!0}}function t7(...e){return function(t,n,r){for(let o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}t7(J8,xX,EX);t7(J8,SX,TX);t7(CX,kX,AX,jRe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function WRe(e,t=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s);if(!i)return!1;let a=r?n.tr:null;return YRe(a,i,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function YRe(e,t,n,r=null){let o=!1,s=t,i=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=i.resolve(t.start-2);s=new US(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new US(t.$from,i.resolve(t.$to.end(t.depth)),t.depth)),o=!0}let a=K8(s,n,r,t);return a?(e&&KRe(e,t,a,o,n),!0):!1}function KRe(e,t,n,r,o){let s=bt.empty;for(let u=n.length-1;u>=0;u--)s=bt.from(n[u].type.create(n[u].attrs,s));e.step(new qi(t.start-(r?2:0),t.end,t.start,t.end,new Zt(s,0,0),n.length,!0));let i=0;for(let u=0;u<n.length;u++)n[u].type==o&&(i=u+1);let a=n.length-i,l=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,f=t.endIndex,m=!0;u<f;u++,m=!1)!m&&zf(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return e}function ZRe(e){return function(t,n){let{$from:r,$to:o}=t.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?JRe(t,n,e,s):XRe(t,n,s):!0:!1}}function JRe(e,t,n,r){let o=e.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new qi(s-1,i,s,i,new Zt(bt.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new US(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=Ib(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(s,-1)-1);return q0(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),t(o.scrollIntoView()),!0}function XRe(e,t,n){let r=e.tr,o=n.parent;for(let g=n.end,y=n.endIndex-1,v=n.startIndex;y>v;y--)g-=o.child(y).nodeSize,r.delete(g-1,g+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?bt.empty:bt.from(o))))return!1;let f=s.pos,m=f+i.nodeSize;return r.step(new qi(f-(a?1:0),m+(l?1:0),f+1,m-1,new Zt((a?bt.empty:bt.from(o.copy(bt.empty))).append(l?bt.empty:bt.from(o.copy(bt.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function QRe(e){return function(t,n){let{$from:r,$to:o}=t.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==e);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=e)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=bt.from(c?e.create():null),f=new Zt(bt.from(e.create(null,bt.from(a.type.create(null,u)))),c?3:1,0),m=s.start,g=s.end;n(t.tr.step(new qi(m-(c?3:1),g,m,g,f,1,!0)).scrollIntoView())}return!0}}const sa=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},nb=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let b6=null;const xf=function(e,t,n){let r=b6||(b6=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},e8e=function(){b6=null},vm=function(e,t,n,r){return n&&(WF(e,t,n,r,-1)||WF(e,t,n,r,1))},t8e=/^(img|br|input|textarea|hr)$/i;function WF(e,t,n,r,o){for(var s;;){if(e==n&&t==r)return!0;if(t==(o<0?0:kc(e))){let i=e.parentNode;if(!i||i.nodeType!=1||Nw(e)||t8e.test(e.nodeName)||e.contentEditable=="false")return!1;t=sa(e)+(o<0?0:1),e=i}else if(e.nodeType==1){let i=e.childNodes[t+(o<0?-1:0)];if(i.nodeType==1&&i.contentEditable=="false")if(!((s=i.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=o;else return!1;else e=i,t=o<0?kc(e):0}else return!1}}function kc(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function n8e(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=kc(e)}else if(e.parentNode&&!Nw(e))t=sa(e),e=e.parentNode;else return null}}function r8e(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Nw(e))t=sa(e)+1,e=e.parentNode;else return null}}function o8e(e,t,n){for(let r=t==0,o=t==kc(e);r||o;){if(e==n)return!0;let s=sa(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,o=o&&s==kc(e)}}function Nw(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const bC=function(e){return e.focusNode&&vm(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Hp(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function s8e(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function i8e(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(kc(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(kc(r.startContainer),r.startOffset)}}}const _d=typeof navigator<"u"?navigator:null,YF=typeof document<"u"?document:null,G0=_d&&_d.userAgent||"",y6=/Edge\/(\d+)/.exec(G0),RX=/MSIE \d/.exec(G0),v6=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(G0),gl=!!(RX||v6||y6),v0=RX?document.documentMode:v6?+v6[1]:y6?+y6[1]:0,Dc=!gl&&/gecko\/(\d+)/i.test(G0);Dc&&+(/Firefox\/(\d+)/.exec(G0)||[0,0])[1];const x6=!gl&&/Chrome\/(\d+)/.exec(G0),Vi=!!x6,MX=x6?+x6[1]:0,wa=!gl&&!!_d&&/Apple Computer/.test(_d.vendor),rb=wa&&(/Mobile\/\w+/.test(G0)||!!_d&&_d.maxTouchPoints>2),Ec=rb||(_d?/Mac/.test(_d.platform):!1),DX=_d?/Win/.test(_d.platform):!1,Df=/Android \d/.test(G0),Iw=!!YF&&"webkitFontSmoothing"in YF.documentElement.style,a8e=Iw?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function l8e(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function pf(e,t){return typeof e=="number"?e:e[t]}function c8e(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function KF(e,t,n){let r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let i=n||e.dom;i;){if(i.nodeType!=1){i=nb(i);continue}let a=i,l=a==s.body,c=l?l8e(s):c8e(a),u=0,f=0;if(t.top<c.top+pf(r,"top")?f=-(c.top-t.top+pf(o,"top")):t.bottom>c.bottom-pf(r,"bottom")&&(f=t.bottom-t.top>c.bottom-c.top?t.top+pf(o,"top")-c.top:t.bottom-c.bottom+pf(o,"bottom")),t.left<c.left+pf(r,"left")?u=-(c.left-t.left+pf(o,"left")):t.right>c.right-pf(r,"right")&&(u=t.right-c.right+pf(o,"right")),u||f)if(l)s.defaultView.scrollBy(u,f);else{let g=a.scrollLeft,y=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let v=a.scrollLeft-g,w=a.scrollTop-y;t={left:t.left-v,top:t.top-w,right:t.right-v,bottom:t.bottom-w}}let m=l?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(m))break;i=m=="absolute"?i.offsetParent:nb(i)}}function u8e(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,o;for(let s=(t.left+t.right)/2,i=n+1;i<Math.min(innerHeight,t.bottom);i+=5){let a=e.root.elementFromPoint(s,i);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:OX(e.dom)}}function OX(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=nb(r));return t}function d8e({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;PX(n,r==0?0:r-t)}function PX(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:o,left:s}=e[n];r.scrollTop!=o+t&&(r.scrollTop=o+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Kg=null;function f8e(e){if(e.setActive)return e.setActive();if(Kg)return e.focus(Kg);let t=OX(e);e.focus(Kg==null?{get preventScroll(){return Kg={preventScroll:!0},!0}}:void 0),Kg||(Kg=!1,PX(t,0))}function LX(e,t){let n,r=2e8,o,s=0,i=t.top,a=t.top,l,c;for(let u=e.firstChild,f=0;u;u=u.nextSibling,f++){let m;if(u.nodeType==1)m=u.getClientRects();else if(u.nodeType==3)m=xf(u).getClientRects();else continue;for(let g=0;g<m.length;g++){let y=m[g];if(y.top<=i&&y.bottom>=a){i=Math.max(y.bottom,i),a=Math.min(y.top,a);let v=y.left>t.left?y.left-t.left:y.right<t.left?t.left-y.right:0;if(v<r){n=u,r=v,o=v&&n.nodeType==3?{left:y.right<t.left?y.right:y.left,top:t.top}:t,u.nodeType==1&&v&&(s=f+(t.left>=(y.left+y.right)/2?1:0));continue}}else y.top>t.top&&!l&&y.left<=t.left&&y.right>=t.left&&(l=u,c={left:Math.max(y.left,Math.min(y.right,t.left)),top:y.top});!n&&(t.left>=y.right&&t.top>=y.top||t.left>=y.left&&t.top>=y.bottom)&&(s=f+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?h8e(n,o):!n||r&&n.nodeType==1?{node:e,offset:s}:LX(n,o)}function h8e(e,t){let n=e.nodeValue.length,r=document.createRange(),o;for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let i=Xh(r,1);if(i.top!=i.bottom&&n7(t,i)){o={node:e,offset:s+(t.left>=(i.left+i.right)/2?1:0)};break}}return r.detach(),o||{node:e,offset:0}}function n7(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function p8e(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function m8e(e,t,n){let{node:r,offset:o}=LX(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return e.docView.posFromDOM(r,o,s)}function g8e(e,t,n,r){let o=-1;for(let s=t,i=!1;s!=e.dom;){let a=e.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!i&&l.left>r.left||l.top>r.top?o=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),i=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}function $X(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=e.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(n7(t,c))return $X(i,t,c)}}if((s=(s+1)%r)==o)break}return e}function b8e(e,t){let n=e.dom.ownerDocument,r,o=0,s=i8e(n,t.left,t.top);s&&({node:r,offset:o}=s);let i=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!i||!e.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=e.dom.getBoundingClientRect();if(!n7(t,c)||(i=$X(e.dom,t,c),!i))return null}if(wa)for(let c=i;r&&c;c=nb(c))c.draggable&&(r=void 0);if(i=p8e(i,t),r){if(Dc&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&o++}let c;Iw&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&o--,r==e.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=g8e(e,r,o,t))}a==null&&(a=m8e(e,i,t));let l=e.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function ZF(e){return e.top<e.bottom||e.left<e.right}function Xh(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(ZF(r))return r}return Array.prototype.find.call(n,ZF)||e.getBoundingClientRect()}const y8e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function FX(e,t,n){let{node:r,offset:o,atom:s}=e.docView.domFromPos(t,n<0?-1:1),i=Iw||Dc;if(r.nodeType==3)if(i&&(y8e.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=Xh(xf(r,o,o),n);if(Dc&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=Xh(xf(r,o-1,o-1),-1);if(c.top==l.top){let u=Xh(xf(r,o,o+1),-1);if(u.top!=l.top)return Gy(u,u.left<c.left)}}return l}else{let l=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Gy(Xh(xf(r,l,c),u),u<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==kc(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return dk(l.getBoundingClientRect(),!1)}if(s==null&&o<kc(r)){let l=r.childNodes[o];if(l.nodeType==1)return dk(l.getBoundingClientRect(),!0)}return dk(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==kc(r))){let l=r.childNodes[o-1],c=l.nodeType==3?xf(l,kc(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Gy(Xh(c,1),!1)}if(s==null&&o<kc(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?xf(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return Gy(Xh(c,-1),!0)}return Gy(Xh(r.nodeType==3?xf(r):r,-n),n>=0)}function Gy(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function dk(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function BX(e,t,n){let r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}function v8e(e,t,n){let r=t.selection,o=n=="up"?r.$from:r.$to;return BX(e,t,()=>{let{node:s}=e.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=FX(e,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=xf(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const x8e=/[\u0590-\u08ac]/;function w8e(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=e.domSelection();return a?!x8e.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:BX(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=e.domSelectionRange(),m=a.caretBidiLevel;a.modify("move",n,"character");let g=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:y,focusOffset:v}=e.domSelectionRange(),w=y&&!g.contains(y.nodeType==1?y:y.parentNode)||l==y&&c==v;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return m!=null&&(a.caretBidiLevel=m),w}):r.pos==r.start()||r.pos==r.end()}let JF=null,XF=null,QF=!1;function E8e(e,t,n){return JF==t&&XF==n?QF:(JF=t,XF=n,QF=n=="up"||n=="down"?v8e(e,t,n):w8e(e,t,n))}const Oc=0,eB=1,Yp=2,Sd=3;class Rw{constructor(t,n,r,o){this.parent=t,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=Oc,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==t)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,i;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(t==this.dom&&this.contentDOM)o=n>sa(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,o=t;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(t.nodeType==1?t:t.parentNode):i==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let o=t;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==t&&s!=r){for(;!o.border&&o.children.length;)for(let i=0;i<o.children.length;i++){let a=o.children[i];if(a.size){o=a;break}}return o}if(t<s)return o.descAt(t-r-o.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>t||i instanceof jX){o=t-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof zX&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?sa(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?sa(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&t<=c){let u=i+l.border;if(t>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,u);t=i;for(let f=a;f>0;f--){let m=this.children[f-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){o=sa(m.dom)+1;break}t-=m.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=sa(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:n,fromOffset:o,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,o=!1){let s=Math.min(t,n),i=Math.max(t,n);for(let g=0,y=0;g<this.children.length;g++){let v=this.children[g],w=y+v.size;if(s>y&&i<w)return v.setSelection(t-y-v.border,n-y-v.border,r,o);y=w}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((Dc||wa)&&t==n){let{node:g,offset:y}=a;if(g.nodeType==3){if(f=!!(y&&g.nodeValue[y-1]==`
`),f&&y==g.nodeValue.length)for(let v=g,w;v;v=v.parentNode){if(w=v.nextSibling){w.nodeName=="BR"&&(a=l={node:w.parentNode,offset:sa(w)+1});break}let _=v.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let v=g.childNodes[y-1];f=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(Dc&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let g=u.focusNode.childNodes[u.focusOffset];g&&g.contentEditable=="false"&&(o=!0)}if(!(o||f&&wa)&&vm(a.node,a.offset,u.anchorNode,u.anchorOffset)&&vm(l.node,l.offset,u.focusNode,u.focusOffset))return;let m=!1;if((c.extend||t==n)&&!(f&&Dc)){c.collapse(a.node,a.offset);try{t!=n&&c.extend(l.node,l.offset),m=!0}catch{}}if(!m){if(t>n){let y=a;a=l,l=y}let g=document.createRange();g.setEnd(l.node,l.offset),g.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(g)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?t<=i&&n>=r:t<i&&n>r){let a=r+s.border,l=i-s.border;if(t>=a&&n<=l){this.dirty=t==r||n==i?Yp:eB,t==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Sd:s.markDirty(t-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Yp:Sd}r=i}this.dirty=Yp}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Yp:eB;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class zX extends Rw{constructor(t,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(t,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==Oc&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class _8e extends Rw{constructor(t,n,r,o){super(t,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class xm extends Rw{constructor(t,n,r,o,s){super(t,[],r,o),this.mark=n,this.spec=s}static create(t,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=Pm.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new xm(t,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&Sd||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Sd&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Oc){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Oc}}slice(t,n,r){let o=xm.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=E6(s,n,i,r)),t>0&&(s=E6(s,0,t,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class x0 extends Rw{constructor(t,n,r,o,s,i,a,l,c){super(t,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(t,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=Pm.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let m=u;return u=VX(u,r,n),c?l=new S8e(t,n,r,o,u,f||null,m,c,s,i+1):n.isText?new yC(t,n,r,o,u,m,s):new x0(t,n,r,o,u,f||null,m,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>bt.empty)}return t}matchesNode(t,n,r){return this.dirty==Oc&&t.eq(this.node)&&HS(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,o=n,s=t.composing?this.localCompositionInfo(t,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new C8e(this,i&&i.node,t);N8e(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,t):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?Ho.none:this.node.child(u).marks,r,t),l.placeWidget(c,t,o)},(c,u,f,m)=>{l.syncToMarks(c.marks,r,t);let g;l.findNodeMatch(c,u,f,m)||a&&t.state.selection.from>o&&t.state.selection.to<o+c.nodeSize&&(g=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,f,g,t)||l.updateNextNode(c,u,f,t,m,o)||l.addNode(c,u,f,t,o),o+=c.nodeSize}),l.syncToMarks([],r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Yp)&&(i&&this.protectLocalComposition(t,i),UX(this.contentDOM,this.children,t),rb&&I8e(this.dom))}localCompositionInfo(t,n){let{from:r,to:o}=t.state.selection;if(!(t.state.selection instanceof qn)||r<n||o>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let i=s.nodeValue,a=R8e(this.node.content,i,r-n,o-n);return a<0?null:{node:s,pos:a,text:i}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new _8e(this,s,n,o);t.input.compositionNodes.push(i),this.children=E6(this.children,r,r+o.length,t,i)}update(t,n,r,o){return this.dirty==Sd||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,o),!0)}updateInner(t,n,r,o){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Oc}updateOuterDeco(t){if(HS(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=HX(this.dom,this.nodeDOM,w6(this.outerDeco,this.node,n),w6(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function tB(e,t,n,r,o){VX(r,t,e);let s=new x0(void 0,e,t,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class yC extends x0{constructor(t,n,r,o,s,i,a){super(t,n,r,o,s,null,i,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,o){return this.dirty==Sd||this.dirty!=Oc&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Oc||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=t,this.dirty=Oc,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let o=this.node.cut(t,n),s=document.createTextNode(o.text);return new yC(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Sd)}get domAtom(){return!1}isText(t){return this.node.text==t}}class jX extends Rw{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Oc&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class S8e extends x0{constructor(t,n,r,o,s,i,a,l,c,u){super(t,n,r,o,s,i,a,c,u),this.spec=l}update(t,n,r,o){if(this.dirty==Sd)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,o),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function UX(e,t,n){let r=e.firstChild,o=!1;for(let s=0;s<t.length;s++){let i=t[s],a=i.dom;if(a.parentNode==e){for(;a!=r;)r=nB(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(a,r);if(i instanceof xm){let l=r?r.previousSibling:e.lastChild;UX(i.contentDOM,i.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=nB(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}const Fv=function(e){e&&(this.nodeName=e)};Fv.prototype=Object.create(null);const Kp=[new Fv];function w6(e,t,n){if(e.length==0)return Kp;let r=n?Kp[0]:new Fv,o=[r];for(let s=0;s<e.length;s++){let i=e[s].type.attrs;if(i){i.nodeName&&o.push(r=new Fv(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new Fv(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function HX(e,t,n,r){if(n==Kp&&r==Kp)return t;let o=t;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=e&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Kp[0]),o=l}T8e(o,a||Kp[0],i)}return o}function T8e(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&e.classList.add(o[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(t.style);)e.style.removeProperty(o[1])}n.style&&(e.style.cssText+=n.style)}}function VX(e,t,n){return HX(e,e,Kp,w6(t,n,e.nodeType!=1))}function HS(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function nB(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class C8e{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=k8e(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,t.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(t[o])&&t[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=Oc,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=xm.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(t,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,o,s){let i=this.top.children[o];return i.dirty==Sd&&i.dom==i.contentDOM&&(i.dirty=Yp),i.update(t,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}t=n}}updateNextNode(t,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof x0){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,f,m=this.isLocked(u)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=Sd&&HS(n,l.outerDeco));if(!m&&l.update(t,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!m&&(f=this.recreateWrapper(l,t,n,r,o,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Yp,f.updateChildren(o,i+1),f.dirty=Oc),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,o,s,i){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!HS(r,t.outerDeco)||!o.eq(t.innerDeco))return null;let a=x0.create(this.top,n,r,o,s,i);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,r,o,s){let i=x0.create(this.top,t,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(t,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(t)&&(t==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new zX(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof xm;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof yC)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((wa||Vi)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new jX(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function k8e(e,t){let n=t,r=n.children.length,o=e.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof xm)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function A8e(e,t){return e.type.side-t.type.side}function N8e(e,t,n,r){let o=t.locals(e),s=0;if(o.length==0){for(let c=0;c<e.childCount;c++){let u=e.child(c);r(u,o,t.forChild(s,u),c),s+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let u,f;for(;i<o.length&&o[i].to==s;){let w=o[i++];w.widget&&(u?(f||(f=[u])).push(w):u=w)}if(u)if(f){f.sort(A8e);for(let w=0;w<f.length;w++)n(f[w],c,!!l)}else n(u,c,!!l);let m,g;if(l)g=-1,m=l,l=null;else if(c<e.childCount)g=c,m=e.child(c++);else break;for(let w=0;w<a.length;w++)a[w].to<=s&&a.splice(w--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let y=s+m.nodeSize;if(m.isText){let w=y;i<o.length&&o[i].from<w&&(w=o[i].from);for(let _=0;_<a.length;_++)a[_].to<w&&(w=a[_].to);w<y&&(l=m.cut(w-s),m=m.cut(0,w-s),y=w,g=-1)}else for(;i<o.length&&o[i].to<y;)i++;let v=m.isInline&&!m.isLeaf?a.filter(w=>!w.inline):a.slice();r(m,v,t.forChild(s,m),g),s=y}}function I8e(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function R8e(e,t,n,r){for(let o=0,s=0;o<e.childCount&&s<=r;){let i=e.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<e.childCount;){let c=e.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let c=a<r?l.lastIndexOf(t,r-a-1):-1;if(c>=0&&c+t.length+a>=n)return a+c;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function E6(e,t,n,r,o){let s=[];for(let i=0,a=0;i<e.length;i++){let l=e[i],c=a,u=a+=l.size;c>=n||u<=t?s.push(l):(c<t&&s.push(l.slice(0,t-c,r)),o&&(s.push(o),o=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function r7(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(bC(n)){for(l=i;o&&!o.node;)o=o.parent;let f=o.node;if(o&&f.isAtom&&Nn.isSelectable(f)&&o.parent&&!(f.isInline&&o8e(n.focusNode,n.focusOffset,o.dom))){let m=o.posBefore;c=new Nn(i==m?a:r.resolve(m))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=i,m=i;for(let g=0;g<n.rangeCount;g++){let y=n.getRangeAt(g);f=Math.min(f,e.docView.posFromDOM(y.startContainer,y.startOffset,1)),m=Math.max(m,e.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(f<0)return null;[l,i]=m==e.state.selection.anchor?[m,f]:[f,m],a=r.resolve(i)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let f=t=="pointer"||e.state.selection.head<a.pos&&!s?1:-1;c=o7(e,u,a,f)}return c}function qX(e){return e.editable?e.hasFocus():WX(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function jf(e,t=!1){let n=e.state.selection;if(GX(e,n),!!qX(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Vi){let r=e.domSelectionRange(),o=e.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&vm(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)D8e(e);else{let{anchor:r,head:o}=n,s,i;rB&&!(n instanceof qn)&&(n.$from.parent.inlineContent||(s=oB(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=oB(e,n.to))),e.docView.setSelection(r,o,e,t),rB&&(s&&sB(s),i&&sB(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&M8e(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const rB=wa||Vi&&MX<63;function oB(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(wa&&o&&o.contentEditable=="false")return fk(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return fk(o);if(s)return fk(s)}}function fk(e){return e.contentEditable="true",wa&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function sB(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function M8e(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!qX(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function D8e(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,sa(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&gl&&v0<=11&&(n.disabled=!0,n.disabled=!1)}function GX(e,t){if(t instanceof Nn){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(iB(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else iB(e)}function iB(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function o7(e,t,n,r){return e.someProp("createSelectionBetween",o=>o(e,t,n))||qn.between(t,n,r)}function aB(e){return e.editable&&!e.hasFocus()?!1:WX(e)}function WX(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function O8e(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return vm(t.node,t.offset,n.anchorNode,n.anchorOffset)}function _6(e,t){let{$anchor:n,$head:r}=e.selection,o=t>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return s&&Vn.findFrom(s,t)}function r0(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function lB(e,t,n){let r=e.state.selection;if(r instanceof qn)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=e.state.doc.resolve(o.pos+s.nodeSize*(t<0?-1:1));return r0(e,new qn(r.$anchor,i))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let o=_6(e.state,t);return o&&o instanceof Nn?r0(e,o):!1}else if(!(Ec&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=t<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=e.docView.descAt(a))&&!i.contentDOM?Nn.isSelectable(s)?r0(e,new Nn(t<0?e.state.doc.resolve(o.pos-s.nodeSize):o)):Iw?r0(e,new qn(e.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Nn&&r.node.isInline)return r0(e,new qn(t>0?r.$to:r.$from));{let o=_6(e.state,t);return o?r0(e,o):!1}}}function VS(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Bv(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Zg(e,t){return t<0?P8e(e):L8e(e)}function P8e(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,s,i=!1;for(Dc&&n.nodeType==1&&r<VS(n)&&Bv(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Bv(a,-1))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(YX(n))break;{let a=n.previousSibling;for(;a&&Bv(a,-1);)o=n.parentNode,s=sa(a),a=a.previousSibling;if(a)n=a,r=VS(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}i?S6(e,n,r):o&&S6(e,o,s)}function L8e(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o=VS(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Bv(a,1))s=n,i=++r;else break}else{if(YX(n))break;{let a=n.nextSibling;for(;a&&Bv(a,1);)s=a.parentNode,i=sa(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=VS(n);else{if(n=n.parentNode,n==e.dom)break;r=o=0}}}s&&S6(e,s,i)}function YX(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function $8e(e,t){for(;e&&t==e.childNodes.length&&!Nw(e);)t=sa(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function F8e(e,t){for(;e&&!t&&!Nw(e);)t=sa(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function S6(e,t,n){if(t.nodeType!=3){let s,i;(i=$8e(t,n))?(t=i,n=0):(s=F8e(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(bC(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:o}=e;setTimeout(()=>{e.state==o&&jf(e)},50)}function cB(e,t){let n=e.state.doc.resolve(t);if(!(Vi||DX)&&n.parent.inlineContent){let o=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function uB(e,t,n){let r=e.state.selection;if(r instanceof qn&&!r.empty||n.indexOf("s")>-1||Ec&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let i=_6(e.state,t);if(i&&i instanceof Nn)return r0(e,i)}if(!o.parent.inlineContent){let i=t<0?o:s,a=r instanceof Kl?Vn.near(i,t):Vn.findFrom(i,t);return a?r0(e,a):!1}return!1}function dB(e,t){if(!(e.state.selection instanceof qn))return!0;let{$head:n,$anchor:r,empty:o}=e.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=e.state.tr;return t<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),e.dispatch(i),!0}return!1}function fB(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function B8e(e){if(!wa||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;fB(e,r,"true"),setTimeout(()=>fB(e,r,"false"),20)}return!1}function z8e(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function j8e(e,t){let n=t.keyCode,r=z8e(t);if(n==8||Ec&&n==72&&r=="c")return dB(e,-1)||Zg(e,-1);if(n==46&&!t.shiftKey||Ec&&n==68&&r=="c")return dB(e,1)||Zg(e,1);if(n==13||n==27)return!0;if(n==37||Ec&&n==66&&r=="c"){let o=n==37?cB(e,e.state.selection.from)=="ltr"?-1:1:-1;return lB(e,o,r)||Zg(e,o)}else if(n==39||Ec&&n==70&&r=="c"){let o=n==39?cB(e,e.state.selection.from)=="ltr"?1:-1:1;return lB(e,o,r)||Zg(e,o)}else{if(n==38||Ec&&n==80&&r=="c")return uB(e,-1,r)||Zg(e,-1);if(n==40||Ec&&n==78&&r=="c")return B8e(e)||uB(e,1,r)||Zg(e,1);if(r==(Ec?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function s7(e,t){e.someProp("transformCopied",g=>{t=g(t,e)});let n=[],{content:r,openStart:o,openEnd:s}=t;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let g=r.firstChild;n.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),r=g.content}let i=e.someProp("clipboardSerializer")||Pm.fromSchema(e.state.schema),a=eQ(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=QX[c.nodeName.toLowerCase()]);){for(let g=u.length-1;g>=0;g--){let y=a.createElement(u[g]);for(;l.firstChild;)y.appendChild(l.firstChild);l.appendChild(y),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let m=e.someProp("clipboardTextSerializer",g=>g(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:m,slice:t}}function KX(e,t,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!t)return null;let l=!!t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",m=>{t=m(t,s||r,e)}),s)return a=new Zt(bt.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",m=>{a=m(a,e,!0)}),a;let f=e.someProp("clipboardTextParser",m=>m(t,o,r,e));if(f)a=f;else{let m=o.marks(),{schema:g}=e.state,y=Pm.fromSchema(g);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(v=>{let w=i.appendChild(document.createElement("p"));v&&w.appendChild(y.serializeNode(g.text(v,m)))})}}else e.someProp("transformPastedHTML",f=>{n=f(n,e)}),i=q8e(n),Iw&&G8e(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let m=i.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;i=m}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||Lv.fromSchema(e.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!U8e.test(m.parentNode.nodeName)?{ignore:!0}:null}})),u)a=W8e(hB(a,+u[1],+u[2]),u[4]);else if(a=Zt.maxOpen(H8e(a.content,o),!0),a.openStart||a.openEnd){let f=0,m=0;for(let g=a.content.firstChild;f<a.openStart&&!g.type.spec.isolating;f++,g=g.firstChild);for(let g=a.content.lastChild;m<a.openEnd&&!g.type.spec.isolating;m++,g=g.lastChild);a=hB(a,f,m)}return e.someProp("transformPasted",f=>{a=f(a,e,l)}),a}const U8e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function H8e(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let o=t.node(n).contentMatchAt(t.index(n)),s,i=[];if(e.forEach(a=>{if(!i)return;let l=o.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&s.length&&JX(l,s,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=XX(i[i.length-1],s.length));let u=ZX(a,l);i.push(u),o=o.matchType(u.type),s=l}}),i)return bt.from(i)}return e}function ZX(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,bt.from(e));return e}function JX(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let s=JX(e,t,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(bt.from(ZX(n,e,o+1))))}}function XX(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,XX(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(bt.empty,!0);return e.copy(n.append(r))}function T6(e,t,n,r,o,s){let i=t<0?e.firstChild:e.lastChild,a=i.content;return e.childCount>1&&(s=0),o<r-1&&(a=T6(a,t,n,r,o+1,s)),o>=n&&(a=t<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(bt.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,i.copy(a))}function hB(e,t,n){return t<e.openStart&&(e=new Zt(T6(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Zt(T6(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const QX={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let pB=null;function eQ(){return pB||(pB=document.implementation.createHTMLDocument("title"))}let hk=null;function V8e(e){let t=window.trustedTypes;return t?(hk||(hk=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),hk.createHTML(e)):e}function q8e(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=eQ().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),o;if((o=r&&QX[r[1].toLowerCase()])&&(e=o.map(s=>"<"+s+">").join("")+e+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=V8e(e),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function G8e(e){let t=e.querySelectorAll(Vi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function W8e(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:o,openStart:s,openEnd:i}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=bt.from(l.create(r[a+1],o)),s++,i++}return new Zt(o,s,i)}const za={},ja={},Y8e={touchstart:!0,touchmove:!0};class K8e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Z8e(e){for(let t in za){let n=za[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{X8e(e,r)&&!i7(e,r)&&(e.editable||!(r.type in ja))&&n(e,r)},Y8e[t]?{passive:!0}:void 0)}wa&&e.dom.addEventListener("input",()=>null),C6(e)}function u0(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function J8e(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function C6(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>i7(e,r))})}function i7(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function X8e(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Q8e(e,t){!i7(e,t)&&za[t.type]&&(e.editable||!(t.type in ja))&&za[t.type](e,t)}ja.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!nQ(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Df&&Vi&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),rb&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",o=>o(e,Hp(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||j8e(e,n)?n.preventDefault():u0(e,"key")};ja.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};ja.keypress=(e,t)=>{let n=t;if(nQ(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ec&&n.metaKey)return;if(e.someProp("handleKeyPress",o=>o(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof qn)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!e.someProp("handleTextInput",i=>i(e,r.$from.pos,r.$to.pos,o,s))&&e.dispatch(s()),n.preventDefault()}};function vC(e){return{left:e.clientX,top:e.clientY}}function e7e(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function a7(e,t,n,r,o){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(e.someProp(t,a=>i>s.depth?a(e,n,s.nodeAfter,s.before(i),o,!0):a(e,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function R1(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function t7e(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Nn.isSelectable(r)?(R1(e,new Nn(n)),!0):!1}function n7e(e,t){if(t==-1)return!1;let n=e.state.selection,r,o;n instanceof Nn&&(r=n.node);let s=e.state.doc.resolve(t);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(Nn.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(R1(e,Nn.create(e.state.doc,o)),!0):!1}function r7e(e,t,n,r,o){return a7(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(o?n7e(e,n):t7e(e,n))}function o7e(e,t,n,r){return a7(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",o=>o(e,t,r))}function s7e(e,t,n,r){return a7(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",o=>o(e,t,r))||i7e(e,n,r)}function i7e(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(R1(e,qn.create(r,0,r.content.size)),!0):!1;let o=r.resolve(t);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)R1(e,qn.create(r,a+1,a+1+i.content.size));else if(Nn.isSelectable(i))R1(e,Nn.create(r,a));else continue;return!0}}function l7(e){return qS(e)}const tQ=Ec?"metaKey":"ctrlKey";za.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=l7(e),o=Date.now(),s="singleClick";o-e.input.lastClick.time<500&&e7e(n,e.input.lastClick)&&!n[tQ]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s,button:n.button};let i=e.posAtCoords(vC(n));i&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new a7e(e,i,n,!!r)):(s=="doubleClick"?o7e:s7e)(e,i.pos,i.inside,n)?n.preventDefault():u0(e,"pointer"))};class a7e{constructor(t,n,r,o){this.view=t,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[tQ],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),i=n.inside;else{let u=t.state.doc.resolve(n.pos);s=u.parent,i=u.depth?u.before():0}const a=o?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Nn&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Dc&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),u0(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>jf(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(vC(t))),this.updateAllowDefault(t),this.allowDefault||!n?u0(this.view,"pointer"):r7e(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||wa&&this.mightDrag&&!this.mightDrag.node.isAtom||Vi&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(R1(this.view,Vn.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):u0(this.view,"pointer")}move(t){this.updateAllowDefault(t),u0(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}za.touchstart=e=>{e.input.lastTouch=Date.now(),l7(e),u0(e,"pointer")};za.touchmove=e=>{e.input.lastTouch=Date.now(),u0(e,"pointer")};za.contextmenu=e=>l7(e);function nQ(e,t){return e.composing?!0:wa&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const l7e=Df?5e3:-1;ja.compositionstart=ja.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof qn&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Vi&&DX&&c7e(e)))e.markCursor=e.state.storedMarks||n.marks(),qS(e,!0),e.markCursor=null;else if(qS(e,!t.selection.empty),Dc&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){let a=e.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else o=i,s=-1}}e.input.composing=!0}rQ(e,l7e)};function c7e(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||t.nodeType!=1||n>=t.childNodes.length)return!1;let r=t.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}ja.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,rQ(e,20))};function rQ(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>qS(e),t))}function oQ(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=d7e());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function u7e(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=n8e(t.focusNode,t.focusOffset),r=r8e(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function d7e(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function qS(e,t=!1){if(!(Df&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),oQ(e),t||e.docView&&e.docView.dirty){let n=r7(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function f7e(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Dx=gl&&v0<15||rb&&a8e<604;za.copy=ja.cut=(e,t)=>{let n=t,r=e.state.selection,o=n.type=="cut";if(r.empty)return;let s=Dx?null:n.clipboardData,i=r.content(),{dom:a,text:l}=s7(e,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):f7e(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function h7e(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function p7e(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ox(e,r.value,null,o,t):Ox(e,r.textContent,r.innerHTML,o,t)},50)}function Ox(e,t,n,r,o){let s=KX(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,o,s||Zt.empty)))return!0;if(!s)return!1;let i=h7e(s),a=i?e.state.tr.replaceSelectionWith(i,r):e.state.tr.replaceSelection(s);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function sQ(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ja.paste=(e,t)=>{let n=t;if(e.composing&&!Df)return;let r=Dx?null:n.clipboardData,o=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Ox(e,sQ(r),r.getData("text/html"),o,n)?n.preventDefault():p7e(e,n)};class iQ{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const m7e=Ec?"altKey":"ctrlKey";function aQ(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[m7e]}za.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=e.state.selection,s=o.empty?null:e.posAtCoords(vC(n)),i;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof Nn?o.to-1:o.to))){if(r&&r.mightDrag)i=Nn.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=e.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(i=Nn.create(e.state.doc,f.posBefore))}}let a=(i||e.state.selection).content(),{dom:l,text:c,slice:u}=s7(e,a);(!n.dataTransfer.files.length||!Vi||MX>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Dx?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Dx||n.dataTransfer.setData("text/plain",c),e.dragging=new iQ(u,aQ(e,n),i)};za.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};ja.dragover=ja.dragenter=(e,t)=>t.preventDefault();ja.drop=(e,t)=>{try{g7e(e,t,e.dragging)}finally{e.dragging=null}};function g7e(e,t,n){if(!t.dataTransfer)return;let r=e.posAtCoords(vC(t));if(!r)return;let o=e.state.doc.resolve(r.pos),s=n&&n.slice;s?e.someProp("transformPasted",g=>{s=g(s,e,!1)}):s=KX(e,sQ(t.dataTransfer),Dx?null:t.dataTransfer.getData("text/html"),!1,o);let i=!!(n&&aQ(e,t));if(e.someProp("handleDrop",g=>g(e,t,s||Zt.empty,i))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?uX(e.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let l=e.state.tr;if(i){let{node:g}=n;g?g.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=l.doc;if(u?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(f))return;let m=l.doc.resolve(c);if(u&&Nn.isSelectable(s.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Nn(m));else{let g=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((y,v,w,_)=>g=_),l.setSelection(o7(e,m,l.doc.resolve(g)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}za.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&jf(e)},20))};za.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};za.beforeinput=(e,t)=>{if(Vi&&Df&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,Hp(8,"Backspace")))))return;let{$cursor:o}=e.state.selection;o&&o.pos>0&&e.dispatch(e.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let e in ja)za[e]=ja[e];function Px(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class GS{constructor(t,n){this.toDOM=t,this.spec=n||rm,this.side=this.spec.side||0}map(t,n,r,o){let{pos:s,deleted:i}=t.mapResult(n.from+o,this.side<0?-1:1);return i?null:new la(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof GS&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Px(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class w0{constructor(t,n){this.attrs=t,this.spec=n||rm}map(t,n,r,o){let s=t.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=t.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new la(s,i,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof w0&&Px(this.attrs,t.attrs)&&Px(this.spec,t.spec)}static is(t){return t.type instanceof w0}destroy(){}}class c7{constructor(t,n){this.attrs=t,this.spec=n||rm}map(t,n,r,o){let s=t.mapResult(n.from+o,1);if(s.deleted)return null;let i=t.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new la(s.pos-r,i.pos-r,this)}valid(t,n){let{index:r,offset:o}=t.content.findIndex(n.from),s;return o==n.from&&!(s=t.child(r)).isText&&o+s.nodeSize==n.to}eq(t){return this==t||t instanceof c7&&Px(this.attrs,t.attrs)&&Px(this.spec,t.spec)}destroy(){}}class la{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new la(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new la(t,t,new GS(n,r))}static inline(t,n,r,o){return new la(t,n,new w0(r,o))}static node(t,n,r,o){return new la(t,n,new c7(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof w0}get widget(){return this.type instanceof GS}}const s1=[],rm={};class us{constructor(t,n){this.local=t.length?t:s1,this.children=n.length?n:s1}static create(t,n){return n.length?WS(n,t,0,rm):ga}find(t,n,r){let o=[];return this.findInner(t??0,n??1e9,o,0,r),o}findInner(t,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=t&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>t){let a=this.children[i]+1;this.children[i+2].findInner(t-a,n-a,r,o+a,s)}}map(t,n,r){return this==ga||t.maps.length==0?this:this.mapInner(t,n,0,0,r||rm)}mapInner(t,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?b7e(this.children,i||[],t,n,r,o,s):i?new us(i.sort(om),s1):ga}add(t,n){return n.length?this==ga?us.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let o,s=0;t.forEach((a,l)=>{let c=l+r,u;if(u=cQ(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,u,c+1):o.splice(s,0,l,l+a.nodeSize,WS(u,a,c+1,rm)),s+=3}});let i=lQ(s?uQ(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(t,i[a])||i.splice(a--,1);return new us(i.length?this.local.concat(i).sort(om):this.local,o||this.children)}remove(t){return t.length==0||this==ga?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let u=0,f;u<t.length;u++)(f=t[u])&&f.from>a&&f.to<l&&(t[u]=null,(i||(i=[])).push(f));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=ga?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<t.length;s++)if(i=t[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new us(o,r):ga}forChild(t,n){if(this==ga)return this;if(n.isLeaf)return us.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let s=t+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof w0){let c=Math.max(s,l.from)-s,u=Math.min(i,l.to)-s;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new us(o.sort(om),s1);return r?new i0([a,r]):a}return r||ga}eq(t){if(this==t)return!0;if(!(t instanceof us)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return u7(this.localsInner(t))}localsInner(t){if(this==ga)return s1;if(t.inlineContent||!this.local.some(w0.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof w0||n.push(this.local[r]);return n}forEachSet(t){t(this)}}us.empty=new us([],[]);us.removeOverlap=u7;const ga=us.empty;class i0{constructor(t){this.members=t}map(t,n){const r=this.members.map(o=>o.map(t,n,rm));return i0.from(r)}forChild(t,n){if(n.isLeaf)return us.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(t,n);s!=ga&&(s instanceof i0?r=r.concat(s.members):r.push(s))}return i0.from(r)}eq(t){if(!(t instanceof i0)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?u7(r?n:n.sort(om)):s1}static from(t){switch(t.length){case 0:return ga;case 1:return t[0];default:return new i0(t.every(n=>n instanceof us)?t:t.reduce((n,r)=>n.concat(r instanceof us?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function b7e(e,t,n,r,o,s,i){let a=e.slice();for(let c=0,u=s;c<n.maps.length;c++){let f=0;n.maps[c].forEach((m,g,y,v)=>{let w=v-y-(g-m);for(let _=0;_<a.length;_+=3){let T=a[_+1];if(T<0||m>T+u-f)continue;let k=a[_]+u-f;g>=k?a[_+1]=m<=k?-2:-1:m>=u&&w&&(a[_]+=w,a[_+1]+=w)}f+=w}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(e[c]+s),f=u-o;if(f<0||f>=r.content.size){l=!0;continue}let m=n.map(e[c+1]+s,-1),g=m-o,{index:y,offset:v}=r.content.findIndex(f),w=r.maybeChild(y);if(w&&v==f&&v+w.nodeSize==g){let _=a[c+2].mapInner(n,w,u+1,e[c]+s+1,i);_!=ga?(a[c]=f,a[c+1]=g,a[c+2]=_):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=y7e(a,e,t,n,o,s,i),u=WS(c,r,0,i);t=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,m=0;f<u.children.length;f+=3){let g=u.children[f];for(;m<a.length&&a[m]<g;)m+=3;a.splice(m,0,u.children[f],u.children[f+1],u.children[f+2])}}return new us(t.sort(om),a)}function lQ(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new la(o.from+t,o.to+t,o.type))}return n}function y7e(e,t,n,r,o,s,i){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,o,c);f?n.push(f):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+s+1);return n}function cQ(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let s=0,i;s<e.length;s++)(i=e[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),e[s]=null);return o}function uQ(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function WS(e,t,n,r){let o=[],s=!1;t.forEach((a,l)=>{let c=cQ(e,a,l+n);if(c){s=!0;let u=WS(c,a,n+l+1,r);u!=ga&&o.push(l,l+a.nodeSize,u)}});let i=lQ(s?uQ(e):e,-n).sort(om);for(let a=0;a<i.length;a++)i[a].type.valid(t,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new us(i,o):ga}function om(e,t){return e.from-t.from||e.to-t.to}function u7(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let s=t[o];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[o]=s.copy(s.from,r.to),mB(t,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),mB(t,o,r.copy(s.from,r.to)));break}}}return t}function mB(e,t,n){for(;t<e.length&&om(n,e[t])>0;)t++;e.splice(t,0,n)}function pk(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=ga&&t.push(r)}),e.cursorWrapper&&t.push(us.create(e.state.doc,[e.cursorWrapper.deco])),i0.from(t)}const v7e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},x7e=gl&&v0<=11;class w7e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class E7e{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new w7e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);gl&&v0<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),x7e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,v7e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(aB(this.view)){if(this.suppressingSelectionUpdates)return jf(this.view);if(gl&&v0<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&vm(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=nb(s))n.add(s);for(let s=t.anchorNode;s;s=nb(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&aB(t)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(t.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],l);f&&(s=s<0?f.from:Math.min(f.from,s),i=i<0?f.to:Math.max(f.to,i),f.typeOver&&(a=!0))}if(Dc&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,m]=u;f.parentNode&&f.parentNode.parentNode==m.parentNode?m.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let m of u){let g=m.parentNode;g&&g.nodeName=="LI"&&(!f||T7e(t,f)!=g)&&m.remove()}}}else if((Vi||wa)&&l.some(u=>u.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let f=u.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;s<0&&o&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&bC(r)&&(c=r7(t))&&c.eq(Vn.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,jf(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||o)&&(s>-1&&(t.docView.markDirty(s,i),_7e(t)),this.handleDOMChange(s,i,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||jf(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let f=t.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let o=t.previousSibling,s=t.nextSibling;if(gl&&v0<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:f,nextSibling:m}=t.addedNodes[u];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(o=f),(!m||Array.prototype.indexOf.call(t.addedNodes,m)<0)&&(s=m)}let i=o&&o.parentNode==t.target?sa(o)+1:0,a=r.localPosFromDOM(t.target,i,-1),l=s&&s.parentNode==t.target?sa(s):t.target.childNodes.length,c=r.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let gB=new WeakMap,bB=!1;function _7e(e){if(!gB.has(e)&&(gB.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Dc,bB)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),bB=!0}}function yB(e,t){let n=t.startContainer,r=t.startOffset,o=t.endContainer,s=t.endOffset,i=e.domAtPos(e.state.selection.anchor);return vm(i.node,i.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function S7e(e,t){if(t.getComposedRanges){let o=t.getComposedRanges(e.root)[0];if(o)return yB(e,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?yB(e,n):null}function T7e(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function C7e(e,t,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),c,u=l.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],bC(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Vi&&e.input.lastKeyCode===8)for(let w=s;w>o;w--){let _=r.childNodes[w-1],T=_.pmViewDesc;if(_.nodeName=="BR"&&!T){s=w;break}if(!T||T.size)break}let f=e.state.doc,m=e.someProp("domParser")||Lv.fromSchema(e.state.schema),g=f.resolve(i),y=null,v=m.parse(r,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:o,to:s,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:k7e,context:g});if(c&&c[0].pos!=null){let w=c[0].pos,_=c[1]&&c[1].pos;_==null&&(_=w),y={anchor:w+i,head:_+i}}return{doc:v,sel:y,from:i,to:a}}function k7e(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(wa&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||wa&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const A7e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function N7e(e,t,n,r,o){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let P=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,B=r7(e,P);if(B&&!e.state.selection.eq(B)){if(Vi&&Df&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",j=>j(e,Hp(13,"Enter"))))return;let U=e.state.tr.setSelection(B);P=="pointer"?U.setMeta("pointer",!0):P=="key"&&U.scrollIntoView(),s&&U.setMeta("composition",s),e.dispatch(U)}return}let i=e.state.doc.resolve(t),a=i.sharedDepth(n);t=i.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,c=C7e(e,t,n),u=e.state.doc,f=u.slice(c.from,c.to),m,g;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(m=e.state.selection.to,g="end"):(m=e.state.selection.from,g="start"),e.input.lastKeyCode=null;let y=M7e(f.content,c.doc.content,c.from,m,g);if(y&&e.input.domChangeCount++,(rb&&e.input.lastIOSEnter>Date.now()-225||Df)&&o.some(P=>P.nodeType==1&&!A7e.test(P.nodeName))&&(!y||y.endA>=y.endB)&&e.someProp("handleKeyDown",P=>P(e,Hp(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!y)if(r&&l instanceof qn&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))y={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let P=vB(e,e.state.doc,c.sel);if(P&&!P.eq(e.state.selection)){let B=e.state.tr.setSelection(P);s&&B.setMeta("composition",s),e.dispatch(B)}}return}e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof qn&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),gl&&v0<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>c.from&&c.doc.textBetween(y.start-c.from-1,y.start-c.from+1)==" "&&(y.start--,y.endA--,y.endB--);let v=c.doc.resolveNoCache(y.start-c.from),w=c.doc.resolveNoCache(y.endB-c.from),_=u.resolve(y.start),T=v.sameParent(w)&&v.parent.inlineContent&&_.end()>=y.endA;if((rb&&e.input.lastIOSEnter>Date.now()-225&&(!T||o.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!T&&v.pos<c.doc.content.size&&(!v.sameParent(w)||!v.parent.inlineContent)&&v.pos<w.pos&&!/\S/.test(c.doc.textBetween(v.pos,w.pos,"","")))&&e.someProp("handleKeyDown",P=>P(e,Hp(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>y.start&&R7e(u,y.start,y.endA,v,w)&&e.someProp("handleKeyDown",P=>P(e,Hp(8,"Backspace")))){Df&&Vi&&e.domObserver.suppressSelectionUpdates();return}Vi&&y.endB==y.start&&(e.input.lastChromeDelete=Date.now()),Df&&!T&&v.start()!=w.start()&&w.parentOffset==0&&v.depth==w.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==y.endA&&(y.endB-=2,w=c.doc.resolveNoCache(y.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(P){return P(e,Hp(13,"Enter"))})},20));let k=y.start,M=y.endA,D=P=>{let B=P||e.state.tr.replace(k,M,c.doc.slice(y.start-c.from,y.endB-c.from));if(c.sel){let U=vB(e,B.doc,c.sel);U&&!(Vi&&e.composing&&U.empty&&(y.start!=y.endB||e.input.lastChromeDelete<Date.now()-100)&&(U.head==k||U.head==B.mapping.map(M)-1)||gl&&U.empty&&U.head==k)&&B.setSelection(U)}return s&&B.setMeta("composition",s),B.scrollIntoView()},I;if(T)if(v.pos==w.pos){gl&&v0<=11&&v.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>jf(e),20));let P=D(e.state.tr.delete(k,M)),B=u.resolve(y.start).marksAcross(u.resolve(y.endA));B&&P.ensureMarks(B),e.dispatch(P)}else if(y.endA==y.endB&&(I=I7e(v.parent.content.cut(v.parentOffset,w.parentOffset),_.parent.content.cut(_.parentOffset,y.endA-_.start())))){let P=D(e.state.tr);I.type=="add"?P.addMark(k,M,I.mark):P.removeMark(k,M,I.mark),e.dispatch(P)}else if(v.parent.child(v.index()).isText&&v.index()==w.index()-(w.textOffset?0:1)){let P=v.parent.textBetween(v.parentOffset,w.parentOffset),B=()=>D(e.state.tr.insertText(P,k,M));e.someProp("handleTextInput",U=>U(e,k,M,P,B))||e.dispatch(B())}else e.dispatch(D());else e.dispatch(D())}function vB(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:o7(e,t.resolve(n.anchor),t.resolve(n.head))}function I7e(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,o=n,s=r,i,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(bt.from(c).eq(e))return{mark:a,type:i}}function R7e(e,t,n,r,o){if(n-t<=o.pos-r.pos||mk(r,!0,!1)<o.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==t+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=e.resolve(mk(s,!0,!0));return!i.parent.isTextblock||i.pos>n||mk(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function mk(e,t,n){let r=e.depth,o=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function M7e(e,t,n,r,o){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:i,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&e.size<t.size){let l=r<=s&&r>=i?s-r:0;s-=l,s&&s<t.size&&xB(t.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<e.size&&xB(e.textBetween(s-1,s+1))&&(s+=l?1:-1),i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}function xB(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class dQ{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new K8e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(TB),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=_B(this),EB(this),this.nodeViews=SB(this),this.docView=tB(this.state.doc,wB(this),pk(this),this.dom,this),this.domObserver=new E7e(this,(r,o,s,i)=>N7e(this,r,o,s,i)),this.domObserver.start(),Z8e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&C6(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(TB),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let o=this.state,s=!1,i=!1;t.storedMarks&&this.composing&&(oQ(this),i=!0),this.state=t;let a=o.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let g=SB(this);O7e(g,this.nodeViews)&&(this.nodeViews=g,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&C6(this),this.editable=_B(this),EB(this);let l=pk(this),c=wB(this),u=o.plugins!=t.plugins&&!o.doc.eq(t.doc)?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(t.doc,c,l);(f||!t.selection.eq(o.selection))&&(i=!0);let m=u=="preserve"&&i&&this.dom.style.overflowAnchor==null&&u8e(this);if(i){this.domObserver.stop();let g=f&&(gl||Vi)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&D7e(o.selection,t.selection);if(f){let y=Vi?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=u7e(this)),(s||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=tB(t.doc,c,l,this.dom,this)),y&&!this.trackWrites&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&O8e(this))?jf(this,g):(GX(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():m&&d8e(m)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Nn){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&KF(this,n.getBoundingClientRect(),t)}else KF(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new iQ(t.slice,t.move,o<0?void 0:Nn.create(this.state.doc,o))}someProp(t,n){let r=this._props&&this._props[t],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[t];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[t];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(gl){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&f8e(this.dom),jf(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return b8e(this,t)}coordsAtPos(t,n=1){return FX(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let o=this.docView.posFromDOM(t,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(t,n){return E8e(this,n||this.state,t)}pasteHTML(t,n){return Ox(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Ox(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return s7(this,t)}destroy(){this.docView&&(J8e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],pk(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,e8e())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Q8e(this,t)}domSelectionRange(){let t=this.domSelection();return t?wa&&this.root.nodeType===11&&s8e(this.dom.ownerDocument)==this.dom&&S7e(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}dQ.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function wB(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[la.node(0,e.state.doc.content.size,t)]}function EB(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:la.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function _B(e){return!e.someProp("editable",t=>t(e.state)===!1)}function D7e(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function SB(e){let t=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(t,o)||(t[o]=r[o])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function O7e(e,t){let n=0,r=0;for(let o in e){if(e[o]!=t[o])return!0;n++}for(let o in t)r++;return n!=r}function TB(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var N0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},YS={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},P7e=typeof navigator<"u"&&/Mac/.test(navigator.platform),L7e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ia=0;ia<10;ia++)N0[48+ia]=N0[96+ia]=String(ia);for(var ia=1;ia<=24;ia++)N0[ia+111]="F"+ia;for(var ia=65;ia<=90;ia++)N0[ia]=String.fromCharCode(ia+32),YS[ia]=String.fromCharCode(ia);for(var gk in N0)YS.hasOwnProperty(gk)||(YS[gk]=N0[gk]);function $7e(e){var t=P7e&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||L7e&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?YS:N0)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const F7e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),B7e=typeof navigator<"u"&&/Win/.test(navigator.platform);function z7e(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))F7e?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function j7e(e){let t=Object.create(null);for(let n in e)t[z7e(n)]=e[n];return t}function bk(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function U7e(e){return new vo({props:{handleKeyDown:d7(e)}})}function d7(e){let t=j7e(e);return function(n,r){let o=$7e(r),s,i=t[bk(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=t[bk(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(B7e&&r.ctrlKey&&r.altKey)&&(s=N0[r.keyCode])&&s!=o){let a=t[bk(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var H7e=Object.defineProperty,f7=(e,t)=>{for(var n in t)H7e(e,n,{get:t[n],enumerable:!0})};function xC(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}var wC=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:o}=n,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([i,a])=>[i,(...c)=>{const u=a(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(o),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:o}=this,{view:s}=r,i=[],a=!!e,l=e||o.tr,c=()=>(!a&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),i.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(n).map(([f,m])=>[f,(...y)=>{const v=this.buildProps(l,t),w=m(...y)(v);return i.push(w),u}])),run:c};return u}createCan(e){const{rawCommands:t,state:n}=this,r=!1,o=e||n.tr,s=this.buildProps(o,r);return{...Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:o}=this,{view:s}=r,i={tr:e,editor:r,view:s,state:xC({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(i)]))}};return i}},fQ={};f7(fQ,{blur:()=>V7e,clearContent:()=>q7e,clearNodes:()=>G7e,command:()=>W7e,createParagraphNear:()=>Y7e,cut:()=>K7e,deleteCurrentNode:()=>Z7e,deleteNode:()=>J7e,deleteRange:()=>X7e,deleteSelection:()=>Q7e,enter:()=>eMe,exitCode:()=>tMe,extendMarkRange:()=>nMe,first:()=>rMe,focus:()=>oMe,forEach:()=>sMe,insertContent:()=>iMe,insertContentAt:()=>cMe,joinBackward:()=>fMe,joinDown:()=>dMe,joinForward:()=>hMe,joinItemBackward:()=>pMe,joinItemForward:()=>mMe,joinTextblockBackward:()=>gMe,joinTextblockForward:()=>bMe,joinUp:()=>uMe,keyboardShortcut:()=>vMe,lift:()=>xMe,liftEmptyBlock:()=>wMe,liftListItem:()=>EMe,newlineInCode:()=>_Me,resetAttributes:()=>SMe,scrollIntoView:()=>TMe,selectAll:()=>CMe,selectNodeBackward:()=>kMe,selectNodeForward:()=>AMe,selectParentNode:()=>NMe,selectTextblockEnd:()=>IMe,selectTextblockStart:()=>RMe,setContent:()=>MMe,setMark:()=>JMe,setMeta:()=>XMe,setNode:()=>QMe,setNodeSelection:()=>e9e,setTextDirection:()=>t9e,setTextSelection:()=>n9e,sinkListItem:()=>r9e,splitBlock:()=>o9e,splitListItem:()=>s9e,toggleList:()=>i9e,toggleMark:()=>a9e,toggleNode:()=>l9e,toggleWrap:()=>c9e,undoInputRule:()=>u9e,unsetAllMarks:()=>d9e,unsetMark:()=>f9e,unsetTextDirection:()=>h9e,updateAttributes:()=>p9e,wrapIn:()=>m9e,wrapInList:()=>g9e});var V7e=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),q7e=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),G7e=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:i})=>{e.doc.nodesBetween(s.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=t,f=c.resolve(u.map(l)),m=c.resolve(u.map(l+a.nodeSize)),g=f.blockRange(m);if(!g)return;const y=Ib(g);if(a.type.isTextblock){const{defaultType:v}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(g.start,v)}(y||y===0)&&t.lift(g,y)})}),!0},W7e=e=>t=>e(t),Y7e=()=>({state:e,dispatch:t})=>kX(e,t),K7e=(e,t)=>({editor:n,tr:r})=>{const{state:o}=n,s=o.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const i=r.mapping.map(t);return r.insert(i,s.content),r.setSelection(new qn(r.doc.resolve(Math.max(i-1,0)))),!0},Z7e=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(t){const a=o.before(s),l=o.after(s);e.delete(a,l).scrollIntoView()}return!0}return!1};function gi(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var J7e=e=>({tr:t,state:n,dispatch:r})=>{const o=gi(e,n.schema),s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(r){const l=s.before(i),c=s.after(i);t.delete(l,c).scrollIntoView()}return!0}return!1},X7e=e=>({tr:t,dispatch:n})=>{const{from:r,to:o}=e;return n&&t.delete(r,o),!0},Q7e=()=>({state:e,dispatch:t})=>J8(e,t),eMe=()=>({commands:e})=>e.keyboardShortcut("Enter"),tMe=()=>({state:e,dispatch:t})=>BRe(e,t);function h7(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function KS(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(o=>n.strict?t[o]===e[o]:h7(t[o])?t[o].test(e[o]):t[o]===e[o]):!0}function hQ(e,t,n={}){return e.find(r=>r.type===t&&KS(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function CB(e,t,n={}){return!!hQ(e,t,n)}function EC(e,t,n){var r;if(!e||!t)return;let o=e.parent.childAfter(e.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===t))&&(o=e.parent.childBefore(e.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===t)||(n=n||((r=o.node.marks[0])==null?void 0:r.attrs),!hQ([...o.node.marks],t,n)))return;let i=o.index,a=e.start()+o.offset,l=i+1,c=a+o.node.nodeSize;for(;i>0&&CB([...e.parent.child(i-1).marks],t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;l<e.parent.childCount&&CB([...e.parent.child(l).marks],t,n);)c+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function oh(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var nMe=(e,t={})=>({tr:n,state:r,dispatch:o})=>{const s=oh(e,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const f=EC(l,s,t);if(f&&f.from<=c&&f.to>=u){const m=qn.create(i,f.from,f.to);n.setSelection(m)}}return!0},rMe=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function p7(e){return e instanceof qn}function Of(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function pQ(e,t=null){if(!t)return null;const n=Vn.atStart(e),r=Vn.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const o=n.from,s=r.to;return t==="all"?qn.create(e,Of(0,o,s),Of(e.content.size,o,s)):qn.create(e,Of(t,o,s),Of(t,o,s))}function mQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function _C(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var oMe=(e=null,t={})=>({editor:n,view:r,tr:o,dispatch:s})=>{t={scrollIntoView:!0,...t};const i=()=>{(_C()||mQ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!p7(n.state.selection))return i(),!0;const a=pQ(o.doc,e)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0},sMe=(e,t)=>n=>e.every((r,o)=>t(r,{...n,index:o})),iMe=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),gQ=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&gQ(r)}return e};function C2(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return gQ(n)}function Lx(e,t,n){if(e instanceof y0||e instanceof bt)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,o=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return bt.fromArray(e.map(a=>t.nodeFromJSON(a)));const i=t.nodeFromJSON(e);return n.errorOnInvalidContent&&i.check(),i}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),Lx("",t,n)}if(o){if(n.errorOnInvalidContent){let i=!1,a="";const l=new QJ({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Lv.fromSchema(l).parseSlice(C2(e),n.parseOptions):Lv.fromSchema(l).parse(C2(e),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Lv.fromSchema(t);return n.slice?s.parseSlice(C2(e),n.parseOptions).content:s.parse(C2(e),n.parseOptions)}return Lx("",t,n)}function aMe(e,t,n){const r=e.steps.length-1;if(r<t)return;const o=e.steps[r];if(!(o instanceof Ri||o instanceof qi))return;const s=e.mapping.maps[r];let i=0;s.forEach((a,l,c,u)=>{i===0&&(i=u)}),e.setSelection(Vn.near(e.doc.resolve(i),n))}var lMe=e=>!("type"in e),cMe=(e,t,n)=>({tr:r,dispatch:o,editor:s})=>{var i;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Lx(t,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(w){l(w)}try{a=Lx(t,s.schema,{parseOptions:c,errorOnInvalidContent:(i=n.errorOnInvalidContent)!=null?i:s.options.enableContentCheck})}catch(w){return l(w),!1}let{from:u,to:f}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},m=!0,g=!0;if((lMe(a)?a:[a]).forEach(w=>{w.check(),m=m?w.isText&&w.marks.length===0:!1,g=g?w.isBlock:!1}),u===f&&g){const{parent:w}=r.doc.resolve(u);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(u-=1,f+=1)}let v;if(m){if(Array.isArray(t))v=t.map(w=>w.text||"").join("");else if(t instanceof bt){let w="";t.forEach(_=>{_.text&&(w+=_.text)}),v=w}else typeof t=="object"&&t&&t.text?v=t.text:v=t;r.insertText(v,u,f)}else{v=a;const w=r.doc.resolve(u),_=w.node(),T=w.parentOffset===0,k=_.isText||_.isTextblock,M=_.content.size>0;T&&k&&M&&(u=Math.max(0,u-1)),r.replaceWith(u,f,v)}n.updateSelection&&aMe(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:v}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:v})}return!0},uMe=()=>({state:e,dispatch:t})=>LRe(e,t),dMe=()=>({state:e,dispatch:t})=>$Re(e,t),fMe=()=>({state:e,dispatch:t})=>xX(e,t),hMe=()=>({state:e,dispatch:t})=>SX(e,t),pMe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=pC(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},mMe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=pC(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},gMe=()=>({state:e,dispatch:t})=>ORe(e,t),bMe=()=>({state:e,dispatch:t})=>PRe(e,t);function bQ(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function yMe(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))_C()||bQ()?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var vMe=e=>({editor:t,view:n,tr:r,dispatch:o})=>{const s=yMe(e).split(/-(?!$)/),i=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function I0(e,t,n={}){const{from:r,to:o,empty:s}=e.selection,i=t?gi(t,e.schema):null,a=[];e.doc.nodesBetween(r,o,(f,m)=>{if(f.isText)return;const g=Math.max(r,m),y=Math.min(o,m+f.nodeSize);a.push({node:f,from:g,to:y})});const l=o-r,c=a.filter(f=>i?i.name===f.node.type.name:!0).filter(f=>KS(f.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((f,m)=>f+m.to-m.from,0)>=l}var xMe=(e,t={})=>({state:n,dispatch:r})=>{const o=gi(e,n.schema);return I0(n,o,t)?FRe(n,r):!1},wMe=()=>({state:e,dispatch:t})=>AX(e,t),EMe=e=>({state:t,dispatch:n})=>{const r=gi(e,t.schema);return ZRe(r)(t,n)},_Me=()=>({state:e,dispatch:t})=>CX(e,t);function SC(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function kB(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,o)=>(n.includes(o)||(r[o]=e[o]),r),{})}var SMe=(e,t)=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=SC(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=gi(e,r.schema)),a==="mark"&&(i=oh(e,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,f)=>{s&&s===u.type&&(l=!0,o&&n.setNodeMarkup(f,void 0,kB(u.attrs,t))),i&&u.marks.length&&u.marks.forEach(m=>{i===m.type&&(l=!0,o&&n.addMark(f,f+u.nodeSize,i.create(kB(m.attrs,t))))})})}),l},TMe=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),CMe=()=>({tr:e,dispatch:t})=>{if(t){const n=new Kl(e.doc);e.setSelection(n)}return!0},kMe=()=>({state:e,dispatch:t})=>EX(e,t),AMe=()=>({state:e,dispatch:t})=>TX(e,t),NMe=()=>({state:e,dispatch:t})=>URe(e,t),IMe=()=>({state:e,dispatch:t})=>qRe(e,t),RMe=()=>({state:e,dispatch:t})=>VRe(e,t);function k6(e,t,n={},r={}){return Lx(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var MMe=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:o,tr:s,dispatch:i,commands:a})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const c=k6(e,o.schema,r,{errorOnInvalidContent:t??o.options.enableContentCheck});return i&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return i&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:t??o.options.enableContentCheck})};function yQ(e,t){const n=oh(t,e.schema),{from:r,to:o,empty:s}=e.selection,i=[];s?(e.storedMarks&&i.push(...e.storedMarks),i.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,o,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function vQ(e,t){const n=new mX(e);return t.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function DMe(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function A6(e,t){const n=[];return e.descendants((r,o)=>{t(r)&&n.push({node:r,pos:o})}),n}function OMe(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(o,s)=>{n(o)&&r.push({node:o,pos:s})}),r}function PMe(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function TC(e){return t=>PMe(t.$from,e)}function Dn(e,t,n){return e.config[t]===void 0&&e.parent?Dn(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?Dn(e.parent,t,n):null}):e.config[t]}function m7(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=Dn(t,"addExtensions",n);return r?[t,...m7(r())]:t}).flat(10)}function g7(e,t){const n=Pm.fromSchema(t).serializeFragment(e),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}function xQ(e){return typeof e=="function"}function So(e,t=void 0,...n){return xQ(e)?t?e.bind(t)(...n):e(...n):e}function LMe(e={}){return Object.keys(e).length===0&&e.constructor===Object}function ob(e){const t=e.filter(o=>o.type==="extension"),n=e.filter(o=>o.type==="node"),r=e.filter(o=>o.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function wQ(e){const t=[],{nodeExtensions:n,markExtensions:r}=ob(e),o=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:o},l=Dn(i,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([m,g])=>{t.push({type:f,name:m,attribute:{...s,...g}})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=Dn(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,f])=>{const m={...s,...f};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,t.push({type:i.name,name:u,attribute:m})})}),t}function Ms(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const a=s?String(s).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(u=>!l.includes(u));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[f,m]=u.split(":").map(g=>g.trim());c.set(f,m)}),a.forEach(u=>{const[f,m]=u.split(":").map(g=>g.trim());c.set(f,m)}),r[o]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[o]=s}),r},{})}function $x(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Ms(n,r),{})}function $Me(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function AB(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const o=t.reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):$Me(n.getAttribute(i.name));return a==null?s:{...s,[i.name]:a}},{});return{...r,...o}}}}function NB(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&LMe(n)?!1:n!=null))}function IB(e){var t,n;const r={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(r.default=e.attribute.default),((n=e==null?void 0:e.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=e.attribute.validate),[e.name,r]}function FMe(e,t){var n;const r=wQ(e),{nodeExtensions:o,markExtensions:s}=ob(e),i=(n=o.find(c=>Dn(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(_=>_.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},m=e.reduce((_,T)=>{const k=Dn(T,"extendNodeSchema",f);return{..._,...k?k(c):{}}},{}),g=NB({...m,content:So(Dn(c,"content",f)),marks:So(Dn(c,"marks",f)),group:So(Dn(c,"group",f)),inline:So(Dn(c,"inline",f)),atom:So(Dn(c,"atom",f)),selectable:So(Dn(c,"selectable",f)),draggable:So(Dn(c,"draggable",f)),code:So(Dn(c,"code",f)),whitespace:So(Dn(c,"whitespace",f)),linebreakReplacement:So(Dn(c,"linebreakReplacement",f)),defining:So(Dn(c,"defining",f)),isolating:So(Dn(c,"isolating",f)),attrs:Object.fromEntries(u.map(IB))}),y=So(Dn(c,"parseHTML",f));y&&(g.parseDOM=y.map(_=>AB(_,u)));const v=Dn(c,"renderHTML",f);v&&(g.toDOM=_=>v({node:_,HTMLAttributes:$x(_,u)}));const w=Dn(c,"renderText",f);return w&&(g.toText=w),[c.name,g]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(w=>w.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:t},m=e.reduce((w,_)=>{const T=Dn(_,"extendMarkSchema",f);return{...w,...T?T(c):{}}},{}),g=NB({...m,inclusive:So(Dn(c,"inclusive",f)),excludes:So(Dn(c,"excludes",f)),group:So(Dn(c,"group",f)),spanning:So(Dn(c,"spanning",f)),code:So(Dn(c,"code",f)),attrs:Object.fromEntries(u.map(IB))}),y=So(Dn(c,"parseHTML",f));y&&(g.parseDOM=y.map(w=>AB(w,u)));const v=Dn(c,"renderHTML",f);return v&&(g.toDOM=w=>v({mark:w,HTMLAttributes:$x(w,u)})),[c.name,g]}));return new QJ({topNode:i,nodes:a,marks:l})}function BMe(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function b7(e){return e.sort((n,r)=>{const o=Dn(n,"priority")||100,s=Dn(r,"priority")||100;return o>s?-1:o<s?1:0})}function EQ(e){const t=b7(m7(e)),n=BMe(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function _Q(e,t,n){const{from:r,to:o}=t,{blockSeparator:s=`

`,textSerializers:i={}}=n||{};let a="";return e.nodesBetween(r,o,(l,c,u,f)=>{var m;l.isBlock&&c>r&&(a+=s);const g=i==null?void 0:i[l.type.name];if(g)return u&&(a+=g({node:l,pos:c,parent:u,index:f,range:t})),!1;l.isText&&(a+=(m=l==null?void 0:l.text)==null?void 0:m.slice(Math.max(r,c)-c,o-c))}),a}function SQ(e,t){const n={from:0,to:e.content.size};return _Q(e,n,t)}function y7(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function zMe(e,t){const n=gi(t,e.schema),{from:r,to:o}=e.selection,s=[];e.doc.nodesBetween(r,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function TQ(e,t){const n=SC(typeof t=="string"?t:t.name,e.schema);return n==="node"?zMe(e,t):n==="mark"?yQ(e,t):{}}function jMe(e,t=JSON.stringify){const n={};return e.filter(r=>{const o=t(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function UMe(e){const t=jMe(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,i)=>i!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function CQ(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((o,s)=>{const i=[];if(o.ranges.length)o.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=t.slice(s).map(a,-1),u=t.slice(s).map(l),f=t.invert().map(c,-1),m=t.invert().map(u);r.push({oldRange:{from:f,to:m},newRange:{from:c,to:u}})})}),UMe(r)}function v7(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(o=>{const s=n.resolve(e),i=EC(s,o.type);i&&r.push({mark:o,...i})}):n.nodesBetween(e,t,(o,s)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),r}var HMe=(e,t,n,r=20)=>{const o=e.doc.resolve(n);let s=r,i=null;for(;s>0&&i===null;){const a=o.node(s);(a==null?void 0:a.type.name)===t?i=a:s-=1}return[i,s]};function yk(e,t){return t.nodes[e]||t.marks[e]||null}function I_(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=e.find(s=>s.type===t&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}var VMe=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(o,s,i,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)==null?void 0:c.call(l,{node:o,pos:s,parent:i,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-s))}),n};function N6(e,t,n={}){const{empty:r,ranges:o}=e.selection,s=t?oh(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>KS(f.attrs,n,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:f,$to:m})=>{const g=f.pos,y=m.pos;e.doc.nodesBetween(g,y,(v,w)=>{if(!v.isText&&!v.marks.length)return;const _=Math.max(g,w),T=Math.min(y,w+v.nodeSize),k=T-_;i+=k,a.push(...v.marks.map(M=>({mark:M,from:_,to:T})))})}),i===0)return!1;const l=a.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>KS(f.mark.attrs,n,{strict:!1})).reduce((f,m)=>f+m.to-m.from,0),c=a.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,m)=>f+m.to-m.from,0);return(l>0?l+c:l)>=i}function qMe(e,t,n={}){if(!t)return I0(e,null,n)||N6(e,null,n);const r=SC(t,e.schema);return r==="node"?I0(e,t,n):r==="mark"?N6(e,t,n):!1}var GMe=(e,t)=>{const{$from:n,$to:r,$anchor:o}=e.selection;if(t){const s=TC(a=>a.type.name===t)(e.selection);if(!s)return!1;const i=e.doc.resolve(s.pos+1);return o.pos+1===i.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},WMe=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function RB(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function MB(e,t){const{nodeExtensions:n}=ob(t),r=n.find(i=>i.name===e);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=So(Dn(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function CC(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let o=!0;return e.content.forEach(s=>{o!==!1&&(CC(s,{ignoreWhitespace:n,checkChildren:t})||(o=!1))}),o}return!1}function kQ(e){return e instanceof Nn}var AQ=class NQ{constructor(t){this.position=t}static fromJSON(t){return new NQ(t.position)}toJSON(){return{position:this.position}}};function YMe(e,t){const n=t.mapping.mapResult(e.position);return{position:new AQ(n.pos),mapResult:n}}function KMe(e){return new AQ(e)}function IQ(e,t,n){const o=e.state.doc.content.size,s=Of(t,0,o),i=Of(n,0,o),a=e.coordsAtPos(s),l=e.coordsAtPos(i,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),m=Math.max(a.right,l.right),g=m-f,y=u-c,_={top:c,bottom:u,left:f,right:m,width:g,height:y,x:f,y:c};return{..._,toJSON:()=>_}}function ZMe(e,t,n){var r;const{selection:o}=t;let s=null;if(p7(o)&&(s=o.$cursor),s){const a=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:i}=o;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(u,f,m)=>{if(c)return!1;if(u.isInline){const g=!m||m.type.allowsMarkType(n),y=!!n.isInSet(u.marks)||!u.marks.some(v=>v.type.excludes(n));c=g&&y}return!c}),c})}var JMe=(e,t={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:i,ranges:a}=s,l=oh(e,r.schema);if(o)if(i){const c=yQ(r,l);n.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(m,g)=>{const y=Math.max(g,u),v=Math.min(g+m.nodeSize,f);m.marks.find(_=>_.type===l)?m.marks.forEach(_=>{l===_.type&&n.addMark(y,v,l.create({..._.attrs,...t}))}):n.addMark(y,v,l.create(t))})});return ZMe(r,n,l)},XMe=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),QMe=(e,t={})=>({state:n,dispatch:r,chain:o})=>{const s=gi(e,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:a})=>GF(s,{...i,...t})(n)?!0:a.clearNodes()).command(({state:a})=>GF(s,{...i,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},e9e=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,o=Of(e,0,r.content.size),s=Nn.create(r,o);t.setSelection(s)}return!0},t9e=(e,t)=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=r;let i,a;return typeof t=="number"?(i=t,a=t):t&&"from"in t&&"to"in t?(i=t.from,a=t.to):(i=s.from,a=s.to),o&&n.doc.nodesBetween(i,a,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:e})}),!0},n9e=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:o,to:s}=typeof e=="number"?{from:e,to:e}:e,i=qn.atStart(r).from,a=qn.atEnd(r).to,l=Of(o,i,a),c=Of(s,i,a),u=qn.create(r,l,c);t.setSelection(u)}return!0},r9e=e=>({state:t,dispatch:n})=>{const r=gi(e,t.schema);return QRe(r)(t,n)};function DB(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(o=>t==null?void 0:t.includes(o.type.name));e.tr.ensureMarks(r)}}var o9e=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:i}=t,{$from:a,$to:l}=s,c=o.extensionManager.attributes,u=I_(c,a.node().type.name,a.node().attrs);if(s instanceof Nn&&s.node.isBlock)return!a.parentOffset||!zf(i,a.pos)?!1:(r&&(e&&DB(n,o.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,m=a.depth===0?void 0:DMe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let g=f&&m?[{type:m,attrs:u}]:void 0,y=zf(t.doc,t.mapping.map(a.pos),1,g);if(!g&&!y&&zf(t.doc,t.mapping.map(a.pos),1,m?[{type:m}]:void 0)&&(y=!0,g=m?[{type:m,attrs:u}]:void 0),r){if(y&&(s instanceof qn&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,g),m&&!f&&!a.parentOffset&&a.parent.type!==m)){const v=t.mapping.map(a.before()),w=t.doc.resolve(v);a.node(-1).canReplaceWith(w.index(),w.index()+1,m)&&t.setNodeMarkup(t.mapping.map(a.before()),m)}e&&DB(n,o.extensionManager.splittableMarks),t.scrollIntoView()}return y},s9e=(e,t={})=>({tr:n,state:r,dispatch:o,editor:s})=>{var i;const a=gi(e,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const m=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let _=bt.empty;const T=l.index(-1)?1:l.index(-2)?2:3;for(let B=l.depth-T;B>=l.depth-3;B-=1)_=bt.from(l.node(B).copy(_));const k=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,M={...I_(m,l.node().type.name,l.node().attrs),...t},D=((i=a.contentMatch.defaultType)==null?void 0:i.createAndFill(M))||void 0;_=_.append(bt.from(a.createAndFill(null,D)||void 0));const I=l.before(l.depth-(T-1));n.replace(I,l.after(-k),new Zt(_,4-T,0));let P=-1;n.doc.nodesBetween(I,n.doc.content.size,(B,U)=>{if(P>-1)return!1;B.isTextblock&&B.content.size===0&&(P=U+1)}),P>-1&&n.setSelection(qn.near(n.doc.resolve(P))),n.scrollIntoView()}return!0}const g=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,y={...I_(m,f.type.name,f.attrs),...t},v={...I_(m,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const w=g?[{type:a,attrs:y},{type:g,attrs:v}]:[{type:a,attrs:y}];if(!zf(n.doc,l.pos,2))return!1;if(o){const{selection:_,storedMarks:T}=r,{splittableMarks:k}=s.extensionManager,M=T||_.$to.parentOffset&&_.$from.marks();if(n.split(l.pos,2,w).scrollIntoView(),!M||!o)return!0;const D=M.filter(I=>k.includes(I.type.name));n.ensureMarks(D)}return!0},vk=(e,t)=>{const n=TC(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=e.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&q0(e.doc,n.pos)&&e.join(n.pos),!0},xk=(e,t)=>{const n=TC(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=e.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&q0(e.doc,r)&&e.join(r),!0},i9e=(e,t,n,r={})=>({editor:o,tr:s,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:m}=o.extensionManager,g=gi(e,i.schema),y=gi(t,i.schema),{selection:v,storedMarks:w}=i,{$from:_,$to:T}=v,k=_.blockRange(T),M=w||v.$to.parentOffset&&v.$from.marks();if(!k)return!1;const D=TC(I=>MB(I.type.name,f))(v);if(k.depth>=1&&D&&k.depth-D.depth<=1){if(D.node.type===g)return c.liftListItem(y);if(MB(D.node.type.name,f)&&g.validContent(D.node.content)&&a)return l().command(()=>(s.setNodeMarkup(D.pos,g),!0)).command(()=>vk(s,g)).command(()=>xk(s,g)).run()}return!n||!M||!a?l().command(()=>u().wrapInList(g,r)?!0:c.clearNodes()).wrapInList(g,r).command(()=>vk(s,g)).command(()=>xk(s,g)).run():l().command(()=>{const I=u().wrapInList(g,r),P=M.filter(B=>m.includes(B.type.name));return s.ensureMarks(P),I?!0:c.clearNodes()}).wrapInList(g,r).command(()=>vk(s,g)).command(()=>xk(s,g)).run()},a9e=(e,t={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,i=oh(e,r.schema);return N6(r,i,t)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,t)},l9e=(e,t,n={})=>({state:r,commands:o})=>{const s=gi(e,r.schema),i=gi(t,r.schema),a=I0(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(i,l):o.setNode(s,{...l,...n})},c9e=(e,t={})=>({state:n,commands:r})=>{const o=gi(e,n.schema);return I0(n,o,t)?r.lift(o):r.wrapIn(o,t)},u9e=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(e))){if(t){const i=e.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,e.schema.text(s.text,l))}else i.delete(s.from,s.to)}return!0}}return!1},d9e=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:o}=n;return r||t&&o.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},f9e=(e,t={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=t,{selection:a}=n,l=oh(e,r.schema),{$from:c,empty:u,ranges:f}=a;if(!o)return!0;if(u&&i){let{from:m,to:g}=a;const y=(s=c.marks().find(w=>w.type===l))==null?void 0:s.attrs,v=EC(c,l,y);v&&(m=v.from,g=v.to),n.removeMark(m,g,l)}else f.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,l)});return n.removeStoredMark(l),!0},h9e=e=>({tr:t,state:n,dispatch:r})=>{const{selection:o}=n;let s,i;return typeof e=="number"?(s=e,i=e):e&&"from"in e&&"to"in e?(s=e.from,i=e.to):(s=o.from,i=o.to),r&&t.doc.nodesBetween(s,i,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,t.setNodeMarkup(l,void 0,c)}),!0},p9e=(e,t={})=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=SC(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=gi(e,r.schema)),a==="mark"&&(i=oh(e,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;let m,g,y,v;n.selection.empty?r.doc.nodesBetween(u,f,(w,_)=>{s&&s===w.type&&(l=!0,y=Math.max(_,u),v=Math.min(_+w.nodeSize,f),m=_,g=w)}):r.doc.nodesBetween(u,f,(w,_)=>{_<u&&s&&s===w.type&&(l=!0,y=Math.max(_,u),v=Math.min(_+w.nodeSize,f),m=_,g=w),_>=u&&_<=f&&(s&&s===w.type&&(l=!0,o&&n.setNodeMarkup(_,void 0,{...w.attrs,...t})),i&&w.marks.length&&w.marks.forEach(T=>{if(i===T.type&&(l=!0,o)){const k=Math.max(_,u),M=Math.min(_+w.nodeSize,f);n.addMark(k,M,i.create({...T.attrs,...t}))}}))}),g&&(m!==void 0&&o&&n.setNodeMarkup(m,void 0,{...g.attrs,...t}),i&&g.marks.length&&g.marks.forEach(w=>{i===w.type&&o&&n.addMark(y,v,i.create({...w.attrs,...t}))}))}),l},m9e=(e,t={})=>({state:n,dispatch:r})=>{const o=gi(e,n.schema);return GRe(o,t)(n,r)},g9e=(e,t={})=>({state:n,dispatch:r})=>{const o=gi(e,n.schema);return WRe(o,t)(n,r)},b9e=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},Mw=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},y9e=(e,t)=>{if(h7(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function k2(e){var t;const{editor:n,from:r,to:o,text:s,rules:i,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(t=c.nodeBefore||c.nodeAfter)!=null&&t.marks.find(m=>m.type.spec.code))return!1;let u=!1;const f=VMe(c)+s;return i.forEach(m=>{if(u)return;const g=y9e(f,m.find);if(!g)return;const y=l.state.tr,v=xC({state:l.state,transaction:y}),w={from:r-(g[0].length-s.length),to:o},{commands:_,chain:T,can:k}=new wC({editor:n,state:v});m.handler({state:v,range:w,match:g,commands:_,chain:T,can:k})===null||!y.steps.length||(m.undoable&&y.setMeta(a,{transform:y,from:r,to:o,text:s}),l.dispatch(y),u=!0)}),u}function v9e(e){const{editor:t,rules:n}=e,r=new vo({state:{init(){return null},apply(o,s,i){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=g7(bt.from(u),i.schema);const{from:f}=l,m=f+u.length;k2({editor:t,from:f,to:m,text:u,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,i,a){return k2({editor:t,from:s,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&k2({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?k2({editor:t,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function x9e(e){return Object.prototype.toString.call(e).slice(8,-1)}function A2(e){return x9e(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function RQ(e,t){const n={...e};return A2(e)&&A2(t)&&Object.keys(t).forEach(r=>{A2(t[r])&&A2(e[r])?n[r]=RQ(e[r],t[r]):n[r]=t[r]}),n}var x7=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...So(Dn(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...So(Dn(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>RQ(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},W0=class MQ extends x7{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new MQ(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,o=t.state.selection.$from;if(o.pos===o.end()){const i=o.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function w9e(e){return typeof e=="number"}var E9e=class{constructor(e){this.find=e.find,this.handler=e.handler}},_9e=(e,t,n)=>{if(h7(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=e,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function S9e(e){const{editor:t,state:n,from:r,to:o,rule:s,pasteEvent:i,dropEvent:a}=e,{commands:l,chain:c,can:u}=new wC({editor:t,state:n}),f=[];return n.doc.nodesBetween(r,o,(g,y)=>{var v,w,_,T,k;if((w=(v=g.type)==null?void 0:v.spec)!=null&&w.code||!(g.isText||g.isTextblock||g.isInline))return;const M=(k=(T=(_=g.content)==null?void 0:_.size)!=null?T:g.nodeSize)!=null?k:0,D=Math.max(r,y),I=Math.min(o,y+M);if(D>=I)return;const P=g.isText?g.text||"":g.textBetween(D-y,I-y,void 0,"");_9e(P,s.find,i).forEach(U=>{if(U.index===void 0)return;const j=D+U.index+1,H=j+U[0].length,q={from:n.tr.mapping.map(j),to:n.tr.mapping.map(H)},z=s.handler({state:n,range:q,match:U,commands:l,chain:c,can:u,pasteEvent:i,dropEvent:a});f.push(z)})}),f.every(g=>g!==null)}var N2=null,T9e=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function C9e(e){const{editor:t,rules:n}=e;let r=null,o=!1,s=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:f,to:m,rule:g,pasteEvt:y})=>{const v=u.tr,w=xC({state:u,transaction:v});if(!(!S9e({editor:t,state:w,from:Math.max(f-1,0),to:m.b-1,rule:g,pasteEvent:y,dropEvent:a})||!v.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}};return n.map(u=>new vo({view(f){const m=y=>{var v;r=(v=f.dom.parentElement)!=null&&v.contains(y.target)?f.dom.parentElement:null,r&&(N2=t)},g=()=>{N2&&(N2=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",g),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",g)}}},props:{handleDOMEvents:{drop:(f,m)=>{if(s=r===f.dom.parentElement,a=m,!s){const g=N2;g!=null&&g.isEditable&&setTimeout(()=>{const y=g.state.selection;y&&g.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(f,m)=>{var g;const y=(g=m.clipboardData)==null?void 0:g.getData("text/html");return i=m,o=!!(y!=null&&y.includes("data-pm-slice")),!1}}},appendTransaction:(f,m,g)=>{const y=f[0],v=y.getMeta("uiEvent")==="paste"&&!o,w=y.getMeta("uiEvent")==="drop"&&!s,_=y.getMeta("applyPasteRules"),T=!!_;if(!v&&!w&&!T)return;if(T){let{text:D}=_;typeof D=="string"?D=D:D=g7(bt.from(D),g.schema);const{from:I}=_,P=I+D.length,B=T9e(D);return l({rule:u,state:g,from:I,to:{b:P},pasteEvt:B})}const k=m.doc.content.findDiffStart(g.doc.content),M=m.doc.content.findDiffEnd(g.doc.content);if(!(!w9e(k)||!M||k===M.b))return l({rule:u,state:g,from:k,to:M,pasteEvt:i})}}))}var kC=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=EQ(e),this.schema=FMe(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:yk(t.name,this.schema)},r=Dn(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return b7([...this.extensions].reverse()).flatMap(r=>{const o={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:yk(r.name,this.schema)},s=[],i=Dn(r,"addKeyboardShortcuts",o);let a={};if(r.type==="mark"&&Dn(r,"exitable",o)&&(a.ArrowRight=()=>W0.handleExit({editor:e,mark:r})),i){const m=Object.fromEntries(Object.entries(i()).map(([g,y])=>[g,()=>y({editor:e})]));a={...a,...m}}const l=U7e(a);s.push(l);const c=Dn(r,"addInputRules",o);if(RB(r,e.options.enableInputRules)&&c){const m=c();if(m&&m.length){const g=v9e({editor:e,rules:m}),y=Array.isArray(g)?g:[g];s.push(...y)}}const u=Dn(r,"addPasteRules",o);if(RB(r,e.options.enablePasteRules)&&u){const m=u();if(m&&m.length){const g=C9e({editor:e,rules:m});s.push(...g)}}const f=Dn(r,"addProseMirrorPlugins",o);if(f){const m=f();s.push(...m)}return s})}get attributes(){return wQ(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=ob(this.extensions);return Object.fromEntries(t.filter(n=>!!Dn(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:gi(n.name,this.schema)},s=Dn(n,"addNodeView",o);if(!s)return[];const i=s();if(!i)return[];const a=(l,c,u,f,m)=>{const g=$x(l,r);return i({node:l,view:c,getPos:u,decorations:f,innerDecorations:m,editor:e,extension:n,HTMLAttributes:g})};return[n.name,a]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=ob(this.extensions);return Object.fromEntries(t.filter(n=>!!Dn(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:oh(n.name,this.schema)},s=Dn(n,"addMarkView",o);if(!s)return[];const i=(a,l,c)=>{const u=$x(a,r);return s()({mark:a,view:l,inline:c,editor:e,extension:n,HTMLAttributes:u,updateAttributes:f=>{j9e(a,e,f)}})};return[n.name,i]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:yk(t.name,this.schema)};t.type==="mark"&&((n=So(Dn(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const o=Dn(t,"onBeforeCreate",r),s=Dn(t,"onCreate",r),i=Dn(t,"onUpdate",r),a=Dn(t,"onSelectionUpdate",r),l=Dn(t,"onTransaction",r),c=Dn(t,"onFocus",r),u=Dn(t,"onBlur",r),f=Dn(t,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}};kC.resolve=EQ;kC.sort=b7;kC.flatten=m7;var k9e={};f7(k9e,{ClipboardTextSerializer:()=>OQ,Commands:()=>PQ,Delete:()=>LQ,Drop:()=>$Q,Editable:()=>FQ,FocusEvents:()=>zQ,Keymap:()=>jQ,Paste:()=>UQ,Tabindex:()=>HQ,TextDirection:()=>VQ,focusEventsPluginKey:()=>BQ});var Gr=class DQ extends x7{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new DQ(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},OQ=Gr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new vo({key:new Bo("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:o}=t,{ranges:s}=o,i=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=y7(n);return _Q(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),PQ=Gr.create({name:"commands",addCommands(){return{...fQ}}}),LQ=Gr.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,o;const s=()=>{var i,a,l,c;if((c=(l=(a=(i=this.editor.options.coreExtensionOptions)==null?void 0:i.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,e))!=null?c:e.getMeta("y-sync$"))return;const u=vQ(e.before,[e,...t]);CQ(u).forEach(g=>{u.mapping.mapResult(g.oldRange.from).deletedAfter&&u.mapping.mapResult(g.oldRange.to).deletedBefore&&u.before.nodesBetween(g.oldRange.from,g.oldRange.to,(y,v)=>{const w=v+y.nodeSize-2,_=g.oldRange.from<=v&&w<=g.oldRange.to;this.editor.emit("delete",{type:"node",node:y,from:v,to:w,newFrom:u.mapping.map(v),newTo:u.mapping.map(w),deletedRange:g.oldRange,newRange:g.newRange,partial:!_,editor:this.editor,transaction:e,combinedTransform:u})})});const m=u.mapping;u.steps.forEach((g,y)=>{var v,w;if(g instanceof gu){const _=m.slice(y).map(g.from,-1),T=m.slice(y).map(g.to),k=m.invert().map(_,-1),M=m.invert().map(T),D=(v=u.doc.nodeAt(_-1))==null?void 0:v.marks.some(P=>P.eq(g.mark)),I=(w=u.doc.nodeAt(T))==null?void 0:w.marks.some(P=>P.eq(g.mark));this.editor.emit("delete",{type:"mark",mark:g.mark,from:g.from,to:g.to,deletedRange:{from:k,to:M},newRange:{from:_,to:T},partial:!!(I||D),editor:this.editor,transaction:e,combinedTransform:u})}})};(o=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||o?setTimeout(s,0):s()}}),$Q=Gr.create({name:"drop",addProseMirrorPlugins(){return[new vo({key:new Bo("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),FQ=Gr.create({name:"editable",addProseMirrorPlugins(){return[new vo({key:new Bo("editable"),props:{editable:()=>this.editor.options.editable}})]}}),BQ=new Bo("focusEvents"),zQ=Gr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new vo({key:BQ,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),jQ=Gr.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:m,parent:g}=f,y=f.parent.isTextblock&&m>0?a.doc.resolve(m-1):f,v=y.parent.type.spec.isolating,w=f.pos-f.parentOffset,_=v&&y.parent.childCount===1?w===f.pos:Vn.atStart(c).from===m;return!u||!g.type.isTextblock||g.textContent.length||!_||_&&f.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return _C()||bQ()?s:o},addProseMirrorPlugins(){return[new vo({key:new Bo("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(v=>v.getMeta("composition")))return;const r=e.some(v=>v.docChanged)&&!t.doc.eq(n.doc),o=e.some(v=>v.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:i,to:a}=t.selection,l=Vn.atStart(t.doc).from,c=Vn.atEnd(t.doc).to;if(s||!(i===l&&a===c)||!CC(n.doc))return;const m=n.tr,g=xC({state:n,transaction:m}),{commands:y}=new wC({editor:this.editor,state:g});if(y.clearNodes(),!!m.steps.length)return m}})]}}),UQ=Gr.create({name:"paste",addProseMirrorPlugins(){return[new vo({key:new Bo("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),HQ=Gr.create({name:"tabindex",addProseMirrorPlugins(){return[new vo({key:new Bo("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),VQ=Gr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=ob(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new vo({key:new Bo("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),A9e=class i1{constructor(t,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=o}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new i1(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new i1(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new i1(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,i=this.pos+r+(s?0:1);if(i<0||i>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(i);if(!o&&a.depth<=this.depth)return;const l=new i1(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),t.push(new i1(a,this.editor,o,o?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===t)if(Object.keys(n).length>0){const s=o.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(s[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(i=>{r&&o.length>0||(i.node.type.name===t&&s.every(l=>n[l]===i.node.attrs[l])&&o.push(i),!(r&&o.length>0)&&(o=o.concat(i.querySelectorAll(t,n,r))))}),o}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},N9e=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function I9e(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return t&&o.setAttribute("nonce",t),o.setAttribute("data-tiptap-style",""),o.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(o),o}var R9e=class extends b9e{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:YMe,createMappablePosition:KMe},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:o,moved:s})=>this.options.onDrop(r,o,s)),this.on("paste",({event:r,slice:o})=>this.options.onPaste(r,o)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=pQ(t,this.options.autofocus);this.editorState=p1.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=I9e(N9e,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=xQ(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;n=n.filter(i=>!i.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[FQ,OQ.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),PQ,zQ,jQ,HQ,$Q,UQ,LQ,VQ.configure({direction:this.options.textDirection})].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new kC(r,this)}createCommandManager(){this.commandManager=new wC({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=k6(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=k6(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new dQ(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),o=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!o)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=i==null?void 0:i.getMeta("focus"),l=i==null?void 0:i.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:i}),l&&this.emit("blur",{editor:this,event:l.event,transaction:i}),!(e.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return TQ(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return qMe(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return g7(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return SQ(this.state.doc,{blockSeparator:t,textSerializers:{...y7(this.schema),...n}})}get isEmpty(){return CC(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new A9e(t,this)}get $doc(){return this.$pos(0)}};function sb(e){return new Mw({find:e.find,handler:({state:t,range:n,match:r})=>{const o=So(e.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=t,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),u=c+i.length;if(v7(n.from,n.to,t.doc).filter(g=>g.mark.type.excluded.find(v=>v===e.type&&v!==g.mark.type)).filter(g=>g.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const m=n.from+l+i.length;s.addMark(n.from+l,m,e.type.create(o||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function qQ(e){return new Mw({find:e.find,handler:({state:t,range:n,match:r})=>{const o=So(e.getAttributes,void 0,r)||{},{tr:s}=t,i=n.from;let a=n.to;const l=e.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=i+c;u>a?u=a:a=u+r[1].length;const f=r[0][r[0].length-1];s.insertText(f,i+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=e.type.isInline?i:i-1;s.insert(c,e.type.create(o)).delete(s.mapping.map(i),s.mapping.map(a))}s.scrollIntoView()},undoable:e.undoable})}function I6(e){return new Mw({find:e.find,handler:({state:t,range:n,match:r})=>{const o=t.doc.resolve(n.from),s=So(e.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function Ys(e){return new Mw({find:e.find,handler:({state:t,range:n,match:r})=>{let o=e.replace,s=n.from;const i=n.to;if(r[1]){const a=r[0].lastIndexOf(r[1]);o+=r[0].slice(a+r[1].length),s+=a;const l=s-i;l>0&&(o=r[0].slice(a-l,a)+o,s=i)}t.tr.insertText(o,s,i)},undoable:e.undoable})}function ib(e){return new Mw({find:e.find,handler:({state:t,range:n,match:r,chain:o})=>{const s=So(e.getAttributes,void 0,r)||{},i=t.tr.delete(n.from,n.to),l=i.doc.resolve(n.from).blockRange(),c=l&&K8(l,e.type,s);if(!c)return null;if(i.wrap(l,c),e.keepMarks&&e.editor){const{selection:f,storedMarks:m}=t,{splittableMarks:g}=e.editor.extensionManager,y=m||f.$to.parentOffset&&f.$from.marks();if(y){const v=y.filter(w=>g.includes(w.type.name));i.ensureMarks(v)}}if(e.keepAttributes){const f=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(f,s).run()}const u=i.doc.resolve(n.from-1).nodeBefore;u&&u.type===e.type&&q0(i.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,u))&&i.join(n.from-1)},undoable:e.undoable})}var M9e=e=>"touches"in e,D9e=class{constructor(e){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.clientX-this.startX,c=a.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.touches[0];if(!l)return;const c=l.clientX-this.startX,u=l.clientY-this.startY;this.handleResize(c,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(a,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var t,n,r,o,s,i;this.node=e.node,this.editor=e.editor,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(t=e.options)!=null&&t.min&&(this.minSize={...this.minSize,...e.options.min}),(n=e.options)!=null&&n.max&&(this.maxSize=e.options.max),(r=e==null?void 0:e.options)!=null&&r.directions&&(this.directions=e.options.directions),(o=e.options)!=null&&o.preserveAspectRatio&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(s=e.options)!=null&&s.className&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),(i=e.options)!=null&&i.createCustomHandle&&(this.createCustomHandle=e.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const e=this.editor.isEditable;e!==this.lastEditableState&&(this.lastEditableState=e,e?e&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(e,t,n){return e.type!==this.node.type?!1:(this.node=e,this.onUpdate?this.onUpdate(e,t,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){const e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){const t=document.createElement("div");return t.dataset.resizeHandle=e,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(e,t){const n=t.includes("top"),r=t.includes("bottom"),o=t.includes("left"),s=t.includes("right");n&&(e.style.top="0"),r&&(e.style.bottom="0"),o&&(e.style.left="0"),s&&(e.style.right="0"),(t==="top"||t==="bottom")&&(e.style.left="0",e.style.right="0"),(t==="left"||t==="right")&&(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{let t;this.createCustomHandle?t=this.createCustomHandle(e):t=this.createHandle(e),t instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${e}") did not return an HTMLElement. Falling back to default handle.`),t=this.createHandle(e)),this.createCustomHandle||this.positionHandle(t,e),t.addEventListener("mousedown",n=>this.handleResizeStart(n,e)),t.addEventListener("touchstart",n=>this.handleResizeStart(n,e)),this.handleMap.set(e,t),this.wrapper.appendChild(t)})}removeHandles(){this.handleMap.forEach(e=>e.remove()),this.handleMap.clear()}applyInitialSize(){const e=this.node.attrs.width,t=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,t){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=t,M9e(e)?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,t){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:o}=this.calculateNewDimensions(this.activeHandle,e,t),s=this.applyConstraints(r,o,n);this.element.style.width=`${s.width}px`,this.element.style.height=`${s.height}px`,this.onResize&&this.onResize(s.width,s.height)}calculateNewDimensions(e,t,n){let r=this.startWidth,o=this.startHeight;const s=e.includes("right"),i=e.includes("left"),a=e.includes("bottom"),l=e.includes("top");return s?r=this.startWidth+t:i&&(r=this.startWidth-t),a?o=this.startHeight+n:l&&(o=this.startHeight-n),(e==="right"||e==="left")&&(r=this.startWidth+(s?t:-t)),(e==="top"||e==="bottom")&&(o=this.startHeight+(a?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,o,e):{width:r,height:o}}applyConstraints(e,t,n){var r,o,s,i;if(!n){let c=Math.max(this.minSize.width,e),u=Math.max(this.minSize.height,t);return(r=this.maxSize)!=null&&r.width&&(c=Math.min(this.maxSize.width,c)),(o=this.maxSize)!=null&&o.height&&(u=Math.min(this.maxSize.height,u)),{width:c,height:u}}let a=e,l=t;return a<this.minSize.width&&(a=this.minSize.width,l=a/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,a=l*this.aspectRatio),(s=this.maxSize)!=null&&s.width&&a>this.maxSize.width&&(a=this.maxSize.width,l=a/this.aspectRatio),(i=this.maxSize)!=null&&i.height&&l>this.maxSize.height&&(l=this.maxSize.height,a=l*this.aspectRatio),{width:a,height:l}}applyAspectRatio(e,t,n){const r=n==="left"||n==="right",o=n==="top"||n==="bottom";return r?{width:e,height:e/this.aspectRatio}:o?{width:t*this.aspectRatio,height:t}:{width:e,height:e/this.aspectRatio}}};function O9e(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Nn){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let o=r.depth;for(;o>=0;){const s=r.index(o);if(r.node(o).contentMatchAt(s).matchType(t))return!0;o-=1}return!1}var P9e={};f7(P9e,{createAtomBlockMarkdownSpec:()=>L9e,createBlockMarkdownSpec:()=>$9e,createInlineMarkdownSpec:()=>z9e,parseAttributes:()=>w7,parseIndentedBlocks:()=>R6,renderNestedMarkdownContent:()=>_7,serializeAttributes:()=>E7});function w7(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),o=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(o){const c=o.map(u=>u.trim().slice(1));t.class=c.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(t.id=s[1]);const i=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(i)).forEach(([,c,u])=>{var f;const m=parseInt(((f=u.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),g=n[m];g&&(t[c]=g.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(t[u]=!0)}),t}function E7(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function L9e(e){const{nodeName:t,name:n,parseAttributes:r=w7,serializeAttributes:o=E7,defaultAttributes:s={},requiredAttributes:i=[],allowedAttributes:a}=e,l=n||t,c=u=>{if(!a)return u;const f={};return a.forEach(m=>{m in u&&(f[m]=u[m])}),f};return{parseMarkdown:(u,f)=>{const m={...s,...u.attributes};return f.createNode(t,m,[])},markdownTokenizer:{name:t,level:"block",start(u){var f;const m=new RegExp(`^:::${l}(?:\\s|$)`,"m"),g=(f=u.match(m))==null?void 0:f.index;return g!==void 0?g:-1},tokenize(u,f,m){const g=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),y=u.match(g);if(!y)return;const v=y[1]||"",w=r(v);if(!i.find(T=>!(T in w)))return{type:t,raw:y[0],attributes:w}}},renderMarkdown:u=>{const f=c(u.attrs||{}),m=o(f),g=m?` {${m}}`:"";return`:::${l}${g} :::`}}}function $9e(e){const{nodeName:t,name:n,getContent:r,parseAttributes:o=w7,serializeAttributes:s=E7,defaultAttributes:i={},content:a="block",allowedAttributes:l}=e,c=n||t,u=f=>{if(!l)return f;const m={};return l.forEach(g=>{g in f&&(m[g]=f[g])}),m};return{parseMarkdown:(f,m)=>{let g;if(r){const v=r(f);g=typeof v=="string"?[{type:"text",text:v}]:v}else a==="block"?g=m.parseChildren(f.tokens||[]):g=m.parseInline(f.tokens||[]);const y={...i,...f.attributes};return m.createNode(t,y,g)},markdownTokenizer:{name:t,level:"block",start(f){var m;const g=new RegExp(`^:::${c}`,"m"),y=(m=f.match(g))==null?void 0:m.index;return y!==void 0?y:-1},tokenize(f,m,g){var y;const v=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),w=f.match(v);if(!w)return;const[_,T=""]=w,k=o(T);let M=1;const D=_.length;let I="";const P=/^:::([\w-]*)(\s.*)?/gm,B=f.slice(D);for(P.lastIndex=0;;){const U=P.exec(B);if(U===null)break;const j=U.index,H=U[1];if(!((y=U[2])!=null&&y.endsWith(":::"))){if(H)M+=1;else if(M-=1,M===0){const q=B.slice(0,j);I=q.trim();const z=f.slice(0,D+j+U[0].length);let Z=[];if(I)if(a==="block")for(Z=g.blockTokens(q),Z.forEach(X=>{X.text&&(!X.tokens||X.tokens.length===0)&&(X.tokens=g.inlineTokens(X.text))});Z.length>0;){const X=Z[Z.length-1];if(X.type==="paragraph"&&(!X.text||X.text.trim()===""))Z.pop();else break}else Z=g.inlineTokens(I);return{type:t,raw:z,attributes:k,content:I,tokens:Z}}}}}},renderMarkdown:(f,m)=>{const g=u(f.attrs||{}),y=s(g),v=y?` {${y}}`:"",w=m.renderChildren(f.content||[],`

`);return`:::${c}${v}

${w}

:::`}}}function F9e(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,o,s,i]=r;t[o]=s||i,r=n.exec(e)}return t}function B9e(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function z9e(e){const{nodeName:t,name:n,getContent:r,parseAttributes:o=F9e,serializeAttributes:s=B9e,defaultAttributes:i={},selfClosing:a=!1,allowedAttributes:l}=e,c=n||t,u=m=>{if(!l)return m;const g={};return l.forEach(y=>{const v=typeof y=="string"?y:y.name,w=typeof y=="string"?void 0:y.skipIfDefault;if(v in m){const _=m[v];if(w!==void 0&&_===w)return;g[v]=_}}),g},f=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(m,g)=>{const y={...i,...m.attributes};if(a)return g.createNode(t,y);const v=r?r(m):m.content||"";return v?g.createNode(t,y,[g.createTextNode(v)]):g.createNode(t,y,[])},markdownTokenizer:{name:t,level:"inline",start(m){const g=a?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),y=m.match(g),v=y==null?void 0:y.index;return v!==void 0?v:-1},tokenize(m,g,y){const v=a?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),w=m.match(v);if(!w)return;let _="",T="";if(a){const[,M]=w;T=M}else{const[,M,D]=w;T=M,_=D||""}const k=o(T.trim());return{type:t,raw:w[0],content:_.trim(),attributes:k}}},renderMarkdown:m=>{let g="";r?g=r(m):m.content&&m.content.length>0&&(g=m.content.filter(_=>_.type==="text").map(_=>_.text).join(""));const y=u(m.attrs||{}),v=s(y),w=v?` ${v}`:"";return a?`[${c}${w}]`:`[${c}${w}]${g}[/${c}]`}}}function R6(e,t,n){var r,o,s,i;const a=e.split(`
`),l=[];let c="",u=0;const f=t.baseIndentSize||2;for(;u<a.length;){const m=a[u],g=m.match(t.itemPattern);if(!g){if(l.length>0)break;if(m.trim()===""){u+=1,c=`${c}${m}
`;continue}else return}const y=t.extractItemData(g),{indentLevel:v,mainContent:w}=y;c=`${c}${m}
`;const _=[w];for(u+=1;u<a.length;){const D=a[u];if(D.trim()===""){const P=a.slice(u+1).findIndex(j=>j.trim()!=="");if(P===-1)break;if((((o=(r=a[u+1+P].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:o.length)||0)>v){_.push(D),c=`${c}${D}
`,u+=1;continue}else break}if((((i=(s=D.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:i.length)||0)>v)_.push(D),c=`${c}${D}
`,u+=1;else break}let T;const k=_.slice(1);if(k.length>0){const D=k.map(I=>I.slice(v+f)).join(`
`);D.trim()&&(t.customNestedParser?T=t.customNestedParser(D):T=n.blockTokens(D))}const M=t.createToken(y,T);l.push(M)}if(l.length!==0)return{items:l,raw:c}}function _7(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const o=typeof n=="function"?n(r):n,[s,...i]=e.content,a=t.renderChildren([s]),l=[`${o}${a}`];return i&&i.length>0&&i.forEach(c=>{const u=t.renderChildren([c]);if(u){const f=u.split(`
`).map(m=>m?t.indent(m):"").join(`
`);l.push(f)}}),l.join(`
`)}function j9e(e,t,n={}){const{state:r}=t,{doc:o,tr:s}=r,i=e;o.descendants((a,l)=>{const c=s.mapping.map(l),u=s.mapping.map(l)+a.nodeSize;let f=null;if(a.marks.forEach(g=>{if(g!==i)return!1;f=g}),!f)return;let m=!1;if(Object.keys(n).forEach(g=>{n[g]!==f.attrs[g]&&(m=!0)}),m){const g=e.type.create({...e.attrs,...n});s.removeMark(c,u,e.type),s.addMark(c,u,g)}}),s.docChanged&&t.view.dispatch(s)}var xl=class GQ extends x7{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new GQ(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},U9e=class{constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,n,r,o,s,i,a;const{view:l}=this.editor,c=e.target,u=c.nodeType===3?(t=c.parentElement)==null?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(c)||!u)return;let f=0,m=0;if(this.dom!==u){const T=this.dom.getBoundingClientRect(),k=u.getBoundingClientRect(),M=(o=e.offsetX)!=null?o:(r=e.nativeEvent)==null?void 0:r.offsetX,D=(i=e.offsetY)!=null?i:(s=e.nativeEvent)==null?void 0:s.offsetY;f=k.x-T.x+M,m=k.y-T.y+D}const g=this.dom.cloneNode(!0);try{const T=this.dom.getBoundingClientRect();g.style.width=`${Math.round(T.width)}px`,g.style.height=`${Math.round(T.height)}px`,g.style.boxSizing="border-box",g.style.pointerEvents="none"}catch{}let y=null;try{y=document.createElement("div"),y.style.position="absolute",y.style.top="-9999px",y.style.left="-9999px",y.style.pointerEvents="none",y.appendChild(g),document.body.appendChild(y),(a=e.dataTransfer)==null||a.setDragImage(g,f,m)}finally{y&&setTimeout(()=>{try{y==null||y.remove()}catch{}},0)}const v=this.getPos();if(typeof v!="number")return;const w=Nn.create(l.state.doc,v),_=l.state.tr.setSelection(w);l.dispatch(_)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const n=e.target;if(!(this.dom.contains(n)&&!((t=this.contentDOM)!=null&&t.contains(n))))return!1;const o=e.type.startsWith("drag"),s=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!s&&!o)return!0;const{isEditable:a}=this.editor,{isDragging:l}=this,c=!!this.node.type.spec.draggable,u=Nn.isSelectable(this.node),f=e.type==="copy",m=e.type==="paste",g=e.type==="cut",y=e.type==="mousedown";if(!c&&u&&o&&e.target===this.dom&&e.preventDefault(),c&&o&&!l&&e.target===this.dom)return e.preventDefault(),!1;if(c&&a&&!l&&y){const v=n.closest("[data-drag-handle]");v&&(this.dom===v||this.dom.contains(v))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||s||f||m||g||y&&u)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(_C()||mQ())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const n=this.getPos();return typeof n!="number"?!1:(t.setNodeMarkup(n,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}};function wm(e){return new E9e({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:o})=>{const s=So(e.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:i}=t,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),f=n.from+l.indexOf(a),m=f+a.length;if(v7(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(w=>w===e.type&&w!==y.mark.type)).filter(y=>y.to>f).length)return null;m<n.to&&i.delete(m,n.to),f>n.from&&i.delete(n.from+u,f),c=n.from+u+a.length,i.addMark(n.from+u,c,e.type.create(s||{})),i.removeStoredMark(e.type)}}})}var H9e=Object.getOwnPropertyNames,V9e=Object.getOwnPropertySymbols,q9e=Object.prototype.hasOwnProperty;function OB(e,t){return function(r,o,s){return e(r,o,s)&&t(r,o,s)}}function I2(e){return function(n,r,o){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,o);var s=o.cache,i=s.get(n),a=s.get(r);if(i&&a)return i===r&&a===n;s.set(n,r),s.set(r,n);var l=e(n,r,o);return s.delete(n),s.delete(r),l}}function G9e(e){return e!=null?e[Symbol.toStringTag]:void 0}function PB(e){return H9e(e).concat(V9e(e))}var W9e=Object.hasOwn||(function(e,t){return q9e.call(e,t)});function Lm(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Y9e="__v",K9e="__o",Z9e="_owner",LB=Object.getOwnPropertyDescriptor,$B=Object.keys;function J9e(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function X9e(e,t){return Lm(e.getTime(),t.getTime())}function Q9e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function eDe(e,t){return e===t}function FB(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var o=new Array(r),s=e.entries(),i,a,l=0;(i=s.next())&&!i.done;){for(var c=t.entries(),u=!1,f=0;(a=c.next())&&!a.done;){if(o[f]){f++;continue}var m=i.value,g=a.value;if(n.equals(m[0],g[0],l,f,e,t,n)&&n.equals(m[1],g[1],m[0],g[0],e,t,n)){u=o[f]=!0;break}f++}if(!u)return!1;l++}return!0}var tDe=Lm;function nDe(e,t,n){var r=$B(e),o=r.length;if($B(t).length!==o)return!1;for(;o-- >0;)if(!WQ(e,t,n,r[o]))return!1;return!0}function Wy(e,t,n){var r=PB(e),o=r.length;if(PB(t).length!==o)return!1;for(var s,i,a;o-- >0;)if(s=r[o],!WQ(e,t,n,s)||(i=LB(e,s),a=LB(t,s),(i||a)&&(!i||!a||i.configurable!==a.configurable||i.enumerable!==a.enumerable||i.writable!==a.writable)))return!1;return!0}function rDe(e,t){return Lm(e.valueOf(),t.valueOf())}function oDe(e,t){return e.source===t.source&&e.flags===t.flags}function BB(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var o=new Array(r),s=e.values(),i,a;(i=s.next())&&!i.done;){for(var l=t.values(),c=!1,u=0;(a=l.next())&&!a.done;){if(!o[u]&&n.equals(i.value,a.value,i.value,a.value,e,t,n)){c=o[u]=!0;break}u++}if(!c)return!1}return!0}function sDe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function iDe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function WQ(e,t,n,r){return(r===Z9e||r===K9e||r===Y9e)&&(e.$$typeof||t.$$typeof)?!0:W9e(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var aDe="[object Arguments]",lDe="[object Boolean]",cDe="[object Date]",uDe="[object Error]",dDe="[object Map]",fDe="[object Number]",hDe="[object Object]",pDe="[object RegExp]",mDe="[object Set]",gDe="[object String]",bDe="[object URL]",yDe=Array.isArray,zB=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,jB=Object.assign,vDe=Object.prototype.toString.call.bind(Object.prototype.toString);function xDe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,o=e.areFunctionsEqual,s=e.areMapsEqual,i=e.areNumbersEqual,a=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,f=e.areTypedArraysEqual,m=e.areUrlsEqual,g=e.unknownTagComparators;return function(v,w,_){if(v===w)return!0;if(v==null||w==null)return!1;var T=typeof v;if(T!==typeof w)return!1;if(T!=="object")return T==="number"?i(v,w,_):T==="function"?o(v,w,_):!1;var k=v.constructor;if(k!==w.constructor)return!1;if(k===Object)return a(v,w,_);if(yDe(v))return t(v,w,_);if(zB!=null&&zB(v))return f(v,w,_);if(k===Date)return n(v,w,_);if(k===RegExp)return c(v,w,_);if(k===Map)return s(v,w,_);if(k===Set)return u(v,w,_);var M=vDe(v);if(M===cDe)return n(v,w,_);if(M===pDe)return c(v,w,_);if(M===dDe)return s(v,w,_);if(M===mDe)return u(v,w,_);if(M===hDe)return typeof v.then!="function"&&typeof w.then!="function"&&a(v,w,_);if(M===bDe)return m(v,w,_);if(M===uDe)return r(v,w,_);if(M===aDe)return a(v,w,_);if(M===lDe||M===fDe||M===gDe)return l(v,w,_);if(g){var D=g[M];if(!D){var I=G9e(v);I&&(D=g[I])}if(D)return D(v,w,_)}return!1}}function wDe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,o={areArraysEqual:r?Wy:J9e,areDatesEqual:X9e,areErrorsEqual:Q9e,areFunctionsEqual:eDe,areMapsEqual:r?OB(FB,Wy):FB,areNumbersEqual:tDe,areObjectsEqual:r?Wy:nDe,arePrimitiveWrappersEqual:rDe,areRegExpsEqual:oDe,areSetsEqual:r?OB(BB,Wy):BB,areTypedArraysEqual:r?Wy:sDe,areUrlsEqual:iDe,unknownTagComparators:void 0};if(n&&(o=jB({},o,n(o))),t){var s=I2(o.areArraysEqual),i=I2(o.areMapsEqual),a=I2(o.areObjectsEqual),l=I2(o.areSetsEqual);o=jB({},o,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:a,areSetsEqual:l})}return o}function EDe(e){return function(t,n,r,o,s,i,a){return e(t,n,a)}}function _De(e){var t=e.circular,n=e.comparator,r=e.createState,o=e.equals,s=e.strict;if(r)return function(l,c){var u=r(),f=u.cache,m=f===void 0?t?new WeakMap:void 0:f,g=u.meta;return n(l,c,{cache:m,equals:o,meta:g,strict:s})};if(t)return function(l,c){return n(l,c,{cache:new WeakMap,equals:o,meta:void 0,strict:s})};var i={cache:void 0,equals:o,meta:void 0,strict:s};return function(l,c){return n(l,c,i)}}var SDe=Y0();Y0({strict:!0});Y0({circular:!0});Y0({circular:!0,strict:!0});Y0({createInternalComparator:function(){return Lm}});Y0({strict:!0,createInternalComparator:function(){return Lm}});Y0({circular:!0,createInternalComparator:function(){return Lm}});Y0({circular:!0,createInternalComparator:function(){return Lm},strict:!0});function Y0(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,o=e.createState,s=e.strict,i=s===void 0?!1:s,a=wDe(e),l=xDe(a),c=r?r(l):EDe(l);return _De({circular:n,comparator:l,createState:o,equals:c,strict:i})}var wk={exports:{}},Ek={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UB;function TDe(){if(UB)return Ek;UB=1;var e=sw(),t=lG();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,a=e.useMemo,l=e.useDebugValue;return Ek.useSyncExternalStoreWithSelector=function(c,u,f,m,g){var y=s(null);if(y.current===null){var v={hasValue:!1,value:null};y.current=v}else v=y.current;y=a(function(){function _(I){if(!T){if(T=!0,k=I,I=m(I),g!==void 0&&v.hasValue){var P=v.value;if(g(P,I))return M=P}return M=I}if(P=M,r(k,I))return P;var B=m(I);return g!==void 0&&g(P,B)?(k=I,P):(k=I,M=B)}var T=!1,k,M,D=f===void 0?null:f;return[function(){return _(u())},D===null?void 0:function(){return _(D())}]},[u,f,m,g]);var w=o(c,y[0],y[1]);return i(function(){v.hasValue=!0,v.value=w},[w]),l(w),w},Ek}var HB;function CDe(){return HB||(HB=1,wk.exports=TDe()),wk.exports}var kDe=CDe(),ADe=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},NDe=({contentComponent:e})=>{const t=xR.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return h.jsx(h.Fragment,{children:Object.values(t)})};function IDe(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:bR.createPortal(r.reactElement,r.element,n)},e.forEach(o=>o())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(o=>o())}}}var RDe=class extends Me.Component{constructor(e){var t;super(e),this.editorContentRef=Me.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=IDe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return h.jsxs(h.Fragment,{children:[h.jsx("div",{ref:ADe(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&h.jsx(NDe,{contentComponent:e.contentComponent})]})}},MDe=x.forwardRef((e,t)=>{const n=Me.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Me.createElement(RDe,{key:n,innerRef:t,...e})}),DDe=Me.memo(MDe),ODe=typeof window<"u"?x.useLayoutEffect:x.useEffect,PDe=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function LDe(e){var t;const[n]=x.useState(()=>new PDe(e.editor)),r=kDe.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:SDe);return ODe(()=>n.watch(e.editor),[e.editor,n]),x.useDebugValue(r),r}var $De=!1,M6=typeof window>"u",FDe=M6||!!(typeof window<"u"&&window.next),BDe=class YQ{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?M6||FDe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onBeforeCreate)==null?void 0:s.call(o,...r)},onBlur:(...r)=>{var o,s;return(s=(o=this.options.current).onBlur)==null?void 0:s.call(o,...r)},onCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onCreate)==null?void 0:s.call(o,...r)},onDestroy:(...r)=>{var o,s;return(s=(o=this.options.current).onDestroy)==null?void 0:s.call(o,...r)},onFocus:(...r)=>{var o,s;return(s=(o=this.options.current).onFocus)==null?void 0:s.call(o,...r)},onSelectionUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onSelectionUpdate)==null?void 0:s.call(o,...r)},onTransaction:(...r)=>{var o,s;return(s=(o=this.options.current).onTransaction)==null?void 0:s.call(o,...r)},onUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onUpdate)==null?void 0:s.call(o,...r)},onContentError:(...r)=>{var o,s;return(s=(o=this.options.current).onContentError)==null?void 0:s.call(o,...r)},onDrop:(...r)=>{var o,s;return(s=(o=this.options.current).onDrop)==null?void 0:s.call(o,...r)},onPaste:(...r)=>{var o,s;return(s=(o=this.options.current).onPaste)==null?void 0:s.call(o,...r)},onDelete:(...r)=>{var o,s;return(s=(o=this.options.current).onDelete)==null?void 0:s.call(o,...r)}};return new R9e(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((o,s)=>{var i;return o===((i=n.extensions)==null?void 0:i[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?YQ.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,o)=>r===t[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function zDe(e={},t=[]){const n=x.useRef(e);n.current=e;const[r]=x.useState(()=>new BDe(n)),o=xR.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return x.useDebugValue(o),x.useEffect(r.onRender(t)),LDe({editor:o,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),o}var KQ=x.createContext({editor:null});KQ.Consumer;var ZQ=()=>x.useContext(KQ),JQ=x.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),jDe=()=>x.useContext(JQ),UDe=Me.forwardRef((e,t)=>{const{onDragStart:n}=jDe(),r=e.as||"div";return h.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});function VB(e){return!!(typeof e=="function"&&e.prototype&&e.prototype.isReactComponent)}function qB(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.forward_ref)"||e.$$typeof.description==="react.forward_ref"))}function HDe(e){return!!(typeof e=="object"&&e.$$typeof&&(e.$$typeof.toString()==="Symbol(react.memo)"||e.$$typeof.description==="react.memo"))}function VDe(e){if(VB(e)||qB(e))return!0;if(HDe(e)){const t=e.type;if(t)return VB(t)||qB(t)}return!1}function qDe(){try{if(x.version)return parseInt(x.version.split(".")[0],10)>=19}catch{}return!1}var GDe=class{constructor(e,{editor:t,props:n={},as:r="div",className:o=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),this.editor.isInitialized?pl.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const t=this.component,n=this.props,r=this.editor,o=qDe(),s=VDe(t),i={...n};i.ref&&!(o||s)&&delete i.ref,!i.ref&&(o||s)&&(i.ref=a=>{this.ref=a}),this.reactElement=h.jsx(t,{...i}),(e=r==null?void 0:r.contentComponent)==null||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)==null||e.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}};Me.createContext({markViewContentRef:()=>{}});var WDe=class extends U9e{constructor(e,t,n){if(super(e,t,n),this.selectionRafId=null,!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const r=this.dom.querySelector("[data-node-view-content]");if(!r)return;r.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(l={})=>this.updateAttributes(l),deleteNode:()=>this.deleteNode(),ref:x.createRef()};if(!this.component.displayName){const l=c=>c.charAt(0).toUpperCase()+c.substring(1);this.component.displayName=l(this.extension.name)}const r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:l=>{l&&this.contentDOMElement&&l.firstChild!==this.contentDOMElement&&(l.hasAttribute("data-node-view-wrapper")&&l.removeAttribute("data-node-view-wrapper"),l.appendChild(this.contentDOMElement))}},o=this.component,s=x.memo(l=>h.jsx(JQ.Provider,{value:r,children:x.createElement(o,l)}));s.displayName="ReactNodeView";let i=this.node.isInline?"span":"div";this.options.as&&(i=this.options.as);const{className:a=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new GDe(s,{editor:this.editor,props:e,as:i,className:`node-${this.node.type.name} ${a}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!((e=this.renderer.element.firstElementChild)!=null&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null),this.selectionRafId=requestAnimationFrame(()=>{this.selectionRafId=null;const{from:e,to:t}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(e<=n&&t>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}})}update(e,t,n){const r=o=>{this.renderer.updateProps(o),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const o=this.node,s=this.decorations,i=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:o,oldDecorations:s,newNode:e,newDecorations:t,oldInnerDecorations:i,innerDecorations:n,updateProps:()=>r({node:e,decorations:t,innerDecorations:n})})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,r({node:e,decorations:t,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null,this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null)}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,n=$x(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}};function YDe(e,t){return n=>n.editor.contentComponent?new WDe(e,n,t):{}}function Wi(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,s;for(s=0;s<r.length;s++)o=r[s],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var KDe=["color"],XQ=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,KDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M4.18179 6.18181C4.35753 6.00608 4.64245 6.00608 4.81819 6.18181L7.49999 8.86362L10.1818 6.18181C10.3575 6.00608 10.6424 6.00608 10.8182 6.18181C10.9939 6.35755 10.9939 6.64247 10.8182 6.81821L7.81819 9.81821C7.73379 9.9026 7.61934 9.95001 7.49999 9.95001C7.38064 9.95001 7.26618 9.9026 7.18179 9.81821L4.18179 6.81821C4.00605 6.64247 4.00605 6.35755 4.18179 6.18181Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),ZDe=["color"],JDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,ZDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),XDe=["color"],QDe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,XDe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M9.96424 2.68571C10.0668 2.42931 9.94209 2.13833 9.6857 2.03577C9.4293 1.93322 9.13832 2.05792 9.03576 2.31432L5.03576 12.3143C4.9332 12.5707 5.05791 12.8617 5.3143 12.9642C5.5707 13.0668 5.86168 12.9421 5.96424 12.6857L9.96424 2.68571ZM3.85355 5.14646C4.04882 5.34172 4.04882 5.6583 3.85355 5.85356L2.20711 7.50001L3.85355 9.14646C4.04882 9.34172 4.04882 9.6583 3.85355 9.85356C3.65829 10.0488 3.34171 10.0488 3.14645 9.85356L1.14645 7.85356C0.951184 7.6583 0.951184 7.34172 1.14645 7.14646L3.14645 5.14646C3.34171 4.9512 3.65829 4.9512 3.85355 5.14646ZM11.1464 5.14646C11.3417 4.9512 11.6583 4.9512 11.8536 5.14646L13.8536 7.14646C14.0488 7.34172 14.0488 7.6583 13.8536 7.85356L11.8536 9.85356C11.6583 10.0488 11.3417 10.0488 11.1464 9.85356C10.9512 9.6583 10.9512 9.34172 11.1464 9.14646L12.7929 7.50001L11.1464 5.85356C10.9512 5.6583 10.9512 5.34172 11.1464 5.14646Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),eOe=["color"],tOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,eOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),nOe=["color"],QQ=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,nOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),rOe=["color"],oOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,rOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M7.50005 1.04999C7.74858 1.04999 7.95005 1.25146 7.95005 1.49999V8.41359L10.1819 6.18179C10.3576 6.00605 10.6425 6.00605 10.8182 6.18179C10.994 6.35753 10.994 6.64245 10.8182 6.81819L7.81825 9.81819C7.64251 9.99392 7.35759 9.99392 7.18185 9.81819L4.18185 6.81819C4.00611 6.64245 4.00611 6.35753 4.18185 6.18179C4.35759 6.00605 4.64251 6.00605 4.81825 6.18179L7.05005 8.41359V1.49999C7.05005 1.25146 7.25152 1.04999 7.50005 1.04999ZM2.5 10C2.77614 10 3 10.2239 3 10.5V12C3 12.5539 3.44565 13 3.99635 13H11.0012C11.5529 13 12 12.5528 12 12V10.5C12 10.2239 12.2239 10 12.5 10C12.7761 10 13 10.2239 13 10.5V12C13 13.1041 12.1062 14 11.0012 14H3.99635C2.89019 14 2 13.103 2 12V10.5C2 10.2239 2.22386 10 2.5 10Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),sOe=["color"],iOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,sOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M3 2C2.44772 2 2 2.44772 2 3V12C2 12.5523 2.44772 13 3 13H12C12.5523 13 13 12.5523 13 12V8.5C13 8.22386 12.7761 8 12.5 8C12.2239 8 12 8.22386 12 8.5V12H3V3L6.5 3C6.77614 3 7 2.77614 7 2.5C7 2.22386 6.77614 2 6.5 2H3ZM12.8536 2.14645C12.9015 2.19439 12.9377 2.24964 12.9621 2.30861C12.9861 2.36669 12.9996 2.4303 13 2.497L13 2.5V2.50049V5.5C13 5.77614 12.7761 6 12.5 6C12.2239 6 12 5.77614 12 5.5V3.70711L6.85355 8.85355C6.65829 9.04882 6.34171 9.04882 6.14645 8.85355C5.95118 8.65829 5.95118 8.34171 6.14645 8.14645L11.2929 3H9.5C9.22386 3 9 2.77614 9 2.5C9 2.22386 9.22386 2 9.5 2H12.4999H12.5C12.5678 2 12.6324 2.01349 12.6914 2.03794C12.7504 2.06234 12.8056 2.09851 12.8536 2.14645Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),aOe=["color"],lOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,aOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M5.10505 12C4.70805 12 4.4236 11.912 4.25171 11.736C4.0839 11.5559 4 11.2715 4 10.8827V4.11733C4 3.72033 4.08595 3.43588 4.25784 3.26398C4.43383 3.08799 4.71623 3 5.10505 3C6.42741 3 8.25591 3 9.02852 3C10.1373 3 11.0539 3.98153 11.0539 5.1846C11.0539 6.08501 10.6037 6.81855 9.70327 7.23602C10.8657 7.44851 11.5176 8.62787 11.5176 9.48128C11.5176 10.5125 10.9902 12 9.27734 12C8.77742 12 6.42626 12 5.10505 12ZM8.37891 8.00341H5.8V10.631H8.37891C8.9 10.631 9.6296 10.1211 9.6296 9.29877C9.6296 8.47643 8.9 8.00341 8.37891 8.00341ZM5.8 4.36903V6.69577H8.17969C8.53906 6.69577 9.27734 6.35939 9.27734 5.50002C9.27734 4.64064 8.48047 4.36903 8.17969 4.36903H5.8Z",fill:r}))}),cOe=["color"],uOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,cOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M5.67494 3.50017C5.67494 3.25164 5.87641 3.05017 6.12494 3.05017H10.6249C10.8735 3.05017 11.0749 3.25164 11.0749 3.50017C11.0749 3.7487 10.8735 3.95017 10.6249 3.95017H9.00587L7.2309 11.05H8.87493C9.12345 11.05 9.32493 11.2515 9.32493 11.5C9.32493 11.7486 9.12345 11.95 8.87493 11.95H4.37493C4.1264 11.95 3.92493 11.7486 3.92493 11.5C3.92493 11.2515 4.1264 11.05 4.37493 11.05H5.99397L7.76894 3.95017H6.12494C5.87641 3.95017 5.67494 3.7487 5.67494 3.50017Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),dOe=["color"],fOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,dOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),hOe=["color"],pOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,hOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M8.51194 3.00541C9.18829 2.54594 10.0435 2.53694 10.6788 2.95419C10.8231 3.04893 10.9771 3.1993 11.389 3.61119C11.8009 4.02307 11.9513 4.17714 12.046 4.32141C12.4633 4.95675 12.4543 5.81192 11.9948 6.48827C11.8899 6.64264 11.7276 6.80811 11.3006 7.23511L10.6819 7.85383C10.4867 8.04909 10.4867 8.36567 10.6819 8.56093C10.8772 8.7562 11.1938 8.7562 11.389 8.56093L12.0077 7.94221L12.0507 7.89929C12.4203 7.52976 12.6568 7.2933 12.822 7.0502C13.4972 6.05623 13.5321 4.76252 12.8819 3.77248C12.7233 3.53102 12.4922 3.30001 12.1408 2.94871L12.0961 2.90408L12.0515 2.85942C11.7002 2.508 11.4692 2.27689 11.2277 2.11832C10.2377 1.46813 8.94398 1.50299 7.95001 2.17822C7.70691 2.34336 7.47044 2.57991 7.1009 2.94955L7.058 2.99247L6.43928 3.61119C6.24401 3.80645 6.24401 4.12303 6.43928 4.31829C6.63454 4.51355 6.95112 4.51355 7.14638 4.31829L7.7651 3.69957C8.1921 3.27257 8.35757 3.11027 8.51194 3.00541ZM4.31796 7.14672C4.51322 6.95146 4.51322 6.63487 4.31796 6.43961C4.12269 6.24435 3.80611 6.24435 3.61085 6.43961L2.99213 7.05833L2.94922 7.10124C2.57957 7.47077 2.34303 7.70724 2.17788 7.95035C1.50265 8.94432 1.4678 10.238 2.11799 11.2281C2.27656 11.4695 2.50766 11.7005 2.8591 12.0518L2.90374 12.0965L2.94837 12.1411C3.29967 12.4925 3.53068 12.7237 3.77214 12.8822C4.76219 13.5324 6.05589 13.4976 7.04986 12.8223C7.29296 12.6572 7.52943 12.4206 7.89896 12.051L7.89897 12.051L7.94188 12.0081L8.5606 11.3894C8.75586 11.1941 8.75586 10.8775 8.5606 10.6823C8.36533 10.487 8.04875 10.487 7.85349 10.6823L7.23477 11.301C6.80777 11.728 6.6423 11.8903 6.48794 11.9951C5.81158 12.4546 4.95642 12.4636 4.32107 12.0464C4.17681 11.9516 4.02274 11.8012 3.61085 11.3894C3.19896 10.9775 3.0486 10.8234 2.95385 10.6791C2.53661 10.0438 2.54561 9.18863 3.00507 8.51227C3.10993 8.35791 3.27224 8.19244 3.69924 7.76544L4.31796 7.14672ZM9.62172 6.08558C9.81698 5.89032 9.81698 5.57373 9.62172 5.37847C9.42646 5.18321 9.10988 5.18321 8.91461 5.37847L5.37908 8.91401C5.18382 9.10927 5.18382 9.42585 5.37908 9.62111C5.57434 9.81637 5.89092 9.81637 6.08619 9.62111L9.62172 6.08558Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),mOe=["color"],gOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,mOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M4.50021 0C4.77635 0 5.0002 0.223853 5.0002 0.49999V2.49995C5.0002 2.77609 4.77635 2.99994 4.50021 2.99994C4.22408 2.99994 4.00022 2.77609 4.00022 2.49995V0.49999C4.00022 0.223853 4.22408 0 4.50021 0ZM0.646451 0.64647C0.84171 0.451212 1.15829 0.451212 1.35354 0.64647L2.85351 2.14644C3.04877 2.3417 3.04877 2.65827 2.85351 2.85353C2.65826 3.04879 2.34168 3.04879 2.14642 2.85353L0.646452 1.35356C0.451193 1.1583 0.451193 0.841728 0.646451 0.64647ZM0.00030517 4.49991C0.00030517 4.22377 0.224158 3.99992 0.500295 3.99992H2.50025C2.77639 3.99992 3.00024 4.22377 3.00024 4.49991C3.00024 4.77605 2.77639 4.9999 2.50025 4.9999H0.500295C0.224158 4.9999 0.00030517 4.77605 0.00030517 4.49991ZM12.0001 10.4998C12.0001 10.2236 12.2239 9.9998 12.5001 9.9998H14.5C14.7761 9.9998 15 10.2236 15 10.4998C15 10.7759 14.7761 10.9998 14.5 10.9998H12.5001C12.2239 10.9998 12.0001 10.7759 12.0001 10.4998ZM10.5001 11.9998C10.7762 11.9998 11.0001 12.2236 11.0001 12.4997V14.4997C11.0001 14.7758 10.7762 14.9997 10.5001 14.9997C10.224 14.9997 10.0001 14.7758 10.0001 14.4997V12.4997C10.0001 12.2236 10.224 11.9998 10.5001 11.9998ZM12.1462 12.1462C12.3415 11.951 12.658 11.951 12.8533 12.1462L14.3533 13.6462C14.5485 13.8415 14.5485 14.158 14.3533 14.3533C14.158 14.5485 13.8414 14.5485 13.6462 14.3533L12.1462 12.8533C11.951 12.6581 11.951 12.3415 12.1462 12.1462ZM7.76478 3.69938C8.19177 3.27238 8.35724 3.11008 8.5116 3.00522C9.18794 2.54577 10.0431 2.53677 10.6784 2.95401C10.8227 3.04875 10.9767 3.19911 11.3886 3.61099C11.8005 4.02287 11.9509 4.17694 12.0456 4.3212C12.4628 4.95653 12.4539 5.81168 11.9944 6.48802C11.8895 6.64238 11.7272 6.80785 11.3002 7.23484L10.6815 7.85354C10.4863 8.0488 10.4863 8.36538 10.6815 8.56064C10.8768 8.75589 11.1934 8.75589 11.3886 8.56064L12.0073 7.94193L12.0502 7.89903C12.4199 7.5295 12.6564 7.29303 12.8216 7.04993C13.4968 6.05598 13.5316 4.7623 12.8815 3.77228C12.7229 3.53083 12.4918 3.29982 12.1404 2.94853L12.0957 2.9039L12.0511 2.85925C11.6998 2.50782 11.4688 2.27672 11.2273 2.11816C10.2373 1.46798 8.94364 1.50284 7.94968 2.17805C7.70659 2.34319 7.47012 2.57973 7.1006 2.94936L7.1006 2.94937L7.05769 2.99228L6.43898 3.61099C6.24372 3.80625 6.24372 4.12282 6.43898 4.31808C6.63424 4.51334 6.95081 4.51334 7.14607 4.31808L7.76478 3.69938ZM2.99191 7.05807L2.94899 7.10097C2.57935 7.4705 2.34282 7.70697 2.17767 7.95006C1.50246 8.94401 1.4676 10.2377 2.11778 11.2277C2.27634 11.4692 2.50744 11.7002 2.85886 12.0515L2.85888 12.0515L2.90352 12.0961L2.94815 12.1407L2.94815 12.1407L2.94817 12.1408C3.29945 12.4922 3.53045 12.7233 3.7719 12.8818C4.76193 13.532 6.0556 13.4972 7.04956 12.8219C7.29265 12.6568 7.52912 12.4203 7.89865 12.0506L7.94155 12.0077L8.56026 11.389C8.75552 11.1937 8.75552 10.8772 8.56026 10.6819C8.365 10.4867 8.04842 10.4867 7.85317 10.6819L7.23446 11.3006C6.80747 11.7276 6.642 11.8899 6.48764 11.9948C5.8113 12.4542 4.95615 12.4632 4.32082 12.046C4.17656 11.9512 4.02249 11.8009 3.61061 11.389C3.19873 10.9771 3.04837 10.8231 2.95363 10.6788C2.53639 10.0435 2.54539 9.18832 3.00484 8.51198C3.10971 8.35761 3.27201 8.19215 3.699 7.76516L4.3177 7.14645C4.51296 6.95119 4.51296 6.63462 4.3177 6.43936C4.12245 6.2441 3.80587 6.2441 3.61061 6.43936L2.99191 7.05807Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),bOe=["color"],eee=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,bOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M1.5 5.25C1.91421 5.25 2.25 4.91421 2.25 4.5C2.25 4.08579 1.91421 3.75 1.5 3.75C1.08579 3.75 0.75 4.08579 0.75 4.5C0.75 4.91421 1.08579 5.25 1.5 5.25ZM4 4.5C4 4.22386 4.22386 4 4.5 4H13.5C13.7761 4 14 4.22386 14 4.5C14 4.77614 13.7761 5 13.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM4.5 7C4.22386 7 4 7.22386 4 7.5C4 7.77614 4.22386 8 4.5 8H13.5C13.7761 8 14 7.77614 14 7.5C14 7.22386 13.7761 7 13.5 7H4.5ZM4.5 10C4.22386 10 4 10.2239 4 10.5C4 10.7761 4.22386 11 4.5 11H13.5C13.7761 11 14 10.7761 14 10.5C14 10.2239 13.7761 10 13.5 10H4.5ZM2.25 7.5C2.25 7.91421 1.91421 8.25 1.5 8.25C1.08579 8.25 0.75 7.91421 0.75 7.5C0.75 7.08579 1.08579 6.75 1.5 6.75C1.91421 6.75 2.25 7.08579 2.25 7.5ZM1.5 11.25C1.91421 11.25 2.25 10.9142 2.25 10.5C2.25 10.0858 1.91421 9.75 1.5 9.75C1.08579 9.75 0.75 10.0858 0.75 10.5C0.75 10.9142 1.08579 11.25 1.5 11.25Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),yOe=["color"],vOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,yOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M11.5 3.04999C11.7485 3.04999 11.95 3.25146 11.95 3.49999V7.49999C11.95 7.74852 11.7485 7.94999 11.5 7.94999C11.2515 7.94999 11.05 7.74852 11.05 7.49999V4.58639L4.58638 11.05H7.49999C7.74852 11.05 7.94999 11.2515 7.94999 11.5C7.94999 11.7485 7.74852 11.95 7.49999 11.95L3.49999 11.95C3.38064 11.95 3.26618 11.9026 3.18179 11.8182C3.0974 11.7338 3.04999 11.6193 3.04999 11.5L3.04999 7.49999C3.04999 7.25146 3.25146 7.04999 3.49999 7.04999C3.74852 7.04999 3.94999 7.25146 3.94999 7.49999L3.94999 10.4136L10.4136 3.94999L7.49999 3.94999C7.25146 3.94999 7.04999 3.74852 7.04999 3.49999C7.04999 3.25146 7.25146 3.04999 7.49999 3.04999L11.5 3.04999Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),xOe=["color"],wOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,xOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M5.00003 3.25C5.00003 2.97386 4.77617 2.75 4.50003 2.75C4.22389 2.75 4.00003 2.97386 4.00003 3.25V7.10003H2.49998C2.27906 7.10003 2.09998 7.27912 2.09998 7.50003C2.09998 7.72094 2.27906 7.90003 2.49998 7.90003H4.00003V8.55C4.00003 10.483 5.56703 12.05 7.50003 12.05C9.43303 12.05 11 10.483 11 8.55V7.90003H12.5C12.7209 7.90003 12.9 7.72094 12.9 7.50003C12.9 7.27912 12.7209 7.10003 12.5 7.10003H11V3.25C11 2.97386 10.7762 2.75 10.5 2.75C10.2239 2.75 10 2.97386 10 3.25V7.10003H5.00003V3.25ZM5.00003 7.90003V8.55C5.00003 9.93071 6.11932 11.05 7.50003 11.05C8.88074 11.05 10 9.93071 10 8.55V7.90003H5.00003Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),EOe=["color"],_Oe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,EOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L11.9291 2.36383C11.9159 2.32246 11.897 2.28368 11.8732 2.24845C11.7923 2.12875 11.6554 2.05005 11.5001 2.05005H3.50005C3.29909 2.05005 3.1289 2.18178 3.07111 2.3636C3.05743 2.40665 3.05005 2.45249 3.05005 2.50007V4.50001C3.05005 4.74854 3.25152 4.95001 3.50005 4.95001C3.74858 4.95001 3.95005 4.74854 3.95005 4.50001V2.95005H6.95006V7.34284L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L6.95006 8.75705V12.0501H5.7544C5.50587 12.0501 5.3044 12.2515 5.3044 12.5001C5.3044 12.7486 5.50587 12.9501 5.7544 12.9501H9.2544C9.50293 12.9501 9.7044 12.7486 9.7044 12.5001C9.7044 12.2515 9.50293 12.0501 9.2544 12.0501H8.05006V7.65705L13.3536 2.35355ZM8.05006 6.24284L11.0501 3.24283V2.95005H8.05006V6.24284Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),SOe=["color"],TOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,SOe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),COe=["color"],kOe=x.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Wi(e,COe);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),x.createElement("path",{d:"M5.00001 2.75C5.00001 2.47386 4.77615 2.25 4.50001 2.25C4.22387 2.25 4.00001 2.47386 4.00001 2.75V8.05C4.00001 9.983 5.56702 11.55 7.50001 11.55C9.43301 11.55 11 9.983 11 8.05V2.75C11 2.47386 10.7762 2.25 10.5 2.25C10.2239 2.25 10 2.47386 10 2.75V8.05C10 9.43071 8.88072 10.55 7.50001 10.55C6.1193 10.55 5.00001 9.43071 5.00001 8.05V2.75ZM3.49998 13.1001C3.27906 13.1001 3.09998 13.2791 3.09998 13.5001C3.09998 13.721 3.27906 13.9001 3.49998 13.9001H11.5C11.7209 13.9001 11.9 13.721 11.9 13.5001C11.9 13.2791 11.7209 13.1001 11.5 13.1001H3.49998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const Zp=x.forwardRef(({isActive:e,children:t,tooltip:n,className:r,tooltipOptions:o,...s},i)=>{const a=h.jsx(qN,{size:"sm",ref:i,className:Qe("size-8 p-0",{"bg-accent":e},r),...s,children:t});return n?h.jsx(V1,{children:h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:a}),h.jsx(um,{...o,children:h.jsx("div",{className:"flex flex-col items-center text-center",children:n})})]})}):a});Zp.displayName="ToolbarButton";const AOe=()=>typeof window<"u",GB=()=>AOe()&&window.navigator.platform==="MacIntel",NOe={mod:GB()?{symbol:"",readable:"Command"}:{symbol:"Ctrl",readable:"Control"},alt:GB()?{symbol:"",readable:"Option"}:{symbol:"Alt",readable:"Alt"},shift:{symbol:"",readable:"Shift"}},tee=e=>NOe[e.toLowerCase()]||{symbol:e,readable:e},WB=(e,t)=>{switch(t){case"json":return e.getJSON();case"html":return e.isEmpty?"":e.getHTML();default:return e.getText()}},D6=(e,t={requireHostname:!1})=>{if(e.includes(`
`))return!1;try{const n=new URL(e);return["javascript:","file:","vbscript:",...t.allowBase64?[]:["data:"]].includes(n.protocol)?!1:t.allowBase64&&n.protocol==="data:"?/^data:image\/[a-z]+;base64,/.test(e):n.hostname?!0:n.protocol!==""&&(n.pathname.startsWith("//")||n.pathname.startsWith("http"))&&!t.requireHostname}catch{return!1}},IOe=(e,t={})=>{if(e)return t.allowBase64&&e.startsWith("data:image")?D6(e,{requireHostname:!1,allowBase64:!0})?e:void 0:D6(e,{requireHostname:!1,allowBase64:t.allowBase64})||/^(\/|#|mailto:|sms:|fax:|tel:)/.test(e)?e:`https://${e}`},ROe=async e=>{const n=await(await fetch(e)).blob();return new Promise((r,o)=>{const s=new FileReader;s.onloadend=()=>{typeof s.result=="string"?r(s.result):o(new Error("Failed to convert Blob to base64"))},s.onerror=o,s.readAsDataURL(n)})},Fx=()=>Math.random().toString(36).slice(2,11),_k=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{typeof r.result=="string"?t(r.result):n(new Error("Failed to convert File to base64"))},r.onerror=n,r.readAsDataURL(e)}),YB=(e,t,n,r,o)=>{const{isValidType:s,isValidSize:i}=MOe(e,t);s&&i?r.push(n):(s||o.push({file:e,reason:"type"}),i||o.push({file:e,reason:"size"}))},MOe=(e,{allowedMimeTypes:t,maxFileSize:n})=>{const r=e instanceof File?e.type:DOe(e),o=e instanceof File?e.size:atob(e.split(",")[1]).length,s=t.length===0||t.includes(r)||t.includes(`${r.split("/")[0]}/*`),i=!n||o<=n;return{isValidType:s,isValidSize:i}},DOe=e=>{const t=e.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/);return t&&t.length>1?t[1]:"unknown"},OOe=e=>{if(e.startsWith("data:")){const t=e.match(/^data:[^;]+;base64,(.+)$/);if(t&&t[1])e=t[1];else return!1}try{return btoa(atob(e))===e}catch{return!1}},ZS=(e,t)=>{const n=[],r=[];return e.forEach(o=>{const s="src"in o?o.src:o;s instanceof File?YB(s,t,o,n,r):typeof s=="string"&&(OOe(s)?t.allowBase64?YB(s,t,o,n,r):r.push({file:s,reason:"base64NotAllowed"}):IOe(s,{allowBase64:t.allowBase64})?n.push(o):r.push({file:s,reason:"invalidBase64"}))}),[n,r]},nee=x.forwardRef(({className:e,keys:t,...n},r)=>{const o=t.map(i=>tee(i)),s=o.map(i=>i.readable).join(" + ");return h.jsx("span",{"aria-label":s,className:Qe("inline-flex items-center gap-0.5",e),...n,ref:r,children:o.map(i=>h.jsx("kbd",{className:Qe("inline-block min-w-2.5 text-center align-baseline font-sans text-xs font-medium capitalize text-[rgb(156,157,160)]",e),...n,ref:r,children:i.symbol},i.symbol))})});nee.displayName="ShortcutKey";const ree=({editor:e,actions:t,activeActions:n=t.map(c=>c.value),mainActionCount:r=0,dropdownIcon:o,dropdownTooltip:s="More options",dropdownClassName:i="w-12",size:a,variant:l})=>{const{mainActions:c,dropdownActions:u}=x.useMemo(()=>{const y=t.filter(v=>n.includes(v.value)).sort((v,w)=>n.indexOf(v.value)-n.indexOf(w.value));return{mainActions:y.slice(0,r),dropdownActions:y.slice(r)}},[t,n,r]),f=x.useCallback(y=>h.jsx(Zp,{onClick:()=>y.action(e),disabled:!y.canExecute(e),isActive:y.isActive(e),tooltip:`${y.label} ${y.shortcuts.map(v=>tee(v).symbol).join(" ")}`,"aria-label":y.label,size:a,variant:l,children:y.icon},y.label),[e,a,l]),m=x.useCallback(y=>h.jsxs(cu,{onClick:()=>y.action(e),disabled:!y.canExecute(e),className:Qe("flex flex-row items-center justify-between gap-4",{"bg-accent":y.isActive(e)}),"aria-label":y.label,children:[h.jsx("span",{className:"grow",children:y.label}),h.jsx(nee,{keys:y.shortcuts})]},y.label),[e]),g=x.useMemo(()=>u.some(y=>y.isActive(e)),[u,e]);return h.jsxs(h.Fragment,{children:[c.map(f),u.length>0&&h.jsxs(mw,{children:[h.jsx(gw,{asChild:!0,children:h.jsx(Zp,{isActive:g,tooltip:s,"aria-label":s,className:Qe(i),size:a,variant:l,children:o||h.jsx(XQ,{className:"size-5"})})}),h.jsx(bw,{align:"start",className:"w-full",children:u.map(m)})]})]})},KB=[{value:"bold",label:"Bold",icon:h.jsx(lOe,{className:"size-5"}),action:e=>e.chain().focus().toggleBold().run(),isActive:e=>e.isActive("bold"),canExecute:e=>e.can().chain().focus().toggleBold().run()&&!e.isActive("codeBlock"),shortcuts:["mod","B"]},{value:"italic",label:"Italic",icon:h.jsx(uOe,{className:"size-5"}),action:e=>e.chain().focus().toggleItalic().run(),isActive:e=>e.isActive("italic"),canExecute:e=>e.can().chain().focus().toggleItalic().run()&&!e.isActive("codeBlock"),shortcuts:["mod","I"]},{value:"underline",label:"Underline",icon:h.jsx(kOe,{className:"size-5"}),action:e=>e.chain().focus().toggleUnderline().run(),isActive:e=>e.isActive("underline"),canExecute:e=>e.can().chain().focus().toggleUnderline().run()&&!e.isActive("codeBlock"),shortcuts:["mod","U"]},{value:"strikethrough",label:"Strikethrough",icon:h.jsx(wOe,{className:"size-5"}),action:e=>e.chain().focus().toggleStrike().run(),isActive:e=>e.isActive("strike"),canExecute:e=>e.can().chain().focus().toggleStrike().run()&&!e.isActive("codeBlock"),shortcuts:["mod","shift","S"]},{value:"code",label:"Code",icon:h.jsx(QDe,{className:"size-5"}),action:e=>e.chain().focus().toggleCode().run(),isActive:e=>e.isActive("code"),canExecute:e=>e.can().chain().focus().toggleCode().run()&&!e.isActive("codeBlock"),shortcuts:["mod","E"]},{value:"clearFormatting",label:"Clear formatting",icon:h.jsx(_Oe,{className:"size-5"}),action:e=>e.chain().focus().unsetAllMarks().run(),isActive:()=>!1,canExecute:e=>e.can().chain().focus().unsetAllMarks().run()&&!e.isActive("codeBlock"),shortcuts:["mod","\\"]}],oee=({editor:e,activeActions:t=KB.map(s=>s.value),mainActionCount:n=2,size:r,variant:o})=>h.jsx(ree,{editor:e,actions:KB,activeActions:t,mainActionCount:n,dropdownIcon:h.jsx(QQ,{className:"size-5"}),dropdownTooltip:"More formatting",dropdownClassName:"w-8",size:r,variant:o});oee.displayName="SectionTwo";const ZB=[{value:"orderedList",label:"Numbered list",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 -960 960 960",width:"20px",fill:"currentColor",children:h.jsx("path",{d:"M144-144v-48h96v-24h-48v-48h48v-24h-96v-48h120q10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v48q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9 10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v48q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9H144Zm0-240v-96q0-10.2 6.9-17.1 6.9-6.9 17.1-6.9h72v-24h-96v-48h120q10.2 0 17.1 6.9 6.9 6.9 6.9 17.1v72q0 10.2-6.9 17.1-6.9 6.9-17.1 6.9h-72v24h96v48H144Zm48-240v-144h-48v-48h96v192h-48Zm168 384v-72h456v72H360Zm0-204v-72h456v72H360Zm0-204v-72h456v72H360Z"})}),isActive:e=>e.isActive("orderedList"),action:e=>e.chain().focus().toggleOrderedList().run(),canExecute:e=>e.can().chain().focus().toggleOrderedList().run(),shortcuts:["mod","shift","7"]},{value:"bulletList",label:"Bullet list",icon:h.jsx(eee,{className:"size-5"}),isActive:e=>e.isActive("bulletList"),action:e=>e.chain().focus().toggleBulletList().run(),canExecute:e=>e.can().chain().focus().toggleBulletList().run(),shortcuts:["mod","shift","8"]}],see=({editor:e,activeActions:t=ZB.map(s=>s.value),mainActionCount:n=0,size:r,variant:o})=>h.jsx(ree,{editor:e,actions:ZB,activeActions:t,mainActionCount:n,dropdownIcon:h.jsxs(h.Fragment,{children:[h.jsx(eee,{className:"size-5"}),h.jsx(XQ,{className:"size-5"})]}),dropdownTooltip:"Lists",size:r,variant:o});see.displayName="SectionFour";let O6,P6;if(typeof WeakMap<"u"){let e=new WeakMap;O6=t=>e.get(t),P6=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;O6=r=>{for(let o=0;o<e.length;o+=2)if(e[o]==r)return e[o+1]},P6=(r,o)=>(n==10&&(n=0),e[n++]=r,e[n++]=o)}var Ef=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,o=t/this.width|0;let s=r+1,i=o+1;for(let a=1;s<this.width&&this.map[t+a]==n;a++)s++;for(let a=1;i<this.height&&this.map[t+this.width*a]==n;a++)i++;return{left:r,top:o,right:s,bottom:i}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:o,top:s,bottom:i}=this.findCell(e);return t=="horiz"?(n<0?r==0:o==this.width)?null:this.map[s*this.width+(n<0?r-1:o)]:(n<0?s==0:i==this.height)?null:this.map[r+this.width*(n<0?s-1:i)]}rectBetween(e,t){const{left:n,right:r,top:o,bottom:s}=this.findCell(e),{left:i,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,i),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let o=e.left;o<e.right;o++){const s=r*this.width+o,i=this.map[s];n[i]||(n[i]=!0,!(o==e.left&&o&&this.map[s-1]==i||r==e.top&&r&&this.map[s-this.width]==i)&&t.push(i))}return t}positionAt(e,t,n){for(let r=0,o=0;;r++){const s=o+n.child(r).nodeSize;if(r==e){let i=t+e*this.width;const a=(e+1)*this.width;for(;i<a&&this.map[i]<o;)i++;return i==a?s-1:this.map[i]}o=s}}static get(e){return O6(e)||P6(e,POe(e))}};function POe(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=LOe(e),n=e.childCount,r=[];let o=0,s=null;const i=[];for(let c=0,u=t*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const f=e.child(c);u++;for(let y=0;;y++){for(;o<r.length&&r[o]!=0;)o++;if(y==f.childCount)break;const v=f.child(y),{colspan:w,rowspan:_,colwidth:T}=v.attrs;for(let k=0;k<_;k++){if(k+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:_-k});break}const M=o+k*t;for(let D=0;D<w;D++){r[M+D]==0?r[M+D]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:w-D});const I=T&&T[D];if(I){const P=(M+D)%t*2,B=i[P];B==null||B!=I&&i[P+1]==1?(i[P]=I,i[P+1]=1):B==I&&i[P+1]++}}}o+=w,u+=v.nodeSize}const m=(c+1)*t;let g=0;for(;o<m;)r[o++]==0&&g++;g&&(s||(s=[])).push({type:"missing",row:c,n:g}),u++}(t===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new Ef(t,n,r,s);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&$Oe(a,i,e),a}function LOe(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const o=e.child(r);let s=0;if(n)for(let i=0;i<r;i++){const a=e.child(i);for(let l=0;l<a.childCount;l++){const c=a.child(l);i+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let i=0;i<o.childCount;i++){const a=o.child(i);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=s:t!=s&&(t=Math.max(t,s))}return t}function $Oe(e,t,n){e.problems||(e.problems=[]);const r={};for(let o=0;o<e.map.length;o++){const s=e.map[o];if(r[s])continue;r[s]=!0;const i=n.nodeAt(s);if(!i)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=i.attrs;for(let c=0;c<l.colspan;c++){const u=t[(o+c)%e.width*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=FOe(l)))[c]=u)}a&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function FOe(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function S7(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}}return t}new Bo("selectingCells");function BOe(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function iee(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function zOe(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=BOe(t.$head)||jOe(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function jOe(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function JB(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function aee(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function lee(e,t,n){const r=e.node(-1),o=Ef.get(r),s=e.start(-1),i=o.nextCell(e.pos-s,t,n);return i==null?null:e.node(0).resolve(s+i)}function XB(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}var xd=class yf extends Vn{constructor(t,n=t){const r=t.node(-1),o=Ef.get(r),s=t.start(-1),i=o.rectBetween(t.pos-s,n.pos-s),a=t.node(0),l=o.cellsInRect(i).filter(u=>u!=n.pos-s);l.unshift(n.pos-s);const c=l.map(u=>{const f=r.nodeAt(u);if(!f)throw new RangeError(`No cell with offset ${u} found`);const m=s+u+1;return new gX(a.resolve(m),a.resolve(m+f.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(JB(r)&&JB(o)&&aee(r,o)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?yf.rowSelection(r,o):s&&this.isColSelection()?yf.colSelection(r,o):new yf(r,o)}return qn.between(r,o)}content(){const t=this.$anchorCell.node(-1),n=Ef.get(t),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},i=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let u=l*n.width+o.left,f=o.left;f<o.right;f++,u++){const m=n.map[u];if(s[m])continue;s[m]=!0;const g=n.findCell(m);let y=t.nodeAt(m);if(!y)throw new RangeError(`No cell with offset ${m} found`);const v=o.left-g.left,w=g.right-o.right;if(v>0||w>0){let _=y.attrs;if(v>0&&(_=XB(_,0,v)),w>0&&(_=XB(_,_.colspan-w,w)),g.left<o.left){if(y=y.type.createAndFill(_),!y)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(_)}`)}else y=y.type.create(_,y.content)}if(g.top<o.top||g.bottom>o.bottom){const _={...y.attrs,rowspan:Math.min(g.bottom,o.bottom)-Math.max(g.top,o.top)};g.top<o.top?y=y.type.createAndFill(_):y=y.type.create(_,y.content)}c.push(y)}i.push(t.child(l).copy(bt.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?t:i;return new Zt(bt.from(a),1,1)}replace(t,n=Zt.empty){const r=t.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){const{$from:a,$to:l}=o[i],c=t.mapping.slice(r);t.replace(c.map(a.pos),c.map(l.pos),i?Zt.empty:n)}const s=Vn.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);s&&t.setSelection(s)}replaceWith(t,n){this.replace(t,new Zt(bt.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=Ef.get(n),o=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let i=0;i<s.length;i++)t(n.nodeAt(s[i]),o+s[i])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),o=Ef.get(r),s=t.start(-1),i=o.findCell(t.pos-s),a=o.findCell(n.pos-s),l=t.node(0);return i.top<=a.top?(i.top>0&&(t=l.resolve(s+o.map[i.left])),a.bottom<o.height&&(n=l.resolve(s+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+o.map[a.left])),i.bottom<o.height&&(t=l.resolve(s+o.map[o.width*(o.height-1)+i.right-1]))),new yf(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=Ef.get(t),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(o,s)>0)return!1;const i=o+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==n.width}eq(t){return t instanceof yf&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),o=Ef.get(r),s=t.start(-1),i=o.findCell(t.pos-s),a=o.findCell(n.pos-s),l=t.node(0);return i.left<=a.left?(i.left>0&&(t=l.resolve(s+o.map[i.top*o.width])),a.right<o.width&&(n=l.resolve(s+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+o.map[a.top*o.width])),i.right<o.width&&(t=l.resolve(s+o.map[o.width*(i.top+1)-1]))),new yf(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new yf(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new yf(t.resolve(n),t.resolve(r))}getBookmark(){return new UOe(this.$anchorCell.pos,this.$headCell.pos)}};xd.prototype.visible=!1;Vn.jsonID("cell",xd);var UOe=class cee{constructor(t,n){this.anchor=t,this.head=n}map(t){return new cee(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&aee(n,r)?new xd(n,r):Vn.near(r,1)}};new Bo("fix-tables");function uee(e){const t=e.selection,n=zOe(e),r=n.node(-1),o=n.start(-1),s=Ef.get(r);return{...t instanceof xd?s.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):s.findCell(n.pos-o),tableStart:o,map:s,table:r}}function HOe(e){return function(t,n){if(!iee(t))return!1;if(n){const r=S7(t.schema),o=uee(t),s=t.tr,i=o.map.cellsInRect(e=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:e=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=i.map(l=>o.table.nodeAt(l));for(let l=0;l<i.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(o.tableStart+i[l],r.cell,a[l].attrs);if(s.steps.length===0)for(let l=0;l<i.length;l++)s.setNodeMarkup(o.tableStart+i[l],r.header_cell,a[l].attrs);n(s)}return!0}}function QB(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let o=0;o<r.length;o++){const s=t.table.nodeAt(r[o]);if(s&&s.type!==n.header_cell)return!1}return!0}function T7(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?HOe(e):function(n,r){if(!iee(n))return!1;if(r){const o=S7(n.schema),s=uee(n),i=n.tr,a=QB("row",s,o),l=QB("column",s,o),c=(e==="column"?a:e==="row"&&l)?1:0,u=e=="column"?{left:0,top:c,right:1,bottom:s.map.height}:e=="row"?{left:c,top:0,right:s.map.width,bottom:1}:s,f=e=="column"?l?o.cell:o.header_cell:e=="row"?a?o.cell:o.header_cell:o.cell;s.map.cellsInRect(u).forEach(m=>{const g=m+s.tableStart,y=i.doc.nodeAt(g);y&&i.setNodeMarkup(g,f,y.attrs)}),r(i)}return!0}}T7("row",{useDeprecatedLogic:!0});T7("column",{useDeprecatedLogic:!0});T7("cell",{useDeprecatedLogic:!0});function R2(e,t){const n=e.selection;if(!(n instanceof xd))return!1;if(t){const r=e.tr,o=S7(e.schema).cell.createAndFill().content;n.forEachCell((s,i)=>{s.content.eq(o)||r.replace(r.mapping.map(i+1),r.mapping.map(i+s.nodeSize-1),new Zt(o,0,0))}),r.docChanged&&t(r)}return!0}d7({ArrowLeft:M2("horiz",-1),ArrowRight:M2("horiz",1),ArrowUp:M2("vert",-1),ArrowDown:M2("vert",1),"Shift-ArrowLeft":D2("horiz",-1),"Shift-ArrowRight":D2("horiz",1),"Shift-ArrowUp":D2("vert",-1),"Shift-ArrowDown":D2("vert",1),Backspace:R2,"Mod-Backspace":R2,Delete:R2,"Mod-Delete":R2});function R_(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function M2(e,t){return(n,r,o)=>{if(!o)return!1;const s=n.selection;if(s instanceof xd)return R_(n,r,Vn.near(s.$headCell,t));if(e!="horiz"&&!s.empty)return!1;const i=dee(o,e,t);if(i==null)return!1;if(e=="horiz")return R_(n,r,Vn.near(n.doc.resolve(s.head+t),t));{const a=n.doc.resolve(i),l=lee(a,e,t);let c;return l?c=Vn.near(l,1):t<0?c=Vn.near(n.doc.resolve(a.before(-1)),-1):c=Vn.near(n.doc.resolve(a.after(-1)),1),R_(n,r,c)}}}function D2(e,t){return(n,r,o)=>{if(!o)return!1;const s=n.selection;let i;if(s instanceof xd)i=s;else{const l=dee(o,e,t);if(l==null)return!1;i=new xd(n.doc.resolve(l))}const a=lee(i.$headCell,e,t);return a?R_(n,r,new xd(i.$anchorCell,a)):!1}}function dee(e,t,n){if(!(e.state.selection instanceof qn))return null;const{$head:r}=e.state.selection;for(let o=r.depth-1;o>=0;o--){const s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const i=r.before(o),a=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(a)?i:null}}return null}new Bo("tableColumnResizing");function VOe(e,t){const n=Math.min(e.top,t.top),r=Math.max(e.bottom,t.bottom),o=Math.min(e.left,t.left),i=Math.max(e.right,t.right)-o,a=r-n,l=o,c=n;return new DOMRect(l,c,i,a)}var qOe=class{constructor({editor:e,element:t,view:n,updateDelay:r=250,resizeDelay:o=60,shouldShow:s,appendTo:i,getReferencedVirtualElement:a,options:l}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:u,state:f,from:m,to:g})=>{const{doc:y,selection:v}=f,{empty:w}=v,_=!y.textBetween(m,g).length&&p7(f.selection),T=this.element.contains(document.activeElement);return!(!(u.hasFocus()||T)||w||_||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var f;if(this.editor.isDestroyed){this.destroy();return}if(this.preventHide){this.preventHide=!1;return}u!=null&&u.relatedTarget&&((f=this.element.parentNode)!=null&&f.contains(u.relatedTarget))||(u==null?void 0:u.relatedTarget)!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(u,f)=>{const m=!(f!=null&&f.selection.eq(u.state.selection)),g=!(f!=null&&f.doc.eq(u.state.doc));!m&&!g||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,m,g,f)},this.updateDelay))},this.updateHandler=(u,f,m,g)=>{const{composing:y}=u;if(y||!f&&!m)return;if(!this.getShouldShow(g)){this.hide();return}this.updatePosition(),this.show()},this.transactionHandler=({transaction:u})=>{u.getMeta("bubbleMenu")==="updatePosition"&&this.updatePosition()};var c;this.editor=e,this.element=t,this.view=n,this.updateDelay=r,this.resizeDelay=o,this.appendTo=i,this.scrollTarget=(c=l==null?void 0:l.scrollTarget)!=null?c:window,this.getReferencedVirtualElement=a,this.floatingUIOptions={...this.floatingUIOptions,...l},this.element.tabIndex=0,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(RR(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(IR(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(NR(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push(rS(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(MR(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(NG(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push(DR(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(IG(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),e}get virtualElement(){var e;const{selection:t}=this.editor.state,n=(e=this.getReferencedVirtualElement)==null?void 0:e.call(this);if(n)return n;const r=IQ(this.view,t.from,t.to);let o={getBoundingClientRect:()=>r,getClientRects:()=>[r]};if(t instanceof Nn){let s=this.view.nodeDOM(t.from);const i=s.dataset.nodeViewWrapper?s:s.querySelector("[data-node-view-wrapper]");i&&(s=i),s&&(o={getBoundingClientRect:()=>s.getBoundingClientRect(),getClientRects:()=>[s.getBoundingClientRect()]})}if(t instanceof xd){const{$anchorCell:s,$headCell:i}=t,a=s?s.pos:i.pos,l=i?i.pos:s.pos,c=this.view.nodeDOM(a),u=this.view.nodeDOM(l);if(!c||!u)return;const f=c===u?c.getBoundingClientRect():VOe(c.getBoundingClientRect(),u.getBoundingClientRect());o={getBoundingClientRect:()=>f,getClientRects:()=>[f]}}return o}updatePosition(){const e=this.virtualElement;e&&OR(e,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:t,y:n,strategy:r})=>{this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${t}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const{state:n}=e,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(e,t);return}const o=!(t!=null&&t.selection.eq(e.state.selection)),s=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,o,s,t)}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:o}=r,s=Math.min(...o.map(l=>l.$from.pos)),i=Math.max(...o.map(l=>l.$to.pos));return((t=this.shouldShow)==null?void 0:t.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:e,from:s,to:i}))||!1}show(){var e;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const t=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(e=t??this.view.dom.parentElement)==null||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},fee=e=>new vo({key:typeof e.pluginKey=="string"?new Bo(e.pluginKey):e.pluginKey,view:t=>new qOe({view:t,...e})});Gr.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[fee({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}});var GOe=class{constructor({editor:e,element:t,view:n,options:r,appendTo:o,shouldShow:s}){this.preventHide=!1,this.isVisible=!1,this.shouldShow=({view:i,state:a})=>{const{selection:l}=a,{$anchor:c,empty:u}=l,f=c.depth===1,m=c.parent.isTextblock&&!c.parent.type.spec.code&&!c.parent.textContent&&c.parent.childCount===0&&!this.getTextContent(c.parent);return!(!i.hasFocus()||!u||!f||!m||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(i,a,l,c)=>{const{composing:u}=i;if(u||!a&&!l)return;if(!this.getShouldShow(c)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:i})=>{var a;if(this.preventHide){this.preventHide=!1;return}i!=null&&i.relatedTarget&&((a=this.element.parentNode)!=null&&a.contains(i.relatedTarget))||(i==null?void 0:i.relatedTarget)!==this.editor.view.dom&&this.hide()},this.editor=e,this.element=t,this.view=n,this.appendTo=o,this.floatingUIOptions={...this.floatingUIOptions,...r},this.element.tabIndex=0,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}getTextContent(e){return SQ(e,{textSerializers:y7(this.editor.schema)})}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(RR(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(IR(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(NR(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push(rS(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(MR(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(NG(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push(DR(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(IG(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),e}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:o}=r,s=Math.min(...o.map(l=>l.$from.pos)),i=Math.max(...o.map(l=>l.$to.pos));return(t=this.shouldShow)==null?void 0:t.call(this,{editor:this.editor,view:this.view,state:n,oldState:e,from:s,to:i})}updatePosition(){const{selection:e}=this.editor.state,t=IQ(this.view,e.from,e.to);OR({getBoundingClientRect:()=>t,getClientRects:()=>[t]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:o,strategy:s})=>{this.element.style.width="max-content",this.element.style.position=s,this.element.style.left=`${r}px`,this.element.style.top=`${o}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const n=!(t!=null&&t.selection.eq(e.state.selection)),r=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,n,r,t)}show(){var e;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const t=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(e=t??this.view.dom.parentElement)==null||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},hee=e=>new vo({key:typeof e.pluginKey=="string"?new Bo(e.pluginKey):e.pluginKey,view:t=>new GOe({view:t,...e})});Gr.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[hee({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var WOe=Me.forwardRef(({pluginKey:e="bubbleMenu",editor:t,updateDelay:n,resizeDelay:r,appendTo:o,shouldShow:s=null,getReferencedVirtualElement:i,options:a,children:l,...c},u)=>{const f=x.useRef(document.createElement("div"));typeof u=="function"?u(f.current):u&&(u.current=f.current);const{editor:m}=ZQ(),g=t||m,y={updateDelay:n,resizeDelay:r,appendTo:o,pluginKey:e,shouldShow:s,getReferencedVirtualElement:i,options:a},v=x.useRef(y);return v.current=y,x.useEffect(()=>{if(g!=null&&g.isDestroyed)return;if(!g){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const w=f.current;w.style.visibility="hidden",w.style.position="absolute";const _=fee({...v.current,editor:g,element:w});g.registerPlugin(_);const T=v.current.pluginKey;return()=>{g.unregisterPlugin(T),window.requestAnimationFrame(()=>{w.parentNode&&w.parentNode.removeChild(w)})}},[g]),pl.createPortal(h.jsx("div",{...c,children:l}),f.current)});Me.forwardRef(({pluginKey:e="floatingMenu",editor:t,appendTo:n,shouldShow:r=null,options:o,children:s,...i},a)=>{const l=x.useRef(document.createElement("div"));typeof a=="function"?a(l.current):a&&(a.current=l.current);const{editor:c}=ZQ();return x.useEffect(()=>{const u=l.current;if(u.style.visibility="hidden",u.style.position="absolute",t!=null&&t.isDestroyed||c!=null&&c.isDestroyed)return;const f=t||c;if(!f){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const m=hee({editor:f,element:u,pluginKey:e,appendTo:n,shouldShow:r,options:o});return f.registerPlugin(m),()=>{f.unregisterPlugin(e),window.requestAnimationFrame(()=>{u.parentNode&&u.parentNode.removeChild(u)})}},[t,c,n,e,r,o]),pl.createPortal(h.jsx("div",{...i,children:s}),l.current)});var AC="Switch",[YOe]=Ha(AC),[KOe,ZOe]=YOe(AC),pee=x.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:s,required:i,disabled:a,value:l="on",onCheckedChange:c,form:u,...f}=e,[m,g]=x.useState(null),y=Rr(t,k=>g(k)),v=x.useRef(!1),w=m?u||!!m.closest("form"):!0,[_,T]=bl({prop:o,defaultProp:s??!1,onChange:c,caller:AC});return h.jsxs(KOe,{scope:n,checked:_,disabled:a,children:[h.jsx(Pn.button,{type:"button",role:"switch","aria-checked":_,"aria-required":i,"data-state":yee(_),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:y,onClick:Gt(e.onClick,k=>{T(M=>!M),w&&(v.current=k.isPropagationStopped(),v.current||k.stopPropagation())})}),w&&h.jsx(bee,{control:m,bubbles:!v.current,name:r,value:l,checked:_,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});pee.displayName=AC;var mee="SwitchThumb",gee=x.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,o=ZOe(mee,n);return h.jsx(Pn.span,{"data-state":yee(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:t})});gee.displayName=mee;var JOe="SwitchBubbleInput",bee=x.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...o},s)=>{const i=x.useRef(null),a=Rr(i,s),l=tC(n),c=T4(t);return x.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&g){const y=new Event("click",{bubbles:r});g.call(u,n),u.dispatchEvent(y)}},[l,n,r]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:a,style:{...o.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});bee.displayName=JOe;function yee(e){return e?"checked":"unchecked"}var XOe=pee,QOe=gee;function ePe({className:e,...t}){return h.jsx(XOe,{"data-slot":"switch",className:Qe("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:h.jsx(QOe,{"data-slot":"switch-thumb",className:Qe("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const vee=x.forwardRef(({onSave:e,defaultIsNewTab:t,defaultUrl:n,defaultText:r,className:o},s)=>{const i=x.useRef(null),[a,l]=x.useState(n||""),[c,u]=x.useState(r||""),[f,m]=x.useState(t||!1),g=x.useCallback(y=>{y.preventDefault(),i.current&&(Array.from(i.current.querySelectorAll("input")).every(w=>w.checkValidity())?e(a,c,f):i.current.querySelectorAll("input").forEach(w=>{w.checkValidity()||w.reportValidity()}))},[e,a,c,f]);return x.useImperativeHandle(s,()=>i.current),h.jsx("div",{ref:i,children:h.jsxs("div",{className:Qe("space-y-4",o),children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(Hl,{children:"URL"}),h.jsx(wd,{type:"url",required:!0,placeholder:"Enter URL",value:a,onChange:y=>l(y.target.value)})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(Hl,{children:"Display Text (optional)"}),h.jsx(wd,{type:"text",placeholder:"Enter display text",value:c,onChange:y=>u(y.target.value)})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Hl,{children:"Open in New Tab"}),h.jsx(ePe,{checked:f,onCheckedChange:m})]}),h.jsx("div",{className:"flex justify-end space-x-2",children:h.jsx(_r,{type:"button",onClick:g,children:"Save"})})]})})});vee.displayName="LinkEditBlock";const tPe=({url:e,onClear:t,onEdit:n})=>{const[r,o]=x.useState("Copy"),s=x.useCallback(a=>{a.preventDefault(),navigator.clipboard.writeText(e).then(()=>{o("Copied!"),setTimeout(()=>o("Copy"),1e3)}).catch(console.error)},[e]),i=x.useCallback(()=>{window.open(e,"_blank","noopener,noreferrer")},[e]);return h.jsx("div",{className:"flex h-10 overflow-hidden rounded bg-background p-2 shadow-lg",children:h.jsxs("div",{className:"inline-flex items-center gap-1",children:[h.jsx(Zp,{tooltip:"Edit link",onClick:n,className:"w-auto px-2",children:"Edit link"}),h.jsx(Bf,{orientation:"vertical"}),h.jsx(Zp,{tooltip:"Open link in a new tab",onClick:i,children:h.jsx(iOe,{className:"size-4"})}),h.jsx(Bf,{orientation:"vertical"}),h.jsx(Zp,{tooltip:"Clear link",onClick:t,children:h.jsx(gOe,{className:"size-4"})}),h.jsx(Bf,{orientation:"vertical"}),h.jsx(Zp,{tooltip:r,onClick:s,tooltipOptions:{onPointerDownOutside:a=>{a.target===a.currentTarget&&a.preventDefault()}},children:h.jsx(tOe,{className:"size-4"})})]})})},nPe=({editor:e})=>{const[t,n]=x.useState(!1),[r,o]=x.useState({href:"",target:""}),[s,i]=x.useState(""),a=x.useCallback(()=>{const{from:m,to:g}=e.state.selection,{href:y,target:v}=e.getAttributes("link"),w=e.state.doc.textBetween(m,g," ");o({href:y,target:v}),i(w)},[e]),l=x.useCallback(({editor:m,from:g,to:y})=>{if(g===y)return!1;const{href:v}=m.getAttributes("link");return!m.isActive("link")||!m.isEditable?!1:v?(a(),!0):!1},[a]),c=x.useCallback(()=>{n(!0)},[]),u=x.useCallback((m,g,y)=>{e.chain().focus().extendMarkRange("link").insertContent({type:"text",text:g||m,marks:[{type:"link",attrs:{href:m,target:y?"_blank":""}}]}).setLink({href:m,target:y?"_blank":""}).run(),n(!1),a()},[e,a]),f=x.useCallback(()=>{e.chain().focus().extendMarkRange("link").unsetLink().run(),n(!1),a()},[e,a]);return h.jsx(WOe,{editor:e,shouldShow:l,tippyOptions:{placement:"bottom-start",onHidden:()=>n(!1)},children:t?h.jsx(vee,{defaultUrl:r.href,defaultText:s,defaultIsNewTab:r.target==="_blank",onSave:u,className:"w-full min-w-80 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-hidden"}):h.jsx(tPe,{onClear:f,url:r.href,onEdit:c})})};var JS=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},rPe=/^\s*>\s$/,oPe=xl.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return JS("blockquote",{...Ms(this.options.HTMLAttributes,e),children:JS("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",r=[];return e.content.forEach(o=>{const a=t.renderChildren([o]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ib({find:rPe,type:this.type})]}}),sPe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,iPe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,aPe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,lPe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,cPe=W0.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return JS("strong",{...Ms(this.options.HTMLAttributes,e),children:JS("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[sb({find:sPe,type:this.type}),sb({find:aPe,type:this.type})]},addPasteRules(){return[wm({find:iPe,type:this.type}),wm({find:lPe,type:this.type})]}}),uPe=/(^|[^`])`([^`]+)`(?!`)$/,dPe=/(^|[^`])`([^`]+)`(?!`)/g,fPe=W0.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Ms(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[sb({find:uPe,type:this.type})]},addPasteRules(){return[wm({find:dPe,type:this.type})]}}),Sk=4,hPe=/^```([a-z]+)?[\s\n]$/,pPe=/^~~~([a-z]+)?[\s\n]$/,xee=xl.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Sk,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Ms(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let r="";const o=((n=e.attrs)==null?void 0:n.language)||"";return e.content?r=[`\`\`\`${o}`,t.renderChildren(e.content),"```"].join(`
`):r=`\`\`\`${o}

\`\`\``,r},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:Sk,{state:r}=e,{selection:o}=r,{$from:s,empty:i}=o;if(s.parent.type!==this.type)return!1;const a=" ".repeat(n);return i?e.commands.insertContent(a):e.commands.command(({tr:l})=>{const{from:c,to:u}=o,g=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(y=>a+y).join(`
`);return l.replaceWith(c,u,r.schema.text(g)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:Sk,{state:r}=e,{selection:o}=r,{$from:s,empty:i}=o;return s.parent.type!==this.type?!1:i?e.commands.command(({tr:a})=>{var l;const{pos:c}=s,u=s.start(),f=s.end(),g=r.doc.textBetween(u,f,`
`,`
`).split(`
`);let y=0,v=0;const w=c-u;for(let I=0;I<g.length;I+=1){if(v+g[I].length>=w){y=I;break}v+=g[I].length+1}const T=((l=g[y].match(/^ */))==null?void 0:l[0])||"",k=Math.min(T.length,n);if(k===0)return!0;let M=u;for(let I=0;I<y;I+=1)M+=g[I].length+1;return a.delete(M,M+k),c-M<=k&&a.setSelection(qn.create(a.doc,M)),!0}):e.commands.command(({tr:a})=>{const{from:l,to:c}=o,m=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(g=>{var y;const v=((y=g.match(/^ */))==null?void 0:y[0])||"",w=Math.min(v.length,n);return g.slice(w)}).join(`
`);return a.replaceWith(l,c,r.schema.text(m)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!s||!i?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:o,empty:s}=n;if(!s||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();return a===void 0?!1:r.nodeAt(a)?e.commands.command(({tr:c})=>(c.setSelection(Vn.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[I6({find:hPe,type:this.type,getAttributes:e=>({language:e[1]})}),I6({find:pPe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new vo({key:new Bo("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,s=o==null?void 0:o.mode;if(!n||!s)return!1;const{tr:i,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:s},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(qn.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),e.dispatch(i),!0}}})]}}),mPe=xee,gPe=xl.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),bPe=xl.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Ms(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:o,storedMarks:s}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=s||o.$to.parentOffset&&o.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const f=l.filter(m=>a.includes(m.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),yPe=xl.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Ms(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const r=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,o="#".repeat(r);return e.content?`${o} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>I6({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),wee=xl.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Ms(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!O9e(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,o=e();return kQ(n)?o.insertContentAt(r.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({state:s,tr:i,dispatch:a})=>{if(a){const{$to:l}=i.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?i.setSelection(qn.create(i.doc,l.pos+1)):l.nodeAfter.isBlock?i.setSelection(Nn.create(i.doc,l.pos)):i.setSelection(qn.create(i.doc,l.pos));else{const u=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,f=u==null?void 0:u.create();f&&(i.insert(c,f),i.setSelection(qn.create(i.doc,c+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[qQ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),vPe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,xPe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,wPe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,EPe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,_Pe=W0.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Ms(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[sb({find:vPe,type:this.type}),sb({find:wPe,type:this.type})]},addPasteRules(){return[wm({find:xPe,type:this.type}),wm({find:EPe,type:this.type})]}});const SPe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",TPe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",L6="numeric",$6="ascii",F6="alpha",zv="asciinumeric",vv="alphanumeric",B6="domain",Eee="emoji",CPe="scheme",kPe="slashscheme",Tk="whitespace";function APe(e,t){return e in t||(t[e]=[]),t[e]}function Jp(e,t,n){t[L6]&&(t[zv]=!0,t[vv]=!0),t[$6]&&(t[zv]=!0,t[F6]=!0),t[zv]&&(t[vv]=!0),t[F6]&&(t[vv]=!0),t[vv]&&(t[B6]=!0),t[Eee]&&(t[B6]=!0);for(const r in t){const o=APe(r,n);o.indexOf(e)<0&&o.push(e)}}function NPe(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function hl(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}hl.groups={};hl.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const o=t.jr[r][0],s=t.jr[r][1];if(s&&o.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let o=0;o<e.length;o++)this.tt(e[o],t,n,r)},tr(e,t,n,r){r=r||hl.groups;let o;return t&&t.j?o=t:(o=new hl(t),n&&r&&Jp(t,n,r)),this.jr.push([e,o]),o},ts(e,t,n,r){let o=this;const s=e.length;if(!s)return o;for(let i=0;i<s-1;i++)o=o.tt(e[i]);return o.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||hl.groups;const o=this;if(t&&t.j)return o.j[e]=t,t;const s=t;let i,a=o.go(e);if(a?(i=new hl,Object.assign(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new hl,s){if(r)if(i.t&&typeof i.t=="string"){const l=Object.assign(NPe(i.t,r),n);Jp(s,l,r)}else n&&Jp(s,n,r);i.t=s}return o.j[e]=i,i}};const Er=(e,t,n,r,o)=>e.ta(t,n,r,o),Vs=(e,t,n,r,o)=>e.tr(t,n,r,o),ez=(e,t,n,r,o)=>e.ts(t,n,r,o),At=(e,t,n,r,o)=>e.tt(t,n,r,o),vf="WORD",z6="UWORD",_ee="ASCIINUMERICAL",See="ALPHANUMERICAL",Bx="LOCALHOST",j6="TLD",U6="UTLD",M_="SCHEME",a1="SLASH_SCHEME",C7="NUM",H6="WS",k7="NL",jv="OPENBRACE",Uv="CLOSEBRACE",XS="OPENBRACKET",QS="CLOSEBRACKET",eT="OPENPAREN",tT="CLOSEPAREN",nT="OPENANGLEBRACKET",rT="CLOSEANGLEBRACKET",oT="FULLWIDTHLEFTPAREN",sT="FULLWIDTHRIGHTPAREN",iT="LEFTCORNERBRACKET",aT="RIGHTCORNERBRACKET",lT="LEFTWHITECORNERBRACKET",cT="RIGHTWHITECORNERBRACKET",uT="FULLWIDTHLESSTHAN",dT="FULLWIDTHGREATERTHAN",fT="AMPERSAND",hT="APOSTROPHE",pT="ASTERISK",o0="AT",mT="BACKSLASH",gT="BACKTICK",bT="CARET",a0="COLON",A7="COMMA",yT="DOLLAR",nd="DOT",vT="EQUALS",N7="EXCLAMATION",yc="HYPHEN",Hv="PERCENT",xT="PIPE",wT="PLUS",ET="POUND",Vv="QUERY",I7="QUOTE",Tee="FULLWIDTHMIDDLEDOT",R7="SEMI",rd="SLASH",qv="TILDE",_T="UNDERSCORE",Cee="EMOJI",ST="SYM";var kee=Object.freeze({__proto__:null,ALPHANUMERICAL:See,AMPERSAND:fT,APOSTROPHE:hT,ASCIINUMERICAL:_ee,ASTERISK:pT,AT:o0,BACKSLASH:mT,BACKTICK:gT,CARET:bT,CLOSEANGLEBRACKET:rT,CLOSEBRACE:Uv,CLOSEBRACKET:QS,CLOSEPAREN:tT,COLON:a0,COMMA:A7,DOLLAR:yT,DOT:nd,EMOJI:Cee,EQUALS:vT,EXCLAMATION:N7,FULLWIDTHGREATERTHAN:dT,FULLWIDTHLEFTPAREN:oT,FULLWIDTHLESSTHAN:uT,FULLWIDTHMIDDLEDOT:Tee,FULLWIDTHRIGHTPAREN:sT,HYPHEN:yc,LEFTCORNERBRACKET:iT,LEFTWHITECORNERBRACKET:lT,LOCALHOST:Bx,NL:k7,NUM:C7,OPENANGLEBRACKET:nT,OPENBRACE:jv,OPENBRACKET:XS,OPENPAREN:eT,PERCENT:Hv,PIPE:xT,PLUS:wT,POUND:ET,QUERY:Vv,QUOTE:I7,RIGHTCORNERBRACKET:aT,RIGHTWHITECORNERBRACKET:cT,SCHEME:M_,SEMI:R7,SLASH:rd,SLASH_SCHEME:a1,SYM:ST,TILDE:qv,TLD:j6,UNDERSCORE:_T,UTLD:U6,UWORD:z6,WORD:vf,WS:H6});const mf=/[a-z]/,Yy=new RegExp("\\p{L}","u"),Ck=new RegExp("\\p{Emoji}","u"),gf=/\d/,kk=/\s/,tz="\r",Ak=`
`,IPe="",RPe="",Nk="";let O2=null,P2=null;function MPe(e=[]){const t={};hl.groups=t;const n=new hl;O2==null&&(O2=nz(SPe)),P2==null&&(P2=nz(TPe)),At(n,"'",hT),At(n,"{",jv),At(n,"}",Uv),At(n,"[",XS),At(n,"]",QS),At(n,"(",eT),At(n,")",tT),At(n,"<",nT),At(n,">",rT),At(n,"",oT),At(n,"",sT),At(n,"",iT),At(n,"",aT),At(n,"",lT),At(n,"",cT),At(n,"",uT),At(n,"",dT),At(n,"&",fT),At(n,"*",pT),At(n,"@",o0),At(n,"`",gT),At(n,"^",bT),At(n,":",a0),At(n,",",A7),At(n,"$",yT),At(n,".",nd),At(n,"=",vT),At(n,"!",N7),At(n,"-",yc),At(n,"%",Hv),At(n,"|",xT),At(n,"+",wT),At(n,"#",ET),At(n,"?",Vv),At(n,'"',I7),At(n,"/",rd),At(n,";",R7),At(n,"~",qv),At(n,"_",_T),At(n,"\\",mT),At(n,"",Tee);const r=Vs(n,gf,C7,{[L6]:!0});Vs(r,gf,r);const o=Vs(r,mf,_ee,{[zv]:!0}),s=Vs(r,Yy,See,{[vv]:!0}),i=Vs(n,mf,vf,{[$6]:!0});Vs(i,gf,o),Vs(i,mf,i),Vs(o,gf,o),Vs(o,mf,o);const a=Vs(n,Yy,z6,{[F6]:!0});Vs(a,mf),Vs(a,gf,s),Vs(a,Yy,a),Vs(s,gf,s),Vs(s,mf),Vs(s,Yy,s);const l=At(n,Ak,k7,{[Tk]:!0}),c=At(n,tz,H6,{[Tk]:!0}),u=Vs(n,kk,H6,{[Tk]:!0});At(n,Nk,u),At(c,Ak,l),At(c,Nk,u),Vs(c,kk,u),At(u,tz),At(u,Ak),Vs(u,kk,u),At(u,Nk,u);const f=Vs(n,Ck,Cee,{[Eee]:!0});At(f,"#"),Vs(f,Ck,f),At(f,IPe,f);const m=At(f,RPe);At(m,"#"),Vs(m,Ck,f);const g=[[mf,i],[gf,o]],y=[[mf,null],[Yy,a],[gf,s]];for(let v=0;v<O2.length;v++)Wh(n,O2[v],j6,vf,g);for(let v=0;v<P2.length;v++)Wh(n,P2[v],U6,z6,y);Jp(j6,{tld:!0,ascii:!0},t),Jp(U6,{utld:!0,alpha:!0},t),Wh(n,"file",M_,vf,g),Wh(n,"mailto",M_,vf,g),Wh(n,"http",a1,vf,g),Wh(n,"https",a1,vf,g),Wh(n,"ftp",a1,vf,g),Wh(n,"ftps",a1,vf,g),Jp(M_,{scheme:!0,ascii:!0},t),Jp(a1,{slashscheme:!0,ascii:!0},t),e=e.sort((v,w)=>v[0]>w[0]?1:-1);for(let v=0;v<e.length;v++){const w=e[v][0],T=e[v][1]?{[CPe]:!0}:{[kPe]:!0};w.indexOf("-")>=0?T[B6]=!0:mf.test(w)?gf.test(w)?T[zv]=!0:T[$6]=!0:T[L6]=!0,ez(n,w,w,T)}return ez(n,"localhost",Bx,{ascii:!0}),n.jd=new hl(ST),{start:n,tokens:Object.assign({groups:t},kee)}}function Aee(e,t){const n=DPe(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let s=0,i=0;for(;i<r;){let a=e,l=null,c=0,u=null,f=-1,m=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(f=0,m=0,u=a):f>=0&&(f+=n[i].length,m++),c+=n[i].length,s+=n[i].length,i++;s-=f,i-=m,c-=f,o.push({t:u.t,v:t.slice(s-c,s),s:s-c,e:s})}return o}function DPe(e){const t=[],n=e.length;let r=0;for(;r<n;){let o=e.charCodeAt(r),s,i=o<55296||o>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(i),r+=i.length}return t}function Wh(e,t,n,r,o){let s;const i=t.length;for(let a=0;a<i-1;a++){const l=t[a];e.j[l]?s=e.j[l]:(s=new hl(r),s.jr=o.slice(),e.j[l]=s),e=s}return s=new hl(n),s.jr=o.slice(),e.j[t[i-1]]=s,s}function nz(e){const t=[],n=[];let r=0,o="0123456789";for(;r<e.length;){let s=0;for(;o.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let i=parseInt(e.substring(r,r+s),10);i>0;i--)n.pop();r+=s}else n.push(e[r]),r++}return t}const zx={defaultProtocol:"http",events:null,format:rz,formatHref:rz,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function M7(e,t=null){let n=Object.assign({},zx);e&&(n=Object.assign(n,e instanceof M7?e.o:e));const r=n.ignoreTags,o=[];for(let s=0;s<r.length;s++)o.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}M7.prototype={o:zx,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let o=this.o[e];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:zx[e],typeof o=="function"&&r&&(o=o(t,n))):typeof o=="function"&&r&&(o=o(t,n.t,n)),o)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function rz(e){return e}function Nee(e,t){this.t="token",this.v=e,this.tk=t}Nee.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=zx.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),o=e.get("tagName",n,t),s=this.toFormattedString(e),i={},a=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),f=e.getObj("events",n,t);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),u&&Object.assign(i,u),{tagName:o,attributes:i,content:s,eventListeners:f}}};function NC(e,t){class n extends Nee{constructor(o,s){super(o,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const oz=NC("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),sz=NC("text"),OPe=NC("nl"),L2=NC("url",{isLink:!0,toHref(e=zx.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Bx&&e[1].t===a0}}),mc=e=>new hl(e);function PPe({groups:e}){const t=e.domain.concat([fT,pT,o0,mT,gT,bT,yT,vT,yc,C7,Hv,xT,wT,ET,rd,ST,qv,_T]),n=[hT,a0,A7,nd,N7,Hv,Vv,I7,R7,nT,rT,jv,Uv,QS,XS,eT,tT,oT,sT,iT,aT,lT,cT,uT,dT],r=[fT,hT,pT,mT,gT,bT,yT,vT,yc,jv,Uv,Hv,xT,wT,ET,Vv,rd,ST,qv,_T],o=mc(),s=At(o,qv);Er(s,r,s),Er(s,e.domain,s);const i=mc(),a=mc(),l=mc();Er(o,e.domain,i),Er(o,e.scheme,a),Er(o,e.slashscheme,l),Er(i,r,s),Er(i,e.domain,i);const c=At(i,o0);At(s,o0,c),At(a,o0,c),At(l,o0,c);const u=At(s,nd);Er(u,r,s),Er(u,e.domain,s);const f=mc();Er(c,e.domain,f),Er(f,e.domain,f);const m=At(f,nd);Er(m,e.domain,f);const g=mc(oz);Er(m,e.tld,g),Er(m,e.utld,g),At(c,Bx,g);const y=At(f,yc);At(y,yc,y),Er(y,e.domain,f),Er(g,e.domain,f),At(g,nd,m),At(g,yc,y);const v=At(g,a0);Er(v,e.numeric,oz);const w=At(i,yc),_=At(i,nd);At(w,yc,w),Er(w,e.domain,i),Er(_,r,s),Er(_,e.domain,i);const T=mc(L2);Er(_,e.tld,T),Er(_,e.utld,T),Er(T,e.domain,i),Er(T,r,s),At(T,nd,_),At(T,yc,w),At(T,o0,c);const k=At(T,a0),M=mc(L2);Er(k,e.numeric,M);const D=mc(L2),I=mc();Er(D,t,D),Er(D,n,I),Er(I,t,D),Er(I,n,I),At(T,rd,D),At(M,rd,D);const P=At(a,a0),B=At(l,a0),U=At(B,rd),j=At(U,rd);Er(a,e.domain,i),At(a,nd,_),At(a,yc,w),Er(l,e.domain,i),At(l,nd,_),At(l,yc,w),Er(P,e.domain,D),At(P,rd,D),At(P,Vv,D),Er(j,e.domain,D),Er(j,t,D),At(j,rd,D);const H=[[jv,Uv],[XS,QS],[eT,tT],[nT,rT],[oT,sT],[iT,aT],[lT,cT],[uT,dT]];for(let q=0;q<H.length;q++){const[z,Z]=H[q],X=At(D,z);At(I,z,X),At(X,Z,D);const J=mc(L2);Er(X,t,J);const ee=mc();Er(X,n),Er(J,t,J),Er(J,n,ee),Er(ee,t,J),Er(ee,n,ee),At(J,Z,D),At(ee,Z,D)}return At(o,Bx,T),At(o,k7,OPe),{start:o,tokens:kee}}function LPe(e,t,n){let r=n.length,o=0,s=[],i=[];for(;o<r;){let a=e,l=null,c=null,u=0,f=null,m=-1;for(;o<r&&!(l=a.go(n[o].t));)i.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(m=0,f=a):m>=0&&m++,o++,u++;if(m<0)o-=u,o<r&&(i.push(n[o]),o++);else{i.length>0&&(s.push(Ik(sz,t,i)),i=[]),o-=m,u-=m;const g=f.t,y=n.slice(o-u,o);s.push(Ik(g,t,y))}}return i.length>0&&s.push(Ik(sz,t,i)),s}function Ik(e,t,n){const r=n[0].s,o=n[n.length-1].e,s=t.slice(r,o);return new e(s,n)}const $Pe=typeof console<"u"&&console&&console.warn||(()=>{}),FPe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",cs={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function BPe(){return hl.groups={},cs.scanner=null,cs.parser=null,cs.tokenQueue=[],cs.pluginQueue=[],cs.customSchemes=[],cs.initialized=!1,cs}function iz(e,t=!1){if(cs.initialized&&$Pe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${FPe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);cs.customSchemes.push([e,t])}function zPe(){cs.scanner=MPe(cs.customSchemes);for(let e=0;e<cs.tokenQueue.length;e++)cs.tokenQueue[e][1]({scanner:cs.scanner});cs.parser=PPe(cs.scanner.tokens);for(let e=0;e<cs.pluginQueue.length;e++)cs.pluginQueue[e][1]({scanner:cs.scanner,parser:cs.parser});return cs.initialized=!0,cs}function D7(e){return cs.initialized||zPe(),LPe(cs.parser.start,e,Aee(cs.scanner.start,e))}D7.scan=Aee;function Iee(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new M7(n),o=D7(e),s=[];for(let i=0;i<o.length;i++){const a=o[i];a.isLink&&(!t||a.t===t)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var O7="[\0- -\u2029]",jPe=new RegExp(O7),UPe=new RegExp(`${O7}$`),HPe=new RegExp(O7,"g");function VPe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function qPe(e){return new vo({key:new Bo("autolink"),appendTransaction:(t,n,r)=>{const o=t.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=t.some(c=>c.getMeta("preventAutolink"));if(!o||s)return;const{tr:i}=r,a=vQ(n.doc,[...t]);if(CQ(a).forEach(({newRange:c})=>{const u=OMe(r.doc,c,g=>g.isTextblock);let f,m;if(u.length>1)f=u[0],m=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(u.length){const g=r.doc.textBetween(c.from,c.to," "," ");if(!UPe.test(g))return;f=u[0],m=r.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&m){const g=m.split(jPe).filter(Boolean);if(g.length<=0)return!1;const y=g[g.length-1],v=f.pos+m.lastIndexOf(y);if(!y)return!1;const w=D7(y).map(_=>_.toObject(e.defaultProtocol));if(!VPe(w))return!1;w.filter(_=>_.isLink).map(_=>({..._,from:v+_.start+1,to:v+_.end+1})).filter(_=>r.schema.marks.code?!r.doc.rangeHasMark(_.from,_.to,r.schema.marks.code):!0).filter(_=>e.validate(_.value)).filter(_=>e.shouldAutoLink(_.value)).forEach(_=>{v7(_.from,_.to,r.doc).some(T=>T.mark.type===e.type)||i.addMark(_.from,_.to,e.type.create({href:_.href}))})}}),!!i.steps.length)return i}})}function GPe(e){return new vo({key:new Bo("handleClickLink"),props:{handleClick:(t,n,r)=>{var o,s;if(r.button!==0||!t.editable)return!1;let i=!1;if(e.enableClickSelection&&(i=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let f=r.target;const m=[];for(;f.nodeName!=="DIV";)m.push(f),f=f.parentNode;a=m.find(g=>g.nodeName==="A")}if(!a)return i;const l=TQ(t.state,e.type.name),c=(o=a==null?void 0:a.href)!=null?o:l.href,u=(s=a==null?void 0:a.target)!=null?s:l.target;a&&c&&(window.open(c,u),i=!0)}return i}}})}function WPe(e){return new vo({key:new Bo("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:o}=e,{state:s}=t,{selection:i}=s,{empty:a}=i;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=Iee(l,{defaultProtocol:e.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||o!==void 0&&!o(c.href)?!1:e.editor.commands.setMark(e.type,{href:c.href})}}})}function Fp(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!e||e.replace(HPe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Ree=W0.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){iz(e);return}iz(e.scheme,e.optionalSlashes)})},onDestroy(){BPe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Fp(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!Fp(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!Fp(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ms(this.options.HTMLAttributes,e),0]:["a",Ms(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n;const r=((n=e.attrs)==null?void 0:n.href)||"";return`[${t.renderChildren(e)}](${r})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Fp(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Fp(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[wm({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,o=Iee(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:i=>!!Fp(i,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(s=>{this.options.shouldAutoLink(s.value)&&t.push({text:s.value,data:{href:s.href},index:s.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(qPe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!Fp(o,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(GPe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(WPe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),YPe=Ree,KPe=Object.defineProperty,ZPe=(e,t)=>{for(var n in t)KPe(e,n,{get:t[n],enumerable:!0})},JPe="listItem",az="textStyle",lz=/^\s*([-+*])\s$/,Mee=xl.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Ms(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(JPe,this.editor.getAttributes(az)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=ib({find:lz,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ib({find:lz,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(az),editor:this.editor})),[e]}}),Dee=xl.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Ms(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(o=>o.type==="paragraph"))n=t.parseChildren(e.tokens);else{const o=e.tokens[0];if(o&&o.type==="text"&&o.tokens&&o.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(o.tokens)}],e.tokens.length>1){const i=e.tokens.slice(1),a=t.parseChildren(i);n.push(...a)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>_7(e,t,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),XPe={};ZPe(XPe,{findListItemPos:()=>Dw,getNextListDepth:()=>P7,handleBackspace:()=>V6,handleDelete:()=>q6,hasListBefore:()=>Oee,hasListItemAfter:()=>QPe,hasListItemBefore:()=>Pee,listItemHasSubList:()=>Lee,nextListIsDeeper:()=>$ee,nextListIsHigher:()=>Fee});var Dw=(e,t)=>{const{$from:n}=t.selection,r=gi(e,t.schema);let o=null,s=n.depth,i=n.pos,a=null;for(;s>0&&a===null;)o=n.node(s),o.type===r?a=s:(s-=1,i-=1);return a===null?null:{$pos:t.doc.resolve(i),depth:a}},P7=(e,t)=>{const n=Dw(e,t);if(!n)return!1;const[,r]=HMe(t,e,n.$pos.pos+4);return r},Oee=(e,t,n)=>{const{$anchor:r}=e.selection,o=Math.max(0,r.pos-2),s=e.doc.resolve(o).node();return!(!s||!n.includes(s.type.name))},Pee=(e,t)=>{var n;const{$anchor:r}=t.selection,o=t.doc.resolve(r.pos-2);return!(o.index()===0||((n=o.nodeBefore)==null?void 0:n.type.name)!==e)},Lee=(e,t,n)=>{if(!n)return!1;const r=gi(e,t.schema);let o=!1;return n.descendants(s=>{s.type===r&&(o=!0)}),o},V6=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!I0(e.state,t)&&Oee(e.state,t,n)){const{$anchor:a}=e.state.selection,l=e.state.doc.resolve(a.before()-1),c=[];l.node().descendants((m,g)=>{m.type.name===t&&c.push({node:m,pos:g})});const u=c.at(-1);if(!u)return!1;const f=e.state.doc.resolve(l.start()+u.pos+1);return e.chain().cut({from:a.start()-1,to:a.end()+1},f.end()).joinForward().run()}if(!I0(e.state,t)||!WMe(e.state))return!1;const r=Dw(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),i=Lee(t,e.state,s);return Pee(t,e.state)&&!i?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},$ee=(e,t)=>{const n=P7(e,t),r=Dw(e,t);return!r||!n?!1:n>r.depth},Fee=(e,t)=>{const n=P7(e,t),r=Dw(e,t);return!r||!n?!1:n<r.depth},q6=(e,t)=>{if(!I0(e.state,t)||!GMe(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:o}=n;return!n.empty&&r.sameParent(o)?!1:$ee(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():Fee(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},QPe=(e,t)=>{var n;const{$anchor:r}=t.selection,o=t.doc.resolve(r.pos-r.parentOffset-2);return!(o.index()===o.parent.childCount-1||((n=o.nodeAfter)==null?void 0:n.type.name)!==e)},Bee=Gr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&q6(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&q6(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&V6(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&V6(e,n,r)&&(t=!0)}),t}}}}),cz=/^(\s*)(\d+)\.\s+(.*)$/,eLe=/^\s/;function tLe(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n],s=o.match(cz);if(!s)break;const[,i,a,l]=s,c=i.length;let u=l,f=n+1;const m=[o];for(;f<e.length;){const g=e[f];if(g.match(cz))break;if(g.trim()==="")m.push(g),u+=`
`,f+=1;else if(g.match(eLe))m.push(g),u+=`
${g.slice(c+2)}`,f+=1;else break}t.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:m.join(`
`)}),r=f,n=f}return[t,r]}function zee(e,t,n){var r;const o=[];let s=0;for(;s<e.length;){const i=e[s];if(i.indent===t){const a=i.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const g=n.blockTokens(u);c.push(...g)}let f=s+1;const m=[];for(;f<e.length&&e[f].indent>t;)m.push(e[f]),f+=1;if(m.length>0){const g=Math.min(...m.map(v=>v.indent)),y=zee(m,g,n);c.push({type:"list",ordered:!0,start:m[0].number,items:y,raw:m.map(v=>v.raw).join(`
`)})}o.push({type:"list_item",raw:i.raw,tokens:c}),s=f}else s+=1}return o}function nLe(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(o=>{if(o.type==="paragraph"||o.type==="list"||o.type==="blockquote"||o.type==="code")r.push(...t.parseChildren([o]));else if(o.type==="text"&&o.tokens){const s=t.parseChildren([o]);r.push({type:"paragraph",content:s})}else{const s=t.parseChildren([o]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var rLe="listItem",uz="textStyle",dz=/^(\d+)\.\s$/,jee=xl.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Ms(this.options.HTMLAttributes,n),0]:["ol",Ms(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,r=e.items?nLe(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t==null?void 0:t.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var r;const o=e.split(`
`),[s,i]=tLe(o);if(s.length===0)return;const a=zee(s,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:a,raw:o.slice(0,i).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(rLe,this.editor.getAttributes(uz)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=ib({find:dz,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=ib({find:dz,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(uz)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),oLe=/^\s*(\[([( |x])?\])\s$/,sLe=xl.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Ms(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const r=t.parseChildren(e.nestedTokens);n.push(...r)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const o=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return _7(e,t,o)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const o=document.createElement("li"),s=document.createElement("label"),i=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=u=>{var f,m;a.ariaLabel=((m=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:m.call(f,u,a.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return c(e),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:m})=>{const g=n();if(typeof g!="number")return!1;const y=m.doc.nodeAt(g);return m.setNodeMarkup(g,void 0,{...y==null?void 0:y.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,f])=>{o.setAttribute(u,f)}),o.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,s.append(a,i),o.append(s,l),Object.entries(t).forEach(([u,f])=>{o.setAttribute(u,f)}),{dom:o,contentDOM:l,update:u=>u.type!==this.type?!1:(o.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,c(u),!0)}}},addInputRules(){return[ib({find:oLe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),iLe=xl.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Ms(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const r=s=>{const i=R6(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return i?[{type:"taskList",raw:i.raw,items:i.items}]:n.blockTokens(s)},o=R6(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,i)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:i}),customNestedParser:r},n);if(o)return{type:"taskList",raw:o.raw,items:o.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Gr.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(Mee.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(Dee.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(Bee.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(jee.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(sLe.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(iLe.configure(this.options.taskList)),e}});var aLe=xl.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Ms(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];return n.length===1&&n[0].type==="image"?t.parseChildren([n[0]]):t.createNode("paragraph",void 0,t.parseInline(n))},renderMarkdown:(e,t)=>!e||!Array.isArray(e.content)?"":t.renderChildren(e.content),addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),lLe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,cLe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,uLe=W0.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Ms(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[sb({find:lLe,type:this.type})]},addPasteRules(){return[wm({find:cLe,type:this.type})]}}),dLe=xl.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),Uee=W0.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Ms(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const o=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!o)return;const s=o[2].trim();return{type:"underline",raw:o[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function fLe(e={}){return new vo({view(t){return new hLe(t,e)}})}class hLe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return t.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,o=this.editorView.dom,s=o.getBoundingClientRect(),i=s.width/o.offsetWidth,a=s.height/o.offsetHeight;if(n){let f=t.nodeBefore,m=t.nodeAfter;if(f||m){let g=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(g){let y=g.getBoundingClientRect(),v=f?y.bottom:y.top;f&&m&&(v=(v+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*a;r={left:y.left,right:y.right,top:v-w,bottom:v+w}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*i;r={left:f.left-m,right:f.left+m,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let f=l.getBoundingClientRect(),m=f.width/l.offsetWidth,g=f.height/l.offsetHeight;c=f.left-l.scrollLeft*m,u=f.top-l.scrollTop*g}this.element.style.left=(r.left-c)/i+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,t):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=uX(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Ws extends Vn{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Ws.valid(r)?new Ws(r):Vn.near(r)}content(){return Zt.empty}eq(t){return t instanceof Ws&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ws(t.resolve(n.pos))}getBookmark(){return new L7(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!pLe(t)||!mLe(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(t.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Ws.valid(t))return t;let o=t.pos,s=null;for(let i=t.depth;;i--){let a=t.node(i);if(n>0?t.indexAfter(i)<a.childCount:t.index(i)>0){s=a.child(n>0?t.indexAfter(i):t.index(i)-1);break}else if(i==0)return null;o+=n;let l=t.doc.resolve(o);if(Ws.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!Nn.isSelectable(s)){t=t.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=t.doc.resolve(o);if(Ws.valid(a))return a}return null}}}Ws.prototype.visible=!1;Ws.findFrom=Ws.findGapCursorFrom;Vn.jsonID("gapcursor",Ws);class L7{constructor(t){this.pos=t}map(t){return new L7(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Ws.valid(n)?new Ws(n):Vn.near(n)}}function Hee(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function pLe(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||Hee(o.type))return!0;if(o.inlineContent)return!1}}return!0}function mLe(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||Hee(o.type))return!0;if(o.inlineContent)return!1}}return!0}function gLe(){return new vo({props:{decorations:xLe,createSelectionBetween(e,t,n){return t.pos==n.pos&&Ws.valid(n)?new Ws(n):null},handleClick:yLe,handleKeyDown:bLe,handleDOMEvents:{beforeinput:vLe}}})}const bLe=d7({ArrowLeft:$2("horiz",-1),ArrowRight:$2("horiz",1),ArrowUp:$2("vert",-1),ArrowDown:$2("vert",1)});function $2(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,o,s){let i=r.selection,a=t>0?i.$to:i.$from,l=i.empty;if(i instanceof qn){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let c=Ws.findGapCursorFrom(a,t,l);return c?(o&&o(r.tr.setSelection(new Ws(c))),!0):!1}}function yLe(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Ws.valid(r))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&Nn.isSelectable(e.state.doc.nodeAt(o.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Ws(r))),!0)}function vLe(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Ws))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let o=bt.empty;for(let i=r.length-1;i>=0;i--)o=bt.from(r[i].createAndFill(null,o));let s=e.state.tr.replace(n.pos,n.pos,new Zt(o,0,0));return s.setSelection(qn.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function xLe(e){if(!(e.selection instanceof Ws))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",us.create(e.doc,[la.widget(e.selection.head,t,{key:"gapcursor"})])}var TT=200,Gi=function(){};Gi.prototype.append=function(t){return t.length?(t=Gi.from(t),!this.length&&t||t.length<TT&&this.leafAppend(t)||this.length<TT&&t.leafPrepend(this)||this.appendInner(t)):this};Gi.prototype.prepend=function(t){return t.length?Gi.from(t).append(this):this};Gi.prototype.appendInner=function(t){return new wLe(this,t)};Gi.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Gi.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Gi.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Gi.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Gi.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,i){return o.push(t(s,i))},n,r),o};Gi.from=function(t){return t instanceof Gi?t:t&&t.length?new Vee(t):Gi.empty};var Vee=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new t(this.values.slice(o,s))},t.prototype.getInner=function(o){return this.values[o]},t.prototype.forEachInner=function(o,s,i,a){for(var l=s;l<i;l++)if(o(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(o,s,i,a){for(var l=s-1;l>=i;l--)if(o(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(o){if(this.length+o.length<=TT)return new t(this.values.concat(o.flatten()))},t.prototype.leafPrepend=function(o){if(this.length+o.length<=TT)return new t(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(Gi);Gi.empty=new Vee([]);var wLe=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,o,s,i){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(s,a),i)===!1||s>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,s)-a,i+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,o,s,i){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(s,a)-a,i+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(o,a),s,i)===!1)return!1},t.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},t.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new t(this.left,o)},t.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new t(o,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(Gi);const ELe=500;class hu{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=t.tr,a,l,c=[],u=[];return this.items.forEach((f,m)=>{if(!f.step){o||(o=this.remapping(r,m+1),s=o.maps.length),s--,u.push(f);return}if(o){u.push(new od(f.map));let g=f.step.map(o.slice(s)),y;g&&i.maybeStep(g).doc&&(y=i.mapping.maps[i.mapping.maps.length-1],c.push(new od(y,void 0,void 0,c.length+u.length))),s--,y&&o.appendMap(y,s)}else i.maybeStep(f.step);if(f.selection)return a=o?f.selection.map(o.slice(s)):f.selection,l=new hu(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(t,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let f=t.steps[u].invert(t.docs[u]),m=new od(t.mapping.maps[u],f,n),g;(g=l&&l.merge(m))&&(m=g,u?s.pop():a=a.slice(0,a.length-1)),s.push(m),n&&(i++,n=void 0),o||(l=m)}let c=i-r.depth;return c>SLe&&(a=_Le(a,c),i-=c),new hu(a.append(s),i)}remapping(t,n){let r=new Rx;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=t?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},t,n),r}addMaps(t){return this.eventCount==0?this:new hu(this.items.append(t.map(n=>new od(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=t.mapping,i=t.steps.length,a=this.eventCount;this.items.forEach(m=>{m.selection&&a--},o);let l=n;this.items.forEach(m=>{let g=s.getMirror(--l);if(g==null)return;i=Math.min(i,g);let y=s.maps[g];if(m.step){let v=t.steps[g].invert(t.docs[g]),w=m.selection&&m.selection.map(s.slice(l+1,g));w&&a++,r.push(new od(y,v,w))}else r.push(new od(y))},o);let c=[];for(let m=n;m<i;m++)c.push(new od(s.maps[m]));let u=this.items.slice(0,o).append(c).append(r),f=new hu(u,a);return f.emptyItemCount()>ELe&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=t)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=i.selection&&i.selection.map(n.slice(r));u&&s++;let f=new od(c.invert(),l,u),m,g=o.length-1;(m=o.length&&o[g].merge(f))?o[g]=m:o.push(f)}}else i.map&&r--},this.items.length,0),new hu(Gi.from(o.reverse()),s)}}hu.empty=new hu(Gi.empty,0);function _Le(e,t){let n;return e.forEach((r,o)=>{if(r.selection&&t--==0)return n=o,!1}),e.slice(n)}class od{constructor(t,n,r,o){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=o}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new od(n.getMap().invert(),n,this.selection)}}}class s0{constructor(t,n,r,o,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const SLe=20;function TLe(e,t,n,r){let o=n.getMeta(sm),s;if(o)return o.historyState;n.getMeta(ALe)&&(e=new s0(e.done,e.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(i&&i.getMeta(sm))return i.getMeta(sm).redo?new s0(e.done.addTransform(n,void 0,r,D_(t)),e.undone,fz(n.mapping.maps),e.prevTime,e.prevComposition):new s0(e.done,e.undone.addTransform(n,void 0,r,D_(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!i&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!CLe(n,e.prevRanges)),c=i?Rk(e.prevRanges,n.mapping):fz(n.mapping.maps);return new s0(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,D_(t)),hu.empty,c,n.time,a??e.prevComposition)}else return(s=n.getMeta("rebased"))?new s0(e.done.rebased(n,s),e.undone.rebased(n,s),Rk(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new s0(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Rk(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function CLe(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&o>=t[s]&&(n=!0)}),n}function fz(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,o,s,i)=>t.push(s,i));return t}function Rk(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),s=t.map(e[r+1],-1);o<=s&&n.push(o,s)}return n}function kLe(e,t,n){let r=D_(t),o=sm.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let i=s.selection.resolve(s.transform.doc),a=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,r),l=new s0(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(i).setMeta(sm,{redo:n,historyState:l})}let Mk=!1,hz=null;function D_(e){let t=e.plugins;if(hz!=t){Mk=!1,hz=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Mk=!0;break}}return Mk}const sm=new Bo("history"),ALe=new Bo("closeHistory");function NLe(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new vo({key:sm,state:{init(){return new s0(hu.empty,hu.empty,null,0,-1)},apply(t,n,r){return TLe(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,o=r=="historyUndo"?Gee:r=="historyRedo"?Wee:null;return!o||!t.editable?!1:(n.preventDefault(),o(t.state,t.dispatch))}}}})}function qee(e,t){return(n,r)=>{let o=sm.getState(n);if(!o||(e?o.undone:o.done).eventCount==0)return!1;if(r){let s=kLe(o,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const Gee=qee(!1,!0),Wee=qee(!0,!0);Gr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new vo({key:new Bo("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const o=this.options.limit;if(o==null||o===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>o){const i=s-o,a=0,l=i;console.warn(`[CharacterCount] Initial content exceeded limit of ${o} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return e=!0,c}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const o=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||o>r&&s>r&&s<=o)return!0;if(o>r&&s>r&&s>o||!t.getMeta("paste"))return!1;const a=t.selection.$head.pos,l=s-r,c=a-l,u=a;return t.deleteRange(c,u),!(this.storage.characters({node:t.doc})>r)}})]}});var ILe=Gr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[fLe(this.options)]}});Gr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new vo({key:new Bo("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:o}=t,s=[];if(!n||!r)return us.create(e,[]);let i=0;this.options.mode==="deepest"&&e.descendants((l,c)=>{if(l.isText)return;if(!(o>=c&&o<=c+l.nodeSize-1))return!1;i+=1});let a=0;return e.descendants((l,c)=>{if(l.isText||!(o>=c&&o<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&i-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(la.node(c,c+l.nodeSize,{class:this.options.className}))}),us.create(e,s)}}})]}});var RLe=Gr.create({name:"gapCursor",addProseMirrorPlugins(){return[gLe()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=So(Dn(e,"allowGapCursor",n)))!=null?t:null}}}),MLe=Gr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new vo({key:new Bo("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,o=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((i,a)=>{const l=r>=a&&r<=a+i.nodeSize,c=!i.isLeaf&&CC(i);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const f=la.node(a,a+i.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:i,pos:a,hasAnchor:l}):this.options.placeholder});o.push(f)}return this.options.includeChildren}),us.create(e,o)}}})]}});Gr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new vo({key:new Bo("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||kQ(n.selection)||e.view.dragging?null:us.create(n.doc,[la.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function pz({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var DLe=Gr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new Bo(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,o])=>o).filter(o=>(this.options.notAfter||[]).concat(n).includes(o.name));return[new vo({key:t,appendTransaction:(o,s,i)=>{const{doc:a,tr:l,schema:c}=i,u=t.getState(i),f=a.content.size,m=c.nodes[n];if(u)return l.insert(f,m.create())},state:{init:(o,s)=>{const i=s.tr.doc.lastChild;return!pz({node:i,types:r})},apply:(o,s)=>{if(!o.docChanged||o.getMeta("__uniqueIDTransaction"))return s;const i=o.doc.lastChild;return!pz({node:i,types:r})}}})]}}),OLe=Gr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Gee(e,t),redo:()=>({state:e,dispatch:t})=>Wee(e,t)}},addProseMirrorPlugins(){return[NLe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),PLe=Gr.create({name:"starterKit",addExtensions(){var e,t,n,r;const o=[];return this.options.bold!==!1&&o.push(cPe.configure(this.options.bold)),this.options.blockquote!==!1&&o.push(oPe.configure(this.options.blockquote)),this.options.bulletList!==!1&&o.push(Mee.configure(this.options.bulletList)),this.options.code!==!1&&o.push(fPe.configure(this.options.code)),this.options.codeBlock!==!1&&o.push(xee.configure(this.options.codeBlock)),this.options.document!==!1&&o.push(gPe.configure(this.options.document)),this.options.dropcursor!==!1&&o.push(ILe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&o.push(RLe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&o.push(bPe.configure(this.options.hardBreak)),this.options.heading!==!1&&o.push(yPe.configure(this.options.heading)),this.options.undoRedo!==!1&&o.push(OLe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&o.push(wee.configure(this.options.horizontalRule)),this.options.italic!==!1&&o.push(_Pe.configure(this.options.italic)),this.options.listItem!==!1&&o.push(Dee.configure(this.options.listItem)),this.options.listKeymap!==!1&&o.push(Bee.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&o.push(Ree.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&o.push(jee.configure(this.options.orderedList)),this.options.paragraph!==!1&&o.push(aLe.configure(this.options.paragraph)),this.options.strike!==!1&&o.push(uLe.configure(this.options.strike)),this.options.text!==!1&&o.push(dLe.configure(this.options.text)),this.options.underline!==!1&&o.push(Uee.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&o.push(DLe.configure((r=this.options)==null?void 0:r.trailingNode)),o}}),LLe=e=>Ys({find:/--$/,replace:e??""}),$Le=e=>Ys({find:/\.\.\.$/,replace:e??""}),FLe=e=>Ys({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:e??""}),BLe=e=>Ys({find:/"$/,replace:e??""}),zLe=e=>Ys({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:e??""}),jLe=e=>Ys({find:/'$/,replace:e??""}),ULe=e=>Ys({find:/<-$/,replace:e??""}),HLe=e=>Ys({find:/->$/,replace:e??""}),VLe=e=>Ys({find:/\(c\)$/,replace:e??""}),qLe=e=>Ys({find:/\(tm\)$/,replace:e??""}),GLe=e=>Ys({find:/\(sm\)$/,replace:e??""}),WLe=e=>Ys({find:/\(r\)$/,replace:e??""}),YLe=e=>Ys({find:/(?:^|\s)(1\/2)\s$/,replace:e??""}),KLe=e=>Ys({find:/\+\/-$/,replace:e??""}),ZLe=e=>Ys({find:/!=$/,replace:e??""}),JLe=e=>Ys({find:/<<$/,replace:e??""}),XLe=e=>Ys({find:/>>$/,replace:e??""}),QLe=e=>Ys({find:/\d+\s?([*x])\s?\d+$/,replace:e??""}),e$e=e=>Ys({find:/\^2$/,replace:e??""}),t$e=e=>Ys({find:/\^3$/,replace:e??""}),n$e=e=>Ys({find:/(?:^|\s)(1\/4)\s$/,replace:e??""}),r$e=e=>Ys({find:/(?:^|\s)(3\/4)\s$/,replace:e??""}),o$e=Gr.create({name:"typography",addOptions(){return{closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}},addInputRules(){const e=[];return this.options.emDash!==!1&&e.push(LLe(this.options.emDash)),this.options.ellipsis!==!1&&e.push($Le(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&e.push(FLe(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&e.push(BLe(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&e.push(zLe(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&e.push(jLe(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&e.push(ULe(this.options.leftArrow)),this.options.rightArrow!==!1&&e.push(HLe(this.options.rightArrow)),this.options.copyright!==!1&&e.push(VLe(this.options.copyright)),this.options.trademark!==!1&&e.push(qLe(this.options.trademark)),this.options.servicemark!==!1&&e.push(GLe(this.options.servicemark)),this.options.registeredTrademark!==!1&&e.push(WLe(this.options.registeredTrademark)),this.options.oneHalf!==!1&&e.push(YLe(this.options.oneHalf)),this.options.plusMinus!==!1&&e.push(KLe(this.options.plusMinus)),this.options.notEqual!==!1&&e.push(ZLe(this.options.notEqual)),this.options.laquo!==!1&&e.push(JLe(this.options.laquo)),this.options.raquo!==!1&&e.push(XLe(this.options.raquo)),this.options.multiplication!==!1&&e.push(QLe(this.options.multiplication)),this.options.superscriptTwo!==!1&&e.push(e$e(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&e.push(t$e(this.options.superscriptThree)),this.options.oneQuarter!==!1&&e.push(n$e(this.options.oneQuarter)),this.options.threeQuarters!==!1&&e.push(r$e(this.options.threeQuarters)),e}}),s$e=20,Yee=(e,t=0)=>{const n=[];return!e.children.length||t>s$e||Array.from(e.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...Yee(r,t+1))}),n},i$e=e=>{if(!e.children.length)return;const t=Yee(e);t&&t.forEach(n=>{var r,o;const s=n.getAttribute("style"),i=(o=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:o.getAttribute("style");n.setAttribute("style",`${i};${s}`)})},Kee=W0.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:e=>e.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&i$e(e),{}):!1}]},renderHTML({HTMLAttributes:e}){return["span",Ms(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleTextStyle:e=>({commands:t})=>t.toggleMark(this.name,e),removeEmptyTextStyle:()=>({tr:e})=>{const{selection:t}=e;return e.doc.nodesBetween(t.from,t.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(o=>o.type===this.type).some(o=>Object.values(o.attrs).some(s=>!!s))||e.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),a$e=Gr.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const r=n.split(";").map(o=>o.trim()).filter(Boolean);for(let o=r.length-1;o>=0;o-=1){const s=r[o].split(":");if(s.length>=2){const i=s[0].trim().toLowerCase(),a=s.slice(1).join(":").trim();if(i==="background-color")return a.replace(/['"]+/g,"")}}}return(t=e.style.backgroundColor)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.backgroundColor?{style:`background-color: ${e.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:e=>({chain:t})=>t().setMark("textStyle",{backgroundColor:e}).run(),unsetBackgroundColor:()=>({chain:e})=>e().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Zee=Gr.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:e=>{var t;const n=e.getAttribute("style");if(n){const r=n.split(";").map(o=>o.trim()).filter(Boolean);for(let o=r.length-1;o>=0;o-=1){const s=r[o].split(":");if(s.length>=2){const i=s[0].trim().toLowerCase(),a=s.slice(1).join(":").trim();if(i==="color")return a.replace(/['"]+/g,"")}}}return(t=e.style.color)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.color?{style:`color: ${e.color}`}:{}}}}]},addCommands(){return{setColor:e=>({chain:t})=>t().setMark("textStyle",{color:e}).run(),unsetColor:()=>({chain:e})=>e().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),l$e=Gr.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:e=>e.style.fontFamily,renderHTML:e=>e.fontFamily?{style:`font-family: ${e.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:e=>({chain:t})=>t().setMark("textStyle",{fontFamily:e}).run(),unsetFontFamily:()=>({chain:e})=>e().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),c$e=Gr.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:e=>e.style.fontSize,renderHTML:e=>e.fontSize?{style:`font-size: ${e.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:e=>({chain:t})=>t().setMark("textStyle",{fontSize:e}).run(),unsetFontSize:()=>({chain:e})=>e().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),u$e=Gr.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:e=>e.style.lineHeight,renderHTML:e=>e.lineHeight?{style:`line-height: ${e.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:e=>({chain:t})=>t().setMark("textStyle",{lineHeight:e}).run(),unsetLineHeight:()=>({chain:e})=>e().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Gr.create({name:"textStyleKit",addExtensions(){const e=[];return this.options.backgroundColor!==!1&&e.push(a$e.configure(this.options.backgroundColor)),this.options.color!==!1&&e.push(Zee.configure(this.options.color)),this.options.fontFamily!==!1&&e.push(l$e.configure(this.options.fontFamily)),this.options.fontSize!==!1&&e.push(c$e.configure(this.options.fontSize)),this.options.lineHeight!==!1&&e.push(u$e.configure(this.options.lineHeight)),this.options.textStyle!==!1&&e.push(Kee.configure(this.options.textStyle)),e}});var Dk,mz;function d$e(){if(mz)return Dk;mz=1;function e(ye){return ye instanceof Map?ye.clear=ye.delete=ye.set=function(){throw new Error("map is read-only")}:ye instanceof Set&&(ye.add=ye.clear=ye.delete=function(){throw new Error("set is read-only")}),Object.freeze(ye),Object.getOwnPropertyNames(ye).forEach(Ue=>{const ht=ye[Ue],Jt=typeof ht;(Jt==="object"||Jt==="function")&&!Object.isFrozen(ht)&&e(ht)}),ye}class t{constructor(Ue){Ue.data===void 0&&(Ue.data={}),this.data=Ue.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(ye){return ye.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(ye,...Ue){const ht=Object.create(null);for(const Jt in ye)ht[Jt]=ye[Jt];return Ue.forEach(function(Jt){for(const mr in Jt)ht[mr]=Jt[mr]}),ht}const o="</span>",s=ye=>!!ye.scope,i=(ye,{prefix:Ue})=>{if(ye.startsWith("language:"))return ye.replace("language:","language-");if(ye.includes(".")){const ht=ye.split(".");return[`${Ue}${ht.shift()}`,...ht.map((Jt,mr)=>`${Jt}${"_".repeat(mr+1)}`)].join(" ")}return`${Ue}${ye}`};class a{constructor(Ue,ht){this.buffer="",this.classPrefix=ht.classPrefix,Ue.walk(this)}addText(Ue){this.buffer+=n(Ue)}openNode(Ue){if(!s(Ue))return;const ht=i(Ue.scope,{prefix:this.classPrefix});this.span(ht)}closeNode(Ue){s(Ue)&&(this.buffer+=o)}value(){return this.buffer}span(Ue){this.buffer+=`<span class="${Ue}">`}}const l=(ye={})=>{const Ue={children:[]};return Object.assign(Ue,ye),Ue};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Ue){this.top.children.push(Ue)}openNode(Ue){const ht=l({scope:Ue});this.add(ht),this.stack.push(ht)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Ue){return this.constructor._walk(Ue,this.rootNode)}static _walk(Ue,ht){return typeof ht=="string"?Ue.addText(ht):ht.children&&(Ue.openNode(ht),ht.children.forEach(Jt=>this._walk(Ue,Jt)),Ue.closeNode(ht)),Ue}static _collapse(Ue){typeof Ue!="string"&&Ue.children&&(Ue.children.every(ht=>typeof ht=="string")?Ue.children=[Ue.children.join("")]:Ue.children.forEach(ht=>{c._collapse(ht)}))}}class u extends c{constructor(Ue){super(),this.options=Ue}addText(Ue){Ue!==""&&this.add(Ue)}startScope(Ue){this.openNode(Ue)}endScope(){this.closeNode()}__addSublanguage(Ue,ht){const Jt=Ue.root;ht&&(Jt.scope=`language:${ht}`),this.add(Jt)}toHTML(){return new a(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function f(ye){return ye?typeof ye=="string"?ye:ye.source:null}function m(ye){return v("(?=",ye,")")}function g(ye){return v("(?:",ye,")*")}function y(ye){return v("(?:",ye,")?")}function v(...ye){return ye.map(ht=>f(ht)).join("")}function w(ye){const Ue=ye[ye.length-1];return typeof Ue=="object"&&Ue.constructor===Object?(ye.splice(ye.length-1,1),Ue):{}}function _(...ye){return"("+(w(ye).capture?"":"?:")+ye.map(Jt=>f(Jt)).join("|")+")"}function T(ye){return new RegExp(ye.toString()+"|").exec("").length-1}function k(ye,Ue){const ht=ye&&ye.exec(Ue);return ht&&ht.index===0}const M=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function D(ye,{joinWith:Ue}){let ht=0;return ye.map(Jt=>{ht+=1;const mr=ht;let Kn=f(Jt),Rt="";for(;Kn.length>0;){const zt=M.exec(Kn);if(!zt){Rt+=Kn;break}Rt+=Kn.substring(0,zt.index),Kn=Kn.substring(zt.index+zt[0].length),zt[0][0]==="\\"&&zt[1]?Rt+="\\"+String(Number(zt[1])+mr):(Rt+=zt[0],zt[0]==="("&&ht++)}return Rt}).map(Jt=>`(${Jt})`).join(Ue)}const I=/\b\B/,P="[a-zA-Z]\\w*",B="[a-zA-Z_]\\w*",U="\\b\\d+(\\.\\d+)?",j="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",H="\\b(0b[01]+)",q="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",z=(ye={})=>{const Ue=/^#![ ]*\//;return ye.binary&&(ye.begin=v(Ue,/.*\b/,ye.binary,/\b.*/)),r({scope:"meta",begin:Ue,end:/$/,relevance:0,"on:begin":(ht,Jt)=>{ht.index!==0&&Jt.ignoreMatch()}},ye)},Z={begin:"\\\\[\\s\\S]",relevance:0},X={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Z]},J={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Z]},ee={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},re=function(ye,Ue,ht={}){const Jt=r({scope:"comment",begin:ye,end:Ue,contains:[]},ht);Jt.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const mr=_("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Jt.contains.push({begin:v(/[ ]+/,"(",mr,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Jt},ie=re("//","$"),K=re("/\\*","\\*/"),te=re("#","$"),se={scope:"number",begin:U,relevance:0},Q={scope:"number",begin:j,relevance:0},Te={scope:"number",begin:H,relevance:0},ge={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Z,{begin:/\[/,end:/\]/,relevance:0,contains:[Z]}]},Ce={scope:"title",begin:P,relevance:0},he={scope:"title",begin:B,relevance:0},Fe={begin:"\\.\\s*"+B,relevance:0};var Re=Object.freeze({__proto__:null,APOS_STRING_MODE:X,BACKSLASH_ESCAPE:Z,BINARY_NUMBER_MODE:Te,BINARY_NUMBER_RE:H,COMMENT:re,C_BLOCK_COMMENT_MODE:K,C_LINE_COMMENT_MODE:ie,C_NUMBER_MODE:Q,C_NUMBER_RE:j,END_SAME_AS_BEGIN:function(ye){return Object.assign(ye,{"on:begin":(Ue,ht)=>{ht.data._beginMatch=Ue[1]},"on:end":(Ue,ht)=>{ht.data._beginMatch!==Ue[1]&&ht.ignoreMatch()}})},HASH_COMMENT_MODE:te,IDENT_RE:P,MATCH_NOTHING_RE:I,METHOD_GUARD:Fe,NUMBER_MODE:se,NUMBER_RE:U,PHRASAL_WORDS_MODE:ee,QUOTE_STRING_MODE:J,REGEXP_MODE:ge,RE_STARTERS_RE:q,SHEBANG:z,TITLE_MODE:Ce,UNDERSCORE_IDENT_RE:B,UNDERSCORE_TITLE_MODE:he});function nt(ye,Ue){ye.input[ye.index-1]==="."&&Ue.ignoreMatch()}function ue(ye,Ue){ye.className!==void 0&&(ye.scope=ye.className,delete ye.className)}function et(ye,Ue){Ue&&ye.beginKeywords&&(ye.begin="\\b("+ye.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",ye.__beforeBegin=nt,ye.keywords=ye.keywords||ye.beginKeywords,delete ye.beginKeywords,ye.relevance===void 0&&(ye.relevance=0))}function ut(ye,Ue){Array.isArray(ye.illegal)&&(ye.illegal=_(...ye.illegal))}function Yt(ye,Ue){if(ye.match){if(ye.begin||ye.end)throw new Error("begin & end are not supported with match");ye.begin=ye.match,delete ye.match}}function Ht(ye,Ue){ye.relevance===void 0&&(ye.relevance=1)}const Pt=(ye,Ue)=>{if(!ye.beforeMatch)return;if(ye.starts)throw new Error("beforeMatch cannot be used with starts");const ht=Object.assign({},ye);Object.keys(ye).forEach(Jt=>{delete ye[Jt]}),ye.keywords=ht.keywords,ye.begin=v(ht.beforeMatch,m(ht.begin)),ye.starts={relevance:0,contains:[Object.assign(ht,{endsParent:!0})]},ye.relevance=0,delete ht.beforeMatch},tn=["of","and","for","in","not","or","if","then","parent","list","value"],vt="keyword";function me(ye,Ue,ht=vt){const Jt=Object.create(null);return typeof ye=="string"?mr(ht,ye.split(" ")):Array.isArray(ye)?mr(ht,ye):Object.keys(ye).forEach(function(Kn){Object.assign(Jt,me(ye[Kn],Ue,Kn))}),Jt;function mr(Kn,Rt){Ue&&(Rt=Rt.map(zt=>zt.toLowerCase())),Rt.forEach(function(zt){const hn=zt.split("|");Jt[hn[0]]=[Kn,Ne(hn[0],hn[1])]})}}function Ne(ye,Ue){return Ue?Number(Ue):$e(ye)?0:1}function $e(ye){return tn.includes(ye.toLowerCase())}const Je={},Le=ye=>{console.error(ye)},Ve=(ye,...Ue)=>{console.log(`WARN: ${ye}`,...Ue)},_e=(ye,Ue)=>{Je[`${ye}/${Ue}`]||(console.log(`Deprecated as of ${ye}. ${Ue}`),Je[`${ye}/${Ue}`]=!0)},W=new Error;function L(ye,Ue,{key:ht}){let Jt=0;const mr=ye[ht],Kn={},Rt={};for(let zt=1;zt<=Ue.length;zt++)Rt[zt+Jt]=mr[zt],Kn[zt+Jt]=!0,Jt+=T(Ue[zt-1]);ye[ht]=Rt,ye[ht]._emit=Kn,ye[ht]._multi=!0}function F(ye){if(Array.isArray(ye.begin)){if(ye.skip||ye.excludeBegin||ye.returnBegin)throw Le("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),W;if(typeof ye.beginScope!="object"||ye.beginScope===null)throw Le("beginScope must be object"),W;L(ye,ye.begin,{key:"beginScope"}),ye.begin=D(ye.begin,{joinWith:""})}}function ce(ye){if(Array.isArray(ye.end)){if(ye.skip||ye.excludeEnd||ye.returnEnd)throw Le("skip, excludeEnd, returnEnd not compatible with endScope: {}"),W;if(typeof ye.endScope!="object"||ye.endScope===null)throw Le("endScope must be object"),W;L(ye,ye.end,{key:"endScope"}),ye.end=D(ye.end,{joinWith:""})}}function we(ye){ye.scope&&typeof ye.scope=="object"&&ye.scope!==null&&(ye.beginScope=ye.scope,delete ye.scope)}function ze(ye){we(ye),typeof ye.beginScope=="string"&&(ye.beginScope={_wrap:ye.beginScope}),typeof ye.endScope=="string"&&(ye.endScope={_wrap:ye.endScope}),F(ye),ce(ye)}function Be(ye){function Ue(Rt,zt){return new RegExp(f(Rt),"m"+(ye.case_insensitive?"i":"")+(ye.unicodeRegex?"u":"")+(zt?"g":""))}class ht{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(zt,hn){hn.position=this.position++,this.matchIndexes[this.matchAt]=hn,this.regexes.push([hn,zt]),this.matchAt+=T(zt)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const zt=this.regexes.map(hn=>hn[1]);this.matcherRe=Ue(D(zt,{joinWith:"|"}),!0),this.lastIndex=0}exec(zt){this.matcherRe.lastIndex=this.lastIndex;const hn=this.matcherRe.exec(zt);if(!hn)return null;const In=hn.findIndex((xs,Go)=>Go>0&&xs!==void 0),Lr=this.matchIndexes[In];return hn.splice(0,In),Object.assign(hn,Lr)}}class Jt{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(zt){if(this.multiRegexes[zt])return this.multiRegexes[zt];const hn=new ht;return this.rules.slice(zt).forEach(([In,Lr])=>hn.addRule(In,Lr)),hn.compile(),this.multiRegexes[zt]=hn,hn}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(zt,hn){this.rules.push([zt,hn]),hn.type==="begin"&&this.count++}exec(zt){const hn=this.getMatcher(this.regexIndex);hn.lastIndex=this.lastIndex;let In=hn.exec(zt);if(this.resumingScanAtSamePosition()&&!(In&&In.index===this.lastIndex)){const Lr=this.getMatcher(0);Lr.lastIndex=this.lastIndex+1,In=Lr.exec(zt)}return In&&(this.regexIndex+=In.position+1,this.regexIndex===this.count&&this.considerAll()),In}}function mr(Rt){const zt=new Jt;return Rt.contains.forEach(hn=>zt.addRule(hn.begin,{rule:hn,type:"begin"})),Rt.terminatorEnd&&zt.addRule(Rt.terminatorEnd,{type:"end"}),Rt.illegal&&zt.addRule(Rt.illegal,{type:"illegal"}),zt}function Kn(Rt,zt){const hn=Rt;if(Rt.isCompiled)return hn;[ue,Yt,ze,Pt].forEach(Lr=>Lr(Rt,zt)),ye.compilerExtensions.forEach(Lr=>Lr(Rt,zt)),Rt.__beforeBegin=null,[et,ut,Ht].forEach(Lr=>Lr(Rt,zt)),Rt.isCompiled=!0;let In=null;return typeof Rt.keywords=="object"&&Rt.keywords.$pattern&&(Rt.keywords=Object.assign({},Rt.keywords),In=Rt.keywords.$pattern,delete Rt.keywords.$pattern),In=In||/\w+/,Rt.keywords&&(Rt.keywords=me(Rt.keywords,ye.case_insensitive)),hn.keywordPatternRe=Ue(In,!0),zt&&(Rt.begin||(Rt.begin=/\B|\b/),hn.beginRe=Ue(hn.begin),!Rt.end&&!Rt.endsWithParent&&(Rt.end=/\B|\b/),Rt.end&&(hn.endRe=Ue(hn.end)),hn.terminatorEnd=f(hn.end)||"",Rt.endsWithParent&&zt.terminatorEnd&&(hn.terminatorEnd+=(Rt.end?"|":"")+zt.terminatorEnd)),Rt.illegal&&(hn.illegalRe=Ue(Rt.illegal)),Rt.contains||(Rt.contains=[]),Rt.contains=[].concat(...Rt.contains.map(function(Lr){return ln(Lr==="self"?Rt:Lr)})),Rt.contains.forEach(function(Lr){Kn(Lr,hn)}),Rt.starts&&Kn(Rt.starts,zt),hn.matcher=mr(hn),hn}if(ye.compilerExtensions||(ye.compilerExtensions=[]),ye.contains&&ye.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return ye.classNameAliases=r(ye.classNameAliases||{}),Kn(ye)}function ct(ye){return ye?ye.endsWithParent||ct(ye.starts):!1}function ln(ye){return ye.variants&&!ye.cachedVariants&&(ye.cachedVariants=ye.variants.map(function(Ue){return r(ye,{variants:null},Ue)})),ye.cachedVariants?ye.cachedVariants:ct(ye)?r(ye,{starts:ye.starts?r(ye.starts):null}):Object.isFrozen(ye)?r(ye):ye}var jt="11.11.1";class fn extends Error{constructor(Ue,ht){super(Ue),this.name="HTMLInjectionError",this.html=ht}}const an=n,Wa=r,An=Symbol("nomatch"),er=7,wt=function(ye){const Ue=Object.create(null),ht=Object.create(null),Jt=[];let mr=!0;const Kn="Could not find the language '{}', did you forget to load/include a language module?",Rt={disableAutodetect:!0,name:"Plain text",contains:[]};let zt={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:u};function hn(ft){return zt.noHighlightRe.test(ft)}function In(ft){let Nt=ft.className+" ";Nt+=ft.parentNode?ft.parentNode.className:"";const pn=zt.languageDetectRe.exec(Nt);if(pn){const wn=Hr(pn[1]);return wn||(Ve(Kn.replace("{}",pn[1])),Ve("Falling back to no-highlight mode for this block.",ft)),wn?pn[1]:"no-highlight"}return Nt.split(/\s+/).find(wn=>hn(wn)||Hr(wn))}function Lr(ft,Nt,pn){let wn="",kr="";typeof Nt=="object"?(wn=ft,pn=Nt.ignoreIllegals,kr=Nt.language):(_e("10.7.0","highlight(lang, code, ...args) has been deprecated."),_e("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),kr=ft,wn=Nt),pn===void 0&&(pn=!0);const Wo={code:wn,language:kr};Ps("before:highlight",Wo);const hs=Wo.result?Wo.result:xs(Wo.language,Wo.code,pn);return hs.code=Wo.code,Ps("after:highlight",hs),hs}function xs(ft,Nt,pn,wn){const kr=Object.create(null);function Wo($t,Kt){return $t.keywords[Kt]}function hs(){if(!On.keywords){ps.addText(Wr);return}let $t=0;On.keywordPatternRe.lastIndex=0;let Kt=On.keywordPatternRe.exec(Wr),Jn="";for(;Kt;){Jn+=Wr.substring($t,Kt.index);const ur=Js.case_insensitive?Kt[0].toLowerCase():Kt[0],zo=Wo(On,ur);if(zo){const[da,uh]=zo;if(ps.addText(Jn),Jn="",kr[ur]=(kr[ur]||0)+1,kr[ur]<=er&&(Mu+=uh),da.startsWith("_"))Jn+=Kt[0];else{const dh=Js.classNameAliases[da]||da;Es(Kt[0],dh)}}else Jn+=Kt[0];$t=On.keywordPatternRe.lastIndex,Kt=On.keywordPatternRe.exec(Wr)}Jn+=Wr.substring($t),ps.addText(Jn)}function Zs(){if(Wr==="")return;let $t=null;if(typeof On.subLanguage=="string"){if(!Ue[On.subLanguage]){ps.addText(Wr);return}$t=xs(On.subLanguage,Wr,!0,Q0[On.subLanguage]),Q0[On.subLanguage]=$t._top}else $t=ws(Wr,On.subLanguage.length?On.subLanguage:null);On.relevance>0&&(Mu+=$t.relevance),ps.__addSublanguage($t._emitter,$t.language)}function zr(){On.subLanguage!=null?Zs():hs(),Wr=""}function Es($t,Kt){$t!==""&&(ps.startScope(Kt),ps.addText($t),ps.endScope())}function Vm($t,Kt){let Jn=1;const ur=Kt.length-1;for(;Jn<=ur;){if(!$t._emit[Jn]){Jn++;continue}const zo=Js.classNameAliases[$t[Jn]]||$t[Jn],da=Kt[Jn];zo?Es(da,zo):(Wr=da,hs(),Wr=""),Jn++}}function Ru($t,Kt){return $t.scope&&typeof $t.scope=="string"&&ps.openNode(Js.classNameAliases[$t.scope]||$t.scope),$t.beginScope&&($t.beginScope._wrap?(Es(Wr,Js.classNameAliases[$t.beginScope._wrap]||$t.beginScope._wrap),Wr=""):$t.beginScope._multi&&(Vm($t.beginScope,Kt),Wr="")),On=Object.create($t,{parent:{value:On}}),On}function X0($t,Kt,Jn){let ur=k($t.endRe,Jn);if(ur){if($t["on:end"]){const zo=new t($t);$t["on:end"](Kt,zo),zo.isMatchIgnored&&(ur=!1)}if(ur){for(;$t.endsParent&&$t.parent;)$t=$t.parent;return $t}}if($t.endsWithParent)return X0($t.parent,Kt,Jn)}function Od($t){return On.matcher.regexIndex===0?(Wr+=$t[0],1):(Sl=!0,0)}function lh($t){const Kt=$t[0],Jn=$t.rule,ur=new t(Jn),zo=[Jn.__beforeBegin,Jn["on:begin"]];for(const da of zo)if(da&&(da($t,ur),ur.isMatchIgnored))return Od(Kt);return Jn.skip?Wr+=Kt:(Jn.excludeBegin&&(Wr+=Kt),zr(),!Jn.returnBegin&&!Jn.excludeBegin&&(Wr=Kt)),Ru(Jn,$t),Jn.returnBegin?0:Kt.length}function Yi($t){const Kt=$t[0],Jn=Nt.substring($t.index),ur=X0(On,$t,Jn);if(!ur)return An;const zo=On;On.endScope&&On.endScope._wrap?(zr(),Es(Kt,On.endScope._wrap)):On.endScope&&On.endScope._multi?(zr(),Vm(On.endScope,$t)):zo.skip?Wr+=Kt:(zo.returnEnd||zo.excludeEnd||(Wr+=Kt),zr(),zo.excludeEnd&&(Wr=Kt));do On.scope&&ps.closeNode(),!On.skip&&!On.subLanguage&&(Mu+=On.relevance),On=On.parent;while(On!==ur.parent);return ur.starts&&Ru(ur.starts,$t),zo.returnEnd?0:Kt.length}function _l(){const $t=[];for(let Kt=On;Kt!==Js;Kt=Kt.parent)Kt.scope&&$t.unshift(Kt.scope);$t.forEach(Kt=>ps.openNode(Kt))}let oc={};function jc($t,Kt){const Jn=Kt&&Kt[0];if(Wr+=$t,Jn==null)return zr(),0;if(oc.type==="begin"&&Kt.type==="end"&&oc.index===Kt.index&&Jn===""){if(Wr+=Nt.slice(Kt.index,Kt.index+1),!mr){const ur=new Error(`0 width match regex (${ft})`);throw ur.languageName=ft,ur.badRule=oc.rule,ur}return 1}if(oc=Kt,Kt.type==="begin")return lh(Kt);if(Kt.type==="illegal"&&!pn){const ur=new Error('Illegal lexeme "'+Jn+'" for mode "'+(On.scope||"<unnamed>")+'"');throw ur.mode=On,ur}else if(Kt.type==="end"){const ur=Yi(Kt);if(ur!==An)return ur}if(Kt.type==="illegal"&&Jn==="")return Wr+=`
`,1;if(Du>1e5&&Du>Kt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Wr+=Jn,Jn.length}const Js=Hr(ft);if(!Js)throw Le(Kn.replace("{}",ft)),new Error('Unknown language: "'+ft+'"');const Pd=Be(Js);let ch="",On=wn||Pd;const Q0={},ps=new zt.__emitter(zt);_l();let Wr="",Mu=0,yi=0,Du=0,Sl=!1;try{if(Js.__emitTokens)Js.__emitTokens(Nt,ps);else{for(On.matcher.considerAll();;){Du++,Sl?Sl=!1:On.matcher.considerAll(),On.matcher.lastIndex=yi;const $t=On.matcher.exec(Nt);if(!$t)break;const Kt=Nt.substring(yi,$t.index),Jn=jc(Kt,$t);yi=$t.index+Jn}jc(Nt.substring(yi))}return ps.finalize(),ch=ps.toHTML(),{language:ft,value:ch,relevance:Mu,illegal:!1,_emitter:ps,_top:On}}catch($t){if($t.message&&$t.message.includes("Illegal"))return{language:ft,value:an(Nt),illegal:!0,relevance:0,_illegalBy:{message:$t.message,index:yi,context:Nt.slice(yi-100,yi+100),mode:$t.mode,resultSoFar:ch},_emitter:ps};if(mr)return{language:ft,value:an(Nt),illegal:!1,relevance:0,errorRaised:$t,_emitter:ps,_top:On};throw $t}}function Go(ft){const Nt={value:an(ft),illegal:!1,relevance:0,_top:Rt,_emitter:new zt.__emitter(zt)};return Nt._emitter.addText(ft),Nt}function ws(ft,Nt){Nt=Nt||zt.languages||Object.keys(Ue);const pn=Go(ft),wn=Nt.filter(Hr).filter(kt).map(zr=>xs(zr,ft,!1));wn.unshift(pn);const kr=wn.sort((zr,Es)=>{if(zr.relevance!==Es.relevance)return Es.relevance-zr.relevance;if(zr.language&&Es.language){if(Hr(zr.language).supersetOf===Es.language)return 1;if(Hr(Es.language).supersetOf===zr.language)return-1}return 0}),[Wo,hs]=kr,Zs=Wo;return Zs.secondBest=hs,Zs}function Jr(ft,Nt,pn){const wn=Nt&&ht[Nt]||pn;ft.classList.add("hljs"),ft.classList.add(`language-${wn}`)}function gr(ft){let Nt=null;const pn=In(ft);if(hn(pn))return;if(Ps("before:highlightElement",{el:ft,language:pn}),ft.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",ft);return}if(ft.children.length>0&&(zt.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(ft)),zt.throwUnescapedHTML))throw new fn("One of your code blocks includes unescaped HTML.",ft.innerHTML);Nt=ft;const wn=Nt.textContent,kr=pn?Lr(wn,{language:pn,ignoreIllegals:!0}):ws(wn);ft.innerHTML=kr.value,ft.dataset.highlighted="yes",Jr(ft,pn,kr.language),ft.result={language:kr.language,re:kr.relevance,relevance:kr.relevance},kr.secondBest&&(ft.secondBest={language:kr.secondBest.language,relevance:kr.secondBest.relevance}),Ps("after:highlightElement",{el:ft,result:kr,text:wn})}function Os(ft){zt=Wa(zt,ft)}const it=()=>{Vt(),_e("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function rt(){Vt(),_e("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let pt=!1;function Vt(){function ft(){Vt()}if(document.readyState==="loading"){pt||window.addEventListener("DOMContentLoaded",ft,!1),pt=!0;return}document.querySelectorAll(zt.cssSelector).forEach(gr)}function Ur(ft,Nt){let pn=null;try{pn=Nt(ye)}catch(wn){if(Le("Language definition for '{}' could not be registered.".replace("{}",ft)),mr)Le(wn);else throw wn;pn=Rt}pn.name||(pn.name=ft),Ue[ft]=pn,pn.rawDefinition=Nt.bind(null,ye),pn.aliases&&ua(pn.aliases,{languageName:ft})}function Ao(ft){delete Ue[ft];for(const Nt of Object.keys(ht))ht[Nt]===ft&&delete ht[Nt]}function Zn(){return Object.keys(Ue)}function Hr(ft){return ft=(ft||"").toLowerCase(),Ue[ft]||Ue[ht[ft]]}function ua(ft,{languageName:Nt}){typeof ft=="string"&&(ft=[ft]),ft.forEach(pn=>{ht[pn.toLowerCase()]=Nt})}function kt(ft){const Nt=Hr(ft);return Nt&&!Nt.disableAutodetect}function Fn(ft){ft["before:highlightBlock"]&&!ft["before:highlightElement"]&&(ft["before:highlightElement"]=Nt=>{ft["before:highlightBlock"](Object.assign({block:Nt.el},Nt))}),ft["after:highlightBlock"]&&!ft["after:highlightElement"]&&(ft["after:highlightElement"]=Nt=>{ft["after:highlightBlock"](Object.assign({block:Nt.el},Nt))})}function mt(ft){Fn(ft),Jt.push(ft)}function Xr(ft){const Nt=Jt.indexOf(ft);Nt!==-1&&Jt.splice(Nt,1)}function Ps(ft,Nt){const pn=ft;Jt.forEach(function(wn){wn[pn]&&wn[pn](Nt)})}function rr(ft){return _e("10.7.0","highlightBlock will be removed entirely in v12.0"),_e("10.7.0","Please use highlightElement now."),gr(ft)}Object.assign(ye,{highlight:Lr,highlightAuto:ws,highlightAll:Vt,highlightElement:gr,highlightBlock:rr,configure:Os,initHighlighting:it,initHighlightingOnLoad:rt,registerLanguage:Ur,unregisterLanguage:Ao,listLanguages:Zn,getLanguage:Hr,registerAliases:ua,autoDetection:kt,inherit:Wa,addPlugin:mt,removePlugin:Xr}),ye.debugMode=function(){mr=!1},ye.safeMode=function(){mr=!0},ye.versionString=jt,ye.regex={concat:v,lookahead:m,either:_,optional:y,anyNumberOfTimes:g};for(const ft in Re)typeof Re[ft]=="object"&&e(Re[ft]);return Object.assign(ye,Re),ye},sn=wt({});return sn.newInstance=()=>wt({}),Dk=sn,sn.HighlightJS=sn,sn.default=sn,Dk}var f$e=d$e();const Jee=km(f$e);function Xee(e,t=[]){return e.flatMap(n=>{const r=[...t,...n.properties?n.properties.className:[]];return n.children?Xee(n.children,r):{text:n.value,classes:r}})}function gz(e){return e.value||e.children||[]}function h$e(e){return!!Jee.getLanguage(e)}function bz({doc:e,name:t,lowlight:n,defaultLanguage:r}){const o=[];return A6(e,s=>s.type.name===t).forEach(s=>{var i;let a=s.pos+1;const l=s.node.attrs.language||r,c=n.listLanguages(),u=l&&(c.includes(l)||h$e(l)||(i=n.registered)!=null&&i.call(n,l))?gz(n.highlight(l,s.node.textContent)):gz(n.highlightAuto(s.node.textContent));Xee(u).forEach(f=>{const m=a+f.text.length;if(f.classes.length){const g=la.inline(a,m,{class:f.classes.join(" ")});o.push(g)}a=m})}),us.create(e,o)}function p$e(e){return typeof e=="function"}function m$e({name:e,lowlight:t,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(o=>p$e(t[o])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new vo({key:new Bo("lowlight"),state:{init:(o,{doc:s})=>bz({doc:s,name:e,lowlight:t,defaultLanguage:n}),apply:(o,s,i,a)=>{const l=i.selection.$head.parent.type.name,c=a.selection.$head.parent.type.name,u=A6(i.doc,m=>m.type.name===e),f=A6(a.doc,m=>m.type.name===e);return o.docChanged&&([l,c].includes(e)||f.length!==u.length||o.steps.some(m=>m.from!==void 0&&m.to!==void 0&&u.some(g=>g.pos>=m.from&&g.pos+g.node.nodeSize<=m.to)))?bz({doc:o.doc,name:e,lowlight:t,defaultLanguage:n}):s.map(o.mapping,o.doc)}},props:{decorations(o){return r.getState(o)}}});return r}var g$e=mPe.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},addProseMirrorPlugins(){var e;return[...((e=this.parent)==null?void 0:e.call(this))||[],m$e({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}});function b$e(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",i="(?!struct)("+r+"|"+t.optional(o)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(o)+e.IDENT_RE,relevance:0},g=t.optional(o)+e.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],w=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],M={type:v,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:w},D={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},I=[D,f,a,n,e.C_BLOCK_COMMENT_MODE,u,c],P={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:M,contains:I.concat([{begin:/\(/,end:/\)/,keywords:M,contains:I.concat(["self"]),relevance:0}]),relevance:0},B={className:"function",begin:"("+i+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:M,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:M,relevance:0},{begin:g,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:M,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:M,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:M,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(P,B,D,I,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:M,contains:["self",a]},{begin:e.IDENT_RE+"::",keywords:M},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function y$e(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=b$e(e),r=n.keywords;return r.type=[...r.type,...t.type],r.literal=[...r.literal,...t.literal],r.built_in=[...r.built_in,...t.built_in],r._hints=t._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function v$e(e){const t=e.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const o={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},s=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),i={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,o]};o.contains.push(a);const l={match:/\\"/},c={className:"string",begin:/'/,end:/'/},u={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},m=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],g=e.SHEBANG({binary:`(${m.join("|")})`,relevance:10}),y={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},v=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],w=["true","false"],_={match:/(\/[a-z._-]+)+/},T=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],k=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],M=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],D=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:v,literal:w,built_in:[...T,...k,"set","shopt",...M,...D]},contains:[g,e.SHEBANG(),y,f,s,i,_,a,l,c,u,n]}}function x$e(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",i="("+r+"|"+t.optional(o)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(o)+e.IDENT_RE,relevance:0},g=t.optional(o)+e.IDENT_RE+"\\s*\\(",w={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},_=[f,a,n,e.C_BLOCK_COMMENT_MODE,u,c],T={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:w,contains:_.concat([{begin:/\(/,end:/\)/,keywords:w,contains:_.concat(["self"]),relevance:0}]),relevance:0},k={begin:"("+i+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:w,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:w,relevance:0},{begin:g,returnBegin:!0,contains:[e.inherit(m,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:w,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:w,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:w,disableAutodetect:!0,illegal:"</",contains:[].concat(T,k,_,[f,{begin:e.IDENT_RE+"::",keywords:w},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:f,strings:c,keywords:w}}}function w$e(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",i="(?!struct)("+r+"|"+t.optional(o)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(o)+e.IDENT_RE,relevance:0},g=t.optional(o)+e.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],w=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],M={type:v,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:w},D={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},I=[D,f,a,n,e.C_BLOCK_COMMENT_MODE,u,c],P={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:M,contains:I.concat([{begin:/\(/,end:/\)/,keywords:M,contains:I.concat(["self"]),relevance:0}]),relevance:0},B={className:"function",begin:"("+i+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:M,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:M,relevance:0},{begin:g,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:M,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:M,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:M,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(P,B,D,I,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:M,contains:["self",a]},{begin:e.IDENT_RE+"::",keywords:M},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function E$e(e){const t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],o=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],i={keyword:o.concat(s),built_in:t,literal:r},a=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},u={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=e.inherit(u,{illegal:/\n/}),m={className:"subst",begin:/\{/,end:/\}/,keywords:i},g=e.inherit(m,{illegal:/\n/}),y={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,g]},v={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},m]},w=e.inherit(v,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},g]});m.contains=[v,y,u,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,l,e.C_BLOCK_COMMENT_MODE],g.contains=[w,y,f,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,l,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const _={variants:[c,v,y,u,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},T={begin:"<",end:">",contains:[{beginKeywords:"in out"},a]},k=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",M={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:i,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},_,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},a,T,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,T,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+k+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:i,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,T],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,relevance:0,contains:[_,l,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},M]}}const _$e=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),S$e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],T$e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],C$e=[...S$e,...T$e],k$e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),A$e=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),N$e=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),I$e=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function R$e(e){const t=e.regex,n=_$e(e),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},o="and or not only",s=/@-?\w[\w]*(-\w+)*/,i="[a-zA-Z-][a-zA-Z0-9_-]*",a=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+i,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+A$e.join("|")+")"},{begin:":(:)?("+N$e.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+I$e.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...a,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...a,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:k$e.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...a,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+C$e.join("|")+")\\b"}]}}function M$e(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function D$e(e){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function O$e(e){const t=e.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(n,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function P$e(e){const t=e.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},r=e.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const o={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},s={className:"literal",begin:/\bon|off|true|false|yes|no\b/},i={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},a={begin:/\[/,end:/\]/,contains:[r,s,o,i,n,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,c=/"(\\"|[^"])*"/,u=/'[^']*'/,f=t.either(l,c,u),m=t.concat(f,"(\\s*\\.\\s*",f,")*",t.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:m,className:"attr",starts:{end:/$/,contains:[r,a,s,o,i,n]}}]}}var l1="[0-9](_*[0-9])*",F2=`\\.(${l1})`,B2="[0-9a-fA-F](_*[0-9a-fA-F])*",yz={className:"number",variants:[{begin:`(\\b(${l1})((${F2})|\\.)?|(${F2}))[eE][+-]?(${l1})[fFdD]?\\b`},{begin:`\\b(${l1})((${F2})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${F2})[fFdD]?\\b`},{begin:`\\b(${l1})[fFdD]\\b`},{begin:`\\b0[xX]((${B2})\\.?|(${B2})?\\.(${B2}))[pP][+-]?(${l1})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${B2})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function Qee(e,t,n){return n===-1?"":e.replace(t,r=>Qee(e,t,n-1))}function L$e(e){const t=e.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+Qee("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},c={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},u={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[u,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[c,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,yz,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},yz,c]}}const vz="[A-Za-z$_][0-9A-Za-z$_]*",$$e=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],F$e=["true","false","null","undefined","NaN","Infinity"],ete=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],tte=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],nte=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],B$e=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],z$e=[].concat(nte,ete,tte);function j$e(e){const t=e.regex,n=(re,{after:ie})=>{const K="</"+re[0].slice(1);return re.input.indexOf(K,ie)!==-1},r=vz,o={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(re,ie)=>{const K=re[0].length+re.index,te=re.input[K];if(te==="<"||te===","){ie.ignoreMatch();return}te===">"&&(n(re,{after:K})||ie.ignoreMatch());let se;const Q=re.input.substring(K);if(se=Q.match(/^\s*=/)){ie.ignoreMatch();return}if((se=Q.match(/^\s+extends\s+/))&&se.index===0){ie.ignoreMatch();return}}},a={$pattern:vz,keyword:$$e,literal:F$e,built_in:z$e,"variable.language":B$e},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},g={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},w={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,m]},T={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},k=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,w,{match:/\$\d+/},f];m.contains=k.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(k)});const M=[].concat(T,m.contains),D=M.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(M)}]),I={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:D},P={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},B={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...ete,...tte]}},U={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},j={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[I],illegal:/%/},H={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function q(re){return t.concat("(?!",re.join("|"),")")}const z={match:t.concat(/\b/,q([...nte,"super","import"].map(re=>`${re}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},Z={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},X={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},I]},J="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ee={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(J)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[I]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:D,CLASS_REFERENCE:B},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),U,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,w,T,{match:/\$\d+/},f,B,{scope:"attr",match:r+t.lookahead(":"),relevance:0},ee,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[T,e.REGEXP_MODE,{className:"function",begin:J,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:D}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:s},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},j,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[I,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},Z,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[I]},z,H,P,X,{match:/\$[(.]/}]}}function U$e(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],o={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[t,n,e.QUOTE_STRING_MODE,o,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var c1="[0-9](_*[0-9])*",z2=`\\.(${c1})`,j2="[0-9a-fA-F](_*[0-9a-fA-F])*",H$e={className:"number",variants:[{begin:`(\\b(${c1})((${z2})|\\.)?|(${z2}))[eE][+-]?(${c1})[fFdD]?\\b`},{begin:`\\b(${c1})((${z2})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${z2})[fFdD]?\\b`},{begin:`\\b(${c1})[fFdD]\\b`},{begin:`\\b0[xX]((${j2})\\.?|(${j2})?\\.(${j2}))[pP][+-]?(${c1})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${j2})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function V$e(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},o={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},i={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,o]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,s,o]}]};o.contains.push(i);const a={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(i,{className:"string"}),"self"]}]},c=H$e,u=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},m=f;return m.variants[1].contains=[f],f.variants[1].contains=[m],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,u,n,r,a,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,e.C_LINE_COMMENT_MODE,u],relevance:0},e.C_LINE_COMMENT_MODE,u,a,l,i,e.C_NUMBER_MODE]},u]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},a,l]},i,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},c]}}const q$e=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),G$e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],W$e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Y$e=[...G$e,...W$e],K$e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),rte=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),ote=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Z$e=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),J$e=rte.concat(ote).sort().reverse();function X$e(e){const t=q$e(e),n=J$e,r="and or not only",o="[\\w-]+",s="("+o+"|@\\{"+o+"\\})",i=[],a=[],l=function(k){return{className:"string",begin:"~?"+k+".*?"+k}},c=function(k,M,D){return{className:k,begin:M,relevance:D}},u={$pattern:/[a-z-]+/,keyword:r,attribute:K$e.join(" ")},f={begin:"\\(",end:"\\)",contains:a,keywords:u,relevance:0};a.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,l("'"),l('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,f,c("variable","@@?"+o,10),c("variable","@\\{"+o+"\\}"),c("built_in","~?`[^`]*?`"),{className:"attribute",begin:o+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const m=a.concat({begin:/\{/,end:/\}/,contains:i}),g={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(a)},y={begin:s+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Z$e.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:a}}]},v={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:u,returnEnd:!0,contains:a,relevance:0}},w={className:"variable",variants:[{begin:"@"+o+"\\s*:",relevance:15},{begin:"@"+o}],starts:{end:"[;}]",returnEnd:!0,contains:m}},_={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:s,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,g,c("keyword","all\\b"),c("variable","@\\{"+o+"\\}"),{begin:"\\b("+Y$e.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,c("selector-tag",s,0),c("selector-id","#"+s),c("selector-class","\\."+s,0),c("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+rte.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+ote.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:m},{begin:"!important"},t.FUNCTION_DISPATCH]},T={begin:o+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[_]};return i.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,v,w,T,y,_,g,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:i}}function Q$e(e){const t="\\[=*\\[",n="\\]=*\\]",r={begin:t,end:n,contains:["self"]},o=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:o.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:o}].concat(o)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:n,contains:[r],relevance:5}])}}function eFe(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,n]},o={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},s={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},i={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,n,r,o,s,i]}}function tFe(e){const t=e.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},i={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},a=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,a,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},c={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=e.inherit(c,{contains:[]}),m=e.inherit(u,{contains:[]});c.contains.push(m),u.contains.push(f);let g=[n,l];return[c,u,f,m].forEach(_=>{_.contains=_.contains.concat(g)}),g=g.concat(c,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:g},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:g}]}]},n,s,c,u,{className:"quote",begin:"^>\\s+",contains:g,end:"$"},o,r,l,i,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function nFe(e){const t={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,a={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:a,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}function rFe(e){const t=e.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:n.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},i={begin:/->\{/,end:/\}/},a={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[a]},c={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},u=[e.BACKSLASH_ESCAPE,s,l],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],m=(v,w,_="\\1")=>{const T=_==="\\1"?_:t.concat(_,w);return t.concat(t.concat("(?:",v,")"),w,/(?:\\.|[^\\\/])*?/,T,/(?:\\.|[^\\\/])*?/,_,r)},g=(v,w,_)=>t.concat(t.concat("(?:",v,")"),w,/(?:\\.|[^\\\/])*?/,_,r),y=[l,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),i,{className:"string",contains:u,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},c,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:m("s|tr|y",t.either(...f,{capture:!0}))},{begin:m("s|tr|y","\\(","\\)")},{begin:m("s|tr|y","\\[","\\]")},{begin:m("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:g("(?:m|qr)?",/\//,/\//)},{begin:g("m|qr",t.either(...f,{capture:!0}),/\1/)},{begin:g("m|qr",/\(/,/\)/)},{begin:g("m|qr",/\[/,/\]/)},{begin:g("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,a]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,a,c]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=y,i.contains=y,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:y}}function oFe(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,r=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),o=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),s=t.concat(/[A-Z]+/,n),i={scope:"variable",match:"\\$+"+r},a={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=e.inherit(e.APOS_STRING_MODE,{illegal:null}),u=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(l)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(Z,X)=>{X.data._beginMatch=Z[1]||Z[2]},"on:end":(Z,X)=>{X.data._beginMatch!==Z[1]&&X.ignoreMatch()}},m=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),g=`[ 	
]`,y={scope:"string",variants:[u,c,f,m]},v={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},w=["false","null","true"],_=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],T=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],M={keyword:_,literal:(Z=>{const X=[];return Z.forEach(J=>{X.push(J),J.toLowerCase()===J?X.push(J.toUpperCase()):X.push(J.toLowerCase())}),X})(w),built_in:T},D=Z=>Z.map(X=>X.replace(/\|\d+$/,"")),I={variants:[{match:[/new/,t.concat(g,"+"),t.concat("(?!",D(T).join("\\b|"),"\\b)"),o],scope:{1:"keyword",4:"title.class"}}]},P=t.concat(r,"\\b(?!\\()"),B={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),P],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[o,t.concat(/::/,t.lookahead(/(?!class\b)/)),P],scope:{1:"title.class",3:"variable.constant"}},{match:[o,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[o,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},U={scope:"attr",match:t.concat(r,t.lookahead(":"),t.lookahead(/(?!::)/))},j={relevance:0,begin:/\(/,end:/\)/,keywords:M,contains:[U,i,B,e.C_BLOCK_COMMENT_MODE,y,v,I]},H={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",D(_).join("\\b|"),"|",D(T).join("\\b|"),"\\b)"),r,t.concat(g,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[j]};j.contains.push(H);const q=[U,B,e.C_BLOCK_COMMENT_MODE,y,v,I],z={begin:t.concat(/#\[\s*\\?/,t.either(o,s)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:w,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:w,keyword:["new","array"]},contains:["self",...q]},...q,{scope:"meta",variants:[{match:o},{match:s}]}]};return{case_insensitive:!1,keywords:M,contains:[z,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},a,{scope:"variable.language",match:/\$this\b/},i,H,B,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},I,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:M,contains:["self",z,i,B,e.C_BLOCK_COMMENT_MODE,y,v]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},y,v]}}function sFe(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function iFe(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function aFe(e){const t=e.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],a={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},c={className:"subst",begin:/\{/,end:/\}/,keywords:a,illegal:/#/},u={begin:/\{\{/,relevance:0},f={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,l,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,l,u,c]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,u,c]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},m="[0-9](_?[0-9])*",g=`(\\b(${m}))?\\.(${m})|\\b(${m})\\.`,y=`\\b|${r.join("|")}`,v={className:"number",relevance:0,variants:[{begin:`(\\b(${m})|(${g}))[eE][+-]?(${m})[jJ]?(?=${y})`},{begin:`(${g})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${y})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${y})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${y})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${y})`},{begin:`\\b(${m})[jJ](?=${y})`}]},w={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:a,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},_={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:["self",l,v,f,e.HASH_COMMENT_MODE]}]};return c.contains=[f,v,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:a,illegal:/(<\/|\?)|=>/,contains:[l,v,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,w,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[_]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[v,_,f]}]}}function lFe(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function cFe(e){const t=e.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),o=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,s=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[o,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[s,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:o},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:s},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function uFe(e){const t=e.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),o=t.concat(r,/(::\w+)*/),i={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},a={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},c=[e.COMMENT("#","$",{contains:[a]}),e.COMMENT("^=begin","^=end",{contains:[a],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],u={className:"subst",begin:/#\{/,end:/\}/,keywords:i},f={className:"string",contains:[e.BACKSLASH_ESCAPE,u],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,u]})]}]},m="[1-9](_?[0-9])*|0",g="[0-9](_?[0-9])*",y={className:"number",relevance:0,variants:[{begin:`\\b(${m})(\\.(${g}))?([eE][+-]?(${g})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},v={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:i}]},I=[f,{variants:[{match:[/class\s+/,o,/\s+<\s+/,o]},{match:[/\b(class|module)\s+/,o]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:i},{match:[/(include|extend)\s+/,o],scope:{2:"title.class"},keywords:i},{relevance:0,match:[o,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[v]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:n}],relevance:0},y,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:i},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,u],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,c),relevance:0}].concat(l,c);u.contains=I,v.contains=I;const j=[{begin:/^\s*=>/,starts:{end:"$",contains:I}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:i,contains:I}}];return c.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:i,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(j).concat(c).concat(I)}}function dFe(e){const t=e.regex,n=/(r#)?/,r=t.concat(n,e.UNDERSCORE_IDENT_RE),o=t.concat(n,e.IDENT_RE),s={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,o,t.lookahead(/\s*\(/))},i="([ui](8|16|32|64|128|size)|f(32|64))?",a=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],c=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],u=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:u,keyword:a,literal:l,built_in:c},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+i},{begin:"\\b0o([0-7_]+)"+i},{begin:"\\b0x([A-Fa-f0-9_]+)"+i},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+i}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:c,type:u}},{className:"punctuation",begin:"->"},s]}}const fFe=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),hFe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],pFe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],mFe=[...hFe,...pFe],gFe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),bFe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),yFe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),vFe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function xFe(e){const t=fFe(e),n=yFe,r=bFe,o="@[a-z-]+",s="and or not only",a={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+mFe.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},a,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+vFe.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,a,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:o,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:gFe.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},a,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function wFe(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function EFe(e){const t=e.regex,n=e.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},o={begin:/"/,end:/"/,contains:[{match:/""/}]},s=["true","false","unknown"],i=["double precision","large object","with timezone","without timezone"],a=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],c=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],u=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],m=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],g=u,y=[...c,...l].filter(D=>!u.includes(D)),v={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},w={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},_={match:t.concat(/\b/,t.either(...g),/\s*\(/),relevance:0,keywords:{built_in:g}};function T(D){return t.concat(/\b/,t.either(...D.map(I=>I.replace(/\s+/,"\\s+"))),/\b/)}const k={scope:"keyword",match:T(m),relevance:0};function M(D,{exceptions:I,when:P}={}){const B=P;return I=I||[],D.map(U=>U.match(/\|\d+$/)||I.includes(U)?U:B(U)?`${U}|0`:U)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:M(y,{when:D=>D.length<3}),literal:s,type:a,built_in:f},contains:[{scope:"type",match:T(i)},k,_,v,r,o,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,w]}}function ste(e){return e?typeof e=="string"?e:e.source:null}function Ky(e){return Lo("(?=",e,")")}function Lo(...e){return e.map(n=>ste(n)).join("")}function _Fe(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Pa(...e){return"("+(_Fe(e).capture?"":"?:")+e.map(r=>ste(r)).join("|")+")"}const $7=e=>Lo(/\b/,e,/\w$/.test(e)?/\b/:/\B/),SFe=["Protocol","Type"].map($7),xz=["init","self"].map($7),TFe=["Any","Self"],Ok=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],wz=["false","nil","true"],CFe=["assignment","associativity","higherThan","left","lowerThan","none","right"],kFe=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],Ez=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],ite=Pa(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),ate=Pa(ite,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),Pk=Lo(ite,ate,"*"),lte=Pa(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),CT=Pa(lte,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Ju=Lo(lte,CT,"*"),U2=Lo(/[A-Z]/,CT,"*"),AFe=["attached","autoclosure",Lo(/convention\(/,Pa("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Lo(/objc\(/,Ju,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],NFe=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function IFe(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[e.C_LINE_COMMENT_MODE,n],o={match:[/\./,Pa(...SFe,...xz)],className:{2:"keyword"}},s={match:Lo(/\./,Pa(...Ok)),relevance:0},i=Ok.filter(Ht=>typeof Ht=="string").concat(["_|0"]),a=Ok.filter(Ht=>typeof Ht!="string").concat(TFe).map($7),l={variants:[{className:"keyword",match:Pa(...a,...xz)}]},c={$pattern:Pa(/\b\w+/,/#\w+/),keyword:i.concat(kFe),literal:wz},u=[o,s,l],f={match:Lo(/\./,Pa(...Ez)),relevance:0},m={className:"built_in",match:Lo(/\b/,Pa(...Ez),/(?=\()/)},g=[f,m],y={match:/->/,relevance:0},v={className:"operator",relevance:0,variants:[{match:Pk},{match:`\\.(\\.|${ate})+`}]},w=[y,v],_="([0-9]_*)+",T="([0-9a-fA-F]_*)+",k={className:"number",relevance:0,variants:[{match:`\\b(${_})(\\.(${_}))?([eE][+-]?(${_}))?\\b`},{match:`\\b0x(${T})(\\.(${T}))?([pP][+-]?(${_}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},M=(Ht="")=>({className:"subst",variants:[{match:Lo(/\\/,Ht,/[0\\tnr"']/)},{match:Lo(/\\/,Ht,/u\{[0-9a-fA-F]{1,8}\}/)}]}),D=(Ht="")=>({className:"subst",match:Lo(/\\/,Ht,/[\t ]*(?:[\r\n]|\r\n)/)}),I=(Ht="")=>({className:"subst",label:"interpol",begin:Lo(/\\/,Ht,/\(/),end:/\)/}),P=(Ht="")=>({begin:Lo(Ht,/"""/),end:Lo(/"""/,Ht),contains:[M(Ht),D(Ht),I(Ht)]}),B=(Ht="")=>({begin:Lo(Ht,/"/),end:Lo(/"/,Ht),contains:[M(Ht),I(Ht)]}),U={className:"string",variants:[P(),P("#"),P("##"),P("###"),B(),B("#"),B("##"),B("###")]},j=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],H={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:j},q=Ht=>{const Pt=Lo(Ht,/\//),tn=Lo(/\//,Ht);return{begin:Pt,end:tn,contains:[...j,{scope:"comment",begin:`#(?!.*${tn})`,end:/$/}]}},z={scope:"regexp",variants:[q("###"),q("##"),q("#"),H]},Z={match:Lo(/`/,Ju,/`/)},X={className:"variable",match:/\$\d+/},J={className:"variable",match:`\\$${CT}+`},ee=[Z,X,J],re={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:NFe,contains:[...w,k,U]}]}},ie={scope:"keyword",match:Lo(/@/,Pa(...AFe),Ky(Pa(/\(/,/\s+/)))},K={scope:"meta",match:Lo(/@/,Ju)},te=[re,ie,K],se={match:Ky(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Lo(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,CT,"+")},{className:"type",match:U2,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Lo(/\s+&\s+/,Ky(U2)),relevance:0}]},Q={begin:/</,end:/>/,keywords:c,contains:[...r,...u,...te,y,se]};se.contains.push(Q);const Te={match:Lo(Ju,/\s*:/),keywords:"_|0",relevance:0},ge={begin:/\(/,end:/\)/,relevance:0,keywords:c,contains:["self",Te,...r,z,...u,...g,...w,k,U,...ee,...te,se]},Ce={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,se]},he={begin:Pa(Ky(Lo(Ju,/\s*:/)),Ky(Lo(Ju,/\s+/,Ju,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Ju}]},Fe={begin:/\(/,end:/\)/,keywords:c,contains:[he,...r,...u,...w,k,U,...te,se,ge],endsParent:!0,illegal:/["']/},Oe={match:[/(func|macro)/,/\s+/,Pa(Z.match,Ju,Pk)],className:{1:"keyword",3:"title.function"},contains:[Ce,Fe,t],illegal:[/\[/,/%/]},Re={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Ce,Fe,t],illegal:/\[|%/},nt={match:[/operator/,/\s+/,Pk],className:{1:"keyword",3:"title"}},ue={begin:[/precedencegroup/,/\s+/,U2],className:{1:"keyword",3:"title"},contains:[se],keywords:[...CFe,...wz],end:/}/},et={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},ut={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},Yt={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Ju,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:c,contains:[Ce,...u,{begin:/:/,end:/\{/,keywords:c,contains:[{scope:"title.class.inherited",match:U2},...u],relevance:0}]};for(const Ht of U.variants){const Pt=Ht.contains.find(vt=>vt.label==="interpol");Pt.keywords=c;const tn=[...u,...g,...w,k,U,...ee];Pt.contains=[...tn,{begin:/\(/,end:/\)/,contains:["self",...tn]}]}return{name:"Swift",keywords:c,contains:[...r,Oe,Re,et,ut,Yt,nt,ue,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},z,...u,...g,...w,k,U,...ee,...te,se,ge]}}const kT="[A-Za-z$_][0-9A-Za-z$_]*",cte=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],ute=["true","false","null","undefined","NaN","Infinity"],dte=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],fte=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],hte=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],pte=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],mte=[].concat(hte,dte,fte);function RFe(e){const t=e.regex,n=(re,{after:ie})=>{const K="</"+re[0].slice(1);return re.input.indexOf(K,ie)!==-1},r=kT,o={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(re,ie)=>{const K=re[0].length+re.index,te=re.input[K];if(te==="<"||te===","){ie.ignoreMatch();return}te===">"&&(n(re,{after:K})||ie.ignoreMatch());let se;const Q=re.input.substring(K);if(se=Q.match(/^\s*=/)){ie.ignoreMatch();return}if((se=Q.match(/^\s+extends\s+/))&&se.index===0){ie.ignoreMatch();return}}},a={$pattern:kT,keyword:cte,literal:ute,built_in:mte,"variable.language":pte},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},g={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},w={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,m]},T={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},k=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,w,{match:/\$\d+/},f];m.contains=k.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(k)});const M=[].concat(T,m.contains),D=M.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(M)}]),I={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:D},P={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},B={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...dte,...fte]}},U={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},j={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[I],illegal:/%/},H={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function q(re){return t.concat("(?!",re.join("|"),")")}const z={match:t.concat(/\b/,q([...hte,"super","import"].map(re=>`${re}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},Z={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},X={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},I]},J="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ee={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(J)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[I]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:D,CLASS_REFERENCE:B},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),U,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,y,v,w,T,{match:/\$\d+/},f,B,{scope:"attr",match:r+t.lookahead(":"),relevance:0},ee,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[T,e.REGEXP_MODE,{className:"function",begin:J,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:D}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:s},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},j,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[I,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},Z,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[I]},z,H,P,X,{match:/\$[(.]/}]}}function MFe(e){const t=e.regex,n=RFe(e),r=kT,o=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},i={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:o},contains:[n.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],c={$pattern:kT,keyword:cte.concat(l),literal:ute,built_in:mte.concat(o),"variable.language":pte},u={className:"meta",begin:"@"+r},f=(v,w,_)=>{const T=v.contains.findIndex(k=>k.label===w);if(T===-1)throw new Error("can not find mode to replace");v.contains.splice(T,1,_)};Object.assign(n.keywords,c),n.exports.PARAMS_CONTAINS.push(u);const m=n.contains.find(v=>v.scope==="attr"),g=Object.assign({},m,{match:t.concat(r,t.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,m,g]),n.contains=n.contains.concat([u,s,i,g]),f(n,"shebang",e.SHEBANG()),f(n,"use_strict",a);const y=n.contains.find(v=>v.label==="func.def");return y.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function DFe(e){const t=e.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},o=/\d{1,2}\/\d{1,2}\/\d{4}/,s=/\d{4}-\d{1,2}-\d{1,2}/,i=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,a=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:t.concat(/# */,t.either(s,o),/ *#/)},{begin:t.concat(/# */,a,/ *#/)},{begin:t.concat(/# */,i,/ *#/)},{begin:t.concat(/# */,t.either(s,o),/ +/,t.either(i,a),/ *#/)}]},c={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},u={className:"label",begin:/^\w+:/},f=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),m=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,l,c,u,f,m,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[m]}]}}function OFe(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");const n=e.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],o={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},s={className:"variable",begin:/\$[\w_]+/},i={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},a={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},c={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},s,i,o,e.QUOTE_STRING_MODE,l,c,a]}}function PFe(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},i=e.inherit(s,{begin:/\(/,end:/\)/}),a=e.inherit(e.APOS_STRING_MODE,{className:"string"}),l=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,l,a,i,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,i,l,a]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:c}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function LFe(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},i={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,o]},a=e.inherit(i,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),m={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},g={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},y={begin:/\{/,end:/\}/,contains:[g],illegal:"\\n",relevance:0},v={begin:"\\[",end:"\\]",contains:[g],illegal:"\\n",relevance:0},w=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},m,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},y,v,s,i],_=[...w];return _.pop(),_.push(a),g.contains=_,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:w}}const $Fe={arduino:y$e,bash:v$e,c:x$e,cpp:w$e,csharp:E$e,css:R$e,diff:M$e,go:D$e,graphql:O$e,ini:P$e,java:L$e,javascript:j$e,json:U$e,kotlin:V$e,less:X$e,lua:Q$e,makefile:eFe,markdown:tFe,objectivec:nFe,perl:rFe,php:oFe,"php-template":sFe,plaintext:iFe,python:aFe,"python-repl":lFe,r:cFe,ruby:uFe,rust:dFe,scss:xFe,shell:wFe,sql:EFe,swift:IFe,typescript:MFe,vbnet:DFe,wasm:OFe,xml:PFe,yaml:LFe};const _z={},FFe="hljs-";function BFe(e){const t=Jee.newInstance();return e&&s(e),{highlight:n,highlightAuto:r,listLanguages:o,register:s,registerAlias:i,registered:a};function n(l,c,u){const f=u||_z,m=typeof f.prefix=="string"?f.prefix:FFe;if(!t.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");t.configure({__emitter:zFe,classPrefix:m});const g=t.highlight(c,{ignoreIllegals:!0,language:l});if(g.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:g.errorRaised});const y=g._emitter.root,v=y.data;return v.language=g.language,v.relevance=g.relevance,y}function r(l,c){const f=(c||_z).subset||o();let m=-1,g=0,y;for(;++m<f.length;){const v=f[m];if(!t.getLanguage(v))continue;const w=n(v,l,c);w.data&&w.data.relevance!==void 0&&w.data.relevance>g&&(g=w.data.relevance,y=w)}return y||{type:"root",children:[],data:{language:void 0,relevance:g}}}function o(){return t.listLanguages()}function s(l,c){if(typeof l=="string")t.registerLanguage(l,c);else{let u;for(u in l)Object.hasOwn(l,u)&&t.registerLanguage(u,l[u])}}function i(l,c){if(typeof l=="string")t.registerAliases(typeof c=="string"?c:[...c],{languageName:l});else{let u;for(u in l)if(Object.hasOwn(l,u)){const f=l[u];t.registerAliases(typeof f=="string"?f:[...f],{languageName:u})}}}function a(l){return!!t.getLanguage(l)}}class zFe{constructor(t){this.options=t,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(t){if(t==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=t:n.children.push({type:"text",value:t})}startScope(t){this.openNode(String(t))}endScope(){this.closeNode()}__addSublanguage(t,n){const r=this.stack[this.stack.length-1],o=t.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:o}):r.children.push(...o)}openNode(t){const n=this,r=t.split(".").map(function(i,a){return a?i+"_".repeat(a):n.options.classPrefix+i}),o=this.stack[this.stack.length-1],s={type:"element",tagName:"span",properties:{className:r},children:[]};o.children.push(s),this.stack.push(s)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const jFe=g$e.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),lowlight:BFe($Fe),defaultLanguage:null,HTMLAttributes:{class:"block-node"}}}}),UFe=Zee.extend({addProseMirrorPlugins(){var e;return[...((e=this.parent)==null?void 0:e.call(this))||[],new vo({props:{handleKeyDown:(t,n)=>(n.key==="Enter"&&this.editor.commands.unsetColor(),!1)}})]}}),HFe=wee.extend({addKeyboardShortcuts(){return{"Mod-Alt--":()=>this.editor.commands.insertContent({type:this.name})}}});var VFe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,qFe=xl.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",Ms(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,n,r,o,s,i;const a=(n=(t=e.attrs)==null?void 0:t.src)!=null?n:"",l=(o=(r=e.attrs)==null?void 0:r.alt)!=null?o:"",c=(i=(s=e.attrs)==null?void 0:s.title)!=null?i:"";return c?`![${l}](${a} "${c}")`:`![${l}](${a})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:e,minWidth:t,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:o,getPos:s,HTMLAttributes:i,editor:a})=>{const l=document.createElement("img");Object.entries(i).forEach(([f,m])=>{if(m!=null)switch(f){case"width":case"height":break;default:l.setAttribute(f,m);break}}),l.src=i.src;const c=new D9e({element:l,editor:a,node:o,getPos:s,onResize:(f,m)=>{l.style.width=`${f}px`,l.style.height=`${m}px`},onCommit:(f,m)=>{const g=s();g!==void 0&&this.editor.chain().setNodeSelection(g).updateAttributes(this.name,{width:f,height:m}).run()},onUpdate:(f,m,g)=>f.type===o.type,options:{directions:e,min:{width:t,height:n},preserveAspectRatio:r===!0}}),u=c.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",l.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},c}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[qQ({find:VFe,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}});function GFe({initialWidth:e,initialHeight:t,contentWidth:n,contentHeight:r,gridInterval:o,minWidth:s,minHeight:i,maxWidth:a,onDimensionsChange:l}){const[c,u]=x.useState({width:Math.max(e??s,s),height:Math.max(t??i,i)}),[f,m]=x.useState(1/0),[g,y]=x.useState(0),[v,w]=x.useState(c),[_,T]=x.useState(),k=x.useCallback((B,U)=>{const j=Math.max(s,Math.min(n??s,o/100*U));return Math.min(U,Math.max(B,j))},[o,n,s]),M=x.useCallback(B=>{B.preventDefault();const U=(_==="left"?g-B.pageX:B.pageX-g)*2,j=o/100*f,H=v.width+U,q=Math.round(H/j)*j,z=k(q,f),Z=r&&n?r/n:1;u({width:Math.max(z,s),height:Math.max(n?z*Z:r??i,i)})},[k,_,f,g,o,r,n,v.width,s,i]),D=x.useCallback(B=>{B.preventDefault(),B.stopPropagation(),y(0),T(void 0),l==null||l(c)},[l,c]),I=x.useCallback(B=>{B.key==="Escape"&&(B.preventDefault(),B.stopPropagation(),u({width:Math.max(v.width,s),height:Math.max(v.height,i)}),T(void 0))},[v,s,i]),P=x.useCallback(B=>U=>{U.preventDefault(),U.stopPropagation(),m(a),w({width:Math.max(k(c.width,a),s),height:Math.max(c.height,i)}),y(U.pageX),T(B)},[a,k,c.width,c.height,s,i]);return x.useEffect(()=>{if(_)return document.addEventListener("keydown",I),document.addEventListener("pointermove",M),document.addEventListener("pointerup",D),()=>{document.removeEventListener("keydown",I),document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",D)}},[_,I,M,D]),{initiateResize:P,isResizing:!!_,updateDimensions:u,currentWidth:Math.max(c.width,s),currentHeight:Math.max(c.height,i)}}const G6=x.forwardRef(({className:e,isResizing:t=!1,...n},r)=>h.jsx("div",{className:Qe("absolute top-1/2 h-10 max-h-full w-1.5 -translate-y-1/2 transform cursor-col-resize rounded border border-solid border-[var(--mt-transparent-foreground)] bg-[var(--mt-bg-secondary)] p-px transition-all","opacity-0 [backdrop-filter:saturate(1.8)_blur(20px)]",{"opacity-80":t,"group-hover/node-image:opacity-80":!t},"before:absolute before:inset-y-0 before:-left-1 before:-right-1",e),ref:r,...n}));G6.displayName="ResizeHandle";function WFe(){return Me.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-unzoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Me.createElement("path",{d:"M 14.144531 1.148438 L 9 6.292969 L 9 3 L 8 3 L 8 8 L 13 8 L 13 7 L 9.707031 7 L 14.855469 1.851563 Z M 8 8 L 3 8 L 3 9 L 6.292969 9 L 1.148438 14.144531 L 1.851563 14.855469 L 7 9.707031 L 7 13 L 8 13 Z"}))}function YFe(){return Me.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-zoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Me.createElement("path",{d:"M 9 1 L 9 2 L 12.292969 2 L 2 12.292969 L 2 9 L 1 9 L 1 14 L 6 14 L 6 13 L 2.707031 13 L 13 2.707031 L 13 6 L 14 6 L 14 1 Z"}))}const AT=(e,t)=>{var n,r;return e===((r=(n=t==null?void 0:t.tagName)==null?void 0:n.toUpperCase)==null?void 0:r.call(n))},F7=e=>AT("DIV",e)||AT("SPAN",e),NT=e=>AT("IMG",e),Sz=e=>e.complete&&e.naturalHeight!==0,O_=e=>AT("SVG",e),gte=({height:e,offset:t,width:n})=>Math.min((window.innerWidth-t*2)/n,(window.innerHeight-t*2)/e),KFe=({containerHeight:e,containerWidth:t,offset:n,targetHeight:r,targetWidth:o})=>{const s=gte({height:r,offset:n,width:o}),i=o>r?o/t:r/e;return s>1?i:s*i},im=({containerHeight:e,containerWidth:t,hasScalableSrc:n,offset:r,targetHeight:o,targetWidth:s})=>!e||!t?1:!n&&o&&s?KFe({containerHeight:e,containerWidth:t,offset:r,targetHeight:o,targetWidth:s}):gte({height:e,offset:r,width:t}),ZFe=/url(?:\(['"]?)(.*?)(?:['"]?\))/,Tz=e=>{var t;if(e){if(NT(e))return e.currentSrc;if(F7(e)){const n=window.getComputedStyle(e).backgroundImage;if(n)return(t=ZFe.exec(n))==null?void 0:t[1]}}},JFe=e=>{if(e)return NT(e)?e.alt??void 0:e.getAttribute("aria-label")??void 0},XFe=({containerHeight:e,containerLeft:t,containerTop:n,containerWidth:r,hasScalableSrc:o,offset:s,targetHeight:i,targetWidth:a})=>{const l=im({containerHeight:e,containerWidth:r,hasScalableSrc:o,offset:s,targetHeight:i,targetWidth:a});return{top:n,left:t,width:r*l,height:e*l,transform:`translate(0,0) scale(${1/l})`}},xc=({position:e,relativeNum:t})=>{const n=parseFloat(e);return e.endsWith("%")?t*n/100:n},QFe=({containerHeight:e,containerLeft:t,containerTop:n,containerWidth:r,hasScalableSrc:o,objectFit:s,objectPosition:i,offset:a,targetHeight:l,targetWidth:c})=>{if(s==="scale-down"&&(c<=r&&l<=e?s="none":s="contain"),s==="cover"||s==="contain"){const u=r/c,f=e/l,m=s==="cover"?Math.max(u,f):Math.min(u,f),[g="50%",y="50%"]=i.split(" "),v=xc({position:g,relativeNum:r-c*m}),w=xc({position:y,relativeNum:e-l*m}),_=im({containerHeight:l*m,containerWidth:c*m,hasScalableSrc:o,offset:a,targetHeight:l,targetWidth:c});return{top:n+w,left:t+v,width:c*m*_,height:l*m*_,transform:`translate(0,0) scale(${1/_})`}}else if(s==="none"){const[u="50%",f="50%"]=i.split(" "),m=xc({position:u,relativeNum:r-c}),g=xc({position:f,relativeNum:e-l}),y=im({containerHeight:l,containerWidth:c,hasScalableSrc:o,offset:a,targetHeight:l,targetWidth:c});return{top:n+g,left:t+m,width:c*y,height:l*y,transform:`translate(0,0) scale(${1/y})`}}else if(s==="fill"){const u=r/c,f=e/l,m=Math.max(u,f),g=im({containerHeight:l*m,containerWidth:c*m,hasScalableSrc:o,offset:a,targetHeight:l,targetWidth:c});return{width:r*g,height:e*g,transform:`translate(0,0) scale(${1/g})`}}else return{}},eBe=({backgroundPosition:e,backgroundSize:t,containerHeight:n,containerLeft:r,containerTop:o,containerWidth:s,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c})=>{if(t==="cover"||t==="contain"){const u=s/c,f=n/l,m=t==="cover"?Math.max(u,f):Math.min(u,f),[g="50%",y="50%"]=e.split(" "),v=xc({position:g,relativeNum:s-c*m}),w=xc({position:y,relativeNum:n-l*m}),_=im({containerHeight:l*m,containerWidth:c*m,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c});return{top:o+w,left:r+v,width:c*m*_,height:l*m*_,transform:`translate(0,0) scale(${1/_})`}}else if(t==="auto"){const[u="50%",f="50%"]=e.split(" "),m=xc({position:u,relativeNum:s-c}),g=xc({position:f,relativeNum:n-l}),y=im({containerHeight:l,containerWidth:c,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c});return{top:o+g,left:r+m,width:c*y,height:l*y,transform:`translate(0,0) scale(${1/y})`}}else{const[u="50%",f="50%"]=t.split(" "),m=xc({position:u,relativeNum:s}),g=xc({position:f,relativeNum:n}),y=m/c,v=g/l,w=Math.min(y,v),[_="50%",T="50%"]=e.split(" "),k=xc({position:_,relativeNum:s-c*w}),M=xc({position:T,relativeNum:n-l*w}),D=im({containerHeight:l*w,containerWidth:c*w,hasScalableSrc:i,offset:a,targetHeight:l,targetWidth:c});return{top:o+M,left:r+k,width:c*w*D,height:l*w*D,transform:`translate(0,0) scale(${1/D})`}}},tBe=/\.svg$/i,nBe=({hasZoomImg:e,imgSrc:t,isSvg:n,isZoomed:r,loadedImgEl:o,offset:s,shouldRefresh:i,targetEl:a})=>{var _;const l=n||((_=t==null?void 0:t.slice)==null?void 0:_.call(t,0,18))==="data:image/svg+xml"||e||!!(t&&tBe.test(t)),c=a.getBoundingClientRect(),u=window.getComputedStyle(a),f=o!=null&&F7(a),m=o!=null&&!f,g=XFe({containerHeight:c.height,containerLeft:c.left,containerTop:c.top,containerWidth:c.width,hasScalableSrc:l,offset:s,targetHeight:(o==null?void 0:o.naturalHeight)||c.height,targetWidth:(o==null?void 0:o.naturalWidth)||c.width}),y=m?QFe({containerHeight:c.height,containerLeft:c.left,containerTop:c.top,containerWidth:c.width,hasScalableSrc:l,objectFit:u.objectFit,objectPosition:u.objectPosition,offset:s,targetHeight:(o==null?void 0:o.naturalHeight)||c.height,targetWidth:(o==null?void 0:o.naturalWidth)||c.width}):void 0,v=f?eBe({backgroundPosition:u.backgroundPosition,backgroundSize:u.backgroundSize,containerHeight:c.height,containerLeft:c.left,containerTop:c.top,containerWidth:c.width,hasScalableSrc:l,offset:s,targetHeight:(o==null?void 0:o.naturalHeight)||c.height,targetWidth:(o==null?void 0:o.naturalWidth)||c.width}):void 0,w=Object.assign({},g,y,v);if(r){const T=window.innerWidth/2,k=window.innerHeight/2,M=parseFloat(String(w.left||0))+parseFloat(String(w.width||0))/2,D=parseFloat(String(w.top||0))+parseFloat(String(w.height||0))/2,I=T-M,P=k-D;i&&(w.transitionDuration="0.01ms"),w.transform=`translate(${I}px,${P}px) scale(1)`}return w},Lk=e=>{if(!e)return{};if(O_(e)){const t=e.parentElement,n=e.getBoundingClientRect();if(t){const r=t.getBoundingClientRect();return{height:n.height,left:r.left-n.left,top:r.top-n.top,width:n.width}}else return{height:n.height,left:n.left,width:n.width,top:n.top}}else return{height:e.offsetHeight,left:e.offsetLeft,width:e.offsetWidth,top:e.offsetTop}},rBe=e=>{const t="-zoom",n=["clip-path","fill","mask","marker-start","marker-mid","marker-end"],r=new Map;if(e.hasAttribute("id")){const o=e.id,s=o+t;r.set(o,s),e.id=s}e.querySelectorAll("[id]").forEach(o=>{const s=o.id,i=s+t;r.set(s,i),o.id=i}),r.forEach((o,s)=>{const i=`url(#${s})`,a=`url(#${o})`,l=n.map(c=>`[${c}="${i}"]`).join(", ");e.querySelectorAll(l).forEach(c=>{n.forEach(u=>{c.getAttribute(u)===i&&c.setAttribute(u,a)})})}),e.querySelectorAll("style").forEach(o=>{r.forEach((s,i)=>{o.textContent&&(o.textContent=o.textContent.replaceAll(`#${i}`,`#${s}`))})})},oBe=["img","svg",'[role="img"]',"[data-zoom]"].map(e=>`${e}:not([aria-hidden="true"])`).join(","),Cz={overflow:"",width:""};function sBe(e){return Me.createElement(bte,{...e})}class bte extends Me.Component{constructor(){super(...arguments),this.state={id:"",isZoomImgLoaded:!1,loadedImgEl:void 0,modalState:"UNLOADED",shouldRefresh:!1,styleGhost:{}},this.refContent=Me.createRef(),this.refDialog=Me.createRef(),this.refModalContent=Me.createRef(),this.refModalImg=Me.createRef(),this.refWrap=Me.createRef(),this.imgEl=null,this.isScaling=!1,this.prevBodyAttrs=Cz,this.styleModalImg={},this.handleModalStateChange=t=>{var r,o,s,i;const{modalState:n}=this.state;t!=="LOADING"&&n==="LOADING"?(this.loadZoomImg(),window.addEventListener("resize",this.handleResize,{passive:!0}),window.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),window.addEventListener("touchmove",this.handleTouchMove,{passive:!0}),window.addEventListener("touchend",this.handleTouchEnd,{passive:!0}),window.addEventListener("touchcancel",this.handleTouchCancel,{passive:!0}),document.addEventListener("keydown",this.handleKeyDown,!0)):t!=="LOADED"&&n==="LOADED"?window.addEventListener("wheel",this.handleWheel,{passive:!0}):t!=="UNLOADING"&&n==="UNLOADING"?(this.ensureImgTransitionEnd(),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),document.removeEventListener("keydown",this.handleKeyDown,!0)):t!=="UNLOADED"&&n==="UNLOADED"&&(this.bodyScrollEnable(),window.removeEventListener("resize",this.handleResize),(o=(r=this.refModalImg.current)==null?void 0:r.removeEventListener)==null||o.call(r,"transitionend",this.handleImgTransitionEnd),(i=(s=this.refDialog.current)==null?void 0:s.close)==null||i.call(s))},this.getDialogContainer=()=>{let t=document.querySelector("[data-rmiz-portal]");return t==null&&(t=document.createElement("div"),t.setAttribute("data-rmiz-portal",""),document.body.appendChild(t)),t},this.setId=()=>{const t=()=>Math.random().toString(16).slice(-4);this.setState({id:t()+t()+t()})},this.setAndTrackImg=()=>{var n,r;const t=this.refContent.current;t&&(this.imgEl=t.querySelector(oBe),this.imgEl?((r=(n=this.contentNotFoundChangeObserver)==null?void 0:n.disconnect)==null||r.call(n),this.imgEl.addEventListener("load",this.handleImgLoad),this.imgEl.addEventListener("click",this.handleZoom),this.state.loadedImgEl||this.handleImgLoad(),this.imgElResizeObserver=new ResizeObserver(o=>{const s=o[0];s!=null&&s.target&&(this.imgEl=s.target,this.setState({styleGhost:Lk(this.imgEl)}))}),this.imgElResizeObserver.observe(this.imgEl),this.contentChangeObserver||(this.contentChangeObserver=new MutationObserver(()=>{this.setState({styleGhost:Lk(this.imgEl)})}),this.contentChangeObserver.observe(t,{attributes:!0,childList:!0,subtree:!0}))):this.contentNotFoundChangeObserver||(this.contentNotFoundChangeObserver=new MutationObserver(this.setAndTrackImg),this.contentNotFoundChangeObserver.observe(t,{childList:!0,subtree:!0})))},this.handleIfZoomChanged=t=>{const{isZoomed:n}=this.props;!t&&n?this.zoom():t&&!n&&this.unzoom()},this.handleImgLoad=()=>{const t=Tz(this.imgEl);if(!t)return;const n=new Image;NT(this.imgEl)&&(n.sizes=this.imgEl.sizes,n.srcset=this.imgEl.srcset,n.crossOrigin=this.imgEl.crossOrigin),n.src=t;const r=()=>{this.setState({loadedImgEl:n,styleGhost:Lk(this.imgEl)})};n.decode().then(r).catch(()=>{if(Sz(n)){r();return}n.onload=r})},this.handleZoom=t=>{var n,r;!this.props.isDisabled&&this.hasImage()&&((r=(n=this.props).onZoomChange)==null||r.call(n,!0,{event:t}))},this.handleUnzoom=t=>{var n,r;this.props.isDisabled||(r=(n=this.props).onZoomChange)==null||r.call(n,!1,{event:t})},this.handleBtnUnzoomClick=t=>{t.preventDefault(),t.stopPropagation(),this.handleUnzoom(t)},this.handleDialogCancel=t=>{t.preventDefault()},this.handleDialogClick=t=>{(t.target===this.refModalContent.current||t.target===this.refModalImg.current)&&(t.stopPropagation(),this.handleUnzoom(t))},this.handleDialogClose=t=>{t.stopPropagation(),this.handleUnzoom(t)},this.handleKeyDown=t=>{(t.key==="Escape"||t.keyCode===27)&&(t.preventDefault(),t.stopPropagation(),this.handleUnzoom(t))},this.handleWheel=t=>{t.ctrlKey||(t.stopPropagation(),queueMicrotask(()=>{this.handleUnzoom(t)}))},this.handleTouchStart=t=>{if(t.touches.length>1){this.isScaling=!0;return}t.changedTouches.length===1&&t.changedTouches[0]&&(this.touchYStart=t.changedTouches[0].screenY)},this.handleTouchMove=t=>{var r;const n=((r=window.visualViewport)==null?void 0:r.scale)??1;if(this.props.canSwipeToUnzoom&&!this.isScaling&&n<=1&&this.touchYStart!=null&&t.changedTouches[0]){this.touchYEnd=t.changedTouches[0].screenY;const o=Math.max(this.touchYStart,this.touchYEnd),s=Math.min(this.touchYStart,this.touchYEnd);Math.abs(o-s)>this.props.swipeToUnzoomThreshold&&(this.touchYStart=void 0,this.touchYEnd=void 0,this.handleUnzoom(t))}},this.handleTouchEnd=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleTouchCancel=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleResize=()=>{this.setState({shouldRefresh:!0})},this.hasImage=()=>this.imgEl&&(this.state.loadedImgEl||O_(this.imgEl))&&window.getComputedStyle(this.imgEl).display!=="none",this.zoom=()=>{var t,n,r,o;this.bodyScrollDisable(),(n=(t=this.refDialog.current)==null?void 0:t.showModal)==null||n.call(t),(o=(r=this.refModalImg.current)==null?void 0:r.addEventListener)==null||o.call(r,"transitionend",this.handleImgTransitionEnd),this.setState({modalState:"LOADING"})},this.unzoom=()=>{this.setState({modalState:"UNLOADING"})},this.handleImgTransitionEnd=()=>{clearTimeout(this.timeoutTransitionEnd),this.state.modalState==="LOADING"?this.setState({modalState:"LOADED"}):this.state.modalState==="UNLOADING"&&this.setState({shouldRefresh:!1,modalState:"UNLOADED"})},this.ensureImgTransitionEnd=()=>{if(this.refModalImg.current){const t=window.getComputedStyle(this.refModalImg.current).transitionDuration,n=parseFloat(t);if(n){const r=n*(t.endsWith("ms")?1:1e3)+50;this.timeoutTransitionEnd=setTimeout(this.handleImgTransitionEnd,r)}}},this.bodyScrollDisable=()=>{this.prevBodyAttrs={overflow:document.body.style.overflow,width:document.body.style.width};const t=document.body.clientWidth;document.body.style.overflow="hidden",document.body.style.width=`${t}px`},this.bodyScrollEnable=()=>{document.body.style.width=this.prevBodyAttrs.width,document.body.style.overflow=this.prevBodyAttrs.overflow,this.prevBodyAttrs=Cz},this.loadZoomImg=()=>{const{props:{zoomImg:t}}=this,n=t==null?void 0:t.src;if(n){const r=new Image;r.sizes=(t==null?void 0:t.sizes)??"",r.srcset=(t==null?void 0:t.srcSet)??"",r.crossOrigin=(t==null?void 0:t.crossOrigin)??void 0,r.src=n;const o=()=>{this.setState({isZoomImgLoaded:!0})};r.decode().then(o).catch(()=>{if(Sz(r)){o();return}r.onload=o})}},this.UNSAFE_handleSvg=()=>{var o,s,i,a,l;const{imgEl:t,refModalImg:n,styleModalImg:r}=this;if(O_(t)){const c=t.cloneNode(!0);rBe(c),c.style.width=`${r.width||0}px`,c.style.height=`${r.height||0}px`,c.addEventListener("click",this.handleUnzoom),(i=(s=(o=n.current)==null?void 0:o.firstChild)==null?void 0:s.remove)==null||i.call(s),(l=(a=n.current)==null?void 0:a.appendChild)==null||l.call(a,c)}}}render(){const{handleBtnUnzoomClick:t,handleDialogCancel:n,handleDialogClick:r,handleDialogClose:o,handleUnzoom:s,handleZoom:i,imgEl:a,props:{a11yNameButtonUnzoom:l,a11yNameButtonZoom:c,children:u,classDialog:f,IconUnzoom:m,IconZoom:g,isZoomed:y,wrapElement:v,ZoomContent:w,zoomImg:_,zoomMargin:T},refContent:k,refDialog:M,refModalContent:D,refModalImg:I,refWrap:P,state:{id:B,isZoomImgLoaded:U,loadedImgEl:j,modalState:H,shouldRefresh:q,styleGhost:z}}=this,Z=`rmiz-modal-${B}`,X=`rmiz-modal-img-${B}`,J=F7(a),ee=NT(a),re=O_(a),ie=JFe(a),K=Tz(a),te=ee?a.sizes:void 0,se=ee?a.srcset:void 0,Q=ee?a.crossOrigin:void 0,Te=!!(_!=null&&_.src),ge=this.hasImage(),Ce=ie?`${c}: ${ie}`:c,he=H==="LOADING"||H==="LOADED",Fe=ge?"found":"not-found",Oe=H==="UNLOADED"||H==="UNLOADING"?"hidden":"visible",Re={visibility:H==="UNLOADED"?"visible":"hidden"};this.styleModalImg=ge?nBe({hasZoomImg:Te,imgSrc:K,isSvg:re,isZoomed:y&&he,loadedImgEl:j,offset:T,shouldRefresh:q,targetEl:a}):{};let nt=null;if(ge){const ue=ee||J?Me.createElement("img",{alt:ie,crossOrigin:Q,sizes:te,src:K,srcSet:se,...U&&H==="LOADED"?_:{},"data-rmiz-modal-img":"",height:this.styleModalImg.height||void 0,id:X,ref:I,style:this.styleModalImg,width:this.styleModalImg.width||void 0}):re?Me.createElement("div",{"data-rmiz-modal-img":!0,ref:I,style:this.styleModalImg}):null,et=Me.createElement("button",{"aria-label":l,"data-rmiz-btn-unzoom":"",onClick:t,type:"button"},Me.createElement(m,null));nt=w?Me.createElement(w,{buttonUnzoom:et,modalState:H,img:ue,isZoomImgLoaded:U,onUnzoom:s}):Me.createElement(Me.Fragment,null,ue,et)}return Me.createElement(v,{"aria-owns":Z,"data-rmiz":"",ref:P},Me.createElement(v,{"data-rmiz-content":Fe,ref:k,style:Re},u),ge&&Me.createElement(v,{"data-rmiz-ghost":"",style:z},Me.createElement("button",{"aria-label":Ce,"data-rmiz-btn-zoom":"",onClick:i,type:"button"},Me.createElement(g,null))),ge&&bR.createPortal(Me.createElement("dialog",{"aria-labelledby":X,"aria-modal":"true",className:f,"data-rmiz-modal":"",id:Z,onClick:r,onClose:o,onCancel:n,ref:M,role:"dialog"},Me.createElement("div",{"data-rmiz-modal-overlay":Oe}),Me.createElement("div",{"data-rmiz-modal-content":"",ref:D},nt)),this.getDialogContainer()))}componentDidMount(){this.setId(),this.setAndTrackImg(),this.handleImgLoad(),this.UNSAFE_handleSvg()}componentWillUnmount(){var t,n,r,o,s,i,a,l,c,u,f,m;this.state.modalState!=="UNLOADED"&&this.bodyScrollEnable(),(n=(t=this.contentChangeObserver)==null?void 0:t.disconnect)==null||n.call(t),(o=(r=this.contentNotFoundChangeObserver)==null?void 0:r.disconnect)==null||o.call(r),(i=(s=this.imgElResizeObserver)==null?void 0:s.disconnect)==null||i.call(s),(l=(a=this.imgEl)==null?void 0:a.removeEventListener)==null||l.call(a,"load",this.handleImgLoad),(u=(c=this.imgEl)==null?void 0:c.removeEventListener)==null||u.call(c,"click",this.handleZoom),(m=(f=this.refModalImg.current)==null?void 0:f.removeEventListener)==null||m.call(f,"transitionend",this.handleImgTransitionEnd),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),window.removeEventListener("resize",this.handleResize),document.removeEventListener("keydown",this.handleKeyDown,!0)}componentDidUpdate(t,n){this.handleModalStateChange(n.modalState),this.UNSAFE_handleSvg(),this.handleIfZoomChanged(t.isZoomed)}}bte.defaultProps={a11yNameButtonUnzoom:"Minimize image",a11yNameButtonZoom:"Expand image",canSwipeToUnzoom:!0,IconUnzoom:WFe,IconZoom:YFe,isDisabled:!1,swipeToUnzoomThreshold:10,wrapElement:"div",zoomMargin:0};const B7=x.memo(x.forwardRef(({children:e,className:t,...n},r)=>h.jsx("div",{ref:r,className:Qe("absolute right-3 top-3 flex flex-row rounded px-0.5 opacity-0 group-hover/node-image:opacity-100","border-[0.5px] bg-[var(--mt-bg-secondary)] [backdrop-filter:saturate(1.8)_blur(20px)]",t),...n,children:e})));B7.displayName="ActionWrapper";const IT=x.memo(x.forwardRef(({icon:e,tooltip:t,className:n,...r},o)=>h.jsx(V1,{children:h.jsxs(q1,{children:[h.jsx(G1,{asChild:!0,children:h.jsx(_r,{ref:o,variant:"ghost",className:Qe("relative flex h-7 w-7 flex-row rounded-none p-0 text-muted-foreground hover:text-foreground","bg-transparent hover:bg-transparent",n),...r,children:e})}),h.jsx(um,{side:"bottom",children:t})]})})));IT.displayName="ActionButton";const iBe=[{key:"onView",icon:h.jsx(vOe,{className:"size-4"}),tooltip:"View image"},{key:"onDownload",icon:h.jsx(oOe,{className:"size-4"}),tooltip:"Download image"},{key:"onCopy",icon:h.jsx(JDe,{className:"size-4"}),tooltip:"Copy image to clipboard"},{key:"onCopyLink",icon:h.jsx(pOe,{className:"size-4"}),tooltip:"Copy image link",isLink:!0}],yte=x.memo(({shouldMerge:e=!1,isLink:t=!1,...n})=>{const[r,o]=x.useState(!1),s=x.useCallback((a,l)=>{a.preventDefault(),a.stopPropagation(),l==null||l()},[]),i=x.useMemo(()=>iBe.filter(a=>t||!a.isLink),[t]);return h.jsx(B7,{className:Qe({"opacity-100":r}),children:e?h.jsxs(mw,{open:r,onOpenChange:o,children:[h.jsx(gw,{asChild:!0,children:h.jsx(IT,{icon:h.jsx(QQ,{className:"size-4"}),tooltip:"Open menu",onClick:a=>a.preventDefault()})}),h.jsx(bw,{className:"w-56",align:"end",children:i.map(({key:a,icon:l,tooltip:c})=>h.jsx(cu,{onClick:u=>s(u,n[a]),children:h.jsxs("div",{className:"flex flex-row items-center gap-2",children:[l,h.jsx("span",{children:c})]})},a))})]}):i.map(({key:a,icon:l,tooltip:c})=>h.jsx(IT,{icon:l,tooltip:c,onClick:u=>s(u,n[a])},a))})});yte.displayName="ImageActions";const aBe=({editor:e,node:t,src:n,onViewClick:r})=>{const o=x.useMemo(()=>D6(n),[n]),s=x.useCallback(()=>{r(!0)},[r]),i=x.useCallback(()=>{e.commands.downloadImage({src:t.attrs.src,alt:t.attrs.alt})},[e.commands,t.attrs.alt,t.attrs.src]),a=x.useCallback(()=>{e.commands.copyImage({src:t.attrs.src})},[e.commands,t.attrs.src]),l=x.useCallback(()=>{e.commands.copyLink({src:t.attrs.src})},[e.commands,t.attrs.src]),c=x.useCallback(()=>{e.commands.command(({tr:u,dispatch:f})=>{const{selection:m}=u,g=u.doc.nodeAt(m.from);return g&&g.type.name==="image"&&f?(u.deleteSelection(),!0):!1})},[e.commands]);return{isLink:o,onView:s,onDownload:i,onCopy:a,onCopyLink:l,onRemoveImg:c}},vte=x.forwardRef(function({className:t,...n},r){return h.jsxs("svg",{ref:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:Qe("animate-spin",t),...n,children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})});vte.displayName="Spinner";const xte=x.memo(vte),wte=x.memo(()=>h.jsx("div",{className:Qe("flex flex-row items-center justify-center","absolute inset-0 rounded bg-[var(--mt-overlay)] opacity-100 transition-opacity"),children:h.jsx(xte,{className:"size-7"})}));wte.displayName="ImageOverlay";const $k=600,lBe=120,kz=120,cBe=e=>({src:typeof e=="string"?e:e.src,id:typeof e=="string"?Fx():e.id}),uBe=({editor:e,node:t,selected:n,updateAttributes:r})=>{const{src:o,width:s,height:i,fileName:a}=t.attrs,l=x.useRef(!1),c=x.useMemo(()=>typeof o=="string"?o:o.src,[o]),[u,f]=x.useState({src:c,isServerUploading:!1,imageLoaded:!1,isZoomed:!1,error:!1,naturalSize:{width:s,height:i}}),m=x.useRef(null),[g,y]=x.useState(null),v=x.useCallback(({width:ie,height:K})=>{r({width:ie,height:K})},[r]),w=u.naturalSize.width/u.naturalSize.height,_=$k*w,T=m.current?parseFloat(getComputedStyle(m.current).getPropertyValue("--editor-width")):1/0,{isLink:k,onView:M,onDownload:D,onCopy:I,onCopyLink:P,onRemoveImg:B}=aBe({editor:e,node:t,src:u.src,onViewClick:ie=>f(K=>({...K,isZoomed:ie}))}),{currentWidth:U,currentHeight:j,updateDimensions:H,initiateResize:q,isResizing:z}=GFe({initialWidth:s??u.naturalSize.width,initialHeight:i??u.naturalSize.height,contentWidth:u.naturalSize.width,contentHeight:u.naturalSize.height,gridInterval:.1,onDimensionsChange:v,minWidth:kz,minHeight:lBe,maxWidth:T>0?T:_}),Z=x.useMemo(()=>U<=180,[U]),X=x.useCallback(ie=>{const K=ie.target,te={width:K.naturalWidth,height:K.naturalHeight};f(se=>({...se,naturalSize:te,imageLoaded:!0})),r({width:K.width||te.width,height:K.height||te.height,alt:K.alt,title:K.title}),s||H(se=>({...se,width:te.width}))},[s,r,H]),J=x.useCallback(()=>{f(ie=>({...ie,error:!0,imageLoaded:!0}))},[]),ee=x.useCallback(ie=>K=>{y(ie),q(ie)(K)},[q]),re=x.useCallback(()=>{y(null)},[]);return x.useEffect(()=>{z||re()},[z,re]),x.useEffect(()=>{(async()=>{if(!c.startsWith("blob:")||l.current)return;l.current=!0;const K=e.options.extensions.find(se=>se.name==="image"),{uploadFn:te}=(K==null?void 0:K.options)??{};if(!te){try{const se=await ROe(c);f(Q=>({...Q,src:se})),r({src:se})}catch{f(se=>({...se,error:!0}))}return}try{f(he=>({...he,isServerUploading:!0}));const Q=await(await fetch(c)).blob(),Te=new File([Q],a,{type:Q.type}),ge=await te(Te,e),Ce=cBe(ge);f(he=>({...he,...Ce,isServerUploading:!1})),r(Ce)}catch{f(Q=>({...Q,error:!0,isServerUploading:!1}))}})()},[e,a,c,r]),h.jsx(UDe,{ref:m,"data-drag-handle":!0,className:"relative text-center leading-none",children:h.jsx("div",{className:"group/node-image relative mx-auto rounded-md object-contain",style:{maxWidth:`min(${_}px, 100%)`,width:U,maxHeight:$k,aspectRatio:`${u.naturalSize.width} / ${u.naturalSize.height}`},children:h.jsxs("div",{className:Qe("relative flex h-full cursor-default flex-col items-center gap-2 rounded",{"outline-primary outline outline-offset-1":n||z}),children:[h.jsxs("div",{className:"h-full contain-paint",children:[h.jsxs("div",{className:"relative h-full",children:[u.isServerUploading&&!u.error&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx(xte,{className:"size-7"})}),u.error&&h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[h.jsx(fOe,{className:"text-destructive size-8"}),h.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"Failed to load image"})]}),h.jsx(sBe,{isZoomed:u.isZoomed,onZoomChange:()=>f(ie=>({...ie,isZoomed:!1})),children:h.jsx("img",{className:Qe("h-auto rounded object-contain transition-shadow",{"opacity-0":!u.imageLoaded||u.error}),style:{maxWidth:`min(100%, ${_}px)`,minWidth:`${kz}px`,maxHeight:$k},width:U,height:j,src:u.src,onError:J,onLoad:X,alt:t.attrs.alt||"",title:t.attrs.title||"",id:t.attrs.id})})]}),u.isServerUploading&&h.jsx(wte,{}),e.isEditable&&u.imageLoaded&&!u.error&&!u.isServerUploading&&h.jsxs(h.Fragment,{children:[h.jsx(G6,{onPointerDown:ee("left"),className:Qe("left-1",{hidden:z&&g==="right"}),isResizing:z&&g==="left"}),h.jsx(G6,{onPointerDown:ee("right"),className:Qe("right-1",{hidden:z&&g==="left"}),isResizing:z&&g==="right"})]})]}),u.error&&h.jsx(B7,{children:h.jsx(IT,{icon:h.jsx(TOe,{className:"size-4"}),tooltip:"Remove image",onClick:B})}),!z&&!u.error&&!u.isServerUploading&&h.jsx(yte,{shouldMerge:Z,isLink:k,onView:M,onDownload:D,onCopy:I,onCopyLink:P})]})})})},z7=(e,t,n)=>{const r=e instanceof Error?e:new Error("Unknown error");n==null||n(r,t)},dBe=e=>{const[t,n]=e.split(","),r=t.split(":")[1].split(";")[0],o=r.split("/")[1],s=atob(n),i=new Uint8Array(s.length);for(let l=0;l<s.length;l++)i[l]=s.charCodeAt(l);return{blob:new Blob([i],{type:r}),extension:o}},fBe=async e=>{const t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch image");const n=await t.blob(),r=n.type.split(/\/|\+/)[1];return{blob:n,extension:r}},hBe=async e=>e.startsWith("data:")?dBe(e):fBe(e),pBe=async(e,t,n)=>{const r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download=`${t}.${n}`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)},mBe=async(e,t)=>{var s;const{src:n,alt:r}=e,o=r||"image";try{const{blob:i,extension:a}=await hBe(n);await pBe(i,o,a),(s=t.onActionSuccess)==null||s.call(t,{...e,action:"download"})}catch(i){z7(i,{...e,action:"download"},t.onActionError)}},gBe=async(e,t)=>{var r;const{src:n}=e;try{const s=await(await fetch(n)).blob();await navigator.clipboard.write([new ClipboardItem({[s.type]:s})]),(r=t.onActionSuccess)==null||r.call(t,{...e,action:"copyImage"})}catch(o){z7(o,{...e,action:"copyImage"},t.onActionError)}},bBe=async(e,t)=>{var r;const{src:n}=e;try{await navigator.clipboard.writeText(n),(r=t.onActionSuccess)==null||r.call(t,{...e,action:"copyLink"})}catch(o){z7(o,{...e,action:"copyLink"},t.onActionError)}},yBe=qFe.extend({atom:!0,addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),allowedMimeTypes:[],maxFileSize:0,uploadFn:void 0,onToggle:void 0,downloadImage:void 0,copyImage:void 0,copyLink:void 0}},addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},id:{default:null},width:{default:null},height:{default:null},fileName:{default:null}}},addCommands(){return{setImages:e=>({commands:t})=>{const[n,r]=ZS(e,{allowedMimeTypes:this.options.allowedMimeTypes,maxFileSize:this.options.maxFileSize,allowBase64:this.options.allowBase64});return r.length>0&&this.options.onValidationError&&this.options.onValidationError(r),n.length>0?t.insertContent(n.map(o=>{if(o.src instanceof File){const s=URL.createObjectURL(o.src),i=Fx();return{type:this.type.name,attrs:{id:i,src:s,alt:o.alt,title:o.title,fileName:o.src.name}}}else return{type:this.type.name,attrs:{id:Fx(),src:o.src,alt:o.alt,title:o.title,fileName:null}}})):!1},downloadImage:e=>()=>((this.options.downloadImage||mBe)({...e,action:"download"},this.options),!0),copyImage:e=>()=>((this.options.copyImage||gBe)({...e,action:"copyImage"},this.options),!0),copyLink:e=>()=>((this.options.copyLink||bBe)({...e,action:"copyLink"},this.options),!0),toggleImage:()=>({editor:e})=>{const t=document.createElement("input");return t.type="file",t.accept=this.options.allowedMimeTypes.join(","),t.onchange=()=>{const n=t.files;if(!n)return;const[r,o]=ZS(Array.from(n),{allowedMimeTypes:this.options.allowedMimeTypes,maxFileSize:this.options.maxFileSize,allowBase64:this.options.allowBase64});return o.length>0&&this.options.onValidationError?(this.options.onValidationError(o),!1):(r.length===0||this.options.onToggle&&this.options.onToggle(e,r,e.state.selection.from),!1)},t.click(),!0}}},onTransaction({transaction:e}){e.steps.forEach(t=>{t instanceof Ri&&t.slice.size===0&&e.before.content.cut(t.from,t.to).forEach(r=>{var o,s;if(r.type.name==="image"){const i=r.attrs;i.src.startsWith("blob:")&&URL.revokeObjectURL(i.src),(s=(o=this.options).onImageRemoved)==null||s.call(o,i)}})})},addNodeView(){return YDe(uBe,{className:"block-node"})}}),vBe=YPe.extend({inclusive:!1,parseHTML(){return[{tag:'a[href]:not([data-type="button"]):not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:e}){return["a",Ms(this.options.HTMLAttributes,e),0]},addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),openOnClick:!1,HTMLAttributes:{class:"link"}}},addProseMirrorPlugins(){var t;const{editor:e}=this;return[...((t=this.parent)==null?void 0:t.call(this))||[],new vo({props:{handleKeyDown:(n,r)=>{const{selection:o}=e.state;return r.key==="Escape"&&o.empty!==!0&&e.commands.focus(o.to,{scrollIntoView:!1}),!1},handleClick(n,r){const{schema:o,doc:s,tr:i}=n.state,a=EC(s.resolve(r),o.marks.link);if(!a)return;const{from:l,to:c}=a,u=Math.min(l,c),f=Math.max(l,c);if(r<u||r>f)return;const m=s.resolve(u),g=s.resolve(f),y=i.setSelection(new qn(m,g));n.dispatch(y)}}})]}}),xBe=Gr.create({name:"selection",addProseMirrorPlugins(){const{editor:e}=this;return[new vo({key:new Bo("selection"),props:{decorations(t){return t.selection.empty||e.isFocused===!0||!e.isEditable?null:us.create(t.doc,[la.inline(t.selection.from,t.selection.to,{class:"selection"})])}}})]}}),wBe=Gr.create({addKeyboardShortcuts(){return{"Mod-\\":()=>this.editor.commands.unsetAllMarks()}}}),EBe=Gr.create({name:"resetMarksOnEnter",addKeyboardShortcuts(){return{Enter:({editor:e})=>e.isActive("bold")||e.isActive("italic")||e.isActive("strike")||e.isActive("underline")||e.isActive("code")?(e.commands.splitBlock({keepMarks:!1}),!0):!1}}}),_Be=e=>{const{key:t,editor:n,onPaste:r,onDrop:o,onValidationError:s,allowedMimeTypes:i,maxFileSize:a}=e;return new vo({key:t||new Bo("fileHandler"),props:{handleDrop(l,c){c.preventDefault(),c.stopPropagation();const{dataTransfer:u}=c;if(!(u!=null&&u.files.length))return;const f=l.posAtCoords({left:c.clientX,top:c.clientY}),[m,g]=ZS(Array.from(u.files),{allowedMimeTypes:i,maxFileSize:a,allowBase64:e.allowBase64});g.length>0&&s&&s(g),m.length>0&&o&&o(n,m,(f==null?void 0:f.pos)??0)},handlePaste(l,c){c.preventDefault(),c.stopPropagation();const{clipboardData:u}=c;if(!(u!=null&&u.files.length))return;const[f,m]=ZS(Array.from(u.files),{allowedMimeTypes:i,maxFileSize:a,allowBase64:e.allowBase64}),g=u.getData("text/html");m.length>0&&s&&s(m),f.length>0&&r&&r(n,f,g)}}})},SBe=Gr.create({name:"fileHandler",addOptions(){return{allowBase64:!1,allowedMimeTypes:[],maxFileSize:0}},addProseMirrorPlugins(){return[_Be({key:new Bo(this.name),editor:this.editor,...this.options})]}});function TBe(e,t){const n=x.useRef(Date.now()),r=x.useRef(null);return x.useCallback((...o)=>{(()=>{Date.now()-n.current>=t?(e(...o),n.current=Date.now()):(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{e(...o),n.current=Date.now()},t-(Date.now()-n.current)))})()},[e,t])}const CBe=e=>[PLe.configure({horizontalRule:!1,codeBlock:!1,paragraph:{HTMLAttributes:{class:"text-node"}},heading:{HTMLAttributes:{class:"heading-node"}},blockquote:{HTMLAttributes:{class:"block-node"}},bulletList:{HTMLAttributes:{class:"list-node"}},orderedList:{HTMLAttributes:{class:"list-node"}},code:{HTMLAttributes:{class:"inline",spellcheck:"false"}},dropcursor:{width:2,class:"ProseMirror-dropcursor border"}}),vBe,Uee,yBe.configure({allowedMimeTypes:["image/*"],maxFileSize:5*1024*1024,allowBase64:!0,uploadFn:async t=>{await new Promise(r=>setTimeout(r,3e3));const n=await _k(t);return{id:Fx(),src:n}},onToggle(t,n,r){t.commands.insertContentAt(r,n.map(o=>{const s=URL.createObjectURL(o);return{type:"image",attrs:{id:Fx(),src:s,alt:o.name,title:o.name,fileName:o.name}}}))},onImageRemoved({id:t,src:n}){},onValidationError(t){t.forEach(n=>{Ui.error("Image validation error",{position:"bottom-right",description:n.reason})})},onActionSuccess({action:t}){const n={copyImage:"Copy Image",copyLink:"Copy Link",download:"Download"};Ui.success(n[t],{position:"bottom-right",description:"Image action success"})},onActionError(t,{action:n}){const r={copyImage:"Copy Image",copyLink:"Copy Link",download:"Download"};Ui.error(`Failed to ${r[n]}`,{position:"bottom-right",description:t.message})}}),SBe.configure({allowBase64:!0,allowedMimeTypes:["image/*"],maxFileSize:5*1024*1024,onDrop:(t,n,r)=>{n.forEach(async o=>{const s=await _k(o);t.commands.insertContentAt(r,{type:"image",attrs:{src:s}})})},onPaste:(t,n)=>{n.forEach(async r=>{const o=await _k(r);t.commands.insertContent({type:"image",attrs:{src:o}})})},onValidationError:t=>{t.forEach(n=>{Ui.error("Image validation error",{position:"bottom-right",description:n.reason})})}}),UFe,Kee,xBe,o$e,wBe,HFe,EBe,jFe,MLe.configure({placeholder:()=>e})],kBe=({value:e,output:t="html",placeholder:n="",editorClassName:r,throttleDelay:o=0,onUpdate:s,onBlur:i,...a})=>{const l=TBe(g=>s==null?void 0:s(g),o),c=x.useCallback(g=>l(WB(g,t)),[t,l]),u=x.useCallback(g=>{e&&g.isEmpty&&g.commands.setContent(e)},[e]),f=x.useCallback(g=>i==null?void 0:i(WB(g,t)),[t,i]);return zDe({extensions:CBe(n),editorProps:{attributes:{autocomplete:"off",autocorrect:"off",autocapitalize:"off",class:Qe("focus:outline-hidden",r)}},onUpdate:({editor:g})=>c(g),onCreate:({editor:g})=>u(g),onBlur:({editor:g})=>f(g),...a})},ABe={top:0,left:0,bottom:0,right:0,x:0,y:0,width:0,height:0,toJSON:()=>"{}"};function NBe(e){const[t,n]=x.useState(()=>(e==null?void 0:e.getBoundingClientRect())??ABe),r=x.useCallback(()=>{if(!e)return;const o=e.getBoundingClientRect();n(s=>Math.round(s.width)===Math.round(o.width)&&Math.round(s.height)===Math.round(o.height)&&Math.round(s.x)===Math.round(o.x)&&Math.round(s.y)===Math.round(o.y)?s:o)},[e]);return x.useEffect(()=>{if(!e)return;const o=new ResizeObserver(r);return o.observe(e),window.addEventListener("click",r),window.addEventListener("resize",r),()=>{o.disconnect(),window.removeEventListener("click",r),window.removeEventListener("resize",r)}},[e,r]),t}const Ete=x.forwardRef(({as:e,name:t,children:n,style:r={},...o},s)=>{const i=x.useRef(null),a=NBe(i.current);x.useImperativeHandle(s,()=>i.current);const l={[`--${t}-width`]:`${a.width}px`,[`--${t}-height`]:`${a.height}px`};return h.jsx(e,{...o,ref:i,style:{...l,...r},children:n})});Ete.displayName="MeasuredContainer";const IBe=({editor:e})=>h.jsx("div",{className:"shrink-0 overflow-x-auto border-b border-border p-2",children:h.jsxs("div",{className:"flex w-max items-center gap-px",children:[h.jsx(oee,{editor:e,activeActions:["bold","italic","underline","strikethrough","code","clearFormatting"],mainActionCount:3}),h.jsx(Bf,{orientation:"vertical",className:"mx-2 h-7"}),h.jsx(see,{editor:e,activeActions:["orderedList","bulletList"],mainActionCount:0})]})}),_te=x.forwardRef(({value:e,onChange:t,className:n,editorContentClassName:r,...o},s)=>{const i=kBe({value:e,onUpdate:t,...o});return i?h.jsxs(Ete,{as:"div",name:"editor",ref:s,className:Qe("flex h-auto min-h-72 w-full flex-col rounded-md border border-input shadow-xs focus-within:border-primary",n),children:[h.jsx(IBe,{editor:i}),h.jsx(DDe,{editor:i,className:Qe("minimal-tiptap-editor",r)}),h.jsx(nPe,{editor:i})]}):null});_te.displayName="MinimalTiptapEditor";function RBe({content:e,isDarkMode:t,onUpdateContent:n,className:r,placeholder:o="Start writing your notes..."}){const s=x.useCallback(i=>{typeof i=="string"&&n(i)},[n]);return h.jsx("div",{className:Qe("flex h-full flex-col overflow-hidden",t?"bg-neutral-900":"bg-stone-50",r),children:h.jsx(_te,{value:e,onChange:s,output:"html",placeholder:o,throttleDelay:500,className:Qe("flex-1 border-0 shadow-none rounded-none",t&&"dark"),editorContentClassName:Qe("flex-1 overflow-y-auto p-6",t?"prose-invert":""),editable:!0,autofocus:"end"})})}var Az={};function MBe({className:e}){return h.jsxs("svg",{viewBox:"0 0 100 100",className:e,fill:"currentColor",children:[h.jsx("circle",{cx:"42",cy:"42",r:"30",fill:"none",stroke:"currentColor",strokeWidth:"8"}),h.jsx("line",{x1:"64",y1:"64",x2:"90",y2:"90",stroke:"currentColor",strokeWidth:"10",strokeLinecap:"round"}),h.jsx("circle",{cx:"42",cy:"42",r:"12",fill:"currentColor"}),h.jsx("circle",{cx:"47",cy:"38",r:"4",fill:"white"})]})}const Ste="cluso-recent-projects",DBe=10;function Tf(){try{const e=localStorage.getItem(Ste);if(e)return JSON.parse(e)}catch(e){fo.general.error("Failed to load recent projects:",e)}return[]}function j7(e){try{localStorage.setItem(Ste,JSON.stringify(e))}catch(t){fo.general.error("Failed to save recent projects:",t)}}function W6(e,t,n){const r=Tf(),o=r.find(a=>a.path===t),s=r.filter(a=>a.path!==t),i=[{name:e,path:t,port:n??(o==null?void 0:o.port),lastOpened:Date.now()},...s].slice(0,DBe);j7(i)}function OBe(e){return Tf().find(t=>t.path===e)}function PBe(e){const n=Tf().filter(r=>r.path!==e);j7(n)}function LBe(e,t){const r=Tf().map(o=>o.path===e?{...o,...t,lastOpened:Date.now()}:o);j7(r)}function $Be({onOpenProject:e,onOpenUrl:t,isDarkMode:n,lockedProjectPath:r}){const[o,s]=x.useState(""),[i,a]=x.useState([]),[l,c]=x.useState(null),[u,f]=x.useState({name:"",path:"",port:""}),m=async(I,P)=>{var B,U;if(r){if(r===I){e(I,P);return}if((B=window.electronAPI)!=null&&B.window){await window.electronAPI.window.openProject(I,P);return}}if((U=window.electronAPI)!=null&&U.window){const{isOpen:j,windowId:H}=await window.electronAPI.window.isProjectOpen(I);if(j&&H!==null){await window.electronAPI.window.focus(H);return}}e(I,P)};x.useEffect(()=>{a(Tf())},[]);const g=async()=>{var I;if((I=window.electronAPI)!=null&&I.dialog){const P=await window.electronAPI.dialog.openFolder();if(P.success&&P.data){const{path:B,name:U}=P.data;W6(U,B),a(Tf()),await m(B,U)}}},y=async I=>{W6(I.name,I.path),a(Tf()),await m(I.path,I.name)},v=(I,P)=>{I.stopPropagation(),PBe(P),a(Tf())},w=(I,P)=>{var B;I.stopPropagation(),c(P.path),f({name:P.name,path:P.path,port:((B=P.port)==null?void 0:B.toString())||""})},_=(I,P)=>{I.stopPropagation();const B=u.port?parseInt(u.port):void 0;LBe(P,{name:u.name,path:u.path,port:B}),a(Tf()),c(null)},T=I=>{I.stopPropagation(),c(null)},k=I=>{if(I.preventDefault(),o.trim()){let P=o.trim();!P.startsWith("http://")&&!P.startsWith("https://")&&(P="http://"+P),t(P)}},M=I=>{const P=Az.HOME||Az.USERPROFILE||"";return I.startsWith(P)?"~"+I.slice(P.length):I},D=I=>{const B=Date.now()-I,U=Math.floor(B/6e4),j=Math.floor(B/36e5),H=Math.floor(B/864e5);return U<1?"Just now":U<60?`${U}m ago`:j<24?`${j}h ago`:H<7?`${H}d ago`:new Date(I).toLocaleDateString()};return h.jsxs("div",{className:`flex-1 flex flex-col items-center pt-16 px-8 min-h-full ${n?"bg-neutral-900 text-white":"bg-white text-stone-900"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(MBe,{className:"w-12 h-12"}),h.jsx("h1",{className:"text-4xl font-semibold tracking-tight",children:"Cluso"})]}),h.jsx("p",{className:`text-sm mb-4 ${n?"text-neutral-500":"text-stone-400"}`,children:"AI-Powered Browser Dev Tools"}),r&&h.jsxs("div",{className:`
          flex items-center gap-2 px-3 py-1.5 rounded-full mb-6 text-xs
          ${n?"bg-blue-500/10 text-blue-400":"bg-blue-50 text-blue-600"}
        `,children:[h.jsx(E1,{size:12}),h.jsxs("span",{children:["Window locked to: ",M(r)]})]}),h.jsx("button",{onClick:g,className:`
          w-72 p-6 rounded-xl border-2 border-dashed mb-10 text-left
          transition-all duration-200 group
          ${n?"border-neutral-700 hover:border-blue-500/50 hover:bg-blue-500/5":"border-stone-200 hover:border-blue-500/50 hover:bg-blue-50/50"}
        `,children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`
            w-10 h-10 rounded-lg flex items-center justify-center
            transition-colors
            ${n?"bg-neutral-800 group-hover:bg-blue-500/20":"bg-stone-100 group-hover:bg-blue-100"}
          `,children:h.jsx(qf,{size:20,className:`${n?"text-neutral-400 group-hover:text-blue-400":"text-stone-500 group-hover:text-blue-600"}`})}),h.jsxs("div",{children:[h.jsx("span",{className:`block text-sm font-medium ${n?"text-neutral-200":"text-stone-700"}`,children:r?"Open Project in New Window":"Open Project"}),h.jsx("span",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:r?"Opens in separate window":"Select a local folder"})]})]})}),i.length>0&&h.jsxs("div",{className:"w-full max-w-xl",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(cR,{size:14,className:n?"text-neutral-500":"text-stone-400"}),h.jsx("h2",{className:`text-xs font-medium uppercase tracking-wider ${n?"text-neutral-500":"text-stone-400"}`,children:"Recent Projects"})]}),h.jsx("div",{className:`rounded-xl overflow-hidden border ${n?"border-neutral-800":"border-stone-200"}`,children:i.map((I,P)=>h.jsx("div",{className:`
                  w-full px-4 py-3
                  transition-colors text-left
                  ${P!==i.length-1?n?"border-b border-neutral-800":"border-b border-stone-100":""}
                  ${l===I.path?"":"cursor-pointer group"}
                  ${n?"hover:bg-neutral-800/50":"hover:bg-stone-50"}
                `,onClick:l===I.path?void 0:()=>y(I),children:l===I.path?h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:u.name,onChange:B=>f(U=>({...U,name:B.target.value})),onClick:B=>B.stopPropagation(),placeholder:"Project name",className:`flex-1 px-2 py-1 text-sm rounded border ${n?"bg-neutral-800 border-neutral-700 text-neutral-200":"bg-white border-stone-200 text-stone-800"}`}),h.jsx("input",{type:"number",value:u.port,onChange:B=>f(U=>({...U,port:B.target.value})),onClick:B=>B.stopPropagation(),placeholder:"Port",className:`w-20 px-2 py-1 text-sm rounded border ${n?"bg-neutral-800 border-neutral-700 text-neutral-200":"bg-white border-stone-200 text-stone-800"}`})]}),h.jsx("input",{type:"text",value:u.path,onChange:B=>f(U=>({...U,path:B.target.value})),onClick:B=>B.stopPropagation(),placeholder:"Path",className:`w-full px-2 py-1 text-sm rounded border ${n?"bg-neutral-800 border-neutral-700 text-neutral-200":"bg-white border-stone-200 text-stone-800"}`}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx("button",{onClick:T,className:`px-2 py-1 text-xs rounded ${n?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,children:"Cancel"}),h.jsxs("button",{onClick:B=>_(B,I.path),className:"px-2 py-1 text-xs rounded flex items-center gap-1 bg-blue-600 text-white hover:bg-blue-500",children:[h.jsx(Co,{size:12})," Save"]})]})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[h.jsx(E1,{size:18,className:n?"text-neutral-500":"text-stone-400"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("span",{className:`block text-sm font-medium truncate ${n?"text-neutral-200":"text-stone-800"}`,children:I.name}),h.jsxs("span",{className:`block text-xs truncate ${n?"text-neutral-600":"text-stone-400"}`,children:[M(I.path),I.port&&h.jsxs("span",{className:"ml-2 text-blue-500",children:[":",I.port]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[h.jsx("span",{className:`text-xs whitespace-nowrap ${n?"text-neutral-600":"text-stone-400"}`,children:D(I.lastOpened)}),h.jsx("button",{onClick:B=>w(B,I),className:`
                          opacity-0 group-hover:opacity-100 p-1 rounded
                          transition-opacity
                          ${n?"hover:bg-neutral-700":"hover:bg-stone-200"}
                        `,children:h.jsx(Z_,{size:14,className:n?"text-neutral-500":"text-stone-400"})}),h.jsx("button",{onClick:B=>v(B,I.path),className:`
                          opacity-0 group-hover:opacity-100 p-1 rounded
                          transition-opacity
                          ${n?"hover:bg-neutral-700":"hover:bg-stone-200"}
                        `,children:h.jsx(qr,{size:14,className:n?"text-neutral-500":"text-stone-400"})})]})]})},I.path))})]}),i.length===0&&h.jsxs("div",{className:`text-center py-8 ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(E1,{size:32,className:"mx-auto mb-3 opacity-50"}),h.jsx("p",{className:"text-sm",children:"No recent projects"}),h.jsx("p",{className:"text-xs mt-1",children:"Open a folder to get started"})]}),h.jsxs("form",{onSubmit:k,className:"mt-auto mb-8 w-full max-w-md pt-8",children:[h.jsx("div",{className:`text-xs text-center mb-2 ${n?"text-neutral-600":"text-stone-400"}`,children:"Or enter a URL to inspect"}),h.jsx("input",{type:"text",value:o,onChange:I=>s(I.target.value),placeholder:"https://example.com",className:`
            w-full px-4 py-2.5 text-sm rounded-lg border
            focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/50
            ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"}
          `})]})]})}const Fk={react:{name:"React",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},next:{name:"Next.js",color:"bg-white/10 text-white border-white/20"},vue:{name:"Vue",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},svelte:{name:"Svelte",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},vite:{name:"Vite",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},typescript:{name:"TypeScript",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},tailwindcss:{name:"Tailwind",color:"bg-sky-500/20 text-sky-400 border-sky-500/30"},"@remix-run/react":{name:"Remix",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},astro:{name:"Astro",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},express:{name:"Express",color:"bg-gray-500/20 text-gray-400 border-gray-500/30"},prisma:{name:"Prisma",color:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30"},"drizzle-orm":{name:"Drizzle",color:"bg-lime-500/20 text-lime-400 border-lime-500/30"},zod:{name:"Zod",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"@tanstack/react-query":{name:"React Query",color:"bg-red-500/20 text-red-400 border-red-500/30"},zustand:{name:"Zustand",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"framer-motion":{name:"Framer",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},three:{name:"Three.js",color:"bg-white/10 text-white border-white/20"},"@react-three/fiber":{name:"R3F",color:"bg-white/10 text-white border-white/20"},electron:{name:"Electron",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},"@google/generative-ai":{name:"Gemini",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"@anthropic-ai/sdk":{name:"Claude SDK",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},openai:{name:"OpenAI",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},langchain:{name:"LangChain",color:"bg-green-500/20 text-green-400 border-green-500/30"},"@vercel/ai":{name:"Vercel AI",color:"bg-white/10 text-white border-white/20"},ai:{name:"AI SDK",color:"bg-white/10 text-white border-white/20"},supabase:{name:"Supabase",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},"@supabase/supabase-js":{name:"Supabase",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},firebase:{name:"Firebase",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},stripe:{name:"Stripe",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},playwright:{name:"Playwright",color:"bg-green-500/20 text-green-400 border-green-500/30"},vitest:{name:"Vitest",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},jest:{name:"Jest",color:"bg-red-500/20 text-red-400 border-red-500/30"},"@trpc/server":{name:"tRPC",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},hono:{name:"Hono",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},elysia:{name:"Elysia",color:"bg-violet-500/20 text-violet-400 border-violet-500/30"},"socket.io":{name:"Socket.io",color:"bg-white/10 text-white border-white/20"},graphql:{name:"GraphQL",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},mongoose:{name:"MongoDB",color:"bg-green-500/20 text-green-400 border-green-500/30"},redis:{name:"Redis",color:"bg-red-500/20 text-red-400 border-red-500/30"},ioredis:{name:"Redis",color:"bg-red-500/20 text-red-400 border-red-500/30"}},FBe={"CLAUDE.md":{name:"Claude Ready",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"claude.md":{name:"Claude Ready",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"AGENTS.md":{name:"AI Agents",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"agents.md":{name:"AI Agents",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},".cursorrules":{name:"Cursor",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},".cursorignore":{name:"Cursor",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"docker-compose.yml":{name:"Docker",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"docker-compose.yaml":{name:"Docker",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},Dockerfile:{name:"Docker",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},".github":{name:"GitHub Actions",color:"bg-gray-500/20 text-gray-400 border-gray-500/30"},"turbo.json":{name:"Turborepo",color:"bg-red-500/20 text-red-400 border-red-500/30"},"nx.json":{name:"Nx",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},"vercel.json":{name:"Vercel",color:"bg-white/10 text-white border-white/20"},"netlify.toml":{name:"Netlify",color:"bg-teal-500/20 text-teal-400 border-teal-500/30"},"fly.toml":{name:"Fly.io",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"railway.json":{name:"Railway",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},".env":{name:"Env Config",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},".env.local":{name:"Local Env",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},"biome.json":{name:"Biome",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},".prettierrc":{name:"Prettier",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},"prettier.config.js":{name:"Prettier",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},".eslintrc":{name:"ESLint",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},".eslintrc.js":{name:"ESLint",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"eslint.config.js":{name:"ESLint",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"wrangler.toml":{name:"Cloudflare",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},".wrangler":{name:"Cloudflare",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},convex:{name:"Convex",color:"bg-red-500/20 text-red-400 border-red-500/30"},"sanity.config.ts":{name:"Sanity",color:"bg-red-500/20 text-red-400 border-red-500/30"},"contentlayer.config.ts":{name:"Contentlayer",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},"mdx-components.tsx":{name:"MDX",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},"schema.prisma":{name:"Prisma",color:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30"},"drizzle.config.ts":{name:"Drizzle",color:"bg-lime-500/20 text-lime-400 border-lime-500/30"},".claude":{name:"Claude Config",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},"mcp.json":{name:"MCP",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},".mcp":{name:"MCP",color:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30"},storybook:{name:"Storybook",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},".storybook":{name:"Storybook",color:"bg-pink-500/20 text-pink-400 border-pink-500/30"},cypress:{name:"Cypress",color:"bg-green-500/20 text-green-400 border-green-500/30"},"cypress.config.ts":{name:"Cypress",color:"bg-green-500/20 text-green-400 border-green-500/30"},"playwright.config.ts":{name:"Playwright",color:"bg-green-500/20 text-green-400 border-green-500/30"},k8s:{name:"Kubernetes",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},kubernetes:{name:"Kubernetes",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},terraform:{name:"Terraform",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},pulumi:{name:"Pulumi",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"}},BBe={bun:{name:"Bun",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},pnpm:{name:"pnpm",color:"bg-orange-500/20 text-orange-400 border-orange-500/30"},yarn:{name:"Yarn",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},npm:{name:"npm",color:"bg-red-500/20 text-red-400 border-red-500/30"}},Nz={Vite:5173,"Next.js":3e3,"Create React App":3e3,Remix:3e3,Astro:4321,Vue:5173,Svelte:5173};function zBe({projectPath:e,projectName:t,initialPort:n,isDarkMode:r,onComplete:o,onCancel:s}){const[i,a]=x.useState([{id:"scan",label:"Scanning project",status:"pending"},{id:"deps",label:"Analyzing dependencies",status:"pending"},{id:"port",label:"Detecting port",status:"pending"}]),[l,c]=x.useState({name:t,path:e,techStack:[]}),[u,f]=x.useState(!1),[m,g]=x.useState(null),[y,v]=x.useState(!1),[w,_]=x.useState([]),T=x.useCallback((P,B)=>{a(U=>U.map(j=>j.id===P?{...j,...B}:j))},[]),k=x.useCallback(P=>{const B=new Set,U=P.filter(j=>B.has(j.name)?!1:(B.add(j.name),!0));_([]),U.forEach((j,H)=>{setTimeout(()=>{_(q=>[...q,j])},H*150)})},[]),M=x.useCallback(async()=>{var q;const P=(q=window.electronAPI)==null?void 0:q.files;if(!P){g("File system access not available");return}T("scan",{status:"running"}),await new Promise(z=>setTimeout(z,200));const B=await P.listDirectory(e);if(!B.success||!B.data){T("scan",{status:"error",message:"Could not read directory"}),g("Failed to read project directory");return}const U=B.data.map(z=>z.name);T("scan",{status:"success",message:`${U.length} files`}),T("deps",{status:"running"}),await new Promise(z=>setTimeout(z,200));const j=`${e}/package.json`,H=await P.readFile(j);if(!H.success||!H.data){T("deps",{status:"error",message:"No package.json"}),g("No package.json found");return}try{const z=JSON.parse(H.data),Z={...z.dependencies,...z.devDependencies},X={...l,techStack:[]},J=[],ee=new Set,re=(Te,ge)=>{ee.has(Te)||(J.push({name:Te,color:ge}),ee.add(Te))};for(const[Te,ge]of Object.entries(Fk))Z[Te]&&re(ge.name,ge.color);U.includes("tsconfig.json")&&re(Fk.typescript.name,Fk.typescript.color);for(const[Te,ge]of Object.entries(FBe))U.includes(Te)&&re(ge.name,ge.color);let ie="npm";U.includes("bun.lockb")||U.includes("bun.lock")?ie="bun":U.includes("pnpm-lock.yaml")?ie="pnpm":U.includes("yarn.lock")&&(ie="yarn");const K=BBe[ie];re(K.name,K.color),X.packageManager=ie,X.hasNodeModules=U.includes("node_modules"),X.techStack=J,Z.next?X.framework="Next.js":Z["@remix-run/react"]?X.framework="Remix":Z.vite?X.framework="Vite":Z["react-scripts"]?X.framework="Create React App":Z.vue?X.framework="Vue":Z.svelte?X.framework="Svelte":Z.astro&&(X.framework="Astro");const te=z.scripts||{};let se="";te.dev?se="dev":te.start?se="start":te.serve?se="serve":te.develop&&(se="develop"),se&&(X.devCommand=`${ie}${ie==="npm"?" run":""} ${se}`),c(X),k(J),T("deps",{status:"success",message:`${J.length} technologies`}),T("port",{status:"running"}),await new Promise(Te=>setTimeout(Te,300));let Q=3e3;if(U.includes("vite.config.ts")||U.includes("vite.config.js")){const Te=U.includes("vite.config.ts")?`${e}/vite.config.ts`:`${e}/vite.config.js`,ge=await P.readFile(Te);if(ge.success&&ge.data){const Ce=ge.data.match(/port:\s*(\d+)/);if(Ce){Q=parseInt(Ce[1]),T("port",{status:"success",message:`Port ${Q}`,detail:"from vite.config"}),c(he=>({...he,port:Q})),f(!0);return}}}if(U.includes("next.config.js")||U.includes("next.config.mjs")){const Te=U.includes("next.config.mjs")?`${e}/next.config.mjs`:`${e}/next.config.js`,ge=await P.readFile(Te);if(ge.success&&ge.data){const Ce=ge.data.match(/port:\s*(\d+)/);if(Ce){Q=parseInt(Ce[1]),T("port",{status:"success",message:`Port ${Q}`,detail:"from next.config"}),c(he=>({...he,port:Q})),f(!0);return}}}X.framework&&Nz[X.framework]?(Q=Nz[X.framework],T("port",{status:"success",message:`Port ${Q}`,detail:`${X.framework} default`})):T("port",{status:"success",message:`Port ${Q}`,detail:"default"}),c(Te=>({...Te,port:Q})),f(!0)}catch{T("deps",{status:"error",message:"Invalid package.json"}),g("Could not parse package.json")}},[e,t,T,k]);x.useEffect(()=>{y||(v(!0),M())},[y,M]);const D=()=>{const P=n||l.port||3e3,B=`http://localhost:${P}`;o(B,P)},I=P=>{switch(P){case"pending":return h.jsx(hN,{size:14,className:"text-neutral-600"});case"running":return h.jsx(ho,{size:14,className:"text-blue-400 animate-spin"});case"success":return h.jsx($ge,{size:14,className:"text-emerald-400"});case"error":return h.jsx(fN,{size:14,className:"text-red-400"});case"skipped":return h.jsx(hN,{size:14,className:"text-neutral-700"})}};return h.jsxs("div",{className:`flex-1 flex flex-col items-center justify-center px-8 min-h-full ${r?"bg-neutral-900 text-white":"bg-white text-stone-900"}`,children:[h.jsx("h1",{className:"text-2xl font-semibold mb-2",children:t}),h.jsx("p",{className:`text-xs font-mono mb-6 ${r?"text-neutral-500":"text-stone-400"}`,children:e}),h.jsx("div",{className:"flex flex-wrap justify-center content-start gap-2 mb-8 h-[80px] max-w-md overflow-hidden",children:w.filter((P,B,U)=>U.findIndex(j=>j.name===P.name)===B).map((P,B)=>h.jsx("span",{className:`
              px-3 py-1.5 text-xs font-medium rounded-full border
              animate-in fade-in zoom-in-95 duration-200
              ${P.color}
            `,style:{animationDelay:`${B*80}ms`},children:P.name},P.name))}),h.jsx("div",{className:`w-full max-w-md rounded-2xl p-6 mb-8 ${r?"bg-neutral-800/50 border border-neutral-700/50":"bg-stone-50 border border-stone-200"}`,children:h.jsx("div",{className:"space-y-4",children:i.map(P=>h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"flex-shrink-0",children:I(P.status)}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("div",{className:`text-sm ${P.status==="pending"?"text-neutral-500":P.status==="error"?"text-red-400":r?"text-neutral-200":"text-stone-700"}`,children:P.label})}),P.message&&h.jsx("div",{className:`text-xs ${P.status==="error"?"text-red-400":"text-neutral-500"}`,children:P.message})]},P.id))})}),m&&h.jsxs("div",{className:`mb-6 p-4 rounded-xl flex items-start gap-3 max-w-sm w-full ${r?"bg-red-500/10 border border-red-500/20":"bg-red-50 border border-red-100"}`,children:[h.jsx(_0,{size:16,className:"text-red-400 mt-0.5 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-red-400",children:m})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:s,className:`
            px-4 py-2 text-sm rounded-lg transition-colors
            ${r?"text-neutral-400 hover:bg-neutral-800":"text-stone-500 hover:bg-stone-100"}
          `,children:"Cancel"}),u&&h.jsxs("button",{onClick:D,className:`
              flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium
              transition-colors
              ${r?"bg-white text-neutral-900 hover:bg-neutral-200":"bg-stone-800 text-white hover:bg-stone-700"}
            `,children:[h.jsx($f,{size:14}),h.jsx("span",{children:"Open in Browser"})]})]}),u&&h.jsxs("p",{className:`mt-4 text-xs ${r?"text-neutral-600":"text-stone-400"}`,children:["localhost:",n||l.port||3e3]})]})}function xv(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return`${(e/Math.pow(t,r)).toFixed(1)} ${n[r]}`}function Iz(e){return`${xv(e)}/s`}function Rz(e){return e<60?`${Math.round(e)}s`:e<3600?`${Math.round(e/60)}m`:`${Math.round(e/3600)}h ${Math.round(e%3600/60)}m`}function jBe({isDarkMode:e,isPro:t=!0}){const[n,r]=x.useState(null),[o,s]=x.useState([]),[i,a]=x.useState(!0),[l,c]=x.useState(null),[u,f]=x.useState(null),[m,g]=x.useState(null),[y,v]=x.useState(null),[w,_]=x.useState(!1);x.useEffect(()=>{var Z,X,J,ee,re,ie;T();const H=(X=(Z=window.electronAPI)==null?void 0:Z.fastApply)==null?void 0:X.onProgress(K=>{g(K)}),q=(ee=(J=window.electronAPI)==null?void 0:J.fastApply)==null?void 0:ee.onModelLoaded(()=>{T()}),z=(ie=(re=window.electronAPI)==null?void 0:re.fastApply)==null?void 0:ie.onModelUnloaded(()=>{T()});return()=>{H==null||H(),q==null||q(),z==null||z()}},[]);const T=async()=>{var H;if(!((H=window.electronAPI)!=null&&H.fastApply)){c("Fast Apply is only available in the desktop app"),a(!1);return}try{a(!0),c(null);const[q,z]=await Promise.all([window.electronAPI.fastApply.getStatus(),window.electronAPI.fastApply.listModels()]);r(q);const Z=(z==null?void 0:z.models)||(Array.isArray(z)?z:[]);s(Z),z&&!z.success&&z.error&&c(z.error)}catch(q){c(q instanceof Error?q.message:"Failed to load Fast Apply status"),s([])}finally{a(!1)}},k=async H=>{var q;if(console.log("[FastApplySettings] handleDownload called for:",H),u!==null){console.log("[FastApplySettings] Already downloading, ignoring click");return}if(!((q=window.electronAPI)!=null&&q.fastApply)){console.error("[FastApplySettings] fastApply API not available"),c("Fast Apply API not available");return}try{f(H),g(null),c(null),console.log("[FastApplySettings] Calling download IPC...");const z=await window.electronAPI.fastApply.download(H);console.log("[FastApplySettings] Download result:",z),z.success?console.log("[FastApplySettings] Download succeeded, path:",z.path):(console.error("[FastApplySettings] Download failed:",z.error),c(z.error||"Download failed")),await T()}catch(z){console.error("[FastApplySettings] Download exception:",z),c(z instanceof Error?z.message:"Download failed")}finally{f(null),g(null)}},M=async()=>{var H;(H=window.electronAPI)!=null&&H.fastApply&&(await window.electronAPI.fastApply.cancel(),f(null),g(null))},D=async H=>{var q;if((q=window.electronAPI)!=null&&q.fastApply)try{v(H);const z=await window.electronAPI.fastApply.delete(H);z.success||c(z.error||"Delete failed"),await T()}catch(z){c(z instanceof Error?z.message:"Delete failed")}finally{v(null)}},I=async H=>{var q;if((q=window.electronAPI)!=null&&q.fastApply)try{c(null);const z=await window.electronAPI.fastApply.setModel(H);if(!z.success){c(z.error||"Failed to set model");return}await T()}catch(z){c(z instanceof Error?z.message:"Failed to set model")}};if(!t)return h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:`p-6 rounded-xl border ${e?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:`p-2 rounded-lg ${e?"bg-yellow-500/20":"bg-yellow-100"}`,children:h.jsx(Ac,{size:24,className:"text-yellow-500"})}),h.jsxs("div",{children:[h.jsx("h3",{className:`font-semibold ${e?"text-white":"text-stone-900"}`,children:"Fast Apply - Pro Feature"}),h.jsx("p",{className:`text-sm ${e?"text-neutral-400":"text-stone-500"}`,children:"Instant local code merging with AI"})]})]}),h.jsx("p",{className:`text-sm mb-4 ${e?"text-neutral-300":"text-stone-600"}`,children:"Upgrade to Pro to unlock Fast Apply - a local AI model that merges code changes in ~500ms, completely offline after downloading. No API costs, complete privacy."}),h.jsx("button",{className:"w-full py-2.5 px-4 rounded-lg bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-medium hover:from-yellow-600 hover:to-orange-600 transition-all",children:"Upgrade to Pro"})]})});if(i)return h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(ho,{className:`animate-spin ${e?"text-neutral-400":"text-stone-500"}`,size:32})});if(l&&!n)return h.jsx("div",{className:`p-4 rounded-lg ${e?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_0,{size:18}),h.jsx("span",{className:"text-sm font-medium",children:l})]})});const P=async()=>{var H;if(!(!((H=window.electronAPI)!=null&&H.fastApply)||w)){_(!0);try{n!=null&&n.ready?await window.electronAPI.fastApply.unload():n!=null&&n.activeModel&&await window.electronAPI.fastApply.load(),await T()}catch(q){c(q instanceof Error?q.message:"Failed to toggle Fast Apply")}finally{_(!1)}}},B=(n==null?void 0:n.activeModel)&&!w,U=n==null?void 0:n.ready,j=u!==null&&m!==null;return h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:`p-4 rounded-xl border ${j?e?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200":U?e?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200":e?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:j?h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${e?"bg-blue-500/20":"bg-blue-100"}`,children:h.jsx(Y_,{size:20,className:"text-blue-500"})}),h.jsxs("div",{children:[h.jsxs("h4",{className:`font-medium ${e?"text-blue-400":"text-blue-700"}`,children:["Downloading ",m.variant,"..."]}),h.jsxs("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[xv(m.downloaded)," / ",xv(m.total)]})]})]}),h.jsx("button",{onClick:M,className:`text-xs px-3 py-1.5 rounded-lg transition-colors ${e?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:"Cancel"})]}),h.jsx("div",{className:`w-full h-2 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-blue-200"}`,children:h.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${m.percent}%`}})}),h.jsx("div",{className:"flex justify-end mt-2",children:h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[Iz(m.speed)," - ",Rz(m.eta)," remaining"]})})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${U?e?"bg-green-500/20":"bg-green-100":e?"bg-neutral-700":"bg-stone-200"}`,children:h.jsx(Ac,{size:20,className:U?"text-green-500":e?"text-neutral-400":"text-stone-400"})}),h.jsxs("div",{children:[h.jsx("h4",{className:`font-medium ${U?"text-green-500":e?"text-white":"text-stone-900"}`,children:U?"Ready":"Fast Apply"}),h.jsx("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:n!=null&&n.activeModel?U?`${n.activeModel} loaded`:`${n.activeModel} available`:"Download a model to enable"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:P,disabled:!B,className:`relative w-11 h-6 rounded-full transition-all duration-200 ${B?U?"bg-green-500":e?"bg-neutral-600 hover:bg-neutral-500":"bg-stone-300 hover:bg-stone-400":e?"bg-neutral-700 cursor-not-allowed":"bg-stone-200 cursor-not-allowed"}`,children:h.jsx("div",{className:`absolute top-0.5 w-5 h-5 rounded-full transition-all duration-200 flex items-center justify-center ${U?"left-[22px]":"left-0.5"} ${w?"bg-white/80":"bg-white shadow-sm"}`,children:w&&h.jsx(ho,{size:12,className:"animate-spin text-neutral-500"})})}),h.jsx("button",{onClick:T,className:`p-2 rounded-lg transition-colors ${e?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,children:h.jsx(p0,{size:16})})]})]})}),l&&h.jsx("div",{className:`p-3 rounded-lg ${e?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_0,{size:16}),h.jsx("span",{className:"text-sm",children:l})]})}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${e?"text-neutral-200":"text-stone-800"}`,children:"Available Models"}),h.jsx("div",{className:"space-y-2",children:(o||[]).map(H=>{const q=u===H.variant&&m;return h.jsx("div",{className:`p-4 rounded-xl border transition-colors ${q?e?"border-blue-500/50 bg-blue-500/10":"border-blue-300 bg-blue-50":(n==null?void 0:n.activeModel)===H.variant?e?"border-blue-500 bg-blue-500/10":"border-blue-500 bg-blue-50":e?"border-neutral-700 hover:border-neutral-600":"border-stone-200 hover:border-stone-300"}`,children:q?h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("span",{className:`font-medium ${e?"text-blue-400":"text-blue-700"}`,children:["Downloading ",H.variant,"..."]}),h.jsx("button",{onClick:M,className:`text-xs px-3 py-1 rounded-lg transition-colors ${e?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:"Cancel"})]}),h.jsx("div",{className:`w-full h-2 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-blue-200"}`,children:h.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${m.percent}%`}})}),h.jsxs("div",{className:"flex justify-between mt-2",children:[h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[xv(m.downloaded)," / ",xv(m.total)]}),h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:[Iz(m.speed)," - ",Rz(m.eta)," remaining"]})]})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`font-medium ${e?"text-white":"text-stone-900"}`,children:H.variant}),H.downloaded&&h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-700"}`,children:"Downloaded"}),(n==null?void 0:n.activeModel)===H.variant&&h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-700"}`,children:"Active"})]}),h.jsx("p",{className:`text-xs mt-1 ${e?"text-neutral-400":"text-stone-500"}`,children:H.description}),h.jsxs("div",{className:`flex items-center gap-4 mt-2 text-xs ${e?"text-neutral-500":"text-stone-400"}`,children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(ax,{size:12}),H.size," MB"]}),h.jsxs("span",{children:["Quality: ",H.quality]}),h.jsxs("span",{children:["RAM: ~",H.memory," MB"]})]})]}),h.jsx("div",{className:"flex items-center gap-2 ml-4",children:H.downloaded?h.jsxs(h.Fragment,{children:[(n==null?void 0:n.activeModel)!==H.variant&&h.jsx("button",{onClick:()=>I(H.variant),className:`text-xs px-3 py-1.5 rounded-lg transition-colors ${e?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:"Select"}),h.jsx("button",{onClick:()=>D(H.variant),disabled:y===H.variant,className:`p-2 rounded-lg transition-colors ${e?"hover:bg-red-500/20 text-neutral-400 hover:text-red-400":"hover:bg-red-100 text-stone-400 hover:text-red-600"} ${y===H.variant?"opacity-50 cursor-not-allowed":""}`,children:y===H.variant?h.jsx(ho,{size:16,className:"animate-spin"}):h.jsx(Ff,{size:16})})]}):h.jsxs("button",{onClick:()=>k(H.variant),disabled:u!==null,className:`flex items-center gap-2 text-xs px-3 py-1.5 rounded-lg transition-colors ${u!==null?"opacity-50 cursor-not-allowed bg-neutral-800 text-neutral-500":e?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:[h.jsx(Y_,{size:14}),"Download"]})})]})},H.variant)})})]}),(n==null?void 0:n.storageDir)&&h.jsx("div",{className:`text-xs ${e?"text-neutral-500":"text-stone-400"}`,children:h.jsxs("p",{children:["Models stored in: ",n.storageDir]})})]})}function UBe(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(t));return`${(e/Math.pow(t,r)).toFixed(1)} ${n[r]}`}function HBe(e){return e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function VBe({isDarkMode:e,projectPath:t}){const[n,r]=x.useState([]),[o,s]=x.useState(!0),[i,a]=x.useState(null),[l,c]=x.useState(null),[u,f]=x.useState({}),[m,g]=x.useState(""),[y,v]=x.useState(""),[w,_]=x.useState("both"),[T,k]=x.useState(!1),[M,D]=x.useState(null),[I,P]=x.useState(null),[B,U]=x.useState(null),[j,H]=x.useState(null),[q,z]=x.useState([]),[Z,X]=x.useState(!1),J=x.useRef(null),ee=(ge,Ce)=>{z(he=>[...he.slice(-49),{timestamp:new Date,type:ge,message:Ce}])};x.useEffect(()=>{var Ce,he;re(),ee("info","Code Index settings loaded");const ge=(he=(Ce=window.electronAPI)==null?void 0:Ce.mgrep)==null?void 0:he.onEvent(Fe=>{var Re,nt;console.log("[CodeIndexSettings] *** mgrep event received ***",Fe.type,Fe);const Oe=Fe.projectPath?Fe.projectPath.split("/").pop():"unknown";if(Fe.projectPath)switch(Fe.type){case"scanning-start":f(ue=>({...ue,[Fe.projectPath]:{phase:"scanning",current:0,total:0}}));break;case"scanning-complete":f(ue=>({...ue,[Fe.projectPath]:{phase:"scanning",current:Fe.filesFound||0,total:Fe.filesFound||0}}));break;case"indexing-start":f(ue=>({...ue,[Fe.projectPath]:{phase:"indexing",current:0,total:Fe.totalFiles||0}}));break;case"indexing-progress":f(ue=>({...ue,[Fe.projectPath]:{phase:"indexing",current:Fe.current||0,total:Fe.total||0,currentFile:Fe.currentFile}}));break;case"indexing-complete":case"error":f(ue=>{const et={...ue};return delete et[Fe.projectPath],et});break}switch(Fe.type){case"ready":ee("success",`[${Oe}] Index ready`);break;case"scanning-start":ee("info",`[${Oe}] Scanning project files...`);break;case"scanning-complete":ee("info",`[${Oe}] Found ${Fe.filesFound||0} files to index`);break;case"indexing-start":ee("info",`[${Oe}] Indexing started (${Fe.totalFiles||0} files)`);break;case"indexing-progress":break;case"indexing-complete":ee("success",`[${Oe}] Indexing complete: ${Fe.totalChunks||Fe.chunksIndexed||0} chunks`);break;case"file-indexed":break;case"stats-updated":ee("success",`[${Oe}] Stats updated: ${((Re=Fe.stats)==null?void 0:Re.totalFiles)||0} files, ${((nt=Fe.stats)==null?void 0:nt.totalChunks)||0} chunks`);break;case"error":ee("error",`[${Oe}] Error: ${Fe.error}`);break;default:ee("event",`[${Oe}] ${Fe.type}`)}["ready","indexing-complete","indexing-start","scanning-complete","stats-updated"].includes(Fe.type)&&re()});return()=>{ge==null||ge()}},[t]),x.useEffect(()=>{J.current&&(J.current.scrollTop=J.current.scrollHeight)},[q]),x.useEffect(()=>{if(n.length>0&&!y){const ge=n.find(Ce=>Ce.ready);ge&&v(ge.projectPath)}},[n,y]);const re=async()=>{var ge;if(!((ge=window.electronAPI)!=null&&ge.mgrep)){a("Code Index is only available in the desktop app"),s(!1);return}try{s(!0),a(null);const Ce=await window.electronAPI.mgrep.getAllProjectsStatus();Ce.success&&Ce.projects&&r(Ce.projects)}catch(Ce){const he=Ce instanceof Error?Ce.message:"Failed to load status";a(he),ee("error",he)}finally{s(!1)}},ie=async ge=>{var Ce;if((Ce=window.electronAPI)!=null&&Ce.mgrep)try{c(ge),a(null),ee("info",`Initializing index for: ${ge.split("/").pop()}`);const he=await window.electronAPI.mgrep.initialize(ge);he.success?ee("success","Index initialized successfully"):(a(he.error||"Failed to initialize"),ee("error",he.error||"Failed to initialize")),await re()}catch(he){const Fe=he instanceof Error?he.message:"Failed to initialize";a(Fe),ee("error",Fe)}finally{c(null)}},K=async ge=>{var Ce;if((Ce=window.electronAPI)!=null&&Ce.mgrep)try{c(ge),a(null),ee("info",`Clearing index for: ${ge.split("/").pop()}`);const he=await window.electronAPI.mgrep.clearIndex(ge);he.success?(ee("success","Index cleared"),D(null),P(null),U(null),H(null)):(a(he.error||"Failed to clear index"),ee("error",he.error||"Failed to clear")),await re()}catch(he){const Fe=he instanceof Error?he.message:"Failed to clear index";a(Fe),ee("error",Fe)}finally{c(null)}},te=async ge=>{var Ce;if((Ce=window.electronAPI)!=null&&Ce.mgrep)try{c(ge),a(null),ee("info",`Re-syncing index for: ${ge.split("/").pop()}`),window.electronAPI.mgrep.resync(ge).then(he=>{he.success||ee("error",he.error||"Resync failed"),re()}).catch(he=>{ee("error",he instanceof Error?he.message:"Resync failed")}),c(null)}catch(he){const Fe=he instanceof Error?he.message:"Failed to resync";a(Fe),ee("error",Fe),c(null)}},se=async()=>{var ge,Ce,he;if(!(!m.trim()||!y))try{k(!0),D(null),P(null),U(null),H(null);const Fe=y.split("/").pop();if(ee("info",`Searching "${m}" in ${Fe} (${w})`),w==="both"){const[Oe,Re]=await Promise.all([(async()=>{var ue;if(!((ue=window.electronAPI)!=null&&ue.mgrep))return null;const nt=performance.now();try{const et=await window.electronAPI.mgrep.search(m,{limit:5,projectPath:y}),ut=performance.now()-nt;return U(ut),et.success&&et.results?(D(et.results),{success:!0,count:et.results.length,time:ut}):{success:!1,error:et.error}}catch(et){return{success:!1,error:et instanceof Error?et.message:"Failed"}}})(),(async()=>{var ue,et;if(!((et=(ue=window.electronAPI)==null?void 0:ue.files)!=null&&et.searchInFiles))return null;const nt=performance.now();try{const ut=await window.electronAPI.files.searchInFiles(m,y,{maxResults:5}),Yt=performance.now()-nt;return H(Yt),ut.success&&ut.data?(P(ut.data),{success:!0,count:ut.data.length,time:Yt}):{success:!1,error:ut.error}}catch(ut){return{success:!1,error:ut instanceof Error?ut.message:"Failed"}}})()]);if(Oe!=null&&Oe.success&&(Re!=null&&Re.success)){const nt=(Re.time/Oe.time).toFixed(2);ee("success",`Semantic: ${Oe.count} results (${Oe.time.toFixed(0)}ms) | Grep: ${Re.count} results (${Re.time.toFixed(0)}ms) | ${nt}x`)}}else if(w==="semantic"){if(!((ge=window.electronAPI)!=null&&ge.mgrep))return;const Oe=performance.now(),Re=await window.electronAPI.mgrep.search(m,{limit:5,projectPath:y}),nt=performance.now()-Oe;U(nt),Re.success&&Re.results?(D(Re.results),ee("success",`Found ${Re.results.length} semantic results (${nt.toFixed(0)}ms)`)):ee("error",Re.error||"Search failed")}else if(w==="grep"){if(!((he=(Ce=window.electronAPI)==null?void 0:Ce.files)!=null&&he.searchInFiles))return;const Oe=performance.now(),Re=await window.electronAPI.files.searchInFiles(m,y,{maxResults:5}),nt=performance.now()-Oe;H(nt),Re.success&&Re.data?(P(Re.data),ee("success",`Found ${Re.data.length} grep results (${nt.toFixed(0)}ms)`)):ee("error",Re.error||"Search failed")}}catch(Fe){const Oe=Fe instanceof Error?Fe.message:"Search failed";ee("error",Oe)}finally{k(!1)}};if(o)return h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx(ho,{className:`animate-spin ${e?"text-neutral-400":"text-stone-500"}`,size:32})});const Q=n.filter(ge=>ge.ready),Te=t&&!n.find(ge=>ge.projectPath===t);return h.jsxs("div",{className:"space-y-6",children:[i&&h.jsx("div",{className:`p-3 rounded-lg ${e?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_0,{size:16}),h.jsx("span",{className:"text-sm",children:i})]})}),Q.length>0&&h.jsxs("div",{className:`p-4 rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("h4",{className:`text-sm font-medium mb-3 flex items-center gap-2 ${e?"text-neutral-200":"text-stone-800"}`,children:[h.jsx(Gf,{size:14,className:"text-blue-500"}),"Test Search"]}),h.jsx("div",{className:"flex gap-2 mb-3",children:["both","semantic","grep"].map(ge=>h.jsx("button",{onClick:()=>_(ge),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${w===ge?"bg-blue-500 text-white":e?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:ge==="both"?"Both":ge==="semantic"?"Cluso (AI)":"Grep"},ge))}),h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx("select",{value:y,onChange:ge=>v(ge.target.value),className:`px-3 py-2 rounded-lg border text-sm ${e?"bg-neutral-900 border-neutral-600 text-white":"bg-white border-stone-300 text-stone-900"}`,children:Q.map(ge=>h.jsx("option",{value:ge.projectPath,children:ge.projectPath.split("/").pop()},ge.projectPath))}),h.jsx("input",{type:"text",value:m,onChange:ge=>g(ge.target.value),onKeyDown:ge=>ge.key==="Enter"&&se(),placeholder:w==="grep"?"Search with grep...":"Search by meaning...",className:`flex-1 px-3 py-2 rounded-lg border text-sm ${e?"bg-neutral-900 border-neutral-600 text-white placeholder-neutral-500":"bg-white border-stone-300 text-stone-900 placeholder-stone-400"}`}),h.jsx("button",{onClick:se,disabled:T||!m.trim(),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${T||!m.trim()?"opacity-50 cursor-not-allowed bg-neutral-700 text-neutral-400":e?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:T?h.jsx(ho,{size:14,className:"animate-spin"}):h.jsx(Gf,{size:14})})]}),w==="both"&&(M||I)&&h.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:`text-xs font-medium ${e?"text-purple-400":"text-purple-600"}`,children:"Cluso (AI Semantic)"}),B&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-600"}`,children:[B.toFixed(0),"ms"]})]}),M&&M.length>0?h.jsx("div",{className:"space-y-2",children:M.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.filePath.split("/").pop(),":",ge.metadata.startLine]}),h.jsxs("span",{className:`px-2 py-0.5 rounded-full ${ge.similarity>.7?"bg-green-500/20 text-green-400":ge.similarity>.5?"bg-yellow-500/20 text-yellow-400":"bg-neutral-500/20 text-neutral-400"}`,children:[(ge.similarity*100).toFixed(0),"%"]})]}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,150),ge.content.length>150?"...":""]})]},Ce))}):h.jsx("p",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:"No semantic results"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:`text-xs font-medium ${e?"text-green-400":"text-green-600"}`,children:"Grep (Keyword)"}),j&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600"}`,children:[j.toFixed(0),"ms"]})]}),I&&I.length>0?h.jsx("div",{className:"space-y-2",children:I.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("div",{className:"mb-1",children:h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.file.split("/").pop(),":",ge.line]})}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,150),ge.content.length>150?"...":""]})]},Ce))}):h.jsx("p",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:"No grep results"})]})]}),w==="semantic"&&M&&h.jsxs("div",{className:"mt-3",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("span",{className:`text-xs font-medium ${e?"text-purple-400":"text-purple-600"}`,children:["Cluso (AI Semantic) - ",M.length," results"]}),B&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-600"}`,children:[B.toFixed(0),"ms"]})]}),M.length>0?h.jsx("div",{className:"space-y-2",children:M.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.filePath.split("/").pop(),":",ge.metadata.startLine]}),h.jsxs("span",{className:`px-2 py-0.5 rounded-full ${ge.similarity>.7?"bg-green-500/20 text-green-400":ge.similarity>.5?"bg-yellow-500/20 text-yellow-400":"bg-neutral-500/20 text-neutral-400"}`,children:[(ge.similarity*100).toFixed(0),"%"]})]}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,200),ge.content.length>200?"...":""]})]},Ce))}):h.jsx("p",{className:`text-sm ${e?"text-neutral-500":"text-stone-500"}`,children:"No results found"})]}),w==="grep"&&I&&h.jsxs("div",{className:"mt-3",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("span",{className:`text-xs font-medium ${e?"text-green-400":"text-green-600"}`,children:["Grep (Keyword) - ",I.length," results"]}),j&&h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600"}`,children:[j.toFixed(0),"ms"]})]}),I.length>0?h.jsx("div",{className:"space-y-2",children:I.map((ge,Ce)=>h.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-neutral-900 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("div",{className:"mb-1",children:h.jsxs("span",{className:`font-mono ${e?"text-blue-400":"text-blue-600"}`,children:[ge.file.split("/").pop(),":",ge.line]})}),h.jsxs("pre",{className:`whitespace-pre-wrap font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:[ge.content.slice(0,200),ge.content.length>200?"...":""]})]},Ce))}):h.jsx("p",{className:`text-sm ${e?"text-neutral-500":"text-stone-500"}`,children:"No results found"})]})]}),Te&&h.jsx("div",{className:`p-4 rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-500"}),h.jsxs("div",{children:[h.jsxs("div",{className:`text-sm font-medium ${e?"text-white":"text-stone-900"}`,children:[t==null?void 0:t.split("/").pop(),h.jsx("span",{className:`ml-2 text-xs px-1.5 py-0.5 rounded ${e?"bg-yellow-500/20 text-yellow-400":"bg-yellow-100 text-yellow-600"}`,children:"current"})]}),h.jsx("div",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:"Not indexed"})]})]}),h.jsxs("button",{onClick:()=>ie(t),disabled:l===t,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${l===t?"opacity-50 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white"}`,children:[l===t?h.jsx(ho,{size:12,className:"animate-spin"}):h.jsx(gN,{size:12}),"Initialize"]})]})}),n.length>0&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ax,{size:16,className:e?"text-neutral-400":"text-stone-500"}),h.jsx("span",{className:`text-sm font-medium ${e?"text-neutral-200":"text-stone-800"}`,children:"Indexed Projects"}),h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,children:n.length})]}),h.jsx("button",{onClick:re,className:`p-1.5 rounded-lg transition-colors ${e?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Refresh",children:h.jsx(p0,{size:14})})]}),n.map(ge=>{var nt;const Ce=ge.projectPath.split("/").pop()||ge.projectPath,he=ge.projectPath===t,Fe=l===ge.projectPath,Oe=u[ge.projectPath],Re=!!Oe;return h.jsxs("div",{className:`p-4 rounded-xl border ${he?e?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-200":e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${Re||ge.indexing?"bg-blue-500 animate-pulse":ge.ready?"bg-green-500":"bg-neutral-500"}`}),h.jsxs("div",{children:[h.jsxs("div",{className:`text-sm font-medium ${e?"text-white":"text-stone-900"}`,children:[Ce,he&&h.jsx("span",{className:`ml-2 text-xs px-1.5 py-0.5 rounded ${e?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-600"}`,children:"current"})]}),h.jsx("div",{className:`text-xs ${e?"text-neutral-500":"text-stone-500"}`,children:Re?Oe.phase==="scanning"?`Scanning... ${Oe.total>0?`${Oe.total} files found`:""}`:`Indexing ${Oe.current}/${Oe.total} files`:ge.indexing?"Indexing...":ge.ready?"Ready":ge.error||"Not initialized"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[(Re||ge.indexing)&&h.jsx(ho,{size:14,className:"text-blue-500 animate-spin"}),!ge.ready&&!ge.indexing&&h.jsxs("button",{onClick:()=>ie(ge.projectPath),disabled:Fe,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${Fe?"opacity-50 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white"}`,children:[Fe?h.jsx(ho,{size:12,className:"animate-spin"}):h.jsx(gN,{size:12}),"Initialize"]}),ge.ready&&h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:()=>te(ge.projectPath),disabled:Fe||ge.indexing||Re,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${Fe||ge.indexing||Re?"opacity-50 cursor-not-allowed":e?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-200 text-stone-700 hover:bg-stone-300"}`,children:[h.jsx(p0,{size:12}),"Resync"]}),h.jsxs("button",{onClick:()=>K(ge.projectPath),disabled:Fe||ge.indexing||Re,className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors ${Fe||ge.indexing||Re?"opacity-50 cursor-not-allowed":e?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:[h.jsx(Ff,{size:12}),"Clear"]})]})]})]}),Re&&h.jsx("div",{className:"mb-3",children:Oe.phase==="scanning"?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`h-1.5 flex-1 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-stone-200"}`,children:h.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 animate-pulse",style:{width:"100%"}})}),h.jsxs("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:["Scanning",Oe.total>0?` (${Oe.total} files)`:"..."]})]}):Oe.total>0?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:((nt=Oe.currentFile)==null?void 0:nt.split("/").pop())||"Processing..."}),h.jsxs("span",{className:`text-xs font-mono ${e?"text-neutral-500":"text-stone-400"}`,children:[Math.round(Oe.current/Oe.total*100),"%"]})]}),h.jsx("div",{className:`h-1.5 rounded-full overflow-hidden ${e?"bg-neutral-700":"bg-stone-200"}`,children:h.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${Math.round(Oe.current/Oe.total*100)}%`}})})]}):h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ho,{size:12,className:"text-blue-500 animate-spin"}),h.jsx("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-500"}`,children:"Preparing..."})]})}),ge.stats&&!Re&&h.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(Qge,{size:12,className:e?"text-blue-400":"text-blue-600"}),h.jsxs("span",{className:e?"text-neutral-400":"text-stone-600",children:[ge.stats.totalFiles.toLocaleString()," files"]})]}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(d1e,{size:12,className:e?"text-purple-400":"text-purple-600"}),h.jsxs("span",{className:e?"text-neutral-400":"text-stone-600",children:[ge.stats.totalChunks.toLocaleString()," chunks"]})]}),h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(Yge,{size:12,className:e?"text-green-400":"text-green-600"}),h.jsx("span",{className:e?"text-neutral-400":"text-stone-600",children:UBe(ge.stats.databaseSize)})]})]})]},ge.projectPath)})]}),n.length===0&&!Te&&h.jsx("div",{className:`p-4 rounded-xl border ${e?"bg-yellow-500/10 border-yellow-500/30":"bg-yellow-50 border-yellow-200"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_0,{size:16,className:"text-yellow-500"}),h.jsx("span",{className:`text-sm ${e?"text-yellow-400":"text-yellow-700"}`,children:"Open a project folder to enable code indexing"})]})}),h.jsxs("div",{className:`rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("button",{onClick:()=>X(!Z),className:`w-full p-4 flex items-center justify-between ${e?"text-neutral-200":"text-stone-800"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(rbe,{size:16,className:e?"text-neutral-400":"text-stone-500"}),h.jsx("span",{className:"text-sm font-medium",children:"Activity Log"}),h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,children:q.length})]}),Z?h.jsx(gq,{size:16}):h.jsx(Lf,{size:16})]}),Z&&h.jsx("div",{ref:J,className:`px-4 pb-4 max-h-48 overflow-y-auto font-mono text-xs space-y-1 ${e?"text-neutral-400":"text-stone-600"}`,children:q.length===0?h.jsx("p",{className:"text-center py-4 opacity-50",children:"No activity yet"}):q.map((ge,Ce)=>h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("span",{className:e?"text-neutral-600":"text-stone-400",children:["[",HBe(ge.timestamp),"]"]}),h.jsx("span",{className:ge.type==="success"?"text-green-500":ge.type==="error"?"text-red-500":ge.type==="event"?"text-purple-400":e?"text-neutral-300":"text-stone-700",children:ge.message})]},Ce))})]}),h.jsxs("div",{className:`p-4 rounded-xl border ${e?"border-neutral-700 bg-neutral-800/30":"border-stone-200 bg-stone-50"}`,children:[h.jsx("h4",{className:`text-sm font-medium mb-3 ${e?"text-neutral-200":"text-stone-800"}`,children:"Features"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(cd,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Local embeddings (no API costs)"})]}),h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(cd,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Real-time indexing on file changes"})]}),h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(cd,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Code-aware chunking (functions, classes)"})]}),h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx(cd,{size:14,className:"text-green-500"}),h.jsx("span",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"}`,children:"Hybrid search (semantic + keyword boost)"})]})]})]})]})}const H2={autoConnect:!0,sendAnalytics:!1,fontSize:"medium",showLineNumbers:!0,providers:[{id:"google",name:"Google AI (Gemini)",apiKey:"",enabled:!0},{id:"openai",name:"OpenAI",apiKey:"",enabled:!1},{id:"anthropic",name:"Anthropic",apiKey:"",enabled:!1}],models:[{id:"claude-sonnet-4-5",name:"Claude Sonnet 4.5",provider:"claude-code",enabled:!0},{id:"claude-opus-4-5",name:"Claude Opus 4.5",provider:"claude-code",enabled:!0},{id:"claude-haiku-4-5",name:"Claude Haiku 4.5",provider:"claude-code",enabled:!0},{id:"claude-3-5-sonnet",name:"Claude 3.5 Sonnet",provider:"anthropic",enabled:!1},{id:"claude-3-opus",name:"Claude 3 Opus",provider:"anthropic",enabled:!1},{id:"gpt-4o",name:"GPT-4o",provider:"openai",enabled:!1},{id:"gpt-4o-mini",name:"GPT-4o Mini",provider:"openai",enabled:!1},{id:"gpt-5.1",name:"GPT-5.1",provider:"codex",enabled:!1},{id:"gpt-5.1-mini",name:"GPT-5.1 Mini",provider:"codex",enabled:!1},{id:"gpt-5.1-nano",name:"GPT-5.1 Nano",provider:"codex",enabled:!1},{id:"gpt-5.1-codex",name:"GPT-5.1 Codex",provider:"codex",enabled:!1},{id:"gemini-3-pro-preview",name:"Gemini 3.0 Pro",provider:"google",enabled:!0},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",provider:"google",enabled:!0},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",provider:"google",enabled:!0},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash Lite",provider:"google",enabled:!0}],connections:[{id:"1",name:"Example SSE Server",type:"mcp",transport:{type:"sse",url:"http://localhost:3001"},enabled:!1}]},Mz=[{id:"general",label:"General",icon:h.jsx(J_,{size:18})},{id:"display",label:"Display",icon:h.jsx(mN,{size:18})},{id:"providers",label:"Providers",icon:h.jsx(xq,{size:18})},{id:"models",label:"Models",icon:h.jsx(f1,{size:18})},{id:"mcp",label:"MCP Servers",icon:h.jsx(lbe,{size:18})},{id:"lsp",label:"Language Servers",icon:h.jsx(ud,{size:18})},{id:"themes",label:"Themes",icon:h.jsx(cv,{size:18})},{id:"codeindex",label:"Code Index",icon:h.jsx(ax,{size:18})},{id:"pro",label:"Pro Features",icon:h.jsx(Ac,{size:18})}],Tte={small:"14px",medium:"16px",large:"18px"};function Bk(e,t){e=e.replace(/^#/,"");let n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);return n=Math.min(255,Math.max(0,Math.round(n+n*t/100))),r=Math.min(255,Math.max(0,Math.round(r+r*t/100))),o=Math.min(255,Math.max(0,Math.round(o+o*t/100))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`}function qBe({isOpen:e,onClose:t,isDarkMode:n,onToggleDarkMode:r,settings:o,onSettingsChange:s,projectPath:i}){var Os;const[a,l]=x.useState("general"),[c,u]=x.useState({}),{currentTheme:f,setTheme:m,themes:g}=lR(),[y,v]=x.useState(!1),[w,_]=x.useState(null),[T,k]=x.useState(null),[M,D]=x.useState(""),[I,P]=x.useState({authenticated:!1,expiresAt:null}),[B,U]=x.useState(null),[j,H]=x.useState(!1),[q,z]=x.useState({authenticated:!1,expiresAt:null}),[Z,X]=x.useState(!1),[J,ee]=x.useState(null),[re,ie]=x.useState(!1),[K,te]=x.useState("idle"),[se,Q]=x.useState(null),[Te,ge]=x.useState(null),[Ce,he]=x.useState(null),[Fe,Oe]=x.useState(""),[Re,nt]=x.useState({}),[ue,et]=x.useState(!1),[ut,Yt]=x.useState(new Set),[Ht,Pt]=x.useState([]),[tn,vt]=x.useState(!1),[me,Ne]=x.useState(new Set),[$e,Je]=x.useState(null);x.useEffect(()=>{var it,rt,pt,Vt,Ur,Ao;e&&((it=window.electronAPI)!=null&&it.oauth)&&window.electronAPI.oauth.getStatus().then(Zn=>{P(Zn),Zn.authenticated!==o.claudeCodeAuthenticated&&s({...o,claudeCodeAuthenticated:Zn.authenticated,claudeCodeExpiresAt:Zn.expiresAt,models:o.models.map(Hr=>Hr.provider==="claude-code"?{...Hr,enabled:Zn.authenticated}:Hr)})}),e&&((rt=window.electronAPI)!=null&&rt.codex)&&window.electronAPI.codex.getStatus().then(Zn=>{z(Zn),Zn.authenticated!==o.codexAuthenticated&&s({...o,codexAuthenticated:Zn.authenticated,codexExpiresAt:Zn.expiresAt,models:o.models.map(Hr=>Hr.provider==="codex"?{...Hr,enabled:Zn.authenticated}:Hr)})}),e&&((Vt=(pt=window.electronAPI)==null?void 0:pt.mcp)!=null&&Vt.discover)&&Le(),e&&((Ao=(Ur=window.electronAPI)==null?void 0:Ur.lsp)!=null&&Ao.getStatus)&&(Ve(),L())},[e]),x.useEffect(()=>{var rt,pt,Vt,Ur,Ao;if(!e)return;if(!((rt=window.electronAPI)!=null&&rt.updates)){Oe(Fe||"web");return}(Vt=(pt=window.electronAPI.updates).getVersion)==null||Vt.call(pt).then(Zn=>{Zn!=null&&Zn.version&&Oe(Zn.version)}).catch(()=>{});const it=(Ao=(Ur=window.electronAPI.updates).onEvent)==null?void 0:Ao.call(Ur,Zn=>{var Hr;if(Zn!=null&&Zn.type)switch(he(null),Zn.type){case"checking":te("checking"),ge(null);break;case"available":te("available"),Q(Zn.info||null),ge(null);break;case"none":te("idle"),Q(null),ge(null);break;case"progress":te("downloading"),ge(typeof((Hr=Zn==null?void 0:Zn.progress)==null?void 0:Hr.percent)=="number"?Zn.progress.percent:null);break;case"ready":te("ready"),Q(Zn.info||se),ge(null);break;case"error":te("error"),he(Zn.message||"Update error");break}});return()=>{it==null||it()}},[Fe,e,se]);const Le=async()=>{var it,rt,pt,Vt;if((rt=(it=window.electronAPI)==null?void 0:it.mcp)!=null&&rt.discover){et(!0);try{let Ur;if((Vt=(pt=window.electronAPI)==null?void 0:pt.files)!=null&&Vt.getCwd)try{const Zn=await window.electronAPI.files.getCwd();Zn!=null&&Zn.path&&(Ur=Zn.path)}catch{}const Ao=await window.electronAPI.mcp.discover(Ur);Ao.success&&Ao.discovered&&(nt(Ao.discovered),console.log("Discovered MCP servers:",Ao.discovered))}catch(Ur){console.error("Failed to discover MCP servers:",Ur)}finally{et(!1)}}},Ve=async()=>{var it,rt;if((rt=(it=window.electronAPI)==null?void 0:it.lsp)!=null&&rt.getStatus){vt(!0);try{const pt=await window.electronAPI.lsp.getStatus();pt.success&&pt.data&&Pt(pt.data)}catch(pt){console.error("Failed to load LSP status:",pt)}finally{vt(!1)}}},_e=async(it,rt)=>{var pt,Vt;if((Vt=(pt=window.electronAPI)==null?void 0:pt.lsp)!=null&&Vt.setServerEnabled)try{await window.electronAPI.lsp.setServerEnabled(it,rt),Ve()}catch(Ur){console.error("Failed to toggle LSP server:",Ur)}},W=async it=>{var rt,pt;if((pt=(rt=window.electronAPI)==null?void 0:rt.lsp)!=null&&pt.installServer){Ne(Vt=>new Set([...Vt,it]));try{const Vt=await window.electronAPI.lsp.installServer(it);Vt.success?(await Ve(),await L()):console.error("Failed to install LSP server:",Vt.error)}catch(Vt){console.error("Failed to install LSP server:",Vt)}finally{Ne(Vt=>{const Ur=new Set(Vt);return Ur.delete(it),Ur})}}},L=async()=>{var it,rt;if((rt=(it=window.electronAPI)==null?void 0:it.lsp)!=null&&rt.getCacheInfo)try{const pt=await window.electronAPI.lsp.getCacheInfo();pt.success&&pt.data&&Je({cacheSize:pt.data.cacheSize,cacheDir:pt.data.cacheDir})}catch(pt){console.error("Failed to load LSP cache info:",pt)}},F=async()=>{var it,rt;if((rt=(it=window.electronAPI)==null?void 0:it.lsp)!=null&&rt.clearCache)try{(await window.electronAPI.lsp.clearCache()).success&&(await L(),await Ve())}catch(pt){console.error("Failed to clear LSP cache:",pt)}},ce=async()=>{var rt,pt;if(!((pt=(rt=window.electronAPI)==null?void 0:rt.updates)!=null&&pt.check)){he("Updates are available only in the desktop app"),te("error");return}he(null),ge(null),te("checking");const it=await window.electronAPI.updates.check();(it==null?void 0:it.success)===!1&&(te("error"),he(it.error||"Failed to check for updates"))},we=async()=>{var rt,pt;if(!((pt=(rt=window.electronAPI)==null?void 0:rt.updates)!=null&&pt.download)){he("Updates are available only in the desktop app"),te("error");return}he(null),te("downloading"),ge(null);const it=await window.electronAPI.updates.download();(it==null?void 0:it.success)===!1&&(te("error"),he(it.error||"Failed to download update"))},ze=async()=>{var it,rt;if(!((rt=(it=window.electronAPI)==null?void 0:it.updates)!=null&&rt.install)){he("Updates are available only in the desktop app"),te("error");return}he(null),await window.electronAPI.updates.install()},Be=it=>{Yt(rt=>{const pt=new Set(rt);return pt.has(it)?pt.delete(it):pt.add(it),pt})};if(!e)return null;const ct=it=>{s({...o,...it})},ln=it=>{u(rt=>({...rt,[it]:!rt[it]}))},jt=(it,rt)=>{ct({providers:o.providers.map(pt=>pt.id===it?{...pt,apiKey:rt,verified:!1}:pt)})},fn=it=>{ct({providers:o.providers.map(rt=>rt.id===it?{...rt,enabled:!rt.enabled}:rt)})},an=async it=>{const rt=o.providers.find(pt=>pt.id===it);if(rt!=null&&rt.apiKey){ct({providers:o.providers.map(pt=>pt.id===it?{...pt,verifying:!0,verified:!1}:pt)});try{let pt=!1;it==="google"?pt=(await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${rt.apiKey}`)).ok:it==="openai"?pt=(await fetch("https://api.openai.com/v1/models",{headers:{Authorization:`Bearer ${rt.apiKey}`}})).ok:it==="anthropic"&&(pt=rt.apiKey.startsWith("sk-ant-")),ct({providers:o.providers.map(Vt=>Vt.id===it?{...Vt,verifying:!1,verified:pt}:Vt)})}catch{ct({providers:o.providers.map(pt=>pt.id===it?{...pt,verifying:!1,verified:!1}:pt)})}}},Wa=async(it,rt)=>{var pt;if(!((pt=window.electronAPI)!=null&&pt.oauth)){_("OAuth is only available in the desktop app");return}v(!0),_(null);try{const Vt=await window.electronAPI.oauth.startLogin(it);if(Vt.success)if(Vt.autoCompleted){if(Vt.mode==="api-key"&&Vt.apiKey)ct({providers:o.providers.map(Ur=>Ur.id==="anthropic"?{...Ur,apiKey:Vt.apiKey,verified:!0,enabled:!0}:Ur)});else if(Vt.mode==="oauth"){const Ur=await window.electronAPI.oauth.getStatus();P(Ur),ct({claudeCodeAuthenticated:!0,claudeCodeExpiresAt:Ur.expiresAt,models:o.models.map(Ao=>Ao.provider==="claude-code"?{...Ao,enabled:!0}:Ao)})}k(null),D("")}else k({mode:it,createKey:rt}),D("");else _(Vt.error||"Failed to start OAuth flow")}catch(Vt){_(Vt instanceof Error?Vt.message:"Unknown error")}finally{v(!1)}},An=async()=>{var it;if(!(!((it=window.electronAPI)!=null&&it.oauth)||!T)){v(!0),_(null);try{const rt=await window.electronAPI.oauth.completeLogin(M,T.createKey);if(rt.success){if(rt.mode==="api-key"&&rt.apiKey)ct({providers:o.providers.map(pt=>pt.id==="anthropic"?{...pt,apiKey:rt.apiKey,verified:!0,enabled:!0}:pt)});else if(rt.mode==="oauth"){const pt=await window.electronAPI.oauth.getStatus();P(pt),ct({claudeCodeAuthenticated:!0,claudeCodeExpiresAt:pt.expiresAt,models:o.models.map(Vt=>Vt.provider==="claude-code"?{...Vt,enabled:!0}:Vt)})}k(null),D("")}else _(rt.error||"Failed to complete OAuth flow")}catch(rt){_(rt instanceof Error?rt.message:"Unknown error")}finally{v(!1)}}},er=async()=>{var it;(it=window.electronAPI)!=null&&it.oauth&&await window.electronAPI.oauth.cancel(),k(null),D(""),_(null)},wt=async()=>{var it;if((it=window.electronAPI)!=null&&it.oauth)try{await window.electronAPI.oauth.logout(),P({authenticated:!1,expiresAt:null}),ct({claudeCodeAuthenticated:!1,claudeCodeExpiresAt:null,models:o.models.map(rt=>rt.provider==="claude-code"?{...rt,enabled:!1}:rt)})}catch(rt){_(rt instanceof Error?rt.message:"Unknown error")}},sn=async()=>{var it,rt;if((rt=(it=window.electronAPI)==null?void 0:it.oauth)!=null&&rt.testApi){H(!0),U(null);try{const pt=await window.electronAPI.oauth.testApi();pt.success?(U({success:!0,message:"API call succeeded!"}),fo.general.log("API Test Response:",pt.response)):(U({success:!1,message:pt.error||"API call failed"}),fo.general.log("API Test Error:",pt.error))}catch(pt){U({success:!1,message:pt instanceof Error?pt.message:"Unknown error"})}finally{H(!1)}}},ye=async()=>{var it;if(!((it=window.electronAPI)!=null&&it.codex)){_("Codex OAuth is only available in the desktop app");return}X(!0),_(null);try{const rt=await window.electronAPI.codex.startLogin();if(rt.success){if(rt.autoCompleted){const pt=await window.electronAPI.codex.getStatus();z(pt),ct({codexAuthenticated:!0,codexExpiresAt:pt.expiresAt,models:o.models.map(Vt=>Vt.provider==="codex"?{...Vt,enabled:!0}:Vt)})}}else _(rt.error||"Failed to start Codex OAuth flow")}catch(rt){_(rt instanceof Error?rt.message:"Unknown error")}finally{X(!1)}},Ue=async()=>{var it;if((it=window.electronAPI)!=null&&it.codex)try{await window.electronAPI.codex.logout(),z({authenticated:!1,expiresAt:null}),ct({codexAuthenticated:!1,codexExpiresAt:null,models:o.models.map(rt=>rt.provider==="codex"?{...rt,enabled:!1}:rt)})}catch(rt){_(rt instanceof Error?rt.message:"Unknown error")}},ht=async()=>{var it,rt;if((rt=(it=window.electronAPI)==null?void 0:it.codex)!=null&&rt.testApi){ie(!0),ee(null);try{const pt=await window.electronAPI.codex.testApi();pt.success?(ee({success:!0,message:"Codex API call succeeded!"}),fo.general.log("Codex API Test Response:",pt.response)):(ee({success:!1,message:pt.error||"Codex API call failed"}),fo.general.log("Codex API Test Error:",pt.error))}catch(pt){ee({success:!1,message:pt instanceof Error?pt.message:"Unknown error"})}finally{ie(!1)}}},Jt=it=>{ct({models:o.models.map(rt=>rt.id===it?{...rt,enabled:!rt.enabled}:rt)})},mr=it=>{ct({connections:o.connections.map(rt=>rt.id===it?{...rt,enabled:!rt.enabled}:rt)})},Kn=it=>{ct({connections:o.connections.filter(rt=>rt.id!==it)})},Rt=it=>{if(it==="claude-code")return"Claude Code (OAuth)";if(it==="codex")return"Codex (ChatGPT Plus/Pro)";const rt=o.providers.find(pt=>pt.id===it);return(rt==null?void 0:rt.name)||it},zt=it=>{const rt=o.providers.find(pt=>pt.id===it);return(rt==null?void 0:rt.enabled)&&!!(rt!=null&&rt.apiKey)},hn=()=>{var it,rt,pt,Vt,Ur,Ao,Zn,Hr,ua;switch(a){case"general":return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Startup"}),h.jsxs("label",{className:"flex items-center justify-between py-2",children:[h.jsx("span",{className:`text-sm ${n?"text-neutral-300":"text-stone-600"}`,children:"Auto-connect on launch"}),h.jsx("button",{onClick:()=>ct({autoConnect:!o.autoConnect}),className:`w-10 h-6 rounded-full transition-colors relative ${o.autoConnect?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${o.autoConnect?"left-5":"left-1"}`})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Updates"}),h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{children:[h.jsxs("p",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:["Current version: ",Fe||"unknown"]}),h.jsxs("p",{className:`text-xs mt-1 ${n?"text-neutral-500":"text-stone-500"}`,children:[K==="available"&&h.jsxs(h.Fragment,{children:["Update available",se!=null&&se.version?` (${se.version})`:""]}),K==="checking"&&"Checking for updates...",K==="downloading"&&"Downloading update...",K==="ready"&&"Update downloaded. Restart to install.",K==="idle"&&"Manual checks only. No auto-downloads.",K==="error"&&(Ce||"Update error"),!((it=window.electronAPI)!=null&&it.updates)&&"Updates are only available in the desktop app."]})]}),K==="downloading"&&h.jsx("div",{className:`text-xs px-2 py-1 rounded ${n?"bg-blue-500/20 text-blue-200":"bg-blue-50 text-blue-600"}`,children:`${Math.round(Te||0)}%`}),K==="available"&&(se==null?void 0:se.version)&&h.jsx("div",{className:`text-xs px-2 py-1 rounded ${n?"bg-emerald-500/20 text-emerald-200":"bg-emerald-50 text-emerald-700"}`,children:`v${se.version}`}),K==="ready"&&h.jsx("div",{className:`text-xs px-2 py-1 rounded ${n?"bg-emerald-500/20 text-emerald-200":"bg-emerald-50 text-emerald-700"}`,children:"Downloaded"})]}),h.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[h.jsxs("button",{onClick:ce,disabled:K==="checking"||K==="downloading"||!((rt=window.electronAPI)!=null&&rt.updates),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${K==="checking"||K==="downloading"||!((pt=window.electronAPI)!=null&&pt.updates)?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[K==="checking"?h.jsx(ho,{size:14,className:"animate-spin"}):h.jsx(p0,{size:14}),"Check for updates"]}),h.jsxs("button",{onClick:we,disabled:K!=="available"&&K!=="downloading"||!((Vt=window.electronAPI)!=null&&Vt.updates),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${K!=="available"&&K!=="downloading"||!((Ur=window.electronAPI)!=null&&Ur.updates)?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:[K==="downloading"?h.jsx(ho,{size:14,className:"animate-spin"}):h.jsx(Y_,{size:14}),K==="downloading"&&typeof Te=="number"?`Downloading (${Math.round(Te)}%)`:"Download update"]}),h.jsxs("button",{onClick:ze,disabled:K!=="ready"||!((Ao=window.electronAPI)!=null&&Ao.updates),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${K!=="ready"||!((Zn=window.electronAPI)!=null&&Zn.updates)?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-purple-500/10 text-purple-300 hover:bg-purple-500/20":"bg-purple-50 text-purple-600 hover:bg-purple-100"}`,children:[h.jsx(ax,{size:14}),"Restart to install"]})]}),Ce&&h.jsx("p",{className:`text-xs mt-2 ${n?"text-red-400":"text-red-600"}`,children:Ce})]})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Privacy"}),h.jsxs("label",{className:"flex items-center justify-between py-2",children:[h.jsxs("div",{children:[h.jsx("span",{className:`text-sm ${n?"text-neutral-300":"text-stone-600"}`,children:"Send anonymous usage data"}),h.jsx("p",{className:`text-xs mt-0.5 ${n?"text-neutral-500":"text-stone-400"}`,children:"Help improve Cluso by sharing anonymous analytics"})]}),h.jsx("button",{onClick:()=>ct({sendAnalytics:!o.sendAnalytics}),className:`w-10 h-6 rounded-full transition-colors relative flex-shrink-0 ml-4 ${o.sendAnalytics?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${o.sendAnalytics?"left-5":"left-1"}`})})]})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Data"}),h.jsx("button",{className:`text-sm px-3 py-2 rounded-lg transition-colors ${n?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:"Clear all local data"})]})]});case"display":return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Theme"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:()=>n&&r(),className:`flex-1 flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${n?"border-neutral-700 hover:border-neutral-600":"border-blue-500 bg-blue-50 ring-2 ring-blue-500/20"}`,children:[h.jsx(kq,{size:24,className:n?"text-neutral-400":"text-blue-500"}),h.jsx("span",{className:`text-sm font-medium ${n?"text-neutral-400":"text-blue-600"}`,children:"Light"})]}),h.jsxs("button",{onClick:()=>!n&&r(),className:`flex-1 flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${n?"border-blue-500 bg-blue-500/10 ring-2 ring-blue-500/20":"border-stone-200 hover:border-stone-300"}`,children:[h.jsx(_q,{size:24,className:n?"text-blue-400":"text-stone-400"}),h.jsx("span",{className:`text-sm font-medium ${n?"text-blue-400":"text-stone-400"}`,children:"Dark"})]})]})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Font Size"}),h.jsx("div",{className:"flex gap-2",children:["small","medium","large"].map(kt=>h.jsx("button",{onClick:()=>ct({fontSize:kt}),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${o.fontSize===kt?"bg-blue-500 text-white":n?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,style:{fontSize:Tte[kt]},children:kt.charAt(0).toUpperCase()+kt.slice(1)},kt))}),h.jsx("p",{className:`text-xs mt-2 ${n?"text-neutral-500":"text-stone-400"}`,children:"Affects chat messages and code blocks"})]}),h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"}`}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${n?"text-neutral-200":"text-stone-800"}`,children:"Code Editor"}),h.jsxs("label",{className:"flex items-center justify-between py-2",children:[h.jsx("span",{className:`text-sm ${n?"text-neutral-300":"text-stone-600"}`,children:"Show line numbers"}),h.jsx("button",{onClick:()=>ct({showLineNumbers:!o.showLineNumbers}),className:`w-10 h-6 rounded-full transition-colors relative ${o.showLineNumbers?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${o.showLineNumbers?"left-5":"left-1"}`})})]})]})]});case"providers":return h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:`text-sm ${n?"text-neutral-400":"text-stone-500"}`,children:"Configure API providers for AI models. Add your API keys to enable different providers."}),w&&h.jsx("div",{className:`p-3 rounded-lg ${n?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fN,{size:16}),h.jsx("span",{className:"text-sm",children:w}),h.jsx("button",{onClick:()=>_(null),className:"ml-auto",children:h.jsx(qr,{size:14})})]})}),T&&h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-blue-500/30 bg-blue-500/10":"border-blue-200 bg-blue-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(QP,{size:16,className:n?"text-blue-400":"text-blue-600"}),h.jsx("span",{className:`text-sm font-medium ${n?"text-blue-300":"text-blue-700"}`,children:"Enter OAuth Code"})]}),h.jsx("p",{className:`text-xs mb-3 ${n?"text-blue-400":"text-blue-600"}`,children:"A browser window opened. After authorizing, copy the code and paste it here."}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:M,onChange:kt=>D(kt.target.value),placeholder:"Paste authorization code...",className:`flex-1 px-3 py-2 rounded-lg text-sm ${n?"bg-neutral-700 border-neutral-600 text-neutral-200 placeholder-neutral-500":"bg-white border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`}),h.jsxs("button",{onClick:An,disabled:!M||y,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${M?n?"bg-purple-500 text-white hover:bg-purple-600":"bg-purple-600 text-white hover:bg-purple-700":n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed"}`,children:[y?h.jsx(ho,{size:14,className:"animate-spin"}):h.jsx(Co,{size:14}),"Complete"]}),h.jsx("button",{onClick:er,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,children:"Cancel"})]})]}),h.jsx("div",{className:"space-y-3",children:o.providers.map(kt=>{var Fn;return h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${kt.enabled&&kt.apiKey?"bg-green-500/10 text-green-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(xq,{size:16})}),h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:kt.name}),kt.verified&&h.jsx(cd,{size:16,className:"text-green-500"})]}),h.jsx("button",{onClick:()=>fn(kt.id),className:`w-10 h-6 rounded-full transition-colors relative ${kt.enabled?"bg-green-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${kt.enabled?"left-5":"left-1"}`})})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"flex-1 relative",children:[h.jsx("input",{type:c[kt.id]?"text":"password",value:kt.apiKey,onChange:mt=>jt(kt.id,mt.target.value),placeholder:"Enter API key...",className:`w-full px-3 py-2 pr-10 rounded-lg text-sm ${n?"bg-neutral-700 border-neutral-600 text-neutral-200 placeholder-neutral-500":"bg-white border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-blue-500/50`}),h.jsx("button",{onClick:()=>ln(kt.id),className:`absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded ${n?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,children:c[kt.id]?h.jsx(wq,{size:16}):h.jsx(uR,{size:16})})]}),h.jsxs("button",{onClick:()=>an(kt.id),disabled:!kt.apiKey||kt.verifying,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${kt.apiKey?kt.verified?"bg-green-500/10 text-green-500":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100":n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed"}`,children:[kt.verifying?h.jsx(ho,{size:14,className:"animate-spin"}):kt.verified?h.jsx(cd,{size:14}):h.jsx(Co,{size:14}),kt.verifying?"Verifying":kt.verified?"Verified":"Verify"]})]}),kt.id==="anthropic"&&((Fn=window.electronAPI)==null?void 0:Fn.oauth)&&h.jsxs("div",{className:`mt-3 pt-3 border-t ${n?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("button",{onClick:()=>Wa("console",!0),disabled:y||!!T,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${y||T?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-orange-500/10 text-orange-400 hover:bg-orange-500/20":"bg-orange-50 text-orange-600 hover:bg-orange-100"}`,children:[y?h.jsx(ho,{size:14,className:"animate-spin"}):h.jsx(QP,{size:14}),"Get API Key via OAuth"]}),h.jsx("p",{className:`text-xs mt-1.5 ${n?"text-neutral-500":"text-stone-400"}`,children:"Use your Anthropic Console account to create an API key"})]})]},kt.id)})}),((Hr=window.electronAPI)==null?void 0:Hr.oauth)&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"} my-4`}),h.jsxs("div",{className:`p-4 rounded-xl border ${I.authenticated?n?"border-blue-500/30 bg-blue-500/10":"border-blue-200 bg-blue-50":n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${I.authenticated?"bg-blue-500/20 text-blue-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(fR,{size:16})}),h.jsxs("div",{children:[h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"Claude Code"}),h.jsx("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:"Use Claude with your Pro/Max subscription"})]})]}),I.authenticated&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(cd,{size:16,className:"text-blue-500"}),h.jsx("span",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:"Connected"})]})]}),I.authenticated?h.jsxs("div",{className:"space-y-3",children:[I.expiresAt&&h.jsxs("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:["Token expires: ",new Date(I.expiresAt).toLocaleString()]}),h.jsxs("button",{onClick:sn,disabled:j,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${j?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[j?h.jsx(ho,{size:14,className:"animate-spin"}):h.jsx(Co,{size:14}),"Test API Call (Direct)"]}),B&&h.jsx("p",{className:`text-xs ${B.success?n?"text-green-400":"text-green-600":n?"text-red-400":"text-red-600"}`,children:B.message}),h.jsxs("button",{onClick:wt,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:[h.jsx(tL,{size:14}),"Disconnect"]})]}):h.jsxs("button",{onClick:()=>Wa("max",!1),disabled:y||!!T,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${y||T?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-purple-500 text-white hover:bg-purple-600":"bg-purple-600 text-white hover:bg-purple-700"}`,children:[y?h.jsx(ho,{size:14,className:"animate-spin"}):h.jsx(eL,{size:14}),"Login with Claude Pro/Max"]})]})]}),((ua=window.electronAPI)==null?void 0:ua.codex)&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`border-t ${n?"border-neutral-700":"border-stone-200"} my-4`}),h.jsxs("div",{className:`p-4 rounded-xl border ${q.authenticated?n?"border-blue-500/30 bg-blue-500/10":"border-blue-200 bg-blue-50":n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${q.authenticated?"bg-blue-500/20 text-blue-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(Ac,{size:16})}),h.jsxs("div",{children:[h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"Codex"}),h.jsx("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:"Use ChatGPT with your Plus/Pro subscription"})]})]}),q.authenticated&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(cd,{size:16,className:"text-blue-500"}),h.jsx("span",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:"Connected"})]})]}),q.authenticated?h.jsxs("div",{className:"space-y-3",children:[q.expiresAt&&h.jsxs("p",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:["Token expires: ",new Date(q.expiresAt).toLocaleString()]}),h.jsxs("button",{onClick:ht,disabled:re,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${re?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[re?h.jsx(ho,{size:14,className:"animate-spin"}):h.jsx(Co,{size:14}),"Test API Call (Direct)"]}),J&&h.jsx("p",{className:`text-xs ${J.success?n?"text-green-400":"text-green-600":n?"text-red-400":"text-red-600"}`,children:J.message}),h.jsxs("button",{onClick:Ue,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:[h.jsx(tL,{size:14}),"Disconnect"]})]}):h.jsxs("button",{onClick:ye,disabled:Z,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${Z?n?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-100 text-stone-400 cursor-not-allowed":n?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-emerald-600 text-white hover:bg-emerald-700"}`,children:[Z?h.jsx(ho,{size:14,className:"animate-spin"}):h.jsx(eL,{size:14}),"Login with ChatGPT Plus/Pro"]})]})]})]});case"models":return h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:`text-sm ${n?"text-neutral-400":"text-stone-500"}`,children:"Select which models are available in the model picker. Models require their provider to be configured."}),["google","openai","anthropic","claude-code","codex"].map(kt=>{const Fn=o.models.filter(Xr=>Xr.provider===kt);if(Fn.length===0)return null;const mt=kt==="claude-code"?I.authenticated:kt==="codex"?q.authenticated:zt(kt);return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("h4",{className:`text-sm font-medium ${n?"text-neutral-300":"text-stone-700"}`,children:Rt(kt)}),!mt&&h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${n?"bg-yellow-500/10 text-yellow-400":"bg-yellow-50 text-yellow-600"}`,children:kt==="claude-code"||kt==="codex"?"Login with OAuth first":"Configure API key first"})]}),h.jsx("div",{className:"space-y-1",children:Fn.map(Xr=>h.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"} ${mt?"":"opacity-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${Xr.enabled&&mt?"bg-blue-500/10 text-blue-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:h.jsx(f1,{size:16})}),h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:Xr.name})]}),h.jsx("button",{onClick:()=>Jt(Xr.id),disabled:!mt,className:`w-10 h-6 rounded-full transition-colors relative ${Xr.enabled&&mt?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"} ${mt?"":"cursor-not-allowed"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${Xr.enabled&&mt?"left-5":"left-1"}`})})]},Xr.id))})]},kt)})]});case"mcp":return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"MCP Servers"}),h.jsx("p",{className:`text-xs mt-0.5 ${n?"text-neutral-500":"text-stone-400"}`,children:"Connect to Model Context Protocol servers for extended AI capabilities"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{onClick:Le,disabled:ue,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${n?"bg-neutral-700 text-neutral-300 hover:bg-neutral-600":"bg-stone-100 text-stone-600 hover:bg-stone-200"} ${ue?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx(p0,{size:14,className:ue?"animate-spin":""}),ue?"Discovering...":"Refresh"]}),h.jsxs("button",{onClick:()=>{const Fn={id:`mcp_${Date.now()}`,name:"New MCP Server",type:"mcp",transport:{type:"stdio",command:"npx",args:["-y","@your/mcp-server"]},enabled:!1,status:"disconnected"};ct({connections:[...o.connections,Fn]})},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${n?"bg-purple-500/10 text-purple-400 hover:bg-purple-500/20":"bg-purple-50 text-purple-600 hover:bg-purple-100"}`,children:[h.jsx(qf,{size:14}),"Add Server"]})]})]}),Object.keys(Re).length>0&&h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("p",{className:`text-sm font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:["Discovered Servers (",Object.keys(Re).length,")"]})}),Object.entries(Re).map(([kt,Fn])=>{var rr;const mt=Fn.name,Xr=!ut.has(mt),Ps=Fn.config.type==="stdio";return h.jsx("div",{className:`p-4 rounded-xl border transition-opacity ${Xr?n?"border-blue-500/30 bg-blue-500/5":"border-blue-200 bg-blue-50/50":n?"border-neutral-700 bg-neutral-800/30 opacity-60":"border-stone-200 bg-stone-50 opacity-60"}`,children:h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[h.jsx("span",{className:`font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:mt}),h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold uppercase tracking-wide ${n?"bg-neutral-700 text-neutral-300":"bg-stone-200 text-stone-600"}`,children:Fn.source}),h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Ps?n?"bg-blue-500/10 text-blue-400":"bg-blue-50 text-blue-600":n?"bg-orange-500/10 text-orange-400":"bg-orange-50 text-orange-600"}`,children:Ps?"STDIO":"SSE"})]}),h.jsx("p",{className:`mt-1 text-xs truncate ${n?"text-neutral-500":"text-stone-400"}`,children:Ps?`${Fn.config.command}${(rr=Fn.config.args)!=null&&rr.length?` ${Fn.config.args.join(" ")}`:""}`:Fn.config.url}),Fn.tools&&Fn.tools.length>0&&h.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[Fn.tools.slice(0,5).map(ft=>h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,title:ft.description,children:ft.displayName},ft.name)),Fn.tools.length>5&&h.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-500"}`,children:["+",Fn.tools.length-5," more"]})]}),Fn.error&&h.jsx("p",{className:`mt-1 text-xs ${n?"text-red-400":"text-red-600"}`,children:Fn.error})]}),h.jsx("button",{onClick:()=>Be(mt),className:`relative w-10 h-5 rounded-full transition-colors ${Xr?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ${Xr?"left-5":"left-0.5"}`})})]})},kt)})]}),o.connections.filter(kt=>kt.type==="mcp").length>0&&h.jsxs("p",{className:`text-sm font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:["Configured Servers (",o.connections.filter(kt=>kt.type==="mcp").length,")"]}),h.jsxs("div",{className:"space-y-3",children:[o.connections.filter(kt=>kt.type==="mcp").map(kt=>{var rr,ft;const Fn=kt;let mt;if(!("transport"in kt)&&Fn.url)mt={...kt,type:"mcp",transport:{type:"sse",url:Fn.url}};else if("transport"in kt)mt=kt;else return null;const Xr=mt.transport.type==="stdio",Ps=mt.status==="connected"?"green":mt.status==="connecting"?"yellow":mt.status==="error"?"red":"neutral";return h.jsxs("div",{className:`p-4 rounded-xl border ${n?"border-neutral-700 bg-neutral-800/50":"border-stone-200 bg-stone-50"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${mt.status==="connected"?"bg-green-500/10 text-green-500":mt.status==="connecting"?"bg-yellow-500/10 text-yellow-500":mt.status==="error"?"bg-red-500/10 text-red-500":n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400"}`,children:Xr?h.jsx(ud,{size:16}):h.jsx($f,{size:16})}),h.jsxs("div",{children:[h.jsx("input",{type:"text",value:mt.name,onChange:Nt=>{ct({connections:o.connections.map(pn=>pn.id===mt.id?{...pn,name:Nt.target.value}:pn)})},className:`font-medium bg-transparent border-none outline-none ${n?"text-neutral-200":"text-stone-800"}`}),h.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Xr?n?"bg-blue-500/10 text-blue-400":"bg-blue-50 text-blue-600":n?"bg-orange-500/10 text-orange-400":"bg-orange-50 text-orange-600"}`,children:Xr?"STDIO":"SSE"}),mt.status&&mt.status!=="disconnected"&&h.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded flex items-center gap-1 ${Ps==="green"?n?"bg-green-500/10 text-green-400":"bg-green-50 text-green-600":Ps==="yellow"?n?"bg-yellow-500/10 text-yellow-400":"bg-yellow-50 text-yellow-600":Ps==="red"?n?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600":""}`,children:[mt.status==="connecting"&&h.jsx(ho,{size:10,className:"animate-spin"}),mt.status==="connected"&&h.jsx(cd,{size:10}),mt.status==="error"&&h.jsx(_0,{size:10}),mt.status]}),mt.toolCount!==void 0&&mt.status==="connected"&&h.jsxs("span",{className:`text-xs flex items-center gap-1 ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(Nq,{size:10}),mt.toolCount," tools"]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[((rr=window.electronAPI)==null?void 0:rr.mcp)&&h.jsx("button",{onClick:async()=>{var pn;const Nt=(pn=window.electronAPI)==null?void 0:pn.mcp;if(Nt)if(mt.status==="connected"||mt.status==="connecting")await Nt.disconnect(mt.id),ct({connections:o.connections.map(wn=>wn.id===mt.id?{...wn,status:"disconnected",toolCount:void 0,error:void 0}:wn)});else{ct({connections:o.connections.map(wn=>wn.id===mt.id?{...wn,status:"connecting",error:void 0}:wn)});try{const wn=await Nt.connect({id:mt.id,name:mt.name,transport:mt.transport,enabled:!0});if(wn.success){const kr=await Nt.listTools(mt.id);ct({connections:o.connections.map(Wo=>{var hs;return Wo.id===mt.id?{...Wo,status:"connected",toolCount:((hs=kr.tools)==null?void 0:hs.length)||0,error:void 0}:Wo})})}else ct({connections:o.connections.map(kr=>kr.id===mt.id?{...kr,status:"error",error:wn.error}:kr)})}catch(wn){ct({connections:o.connections.map(kr=>kr.id===mt.id?{...kr,status:"error",error:wn instanceof Error?wn.message:"Connection failed"}:kr)})}}},className:`p-1.5 rounded-lg transition-colors ${mt.status==="connected"||mt.status==="connecting"?n?"text-red-400 hover:bg-red-500/10":"text-red-500 hover:bg-red-50":n?"text-green-400 hover:bg-green-500/10":"text-green-500 hover:bg-green-50"}`,title:mt.status==="connected"?"Disconnect":mt.status==="connecting"?"Cancel":"Connect",children:mt.status==="connecting"?h.jsx(fN,{size:14}):mt.status==="connected"?h.jsx(Cq,{size:14}):h.jsx(gN,{size:14})}),h.jsx("button",{onClick:()=>Kn(mt.id),className:`p-1.5 rounded-lg transition-colors ${n?"text-neutral-500 hover:bg-red-500/10 hover:text-red-400":"text-stone-400 hover:bg-red-50 hover:text-red-500"}`,children:h.jsx(Ff,{size:14})}),h.jsx("button",{onClick:()=>mr(mt.id),className:`w-10 h-6 rounded-full transition-colors relative ${mt.enabled?"bg-purple-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${mt.enabled?"left-5":"left-1"}`})})]})]}),mt.error&&h.jsx("div",{className:`text-xs px-3 py-2 rounded-lg mb-3 ${n?"bg-red-500/10 text-red-400":"bg-red-50 text-red-600"}`,children:mt.error}),h.jsxs("div",{className:`space-y-2 p-3 rounded-lg ${n?"bg-neutral-900/50":"bg-white"}`,children:[h.jsxs("div",{className:"flex gap-2 mb-3",children:[h.jsxs("button",{onClick:()=>{ct({connections:o.connections.map(Nt=>Nt.id===mt.id?{...Nt,transport:{type:"stdio",command:"npx",args:["-y","@your/mcp-server"]}}:Nt)})},className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${Xr?n?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-blue-100 text-blue-700 border border-blue-200":n?"bg-neutral-800 text-neutral-400 border border-neutral-700 hover:border-neutral-600":"bg-stone-100 text-stone-500 border border-stone-200 hover:border-stone-300"}`,children:[h.jsx(ud,{size:14}),"stdio"]}),h.jsxs("button",{onClick:()=>{ct({connections:o.connections.map(Nt=>Nt.id===mt.id?{...Nt,transport:{type:"sse",url:"http://localhost:3001"}}:Nt)})},className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${Xr?n?"bg-neutral-800 text-neutral-400 border border-neutral-700 hover:border-neutral-600":"bg-stone-100 text-stone-500 border border-stone-200 hover:border-stone-300":n?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"bg-orange-100 text-orange-700 border border-orange-200"}`,children:[h.jsx($f,{size:14}),"SSE/HTTP"]})]}),Xr&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Command"}),h.jsx("input",{type:"text",value:mt.transport.command,onChange:Nt=>{ct({connections:o.connections.map(pn=>pn.id===mt.id?{...pn,transport:{...mt.transport,command:Nt.target.value}}:pn)})},placeholder:"npx, node, python, etc.",className:`w-full mt-1 px-3 py-2 rounded-lg text-sm ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`})]}),h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Arguments (one per line)"}),h.jsx("textarea",{value:((ft=mt.transport.args)==null?void 0:ft.join(`
`))||"",onChange:Nt=>{const pn=Nt.target.value.split(`
`).filter(wn=>wn.trim());ct({connections:o.connections.map(wn=>wn.id===mt.id?{...wn,transport:{...mt.transport,args:pn}}:wn)})},placeholder:`claude
mcp
serve`,rows:3,className:`w-full mt-1 px-3 py-2 rounded-lg text-sm font-mono ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`})]})]}),!Xr&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Server URL"}),h.jsx("input",{type:"text",value:mt.transport.url,onChange:Nt=>{ct({connections:o.connections.map(pn=>pn.id===mt.id?{...pn,transport:{...mt.transport,url:Nt.target.value}}:pn)})},placeholder:"http://localhost:3001",className:`w-full mt-1 px-3 py-2 rounded-lg text-sm ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`})]}),h.jsxs("div",{children:[h.jsx("label",{className:`text-xs font-medium ${n?"text-neutral-400":"text-stone-500"}`,children:"Headers (JSON)"}),h.jsx("input",{type:"text",value:JSON.stringify(mt.transport.headers||{}),onChange:Nt=>{try{const pn=JSON.parse(Nt.target.value||"{}");ct({connections:o.connections.map(wn=>wn.id===mt.id?{...wn,transport:{...mt.transport,headers:pn}}:wn)})}catch{}},placeholder:'{"Authorization": "Bearer token"}',className:`w-full mt-1 px-3 py-2 rounded-lg text-sm font-mono ${n?"bg-neutral-800 border-neutral-700 text-neutral-200 placeholder-neutral-500":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"} border focus:outline-none focus:ring-2 focus:ring-purple-500/50`}),h.jsx("p",{className:`text-xs mt-1 ${n?"text-neutral-500":"text-stone-400"}`,children:"Optional auth headers for remote servers"})]})]})]})]},mt.id)}),o.connections.filter(kt=>kt.type==="mcp").length===0&&h.jsxs("div",{className:`text-center py-8 rounded-xl border-2 border-dashed ${n?"border-neutral-700 text-neutral-500":"border-stone-200 text-stone-400"}`,children:[h.jsx(J1e,{size:32,className:"mx-auto mb-2 opacity-50"}),h.jsx("p",{children:"No MCP servers configured"}),h.jsx("p",{className:`text-xs mt-1 ${n?"text-neutral-600":"text-stone-300"}`,children:"Add a server to extend AI capabilities with custom tools"})]})]}),h.jsx("div",{className:`p-3 rounded-lg ${n?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-100"}`,children:h.jsxs("p",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:[h.jsx("strong",{children:"MCP (Model Context Protocol)"})," servers extend AI capabilities with custom tools. Use ",h.jsx("strong",{children:"stdio"})," for local servers (npx, node, python) or ",h.jsx("strong",{children:"SSE"})," for remote HTTP servers."]})})]});case"lsp":return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"Language Servers"}),h.jsx("p",{className:`text-xs mt-1 ${n?"text-neutral-500":"text-stone-400"}`,children:"LSP servers provide code intelligence in the background"})]}),h.jsx("button",{onClick:Ve,disabled:tn,className:`p-2 rounded-lg transition-colors ${n?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"} ${tn?"animate-spin":""}`,children:h.jsx(p0,{size:16})})]}),h.jsx("div",{className:"space-y-3",children:tn&&Ht.length===0?h.jsxs("div",{className:`p-4 text-center ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(ho,{size:20,className:"animate-spin mx-auto mb-2"}),h.jsx("p",{className:"text-sm",children:"Loading language servers..."})]}):Ht.length===0?h.jsxs("div",{className:`p-4 text-center ${n?"text-neutral-500":"text-stone-400"}`,children:[h.jsx(ud,{size:24,className:"mx-auto mb-2 opacity-50"}),h.jsx("p",{className:"text-sm",children:"No language servers available"})]}):Ht.map(kt=>h.jsxs("div",{className:`p-4 rounded-lg border ${n?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${kt.running?"bg-green-500":kt.installed?"bg-yellow-500":"bg-neutral-500"}`}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:kt.name}),kt.running&&h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${n?"bg-green-500/20 text-green-400":"bg-green-100 text-green-700"}`,children:"Running"}),!kt.installed&&kt.installable&&h.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${n?"bg-yellow-500/20 text-yellow-400":"bg-yellow-100 text-yellow-700"}`,children:"Not installed"})]}),h.jsx("div",{className:`text-xs mt-0.5 ${n?"text-neutral-500":"text-stone-400"}`,children:kt.extensions.join(", ")})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[!kt.installed&&kt.installable&&h.jsx("button",{onClick:()=>W(kt.id),disabled:me.has(kt.id),className:`px-2.5 py-1 text-xs font-medium rounded-lg flex items-center gap-1.5 transition-colors ${me.has(kt.id)?n?"bg-neutral-700 text-neutral-400":"bg-stone-200 text-stone-400":n?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:me.has(kt.id)?h.jsxs(h.Fragment,{children:[h.jsx(ho,{size:12,className:"animate-spin"}),"Installing..."]}):h.jsxs(h.Fragment,{children:[h.jsx(Y_,{size:12}),"Install"]})}),h.jsx("button",{onClick:()=>_e(kt.id,!kt.enabled),className:`w-10 h-6 rounded-full transition-colors relative ${kt.enabled?"bg-blue-500":n?"bg-neutral-600":"bg-stone-300"}`,children:h.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${kt.enabled?"left-5":"left-1"}`})})]})]}),kt.running&&kt.instances.length>0&&h.jsx("div",{className:`mt-3 pt-3 border-t ${n?"border-neutral-700":"border-stone-200"}`,children:h.jsx("div",{className:"space-y-1",children:kt.instances.map((Fn,mt)=>h.jsxs("div",{className:`flex items-center justify-between text-xs ${n?"text-neutral-400":"text-stone-500"}`,children:[h.jsx("span",{className:"font-mono truncate max-w-[200px]",title:Fn.root,children:Fn.root.split("/").pop()}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{children:[Fn.openDocuments," files"]}),Fn.diagnosticCount>0&&h.jsxs("span",{className:`flex items-center gap-1 ${n?"text-yellow-400":"text-yellow-600"}`,children:[h.jsx(_0,{size:12}),Fn.diagnosticCount]})]})]},mt))})})]},kt.id))}),$e&&$e.cacheSize>0&&h.jsx("div",{className:`p-4 rounded-lg border ${n?"bg-neutral-800/50 border-neutral-700":"bg-stone-50 border-stone-200"}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(ax,{size:16,className:n?"text-neutral-400":"text-stone-500"}),h.jsxs("div",{children:[h.jsx("div",{className:`text-sm font-medium ${n?"text-neutral-200":"text-stone-800"}`,children:"LSP Cache"}),h.jsxs("div",{className:`text-xs ${n?"text-neutral-500":"text-stone-400"}`,children:[($e.cacheSize/1024/1024).toFixed(1)," MB used"]})]})]}),h.jsxs("button",{onClick:F,className:`px-2.5 py-1 text-xs font-medium rounded-lg flex items-center gap-1.5 transition-colors ${n?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[h.jsx(Ff,{size:12}),"Clear Cache"]})]})}),h.jsx("div",{className:`p-3 rounded-lg ${n?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-100"}`,children:h.jsxs("p",{className:`text-xs ${n?"text-blue-400":"text-blue-600"}`,children:[h.jsx("strong",{children:"Language Servers"})," provide real-time diagnostics, completions, and code navigation. They run in the background and activate automatically based on file types."]})})]});case"themes":{const kt=rr=>{if(!rr.colors)return!1;const ft=rr.colors.background,Nt=parseInt(ft.slice(1,3),16),pn=parseInt(ft.slice(3,5),16),wn=parseInt(ft.slice(5,7),16);return(.299*Nt+.587*pn+.114*wn)/255>.5},Fn=g.find(rr=>rr.id==="system-default"),mt=g.filter(rr=>rr.id!=="system-default"&&!kt(rr)),Xr=g.filter(rr=>rr.id!=="system-default"&&kt(rr)),Ps=rr=>{var Wo,hs,Zs,zr;const ft=f.id===rr.id,Nt=((Wo=rr.colors)==null?void 0:Wo.background)||(n?"#1a1b26":"#d6d3d1"),pn=((hs=rr.colors)==null?void 0:hs.foreground)||(n?"#c0caf5":"#171717"),wn=((Zs=rr.colors)==null?void 0:Zs.primary)||"#7aa2f7",kr=((zr=rr.colors)==null?void 0:zr.accent)||"#7dcfff";return h.jsxs("button",{onClick:()=>m(rr.id),className:"relative p-3 rounded-xl border-2 transition-all text-left",style:{borderColor:ft?ws:Go,boxShadow:ft?`0 0 0 3px ${ws}33`:"none"},children:[h.jsx("div",{className:"h-16 rounded-lg mb-2 relative overflow-hidden",style:{backgroundColor:Nt},children:h.jsxs("div",{className:"absolute inset-2 flex flex-col gap-1",children:[h.jsx("div",{className:"h-2 w-3/4 rounded",style:{backgroundColor:pn,opacity:.8}}),h.jsx("div",{className:"h-2 w-1/2 rounded",style:{backgroundColor:wn}}),h.jsxs("div",{className:"flex gap-1 mt-auto",children:[h.jsx("div",{className:"h-3 w-8 rounded",style:{backgroundColor:wn}}),h.jsx("div",{className:"h-3 w-6 rounded",style:{backgroundColor:kr}})]})]})}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-sm font-medium",style:{color:xs},children:rr.name}),h.jsx("p",{className:"text-xs",style:{color:gr},children:rr.description})]}),ft&&h.jsx(cd,{size:16,style:{color:ws},className:"flex-shrink-0"})]})]},rr.id)};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium mb-2",style:{color:xs},children:"Application Theme"}),h.jsx("p",{className:"text-xs mb-4",style:{color:gr},children:"Choose a color theme for the application. Themes change the overall look and feel."})]}),Fn&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:gr},children:"Automatic"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ps(Fn)})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:gr},children:"Dark Themes"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:mt.map(Ps)})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:gr},children:"Light Themes"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:Xr.map(Ps)})]}),h.jsx("div",{className:"p-3 rounded-lg border",style:{backgroundColor:`${ws}10`,borderColor:`${ws}30`},children:h.jsxs("p",{className:"text-xs",style:{color:ws},children:[h.jsx("strong",{children:"Tip:"}),` Select "System Default" to automatically follow your system's light/dark mode preference.`]})})]})}case"codeindex":return h.jsx(VBe,{isDarkMode:n,projectPath:i});case"pro":return h.jsx(jBe,{isDarkMode:n,isPro:!0});default:return null}},In=f.colors,Lr=(In==null?void 0:In.background)||(n?"#171717":"#d6d3d1"),xs=(In==null?void 0:In.foreground)||(n?"#f5f5f5":"#171717"),Go=(In==null?void 0:In.border)||(n?"#404040":"#a8a29e"),ws=(In==null?void 0:In.primary)||(n?"#3b82f6":"#2563eb"),Jr=In?Bk(In.background,-10):n?"#262626":"#c4c0bc",gr=In?Bk(In.foreground,-30):n?"#a3a3a3":"#57534e";return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),h.jsxs("div",{className:"relative w-full max-w-5xl h-[700px] rounded-2xl shadow-2xl flex overflow-hidden",style:{backgroundColor:Lr,color:xs},children:[h.jsxs("div",{className:"w-52 flex-shrink-0 border-r",style:{backgroundColor:Jr,borderColor:Go},children:[h.jsx("div",{className:"px-5 py-4 border-b",style:{borderColor:Go},children:h.jsx("h2",{className:"text-lg font-semibold",style:{color:xs},children:"Settings"})}),h.jsx("nav",{className:"p-2",children:Mz.map(it=>{const rt=a===it.id;return h.jsxs("button",{onClick:()=>l(it.id),className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-left transition-colors",style:{backgroundColor:rt?In?Bk(Lr,15):n?"#404040":"#e7e5e4":"transparent",color:rt?xs:gr},children:[it.icon,h.jsx("span",{className:"text-sm font-medium",children:it.label}),rt&&h.jsx(Af,{size:14,className:"ml-auto"})]},it.id)})})]}),h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:Go},children:[h.jsx("h3",{className:"text-lg font-medium",style:{color:xs},children:(Os=Mz.find(it=>it.id===a))==null?void 0:Os.label}),h.jsx("button",{onClick:t,className:"p-2 rounded-lg transition-colors",style:{color:gr},children:h.jsx(qr,{size:18})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:hn()})]})]})]})}function Dz(e){return Tte[e]}const Oz=[{file:"src/auth/login.tsx",line:45,content:"const handleLogin = async (email, password) => {",match:!1},{file:"src/components/LoginForm.tsx",line:12,content:"export function LoginForm() {",match:!1},{file:"src/api/auth.ts",line:78,content:"// Authentication endpoint",match:!1},{file:"src/utils/validation.ts",line:23,content:"function validateEmail(email: string) {",match:!1}],Pz=[{file:"src/auth/AuthProvider.tsx",line:156,content:`async function handleAuthentication(credentials: LoginCredentials) {
  // JWT token validation and user session management
  const token = await validateCredentials(credentials);`,similarity:89,match:!0},{file:"src/middleware/authMiddleware.ts",line:34,content:`export const requireAuth = async (req, res, next) => {
  // Check JWT token and verify user permissions`,similarity:76,match:!0},{file:"src/hooks/useAuth.ts",line:23,content:`export function useAuth() {
  const login = async (email: string, password: string) => {`,similarity:68,match:!0}];function GBe({isDarkMode:e,onAccept:t,onDecline:n,onClose:r}){const[o,s]=x.useState("intro"),[i,a]=x.useState([]),[l,c]=x.useState([]),[u,f]=x.useState(null),[m,g]=x.useState(null),[y]=x.useState("authentication handler");return x.useEffect(()=>{if(o==="demo"){a([]),c([]),f(null),g(null);const v=[],w=[],_=setTimeout(()=>{let k=0;const M=setInterval(()=>{k<Oz.length?(a(D=>[...D,Oz[k]]),k++):(clearInterval(M),f(847))},120);w.push(M)},100);v.push(_);const T=setTimeout(()=>{let k=0;const M=setInterval(()=>{if(k<Pz.length)c(D=>[...D,Pz[k]]),k++;else{clearInterval(M),g(234);const D=setTimeout(()=>s("results"),800);v.push(D)}},80);w.push(M)},100);return v.push(T),()=>{v.forEach(clearTimeout),w.forEach(clearInterval)}}},[o]),h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),h.jsxs("div",{className:`relative max-w-4xl w-full rounded-2xl border ${e?"bg-neutral-900 border-neutral-700":"bg-white border-stone-200"} shadow-2xl overflow-hidden`,children:[h.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${e?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:h.jsx(Ac,{size:20,className:"text-white"})}),h.jsxs("div",{children:[h.jsx("h2",{className:`text-lg font-semibold ${e?"text-white":"text-stone-900"}`,children:"AI-Powered Code Search"}),h.jsx("p",{className:`text-sm ${e?"text-neutral-400":"text-stone-500"}`,children:"Find code by meaning, not just keywords"})]})]}),h.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors ${e?"hover:bg-neutral-800":"hover:bg-stone-100"}`,children:h.jsx(qr,{size:18,className:e?"text-neutral-400":"text-stone-500"})})]}),h.jsxs("div",{className:"p-6",children:[o==="intro"&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:`text-base font-medium mb-2 ${e?"text-white":"text-stone-900"}`,children:"What is Semantic Search?"}),h.jsxs("p",{className:`text-sm ${e?"text-neutral-300":"text-stone-600"} leading-relaxed`,children:["Instead of searching for exact keywords, Cluso understands ",h.jsx("strong",{children:"what you mean"}),`. Ask for "authentication handler" and it finds JWT validation code, login functions, and auth middleware - even if they don't contain those exact words.`]})]}),h.jsx("div",{className:`p-4 rounded-xl ${e?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-200"}`,children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Ac,{size:16,className:"text-blue-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h4",{className:`text-sm font-medium mb-1 ${e?"text-blue-400":"text-blue-600"}`,children:"Fast & Local"}),h.jsx("p",{className:`text-xs ${e?"text-blue-300/80":"text-blue-700"}`,children:"Runs completely offline with local AI models. No API costs, no internet required."})]})]})}),h.jsx("button",{onClick:()=>s("demo"),className:"w-full px-4 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-medium transition-all",children:"See Live Demo"})]}),o==="demo"&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:`p-3 rounded-lg ${e?"bg-neutral-800":"bg-stone-100"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Gf,{size:14,className:"text-blue-500"}),h.jsxs("span",{className:`text-sm font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:['"',y,'"']})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("span",{className:`text-sm font-medium ${e?"text-green-400":"text-green-600"}`,children:"Grep (Keyword)"}),u&&h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(cR,{size:12,className:"text-green-500"}),h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600"}`,children:[u,"ms"]})]})]}),h.jsx("div",{className:"space-y-2 min-h-[300px]",children:i.map((v,w)=>h.jsxs("div",{className:`p-3 rounded-lg border animate-fadeIn ${e?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,style:{animationDelay:`${w*120}ms`},children:[h.jsx("div",{className:"mb-1",children:h.jsxs("span",{className:`text-xs font-mono ${e?"text-neutral-400":"text-stone-500"}`,children:[v.file,":",v.line]})}),h.jsx("pre",{className:`text-xs font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:v.content})]},w))})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("span",{className:`text-sm font-medium ${e?"text-purple-400":"text-purple-600"}`,children:"Cluso (AI)"}),m&&h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx(Ac,{size:12,className:"text-purple-500"}),h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-600"}`,children:[m,"ms"]})]})]}),h.jsx("div",{className:"space-y-2 min-h-[300px]",children:l.map((v,w)=>h.jsxs("div",{className:`p-3 rounded-lg border animate-fadeIn ${v.match?e?"bg-purple-500/10 border-purple-500/30":"bg-purple-50 border-purple-200":e?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,style:{animationDelay:`${w*80}ms`},children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsxs("span",{className:`text-xs font-mono ${e?"text-purple-400":"text-purple-600"}`,children:[v.file,":",v.line]}),h.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${v.similarity>80?"bg-green-500/20 text-green-400":v.similarity>65?"bg-yellow-500/20 text-yellow-400":"bg-neutral-500/20 text-neutral-400"}`,children:[v.similarity,"%"]})]}),h.jsx("pre",{className:`text-xs font-mono ${e?"text-neutral-300":"text-stone-700"}`,children:v.content})]},w))})]})]})]}),o==="results"&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gradient-to-br from-purple-500/20 to-blue-500/20 border border-purple-500/30":"bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200"}`,children:[h.jsx("h3",{className:`text-base font-semibold mb-3 ${e?"text-white":"text-stone-900"}`,children:"The Difference"}),h.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${e?"bg-green-500/20":"bg-green-100"}`,children:h.jsx("span",{className:"text-green-500 text-sm font-bold",children:"Grep"})}),h.jsx("span",{className:`text-xs ${e?"text-neutral-400":"text-stone-600"}`,children:"847ms"})]}),h.jsx("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-600"}`,children:"Found 4 matches, but none were actually authentication handlers - just files with similar words."})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:h.jsx(Ac,{size:16,className:"text-purple-500"})}),h.jsx("span",{className:`text-xs ${e?"text-purple-400":"text-purple-600"} font-semibold`,children:"234ms"})]}),h.jsxs("p",{className:`text-xs ${e?"text-neutral-400":"text-stone-600"}`,children:["Found 3 results - all actual authentication code. ",h.jsx("strong",{className:"text-purple-500",children:"3.6x faster"})," and more accurate."]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:`text-sm font-medium mb-3 ${e?"text-white":"text-stone-900"}`,children:"Enable for your project?"}),h.jsx("p",{className:`text-sm mb-4 ${e?"text-neutral-400":"text-stone-600"}`,children:"Indexing will run in the background (takes ~30 seconds for typical projects). You can always disable it later in Settings."}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{localStorage.setItem("mgrep-onboarding-seen","true"),localStorage.setItem("mgrep-auto-init","true"),t()},className:"flex-1 px-4 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-medium transition-all",children:"Enable AI Search"}),h.jsx("button",{onClick:()=>{localStorage.setItem("mgrep-onboarding-seen","true"),localStorage.setItem("mgrep-auto-init","false"),n()},className:`px-4 py-3 rounded-xl transition-colors ${e?"bg-neutral-800 hover:bg-neutral-700 text-neutral-300":"bg-stone-100 hover:bg-stone-200 text-stone-700"}`,children:"Maybe Later"})]})]})]})]})]}),h.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(8px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fadeIn {
          animation: fadeIn 0.3s ease-out forwards;
          opacity: 0;
        }
      `})]})}const WBe="modulepreload",YBe=function(e,t){return new URL(e,t).href},Lz={},pe=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=i(n.map(u=>{if(u=YBe(u,r),u in Lz)return;Lz[u]=!0;const f=u.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(!!r)for(let v=a.length-1;v>=0;v--){const w=a[v];if(w.href===u&&(!f||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${m}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":WBe,f||(y.as="script"),y.crossOrigin="",y.href=u,c&&y.setAttribute("nonce",c),document.head.appendChild(y),f)return new Promise((v,w)=>{y.addEventListener("load",v),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};let hi=class extends Error{constructor(t){super(t),this.name="ShikiError"}};function KBe(e){return U7(e)}function U7(e){return Array.isArray(e)?ZBe(e):e instanceof RegExp?e:typeof e=="object"?JBe(e):e}function ZBe(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=U7(e[n]);return t}function JBe(e){let t={};for(let n in e)t[n]=U7(e[n]);return t}function Cte(e,...t){return t.forEach(n=>{for(let r in n)e[r]=n[r]}),e}function kte(e){const t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return t===0?e:~t===e.length-1?kte(e.substring(0,e.length-1)):e.substr(~t+1)}var zk=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,V2=class{static hasCaptures(e){return e===null?!1:(zk.lastIndex=0,zk.test(e))}static replaceCaptures(e,t,n){return e.replace(zk,(r,o,s,i)=>{let a=n[parseInt(o||s,10)];if(a){let l=t.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(i){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function Ate(e,t){return e<t?-1:e>t?1:0}function Nte(e,t){if(e===null&&t===null)return 0;if(!e)return-1;if(!t)return 1;let n=e.length,r=t.length;if(n===r){for(let o=0;o<n;o++){let s=Ate(e[o],t[o]);if(s!==0)return s}return 0}return n-r}function $z(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function Ite(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Rte=class{constructor(e){Ze(this,"cache",new Map);this.fn=e}get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}},RT=class{constructor(e,t,n){Ze(this,"_cachedMatchRoot",new Rte(e=>this._root.match(e)));this._colorMap=e,this._defaults=t,this._root=n}static createFromRawTheme(e,t){return this.createFromParsedTheme(eze(e),t)}static createFromParsedTheme(e,t){return nze(e,t)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(e===null)return this._defaults;const t=e.scopeName,r=this._cachedMatchRoot.get(t).find(o=>XBe(e.parent,o.parentScopes));return r?new Mte(r.fontStyle,r.foreground,r.background):null}},jk=class P_{constructor(t,n){this.parent=t,this.scopeName=n}static push(t,n){for(const r of n)t=new P_(t,r);return t}static from(...t){let n=null;for(let r=0;r<t.length;r++)n=new P_(n,t[r]);return n}push(t){return new P_(this,t)}getSegments(){let t=this;const n=[];for(;t;)n.push(t.scopeName),t=t.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(t){return this===t?!0:this.parent===null?!1:this.parent.extends(t)}getExtensionIfDefined(t){const n=[];let r=this;for(;r&&r!==t;)n.push(r.scopeName),r=r.parent;return r===t?n.reverse():void 0}};function XBe(e,t){if(t.length===0)return!0;for(let n=0;n<t.length;n++){let r=t[n],o=!1;if(r===">"){if(n===t.length-1)return!1;r=t[++n],o=!0}for(;e&&!QBe(e.scopeName,r);){if(o)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0}function QBe(e,t){return t===e||e.startsWith(t)&&e[t.length]==="."}var Mte=class{constructor(e,t,n){this.fontStyle=e,this.foregroundId=t,this.backgroundId=n}};function eze(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,n=[],r=0;for(let o=0,s=t.length;o<s;o++){let i=t[o];if(!i.settings)continue;let a;if(typeof i.scope=="string"){let f=i.scope;f=f.replace(/^[,]+/,""),f=f.replace(/[,]+$/,""),a=f.split(",")}else Array.isArray(i.scope)?a=i.scope:a=[""];let l=-1;if(typeof i.settings.fontStyle=="string"){l=0;let f=i.settings.fontStyle.split(" ");for(let m=0,g=f.length;m<g;m++)switch(f[m]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof i.settings.foreground=="string"&&$z(i.settings.foreground)&&(c=i.settings.foreground);let u=null;typeof i.settings.background=="string"&&$z(i.settings.background)&&(u=i.settings.background);for(let f=0,m=a.length;f<m;f++){let y=a[f].trim().split(" "),v=y[y.length-1],w=null;y.length>1&&(w=y.slice(0,y.length-1),w.reverse()),n[r++]=new tze(v,w,o,l,c,u)}}return n}var tze=class{constructor(e,t,n,r,o,s){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=o,this.background=s}},ya=(e=>(e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e))(ya||{});function nze(e,t){e.sort((l,c)=>{let u=Ate(l.scope,c.scope);return u!==0||(u=Nte(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let n=0,r="#000000",o="#ffffff";for(;e.length>=1&&e[0].scope==="";){let l=e.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(o=l.background)}let s=new rze(t),i=new Mte(n,s.getId(r),s.getId(o)),a=new sze(new Y6(0,null,-1,0,0),[]);for(let l=0,c=e.length;l<c;l++){let u=e[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,s.getId(u.foreground),s.getId(u.background))}return new RT(s,i,a)}var rze=class{constructor(e){Ze(this,"_isFrozen");Ze(this,"_lastColorId");Ze(this,"_id2color");Ze(this,"_color2id");if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(e===null)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}},oze=Object.freeze([]),Y6=class Dte{constructor(t,n,r,o,s){Ze(this,"scopeDepth");Ze(this,"parentScopes");Ze(this,"fontStyle");Ze(this,"foreground");Ze(this,"background");this.scopeDepth=t,this.parentScopes=n||oze,this.fontStyle=r,this.foreground=o,this.background=s}clone(){return new Dte(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(t){let n=[];for(let r=0,o=t.length;r<o;r++)n[r]=t[r].clone();return n}acceptOverwrite(t,n,r,o){this.scopeDepth>t?console.log("how did this happen?"):this.scopeDepth=t,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),o!==0&&(this.background=o)}},sze=class K6{constructor(t,n=[],r={}){Ze(this,"_rulesWithParentScopes");this._mainRule=t,this._children=r,this._rulesWithParentScopes=n}static _cmpBySpecificity(t,n){if(t.scopeDepth!==n.scopeDepth)return n.scopeDepth-t.scopeDepth;let r=0,o=0;for(;t.parentScopes[r]===">"&&r++,n.parentScopes[o]===">"&&o++,!(r>=t.parentScopes.length||o>=n.parentScopes.length);){const s=n.parentScopes[o].length-t.parentScopes[r].length;if(s!==0)return s;r++,o++}return n.parentScopes.length-t.parentScopes.length}match(t){if(t!==""){let r=t.indexOf("."),o,s;if(r===-1?(o=t,s=""):(o=t.substring(0,r),s=t.substring(r+1)),this._children.hasOwnProperty(o))return this._children[o].match(s)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(K6._cmpBySpecificity),n}insert(t,n,r,o,s,i){if(n===""){this._doInsertHere(t,r,o,s,i);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new K6(this._mainRule.clone(),Y6.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(t+1,c,r,o,s,i)}_doInsertHere(t,n,r,o,s){if(n===null){this._mainRule.acceptOverwrite(t,r,o,s);return}for(let i=0,a=this._rulesWithParentScopes.length;i<a;i++){let l=this._rulesWithParentScopes[i];if(Nte(l.parentScopes,n)===0){l.acceptOverwrite(t,r,o,s);return}}r===-1&&(r=this._mainRule.fontStyle),o===0&&(o=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new Y6(t,n,r,o,s))}},ab=class bc{static toBinaryStr(t){return t.toString(2).padStart(32,"0")}static print(t){const n=bc.getLanguageId(t),r=bc.getTokenType(t),o=bc.getFontStyle(t),s=bc.getForeground(t),i=bc.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:o,foreground:s,background:i})}static getLanguageId(t){return(t&255)>>>0}static getTokenType(t){return(t&768)>>>8}static containsBalancedBrackets(t){return(t&1024)!==0}static getFontStyle(t){return(t&30720)>>>11}static getForeground(t){return(t&16744448)>>>15}static getBackground(t){return(t&4278190080)>>>24}static set(t,n,r,o,s,i,a){let l=bc.getLanguageId(t),c=bc.getTokenType(t),u=bc.containsBalancedBrackets(t)?1:0,f=bc.getFontStyle(t),m=bc.getForeground(t),g=bc.getBackground(t);return n!==0&&(l=n),r!==8&&(c=r),o!==null&&(u=o?1:0),s!==-1&&(f=s),i!==0&&(m=i),a!==0&&(g=a),(l<<0|c<<8|u<<10|f<<11|m<<15|g<<24)>>>0}};function MT(e,t){const n=[],r=ize(e);let o=r.next();for(;o!==null;){let l=0;if(o.length===2&&o.charAt(1)===":"){switch(o.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${o} in scope selector`)}o=r.next()}let c=i();if(n.push({matcher:c,priority:l}),o!==",")break;o=r.next()}return n;function s(){if(o==="-"){o=r.next();const l=s();return c=>!!l&&!l(c)}if(o==="("){o=r.next();const l=a();return o===")"&&(o=r.next()),l}if(Fz(o)){const l=[];do l.push(o),o=r.next();while(Fz(o));return c=>t(l,c)}return null}function i(){const l=[];let c=s();for(;c;)l.push(c),c=s();return u=>l.every(f=>f(u))}function a(){const l=[];let c=i();for(;c&&(l.push(c),o==="|"||o===",");){do o=r.next();while(o==="|"||o===",");c=i()}return u=>l.some(f=>f(u))}}function Fz(e){return!!e&&!!e.match(/[\w\.:]+/)}function ize(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:()=>{if(!n)return null;const r=n[0];return n=t.exec(e),r}}}function Ote(e){typeof e.dispose=="function"&&e.dispose()}var jx=class{constructor(e){this.scopeName=e}toKey(){return this.scopeName}},aze=class{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}},lze=class{constructor(){Ze(this,"_references",[]);Ze(this,"_seenReferenceKeys",new Set);Ze(this,"visitedRule",new Set)}get references(){return this._references}add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}},cze=class{constructor(e,t){Ze(this,"seenFullScopeRequests",new Set);Ze(this,"seenPartialScopeRequests",new Set);Ze(this,"Q");this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new jx(this.initialScopeName)]}processQueue(){const e=this.Q;this.Q=[];const t=new lze;for(const n of e)uze(n,this.initialScopeName,this.repo,t);for(const n of t.references)if(n instanceof jx){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function uze(e,t,n,r){const o=n.lookup(e.scopeName);if(!o){if(e.scopeName===t)throw new Error(`No grammar provided for <${t}>`);return}const s=n.lookup(t);e instanceof jx?L_({baseGrammar:s,selfGrammar:o},r):Z6(e.ruleName,{baseGrammar:s,selfGrammar:o,repository:o.repository},r);const i=n.injections(e.scopeName);if(i)for(const a of i)r.add(new jx(a))}function Z6(e,t,n){if(t.repository&&t.repository[e]){const r=t.repository[e];DT([r],t,n)}}function L_(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&DT(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&DT(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function DT(e,t,n){for(const r of e){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const o=r.repository?Cte({},t.repository,r.repository):t.repository;Array.isArray(r.patterns)&&DT(r.patterns,{...t,repository:o},n);const s=r.include;if(!s)continue;const i=Pte(s);switch(i.kind){case 0:L_({...t,selfGrammar:t.baseGrammar},n);break;case 1:L_(t,n);break;case 2:Z6(i.ruleName,{...t,repository:o},n);break;case 3:case 4:const a=i.scopeName===t.selfGrammar.scopeName?t.selfGrammar:i.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(a){const l={baseGrammar:t.baseGrammar,selfGrammar:a,repository:o};i.kind===4?Z6(i.ruleName,l,n):L_(l,n)}else i.kind===4?n.add(new aze(i.scopeName,i.ruleName)):n.add(new jx(i.scopeName));break}}}var dze=class{constructor(){Ze(this,"kind",0)}},fze=class{constructor(){Ze(this,"kind",1)}},hze=class{constructor(e){Ze(this,"kind",2);this.ruleName=e}},pze=class{constructor(e){Ze(this,"kind",3);this.scopeName=e}},mze=class{constructor(e,t){Ze(this,"kind",4);this.scopeName=e,this.ruleName=t}};function Pte(e){if(e==="$base")return new dze;if(e==="$self")return new fze;const t=e.indexOf("#");if(t===-1)return new pze(e);if(t===0)return new hze(e.substring(1));{const n=e.substring(0,t),r=e.substring(t+1);return new mze(n,r)}}var gze=/\\(\d+)/,Bz=/\\(\d+)/g,bze=-1,Lte=-2;var Ow=class{constructor(e,t,n,r){Ze(this,"$location");Ze(this,"id");Ze(this,"_nameIsCapturing");Ze(this,"_name");Ze(this,"_contentNameIsCapturing");Ze(this,"_contentName");this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=V2.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=V2.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${kte(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return!this._nameIsCapturing||this._name===null||e===null||t===null?this._name:V2.replaceCaptures(this._name,e,t)}getContentName(e,t){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:V2.replaceCaptures(this._contentName,e,t)}},yze=class extends Ow{constructor(t,n,r,o,s){super(t,n,r,o);Ze(this,"retokenizeCapturedWithRuleId");this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,n){throw new Error("Not supported!")}compile(t,n){throw new Error("Not supported!")}compileAG(t,n,r,o){throw new Error("Not supported!")}},vze=class extends Ow{constructor(t,n,r,o,s){super(t,n,r,null);Ze(this,"_match");Ze(this,"captures");Ze(this,"_cachedCompiledPatterns");this._match=new Ux(o,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,n){n.push(this._match)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,o){return this._getCachedCompiledPatterns(t).compileAG(t,r,o)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Hx,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},zz=class extends Ow{constructor(t,n,r,o,s){super(t,n,r,o);Ze(this,"hasMissingPatterns");Ze(this,"patterns");Ze(this,"_cachedCompiledPatterns");this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,n){for(const r of this.patterns)t.getRule(r).collectPatterns(t,n)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,o){return this._getCachedCompiledPatterns(t).compileAG(t,r,o)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Hx,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},J6=class extends Ow{constructor(t,n,r,o,s,i,a,l,c,u){super(t,n,r,o);Ze(this,"_begin");Ze(this,"beginCaptures");Ze(this,"_end");Ze(this,"endHasBackReferences");Ze(this,"endCaptures");Ze(this,"applyEndPatternLast");Ze(this,"hasMissingPatterns");Ze(this,"patterns");Ze(this,"_cachedCompiledPatterns");this._begin=new Ux(s,this.id),this.beginCaptures=i,this._end=new Ux(a||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=c||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,n){return this._end.resolveBackReferences(t,n)}collectPatterns(t,n){n.push(this._begin)}compile(t,n){return this._getCachedCompiledPatterns(t,n).compile(t)}compileAG(t,n,r,o){return this._getCachedCompiledPatterns(t,n).compileAG(t,r,o)}_getCachedCompiledPatterns(t,n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Hx;for(const r of this.patterns)t.getRule(r).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,n):this._cachedCompiledPatterns.setSource(0,n)),this._cachedCompiledPatterns}},OT=class extends Ow{constructor(t,n,r,o,s,i,a,l,c){super(t,n,r,o);Ze(this,"_begin");Ze(this,"beginCaptures");Ze(this,"whileCaptures");Ze(this,"_while");Ze(this,"whileHasBackReferences");Ze(this,"hasMissingPatterns");Ze(this,"patterns");Ze(this,"_cachedCompiledPatterns");Ze(this,"_cachedCompiledWhilePatterns");this._begin=new Ux(s,this.id),this.beginCaptures=i,this.whileCaptures=l,this._while=new Ux(a,Lte),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,n){return this._while.resolveBackReferences(t,n)}collectPatterns(t,n){n.push(this._begin)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,o){return this._getCachedCompiledPatterns(t).compileAG(t,r,o)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Hx;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,n){return this._getCachedCompiledWhilePatterns(t,n).compile(t)}compileWhileAG(t,n,r,o){return this._getCachedCompiledWhilePatterns(t,n).compileAG(t,r,o)}_getCachedCompiledWhilePatterns(t,n){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Hx,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,n||""),this._cachedCompiledWhilePatterns}},$te=class ma{static createCaptureRule(t,n,r,o,s){return t.registerRule(i=>new yze(n,i,r,o,s))}static getCompiledRuleId(t,n,r){return t.id||n.registerRule(o=>{if(t.id=o,t.match)return new vze(t.$vscodeTextmateLocation,t.id,t.name,t.match,ma._compileCaptures(t.captures,n,r));if(typeof t.begin>"u"){t.repository&&(r=Cte({},r,t.repository));let s=t.patterns;return typeof s>"u"&&t.include&&(s=[{include:t.include}]),new zz(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,ma._compilePatterns(s,n,r))}return t.while?new OT(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,ma._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,ma._compileCaptures(t.whileCaptures||t.captures,n,r),ma._compilePatterns(t.patterns,n,r)):new J6(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,ma._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,ma._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,ma._compilePatterns(t.patterns,n,r))}),t.id}static _compileCaptures(t,n,r){let o=[];if(t){let s=0;for(const i in t){if(i==="$vscodeTextmateLocation")continue;const a=parseInt(i,10);a>s&&(s=a)}for(let i=0;i<=s;i++)o[i]=null;for(const i in t){if(i==="$vscodeTextmateLocation")continue;const a=parseInt(i,10);let l=0;t[i].patterns&&(l=ma.getCompiledRuleId(t[i],n,r)),o[a]=ma.createCaptureRule(n,t[i].$vscodeTextmateLocation,t[i].name,t[i].contentName,l)}}return o}static _compilePatterns(t,n,r){let o=[];if(t)for(let s=0,i=t.length;s<i;s++){const a=t[s];let l=-1;if(a.include){const c=Pte(a.include);switch(c.kind){case 0:case 1:l=ma.getCompiledRuleId(r[a.include],n,r);break;case 2:let u=r[c.ruleName];u&&(l=ma.getCompiledRuleId(u,n,r));break;case 3:case 4:const f=c.scopeName,m=c.kind===4?c.ruleName:null,g=n.getExternalGrammar(f,r);if(g)if(m){let y=g.repository[m];y&&(l=ma.getCompiledRuleId(y,n,g.repository))}else l=ma.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else l=ma.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let u=!1;if((c instanceof zz||c instanceof J6||c instanceof OT)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;o.push(l)}}return{patterns:o,hasMissingPatterns:(t?t.length:0)!==o.length}}},Ux=class Fte{constructor(t,n){Ze(this,"source");Ze(this,"ruleId");Ze(this,"hasAnchor");Ze(this,"hasBackReferences");Ze(this,"_anchorCache");if(t&&typeof t=="string"){const r=t.length;let o=0,s=[],i=!1;for(let a=0;a<r;a++)if(t.charAt(a)==="\\"&&a+1<r){const c=t.charAt(a+1);c==="z"?(s.push(t.substring(o,a)),s.push("$(?!\\n)(?<!\\n)"),o=a+2):(c==="A"||c==="G")&&(i=!0),a++}this.hasAnchor=i,o===0?this.source=t:(s.push(t.substring(o,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=t;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=gze.test(this.source):this.hasBackReferences=!1}clone(){return new Fte(this.source,this.ruleId)}setSource(t){this.source!==t&&(this.source=t,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(t,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(o=>t.substring(o.start,o.end));return Bz.lastIndex=0,this.source.replace(Bz,(o,s)=>Ite(r[parseInt(s,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let t=[],n=[],r=[],o=[],s,i,a,l;for(s=0,i=this.source.length;s<i;s++)a=this.source.charAt(s),t[s]=a,n[s]=a,r[s]=a,o[s]=a,a==="\\"&&s+1<i&&(l=this.source.charAt(s+1),l==="A"?(t[s+1]="",n[s+1]="",r[s+1]="A",o[s+1]="A"):l==="G"?(t[s+1]="",n[s+1]="G",r[s+1]="",o[s+1]="G"):(t[s+1]=l,n[s+1]=l,r[s+1]=l,o[s+1]=l),s++);return{A0_G0:t.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:o.join("")}}resolveAnchors(t,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:t?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Hx=class{constructor(){Ze(this,"_items");Ze(this,"_hasAnchors");Ze(this,"_cached");Ze(this,"_anchorCache");this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map(n=>n.source);this._cached=new jz(e,t,this._items.map(n=>n.ruleId))}return this._cached}compileAG(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,n){let r=this._items.map(o=>o.resolveAnchors(t,n));return new jz(e,r,this._items.map(o=>o.ruleId))}},jz=class{constructor(e,t,n){Ze(this,"scanner");this.regExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const e=[];for(let t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join(`
`)}findNextMatchSync(e,t,n){const r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},Uk=class{constructor(e,t){this.languageId=e,this.tokenType=t}},kf,xze=(kf=class{constructor(t,n){Ze(this,"_defaultAttributes");Ze(this,"_embeddedLanguagesMatcher");Ze(this,"_getBasicScopeAttributes",new Rte(t=>{const n=this._scopeToLanguage(t),r=this._toStandardTokenType(t);return new Uk(n,r)}));this._defaultAttributes=new Uk(t,8),this._embeddedLanguagesMatcher=new wze(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(t){return t===null?kf._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}_scopeToLanguage(t){return this._embeddedLanguagesMatcher.match(t)||0}_toStandardTokenType(t){const n=t.match(kf.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}},Ze(kf,"_NULL_SCOPE_METADATA",new Uk(0,0)),Ze(kf,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),kf),wze=class{constructor(e){Ze(this,"values");Ze(this,"scopesRegExp");if(e.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map(([n,r])=>Ite(n));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);if(t)return this.values.get(t[1])}},Uz=class{constructor(e,t){this.stack=e,this.stoppedEarly=t}};function Bte(e,t,n,r,o,s,i,a){const l=t.content.length;let c=!1,u=-1;if(i){const g=Eze(e,t,n,r,o,s);o=g.stack,r=g.linePos,n=g.isFirstLine,u=g.anchorPosition}const f=Date.now();for(;!c;){if(a!==0&&Date.now()-f>a)return new Uz(o,!0);m()}return new Uz(o,!1);function m(){const g=_ze(e,t,n,r,o,u);if(!g){s.produce(o,l),c=!0;return}const y=g.captureIndices,v=g.matchedRuleId,w=y&&y.length>0?y[0].end>r:!1;if(v===bze){const _=o.getRule(e);s.produce(o,y[0].start),o=o.withContentNameScopesList(o.nameScopesList),wv(e,t,n,o,s,_.endCaptures,y),s.produce(o,y[0].end);const T=o;if(o=o.parent,u=T.getAnchorPos(),!w&&T.getEnterPos()===r){o=T,s.produce(o,l),c=!0;return}}else{const _=e.getRule(v);s.produce(o,y[0].start);const T=o,k=_.getName(t.content,y),M=o.contentNameScopesList.pushAttributed(k,e);if(o=o.push(v,r,u,y[0].end===l,null,M,M),_ instanceof J6){const D=_;wv(e,t,n,o,s,D.beginCaptures,y),s.produce(o,y[0].end),u=y[0].end;const I=D.getContentName(t.content,y),P=M.pushAttributed(I,e);if(o=o.withContentNameScopesList(P),D.endHasBackReferences&&(o=o.withEndRule(D.getEndWithResolvedBackReferences(t.content,y))),!w&&T.hasSameRuleAs(o)){o=o.pop(),s.produce(o,l),c=!0;return}}else if(_ instanceof OT){const D=_;wv(e,t,n,o,s,D.beginCaptures,y),s.produce(o,y[0].end),u=y[0].end;const I=D.getContentName(t.content,y),P=M.pushAttributed(I,e);if(o=o.withContentNameScopesList(P),D.whileHasBackReferences&&(o=o.withEndRule(D.getWhileWithResolvedBackReferences(t.content,y))),!w&&T.hasSameRuleAs(o)){o=o.pop(),s.produce(o,l),c=!0;return}}else if(wv(e,t,n,o,s,_.captures,y),s.produce(o,y[0].end),o=o.pop(),!w){o=o.safePop(),s.produce(o,l),c=!0;return}}y[0].end>r&&(r=y[0].end,n=!1)}}function Eze(e,t,n,r,o,s){let i=o.beginRuleCapturedEOL?0:-1;const a=[];for(let l=o;l;l=l.pop()){const c=l.getRule(e);c instanceof OT&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=Cze(l.rule,e,l.stack.endRule,n,r===i),f=c.findNextMatchSync(t,r,u);if(f){if(f.ruleId!==Lte){o=l.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(s.produce(l.stack,f.captureIndices[0].start),wv(e,t,n,l.stack,s,l.rule.whileCaptures,f.captureIndices),s.produce(l.stack,f.captureIndices[0].end),i=f.captureIndices[0].end,f.captureIndices[0].end>r&&(r=f.captureIndices[0].end,n=!1))}else{o=l.stack.pop();break}}return{stack:o,linePos:r,anchorPosition:i,isFirstLine:n}}function _ze(e,t,n,r,o,s){const i=Sze(e,t,n,r,o,s),a=e.getInjections();if(a.length===0)return i;const l=Tze(a,e,t,n,r,o,s);if(!l)return i;if(!i)return l;const c=i.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:i}function Sze(e,t,n,r,o,s){const i=o.getRule(e),{ruleScanner:a,findOptions:l}=zte(i,e,o.endRule,n,r===s),c=a.findNextMatchSync(t,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function Tze(e,t,n,r,o,s,i){let a=Number.MAX_VALUE,l=null,c,u=0;const f=s.contentNameScopesList.getScopeNames();for(let m=0,g=e.length;m<g;m++){const y=e[m];if(!y.matcher(f))continue;const v=t.getRule(y.ruleId),{ruleScanner:w,findOptions:_}=zte(v,t,null,r,o===i),T=w.findNextMatchSync(n,o,_);if(!T)continue;const k=T.captureIndices[0].start;if(!(k>=a)&&(a=k,l=T.captureIndices,c=T.ruleId,u=y.priority,a===o))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function zte(e,t,n,r,o){return{ruleScanner:e.compileAG(t,n,r,o),findOptions:0}}function Cze(e,t,n,r,o){return{ruleScanner:e.compileWhileAG(t,n,r,o),findOptions:0}}function wv(e,t,n,r,o,s,i){if(s.length===0)return;const a=t.content,l=Math.min(s.length,i.length),c=[],u=i[0].end;for(let f=0;f<l;f++){const m=s[f];if(m===null)continue;const g=i[f];if(g.length===0)continue;if(g.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=g.start;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?o.produceFromScopes(c[c.length-1].scopes,g.start):o.produce(r,g.start),m.retokenizeCapturedWithRuleId){const v=m.getName(a,i),w=r.contentNameScopesList.pushAttributed(v,e),_=m.getContentName(a,i),T=w.pushAttributed(_,e),k=r.push(m.retokenizeCapturedWithRuleId,g.start,-1,!1,null,w,T),M=e.createOnigString(a.substring(0,g.end));Bte(e,M,n&&g.start===0,g.start,k,o,!1,0),Ote(M);continue}const y=m.getName(a,i);if(y!==null){const w=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(y,e);c.push(new kze(w,g.end))}}for(;c.length>0;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var kze=class{constructor(e,t){Ze(this,"scopes");Ze(this,"endPos");this.scopes=e,this.endPos=t}};function Aze(e,t,n,r,o,s,i,a){return new Ize(e,t,n,r,o,s,i,a)}function Hz(e,t,n,r,o){const s=MT(t,PT),i=$te.getCompiledRuleId(n,r,o.repository);for(const a of s)e.push({debugSelector:t,matcher:a.matcher,ruleId:i,grammar:o,priority:a.priority})}function PT(e,t){if(t.length<e.length)return!1;let n=0;return e.every(r=>{for(let o=n;o<t.length;o++)if(Nze(t[o],r))return n=o+1,!0;return!1})}function Nze(e,t){if(!e)return!1;if(e===t)return!0;const n=t.length;return e.length>n&&e.substr(0,n)===t&&e[n]==="."}var Ize=class{constructor(e,t,n,r,o,s,i,a){Ze(this,"_rootId");Ze(this,"_lastRuleId");Ze(this,"_ruleId2desc");Ze(this,"_includedGrammars");Ze(this,"_grammarRepository");Ze(this,"_grammar");Ze(this,"_injections");Ze(this,"_basicScopeAttributesProvider");Ze(this,"_tokenTypeMatchers");if(this._rootScopeName=e,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new xze(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=i,this._grammar=Vz(t,null),this._injections=null,this._tokenTypeMatchers=[],o)for(const l of Object.keys(o)){const c=MT(l,PT);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:o[l]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e={lookup:o=>o===this._rootScopeName?this._grammar:this.getExternalGrammar(o),injections:o=>this._grammarRepository.injections(o)},t=[],n=this._rootScopeName,r=e.lookup(n);if(r){const o=r.injections;if(o)for(let i in o)Hz(t,i,o[i],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach(i=>{const a=this.getExternalGrammar(i);if(a){const l=a.injectionSelector;l&&Hz(t,l,a,this,a)}})}return t.sort((o,s)=>o.priority-s.priority),t}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(e){const t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=Vz(n,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,n=0){const r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t,n=0){const r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,n,r){this._rootId===-1&&(this._rootId=$te.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let o;if(!t||t===X6.NULL){o=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),f=ab.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),m=this.getRule(this._rootId).getName(null,null);let g;m?g=Gv.createRootAndLookUpScopeName(m,f,this):g=Gv.createRoot("unknown",f),t=new X6(null,this._rootId,-1,-1,!1,null,g,g)}else o=!1,t.reset();e=e+`
`;const s=this.createOnigString(e),i=s.content.length,a=new Mze(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),l=Bte(this,s,o,0,t,a,!0,r);return Ote(s),{lineLength:i,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function Vz(e,t){return e=KBe(e),e.repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var Gv=class Xu{constructor(t,n,r){this.parent=t,this.scopePath=n,this.tokenAttributes=r}static fromExtension(t,n){let r=t,o=(t==null?void 0:t.scopePath)??null;for(const s of n)o=jk.push(o,s.scopeNames),r=new Xu(r,o,s.encodedTokenAttributes);return r}static createRoot(t,n){return new Xu(null,new jk(null,t),n)}static createRootAndLookUpScopeName(t,n,r){const o=r.getMetadataForScope(t),s=new jk(null,t),i=r.themeProvider.themeMatch(s),a=Xu.mergeAttributes(n,o,i);return new Xu(null,s,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return Xu.equals(this,t)}static equals(t,n){do{if(t===n||!t&&!n)return!0;if(!t||!n||t.scopeName!==n.scopeName||t.tokenAttributes!==n.tokenAttributes)return!1;t=t.parent,n=n.parent}while(!0)}static mergeAttributes(t,n,r){let o=-1,s=0,i=0;return r!==null&&(o=r.fontStyle,s=r.foregroundId,i=r.backgroundId),ab.set(t,n.languageId,n.tokenType,null,o,s,i)}pushAttributed(t,n){if(t===null)return this;if(t.indexOf(" ")===-1)return Xu._pushAttributed(this,t,n);const r=t.split(/ /g);let o=this;for(const s of r)o=Xu._pushAttributed(o,s,n);return o}static _pushAttributed(t,n,r){const o=r.getMetadataForScope(n),s=t.scopePath.push(n),i=r.themeProvider.themeMatch(s),a=Xu.mergeAttributes(t.tokenAttributes,o,i);return new Xu(t,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(t){var o;const n=[];let r=this;for(;r&&r!==t;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(((o=r.parent)==null?void 0:o.scopePath)??null)}),r=r.parent;return r===t?n.reverse():void 0}},Cc,X6=(Cc=class{constructor(t,n,r,o,s,i,a,l){Ze(this,"_stackElementBrand");Ze(this,"_enterPos");Ze(this,"_anchorPos");Ze(this,"depth");this.parent=t,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=i,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=o}equals(t){return t===null?!1:Cc._equals(this,t)}static _equals(t,n){return t===n?!0:this._structuralEquals(t,n)?Gv.equals(t.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(t,n){do{if(t===n||!t&&!n)return!0;if(!t||!n||t.depth!==n.depth||t.ruleId!==n.ruleId||t.endRule!==n.endRule)return!1;t=t.parent,n=n.parent}while(!0)}clone(){return this}static _reset(t){for(;t;)t._enterPos=-1,t._anchorPos=-1,t=t.parent}reset(){Cc._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,n,r,o,s,i,a){return new Cc(this,t,n,r,o,s,i,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(t){return t.getRule(this.ruleId)}toString(){const t=[];return this._writeString(t,0),"["+t.join(",")+"]"}_writeString(t,n){var r,o;return this.parent&&(n=this.parent._writeString(t,n)),t[n++]=`(${this.ruleId}, ${(r=this.nameScopesList)==null?void 0:r.toString()}, ${(o=this.contentNameScopesList)==null?void 0:o.toString()})`,n}withContentNameScopesList(t){return this.contentNameScopesList===t?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,t)}withEndRule(t){return this.endRule===t?this:new Cc(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(t){let n=this;for(;n&&n._enterPos===t._enterPos;){if(n.ruleId===t.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){var t,n,r;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((n=this.nameScopesList)==null?void 0:n.getExtensionIfDefined(((t=this.parent)==null?void 0:t.nameScopesList)??null))??[],contentNameScopesList:((r=this.contentNameScopesList)==null?void 0:r.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(t,n){const r=Gv.fromExtension((t==null?void 0:t.nameScopesList)??null,n.nameScopesList);return new Cc(t,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,Gv.fromExtension(r,n.contentNameScopesList))}},Ze(Cc,"NULL",new Cc(null,0,0,0,!1,null,null,null)),Cc),Rze=class{constructor(e,t){Ze(this,"balancedBracketScopes");Ze(this,"unbalancedBracketScopes");Ze(this,"allowAny",!1);this.balancedBracketScopes=e.flatMap(n=>n==="*"?(this.allowAny=!0,[]):MT(n,PT).map(r=>r.matcher)),this.unbalancedBracketScopes=t.flatMap(n=>MT(n,PT).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}},Mze=class{constructor(e,t,n,r){Ze(this,"_emitBinaryTokens");Ze(this,"_lineText");Ze(this,"_tokens");Ze(this,"_binaryTokens");Ze(this,"_lastTokenEndIndex");Ze(this,"_tokenTypeOverrides");this.balancedBracketSelectors=r,this._emitBinaryTokens=e,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){var r;if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let o=(e==null?void 0:e.tokenAttributes)??0,s=!1;if((r=this.balancedBracketSelectors)!=null&&r.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=(e==null?void 0:e.getScopeNames())??[];for(const a of this._tokenTypeOverrides)a.matcher(i)&&(o=ab.set(o,0,a.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(i))}if(s&&(o=ab.set(o,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===o){this._lastTokenEndIndex=t;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(o),this._lastTokenEndIndex=t;return}const n=(e==null?void 0:e.getScopeNames())??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:n}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,o=this._binaryTokens.length;r<o;r++)n[r]=this._binaryTokens[r];return n}},Dze=class{constructor(e,t){Ze(this,"_grammars",new Map);Ze(this,"_rawGrammars",new Map);Ze(this,"_injectionGrammars",new Map);Ze(this,"_theme");this._onigLib=t,this._theme=e}dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}grammarForScopeName(e,t,n,r,o){if(!this._grammars.has(e)){let s=this._rawGrammars.get(e);if(!s)return null;this._grammars.set(e,Aze(e,s,t,n,r,o,this,this._onigLib))}return this._grammars.get(e)}},Oze=class{constructor(t){Ze(this,"_options");Ze(this,"_syncRegistry");Ze(this,"_ensureGrammarCache");this._options=t,this._syncRegistry=new Dze(RT.createFromRawTheme(t.theme,t.colorMap),t.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(t,n){this._syncRegistry.setTheme(RT.createFromRawTheme(t,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(t,n,r){return this.loadGrammarWithConfiguration(t,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(t,n,r){return this._loadGrammar(t,n,r.embeddedLanguages,r.tokenTypes,new Rze(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(t){return this._loadGrammar(t,0,null,null,null)}_loadGrammar(t,n,r,o,s){const i=new cze(this._syncRegistry,t);for(;i.Q.length>0;)i.Q.map(a=>this._loadSingleGrammar(a.scopeName)),i.processQueue();return this._grammarForScopeName(t,n,r,o,s)}_loadSingleGrammar(t){this._ensureGrammarCache.has(t)||(this._doLoadSingleGrammar(t),this._ensureGrammarCache.set(t,!0))}_doLoadSingleGrammar(t){const n=this._options.loadGrammar(t);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(t):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(t,n=[],r=0,o=null){return this._syncRegistry.addGrammar(t,n),this._grammarForScopeName(t.scopeName,r,o)}_grammarForScopeName(t,n=0,r=null,o=null,s=null){return this._syncRegistry.grammarForScopeName(t,n,r,o,s)}},Q6=X6.NULL;const jte=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];let Pw=class{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}};Pw.prototype.normal={};Pw.prototype.property={};Pw.prototype.space=void 0;function Ute(e,t){const n={},r={};for(const o of e)Object.assign(n,o.property),Object.assign(r,o.normal);return new Pw(n,r,t)}function Vx(e){return e.toLowerCase()}let wl=class{constructor(t,n){this.attribute=n,this.property=t}};wl.prototype.attribute="";wl.prototype.booleanish=!1;wl.prototype.boolean=!1;wl.prototype.commaOrSpaceSeparated=!1;wl.prototype.commaSeparated=!1;wl.prototype.defined=!1;wl.prototype.mustUseProperty=!1;wl.prototype.number=!1;wl.prototype.overloadedBoolean=!1;wl.prototype.property="";wl.prototype.spaceSeparated=!1;wl.prototype.space=void 0;let Pze=0;const yr=$m(),di=$m(),eI=$m(),Dt=$m(),Jo=$m(),M1=$m(),Bl=$m();function $m(){return 2**++Pze}const tI=Object.freeze(Object.defineProperty({__proto__:null,boolean:yr,booleanish:di,commaOrSpaceSeparated:Bl,commaSeparated:M1,number:Dt,overloadedBoolean:eI,spaceSeparated:Jo},Symbol.toStringTag,{value:"Module"})),Hk=Object.keys(tI);let H7=class extends wl{constructor(t,n,r,o){let s=-1;if(super(t,n),qz(this,"space",o),typeof r=="number")for(;++s<Hk.length;){const i=Hk[s];qz(this,Hk[s],(r&tI[i])===tI[i])}}};H7.prototype.defined=!0;function qz(e,t,n){n&&(e[t]=n)}function Rb(e){const t={},n={};for(const[r,o]of Object.entries(e.properties)){const s=new H7(r,e.transform(e.attributes||{},r),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Vx(r)]=r,n[Vx(s.attribute)]=r}return new Pw(t,n,e.space)}const Hte=Rb({properties:{ariaActiveDescendant:null,ariaAtomic:di,ariaAutoComplete:null,ariaBusy:di,ariaChecked:di,ariaColCount:Dt,ariaColIndex:Dt,ariaColSpan:Dt,ariaControls:Jo,ariaCurrent:null,ariaDescribedBy:Jo,ariaDetails:null,ariaDisabled:di,ariaDropEffect:Jo,ariaErrorMessage:null,ariaExpanded:di,ariaFlowTo:Jo,ariaGrabbed:di,ariaHasPopup:null,ariaHidden:di,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Jo,ariaLevel:Dt,ariaLive:null,ariaModal:di,ariaMultiLine:di,ariaMultiSelectable:di,ariaOrientation:null,ariaOwns:Jo,ariaPlaceholder:null,ariaPosInSet:Dt,ariaPressed:di,ariaReadOnly:di,ariaRelevant:null,ariaRequired:di,ariaRoleDescription:Jo,ariaRowCount:Dt,ariaRowIndex:Dt,ariaRowSpan:Dt,ariaSelected:di,ariaSetSize:Dt,ariaSort:null,ariaValueMax:Dt,ariaValueMin:Dt,ariaValueNow:Dt,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Vte(e,t){return t in e?e[t]:t}function qte(e,t){return Vte(e,t.toLowerCase())}const Lze=Rb({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:M1,acceptCharset:Jo,accessKey:Jo,action:null,allow:null,allowFullScreen:yr,allowPaymentRequest:yr,allowUserMedia:yr,alt:null,as:null,async:yr,autoCapitalize:null,autoComplete:Jo,autoFocus:yr,autoPlay:yr,blocking:Jo,capture:null,charSet:null,checked:yr,cite:null,className:Jo,cols:Dt,colSpan:null,content:null,contentEditable:di,controls:yr,controlsList:Jo,coords:Dt|M1,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yr,defer:yr,dir:null,dirName:null,disabled:yr,download:eI,draggable:di,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yr,formTarget:null,headers:Jo,height:Dt,hidden:eI,high:Dt,href:null,hrefLang:null,htmlFor:Jo,httpEquiv:Jo,id:null,imageSizes:null,imageSrcSet:null,inert:yr,inputMode:null,integrity:null,is:null,isMap:yr,itemId:null,itemProp:Jo,itemRef:Jo,itemScope:yr,itemType:Jo,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yr,low:Dt,manifest:null,max:null,maxLength:Dt,media:null,method:null,min:null,minLength:Dt,multiple:yr,muted:yr,name:null,nonce:null,noModule:yr,noValidate:yr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yr,optimum:Dt,pattern:null,ping:Jo,placeholder:null,playsInline:yr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yr,referrerPolicy:null,rel:Jo,required:yr,reversed:yr,rows:Dt,rowSpan:Dt,sandbox:Jo,scope:null,scoped:yr,seamless:yr,selected:yr,shadowRootClonable:yr,shadowRootDelegatesFocus:yr,shadowRootMode:null,shape:null,size:Dt,sizes:null,slot:null,span:Dt,spellCheck:di,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Dt,step:null,style:null,tabIndex:Dt,target:null,title:null,translate:null,type:null,typeMustMatch:yr,useMap:null,value:di,width:Dt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Jo,axis:null,background:null,bgColor:null,border:Dt,borderColor:null,bottomMargin:Dt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yr,declare:yr,event:null,face:null,frame:null,frameBorder:null,hSpace:Dt,leftMargin:Dt,link:null,longDesc:null,lowSrc:null,marginHeight:Dt,marginWidth:Dt,noResize:yr,noHref:yr,noShade:yr,noWrap:yr,object:null,profile:null,prompt:null,rev:null,rightMargin:Dt,rules:null,scheme:null,scrolling:di,standby:null,summary:null,text:null,topMargin:Dt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Dt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yr,disableRemotePlayback:yr,prefix:null,property:null,results:Dt,security:null,unselectable:null},space:"html",transform:qte}),$ze=Rb({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Bl,accentHeight:Dt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Dt,amplitude:Dt,arabicForm:null,ascent:Dt,attributeName:null,attributeType:null,azimuth:Dt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Dt,by:null,calcMode:null,capHeight:Dt,className:Jo,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Dt,diffuseConstant:Dt,direction:null,display:null,dur:null,divisor:Dt,dominantBaseline:null,download:yr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Dt,enableBackground:null,end:null,event:null,exponent:Dt,externalResourcesRequired:null,fill:null,fillOpacity:Dt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:M1,g2:M1,glyphName:M1,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Dt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Dt,horizOriginX:Dt,horizOriginY:Dt,id:null,ideographic:Dt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Dt,k:Dt,k1:Dt,k2:Dt,k3:Dt,k4:Dt,kernelMatrix:Bl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Dt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Dt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Dt,overlineThickness:Dt,paintOrder:null,panose1:null,path:null,pathLength:Dt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Jo,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Dt,pointsAtY:Dt,pointsAtZ:Dt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Bl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Bl,rev:Bl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Bl,requiredFeatures:Bl,requiredFonts:Bl,requiredFormats:Bl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Dt,specularExponent:Dt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Dt,strikethroughThickness:Dt,string:null,stroke:null,strokeDashArray:Bl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Dt,strokeOpacity:Dt,strokeWidth:null,style:null,surfaceScale:Dt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Bl,tabIndex:Dt,tableValues:null,target:null,targetX:Dt,targetY:Dt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Bl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Dt,underlineThickness:Dt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Dt,values:null,vAlphabetic:Dt,vMathematical:Dt,vectorEffect:null,vHanging:Dt,vIdeographic:Dt,version:null,vertAdvY:Dt,vertOriginX:Dt,vertOriginY:Dt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Dt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Vte}),Gte=Rb({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Wte=Rb({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:qte}),Yte=Rb({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Fze={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Bze=/[A-Z]/g,Gz=/-[a-z]/g,zze=/^data[-\w.:]+$/i;function IC(e,t){const n=Vx(t);let r=t,o=wl;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&zze.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Gz,Uze);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Gz.test(s)){let i=s.replace(Bze,jze);i.charAt(0)!=="-"&&(i="-"+i),t="data"+i}}o=H7}return new o(r,t)}function jze(e){return"-"+e.toLowerCase()}function Uze(e){return e.charAt(1).toUpperCase()}const Lw=Ute([Hte,Lze,Gte,Wte,Yte],"html"),K0=Ute([Hte,$ze,Gte,Wte,Yte],"svg"),Wz={}.hasOwnProperty;function V7(e,t){const n=t||{};function r(o,...s){let i=r.invalid;const a=r.handlers;if(o&&Wz.call(o,e)){const l=String(o[e]);i=Wz.call(a,l)?a[l]:r.unknown}if(i)return i.call(this,o,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Hze=/["&'<>`]/g,Vze=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qze=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,Gze=/[|\\{}()[\]^$+*?.]/g,Yz=new WeakMap;function Wze(e,t){if(e=e.replace(t.subset?Yze(t.subset):Hze,r),t.subset||t.escapeOnly)return e;return e.replace(Vze,n).replace(qze,r);function n(o,s,i){return t.format((o.charCodeAt(0)-55296)*1024+o.charCodeAt(1)-56320+65536,i.charCodeAt(s+2),t)}function r(o,s,i){return t.format(o.charCodeAt(0),i.charCodeAt(s+1),t)}}function Yze(e){let t=Yz.get(e);return t||(t=Kze(e),Yz.set(e,t)),t}function Kze(e){const t=[];let n=-1;for(;++n<e.length;)t.push(e[n].replace(Gze,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}const Zze=/[\dA-Fa-f]/;function Jze(e,t,n){const r="&#x"+e.toString(16).toUpperCase();return n&&t&&!Zze.test(String.fromCharCode(t))?r:r+";"}const Xze=/\d/;function Qze(e,t,n){const r="&#"+String(e);return n&&t&&!Xze.test(String.fromCharCode(t))?r:r+";"}const eje=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Vk={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},tje=["cent","copy","divide","gt","lt","not","para","times"],Kte={}.hasOwnProperty,nI={};let q2;for(q2 in Vk)Kte.call(Vk,q2)&&(nI[Vk[q2]]=q2);const nje=/[^\dA-Za-z]/;function rje(e,t,n,r){const o=String.fromCharCode(e);if(Kte.call(nI,o)){const s=nI[o],i="&"+s;return n&&eje.includes(s)&&!tje.includes(s)&&(!r||t&&t!==61&&nje.test(String.fromCharCode(t)))?i:i+";"}return""}function oje(e,t,n){let r=Jze(e,t,n.omitOptionalSemicolons),o;if((n.useNamedReferences||n.useShortestReferences)&&(o=rje(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!o)&&n.useShortestReferences){const s=Qze(e,t,n.omitOptionalSemicolons);s.length<r.length&&(r=s)}return o&&(!n.useShortestReferences||o.length<r.length)?o:r}function D1(e,t){return Wze(e,Object.assign({format:oje},t))}const sje=/^>|^->|<!--|-->|--!>|<!-$/g,ije=[">"],aje=["<",">"];function lje(e,t,n,r){return r.settings.bogusComments?"<?"+D1(e.value,Object.assign({},r.settings.characterReferences,{subset:ije}))+">":"<!--"+e.value.replace(sje,o)+"-->";function o(s){return D1(s,Object.assign({},r.settings.characterReferences,{subset:aje}))}}function cje(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function LT(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,o=n.indexOf(t);for(;o!==-1;)r++,o=n.indexOf(t,o+t.length);return r}function Kz(e){const t=[],n=String(e||"");let r=n.indexOf(","),o=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const i=n.slice(o,r).trim();(i||!s)&&t.push(i),o=r+1,r=n.indexOf(",",o)}return t}function q7(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function Zz(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function G7(e){return e.join(" ").trim()}const uje=/[ \t\n\f\r]/g;function RC(e){return typeof e=="object"?e.type==="text"?Jz(e.value):!1:Jz(e)}function Jz(e){return e.replace(uje,"")===""}const Oi=Jte(1),Zte=Jte(-1),dje=[];function Jte(e){return t;function t(n,r,o){const s=n?n.children:dje;let i=(r||0)+e,a=s[i];if(!o)for(;a&&RC(a);)i+=e,a=s[i];return a}}const fje={}.hasOwnProperty;function Xte(e){return t;function t(n,r,o){return fje.call(e,n.tagName)&&e[n.tagName](n,r,o)}}const W7=Xte({body:pje,caption:qk,colgroup:qk,dd:yje,dt:bje,head:qk,html:hje,li:gje,optgroup:vje,option:xje,p:mje,rp:Xz,rt:Xz,tbody:Eje,td:Qz,tfoot:_je,th:Qz,thead:wje,tr:Sje});function qk(e,t,n){const r=Oi(n,t,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&RC(r.value.charAt(0)))}function hje(e,t,n){const r=Oi(n,t);return!r||r.type!=="comment"}function pje(e,t,n){const r=Oi(n,t);return!r||r.type!=="comment"}function mje(e,t,n){const r=Oi(n,t);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function gje(e,t,n){const r=Oi(n,t);return!r||r.type==="element"&&r.tagName==="li"}function bje(e,t,n){const r=Oi(n,t);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function yje(e,t,n){const r=Oi(n,t);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function Xz(e,t,n){const r=Oi(n,t);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function vje(e,t,n){const r=Oi(n,t);return!r||r.type==="element"&&r.tagName==="optgroup"}function xje(e,t,n){const r=Oi(n,t);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function wje(e,t,n){const r=Oi(n,t);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function Eje(e,t,n){const r=Oi(n,t);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function _je(e,t,n){return!Oi(n,t)}function Sje(e,t,n){const r=Oi(n,t);return!r||r.type==="element"&&r.tagName==="tr"}function Qz(e,t,n){const r=Oi(n,t);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const Tje=Xte({body:Aje,colgroup:Nje,head:kje,html:Cje,tbody:Ije});function Cje(e){const t=Oi(e,-1);return!t||t.type!=="comment"}function kje(e){const t=new Set;for(const r of e.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(t.has(r.tagName))return!1;t.add(r.tagName)}const n=e.children[0];return!n||n.type==="element"}function Aje(e){const t=Oi(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&RC(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function Nje(e,t,n){const r=Zte(n,t),o=Oi(e,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&W7(r,n.children.indexOf(r),n)?!1:!!(o&&o.type==="element"&&o.tagName==="col")}function Ije(e,t,n){const r=Zte(n,t),o=Oi(e,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&W7(r,n.children.indexOf(r),n)?!1:!!(o&&o.type==="element"&&o.tagName==="tr")}const G2={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Rje(e,t,n,r){const o=r.schema,s=o.space==="svg"?!1:r.settings.omitOptionalTags;let i=o.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase());const a=[];let l;o.space==="html"&&e.tagName==="svg"&&(r.schema=K0);const c=Mje(r,e.properties),u=r.all(o.space==="html"&&e.tagName==="template"?e.content:e);return r.schema=o,u&&(i=!1),(c||!s||!Tje(e,t,n))&&(a.push("<",e.tagName,c?" "+c:""),i&&(o.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!i&&(!s||!W7(e,t,n))&&a.push("</"+e.tagName+">"),a.join("")}function Mje(e,t){const n=[];let r=-1,o;if(t){for(o in t)if(t[o]!==null&&t[o]!==void 0){const s=Dje(e,o,t[o]);s&&n.push(s)}}for(;++r<n.length;){const s=e.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&s!=='"'&&s!=="'"&&(n[r]+=" ")}return n.join("")}function Dje(e,t,n){const r=IC(e.schema,t),o=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,s=e.settings.allowDangerousCharacters?0:1;let i=e.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=D1(r.attribute,Object.assign({},e.settings.characterReferences,{subset:G2.name[o][s]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?q7:G7)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?l:(e.settings.preferUnquoted&&(a=D1(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:G2.unquoted[o][s]}))),a!==n&&(e.settings.quoteSmart&&LT(n,i)>LT(n,e.alternative)&&(i=e.alternative),a=i+D1(n,Object.assign({},e.settings.characterReferences,{subset:(i==="'"?G2.single:G2.double)[o][s],attribute:!0}))+i),l+(a&&"="+a))}const Oje=["<","&"];function Qte(e,t,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:D1(e.value,Object.assign({},r.settings.characterReferences,{subset:Oje}))}function Pje(e,t,n,r){return r.settings.allowDangerousHtml?e.value:Qte(e,t,n,r)}function Lje(e,t,n,r){return r.all(e)}const $je=V7("type",{invalid:Fje,unknown:Bje,handlers:{comment:lje,doctype:cje,element:Rje,raw:Pje,root:Lje,text:Qte}});function Fje(e){throw new Error("Expected node, not `"+e+"`")}function Bje(e){const t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}const zje={},jje={},Uje=[];function Hje(e,t){const n=t||zje,r=n.quote||'"',o=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:Vje,all:qje,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||jte,characterReferences:n.characterReferences||jje,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?K0:Lw,quote:r,alternative:o}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function Vje(e,t,n){return $je(e,t,n,this)}function qje(e){const t=[],n=e&&e.children||Uje;let r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function $T(e,t){const n=typeof e=="string"?{}:{...e.colorReplacements},r=typeof e=="string"?e:e.name;for(const[o,s]of Object.entries((t==null?void 0:t.colorReplacements)||{}))typeof s=="string"?n[o]=s:o===r&&Object.assign(n,s);return n}function E0(e,t){return e&&((t==null?void 0:t[e==null?void 0:e.toLowerCase()])||e)}function Gje(e){return Array.isArray(e)?e:[e]}async function ene(e){return Promise.resolve(typeof e=="function"?e():e).then(t=>t.default||t)}function Y7(e){return!e||["plaintext","txt","text","plain"].includes(e)}function tne(e){return e==="ansi"||Y7(e)}function K7(e){return e==="none"}function nne(e){return K7(e)}function rne(e,t){var r;if(!t)return e;e.properties||(e.properties={}),(r=e.properties).class||(r.class=[]),typeof e.properties.class=="string"&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]);const n=Array.isArray(t)?t:t.split(/\s+/g);for(const o of n)o&&!e.properties.class.includes(o)&&e.properties.class.push(o);return e}function MC(e,t=!1){var s;const n=e.split(/(\r?\n)/g);let r=0;const o=[];for(let i=0;i<n.length;i+=2){const a=t?n[i]+(n[i+1]||""):n[i];o.push([a,r]),r+=n[i].length,r+=((s=n[i+1])==null?void 0:s.length)||0}return o}function Wje(e){const t=MC(e,!0).map(([o])=>o);function n(o){if(o===e.length)return{line:t.length-1,character:t[t.length-1].length};let s=o,i=0;for(const a of t){if(s<a.length)break;s-=a.length,i++}return{line:i,character:s}}function r(o,s){let i=0;for(let a=0;a<o;a++)i+=t[a].length;return i+=s,i}return{lines:t,indexToPos:n,posToIndex:r}}function Yje(e,t,n){const r=new Set;for(const s of e.matchAll(/lang=["']([\w-]+)["']/g))r.add(s[1]);for(const s of e.matchAll(/(?:```|~~~)([\w-]+)/g))r.add(s[1]);for(const s of e.matchAll(/\\begin\{([\w-]+)\}/g))r.add(s[1]);if(!n)return Array.from(r);const o=n.getBundledLanguages();return Array.from(r).filter(s=>s&&o[s])}const Z7="light-dark()",Kje=["color","background-color"];function Zje(e,t){let n=0;const r=[];for(const o of t)o>n&&r.push({...e,content:e.content.slice(n,o),offset:e.offset+n}),n=o;return n<e.content.length&&r.push({...e,content:e.content.slice(n),offset:e.offset+n}),r}function Jje(e,t){const n=Array.from(t instanceof Set?t:new Set(t)).sort((r,o)=>r-o);return n.length?e.map(r=>r.flatMap(o=>{const s=n.filter(i=>o.offset<i&&i<o.offset+o.content.length).map(i=>i-o.offset).sort((i,a)=>i-a);return s.length?Zje(o,s):o})):e}function Xje(e,t,n,r,o="css-vars"){const s={content:e.content,explanation:e.explanation,offset:e.offset},i=t.map(u=>FT(e.variants[u])),a=new Set(i.flatMap(u=>Object.keys(u))),l={},c=(u,f)=>{const m=f==="color"?"":f==="background-color"?"-bg":`-${f}`;return n+t[u]+(f==="color"?"":m)};return i.forEach((u,f)=>{for(const m of a){const g=u[m]||"inherit";if(f===0&&r&&Kje.includes(m))if(r===Z7&&i.length>1){const y=t.findIndex(T=>T==="light"),v=t.findIndex(T=>T==="dark");if(y===-1||v===-1)throw new hi('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const w=i[y][m]||"inherit",_=i[v][m]||"inherit";l[m]=`light-dark(${w}, ${_})`,o==="css-vars"&&(l[c(f,m)]=g)}else l[m]=g;else o==="css-vars"&&(l[c(f,m)]=g)}}),s.htmlStyle=l,s}function FT(e){const t={};if(e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle){e.fontStyle&ya.Italic&&(t["font-style"]="italic"),e.fontStyle&ya.Bold&&(t["font-weight"]="bold");const n=[];e.fontStyle&ya.Underline&&n.push("underline"),e.fontStyle&ya.Strikethrough&&n.push("line-through"),n.length&&(t["text-decoration"]=n.join(" "))}return t}function rI(e){return typeof e=="string"?e:Object.entries(e).map(([t,n])=>`${t}:${n}`).join(";")}const one=new WeakMap;function DC(e,t){one.set(e,t)}function qx(e){return one.get(e)}class Mb{constructor(...t){Ze(this,"_stacks",{});Ze(this,"lang");if(t.length===2){const[n,r]=t;this.lang=r,this._stacks=n}else{const[n,r,o]=t;this.lang=r,this._stacks={[o]:n}}}get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(t,n){return new Mb(Object.fromEntries(Gje(n).map(r=>[r,Q6])),t)}getInternalStack(t=this.theme){return this._stacks[t]}getScopes(t=this.theme){return Qje(this._stacks[t])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function Qje(e){const t=[],n=new Set;function r(o){var i;if(n.has(o))return;n.add(o);const s=(i=o==null?void 0:o.nameScopesList)==null?void 0:i.scopeName;s&&t.push(s),o.parent&&r(o.parent)}return r(e),t}function eUe(e,t){if(!(e instanceof Mb))throw new hi("Invalid grammar state");return e.getInternalStack(t)}function tUe(){const e=new WeakMap;function t(n){if(!e.has(n.meta)){let r=function(i){if(typeof i=="number"){if(i<0||i>n.source.length)throw new hi(`Invalid decoration offset: ${i}. Code length: ${n.source.length}`);return{...o.indexToPos(i),offset:i}}else{const a=o.lines[i.line];if(a===void 0)throw new hi(`Invalid decoration position ${JSON.stringify(i)}. Lines length: ${o.lines.length}`);let l=i.character;if(l<0&&(l=a.length+l),l<0||l>a.length)throw new hi(`Invalid decoration position ${JSON.stringify(i)}. Line ${i.line} length: ${a.length}`);return{...i,character:l,offset:o.posToIndex(i.line,l)}}};const o=Wje(n.source),s=(n.options.decorations||[]).map(i=>({...i,start:r(i.start),end:r(i.end)}));nUe(s),e.set(n.meta,{decorations:s,converter:o,source:n.source})}return e.get(n.meta)}return{name:"shiki:decorations",tokens(n){var i;if(!((i=this.options.decorations)!=null&&i.length))return;const o=t(this).decorations.flatMap(a=>[a.start.offset,a.end.offset]);return Jje(n,o)},code(n){var u;if(!((u=this.options.decorations)!=null&&u.length))return;const r=t(this),o=Array.from(n.children).filter(f=>f.type==="element"&&f.tagName==="span");if(o.length!==r.converter.lines.length)throw new hi(`Number of lines in code element (${o.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(f,m,g,y){const v=o[f];let w="",_=-1,T=-1;if(m===0&&(_=0),g===0&&(T=0),g===Number.POSITIVE_INFINITY&&(T=v.children.length),_===-1||T===-1)for(let M=0;M<v.children.length;M++)w+=sne(v.children[M]),_===-1&&w.length===m&&(_=M+1),T===-1&&w.length===g&&(T=M+1);if(_===-1)throw new hi(`Failed to find start index for decoration ${JSON.stringify(y.start)}`);if(T===-1)throw new hi(`Failed to find end index for decoration ${JSON.stringify(y.end)}`);const k=v.children.slice(_,T);if(!y.alwaysWrap&&k.length===v.children.length)a(v,y,"line");else if(!y.alwaysWrap&&k.length===1&&k[0].type==="element")a(k[0],y,"token");else{const M={type:"element",tagName:"span",properties:{},children:k};a(M,y,"wrapper"),v.children.splice(_,k.length,M)}}function i(f,m){o[f]=a(o[f],m,"line")}function a(f,m,g){var w;const y=m.properties||{},v=m.transform||(_=>_);return f.tagName=m.tagName||"span",f.properties={...f.properties,...y,class:f.properties.class},(w=m.properties)!=null&&w.class&&rne(f,m.properties.class),f=v(f,g)||f,f}const l=[],c=r.decorations.sort((f,m)=>m.start.offset-f.start.offset||f.end.offset-m.end.offset);for(const f of c){const{start:m,end:g}=f;if(m.line===g.line)s(m.line,m.character,g.character,f);else if(m.line<g.line){s(m.line,m.character,Number.POSITIVE_INFINITY,f);for(let y=m.line+1;y<g.line;y++)l.unshift(()=>i(y,f));s(g.line,0,g.character,f)}}l.forEach(f=>f())}}}function nUe(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.start.offset>n.end.offset)throw new hi(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=t+1;r<e.length;r++){const o=e[r],s=n.start.offset<=o.start.offset&&o.start.offset<n.end.offset,i=n.start.offset<o.end.offset&&o.end.offset<=n.end.offset,a=o.start.offset<=n.start.offset&&n.start.offset<o.end.offset,l=o.start.offset<n.end.offset&&n.end.offset<=o.end.offset;if(s||i||a||l){if(s&&i||a&&l||a&&n.start.offset===n.end.offset||i&&o.start.offset===o.end.offset)continue;throw new hi(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(o.start)} intersect.`)}}}}function sne(e){return e.type==="text"?e.value:e.type==="element"?e.children.map(sne).join(""):""}const rUe=[tUe()];function BT(e){const t=oUe(e.transformers||[]);return[...t.pre,...t.normal,...t.post,...rUe]}function oUe(e){const t=[],n=[],r=[];for(const o of e)switch(o.enforce){case"pre":t.push(o);break;case"post":n.push(o);break;default:r.push(o)}return{pre:t,post:n,normal:r}}var Xp=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Gk={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function sUe(e,t){const n=e.indexOf("\x1B",t);if(n!==-1&&e[n+1]==="["){const r=e.indexOf("m",n);if(r!==-1)return{sequence:e.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:e.length}}function ej(e){const t=e.shift();if(t==="2"){const n=e.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(t==="5"){const n=e.shift();if(n)return{type:"table",index:Number(n)}}}function iUe(e){const t=[];for(;e.length>0;){const n=e.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)t.push({type:"resetAll"});else if(r<=9)Gk[r]&&t.push({type:"setDecoration",value:Gk[r]});else if(r<=29){const o=Gk[r-20];o&&(t.push({type:"resetDecoration",value:o}),o==="dim"&&t.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)t.push({type:"setForegroundColor",value:{type:"named",name:Xp[r-30]}});else if(r===38){const o=ej(e);o&&t.push({type:"setForegroundColor",value:o})}else if(r===39)t.push({type:"resetForegroundColor"});else if(r<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:Xp[r-40]}});else if(r===48){const o=ej(e);o&&t.push({type:"setBackgroundColor",value:o})}else r===49?t.push({type:"resetBackgroundColor"}):r===53?t.push({type:"setDecoration",value:"overline"}):r===55?t.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?t.push({type:"setForegroundColor",value:{type:"named",name:Xp[r-90+8]}}):r>=100&&r<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:Xp[r-100+8]}})}return t}function aUe(){let e=null,t=null,n=new Set;return{parse(r){const o=[];let s=0;do{const i=sUe(r,s),a=i.sequence?r.substring(s,i.startPosition):r.substring(s);if(a.length>0&&o.push({value:a,foreground:e,background:t,decorations:new Set(n)}),i.sequence){const l=iUe(i.sequence);for(const c of l)c.type==="resetAll"?(e=null,t=null,n.clear()):c.type==="resetForegroundColor"?e=null:c.type==="resetBackgroundColor"?t=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?e=c.value:c.type==="setBackgroundColor"?t=c.value:c.type==="setDecoration"&&n.add(c.value)}s=i.position}while(s<r.length);return o}}}var lUe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function cUe(e=lUe){function t(a){return e[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function o(){if(r)return r;r=[];for(let c=0;c<Xp.length;c++)r.push(t(Xp[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let f=0;f<6;f++)r.push(n([a[c],a[u],a[f]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function s(a){return o()[a]}function i(a){switch(a.type){case"named":return t(a.name);case"rgb":return n(a.rgb);case"table":return s(a.index)}}return{value:i}}const uUe={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function dUe(e,t,n){const r=$T(e,n),o=MC(t),s=Object.fromEntries(Xp.map(l=>{var f;const c=`terminal.ansi${l[0].toUpperCase()}${l.substring(1)}`,u=(f=e.colors)==null?void 0:f[c];return[l,u||uUe[l]]})),i=cUe(s),a=aUe();return o.map(l=>a.parse(l[0]).map(c=>{let u,f;c.decorations.has("reverse")?(u=c.background?i.value(c.background):e.bg,f=c.foreground?i.value(c.foreground):e.fg):(u=c.foreground?i.value(c.foreground):e.fg,f=c.background?i.value(c.background):void 0),u=E0(u,r),f=E0(f,r),c.decorations.has("dim")&&(u=fUe(u));let m=ya.None;return c.decorations.has("bold")&&(m|=ya.Bold),c.decorations.has("italic")&&(m|=ya.Italic),c.decorations.has("underline")&&(m|=ya.Underline),c.decorations.has("strikethrough")&&(m|=ya.Strikethrough),{content:c.value,offset:l[1],color:u,bgColor:f,fontStyle:m}}))}function fUe(e){const t=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/i);if(t)if(t[3]){const r=Math.round(Number.parseInt(t[3],16)/2).toString(16).padStart(2,"0");return`#${t[1]}${t[2]}${r}`}else return t[2]?`#${t[1]}${t[2]}80`:`#${Array.from(t[1]).map(r=>`${r}${r}`).join("")}80`;const n=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:e}function J7(e,t,n={}){const{lang:r="text",theme:o=e.getLoadedThemes()[0]}=n;if(Y7(r)||K7(o))return MC(t).map(l=>[{content:l[0],offset:l[1]}]);const{theme:s,colorMap:i}=e.setTheme(o);if(r==="ansi")return dUe(s,t,n);const a=e.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new hi(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(s.name))throw new hi(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return pUe(t,a,s,i,n)}function hUe(...e){if(e.length===2)return qx(e[1]);const[t,n,r={}]=e,{lang:o="text",theme:s=t.getLoadedThemes()[0]}=r;if(Y7(o)||K7(s))throw new hi("Plain language does not have grammar state");if(o==="ansi")throw new hi("ANSI language does not have grammar state");const{theme:i,colorMap:a}=t.setTheme(s),l=t.getLanguage(o);return new Mb(zT(n,l,i,a,r).stateStack,l.name,i.name)}function pUe(e,t,n,r,o){const s=zT(e,t,n,r,o),i=new Mb(zT(e,t,n,r,o).stateStack,t.name,n.name);return DC(s.tokens,i),s.tokens}function zT(e,t,n,r,o){const s=$T(n,o),{tokenizeMaxLineLength:i=0,tokenizeTimeLimit:a=500}=o,l=MC(e);let c=o.grammarState?eUe(o.grammarState,n.name)??Q6:o.grammarContextCode!=null?zT(o.grammarContextCode,t,n,r,{...o,grammarState:void 0,grammarContextCode:void 0}).stateStack:Q6,u=[];const f=[];for(let m=0,g=l.length;m<g;m++){const[y,v]=l[m];if(y===""){u=[],f.push([]);continue}if(i>0&&y.length>=i){u=[],f.push([{content:y,offset:v,color:"",fontStyle:0}]);continue}let w,_,T;o.includeExplanation&&(w=t.tokenizeLine(y,c,a),_=w.tokens,T=0);const k=t.tokenizeLine2(y,c,a),M=k.tokens.length/2;for(let D=0;D<M;D++){const I=k.tokens[2*D],P=D+1<M?k.tokens[2*D+2]:y.length;if(I===P)continue;const B=k.tokens[2*D+1],U=E0(r[ab.getForeground(B)],s),j=ab.getFontStyle(B),H={content:y.substring(I,P),offset:v+I,color:U,fontStyle:j};if(o.includeExplanation){const q=[];if(o.includeExplanation!=="scopeName")for(const Z of n.settings){let X;switch(typeof Z.scope){case"string":X=Z.scope.split(/,/).map(J=>J.trim());break;case"object":X=Z.scope;break;default:continue}q.push({settings:Z,selectors:X.map(J=>J.split(/ /))})}H.explanation=[];let z=0;for(;I+z<P;){const Z=_[T],X=y.substring(Z.startIndex,Z.endIndex);z+=X.length,H.explanation.push({content:X,scopes:o.includeExplanation==="scopeName"?mUe(Z.scopes):gUe(q,Z.scopes)}),T+=1}}u.push(H)}f.push(u),u=[],c=k.ruleStack}return{tokens:f,stateStack:c}}function mUe(e){return e.map(t=>({scopeName:t}))}function gUe(e,t){const n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];n[r]={scopeName:s,themeMatches:yUe(e,s,t.slice(0,r))}}return n}function tj(e,t){return e===t||t.substring(0,e.length)===e&&t[e.length]==="."}function bUe(e,t,n){if(!tj(e[e.length-1],t))return!1;let r=e.length-2,o=n.length-1;for(;r>=0&&o>=0;)tj(e[r],n[o])&&(r-=1),o-=1;return r===-1}function yUe(e,t,n){const r=[];for(const{selectors:o,settings:s}of e)for(const i of o)if(bUe(i,t,n)){r.push(s);break}return r}function ine(e,t,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),o=r.map(l=>{const c=J7(e,t,{...n,theme:l.theme}),u=qx(c),f=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:f}}),s=vUe(...o.map(l=>l.tokens)),i=s[0].map((l,c)=>l.map((u,f)=>{const m={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in n&&n.includeExplanation&&(m.explanation=u.explanation),s.forEach((g,y)=>{const{content:v,explanation:w,offset:_,...T}=g[c][f];m.variants[r[y].color]=T}),m})),a=o[0].state?new Mb(Object.fromEntries(o.map(l=>{var c;return[l.theme,(c=l.state)==null?void 0:c.getInternalStack(l.theme)]})),o[0].state.lang):void 0;return a&&DC(i,a),i}function vUe(...e){const t=e.map(()=>[]),n=e.length;for(let r=0;r<e[0].length;r++){const o=e.map(l=>l[r]),s=t.map(()=>[]);t.forEach((l,c)=>l.push(s[c]));const i=o.map(()=>0),a=o.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const u=a[c];u.content.length===l?(s[c].push(u),i[c]+=1,a[c]=o[c][i[c]]):(s[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return t}function jT(e,t,n){let r,o,s,i,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-",colorsRendering:f="css-vars"}=n,m=Object.entries(n.themes).filter(_=>_[1]).map(_=>({color:_[0],theme:_[1]})).sort((_,T)=>_.color===c?-1:T.color===c?1:0);if(m.length===0)throw new hi("`themes` option must not be empty");const g=ine(e,t,n);if(l=qx(g),c&&Z7!==c&&!m.find(_=>_.color===c))throw new hi(`\`themes\` option must contain the defaultColor key \`${c}\``);const y=m.map(_=>e.getTheme(_.theme)),v=m.map(_=>_.color);s=g.map(_=>_.map(T=>Xje(T,v,u,c,f))),l&&DC(s,l);const w=m.map(_=>$T(_.theme,n));o=nj(m,y,w,u,c,"fg",f),r=nj(m,y,w,u,c,"bg",f),i=`shiki-themes ${y.map(_=>_.name).join(" ")}`,a=c?void 0:[o,r].join(";")}else if("theme"in n){const c=$T(n.theme,n);s=J7(e,t,n);const u=e.getTheme(n.theme);r=E0(u.bg,c),o=E0(u.fg,c),i=u.name,l=qx(s)}else throw new hi("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:o,bg:r,themeName:i,rootStyle:a,grammarState:l}}function nj(e,t,n,r,o,s,i){return e.map((a,l)=>{const c=E0(t[l][s],n[l])||"inherit",u=`${r+a.color}${s==="bg"?"-bg":""}:${c}`;if(l===0&&o){if(o===Z7&&e.length>1){const f=e.findIndex(v=>v.color==="light"),m=e.findIndex(v=>v.color==="dark");if(f===-1||m===-1)throw new hi('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const g=E0(t[f][s],n[f])||"inherit",y=E0(t[m][s],n[m])||"inherit";return`light-dark(${g}, ${y});${u}`}return c}return i==="css-vars"?u:null}).filter(a=>!!a).join(";")}function UT(e,t,n,r={meta:{},options:n,codeToHast:(o,s)=>UT(e,o,s),codeToTokens:(o,s)=>jT(e,o,s)}){var y,v;let o=t;for(const w of BT(n))o=((y=w.preprocess)==null?void 0:y.call(r,o,n))||o;let{tokens:s,fg:i,bg:a,themeName:l,rootStyle:c,grammarState:u}=jT(e,o,n);const{mergeWhitespaces:f=!0,mergeSameStyleTokens:m=!1}=n;f===!0?s=wUe(s):f==="never"&&(s=EUe(s)),m&&(s=_Ue(s));const g={...r,get source(){return o}};for(const w of BT(n))s=((v=w.tokens)==null?void 0:v.call(g,s))||s;return xUe(s,{...n,fg:i,bg:a,themeName:l,rootStyle:c},g,u)}function xUe(e,t,n,r=qx(e)){var y,v,w,_;const o=BT(t),s=[],i={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=t;let c={type:"element",tagName:"pre",properties:{class:`shiki ${t.themeName||""}`,style:t.rootStyle||`background-color:${t.bg};color:${t.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(t.meta||{})).filter(([T])=>!T.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:s};const f=[],m={...n,structure:a,addClassToHast:rne,get source(){return n.source},get tokens(){return e},get options(){return t},get root(){return i},get pre(){return c},get code(){return u},get lines(){return f}};if(e.forEach((T,k)=>{var I,P;k&&(a==="inline"?i.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&s.push({type:"text",value:`
`}));let M={type:"element",tagName:"span",properties:{class:"line"},children:[]},D=0;for(const B of T){let U={type:"element",tagName:"span",properties:{...B.htmlAttrs},children:[{type:"text",value:B.content}]};const j=rI(B.htmlStyle||FT(B));j&&(U.properties.style=j);for(const H of o)U=((I=H==null?void 0:H.span)==null?void 0:I.call(m,U,k+1,D,M,B))||U;a==="inline"?i.children.push(U):a==="classic"&&M.children.push(U),D+=B.content.length}if(a==="classic"){for(const B of o)M=((P=B==null?void 0:B.line)==null?void 0:P.call(m,M,k+1))||M;f.push(M),s.push(M)}else a==="inline"&&f.push(M)}),a==="classic"){for(const T of o)u=((y=T==null?void 0:T.code)==null?void 0:y.call(m,u))||u;c.children.push(u);for(const T of o)c=((v=T==null?void 0:T.pre)==null?void 0:v.call(m,c))||c;i.children.push(c)}else if(a==="inline"){const T=[];let k={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const I of i.children)I.type==="element"&&I.tagName==="br"?(T.push(k),k={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(I.type==="element"||I.type==="text")&&k.children.push(I);T.push(k);let D={type:"element",tagName:"code",properties:{},children:T};for(const I of o)D=((w=I==null?void 0:I.code)==null?void 0:w.call(m,D))||D;i.children=[];for(let I=0;I<D.children.length;I++){I>0&&i.children.push({type:"element",tagName:"br",properties:{},children:[]});const P=D.children[I];P.type==="element"&&i.children.push(...P.children)}}let g=i;for(const T of o)g=((_=T==null?void 0:T.root)==null?void 0:_.call(m,g))||g;return r&&DC(g,r),g}function wUe(e){return e.map(t=>{const n=[];let r="",o=0;return t.forEach((s,i)=>{const l=!(s.fontStyle&&(s.fontStyle&ya.Underline||s.fontStyle&ya.Strikethrough));l&&s.content.match(/^\s+$/)&&t[i+1]?(o||(o=s.offset),r+=s.content):r?(l?n.push({...s,offset:o,content:r+s.content}):n.push({content:r,offset:o},s),o=0,r=""):n.push(s)}),n})}function EUe(e){return e.map(t=>t.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,o,s,i]=r;if(!o&&!i)return n;const a=[{...n,offset:n.offset+o.length,content:s}];return o&&a.unshift({content:o,offset:n.offset}),i&&a.push({content:i,offset:n.offset+o.length+s.length}),a}))}function _Ue(e){return e.map(t=>{const n=[];for(const r of t){if(n.length===0){n.push({...r});continue}const o=n[n.length-1],s=rI(o.htmlStyle||FT(o)),i=rI(r.htmlStyle||FT(r)),a=o.fontStyle&&(o.fontStyle&ya.Underline||o.fontStyle&ya.Strikethrough),l=r.fontStyle&&(r.fontStyle&ya.Underline||r.fontStyle&ya.Strikethrough);!a&&!l&&s===i?o.content+=r.content:n.push({...r})}return n})}const SUe=Hje;function TUe(e,t,n){var s;const r={meta:{},options:n,codeToHast:(i,a)=>UT(e,i,a),codeToTokens:(i,a)=>jT(e,i,a)};let o=SUe(UT(e,t,n,r));for(const i of BT(n))o=((s=i.postprocess)==null?void 0:s.call(r,o,n))||o;return o}const rj={light:"#333333",dark:"#bbbbbb"},oj={light:"#fffffe",dark:"#1e1e1e"},sj="__shiki_resolved";function X7(e){var a,l,c,u,f;if(e!=null&&e[sj])return e;const t={...e};t.tokenColors&&!t.settings&&(t.settings=t.tokenColors,delete t.tokenColors),t.type||(t.type="dark"),t.colorReplacements={...t.colorReplacements},t.settings||(t.settings=[]);let{bg:n,fg:r}=t;if(!n||!r){const m=t.settings?t.settings.find(g=>!g.name&&!g.scope):void 0;(a=m==null?void 0:m.settings)!=null&&a.foreground&&(r=m.settings.foreground),(l=m==null?void 0:m.settings)!=null&&l.background&&(n=m.settings.background),!r&&((c=t==null?void 0:t.colors)!=null&&c["editor.foreground"])&&(r=t.colors["editor.foreground"]),!n&&((u=t==null?void 0:t.colors)!=null&&u["editor.background"])&&(n=t.colors["editor.background"]),r||(r=t.type==="light"?rj.light:rj.dark),n||(n=t.type==="light"?oj.light:oj.dark),t.fg=r,t.bg=n}t.settings[0]&&t.settings[0].settings&&!t.settings[0].scope||t.settings.unshift({settings:{foreground:t.fg,background:t.bg}});let o=0;const s=new Map;function i(m){var y;if(s.has(m))return s.get(m);o+=1;const g=`#${o.toString(16).padStart(8,"0").toLowerCase()}`;return(y=t.colorReplacements)!=null&&y[`#${g}`]?i(m):(s.set(m,g),g)}t.settings=t.settings.map(m=>{var w,_;const g=((w=m.settings)==null?void 0:w.foreground)&&!m.settings.foreground.startsWith("#"),y=((_=m.settings)==null?void 0:_.background)&&!m.settings.background.startsWith("#");if(!g&&!y)return m;const v={...m,settings:{...m.settings}};if(g){const T=i(m.settings.foreground);t.colorReplacements[T]=m.settings.foreground,v.settings.foreground=T}if(y){const T=i(m.settings.background);t.colorReplacements[T]=m.settings.background,v.settings.background=T}return v});for(const m of Object.keys(t.colors||{}))if((m==="editor.foreground"||m==="editor.background"||m.startsWith("terminal.ansi"))&&!((f=t.colors[m])!=null&&f.startsWith("#"))){const g=i(t.colors[m]);t.colorReplacements[g]=t.colors[m],t.colors[m]=g}return Object.defineProperty(t,sj,{enumerable:!1,writable:!1,value:!0}),t}async function ane(e){return Array.from(new Set((await Promise.all(e.filter(t=>!tne(t)).map(async t=>await ene(t).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function lne(e){return(await Promise.all(e.map(async n=>nne(n)?null:X7(await ene(n))))).filter(n=>!!n)}let CUe=3;function kUe(e,t=3){t>CUe||console.trace(`[SHIKI DEPRECATE]: ${e}`)}let m1=class extends Error{constructor(t){super(t),this.name="ShikiError"}};class AUe extends Oze{constructor(n,r,o,s={}){super(n);Ze(this,"_resolvedThemes",new Map);Ze(this,"_resolvedGrammars",new Map);Ze(this,"_langMap",new Map);Ze(this,"_langGraph",new Map);Ze(this,"_textmateThemeCache",new WeakMap);Ze(this,"_loadedThemesCache",null);Ze(this,"_loadedLanguagesCache",null);this._resolver=n,this._themes=r,this._langs=o,this._alias=s,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}getTheme(n){return typeof n=="string"?this._resolvedThemes.get(n):this.loadTheme(n)}loadTheme(n){const r=X7(n);return r.name&&(this._resolvedThemes.set(r.name,r),this._loadedThemesCache=null),r}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(n){let r=this._textmateThemeCache.get(n);r||(r=RT.createFromRawTheme(n),this._textmateThemeCache.set(n,r)),this._syncRegistry.setTheme(r)}getGrammar(n){if(this._alias[n]){const r=new Set([n]);for(;this._alias[n];){if(n=this._alias[n],r.has(n))throw new m1(`Circular alias \`${Array.from(r).join(" -> ")} -> ${n}\``);r.add(n)}}return this._resolvedGrammars.get(n)}loadLanguage(n){var i,a,l,c;if(this.getGrammar(n.name))return;const r=new Set([...this._langMap.values()].filter(u=>{var f;return(f=u.embeddedLangsLazy)==null?void 0:f.includes(n.name)}));this._resolver.addLanguage(n);const o={balancedBracketSelectors:n.balancedBracketSelectors||["*"],unbalancedBracketSelectors:n.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(n.scopeName,n);const s=this.loadGrammarWithConfiguration(n.scopeName,1,o);if(s.name=n.name,this._resolvedGrammars.set(n.name,s),n.aliases&&n.aliases.forEach(u=>{this._alias[u]=n.name}),this._loadedLanguagesCache=null,r.size)for(const u of r)this._resolvedGrammars.delete(u.name),this._loadedLanguagesCache=null,(a=(i=this._syncRegistry)==null?void 0:i._injectionGrammars)==null||a.delete(u.scopeName),(c=(l=this._syncRegistry)==null?void 0:l._grammars)==null||c.delete(u.scopeName),this.loadLanguage(this._langMap.get(u.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(n){for(const s of n)this.resolveEmbeddedLanguages(s);const r=Array.from(this._langGraph.entries()),o=r.filter(([s,i])=>!i);if(o.length){const s=r.filter(([i,a])=>{var l;return a&&((l=a.embeddedLangs)==null?void 0:l.some(c=>o.map(([u])=>u).includes(c)))}).filter(i=>!o.includes(i));throw new m1(`Missing languages ${o.map(([i])=>`\`${i}\``).join(", ")}, required by ${s.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[s,i]of r)this._resolver.addLanguage(i);for(const[s,i]of r)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(n){this._langMap.set(n.name,n),this._langGraph.set(n.name,n);const r=n.embeddedLanguages??n.embeddedLangs;if(r)for(const o of r)this._langGraph.set(o,this._langMap.get(o))}}class NUe{constructor(t,n){Ze(this,"_langs",new Map);Ze(this,"_scopeToLang",new Map);Ze(this,"_injections",new Map);Ze(this,"_onigLib");this._onigLib={createOnigScanner:r=>t.createScanner(r),createOnigString:r=>t.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(t){return this._langs.get(t)}loadGrammar(t){return this._scopeToLang.get(t)}addLanguage(t){this._langs.set(t.name,t),t.aliases&&t.aliases.forEach(n=>{this._langs.set(n,t)}),this._scopeToLang.set(t.scopeName,t),t.injectTo&&t.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(t.scopeName)})}getInjections(t){const n=t.split(".");let r=[];for(let o=1;o<=n.length;o++){const s=n.slice(0,o).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let Zy=0;function IUe(e){Zy+=1,e.warnings!==!1&&Zy>=10&&Zy%10===0&&console.warn(`[Shiki] ${Zy} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let t=!1;if(!e.engine)throw new m1("`engine` option is required for synchronous mode");const n=(e.langs||[]).flat(1),r=(e.themes||[]).flat(1).map(X7),o=new NUe(e.engine,n),s=new AUe(o,r,n,e.langAlias);let i;function a(T){w();const k=s.getGrammar(typeof T=="string"?T:T.name);if(!k)throw new m1(`Language \`${T}\` not found, you may need to load it first`);return k}function l(T){if(T==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};w();const k=s.getTheme(T);if(!k)throw new m1(`Theme \`${T}\` not found, you may need to load it first`);return k}function c(T){w();const k=l(T);i!==T&&(s.setTheme(k),i=T);const M=s.getColorMap();return{theme:k,colorMap:M}}function u(){return w(),s.getLoadedThemes()}function f(){return w(),s.getLoadedLanguages()}function m(...T){w(),s.loadLanguages(T.flat(1))}async function g(...T){return m(await ane(T))}function y(...T){w();for(const k of T.flat(1))s.loadTheme(k)}async function v(...T){return w(),y(await lne(T))}function w(){if(t)throw new m1("Shiki instance has been disposed")}function _(){t||(t=!0,s.dispose(),Zy-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:u,getLoadedLanguages:f,loadLanguage:g,loadLanguageSync:m,loadTheme:v,loadThemeSync:y,dispose:_,[Symbol.dispose]:_}}async function RUe(e){e.engine||kUe("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[t,n,r]=await Promise.all([lne(e.themes||[]),ane(e.langs||[]),e.engine]);return IUe({...e,themes:t,langs:n,engine:r})}async function MUe(e){const t=await RUe(e);return{getLastGrammarState:(...n)=>hUe(t,...n),codeToTokensBase:(n,r)=>J7(t,n,r),codeToTokensWithThemes:(n,r)=>ine(t,n,r),codeToTokens:(n,r)=>jT(t,n,r),codeToHast:(n,r)=>UT(t,n,r),codeToHtml:(n,r)=>TUe(t,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...t,getInternalContext:()=>t}}function DUe(e){const t=e.langs,n=e.themes,r=e.engine;async function o(s){function i(f){var m;if(typeof f=="string"){if(tne(f))return[];f=((m=s.langAlias)==null?void 0:m[f])||f;const g=t[f];if(!g)throw new hi(`Language \`${f}\` is not included in this bundle. You may want to load it from external source.`);return g}return f}function a(f){if(nne(f))return"none";if(typeof f=="string"){const m=n[f];if(!m)throw new hi(`Theme \`${f}\` is not included in this bundle. You may want to load it from external source.`);return m}return f}const l=(s.themes??[]).map(f=>a(f)),c=(s.langs??[]).map(f=>i(f)),u=await MUe({engine:s.engine??r(),...s,themes:l,langs:c});return{...u,loadLanguage(...f){return u.loadLanguage(...f.map(i))},loadTheme(...f){return u.loadTheme(...f.map(a))},getBundledLanguages(){return t},getBundledThemes(){return n}}}return o}function OUe(e){let t;async function n(r={}){if(t){const o=await t;return await Promise.all([o.loadTheme(...r.themes||[]),o.loadLanguage(...r.langs||[])]),o}else{t=e({...r,themes:[],langs:[]});const o=await t;return await Promise.all([o.loadTheme(...r.themes||[]),o.loadLanguage(...r.langs||[])]),o}}return n}function PUe(e,t){const n=OUe(e);async function r(o,s){var l;const i=await n({langs:[s.lang],themes:"theme"in s?[s.theme]:Object.values(s.themes)}),a=await((l=t==null?void 0:t.guessEmbeddedLanguages)==null?void 0:l.call(t,o,s.lang,i));return a&&await i.loadLanguage(...a),i}return{getSingletonHighlighter(o){return n(o)},async codeToHtml(o,s){return(await r(o,s)).codeToHtml(o,s)},async codeToHast(o,s){return(await r(o,s)).codeToHast(o,s)},async codeToTokens(o,s){return(await r(o,s)).codeToTokens(o,s)},async codeToTokensBase(o,s){return(await r(o,s)).codeToTokensBase(o,s)},async codeToTokensWithThemes(o,s){return(await r(o,s)).codeToTokensWithThemes(o,s)},async getLastGrammarState(o,s){return(await n({langs:[s.lang],themes:[s.theme]})).getLastGrammarState(o,s)}}}const cne=[{id:"abap",name:"ABAP",import:(()=>pe(()=>import("./abap-BdImnpbu.js"),[],import.meta.url))},{id:"actionscript-3",name:"ActionScript",import:(()=>pe(()=>import("./actionscript-3-CfeIJUat.js"),[],import.meta.url))},{id:"ada",name:"Ada",import:(()=>pe(()=>import("./ada-bCR0ucgS.js"),[],import.meta.url))},{id:"angular-html",name:"Angular HTML",import:(()=>pe(()=>import("./angular-html-CU67Zn6k.js").then(e=>e.f),__vite__mapDeps([0,1,2,3]),import.meta.url))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>pe(()=>import("./angular-ts-BwZT4LLn.js"),__vite__mapDeps([4,0,1,2,3,5]),import.meta.url))},{id:"apache",name:"Apache Conf",import:(()=>pe(()=>import("./apache-Pmp26Uib.js"),[],import.meta.url))},{id:"apex",name:"Apex",import:(()=>pe(()=>import("./apex-DDbsPZ6N.js"),[],import.meta.url))},{id:"apl",name:"APL",import:(()=>pe(()=>import("./apl-dKokRX4l.js"),__vite__mapDeps([6,1,2,3,7,8,9]),import.meta.url))},{id:"applescript",name:"AppleScript",import:(()=>pe(()=>import("./applescript-Co6uUVPk.js"),[],import.meta.url))},{id:"ara",name:"Ara",import:(()=>pe(()=>import("./ara-BRHolxvo.js"),[],import.meta.url))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>pe(()=>import("./asciidoc-Dv7Oe6Be.js"),[],import.meta.url))},{id:"asm",name:"Assembly",import:(()=>pe(()=>import("./asm-D_Q5rh1f.js"),[],import.meta.url))},{id:"astro",name:"Astro",import:(()=>pe(()=>import("./astro-CbQHKStN.js"),__vite__mapDeps([10,9,2,11,3,12,13]),import.meta.url))},{id:"awk",name:"AWK",import:(()=>pe(()=>import("./awk-DMzUqQB5.js"),[],import.meta.url))},{id:"ballerina",name:"Ballerina",import:(()=>pe(()=>import("./ballerina-BFfxhgS-.js"),[],import.meta.url))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>pe(()=>import("./bat-BkioyH1T.js"),[],import.meta.url))},{id:"beancount",name:"Beancount",import:(()=>pe(()=>import("./beancount-k_qm7-4y.js"),[],import.meta.url))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>pe(()=>import("./berry-uYugtg8r.js"),[],import.meta.url))},{id:"bibtex",name:"BibTeX",import:(()=>pe(()=>import("./bibtex-CHM0blh-.js"),[],import.meta.url))},{id:"bicep",name:"Bicep",import:(()=>pe(()=>import("./bicep-Bmn6On1c.js"),[],import.meta.url))},{id:"blade",name:"Blade",import:(()=>pe(()=>import("./blade-DVc8C-J4.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9]),import.meta.url))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>pe(()=>import("./bsl-BO_Y6i37.js"),__vite__mapDeps([17,18]),import.meta.url))},{id:"c",name:"C",import:(()=>pe(()=>import("./c-BIGW1oBm.js"),[],import.meta.url))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>pe(()=>import("./cadence-Bv_4Rxtq.js"),[],import.meta.url))},{id:"cairo",name:"Cairo",import:(()=>pe(()=>import("./cairo-KRGpt6FW.js"),__vite__mapDeps([19,20]),import.meta.url))},{id:"clarity",name:"Clarity",import:(()=>pe(()=>import("./clarity-D53aC0YG.js"),[],import.meta.url))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>pe(()=>import("./clojure-P80f7IUj.js"),[],import.meta.url))},{id:"cmake",name:"CMake",import:(()=>pe(()=>import("./cmake-D1j8_8rp.js"),[],import.meta.url))},{id:"cobol",name:"COBOL",import:(()=>pe(()=>import("./cobol-nwyudZeR.js"),__vite__mapDeps([21,1,2,3,8]),import.meta.url))},{id:"codeowners",name:"CODEOWNERS",import:(()=>pe(()=>import("./codeowners-Bp6g37R7.js"),[],import.meta.url))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>pe(()=>import("./codeql-DsOJ9woJ.js"),[],import.meta.url))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>pe(()=>import("./coffee-Ch7k5sss.js"),__vite__mapDeps([22,2]),import.meta.url))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>pe(()=>import("./common-lisp-Cg-RD9OK.js"),[],import.meta.url))},{id:"coq",name:"Coq",import:(()=>pe(()=>import("./coq-DkFqJrB1.js"),[],import.meta.url))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>pe(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([23,24,25,26,16]),import.meta.url))},{id:"crystal",name:"Crystal",import:(()=>pe(()=>import("./crystal-tKQVLTB8.js"),__vite__mapDeps([27,1,2,3,16,26,28]),import.meta.url))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>pe(()=>import("./csharp-K5feNrxe.js"),[],import.meta.url))},{id:"css",name:"CSS",import:(()=>pe(()=>import("./css-DPfMkruS.js"),[],import.meta.url))},{id:"csv",name:"CSV",import:(()=>pe(()=>import("./csv-fuZLfV_i.js"),[],import.meta.url))},{id:"cue",name:"CUE",import:(()=>pe(()=>import("./cue-D82EKSYY.js"),[],import.meta.url))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>pe(()=>import("./cypher-COkxafJQ.js"),[],import.meta.url))},{id:"d",name:"D",import:(()=>pe(()=>import("./d-85-TOEBH.js"),[],import.meta.url))},{id:"dart",name:"Dart",import:(()=>pe(()=>import("./dart-CF10PKvl.js"),[],import.meta.url))},{id:"dax",name:"DAX",import:(()=>pe(()=>import("./dax-CEL-wOlO.js"),[],import.meta.url))},{id:"desktop",name:"Desktop",import:(()=>pe(()=>import("./desktop-BmXAJ9_W.js"),[],import.meta.url))},{id:"diff",name:"Diff",import:(()=>pe(()=>import("./diff-D97Zzqfu.js"),[],import.meta.url))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>pe(()=>import("./docker-BcOcwvcX.js"),[],import.meta.url))},{id:"dotenv",name:"dotEnv",import:(()=>pe(()=>import("./dotenv-Da5cRb03.js"),[],import.meta.url))},{id:"dream-maker",name:"Dream Maker",import:(()=>pe(()=>import("./dream-maker-BtqSS_iP.js"),[],import.meta.url))},{id:"edge",name:"Edge",import:(()=>pe(()=>import("./edge-BkV0erSs.js"),__vite__mapDeps([29,11,1,2,3,15]),import.meta.url))},{id:"elixir",name:"Elixir",import:(()=>pe(()=>import("./elixir-CDX3lj18.js"),__vite__mapDeps([30,1,2,3]),import.meta.url))},{id:"elm",name:"Elm",import:(()=>pe(()=>import("./elm-DbKCFpqz.js"),__vite__mapDeps([31,25,26]),import.meta.url))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>pe(()=>import("./emacs-lisp-C9XAeP06.js"),[],import.meta.url))},{id:"erb",name:"ERB",import:(()=>pe(()=>import("./erb-BOJIQeun.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>pe(()=>import("./erlang-DsQrWhSR.js"),__vite__mapDeps([39,40]),import.meta.url))},{id:"fennel",name:"Fennel",import:(()=>pe(()=>import("./fennel-BYunw83y.js"),[],import.meta.url))},{id:"fish",name:"Fish",import:(()=>pe(()=>import("./fish-BvzEVeQv.js"),[],import.meta.url))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>pe(()=>import("./fluent-C4IJs8-o.js"),[],import.meta.url))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>pe(()=>import("./fortran-fixed-form-BZjJHVRy.js"),__vite__mapDeps([41,42]),import.meta.url))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>pe(()=>import("./fortran-free-form-D22FLkUw.js"),[],import.meta.url))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>pe(()=>import("./fsharp-CXgrBDvD.js"),__vite__mapDeps([43,40]),import.meta.url))},{id:"gdresource",name:"GDResource",import:(()=>pe(()=>import("./gdresource-B7Tvp0Sc.js"),__vite__mapDeps([44,45,46]),import.meta.url))},{id:"gdscript",name:"GDScript",import:(()=>pe(()=>import("./gdscript-DTMYz4Jt.js"),[],import.meta.url))},{id:"gdshader",name:"GDShader",import:(()=>pe(()=>import("./gdshader-DkwncUOv.js"),[],import.meta.url))},{id:"genie",name:"Genie",import:(()=>pe(()=>import("./genie-D0YGMca9.js"),[],import.meta.url))},{id:"gherkin",name:"Gherkin",import:(()=>pe(()=>import("./gherkin-DyxjwDmM.js"),[],import.meta.url))},{id:"git-commit",name:"Git Commit Message",import:(()=>pe(()=>import("./git-commit-F4YmCXRG.js"),__vite__mapDeps([47,48]),import.meta.url))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>pe(()=>import("./git-rebase-r7XF79zn.js"),__vite__mapDeps([49,28]),import.meta.url))},{id:"gleam",name:"Gleam",import:(()=>pe(()=>import("./gleam-BspZqrRM.js"),[],import.meta.url))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>pe(()=>import("./glimmer-js-Rg0-pVw9.js"),__vite__mapDeps([50,2,11,3,1]),import.meta.url))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>pe(()=>import("./glimmer-ts-U6CK756n.js"),__vite__mapDeps([51,11,3,2,1]),import.meta.url))},{id:"glsl",name:"GLSL",import:(()=>pe(()=>import("./glsl-DplSGwfg.js"),__vite__mapDeps([25,26]),import.meta.url))},{id:"gnuplot",name:"Gnuplot",import:(()=>pe(()=>import("./gnuplot-DdkO51Og.js"),[],import.meta.url))},{id:"go",name:"Go",import:(()=>pe(()=>import("./go-Dn2_MT6a.js"),[],import.meta.url))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>pe(()=>import("./graphql-ChdNCCLP.js"),__vite__mapDeps([35,2,11,36,13]),import.meta.url))},{id:"groovy",name:"Groovy",import:(()=>pe(()=>import("./groovy-gcz8RCvz.js"),[],import.meta.url))},{id:"hack",name:"Hack",import:(()=>pe(()=>import("./hack-CaT9iCJl.js"),__vite__mapDeps([52,1,2,3,16]),import.meta.url))},{id:"haml",name:"Ruby Haml",import:(()=>pe(()=>import("./haml-B8DHNrY2.js"),__vite__mapDeps([34,2,3]),import.meta.url))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>pe(()=>import("./handlebars-BL8al0AC.js"),__vite__mapDeps([53,1,2,3,38]),import.meta.url))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>pe(()=>import("./haskell-Df6bDoY_.js"),[],import.meta.url))},{id:"haxe",name:"Haxe",import:(()=>pe(()=>import("./haxe-CzTSHFRz.js"),[],import.meta.url))},{id:"hcl",name:"HashiCorp HCL",import:(()=>pe(()=>import("./hcl-BWvSN4gD.js"),[],import.meta.url))},{id:"hjson",name:"Hjson",import:(()=>pe(()=>import("./hjson-D5-asLiD.js"),[],import.meta.url))},{id:"hlsl",name:"HLSL",import:(()=>pe(()=>import("./hlsl-D3lLCCz7.js"),[],import.meta.url))},{id:"html",name:"HTML",import:(()=>pe(()=>import("./html-GMplVEZG.js"),__vite__mapDeps([1,2,3]),import.meta.url))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>pe(()=>import("./html-derivative-BFtXZ54Q.js"),__vite__mapDeps([15,1,2,3]),import.meta.url))},{id:"http",name:"HTTP",import:(()=>pe(()=>import("./http-jrhK8wxY.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13]),import.meta.url))},{id:"hurl",name:"Hurl",import:(()=>pe(()=>import("./hurl-irOxFIW8.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56]),import.meta.url))},{id:"hxml",name:"HXML",import:(()=>pe(()=>import("./hxml-Bvhsp5Yf.js"),__vite__mapDeps([57,58]),import.meta.url))},{id:"hy",name:"Hy",import:(()=>pe(()=>import("./hy-DFXneXwc.js"),[],import.meta.url))},{id:"imba",name:"Imba",import:(()=>pe(()=>import("./imba-DGztddWO.js"),[],import.meta.url))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>pe(()=>import("./ini-BEwlwnbL.js"),[],import.meta.url))},{id:"java",name:"Java",import:(()=>pe(()=>import("./java-CylS5w8V.js"),[],import.meta.url))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>pe(()=>import("./javascript-wDzz0qaB.js"),[],import.meta.url))},{id:"jinja",name:"Jinja",import:(()=>pe(()=>import("./jinja-4LBKfQ-Z.js"),__vite__mapDeps([59,1,2,3]),import.meta.url))},{id:"jison",name:"Jison",import:(()=>pe(()=>import("./jison-wvAkD_A8.js"),__vite__mapDeps([60,2]),import.meta.url))},{id:"json",name:"JSON",import:(()=>pe(()=>import("./json-Cp-IABpG.js"),[],import.meta.url))},{id:"json5",name:"JSON5",import:(()=>pe(()=>import("./json5-C9tS-k6U.js"),[],import.meta.url))},{id:"jsonc",name:"JSON with Comments",import:(()=>pe(()=>import("./jsonc-Des-eS-w.js"),[],import.meta.url))},{id:"jsonl",name:"JSON Lines",import:(()=>pe(()=>import("./jsonl-DcaNXYhu.js"),[],import.meta.url))},{id:"jsonnet",name:"Jsonnet",import:(()=>pe(()=>import("./jsonnet-DFQXde-d.js"),[],import.meta.url))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>pe(()=>import("./jssm-C2t-YnRu.js"),[],import.meta.url))},{id:"jsx",name:"JSX",import:(()=>pe(()=>import("./jsx-g9-lgVsj.js"),[],import.meta.url))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>pe(()=>import("./julia-C8NyazO9.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62]),import.meta.url))},{id:"kdl",name:"KDL",import:(()=>pe(()=>import("./kdl-DV7GczEv.js"),[],import.meta.url))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>pe(()=>import("./kotlin-BdnUsdx6.js"),[],import.meta.url))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>pe(()=>import("./kusto-BvAqAH-y.js"),[],import.meta.url))},{id:"latex",name:"LaTeX",import:(()=>pe(()=>import("./latex-BdAV_C_H.js"),__vite__mapDeps([63,64,62]),import.meta.url))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>pe(()=>import("./lean-Bc6EcWN3.js"),[],import.meta.url))},{id:"less",name:"Less",import:(()=>pe(()=>import("./less-B1dDrJ26.js"),[],import.meta.url))},{id:"liquid",name:"Liquid",import:(()=>pe(()=>import("./liquid-DYVedYrR.js"),__vite__mapDeps([65,1,2,3,9]),import.meta.url))},{id:"llvm",name:"LLVM IR",import:(()=>pe(()=>import("./llvm-BtvRca6l.js"),[],import.meta.url))},{id:"log",name:"Log file",import:(()=>pe(()=>import("./log-2UxHyX5q.js"),[],import.meta.url))},{id:"logo",name:"Logo",import:(()=>pe(()=>import("./logo-BtOb2qkB.js"),[],import.meta.url))},{id:"lua",name:"Lua",import:(()=>pe(()=>import("./lua-BbnMAYS6.js"),__vite__mapDeps([37,26]),import.meta.url))},{id:"luau",name:"Luau",import:(()=>pe(()=>import("./luau-CXu1NL6O.js"),[],import.meta.url))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>pe(()=>import("./make-CHLpvVh8.js"),[],import.meta.url))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>pe(()=>import("./markdown-Cvjx9yec.js"),[],import.meta.url))},{id:"marko",name:"Marko",import:(()=>pe(()=>import("./marko-CPi9NSCl.js"),__vite__mapDeps([66,3,67,5,11]),import.meta.url))},{id:"matlab",name:"MATLAB",import:(()=>pe(()=>import("./matlab-D7o27uSR.js"),[],import.meta.url))},{id:"mdc",name:"MDC",import:(()=>pe(()=>import("./mdc-DUICxH0z.js"),__vite__mapDeps([68,40,38,15,1,2,3]),import.meta.url))},{id:"mdx",name:"MDX",import:(()=>pe(()=>import("./mdx-Cmh6b_Ma.js"),[],import.meta.url))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>pe(()=>import("./mermaid-DKYwYmdq.js"),[],import.meta.url))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>pe(()=>import("./mipsasm-CKIfxQSi.js"),[],import.meta.url))},{id:"mojo",name:"Mojo",import:(()=>pe(()=>import("./mojo-1DNp92w6.js"),[],import.meta.url))},{id:"move",name:"Move",import:(()=>pe(()=>import("./move-Bu9oaDYs.js"),[],import.meta.url))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>pe(()=>import("./narrat-DRg8JJMk.js"),[],import.meta.url))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>pe(()=>import("./nextflow-BrzmwbiE.js"),[],import.meta.url))},{id:"nginx",name:"Nginx",import:(()=>pe(()=>import("./nginx-DknmC5AR.js"),__vite__mapDeps([69,37,26]),import.meta.url))},{id:"nim",name:"Nim",import:(()=>pe(()=>import("./nim-CVrawwO9.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40]),import.meta.url))},{id:"nix",name:"Nix",import:(()=>pe(()=>import("./nix-c8nO5XWb.js"),[],import.meta.url))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>pe(()=>import("./nushell-C-sUppwS.js"),[],import.meta.url))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>pe(()=>import("./objective-c-DXmwc3jG.js"),[],import.meta.url))},{id:"objective-cpp",name:"Objective-C++",import:(()=>pe(()=>import("./objective-cpp-CLxacb5B.js"),[],import.meta.url))},{id:"ocaml",name:"OCaml",import:(()=>pe(()=>import("./ocaml-C0hk2d4L.js"),[],import.meta.url))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>pe(()=>import("./openscad-C4EeE6gA.js"),[],import.meta.url))},{id:"pascal",name:"Pascal",import:(()=>pe(()=>import("./pascal-D93ZcfNL.js"),[],import.meta.url))},{id:"perl",name:"Perl",import:(()=>pe(()=>import("./perl-C0TMdlhV.js"),__vite__mapDeps([71,1,2,3,7,8,16]),import.meta.url))},{id:"php",name:"PHP",import:(()=>pe(()=>import("./php-CDn_0X-4.js"),__vite__mapDeps([72,1,2,3,7,8,16,9]),import.meta.url))},{id:"pkl",name:"Pkl",import:(()=>pe(()=>import("./pkl-u5AG7uiY.js"),[],import.meta.url))},{id:"plsql",name:"PL/SQL",import:(()=>pe(()=>import("./plsql-ChMvpjG-.js"),[],import.meta.url))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>pe(()=>import("./po-BTJTHyun.js"),[],import.meta.url))},{id:"polar",name:"Polar",import:(()=>pe(()=>import("./polar-C0HS_06l.js"),[],import.meta.url))},{id:"postcss",name:"PostCSS",import:(()=>pe(()=>import("./postcss-CXtECtnM.js"),[],import.meta.url))},{id:"powerquery",name:"PowerQuery",import:(()=>pe(()=>import("./powerquery-CEu0bR-o.js"),[],import.meta.url))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>pe(()=>import("./powershell-Dpen1YoG.js"),[],import.meta.url))},{id:"prisma",name:"Prisma",import:(()=>pe(()=>import("./prisma-Dd19v3D-.js"),[],import.meta.url))},{id:"prolog",name:"Prolog",import:(()=>pe(()=>import("./prolog-CbFg5uaA.js"),[],import.meta.url))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>pe(()=>import("./proto-DyJlTyXw.js"),[],import.meta.url))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>pe(()=>import("./pug-CGlum2m_.js"),__vite__mapDeps([73,2,3,1]),import.meta.url))},{id:"puppet",name:"Puppet",import:(()=>pe(()=>import("./puppet-BMWR74SV.js"),[],import.meta.url))},{id:"purescript",name:"PureScript",import:(()=>pe(()=>import("./purescript-CklMAg4u.js"),[],import.meta.url))},{id:"python",name:"Python",aliases:["py"],import:(()=>pe(()=>import("./python-B6aJPvgy.js"),[],import.meta.url))},{id:"qml",name:"QML",import:(()=>pe(()=>import("./qml-3beO22l8.js"),__vite__mapDeps([74,2]),import.meta.url))},{id:"qmldir",name:"QML Directory",import:(()=>pe(()=>import("./qmldir-C8lEn-DE.js"),[],import.meta.url))},{id:"qss",name:"Qt Style Sheets",import:(()=>pe(()=>import("./qss-IeuSbFQv.js"),[],import.meta.url))},{id:"r",name:"R",import:(()=>pe(()=>import("./r-DiinP2Uv.js"),[],import.meta.url))},{id:"racket",name:"Racket",import:(()=>pe(()=>import("./racket-BqYA7rlc.js"),[],import.meta.url))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>pe(()=>import("./raku-DXvB9xmW.js"),[],import.meta.url))},{id:"razor",name:"ASP.NET Razor",import:(()=>pe(()=>import("./razor-CE9lU5zL.js"),__vite__mapDeps([75,1,2,3,76]),import.meta.url))},{id:"reg",name:"Windows Registry Script",import:(()=>pe(()=>import("./reg-C-SQnVFl.js"),[],import.meta.url))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>pe(()=>import("./regexp-CDVJQ6XC.js"),[],import.meta.url))},{id:"rel",name:"Rel",import:(()=>pe(()=>import("./rel-C3B-1QV4.js"),[],import.meta.url))},{id:"riscv",name:"RISC-V",import:(()=>pe(()=>import("./riscv-BM1_JUlF.js"),[],import.meta.url))},{id:"rosmsg",name:"ROS Interface",import:(()=>pe(()=>import("./rosmsg-BJDFO7_C.js"),[],import.meta.url))},{id:"rst",name:"reStructuredText",import:(()=>pe(()=>import("./rst-B0xPkSld.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37]),import.meta.url))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>pe(()=>import("./ruby-BvKwtOVI.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>pe(()=>import("./rust-B1yitclQ.js"),[],import.meta.url))},{id:"sas",name:"SAS",import:(()=>pe(()=>import("./sas-cz2c8ADy.js"),__vite__mapDeps([79,16]),import.meta.url))},{id:"sass",name:"Sass",import:(()=>pe(()=>import("./sass-Cj5Yp3dK.js"),[],import.meta.url))},{id:"scala",name:"Scala",import:(()=>pe(()=>import("./scala-C151Ov-r.js"),[],import.meta.url))},{id:"scheme",name:"Scheme",import:(()=>pe(()=>import("./scheme-C98Dy4si.js"),[],import.meta.url))},{id:"scss",name:"SCSS",import:(()=>pe(()=>import("./scss-OYdSNvt2.js"),__vite__mapDeps([5,3]),import.meta.url))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>pe(()=>import("./sdbl-DVxCFoDh.js"),[],import.meta.url))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>pe(()=>import("./shaderlab-Dg9Lc6iA.js"),__vite__mapDeps([80,81]),import.meta.url))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>pe(()=>import("./shellscript-Yzrsuije.js"),[],import.meta.url))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>pe(()=>import("./shellsession-BADoaaVG.js"),__vite__mapDeps([82,28]),import.meta.url))},{id:"smalltalk",name:"Smalltalk",import:(()=>pe(()=>import("./smalltalk-BERRCDM3.js"),[],import.meta.url))},{id:"solidity",name:"Solidity",import:(()=>pe(()=>import("./solidity-rGO070M0.js"),[],import.meta.url))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>pe(()=>import("./soy-Brmx7dQM.js"),__vite__mapDeps([83,1,2,3]),import.meta.url))},{id:"sparql",name:"SPARQL",import:(()=>pe(()=>import("./sparql-rVzFXLq3.js"),__vite__mapDeps([84,85]),import.meta.url))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>pe(()=>import("./splunk-BtCnVYZw.js"),[],import.meta.url))},{id:"sql",name:"SQL",import:(()=>pe(()=>import("./sql-BLtJtn59.js"),[],import.meta.url))},{id:"ssh-config",name:"SSH Config",import:(()=>pe(()=>import("./ssh-config-_ykCGR6B.js"),[],import.meta.url))},{id:"stata",name:"Stata",import:(()=>pe(()=>import("./stata-BH5u7GGu.js"),__vite__mapDeps([86,16]),import.meta.url))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>pe(()=>import("./stylus-BEDo0Tqx.js"),[],import.meta.url))},{id:"svelte",name:"Svelte",import:(()=>pe(()=>import("./svelte-3Dk4HxPD.js"),__vite__mapDeps([87,2,11,3,12]),import.meta.url))},{id:"swift",name:"Swift",import:(()=>pe(()=>import("./swift-Dg5xB15N.js"),[],import.meta.url))},{id:"system-verilog",name:"SystemVerilog",import:(()=>pe(()=>import("./system-verilog-CnnmHF94.js"),[],import.meta.url))},{id:"systemd",name:"Systemd Units",import:(()=>pe(()=>import("./systemd-4A_iFExJ.js"),[],import.meta.url))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>pe(()=>import("./talonscript-CkByrt1z.js"),[],import.meta.url))},{id:"tasl",name:"Tasl",import:(()=>pe(()=>import("./tasl-QIJgUcNo.js"),[],import.meta.url))},{id:"tcl",name:"Tcl",import:(()=>pe(()=>import("./tcl-dwOrl1Do.js"),[],import.meta.url))},{id:"templ",name:"Templ",import:(()=>pe(()=>import("./templ-W15q3VgB.js"),__vite__mapDeps([88,89,2,3]),import.meta.url))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>pe(()=>import("./terraform-BETggiCN.js"),[],import.meta.url))},{id:"tex",name:"TeX",import:(()=>pe(()=>import("./tex-CxkMU7Pf.js"),__vite__mapDeps([64,62]),import.meta.url))},{id:"toml",name:"TOML",import:(()=>pe(()=>import("./toml-vGWfd6FD.js"),[],import.meta.url))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>pe(()=>import("./ts-tags-zn1MmPIZ.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8]),import.meta.url))},{id:"tsv",name:"TSV",import:(()=>pe(()=>import("./tsv-B_m7g4N7.js"),[],import.meta.url))},{id:"tsx",name:"TSX",import:(()=>pe(()=>import("./tsx-COt5Ahok.js"),[],import.meta.url))},{id:"turtle",name:"Turtle",import:(()=>pe(()=>import("./turtle-BsS91CYL.js"),[],import.meta.url))},{id:"twig",name:"Twig",import:(()=>pe(()=>import("./twig-CO9l9SDP.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>pe(()=>import("./typescript-BPQ3VLAy.js"),[],import.meta.url))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>pe(()=>import("./typespec-BGHnOYBU.js"),[],import.meta.url))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>pe(()=>import("./typst-DHCkPAjA.js"),[],import.meta.url))},{id:"v",name:"V",import:(()=>pe(()=>import("./v-BcVCzyr7.js"),[],import.meta.url))},{id:"vala",name:"Vala",import:(()=>pe(()=>import("./vala-CsfeWuGM.js"),[],import.meta.url))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>pe(()=>import("./vb-D17OF-Vu.js"),[],import.meta.url))},{id:"verilog",name:"Verilog",import:(()=>pe(()=>import("./verilog-BQ8w6xss.js"),[],import.meta.url))},{id:"vhdl",name:"VHDL",import:(()=>pe(()=>import("./vhdl-CeAyd5Ju.js"),[],import.meta.url))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>pe(()=>import("./viml-CJc9bBzg.js"),[],import.meta.url))},{id:"vue",name:"Vue",import:(()=>pe(()=>import("./vue-DnHKYNfI.js"),__vite__mapDeps([92,3,2,11,9,15,1]),import.meta.url))},{id:"vue-html",name:"Vue HTML",import:(()=>pe(()=>import("./vue-html-CChd_i61.js"),__vite__mapDeps([93,92,3,2,11,9,15,1]),import.meta.url))},{id:"vue-vine",name:"Vue Vine",import:(()=>pe(()=>import("./vue-vine-8moa0y9V.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1]),import.meta.url))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>pe(()=>import("./vyper-CDx5xZoG.js"),[],import.meta.url))},{id:"wasm",name:"WebAssembly",import:(()=>pe(()=>import("./wasm-MzD3tlZU.js"),[],import.meta.url))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>pe(()=>import("./wenyan-BV7otONQ.js"),[],import.meta.url))},{id:"wgsl",name:"WGSL",import:(()=>pe(()=>import("./wgsl-Dx-B1_4e.js"),[],import.meta.url))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>pe(()=>import("./wikitext-BhOHFoWU.js"),[],import.meta.url))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>pe(()=>import("./wit-5i3qLPDT.js"),[],import.meta.url))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>pe(()=>import("./wolfram-lXgVvXCa.js"),[],import.meta.url))},{id:"xml",name:"XML",import:(()=>pe(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([7,8]),import.meta.url))},{id:"xsl",name:"XSL",import:(()=>pe(()=>import("./xsl-CtQFsRM5.js"),__vite__mapDeps([96,7,8]),import.meta.url))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>pe(()=>import("./yaml-Buea-lGh.js"),[],import.meta.url))},{id:"zenscript",name:"ZenScript",import:(()=>pe(()=>import("./zenscript-DVFEvuxE.js"),[],import.meta.url))},{id:"zig",name:"Zig",import:(()=>pe(()=>import("./zig-VOosw3JB.js"),[],import.meta.url))}],LUe=Object.fromEntries(cne.map(e=>[e.id,e.import])),$Ue=Object.fromEntries(cne.flatMap(e=>{var t;return((t=e.aliases)==null?void 0:t.map(n=>[n,e.import]))||[]})),FUe={...LUe,...$Ue},BUe=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>pe(()=>import("./andromeeda-C-Jbm3Hp.js"),[],import.meta.url))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>pe(()=>import("./aurora-x-D-2ljcwZ.js"),[],import.meta.url))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>pe(()=>import("./ayu-dark-Cv9koXgw.js"),[],import.meta.url))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>pe(()=>import("./catppuccin-frappe-DFWUc33u.js"),[],import.meta.url))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>pe(()=>import("./catppuccin-latte-C9dUb6Cb.js"),[],import.meta.url))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>pe(()=>import("./catppuccin-macchiato-DQyhUUbL.js"),[],import.meta.url))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>pe(()=>import("./catppuccin-mocha-D87Tk5Gz.js"),[],import.meta.url))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>pe(()=>import("./dark-plus-C3mMm8J8.js"),[],import.meta.url))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>pe(()=>import("./dracula-BzJJZx-M.js"),[],import.meta.url))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>pe(()=>import("./dracula-soft-BXkSAIEj.js"),[],import.meta.url))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>pe(()=>import("./everforest-dark-BgDCqdQA.js"),[],import.meta.url))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>pe(()=>import("./everforest-light-C8M2exoo.js"),[],import.meta.url))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>pe(()=>import("./github-dark-DHJKELXO.js"),[],import.meta.url))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>pe(()=>import("./github-dark-default-Cuk6v7N8.js"),[],import.meta.url))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>pe(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[],import.meta.url))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>pe(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[],import.meta.url))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>pe(()=>import("./github-light-DAi9KRSo.js"),[],import.meta.url))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>pe(()=>import("./github-light-default-D7oLnXFd.js"),[],import.meta.url))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>pe(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[],import.meta.url))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>pe(()=>import("./gruvbox-dark-hard-CFHQjOhq.js"),[],import.meta.url))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>pe(()=>import("./gruvbox-dark-medium-GsRaNv29.js"),[],import.meta.url))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>pe(()=>import("./gruvbox-dark-soft-CVdnzihN.js"),[],import.meta.url))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>pe(()=>import("./gruvbox-light-hard-CH1njM8p.js"),[],import.meta.url))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>pe(()=>import("./gruvbox-light-medium-DRw_LuNl.js"),[],import.meta.url))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>pe(()=>import("./gruvbox-light-soft-hJgmCMqR.js"),[],import.meta.url))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>pe(()=>import("./houston-DnULxvSX.js"),[],import.meta.url))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>pe(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[],import.meta.url))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>pe(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[],import.meta.url))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>pe(()=>import("./kanagawa-wave-DWedfzmr.js"),[],import.meta.url))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>pe(()=>import("./laserwave-DUszq2jm.js"),[],import.meta.url))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>pe(()=>import("./light-plus-B7mTdjB0.js"),[],import.meta.url))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>pe(()=>import("./material-theme-D5KoaKCx.js"),[],import.meta.url))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>pe(()=>import("./material-theme-darker-BfHTSMKl.js"),[],import.meta.url))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>pe(()=>import("./material-theme-lighter-B0m2ddpp.js"),[],import.meta.url))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>pe(()=>import("./material-theme-ocean-CyktbL80.js"),[],import.meta.url))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>pe(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[],import.meta.url))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>pe(()=>import("./min-dark-CafNBF8u.js"),[],import.meta.url))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>pe(()=>import("./min-light-CTRr51gU.js"),[],import.meta.url))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>pe(()=>import("./monokai-D4h5O-jR.js"),[],import.meta.url))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>pe(()=>import("./night-owl-C39BiMTA.js"),[],import.meta.url))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>pe(()=>import("./nord-Ddv68eIx.js"),[],import.meta.url))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>pe(()=>import("./one-dark-pro-DVMEJ2y_.js"),[],import.meta.url))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>pe(()=>import("./one-light-PoHY5YXO.js"),[],import.meta.url))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>pe(()=>import("./plastic-3e1v2bzS.js"),[],import.meta.url))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>pe(()=>import("./poimandres-CS3Unz2-.js"),[],import.meta.url))},{id:"red",displayName:"Red",type:"dark",import:(()=>pe(()=>import("./red-bN70gL4F.js"),[],import.meta.url))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>pe(()=>import("./rose-pine-qdsjHGoJ.js"),[],import.meta.url))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>pe(()=>import("./rose-pine-dawn-DHQR4-dF.js"),[],import.meta.url))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>pe(()=>import("./rose-pine-moon-D4_iv3hh.js"),[],import.meta.url))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>pe(()=>import("./slack-dark-BthQWCQV.js"),[],import.meta.url))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>pe(()=>import("./slack-ochin-DqwNpetd.js"),[],import.meta.url))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>pe(()=>import("./snazzy-light-Bw305WKR.js"),[],import.meta.url))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>pe(()=>import("./solarized-dark-DXbdFlpD.js"),[],import.meta.url))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>pe(()=>import("./solarized-light-L9t79GZl.js"),[],import.meta.url))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>pe(()=>import("./synthwave-84-CbfX1IO0.js"),[],import.meta.url))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>pe(()=>import("./tokyo-night-hegEt444.js"),[],import.meta.url))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>pe(()=>import("./vesper-DU1UobuO.js"),[],import.meta.url))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>pe(()=>import("./vitesse-black-Bkuqu6BP.js"),[],import.meta.url))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>pe(()=>import("./vitesse-dark-D0r3Knsf.js"),[],import.meta.url))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>pe(()=>import("./vitesse-light-CVO1_9PV.js"),[],import.meta.url))}],zUe=Object.fromEntries(BUe.map(e=>[e.id,e.import]));class Q7 extends Error{constructor(t){super(t),this.name="ShikiError"}}function jUe(){return 2147483648}function UUe(){return typeof performance<"u"?performance.now():Date.now()}const HUe=(e,t)=>e+(t-e%t)%t;async function VUe(e){let t,n;const r={};function o(g){n=g,r.HEAPU8=new Uint8Array(g),r.HEAPU32=new Uint32Array(g)}function s(g,y,v){r.HEAPU8.copyWithin(g,y,y+v)}function i(g){try{return t.grow(g-n.byteLength+65535>>>16),o(t.buffer),1}catch{}}function a(g){const y=r.HEAPU8.length;g=g>>>0;const v=jUe();if(g>v)return!1;for(let w=1;w<=4;w*=2){let _=y*(1+.2/w);_=Math.min(_,g+100663296);const T=Math.min(v,HUe(Math.max(g,_),65536));if(i(T))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(g,y,v=1024){const w=y+v;let _=y;for(;g[_]&&!(_>=w);)++_;if(_-y>16&&g.buffer&&l)return l.decode(g.subarray(y,_));let T="";for(;y<_;){let k=g[y++];if(!(k&128)){T+=String.fromCharCode(k);continue}const M=g[y++]&63;if((k&224)===192){T+=String.fromCharCode((k&31)<<6|M);continue}const D=g[y++]&63;if((k&240)===224?k=(k&15)<<12|M<<6|D:k=(k&7)<<18|M<<12|D<<6|g[y++]&63,k<65536)T+=String.fromCharCode(k);else{const I=k-65536;T+=String.fromCharCode(55296|I>>10,56320|I&1023)}}return T}function u(g,y){return g?c(r.HEAPU8,g,y):""}const f={emscripten_get_now:UUe,emscripten_memcpy_big:s,emscripten_resize_heap:a,fd_write:()=>0};async function m(){const y=await e({env:f,wasi_snapshot_preview1:f});t=y.memory,o(t.buffer),Object.assign(r,y),r.UTF8ToString=u}return await m(),r}var qUe=Object.defineProperty,GUe=(e,t,n)=>t in e?qUe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ni=(e,t,n)=>GUe(e,typeof t!="symbol"?t+"":t,n);let zi=null;function WUe(e){throw new Q7(e.UTF8ToString(e.getLastOnigError()))}class OC{constructor(t){Ni(this,"utf16Length"),Ni(this,"utf8Length"),Ni(this,"utf16Value"),Ni(this,"utf8Value"),Ni(this,"utf16OffsetToUtf8"),Ni(this,"utf8OffsetToUtf16");const n=t.length,r=OC._utf8ByteLength(t),o=r!==n,s=o?new Uint32Array(n+1):null;o&&(s[n]=r);const i=o?new Uint32Array(r+1):null;o&&(i[r]=n);const a=new Uint8Array(r);let l=0;for(let c=0;c<n;c++){const u=t.charCodeAt(c);let f=u,m=!1;if(u>=55296&&u<=56319&&c+1<n){const g=t.charCodeAt(c+1);g>=56320&&g<=57343&&(f=(u-55296<<10)+65536|g-56320,m=!0)}o&&(s[c]=l,m&&(s[c+1]=l),f<=127?i[l+0]=c:f<=2047?(i[l+0]=c,i[l+1]=c):f<=65535?(i[l+0]=c,i[l+1]=c,i[l+2]=c):(i[l+0]=c,i[l+1]=c,i[l+2]=c,i[l+3]=c)),f<=127?a[l++]=f:f<=2047?(a[l++]=192|(f&1984)>>>6,a[l++]=128|(f&63)>>>0):f<=65535?(a[l++]=224|(f&61440)>>>12,a[l++]=128|(f&4032)>>>6,a[l++]=128|(f&63)>>>0):(a[l++]=240|(f&1835008)>>>18,a[l++]=128|(f&258048)>>>12,a[l++]=128|(f&4032)>>>6,a[l++]=128|(f&63)>>>0),m&&c++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=t,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=i}static _utf8ByteLength(t){let n=0;for(let r=0,o=t.length;r<o;r++){const s=t.charCodeAt(r);let i=s,a=!1;if(s>=55296&&s<=56319&&r+1<o){const l=t.charCodeAt(r+1);l>=56320&&l<=57343&&(i=(s-55296<<10)+65536|l-56320,a=!0)}i<=127?n+=1:i<=2047?n+=2:i<=65535?n+=3:n+=4,a&&r++}return n}createString(t){const n=t.omalloc(this.utf8Length);return t.HEAPU8.set(this.utf8Value,n),n}}const PC=class Qu{constructor(t){if(Ni(this,"id",++Qu.LAST_ID),Ni(this,"_onigBinding"),Ni(this,"content"),Ni(this,"utf16Length"),Ni(this,"utf8Length"),Ni(this,"utf16OffsetToUtf8"),Ni(this,"utf8OffsetToUtf16"),Ni(this,"ptr"),!zi)throw new Q7("Must invoke loadWasm first.");this._onigBinding=zi,this.content=t;const n=new OC(t);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!Qu._sharedPtrInUse?(Qu._sharedPtr||(Qu._sharedPtr=zi.omalloc(1e4)),Qu._sharedPtrInUse=!0,zi.HEAPU8.set(n.utf8Value,Qu._sharedPtr),this.ptr=Qu._sharedPtr):this.ptr=n.createString(zi)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===Qu._sharedPtr?Qu._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Ni(PC,"LAST_ID",0);Ni(PC,"_sharedPtr",0);Ni(PC,"_sharedPtrInUse",!1);let une=PC;class YUe{constructor(t){if(Ni(this,"_onigBinding"),Ni(this,"_ptr"),!zi)throw new Q7("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=t.length;a<l;a++){const c=new OC(t[a]);n[a]=c.createString(zi),r[a]=c.utf8Length}const o=zi.omalloc(4*t.length);zi.HEAPU32.set(n,o/4);const s=zi.omalloc(4*t.length);zi.HEAPU32.set(r,s/4);const i=zi.createOnigScanner(o,s,t.length);for(let a=0,l=t.length;a<l;a++)zi.ofree(n[a]);zi.ofree(s),zi.ofree(o),i===0&&WUe(zi),this._onigBinding=zi,this._ptr=i}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(t,n,r){let o=0;if(typeof r=="number"&&(o=r),typeof t=="string"){t=new une(t);const s=this._findNextMatchSync(t,n,!1,o);return t.dispose(),s}return this._findNextMatchSync(t,n,!1,o)}_findNextMatchSync(t,n,r,o){const s=this._onigBinding,i=s.findNextOnigScannerMatch(this._ptr,t.id,t.ptr,t.utf8Length,t.convertUtf16OffsetToUtf8(n),o);if(i===0)return null;const a=s.HEAPU32;let l=i/4;const c=a[l++],u=a[l++],f=[];for(let m=0;m<u;m++){const g=t.convertUtf8OffsetToUtf16(a[l++]),y=t.convertUtf8OffsetToUtf16(a[l++]);f[m]={start:g,end:y,length:y-g}}return{index:c,captureIndices:f}}}function KUe(e){return typeof e.instantiator=="function"}function ZUe(e){return typeof e.default=="function"}function JUe(e){return typeof e.data<"u"}function XUe(e){return typeof Response<"u"&&e instanceof Response}function QUe(e){var t;return typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||ArrayBuffer.isView(e))||typeof Buffer<"u"&&((t=Buffer.isBuffer)==null?void 0:t.call(Buffer,e))||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&e instanceof Uint32Array}let W2;function eHe(e){if(W2)return W2;async function t(){zi=await VUe(async n=>{let r=e;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),KUe(r)?r=await r.instantiator(n):ZUe(r)?r=await r.default(n):(JUe(r)&&(r=r.data),XUe(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await tHe(r)(n):r=await nHe(r)(n):QUe(r)?r=await Wk(r)(n):r instanceof WebAssembly.Module?r=await Wk(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await Wk(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return W2=t(),W2}function Wk(e){return t=>WebAssembly.instantiate(e,t)}function tHe(e){return t=>WebAssembly.instantiateStreaming(e,t)}function nHe(e){return async t=>{const n=await e.arrayBuffer();return WebAssembly.instantiate(n,t)}}async function rHe(e){return e&&await eHe(e),{createScanner(t){return new YUe(t.map(n=>typeof n=="string"?n:n.source))},createString(t){return new une(t)}}}const oHe=DUe({langs:FUe,themes:zUe,engine:()=>rHe(pe(()=>import("./wasm-CG6Dc4jp.js"),[],import.meta.url))}),{codeToHtml:ij}=PUe(oHe,{guessEmbeddedLanguages:Yje}),dne=x.createContext({code:""}),sHe={name:"line-numbers",line(e,t){e.children.unshift({type:"element",tagName:"span",properties:{className:["inline-block","min-w-10","mr-4","text-right","select-none","text-muted-foreground"]},children:[{type:"text",value:String(t)}]})}};async function iHe(e,t,n=!1){const r=n?[sHe]:[];try{return await Promise.all([ij(e,{lang:t,theme:"one-light",transformers:r}),ij(e,{lang:t,theme:"one-dark-pro",transformers:r})])}catch(o){console.error("[CodeBlock] Shiki highlighting failed:",o);const i=`<pre><code>${e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`;return[i,i]}}const oI=({code:e,language:t,showLineNumbers:n=!1,isDarkMode:r=!1,className:o,children:s,...i})=>{const[a,l]=x.useState(""),[c,u]=x.useState(""),f=x.useRef(!1);return x.useEffect(()=>(iHe(e,t,n).then(([m,g])=>{f.current||(l(m),u(g),f.current=!0)}).catch(m=>{console.error("[CodeBlock] Async error caught:",m)}),()=>{f.current=!1}),[e,t,n]),h.jsx(dne.Provider,{value:{code:e},children:h.jsx("div",{className:Qe("group relative w-full rounded-lg border overflow-hidden",r?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-stone-50 border-stone-200 text-stone-900",o),...i,children:h.jsxs("div",{className:"relative",children:[r?h.jsx("div",{className:"overflow-x-auto [&>pre]:m-0 [&>pre]:p-4 [&>pre]:text-sm [&>pre]:bg-transparent [&_code]:font-mono [&_code]:text-sm",dangerouslySetInnerHTML:{__html:c}}):h.jsx("div",{className:"overflow-x-auto [&>pre]:m-0 [&>pre]:p-4 [&>pre]:text-sm [&>pre]:bg-transparent [&_code]:font-mono [&_code]:text-sm",dangerouslySetInnerHTML:{__html:a}}),s&&h.jsx("div",{className:"absolute top-2 right-2 flex items-center gap-2",children:s})]})})})},aHe=({onCopy:e,onError:t,timeout:n=2e3,children:r,className:o,...s})=>{const[i,a]=x.useState(!1),{code:l}=x.useContext(dne),c=async()=>{var f;if(typeof window>"u"||!((f=navigator==null?void 0:navigator.clipboard)!=null&&f.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{await navigator.clipboard.writeText(l),a(!0),e==null||e(),setTimeout(()=>a(!1),n)}catch(m){t==null||t(m)}},u=i?Co:vq;return h.jsx(_r,{className:Qe("shrink-0",o),onClick:c,size:"icon",variant:"ghost",...s,children:r??h.jsx(u,{size:14})})},$w=(function(e){if(e==null)return dHe;if(typeof e=="function")return LC(e);if(typeof e=="object")return Array.isArray(e)?lHe(e):cHe(e);if(typeof e=="string")return uHe(e);throw new Error("Expected function, string, or object as test")});function lHe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=$w(e[n]);return LC(r);function r(...o){let s=-1;for(;++s<t.length;)if(t[s].apply(this,o))return!0;return!1}}function cHe(e){const t=e;return LC(n);function n(r){const o=r;let s;for(s in e)if(o[s]!==t[s])return!1;return!0}}function uHe(e){return LC(t);function t(n){return n&&n.type===e}}function LC(e){return t;function t(n,r,o){return!!(fHe(n)&&e.call(this,n,typeof r=="number"?r:void 0,o||void 0))}}function dHe(){return!0}function fHe(e){return e!==null&&typeof e=="object"&&"type"in e}const fne=[],Ev=!0,sI=!1,HT="skip";function eM(e,t,n,r){let o;typeof t=="function"&&typeof n!="function"?(r=n,n=t):o=t;const s=$w(o),i=r?-1:1;a(e,void 0,[])();function a(l,c,u){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const g=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=fne,y,v,w;if((!t||s(l,c,u[u.length-1]||void 0))&&(g=hHe(n(l,u)),g[0]===sI))return g;if("children"in l&&l.children){const _=l;if(_.children&&g[0]!==HT)for(v=(r?_.children.length:-1)+i,w=u.concat(_);v>-1&&v<_.children.length;){const T=_.children[v];if(y=a(T,v,w)(),y[0]===sI)return y;v=typeof y[1]=="number"?y[1]:v+i}}return g}}}function hHe(e){return Array.isArray(e)?e:typeof e=="number"?[Ev,e]:e==null?fne:[e]}function lb(e,t,n,r){let o,s,i;typeof t=="function"&&typeof n!="function"?(s=void 0,i=t,o=n):(s=t,i=n,o=r),eM(e,s,a,o);function a(l,c){const u=c[c.length-1],f=u?u.children.indexOf(l):void 0;return i(l,f,u)}}function pHe({defaultOrigin:e="",allowedLinkPrefixes:t=[],allowedImagePrefixes:n=[],allowDataImages:r=!1,allowedProtocols:o=[],blockedImageClass:s="inline-block bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-3 py-1 rounded text-sm",blockedLinkClass:i="text-gray-500"}){const a=t.length&&!t.every(c=>c==="*"),l=n.length&&!n.every(c=>c==="*");if(!e&&(a||l))throw new Error("defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided");return c=>{const u=yHe(e,t,n,r,o,s,i);lb(c,u)}}function aj(e,t){if(typeof e!="string")return null;try{return new URL(e)}catch{if(t)try{return new URL(e,t)}catch{return null}return null}}function mHe(e){return typeof e!="string"?!1:e.startsWith("/")}const gHe=new Set(["https:","http:","irc:","ircs:","mailto:","xmpp:","blob:"]),bHe=new Set(["javascript:","data:","file:","vbscript:"]);function lj(e,t,n,r=!1,o=!1,s=[]){if(!e)return null;if(typeof e=="string"&&e.startsWith("#")&&!o)try{if(new URL(e,"http://example.com").hash===e)return e}catch{}if(typeof e=="string"&&e.startsWith("data:"))return o&&r&&e.startsWith("data:image/")?e:null;if(typeof e=="string"&&e.startsWith("blob:")){try{if(new URL(e).protocol==="blob:"&&e.length>5){const u=e.substring(5);if(u&&u.length>0&&u!=="invalid")return e}}catch{return null}return null}const i=aj(e,n);if(!i||bHe.has(i.protocol)||!(gHe.has(i.protocol)||s.includes(i.protocol)||s.includes("*")))return null;if(i.protocol==="mailto:"||!i.protocol.match(/^https?:$/))return i.href;const l=mHe(e);return i&&t.some(c=>{const u=aj(c,n);return!u||u.origin!==i.origin?!1:i.href.startsWith(u.href)})?l?i.pathname+i.search+i.hash:i.href:t.includes("*")?i.protocol!=="https:"&&i.protocol!=="http:"?null:l?i.pathname+i.search+i.hash:i.href:null}const Yk=Symbol("node-seen"),yHe=(e,t,n,r,o,s,i)=>{const a=(l,c,u)=>{if(l.type!=="element"||l[Yk])return Ev;if(l.tagName==="a"){const f=lj(l.properties.href,t,e,!1,!1,o);return f===null?(l[Yk]=!0,lb(l,a),u&&typeof c=="number"&&(u.children[c]={type:"element",tagName:"span",properties:{title:"Blocked URL: "+String(l.properties.href),class:i},children:[...l.children,{type:"text",value:" [blocked]"}]}),HT):(l.properties.href=f,l.properties.target="_blank",l.properties.rel="noopener noreferrer",Ev)}if(l.tagName==="img"){const f=lj(l.properties.src,n,e,r,!0,o);return f===null?(l[Yk]=!0,lb(l,a),u&&typeof c=="number"&&(u.children[c]={type:"element",tagName:"span",properties:{class:s},children:[{type:"text",value:"[Image blocked: "+String(l.properties.alt||"No description")+"]"}]}),HT):(l.properties.src=f,Ev)}return Ev};return a},cj=/[#.]/g;function vHe(e,t){const n=e||"",r={};let o=0,s,i;for(;o<n.length;){cj.lastIndex=o;const a=cj.exec(n),l=n.slice(o,a?a.index:n.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:i=l,o+=l.length),a&&(s=a[0],o++)}return{type:"element",tagName:i||t||"div",properties:r,children:[]}}function hne(e,t,n){const r=n?_He(n):void 0;function o(s,i,...a){let l;if(s==null){l={type:"root",children:[]};const c=i;a.unshift(c)}else{l=vHe(s,t);const c=l.tagName.toLowerCase(),u=r?r.get(c):void 0;if(l.tagName=u||c,xHe(i))a.unshift(i);else for(const[f,m]of Object.entries(i))wHe(e,l.properties,f,m)}for(const c of a)iI(l.children,c);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return o}function xHe(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const r of n){const o=t[r];if(o&&typeof o=="object"){if(!Array.isArray(o))return!0;const s=o;for(const i of s)if(typeof i!="number"&&typeof i!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function wHe(e,t,n,r){const o=IC(e,n);let s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?o.spaceSeparated?s=Zz(r):o.commaSeparated?s=Kz(r):o.commaOrSpaceSeparated?s=Zz(Kz(r).join(" ")):s=uj(o,o.property,r):Array.isArray(r)?s=[...r]:s=o.property==="style"?EHe(r):String(r);if(Array.isArray(s)){const i=[];for(const a of s)i.push(uj(o,o.property,a));s=i}o.property==="className"&&Array.isArray(t.className)&&(s=t.className.concat(s)),t[o.property]=s}}function iI(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)iI(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?iI(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function uj(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||Vx(n)===Vx(t)))return!0}return n}function EHe(e){const t=[];for(const[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}function _He(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const SHe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],pne=hne(Lw,"div"),mne=hne(K0,"g",SHe),gd={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function THe(e,t){return gne(e,{})||{type:"root",children:[]}}function gne(e,t){const n=CHe(e,t);return n&&t.afterTransform&&t.afterTransform(e,n),n}function CHe(e,t){switch(e.nodeType){case 1:return IHe(e,t);case 3:return AHe(e);case 8:return NHe(e);case 9:return dj(e,t);case 10:return kHe();case 11:return dj(e,t);default:return}}function dj(e,t){return{type:"root",children:bne(e,t)}}function kHe(){return{type:"doctype"}}function AHe(e){return{type:"text",value:e.nodeValue||""}}function NHe(e){return{type:"comment",value:e.nodeValue||""}}function IHe(e,t){const n=e.namespaceURI,r=n===gd.svg?mne:pne,o=n===gd.html?e.tagName.toLowerCase():e.tagName,s=n===gd.html&&o==="template"?e.content:e,i=e.getAttributeNames(),a={};let l=-1;for(;++l<i.length;)a[i[l]]=e.getAttribute(i[l])||"";return r(o,a,bne(s,t))}function bne(e,t){const n=e.childNodes,r=[];let o=-1;for(;++o<n.length;){const s=gne(n[o],t);s!==void 0&&r.push(s)}return r}new DOMParser;function RHe(e,t){const n=MHe(e);return THe(n)}function MHe(e){const t=document.createElement("template");return t.innerHTML=e,t.content}const fj=(function(e,t,n){const r=$w(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(r(e.children[t],t,e))return e.children[t]}),Fm=(function(e){if(e==null)return PHe;if(typeof e=="string")return OHe(e);if(typeof e=="object")return DHe(e);if(typeof e=="function")return tM(e);throw new Error("Expected function, string, or array as `test`")});function DHe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Fm(e[n]);return tM(r);function r(...o){let s=-1;for(;++s<t.length;)if(t[s].apply(this,o))return!0;return!1}}function OHe(e){return tM(t);function t(n){return n.tagName===e}}function tM(e){return t;function t(n,r,o){return!!(LHe(n)&&e.call(this,n,typeof r=="number"?r:void 0,o||void 0))}}function PHe(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function LHe(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const hj=/\n/g,pj=/[\t ]+/g,aI=Fm("br"),mj=Fm(VHe),$He=Fm("p"),gj=Fm("tr"),FHe=Fm(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",HHe,qHe]),yne=Fm(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function BHe(e,t){const n=t||{},r="children"in e?e.children:[],o=yne(e),s=wne(e,{whitespace:n.whitespace||"normal"}),i=[];(e.type==="text"||e.type==="comment")&&i.push(...xne(e,{breakBefore:!0,breakAfter:!0}));let a=-1;for(;++a<r.length;)i.push(...vne(r[a],e,{whitespace:s,breakBefore:a?void 0:o,breakAfter:a<r.length-1?aI(r[a+1]):o}));const l=[];let c;for(a=-1;++a<i.length;){const u=i[a];typeof u=="number"?c!==void 0&&u>c&&(c=u):u&&(c!==void 0&&c>-1&&l.push(`
`.repeat(c)||" "),c=-1,l.push(u))}return l.join("")}function vne(e,t,n){return e.type==="element"?zHe(e,t,n):e.type==="text"?n.whitespace==="normal"?xne(e,n):jHe(e):[]}function zHe(e,t,n){const r=wne(e,n),o=e.children||[];let s=-1,i=[];if(FHe(e))return i;let a,l;for(aI(e)||gj(e)&&fj(t,e,gj)?l=`
`:$He(e)?(a=2,l=2):yne(e)&&(a=1,l=1);++s<o.length;)i=i.concat(vne(o[s],e,{whitespace:r,breakBefore:s?void 0:a,breakAfter:s<o.length-1?aI(o[s+1]):l}));return mj(e)&&fj(t,e,mj)&&i.push("	"),a&&i.unshift(a),l&&i.push(l),i}function xne(e,t){const n=String(e.value),r=[],o=[];let s=0;for(;s<=n.length;){hj.lastIndex=s;const l=hj.exec(n),c=l&&"index"in l?l.index:n.length;r.push(UHe(n.slice(s,c).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),s===0?t.breakBefore:!0,c===n.length?t.breakAfter:!0)),s=c+1}let i=-1,a;for(;++i<r.length;)r[i].charCodeAt(r[i].length-1)===8203||i<r.length-1&&r[i+1].charCodeAt(0)===8203?(o.push(r[i]),a=void 0):r[i]?(typeof a=="number"&&o.push(a),o.push(r[i]),a=0):(i===0||i===r.length-1)&&o.push(0);return o}function jHe(e){return[String(e.value)]}function UHe(e,t,n){const r=[];let o=0,s;for(;o<e.length;){pj.lastIndex=o;const i=pj.exec(e);s=i?i.index:e.length,!o&&!s&&i&&!t&&r.push(""),o!==s&&r.push(e.slice(o,s)),o=i?s+i[0].length:s}return o!==s&&!n&&r.push(""),r.join(" ")}function wne(e,t){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function HHe(e){return!!(e.properties||{}).hidden}function VHe(e){return e.tagName==="td"||e.tagName==="th"}function qHe(e){return e.tagName==="dialog"&&!(e.properties||{}).open}class fl{constructor(t,n,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=n,this.end=r}static range(t,n){return n?!t||!t.loc||!n.loc||t.loc.lexer!==n.loc.lexer?null:new fl(t.loc.lexer,t.loc.start,n.loc.end):t&&t.loc}}class Zl{constructor(t,n){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=n}range(t,n){return new Zl(n,fl.range(this,t))}}let It=class Ene{constructor(t,n){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+t,o,s,i=n&&n.loc;if(i&&i.start<=i.end){var a=i.lexer.input;o=i.start,s=i.end,o===a.length?r+=" at end of input: ":r+=" at position "+(o+1)+": ";var l=a.slice(o,s).replace(/[^]/g,"$&"),c;o>15?c=""+a.slice(o-15,o):c=a.slice(0,o);var u;s+15<a.length?u=a.slice(s,s+15)+"":u=a.slice(s),r+=c+l+u}var f=new Error(r);return f.name="ParseError",f.__proto__=Ene.prototype,f.position=o,o!=null&&s!=null&&(f.length=s-o),f.rawMessage=t,f}};It.prototype.__proto__=Error.prototype;var GHe=function(t,n){return t===void 0?n:t},WHe=/([A-Z])/g,YHe=function(t){return t.replace(WHe,"-$1").toLowerCase()},KHe={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ZHe=/[&><"']/g;function JHe(e){return String(e).replace(ZHe,t=>KHe[t])}var _ne=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},XHe=function(t){var n=_ne(t);return n.type==="mathord"||n.type==="textord"||n.type==="atom"},QHe=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},eVe=function(t){var n=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return n?n[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(n[1])?null:n[1].toLowerCase():"_relative"},so={deflt:GHe,escape:JHe,hyphenate:YHe,getBaseElem:_ne,isCharacterBox:XHe,protocolFromUrl:eVe},Wv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function tVe(e){if(e.default)return e.default;var t=e.type,n=Array.isArray(t)?t[0]:t;if(typeof n!="string")return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class nM{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var n in Wv)if(Wv.hasOwnProperty(n)){var r=Wv[n];this[n]=t[n]!==void 0?r.processor?r.processor(t[n]):t[n]:tVe(r)}}reportNonstrict(t,n,r){var o=this.strict;if(typeof o=="function"&&(o=o(t,n,r)),!(!o||o==="ignore")){if(o===!0||o==="error")throw new It("LaTeX-incompatible input and strict mode is set to 'error': "+(n+" ["+t+"]"),r);o==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+o+"': "+n+" ["+t+"]"))}}useStrictBehavior(t,n,r){var o=this.strict;if(typeof o=="function")try{o=o(t,n,r)}catch{o="error"}return!o||o==="ignore"?!1:o===!0||o==="error"?!0:o==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+o+"': "+n+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var n=so.protocolFromUrl(t.url);if(n==null)return!1;t.protocol=n}var r=typeof this.trust=="function"?this.trust(t):this.trust;return!!r}}class Yh{constructor(t,n,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=n,this.cramped=r}sup(){return dd[nVe[this.id]]}sub(){return dd[rVe[this.id]]}fracNum(){return dd[oVe[this.id]]}fracDen(){return dd[sVe[this.id]]}cramp(){return dd[iVe[this.id]]}text(){return dd[aVe[this.id]]}isTight(){return this.size>=2}}var rM=0,VT=1,O1=2,Uf=3,Gx=4,Nc=5,cb=6,$a=7,dd=[new Yh(rM,0,!1),new Yh(VT,0,!0),new Yh(O1,1,!1),new Yh(Uf,1,!0),new Yh(Gx,2,!1),new Yh(Nc,2,!0),new Yh(cb,3,!1),new Yh($a,3,!0)],nVe=[Gx,Nc,Gx,Nc,cb,$a,cb,$a],rVe=[Nc,Nc,Nc,Nc,$a,$a,$a,$a],oVe=[O1,Uf,Gx,Nc,cb,$a,cb,$a],sVe=[Uf,Uf,Nc,Nc,$a,$a,$a,$a],iVe=[VT,VT,Uf,Uf,Nc,Nc,$a,$a],aVe=[rM,VT,O1,Uf,O1,Uf,O1,Uf],$n={DISPLAY:dd[rM],TEXT:dd[O1],SCRIPT:dd[Gx],SCRIPTSCRIPT:dd[cb]},lI=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function lVe(e){for(var t=0;t<lI.length;t++)for(var n=lI[t],r=0;r<n.blocks.length;r++){var o=n.blocks[r];if(e>=o[0]&&e<=o[1])return n.name}return null}var $_=[];lI.forEach(e=>e.blocks.forEach(t=>$_.push(...t)));function Sne(e){for(var t=0;t<$_.length;t+=2)if(e>=$_[t]&&e<=$_[t+1])return!0;return!1}var Jg=80,cVe=function(t,n){return"M95,"+(622+t+n)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+n+"h400000v"+(40+t)+"h-400000z"},uVe=function(t,n){return"M263,"+(601+t+n)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+n+"h400000v"+(40+t)+"h-400000z"},dVe=function(t,n){return"M983 "+(10+t+n)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+n+"h400000v"+(40+t)+"h-400000z"},fVe=function(t,n){return"M424,"+(2398+t+n)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+n+`
h400000v`+(40+t)+"h-400000z"},hVe=function(t,n){return"M473,"+(2713+t+n)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+n+"h400000v"+(40+t)+"H1017.7z"},pVe=function(t){var n=t/2;return"M400000 "+t+" H0 L"+n+" 0 l65 45 L145 "+(t-80)+" H400000z"},mVe=function(t,n,r){var o=r-54-n-t;return"M702 "+(t+n)+"H400000"+(40+t)+`
H742v`+o+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+n+"H400000v"+(40+t)+"H742z"},gVe=function(t,n,r){n=1e3*n;var o="";switch(t){case"sqrtMain":o=cVe(n,Jg);break;case"sqrtSize1":o=uVe(n,Jg);break;case"sqrtSize2":o=dVe(n,Jg);break;case"sqrtSize3":o=fVe(n,Jg);break;case"sqrtSize4":o=hVe(n,Jg);break;case"sqrtTall":o=mVe(n,Jg,r)}return o},bVe=function(t,n){switch(t){case"":return"M291 0 H417 V"+n+" H291z M291 0 H417 V"+n+" H291z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z"+("M367 0 H410 V"+n+" H367z M367 0 H410 V"+n+" H367z");case"":return"M457 0 H583 V"+n+" H457z M457 0 H583 V"+n+" H457z";case"":return"M319 0 H403 V"+n+" H319z M319 0 H403 V"+n+" H319z";case"":return"M263 0 H347 V"+n+" H263z M263 0 H347 V"+n+" H263z";case"":return"M384 0 H504 V"+n+" H384z M384 0 H504 V"+n+" H384z";case"":return"M312 0 H355 V"+n+" H312z M312 0 H355 V"+n+" H312z";case"":return"M257 0 H300 V"+n+" H257z M257 0 H300 V"+n+" H257z"+("M478 0 H521 V"+n+" H478z M478 0 H521 V"+n+" H478z");default:return""}},bj={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},yVe=function(t,n){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+n+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+n+" v1759 h84z";case"vert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+" v585 h43z";case"doublevert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+` v585 h43z
M367 15 v585 v`+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+n+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+n+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+n+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v602 h84z
M403 1759 V0 H319 V1759 v`+n+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v602 h84z
M347 1759 V0 h-84 V1759 v`+n+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(n+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(n+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(n+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(n+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};let Fw=class{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),n=0;n<this.children.length;n++)t.appendChild(this.children[n].toNode());return t}toMarkup(){for(var t="",n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t}toText(){var t=n=>n.toText();return this.children.map(t).join("")}};var bd={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Y2={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},yj={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Tne(e,t){bd[e]=t}function oM(e,t,n){if(!bd[t])throw new Error("Font metrics not found for font: "+t+".");var r=e.charCodeAt(0),o=bd[t][r];if(!o&&e[0]in yj&&(r=yj[e[0]].charCodeAt(0),o=bd[t][r]),!o&&n==="text"&&Sne(r)&&(o=bd[t][77]),o)return{depth:o[0],height:o[1],italic:o[2],skew:o[3],width:o[4]}}var Kk={};function vVe(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!Kk[t]){var n=Kk[t]={cssEmPerMu:Y2.quad[t]/18};for(var r in Y2)Y2.hasOwnProperty(r)&&(n[r]=Y2[r][t])}return Kk[t]}var xVe=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],vj=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],xj=function(t,n){return n.size<2?t:xVe[t-1][n.size-1]};class _f{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||_f.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=vj[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return new _f(n)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:xj(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:vj[t-1]})}havingBaseStyle(t){t=t||this.style.text();var n=xj(_f.BASESIZE,t);return this.size===n&&this.textSize===_f.BASESIZE&&this.style===t?this:this.extend({style:t,size:n})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==_f.BASESIZE?["sizing","reset-size"+this.size,"size"+_f.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=vVe(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}_f.BASESIZE=6;var cI={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},wVe={ex:!0,em:!0,mu:!0},Cne=function(t){return typeof t!="string"&&(t=t.unit),t in cI||t in wVe||t==="ex"},Rs=function(t,n){var r;if(t.unit in cI)r=cI[t.unit]/n.fontMetrics().ptPerEm/n.sizeMultiplier;else if(t.unit==="mu")r=n.fontMetrics().cssEmPerMu;else{var o;if(n.style.isTight()?o=n.havingStyle(n.style.text()):o=n,t.unit==="ex")r=o.fontMetrics().xHeight;else if(t.unit==="em")r=o.fontMetrics().quad;else throw new It("Invalid unit: '"+t.unit+"'");o!==n&&(r*=o.sizeMultiplier/n.sizeMultiplier)}return Math.min(t.number*r,n.maxSize)},Ut=function(t){return+t.toFixed(4)+"em"},R0=function(t){return t.filter(n=>n).join(" ")},kne=function(t,n,r){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},n){n.style.isTight()&&this.classes.push("mtight");var o=n.getColor();o&&(this.style.color=o)}},Ane=function(t){var n=document.createElement(t);n.className=R0(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(n.style[r]=this.style[r]);for(var o in this.attributes)this.attributes.hasOwnProperty(o)&&n.setAttribute(o,this.attributes[o]);for(var s=0;s<this.children.length;s++)n.appendChild(this.children[s].toNode());return n},EVe=/[\s"'>/=\x00-\x1f]/,Nne=function(t){var n="<"+t;this.classes.length&&(n+=' class="'+so.escape(R0(this.classes))+'"');var r="";for(var o in this.style)this.style.hasOwnProperty(o)&&(r+=so.hyphenate(o)+":"+this.style[o]+";");r&&(n+=' style="'+so.escape(r)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(EVe.test(s))throw new It("Invalid attribute name '"+s+"'");n+=" "+s+'="'+so.escape(this.attributes[s])+'"'}n+=">";for(var i=0;i<this.children.length;i++)n+=this.children[i].toMarkup();return n+="</"+t+">",n};class Bw{constructor(t,n,r,o){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,kne.call(this,t,r,o),this.children=n||[]}setAttribute(t,n){this.attributes[t]=n}hasClass(t){return this.classes.includes(t)}toNode(){return Ane.call(this,"span")}toMarkup(){return Nne.call(this,"span")}}class sM{constructor(t,n,r,o){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,kne.call(this,n,o),this.children=r||[],this.setAttribute("href",t)}setAttribute(t,n){this.attributes[t]=n}hasClass(t){return this.classes.includes(t)}toNode(){return Ane.call(this,"a")}toMarkup(){return Nne.call(this,"a")}}class _Ve{constructor(t,n,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=n,this.src=t,this.classes=["mord"],this.style=r}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var n in this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);return t}toMarkup(){var t='<img src="'+so.escape(this.src)+'"'+(' alt="'+so.escape(this.alt)+'"'),n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=so.hyphenate(r)+":"+this.style[r]+";");return n&&(t+=' style="'+so.escape(n)+'"'),t+="'/>",t}}var SVe={:"",:"",:"",:""};class Lc{constructor(t,n,r,o,s,i,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=n||0,this.depth=r||0,this.italic=o||0,this.skew=s||0,this.width=i||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var c=lVe(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[]/.test(this.text)&&(this.text=SVe[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),n=null;this.italic>0&&(n=document.createElement("span"),n.style.marginRight=Ut(this.italic)),this.classes.length>0&&(n=n||document.createElement("span"),n.className=R0(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(n=n||document.createElement("span"),n.style[r]=this.style[r]);return n?(n.appendChild(t),n):t}toMarkup(){var t=!1,n="<span";this.classes.length&&(t=!0,n+=' class="',n+=so.escape(R0(this.classes)),n+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var o in this.style)this.style.hasOwnProperty(o)&&(r+=so.hyphenate(o)+":"+this.style[o]+";");r&&(t=!0,n+=' style="'+so.escape(r)+'"');var s=so.escape(this.text);return t?(n+=">",n+=s,n+="</span>",n):s}}class Zf{constructor(t,n){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=n||{}}toNode(){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);for(var o=0;o<this.children.length;o++)n.appendChild(this.children[o].toNode());return n}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=" "+n+'="'+so.escape(this.attributes[n])+'"');t+=">";for(var r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t+="</svg>",t}}class M0{constructor(t,n){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=n}toNode(){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"path");return this.alternate?n.setAttribute("d",this.alternate):n.setAttribute("d",bj[this.pathName]),n}toMarkup(){return this.alternate?'<path d="'+so.escape(this.alternate)+'"/>':'<path d="'+so.escape(bj[this.pathName])+'"/>'}}class uI{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);return n}toMarkup(){var t="<line";for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=" "+n+'="'+so.escape(this.attributes[n])+'"');return t+="/>",t}}function wj(e){if(e instanceof Lc)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function TVe(e){if(e instanceof Bw)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var CVe={bin:1,close:1,inner:1,open:1,punct:1,rel:1},kVe={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},es={math:{},text:{}};function $(e,t,n,r,o,s){es[e][o]={font:t,group:n,replace:r},s&&r&&(es[e][r]=es[e][o])}var V="math",yt="text",ne="main",xe="ams",vs="accent-token",on="bin",Ga="close",Db="inner",Ln="mathord",bi="op-token",rc="open",$C="punct",Ee="rel",sh="spacing",Pe="textord";$(V,ne,Ee,"","\\equiv",!0);$(V,ne,Ee,"","\\prec",!0);$(V,ne,Ee,"","\\succ",!0);$(V,ne,Ee,"","\\sim",!0);$(V,ne,Ee,"","\\perp");$(V,ne,Ee,"","\\preceq",!0);$(V,ne,Ee,"","\\succeq",!0);$(V,ne,Ee,"","\\simeq",!0);$(V,ne,Ee,"","\\mid",!0);$(V,ne,Ee,"","\\ll",!0);$(V,ne,Ee,"","\\gg",!0);$(V,ne,Ee,"","\\asymp",!0);$(V,ne,Ee,"","\\parallel");$(V,ne,Ee,"","\\bowtie",!0);$(V,ne,Ee,"","\\smile",!0);$(V,ne,Ee,"","\\sqsubseteq",!0);$(V,ne,Ee,"","\\sqsupseteq",!0);$(V,ne,Ee,"","\\doteq",!0);$(V,ne,Ee,"","\\frown",!0);$(V,ne,Ee,"","\\ni",!0);$(V,ne,Ee,"","\\propto",!0);$(V,ne,Ee,"","\\vdash",!0);$(V,ne,Ee,"","\\dashv",!0);$(V,ne,Ee,"","\\owns");$(V,ne,$C,".","\\ldotp");$(V,ne,$C,"","\\cdotp");$(V,ne,Pe,"#","\\#");$(yt,ne,Pe,"#","\\#");$(V,ne,Pe,"&","\\&");$(yt,ne,Pe,"&","\\&");$(V,ne,Pe,"","\\aleph",!0);$(V,ne,Pe,"","\\forall",!0);$(V,ne,Pe,"","\\hbar",!0);$(V,ne,Pe,"","\\exists",!0);$(V,ne,Pe,"","\\nabla",!0);$(V,ne,Pe,"","\\flat",!0);$(V,ne,Pe,"","\\ell",!0);$(V,ne,Pe,"","\\natural",!0);$(V,ne,Pe,"","\\clubsuit",!0);$(V,ne,Pe,"","\\wp",!0);$(V,ne,Pe,"","\\sharp",!0);$(V,ne,Pe,"","\\diamondsuit",!0);$(V,ne,Pe,"","\\Re",!0);$(V,ne,Pe,"","\\heartsuit",!0);$(V,ne,Pe,"","\\Im",!0);$(V,ne,Pe,"","\\spadesuit",!0);$(V,ne,Pe,"","\\S",!0);$(yt,ne,Pe,"","\\S");$(V,ne,Pe,"","\\P",!0);$(yt,ne,Pe,"","\\P");$(V,ne,Pe,"","\\dag");$(yt,ne,Pe,"","\\dag");$(yt,ne,Pe,"","\\textdagger");$(V,ne,Pe,"","\\ddag");$(yt,ne,Pe,"","\\ddag");$(yt,ne,Pe,"","\\textdaggerdbl");$(V,ne,Ga,"","\\rmoustache",!0);$(V,ne,rc,"","\\lmoustache",!0);$(V,ne,Ga,"","\\rgroup",!0);$(V,ne,rc,"","\\lgroup",!0);$(V,ne,on,"","\\mp",!0);$(V,ne,on,"","\\ominus",!0);$(V,ne,on,"","\\uplus",!0);$(V,ne,on,"","\\sqcap",!0);$(V,ne,on,"","\\ast");$(V,ne,on,"","\\sqcup",!0);$(V,ne,on,"","\\bigcirc",!0);$(V,ne,on,"","\\bullet",!0);$(V,ne,on,"","\\ddagger");$(V,ne,on,"","\\wr",!0);$(V,ne,on,"","\\amalg");$(V,ne,on,"&","\\And");$(V,ne,Ee,"","\\longleftarrow",!0);$(V,ne,Ee,"","\\Leftarrow",!0);$(V,ne,Ee,"","\\Longleftarrow",!0);$(V,ne,Ee,"","\\longrightarrow",!0);$(V,ne,Ee,"","\\Rightarrow",!0);$(V,ne,Ee,"","\\Longrightarrow",!0);$(V,ne,Ee,"","\\leftrightarrow",!0);$(V,ne,Ee,"","\\longleftrightarrow",!0);$(V,ne,Ee,"","\\Leftrightarrow",!0);$(V,ne,Ee,"","\\Longleftrightarrow",!0);$(V,ne,Ee,"","\\mapsto",!0);$(V,ne,Ee,"","\\longmapsto",!0);$(V,ne,Ee,"","\\nearrow",!0);$(V,ne,Ee,"","\\hookleftarrow",!0);$(V,ne,Ee,"","\\hookrightarrow",!0);$(V,ne,Ee,"","\\searrow",!0);$(V,ne,Ee,"","\\leftharpoonup",!0);$(V,ne,Ee,"","\\rightharpoonup",!0);$(V,ne,Ee,"","\\swarrow",!0);$(V,ne,Ee,"","\\leftharpoondown",!0);$(V,ne,Ee,"","\\rightharpoondown",!0);$(V,ne,Ee,"","\\nwarrow",!0);$(V,ne,Ee,"","\\rightleftharpoons",!0);$(V,xe,Ee,"","\\nless",!0);$(V,xe,Ee,"","\\@nleqslant");$(V,xe,Ee,"","\\@nleqq");$(V,xe,Ee,"","\\lneq",!0);$(V,xe,Ee,"","\\lneqq",!0);$(V,xe,Ee,"","\\@lvertneqq");$(V,xe,Ee,"","\\lnsim",!0);$(V,xe,Ee,"","\\lnapprox",!0);$(V,xe,Ee,"","\\nprec",!0);$(V,xe,Ee,"","\\npreceq",!0);$(V,xe,Ee,"","\\precnsim",!0);$(V,xe,Ee,"","\\precnapprox",!0);$(V,xe,Ee,"","\\nsim",!0);$(V,xe,Ee,"","\\@nshortmid");$(V,xe,Ee,"","\\nmid",!0);$(V,xe,Ee,"","\\nvdash",!0);$(V,xe,Ee,"","\\nvDash",!0);$(V,xe,Ee,"","\\ntriangleleft");$(V,xe,Ee,"","\\ntrianglelefteq",!0);$(V,xe,Ee,"","\\subsetneq",!0);$(V,xe,Ee,"","\\@varsubsetneq");$(V,xe,Ee,"","\\subsetneqq",!0);$(V,xe,Ee,"","\\@varsubsetneqq");$(V,xe,Ee,"","\\ngtr",!0);$(V,xe,Ee,"","\\@ngeqslant");$(V,xe,Ee,"","\\@ngeqq");$(V,xe,Ee,"","\\gneq",!0);$(V,xe,Ee,"","\\gneqq",!0);$(V,xe,Ee,"","\\@gvertneqq");$(V,xe,Ee,"","\\gnsim",!0);$(V,xe,Ee,"","\\gnapprox",!0);$(V,xe,Ee,"","\\nsucc",!0);$(V,xe,Ee,"","\\nsucceq",!0);$(V,xe,Ee,"","\\succnsim",!0);$(V,xe,Ee,"","\\succnapprox",!0);$(V,xe,Ee,"","\\ncong",!0);$(V,xe,Ee,"","\\@nshortparallel");$(V,xe,Ee,"","\\nparallel",!0);$(V,xe,Ee,"","\\nVDash",!0);$(V,xe,Ee,"","\\ntriangleright");$(V,xe,Ee,"","\\ntrianglerighteq",!0);$(V,xe,Ee,"","\\@nsupseteqq");$(V,xe,Ee,"","\\supsetneq",!0);$(V,xe,Ee,"","\\@varsupsetneq");$(V,xe,Ee,"","\\supsetneqq",!0);$(V,xe,Ee,"","\\@varsupsetneqq");$(V,xe,Ee,"","\\nVdash",!0);$(V,xe,Ee,"","\\precneqq",!0);$(V,xe,Ee,"","\\succneqq",!0);$(V,xe,Ee,"","\\@nsubseteqq");$(V,xe,on,"","\\unlhd");$(V,xe,on,"","\\unrhd");$(V,xe,Ee,"","\\nleftarrow",!0);$(V,xe,Ee,"","\\nrightarrow",!0);$(V,xe,Ee,"","\\nLeftarrow",!0);$(V,xe,Ee,"","\\nRightarrow",!0);$(V,xe,Ee,"","\\nleftrightarrow",!0);$(V,xe,Ee,"","\\nLeftrightarrow",!0);$(V,xe,Ee,"","\\vartriangle");$(V,xe,Pe,"","\\hslash");$(V,xe,Pe,"","\\triangledown");$(V,xe,Pe,"","\\lozenge");$(V,xe,Pe,"","\\circledS");$(V,xe,Pe,"","\\circledR");$(yt,xe,Pe,"","\\circledR");$(V,xe,Pe,"","\\measuredangle",!0);$(V,xe,Pe,"","\\nexists");$(V,xe,Pe,"","\\mho");$(V,xe,Pe,"","\\Finv",!0);$(V,xe,Pe,"","\\Game",!0);$(V,xe,Pe,"","\\backprime");$(V,xe,Pe,"","\\blacktriangle");$(V,xe,Pe,"","\\blacktriangledown");$(V,xe,Pe,"","\\blacksquare");$(V,xe,Pe,"","\\blacklozenge");$(V,xe,Pe,"","\\bigstar");$(V,xe,Pe,"","\\sphericalangle",!0);$(V,xe,Pe,"","\\complement",!0);$(V,xe,Pe,"","\\eth",!0);$(yt,ne,Pe,"","");$(V,xe,Pe,"","\\diagup");$(V,xe,Pe,"","\\diagdown");$(V,xe,Pe,"","\\square");$(V,xe,Pe,"","\\Box");$(V,xe,Pe,"","\\Diamond");$(V,xe,Pe,"","\\yen",!0);$(yt,xe,Pe,"","\\yen",!0);$(V,xe,Pe,"","\\checkmark",!0);$(yt,xe,Pe,"","\\checkmark");$(V,xe,Pe,"","\\beth",!0);$(V,xe,Pe,"","\\daleth",!0);$(V,xe,Pe,"","\\gimel",!0);$(V,xe,Pe,"","\\digamma",!0);$(V,xe,Pe,"","\\varkappa");$(V,xe,rc,"","\\@ulcorner",!0);$(V,xe,Ga,"","\\@urcorner",!0);$(V,xe,rc,"","\\@llcorner",!0);$(V,xe,Ga,"","\\@lrcorner",!0);$(V,xe,Ee,"","\\leqq",!0);$(V,xe,Ee,"","\\leqslant",!0);$(V,xe,Ee,"","\\eqslantless",!0);$(V,xe,Ee,"","\\lesssim",!0);$(V,xe,Ee,"","\\lessapprox",!0);$(V,xe,Ee,"","\\approxeq",!0);$(V,xe,on,"","\\lessdot");$(V,xe,Ee,"","\\lll",!0);$(V,xe,Ee,"","\\lessgtr",!0);$(V,xe,Ee,"","\\lesseqgtr",!0);$(V,xe,Ee,"","\\lesseqqgtr",!0);$(V,xe,Ee,"","\\doteqdot");$(V,xe,Ee,"","\\risingdotseq",!0);$(V,xe,Ee,"","\\fallingdotseq",!0);$(V,xe,Ee,"","\\backsim",!0);$(V,xe,Ee,"","\\backsimeq",!0);$(V,xe,Ee,"","\\subseteqq",!0);$(V,xe,Ee,"","\\Subset",!0);$(V,xe,Ee,"","\\sqsubset",!0);$(V,xe,Ee,"","\\preccurlyeq",!0);$(V,xe,Ee,"","\\curlyeqprec",!0);$(V,xe,Ee,"","\\precsim",!0);$(V,xe,Ee,"","\\precapprox",!0);$(V,xe,Ee,"","\\vartriangleleft");$(V,xe,Ee,"","\\trianglelefteq");$(V,xe,Ee,"","\\vDash",!0);$(V,xe,Ee,"","\\Vvdash",!0);$(V,xe,Ee,"","\\smallsmile");$(V,xe,Ee,"","\\smallfrown");$(V,xe,Ee,"","\\bumpeq",!0);$(V,xe,Ee,"","\\Bumpeq",!0);$(V,xe,Ee,"","\\geqq",!0);$(V,xe,Ee,"","\\geqslant",!0);$(V,xe,Ee,"","\\eqslantgtr",!0);$(V,xe,Ee,"","\\gtrsim",!0);$(V,xe,Ee,"","\\gtrapprox",!0);$(V,xe,on,"","\\gtrdot");$(V,xe,Ee,"","\\ggg",!0);$(V,xe,Ee,"","\\gtrless",!0);$(V,xe,Ee,"","\\gtreqless",!0);$(V,xe,Ee,"","\\gtreqqless",!0);$(V,xe,Ee,"","\\eqcirc",!0);$(V,xe,Ee,"","\\circeq",!0);$(V,xe,Ee,"","\\triangleq",!0);$(V,xe,Ee,"","\\thicksim");$(V,xe,Ee,"","\\thickapprox");$(V,xe,Ee,"","\\supseteqq",!0);$(V,xe,Ee,"","\\Supset",!0);$(V,xe,Ee,"","\\sqsupset",!0);$(V,xe,Ee,"","\\succcurlyeq",!0);$(V,xe,Ee,"","\\curlyeqsucc",!0);$(V,xe,Ee,"","\\succsim",!0);$(V,xe,Ee,"","\\succapprox",!0);$(V,xe,Ee,"","\\vartriangleright");$(V,xe,Ee,"","\\trianglerighteq");$(V,xe,Ee,"","\\Vdash",!0);$(V,xe,Ee,"","\\shortmid");$(V,xe,Ee,"","\\shortparallel");$(V,xe,Ee,"","\\between",!0);$(V,xe,Ee,"","\\pitchfork",!0);$(V,xe,Ee,"","\\varpropto");$(V,xe,Ee,"","\\blacktriangleleft");$(V,xe,Ee,"","\\therefore",!0);$(V,xe,Ee,"","\\backepsilon");$(V,xe,Ee,"","\\blacktriangleright");$(V,xe,Ee,"","\\because",!0);$(V,xe,Ee,"","\\llless");$(V,xe,Ee,"","\\gggtr");$(V,xe,on,"","\\lhd");$(V,xe,on,"","\\rhd");$(V,xe,Ee,"","\\eqsim",!0);$(V,ne,Ee,"","\\Join");$(V,xe,Ee,"","\\Doteq",!0);$(V,xe,on,"","\\dotplus",!0);$(V,xe,on,"","\\smallsetminus");$(V,xe,on,"","\\Cap",!0);$(V,xe,on,"","\\Cup",!0);$(V,xe,on,"","\\doublebarwedge",!0);$(V,xe,on,"","\\boxminus",!0);$(V,xe,on,"","\\boxplus",!0);$(V,xe,on,"","\\divideontimes",!0);$(V,xe,on,"","\\ltimes",!0);$(V,xe,on,"","\\rtimes",!0);$(V,xe,on,"","\\leftthreetimes",!0);$(V,xe,on,"","\\rightthreetimes",!0);$(V,xe,on,"","\\curlywedge",!0);$(V,xe,on,"","\\curlyvee",!0);$(V,xe,on,"","\\circleddash",!0);$(V,xe,on,"","\\circledast",!0);$(V,xe,on,"","\\centerdot");$(V,xe,on,"","\\intercal",!0);$(V,xe,on,"","\\doublecap");$(V,xe,on,"","\\doublecup");$(V,xe,on,"","\\boxtimes",!0);$(V,xe,Ee,"","\\dashrightarrow",!0);$(V,xe,Ee,"","\\dashleftarrow",!0);$(V,xe,Ee,"","\\leftleftarrows",!0);$(V,xe,Ee,"","\\leftrightarrows",!0);$(V,xe,Ee,"","\\Lleftarrow",!0);$(V,xe,Ee,"","\\twoheadleftarrow",!0);$(V,xe,Ee,"","\\leftarrowtail",!0);$(V,xe,Ee,"","\\looparrowleft",!0);$(V,xe,Ee,"","\\leftrightharpoons",!0);$(V,xe,Ee,"","\\curvearrowleft",!0);$(V,xe,Ee,"","\\circlearrowleft",!0);$(V,xe,Ee,"","\\Lsh",!0);$(V,xe,Ee,"","\\upuparrows",!0);$(V,xe,Ee,"","\\upharpoonleft",!0);$(V,xe,Ee,"","\\downharpoonleft",!0);$(V,ne,Ee,"","\\origof",!0);$(V,ne,Ee,"","\\imageof",!0);$(V,xe,Ee,"","\\multimap",!0);$(V,xe,Ee,"","\\leftrightsquigarrow",!0);$(V,xe,Ee,"","\\rightrightarrows",!0);$(V,xe,Ee,"","\\rightleftarrows",!0);$(V,xe,Ee,"","\\twoheadrightarrow",!0);$(V,xe,Ee,"","\\rightarrowtail",!0);$(V,xe,Ee,"","\\looparrowright",!0);$(V,xe,Ee,"","\\curvearrowright",!0);$(V,xe,Ee,"","\\circlearrowright",!0);$(V,xe,Ee,"","\\Rsh",!0);$(V,xe,Ee,"","\\downdownarrows",!0);$(V,xe,Ee,"","\\upharpoonright",!0);$(V,xe,Ee,"","\\downharpoonright",!0);$(V,xe,Ee,"","\\rightsquigarrow",!0);$(V,xe,Ee,"","\\leadsto");$(V,xe,Ee,"","\\Rrightarrow",!0);$(V,xe,Ee,"","\\restriction");$(V,ne,Pe,"","`");$(V,ne,Pe,"$","\\$");$(yt,ne,Pe,"$","\\$");$(yt,ne,Pe,"$","\\textdollar");$(V,ne,Pe,"%","\\%");$(yt,ne,Pe,"%","\\%");$(V,ne,Pe,"_","\\_");$(yt,ne,Pe,"_","\\_");$(yt,ne,Pe,"_","\\textunderscore");$(V,ne,Pe,"","\\angle",!0);$(V,ne,Pe,"","\\infty",!0);$(V,ne,Pe,"","\\prime");$(V,ne,Pe,"","\\triangle");$(V,ne,Pe,"","\\Gamma",!0);$(V,ne,Pe,"","\\Delta",!0);$(V,ne,Pe,"","\\Theta",!0);$(V,ne,Pe,"","\\Lambda",!0);$(V,ne,Pe,"","\\Xi",!0);$(V,ne,Pe,"","\\Pi",!0);$(V,ne,Pe,"","\\Sigma",!0);$(V,ne,Pe,"","\\Upsilon",!0);$(V,ne,Pe,"","\\Phi",!0);$(V,ne,Pe,"","\\Psi",!0);$(V,ne,Pe,"","\\Omega",!0);$(V,ne,Pe,"A","");$(V,ne,Pe,"B","");$(V,ne,Pe,"E","");$(V,ne,Pe,"Z","");$(V,ne,Pe,"H","");$(V,ne,Pe,"I","");$(V,ne,Pe,"K","");$(V,ne,Pe,"M","");$(V,ne,Pe,"N","");$(V,ne,Pe,"O","");$(V,ne,Pe,"P","");$(V,ne,Pe,"T","");$(V,ne,Pe,"X","");$(V,ne,Pe,"","\\neg",!0);$(V,ne,Pe,"","\\lnot");$(V,ne,Pe,"","\\top");$(V,ne,Pe,"","\\bot");$(V,ne,Pe,"","\\emptyset");$(V,xe,Pe,"","\\varnothing");$(V,ne,Ln,"","\\alpha",!0);$(V,ne,Ln,"","\\beta",!0);$(V,ne,Ln,"","\\gamma",!0);$(V,ne,Ln,"","\\delta",!0);$(V,ne,Ln,"","\\epsilon",!0);$(V,ne,Ln,"","\\zeta",!0);$(V,ne,Ln,"","\\eta",!0);$(V,ne,Ln,"","\\theta",!0);$(V,ne,Ln,"","\\iota",!0);$(V,ne,Ln,"","\\kappa",!0);$(V,ne,Ln,"","\\lambda",!0);$(V,ne,Ln,"","\\mu",!0);$(V,ne,Ln,"","\\nu",!0);$(V,ne,Ln,"","\\xi",!0);$(V,ne,Ln,"","\\omicron",!0);$(V,ne,Ln,"","\\pi",!0);$(V,ne,Ln,"","\\rho",!0);$(V,ne,Ln,"","\\sigma",!0);$(V,ne,Ln,"","\\tau",!0);$(V,ne,Ln,"","\\upsilon",!0);$(V,ne,Ln,"","\\phi",!0);$(V,ne,Ln,"","\\chi",!0);$(V,ne,Ln,"","\\psi",!0);$(V,ne,Ln,"","\\omega",!0);$(V,ne,Ln,"","\\varepsilon",!0);$(V,ne,Ln,"","\\vartheta",!0);$(V,ne,Ln,"","\\varpi",!0);$(V,ne,Ln,"","\\varrho",!0);$(V,ne,Ln,"","\\varsigma",!0);$(V,ne,Ln,"","\\varphi",!0);$(V,ne,on,"","*",!0);$(V,ne,on,"+","+");$(V,ne,on,"","-",!0);$(V,ne,on,"","\\cdot",!0);$(V,ne,on,"","\\circ",!0);$(V,ne,on,"","\\div",!0);$(V,ne,on,"","\\pm",!0);$(V,ne,on,"","\\times",!0);$(V,ne,on,"","\\cap",!0);$(V,ne,on,"","\\cup",!0);$(V,ne,on,"","\\setminus",!0);$(V,ne,on,"","\\land");$(V,ne,on,"","\\lor");$(V,ne,on,"","\\wedge",!0);$(V,ne,on,"","\\vee",!0);$(V,ne,Pe,"","\\surd");$(V,ne,rc,"","\\langle",!0);$(V,ne,rc,"","\\lvert");$(V,ne,rc,"","\\lVert");$(V,ne,Ga,"?","?");$(V,ne,Ga,"!","!");$(V,ne,Ga,"","\\rangle",!0);$(V,ne,Ga,"","\\rvert");$(V,ne,Ga,"","\\rVert");$(V,ne,Ee,"=","=");$(V,ne,Ee,":",":");$(V,ne,Ee,"","\\approx",!0);$(V,ne,Ee,"","\\cong",!0);$(V,ne,Ee,"","\\ge");$(V,ne,Ee,"","\\geq",!0);$(V,ne,Ee,"","\\gets");$(V,ne,Ee,">","\\gt",!0);$(V,ne,Ee,"","\\in",!0);$(V,ne,Ee,"","\\@not");$(V,ne,Ee,"","\\subset",!0);$(V,ne,Ee,"","\\supset",!0);$(V,ne,Ee,"","\\subseteq",!0);$(V,ne,Ee,"","\\supseteq",!0);$(V,xe,Ee,"","\\nsubseteq",!0);$(V,xe,Ee,"","\\nsupseteq",!0);$(V,ne,Ee,"","\\models");$(V,ne,Ee,"","\\leftarrow",!0);$(V,ne,Ee,"","\\le");$(V,ne,Ee,"","\\leq",!0);$(V,ne,Ee,"<","\\lt",!0);$(V,ne,Ee,"","\\rightarrow",!0);$(V,ne,Ee,"","\\to");$(V,xe,Ee,"","\\ngeq",!0);$(V,xe,Ee,"","\\nleq",!0);$(V,ne,sh,"","\\ ");$(V,ne,sh,"","\\space");$(V,ne,sh,"","\\nobreakspace");$(yt,ne,sh,"","\\ ");$(yt,ne,sh,""," ");$(yt,ne,sh,"","\\space");$(yt,ne,sh,"","\\nobreakspace");$(V,ne,sh,null,"\\nobreak");$(V,ne,sh,null,"\\allowbreak");$(V,ne,$C,",",",");$(V,ne,$C,";",";");$(V,xe,on,"","\\barwedge",!0);$(V,xe,on,"","\\veebar",!0);$(V,ne,on,"","\\odot",!0);$(V,ne,on,"","\\oplus",!0);$(V,ne,on,"","\\otimes",!0);$(V,ne,Pe,"","\\partial",!0);$(V,ne,on,"","\\oslash",!0);$(V,xe,on,"","\\circledcirc",!0);$(V,xe,on,"","\\boxdot",!0);$(V,ne,on,"","\\bigtriangleup");$(V,ne,on,"","\\bigtriangledown");$(V,ne,on,"","\\dagger");$(V,ne,on,"","\\diamond");$(V,ne,on,"","\\star");$(V,ne,on,"","\\triangleleft");$(V,ne,on,"","\\triangleright");$(V,ne,rc,"{","\\{");$(yt,ne,Pe,"{","\\{");$(yt,ne,Pe,"{","\\textbraceleft");$(V,ne,Ga,"}","\\}");$(yt,ne,Pe,"}","\\}");$(yt,ne,Pe,"}","\\textbraceright");$(V,ne,rc,"{","\\lbrace");$(V,ne,Ga,"}","\\rbrace");$(V,ne,rc,"[","\\lbrack",!0);$(yt,ne,Pe,"[","\\lbrack",!0);$(V,ne,Ga,"]","\\rbrack",!0);$(yt,ne,Pe,"]","\\rbrack",!0);$(V,ne,rc,"(","\\lparen",!0);$(V,ne,Ga,")","\\rparen",!0);$(yt,ne,Pe,"<","\\textless",!0);$(yt,ne,Pe,">","\\textgreater",!0);$(V,ne,rc,"","\\lfloor",!0);$(V,ne,Ga,"","\\rfloor",!0);$(V,ne,rc,"","\\lceil",!0);$(V,ne,Ga,"","\\rceil",!0);$(V,ne,Pe,"\\","\\backslash");$(V,ne,Pe,"","|");$(V,ne,Pe,"","\\vert");$(yt,ne,Pe,"|","\\textbar",!0);$(V,ne,Pe,"","\\|");$(V,ne,Pe,"","\\Vert");$(yt,ne,Pe,"","\\textbardbl");$(yt,ne,Pe,"~","\\textasciitilde");$(yt,ne,Pe,"\\","\\textbackslash");$(yt,ne,Pe,"^","\\textasciicircum");$(V,ne,Ee,"","\\uparrow",!0);$(V,ne,Ee,"","\\Uparrow",!0);$(V,ne,Ee,"","\\downarrow",!0);$(V,ne,Ee,"","\\Downarrow",!0);$(V,ne,Ee,"","\\updownarrow",!0);$(V,ne,Ee,"","\\Updownarrow",!0);$(V,ne,bi,"","\\coprod");$(V,ne,bi,"","\\bigvee");$(V,ne,bi,"","\\bigwedge");$(V,ne,bi,"","\\biguplus");$(V,ne,bi,"","\\bigcap");$(V,ne,bi,"","\\bigcup");$(V,ne,bi,"","\\int");$(V,ne,bi,"","\\intop");$(V,ne,bi,"","\\iint");$(V,ne,bi,"","\\iiint");$(V,ne,bi,"","\\prod");$(V,ne,bi,"","\\sum");$(V,ne,bi,"","\\bigotimes");$(V,ne,bi,"","\\bigoplus");$(V,ne,bi,"","\\bigodot");$(V,ne,bi,"","\\oint");$(V,ne,bi,"","\\oiint");$(V,ne,bi,"","\\oiiint");$(V,ne,bi,"","\\bigsqcup");$(V,ne,bi,"","\\smallint");$(yt,ne,Db,"","\\textellipsis");$(V,ne,Db,"","\\mathellipsis");$(yt,ne,Db,"","\\ldots",!0);$(V,ne,Db,"","\\ldots",!0);$(V,ne,Db,"","\\@cdots",!0);$(V,ne,Db,"","\\ddots",!0);$(V,ne,Pe,"","\\varvdots");$(yt,ne,Pe,"","\\varvdots");$(V,ne,vs,"","\\acute");$(V,ne,vs,"","\\grave");$(V,ne,vs,"","\\ddot");$(V,ne,vs,"~","\\tilde");$(V,ne,vs,"","\\bar");$(V,ne,vs,"","\\breve");$(V,ne,vs,"","\\check");$(V,ne,vs,"^","\\hat");$(V,ne,vs,"","\\vec");$(V,ne,vs,"","\\dot");$(V,ne,vs,"","\\mathring");$(V,ne,Ln,"","\\@imath");$(V,ne,Ln,"","\\@jmath");$(V,ne,Pe,"","");$(V,ne,Pe,"","");$(yt,ne,Pe,"","\\i",!0);$(yt,ne,Pe,"","\\j",!0);$(yt,ne,Pe,"","\\ss",!0);$(yt,ne,Pe,"","\\ae",!0);$(yt,ne,Pe,"","\\oe",!0);$(yt,ne,Pe,"","\\o",!0);$(yt,ne,Pe,"","\\AE",!0);$(yt,ne,Pe,"","\\OE",!0);$(yt,ne,Pe,"","\\O",!0);$(yt,ne,vs,"","\\'");$(yt,ne,vs,"","\\`");$(yt,ne,vs,"","\\^");$(yt,ne,vs,"","\\~");$(yt,ne,vs,"","\\=");$(yt,ne,vs,"","\\u");$(yt,ne,vs,"","\\.");$(yt,ne,vs,"","\\c");$(yt,ne,vs,"","\\r");$(yt,ne,vs,"","\\v");$(yt,ne,vs,"",'\\"');$(yt,ne,vs,"","\\H");$(yt,ne,vs,"","\\textcircled");var Ine={"--":!0,"---":!0,"``":!0,"''":!0};$(yt,ne,Pe,"","--",!0);$(yt,ne,Pe,"","\\textendash");$(yt,ne,Pe,"","---",!0);$(yt,ne,Pe,"","\\textemdash");$(yt,ne,Pe,"","`",!0);$(yt,ne,Pe,"","\\textquoteleft");$(yt,ne,Pe,"","'",!0);$(yt,ne,Pe,"","\\textquoteright");$(yt,ne,Pe,"","``",!0);$(yt,ne,Pe,"","\\textquotedblleft");$(yt,ne,Pe,"","''",!0);$(yt,ne,Pe,"","\\textquotedblright");$(V,ne,Pe,"","\\degree",!0);$(yt,ne,Pe,"","\\degree");$(yt,ne,Pe,"","\\textdegree",!0);$(V,ne,Pe,"","\\pounds");$(V,ne,Pe,"","\\mathsterling",!0);$(yt,ne,Pe,"","\\pounds");$(yt,ne,Pe,"","\\textsterling",!0);$(V,xe,Pe,"","\\maltese");$(yt,xe,Pe,"","\\maltese");var Ej='0123456789/@."';for(var Zk=0;Zk<Ej.length;Zk++){var _j=Ej.charAt(Zk);$(V,ne,Pe,_j,_j)}var Sj='0123456789!@*()-=+";:?/.,';for(var Jk=0;Jk<Sj.length;Jk++){var Tj=Sj.charAt(Jk);$(yt,ne,Pe,Tj,Tj)}var qT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var Xk=0;Xk<qT.length;Xk++){var K2=qT.charAt(Xk);$(V,ne,Ln,K2,K2),$(yt,ne,Pe,K2,K2)}$(V,xe,Pe,"C","");$(yt,xe,Pe,"C","");$(V,xe,Pe,"H","");$(yt,xe,Pe,"H","");$(V,xe,Pe,"N","");$(yt,xe,Pe,"N","");$(V,xe,Pe,"P","");$(yt,xe,Pe,"P","");$(V,xe,Pe,"Q","");$(yt,xe,Pe,"Q","");$(V,xe,Pe,"R","");$(yt,xe,Pe,"R","");$(V,xe,Pe,"Z","");$(yt,xe,Pe,"Z","");$(V,ne,Ln,"h","");$(yt,ne,Ln,"h","");var Wn="";for(var Ma=0;Ma<qT.length;Ma++){var qs=qT.charAt(Ma);Wn=String.fromCharCode(55349,56320+Ma),$(V,ne,Ln,qs,Wn),$(yt,ne,Pe,qs,Wn),Wn=String.fromCharCode(55349,56372+Ma),$(V,ne,Ln,qs,Wn),$(yt,ne,Pe,qs,Wn),Wn=String.fromCharCode(55349,56424+Ma),$(V,ne,Ln,qs,Wn),$(yt,ne,Pe,qs,Wn),Wn=String.fromCharCode(55349,56580+Ma),$(V,ne,Ln,qs,Wn),$(yt,ne,Pe,qs,Wn),Wn=String.fromCharCode(55349,56684+Ma),$(V,ne,Ln,qs,Wn),$(yt,ne,Pe,qs,Wn),Wn=String.fromCharCode(55349,56736+Ma),$(V,ne,Ln,qs,Wn),$(yt,ne,Pe,qs,Wn),Wn=String.fromCharCode(55349,56788+Ma),$(V,ne,Ln,qs,Wn),$(yt,ne,Pe,qs,Wn),Wn=String.fromCharCode(55349,56840+Ma),$(V,ne,Ln,qs,Wn),$(yt,ne,Pe,qs,Wn),Wn=String.fromCharCode(55349,56944+Ma),$(V,ne,Ln,qs,Wn),$(yt,ne,Pe,qs,Wn),Ma<26&&(Wn=String.fromCharCode(55349,56632+Ma),$(V,ne,Ln,qs,Wn),$(yt,ne,Pe,qs,Wn),Wn=String.fromCharCode(55349,56476+Ma),$(V,ne,Ln,qs,Wn),$(yt,ne,Pe,qs,Wn))}Wn="";$(V,ne,Ln,"k",Wn);$(yt,ne,Pe,"k",Wn);for(var Bp=0;Bp<10;Bp++){var Kh=Bp.toString();Wn=String.fromCharCode(55349,57294+Bp),$(V,ne,Ln,Kh,Wn),$(yt,ne,Pe,Kh,Wn),Wn=String.fromCharCode(55349,57314+Bp),$(V,ne,Ln,Kh,Wn),$(yt,ne,Pe,Kh,Wn),Wn=String.fromCharCode(55349,57324+Bp),$(V,ne,Ln,Kh,Wn),$(yt,ne,Pe,Kh,Wn),Wn=String.fromCharCode(55349,57334+Bp),$(V,ne,Ln,Kh,Wn),$(yt,ne,Pe,Kh,Wn)}var dI="";for(var Qk=0;Qk<dI.length;Qk++){var Z2=dI.charAt(Qk);$(V,ne,Ln,Z2,Z2),$(yt,ne,Pe,Z2,Z2)}var J2=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Cj=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],AVe=function(t,n){var r=t.charCodeAt(0),o=t.charCodeAt(1),s=(r-55296)*1024+(o-56320)+65536,i=n==="math"?0:1;if(119808<=s&&s<120484){var a=Math.floor((s-119808)/26);return[J2[a][2],J2[a][i]]}else if(120782<=s&&s<=120831){var l=Math.floor((s-120782)/10);return[Cj[l][2],Cj[l][i]]}else{if(s===120485||s===120486)return[J2[0][2],J2[0][i]];if(120486<s&&s<120782)return["",""];throw new It("Unsupported character: "+t)}},FC=function(t,n,r){return es[r][t]&&es[r][t].replace&&(t=es[r][t].replace),{value:t,metrics:oM(t,n,r)}},au=function(t,n,r,o,s){var i=FC(t,n,r),a=i.metrics;t=i.value;var l;if(a){var c=a.italic;(r==="text"||o&&o.font==="mathit")&&(c=0),l=new Lc(t,a.height,a.depth,c,a.skew,a.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+n+"' and mode '"+r+"'")),l=new Lc(t,0,0,0,0,0,s);if(o){l.maxFontSize=o.sizeMultiplier,o.style.isTight()&&l.classes.push("mtight");var u=o.getColor();u&&(l.style.color=u)}return l},NVe=function(t,n,r,o){return o===void 0&&(o=[]),r.font==="boldsymbol"&&FC(t,"Main-Bold",n).metrics?au(t,"Main-Bold",n,r,o.concat(["mathbf"])):t==="\\"||es[n][t].font==="main"?au(t,"Main-Regular",n,r,o):au(t,"AMS-Regular",n,r,o.concat(["amsrm"]))},IVe=function(t,n,r,o,s){return s!=="textord"&&FC(t,"Math-BoldItalic",n).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},RVe=function(t,n,r){var o=t.mode,s=t.text,i=["mord"],a=o==="math"||o==="text"&&n.font,l=a?n.font:n.fontFamily,c="",u="";if(s.charCodeAt(0)===55349&&([c,u]=AVe(s,o)),c.length>0)return au(s,c,o,n,i.concat(u));if(l){var f,m;if(l==="boldsymbol"){var g=IVe(s,o,n,i,r);f=g.fontName,m=[g.fontClass]}else a?(f=Dne[l].fontName,m=[l]):(f=X2(l,n.fontWeight,n.fontShape),m=[l,n.fontWeight,n.fontShape]);if(FC(s,f,o).metrics)return au(s,f,o,n,i.concat(m));if(Ine.hasOwnProperty(s)&&f.slice(0,10)==="Typewriter"){for(var y=[],v=0;v<s.length;v++)y.push(au(s[v],f,o,n,i.concat(m)));return Mne(y)}}if(r==="mathord")return au(s,"Math-Italic",o,n,i.concat(["mathnormal"]));if(r==="textord"){var w=es[o][s]&&es[o][s].font;if(w==="ams"){var _=X2("amsrm",n.fontWeight,n.fontShape);return au(s,_,o,n,i.concat("amsrm",n.fontWeight,n.fontShape))}else if(w==="main"||!w){var T=X2("textrm",n.fontWeight,n.fontShape);return au(s,T,o,n,i.concat(n.fontWeight,n.fontShape))}else{var k=X2(w,n.fontWeight,n.fontShape);return au(s,k,o,n,i.concat(k,n.fontWeight,n.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},MVe=(e,t)=>{if(R0(e.classes)!==R0(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var n=e.classes[0];if(n==="mbin"||n==="mord")return!1}for(var r in e.style)if(e.style.hasOwnProperty(r)&&e.style[r]!==t.style[r])return!1;for(var o in t.style)if(t.style.hasOwnProperty(o)&&e.style[o]!==t.style[o])return!1;return!0},DVe=e=>{for(var t=0;t<e.length-1;t++){var n=e[t],r=e[t+1];n instanceof Lc&&r instanceof Lc&&MVe(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,e.splice(t+1,1),t--)}return e},iM=function(t){for(var n=0,r=0,o=0,s=0;s<t.children.length;s++){var i=t.children[s];i.height>n&&(n=i.height),i.depth>r&&(r=i.depth),i.maxFontSize>o&&(o=i.maxFontSize)}t.height=n,t.depth=r,t.maxFontSize=o},cl=function(t,n,r,o){var s=new Bw(t,n,r,o);return iM(s),s},Rne=(e,t,n,r)=>new Bw(e,t,n,r),OVe=function(t,n,r){var o=cl([t],[],n);return o.height=Math.max(r||n.fontMetrics().defaultRuleThickness,n.minRuleThickness),o.style.borderBottomWidth=Ut(o.height),o.maxFontSize=1,o},PVe=function(t,n,r,o){var s=new sM(t,n,r,o);return iM(s),s},Mne=function(t){var n=new Fw(t);return iM(n),n},LVe=function(t,n){return t instanceof Fw?cl([],[t],n):t},$Ve=function(t){if(t.positionType==="individualShift"){for(var n=t.children,r=[n[0]],o=-n[0].shift-n[0].elem.depth,s=o,i=1;i<n.length;i++){var a=-n[i].shift-s-n[i].elem.depth,l=a-(n[i-1].elem.height+n[i-1].elem.depth);s=s+a,r.push({type:"kern",size:l}),r.push(n[i])}return{children:r,depth:o}}var c;if(t.positionType==="top"){for(var u=t.positionData,f=0;f<t.children.length;f++){var m=t.children[f];u-=m.type==="kern"?m.size:m.elem.height+m.elem.depth}c=u}else if(t.positionType==="bottom")c=-t.positionData;else{var g=t.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")c=-g.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")c=-g.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:c}},FVe=function(t,n){for(var{children:r,depth:o}=$Ve(t),s=0,i=0;i<r.length;i++){var a=r[i];if(a.type==="elem"){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var c=cl(["pstrut"],[]);c.style.height=Ut(s);for(var u=[],f=o,m=o,g=o,y=0;y<r.length;y++){var v=r[y];if(v.type==="kern")g+=v.size;else{var w=v.elem,_=v.wrapperClasses||[],T=v.wrapperStyle||{},k=cl(_,[c,w],void 0,T);k.style.top=Ut(-s-g-w.depth),v.marginLeft&&(k.style.marginLeft=v.marginLeft),v.marginRight&&(k.style.marginRight=v.marginRight),u.push(k),g+=w.height+w.depth}f=Math.min(f,g),m=Math.max(m,g)}var M=cl(["vlist"],u);M.style.height=Ut(m);var D;if(f<0){var I=cl([],[]),P=cl(["vlist"],[I]);P.style.height=Ut(-f);var B=cl(["vlist-s"],[new Lc("")]);D=[cl(["vlist-r"],[M,B]),cl(["vlist-r"],[P])]}else D=[cl(["vlist-r"],[M])];var U=cl(["vlist-t"],D);return D.length===2&&U.classes.push("vlist-t2"),U.height=m,U.depth=-f,U},BVe=(e,t)=>{var n=cl(["mspace"],[],t),r=Rs(e,t);return n.style.marginRight=Ut(r),n},X2=function(t,n,r){var o="";switch(t){case"amsrm":o="AMS";break;case"textrm":o="Main";break;case"textsf":o="SansSerif";break;case"texttt":o="Typewriter";break;default:o=t}var s;return n==="textbf"&&r==="textit"?s="BoldItalic":n==="textbf"?s="Bold":n==="textit"?s="Italic":s="Regular",o+"-"+s},Dne={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},One={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},zVe=function(t,n){var[r,o,s]=One[t],i=new M0(r),a=new Zf([i],{width:Ut(o),height:Ut(s),style:"width:"+Ut(o),viewBox:"0 0 "+1e3*o+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=Rne(["overlay"],[a],n);return l.height=s,l.style.height=Ut(s),l.style.width=Ut(o),l},We={fontMap:Dne,makeSymbol:au,mathsym:NVe,makeSpan:cl,makeSvgSpan:Rne,makeLineSpan:OVe,makeAnchor:PVe,makeFragment:Mne,wrapFragment:LVe,makeVList:FVe,makeOrd:RVe,makeGlue:BVe,staticSvg:zVe,svgData:One,tryCombineChars:DVe},Ns={number:3,unit:"mu"},zp={number:4,unit:"mu"},bf={number:5,unit:"mu"},jVe={mord:{mop:Ns,mbin:zp,mrel:bf,minner:Ns},mop:{mord:Ns,mop:Ns,mrel:bf,minner:Ns},mbin:{mord:zp,mop:zp,mopen:zp,minner:zp},mrel:{mord:bf,mop:bf,mopen:bf,minner:bf},mopen:{},mclose:{mop:Ns,mbin:zp,mrel:bf,minner:Ns},mpunct:{mord:Ns,mop:Ns,mrel:bf,mopen:Ns,mclose:Ns,mpunct:Ns,minner:Ns},minner:{mord:Ns,mop:Ns,mbin:zp,mrel:bf,mopen:Ns,mpunct:Ns,minner:Ns}},UVe={mord:{mop:Ns},mop:{mord:Ns,mop:Ns},mbin:{},mrel:{},mopen:{},mclose:{mop:Ns},mpunct:{},minner:{mop:Ns}},Pne={},GT={},WT={};function Qt(e){for(var{type:t,names:n,props:r,handler:o,htmlBuilder:s,mathmlBuilder:i}=e,a={type:t,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:o},l=0;l<n.length;++l)Pne[n[l]]=a;t&&(s&&(GT[t]=s),i&&(WT[t]=i))}function Bm(e){var{type:t,htmlBuilder:n,mathmlBuilder:r}=e;Qt({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var YT=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},ri=function(t){return t.type==="ordgroup"?t.body:[t]},Jf=We.makeSpan,HVe=["leftmost","mbin","mopen","mrel","mop","mpunct"],VVe=["rightmost","mrel","mclose","mpunct"],qVe={display:$n.DISPLAY,text:$n.TEXT,script:$n.SCRIPT,scriptscript:$n.SCRIPTSCRIPT},GVe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Di=function(t,n,r,o){o===void 0&&(o=[null,null]);for(var s=[],i=0;i<t.length;i++){var a=Kr(t[i],n);if(a instanceof Fw){var l=a.children;s.push(...l)}else s.push(a)}if(We.tryCombineChars(s),!r)return s;var c=n;if(t.length===1){var u=t[0];u.type==="sizing"?c=n.havingSize(u.size):u.type==="styling"&&(c=n.havingStyle(qVe[u.style]))}var f=Jf([o[0]||"leftmost"],[],n),m=Jf([o[1]||"rightmost"],[],n),g=r==="root";return kj(s,(y,v)=>{var w=v.classes[0],_=y.classes[0];w==="mbin"&&VVe.includes(_)?v.classes[0]="mord":_==="mbin"&&HVe.includes(w)&&(y.classes[0]="mord")},{node:f},m,g),kj(s,(y,v)=>{var w=fI(v),_=fI(y),T=w&&_?y.hasClass("mtight")?UVe[w][_]:jVe[w][_]:null;if(T)return We.makeGlue(T,c)},{node:f},m,g),s},kj=function e(t,n,r,o,s){o&&t.push(o);for(var i=0;i<t.length;i++){var a=t[i],l=Lne(a);if(l){e(l.children,n,r,null,s);continue}var c=!a.hasClass("mspace");if(c){var u=n(a,r.node);u&&(r.insertAfter?r.insertAfter(u):(t.unshift(u),i++))}c?r.node=a:s&&a.hasClass("newline")&&(r.node=Jf(["leftmost"])),r.insertAfter=(f=>m=>{t.splice(f+1,0,m),i++})(i)}o&&t.pop()},Lne=function(t){return t instanceof Fw||t instanceof sM||t instanceof Bw&&t.hasClass("enclosing")?t:null},WVe=function e(t,n){var r=Lne(t);if(r){var o=r.children;if(o.length){if(n==="right")return e(o[o.length-1],"right");if(n==="left")return e(o[0],"left")}}return t},fI=function(t,n){return t?(n&&(t=WVe(t,n)),GVe[t.classes[0]]||null):null},Wx=function(t,n){var r=["nulldelimiter"].concat(t.baseSizingClasses());return Jf(n.concat(r))},Kr=function(t,n,r){if(!t)return Jf();if(GT[t.type]){var o=GT[t.type](t,n);if(r&&n.size!==r.size){o=Jf(n.sizingClasses(r),[o],n);var s=n.sizeMultiplier/r.sizeMultiplier;o.height*=s,o.depth*=s}return o}else throw new It("Got group of unknown type: '"+t.type+"'")};function Q2(e,t){var n=Jf(["base"],e,t),r=Jf(["strut"]);return r.style.height=Ut(n.height+n.depth),n.depth&&(r.style.verticalAlign=Ut(-n.depth)),n.children.unshift(r),n}function hI(e,t){var n=null;e.length===1&&e[0].type==="tag"&&(n=e[0].tag,e=e[0].body);var r=Di(e,t,"root"),o;r.length===2&&r[1].hasClass("tag")&&(o=r.pop());for(var s=[],i=[],a=0;a<r.length;a++)if(i.push(r[a]),r[a].hasClass("mbin")||r[a].hasClass("mrel")||r[a].hasClass("allowbreak")){for(var l=!1;a<r.length-1&&r[a+1].hasClass("mspace")&&!r[a+1].hasClass("newline");)a++,i.push(r[a]),r[a].hasClass("nobreak")&&(l=!0);l||(s.push(Q2(i,t)),i=[])}else r[a].hasClass("newline")&&(i.pop(),i.length>0&&(s.push(Q2(i,t)),i=[]),s.push(r[a]));i.length>0&&s.push(Q2(i,t));var c;n?(c=Q2(Di(n,t,!0)),c.classes=["tag"],s.push(c)):o&&s.push(o);var u=Jf(["katex-html"],s);if(u.setAttribute("aria-hidden","true"),c){var f=c.children[0];f.style.height=Ut(u.height+u.depth),u.depth&&(f.style.verticalAlign=Ut(-u.depth))}return u}function $ne(e){return new Fw(e)}class Wl{constructor(t,n,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=n||[],this.classes=r||[]}setAttribute(t,n){this.attributes[t]=n}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);this.classes.length>0&&(t.className=R0(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof yd&&this.children[r+1]instanceof yd){for(var o=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof yd;)o+=this.children[++r].toText();t.appendChild(new yd(o).toNode())}else t.appendChild(this.children[r].toNode());return t}toMarkup(){var t="<"+this.type;for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(t+=" "+n+'="',t+=so.escape(this.attributes[n]),t+='"');this.classes.length>0&&(t+=' class ="'+so.escape(R0(this.classes))+'"'),t+=">";for(var r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class yd{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return so.escape(this.toText())}toText(){return this.text}}class YVe{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",Ut(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Ut(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ct={MathNode:Wl,TextNode:yd,SpaceNode:YVe,newDocumentFragment:$ne},$c=function(t,n,r){return es[n][t]&&es[n][t].replace&&t.charCodeAt(0)!==55349&&!(Ine.hasOwnProperty(t)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(t=es[n][t].replace),new Ct.TextNode(t)},aM=function(t){return t.length===1?t[0]:new Ct.MathNode("mrow",t)},lM=function(t,n){if(n.fontFamily==="texttt")return"monospace";if(n.fontFamily==="textsf")return n.fontShape==="textit"&&n.fontWeight==="textbf"?"sans-serif-bold-italic":n.fontShape==="textit"?"sans-serif-italic":n.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(n.fontShape==="textit"&&n.fontWeight==="textbf")return"bold-italic";if(n.fontShape==="textit")return"italic";if(n.fontWeight==="textbf")return"bold";var r=n.font;if(!r||r==="mathnormal")return null;var o=t.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var s=t.text;if(["\\imath","\\jmath"].includes(s))return null;es[o][s]&&es[o][s].replace&&(s=es[o][s].replace);var i=We.fontMap[r].fontName;return oM(s,i,o)?We.fontMap[r].variant:null};function eA(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof yd&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var n=e.children[0];return n instanceof yd&&n.text===","}else return!1}var El=function(t,n,r){if(t.length===1){var o=Vo(t[0],n);return r&&o instanceof Wl&&o.type==="mo"&&(o.setAttribute("lspace","0em"),o.setAttribute("rspace","0em")),[o]}for(var s=[],i,a=0;a<t.length;a++){var l=Vo(t[a],n);if(l instanceof Wl&&i instanceof Wl){if(l.type==="mtext"&&i.type==="mtext"&&l.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...l.children);continue}else if(l.type==="mn"&&i.type==="mn"){i.children.push(...l.children);continue}else if(eA(l)&&i.type==="mn"){i.children.push(...l.children);continue}else if(l.type==="mn"&&eA(i))l.children=[...i.children,...l.children],s.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(i.type==="mn"||eA(i))){var c=l.children[0];c instanceof Wl&&c.type==="mn"&&(c.children=[...i.children,...c.children],s.pop())}else if(i.type==="mi"&&i.children.length===1){var u=i.children[0];if(u instanceof yd&&u.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var f=l.children[0];f instanceof yd&&f.text.length>0&&(f.text=f.text.slice(0,1)+""+f.text.slice(1),s.pop())}}}s.push(l),i=l}return s},D0=function(t,n,r){return aM(El(t,n,r))},Vo=function(t,n){if(!t)return new Ct.MathNode("mrow");if(WT[t.type]){var r=WT[t.type](t,n);return r}else throw new It("Got group of unknown type: '"+t.type+"'")};function Aj(e,t,n,r,o){var s=El(e,n),i;s.length===1&&s[0]instanceof Wl&&["mrow","mtable"].includes(s[0].type)?i=s[0]:i=new Ct.MathNode("mrow",s);var a=new Ct.MathNode("annotation",[new Ct.TextNode(t)]);a.setAttribute("encoding","application/x-tex");var l=new Ct.MathNode("semantics",[i,a]),c=new Ct.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&c.setAttribute("display","block");var u=o?"katex":"katex-mathml";return We.makeSpan([u],[c])}var Fne=function(t){return new _f({style:t.displayMode?$n.DISPLAY:$n.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},Bne=function(t,n){if(n.displayMode){var r=["katex-display"];n.leqno&&r.push("leqno"),n.fleqn&&r.push("fleqn"),t=We.makeSpan(r,[t])}return t},KVe=function(t,n,r){var o=Fne(r),s;if(r.output==="mathml")return Aj(t,n,o,r.displayMode,!0);if(r.output==="html"){var i=hI(t,o);s=We.makeSpan(["katex"],[i])}else{var a=Aj(t,n,o,r.displayMode,!1),l=hI(t,o);s=We.makeSpan(["katex"],[a,l])}return Bne(s,r)},ZVe=function(t,n,r){var o=Fne(r),s=hI(t,o),i=We.makeSpan(["katex"],[s]);return Bne(i,r)},JVe={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},XVe=function(t){var n=new Ct.MathNode("mo",[new Ct.TextNode(JVe[t.replace(/^\\/,"")])]);return n.setAttribute("stretchy","true"),n},QVe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},eqe=function(t){return t.type==="ordgroup"?t.body.length:1},tqe=function(t,n){function r(){var a=4e5,l=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(l)){var c=t,u=eqe(c.base),f,m,g;if(u>5)l==="widehat"||l==="widecheck"?(f=420,a=2364,g=.42,m=l+"4"):(f=312,a=2340,g=.34,m="tilde4");else{var y=[1,1,2,2,3,3][u];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][y],f=[0,239,300,360,420][y],g=[0,.24,.3,.3,.36,.42][y],m=l+y):(a=[0,600,1033,2339,2340][y],f=[0,260,286,306,312][y],g=[0,.26,.286,.3,.306,.34][y],m="tilde"+y)}var v=new M0(m),w=new Zf([v],{width:"100%",height:Ut(g),viewBox:"0 0 "+a+" "+f,preserveAspectRatio:"none"});return{span:We.makeSvgSpan([],[w],n),minWidth:0,height:g}}else{var _=[],T=QVe[l],[k,M,D]=T,I=D/1e3,P=k.length,B,U;if(P===1){var j=T[3];B=["hide-tail"],U=[j]}else if(P===2)B=["halfarrow-left","halfarrow-right"],U=["xMinYMin","xMaxYMin"];else if(P===3)B=["brace-left","brace-center","brace-right"],U=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+P+" children.");for(var H=0;H<P;H++){var q=new M0(k[H]),z=new Zf([q],{width:"400em",height:Ut(I),viewBox:"0 0 "+a+" "+D,preserveAspectRatio:U[H]+" slice"}),Z=We.makeSvgSpan([B[H]],[z],n);if(P===1)return{span:Z,minWidth:M,height:I};Z.style.height=Ut(I),_.push(Z)}return{span:We.makeSpan(["stretchy"],_,n),minWidth:M,height:I}}}var{span:o,minWidth:s,height:i}=r();return o.height=i,o.style.height=Ut(i),s>0&&(o.style.minWidth=Ut(s)),o},nqe=function(t,n,r,o,s){var i,a=t.height+t.depth+r+o;if(/fbox|color|angl/.test(n)){if(i=We.makeSpan(["stretchy",n],[],s),n==="fbox"){var l=s.color&&s.getColor();l&&(i.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(n)&&c.push(new uI({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(n)&&c.push(new uI({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new Zf(c,{width:"100%",height:Ut(a)});i=We.makeSvgSpan([],[u],s)}return i.height=a,i.style.height=Ut(a),i},Xf={encloseSpan:nqe,mathMLnode:XVe,svgSpan:tqe};function xr(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function cM(e){var t=BC(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function BC(e){return e&&(e.type==="atom"||kVe.hasOwnProperty(e.type))?e:null}var uM=(e,t)=>{var n,r,o;e&&e.type==="supsub"?(r=xr(e.base,"accent"),n=r.base,e.base=n,o=TVe(Kr(e,t)),e.base=r):(r=xr(e,"accent"),n=r.base);var s=Kr(n,t.havingCrampedStyle()),i=r.isShifty&&so.isCharacterBox(n),a=0;if(i){var l=so.getBaseElem(n),c=Kr(l,t.havingCrampedStyle());a=wj(c).skew}var u=r.label==="\\c",f=u?s.height+s.depth:Math.min(s.height,t.fontMetrics().xHeight),m;if(r.isStretchy)m=Xf.svgSpan(r,t),m=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:m,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+Ut(2*a)+")",marginLeft:Ut(2*a)}:void 0}]},t);else{var g,y;r.label==="\\vec"?(g=We.staticSvg("vec",t),y=We.svgData.vec[1]):(g=We.makeOrd({mode:r.mode,text:r.label},t,"textord"),g=wj(g),g.italic=0,y=g.width,u&&(f+=g.depth)),m=We.makeSpan(["accent-body"],[g]);var v=r.label==="\\textcircled";v&&(m.classes.push("accent-full"),f=s.height);var w=a;v||(w-=y/2),m.style.left=Ut(w),r.label==="\\textcircled"&&(m.style.top=".2em"),m=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-f},{type:"elem",elem:m}]},t)}var _=We.makeSpan(["mord","accent"],[m],t);return o?(o.children[0]=_,o.height=Math.max(_.height,o.height),o.classes[0]="mord",o):_},zne=(e,t)=>{var n=e.isStretchy?Xf.mathMLnode(e.label):new Ct.MathNode("mo",[$c(e.label,e.mode)]),r=new Ct.MathNode("mover",[Vo(e.base,t),n]);return r.setAttribute("accent","true"),r},rqe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));Qt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var n=YT(t[0]),r=!rqe.test(e.funcName),o=!r||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:r,isShifty:o,base:n}},htmlBuilder:uM,mathmlBuilder:zne});Qt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var n=t[0],r=e.parser.mode;return r==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:e.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:uM,mathmlBuilder:zne});Qt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,o=t[0];return{type:"accentUnder",mode:n.mode,label:r,base:o}},htmlBuilder:(e,t)=>{var n=Kr(e.base,t),r=Xf.svgSpan(e,t),o=e.label==="\\utilde"?.12:0,s=We.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:o},{type:"elem",elem:n}]},t);return We.makeSpan(["mord","accentunder"],[s],t)},mathmlBuilder:(e,t)=>{var n=Xf.mathMLnode(e.label),r=new Ct.MathNode("munder",[Vo(e.base,t),n]);return r.setAttribute("accentunder","true"),r}});var e_=e=>{var t=new Ct.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};Qt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r,funcName:o}=e;return{type:"xArrow",mode:r.mode,label:o,body:t[0],below:n[0]}},htmlBuilder(e,t){var n=t.style,r=t.havingStyle(n.sup()),o=We.wrapFragment(Kr(e.body,r,t),t),s=e.label.slice(0,2)==="\\x"?"x":"cd";o.classes.push(s+"-arrow-pad");var i;e.below&&(r=t.havingStyle(n.sub()),i=We.wrapFragment(Kr(e.below,r,t),t),i.classes.push(s+"-arrow-pad"));var a=Xf.svgSpan(e,t),l=-t.fontMetrics().axisHeight+.5*a.height,c=-t.fontMetrics().axisHeight-.5*a.height-.111;(o.depth>.25||e.label==="\\xleftequilibrium")&&(c-=o.depth);var u;if(i){var f=-t.fontMetrics().axisHeight+i.height+.5*a.height+.111;u=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:c},{type:"elem",elem:a,shift:l},{type:"elem",elem:i,shift:f}]},t)}else u=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:c},{type:"elem",elem:a,shift:l}]},t);return u.children[0].children[0].children[1].classes.push("svg-align"),We.makeSpan(["mrel","x-arrow"],[u],t)},mathmlBuilder(e,t){var n=Xf.mathMLnode(e.label);n.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(e.body){var o=e_(Vo(e.body,t));if(e.below){var s=e_(Vo(e.below,t));r=new Ct.MathNode("munderover",[n,s,o])}else r=new Ct.MathNode("mover",[n,o])}else if(e.below){var i=e_(Vo(e.below,t));r=new Ct.MathNode("munder",[n,i])}else r=e_(),r=new Ct.MathNode("mover",[n,r]);return r}});var oqe=We.makeSpan;function jne(e,t){var n=Di(e.body,t,!0);return oqe([e.mclass],n,t)}function Une(e,t){var n,r=El(e.body,t);return e.mclass==="minner"?n=new Ct.MathNode("mpadded",r):e.mclass==="mord"?e.isCharacterBox?(n=r[0],n.type="mi"):n=new Ct.MathNode("mi",r):(e.isCharacterBox?(n=r[0],n.type="mo"):n=new Ct.MathNode("mo",r),e.mclass==="mbin"?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):e.mclass==="mpunct"?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(n.attributes.lspace="0em",n.attributes.rspace="0em"):e.mclass==="minner"&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}Qt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:n,funcName:r}=e,o=t[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),body:ri(o),isCharacterBox:so.isCharacterBox(o)}},htmlBuilder:jne,mathmlBuilder:Une});var zC=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};Qt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:n}=e;return{type:"mclass",mode:n.mode,mclass:zC(t[0]),body:ri(t[1]),isCharacterBox:so.isCharacterBox(t[1])}}});Qt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:n,funcName:r}=e,o=t[1],s=t[0],i;r!=="\\stackrel"?i=zC(o):i="mrel";var a={type:"op",mode:o.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:ri(o)},l={type:"supsub",mode:s.mode,base:a,sup:r==="\\underset"?null:s,sub:r==="\\underset"?s:null};return{type:"mclass",mode:n.mode,mclass:i,body:[l],isCharacterBox:so.isCharacterBox(l)}},htmlBuilder:jne,mathmlBuilder:Une});Qt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"pmb",mode:n.mode,mclass:zC(t[0]),body:ri(t[0])}},htmlBuilder(e,t){var n=Di(e.body,t,!0),r=We.makeSpan([e.mclass],n,t);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(e,t){var n=El(e.body,t),r=new Ct.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var sqe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Nj=()=>({type:"styling",body:[],mode:"math",style:"display"}),Ij=e=>e.type==="textord"&&e.text==="@",iqe=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function aqe(e,t,n){var r=sqe[e];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var o=n.callFunction("\\\\cdleft",[t[0]],[]),s={type:"atom",text:r,mode:"math",family:"rel"},i=n.callFunction("\\Big",[s],[]),a=n.callFunction("\\\\cdright",[t[1]],[]),l={type:"ordgroup",mode:"math",body:[o,i,a]};return n.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return n.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function lqe(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var n=e.fetch().text;if(n==="&"||n==="\\\\")e.consume();else if(n==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new It("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var r=[],o=[r],s=0;s<t.length;s++){for(var i=t[s],a=Nj(),l=0;l<i.length;l++)if(!Ij(i[l]))a.body.push(i[l]);else{r.push(a),l+=1;var c=cM(i[l]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var f=0;f<2;f++){for(var m=!0,g=l+1;g<i.length;g++){if(iqe(i[g],c)){m=!1,l=g;break}if(Ij(i[g]))throw new It("Missing a "+c+" character to complete a CD arrow.",i[g]);u[f].body.push(i[g])}if(m)throw new It("Missing a "+c+" character to complete a CD arrow.",i[l])}else throw new It('Expected one of "<>AV=|." after @',i[l]);var y=aqe(c,u,e),v={type:"styling",body:[y],mode:"math",style:"display"};r.push(v),a=Nj()}s%2===0?r.push(a):r.shift(),r=[],o.push(r)}e.gullet.endGroup(),e.gullet.endGroup();var w=new Array(o[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:o,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(o.length+1).fill([])}}Qt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:t[0]}},htmlBuilder(e,t){var n=t.havingStyle(t.style.sup()),r=We.wrapFragment(Kr(e.label,n,t),t);return r.classes.push("cd-label-"+e.side),r.style.bottom=Ut(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(e,t){var n=new Ct.MathNode("mrow",[Vo(e.label,t)]);return n=new Ct.MathNode("mpadded",[n]),n.setAttribute("width","0"),e.side==="left"&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),n=new Ct.MathNode("mstyle",[n]),n.setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}});Qt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:n}=e;return{type:"cdlabelparent",mode:n.mode,fragment:t[0]}},htmlBuilder(e,t){var n=We.wrapFragment(Kr(e.fragment,t),t);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder(e,t){return new Ct.MathNode("mrow",[Vo(e.fragment,t)])}});Qt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:n}=e,r=xr(t[0],"ordgroup"),o=r.body,s="",i=0;i<o.length;i++){var a=xr(o[i],"textord");s+=a.text}var l=parseInt(s),c;if(isNaN(l))throw new It("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new It("\\@char with invalid code point "+s);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:n.mode,text:c}}});var Hne=(e,t)=>{var n=Di(e.body,t.withColor(e.color),!1);return We.makeFragment(n)},Vne=(e,t)=>{var n=El(e.body,t.withColor(e.color)),r=new Ct.MathNode("mstyle",n);return r.setAttribute("mathcolor",e.color),r};Qt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:n}=e,r=xr(t[0],"color-token").color,o=t[1];return{type:"color",mode:n.mode,color:r,body:ri(o)}},htmlBuilder:Hne,mathmlBuilder:Vne});Qt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:n,breakOnTokenText:r}=e,o=xr(t[0],"color-token").color;n.gullet.macros.set("\\current@color",o);var s=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:o,body:s}},htmlBuilder:Hne,mathmlBuilder:Vne});Qt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,n){var{parser:r}=e,o=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:s,size:o&&xr(o,"size").value}},htmlBuilder(e,t){var n=We.makeSpan(["mspace"],[],t);return e.newLine&&(n.classes.push("newline"),e.size&&(n.style.marginTop=Ut(Rs(e.size,t)))),n},mathmlBuilder(e,t){var n=new Ct.MathNode("mspace");return e.newLine&&(n.setAttribute("linebreak","newline"),e.size&&n.setAttribute("height",Ut(Rs(e.size,t)))),n}});var pI={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},qne=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new It("Expected a control sequence",e);return t},cqe=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},Gne=(e,t,n,r)=>{var o=e.gullet.macros.get(n.text);o==null&&(n.noexpand=!0,o={tokens:[n],numArgs:0,unexpandable:!e.gullet.isExpandable(n.text)}),e.gullet.macros.set(t,o,r)};Qt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:n}=e;t.consumeSpaces();var r=t.fetch();if(pI[r.text])return(n==="\\global"||n==="\\\\globallong")&&(r.text=pI[r.text]),xr(t.parseFunction(),"internal");throw new It("Invalid token after macro prefix",r)}});Qt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=t.gullet.popToken(),o=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(o))throw new It("Expected a control sequence",r);for(var s=0,i,a=[[]];t.gullet.future().text!=="{";)if(r=t.gullet.popToken(),r.text==="#"){if(t.gullet.future().text==="{"){i=t.gullet.future(),a[s].push("{");break}if(r=t.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new It('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new It('Argument number "'+r.text+'" out of order');s++,a.push([])}else{if(r.text==="EOF")throw new It("Expected a macro definition");a[s].push(r.text)}var{tokens:l}=t.gullet.consumeArg();return i&&l.unshift(i),(n==="\\edef"||n==="\\xdef")&&(l=t.gullet.expandTokens(l),l.reverse()),t.gullet.macros.set(o,{tokens:l,numArgs:s,delimiters:a},n===pI[n]),{type:"internal",mode:t.mode}}});Qt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=qne(t.gullet.popToken());t.gullet.consumeSpaces();var o=cqe(t);return Gne(t,r,o,n==="\\\\globallet"),{type:"internal",mode:t.mode}}});Qt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=qne(t.gullet.popToken()),o=t.gullet.popToken(),s=t.gullet.popToken();return Gne(t,r,s,n==="\\\\globalfuture"),t.gullet.pushToken(s),t.gullet.pushToken(o),{type:"internal",mode:t.mode}}});var _v=function(t,n,r){var o=es.math[t]&&es.math[t].replace,s=oM(o||t,n,r);if(!s)throw new Error("Unsupported symbol "+t+" and font size "+n+".");return s},dM=function(t,n,r,o){var s=r.havingBaseStyle(n),i=We.makeSpan(o.concat(s.sizingClasses(r)),[t],r),a=s.sizeMultiplier/r.sizeMultiplier;return i.height*=a,i.depth*=a,i.maxFontSize=s.sizeMultiplier,i},Wne=function(t,n,r){var o=n.havingBaseStyle(r),s=(1-n.sizeMultiplier/o.sizeMultiplier)*n.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=Ut(s),t.height-=s,t.depth+=s},uqe=function(t,n,r,o,s,i){var a=We.makeSymbol(t,"Main-Regular",s,o),l=dM(a,n,o,i);return r&&Wne(l,o,n),l},dqe=function(t,n,r,o){return We.makeSymbol(t,"Size"+n+"-Regular",r,o)},Yne=function(t,n,r,o,s,i){var a=dqe(t,n,s,o),l=dM(We.makeSpan(["delimsizing","size"+n],[a],o),$n.TEXT,o,i);return r&&Wne(l,o,$n.TEXT),l},tA=function(t,n,r){var o;n==="Size1-Regular"?o="delim-size1":o="delim-size4";var s=We.makeSpan(["delimsizinginner",o],[We.makeSpan([],[We.makeSymbol(t,n,r)])]);return{type:"elem",elem:s}},nA=function(t,n,r){var o=bd["Size4-Regular"][t.charCodeAt(0)]?bd["Size4-Regular"][t.charCodeAt(0)][4]:bd["Size1-Regular"][t.charCodeAt(0)][4],s=new M0("inner",bVe(t,Math.round(1e3*n))),i=new Zf([s],{width:Ut(o),height:Ut(n),style:"width:"+Ut(o),viewBox:"0 0 "+1e3*o+" "+Math.round(1e3*n),preserveAspectRatio:"xMinYMin"}),a=We.makeSvgSpan([],[i],r);return a.height=n,a.style.height=Ut(n),a.style.width=Ut(o),{type:"elem",elem:a}},mI=.008,t_={type:"kern",size:-1*mI},fqe=["|","\\lvert","\\rvert","\\vert"],hqe=["\\|","\\lVert","\\rVert","\\Vert"],Kne=function(t,n,r,o,s,i){var a,l,c,u,f="",m=0;a=c=u=t,l=null;var g="Size1-Regular";t==="\\uparrow"?c=u="":t==="\\Uparrow"?c=u="":t==="\\downarrow"?a=c="":t==="\\Downarrow"?a=c="":t==="\\updownarrow"?(a="\\uparrow",c="",u="\\downarrow"):t==="\\Updownarrow"?(a="\\Uparrow",c="",u="\\Downarrow"):fqe.includes(t)?(c="",f="vert",m=333):hqe.includes(t)?(c="",f="doublevert",m=556):t==="["||t==="\\lbrack"?(a="",c="",u="",g="Size4-Regular",f="lbrack",m=667):t==="]"||t==="\\rbrack"?(a="",c="",u="",g="Size4-Regular",f="rbrack",m=667):t==="\\lfloor"||t===""?(c=a="",u="",g="Size4-Regular",f="lfloor",m=667):t==="\\lceil"||t===""?(a="",c=u="",g="Size4-Regular",f="lceil",m=667):t==="\\rfloor"||t===""?(c=a="",u="",g="Size4-Regular",f="rfloor",m=667):t==="\\rceil"||t===""?(a="",c=u="",g="Size4-Regular",f="rceil",m=667):t==="("||t==="\\lparen"?(a="",c="",u="",g="Size4-Regular",f="lparen",m=875):t===")"||t==="\\rparen"?(a="",c="",u="",g="Size4-Regular",f="rparen",m=875):t==="\\{"||t==="\\lbrace"?(a="",l="",u="",c="",g="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(a="",l="",u="",c="",g="Size4-Regular"):t==="\\lgroup"||t===""?(a="",u="",c="",g="Size4-Regular"):t==="\\rgroup"||t===""?(a="",u="",c="",g="Size4-Regular"):t==="\\lmoustache"||t===""?(a="",u="",c="",g="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(a="",u="",c="",g="Size4-Regular");var y=_v(a,g,s),v=y.height+y.depth,w=_v(c,g,s),_=w.height+w.depth,T=_v(u,g,s),k=T.height+T.depth,M=0,D=1;if(l!==null){var I=_v(l,g,s);M=I.height+I.depth,D=2}var P=v+k+M,B=Math.max(0,Math.ceil((n-P)/(D*_))),U=P+B*D*_,j=o.fontMetrics().axisHeight;r&&(j*=o.sizeMultiplier);var H=U/2-j,q=[];if(f.length>0){var z=U-v-k,Z=Math.round(U*1e3),X=yVe(f,Math.round(z*1e3)),J=new M0(f,X),ee=(m/1e3).toFixed(3)+"em",re=(Z/1e3).toFixed(3)+"em",ie=new Zf([J],{width:ee,height:re,viewBox:"0 0 "+m+" "+Z}),K=We.makeSvgSpan([],[ie],o);K.height=Z/1e3,K.style.width=ee,K.style.height=re,q.push({type:"elem",elem:K})}else{if(q.push(tA(u,g,s)),q.push(t_),l===null){var te=U-v-k+2*mI;q.push(nA(c,te,o))}else{var se=(U-v-k-M)/2+2*mI;q.push(nA(c,se,o)),q.push(t_),q.push(tA(l,g,s)),q.push(t_),q.push(nA(c,se,o))}q.push(t_),q.push(tA(a,g,s))}var Q=o.havingBaseStyle($n.TEXT),Te=We.makeVList({positionType:"bottom",positionData:H,children:q},Q);return dM(We.makeSpan(["delimsizing","mult"],[Te],Q),$n.TEXT,o,i)},rA=80,oA=.08,sA=function(t,n,r,o,s){var i=gVe(t,o,r),a=new M0(t,i),l=new Zf([a],{width:"400em",height:Ut(n),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return We.makeSvgSpan(["hide-tail"],[l],s)},pqe=function(t,n){var r=n.havingBaseSizing(),o=Qne("\\surd",t*r.sizeMultiplier,Xne,r),s=r.sizeMultiplier,i=Math.max(0,n.minRuleThickness-n.fontMetrics().sqrtRuleThickness),a,l=0,c=0,u=0,f;return o.type==="small"?(u=1e3+1e3*i+rA,t<1?s=1:t<1.4&&(s=.7),l=(1+i+oA)/s,c=(1+i)/s,a=sA("sqrtMain",l,u,i,n),a.style.minWidth="0.853em",f=.833/s):o.type==="large"?(u=(1e3+rA)*Yv[o.size],c=(Yv[o.size]+i)/s,l=(Yv[o.size]+i+oA)/s,a=sA("sqrtSize"+o.size,l,u,i,n),a.style.minWidth="1.02em",f=1/s):(l=t+i+oA,c=t+i,u=Math.floor(1e3*t+i)+rA,a=sA("sqrtTall",l,u,i,n),a.style.minWidth="0.742em",f=1.056),a.height=c,a.style.height=Ut(l),{span:a,advanceWidth:f,ruleWidth:(n.fontMetrics().sqrtRuleThickness+i)*s}},Zne=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],mqe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],Jne=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Yv=[0,1.2,1.8,2.4,3],gqe=function(t,n,r,o,s){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),Zne.includes(t)||Jne.includes(t))return Yne(t,n,!1,r,o,s);if(mqe.includes(t))return Kne(t,Yv[n],!1,r,o,s);throw new It("Illegal delimiter: '"+t+"'")},bqe=[{type:"small",style:$n.SCRIPTSCRIPT},{type:"small",style:$n.SCRIPT},{type:"small",style:$n.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],yqe=[{type:"small",style:$n.SCRIPTSCRIPT},{type:"small",style:$n.SCRIPT},{type:"small",style:$n.TEXT},{type:"stack"}],Xne=[{type:"small",style:$n.SCRIPTSCRIPT},{type:"small",style:$n.SCRIPT},{type:"small",style:$n.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],vqe=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},Qne=function(t,n,r,o){for(var s=Math.min(2,3-o.style.size),i=s;i<r.length&&r[i].type!=="stack";i++){var a=_v(t,vqe(r[i]),"math"),l=a.height+a.depth;if(r[i].type==="small"){var c=o.havingBaseStyle(r[i].style);l*=c.sizeMultiplier}if(l>n)return r[i]}return r[r.length-1]},ere=function(t,n,r,o,s,i){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var a;Jne.includes(t)?a=bqe:Zne.includes(t)?a=Xne:a=yqe;var l=Qne(t,n,a,o);return l.type==="small"?uqe(t,l.style,r,o,s,i):l.type==="large"?Yne(t,l.size,r,o,s,i):Kne(t,n,r,o,s,i)},xqe=function(t,n,r,o,s,i){var a=o.fontMetrics().axisHeight*o.sizeMultiplier,l=901,c=5/o.fontMetrics().ptPerEm,u=Math.max(n-a,r+a),f=Math.max(u/500*l,2*u-c);return ere(t,f,!0,o,s,i)},Hf={sqrtImage:pqe,sizedDelim:gqe,sizeToMaxHeight:Yv,customSizedDelim:ere,leftRightDelim:xqe},Rj={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},wqe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function jC(e,t){var n=BC(e);if(n&&wqe.includes(n.text))return n;throw n?new It("Invalid delimiter '"+n.text+"' after '"+t.funcName+"'",e):new It("Invalid delimiter type '"+e.type+"'",e)}Qt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var n=jC(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:Rj[e.funcName].size,mclass:Rj[e.funcName].mclass,delim:n.text}},htmlBuilder:(e,t)=>e.delim==="."?We.makeSpan([e.mclass]):Hf.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push($c(e.delim,e.mode));var n=new Ct.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=Ut(Hf.sizeToMaxHeight[e.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}});function Mj(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Qt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=e.parser.gullet.macros.get("\\current@color");if(n&&typeof n!="string")throw new It("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:jC(t[0],e).text,color:n}}});Qt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=jC(t[0],e),r=e.parser;++r.leftrightDepth;var o=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=xr(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:o,left:n.text,right:s.delim,rightColor:s.color}},htmlBuilder:(e,t)=>{Mj(e);for(var n=Di(e.body,t,!0,["mopen","mclose"]),r=0,o=0,s=!1,i=0;i<n.length;i++)n[i].isMiddle?s=!0:(r=Math.max(n[i].height,r),o=Math.max(n[i].depth,o));r*=t.sizeMultiplier,o*=t.sizeMultiplier;var a;if(e.left==="."?a=Wx(t,["mopen"]):a=Hf.leftRightDelim(e.left,r,o,t,e.mode,["mopen"]),n.unshift(a),s)for(var l=1;l<n.length;l++){var c=n[l],u=c.isMiddle;u&&(n[l]=Hf.leftRightDelim(u.delim,r,o,u.options,e.mode,[]))}var f;if(e.right===".")f=Wx(t,["mclose"]);else{var m=e.rightColor?t.withColor(e.rightColor):t;f=Hf.leftRightDelim(e.right,r,o,m,e.mode,["mclose"])}return n.push(f),We.makeSpan(["minner"],n,t)},mathmlBuilder:(e,t)=>{Mj(e);var n=El(e.body,t);if(e.left!=="."){var r=new Ct.MathNode("mo",[$c(e.left,e.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if(e.right!=="."){var o=new Ct.MathNode("mo",[$c(e.right,e.mode)]);o.setAttribute("fence","true"),e.rightColor&&o.setAttribute("mathcolor",e.rightColor),n.push(o)}return aM(n)}});Qt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=jC(t[0],e);if(!e.parser.leftrightDepth)throw new It("\\middle without preceding \\left",n);return{type:"middle",mode:e.parser.mode,delim:n.text}},htmlBuilder:(e,t)=>{var n;if(e.delim===".")n=Wx(t,[]);else{n=Hf.sizedDelim(e.delim,1,t,e.mode,[]);var r={delim:e.delim,options:t};n.isMiddle=r}return n},mathmlBuilder:(e,t)=>{var n=e.delim==="\\vert"||e.delim==="|"?$c("|","text"):$c(e.delim,e.mode),r=new Ct.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var fM=(e,t)=>{var n=We.wrapFragment(Kr(e.body,t),t),r=e.label.slice(1),o=t.sizeMultiplier,s,i=0,a=so.isCharacterBox(e.body);if(r==="sout")s=We.makeSpan(["stretchy","sout"]),s.height=t.fontMetrics().defaultRuleThickness/o,i=-.5*t.fontMetrics().xHeight;else if(r==="phase"){var l=Rs({number:.6,unit:"pt"},t),c=Rs({number:.35,unit:"ex"},t),u=t.havingBaseSizing();o=o/u.sizeMultiplier;var f=n.height+n.depth+l+c;n.style.paddingLeft=Ut(f/2+l);var m=Math.floor(1e3*f*o),g=pVe(m),y=new Zf([new M0("phase",g)],{width:"400em",height:Ut(m/1e3),viewBox:"0 0 400000 "+m,preserveAspectRatio:"xMinYMin slice"});s=We.makeSvgSpan(["hide-tail"],[y],t),s.style.height=Ut(f),i=n.depth+l+c}else{/cancel/.test(r)?a||n.classes.push("cancel-pad"):r==="angl"?n.classes.push("anglpad"):n.classes.push("boxpad");var v=0,w=0,_=0;/box/.test(r)?(_=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),v=t.fontMetrics().fboxsep+(r==="colorbox"?0:_),w=v):r==="angl"?(_=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),v=4*_,w=Math.max(0,.25-n.depth)):(v=a?.2:0,w=v),s=Xf.encloseSpan(n,r,v,w,t),/fbox|boxed|fcolorbox/.test(r)?(s.style.borderStyle="solid",s.style.borderWidth=Ut(_)):r==="angl"&&_!==.049&&(s.style.borderTopWidth=Ut(_),s.style.borderRightWidth=Ut(_)),i=n.depth+w,e.backgroundColor&&(s.style.backgroundColor=e.backgroundColor,e.borderColor&&(s.style.borderColor=e.borderColor))}var T;if(e.backgroundColor)T=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:i},{type:"elem",elem:n,shift:0}]},t);else{var k=/cancel|phase/.test(r)?["svg-align"]:[];T=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:s,shift:i,wrapperClasses:k}]},t)}return/cancel/.test(r)&&(T.height=n.height,T.depth=n.depth),/cancel/.test(r)&&!a?We.makeSpan(["mord","cancel-lap"],[T],t):We.makeSpan(["mord"],[T],t)},hM=(e,t)=>{var n=0,r=new Ct.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Vo(e.body,t)]);switch(e.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),e.label==="\\fcolorbox"){var o=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);r.setAttribute("style","border: "+o+"em solid "+String(e.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};Qt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,n){var{parser:r,funcName:o}=e,s=xr(t[0],"color-token").color,i=t[1];return{type:"enclose",mode:r.mode,label:o,backgroundColor:s,body:i}},htmlBuilder:fM,mathmlBuilder:hM});Qt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,n){var{parser:r,funcName:o}=e,s=xr(t[0],"color-token").color,i=xr(t[1],"color-token").color,a=t[2];return{type:"enclose",mode:r.mode,label:o,backgroundColor:i,borderColor:s,body:a}},htmlBuilder:fM,mathmlBuilder:hM});Qt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\fbox",body:t[0]}}});Qt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e,o=t[0];return{type:"enclose",mode:n.mode,label:r,body:o}},htmlBuilder:fM,mathmlBuilder:hM});Qt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\angl",body:t[0]}}});var tre={};function Ad(e){for(var{type:t,names:n,props:r,handler:o,htmlBuilder:s,mathmlBuilder:i}=e,a={type:t,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:o},l=0;l<n.length;++l)tre[n[l]]=a;s&&(GT[t]=s),i&&(WT[t]=i)}var nre={};function le(e,t){nre[e]=t}function Dj(e){var t=[];e.consumeSpaces();var n=e.fetch().text;for(n==="\\relax"&&(e.consume(),e.consumeSpaces(),n=e.fetch().text);n==="\\hline"||n==="\\hdashline";)e.consume(),t.push(n==="\\hdashline"),e.consumeSpaces(),n=e.fetch().text;return t}var UC=e=>{var t=e.parser.settings;if(!t.displayMode)throw new It("{"+e.envName+"} can be used only in display mode.")};function pM(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function Z0(e,t,n){var{hskipBeforeAndAfter:r,addJot:o,cols:s,arraystretch:i,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:f,leqno:m}=t;if(e.gullet.beginGroup(),c||e.gullet.macros.set("\\cr","\\\\\\relax"),!i){var g=e.gullet.expandMacroAsText("\\arraystretch");if(g==null)i=1;else if(i=parseFloat(g),!i||i<0)throw new It("Invalid \\arraystretch: "+g)}e.gullet.beginGroup();var y=[],v=[y],w=[],_=[],T=l!=null?[]:void 0;function k(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function M(){T&&(e.gullet.macros.get("\\df@tag")?(T.push(e.subparse([new Zl("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):T.push(!!l&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(k(),_.push(Dj(e));;){var D=e.parseExpression(!1,c?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),D={type:"ordgroup",mode:e.mode,body:D},n&&(D={type:"styling",mode:e.mode,style:n,body:[D]}),y.push(D);var I=e.fetch().text;if(I==="&"){if(f&&y.length===f){if(c||a)throw new It("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(I==="\\end"){M(),y.length===1&&D.type==="styling"&&D.body[0].body.length===0&&(v.length>1||!u)&&v.pop(),_.length<v.length+1&&_.push([]);break}else if(I==="\\\\"){e.consume();var P=void 0;e.gullet.future().text!==" "&&(P=e.parseSizeGroup(!0)),w.push(P?P.value:null),M(),_.push(Dj(e)),y=[],v.push(y),k()}else throw new It("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:o,arraystretch:i,body:v,cols:s,rowGaps:w,hskipBeforeAndAfter:r,hLinesBeforeRow:_,colSeparationType:a,tags:T,leqno:m}}function mM(e){return e.slice(0,1)==="d"?"display":"text"}var Nd=function(t,n){var r,o,s=t.body.length,i=t.hLinesBeforeRow,a=0,l=new Array(s),c=[],u=Math.max(n.fontMetrics().arrayRuleWidth,n.minRuleThickness),f=1/n.fontMetrics().ptPerEm,m=5*f;if(t.colSeparationType&&t.colSeparationType==="small"){var g=n.havingStyle($n.SCRIPT).sizeMultiplier;m=.2778*(g/n.sizeMultiplier)}var y=t.colSeparationType==="CD"?Rs({number:3,unit:"ex"},n):12*f,v=3*f,w=t.arraystretch*y,_=.7*w,T=.3*w,k=0;function M(tn){for(var vt=0;vt<tn.length;++vt)vt>0&&(k+=.25),c.push({pos:k,isDashed:tn[vt]})}for(M(i[0]),r=0;r<t.body.length;++r){var D=t.body[r],I=_,P=T;a<D.length&&(a=D.length);var B=new Array(D.length);for(o=0;o<D.length;++o){var U=Kr(D[o],n);P<U.depth&&(P=U.depth),I<U.height&&(I=U.height),B[o]=U}var j=t.rowGaps[r],H=0;j&&(H=Rs(j,n),H>0&&(H+=T,P<H&&(P=H),H=0)),t.addJot&&(P+=v),B.height=I,B.depth=P,k+=I,B.pos=k,k+=P+H,l[r]=B,M(i[r+1])}var q=k/2+n.fontMetrics().axisHeight,z=t.cols||[],Z=[],X,J,ee=[];if(t.tags&&t.tags.some(tn=>tn))for(r=0;r<s;++r){var re=l[r],ie=re.pos-q,K=t.tags[r],te=void 0;K===!0?te=We.makeSpan(["eqn-num"],[],n):K===!1?te=We.makeSpan([],[],n):te=We.makeSpan([],Di(K,n,!0),n),te.depth=re.depth,te.height=re.height,ee.push({type:"elem",elem:te,shift:ie})}for(o=0,J=0;o<a||J<z.length;++o,++J){for(var se=z[J]||{},Q=!0;se.type==="separator";){if(Q||(X=We.makeSpan(["arraycolsep"],[]),X.style.width=Ut(n.fontMetrics().doubleRuleSep),Z.push(X)),se.separator==="|"||se.separator===":"){var Te=se.separator==="|"?"solid":"dashed",ge=We.makeSpan(["vertical-separator"],[],n);ge.style.height=Ut(k),ge.style.borderRightWidth=Ut(u),ge.style.borderRightStyle=Te,ge.style.margin="0 "+Ut(-u/2);var Ce=k-q;Ce&&(ge.style.verticalAlign=Ut(-Ce)),Z.push(ge)}else throw new It("Invalid separator type: "+se.separator);J++,se=z[J]||{},Q=!1}if(!(o>=a)){var he=void 0;(o>0||t.hskipBeforeAndAfter)&&(he=so.deflt(se.pregap,m),he!==0&&(X=We.makeSpan(["arraycolsep"],[]),X.style.width=Ut(he),Z.push(X)));var Fe=[];for(r=0;r<s;++r){var Oe=l[r],Re=Oe[o];if(Re){var nt=Oe.pos-q;Re.depth=Oe.depth,Re.height=Oe.height,Fe.push({type:"elem",elem:Re,shift:nt})}}Fe=We.makeVList({positionType:"individualShift",children:Fe},n),Fe=We.makeSpan(["col-align-"+(se.align||"c")],[Fe]),Z.push(Fe),(o<a-1||t.hskipBeforeAndAfter)&&(he=so.deflt(se.postgap,m),he!==0&&(X=We.makeSpan(["arraycolsep"],[]),X.style.width=Ut(he),Z.push(X)))}}if(l=We.makeSpan(["mtable"],Z),c.length>0){for(var ue=We.makeLineSpan("hline",n,u),et=We.makeLineSpan("hdashline",n,u),ut=[{type:"elem",elem:l,shift:0}];c.length>0;){var Yt=c.pop(),Ht=Yt.pos-q;Yt.isDashed?ut.push({type:"elem",elem:et,shift:Ht}):ut.push({type:"elem",elem:ue,shift:Ht})}l=We.makeVList({positionType:"individualShift",children:ut},n)}if(ee.length===0)return We.makeSpan(["mord"],[l],n);var Pt=We.makeVList({positionType:"individualShift",children:ee},n);return Pt=We.makeSpan(["tag"],[Pt],n),We.makeFragment([l,Pt])},Eqe={c:"center ",l:"left ",r:"right "},Id=function(t,n){for(var r=[],o=new Ct.MathNode("mtd",[],["mtr-glue"]),s=new Ct.MathNode("mtd",[],["mml-eqn-num"]),i=0;i<t.body.length;i++){for(var a=t.body[i],l=[],c=0;c<a.length;c++)l.push(new Ct.MathNode("mtd",[Vo(a[c],n)]));t.tags&&t.tags[i]&&(l.unshift(o),l.push(o),t.leqno?l.unshift(s):l.push(s)),r.push(new Ct.MathNode("mtr",l))}var u=new Ct.MathNode("mtable",r),f=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);u.setAttribute("rowspacing",Ut(f));var m="",g="";if(t.cols&&t.cols.length>0){var y=t.cols,v="",w=!1,_=0,T=y.length;y[0].type==="separator"&&(m+="top ",_=1),y[y.length-1].type==="separator"&&(m+="bottom ",T-=1);for(var k=_;k<T;k++)y[k].type==="align"?(g+=Eqe[y[k].align],w&&(v+="none "),w=!0):y[k].type==="separator"&&w&&(v+=y[k].separator==="|"?"solid ":"dashed ",w=!1);u.setAttribute("columnalign",g.trim()),/[sd]/.test(v)&&u.setAttribute("columnlines",v.trim())}if(t.colSeparationType==="align"){for(var M=t.cols||[],D="",I=1;I<M.length;I++)D+=I%2?"0em ":"1em ";u.setAttribute("columnspacing",D.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var P="",B=t.hLinesBeforeRow;m+=B[0].length>0?"left ":"",m+=B[B.length-1].length>0?"right ":"";for(var U=1;U<B.length-1;U++)P+=B[U].length===0?"none ":B[U][0]?"dashed ":"solid ";return/[sd]/.test(P)&&u.setAttribute("rowlines",P.trim()),m!==""&&(u=new Ct.MathNode("menclose",[u]),u.setAttribute("notation",m.trim())),t.arraystretch&&t.arraystretch<1&&(u=new Ct.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},rre=function(t,n){t.envName.indexOf("ed")===-1&&UC(t);var r=[],o=t.envName.indexOf("at")>-1?"alignat":"align",s=t.envName==="split",i=Z0(t.parser,{cols:r,addJot:!0,autoTag:s?void 0:pM(t.envName),emptySingleRow:!0,colSeparationType:o,maxNumCols:s?2:void 0,leqno:t.parser.settings.leqno},"display"),a,l=0,c={type:"ordgroup",mode:t.mode,body:[]};if(n[0]&&n[0].type==="ordgroup"){for(var u="",f=0;f<n[0].body.length;f++){var m=xr(n[0].body[f],"textord");u+=m.text}a=Number(u),l=a*2}var g=!l;i.body.forEach(function(_){for(var T=1;T<_.length;T+=2){var k=xr(_[T],"styling"),M=xr(k.body[0],"ordgroup");M.body.unshift(c)}if(g)l<_.length&&(l=_.length);else{var D=_.length/2;if(a<D)throw new It("Too many math in a row: "+("expected "+a+", but got "+D),_[0])}});for(var y=0;y<l;++y){var v="r",w=0;y%2===1?v="l":y>0&&g&&(w=1),r[y]={type:"align",align:v,pregap:w,postgap:0}}return i.colSeparationType=g?"align":"alignat",i};Ad({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var n=BC(t[0]),r=n?[t[0]]:xr(t[0],"ordgroup").body,o=r.map(function(i){var a=cM(i),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new It("Unknown column alignment: "+l,i)}),s={cols:o,hskipBeforeAndAfter:!0,maxNumCols:o.length};return Z0(e.parser,s,mM(e.envName))},htmlBuilder:Nd,mathmlBuilder:Id});Ad({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if(e.envName.charAt(e.envName.length-1)==="*"){var o=e.parser;if(o.consumeSpaces(),o.fetch().text==="["){if(o.consume(),o.consumeSpaces(),n=o.fetch().text,"lcr".indexOf(n)===-1)throw new It("Expected l or c or r",o.nextToken);o.consume(),o.consumeSpaces(),o.expect("]"),o.consume(),r.cols=[{type:"align",align:n}]}}var s=Z0(e.parser,r,mM(e.envName)),i=Math.max(0,...s.body.map(a=>a.length));return s.cols=new Array(i).fill({type:"align",align:n}),t?{type:"leftright",mode:e.mode,body:[s],left:t[0],right:t[1],rightColor:void 0}:s},htmlBuilder:Nd,mathmlBuilder:Id});Ad({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},n=Z0(e.parser,t,"script");return n.colSeparationType="small",n},htmlBuilder:Nd,mathmlBuilder:Id});Ad({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var n=BC(t[0]),r=n?[t[0]]:xr(t[0],"ordgroup").body,o=r.map(function(i){var a=cM(i),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new It("Unknown column alignment: "+l,i)});if(o.length>1)throw new It("{subarray} can contain only one column");var s={cols:o,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=Z0(e.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new It("{subarray} can contain only one column");return s},htmlBuilder:Nd,mathmlBuilder:Id});Ad({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},n=Z0(e.parser,t,mM(e.envName));return{type:"leftright",mode:e.mode,body:[n],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Nd,mathmlBuilder:Id});Ad({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:rre,htmlBuilder:Nd,mathmlBuilder:Id});Ad({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&UC(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:pM(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return Z0(e.parser,t,"display")},htmlBuilder:Nd,mathmlBuilder:Id});Ad({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:rre,htmlBuilder:Nd,mathmlBuilder:Id});Ad({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){UC(e);var t={autoTag:pM(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return Z0(e.parser,t,"display")},htmlBuilder:Nd,mathmlBuilder:Id});Ad({type:"array",names:["CD"],props:{numArgs:0},handler(e){return UC(e),lqe(e.parser)},htmlBuilder:Nd,mathmlBuilder:Id});le("\\nonumber","\\gdef\\@eqnsw{0}");le("\\notag","\\nonumber");Qt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new It(e.funcName+" valid only within array environment")}});var Oj=tre;Qt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:n,funcName:r}=e,o=t[0];if(o.type!=="ordgroup")throw new It("Invalid environment name",o);for(var s="",i=0;i<o.body.length;++i)s+=xr(o.body[i],"textord").text;if(r==="\\begin"){if(!Oj.hasOwnProperty(s))throw new It("No such environment: "+s,o);var a=Oj[s],{args:l,optArgs:c}=n.parseArguments("\\begin{"+s+"}",a),u={mode:n.mode,envName:s,parser:n},f=a.handler(u,l,c);n.expect("\\end",!1);var m=n.nextToken,g=xr(n.parseFunction(),"environment");if(g.name!==s)throw new It("Mismatch: \\begin{"+s+"} matched by \\end{"+g.name+"}",m);return f}return{type:"environment",mode:n.mode,name:s,nameGroup:o}}});var ore=(e,t)=>{var n=e.font,r=t.withFont(n);return Kr(e.body,r)},sre=(e,t)=>{var n=e.font,r=t.withFont(n);return Vo(e.body,r)},Pj={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Qt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,o=YT(t[0]),s=r;return s in Pj&&(s=Pj[s]),{type:"font",mode:n.mode,font:s.slice(1),body:o}},htmlBuilder:ore,mathmlBuilder:sre});Qt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:n}=e,r=t[0],o=so.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:zC(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:o}}});Qt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r,breakOnTokenText:o}=e,{mode:s}=n,i=n.parseExpression(!0,o),a="math"+r.slice(1);return{type:"font",mode:s,font:a,body:{type:"ordgroup",mode:n.mode,body:i}}},htmlBuilder:ore,mathmlBuilder:sre});var ire=(e,t)=>{var n=t;return e==="display"?n=n.id>=$n.SCRIPT.id?n.text():$n.DISPLAY:e==="text"&&n.size===$n.DISPLAY.size?n=$n.TEXT:e==="script"?n=$n.SCRIPT:e==="scriptscript"&&(n=$n.SCRIPTSCRIPT),n},gM=(e,t)=>{var n=ire(e.size,t.style),r=n.fracNum(),o=n.fracDen(),s;s=t.havingStyle(r);var i=Kr(e.numer,s,t);if(e.continued){var a=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;i.height=i.height<a?a:i.height,i.depth=i.depth<l?l:i.depth}s=t.havingStyle(o);var c=Kr(e.denom,s,t),u,f,m;e.hasBarLine?(e.barSize?(f=Rs(e.barSize,t),u=We.makeLineSpan("frac-line",t,f)):u=We.makeLineSpan("frac-line",t),f=u.height,m=u.height):(u=null,f=0,m=t.fontMetrics().defaultRuleThickness);var g,y,v;n.size===$n.DISPLAY.size||e.size==="display"?(g=t.fontMetrics().num1,f>0?y=3*m:y=7*m,v=t.fontMetrics().denom1):(f>0?(g=t.fontMetrics().num2,y=m):(g=t.fontMetrics().num3,y=3*m),v=t.fontMetrics().denom2);var w;if(u){var T=t.fontMetrics().axisHeight;g-i.depth-(T+.5*f)<y&&(g+=y-(g-i.depth-(T+.5*f))),T-.5*f-(c.height-v)<y&&(v+=y-(T-.5*f-(c.height-v)));var k=-(T-.5*f);w=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:u,shift:k},{type:"elem",elem:i,shift:-g}]},t)}else{var _=g-i.depth-(c.height-v);_<y&&(g+=.5*(y-_),v+=.5*(y-_)),w=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:i,shift:-g}]},t)}s=t.havingStyle(n),w.height*=s.sizeMultiplier/t.sizeMultiplier,w.depth*=s.sizeMultiplier/t.sizeMultiplier;var M;n.size===$n.DISPLAY.size?M=t.fontMetrics().delim1:n.size===$n.SCRIPTSCRIPT.size?M=t.havingStyle($n.SCRIPT).fontMetrics().delim2:M=t.fontMetrics().delim2;var D,I;return e.leftDelim==null?D=Wx(t,["mopen"]):D=Hf.customSizedDelim(e.leftDelim,M,!0,t.havingStyle(n),e.mode,["mopen"]),e.continued?I=We.makeSpan([]):e.rightDelim==null?I=Wx(t,["mclose"]):I=Hf.customSizedDelim(e.rightDelim,M,!0,t.havingStyle(n),e.mode,["mclose"]),We.makeSpan(["mord"].concat(s.sizingClasses(t)),[D,We.makeSpan(["mfrac"],[w]),I],t)},bM=(e,t)=>{var n=new Ct.MathNode("mfrac",[Vo(e.numer,t),Vo(e.denom,t)]);if(!e.hasBarLine)n.setAttribute("linethickness","0px");else if(e.barSize){var r=Rs(e.barSize,t);n.setAttribute("linethickness",Ut(r))}var o=ire(e.size,t.style);if(o.size!==t.style.size){n=new Ct.MathNode("mstyle",[n]);var s=o.size===$n.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",s),n.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var i=[];if(e.leftDelim!=null){var a=new Ct.MathNode("mo",[new Ct.TextNode(e.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),i.push(a)}if(i.push(n),e.rightDelim!=null){var l=new Ct.MathNode("mo",[new Ct.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),i.push(l)}return aM(i)}return n};Qt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,o=t[0],s=t[1],i,a=null,l=null,c="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,a="(",l=")";break;case"\\\\bracefrac":i=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":i=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:n.mode,continued:!1,numer:o,denom:s,hasBarLine:i,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:gM,mathmlBuilder:bM});Qt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:n,funcName:r}=e,o=t[0],s=t[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:o,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Qt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:n,token:r}=e,o;switch(n){case"\\over":o="\\frac";break;case"\\choose":o="\\binom";break;case"\\atop":o="\\\\atopfrac";break;case"\\brace":o="\\\\bracefrac";break;case"\\brack":o="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:o,token:r}}});var Lj=["display","text","script","scriptscript"],$j=function(t){var n=null;return t.length>0&&(n=t,n=n==="."?null:n),n};Qt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:n}=e,r=t[4],o=t[5],s=YT(t[0]),i=s.type==="atom"&&s.family==="open"?$j(s.text):null,a=YT(t[1]),l=a.type==="atom"&&a.family==="close"?$j(a.text):null,c=xr(t[2],"size"),u,f=null;c.isBlank?u=!0:(f=c.value,u=f.number>0);var m="auto",g=t[3];if(g.type==="ordgroup"){if(g.body.length>0){var y=xr(g.body[0],"textord");m=Lj[Number(y.text)]}}else g=xr(g,"textord"),m=Lj[Number(g.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:o,continued:!1,hasBarLine:u,barSize:f,leftDelim:i,rightDelim:l,size:m}},htmlBuilder:gM,mathmlBuilder:bM});Qt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:n,funcName:r,token:o}=e;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:xr(t[0],"size").value,token:o}}});Qt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:n,funcName:r}=e,o=t[0],s=QHe(xr(t[1],"infix").size),i=t[2],a=s.number>0;return{type:"genfrac",mode:n.mode,numer:o,denom:i,continued:!1,hasBarLine:a,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:gM,mathmlBuilder:bM});var are=(e,t)=>{var n=t.style,r,o;e.type==="supsub"?(r=e.sup?Kr(e.sup,t.havingStyle(n.sup()),t):Kr(e.sub,t.havingStyle(n.sub()),t),o=xr(e.base,"horizBrace")):o=xr(e,"horizBrace");var s=Kr(o.base,t.havingBaseStyle($n.DISPLAY)),i=Xf.svgSpan(o,t),a;if(o.isOver?(a=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:i}]},t),a.children[0].children[0].children[1].classes.push("svg-align")):(a=We.makeVList({positionType:"bottom",positionData:s.depth+.1+i.height,children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:s}]},t),a.children[0].children[0].children[0].classes.push("svg-align")),r){var l=We.makeSpan(["mord",o.isOver?"mover":"munder"],[a],t);o.isOver?a=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},t):a=We.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return We.makeSpan(["mord",o.isOver?"mover":"munder"],[a],t)},_qe=(e,t)=>{var n=Xf.mathMLnode(e.label);return new Ct.MathNode(e.isOver?"mover":"munder",[Vo(e.base,t),n])};Qt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:t[0]}},htmlBuilder:are,mathmlBuilder:_qe});Qt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[1],o=xr(t[0],"url").url;return n.settings.isTrusted({command:"\\href",url:o})?{type:"href",mode:n.mode,href:o,body:ri(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var n=Di(e.body,t,!1);return We.makeAnchor(e.href,[],n,t)},mathmlBuilder:(e,t)=>{var n=D0(e.body,t);return n instanceof Wl||(n=new Wl("mrow",[n])),n.setAttribute("href",e.href),n}});Qt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=xr(t[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var o=[],s=0;s<r.length;s++){var i=r[s];i==="~"&&(i="\\textasciitilde"),o.push({type:"textord",mode:"text",text:i})}var a={type:"text",mode:n.mode,font:"\\texttt",body:o};return{type:"href",mode:n.mode,href:r,body:ri(a)}}});Qt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:n}=e;return{type:"hbox",mode:n.mode,body:ri(t[0])}},htmlBuilder(e,t){var n=Di(e.body,t,!1);return We.makeFragment(n)},mathmlBuilder(e,t){return new Ct.MathNode("mrow",El(e.body,t))}});Qt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r,token:o}=e,s=xr(t[0],"raw").string,i=t[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(r){case"\\htmlClass":l.class=s,a={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,a={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,a={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var c=s.split(","),u=0;u<c.length;u++){var f=c[u].split("=");if(f.length!==2)throw new It("Error parsing key-value for \\htmlData");l["data-"+f[0].trim()]=f[1].trim()}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(a)?{type:"html",mode:n.mode,attributes:l,body:ri(i)}:n.formatUnsupportedCmd(r)},htmlBuilder:(e,t)=>{var n=Di(e.body,t,!1),r=["enclosing"];e.attributes.class&&r.push(...e.attributes.class.trim().split(/\s+/));var o=We.makeSpan(r,n,t);for(var s in e.attributes)s!=="class"&&e.attributes.hasOwnProperty(s)&&o.setAttribute(s,e.attributes[s]);return o},mathmlBuilder:(e,t)=>D0(e.body,t)});Qt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"htmlmathml",mode:n.mode,html:ri(t[0]),mathml:ri(t[1])}},htmlBuilder:(e,t)=>{var n=Di(e.html,t,!1);return We.makeFragment(n)},mathmlBuilder:(e,t)=>D0(e.mathml,t)});var iA=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!n)throw new It("Invalid size: '"+t+"' in \\includegraphics");var r={number:+(n[1]+n[2]),unit:n[3]};if(!Cne(r))throw new It("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};Qt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,n)=>{var{parser:r}=e,o={number:0,unit:"em"},s={number:.9,unit:"em"},i={number:0,unit:"em"},a="";if(n[0])for(var l=xr(n[0],"raw").string,c=l.split(","),u=0;u<c.length;u++){var f=c[u].split("=");if(f.length===2){var m=f[1].trim();switch(f[0].trim()){case"alt":a=m;break;case"width":o=iA(m);break;case"height":s=iA(m);break;case"totalheight":i=iA(m);break;default:throw new It("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var g=xr(t[0],"url").url;return a===""&&(a=g,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:r.mode,alt:a,width:o,height:s,totalheight:i,src:g}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var n=Rs(e.height,t),r=0;e.totalheight.number>0&&(r=Rs(e.totalheight,t)-n);var o=0;e.width.number>0&&(o=Rs(e.width,t));var s={height:Ut(n+r)};o>0&&(s.width=Ut(o)),r>0&&(s.verticalAlign=Ut(-r));var i=new _Ve(e.src,e.alt,s);return i.height=n,i.depth=r,i},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mglyph",[]);n.setAttribute("alt",e.alt);var r=Rs(e.height,t),o=0;if(e.totalheight.number>0&&(o=Rs(e.totalheight,t)-r,n.setAttribute("valign",Ut(-o))),n.setAttribute("height",Ut(r+o)),e.width.number>0){var s=Rs(e.width,t);n.setAttribute("width",Ut(s))}return n.setAttribute("src",e.src),n}});Qt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,o=xr(t[0],"size");if(n.settings.strict){var s=r[1]==="m",i=o.value.unit==="mu";s?(i||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+o.value.unit+" units")),n.mode!=="math"&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):i&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:o.value}},htmlBuilder(e,t){return We.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var n=Rs(e.dimension,t);return new Ct.SpaceNode(n)}});Qt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,o=t[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:o}},htmlBuilder:(e,t)=>{var n;e.alignment==="clap"?(n=We.makeSpan([],[Kr(e.body,t)]),n=We.makeSpan(["inner"],[n],t)):n=We.makeSpan(["inner"],[Kr(e.body,t)]);var r=We.makeSpan(["fix"],[]),o=We.makeSpan([e.alignment],[n,r],t),s=We.makeSpan(["strut"]);return s.style.height=Ut(o.height+o.depth),o.depth&&(s.style.verticalAlign=Ut(-o.depth)),o.children.unshift(s),o=We.makeSpan(["thinbox"],[o],t),We.makeSpan(["mord","vbox"],[o],t)},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mpadded",[Vo(e.body,t)]);if(e.alignment!=="rlap"){var r=e.alignment==="llap"?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}});Qt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:n,parser:r}=e,o=r.mode;r.switchMode("math");var s=n==="\\("?"\\)":"$",i=r.parseExpression(!1,s);return r.expect(s),r.switchMode(o),{type:"styling",mode:r.mode,style:"text",body:i}}});Qt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new It("Mismatched "+e.funcName)}});var Fj=(e,t)=>{switch(t.style.size){case $n.DISPLAY.size:return e.display;case $n.TEXT.size:return e.text;case $n.SCRIPT.size:return e.script;case $n.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};Qt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"mathchoice",mode:n.mode,display:ri(t[0]),text:ri(t[1]),script:ri(t[2]),scriptscript:ri(t[3])}},htmlBuilder:(e,t)=>{var n=Fj(e,t),r=Di(n,t,!1);return We.makeFragment(r)},mathmlBuilder:(e,t)=>{var n=Fj(e,t);return D0(n,t)}});var lre=(e,t,n,r,o,s,i)=>{e=We.makeSpan([],[e]);var a=n&&so.isCharacterBox(n),l,c;if(t){var u=Kr(t,r.havingStyle(o.sup()),r);c={elem:u,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-u.depth)}}if(n){var f=Kr(n,r.havingStyle(o.sub()),r);l={elem:f,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-f.height)}}var m;if(c&&l){var g=r.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+e.depth+i;m=We.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Ut(-s)},{type:"kern",size:l.kern},{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Ut(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(l){var y=e.height-i;m=We.makeVList({positionType:"top",positionData:y,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Ut(-s)},{type:"kern",size:l.kern},{type:"elem",elem:e}]},r)}else if(c){var v=e.depth+i;m=We.makeVList({positionType:"bottom",positionData:v,children:[{type:"elem",elem:e},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Ut(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return e;var w=[m];if(l&&s!==0&&!a){var _=We.makeSpan(["mspace"],[],r);_.style.marginRight=Ut(s),w.unshift(_)}return We.makeSpan(["mop","op-limits"],w,r)},cre=["\\smallint"],Ob=(e,t)=>{var n,r,o=!1,s;e.type==="supsub"?(n=e.sup,r=e.sub,s=xr(e.base,"op"),o=!0):s=xr(e,"op");var i=t.style,a=!1;i.size===$n.DISPLAY.size&&s.symbol&&!cre.includes(s.name)&&(a=!0);var l;if(s.symbol){var c=a?"Size2-Regular":"Size1-Regular",u="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(u=s.name.slice(1),s.name=u==="oiint"?"\\iint":"\\iiint"),l=We.makeSymbol(s.name,c,"math",t,["mop","op-symbol",a?"large-op":"small-op"]),u.length>0){var f=l.italic,m=We.staticSvg(u+"Size"+(a?"2":"1"),t);l=We.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:m,shift:a?.08:0}]},t),s.name="\\"+u,l.classes.unshift("mop"),l.italic=f}}else if(s.body){var g=Di(s.body,t,!0);g.length===1&&g[0]instanceof Lc?(l=g[0],l.classes[0]="mop"):l=We.makeSpan(["mop"],g,t)}else{for(var y=[],v=1;v<s.name.length;v++)y.push(We.mathsym(s.name[v],s.mode,t));l=We.makeSpan(["mop"],y,t)}var w=0,_=0;return(l instanceof Lc||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(w=(l.height-l.depth)/2-t.fontMetrics().axisHeight,_=l.italic),o?lre(l,n,r,t,i,_,w):(w&&(l.style.position="relative",l.style.top=Ut(w)),l)},zw=(e,t)=>{var n;if(e.symbol)n=new Wl("mo",[$c(e.name,e.mode)]),cre.includes(e.name)&&n.setAttribute("largeop","false");else if(e.body)n=new Wl("mo",El(e.body,t));else{n=new Wl("mi",[new yd(e.name.slice(1))]);var r=new Wl("mo",[$c("","text")]);e.parentIsSupSub?n=new Wl("mrow",[n,r]):n=$ne([n,r])}return n},Sqe={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Qt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:n,funcName:r}=e,o=r;return o.length===1&&(o=Sqe[o]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:o}},htmlBuilder:Ob,mathmlBuilder:zw});Qt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ri(r)}},htmlBuilder:Ob,mathmlBuilder:zw});var Tqe={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Qt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:Ob,mathmlBuilder:zw});Qt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:Ob,mathmlBuilder:zw});Qt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e,r=n;return r.length===1&&(r=Tqe[r]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:Ob,mathmlBuilder:zw});var ure=(e,t)=>{var n,r,o=!1,s;e.type==="supsub"?(n=e.sup,r=e.sub,s=xr(e.base,"operatorname"),o=!0):s=xr(e,"operatorname");var i;if(s.body.length>0){for(var a=s.body.map(f=>{var m=f.text;return typeof m=="string"?{type:"textord",mode:f.mode,text:m}:f}),l=Di(a,t.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof Lc&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=We.makeSpan(["mop"],l,t)}else i=We.makeSpan(["mop"],[],t);return o?lre(i,n,r,t,t.style,0,0):i},Cqe=(e,t)=>{for(var n=El(e.body,t.withFont("mathrm")),r=!0,o=0;o<n.length;o++){var s=n[o];if(!(s instanceof Ct.SpaceNode))if(s instanceof Ct.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var i=s.children[0];s.children.length===1&&i instanceof Ct.TextNode?i.text=i.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var a=n.map(u=>u.toText()).join("");n=[new Ct.TextNode(a)]}var l=new Ct.MathNode("mi",n);l.setAttribute("mathvariant","normal");var c=new Ct.MathNode("mo",[$c("","text")]);return e.parentIsSupSub?new Ct.MathNode("mrow",[l,c]):Ct.newDocumentFragment([l,c])};Qt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,o=t[0];return{type:"operatorname",mode:n.mode,body:ri(o),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:ure,mathmlBuilder:Cqe});le("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Bm({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?We.makeFragment(Di(e.body,t,!1)):We.makeSpan(["mord"],Di(e.body,t,!0),t)},mathmlBuilder(e,t){return D0(e.body,t,!0)}});Qt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:n}=e,r=t[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(e,t){var n=Kr(e.body,t.havingCrampedStyle()),r=We.makeLineSpan("overline-line",t),o=t.fontMetrics().defaultRuleThickness,s=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*o},{type:"elem",elem:r},{type:"kern",size:o}]},t);return We.makeSpan(["mord","overline"],[s],t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[new Ct.TextNode("")]);n.setAttribute("stretchy","true");var r=new Ct.MathNode("mover",[Vo(e.body,t),n]);return r.setAttribute("accent","true"),r}});Qt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"phantom",mode:n.mode,body:ri(r)}},htmlBuilder:(e,t)=>{var n=Di(e.body,t.withPhantom(),!1);return We.makeFragment(n)},mathmlBuilder:(e,t)=>{var n=El(e.body,t);return new Ct.MathNode("mphantom",n)}});Qt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=We.makeSpan([],[Kr(e.body,t.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t),We.makeSpan(["mord"],[n],t)},mathmlBuilder:(e,t)=>{var n=El(ri(e.body),t),r=new Ct.MathNode("mphantom",n),o=new Ct.MathNode("mpadded",[r]);return o.setAttribute("height","0px"),o.setAttribute("depth","0px"),o}});Qt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=We.makeSpan(["inner"],[Kr(e.body,t.withPhantom())]),r=We.makeSpan(["fix"],[]);return We.makeSpan(["mord","rlap"],[n,r],t)},mathmlBuilder:(e,t)=>{var n=El(ri(e.body),t),r=new Ct.MathNode("mphantom",n),o=new Ct.MathNode("mpadded",[r]);return o.setAttribute("width","0px"),o}});Qt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e,r=xr(t[0],"size").value,o=t[1];return{type:"raisebox",mode:n.mode,dy:r,body:o}},htmlBuilder(e,t){var n=Kr(e.body,t),r=Rs(e.dy,t);return We.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mpadded",[Vo(e.body,t)]),r=e.dy.number+e.dy.unit;return n.setAttribute("voffset",r),n}});Qt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});Qt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,n){var{parser:r}=e,o=n[0],s=xr(t[0],"size"),i=xr(t[1],"size");return{type:"rule",mode:r.mode,shift:o&&xr(o,"size").value,width:s.value,height:i.value}},htmlBuilder(e,t){var n=We.makeSpan(["mord","rule"],[],t),r=Rs(e.width,t),o=Rs(e.height,t),s=e.shift?Rs(e.shift,t):0;return n.style.borderRightWidth=Ut(r),n.style.borderTopWidth=Ut(o),n.style.bottom=Ut(s),n.width=r,n.height=o+s,n.depth=-s,n.maxFontSize=o*1.125*t.sizeMultiplier,n},mathmlBuilder(e,t){var n=Rs(e.width,t),r=Rs(e.height,t),o=e.shift?Rs(e.shift,t):0,s=t.color&&t.getColor()||"black",i=new Ct.MathNode("mspace");i.setAttribute("mathbackground",s),i.setAttribute("width",Ut(n)),i.setAttribute("height",Ut(r));var a=new Ct.MathNode("mpadded",[i]);return o>=0?a.setAttribute("height",Ut(o)):(a.setAttribute("height",Ut(o)),a.setAttribute("depth",Ut(-o))),a.setAttribute("voffset",Ut(o)),a}});function dre(e,t,n){for(var r=Di(e,t,!1),o=t.sizeMultiplier/n.sizeMultiplier,s=0;s<r.length;s++){var i=r[s].classes.indexOf("sizing");i<0?Array.prototype.push.apply(r[s].classes,t.sizingClasses(n)):r[s].classes[i+1]==="reset-size"+t.size&&(r[s].classes[i+1]="reset-size"+n.size),r[s].height*=o,r[s].depth*=o}return We.makeFragment(r)}var Bj=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],kqe=(e,t)=>{var n=t.havingSize(e.size);return dre(e.body,n,t)};Qt({type:"sizing",names:Bj,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:n,funcName:r,parser:o}=e,s=o.parseExpression(!1,n);return{type:"sizing",mode:o.mode,size:Bj.indexOf(r)+1,body:s}},htmlBuilder:kqe,mathmlBuilder:(e,t)=>{var n=t.havingSize(e.size),r=El(e.body,n),o=new Ct.MathNode("mstyle",r);return o.setAttribute("mathsize",Ut(n.sizeMultiplier)),o}});Qt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,n)=>{var{parser:r}=e,o=!1,s=!1,i=n[0]&&xr(n[0],"ordgroup");if(i)for(var a="",l=0;l<i.body.length;++l){var c=i.body[l];if(a=c.text,a==="t")o=!0;else if(a==="b")s=!0;else{o=!1,s=!1;break}}else o=!0,s=!0;var u=t[0];return{type:"smash",mode:r.mode,body:u,smashHeight:o,smashDepth:s}},htmlBuilder:(e,t)=>{var n=We.makeSpan([],[Kr(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return n;if(e.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(e.smashDepth&&(n.depth=0,n.children))for(var o=0;o<n.children.length;o++)n.children[o].depth=0;var s=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t);return We.makeSpan(["mord"],[s],t)},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mpadded",[Vo(e.body,t)]);return e.smashHeight&&n.setAttribute("height","0px"),e.smashDepth&&n.setAttribute("depth","0px"),n}});Qt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r}=e,o=n[0],s=t[0];return{type:"sqrt",mode:r.mode,body:s,index:o}},htmlBuilder(e,t){var n=Kr(e.body,t.havingCrampedStyle());n.height===0&&(n.height=t.fontMetrics().xHeight),n=We.wrapFragment(n,t);var r=t.fontMetrics(),o=r.defaultRuleThickness,s=o;t.style.id<$n.TEXT.id&&(s=t.fontMetrics().xHeight);var i=o+s/4,a=n.height+n.depth+i+o,{span:l,ruleWidth:c,advanceWidth:u}=Hf.sqrtImage(a,t),f=l.height-c;f>n.height+n.depth+i&&(i=(i+f-n.height-n.depth)/2);var m=l.height-n.height-i-c;n.style.paddingLeft=Ut(u);var g=We.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+m)},{type:"elem",elem:l},{type:"kern",size:c}]},t);if(e.index){var y=t.havingStyle($n.SCRIPTSCRIPT),v=Kr(e.index,y,t),w=.6*(g.height-g.depth),_=We.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:v}]},t),T=We.makeSpan(["root"],[_]);return We.makeSpan(["mord","sqrt"],[T,g],t)}else return We.makeSpan(["mord","sqrt"],[g],t)},mathmlBuilder(e,t){var{body:n,index:r}=e;return r?new Ct.MathNode("mroot",[Vo(n,t),Vo(r,t)]):new Ct.MathNode("msqrt",[Vo(n,t)])}});var zj={display:$n.DISPLAY,text:$n.TEXT,script:$n.SCRIPT,scriptscript:$n.SCRIPTSCRIPT};Qt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:n,funcName:r,parser:o}=e,s=o.parseExpression(!0,n),i=r.slice(1,r.length-5);return{type:"styling",mode:o.mode,style:i,body:s}},htmlBuilder(e,t){var n=zj[e.style],r=t.havingStyle(n).withFont("");return dre(e.body,r,t)},mathmlBuilder(e,t){var n=zj[e.style],r=t.havingStyle(n),o=El(e.body,r),s=new Ct.MathNode("mstyle",o),i={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=i[e.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});var Aqe=function(t,n){var r=t.base;if(r)if(r.type==="op"){var o=r.limits&&(n.style.size===$n.DISPLAY.size||r.alwaysHandleSupSub);return o?Ob:null}else if(r.type==="operatorname"){var s=r.alwaysHandleSupSub&&(n.style.size===$n.DISPLAY.size||r.limits);return s?ure:null}else{if(r.type==="accent")return so.isCharacterBox(r.base)?uM:null;if(r.type==="horizBrace"){var i=!t.sub;return i===r.isOver?are:null}else return null}else return null};Bm({type:"supsub",htmlBuilder(e,t){var n=Aqe(e,t);if(n)return n(e,t);var{base:r,sup:o,sub:s}=e,i=Kr(r,t),a,l,c=t.fontMetrics(),u=0,f=0,m=r&&so.isCharacterBox(r);if(o){var g=t.havingStyle(t.style.sup());a=Kr(o,g,t),m||(u=i.height-g.fontMetrics().supDrop*g.sizeMultiplier/t.sizeMultiplier)}if(s){var y=t.havingStyle(t.style.sub());l=Kr(s,y,t),m||(f=i.depth+y.fontMetrics().subDrop*y.sizeMultiplier/t.sizeMultiplier)}var v;t.style===$n.DISPLAY?v=c.sup1:t.style.cramped?v=c.sup3:v=c.sup2;var w=t.sizeMultiplier,_=Ut(.5/c.ptPerEm/w),T=null;if(l){var k=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(i instanceof Lc||k)&&(T=Ut(-i.italic))}var M;if(a&&l){u=Math.max(u,v,a.depth+.25*c.xHeight),f=Math.max(f,c.sub2);var D=c.defaultRuleThickness,I=4*D;if(u-a.depth-(l.height-f)<I){f=I-(u-a.depth)+l.height;var P=.8*c.xHeight-(u-a.depth);P>0&&(u+=P,f-=P)}var B=[{type:"elem",elem:l,shift:f,marginRight:_,marginLeft:T},{type:"elem",elem:a,shift:-u,marginRight:_}];M=We.makeVList({positionType:"individualShift",children:B},t)}else if(l){f=Math.max(f,c.sub1,l.height-.8*c.xHeight);var U=[{type:"elem",elem:l,marginLeft:T,marginRight:_}];M=We.makeVList({positionType:"shift",positionData:f,children:U},t)}else if(a)u=Math.max(u,v,a.depth+.25*c.xHeight),M=We.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:a,marginRight:_}]},t);else throw new Error("supsub must have either sup or sub.");var j=fI(i,"right")||"mord";return We.makeSpan([j],[i,We.makeSpan(["msupsub"],[M])],t)},mathmlBuilder(e,t){var n=!1,r,o;e.base&&e.base.type==="horizBrace"&&(o=!!e.sup,o===e.base.isOver&&(n=!0,r=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var s=[Vo(e.base,t)];e.sub&&s.push(Vo(e.sub,t)),e.sup&&s.push(Vo(e.sup,t));var i;if(n)i=r?"mover":"munder";else if(e.sub)if(e.sup){var c=e.base;c&&c.type==="op"&&c.limits&&t.style===$n.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(t.style===$n.DISPLAY||c.limits)?i="munderover":i="msubsup"}else{var l=e.base;l&&l.type==="op"&&l.limits&&(t.style===$n.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||t.style===$n.DISPLAY)?i="munder":i="msub"}else{var a=e.base;a&&a.type==="op"&&a.limits&&(t.style===$n.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||t.style===$n.DISPLAY)?i="mover":i="msup"}return new Ct.MathNode(i,s)}});Bm({type:"atom",htmlBuilder(e,t){return We.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[$c(e.text,e.mode)]);if(e.family==="bin"){var r=lM(e,t);r==="bold-italic"&&n.setAttribute("mathvariant",r)}else e.family==="punct"?n.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&n.setAttribute("stretchy","false");return n}});var fre={mi:"italic",mn:"normal",mtext:"normal"};Bm({type:"mathord",htmlBuilder(e,t){return We.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var n=new Ct.MathNode("mi",[$c(e.text,e.mode,t)]),r=lM(e,t)||"italic";return r!==fre[n.type]&&n.setAttribute("mathvariant",r),n}});Bm({type:"textord",htmlBuilder(e,t){return We.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var n=$c(e.text,e.mode,t),r=lM(e,t)||"normal",o;return e.mode==="text"?o=new Ct.MathNode("mtext",[n]):/[0-9]/.test(e.text)?o=new Ct.MathNode("mn",[n]):e.text==="\\prime"?o=new Ct.MathNode("mo",[n]):o=new Ct.MathNode("mi",[n]),r!==fre[o.type]&&o.setAttribute("mathvariant",r),o}});var aA={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},lA={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Bm({type:"spacing",htmlBuilder(e,t){if(lA.hasOwnProperty(e.text)){var n=lA[e.text].className||"";if(e.mode==="text"){var r=We.makeOrd(e,t,"textord");return r.classes.push(n),r}else return We.makeSpan(["mspace",n],[We.mathsym(e.text,e.mode,t)],t)}else{if(aA.hasOwnProperty(e.text))return We.makeSpan(["mspace",aA[e.text]],[],t);throw new It('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var n;if(lA.hasOwnProperty(e.text))n=new Ct.MathNode("mtext",[new Ct.TextNode("")]);else{if(aA.hasOwnProperty(e.text))return new Ct.MathNode("mspace");throw new It('Unknown type of space "'+e.text+'"')}return n}});var jj=()=>{var e=new Ct.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};Bm({type:"tag",mathmlBuilder(e,t){var n=new Ct.MathNode("mtable",[new Ct.MathNode("mtr",[jj(),new Ct.MathNode("mtd",[D0(e.body,t)]),jj(),new Ct.MathNode("mtd",[D0(e.tag,t)])])]);return n.setAttribute("width","100%"),n}});var Uj={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Hj={"\\textbf":"textbf","\\textmd":"textmd"},Nqe={"\\textit":"textit","\\textup":"textup"},Vj=(e,t)=>{var n=e.font;if(n){if(Uj[n])return t.withTextFontFamily(Uj[n]);if(Hj[n])return t.withTextFontWeight(Hj[n]);if(n==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(Nqe[n])};Qt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,o=t[0];return{type:"text",mode:n.mode,body:ri(o),font:r}},htmlBuilder(e,t){var n=Vj(e,t),r=Di(e.body,n,!0);return We.makeSpan(["mord","text"],r,n)},mathmlBuilder(e,t){var n=Vj(e,t);return D0(e.body,n)}});Qt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"underline",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=Kr(e.body,t),r=We.makeLineSpan("underline-line",t),o=t.fontMetrics().defaultRuleThickness,s=We.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:o},{type:"elem",elem:r},{type:"kern",size:3*o},{type:"elem",elem:n}]},t);return We.makeSpan(["mord","underline"],[s],t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[new Ct.TextNode("")]);n.setAttribute("stretchy","true");var r=new Ct.MathNode("munder",[Vo(e.body,t),n]);return r.setAttribute("accentunder","true"),r}});Qt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"vcenter",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=Kr(e.body,t),r=t.fontMetrics().axisHeight,o=.5*(n.height-r-(n.depth+r));return We.makeVList({positionType:"shift",positionData:o,children:[{type:"elem",elem:n}]},t)},mathmlBuilder(e,t){return new Ct.MathNode("mpadded",[Vo(e.body,t)],["vcenter"])}});Qt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,n){throw new It("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var n=qj(e),r=[],o=t.havingStyle(t.style.text()),s=0;s<n.length;s++){var i=n[s];i==="~"&&(i="\\textasciitilde"),r.push(We.makeSymbol(i,"Typewriter-Regular",e.mode,o,["mord","texttt"]))}return We.makeSpan(["mord","text"].concat(o.sizingClasses(t)),We.tryCombineChars(r),o)},mathmlBuilder(e,t){var n=new Ct.TextNode(qj(e)),r=new Ct.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var qj=e=>e.body.replace(/ /g,e.star?"":""),d0=Pne,hre=`[ \r
	]`,Iqe="\\\\[a-zA-Z@]+",Rqe="\\\\[^\uD800-\uDFFF]",Mqe="("+Iqe+")"+hre+"*",Dqe=`\\\\(
|[ \r	]+
?)[ \r	]*`,gI="[-]",Oqe=new RegExp(gI+"+$"),Pqe="("+hre+"+)|"+(Dqe+"|")+"([!-\\[\\]---]"+(gI+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(gI+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Mqe)+("|"+Rqe+")");class Gj{constructor(t,n){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=n,this.tokenRegex=new RegExp(Pqe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,n){this.catcodes[t]=n}lex(){var t=this.input,n=this.tokenRegex.lastIndex;if(n===t.length)return new Zl("EOF",new fl(this,n,n));var r=this.tokenRegex.exec(t);if(r===null||r.index!==n)throw new It("Unexpected character: '"+t[n]+"'",new Zl(t[n],new fl(this,n,n+1)));var o=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[o]===14){var s=t.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new Zl(o,new fl(this,n,this.tokenRegex.lastIndex))}}class Lqe{constructor(t,n){t===void 0&&(t={}),n===void 0&&(n={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=n,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new It("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var n in t)t.hasOwnProperty(n)&&(t[n]==null?delete this.current[n]:this.current[n]=t[n])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,n,r){if(r===void 0&&(r=!1),r){for(var o=0;o<this.undefStack.length;o++)delete this.undefStack[o][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=n)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(t)&&(s[t]=this.current[t])}n==null?delete this.current[t]:this.current[t]=n}}var $qe=nre;le("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});le("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});le("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});le("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});le("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var n=e.future();return t[0].length===1&&t[0][0].text===n.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});le("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");le("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var Wj={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};le("\\char",function(e){var t=e.popToken(),n,r="";if(t.text==="'")n=8,t=e.popToken();else if(t.text==='"')n=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")r=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new It("\\char` missing argument");r=t.text.charCodeAt(0)}else n=10;if(n){if(r=Wj[t.text],r==null||r>=n)throw new It("Invalid base-"+n+" digit "+t.text);for(var o;(o=Wj[e.future().text])!=null&&o<n;)r*=n,r+=o,e.popToken()}return"\\@char{"+r+"}"});var yM=(e,t,n,r)=>{var o=e.consumeArg().tokens;if(o.length!==1)throw new It("\\newcommand's first argument must be a macro name");var s=o[0].text,i=e.isDefined(s);if(i&&!t)throw new It("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!i&&!n)throw new It("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var a=0;if(o=e.consumeArg().tokens,o.length===1&&o[0].text==="["){for(var l="",c=e.expandNextToken();c.text!=="]"&&c.text!=="EOF";)l+=c.text,c=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new It("Invalid number of arguments: "+l);a=parseInt(l),o=e.consumeArg().tokens}return i&&r||e.macros.set(s,{tokens:o,numArgs:a}),""};le("\\newcommand",e=>yM(e,!1,!0,!1));le("\\renewcommand",e=>yM(e,!0,!1,!1));le("\\providecommand",e=>yM(e,!0,!0,!0));le("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(n=>n.text).join("")),""});le("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(n=>n.text).join("")),""});le("\\show",e=>{var t=e.popToken(),n=t.text;return console.log(t,e.macros.get(n),d0[n],es.math[n],es.text[n]),""});le("\\bgroup","{");le("\\egroup","}");le("~","\\nobreakspace");le("\\lq","`");le("\\rq","'");le("\\aa","\\r a");le("\\AA","\\r A");le("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");le("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");le("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");le("","\\mathscr{B}");le("","\\mathscr{E}");le("","\\mathscr{F}");le("","\\mathscr{H}");le("","\\mathscr{I}");le("","\\mathscr{L}");le("","\\mathscr{M}");le("","\\mathscr{R}");le("","\\mathfrak{C}");le("","\\mathfrak{H}");le("","\\mathfrak{Z}");le("\\Bbbk","\\Bbb{k}");le("","\\cdotp");le("\\llap","\\mathllap{\\textrm{#1}}");le("\\rlap","\\mathrlap{\\textrm{#1}}");le("\\clap","\\mathclap{\\textrm{#1}}");le("\\mathstrut","\\vphantom{(}");le("\\underbar","\\underline{\\text{#1}}");le("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');le("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");le("\\ne","\\neq");le("","\\neq");le("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");le("","\\notin");le("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");le("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");le("","\\perp");le("","\\mathclose{!\\mkern-0.8mu!}");le("","\\notni");le("","\\ulcorner");le("","\\urcorner");le("","\\llcorner");le("","\\lrcorner");le("","\\copyright");le("","\\textregistered");le("","\\textregistered");le("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');le("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');le("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');le("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');le("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");le("","\\vdots");le("\\varGamma","\\mathit{\\Gamma}");le("\\varDelta","\\mathit{\\Delta}");le("\\varTheta","\\mathit{\\Theta}");le("\\varLambda","\\mathit{\\Lambda}");le("\\varXi","\\mathit{\\Xi}");le("\\varPi","\\mathit{\\Pi}");le("\\varSigma","\\mathit{\\Sigma}");le("\\varUpsilon","\\mathit{\\Upsilon}");le("\\varPhi","\\mathit{\\Phi}");le("\\varPsi","\\mathit{\\Psi}");le("\\varOmega","\\mathit{\\Omega}");le("\\substack","\\begin{subarray}{c}#1\\end{subarray}");le("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");le("\\boxed","\\fbox{$\\displaystyle{#1}$}");le("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");le("\\implies","\\DOTSB\\;\\Longrightarrow\\;");le("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");le("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");le("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var Yj={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};le("\\dots",function(e){var t="\\dotso",n=e.expandAfterFuture().text;return n in Yj?t=Yj[n]:(n.slice(0,4)==="\\not"||n in es.math&&["bin","rel"].includes(es.math[n].group))&&(t="\\dotsb"),t});var vM={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};le("\\dotso",function(e){var t=e.future().text;return t in vM?"\\ldots\\,":"\\ldots"});le("\\dotsc",function(e){var t=e.future().text;return t in vM&&t!==","?"\\ldots\\,":"\\ldots"});le("\\cdots",function(e){var t=e.future().text;return t in vM?"\\@cdots\\,":"\\@cdots"});le("\\dotsb","\\cdots");le("\\dotsm","\\cdots");le("\\dotsi","\\!\\cdots");le("\\dotsx","\\ldots\\,");le("\\DOTSI","\\relax");le("\\DOTSB","\\relax");le("\\DOTSX","\\relax");le("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");le("\\,","\\tmspace+{3mu}{.1667em}");le("\\thinspace","\\,");le("\\>","\\mskip{4mu}");le("\\:","\\tmspace+{4mu}{.2222em}");le("\\medspace","\\:");le("\\;","\\tmspace+{5mu}{.2777em}");le("\\thickspace","\\;");le("\\!","\\tmspace-{3mu}{.1667em}");le("\\negthinspace","\\!");le("\\negmedspace","\\tmspace-{4mu}{.2222em}");le("\\negthickspace","\\tmspace-{5mu}{.277em}");le("\\enspace","\\kern.5em ");le("\\enskip","\\hskip.5em\\relax");le("\\quad","\\hskip1em\\relax");le("\\qquad","\\hskip2em\\relax");le("\\tag","\\@ifstar\\tag@literal\\tag@paren");le("\\tag@paren","\\tag@literal{({#1})}");le("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new It("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});le("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");le("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");le("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");le("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");le("\\newline","\\\\\\relax");le("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var pre=Ut(bd["Main-Regular"][84][1]-.7*bd["Main-Regular"][65][1]);le("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+pre+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");le("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+pre+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");le("\\hspace","\\@ifstar\\@hspacer\\@hspace");le("\\@hspace","\\hskip #1\\relax");le("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");le("\\ordinarycolon",":");le("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");le("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');le("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');le("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');le("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');le("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');le("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');le("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');le("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');le("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');le("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');le("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');le("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');le("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');le("","\\dblcolon");le("","\\eqcolon");le("","\\coloneqq");le("","\\eqqcolon");le("","\\Coloneqq");le("\\ratio","\\vcentcolon");le("\\coloncolon","\\dblcolon");le("\\colonequals","\\coloneqq");le("\\coloncolonequals","\\Coloneqq");le("\\equalscolon","\\eqqcolon");le("\\equalscoloncolon","\\Eqqcolon");le("\\colonminus","\\coloneq");le("\\coloncolonminus","\\Coloneq");le("\\minuscolon","\\eqcolon");le("\\minuscoloncolon","\\Eqcolon");le("\\coloncolonapprox","\\Colonapprox");le("\\coloncolonsim","\\Colonsim");le("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");le("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");le("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");le("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");le("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");le("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");le("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");le("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");le("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");le("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");le("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");le("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");le("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");le("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");le("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");le("\\ngeqq","\\html@mathml{\\@ngeqq}{}");le("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");le("\\nleqq","\\html@mathml{\\@nleqq}{}");le("\\nleqslant","\\html@mathml{\\@nleqslant}{}");le("\\nshortmid","\\html@mathml{\\@nshortmid}{}");le("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");le("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");le("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");le("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");le("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");le("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");le("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");le("\\imath","\\html@mathml{\\@imath}{}");le("\\jmath","\\html@mathml{\\@jmath}{}");le("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");le("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");le("","\\llbracket");le("","\\rrbracket");le("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");le("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");le("","\\lBrace");le("","\\rBrace");le("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");le("","\\minuso");le("\\darr","\\downarrow");le("\\dArr","\\Downarrow");le("\\Darr","\\Downarrow");le("\\lang","\\langle");le("\\rang","\\rangle");le("\\uarr","\\uparrow");le("\\uArr","\\Uparrow");le("\\Uarr","\\Uparrow");le("\\N","\\mathbb{N}");le("\\R","\\mathbb{R}");le("\\Z","\\mathbb{Z}");le("\\alef","\\aleph");le("\\alefsym","\\aleph");le("\\Alpha","\\mathrm{A}");le("\\Beta","\\mathrm{B}");le("\\bull","\\bullet");le("\\Chi","\\mathrm{X}");le("\\clubs","\\clubsuit");le("\\cnums","\\mathbb{C}");le("\\Complex","\\mathbb{C}");le("\\Dagger","\\ddagger");le("\\diamonds","\\diamondsuit");le("\\empty","\\emptyset");le("\\Epsilon","\\mathrm{E}");le("\\Eta","\\mathrm{H}");le("\\exist","\\exists");le("\\harr","\\leftrightarrow");le("\\hArr","\\Leftrightarrow");le("\\Harr","\\Leftrightarrow");le("\\hearts","\\heartsuit");le("\\image","\\Im");le("\\infin","\\infty");le("\\Iota","\\mathrm{I}");le("\\isin","\\in");le("\\Kappa","\\mathrm{K}");le("\\larr","\\leftarrow");le("\\lArr","\\Leftarrow");le("\\Larr","\\Leftarrow");le("\\lrarr","\\leftrightarrow");le("\\lrArr","\\Leftrightarrow");le("\\Lrarr","\\Leftrightarrow");le("\\Mu","\\mathrm{M}");le("\\natnums","\\mathbb{N}");le("\\Nu","\\mathrm{N}");le("\\Omicron","\\mathrm{O}");le("\\plusmn","\\pm");le("\\rarr","\\rightarrow");le("\\rArr","\\Rightarrow");le("\\Rarr","\\Rightarrow");le("\\real","\\Re");le("\\reals","\\mathbb{R}");le("\\Reals","\\mathbb{R}");le("\\Rho","\\mathrm{P}");le("\\sdot","\\cdot");le("\\sect","\\S");le("\\spades","\\spadesuit");le("\\sub","\\subset");le("\\sube","\\subseteq");le("\\supe","\\supseteq");le("\\Tau","\\mathrm{T}");le("\\thetasym","\\vartheta");le("\\weierp","\\wp");le("\\Zeta","\\mathrm{Z}");le("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");le("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");le("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");le("\\bra","\\mathinner{\\langle{#1}|}");le("\\ket","\\mathinner{|{#1}\\rangle}");le("\\braket","\\mathinner{\\langle{#1}\\rangle}");le("\\Bra","\\left\\langle#1\\right|");le("\\Ket","\\left|#1\\right\\rangle");var mre=e=>t=>{var n=t.consumeArg().tokens,r=t.consumeArg().tokens,o=t.consumeArg().tokens,s=t.consumeArg().tokens,i=t.macros.get("|"),a=t.macros.get("\\|");t.macros.beginGroup();var l=f=>m=>{e&&(m.macros.set("|",i),o.length&&m.macros.set("\\|",a));var g=f;if(!f&&o.length){var y=m.future();y.text==="|"&&(m.popToken(),g=!0)}return{tokens:g?o:r,numArgs:0}};t.macros.set("|",l(!1)),o.length&&t.macros.set("\\|",l(!0));var c=t.consumeArg().tokens,u=t.expandTokens([...s,...c,...n]);return t.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};le("\\bra@ket",mre(!1));le("\\bra@set",mre(!0));le("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");le("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");le("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");le("\\angln","{\\angl n}");le("\\blue","\\textcolor{##6495ed}{#1}");le("\\orange","\\textcolor{##ffa500}{#1}");le("\\pink","\\textcolor{##ff00af}{#1}");le("\\red","\\textcolor{##df0030}{#1}");le("\\green","\\textcolor{##28ae7b}{#1}");le("\\gray","\\textcolor{gray}{#1}");le("\\purple","\\textcolor{##9d38bd}{#1}");le("\\blueA","\\textcolor{##ccfaff}{#1}");le("\\blueB","\\textcolor{##80f6ff}{#1}");le("\\blueC","\\textcolor{##63d9ea}{#1}");le("\\blueD","\\textcolor{##11accd}{#1}");le("\\blueE","\\textcolor{##0c7f99}{#1}");le("\\tealA","\\textcolor{##94fff5}{#1}");le("\\tealB","\\textcolor{##26edd5}{#1}");le("\\tealC","\\textcolor{##01d1c1}{#1}");le("\\tealD","\\textcolor{##01a995}{#1}");le("\\tealE","\\textcolor{##208170}{#1}");le("\\greenA","\\textcolor{##b6ffb0}{#1}");le("\\greenB","\\textcolor{##8af281}{#1}");le("\\greenC","\\textcolor{##74cf70}{#1}");le("\\greenD","\\textcolor{##1fab54}{#1}");le("\\greenE","\\textcolor{##0d923f}{#1}");le("\\goldA","\\textcolor{##ffd0a9}{#1}");le("\\goldB","\\textcolor{##ffbb71}{#1}");le("\\goldC","\\textcolor{##ff9c39}{#1}");le("\\goldD","\\textcolor{##e07d10}{#1}");le("\\goldE","\\textcolor{##a75a05}{#1}");le("\\redA","\\textcolor{##fca9a9}{#1}");le("\\redB","\\textcolor{##ff8482}{#1}");le("\\redC","\\textcolor{##f9685d}{#1}");le("\\redD","\\textcolor{##e84d39}{#1}");le("\\redE","\\textcolor{##bc2612}{#1}");le("\\maroonA","\\textcolor{##ffbde0}{#1}");le("\\maroonB","\\textcolor{##ff92c6}{#1}");le("\\maroonC","\\textcolor{##ed5fa6}{#1}");le("\\maroonD","\\textcolor{##ca337c}{#1}");le("\\maroonE","\\textcolor{##9e034e}{#1}");le("\\purpleA","\\textcolor{##ddd7ff}{#1}");le("\\purpleB","\\textcolor{##c6b9fc}{#1}");le("\\purpleC","\\textcolor{##aa87ff}{#1}");le("\\purpleD","\\textcolor{##7854ab}{#1}");le("\\purpleE","\\textcolor{##543b78}{#1}");le("\\mintA","\\textcolor{##f5f9e8}{#1}");le("\\mintB","\\textcolor{##edf2df}{#1}");le("\\mintC","\\textcolor{##e0e5cc}{#1}");le("\\grayA","\\textcolor{##f6f7f7}{#1}");le("\\grayB","\\textcolor{##f0f1f2}{#1}");le("\\grayC","\\textcolor{##e3e5e6}{#1}");le("\\grayD","\\textcolor{##d6d8da}{#1}");le("\\grayE","\\textcolor{##babec2}{#1}");le("\\grayF","\\textcolor{##888d93}{#1}");le("\\grayG","\\textcolor{##626569}{#1}");le("\\grayH","\\textcolor{##3b3e40}{#1}");le("\\grayI","\\textcolor{##21242c}{#1}");le("\\kaBlue","\\textcolor{##314453}{#1}");le("\\kaGreen","\\textcolor{##71B307}{#1}");var gre={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Fqe{constructor(t,n,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=n,this.expansionCount=0,this.feed(t),this.macros=new Lqe($qe,n.macros),this.mode=r,this.stack=[]}feed(t){this.lexer=new Gj(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var n,r,o;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;n=this.popToken(),{tokens:o,end:r}=this.consumeArg(["]"])}else({tokens:o,start:n,end:r}=this.consumeArg());return this.pushToken(new Zl("EOF",r.loc)),this.pushTokens(o),new Zl("",fl.range(n,r))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var n=[],r=t&&t.length>0;r||this.consumeSpaces();var o=this.future(),s,i=0,a=0;do{if(s=this.popToken(),n.push(s),s.text==="{")++i;else if(s.text==="}"){if(--i,i===-1)throw new It("Extra }",s)}else if(s.text==="EOF")throw new It("Unexpected end of input in a macro argument, expected '"+(t&&r?t[a]:"}")+"'",s);if(t&&r)if((i===0||i===1&&t[a]==="{")&&s.text===t[a]){if(++a,a===t.length){n.splice(-a,a);break}}else a=0}while(i!==0||r);return o.text==="{"&&n[n.length-1].text==="}"&&(n.pop(),n.shift()),n.reverse(),{tokens:n,start:o,end:s}}consumeArgs(t,n){if(n){if(n.length!==t+1)throw new It("The length of delimiters doesn't match the number of args!");for(var r=n[0],o=0;o<r.length;o++){var s=this.popToken();if(r[o]!==s.text)throw new It("Use of the macro doesn't match its definition",s)}}for(var i=[],a=0;a<t;a++)i.push(this.consumeArg(n&&n[a+1]).tokens);return i}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new It("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var n=this.popToken(),r=n.text,o=n.noexpand?null:this._getExpansion(r);if(o==null||t&&o.unexpandable){if(t&&o==null&&r[0]==="\\"&&!this.isDefined(r))throw new It("Undefined control sequence: "+r);return this.pushToken(n),!1}this.countExpansion(1);var s=o.tokens,i=this.consumeArgs(o.numArgs,o.delimiters);if(o.numArgs){s=s.slice();for(var a=s.length-1;a>=0;--a){var l=s[a];if(l.text==="#"){if(a===0)throw new It("Incomplete placeholder at end of macro body",l);if(l=s[--a],l.text==="#")s.splice(a+1,1);else if(/^[1-9]$/.test(l.text))s.splice(a,2,...i[+l.text-1]);else throw new It("Not a valid argument number",l)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Zl(t)]):void 0}expandTokens(t){var n=[],r=this.stack.length;for(this.pushTokens(t);this.stack.length>r;)if(this.expandOnce(!0)===!1){var o=this.stack.pop();o.treatAsRelax&&(o.noexpand=!1,o.treatAsRelax=!1),n.push(o)}return this.countExpansion(n.length),n}expandMacroAsText(t){var n=this.expandMacro(t);return n&&n.map(r=>r.text).join("")}_getExpansion(t){var n=this.macros.get(t);if(n==null)return n;if(t.length===1){var r=this.lexer.catcodes[t];if(r!=null&&r!==13)return}var o=typeof n=="function"?n(this):n;if(typeof o=="string"){var s=0;if(o.indexOf("#")!==-1)for(var i=o.replace(/##/g,"");i.indexOf("#"+(s+1))!==-1;)++s;for(var a=new Gj(o,this.settings),l=[],c=a.lex();c.text!=="EOF";)l.push(c),c=a.lex();l.reverse();var u={tokens:l,numArgs:s};return u}return o}isDefined(t){return this.macros.has(t)||d0.hasOwnProperty(t)||es.math.hasOwnProperty(t)||es.text.hasOwnProperty(t)||gre.hasOwnProperty(t)}isExpandable(t){var n=this.macros.get(t);return n!=null?typeof n=="string"||typeof n=="function"||!n.unexpandable:d0.hasOwnProperty(t)&&!d0[t].primitive}}var Kj=/^[]/,n_=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),cA={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},Zj={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};let bre=class yre{constructor(t,n){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Fqe(t,n,this.mode),this.settings=n,this.leftrightDepth=0}expect(t,n){if(n===void 0&&(n=!0),this.fetch().text!==t)throw new It("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());n&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var n=this.nextToken;this.consume(),this.gullet.pushToken(new Zl("}")),this.gullet.pushTokens(t);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=n,r}parseExpression(t,n){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var o=this.fetch();if(yre.endOfExpression.indexOf(o.text)!==-1||n&&o.text===n||t&&d0[o.text]&&d0[o.text].infix)break;var s=this.parseAtom(n);if(s){if(s.type==="internal")continue}else break;r.push(s)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(t){for(var n=-1,r,o=0;o<t.length;o++)if(t[o].type==="infix"){if(n!==-1)throw new It("only one infix operator per group",t[o].token);n=o,r=t[o].replaceWith}if(n!==-1&&r){var s,i,a=t.slice(0,n),l=t.slice(n+1);a.length===1&&a[0].type==="ordgroup"?s=a[0]:s={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?i=l[0]:i={type:"ordgroup",mode:this.mode,body:l};var c;return r==="\\\\abovefrac"?c=this.callFunction(r,[s,t[n],i],[]):c=this.callFunction(r,[s,i],[]),[c]}else return t}handleSupSubscript(t){var n=this.fetch(),r=n.text;this.consume(),this.consumeSpaces();var o;do{var s;o=this.parseGroup(t)}while(((s=o)==null?void 0:s.type)==="internal");if(!o)throw new It("Expected group after '"+r+"'",n);return o}formatUnsupportedCmd(t){for(var n=[],r=0;r<t.length;r++)n.push({type:"textord",mode:"text",text:t[r]});var o={type:"text",mode:this.mode,body:n},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[o]};return s}parseAtom(t){var n=this.parseGroup("atom",t);if((n==null?void 0:n.type)==="internal"||this.mode==="text")return n;for(var r,o;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(n&&n.type==="op"){var i=s.text==="\\limits";n.limits=i,n.alwaysHandleSupSub=!0}else if(n&&n.type==="operatorname")n.alwaysHandleSupSub&&(n.limits=s.text==="\\limits");else throw new It("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(r)throw new It("Double superscript",s);r=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(o)throw new It("Double subscript",s);o=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(r)throw new It("Double superscript",s);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:l}}else if(n_[s.text]){var c=Kj.test(s.text),u=[];for(u.push(new Zl(n_[s.text])),this.consume();;){var f=this.fetch().text;if(!n_[f]||Kj.test(f)!==c)break;u.unshift(new Zl(n_[f])),this.consume()}var m=this.subparse(u);c?o={type:"ordgroup",mode:"math",body:m}:r={type:"ordgroup",mode:"math",body:m}}else break}return r||o?{type:"supsub",mode:this.mode,base:n,sup:r,sub:o}:n}parseFunction(t,n){var r=this.fetch(),o=r.text,s=d0[o];if(!s)return null;if(this.consume(),n&&n!=="atom"&&!s.allowedInArgument)throw new It("Got function '"+o+"' with no arguments"+(n?" as "+n:""),r);if(this.mode==="text"&&!s.allowedInText)throw new It("Can't use function '"+o+"' in text mode",r);if(this.mode==="math"&&s.allowedInMath===!1)throw new It("Can't use function '"+o+"' in math mode",r);var{args:i,optArgs:a}=this.parseArguments(o,s);return this.callFunction(o,i,a,r,t)}callFunction(t,n,r,o,s){var i={funcName:t,parser:this,token:o,breakOnTokenText:s},a=d0[t];if(a&&a.handler)return a.handler(i,n,r);throw new It("No function handler for "+t)}parseArguments(t,n){var r=n.numArgs+n.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var o=[],s=[],i=0;i<r;i++){var a=n.argTypes&&n.argTypes[i],l=i<n.numOptionalArgs;(n.primitive&&a==null||n.type==="sqrt"&&i===1&&s[0]==null)&&(a="primitive");var c=this.parseGroupOfType("argument to '"+t+"'",a,l);if(l)s.push(c);else if(c!=null)o.push(c);else throw new It("Null argument, please report this as a bug")}return{args:o,optArgs:s}}parseGroupOfType(t,n,r){switch(n){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,n);case"hbox":{var o=this.parseArgumentGroup(r,"text");return o!=null?{type:"styling",mode:o.mode,body:[o],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",r);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(r)throw new It("A primitive argument cannot be optional");var i=this.parseGroup(t);if(i==null)throw new It("Expected group as "+t,this.fetch());return i}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new It("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,n){var r=this.gullet.scanArgument(n);if(r==null)return null;for(var o="",s;(s=this.fetch()).text!=="EOF";)o+=s.text,this.consume();return this.consume(),r.text=o,r}parseRegexGroup(t,n){for(var r=this.fetch(),o=r,s="",i;(i=this.fetch()).text!=="EOF"&&t.test(s+i.text);)o=i,s+=o.text,this.consume();if(s==="")throw new It("Invalid "+n+": '"+r.text+"'",r);return r.range(o,s)}parseColorGroup(t){var n=this.parseStringGroup("color",t);if(n==null)return null;var r=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(n.text);if(!r)throw new It("Invalid color: '"+n.text+"'",n);var o=r[0];return/^[0-9a-f]{6}$/i.test(o)&&(o="#"+o),{type:"color-token",mode:this.mode,color:o}}parseSizeGroup(t){var n,r=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?n=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):n=this.parseStringGroup("size",t),!n)return null;!t&&n.text.length===0&&(n.text="0pt",r=!0);var o=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(n.text);if(!o)throw new It("Invalid size: '"+n.text+"'",n);var s={number:+(o[1]+o[2]),unit:o[3]};if(!Cne(s))throw new It("Invalid unit: '"+s.unit+"'",n);return{type:"size",mode:this.mode,value:s,isBlank:r}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var n=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),n==null)return null;var r=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(t,n){var r=this.gullet.scanArgument(t);if(r==null)return null;var o=this.mode;n&&this.switchMode(n),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var i={type:"ordgroup",mode:this.mode,loc:r.loc,body:s};return n&&this.switchMode(o),i}parseGroup(t,n){var r=this.fetch(),o=r.text,s;if(o==="{"||o==="\\begingroup"){this.consume();var i=o==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,i),l=this.fetch();this.expect(i),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:fl.range(r,l),body:a,semisimple:o==="\\begingroup"||void 0}}else if(s=this.parseFunction(n,t)||this.parseSymbol(),s==null&&o[0]==="\\"&&!gre.hasOwnProperty(o)){if(this.settings.throwOnError)throw new It("Undefined control sequence: "+o,r);s=this.formatUnsupportedCmd(o),this.consume()}return s}formLigatures(t){for(var n=t.length-1,r=0;r<n;++r){var o=t[r],s=o.text;s==="-"&&t[r+1].text==="-"&&(r+1<n&&t[r+2].text==="-"?(t.splice(r,3,{type:"textord",mode:"text",loc:fl.range(o,t[r+2]),text:"---"}),n-=2):(t.splice(r,2,{type:"textord",mode:"text",loc:fl.range(o,t[r+1]),text:"--"}),n-=1)),(s==="'"||s==="`")&&t[r+1].text===s&&(t.splice(r,2,{type:"textord",mode:"text",loc:fl.range(o,t[r+1]),text:s+s}),n-=1)}}parseSymbol(){var t=this.fetch(),n=t.text;if(/^\\verb[^a-zA-Z]/.test(n)){this.consume();var r=n.slice(5),o=r.charAt(0)==="*";if(o&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new It(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:o}}Zj.hasOwnProperty(n[0])&&!es[this.mode][n[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+n[0]+'" used in math mode',t),n=Zj[n[0]]+n.slice(1));var s=Oqe.exec(n);s&&(n=n.substring(0,s.index),n==="i"?n="":n==="j"&&(n=""));var i;if(es[this.mode][n]){this.settings.strict&&this.mode==="math"&&dI.indexOf(n)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+n[0]+'" used in math mode',t);var a=es[this.mode][n].group,l=fl.range(t),c;if(CVe.hasOwnProperty(a)){var u=a;c={type:"atom",mode:this.mode,family:u,loc:l,text:n}}else c={type:a,mode:this.mode,loc:l,text:n};i=c}else if(n.charCodeAt(0)>=128)this.settings.strict&&(Sne(n.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+n[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+n[0]+'"'+(" ("+n.charCodeAt(0)+")"),t)),i={type:"textord",mode:"text",loc:fl.range(t),text:n};else return null;if(this.consume(),s)for(var f=0;f<s[0].length;f++){var m=s[0][f];if(!cA[m])throw new It("Unknown accent ' "+m+"'",t);var g=cA[m][this.mode]||cA[m].text;if(!g)throw new It("Accent "+m+" unsupported in "+this.mode+" mode",t);i={type:"accent",mode:this.mode,loc:fl.range(t),label:g,isStretchy:!1,isShifty:!0,base:i}}return i}};bre.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var xM=function(t,n){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new bre(t,n);delete r.gullet.macros.current["\\df@tag"];var o=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!n.displayMode)throw new It("\\tag works only in display equations");o=[{type:"tag",mode:"text",body:o,tag:r.subparse([new Zl("\\df@tag")])}]}return o},wM=function(t,n,r){n.textContent="";var o=HC(t,r).toNode();n.appendChild(o)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),wM=function(){throw new It("KaTeX doesn't work in quirks mode.")});var vre=function(t,n){var r=HC(t,n).toMarkup();return r},xre=function(t,n){var r=new nM(n);return xM(t,r)},wre=function(t,n,r){if(r.throwOnError||!(t instanceof It))throw t;var o=We.makeSpan(["katex-error"],[new Lc(n)]);return o.setAttribute("title",t.toString()),o.setAttribute("style","color:"+r.errorColor),o},HC=function(t,n){var r=new nM(n);try{var o=xM(t,r);return KVe(o,t,r)}catch(s){return wre(s,t,r)}},Ere=function(t,n){var r=new nM(n);try{var o=xM(t,r);return ZVe(o,t,r)}catch(s){return wre(s,t,r)}},_re="0.16.25",Sre={Span:Bw,Anchor:sM,SymbolNode:Lc,SvgNode:Zf,PathNode:M0,LineNode:uI},bI={version:_re,render:wM,renderToString:vre,ParseError:It,SETTINGS_SCHEMA:Wv,__parse:xre,__renderToDomTree:HC,__renderToHTMLTree:Ere,__setFontMetrics:Tne,__defineSymbol:$,__defineFunction:Qt,__defineMacro:le,__domTree:Sre};const rht=Object.freeze(Object.defineProperty({__proto__:null,ParseError:It,SETTINGS_SCHEMA:Wv,__defineFunction:Qt,__defineMacro:le,__defineSymbol:$,__domTree:Sre,__parse:xre,__renderToDomTree:HC,__renderToHTMLTree:Ere,__setFontMetrics:Tne,default:bI,get render(){return wM},renderToString:vre,version:_re},Symbol.toStringTag,{value:"Module"})),Bqe={},zqe=[];function yI(e){const t=e||Bqe;return function(n,r){eM(n,"element",function(o,s){const i=Array.isArray(o.properties.className)?o.properties.className:zqe,a=i.includes("language-math"),l=i.includes("math-display"),c=i.includes("math-inline");let u=l;if(!a&&!l&&!c)return;let f=s[s.length-1],m=o;if(o.tagName==="code"&&a&&f&&f.type==="element"&&f.tagName==="pre"&&(m=f,f=s[s.length-2],u=!0),!f)return;const g=BHe(m,{whitespace:"pre"});let y;try{y=bI.renderToString(g,{...t,displayMode:u,throwOnError:!0})}catch(w){const _=w,T=_.name.toLowerCase();r.message("Could not render math with KaTeX",{ancestors:[...s,o],cause:_,place:o.position,ruleId:T,source:"rehype-katex"});try{y=bI.renderToString(g,{...t,displayMode:u,strict:"ignore",throwOnError:!1})}catch{y=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(t.errorColor||"#cc0000"),title:String(w)},children:[{type:"text",value:g}]}]}}typeof y=="string"&&(y=RHe(y).children);const v=f.children.indexOf(m);return f.children.splice(v,1,...y),HT})}}const Tre=-1,VC=0,Kv=1,KT=2,EM=3,_M=4,SM=5,TM=6,Cre=7,kre=8,Jj=typeof self=="object"?self:globalThis,jqe=(e,t)=>{const n=(o,s)=>(e.set(s,o),o),r=o=>{if(e.has(o))return e.get(o);const[s,i]=t[o];switch(s){case VC:case Tre:return n(i,o);case Kv:{const a=n([],o);for(const l of i)a.push(r(l));return a}case KT:{const a=n({},o);for(const[l,c]of i)a[r(l)]=r(c);return a}case EM:return n(new Date(i),o);case _M:{const{source:a,flags:l}=i;return n(new RegExp(a,l),o)}case SM:{const a=n(new Map,o);for(const[l,c]of i)a.set(r(l),r(c));return a}case TM:{const a=n(new Set,o);for(const l of i)a.add(r(l));return a}case Cre:{const{name:a,message:l}=i;return n(new Jj[a](l),o)}case kre:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:a}=new Uint8Array(i);return n(new DataView(a),i)}}return n(new Jj[s](i),o)};return r},Xj=e=>jqe(new Map,e)(0),Xg="",{toString:Uqe}={},{keys:Hqe}=Object,Jy=e=>{const t=typeof e;if(t!=="object"||!e)return[VC,t];const n=Uqe.call(e).slice(8,-1);switch(n){case"Array":return[Kv,Xg];case"Object":return[KT,Xg];case"Date":return[EM,Xg];case"RegExp":return[_M,Xg];case"Map":return[SM,Xg];case"Set":return[TM,Xg];case"DataView":return[Kv,n]}return n.includes("Array")?[Kv,n]:n.includes("Error")?[Cre,n]:[KT,n]},r_=([e,t])=>e===VC&&(t==="function"||t==="symbol"),Vqe=(e,t,n,r)=>{const o=(i,a)=>{const l=r.push(i)-1;return n.set(a,l),l},s=i=>{if(n.has(i))return n.get(i);let[a,l]=Jy(i);switch(a){case VC:{let u=i;switch(l){case"bigint":a=kre,u=i.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return o([Tre],i)}return o([a,u],i)}case Kv:{if(l){let m=i;return l==="DataView"?m=new Uint8Array(i.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(i)),o([l,[...m]],i)}const u=[],f=o([a,u],i);for(const m of i)u.push(s(m));return f}case KT:{if(l)switch(l){case"BigInt":return o([l,i.toString()],i);case"Boolean":case"Number":case"String":return o([l,i.valueOf()],i)}if(t&&"toJSON"in i)return s(i.toJSON());const u=[],f=o([a,u],i);for(const m of Hqe(i))(e||!r_(Jy(i[m])))&&u.push([s(m),s(i[m])]);return f}case EM:return o([a,i.toISOString()],i);case _M:{const{source:u,flags:f}=i;return o([a,{source:u,flags:f}],i)}case SM:{const u=[],f=o([a,u],i);for(const[m,g]of i)(e||!(r_(Jy(m))||r_(Jy(g))))&&u.push([s(m),s(g)]);return f}case TM:{const u=[],f=o([a,u],i);for(const m of i)(e||!r_(Jy(m)))&&u.push(s(m));return f}}const{message:c}=i;return o([a,{name:l,message:c}],i)};return s},Qj=(e,{json:t,lossy:n}={})=>{const r=[];return Vqe(!(t||n),!!t,new Map,r)(e),r},ub=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Xj(Qj(e,t)):structuredClone(e):(e,t)=>Xj(Qj(e,t));function qqe(e){const t=String(e),n=[];return{toOffset:o,toPoint:r};function r(s){if(typeof s=="number"&&s>-1&&s<=t.length){let i=0;for(;;){let a=n[i];if(a===void 0){const l=eU(t,n[i-1]);a=l===-1?t.length+1:l+1,n[i]=a}if(a>s)return{line:i+1,column:s-(i>0?n[i-1]:0)+1,offset:s};i++}}}function o(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const a=n[n.length-1],l=eU(t,a),c=l===-1?t.length+1:l+1;if(a===c)break;n.push(c)}const i=(s.line>1?n[s.line-2]:0)+s.column-1;if(i<n[s.line-1])return i}}}function eU(e,t){const n=e.indexOf("\r",t),r=e.indexOf(`
`,t);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Are={}.hasOwnProperty,Gqe=Object.prototype;function Wqe(e,t){const n=t||{};return CM({file:n.file||void 0,location:!1,schema:n.space==="svg"?K0:Lw,verbose:n.verbose||!1},e)}function CM(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},F_(e,r,n),n}case"#document":case"#document-fragment":{const r=t,o="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Nre(e,t.childNodes),data:{quirksMode:o}},e.file&&e.location){const s=String(e.file),i=qqe(s),a=i.toPoint(0),l=i.toPoint(s.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=t;return n={type:"doctype"},F_(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},F_(e,r,n),n}default:return n=Yqe(e,t),n}}function Nre(e,t){let n=-1;const r=[];for(;++n<t.length;){const o=CM(e,t[n]);r.push(o)}return r}function Yqe(e,t){const n=e.schema;e.schema=t.namespaceURI===gd.svg?K0:Lw;let r=-1;const o={};for(;++r<t.attrs.length;){const a=t.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;Are.call(Gqe,l)||(o[l]=a.value)}const i=(e.schema.space==="svg"?mne:pne)(t.tagName,o,Nre(e,t.childNodes));if(F_(e,t,i),i.tagName==="template"){const a=t,l=a.sourceCodeLocation,c=l&&l.startTag&&g1(l.startTag),u=l&&l.endTag&&g1(l.endTag),f=CM(e,a.content);c&&u&&e.file&&(f.position={start:c.end,end:u.start}),i.content=f}return e.schema=n,i}function F_(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Kqe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Kqe(e,t,n){const r=g1(n);if(t.type==="element"){const o=t.children[t.children.length-1];if(r&&!n.endTag&&o&&o.position&&o.position.end&&(r.end=Object.assign({},o.position.end)),e.verbose){const s={};let i;if(n.attrs)for(i in n.attrs)Are.call(n.attrs,i)&&(s[IC(e.schema,i).property]=g1(n.attrs[i]));n.startTag;const a=g1(n.startTag),l=n.endTag?g1(n.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=s,t.data={position:c}}}return r}function g1(e){const t=tU({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=tU({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function tU(e){return e.line&&e.column?e:void 0}class jw{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}jw.prototype.property={};jw.prototype.normal={};jw.prototype.space=null;function Ire(e,t){const n={},r={};let o=-1;for(;++o<e.length;)Object.assign(n,e[o].property),Object.assign(r,e[o].normal);return new jw(n,r,t)}function vI(e){return e.toLowerCase()}class Bc{constructor(t,n){this.property=t,this.attribute=n}}Bc.prototype.space=null;Bc.prototype.boolean=!1;Bc.prototype.booleanish=!1;Bc.prototype.overloadedBoolean=!1;Bc.prototype.number=!1;Bc.prototype.commaSeparated=!1;Bc.prototype.spaceSeparated=!1;Bc.prototype.commaOrSpaceSeparated=!1;Bc.prototype.mustUseProperty=!1;Bc.prototype.defined=!1;let Zqe=0;const hr=zm(),fi=zm(),Rre=zm(),Ot=zm(),Xo=zm(),P1=zm(),zl=zm();function zm(){return 2**++Zqe}const xI=Object.freeze(Object.defineProperty({__proto__:null,boolean:hr,booleanish:fi,commaOrSpaceSeparated:zl,commaSeparated:P1,number:Ot,overloadedBoolean:Rre,spaceSeparated:Xo},Symbol.toStringTag,{value:"Module"})),uA=Object.keys(xI);class kM extends Bc{constructor(t,n,r,o){let s=-1;if(super(t,n),nU(this,"space",o),typeof r=="number")for(;++s<uA.length;){const i=uA[s];nU(this,uA[s],(r&xI[i])===xI[i])}}}kM.prototype.defined=!0;function nU(e,t,n){n&&(e[t]=n)}const Jqe={}.hasOwnProperty;function Pb(e){const t={},n={};let r;for(r in e.properties)if(Jqe.call(e.properties,r)){const o=e.properties[r],s=new kM(r,e.transform(e.attributes||{},r),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[vI(r)]=r,n[vI(s.attribute)]=r}return new jw(t,n,e.space)}const Mre=Pb({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Dre=Pb({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Ore(e,t){return t in e?e[t]:t}function Pre(e,t){return Ore(e,t.toLowerCase())}const Lre=Pb({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Pre,properties:{xmlns:null,xmlnsXLink:null}}),$re=Pb({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:fi,ariaAutoComplete:null,ariaBusy:fi,ariaChecked:fi,ariaColCount:Ot,ariaColIndex:Ot,ariaColSpan:Ot,ariaControls:Xo,ariaCurrent:null,ariaDescribedBy:Xo,ariaDetails:null,ariaDisabled:fi,ariaDropEffect:Xo,ariaErrorMessage:null,ariaExpanded:fi,ariaFlowTo:Xo,ariaGrabbed:fi,ariaHasPopup:null,ariaHidden:fi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Xo,ariaLevel:Ot,ariaLive:null,ariaModal:fi,ariaMultiLine:fi,ariaMultiSelectable:fi,ariaOrientation:null,ariaOwns:Xo,ariaPlaceholder:null,ariaPosInSet:Ot,ariaPressed:fi,ariaReadOnly:fi,ariaRelevant:null,ariaRequired:fi,ariaRoleDescription:Xo,ariaRowCount:Ot,ariaRowIndex:Ot,ariaRowSpan:Ot,ariaSelected:fi,ariaSetSize:Ot,ariaSort:null,ariaValueMax:Ot,ariaValueMin:Ot,ariaValueNow:Ot,ariaValueText:null,role:null}}),Xqe=Pb({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Pre,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:P1,acceptCharset:Xo,accessKey:Xo,action:null,allow:null,allowFullScreen:hr,allowPaymentRequest:hr,allowUserMedia:hr,alt:null,as:null,async:hr,autoCapitalize:null,autoComplete:Xo,autoFocus:hr,autoPlay:hr,blocking:Xo,capture:null,charSet:null,checked:hr,cite:null,className:Xo,cols:Ot,colSpan:null,content:null,contentEditable:fi,controls:hr,controlsList:Xo,coords:Ot|P1,crossOrigin:null,data:null,dateTime:null,decoding:null,default:hr,defer:hr,dir:null,dirName:null,disabled:hr,download:Rre,draggable:fi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:hr,formTarget:null,headers:Xo,height:Ot,hidden:hr,high:Ot,href:null,hrefLang:null,htmlFor:Xo,httpEquiv:Xo,id:null,imageSizes:null,imageSrcSet:null,inert:hr,inputMode:null,integrity:null,is:null,isMap:hr,itemId:null,itemProp:Xo,itemRef:Xo,itemScope:hr,itemType:Xo,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:hr,low:Ot,manifest:null,max:null,maxLength:Ot,media:null,method:null,min:null,minLength:Ot,multiple:hr,muted:hr,name:null,nonce:null,noModule:hr,noValidate:hr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:hr,optimum:Ot,pattern:null,ping:Xo,placeholder:null,playsInline:hr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:hr,referrerPolicy:null,rel:Xo,required:hr,reversed:hr,rows:Ot,rowSpan:Ot,sandbox:Xo,scope:null,scoped:hr,seamless:hr,selected:hr,shadowRootClonable:hr,shadowRootDelegatesFocus:hr,shadowRootMode:null,shape:null,size:Ot,sizes:null,slot:null,span:Ot,spellCheck:fi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ot,step:null,style:null,tabIndex:Ot,target:null,title:null,translate:null,type:null,typeMustMatch:hr,useMap:null,value:fi,width:Ot,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Xo,axis:null,background:null,bgColor:null,border:Ot,borderColor:null,bottomMargin:Ot,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:hr,declare:hr,event:null,face:null,frame:null,frameBorder:null,hSpace:Ot,leftMargin:Ot,link:null,longDesc:null,lowSrc:null,marginHeight:Ot,marginWidth:Ot,noResize:hr,noHref:hr,noShade:hr,noWrap:hr,object:null,profile:null,prompt:null,rev:null,rightMargin:Ot,rules:null,scheme:null,scrolling:fi,standby:null,summary:null,text:null,topMargin:Ot,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ot,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:hr,disableRemotePlayback:hr,prefix:null,property:null,results:Ot,security:null,unselectable:null}}),Qqe=Pb({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Ore,properties:{about:zl,accentHeight:Ot,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ot,amplitude:Ot,arabicForm:null,ascent:Ot,attributeName:null,attributeType:null,azimuth:Ot,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ot,by:null,calcMode:null,capHeight:Ot,className:Xo,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ot,diffuseConstant:Ot,direction:null,display:null,dur:null,divisor:Ot,dominantBaseline:null,download:hr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ot,enableBackground:null,end:null,event:null,exponent:Ot,externalResourcesRequired:null,fill:null,fillOpacity:Ot,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:P1,g2:P1,glyphName:P1,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ot,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ot,horizOriginX:Ot,horizOriginY:Ot,id:null,ideographic:Ot,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ot,k:Ot,k1:Ot,k2:Ot,k3:Ot,k4:Ot,kernelMatrix:zl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ot,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ot,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ot,overlineThickness:Ot,paintOrder:null,panose1:null,path:null,pathLength:Ot,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Xo,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ot,pointsAtY:Ot,pointsAtZ:Ot,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zl,rev:zl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zl,requiredFeatures:zl,requiredFonts:zl,requiredFormats:zl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ot,specularExponent:Ot,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ot,strikethroughThickness:Ot,string:null,stroke:null,strokeDashArray:zl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ot,strokeOpacity:Ot,strokeWidth:null,style:null,surfaceScale:Ot,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zl,tabIndex:Ot,tableValues:null,target:null,targetX:Ot,targetY:Ot,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ot,underlineThickness:Ot,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ot,values:null,vAlphabetic:Ot,vMathematical:Ot,vectorEffect:null,vHanging:Ot,vIdeographic:Ot,version:null,vertAdvY:Ot,vertOriginX:Ot,vertOriginY:Ot,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ot,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),eGe=/^data[-\w.:]+$/i,rU=/-[a-z]/g,tGe=/[A-Z]/g;function nGe(e,t){const n=vI(t);let r=t,o=Bc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&eGe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(rU,oGe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!rU.test(s)){let i=s.replace(tGe,rGe);i.charAt(0)!=="-"&&(i="-"+i),t="data"+i}}o=kM}return new o(r,t)}function rGe(e){return"-"+e.toLowerCase()}function oGe(e){return e.charAt(1).toUpperCase()}const sGe=Ire([Dre,Mre,Lre,$re,Xqe],"html"),Fre=Ire([Dre,Mre,Lre,$re,Qqe],"svg"),iGe={},aGe={}.hasOwnProperty,Bre=V7("type",{handlers:{root:cGe,element:pGe,text:fGe,comment:hGe,doctype:dGe}});function lGe(e,t){const r=(t||iGe).space;return Bre(e,r==="svg"?Fre:sGe)}function cGe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=AM(e.children,n,t),Lb(e,n),n}function uGe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=AM(e.children,n,t),Lb(e,n),n}function dGe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Lb(e,t),t}function fGe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Lb(e,t),t}function hGe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Lb(e,t),t}function pGe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Fre);const o=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&aGe.call(e.properties,s)){const l=mGe(r,s,e.properties[s]);l&&o.push(l)}}const i=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:o,namespaceURI:gd[i],childNodes:[],parentNode:null};return a.childNodes=AM(e.children,a,r),Lb(e,a),e.tagName==="template"&&e.content&&(a.content=uGe(e.content,r)),a}function mGe(e,t,n){const r=nGe(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?q7(n):G7(n));const o={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=o.name.indexOf(":");s<0?o.prefix="":(o.name=o.name.slice(s+1),o.prefix=r.attribute.slice(0,s)),o.namespace=gd[r.space]}return o}function AM(e,t,n){let r=-1;const o=[];if(e)for(;++r<e.length;){const s=Bre(e[r],n);s.parentNode=t,o.push(s)}return o}function Lb(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const gGe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),bs="";var fe;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(fe||(fe={}));const il={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function zre(e){return e>=55296&&e<=57343}function bGe(e){return e>=56320&&e<=57343}function yGe(e,t){return(e-55296)*1024+9216+t}function jre(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Ure(e){return e>=64976&&e<=65007||gGe.has(e)}var tt;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(tt||(tt={}));const vGe=65536;class xGe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=vGe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:r,col:o,offset:s}=this,i=o+n,a=s+n;return{code:t,startLine:r,endLine:r,startCol:i,endCol:i,startOffset:a,endOffset:a}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(bGe(n))return this.pos++,this._addGap(),yGe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,fe.EOF;return this._err(tt.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,fe.EOF;const r=this.html.charCodeAt(n);return r===fe.CARRIAGE_RETURN?fe.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,fe.EOF;let t=this.html.charCodeAt(this.pos);return t===fe.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,fe.LINE_FEED):t===fe.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,zre(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===fe.LINE_FEED||t===fe.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){jre(t)?this._err(tt.controlCharacterInInputStream):Ure(t)&&this._err(tt.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Ar;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Ar||(Ar={}));function Hre(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const wGe=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),EGe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function _Ge(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=EGe.get(e))!==null&&t!==void 0?t:e}var Hi;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Hi||(Hi={}));const SGe=32;var f0;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(f0||(f0={}));function wI(e){return e>=Hi.ZERO&&e<=Hi.NINE}function TGe(e){return e>=Hi.UPPER_A&&e<=Hi.UPPER_F||e>=Hi.LOWER_A&&e<=Hi.LOWER_F}function CGe(e){return e>=Hi.UPPER_A&&e<=Hi.UPPER_Z||e>=Hi.LOWER_A&&e<=Hi.LOWER_Z||wI(e)}function kGe(e){return e===Hi.EQUALS||CGe(e)}var Bi;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Bi||(Bi={}));var Cf;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Cf||(Cf={}));class AGe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Bi.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Cf.Strict}startEntity(t){this.decodeMode=t,this.state=Bi.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Bi.EntityStart:return t.charCodeAt(n)===Hi.NUM?(this.state=Bi.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Bi.NamedEntity,this.stateNamedEntity(t,n));case Bi.NumericStart:return this.stateNumericStart(t,n);case Bi.NumericDecimal:return this.stateNumericDecimal(t,n);case Bi.NumericHex:return this.stateNumericHex(t,n);case Bi.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|SGe)===Hi.LOWER_X?(this.state=Bi.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Bi.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,o){if(n!==r){const s=r-n;this.result=this.result*Math.pow(o,s)+Number.parseInt(t.substr(n,s),o),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const o=t.charCodeAt(n);if(wI(o)||TGe(o))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(o,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const o=t.charCodeAt(n);if(wI(o))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(o,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Hi.SEMI)this.consumed+=1;else if(this.decodeMode===Cf.Strict)return 0;return this.emitCodePoint(_Ge(this.result),this.consumed),this.errors&&(t!==Hi.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let o=r[this.treeIndex],s=(o&f0.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const i=t.charCodeAt(n);if(this.treeIndex=NGe(r,o,this.treeIndex+Math.max(1,s),i),this.treeIndex<0)return this.result===0||this.decodeMode===Cf.Attribute&&(s===0||kGe(i))?0:this.emitNotTerminatedNamedEntity();if(o=r[this.treeIndex],s=(o&f0.VALUE_LENGTH)>>14,s!==0){if(i===Hi.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Cf.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,o=(r[n]&f0.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,o,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:o}=this;return this.emitCodePoint(n===1?o[t]&~f0.VALUE_LENGTH:o[t+1],r),n===3&&this.emitCodePoint(o[t+2],r),r}end(){var t;switch(this.state){case Bi.NamedEntity:return this.result!==0&&(this.decodeMode!==Cf.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Bi.NumericDecimal:return this.emitNumericEntity(0,2);case Bi.NumericHex:return this.emitNumericEntity(0,3);case Bi.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Bi.EntityStart:return 0}}}function NGe(e,t,n,r){const o=(t&f0.BRANCH_LENGTH)>>7,s=t&f0.JUMP_TABLE;if(o===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=o?-1:e[n+l]-1}let i=n,a=i+o-1;for(;i<=a;){const l=i+a>>>1,c=e[l];if(c<r)i=l+1;else if(c>r)a=l-1;else return e[l+o]}return-1}var xt;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(xt||(xt={}));var am;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(am||(am={}));var Sc;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Sc||(Sc={}));var qe;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(qe||(qe={}));var O;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(O||(O={}));const IGe=new Map([[qe.A,O.A],[qe.ADDRESS,O.ADDRESS],[qe.ANNOTATION_XML,O.ANNOTATION_XML],[qe.APPLET,O.APPLET],[qe.AREA,O.AREA],[qe.ARTICLE,O.ARTICLE],[qe.ASIDE,O.ASIDE],[qe.B,O.B],[qe.BASE,O.BASE],[qe.BASEFONT,O.BASEFONT],[qe.BGSOUND,O.BGSOUND],[qe.BIG,O.BIG],[qe.BLOCKQUOTE,O.BLOCKQUOTE],[qe.BODY,O.BODY],[qe.BR,O.BR],[qe.BUTTON,O.BUTTON],[qe.CAPTION,O.CAPTION],[qe.CENTER,O.CENTER],[qe.CODE,O.CODE],[qe.COL,O.COL],[qe.COLGROUP,O.COLGROUP],[qe.DD,O.DD],[qe.DESC,O.DESC],[qe.DETAILS,O.DETAILS],[qe.DIALOG,O.DIALOG],[qe.DIR,O.DIR],[qe.DIV,O.DIV],[qe.DL,O.DL],[qe.DT,O.DT],[qe.EM,O.EM],[qe.EMBED,O.EMBED],[qe.FIELDSET,O.FIELDSET],[qe.FIGCAPTION,O.FIGCAPTION],[qe.FIGURE,O.FIGURE],[qe.FONT,O.FONT],[qe.FOOTER,O.FOOTER],[qe.FOREIGN_OBJECT,O.FOREIGN_OBJECT],[qe.FORM,O.FORM],[qe.FRAME,O.FRAME],[qe.FRAMESET,O.FRAMESET],[qe.H1,O.H1],[qe.H2,O.H2],[qe.H3,O.H3],[qe.H4,O.H4],[qe.H5,O.H5],[qe.H6,O.H6],[qe.HEAD,O.HEAD],[qe.HEADER,O.HEADER],[qe.HGROUP,O.HGROUP],[qe.HR,O.HR],[qe.HTML,O.HTML],[qe.I,O.I],[qe.IMG,O.IMG],[qe.IMAGE,O.IMAGE],[qe.INPUT,O.INPUT],[qe.IFRAME,O.IFRAME],[qe.KEYGEN,O.KEYGEN],[qe.LABEL,O.LABEL],[qe.LI,O.LI],[qe.LINK,O.LINK],[qe.LISTING,O.LISTING],[qe.MAIN,O.MAIN],[qe.MALIGNMARK,O.MALIGNMARK],[qe.MARQUEE,O.MARQUEE],[qe.MATH,O.MATH],[qe.MENU,O.MENU],[qe.META,O.META],[qe.MGLYPH,O.MGLYPH],[qe.MI,O.MI],[qe.MO,O.MO],[qe.MN,O.MN],[qe.MS,O.MS],[qe.MTEXT,O.MTEXT],[qe.NAV,O.NAV],[qe.NOBR,O.NOBR],[qe.NOFRAMES,O.NOFRAMES],[qe.NOEMBED,O.NOEMBED],[qe.NOSCRIPT,O.NOSCRIPT],[qe.OBJECT,O.OBJECT],[qe.OL,O.OL],[qe.OPTGROUP,O.OPTGROUP],[qe.OPTION,O.OPTION],[qe.P,O.P],[qe.PARAM,O.PARAM],[qe.PLAINTEXT,O.PLAINTEXT],[qe.PRE,O.PRE],[qe.RB,O.RB],[qe.RP,O.RP],[qe.RT,O.RT],[qe.RTC,O.RTC],[qe.RUBY,O.RUBY],[qe.S,O.S],[qe.SCRIPT,O.SCRIPT],[qe.SEARCH,O.SEARCH],[qe.SECTION,O.SECTION],[qe.SELECT,O.SELECT],[qe.SOURCE,O.SOURCE],[qe.SMALL,O.SMALL],[qe.SPAN,O.SPAN],[qe.STRIKE,O.STRIKE],[qe.STRONG,O.STRONG],[qe.STYLE,O.STYLE],[qe.SUB,O.SUB],[qe.SUMMARY,O.SUMMARY],[qe.SUP,O.SUP],[qe.TABLE,O.TABLE],[qe.TBODY,O.TBODY],[qe.TEMPLATE,O.TEMPLATE],[qe.TEXTAREA,O.TEXTAREA],[qe.TFOOT,O.TFOOT],[qe.TD,O.TD],[qe.TH,O.TH],[qe.THEAD,O.THEAD],[qe.TITLE,O.TITLE],[qe.TR,O.TR],[qe.TRACK,O.TRACK],[qe.TT,O.TT],[qe.U,O.U],[qe.UL,O.UL],[qe.SVG,O.SVG],[qe.VAR,O.VAR],[qe.WBR,O.WBR],[qe.XMP,O.XMP]]);function $b(e){var t;return(t=IGe.get(e))!==null&&t!==void 0?t:O.UNKNOWN}const Tt=O,RGe={[xt.HTML]:new Set([Tt.ADDRESS,Tt.APPLET,Tt.AREA,Tt.ARTICLE,Tt.ASIDE,Tt.BASE,Tt.BASEFONT,Tt.BGSOUND,Tt.BLOCKQUOTE,Tt.BODY,Tt.BR,Tt.BUTTON,Tt.CAPTION,Tt.CENTER,Tt.COL,Tt.COLGROUP,Tt.DD,Tt.DETAILS,Tt.DIR,Tt.DIV,Tt.DL,Tt.DT,Tt.EMBED,Tt.FIELDSET,Tt.FIGCAPTION,Tt.FIGURE,Tt.FOOTER,Tt.FORM,Tt.FRAME,Tt.FRAMESET,Tt.H1,Tt.H2,Tt.H3,Tt.H4,Tt.H5,Tt.H6,Tt.HEAD,Tt.HEADER,Tt.HGROUP,Tt.HR,Tt.HTML,Tt.IFRAME,Tt.IMG,Tt.INPUT,Tt.LI,Tt.LINK,Tt.LISTING,Tt.MAIN,Tt.MARQUEE,Tt.MENU,Tt.META,Tt.NAV,Tt.NOEMBED,Tt.NOFRAMES,Tt.NOSCRIPT,Tt.OBJECT,Tt.OL,Tt.P,Tt.PARAM,Tt.PLAINTEXT,Tt.PRE,Tt.SCRIPT,Tt.SECTION,Tt.SELECT,Tt.SOURCE,Tt.STYLE,Tt.SUMMARY,Tt.TABLE,Tt.TBODY,Tt.TD,Tt.TEMPLATE,Tt.TEXTAREA,Tt.TFOOT,Tt.TH,Tt.THEAD,Tt.TITLE,Tt.TR,Tt.TRACK,Tt.UL,Tt.WBR,Tt.XMP]),[xt.MATHML]:new Set([Tt.MI,Tt.MO,Tt.MN,Tt.MS,Tt.MTEXT,Tt.ANNOTATION_XML]),[xt.SVG]:new Set([Tt.TITLE,Tt.FOREIGN_OBJECT,Tt.DESC]),[xt.XLINK]:new Set,[xt.XML]:new Set,[xt.XMLNS]:new Set},EI=new Set([Tt.H1,Tt.H2,Tt.H3,Tt.H4,Tt.H5,Tt.H6]);qe.STYLE,qe.SCRIPT,qe.XMP,qe.IFRAME,qe.NOEMBED,qe.NOFRAMES,qe.PLAINTEXT;var be;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(be||(be={}));const ni={DATA:be.DATA,RCDATA:be.RCDATA,RAWTEXT:be.RAWTEXT,SCRIPT_DATA:be.SCRIPT_DATA,PLAINTEXT:be.PLAINTEXT,CDATA_SECTION:be.CDATA_SECTION};function MGe(e){return e>=fe.DIGIT_0&&e<=fe.DIGIT_9}function Sv(e){return e>=fe.LATIN_CAPITAL_A&&e<=fe.LATIN_CAPITAL_Z}function DGe(e){return e>=fe.LATIN_SMALL_A&&e<=fe.LATIN_SMALL_Z}function Qh(e){return DGe(e)||Sv(e)}function oU(e){return Qh(e)||MGe(e)}function o_(e){return e+32}function Vre(e){return e===fe.SPACE||e===fe.LINE_FEED||e===fe.TABULATION||e===fe.FORM_FEED}function sU(e){return Vre(e)||e===fe.SOLIDUS||e===fe.GREATER_THAN_SIGN}function OGe(e){return e===fe.NULL?tt.nullCharacterReference:e>1114111?tt.characterReferenceOutsideUnicodeRange:zre(e)?tt.surrogateCharacterReference:Ure(e)?tt.noncharacterCharacterReference:jre(e)||e===fe.CARRIAGE_RETURN?tt.controlCharacterReference:null}class PGe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=be.DATA,this.returnState=be.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new xGe(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new AGe(wGe,(r,o)=>{this.preprocessor.pos=this.entityStartPos+o-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(tt.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(tt.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const o=OGe(r);o&&this._err(o,1)}}:void 0)}_err(t,n=0){var r,o;(o=(r=this.handler).onParseError)===null||o===void 0||o.call(r,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Ar.START_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Ar.END_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Ar.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Ar.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Hre(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const o=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);o[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(tt.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=$b(t.tagName),t.type===Ar.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(tt.endTagWithAttributes),t.selfClosing&&this._err(tt.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Ar.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Ar.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Ar.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Ar.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=Vre(t)?Ar.WHITESPACE_CHARACTER:t===fe.NULL?Ar.NULL_CHARACTER:Ar.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Ar.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=be.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Cf.Attribute:Cf.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===be.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===be.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===be.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case be.DATA:{this._stateData(t);break}case be.RCDATA:{this._stateRcdata(t);break}case be.RAWTEXT:{this._stateRawtext(t);break}case be.SCRIPT_DATA:{this._stateScriptData(t);break}case be.PLAINTEXT:{this._statePlaintext(t);break}case be.TAG_OPEN:{this._stateTagOpen(t);break}case be.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case be.TAG_NAME:{this._stateTagName(t);break}case be.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case be.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case be.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case be.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case be.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case be.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case be.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case be.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case be.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case be.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case be.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case be.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case be.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case be.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case be.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case be.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case be.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case be.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case be.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case be.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case be.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case be.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case be.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case be.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case be.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case be.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case be.BOGUS_COMMENT:{this._stateBogusComment(t);break}case be.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case be.COMMENT_START:{this._stateCommentStart(t);break}case be.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case be.COMMENT:{this._stateComment(t);break}case be.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case be.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case be.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case be.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case be.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case be.COMMENT_END:{this._stateCommentEnd(t);break}case be.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case be.DOCTYPE:{this._stateDoctype(t);break}case be.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case be.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case be.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case be.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case be.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case be.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case be.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case be.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case be.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case be.CDATA_SECTION:{this._stateCdataSection(t);break}case be.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case be.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case be.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case be.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case fe.LESS_THAN_SIGN:{this.state=be.TAG_OPEN;break}case fe.AMPERSAND:{this._startCharacterReference();break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this._emitCodePoint(t);break}case fe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case fe.AMPERSAND:{this._startCharacterReference();break}case fe.LESS_THAN_SIGN:{this.state=be.RCDATA_LESS_THAN_SIGN;break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this._emitChars(bs);break}case fe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case fe.LESS_THAN_SIGN:{this.state=be.RAWTEXT_LESS_THAN_SIGN;break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this._emitChars(bs);break}case fe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case fe.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_LESS_THAN_SIGN;break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this._emitChars(bs);break}case fe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case fe.NULL:{this._err(tt.unexpectedNullCharacter),this._emitChars(bs);break}case fe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Qh(t))this._createStartTagToken(),this.state=be.TAG_NAME,this._stateTagName(t);else switch(t){case fe.EXCLAMATION_MARK:{this.state=be.MARKUP_DECLARATION_OPEN;break}case fe.SOLIDUS:{this.state=be.END_TAG_OPEN;break}case fe.QUESTION_MARK:{this._err(tt.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=be.BOGUS_COMMENT,this._stateBogusComment(t);break}case fe.EOF:{this._err(tt.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(tt.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=be.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Qh(t))this._createEndTagToken(),this.state=be.TAG_NAME,this._stateTagName(t);else switch(t){case fe.GREATER_THAN_SIGN:{this._err(tt.missingEndTagName),this.state=be.DATA;break}case fe.EOF:{this._err(tt.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(tt.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=be.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:{this.state=be.BEFORE_ATTRIBUTE_NAME;break}case fe.SOLIDUS:{this.state=be.SELF_CLOSING_START_TAG;break}case fe.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentTagToken();break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),n.tagName+=bs;break}case fe.EOF:{this._err(tt.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Sv(t)?o_(t):t)}}_stateRcdataLessThanSign(t){t===fe.SOLIDUS?this.state=be.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=be.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Qh(t)?(this.state=be.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=be.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=be.BEFORE_ATTRIBUTE_NAME,!1;case fe.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=be.SELF_CLOSING_START_TAG,!1;case fe.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=be.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===fe.SOLIDUS?this.state=be.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=be.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Qh(t)?(this.state=be.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=be.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case fe.SOLIDUS:{this.state=be.SCRIPT_DATA_END_TAG_OPEN;break}case fe.EXCLAMATION_MARK:{this.state=be.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=be.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Qh(t)?(this.state=be.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===fe.HYPHEN_MINUS?(this.state=be.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===fe.HYPHEN_MINUS?(this.state=be.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=be.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case fe.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case fe.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this._emitChars(bs);break}case fe.EOF:{this._err(tt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case fe.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case fe.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_ESCAPED,this._emitChars(bs);break}case fe.EOF:{this._err(tt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case fe.HYPHEN_MINUS:{this._emitChars("-");break}case fe.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case fe.GREATER_THAN_SIGN:{this.state=be.SCRIPT_DATA,this._emitChars(">");break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_ESCAPED,this._emitChars(bs);break}case fe.EOF:{this._err(tt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===fe.SOLIDUS?this.state=be.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Qh(t)?(this._emitChars("<"),this.state=be.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Qh(t)?(this.state=be.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(il.SCRIPT,!1)&&sU(this.preprocessor.peek(il.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<il.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case fe.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case fe.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this._emitChars(bs);break}case fe.EOF:{this._err(tt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case fe.HYPHEN_MINUS:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case fe.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bs);break}case fe.EOF:{this._err(tt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case fe.HYPHEN_MINUS:{this._emitChars("-");break}case fe.LESS_THAN_SIGN:{this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case fe.GREATER_THAN_SIGN:{this.state=be.SCRIPT_DATA,this._emitChars(">");break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bs);break}case fe.EOF:{this._err(tt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===fe.SOLIDUS?(this.state=be.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(il.SCRIPT,!1)&&sU(this.preprocessor.peek(il.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<il.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=be.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=be.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:break;case fe.SOLIDUS:case fe.GREATER_THAN_SIGN:case fe.EOF:{this.state=be.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case fe.EQUALS_SIGN:{this._err(tt.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=be.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=be.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:case fe.SOLIDUS:case fe.GREATER_THAN_SIGN:case fe.EOF:{this._leaveAttrName(),this.state=be.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case fe.EQUALS_SIGN:{this._leaveAttrName(),this.state=be.BEFORE_ATTRIBUTE_VALUE;break}case fe.QUOTATION_MARK:case fe.APOSTROPHE:case fe.LESS_THAN_SIGN:{this._err(tt.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this.currentAttr.name+=bs;break}default:this.currentAttr.name+=String.fromCodePoint(Sv(t)?o_(t):t)}}_stateAfterAttributeName(t){switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:break;case fe.SOLIDUS:{this.state=be.SELF_CLOSING_START_TAG;break}case fe.EQUALS_SIGN:{this.state=be.BEFORE_ATTRIBUTE_VALUE;break}case fe.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentTagToken();break}case fe.EOF:{this._err(tt.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=be.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:break;case fe.QUOTATION_MARK:{this.state=be.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case fe.APOSTROPHE:{this.state=be.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case fe.GREATER_THAN_SIGN:{this._err(tt.missingAttributeValue),this.state=be.DATA,this.emitCurrentTagToken();break}default:this.state=be.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case fe.QUOTATION_MARK:{this.state=be.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case fe.AMPERSAND:{this._startCharacterReference();break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this.currentAttr.value+=bs;break}case fe.EOF:{this._err(tt.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case fe.APOSTROPHE:{this.state=be.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case fe.AMPERSAND:{this._startCharacterReference();break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this.currentAttr.value+=bs;break}case fe.EOF:{this._err(tt.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:{this._leaveAttrValue(),this.state=be.BEFORE_ATTRIBUTE_NAME;break}case fe.AMPERSAND:{this._startCharacterReference();break}case fe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=be.DATA,this.emitCurrentTagToken();break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),this.currentAttr.value+=bs;break}case fe.QUOTATION_MARK:case fe.APOSTROPHE:case fe.LESS_THAN_SIGN:case fe.EQUALS_SIGN:case fe.GRAVE_ACCENT:{this._err(tt.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case fe.EOF:{this._err(tt.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:{this._leaveAttrValue(),this.state=be.BEFORE_ATTRIBUTE_NAME;break}case fe.SOLIDUS:{this._leaveAttrValue(),this.state=be.SELF_CLOSING_START_TAG;break}case fe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=be.DATA,this.emitCurrentTagToken();break}case fe.EOF:{this._err(tt.eofInTag),this._emitEOFToken();break}default:this._err(tt.missingWhitespaceBetweenAttributes),this.state=be.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case fe.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=be.DATA,this.emitCurrentTagToken();break}case fe.EOF:{this._err(tt.eofInTag),this._emitEOFToken();break}default:this._err(tt.unexpectedSolidusInTag),this.state=be.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case fe.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentComment(n);break}case fe.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),n.data+=bs;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(il.DASH_DASH,!0)?(this._createCommentToken(il.DASH_DASH.length+1),this.state=be.COMMENT_START):this._consumeSequenceIfMatch(il.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(il.DOCTYPE.length+1),this.state=be.DOCTYPE):this._consumeSequenceIfMatch(il.CDATA_START,!0)?this.inForeignNode?this.state=be.CDATA_SECTION:(this._err(tt.cdataInHtmlContent),this._createCommentToken(il.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=be.BOGUS_COMMENT):this._ensureHibernation()||(this._err(tt.incorrectlyOpenedComment),this._createCommentToken(2),this.state=be.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case fe.HYPHEN_MINUS:{this.state=be.COMMENT_START_DASH;break}case fe.GREATER_THAN_SIGN:{this._err(tt.abruptClosingOfEmptyComment),this.state=be.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=be.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case fe.HYPHEN_MINUS:{this.state=be.COMMENT_END;break}case fe.GREATER_THAN_SIGN:{this._err(tt.abruptClosingOfEmptyComment),this.state=be.DATA,this.emitCurrentComment(n);break}case fe.EOF:{this._err(tt.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=be.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case fe.HYPHEN_MINUS:{this.state=be.COMMENT_END_DASH;break}case fe.LESS_THAN_SIGN:{n.data+="<",this.state=be.COMMENT_LESS_THAN_SIGN;break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),n.data+=bs;break}case fe.EOF:{this._err(tt.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case fe.EXCLAMATION_MARK:{n.data+="!",this.state=be.COMMENT_LESS_THAN_SIGN_BANG;break}case fe.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=be.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===fe.HYPHEN_MINUS?this.state=be.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=be.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===fe.HYPHEN_MINUS?this.state=be.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=be.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==fe.GREATER_THAN_SIGN&&t!==fe.EOF&&this._err(tt.nestedComment),this.state=be.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case fe.HYPHEN_MINUS:{this.state=be.COMMENT_END;break}case fe.EOF:{this._err(tt.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=be.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case fe.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentComment(n);break}case fe.EXCLAMATION_MARK:{this.state=be.COMMENT_END_BANG;break}case fe.HYPHEN_MINUS:{n.data+="-";break}case fe.EOF:{this._err(tt.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=be.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case fe.HYPHEN_MINUS:{n.data+="--!",this.state=be.COMMENT_END_DASH;break}case fe.GREATER_THAN_SIGN:{this._err(tt.incorrectlyClosedComment),this.state=be.DATA,this.emitCurrentComment(n);break}case fe.EOF:{this._err(tt.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=be.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:{this.state=be.BEFORE_DOCTYPE_NAME;break}case fe.GREATER_THAN_SIGN:{this.state=be.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case fe.EOF:{this._err(tt.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(tt.missingWhitespaceBeforeDoctypeName),this.state=be.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Sv(t))this._createDoctypeToken(String.fromCharCode(o_(t))),this.state=be.DOCTYPE_NAME;else switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:break;case fe.NULL:{this._err(tt.unexpectedNullCharacter),this._createDoctypeToken(bs),this.state=be.DOCTYPE_NAME;break}case fe.GREATER_THAN_SIGN:{this._err(tt.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case fe.EOF:{this._err(tt.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=be.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:{this.state=be.AFTER_DOCTYPE_NAME;break}case fe.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentDoctype(n);break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),n.name+=bs;break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Sv(t)?o_(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:break;case fe.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentDoctype(n);break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(il.PUBLIC,!1)?this.state=be.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(il.SYSTEM,!1)?this.state=be.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(tt.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:{this.state=be.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case fe.QUOTATION_MARK:{this._err(tt.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case fe.APOSTROPHE:{this._err(tt.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case fe.GREATER_THAN_SIGN:{this._err(tt.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(tt.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:break;case fe.QUOTATION_MARK:{n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case fe.APOSTROPHE:{n.publicId="",this.state=be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case fe.GREATER_THAN_SIGN:{this._err(tt.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(tt.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case fe.QUOTATION_MARK:{this.state=be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),n.publicId+=bs;break}case fe.GREATER_THAN_SIGN:{this._err(tt.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case fe.APOSTROPHE:{this.state=be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),n.publicId+=bs;break}case fe.GREATER_THAN_SIGN:{this._err(tt.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:{this.state=be.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case fe.GREATER_THAN_SIGN:{this.state=be.DATA,this.emitCurrentDoctype(n);break}case fe.QUOTATION_MARK:{this._err(tt.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case fe.APOSTROPHE:{this._err(tt.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(tt.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:break;case fe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=be.DATA;break}case fe.QUOTATION_MARK:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case fe.APOSTROPHE:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(tt.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:{this.state=be.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case fe.QUOTATION_MARK:{this._err(tt.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case fe.APOSTROPHE:{this._err(tt.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case fe.GREATER_THAN_SIGN:{this._err(tt.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(tt.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:break;case fe.QUOTATION_MARK:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case fe.APOSTROPHE:{n.systemId="",this.state=be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case fe.GREATER_THAN_SIGN:{this._err(tt.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.DATA,this.emitCurrentDoctype(n);break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(tt.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case fe.QUOTATION_MARK:{this.state=be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),n.systemId+=bs;break}case fe.GREATER_THAN_SIGN:{this._err(tt.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case fe.APOSTROPHE:{this.state=be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case fe.NULL:{this._err(tt.unexpectedNullCharacter),n.systemId+=bs;break}case fe.GREATER_THAN_SIGN:{this._err(tt.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=be.DATA;break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case fe.SPACE:case fe.LINE_FEED:case fe.TABULATION:case fe.FORM_FEED:break;case fe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=be.DATA;break}case fe.EOF:{this._err(tt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(tt.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=be.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case fe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=be.DATA;break}case fe.NULL:{this._err(tt.unexpectedNullCharacter);break}case fe.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case fe.RIGHT_SQUARE_BRACKET:{this.state=be.CDATA_SECTION_BRACKET;break}case fe.EOF:{this._err(tt.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===fe.RIGHT_SQUARE_BRACKET?this.state=be.CDATA_SECTION_END:(this._emitChars("]"),this.state=be.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case fe.GREATER_THAN_SIGN:{this.state=be.DATA;break}case fe.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=be.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(fe.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&oU(this.preprocessor.peek(1))?be.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){oU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===fe.SEMICOLON&&this._err(tt.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const qre=new Set([O.DD,O.DT,O.LI,O.OPTGROUP,O.OPTION,O.P,O.RB,O.RP,O.RT,O.RTC]),iU=new Set([...qre,O.CAPTION,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]),ZT=new Set([O.APPLET,O.CAPTION,O.HTML,O.MARQUEE,O.OBJECT,O.TABLE,O.TD,O.TEMPLATE,O.TH]),LGe=new Set([...ZT,O.OL,O.UL]),$Ge=new Set([...ZT,O.BUTTON]),aU=new Set([O.ANNOTATION_XML,O.MI,O.MN,O.MO,O.MS,O.MTEXT]),lU=new Set([O.DESC,O.FOREIGN_OBJECT,O.TITLE]),FGe=new Set([O.TR,O.TEMPLATE,O.HTML]),BGe=new Set([O.TBODY,O.TFOOT,O.THEAD,O.TEMPLATE,O.HTML]),zGe=new Set([O.TABLE,O.TEMPLATE,O.HTML]),jGe=new Set([O.TD,O.TH]);class UGe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=O.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===O.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===xt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const o=this._indexOf(t)+1;this.items.splice(o,0,n),this.tagIDs.splice(o,0,r),this.stackTop++,o===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,o===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==xt.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(EI,xt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(jGe,xt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(zGe,xt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(BGe,xt.HTML)}clearBackToTableRowContext(){this.clearBackTo(FGe,xt.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===O.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===O.HTML}hasInDynamicScope(t,n){for(let r=this.stackTop;r>=0;r--){const o=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case xt.HTML:{if(o===t)return!0;if(n.has(o))return!1;break}case xt.SVG:{if(lU.has(o))return!1;break}case xt.MATHML:{if(aU.has(o))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,ZT)}hasInListItemScope(t){return this.hasInDynamicScope(t,LGe)}hasInButtonScope(t){return this.hasInDynamicScope(t,$Ge)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case xt.HTML:{if(EI.has(n))return!0;if(ZT.has(n))return!1;break}case xt.SVG:{if(lU.has(n))return!1;break}case xt.MATHML:{if(aU.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===xt.HTML)switch(this.tagIDs[n]){case t:return!0;case O.TABLE:case O.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===xt.HTML)switch(this.tagIDs[t]){case O.TBODY:case O.THEAD:case O.TFOOT:return!0;case O.TABLE:case O.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===xt.HTML)switch(this.tagIDs[n]){case t:return!0;case O.OPTION:case O.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&qre.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&iU.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&iU.has(this.currentTagId);)this.pop()}}const dA=3;var fd;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(fd||(fd={}));const cU={type:fd.Marker};class HGe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],o=n.length,s=this.treeAdapter.getTagName(t),i=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===fd.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===s&&this.treeAdapter.getNamespaceURI(c)===i){const u=this.treeAdapter.getAttrList(c);u.length===o&&r.push({idx:a,attrs:u})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<dA)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<dA)return;const o=new Map(n.map(i=>[i.name,i.value]));let s=0;for(let i=0;i<r.length;i++){const a=r[i];a.attrs.every(l=>o.get(l.name)===l.value)&&(s+=1,s>=dA&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(cU)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:fd.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:fd.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(cU);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===fd.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===fd.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===fd.Element&&n.element===t)}}const e0={createDocument(){return{nodeName:"#document",mode:Sc.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const o=e.childNodes.find(s=>s.nodeName==="#documentType");if(o)o.name=t,o.publicId=n,o.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};e0.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(e0.isTextNode(n)){n.value+=t;return}}e0.appendChild(e,e0.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&e0.isTextNode(r)?r.value+=t:e0.insertBefore(e,e0.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Gre="html",VGe="about:legacy-compat",qGe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Wre=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],GGe=[...Wre,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],WGe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Yre=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],YGe=[...Yre,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function uU(e,t){return t.some(n=>e.startsWith(n))}function KGe(e){return e.name===Gre&&e.publicId===null&&(e.systemId===null||e.systemId===VGe)}function ZGe(e){if(e.name!==Gre)return Sc.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===qGe)return Sc.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),WGe.has(n))return Sc.QUIRKS;let r=t===null?GGe:Wre;if(uU(n,r))return Sc.QUIRKS;if(r=t===null?Yre:YGe,uU(n,r))return Sc.LIMITED_QUIRKS}return Sc.NO_QUIRKS}const dU={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},JGe="definitionurl",XGe="definitionURL",QGe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),eWe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:xt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:xt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:xt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:xt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:xt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:xt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:xt.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:xt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:xt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:xt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:xt.XMLNS}]]),tWe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),nWe=new Set([O.B,O.BIG,O.BLOCKQUOTE,O.BODY,O.BR,O.CENTER,O.CODE,O.DD,O.DIV,O.DL,O.DT,O.EM,O.EMBED,O.H1,O.H2,O.H3,O.H4,O.H5,O.H6,O.HEAD,O.HR,O.I,O.IMG,O.LI,O.LISTING,O.MENU,O.META,O.NOBR,O.OL,O.P,O.PRE,O.RUBY,O.S,O.SMALL,O.SPAN,O.STRONG,O.STRIKE,O.SUB,O.SUP,O.TABLE,O.TT,O.U,O.UL,O.VAR]);function rWe(e){const t=e.tagID;return t===O.FONT&&e.attrs.some(({name:r})=>r===am.COLOR||r===am.SIZE||r===am.FACE)||nWe.has(t)}function Kre(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===JGe){e.attrs[t].name=XGe;break}}function Zre(e){for(let t=0;t<e.attrs.length;t++){const n=QGe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function NM(e){for(let t=0;t<e.attrs.length;t++){const n=eWe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function oWe(e){const t=tWe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=$b(e.tagName))}function sWe(e,t){return t===xt.MATHML&&(e===O.MI||e===O.MO||e===O.MN||e===O.MS||e===O.MTEXT)}function iWe(e,t,n){if(t===xt.MATHML&&e===O.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===am.ENCODING){const o=n[r].value.toLowerCase();return o===dU.TEXT_HTML||o===dU.APPLICATION_XML}}return t===xt.SVG&&(e===O.FOREIGN_OBJECT||e===O.DESC||e===O.TITLE)}function aWe(e,t,n,r){return(!r||r===xt.HTML)&&iWe(e,t,n)||(!r||r===xt.MATHML)&&sWe(e,t)}const lWe="hidden",cWe=8,uWe=3;var Se;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Se||(Se={}));const dWe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Jre=new Set([O.TABLE,O.TBODY,O.TFOOT,O.THEAD,O.TR]),fU={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:e0,onParseError:null};class hU{constructor(t,n,r=null,o=null){this.fragmentContext=r,this.scriptHandler=o,this.currentToken=null,this.stopped=!1,this.insertionMode=Se.INITIAL,this.originalInsertionMode=Se.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...fU,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new PGe(this.options,this),this.activeFormattingElements=new HGe(this.treeAdapter),this.fragmentContextID=r?$b(this.treeAdapter.getTagName(r)):O.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new UGe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...fU,...n};t??(t=r.treeAdapter.createElement(qe.TEMPLATE,xt.HTML,[]));const o=r.treeAdapter.createElement("documentmock",xt.HTML,[]),s=new this(r,o,t);return s.fragmentContextID===O.TEMPLATE&&s.tmplInsertionModeStack.unshift(Se.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var o;if(!this.onParseError)return;const s=(o=t.location)!==null&&o!==void 0?o:dWe,i={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(i)}onItemPush(t,n,r){var o,s;(s=(o=this.treeAdapter).onItemPush)===null||s===void 0||s.call(o,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,o;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(o=(r=this.treeAdapter).onItemPop)===null||o===void 0||o.call(r,t,this.openElements.current),n){let s,i;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,i=this.fragmentContextID):{current:s,currentTagId:i}=this.openElements,this._setContextModes(s,i)}}_setContextModes(t,n){const r=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===xt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,xt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Se.TEXT}switchToPlaintextParsing(){this.insertionMode=Se.TEXT,this.originalInsertionMode=Se.IN_BODY,this.tokenizer.state=ni.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===qe.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==xt.HTML))switch(this.fragmentContextID){case O.TITLE:case O.TEXTAREA:{this.tokenizer.state=ni.RCDATA;break}case O.STYLE:case O.XMP:case O.IFRAME:case O.NOEMBED:case O.NOFRAMES:case O.NOSCRIPT:{this.tokenizer.state=ni.RAWTEXT;break}case O.SCRIPT:{this.tokenizer.state=ni.SCRIPT_DATA;break}case O.PLAINTEXT:{this.tokenizer.state=ni.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",o=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,o),t.location){const i=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));i&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,xt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,xt.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(qe.HTML,xt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,O.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const o=this.treeAdapter.getChildNodes(n),s=r?o.lastIndexOf(r):o.length,i=o[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(i)){const{endLine:l,endCol:c,endOffset:u}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(i,{endLine:l,endCol:c,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,o=this.treeAdapter.getTagName(t),s=n.type===Ar.END_TAG&&o===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===O.SVG&&this.treeAdapter.getTagName(n)===qe.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===xt.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===O.MGLYPH||t.tagID===O.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,xt.HTML)}_processToken(t){switch(t.type){case Ar.CHARACTER:{this.onCharacter(t);break}case Ar.NULL_CHARACTER:{this.onNullCharacter(t);break}case Ar.COMMENT:{this.onComment(t);break}case Ar.DOCTYPE:{this.onDoctype(t);break}case Ar.START_TAG:{this._processStartTag(t);break}case Ar.END_TAG:{this.onEndTag(t);break}case Ar.EOF:{this.onEof(t);break}case Ar.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const o=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return aWe(t,o,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(o=>o.type===fd.Marker||this.openElements.contains(o.element)),r=n===-1?t-1:n-1;for(let o=r;o>=0;o--){const s=this.activeFormattingElements.entries[o];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Se.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(O.P),this.openElements.popUntilTagNamePopped(O.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case O.TR:{this.insertionMode=Se.IN_ROW;return}case O.TBODY:case O.THEAD:case O.TFOOT:{this.insertionMode=Se.IN_TABLE_BODY;return}case O.CAPTION:{this.insertionMode=Se.IN_CAPTION;return}case O.COLGROUP:{this.insertionMode=Se.IN_COLUMN_GROUP;return}case O.TABLE:{this.insertionMode=Se.IN_TABLE;return}case O.BODY:{this.insertionMode=Se.IN_BODY;return}case O.FRAMESET:{this.insertionMode=Se.IN_FRAMESET;return}case O.SELECT:{this._resetInsertionModeForSelect(t);return}case O.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case O.HTML:{this.insertionMode=this.headElement?Se.AFTER_HEAD:Se.BEFORE_HEAD;return}case O.TD:case O.TH:{if(t>0){this.insertionMode=Se.IN_CELL;return}break}case O.HEAD:{if(t>0){this.insertionMode=Se.IN_HEAD;return}break}}this.insertionMode=Se.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===O.TEMPLATE)break;if(r===O.TABLE){this.insertionMode=Se.IN_SELECT_IN_TABLE;return}}this.insertionMode=Se.IN_SELECT}_isElementCausesFosterParenting(t){return Jre.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case O.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===xt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case O.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return RGe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){jYe(this,t);return}switch(this.insertionMode){case Se.INITIAL:{Xy(this,t);break}case Se.BEFORE_HTML:{Zv(this,t);break}case Se.BEFORE_HEAD:{Jv(this,t);break}case Se.IN_HEAD:{Xv(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{Qv(this,t);break}case Se.AFTER_HEAD:{ex(this,t);break}case Se.IN_BODY:case Se.IN_CAPTION:case Se.IN_CELL:case Se.IN_TEMPLATE:{Qre(this,t);break}case Se.TEXT:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{fA(this,t);break}case Se.IN_TABLE_TEXT:{soe(this,t);break}case Se.IN_COLUMN_GROUP:{JT(this,t);break}case Se.AFTER_BODY:{XT(this,t);break}case Se.AFTER_AFTER_BODY:{B_(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){zYe(this,t);return}switch(this.insertionMode){case Se.INITIAL:{Xy(this,t);break}case Se.BEFORE_HTML:{Zv(this,t);break}case Se.BEFORE_HEAD:{Jv(this,t);break}case Se.IN_HEAD:{Xv(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{Qv(this,t);break}case Se.AFTER_HEAD:{ex(this,t);break}case Se.TEXT:{this._insertCharacters(t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{fA(this,t);break}case Se.IN_COLUMN_GROUP:{JT(this,t);break}case Se.AFTER_BODY:{XT(this,t);break}case Se.AFTER_AFTER_BODY:{B_(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){_I(this,t);return}switch(this.insertionMode){case Se.INITIAL:case Se.BEFORE_HTML:case Se.BEFORE_HEAD:case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:case Se.IN_BODY:case Se.IN_TABLE:case Se.IN_CAPTION:case Se.IN_COLUMN_GROUP:case Se.IN_TABLE_BODY:case Se.IN_ROW:case Se.IN_CELL:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:case Se.IN_TEMPLATE:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:{_I(this,t);break}case Se.IN_TABLE_TEXT:{Qy(this,t);break}case Se.AFTER_BODY:{yWe(this,t);break}case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{vWe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Se.INITIAL:{xWe(this,t);break}case Se.BEFORE_HEAD:case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:{this._err(t,tt.misplacedDoctype);break}case Se.IN_TABLE_TEXT:{Qy(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,tt.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?UYe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Se.INITIAL:{Xy(this,t);break}case Se.BEFORE_HTML:{wWe(this,t);break}case Se.BEFORE_HEAD:{_We(this,t);break}case Se.IN_HEAD:{Iu(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{CWe(this,t);break}case Se.AFTER_HEAD:{AWe(this,t);break}case Se.IN_BODY:{_a(this,t);break}case Se.IN_TABLE:{db(this,t);break}case Se.IN_TABLE_TEXT:{Qy(this,t);break}case Se.IN_CAPTION:{SYe(this,t);break}case Se.IN_COLUMN_GROUP:{MM(this,t);break}case Se.IN_TABLE_BODY:{WC(this,t);break}case Se.IN_ROW:{YC(this,t);break}case Se.IN_CELL:{kYe(this,t);break}case Se.IN_SELECT:{loe(this,t);break}case Se.IN_SELECT_IN_TABLE:{NYe(this,t);break}case Se.IN_TEMPLATE:{RYe(this,t);break}case Se.AFTER_BODY:{DYe(this,t);break}case Se.IN_FRAMESET:{OYe(this,t);break}case Se.AFTER_FRAMESET:{LYe(this,t);break}case Se.AFTER_AFTER_BODY:{FYe(this,t);break}case Se.AFTER_AFTER_FRAMESET:{BYe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?HYe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Se.INITIAL:{Xy(this,t);break}case Se.BEFORE_HTML:{EWe(this,t);break}case Se.BEFORE_HEAD:{SWe(this,t);break}case Se.IN_HEAD:{TWe(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{kWe(this,t);break}case Se.AFTER_HEAD:{NWe(this,t);break}case Se.IN_BODY:{GC(this,t);break}case Se.TEXT:{pYe(this,t);break}case Se.IN_TABLE:{Yx(this,t);break}case Se.IN_TABLE_TEXT:{Qy(this,t);break}case Se.IN_CAPTION:{TYe(this,t);break}case Se.IN_COLUMN_GROUP:{CYe(this,t);break}case Se.IN_TABLE_BODY:{SI(this,t);break}case Se.IN_ROW:{aoe(this,t);break}case Se.IN_CELL:{AYe(this,t);break}case Se.IN_SELECT:{coe(this,t);break}case Se.IN_SELECT_IN_TABLE:{IYe(this,t);break}case Se.IN_TEMPLATE:{MYe(this,t);break}case Se.AFTER_BODY:{doe(this,t);break}case Se.IN_FRAMESET:{PYe(this,t);break}case Se.AFTER_FRAMESET:{$Ye(this,t);break}case Se.AFTER_AFTER_BODY:{B_(this,t);break}}}onEof(t){switch(this.insertionMode){case Se.INITIAL:{Xy(this,t);break}case Se.BEFORE_HTML:{Zv(this,t);break}case Se.BEFORE_HEAD:{Jv(this,t);break}case Se.IN_HEAD:{Xv(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{Qv(this,t);break}case Se.AFTER_HEAD:{ex(this,t);break}case Se.IN_BODY:case Se.IN_TABLE:case Se.IN_CAPTION:case Se.IN_COLUMN_GROUP:case Se.IN_TABLE_BODY:case Se.IN_ROW:case Se.IN_CELL:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:{roe(this,t);break}case Se.TEXT:{mYe(this,t);break}case Se.IN_TABLE_TEXT:{Qy(this,t);break}case Se.IN_TEMPLATE:{uoe(this,t);break}case Se.AFTER_BODY:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{RM(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===fe.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:case Se.TEXT:case Se.IN_COLUMN_GROUP:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:{this._insertCharacters(t);break}case Se.IN_BODY:case Se.IN_CAPTION:case Se.IN_CELL:case Se.IN_TEMPLATE:case Se.AFTER_BODY:case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{Xre(this,t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{fA(this,t);break}case Se.IN_TABLE_TEXT:{ooe(this,t);break}}}}function fWe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):noe(e,t),n}function hWe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const o=e.openElements.items[r];if(o===t.element)break;e._isSpecialElement(o,e.openElements.tagIDs[r])&&(n=o)}return n||(e.openElements.shortenToLength(Math.max(r,0)),e.activeFormattingElements.removeEntry(t)),n}function pWe(e,t,n){let r=t,o=e.openElements.getCommonAncestor(t);for(let s=0,i=o;i!==n;s++,i=o){o=e.openElements.getCommonAncestor(i);const a=e.activeFormattingElements.getElementEntry(i),l=a&&s>=uWe;!a||l?(l&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(i)):(i=mWe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(i,r),r=i)}return r}function mWe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function gWe(e,t,n){const r=e.treeAdapter.getTagName(t),o=$b(r);if(e._isElementCausesFosterParenting(o))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);o===O.TEMPLATE&&s===xt.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function bWe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:o}=n,s=e.treeAdapter.createElement(o.tagName,r,o.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,o),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,o.tagID)}function IM(e,t){for(let n=0;n<cWe;n++){const r=fWe(e,t);if(!r)break;const o=hWe(e,r);if(!o)break;e.activeFormattingElements.bookmark=r;const s=pWe(e,o,r.element),i=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),i&&gWe(e,i,s),bWe(e,o,r)}}function _I(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function yWe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function vWe(e,t){e._appendCommentNode(t,e.document)}function RM(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],o=e.treeAdapter.getNodeSourceCodeLocation(r);if(o&&!o.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],i=e.treeAdapter.getNodeSourceCodeLocation(s);i&&!i.endTag&&e._setEndLocation(s,t)}}}}function xWe(e,t){e._setDocumentType(t);const n=t.forceQuirks?Sc.QUIRKS:ZGe(t);KGe(t)||e._err(t,tt.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Se.BEFORE_HTML}function Xy(e,t){e._err(t,tt.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Sc.QUIRKS),e.insertionMode=Se.BEFORE_HTML,e._processToken(t)}function wWe(e,t){t.tagID===O.HTML?(e._insertElement(t,xt.HTML),e.insertionMode=Se.BEFORE_HEAD):Zv(e,t)}function EWe(e,t){const n=t.tagID;(n===O.HTML||n===O.HEAD||n===O.BODY||n===O.BR)&&Zv(e,t)}function Zv(e,t){e._insertFakeRootElement(),e.insertionMode=Se.BEFORE_HEAD,e._processToken(t)}function _We(e,t){switch(t.tagID){case O.HTML:{_a(e,t);break}case O.HEAD:{e._insertElement(t,xt.HTML),e.headElement=e.openElements.current,e.insertionMode=Se.IN_HEAD;break}default:Jv(e,t)}}function SWe(e,t){const n=t.tagID;n===O.HEAD||n===O.BODY||n===O.HTML||n===O.BR?Jv(e,t):e._err(t,tt.endTagWithoutMatchingOpenElement)}function Jv(e,t){e._insertFakeElement(qe.HEAD,O.HEAD),e.headElement=e.openElements.current,e.insertionMode=Se.IN_HEAD,e._processToken(t)}function Iu(e,t){switch(t.tagID){case O.HTML:{_a(e,t);break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:{e._appendElement(t,xt.HTML),t.ackSelfClosing=!0;break}case O.TITLE:{e._switchToTextParsing(t,ni.RCDATA);break}case O.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ni.RAWTEXT):(e._insertElement(t,xt.HTML),e.insertionMode=Se.IN_HEAD_NO_SCRIPT);break}case O.NOFRAMES:case O.STYLE:{e._switchToTextParsing(t,ni.RAWTEXT);break}case O.SCRIPT:{e._switchToTextParsing(t,ni.SCRIPT_DATA);break}case O.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Se.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Se.IN_TEMPLATE);break}case O.HEAD:{e._err(t,tt.misplacedStartTagForHeadElement);break}default:Xv(e,t)}}function TWe(e,t){switch(t.tagID){case O.HEAD:{e.openElements.pop(),e.insertionMode=Se.AFTER_HEAD;break}case O.BODY:case O.BR:case O.HTML:{Xv(e,t);break}case O.TEMPLATE:{jm(e,t);break}default:e._err(t,tt.endTagWithoutMatchingOpenElement)}}function jm(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==O.TEMPLATE&&e._err(t,tt.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,tt.endTagWithoutMatchingOpenElement)}function Xv(e,t){e.openElements.pop(),e.insertionMode=Se.AFTER_HEAD,e._processToken(t)}function CWe(e,t){switch(t.tagID){case O.HTML:{_a(e,t);break}case O.BASEFONT:case O.BGSOUND:case O.HEAD:case O.LINK:case O.META:case O.NOFRAMES:case O.STYLE:{Iu(e,t);break}case O.NOSCRIPT:{e._err(t,tt.nestedNoscriptInHead);break}default:Qv(e,t)}}function kWe(e,t){switch(t.tagID){case O.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Se.IN_HEAD;break}case O.BR:{Qv(e,t);break}default:e._err(t,tt.endTagWithoutMatchingOpenElement)}}function Qv(e,t){const n=t.type===Ar.EOF?tt.openElementsLeftAfterEof:tt.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Se.IN_HEAD,e._processToken(t)}function AWe(e,t){switch(t.tagID){case O.HTML:{_a(e,t);break}case O.BODY:{e._insertElement(t,xt.HTML),e.framesetOk=!1,e.insertionMode=Se.IN_BODY;break}case O.FRAMESET:{e._insertElement(t,xt.HTML),e.insertionMode=Se.IN_FRAMESET;break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{e._err(t,tt.abandonedHeadElementChild),e.openElements.push(e.headElement,O.HEAD),Iu(e,t),e.openElements.remove(e.headElement);break}case O.HEAD:{e._err(t,tt.misplacedStartTagForHeadElement);break}default:ex(e,t)}}function NWe(e,t){switch(t.tagID){case O.BODY:case O.HTML:case O.BR:{ex(e,t);break}case O.TEMPLATE:{jm(e,t);break}default:e._err(t,tt.endTagWithoutMatchingOpenElement)}}function ex(e,t){e._insertFakeElement(qe.BODY,O.BODY),e.insertionMode=Se.IN_BODY,qC(e,t)}function qC(e,t){switch(t.type){case Ar.CHARACTER:{Qre(e,t);break}case Ar.WHITESPACE_CHARACTER:{Xre(e,t);break}case Ar.COMMENT:{_I(e,t);break}case Ar.START_TAG:{_a(e,t);break}case Ar.END_TAG:{GC(e,t);break}case Ar.EOF:{roe(e,t);break}}}function Xre(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Qre(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function IWe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function RWe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function MWe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,xt.HTML),e.insertionMode=Se.IN_FRAMESET)}function DWe(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,xt.HTML)}function OWe(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&EI.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,xt.HTML)}function PWe(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,xt.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function LWe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,xt.HTML),n||(e.formElement=e.openElements.current))}function $We(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const o=e.openElements.tagIDs[r];if(n===O.LI&&o===O.LI||(n===O.DD||n===O.DT)&&(o===O.DD||o===O.DT)){e.openElements.generateImpliedEndTagsWithExclusion(o),e.openElements.popUntilTagNamePopped(o);break}if(o!==O.ADDRESS&&o!==O.DIV&&o!==O.P&&e._isSpecialElement(e.openElements.items[r],o))break}e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,xt.HTML)}function FWe(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,xt.HTML),e.tokenizer.state=ni.PLAINTEXT}function BWe(e,t){e.openElements.hasInScope(O.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,xt.HTML),e.framesetOk=!1}function zWe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(qe.A);n&&(IM(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,xt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function jWe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,xt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function UWe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(O.NOBR)&&(IM(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,xt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function HWe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,xt.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function VWe(e,t){e.treeAdapter.getDocumentMode(e.document)!==Sc.QUIRKS&&e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,xt.HTML),e.framesetOk=!1,e.insertionMode=Se.IN_TABLE}function eoe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,xt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function toe(e){const t=Hre(e,am.TYPE);return t!=null&&t.toLowerCase()===lWe}function qWe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,xt.HTML),toe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function GWe(e,t){e._appendElement(t,xt.HTML),t.ackSelfClosing=!0}function WWe(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._appendElement(t,xt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function YWe(e,t){t.tagName=qe.IMG,t.tagID=O.IMG,eoe(e,t)}function KWe(e,t){e._insertElement(t,xt.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ni.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Se.TEXT}function ZWe(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ni.RAWTEXT)}function JWe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ni.RAWTEXT)}function pU(e,t){e._switchToTextParsing(t,ni.RAWTEXT)}function XWe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,xt.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Se.IN_TABLE||e.insertionMode===Se.IN_CAPTION||e.insertionMode===Se.IN_TABLE_BODY||e.insertionMode===Se.IN_ROW||e.insertionMode===Se.IN_CELL?Se.IN_SELECT_IN_TABLE:Se.IN_SELECT}function QWe(e,t){e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,xt.HTML)}function eYe(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,xt.HTML)}function tYe(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(O.RTC),e._insertElement(t,xt.HTML)}function nYe(e,t){e._reconstructActiveFormattingElements(),Kre(t),NM(t),t.selfClosing?e._appendElement(t,xt.MATHML):e._insertElement(t,xt.MATHML),t.ackSelfClosing=!0}function rYe(e,t){e._reconstructActiveFormattingElements(),Zre(t),NM(t),t.selfClosing?e._appendElement(t,xt.SVG):e._insertElement(t,xt.SVG),t.ackSelfClosing=!0}function mU(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,xt.HTML)}function _a(e,t){switch(t.tagID){case O.I:case O.S:case O.B:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.SMALL:case O.STRIKE:case O.STRONG:{jWe(e,t);break}case O.A:{zWe(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{OWe(e,t);break}case O.P:case O.DL:case O.OL:case O.UL:case O.DIV:case O.DIR:case O.NAV:case O.MAIN:case O.MENU:case O.ASIDE:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.DETAILS:case O.ADDRESS:case O.ARTICLE:case O.SEARCH:case O.SECTION:case O.SUMMARY:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{DWe(e,t);break}case O.LI:case O.DD:case O.DT:{$We(e,t);break}case O.BR:case O.IMG:case O.WBR:case O.AREA:case O.EMBED:case O.KEYGEN:{eoe(e,t);break}case O.HR:{WWe(e,t);break}case O.RB:case O.RTC:{eYe(e,t);break}case O.RT:case O.RP:{tYe(e,t);break}case O.PRE:case O.LISTING:{PWe(e,t);break}case O.XMP:{ZWe(e,t);break}case O.SVG:{rYe(e,t);break}case O.HTML:{IWe(e,t);break}case O.BASE:case O.LINK:case O.META:case O.STYLE:case O.TITLE:case O.SCRIPT:case O.BGSOUND:case O.BASEFONT:case O.TEMPLATE:{Iu(e,t);break}case O.BODY:{RWe(e,t);break}case O.FORM:{LWe(e,t);break}case O.NOBR:{UWe(e,t);break}case O.MATH:{nYe(e,t);break}case O.TABLE:{VWe(e,t);break}case O.INPUT:{qWe(e,t);break}case O.PARAM:case O.TRACK:case O.SOURCE:{GWe(e,t);break}case O.IMAGE:{YWe(e,t);break}case O.BUTTON:{BWe(e,t);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{HWe(e,t);break}case O.IFRAME:{JWe(e,t);break}case O.SELECT:{XWe(e,t);break}case O.OPTION:case O.OPTGROUP:{QWe(e,t);break}case O.NOEMBED:case O.NOFRAMES:{pU(e,t);break}case O.FRAMESET:{MWe(e,t);break}case O.TEXTAREA:{KWe(e,t);break}case O.NOSCRIPT:{e.options.scriptingEnabled?pU(e,t):mU(e,t);break}case O.PLAINTEXT:{FWe(e,t);break}case O.COL:case O.TH:case O.TD:case O.TR:case O.HEAD:case O.FRAME:case O.TBODY:case O.TFOOT:case O.THEAD:case O.CAPTION:case O.COLGROUP:break;default:mU(e,t)}}function oYe(e,t){if(e.openElements.hasInScope(O.BODY)&&(e.insertionMode=Se.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function sYe(e,t){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=Se.AFTER_BODY,doe(e,t))}function iYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function aYe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(O.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(O.FORM):n&&e.openElements.remove(n))}function lYe(e){e.openElements.hasInButtonScope(O.P)||e._insertFakeElement(qe.P,O.P),e._closePElement()}function cYe(e){e.openElements.hasInListItemScope(O.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(O.LI),e.openElements.popUntilTagNamePopped(O.LI))}function uYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function dYe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function fYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function hYe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(qe.BR,O.BR),e.openElements.pop(),e.framesetOk=!1}function noe(e,t){const n=t.tagName,r=t.tagID;for(let o=e.openElements.stackTop;o>0;o--){const s=e.openElements.items[o],i=e.openElements.tagIDs[o];if(r===i&&(r!==O.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=o&&e.openElements.shortenToLength(o);break}if(e._isSpecialElement(s,i))break}}function GC(e,t){switch(t.tagID){case O.A:case O.B:case O.I:case O.S:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.NOBR:case O.SMALL:case O.STRIKE:case O.STRONG:{IM(e,t);break}case O.P:{lYe(e);break}case O.DL:case O.UL:case O.OL:case O.DIR:case O.DIV:case O.NAV:case O.PRE:case O.MAIN:case O.MENU:case O.ASIDE:case O.BUTTON:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.ADDRESS:case O.ARTICLE:case O.DETAILS:case O.SEARCH:case O.SECTION:case O.SUMMARY:case O.LISTING:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{iYe(e,t);break}case O.LI:{cYe(e);break}case O.DD:case O.DT:{uYe(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{dYe(e);break}case O.BR:{hYe(e);break}case O.BODY:{oYe(e,t);break}case O.HTML:{sYe(e,t);break}case O.FORM:{aYe(e);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{fYe(e,t);break}case O.TEMPLATE:{jm(e,t);break}default:noe(e,t)}}function roe(e,t){e.tmplInsertionModeStack.length>0?uoe(e,t):RM(e,t)}function pYe(e,t){var n;t.tagID===O.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function mYe(e,t){e._err(t,tt.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function fA(e,t){if(e.openElements.currentTagId!==void 0&&Jre.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Se.IN_TABLE_TEXT,t.type){case Ar.CHARACTER:{soe(e,t);break}case Ar.WHITESPACE_CHARACTER:{ooe(e,t);break}}else Uw(e,t)}function gYe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,xt.HTML),e.insertionMode=Se.IN_CAPTION}function bYe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,xt.HTML),e.insertionMode=Se.IN_COLUMN_GROUP}function yYe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(qe.COLGROUP,O.COLGROUP),e.insertionMode=Se.IN_COLUMN_GROUP,MM(e,t)}function vYe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,xt.HTML),e.insertionMode=Se.IN_TABLE_BODY}function xYe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(qe.TBODY,O.TBODY),e.insertionMode=Se.IN_TABLE_BODY,WC(e,t)}function wYe(e,t){e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function EYe(e,t){toe(t)?e._appendElement(t,xt.HTML):Uw(e,t),t.ackSelfClosing=!0}function _Ye(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,xt.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function db(e,t){switch(t.tagID){case O.TD:case O.TH:case O.TR:{xYe(e,t);break}case O.STYLE:case O.SCRIPT:case O.TEMPLATE:{Iu(e,t);break}case O.COL:{yYe(e,t);break}case O.FORM:{_Ye(e,t);break}case O.TABLE:{wYe(e,t);break}case O.TBODY:case O.TFOOT:case O.THEAD:{vYe(e,t);break}case O.INPUT:{EYe(e,t);break}case O.CAPTION:{gYe(e,t);break}case O.COLGROUP:{bYe(e,t);break}default:Uw(e,t)}}function Yx(e,t){switch(t.tagID){case O.TABLE:{e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode());break}case O.TEMPLATE:{jm(e,t);break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:Uw(e,t)}}function Uw(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,qC(e,t),e.fosterParentingEnabled=n}function ooe(e,t){e.pendingCharacterTokens.push(t)}function soe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Qy(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Uw(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const ioe=new Set([O.CAPTION,O.COL,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]);function SYe(e,t){const n=t.tagID;ioe.has(n)?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_TABLE,db(e,t)):_a(e,t)}function TYe(e,t){const n=t.tagID;switch(n){case O.CAPTION:case O.TABLE:{e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_TABLE,n===O.TABLE&&Yx(e,t));break}case O.BODY:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:GC(e,t)}}function MM(e,t){switch(t.tagID){case O.HTML:{_a(e,t);break}case O.COL:{e._appendElement(t,xt.HTML),t.ackSelfClosing=!0;break}case O.TEMPLATE:{Iu(e,t);break}default:JT(e,t)}}function CYe(e,t){switch(t.tagID){case O.COLGROUP:{e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=Se.IN_TABLE);break}case O.TEMPLATE:{jm(e,t);break}case O.COL:break;default:JT(e,t)}}function JT(e,t){e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=Se.IN_TABLE,e._processToken(t))}function WC(e,t){switch(t.tagID){case O.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,xt.HTML),e.insertionMode=Se.IN_ROW;break}case O.TH:case O.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(qe.TR,O.TR),e.insertionMode=Se.IN_ROW,YC(e,t);break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE,db(e,t));break}default:db(e,t)}}function SI(e,t){const n=t.tagID;switch(t.tagID){case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE);break}case O.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE,Yx(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:case O.TR:break;default:Yx(e,t)}}function YC(e,t){switch(t.tagID){case O.TH:case O.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,xt.HTML),e.insertionMode=Se.IN_CELL,e.activeFormattingElements.insertMarker();break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,WC(e,t));break}default:db(e,t)}}function aoe(e,t){switch(t.tagID){case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY);break}case O.TABLE:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,SI(e,t));break}case O.TBODY:case O.TFOOT:case O.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(O.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,SI(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:break;default:Yx(e,t)}}function kYe(e,t){const n=t.tagID;ioe.has(n)?(e.openElements.hasInTableScope(O.TD)||e.openElements.hasInTableScope(O.TH))&&(e._closeTableCell(),YC(e,t)):_a(e,t)}function AYe(e,t){const n=t.tagID;switch(n){case O.TD:case O.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_ROW);break}case O.TABLE:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),aoe(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:break;default:GC(e,t)}}function loe(e,t){switch(t.tagID){case O.HTML:{_a(e,t);break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._insertElement(t,xt.HTML);break}case O.OPTGROUP:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop(),e._insertElement(t,xt.HTML);break}case O.HR:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop(),e._appendElement(t,xt.HTML),t.ackSelfClosing=!0;break}case O.INPUT:case O.KEYGEN:case O.TEXTAREA:case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),t.tagID!==O.SELECT&&e._processStartTag(t));break}case O.SCRIPT:case O.TEMPLATE:{Iu(e,t);break}}}function coe(e,t){switch(t.tagID){case O.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===O.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===O.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop();break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop();break}case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode());break}case O.TEMPLATE:{jm(e,t);break}}}function NYe(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processStartTag(t)):loe(e,t)}function IYe(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e.onEndTag(t)):coe(e,t)}function RYe(e,t){switch(t.tagID){case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{Iu(e,t);break}case O.CAPTION:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.tmplInsertionModeStack[0]=Se.IN_TABLE,e.insertionMode=Se.IN_TABLE,db(e,t);break}case O.COL:{e.tmplInsertionModeStack[0]=Se.IN_COLUMN_GROUP,e.insertionMode=Se.IN_COLUMN_GROUP,MM(e,t);break}case O.TR:{e.tmplInsertionModeStack[0]=Se.IN_TABLE_BODY,e.insertionMode=Se.IN_TABLE_BODY,WC(e,t);break}case O.TD:case O.TH:{e.tmplInsertionModeStack[0]=Se.IN_ROW,e.insertionMode=Se.IN_ROW,YC(e,t);break}default:e.tmplInsertionModeStack[0]=Se.IN_BODY,e.insertionMode=Se.IN_BODY,_a(e,t)}}function MYe(e,t){t.tagID===O.TEMPLATE&&jm(e,t)}function uoe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):RM(e,t)}function DYe(e,t){t.tagID===O.HTML?_a(e,t):XT(e,t)}function doe(e,t){var n;if(t.tagID===O.HTML){if(e.fragmentContext||(e.insertionMode=Se.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===O.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else XT(e,t)}function XT(e,t){e.insertionMode=Se.IN_BODY,qC(e,t)}function OYe(e,t){switch(t.tagID){case O.HTML:{_a(e,t);break}case O.FRAMESET:{e._insertElement(t,xt.HTML);break}case O.FRAME:{e._appendElement(t,xt.HTML),t.ackSelfClosing=!0;break}case O.NOFRAMES:{Iu(e,t);break}}}function PYe(e,t){t.tagID===O.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==O.FRAMESET&&(e.insertionMode=Se.AFTER_FRAMESET))}function LYe(e,t){switch(t.tagID){case O.HTML:{_a(e,t);break}case O.NOFRAMES:{Iu(e,t);break}}}function $Ye(e,t){t.tagID===O.HTML&&(e.insertionMode=Se.AFTER_AFTER_FRAMESET)}function FYe(e,t){t.tagID===O.HTML?_a(e,t):B_(e,t)}function B_(e,t){e.insertionMode=Se.IN_BODY,qC(e,t)}function BYe(e,t){switch(t.tagID){case O.HTML:{_a(e,t);break}case O.NOFRAMES:{Iu(e,t);break}}}function zYe(e,t){t.chars=bs,e._insertCharacters(t)}function jYe(e,t){e._insertCharacters(t),e.framesetOk=!1}function foe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==xt.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function UYe(e,t){if(rWe(t))foe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===xt.MATHML?Kre(t):r===xt.SVG&&(oWe(t),Zre(t)),NM(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function HYe(e,t){if(t.tagID===O.P||t.tagID===O.BR){foe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===xt.HTML){e._endTagOutsideForeignContent(t);break}const o=e.treeAdapter.getTagName(r);if(o.toLowerCase()===t.tagName){t.tagName=o,e.openElements.shortenToLength(n);break}}}qe.AREA,qe.BASE,qe.BASEFONT,qe.BGSOUND,qe.BR,qe.COL,qe.EMBED,qe.FRAME,qe.HR,qe.IMG,qe.INPUT,qe.KEYGEN,qe.LINK,qe.META,qe.PARAM,qe.SOURCE,qe.TRACK,qe.WBR;const KC=hoe("end"),Rd=hoe("start");function hoe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function VYe(e){const t=Rd(e),n=KC(e);if(t&&n)return{start:t,end:n}}const qYe=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,GYe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),gU={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function poe(e,t){const n=nKe(e),r=V7("type",{handlers:{root:WYe,element:YYe,text:KYe,comment:goe,doctype:ZYe,raw:XYe},unknown:QYe}),o={parser:n?new hU(gU):hU.getFragmentParser(void 0,gU),handle(a){r(a,o)},stitches:!1,options:t||{}};r(e,o),Fb(o,Rd());const s=n?o.parser.document:o.parser.getFragment(),i=Wqe(s,{file:o.options.file});return o.stitches&&lb(i,"comment",function(a,l,c){const u=a;if(u.value.stitch&&c&&l!==void 0){const f=c.children;return f[l]=u.value.stitch,l}}),i.type==="root"&&i.children.length===1&&i.children[0].type===e.type?i.children[0]:i}function moe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function WYe(e,t){moe(e.children,t)}function YYe(e,t){eKe(e,t),moe(e.children,t),tKe(e,t)}function KYe(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:Ar.CHARACTER,chars:e.value,location:Hw(e)};Fb(t,Rd(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function ZYe(e,t){const n={type:Ar.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Hw(e)};Fb(t,Rd(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function JYe(e,t){t.stitches=!0;const n=rKe(e);if("children"in e&&"children"in n){const r=poe({type:"root",children:e.children},t.options);n.children=r.children}goe({type:"comment",value:{stitch:n}},t)}function goe(e,t){const n=e.value,r={type:Ar.COMMENT,data:n,location:Hw(e)};Fb(t,Rd(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function XYe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,boe(t,Rd(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(qYe,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function QYe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))JYe(n,t);else{let r="";throw GYe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Fb(e,t){boe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ni.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function boe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function eKe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ni.PLAINTEXT)return;Fb(t,Rd(e));const r=t.parser.openElements.current;let o="namespaceURI"in r?r.namespaceURI:gd.html;o===gd.html&&n==="svg"&&(o=gd.svg);const s=lGe({...e,children:[]},{space:o===gd.svg?"svg":"html"}),i={type:Ar.START_TAG,tagName:n,tagID:$b(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:Hw(e)};t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function tKe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&jte.includes(n)||t.parser.tokenizer.state===ni.PLAINTEXT)return;Fb(t,KC(e));const r={type:Ar.END_TAG,tagName:n,tagID:$b(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Hw(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ni.RCDATA||t.parser.tokenizer.state===ni.RAWTEXT||t.parser.tokenizer.state===ni.SCRIPT_DATA)&&(t.parser.tokenizer.state=ni.DATA)}function nKe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function Hw(e){const t=Rd(e)||{line:void 0,column:void 0,offset:void 0},n=KC(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function rKe(e){return"children"in e?ub({...e,children:[]}):ub(e)}function oKe(e){return function(t,n){return poe(t,{...e,file:n})}}const Pf={eof:null,asterisk:42,underscore:95,tilde:126},fb={attentionSideAfter:2,characterGroupPunctuation:2,characterGroupWhitespace:1},sd={data:"data",characterEscape:"characterEscape",emphasis:"emphasis",emphasisSequence:"emphasisSequence",emphasisText:"emphasisText",strong:"strong",strongSequence:"strongSequence",strongText:"strongText"},La=J0(/[A-Za-z]/),xa=J0(/[\dA-Za-z]/),sKe=J0(/[#-'*+\--9=?A-Z^-~]/);function QT(e){return e!==null&&(e<32||e===127)}const TI=J0(/\d/),iKe=J0(/[\dA-Fa-f]/),aKe=J0(/[!-/:-@[-`{-~]/);function Cn(e){return e!==null&&e<-2}function Fo(e){return e!==null&&(e<0||e===32)}function Pr(e){return e===-2||e===-1||e===32}const ZC=J0(new RegExp("\\p{P}|\\p{S}","u")),Em=J0(/\s/);function J0(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function lKe(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function cKe(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function uKe(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9776&&e<=9783||e>=9800&&e<=9811||e===9855||e>=9866&&e<=9871||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e>=94192&&e<=94198||e>=94208&&e<=101589||e>=101631&&e<=101662||e>=101760&&e<=101874||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128728||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129674||e>=129678&&e<=129734||e===129736||e>=129741&&e<=129756||e>=129759&&e<=129770||e>=129775&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function dKe(e){return lKe(e)?"ambiguous":cKe(e)?"fullwidth":e===8361||e>=65377&&e<=65470||e>=65474&&e<=65479||e>=65482&&e<=65487||e>=65490&&e<=65495||e>=65498&&e<=65500||e>=65512&&e<=65518?"halfwidth":e>=32&&e<=126||e===162||e===163||e===165||e===166||e===172||e===175||e>=10214&&e<=10221||e===10629||e===10630?"narrow":uKe(e)?"wide":"neutral"}function fKe(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function hKe(e){return fKe(e),dKe(e)}var pKe=Object.defineProperty,mKe=(e,t,n)=>t in e?pKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gKe=(e,t,n)=>mKe(e,t+"",n);function bKe(e){return new RegExp("^\\p{Emoji_Presentation}","u").test(String.fromCodePoint(e))}function yKe(e){if(!e||e<4352)return!1;switch(hKe(e)){case"fullwidth":case"halfwidth":return!0;case"wide":return!bKe(e);case"narrow":return!1;case"ambiguous":return 917760<=e&&e<=917999?null:!1;case"neutral":return new RegExp("^\\p{sc=Hangul}","u").test(String.fromCodePoint(e))}}function vKe(e,t){return t!==65025||!e||e<8216?!1:e===8216||e===8217||e===8220||e===8221}function xKe(e){return e!==null&&e>=65024&&e<=65038}var wKe=yoe(new RegExp("\\p{P}|\\p{S}","u")),EKe=yoe(/\s/);function yoe(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCodePoint(n))}}var Jl;(e=>{e.spaceOrPunctuation=3,e.cjk=4096,e.cjkPunctuation=4098,e.ivs=8192,e.cjkOrIvs=12288,e.nonEmojiGeneralUseVS=16384,e.variationSelector=24576,e.ivsToCjkRightShift=1})(Jl||(Jl={}));function L1(e){if(e===Pf.eof||Fo(e)||EKe(e))return fb.characterGroupWhitespace;let t=0;if(e>=4352){if(xKe(e))return Jl.nonEmojiGeneralUseVS;switch(yKe(e)){case null:return Jl.ivs;case!0:t|=Jl.cjk;break}}return wKe(e)&&(t|=fb.characterGroupPunctuation),t}function voe(e,t,n){if(!CKe(e))return e;const r=t(),o=L1(r);return!r||Kx(o)?e:vKe(r,n)?Jl.cjkPunctuation:_Ke(o)}function _Ke(e){return e&~Jl.ivs}function Kx(e){return!!(e&fb.characterGroupWhitespace)}function e4(e){return(e&Jl.cjkPunctuation)===fb.characterGroupPunctuation}function CI(e){return!!(e&Jl.cjk)}function SKe(e){return e===Jl.ivs}function TKe(e){return!!(e&Jl.cjkOrIvs)}function CKe(e){return e===Jl.nonEmojiGeneralUseVS}function bU(e){return!!(e&Jl.spaceOrPunctuation)}function xoe(e){return!!(e&&e>=55296&&e<=56319)}function woe(e){return!!(e&&e>=56320&&e<=57343)}function Eoe(e,t,n){if(t._bufferIndex<2)return e;const o=n({start:{...t,_bufferIndex:t._bufferIndex-2},end:t}).codePointAt(0);return o&&o>=65536?o:e}function kKe(e,t,n){const r=e>=65536?2:1;if(t._bufferIndex<1+r)return null;const o=t._bufferIndex-r-2,s=n({start:{...t,_bufferIndex:o>=0?o:0},end:{...t,_bufferIndex:t._bufferIndex-r}}),i=s.charCodeAt(s.length-1);if(Number.isNaN(i))return null;if(s.length<2||i<56320||57343<i)return i;const a=s.codePointAt(0);return a&&a>=65536?a:i}var _oe=class{constructor(e,t,n){this.previousCode=e,this.nowPoint=t,this.sliceSerialize=n,gKe(this,"cachedValue")}value(){return this.cachedValue===void 0&&(this.cachedValue=kKe(this.previousCode,this.nowPoint,this.sliceSerialize)),this.cachedValue}};function Soe(e,t,n){const r=n({start:t,end:{...t,_bufferIndex:t._bufferIndex+2}}).codePointAt(0);return r&&r>=65536?r:e}function ca(e,t,n,r){const o=e.length;let s=0,i;if(t<0?t=-t>o?0:o+t:t=t>o?o:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);s<r.length;)i=r.slice(s,s+1e4),i.unshift(t,0),e.splice(...i),s+=1e4,t+=1e4}function aa(e,t){return e.length>0?(ca(e,e.length,0,t),e):t}function Bb(e,t,n){const r=[];let o=-1;for(;++o<e.length;){const s=e[o].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}var hA={name:"attention",resolveAll:AKe,tokenize:NKe};function AKe(e,t){let n=-1,r,o,s,i,a,l,c,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},m={...e[n][1].start};yU(f,-l),yU(m,l),i={type:l>1?sd.strongSequence:sd.emphasisSequence,start:f,end:{...e[r][1].end}},a={type:l>1?sd.strongSequence:sd.emphasisSequence,start:{...e[n][1].start},end:m},s={type:l>1?sd.strongText:sd.emphasisText,start:{...e[r][1].end},end:{...e[n][1].start}},o={type:l>1?sd.strong:sd.emphasis,start:{...i.start},end:{...a.end}},e[r][1].end={...i.start},e[n][1].start={...a.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=aa(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=aa(c,[["enter",o,t],["enter",i,t],["exit",i,t],["enter",s,t]]),t.parser.constructs.insideSpan.null,c=aa(c,Bb(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=aa(c,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",o,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,c=aa(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,ca(e,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function NKe(e,t){const n=this.parser.constructs.attentionMarkers.null,{now:r,sliceSerialize:o,previous:s}=this,i=woe(s)?Eoe(s,r(),o):s,a=L1(i),l=new _oe(i,r(),o),c=voe(a,l.value.bind(l),i);let u;return f;function f(g){return u=g,e.enter("attentionSequence"),m(g)}function m(g){if(g===u)return e.consume(g),m;const y=e.exit("attentionSequence"),v=xoe(g)?Soe(g,r(),o):g,w=L1(v),_=e4(c),T=_||Kx(c),k=e4(w),M=k||Kx(w),D=TKe(c),I=!M||k&&(T||D)||n.includes(g),P=!T||_&&(M||CI(w))||n.includes(i);return y._open=!!(u===Pf.asterisk?I:I&&(bU(c)||!P)),y._close=!!(u===Pf.asterisk?P:P&&(bU(w)||!I)),t(g)}}function yU(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}function IKe(){return{text:{[Pf.asterisk]:hA,[Pf.underscore]:hA},insideSpan:{null:[hA]}}}function RKe(){const e=this.data();(e.micromarkExtensions||(e.micromarkExtensions=[])).push(IKe())}function MKe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:o};return n==null&&(n=!0),{text:{[Pf.tilde]:r},insideSpan:{null:[r]},attentionMarkers:{null:[Pf.tilde]}};function o(i,a){let l=-1;for(;++l<i.length;)if(i[l][0]==="enter"&&i[l][1].type==="strikethroughSequenceTemporary"&&i[l][1]._close){let c=l;for(;c--;)if(i[c][0]==="exit"&&i[c][1].type==="strikethroughSequenceTemporary"&&i[c][1]._open&&i[l][1].end.offset-i[l][1].start.offset===i[c][1].end.offset-i[c][1].start.offset){i[l][1].type="strikethroughSequence",i[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},i[c][1].start),end:Object.assign({},i[l][1].end)},f={type:"strikethroughText",start:Object.assign({},i[c][1].end),end:Object.assign({},i[l][1].start)},m=[["enter",u,a],["enter",i[c][1],a],["exit",i[c][1],a],["enter",f,a]],g=a.parser.constructs.insideSpan.null;g&&ca(m,m.length,0,Bb(g,i.slice(c+1,l),a)),ca(m,m.length,0,[["exit",f,a],["enter",i[l][1],a],["exit",i[l][1],a],["exit",u,a]]),ca(i,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<i.length;)i[l][1].type==="strikethroughSequenceTemporary"&&(i[l][1].type=sd.data);return i}function s(i,a,l){const{now:c,sliceSerialize:u,previous:f}=this,m=woe(f)?Eoe(f,c(),u):f,g=L1(m),y=new _oe(m,c(),u),v=voe(g,y.value.bind(y),m),w=this.events;let _=0;return T;function T(M){return m===Pf.tilde&&w[w.length-1][1].type!==sd.characterEscape?l(M):(i.enter("strikethroughSequenceTemporary"),k(M))}function k(M){const D=L1(m);if(M===Pf.tilde)return _>1?l(M):(i.consume(M),_++,k);if(_<2&&!n)return l(M);const I=i.exit("strikethroughSequenceTemporary"),P=xoe(M)?Soe(M,c(),u):M,B=L1(P),j=e4(v)||Kx(v),q=e4(B)||Kx(B),z=CI(v)||SKe(D);return I._open=!q||B===fb.attentionSideAfter&&(j||z),I._close=!j||D===fb.attentionSideAfter&&(q||CI(B)),a(M)}}}function DKe(e){const t=this.data();(t.micromarkExtensions||(t.micromarkExtensions=[])).push(MKe(e))}function OKe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function PKe(e,t,n){const o=$w((n||{}).ignore||[]),s=LKe(t);let i=-1;for(;++i<s.length;)eM(e,"text",a);function a(c,u){let f=-1,m;for(;++f<u.length;){const g=u[f],y=m?m.children:void 0;if(o(g,y?y.indexOf(g):void 0,m))return;m=g}if(m)return l(c,u)}function l(c,u){const f=u[u.length-1],m=s[i][0],g=s[i][1];let y=0;const w=f.children.indexOf(c);let _=!1,T=[];m.lastIndex=0;let k=m.exec(c.value);for(;k;){const M=k.index,D={index:k.index,input:k.input,stack:[...u,c]};let I=g(...k,D);if(typeof I=="string"&&(I=I.length>0?{type:"text",value:I}:void 0),I===!1?m.lastIndex=M+1:(y!==M&&T.push({type:"text",value:c.value.slice(y,M)}),Array.isArray(I)?T.push(...I):I&&T.push(I),y=M+k[0].length,_=!0),!m.global)break;k=m.exec(c.value)}return _?(y<c.value.length&&T.push({type:"text",value:c.value.slice(y)}),f.children.splice(w,1,...T)):T=[c],w+T.length}}function LKe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const o=n[r];t.push([$Ke(o[0]),FKe(o[1])])}return t}function $Ke(e){return typeof e=="string"?new RegExp(OKe(e),"g"):e}function FKe(e){return typeof e=="function"?e:function(){return e}}const pA="phrasing",mA=["autolink","link","image","label"];function BKe(){return{transforms:[GKe],enter:{literalAutolink:jKe,literalAutolinkEmail:gA,literalAutolinkHttp:gA,literalAutolinkWww:gA},exit:{literalAutolink:qKe,literalAutolinkEmail:VKe,literalAutolinkHttp:UKe,literalAutolinkWww:HKe}}}function zKe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:pA,notInConstruct:mA},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:pA,notInConstruct:mA},{character:":",before:"[ps]",after:"\\/",inConstruct:pA,notInConstruct:mA}]}}function jKe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function gA(e){this.config.enter.autolinkProtocol.call(this,e)}function UKe(e){this.config.exit.autolinkProtocol.call(this,e)}function HKe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function VKe(e){this.config.exit.autolinkEmail.call(this,e)}function qKe(e){this.exit(e)}function GKe(e){PKe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,WKe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),YKe]],{ignore:["link","linkReference"]})}function WKe(e,t,n,r,o){let s="";if(!Toe(o)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!KKe(n)))return!1;const i=ZKe(n+r);if(!i[0])return!1;const a={type:"link",title:null,url:s+t+i[0],children:[{type:"text",value:t+i[0]}]};return i[1]?[a,{type:"text",value:i[1]}]:a}function YKe(e,t,n,r){return!Toe(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function KKe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function ZKe(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const o=LT(e,"(");let s=LT(e,")");for(;r!==-1&&o>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function Toe(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Em(n)||ZC(n))&&(!t||n!==47)}function yu(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}Coe.peek=sZe;function JKe(){this.buffer()}function XKe(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function QKe(){this.buffer()}function eZe(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function tZe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=yu(this.sliceSerialize(e)).toLowerCase(),n.label=t}function nZe(e){this.exit(e)}function rZe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=yu(this.sliceSerialize(e)).toLowerCase(),n.label=t}function oZe(e){this.exit(e)}function sZe(){return"["}function Coe(e,t,n,r){const o=n.createTracker(r);let s=o.move("[^");const i=n.enter("footnoteReference"),a=n.enter("reference");return s+=o.move(n.safe(n.associationId(e),{after:"]",before:s})),a(),i(),s+=o.move("]"),s}function iZe(){return{enter:{gfmFootnoteCallString:JKe,gfmFootnoteCall:XKe,gfmFootnoteDefinitionLabelString:QKe,gfmFootnoteDefinition:eZe},exit:{gfmFootnoteCallString:tZe,gfmFootnoteCall:nZe,gfmFootnoteDefinitionLabelString:rZe,gfmFootnoteDefinition:oZe}}}function aZe(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Coe},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,o,s,i){const a=s.createTracker(i);let l=a.move("[^");const c=s.enter("footnoteDefinition"),u=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),t?koe:lZe))),c(),l}}function lZe(e,t,n){return t===0?e:koe(e,t,n)}function koe(e,t,n){return(n?"":"    ")+e}const cZe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Aoe.peek=pZe;function uZe(){return{canContainEols:["delete"],enter:{strikethrough:fZe},exit:{strikethrough:hZe}}}function dZe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:cZe}],handlers:{delete:Aoe}}}function fZe(e){this.enter({type:"delete",children:[]},e)}function hZe(e){this.exit(e)}function Aoe(e,t,n,r){const o=n.createTracker(r),s=n.enter("strikethrough");let i=o.move("~~");return i+=n.containerPhrasing(e,{...o.current(),before:i,after:"~"}),i+=o.move("~~"),s(),i}function pZe(){return"~"}function mZe(e){return e.length}function gZe(e,t){const n=t||{},r=(n.align||[]).concat(),o=n.stringLength||mZe,s=[],i=[],a=[],l=[];let c=0,u=-1;for(;++u<e.length;){const v=[],w=[];let _=-1;for(e[u].length>c&&(c=e[u].length);++_<e[u].length;){const T=bZe(e[u][_]);if(n.alignDelimiters!==!1){const k=o(T);w[_]=k,(l[_]===void 0||k>l[_])&&(l[_]=k)}v.push(T)}i[u]=v,a[u]=w}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<c;)s[f]=vU(r[f]);else{const v=vU(r);for(;++f<c;)s[f]=v}f=-1;const m=[],g=[];for(;++f<c;){const v=s[f];let w="",_="";v===99?(w=":",_=":"):v===108?w=":":v===114&&(_=":");let T=n.alignDelimiters===!1?1:Math.max(1,l[f]-w.length-_.length);const k=w+"-".repeat(T)+_;n.alignDelimiters!==!1&&(T=w.length+T+_.length,T>l[f]&&(l[f]=T),g[f]=T),m[f]=k}i.splice(1,0,m),a.splice(1,0,g),u=-1;const y=[];for(;++u<i.length;){const v=i[u],w=a[u];f=-1;const _=[];for(;++f<c;){const T=v[f]||"";let k="",M="";if(n.alignDelimiters!==!1){const D=l[f]-(w[f]||0),I=s[f];I===114?k=" ".repeat(D):I===99?D%2?(k=" ".repeat(D/2+.5),M=" ".repeat(D/2-.5)):(k=" ".repeat(D/2),M=k):M=" ".repeat(D)}n.delimiterStart!==!1&&!f&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||f)&&_.push(" "),n.alignDelimiters!==!1&&_.push(k),_.push(T),n.alignDelimiters!==!1&&_.push(M),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||f!==c-1)&&_.push("|")}y.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return y.join(`
`)}function bZe(e){return e==null?"":String(e)}function vU(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function yZe(e,t,n,r){const o=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const i=n.indentLines(n.containerFlow(e,s.current()),vZe);return o(),i}function vZe(e,t,n){return">"+(n?"":" ")+e}function xZe(e,t){return xU(e,t.inConstruct,!0)&&!xU(e,t.notInConstruct,!1)}function xU(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function wU(e,t,n,r){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&xZe(n.stack,n.unsafe[o]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Noe(e,t){const n=String(e);let r=n.indexOf(t),o=r,s=0,i=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===o?++s>i&&(i=s):s=1,o=r+t.length,r=n.indexOf(t,o);return i}function wZe(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function EZe(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function _Ze(e,t,n,r){const o=EZe(n),s=e.value||"",i=o==="`"?"GraveAccent":"Tilde";if(wZe(e,n)){const f=n.enter("codeIndented"),m=n.indentLines(s,SZe);return f(),m}const a=n.createTracker(r),l=o.repeat(Math.max(Noe(s,o)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(e.lang){const f=n.enter(`codeFencedLang${i}`);u+=a.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...a.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${i}`);u+=a.move(" "),u+=a.move(n.safe(e.meta,{before:u,after:`
`,encode:["`"],...a.current()})),f()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function SZe(e,t,n){return(n?"":"    ")+e}function DM(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function TZe(e,t,n,r){const o=DM(n),s=o==='"'?"Quote":"Apostrophe",i=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":`
`,...l.current()}))),a(),e.title&&(a=n.enter(`title${s}`),c+=l.move(" "+o),c+=l.move(n.safe(e.title,{before:c,after:o,...l.current()})),c+=l.move(o),a()),i(),c}function CZe(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Zx(e){return"&#x"+e.toString(16).toUpperCase()+";"}function hb(e){if(e===null||Fo(e)||Em(e))return 1;if(ZC(e))return 2}function t4(e,t,n){const r=hb(e),o=hb(t);return r===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Ioe.peek=kZe;function Ioe(e,t,n,r){const o=CZe(n),s=n.enter("emphasis"),i=n.createTracker(r),a=i.move(o);let l=i.move(n.containerPhrasing(e,{after:o,before:a,...i.current()}));const c=l.charCodeAt(0),u=t4(r.before.charCodeAt(r.before.length-1),c,o);u.inside&&(l=Zx(c)+l.slice(1));const f=l.charCodeAt(l.length-1),m=t4(r.after.charCodeAt(0),f,o);m.inside&&(l=l.slice(0,-1)+Zx(f));const g=i.move(o);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function kZe(e,t,n){return n.options.emphasis||"*"}const AZe={};function OM(e,t){const n=AZe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Roe(e,r,o)}function Roe(e,t,n){if(NZe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return EU(e.children,t,n)}return Array.isArray(e)?EU(e,t,n):""}function EU(e,t,n){const r=[];let o=-1;for(;++o<e.length;)r[o]=Roe(e[o],t,n);return r.join("")}function NZe(e){return!!(e&&typeof e=="object")}function IZe(e,t){let n=!1;return lb(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,sI}),!!((!e.depth||e.depth<3)&&OM(e)&&(t.options.setext||n))}function RZe(e,t,n,r){const o=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(IZe(e,n)){const u=n.enter("headingSetext"),f=n.enter("phrasing"),m=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return f(),u(),m+`
`+(o===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const i="#".repeat(o),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(i+" ");let c=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=Zx(c.charCodeAt(0))+c.slice(1)),c=c?i+" "+c:i,n.options.closeAtx&&(c+=" "+i),l(),a(),c}Moe.peek=MZe;function Moe(e){return e.value||""}function MZe(){return"<"}Doe.peek=DZe;function Doe(e,t,n,r){const o=DM(n),s=o==='"'?"Quote":"Apostrophe",i=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=n.enter(`title${s}`),c+=l.move(" "+o),c+=l.move(n.safe(e.title,{before:c,after:o,...l.current()})),c+=l.move(o),a()),c+=l.move(")"),i(),c}function DZe(){return"!"}Ooe.peek=OZe;function Ooe(e,t,n,r){const o=e.referenceType,s=n.enter("imageReference");let i=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),i();const u=n.stack;n.stack=[],i=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return i(),n.stack=u,s(),o==="full"||!c||c!==f?l+=a.move(f+"]"):o==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function OZe(){return"!"}Poe.peek=PZe;function Poe(e,t,n){let r=e.value||"",o="`",s=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(r);)o+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const i=n.unsafe[s],a=n.compilePattern(i);let l;if(i.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return o+r+o}function PZe(){return"`"}function Loe(e,t){const n=OM(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}$oe.peek=LZe;function $oe(e,t,n,r){const o=DM(n),s=o==='"'?"Quote":"Apostrophe",i=n.createTracker(r);let a,l;if(Loe(e,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let f=i.move("<");return f+=i.move(n.containerPhrasing(e,{before:f,after:">",...i.current()})),f+=i.move(">"),a(),n.stack=u,f}a=n.enter("link"),l=n.enter("label");let c=i.move("[");return c+=i.move(n.containerPhrasing(e,{before:c,after:"](",...i.current()})),c+=i.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=i.move("<"),c+=i.move(n.safe(e.url,{before:c,after:">",...i.current()})),c+=i.move(">")):(l=n.enter("destinationRaw"),c+=i.move(n.safe(e.url,{before:c,after:e.title?" ":")",...i.current()}))),l(),e.title&&(l=n.enter(`title${s}`),c+=i.move(" "+o),c+=i.move(n.safe(e.title,{before:c,after:o,...i.current()})),c+=i.move(o),l()),c+=i.move(")"),a(),c}function LZe(e,t,n){return Loe(e,n)?"<":"["}Foe.peek=$Ze;function Foe(e,t,n,r){const o=e.referenceType,s=n.enter("linkReference");let i=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),i();const u=n.stack;n.stack=[],i=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return i(),n.stack=u,s(),o==="full"||!c||c!==f?l+=a.move(f+"]"):o==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function $Ze(){return"["}function PM(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function FZe(e){const t=PM(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function BZe(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Boe(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function zZe(e,t,n,r){const o=n.enter("list"),s=n.bulletCurrent;let i=e.ordered?BZe(n):PM(n);const a=e.ordered?i==="."?")":".":FZe(n);let l=t&&n.bulletLastUsed?i===n.bulletLastUsed:!1;if(!e.ordered){const u=e.children?e.children[0]:void 0;if((i==="*"||i==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),Boe(n)===i&&u){let f=-1;for(;++f<e.children.length;){const m=e.children[f];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(i=a),n.bulletCurrent=i;const c=n.containerFlow(e,r);return n.bulletLastUsed=i,n.bulletCurrent=s,o(),c}function jZe(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function UZe(e,t,n,r){const o=jZe(n);let s=n.bulletCurrent||PM(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let i=s.length+1;(o==="tab"||o==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(i=Math.ceil(i/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(i-s.length)),a.shift(i);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,a.current()),u);return l(),c;function u(f,m,g){return m?(g?"":" ".repeat(i))+f:(g?s:s+" ".repeat(i-s.length))+f}}function HZe(e,t,n,r){const o=n.enter("paragraph"),s=n.enter("phrasing"),i=n.containerPhrasing(e,r);return s(),o(),i}const VZe=$w(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function qZe(e,t,n,r){return(e.children.some(function(i){return VZe(i)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function GZe(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}zoe.peek=WZe;function zoe(e,t,n,r){const o=GZe(n),s=n.enter("strong"),i=n.createTracker(r),a=i.move(o+o);let l=i.move(n.containerPhrasing(e,{after:o,before:a,...i.current()}));const c=l.charCodeAt(0),u=t4(r.before.charCodeAt(r.before.length-1),c,o);u.inside&&(l=Zx(c)+l.slice(1));const f=l.charCodeAt(l.length-1),m=t4(r.after.charCodeAt(0),f,o);m.inside&&(l=l.slice(0,-1)+Zx(f));const g=i.move(o+o);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function WZe(e,t,n){return n.options.strong||"*"}function YZe(e,t,n,r){return n.safe(e.value,r)}function KZe(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function ZZe(e,t,n){const r=(Boe(n)+(n.options.ruleSpaces?" ":"")).repeat(KZe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const joe={blockquote:yZe,break:wU,code:_Ze,definition:TZe,emphasis:Ioe,hardBreak:wU,heading:RZe,html:Moe,image:Doe,imageReference:Ooe,inlineCode:Poe,link:$oe,linkReference:Foe,list:zZe,listItem:UZe,paragraph:HZe,root:qZe,strong:zoe,text:YZe,thematicBreak:ZZe},_U=document.createElement("i");function LM(e){const t="&"+e+";";_U.innerHTML=t;const n=_U.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Uoe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const JZe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function XZe(e){return e.replace(JZe,QZe)}function QZe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),s=o===120||o===88;return Uoe(n.slice(s?2:1),s?16:10)}return LM(n)||e}function eJe(){return{enter:{table:tJe,tableData:SU,tableHeader:SU,tableRow:rJe},exit:{codeText:oJe,table:nJe,tableData:bA,tableHeader:bA,tableRow:bA}}}function tJe(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function nJe(e){this.exit(e),this.data.inTable=void 0}function rJe(e){this.enter({type:"tableRow",children:[]},e)}function bA(e){this.exit(e)}function SU(e){this.enter({type:"tableCell",children:[]},e)}function oJe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,sJe));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function sJe(e,t){return t==="|"?t:e}function iJe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,o=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:i,tableCell:l,tableRow:a}};function i(g,y,v,w){return c(u(g,v,w),g.align)}function a(g,y,v,w){const _=f(g,v,w),T=c([_]);return T.slice(0,T.indexOf(`
`))}function l(g,y,v,w){const _=v.enter("tableCell"),T=v.enter("phrasing"),k=v.containerPhrasing(g,{...w,before:s,after:s});return T(),_(),k}function c(g,y){return gZe(g,{align:y,alignDelimiters:r,padding:n,stringLength:o})}function u(g,y,v){const w=g.children;let _=-1;const T=[],k=y.enter("table");for(;++_<w.length;)T[_]=f(w[_],y,v);return k(),T}function f(g,y,v){const w=g.children;let _=-1;const T=[],k=y.enter("tableRow");for(;++_<w.length;)T[_]=l(w[_],g,y,v);return k(),T}function m(g,y,v){let w=joe.inlineCode(g,y,v);return v.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function aJe(){return{exit:{taskListCheckValueChecked:TU,taskListCheckValueUnchecked:TU,paragraph:cJe}}}function lJe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:uJe}}}function TU(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function cJe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const o=t.children;let s=-1,i;for(;++s<o.length;){const a=o[s];if(a.type==="paragraph"){i=a;break}}i===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function uJe(e,t,n,r){const o=e.children[0],s=typeof e.checked=="boolean"&&o&&o.type==="paragraph",i="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(i);let l=joe.listItem(e,t,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+i}}function dJe(){return[BKe(),iZe(),uZe(),eJe(),aJe()]}function fJe(e){return{extensions:[zKe(),aZe(e),dZe(),iJe(e),lJe()]}}const CU={}.hasOwnProperty;function Hoe(e){const t={};let n=-1;for(;++n<e.length;)hJe(t,e[n]);return t}function hJe(e,t){let n;for(n in t){const o=(CU.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let i;if(s)for(i in s){CU.call(o,i)||(o[i]=[]);const a=s[i];pJe(o[i],Array.isArray(a)?a:a?[a]:[])}}}function pJe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ca(e,0,0,r)}const mJe={tokenize:wJe,partial:!0},Voe={tokenize:EJe,partial:!0},qoe={tokenize:_Je,partial:!0},Goe={tokenize:SJe,partial:!0},gJe={tokenize:TJe,partial:!0},Woe={name:"wwwAutolink",tokenize:vJe,previous:Koe},Yoe={name:"protocolAutolink",tokenize:xJe,previous:Zoe},ih={name:"emailAutolink",tokenize:yJe,previous:Joe},Md={};function bJe(){return{text:Md}}let jp=48;for(;jp<123;)Md[jp]=ih,jp++,jp===58?jp=65:jp===91&&(jp=97);Md[43]=ih;Md[45]=ih;Md[46]=ih;Md[95]=ih;Md[72]=[ih,Yoe];Md[104]=[ih,Yoe];Md[87]=[ih,Woe];Md[119]=[ih,Woe];function yJe(e,t,n){const r=this;let o,s;return i;function i(f){return!kI(f)||!Joe.call(r,r.previous)||$M(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(f))}function a(f){return kI(f)?(e.consume(f),a):f===64?(e.consume(f),l):n(f)}function l(f){return f===46?e.check(gJe,u,c)(f):f===45||f===95||xa(f)?(s=!0,e.consume(f),l):u(f)}function c(f){return e.consume(f),o=!0,l}function u(f){return s&&o&&La(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function vJe(e,t,n){const r=this;return o;function o(i){return i!==87&&i!==119||!Koe.call(r,r.previous)||$M(r.events)?n(i):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(mJe,e.attempt(Voe,e.attempt(qoe,s),n),n)(i))}function s(i){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(i)}}function xJe(e,t,n){const r=this;let o="",s=!1;return i;function i(f){return(f===72||f===104)&&Zoe.call(r,r.previous)&&!$M(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(f),e.consume(f),a):n(f)}function a(f){if(La(f)&&o.length<5)return o+=String.fromCodePoint(f),e.consume(f),a;if(f===58){const m=o.toLowerCase();if(m==="http"||m==="https")return e.consume(f),l}return n(f)}function l(f){return f===47?(e.consume(f),s?c:(s=!0,l)):n(f)}function c(f){return f===null||QT(f)||Fo(f)||Em(f)||ZC(f)?n(f):e.attempt(Voe,e.attempt(qoe,u),n)(f)}function u(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function wJe(e,t,n){let r=0;return o;function o(i){return(i===87||i===119)&&r<3?(r++,e.consume(i),o):i===46&&r===3?(e.consume(i),s):n(i)}function s(i){return i===null?n(i):t(i)}}function EJe(e,t,n){let r,o,s;return i;function i(c){return c===46||c===95?e.check(Goe,l,a)(c):c===null||Fo(c)||Em(c)||c!==45&&ZC(c)?l(c):(s=!0,e.consume(c),i)}function a(c){return c===95?r=!0:(o=r,r=void 0),e.consume(c),i}function l(c){return o||r||!s?n(c):t(c)}}function _Je(e,t){let n=0,r=0;return o;function o(i){return i===40?(n++,e.consume(i),o):i===41&&r<n?s(i):i===33||i===34||i===38||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===60||i===63||i===93||i===95||i===126?e.check(Goe,t,s)(i):i===null||Fo(i)||Em(i)?t(i):(e.consume(i),o)}function s(i){return i===41&&r++,e.consume(i),o}}function SJe(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),s):a===93?(e.consume(a),o):a===60||a===null||Fo(a)||Em(a)?t(a):n(a)}function o(a){return a===null||a===40||a===91||Fo(a)||Em(a)?t(a):r(a)}function s(a){return La(a)?i(a):n(a)}function i(a){return a===59?(e.consume(a),r):La(a)?(e.consume(a),i):n(a)}}function TJe(e,t,n){return r;function r(s){return e.consume(s),o}function o(s){return xa(s)?n(s):t(s)}}function Koe(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Fo(e)}function Zoe(e){return!La(e)}function Joe(e){return!(e===47||kI(e))}function kI(e){return e===43||e===45||e===46||e===95||xa(e)}function $M(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function zb(e){const t=[];let n=-1,r=0,o=0;for(;++n<e.length;){const s=e.charCodeAt(n);let i="";if(s===37&&xa(e.charCodeAt(n+1))&&xa(e.charCodeAt(n+2)))o=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(i=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(i=String.fromCharCode(s,a),o=1):i=""}else i=String.fromCharCode(s);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+o+1,i=""),o&&(n+=o,o=0)}return t.join("")+e.slice(r)}const AI={name:"attention",resolveAll:CJe,tokenize:kJe};function CJe(e,t){let n=-1,r,o,s,i,a,l,c,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},m={...e[n][1].start};kU(f,-l),kU(m,l),i={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},s={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},o={type:l>1?"strong":"emphasis",start:{...i.start},end:{...a.end}},e[r][1].end={...i.start},e[n][1].start={...a.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=aa(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=aa(c,[["enter",o,t],["enter",i,t],["exit",i,t],["enter",s,t]]),c=aa(c,Bb(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=aa(c,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",o,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,c=aa(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,ca(e,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function kJe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=hb(r);let s;return i;function i(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;const c=e.exit("attentionSequence"),u=hb(l),f=!u||u===2&&o||n.includes(l),m=!o||o===2&&u||n.includes(r);return c._open=!!(s===42?f:f&&(o||!m)),c._close=!!(s===42?m:m&&(u||!f)),t(l)}}function kU(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const AJe={name:"autolink",tokenize:NJe};function NJe(e,t,n){let r=0;return o;function o(g){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(g){return La(g)?(e.consume(g),i):g===64?n(g):c(g)}function i(g){return g===43||g===45||g===46||xa(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(e.consume(g),r=0,l):(g===43||g===45||g===46||xa(g))&&r++<32?(e.consume(g),a):(r=0,c(g))}function l(g){return g===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):g===null||g===32||g===60||QT(g)?n(g):(e.consume(g),l)}function c(g){return g===64?(e.consume(g),u):sKe(g)?(e.consume(g),c):n(g)}function u(g){return xa(g)?f(g):n(g)}function f(g){return g===46?(e.consume(g),r=0,u):g===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):m(g)}function m(g){if((g===45||xa(g))&&r++<63){const y=g===45?m:f;return e.consume(g),y}return n(g)}}function Nr(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let s=0;return i;function i(l){return Pr(l)?(e.enter(n),a(l)):t(l)}function a(l){return Pr(l)&&s++<o?(e.consume(l),a):(e.exit(n),t(l))}}const Vw={partial:!0,tokenize:IJe};function IJe(e,t,n){return r;function r(s){return Pr(s)?Nr(e,o,"linePrefix")(s):o(s)}function o(s){return s===null||Cn(s)?t(s):n(s)}}const Xoe={continuation:{tokenize:MJe},exit:DJe,name:"blockQuote",tokenize:RJe};function RJe(e,t,n){const r=this;return o;function o(i){if(i===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(i),e.exit("blockQuoteMarker"),s}return n(i)}function s(i){return Pr(i)?(e.enter("blockQuotePrefixWhitespace"),e.consume(i),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(i))}}function MJe(e,t,n){const r=this;return o;function o(i){return Pr(i)?Nr(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i):s(i)}function s(i){return e.attempt(Xoe,t,n)(i)}}function DJe(e){e.exit("blockQuote")}const Qoe={name:"characterEscape",tokenize:OJe};function OJe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),o}function o(s){return aKe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const ese={name:"characterReference",tokenize:PJe};function PJe(e,t,n){const r=this;let o=0,s,i;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),l}function l(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),s=31,i=xa,u(f))}function c(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,i=iKe,u):(e.enter("characterReferenceValue"),s=7,i=TI,u(f))}function u(f){if(f===59&&o){const m=e.exit("characterReferenceValue");return i===xa&&!LM(r.sliceSerialize(m))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return i(f)&&o++<s?(e.consume(f),u):n(f)}}const AU={partial:!0,tokenize:$Je},NU={concrete:!0,name:"codeFenced",tokenize:LJe};function LJe(e,t,n){const r=this,o={partial:!0,tokenize:D};let s=0,i=0,a;return l;function l(I){return c(I)}function c(I){const P=r.events[r.events.length-1];return s=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,a=I,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(I)}function u(I){return I===a?(i++,e.consume(I),u):i<3?n(I):(e.exit("codeFencedFenceSequence"),Pr(I)?Nr(e,f,"whitespace")(I):f(I))}function f(I){return I===null||Cn(I)?(e.exit("codeFencedFence"),r.interrupt?t(I):e.check(AU,v,M)(I)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(I))}function m(I){return I===null||Cn(I)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(I)):Pr(I)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Nr(e,g,"whitespace")(I)):I===96&&I===a?n(I):(e.consume(I),m)}function g(I){return I===null||Cn(I)?f(I):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(I))}function y(I){return I===null||Cn(I)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(I)):I===96&&I===a?n(I):(e.consume(I),y)}function v(I){return e.attempt(o,M,w)(I)}function w(I){return e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),_}function _(I){return s>0&&Pr(I)?Nr(e,T,"linePrefix",s+1)(I):T(I)}function T(I){return I===null||Cn(I)?e.check(AU,v,M)(I):(e.enter("codeFlowValue"),k(I))}function k(I){return I===null||Cn(I)?(e.exit("codeFlowValue"),T(I)):(e.consume(I),k)}function M(I){return e.exit("codeFenced"),t(I)}function D(I,P,B){let U=0;return j;function j(X){return I.enter("lineEnding"),I.consume(X),I.exit("lineEnding"),H}function H(X){return I.enter("codeFencedFence"),Pr(X)?Nr(I,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):q(X)}function q(X){return X===a?(I.enter("codeFencedFenceSequence"),z(X)):B(X)}function z(X){return X===a?(U++,I.consume(X),z):U>=i?(I.exit("codeFencedFenceSequence"),Pr(X)?Nr(I,Z,"whitespace")(X):Z(X)):B(X)}function Z(X){return X===null||Cn(X)?(I.exit("codeFencedFence"),P(X)):B(X)}}}function $Je(e,t,n){const r=this;return o;function o(i){return i===null?n(i):(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),s)}function s(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}const yA={name:"codeIndented",tokenize:BJe},FJe={partial:!0,tokenize:zJe};function BJe(e,t,n){const r=this;return o;function o(c){return e.enter("codeIndented"),Nr(e,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?i(c):n(c)}function i(c){return c===null?l(c):Cn(c)?e.attempt(FJe,i,l)(c):(e.enter("codeFlowValue"),a(c))}function a(c){return c===null||Cn(c)?(e.exit("codeFlowValue"),i(c)):(e.consume(c),a)}function l(c){return e.exit("codeIndented"),t(c)}}function zJe(e,t,n){const r=this;return o;function o(i){return r.parser.lazy[r.now().line]?n(i):Cn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),o):Nr(e,s,"linePrefix",5)(i)}function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):Cn(i)?o(i):n(i)}}const jJe={name:"codeText",previous:HJe,resolve:UJe,tokenize:VJe};function UJe(e){let t=e.length-4,n=3,r,o;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)o===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(o=r):(r===t||e[r][1].type==="lineEnding")&&(e[o][1].type="codeTextData",r!==o+2&&(e[o][1].end=e[r-1][1].end,e.splice(o+2,r-o-2),t-=r-o-2,r=o+2),o=void 0);return e}function HJe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function VJe(e,t,n){let r=0,o,s;return i;function i(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),l):f===96?(s=e.enter("codeTextSequence"),o=0,u(f)):Cn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||Cn(f)?(e.exit("codeTextData"),l(f)):(e.consume(f),c)}function u(f){return f===96?(e.consume(f),o++,u):o===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",c(f))}}class qJe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const o=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return r&&ev(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ev(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ev(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ev(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ev(this.left,n.reverse())}}}function ev(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function tse(e){const t={};let n=-1,r,o,s,i,a,l,c;const u=new qJe(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,GJe(u,n)),n=t[n],c=!0);else if(r[1]._container){for(s=n,o=void 0;s--;)if(i=u.get(s),i[1].type==="lineEnding"||i[1].type==="lineEndingBlank")i[0]==="enter"&&(o&&(u.get(o)[1].type="lineEndingBlank"),i[1].type="lineEnding",o=s);else if(!(i[1].type==="linePrefix"||i[1].type==="listItemIndent"))break;o&&(r[1].end={...u.get(o)[1].start},a=u.slice(o,n),a.unshift(r),u.splice(o,n-o+1,a))}}return ca(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function GJe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let o=t-1;const s=[];let i=n._tokenizer;i||(i=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const a=i.events,l=[],c={};let u,f,m=-1,g=n,y=0,v=0;const w=[v];for(;g;){for(;e.get(++o)[1]!==g;);s.push(o),g._tokenizer||(u=r.sliceStream(g),g.next||u.push(null),f&&i.defineSkip(g.start),g._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(u),g._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),f=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(v=m+1,w.push(v),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(i.events=[],g?(g._tokenizer=void 0,g.previous=void 0):w.pop(),m=w.length;m--;){const _=a.slice(w[m],w[m+1]),T=s.pop();l.push([T,T+_.length-1]),e.splice(T,2,_)}for(l.reverse(),m=-1;++m<l.length;)c[y+l[m][0]]=y+l[m][1],y+=l[m][1]-l[m][0]-1;return c}const WJe={resolve:KJe,tokenize:ZJe},YJe={partial:!0,tokenize:JJe};function KJe(e){return tse(e),e}function ZJe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(a)}function o(a){return a===null?s(a):Cn(a)?e.check(YJe,i,s)(a):(e.consume(a),o)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function i(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function JJe(e,t,n){const r=this;return o;function o(i){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Nr(e,s,"linePrefix")}function s(i){if(i===null||Cn(i))return n(i);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}function nse(e,t,n,r,o,s,i,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return f;function f(_){return _===60?(e.enter(r),e.enter(o),e.enter(s),e.consume(_),e.exit(s),m):_===null||_===32||_===41||QT(_)?n(_):(e.enter(r),e.enter(i),e.enter(a),e.enter("chunkString",{contentType:"string"}),v(_))}function m(_){return _===62?(e.enter(s),e.consume(_),e.exit(s),e.exit(o),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),g(_))}function g(_){return _===62?(e.exit("chunkString"),e.exit(a),m(_)):_===null||_===60||Cn(_)?n(_):(e.consume(_),_===92?y:g)}function y(_){return _===60||_===62||_===92?(e.consume(_),g):g(_)}function v(_){return!u&&(_===null||_===41||Fo(_))?(e.exit("chunkString"),e.exit(a),e.exit(i),e.exit(r),t(_)):u<c&&_===40?(e.consume(_),u++,v):_===41?(e.consume(_),u--,v):_===null||_===32||_===40||QT(_)?n(_):(e.consume(_),_===92?w:v)}function w(_){return _===40||_===41||_===92?(e.consume(_),v):v(_)}}function rse(e,t,n,r,o,s){const i=this;let a=0,l;return c;function c(g){return e.enter(r),e.enter(o),e.consume(g),e.exit(o),e.enter(s),u}function u(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in i.parser.constructs?n(g):g===93?(e.exit(s),e.enter(o),e.consume(g),e.exit(o),e.exit(r),t):Cn(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||g===91||g===93||Cn(g)||a++>999?(e.exit("chunkString"),u(g)):(e.consume(g),l||(l=!Pr(g)),g===92?m:f)}function m(g){return g===91||g===92||g===93?(e.consume(g),a++,f):f(g)}}function ose(e,t,n,r,o,s){let i;return a;function a(m){return m===34||m===39||m===40?(e.enter(r),e.enter(o),e.consume(m),e.exit(o),i=m===40?41:m,l):n(m)}function l(m){return m===i?(e.enter(o),e.consume(m),e.exit(o),e.exit(r),t):(e.enter(s),c(m))}function c(m){return m===i?(e.exit(s),l(i)):m===null?n(m):Cn(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),Nr(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===i||m===null||Cn(m)?(e.exit("chunkString"),c(m)):(e.consume(m),m===92?f:u)}function f(m){return m===i||m===92?(e.consume(m),u):u(m)}}function tx(e,t){let n;return r;function r(o){return Cn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,r):Pr(o)?Nr(e,r,n?"linePrefix":"lineSuffix")(o):t(o)}}const XJe={name:"definition",tokenize:eXe},QJe={partial:!0,tokenize:tXe};function eXe(e,t,n){const r=this;let o;return s;function s(g){return e.enter("definition"),i(g)}function i(g){return rse.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return o=yu(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),l):n(g)}function l(g){return Fo(g)?tx(e,c)(g):c(g)}function c(g){return nse(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function u(g){return e.attempt(QJe,f,f)(g)}function f(g){return Pr(g)?Nr(e,m,"whitespace")(g):m(g)}function m(g){return g===null||Cn(g)?(e.exit("definition"),r.parser.defined.push(o),t(g)):n(g)}}function tXe(e,t,n){return r;function r(a){return Fo(a)?tx(e,o)(a):n(a)}function o(a){return ose(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Pr(a)?Nr(e,i,"whitespace")(a):i(a)}function i(a){return a===null||Cn(a)?t(a):n(a)}}const nXe={name:"hardBreakEscape",tokenize:rXe};function rXe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),o}function o(s){return Cn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const oXe={name:"headingAtx",resolve:sXe,tokenize:iXe};function sXe(e,t){let n=e.length-2,r=3,o,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(o={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ca(e,r,n-r+1,[["enter",o,t],["enter",s,t],["exit",s,t],["exit",o,t]])),e}function iXe(e,t,n){let r=0;return o;function o(u){return e.enter("atxHeading"),s(u)}function s(u){return e.enter("atxHeadingSequence"),i(u)}function i(u){return u===35&&r++<6?(e.consume(u),i):u===null||Fo(u)?(e.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(e.enter("atxHeadingSequence"),l(u)):u===null||Cn(u)?(e.exit("atxHeading"),t(u)):Pr(u)?Nr(e,a,"whitespace")(u):(e.enter("atxHeadingText"),c(u))}function l(u){return u===35?(e.consume(u),l):(e.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||Fo(u)?(e.exit("atxHeadingText"),a(u)):(e.consume(u),c)}}const aXe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],IU=["pre","script","style","textarea"],lXe={concrete:!0,name:"htmlFlow",resolveTo:dXe,tokenize:fXe},cXe={partial:!0,tokenize:pXe},uXe={partial:!0,tokenize:hXe};function dXe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function fXe(e,t,n){const r=this;let o,s,i,a,l;return c;function c(Q){return u(Q)}function u(Q){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Q),f}function f(Q){return Q===33?(e.consume(Q),m):Q===47?(e.consume(Q),s=!0,v):Q===63?(e.consume(Q),o=3,r.interrupt?t:K):La(Q)?(e.consume(Q),i=String.fromCharCode(Q),w):n(Q)}function m(Q){return Q===45?(e.consume(Q),o=2,g):Q===91?(e.consume(Q),o=5,a=0,y):La(Q)?(e.consume(Q),o=4,r.interrupt?t:K):n(Q)}function g(Q){return Q===45?(e.consume(Q),r.interrupt?t:K):n(Q)}function y(Q){const Te="CDATA[";return Q===Te.charCodeAt(a++)?(e.consume(Q),a===Te.length?r.interrupt?t:q:y):n(Q)}function v(Q){return La(Q)?(e.consume(Q),i=String.fromCharCode(Q),w):n(Q)}function w(Q){if(Q===null||Q===47||Q===62||Fo(Q)){const Te=Q===47,ge=i.toLowerCase();return!Te&&!s&&IU.includes(ge)?(o=1,r.interrupt?t(Q):q(Q)):aXe.includes(i.toLowerCase())?(o=6,Te?(e.consume(Q),_):r.interrupt?t(Q):q(Q)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(Q):s?T(Q):k(Q))}return Q===45||xa(Q)?(e.consume(Q),i+=String.fromCharCode(Q),w):n(Q)}function _(Q){return Q===62?(e.consume(Q),r.interrupt?t:q):n(Q)}function T(Q){return Pr(Q)?(e.consume(Q),T):j(Q)}function k(Q){return Q===47?(e.consume(Q),j):Q===58||Q===95||La(Q)?(e.consume(Q),M):Pr(Q)?(e.consume(Q),k):j(Q)}function M(Q){return Q===45||Q===46||Q===58||Q===95||xa(Q)?(e.consume(Q),M):D(Q)}function D(Q){return Q===61?(e.consume(Q),I):Pr(Q)?(e.consume(Q),D):k(Q)}function I(Q){return Q===null||Q===60||Q===61||Q===62||Q===96?n(Q):Q===34||Q===39?(e.consume(Q),l=Q,P):Pr(Q)?(e.consume(Q),I):B(Q)}function P(Q){return Q===l?(e.consume(Q),l=null,U):Q===null||Cn(Q)?n(Q):(e.consume(Q),P)}function B(Q){return Q===null||Q===34||Q===39||Q===47||Q===60||Q===61||Q===62||Q===96||Fo(Q)?D(Q):(e.consume(Q),B)}function U(Q){return Q===47||Q===62||Pr(Q)?k(Q):n(Q)}function j(Q){return Q===62?(e.consume(Q),H):n(Q)}function H(Q){return Q===null||Cn(Q)?q(Q):Pr(Q)?(e.consume(Q),H):n(Q)}function q(Q){return Q===45&&o===2?(e.consume(Q),J):Q===60&&o===1?(e.consume(Q),ee):Q===62&&o===4?(e.consume(Q),te):Q===63&&o===3?(e.consume(Q),K):Q===93&&o===5?(e.consume(Q),ie):Cn(Q)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(cXe,se,z)(Q)):Q===null||Cn(Q)?(e.exit("htmlFlowData"),z(Q)):(e.consume(Q),q)}function z(Q){return e.check(uXe,Z,se)(Q)}function Z(Q){return e.enter("lineEnding"),e.consume(Q),e.exit("lineEnding"),X}function X(Q){return Q===null||Cn(Q)?z(Q):(e.enter("htmlFlowData"),q(Q))}function J(Q){return Q===45?(e.consume(Q),K):q(Q)}function ee(Q){return Q===47?(e.consume(Q),i="",re):q(Q)}function re(Q){if(Q===62){const Te=i.toLowerCase();return IU.includes(Te)?(e.consume(Q),te):q(Q)}return La(Q)&&i.length<8?(e.consume(Q),i+=String.fromCharCode(Q),re):q(Q)}function ie(Q){return Q===93?(e.consume(Q),K):q(Q)}function K(Q){return Q===62?(e.consume(Q),te):Q===45&&o===2?(e.consume(Q),K):q(Q)}function te(Q){return Q===null||Cn(Q)?(e.exit("htmlFlowData"),se(Q)):(e.consume(Q),te)}function se(Q){return e.exit("htmlFlow"),t(Q)}}function hXe(e,t,n){const r=this;return o;function o(i){return Cn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),s):n(i)}function s(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}function pXe(e,t,n){return r;function r(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(Vw,t,n)}}const mXe={name:"htmlText",tokenize:gXe};function gXe(e,t,n){const r=this;let o,s,i;return a;function a(K){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(K),l}function l(K){return K===33?(e.consume(K),c):K===47?(e.consume(K),D):K===63?(e.consume(K),k):La(K)?(e.consume(K),B):n(K)}function c(K){return K===45?(e.consume(K),u):K===91?(e.consume(K),s=0,y):La(K)?(e.consume(K),T):n(K)}function u(K){return K===45?(e.consume(K),g):n(K)}function f(K){return K===null?n(K):K===45?(e.consume(K),m):Cn(K)?(i=f,ee(K)):(e.consume(K),f)}function m(K){return K===45?(e.consume(K),g):f(K)}function g(K){return K===62?J(K):K===45?m(K):f(K)}function y(K){const te="CDATA[";return K===te.charCodeAt(s++)?(e.consume(K),s===te.length?v:y):n(K)}function v(K){return K===null?n(K):K===93?(e.consume(K),w):Cn(K)?(i=v,ee(K)):(e.consume(K),v)}function w(K){return K===93?(e.consume(K),_):v(K)}function _(K){return K===62?J(K):K===93?(e.consume(K),_):v(K)}function T(K){return K===null||K===62?J(K):Cn(K)?(i=T,ee(K)):(e.consume(K),T)}function k(K){return K===null?n(K):K===63?(e.consume(K),M):Cn(K)?(i=k,ee(K)):(e.consume(K),k)}function M(K){return K===62?J(K):k(K)}function D(K){return La(K)?(e.consume(K),I):n(K)}function I(K){return K===45||xa(K)?(e.consume(K),I):P(K)}function P(K){return Cn(K)?(i=P,ee(K)):Pr(K)?(e.consume(K),P):J(K)}function B(K){return K===45||xa(K)?(e.consume(K),B):K===47||K===62||Fo(K)?U(K):n(K)}function U(K){return K===47?(e.consume(K),J):K===58||K===95||La(K)?(e.consume(K),j):Cn(K)?(i=U,ee(K)):Pr(K)?(e.consume(K),U):J(K)}function j(K){return K===45||K===46||K===58||K===95||xa(K)?(e.consume(K),j):H(K)}function H(K){return K===61?(e.consume(K),q):Cn(K)?(i=H,ee(K)):Pr(K)?(e.consume(K),H):U(K)}function q(K){return K===null||K===60||K===61||K===62||K===96?n(K):K===34||K===39?(e.consume(K),o=K,z):Cn(K)?(i=q,ee(K)):Pr(K)?(e.consume(K),q):(e.consume(K),Z)}function z(K){return K===o?(e.consume(K),o=void 0,X):K===null?n(K):Cn(K)?(i=z,ee(K)):(e.consume(K),z)}function Z(K){return K===null||K===34||K===39||K===60||K===61||K===96?n(K):K===47||K===62||Fo(K)?U(K):(e.consume(K),Z)}function X(K){return K===47||K===62||Fo(K)?U(K):n(K)}function J(K){return K===62?(e.consume(K),e.exit("htmlTextData"),e.exit("htmlText"),t):n(K)}function ee(K){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(K),e.exit("lineEnding"),re}function re(K){return Pr(K)?Nr(e,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):ie(K)}function ie(K){return e.enter("htmlTextData"),i(K)}}const FM={name:"labelEnd",resolveAll:xXe,resolveTo:wXe,tokenize:EXe},bXe={tokenize:_Xe},yXe={tokenize:SXe},vXe={tokenize:TXe};function xXe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const o=r.type==="labelImage"?4:2;r.type="data",t+=o}}return e.length!==n.length&&ca(e,0,e.length,n),e}function wXe(e,t){let n=e.length,r=0,o,s,i,a;for(;n--;)if(o=e[n][1],s){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(i){if(e[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(s=n,o.type!=="labelLink")){r=2;break}}else o.type==="labelEnd"&&(i=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[s][1].start},end:{...e[i][1].end}},u={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[i-2][1].start}};return a=[["enter",l,t],["enter",c,t]],a=aa(a,e.slice(s+1,s+r+3)),a=aa(a,[["enter",u,t]]),a=aa(a,Bb(t.parser.constructs.insideSpan.null,e.slice(s+r+4,i-3),t)),a=aa(a,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),a=aa(a,e.slice(i+1)),a=aa(a,[["exit",l,t]]),ca(e,s,e.length,a),e}function EXe(e,t,n){const r=this;let o=r.events.length,s,i;for(;o--;)if((r.events[o][1].type==="labelImage"||r.events[o][1].type==="labelLink")&&!r.events[o][1]._balanced){s=r.events[o][1];break}return a;function a(m){return s?s._inactive?f(m):(i=r.parser.defined.includes(yu(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),l):n(m)}function l(m){return m===40?e.attempt(bXe,u,i?u:f)(m):m===91?e.attempt(yXe,u,i?c:f)(m):i?u(m):f(m)}function c(m){return e.attempt(vXe,u,f)(m)}function u(m){return t(m)}function f(m){return s._balanced=!0,n(m)}}function _Xe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),o}function o(f){return Fo(f)?tx(e,s)(f):s(f)}function s(f){return f===41?u(f):nse(e,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function i(f){return Fo(f)?tx(e,l)(f):u(f)}function a(f){return n(f)}function l(f){return f===34||f===39||f===40?ose(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function c(f){return Fo(f)?tx(e,u)(f):u(f)}function u(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function SXe(e,t,n){const r=this;return o;function o(a){return rse.call(r,e,s,i,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(yu(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function i(a){return n(a)}}function TXe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),o}function o(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const CXe={name:"labelStartImage",resolveAll:FM.resolveAll,tokenize:kXe};function kXe(e,t,n){const r=this;return o;function o(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),i):n(a)}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const AXe={name:"labelStartLink",resolveAll:FM.resolveAll,tokenize:NXe};function NXe(e,t,n){const r=this;return o;function o(i){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(i),e.exit("labelMarker"),e.exit("labelLink"),s}function s(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):t(i)}}const vA={name:"lineEnding",tokenize:IXe};function IXe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Nr(e,t,"linePrefix")}}const z_={name:"thematicBreak",tokenize:RXe};function RXe(e,t,n){let r=0,o;return s;function s(c){return e.enter("thematicBreak"),i(c)}function i(c){return o=c,a(c)}function a(c){return c===o?(e.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Cn(c))?(e.exit("thematicBreak"),t(c)):n(c)}function l(c){return c===o?(e.consume(c),r++,l):(e.exit("thematicBreakSequence"),Pr(c)?Nr(e,a,"whitespace")(c):a(c))}}const ll={continuation:{tokenize:PXe},exit:$Xe,name:"list",tokenize:OXe},MXe={partial:!0,tokenize:FXe},DXe={partial:!0,tokenize:LXe};function OXe(e,t,n){const r=this,o=r.events[r.events.length-1];let s=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,i=0;return a;function a(g){const y=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:TI(g)){if(r.containerState.type||(r.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),g===42||g===45?e.check(z_,n,c)(g):c(g);if(!r.interrupt||g===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(g)}return n(g)}function l(g){return TI(g)&&++i<10?(e.consume(g),l):(!r.interrupt||i<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(e.exit("listItemValue"),c(g)):n(g)}function c(g){return e.enter("listItemMarker"),e.consume(g),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,e.check(Vw,r.interrupt?n:u,e.attempt(MXe,m,f))}function u(g){return r.containerState.initialBlankLine=!0,s++,m(g)}function f(g){return Pr(g)?(e.enter("listItemPrefixWhitespace"),e.consume(g),e.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(g)}}function PXe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Vw,o,s);function o(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Nr(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Pr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(DXe,t,i)(a))}function i(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Nr(e,e.attempt(ll,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function LXe(e,t,n){const r=this;return Nr(e,o,"listItemIndent",r.containerState.size+1);function o(s){const i=r.events[r.events.length-1];return i&&i[1].type==="listItemIndent"&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(s):n(s)}}function $Xe(e){e.exit(this.containerState.type)}function FXe(e,t,n){const r=this;return Nr(e,o,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(s){const i=r.events[r.events.length-1];return!Pr(s)&&i&&i[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const RU={name:"setextUnderline",resolveTo:BXe,tokenize:zXe};function BXe(e,t){let n=e.length,r,o,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(o=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const i={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[o][1].type="setextHeadingText",s?(e.splice(o,0,["enter",i,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=i,e.push(["exit",i,t]),e}function zXe(e,t,n){const r=this;let o;return s;function s(c){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),o=c,i(c)):n(c)}function i(c){return e.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===o?(e.consume(c),a):(e.exit("setextHeadingLineSequence"),Pr(c)?Nr(e,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Cn(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const jXe={tokenize:KXe,partial:!0};function UXe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:GXe,continuation:{tokenize:WXe},exit:YXe}},text:{91:{name:"gfmFootnoteCall",tokenize:qXe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:HXe,resolveTo:VXe}}}}function HXe(e,t,n){const r=this;let o=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i;for(;o--;){const l=r.events[o][1];if(l.type==="labelImage"){i=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!i||!i._balanced)return n(l);const c=yu(r.sliceSerialize({start:i.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function VXe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",o,t],["exit",o,t],["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function qXe(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,i;return a;function a(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(f){if(s>999||f===93&&!i||f===null||f===91||Fo(f))return n(f);if(f===93){e.exit("chunkString");const m=e.exit("gfmFootnoteCallString");return o.includes(yu(r.sliceSerialize(m)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return Fo(f)||(i=!0),s++,e.consume(f),f===92?u:c}function u(f){return f===91||f===92||f===93?(e.consume(f),s++,c):c(f)}}function GXe(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,i=0,a;return l;function l(y){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(y){return y===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(y)}function u(y){if(i>999||y===93&&!a||y===null||y===91||Fo(y))return n(y);if(y===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return s=yu(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),m}return Fo(y)||(a=!0),i++,e.consume(y),y===92?f:u}function f(y){return y===91||y===92||y===93?(e.consume(y),i++,u):u(y)}function m(y){return y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),o.includes(s)||o.push(s),Nr(e,g,"gfmFootnoteDefinitionWhitespace")):n(y)}function g(y){return t(y)}}function WXe(e,t,n){return e.check(Vw,t,e.attempt(jXe,t,n))}function YXe(e){e.exit("gfmFootnoteDefinition")}function KXe(e,t,n){const r=this;return Nr(e,o,"gfmFootnoteDefinitionIndent",5);function o(s){const i=r.events[r.events.length-1];return i&&i[1].type==="gfmFootnoteDefinitionIndent"&&i[2].sliceSerialize(i[1],!0).length===4?t(s):n(s)}}function ZXe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:o};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function o(i,a){let l=-1;for(;++l<i.length;)if(i[l][0]==="enter"&&i[l][1].type==="strikethroughSequenceTemporary"&&i[l][1]._close){let c=l;for(;c--;)if(i[c][0]==="exit"&&i[c][1].type==="strikethroughSequenceTemporary"&&i[c][1]._open&&i[l][1].end.offset-i[l][1].start.offset===i[c][1].end.offset-i[c][1].start.offset){i[l][1].type="strikethroughSequence",i[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},i[c][1].start),end:Object.assign({},i[l][1].end)},f={type:"strikethroughText",start:Object.assign({},i[c][1].end),end:Object.assign({},i[l][1].start)},m=[["enter",u,a],["enter",i[c][1],a],["exit",i[c][1],a],["enter",f,a]],g=a.parser.constructs.insideSpan.null;g&&ca(m,m.length,0,Bb(g,i.slice(c+1,l),a)),ca(m,m.length,0,[["exit",f,a],["enter",i[l][1],a],["exit",i[l][1],a],["exit",u,a]]),ca(i,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<i.length;)i[l][1].type==="strikethroughSequenceTemporary"&&(i[l][1].type="data");return i}function s(i,a,l){const c=this.previous,u=this.events;let f=0;return m;function m(y){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(y):(i.enter("strikethroughSequenceTemporary"),g(y))}function g(y){const v=hb(c);if(y===126)return f>1?l(y):(i.consume(y),f++,g);if(f<2&&!n)return l(y);const w=i.exit("strikethroughSequenceTemporary"),_=hb(y);return w._open=!_||_===2&&!!v,w._close=!v||v===2&&!!_,a(y)}}}class JXe{constructor(){this.map=[]}add(t,n,r){XXe(this,t,n,r)}consume(t){if(this.map.sort(function(s,i){return s[0]-i[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let o=r.pop();for(;o;){for(const s of o)t.push(s);o=r.pop()}this.map.length=0}}function XXe(e,t,n,r){let o=0;if(!(n===0&&r.length===0)){for(;o<e.map.length;){if(e.map[o][0]===t){e.map[o][1]+=n,e.map[o][2].push(...r);return}o+=1}e.map.push([t,n,r])}}function QXe(e,t){let n=!1;const r=[];for(;t<e.length;){const o=e[t];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function eQe(){return{flow:{null:{name:"table",tokenize:tQe,resolveAll:nQe}}}}function tQe(e,t,n){const r=this;let o=0,s=0,i;return a;function a(j){let H=r.events.length-1;for(;H>-1;){const Z=r.events[H][1].type;if(Z==="lineEnding"||Z==="linePrefix")H--;else break}const q=H>-1?r.events[H][1].type:null,z=q==="tableHead"||q==="tableRow"?I:l;return z===I&&r.parser.lazy[r.now().line]?n(j):z(j)}function l(j){return e.enter("tableHead"),e.enter("tableRow"),c(j)}function c(j){return j===124||(i=!0,s+=1),u(j)}function u(j){return j===null?n(j):Cn(j)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),g):n(j):Pr(j)?Nr(e,u,"whitespace")(j):(s+=1,i&&(i=!1,o+=1),j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),i=!0,u):(e.enter("data"),f(j)))}function f(j){return j===null||j===124||Fo(j)?(e.exit("data"),u(j)):(e.consume(j),j===92?m:f)}function m(j){return j===92||j===124?(e.consume(j),f):f(j)}function g(j){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(j):(e.enter("tableDelimiterRow"),i=!1,Pr(j)?Nr(e,y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):y(j))}function y(j){return j===45||j===58?w(j):j===124?(i=!0,e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),v):D(j)}function v(j){return Pr(j)?Nr(e,w,"whitespace")(j):w(j)}function w(j){return j===58?(s+=1,i=!0,e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),_):j===45?(s+=1,_(j)):j===null||Cn(j)?M(j):D(j)}function _(j){return j===45?(e.enter("tableDelimiterFiller"),T(j)):D(j)}function T(j){return j===45?(e.consume(j),T):j===58?(i=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),k):(e.exit("tableDelimiterFiller"),k(j))}function k(j){return Pr(j)?Nr(e,M,"whitespace")(j):M(j)}function M(j){return j===124?y(j):j===null||Cn(j)?!i||o!==s?D(j):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(j)):D(j)}function D(j){return n(j)}function I(j){return e.enter("tableRow"),P(j)}function P(j){return j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),P):j===null||Cn(j)?(e.exit("tableRow"),t(j)):Pr(j)?Nr(e,P,"whitespace")(j):(e.enter("data"),B(j))}function B(j){return j===null||j===124||Fo(j)?(e.exit("data"),P(j)):(e.consume(j),j===92?U:B)}function U(j){return j===92||j===124?(e.consume(j),B):B(j)}}function nQe(e,t){let n=-1,r=!0,o=0,s=[0,0,0,0],i=[0,0,0,0],a=!1,l=0,c,u,f;const m=new JXe;for(;++n<e.length;){const g=e[n],y=g[1];g[0]==="enter"?y.type==="tableHead"?(a=!1,l!==0&&(MU(m,t,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",c,t]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(r=!0,f=void 0,s=[0,0,0,0],i=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},m.add(n,0,[["enter",u,t]])),o=y.type==="tableDelimiterRow"?2:u?3:1):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(r=!1,i[2]===0&&(s[1]!==0&&(i[0]=i[1],f=s_(m,t,s,o,void 0,f),s=[0,0,0,0]),i[2]=n)):y.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(i[0]=i[1],f=s_(m,t,s,o,void 0,f)),s=i,i=[s[1],n,0,0])):y.type==="tableHead"?(a=!0,l=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(l=n,s[1]!==0?(i[0]=i[1],f=s_(m,t,s,o,n,f)):i[1]!==0&&(f=s_(m,t,i,o,n,f)),o=0):o&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(i[3]=n)}for(l!==0&&MU(m,t,l,c,u),m.consume(t.events),n=-1;++n<t.events.length;){const g=t.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=QXe(t.events,n))}return e}function s_(e,t,n,r,o,s){const i=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},u1(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const l=u1(t.events,n[1]);if(s={type:i,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const c=u1(t.events,n[2]),u=u1(t.events,n[3]),f={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const m=t.events[n[2]],g=t.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,v=n[3]-n[2]-1;e.add(y,v,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return o!==void 0&&(s.end=Object.assign({},u1(t.events,o)),e.add(o,0,[["exit",s,t]]),s=void 0),s}function MU(e,t,n,r,o){const s=[],i=u1(t.events,n);o&&(o.end=Object.assign({},i),s.push(["exit",o,t])),r.end=Object.assign({},i),s.push(["exit",r,t]),e.add(n+1,0,s)}function u1(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const rQe={name:"tasklistCheck",tokenize:sQe};function oQe(){return{text:{91:rQe}}}function sQe(e,t,n){const r=this;return o;function o(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),s)}function s(l){return Fo(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),i):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),i):n(l)}function i(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(l)}function a(l){return Cn(l)?t(l):Pr(l)?e.check({tokenize:iQe},t,n)(l):n(l)}}function iQe(e,t,n){return Nr(e,r,"whitespace");function r(o){return o===null?n(o):t(o)}}function aQe(e){return Hoe([bJe(),UXe(),ZXe(e),eQe(),oQe()])}const lQe={};function cQe(e){const t=this,n=e||lQe,r=t.data(),o=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);o.push(aQe(n)),s.push(dJe()),i.push(fJe(n))}function uQe(){return{enter:{mathFlow:e,mathFlowFenceMeta:t,mathText:s},exit:{mathFlow:o,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:a,mathText:i,mathTextData:a}};function e(l){const c={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[c]}},l)}function t(){this.buffer()}function n(){const l=this.resume(),c=this.stack[this.stack.length-1];c.type,c.meta=l}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function o(l){const c=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u=this.stack[this.stack.length-1];u.type,this.exit(l),u.value=c;const f=u.data.hChildren[0];f.type,f.tagName,f.children.push({type:"text",value:c}),this.data.mathFlowInside=void 0}function s(l){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},l),this.buffer()}function i(l){const c=this.resume(),u=this.stack[this.stack.length-1];u.type,this.exit(l),u.value=c,u.data.hChildren.push({type:"text",value:c})}function a(l){this.config.enter.data.call(this,l),this.config.exit.data.call(this,l)}}function dQe(e){let t=(e||{}).singleDollarTextMath;return t==null&&(t=!0),r.peek=o,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:t?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(s,i,a,l){const c=s.value||"",u=a.createTracker(l),f="$".repeat(Math.max(Noe(c,"$")+1,2)),m=a.enter("mathFlow");let g=u.move(f);if(s.meta){const y=a.enter("mathFlowMeta");g+=u.move(a.safe(s.meta,{after:`
`,before:g,encode:["$"],...u.current()})),y()}return g+=u.move(`
`),c&&(g+=u.move(c+`
`)),g+=u.move(f),m(),g}function r(s,i,a){let l=s.value||"",c=1;for(t||c++;new RegExp("(^|[^$])"+"\\$".repeat(c)+"([^$]|$)").test(l);)c++;const u="$".repeat(c);/[^ \r\n]/.test(l)&&(/^[ \r\n]/.test(l)&&/[ \r\n]$/.test(l)||/^\$|\$$/.test(l))&&(l=" "+l+" ");let f=-1;for(;++f<a.unsafe.length;){const m=a.unsafe[f];if(!m.atBreak)continue;const g=a.compilePattern(m);let y;for(;y=g.exec(l);){let v=y.index;l.codePointAt(v)===10&&l.codePointAt(v-1)===13&&v--,l=l.slice(0,v)+" "+l.slice(y.index+1)}}return u+l+u}function o(){return"$"}}const fQe={tokenize:hQe,concrete:!0,name:"mathFlow"},DU={tokenize:pQe,partial:!0};function hQe(e,t,n){const r=this,o=r.events[r.events.length-1],s=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let i=0;return a;function a(T){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),l(T)}function l(T){return T===36?(e.consume(T),i++,l):i<2?n(T):(e.exit("mathFlowFenceSequence"),Nr(e,c,"whitespace")(T))}function c(T){return T===null||Cn(T)?f(T):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),u(T))}function u(T){return T===null||Cn(T)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),f(T)):T===36?n(T):(e.consume(T),u)}function f(T){return e.exit("mathFlowFence"),r.interrupt?t(T):e.attempt(DU,m,w)(T)}function m(T){return e.attempt({tokenize:_,partial:!0},w,g)(T)}function g(T){return(s?Nr(e,y,"linePrefix",s+1):y)(T)}function y(T){return T===null?w(T):Cn(T)?e.attempt(DU,m,w)(T):(e.enter("mathFlowValue"),v(T))}function v(T){return T===null||Cn(T)?(e.exit("mathFlowValue"),y(T)):(e.consume(T),v)}function w(T){return e.exit("mathFlow"),t(T)}function _(T,k,M){let D=0;return Nr(T,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function I(U){return T.enter("mathFlowFence"),T.enter("mathFlowFenceSequence"),P(U)}function P(U){return U===36?(D++,T.consume(U),P):D<i?M(U):(T.exit("mathFlowFenceSequence"),Nr(T,B,"whitespace")(U))}function B(U){return U===null||Cn(U)?(T.exit("mathFlowFence"),k(U)):M(U)}}}function pQe(e,t,n){const r=this;return o;function o(i){return i===null?t(i):(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),s)}function s(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}function mQe(e){let n=(e||{}).singleDollarTextMath;return n==null&&(n=!0),{tokenize:r,resolve:gQe,previous:bQe,name:"mathText"};function r(o,s,i){let a=0,l,c;return u;function u(v){return o.enter("mathText"),o.enter("mathTextSequence"),f(v)}function f(v){return v===36?(o.consume(v),a++,f):a<2&&!n?i(v):(o.exit("mathTextSequence"),m(v))}function m(v){return v===null?i(v):v===36?(c=o.enter("mathTextSequence"),l=0,y(v)):v===32?(o.enter("space"),o.consume(v),o.exit("space"),m):Cn(v)?(o.enter("lineEnding"),o.consume(v),o.exit("lineEnding"),m):(o.enter("mathTextData"),g(v))}function g(v){return v===null||v===32||v===36||Cn(v)?(o.exit("mathTextData"),m(v)):(o.consume(v),g)}function y(v){return v===36?(o.consume(v),l++,y):l===a?(o.exit("mathTextSequence"),o.exit("mathText"),s(v)):(c.type="mathTextData",g(v))}}}function gQe(e){let t=e.length-4,n=3,r,o;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="mathTextData"){e[t][1].type="mathTextPadding",e[n][1].type="mathTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)o===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(o=r):(r===t||e[r][1].type==="lineEnding")&&(e[o][1].type="mathTextData",r!==o+2&&(e[o][1].end=e[r-1][1].end,e.splice(o+2,r-o-2),t-=r-o-2,r=o+2),o=void 0);return e}function bQe(e){return e!==36||this.events[this.events.length-1][1].type==="characterEscape"}function yQe(e){return{flow:{36:fQe},text:{36:mQe(e)}}}const vQe={};function NI(e){const t=this,n=e||vQe,r=t.data(),o=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);o.push(yQe(n)),s.push(uQe()),i.push(dQe(n))}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wQe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),OU=e=>{const t=wQe(e);return t.charAt(0).toUpperCase()+t.slice(1)},sse=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),EQe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Qe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQe=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>x.createElement("svg",{ref:l,..._Qe,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:sse("lucide",o),...!s&&!EQe(a)&&{"aria-hidden":"true"},...a},[...i.map(([c,u])=>x.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=(e,t)=>{const n=x.forwardRef(({className:r,...o},s)=>x.createElement(SQe,{ref:s,iconNode:t,className:sse(`lucide-${xQe(OU(e))}`,`lucide-${e}`,r),...o}));return n.displayName=OU(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ise=ah("check",TQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ase=ah("copy",CQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],JC=ah("download",kQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],NQe=ah("loader-circle",AQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],RQe=ah("maximize-2",IQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],DQe=ah("rotate-ccw",MQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],PQe=ah("x",OQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],$Qe=ah("zoom-in",LQe);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],BQe=ah("zoom-out",FQe),zQe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,jQe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,UQe={};function PU(e,t){return(UQe.jsx?jQe:zQe).test(e)}var Qg={},xA,LU;function HQe(){if(LU)return xA;LU=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,i=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,c="/",u="*",f="",m="comment",g="declaration";function y(w,_){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];_=_||{};var T=1,k=1;function M(Z){var X=Z.match(t);X&&(T+=X.length);var J=Z.lastIndexOf(l);k=~J?Z.length-J:k+Z.length}function D(){var Z={line:T,column:k};return function(X){return X.position=new I(Z),U(),X}}function I(Z){this.start=Z,this.end={line:T,column:k},this.source=_.source}I.prototype.content=w;function P(Z){var X=new Error(_.source+":"+T+":"+k+": "+Z);if(X.reason=Z,X.filename=_.source,X.line=T,X.column=k,X.source=w,!_.silent)throw X}function B(Z){var X=Z.exec(w);if(X){var J=X[0];return M(J),w=w.slice(J.length),X}}function U(){B(n)}function j(Z){var X;for(Z=Z||[];X=H();)X!==!1&&Z.push(X);return Z}function H(){var Z=D();if(!(c!=w.charAt(0)||u!=w.charAt(1))){for(var X=2;f!=w.charAt(X)&&(u!=w.charAt(X)||c!=w.charAt(X+1));)++X;if(X+=2,f===w.charAt(X-1))return P("End of comment missing");var J=w.slice(2,X-2);return k+=2,M(J),w=w.slice(X),k+=2,Z({type:m,comment:J})}}function q(){var Z=D(),X=B(r);if(X){if(H(),!B(o))return P("property missing ':'");var J=B(s),ee=Z({type:g,property:v(X[0].replace(e,f)),value:J?v(J[0].replace(e,f)):f});return B(i),ee}}function z(){var Z=[];j(Z);for(var X;X=q();)X!==!1&&(Z.push(X),j(Z));return Z}return U(),z()}function v(w){return w?w.replace(a,f):f}return xA=y,xA}var $U;function VQe(){if($U)return Qg;$U=1;var e=Qg&&Qg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.default=n;const t=e(HQe());function n(r,o){let s=null;if(!r||typeof r!="string")return s;const i=(0,t.default)(r),a=typeof o=="function";return i.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:u}=l;a?o(c,u,l):u&&(s=s||{},s[c]=u)}),s}return Qg}var tv={},FU;function qQe(){if(FU)return tv;FU=1,Object.defineProperty(tv,"__esModule",{value:!0}),tv.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,s=function(c){return!c||n.test(c)||e.test(c)},i=function(c,u){return u.toUpperCase()},a=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),s(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(o,a):c=c.replace(r,a),c.replace(t,i))};return tv.camelCase=l,tv}var nv,BU;function GQe(){if(BU)return nv;BU=1;var e=nv&&nv.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},t=e(VQe()),n=qQe();function r(o,s){var i={};return!o||typeof o!="string"||(0,t.default)(o,function(a,l){a&&l&&(i[(0,n.camelCase)(a,s)]=l)}),i}return r.default=r,nv=r,nv}var WQe=GQe();const YQe=km(WQe);function nx(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?zU(e.position):"start"in e||"end"in e?zU(e):"line"in e||"column"in e?II(e):""}function II(e){return jU(e&&e.line)+":"+jU(e&&e.column)}function zU(e){return II(e&&e.start)+"-"+II(e&&e.end)}function jU(e){return e&&typeof e=="number"?e:1}class Sa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let o="",s={},i=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?o=t:!s.cause&&t&&(i=!0,o=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=a?a.line:void 0,this.name=nx(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=i&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Sa.prototype.file="";Sa.prototype.name="";Sa.prototype.reason="";Sa.prototype.message="";Sa.prototype.stack="";Sa.prototype.column=void 0;Sa.prototype.line=void 0;Sa.prototype.ancestors=void 0;Sa.prototype.cause=void 0;Sa.prototype.fatal=void 0;Sa.prototype.place=void 0;Sa.prototype.ruleId=void 0;Sa.prototype.source=void 0;const BM={}.hasOwnProperty,KQe=new Map,ZQe=/[A-Z]/g,JQe=new Set(["table","tbody","thead","tfoot","tr"]),XQe=new Set(["td","th"]),lse="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function QQe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=aet(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=iet(n,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?K0:Lw,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=cse(o,e,void 0);return s&&typeof s!="string"?s:o.create(e,o.Fragment,{children:s||void 0},void 0)}function cse(e,t,n){if(t.type==="element")return eet(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return tet(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return ret(e,t,n);if(t.type==="mdxjsEsm")return net(e,t);if(t.type==="root")return oet(e,t,n);if(t.type==="text")return set(e,t)}function eet(e,t,n){const r=e.schema;let o=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(o=K0,e.schema=o),e.ancestors.push(t);const s=dse(e,t.tagName,!1),i=cet(e,t);let a=jM(e,t);return JQe.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!RC(l):!0})),use(e,i,s,t),zM(i,a),e.ancestors.pop(),e.schema=r,e.create(t,s,i,n)}function tet(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Jx(e,t.position)}function net(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Jx(e,t.position)}function ret(e,t,n){const r=e.schema;let o=r;t.name==="svg"&&r.space==="html"&&(o=K0,e.schema=o),e.ancestors.push(t);const s=t.name===null?e.Fragment:dse(e,t.name,!0),i=uet(e,t),a=jM(e,t);return use(e,i,s,t),zM(i,a),e.ancestors.pop(),e.schema=r,e.create(t,s,i,n)}function oet(e,t,n){const r={};return zM(r,jM(e,t)),e.create(t,e.Fragment,r,n)}function set(e,t){return t.value}function use(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function zM(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function iet(e,t,n){return r;function r(o,s,i,a){const c=Array.isArray(i.children)?n:t;return a?c(s,i,a):c(s,i)}}function aet(e,t){return n;function n(r,o,s,i){const a=Array.isArray(s.children),l=Rd(r);return t(o,s,i,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function cet(e,t){const n={};let r,o;for(o in t.properties)if(o!=="children"&&BM.call(t.properties,o)){const s=det(e,o,t.properties[o]);if(s){const[i,a]=s;e.tableCellAlignToStyle&&i==="align"&&typeof a=="string"&&XQe.has(t.tagName)?r=a:n[i]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function uet(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const i=s.expression;i.type;const a=i.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else Jx(e,t.position);else{const o=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else Jx(e,t.position);else s=r.value===null?!0:r.value;n[o]=s}return n}function jM(e,t){const n=[];let r=-1;const o=e.passKeys?new Map:KQe;for(;++r<t.children.length;){const s=t.children[r];let i;if(e.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=o.get(l)||0;i=l+"-"+c,o.set(l,c+1)}}const a=cse(e,s,i);a!==void 0&&n.push(a)}return n}function det(e,t,n){const r=IC(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?q7(n):G7(n)),r.property==="style"){let o=typeof n=="object"?n:fet(e,String(n));return e.stylePropertyNameCase==="css"&&(o=het(o)),["style",o]}return[e.elementAttributeNameCase==="react"&&r.space?Fze[r.property]||r.property:r.attribute,n]}}function fet(e,t){try{return YQe(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,o=new Sa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=lse+"#cannot-parse-style-attribute",o}}function dse(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const o=t.split(".");let s=-1,i;for(;++s<o.length;){const a=PU(o[s])?{type:"Identifier",name:o[s]}:{type:"Literal",value:o[s]};i=i?{type:"MemberExpression",object:i,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=i}else r=PU(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const o=r.value;return BM.call(e.components,o)?e.components[o]:o}if(e.evaluater)return e.evaluater.evaluateExpression(r);Jx(e)}function Jx(e,t){const n=new Sa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=lse+"#cannot-handle-mdx-estrees-without-createevaluater",n}function het(e){const t={};let n;for(n in e)BM.call(e,n)&&(t[pet(n)]=e[n]);return t}function pet(e){let t=e.replace(ZQe,met);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function met(e){return"-"+e.toLowerCase()}const get={tokenize:bet};function bet(e){const t=e.attempt(this.parser.constructs.contentInitial,r,o);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Nr(e,t,"linePrefix")}function o(a){return e.enter("paragraph"),s(a)}function s(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,i(a)}function i(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Cn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),i)}}const yet={tokenize:vet},UU={tokenize:xet};function vet(e){const t=this,n=[];let r=0,o,s,i;return a;function a(k){if(r<n.length){const M=n[r];return t.containerState=M[1],e.attempt(M[0].continuation,l,c)(k)}return c(k)}function l(k){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&T();const M=t.events.length;let D=M,I;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){I=t.events[D][1].end;break}_(r);let P=M;for(;P<t.events.length;)t.events[P][1].end={...I},P++;return ca(t.events,D+1,0,t.events.slice(M)),t.events.length=P,c(k)}return a(k)}function c(k){if(r===n.length){if(!o)return m(k);if(o.currentConstruct&&o.currentConstruct.concrete)return y(k);t.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(UU,u,f)(k)}function u(k){return o&&T(),_(r),m(k)}function f(k){return t.parser.lazy[t.now().line]=r!==n.length,i=t.now().offset,y(k)}function m(k){return t.containerState={},e.attempt(UU,g,y)(k)}function g(k){return r++,n.push([t.currentConstruct,t.containerState]),m(k)}function y(k){if(k===null){o&&T(),_(0),e.consume(k);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:s}),v(k)}function v(k){if(k===null){w(e.exit("chunkFlow"),!0),_(0),e.consume(k);return}return Cn(k)?(e.consume(k),w(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(k),v)}function w(k,M){const D=t.sliceStream(k);if(M&&D.push(null),k.previous=s,s&&(s.next=k),s=k,o.defineSkip(k.start),o.write(D),t.parser.lazy[k.start.line]){let I=o.events.length;for(;I--;)if(o.events[I][1].start.offset<i&&(!o.events[I][1].end||o.events[I][1].end.offset>i))return;const P=t.events.length;let B=P,U,j;for(;B--;)if(t.events[B][0]==="exit"&&t.events[B][1].type==="chunkFlow"){if(U){j=t.events[B][1].end;break}U=!0}for(_(r),I=P;I<t.events.length;)t.events[I][1].end={...j},I++;ca(t.events,B+1,0,t.events.slice(P)),t.events.length=I}}function _(k){let M=n.length;for(;M-- >k;){const D=n[M];t.containerState=D[1],D[0].exit.call(t,e)}n.length=k}function T(){o.write([null]),s=void 0,o=void 0,t.containerState._closeFlow=void 0}}function xet(e,t,n){return Nr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const wet={tokenize:Eet};function Eet(e){const t=this,n=e.attempt(Vw,r,e.attempt(this.parser.constructs.flowInitial,o,Nr(e,e.attempt(this.parser.constructs.flow,o,e.attempt(WJe,o)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function o(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const _et={resolveAll:hse()},Tet=fse("string"),Cet=fse("text");function fse(e){return{resolveAll:hse(e==="text"?ket:void 0),tokenize:t};function t(n){const r=this,o=this.parser.constructs[e],s=n.attempt(o,i,a);return i;function i(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const f=o[u];let m=-1;if(f)for(;++m<f.length;){const g=f[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function hse(e){return t;function t(n,r){let o=-1,s;for(;++o<=n.length;)s===void 0?n[o]&&n[o][1].type==="data"&&(s=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==s+2&&(n[s][1].end=n[o-1][1].end,n.splice(s+2,o-s-2),o=s+2),s=void 0);return e?e(n,r):n}}function ket(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],o=t.sliceStream(r);let s=o.length,i=-1,a=0,l;for(;s--;){const c=o[s];if(typeof c=="string"){for(i=c.length;c.charCodeAt(i-1)===32;)a++,i--;if(i)break;i=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const c={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?i:r.start._bufferIndex+i,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}const Aet={42:ll,43:ll,45:ll,48:ll,49:ll,50:ll,51:ll,52:ll,53:ll,54:ll,55:ll,56:ll,57:ll,62:Xoe},Net={91:XJe},Iet={[-2]:yA,[-1]:yA,32:yA},Ret={35:oXe,42:z_,45:[RU,z_],60:lXe,61:RU,95:z_,96:NU,126:NU},Met={38:ese,92:Qoe},Det={[-5]:vA,[-4]:vA,[-3]:vA,33:CXe,38:ese,42:AI,60:[AJe,mXe],91:AXe,92:[nXe,Qoe],93:FM,95:AI,96:jJe},Oet={null:[AI,_et]},Pet={null:[42,95]},Let={null:[]},$et=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Pet,contentInitial:Net,disable:Let,document:Aet,flow:Ret,flowInitial:Iet,insideSpan:Oet,string:Met,text:Det},Symbol.toStringTag,{value:"Module"}));function Fet(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},s=[];let i=[],a=[];const l={attempt:P(D),check:P(I),consume:T,enter:k,exit:M,interrupt:P(I,{interrupt:!0})},c={code:null,containerState:{},defineSkip:v,events:[],now:y,parser:e,previous:null,sliceSerialize:m,sliceStream:g,write:f};let u=t.tokenize.call(c,l);return t.resolveAll&&s.push(t),c;function f(H){return i=aa(i,H),w(),i[i.length-1]!==null?[]:(B(t,0),c.events=Bb(s,c.events,c),c.events)}function m(H,q){return zet(g(H),q)}function g(H){return Bet(i,H)}function y(){const{_bufferIndex:H,_index:q,line:z,column:Z,offset:X}=r;return{_bufferIndex:H,_index:q,line:z,column:Z,offset:X}}function v(H){o[H.line]=H.column,j()}function w(){let H;for(;r._index<i.length;){const q=i[r._index];if(typeof q=="string")for(H=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===H&&r._bufferIndex<q.length;)_(q.charCodeAt(r._bufferIndex));else _(q)}}function _(H){u=u(H)}function T(H){Cn(H)?(r.line++,r.column=1,r.offset+=H===-3?2:1,j()):H!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=H}function k(H,q){const z=q||{};return z.type=H,z.start=y(),c.events.push(["enter",z,c]),a.push(z),z}function M(H){const q=a.pop();return q.end=y(),c.events.push(["exit",q,c]),q}function D(H,q){B(H,q.from)}function I(H,q){q.restore()}function P(H,q){return z;function z(Z,X,J){let ee,re,ie,K;return Array.isArray(Z)?se(Z):"tokenize"in Z?se([Z]):te(Z);function te(Ce){return he;function he(Fe){const Oe=Fe!==null&&Ce[Fe],Re=Fe!==null&&Ce.null,nt=[...Array.isArray(Oe)?Oe:Oe?[Oe]:[],...Array.isArray(Re)?Re:Re?[Re]:[]];return se(nt)(Fe)}}function se(Ce){return ee=Ce,re=0,Ce.length===0?J:Q(Ce[re])}function Q(Ce){return he;function he(Fe){return K=U(),ie=Ce,Ce.partial||(c.currentConstruct=Ce),Ce.name&&c.parser.constructs.disable.null.includes(Ce.name)?ge():Ce.tokenize.call(q?Object.assign(Object.create(c),q):c,l,Te,ge)(Fe)}}function Te(Ce){return H(ie,K),X}function ge(Ce){return K.restore(),++re<ee.length?Q(ee[re]):J}}}function B(H,q){H.resolveAll&&!s.includes(H)&&s.push(H),H.resolve&&ca(c.events,q,c.events.length-q,H.resolve(c.events.slice(q),c)),H.resolveTo&&(c.events=H.resolveTo(c.events,c))}function U(){const H=y(),q=c.previous,z=c.currentConstruct,Z=c.events.length,X=Array.from(a);return{from:Z,restore:J};function J(){r=H,c.previous=q,c.currentConstruct=z,c.events.length=Z,a=X,j()}}function j(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}function Bet(e,t){const n=t.start._index,r=t.start._bufferIndex,o=t.end._index,s=t.end._bufferIndex;let i;if(n===o)i=[e[n].slice(r,s)];else{if(i=e.slice(n,o),r>-1){const a=i[0];typeof a=="string"?i[0]=a.slice(r):i.shift()}s>0&&i.push(e[o].slice(0,s))}return i}function zet(e,t){let n=-1;const r=[];let o;for(;++n<e.length;){const s=e[n];let i;if(typeof s=="string")i=s;else switch(s){case-5:{i="\r";break}case-4:{i=`
`;break}case-3:{i=`\r
`;break}case-2:{i=t?" ":"	";break}case-1:{if(!t&&o)continue;i=" ";break}default:i=String.fromCharCode(s)}o=s===-2,r.push(i)}return r.join("")}function jet(e){const r={constructs:Hoe([$et,...(e||{}).extensions||[]]),content:o(get),defined:[],document:o(yet),flow:o(wet),lazy:{},string:o(Tet),text:o(Cet)};return r;function o(s){return i;function i(a){return Fet(r,s,a)}}}function Uet(e){for(;!tse(e););return e}const HU=/[\0\t\n\r]/g;function Het(){let e=1,t="",n=!0,r;return o;function o(s,i,a){const l=[];let c,u,f,m,g;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(i||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(HU.lastIndex=f,c=HU.exec(s),m=c&&c.index!==void 0?c.index:s.length,g=s.charCodeAt(m),!c){t=s.slice(f);break}if(g===10&&f===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<m&&(l.push(s.slice(f,m)),e+=m-f),g){case 0:{l.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,l.push(-2);e++<u;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}f=m+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const pse={}.hasOwnProperty;function Vet(e,t,n){return typeof t!="string"&&(n=t,t=void 0),qet(n)(Uet(jet(n).document().write(Het()(e,t,!0))))}function qet(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(vt),autolinkProtocol:U,autolinkEmail:U,atxHeading:s(Yt),blockQuote:s(Re),characterEscape:U,characterReference:U,codeFenced:s(nt),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:s(nt,i),codeText:s(ue,i),codeTextData:U,data:U,codeFlowValue:U,definition:s(et),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:s(ut),hardBreakEscape:s(Ht),hardBreakTrailing:s(Ht),htmlFlow:s(Pt,i),htmlFlowData:U,htmlText:s(Pt,i),htmlTextData:U,image:s(tn),label:i,link:s(vt),listItem:s(Ne),listItemValue:m,listOrdered:s(me,f),listUnordered:s(me),paragraph:s($e),reference:Q,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:s(Yt),strong:s(Je),thematicBreak:s(Ve)},exit:{atxHeading:l(),atxHeadingSequence:D,autolink:l(),autolinkEmail:Oe,autolinkProtocol:Fe,blockQuote:l(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:Ce,characterReference:he,codeFenced:l(w),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:j,codeIndented:l(_),codeText:l(X),codeTextData:j,data:j,definition:l(),definitionDestinationString:M,definitionLabelString:T,definitionTitleString:k,emphasis:l(),hardBreakEscape:l(q),hardBreakTrailing:l(q),htmlFlow:l(z),htmlFlowData:j,htmlText:l(Z),htmlTextData:j,image:l(ee),label:ie,labelText:re,lineEnding:H,link:l(J),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Te,resourceDestinationString:K,resourceTitleString:te,resource:se,setextHeading:l(B),setextHeadingLineSequence:P,setextHeadingText:I,strong:l(),thematicBreak:l()}};mse(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(_e){let W={type:"root",children:[]};const L={stack:[W],tokenStack:[],config:t,enter:a,exit:c,buffer:i,resume:u,data:n},F=[];let ce=-1;for(;++ce<_e.length;)if(_e[ce][1].type==="listOrdered"||_e[ce][1].type==="listUnordered")if(_e[ce][0]==="enter")F.push(ce);else{const we=F.pop();ce=o(_e,we,ce)}for(ce=-1;++ce<_e.length;){const we=t[_e[ce][0]];pse.call(we,_e[ce][1].type)&&we[_e[ce][1].type].call(Object.assign({sliceSerialize:_e[ce][2].sliceSerialize},L),_e[ce][1])}if(L.tokenStack.length>0){const we=L.tokenStack[L.tokenStack.length-1];(we[1]||VU).call(L,void 0,we[0])}for(W.position={start:Zh(_e.length>0?_e[0][1].start:{line:1,column:1,offset:0}),end:Zh(_e.length>0?_e[_e.length-2][1].end:{line:1,column:1,offset:0})},ce=-1;++ce<t.transforms.length;)W=t.transforms[ce](W)||W;return W}function o(_e,W,L){let F=W-1,ce=-1,we=!1,ze,Be,ct,ln;for(;++F<=L;){const jt=_e[F];switch(jt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{jt[0]==="enter"?ce++:ce--,ln=void 0;break}case"lineEndingBlank":{jt[0]==="enter"&&(ze&&!ln&&!ce&&!ct&&(ct=F),ln=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ln=void 0}if(!ce&&jt[0]==="enter"&&jt[1].type==="listItemPrefix"||ce===-1&&jt[0]==="exit"&&(jt[1].type==="listUnordered"||jt[1].type==="listOrdered")){if(ze){let fn=F;for(Be=void 0;fn--;){const an=_e[fn];if(an[1].type==="lineEnding"||an[1].type==="lineEndingBlank"){if(an[0]==="exit")continue;Be&&(_e[Be][1].type="lineEndingBlank",we=!0),an[1].type="lineEnding",Be=fn}else if(!(an[1].type==="linePrefix"||an[1].type==="blockQuotePrefix"||an[1].type==="blockQuotePrefixWhitespace"||an[1].type==="blockQuoteMarker"||an[1].type==="listItemIndent"))break}ct&&(!Be||ct<Be)&&(ze._spread=!0),ze.end=Object.assign({},Be?_e[Be][1].start:jt[1].end),_e.splice(Be||F,0,["exit",ze,jt[2]]),F++,L++}if(jt[1].type==="listItemPrefix"){const fn={type:"listItem",_spread:!1,start:Object.assign({},jt[1].start),end:void 0};ze=fn,_e.splice(F,0,["enter",fn,jt[2]]),F++,L++,ct=void 0,ln=!0}}}return _e[W][1]._spread=we,L}function s(_e,W){return L;function L(F){a.call(this,_e(F),F),W&&W.call(this,F)}}function i(){this.stack.push({type:"fragment",children:[]})}function a(_e,W,L){this.stack[this.stack.length-1].children.push(_e),this.stack.push(_e),this.tokenStack.push([W,L||void 0]),_e.position={start:Zh(W.start),end:void 0}}function l(_e){return W;function W(L){_e&&_e.call(this,L),c.call(this,L)}}function c(_e,W){const L=this.stack.pop(),F=this.tokenStack.pop();if(F)F[0].type!==_e.type&&(W?W.call(this,_e,F[0]):(F[1]||VU).call(this,_e,F[0]));else throw new Error("Cannot close `"+_e.type+"` ("+nx({start:_e.start,end:_e.end})+"): its not open");L.position.end=Zh(_e.end)}function u(){return OM(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(_e){if(this.data.expectingFirstListItemValue){const W=this.stack[this.stack.length-2];W.start=Number.parseInt(this.sliceSerialize(_e),10),this.data.expectingFirstListItemValue=void 0}}function g(){const _e=this.resume(),W=this.stack[this.stack.length-1];W.lang=_e}function y(){const _e=this.resume(),W=this.stack[this.stack.length-1];W.meta=_e}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const _e=this.resume(),W=this.stack[this.stack.length-1];W.value=_e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const _e=this.resume(),W=this.stack[this.stack.length-1];W.value=_e.replace(/(\r?\n|\r)$/g,"")}function T(_e){const W=this.resume(),L=this.stack[this.stack.length-1];L.label=W,L.identifier=yu(this.sliceSerialize(_e)).toLowerCase()}function k(){const _e=this.resume(),W=this.stack[this.stack.length-1];W.title=_e}function M(){const _e=this.resume(),W=this.stack[this.stack.length-1];W.url=_e}function D(_e){const W=this.stack[this.stack.length-1];if(!W.depth){const L=this.sliceSerialize(_e).length;W.depth=L}}function I(){this.data.setextHeadingSlurpLineEnding=!0}function P(_e){const W=this.stack[this.stack.length-1];W.depth=this.sliceSerialize(_e).codePointAt(0)===61?1:2}function B(){this.data.setextHeadingSlurpLineEnding=void 0}function U(_e){const L=this.stack[this.stack.length-1].children;let F=L[L.length-1];(!F||F.type!=="text")&&(F=Le(),F.position={start:Zh(_e.start),end:void 0},L.push(F)),this.stack.push(F)}function j(_e){const W=this.stack.pop();W.value+=this.sliceSerialize(_e),W.position.end=Zh(_e.end)}function H(_e){const W=this.stack[this.stack.length-1];if(this.data.atHardBreak){const L=W.children[W.children.length-1];L.position.end=Zh(_e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(W.type)&&(U.call(this,_e),j.call(this,_e))}function q(){this.data.atHardBreak=!0}function z(){const _e=this.resume(),W=this.stack[this.stack.length-1];W.value=_e}function Z(){const _e=this.resume(),W=this.stack[this.stack.length-1];W.value=_e}function X(){const _e=this.resume(),W=this.stack[this.stack.length-1];W.value=_e}function J(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const W=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=W,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function ee(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const W=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=W,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function re(_e){const W=this.sliceSerialize(_e),L=this.stack[this.stack.length-2];L.label=XZe(W),L.identifier=yu(W).toLowerCase()}function ie(){const _e=this.stack[this.stack.length-1],W=this.resume(),L=this.stack[this.stack.length-1];if(this.data.inReference=!0,L.type==="link"){const F=_e.children;L.children=F}else L.alt=W}function K(){const _e=this.resume(),W=this.stack[this.stack.length-1];W.url=_e}function te(){const _e=this.resume(),W=this.stack[this.stack.length-1];W.title=_e}function se(){this.data.inReference=void 0}function Q(){this.data.referenceType="collapsed"}function Te(_e){const W=this.resume(),L=this.stack[this.stack.length-1];L.label=W,L.identifier=yu(this.sliceSerialize(_e)).toLowerCase(),this.data.referenceType="full"}function ge(_e){this.data.characterReferenceType=_e.type}function Ce(_e){const W=this.sliceSerialize(_e),L=this.data.characterReferenceType;let F;L?(F=Uoe(W,L==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):F=LM(W);const ce=this.stack[this.stack.length-1];ce.value+=F}function he(_e){const W=this.stack.pop();W.position.end=Zh(_e.end)}function Fe(_e){j.call(this,_e);const W=this.stack[this.stack.length-1];W.url=this.sliceSerialize(_e)}function Oe(_e){j.call(this,_e);const W=this.stack[this.stack.length-1];W.url="mailto:"+this.sliceSerialize(_e)}function Re(){return{type:"blockquote",children:[]}}function nt(){return{type:"code",lang:null,meta:null,value:""}}function ue(){return{type:"inlineCode",value:""}}function et(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ut(){return{type:"emphasis",children:[]}}function Yt(){return{type:"heading",depth:0,children:[]}}function Ht(){return{type:"break"}}function Pt(){return{type:"html",value:""}}function tn(){return{type:"image",title:null,url:"",alt:null}}function vt(){return{type:"link",title:null,url:"",children:[]}}function me(_e){return{type:"list",ordered:_e.type==="listOrdered",start:null,spread:_e._spread,children:[]}}function Ne(_e){return{type:"listItem",spread:_e._spread,checked:null,children:[]}}function $e(){return{type:"paragraph",children:[]}}function Je(){return{type:"strong",children:[]}}function Le(){return{type:"text",value:""}}function Ve(){return{type:"thematicBreak"}}}function Zh(e){return{line:e.line,column:e.column,offset:e.offset}}function mse(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?mse(e,r):Get(e,r)}}function Get(e,t){let n;for(n in t)if(pse.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function VU(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+nx({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+nx({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+nx({start:t.start,end:t.end})+") is still open")}function Wet(e){const t=this;t.parser=n;function n(r){return Vet(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Yet(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Ket(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Zet(e,t){const n=t.value?t.value+`
`:"",r={},o=t.lang?t.lang.split(/\s+/):[];o.length>0&&(r.className=["language-"+o[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function Jet(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Xet(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Qet(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),o=zb(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let i,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=s+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)}function ett(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ttt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function gse(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const o=e.all(t),s=o[0];s&&s.type==="text"?s.value="["+s.value:o.unshift({type:"text",value:"["});const i=o[o.length-1];return i&&i.type==="text"?i.value+=r:o.push({type:"text",value:r}),o}function ntt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return gse(e,t);const o={src:zb(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(o.title=r.title);const s={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,s),e.applyData(t,s)}function rtt(e,t){const n={src:zb(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function ott(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function stt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return gse(e,t);const o={href:zb(r.url||"")};r.title!==null&&r.title!==void 0&&(o.title=r.title);const s={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function itt(e,t){const n={href:zb(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function att(e,t,n){const r=e.all(t),o=n?ltt(n):bse(t),s={},i=[];if(typeof t.checked=="boolean"){const u=r[0];let f;u&&u.type==="element"&&u.tagName==="p"?f=u:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(o||a!==0||u.type!=="element"||u.tagName!=="p")&&i.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!o?i.push(...u.children):i.push(u)}const l=r[r.length-1];l&&(o||l.type!=="element"||l.tagName!=="p")&&i.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:i};return e.patch(t,c),e.applyData(t,c)}function ltt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=bse(n[r])}return t}function bse(e){const t=e.spread;return t??e.children.length>1}function ctt(e,t){const n={},r=e.all(t);let o=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++o<r.length;){const i=r[o];if(i.type==="element"&&i.tagName==="li"&&i.properties&&Array.isArray(i.properties.className)&&i.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function utt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function dtt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function ftt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function htt(e,t){const n=e.all(t),r=n.shift(),o=[];if(r){const i={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],i),o.push(i)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Rd(t.children[1]),l=KC(t.children[t.children.length-1]);a&&l&&(i.position={start:a,end:l}),o.push(i)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,s),e.applyData(t,s)}function ptt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",i=n&&n.type==="table"?n.align:void 0,a=i?i.length:t.children.length;let l=-1;const c=[];for(;++l<a;){const f=t.children[l],m={},g=i?i[l]:void 0;g&&(m.align=g);let y={type:"element",tagName:s,properties:m,children:[]};f&&(y.children=e.all(f),e.patch(f,y),y=e.applyData(f,y)),c.push(y)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,u),e.applyData(t,u)}function mtt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const qU=9,GU=32;function gtt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),o=0;const s=[];for(;r;)s.push(WU(t.slice(o,r.index),o>0,!0),r[0]),o=r.index+r[0].length,r=n.exec(t);return s.push(WU(t.slice(o),o>0,!1)),s.join("")}function WU(e,t,n){let r=0,o=e.length;if(t){let s=e.codePointAt(r);for(;s===qU||s===GU;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(o-1);for(;s===qU||s===GU;)o--,s=e.codePointAt(o-1)}return o>r?e.slice(r,o):""}function btt(e,t){const n={type:"text",value:gtt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function ytt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const vtt={blockquote:Yet,break:Ket,code:Zet,delete:Jet,emphasis:Xet,footnoteReference:Qet,heading:ett,html:ttt,imageReference:ntt,image:rtt,inlineCode:ott,linkReference:stt,link:itt,listItem:att,list:ctt,paragraph:utt,root:dtt,strong:ftt,table:htt,tableCell:mtt,tableRow:ptt,text:btt,thematicBreak:ytt,toml:i_,yaml:i_,definition:i_,footnoteDefinition:i_};function i_(){}function xtt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function wtt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Ett(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||xtt,r=e.options.footnoteBackLabel||wtt,o=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[l]);if(!c)continue;const u=e.all(c),f=String(c.identifier).toUpperCase(),m=zb(f.toLowerCase());let g=0;const y=[],v=e.footnoteCounts.get(f);for(;v!==void 0&&++g<=v;){y.length>0&&y.push({type:"text",value:" "});let T=typeof n=="string"?n:n(l,g);typeof T=="string"&&(T={type:"text",value:T}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const w=u[u.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const T=w.children[w.children.length-1];T&&T.type==="text"?T.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...y)}else u.push(...y);const _={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(u,!0)};e.patch(c,_),a.push(_)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...ub(i),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const RI={}.hasOwnProperty,_tt={};function Stt(e,t){const n=t||_tt,r=new Map,o=new Map,s=new Map,i={...vtt,...n.handlers},a={all:c,applyData:Ctt,definitionById:r,footnoteById:o,footnoteCounts:s,footnoteOrder:[],handlers:i,one:l,options:n,patch:Ttt,wrap:Att};return lb(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const f=u.type==="definition"?r:o,m=String(u.identifier).toUpperCase();f.has(m)||f.set(m,u)}}),a;function l(u,f){const m=u.type,g=a.handlers[m];if(RI.call(a.handlers,m)&&g)return g(a,u,f);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in u){const{children:v,...w}=u,_=ub(w);return _.children=a.all(u),_}return ub(u)}return(a.options.unknownHandler||ktt)(a,u,f)}function c(u){const f=[];if("children"in u){const m=u.children;let g=-1;for(;++g<m.length;){const y=a.one(m[g],u);if(y){if(g&&m[g-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=YU(y.value)),!Array.isArray(y)&&y.type==="element")){const v=y.children[0];v&&v.type==="text"&&(v.value=YU(v.value))}Array.isArray(y)?f.push(...y):f.push(y)}}}return f}}function Ttt(e,t){e.position&&(t.position=VYe(e))}function Ctt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,o=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const i="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:i}}n.type==="element"&&s&&Object.assign(n.properties,ub(s)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function ktt(e,t){const n=t.data||{},r="value"in t&&!(RI.call(n,"hProperties")||RI.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Att(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function YU(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function KU(e,t){const n=Stt(e,t),r=n.one(e,void 0),o=Ett(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return o&&s.children.push({type:"text",value:`
`},o),s}function Ntt(e,t){return e&&"run"in e?async function(n,r){const o=KU(n,{file:r,...t});await e.run(o,r)}:function(n,r){return KU(n,{file:r,...e||t})}}function ZU(e){if(e)throw e}var wA,JU;function Itt(){if(JU)return wA;JU=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(c){return typeof Array.isArray=="function"?Array.isArray(c):t.call(c)==="[object Array]"},s=function(c){if(!c||t.call(c)!=="[object Object]")return!1;var u=e.call(c,"constructor"),f=c.constructor&&c.constructor.prototype&&e.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!f)return!1;var m;for(m in c);return typeof m>"u"||e.call(c,m)},i=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},a=function(c,u){if(u==="__proto__")if(e.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return wA=function l(){var c,u,f,m,g,y,v=arguments[0],w=1,_=arguments.length,T=!1;for(typeof v=="boolean"&&(T=v,v=arguments[1]||{},w=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});w<_;++w)if(c=arguments[w],c!=null)for(u in c)f=a(v,u),m=a(c,u),v!==m&&(T&&m&&(s(m)||(g=o(m)))?(g?(g=!1,y=f&&o(f)?f:[]):y=f&&s(f)?f:{},i(v,{name:u,newValue:l(T,y,m)})):typeof m<"u"&&i(v,{name:u,newValue:m}));return v},wA}var Rtt=Itt();const EA=km(Rtt);function MI(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Mtt(){const e=[],t={run:n,use:r};return t;function n(...o){let s=-1;const i=o.pop();if(typeof i!="function")throw new TypeError("Expected function as last argument, not "+i);a(null,...o);function a(l,...c){const u=e[++s];let f=-1;if(l){i(l);return}for(;++f<o.length;)(c[f]===null||c[f]===void 0)&&(c[f]=o[f]);o=c,u?Dtt(u,a)(...c):i(null,...c)}}function r(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),t}}function Dtt(e,t){let n;return r;function r(...i){const a=e.length>i.length;let l;a&&i.push(o);try{l=e.apply(this,i)}catch(c){const u=c;if(a&&n)throw u;return o(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,o):l instanceof Error?o(l):s(l))}function o(i,...a){n||(n=!0,t(i,...a))}function s(i){o(null,i)}}const id={basename:Ott,dirname:Ptt,extname:Ltt,join:$tt,sep:"/"};function Ott(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');qw(e);let n=0,r=-1,o=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;o--;)if(e.codePointAt(o)===47){if(s){n=o+1;break}}else r<0&&(s=!0,r=o+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let i=-1,a=t.length-1;for(;o--;)if(e.codePointAt(o)===47){if(s){n=o+1;break}}else i<0&&(s=!0,i=o+1),a>-1&&(e.codePointAt(o)===t.codePointAt(a--)?a<0&&(r=o):(a=-1,r=i));return n===r?r=i:r<0&&(r=e.length),e.slice(n,r)}function Ptt(e){if(qw(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Ltt(e){qw(e);let t=e.length,n=-1,r=0,o=-1,s=0,i;for(;t--;){const a=e.codePointAt(t);if(a===47){if(i){r=t+1;break}continue}n<0&&(i=!0,n=t+1),a===46?o<0?o=t:s!==1&&(s=1):o>-1&&(s=-1)}return o<0||n<0||s===0||s===1&&o===n-1&&o===r+1?"":e.slice(o,n)}function $tt(...e){let t=-1,n;for(;++t<e.length;)qw(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Ftt(n)}function Ftt(e){qw(e);const t=e.codePointAt(0)===47;let n=Btt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Btt(e,t){let n="",r=0,o=-1,s=0,i=-1,a,l;for(;++i<=e.length;){if(i<e.length)a=e.codePointAt(i);else{if(a===47)break;a=47}if(a===47){if(!(o===i-1||s===1))if(o!==i-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),o=i,s=0;continue}}else if(n.length>0){n="",r=0,o=i,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(o+1,i):n=e.slice(o+1,i),r=i-o-1;o=i,s=0}else a===46&&s>-1?s++:s=-1}return n}function qw(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const ztt={cwd:jtt};function jtt(){return"/"}function DI(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Utt(e){if(typeof e=="string")e=new URL(e);else if(!DI(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Htt(e)}function Htt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(t)}const _A=["history","path","basename","stem","extname","dirname"];class Vtt{constructor(t){let n;t?DI(t)?n={path:t}:typeof t=="string"||qtt(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":ztt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<_A.length;){const s=_A[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let o;for(o in n)_A.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?id.basename(this.path):void 0}set basename(t){TA(t,"basename"),SA(t,"basename"),this.path=id.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?id.dirname(this.path):void 0}set dirname(t){XU(this.basename,"dirname"),this.path=id.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?id.extname(this.path):void 0}set extname(t){if(SA(t,"extname"),XU(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=id.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){DI(t)&&(t=Utt(t)),TA(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?id.basename(this.path,this.extname):void 0}set stem(t){TA(t,"stem"),SA(t,"stem"),this.path=id.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const o=this.message(t,n,r);throw o.fatal=!0,o}info(t,n,r){const o=this.message(t,n,r);return o.fatal=void 0,o}message(t,n,r){const o=new Sa(t,n,r);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function SA(e,t){if(e&&e.includes(id.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+id.sep+"`")}function TA(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function XU(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function qtt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Gtt=(function(e){const r=this.constructor.prototype,o=r[e],s=function(){return o.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),Wtt={}.hasOwnProperty;class UM extends Gtt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Mtt()}copy(){const t=new UM;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(EA(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(AA("data",this.frozen),this.namespace[t]=n,this):Wtt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(AA("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const o=n.call(t,...r);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=a_(t),r=this.parser||this.Parser;return CA("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),CA("process",this.parser||this.Parser),kA("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(s,i){const a=a_(t),l=r.parse(a);r.run(l,a,function(u,f,m){if(u||!f||!m)return c(u);const g=f,y=r.stringify(g,m);Ztt(y)?m.value=y:m.result=y,c(u,m)});function c(u,f){u||!f?i(u):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),CA("processSync",this.parser||this.Parser),kA("processSync",this.compiler||this.Compiler),this.process(t,o),eH("processSync","process",n),r;function o(s,i){n=!0,ZU(s),r=i}}run(t,n,r){QU(t),this.freeze();const o=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(i,a){const l=a_(n);o.run(t,l,c);function c(u,f,m){const g=f||t;u?a(u):i?i(g):r(void 0,g,m)}}}runSync(t,n){let r=!1,o;return this.run(t,n,s),eH("runSync","run",r),o;function s(i,a){ZU(i),o=a,r=!0}}stringify(t,n){this.freeze();const r=a_(n),o=this.compiler||this.Compiler;return kA("stringify",o),QU(t),o(t,r)}use(t,...n){const r=this.attachers,o=this.namespace;if(AA("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):i(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...f]=c;l(u,f)}else i(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function i(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(o.settings=EA(!0,o.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const f=c[u];s(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let f=-1,m=-1;for(;++f<r.length;)if(r[f][0]===c){m=f;break}if(m===-1)r.push([c,...u]);else if(u.length>0){let[g,...y]=u;const v=r[m][1];MI(v)&&MI(g)&&(g=EA(!0,v,g)),r[m]=[c,g,...y]}}}}const Ytt=new UM().freeze();function CA(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function kA(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function AA(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function QU(e){if(!MI(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function eH(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function a_(e){return Ktt(e)?e:new Vtt(e)}function Ktt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Ztt(e){return typeof e=="string"||Jtt(e)}function Jtt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}function HM(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Um=HM();function yse(e){Um=e}var rx={exec:()=>null};function ao(e,t=""){let n=typeof e=="string"?e:e.source,r={replace:(o,s)=>{let i=typeof s=="string"?s:s.source;return i=i.replace(Fa.caret,"$1"),n=n.replace(o,i),r},getRegex:()=>new RegExp(n,t)};return r}var Xtt=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Fa={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Qtt=/^(?:[ \t]*(?:\n|$))+/,ent=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,tnt=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Gw=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,nnt=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,VM=/(?:[*+-]|\d{1,9}[.)])/,vse=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,xse=ao(vse).replace(/bull/g,VM).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),rnt=ao(vse).replace(/bull/g,VM).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),qM=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ont=/^[^\n]+/,GM=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,snt=ao(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",GM).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),int=ao(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,VM).getRegex(),XC="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",WM=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ant=ao("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",WM).replace("tag",XC).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),wse=ao(qM).replace("hr",Gw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",XC).getRegex(),lnt=ao(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",wse).getRegex(),YM={blockquote:lnt,code:ent,def:snt,fences:tnt,heading:nnt,hr:Gw,html:ant,lheading:xse,list:int,newline:Qtt,paragraph:wse,table:rx,text:ont},tH=ao("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Gw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",XC).getRegex(),cnt={...YM,lheading:rnt,table:tH,paragraph:ao(qM).replace("hr",Gw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",tH).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",XC).getRegex()},unt={...YM,html:ao(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",WM).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:rx,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ao(qM).replace("hr",Gw).replace("heading",` *#{1,6} *[^
]`).replace("lheading",xse).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},dnt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,fnt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ese=/^( {2,}|\\)\n(?!\s*$)/,hnt=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,QC=/[\p{P}\p{S}]/u,KM=/[\s\p{P}\p{S}]/u,_se=/[^\s\p{P}\p{S}]/u,pnt=ao(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,KM).getRegex(),Sse=/(?!~)[\p{P}\p{S}]/u,mnt=/(?!~)[\s\p{P}\p{S}]/u,gnt=/(?:[^\s\p{P}\p{S}]|~)/u,bnt=ao(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Xtt?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Tse=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,ynt=ao(Tse,"u").replace(/punct/g,QC).getRegex(),vnt=ao(Tse,"u").replace(/punct/g,Sse).getRegex(),Cse="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",xnt=ao(Cse,"gu").replace(/notPunctSpace/g,_se).replace(/punctSpace/g,KM).replace(/punct/g,QC).getRegex(),wnt=ao(Cse,"gu").replace(/notPunctSpace/g,gnt).replace(/punctSpace/g,mnt).replace(/punct/g,Sse).getRegex(),Ent=ao("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,_se).replace(/punctSpace/g,KM).replace(/punct/g,QC).getRegex(),_nt=ao(/\\(punct)/,"gu").replace(/punct/g,QC).getRegex(),Snt=ao(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Tnt=ao(WM).replace("(?:-->|$)","-->").getRegex(),Cnt=ao("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Tnt).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),n4=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,knt=ao(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",n4).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),kse=ao(/^!?\[(label)\]\[(ref)\]/).replace("label",n4).replace("ref",GM).getRegex(),Ase=ao(/^!?\[(ref)\](?:\[\])?/).replace("ref",GM).getRegex(),Ant=ao("reflink|nolink(?!\\()","g").replace("reflink",kse).replace("nolink",Ase).getRegex(),nH=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,ZM={_backpedal:rx,anyPunctuation:_nt,autolink:Snt,blockSkip:bnt,br:Ese,code:fnt,del:rx,emStrongLDelim:ynt,emStrongRDelimAst:xnt,emStrongRDelimUnd:Ent,escape:dnt,link:knt,nolink:Ase,punctuation:pnt,reflink:kse,reflinkSearch:Ant,tag:Cnt,text:hnt,url:rx},Nnt={...ZM,link:ao(/^!?\[(label)\]\((.*?)\)/).replace("label",n4).getRegex(),reflink:ao(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",n4).getRegex()},OI={...ZM,emStrongRDelimAst:wnt,emStrongLDelim:vnt,url:ao(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",nH).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:ao(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",nH).getRegex()},Int={...OI,br:ao(Ese).replace("{2,}","*").getRegex(),text:ao(OI.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},l_={normal:YM,gfm:cnt,pedantic:unt},rv={normal:ZM,gfm:OI,breaks:Int,pedantic:Nnt},Rnt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rH=e=>Rnt[e];function ed(e,t){if(t){if(Fa.escapeTest.test(e))return e.replace(Fa.escapeReplace,rH)}else if(Fa.escapeTestNoEncode.test(e))return e.replace(Fa.escapeReplaceNoEncode,rH);return e}function oH(e){try{e=encodeURI(e).replace(Fa.percentDecode,"%")}catch{return null}return e}function sH(e,t){var s;let n=e.replace(Fa.findPipe,(i,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(Fa.splitPipe),o=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(Fa.slashPipe,"|");return r}function ov(e,t,n){let r=e.length;if(r===0)return"";let o=0;for(;o<r&&e.charAt(r-o-1)===t;)o++;return e.slice(0,r-o)}function Mnt(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function iH(e,t,n,r,o){let s=t.href,i=t.title||null,a=e[1].replace(o.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:i,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function Dnt(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(r===null)return t;let o=r[1];return t.split(`
`).map(s=>{let i=s.match(n.other.beginningSpace);if(i===null)return s;let[a]=i;return a.length>=o.length?s.slice(o.length):s}).join(`
`)}var r4=class{constructor(t){Ze(this,"options");Ze(this,"rules");Ze(this,"lexer");this.options=t||Um}space(t){let n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){let n=this.rules.block.code.exec(t);if(n){let r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ov(r,`
`)}}}fences(t){let n=this.rules.block.fences.exec(t);if(n){let r=n[0],o=Dnt(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(t){let n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){let o=ov(r,"#");(this.options.pedantic||!o||this.rules.other.endingSpaceChar.test(o))&&(r=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){let n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:ov(n[0],`
`)}}blockquote(t){let n=this.rules.block.blockquote.exec(t);if(n){let r=ov(n[0],`
`).split(`
`),o="",s="",i=[];for(;r.length>0;){let a=!1,l=[],c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))l.push(r[c]),a=!0;else if(!a)l.push(r[c]);else break;r=r.slice(c);let u=l.join(`
`),f=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");o=o?`${o}
${u}`:u,s=s?`${s}
${f}`:f;let m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=m,r.length===0)break;let g=i.at(-1);if((g==null?void 0:g.type)==="code")break;if((g==null?void 0:g.type)==="blockquote"){let y=g,v=y.raw+`
`+r.join(`
`),w=this.blockquote(v);i[i.length-1]=w,o=o.substring(0,o.length-y.raw.length)+w.raw,s=s.substring(0,s.length-y.text.length)+w.text;break}else if((g==null?void 0:g.type)==="list"){let y=g,v=y.raw+`
`+r.join(`
`),w=this.list(v);i[i.length-1]=w,o=o.substring(0,o.length-g.raw.length)+w.raw,s=s.substring(0,s.length-y.raw.length)+w.raw,r=v.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:o,tokens:i,text:s}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r=n[1].trim(),o=r.length>1,s={type:"list",raw:"",ordered:o,start:o?+r.slice(0,-1):"",loose:!1,items:[]};r=o?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=o?r:"[*+-]");let i=this.rules.other.listItemRegex(r),a=!1;for(;t;){let c=!1,u="",f="";if(!(n=i.exec(t))||this.rules.block.hr.test(t))break;u=n[0],t=t.substring(u.length);let m=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,T=>" ".repeat(3*T.length)),g=t.split(`
`,1)[0],y=!m.trim(),v=0;if(this.options.pedantic?(v=2,f=m.trimStart()):y?v=n[1].length+1:(v=n[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,f=m.slice(v),v+=n[1].length),y&&this.rules.other.blankLine.test(g)&&(u+=g+`
`,t=t.substring(g.length+1),c=!0),!c){let T=this.rules.other.nextBulletRegex(v),k=this.rules.other.hrRegex(v),M=this.rules.other.fencesBeginRegex(v),D=this.rules.other.headingBeginRegex(v),I=this.rules.other.htmlBeginRegex(v);for(;t;){let P=t.split(`
`,1)[0],B;if(g=P,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),B=g):B=g.replace(this.rules.other.tabCharGlobal,"    "),M.test(g)||D.test(g)||I.test(g)||T.test(g)||k.test(g))break;if(B.search(this.rules.other.nonSpaceChar)>=v||!g.trim())f+=`
`+B.slice(v);else{if(y||m.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||M.test(m)||D.test(m)||k.test(m))break;f+=`
`+g}!y&&!g.trim()&&(y=!0),u+=P+`
`,t=t.substring(P.length+1),m=B.slice(v)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0));let w=null,_;this.options.gfm&&(w=this.rules.other.listIsTask.exec(f),w&&(_=w[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:u,task:!!w,checked:_,loose:!1,text:f,tokens:[]}),s.raw+=u}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){let u=s.items[c].tokens.filter(m=>m.type==="space"),f=u.length>0&&u.some(m=>this.rules.other.anyLine.test(m.raw));s.loose=f}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(t){let n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){let n=this.rules.block.def.exec(t);if(n){let r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),o=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:o,title:s}}}table(t){var a;let n=this.rules.block.table.exec(t);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let r=sH(n[1]),o=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===o.length){for(let l of o)this.rules.other.tableAlignRight.test(l)?i.align.push("right"):this.rules.other.tableAlignCenter.test(l)?i.align.push("center"):this.rules.other.tableAlignLeft.test(l)?i.align.push("left"):i.align.push(null);for(let l=0;l<r.length;l++)i.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:i.align[l]});for(let l of s)i.rows.push(sH(l,i.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:i.align[u]})));return i}}lheading(t){let n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){let n=this.rules.block.paragraph.exec(t);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){let n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){let n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(t){let n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){let n=this.rules.inline.link.exec(t);if(n){let r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let i=ov(r.slice(0,-1),"\\");if((r.length-i.length)%2===0)return}else{let i=Mnt(n[2],"()");if(i===-2)return;if(i>-1){let a=(n[0].indexOf("!")===0?5:4)+n[1].length+i;n[2]=n[2].substring(0,i),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let o=n[2],s="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(o);i&&(o=i[1],s=i[3])}else s=n[3]?n[3].slice(1,-1):"";return o=o.trim(),this.rules.other.startAngleBracket.test(o)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?o=o.slice(1):o=o.slice(1,-1)),iH(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let o=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=n[o.toLowerCase()];if(!s){let i=r[0].charAt(0);return{type:"text",raw:i,text:i}}return iH(r,s,r[0],this.lexer,this.rules)}}emStrong(t,n,r=""){let o=this.rules.inline.emStrongLDelim.exec(t);if(!(!o||o[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(o[1]||o[2])||!r||this.rules.inline.punctuation.exec(r))){let s=[...o[0]].length-1,i,a,l=s,c=0,u=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,n=n.slice(-1*t.length+s);(o=u.exec(n))!=null;){if(i=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!i)continue;if(a=[...i].length,o[3]||o[4]){l+=a;continue}else if((o[5]||o[6])&&s%3&&!((s+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let f=[...o[0]][0].length,m=t.slice(0,s+o.index+f+a);if(Math.min(s,a)%2){let y=m.slice(1,-1);return{type:"em",raw:m,text:y,tokens:this.lexer.inlineTokens(y)}}let g=m.slice(2,-2);return{type:"strong",raw:m,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(t){let n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," "),o=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return o&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(t){let n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){let n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){let n=this.rules.inline.autolink.exec(t);if(n){let r,o;return n[2]==="@"?(r=n[1],o="mailto:"+r):(r=n[1],o=r),{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(t){var r;let n;if(n=this.rules.inline.url.exec(t)){let o,s;if(n[2]==="@")o=n[0],s="mailto:"+o;else{let i;do i=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(i!==n[0]);o=n[0],n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:o,href:s,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(t){let n=this.rules.inline.text.exec(t);if(n){let r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}},Tc=class PI{constructor(t){Ze(this,"tokens");Ze(this,"options");Ze(this,"state");Ze(this,"tokenizer");Ze(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Um,this.options.tokenizer=this.options.tokenizer||new r4,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Fa,block:l_.normal,inline:rv.normal};this.options.pedantic?(n.block=l_.pedantic,n.inline=rv.pedantic):this.options.gfm&&(n.block=l_.gfm,this.options.breaks?n.inline=rv.breaks:n.inline=rv.gfm),this.tokenizer.rules=n}static get rules(){return{block:l_,inline:rv}}static lex(t,n){return new PI(n).lex(t)}static lexInline(t,n){return new PI(n).inlineTokens(t)}lex(t){t=t.replace(Fa.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){var o,s,i;for(this.options.pedantic&&(t=t.replace(Fa.tabCharGlobal,"    ").replace(Fa.spaceLine,""));t;){let a;if((s=(o=this.options.extensions)==null?void 0:o.block)!=null&&s.some(c=>(a=c.call({lexer:this},t,n))?(t=t.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);let c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},n.push(a));continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),n.push(a);continue}let l=t;if((i=this.options.extensions)!=null&&i.startBlock){let c=1/0,u=t.slice(1),f;this.options.extensions.startBlock.forEach(m=>{f=m.call({lexer:this},u),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){let c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),r=l.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);let c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var l,c,u,f,m;let r=t,o=null;if(this.tokens.links){let g=Object.keys(this.tokens.links);if(g.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)g.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,o.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)s=o[2]?o[2].length:0,r=r.slice(0,o.index+s)+"["+"a".repeat(o[0].length-s-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=((c=(l=this.options.hooks)==null?void 0:l.emStrongMask)==null?void 0:c.call({lexer:this},r))??r;let i=!1,a="";for(;t;){i||(a=""),i=!1;let g;if((f=(u=this.options.extensions)==null?void 0:u.inline)!=null&&f.some(v=>(g=v.call({lexer:this},t,n))?(t=t.substring(g.raw.length),n.push(g),!0):!1))continue;if(g=this.tokenizer.escape(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.tag(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.link(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(g.raw.length);let v=n.at(-1);g.type==="text"&&(v==null?void 0:v.type)==="text"?(v.raw+=g.raw,v.text+=g.text):n.push(g);continue}if(g=this.tokenizer.emStrong(t,r,a)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.codespan(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.br(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.del(t)){t=t.substring(g.raw.length),n.push(g);continue}if(g=this.tokenizer.autolink(t)){t=t.substring(g.raw.length),n.push(g);continue}if(!this.state.inLink&&(g=this.tokenizer.url(t))){t=t.substring(g.raw.length),n.push(g);continue}let y=t;if((m=this.options.extensions)!=null&&m.startInline){let v=1/0,w=t.slice(1),_;this.options.extensions.startInline.forEach(T=>{_=T.call({lexer:this},w),typeof _=="number"&&_>=0&&(v=Math.min(v,_))}),v<1/0&&v>=0&&(y=t.substring(0,v+1))}if(g=this.tokenizer.inlineText(y)){t=t.substring(g.raw.length),g.raw.slice(-1)!=="_"&&(a=g.raw.slice(-1)),i=!0;let v=n.at(-1);(v==null?void 0:v.type)==="text"?(v.raw+=g.raw,v.text+=g.text):n.push(g);continue}if(t){let v="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(v);break}else throw new Error(v)}}return n}},o4=class{constructor(t){Ze(this,"options");Ze(this,"parser");this.options=t||Um}space(t){return""}code({text:t,lang:n,escaped:r}){var i;let o=(i=(n||"").match(Fa.notSpaceStart))==null?void 0:i[0],s=t.replace(Fa.endingNewline,"")+`
`;return o?'<pre><code class="language-'+ed(o)+'">'+(r?s:ed(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:ed(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:n}){return`<h${n}>${this.parser.parseInline(t)}</h${n}>
`}hr(t){return`<hr>
`}list(t){let n=t.ordered,r=t.start,o="";for(let a=0;a<t.items.length;a++){let l=t.items[a];o+=this.listitem(l)}let s=n?"ol":"ul",i=n&&r!==1?' start="'+r+'"':"";return"<"+s+i+`>
`+o+"</"+s+`>
`}listitem(t){var r;let n="";if(t.task){let o=this.checkbox({checked:!!t.checked});t.loose?((r=t.tokens[0])==null?void 0:r.type)==="paragraph"?(t.tokens[0].text=o+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=o+" "+ed(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:o+" ",text:o+" ",escaped:!0}):n+=o+" "}return n+=this.parser.parse(t.tokens,!!t.loose),`<li>${n}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let n="",r="";for(let s=0;s<t.header.length;s++)r+=this.tablecell(t.header[s]);n+=this.tablerow({text:r});let o="";for(let s=0;s<t.rows.length;s++){let i=t.rows[s];r="";for(let a=0;a<i.length;a++)r+=this.tablecell(i[a]);o+=this.tablerow({text:r})}return o&&(o=`<tbody>${o}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+o+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let n=this.parser.parseInline(t.tokens),r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${ed(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:n,tokens:r}){let o=this.parser.parseInline(r),s=oH(t);if(s===null)return o;t=s;let i='<a href="'+t+'"';return n&&(i+=' title="'+ed(n)+'"'),i+=">"+o+"</a>",i}image({href:t,title:n,text:r,tokens:o}){o&&(r=this.parser.parseInline(o,this.parser.textRenderer));let s=oH(t);if(s===null)return ed(r);t=s;let i=`<img src="${t}" alt="${r}"`;return n&&(i+=` title="${ed(n)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:ed(t.text)}},JM=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},lu=class LI{constructor(t){Ze(this,"options");Ze(this,"renderer");Ze(this,"textRenderer");this.options=t||Um,this.options.renderer=this.options.renderer||new o4,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new JM}static parse(t,n){return new LI(n).parse(t)}static parseInline(t,n){return new LI(n).parseInline(t)}parse(t,n=!0){var o,s;let r="";for(let i=0;i<t.length;i++){let a=t[i];if((s=(o=this.options.extensions)==null?void 0:o.renderers)!=null&&s[a.type]){let c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){r+=u||"";continue}}let l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"def":{r+=this.renderer.def(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;i+1<t.length&&t[i+1].type==="text";)c=t[++i],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(t,n=this.renderer){var o,s;let r="";for(let i=0;i<t.length;i++){let a=t[i];if((s=(o=this.options.extensions)==null?void 0:o.renderers)!=null&&s[a.type]){let c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}let l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},v_,Tv=(v_=class{constructor(t){Ze(this,"options");Ze(this,"block");this.options=t||Um}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Tc.lex:Tc.lexInline}provideParser(){return this.block?lu.parse:lu.parseInline}},Ze(v_,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Ze(v_,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),v_),Ont=class{constructor(...t){Ze(this,"defaults",HM());Ze(this,"options",this.setOptions);Ze(this,"parse",this.parseMarkdown(!0));Ze(this,"parseInline",this.parseMarkdown(!1));Ze(this,"Parser",lu);Ze(this,"Renderer",o4);Ze(this,"TextRenderer",JM);Ze(this,"Lexer",Tc);Ze(this,"Tokenizer",r4);Ze(this,"Hooks",Tv);this.use(...t)}walkTokens(t,n){var o,s;let r=[];for(let i of t)switch(r=r.concat(n.call(this,i)),i.type){case"table":{let a=i;for(let l of a.header)r=r.concat(this.walkTokens(l.tokens,n));for(let l of a.rows)for(let c of l)r=r.concat(this.walkTokens(c.tokens,n));break}case"list":{let a=i;r=r.concat(this.walkTokens(a.items,n));break}default:{let a=i;(s=(o=this.defaults.extensions)==null?void 0:o.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{let c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...t){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{let o={...r};if(o.async=this.defaults.async||o.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let i=n.renderers[s.name];i?n.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=i.apply(this,a)),l}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=n[s.level];i?i.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),o.extensions=n),r.renderer){let s=this.defaults.renderer||new o4(this.defaults);for(let i in r.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let a=i,l=r.renderer[a],c=s[a];s[a]=(...u)=>{let f=l.apply(s,u);return f===!1&&(f=c.apply(s,u)),f||""}}o.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new r4(this.defaults);for(let i in r.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let a=i,l=r.tokenizer[a],c=s[a];s[a]=(...u)=>{let f=l.apply(s,u);return f===!1&&(f=c.apply(s,u)),f}}o.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new Tv;for(let i in r.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let a=i,l=r.hooks[a],c=s[a];Tv.passThroughHooks.has(i)?s[a]=u=>{if(this.defaults.async&&Tv.passThroughHooksRespectAsync.has(i))return(async()=>{let m=await l.call(s,u);return c.call(s,m)})();let f=l.call(s,u);return c.call(s,f)}:s[a]=(...u)=>{if(this.defaults.async)return(async()=>{let m=await l.apply(s,u);return m===!1&&(m=await c.apply(s,u)),m})();let f=l.apply(s,u);return f===!1&&(f=c.apply(s,u)),f}}o.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,i=r.walkTokens;o.walkTokens=function(a){let l=[];return l.push(i.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...o}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return Tc.lex(t,n??this.defaults)}parser(t,n){return lu.parse(t,n??this.defaults)}parseMarkdown(t){return(n,r)=>{let o={...r},s={...this.defaults,...o},i=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&o.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=t),s.async)return(async()=>{let a=s.hooks?await s.hooks.preprocess(n):n,l=await(s.hooks?await s.hooks.provideLexer():t?Tc.lex:Tc.lexInline)(a,s),c=s.hooks?await s.hooks.processAllTokens(l):l;s.walkTokens&&await Promise.all(this.walkTokens(c,s.walkTokens));let u=await(s.hooks?await s.hooks.provideParser():t?lu.parse:lu.parseInline)(c,s);return s.hooks?await s.hooks.postprocess(u):u})().catch(i);try{s.hooks&&(n=s.hooks.preprocess(n));let a=(s.hooks?s.hooks.provideLexer():t?Tc.lex:Tc.lexInline)(n,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let l=(s.hooks?s.hooks.provideParser():t?lu.parse:lu.parseInline)(a,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(a){return i(a)}}}onError(t,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let o="<p>An error occurred:</p><pre>"+ed(r.message+"",!0)+"</pre>";return n?Promise.resolve(o):o}if(n)return Promise.reject(r);throw r}}},_m=new Ont;function $o(e,t){return _m.parse(e,t)}$o.options=$o.setOptions=function(e){return _m.setOptions(e),$o.defaults=_m.defaults,yse($o.defaults),$o};$o.getDefaults=HM;$o.defaults=Um;$o.use=function(...e){return _m.use(...e),$o.defaults=_m.defaults,yse($o.defaults),$o};$o.walkTokens=function(e,t){return _m.walkTokens(e,t)};$o.parseInline=_m.parseInline;$o.Parser=lu;$o.parser=lu.parse;$o.Renderer=o4;$o.TextRenderer=JM;$o.Lexer=Tc;$o.lexer=Tc.lex;$o.Tokenizer=r4;$o.Hooks=Tv;$o.parse=$o;$o.options;$o.setOptions;$o.use;$o.walkTokens;$o.parseInline;lu.parse;Tc.lex;var vr=(...e)=>Hq(hR(e)),$1=(e,t,n)=>{let r=typeof t=="string"?new Blob([t],{type:n}):t,o=URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)},Pnt=x.createContext({code:""}),Nse=()=>x.useContext(Pnt),aH=({onCopy:e,onError:t,timeout:n=2e3,children:r,className:o,code:s,...i})=>{let[a,l]=x.useState(!1),c=x.useRef(0),{code:u}=Nse(),{isAnimating:f}=x.useContext(ku),m=s??u,g=async()=>{var v;if(typeof window>"u"||!((v=navigator==null?void 0:navigator.clipboard)!=null&&v.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{a||(await navigator.clipboard.writeText(m),l(!0),e==null||e(),c.current=window.setTimeout(()=>l(!1),n))}catch(w){t==null||t(w)}};x.useEffect(()=>()=>{window.clearTimeout(c.current)},[]);let y=a?ise:ase;return h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",o),"data-streamdown":"code-block-copy-button",disabled:f,onClick:g,title:"Copy Code",type:"button",...i,children:r??h.jsx(y,{size:14})})},lH={"1c":"1c","1c-query":"1cq",abap:"abap","actionscript-3":"as",ada:"ada",adoc:"adoc","angular-html":"html","angular-ts":"ts",apache:"conf",apex:"cls",apl:"apl",applescript:"applescript",ara:"ara",asciidoc:"adoc",asm:"asm",astro:"astro",awk:"awk",ballerina:"bal",bash:"sh",bat:"bat",batch:"bat",be:"be",beancount:"beancount",berry:"berry",bibtex:"bib",bicep:"bicep",blade:"blade.php",bsl:"bsl",c:"c","c#":"cs","c++":"cpp",cadence:"cdc",cairo:"cairo",cdc:"cdc",clarity:"clar",clj:"clj",clojure:"clj","closure-templates":"soy",cmake:"cmake",cmd:"cmd",cobol:"cob",codeowners:"CODEOWNERS",codeql:"ql",coffee:"coffee",coffeescript:"coffee","common-lisp":"lisp",console:"sh",coq:"v",cpp:"cpp",cql:"cql",crystal:"cr",cs:"cs",csharp:"cs",css:"css",csv:"csv",cue:"cue",cypher:"cql",d:"d",dart:"dart",dax:"dax",desktop:"desktop",diff:"diff",docker:"dockerfile",dockerfile:"dockerfile",dotenv:"env","dream-maker":"dm",edge:"edge",elisp:"el",elixir:"ex",elm:"elm","emacs-lisp":"el",erb:"erb",erl:"erl",erlang:"erl",f:"f","f#":"fs",f03:"f03",f08:"f08",f18:"f18",f77:"f77",f90:"f90",f95:"f95",fennel:"fnl",fish:"fish",fluent:"ftl",for:"for","fortran-fixed-form":"f","fortran-free-form":"f90",fs:"fs",fsharp:"fs",fsl:"fsl",ftl:"ftl",gdresource:"tres",gdscript:"gd",gdshader:"gdshader",genie:"gs",gherkin:"feature","git-commit":"gitcommit","git-rebase":"gitrebase",gjs:"js",gleam:"gleam","glimmer-js":"js","glimmer-ts":"ts",glsl:"glsl",gnuplot:"plt",go:"go",gql:"gql",graphql:"graphql",groovy:"groovy",gts:"gts",hack:"hack",haml:"haml",handlebars:"hbs",haskell:"hs",haxe:"hx",hbs:"hbs",hcl:"hcl",hjson:"hjson",hlsl:"hlsl",hs:"hs",html:"html","html-derivative":"html",http:"http",hxml:"hxml",hy:"hy",imba:"imba",ini:"ini",jade:"jade",java:"java",javascript:"js",jinja:"jinja",jison:"jison",jl:"jl",js:"js",json:"json",json5:"json5",jsonc:"jsonc",jsonl:"jsonl",jsonnet:"jsonnet",jssm:"jssm",jsx:"jsx",julia:"jl",kotlin:"kt",kql:"kql",kt:"kt",kts:"kts",kusto:"kql",latex:"tex",lean:"lean",lean4:"lean",less:"less",liquid:"liquid",lisp:"lisp",lit:"lit",llvm:"ll",log:"log",logo:"logo",lua:"lua",luau:"luau",make:"mak",makefile:"mak",markdown:"md",marko:"marko",matlab:"m",md:"md",mdc:"mdc",mdx:"mdx",mediawiki:"wiki",mermaid:"mmd",mips:"s",mipsasm:"s",mmd:"mmd",mojo:"mojo",move:"move",nar:"nar",narrat:"narrat",nextflow:"nf",nf:"nf",nginx:"conf",nim:"nim",nix:"nix",nu:"nu",nushell:"nu",objc:"m","objective-c":"m","objective-cpp":"mm",ocaml:"ml",pascal:"pas",perl:"pl",perl6:"p6",php:"php",plsql:"pls",po:"po",polar:"polar",postcss:"pcss",pot:"pot",potx:"potx",powerquery:"pq",powershell:"ps1",prisma:"prisma",prolog:"pl",properties:"properties",proto:"proto",protobuf:"proto",ps:"ps",ps1:"ps1",pug:"pug",puppet:"pp",purescript:"purs",py:"py",python:"py",ql:"ql",qml:"qml",qmldir:"qmldir",qss:"qss",r:"r",racket:"rkt",raku:"raku",razor:"cshtml",rb:"rb",reg:"reg",regex:"regex",regexp:"regexp",rel:"rel",riscv:"s",rs:"rs",rst:"rst",ruby:"rb",rust:"rs",sas:"sas",sass:"sass",scala:"scala",scheme:"scm",scss:"scss",sdbl:"sdbl",sh:"sh",shader:"shader",shaderlab:"shader",shell:"sh",shellscript:"sh",shellsession:"sh",smalltalk:"st",solidity:"sol",soy:"soy",sparql:"rq",spl:"spl",splunk:"spl",sql:"sql","ssh-config":"config",stata:"do",styl:"styl",stylus:"styl",svelte:"svelte",swift:"swift","system-verilog":"sv",systemd:"service",talon:"talon",talonscript:"talon",tasl:"tasl",tcl:"tcl",templ:"templ",terraform:"tf",tex:"tex",tf:"tf",tfvars:"tfvars",toml:"toml",ts:"ts","ts-tags":"ts",tsp:"tsp",tsv:"tsv",tsx:"tsx",turtle:"ttl",twig:"twig",typ:"typ",typescript:"ts",typespec:"tsp",typst:"typ",v:"v",vala:"vala",vb:"vb",verilog:"v",vhdl:"vhdl",vim:"vim",viml:"vim",vimscript:"vim",vue:"vue","vue-html":"html","vue-vine":"vine",vy:"vy",vyper:"vy",wasm:"wasm",wenyan:"wy",wgsl:"wgsl",wiki:"wiki",wikitext:"wiki",wit:"wit",wl:"wl",wolfram:"wl",xml:"xml",xsl:"xsl",yaml:"yaml",yml:"yml",zenscript:"zs",zig:"zig",zsh:"zsh",:"wy"},Lnt=({onDownload:e,onError:t,language:n,children:r,className:o,code:s,...i})=>{let{code:a}=Nse(),{isAnimating:l}=x.useContext(ku),c=s??a,u=`file.${n&&n in lH?lH[n]:"txt"}`,f="text/plain",m=()=>{try{$1(u,c,f),e==null||e()}catch(g){t==null||t(g)}};return h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",o),"data-streamdown":"code-block-download-button",disabled:l,onClick:m,title:"Download file",type:"button",...i,children:r??h.jsx(JC,{size:14})})},cH=()=>h.jsxs("div",{className:"w-full divide-y divide-border overflow-hidden rounded-xl border border-border",children:[h.jsx("div",{className:"h-[46px] w-full bg-muted/80"}),h.jsx("div",{className:"flex w-full items-center justify-center p-4",children:h.jsx(NQe,{className:"size-4 animate-spin"})})]}),$nt=/\.[^/.]+$/,Fnt=({node:e,className:t,src:n,alt:r,...o})=>{let s=async()=>{if(n)try{let i=await(await fetch(n)).blob(),a=new URL(n,window.location.origin).pathname.split("/").pop()||"",l=a.split(".").pop(),c=a.includes(".")&&l!==void 0&&l.length<=4,u="";if(c)u=a;else{let f=i.type,m="png";f.includes("jpeg")||f.includes("jpg")?m="jpg":f.includes("png")?m="png":f.includes("svg")?m="svg":f.includes("gif")?m="gif":f.includes("webp")&&(m="webp"),u=`${(r||a||"image").replace($nt,"")}.${m}`}$1(u,i,i.type)}catch(i){console.error("Failed to download image:",i)}};return n?h.jsxs("div",{className:"group relative my-4 inline-block","data-streamdown":"image-wrapper",children:[h.jsx("img",{alt:r,className:vr("max-w-full rounded-lg",t),"data-streamdown":"image",src:n,...o}),h.jsx("div",{className:"pointer-events-none absolute inset-0 hidden rounded-lg bg-black/10 group-hover:block"}),h.jsx("button",{className:vr("absolute right-2 bottom-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border border-border bg-background/90 shadow-sm backdrop-blur-sm transition-all duration-200 hover:bg-background","opacity-0 group-hover:opacity-100"),onClick:s,title:"Download image",type:"button",children:h.jsx(JC,{size:14})})]}):null},Ise=async e=>{let t={startOnLoad:!1,theme:"default",securityLevel:"strict",fontFamily:"monospace",suppressErrorRendering:!0,...e},n=(await pe(async()=>{const{default:r}=await import("./mermaid.core-C5lAkPed.js").then(o=>o.bC);return{default:r}},[],import.meta.url)).default;return n.initialize(t),n},Bnt=(e,t)=>{var n;let r=(n=void 0)!=null?n:5;return new Promise((o,s)=>{let i="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e))),a=new Image;a.crossOrigin="anonymous",a.onload=()=>{let l=document.createElement("canvas"),c=a.width*r,u=a.height*r;l.width=c,l.height=u;let f=l.getContext("2d");if(!f){s(new Error("Failed to create 2D canvas context for PNG export"));return}f.drawImage(a,0,0,c,u),l.toBlob(m=>{if(!m){s(new Error("Failed to create PNG blob"));return}o(m)},"image/png")},a.onerror=()=>s(new Error("Failed to load SVG image")),a.src=i})},znt=({chart:e,children:t,className:n,onDownload:r,config:o,onError:s})=>{let[i,a]=x.useState(!1),l=x.useRef(null),{isAnimating:c}=x.useContext(ku),u=async f=>{try{if(f==="mmd"){$1("diagram.mmd",e,"text/plain"),a(!1),r==null||r(f);return}let m=await Ise(o),g=e.split("").reduce((w,_)=>(w<<5)-w+_.charCodeAt(0)|0,0),y=`mermaid-${Math.abs(g)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:v}=await m.render(y,e);if(!v){s==null||s(new Error("SVG not found. Please wait for the diagram to render."));return}if(f==="svg"){$1("diagram.svg",v,"image/svg+xml"),a(!1),r==null||r(f);return}if(f==="png"){let w=await Bnt(v);$1("diagram.png",w,"image/png"),r==null||r(f),a(!1);return}}catch(m){s==null||s(m)}};return x.useEffect(()=>{let f=m=>{l.current&&!l.current.contains(m.target)&&a(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]),h.jsxs("div",{className:"relative",ref:l,children:[h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",n),disabled:c,onClick:()=>a(!i),title:"Download diagram",type:"button",children:t??h.jsx(JC,{size:14})}),i&&h.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>u("svg"),type:"button",title:"Download diagram as SVG",children:"SVG"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>u("png"),type:"button",title:"Download diagram as PNG",children:"PNG"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>u("mmd"),type:"button",title:"Download diagram as MMD",children:"MMD"})]})]})},ox=0,jnt=()=>{ox+=1,ox===1&&(document.body.style.overflow="hidden")},Unt=()=>{ox=Math.max(0,ox-1),ox===0&&(document.body.style.overflow="")},Hnt=({chart:e,config:t,onFullscreen:n,onExit:r,className:o,...s})=>{let[i,a]=x.useState(!1),{isAnimating:l,controls:c}=x.useContext(ku),u=(()=>{if(typeof c=="boolean")return c;let m=c.mermaid;return m===!1?!1:m===!0||m===void 0?!0:m.panZoom!==!1})(),f=()=>{a(!i)};return x.useEffect(()=>{if(i){jnt();let m=g=>{g.key==="Escape"&&a(!1)};return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m),Unt()}}},[i]),x.useEffect(()=>{i?n==null||n():r&&r()},[i,n,r]),h.jsxs(h.Fragment,{children:[h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",o),disabled:l,onClick:f,title:"View fullscreen",type:"button",...s,children:h.jsx(RQe,{size:14})}),i&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm",onClick:f,onKeyDown:m=>{m.key==="Escape"&&f()},role:"button",tabIndex:0,children:[h.jsx("button",{className:"absolute top-4 right-4 z-10 rounded-md p-2 text-muted-foreground transition-all hover:bg-muted hover:text-foreground",onClick:f,title:"Exit fullscreen",type:"button",children:h.jsx(PQe,{size:20})}),h.jsx("div",{className:"flex h-full w-full items-center justify-center p-4",onClick:m=>m.stopPropagation(),onKeyDown:m=>m.stopPropagation(),role:"presentation",children:h.jsx(lie,{chart:e,className:"h-full w-full [&>div]:h-full [&>div]:overflow-hidden [&_svg]:h-auto [&_svg]:w-auto",config:t,fullscreen:!0,showControls:u})})]})]})},Rse=e=>{var t,n;let r=[],o=[],s=e.querySelectorAll("thead th");for(let a of s)r.push(((t=a.textContent)==null?void 0:t.trim())||"");let i=e.querySelectorAll("tbody tr");for(let a of i){let l=[],c=a.querySelectorAll("td");for(let u of c)l.push(((n=u.textContent)==null?void 0:n.trim())||"");o.push(l)}return{headers:r,rows:o}},Mse=e=>{let{headers:t,rows:n}=e,r=a=>{let l=!1,c=!1;for(let u=0;u<a.length;u+=1){let f=a[u];if(f==='"'){l=!0,c=!0;break}(f===","||f===`
`)&&(l=!0)}return l?c?`"${a.replace(/"/g,'""')}"`:`"${a}"`:a},o=t.length>0?n.length+1:n.length,s=new Array(o),i=0;t.length>0&&(s[i]=t.map(r).join(","),i+=1);for(let a of n)s[i]=a.map(r).join(","),i+=1;return s.join(`
`)},Vnt=e=>{let{headers:t,rows:n}=e,r=a=>{let l=!1;for(let u=0;u<a.length;u+=1){let f=a[u];if(f==="	"||f===`
`||f==="\r"){l=!0;break}}if(!l)return a;let c=[];for(let u=0;u<a.length;u+=1){let f=a[u];f==="	"?c.push("\\t"):f===`
`?c.push("\\n"):f==="\r"?c.push("\\r"):c.push(f)}return c.join("")},o=t.length>0?n.length+1:n.length,s=new Array(o),i=0;t.length>0&&(s[i]=t.map(r).join("	"),i+=1);for(let a of n)s[i]=a.map(r).join("	"),i+=1;return s.join(`
`)},NA=e=>{let t=!1;for(let r=0;r<e.length;r+=1){let o=e[r];if(o==="\\"||o==="|"){t=!0;break}}if(!t)return e;let n=[];for(let r=0;r<e.length;r+=1){let o=e[r];o==="\\"?n.push("\\\\"):o==="|"?n.push("\\|"):n.push(o)}return n.join("")},qnt=e=>{let{headers:t,rows:n}=e;if(t.length===0)return"";let r=new Array(n.length+2),o=0,s=t.map(a=>NA(a));r[o]=`| ${s.join(" | ")} |`,o+=1;let i=new Array(t.length);for(let a=0;a<t.length;a+=1)i[a]="---";r[o]=`| ${i.join(" | ")} |`,o+=1;for(let a of n)if(a.length<t.length){let l=new Array(t.length);for(let c=0;c<t.length;c+=1)l[c]=c<a.length?NA(a[c]):"";r[o]=`| ${l.join(" | ")} |`,o+=1}else{let l=a.map(c=>NA(c));r[o]=`| ${l.join(" | ")} |`,o+=1}return r.join(`
`)},Gnt=({children:e,className:t,onCopy:n,onError:r,timeout:o=2e3})=>{let[s,i]=x.useState(!1),[a,l]=x.useState(!1),c=x.useRef(null),u=x.useRef(0),{isAnimating:f}=x.useContext(ku),m=async y=>{var v,w;if(typeof window>"u"||!((v=navigator==null?void 0:navigator.clipboard)!=null&&v.write)){r==null||r(new Error("Clipboard API not available"));return}try{let _=(w=c.current)==null?void 0:w.closest('[data-streamdown="table-wrapper"]'),T=_==null?void 0:_.querySelector("table");if(!T){r==null||r(new Error("Table not found"));return}let k=Rse(T),M=y==="csv"?Mse(k):Vnt(k),D=new ClipboardItem({"text/plain":new Blob([M],{type:"text/plain"}),"text/html":new Blob([T.outerHTML],{type:"text/html"})});await navigator.clipboard.write([D]),l(!0),i(!1),n==null||n(y),u.current=window.setTimeout(()=>l(!1),o)}catch(_){r==null||r(_)}};x.useEffect(()=>{let y=v=>{c.current&&!c.current.contains(v.target)&&i(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y),window.clearTimeout(u.current)}},[]);let g=a?ise:ase;return h.jsxs("div",{className:"relative",ref:c,children:[h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:f,onClick:()=>i(!s),title:"Copy table",type:"button",children:e??h.jsx(g,{size:14})}),s&&h.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>m("csv"),type:"button",title:"Copy table as CSV",children:"CSV"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>m("tsv"),type:"button",title:"Copy table as TSV",children:"TSV"})]})]})},Wnt=({children:e,className:t,onDownload:n,onError:r})=>{let[o,s]=x.useState(!1),i=x.useRef(null),{isAnimating:a}=x.useContext(ku),l=c=>{var u;try{let f=(u=i.current)==null?void 0:u.closest('[data-streamdown="table-wrapper"]'),m=f==null?void 0:f.querySelector("table");if(!m){r==null||r(new Error("Table not found"));return}let g=Rse(m),y=c==="csv"?Mse(g):qnt(g);$1(`table.${c==="csv"?"csv":"md"}`,y,c==="csv"?"text/csv":"text/markdown"),s(!1),n==null||n(c)}catch(f){r==null||r(f)}};return x.useEffect(()=>{let c=u=>{i.current&&!i.current.contains(u.target)&&s(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),h.jsxs("div",{className:"relative",ref:i,children:[h.jsx("button",{className:vr("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:a,onClick:()=>s(!o),title:"Download table",type:"button",children:e??h.jsx(JC,{size:14})}),o&&h.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("csv"),type:"button",title:"Download table as CSV",children:"CSV"}),h.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>l("markdown"),type:"button",title:"Download table as Markdown",children:"Markdown"})]})]})},Ynt=({children:e,className:t,showControls:n,...r})=>h.jsxs("div",{className:"my-4 flex flex-col space-y-2","data-streamdown":"table-wrapper",children:[n&&h.jsxs("div",{className:"flex items-center justify-end gap-1",children:[h.jsx(Gnt,{}),h.jsx(Wnt,{})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsx("table",{className:vr("w-full border-collapse border border-border",t),"data-streamdown":"table",...r,children:e})})]}),Knt=x.lazy(()=>pe(()=>import("./code-block-JS6V4U2P-g69ZV_qV.js"),[],import.meta.url).then(e=>({default:e.CodeBlock}))),Znt=x.lazy(()=>pe(()=>Promise.resolve().then(()=>Aft),void 0,import.meta.url).then(e=>({default:e.Mermaid}))),Jnt=/language-([^\s]+)/;function e3(e,t){if(!(e!=null&&e.position||t!=null&&t.position))return!0;if(!(e!=null&&e.position&&t!=null&&t.position))return!1;let n=e.position.start,r=t.position.start,o=e.position.end,s=t.position.end;return(n==null?void 0:n.line)===(r==null?void 0:r.line)&&(n==null?void 0:n.column)===(r==null?void 0:r.column)&&(o==null?void 0:o.line)===(s==null?void 0:s.line)&&(o==null?void 0:o.column)===(s==null?void 0:s.column)}function Ks(e,t){return e.className===t.className&&e3(e.node,t.node)}var $I=(e,t)=>typeof e=="boolean"?e:e[t]!==!1,c_=(e,t)=>{if(typeof e=="boolean")return e;let n=e.mermaid;return n===!1?!1:n===!0||n===void 0?!0:n[t]!==!1},XM=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("ol",{className:vr("list-inside list-decimal whitespace-normal",t),"data-streamdown":"ordered-list",...r,children:e}),(e,t)=>Ks(e,t));XM.displayName="MarkdownOl";var Dse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("li",{className:vr("py-1 [&>p]:inline",t),"data-streamdown":"list-item",...r,children:e}),(e,t)=>e.className===t.className&&e3(e.node,t.node));Dse.displayName="MarkdownLi";var Ose=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("ul",{className:vr("list-inside list-disc whitespace-normal",t),"data-streamdown":"unordered-list",...r,children:e}),(e,t)=>Ks(e,t));Ose.displayName="MarkdownUl";var Pse=x.memo(({className:e,node:t,...n})=>h.jsx("hr",{className:vr("my-6 border-border",e),"data-streamdown":"horizontal-rule",...n}),(e,t)=>Ks(e,t));Pse.displayName="MarkdownHr";var Lse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("span",{className:vr("font-semibold",t),"data-streamdown":"strong",...r,children:e}),(e,t)=>Ks(e,t));Lse.displayName="MarkdownStrong";var $se=x.memo(({children:e,className:t,href:n,node:r,...o})=>{let s=n==="streamdown:incomplete-link";return h.jsx("a",{className:vr("wrap-anywhere font-medium text-primary underline",t),"data-incomplete":s,"data-streamdown":"link",href:n,rel:"noreferrer",target:"_blank",...o,children:e})},(e,t)=>Ks(e,t)&&e.href===t.href);$se.displayName="MarkdownA";var Fse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h1",{className:vr("mt-6 mb-2 font-semibold text-3xl",t),"data-streamdown":"heading-1",...r,children:e}),(e,t)=>Ks(e,t));Fse.displayName="MarkdownH1";var Bse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h2",{className:vr("mt-6 mb-2 font-semibold text-2xl",t),"data-streamdown":"heading-2",...r,children:e}),(e,t)=>Ks(e,t));Bse.displayName="MarkdownH2";var zse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h3",{className:vr("mt-6 mb-2 font-semibold text-xl",t),"data-streamdown":"heading-3",...r,children:e}),(e,t)=>Ks(e,t));zse.displayName="MarkdownH3";var jse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h4",{className:vr("mt-6 mb-2 font-semibold text-lg",t),"data-streamdown":"heading-4",...r,children:e}),(e,t)=>Ks(e,t));jse.displayName="MarkdownH4";var Use=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h5",{className:vr("mt-6 mb-2 font-semibold text-base",t),"data-streamdown":"heading-5",...r,children:e}),(e,t)=>Ks(e,t));Use.displayName="MarkdownH5";var Hse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("h6",{className:vr("mt-6 mb-2 font-semibold text-sm",t),"data-streamdown":"heading-6",...r,children:e}),(e,t)=>Ks(e,t));Hse.displayName="MarkdownH6";var Vse=x.memo(({children:e,className:t,node:n,...r})=>{let{controls:o}=x.useContext(ku),s=$I(o,"table");return h.jsx(Ynt,{className:t,"data-streamdown":"table-wrapper",showControls:s,...r,children:e})},(e,t)=>Ks(e,t));Vse.displayName="MarkdownTable";var qse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("thead",{className:vr("bg-muted/80",t),"data-streamdown":"table-header",...r,children:e}),(e,t)=>Ks(e,t));qse.displayName="MarkdownThead";var Gse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("tbody",{className:vr("divide-y divide-border bg-muted/40",t),"data-streamdown":"table-body",...r,children:e}),(e,t)=>Ks(e,t));Gse.displayName="MarkdownTbody";var Wse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("tr",{className:vr("border-border border-b",t),"data-streamdown":"table-row",...r,children:e}),(e,t)=>Ks(e,t));Wse.displayName="MarkdownTr";var Yse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("th",{className:vr("whitespace-nowrap px-4 py-2 text-left font-semibold text-sm",t),"data-streamdown":"table-header-cell",...r,children:e}),(e,t)=>Ks(e,t));Yse.displayName="MarkdownTh";var Kse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("td",{className:vr("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...r,children:e}),(e,t)=>Ks(e,t));Kse.displayName="MarkdownTd";var Zse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("blockquote",{className:vr("my-4 border-muted-foreground/30 border-l-4 pl-4 text-muted-foreground italic",t),"data-streamdown":"blockquote",...r,children:e}),(e,t)=>Ks(e,t));Zse.displayName="MarkdownBlockquote";var Jse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("sup",{className:vr("text-sm",t),"data-streamdown":"superscript",...r,children:e}),(e,t)=>Ks(e,t));Jse.displayName="MarkdownSup";var Xse=x.memo(({children:e,className:t,node:n,...r})=>h.jsx("sub",{className:vr("text-sm",t),"data-streamdown":"subscript",...r,children:e}),(e,t)=>Ks(e,t));Xse.displayName="MarkdownSub";var Qse=x.memo(({children:e,className:t,node:n,...r})=>{if("data-footnotes"in r){let o=i=>{var a,l;if(!x.isValidElement(i))return!1;let c=Array.isArray(i.props.children)?i.props.children:[i.props.children],u=!1,f=!1;for(let m of c)if(m){if(typeof m=="string")m.trim()!==""&&(u=!0);else if(x.isValidElement(m))if(((a=m.props)==null?void 0:a["data-footnote-backref"])!==void 0)f=!0;else{let g=Array.isArray(m.props.children)?m.props.children:[m.props.children];for(let y of g){if(typeof y=="string"&&y.trim()!==""){u=!0;break}if(x.isValidElement(y)&&((l=y.props)==null?void 0:l["data-footnote-backref"])===void 0){u=!0;break}}}}return f&&!u},s=Array.isArray(e)?e.map(i=>{if(!x.isValidElement(i))return i;if(i.type===XM){let a=(Array.isArray(i.props.children)?i.props.children:[i.props.children]).filter(l=>!o(l));return a.length===0?null:{...i,props:{...i.props,children:a}}}return i}):e;return(Array.isArray(s)?s.some(i=>i!==null):s!==null)?h.jsx("section",{className:t,...r,children:s}):null}return h.jsx("section",{className:t,...r,children:e})},(e,t)=>Ks(e,t));Qse.displayName="MarkdownSection";var Xnt=({node:e,className:t,children:n,...r})=>{var o,s,i;let a=((o=e==null?void 0:e.position)==null?void 0:o.start.line)===((s=e==null?void 0:e.position)==null?void 0:s.end.line),{mermaid:l,controls:c}=x.useContext(ku);if(a)return h.jsx("code",{className:vr("rounded bg-muted px-1.5 py-0.5 font-mono text-sm",t),"data-streamdown":"inline-code",...r,children:n});let u=t==null?void 0:t.match(Jnt),f=(i=u==null?void 0:u.at(1))!=null?i:"",m="";if(x.isValidElement(n)&&n.props&&typeof n.props=="object"&&"children"in n.props&&typeof n.props.children=="string"?m=n.props.children:typeof n=="string"&&(m=n),f==="mermaid"){let y=$I(c,"mermaid"),v=c_(c,"download"),w=c_(c,"copy"),_=c_(c,"fullscreen"),T=c_(c,"panZoom");return h.jsx(x.Suspense,{fallback:h.jsx(cH,{}),children:h.jsxs("div",{className:vr("group relative my-4 h-auto rounded-xl border p-4",t),"data-streamdown":"mermaid-block",children:[y&&(v||w||_)&&h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[v&&h.jsx(znt,{chart:m,config:l==null?void 0:l.config}),w&&h.jsx(aH,{code:m}),_&&h.jsx(Hnt,{chart:m,config:l==null?void 0:l.config})]}),h.jsx(Znt,{chart:m,config:l==null?void 0:l.config,showControls:T})]})})}let g=$I(c,"code");return h.jsx(x.Suspense,{fallback:h.jsx(cH,{}),children:h.jsx(Knt,{className:vr("overflow-x-auto border-border border-t",t),code:m,language:f,children:g&&h.jsxs(h.Fragment,{children:[h.jsx(Lnt,{code:m,language:f}),h.jsx(aH,{})]})})})},eie=x.memo(Xnt,(e,t)=>e.className===t.className&&e3(e.node,t.node));eie.displayName="MarkdownCode";var tie=x.memo(Fnt,(e,t)=>e.className===t.className&&e3(e.node,t.node));tie.displayName="MarkdownImg";var nie=x.memo(({children:e,className:t,node:n,...r})=>{var o;let s=(Array.isArray(e)?e:[e]).filter(i=>i!=null&&i!=="");return s.length===1&&x.isValidElement(s[0])&&((o=s[0].props.node)==null?void 0:o.tagName)==="img"?h.jsx(h.Fragment,{children:e}):h.jsx("p",{className:t,...r,children:e})},(e,t)=>Ks(e,t));nie.displayName="MarkdownParagraph";var Qnt={ol:XM,li:Dse,ul:Ose,hr:Pse,strong:Lse,a:$se,h1:Fse,h2:Bse,h3:zse,h4:jse,h5:Use,h6:Hse,table:Vse,thead:qse,tbody:Gse,tr:Wse,th:Yse,td:Kse,blockquote:Zse,code:eie,img:tie,pre:({children:e})=>e,sup:Jse,sub:Xse,p:nie,section:Qse},uH=[],dH={allowDangerousHtml:!0},u_=new WeakMap,ert=class{constructor(){this.cache=new Map,this.keyCache=new WeakMap,this.maxSize=100}generateCacheKey(t){let n=this.keyCache.get(t);if(n)return n;let r=t.rehypePlugins,o=t.remarkPlugins,s=t.remarkRehypeOptions;if(!(r||o||s)){let f="default";return this.keyCache.set(t,f),f}let i=f=>{if(!f||f.length===0)return"";let m="";for(let g=0;g<f.length;g+=1){let y=f[g];if(g>0&&(m+=","),Array.isArray(y)){let[v,w]=y;if(typeof v=="function"){let _=u_.get(v);_||(_=v.name,u_.set(v,_)),m+=_}else m+=String(v);m+=":",m+=JSON.stringify(w)}else if(typeof y=="function"){let v=u_.get(y);v||(v=y.name,u_.set(y,v)),m+=v}else m+=String(y)}return m},a=i(r),l=i(o),c=s?JSON.stringify(s):"",u=`${l}::${a}::${c}`;return this.keyCache.set(t,u),u}get(t){let n=this.generateCacheKey(t),r=this.cache.get(n);return r&&(this.cache.delete(n),this.cache.set(n,r)),r}set(t,n){let r=this.generateCacheKey(t);if(this.cache.size>=this.maxSize){let o=this.cache.keys().next().value;o&&this.cache.delete(o)}this.cache.set(r,n)}clear(){this.cache.clear()}},fH=new ert,rie=e=>{let t=trt(e),n=e.children||"";return rrt(t.runSync(t.parse(n),n),e)},trt=e=>{let t=fH.get(e);if(t)return t;let n=nrt(e);return fH.set(e,n),n},nrt=e=>{let t=e.rehypePlugins||uH,n=e.remarkPlugins||uH,r=e.remarkRehypeOptions?{...dH,...e.remarkRehypeOptions}:dH;return Ytt().use(Wet).use(n).use(Ntt,r).use(t)},rrt=(e,t)=>QQe(e,{Fragment:h.Fragment,components:t.components,ignoreInvalidStyle:!0,jsx:h.jsx,jsxs:h.jsxs,passKeys:!0,passNode:!0}),ort=/\[\^[^\]\s]{1,200}\](?!:)/,srt=/\[\^[^\]\s]{1,200}\]:/,irt=/<\/(\w+)>/,art=/<(\w+)[\s>]/,IA=e=>{let t=0;for(;t<e.length&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t+=1;return t+1<e.length&&e[t]==="$"&&e[t+1]==="$"},lrt=e=>{let t=e.length-1;for(;t>=0&&(e[t]===" "||e[t]==="	"||e[t]===`
`||e[t]==="\r");)t-=1;return t>=1&&e[t]==="$"&&e[t-1]==="$"},RA=e=>{let t=0;for(let n=0;n<e.length-1;n+=1)e[n]==="$"&&e[n+1]==="$"&&(t+=1,n+=1);return t},crt=e=>{let t=ort.test(e),n=srt.test(e);if(t||n)return[e];let r=Tc.lex(e,{gfm:!0}),o=[],s=[];for(let i of r){let a=i.raw,l=o.length;if(s.length>0){if(o[l-1]+=a,i.type==="html"){let c=a.match(irt);if(c){let u=c[1];s.at(-1)===u&&s.pop()}}continue}if(i.type==="html"&&i.block){let c=a.match(art);if(c){let u=c[1];a.includes(`</${u}>`)||s.push(u)}}if(a.trim()==="$$"&&l>0){let c=o[l-1],u=IA(c),f=RA(c);if(u&&f%2===1){o[l-1]=c+a;continue}}if(l>0&&lrt(a)){let c=o[l-1],u=IA(c),f=RA(c),m=RA(a);if(u&&f%2===1&&!IA(a)&&m===1){o[l-1]=c+a;continue}}o.push(a)}return o},urt=/(\*\*)([^*]*?)$/,drt=/(__)([^_]*?)$/,frt=/(\*\*\*)([^*]*?)$/,hrt=/(\*)([^*]*?)$/,prt=/(_)([^_]*?)$/,mrt=/(`)([^`]*?)$/,grt=/(~~)([^~]*?)$/,Hm=/^[\s_~*`]*$/,oie=/^[\s]*[-*+][\s]+$/,brt=/[\p{L}\p{N}_]/u,yrt=/^```[^`\n]*```?$/,vrt=/^\*{4,}$/,O0=e=>{if(!e)return!1;let t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||t===95?!0:brt.test(e)},t3=e=>{let t=(e.match(/```/g)||[]).length;return t>0&&t%2===0&&e.includes(`
`)},xrt=(e,t)=>{let n=1;for(let r=t-1;r>=0;r-=1)if(e[r]==="]")n+=1;else if(e[r]==="["&&(n-=1,n===0))return r;return-1},wrt=(e,t)=>{let n=1;for(let r=t+1;r<e.length;r+=1)if(e[r]==="[")n+=1;else if(e[r]==="]"&&(n-=1,n===0))return r;return-1},MA=(e,t)=>{let n=!1,r=!1;for(let o=0;o<t;o+=1){if(e.substring(o,o+3)==="```"){r=!r,o+=2;continue}!r&&e[o]==="`"&&(n=!n)}return n||r},Ert=e=>{let t=e.lastIndexOf("](");if(t!==-1&&!MA(e,t)&&!e.substring(t+2).includes(")")){let n=xrt(e,t);if(n!==-1&&!MA(e,n)){let r=n>0&&e[n-1]==="!",o=r?n-1:n,s=e.substring(0,o),i=e.substring(n+1,t);return r?s:`${s}[${i}](streamdown:incomplete-link)`}}for(let n=e.length-1;n>=0;n-=1)if(e[n]==="["&&!MA(e,n)){let r=n>0&&e[n-1]==="!",o=r?n-1:n;if(!e.substring(n+1).includes("]")){let s=e.substring(0,o);return r?s:`${e}](streamdown:incomplete-link)`}if(wrt(e,n)===-1){let s=e.substring(0,o);return r?s:`${e}](streamdown:incomplete-link)`}}return e},_rt=e=>{if(t3(e))return e;let t=e.match(urt);if(t){let n=t[2];if(!n||Hm.test(n))return e;let r=e.lastIndexOf(t[1]),o=e.substring(0,r).lastIndexOf(`
`),s=o===-1?0:o+1,i=e.substring(s,r);if(oie.test(i)&&n.includes(`
`))return e;if((e.match(/\*\*/g)||[]).length%2===1)return`${e}**`}return e},Srt=e=>{let t=e.match(drt);if(t){let n=t[2];if(!n||Hm.test(n))return e;let r=e.lastIndexOf(t[1]),o=e.substring(0,r).lastIndexOf(`
`),s=o===-1?0:o+1,i=e.substring(s,r);if(oie.test(i)&&n.includes(`
`))return e;if((e.match(/__/g)||[]).length%2===1)return`${e}__`}return e},Trt=e=>{let t=0,n=e.length;for(let r=0;r<n;r+=1){if(e[r]!=="*")continue;let o=r>0?e[r-1]:"",s=r<n-1?e[r+1]:"";if(o==="\\"||o==="*"||s==="*"||o&&s&&O0(o)&&O0(s))continue;let i=0;for(let l=r-1;l>=0;l-=1)if(e[l]===`
`){i=l+1;break}let a=!0;for(let l=i;l<r;l+=1)if(e[l]!==" "&&e[l]!=="	"){a=!1;break}a&&(s===" "||s==="	")||(t+=1)}return t},Crt=e=>{if(t3(e))return e;if(e.match(hrt)){let t=-1;for(let r=0;r<e.length;r+=1)if(e[r]==="*"&&e[r-1]!=="*"&&e[r+1]!=="*"&&e[r-1]!=="\\"){let o=r>0?e[r-1]:"",s=r<e.length-1?e[r+1]:"";if(o&&s&&O0(o)&&O0(s))continue;t=r;break}if(t===-1)return e;let n=e.substring(t+1);if(!n||Hm.test(n))return e;if(Trt(e)%2===1)return`${e}*`}return e},sie=(e,t)=>{let n=!1,r=!1;for(let o=0;o<e.length&&o<t;o+=1){if(e[o]==="\\"&&e[o+1]==="$"){o+=1;continue}e[o]==="$"&&(e[o+1]==="$"?(r=!r,o+=1,n=!1):r||(n=!n))}return n||r},krt=e=>{let t=e.includes("$"),n=0,r=e.length;for(let o=0;o<r;o+=1){if(e[o]!=="_")continue;let s=o>0?e[o-1]:"",i=o<r-1?e[o+1]:"";s!=="\\"&&(t&&sie(e,o)||s==="_"||i==="_"||s&&i&&O0(s)&&O0(i)||(n+=1))}return n},Art=e=>{if(t3(e))return e;if(e.match(prt)){let t=-1;for(let r=0;r<e.length;r+=1)if(e[r]==="_"&&e[r-1]!=="_"&&e[r+1]!=="_"&&e[r-1]!=="\\"&&!sie(e,r)){let o=r>0?e[r-1]:"",s=r<e.length-1?e[r+1]:"";if(o&&s&&O0(o)&&O0(s))continue;t=r;break}if(t===-1)return e;let n=e.substring(t+1);if(!n||Hm.test(n))return e;if(krt(e)%2===1){let r=e.length;for(;r>0&&e[r-1]===`
`;)r-=1;if(r<e.length){let o=e.slice(0,r),s=e.slice(r);return`${o}_${s}`}return`${e}_`}}return e},Nrt=(e,t)=>{let n=e.substring(t,t+3)==="```",r=t>0&&e.substring(t-1,t+2)==="```",o=t>1&&e.substring(t-2,t+1)==="```";return n||r||o},Irt=e=>{let t=0;for(let n=0;n<e.length;n+=1)e[n]==="`"&&!Nrt(e,n)&&(t+=1);return t},Rrt=e=>{if(e.match(yrt)&&!e.includes(`
`))return e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e;let t=(e.match(/```/g)||[]).length,n=t%2===1;if(t>0&&t%2===0&&e.includes(`
`)||(e.endsWith("```\n")||e.endsWith("```"))&&t%2===0)return e;let r=e.match(mrt);if(r&&!n){let o=r[2];if(!o||Hm.test(o))return e;if(Irt(e)%2===1)return`${e}\``}return e},Mrt=e=>{let t=e.match(grt);if(t){let n=t[2];if(!n||Hm.test(n))return e;if((e.match(/~~/g)||[]).length%2===1)return`${e}~~`}return e},Drt=e=>{if((e.match(/\$\$/g)||[]).length%2===0)return e;let t=e.indexOf("$$");return t!==-1&&e.indexOf(`
`,t)!==-1&&!e.endsWith(`
`)?`${e}
$$`:`${e}$$`},Ort=e=>{let t=0,n=0;for(let r=0;r<e.length;r+=1)e[r]==="*"?n+=1:(n>=3&&(t+=Math.floor(n/3)),n=0);return n>=3&&(t+=Math.floor(n/3)),t},Prt=e=>{if(t3(e)||vrt.test(e))return e;let t=e.match(frt);if(t){let n=t[2];if(!n||Hm.test(n))return e;if(Ort(e)%2===1)return`${e}***`}return e},Lrt=e=>{if(!e||typeof e!="string")return e;let t=e,n=Ert(t);return n.endsWith("](streamdown:incomplete-link)")?n:(t=n,t=Prt(t),t=_rt(t),t=Srt(t),t=Crt(t),t=Art(t),t=Rrt(t),t=Mrt(t),t=Drt(t),t)},$rt={raw:oKe,katex:[yI,{errorColor:"var(--color-muted-foreground)"}],harden:[pHe,{allowedImagePrefixes:["*"],allowedLinkPrefixes:["*"],allowedProtocols:["*"],defaultOrigin:void 0,allowDataImages:!0}]},Frt={gfm:[cQe,{}],math:[NI,{singleDollarTextMath:!1}],cjkFriendly:[RKe,{}],cjkFriendlyGfmStrikethrough:[DKe,{}]},Brt=Object.values($rt),zrt=Object.values(Frt),jrt={shikiTheme:["github-light","github-dark"],controls:!0,isAnimating:!1,mode:"streaming",mermaid:void 0},ku=x.createContext(jrt),iie=x.memo(({content:e,shouldParseIncompleteMarkdown:t,...n})=>{let r=x.useMemo(()=>typeof e=="string"&&t?Lrt(e.trim()):e,[e,t]);return h.jsx(rie,{...n,children:r})},(e,t)=>{if(e.content!==t.content||e.shouldParseIncompleteMarkdown!==t.shouldParseIncompleteMarkdown||e.index!==t.index)return!1;if(e.components!==t.components){let n=Object.keys(e.components||{}),r=Object.keys(t.components||{});if(n.length!==r.length||n.some(o=>{var s,i;return((s=e.components)==null?void 0:s[o])!==((i=t.components)==null?void 0:i[o])}))return!1}return!(e.rehypePlugins!==t.rehypePlugins||e.remarkPlugins!==t.remarkPlugins)});iie.displayName="Block";var Urt=["github-light","github-dark"],aie=x.memo(({children:e,mode:t="streaming",parseIncompleteMarkdown:n=!0,components:r,rehypePlugins:o=Brt,remarkPlugins:s=zrt,className:i,shikiTheme:a=Urt,mermaid:l,controls:c=!0,isAnimating:u=!1,BlockComponent:f=iie,parseMarkdownIntoBlocksFn:m=crt,...g})=>{let y=x.useId(),[v,w]=x.useTransition(),[_,T]=x.useState([]),k=x.useMemo(()=>m(typeof e=="string"?e:""),[e,m]);x.useEffect(()=>{t==="streaming"?w(()=>{T(k)}):T(k)},[k,t]);let M=t==="streaming"?_:k,D=x.useMemo(()=>M.map((B,U)=>`${y}-${U}`),[M.length,y]),I=x.useMemo(()=>({shikiTheme:a,controls:c,isAnimating:u,mode:t,mermaid:l}),[a,c,u,t,l]),P=x.useMemo(()=>({...Qnt,...r}),[r]);return x.useEffect(()=>{if(!(Array.isArray(o)&&o.some(q=>Array.isArray(q)?q[0]===yI:q===yI)))return;let B=!1;if(Array.isArray(s)){let q=s.find(z=>Array.isArray(z)?z[0]===NI:z===NI);q&&Array.isArray(q)&&q[1]&&(B=q[1].singleDollarTextMath===!0)}let U=typeof e=="string"?e:"",j=U.includes("$$"),H=B&&(/[^$]\$[^$]/.test(U)||/^\$[^$]/.test(U)||/[^$]\$$/.test(U));(j||H)&&pe(()=>Promise.resolve({}),__vite__mapDeps([97]),import.meta.url)},[o,s,e]),t==="static"?h.jsx(ku.Provider,{value:I,children:h.jsx("div",{className:vr("space-y-4 whitespace-normal",i),children:h.jsx(rie,{components:P,rehypePlugins:o,remarkPlugins:s,...g,children:e})})}):h.jsx(ku.Provider,{value:I,children:h.jsx("div",{className:vr("space-y-4 whitespace-normal",i),children:M.map((B,U)=>h.jsx(f,{components:P,content:B,index:U,rehypePlugins:o,remarkPlugins:s,shouldParseIncompleteMarkdown:n,...g},D[U]))})})},(e,t)=>e.children===t.children&&e.shikiTheme===t.shikiTheme&&e.isAnimating===t.isAnimating&&e.mode===t.mode);aie.displayName="Streamdown";var Hrt=({children:e,className:t,minZoom:n=.5,maxZoom:r=3,zoomStep:o=.1,showControls:s=!0,initialZoom:i=1,fullscreen:a=!1})=>{let l=x.useRef(null),c=x.useRef(null),[u,f]=x.useState(i),[m,g]=x.useState({x:0,y:0}),[y,v]=x.useState(!1),[w,_]=x.useState({x:0,y:0}),[T,k]=x.useState({x:0,y:0}),M=x.useCallback(q=>{f(z=>Math.max(n,Math.min(r,z+q)))},[n,r]),D=x.useCallback(()=>{M(o)},[M,o]),I=x.useCallback(()=>{M(-o)},[M,o]),P=x.useCallback(()=>{f(i),g({x:0,y:0})},[i]),B=x.useCallback(q=>{q.preventDefault();let z=q.deltaY>0?-o:o;M(z)},[M,o]),U=x.useCallback(q=>{if(q.button!==0||q.isPrimary===!1)return;v(!0),_({x:q.clientX,y:q.clientY}),k(m);let z=q.currentTarget;z instanceof HTMLElement&&z.setPointerCapture(q.pointerId)},[m]),j=x.useCallback(q=>{if(!y)return;q.preventDefault();let z=q.clientX-w.x,Z=q.clientY-w.y;g({x:T.x+z,y:T.y+Z})},[y,w,T]),H=x.useCallback(q=>{v(!1);let z=q.currentTarget;z instanceof HTMLElement&&z.releasePointerCapture(q.pointerId)},[]);return x.useEffect(()=>{let q=l.current;if(q)return q.addEventListener("wheel",B,{passive:!1}),()=>{q.removeEventListener("wheel",B)}},[B]),x.useEffect(()=>{let q=c.current;if(q&&y)return document.body.style.userSelect="none",q.addEventListener("pointermove",j,{passive:!1}),q.addEventListener("pointerup",H),q.addEventListener("pointercancel",H),()=>{document.body.style.userSelect="",q.removeEventListener("pointermove",j),q.removeEventListener("pointerup",H),q.removeEventListener("pointercancel",H)}},[y,j,H]),h.jsxs("div",{className:vr("relative",a?"h-full w-full":"w-full",t),ref:l,style:{cursor:y?"grabbing":"grab"},children:[s&&h.jsxs("div",{className:vr("absolute z-10 flex flex-col gap-1 rounded-md border border-border bg-background/90 p-1 shadow-sm backdrop-blur-sm",a?"bottom-4 left-4":"bottom-2 left-2"),children:[h.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:u>=r,onClick:D,title:"Zoom in",type:"button",children:h.jsx($Qe,{size:16})}),h.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",disabled:u<=n,onClick:I,title:"Zoom out",type:"button",children:h.jsx(BQe,{size:16})}),h.jsx("button",{className:"flex items-center justify-center rounded p-1.5 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",onClick:P,title:"Reset zoom and pan",type:"button",children:h.jsx(DQe,{size:16})})]}),h.jsx("div",{className:vr("origin-center transition-transform duration-150 ease-out",a&&"flex w-full items-center justify-center"),onPointerDown:U,ref:c,role:"application",style:{transform:`translate(${m.x}px, ${m.y}px) scale(${u})`,transformOrigin:"center center",touchAction:"none",willChange:"transform"},children:e})]})},lie=({chart:e,className:t,config:n,fullscreen:r=!1,showControls:o=!0})=>{let[s,i]=x.useState(null),[a,l]=x.useState(!0),[c,u]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(0),{mermaid:v}=x.useContext(ku),w=v==null?void 0:v.errorComponent;if(x.useEffect(()=>{(async()=>{try{i(null),l(!0);let T=await Ise(n),k=e.split("").reduce((I,P)=>(I<<5)-I+P.charCodeAt(0)|0,0),M=`mermaid-${Math.abs(k)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:D}=await T.render(M,e);u(D),m(D)}catch(T){if(!(f||c)){let k=T instanceof Error?T.message:"Failed to render Mermaid chart";i(k)}}finally{l(!1)}})()},[e,n,g]),a&&!c&&!f)return h.jsx("div",{className:vr("my-4 flex justify-center p-4",t),children:h.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[h.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-current border-b-2"}),h.jsx("span",{className:"text-sm",children:"Loading diagram..."})]})});if(s&&!c&&!f){let T=()=>y(k=>k+1);return w?h.jsx(w,{chart:e,error:s,retry:T}):h.jsxs("div",{className:vr("rounded-lg border border-red-200 bg-red-50 p-4",t),children:[h.jsxs("p",{className:"font-mono text-red-700 text-sm",children:["Mermaid Error: ",s]}),h.jsxs("details",{className:"mt-2",children:[h.jsx("summary",{className:"cursor-pointer text-red-600 text-xs",children:"Show Code"}),h.jsx("pre",{className:"mt-2 overflow-x-auto rounded bg-red-100 p-2 text-red-800 text-xs",children:e})]})]})}let _=c||f;return h.jsx(Hrt,{className:vr(r?"h-full w-full overflow-hidden":"my-4 overflow-hidden",t),fullscreen:r,maxZoom:3,minZoom:.5,showControls:o,zoomStep:.1,children:h.jsx("div",{"aria-label":"Mermaid chart",className:vr("flex justify-center",r&&"h-full w-full items-center"),dangerouslySetInnerHTML:{__html:_},role:"img"})})};x.createContext(null);const FI=x.memo(({className:e,...t})=>h.jsx(aie,{className:Qe("size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",e),...t}),(e,t)=>e.children===t.children);FI.displayName="MessageResponse";function BI(e){return typeof e=="object"&&e!==null&&"_def"in e}function Vrt(e){var r,o,s,i;if(!BI(e))return{type:"object",properties:{}};if(!e.shape)return{type:"object",properties:{}};const t={},n=[];for(const[a,l]of Object.entries(e.shape)){if(!BI(l))continue;const c=l;let u=l;for(;u._def&&(u._def.typeName==="ZodOptional"||u._def.typeName==="ZodNullable"||u._def.typeName==="ZodDefault"||u._def.typeName==="ZodEffects");){const v=u._def.innerType||u._def.schema;if(!v)break;u=v}const f=((r=u._def)==null?void 0:r.typeName)||"ZodString",g={type:{ZodString:"string",ZodNumber:"number",ZodBoolean:"boolean",ZodArray:"array",ZodObject:"object",ZodEnum:"string",ZodNativeEnum:"string"}[f]||"string"},y=((o=u._def)==null?void 0:o.description)||u.description||c.description;y&&(g.description=y),f==="ZodEnum"&&((s=u._def)!=null&&s.values)&&(g.enum=u._def.values),t[a]=g,(i=c.isOptional)!=null&&i.call(c)||n.push(a)}return{type:"object",properties:t,required:n.length>0?n:void 0}}function qrt(e){if(BI(e))return Vrt(e);if(typeof e=="object"&&e!==null){const t=e;return t.type?t.properties?t:{...t,properties:{}}:{type:"object",...t}}return{type:"object",properties:{}}}const DA=()=>{var e;return!((e=window.electronAPI)!=null&&e.isElectron)},OA=()=>window.location.origin,Grt=new Set(["claude-sonnet-4-5","claude-sonnet-4-5-20250929","claude-opus-4-5","claude-opus-4-5-20251101","claude-haiku-4-5","claude-haiku-4-5-20251001","claude-code"]);function Wrt(e){if(Grt.has(e))return!0;const t=e.toLowerCase();return!!(t.includes("sonnet-4-5")||t.includes("opus-4-5")||t.includes("haiku-4-5"))}const hH={"gemini-3-pro-preview":"google","gemini-2.5-pro":"google","gemini-2.5-flash":"google","gemini-2.5-flash-lite":"google","gpt-4o":"openai","gpt-4o-mini":"openai","gpt-4-turbo":"openai","gpt-4":"openai","gpt-3.5-turbo":"openai",o1:"openai","o1-mini":"openai","o1-preview":"openai",o3:"openai","o3-mini":"openai","claude-3-5-sonnet":"anthropic","claude-3-5-sonnet-20241022":"anthropic","claude-4-sonnet":"anthropic","claude-4-sonnet-20250514":"anthropic","claude-sonnet-4-20250514":"anthropic","claude-3-opus":"anthropic","claude-3-opus-20240229":"anthropic","claude-3-sonnet-20240229":"anthropic","claude-3-haiku-20240307":"anthropic","claude-code":"claude-code","claude-sonnet-4-5":"claude-code","claude-sonnet-4-5-20250929":"claude-code","claude-opus-4-5":"claude-code","claude-opus-4-5-20251101":"claude-code","claude-haiku-4-5":"claude-code","claude-haiku-4-5-20251001":"claude-code",codex:"codex","codex-gpt-4o":"codex","codex-o1":"codex","codex-o1-pro":"codex","gpt-5.1-codex":"codex","gpt-5.1-codex-mini":"codex","gpt-5.1-nano":"codex","gpt-5-codex":"codex","gpt-5-codex-mini":"codex"};function Yrt(e){if(hH[e])return hH[e];const t=e.toLowerCase();return t.startsWith("gemini-")?"google":t.startsWith("gpt-")||t.startsWith("o1")||t.startsWith("o3")?"openai":t.startsWith("claude-")?t.includes("sonnet-4-5")||t.includes("opus-4-5")||t.includes("haiku-4-5")?"claude-code":"anthropic":t.includes("codex")?"codex":null}function Krt(e={}){const[t,n]=x.useState(!1),[r,o]=x.useState(!1),[s,i]=x.useState(null),[a,l]=x.useState(!1),c=x.useRef(null),u=x.useRef([]),f=x.useRef(e);x.useEffect(()=>{f.current=e},[e]),x.useEffect(()=>{var w;if(DA()){fetch(`${OA()}/api/ai/providers`).then(_=>_.json()).then(_=>{_.success&&(_.data,l(!0))}).catch(_=>{l(!0)});return}if((w=window.electronAPI)!=null&&w.aiSdk)return window.electronAPI.aiSdk.initialize().then(()=>{l(!0)}).catch(_=>{fo.aiChat.error("Failed to initialize AI SDK:",_)}),()=>{var _,T,k;u.current.forEach(M=>M()),u.current=[],(k=(T=(_=window.electronAPI)==null?void 0:_.aiSdk)==null?void 0:T.removeAllListeners)==null||k.call(T)}},[]);const m=x.useCallback(w=>{const _={};for(const T of w)_[T.id]=T.apiKey;return _},[]),g=x.useCallback(async({modelId:w,messages:_,providers:T,system:k,tools:M,maxSteps:D=5,onChunk:I,onStepFinish:P,enableReasoning:B=!1,onReasoningChunk:U,mcpTools:j=[],projectFolder:H})=>{var Z,X,J,ee,re,ie,K,te,se,Q,Te,ge,Ce;if(DA()){n(!0),o(!0),i(null);try{const he=OA(),Fe=_.map(et=>({role:et.role,content:et.content})),Oe=await fetch(`${he}/api/ai/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:Fe,modelId:w,system:systemPrompt,temperature,maxTokens})});if(!Oe.ok){const et=await Oe.json().catch(()=>({}));throw new Error(et.error||`HTTP ${Oe.status}`)}const Re=(Z=Oe.body)==null?void 0:Z.getReader();if(!Re)throw new Error("No response body");const nt=new TextDecoder;let ue="";for(;;){const{done:et,value:ut}=await Re.read();if(et)break;const Ht=nt.decode(ut,{stream:!0}).split(`
`);for(const Pt of Ht)if(Pt.startsWith("data: ")){const tn=Pt.slice(6);if(tn==="[DONE]")continue;try{const vt=JSON.parse(tn);if(vt.type==="text-delta"&&vt.text)ue+=vt.text,I==null||I(vt.text),(J=(X=f.current).onTextDelta)==null||J.call(X,vt.text);else if(vt.type==="error")throw new Error(vt.error)}catch{}}}return n(!1),o(!1),(re=(ee=f.current).onResponse)==null||re.call(ee,ue),(K=(ie=f.current).onFinish)==null||K.call(ie),{text:ue}}catch(he){const Fe=he instanceof Error?he:new Error(String(he));return i(Fe),n(!1),o(!1),(se=(te=f.current).onError)==null||se.call(te,Fe),{text:null}}}if(!((Q=window.electronAPI)!=null&&Q.aiSdk)){const he=new Error("AI SDK not available - requires Electron environment");return i(he),(ge=(Te=f.current).onError)==null||ge.call(Te,he),{text:null}}const q=window.electronAPI.aiSdk;u.current.forEach(he=>he()),u.current=[],n(!0),o(!0),i(null);const z=crypto.randomUUID();if(c.current=z,Wrt(w)&&((Ce=window.electronAPI)!=null&&Ce.agentSdk)){const he=window.electronAPI.agentSdk;return new Promise(Fe=>{let Oe="",Re="";const nt=[],ue=[],et=new Map,ut=he.onTextChunk(Le=>{var Ve,_e,W,L;Le.requestId===z&&(Oe+=Le.chunk,I==null||I(Le.chunk),(_e=(Ve=f.current).onTextDelta)==null||_e.call(Ve,Le.chunk),(L=(W=f.current).onStreamEvent)==null||L.call(W,{type:"text-delta",data:Le.chunk,timestamp:new Date}))}),Yt=he.onThinkingStart(Le=>{Le.requestId===z&&fo.aiChat.log(`[Agent SDK] Thinking started at index ${Le.index}`)}),Ht=he.onThinkingChunk(Le=>{var Ve,_e,W,L;Le.requestId===z&&(Re+=Le.chunk,U==null||U(Le.chunk),(_e=(Ve=f.current).onReasoningDelta)==null||_e.call(Ve,Le.chunk),(L=(W=f.current).onStreamEvent)==null||L.call(W,{type:"reasoning-delta",data:Le.chunk,timestamp:new Date}))}),Pt=he.onToolStart(Le=>{Le.requestId===z&&(fo.aiChat.log(`[Agent SDK] Tool started: ${Le.toolName} (${Le.toolCallId})`),et.set(Le.toolCallId,{name:Le.toolName,partialJson:""}),P==null||P({text:Oe,toolCalls:[{type:"tool-call",toolCallId:Le.toolCallId,toolName:Le.toolName,args:{}}]}))}),tn=he.onToolInputDelta(Le=>{if(Le.requestId!==z)return;const Ve=et.get(Le.toolCallId);Ve&&(Ve.partialJson+=Le.delta)}),vt=he.onToolResult(Le=>{var we,ze,Be,ct,ln,jt,fn,an;if(Le.requestId!==z)return;const Ve=et.get(Le.toolCallId),_e=(Ve==null?void 0:Ve.name)||"unknown";let W={};if(Ve!=null&&Ve.partialJson)try{W=JSON.parse(Ve.partialJson)}catch{W={raw:Ve.partialJson}}const L={type:"tool-call",toolCallId:Le.toolCallId,toolName:_e,args:W};nt.push(L),(ze=(we=f.current).onToolCall)==null||ze.call(we,L),(ct=(Be=f.current).onStreamEvent)==null||ct.call(Be,{type:"tool-call",data:L,timestamp:new Date});let F;try{F=JSON.parse(Le.result)}catch{F=Le.result}const ce={type:"tool-result",toolCallId:Le.toolCallId,toolName:_e,result:Le.isError?{error:F}:F};ue.push(ce),(jt=(ln=f.current).onToolResult)==null||jt.call(ln,ce),(an=(fn=f.current).onStreamEvent)==null||an.call(fn,{type:"tool-result",data:ce,timestamp:new Date}),et.delete(Le.toolCallId),P==null||P({text:Oe,toolResults:[ce]})}),me=he.onBlockStop(Le=>{Le.requestId===z&&fo.aiChat.log(`[Agent SDK] Block stopped at index ${Le.index}`)}),Ne=he.onComplete(Le=>{var Ve,_e,W,L,F,ce,we,ze;if(Le.requestId===z){if(ut(),Yt(),Ht(),Pt(),tn(),vt(),me(),Ne(),$e(),Je(),Le.thinking||Re){const Be=Le.thinking||Re;(_e=(Ve=f.current).onReasoningComplete)==null||_e.call(Ve,{type:"thinking",content:Be,timestamp:new Date})}(L=(W=f.current).onResponse)==null||L.call(W,Le.text||Oe),(ce=(F=f.current).onFinish)==null||ce.call(F),(ze=(we=f.current).onStreamEvent)==null||ze.call(we,{type:"finish",data:{finishReason:"stop"},timestamp:new Date}),o(!1),n(!1),c.current=null,Fe({text:Le.text||Oe,toolCalls:nt.length>0?nt:void 0,toolResults:ue.length>0?ue:void 0,reasoning:Le.thinking||Re||void 0})}}),$e=he.onError(Le=>{var _e,W;if(Le.requestId!==z)return;ut(),Yt(),Ht(),Pt(),tn(),vt(),me(),Ne(),$e(),Je();const Ve=new Error(Le.error);i(Ve),(W=(_e=f.current).onError)==null||W.call(_e,Ve),o(!1),n(!1),c.current=null,Fe({text:null})}),Je=he.onInterrupted(Le=>{Le.requestId===z&&o(!1)});u.current=[ut,Yt,Ht,Pt,tn,vt,me,Ne,$e,Je],he.stream({requestId:z,modelId:w,messages:_,system:k,maxThinkingTokens:B?16384:0,projectFolder:H,mcpTools:j}).catch(Le=>{var Ve,_e;i(Le),(_e=(Ve=f.current).onError)==null||_e.call(Ve,Le),o(!1),n(!1),Fe({text:null})})})}return new Promise(he=>{let Fe="",Oe="";const Re=[],nt=[],ue=q.onTextChunk(Pt=>{var tn,vt,me,Ne;Pt.requestId===z&&(Fe+=Pt.chunk,I==null||I(Pt.chunk),(vt=(tn=f.current).onTextDelta)==null||vt.call(tn,Pt.chunk),(Ne=(me=f.current).onStreamEvent)==null||Ne.call(me,{type:"text-delta",data:Pt.chunk,timestamp:new Date}))}),et=q.onStepFinish(Pt=>{var me,Ne;if(Pt.requestId!==z)return;const tn=((me=Pt.toolCalls)==null?void 0:me.map($e=>({type:"tool-call",...$e})))||[],vt=((Ne=Pt.toolResults)==null?void 0:Ne.map($e=>({type:"tool-result",...$e})))||[];Re.push(...tn),nt.push(...vt),tn.forEach($e=>{var Je,Le;return(Le=(Je=f.current).onToolCall)==null?void 0:Le.call(Je,$e)}),vt.forEach($e=>{var Je,Le;return(Le=(Je=f.current).onToolResult)==null?void 0:Le.call(Je,$e)}),P==null||P({text:Pt.text,toolCalls:tn.length>0?tn:void 0,toolResults:vt.length>0?vt:void 0})}),ut=q.onComplete(Pt=>{var tn,vt,me,Ne,$e,Je,Le,Ve,_e,W,L,F,ce,we;if(Pt.requestId===z){if(ue(),et(),ut(),Yt(),Pt.reasoning&&(Oe=Pt.reasoning,U==null||U(Pt.reasoning),(vt=(tn=f.current).onReasoningDelta)==null||vt.call(tn,Pt.reasoning),(Ne=(me=f.current).onReasoningComplete)==null||Ne.call(me,{type:"thinking",content:Pt.reasoning,timestamp:new Date})),Pt.toolCalls){for(const ze of Pt.toolCalls)if(!Re.find(Be=>Be.toolCallId===ze.toolCallId)){const Be={type:"tool-call",...ze};Re.push(Be),(Je=($e=f.current).onToolCall)==null||Je.call($e,Be)}}if(Pt.toolResults){for(const ze of Pt.toolResults)if(!nt.find(Be=>Be.toolCallId===ze.toolCallId)){const Be={type:"tool-result",...ze};nt.push(Be),(Ve=(Le=f.current).onToolResult)==null||Ve.call(Le,Be)}}(W=(_e=f.current).onResponse)==null||W.call(_e,Pt.text),(F=(L=f.current).onFinish)==null||F.call(L),(we=(ce=f.current).onStreamEvent)==null||we.call(ce,{type:"finish",data:{finishReason:Pt.finishReason},timestamp:new Date}),o(!1),n(!1),c.current=null,he({text:Pt.text,toolCalls:Re.length>0?Re:void 0,toolResults:nt.length>0?nt:void 0,reasoning:Oe||void 0})}}),Yt=q.onError(Pt=>{var vt,me;if(Pt.requestId!==z)return;ue(),et(),ut(),Yt();const tn=new Error(Pt.error);i(tn),(me=(vt=f.current).onError)==null||me.call(vt,tn),o(!1),n(!1),c.current=null,he({text:null})});u.current=[ue,et,ut,Yt];const Ht={};if(M)for(const[Pt,tn]of Object.entries(M)){const vt=qrt(tn.parameters);Ht[Pt]={description:tn.description,parameters:vt},fo.aiChat.log(`Tool ${Pt} params:`,JSON.stringify(vt))}q.stream({requestId:z,modelId:w,messages:_,providers:m(T),system:k,tools:Ht,maxSteps:D,enableReasoning:B,mcpTools:j,projectFolder:H}).catch(Pt=>{var tn,vt;i(Pt),(vt=(tn=f.current).onError)==null||vt.call(tn,Pt),n(!1),he({text:null})})})},[m]),y=x.useCallback(async({modelId:w,messages:_,providers:T,system:k,tools:M,maxSteps:D=5,mcpTools:I=[],projectFolder:P})=>{var U,j,H,q,z,Z,X,J,ee,re,ie,K,te,se,Q,Te,ge,Ce,he,Fe,Oe,Re;if(DA()){n(!0),i(null);try{const nt=OA(),ue=await fetch(`${nt}/api/ai/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:_,modelId:w,system:k})});if(!ue.ok){const ut=await ue.json().catch(()=>({}));throw new Error(ut.error||`HTTP ${ue.status}`)}const et=await ue.json();if(n(!1),et.success)return{text:et.data.text};throw new Error(et.error||"Unknown error")}catch(nt){const ue=nt instanceof Error?nt:new Error(String(nt));return i(ue),n(!1),(j=(U=f.current).onError)==null||j.call(U,ue),{text:null}}}if(!((H=window.electronAPI)!=null&&H.aiSdk)){const nt=new Error("AI SDK not available - requires Electron environment");return i(nt),(z=(q=f.current).onError)==null||z.call(q,nt),{text:null}}const B=window.electronAPI.aiSdk;n(!0),i(null);try{const nt={};if(M)for(const[et,ut]of Object.entries(M)){let Yt;if(ut.parameters&&typeof ut.parameters=="object"&&"_def"in ut.parameters)try{if("shape"in ut.parameters){const Ht=ut.parameters.shape,Pt={},tn=[];for(const[vt,me]of Object.entries(Ht)){const Ne=me,$e=((Z=Ne._def)==null?void 0:Z.typeName)||"ZodString",Je={ZodString:"string",ZodNumber:"number",ZodBoolean:"boolean",ZodArray:"array",ZodObject:"object"};Pt[vt]={type:Je[$e]||"string",description:((X=Ne._def)==null?void 0:X.description)||Ne.description||""},(J=Ne.isOptional)!=null&&J.call(Ne)||tn.push(vt)}Yt={type:"object",properties:Pt,required:tn.length>0?tn:void 0}}else Yt={type:"object",properties:{}}}catch{Yt={type:"object",properties:{}}}else ut.parameters&&typeof ut.parameters=="object"?Yt=ut.parameters:Yt={type:"object",properties:{}};nt[et]={description:ut.description,parameters:Yt}}const ue=await B.generate({modelId:w,messages:_,providers:m(T),system:k,tools:nt,maxSteps:D,mcpTools:I,projectFolder:P});if(!ue.success){const et=new Error(ue.error||"Unknown error");return i(et),(re=(ee=f.current).onError)==null||re.call(ee,et),{text:null}}if(ue.toolCalls)for(const et of ue.toolCalls){const ut={type:"tool-call",...et};(K=(ie=f.current).onToolCall)==null||K.call(ie,ut)}if(ue.toolResults)for(const et of ue.toolResults){const ut={type:"tool-result",...et};(se=(te=f.current).onToolResult)==null||se.call(te,ut)}return(Te=(Q=f.current).onResponse)==null||Te.call(Q,ue.text),(Ce=(ge=f.current).onFinish)==null||Ce.call(ge),{text:ue.text,toolCalls:(he=ue.toolCalls)==null?void 0:he.map(et=>({type:"tool-call",...et})),toolResults:(Fe=ue.toolResults)==null?void 0:Fe.map(et=>({type:"tool-result",...et}))}}catch(nt){const ue=nt instanceof Error?nt:new Error(String(nt));return i(ue),(Re=(Oe=f.current).onError)==null||Re.call(Oe,ue),{text:null}}finally{n(!1)}},[m]),v=x.useCallback(()=>{var w,_;u.current.forEach(T=>T()),u.current=[],c.current=null,o(!1),n(!1),(_=(w=f.current).onFinish)==null||_.call(w)},[]);return{stream:g,generate:y,cancel:v,isLoading:t,isGenerating:r,error:s,isInitialized:a}}function Zrt(e){return e.map(t=>({role:t.role,content:t.content}))}function Jrt(e){var t;return`You are a UI editor. Given an element and a request, output a JSON object with the changes.

Element:
- Tag: ${e.tagName}
- Classes: ${e.className||"none"}
- ID: ${e.id||"none"}
- Text: ${((t=e.text)==null?void 0:t.substring(0,100))||"none"}
- Styles: ${JSON.stringify(e.computedStyle||{}).substring(0,300)}

Output ONLY valid JSON:
{
  "cssChanges": { "property": "value" },
  "textChange": "new text if changing",
  "description": "Brief description"
}

Rules:
- "textChange" for text content changes
- "cssChanges" for style changes (use camelCase: backgroundColor, fontSize)
- Keep descriptions under 20 words`}function pH(e){return`You are a coding assistant with DIRECT file system access.

CRITICAL: USE TOOLS IMMEDIATELY - NEVER ASK THE USER TO:
- Provide file contents (use read_file)
- Run commands (use your tools)
- Share output (read it yourself)
- Paste anything (you have direct access)

Your tools:
- list_directory(path): List files in a directory
- read_file(path): Read file contents
- write_file(path, content): Write to file
- create_file(path, content): Create new file
- delete_file(path): Delete file
- semantic_search(query): AI-powered search - **USE THIS FOR ALL CODE SEARCHES**
- search_in_files(pattern, path): Grep (only for exact regex like "TODO:|FIXME:")
- find_files(pattern, path): Glob (only for filenames like "*.config.js")
- ask_clarifying_question(question, type, options?): Ask user for clarification with structured input

${e.projectPath?`Project: ${e.projectPath}`:""}

SEARCH STRATEGY - READ THIS CAREFULLY:
 ALWAYS use semantic_search as your FIRST choice for finding code:
  - "Quick start"  semantic_search("quick start onboarding")
  - "auth code"  semantic_search("authentication handler")
  - "API endpoint"  semantic_search("API endpoint definition")
  - "error handling"  semantic_search("error handling")

 ONLY use search_in_files for exact regex patterns:
  - Finding TODO comments  search_in_files("TODO:|FIXME:")
  - Finding specific syntax  search_in_files("import.*React")

FORMATTING: Use separate paragraphs for distinct thoughts. Add a blank line between paragraphs.

START WORKING IMMEDIATELY. Read files, make changes, execute.`}function mH(e){var n;const t=[];return t.push(`You are an AI assistant with DIRECT access to the user's development environment.

CRITICAL BEHAVIOR:
- NEVER ask the user to provide files, run commands, or share output
- NEVER say "could you share" or "please paste" - USE YOUR TOOLS
- When you need to see files: READ THEM with read_file or list_directory
- When you need to search code: ALWAYS use semantic_search FIRST
- BE PROACTIVE - just do the work, don't ask for permission

FORMATTING: Use separate paragraphs for distinct thoughts. Add a blank line between paragraphs for readability.

Your tools:
- list_directory(path): List files in a directory
- read_file(path): Read file contents
- write_file(path, content): Write to file
- semantic_search(query): **DEFAULT SEARCH TOOL** - Finds code by meaning, intent, and context
- search_in_files(pattern, path): Grep (only for exact regex like "TODO:|import.*")
- find_files(pattern, path): Glob (only for filenames like "*.test.ts")
- ask_clarifying_question(question, type, options?): Ask user for structured input when you need clarification

${e.projectPath?`Project: ${e.projectPath}`:""}
${e.mcpToolCount?`MCP tools available: ${e.mcpToolCount}`:""}

SEARCH STRATEGY:
 semantic_search is your PRIMARY search tool - use it for:
  - Finding features: "user authentication", "payment processing"
  - Finding patterns: "error handling", "validation logic"
  - Finding concepts: "state management", "API endpoints"
  - Finding ANYTHING: "Quick start", "navbar component", "config file"

 ONLY use search_in_files/find_files when semantic_search says "Index is empty" or for exact regex

CLARIFYING QUESTIONS:
Use ask_clarifying_question when you need user input BEFORE taking action:
- Ambiguous requests: "Which authentication method: OAuth, JWT, or session-based?"
- Multiple options: "Should I use React Query or SWR for data fetching?"
- Confirmation: "This will delete 15 files. Proceed?"
- Preferences: "What styling approach: Tailwind, CSS modules, or styled-components?"

Types:
- single-select: User picks ONE option (radio buttons)
- multi-select: User picks MULTIPLE options (checkboxes)
- text: Free text input for open-ended questions
- confirm: Simple yes/no confirmation`),e.selectedElement&&t.push(`
Selected Element:
- ${e.selectedElement.tagName}${e.selectedElement.id?"#"+e.selectedElement.id:""}
- Classes: ${e.selectedElement.className||"none"}
- Text: ${((n=e.selectedElement.text)==null?void 0:n.substring(0,50))||"none"}`),t.join(`
`)}function Xrt(e){return`You are a voice assistant for development. Keep responses SHORT (1-2 sentences).

${e.projectPath?`Working in: ${e.projectPath}`:""}

Respond conversationally. For actions, confirm briefly then execute.
Don't read code aloud - summarize what you found.`}function Qrt(e,t){switch(e){case"dom_edit":return t.selectedElement?Jrt(t.selectedElement):pH(t);case"file_ops":return pH(t);case"chat":return mH(t);case"voice":return Xrt(t);default:return mH(t)}}function eot(e,t){return(e==="ui_modify"||e==="ui_build")&&t?"dom_edit":["code_edit","code_create","code_delete","file_operation","code_refactor","test","document","deploy","configure"].includes(e)?"file_ops":"chat"}function tot(){const e=x.useMemo(()=>{var n;return typeof window<"u"&&!!((n=window.electronAPI)!=null&&n.isElectron)},[]),t=x.useMemo(()=>!e||!window.electronAPI?null:window.electronAPI,[e]);return{isElectron:e,api:t,git:(t==null?void 0:t.git)??null,files:(t==null?void 0:t.files)??null,aiSdk:(t==null?void 0:t.aiSdk)??null,oauth:(t==null?void 0:t.oauth)??null,codex:(t==null?void 0:t.codex)??null,claudeCode:(t==null?void 0:t.claudeCode)??null,mcp:(t==null?void 0:t.mcp)??null,voice:(t==null?void 0:t.voice)??null,tabdata:(t==null?void 0:t.tabdata)??null,lsp:(t==null?void 0:t.lsp)??null,dialog:(t==null?void 0:t.dialog)??null}}function ui(){var n;const e=typeof window<"u"&&!!((n=window.electronAPI)!=null&&n.isElectron),t=e?window.electronAPI:null;return{isElectron:e,api:t,git:(t==null?void 0:t.git)??null,files:(t==null?void 0:t.files)??null,aiSdk:(t==null?void 0:t.aiSdk)??null,oauth:(t==null?void 0:t.oauth)??null,codex:(t==null?void 0:t.codex)??null,claudeCode:(t==null?void 0:t.claudeCode)??null,mcp:(t==null?void 0:t.mcp)??null,voice:(t==null?void 0:t.voice)??null,tabdata:(t==null?void 0:t.tabdata)??null,lsp:(t==null?void 0:t.lsp)??null,dialog:(t==null?void 0:t.dialog)??null}}const not=[{type:"code_edit",patterns:[/(?:edit|change|modify|update|fix)\s+(?:the\s+)?(?:code|function|method|class|component)/i,/(?:make|set)\s+(?:it|this|the)\s+/i,/(?:replace|swap)\s+/i],keywords:["edit","change","modify","update","fix","replace","swap","alter"]},{type:"code_create",patterns:[/(?:create|add|new|generate|make)\s+(?:a\s+)?(?:new\s+)?(?:file|function|method|class|component)/i,/(?:write|implement)\s+(?:a\s+)?/i],keywords:["create","add","new","generate","write","implement"]},{type:"code_delete",patterns:[/(?:delete|remove|drop)\s+(?:the\s+)?(?:file|function|method|class|component)/i],keywords:["delete","remove","drop"]},{type:"code_explain",patterns:[/(?:explain|what\s+does|how\s+does|describe)\s+(?:this|the)/i,/(?:what\s+is|what's)\s+(?:this|the)/i],keywords:["explain","describe","what does","how does","what is"]},{type:"code_refactor",patterns:[/(?:refactor|clean\s+up|improve|optimize)/i,/(?:make\s+(?:it|this)\s+)?(?:better|cleaner|faster|more\s+efficient)/i],keywords:["refactor","clean up","improve","optimize","better","cleaner"]},{type:"file_operation",patterns:[/(?:list|show|find|what)\s+(?:files|folders|directories)/i,/(?:rename|move|copy)\s+(?:the\s+)?(?:file|folder)/i,/(?:what(?:'s| is)?\s+in)\s+(?:the\s+)?(?:folder|directory|\.)/i,/(?:ls|dir)\b/i,/(?:read|open|view|cat)\s+(?:the\s+)?(?:file|content)/i,/(?:write|save|create|edit|modify|update|change)\s+(?:the\s+)?(?:file|code)/i,/(?:delete|remove)\s+(?:the\s+)?(?:file|folder)/i,/(?:show|what's|whats|what is)\s+(?:in\s+)?(?:the\s+)?(?:project|folder|directory|codebase|repo)/i],keywords:["list files","show files","rename","move file","copy file","what files","whats in","folder contents","directory","ls","read file","write file","create file","edit file","save file","delete file","project files","codebase","show me"]},{type:"ui_inspect",patterns:[/(?:what\s+is|describe|analyze)\s+(?:this\s+)?(?:element|button|component)/i,/(?:look\s+at|check)\s+(?:this|the)/i],keywords:["inspect","analyze element","what is this element"]},{type:"ui_modify",patterns:[/(?:change|modify|update)\s+(?:this\s+)?(?:element|button|style|color|text|font|background)?/i,/(?:make\s+(?:it|this|that)\s*)/i,/(?:set|change)\s+(?:the\s+)?(?:color|background|font|size|width|height|padding|margin)?/i,/(?:add|remove)\s+(?:a\s+)?(?:border|shadow|padding|margin)/i,/\b(?:red|blue|green|black|white|bigger|smaller|larger|bold|italic)\b/i,/^["'][^"']+["']$/i,/(?:change|set|update)\s+(?:it\s+)?to\s+/i,/(?:text|label|title|content)\s*(?:to|:|\=)\s*/i,/(?:remove|delete|hide)\s+(?:this|that|it|the\s+element)/i,/(?:use|replace\s+with|change\s+to|swap\s+with)\s+(?:this\s+)?(?:image|photo|picture|attached)/i,/(?:replace|change|update|swap)\s+(?:this\s+)?(?:image|photo|picture|img)/i,/(?:set|use)\s+(?:the\s+)?attached\s+(?:image|photo|picture|file)?/i],keywords:["change","make it","make this","set","red","blue","green","black","white","bigger","smaller","larger","bold","italic","background","color","font","size","padding","margin","border","style","update","modify","change to","set to","remove this","delete this","hide this","remove","delete","hide","use this image","replace image","change image","swap image","use attached","replace with attached"]},{type:"debug",patterns:[/(?:debug|fix|solve)\s+(?:this|the)\s+(?:issue|bug|error|problem)/i,/(?:why\s+is|what's\s+causing)\s+/i],keywords:["debug","fix bug","solve error","why is","not working"]},{type:"question",patterns:[/^(?:how|what|why|when|where|can|could|should|would|is|are|do|does)/i,/\?$/],keywords:["how","what","why","question"]},{type:"ui_build",patterns:[/(?:build|create|make)\s+(?:a\s+)?(?:new\s+)?(?:page|screen|view|layout|form|modal|dialog|menu|nav|sidebar|header|footer|component|widget)/i,/(?:add|implement)\s+(?:a\s+)?(?:new\s+)?(?:feature|section|area)/i],keywords:["build","create page","new page","new screen","add section","new component","create form","add modal"]},{type:"research",patterns:[/(?:research|investigate|look\s+into|find\s+out|explore|discover)/i,/(?:what\s+are\s+the\s+best|best\s+practices|how\s+do\s+others|industry\s+standard)/i,/(?:search\s+for|look\s+up|google|find\s+examples)/i],keywords:["research","investigate","explore","best practices","find out","look into","examples of"]},{type:"analyze",patterns:[/(?:analyze|analysis|audit|assess|evaluate|examine|study)/i,/(?:what's\s+wrong|find\s+issues|identify\s+problems|check\s+for)/i],keywords:["analyze","analysis","audit","assess","evaluate","examine","study","find issues"]},{type:"compare",patterns:[/(?:compare|versus|vs\.?|which\s+is\s+better|pros\s+and\s+cons|trade-?offs)/i,/(?:difference\s+between|similarities|options)/i],keywords:["compare","versus","vs","better","pros cons","trade-offs","difference between","options"]},{type:"plan",patterns:[/(?:plan|design|architect|outline|strategy|roadmap|approach)/i,/(?:how\s+should\s+we|what's\s+the\s+best\s+way\s+to|steps\s+to)/i],keywords:["plan","design","architect","outline","strategy","roadmap","approach","steps"]},{type:"document",patterns:[/(?:document|write\s+docs|readme|jsdoc|comment|annotate)/i,/(?:add\s+documentation|explain\s+in\s+code|write\s+comments)/i],keywords:["document","documentation","readme","jsdoc","comments","annotate"]},{type:"test",patterns:[/(?:test|write\s+tests|unit\s+test|integration\s+test|e2e|spec)/i,/(?:verify|validate|check\s+if\s+works|make\s+sure)/i],keywords:["test","tests","unit test","integration test","e2e","spec","verify","validate"]},{type:"review",patterns:[/(?:review|code\s+review|security\s+review|check\s+code|audit\s+code)/i,/(?:is\s+this\s+code\s+(?:good|safe|secure)|any\s+issues|improvements)/i],keywords:["review","code review","security review","audit","check code","improvements"]},{type:"deploy",patterns:[/(?:deploy|publish|release|ship|push\s+to\s+prod|go\s+live)/i,/(?:build\s+for\s+production|production\s+build|package)/i],keywords:["deploy","publish","release","ship","production","go live"]},{type:"configure",patterns:[/(?:configure|config|setup|set\s+up|settings|environment|env)/i,/(?:install|add\s+package|npm\s+install|add\s+dependency)/i],keywords:["configure","config","setup","settings","environment","env","install","package"]},{type:"chat",patterns:[/^(?:hi|hello|hey|thanks|thank\s+you|ok|okay|sure|cool|nice|great)\s*[!.]?$/i],keywords:["hi","hello","hey","thanks","ok"]}];function rot(e,t){const n=e.toLowerCase(),r={},o=[];for(const u of not){let f=0,m=0,g=0,y=0;for(const v of u.patterns)v.test(e)&&(m+=3);f+=m;for(const v of u.keywords)n.includes(v.toLowerCase())&&(g+=1);f+=g,t.selectedElement&&(u.type==="ui_inspect"||u.type==="ui_modify"||u.type==="ui_build")&&(y+=2),t.selectedFiles.length>0&&u.type.startsWith("code_")&&(y+=1),t.selectedLogs.length>0&&u.type==="debug"&&(y+=2),f+=y,r[u.type]={pattern:m,keyword:g,context:y,total:f},f>0&&o.push({type:u.type,score:f})}o.sort((u,f)=>f.score-u.score);const s=o[0]||{type:"unknown",score:0},i=Math.max(s.score*.5,2),a=o.slice(1).filter(u=>u.score>=i).slice(0,2).map(u=>u.type);console.log("[Intent] Classification for:",e.substring(0,50)),console.log("[Intent] Top scores:",o.slice(0,5)),console.log("[Intent] Primary:",s.type,"| Secondary:",a);const l=[];t.selectedFiles.length>0&&l.push(...t.selectedFiles.map(u=>u.path)),t.selectedElement&&l.push(`element:${t.selectedElement.tagName}${t.selectedElement.id?"#"+t.selectedElement.id:""}`);const c={code_edit:"edit",code_create:"create",code_delete:"delete",code_explain:"explain",code_refactor:"refactor",file_operation:"file_op",ui_inspect:"inspect",ui_modify:"modify",ui_build:"build",research:"research",analyze:"analyze",compare:"compare",plan:"plan",document:"document",test:"test",debug:"debug",review:"review",deploy:"deploy",configure:"configure",question:"answer",chat:"chat",unknown:"process"};return{type:s.type,secondaryTypes:a,confidence:Math.min(s.score/10,1),targets:l,action:c[s.type]||"process",description:`${c[s.type]||"process"} ${l.join(", ")||"context"}`}}function oot(e,t,n){var o;const r=[];if(r.push(`You are a coding assistant running in Electron with DIRECT ACCESS to the local file system.

CRITICAL EXECUTION RULES:
1. You have DIRECT file system access. USE IT.
2. When asked to CREATE a file - CREATE IT IMMEDIATELY. Don't read first.
3. When asked to EDIT a file - READ IT ONCE, then WRITE the changes.
4. If a read fails (file not found) and you're creating - JUST CREATE THE FILE.
5. NEVER get stuck in a read loop. If you've tried reading and it failed, MOVE ON.
6. NEVER ask the user to do anything - YOU have the tools, USE THEM.
7. EXECUTE tools directly. Don't explain or ask permission.

ACTION-FIRST BEHAVIOR:
- CREATE tasks: Use write_file or create_file IMMEDIATELY with the content
- EDIT tasks: Read file ONCE, then write_file with changes
- If read fails with "not found" and you're creating: That's EXPECTED - just create it
- If you've read 2+ files without making progress: STOP READING and TAKE ACTION

ANTI-LOOP RULES:
- Do NOT call list_directory more than once per request
- Do NOT call read_file on the same path twice
- Do NOT search for files you should be creating
- If tools return errors, ADAPT - don't retry the same thing

Your tools:

WRITING (use these for CREATE/EDIT):
- write_file: Creates or overwrites file - USE THIS FIRST for create/edit tasks
- create_file: Creates new file (fails if exists)
- delete_file: Deletes file
- rename_file: Renames/moves file
- create_directory: Creates folder

READING (use sparingly):
- read_file: Read file content
- list_directory: List directory contents
- get_file_tree: Get project structure
- read_multiple_files: Read several files at once

SEARCH - CRITICAL INSTRUCTIONS:
- semantic_search: **YOUR PRIMARY SEARCH TOOL** - Finds code by meaning and context
   USE FOR: "Quick start", "auth code", "error handling", "API endpoint", ANY code search
   This understands INTENT, not just keywords
- search_in_files: Grep (ONLY for exact regex patterns like "TODO:|FIXME:")
- find_files: Glob (ONLY for filenames like "*.test.ts")

 IMPORTANT: ALWAYS use semantic_search for finding code. It's faster and smarter than grep.
Only fall back to search_in_files if semantic_search returns "Index is empty".

Current intent: ${t.type} (${t.description})
Confidence: ${Math.round(t.confidence*100)}%`),e.projectPath&&r.push(`
## Project Context
Project root: ${e.projectPath}

IMPORTANT: This is where the source files live. When the user asks about the page or wants changes:
1. Use Glob to find relevant source files (e.g., *.tsx, *.jsx, *.html)
2. Use Read to examine the full file before making changes
3. Common patterns: src/, components/, pages/, app/`),e.selectedElement&&(r.push(`
## Selected UI Element (FOCUS AREA - but read the FULL file for context)
Tag: ${e.selectedElement.tagName}
${e.selectedElement.id?`ID: ${e.selectedElement.id}`:""}
${e.selectedElement.className?`Classes: ${e.selectedElement.className}`:""}
${e.selectedElement.text?`Text: ${e.selectedElement.text.substring(0,100)}`:""}
${e.selectedElement.xpath?`XPath: ${e.selectedElement.xpath}`:""}
${(o=e.selectedElement.sourceLocation)!=null&&o.summary?`Source: ${e.selectedElement.sourceLocation.summary}`:""}

 CRITICAL FOR UI EDITS:
1. This HTML snippet is just the SELECTED element - the user wants to focus on this area
2. You MUST read the ENTIRE source file to understand the full context before editing
3. The element exists within a larger component/page - understand that structure first
4. Don't assume what's around it - READ THE FILE to see the full picture`),e.selectedElement.outerHTML&&r.push(`
HTML Snippet (selected element only):
\`\`\`html
${e.selectedElement.outerHTML.substring(0,500)}
\`\`\``)),e.selectedFiles.length>0){r.push(`
## Selected Files`);for(const s of e.selectedFiles)if(r.push(`
### ${s.path}
\`\`\`
${s.content.substring(0,2e3)}${s.content.length>2e3?`
... (truncated)`:""}
\`\`\``),s.diagnostics&&s.diagnostics.length>0){const i=s.diagnostics.filter(c=>c.severity==="error"),a=s.diagnostics.filter(c=>c.severity==="warning"),l=s.diagnostics.filter(c=>c.severity==="info"||c.severity==="hint");if(r.push(`
**Diagnostics:**`),i.length>0){r.push(`
 **Errors (${i.length}):**`);for(const c of i.slice(0,10))r.push(`- Line ${c.line}:${c.character}: ${c.message}${c.source?` [${c.source}]`:""}`);i.length>10&&r.push(`  ... and ${i.length-10} more errors`)}if(a.length>0){r.push(`
 **Warnings (${a.length}):**`);for(const c of a.slice(0,5))r.push(`- Line ${c.line}:${c.character}: ${c.message}${c.source?` [${c.source}]`:""}`);a.length>5&&r.push(`  ... and ${a.length-5} more warnings`)}if(l.length>0&&i.length===0&&a.length===0){r.push(`
 **Hints (${l.length}):**`);for(const c of l.slice(0,3))r.push(`- Line ${c.line}:${c.character}: ${c.message}`)}}}if(e.selectedLogs.length>0){r.push(`
## Console Logs`);for(const s of e.selectedLogs.slice(-10))r.push(`[${s.type}] ${s.message}`)}switch(t.type){case"code_create":r.push(`
## CREATE INSTRUCTIONS - DO THIS NOW:
1. Call write_file with the FULL content immediately
2. Do NOT read files first - you're CREATING, not editing
3. Do NOT search for where to put the file - the user told you
4. If you need to see project structure, ONE list_directory call max
5. WRITE THE FILE. That is your primary task.`);break;case"code_edit":case"code_refactor":r.push(`
## EDIT INSTRUCTIONS:
1. Read the target file ONCE with read_file
2. Make your changes and call write_file with the new content
3. Do NOT read other files unless absolutely necessary
4. If read_file returns "not found" error, use write_file to create it`);break;case"code_explain":case"question":r.push(`
## EXPLAIN INSTRUCTIONS:
Read the relevant files and provide clear explanations.
Reference specific line numbers when discussing code.`);break;case"ui_inspect":case"ui_modify":r.push(`
## UI INSTRUCTIONS:
1. The element info is above - USE IT
2. If modifying, call write_file to update the source
3. Do NOT over-analyze - make the change`);break;case"debug":r.push(`
## DEBUG INSTRUCTIONS:
1. Read the error info provided
2. Call read_file on the suspected file
3. Call write_file with the fix
4. Do NOT endlessly search - make your best fix attempt`);break}if(n&&n.length>0){const s=n.reduce((i,a)=>(i[a.serverId]||(i[a.serverId]=[]),i[a.serverId].push(a),i),{});r.push(`
## MCP Tools (External Capabilities)
You have access to additional tools from connected MCP (Model Context Protocol) servers.
These extend your capabilities beyond local file operations.

To call an MCP tool, use the format: mcp_<serverId>_<toolName>`);for(const[i,a]of Object.entries(s)){r.push(`
### Server: ${i}`);for(const l of a){const c=l.inputSchema.properties?Object.keys(l.inputSchema.properties).join(", "):"none";r.push(`- **mcp_${i}_${l.name}**: ${l.description||"No description"} (params: ${c})`)}}}return r.join(`
`)}function sot(e={}){const{onFileModified:t,onAskClarifyingQuestion:n}=e;return{read_file:{description:"Read the contents of a file",parameters:li({path:ro().describe("Absolute path to the file").optional(),filePath:ro().describe("Legacy alias for path").optional()}),execute:async r=>{var c;const{path:o,filePath:s}=r,i=o??s;if(!i)return{error:'read_file requires a "path" argument'};const{api:a}=ui();if(!((c=a==null?void 0:a.files)!=null&&c.readFile))return{error:"File operations not available (not in Electron)"};const l=await a.files.readFile(i);return l.success?{content:l.data,path:i}:{error:l.error}}},write_file:{description:"Write content to a file (creates or overwrites)",parameters:li({path:ro().describe("Absolute path to the file"),content:ro().describe("Content to write")}),execute:async r=>{var c,u;const{path:o,content:s}=r,{api:i}=ui();if(!((c=i==null?void 0:i.files)!=null&&c.writeFile))return{error:"File operations not available (not in Electron)"};let a;if((u=i==null?void 0:i.files)!=null&&u.readFile){const f=await i.files.readFile(o);f.success&&(a=f.data)}const l=await i.files.writeFile(o,s);return l.success?(t==null||t({type:"write",path:o,originalContent:a,newContent:s}),{success:!0,path:o,bytesWritten:s.length}):{error:l.error}}},create_file:{description:"Create a new file (fails if file exists)",parameters:li({path:ro().describe("Absolute path for the new file"),content:ro().optional().describe("Initial content")}),execute:async r=>{var l;const{path:o,content:s}=r,{api:i}=ui();if(!((l=i==null?void 0:i.files)!=null&&l.createFile))return{error:"File operations not available (not in Electron)"};const a=await i.files.createFile(o,s||"");return a.success?(t==null||t({type:"create",path:o,newContent:s||""}),{success:!0,path:o}):{error:a.error}}},delete_file:{description:"Delete a file",parameters:li({path:ro().describe("Absolute path to the file to delete")}),execute:async r=>{var l,c;const{path:o}=r,{api:s}=ui();if(!((l=s==null?void 0:s.files)!=null&&l.deleteFile))return{error:"File operations not available (not in Electron)"};let i;if((c=s==null?void 0:s.files)!=null&&c.readFile){const u=await s.files.readFile(o);u.success&&(i=u.data)}const a=await s.files.deleteFile(o);return a.success?(t==null||t({type:"delete",path:o,originalContent:i}),{success:!0,path:o}):{error:a.error}}},rename_file:{description:"Rename or move a file",parameters:li({oldPath:ro().describe("Current path"),newPath:ro().describe("New path")}),execute:async r=>{var l;const{oldPath:o,newPath:s}=r,{api:i}=ui();if(!((l=i==null?void 0:i.files)!=null&&l.renameFile))return{error:"File operations not available (not in Electron)"};const a=await i.files.renameFile(o,s);return a.success?{success:!0,oldPath:o,newPath:s}:{error:a.error}}},list_directory:{description:"List files and folders in a directory",parameters:li({path:ro().optional().describe("Directory path (defaults to project root)")}),execute:async r=>{var a;const{path:o}=r,{api:s}=ui();if(!((a=s==null?void 0:s.files)!=null&&a.listDirectory))return{error:"File operations not available (not in Electron)"};const i=await s.files.listDirectory(o);return i.success?{entries:i.data,path:o||"project root"}:{error:i.error}}},create_directory:{description:"Create a new directory",parameters:li({path:ro().describe("Path for the new directory")}),execute:async r=>{var a;const{path:o}=r,{api:s}=ui();if(!((a=s==null?void 0:s.files)!=null&&a.createDirectory))return{error:"File operations not available (not in Electron)"};const i=await s.files.createDirectory(o);return i.success?{success:!0,path:o}:{error:i.error}}},file_exists:{description:"Check if a file or directory exists",parameters:li({path:ro().describe("Path to check")}),execute:async r=>{var a;const{path:o}=r,{api:s}=ui();return(a=s==null?void 0:s.files)!=null&&a.exists?{exists:(await s.files.exists(o)).exists,path:o}:{error:"File operations not available (not in Electron)"}}},file_stat:{description:"Get file/directory information (size, modified time, etc)",parameters:li({path:ro().describe("Path to check")}),execute:async r=>{var a;const{path:o}=r,{api:s}=ui();if(!((a=s==null?void 0:s.files)!=null&&a.stat))return{error:"File operations not available (not in Electron)"};const i=await s.files.stat(o);return i.success?{...i.data,path:o}:{error:i.error}}},git_status:{description:"Get current git status (modified files, etc)",parameters:li({includeUntracked:E2().optional().describe("Include untracked files (default: true)")}),execute:async()=>{var s;const{api:r}=ui();if(!((s=r==null?void 0:r.git)!=null&&s.getStatus))return{error:"Git operations not available (not in Electron)"};const o=await r.git.getStatus();return o.success?o.data:{error:o.error}}},git_commit:{description:"Commit staged changes with a message",parameters:li({message:ro().describe("Commit message")}),execute:async r=>{var a;const{message:o}=r,{api:s}=ui();if(!((a=s==null?void 0:s.git)!=null&&a.commit))return{error:"Git operations not available (not in Electron)"};const i=await s.git.commit(o);return i.success?{success:!0,message:o}:{error:i.error}}},search_in_files:{description:"Search for text pattern in files (like grep). Returns matching lines with file paths and line numbers.",parameters:li({pattern:ro().describe("Text or regex pattern to search"),directory:ro().optional().describe("Directory to search in (defaults to project root)"),filePattern:ro().optional().describe('File pattern filter (e.g., "*.ts", "*.tsx,*.js")'),caseSensitive:E2().optional().describe("Case sensitive search (default: false)"),maxResults:w2().optional().describe("Maximum results to return (default: 100)")}),execute:async r=>{var f;const{pattern:o,directory:s,filePattern:i,caseSensitive:a,maxResults:l}=r,{api:c}=ui();if(!((f=c==null?void 0:c.files)!=null&&f.searchInFiles))return{error:"Search not available (not in Electron)"};const u=await c.files.searchInFiles(o,s,{filePattern:i,caseSensitive:a,maxResults:l});return u.success?{matches:u.data,count:u.data.length}:{error:u.error}}},semantic_search:{description:"PRIMARY SEARCH TOOL: Search codebase by meaning, intent, and context using AI. Finds code even when exact keywords don't match. Use this for ALL code searches: features, concepts, components, functions, patterns, documentation - everything. 3-10x faster than grep and finds more relevant results. Only falls back to grep if index is empty.",parameters:li({query:ro().describe('Natural language description of what to find (e.g., "authentication handler", "error handling for API calls")'),limit:w2().optional().describe("Maximum results to return (default: 10)"),threshold:w2().optional().describe("Minimum similarity score 0-1 (default: 0.3)")}),execute:async r=>{var l,c;const{query:o,limit:s,threshold:i}=r,{api:a}=ui();if((l=a==null?void 0:a.mgrep)!=null&&l.search){const u=await a.mgrep.search(o,{limit:s,threshold:i});if(u.success&&u.results)return{matches:u.results.map(f=>{var m,g,y,v;return{file:f.filePath,content:f.content,score:f.score,startLine:(m=f.metadata)==null?void 0:m.startLine,endLine:(g=f.metadata)==null?void 0:g.endLine,language:(y=f.metadata)==null?void 0:y.language,functionName:(v=f.metadata)==null?void 0:v.functionName}}),count:u.results.length,semantic:!0};console.log("[semantic_search] mgrep failed, falling back to grep:",u.error)}if((c=a==null?void 0:a.files)!=null&&c.searchInFiles){const u=await a.files.searchInFiles(o,void 0,{maxResults:s||10});return u.success?{matches:u.data,count:u.data.length,semantic:!1,warning:" Fell back to keyword search (slower, less accurate). Code Index not initialized - go to Settings  Code Index to enable AI-powered semantic search for better results."}:{error:u.error}}return{error:"Search not available. Enable Code Index in Settings for semantic search."}}},find_files:{description:'Find files matching a glob pattern (e.g., "**/*.ts", "src/**/*.tsx")',parameters:li({pattern:ro().describe("Glob pattern (supports *, **, ?)"),directory:ro().optional().describe("Directory to search in")}),execute:async r=>{var l;const{pattern:o,directory:s}=r,{api:i}=ui();if(!((l=i==null?void 0:i.files)!=null&&l.glob))return{error:"Glob not available (not in Electron)"};const a=await i.files.glob(o,s);return a.success?{files:a.data,count:a.data.length}:{error:a.error}}},copy_file:{description:"Copy a file to a new location",parameters:li({sourcePath:ro().describe("Source file path"),destPath:ro().describe("Destination file path")}),execute:async r=>{var l;const{sourcePath:o,destPath:s}=r,{api:i}=ui();if(!((l=i==null?void 0:i.files)!=null&&l.copyFile))return{error:"Copy not available (not in Electron)"};const a=await i.files.copyFile(o,s);return a.success?{success:!0,sourcePath:o,destPath:s}:{error:a.error}}},read_multiple_files:{description:"Read multiple files at once - more efficient than calling read_file multiple times",parameters:li({paths:a6(ro()).describe("Array of file paths to read")}),execute:async r=>{var a;const{paths:o}=r,{api:s}=ui();if(!((a=s==null?void 0:s.files)!=null&&a.readMultiple))return{error:"Read multiple not available (not in Electron)"};const i=await s.files.readMultiple(o);return i.success?{files:i.data}:{error:i.error}}},get_file_tree:{description:"Get a recursive file tree of a directory - useful for understanding project structure",parameters:li({directory:ro().optional().describe("Directory path (defaults to project root)"),maxDepth:w2().optional().describe("Maximum depth to traverse (default: 5)"),includeHidden:E2().optional().describe("Include hidden files (default: false)")}),execute:async r=>{var c;const{directory:o,maxDepth:s,includeHidden:i}=r,{api:a}=ui();if(!((c=a==null?void 0:a.files)!=null&&c.getTree))return{error:"Get tree not available (not in Electron)"};const l=await a.files.getTree(o,{maxDepth:s,includeHidden:i});return l.success?{tree:l.data}:{error:l.error}}},ask_clarifying_question:{description:"Ask the user a clarifying question to better understand their needs. Use this when you need more information before proceeding. Supports single-select, multi-select, text input, or simple confirmation.",parameters:li({question:ro().describe("The question to ask the user"),type:l6(["single-select","multi-select","text","confirm"]).describe("Type of input: single-select (one choice), multi-select (multiple choices), text (free text), confirm (yes/no)"),options:a6(li({id:ro().describe("Unique ID for this option"),label:ro().describe("Display text for the option"),description:ro().optional().describe("Additional context for this option")})).optional().describe("Options for single-select or multi-select types"),placeholder:ro().optional().describe("Placeholder text for text input type"),required:E2().optional().describe("Whether the user must answer (default: false)")}),execute:async r=>{const{question:o,type:s,options:i,placeholder:a,required:l}=r;if(!n)return{error:"Clarifying questions not available in this context"};if((s==="single-select"||s==="multi-select")&&(!i||i.length===0))return{error:"Options are required for single-select and multi-select question types"};const c={id:`q_${Date.now()}`,question:o,type:s,options:i,placeholder:a,required:l};try{const u=await n(c);return{success:!0,question:o,response:u,type:s}}catch(u){return{error:`Failed to get user response: ${u}`}}}}}}function iot(e={}){const{mcpTools:t=[],callMCPTool:n,onFileModified:r,onAskClarifyingQuestion:o}=e,[s,i]=x.useState({context:{selectedElement:null,selectedFiles:[],selectedLogs:[],projectPath:null,recentMessages:[]},lastIntent:null,isProcessing:!1}),a=x.useMemo(()=>sot({onFileModified:r,onAskClarifyingQuestion:o}),[r,o]),l=x.useMemo(()=>a,[a,t,n]),c=x.useCallback(m=>{i(g=>({...g,context:{...g.context,...m}}))},[]),u=x.useCallback((m,g)=>{const y=rot(m,s.context);i(_=>({..._,lastIntent:y}));const v=(g==null?void 0:g.forceMode)??eot(y.type,!!s.context.selectedElement);let w;return v==="dom_edit"?w=Qrt("dom_edit",{selectedElement:s.context.selectedElement,projectPath:s.context.projectPath}):w=oot(s.context,y,t.length>0?t:void 0),{intent:y,systemPrompt:w,tools:l,promptMode:v}},[s.context,t,l]),f=x.useCallback(m=>{i(g=>({...g,isProcessing:m}))},[]);return{context:s.context,lastIntent:s.lastIntent,isProcessing:s.isProcessing,updateContext:c,processMessage:u,setProcessing:f,tools:l}}const aot=({data:e,onSubmit:t,onSkip:n,isDarkMode:r=!0})=>{const[o,s]=x.useState(new Set),[i,a]=x.useState(""),[l,c]=x.useState(!1),u=y=>{if(e.type==="single-select")s(new Set([y]));else{const v=new Set(o);v.has(y)?v.delete(y):v.add(y),s(v)}},f=()=>{if(c(!0),e.type==="text")t(e.id,i);else if(e.type==="confirm")t(e.id,"confirmed");else{const y=Array.from(o);t(e.id,e.type==="single-select"?y[0]:y)}},m=()=>{n&&n(e.id)},g=()=>e.type==="text"?!e.required||i.trim().length>0:e.type==="confirm"?!0:!e.required||o.size>0;return h.jsxs("div",{className:`rounded-xl p-4 my-3 border transition-all duration-200 ${r?"bg-amber-900/20 border-amber-700/50":"bg-amber-50 border-amber-200"}`,children:[h.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${r?"bg-amber-800/50":"bg-amber-100"}`,children:h.jsx(dN,{size:18,className:r?"text-amber-400":"text-amber-600"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:`text-sm font-medium ${r?"text-amber-200":"text-amber-900"}`,children:e.question}),e.type==="multi-select"&&h.jsx("p",{className:`text-xs mt-1 ${r?"text-amber-400/70":"text-amber-700/70"}`,children:"Select all that apply"})]})]}),(e.type==="single-select"||e.type==="multi-select")&&e.options&&h.jsx("div",{className:"space-y-2 mb-4",children:e.options.map(y=>h.jsxs("button",{onClick:()=>u(y.id),disabled:l,className:`w-full text-left px-3 py-2.5 rounded-lg text-sm transition-all duration-200 flex items-center gap-3 ${o.has(y.id)?r?"bg-amber-700/50 text-amber-100 ring-1 ring-amber-500":"bg-amber-200 text-amber-900 ring-1 ring-amber-400":r?"bg-neutral-800/50 text-neutral-300 hover:bg-neutral-700/50":"bg-white text-stone-700 hover:bg-stone-50 border border-stone-200"} ${l?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx("div",{className:`w-4 h-4 rounded-${e.type==="single-select"?"full":"sm"} border-2 flex items-center justify-center transition-colors ${o.has(y.id)?"bg-amber-500 border-amber-500":r?"border-neutral-500":"border-stone-300"}`,children:o.has(y.id)&&h.jsx(Co,{size:10,className:"text-white"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:"font-medium",children:y.label}),y.description&&h.jsx("p",{className:`text-xs mt-0.5 ${r?"text-neutral-400":"text-stone-500"}`,children:y.description})]})]},y.id))}),e.type==="text"&&h.jsx("div",{className:"mb-4",children:h.jsx("textarea",{value:i,onChange:y=>a(y.target.value),placeholder:e.placeholder||"Type your answer...",disabled:l,className:`w-full px-3 py-2 rounded-lg text-sm resize-none transition-colors ${r?"bg-neutral-800 text-neutral-200 placeholder-neutral-500 border border-neutral-700 focus:border-amber-500":"bg-white text-stone-800 placeholder-stone-400 border border-stone-200 focus:border-amber-400"} focus:outline-none focus:ring-1 focus:ring-amber-500/50 ${l?"opacity-50 cursor-not-allowed":""}`,rows:3})}),e.type==="confirm"&&h.jsx("div",{className:"mb-4",children:h.jsx("p",{className:`text-sm ${r?"text-neutral-400":"text-stone-600"}`,children:"Click confirm to proceed, or skip to provide more context."})}),h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n&&!e.required&&h.jsx("button",{onClick:m,disabled:l,className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${r?"text-neutral-400 hover:text-neutral-200 hover:bg-neutral-800":"text-stone-500 hover:text-stone-700 hover:bg-stone-100"} ${l?"opacity-50 cursor-not-allowed":""}`,children:"Skip"}),h.jsx("button",{onClick:f,disabled:!g()||l,className:`px-4 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${g()&&!l?r?"bg-amber-600 text-white hover:bg-amber-500":"bg-amber-500 text-white hover:bg-amber-600":r?"bg-neutral-700 text-neutral-500 cursor-not-allowed":"bg-stone-200 text-stone-400 cursor-not-allowed"}`,children:l?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):h.jsxs(h.Fragment,{children:[h.jsx(Co,{size:14}),e.type==="confirm"?"Confirm":"Submit"]})})]})]})};function lot(){const{isElectron:e,api:t}=tot(),n=x.useMemo(()=>e?t==null?void 0:t.lsp:null,[e,t]),r=x.useRef(new Map),o=x.useCallback((v,w,_=200)=>(...T)=>{const k=r.current;k.has(v)&&clearTimeout(k.get(v));const M=setTimeout(()=>{w(...T),k.delete(v)},_);k.set(v,M)},[]),s=x.useCallback(async(v,w,_)=>{if(!n)return null;try{const T=await n.hover(v,w,_);return T.success&&T.data?T.data:null}catch(T){return console.error("[useElectronLSP] Hover failed:",T),null}},[n]),i=x.useCallback(async(v,w,_)=>{if(!n)return[];try{const T=await n.completion(v,w,_);return T.success&&T.data?T.data:[]}catch(T){return console.error("[useElectronLSP] Completion failed:",T),[]}},[n]),a=x.useCallback(async(v,w,_)=>{if(!n)return null;try{const T=await n.definition(v,w,_);return T.success&&T.data?T.data:null}catch(T){return console.error("[useElectronLSP] Definition failed:",T),null}},[n]),l=x.useCallback(async(v,w,_)=>{if(!n)return[];try{const T=await n.references(v,w,_);return T.success&&T.data?T.data:[]}catch(T){return console.error("[useElectronLSP] References failed:",T),[]}},[n]),c=x.useCallback(async v=>{if(!n)return[];try{const w=await n.getDiagnosticsForFile(v);return w.success&&w.data?w.data:[]}catch(w){return console.error("[useElectronLSP] Get diagnostics failed:",w),[]}},[n]),u=x.useCallback(async v=>{if(!n)return!1;try{return(await n.fileSaved(v)).success}catch(w){return console.error("[useElectronLSP] File saved failed:",w),!1}},[n]),f=x.useCallback(async(v,w)=>{if(!n)return!1;try{return(await n.fileChanged(v,w)).success}catch(_){return console.error("[useElectronLSP] File changed failed:",_),!1}},[n]),m=x.useCallback(async v=>{if(!n)return!1;try{return(await n.init(v)).success}catch(w){return console.error("[useElectronLSP] Init failed:",w),!1}},[n]),g=x.useCallback(async()=>{if(!n)return!1;try{return(await n.shutdown()).success}catch(v){return console.error("[useElectronLSP] Shutdown failed:",v),!1}},[n]),y=x.useCallback(v=>{if(!n)return()=>{};try{return n.onEvent(v)}catch(w){return console.error("[useElectronLSP] Event subscription failed:",w),()=>{}}},[n]);return{isAvailable:!!n,hover:s,completion:i,definition:a,references:l,getDiagnostics:c,fileSaved:u,fileChanged:f,init:m,shutdown:g,onEvent:y,debounce:o}}function cot(e){const t=lot(),[n,r]=x.useState({hoverTooltip:{isVisible:!1,data:null,position:null},autocomplete:{isVisible:!1,items:[],position:null,filterText:""}}),o=x.useRef(null),s=x.useRef(null),i=x.useRef(new Map),a=x.useRef(new Map),l=x.useCallback(async(_,T,k,M)=>{!e||!t.isAvailable||(o.current={x:_,y:T,line:k,character:M},s.current&&clearTimeout(s.current),s.current=setTimeout(async()=>{const D=`${e}:${k}:${M}`;if(i.current.has(D)){const P=i.current.get(D);r(B=>({...B,hoverTooltip:{isVisible:!0,data:P,position:{x:_,y:T}}}));return}const I=await t.hover(e,k,M);I&&(i.current.set(D,I),r(P=>({...P,hoverTooltip:{isVisible:!0,data:I,position:{x:_,y:T}}})))},200))},[e,t]),c=x.useCallback(()=>{s.current&&clearTimeout(s.current),r(_=>({..._,hoverTooltip:{isVisible:!1,data:null,position:null}}))},[]),u=x.useCallback(async(_,T,k,M,D="")=>{if(!e||!t.isAvailable)return;const I=`${e}:${k}:${M}`;if(a.current.has(I)){const B=a.current.get(I);r(U=>({...U,autocomplete:{isVisible:!0,items:B,position:{x:_,y:T},filterText:D}}));return}const P=await t.completion(e,k,M);P&&(a.current.set(I,P),r(B=>({...B,autocomplete:{isVisible:!0,items:P,position:{x:_,y:T},filterText:D}})))},[e,t]),f=x.useCallback(_=>{r(T=>({...T,autocomplete:{...T.autocomplete,filterText:_}}))},[]),m=x.useCallback(()=>{r(_=>({..._,autocomplete:{isVisible:!1,items:[],position:null,filterText:""}}))},[]),g=x.useCallback(async _=>{console.log("[LSP] Selected completion:",_.label,_.insertText||_.label),m()},[m]),y=x.useCallback(async(_,T)=>{if(!e||!t.isAvailable)return;const k=await t.definition(e,_,T);if(k){const M=Array.isArray(k)?k:k?[k]:[];if(M.length>0)return console.log("[LSP] Go to definition:",M[0]),M[0]}return null},[e,t]),v=x.useCallback(async(_,T)=>!e||!t.isAvailable?[]:await t.references(e,_,T),[e,t]),w=x.useCallback(()=>{i.current.clear(),a.current.clear()},[]);return x.useEffect(()=>()=>{s.current&&clearTimeout(s.current),w()},[w]),{uiState:n,showHover:l,hideHover:c,showAutocomplete:u,hideAutocomplete:m,updateAutocompleteFilter:f,selectCompletion:g,goToDefinition:y,findReferences:v,clearCache:w}}function uot(e){return typeof e=="string"?e:Array.isArray(e)?e.map(t=>typeof t=="string"?t:t.value).join(`

`):e&&typeof e=="object"&&"value"in e?e.value:""}function dot({content:e}){const t=e.split(/(`{1,3}[\s\S]*?`{1,3})/g);return h.jsx("div",{className:"space-y-2 text-sm",children:t.map((n,r)=>{var o;if(n.startsWith("`")&&n.endsWith("`")&&!n.includes(`
`))return h.jsx("code",{className:"inline-block bg-black/40 text-amber-200 px-1.5 py-0.5 rounded font-mono text-xs",children:n.slice(1,-1)},r);if(n.startsWith("```")&&n.endsWith("```")){const s=n.slice(3,-3).trim().split(`
`),a=((o=s[0])!=null&&o.match(/^(\w+)$/)?s[0]:null)?s.slice(1).join(`
`):n.slice(3,-3);return h.jsx("pre",{className:"bg-black/60 text-amber-100 p-2 rounded overflow-x-auto font-mono text-xs",children:h.jsx("code",{children:a})},r)}return h.jsx("p",{className:"text-gray-300",children:n},r)})})}const fot=({data:e,position:t,isVisible:n,onDismiss:r})=>{const o=x.useRef(null),[s,i]=x.useState(null);if(x.useEffect(()=>{if(!n||!t||!o.current)return;const l=8;let c=t.y+l,u=t.x;const f=o.current.getBoundingClientRect(),m=f.width,g=f.height,y=window.innerWidth,v=window.innerHeight;u+m>y-10&&(u=Math.max(10,y-m-10)),c+g>v-10&&(c=Math.max(10,t.y-g-l)),i({top:c,left:u})},[n,t]),!n||!e||!s)return null;const a=uot(e.contents);return h.jsxs("div",{ref:o,className:"fixed z-50 bg-gray-900 border border-gray-700 rounded-lg shadow-2xl max-w-sm",style:{top:`${s.top}px`,left:`${s.left}px`},onMouseLeave:r,children:[h.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-700/50",children:[h.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Type Information"}),h.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-300 transition-colors p-1","aria-label":"Close tooltip",children:h.jsx(qr,{size:14})})]}),h.jsx("div",{className:"p-3 max-h-64 overflow-y-auto custom-scrollbar",children:h.jsx(dot,{content:a})}),h.jsx("div",{className:"absolute bottom-full left-4 -mb-1 w-2 h-2 bg-gray-900 border-l border-t border-gray-700 transform rotate-45"})]})},gH={1:{label:"Text",color:"text-gray-400"},2:{label:"Method",color:"text-blue-400"},3:{label:"Function",color:"text-blue-400"},4:{label:"Constructor",color:"text-green-400"},5:{label:"Field",color:"text-amber-400"},6:{label:"Variable",color:"text-amber-400"},7:{label:"Class",color:"text-green-400"},8:{label:"Interface",color:"text-green-400"},9:{label:"Module",color:"text-purple-400"},10:{label:"Property",color:"text-amber-400"},11:{label:"Unit",color:"text-gray-400"},12:{label:"Value",color:"text-gray-400"},13:{label:"Enum",color:"text-green-400"},14:{label:"Keyword",color:"text-red-400"},15:{label:"Snippet",color:"text-pink-400"},16:{label:"Color",color:"text-cyan-400"},17:{label:"Reference",color:"text-gray-400"},18:{label:"Folder",color:"text-blue-300"},19:{label:"EnumMember",color:"text-green-400"},20:{label:"Constant",color:"text-red-400"},21:{label:"Struct",color:"text-green-400"},22:{label:"Event",color:"text-pink-400"},23:{label:"Operator",color:"text-red-400"},24:{label:"TypeParameter",color:"text-cyan-400"}};function hot(e){return!e||!gH[e]?{label:"Unknown",color:"text-gray-400"}:gH[e]}function pot(e,t){if(!t)return e;const n=t.toLowerCase();return e.filter(r=>(r.filterText||r.label).toLowerCase().includes(n))}function mot({text:e,match:t}){if(!t)return h.jsx(h.Fragment,{children:e});const n=t.toLowerCase(),o=e.toLowerCase().indexOf(n);return o===-1?h.jsx(h.Fragment,{children:e}):h.jsxs(h.Fragment,{children:[e.slice(0,o),h.jsx("span",{className:"bg-amber-500/30 text-amber-200 font-semibold",children:e.slice(o,o+t.length)}),e.slice(o+t.length)]})}const got=({items:e,position:t,isVisible:n,filterText:r="",onSelect:o,onDismiss:s})=>{const i=x.useRef(null),a=x.useRef(null),[l,c]=x.useState(null),[u,f]=x.useState(0),m=x.useMemo(()=>pot(e,r),[e,r]);x.useEffect(()=>{f(0)},[r]),x.useEffect(()=>{if(!n||!t||!i.current)return;const y=4;let v=t.y+y,w=t.x;const _=i.current.getBoundingClientRect(),T=_.width,k=_.height,M=window.innerWidth,D=window.innerHeight;w+T>M-10&&(w=Math.max(10,M-T-10)),v+k>D-10&&(v=Math.max(10,t.y-k-y)),c({top:v,left:w})},[n,t]),x.useEffect(()=>{if(!a.current)return;const v=a.current.querySelectorAll("[data-index]")[u];v&&v.scrollIntoView({block:"nearest"})},[u]);const g=x.useCallback(y=>{switch(y.key){case"ArrowDown":y.preventDefault(),f(v=>v<m.length-1?v+1:v);break;case"ArrowUp":y.preventDefault(),f(v=>v>0?v-1:v);break;case"Enter":y.preventDefault(),m[u]&&(o(m[u]),s());break;case"Escape":y.preventDefault(),s();break}},[m,u,o,s]);return!n||!l||m.length===0?null:h.jsxs("div",{ref:i,className:"fixed z-50 bg-gray-900 border border-gray-700 rounded-lg shadow-2xl max-w-sm min-w-80",style:{top:`${l.top}px`,left:`${l.left}px`},onKeyDown:g,tabIndex:-1,children:[h.jsx("div",{className:"px-3 py-2 border-b border-gray-700/50",children:h.jsxs("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:["Suggestions (",m.length,")"]})}),h.jsx("div",{ref:a,className:"max-h-64 overflow-y-auto custom-scrollbar",role:"listbox",children:m.map((y,v)=>{const w=hot(y.kind),_=v===u;return h.jsxs("button",{"data-index":v,onClick:()=>{o(y),s()},onMouseEnter:()=>f(v),className:`w-full text-left px-3 py-2 transition-colors flex items-center gap-2 ${_?"bg-amber-600/40 border-l-2 border-amber-500":"hover:bg-gray-800/50 border-l-2 border-transparent"}`,role:"option","aria-selected":_,children:[h.jsx("span",{className:`flex-shrink-0 text-sm ${w.color}`,children:h.jsx(Ac,{size:14})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"text-sm font-medium text-gray-100 truncate",children:h.jsx(mot,{text:y.label,match:r})}),y.detail&&h.jsx("div",{className:"text-xs text-gray-500 truncate",children:y.detail})]}),_&&h.jsx(Af,{size:16,className:"flex-shrink-0 text-amber-500"})]},`${y.label}-${v}`)})}),h.jsx("div",{className:"px-3 py-2 border-t border-gray-700/50 bg-gray-900/50",children:h.jsx("div",{className:"text-xs text-gray-500 text-center",children:h.jsx("span",{children:" Navigate  Enter Select  Esc Close"})})})]})};var PA={};function bot(e,t,n){return{id:`${n}_${e}`,name:e,transport:{type:"stdio",command:t.command,args:t.args||[],env:t.env||{},cwd:t.cwd},enabled:!0,autoConnect:!0}}async function cie(e,t){var n;if(!((n=window.electronAPI)!=null&&n.files))return[];try{if(!await window.electronAPI.files.exists(e))return[];const o=await window.electronAPI.files.readFile(e);if(!o||typeof o!="string")return[];const s=JSON.parse(o),i=[];if(s.mcpServers)for(const[a,l]of Object.entries(s.mcpServers))i.push({source:t,config:bot(a,l,t)});return i}catch(r){return console.warn(`[mcpDiscovery] Failed to read ${e}:`,r),[]}}async function yot(e){const t=`${e}/.mcp.json`;return cie(t,"project")}async function vot(){var n,r;let e="";if(typeof process<"u"&&PA&&(e=PA.HOME||PA.USERPROFILE||""),!e)try{if((r=(n=window.electronAPI)==null?void 0:n.files)!=null&&r.getCwd){const o=await window.electronAPI.files.getCwd(),s=o==null?void 0:o.match(/^(\/Users\/[^/]+|\/home\/[^/]+|C:\\Users\\[^\\]+)/);s&&(e=s[1])}}catch{return[]}if(!e)return[];const t=`${e}/.claude/mcp.json`;return cie(t,"global")}async function xot(e){const t=[],n=await vot();if(t.push(...n),e){const r=await yot(e);t.push(...r)}return t}function wot(e,t){const n=new Map;for(const r of t)n.set(r.config.name,r.config);for(const r of e)n.set(r.name,r);return Array.from(n.values())}function bH(){var e,t,n,r;return!!((t=(e=window.electronAPI)==null?void 0:e.files)!=null&&t.exists&&((r=(n=window.electronAPI)==null?void 0:n.files)!=null&&r.readFile))}const d_=e=>({config:e,status:"disconnected",tools:[],resources:[],prompts:[]});function Eot(e={}){const{initialServers:t=[],autoConnect:n=!1,autoDiscover:r=!1,projectPath:o,onEvent:s,onError:i,onServersDiscovered:a}=e,[l,c]=x.useState(()=>{const z={};for(const Z of t)z[Z.id]=d_(Z);return z}),u=x.useRef(!1),[f,m]=x.useState(!1),g=x.useRef(null);x.useEffect(()=>{var z;m(!!((z=window.electronAPI)!=null&&z.mcp))},[]),x.useEffect(()=>{var Z;if(!((Z=window.electronAPI)!=null&&Z.mcp))return;const z=window.electronAPI.mcp.onEvent(X=>{c(J=>{const ee=J[X.serverId];if(!ee)return J;switch(X.type){case"connecting":return{...J,[X.serverId]:{...ee,status:"connecting"}};case"connected":return{...J,[X.serverId]:{...ee,status:"connected",error:void 0,lastConnected:X.timestamp}};case"disconnected":return{...J,[X.serverId]:{...ee,status:"disconnected",tools:[],resources:[],prompts:[]}};case"error":return{...J,[X.serverId]:{...ee,status:"error",error:String(X.data)}};case"tools-changed":return{...J,[X.serverId]:{...ee,tools:X.data}};case"resources-changed":return{...J,[X.serverId]:{...ee,resources:X.data}};case"prompts-changed":return{...J,[X.serverId]:{...ee,prompts:X.data}};default:return J}}),s==null||s(X)});return g.current=z,()=>{z(),g.current=null}},[s]),x.useEffect(()=>{if(!(!n||!f))for(const z of t)z.enabled&&w(z).catch(Z=>{i==null||i(Z instanceof Error?Z:new Error(String(Z)),z.id)})},[f]);const y=x.useCallback(async()=>{if(!(!r||!bH()))try{const z=await xot(o);if(z.length>0){a==null||a(z);const Z=wot(t,z);if(c(X=>{const J={...X};for(const ee of Z)J[ee.id]||(J[ee.id]=d_(ee));return J}),n)for(const X of Z)X.autoConnect&&X.enabled&&w(X).catch(ee=>{i==null||i(ee instanceof Error?ee:new Error(String(ee)),X.id)})}}catch(z){console.warn("[useMCP] Auto-discovery failed:",z)}},[r,o,t,n,a,i]);x.useEffect(()=>{!r||!f||u.current||(u.current=!0,y())},[r,f,o,y]);const v=x.useCallback(async()=>{u.current=!1,await y()},[y]),w=x.useCallback(async z=>{var Z;if(!((Z=window.electronAPI)!=null&&Z.mcp))return i==null||i(new Error("MCP is only available in Electron environment"),z.id),!1;c(X=>({...X,[z.id]:{...X[z.id]||d_(z),config:z,status:"connecting",error:void 0}}));try{const X=await window.electronAPI.mcp.connect(z);if(!X.success)return c(ie=>({...ie,[z.id]:{...ie[z.id],status:"error",error:X.error||"Connection failed"}})),i==null||i(new Error(X.error||"Connection failed"),z.id),!1;const J=await window.electronAPI.mcp.listTools(z.id),ee=await window.electronAPI.mcp.listResources(z.id),re=await window.electronAPI.mcp.listPrompts(z.id);return c(ie=>({...ie,[z.id]:{...ie[z.id],status:"connected",capabilities:X.capabilities,tools:J.tools||[],resources:ee.resources||[],prompts:re.prompts||[],lastConnected:Date.now()}})),!0}catch(X){const J=X instanceof Error?X:new Error(String(X));return c(ee=>({...ee,[z.id]:{...ee[z.id],status:"error",error:J.message}})),i==null||i(J,z.id),!1}},[i]),_=x.useCallback(async z=>{var Z;if((Z=window.electronAPI)!=null&&Z.mcp)try{await window.electronAPI.mcp.disconnect(z),c(X=>({...X,[z]:{...X[z],status:"disconnected",tools:[],resources:[],prompts:[]}}))}catch(X){const J=X instanceof Error?X:new Error(String(X));i==null||i(J,z)}},[i]),T=x.useCallback(z=>{c(Z=>({...Z,[z.id]:d_(z)}))},[]),k=x.useCallback(async z=>{const Z=l[z];((Z==null?void 0:Z.status)==="connected"||(Z==null?void 0:Z.status)==="connecting")&&await _(z),c(X=>{const{[z]:J,...ee}=X;return ee})},[l,_]),M=x.useCallback((z,Z)=>{c(X=>{const J=X[z];return J?{...X,[z]:{...J,config:{...J.config,...Z}}}:X})},[]),D=x.useCallback(async(z,Z,X)=>{var ee;if(!((ee=window.electronAPI)!=null&&ee.mcp))return{success:!1,error:"MCP is only available in Electron environment"};const J=l[z];if(!J||J.status!=="connected")return{success:!1,error:"Server not connected"};try{return await window.electronAPI.mcp.callTool({serverId:z,toolName:Z,arguments:X})}catch(re){const ie=re instanceof Error?re:new Error(String(re));return i==null||i(ie,z),{success:!1,error:ie.message}}},[l,i]),I=x.useCallback(async z=>{var X;if(!((X=window.electronAPI)!=null&&X.mcp))return[];const Z=l[z];if(!Z||Z.status!=="connected")return[];try{const ee=(await window.electronAPI.mcp.listTools(z)).tools||[];return c(re=>({...re,[z]:{...re[z],tools:ee}})),ee}catch(J){const ee=J instanceof Error?J:new Error(String(J));return i==null||i(ee,z),[]}},[l,i]),P=x.useCallback(async(z,Z=10)=>{var X,J;if(!((J=(X=window.electronAPI)==null?void 0:X.mcp)!=null&&J.scoreToolRelevance))return console.warn("[useMCP] Smart MCP features not available"),[];try{const ee=Object.entries(l).flatMap(([K,te])=>te.status==="connected"?te.tools.map(se=>({...se,serverId:K})):[]),re=ee.filter(K=>{var te;return K.serverId===((te=ee[0])==null?void 0:te.serverId)});return(await window.electronAPI.mcp.scoreToolRelevance(re,z)).sort((K,te)=>te.relevanceScore-K.relevanceScore).slice(0,Z)}catch(ee){return console.error("[useMCP] Failed to get relevant tools:",ee),[]}},[l]),B=x.useCallback(async(z,Z,X,J)=>{var ee,re;if((re=(ee=window.electronAPI)==null?void 0:ee.mcp)!=null&&re.trackToolUsage)try{await window.electronAPI.mcp.trackToolUsage(z,Z,X,J)}catch(ie){console.error("[useMCP] Failed to track tool usage:",ie)}},[]),U=x.useCallback(async(z,Z)=>{var X,J;if(!((J=(X=window.electronAPI)==null?void 0:X.mcp)!=null&&J.getToolUsageStats))return null;try{return await window.electronAPI.mcp.getToolUsageStats(z,Z)}catch(ee){return console.error("[useMCP] Failed to get tool usage stats:",ee),null}},[]),j=x.useCallback(async z=>{var Z,X;if(!((X=(Z=window.electronAPI)==null?void 0:Z.mcp)!=null&&X.getIndexHealth))return{ready:!1,indexing:!1,totalChunks:0,totalFiles:0,healthPercentage:0};try{return await window.electronAPI.mcp.getIndexHealth(z)}catch(J){return console.error("[useMCP] Failed to get index health:",J),{ready:!1,indexing:!1,totalChunks:0,totalFiles:0,healthPercentage:0}}},[]),H=Object.entries(l).flatMap(([z,Z])=>Z.status==="connected"?Z.tools.map(X=>({...X,serverId:z})):[]),q=Object.values(l).some(z=>z.status==="connecting");return{servers:l,allTools:H,connect:w,disconnect:_,addServer:T,removeServer:k,updateServer:M,callTool:D,refreshTools:I,rediscover:v,getRelevantTools:P,trackToolUsage:B,getToolUsageStats:U,getIndexHealth:j,isConnecting:q,isAvailable:f,isDiscoveryAvailable:bH()}}function _ot(e={}){const{onSelectionResult:t,onTextChunk:n,onReady:r,onError:o,autoInit:s=!1,cwd:i}=e,[a,l]=x.useState(!1),[c,u]=x.useState(!1),[f,m]=x.useState(!1),[g,y]=x.useState(!1),[v,w]=x.useState(null),[_,T]=x.useState(null),[k,M]=x.useState(null),D=x.useRef({onSelectionResult:t,onTextChunk:n,onReady:r,onError:o});D.current={onSelectionResult:t,onTextChunk:n,onReady:r,onError:o};const I=x.useRef(!1);x.useEffect(()=>{var K,te;const Z=!!((K=window.electronAPI)!=null&&K.selectorAgent);if(l(Z),!Z||!((te=window.electronAPI)!=null&&te.selectorAgent))return;const X=window.electronAPI.selectorAgent,J=X.onTextChunk(se=>{var Q,Te;(Te=(Q=D.current).onTextChunk)==null||Te.call(Q,se)}),ee=X.onSelectionResult(se=>{var Q,Te;m(!1),T(se),(Te=(Q=D.current).onSelectionResult)==null||Te.call(Q,se)}),re=X.onReady(()=>{var se,Q;I.current=!1,u(!0),w(null),(Q=(se=D.current).onReady)==null||Q.call(se)}),ie=X.onError(se=>{var Q,Te;I.current=!1,m(!1),w(se),(Te=(Q=D.current).onError)==null||Te.call(Q,se)});return X.isActive().then(se=>{u(se.active),se.active&&X.getContextState().then(M)}),()=>{J(),ee(),re(),ie()}},[]),x.useEffect(()=>{s&&a&&!c&&P({cwd:i})},[s,a,c,i]);const P=x.useCallback(async Z=>{var X;if(!((X=window.electronAPI)!=null&&X.selectorAgent))return w("Selector agent is only available in the desktop app"),!1;if(I.current||c)return!0;I.current=!0,w(null);try{const J=await window.electronAPI.selectorAgent.init({cwd:(Z==null?void 0:Z.cwd)||i});return J.success?!0:(w(J.error||"Failed to initialize selector agent"),I.current=!1,!1)}catch(J){const ee=J instanceof Error?J.message:"Unknown error";return w(ee),I.current=!1,!1}},[i,c]),B=x.useCallback(async Z=>{var X;if(!((X=window.electronAPI)!=null&&X.selectorAgent))return w("Selector agent is only available in the desktop app"),!1;w(null);try{const J=await window.electronAPI.selectorAgent.prime(Z);if(!J.success)return w(J.error||"Failed to prime context"),!1;y(!0);const ee=await window.electronAPI.selectorAgent.getContextState();return M(ee),!0}catch(J){const ee=J instanceof Error?J.message:"Unknown error";return w(ee),!1}},[]),U=x.useCallback(async(Z,X)=>{var J;if(!((J=window.electronAPI)!=null&&J.selectorAgent))return w("Selector agent is only available in the desktop app"),!1;w(null),m(!0);try{const ee=await window.electronAPI.selectorAgent.select(Z,X);return ee.success?!0:(m(!1),w(ee.error||"Failed to request selection"),!1)}catch(ee){m(!1);const re=ee instanceof Error?ee.message:"Unknown error";return w(re),!1}},[]),j=x.useCallback(async Z=>{var X;if(!((X=window.electronAPI)!=null&&X.selectorAgent))return w("Selector agent is only available in the desktop app"),!1;w(null),m(!0);try{const J=await window.electronAPI.selectorAgent.send(Z);return J.success?!0:(m(!1),w(J.error||"Failed to send message"),!1)}catch(J){m(!1);const ee=J instanceof Error?J.message:"Unknown error";return w(ee),!1}},[]),H=x.useCallback(async()=>{var Z;if(!((Z=window.electronAPI)!=null&&Z.selectorAgent))return!1;try{const X=await window.electronAPI.selectorAgent.interrupt();return X.success&&m(!1),X.success}catch(X){return fo.general.error("Failed to interrupt selector agent:",X),!1}},[]),q=x.useCallback(async()=>{var Z;if(!((Z=window.electronAPI)!=null&&Z.selectorAgent))return!1;try{const X=await window.electronAPI.selectorAgent.reset();return X.success&&(u(!1),m(!1),y(!1),T(null),M(null),w(null)),X.success}catch(X){return fo.general.error("Failed to reset selector agent:",X),!1}},[]),z=x.useCallback(async()=>{var Z;if((Z=window.electronAPI)!=null&&Z.selectorAgent)try{const X=await window.electronAPI.selectorAgent.getContextState();M(X),y(X.isPrimed)}catch(X){fo.general.error("Failed to refresh context state:",X)}},[]);return{isAvailable:a,isActive:c,isWaiting:f,isPrimed:g,error:v,latestResult:_,contextState:k,initialize:P,primeContext:B,selectElement:U,sendMessage:j,interrupt:H,reset:q,refreshContextState:z}}function Sot(){const[e,t]=x.useState(new Map),n=x.useRef({}),r=x.useCallback(l=>{const c={id:l.id,name:l.name,args:l.args,status:"running",startTime:Date.now()};t(f=>new Map(f).set(l.id,c));const u=setTimeout(()=>{t(f=>{const m=new Map(f),g=m.get(c.id);if(g&&g.status==="running"){const y=Date.now();g.status="error",g.error="Tool execution timeout (30s)",g.endTime=y,g.duration=y-g.startTime}return m}),delete n.current[l.id]},3e4);n.current[l.id]=u},[]),o=x.useCallback((l,c)=>{n.current[l]&&(clearTimeout(n.current[l]),delete n.current[l]),t(u=>{const f=new Map(u),m=f.get(l);if(m){const g=Date.now();m.status="success",m.result=c,m.endTime=g,m.duration=g-m.startTime}return f})},[]),s=x.useCallback((l,c)=>{n.current[l]&&(clearTimeout(n.current[l]),delete n.current[l]),t(u=>{const f=new Map(u),m=f.get(l);if(m){const g=Date.now();m.status="error",m.error=c,m.endTime=g,m.duration=g-m.startTime}return f})},[]),i=x.useCallback(()=>{Object.values(n.current).forEach(l=>clearTimeout(l)),n.current={},t(new Map)},[]);return{toolCalls:x.useCallback(()=>Array.from(e.values()),[e])(),trackStart:r,trackSuccess:o,trackError:s,clear:i,_internal:{toolCalls:e}}}const LA={"connect-button":{selector:'[data-control-id="connect-button"]',description:"Start voice streaming with AI",action:"click"},"disconnect-button":{selector:'[data-control-id="disconnect-button"]',description:"Stop voice streaming",action:"click"},"video-button":{selector:'[data-control-id="video-button"]',description:"Toggle video/camera feed",action:"click"},"screen-button":{selector:'[data-control-id="screen-button"]',description:"Toggle screen sharing",action:"click"},"inspector-button":{selector:'[data-control-id="inspector-button"]',description:"Toggle element inspector mode - select elements on page",action:"click"},"move-button":{selector:'[data-control-id="move-button"]',description:"Toggle move/resize mode for elements",action:"click"},"devtools-button":{selector:'[data-control-id="devtools-button"]',description:"Open browser DevTools for the webview",action:"click"},"agent-button":{selector:'[data-control-id="agent-button"]',description:"Toggle the Cluso Agent demo panel",action:"click"},"voice-button":{selector:'[data-control-id="voice-button"]',description:"Start/stop voice session with Gemini - small mic icon in chat area",action:"click"},"chat-input":{selector:'[data-control-id="chat-input"]',description:"Main chat input field - type messages here",action:"focus"},"send-button":{selector:'[data-control-id="send-button"]',description:"Send chat message to AI",action:"click"},"url-bar":{selector:'[data-control-id="url-bar"]',description:"URL input for navigation",action:"focus"},"go-button":{selector:'[data-action="navigate"]',description:"Navigate to URL",action:"click"},"approve-button":{selector:'[data-action="approve"]',description:"Approve pending change",action:"click"},"reject-button":{selector:'[data-action="reject"]',description:"Reject pending change",action:"click"}},uie=`
# Cluso - AI-Powered Development Assistant

## Core Capabilities

### Voice Control (Connect Button)
- Real-time voice interaction with AI
- Speak naturally to request UI changes
- AI responds with voice and actions
- Press connect button to start/stop

### Element Inspector (Inspector Button)
- Click inspector button to enter selection mode
- Hover over any element on the page
- Click to select an element
- Selected element info sent to AI for context
- AI can make changes to selected elements

### Screenshot Tool (Screenshot Button)
- Click screenshot button to enter capture mode
- Draw rectangle to capture area
- Screenshot sent to AI for analysis
- AI can describe or edit what it sees

### Live Preview (Browser Tab)
- View your app/website in real-time
- Enter URL in the URL bar
- Changes reflect instantly
- Inspector works on this view

### Code Editing
- AI can edit source files directly
- Changes go through approval workflow
- Approve or reject each change
- Undo capability available

### Model Selection
- Choose between different AI models
- Gemini models for voice/live
- Claude/GPT for text chat
- Each has different strengths

## Workflows

### Making a UI Change via Voice:
1. Click Connect to start voice
2. Click Inspector to select element
3. Click element you want to change
4. Speak your change request
5. AI makes instant preview
6. Approve or reject the change

### Making a UI Change via Chat:
1. Click Inspector to select element
2. Click element you want to change
3. Type your request in chat
4. AI makes instant preview
5. Approve or reject the change

### Demo Mode:
- AI can control the entire interface
- Highlight buttons before clicking
- Show tooltips explaining actions
- Perform guided walkthroughs
`;function Tot(){const[e,t]=x.useState({highlightedElements:[],activeTooltip:null,isDemoMode:!1,demoStep:0}),n=x.useRef(new Map),r=x.useRef(null),o=x.useCallback(v=>{const w=LA[v],_=(w==null?void 0:w.selector)||v;return document.querySelector(_)},[]),s=v=>({blue:"#3b82f6",green:"#22c55e",red:"#ef4444",orange:"#f97316",purple:"#a855f7",yellow:"#eab308",pink:"#ec4899",cyan:"#06b6d4"})[v.toLowerCase()]||(v.startsWith("#")?v:"#3b82f6"),i=x.useCallback((v,w={})=>{const{color:_="#3b82f6",duration:T=3e3,pulse:k=!0,label:M}=w,D=s(_),I=o(v);if(!I)return console.warn(`[AppControl] Element not found: ${v}`),!1;const P=I.style.outline,B=I.style.boxShadow,U=I.style.position,j=I.style.zIndex;I.style.outline=`3px solid ${D}`,I.style.boxShadow=k?`0 0 0 0 ${D}40, 0 0 20px ${D}60`:`0 0 20px ${D}60`,I.style.position="relative",I.style.zIndex="10000",k&&I.animate([{boxShadow:`0 0 0 0 ${D}40, 0 0 20px ${D}60`},{boxShadow:`0 0 0 15px ${D}00, 0 0 20px ${D}60`}],{duration:1e3,iterations:Math.ceil(T/1e3)});let H=null;M&&(H=document.createElement("div"),H.textContent=M,H.style.cssText=`
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translateX(-50%);
        background: ${D};
        color: white;
        padding: 4px 12px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 600;
        white-space: nowrap;
        z-index: 10001;
        pointer-events: none;
      `,I.appendChild(H)),t(Z=>({...Z,highlightedElements:[...Z.highlightedElements,v]}));const q=n.current.get(v);q&&clearTimeout(q);const z=setTimeout(()=>{I.style.outline=P,I.style.boxShadow=B,I.style.position=U,I.style.zIndex=j,H&&H.remove(),t(Z=>({...Z,highlightedElements:Z.highlightedElements.filter(X=>X!==v)})),n.current.delete(v)},T);return n.current.set(v,z),!0},[o]),a=x.useCallback((v,w)=>{const{message:_,position:T="top",duration:k=4e3}=w,M=o(v);if(!M)return console.warn(`[AppControl] Element not found for tooltip: ${v}`),!1;const D=document.getElementById("app-control-tooltip");D&&D.remove(),r.current&&clearTimeout(r.current);const I=document.createElement("div");I.id="app-control-tooltip",I.textContent=_;const P=M.getBoundingClientRect();let B=0,U=0;switch(T){case"top":B=P.top-40,U=P.left+P.width/2;break;case"bottom":B=P.bottom+10,U=P.left+P.width/2;break;case"left":B=P.top+P.height/2,U=P.left-10;break;case"right":B=P.top+P.height/2,U=P.right+10;break}return I.style.cssText=`
      position: fixed;
      top: ${B}px;
      left: ${U}px;
      transform: ${T==="top"||T==="bottom"?"translateX(-50%)":"translateY(-50%)"};
      background: #1f2937;
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 14px;
      max-width: 300px;
      z-index: 100002;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      animation: fadeIn 0.2s ease-out;
      pointer-events: none;
    `,document.body.appendChild(I),t(j=>({...j,activeTooltip:{element:v,message:_}})),r.current=setTimeout(()=>{I.remove(),t(j=>({...j,activeTooltip:null}))},k),!0},[o]),l=x.useCallback(v=>{const w=o(v);return w?(w.click(),!0):(console.warn(`[AppControl] Element not found for click: ${v}`),!1)},[o]),c=x.useCallback(v=>{const w=o(v);return w?(w.focus(),!0):(console.warn(`[AppControl] Element not found for focus: ${v}`),!1)},[o]),u=x.useCallback((v,w,_=50)=>{const T=o(v);return T?(T.focus(),new Promise(k=>{let M=0;const D=setInterval(()=>{M<w.length?(T.value+=w[M],T.dispatchEvent(new Event("input",{bubbles:!0})),M++):(clearInterval(D),k(!0))},_)})):(console.warn(`[AppControl] Element not found for typing: ${v}`),Promise.resolve(!1))},[o]),f=x.useCallback(v=>new Promise(w=>setTimeout(w,v)),[]),m=x.useCallback(async v=>{t(w=>({...w,isDemoMode:!0,demoStep:0}));for(let w=0;w<v.length;w++){const _=v[w];switch(t(T=>({...T,demoStep:w+1})),_.type){case"highlight":_.target&&i(_.target,_.options);break;case"tooltip":_.target&&a(_.target,{message:_.text||"",..._.options});break;case"click":_.target&&l(_.target);break;case"focus":_.target&&c(_.target);break;case"type":_.target&&_.text&&await u(_.target,_.text);break;case"wait":await f(_.duration||1e3);break;case"speak":if(_.text&&"speechSynthesis"in window){const T=new SpeechSynthesisUtterance(_.text);speechSynthesis.speak(T),await new Promise(k=>{T.onend=()=>k()})}break}_.type!=="wait"&&await f(300)}t(w=>({...w,isDemoMode:!1,demoStep:0}))},[i,a,l,c,u,f]),g=x.useCallback(()=>Object.entries(LA).map(([v,w])=>({name:v,...w,exists:!!o(v)})),[o]);return{state:e,highlightElement:i,showTooltip:a,clickElement:l,focusElement:c,typeText:u,wait:f,executeSequence:m,getAvailableElements:g,tools:{highlight_element:{name:"highlight_element",description:"Highlight a UI element in Cluso to draw attention to it",parameters:{type:"object",properties:{element:{type:"string",description:"Element name or selector to highlight"},color:{type:"string",description:"Highlight color (default: blue)"},duration:{type:"number",description:"Duration in ms (default: 3000)"},label:{type:"string",description:"Optional label to show above element"}},required:["element"]},execute:v=>i(v.element,{color:v.color,duration:v.duration,label:v.label,pulse:!0})},show_tooltip:{name:"show_tooltip",description:"Show a tooltip message near a UI element",parameters:{type:"object",properties:{element:{type:"string",description:"Element name or selector"},message:{type:"string",description:"Tooltip message to display"},position:{type:"string",enum:["top","bottom","left","right"]}},required:["element","message"]},execute:v=>a(v.element,{message:v.message,position:v.position})},click_ui_element:{name:"click_ui_element",description:"Click a button or interactive element in Cluso",parameters:{type:"object",properties:{element:{type:"string",description:"Element name or selector to click"}},required:["element"]},execute:v=>l(v.element)},type_in_field:{name:"type_in_field",description:"Type text into an input field with typewriter effect",parameters:{type:"object",properties:{element:{type:"string",description:"Input element name or selector"},text:{type:"string",description:"Text to type"}},required:["element","text"]},execute:async v=>await u(v.element,v.text)},speak:{name:"speak",description:"Speak a message using text-to-speech",parameters:{type:"object",properties:{message:{type:"string",description:"Message to speak"}},required:["message"]},execute:v=>{if("speechSynthesis"in window){const w=new SpeechSynthesisUtterance(v.message);return speechSynthesis.speak(w),!0}return!1}},get_ui_elements:{name:"get_ui_elements",description:"Get list of all controllable UI elements in Cluso",parameters:{type:"object",properties:{}},execute:()=>g()},run_demo_sequence:{name:"run_demo_sequence",description:"Run a sequence of UI actions for a demo",parameters:{type:"object",properties:{actions:{type:"array",items:{type:"object",properties:{type:{type:"string",enum:["highlight","tooltip","click","focus","type","wait","speak"]},target:{type:"string"},text:{type:"string"},duration:{type:"number"}}}}},required:["actions"]},execute:async v=>(await m(v.actions),!0)}},knowledge:uie,elementRegistry:LA}}const Cot="http://127.0.0.1:1234/v1/chat/completions",yH=["qwen2.5-0.5b-instruct-mlx","qwen2.5-0.5b-instruct-mlx:2","qwen2.5-0.5b-instruct-mlx:3","qwen2.5-0.5b-instruct-mlx:4"];let $A=0;function kot(){const e=yH[$A];return $A=($A+1)%yH.length,e}const Aot=[{type:"function",function:{name:"highlight_element",description:"Highlight a UI element to draw user attention. Use for guiding users or demos.",parameters:{type:"object",properties:{element:{type:"string",description:"Element ID: connect-button, video-button, screen-button, inspector-button, move-button, devtools-button, chat-input, send-button, url-bar, disconnect-button"},color:{type:"string",description:"Highlight color (default: blue). Options: blue, green, red, orange, purple"},label:{type:"string",description:"Optional label to show above the element"},duration:{type:"number",description:"Duration in ms (default: 3000)"}},required:["element"]}}},{type:"function",function:{name:"click_element",description:"Click a UI element button",parameters:{type:"object",properties:{element:{type:"string",description:"Element ID to click"}},required:["element"]}}},{type:"function",function:{name:"show_tooltip",description:"Show an informational tooltip near a UI element",parameters:{type:"object",properties:{element:{type:"string",description:"Element ID"},message:{type:"string",description:"Tooltip message"},position:{type:"string",enum:["top","bottom","left","right"],description:"Tooltip position"}},required:["element","message"]}}},{type:"function",function:{name:"type_text",description:"Type text into an input field with typewriter effect",parameters:{type:"object",properties:{element:{type:"string",description:"Input element ID (chat-input or url-bar)"},text:{type:"string",description:"Text to type"}},required:["element","text"]}}},{type:"function",function:{name:"speak",description:"Speak a message using text-to-speech for narration",parameters:{type:"object",properties:{message:{type:"string",description:"Message to speak aloud"}},required:["message"]}}},{type:"function",function:{name:"wait",description:"Pause for a duration before next action",parameters:{type:"object",properties:{duration:{type:"number",description:"Duration in milliseconds"}},required:["duration"]}}}],vH=`You are Cluso Agent - an AI assistant that controls the Cluso application UI.

${uie}

## Available UI Elements
You can interact with these elements using their IDs:
- connect-button: Start voice streaming with AI
- disconnect-button: Stop voice streaming
- video-button: Toggle camera feed
- screen-button: Toggle screen sharing
- inspector-button: Toggle element inspector mode
- move-button: Toggle move/resize mode
- devtools-button: Open browser DevTools
- chat-input: Main chat text input
- send-button: Send chat message
- url-bar: URL navigation input

## Your Role
1. Guide users through features when asked
2. Demonstrate capabilities with highlight + tooltip + speak
3. Execute demo sequences for presentations
4. Answer questions about how to use features
5. Control the UI to help users accomplish tasks

## Important Rules
- ALWAYS use tools to interact with UI - don't just describe
- Highlight before clicking to show users what will happen
- Use speak() to narrate what you're doing
- Use wait() between actions so users can follow
- Be concise and helpful

When showing how to do something:
1. speak() what you're about to demonstrate
2. highlight_element() the relevant button with a label
3. wait() a moment
4. click_element() if appropriate
5. Repeat for multi-step workflows`;class Not{constructor(t){this.messages=[],this.isProcessing=!1,this.callbacks=t,this.messages=[{role:"system",content:vH}]}async chat(t){if(this.isProcessing)return"Already processing a request...";this.isProcessing=!0,this.messages.push({role:"user",content:t});try{let n=await this.callModel(),r=0;const o=10;for(;n.tool_calls&&n.tool_calls.length>0&&r<o;){r++;const s=await Promise.all(n.tool_calls.map(async i=>{const a=JSON.parse(i.function.arguments),l=await this.executeTool(i.function.name,a);return{toolCall:i,result:l}}));for(const{toolCall:i,result:a}of s)this.messages.push({role:"tool",content:JSON.stringify(a),tool_call_id:i.id});n=await this.callModel()}return n.content&&this.messages.push({role:"assistant",content:n.content}),n.content||"Done!"}catch(n){return console.error("[ClusoAgent] Error:",n),`Error: ${n instanceof Error?n.message:"Unknown error"}`}finally{this.isProcessing=!1}}async callModel(){var o,s;const t=await fetch(Cot,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:kot(),messages:this.messages,tools:Aot,temperature:.3,max_tokens:500})});if(!t.ok)throw new Error(`Model API error: ${t.status}`);const r=(o=(await t.json()).choices[0])==null?void 0:o.message;if(!r)throw new Error("No message in response");return(s=r.tool_calls)!=null&&s.length&&this.messages.push({role:"assistant",content:r.content||"",tool_calls:r.tool_calls}),{content:r.content||"",tool_calls:r.tool_calls}}async executeTool(t,n){console.log(`[ClusoAgent] Executing tool: ${t}`,n);try{switch(t){case"highlight_element":return this.callbacks.onHighlight(n.element,{color:n.color,label:n.label,duration:n.duration}),{success:!0,message:`Highlighted ${n.element}`};case"click_element":return this.callbacks.onClick(n.element),{success:!0,message:`Clicked ${n.element}`};case"show_tooltip":return this.callbacks.onTooltip(n.element,n.message,n.position),{success:!0,message:`Showed tooltip on ${n.element}`};case"type_text":return await this.callbacks.onType(n.element,n.text),{success:!0,message:`Typed in ${n.element}`};case"speak":return this.callbacks.onSpeak(n.message),{success:!0,message:"Speaking"};case"wait":return await this.callbacks.onWait(n.duration),{success:!0,message:`Waited ${n.duration}ms`};default:return{success:!1,message:`Unknown tool: ${t}`}}}catch(r){return{success:!1,message:r instanceof Error?r.message:"Tool execution failed"}}}reset(){this.messages=[{role:"system",content:vH}]}}let xH=null;function Iot(e){return xH=new Not(e),xH}var FA={},sv={},wH;function Rot(){if(wH)return sv;wH=1,sv.byteLength=a,sv.toByteArray=c,sv.fromByteArray=m;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=r.length;o<s;++o)e[o]=r[o],t[r.charCodeAt(o)]=o;t[45]=62,t[95]=63;function i(g){var y=g.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=y);var w=v===y?0:4-v%4;return[v,w]}function a(g){var y=i(g),v=y[0],w=y[1];return(v+w)*3/4-w}function l(g,y,v){return(y+v)*3/4-v}function c(g){var y,v=i(g),w=v[0],_=v[1],T=new n(l(g,w,_)),k=0,M=_>0?w-4:w,D;for(D=0;D<M;D+=4)y=t[g.charCodeAt(D)]<<18|t[g.charCodeAt(D+1)]<<12|t[g.charCodeAt(D+2)]<<6|t[g.charCodeAt(D+3)],T[k++]=y>>16&255,T[k++]=y>>8&255,T[k++]=y&255;return _===2&&(y=t[g.charCodeAt(D)]<<2|t[g.charCodeAt(D+1)]>>4,T[k++]=y&255),_===1&&(y=t[g.charCodeAt(D)]<<10|t[g.charCodeAt(D+1)]<<4|t[g.charCodeAt(D+2)]>>2,T[k++]=y>>8&255,T[k++]=y&255),T}function u(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}function f(g,y,v){for(var w,_=[],T=y;T<v;T+=3)w=(g[T]<<16&16711680)+(g[T+1]<<8&65280)+(g[T+2]&255),_.push(u(w));return _.join("")}function m(g){for(var y,v=g.length,w=v%3,_=[],T=16383,k=0,M=v-w;k<M;k+=T)_.push(f(g,k,k+T>M?M:k+T));return w===1?(y=g[v-1],_.push(e[y>>2]+e[y<<4&63]+"==")):w===2&&(y=(g[v-2]<<8)+g[v-1],_.push(e[y>>10]+e[y>>4&63]+e[y<<2&63]+"=")),_.join("")}return sv}var f_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var EH;function Mot(){return EH||(EH=1,f_.read=function(e,t,n,r,o){var s,i,a=o*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,f=n?o-1:0,m=n?-1:1,g=e[t+f];for(f+=m,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+e[t+f],f+=m,u-=8);for(i=s&(1<<-u)-1,s>>=-u,u+=r;u>0;i=i*256+e[t+f],f+=m,u-=8);if(s===0)s=1-c;else{if(s===l)return i?NaN:(g?-1:1)*(1/0);i=i+Math.pow(2,r),s=s-c}return(g?-1:1)*i*Math.pow(2,s-r)},f_.write=function(e,t,n,r,o,s){var i,a,l,c=s*8-o-1,u=(1<<c)-1,f=u>>1,m=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,y=r?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+f>=1?t+=m/l:t+=m*Math.pow(2,1-f),t*l>=2&&(i++,l/=2),i+f>=u?(a=0,i=u):i+f>=1?(a=(t*l-1)*Math.pow(2,o),i=i+f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),i=0));o>=8;e[n+g]=a&255,g+=y,a/=256,o-=8);for(i=i<<o|a,c+=o;c>0;e[n+g]=i&255,g+=y,i/=256,c-=8);e[n+g-y]|=v*128}),f_}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var _H;function Dot(){return _H||(_H=1,(function(e){const t=Rot(),n=Mot(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const W=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(W,L),W.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function i(W){if(W>o)throw new RangeError('The value "'+W+'" is invalid for option "size"');const L=new Uint8Array(W);return Object.setPrototypeOf(L,a.prototype),L}function a(W,L,F){if(typeof W=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(W)}return l(W,L,F)}a.poolSize=8192;function l(W,L,F){if(typeof W=="string")return m(W,L);if(ArrayBuffer.isView(W))return y(W);if(W==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W);if($e(W,ArrayBuffer)||W&&$e(W.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($e(W,SharedArrayBuffer)||W&&$e(W.buffer,SharedArrayBuffer)))return v(W,L,F);if(typeof W=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ce=W.valueOf&&W.valueOf();if(ce!=null&&ce!==W)return a.from(ce,L,F);const we=w(W);if(we)return we;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof W[Symbol.toPrimitive]=="function")return a.from(W[Symbol.toPrimitive]("string"),L,F);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W)}a.from=function(W,L,F){return l(W,L,F)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(W){if(typeof W!="number")throw new TypeError('"size" argument must be of type number');if(W<0)throw new RangeError('The value "'+W+'" is invalid for option "size"')}function u(W,L,F){return c(W),W<=0?i(W):L!==void 0?typeof F=="string"?i(W).fill(L,F):i(W).fill(L):i(W)}a.alloc=function(W,L,F){return u(W,L,F)};function f(W){return c(W),i(W<0?0:_(W)|0)}a.allocUnsafe=function(W){return f(W)},a.allocUnsafeSlow=function(W){return f(W)};function m(W,L){if((typeof L!="string"||L==="")&&(L="utf8"),!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const F=k(W,L)|0;let ce=i(F);const we=ce.write(W,L);return we!==F&&(ce=ce.slice(0,we)),ce}function g(W){const L=W.length<0?0:_(W.length)|0,F=i(L);for(let ce=0;ce<L;ce+=1)F[ce]=W[ce]&255;return F}function y(W){if($e(W,Uint8Array)){const L=new Uint8Array(W);return v(L.buffer,L.byteOffset,L.byteLength)}return g(W)}function v(W,L,F){if(L<0||W.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(W.byteLength<L+(F||0))throw new RangeError('"length" is outside of buffer bounds');let ce;return L===void 0&&F===void 0?ce=new Uint8Array(W):F===void 0?ce=new Uint8Array(W,L):ce=new Uint8Array(W,L,F),Object.setPrototypeOf(ce,a.prototype),ce}function w(W){if(a.isBuffer(W)){const L=_(W.length)|0,F=i(L);return F.length===0||W.copy(F,0,0,L),F}if(W.length!==void 0)return typeof W.length!="number"||Je(W.length)?i(0):g(W);if(W.type==="Buffer"&&Array.isArray(W.data))return g(W.data)}function _(W){if(W>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return W|0}function T(W){return+W!=W&&(W=0),a.alloc(+W)}a.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==a.prototype},a.compare=function(L,F){if($e(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),$e(F,Uint8Array)&&(F=a.from(F,F.offset,F.byteLength)),!a.isBuffer(L)||!a.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===F)return 0;let ce=L.length,we=F.length;for(let ze=0,Be=Math.min(ce,we);ze<Be;++ze)if(L[ze]!==F[ze]){ce=L[ze],we=F[ze];break}return ce<we?-1:we<ce?1:0},a.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(L,F){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return a.alloc(0);let ce;if(F===void 0)for(F=0,ce=0;ce<L.length;++ce)F+=L[ce].length;const we=a.allocUnsafe(F);let ze=0;for(ce=0;ce<L.length;++ce){let Be=L[ce];if($e(Be,Uint8Array))ze+Be.length>we.length?(a.isBuffer(Be)||(Be=a.from(Be)),Be.copy(we,ze)):Uint8Array.prototype.set.call(we,Be,ze);else if(a.isBuffer(Be))Be.copy(we,ze);else throw new TypeError('"list" argument must be an Array of Buffers');ze+=Be.length}return we};function k(W,L){if(a.isBuffer(W))return W.length;if(ArrayBuffer.isView(W)||$e(W,ArrayBuffer))return W.byteLength;if(typeof W!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof W);const F=W.length,ce=arguments.length>2&&arguments[2]===!0;if(!ce&&F===0)return 0;let we=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":return Pt(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F*2;case"hex":return F>>>1;case"base64":return me(W).length;default:if(we)return ce?-1:Pt(W).length;L=(""+L).toLowerCase(),we=!0}}a.byteLength=k;function M(W,L,F){let ce=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((F===void 0||F>this.length)&&(F=this.length),F<=0)||(F>>>=0,L>>>=0,F<=L))return"";for(W||(W="utf8");;)switch(W){case"hex":return ie(this,L,F);case"utf8":case"utf-8":return Z(this,L,F);case"ascii":return ee(this,L,F);case"latin1":case"binary":return re(this,L,F);case"base64":return z(this,L,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,L,F);default:if(ce)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),ce=!0}}a.prototype._isBuffer=!0;function D(W,L,F){const ce=W[L];W[L]=W[F],W[F]=ce}a.prototype.swap16=function(){const L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let F=0;F<L;F+=2)D(this,F,F+1);return this},a.prototype.swap32=function(){const L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let F=0;F<L;F+=4)D(this,F,F+3),D(this,F+1,F+2);return this},a.prototype.swap64=function(){const L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let F=0;F<L;F+=8)D(this,F,F+7),D(this,F+1,F+6),D(this,F+2,F+5),D(this,F+3,F+4);return this},a.prototype.toString=function(){const L=this.length;return L===0?"":arguments.length===0?Z(this,0,L):M.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(L){if(!a.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:a.compare(this,L)===0},a.prototype.inspect=function(){let L="";const F=e.INSPECT_MAX_BYTES;return L=this.toString("hex",0,F).replace(/(.{2})/g,"$1 ").trim(),this.length>F&&(L+=" ... "),"<Buffer "+L+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(L,F,ce,we,ze){if($e(L,Uint8Array)&&(L=a.from(L,L.offset,L.byteLength)),!a.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(F===void 0&&(F=0),ce===void 0&&(ce=L?L.length:0),we===void 0&&(we=0),ze===void 0&&(ze=this.length),F<0||ce>L.length||we<0||ze>this.length)throw new RangeError("out of range index");if(we>=ze&&F>=ce)return 0;if(we>=ze)return-1;if(F>=ce)return 1;if(F>>>=0,ce>>>=0,we>>>=0,ze>>>=0,this===L)return 0;let Be=ze-we,ct=ce-F;const ln=Math.min(Be,ct),jt=this.slice(we,ze),fn=L.slice(F,ce);for(let an=0;an<ln;++an)if(jt[an]!==fn[an]){Be=jt[an],ct=fn[an];break}return Be<ct?-1:ct<Be?1:0};function I(W,L,F,ce,we){if(W.length===0)return-1;if(typeof F=="string"?(ce=F,F=0):F>2147483647?F=2147483647:F<-2147483648&&(F=-2147483648),F=+F,Je(F)&&(F=we?0:W.length-1),F<0&&(F=W.length+F),F>=W.length){if(we)return-1;F=W.length-1}else if(F<0)if(we)F=0;else return-1;if(typeof L=="string"&&(L=a.from(L,ce)),a.isBuffer(L))return L.length===0?-1:P(W,L,F,ce,we);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?we?Uint8Array.prototype.indexOf.call(W,L,F):Uint8Array.prototype.lastIndexOf.call(W,L,F):P(W,[L],F,ce,we);throw new TypeError("val must be string, number or Buffer")}function P(W,L,F,ce,we){let ze=1,Be=W.length,ct=L.length;if(ce!==void 0&&(ce=String(ce).toLowerCase(),ce==="ucs2"||ce==="ucs-2"||ce==="utf16le"||ce==="utf-16le")){if(W.length<2||L.length<2)return-1;ze=2,Be/=2,ct/=2,F/=2}function ln(fn,an){return ze===1?fn[an]:fn.readUInt16BE(an*ze)}let jt;if(we){let fn=-1;for(jt=F;jt<Be;jt++)if(ln(W,jt)===ln(L,fn===-1?0:jt-fn)){if(fn===-1&&(fn=jt),jt-fn+1===ct)return fn*ze}else fn!==-1&&(jt-=jt-fn),fn=-1}else for(F+ct>Be&&(F=Be-ct),jt=F;jt>=0;jt--){let fn=!0;for(let an=0;an<ct;an++)if(ln(W,jt+an)!==ln(L,an)){fn=!1;break}if(fn)return jt}return-1}a.prototype.includes=function(L,F,ce){return this.indexOf(L,F,ce)!==-1},a.prototype.indexOf=function(L,F,ce){return I(this,L,F,ce,!0)},a.prototype.lastIndexOf=function(L,F,ce){return I(this,L,F,ce,!1)};function B(W,L,F,ce){F=Number(F)||0;const we=W.length-F;ce?(ce=Number(ce),ce>we&&(ce=we)):ce=we;const ze=L.length;ce>ze/2&&(ce=ze/2);let Be;for(Be=0;Be<ce;++Be){const ct=parseInt(L.substr(Be*2,2),16);if(Je(ct))return Be;W[F+Be]=ct}return Be}function U(W,L,F,ce){return Ne(Pt(L,W.length-F),W,F,ce)}function j(W,L,F,ce){return Ne(tn(L),W,F,ce)}function H(W,L,F,ce){return Ne(me(L),W,F,ce)}function q(W,L,F,ce){return Ne(vt(L,W.length-F),W,F,ce)}a.prototype.write=function(L,F,ce,we){if(F===void 0)we="utf8",ce=this.length,F=0;else if(ce===void 0&&typeof F=="string")we=F,ce=this.length,F=0;else if(isFinite(F))F=F>>>0,isFinite(ce)?(ce=ce>>>0,we===void 0&&(we="utf8")):(we=ce,ce=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ze=this.length-F;if((ce===void 0||ce>ze)&&(ce=ze),L.length>0&&(ce<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");we||(we="utf8");let Be=!1;for(;;)switch(we){case"hex":return B(this,L,F,ce);case"utf8":case"utf-8":return U(this,L,F,ce);case"ascii":case"latin1":case"binary":return j(this,L,F,ce);case"base64":return H(this,L,F,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,L,F,ce);default:if(Be)throw new TypeError("Unknown encoding: "+we);we=(""+we).toLowerCase(),Be=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(W,L,F){return L===0&&F===W.length?t.fromByteArray(W):t.fromByteArray(W.slice(L,F))}function Z(W,L,F){F=Math.min(W.length,F);const ce=[];let we=L;for(;we<F;){const ze=W[we];let Be=null,ct=ze>239?4:ze>223?3:ze>191?2:1;if(we+ct<=F){let ln,jt,fn,an;switch(ct){case 1:ze<128&&(Be=ze);break;case 2:ln=W[we+1],(ln&192)===128&&(an=(ze&31)<<6|ln&63,an>127&&(Be=an));break;case 3:ln=W[we+1],jt=W[we+2],(ln&192)===128&&(jt&192)===128&&(an=(ze&15)<<12|(ln&63)<<6|jt&63,an>2047&&(an<55296||an>57343)&&(Be=an));break;case 4:ln=W[we+1],jt=W[we+2],fn=W[we+3],(ln&192)===128&&(jt&192)===128&&(fn&192)===128&&(an=(ze&15)<<18|(ln&63)<<12|(jt&63)<<6|fn&63,an>65535&&an<1114112&&(Be=an))}}Be===null?(Be=65533,ct=1):Be>65535&&(Be-=65536,ce.push(Be>>>10&1023|55296),Be=56320|Be&1023),ce.push(Be),we+=ct}return J(ce)}const X=4096;function J(W){const L=W.length;if(L<=X)return String.fromCharCode.apply(String,W);let F="",ce=0;for(;ce<L;)F+=String.fromCharCode.apply(String,W.slice(ce,ce+=X));return F}function ee(W,L,F){let ce="";F=Math.min(W.length,F);for(let we=L;we<F;++we)ce+=String.fromCharCode(W[we]&127);return ce}function re(W,L,F){let ce="";F=Math.min(W.length,F);for(let we=L;we<F;++we)ce+=String.fromCharCode(W[we]);return ce}function ie(W,L,F){const ce=W.length;(!L||L<0)&&(L=0),(!F||F<0||F>ce)&&(F=ce);let we="";for(let ze=L;ze<F;++ze)we+=Le[W[ze]];return we}function K(W,L,F){const ce=W.slice(L,F);let we="";for(let ze=0;ze<ce.length-1;ze+=2)we+=String.fromCharCode(ce[ze]+ce[ze+1]*256);return we}a.prototype.slice=function(L,F){const ce=this.length;L=~~L,F=F===void 0?ce:~~F,L<0?(L+=ce,L<0&&(L=0)):L>ce&&(L=ce),F<0?(F+=ce,F<0&&(F=0)):F>ce&&(F=ce),F<L&&(F=L);const we=this.subarray(L,F);return Object.setPrototypeOf(we,a.prototype),we};function te(W,L,F){if(W%1!==0||W<0)throw new RangeError("offset is not uint");if(W+L>F)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(L,F,ce){L=L>>>0,F=F>>>0,ce||te(L,F,this.length);let we=this[L],ze=1,Be=0;for(;++Be<F&&(ze*=256);)we+=this[L+Be]*ze;return we},a.prototype.readUintBE=a.prototype.readUIntBE=function(L,F,ce){L=L>>>0,F=F>>>0,ce||te(L,F,this.length);let we=this[L+--F],ze=1;for(;F>0&&(ze*=256);)we+=this[L+--F]*ze;return we},a.prototype.readUint8=a.prototype.readUInt8=function(L,F){return L=L>>>0,F||te(L,1,this.length),this[L]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(L,F){return L=L>>>0,F||te(L,2,this.length),this[L]|this[L+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(L,F){return L=L>>>0,F||te(L,2,this.length),this[L]<<8|this[L+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(L,F){return L=L>>>0,F||te(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(L,F){return L=L>>>0,F||te(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},a.prototype.readBigUInt64LE=Ve(function(L){L=L>>>0,et(L,"offset");const F=this[L],ce=this[L+7];(F===void 0||ce===void 0)&&ut(L,this.length-8);const we=F+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,ze=this[++L]+this[++L]*2**8+this[++L]*2**16+ce*2**24;return BigInt(we)+(BigInt(ze)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ve(function(L){L=L>>>0,et(L,"offset");const F=this[L],ce=this[L+7];(F===void 0||ce===void 0)&&ut(L,this.length-8);const we=F*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],ze=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+ce;return(BigInt(we)<<BigInt(32))+BigInt(ze)}),a.prototype.readIntLE=function(L,F,ce){L=L>>>0,F=F>>>0,ce||te(L,F,this.length);let we=this[L],ze=1,Be=0;for(;++Be<F&&(ze*=256);)we+=this[L+Be]*ze;return ze*=128,we>=ze&&(we-=Math.pow(2,8*F)),we},a.prototype.readIntBE=function(L,F,ce){L=L>>>0,F=F>>>0,ce||te(L,F,this.length);let we=F,ze=1,Be=this[L+--we];for(;we>0&&(ze*=256);)Be+=this[L+--we]*ze;return ze*=128,Be>=ze&&(Be-=Math.pow(2,8*F)),Be},a.prototype.readInt8=function(L,F){return L=L>>>0,F||te(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},a.prototype.readInt16LE=function(L,F){L=L>>>0,F||te(L,2,this.length);const ce=this[L]|this[L+1]<<8;return ce&32768?ce|4294901760:ce},a.prototype.readInt16BE=function(L,F){L=L>>>0,F||te(L,2,this.length);const ce=this[L+1]|this[L]<<8;return ce&32768?ce|4294901760:ce},a.prototype.readInt32LE=function(L,F){return L=L>>>0,F||te(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},a.prototype.readInt32BE=function(L,F){return L=L>>>0,F||te(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},a.prototype.readBigInt64LE=Ve(function(L){L=L>>>0,et(L,"offset");const F=this[L],ce=this[L+7];(F===void 0||ce===void 0)&&ut(L,this.length-8);const we=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(ce<<24);return(BigInt(we)<<BigInt(32))+BigInt(F+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),a.prototype.readBigInt64BE=Ve(function(L){L=L>>>0,et(L,"offset");const F=this[L],ce=this[L+7];(F===void 0||ce===void 0)&&ut(L,this.length-8);const we=(F<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(we)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+ce)}),a.prototype.readFloatLE=function(L,F){return L=L>>>0,F||te(L,4,this.length),n.read(this,L,!0,23,4)},a.prototype.readFloatBE=function(L,F){return L=L>>>0,F||te(L,4,this.length),n.read(this,L,!1,23,4)},a.prototype.readDoubleLE=function(L,F){return L=L>>>0,F||te(L,8,this.length),n.read(this,L,!0,52,8)},a.prototype.readDoubleBE=function(L,F){return L=L>>>0,F||te(L,8,this.length),n.read(this,L,!1,52,8)};function se(W,L,F,ce,we,ze){if(!a.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>we||L<ze)throw new RangeError('"value" argument is out of bounds');if(F+ce>W.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(L,F,ce,we){if(L=+L,F=F>>>0,ce=ce>>>0,!we){const ct=Math.pow(2,8*ce)-1;se(this,L,F,ce,ct,0)}let ze=1,Be=0;for(this[F]=L&255;++Be<ce&&(ze*=256);)this[F+Be]=L/ze&255;return F+ce},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(L,F,ce,we){if(L=+L,F=F>>>0,ce=ce>>>0,!we){const ct=Math.pow(2,8*ce)-1;se(this,L,F,ce,ct,0)}let ze=ce-1,Be=1;for(this[F+ze]=L&255;--ze>=0&&(Be*=256);)this[F+ze]=L/Be&255;return F+ce},a.prototype.writeUint8=a.prototype.writeUInt8=function(L,F,ce){return L=+L,F=F>>>0,ce||se(this,L,F,1,255,0),this[F]=L&255,F+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(L,F,ce){return L=+L,F=F>>>0,ce||se(this,L,F,2,65535,0),this[F]=L&255,this[F+1]=L>>>8,F+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(L,F,ce){return L=+L,F=F>>>0,ce||se(this,L,F,2,65535,0),this[F]=L>>>8,this[F+1]=L&255,F+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(L,F,ce){return L=+L,F=F>>>0,ce||se(this,L,F,4,4294967295,0),this[F+3]=L>>>24,this[F+2]=L>>>16,this[F+1]=L>>>8,this[F]=L&255,F+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(L,F,ce){return L=+L,F=F>>>0,ce||se(this,L,F,4,4294967295,0),this[F]=L>>>24,this[F+1]=L>>>16,this[F+2]=L>>>8,this[F+3]=L&255,F+4};function Q(W,L,F,ce,we){ue(L,ce,we,W,F,7);let ze=Number(L&BigInt(4294967295));W[F++]=ze,ze=ze>>8,W[F++]=ze,ze=ze>>8,W[F++]=ze,ze=ze>>8,W[F++]=ze;let Be=Number(L>>BigInt(32)&BigInt(4294967295));return W[F++]=Be,Be=Be>>8,W[F++]=Be,Be=Be>>8,W[F++]=Be,Be=Be>>8,W[F++]=Be,F}function Te(W,L,F,ce,we){ue(L,ce,we,W,F,7);let ze=Number(L&BigInt(4294967295));W[F+7]=ze,ze=ze>>8,W[F+6]=ze,ze=ze>>8,W[F+5]=ze,ze=ze>>8,W[F+4]=ze;let Be=Number(L>>BigInt(32)&BigInt(4294967295));return W[F+3]=Be,Be=Be>>8,W[F+2]=Be,Be=Be>>8,W[F+1]=Be,Be=Be>>8,W[F]=Be,F+8}a.prototype.writeBigUInt64LE=Ve(function(L,F=0){return Q(this,L,F,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ve(function(L,F=0){return Te(this,L,F,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(L,F,ce,we){if(L=+L,F=F>>>0,!we){const ln=Math.pow(2,8*ce-1);se(this,L,F,ce,ln-1,-ln)}let ze=0,Be=1,ct=0;for(this[F]=L&255;++ze<ce&&(Be*=256);)L<0&&ct===0&&this[F+ze-1]!==0&&(ct=1),this[F+ze]=(L/Be>>0)-ct&255;return F+ce},a.prototype.writeIntBE=function(L,F,ce,we){if(L=+L,F=F>>>0,!we){const ln=Math.pow(2,8*ce-1);se(this,L,F,ce,ln-1,-ln)}let ze=ce-1,Be=1,ct=0;for(this[F+ze]=L&255;--ze>=0&&(Be*=256);)L<0&&ct===0&&this[F+ze+1]!==0&&(ct=1),this[F+ze]=(L/Be>>0)-ct&255;return F+ce},a.prototype.writeInt8=function(L,F,ce){return L=+L,F=F>>>0,ce||se(this,L,F,1,127,-128),L<0&&(L=255+L+1),this[F]=L&255,F+1},a.prototype.writeInt16LE=function(L,F,ce){return L=+L,F=F>>>0,ce||se(this,L,F,2,32767,-32768),this[F]=L&255,this[F+1]=L>>>8,F+2},a.prototype.writeInt16BE=function(L,F,ce){return L=+L,F=F>>>0,ce||se(this,L,F,2,32767,-32768),this[F]=L>>>8,this[F+1]=L&255,F+2},a.prototype.writeInt32LE=function(L,F,ce){return L=+L,F=F>>>0,ce||se(this,L,F,4,2147483647,-2147483648),this[F]=L&255,this[F+1]=L>>>8,this[F+2]=L>>>16,this[F+3]=L>>>24,F+4},a.prototype.writeInt32BE=function(L,F,ce){return L=+L,F=F>>>0,ce||se(this,L,F,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[F]=L>>>24,this[F+1]=L>>>16,this[F+2]=L>>>8,this[F+3]=L&255,F+4},a.prototype.writeBigInt64LE=Ve(function(L,F=0){return Q(this,L,F,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ve(function(L,F=0){return Te(this,L,F,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(W,L,F,ce,we,ze){if(F+ce>W.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function Ce(W,L,F,ce,we){return L=+L,F=F>>>0,we||ge(W,L,F,4),n.write(W,L,F,ce,23,4),F+4}a.prototype.writeFloatLE=function(L,F,ce){return Ce(this,L,F,!0,ce)},a.prototype.writeFloatBE=function(L,F,ce){return Ce(this,L,F,!1,ce)};function he(W,L,F,ce,we){return L=+L,F=F>>>0,we||ge(W,L,F,8),n.write(W,L,F,ce,52,8),F+8}a.prototype.writeDoubleLE=function(L,F,ce){return he(this,L,F,!0,ce)},a.prototype.writeDoubleBE=function(L,F,ce){return he(this,L,F,!1,ce)},a.prototype.copy=function(L,F,ce,we){if(!a.isBuffer(L))throw new TypeError("argument should be a Buffer");if(ce||(ce=0),!we&&we!==0&&(we=this.length),F>=L.length&&(F=L.length),F||(F=0),we>0&&we<ce&&(we=ce),we===ce||L.length===0||this.length===0)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(ce<0||ce>=this.length)throw new RangeError("Index out of range");if(we<0)throw new RangeError("sourceEnd out of bounds");we>this.length&&(we=this.length),L.length-F<we-ce&&(we=L.length-F+ce);const ze=we-ce;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(F,ce,we):Uint8Array.prototype.set.call(L,this.subarray(ce,we),F),ze},a.prototype.fill=function(L,F,ce,we){if(typeof L=="string"){if(typeof F=="string"?(we=F,F=0,ce=this.length):typeof ce=="string"&&(we=ce,ce=this.length),we!==void 0&&typeof we!="string")throw new TypeError("encoding must be a string");if(typeof we=="string"&&!a.isEncoding(we))throw new TypeError("Unknown encoding: "+we);if(L.length===1){const Be=L.charCodeAt(0);(we==="utf8"&&Be<128||we==="latin1")&&(L=Be)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(F<0||this.length<F||this.length<ce)throw new RangeError("Out of range index");if(ce<=F)return this;F=F>>>0,ce=ce===void 0?this.length:ce>>>0,L||(L=0);let ze;if(typeof L=="number")for(ze=F;ze<ce;++ze)this[ze]=L;else{const Be=a.isBuffer(L)?L:a.from(L,we),ct=Be.length;if(ct===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(ze=0;ze<ce-F;++ze)this[ze+F]=Be[ze%ct]}return this};const Fe={};function Oe(W,L,F){Fe[W]=class extends F{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${W}]`,this.stack,delete this.name}get code(){return W}set code(we){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:we,writable:!0})}toString(){return`${this.name} [${W}]: ${this.message}`}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(W){return W?`${W} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(W,L){return`The "${W}" argument must be of type number. Received type ${typeof L}`},TypeError),Oe("ERR_OUT_OF_RANGE",function(W,L,F){let ce=`The value of "${W}" is out of range.`,we=F;return Number.isInteger(F)&&Math.abs(F)>2**32?we=Re(String(F)):typeof F=="bigint"&&(we=String(F),(F>BigInt(2)**BigInt(32)||F<-(BigInt(2)**BigInt(32)))&&(we=Re(we)),we+="n"),ce+=` It must be ${L}. Received ${we}`,ce},RangeError);function Re(W){let L="",F=W.length;const ce=W[0]==="-"?1:0;for(;F>=ce+4;F-=3)L=`_${W.slice(F-3,F)}${L}`;return`${W.slice(0,F)}${L}`}function nt(W,L,F){et(L,"offset"),(W[L]===void 0||W[L+F]===void 0)&&ut(L,W.length-(F+1))}function ue(W,L,F,ce,we,ze){if(W>F||W<L){const Be=typeof L=="bigint"?"n":"";let ct;throw L===0||L===BigInt(0)?ct=`>= 0${Be} and < 2${Be} ** ${(ze+1)*8}${Be}`:ct=`>= -(2${Be} ** ${(ze+1)*8-1}${Be}) and < 2 ** ${(ze+1)*8-1}${Be}`,new Fe.ERR_OUT_OF_RANGE("value",ct,W)}nt(ce,we,ze)}function et(W,L){if(typeof W!="number")throw new Fe.ERR_INVALID_ARG_TYPE(L,"number",W)}function ut(W,L,F){throw Math.floor(W)!==W?(et(W,F),new Fe.ERR_OUT_OF_RANGE("offset","an integer",W)):L<0?new Fe.ERR_BUFFER_OUT_OF_BOUNDS:new Fe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${L}`,W)}const Yt=/[^+/0-9A-Za-z-_]/g;function Ht(W){if(W=W.split("=")[0],W=W.trim().replace(Yt,""),W.length<2)return"";for(;W.length%4!==0;)W=W+"=";return W}function Pt(W,L){L=L||1/0;let F;const ce=W.length;let we=null;const ze=[];for(let Be=0;Be<ce;++Be){if(F=W.charCodeAt(Be),F>55295&&F<57344){if(!we){if(F>56319){(L-=3)>-1&&ze.push(239,191,189);continue}else if(Be+1===ce){(L-=3)>-1&&ze.push(239,191,189);continue}we=F;continue}if(F<56320){(L-=3)>-1&&ze.push(239,191,189),we=F;continue}F=(we-55296<<10|F-56320)+65536}else we&&(L-=3)>-1&&ze.push(239,191,189);if(we=null,F<128){if((L-=1)<0)break;ze.push(F)}else if(F<2048){if((L-=2)<0)break;ze.push(F>>6|192,F&63|128)}else if(F<65536){if((L-=3)<0)break;ze.push(F>>12|224,F>>6&63|128,F&63|128)}else if(F<1114112){if((L-=4)<0)break;ze.push(F>>18|240,F>>12&63|128,F>>6&63|128,F&63|128)}else throw new Error("Invalid code point")}return ze}function tn(W){const L=[];for(let F=0;F<W.length;++F)L.push(W.charCodeAt(F)&255);return L}function vt(W,L){let F,ce,we;const ze=[];for(let Be=0;Be<W.length&&!((L-=2)<0);++Be)F=W.charCodeAt(Be),ce=F>>8,we=F%256,ze.push(we),ze.push(ce);return ze}function me(W){return t.toByteArray(Ht(W))}function Ne(W,L,F,ce){let we;for(we=0;we<ce&&!(we+F>=L.length||we>=W.length);++we)L[we+F]=W[we];return we}function $e(W,L){return W instanceof L||W!=null&&W.constructor!=null&&W.constructor.name!=null&&W.constructor.name===L.name}function Je(W){return W!==W}const Le=(function(){const W="0123456789abcdef",L=new Array(256);for(let F=0;F<16;++F){const ce=F*16;for(let we=0;we<16;++we)L[ce+we]=W[F]+W[we]}return L})();function Ve(W){return typeof BigInt>"u"?_e:W}function _e(){throw new Error("BigInt not supported")}})(FA)),FA}var Oot=Dot();typeof window<"u"&&!window.Buffer&&(window.Buffer=Oot.Buffer);let zI=null,al=null,s4=new Set,h_=0;const die={user:"Puck",app:"Zephyr"};function Pot(e){return console.log("[GeminiTTS] Initializing with API key:",`${e.substring(0,8)}...`),zI=new aR({apiKey:e}),console.log("[GeminiTTS] Client created successfully"),!0}async function QM(e,t="Zephyr"){if(!zI){console.warn("[GeminiTTS] Not initialized, falling back to browser TTS"),SH(e);return}try{(!al||al.state==="closed")&&(al=new AudioContext({sampleRate:24e3})),al.state==="suspended"&&await al.resume(),Bot(),h_=al.currentTime,console.log(`[GeminiTTS] Speaking with voice "${t}": ${e.substring(0,50)}...`);const n="gemini-2.5-flash-native-audio-preview-09-2025";console.log(`[GeminiTTS] Connecting to ${n}...`);const r=await zI.live.connect({model:n,config:{responseModalities:[F1.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}},systemInstruction:"You are a voice assistant. Speak the text exactly as provided, nothing more."}});console.log("[GeminiTTS] Session connected");let o=!1;r.on("audio",async i=>{if(i.data&&al){console.log("[GeminiTTS] Received audio chunk");const a=Uint8Array.from(atob(i.data),f=>f.charCodeAt(0)),l=await fq(a,al,24e3),c=al.createBufferSource();c.buffer=l,c.connect(al.destination);const u=Math.max(al.currentTime,h_);c.start(u),h_=u+l.duration,c.onended=()=>s4.delete(c),s4.add(c)}}),r.on("close",()=>{console.log("[GeminiTTS] Session closed"),o=!0}),console.log("[GeminiTTS] Sending text to speak..."),await r.sendClientContent({turns:[{role:"user",parts:[{text:`Say exactly: "${e}"`}]}],turnComplete:!0}),await new Promise(i=>setTimeout(i,2e3+e.length*50)),r.close();const s=h_-((al==null?void 0:al.currentTime)||0);s>0&&await new Promise(i=>setTimeout(i,s*1e3+300))}catch(n){console.error("[GeminiTTS] FAILED - Error details:",n),console.error("[GeminiTTS] Error name:",n==null?void 0:n.name),console.error("[GeminiTTS] Error message:",n==null?void 0:n.message),console.error("[GeminiTTS] Falling back to browser TTS"),SH(e)}}async function Lot(e){return QM(e,die.user)}async function $ot(e){return QM(e,die.app)}async function Fot(e,t=500){console.log("[GeminiTTS] Starting demo conversation with",e.length,"lines");for(const n of e)n.action&&(await n.action(),await new Promise(r=>setTimeout(r,300))),n.role==="user"?await Lot(n.text):await $ot(n.text),await new Promise(r=>setTimeout(r,t));console.log("[GeminiTTS] Demo conversation complete")}function SH(e){if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.rate=1.1,speechSynthesis.speak(t)}}function Bot(){s4.forEach(e=>{try{e.stop()}catch{}}),s4.clear()}function zot(e){return[{role:"user",text:"Hey, I need to add a Support page to the website."},{role:"app",text:"Sure! I'll create a Support page for you. Let me highlight the tools we'll use.",action:async()=>{e.highlightElement("inspector-button",{color:"blue",label:"Inspector",duration:2e3})}},{role:"user",text:"Great, what do you need from me?"},{role:"app",text:"I'll show you how to navigate to where we need to make changes. First, let me highlight the URL bar.",action:async()=>{e.highlightElement("url-bar",{color:"green",label:"Navigate here",duration:3e3})}},{role:"user",text:"I see it. What's next?"},{role:"app",text:"Now I'll create the Support page component. Watch the chat area where I'll type the request.",action:async()=>{e.highlightElement("chat-input",{color:"purple",label:"Type here",duration:2e3}),await e.wait(1e3),await e.typeText("chat-input","Create a new Support page with FAQ section")}},{role:"user",text:"Wow, that was easy! Can you show me how it looks?"},{role:"app",text:"The Support page is ready! It includes a header, FAQ accordion, and contact form. You can preview it in the browser."},{role:"user",text:"Perfect, thanks for the help!"},{role:"app",text:"You're welcome! Let me know if you need any other pages or changes."}]}function jot(e){return[{role:"app",text:"Welcome to Cluso! I'm your AI development assistant. Let me show you around.",action:async()=>{await e.wait(500)}},{role:"app",text:"This is the element inspector. Click it to select any element on the page.",action:async()=>{e.highlightElement("inspector-button",{color:"blue",label:"Inspector",duration:3e3})}},{role:"app",text:"And this is where you can chat with me to make changes to your UI.",action:async()=>{e.highlightElement("chat-input",{color:"purple",label:"Chat with AI",duration:3e3})}},{role:"user",text:"That looks great! How do I start voice chat?"},{role:"app",text:"Just click this microphone button to start a voice session with me.",action:async()=>{e.highlightElement("voice-button",{color:"green",label:"Voice Chat",duration:3e3})}}]}async function Uot(e,t,n){let r;switch(e){case"support-page":r=zot(t);break;case"intro":r=jot(t);break;case"custom":r=[];break;default:console.warn("[DemoScript] Unknown demo:",e);return}console.log(`[DemoScript] Running demo: ${e}`),await Fot(r),console.log(`[DemoScript] Demo complete: ${e}`)}const fie=["support-page","intro"],hie={inspector:"Show me how to use the element inspector to select an element on the page.",voice:"Demonstrate how to start voice chat with the AI.","full-tour":"Give me a full tour of all the main features of Cluso.","edit-workflow":"Show me the workflow for making a UI change to a webpage."};function Hot(e={}){const{googleApiKey:t}=e,[n,r]=x.useState(!1),[o,s]=x.useState(!1),[i,a]=x.useState(""),[l,c]=x.useState(null),u=x.useRef(null),f=Tot();x.useEffect(()=>{Pot(t||"AIzaSyAuAGR2YNrczzJKRcqVr924j71lRqc02IU"),console.log("[ClusoAgent] Gemini TTS initialized with API key");const _={onHighlight:(T,k)=>{console.log("[ClusoAgent] Highlight:",T,k),f.highlightElement(T,k)},onClick:T=>{console.log("[ClusoAgent] Click:",T),f.clickElement(T)},onTooltip:(T,k,M)=>{console.log("[ClusoAgent] Tooltip:",T,k),f.showTooltip(T,{message:k,position:M})},onType:async(T,k)=>{console.log("[ClusoAgent] Type:",T,k),await f.typeText(T,k)},onSpeak:T=>{console.log("[ClusoAgent] Speak (Gemini voice):",T),QM(T)},onWait:T=>(console.log("[ClusoAgent] Wait:",T),f.wait(T))};return u.current=Iot(_),r(!0),()=>{u.current=null}},[f,t]);const m=x.useCallback(async w=>{if(!u.current)return c("Agent not initialized"),"Error: Agent not initialized";s(!0),c(null);try{const _=await u.current.chat(w);return a(_),_}catch(_){const T=_ instanceof Error?_.message:"Unknown error";return c(T),`Error: ${T}`}finally{s(!1)}},[]),g=x.useCallback(()=>{u.current&&(u.current.reset(),a(""),c(null))},[]),y=x.useCallback(async w=>{const _=hie[w];if(!_){c(`Unknown demo: ${w}`);return}await m(_)},[m]),v=x.useCallback(async w=>{s(!0),c(null),a(`Running ${w} demo...`);try{await Uot(w,{highlightElement:f.highlightElement,clickElement:f.clickElement,typeText:f.typeText,wait:f.wait}),a(`${w} demo complete!`)}catch(_){const T=_ instanceof Error?_.message:"Demo failed";c(T)}finally{s(!1)}},[f]);return{isReady:n,isProcessing:o,lastResponse:i,error:l,chat:m,reset:g,runDemo:y,runScriptedDemo:v,availableScripts:fie}}const Vot=Object.keys(hie),qot={"getting-started":[{id:"gs-1",text:"What would you like to build today?",category:"getting-started",relevance:1},{id:"gs-2",text:"Show me the project structure",category:"getting-started",relevance:.9},{id:"gs-3",text:"Help me understand this codebase",category:"getting-started",relevance:.85},{id:"gs-4",text:"What are the main features?",category:"getting-started",relevance:.8},{id:"gs-5",text:"How do I set up the development environment?",category:"getting-started",relevance:.75}],debugging:[{id:"dbg-1",text:"What error are you seeing?",category:"debugging",relevance:.95},{id:"dbg-2",text:"When did this start happening?",category:"debugging",relevance:.9},{id:"dbg-3",text:"Can you help me debug this?",category:"debugging",relevance:.85},{id:"dbg-4",text:"Why is this component not rendering?",category:"debugging",relevance:.8},{id:"dbg-5",text:"Check the console for errors",category:"debugging",relevance:.75}],"ui-changes":[{id:"ui-1",text:"Which element should I modify?",category:"ui-changes",relevance:.95},{id:"ui-2",text:"What style changes do you want?",category:"ui-changes",relevance:.9},{id:"ui-3",text:"Change the color scheme",category:"ui-changes",relevance:.85},{id:"ui-4",text:"Make this button more prominent",category:"ui-changes",relevance:.8},{id:"ui-5",text:"Improve the spacing and layout",category:"ui-changes",relevance:.75}],"code-review":[{id:"cr-1",text:"What should I look for?",category:"code-review",relevance:.9},{id:"cr-2",text:"Any specific concerns?",category:"code-review",relevance:.85},{id:"cr-3",text:"Review this code for best practices",category:"code-review",relevance:.8},{id:"cr-4",text:"Is this implementation correct?",category:"code-review",relevance:.75},{id:"cr-5",text:"Suggest performance improvements",category:"code-review",relevance:.7}]};function Got(e){const t=[];if(e.messages.length===0)return t.push({category:"getting-started",weight:1}),t.push({category:"ui-changes",weight:.6}),t;const r=e.messages.slice(-5).map(o=>o.content.toLowerCase()).join(" ");return(r.includes("error")||r.includes("bug")||r.includes("broken")||r.includes("debug")||r.includes("fix"))&&(t.push({category:"debugging",weight:1}),t.push({category:"code-review",weight:.7})),(e.selectedElement||r.includes("style")||r.includes("color")||r.includes("button")||r.includes("layout")||r.includes("spacing"))&&(t.push({category:"ui-changes",weight:1}),e.selectedElement&&t.push({category:"ui-changes",weight:1.2})),(r.includes("review")||r.includes("refactor")||r.includes("improve")||r.includes("optimize"))&&t.push({category:"code-review",weight:1}),t.length===0&&(t.push({category:"getting-started",weight:.5}),t.push({category:"ui-changes",weight:.6})),t}function Wot(e,t,n){if(n.has(e.id))return 0;const r=t.get(e.category)||0;return e.relevance*r}function Yot(){const[e,t]=x.useState(new Set),[n,r]=x.useState(null),o=x.useMemo(()=>{if(!n)return[];const l=Got(n),c=new Map(l.map(m=>[m.category,m.weight]));return Object.values(qot).flat().map(m=>({...m,score:Wot(m,c,e)})).filter(m=>m.score>0).sort((m,g)=>g.score-m.score).slice(0,3).map(({score:m,...g})=>g)},[n,e]),s=x.useCallback(l=>{t(c=>new Set([...c,l]))},[]),i=x.useCallback(l=>{const c=o.find(u=>u.id===l);return c?(s(l),c.text):""},[o,s]),a=x.useCallback(l=>{r(l)},[]);return{questions:o,dismissedQuestions:e,dismissQuestion:s,selectQuestion:i,refreshQuestions:a}}const Kot=({questions:e,onSelectQuestion:t,onDismissQuestion:n,isDarkMode:r=!0,isVisible:o=!0,isEmptyChat:s=!1})=>{const[i,a]=x.useState(new Set),[l,c]=x.useState([]);if(x.useEffect(()=>{c(e)},[e]),!o||l.length===0)return null;const u=m=>{t(m.text)},f=()=>{c([])};return h.jsxs("div",{className:`p-3 rounded-xl shadow-lg transition-all duration-300 ${r?"bg-neutral-800/95 border border-neutral-700 backdrop-blur-sm":"bg-white/95 border border-stone-200 backdrop-blur-sm"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(K_,{size:14,className:r?"text-amber-400":"text-amber-600"}),h.jsx("span",{className:`text-xs font-medium ${r?"text-neutral-400":"text-stone-500"}`,children:"Suggestions"})]}),h.jsx("button",{onClick:f,className:`p-1 rounded-md transition-colors ${r?"hover:bg-neutral-700 text-neutral-500":"hover:bg-stone-100 text-stone-400"}`,title:"Collapse",children:h.jsx(Lf,{size:14})})]}),h.jsx("div",{className:"flex flex-wrap gap-1.5",children:l.map(m=>h.jsx("button",{onClick:()=>u(m),className:`px-2.5 py-1 rounded-md text-xs transition-all duration-200 ${i.has(m.id)?"opacity-0 scale-95":"opacity-100 scale-100"} ${r?"bg-neutral-700/80 text-neutral-300 hover:bg-neutral-600 hover:text-white":"bg-stone-100 text-stone-600 hover:bg-stone-200 hover:text-stone-800"}`,children:m.text},m.id))})]})};function Zot(){const e=Date.now(),t=Math.random().toString(36).slice(2,7);return`turn-${e}-${t}`}function Jot(e,t,n){const r=Date.now();if(n instanceof Error){const o=n.message.toLowerCase();return o.includes("timeout")?{id:e,toolName:t,code:"TIMEOUT",message:`Tool "${t}" timed out after 30 seconds. The operation took too long to complete.`,recoveryActions:["Retry the operation","Try a simpler/smaller request","Check your system resources (CPU, memory)","Try again after waiting a moment"],timestamp:r}:o.includes("not found")||o.includes("does not exist")?{id:e,toolName:t,code:"NOT_FOUND",message:`Tool "${t}" is not available or the target resource was not found.`,recoveryActions:["Check that the file or element exists","Verify the path or selector is correct","Restart the application to reload tools","Check the browser console for details"],timestamp:r}:o.includes("validation")||o.includes("invalid")?{id:e,toolName:t,code:"VALIDATION",message:`Invalid input for tool "${t}": ${n.message}`,recoveryActions:["Check the input parameters are correct","Try with different arguments","Review the error message for hints"],timestamp:r}:{id:e,toolName:t,code:"EXECUTION",message:`Tool "${t}" failed: ${n.message}`,recoveryActions:["Retry the operation","Try a different approach","Check the browser console for more details"],timestamp:r}}return{id:e,toolName:t,code:"UNKNOWN",message:`Tool "${t}" encountered an unexpected error: ${String(n)}`,recoveryActions:["Retry the operation","Try reloading the page","Check the browser console for details"],timestamp:r}}function Xot(e){return{title:{TIMEOUT:" Tool Timeout",NOT_FOUND:" Not Found",VALIDATION:" Invalid Input",EXECUTION:" Tool Failed",UNKNOWN:" Unknown Error"}[e.code],description:e.message,actions:e.recoveryActions}}var BA={exports:{}},TH;function Qot(){return TH||(TH=1,(function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,r=1,o=0;t.Diff=function(s,i){return[s,i]},t.prototype.diff_main=function(s,i,a,l){typeof l>"u"&&(this.Diff_Timeout<=0?l=Number.MAX_VALUE:l=new Date().getTime()+this.Diff_Timeout*1e3);var c=l;if(s==null||i==null)throw new Error("Null input. (diff_main)");if(s==i)return s?[new t.Diff(o,s)]:[];typeof a>"u"&&(a=!0);var u=a,f=this.diff_commonPrefix(s,i),m=s.substring(0,f);s=s.substring(f),i=i.substring(f),f=this.diff_commonSuffix(s,i);var g=s.substring(s.length-f);s=s.substring(0,s.length-f),i=i.substring(0,i.length-f);var y=this.diff_compute_(s,i,u,c);return m&&y.unshift(new t.Diff(o,m)),g&&y.push(new t.Diff(o,g)),this.diff_cleanupMerge(y),y},t.prototype.diff_compute_=function(s,i,a,l){var c;if(!s)return[new t.Diff(r,i)];if(!i)return[new t.Diff(n,s)];var u=s.length>i.length?s:i,f=s.length>i.length?i:s,m=u.indexOf(f);if(m!=-1)return c=[new t.Diff(r,u.substring(0,m)),new t.Diff(o,f),new t.Diff(r,u.substring(m+f.length))],s.length>i.length&&(c[0][0]=c[2][0]=n),c;if(f.length==1)return[new t.Diff(n,s),new t.Diff(r,i)];var g=this.diff_halfMatch_(s,i);if(g){var y=g[0],v=g[1],w=g[2],_=g[3],T=g[4],k=this.diff_main(y,w,a,l),M=this.diff_main(v,_,a,l);return k.concat([new t.Diff(o,T)],M)}return a&&s.length>100&&i.length>100?this.diff_lineMode_(s,i,l):this.diff_bisect_(s,i,l)},t.prototype.diff_lineMode_=function(s,i,a){var l=this.diff_linesToChars_(s,i);s=l.chars1,i=l.chars2;var c=l.lineArray,u=this.diff_main(s,i,!1,a);this.diff_charsToLines_(u,c),this.diff_cleanupSemantic(u),u.push(new t.Diff(o,""));for(var f=0,m=0,g=0,y="",v="";f<u.length;){switch(u[f][0]){case r:g++,v+=u[f][1];break;case n:m++,y+=u[f][1];break;case o:if(m>=1&&g>=1){u.splice(f-m-g,m+g),f=f-m-g;for(var w=this.diff_main(y,v,!1,a),_=w.length-1;_>=0;_--)u.splice(f,0,w[_]);f=f+w.length}g=0,m=0,y="",v="";break}f++}return u.pop(),u},t.prototype.diff_bisect_=function(s,i,a){for(var l=s.length,c=i.length,u=Math.ceil((l+c)/2),f=u,m=2*u,g=new Array(m),y=new Array(m),v=0;v<m;v++)g[v]=-1,y[v]=-1;g[f+1]=0,y[f+1]=0;for(var w=l-c,_=w%2!=0,T=0,k=0,M=0,D=0,I=0;I<u&&!(new Date().getTime()>a);I++){for(var P=-I+T;P<=I-k;P+=2){var B=f+P,U;P==-I||P!=I&&g[B-1]<g[B+1]?U=g[B+1]:U=g[B-1]+1;for(var j=U-P;U<l&&j<c&&s.charAt(U)==i.charAt(j);)U++,j++;if(g[B]=U,U>l)k+=2;else if(j>c)T+=2;else if(_){var H=f+w-P;if(H>=0&&H<m&&y[H]!=-1){var q=l-y[H];if(U>=q)return this.diff_bisectSplit_(s,i,U,j,a)}}}for(var z=-I+M;z<=I-D;z+=2){var H=f+z,q;z==-I||z!=I&&y[H-1]<y[H+1]?q=y[H+1]:q=y[H-1]+1;for(var Z=q-z;q<l&&Z<c&&s.charAt(l-q-1)==i.charAt(c-Z-1);)q++,Z++;if(y[H]=q,q>l)D+=2;else if(Z>c)M+=2;else if(!_){var B=f+w-z;if(B>=0&&B<m&&g[B]!=-1){var U=g[B],j=f+U-B;if(q=l-q,U>=q)return this.diff_bisectSplit_(s,i,U,j,a)}}}}return[new t.Diff(n,s),new t.Diff(r,i)]},t.prototype.diff_bisectSplit_=function(s,i,a,l,c){var u=s.substring(0,a),f=i.substring(0,l),m=s.substring(a),g=i.substring(l),y=this.diff_main(u,f,!1,c),v=this.diff_main(m,g,!1,c);return y.concat(v)},t.prototype.diff_linesToChars_=function(s,i){var a=[],l={};a[0]="";function c(g){for(var y="",v=0,w=-1,_=a.length;w<g.length-1;){w=g.indexOf(`
`,v),w==-1&&(w=g.length-1);var T=g.substring(v,w+1);(l.hasOwnProperty?l.hasOwnProperty(T):l[T]!==void 0)?y+=String.fromCharCode(l[T]):(_==u&&(T=g.substring(v),w=g.length),y+=String.fromCharCode(_),l[T]=_,a[_++]=T),v=w+1}return y}var u=4e4,f=c(s);u=65535;var m=c(i);return{chars1:f,chars2:m,lineArray:a}},t.prototype.diff_charsToLines_=function(s,i){for(var a=0;a<s.length;a++){for(var l=s[a][1],c=[],u=0;u<l.length;u++)c[u]=i[l.charCodeAt(u)];s[a][1]=c.join("")}},t.prototype.diff_commonPrefix=function(s,i){if(!s||!i||s.charAt(0)!=i.charAt(0))return 0;for(var a=0,l=Math.min(s.length,i.length),c=l,u=0;a<c;)s.substring(u,c)==i.substring(u,c)?(a=c,u=a):l=c,c=Math.floor((l-a)/2+a);return c},t.prototype.diff_commonSuffix=function(s,i){if(!s||!i||s.charAt(s.length-1)!=i.charAt(i.length-1))return 0;for(var a=0,l=Math.min(s.length,i.length),c=l,u=0;a<c;)s.substring(s.length-c,s.length-u)==i.substring(i.length-c,i.length-u)?(a=c,u=a):l=c,c=Math.floor((l-a)/2+a);return c},t.prototype.diff_commonOverlap_=function(s,i){var a=s.length,l=i.length;if(a==0||l==0)return 0;a>l?s=s.substring(a-l):a<l&&(i=i.substring(0,a));var c=Math.min(a,l);if(s==i)return c;for(var u=0,f=1;;){var m=s.substring(c-f),g=i.indexOf(m);if(g==-1)return u;f+=g,(g==0||s.substring(c-f)==i.substring(0,f))&&(u=f,f++)}},t.prototype.diff_halfMatch_=function(s,i){if(this.Diff_Timeout<=0)return null;var a=s.length>i.length?s:i,l=s.length>i.length?i:s;if(a.length<4||l.length*2<a.length)return null;var c=this;function u(k,M,D){for(var I=k.substring(D,D+Math.floor(k.length/4)),P=-1,B="",U,j,H,q;(P=M.indexOf(I,P+1))!=-1;){var z=c.diff_commonPrefix(k.substring(D),M.substring(P)),Z=c.diff_commonSuffix(k.substring(0,D),M.substring(0,P));B.length<Z+z&&(B=M.substring(P-Z,P)+M.substring(P,P+z),U=k.substring(0,D-Z),j=k.substring(D+z),H=M.substring(0,P-Z),q=M.substring(P+z))}return B.length*2>=k.length?[U,j,H,q,B]:null}var f=u(a,l,Math.ceil(a.length/4)),m=u(a,l,Math.ceil(a.length/2)),g;if(!f&&!m)return null;m?f?g=f[4].length>m[4].length?f:m:g=m:g=f;var y,v,w,_;s.length>i.length?(y=g[0],v=g[1],w=g[2],_=g[3]):(w=g[0],_=g[1],y=g[2],v=g[3]);var T=g[4];return[y,v,w,_,T]},t.prototype.diff_cleanupSemantic=function(s){for(var i=!1,a=[],l=0,c=null,u=0,f=0,m=0,g=0,y=0;u<s.length;)s[u][0]==o?(a[l++]=u,f=g,m=y,g=0,y=0,c=s[u][1]):(s[u][0]==r?g+=s[u][1].length:y+=s[u][1].length,c&&c.length<=Math.max(f,m)&&c.length<=Math.max(g,y)&&(s.splice(a[l-1],0,new t.Diff(n,c)),s[a[l-1]+1][0]=r,l--,l--,u=l>0?a[l-1]:-1,f=0,m=0,g=0,y=0,c=null,i=!0)),u++;for(i&&this.diff_cleanupMerge(s),this.diff_cleanupSemanticLossless(s),u=1;u<s.length;){if(s[u-1][0]==n&&s[u][0]==r){var v=s[u-1][1],w=s[u][1],_=this.diff_commonOverlap_(v,w),T=this.diff_commonOverlap_(w,v);_>=T?(_>=v.length/2||_>=w.length/2)&&(s.splice(u,0,new t.Diff(o,w.substring(0,_))),s[u-1][1]=v.substring(0,v.length-_),s[u+1][1]=w.substring(_),u++):(T>=v.length/2||T>=w.length/2)&&(s.splice(u,0,new t.Diff(o,v.substring(0,T))),s[u-1][0]=r,s[u-1][1]=w.substring(0,w.length-T),s[u+1][0]=n,s[u+1][1]=v.substring(T),u++),u++}u++}},t.prototype.diff_cleanupSemanticLossless=function(s){function i(T,k){if(!T||!k)return 6;var M=T.charAt(T.length-1),D=k.charAt(0),I=M.match(t.nonAlphaNumericRegex_),P=D.match(t.nonAlphaNumericRegex_),B=I&&M.match(t.whitespaceRegex_),U=P&&D.match(t.whitespaceRegex_),j=B&&M.match(t.linebreakRegex_),H=U&&D.match(t.linebreakRegex_),q=j&&T.match(t.blanklineEndRegex_),z=H&&k.match(t.blanklineStartRegex_);return q||z?5:j||H?4:I&&!B&&U?3:B||U?2:I||P?1:0}for(var a=1;a<s.length-1;){if(s[a-1][0]==o&&s[a+1][0]==o){var l=s[a-1][1],c=s[a][1],u=s[a+1][1],f=this.diff_commonSuffix(l,c);if(f){var m=c.substring(c.length-f);l=l.substring(0,l.length-f),c=m+c.substring(0,c.length-f),u=m+u}for(var g=l,y=c,v=u,w=i(l,c)+i(c,u);c.charAt(0)===u.charAt(0);){l+=c.charAt(0),c=c.substring(1)+u.charAt(0),u=u.substring(1);var _=i(l,c)+i(c,u);_>=w&&(w=_,g=l,y=c,v=u)}s[a-1][1]!=g&&(g?s[a-1][1]=g:(s.splice(a-1,1),a--),s[a][1]=y,v?s[a+1][1]=v:(s.splice(a+1,1),a--))}a++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(s){for(var i=!1,a=[],l=0,c=null,u=0,f=!1,m=!1,g=!1,y=!1;u<s.length;)s[u][0]==o?(s[u][1].length<this.Diff_EditCost&&(g||y)?(a[l++]=u,f=g,m=y,c=s[u][1]):(l=0,c=null),g=y=!1):(s[u][0]==n?y=!0:g=!0,c&&(f&&m&&g&&y||c.length<this.Diff_EditCost/2&&f+m+g+y==3)&&(s.splice(a[l-1],0,new t.Diff(n,c)),s[a[l-1]+1][0]=r,l--,c=null,f&&m?(g=y=!0,l=0):(l--,u=l>0?a[l-1]:-1,g=y=!1),i=!0)),u++;i&&this.diff_cleanupMerge(s)},t.prototype.diff_cleanupMerge=function(s){s.push(new t.Diff(o,""));for(var i=0,a=0,l=0,c="",u="",f;i<s.length;)switch(s[i][0]){case r:l++,u+=s[i][1],i++;break;case n:a++,c+=s[i][1],i++;break;case o:a+l>1?(a!==0&&l!==0&&(f=this.diff_commonPrefix(u,c),f!==0&&(i-a-l>0&&s[i-a-l-1][0]==o?s[i-a-l-1][1]+=u.substring(0,f):(s.splice(0,0,new t.Diff(o,u.substring(0,f))),i++),u=u.substring(f),c=c.substring(f)),f=this.diff_commonSuffix(u,c),f!==0&&(s[i][1]=u.substring(u.length-f)+s[i][1],u=u.substring(0,u.length-f),c=c.substring(0,c.length-f))),i-=a+l,s.splice(i,a+l),c.length&&(s.splice(i,0,new t.Diff(n,c)),i++),u.length&&(s.splice(i,0,new t.Diff(r,u)),i++),i++):i!==0&&s[i-1][0]==o?(s[i-1][1]+=s[i][1],s.splice(i,1)):i++,l=0,a=0,c="",u="";break}s[s.length-1][1]===""&&s.pop();var m=!1;for(i=1;i<s.length-1;)s[i-1][0]==o&&s[i+1][0]==o&&(s[i][1].substring(s[i][1].length-s[i-1][1].length)==s[i-1][1]?(s[i][1]=s[i-1][1]+s[i][1].substring(0,s[i][1].length-s[i-1][1].length),s[i+1][1]=s[i-1][1]+s[i+1][1],s.splice(i-1,1),m=!0):s[i][1].substring(0,s[i+1][1].length)==s[i+1][1]&&(s[i-1][1]+=s[i+1][1],s[i][1]=s[i][1].substring(s[i+1][1].length)+s[i+1][1],s.splice(i+1,1),m=!0)),i++;m&&this.diff_cleanupMerge(s)},t.prototype.diff_xIndex=function(s,i){var a=0,l=0,c=0,u=0,f;for(f=0;f<s.length&&(s[f][0]!==r&&(a+=s[f][1].length),s[f][0]!==n&&(l+=s[f][1].length),!(a>i));f++)c=a,u=l;return s.length!=f&&s[f][0]===n?u:u+(i-c)},t.prototype.diff_prettyHtml=function(s){for(var i=[],a=/&/g,l=/</g,c=/>/g,u=/\n/g,f=0;f<s.length;f++){var m=s[f][0],g=s[f][1],y=g.replace(a,"&amp;").replace(l,"&lt;").replace(c,"&gt;").replace(u,"&para;<br>");switch(m){case r:i[f]='<ins style="background:#e6ffe6;">'+y+"</ins>";break;case n:i[f]='<del style="background:#ffe6e6;">'+y+"</del>";break;case o:i[f]="<span>"+y+"</span>";break}}return i.join("")},t.prototype.diff_text1=function(s){for(var i=[],a=0;a<s.length;a++)s[a][0]!==r&&(i[a]=s[a][1]);return i.join("")},t.prototype.diff_text2=function(s){for(var i=[],a=0;a<s.length;a++)s[a][0]!==n&&(i[a]=s[a][1]);return i.join("")},t.prototype.diff_levenshtein=function(s){for(var i=0,a=0,l=0,c=0;c<s.length;c++){var u=s[c][0],f=s[c][1];switch(u){case r:a+=f.length;break;case n:l+=f.length;break;case o:i+=Math.max(a,l),a=0,l=0;break}}return i+=Math.max(a,l),i},t.prototype.diff_toDelta=function(s){for(var i=[],a=0;a<s.length;a++)switch(s[a][0]){case r:i[a]="+"+encodeURI(s[a][1]);break;case n:i[a]="-"+s[a][1].length;break;case o:i[a]="="+s[a][1].length;break}return i.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(s,i){for(var a=[],l=0,c=0,u=i.split(/\t/g),f=0;f<u.length;f++){var m=u[f].substring(1);switch(u[f].charAt(0)){case"+":try{a[l++]=new t.Diff(r,decodeURI(m))}catch{throw new Error("Illegal escape in diff_fromDelta: "+m)}break;case"-":case"=":var g=parseInt(m,10);if(isNaN(g)||g<0)throw new Error("Invalid number in diff_fromDelta: "+m);var y=s.substring(c,c+=g);u[f].charAt(0)=="="?a[l++]=new t.Diff(o,y):a[l++]=new t.Diff(n,y);break;default:if(u[f])throw new Error("Invalid diff operation in diff_fromDelta: "+u[f])}}if(c!=s.length)throw new Error("Delta length ("+c+") does not equal source text length ("+s.length+").");return a},t.prototype.match_main=function(s,i,a){if(s==null||i==null||a==null)throw new Error("Null input. (match_main)");return a=Math.max(0,Math.min(a,s.length)),s==i?0:s.length?s.substring(a,a+i.length)==i?a:this.match_bitap_(s,i,a):-1},t.prototype.match_bitap_=function(s,i,a){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var l=this.match_alphabet_(i),c=this;function u(U,j){var H=U/i.length,q=Math.abs(a-j);return c.Match_Distance?H+q/c.Match_Distance:q?1:H}var f=this.Match_Threshold,m=s.indexOf(i,a);m!=-1&&(f=Math.min(u(0,m),f),m=s.lastIndexOf(i,a+i.length),m!=-1&&(f=Math.min(u(0,m),f)));var g=1<<i.length-1;m=-1;for(var y,v,w=i.length+s.length,_,T=0;T<i.length;T++){for(y=0,v=w;y<v;)u(T,a+v)<=f?y=v:w=v,v=Math.floor((w-y)/2+y);w=v;var k=Math.max(1,a-v+1),M=Math.min(a+v,s.length)+i.length,D=Array(M+2);D[M+1]=(1<<T)-1;for(var I=M;I>=k;I--){var P=l[s.charAt(I-1)];if(T===0?D[I]=(D[I+1]<<1|1)&P:D[I]=(D[I+1]<<1|1)&P|((_[I+1]|_[I])<<1|1)|_[I+1],D[I]&g){var B=u(T,I-1);if(B<=f)if(f=B,m=I-1,m>a)k=Math.max(1,2*a-m);else break}}if(u(T+1,a)>f)break;_=D}return m},t.prototype.match_alphabet_=function(s){for(var i={},a=0;a<s.length;a++)i[s.charAt(a)]=0;for(var a=0;a<s.length;a++)i[s.charAt(a)]|=1<<s.length-a-1;return i},t.prototype.patch_addContext_=function(s,i){if(i.length!=0){if(s.start2===null)throw Error("patch not initialized");for(var a=i.substring(s.start2,s.start2+s.length1),l=0;i.indexOf(a)!=i.lastIndexOf(a)&&a.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,a=i.substring(s.start2-l,s.start2+s.length1+l);l+=this.Patch_Margin;var c=i.substring(s.start2-l,s.start2);c&&s.diffs.unshift(new t.Diff(o,c));var u=i.substring(s.start2+s.length1,s.start2+s.length1+l);u&&s.diffs.push(new t.Diff(o,u)),s.start1-=c.length,s.start2-=c.length,s.length1+=c.length+u.length,s.length2+=c.length+u.length}},t.prototype.patch_make=function(s,i,a){var l,c;if(typeof s=="string"&&typeof i=="string"&&typeof a>"u")l=s,c=this.diff_main(l,i,!0),c.length>2&&(this.diff_cleanupSemantic(c),this.diff_cleanupEfficiency(c));else if(s&&typeof s=="object"&&typeof i>"u"&&typeof a>"u")c=s,l=this.diff_text1(c);else if(typeof s=="string"&&i&&typeof i=="object"&&typeof a>"u")l=s,c=i;else if(typeof s=="string"&&typeof i=="string"&&a&&typeof a=="object")l=s,c=a;else throw new Error("Unknown call format to patch_make.");if(c.length===0)return[];for(var u=[],f=new t.patch_obj,m=0,g=0,y=0,v=l,w=l,_=0;_<c.length;_++){var T=c[_][0],k=c[_][1];switch(!m&&T!==o&&(f.start1=g,f.start2=y),T){case r:f.diffs[m++]=c[_],f.length2+=k.length,w=w.substring(0,y)+k+w.substring(y);break;case n:f.length1+=k.length,f.diffs[m++]=c[_],w=w.substring(0,y)+w.substring(y+k.length);break;case o:k.length<=2*this.Patch_Margin&&m&&c.length!=_+1?(f.diffs[m++]=c[_],f.length1+=k.length,f.length2+=k.length):k.length>=2*this.Patch_Margin&&m&&(this.patch_addContext_(f,v),u.push(f),f=new t.patch_obj,m=0,v=w,g=y);break}T!==r&&(g+=k.length),T!==n&&(y+=k.length)}return m&&(this.patch_addContext_(f,v),u.push(f)),u},t.prototype.patch_deepCopy=function(s){for(var i=[],a=0;a<s.length;a++){var l=s[a],c=new t.patch_obj;c.diffs=[];for(var u=0;u<l.diffs.length;u++)c.diffs[u]=new t.Diff(l.diffs[u][0],l.diffs[u][1]);c.start1=l.start1,c.start2=l.start2,c.length1=l.length1,c.length2=l.length2,i[a]=c}return i},t.prototype.patch_apply=function(s,i){if(s.length==0)return[i,[]];s=this.patch_deepCopy(s);var a=this.patch_addPadding(s);i=a+i+a,this.patch_splitMax(s);for(var l=0,c=[],u=0;u<s.length;u++){var f=s[u].start2+l,m=this.diff_text1(s[u].diffs),g,y=-1;if(m.length>this.Match_MaxBits?(g=this.match_main(i,m.substring(0,this.Match_MaxBits),f),g!=-1&&(y=this.match_main(i,m.substring(m.length-this.Match_MaxBits),f+m.length-this.Match_MaxBits),(y==-1||g>=y)&&(g=-1))):g=this.match_main(i,m,f),g==-1)c[u]=!1,l-=s[u].length2-s[u].length1;else{c[u]=!0,l=g-f;var v;if(y==-1?v=i.substring(g,g+m.length):v=i.substring(g,y+this.Match_MaxBits),m==v)i=i.substring(0,g)+this.diff_text2(s[u].diffs)+i.substring(g+m.length);else{var w=this.diff_main(m,v,!1);if(m.length>this.Match_MaxBits&&this.diff_levenshtein(w)/m.length>this.Patch_DeleteThreshold)c[u]=!1;else{this.diff_cleanupSemanticLossless(w);for(var _=0,T,k=0;k<s[u].diffs.length;k++){var M=s[u].diffs[k];M[0]!==o&&(T=this.diff_xIndex(w,_)),M[0]===r?i=i.substring(0,g+T)+M[1]+i.substring(g+T):M[0]===n&&(i=i.substring(0,g+T)+i.substring(g+this.diff_xIndex(w,_+M[1].length))),M[0]!==n&&(_+=M[1].length)}}}}}return i=i.substring(a.length,i.length-a.length),[i,c]},t.prototype.patch_addPadding=function(s){for(var i=this.Patch_Margin,a="",l=1;l<=i;l++)a+=String.fromCharCode(l);for(var l=0;l<s.length;l++)s[l].start1+=i,s[l].start2+=i;var c=s[0],u=c.diffs;if(u.length==0||u[0][0]!=o)u.unshift(new t.Diff(o,a)),c.start1-=i,c.start2-=i,c.length1+=i,c.length2+=i;else if(i>u[0][1].length){var f=i-u[0][1].length;u[0][1]=a.substring(u[0][1].length)+u[0][1],c.start1-=f,c.start2-=f,c.length1+=f,c.length2+=f}if(c=s[s.length-1],u=c.diffs,u.length==0||u[u.length-1][0]!=o)u.push(new t.Diff(o,a)),c.length1+=i,c.length2+=i;else if(i>u[u.length-1][1].length){var f=i-u[u.length-1][1].length;u[u.length-1][1]+=a.substring(0,f),c.length1+=f,c.length2+=f}return a},t.prototype.patch_splitMax=function(s){for(var i=this.Match_MaxBits,a=0;a<s.length;a++)if(!(s[a].length1<=i)){var l=s[a];s.splice(a--,1);for(var c=l.start1,u=l.start2,f="";l.diffs.length!==0;){var m=new t.patch_obj,g=!0;for(m.start1=c-f.length,m.start2=u-f.length,f!==""&&(m.length1=m.length2=f.length,m.diffs.push(new t.Diff(o,f)));l.diffs.length!==0&&m.length1<i-this.Patch_Margin;){var y=l.diffs[0][0],v=l.diffs[0][1];y===r?(m.length2+=v.length,u+=v.length,m.diffs.push(l.diffs.shift()),g=!1):y===n&&m.diffs.length==1&&m.diffs[0][0]==o&&v.length>2*i?(m.length1+=v.length,c+=v.length,g=!1,m.diffs.push(new t.Diff(y,v)),l.diffs.shift()):(v=v.substring(0,i-m.length1-this.Patch_Margin),m.length1+=v.length,c+=v.length,y===o?(m.length2+=v.length,u+=v.length):g=!1,m.diffs.push(new t.Diff(y,v)),v==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(v.length))}f=this.diff_text2(m.diffs),f=f.substring(f.length-this.Patch_Margin);var w=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);w!==""&&(m.length1+=w.length,m.length2+=w.length,m.diffs.length!==0&&m.diffs[m.diffs.length-1][0]===o?m.diffs[m.diffs.length-1][1]+=w:m.diffs.push(new t.Diff(o,w))),g||s.splice(++a,0,m)}}},t.prototype.patch_toText=function(s){for(var i=[],a=0;a<s.length;a++)i[a]=s[a];return i.join("")},t.prototype.patch_fromText=function(s){var i=[];if(!s)return i;for(var a=s.split(`
`),l=0,c=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<a.length;){var u=a[l].match(c);if(!u)throw new Error("Invalid patch string: "+a[l]);var f=new t.patch_obj;for(i.push(f),f.start1=parseInt(u[1],10),u[2]===""?(f.start1--,f.length1=1):u[2]=="0"?f.length1=0:(f.start1--,f.length1=parseInt(u[2],10)),f.start2=parseInt(u[3],10),u[4]===""?(f.start2--,f.length2=1):u[4]=="0"?f.length2=0:(f.start2--,f.length2=parseInt(u[4],10)),l++;l<a.length;){var m=a[l].charAt(0);try{var g=decodeURI(a[l].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+g)}if(m=="-")f.diffs.push(new t.Diff(n,g));else if(m=="+")f.diffs.push(new t.Diff(r,g));else if(m==" ")f.diffs.push(new t.Diff(o,g));else{if(m=="@")break;if(m!=="")throw new Error('Invalid patch mode "'+m+'" in: '+g)}l++}}return i},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var s,i;this.length1===0?s=this.start1+",0":this.length1==1?s=this.start1+1:s=this.start1+1+","+this.length1,this.length2===0?i=this.start2+",0":this.length2==1?i=this.start2+1:i=this.start2+1+","+this.length2;for(var a=["@@ -"+s+" +"+i+` @@
`],l,c=0;c<this.diffs.length;c++){switch(this.diffs[c][0]){case r:l="+";break;case n:l="-";break;case o:l=" ";break}a[c+1]=l+encodeURI(this.diffs[c][1])+`
`}return a.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=r,e.exports.DIFF_EQUAL=o})(BA)),BA.exports}var est=Qot();const tst=km(est),CH=new tst;function nst(e,t){const n=CH.diff_main(e,t);return CH.diff_cleanup_semantic(n),{before:e,after:t,diffs:n}}function zA(e,t,n,r){const o=`patch-decisions-${e}`,s=JSON.parse(localStorage.getItem(o)||"[]");s.push({filePath:t,timestamp:Date.now(),decision:n,changeType:r}),s.length>100&&s.shift(),localStorage.setItem(o,JSON.stringify(s))}function rst(e){var r;const t=((r=e.split(".").pop())==null?void 0:r.toLowerCase())||"";return{js:"javascript",jsx:"javascript",mjs:"javascript",cjs:"javascript",ts:"typescript",tsx:"typescript",mts:"typescript",cts:"typescript",py:"python",pyw:"python",pyi:"python",go:"go",rs:"rust",java:"java",cpp:"cpp",cc:"cpp",cxx:"cpp",c:"c",h:"c",hpp:"cpp",html:"html",htm:"html",vue:"vue",css:"css",scss:"scss",sass:"sass",less:"less",json:"json",jsonc:"jsonc",yaml:"yaml",yml:"yaml",md:"markdown",mdx:"mdx",xml:"xml",sql:"sql",sh:"bash",bash:"bash",zsh:"bash",fish:"fish",ps1:"powershell",rb:"ruby",erb:"ruby",php:"php",swift:"swift",kt:"kotlin",kts:"kotlin",scala:"scala",clj:"clojure",cljs:"clojure",edn:"clojure",elm:"elm",ex:"elixir",exs:"elixir",erl:"erlang",hrl:"erlang",fs:"fsharp",fsi:"fsharp",fsx:"fsharp",ml:"ocaml",mli:"ocaml",pl:"perl",pm:"perl",t:"perl",r:"r",R:"r",rmd:"rmarkdown",groovy:"groovy",gradle:"groovy",nix:"nix",dhall:"dhall",hcl:"hcl",tf:"hcl",dart:"dart",lua:"lua",vim:"vim",vimrc:"vim",lisp:"lisp",cl:"lisp",el:"lisp",scm:"scheme",rkt:"racket",jl:"julia",hs:"haskell",lhs:"haskell",purescript:"purescript",purs:"purescript",pyx:"cython",pxd:"cython",pxi:"cython",proto:"protobuf",thrift:"thrift",graphql:"graphql",gql:"graphql",dockerfile:"dockerfile",Dockerfile:"dockerfile","docker-compose.yml":"yaml","docker-compose.yaml":"yaml",makefile:"makefile",Makefile:"makefile",cmake:"cmake","CMakeLists.txt":"cmake",gradle:"gradle",maven:"xml","pom.xml":"xml",nuget:"xml","packages.config":"xml",gemfile:"ruby",Gemfile:"ruby","Gemfile.lock":"ruby",podfile:"ruby",Podfile:"ruby",cartfile:"plaintext",Cartfile:"plaintext","requirements.txt":"plaintext","setup.py":"python","setup.cfg":"ini","pyproject.toml":"toml","tox.ini":"ini","pytest.ini":"ini","package.json":"json","package-lock.json":"json","yarn.lock":"plaintext","pnpm-lock.yaml":"yaml","tsconfig.json":"json","jest.config.js":"javascript","webpack.config.js":"javascript","vite.config.js":"javascript","vite.config.ts":"typescript",env:"plaintext",".env":"plaintext",".env.local":"plaintext",".env.example":"plaintext",editorconfig:"ini",".editorconfig":"ini",gitignore:"plaintext",".gitignore":"plaintext",npmignore:"plaintext",".npmignore":"plaintext",prettierignore:"plaintext",".prettierignore":"plaintext",eslintignore:"plaintext",".eslintignore":"plaintext",prettierrc:"json",".prettierrc":"json","prettierrc.json":"json",".prettierrc.json":"json","prettierrc.yaml":"yaml",".prettierrc.yaml":"yaml","prettierrc.yml":"yaml",".prettierrc.yml":"yaml","prettierrc.js":"javascript",".prettierrc.js":"javascript",eslintrc:"json",".eslintrc":"json","eslintrc.json":"json",".eslintrc.json":"json","eslintrc.yaml":"yaml",".eslintrc.yaml":"yaml","eslintrc.yml":"yaml",".eslintrc.yml":"yaml","eslintrc.js":"javascript",".eslintrc.js":"javascript",babelrc:"json",".babelrc":"json","babelrc.json":"json",".babelrc.json":"json","babelrc.js":"javascript",".babelrc.js":"javascript"}[t]||"plaintext"}const ost=({before:e,after:t,language:n})=>h.jsxs("div",{className:"grid grid-cols-2 gap-4 min-h-[200px] max-h-[500px]",children:[h.jsxs("div",{className:"rounded-lg border border-neutral-700 bg-neutral-900/50 overflow-hidden flex flex-col",children:[h.jsx("div",{className:"bg-neutral-800/80 px-4 py-2 border-b border-neutral-700",children:h.jsx("h3",{className:"text-sm font-semibold text-neutral-300",children:"Before"})}),h.jsx("div",{className:"flex-1 overflow-auto",children:h.jsx(oI,{code:e,language:n,showLineNumbers:!0,isDarkMode:!0,className:"!bg-transparent !p-0 text-sm"})})]}),h.jsxs("div",{className:"rounded-lg border border-neutral-700 bg-neutral-900/50 overflow-hidden flex flex-col",children:[h.jsx("div",{className:"bg-neutral-800/80 px-4 py-2 border-b border-neutral-700",children:h.jsx("h3",{className:"text-sm font-semibold text-neutral-300",children:"After"})}),h.jsx("div",{className:"flex-1 overflow-auto",children:h.jsx(oI,{code:t,language:n,showLineNumbers:!0,isDarkMode:!0,className:"!bg-transparent !p-0 text-sm"})})]})]}),sst=({diff:e,language:t})=>{const n=e.diffs.map(([r,o])=>o.split(`
`).filter(i=>i).map(i=>({type:r,text:i}))).flat();return h.jsx("div",{className:"rounded-lg border border-neutral-700 bg-neutral-900/50 overflow-auto max-h-[500px]",children:h.jsx("div",{className:"text-sm font-mono",children:n.map((r,o)=>h.jsxs("div",{className:`px-4 py-1 ${r.type===1?"bg-green-900/20 text-green-200":r.type===-1?"bg-red-900/20 text-red-200":"text-neutral-400"}`,children:[h.jsx("span",{className:"mr-3 text-neutral-600",children:r.type===1?"+":r.type===-1?"-":" "}),r.text]},o))})})},ist=({patch:e,onApprove:t,onReject:n,onEdit:r,projectPath:o="default",isOpen:s,totalPatches:i=0,currentPatchIndex:a=0})=>{const[l,c]=x.useState(!1),[u,f]=x.useState(!1),m=e?nst(e.originalContent,e.patchedContent):null,g=e?rst(e.filePath):"plaintext";x.useEffect(()=>{if(!s||!e)return;const k=M=>{(M.metaKey||M.ctrlKey)&&M.key==="y"&&(M.preventDefault(),y()),(M.metaKey||M.ctrlKey)&&M.key==="n"&&(M.preventDefault(),v()),(M.metaKey||M.ctrlKey)&&M.key==="e"&&(M.preventDefault(),w()),M.key==="Escape"&&(M.preventDefault(),v())};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[s,e]);const y=x.useCallback(()=>{e&&(f(!0),zA(o,e.filePath,"accept","code-change"),setTimeout(()=>{t(e),f(!1)},300))},[e,t,o]),v=x.useCallback(()=>{e&&(f(!0),zA(o,e.filePath,"reject","code-change"),setTimeout(()=>{n(e),f(!1)},300))},[e,n,o]),w=x.useCallback(()=>{e&&(f(!0),zA(o,e.filePath,"edit","code-change"),setTimeout(()=>{r(e),f(!1)},300))},[e,r,o]);if(!s||!e||!m)return null;e.filePath.split("/").pop();const _=e.patchedContent.length,T=m.diffs.filter(([k])=>k!==0).length;return h.jsx("div",{className:`fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 transition-opacity duration-300 ${u?"opacity-0":"opacity-100"}`,children:h.jsxs("div",{className:`bg-neutral-900 border border-neutral-700 rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col transition-all duration-300 ${u?"scale-95 opacity-0":"scale-100 opacity-100"}`,children:[h.jsxs("div",{className:"border-b border-neutral-700 bg-neutral-800/50 px-6 py-4 flex items-start justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-semibold text-white mb-1",children:"Review Code Change"}),h.jsxs("p",{className:"text-sm text-neutral-400",children:["File: ",h.jsx("code",{className:"bg-neutral-800 px-2 py-1 rounded",children:e.filePath})]}),h.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:[T," lines changed  ",_," bytes",i>1&&`  Patch ${a+1} of ${i}`]})]}),i>1&&h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[a+1,"/",i]}),h.jsx("p",{className:"text-xs text-neutral-500",children:"remaining patches"})]})]}),h.jsxs("div",{className:"border-b border-neutral-700 bg-neutral-900/30 px-6 py-2 flex items-center gap-2",children:[h.jsx("button",{onClick:()=>c(!1),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${l?"text-neutral-400 hover:text-neutral-200":"bg-blue-600 text-white"}`,children:"Side-by-Side"}),h.jsx("button",{onClick:()=>c(!0),className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${l?"bg-blue-600 text-white":"text-neutral-400 hover:text-neutral-200"}`,children:"Inline"})]}),h.jsx("div",{className:"flex-1 overflow-auto p-6",children:l?h.jsx(sst,{diff:m,language:g}):h.jsx(ost,{before:e.originalContent,after:e.patchedContent,language:g})}),h.jsxs("div",{className:"border-t border-neutral-700 bg-neutral-800/50 px-6 py-4 flex items-center justify-between gap-3",children:[h.jsx("div",{className:"text-xs text-neutral-500",children:h.jsx("p",{children:"Y = Accept  N = Reject  E = Edit  ESC = Reject"})}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:v,className:"px-4 py-2 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600/30 transition-colors flex items-center gap-2 font-medium",children:[h.jsx(qr,{className:"w-4 h-4"}),"Reject"]}),h.jsxs("button",{onClick:w,className:"px-4 py-2 rounded-lg bg-amber-600/20 text-amber-400 hover:bg-amber-600/30 transition-colors flex items-center gap-2 font-medium",children:[h.jsx(Z_,{className:"w-4 h-4"}),"Edit"]}),h.jsxs("button",{onClick:y,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-500 transition-colors flex items-center gap-2 font-medium shadow-lg shadow-green-600/30",children:[h.jsx(Co,{className:"w-4 h-4"}),"Accept"]})]})]})]})})};var pie="vercel.ai.error",ast=Symbol.for(pie),mie,lst=class gie extends Error{constructor({name:t,message:n,cause:r}){super(n),this[mie]=!0,this.name=t,this.cause=r}static isInstance(t){return gie.hasMarker(t,pie)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};mie=ast;var Cr=lst,bie="AI_APICallError",yie=`vercel.ai.error.${bie}`,cst=Symbol.for(yie),vie,Ba=class extends Cr{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:o,responseBody:s,cause:i,isRetryable:a=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:bie,message:e,cause:i}),this[vie]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=o,this.responseBody=s,this.isRetryable=a,this.data=l}static isInstance(e){return Cr.hasMarker(e,yie)}};vie=cst;var xie="AI_EmptyResponseBodyError",wie=`vercel.ai.error.${xie}`,ust=Symbol.for(wie),Eie,dst=class extends Cr{constructor({message:e="Empty response body"}={}){super({name:xie,message:e}),this[Eie]=!0}static isInstance(e){return Cr.hasMarker(e,wie)}};Eie=ust;function Ww(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var _ie="AI_InvalidArgumentError",Sie=`vercel.ai.error.${_ie}`,fst=Symbol.for(Sie),Tie,Cie=class extends Cr{constructor({message:t,cause:n,argument:r}){super({name:_ie,message:t,cause:n}),this[Tie]=!0,this.argument=r}static isInstance(t){return Cr.hasMarker(t,Sie)}};Tie=fst;var kie="AI_InvalidPromptError",Aie=`vercel.ai.error.${kie}`,hst=Symbol.for(Aie),Nie,e1=class extends Cr{constructor({prompt:e,message:t,cause:n}){super({name:kie,message:`Invalid prompt: ${t}`,cause:n}),this[Nie]=!0,this.prompt=e}static isInstance(e){return Cr.hasMarker(e,Aie)}};Nie=hst;var Iie="AI_JSONParseError",Rie=`vercel.ai.error.${Iie}`,pst=Symbol.for(Rie),Mie,i4=class extends Cr{constructor({text:e,cause:t}){super({name:Iie,message:`JSON parsing failed: Text: ${e}.
Error message: ${Ww(t)}`,cause:t}),this[Mie]=!0,this.text=e}static isInstance(e){return Cr.hasMarker(e,Rie)}};Mie=pst;var Die="AI_LoadAPIKeyError",Oie=`vercel.ai.error.${Die}`,mst=Symbol.for(Oie),Pie,p_=class extends Cr{constructor({message:e}){super({name:Die,message:e}),this[Pie]=!0}static isInstance(e){return Cr.hasMarker(e,Oie)}};Pie=mst;var Lie="AI_TooManyEmbeddingValuesForCallError",$ie=`vercel.ai.error.${Lie}`,gst=Symbol.for($ie),Fie,bst=class extends Cr{constructor(e){super({name:Lie,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[Fie]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Cr.hasMarker(e,$ie)}};Fie=gst;var Bie="AI_TypeValidationError",zie=`vercel.ai.error.${Bie}`,yst=Symbol.for(zie),jie,vst=class jI extends Cr{constructor({value:t,cause:n}){super({name:Bie,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Ww(n)}`,cause:n}),this[jie]=!0,this.value=t}static isInstance(t){return Cr.hasMarker(t,zie)}static wrap({value:t,cause:n}){return jI.isInstance(n)&&n.value===t?n:new jI({value:t,cause:n})}};jie=yst;var Xx=vst,Uie="AI_UnsupportedFunctionalityError",Hie=`vercel.ai.error.${Uie}`,xst=Symbol.for(Hie),Vie,j_=class extends Cr{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Uie,message:t}),this[Vie]=!0,this.functionality=e}static isInstance(e){return Cr.hasMarker(e,Hie)}};Vie=xst;class kH extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function jA(e){}function wst(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=jA,onError:n=jA,onRetry:r=jA,onComment:o}=e;let s="",i=!0,a,l="",c="";function u(v){const w=i?v.replace(/^\xEF\xBB\xBF/,""):v,[_,T]=Est(`${s}${w}`);for(const k of _)f(k);s=T,i=!1}function f(v){if(v===""){g();return}if(v.startsWith(":")){o&&o(v.slice(v.startsWith(": ")?2:1));return}const w=v.indexOf(":");if(w!==-1){const _=v.slice(0,w),T=v[w+1]===" "?2:1,k=v.slice(w+T);m(_,k,v);return}m(v,"",v)}function m(v,w,_){switch(v){case"event":c=w;break;case"data":l=`${l}${w}
`;break;case"id":a=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?r(parseInt(w,10)):n(new kH(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:_}));break;default:n(new kH(`Unknown field "${v.length>20?`${v.slice(0,20)}`:v}"`,{type:"unknown-field",field:v,value:w,line:_}));break}}function g(){l.length>0&&t({id:a,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",c=""}function y(v={}){s&&v.consume&&f(s),i=!0,a=void 0,l="",c="",s=""}return{feed:u,reset:y}}function Est(e){const t=[];let n="",r=0;for(;r<e.length;){const o=e.indexOf("\r",r),s=e.indexOf(`
`,r);let i=-1;if(o!==-1&&s!==-1?i=Math.min(o,s):o!==-1?o===e.length-1?i=-1:i=o:s!==-1&&(i=s),i===-1){n=e.slice(r);break}else{const a=e.slice(r,i);t.push(a),r=i+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class _st extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let o;super({start(s){o=wst({onEvent:i=>{s.enqueue(i)},onError(i){t==="terminate"?s.error(i):typeof t=="function"&&t(i)},onRetry:n,onComment:r})},transform(s){o.feed(s)}})}}const Sst=st("ZodISODateTime",(e,t)=>{TNe.init(e,t),Ds.init(e,t)});function Tst(e){return M6e(Sst,e)}const Cst=st("ZodISODate",(e,t)=>{CNe.init(e,t),Ds.init(e,t)});function kst(e){return D6e(Cst,e)}const Ast=st("ZodISOTime",(e,t)=>{kNe.init(e,t),Ds.init(e,t)});function Nst(e){return O6e(Ast,e)}const Ist=st("ZodISODuration",(e,t)=>{ANe.init(e,t),Ds.init(e,t)});function Rst(e){return P6e(Ist,e)}const Mst=(e,t)=>{U8.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>wAe(e,n)},flatten:{value:n=>xAe(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},n3=st("ZodError",Mst,{Parent:Error}),Dst=hJ(n3),Ost=pJ(n3),Pst=mJ(n3),qie=gJ(n3),fs=st("ZodType",(e,t)=>(qo.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>Om(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>Dst(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>Pst(e,n,r),e.parseAsync=async(n,r)=>Ost(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>qie(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(Dit(n,r)),e.superRefine=n=>e.check(Oit(n)),e.overwrite=n=>e.check(Aw(n)),e.optional=()=>IH(e),e.nullable=()=>RH(e),e.nullish=()=>IH(RH(e)),e.nonoptional=n=>_it(e,n),e.array=()=>Br(e),e.or=n=>Ua([e,n]),e.and=n=>hit(e,n),e.transform=n=>MH(e,bit(n)),e.default=n=>xit(e,n),e.prefault=n=>Eit(e,n),e.catch=n=>Tit(e,n),e.pipe=n=>MH(e,n),e.readonly=()=>Ait(e),e.describe=n=>{const r=e.clone();return hv.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){var n;return(n=hv.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return hv.get(e);const r=e.clone();return hv.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Gie=st("_ZodString",(e,t)=>{H8.init(e,t),fs.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(H6e(...r)),e.includes=(...r)=>e.check(G6e(...r)),e.startsWith=(...r)=>e.check(W6e(...r)),e.endsWith=(...r)=>e.check(Y6e(...r)),e.min=(...r)=>e.check(OS(...r)),e.max=(...r)=>e.check(kJ(...r)),e.length=(...r)=>e.check(AJ(...r)),e.nonempty=(...r)=>e.check(OS(1,...r)),e.lowercase=r=>e.check(V6e(r)),e.uppercase=r=>e.check(q6e(r)),e.trim=()=>e.check(Z6e()),e.normalize=(...r)=>e.check(K6e(...r)),e.toLowerCase=()=>e.check(J6e()),e.toUpperCase=()=>e.check(X6e())}),Lst=st("ZodString",(e,t)=>{H8.init(e,t),Gie.init(e,t),e.email=n=>e.check(d6e($st,n)),e.url=n=>e.check(g6e(Fst,n)),e.jwt=n=>e.check(R6e(Qst,n)),e.emoji=n=>e.check(b6e(Bst,n)),e.guid=n=>e.check(oF(AH,n)),e.uuid=n=>e.check(f6e(m_,n)),e.uuidv4=n=>e.check(h6e(m_,n)),e.uuidv6=n=>e.check(p6e(m_,n)),e.uuidv7=n=>e.check(m6e(m_,n)),e.nanoid=n=>e.check(y6e(zst,n)),e.guid=n=>e.check(oF(AH,n)),e.cuid=n=>e.check(v6e(jst,n)),e.cuid2=n=>e.check(x6e(Ust,n)),e.ulid=n=>e.check(w6e(Hst,n)),e.base64=n=>e.check(A6e(Zst,n)),e.base64url=n=>e.check(N6e(Jst,n)),e.xid=n=>e.check(E6e(Vst,n)),e.ksuid=n=>e.check(_6e(qst,n)),e.ipv4=n=>e.check(S6e(Gst,n)),e.ipv6=n=>e.check(T6e(Wst,n)),e.cidrv4=n=>e.check(C6e(Yst,n)),e.cidrv6=n=>e.check(k6e(Kst,n)),e.e164=n=>e.check(I6e(Xst,n)),e.datetime=n=>e.check(Tst(n)),e.date=n=>e.check(kst(n)),e.time=n=>e.check(Nst(n)),e.duration=n=>e.check(Rst(n))});function Ft(e){return u6e(Lst,e)}const Ds=st("ZodStringFormat",(e,t)=>{ys.init(e,t),Gie.init(e,t)}),$st=st("ZodEmail",(e,t)=>{gNe.init(e,t),Ds.init(e,t)}),AH=st("ZodGUID",(e,t)=>{pNe.init(e,t),Ds.init(e,t)}),m_=st("ZodUUID",(e,t)=>{mNe.init(e,t),Ds.init(e,t)}),Fst=st("ZodURL",(e,t)=>{bNe.init(e,t),Ds.init(e,t)}),Bst=st("ZodEmoji",(e,t)=>{yNe.init(e,t),Ds.init(e,t)}),zst=st("ZodNanoID",(e,t)=>{vNe.init(e,t),Ds.init(e,t)}),jst=st("ZodCUID",(e,t)=>{xNe.init(e,t),Ds.init(e,t)}),Ust=st("ZodCUID2",(e,t)=>{wNe.init(e,t),Ds.init(e,t)}),Hst=st("ZodULID",(e,t)=>{ENe.init(e,t),Ds.init(e,t)}),Vst=st("ZodXID",(e,t)=>{_Ne.init(e,t),Ds.init(e,t)}),qst=st("ZodKSUID",(e,t)=>{SNe.init(e,t),Ds.init(e,t)}),Gst=st("ZodIPv4",(e,t)=>{NNe.init(e,t),Ds.init(e,t)}),Wst=st("ZodIPv6",(e,t)=>{INe.init(e,t),Ds.init(e,t)}),Yst=st("ZodCIDRv4",(e,t)=>{RNe.init(e,t),Ds.init(e,t)}),Kst=st("ZodCIDRv6",(e,t)=>{MNe.init(e,t),Ds.init(e,t)}),Zst=st("ZodBase64",(e,t)=>{DNe.init(e,t),Ds.init(e,t)}),Jst=st("ZodBase64URL",(e,t)=>{PNe.init(e,t),Ds.init(e,t)}),Xst=st("ZodE164",(e,t)=>{LNe.init(e,t),Ds.init(e,t)}),Qst=st("ZodJWT",(e,t)=>{FNe.init(e,t),Ds.init(e,t)}),Wie=st("ZodNumber",(e,t)=>{SJ.init(e,t),fs.init(e,t),e.gt=(r,o)=>e.check(iF(r,o)),e.gte=(r,o)=>e.check(tk(r,o)),e.min=(r,o)=>e.check(tk(r,o)),e.lt=(r,o)=>e.check(sF(r,o)),e.lte=(r,o)=>e.check(ek(r,o)),e.max=(r,o)=>e.check(ek(r,o)),e.int=r=>e.check(NH(r)),e.safe=r=>e.check(NH(r)),e.positive=r=>e.check(iF(0,r)),e.nonnegative=r=>e.check(tk(0,r)),e.negative=r=>e.check(sF(0,r)),e.nonpositive=r=>e.check(ek(0,r)),e.multipleOf=(r,o)=>e.check(aF(r,o)),e.step=(r,o)=>e.check(aF(r,o)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Qo(e){return L6e(Wie,e)}const eit=st("ZodNumberFormat",(e,t)=>{BNe.init(e,t),Wie.init(e,t)});function NH(e){return $6e(eit,e)}const tit=st("ZodBoolean",(e,t)=>{zNe.init(e,t),fs.init(e,t)});function lm(e){return F6e(tit,e)}const nit=st("ZodNull",(e,t)=>{jNe.init(e,t),fs.init(e,t)});function rit(e){return B6e(nit,e)}const oit=st("ZodAny",(e,t)=>{UNe.init(e,t),fs.init(e,t)});function h0(){return z6e(oit)}const sit=st("ZodUnknown",(e,t)=>{HNe.init(e,t),fs.init(e,t)});function P0(){return j6e(sit)}const iit=st("ZodNever",(e,t)=>{VNe.init(e,t),fs.init(e,t)});function ait(e){return U6e(iit,e)}const lit=st("ZodArray",(e,t)=>{qNe.init(e,t),fs.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(OS(n,r)),e.nonempty=n=>e.check(OS(1,n)),e.max=(n,r)=>e.check(kJ(n,r)),e.length=(n,r)=>e.check(AJ(n,r)),e.unwrap=()=>e.element});function Br(e,t){return Q6e(lit,e,t)}const cit=st("ZodObject",(e,t)=>{GNe.init(e,t),fs.init(e,t),yo(e,"shape",()=>t.shape),e.keyof=()=>dl(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:P0()}),e.loose=()=>e.clone({...e._zod.def,catchall:P0()}),e.strict=()=>e.clone({...e._zod.def,catchall:ait()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>gAe(e,n),e.merge=n=>bAe(e,n),e.pick=n=>pAe(e,n),e.omit=n=>mAe(e,n),e.partial=(...n)=>yAe(Kie,e,n[0]),e.required=(...n)=>vAe(Zie,e,n[0])});function qt(e,t){const n={type:"object",get shape(){return z8(this,"shape",{...e}),this.shape},...kn(t)};return new cit(n)}const Yie=st("ZodUnion",(e,t)=>{TJ.init(e,t),fs.init(e,t),e.options=t.options});function Ua(e,t){return new Yie({type:"union",options:e,...kn(t)})}const uit=st("ZodDiscriminatedUnion",(e,t)=>{Yie.init(e,t),WNe.init(e,t)});function dit(e,t,n){return new uit({type:"union",options:t,discriminator:e,...kn(n)})}const fit=st("ZodIntersection",(e,t)=>{YNe.init(e,t),fs.init(e,t)});function hit(e,t){return new fit({type:"intersection",left:e,right:t})}const pit=st("ZodRecord",(e,t)=>{KNe.init(e,t),fs.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Sm(e,t,n){return new pit({type:"record",keyType:e,valueType:t,...kn(n)})}const UI=st("ZodEnum",(e,t)=>{ZNe.init(e,t),fs.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,o)=>{const s={};for(const i of r)if(n.has(i))s[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new UI({...t,checks:[],...kn(o),entries:s})},e.exclude=(r,o)=>{const s={...t.entries};for(const i of r)if(n.has(i))delete s[i];else throw new Error(`Key ${i} not found in enum`);return new UI({...t,checks:[],...kn(o),entries:s})}});function dl(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new UI({type:"enum",entries:n,...kn(t)})}const mit=st("ZodLiteral",(e,t)=>{JNe.init(e,t),fs.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function ti(e,t){return new mit({type:"literal",values:Array.isArray(e)?e:[e],...kn(t)})}const git=st("ZodTransform",(e,t)=>{XNe.init(e,t),fs.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=s=>{if(typeof s=="string")n.issues.push(Tx(s,n.value,t));else{const i=s;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!0),n.issues.push(Tx(i))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(s=>(n.value=s,n)):(n.value=o,n)}});function bit(e){return new git({type:"transform",transform:e})}const Kie=st("ZodOptional",(e,t)=>{QNe.init(e,t),fs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function IH(e){return new Kie({type:"optional",innerType:e})}const yit=st("ZodNullable",(e,t)=>{e6e.init(e,t),fs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function RH(e){return new yit({type:"nullable",innerType:e})}const vit=st("ZodDefault",(e,t)=>{t6e.init(e,t),fs.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function xit(e,t){return new vit({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const wit=st("ZodPrefault",(e,t)=>{n6e.init(e,t),fs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Eit(e,t){return new wit({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Zie=st("ZodNonOptional",(e,t)=>{r6e.init(e,t),fs.init(e,t),e.unwrap=()=>e._zod.def.innerType});function _it(e,t){return new Zie({type:"nonoptional",innerType:e,...kn(t)})}const Sit=st("ZodCatch",(e,t)=>{o6e.init(e,t),fs.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Tit(e,t){return new Sit({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Cit=st("ZodPipe",(e,t)=>{s6e.init(e,t),fs.init(e,t),e.in=t.in,e.out=t.out});function MH(e,t){return new Cit({type:"pipe",in:e,out:t})}const kit=st("ZodReadonly",(e,t)=>{i6e.init(e,t),fs.init(e,t)});function Ait(e){return new kit({type:"readonly",innerType:e})}const Nit=st("ZodLazy",(e,t)=>{a6e.init(e,t),fs.init(e,t),e.unwrap=()=>e._zod.def.getter()});function Iit(e){return new Nit({type:"lazy",getter:e})}const e9=st("ZodCustom",(e,t)=>{l6e.init(e,t),fs.init(e,t)});function Rit(e){const t=new vl({check:"custom"});return t._zod.check=e,t}function Mit(e,t){return eIe(e9,e??(()=>!0),t)}function Dit(e,t={}){return tIe(e9,e,t)}function Oit(e){const t=Rit(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Tx(r,n.value,t._zod.def));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(Tx(o))}},e(n.value,n)));return t}function a4(e,t={error:`Input not instance of ${e.name}`}){const n=new e9({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...kn(t)});return n._zod.bag.Class=e,n}var Jie={};function L0(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}async function Pit(e,t){if(e==null)return Promise.resolve();const n=t==null?void 0:t.abortSignal;return new Promise((r,o)=>{if(n!=null&&n.aborted){o(DH());return}const s=setTimeout(()=>{i(),r()},e),i=()=>{clearTimeout(s),n==null||n.removeEventListener("abort",a)},a=()=>{i(),o(DH())};n==null||n.addEventListener("abort",a)})}function DH(){return new DOMException("Delay was aborted","AbortError")}function Yw(e){return Object.fromEntries([...e.headers])}var Kw=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=()=>{const s=n.length,i=new Array(t);for(let a=0;a<t;a++)i[a]=n[Math.random()*s|0];return i.join("")};if(e==null)return o;if(n.includes(r))throw new Cie({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${o()}`},Xie=Kw();function Qie(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function pb(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var Lit=["fetch failed","failed to fetch"];function eae({error:e,url:t,requestBodyValues:n}){if(pb(e))return e;if(e instanceof TypeError&&Lit.includes(e.message.toLowerCase())){const r=e.cause;if(r!=null)return new Ba({message:`Cannot connect to API: ${r.message}`,cause:r,url:t,requestBodyValues:n,isRetryable:!0})}return e}function t9(e=globalThis){var t,n,r;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(r=(n=e.process)==null?void 0:n.versions)!=null&&r.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function $it(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((n,r)=>{t[r.toLowerCase()]=n});else{Array.isArray(e)||(e=Object.entries(e));for(const[n,r]of e)r!=null&&(t[n.toLowerCase()]=r)}return t}function jb(e,...t){const n=new Headers($it(e)),r=n.get("user-agent")||"";return n.set("user-agent",[r,...t].filter(Boolean).join(" ")),Object.fromEntries(n.entries())}var tae="3.0.18",Fit=()=>globalThis.fetch,OH=async({url:e,headers:t={},successfulResponseHandler:n,failedResponseHandler:r,abortSignal:o,fetch:s=Fit()})=>{try{const i=await s(e,{method:"GET",headers:jb(t,`ai-sdk/provider-utils/${tae}`,t9()),signal:o}),a=Yw(i);if(!i.ok){let l;try{l=await r({response:i,url:e,requestBodyValues:{}})}catch(c){throw pb(c)||Ba.isInstance(c)?c:new Ba({message:"Failed to process error response",cause:c,statusCode:i.status,url:e,responseHeaders:a,requestBodyValues:{}})}throw l.value}try{return await n({response:i,url:e,requestBodyValues:{}})}catch(l){throw l instanceof Error&&(pb(l)||Ba.isInstance(l))?l:new Ba({message:"Failed to process successful response",cause:l,statusCode:i.status,url:e,responseHeaders:a,requestBodyValues:{}})}}catch(i){throw eae({error:i,url:e,requestBodyValues:{}})}};function Bit({mediaType:e,url:t,supportedUrls:n}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(n).map(([r,o])=>{const s=r.toLowerCase();return s==="*"||s==="*/*"?{mediaTypePrefix:"",regexes:o}:{mediaTypePrefix:s.replace(/\*/,""),regexes:o}}).filter(({mediaTypePrefix:r})=>e.startsWith(r)).flatMap(({regexes:r})=>r).some(r=>r.test(t))}function zit({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new p_({message:`${r} API key must be a string.`});if(typeof process>"u")throw new p_({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=Jie[t],e==null)throw new p_({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new p_({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function U_({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=Jie[t],!(e==null||typeof e!="string")))return e}var jit=/"__proto__"\s*:/,Uit=/"constructor"\s*:/;function PH(e){const t=JSON.parse(e);return t===null||typeof t!="object"||jit.test(e)===!1&&Uit.test(e)===!1?t:Hit(t)}function Hit(e){let t=[e];for(;t.length;){const n=t;t=[];for(const r of n){if(Object.prototype.hasOwnProperty.call(r,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const o in r){const s=r[o];s&&typeof s=="object"&&t.push(s)}}}return e}function nae(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return PH(e)}try{return PH(e)}finally{Error.stackTraceLimit=t}}var l4=Symbol.for("vercel.ai.validator");function Vit(e){return{[l4]:!0,validate:e}}function qit(e){return typeof e=="object"&&e!==null&&l4 in e&&e[l4]===!0&&"validate"in e}function Ub(e){let t;return()=>(t==null&&(t=e()),t)}function Git(e){return qit(e)?e:typeof e=="function"?e():Wit(e)}function Wit(e){return Vit(async t=>{const n=await e["~standard"].validate(t);return n.issues==null?{success:!0,value:n.value}:{success:!1,error:new Xx({value:t,cause:n.issues})}})}async function Yit({value:e,schema:t}){const n=await Qf({value:e,schema:t});if(!n.success)throw Xx.wrap({value:e,cause:n.error});return n.value}async function Qf({value:e,schema:t}){const n=Git(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};const r=await n.validate(e);return r.success?{success:!0,value:r.value,rawValue:e}:{success:!1,error:Xx.wrap({value:e,cause:r.error}),rawValue:e}}catch(r){return{success:!1,error:Xx.wrap({value:e,cause:r}),rawValue:e}}}async function Kit({text:e,schema:t}){try{const n=nae(e);return t==null?n:Yit({value:n,schema:t})}catch(n){throw i4.isInstance(n)||Xx.isInstance(n)?n:new i4({text:e,cause:n})}}async function Tm({text:e,schema:t}){try{const n=nae(e);return t==null?{success:!0,value:n,rawValue:n}:await Qf({value:n,schema:t})}catch(n){return{success:!1,error:i4.isInstance(n)?n:new i4({text:e,cause:n}),rawValue:void 0}}}function Zit({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new _st).pipeThrough(new TransformStream({async transform({data:n},r){n!=="[DONE]"&&r.enqueue(await Tm({text:n,schema:t}))}}))}async function n9({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=await Qf({value:t[e],schema:n});if(!r.success)throw new Cie({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var Jit=()=>globalThis.fetch,eh=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:o,abortSignal:s,fetch:i})=>Xit({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:o,abortSignal:s,fetch:i}),Xit=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:o,abortSignal:s,fetch:i=Jit()})=>{try{const a=await i(e,{method:"POST",headers:jb(t,`ai-sdk/provider-utils/${tae}`,t9()),body:n.content,signal:s}),l=Yw(a);if(!a.ok){let c;try{c=await o({response:a,url:e,requestBodyValues:n.values})}catch(u){throw pb(u)||Ba.isInstance(u)?u:new Ba({message:"Failed to process error response",cause:u,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(pb(c)||Ba.isInstance(c))?c:new Ba({message:"Failed to process successful response",cause:c,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(a){throw eae({error:a,url:e,requestBodyValues:n.values})}};function r3({id:e,name:t,inputSchema:n}){return({execute:r,outputSchema:o,toModelOutput:s,onInputStart:i,onInputDelta:a,onInputAvailable:l,...c})=>({type:"provider-defined",id:e,name:t,args:c,inputSchema:n,outputSchema:o,execute:r,toModelOutput:s,onInputStart:i,onInputDelta:a,onInputAvailable:l})}function Qit({id:e,name:t,inputSchema:n,outputSchema:r}){return({execute:o,toModelOutput:s,onInputStart:i,onInputDelta:a,onInputAvailable:l,...c})=>({type:"provider-defined",id:e,name:t,args:c,inputSchema:n,outputSchema:r,execute:o,toModelOutput:s,onInputStart:i,onInputDelta:a,onInputAvailable:l})}async function ml(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Cm=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:o,requestBodyValues:s})=>{const i=await r.text(),a=Yw(r);if(i.trim()==="")return{responseHeaders:a,value:new Ba({message:r.statusText,url:o,requestBodyValues:s,statusCode:r.status,responseHeaders:a,responseBody:i,isRetryable:n==null?void 0:n(r)})};try{const l=await Kit({text:i,schema:e});return{responseHeaders:a,value:new Ba({message:t(l),url:o,requestBodyValues:s,statusCode:r.status,responseHeaders:a,responseBody:i,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:a,value:new Ba({message:r.statusText,url:o,requestBodyValues:s,statusCode:r.status,responseHeaders:a,responseBody:i,isRetryable:n==null?void 0:n(r)})}}},rae=e=>async({response:t})=>{const n=Yw(t);if(t.body==null)throw new dst({});return{responseHeaders:n,value:Zit({stream:t.body,schema:e})}},th=e=>async({response:t,url:n,requestBodyValues:r})=>{const o=await t.text(),s=await Tm({text:o,schema:e}),i=Yw(t);if(!s.success)throw new Ba({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:i,responseBody:o,url:n,requestBodyValues:r});return{responseHeaders:i,value:s.value,rawValue:s.rawValue}},eat=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},tat=Symbol("Let zodToJsonSchema decide on which parser to use"),LH={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},nat=e=>typeof e=="string"?{...LH,name:e}:{...LH,...e};function tc(){return{}}function rat(e,t){var n,r,o;const s={type:"array"};return(n=e.type)!=null&&n._def&&((o=(r=e.type)==null?void 0:r._def)==null?void 0:o.typeName)!==Bt.ZodAny&&(s.items=ko(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(s.minItems=e.minLength.value),e.maxLength&&(s.maxItems=e.maxLength.value),e.exactLength&&(s.minItems=e.exactLength.value,s.maxItems=e.exactLength.value),s}function oat(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function sat(){return{type:"boolean"}}function oae(e,t){return ko(e.type._def,t)}var iat=(e,t)=>ko(e.innerType._def,t);function sae(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((o,s)=>sae(e,t,o))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return aat(e)}}var aat=e=>{const t={type:"integer",format:"unix-time"};for(const n of e.checks)switch(n.kind){case"min":t.minimum=n.value;break;case"max":t.maximum=n.value;break}return t};function lat(e,t){return{...ko(e.innerType._def,t),default:e.defaultValue()}}function cat(e,t){return t.effectStrategy==="input"?ko(e.schema._def,t):tc()}function uat(e){return{type:"string",enum:Array.from(e.values)}}var dat=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function fat(e,t){const n=[ko(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),ko(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(o=>!!o),r=[];return n.forEach(o=>{if(dat(o))r.push(...o.allOf);else{let s=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:i,...a}=o;s=a}r.push(s)}}),r.length?{allOf:r}:void 0}function hat(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var UA=void 0,ru={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(UA===void 0&&(UA=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),UA),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function iae(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value;break;case"max":n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"email":switch(t.emailStrategy){case"format:email":ou(n,"email",r.message,t);break;case"format:idn-email":ou(n,"idn-email",r.message,t);break;case"pattern:zod":Da(n,ru.email,r.message,t);break}break;case"url":ou(n,"uri",r.message,t);break;case"uuid":ou(n,"uuid",r.message,t);break;case"regex":Da(n,r.regex,r.message,t);break;case"cuid":Da(n,ru.cuid,r.message,t);break;case"cuid2":Da(n,ru.cuid2,r.message,t);break;case"startsWith":Da(n,RegExp(`^${HA(r.value,t)}`),r.message,t);break;case"endsWith":Da(n,RegExp(`${HA(r.value,t)}$`),r.message,t);break;case"datetime":ou(n,"date-time",r.message,t);break;case"date":ou(n,"date",r.message,t);break;case"time":ou(n,"time",r.message,t);break;case"duration":ou(n,"duration",r.message,t);break;case"length":n.minLength=typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,n.maxLength=typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value;break;case"includes":{Da(n,RegExp(HA(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&ou(n,"ipv4",r.message,t),r.version!=="v4"&&ou(n,"ipv6",r.message,t);break}case"base64url":Da(n,ru.base64url,r.message,t);break;case"jwt":Da(n,ru.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&Da(n,ru.ipv4Cidr,r.message,t),r.version!=="v4"&&Da(n,ru.ipv6Cidr,r.message,t);break}case"emoji":Da(n,ru.emoji(),r.message,t);break;case"ulid":{Da(n,ru.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{ou(n,"binary",r.message,t);break}case"contentEncoding:base64":{n.contentEncoding="base64";break}case"pattern:zod":{Da(n,ru.base64,r.message,t);break}}break}case"nanoid":Da(n,ru.nanoid,r.message,t)}return n}function HA(e,t){return t.patternStrategy==="escape"?mat(e):e}var pat=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function mat(e){let t="";for(let n=0;n<e.length;n++)pat.has(e[n])||(t+="\\"),t+=e[n];return t}function ou(e,t,n,r){var o;e.format||(o=e.anyOf)!=null&&o.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):e.format=t}function Da(e,t,n,r){var o;e.pattern||(o=e.allOf)!=null&&o.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:$H(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):e.pattern=$H(t,r)}function $H(e,t){var n;if(!t.applyRegexFlags||!e.flags)return e.source;const r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},o=r.i?e.source.toLowerCase():e.source;let s="",i=!1,a=!1,l=!1;for(let c=0;c<o.length;c++){if(i){s+=o[c],i=!1;continue}if(r.i){if(a){if(o[c].match(/[a-z]/)){l?(s+=o[c],s+=`${o[c-2]}-${o[c]}`.toUpperCase(),l=!1):o[c+1]==="-"&&((n=o[c+2])!=null&&n.match(/[a-z]/))?(s+=o[c],l=!0):s+=`${o[c]}${o[c].toUpperCase()}`;continue}}else if(o[c].match(/[a-z]/)){s+=`[${o[c]}${o[c].toUpperCase()}]`;continue}}if(r.m){if(o[c]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(o[c]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&o[c]==="."){s+=a?`${o[c]}\r
`:`[${o[c]}\r
]`;continue}s+=o[c],o[c]==="\\"?i=!0:a&&o[c]==="]"?a=!1:!a&&o[c]==="["&&(a=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function aae(e,t){var n,r,o,s,i,a;const l={type:"object",additionalProperties:(n=ko(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?n:t.allowedAdditionalProperties};if(((r=e.keyType)==null?void 0:r._def.typeName)===Bt.ZodString&&((o=e.keyType._def.checks)!=null&&o.length)){const{type:c,...u}=iae(e.keyType._def,t);return{...l,propertyNames:u}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===Bt.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===Bt.ZodBranded&&e.keyType._def.type._def.typeName===Bt.ZodString&&((a=e.keyType._def.type._def.checks)!=null&&a.length)){const{type:c,...u}=oae(e.keyType._def,t);return{...l,propertyNames:u}}}return l}function gat(e,t){if(t.mapStrategy==="record")return aae(e,t);const n=ko(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||tc(),r=ko(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||tc();return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function bat(e){const t=e.values,r=Object.keys(e.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),o=Array.from(new Set(r.map(s=>typeof s)));return{type:o.length===1?o[0]==="string"?"string":"number":["string","number"],enum:r}}function yat(){return{not:tc()}}function vat(){return{type:"null"}}var HI={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function xat(e,t){const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in HI&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((o,s)=>{const i=HI[s._def.typeName];return i&&!o.includes(i)?[...o,i]:o},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((o,s)=>{const i=typeof s._def.value;switch(i){case"string":case"number":case"boolean":return[...o,i];case"bigint":return[...o,"integer"];case"object":if(s._def.value===null)return[...o,"null"];case"symbol":case"undefined":case"function":default:return o}},[]);if(r.length===n.length){const o=r.filter((s,i,a)=>a.indexOf(s)===i);return{type:o.length>1?o:o[0],enum:n.reduce((s,i)=>s.includes(i._def.value)?s:[...s,i._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,o)=>[...r,...o._def.values.filter(s=>!r.includes(s))],[])};return wat(e,t)}var wat=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,o)=>ko(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${o}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Eat(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[HI[e.innerType._def.typeName],"null"]};const n=ko(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function _at(e){const t={type:"number"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"int":t.type="integer";break;case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value;break}return t}function Sat(e,t){const n={type:"object",properties:{}},r=[],o=e.shape();for(const i in o){let a=o[i];if(a===void 0||a._def===void 0)continue;const l=Cat(a),c=ko(a._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});c!==void 0&&(n.properties[i]=c,l||r.push(i))}r.length&&(n.required=r);const s=Tat(e,t);return s!==void 0&&(n.additionalProperties=s),n}function Tat(e,t){if(e.catchall._def.typeName!=="ZodNever")return ko(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Cat(e){try{return e.isOptional()}catch{return!0}}var kat=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return ko(e.innerType._def,t);const r=ko(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:tc()},r]}:tc()},Aat=(e,t)=>{if(t.pipeStrategy==="input")return ko(e.in._def,t);if(t.pipeStrategy==="output")return ko(e.out._def,t);const n=ko(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=ko(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(o=>o!==void 0)}};function Nat(e,t){return ko(e.type._def,t)}function Iat(e,t){const r={type:"array",uniqueItems:!0,items:ko(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(r.minItems=e.minSize.value),e.maxSize&&(r.maxItems=e.maxSize.value),r}function Rat(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>ko(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:ko(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>ko(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Mat(){return{not:tc()}}function Dat(){return tc()}var Oat=(e,t)=>ko(e.innerType._def,t),Pat=(e,t,n)=>{switch(t){case Bt.ZodString:return iae(e,n);case Bt.ZodNumber:return _at(e);case Bt.ZodObject:return Sat(e,n);case Bt.ZodBigInt:return oat(e);case Bt.ZodBoolean:return sat();case Bt.ZodDate:return sae(e,n);case Bt.ZodUndefined:return Mat();case Bt.ZodNull:return vat();case Bt.ZodArray:return rat(e,n);case Bt.ZodUnion:case Bt.ZodDiscriminatedUnion:return xat(e,n);case Bt.ZodIntersection:return fat(e,n);case Bt.ZodTuple:return Rat(e,n);case Bt.ZodRecord:return aae(e,n);case Bt.ZodLiteral:return hat(e);case Bt.ZodEnum:return uat(e);case Bt.ZodNativeEnum:return bat(e);case Bt.ZodNullable:return Eat(e,n);case Bt.ZodOptional:return kat(e,n);case Bt.ZodMap:return gat(e,n);case Bt.ZodSet:return Iat(e,n);case Bt.ZodLazy:return()=>e.getter()._def;case Bt.ZodPromise:return Nat(e,n);case Bt.ZodNaN:case Bt.ZodNever:return yat();case Bt.ZodEffects:return cat(e,n);case Bt.ZodAny:return tc();case Bt.ZodUnknown:return Dat();case Bt.ZodDefault:return lat(e,n);case Bt.ZodBranded:return oae(e,n);case Bt.ZodReadonly:return Oat(e,n);case Bt.ZodCatch:return iat(e,n);case Bt.ZodPipeline:return Aat(e,n);case Bt.ZodFunction:case Bt.ZodVoid:case Bt.ZodSymbol:return;default:return(r=>{})()}};function ko(e,t,n=!1){var r;const o=t.seen.get(e);if(t.override){const l=(r=t.override)==null?void 0:r.call(t,e,t,o,n);if(l!==tat)return l}if(o&&!n){const l=Lat(o,t);if(l!==void 0)return l}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const i=Pat(e,e.typeName,t),a=typeof i=="function"?ko(i(),t):i;if(a&&$at(e,t,a),t.postProcess){const l=t.postProcess(a,e,t);return s.jsonSchema=a,l}return s.jsonSchema=a,a}var Lat=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:eat(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),tc()):t.$refStrategy==="seen"?tc():void 0}},$at=(e,t,n)=>(e.description&&(n.description=e.description),n),Fat=e=>{const t=nat(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,o])=>[o._def,{def:o._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}},Bat=(e,t)=>{var n;const r=Fat(t);let o=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((c,[u,f])=>{var m;return{...c,[u]:(m=ko(f._def,{...r,currentPath:[...r.basePath,r.definitionPath,u]},!0))!=null?m:tc()}},{}):void 0;const s=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=(n=ko(e._def,s===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1))!=null?n:tc(),a=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;a!==void 0&&(i.title=a);const l=s===void 0?o?{...i,[r.definitionPath]:o}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...o,[s]:i}};return l.$schema="http://json-schema.org/draft-07/schema#",l},zat=Bat;function jat(e,t){var n;const r=(n=void 0)!=null?n:!1;return r9(()=>zat(e,{$refStrategy:r?"root":"none"}),{validate:async o=>{const s=await e.safeParseAsync(o);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function Uat(e,t){var n;const r=(n=void 0)!=null?n:!1;return r9(()=>nIe(e,{target:"draft-7",io:"output",reused:r?"ref":"inline"}),{validate:async o=>{const s=await qie(e,o);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function Hat(e){return"_zod"in e}function Pi(e,t){return Hat(e)?Uat(e):jat(e)}var VI=Symbol.for("vercel.ai.schema");function zc(e){let t;return()=>(t==null&&(t=e()),t)}function r9(e,{validate:t}={}){return{[VI]:!0,_type:void 0,[l4]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function Vat(e){return typeof e=="object"&&e!==null&&VI in e&&e[VI]===!0&&"jsonSchema"in e&&"validate"in e}function o3(e){return e==null?r9({properties:{},additionalProperties:!1}):Vat(e)?e:typeof e=="function"?e():Pi(e)}var{btoa:qat,atob:Gat}=globalThis;function o9(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=Gat(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function c4(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return qat(t)}function FH(e){return e instanceof Uint8Array?c4(e):e}function lae(e){return e==null?void 0:e.replace(/\/$/,"")}function Wat(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}async function*Yat({execute:e,input:t,options:n}){const r=e(t,n);if(Wat(r)){let o;for await(const s of r)o=s,yield{type:"preliminary",output:s};yield{type:"final",output:o}}else yield{type:"final",output:await r}}var Kat="2.0.44",Zat=zc(()=>Pi(qt({error:qt({code:Qo().nullable(),message:Ft(),status:Ft()})}))),Qx=Cm({errorSchema:Zat,errorToMessage:e=>e.error.message}),Jat=zc(()=>Pi(qt({outputDimensionality:Qo().optional(),taskType:dl(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),Xat=class{constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){const o=await n9({provider:"google",providerOptions:r,schema:Jat});if(e.length>this.maxEmbeddingsPerCall)throw new bst({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const s=L0(await ml(this.config.headers),t);if(e.length===1){const{responseHeaders:c,value:u,rawValue:f}=await eh({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:s,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:o==null?void 0:o.outputDimensionality,taskType:o==null?void 0:o.taskType},failedResponseHandler:Qx,successfulResponseHandler:th(elt),abortSignal:n,fetch:this.config.fetch});return{embeddings:[u.embedding.values],usage:void 0,response:{headers:c,body:f}}}const{responseHeaders:i,value:a,rawValue:l}=await eh({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:s,body:{requests:e.map(c=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:c}]},outputDimensionality:o==null?void 0:o.outputDimensionality,taskType:o==null?void 0:o.taskType}))},failedResponseHandler:Qx,successfulResponseHandler:th(Qat),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.embeddings.map(c=>c.values),usage:void 0,response:{headers:i,body:l}}}},Qat=zc(()=>Pi(qt({embeddings:Br(qt({values:Br(Qo())}))}))),elt=zc(()=>Pi(qt({embedding:qt({values:Br(Qo())})})));function ad(e){if(e==null||tlt(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:o,items:s,allOf:i,anyOf:a,oneOf:l,format:c,const:u,minLength:f,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),u!==void 0&&(g.enum=[u]),t)if(Array.isArray(t)){const y=t.includes("null"),v=t.filter(w=>w!=="null");v.length===0?g.type="null":(g.anyOf=v.map(w=>({type:w})),y&&(g.nullable=!0))}else g.type=t;if(m!==void 0&&(g.enum=m),o!=null&&(g.properties=Object.entries(o).reduce((y,[v,w])=>(y[v]=ad(w),y),{})),s&&(g.items=Array.isArray(s)?s.map(ad):ad(s)),i&&(g.allOf=i.map(ad)),a)if(a.some(y=>typeof y=="object"&&(y==null?void 0:y.type)==="null")){const y=a.filter(v=>!(typeof v=="object"&&(v==null?void 0:v.type)==="null"));if(y.length===1){const v=ad(y[0]);typeof v=="object"&&(g.nullable=!0,Object.assign(g,v))}else g.anyOf=y.map(ad),g.nullable=!0}else g.anyOf=a.map(ad);return l&&(g.oneOf=l.map(ad)),f!==void 0&&(g.minLength=f),g}function tlt(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)&&!e.additionalProperties}function nlt(e,t){var n;const r=[],o=[];let s=!0;const i=(n=t==null?void 0:t.isGemmaModel)!=null?n:!1;for(const{role:a,content:l}of e)switch(a){case"system":{if(!s)throw new j_({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:l});break}case"user":{s=!1;const c=[];for(const u of l)switch(u.type){case"text":{c.push({text:u.text});break}case"file":{const f=u.mediaType==="image/*"?"image/jpeg":u.mediaType;c.push(u.data instanceof URL?{fileData:{mimeType:f,fileUri:u.data.toString()}}:{inlineData:{mimeType:f,data:FH(u.data)}});break}}o.push({role:"user",parts:c});break}case"assistant":{s=!1,o.push({role:"model",parts:l.map(c=>{var u,f,m;const g=((f=(u=c.providerOptions)==null?void 0:u.google)==null?void 0:f.thoughtSignature)!=null?String((m=c.providerOptions.google)==null?void 0:m.thoughtSignature):void 0;switch(c.type){case"text":return c.text.length===0?void 0:{text:c.text,thoughtSignature:g};case"reasoning":return c.text.length===0?void 0:{text:c.text,thought:!0,thoughtSignature:g};case"file":{if(c.mediaType!=="image/png")throw new j_({functionality:"Only PNG images are supported in assistant messages"});if(c.data instanceof URL)throw new j_({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:c.mediaType,data:FH(c.data)}}}case"tool-call":return{functionCall:{name:c.toolName,args:c.input},thoughtSignature:g}}}).filter(c=>c!==void 0)});break}case"tool":{s=!1;const c=[];for(const u of l){const f=u.output;if(f.type==="content")for(const m of f.value)switch(m.type){case"text":c.push({functionResponse:{name:u.toolName,response:{name:u.toolName,content:m.text}}});break;case"media":c.push({inlineData:{mimeType:m.mediaType,data:m.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:c.push({text:JSON.stringify(m)});break}else c.push({functionResponse:{name:u.toolName,response:{name:u.toolName,content:f.value}}})}o.push({role:"user",parts:c});break}}if(i&&r.length>0&&o.length>0&&o[0].role==="user"){const a=r.map(l=>l.text).join(`

`);o[0].parts.unshift({text:a+`

`})}return{systemInstruction:r.length>0&&!i?{parts:r}:void 0,contents:o}}function BH(e){return e.includes("/")?e:`models/${e}`}var rlt=zc(()=>Pi(qt({responseModalities:Br(dl(["TEXT","IMAGE"])).optional(),thinkingConfig:qt({thinkingBudget:Qo().optional(),includeThoughts:lm().optional(),thinkingLevel:dl(["low","medium","high"]).optional()}).optional(),cachedContent:Ft().optional(),structuredOutputs:lm().optional(),safetySettings:Br(qt({category:dl(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:dl(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:dl(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:lm().optional(),labels:Sm(Ft(),Ft()).optional(),mediaResolution:dl(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:qt({aspectRatio:dl(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:dl(["1K","2K","4K"]).optional()}).optional()})));function olt({tools:e,toolChoice:t,modelId:n}){var r;e=e!=null&&e.length?e:void 0;const o=[],s=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(g=>g===n),i=n.includes("gemini-2")||n.includes("gemini-3")||s,a=n.includes("gemini-1.5-flash")&&!n.includes("-8b"),l=n.includes("gemini-2.5");if(e==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const c=e.some(g=>g.type==="function"),u=e.some(g=>g.type==="provider-defined");if(c&&u){const g=e.filter(y=>y.type==="function");o.push({type:"unsupported-tool",tool:e.find(y=>y.type==="function"),details:`Cannot mix function tools with provider-defined tools in the same request. Falling back to provider-defined tools only. The following function tools will be ignored: ${g.map(y=>y.name).join(", ")}. Please use either function tools or provider-defined tools, but not both.`})}if(u){const g=[];return e.filter(v=>v.type==="provider-defined").forEach(v=>{switch(v.id){case"google.google_search":i?g.push({googleSearch:{}}):a?g.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:v.args.mode,dynamicThreshold:v.args.dynamicThreshold}}}):g.push({googleSearchRetrieval:{}});break;case"google.url_context":i?g.push({urlContext:{}}):o.push({type:"unsupported-tool",tool:v,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":i?g.push({codeExecution:{}}):o.push({type:"unsupported-tool",tool:v,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":l?g.push({fileSearch:{...v.args}}):o.push({type:"unsupported-tool",tool:v,details:"The file search tool is only supported with Gemini 2.5 models."});break;case"google.vertex_rag_store":i?g.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:v.args.ragCorpus},similarity_top_k:v.args.topK}}}):o.push({type:"unsupported-tool",tool:v,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;default:o.push({type:"unsupported-tool",tool:v});break}}),{tools:g.length>0?g:void 0,toolConfig:void 0,toolWarnings:o}}const f=[];for(const g of e)switch(g.type){case"function":f.push({name:g.name,description:(r=g.description)!=null?r:"",parameters:ad(g.inputSchema)});break;default:o.push({type:"unsupported-tool",tool:g});break}if(t==null)return{tools:[{functionDeclarations:f}],toolConfig:void 0,toolWarnings:o};const m=t.type;switch(m){case"auto":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:[{functionDeclarations:f}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:o};default:{const g=m;throw new j_({functionality:`tool choice type: ${g}`})}}}function zH({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var slt=class{constructor(e,t){this.specificationVersion="v2";var n;this.modelId=e,this.config=t,this.generateId=(n=t.generateId)!=null?n:Xie}get provider(){return this.config.provider}get supportedUrls(){var e,t,n;return(n=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?n:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:n,topP:r,topK:o,frequencyPenalty:s,presencePenalty:i,stopSequences:a,responseFormat:l,seed:c,tools:u,toolChoice:f,providerOptions:m}){var g;const y=[],v=await n9({provider:"google",providerOptions:m,schema:rlt});u!=null&&u.some(I=>I.type==="provider-defined"&&I.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&y.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const w=this.modelId.toLowerCase().startsWith("gemma-"),{contents:_,systemInstruction:T}=nlt(e,{isGemmaModel:w}),{tools:k,toolConfig:M,toolWarnings:D}=olt({tools:u,toolChoice:f,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:t,temperature:n,topK:o,topP:r,frequencyPenalty:s,presencePenalty:i,stopSequences:a,seed:c,responseMimeType:(l==null?void 0:l.type)==="json"?"application/json":void 0,responseSchema:(l==null?void 0:l.type)==="json"&&l.schema!=null&&((g=v==null?void 0:v.structuredOutputs)==null||g)?ad(l.schema):void 0,...(v==null?void 0:v.audioTimestamp)&&{audioTimestamp:v.audioTimestamp},responseModalities:v==null?void 0:v.responseModalities,thinkingConfig:v==null?void 0:v.thinkingConfig,...(v==null?void 0:v.imageConfig)&&{imageConfig:v.imageConfig},...(v==null?void 0:v.mediaResolution)&&{mediaResolution:v.mediaResolution}},contents:_,systemInstruction:w?void 0:T,safetySettings:v==null?void 0:v.safetySettings,tools:k,toolConfig:M,cachedContent:v==null?void 0:v.cachedContent,labels:v==null?void 0:v.labels},warnings:[...y,...D]}}async doGenerate(e){var t,n,r,o,s,i,a,l,c,u,f,m,g;const{args:y,warnings:v}=await this.getArgs(e),w=JSON.stringify(y),_=L0(await ml(this.config.headers),e.headers),{responseHeaders:T,value:k,rawValue:M}=await eh({url:`${this.config.baseURL}/${BH(this.modelId)}:generateContent`,headers:_,body:y,failedResponseHandler:Qx,successfulResponseHandler:th(alt),abortSignal:e.abortSignal,fetch:this.config.fetch}),D=k.candidates[0],I=[],P=(n=(t=D.content)==null?void 0:t.parts)!=null?n:[],B=k.usageMetadata;let U;for(const H of P)if("executableCode"in H&&((r=H.executableCode)!=null&&r.code)){const q=this.config.generateId();U=q,I.push({type:"tool-call",toolCallId:q,toolName:"code_execution",input:JSON.stringify(H.executableCode),providerExecuted:!0})}else"codeExecutionResult"in H&&H.codeExecutionResult?(I.push({type:"tool-result",toolCallId:U,toolName:"code_execution",result:{outcome:H.codeExecutionResult.outcome,output:H.codeExecutionResult.output},providerExecuted:!0}),U=void 0):"text"in H&&H.text!=null&&H.text.length>0?I.push({type:H.thought===!0?"reasoning":"text",text:H.text,providerMetadata:H.thoughtSignature?{google:{thoughtSignature:H.thoughtSignature}}:void 0}):"functionCall"in H?I.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:H.functionCall.name,input:JSON.stringify(H.functionCall.args),providerMetadata:H.thoughtSignature?{google:{thoughtSignature:H.thoughtSignature}}:void 0}):"inlineData"in H&&I.push({type:"file",data:H.inlineData.data,mediaType:H.inlineData.mimeType});const j=(o=jH({groundingMetadata:D.groundingMetadata,generateId:this.config.generateId}))!=null?o:[];for(const H of j)I.push(H);return{content:I,finishReason:zH({finishReason:D.finishReason,hasToolCalls:I.some(H=>H.type==="tool-call")}),usage:{inputTokens:(s=B==null?void 0:B.promptTokenCount)!=null?s:void 0,outputTokens:(i=B==null?void 0:B.candidatesTokenCount)!=null?i:void 0,totalTokens:(a=B==null?void 0:B.totalTokenCount)!=null?a:void 0,reasoningTokens:(l=B==null?void 0:B.thoughtsTokenCount)!=null?l:void 0,cachedInputTokens:(c=B==null?void 0:B.cachedContentTokenCount)!=null?c:void 0},warnings:v,providerMetadata:{google:{promptFeedback:(u=k.promptFeedback)!=null?u:null,groundingMetadata:(f=D.groundingMetadata)!=null?f:null,urlContextMetadata:(m=D.urlContextMetadata)!=null?m:null,safetyRatings:(g=D.safetyRatings)!=null?g:null,usageMetadata:B??null}},request:{body:w},response:{headers:T,body:M}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),o=L0(await ml(this.config.headers),e.headers),{responseHeaders:s,value:i}=await eh({url:`${this.config.baseURL}/${BH(this.modelId)}:streamGenerateContent?alt=sse`,headers:o,body:t,failedResponseHandler:Qx,successfulResponseHandler:rae(llt),abortSignal:e.abortSignal,fetch:this.config.fetch});let a="unknown";const l={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let c;const u=this.config.generateId;let f=!1,m=null,g=null,y=0;const v=new Set;let w;return{stream:i.pipeThrough(new TransformStream({start(_){_.enqueue({type:"stream-start",warnings:n})},transform(_,T){var k,M,D,I,P,B,U,j,H,q,z,Z;if(e.includeRawChunks&&T.enqueue({type:"raw",rawValue:_.rawValue}),!_.success){T.enqueue({type:"error",error:_.error});return}const X=_.value,J=X.usageMetadata;J!=null&&(l.inputTokens=(k=J.promptTokenCount)!=null?k:void 0,l.outputTokens=(M=J.candidatesTokenCount)!=null?M:void 0,l.totalTokens=(D=J.totalTokenCount)!=null?D:void 0,l.reasoningTokens=(I=J.thoughtsTokenCount)!=null?I:void 0,l.cachedInputTokens=(P=J.cachedContentTokenCount)!=null?P:void 0);const ee=(B=X.candidates)==null?void 0:B[0];if(ee==null)return;const re=ee.content,ie=jH({groundingMetadata:ee.groundingMetadata,generateId:u});if(ie!=null)for(const K of ie)K.sourceType==="url"&&!v.has(K.url)&&(v.add(K.url),T.enqueue(K));if(re!=null){const K=(U=re.parts)!=null?U:[];for(const se of K)if("executableCode"in se&&((j=se.executableCode)!=null&&j.code)){const Q=u();w=Q,T.enqueue({type:"tool-call",toolCallId:Q,toolName:"code_execution",input:JSON.stringify(se.executableCode),providerExecuted:!0}),f=!0}else if("codeExecutionResult"in se&&se.codeExecutionResult){const Q=w;Q&&(T.enqueue({type:"tool-result",toolCallId:Q,toolName:"code_execution",result:{outcome:se.codeExecutionResult.outcome,output:se.codeExecutionResult.output},providerExecuted:!0}),w=void 0)}else"text"in se&&se.text!=null&&se.text.length>0?se.thought===!0?(m!==null&&(T.enqueue({type:"text-end",id:m}),m=null),g===null&&(g=String(y++),T.enqueue({type:"reasoning-start",id:g,providerMetadata:se.thoughtSignature?{google:{thoughtSignature:se.thoughtSignature}}:void 0})),T.enqueue({type:"reasoning-delta",id:g,delta:se.text,providerMetadata:se.thoughtSignature?{google:{thoughtSignature:se.thoughtSignature}}:void 0})):(g!==null&&(T.enqueue({type:"reasoning-end",id:g}),g=null),m===null&&(m=String(y++),T.enqueue({type:"text-start",id:m,providerMetadata:se.thoughtSignature?{google:{thoughtSignature:se.thoughtSignature}}:void 0})),T.enqueue({type:"text-delta",id:m,delta:se.text,providerMetadata:se.thoughtSignature?{google:{thoughtSignature:se.thoughtSignature}}:void 0})):"inlineData"in se&&T.enqueue({type:"file",mediaType:se.inlineData.mimeType,data:se.inlineData.data});const te=ilt({parts:re.parts,generateId:u});if(te!=null)for(const se of te)T.enqueue({type:"tool-input-start",id:se.toolCallId,toolName:se.toolName,providerMetadata:se.providerMetadata}),T.enqueue({type:"tool-input-delta",id:se.toolCallId,delta:se.args,providerMetadata:se.providerMetadata}),T.enqueue({type:"tool-input-end",id:se.toolCallId,providerMetadata:se.providerMetadata}),T.enqueue({type:"tool-call",toolCallId:se.toolCallId,toolName:se.toolName,input:se.args,providerMetadata:se.providerMetadata}),f=!0}ee.finishReason!=null&&(a=zH({finishReason:ee.finishReason,hasToolCalls:f}),c={google:{promptFeedback:(H=X.promptFeedback)!=null?H:null,groundingMetadata:(q=ee.groundingMetadata)!=null?q:null,urlContextMetadata:(z=ee.urlContextMetadata)!=null?z:null,safetyRatings:(Z=ee.safetyRatings)!=null?Z:null}},J!=null&&(c.google.usageMetadata=J))},flush(_){m!==null&&_.enqueue({type:"text-end",id:m}),g!==null&&_.enqueue({type:"reasoning-end",id:g}),_.enqueue({type:"finish",finishReason:a,usage:l,providerMetadata:c})}})),response:{headers:s},request:{body:r}}}};function ilt({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({type:"tool-call",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args),providerMetadata:r.thoughtSignature?{google:{thoughtSignature:r.thoughtSignature}}:void 0}))}function jH({groundingMetadata:e,generateId:t}){var n,r,o,s;if(!(e!=null&&e.groundingChunks))return;const i=[];for(const a of e.groundingChunks)if(a.web!=null)i.push({type:"source",sourceType:"url",id:t(),url:a.web.uri,title:(n=a.web.title)!=null?n:void 0});else if(a.retrievedContext!=null){const l=a.retrievedContext.uri,c=a.retrievedContext.fileSearchStore;if(l&&(l.startsWith("http://")||l.startsWith("https://")))i.push({type:"source",sourceType:"url",id:t(),url:l,title:(r=a.retrievedContext.title)!=null?r:void 0});else if(l){const u=(o=a.retrievedContext.title)!=null?o:"Unknown Document";let f="application/octet-stream",m;l.endsWith(".pdf")?(f="application/pdf",m=l.split("/").pop()):l.endsWith(".txt")?(f="text/plain",m=l.split("/").pop()):l.endsWith(".docx")?(f="application/vnd.openxmlformats-officedocument.wordprocessingml.document",m=l.split("/").pop()):l.endsWith(".doc")?(f="application/msword",m=l.split("/").pop()):(l.match(/\.(md|markdown)$/)&&(f="text/markdown"),m=l.split("/").pop()),i.push({type:"source",sourceType:"document",id:t(),mediaType:f,title:u,filename:m})}else if(c){const u=(s=a.retrievedContext.title)!=null?s:"Unknown Document";i.push({type:"source",sourceType:"document",id:t(),mediaType:"application/octet-stream",title:u,filename:c.split("/").pop()})}}return i.length>0?i:void 0}var cae=()=>qt({webSearchQueries:Br(Ft()).nullish(),retrievalQueries:Br(Ft()).nullish(),searchEntryPoint:qt({renderedContent:Ft()}).nullish(),groundingChunks:Br(qt({web:qt({uri:Ft(),title:Ft().nullish()}).nullish(),retrievedContext:qt({uri:Ft().nullish(),title:Ft().nullish(),text:Ft().nullish(),fileSearchStore:Ft().nullish()}).nullish()})).nullish(),groundingSupports:Br(qt({segment:qt({startIndex:Qo().nullish(),endIndex:Qo().nullish(),text:Ft().nullish()}),segment_text:Ft().nullish(),groundingChunkIndices:Br(Qo()).nullish(),supportChunkIndices:Br(Qo()).nullish(),confidenceScores:Br(Qo()).nullish(),confidenceScore:Br(Qo()).nullish()})).nullish(),retrievalMetadata:Ua([qt({webDynamicRetrievalScore:Qo()}),qt({})]).nullish()}),uae=()=>qt({parts:Br(Ua([qt({functionCall:qt({name:Ft(),args:P0()}),thoughtSignature:Ft().nullish()}),qt({inlineData:qt({mimeType:Ft(),data:Ft()})}),qt({executableCode:qt({language:Ft(),code:Ft()}).nullish(),codeExecutionResult:qt({outcome:Ft(),output:Ft()}).nullish(),text:Ft().nullish(),thought:lm().nullish(),thoughtSignature:Ft().nullish()})])).nullish()}),u4=()=>qt({category:Ft().nullish(),probability:Ft().nullish(),probabilityScore:Qo().nullish(),severity:Ft().nullish(),severityScore:Qo().nullish(),blocked:lm().nullish()}),dae=qt({cachedContentTokenCount:Qo().nullish(),thoughtsTokenCount:Qo().nullish(),promptTokenCount:Qo().nullish(),candidatesTokenCount:Qo().nullish(),totalTokenCount:Qo().nullish(),trafficType:Ft().nullish()}),fae=()=>qt({urlMetadata:Br(qt({retrievedUrl:Ft(),urlRetrievalStatus:Ft()}))}),alt=zc(()=>Pi(qt({candidates:Br(qt({content:uae().nullish().or(qt({}).strict()),finishReason:Ft().nullish(),safetyRatings:Br(u4()).nullish(),groundingMetadata:cae().nullish(),urlContextMetadata:fae().nullish()})),usageMetadata:dae.nullish(),promptFeedback:qt({blockReason:Ft().nullish(),safetyRatings:Br(u4()).nullish()}).nullish()}))),llt=zc(()=>Pi(qt({candidates:Br(qt({content:uae().nullish(),finishReason:Ft().nullish(),safetyRatings:Br(u4()).nullish(),groundingMetadata:cae().nullish(),urlContextMetadata:fae().nullish()})).nullish(),usageMetadata:dae.nullish(),promptFeedback:qt({blockReason:Ft().nullish(),safetyRatings:Br(u4()).nullish()}).nullish()}))),clt=Qit({id:"google.code_execution",name:"code_execution",inputSchema:qt({language:Ft().describe("The programming language of the code."),code:Ft().describe("The code to be executed.")}),outputSchema:qt({outcome:Ft().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:Ft().describe("The output from the code execution.")})}),ult=qt({fileSearchStoreNames:Br(Ft()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:Qo().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:Ft().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),dlt=zc(()=>Pi(ult)),flt=r3({id:"google.file_search",name:"file_search",inputSchema:dlt}),hlt=r3({id:"google.google_search",name:"google_search",inputSchema:zc(()=>Pi(qt({mode:dl(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:Qo().default(1)})))}),plt=r3({id:"google.url_context",name:"url_context",inputSchema:zc(()=>Pi(qt({})))}),mlt=r3({id:"google.vertex_rag_store",name:"vertex_rag_store",inputSchema:qt({ragCorpus:Ft(),topK:Qo().optional()})}),glt={googleSearch:hlt,urlContext:plt,fileSearch:flt,codeExecution:clt,vertexRagStore:mlt},blt=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:4}get provider(){return this.config.provider}async doGenerate(e){var t,n,r;const{prompt:o,n:s=1,size:i="1024x1024",aspectRatio:a="1:1",seed:l,providerOptions:c,headers:u,abortSignal:f}=e,m=[];i!=null&&m.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),l!=null&&m.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});const g=await n9({provider:"google",providerOptions:c,schema:vlt}),y=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,v={sampleCount:s};a!=null&&(v.aspectRatio=a),g&&Object.assign(v,g);const w={instances:[{prompt:o}],parameters:v},{responseHeaders:_,value:T}=await eh({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:L0(await ml(this.config.headers),u),body:w,failedResponseHandler:Qx,successfulResponseHandler:th(ylt),abortSignal:f,fetch:this.config.fetch});return{images:T.predictions.map(k=>k.bytesBase64Encoded),warnings:m??[],providerMetadata:{google:{images:T.predictions.map(k=>({}))}},response:{timestamp:y,modelId:this.modelId,headers:_}}}},ylt=zc(()=>Pi(qt({predictions:Br(qt({bytesBase64Encoded:Ft()})).default([])}))),vlt=zc(()=>Pi(qt({personGeneration:dl(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:dl(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function hae(e={}){var t,n;const r=(t=lae(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",o=(n=e.name)!=null?n:"google.generative-ai",s=()=>jb({"x-goog-api-key":zit({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},`ai-sdk/google/${Kat}`),i=u=>{var f;return new slt(u,{provider:o,baseURL:r,headers:s,generateId:(f=e.generateId)!=null?f:Xie,supportedUrls:()=>({"*":[new RegExp(`^${r}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},a=u=>new Xat(u,{provider:o,baseURL:r,headers:s,fetch:e.fetch}),l=(u,f={})=>new blt(u,f,{provider:o,baseURL:r,headers:s,fetch:e.fetch}),c=function(u){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return i(u)};return c.languageModel=i,c.chat=i,c.generativeAI=i,c.embedding=a,c.textEmbedding=a,c.textEmbeddingModel=a,c.image=l,c.imageModel=l,c.tools=glt,c}hae();var VA,UH;function xlt(){if(UH)return VA;UH=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o=(u,f)=>{for(var m in f)e(u,m,{get:f[m],enumerable:!0})},s=(u,f,m,g)=>{if(f&&typeof f=="object"||typeof f=="function")for(let y of n(f))!r.call(u,y)&&y!==m&&e(u,y,{get:()=>f[y],enumerable:!(g=t(f,y))||g.enumerable});return u},i=u=>s(e({},"__esModule",{value:!0}),u),a={};o(a,{SYMBOL_FOR_REQ_CONTEXT:()=>l,getContext:()=>c}),VA=i(a);const l=Symbol.for("@vercel/request-context");function c(){var f,m;return((m=(f=globalThis[l])==null?void 0:f.get)==null?void 0:m.call(f))??{}}return VA}var qA,HH;function wlt(){if(HH)return qA;HH=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o=(f,m)=>{for(var g in m)e(f,g,{get:m[g],enumerable:!0})},s=(f,m,g,y)=>{if(m&&typeof m=="object"||typeof m=="function")for(let v of n(m))!r.call(f,v)&&v!==g&&e(f,v,{get:()=>m[v],enumerable:!(y=t(m,v))||y.enumerable});return f},i=f=>s(e({},"__esModule",{value:!0}),f),a={};o(a,{getContext:()=>l.getContext,getVercelOidcToken:()=>c,getVercelOidcTokenSync:()=>u}),qA=i(a);var l=xlt();async function c(){return""}function u(){return""}return qA}var pae=wlt(),Elt="vercel.ai.gateway.error",GA=Symbol.for(Elt),VH,qH,nc=class mae extends(qH=Error,VH=GA,qH){constructor({message:t,statusCode:n=500,cause:r}){super(t),this[VH]=!0,this.statusCode=n,this.cause=r}static isInstance(t){return mae.hasMarker(t)}static hasMarker(t){return typeof t=="object"&&t!==null&&GA in t&&t[GA]===!0}},gae="GatewayAuthenticationError",_lt=`vercel.ai.gateway.error.${gae}`,GH=Symbol.for(_lt),WH,YH,s9=class bae extends(YH=nc,WH=GH,YH){constructor({message:t="Authentication failed",statusCode:n=401,cause:r}={}){super({message:t,statusCode:n,cause:r}),this[WH]=!0,this.name=gae,this.type="authentication_error"}static isInstance(t){return nc.hasMarker(t)&&GH in t}static createContextualError({apiKeyProvided:t,oidcTokenProvided:n,message:r="Authentication failed",statusCode:o=401,cause:s}){let i;return t?i=`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:n?i=`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:i=`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,new bae({message:i,statusCode:o,cause:s})}},yae="GatewayInvalidRequestError",Slt=`vercel.ai.gateway.error.${yae}`,KH=Symbol.for(Slt),ZH,JH,Tlt=class extends(JH=nc,ZH=KH,JH){constructor({message:e="Invalid request",statusCode:t=400,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[ZH]=!0,this.name=yae,this.type="invalid_request_error"}static isInstance(e){return nc.hasMarker(e)&&KH in e}},vae="GatewayRateLimitError",Clt=`vercel.ai.gateway.error.${vae}`,XH=Symbol.for(Clt),QH,eV,klt=class extends(eV=nc,QH=XH,eV){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[QH]=!0,this.name=vae,this.type="rate_limit_exceeded"}static isInstance(e){return nc.hasMarker(e)&&XH in e}},xae="GatewayModelNotFoundError",Alt=`vercel.ai.gateway.error.${xae}`,tV=Symbol.for(Alt),Nlt=Ub(()=>Pi(qt({modelId:Ft()}))),nV,rV,wae=class extends(rV=nc,nV=tV,rV){constructor({message:e="Model not found",statusCode:t=404,modelId:n,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[nV]=!0,this.name=xae,this.type="model_not_found",this.modelId=n}static isInstance(e){return nc.hasMarker(e)&&tV in e}},Eae="GatewayInternalServerError",Ilt=`vercel.ai.gateway.error.${Eae}`,oV=Symbol.for(Ilt),sV,iV,aV=class extends(iV=nc,sV=oV,iV){constructor({message:e="Internal server error",statusCode:t=500,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[sV]=!0,this.name=Eae,this.type="internal_server_error"}static isInstance(e){return nc.hasMarker(e)&&oV in e}},_ae="GatewayResponseError",Rlt=`vercel.ai.gateway.error.${_ae}`,lV=Symbol.for(Rlt),cV,uV,Mlt=class extends(uV=nc,cV=lV,uV){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:n,validationError:r,cause:o}={}){super({message:e,statusCode:t,cause:o}),this[cV]=!0,this.name=_ae,this.type="response_error",this.response=n,this.validationError=r}static isInstance(e){return nc.hasMarker(e)&&lV in e}};async function dV({response:e,statusCode:t,defaultMessage:n="Gateway request failed",cause:r,authMethod:o}){const s=await Qf({value:e,schema:Dlt});if(!s.success)return new Mlt({message:`Invalid error response format: ${n}`,statusCode:t,response:e,validationError:s.error,cause:r});const i=s.value,a=i.error.type,l=i.error.message;switch(a){case"authentication_error":return s9.createContextualError({apiKeyProvided:o==="api-key",oidcTokenProvided:o==="oidc",statusCode:t,cause:r});case"invalid_request_error":return new Tlt({message:l,statusCode:t,cause:r});case"rate_limit_exceeded":return new klt({message:l,statusCode:t,cause:r});case"model_not_found":{const c=await Qf({value:i.error.param,schema:Nlt});return new wae({message:l,statusCode:t,modelId:c.success?c.value.modelId:void 0,cause:r})}case"internal_server_error":return new aV({message:l,statusCode:t,cause:r});default:return new aV({message:l,statusCode:t,cause:r})}}var Dlt=Ub(()=>Pi(qt({error:qt({message:Ft(),type:Ft().nullish(),param:P0().nullish(),code:Ua([Ft(),Qo()]).nullish()})})));function $0(e,t){var n;return nc.isInstance(e)?e:Ba.isInstance(e)?dV({response:Olt(e),statusCode:(n=e.statusCode)!=null?n:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):dV({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}function Olt(e){if(e.data!==void 0)return e.data;if(e.responseBody!=null)try{return JSON.parse(e.responseBody)}catch{return e.responseBody}return{}}var Sae="ai-gateway-auth-method";async function mb(e){const t=await Qf({value:e[Sae],schema:Plt});return t.success?t.value:void 0}var Plt=Ub(()=>Pi(Ua([ti("api-key"),ti("oidc")]))),fV=class{constructor(e){this.config=e}async getAvailableModels(){try{const{value:e}=await OH({url:`${this.config.baseURL}/config`,headers:await ml(this.config.headers()),successfulResponseHandler:th(Llt),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:t=>t}),fetch:this.config.fetch});return e}catch(e){throw await $0(e)}}async getCredits(){try{const e=new URL(this.config.baseURL),{value:t}=await OH({url:`${e.origin}/v1/credits`,headers:await ml(this.config.headers()),successfulResponseHandler:th($lt),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:n=>n}),fetch:this.config.fetch});return t}catch(e){throw await $0(e)}}},Llt=Ub(()=>Pi(qt({models:Br(qt({id:Ft(),name:Ft(),description:Ft().nullish(),pricing:qt({input:Ft(),output:Ft(),input_cache_read:Ft().nullish(),input_cache_write:Ft().nullish()}).transform(({input:e,output:t,input_cache_read:n,input_cache_write:r})=>({input:e,output:t,...n?{cachedInputTokens:n}:{},...r?{cacheCreationInputTokens:r}:{}})).nullish(),specification:qt({specificationVersion:ti("v2"),provider:Ft(),modelId:Ft()}),modelType:dl(["language","embedding","image"]).nullish()}))}))),$lt=Ub(()=>Pi(qt({balance:Ft(),total_used:Ft()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),Flt=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){const{abortSignal:t,...n}=e;return{args:this.maybeEncodeFileParts(n),warnings:[]}}async doGenerate(e){const{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,o=await ml(this.config.headers());try{const{responseHeaders:s,value:i,rawValue:a}=await eh({url:this.getUrl(),headers:L0(o,e.headers,this.getModelConfigHeaders(this.modelId,!1),await ml(this.config.o11yHeaders)),body:t,successfulResponseHandler:th(h0()),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:l=>l}),...r&&{abortSignal:r},fetch:this.config.fetch});return{...i,request:{body:t},response:{headers:s,body:a},warnings:n}}catch(s){throw await $0(s,await mb(o))}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,o=await ml(this.config.headers());try{const{value:s,responseHeaders:i}=await eh({url:this.getUrl(),headers:L0(o,e.headers,this.getModelConfigHeaders(this.modelId,!0),await ml(this.config.o11yHeaders)),body:t,successfulResponseHandler:rae(h0()),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:a=>a}),...r&&{abortSignal:r},fetch:this.config.fetch});return{stream:s.pipeThrough(new TransformStream({start(a){n.length>0&&a.enqueue({type:"stream-start",warnings:n})},transform(a,l){if(a.success){const c=a.value;if(c.type==="raw"&&!e.includeRawChunks)return;c.type==="response-metadata"&&c.timestamp&&typeof c.timestamp=="string"&&(c.timestamp=new Date(c.timestamp)),l.enqueue(c)}else l.error(a.error)}})),request:{body:t},response:{headers:i}}}catch(s){throw await $0(s,await mb(o))}}isFilePart(e){return e&&typeof e=="object"&&"type"in e&&e.type==="file"}maybeEncodeFileParts(e){for(const t of e.prompt)for(const n of t.content)if(this.isFilePart(n)){const r=n;if(r.data instanceof Uint8Array){const o=Uint8Array.from(r.data),s=Buffer.from(o).toString("base64");r.data=new URL(`data:${r.mediaType||"application/octet-stream"};base64,${s}`)}}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},Blt=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:n,providerOptions:r}){var o;const s=await ml(this.config.headers());try{const{responseHeaders:i,value:a,rawValue:l}=await eh({url:this.getUrl(),headers:L0(s,t??{},this.getModelConfigHeaders(),await ml(this.config.o11yHeaders)),body:{input:e.length===1?e[0]:e,...r?{providerOptions:r}:{}},successfulResponseHandler:th(zlt),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:c=>c}),...n&&{abortSignal:n},fetch:this.config.fetch});return{embeddings:a.embeddings,usage:(o=a.usage)!=null?o:void 0,providerMetadata:a.providerMetadata,response:{headers:i,body:l}}}catch(i){throw await $0(i,await mb(s))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},zlt=Ub(()=>Pi(qt({embeddings:Br(Br(Qo())),usage:qt({tokens:Qo()}).nullish(),providerMetadata:Sm(Ft(),Sm(Ft(),P0())).optional()}))),jlt=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxImagesPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:o,providerOptions:s,headers:i,abortSignal:a}){var l;const c=await ml(this.config.headers());try{const{responseHeaders:u,value:f,rawValue:m}=await eh({url:this.getUrl(),headers:L0(c,i??{},this.getModelConfigHeaders(),await ml(this.config.o11yHeaders)),body:{prompt:e,n:t,...n&&{size:n},...r&&{aspectRatio:r},...o&&{seed:o},...s&&{providerOptions:s}},successfulResponseHandler:th(Hlt),failedResponseHandler:Cm({errorSchema:h0(),errorToMessage:g=>g}),...a&&{abortSignal:a},fetch:this.config.fetch});return{images:f.images,warnings:(l=f.warnings)!=null?l:[],providerMetadata:f.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:u}}}catch(u){throw $0(u,await mb(c))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":"2","ai-model-id":this.modelId}}},Ult=qt({images:Br(P0()).optional()}).catchall(P0()),Hlt=qt({images:Br(Ft()),warnings:Br(qt({type:ti("other"),message:Ft()})).optional(),providerMetadata:Sm(Ft(),Ult).optional()});async function Vlt(){var e;return(e=pae.getContext().headers)==null?void 0:e["x-vercel-id"]}var qlt="2.0.17",Glt="0.0.1";function Wlt(e={}){var t,n;let r=null,o=null;const s=(t=e.metadataCacheRefreshMillis)!=null?t:1e3*60*5;let i=0;const a=(n=lae(e.baseURL))!=null?n:"https://ai-gateway.vercel.sh/v1/ai",l=async()=>{const y=await Klt(e);if(y)return jb({Authorization:`Bearer ${y.token}`,"ai-gateway-protocol-version":Glt,[Sae]:y.authMethod,...e.headers},`ai-sdk/gateway/${qlt}`);throw s9.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},c=()=>{const y=U_({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),v=U_({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),w=U_({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{const _=await Vlt();return{...y&&{"ai-o11y-deployment-id":y},...v&&{"ai-o11y-environment":v},...w&&{"ai-o11y-region":w},..._&&{"ai-o11y-request-id":_}}}},u=y=>new Flt(y,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),f=async()=>{var y,v,w;const _=(w=(v=(y=e._internal)==null?void 0:y.currentDate)==null?void 0:v.call(y).getTime())!=null?w:Date.now();return(!r||_-i>s)&&(i=_,r=new fV({baseURL:a,headers:l,fetch:e.fetch}).getAvailableModels().then(T=>(o=T,T)).catch(async T=>{throw await $0(T,await mb(await l()))})),o?Promise.resolve(o):r},m=async()=>new fV({baseURL:a,headers:l,fetch:e.fetch}).getCredits().catch(async y=>{throw await $0(y,await mb(await l()))}),g=function(y){if(new.target)throw new Error("The Gateway Provider model function cannot be called with the new keyword.");return u(y)};return g.getAvailableModels=f,g.getCredits=m,g.imageModel=y=>new jlt(y,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),g.languageModel=u,g.textEmbeddingModel=y=>new Blt(y,{provider:"gateway",baseURL:a,headers:l,fetch:e.fetch,o11yHeaders:c()}),g}var Ylt=Wlt();async function Klt(e){const t=U_({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await pae.getVercelOidcToken(),authMethod:"oidc"}}catch{return null}}var Zlt=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof globalThis=="object"?globalThis:{},Qp="1.9.0",hV=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Jlt(e){var t=new Set([e]),n=new Set,r=e.match(hV);if(!r)return function(){return!1};var o={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(o.prerelease!=null)return function(l){return l===e};function s(a){return n.add(a),!1}function i(a){return t.add(a),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var c=l.match(hV);if(!c)return s(l);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||o.major!==u.major?s(l):o.major===0?o.minor===u.minor&&o.patch<=u.patch?i(l):s(l):o.minor<=u.minor?i(l):s(l)}}var Xlt=Jlt(Qp),Qlt=Qp.split(".")[0],ew=Symbol.for("opentelemetry.js.api."+Qlt),tw=Zlt;function i9(e,t,n,r){var o;r===void 0&&(r=!1);var s=tw[ew]=(o=tw[ew])!==null&&o!==void 0?o:{version:Qp};if(!r&&s[e]){var i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(i.stack||i.message),!1}if(s.version!==Qp){var i=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+Qp);return n.error(i.stack||i.message),!1}return s[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Qp+"."),!0}function nw(e){var t,n,r=(t=tw[ew])===null||t===void 0?void 0:t.version;if(!(!r||!Xlt(r)))return(n=tw[ew])===null||n===void 0?void 0:n[e]}function a9(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Qp+".");var n=tw[ew];n&&delete n[e]}var ect=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},tct=function(e,t,n){if(arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},nct=(function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return iv("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return iv("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return iv("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return iv("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return iv("verbose",this._namespace,t)},e})();function iv(e,t,n){var r=nw("diag");if(r)return n.unshift(t),r[e].apply(r,tct([],ect(n),!1))}var jl;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(jl||(jl={}));function rct(e,t){e<jl.NONE?e=jl.NONE:e>jl.ALL&&(e=jl.ALL),t=t||{};function n(r,o){var s=t[r];return typeof s=="function"&&e>=o?s.bind(t):function(){}}return{error:n("error",jl.ERROR),warn:n("warn",jl.WARN),info:n("info",jl.INFO),debug:n("debug",jl.DEBUG),verbose:n("verbose",jl.VERBOSE)}}var oct=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},sct=function(e,t,n){if(arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},ict="diag",d4=(function(){function e(){function t(o){return function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];var a=nw("diag");if(a)return a[o].apply(a,sct([],oct(s),!1))}}var n=this,r=function(o,s){var i,a,l;if(s===void 0&&(s={logLevel:jl.INFO}),o===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((i=c.stack)!==null&&i!==void 0?i:c.message),!1}typeof s=="number"&&(s={logLevel:s});var u=nw("diag"),f=rct((a=s.logLevel)!==null&&a!==void 0?a:jl.INFO,o);if(u&&!s.suppressOverrideMessage){var m=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+m),f.warn("Current logger will overwrite one already registered from "+m)}return i9("diag",f,n,!0)};n.setLogger=r,n.disable=function(){a9(ict,n)},n.createComponentLogger=function(o){return new nct(o)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e})();function act(e){return Symbol.for(e)}var lct=(function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,o){var s=new e(n._currentContext);return s._currentContext.set(r,o),s},n.deleteValue=function(r){var o=new e(n._currentContext);return o._currentContext.delete(r),o}}return e})(),cct=new lct,uct=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},dct=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},fct=(function(){function e(){}return e.prototype.active=function(){return cct},e.prototype.with=function(t,n,r){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return n.call.apply(n,dct([r],uct(o),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e})(),hct=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},pct=function(e,t,n){if(arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},WA="context",mct=new fct,Tae=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return i9(WA,t,d4.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var o,s=[],i=3;i<arguments.length;i++)s[i-3]=arguments[i];return(o=this._getContextManager()).with.apply(o,pct([t,n,r],hct(s),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return nw(WA)||mct},e.prototype.disable=function(){this._getContextManager().disable(),a9(WA,d4.instance())},e})(),qI;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(qI||(qI={}));var Cae="0000000000000000",kae="00000000000000000000000000000000",gct={traceId:kae,spanId:Cae,traceFlags:qI.NONE},sx=(function(){function e(t){t===void 0&&(t=gct),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e})(),l9=act("OpenTelemetry Context Key SPAN");function c9(e){return e.getValue(l9)||void 0}function bct(){return c9(Tae.getInstance().active())}function u9(e,t){return e.setValue(l9,t)}function yct(e){return e.deleteValue(l9)}function vct(e,t){return u9(e,new sx(t))}function Aae(e){var t;return(t=c9(e))===null||t===void 0?void 0:t.spanContext()}var xct=/^([0-9a-f]{32})$/i,wct=/^[0-9a-f]{16}$/i;function Ect(e){return xct.test(e)&&e!==kae}function _ct(e){return wct.test(e)&&e!==Cae}function Nae(e){return Ect(e.traceId)&&_ct(e.spanId)}function Sct(e){return new sx(e)}var YA=Tae.getInstance(),Iae=(function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=YA.active());var o=!!(n!=null&&n.root);if(o)return new sx;var s=r&&Aae(r);return Tct(s)&&Nae(s)?new sx(s):new sx},e.prototype.startActiveSpan=function(t,n,r,o){var s,i,a;if(!(arguments.length<2)){arguments.length===2?a=n:arguments.length===3?(s=n,a=r):(s=n,i=r,a=o);var l=i??YA.active(),c=this.startSpan(t,s,l),u=u9(l,c);return YA.with(u,a,void 0,c)}},e})();function Tct(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Cct=new Iae,kct=(function(){function e(t,n,r,o){this._provider=t,this.name=n,this.version=r,this.options=o}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,o){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Cct},e})(),Act=(function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new Iae},e})(),Nct=new Act,pV=(function(){function e(){}return e.prototype.getTracer=function(t,n,r){var o;return(o=this.getDelegateTracer(t,n,r))!==null&&o!==void 0?o:new kct(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Nct},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(t,n,r)},e})(),f4;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(f4||(f4={}));var KA="trace",Ict=(function(){function e(){this._proxyTracerProvider=new pV,this.wrapSpanContext=Sct,this.isSpanContextValid=Nae,this.deleteSpan=yct,this.getSpan=c9,this.getActiveSpan=bct,this.getSpanContext=Aae,this.setSpan=u9,this.setSpanContext=vct}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=i9(KA,this._proxyTracerProvider,d4.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return nw(KA)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){a9(KA,d4.instance()),this._proxyTracerProvider=new pV},e})(),Rct=Ict.getInstance(),Mct=Object.defineProperty,Dct=(e,t)=>{for(var n in t)Mct(e,n,{get:t[n],enumerable:!0})},Rae="AI_NoOutputSpecifiedError",Mae=`vercel.ai.error.${Rae}`,Oct=Symbol.for(Mae),Dae,Pct=class extends Cr{constructor({message:e="No output specified."}={}){super({name:Rae,message:e}),this[Dae]=!0}static isInstance(e){return Cr.hasMarker(e,Mae)}};Dae=Oct;function Lct(e){const t="AI SDK Warning:";switch(e.type){case"unsupported-setting":{let n=`${t} The "${e.setting}" setting is not supported by this model`;return e.details&&(n+=` - ${e.details}`),n}case"unsupported-tool":{const n="name"in e.tool?e.tool.name:"unknown tool";let r=`${t} The tool "${n}" is not supported by this model`;return e.details&&(r+=` - ${e.details}`),r}case"other":return`${t} ${e.message}`;default:return`${t} ${JSON.stringify(e,null,2)}`}}var $ct="AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.",mV=!1,Fct=e=>{if(e.length===0)return;const t=globalThis.AI_SDK_LOG_WARNINGS;if(t!==!1){if(typeof t=="function"){t(e);return}mV||(mV=!0,console.info($ct));for(const n of e)console.warn(Lct(n))}},Oae="AI_InvalidArgumentError",Pae=`vercel.ai.error.${Oae}`,Bct=Symbol.for(Pae),Lae,ld=class extends Cr{constructor({parameter:e,value:t,message:n}){super({name:Oae,message:`Invalid argument for parameter ${e}: ${n}`}),this[Lae]=!0,this.parameter=e,this.value=t}static isInstance(e){return Cr.hasMarker(e,Pae)}};Lae=Bct;var $ae="AI_InvalidToolInputError",Fae=`vercel.ai.error.${$ae}`,zct=Symbol.for(Fae),Bae,zae=class extends Cr{constructor({toolInput:e,toolName:t,cause:n,message:r=`Invalid input for tool ${t}: ${Ww(n)}`}){super({name:$ae,message:r,cause:n}),this[Bae]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return Cr.hasMarker(e,Fae)}};Bae=zct;var jae="AI_NoObjectGeneratedError",Uae=`vercel.ai.error.${jae}`,jct=Symbol.for(Uae),Hae,gV=class extends Cr{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:o,finishReason:s}){super({name:jae,message:e,cause:t}),this[Hae]=!0,this.text=n,this.response=r,this.usage=o,this.finishReason=s}static isInstance(e){return Cr.hasMarker(e,Uae)}};Hae=jct;var Vae="AI_NoSuchToolError",qae=`vercel.ai.error.${Vae}`,Uct=Symbol.for(qae),Gae,GI=class extends Cr{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:Vae,message:n}),this[Gae]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Cr.hasMarker(e,qae)}};Gae=Uct;var Wae="AI_ToolCallRepairError",Yae=`vercel.ai.error.${Wae}`,Hct=Symbol.for(Yae),Kae,Vct=class extends Cr{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${Ww(e)}`}){super({name:Wae,message:n,cause:e}),this[Kae]=!0,this.originalError=t}static isInstance(e){return Cr.hasMarker(e,Yae)}};Kae=Hct;var qct=class extends Cr{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},Zae="AI_InvalidMessageRoleError",Jae=`vercel.ai.error.${Zae}`,Gct=Symbol.for(Jae),Xae,Wct=class extends Cr{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Zae,message:t}),this[Xae]=!0,this.role=e}static isInstance(e){return Cr.hasMarker(e,Jae)}};Xae=Gct;var Qae="AI_DownloadError",ele=`vercel.ai.error.${Qae}`,Yct=Symbol.for(ele),tle,ZA=class extends Cr{constructor({url:e,statusCode:t,statusText:n,cause:r,message:o=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:Qae,message:o,cause:r}),this[tle]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Cr.hasMarker(e,ele)}};tle=Yct;var nle="AI_RetryError",rle=`vercel.ai.error.${nle}`,Kct=Symbol.for(rle),ole,bV=class extends Cr{constructor({message:e,reason:t,errors:n}){super({name:nle,message:e}),this[ole]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Cr.hasMarker(e,rle)}};ole=Kct;function yV(e){if(typeof e!="string"){if(e.specificationVersion!=="v2")throw new qct({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return e}return Zct().languageModel(e)}function Zct(){var e;return(e=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?e:Ylt}var Jct=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],Xct=e=>{const t=typeof e=="string"?o9(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function Qct(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?Xct(e):e}function eut({data:e,signatures:t}){const n=Qct(e),r=typeof n=="string"?o9(n.substring(0,Math.min(n.length,24))):n;for(const o of t)if(r.length>=o.bytesPrefix.length&&o.bytesPrefix.every((s,i)=>s===null||r[i]===s))return o.mediaType}var sle="5.0.104",tut=async({url:e})=>{var t;const n=e.toString();try{const r=await fetch(n,{headers:jb({},`ai-sdk/${sle}`,t9())});if(!r.ok)throw new ZA({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mediaType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw ZA.isInstance(r)?r:new ZA({url:n,cause:r})}},nut=(e=tut)=>t=>Promise.all(t.map(async n=>n.isUrlSupportedByModel?null:e(n)));function rut(e){try{const[t,n]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mediaType:void 0,base64Content:void 0}}}var ile=Ua([Ft(),a4(Uint8Array),a4(ArrayBuffer),Mit(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function ale(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if(typeof e=="string")try{e=new URL(e)}catch{}if(e instanceof URL&&e.protocol==="data:"){const{mediaType:t,base64Content:n}=rut(e.toString());if(t==null||n==null)throw new Cr({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:n,mediaType:t}}return{data:e,mediaType:void 0}}function out(e){return typeof e=="string"?e:e instanceof ArrayBuffer?c4(new Uint8Array(e)):c4(e)}async function sut({prompt:e,supportedUrls:t,download:n=nut()}){const r=await aut(e.messages,n,t);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(o=>iut({message:o,downloadedAssets:r}))]}function iut({message:e,downloadedAssets:t}){const n=e.role;switch(n){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"user",content:e.content.map(r=>lut(r,t)).filter(r=>r.type!=="text"||r.text!==""),providerOptions:e.providerOptions};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"assistant",content:e.content.filter(r=>r.type!=="text"||r.text!==""||r.providerOptions!=null).map(r=>{const o=r.providerOptions;switch(r.type){case"file":{const{data:s,mediaType:i}=ale(r.data);return{type:"file",data:s,filename:r.filename,mediaType:i??r.mediaType,providerOptions:o}}case"reasoning":return{type:"reasoning",text:r.text,providerOptions:o};case"text":return{type:"text",text:r.text,providerOptions:o};case"tool-call":return{type:"tool-call",toolCallId:r.toolCallId,toolName:r.toolName,input:r.input,providerExecuted:r.providerExecuted,providerOptions:o};case"tool-result":return{type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,output:r.output,providerOptions:o}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.map(r=>({type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,output:r.output,providerOptions:r.providerOptions})),providerOptions:e.providerOptions};default:{const r=n;throw new Wct({role:r})}}}async function aut(e,t,n){const r=e.filter(s=>s.role==="user").map(s=>s.content).filter(s=>Array.isArray(s)).flat().filter(s=>s.type==="image"||s.type==="file").map(s=>{var i;const a=(i=s.mediaType)!=null?i:s.type==="image"?"image/*":void 0;let l=s.type==="image"?s.image:s.data;if(typeof l=="string")try{l=new URL(l)}catch{}return{mediaType:a,data:l}}).filter(s=>s.data instanceof URL).map(s=>({url:s.data,isUrlSupportedByModel:s.mediaType!=null&&Bit({url:s.data.toString(),mediaType:s.mediaType,supportedUrls:n})})),o=await t(r);return Object.fromEntries(o.map((s,i)=>s==null?null:[r[i].url.toString(),{data:s.data,mediaType:s.mediaType}]).filter(s=>s!=null))}function lut(e,t){var n;if(e.type==="text")return{type:"text",text:e.text,providerOptions:e.providerOptions};let r;const o=e.type;switch(o){case"image":r=e.image;break;case"file":r=e.data;break;default:throw new Error(`Unsupported part type: ${o}`)}const{data:s,mediaType:i}=ale(r);let a=i??e.mediaType,l=s;if(l instanceof URL){const c=t[l.toString()];c&&(l=c.data,a??(a=c.mediaType))}switch(o){case"image":return(l instanceof Uint8Array||typeof l=="string")&&(a=(n=eut({data:l,signatures:Jct}))!=null?n:a),{type:"file",mediaType:a??"image/*",filename:void 0,data:l,providerOptions:e.providerOptions};case"file":{if(a==null)throw new Error("Media type is missing for file part");return{type:"file",mediaType:a,filename:e.filename,data:l,providerOptions:e.providerOptions}}}}function vV({maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:o,frequencyPenalty:s,seed:i,stopSequences:a}){if(e!=null){if(!Number.isInteger(e))throw new ld({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new ld({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new ld({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new ld({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new ld({parameter:"topK",value:r,message:"topK must be a number"});if(o!=null&&typeof o!="number")throw new ld({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(s!=null&&typeof s!="number")throw new ld({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(i!=null&&!Number.isInteger(i))throw new ld({parameter:"seed",value:i,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:n,topK:r,presencePenalty:o,frequencyPenalty:s,stopSequences:a,seed:i}}function cut(e){return e!=null&&Object.keys(e).length>0}function uut({tools:e,toolChoice:t,activeTools:n}){return cut(e)?{tools:(n!=null?Object.entries(e).filter(([o])=>n.includes(o)):Object.entries(e)).map(([o,s])=>{const i=s.type;switch(i){case void 0:case"dynamic":case"function":return{type:"function",name:o,description:s.description,inputSchema:o3(s.inputSchema).jsonSchema,providerOptions:s.providerOptions};case"provider-defined":return{type:"provider-defined",name:o,id:s.id,args:s.args};default:{const a=i;throw new Error(`Unsupported tool type: ${a}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var rw=Iit(()=>Ua([rit(),Ft(),Qo(),lm(),Sm(Ft(),rw),Br(rw)])),Dd=Sm(Ft(),Sm(Ft(),rw)),lle=qt({type:ti("text"),text:Ft(),providerOptions:Dd.optional()}),dut=qt({type:ti("image"),image:Ua([ile,a4(URL)]),mediaType:Ft().optional(),providerOptions:Dd.optional()}),cle=qt({type:ti("file"),data:Ua([ile,a4(URL)]),filename:Ft().optional(),mediaType:Ft(),providerOptions:Dd.optional()}),fut=qt({type:ti("reasoning"),text:Ft(),providerOptions:Dd.optional()}),hut=qt({type:ti("tool-call"),toolCallId:Ft(),toolName:Ft(),input:P0(),providerOptions:Dd.optional(),providerExecuted:lm().optional()}),put=dit("type",[qt({type:ti("text"),value:Ft()}),qt({type:ti("json"),value:rw}),qt({type:ti("error-text"),value:Ft()}),qt({type:ti("error-json"),value:rw}),qt({type:ti("content"),value:Br(Ua([qt({type:ti("text"),text:Ft()}),qt({type:ti("media"),data:Ft(),mediaType:Ft()})]))})]),ule=qt({type:ti("tool-result"),toolCallId:Ft(),toolName:Ft(),output:put,providerOptions:Dd.optional()}),mut=qt({role:ti("system"),content:Ft(),providerOptions:Dd.optional()}),gut=qt({role:ti("user"),content:Ua([Ft(),Br(Ua([lle,dut,cle]))]),providerOptions:Dd.optional()}),but=qt({role:ti("assistant"),content:Ua([Ft(),Br(Ua([lle,cle,fut,hut,ule]))]),providerOptions:Dd.optional()}),yut=qt({role:ti("tool"),content:Br(ule),providerOptions:Dd.optional()}),vut=Ua([mut,gut,but,yut]);async function xut(e){if(e.prompt==null&&e.messages==null)throw new e1({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new e1({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new e1({prompt:e,message:"system must be a string"});let t;if(e.prompt!=null&&typeof e.prompt=="string")t=[{role:"user",content:e.prompt}];else if(e.prompt!=null&&Array.isArray(e.prompt))t=e.prompt;else if(e.messages!=null)t=e.messages;else throw new e1({prompt:e,message:"prompt or messages must be defined"});if(t.length===0)throw new e1({prompt:e,message:"messages must not be empty"});const n=await Qf({value:t,schema:Br(vut)});if(!n.success)throw new e1({prompt:e,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:n.error});return{messages:t,system:e.system}}function wut(e){return s9.isInstance(e)||wae.isInstance(e)?new Cr({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:e}):e}function WI({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function Eut({model:e,settings:t,telemetry:n,headers:r}){var o;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((s,[i,a])=>(s[`ai.settings.${i}`]=a,s),{}),...Object.entries((o=n==null?void 0:n.metadata)!=null?o:{}).reduce((s,[i,a])=>(s[`ai.telemetry.metadata.${i}`]=a,s),{}),...Object.entries(r??{}).reduce((s,[i,a])=>(a!==void 0&&(s[`ai.request.headers.${i}`]=a),s),{})}}var _ut={startSpan(){return g_},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(g_);if(typeof n=="function")return n(g_);if(typeof r=="function")return r(g_)}},g_={spanContext(){return Sut},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Sut={traceId:"",spanId:"",traceFlags:0};function Tut({isEnabled:e=!1,tracer:t}={}){return e?t||Rct.getTracer("ai"):_ut}function YI({name:e,tracer:t,attributes:n,fn:r,endWhenDone:o=!0}){return t.startActiveSpan(e,{attributes:n},async s=>{try{const i=await r(s);return o&&s.end(),i}catch(i){try{dle(s,i)}finally{s.end()}throw i}})}function dle(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:f4.ERROR,message:t.message})):e.setStatus({code:f4.ERROR})}function b1({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,o])=>{if(o==null)return n;if(typeof o=="object"&&"input"in o&&typeof o.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const s=o.input();return s==null?n:{...n,[r]:s}}if(typeof o=="object"&&"output"in o&&typeof o.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const s=o.output();return s==null?n:{...n,[r]:s}}return{...n,[r]:o}},{})}function Cut(e){return JSON.stringify(e.map(t=>({...t,content:typeof t.content=="string"?t.content:t.content.map(n=>n.type==="file"?{...n,data:n.data instanceof Uint8Array?out(n.data):n.data}:n)})))}function kut(e,t){return{inputTokens:av(e.inputTokens,t.inputTokens),outputTokens:av(e.outputTokens,t.outputTokens),totalTokens:av(e.totalTokens,t.totalTokens),reasoningTokens:av(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:av(e.cachedInputTokens,t.cachedInputTokens)}}function av(e,t){return e==null&&t==null?void 0:(e??0)+(t??0)}function Aut(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function Nut({error:e,exponentialBackoffDelay:t}){const n=e.responseHeaders;if(!n)return t;let r;const o=n["retry-after-ms"];if(o){const i=parseFloat(o);Number.isNaN(i)||(r=i)}const s=n["retry-after"];if(s&&r===void 0){const i=parseFloat(s);Number.isNaN(i)?r=Date.parse(s)-Date.now():r=i*1e3}return r!=null&&!Number.isNaN(r)&&0<=r&&(r<60*1e3||r<t)?r:t}var Iut=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2,abortSignal:r}={})=>async o=>fle(o,{maxRetries:e,delayInMs:t,backoffFactor:n,abortSignal:r});async function fle(e,{maxRetries:t,delayInMs:n,backoffFactor:r,abortSignal:o},s=[]){try{return await e()}catch(i){if(pb(i)||t===0)throw i;const a=Qie(i),l=[...s,i],c=l.length;if(c>t)throw new bV({message:`Failed after ${c} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:l});if(i instanceof Error&&Ba.isInstance(i)&&i.isRetryable===!0&&c<=t)return await Pit(Nut({error:i,exponentialBackoffDelay:n}),{abortSignal:o}),fle(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r,abortSignal:o},l);throw c===1?i:new bV({message:`Failed after ${c} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:l})}}function Rut({maxRetries:e,abortSignal:t}){if(e!=null){if(!Number.isInteger(e))throw new ld({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new ld({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const n=e??2;return{maxRetries:n,retry:Iut({maxRetries:n,abortSignal:t})}}function xV(e){const t=e.filter(n=>n.type==="text");if(t.length!==0)return t.map(n=>n.text).join("")}var Mut=class{constructor({data:e,mediaType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mediaType=t}get base64(){return this.base64Data==null&&(this.base64Data=c4(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=o9(this.base64Data)),this.uint8ArrayData}};async function Dut({toolCall:e,tools:t,repairToolCall:n,system:r,messages:o}){try{if(t==null)throw new GI({toolName:e.toolName});try{return await wV({toolCall:e,tools:t})}catch(s){if(n==null||!(GI.isInstance(s)||zae.isInstance(s)))throw s;let i=null;try{i=await n({toolCall:e,tools:t,inputSchema:({toolName:a})=>{const{inputSchema:l}=t[a];return o3(l).jsonSchema},system:r,messages:o,error:s})}catch(a){throw new Vct({cause:a,originalError:s})}if(i==null)throw s;return await wV({toolCall:i,tools:t})}}catch(s){const i=await Tm({text:e.input}),a=i.success?i.value:e.input;return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:a,dynamic:!0,invalid:!0,error:s}}}async function wV({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new GI({toolName:e.toolName,availableTools:Object.keys(t)});const o=o3(r.inputSchema),s=e.input.trim()===""?await Qf({value:{},schema:o}):await Tm({text:e.input,schema:o});if(s.success===!1)throw new zae({toolName:n,toolInput:e.input,cause:s.error});return r.type==="dynamic"?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:s.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:e.toolCallId,toolName:n,input:s.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}var Out=class{constructor({content:e,finishReason:t,usage:n,warnings:r,request:o,response:s,providerMetadata:i}){this.content=e,this.finishReason=t,this.usage=n,this.warnings=r,this.request=o,this.response=s,this.providerMetadata=i}get text(){return this.content.filter(e=>e.type==="text").map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>e.type==="reasoning")}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>e.type==="file").map(e=>e.file)}get sources(){return this.content.filter(e=>e.type==="source")}get toolCalls(){return this.content.filter(e=>e.type==="tool-call")}get staticToolCalls(){return this.toolCalls.filter(e=>e.dynamic!==!0)}get dynamicToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!0)}get toolResults(){return this.content.filter(e=>e.type==="tool-result")}get staticToolResults(){return this.toolResults.filter(e=>e.dynamic!==!0)}get dynamicToolResults(){return this.toolResults.filter(e=>e.dynamic===!0)}};function Put(e){return({steps:t})=>t.length===e}async function Lut({stopConditions:e,steps:t}){return(await Promise.all(e.map(n=>n({steps:t})))).some(n=>n)}function JA({output:e,tool:t,errorMode:n}){return n==="text"?{type:"error-text",value:Ww(e)}:n==="json"?{type:"error-json",value:EV(e)}:t!=null&&t.toModelOutput?t.toModelOutput(e):typeof e=="string"?{type:"text",value:e}:{type:"json",value:EV(e)}}function EV(e){return e===void 0?null:e}function $ut({content:e,tools:t}){const n=[],r=e.filter(s=>s.type!=="source").filter(s=>(s.type!=="tool-result"||s.providerExecuted)&&(s.type!=="tool-error"||s.providerExecuted)).filter(s=>s.type!=="text"||s.text.length>0).map(s=>{switch(s.type){case"text":return{type:"text",text:s.text,providerOptions:s.providerMetadata};case"reasoning":return{type:"reasoning",text:s.text,providerOptions:s.providerMetadata};case"file":return{type:"file",data:s.file.base64,mediaType:s.file.mediaType,providerOptions:s.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,providerExecuted:s.providerExecuted,providerOptions:s.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:s.toolCallId,toolName:s.toolName,output:JA({tool:t==null?void 0:t[s.toolName],output:s.output,errorMode:"none"}),providerExecuted:!0,providerOptions:s.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:s.toolCallId,toolName:s.toolName,output:JA({tool:t==null?void 0:t[s.toolName],output:s.error,errorMode:"json"}),providerOptions:s.providerMetadata}}});r.length>0&&n.push({role:"assistant",content:r});const o=e.filter(s=>s.type==="tool-result"||s.type==="tool-error").filter(s=>!s.providerExecuted).map(s=>({type:"tool-result",toolCallId:s.toolCallId,toolName:s.toolName,output:JA({tool:t==null?void 0:t[s.toolName],output:s.type==="tool-result"?s.output:s.error,errorMode:s.type==="tool-error"?"text":"none"}),...s.providerMetadata!=null?{providerOptions:s.providerMetadata}:{}}));return o.length>0&&n.push({role:"tool",content:o}),n}var Fut=Kw({prefix:"aitxt",size:24});async function But({model:e,tools:t,toolChoice:n,system:r,prompt:o,messages:s,maxRetries:i,abortSignal:a,headers:l,stopWhen:c=Put(1),experimental_output:u,experimental_telemetry:f,providerOptions:m,experimental_activeTools:g,activeTools:y=g,experimental_prepareStep:v,prepareStep:w=v,experimental_repairToolCall:_,experimental_download:T,experimental_context:k,_internal:{generateId:M=Fut,currentDate:D=()=>new Date}={},onStepFinish:I,...P}){const B=yV(e),U=Aut(c),{maxRetries:j,retry:H}=Rut({maxRetries:i,abortSignal:a}),q=vV(P),z=jb(l??{},`ai/${sle}`),Z=Eut({model:B,telemetry:f,headers:z,settings:{...q,maxRetries:j}}),X=await xut({system:r,prompt:o,messages:s}),J=Tut(f);try{return await YI({name:"ai.generateText",attributes:b1({telemetry:f,attributes:{...WI({operationId:"ai.generateText",telemetry:f}),...Z,"ai.model.provider":B.provider,"ai.model.id":B.modelId,"ai.prompt":{input:()=>JSON.stringify({system:r,prompt:o,messages:s})}}}),tracer:J,fn:async ee=>{var re,ie,K,te,se,Q,Te;const ge=vV(P);let Ce,he=[],Fe=[];const Oe=[],Re=[];do{const et=[...X.messages,...Oe],ut=await(w==null?void 0:w({model:B,steps:Re,stepNumber:Re.length,messages:et})),Yt=yV((re=ut==null?void 0:ut.model)!=null?re:B),Ht=await sut({prompt:{system:(ie=ut==null?void 0:ut.system)!=null?ie:X.system,messages:(K=ut==null?void 0:ut.messages)!=null?K:et},supportedUrls:await Yt.supportedUrls,download:T}),{toolChoice:Pt,tools:tn}=uut({tools:t,toolChoice:(te=ut==null?void 0:ut.toolChoice)!=null?te:n,activeTools:(se=ut==null?void 0:ut.activeTools)!=null?se:y});Ce=await H(()=>{var Je;return YI({name:"ai.generateText.doGenerate",attributes:b1({telemetry:f,attributes:{...WI({operationId:"ai.generateText.doGenerate",telemetry:f}),...Z,"ai.model.provider":Yt.provider,"ai.model.id":Yt.modelId,"ai.prompt.messages":{input:()=>Cut(Ht)},"ai.prompt.tools":{input:()=>tn==null?void 0:tn.map(Le=>JSON.stringify(Le))},"ai.prompt.toolChoice":{input:()=>Pt!=null?JSON.stringify(Pt):void 0},"gen_ai.system":Yt.provider,"gen_ai.request.model":Yt.modelId,"gen_ai.request.frequency_penalty":P.frequencyPenalty,"gen_ai.request.max_tokens":P.maxOutputTokens,"gen_ai.request.presence_penalty":P.presencePenalty,"gen_ai.request.stop_sequences":P.stopSequences,"gen_ai.request.temperature":(Je=P.temperature)!=null?Je:void 0,"gen_ai.request.top_k":P.topK,"gen_ai.request.top_p":P.topP}}),tracer:J,fn:async Le=>{var Ve,_e,W,L,F,ce,we,ze;const Be=await Yt.doGenerate({...ge,tools:tn,toolChoice:Pt,responseFormat:u==null?void 0:u.responseFormat,prompt:Ht,providerOptions:m,abortSignal:a,headers:z}),ct={id:(_e=(Ve=Be.response)==null?void 0:Ve.id)!=null?_e:M(),timestamp:(L=(W=Be.response)==null?void 0:W.timestamp)!=null?L:D(),modelId:(ce=(F=Be.response)==null?void 0:F.modelId)!=null?ce:Yt.modelId,headers:(we=Be.response)==null?void 0:we.headers,body:(ze=Be.response)==null?void 0:ze.body};return Le.setAttributes(b1({telemetry:f,attributes:{"ai.response.finishReason":Be.finishReason,"ai.response.text":{output:()=>xV(Be.content)},"ai.response.toolCalls":{output:()=>{const ln=_V(Be.content);return ln==null?void 0:JSON.stringify(ln)}},"ai.response.id":ct.id,"ai.response.model":ct.modelId,"ai.response.timestamp":ct.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(Be.providerMetadata),"ai.usage.promptTokens":Be.usage.inputTokens,"ai.usage.completionTokens":Be.usage.outputTokens,"gen_ai.response.finish_reasons":[Be.finishReason],"gen_ai.response.id":ct.id,"gen_ai.response.model":ct.modelId,"gen_ai.usage.input_tokens":Be.usage.inputTokens,"gen_ai.usage.output_tokens":Be.usage.outputTokens}})),{...Be,response:ct}}})});const vt=await Promise.all(Ce.content.filter(Je=>Je.type==="tool-call").map(Je=>Dut({toolCall:Je,tools:t,repairToolCall:_,system:r,messages:et})));for(const Je of vt){if(Je.invalid)continue;const Le=t[Je.toolName];(Le==null?void 0:Le.onInputAvailable)!=null&&await Le.onInputAvailable({input:Je.input,toolCallId:Je.toolCallId,messages:et,abortSignal:a,experimental_context:k})}const me=vt.filter(Je=>Je.invalid&&Je.dynamic);Fe=[];for(const Je of me)Fe.push({type:"tool-error",toolCallId:Je.toolCallId,toolName:Je.toolName,input:Je.input,error:Qie(Je.error),dynamic:!0});he=vt.filter(Je=>!Je.providerExecuted),t!=null&&Fe.push(...await zut({toolCalls:he.filter(Je=>!Je.invalid),tools:t,tracer:J,telemetry:f,messages:et,abortSignal:a,experimental_context:k}));const Ne=Uut({content:Ce.content,toolCalls:vt,toolOutputs:Fe});Oe.push(...$ut({content:Ne,tools:t}));const $e=new Out({content:Ne,finishReason:Ce.finishReason,usage:Ce.usage,warnings:Ce.warnings,providerMetadata:Ce.providerMetadata,request:(Q=Ce.request)!=null?Q:{},response:{...Ce.response,messages:structuredClone(Oe)}});Fct((Te=Ce.warnings)!=null?Te:[]),Re.push($e),await(I==null?void 0:I($e))}while(he.length>0&&Fe.length===he.length&&!await Lut({stopConditions:U,steps:Re}));ee.setAttributes(b1({telemetry:f,attributes:{"ai.response.finishReason":Ce.finishReason,"ai.response.text":{output:()=>xV(Ce.content)},"ai.response.toolCalls":{output:()=>{const et=_V(Ce.content);return et==null?void 0:JSON.stringify(et)}},"ai.response.providerMetadata":JSON.stringify(Ce.providerMetadata),"ai.usage.promptTokens":Ce.usage.inputTokens,"ai.usage.completionTokens":Ce.usage.outputTokens}}));const nt=Re[Re.length-1];let ue;return nt.finishReason==="stop"&&(ue=await(u==null?void 0:u.parseOutput({text:nt.text},{response:nt.response,usage:nt.usage,finishReason:nt.finishReason}))),new jut({steps:Re,resolvedOutput:ue})}})}catch(ee){throw wut(ee)}}async function zut({toolCalls:e,tools:t,tracer:n,telemetry:r,messages:o,abortSignal:s,experimental_context:i}){return(await Promise.all(e.map(async({toolCallId:l,toolName:c,input:u})=>{const f=t[c];if((f==null?void 0:f.execute)!=null)return YI({name:"ai.toolCall",attributes:b1({telemetry:r,attributes:{...WI({operationId:"ai.toolCall",telemetry:r}),"ai.toolCall.name":c,"ai.toolCall.id":l,"ai.toolCall.args":{output:()=>JSON.stringify(u)}}}),tracer:n,fn:async m=>{try{const g=Yat({execute:f.execute.bind(f),input:u,options:{toolCallId:l,messages:o,abortSignal:s,experimental_context:i}});let y;for await(const v of g)v.type==="final"&&(y=v.output);try{m.setAttributes(b1({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(y)}}}))}catch{}return{type:"tool-result",toolCallId:l,toolName:c,input:u,output:y,dynamic:f.type==="dynamic"}}catch(g){return dle(m,g),{type:"tool-error",toolCallId:l,toolName:c,input:u,error:g,dynamic:f.type==="dynamic"}}}})}))).filter(l=>l!=null)}var jut=class{constructor(e){this.steps=e.steps,this.resolvedOutput=e.resolvedOutput}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get totalUsage(){return this.steps.reduce((e,t)=>kut(e,t.usage),{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0})}get experimental_output(){if(this.resolvedOutput==null)throw new Pct;return this.resolvedOutput}};function _V(e){const t=e.filter(n=>n.type==="tool-call");if(t.length!==0)return t.map(n=>({toolCallId:n.toolCallId,toolName:n.toolName,input:n.input}))}function Uut({content:e,toolCalls:t,toolOutputs:n}){return[...e.map(r=>{switch(r.type){case"text":case"reasoning":case"source":return r;case"file":return{type:"file",file:new Mut(r)};case"tool-call":return t.find(o=>o.toolCallId===r.toolCallId);case"tool-result":{const o=t.find(s=>s.toolCallId===r.toolCallId);if(o==null)throw new Error(`Tool call ${r.toolCallId} not found.`);return r.isError?{type:"tool-error",toolCallId:r.toolCallId,toolName:r.toolName,input:o.input,error:r.result,providerExecuted:!0,dynamic:o.dynamic}:{type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,input:o.input,output:r.result,providerExecuted:!0,dynamic:o.dynamic}}}}),...n]}(class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}});function Hut(e){const t=["ROOT"];let n=-1,r=null;function o(l,c,u){switch(l){case'"':{n=c,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function s(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function i(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":o(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{s(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,t.pop();break}default:{n=l,o(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const f=e.substring(r,l+1);!"false".startsWith(f)&&!"true".startsWith(f)&&!"null".startsWith(f)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?s(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(c,l)):n=l;break}}}let a=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=e.substring(r,e.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}async function Vut(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await Tm({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await Tm({text:Hut(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}Kw({prefix:"aitxt",size:24});Kw({prefix:"aiobj",size:24});Kw({prefix:"aiobj",size:24});var qut={};Dct(qut,{object:()=>Wut,text:()=>Gut});var Gut=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:e}){return{partial:e}},async parseOutput({text:e}){return e}}),Wut=({schema:e})=>{const t=o3(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:n}){const r=await Vut(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const o=r.state;throw new Error(`Unsupported parse state: ${o}`)}}},async parseOutput({text:n},r){const o=await Tm({text:n});if(!o.success)throw new gV({message:"No object generated: could not parse the response.",cause:o.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const s=await Qf({value:o.value,schema:t});if(!s.success)throw new gV({message:"No object generated: response did not match schema.",cause:s.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return s.value}}};function Yut(e,t){const n=e.startsWith("/Users/")||e.startsWith("/home/")||e.startsWith("/var/")||/^[A-Z]:\\/.test(e);let r=e;const o=r.match(/localhost:\d+\/(.+)$/);return o&&(r=o[1]),r=r.replace(/^\/+/,""),r=r.split("?")[0],console.log("[Source Patch] Cleaned path:",r),n?{resolved:e}:t?{resolved:`${t}/${r}`}:{resolved:null,error:"No projectPath provided for relative path"}}function Kut(e,t,n){console.log("[Source Patch] FAST PATH: Image src change detected"),console.log("[Source Patch] New src:",n);const r=e.split(`
`);let o=t;o>r.length&&(o=r.length);const s=15,i=Math.max(0,o-s-1),a=Math.min(r.length,o+s);for(let l=i;l<a;l++){const c=r[l];if(/<img\s/i.test(c)||/src\s*=/i.test(c)){console.log("[Source Patch] Found potential img at line",l+1,":",c.substring(0,60));const u=c.match(/src\s*=\s*(['"])([^'"]*)\1/),f=c.match(/src\s*=\s*\{([^}]*)\}/);if(u){const m=u[1];return r[l]=c.replace(u[0],`src=${m}${n}${m}`),console.log("[Source Patch] Replaced quoted src attribute"),r.join(`
`)}else if(f)return r[l]=c.replace(f[0],`src="${n}"`),console.log("[Source Patch] Replaced JSX src expression"),r.join(`
`)}}return null}function Zut(e,t,n){console.log("[Source Patch] FAST PATH: Simple text change detected"),console.log("[Source Patch] Old text:",t.substring(0,50)),console.log("[Source Patch] New text:",n.substring(0,50));const r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=[new RegExp(`(>\\s*)${r}(\\s*<)`,"g"),new RegExp(`(['"])${r}\\1`,"g"),new RegExp(`(\`)${r}(\`)`,"g")];for(const s of o)if(s.test(e)){const i=e.replace(s,(a,l,c)=>(console.log("[Source Patch] Found match:",a.substring(0,50)),`${l}${n}${c||l}`));if(i!==e)return console.log("[Source Patch] FAST PATH SUCCESS - replaced text directly"),i}return null}function Jut(e,t,n,r){var y,v;console.log("[Source Patch] FAST PATH: CSS-only change detected"),console.log("[Source Patch] CSS changes:",r);const o=e.split(`
`);let s=t;s>o.length&&(s=o.length);const i=Object.entries(r).map(([w,_])=>`${w}: '${_}'`).join(", "),a=`{ ${i} }`,l=30,c=Math.max(0,s-l-1),u=Math.min(o.length,s+l),f=(y=n.tagName)==null?void 0:y.toLowerCase(),m=(v=n.className)==null?void 0:v.split(" ")[0],g=n.id;if(console.log("[Source Patch] CSS Fast Path searching for:"),console.log("[Source Patch]   tagName:",f),console.log("[Source Patch]   className:",m),console.log("[Source Patch]   targetLine:",s),console.log("[Source Patch]   searchRange:",c+1,"to",u),!m&&!g)return console.log("[Source Patch] No class or id - skipping fast path (too ambiguous)"),null;for(let w=c;w<u;w++){const _=o[w],T=new RegExp(`<${f}[\\s>]`,"i"),k=m?new RegExp(`className=["'\`][^"'\`]*\\b${m}\\b`):null,M=g?new RegExp(`id=["'\`]${g}["'\`]`):null,D=T.test(_),I=k&&k.test(_),P=M&&M.test(_);if(D&&I||D&&P||P&&!D){console.log("[Source Patch] Found element at line",w+1,":",_.substring(0,60));const U=_.match(/style=\{(\{[^}]*\})\}/),j=_.match(/style="([^"]*)"/);if(U){const H=U[1],q=Object.entries(r).filter(([z])=>!H.includes(z)).map(([z,Z])=>`${z}: '${Z}'`).join(", ");if(q){const z=H.replace(/\s*\}$/,"")+", "+q+" }";return o[w]=_.replace(U[0],`style={${z}}`),console.log("[Source Patch] Merged into existing style prop"),o.join(`
`)}else return console.log("[Source Patch] Style properties already exist - no change needed"),e}else if(j){const q=j[1].split(";").filter(Z=>Z.trim()).map(Z=>{const[X,J]=Z.split(":").map(re=>re.trim());return`${X.replace(/-([a-z])/g,(re,ie)=>ie.toUpperCase())}: '${J}'`}).join(", "),z=q?`{ ${q}, ${i} }`:a;return o[w]=_.replace(j[0],`style={${z}}`),console.log("[Source Patch] Converted string style and merged"),o.join(`
`)}else{const H=_.match(new RegExp(`(<${f})([\\s>])`,"i"));if(H)return o[w]=_.replace(H[0],`${H[1]} style={${a}}${H[2]}`),console.log("[Source Patch] Added new style prop"),o.join(`
`)}}}return null}async function Xut(e,t,n,r){var o;if(!((o=window.electronAPI)!=null&&o.fastApply))return{success:!1,error:"Fast Apply not available"};try{console.log("[Source Patch] Checking Fast Apply availability...");const s=await window.electronAPI.fastApply.getStatus();if(!s.activeModel)return{success:!1,error:"No model selected"};console.log("[Source Patch] Fast Apply has active model:",s.activeModel);const i=Object.keys(n).length>0,a=r&&/(?:remove|delete|hide)\s+(?:this|that|it|the|element)?/i.test(r);let l="";const c=t.className?` className="${t.className.split(" ")[0]}"`:"",u=`<${t.tagName}${c}>`;if(a)l=`FIND: ${u}
REPLACE WITH: {false && ${u}...${t.tagName}>}`;else if(i){const v=Object.entries(n).map(([_,T])=>`${_}: '${T}'`).join(", "),w=`<${t.tagName} style={{ ${v} }}${c}>`;l=`FIND: ${u}
REPLACE WITH: ${w}`}else l=r||"";const f=await window.electronAPI.fastApply.apply(e,l);if(!f.success||!f.code)return{success:!1,error:f.error||"Unknown error"};const m=[/^The provided/i,/^I cannot/i,/^I apologize/i,/^Unfortunately/i,/^This (code|update|change)/i,/^Here'?s (how|an example)/i,/does not make sense/i,/is not (a )?valid/i,/you (should|can|need to)/i],g=f.code.trim().split(`
`)[0];return m.some(v=>v.test(g))?(console.log("[Source Patch] Fast Apply returned PROSE instead of code - rejecting"),{success:!1,error:"Model returned prose instead of code"}):{success:!0,code:f.code,durationMs:f.durationMs}}catch(s){return console.log("[Source Patch] Fast Apply error:",s),{success:!1,error:String(s)}}}async function Qut(e,t,n,r,o,s,i,a,l){var T,k,M;if(!((k=(T=window.electronAPI)==null?void 0:T.aiSdk)!=null&&k.generate))return console.log("[Source Patch] AI SDK generate not available"),null;const c=Object.keys(n).length>0,u=c?Object.entries(n).map(([D,I])=>`${D.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${I}`).join("; "):"";let f="";if(c&&l)f=`CSS changes to apply: ${u}

User's request: "${l}"`;else if(c)f=`CSS changes to apply: ${u}`;else if(l)f=`User's request: "${l}"`;else return console.log("[Source Patch] No changes specified, skipping"),null;const m=e.split(`
`),g=s<=m.length,y=!g||t.text||t.className;let v="";if(y?(v=`1. SEARCH the snippet for a <${t.tagName}> element`,t.text&&(v+=` containing text "${t.text.substring(0,50)}"`),t.className&&(v+=` with class "${t.className.split(" ")[0]}"`)):v=`1. Find the JSX element near line ${s} (should be near the middle of the snippet)`,c&&(v+=`
2. MODIFY the existing element's opening tag to add/merge a style prop - DO NOT create a duplicate element
3. If using Tailwind, convert to Tailwind classes where appropriate
4. The result should have the SAME NUMBER of elements - only the style prop changes`),l){const D=/^["'][^"']+["']$/.test(l.trim())||/(?:change|set|update)\s+(?:text|label|content|title)/i.test(l)||/text\s*(?:to|:|=)/i.test(l);/(?:remove|delete|hide)\s+(?:this|that|it|the)/i.test(l)?v+=`
2. To remove/delete/hide the element, add style={{ display: 'none' }} to it
3. Or if the user wants it fully removed, wrap it in {false && <element>...</element>}`:(D||!c)&&(v+=`
2. Update the text content of the element based on the user's request
3. If the request is quoted text like "New Text", use that as the new content`)}v+=`
${c?"5":"3"}. Output ONLY the modified snippet (lines ${i+1} to ${a}), no explanations
${c?"6":"4"}. Preserve exact indentation and formatting
${c?"7":"5"}. CRITICAL: Do NOT duplicate elements - modify in-place`;const w="You are a React/TypeScript code modifier. Given a code snippet and requested changes, output ONLY the modified snippet. Do not include explanations, markdown code blocks, or any other text - just the raw code.",_=`Source file: ${o}
${g?`Target line in original file: ${s}`:"(Line number from source map may be inaccurate - search by element characteristics)"}
Snippet shows lines ${i+1} to ${a}

Code snippet:
${e}

Element being modified:
- Tag: ${t.tagName}
- Classes: ${t.className||"none"}
- ID: ${t.id||"none"}
- Current text content: ${((M=t.text)==null?void 0:M.substring(0,100))||"none"}

${f}

Instructions:
${v}

Output the modified code snippet:`;try{const D=r.modelId||"claude-haiku-4-5";console.log("[Source Patch] Calling AI SDK for code modification with model:",D);const I={};for(const z of r.providers)z.apiKey&&(I[z.id]=z.apiKey);const P=await window.electronAPI.aiSdk.generate({modelId:D,messages:[{role:"user",content:_}],providers:I,system:w,maxSteps:1});if(!P.success||!P.text)return console.log("[Source Patch] AI SDK generate failed:",P.error||"No text returned"),null;console.log("[Source Patch] AI SDK response received, length:",P.text.length);let B=P.text.trim();const U=B.match(/```(?:tsx?|jsx?|typescript|javascript)?\s*([\s\S]*?)```/);U&&(B=U[1].trim(),console.log("[Source Patch] Extracted code from markdown block"));const j=[/^The provided/i,/^I cannot/i,/^I apologize/i,/^Unfortunately/i,/^This (code|update|change)/i,/^Here'?s (how|an example)/i,/does not make sense/i,/is not (a )?valid/i,/you (should|can|need to)/i],H=B.split(`
`)[0];return j.some(z=>z.test(H))?(console.log("[Source Patch] AI returned PROSE instead of code - aborting"),console.log("[Source Patch] First line:",H.substring(0,100)),null):B}catch(D){return console.error("[Source Patch] EXCEPTION during AI SDK generation:",D),null}}async function edt(e){var ee,re,ie,K,te,se,Q,Te,ge,Ce,he,Fe;const{element:t,cssChanges:n,providerConfig:r,projectPath:o,userRequest:s,textChange:i,srcChange:a}=e;if(console.log("=".repeat(60)),console.log("[Source Patch] === STARTING PATCH GENERATION ==="),console.log("[Source Patch] Input:",{elementTag:t.tagName,hasSourceLocation:!!t.sourceLocation,sourceFile:(ie=(re=(ee=t.sourceLocation)==null?void 0:ee.sources)==null?void 0:re[0])==null?void 0:ie.file,sourceLine:(se=(te=(K=t.sourceLocation)==null?void 0:K.sources)==null?void 0:te[0])==null?void 0:se.line,cssChanges:Object.keys(n).length>0?n:"none",projectPath:o||"NOT SET",userRequest:(s==null?void 0:s.substring(0,50))||"none",modelId:r.modelId,hasSrcChange:!!a}),console.log("=".repeat(60)),!((Te=(Q=t.sourceLocation)==null?void 0:Q.sources)!=null&&Te[0]))return console.log("[Source Patch] ABORT: No source location available in element"),console.log("[Source Patch] element.sourceLocation =",JSON.stringify(t.sourceLocation,null,2)),null;const l=t.sourceLocation.sources[0];let c=l.file;console.log("[Source Patch] Original source file:",c,"line:",l.line);const{resolved:u,error:f}=Yut(c,o);if(u)c=u,console.log("[Source Patch] Path resolved:",c);else if((Ce=(ge=window.electronAPI)==null?void 0:ge.files)!=null&&Ce.getCwd){console.log("[Source Patch] No projectPath, trying getCwd fallback...");const Oe=await window.electronAPI.files.getCwd();if(console.log("[Source Patch] getCwd result:",Oe),Oe.success&&Oe.data){let Re=c;const nt=Re.match(/localhost:\d+\/(.+)$/);nt&&(Re=nt[1]),Re=Re.replace(/^\/+/,"").split("?")[0],c=`${Oe.data}/${Re}`,console.log("[Source Patch] Full path with CWD fallback:",c)}else return console.log("[Source Patch] ABORT: getCwd failed:",Oe.error),null}else return console.log("[Source Patch] ABORT:",f),null;if(c.includes("/ai-cluso/")&&!c.includes("/ai-cluso/website/"))return console.log("[Source Patch] ABORT: BLOCKED - Cannot patch app source files:",c),null;if(!((Fe=(he=window.electronAPI)==null?void 0:he.files)!=null&&Fe.readFile))return console.log("[Source Patch] ABORT: File API (readFile) not available"),null;console.log("[Source Patch] Reading source file:",c);const m=await window.electronAPI.files.readFile(c);if(!m.success||!m.data)return console.log("[Source Patch] ABORT: Failed to read source file"),console.log("[Source Patch] Error:",m.error),null;console.log("[Source Patch] File read successfully, length:",m.data.length);const g=m.data,y=Object.keys(n).length>0,v=i&&i.oldText&&i.newText;if(a&&a.newSrc&&!y&&!v){const Oe=Kut(g,l.line,a.newSrc);if(Oe&&Oe!==g)return console.log("[Source Patch] FAST PATH SUCCESS - replaced img src directly"),{filePath:c,originalContent:g,patchedContent:Oe,lineNumber:l.line,generatedBy:"fast-path"};console.log("[Source Patch] Src fast path failed - falling back to AI")}if(v&&!y){const Oe=Zut(g,i.oldText,i.newText);if(Oe)return{filePath:c,originalContent:g,patchedContent:Oe,lineNumber:l.line,generatedBy:"fast-path"};console.log("[Source Patch] Text fast path failed - falling back to AI")}if(y&&(!i||!i.newText)){const Oe=Jut(g,l.line,t,n);if(Oe&&Oe!==g)return console.log("[Source Patch] FAST PATH SUCCESS - modified style directly"),{filePath:c,originalContent:g,patchedContent:Oe,lineNumber:l.line,generatedBy:"fast-path"};console.log("[Source Patch] CSS fast path failed - falling back to AI")}const _=g.split(`
`);let T=l.line;T>_.length&&(console.log("[Source Patch] Source map line",T,"exceeds file length",_.length),console.log("[Source Patch] Clamping target to end of file"),T=_.length);const k=30,M=Math.max(0,T-k),D=Math.min(_.length,T+k),I=_.slice(M,D).join(`
`);console.log("[Source Patch] Fast Apply snippet: lines",M+1,"to",D,"(",I.length,"chars)");const P=await Xut(I,t,n,s);if(P.success&&P.code){console.log("[Source Patch] Fast Apply SUCCESS! Duration:",P.durationMs,"ms");const Oe=P.code.split(`
`),Re=_.slice(0,M),nt=_.slice(D),ue=[...Re,...Oe,...nt].join(`
`);if(ue!==g)return console.log("=".repeat(60)),console.log("[Source Patch] === FAST APPLY PATCH GENERATED ==="),console.log("[Source Patch] Output:",{filePath:c,originalLength:g.length,patchedLength:ue.length,lineNumber:l.line,durationMs:P.durationMs}),console.log("=".repeat(60)),{filePath:c,originalContent:g,patchedContent:ue,lineNumber:l.line,generatedBy:"fast-apply",durationMs:P.durationMs};console.log("[Source Patch] Fast Apply returned unchanged content, falling back to Gemini")}else console.log("[Source Patch] Fast Apply not available or failed:",P.error);const B=100,U=Math.max(0,T-B),j=Math.min(_.length,T+B);if(U>=j)return console.log("[Source Patch] ABORT: Invalid line range:",U,"to",j),null;const H=_.slice(U,j).join(`
`);console.log("[Source Patch] AI SDK snippet: lines",U+1,"to",j,"(",H.length,"chars)");const q=await Qut(H,t,n,r,l.file,T,U,j,s);if(!q)return null;const z=q.split(`
`),Z=_.slice(0,U),X=_.slice(j),J=[...Z,...z,...X].join(`
`);return console.log("=".repeat(60)),console.log("[Source Patch] === PATCH GENERATED SUCCESSFULLY ==="),console.log("[Source Patch] Output:",{filePath:c,originalLength:g.length,patchedLength:J.length,lineNumber:l.line,changed:g!==J}),console.log("=".repeat(60)),{filePath:c,originalContent:g,patchedContent:J,lineNumber:l.line,generatedBy:"gemini"}}const H_=new Map,tdt=[{pattern:/Invalid hook call/i,category:"react",keywords:["hook","rules","component"],description:"React Hook called outside of functional component"},{pattern:/Cannot read propert[ies]? of (undefined|null)/i,category:"react",keywords:["undefined","null reference","property access"],description:"Attempting to access property on undefined/null value"},{pattern:/Maximum update depth exceeded/i,category:"react",keywords:["infinite loop","useEffect","dependency"],description:"Infinite loop in React component updates"},{pattern:/Type '[^']+' is not assignable to type/i,category:"typescript",keywords:["type mismatch","typescript","assignment"],description:"TypeScript type incompatibility"},{pattern:/Property '[^']+' does not exist/i,category:"typescript",keywords:["property","typescript","interface"],description:"TypeScript property not found on type"},{pattern:/Module not found|Cannot find module/i,category:"build",keywords:["import","module","path resolution"],description:"Build error - module cannot be resolved"},{pattern:/Failed to compile/i,category:"build",keywords:["compilation","syntax","import"],description:"General compilation error"},{pattern:/CORS error|Access-Control-Allow|Cross-Origin/i,category:"network",keywords:["cors","cross-origin","api"],description:"Cross-Origin Resource Sharing (CORS) error"},{pattern:/Failed to fetch|Network request failed|fetch.*error/i,category:"network",keywords:["network","api","connection"],description:"Network request failed"},{pattern:/(404|500|502|503) (?:Not Found|Internal Server Error|Bad Gateway|Service Unavailable)/i,category:"network",keywords:["http error","server error"],description:"HTTP error response"},{pattern:/ReferenceError.*is not defined/i,category:"runtime",keywords:["undefined variable","reference error"],description:"Variable is not defined"},{pattern:/Cannot find name/i,category:"typescript",keywords:["typescript","undefined variable"],description:"TypeScript: variable name not found"}];function s3(e){e.toLowerCase();for(const t of tdt)if(t.pattern.test(e))return{signature:t,category:t.category,errorKey:KI(e),isKnownError:!0};return{signature:null,category:"unknown",errorKey:KI(e),isKnownError:!1}}function KI(e){const t=e.replace(/line \d+/gi,"LINE_N").replace(/column \d+/gi,"COL_N").replace(/at .*?\.js:\d+/g,"AT_FILE").substring(0,100);return Buffer.from(t).toString("base64").substring(0,32)}function ndt(e,t,n){const r=s3(e),o={errorKey:r.errorKey,message:e,solution:t,category:r.category,timestamp:Date.now(),searchQuery:n};H_.set(r.errorKey,o);try{const s=`error_solution_${r.errorKey}`;localStorage.setItem(s,JSON.stringify(o))}catch(s){console.warn("[ErrorSolutions] localStorage not available:",s)}return o}function rdt(e){const t=s3(e);if(H_.has(t.errorKey))return H_.get(t.errorKey)||null;try{const n=`error_solution_${t.errorKey}`,r=localStorage.getItem(n);if(r){const o=JSON.parse(r);return H_.set(t.errorKey,o),o}}catch(n){console.warn("[ErrorSolutions] Error reading from localStorage:",n)}return null}function SV(e){const t=s3(e);if(!t.signature)return e.split(`
`)[0].substring(0,100);const n=t.signature.keywords.slice(0,3);return`${t.signature.description} ${n.join(" ")}`}function odt(e){return{react:"",typescript:"",build:"",network:"",runtime:"",unknown:""}[e]}function sdt(e){return["build","typescript"].includes(e)}function idt(e=500){const t=new Map;return n=>{const r=KI(n),o=Date.now(),s=t.get(r);return s&&o-s<e?!1:(t.set(r,o),!0)}}function adt(e={}){const{onErrorDetected:t,onSolutionFound:n,debounceMs:r=500,enableAutoSearch:o=!0,maxCachedErrors:s=50}=e,[i,a]=x.useState([]),[l,c]=x.useState(!1),u=x.useRef(idt(r)),f=x.useRef(null);x.useEffect(()=>{const w=console.error,_=console.warn,T=k=>{if(!u.current(k))return;const M=s3(k),D=`error_${Date.now()}_${Math.random()}`,I=rdt(k),P=SV(k),B={id:D,message:k,level:"error",category:M.category,timestamp:Date.now(),icon:odt(M.category),isCritical:sdt(M.category),solution:I?{text:I.solution,source:"cached",query:I.searchQuery}:void 0,isSearching:o&&!I};a(U=>[B,...U].slice(0,s)),t&&t(B),o&&!I&&M.isKnownError&&m(B,P,k)};return console.error=(...k)=>{const M=k.map(D=>{if(typeof D=="object")try{return JSON.stringify(D)}catch{return String(D)}return String(D)}).join(" ");T(M),w.apply(console,k)},console.warn=(...k)=>{const M=k.map(D=>{if(typeof D=="object")try{return JSON.stringify(D)}catch{return String(D)}return String(D)}).join(" ");M.includes("Warning")||M.includes("deprecated")||M.includes("React"),_.apply(console,k)},f.current=()=>{console.error=w,console.warn=_},()=>{f.current&&f.current()}},[o,t,s]);const m=x.useCallback(async(w,_,T)=>{c(!0);try{const k=ldt(w.category,_);k?(ndt(T,k,_),a(M=>M.map(D=>D.id===w.id?{...D,solution:{text:k,source:"search",query:_},isSearching:!1}:D)),n&&n({...w,solution:{text:k,source:"search",query:_},isSearching:!1})):a(M=>M.map(D=>D.id===w.id?{...D,isSearching:!1}:D))}catch(k){console.warn("[useErrorPrefetch] Search failed:",k),a(M=>M.map(D=>D.id===w.id?{...D,isSearching:!1}:D))}finally{c(!1)}},[n]),g=x.useCallback(async w=>{const _=i.find(k=>k.id===w);if(!_)return;const T=SV(_.message);await m(_,T,_.message)},[i,m]),y=x.useCallback(()=>{a([])},[]),v=x.useCallback(w=>{a(_=>_.filter(T=>T.id!==w))},[]);return{errors:i,isSearching:l,clearErrors:y,removeError:v,searchForSolution:g}}function ldt(e,t){const n={react:`This is a React-related error. Common fixes:
1. Check that hooks are only called at the top level of components
2. Ensure dependencies in useEffect are correct
3. Verify component names start with uppercase
4. Check for invalid hook calls in conditionals
Search: "${t}"`,typescript:`This is a TypeScript error. Common fixes:
1. Verify the type matches what's expected
2. Check import statements for correct types
3. Ensure all required properties are provided
4. Use type assertions carefully (as const)
Search: "${t}"`,build:`This is a build error. Common fixes:
1. Check that all imports use correct file paths
2. Verify node_modules is installed (npm install / pnpm install)
3. Clear build cache (rm -rf .next/build or dist/)
4. Check for syntax errors in modified files
Search: "${t}"`,network:`This is a network error. Common fixes:
1. Check CORS headers on the API endpoint
2. Verify the API endpoint is accessible
3. Check network tab in DevTools for the actual error
4. Ensure request headers are correct (auth, content-type)
Search: "${t}"`,runtime:`This is a runtime error. Common fixes:
1. Check that variables are defined before use
2. Verify array/object access is safe
3. Add null/undefined checks
4. Check browser console for actual error
Search: "${t}"`,unknown:`Unable to categorize this error. General debugging steps:
1. Check the browser console for more details
2. Search the error message online
3. Check if this is a known issue in your dependencies
4. Try restarting the development server
Search: "${t}"`};return n[e]||n.unknown}const cdt=({error:e,isDarkMode:t=!1,onRemove:n,onSearch:r})=>{var l;const[o,s]=x.useState(!1),i=!!e.solution,a=e.isSearching;return h.jsxs("div",{className:`error-solution-badge-container ${t?"dark":""}`,children:[h.jsxs("div",{className:`error-solution-badge ${e.isCritical?"critical":"warning"}`,children:[h.jsx("span",{className:"badge-icon",children:e.isCritical?h.jsx(Aq,{size:14}):h.jsx(_0,{size:14})}),h.jsx("span",{className:"badge-text",children:i?h.jsxs(h.Fragment,{children:[h.jsx(K_,{size:12,className:"inline mr-1"}),"Solution available"]}):a?h.jsxs(h.Fragment,{children:[h.jsx(Gf,{size:12,className:"inline mr-1 animate-spin"}),"Searching..."]}):"No solution found"}),i&&h.jsx("button",{className:"badge-toggle",onClick:()=>s(!o),title:o?"Hide solution":"Show solution",children:h.jsx(Lf,{size:14,className:`transition-transform ${o?"rotate-180":""}`})}),!i&&!a&&r&&h.jsx("button",{className:"badge-search",onClick:()=>r(e.id),title:"Search for solution",children:h.jsx(Gf,{size:12})}),n&&h.jsx("button",{className:"badge-close",onClick:()=>n(e.id),title:"Dismiss error",children:h.jsx(qr,{size:12})})]}),o&&i&&h.jsxs("div",{className:"error-solution-detail",children:[h.jsx("div",{className:"solution-header",children:h.jsx("span",{className:"solution-source",children:e.solution.source==="cached"?" Cached":" Found"})}),h.jsx("div",{className:"solution-text",children:e.solution.text}),e.solution.query&&h.jsxs("div",{className:"solution-query",children:[h.jsx("span",{className:"query-label",children:"Search query:"}),h.jsx("code",{className:"query-code",children:e.solution.query})]}),h.jsxs("div",{className:"solution-actions",children:[typeof window<"u"&&((l=window.electronAPI)==null?void 0:l.openExternal)&&h.jsx("button",{className:"action-button secondary",onClick:()=>{var u;const c=`https://www.google.com/search?q=${encodeURIComponent(((u=e.solution)==null?void 0:u.query)||"")}`;window.electronAPI.openExternal(c)},children:"Search Web"}),n&&h.jsx("button",{className:"action-button primary",onClick:()=>n(e.id),children:"Got it"})]})]}),h.jsx("style",{children:`
        .error-solution-badge-container {
          margin: 8px 0;
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        .error-solution-badge {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 8px 12px;
          border-radius: 6px;
          font-size: 13px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.15s ease-out;
          border: 1px solid transparent;
        }

        .error-solution-badge.critical {
          background-color: rgba(239, 68, 68, 0.1);
          color: #dc2626;
          border-color: rgba(239, 68, 68, 0.3);
        }

        .dark .error-solution-badge.critical {
          background-color: rgba(239, 68, 68, 0.2);
          color: #f87171;
          border-color: rgba(239, 68, 68, 0.4);
        }

        .error-solution-badge.warning {
          background-color: rgba(245, 158, 11, 0.1);
          color: #d97706;
          border-color: rgba(245, 158, 11, 0.3);
        }

        .dark .error-solution-badge.warning {
          background-color: rgba(245, 158, 11, 0.2);
          color: #fbbf24;
          border-color: rgba(245, 158, 11, 0.4);
        }

        .error-solution-badge:hover {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .dark .error-solution-badge:hover {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .badge-icon {
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .badge-text {
          display: flex;
          align-items: center;
          flex: 1;
        }

        .badge-toggle,
        .badge-search,
        .badge-close {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 4px;
          cursor: pointer;
          border: none;
          background: transparent;
          color: inherit;
          border-radius: 4px;
          transition: background-color 0.15s;
        }

        .badge-toggle:hover,
        .badge-search:hover {
          background-color: rgba(0, 0, 0, 0.1);
        }

        .dark .badge-toggle:hover,
        .dark .badge-search:hover {
          background-color: rgba(255, 255, 255, 0.1);
        }

        .badge-close:hover {
          background-color: rgba(239, 68, 68, 0.2);
          color: #dc2626;
        }

        .dark .badge-close:hover {
          background-color: rgba(239, 68, 68, 0.3);
          color: #f87171;
        }

        .error-solution-detail {
          margin-top: 8px;
          padding: 12px;
          background-color: rgba(255, 255, 255, 0.5);
          border: 1px solid rgba(0, 0, 0, 0.1);
          border-radius: 6px;
          font-size: 12px;
          line-height: 1.5;
          color: rgba(0, 0, 0, 0.7);
        }

        .dark .error-solution-detail {
          background-color: rgba(0, 0, 0, 0.3);
          border-color: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.8);
        }

        .solution-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 8px;
          padding-bottom: 8px;
          border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .dark .solution-header {
          border-color: rgba(255, 255, 255, 0.1);
        }

        .solution-source {
          font-weight: 600;
          color: rgba(0, 0, 0, 0.8);
        }

        .dark .solution-source {
          color: rgba(255, 255, 255, 0.9);
        }

        .solution-text {
          margin: 8px 0;
          white-space: pre-wrap;
          word-break: break-word;
          color: rgba(0, 0, 0, 0.7);
        }

        .dark .solution-text {
          color: rgba(255, 255, 255, 0.8);
        }

        .solution-query {
          margin: 8px 0;
          padding: 8px;
          background-color: rgba(0, 0, 0, 0.05);
          border-radius: 4px;
          font-family: "Monaco", "Menlo", monospace;
          font-size: 11px;
        }

        .dark .solution-query {
          background-color: rgba(0, 0, 0, 0.3);
        }

        .query-label {
          display: block;
          font-weight: 600;
          margin-bottom: 4px;
          color: rgba(0, 0, 0, 0.6);
        }

        .dark .query-label {
          color: rgba(255, 255, 255, 0.6);
        }

        .query-code {
          display: block;
          padding: 4px;
          background-color: rgba(0, 0, 0, 0.1);
          border-radius: 3px;
          color: rgba(0, 0, 0, 0.8);
          break: break-all;
        }

        .dark .query-code {
          background-color: rgba(0, 0, 0, 0.4);
          color: rgba(255, 255, 255, 0.9);
        }

        .solution-actions {
          display: flex;
          gap: 8px;
          margin-top: 12px;
          padding-top: 8px;
          border-top: 1px solid rgba(0, 0, 0, 0.1);
          justify-content: flex-end;
        }

        .dark .solution-actions {
          border-color: rgba(255, 255, 255, 0.1);
        }

        .action-button {
          padding: 6px 12px;
          border: none;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.15s;
        }

        .action-button.primary {
          background-color: rgba(59, 130, 246, 0.9);
          color: white;
        }

        .action-button.primary:hover {
          background-color: rgb(59, 130, 246);
          transform: translateY(-1px);
        }

        .action-button.secondary {
          background-color: rgba(0, 0, 0, 0.1);
          color: rgba(0, 0, 0, 0.7);
        }

        .dark .action-button.secondary {
          background-color: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.7);
        }

        .action-button.secondary:hover {
          background-color: rgba(0, 0, 0, 0.2);
          transform: translateY(-1px);
        }

        .dark .action-button.secondary:hover {
          background-color: rgba(255, 255, 255, 0.2);
        }

        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }

        .animate-spin {
          animation: spin 1s linear infinite;
        }
      `})]})},udt=({errors:e,isVisible:t,isDarkMode:n=!1,onToggle:r,onRemoveError:o,onSearchForSolution:s,onClearAll:i})=>{const a=e.length,l=e.filter(u=>u.isCritical).length,c=e.filter(u=>u.solution).length;return!t||a===0?null:h.jsxs("div",{className:`error-solution-panel ${n?"dark":""}`,children:[h.jsxs("div",{className:"panel-header",children:[h.jsxs("div",{className:"header-title",children:[h.jsx(Aq,{size:18}),h.jsx("span",{className:"title-text",children:"Error Solutions"}),h.jsxs("span",{className:"error-badge",children:[l>0&&h.jsx("span",{className:"critical-count",children:l}),a]})]}),h.jsxs("div",{className:"header-actions",children:[c>0&&h.jsxs("span",{className:"solved-indicator",children:[" ",c," solved"]}),i&&a>0&&h.jsx("button",{className:"action-button clear",onClick:i,title:"Clear all errors",children:h.jsx(Ff,{size:16})}),r&&h.jsx("button",{className:"close-button",onClick:r,title:"Close panel",children:h.jsx(qr,{size:18})})]})]}),h.jsx("div",{className:"error-list",children:e.map(u=>h.jsxs("div",{className:"error-item",children:[h.jsxs("div",{className:"error-header",children:[h.jsx("span",{className:"error-icon",children:u.icon}),h.jsxs("div",{className:"error-info",children:[h.jsx("span",{className:"error-category",children:u.category.toUpperCase()}),h.jsx("span",{className:"error-time",children:new Date(u.timestamp).toLocaleTimeString()})]}),u.isCritical&&h.jsx("span",{className:"critical-indicator",title:"Critical error",children:"!"})]}),h.jsxs("div",{className:"error-message",children:[h.jsx("code",{children:u.message.substring(0,200)}),u.message.length>200&&h.jsx("span",{children:"..."})]}),h.jsx(cdt,{error:u,isDarkMode:n,onRemove:o,onSearch:s})]},u.id))}),a>0&&h.jsx("div",{className:"panel-footer",children:h.jsxs("div",{className:"footer-stats",children:[h.jsxs("span",{className:"stat",children:[h.jsx("span",{className:"stat-label",children:"Critical:"}),h.jsx("span",{className:"stat-value",children:l})]}),h.jsxs("span",{className:"stat",children:[h.jsx("span",{className:"stat-label",children:"Warnings:"}),h.jsx("span",{className:"stat-value",children:a-l})]}),h.jsxs("span",{className:"stat",children:[h.jsx("span",{className:"stat-label",children:"Solved:"}),h.jsx("span",{className:"stat-value",children:c})]})]})}),h.jsx("style",{children:`
        .error-solution-panel {
          position: fixed;
          bottom: 0;
          right: 0;
          width: 100%;
          max-width: 600px;
          max-height: 500px;
          background: white;
          border-top: 1px solid #e5e7eb;
          border-left: 1px solid #e5e7eb;
          border-radius: 12px 12px 0 0;
          box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
          display: flex;
          flex-direction: column;
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
          z-index: 9999;
          animation: slideUp 0.3s ease-out;
        }

        .error-solution-panel.dark {
          background: #1f2937;
          border-color: #374151;
          box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.4);
        }

        @keyframes slideUp {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }

        .panel-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 16px;
          border-bottom: 1px solid #e5e7eb;
          background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
          border-radius: 12px 12px 0 0;
        }

        .dark .panel-header {
          border-color: #374151;
          background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
        }

        .header-title {
          display: flex;
          align-items: center;
          gap: 12px;
          font-size: 16px;
          font-weight: 600;
          color: #1f2937;
        }

        .dark .header-title {
          color: #f3f4f6;
        }

        .header-title svg {
          color: #ef4444;
        }

        .title-text {
          flex: 1;
        }

        .error-badge {
          display: flex;
          align-items: center;
          justify-content: center;
          min-width: 28px;
          height: 28px;
          padding: 0 8px;
          background: rgba(239, 68, 68, 0.1);
          color: #dc2626;
          border-radius: 14px;
          font-size: 13px;
          font-weight: 600;
          position: relative;
        }

        .dark .error-badge {
          background: rgba(239, 68, 68, 0.2);
          color: #f87171;
        }

        .critical-count {
          position: absolute;
          top: -4px;
          right: -4px;
          width: 18px;
          height: 18px;
          background: #ef4444;
          color: white;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 11px;
          font-weight: 700;
        }

        .header-actions {
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .solved-indicator {
          font-size: 12px;
          color: #10b981;
          font-weight: 600;
          padding: 4px 8px;
          background: rgba(16, 185, 129, 0.1);
          border-radius: 4px;
        }

        .dark .solved-indicator {
          background: rgba(16, 185, 129, 0.2);
          color: #34d399;
        }

        .action-button {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 6px;
          border: none;
          background: transparent;
          color: #6b7280;
          cursor: pointer;
          border-radius: 6px;
          transition: all 0.15s;
        }

        .dark .action-button {
          color: #9ca3af;
        }

        .action-button:hover {
          background: rgba(0, 0, 0, 0.1);
          color: #1f2937;
        }

        .dark .action-button:hover {
          background: rgba(255, 255, 255, 0.1);
          color: #f3f4f6;
        }

        .action-button.clear:hover {
          background: rgba(239, 68, 68, 0.1);
          color: #dc2626;
        }

        .dark .action-button.clear:hover {
          background: rgba(239, 68, 68, 0.2);
          color: #f87171;
        }

        .close-button {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 6px;
          border: none;
          background: transparent;
          color: #6b7280;
          cursor: pointer;
          border-radius: 6px;
          transition: all 0.15s;
        }

        .dark .close-button {
          color: #9ca3af;
        }

        .close-button:hover {
          background: rgba(0, 0, 0, 0.1);
          color: #1f2937;
        }

        .dark .close-button:hover {
          background: rgba(255, 255, 255, 0.1);
          color: #f3f4f6;
        }

        .error-list {
          flex: 1;
          overflow-y: auto;
          padding: 12px 16px;
          gap: 12px;
          display: flex;
          flex-direction: column;
        }

        .error-list::-webkit-scrollbar {
          width: 8px;
        }

        .error-list::-webkit-scrollbar-track {
          background: transparent;
        }

        .error-list::-webkit-scrollbar-thumb {
          background: #d1d5db;
          border-radius: 4px;
        }

        .dark .error-list::-webkit-scrollbar-thumb {
          background: #4b5563;
        }

        .error-list::-webkit-scrollbar-thumb:hover {
          background: #9ca3af;
        }

        .dark .error-list::-webkit-scrollbar-thumb:hover {
          background: #6b7280;
        }

        .error-item {
          padding: 12px;
          background: #f9fafb;
          border: 1px solid #e5e7eb;
          border-radius: 8px;
          transition: all 0.15s;
        }

        .dark .error-item {
          background: #111827;
          border-color: #374151;
        }

        .error-item:hover {
          background: #ffffff;
          border-color: #d1d5db;
        }

        .dark .error-item:hover {
          background: #1f2937;
          border-color: #4b5563;
        }

        .error-header {
          display: flex;
          align-items: center;
          gap: 8px;
          margin-bottom: 8px;
        }

        .error-icon {
          font-size: 16px;
          line-height: 1;
        }

        .error-info {
          display: flex;
          align-items: center;
          gap: 12px;
          flex: 1;
        }

        .error-category {
          font-size: 11px;
          font-weight: 600;
          text-transform: uppercase;
          color: #6b7280;
          padding: 2px 6px;
          background: rgba(0, 0, 0, 0.05);
          border-radius: 3px;
        }

        .dark .error-category {
          color: #9ca3af;
          background: rgba(255, 255, 255, 0.1);
        }

        .error-time {
          font-size: 11px;
          color: #9ca3af;
        }

        .dark .error-time {
          color: #6b7280;
        }

        .critical-indicator {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 20px;
          height: 20px;
          background: #dc2626;
          color: white;
          border-radius: 50%;
          font-size: 12px;
          font-weight: 700;
        }

        .error-message {
          padding: 8px;
          background: rgba(0, 0, 0, 0.05);
          border-radius: 4px;
          margin-bottom: 8px;
        }

        .dark .error-message {
          background: rgba(0, 0, 0, 0.3);
        }

        .error-message code {
          font-family: "Monaco", "Menlo", monospace;
          font-size: 11px;
          color: #374151;
          word-break: break-all;
          white-space: pre-wrap;
        }

        .dark .error-message code {
          color: #d1d5db;
        }

        .panel-footer {
          padding: 12px 16px;
          border-top: 1px solid #e5e7eb;
          background: #f9fafb;
          border-radius: 0 0 12px 12px;
        }

        .dark .panel-footer {
          border-color: #374151;
          background: #111827;
        }

        .footer-stats {
          display: flex;
          gap: 16px;
          font-size: 12px;
        }

        .stat {
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .stat-label {
          color: #6b7280;
          font-weight: 500;
        }

        .dark .stat-label {
          color: #9ca3af;
        }

        .stat-value {
          color: #1f2937;
          font-weight: 600;
          font-size: 14px;
        }

        .dark .stat-value {
          color: #f3f4f6;
        }

        @media (max-width: 768px) {
          .error-solution-panel {
            max-width: 100%;
            max-height: 60vh;
          }

          .header-title {
            font-size: 14px;
          }

          .error-list {
            padding: 12px;
          }

          .error-item {
            padding: 10px;
          }
        }
      `})]})};function ddt(e){e=e.replace(/^#/,"");const t=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,r=parseInt(e.substring(4,6),16)/255;return .299*t+.587*n+.114*r}function XA(e,t){e=e.replace(/^#/,"");let n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);return n=Math.min(255,Math.max(0,Math.round(n+n*t/100))),r=Math.min(255,Math.max(0,Math.round(r+r*t/100))),o=Math.min(255,Math.max(0,Math.round(o+o*t/100))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`}async function fdt(e,t,n,r="gemini-2.5-flash"){var i,a;const o=hae({apiKey:n}),s=`You are a UI modification assistant. Given an HTML element and a user request, output ONLY a JSON object with changes.

Element:
- Tag: ${e.tagName}
- Classes: ${e.className||"none"}
- ID: ${e.id||"none"}
- Current text: ${((i=e.text)==null?void 0:i.substring(0,100))||"none"}
- Current styles: ${JSON.stringify(e.computedStyle||{})}
- HTML: ${((a=e.outerHTML)==null?void 0:a.substring(0,500))||"N/A"}

User request: "${t}"

Respond with ONLY valid JSON. Use "textChange" for text modifications, "cssChanges" for style changes:
{
  "cssChanges": { "property": "value", ... },
  "textChange": "new text content if changing text",
  "description": "Brief description of changes"
}

IMPORTANT:
- For TEXT changes (changing what the element says): use "textChange" with the new text
- For STYLE changes (colors, sizes, spacing): use "cssChanges" with CSS properties
- Do NOT use cssChanges.content for text - that only works for ::before/::after pseudo-elements

Examples:
- "make it red"  {"cssChanges": {"color": "red"}, "description": "Changed text color to red"}
- "change to Download"  {"textChange": "Download", "description": "Changed text to Download"}
- "Download Now"  {"textChange": "Download Now", "description": "Changed text to Download Now"}
- "bigger font"  {"cssChanges": {"fontSize": "1.5em"}, "description": "Increased font size"}
- "make it say Hello"  {"textChange": "Hello", "description": "Changed text to Hello"}
- "red and say Click Me"  {"cssChanges": {"color": "red"}, "textChange": "Click Me", "description": "Changed color to red and text to Click Me"}`;try{console.log(`[UI Update] Calling ${r} for UI changes...`),console.log("[UI Update] API Key present:",!!n,"length:",n==null?void 0:n.length);const c=(await But({model:o(r),prompt:s,maxTokens:200})).text.trim();console.log("[UI Update] Gemini response:",c);const f=(c.match(/```(?:json)?\s*([\s\S]*?)```/)||[null,c])[1]||c;console.log("[UI Update] Parsing JSON:",f);const m=JSON.parse(f);return console.log("[UI Update] Parsed result:",m),{cssChanges:m.cssChanges||{},textChange:m.textChange,description:m.description||"UI updated",success:!0}}catch(l){return console.error("[UI Update] Failed to generate:",l),{cssChanges:{},description:"Failed to generate UI changes",success:!1}}}function hdt(e){const n=new Date().getTime()-e.getTime(),r=Math.floor(n/1e3),o=Math.floor(r/60),s=Math.floor(o/60),i=Math.floor(s/24);return r<30?"just now":r<60?`${r}s ago`:o<60?`${o}m ago`:s<24?`${s}h ago`:`${i}d ago`}const d9=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M4.709 15.955l4.72-2.647.08-.23-.08-.128H9.2l-.79-.048-2.698-.073-2.339-.097-2.266-.122-.571-.121L0 11.784l.055-.352.48-.321.686.06 1.52.103 2.278.158 1.652.097 2.449.255h.389l.055-.157-.134-.098-.103-.097-2.358-1.596-2.552-1.688-1.336-.972-.724-.491-.364-.462-.158-1.008.656-.722.881.06.225.061.893.686 1.908 1.476 2.491 1.833.365.304.145-.103.019-.073-.164-.274-1.355-2.446-1.446-2.49-.644-1.032-.17-.619a2.97 2.97 0 01-.104-.729L6.283.134 6.696 0l.996.134.42.364.62 1.414 1.002 2.229 1.555 3.03.456.898.243.832.091.255h.158V9.01l.128-1.706.237-2.095.23-2.695.08-.76.376-.91.747-.492.584.28.48.685-.067.444-.286 1.851-.559 2.903-.364 1.942h.212l.243-.242.985-1.306 1.652-2.064.73-.82.85-.904.547-.431h1.033l.76 1.129-.34 1.166-1.064 1.347-.881 1.142-1.264 1.7-.79 1.36.073.11.188-.02 2.856-.606 1.543-.28 1.841-.315.833.388.091.395-.328.807-1.969.486-2.309.462-3.439.813-.042.03.049.061 1.549.146.662.036h1.622l3.02.225.79.522.474.638-.079.485-1.215.62-1.64-.389-3.829-.91-1.312-.329h-.182v.11l1.093 1.068 2.006 1.81 2.509 2.33.127.578-.322.455-.34-.049-2.205-1.657-.851-.747-1.926-1.62h-.128v.17l.444.649 2.345 3.521.122 1.08-.17.353-.608.213-.668-.122-1.374-1.925-1.415-2.167-1.143-1.943-.14.08-.674 7.254-.316.37-.729.28-.607-.461-.322-.747.322-1.476.389-1.924.315-1.53.286-1.9.17-.632-.012-.042-.14.018-1.434 1.967-2.18 2.945-1.726 1.845-.414.164-.717-.37.067-.662.401-.589 2.388-3.036 1.44-1.882.93-1.086-.006-.158h-.055L4.132 18.56l-1.13.146-.487-.456.061-.746.231-.243 1.908-1.312-.006.006z",fill:"#D97757",fillRule:"nonzero"})}),pdt=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fill:"currentColor",d:"M16.765 5h-3.308l5.923 15h3.23zM7.226 5L1.38 20h3.308l1.307-3.154h6.154l1.23 3.077h3.309L10.688 5zm-.308 9.077l2-5.308l2.077 5.308z"})}),TV=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fill:"currentColor",d:"M20.562 10.188c.25-.688.313-1.376.25-2.063c-.062-.687-.312-1.375-.625-2c-.562-.937-1.375-1.687-2.312-2.125c-1-.437-2.063-.562-3.125-.312c-.5-.5-1.063-.938-1.688-1.25S11.687 2 11 2a5.17 5.17 0 0 0-3 .938c-.875.624-1.5 1.5-1.813 2.5c-.75.187-1.375.5-2 .875c-.562.437-1 1-1.375 1.562c-.562.938-.75 2-.625 3.063a5.44 5.44 0 0 0 1.25 2.874a4.7 4.7 0 0 0-.25 2.063c.063.688.313 1.375.625 2c.563.938 1.375 1.688 2.313 2.125c1 .438 2.062.563 3.125.313c.5.5 1.062.937 1.687 1.25S12.312 22 13 22a5.17 5.17 0 0 0 3-.937c.875-.625 1.5-1.5 1.812-2.5a4.54 4.54 0 0 0 1.938-.875c.562-.438 1.062-.938 1.375-1.563c.562-.937.75-2 .625-3.062c-.125-1.063-.5-2.063-1.188-2.876m-7.5 10.5c-1 0-1.75-.313-2.437-.875c0 0 .062-.063.125-.063l4-2.312a.5.5 0 0 0 .25-.25a.57.57 0 0 0 .062-.313V11.25l1.688 1v4.625a3.685 3.685 0 0 1-3.688 3.813M5 17.25c-.438-.75-.625-1.625-.438-2.5c0 0 .063.063.125.063l4 2.312a.56.56 0 0 0 .313.063c.125 0 .25 0 .312-.063l4.875-2.812v1.937l-4.062 2.375A3.7 3.7 0 0 1 7.312 19c-1-.25-1.812-.875-2.312-1.75M3.937 8.563a3.8 3.8 0 0 1 1.938-1.626v4.751c0 .124 0 .25.062.312a.5.5 0 0 0 .25.25l4.875 2.813l-1.687 1l-4-2.313a3.7 3.7 0 0 1-1.75-2.25c-.25-.937-.188-2.062.312-2.937M17.75 11.75l-4.875-2.812l1.687-1l4 2.312c.625.375 1.125.875 1.438 1.5s.5 1.313.437 2.063a3.7 3.7 0 0 1-.75 1.937c-.437.563-1 1-1.687 1.25v-4.75c0-.125 0-.25-.063-.312c0 0-.062-.126-.187-.188m1.687-2.5s-.062-.062-.125-.062l-4-2.313c-.125-.062-.187-.062-.312-.062s-.25 0-.313.062L9.812 9.688V7.75l4.063-2.375c.625-.375 1.312-.5 2.062-.5c.688 0 1.375.25 2 .688c.563.437 1.063 1 1.313 1.625s.312 1.375.187 2.062m-10.5 3.5l-1.687-1V7.063c0-.688.187-1.438.562-2C8.187 4.438 8.75 4 9.375 3.688a3.37 3.37 0 0 1 2.062-.313c.688.063 1.375.375 1.938.813c0 0-.063.062-.125.062l-4 2.313a.5.5 0 0 0-.25.25c-.063.125-.063.187-.063.312zm.875-2L12 9.5l2.187 1.25v2.5L12 14.5l-2.188-1.25z"})}),mdt=({size:e=24,className:t=""})=>h.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{fill:"currentColor",d:"M24 12.024c-6.437.388-11.59 5.539-11.977 11.976h-.047C11.588 17.563 6.436 12.412 0 12.024v-.047C6.437 11.588 11.588 6.437 11.976 0h.047c.388 6.437 5.54 11.588 11.977 11.977z"})}),gdt={"claude-code":d9},bdt={google:mdt,openai:TV,codex:TV,anthropic:pdt,"claude-code":d9},ydt=(e,t)=>gdt[e]||bdt[t]||fR,CV=e=>e.startsWith("Claude ")||e.startsWith("Gemini ")?e.slice(7):e,vdt={id:"claude-haiku-4-5",name:"Claude Haiku 4.5",Icon:d9,provider:"claude-code"},kV="";function xdt(){var ms,Cp,Nh,kp,_g,uc,Ap,Sg,Tg;const[e,t]=x.useState(null),[n,r]=x.useState(null),[o,s]=x.useState(null),[i,a]=x.useState(()=>[{...By("tab-1","browser"),url:kV,title:"New Tab"}]),[l,c]=x.useState("tab-1"),u=i.find(N=>N.id===l)||i[0],[f,m]=x.useState(!1),{errors:g,clearErrors:y,removeError:v,searchForSolution:w}=adt({onErrorDetected:N=>{console.log("[App] Error detected:",N.category,"-",N.message.substring(0,100)),N.isCritical&&m(!0)},onSolutionFound:N=>{console.log("[App] Solution found for:",N.category)},enableAutoSearch:!0,debounceMs:1e3}),_=x.useCallback((N="browser")=>{const G=By(void 0,N);a(oe=>[...oe,G]),c(G.id)},[]),T=x.useCallback(N=>{const G=i.find(oe=>oe.id===N);G!=null&&G.projectPath&&!window.confirm(`Close project "${G.title||"Untitled"}"?

This will close the project and clear its chat history.`)||(a(oe=>{const ve=oe.filter(Ae=>Ae.id!==N);if(ve.length===0)return oe;if(N===l){const Ae=oe.findIndex(He=>He.id===N),Ie=Math.min(Ae,ve.length-1);c(ve[Ie].id)}return ve}),G!=null&&G.projectPath&&(he([]),Xr([]),et(null)))},[l,i]),k=x.useCallback(N=>{c(N)},[]),M=x.useCallback(N=>{a(G=>{const oe=new Map(G.map(ve=>[ve.id,ve]));return N.map(ve=>oe.get(ve.id)).filter(Boolean)})},[]);x.useEffect(()=>{ee(u.url||"")},[l,u.url]),x.useEffect(()=>{async function N(){var G;if(!q.current&&(q.current=!0,!!((G=window.electronAPI)!=null&&G.tabdata)))try{const[oe,ve,Ae]=await Promise.all([window.electronAPI.tabdata.loadKanban(void 0),window.electronAPI.tabdata.loadTodos(void 0),window.electronAPI.tabdata.loadNotes(void 0)]),Ie=[];if(oe.success&&Array.isArray(oe.data)&&oe.data.length>0)for(const He of oe.data)console.log("[TabData] Loaded kanban board:",He.boardId,He.boardTitle),Ie.push({...By(void 0,"kanban"),title:He.boardTitle||"Kanban",kanbanData:{boardId:He.boardId,boardTitle:He.boardTitle||"Kanban",columns:He.columns||[]}});ve.success&&ve.data&&(console.log("[TabData] Loaded todos data"),Ie.push({...By(void 0,"todos"),todosData:{items:ve.data.items}})),Ae.success&&Ae.data&&(console.log("[TabData] Loaded notes data"),Ie.push({...By(void 0,"notes"),notesData:{content:Ae.data.content}})),Ie.length>0&&a(He=>[...He,...Ie])}catch(oe){console.error("[TabData] Error loading tab data:",oe)}}N()},[]);const D=x.useCallback(N=>{a(G=>G.map(oe=>oe.id===l?{...oe,...N}:oe))},[l]),I=x.useCallback((N,G)=>{a(oe=>oe.map(ve=>ve.id===N?{...ve,...G}:ve))},[]),P=x.useRef(null),B=x.useRef(null),U=x.useRef(null),j=x.useRef(i),H=x.useRef(l),q=x.useRef(!1);x.useEffect(()=>{j.current=i},[i]),x.useEffect(()=>{H.current=l},[l]),x.useEffect(()=>{var oe,ve,Ae;async function N(){var Ie;if((Ie=window.electronAPI)!=null&&Ie.window)try{const He=await window.electronAPI.window.getInfo();He.windowId&&t(He.windowId),He.projectPath&&(r(He.projectPath),s(He.projectName),console.log(`[Window] Window ${He.windowId} locked to project: ${He.projectPath}`))}catch(He){console.warn("[Window] Failed to get window info:",He)}}N();const G=(Ae=(ve=(oe=window.electronAPI)==null?void 0:oe.window)==null?void 0:ve.onInfo)==null?void 0:Ae.call(ve,Ie=>{Ie.windowId&&t(Ie.windowId),Ie.projectPath&&(r(Ie.projectPath),s(Ie.projectName))});return()=>{G==null||G()}},[]);const z=x.useRef(new Set);x.useEffect(()=>{var ve;const N=u==null?void 0:u.projectPath;if(!N||!((ve=window.electronAPI)!=null&&ve.mgrep))return;if(z.current.has(N)){console.log("[mgrep] Already handled for:",N);return}let G=!1;return(async()=>{try{const Ae=await Promise.race([window.electronAPI.mgrep.getStatus(N),new Promise((Ie,He)=>setTimeout(()=>He(new Error("Timeout")),5e3))]);if(G)return;if(Ae.success&&Ae.status&&!Ae.status.ready){if(!localStorage.getItem("mgrep-onboarding-seen")){z.current.has("__onboarding_shown__")||(setTimeout(()=>{G||sp(!0)},1500),z.current.add("__onboarding_shown__"));return}localStorage.getItem("mgrep-auto-init")==="true"?(console.log("[mgrep] Initializing for:",N),window.electronAPI.mgrep.initialize(N).then(()=>{z.current.add(N),console.log("[mgrep]  Initialized for:",N)}).catch(gt=>{console.error("[mgrep] Auto-init failed:",gt)})):z.current.add(N)}else Ae.success&&Ae.status&&Ae.status.ready&&(z.current.add(N),console.log("[mgrep] Already ready for:",N))}catch(Ae){console.error("[mgrep] Status check failed:",Ae)}})(),()=>{G=!0}},[u==null?void 0:u.projectPath]),x.useCallback(N=>{console.log("[TabData] handleUpdateKanbanColumns called, columns:",N.length);const G=j.current.find(oe=>oe.id===H.current);G!=null&&G.kanbanData&&(D({kanbanData:{...G.kanbanData,columns:N}}),P.current&&clearTimeout(P.current),P.current=setTimeout(async()=>{var ve,Ae,Ie;const oe=j.current.find(He=>He.id===H.current);if(console.log("[TabData] Debounce fired, activeTab:",oe==null?void 0:oe.id,"type:",oe==null?void 0:oe.type,"hasTabdata:",!!((ve=window.electronAPI)!=null&&ve.tabdata)),(Ae=window.electronAPI)!=null&&Ae.tabdata&&(oe!=null&&oe.kanbanData))try{const He=await window.electronAPI.tabdata.saveKanban(oe.projectPath,{boardId:oe.kanbanData.boardId,boardTitle:oe.kanbanData.boardTitle,columns:N,updatedAt:new Date().toISOString()});console.log("[TabData] Kanban save result:",He)}catch(He){console.error("[TabData] Failed to save kanban:",He)}else console.warn("[TabData] Cannot save - tabdata API:",!!((Ie=window.electronAPI)!=null&&Ie.tabdata),"activeTab:",!!oe)},500))},[D]),x.useCallback(N=>{D({todosData:{items:N}}),B.current&&clearTimeout(B.current),B.current=setTimeout(async()=>{var oe;const G=j.current.find(ve=>ve.id===H.current);if((oe=window.electronAPI)!=null&&oe.tabdata&&G)try{await window.electronAPI.tabdata.saveTodos(G.projectPath,{items:N,updatedAt:new Date().toISOString()}),console.log("[TabData] Todos saved")}catch(ve){console.error("[TabData] Failed to save todos:",ve)}},500)},[D]);const Z=x.useCallback(N=>{D({notesData:{content:N}}),U.current&&clearTimeout(U.current),U.current=setTimeout(async()=>{var oe;const G=j.current.find(ve=>ve.id===H.current);if((oe=window.electronAPI)!=null&&oe.tabdata&&G)try{await window.electronAPI.tabdata.saveNotes(G.projectPath,{content:N,updatedAt:new Date().toISOString()}),console.log("[TabData] Notes saved")}catch(ve){console.error("[TabData] Failed to save notes:",ve)}},500)},[D]);x.useCallback(N=>{const G=j.current.find(oe=>oe.id===H.current);G!=null&&G.kanbanData&&(D({title:N,kanbanData:{...G.kanbanData,boardTitle:N}}),P.current&&clearTimeout(P.current),P.current=setTimeout(async()=>{var ve;const oe=j.current.find(Ae=>Ae.id===H.current);if((ve=window.electronAPI)!=null&&ve.tabdata&&(oe!=null&&oe.kanbanData))try{const Ae=await window.electronAPI.tabdata.saveKanban(oe.projectPath,{boardId:oe.kanbanData.boardId,boardTitle:N,columns:oe.kanbanData.columns,updatedAt:new Date().toISOString()});console.log("[TabData] Kanban title saved:",Ae)}catch(Ae){console.error("[TabData] Failed to save kanban title:",Ae)}},500))},[D]);const X=i.map(N=>({id:N.id,title:N.title||"Cluso",url:N.url,favicon:N.favicon,type:N.type||"browser",isProject:!!N.projectPath})),[J,ee]=x.useState(kV),[re,ie]=x.useState(!1),[K,te]=x.useState(!1),[se,Q]=x.useState(!1),[Te,ge]=x.useState(""),[Ce,he]=x.useState([]),[Fe,Oe]=x.useState(""),[Re,nt]=x.useState(null),[ue,et]=x.useState(null),ut=x.useRef(null);x.useEffect(()=>{ut.current=ue},[ue]);const{questions:Yt,dismissQuestion:Ht,refreshQuestions:Pt}=Yot();x.useEffect(()=>{Pt({messages:Ce,selectedElement:ue,currentTab:"chat"})},[Ce,ue,Pt]);const tn=x.useRef(()=>{}),[vt,me]=x.useState(null),[Ne,$e]=x.useState(null),[Je,Le]=x.useState(null),[Ve,_e]=x.useState(!1),[W,L]=x.useState(!1),[F,ce]=x.useState(!0),[we,ze]=x.useState(420),[Be,ct]=x.useState(!1),ln=x.useRef(null),jt=x.useRef(null),[fn,an]=x.useState(!0),[Wa,An]=x.useState(!1),er=x.useRef(!1),[wt,sn]=x.useState(!1),[ye,Ue]=x.useState(!1),[ht,Jt]=x.useState(!1),[mr,Kn]=x.useState(null),Rt=x.useRef(!1),zt=x.useRef(!1),hn=x.useRef(!1),In=x.useRef(null),[Lr,xs]=x.useState([]),[Go,ws]=x.useState(!1),[Jr,gr]=x.useState([]),[Os,it]=x.useState(!1),rt=x.useRef(null),pt=x.useRef(null),[Vt,Ur]=x.useState(vdt),[Ao,Zn]=x.useState(!1),[Hr,ua]=x.useState(""),[kt,Fn]=x.useState(!1);x.useEffect(()=>{ue&&!F&&Fn(!0)},[ue,F]);const[mt,Xr]=x.useState([]),[Ps,rr]=x.useState(""),[ft,Nt]=x.useState(!1),[pn,wn]=x.useState([]),[kr,Wo]=x.useState(""),[hs,Zs]=x.useState([]),[zr,Es]=x.useState(0),Vm=x.useCallback(N=>{let ve=(N.path.split("/").pop()||N.path).split("?")[0];if(N.elementType&&(ve+=` / ${N.elementType}`),N.lineStart!==void 0)if(N.lineEnd!==void 0&&N.lineEnd!==N.lineStart){const Ae=N.lineStart.toString(),Ie=N.lineEnd.toString();let He=0;for(;He<Ae.length&&He<Ie.length&&Ae[He]===Ie[He];)He++;const gt=He>0?Ie.slice(He):Ie;ve+=` (${Ae}-${gt})`}else ve+=` (${N.lineStart})`;return ve},[]),[Ru,X0]=x.useState([]),[Od,lh]=x.useState(""),[Yi,_l]=x.useState(!1),[oc,jc]=x.useState([]),[Js,Pd]=x.useState([]),[ch,On]=x.useState(!1),[Q0,ps]=x.useState(""),[Wr,Mu]=x.useState("include"),[yi,Du]=x.useState("off"),[Sl,$t]=x.useState(!1),Kt=lge(),[Jn,ur]=x.useState(!1),zo=Sot(),[da,uh]=x.useState(!1),[dh,fh]=x.useState(""),[Tl,qm]=x.useState(""),[ep,Cl]=x.useState(!1),[tp,kl]=x.useState(null),[Al,hh]=x.useState(null),[vi,np]=x.useState(null),[Ta,Ld]=x.useState(""),[rp,ph]=x.useState(!1),[i3,op]=x.useState(!1),[Nl,$d]=x.useState(null),[de,Xw]=x.useState(()=>{if(typeof window<"u"){const N=localStorage.getItem("darkMode");return N!==null?N==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),{currentTheme:a3}=lR(),ts=a3.colors,Gm=ts?ddt(ts.background)<.5:de,Uc=ts!=null&&ts.background?XA(ts.background,Gm?25:3):de?"#262626":"#ffffff",Hc=(ts==null?void 0:ts.border)||(de?"#404040":"#e7e5e4");ts!=null&&ts.foreground,ts!=null&&ts.foreground&&XA(ts.foreground,Gm?-30:30);const l3=ts!=null&&ts.background?XA(ts.background,Gm?10:-3):de?"#1a1a1a":"#fafaf9",[c3,Qw]=x.useState(!1),[u3,Wm]=x.useState(!1),[d3,Hb]=x.useState(!1),[Vb,sp]=x.useState(!1),[Ou,qb]=x.useState([]),[Fd,ip]=x.useState(0),[eE,Ym]=x.useState(!1),[Ls,f3]=x.useState(()=>{try{const N=localStorage.getItem("cluso-settings");if(N){const G=JSON.parse(N),oe=new Set((G.models||[]).map(Et=>Et.id)),ve=H2.models.filter(Et=>!oe.has(Et.id)),Ae=[...G.models||[],...ve],Ie=new Set((G.providers||[]).map(Et=>Et.id)),He=H2.providers.filter(Et=>!Ie.has(Et.id)),gt=[...G.providers||[],...He],un=(G.connections||[]).map(Et=>Et.type==="mcp"&&Et.url&&!Et.transport?{...Et,transport:{type:"sse",url:Et.url}}:Et);return{...H2,...G,models:Ae,providers:gt,connections:un}}}catch(N){console.error("Failed to load settings from localStorage:",N)}return H2}),Xs=Hot({googleApiKey:(ms=Ls.providers.find(N=>N.id==="google"))==null?void 0:ms.apiKey});x.useEffect(()=>{try{localStorage.setItem("cluso-settings",JSON.stringify(Ls))}catch(N){console.error("Failed to save settings to localStorage:",N)}},[Ls]);const Km=x.useRef(void 0);x.useEffect(()=>{const N=u==null?void 0:u.projectPath;if(Km.current===void 0){Km.current=N;return}Km.current!==N&&Vb&&sp(!1),Km.current=N},[u==null?void 0:u.projectPath,Vb]);const tE={"claude-code":1,anthropic:2,openai:3,codex:4,google:5},Bd=x.useMemo(()=>Ls.models.map(G=>{const oe=Ls.providers.find(He=>He.id===G.provider),ve=G.provider==="claude-code"?!!Ls.claudeCodeAuthenticated:G.provider==="codex"?!!Ls.codexAuthenticated:(oe==null?void 0:oe.enabled)&&!!(oe!=null&&oe.apiKey),Ae=G.enabled&&ve,Ie=ydt(G.id,G.provider);return{id:G.id,name:G.name,provider:G.provider,Icon:Ie,isAvailable:Ae,isEnabled:G.enabled,isProviderConfigured:ve}}).sort((G,oe)=>{const ve=tE[G.provider]||99,Ae=tE[oe.provider]||99;return ve-Ae}),[Ls.models,Ls.providers,Ls.claudeCodeAuthenticated,Ls.codexAuthenticated]);x.useMemo(()=>Bd.filter(N=>N.isAvailable),[Bd]);const Zm=x.useMemo(()=>Ls.providers.filter(N=>N.enabled&&N.apiKey).map(N=>({id:N.id,apiKey:N.apiKey})),[Ls.providers]),nE=x.useRef(Zm);nE.current=Zm;const Jm=x.useRef(Vt);Jm.current=Vt;const[Qs,_s]=x.useState(null),[mh,Il]=x.useState(!1),[gh,zd]=x.useState("disconnected"),[ap,sc]=x.useState([]);x.useEffect(()=>{if(ap.length>0){const N=setTimeout(()=>{sc([])},5e3);return()=>clearTimeout(N)}},[ap]);const[xi,rE]=x.useState(null),[oE,Xm]=x.useState(!1),[Bn,$s]=x.useState(null),[Vc,sE]=x.useState(!1),{stream:Qm,cancel:iE,isInitialized:Gb}=Krt({onError:N=>console.error("[AI SDK] Error:",N),onTextDelta:N=>{console.log("[Stream] Text delta:",N.substring(0,50)),_s(G=>G?{...G,content:G.content+N}:(console.warn("[Stream] No streaming message state!"),null))},onReasoningDelta:N=>{console.log("[Stream] Reasoning delta:",N.substring(0,50)),_s(G=>G?{...G,reasoning:G.reasoning+N}:null)},onToolCall:N=>{_s(G=>G?{...G,toolCalls:[...G.toolCalls,{id:N.toolCallId,name:N.toolName,args:N.args,status:"running"}]}:null),zo.trackStart({id:N.toolCallId,name:N.toolName,args:N.args})},onToolResult:N=>{var oe,ve;if(_s(Ae=>Ae?{...Ae,toolCalls:Ae.toolCalls.map(Ie=>Ie.id===N.toolCallId?{...Ie,status:"complete",result:N.result}:Ie)}:null),N.result&&typeof N.result=="object"&&"error"in N.result){const Ae=String(N.result.error),Ie=((oe=N.toolName)==null?void 0:oe.replace(/^mcp_[^_]+_/,""))||"tool",He=Jot(N.toolCallId,Ie,new Error(Ae)),gt=Xot(He);console.log(`[Tool Error] ${gt.title}: ${gt.description}`),zo.trackError(N.toolCallId,Ae)}else{zo.trackSuccess(N.toolCallId,N.result);const Ae=((ve=N.toolName)==null?void 0:ve.toLowerCase())||"";if(Ae.includes("write")||Ae.includes("edit")){const Ie=N.result,He=(Ie==null?void 0:Ie.path)||(Ie==null?void 0:Ie.file_path)||(Ie==null?void 0:Ie.filePath);typeof He=="string"&&(console.log("[Tool Result] File modification detected:",Ae,He),tn.current({type:"write",path:He,newContent:void 0}))}}}});x.useEffect(()=>{Gb&&gh==="disconnected"&&zd("idle")},[Gb,gh]);const Wb=x.useMemo(()=>(Ls.connections||[]).filter(N=>N.type==="mcp"&&"transport"in N).filter(N=>N.enabled),[Ls.connections]),{allTools:eg,callTool:aE}=Eot({initialServers:Wb,autoConnect:!0,onError:(N,G)=>{console.error(`[MCP] Error${G?` on server ${G}`:""}:`,N.message)}}),tg=x.useMemo(()=>eg.map(N=>{var G,oe;return{name:N.name,description:N.description,inputSchema:{type:"object",properties:((G=N.inputSchema)==null?void 0:G.properties)||{},required:((oe=N.inputSchema)==null?void 0:oe.required)||[]},serverId:N.serverId}}),[eg]),[Yb,Kb]=x.useState(null),jd=x.useRef(null),h3=x.useCallback(N=>new Promise(G=>{jd.current=G,Kb(N)}),[]),p3=x.useCallback((N,G)=>{jd.current&&(jd.current(G),jd.current=null),Kb(null)},[]),m3=x.useCallback(N=>{jd.current&&(jd.current("skipped"),jd.current=null),Kb(null)},[]),{isProcessing:Ca,updateContext:lp,processMessage:ng,setProcessing:rg}=iot({mcpTools:tg,callMCPTool:aE,onFileModified:x.useCallback(N=>{tn.current(N)},[]),onAskClarifyingQuestion:h3}),[lE,bh]=x.useState(!1),[cp,og]=x.useState(""),[Sr,Ya]=x.useState(null),[up,dp]=x.useState(!1),[Ka,wi]=x.useState([]),[Pu,fp]=x.useState(!1),[ka,Za]=x.useState("desktop"),Zb=[{name:"iPhone SE",width:375,height:667,type:"mobile"},{name:"iPhone 14",width:390,height:844,type:"mobile"},{name:"iPhone 14 Pro Max",width:430,height:932,type:"mobile"},{name:"iPhone 15 Pro",width:393,height:852,type:"mobile"},{name:"Samsung Galaxy S21",width:360,height:800,type:"mobile"},{name:"Pixel 7",width:412,height:915,type:"mobile"},{name:"iPad Mini",width:768,height:1024,type:"tablet"},{name:"iPad Air",width:820,height:1180,type:"tablet"},{name:'iPad Pro 11"',width:834,height:1194,type:"tablet"},{name:'iPad Pro 12.9"',width:1024,height:1366,type:"tablet"},{name:"Surface Pro 7",width:912,height:1368,type:"tablet"},{name:"Galaxy Tab S7",width:800,height:1280,type:"tablet"}],[Li,Jb]=x.useState(null),[cE,g3]=x.useState(375),[uE,dE]=x.useState(667),[yh,sg]=x.useState(!1),[Aa,Ud]=x.useState(!1),[Ki,vh]=x.useState("fit"),[hp,xh]=x.useState(!1),pp=[{value:"fit",label:"Fit"},{value:"50",label:"50%"},{value:"75",label:"75%"},{value:"100",label:"100%"},{value:"125",label:"125%"},{value:"150",label:"150%"}],mp=yh?cE:(Li==null?void 0:Li.width)??(ka==="tablet"?768:375),qc=yh?uE:(Li==null?void 0:Li.height)??(ka==="tablet"?1024:667),Xb=N=>{Jb(N),sg(!1),Za(N.type),Ud(!1)},ig=()=>{sg(!0),Jb(null),Za("mobile"),Ud(!1)},[Zi,ag]=x.useState([]),[Fs,lg]=x.useState(!1),[Rl,fE]=x.useState(192),[Ml,Lu]=x.useState(new Set),[wh,Qb]=x.useState(!1),cg=x.useRef(0),ey=x.useRef(192),fa=x.useRef(null),[oi,ic]=x.useState(new Set),Gc=x.useRef(null),[Eh,Dl]=x.useState(!1);x.useCallback((N,G,oe)=>{const ve=oe!==void 0?`[${N}] ${G}: ${typeof oe=="object"?JSON.stringify(oe,null,2):oe}`:`[${N}] ${G}`;console.log(ve),Eh&&ag(Ae=>[...Ae.slice(-199),{type:"info",message:ve,timestamp:new Date}])},[Eh]);const[po,Ja]=x.useState(null),[Bs,Ol]=x.useState(null),Ss=cot(Bs==null?void 0:Bs.fileName),hE=x.useCallback(N=>{if(!Bs)return;const oe=N.target.closest("pre");if(!oe)return;const ve=oe.getBoundingClientRect(),Ae=20,Ie=8,He=N.clientY-ve.top,gt=N.clientX-ve.left,un=Math.floor(He/Ae)+Bs.startLine,Et=Math.floor(gt/Ie);Ss.showHover(N.clientX,N.clientY,un,Et)},[Bs,Ss]),[Hd,$i]=x.useState([]),[ug,ns]=x.useState(!1),[lo,Mr]=x.useState(""),co=x.useRef([]),No=x.useRef(!1);x.useEffect(()=>{co.current=Hd,No.current=ug},[Hd,ug]);const ac=x.useRef(null),Wc=x.useRef(null),Xn=x.useRef(new Map);x.useCallback(N=>Xn.current.get(N),[]),Xn.current.get(l);const rs=u.isWebviewReady,Tn=typeof window<"u"&&((Cp=window.electronAPI)==null?void 0:Cp.isElectron);x.useEffect(()=>{console.log("isElectron:",Tn),console.log("electronAPI:",window.electronAPI)},[Tn]),x.useEffect(()=>{localStorage.setItem("darkMode",String(de))},[de]),x.useEffect(()=>{var ve,Ae,Ie,He;(async()=>{var gt;if((gt=window.electronAPI)!=null&&gt.fastApply)try{const un=await window.electronAPI.fastApply.getStatus();Wm(un.ready)}catch(un){console.log("[FastApply] Status check error:",un)}})();const G=(Ae=(ve=window.electronAPI)==null?void 0:ve.fastApply)==null?void 0:Ae.onModelLoaded(()=>{Wm(!0)}),oe=(He=(Ie=window.electronAPI)==null?void 0:Ie.fastApply)==null?void 0:He.onModelUnloaded(()=>{Wm(!1)});return()=>{G==null||G(),oe==null||oe()}},[]),x.useEffect(()=>{Rt.current=wt},[wt]),x.useEffect(()=>{zt.current=ye},[ye]),x.useEffect(()=>{hn.current=ht},[ht]),x.useEffect(()=>{if(wt){In.current={model:Vt,thinkingLevel:yi};const N=Bd.find(G=>G.id==="claude-haiku-4-5"&&G.isAvailable)||Bd.find(G=>G.id.includes("haiku")&&G.isAvailable)||Bd.find(G=>G.id.includes("gemini-2")&&G.id.includes("flash")&&G.isAvailable)||Bd.find(G=>G.id.includes("flash")&&G.isAvailable);N&&(console.log("[Inspector] Switching to fast model:",N.id),Ur({id:N.id,name:N.name,provider:N.provider,Icon:N.Icon})),yi!=="off"&&(console.log("[Inspector] Disabling thinking mode"),Du("off"))}else In.current&&(console.log("[Inspector] Restoring previous model:",In.current.model.id),Ur(In.current.model),Du(In.current.thinkingLevel),In.current=null)},[wt]);const $u=x.useCallback(()=>{Xw(N=>!N)},[]),ty=x.useCallback(N=>{N.preventDefault(),ct(!0)},[]);x.useEffect(()=>{if(!Be)return;const N=oe=>{const ve=window.innerWidth-oe.clientX;ze(Math.max(430,Math.min(800,ve)))},G=()=>{ct(!1)};return document.addEventListener("mousemove",N),document.addEventListener("mouseup",G),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",G)}},[Be]);const gp=x.useCallback(N=>{N.preventDefault(),cg.current=N.clientY,ey.current=Rl,Qb(!0)},[Rl]);x.useEffect(()=>{if(!wh)return;const N=oe=>{const ve=cg.current-oe.clientY,Ae=ey.current+ve;fE(Math.max(100,Math.min(500,Ae)))},G=()=>{Qb(!1)};return document.addEventListener("mousemove",N),document.addEventListener("mouseup",G),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",G)}},[wh]);const dg=x.useCallback(async N=>{kl("stash"),N&&N.trim()?await Kt.stashWithMessage(N.trim()):await Kt.stash(),kl(null),bh(!1),og("")},[Kt]),Pl=x.useCallback(()=>{console.log("[Exec] Changes confirmed"),Ya(null),he(N=>[...N,{id:Date.now().toString(),role:"system",content:"Changes confirmed.",timestamp:new Date}]),Dme().catch(N=>console.error("[Audio] Approval sound error:",N))},[]),ha=x.useCallback(async()=>{const N=Xn.current.get(l);console.log("[Exec] Rejecting change, pendingChange:",Sr),console.log("[Exec] undoCode:",Sr==null?void 0:Sr.undoCode),console.log("[Exec] webview:",!!N);let G=!1;if(Sr!=null&&Sr.undoCode&&N){console.log("[Exec] Rejecting - running undo code:",Sr.undoCode);try{await N.executeJavaScript(Sr.undoCode),console.log("[Exec] Undo executed successfully"),G=!0}catch(oe){console.error("[Exec] Undo error:",oe)}}else console.log("[Exec] No undo code available or no webview");if(!G&&N){console.log("[Exec] Undo failed - reloading page as fallback");try{N.reload(),he(oe=>[...oe,{id:Date.now().toString(),role:"system",content:"Changes discarded. Page reloaded to restore state.",timestamp:new Date}])}catch(oe){console.error("[Exec] Failed to reload:",oe)}}else he(oe=>[...oe,{id:Date.now().toString(),role:"system",content:"Changes discarded.",timestamp:new Date}]);Ya(null),Ome().catch(oe=>console.error("[Audio] Rejection sound error:",oe))},[Sr,l]),Fu=x.useCallback(N=>{console.log("[Voice] User said approve:",N),Pl()},[]),Yc=x.useCallback(N=>{console.log("[Voice] User said reject:",N),ha()},[]),ny=x.useCallback(N=>{console.log("[Voice] User said undo:",N),Sr?ha():(Pme().catch(G=>console.error("[Audio] Undo sound error:",G)),console.log("[Voice] No pending change to undo"))},[Sr]),fg=x.useCallback(N=>{let G=N.trim();!G.startsWith("http://")&&!G.startsWith("https://")&&(G="http://"+G),console.log("Navigating to:",G);const oe=i.find(ve=>ve.projectPath&&ve.url&&ve.url.toLowerCase()===G.toLowerCase());ee(G),oe&&!u.projectPath?(console.log("Inheriting projectPath from matching tab:",oe.projectPath),D({url:G,projectPath:oe.projectPath})):D({url:G})},[D,i,u.projectPath]),_h=x.useCallback(N=>{N.preventDefault(),fg(J)},[J,fg]),hg=x.useCallback(()=>{const N=Xn.current.get(l);N&&Tn&&N.goBack()},[Tn,l]),Vd=x.useCallback(()=>{const N=Xn.current.get(l);N&&Tn&&N.goForward()},[Tn,l]),Ei=x.useCallback(()=>{const N=Xn.current.get(l);N&&Tn&&N.reload()},[Tn,l]),Sh=x.useCallback((N,G)=>{console.log("[AI] Requesting element selection:",N,G);const oe=[{pattern:/:contains\s*\(/i,name:":contains()"},{pattern:/:has\s*\([^)]*text/i,name:":has(text)"},{pattern:/:eq\s*\(/i,name:":eq()"},{pattern:/:gt\s*\(/i,name:":gt()"},{pattern:/:lt\s*\(/i,name:":lt()"},{pattern:/:first(?!\-)/i,name:":first (use :first-child or :first-of-type)"},{pattern:/:last(?!\-)/i,name:":last (use :last-child or :last-of-type)"}];for(const{pattern:Ae,name:Ie}of oe)if(Ae.test(N)){console.error(`[AI] Invalid selector: ${Ie} is not valid CSS. Use attribute selectors like [attr*="text"] instead.`),he(He=>[...He,{id:Date.now().toString(),role:"system",content:`Invalid selector: ${Ie} is jQuery-only, not valid CSS. Use attribute selectors like [attr*="text"] or call get_page_elements first.`,timestamp:new Date}]);return}const ve=Xn.current.get(l);ve&&rs&&(ve.send("select-element-by-selector",N),Ja({selector:N,reasoning:G||""}))},[rs,l]),pE=x.useCallback((N,G)=>{console.log("[AI] Executing code:",G),console.log("[AI] Code to execute:",N);const oe=Xn.current.get(l);if(oe&&rs){const ve=`
        (function() {
          try {
            ${N}
            return { success: true };
          } catch (err) {
            return { success: false, error: err.message, stack: err.stack };
          }
        })()
      `;oe.executeJavaScript(ve).then(Ae=>{if(Ae&&Ae.success)console.log("[AI] Code executed successfully"),he(Ie=>[...Ie,{id:Date.now().toString(),role:"system",content:` ${G}`,timestamp:new Date}]);else{const Ie=(Ae==null?void 0:Ae.error)||"Unknown error";console.error("[AI] Code execution error inside webview:",Ie),Ae!=null&&Ae.stack&&console.error("[AI] Stack:",Ae.stack),he(He=>[...He,{id:Date.now().toString(),role:"system",content:` Error: ${Ie}`,timestamp:new Date}])}}).catch(Ae=>{console.error("[AI] Code execution error (syntax/parse):",Ae),he(Ie=>[...Ie,{id:Date.now().toString(),role:"system",content:` Syntax Error: ${Ae.message}`,timestamp:new Date}])})}},[rs,l]),bp=x.useCallback((N,G)=>{console.log("[AI] Voice confirmation:",N,"element number:",G);const oe=Xn.current.get(l);if(N&&(po!=null&&po.elements)&&po.elements.length>0){const ve=G?Math.min(Math.max(G-1,0),po.elements.length-1):0;et(po.elements[ve]),oe==null||oe.send("clear-selection"),Ja(null)}else oe==null||oe.send("clear-selection"),Ja(null)},[po,l]),b3=x.useCallback(async N=>{console.log("[AI] Highlighting element by number:",N);const G=Xn.current.get(l);if(!G||!rs)return{success:!1,error:"Webview not ready"};const oe=`
      (function() {
        const elementNumber = ${N};
        const elements = window.__numberedElements;

        if (!elements || elements.length === 0) {
          return { success: false, error: 'No numbered elements. Call get_page_elements first.' };
        }

        const index = elementNumber - 1; // Convert to 0-indexed
        if (index < 0 || index >= elements.length) {
          return { success: false, error: 'Element ' + elementNumber + ' not found. Valid range: 1-' + elements.length };
        }

        const element = elements[index];

        // Clear any previous highlight
        document.querySelectorAll('.cluso-highlighted').forEach(el => {
          el.classList.remove('cluso-highlighted');
          el.style.outline = '';
          el.style.outlineOffset = '';
        });

        // Clear all number badges now that user has selected one
        document.querySelectorAll('.element-number-badge').forEach(b => b.remove());

        // Highlight the selected element
        element.classList.add('cluso-highlighted');
        element.style.outline = '3px solid #3b82f6';
        element.style.outlineOffset = '2px';
        element.scrollIntoView({ behavior: 'smooth', block: 'center' });

        // Store as current focus for subsequent operations
        window.__focusedElement = element;

        const text = element.innerText?.substring(0, 50) || '';
        const tag = element.tagName.toLowerCase();

        return {
          success: true,
          element: { number: elementNumber, tag, text: text.trim(), totalElements: elements.length }
        };
      })()
    `;try{const ve=await G.executeJavaScript(oe);return console.log("[AI] Highlight by number result:",ve),ve}catch(ve){return console.error("[AI] Highlight by number error:",ve),{success:!1,error:ve.message}}},[rs,l]),y3=x.useCallback(async()=>{console.log("[AI] Clearing focus scope");const N=Xn.current.get(l);if(!N||!rs)return{success:!1};const G=`
      (function() {
        // Clear focus
        window.__focusedElement = null;

        // Clear all highlights
        document.querySelectorAll('.cluso-highlighted').forEach(el => {
          el.classList.remove('cluso-highlighted');
          el.style.outline = '';
          el.style.outlineOffset = '';
        });

        // Clear number badges
        document.querySelectorAll('.element-number-badge').forEach(b => b.remove());

        // Clear stored elements
        window.__numberedElements = [];

        return { success: true };
      })()
    `;try{return await N.executeJavaScript(G),console.log("[AI] Focus cleared"),{success:!0}}catch(oe){return console.error("[AI] Clear focus error:",oe),{success:!1}}},[rs,l]),zs=x.useCallback(async N=>(console.log("[AI] Setting viewport to:",N),Za(N),{success:!0}),[]),ry=x.useCallback(async N=>{console.log("[AI] Switching to tab type:",N);const G=i.find(oe=>oe.type===N);return G?c(G.id):_(N),{success:!0}},[i,_]),qd=x.useCallback(async(N,G=!0)=>{console.log("[AI] Getting page elements, category:",N,"showBadges:",G);const oe=Xn.current.get(l);if(!oe||!rs)return"Error: Webview not ready";const ve={buttons:'button, [role="button"], [data-slot="button"], input[type="button"], input[type="submit"]',links:'a[href], [role="link"]',inputs:'input, textarea, select, [role="textbox"], [contenteditable="true"]',images:'img, [role="img"], svg',headings:'h1, h2, h3, h4, h5, h6, [role="heading"]',all:'button, [role="button"], a[href], input, textarea, select, img, h1, h2, h3, h4, h5, h6'},Ae=ve[N||"all"]||ve.all,Ie=`
      (function() {
        const category = '${N||"all"}';
        const selector = '${Ae}';
        const showBadges = ${G};
        const results = {};

        // Clear existing number badges
        document.querySelectorAll('.element-number-badge').forEach(b => b.remove());

        // Check if we have a focused element (scoped search)
        const focusScope = window.__focusedElement;
        const searchRoot = focusScope || document;

        // Helper to get element summary
        function summarize(el, number) {
          const text = el.innerText?.substring(0, 50) || '';
          const id = el.id ? '#' + el.id : '';
          const classes = el.className ? '.' + String(el.className).split(' ').filter(c => c && !c.includes('inspector') && !c.includes('cluso')).slice(0, 2).join('.') : '';
          const href = el.getAttribute('href') || '';
          const ariaLabel = el.getAttribute('aria-label') || '';
          return { number, tag: el.tagName.toLowerCase(), id, classes, text: text.trim(), href, ariaLabel };
        }

        // Create number badge
        function createBadge(number) {
          const badge = document.createElement('div');
          badge.className = 'element-number-badge';
          badge.textContent = number;
          badge.style.cssText = 'position:absolute;top:-8px;left:-8px;width:20px;height:20px;background:#3b82f6;color:white;border-radius:50%;font-size:11px;font-weight:bold;display:flex;align-items:center;justify-content:center;z-index:999999;pointer-events:none;box-shadow:0 1px 3px rgba(0,0,0,0.3);';
          return badge;
        }

        // Find elements - scoped to focused element if exists
        const elements = searchRoot.querySelectorAll(selector);
        const numberedElements = [];

        // Collect element info (and optionally add badges)
        elements.forEach((el, idx) => {
          // Skip if element is hidden
          const style = window.getComputedStyle(el);
          if (style.display === 'none' || style.visibility === 'hidden') return;

          const num = numberedElements.length + 1;

          // Only create badges if showBadges is true
          if (showBadges) {
            const badge = createBadge(num);

            // Make element position relative if static
            const pos = style.position;
            if (pos === 'static') {
              el.style.position = 'relative';
            }

            el.appendChild(badge);
          }
          numberedElements.push({ ...summarize(el, num), element: el });
        });

        // Store elements for highlight_element_by_number to use
        window.__numberedElements = numberedElements.map(e => e.element);

        results.totalElements = numberedElements.length;
        results.category = category;
        results.elements = numberedElements.slice(0, 20).map(({ element, ...rest }) => rest); // Return first 20 for AI context
        results.focusScope = focusScope ? {
          tag: focusScope.tagName.toLowerCase(),
          text: (focusScope.innerText || '').substring(0, 30),
          hint: 'Showing elements WITHIN focused scope. Say "clear focus" to see all elements.'
        } : null;
        results.note = numberedElements.length > 0
          ? 'Elements numbered on page. Use highlight_element_by_number(N) to highlight or set focus.'
          : 'No elements found' + (focusScope ? ' within focused area.' : '.');

        return JSON.stringify(results, null, 2);
      })()
    `;try{const He=await oe.executeJavaScript(Ie);return console.log("[AI] Page elements result:",He),He}catch(He){return console.error("[AI] Failed to scan page elements:",He),"Error scanning page: "+He.message}},[rs,l]),{isActive:lc,isPrimed:pg,initialize:Gd,primeContext:Wd}=_ot({cwd:(u==null?void 0:u.projectPath)||void 0,onSelectionResult:x.useCallback(N=>{var G;console.log("[SelectorAgent] Selection result:",N),N.selector?Sh(N.selector,N.reasoning):(G=N.suggestions)!=null&&G.length&&console.log("[SelectorAgent] No match, suggestions:",N.suggestions)},[Sh]),onError:x.useCallback(N=>{console.error("[SelectorAgent] Error:",N)},[])});x.useEffect(()=>{Tn&&!lc&&Gd().then(N=>{N&&console.log("[SelectorAgent] Initialized successfully")})},[Tn,lc,Gd]);const mE=x.useCallback(async()=>{if(!lc)return;const N=await qd("all",!1);if(N&&!N.startsWith("Error")){const G=Xn.current.get(l),oe=G?await G.executeJavaScript("window.location.href").catch(()=>""):"",ve=G?await G.executeJavaScript("document.title").catch(()=>""):"";await Wd({pageElements:N,pageUrl:oe,pageTitle:ve}),console.log("[SelectorAgent] Context primed")}},[lc,qd,Wd,l]);x.useEffect(()=>{if(lc&&rs&&!pg){const N=setTimeout(()=>{mE()},500);return()=>clearTimeout(N)}},[lc,rs,pg,mE]);const gE=x.useCallback(async(N,G,oe,ve)=>{var Ae;if(console.log("[AI] Patching source file:",N,ve),!Tn||!((Ae=window.electronAPI)!=null&&Ae.files))return{success:!1,error:"File editing only available in Electron mode"};try{const Ie=await window.electronAPI.files.readFile(N);if(!Ie.success||!Ie.data)return{success:!1,error:`Could not read file: ${N}`};const He=Ie.data;if(!He.includes(G))return{success:!1,error:`Could not find the code to replace in ${N}. The file may have changed.`};const gt=He.replace(G,oe);return(await window.electronAPI.files.writeFile(N,gt)).success?(he(Et=>[...Et,{id:Date.now().toString(),role:"system",content:` Patched ${N}: ${ve}`,timestamp:new Date}]),{success:!0}):{success:!1,error:`Failed to write file: ${N}`}}catch(Ie){return console.error("[AI] Failed to patch source file:",Ie),{success:!1,error:Ie.message}}},[Tn]);x.useCallback(async N=>{var G;if(console.log("[AI] Listing files:",N),!Tn||!((G=window.electronAPI)!=null&&G.files))return"Error: File listing only available in Electron mode";try{const oe=await window.electronAPI.files.listDirectory(N);return oe.success&&oe.data?oe.data.map(Ae=>`${Ae.isDirectory?"":""} ${Ae.name}${Ae.isDirectory?"/":""}`).join(`
`)||"Empty directory":"Error: Could not list directory"}catch(oe){return"Error: "+oe.message}},[Tn]);const v3=x.useCallback(async N=>{var G;if(console.log("[AI] Reading file:",N),!Tn||!((G=window.electronAPI)!=null&&G.files))return"Error: File reading only available in Electron mode";try{const oe=await window.electronAPI.files.readFile(N);if(oe.success&&oe.data){const ve=oe.data;return ve.length>1e4?ve.substring(0,1e4)+`
... (truncated, file is `+ve.length+" chars)":ve}return"Error: Could not read file"}catch(oe){return"Error: "+oe.message}},[Tn]),bE=x.useCallback(async N=>{console.log("[AI] Clicking element:",N);const G=Xn.current.get(l);if(!G||!rs)return{success:!1,error:"Webview not ready"};try{const oe=`
        (function() {
          const el = document.querySelector('${N.replace(/'/g,"\\'")}');
          if (el) {
            el.click();
            return { success: true };
          }
          return { success: false, error: 'Element not found' };
        })()
      `;return await G.executeJavaScript(oe)}catch(oe){return{success:!1,error:oe.message}}},[rs,l]),Yd=x.useCallback(async(N,G)=>{console.log("[AI] Navigating:",N,G);const oe=Xn.current.get(l);if(!oe)return{success:!1,error:"Webview not available"};try{switch(N){case"back":oe.goBack();break;case"forward":oe.goForward();break;case"reload":oe.reload();break;case"goto":if(G)oe.loadURL(G);else return{success:!1,error:"URL required for goto action"};break;default:return{success:!1,error:`Unknown action: ${N}`}}return{success:!0}}catch(ve){return{success:!1,error:ve.message}}},[l]),oy=x.useCallback(async N=>{console.log("[AI] Scrolling to:",N);const G=Xn.current.get(l);if(!G||!rs)return{success:!1,error:"Webview not ready"};try{let oe;return N==="top"?oe="window.scrollTo({ top: 0, behavior: 'smooth' }); true;":N==="bottom"?oe="window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }); true;":oe=`
          (function() {
            const el = document.querySelector('${N.replace(/'/g,"\\'")}');
            if (el) {
              el.scrollIntoView({ behavior: 'smooth', block: 'center' });
              return true;
            }
            return false;
          })()
        `,{success:!!await G.executeJavaScript(oe)}}catch(oe){return{success:!1,error:oe.message}}},[rs,l]),yp=x.useCallback(async N=>{var G;if(console.log("[FileBrowser] Opening:",N),!Tn||!((G=window.electronAPI)!=null&&G.files))return"Error: File browser only available in Electron mode";try{const oe=N||lo||".",ve=await window.electronAPI.files.listDirectory(oe);if(ve.success&&ve.data){const Ae=ve.data.map(He=>({name:He.name,isDirectory:He.isDirectory,path:`${oe}/${He.name}`.replace(/\/\//g,"/")}));lo||Mr(oe);const Ie={type:"directory",path:oe,title:oe.split("/").pop()||oe,items:Ae};return co.current=[Ie],No.current=!0,$i([Ie]),ns(!0),console.log("[FileBrowser] Opened - refs updated:",No.current,co.current.length),`Showing ${Ae.length} items. Say "open" followed by a number to open an item.`}return"Error: Could not list directory"}catch(oe){return"Error: "+oe.message}},[Tn,lo]),sy=x.useCallback(async N=>{var He,gt,un;console.log("[FileBrowser] Opening item:",N),console.log("[FileBrowser] State check - visible:",No.current,"stack length:",co.current.length);const G=co.current,oe=No.current;if(!oe||G.length===0)return`Error: No file browser open. (visible: ${oe}, stack: ${G.length})`;const ve=G[G.length-1];if(ve.type!=="directory"||!ve.items)return"Error: Current panel is not a directory";const Ae=N-1;if(Ae<0||Ae>=ve.items.length)return`Error: Invalid item number. Choose 1-${ve.items.length}`;const Ie=ve.items[Ae];if(Ie.isDirectory){if(!Tn||!((He=window.electronAPI)!=null&&He.files))return"Error: File browser only available in Electron mode";const Et=await window.electronAPI.files.listDirectory(Ie.path);if(Et.success&&Et.data){const _n=Et.data.map(_t=>({name:_t.name,isDirectory:_t.isDirectory,path:`${Ie.path}/${_t.name}`.replace(/\/\//g,"/")})),at={type:"directory",path:Ie.path,title:Ie.name,items:_n};return co.current=[...G,at],$i(_t=>[..._t,at]),`Opened folder "${Ie.name}" with ${_n.length} items.`}return"Error: Could not open folder"}else{const Et=(gt=Ie.name.split(".").pop())==null?void 0:gt.toLowerCase();if(["png","jpg","jpeg","gif","svg","webp","ico"].includes(Et||"")){const at={type:"image",path:Ie.path,title:Ie.name};return co.current=[...G,at],$i(_t=>[..._t,at]),`Showing image "${Ie.name}"`}else{if(!Tn||!((un=window.electronAPI)!=null&&un.files))return"Error: File reading only available in Electron mode";const at=await window.electronAPI.files.readFile(Ie.path);if(at.success&&at.data){const _t=at.data.length>5e4?at.data.substring(0,5e4)+`
... (truncated)`:at.data,yn={type:"file",path:Ie.path,title:Ie.name,content:_t};return co.current=[...G,yn],$i(Yn=>[...Yn,yn]),`Opened file "${Ie.name}"`}return"Error: Could not read file"}}},[Tn]),Kd=x.useCallback(()=>{const N=No.current,G=co.current;if(!N)return"No file browser open";if(G.length<=1)return No.current=!1,co.current=[],ns(!1),$i([]),"Closed file browser";co.current=G.slice(0,-1),$i(ve=>ve.slice(0,-1));const oe=G[G.length-2];return`Back to "${(oe==null?void 0:oe.title)||"root"}"`},[]),vp=x.useCallback(()=>(No.current=!1,co.current=[],ns(!1),$i([]),"Closed file browser"),[]),mg=x.useCallback(async(N,G)=>{var un;console.log("[FileBrowser] Opening folder:",N||`#${G}`),console.log("[FileBrowser] State check - visible:",No.current,"stack length:",co.current.length);const oe=co.current,ve=No.current;if(!ve||oe.length===0)return`Error: No file browser open. Use list_files first to show the file browser. (visible: ${ve}, stack: ${oe.length})`;const Ae=oe[oe.length-1];if(Ae.type!=="directory"||!Ae.items)return"Error: Current panel is not a directory";let Ie,He=-1;if(N){const Et=N.toLowerCase();if(He=Ae.items.findIndex(_n=>_n.isDirectory&&_n.name.toLowerCase()===Et),He===-1&&(He=Ae.items.findIndex(_n=>_n.isDirectory&&_n.name.toLowerCase().includes(Et))),He!==-1)Ie=Ae.items[He];else{const _n=Ae.items.filter(at=>at.isDirectory).map(at=>at.name).join(", ");return`Error: No folder named "${N}" found. Available folders: ${_n||"none"}`}}else if(G!==void 0){const Et=G-1;if(Et<0||Et>=Ae.items.length)return`Error: Invalid item number. Choose 1-${Ae.items.length}`;const _n=Ae.items[Et];if(!_n.isDirectory)return`Error: Item ${G} "${_n.name}" is a file, not a folder. Use open_item for files.`;Ie=_n,He=Et}else return"Error: Please provide either a folder name or item number";if(!Ie)return"Error: Could not find folder";if(!Tn||!((un=window.electronAPI)!=null&&un.files))return"Error: File browser only available in Electron mode";const gt=await window.electronAPI.files.listDirectory(Ie.path);if(gt.success&&gt.data){const Et=gt.data.map(at=>({name:at.name,isDirectory:at.isDirectory,path:`${Ie.path}/${at.name}`.replace(/\/\//g,"/")})),_n={type:"directory",path:Ie.path,title:Ie.name,items:Et};return co.current=[...oe,_n],$i(at=>[...at,_n]),`Opened folder "${Ie.name}" (item ${He+1}) with ${Et.length} items: ${Et.slice(0,5).map((at,_t)=>`${_t+1}. ${at.name}${at.isDirectory?"/":""}`).join(", ")}${Et.length>5?"...":""}`}return"Error: Could not open folder"},[Tn]),gg=x.useCallback(async(N,G)=>{var Ie,He,gt;if(console.log("[FileBrowser] Opening file:",N||G),!Tn||!((Ie=window.electronAPI)!=null&&Ie.files))return"Error: File browser only available in Electron mode";if(G){const un=await window.electronAPI.files.readFile(G);if(un.success&&un.data){const Et=G.split("/").pop()||G,_n=(He=Et.split(".").pop())==null?void 0:He.toLowerCase();if(["png","jpg","jpeg","gif","svg","webp","ico"].includes(_n||"")){const _t={type:"image",path:G,title:Et};return co.current=[_t],No.current=!0,$i([_t]),ns(!0),`Showing image "${Et}"`}else{const _t=un.data.length>5e4?un.data.substring(0,5e4)+`
... (truncated)`:un.data,yn={type:"file",path:G,title:Et,content:_t};return co.current=[yn],No.current=!0,$i([yn]),ns(!0),`Opened file "${Et}"`}}return`Error: Could not read file at ${G}`}if(!N)return"Error: Please provide either a file name or path";const oe=co.current;let ve=lo||".";oe.length>0&&oe[oe.length-1].type==="directory"&&(ve=oe[oe.length-1].path);const Ae=await window.electronAPI.files.listDirectory(ve);if(Ae.success&&Ae.data){const un=N.toLowerCase();let Et=Ae.data.find(at=>!at.isDirectory&&at.name.toLowerCase()===un);if(Et||(Et=Ae.data.find(at=>!at.isDirectory&&at.name.toLowerCase().includes(un))),Et){const at=`${ve}/${Et.name}`.replace(/\/\//g,"/"),_t=await window.electronAPI.files.readFile(at);if(_t.success&&_t.data){const yn=(gt=Et.name.split(".").pop())==null?void 0:gt.toLowerCase(),Yn=["png","jpg","jpeg","gif","svg","webp","ico"].includes(yn||"");if(No.current)if(Yn){const Qr={type:"image",path:at,title:Et.name};return co.current=[...oe,Qr],$i(ss=>[...ss,Qr]),`Showing image "${Et.name}"`}else{const Qr=_t.data.length>5e4?_t.data.substring(0,5e4)+`
... (truncated)`:_t.data,ss={type:"file",path:at,title:Et.name,content:Qr};return co.current=[...oe,ss],$i(eo=>[...eo,ss]),`Opened file "${Et.name}"`}else{const Qr=Ae.data.map(eo=>({name:eo.name,isDirectory:eo.isDirectory,path:`${ve}/${eo.name}`.replace(/\/\//g,"/")})),ss={type:"directory",path:ve,title:ve.split("/").pop()||ve,items:Qr};if(Yn){const eo={type:"image",path:at,title:Et.name};return co.current=[ss,eo],No.current=!0,$i([ss,eo]),ns(!0),`Showing image "${Et.name}"`}else{const eo=_t.data.length>5e4?_t.data.substring(0,5e4)+`
... (truncated)`:_t.data,_i={type:"file",path:at,title:Et.name,content:eo};return co.current=[ss,_i],No.current=!0,$i([ss,_i]),ns(!0),`Opened file "${Et.name}"`}}}return`Error: Could not read file "${Et.name}"`}const _n=Ae.data.filter(at=>!at.isDirectory).map(at=>at.name).slice(0,10).join(", ");return`Error: File "${N}" not found in ${ve}. Available files: ${_n||"none"}${Ae.data.filter(at=>!at.isDirectory).length>10?"...":""}`}return"Error: Could not search directory"},[Tn,lo]),yE=x.useCallback(async N=>yp(N),[yp]),vE=x.useCallback(N=>{console.log("[InstantEdit] Applying HTML update to DOM");const G=Xn.current.get(l);if(!G||!rs){console.warn("[InstantEdit] Webview not ready");return}const oe=`
      (function() {
        try {
          // Replace entire document with new HTML
          document.documentElement.innerHTML = \`${N.replace(/`/g,"\\`")}\`;
          return { success: true, message: 'HTML updated' };
        } catch (err) {
          return { success: false, error: err.message };
        }
      })()
    `;G.executeJavaScript(oe).then(ve=>{ve!=null&&ve.success?(console.log("[InstantEdit] HTML applied to DOM successfully"),he(Ae=>[...Ae,{id:Date.now().toString(),role:"system",content:" UI updated instantly",timestamp:new Date}])):console.error("[InstantEdit] Failed to apply HTML:",ve==null?void 0:ve.error)}).catch(ve=>{console.error("[InstantEdit] Error injecting HTML:",ve)})},[rs,l]),{streamState:Xa,connect:Zd,disconnect:xE,startVideoStreaming:iy,stopVideoStreaming:Bu,stopSpeaking:xp}=age({videoRef:ac,canvasRef:Wc,onCodeUpdate:vE,onElementSelect:Sh,onExecuteCode:pE,onConfirmSelection:bp,onGetPageElements:qd,onPatchSourceFile:gE,onListFiles:yE,onReadFile:v3,onClickElement:bE,onNavigate:Yd,onScroll:oy,onOpenItem:sy,onOpenFile:gg,onOpenFolder:mg,onBrowserBack:Kd,onCloseBrowser:vp,onApproveChange:Fu,onRejectChange:Yc,onUndoChange:ny,onHighlightByNumber:b3,onClearFocus:y3,onSetViewport:zs,onSwitchTab:ry,selectedElement:ue,googleApiKey:(Nh=Ls.providers.find(N=>N.id==="google"))==null?void 0:Nh.apiKey,selectedModelId:Vt.id});x.useEffect(()=>{var N;Tn&&((N=window.electronAPI)!=null&&N.files)&&(window.electronAPI.files.listPrompts().then(G=>{G.success&&G.data&&X0(G.data.map(oe=>({name:oe,prompt:""})))}),window.electronAPI.files.listDirectory().then(G=>{G.success&&G.data&&(console.log("[Files] Loaded directory:",G.data.length,"files"),wn(G.data))}))},[Tn]);const cc=x.useCallback(async N=>{var oe;if(!Tn||!((oe=window.electronAPI)!=null&&oe.files))return;console.log("[@ Files] Loading directory:",N||"(default)");const G=await window.electronAPI.files.listDirectory(N);G.success&&G.data&&(console.log("[@ Files] Loaded",G.data.length,"files from:",N||"(default)"),wn(G.data),N&&Wo(N))},[Tn]),Th=x.useCallback(N=>{Zs(G=>[...G,kr]),cc(N),rr(""),Es(0)},[kr,cc]),wp=x.useCallback(()=>{const N=[...hs],G=N.pop();Zs(N),cc(G||u.projectPath||void 0),rr(""),Es(0)},[hs,cc,u.projectPath]),ay=x.useCallback(async N=>{var oe;if(!Tn||!((oe=window.electronAPI)!=null&&oe.files))return;const G=await window.electronAPI.files.selectFile(N);if(G.success&&G.data){const{path:ve,content:Ae}=G.data;let Ie,He,gt;const un=ve.match(/\((\d+)-(\d+)\)$/);if(un)Ie=parseInt(un[1],10),He=parseInt(un[2],10);else{const Et=ve.match(/\((\d+)\)$/);Et&&(Ie=parseInt(Et[1],10))}if(Ae&&Ie){const at=(Ae.split(`
`)[0]||"").match(/(?:function|const|export\s+(?:default\s+)?(?:function|const)?)\s+(\w+)/);at&&(gt=at[1])}Xr(Et=>[...Et,{path:ve,content:Ae,lineStart:Ie,lineEnd:He,elementType:gt}]),Oe(Et=>{const _n=Et.lastIndexOf("@");if(_n===-1)return"";const at=Et.substring(0,_n),_t=ve.split("/").pop()||ve;return`${at}[${_t}] `}),Nt(!1),rr(""),Es(0)}},[Tn]),zu=x.useCallback(async N=>{var oe;if(!Tn||!((oe=window.electronAPI)!=null&&oe.files))return;const G=await window.electronAPI.files.readPrompt(N);G.success&&G.data&&(Oe(G.data),_l(!1),lh(""),Es(0))},[Tn]),Ch=pn.filter(N=>!N.name.startsWith(".")&&N.name.toLowerCase().includes(Ps.toLowerCase())),Kc=x.useMemo(()=>[{name:"new",prompt:"Clear the conversation"},{name:"clear",prompt:"Clear the conversation"},{name:"compact",prompt:"Compact context with optional guidance"},{name:"thinking",prompt:"Set reasoning level: off, low, med, high, ultrathink"}],[]),Jd=x.useMemo(()=>[...Kc,...Ru].filter(G=>G.name.toLowerCase().includes(Od.toLowerCase())),[Kc,Ru,Od]),bg=x.useMemo(()=>Js.filter(N=>{const G=N.name.toLowerCase().includes(Q0.toLowerCase()),oe=oc.some(ve=>ve.name===N.name&&ve.type===N.type);return G&&!oe}),[Js,Q0,oc]),ju=x.useCallback(N=>{jc(G=>G.some(ve=>ve.name===N.name&&ve.type===N.type)?G:[...G,N]),Oe(G=>{const oe=N.type==="include"?"+":"-",ve=new RegExp(`\\${oe}[a-zA-Z0-9_-]*$`);return G.replace(ve,"")}),On(!1),ps("")},[]),Uu=x.useCallback(N=>{console.log("[Input] Changed:",N);const G=/\+([a-zA-Z0-9_-]+)\s/g;let oe=N;const ve=[];let Ae;for(;(Ae=G.exec(N))!==null;)ve.push({name:Ae[1],type:"include"}),oe=oe.replace(Ae[0],"");const Ie=N.matchAll(/(?:^|\s)-([a-zA-Z][a-zA-Z0-9_-]*)\s/g);for(const at of Ie)ve.push({name:at[1],type:"exclude"}),oe=oe.replace(at[0],at[0].startsWith(" ")?" ":"");ve.length>0?(jc(at=>{const _t=[...at];return ve.forEach(yn=>{_t.some(Qr=>Qr.name===yn.name&&Qr.type===yn.type)||_t.push(yn)}),_t}),Pd(at=>{const _t=[...at];ve.forEach(Yn=>{const Qr=_t.findIndex(ss=>ss.name===Yn.name);Qr!==-1&&_t.splice(Qr,1),_t.unshift(Yn)});const yn=_t.slice(0,20);try{const Yn=`cluso-context-chips-${u.projectPath||"global"}`;localStorage.setItem(Yn,JSON.stringify(yn))}catch(Yn){console.warn("[ContextChips] Failed to save to localStorage:",Yn)}return yn}),Oe(oe)):Oe(N),Es(0);const He=oe.lastIndexOf("+"),gt=oe.lastIndexOf("-");let un=null,Et=-1;if(He!==-1){const at=He>0?oe.charAt(He-1):" ",_t=oe.substring(He+1),yn=at===" "||He===0,Yn=_t.includes(" ");yn&&!Yn&&(un="+",Et=He)}if(gt!==-1&&gt>Et){const at=gt>0?oe.charAt(gt-1):" ",_t=oe.substring(gt+1),yn=at===" "||gt===0,Yn=_t.includes(" "),Qr=/^[a-zA-Z]/.test(_t);yn&&!Yn&&Qr&&(un="-",Et=gt)}if(un&&Et!==-1){const at=oe.substring(Et+1);ps(at),Mu(un==="+"?"include":"exclude"),On(!0),Nt(!1),_l(!1);return}On(!1),ps("");const _n=N.lastIndexOf("@");if(_n!==-1){const at=N.substring(_n+1);if(at.includes(" "))Nt(!1),rr("");else{const yn=at;console.log("[Input] @ detected at position",_n,"query:",yn),rr(yn),Nt(!0),_l(!1),yn===""&&(console.log("[@ Files] First @, using project path:",u.projectPath||"(none)"),cc(u.projectPath||void 0))}}else if(N.startsWith("/")){const at=N.substring(1);console.log("[Input] / detected, query:",at),lh(at),_l(!0),Nt(!1)}else Nt(!1),_l(!1),rr(""),lh("");if(N.trim().length>=3&&!N.startsWith("@")&&!N.startsWith("/")){const{intent:at}=ng(N),_t={code_edit:"Edit Code",code_create:"Create",code_delete:"Delete",code_explain:"Explain",code_refactor:"Refactor",file_operation:"File Op",ui_inspect:"Inspect",ui_modify:"Modify UI",ui_build:"Build UI",research:"Research",analyze:"Analyze",compare:"Compare",plan:"Plan",document:"Document",test:"Test",debug:"Debug",review:"Review",deploy:"Deploy",configure:"Configure",question:"Question",chat:"Chat",unknown:""};if(at.type!=="unknown"&&at.confidence>.2){const yn=(at.secondaryTypes||[]).filter(Yn=>Yn!==at.type&&Yn!=="unknown");nt({type:at.type,label:_t[at.type]||at.type,secondaryTypes:yn,secondaryLabels:yn.map(Yn=>_t[Yn]||Yn)})}else nt(null)}else nt(null)},[cc,ng,u.projectPath]);x.useEffect(()=>{const N=pt.current;N&&(N.style.height="auto",N.style.height=Math.min(N.scrollHeight,144)+"px")},[Fe]),x.useEffect(()=>{Xa.isConnected&&W?navigator.mediaDevices.getDisplayMedia({video:!0}).then(N=>{ac.current&&(ac.current.srcObject=N,iy()),N.getVideoTracks()[0].onended=()=>{L(!1),Bu()}}).catch(N=>{console.error("Failed to get display media",N),L(!1)}):(Bu(),ac.current&&ac.current.srcObject&&(ac.current.srcObject.getTracks().forEach(G=>G.stop()),ac.current.srcObject=null))},[W,Xa.isConnected,iy,Bu]);const Hu=x.useRef(new Map),yg=x.useRef(new Map),vg=x.useCallback((N,G)=>{console.log(`[Tab ${N}] Setting up webview event handlers`);const oe=()=>{const at=G.getURL();console.log(`[Tab ${N}] Did navigate:`,at),I(N,{canGoBack:G.canGoBack(),canGoForward:G.canGoForward()}),N===l&&ee(at)},ve=()=>{console.log(`[Tab ${N}] Started loading`),I(N,{isLoading:!0})},Ae=()=>{console.log(`[Tab ${N}] Stopped loading`),I(N,{isLoading:!1})},Ie=()=>{const at=G.getURL();console.log(`[Tab ${N}] Page finished loading, URL:`,at),G.send("set-inspector-mode",Rt.current),G.send("set-screenshot-mode",zt.current),I(N,{isWebviewReady:!0})},He=at=>{console.error(`[Tab ${N}] Failed to load:`,at.errorCode,at.errorDescription,at.validatedURL)},gt=at=>{I(N,{title:at.title})},un=at=>{var Yn,Qr,ss,eo,_i,Ia,dc,Ih,Wu,Yu,Rh,Qd,Io,Cs,Si,ef,Np,tf,el,Ip;const{channel:_t,args:yn}=at;if(_t==="inspector-hover"){const Mt=yn[0];me({element:Mt.element,rect:Mt.rect})}else if(_t==="inspector-hover-end")me(null);else if(_t==="inspector-select"){const Mt=yn[0];et({...Mt.element,x:Mt.x,y:Mt.y,rect:Mt.rect}),me(null)}else if(_t==="screenshot-select"){const Mt=yn[0];$e(Mt.element),Ue(!1),G&&Mt.rect&&(G.send("hide-move-handles"),setTimeout(()=>{G.capturePage({x:Math.floor(Mt.rect.left),y:Math.floor(Mt.rect.top),width:Math.ceil(Mt.rect.width),height:Math.ceil(Mt.rect.height)}).then(tr=>{Le(tr.toDataURL()),G.send("show-move-handles")}).catch(tr=>{console.error("Failed to capture screenshot:",tr),G.send("show-move-handles")})},50))}else if(_t==="console-log"){const Mt=yn[0],tr=Mt.level.toLowerCase()==="warning"?"warn":Mt.level.toLowerCase();ag(zn=>[...zn.slice(-99),{type:tr,message:Mt.message,timestamp:new Date}])}else if(_t==="ai-selection-confirmed"){const Mt=yn[0];console.log("[AI] Element selection confirmed:",Mt),Ja(tr=>({selector:Mt.selector,reasoning:(tr==null?void 0:tr.reasoning)||"",count:Mt.count,elements:Mt.elements.map(zn=>({...zn.element,rect:zn.rect}))}))}else if(_t==="ai-selection-failed"){const Mt=yn[0];console.error("[AI] Element selection failed:",Mt),Ja(null),he(tr=>[...tr,{id:Date.now().toString(),role:"system",content:`Could not find element: ${Mt.selector}. ${Mt.error}`,timestamp:new Date}])}else if(_t==="move-select"){const Mt=yn[0];console.log("[Move] Element selected for repositioning:",Mt.element.tagName),et({...Mt.element,rect:Mt.rect}),Kn({x:Mt.rect.left,y:Mt.rect.top,width:Mt.rect.width,height:Mt.rect.height}),me(null)}else if(_t==="move-update"){const Mt=yn[0];console.log("[Move] Position updated:",Mt.targetRect),Kn(Mt.targetRect)}else if(_t==="move-confirmed"){const Mt=yn[0];console.log("[Move] Position confirmed:",Mt.targetRect),et(tr=>tr?{...tr,targetPosition:Mt.targetRect,originalPosition:Mt.originalRect}:null),Jt(!1),Kn(null)}else if(_t==="move-cancelled")console.log("[Move] Cancelled"),et(null),Jt(!1),Kn(null);else if(_t==="drop-image-on-element"){const Mt=yn[0],tr=ut.current,zn={...Mt.element,sourceLocation:tr==null?void 0:tr.sourceLocation},Vr=((Yn=Mt.element.tagName)==null?void 0:Yn.toLowerCase())||"";console.log("[Drop] Image dropped on element:",Vr,"classes:",Mt.element.className,"hasSource:",!!zn.sourceLocation);const jr=j.current.find(dr=>dr.id===N),Gn=jr==null?void 0:jr.projectPath;if(!Gn){console.error("[Drop] No project path set for tab:",N,"tab:",jr),he(dr=>[...dr,{id:Date.now().toString(),role:"system",content:"Cannot save dropped image: no project folder selected. Please set a project folder first.",timestamp:new Date}]);return}const Ro=(dr=>{let fr=0;for(let Hn=0;Hn<Math.min(dr.length,1e4);Hn++){const Un=dr.charCodeAt(Hn);fr=(fr<<5)-fr+Un,fr=fr&fr}return Math.abs(fr).toString(16).padStart(8,"0")})(Mt.imageData),sr=Mt.imageData.match(/^data:image\/(\w+);/),ks=sr?sr[1].replace("jpeg","jpg"):"png",Yr=`img-${Ro}.${ks}`,Xt=`${`${Gn}/public/uploads`}/${Yr}`,mn=`/uploads/${Yr}`,rn=Vr==="img",cn=["div","section","article","aside","header","footer","main","figure","span","p"].includes(Vr);(Qr=window.electronAPI)==null||Qr.files.saveImage(Mt.imageData,Xt).then(async dr=>{var wr,nr,Yo,Mo,si,Rp,As,Ra;if(!(dr!=null&&dr.success))throw new Error((dr==null?void 0:dr.error)||"Failed to save");console.log("[Drop] Image saved:",mn);let fr,Hn,Un,Qn;if(rn){Qn="src";const go=await G.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  return el ? el.src : '';
                })();
              `);if(fr=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${mn}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Hn=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${go}';
                    return 'Reverted';
                  }
                  return 'Element not found';
                })();
              `,Un=`Set image src to ${Yr}`,(nr=(wr=zn.sourceLocation)==null?void 0:wr.sources)!=null&&nr[0]){const Ko=`dom-drop-${Date.now()}`;$s({id:Ko,element:zn,cssChanges:{},srcChange:{oldSrc:go||"",newSrc:mn},description:Un,undoCode:Hn,applyCode:fr,userRequest:"Drop image on element",patchStatus:"preparing"}),Ji(Ko,zn,{},Un,Hn,fr,"Drop image on element",Gn,void 0,{oldSrc:go||"",newSrc:mn})}}else if(cn){const go=await G.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (!el) return null;
                  const img = el.querySelector('img');
                  if (img) {
                    return { hasChildImg: true, childSrc: img.src };
                  }
                  return { hasChildImg: false, currentBg: el.style.backgroundImage };
                })();
              `);if(go!=null&&go.hasChildImg){if(Qn="child-img",fr=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${mn}';
                        return 'Applied to child img';
                      }
                    }
                    return 'Element not found';
                  })();
                `,Hn=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${go.childSrc}';
                        return 'Reverted';
                      }
                    }
                    return 'Element not found';
                  })();
                `,Un=`Set child image src to ${Yr}`,(Mo=(Yo=zn.sourceLocation)==null?void 0:Yo.sources)!=null&&Mo[0]){const Ko=`dom-drop-${Date.now()}`,Zo={id:Ko,element:zn,cssChanges:{},srcChange:{oldSrc:go.childSrc||"",newSrc:mn},description:Un,undoCode:Hn,applyCode:fr,userRequest:"Drop image on child img element",patchStatus:"preparing"};$s(Zo),Ji(Ko,zn,{},Un,Hn,fr,"Drop image on child img element",Gn,void 0,{oldSrc:go.childSrc||"",newSrc:mn})}}else{Qn="background";const Ko=await G.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    return el ? { text: el.textContent, bg: el.style.backgroundImage, bgSize: el.style.backgroundSize, bgPos: el.style.backgroundPosition } : null;
                  })();
                `);if(fr=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = 'url(${mn})';
                      el.style.backgroundSize = 'cover';
                      el.style.backgroundPosition = 'center';
                      el.textContent = '';
                      return 'Applied background-image';
                    }
                    return 'Element not found';
                  })();
                `,Hn=`
                  (function() {
                    const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = '${(Ko==null?void 0:Ko.bg)||""}';
                      el.style.backgroundSize = '${(Ko==null?void 0:Ko.bgSize)||""}';
                      el.style.backgroundPosition = '${(Ko==null?void 0:Ko.bgPos)||""}';
                      el.textContent = '${((Ko==null?void 0:Ko.text)||"").replace(/'/g,"\\'")}';
                      return 'Reverted';
                    }
                    return 'Element not found';
                  })();
                `,Un=`Set background-image to ${Yr}`,(Rp=(si=zn.sourceLocation)==null?void 0:si.sources)!=null&&Rp[0]){const Zo=`dom-drop-${Date.now()}`,Do={id:Zo,element:zn,cssChanges:{backgroundImage:`url(${mn})`,backgroundSize:"cover",backgroundPosition:"center"},description:Un,undoCode:Hn,applyCode:fr,userRequest:"Drop image on container element",patchStatus:"preparing"};$s(Do),Ji(Zo,zn,{backgroundImage:`url(${mn})`,backgroundSize:"cover",backgroundPosition:"center"},Un,Hn,fr,"Drop image on container element",Gn)}}}else{Qn="src";const go=await G.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  return el ? el.src : '';
                })();
              `);if(fr=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el) {
                    el.src = '${mn}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Hn=`
                (function() {
                  const el = document.evaluate('${Mt.element.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el) {
                    el.src = '${go}';
                    return 'Reverted';
                  }
                  return 'Element not found';
                })();
              `,Un=`Set ${Vr} src to ${Yr}`,(Ra=(As=zn.sourceLocation)==null?void 0:As.sources)!=null&&Ra[0]){const Ko=`dom-drop-${Date.now()}`,Zo={id:Ko,element:zn,cssChanges:{},srcChange:{oldSrc:go||"",newSrc:mn},description:Un,undoCode:Hn,applyCode:fr,userRequest:`Drop image on ${Vr} element`,patchStatus:"preparing"};$s(Zo),Ji(Ko,zn,{},Un,Hn,fr,`Drop image on ${Vr} element`,Gn,void 0,{oldSrc:go||"",newSrc:mn})}}await G.executeJavaScript(fr),console.log("[Drop] Applied image with method:",Qn),he(go=>[...go,{id:Date.now().toString(),role:"assistant",content:Un,timestamp:new Date,model:"system",intent:"ui_modify"}]),Ya({code:fr,undoCode:Hn,description:Un,additions:1,deletions:1,source:"dom"})}).catch(dr=>{console.error("[Drop] Failed to save/apply image:",dr),he(fr=>[...fr,{id:Date.now().toString(),role:"system",content:`Failed to apply image: ${dr.message}`,timestamp:new Date}])})}else if(_t==="drop-url-on-element"){const Mt=yn[0];console.log("[Drop] URL dropped on element:",Mt.element.tagName,Mt.url);const tr=(ss=Mt.element.tagName)==null?void 0:ss.toLowerCase();let zn="src";tr==="a"?zn="href":(tr==="img"||tr==="video"||tr==="audio"||tr==="iframe")&&(zn="src");const Vr=`
          (function() {
            const elements = document.querySelectorAll('${Mt.element.tagName}');
            for (const el of elements) {
              if (el.className === '${Mt.element.className}') {
                el.${zn} = '${Mt.url}';
                return 'Applied';
              }
            }
            return 'Element not found';
          })();
        `;G.executeJavaScript(Vr),he(jr=>[...jr,{id:Date.now().toString(),role:"assistant",content:`Set ${zn} to dropped URL on ${Mt.element.tagName}`,timestamp:new Date,model:"system",intent:"ui_modify"}])}else if(_t==="inline-edit-accept"){const Mt=yn[0];console.log("[Inline Edit] Accepted:",{old:(eo=Mt.oldText)==null?void 0:eo.substring(0,30),new:(_i=Mt.newText)==null?void 0:_i.substring(0,30),hasSourceLocation:!!((Ia=Mt.element)!=null&&Ia.sourceLocation),sourceFile:(Yu=(Wu=(Ih=(dc=Mt.element)==null?void 0:dc.sourceLocation)==null?void 0:Ih.sources)==null?void 0:Wu[0])==null?void 0:Yu.file});const tr=(Io=(Qd=(Rh=Mt.element)==null?void 0:Rh.sourceLocation)==null?void 0:Qd.sources)!=null&&Io[0]?Mt.element:ut.current,zn=j.current.find(jr=>jr.id===N),Vr=zn==null?void 0:zn.projectPath;if((Si=(Cs=tr==null?void 0:tr.sourceLocation)==null?void 0:Cs.sources)!=null&&Si[0]&&Vr){const jr={oldText:Mt.oldText,newText:Mt.newText},Gn=`inline-${Date.now()}`;$s({id:Gn,element:tr,cssChanges:{},textChange:Mt.newText,description:`Change text: "${(ef=Mt.oldText)==null?void 0:ef.substring(0,20)}..."  "${(Np=Mt.newText)==null?void 0:Np.substring(0,20)}..."`,undoCode:`document.querySelector('*').textContent = ${JSON.stringify(Mt.oldText)}`,applyCode:`document.querySelector('*').textContent = ${JSON.stringify(Mt.newText)}`,userRequest:"Inline text edit",patchStatus:"preparing",userApproved:!0}),Ji(Gn,tr,{},`Change text to "${(tf=Mt.newText)==null?void 0:tf.substring(0,30)}..."`,"","","Inline text edit",Vr,jr)}else console.log("[Inline Edit] Cannot create source patch - missing source location or project path",{hasSourceLocation:!!((Ip=(el=tr==null?void 0:tr.sourceLocation)==null?void 0:el.sources)!=null&&Ip[0]),projectPath:Vr,element:tr==null?void 0:tr.tagName});he(jr=>{var Gn,xo;return[...jr,{id:Date.now().toString(),role:"assistant",content:`Text changed: "${(Gn=Mt.oldText)==null?void 0:Gn.substring(0,30)}..."  "${(xo=Mt.newText)==null?void 0:xo.substring(0,30)}..."`,timestamp:new Date,model:"system",intent:"ui_modify"}]})}},Et=()=>{console.log(`[Tab ${N}] Webview DOM ready`),I(N,{isWebviewReady:!0}),G.send("set-inspector-mode",Rt.current),G.send("set-screenshot-mode",zt.current)},_n=at=>{const yn={0:"log",1:"info",2:"warn",3:"error"}[at.level]||"log";ag(Yn=>[...Yn.slice(-99),{type:yn,message:at.message,timestamp:new Date}])};G.addEventListener("dom-ready",Et),G.addEventListener("console-message",_n),G.addEventListener("did-navigate",oe),G.addEventListener("did-navigate-in-page",oe),G.addEventListener("did-start-loading",ve),G.addEventListener("did-stop-loading",Ae),G.addEventListener("did-finish-load",Ie),G.addEventListener("did-fail-load",He),G.addEventListener("page-title-updated",gt),G.addEventListener("ipc-message",un);try{G.getURL()&&(I(N,{isWebviewReady:!0}),G.send("set-inspector-mode",Rt.current),G.send("set-screenshot-mode",zt.current))}catch{console.log(`[Tab ${N}] Webview not yet ready for getURL`)}return()=>{G.removeEventListener("dom-ready",Et),G.removeEventListener("console-message",_n),G.removeEventListener("did-navigate",oe),G.removeEventListener("did-navigate-in-page",oe),G.removeEventListener("did-start-loading",ve),G.removeEventListener("did-stop-loading",Ae),G.removeEventListener("did-finish-load",Ie),G.removeEventListener("did-fail-load",He),G.removeEventListener("page-title-updated",gt),G.removeEventListener("ipc-message",un)}},[I]),Ep=x.useCallback(N=>{let G=yg.current.get(N);return G||(G=oe=>{if(oe){const ve=oe;Xn.current.set(N,ve),setTimeout(()=>{const Ae=Hu.current.get(N);Ae&&Ae();const Ie=vg(N,ve);Hu.current.set(N,Ie)},100)}else{const ve=Hu.current.get(N);ve&&ve(),Hu.current.delete(N),Xn.current.delete(N)}},yg.current.set(N,G),G)},[vg]);x.useEffect(()=>{fa.current&&Fs&&fa.current.scrollIntoView({behavior:"smooth"})},[Zi,Fs]);const _p=x.useCallback((N,G)=>{ic(oe=>{const ve=new Set(oe);if(G.shiftKey&&Gc.current!==null){const Ae=Math.min(Gc.current,N),Ie=Math.max(Gc.current,N);for(let He=Ae;He<=Ie;He++)ve.add(He)}else ve.has(N)?ve.delete(N):ve.add(N),Gc.current=N;return ve})},[]),js=x.useMemo(()=>oi.size===0?null:Array.from(oi).sort((N,G)=>N-G).map(N=>Zi[N]).filter(Boolean),[oi,Zi]);x.useEffect(()=>{lp({selectedElement:ue||null,selectedFiles:mt,selectedLogs:(js==null?void 0:js.map(N=>({type:N.type,message:N.message})))||[],projectPath:(u==null?void 0:u.projectPath)||null,recentMessages:Ce.slice(-10)})},[ue,mt,js,u==null?void 0:u.projectPath,Ce]);const wE=x.useCallback(()=>{ag([]),ic(new Set),Gc.current=null},[]),Zc=x.useCallback(N=>{Lu(G=>{const oe=new Set(G);return oe.has(N)?oe.delete(N):oe.add(N),oe})},[]),xg=x.useCallback(()=>{Lu(new Set)},[]),ly=x.useCallback(async N=>{var G,oe;if(!N.trim()||!((oe=(G=window.electronAPI)==null?void 0:G.aiSdk)!=null&&oe.webSearch)){console.warn("[Search] No query or webSearch not available");return}ph(!0),Ld(N),op(!0),np(null);try{const ve=`${N.slice(0,500)} solution fix`;console.log("[Search] Searching for:",ve);const Ae=await window.electronAPI.aiSdk.webSearch(ve,5);Ae.success&&Ae.results?(np(Ae.results),console.log("[Search] Found",Ae.results.length,"results")):(console.error("[Search] Failed:",Ae.error),np([]))}catch(ve){console.error("[Search] Error:",ve),np([])}finally{ph(!1)}},[]),cy=x.useCallback(()=>{vi&&vi.length>0&&($d(vi),op(!1))},[vi]);x.useEffect(()=>{const N=G=>{if(!Fs||oi.size===0)return;const ve=navigator.platform.toUpperCase().indexOf("MAC")>=0?G.metaKey:G.ctrlKey;if(G.key==="Escape")ic(new Set),G.preventDefault();else if(ve&&G.key==="g"){const Ae=Array.from(oi).sort((Ie,He)=>Ie-He).map(Ie=>{var He;return((He=Zi[Ie])==null?void 0:He.message)||""}).join(`
`);ly(Ae),G.preventDefault()}else if(ve&&G.key==="c"&&oi.size>0){const Ae=document.activeElement;if(!((Ae==null?void 0:Ae.tagName)==="INPUT"||(Ae==null?void 0:Ae.tagName)==="TEXTAREA")){const He=Array.from(oi).sort((gt,un)=>gt-un).map(gt=>{const un=Zi[gt];return un?`[${un.type}] ${un.message}`:""}).filter(Boolean).join(`
`);navigator.clipboard.writeText(He),G.preventDefault()}}};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[Fs,oi,Zi,Oe]);const Sp=x.useMemo(()=>Ml.size===0?Zi:Zi.filter(N=>Ml.has(N.type)),[Zi,Ml]);x.useEffect(()=>{if(!Sl)return;const N=G=>{G.target.closest("[data-thinking-popover]")||$t(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[Sl]);const ei=x.useCallback(N=>{const oe=(N.path.split("/").pop()||N.path).split("?")[0];wi(ve=>{const Ae=ve.findIndex(Ie=>Ie.path===N.path);if(Ae>=0){const Ie=[...ve];return Ie[Ae]={...Ie[Ae],additions:Ie[Ae].additions+(N.additions||0),deletions:Ie[Ae].deletions+(N.deletions||0),undoCode:N.undoCode||Ie[Ae].undoCode,originalContent:Ie[Ae].originalContent||N.originalContent,isFileModification:N.isFileModification||Ie[Ae].isFileModification,timestamp:new Date},Ie}return[...ve,{path:N.path,fileName:oe,additions:N.additions||0,deletions:N.deletions||0,undoCode:N.undoCode,originalContent:N.originalContent,isFileModification:N.isFileModification,timestamp:new Date}]})},[]),Qa=x.useCallback(async N=>{var oe,ve;const G=Ka.find(Ae=>Ae.path===N);if(G){if(G.isFileModification&&G.originalContent!==void 0){console.log("[Undo] Restoring file:",N);const{api:Ae}=ui();if((oe=Ae==null?void 0:Ae.files)!=null&&oe.writeFile){const Ie=await Ae.files.writeFile(N,G.originalContent);Ie.success?(console.log("[Undo] File restored successfully"),wi(He=>He.filter(gt=>gt.path!==N))):console.error("[Undo] Failed to restore file:",Ie.error)}return}if(G.undoCode){const Ae=Xn.current.get(l);Ae&&Ae.executeJavaScript(G.undoCode).then(()=>{wi(Ie=>Ie.filter(He=>He.path!==N))}).catch(Ie=>console.error("[Undo] Error:",Ie))}else if(G.isFileModification){console.log("[Undo] Using git checkoutFile to restore:",N);const{api:Ae}=ui();if((ve=Ae==null?void 0:Ae.git)!=null&&ve.checkoutFile)try{const Ie=await Ae.git.checkoutFile(N);Ie.success?(console.log("[Undo] File restored via git checkoutFile"),wi(He=>He.filter(gt=>gt.path!==N))):(console.error("[Undo] Git checkoutFile failed:",Ie.error),wi(He=>He.filter(gt=>gt.path!==N)))}catch(Ie){console.error("[Undo] Git checkoutFile error:",Ie),wi(He=>He.filter(gt=>gt.path!==N))}else console.warn("[Undo] Git checkoutFile not available, cannot restore file"),wi(Ie=>Ie.filter(He=>He.path!==N))}else wi(Ae=>Ae.filter(Ie=>Ie.path!==N))}},[Ka,l]),Vu=x.useCallback(async()=>{var ve,Ae;const N=Xn.current.get(l),{api:G}=ui(),oe=[...Ka].reverse();for(const Ie of oe)Ie.isFileModification&&Ie.originalContent!==void 0?(ve=G==null?void 0:G.files)!=null&&ve.writeFile&&await G.files.writeFile(Ie.path,Ie.originalContent).catch(()=>{}):Ie.isFileModification?(Ae=G==null?void 0:G.git)!=null&&Ae.checkoutFile&&await G.git.checkoutFile(Ie.path).catch(()=>{}):Ie.undoCode&&N&&await N.executeJavaScript(Ie.undoCode).catch(()=>{});wi([]),fp(!1)},[Ka,l]),uy=x.useCallback(()=>{wi([]),fp(!1)},[]);x.useEffect(()=>{tn.current=N=>{console.log("[File Modified] Event:",N.type,N.path);let G=0,oe=0;if(N.type==="write"&&N.originalContent&&N.newContent){const ve=N.originalContent.split(`
`).length,Ae=N.newContent.split(`
`).length;G=Math.max(0,Ae-ve),oe=Math.max(0,ve-Ae),G===0&&oe===0&&(G=1,oe=1)}else N.type==="create"&&N.newContent?G=N.newContent.split(`
`).length:N.type==="delete"&&N.originalContent&&(oe=N.originalContent.split(`
`).length);ei({path:N.path,additions:G,deletions:oe,originalContent:N.originalContent,isFileModification:!0})}},[ei]),x.useEffect(()=>{var G,oe;return!Tn||!((oe=(G=window.electronAPI)==null?void 0:G.agentSdk)!=null&&oe.onFileModified)?void 0:window.electronAPI.agentSdk.onFileModified(ve=>{console.log("[Agent SDK File Modified]",ve.type,ve.path);let Ae=0,Ie=0;if(ve.type==="write"&&ve.originalContent&&ve.newContent){const He=ve.originalContent.split(`
`).length,gt=ve.newContent.split(`
`).length;Ae=Math.max(0,gt-He),Ie=Math.max(0,He-gt),Ae===0&&Ie===0&&(Ae=1,Ie=1)}else ve.type==="create"&&ve.newContent?Ae=ve.newContent.split(`
`).length:ve.type==="delete"&&ve.originalContent&&(Ie=ve.originalContent.split(`
`).length);ei({path:ve.path,additions:Ae,deletions:Ie,originalContent:ve.originalContent,isFileModification:!0})})},[Tn,ei]);const dy=x.useRef(new Set);x.useEffect(()=>{var G;if(!Tn||!((G=window.electronAPI)!=null&&G.fileWatcher))return;const N=window.electronAPI.fileWatcher.onChange(oe=>{console.log("[FileWatcher] File changed:",oe.type,oe.relativePath),ei({path:oe.path,additions:oe.type==="add"||oe.type==="change"?1:0,deletions:oe.type==="unlink"||oe.type==="change"?1:0,isFileModification:!0})});return()=>{console.log("[FileWatcher] App unmounting"),N()}},[Tn]),x.useEffect(()=>{var G;const N=u.projectPath;if(!Tn||!N||!((G=window.electronAPI)!=null&&G.fileWatcher)){Hb(!1);return}if(dy.current.has(N)){console.log("[FileWatcher] Already watching:",N),Hb(!0);return}console.log("[FileWatcher] Starting watcher for:",N),window.electronAPI.fileWatcher.start(N).then(oe=>{oe.success&&(dy.current.add(N),Hb(!0),console.log("[FileWatcher]  Watching:",N))}).catch(oe=>{console.error("[FileWatcher] Start failed:",oe)})},[Tn,u.projectPath]),x.useEffect(()=>{try{const N=`cluso-context-chips-${u.projectPath||"global"}`,G=localStorage.getItem(N);if(G){const oe=JSON.parse(G);Array.isArray(oe)&&(Pd(oe),console.log("[ContextChips] Loaded",oe.length,"recent chips for",N))}else Pd([])}catch(N){console.warn("[ContextChips] Failed to load from localStorage:",N),Pd([])}jc([])},[u.projectPath]),x.useEffect(()=>{if(u.type!=="browser")return;const N=Xn.current.get(l);if(console.log("[Inspector Sync] Effect triggered:",{isElectron:Tn,hasWebview:!!N,isWebviewReady:rs,isInspectorActive:wt,isScreenshotActive:ye}),!Tn){console.log("[Inspector Sync] Skipping: not in Electron");return}if(!N){console.log("[Inspector Sync] Skipping: no webview ref");return}if(!rs){console.log("[Inspector Sync] Skipping: webview not ready");return}try{if(!N.isConnected){console.log("[Inspector Sync] Skipping: webview not connected to DOM");return}}catch(G){console.log("[Inspector Sync] Skipping: webview check failed",G);return}try{N.getWebContentsId()}catch{console.log("[Inspector Sync] Skipping: webview not ready to receive messages");return}console.log("[Inspector Sync] Sending inspector modes to webview:",{isInspectorActive:wt,isScreenshotActive:ye,isMoveActive:ht});try{N.send("set-inspector-mode",wt),N.send("set-screenshot-mode",ye),N.send("set-move-mode",ht),!wt&&!ht&&(et(null),Fn(!1),N.send("clear-selection"))}catch(G){console.warn("[Inspector Sync] Failed to send to webview:",G)}},[wt,ye,ht,Tn,rs,l]),x.useEffect(()=>{const N=Xn.current.get(l)},[Tn,l]),x.useEffect(()=>{F&&Fn(!1)},[F]);const qu=(Qs==null?void 0:Qs.content)??"";x.useEffect(()=>{var N;fn&&!er.current?(N=ln.current)==null||N.scrollIntoView({behavior:"smooth"}):!fn&&(Ce.length>0||mh)&&An(!0)},[Ce,fn,qu,mh]),x.useEffect(()=>{const N=jt.current;if(!N)return;let G;const oe=()=>{er.current=!0,clearTimeout(G),N.scrollHeight-N.scrollTop-N.clientHeight<100?(an(!0),An(!1)):(an(!1),An(!0)),G=setTimeout(()=>{er.current=!1},150)};return N.addEventListener("scroll",oe,{passive:!0}),()=>{N.removeEventListener("scroll",oe),clearTimeout(G)}},[]);const Na=x.useCallback(()=>{var N;an(!0),An(!1),(N=ln.current)==null||N.scrollIntoView({behavior:"smooth"})},[]),Ts=N=>{const G=N.target.files;if(!G)return;Array.from(G).slice(0,5-Jr.length).forEach(ve=>{if(!ve.type.startsWith("image/"))return;const Ae=new FileReader;Ae.onloadend=()=>{const Ie=Ae.result;gr(He=>He.length>=5?He:[...He,Ie])},Ae.readAsDataURL(ve)})},wg=x.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.dataTransfer.types.includes("Files")&&it(!0)},[]),Jc=x.useCallback(N=>{N.preventDefault(),N.stopPropagation(),it(!1)},[]),or=x.useCallback(N=>{N.preventDefault(),N.stopPropagation(),it(!1),Array.from(N.dataTransfer.files).filter(Ae=>Ae.type.startsWith("image/")).slice(0,5-Jr.length).forEach(Ae=>{const Ie=new FileReader;Ie.onloadend=()=>{const He=Ie.result;gr(gt=>gt.length>=5?gt:[...gt,He])},Ie.readAsDataURL(Ae)})},[Jr.length]),mo=x.useCallback(N=>{gr(G=>G.filter((oe,ve)=>ve!==N))},[]),Us=x.useCallback(N=>{const G=N.trim();if(!G.startsWith("/"))return!1;const oe=G.slice(1).split(/\s+/),ve=oe[0].toLowerCase(),Ae=oe.slice(1).join(" ");if(ve==="new"||ve==="clear")return he([]),Oe(""),he([{id:Date.now().toString(),role:"system",content:" Conversation cleared.",timestamp:new Date}]),setTimeout(()=>he([]),1500),!0;if(ve==="compact"){const He=`Please provide a concise summary of our conversation so far. Focus on:
1. Key topics discussed
2. Decisions made
3. Important code changes or files mentioned
4. Outstanding tasks or questions

${Ae?`Additional guidance: ${Ae||"Summarize the key points and decisions from this conversation"}`:""}

Keep the summary brief but comprehensive enough to continue the conversation effectively.`;return he(gt=>[...gt,{id:Date.now().toString(),role:"system",content:` Compacting context${Ae?` with guidance: "${Ae}"`:""}...`,timestamp:new Date}]),setTimeout(()=>{Oe(He);const gt=document.querySelector("form[data-chat-form]");gt&&gt.requestSubmit()},100),!0}if(ve==="thinking"){const Ie=Ae.toLowerCase(),He=["off","low","med","high","ultrathink"];let gt="med";if(Ie==="on"||Ie==="")gt=yi==="off"?"med":"off";else if(He.includes(Ie))gt=Ie;else return he(un=>[...un,{id:Date.now().toString(),role:"system",content:` Invalid thinking level: "${Ae}". Valid options: off, low, med, high, ultrathink`,timestamp:new Date}]),Oe(""),!0;return Du(gt),he(un=>[...un,{id:Date.now().toString(),role:"system",content:`Thinking mode: ${gt.toUpperCase()}`,timestamp:new Date}]),Oe(""),!0}return!1},[yi]),Xd=async N=>{var at,_t,yn,Yn,Qr,ss,eo,_i,Ia,dc,Ih,Wu,Yu,Rh,Qd;if(Us(N)||!N.trim()&&!ue&&Jr.length===0&&!Ne)return;const G=Zot();console.log("[Turn]",G);const oe={id:Date.now().toString(),role:"user",content:N,timestamp:new Date,selectedElement:ue||void 0,turnId:G,sequenceNumber:0};he(Io=>[...Io,oe]),Oe("");let ve="";if(ue){const Io=ue.targetPosition&&ue.originalPosition;ve=`
<selected_element>
${ue.outerHTML||`<${ue.tagName}${ue.id?` id="${ue.id}"`:""}${ue.className?` class="${ue.className}"`:""}>${ue.text||""}</${ue.tagName}>`}

Element Details:
- Tag: ${ue.tagName}
${ue.id?`- ID: ${ue.id}`:""}
${ue.className?`- Classes: ${ue.className}`:""}
${ue.xpath?`- XPath: ${ue.xpath}`:""}
${ue.text?`- Text Content: "${ue.text}"`:""}
${ue.attributes?`- Attributes: ${JSON.stringify(ue.attributes)}`:""}
${ue.computedStyle?`- Computed Style: display=${ue.computedStyle.display}, position=${ue.computedStyle.position}, color=${ue.computedStyle.color}, bg=${ue.computedStyle.backgroundColor}`:""}
${ue.rect?`- Current Position: ${Math.round(ue.rect.width)}x${Math.round(ue.rect.height)} at (${Math.round(ue.rect.left)}, ${Math.round(ue.rect.top)})`:""}
${Io?`
<repositioning_request>
The user wants to MOVE this element to a new position.
- Original Position: ${Math.round(ue.originalPosition.width)}x${Math.round(ue.originalPosition.height)} at (${Math.round(ue.originalPosition.left)}, ${Math.round(ue.originalPosition.top)})
- Target Position: ${Math.round(ue.targetPosition.width)}x${Math.round(ue.targetPosition.height)} at (${Math.round(ue.targetPosition.x)}, ${Math.round(ue.targetPosition.y)})
- Width Change: ${ue.targetPosition.width-ue.originalPosition.width}px
- Height Change: ${ue.targetPosition.height-ue.originalPosition.height}px
- X Offset: ${ue.targetPosition.x-ue.originalPosition.left}px
- Y Offset: ${ue.targetPosition.y-ue.originalPosition.top}px

Please help the user achieve this repositioning by modifying the CSS/layout of the element. Consider:
1. Position property (relative, absolute, fixed, or using flexbox/grid)
2. The element's current CSS and its impact on layout
3. Whether the element needs to be extracted from the normal flow
4. Responsive considerations
</repositioning_request>`:""}
</selected_element>`}let Ae="";mt.length>0&&(Ae=`

Attached Files:
${mt.map(Io=>`
File: ${Io.path}
\`\`\`
${Io.content}
\`\`\`
`).join(`
`)}`);const Ie=u==null?void 0:u.projectPath,He=Ie?Ie.split("/").pop():null;let gt=`
Current Page: ${J}
${Te?`Page Title: ${Te}`:""}
${Ie?`Project Folder: ${Ie}`:""}
${He?`Project Name: ${He}`:""}

User Request: ${oe.content}
${ve}
${Ae}
${Ne?`Context: User selected element for visual reference: <${Ne.tagName}>`:""}

${Ie?`IMPORTANT: The source files for this page are in ${Ie}. Use the Read and Glob tools to explore the project structure and find relevant source files before making changes.`:""}
    `;if(Go&&Lr.length>0&&(gt+=`

Recent Console Logs:
${Lr.join(`
`)}`),js&&js.length>0){const Io=js.map(Cs=>`[${Cs.timestamp.toLocaleTimeString()}] [${Cs.type}] ${Cs.message}`).join(`
`);gt+=`

Selected Console Logs (${js.length} entries):
${Io}`}if(Nl&&Nl.length>0){const Io=Nl.map((Cs,Si)=>`${Si+1}. ${Cs.title}
   URL: ${Cs.url}
   ${Cs.snippet}`).join(`

`);gt+=`

Web Search Results (${Nl.length} results for context):
${Io}`}ue||/\b(change|modify|update|edit|delete|remove|add|make|set|fix|replace|style|color|size|font|width|height|margin|padding|border)\b/i.test(oe.content)?gt+=`
Instructions:
You are an AI UI assistant that can modify web pages. The user has selected an element to focus on.

CRITICAL WORKFLOW FOR SOURCE CODE CHANGES:
1. FIRST: Use the Read tool to read the ENTIRE source file (the component/page containing this element)
2. UNDERSTAND the full context - how this element fits in the page structure, what styles affect it, what props/data it uses
3. THEN make your changes, considering how they impact the whole page
4. The selected element is just the FOCUS AREA - you need the full file context to make good edits

For QUICK DOM PREVIEWS (temporary, not saved):
- Output: \`\`\`json-exec {"code": "...", "undo": "..."}\`\`\`
- The "code" executes immediately, "undo" restores original
- Use for quick style/text changes before committing to source

For SOURCE CODE EDITS (permanent):
1. READ the full source file first using the Read tool
2. Understand the component structure and how the element is rendered
3. Use the Edit tool to modify the source, preserving the overall structure
4. NEVER guess at the source code - always read it first

Selected Element Context:
- XPath: ${(ue==null?void 0:ue.xpath)||"N/A"}
- ID: ${(ue==null?void 0:ue.id)||"N/A"}
- Classes: ${(ue==null?void 0:ue.className)||"N/A"}

IMPORTANT: The selected element HTML above is just a snippet. For source edits, you MUST read the full file to understand the complete context. Don't assume the structure - READ IT.

Be concise. Confirm what you changed.
      `:gt+=`
Instructions:
You are a helpful AI assistant. Answer the user's question conversationally.
DO NOT modify the page or execute any code unless the user explicitly asks you to change something.
If you're not sure what the user wants, ask for clarification.
      `;const _n=[{type:"text",text:gt}];Jr.forEach((Io,Cs)=>{Jr.length>1&&_n.push({type:"text",text:`
[Image ${Cs+1} of ${Jr.length}]:`});const Si=Io.split(",")[1],ef=Io.split(";")[0].split(":")[1]||"image/png";_n.push({type:"image",image:{base64Data:Si,mimeType:ef}})}),ws(!1),gr([]),$e(null),Le(null),_e(!1),$d(null),rt.current&&(rt.current.value="");try{const Io=Yrt(Vt.id);let Cs=null;const{intent:Si,systemPrompt:ef,tools:Np,promptMode:tf}=ng(oe.content);console.log(`[Coding Agent] Intent: ${Si.type} (${Math.round(Si.confidence*100)}%) | Mode: ${tf}`);const el=Ls.providers.find(zn=>zn.id==="google"&&zn.enabled&&zn.apiKey),Ip=Jr.length>0,Mt=/(?:add|insert|put|use|replace|change|swap|set|place|show|save|upload).*(?:image|photo|picture|attached|this|screenshot)|(?:this|the|attached)\s*(?:image|photo|picture|screenshot)|(?:image|photo|picture|screenshot)\s*(?:here|to|in|on|as)/i.test(oe.content);if(Ip&&Mt){const zn=u==null?void 0:u.projectPath;if(!zn){const Vr={id:`msg-error-${Date.now()}`,role:"assistant",content:"Cannot save image: No project folder is set. Please open a project first.",timestamp:new Date,model:"system"};he(jr=>[...jr,Vr]),gr([]);return}try{const Vr=rn=>{let cn=0;for(let dr=0;dr<Math.min(rn.length,1e4);dr++){const fr=rn.charCodeAt(dr);cn=(cn<<5)-cn+fr,cn=cn&cn}return Math.abs(cn).toString(16).padStart(8,"0")},jr=Jr[0],Gn=Vr(jr),xo=jr.match(/^data:image\/(\w+);/),Ro=xo?xo[1].replace("jpeg","jpg"):"png",sr=`img-${Gn}.${Ro}`,Yr=`${`${zn}/public/uploads`}/${sr}`,is=`/uploads/${sr}`;console.log("[Image Save] Saving to:",Yr);const Xt=await((at=window.electronAPI)==null?void 0:at.files.saveImage(jr,Yr));if(!(Xt!=null&&Xt.success))throw new Error((Xt==null?void 0:Xt.error)||"Failed to save image");if(console.log("[Image Save] Image saved successfully"),ue){const rn=Xn.current.get(l);if(rn){const cn=((_t=ue.tagName)==null?void 0:_t.toLowerCase())||"",dr=cn==="img",fr=["div","section","article","aside","header","footer","main","figure","span","p"].includes(cn);let Hn,Un,Qn;if(dr){const nr=await rn.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    return el ? el.src : '';
                  })();
                `);Hn=`
                  (function() {
                    const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el && el.tagName === 'IMG') { el.src = '${is}'; return 'Applied'; }
                    return 'Not found';
                  })();
                `,Un=`
                  (function() {
                    const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el && el.tagName === 'IMG') { el.src = '${nr}'; return 'Reverted'; }
                    return 'Not found';
                  })();
                `,Qn=`Set image src to ${sr}`,await rn.executeJavaScript(Hn);const Yo=`dom-img-${Date.now()}`,Mo={id:Yo,element:ue,cssChanges:{},srcChange:{oldSrc:nr||"",newSrc:is},description:Qn,undoCode:Un,applyCode:Hn,userRequest:oe.content||"Insert image",patchStatus:"preparing"};$s(Mo),Ji(Yo,ue,{},Qn,Un,Hn,oe.content||"Insert image",zn,void 0,{oldSrc:nr||"",newSrc:is})}else if(fr){const nr=await rn.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (!el) return null;
                    const img = el.querySelector('img');
                    if (img) return { hasChildImg: true, childSrc: img.src };
                    return { hasChildImg: false, currentBg: el.style.backgroundImage };
                  })();
                `);if(nr!=null&&nr.hasChildImg)Hn=`
                    (function() {
                      const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) { const img = el.querySelector('img'); if (img) { img.src = '${is}'; return 'Applied'; } }
                      return 'Not found';
                    })();
                  `,Un=`
                    (function() {
                      const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) { const img = el.querySelector('img'); if (img) { img.src = '${nr.childSrc}'; return 'Reverted'; } }
                      return 'Not found';
                    })();
                  `,Qn=`Set child image src to ${sr}`;else{const si=await rn.executeJavaScript(`
                    (function() {
                      const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      return el ? { text: el.textContent, bg: el.style.backgroundImage, bgSize: el.style.backgroundSize, bgPos: el.style.backgroundPosition } : null;
                    })();
                  `);Hn=`
                    (function() {
                      const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) {
                        el.textContent = '';
                        el.style.backgroundImage = 'url(${is})';
                        el.style.backgroundSize = 'cover';
                        el.style.backgroundPosition = 'center';
                        return 'Applied as background';
                      }
                      return 'Not found';
                    })();
                  `,Un=`
                    (function() {
                      const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                      if (el) {
                        el.textContent = ${JSON.stringify((si==null?void 0:si.text)||"")};
                        el.style.backgroundImage = '${(si==null?void 0:si.bg)||""}';
                        el.style.backgroundSize = '${(si==null?void 0:si.bgSize)||""}';
                        el.style.backgroundPosition = '${(si==null?void 0:si.bgPos)||""}';
                        return 'Reverted';
                      }
                      return 'Not found';
                    })();
                  `,Qn=`Set background image to ${sr}`}await rn.executeJavaScript(Hn);const Yo=`dom-img-${Date.now()}`,Mo={id:Yo,element:ue,cssChanges:nr!=null&&nr.hasChildImg?{}:{backgroundImage:`url(${is})`,backgroundSize:"cover",backgroundPosition:"center"},srcChange:nr!=null&&nr.hasChildImg?{oldSrc:nr.childSrc||"",newSrc:is}:void 0,description:Qn,undoCode:Un,applyCode:Hn,userRequest:oe.content||"Insert image",patchStatus:"preparing"};$s(Mo),Ji(Yo,ue,nr!=null&&nr.hasChildImg?{}:{backgroundImage:`url(${is})`,backgroundSize:"cover",backgroundPosition:"center"},Qn,Un,Hn,oe.content||"Insert image",zn)}else Hn=`
                  (function() {
                    const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) { el.src = '${is}'; return 'Applied'; }
                    return 'Not found';
                  })();
                `,Un="location.reload()",Qn=`Set ${cn} src to ${sr}`,await rn.executeJavaScript(Hn);const wr={id:`msg-img-${Date.now()}`,role:"assistant",content:` ${Qn}`,timestamp:new Date,model:"system",intent:"ui_modify"};he(nr=>[...nr,wr]),Ya({code:Hn,undoCode:Un,description:Qn,additions:1,deletions:1,source:"dom"}),gr([]);return}}const mn={id:`msg-img-${Date.now()}`,role:"assistant",content:` Image saved to \`${is}\`

To insert this image into an element, select an element first and then attach the image.`,timestamp:new Date,model:"system"};he(rn=>[...rn,mn]),gr([]);return}catch(Vr){console.error("[Image Save] Error:",Vr);const jr={id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to save image: ${Vr instanceof Error?Vr.message:"Unknown error"}`,timestamp:new Date,model:"system"};he(Gn=>[...Gn,jr]),gr([]);return}}if(console.log("[Instant UI] Check conditions:",{intentType:Si.type,hasSelectedElement:!!ue,hasGoogleProvider:!!(el!=null&&el.apiKey),hasSourceLocation:!!((Yn=(yn=ue==null?void 0:ue.sourceLocation)==null?void 0:yn.sources)!=null&&Yn[0])}),Si.type==="ui_modify"&&!ue){console.log("[Instant UI] ui_modify detected but no element selected");const zn={id:`msg-nosel-${Date.now()}`,role:"assistant",content:`To modify the UI, first select an element using the inspector (crosshair icon) or say "highlight the buttons" to see what's available.`,timestamp:new Date,model:"system",intent:"ui_modify"};he(Vr=>[...Vr,zn]);return}if(Si.type==="ui_modify"&&ue&&(el!=null&&el.apiKey)){console.log("[Instant UI] Triggering instant UI update with source patch..."),console.log("[Instant UI] Selected element:",{tagName:ue.tagName,xpath:ue.xpath,sourceLocation:ue.sourceLocation}),Il(!0),zd("streaming"),sc([]),_s({id:`instant-ui-${Date.now()}`,content:` Analyzing \`<${ue.tagName.toLowerCase()}>\` element...`,reasoning:"",toolCalls:[]});const zn=Jr.length>0,Vr=/(?:add|insert|put|use|replace|change|swap|set|place|show).*(?:image|photo|picture|attached|this)|(?:this|the|attached)\s*(?:image|photo|picture)|image\s*(?:here|to|in|on)/i.test(oe.content);if(zn&&(Vr||oe.content.trim()==="")){const Xt=((Qr=ue.tagName)==null?void 0:Qr.toLowerCase())||"";console.log("[Image Insert] Detected image insertion request for:",Xt);const mn=u==null?void 0:u.projectPath;if(!mn){const rn={id:`msg-error-${Date.now()}`,role:"assistant",content:"Cannot insert image: No project folder is set. Please open a project first.",timestamp:new Date,model:"system"};he(cn=>[...cn,rn]),gr([]);return}try{const rn=Zo=>{let Do=0;for(let fc=0;fc<Math.min(Zo.length,1e4);fc++){const Cg=Zo.charCodeAt(fc);Do=(Do<<5)-Do+Cg,Do=Do&Do}return Math.abs(Do).toString(16).padStart(8,"0")},cn=Jr[0],dr=rn(cn),fr=cn.match(/^data:image\/(\w+);/),Hn=fr?fr[1].replace("jpeg","jpg"):"png",Un=`img-${dr}.${Hn}`,wr=`${`${mn}/public/uploads`}/${Un}`,nr=`/uploads/${Un}`;console.log("[Image Insert] Saving to:",wr);const Yo=await((ss=window.electronAPI)==null?void 0:ss.files.saveImage(cn,wr));if(!(Yo!=null&&Yo.success))throw new Error((Yo==null?void 0:Yo.error)||"Failed to save image");console.log("[Image Insert] Image saved successfully");const Mo=Xn.current.get(l);if(!Mo)throw new Error("Webview not available");const si=Xt==="img",Rp=["div","section","article","aside","header","footer","main","figure","span","p"].includes(Xt);let As,Ra,go;if(si){const Zo=await Mo.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  return el ? el.src : '';
                })();
              `);if(As=`
                (function() {
                  const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${nr}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Ra=`
                (function() {
                  const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el && el.tagName === 'IMG') {
                    el.src = '${Zo}';
                    return 'Reverted';
                  }
                  return 'Element not found';
                })();
              `,go=`Set image src to ${Un}`,await Mo.executeJavaScript(As),(_i=(eo=ue.sourceLocation)==null?void 0:eo.sources)!=null&&_i[0]){const Do=`dom-img-${Date.now()}`,fc={id:Do,element:ue,cssChanges:{},srcChange:{oldSrc:Zo||"",newSrc:nr},description:go,undoCode:Ra,applyCode:As,userRequest:oe.content||"Insert image",patchStatus:"preparing"};$s(fc),Ji(Do,ue,{},go,Ra,As,oe.content||"Insert image",mn,void 0,{oldSrc:Zo||"",newSrc:nr})}}else if(Rp){const Zo=await Mo.executeJavaScript(`
                (function() {
                  const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (!el) return null;
                  const img = el.querySelector('img');
                  if (img) {
                    return { hasChildImg: true, childSrc: img.src };
                  }
                  return { hasChildImg: false, currentBg: el.style.backgroundImage };
                })();
              `);if(Zo!=null&&Zo.hasChildImg)As=`
                  (function() {
                    const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${nr}';
                        return 'Applied to child img';
                      }
                    }
                    return 'Element not found';
                  })();
                `,Ra=`
                  (function() {
                    const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      const img = el.querySelector('img');
                      if (img) {
                        img.src = '${Zo.childSrc}';
                        return 'Reverted';
                      }
                    }
                    return 'Element not found';
                  })();
                `,go=`Set child image src to ${Un}`;else{const Do=await Mo.executeJavaScript(`
                  (function() {
                    const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    return el ? { text: el.textContent, bg: el.style.backgroundImage, bgSize: el.style.backgroundSize, bgPos: el.style.backgroundPosition } : null;
                  })();
                `);if(As=`
                  (function() {
                    const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = 'url(${nr})';
                      el.style.backgroundSize = 'cover';
                      el.style.backgroundPosition = 'center';
                      el.textContent = '';
                      return 'Applied background-image';
                    }
                    return 'Element not found';
                  })();
                `,Ra=`
                  (function() {
                    const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                    if (el) {
                      el.style.backgroundImage = '${(Do==null?void 0:Do.bg)||""}';
                      el.style.backgroundSize = '${(Do==null?void 0:Do.bgSize)||""}';
                      el.style.backgroundPosition = '${(Do==null?void 0:Do.bgPos)||""}';
                      el.textContent = '${((Do==null?void 0:Do.text)||"").replace(/'/g,"\\'")}';
                      return 'Reverted';
                    }
                    return 'Element not found';
                  })();
                `,go=`Set background-image to ${Un}`,(dc=(Ia=ue.sourceLocation)==null?void 0:Ia.sources)!=null&&dc[0]){const fc=`dom-img-${Date.now()}`,Cg={id:fc,element:ue,cssChanges:{backgroundImage:`url(${nr})`,backgroundSize:"cover",backgroundPosition:"center"},description:go,undoCode:Ra,applyCode:As,userRequest:oe.content||"Insert image",patchStatus:"preparing"};$s(Cg),Ji(fc,ue,{backgroundImage:`url(${nr})`,backgroundSize:"cover",backgroundPosition:"center"},go,Ra,As,oe.content||"Insert image",mn)}}await Mo.executeJavaScript(As)}else As=`
                (function() {
                  const el = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                  if (el) {
                    el.src = '${nr}';
                    return 'Applied src';
                  }
                  return 'Element not found';
                })();
              `,Ra="location.reload()",go=`Set ${Xt} src to ${Un}`,await Mo.executeJavaScript(As);const Ko={id:`msg-img-${Date.now()}`,role:"assistant",content:`Preview: ${go}`,timestamp:new Date,model:Vt.id,intent:"ui_modify"};he(Zo=>[...Zo,Ko]),Ya({code:As,undoCode:Ra,description:go,additions:1,deletions:1,source:"dom"}),gr([]);return}catch(rn){console.error("[Image Insert] Error:",rn);const cn={id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to insert image: ${rn instanceof Error?rn.message:"Unknown error"}`,timestamp:new Date,model:"system"};he(dr=>[...dr,cn]),gr([]);return}}if(ue.sourceLocation){if(console.log("[Instant UI] sourceLocation.sources:",ue.sourceLocation.sources),console.log("[Instant UI] sourceLocation.summary:",ue.sourceLocation.summary),(Ih=ue.sourceLocation.sources)!=null&&Ih[0]){const Xt=ue.sourceLocation.sources[0];console.log("[Instant UI] Source file:",Xt.file,"line:",Xt.line,"name:",Xt.name)}}else console.log("[Instant UI] NO sourceLocation on selectedElement!");const jr="gemini-2.5-flash";_s(Xt=>Xt?{...Xt,content:` Analyzing \`<${ue.tagName.toLowerCase()}>\` element...

 Generating CSS changes with Gemini Flash...`}:null);const Gn=await fdt(ue,oe.content,el.apiKey,jr),xo=Object.keys(Gn.cssChanges).length>0,Ro=!!Gn.textChange,sr=xo||Ro;if(console.log("[Instant UI] Result:",{hasCssChanges:xo,hasTextChange:Ro,textChange:Gn.textChange,cssChanges:Gn.cssChanges}),sr){const Xt=[...Object.entries(Gn.cssChanges).map(([mn,rn])=>`   \`${mn}\`: \`${rn}\``),...Ro?[`   text: "${Gn.textChange}"`]:[]].join(`
`);_s(mn=>mn?{...mn,content:` Analyzing \`<${ue.tagName.toLowerCase()}>\` element...

 Generated changes:
${Xt}

 Applying to preview...`}:null)}const ks=Xn.current.get(l);let Yr="",is="";if(Gn.success&&sr&&ks){const Xt=`
            (function() {
              const element = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
              if (element) {
                const original = {
                  textContent: element.textContent || '',
                  styles: {}
                };
                ${xo?Object.keys(Gn.cssChanges).map(mn=>`original.styles['${mn}'] = element.style.${mn} || '';`).join(`
`):""}
                return JSON.stringify(original);
              }
              return null;
            })();
          `;try{const mn=await ks.executeJavaScript(Xt),rn=mn?JSON.parse(mn):{textContent:"",styles:{}};console.log("[Instant UI] Original captured:",rn);let cn="";Ro&&(cn+=`element.textContent = ${JSON.stringify(rn.textContent)};
`),xo&&(cn+=Object.entries(rn.styles).map(([wr,nr])=>`element.style.${wr} = '${nr}';`).join(`
`)),Yr=`
              (function() {
                const element = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                if (element) {
                  ${cn}
                  return 'Reverted';
                }
                return 'Element not found';
              })();
            `;let dr="";Ro&&(dr+=`element.textContent = ${JSON.stringify(Gn.textChange)};
`),xo&&(dr+=Object.entries(Gn.cssChanges).map(([wr,nr])=>`element.style.${wr} = '${nr}';`).join(`
`)),is=`
              (function() {
                const element = document.evaluate('${ue.xpath}', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
                if (element) {
                  ${dr}
                  return 'Applied';
                }
                return 'Element not found';
              })();
            `;const fr=await ks.executeJavaScript(is);console.log("[Instant UI] DOM update result:",fr);const Hn={id:`msg-ui-${Date.now()}`,role:"assistant",content:`Preview: ${Gn.description}`,timestamp:new Date,model:Vt.id,intent:"ui_modify"};he(wr=>[...wr,Hn]);const Un=Object.keys(Gn.cssChanges).length,Qn=Ro?1:0;if(Ya({code:is,undoCode:Yr,description:Gn.description,additions:Un+Qn,deletions:Un+Qn,source:"dom"}),(Yu=(Wu=ue.sourceLocation)==null?void 0:Wu.sources)!=null&&Yu[0]){const wr=`dom-${Date.now()}`,nr={id:wr,element:ue,cssChanges:Gn.cssChanges,textChange:Gn.textChange,description:Gn.description,undoCode:Yr,applyCode:is,userRequest:oe.content,patchStatus:"preparing"};console.log("[Instant UI] Pending DOM approval created:",wr),_s(Mo=>Mo?{...Mo,content:` Preview applied!

${Gn.description}

 Preparing source code patch...`}:null),$s(nr);const Yo=Ro?{oldText:rn.textContent,newText:Gn.textChange}:void 0;Ji(wr,ue,Gn.cssChanges,Gn.description,Yr,is,oe.content,u==null?void 0:u.projectPath,Yo)}Il(!1),_s(null);return}catch(mn){console.error("[Instant UI] Failed to apply DOM changes:",mn),Il(!1),_s(null);const rn={id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to apply preview: ${mn instanceof Error?mn.message:"Unknown error"}`,timestamp:new Date,model:Vt.id,intent:"ui_modify"};he(cn=>[...cn,rn]);return}}else if(!sr){Il(!1),_s(null);const Xt={id:`msg-nochange-${Date.now()}`,role:"assistant",content:`No changes to apply for: "${oe.content}"`,timestamp:new Date,model:Vt.id,intent:"ui_modify"};he(mn=>[...mn,Xt]);return}}const tr=tf!=="dom_edit";if(console.log(`[AI SDK] Mode: ${tf} | MCP tools: ${tg.length} | Tools enabled: ${tr}`),Io&&(Zm.length>0||Io==="claude-code"||Io==="codex"||Io==="google")){console.log(`[AI SDK] Using provider: ${Io} for model: ${Vt.id}`),console.log(`[AI SDK] Using tools: ${tr}`);const zn=Zrt(Ce.filter(Xt=>Xt.role!=="system").slice(-10)),Vr={role:"user",content:_n},jr=[...zn,Vr];rg(!0),Il(!0),zd("streaming"),sc([]);const Gn=`streaming-${Date.now()}`;_s({id:Gn,content:"",reasoning:"",toolCalls:[]});const xo=[];console.log("[AI SDK] Starting stream...");let Ro="";console.log("[AI SDK] Streaming with project folder:",(u==null?void 0:u.projectPath)||"(none)");const sr=await Qm({modelId:Vt.id,messages:jr,providers:Zm,system:tr?ef:void 0,tools:tr?Np:void 0,maxSteps:15,enableReasoning:yi!=="off",mcpTools:tg,projectFolder:(u==null?void 0:u.projectPath)||void 0,onChunk:Xt=>{const mn=typeof Xt=="string"?Xt:String(Xt??"");Ro+=mn,_s(rn=>rn?{...rn,content:Ro}:null)},onStepFinish:Xt=>{var rn,cn,dr,fr,Hn,Un;if(console.log("[AI SDK] Step finished:",{textLength:(rn=Xt==null?void 0:Xt.text)==null?void 0:rn.length,toolCalls:(cn=Xt==null?void 0:Xt.toolCalls)==null?void 0:cn.length,toolResults:(dr=Xt==null?void 0:Xt.toolResults)==null?void 0:dr.length}),Xt!=null&&Xt.toolCalls&&Xt.toolCalls.length>0)for(const Qn of Xt.toolCalls){const wr=Qn.toolCallId||`tool-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,nr=((fr=Qn.toolName)==null?void 0:fr.replace(/^mcp_[^_]+_/,""))||"tool";xo.find(Mo=>Mo.id===wr)||xo.push({id:wr,name:nr,args:Qn.args||{},status:"running"})}if(Xt!=null&&Xt.toolResults&&Xt.toolResults.length>0)for(const Qn of Xt.toolResults){const wr=Qn.toolCallId,nr=((Hn=Qn.toolName)==null?void 0:Hn.replace(/^mcp_[^_]+_/,""))||"tool",Yo=wr?xo.find(Mo=>Mo.id===wr):xo.find(Mo=>Mo.name===nr&&Mo.status==="running");Yo&&(Yo.status=(Un=Qn.result)!=null&&Un.error?"error":"done",Yo.result=Qn.result)}const mn=xo.map(Qn=>`${Qn.status==="running"?"":Qn.status==="error"?"":""} ${Qn.name}`).join("  ");mn&&_s(Qn=>Qn?{...Qn,content:Ro||`Working: ${mn}`,toolCalls:xo.map(wr=>({id:wr.id,name:wr.name,args:wr.args,status:wr.status==="done"?"complete":wr.status,result:wr.result}))}:null)},onReasoningChunk:Xt=>{const mn=typeof Xt=="string"?Xt:(Xt==null?void 0:Xt.content)??String(Xt??"");console.log("[AI SDK] Reasoning chunk:",mn.substring(0,100)),_s(rn=>rn?{...rn,reasoning:(rn.reasoning||"")+mn}:null)}});if(console.log("[AI SDK] Stream complete, clearing streaming state"),Il(!1),rg(!1),zd("idle"),Qs!=null&&Qs.toolCalls&&Qs.toolCalls.length>0){const Xt=Qs.toolCalls.map(mn=>({id:mn.id,name:mn.name,status:mn.status==="error"?"error":"success",timestamp:new Date}));sc(Xt)}_s(null);let ks=(sr.text||Ro||"").trim();if(!ks&&sr.toolResults&&sr.toolResults.length>0&&(ks=sr.toolResults.map(mn=>{var fr;const rn=((fr=mn.toolName)==null?void 0:fr.replace(/^mcp_[^_]+_/,""))||"tool",cn=mn.result;if(cn!=null&&cn.error)return` ${rn}: ${cn.error}`;if(cn!=null&&cn.content&&typeof cn.content=="string"){const Hn=cn.content.length>200?cn.content.substring(0,200)+"...":cn.content;return` ${rn}: ${cn.path||"file"}
\`\`\`
${Hn}
\`\`\``}if(cn!=null&&cn.tree&&Array.isArray(cn.tree)){const Hn=Un=>{let Qn=Un.length;for(const wr of Un)wr!=null&&wr.children&&(Qn+=Hn(wr.children));return Qn};return` ${rn}: Found ${Hn(cn.tree)} items`}if(cn!=null&&cn.entries&&Array.isArray(cn.entries)){const Hn=cn.entries,Un=Hn.slice(0,5).map(Qn=>Qn.isDirectory?` ${Qn.name}`:` ${Qn.name}`).join(", ");return` ${rn}: ${Hn.length} items (${Un}${Hn.length>5?"...":""})`}if(cn!=null&&cn.matches&&Array.isArray(cn.matches))return` ${rn}: Found ${cn.matches.length} matches`;if(cn!=null&&cn.success)return` ${rn}: Success`;const dr=JSON.stringify(cn,null,2);return` ${rn}: ${dr.length>200?dr.substring(0,200)+"...":dr}`}).join(`

`)||"Tasks completed."),ks||(xo.length>0?ks=`Done.

${xo.map(mn=>` ${mn.name}${mn.status==="error"?" (error)":""}`).join(`
`)}`:ks="No response generated."),Cs=ks,sr.reasoning){const Xt=typeof sr.reasoning=="string"?sr.reasoning:String(sr.reasoning);console.log("[AI SDK] Reasoning received:",Xt.substring(0,200))}const Yr=[];if(sr.toolCalls&&sr.toolCalls.length>0){console.log("[AI SDK] Tool calls:",sr.toolCalls);for(let Xt=0;Xt<sr.toolCalls.length;Xt++){const mn=sr.toolCalls[Xt],rn=(Rh=sr.toolResults)==null?void 0:Rh[Xt];Yr.push({id:mn.toolCallId,name:mn.toolName,args:mn.args,result:rn==null?void 0:rn.result,isError:rn?((Qd=rn.result)==null?void 0:Qd.error)!==void 0:!1})}}window.__pendingToolUsage=Yr.length>0?Yr:void 0,window.__pendingIntent=Si.type!=="unknown"?Si.type:void 0,console.log("[AI SDK] Result reasoning:",{hasReasoning:!!sr.reasoning,type:typeof sr.reasoning,length:typeof sr.reasoning=="string"?sr.reasoning.length:"N/A"});const is=sr.reasoning&&typeof sr.reasoning=="string"?sr.reasoning:void 0;window.__pendingReasoning=is,console.log("[AI SDK] Stored pending reasoning:",is?`${is.substring(0,100)}...`:"none")}else{console.log("[AI SDK] Falling back to GoogleGenAI with streaming");const zn="AIzaSyAuAGR2YNrczzJKRcqVr924j71lRqc02IU",Vr=new aR({apiKey:zn}),jr=[{role:"user",parts:_n.map(Ro=>Ro.type==="text"?{text:Ro.text}:{inlineData:{data:Ro.image.base64Data,mimeType:Ro.image.mimeType||"image/png"}})}];Il(!0),zd("streaming"),sc([]),_s({id:`streaming-fallback-${Date.now()}`,content:"",reasoning:"",toolCalls:[]});const Gn=await Vr.models.generateContentStream({model:Vt.id,contents:jr});let xo="";for await(const Ro of Gn){const sr=Ro.text||"";xo+=sr,_s(ks=>ks?{...ks,content:ks.content+sr}:null)}Il(!1),_s(null),Cs=xo}if(Cs){const zn=/```json-exec\s*(\{[\s\S]*?\})\s*```/g;let Vr;const jr=[];for(;(Vr=zn.exec(Cs))!==null;)try{const Yr=JSON.parse(Vr[1]);Yr.code&&jr.push({code:Yr.code,undo:Yr.undo})}catch(Yr){console.error("[Exec] Failed to parse:",Yr)}const Gn=Cs.replace(/```json-exec\s*\{[\s\S]*?\}\s*```/g,"").trim(),xo=window.__pendingToolUsage,Ro=window.__pendingIntent,sr=window.__pendingReasoning;delete window.__pendingToolUsage,delete window.__pendingIntent,delete window.__pendingReasoning,he(Yr=>[...Yr,{id:(Date.now()+1).toString(),role:"assistant",content:Gn||"Changes applied.",timestamp:new Date,model:Vt.name,intent:Ro,toolUsage:xo,reasoning:sr,turnId:G,parentTurnId:oe.id,sequenceNumber:1}]);const ks=Xn.current.get(l);if(jr.length>0&&ks&&rs){const Yr=jr.map(rn=>rn.code).join(`;
`),is=jr.map(rn=>rn.undo||"").filter(Boolean).join(`;
`);console.log("[Exec] Executing immediately:",Yr),ks.executeJavaScript(Yr).then(()=>console.log("[Exec] Applied")).catch(rn=>console.error("[Exec] Error:",rn));const Xt=jr.length,mn=jr.filter(rn=>rn.undo).length;Ya({code:Yr,undoCode:is||"",description:Gn||"Change applied",additions:Xt,deletions:mn,source:"code"})}}}catch(Io){console.error("[AI] Error:",Io);const Cs=Io instanceof Error?Io.message:"Unknown error occurred";he(Si=>[...Si,{id:Date.now().toString(),role:"assistant",content:`Sorry, I encountered an error: ${Cs}`,timestamp:new Date,model:Vt.name}])}finally{Il(!1),_s(null),rg(!1)}},kh=()=>{const N=Xn.current.get(l);if(!ue||!ue.rect||!N)return{display:"none"};const G=N.getBoundingClientRect(),oe=48,ve=376,Ae=150,Ie=8,He=ue.rect,gt=G.top+He.top,un=gt+He.height,Et=G.left+He.left,_n=Et+He.width;let at,_t;_n+Ie+ve<window.innerWidth-10?_t=_n+Ie:Et-Ie-oe>10?_t=Et-oe-Ie:_t=Math.max(10,Et);const yn=window.innerHeight-un-Ie,Yn=gt-Ie;return yn>=Ae+20?at=un+Ie:Yn>=Ae+20?at=gt-Ae-Ie:at=Math.max(10,Math.min(gt,window.innerHeight-Ae-10)),_t=Math.max(10,Math.min(_t,window.innerWidth-oe-10)),at=Math.max(10,Math.min(at,window.innerHeight-oe-10)),{top:`${at}px`,left:`${_t}px`}},[Gu,Eg]=x.useState("");x.useEffect(()=>{var N;Tn&&((N=window.electronAPI)!=null&&N.getWebviewPreloadPath)&&window.electronAPI.getWebviewPreloadPath().then(G=>{console.log("Webview preload path:",G),Eg(G)})},[Tn]);const Tp=x.useCallback(async()=>{var Ie,He,gt,un,Et;if(!((He=(Ie=ue==null?void 0:ue.sourceLocation)==null?void 0:Ie.sources)!=null&&He[0]))return;const N=ue.sourceLocation.sources[0];let G=N.file;const oe=N.line||1,ve=N.endLine||oe+10;if(!G||!Tn||!((un=(gt=window.electronAPI)==null?void 0:gt.files)!=null&&un.readFile)){console.log("Cannot read file:",{filePath:G,isElectron:Tn,hasFiles:!!((Et=window.electronAPI)!=null&&Et.files)});return}if(!(G.startsWith("/")&&(G.startsWith("/Users/")||G.startsWith("/home/")||G.startsWith("/var/")||G.startsWith("/tmp/")))&&u.projectPath){const _n=G.replace(/^\.\//,"").replace(/^\//,"");G=`${u.projectPath}/${_n}`,console.log("Resolved relative path:",G)}try{const _n=await window.electronAPI.files.readFile(G);if(_n.success&&_n.data){const at=_n.data.split(`
`),_t=3,yn=7,Yn=Math.max(1,oe-_t),Qr=Math.min(at.length,ve+yn),ss=at.slice(Yn-1,Qr);Ol({code:ss.join(`
`),fileName:G.split("/").pop()||"unknown",startLine:Yn,endLine:Qr})}}catch(_n){console.error("Failed to read source file:",_n)}},[ue,Tn,u.projectPath]),Ji=x.useCallback((N,G,oe,ve,Ae,Ie,He,gt,un,Et)=>{var at,_t,yn,Yn,Qr,ss;console.log("=".repeat(60)),console.log("[DOM Approval] === PREPARING SOURCE PATCH ==="),console.log("[DOM Approval] Inputs:",{approvalId:N,elementTag:G.tagName,cssChanges:Object.keys(oe).length>0?oe:"none",projectPath:gt||"NOT SET",hasSourceLocation:!!G.sourceLocation,sourceFile:((yn=(_t=(at=G.sourceLocation)==null?void 0:at.sources)==null?void 0:_t[0])==null?void 0:yn.file)||"NONE",sourceLine:((ss=(Qr=(Yn=G.sourceLocation)==null?void 0:Yn.sources)==null?void 0:Qr[0])==null?void 0:ss.line)||"NONE",userRequest:He==null?void 0:He.substring(0,50),hasSrcChange:!!Et}),console.log("=".repeat(60));const _n={modelId:Jm.current.id,providers:nE.current};edt({element:G,cssChanges:oe,providerConfig:_n,projectPath:gt||void 0,userRequest:He,textChange:un,srcChange:Et}).then(eo=>{console.log("[DOM Approval] Patch generation completed:",{approvalId:N,success:!!eo}),$s(_i=>{if(!_i||_i.id!==N)return _i;if(eo){const Ia={id:`patch-${Date.now()}`,filePath:eo.filePath,originalContent:eo.originalContent,patchedContent:eo.patchedContent,description:ve,elementSelector:G.xpath||void 0,cssChanges:oe,undoCode:Ae,applyCode:Ie,generatedBy:eo.generatedBy,durationMs:eo.durationMs};return console.log("[DOM Approval] Patch ready:",{approvalId:N,filePath:eo.filePath,generatedBy:eo.generatedBy}),{..._i,patchStatus:"ready",patch:Ia,patchError:void 0}}return console.warn("[DOM Approval] Patch generation returned null:",N),{..._i,patchStatus:"error",patch:void 0,patchError:"Could not generate source patch."}})}).catch(eo=>{const _i=eo instanceof Error?eo.message:"Failed to generate source patch";console.error("[DOM Approval] Patch generation failed:",{approvalId:N,error:_i}),$s(Ia=>!Ia||Ia.id!==N?Ia:{...Ia,patchStatus:"error",patch:void 0,patchError:_i})})},[]),Ah=x.useCallback(async()=>{var G,oe,ve,Ae,Ie,He,gt,un,Et,_n,at;if(!Bn)return;if(console.log("[DOM Approval] Accept clicked:",{id:Bn.id,status:Bn.patchStatus,hasPatch:!!Bn.patch,userApproved:Bn.userApproved}),Bn.patchStatus==="preparing"){console.log("[DOM Approval] Patch still preparing, marking as user-approved for auto-apply"),$s(_t=>_t?{..._t,userApproved:!0}:null);return}if(Bn.patchStatus==="error"||!Bn.patch){he(_t=>[..._t,{id:`msg-error-${Date.now()}`,role:"assistant",content:Bn.patchError||"Could not prepare a source patch for this change.",timestamp:new Date}]),$s(null),Ya(null);return}const N=Bn.patch;sE(!0),console.log("=".repeat(60)),console.log("[DOM Approval] === USER APPROVED PATCH ==="),console.log("[DOM Approval] Patch details:",{id:N.id,filePath:N.filePath,originalLength:((G=N.originalContent)==null?void 0:G.length)||0,patchedLength:((oe=N.patchedContent)==null?void 0:oe.length)||0,description:N.description}),console.log("=".repeat(60)),he(_t=>[..._t,{id:`msg-approved-${Date.now()}`,role:"assistant",content:`Approved: ${Bn.description}. Updating source code...`,timestamp:new Date,model:Vt.id,intent:"ui_modify"}]);try{if(!((Ae=(ve=window.electronAPI)==null?void 0:ve.files)!=null&&Ae.writeFile))throw console.log("[DOM Approval]  ABORT: writeFile API not available"),new Error("File API not available");const _t=N.originalContent!==N.patchedContent;console.log("[DOM Approval] Content changed:",_t),_t||(console.log("[DOM Approval]  WARNING: Patch content is IDENTICAL to original!"),console.log("[DOM Approval] This means the AI did not make any changes.")),console.log("[DOM Approval] Writing patch to disk:",N.filePath),console.log("[DOM Approval] Original length:",((Ie=N.originalContent)==null?void 0:Ie.length)||0),console.log("[DOM Approval] Patched length:",((He=N.patchedContent)==null?void 0:He.length)||0),console.log("[DOM Approval] First 200 chars of patched content:",(gt=N.patchedContent)==null?void 0:gt.substring(0,200));const yn=await window.electronAPI.files.writeFile(N.filePath,N.patchedContent);if(console.log("[DOM Approval] writeFile result:",yn),yn.success&&((Et=(un=window.electronAPI)==null?void 0:un.files)!=null&&Et.readFile)){const Yn=await window.electronAPI.files.readFile(N.filePath);if(Yn.success){const Qr=Yn.data===N.patchedContent;console.log("[DOM Approval] Verification read-back:",Qr?" MATCHES":" MISMATCH"),Qr||(console.log("[DOM Approval] Expected length:",(_n=N.patchedContent)==null?void 0:_n.length),console.log("[DOM Approval] Actual length:",(at=Yn.data)==null?void 0:at.length))}}if(yn.success)console.log("[Source Patch]  Applied successfully to:",N.filePath),he(Yn=>[...Yn,{id:`msg-patch-${Date.now()}`,role:"assistant",content:`Source code updated: ${N.filePath.split("/").pop()}`,timestamp:new Date}]),ei({path:N.filePath,additions:1,deletions:1,undoCode:N.undoCode});else throw new Error(yn.error||"Failed to save file")}catch(_t){console.error("[Source Patch] Failed:",_t),he(yn=>[...yn,{id:`msg-error-${Date.now()}`,role:"assistant",content:`Failed to save: ${_t instanceof Error?_t.message:"Unknown error"}`,timestamp:new Date}])}sE(!1),$s(null),Ya(null)},[Bn,ei]);x.useEffect(()=>{Bn!=null&&Bn.userApproved&&Bn.patchStatus==="ready"&&Bn.patch&&(console.log("[DOM Approval] Auto-applying: patch ready and user already approved"),Ah())},[Bn==null?void 0:Bn.patchStatus,Bn==null?void 0:Bn.userApproved,Ah]);const jo=x.useCallback(()=>{if(!Bn)return;const N=Xn.current.get(l);Bn.undoCode&&N&&N.executeJavaScript(Bn.undoCode),$s(null),Ya(null)},[Bn,l]);x.useEffect(()=>{const N=G=>{!Sr&&!Bn||((G.metaKey||G.ctrlKey)&&G.key==="Enter"&&(G.preventDefault(),Bn?Ah():Pl()),G.key==="Escape"&&(G.preventDefault(),Bn?jo():ha()))};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[Sr,Bn,Pl,ha,Ah,jo]);const fy=x.useCallback(async(N,G)=>{var ve,Ae;if(console.log("Starting project setup flow:",N,G),!n&&((ve=window.electronAPI)!=null&&ve.window)){const Ie=await window.electronAPI.window.lockProject(N,G);if(Ie.success)r(N),s(G),console.log(`[Window] Locked to project: ${N}`);else if((Ae=Ie.error)!=null&&Ae.includes("already open in another window")){Ie.existingWindowId&&await window.electronAPI.window.focus(Ie.existingWindowId);return}}const oe=OBe(N);hh({path:N,name:G,port:oe==null?void 0:oe.port})},[n]),hy=x.useCallback((N,G)=>{Al&&(D({url:N,title:Al.name,projectPath:Al.path}),W6(Al.name,Al.path,G),hh(null))},[Al,D]),EE=x.useCallback(()=>{hh(null)},[]),_E=x.useCallback(N=>{D({url:N,title:new URL(N).hostname})},[D]),x3=x.useCallback(N=>{console.log("[PatchApproval] Approved patch:",N.filePath);const G=Fd+1;G<Ou.length?ip(G):(qb([]),ip(0),Ym(!1))},[Fd,Ou.length]),py=x.useCallback(N=>{console.log("[PatchApproval] Rejected patch:",N.filePath);const G=Ou.filter((oe,ve)=>ve!==Fd);qb(G),G.length>0?ip(Math.min(Fd,G.length-1)):(ip(0),Ym(!1))},[Fd,Ou]),my=x.useCallback(N=>{console.log("[PatchApproval] Edit requested for patch:",N.filePath),Ym(!1)},[]);x.useCallback(N=>{qb(N),ip(0),Ym(!0)},[]);const gy=!u.url,Xi=(ts==null?void 0:ts.background)||(de?"#171717":"#d6d3d1");return h.jsxs("div",{className:`flex flex-col h-screen w-full overflow-hidden font-sans ${de?"dark text-neutral-100":"text-neutral-900"}`,style:{backgroundColor:Xi},children:[h.jsx(Mbe,{tabs:X,activeTabId:l,onTabSelect:k,onTabClose:T,onNewTab:_,onReorderTabs:M,isDarkMode:de,onToggleDarkMode:$u,onOpenSettings:()=>Qw(!0),fastApplyReady:u3,fileWatcherActive:d3}),h.jsxs("div",{className:"flex flex-1 overflow-hidden pt-1 pb-2 px-2 gap-1",children:[Al?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:h.jsx(zBe,{projectPath:Al.path,projectName:Al.name,initialPort:Al.port,isDarkMode:de,onComplete:hy,onCancel:EE})}):u.type==="kanban"?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:h.jsx(CF,{defaultView:"kanban",className:de?"dark":""})}):u.type==="todos"?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:h.jsx(CF,{defaultView:"tasks",className:de?"dark":""})}):u.type==="notes"?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:h.jsx(RBe,{content:((kp=u.notesData)==null?void 0:kp.content)||"",isDarkMode:de,onUpdateContent:Z})}):gy?h.jsx("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:h.jsx($Be,{onOpenProject:fy,onOpenUrl:_E,isDarkMode:de,lockedProjectPath:n})}):h.jsxs("div",{className:"flex-1 flex flex-col relative h-full rounded-xl overflow-hidden shadow-sm border",style:{backgroundColor:Uc,borderColor:Hc},children:[h.jsxs("div",{className:"h-12 border-b flex items-center gap-2 px-3 flex-shrink-0",style:{borderColor:Hc,backgroundColor:l3},children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:hg,disabled:!re,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${re?de?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-200 text-stone-600":de?"text-neutral-600 cursor-not-allowed":"text-stone-300 cursor-not-allowed"}`,title:"Back",children:h.jsx(w1,{size:16})}),h.jsx("button",{onClick:Vd,disabled:!K,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${K?de?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-200 text-stone-600":de?"text-neutral-600 cursor-not-allowed":"text-stone-300 cursor-not-allowed"}`,title:"Forward",children:h.jsx(Af,{size:16})}),h.jsx("button",{onClick:Ei,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${de?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-200 text-stone-600"}`,title:"Reload",children:se?h.jsx(ho,{size:16,className:"animate-spin"}):h.jsx(p0,{size:16})})]}),h.jsxs("div",{className:`flex items-center rounded-lg p-0.5 ${de?"bg-neutral-700":"bg-stone-100"}`,children:[h.jsx("button",{onClick:()=>Za("desktop"),className:`w-7 h-7 rounded-md flex items-center justify-center transition-colors ${ka==="desktop"?de?"bg-neutral-600 text-white":"bg-white text-stone-900 shadow-sm":de?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,title:"Desktop view",children:h.jsx(mN,{size:14})}),h.jsx("button",{onClick:()=>Za("tablet"),className:`w-7 h-7 rounded-md flex items-center justify-center transition-colors ${ka==="tablet"?de?"bg-neutral-600 text-white":"bg-white text-stone-900 shadow-sm":de?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,title:"Tablet view (768px)",children:h.jsx(k5,{size:14})}),h.jsx("button",{onClick:()=>Za("mobile"),className:`w-7 h-7 rounded-md flex items-center justify-center transition-colors ${ka==="mobile"?de?"bg-neutral-600 text-white":"bg-white text-stone-900 shadow-sm":de?"text-neutral-400 hover:text-neutral-200":"text-stone-400 hover:text-stone-600"}`,title:"Mobile view (375px)",children:h.jsx(C5,{size:14})})]}),h.jsx("form",{onSubmit:_h,className:"flex-1",children:h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",value:J,onChange:N=>!u.projectPath&&ee(N.target.value),readOnly:!!u.projectPath,"data-control-id":"url-bar","data-control-type":"input",className:`w-full h-8 px-3 pr-8 text-sm rounded-full focus:outline-none ${u.projectPath?`cursor-default ${de?"bg-neutral-800 border-neutral-700 text-neutral-400":"bg-stone-100 border-stone-200 text-stone-500"}`:`focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 ${de?"bg-neutral-700 border-neutral-600 text-neutral-100 placeholder-neutral-400":"bg-white border border-stone-200"}`}`,placeholder:"Enter URL...",title:u.projectPath?`Locked to project: ${u.projectPath}`:"Enter URL..."}),se&&h.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:h.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})})]})}),h.jsx("button",{onClick:()=>{sn(!wt),Ue(!1),Jt(!1)},"data-control-id":"inspector-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${wt?"bg-blue-100 text-blue-600":de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Element Inspector",children:h.jsx(r2,{size:16})}),h.jsx("button",{onClick:()=>{Jt(!ht),sn(!1)},"data-control-id":"move-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${ht?"bg-orange-100 text-orange-600":de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Move & Resize Element",children:h.jsx(o2,{size:16})}),h.jsx("button",{onClick:()=>{const N=Xn.current.get(l);N&&N.openDevTools()},"data-control-id":"devtools-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Open Webview DevTools",children:h.jsx(zy,{size:16})}),h.jsx("button",{onClick:()=>uh(!da),"data-control-id":"agent-button","data-control-type":"button",className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${da?"bg-purple-100 text-purple-600":de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Cluso Agent Demos",children:h.jsx(qP,{size:16})}),h.jsx("button",{onClick:()=>lg(!Fs),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${Fs?"bg-blue-100 text-blue-600":de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Toggle Console",children:h.jsx(ud,{size:16})}),h.jsx("button",{onClick:()=>ce(!F),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:F?"Hide sidebar":"Show sidebar",children:h.jsx(q1e,{size:16})})]}),h.jsxs("div",{"data-browser-content":!0,className:"flex-1 relative overflow-hidden flex flex-col ",children:[h.jsxs("div",{className:`flex-1 relative overflow-hidden flex flex-col justify-center items-center ${ka==="desktop"?"":"py-4 gap-3"} ${de?"bg-neutral-900":"bg-stone-200"}`,children:[ka!=="desktop"&&h.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>{Ud(!Aa),xh(!1)},className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors ${de?"bg-neutral-800 hover:bg-neutral-700 text-neutral-200 border border-neutral-700":"bg-white hover:bg-stone-50 text-stone-700 border border-stone-200 shadow-sm"}`,children:[ka==="mobile"?h.jsx(C5,{size:14}):h.jsx(k5,{size:14}),h.jsx("span",{children:yh?"Custom":(Li==null?void 0:Li.name)||(ka==="mobile"?"iPhone SE":"iPad Mini")}),h.jsxs("span",{className:`text-xs ${de?"text-neutral-500":"text-stone-400"}`,children:[mp,"  ",qc]}),h.jsx(Lf,{size:14,className:`transition-transform ${Aa?"rotate-180":""}`})]}),Aa&&h.jsxs("div",{className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 w-72 max-h-80 overflow-y-auto rounded-xl shadow-xl z-50 ${de?"bg-neutral-800 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("div",{className:`px-3 py-2 text-xs font-semibold uppercase tracking-wider ${de?"text-neutral-500":"text-stone-400"}`,children:"Mobile"}),Zb.filter(N=>N.type==="mobile").map(N=>h.jsxs("button",{onClick:()=>Xb(N),className:`w-full flex items-center justify-between px-3 py-2.5 text-sm transition-colors ${(Li==null?void 0:Li.name)===N.name?de?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":de?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(C5,{size:14}),N.name]}),h.jsxs("span",{className:`text-xs ${de?"text-neutral-500":"text-stone-400"}`,children:[N.width,"  ",N.height]})]},N.name)),h.jsx("div",{className:`px-3 py-2 text-xs font-semibold uppercase tracking-wider border-t ${de?"text-neutral-500 border-neutral-700":"text-stone-400 border-stone-100"}`,children:"Tablet"}),Zb.filter(N=>N.type==="tablet").map(N=>h.jsxs("button",{onClick:()=>Xb(N),className:`w-full flex items-center justify-between px-3 py-2.5 text-sm transition-colors ${(Li==null?void 0:Li.name)===N.name?de?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":de?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(k5,{size:14}),N.name]}),h.jsxs("span",{className:`text-xs ${de?"text-neutral-500":"text-stone-400"}`,children:[N.width,"  ",N.height]})]},N.name)),h.jsxs("div",{className:`border-t ${de?"border-neutral-700":"border-stone-100"}`,children:[h.jsxs("button",{onClick:ig,className:`w-full flex items-center gap-2 px-3 py-2.5 text-sm transition-colors ${yh?de?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":de?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:[h.jsx(J_,{size:14}),"Custom Size"]}),yh&&h.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 ${de?"bg-neutral-900/50":"bg-stone-50"}`,children:[h.jsx("input",{type:"number",value:cE,onChange:N=>g3(parseInt(N.target.value)||375),className:`w-20 px-2 py-1 text-sm rounded-lg text-center ${de?"bg-neutral-700 border-neutral-600 text-neutral-200":"bg-white border-stone-200 text-stone-700"} border focus:outline-none focus:ring-2 focus:ring-blue-500/30`,placeholder:"Width"}),h.jsx("span",{className:`text-xs ${de?"text-neutral-500":"text-stone-400"}`,children:""}),h.jsx("input",{type:"number",value:uE,onChange:N=>dE(parseInt(N.target.value)||667),className:`w-20 px-2 py-1 text-sm rounded-lg text-center ${de?"bg-neutral-700 border-neutral-600 text-neutral-200":"bg-white border-stone-200 text-stone-700"} border focus:outline-none focus:ring-2 focus:ring-blue-500/30`,placeholder:"Height"})]})]})]})]}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>{xh(!hp),Ud(!1)},className:`flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium transition-colors ${de?"bg-neutral-800 hover:bg-neutral-700 text-neutral-200 border border-neutral-700":"bg-white hover:bg-stone-50 text-stone-700 border border-stone-200 shadow-sm"}`,children:[h.jsx("span",{children:(_g=pp.find(N=>N.value===Ki))==null?void 0:_g.label}),h.jsx(Lf,{size:14,className:`transition-transform ${hp?"rotate-180":""}`})]}),hp&&h.jsx("div",{className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 w-24 rounded-xl shadow-xl z-50 overflow-hidden ${de?"bg-neutral-800 border border-neutral-700":"bg-white border border-stone-200"}`,children:pp.map(N=>h.jsx("button",{onClick:()=>{vh(N.value),xh(!1)},className:`w-full px-3 py-2 text-sm text-center transition-colors ${Ki===N.value?de?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":de?"hover:bg-neutral-700 text-neutral-200":"hover:bg-stone-50 text-stone-700"}`,children:N.label},N.value))})]})]}),Tn&&Gu?h.jsx(h.Fragment,{children:i.filter(N=>N.url).map(N=>h.jsx("div",{className:`transition-all duration-300 origin-center ${ka==="desktop"?"w-full h-full":"rounded-3xl shadow-2xl ring-4 ring-neutral-700 overflow-hidden flex-shrink-0"}`,style:{...ka==="desktop"?{}:Ki==="fit"?{aspectRatio:`${mp} / ${qc}`,maxWidth:"calc(100% - 48px)",maxHeight:"calc(100% - 80px)",width:"auto",height:"100%"}:{width:`${mp}px`,height:`${qc}px`,transform:`scale(${parseInt(Ki)/100})`,transformOrigin:"center center"},display:N.id===l?"block":"none",position:N.id===l?"relative":"absolute"},children:h.jsx("webview",{ref:Ep(N.id),src:N.url||"about:blank",preload:`file://${Gu}`,className:"w-full h-full",style:ka==="desktop"?{width:"100%"}:void 0,allowpopups:"true",nodeintegration:"true",webpreferences:"contextIsolation=no"})},N.id))}):Tn?h.jsx("div",{className:`w-full h-full flex items-center justify-center ${de?"bg-neutral-800":"bg-stone-50"}`,children:h.jsx("div",{className:`w-8 h-8 border-2 rounded-full animate-spin ${de?"border-neutral-600 border-t-neutral-400":"border-stone-300 border-t-stone-600"}`})}):h.jsx("div",{className:`w-full h-full flex items-center justify-center ${de?"bg-neutral-800":"bg-stone-50"}`,children:h.jsxs("div",{className:"text-center p-8",children:[h.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${de?"bg-neutral-700":"bg-stone-200"}`,children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:de?"text-neutral-500":"text-stone-400",children:[h.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),h.jsx("path",{d:"M3 9h18"}),h.jsx("path",{d:"M9 21V9"})]})}),h.jsx("h3",{className:`text-lg font-medium mb-2 ${de?"text-neutral-200":"text-stone-700"}`,children:"Browser Preview"}),h.jsx("p",{className:`text-sm max-w-xs ${de?"text-neutral-400":"text-stone-500"}`,children:"Run this app in Electron to browse localhost projects with the inspector."})]})}),!F&&h.jsxs("div",{className:`absolute bottom-8 left-1/2 transform -translate-x-1/2 flex items-center gap-1 backdrop-blur shadow-2xl p-2 rounded-full z-40 ${de?"bg-neutral-800/90 border border-neutral-700/50":"bg-white/90 border border-stone-200/50"}`,children:[h.jsx("button",{onClick:()=>L(!W),className:`w-9 h-9 rounded-full flex items-center justify-center transition-all ${W?"bg-green-100 text-green-600":de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,title:"Toggle Screen Share",children:h.jsx(mN,{size:16})}),h.jsx("button",{onClick:()=>{sn(!wt),Ue(!1),Jt(!1)},className:`w-9 h-9 rounded-full flex items-center justify-center transition-all ${wt?"bg-blue-100 text-blue-600":de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,title:"Toggle Element Inspector",children:h.jsx(r2,{size:16})}),h.jsx("button",{onClick:()=>{Jt(!ht),sn(!1)},className:`w-9 h-9 rounded-full flex items-center justify-center transition-all ${ht?"bg-orange-100 text-orange-600":de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,title:"Move & Resize Element",children:h.jsx(o2,{size:16})}),h.jsx("div",{className:`w-[1px] h-5 mx-0.5 ${de?"bg-neutral-600":"bg-stone-200"}`}),h.jsx("button",{onClick:()=>{Xa.isConnected?(xp(),xE()):Zd()},"data-control-id":"voice-button","data-control-type":"button",className:`flex items-center justify-center w-9 h-9 rounded-full font-medium transition-all ${Xa.isConnected?"bg-red-50 text-red-600 ring-1 ring-red-100":de?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-800"}`,title:Xa.isConnected?"End voice session":"Start voice session",children:Xa.isConnected?h.jsxs("span",{className:"relative flex h-2 w-2",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}):h.jsx(F1e,{size:16})})]}),(wt||ye||ht)&&vt&&h.jsx("div",{className:"fixed z-[60] pointer-events-none",style:{top:Math.max(8,(((uc=Xn.current.get(l))==null?void 0:uc.getBoundingClientRect().top)||0)+vt.rect.top-32),left:Math.max(8,(((Ap=Xn.current.get(l))==null?void 0:Ap.getBoundingClientRect().left)||0)+vt.rect.left)},children:h.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-mono shadow-lg ${ye?"bg-purple-600 text-white":ht?"bg-orange-500 text-white":"bg-blue-600 text-white"}`,style:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:[h.jsx("span",{className:"font-semibold",children:(Sg=vt.element.tagName)==null?void 0:Sg.toLowerCase()}),vt.element.id&&h.jsxs("span",{className:"opacity-80",children:["#",vt.element.id]}),vt.element.className&&h.jsxs("span",{className:"opacity-60 max-w-[200px] truncate",children:[".",vt.element.className.split(" ")[0]]}),h.jsxs("span",{className:"opacity-50 text-[10px] ml-1",children:[Math.round(vt.rect.width),"",Math.round(vt.rect.height)]})]})}),!F&&ue&&kt&&h.jsx("div",{className:"absolute z-50",style:kh(),children:h.jsxs("div",{className:`rounded-2xl shadow-2xl w-80 p-3 ${de?"bg-neutral-800/95 border border-neutral-700":"bg-white/95 border border-stone-200"}`,style:{backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:[h.jsxs("div",{className:"flex flex-col gap-2 mb-2",children:[h.jsxs("div",{className:`flex items-center gap-2 text-xs ${de?"text-neutral-400":"text-stone-500"}`,children:[h.jsx("div",{className:"bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded font-mono font-medium",children:ue.tagName}),h.jsx("span",{className:"truncate max-w-[150px]",children:ue.text}),h.jsx("div",{className:"flex-1"}),h.jsx("button",{onClick:()=>{Fn(!1),et(null);const N=Xn.current.get(l);N==null||N.send("clear-selection")},className:`p-1 rounded hover:bg-black/10 ${de?"hover:text-neutral-200":"hover:text-stone-900"}`,title:"Dismiss (Esc)",children:h.jsx(qr,{size:14})})]}),ue.sourceLocation&&h.jsx("div",{className:`text-xs font-mono ${de?"text-neutral-500":"text-stone-400"}`,children:ue.sourceLocation.summary})]}),h.jsxs("form",{onSubmit:N=>{N.preventDefault(),Xd(Hr),ua(""),Fn(!1)},children:[h.jsx("textarea",{value:Hr,onChange:N=>ua(N.target.value),placeholder:"What would you like to change?",className:`w-full text-sm p-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 resize-none ${de?"bg-neutral-700 border-neutral-600 text-neutral-100 placeholder-neutral-400":"bg-stone-50 border-stone-200"}`,rows:2,autoFocus:!0,onKeyDown:N=>{if(N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),Xd(Hr),ua(""),Fn(!1)),N.key==="Escape"){Fn(!1),et(null);const G=Xn.current.get(l);G==null||G.send("clear-selection")}}}),h.jsx("div",{className:"flex justify-end mt-2",children:h.jsx("button",{type:"submit",disabled:!Hr.trim(),className:`w-7 h-7 rounded-full flex items-center justify-center disabled:opacity-50 ${de?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-700"}`,children:h.jsx(T5,{size:14})})})]})]})})]}),wh&&h.jsx("div",{className:"fixed inset-0 z-50 cursor-ns-resize"}),da&&h.jsxs("div",{className:`absolute bottom-4 right-4 w-80 rounded-xl shadow-2xl border z-50 ${de?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,children:[h.jsxs("div",{className:`flex items-center justify-between px-4 py-3 border-b ${de?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(qP,{size:18,className:"text-purple-500"}),h.jsx("span",{className:`font-medium ${de?"text-white":"text-stone-800"}`,children:"Cluso Agent"}),Xs.isProcessing&&h.jsx("div",{className:"w-3 h-3 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})]}),h.jsx("button",{onClick:()=>uh(!1),className:`w-6 h-6 rounded flex items-center justify-center ${de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,children:h.jsx(qr,{size:14})})]}),h.jsxs("div",{className:"p-4 space-y-3",children:[h.jsx("div",{className:`text-xs ${Xs.isReady?"text-green-500":"text-orange-500"}`,children:Xs.isReady?" Connected to local model":" Connecting..."}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:`text-xs font-medium ${de?"text-neutral-400":"text-stone-500"}`,children:" Two-Voice Demos (User + App)"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:fie.map(N=>h.jsx("button",{onClick:()=>Xs.runScriptedDemo(N),disabled:Xs.isProcessing||!Xs.isReady,className:`px-3 py-2 text-sm rounded-lg transition-colors capitalize ${Xs.isProcessing?"opacity-50 cursor-not-allowed":de?"bg-purple-600 hover:bg-purple-500 text-white":"bg-purple-100 hover:bg-purple-200 text-purple-700"}`,children:N.replace("-"," ")},N))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:`text-xs font-medium ${de?"text-neutral-400":"text-stone-500"}`,children:" Quick Commands"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:Vot.map(N=>h.jsx("button",{onClick:()=>Xs.runDemo(N),disabled:Xs.isProcessing||!Xs.isReady,className:`px-3 py-2 text-sm rounded-lg transition-colors capitalize ${Xs.isProcessing?"opacity-50 cursor-not-allowed":de?"bg-neutral-700 hover:bg-neutral-600 text-neutral-200":"bg-stone-100 hover:bg-stone-200 text-stone-700"}`,children:N.replace("-"," ")},N))})]}),h.jsx("div",{className:"flex gap-2",children:h.jsx("input",{type:"text",placeholder:"Ask agent to do something...",className:`flex-1 px-3 py-2 text-sm rounded-lg border ${de?"bg-neutral-700 border-neutral-600 text-white placeholder-neutral-400":"bg-stone-50 border-stone-200 text-stone-800 placeholder-stone-400"}`,onKeyDown:async N=>{if(N.key==="Enter"&&!Xs.isProcessing){const G=N.currentTarget,oe=G.value.trim();oe&&(G.value="",await Xs.chat(oe))}}})}),Xs.lastResponse&&h.jsxs("div",{className:`text-xs p-2 rounded ${de?"bg-neutral-700 text-neutral-300":"bg-stone-50 text-stone-600"}`,children:[Xs.lastResponse.substring(0,150),Xs.lastResponse.length>150&&"..."]}),Xs.error&&h.jsx("div",{className:"text-xs p-2 rounded bg-red-500/10 text-red-500",children:Xs.error}),h.jsx("button",{onClick:()=>Xs.reset(),className:`w-full px-3 py-1.5 text-xs rounded ${de?"text-neutral-400 hover:bg-neutral-700":"text-stone-500 hover:bg-stone-100"}`,children:"Reset conversation"})]})]}),Fs&&h.jsxs("div",{className:`flex flex-col overflow-hidden ${de?"bg-neutral-900":"bg-stone-50"}`,style:{height:Rl},children:[h.jsx("div",{className:`h-2 cursor-ns-resize flex-shrink-0 flex items-center justify-center group ${de?"bg-neutral-900":"bg-stone-50"}`,onMouseDown:gp,children:h.jsx("div",{className:`w-8 h-0.5 rounded-full transition-colors ${wh?de?"bg-neutral-400":"bg-stone-500":de?"bg-neutral-600 group-hover:bg-neutral-500":"bg-stone-300 group-hover:bg-stone-400"}`})}),h.jsxs("div",{className:`flex items-center justify-between px-3 py-1.5 border-b ${de?"border-neutral-700":"border-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-1.5",style:{position:"relative",top:"-3px"},children:[h.jsxs("button",{onClick:xg,className:`flex items-center gap-2 px-2.5 py-1 rounded-full transition-colors ${Ml.size===0?de?"bg-neutral-600 text-neutral-200":"bg-stone-300 text-stone-700":de?"bg-neutral-700 text-neutral-400 hover:bg-neutral-600":"bg-stone-200 text-stone-500 hover:bg-stone-300"}`,title:"Show all logs",children:[h.jsx(ud,{size:14}),h.jsx("span",{className:"text-xs font-medium",children:"Console"}),h.jsx("span",{className:"text-xs opacity-70",children:Sp.length})]}),h.jsx("button",{onClick:()=>Zc("log"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Ml.has("log")?de?"bg-neutral-500 text-white":"bg-stone-500 text-white":de?"bg-neutral-800 text-neutral-400 hover:bg-neutral-700":"bg-stone-100 text-stone-500 hover:bg-stone-200"}`,title:"Filter by log",children:"log"}),h.jsx("button",{onClick:()=>Zc("info"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Ml.has("info")?"bg-blue-500 text-white":de?"bg-neutral-800 text-blue-400 hover:bg-neutral-700":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,title:"Filter by info",children:"info"}),h.jsx("button",{onClick:()=>Zc("warn"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Ml.has("warn")?"bg-yellow-500 text-white":de?"bg-neutral-800 text-yellow-400 hover:bg-neutral-700":"bg-yellow-50 text-yellow-600 hover:bg-yellow-100"}`,title:"Filter by warn",children:"warn"}),h.jsx("button",{onClick:()=>Zc("error"),className:`px-2 py-1 rounded-full text-xs font-medium transition-colors ${Ml.has("error")?"bg-red-500 text-white":de?"bg-neutral-800 text-red-400 hover:bg-neutral-700":"bg-red-50 text-red-600 hover:bg-red-100"}`,title:"Filter by error",children:"error"})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[oi.size>0&&h.jsxs(h.Fragment,{children:[h.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${de?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-600"}`,children:[oi.size," selected"]}),h.jsxs("div",{className:"flex items-center gap-0.5 ml-1",children:[h.jsx("button",{onClick:()=>{const N=(js==null?void 0:js.map(G=>G.message).join(`
`))||"";ly(N)},className:`p-1.5 rounded transition-colors ${de?"hover:bg-neutral-600 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-200 text-stone-500 hover:text-stone-700"}`,title:"Search for solutions (G)",children:h.jsx(Gf,{size:14})}),h.jsx("button",{onClick:()=>{const N=(js==null?void 0:js.map(G=>`[${G.type}] ${G.message}`).join(`
`))||"";navigator.clipboard.writeText(N)},className:`p-1.5 rounded transition-colors ${de?"hover:bg-neutral-600 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-200 text-stone-500 hover:text-stone-700"}`,title:"Copy (C)",children:h.jsx(vq,{size:14})}),h.jsx("button",{onClick:()=>ic(new Set),className:`p-1.5 rounded transition-colors ${de?"hover:bg-neutral-600 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-200 text-stone-500 hover:text-stone-700"}`,title:"Clear selection (Esc)",children:h.jsx(qr,{size:14})})]})]}),h.jsx("button",{onClick:wE,className:`p-1 rounded hover:bg-opacity-80 transition ${de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Clear console",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("path",{d:"m4.9 4.9 14.2 14.2"})]})}),h.jsx("button",{onClick:()=>lg(!1),className:`p-1 rounded hover:bg-opacity-80 transition ${de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Close console",children:h.jsx(qr,{size:14})})]})]}),h.jsxs("div",{className:`flex-1 overflow-y-auto font-mono text-xs p-2 space-y-0.5 ${de?"text-neutral-300":"text-stone-700"}`,children:[Sp.length===0?h.jsx("div",{className:`text-center py-8 ${de?"text-neutral-500":"text-stone-400"}`,children:Zi.length===0?"No console messages yet":"No logs match current filters"}):Sp.map((N,G)=>h.jsxs("div",{onClick:oe=>_p(G,oe),className:`flex items-start gap-2 px-2 py-0.5 rounded cursor-pointer select-none transition-colors ${oi.has(G)?de?"bg-blue-500/20 ring-1 ring-blue-500/50":"bg-blue-100 ring-1 ring-blue-300":N.type==="error"?de?"bg-red-500/10 text-red-400 hover:bg-red-500/20":"bg-red-50 text-red-600 hover:bg-red-100":N.type==="warn"?de?"bg-yellow-500/10 text-yellow-400 hover:bg-yellow-500/20":"bg-yellow-50 text-yellow-600 hover:bg-yellow-100":N.type==="info"?de?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":"bg-blue-50 text-blue-600 hover:bg-blue-100":de?"hover:bg-neutral-700":"hover:bg-stone-100"}`,title:"Click to select, Shift+click for range",children:[h.jsx("span",{className:`flex-shrink-0 ${de?"text-neutral-500":"text-stone-400"}`,children:N.timestamp.toLocaleTimeString()}),h.jsxs("span",{className:"flex-shrink-0 w-12 text-center",children:["[",N.type,"]"]}),h.jsx("span",{className:"break-all flex-1",children:N.message}),h.jsx("span",{className:`flex-shrink-0 w-4 h-4 rounded border flex items-center justify-center transition-colors ${oi.has(G)?"bg-blue-500 border-blue-500":de?"border-neutral-500 hover:border-neutral-400":"border-stone-300 hover:border-stone-400"}`,children:oi.has(G)&&h.jsx(Co,{size:10,className:"text-white"})})]},G)),h.jsx("div",{ref:fa})]})]}),i3&&h.jsxs("div",{className:`absolute bottom-full left-0 right-0 mb-2 mx-2 rounded-xl border shadow-xl overflow-hidden z-50 ${de?"bg-neutral-800 border-neutral-600":"bg-white border-stone-200"}`,style:{maxHeight:"300px"},children:[h.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b ${de?"border-neutral-700":"border-stone-100"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx($f,{size:14,className:de?"text-blue-400":"text-blue-500"}),h.jsx("span",{className:`text-sm font-medium ${de?"text-neutral-200":"text-stone-700"}`,children:rp?"Searching...":`${(vi==null?void 0:vi.length)||0} Results`})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[vi&&vi.length>0&&h.jsxs("button",{onClick:cy,className:`flex items-center gap-1.5 px-2 py-1 text-xs font-medium rounded transition-colors ${de?"bg-blue-500/20 text-blue-300 hover:bg-blue-500/30":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,title:"Send to chat",children:[h.jsx(ibe,{size:12}),"Add to Chat"]}),h.jsx("button",{onClick:()=>op(!1),className:`p-1 rounded transition-colors ${de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-100 text-stone-500"}`,children:h.jsx(qr,{size:14})})]})]}),h.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"240px"},children:rp?h.jsxs("div",{className:`flex items-center justify-center py-8 ${de?"text-neutral-400":"text-stone-500"}`,children:[h.jsx(ho,{size:20,className:"animate-spin mr-2"}),h.jsx("span",{className:"text-sm",children:"Searching the web..."})]}):vi&&vi.length>0?h.jsx("div",{className:"divide-y divide-stone-100 dark:divide-neutral-700",children:vi.map((N,G)=>h.jsxs("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:`block px-3 py-2 transition-colors ${de?"hover:bg-neutral-700":"hover:bg-stone-50"}`,children:[h.jsx("div",{className:`text-sm font-medium truncate ${de?"text-blue-400":"text-blue-600"}`,children:N.title}),h.jsx("div",{className:`text-xs truncate mt-0.5 ${de?"text-neutral-500":"text-stone-400"}`,children:N.url}),N.snippet&&h.jsx("div",{className:`text-xs mt-1 line-clamp-2 ${de?"text-neutral-400":"text-stone-500"}`,children:N.snippet})]},G))}):vi&&vi.length===0?h.jsx("div",{className:`text-center py-8 text-sm ${de?"text-neutral-400":"text-stone-500"}`,children:"No results found"}):null})]})]})]}),Be&&h.jsx("div",{className:"fixed inset-0 z-50 cursor-ew-resize"}),F&&h.jsx("div",{className:`w-1 cursor-ew-resize z-10 transition-colors flex-shrink-0 ${Be?de?"bg-neutral-500":"bg-stone-400":de?"hover:bg-neutral-600":"hover:bg-stone-300"}`,onMouseDown:ty}),F&&h.jsxs("div",{className:"flex flex-col rounded-xl shadow-sm flex-shrink-0 border",style:{width:we,minWidth:430,backgroundColor:Uc,borderColor:Hc},children:[h.jsxs("div",{className:"h-12 border-b flex items-center justify-between px-3 flex-shrink-0",style:{borderColor:Hc},children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>ur(!Jn),className:`flex items-center gap-1.5 text-sm px-2 py-1 rounded transition ${de?"text-neutral-300 hover:bg-neutral-700":"text-stone-600 hover:bg-stone-100"}`,children:[h.jsx(p1e,{size:14}),h.jsx("span",{children:Kt.currentBranch})]}),Jn&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>{ur(!1),Cl(!1)}}),h.jsx("div",{className:`absolute top-full left-0 mt-1 w-56 rounded-xl shadow-xl py-1 z-50 max-h-64 overflow-y-auto ${de?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:ep?h.jsx("div",{className:"p-2",children:h.jsx("input",{type:"text",value:Tl,onChange:N=>qm(N.target.value),placeholder:"New branch name...",className:`w-full text-sm px-2 py-1.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${de?"bg-neutral-600 border border-neutral-500 text-neutral-100 placeholder-neutral-400":"border border-stone-200"}`,autoFocus:!0,onKeyDown:async N=>{N.key==="Enter"&&Tl.trim()&&(await Kt.createBranch(Tl.trim()),qm(""),Cl(!1),ur(!1)),N.key==="Escape"&&Cl(!1)}})}):h.jsx(h.Fragment,{children:Kt.branches.filter(N=>!N.startsWith("remotes/")).map(N=>h.jsxs("button",{onClick:async()=>{await Kt.checkout(N),ur(!1)},className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${de?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[N===Kt.currentBranch&&h.jsx(Co,{size:12,className:"text-green-600"}),h.jsx("span",{className:N===Kt.currentBranch?"font-medium":"",children:N})]},N))})})]})]}),h.jsx("button",{onClick:()=>{ur(!0),Cl(!0)},className:`p-1 rounded transition ${de?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"New branch",children:h.jsx(qf,{size:14})})]}),h.jsx("div",{className:"flex-1 mx-3",children:h.jsx("input",{type:"text",value:dh,onChange:N=>fh(N.target.value),placeholder:"Message ( to commit)",className:`w-full text-xs px-3 py-1.5 rounded-3xl focus:outline-none ${de?"bg-neutral-800/60 text-neutral-300 placeholder-neutral-600 focus:bg-neutral-800":"bg-stone-50 border border-stone-200 text-stone-600 placeholder-stone-400 focus:ring-1 focus:ring-stone-300"}`,onKeyDown:async N=>{N.key==="Enter"&&(N.metaKey||N.ctrlKey)&&dh.trim()&&(kl("commit"),await Kt.commit(dh.trim()),fh(""),kl(null))}})}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>bh(!0),className:`p-1.5 rounded transition ${tp==="stash"?"animate-pulse":""} ${de?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"Stash changes",disabled:!Kt.hasChanges,children:h.jsx(yge,{size:14})}),h.jsx("button",{onClick:async()=>{kl("pull"),await Kt.pull(),kl(null)},className:`p-1.5 rounded transition ${tp==="pull"?"animate-pulse":""} ${de?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"Pull",children:h.jsx(UP,{size:14})}),h.jsx("button",{onClick:async()=>{kl("push"),await Kt.push(),kl(null)},className:`p-1.5 rounded transition ${tp==="push"?"animate-pulse":""} ${de?"hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200":"hover:bg-stone-100 text-stone-400 hover:text-stone-600"}`,title:"Push",children:h.jsx(T5,{size:14})})]})]}),h.jsxs("div",{className:"relative flex-1",children:[h.jsxs("div",{ref:jt,className:"absolute inset-0 overflow-y-auto p-4 space-y-4",children:[Yt.length>0&&h.jsx(Kot,{questions:Yt,onSelectQuestion:N=>{var G;Oe(N),(G=pt.current)==null||G.focus()},onDismissQuestion:Ht,isDarkMode:de,isVisible:Yt.length>0,isEmptyChat:Ce.length===0}),Ce.length===0&&h.jsx("div",{className:`h-full flex items-center justify-center text-sm ${de?"text-neutral-500":"text-stone-300"}`,children:"Start a conversation..."}),Ce.map(N=>h.jsxs("div",{className:`flex flex-col ${N.role==="user"?"items-end":"items-start"}`,children:[N.role==="assistant"&&N.reasoning&&h.jsxs("details",{className:`mb-2 w-full rounded-lg overflow-hidden ${de?"bg-purple-500/10 border border-purple-500/20":"bg-purple-50 border border-purple-200"}`,children:[h.jsxs("summary",{className:`px-3 py-2 text-xs cursor-pointer flex items-center gap-2 ${de?"text-purple-300 hover:bg-purple-500/20":"text-purple-700 hover:bg-purple-100"}`,children:[h.jsx(f1,{size:14}),h.jsx("span",{children:"View Reasoning"})]}),h.jsx("div",{className:`px-3 py-2 text-xs font-mono whitespace-pre-wrap max-h-48 overflow-y-auto ${de?"text-purple-200/80 border-t border-purple-500/20":"text-purple-600 border-t border-purple-200"}`,children:N.reasoning})]}),N.role==="assistant"&&N.toolUsage&&N.toolUsage.length>0&&h.jsx("div",{className:"mb-2 flex flex-wrap gap-1.5",children:N.toolUsage.map((G,oe)=>h.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium ${G.isError?de?"bg-red-500/20 text-red-300":"bg-red-100 text-red-700":de?"bg-emerald-500/20 text-emerald-300":"bg-emerald-100 text-emerald-700"}`,children:[G.isError?h.jsx(qr,{size:10}):h.jsx(Co,{size:10}),h.jsx("span",{className:"font-mono",children:G.name})]},G.id||oe))}),h.jsx("div",{className:`leading-relaxed overflow-hidden ${N.role==="user"?`px-3 py-2 max-w-[85%] ${de?"bg-white text-neutral-900 rounded-xl":"bg-stone-900 text-white rounded-xl"}`:N.role==="system"?`px-4 py-3 ${de?"bg-yellow-500/20 text-yellow-200 rounded-2xl":"bg-yellow-50 text-yellow-800 rounded-2xl"}`:`w-full ${de?"text-neutral-200":"text-stone-700"}`}`,style:{fontSize:Dz(Ls.fontSize)},children:h.jsx(FI,{children:N.content})}),h.jsxs("div",{className:`text-[10px] mt-1 ${N.role==="user"?"text-right pr-1":"text-left"} ${de?"text-neutral-500":"text-stone-400"}`,children:[hdt(N.timestamp),N.role==="assistant"&&N.model&&`  ${N.model}`,N.role==="assistant"&&N.intent&&`  ${N.intent}`]})]},N.id)),Yb&&h.jsx(aot,{data:Yb,onSubmit:p3,onSkip:m3,isDarkMode:de}),mh&&Qs&&h.jsxs("div",{className:"flex flex-col items-start",children:[Qs.toolCalls.length>0&&h.jsx("div",{className:"mb-2 flex flex-wrap gap-1.5",children:Qs.toolCalls.map((N,G)=>h.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium transition-all ${N.status==="running"?de?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-700":N.status==="error"?de?"bg-red-500/20 text-red-300":"bg-red-100 text-red-700":de?"bg-emerald-500/20 text-emerald-300":"bg-emerald-100 text-emerald-700"}`,children:[N.status==="running"&&h.jsx(ho,{size:10,className:"animate-spin"}),N.status==="done"&&h.jsx(Co,{size:10}),N.status==="error"&&h.jsx(qr,{size:10}),h.jsx("span",{className:"font-mono",children:N.name})]},N.id||G))}),Qs.reasoning&&h.jsxs("div",{className:`mb-2 w-full px-3 py-2 rounded-lg text-xs ${de?"bg-purple-500/10 text-purple-300 border border-purple-500/20":"bg-purple-50 text-purple-700 border border-purple-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1 font-medium",children:[h.jsx(f1,{size:14}),h.jsx("span",{children:"Thinking..."})]}),h.jsx("div",{className:"font-mono text-xs opacity-80 max-h-32 overflow-y-auto whitespace-pre-wrap",children:Qs.reasoning})]}),h.jsxs("div",{className:`w-full ${de?"text-neutral-200":"text-stone-700"}`,style:{fontSize:Dz(Ls.fontSize)},children:[Qs.content?h.jsx(FI,{children:Qs.content}):h.jsxs("div",{className:"flex items-center gap-2 text-sm opacity-60",children:[h.jsx(ho,{size:14,className:"animate-spin"}),h.jsx("span",{children:"Generating response..."})]}),h.jsx("span",{className:"inline-block w-2 h-4 ml-0.5 bg-current animate-pulse",style:{verticalAlign:"text-bottom"}})]})]}),!mh&&ap.length>0&&h.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5 animate-in fade-in duration-300",children:ap.map(N=>h.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium transition-all ${N.status==="error"?de?"bg-red-500/20 text-red-300":"bg-red-100 text-red-700":de?"bg-emerald-500/20 text-emerald-300":"bg-emerald-100 text-emerald-700"}`,children:[N.status==="error"?h.jsx(qr,{size:10}):h.jsx(Co,{size:10}),h.jsx("span",{className:"font-mono",children:N.name})]},N.id))}),Ca&&!mh&&h.jsxs("div",{className:"flex items-center gap-2 text-sm opacity-60",children:[h.jsx(ho,{size:14,className:"animate-spin"}),h.jsx("span",{children:"Processing..."})]}),Bn&&!Vc&&h.jsxs("div",{className:`mx-4 my-3 p-3 rounded-xl border ${de?"bg-blue-950/50 border-blue-800/50":"bg-blue-50 border-blue-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(cv,{size:16,className:de?"text-blue-400":"text-blue-600"}),h.jsx("span",{className:`text-sm font-medium truncate ${de?"text-blue-300":"text-blue-800"}`,children:Bn.description})]}),h.jsxs("div",{className:"flex gap-2 items-center shrink-0",children:[Bn.patchStatus==="preparing"&&h.jsxs("div",{className:`flex items-center gap-1 text-xs ${de?"text-blue-300/70":"text-blue-700/70"}`,children:[h.jsx(ho,{size:14,className:"animate-spin"}),h.jsx("span",{children:"Preparing source patch"})]}),Bn.patchStatus==="error"&&h.jsx("div",{className:`text-xs ${de?"text-red-300/80":"text-red-600/80"}`,children:Bn.patchError||"Failed to prepare patch"}),h.jsx("button",{onClick:jo,className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${de?"bg-neutral-700 hover:bg-neutral-600 text-neutral-300":"bg-stone-200 hover:bg-stone-300 text-stone-700"}`,children:"Reject"}),h.jsx("button",{onClick:Ah,disabled:Bn.userApproved,className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors flex items-center gap-1.5 ${de?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} ${Bn.userApproved?"opacity-60 cursor-not-allowed":""}`,children:Bn.userApproved?h.jsxs(h.Fragment,{children:[h.jsx(ho,{size:14,className:"animate-spin"}),"Applying"]}):Bn.patchStatus==="ready"?h.jsxs(h.Fragment,{children:[h.jsx(Co,{size:14}),"Accept"]}):h.jsxs(h.Fragment,{children:[h.jsx(Co,{size:14}),"Accept"]})})]})]}),Bn.patchStatus==="ready"&&Bn.patch&&h.jsx("div",{className:`mt-2 pt-2 border-t ${de?"border-blue-800/30":"border-blue-200"}`,children:h.jsxs("div",{className:`flex items-center gap-2 text-xs ${de?"text-blue-300/70":"text-blue-700/70"}`,children:[Bn.patch.generatedBy==="fast-apply"?h.jsxs(h.Fragment,{children:[h.jsx(Ac,{size:12,className:"text-yellow-500"}),h.jsx("span",{className:"font-medium text-yellow-500",children:"Fast Apply"}),h.jsx("span",{children:""}),h.jsxs("span",{children:[Bn.patch.durationMs,"ms"]})]}):Bn.patch.generatedBy==="fast-path"?h.jsxs(h.Fragment,{children:[h.jsx(Ac,{size:12,className:"text-green-500"}),h.jsx("span",{className:"font-medium text-green-500",children:"Fast Path"}),h.jsx("span",{children:" instant"})]}):h.jsxs(h.Fragment,{children:[h.jsx(fR,{size:12}),h.jsx("span",{className:"font-medium",children:"Gemini"})]}),h.jsx("span",{children:""}),h.jsx("span",{className:"truncate",children:Bn.patch.filePath.split("/").pop()})]})})]}),(Sr==null?void 0:Sr.source)==="code"&&h.jsx("div",{className:`mx-4 my-3 p-3 rounded-xl border ${de?"bg-blue-950/50 border-blue-800/50":"bg-blue-50 border-blue-200"}`,children:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(zy,{size:16,className:de?"text-blue-400":"text-blue-600"}),h.jsx("span",{className:`text-sm font-medium truncate ${de?"text-blue-300":"text-blue-800"}`,children:Sr.description})]}),h.jsxs("div",{className:"flex gap-2 items-center shrink-0",children:[h.jsx("button",{onClick:ha,title:"Reject (Esc)",className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${de?"bg-neutral-700 hover:bg-neutral-600 text-neutral-300":"bg-stone-200 hover:bg-stone-300 text-stone-700"}`,children:"Reject"}),h.jsxs("button",{onClick:Pl,title:"Accept (+Enter)",className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors flex items-center gap-1.5 ${de?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[h.jsx(Co,{size:14}),"Accept"]})]})]})}),Vc&&h.jsx("div",{className:`mx-4 my-3 p-3 rounded-xl border ${de?"bg-blue-950/50 border-blue-800/50":"bg-blue-50 border-blue-200"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ho,{size:16,className:`animate-spin ${de?"text-blue-400":"text-blue-600"}`}),h.jsx("span",{className:`text-sm ${de?"text-blue-300":"text-blue-800"}`,children:"Updating source code..."})]})}),xi&&h.jsx("div",{className:`mx-4 my-3 p-4 rounded-xl border ${de?"bg-emerald-950/50 border-emerald-800/50":"bg-emerald-50 border-emerald-200"}`,children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${de?"bg-emerald-900/50":"bg-emerald-100"}`,children:h.jsx(zy,{size:18,className:de?"text-emerald-400":"text-emerald-600"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:`text-sm font-medium ${de?"text-emerald-300":"text-emerald-800"}`,children:"Apply to Source Code?"}),h.jsx("div",{className:`text-xs mt-0.5 ${de?"text-emerald-400/70":"text-emerald-600/70"}`,children:xi.description}),h.jsx("div",{className:`text-xs mt-1 font-mono truncate ${de?"text-neutral-400":"text-stone-500"}`,children:xi.filePath.split("/").slice(-2).join("/")})]}),h.jsxs("div",{className:"flex gap-2 items-center",children:[xi.undoCode&&xi.applyCode&&h.jsx("button",{onMouseDown:()=>{const N=Xn.current.get(l);xi.undoCode&&N&&(console.log("[Preview] Showing original"),N.executeJavaScript(xi.undoCode),Xm(!0))},onMouseUp:()=>{const N=Xn.current.get(l);xi.applyCode&&N&&(console.log("[Preview] Showing change"),N.executeJavaScript(xi.applyCode),Xm(!1))},onMouseLeave:()=>{if(!oE)return;const N=Xn.current.get(l);xi.applyCode&&N&&(console.log("[Preview] Showing change (mouse leave)"),N.executeJavaScript(xi.applyCode),Xm(!1))},className:`p-1.5 rounded-lg transition-colors ${de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-stone-200 text-stone-500"}`,title:"Hold to see original",children:oE?h.jsx(wq,{size:16}):h.jsx(uR,{size:16})}),h.jsx("button",{onClick:()=>{if(xi.undoCode){const N=Xn.current.get(l);N&&N.executeJavaScript(xi.undoCode)}rE(null)},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${de?"bg-neutral-700 hover:bg-neutral-600 text-neutral-300":"bg-stone-200 hover:bg-stone-300 text-stone-700"}`,children:"Dismiss"}),h.jsxs("button",{onClick:async()=>{var N,G;if((G=(N=window.electronAPI)==null?void 0:N.files)!=null&&G.writeFile&&xi){const oe=await window.electronAPI.files.writeFile(xi.filePath,xi.patchedContent);oe.success?(console.log("[Source Patch] Applied successfully"),he(ve=>[...ve,{id:`msg-patch-${Date.now()}`,role:"assistant",content:`Source code updated: ${xi.filePath.split("/").pop()}`,timestamp:new Date}])):console.error("[Source Patch] Failed to apply:",oe.error),rE(null)}},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors flex items-center gap-1.5 ${de?"bg-emerald-600 hover:bg-emerald-500 text-white":"bg-emerald-600 hover:bg-emerald-700 text-white"}`,children:[h.jsx(Co,{size:14}),"Apply"]})]})]})}),h.jsx("div",{ref:ln})]}),Wa&&h.jsxs("button",{onClick:Na,className:`absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex items-center gap-1.5 px-3 py-1.5 rounded-full shadow-lg transition-all duration-200 hover:scale-105 ${de?"bg-neutral-700 text-neutral-200 hover:bg-neutral-600 border border-neutral-600":"bg-white text-stone-700 hover:bg-stone-50 border border-stone-200"}`,title:"Scroll to bottom",children:[h.jsx(UP,{size:14}),h.jsx("span",{className:"text-xs font-medium",children:"New messages"})]})]}),Ka.length>0&&h.jsx("div",{className:"px-4 pb-2",children:h.jsxs("div",{className:`rounded-t-2xl border border-b-0 overflow-hidden transition-all duration-300 shadow-lg ${de?"bg-neutral-800 border-neutral-600":"bg-stone-100 border-stone-200"}`,children:[h.jsxs("div",{onClick:()=>fp(!Pu),className:`w-full flex items-center justify-between px-4 py-2.5 transition-colors cursor-pointer ${de?"hover:bg-neutral-700":"hover:bg-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Af,{size:16,className:`transition-transform duration-200 ${Pu?"rotate-90":""} ${de?"text-neutral-400":"text-stone-500"}`}),h.jsxs("span",{className:`text-sm font-medium ${de?"text-neutral-200":"text-stone-700"}`,children:[Ka.length," File",Ka.length!==1?"s":""," Changed"]}),h.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${de?"bg-amber-500/20 text-amber-400":"bg-amber-100 text-amber-700"}`,children:"Pending"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:N=>{N.stopPropagation(),Vu()},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${de?"text-red-400 hover:bg-red-500/20 border border-red-500/30":"text-red-600 hover:bg-red-50 border border-red-200"}`,children:"Reject"}),h.jsx("button",{onClick:N=>{N.stopPropagation(),uy()},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${de?"text-green-400 hover:bg-green-500/20 border border-green-500/30":"text-green-600 hover:bg-green-50 border border-green-200"}`,children:"Accept"})]})]}),h.jsx("div",{className:`overflow-hidden transition-all duration-300 ${Pu?"max-h-80":"max-h-0"}`,children:h.jsx("div",{className:`border-t max-h-72 overflow-y-auto ${de?"border-neutral-700":"border-stone-200"}`,children:Ka.map((N,G)=>h.jsxs("div",{className:`flex items-center justify-between px-4 py-2 ${G!==Ka.length-1?de?"border-b border-neutral-700":"border-b border-stone-200":""} ${de?"hover:bg-neutral-700":"hover:bg-stone-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(zy,{size:14,className:de?"text-neutral-400":"text-stone-500"}),h.jsx("span",{className:`text-sm font-mono truncate ${de?"text-neutral-200":"text-stone-700"}`,children:N.fileName}),h.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono",children:[N.additions>0&&h.jsxs("span",{className:"text-green-500",children:["+",N.additions]}),N.deletions>0&&h.jsxs("span",{className:"text-red-500",children:["-",N.deletions]})]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[(N.undoCode||N.isFileModification)&&h.jsx("button",{onClick:()=>Qa(N.path),className:`p-1.5 rounded-lg text-xs transition-colors ${de?"text-red-400 hover:bg-red-500/20":"text-red-500 hover:bg-red-50"}`,title:"Reject this change",children:h.jsx(qr,{size:14})}),h.jsx("button",{onClick:()=>wi(oe=>oe.filter(ve=>ve.path!==N.path)),className:`p-1.5 rounded-lg text-xs transition-colors ${de?"text-green-400 hover:bg-green-500/20":"text-green-500 hover:bg-green-50"}`,title:"Accept this change",children:h.jsx(Co,{size:14})})]})]},N.path))})})]})}),h.jsx("div",{className:`p-4 ${Ka.length>0?"pt-0":""}`,style:{overflow:"visible"},children:h.jsxs("div",{className:`rounded-2xl border relative ${Ka.length>0?"rounded-t-none border-t-0":""} ${de?"bg-neutral-700 border-neutral-600":"bg-stone-50 border-stone-200"} ${Os?"ring-2 ring-blue-400 ring-opacity-50":""}`,style:{overflow:"visible"},onDragOver:wg,onDragLeave:Jc,onDrop:or,children:[Os&&h.jsx("div",{className:"absolute inset-0 bg-blue-500/10 rounded-2xl flex items-center justify-center z-10 pointer-events-none",children:h.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg ${de?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-600"}`,children:[h.jsx(XP,{size:20}),h.jsx("span",{className:"font-medium",children:"Drop images here (max 5)"})]})}),(ue||Ne||Go||js||Nl)&&h.jsxs("div",{className:"px-3 pt-3 flex flex-wrap gap-2",children:[Go&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-yellow-50 text-yellow-700 rounded-lg text-xs border border-yellow-200",children:[h.jsx(ud,{size:12}),h.jsx("span",{className:"font-medium",children:"Console Logs"}),h.jsx("button",{onClick:()=>ws(!1),className:"ml-0.5 hover:text-yellow-900",children:h.jsx(qr,{size:12})})]}),js&&js.length>0&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-purple-50 text-purple-700 rounded-lg text-xs border border-purple-200",children:[h.jsx(ud,{size:12}),h.jsxs("span",{className:"font-medium",children:[js.length," Log",js.length>1?"s":""," Selected"]}),h.jsx("button",{onClick:()=>{ic(new Set),Gc.current=null},className:"ml-0.5 hover:text-purple-900",children:h.jsx(qr,{size:12})})]}),Nl&&Nl.length>0&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-xs border border-blue-200",children:[h.jsx($f,{size:12}),h.jsxs("span",{className:"font-medium",children:[Nl.length," Search Result",Nl.length>1?"s":""]}),h.jsx("button",{onClick:()=>$d(null),className:"ml-0.5 hover:text-blue-900",children:h.jsx(qr,{size:12})})]}),ue&&h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs border cursor-pointer transition-colors ${ue.targetPosition?"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100":"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100"}`,onClick:Tp,title:ue.targetPosition?"Element with repositioning target":"Click to view source code",children:[ue.targetPosition?h.jsx(o2,{size:12}):h.jsx(Co,{size:12}),ue.sourceLocation?h.jsx("span",{className:"font-mono font-medium",children:(()=>{var Ae;const N=(Ae=ue.sourceLocation.sources)==null?void 0:Ae[0];if(!N)return ue.sourceLocation.summary;let G="unknown";if(N.file){const Ie=N.file.replace(/^\/\/localhost:\d+\//,""),He=Ie.split("/");G=He[He.length-1]||Ie}const oe=N.line||0,ve=N.endLine||oe+5;return`${G} (${oe}-${ve})`})()}):h.jsx("span",{className:"font-medium",children:ue.tagName.toLowerCase()}),ue.targetPosition&&h.jsxs("span",{className:"text-[10px] opacity-70",children:[" ",Math.round(ue.targetPosition.x),",",Math.round(ue.targetPosition.y)]}),h.jsx("button",{onClick:N=>{N.stopPropagation(),et(null),Ol(null),Kn(null);const G=Xn.current.get(l);G==null||G.send("clear-selection")},className:`ml-0.5 ${ue.targetPosition?"hover:text-orange-900":"hover:text-blue-900"}`,children:h.jsx(qr,{size:12})})]}),Ne&&h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-purple-50 text-purple-700 rounded-lg text-xs border border-purple-200",children:[h.jsx(WP,{size:12}),h.jsx("span",{className:"font-medium",children:Ne.tagName.toLowerCase()}),h.jsx("button",{onClick:()=>{$e(null),Le(null);const N=Xn.current.get(l);N==null||N.send("clear-selection")},className:"ml-0.5 hover:text-purple-900",children:h.jsx(qr,{size:12})})]})]}),Re&&Re.label&&h.jsxs("div",{className:"px-3 pt-2 flex flex-wrap gap-1.5",children:[h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium ${de?"bg-gradient-to-r from-violet-500/20 to-purple-500/20 text-violet-300 border border-violet-500/30":"bg-gradient-to-r from-violet-50 to-purple-50 text-violet-700 border border-violet-200"}`,children:[Re.type==="code_edit"&&h.jsx(Z_,{size:12}),Re.type==="code_create"&&h.jsx(pN,{size:12}),Re.type==="code_delete"&&h.jsx(Ff,{size:12}),Re.type==="code_explain"&&h.jsx(K_,{size:12}),Re.type==="code_refactor"&&h.jsx(p0,{size:12}),Re.type==="file_operation"&&h.jsx(E1,{size:12}),Re.type==="ui_inspect"&&h.jsx(Gf,{size:12}),Re.type==="ui_modify"&&h.jsx(cv,{size:12}),Re.type==="ui_build"&&h.jsx(JP,{size:12}),Re.type==="research"&&h.jsx(VP,{size:12}),Re.type==="analyze"&&h.jsx(YP,{size:12}),Re.type==="compare"&&h.jsx(ZP,{size:12}),Re.type==="plan"&&h.jsx(nL,{size:12}),Re.type==="document"&&h.jsx(n1e,{size:12}),Re.type==="test"&&h.jsx(sL,{size:12}),Re.type==="debug"&&h.jsx(GP,{size:12}),Re.type==="review"&&h.jsx(rL,{size:12}),Re.type==="deploy"&&h.jsx(Cbe,{size:12}),Re.type==="configure"&&h.jsx(Nq,{size:12}),Re.type==="question"&&h.jsx(dN,{size:12}),Re.type==="chat"&&h.jsx(Eq,{size:12}),h.jsx("span",{children:Re.label})]}),(Tg=Re.secondaryLabels)==null?void 0:Tg.map((N,G)=>{var oe,ve,Ae,Ie,He,gt,un,Et,_n,at,_t,yn;return h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium ${de?"bg-gradient-to-r from-blue-500/15 to-cyan-500/15 text-blue-300 border border-blue-500/25":"bg-gradient-to-r from-blue-50 to-cyan-50 text-blue-600 border border-blue-200"}`,children:[((oe=Re.secondaryTypes)==null?void 0:oe[G])==="research"&&h.jsx(VP,{size:12}),((ve=Re.secondaryTypes)==null?void 0:ve[G])==="analyze"&&h.jsx(YP,{size:12}),((Ae=Re.secondaryTypes)==null?void 0:Ae[G])==="compare"&&h.jsx(ZP,{size:12}),((Ie=Re.secondaryTypes)==null?void 0:Ie[G])==="plan"&&h.jsx(nL,{size:12}),((He=Re.secondaryTypes)==null?void 0:He[G])==="test"&&h.jsx(sL,{size:12}),((gt=Re.secondaryTypes)==null?void 0:gt[G])==="review"&&h.jsx(rL,{size:12}),((un=Re.secondaryTypes)==null?void 0:un[G])==="debug"&&h.jsx(GP,{size:12}),((Et=Re.secondaryTypes)==null?void 0:Et[G])==="question"&&h.jsx(dN,{size:12}),((_n=Re.secondaryTypes)==null?void 0:_n[G])==="ui_modify"&&h.jsx(cv,{size:12}),((at=Re.secondaryTypes)==null?void 0:at[G])==="ui_build"&&h.jsx(JP,{size:12}),((_t=Re.secondaryTypes)==null?void 0:_t[G])==="code_edit"&&h.jsx(Z_,{size:12}),((yn=Re.secondaryTypes)==null?void 0:yn[G])==="code_create"&&h.jsx(pN,{size:12}),h.jsx("span",{children:N})]},G)})]}),(mt.length>0||oc.length>0)&&h.jsxs("div",{className:"px-3 pt-2 flex flex-wrap gap-2",children:[mt.map((N,G)=>h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs ${de?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[h.jsx(zy,{size:12}),h.jsx("span",{className:"font-mono max-w-[200px] truncate",title:N.path,children:Vm(N)}),h.jsx("button",{onClick:()=>Xr(oe=>oe.filter((ve,Ae)=>Ae!==G)),className:"hover:opacity-70",children:h.jsx(qr,{size:12})})]},`file-${G}`)),oc.map(N=>h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs ${N.type==="exclude"?de?"bg-red-500/20 text-red-300 border border-red-500/30":"bg-red-50 text-red-700 border border-red-200":de?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[h.jsx("span",{className:"font-medium uppercase",children:N.name}),h.jsx("button",{onClick:()=>jc(G=>G.filter(oe=>!(oe.name===N.name&&oe.type===N.type))),className:"hover:opacity-70",children:h.jsx(qr,{size:12})})]},`chip-${N.name}-${N.type}`))]}),Jr.length>0&&h.jsxs("div",{className:"px-3 pt-2 flex flex-wrap gap-2",children:[Jr.map((N,G)=>h.jsxs("div",{className:`relative group rounded-lg overflow-hidden border ${de?"border-neutral-500":"border-stone-300"}`,children:[h.jsx("img",{src:N,alt:`Attachment ${G+1}`,className:"h-16 w-16 object-cover"}),h.jsx("button",{onClick:()=>mo(G),className:"absolute top-0.5 right-0.5 p-0.5 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70",children:h.jsx(qr,{size:12})})]},G)),Jr.length<5&&h.jsxs("div",{className:`text-xs self-center ${de?"text-neutral-400":"text-stone-400"}`,children:[5-Jr.length," more"]})]}),Bs&&h.jsxs("div",{className:"px-3 pt-3",children:[h.jsxs("div",{className:`text-xs font-mono mb-1 ${de?"text-neutral-400":"text-stone-500"}`,children:[Bs.fileName," (",Bs.startLine,"-",Bs.endLine,")"]}),h.jsx("div",{onMouseMove:hE,onMouseLeave:()=>Ss.hideHover(),children:h.jsx(oI,{code:Bs.code,language:"tsx",showLineNumbers:!0,isDarkMode:de,children:h.jsx(aHe,{})})})]}),h.jsx(fot,{data:Ss.uiState.hoverTooltip.data,position:Ss.uiState.hoverTooltip.position,isVisible:Ss.uiState.hoverTooltip.isVisible,onDismiss:()=>Ss.hideHover()}),h.jsx(got,{items:Ss.uiState.autocomplete.items,position:Ss.uiState.autocomplete.position,isVisible:Ss.uiState.autocomplete.isVisible,filterText:Ss.uiState.autocomplete.filterText,onSelect:N=>Ss.selectCompletion(N),onDismiss:()=>Ss.hideAutocomplete()}),h.jsxs("div",{className:"relative",children:[h.jsx("textarea",{ref:pt,value:Fe,onChange:N=>Uu(N.target.value),style:{overflowY:"auto"},onKeyDown:N=>{if(ft&&Ch.length>0){const G=Math.min(Ch.length-1,5);if(N.key==="ArrowDown")N.preventDefault(),Es(oe=>Math.min(oe+1,G));else if(N.key==="ArrowUp")N.preventDefault(),Es(oe=>Math.max(oe-1,0));else if(N.key==="Tab"||N.key==="Enter"){N.preventDefault();const oe=Ch[zr];oe&&(oe.isDirectory?Th(oe.path):ay(oe.path))}else N.key==="Backspace"&&hs.length>0&&Ps===""?(N.preventDefault(),wp()):N.key==="Escape"&&(Nt(!1),rr(""),Zs([]),Wo(""),cc(u.projectPath||void 0),Oe(""));return}if(Yi&&Jd.length>0){const G=Math.min(Jd.length-1,5);if(N.key==="ArrowDown")N.preventDefault(),Es(oe=>Math.min(oe+1,G));else if(N.key==="ArrowUp")N.preventDefault(),Es(oe=>Math.max(oe-1,0));else if(N.key==="Tab"||N.key==="Enter"){N.preventDefault();const oe=Jd[zr];oe&&zu(oe.name)}else N.key==="Escape"&&(_l(!1),lh(""),Oe(""));return}N.key==="Enter"&&(N.metaKey||N.ctrlKey)&&(N.preventDefault(),Xd(Fe),Xr([])),N.key==="Escape"&&(Nt(!1),_l(!1))},placeholder:"Plan, @ for context, / for commands","data-control-id":"chat-input","data-control-type":"input",className:`w-full bg-transparent px-4 py-3 text-sm resize-none focus:outline-none min-h-[56px] ${de?"text-neutral-100 placeholder-neutral-400":""}`,rows:2}),ft&&Tn&&h.jsxs("div",{className:`absolute bottom-full left-0 mb-2 w-80 rounded-xl shadow-xl py-1 z-[100] max-h-[264px] overflow-y-auto ${de?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:[hs.length>0&&h.jsxs("button",{onClick:wp,className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 border-b ${de?"hover:bg-neutral-600 text-neutral-300 border-neutral-600":"hover:bg-stone-50 text-stone-600 border-stone-100"}`,children:[h.jsx(w1,{size:14}),h.jsx("span",{children:".."}),h.jsx("span",{className:`text-xs truncate ${de?"text-neutral-500":"text-stone-400"}`,children:kr.split("/").pop()})]}),Ch.length===0?h.jsx("div",{className:`px-3 py-2 text-sm ${de?"text-neutral-400":"text-stone-400"}`,children:pn.length===0?"Loading...":"No matching files"}):Ch.slice(0,6).map((N,G)=>h.jsxs("button",{onClick:()=>{N.isDirectory?Th(N.path):ay(N.path)},className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${G===zr?de?"bg-neutral-600":"bg-stone-100":""} ${de?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[N.isDirectory?h.jsx(E1,{size:14,className:de?"text-yellow-400":"text-yellow-600"}):h.jsx(ix,{size:14,className:de?"text-neutral-400":"text-stone-400"}),h.jsx("span",{className:`truncate ${N.isDirectory?"font-medium":""}`,children:N.name}),N.isDirectory&&h.jsx(Af,{size:12,className:de?"text-neutral-500 ml-auto":"text-stone-400 ml-auto"})]},N.path))]}),Yi&&h.jsx("div",{className:`absolute bottom-full left-0 mb-2 w-64 rounded-xl shadow-xl py-1 z-[100] max-h-[264px] overflow-y-auto ${de?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:Jd.length===0?h.jsx("div",{className:`px-3 py-2 text-sm ${de?"text-neutral-400":"text-stone-400"}`,children:Ru.length===0?"Loading...":"No matching commands"}):Jd.slice(0,6).map((N,G)=>h.jsxs("button",{onClick:()=>zu(N.name),className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${G===zr?de?"bg-neutral-600":"bg-stone-100":""} ${de?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[h.jsx(ud,{size:14}),"/",N.name]},N.name))}),ch&&h.jsx("div",{className:`absolute bottom-full left-0 mb-2 w-64 rounded-xl shadow-xl py-1 z-[100] max-h-[264px] overflow-y-auto ${de?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:bg.length===0?h.jsx("div",{className:`px-3 py-2 text-sm ${de?"text-neutral-400":"text-stone-400"}`,children:Js.length===0?"No recent chips":"No matching chips"}):bg.slice(0,6).map((N,G)=>h.jsxs("button",{onClick:()=>ju({...N,type:Wr}),className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${G===zr?de?"bg-neutral-600":"bg-stone-100":""} ${de?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50"}`,children:[h.jsx("span",{className:`inline-flex items-center justify-center w-4 h-4 rounded text-[10px] font-bold ${Wr==="exclude"?de?"bg-red-500/30 text-red-300":"bg-red-100 text-red-600":de?"bg-blue-500/30 text-blue-300":"bg-blue-100 text-blue-600"}`,children:Wr==="exclude"?"-":"+"}),h.jsx("span",{className:"uppercase font-medium",children:N.name})]},`${N.type}-${N.name}`))})]}),h.jsxs("div",{className:`flex items-center justify-between px-2 py-1.5 border-t ${de?"border-neutral-600":"border-stone-100"}`,children:[h.jsxs("div",{className:"flex items-center gap-0.5",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>!wt&&Zn(!Ao),className:`flex items-center gap-1.5 px-2 py-1 text-sm rounded-full border transition ${wt?de?"border-blue-500/50 bg-blue-500/10 text-blue-300 cursor-not-allowed":"border-blue-300 bg-blue-50 text-blue-600 cursor-not-allowed":de?"border-neutral-600 hover:bg-neutral-600 text-neutral-200 bg-neutral-700":"border-stone-200 hover:bg-stone-50 text-stone-700 bg-white"}`,title:wt?"Model locked while inspector is active":Vt.name,children:[h.jsx(Vt.Icon,{size:14,className:"flex-shrink-0"}),h.jsx("span",{className:"truncate max-w-[100px]",children:CV(Vt.name)}),wt?h.jsx(r2,{size:10,className:de?"text-blue-400":"text-blue-500"}):h.jsx(Lf,{size:10,className:de?"text-neutral-400":"text-stone-400"})]}),Ao&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-[99]",onClick:()=>Zn(!1)}),h.jsx("div",{className:`absolute bottom-full left-0 mb-2 w-56 rounded-xl shadow-xl py-1 z-[100] max-h-80 overflow-y-auto ${de?"bg-neutral-700 border border-neutral-600":"bg-white border border-stone-200"}`,children:Bd.filter(N=>N.isEnabled).map(N=>h.jsxs("button",{onClick:()=>{N.isAvailable&&(Ur({id:N.id,name:N.name,Icon:N.Icon}),Zn(!1))},className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 ${N.isAvailable?de?"hover:bg-neutral-600 text-neutral-200":"hover:bg-stone-50":"opacity-40 cursor-not-allowed"}`,disabled:!N.isAvailable,title:N.isProviderConfigured?N.name:"Configure provider API key in Settings",children:[h.jsx(N.Icon,{size:14,className:N.isAvailable?de?"text-neutral-400":"text-stone-500":"text-stone-300"}),h.jsx("span",{className:`flex-1 ${Vt.id===N.id?"font-medium":""}`,children:CV(N.name)}),Vt.id===N.id&&h.jsx(Co,{size:12,className:"text-blue-600"})]},N.id))})]})]}),h.jsxs("div",{className:"relative","data-thinking-popover":!0,children:[h.jsx("button",{onClick:()=>!wt&&$t(!Sl),className:`p-2 rounded-lg transition-colors ${wt?de?"text-neutral-600 cursor-not-allowed":"text-stone-300 cursor-not-allowed":yi!=="off"?de?"bg-violet-500/20 text-violet-300 hover:bg-violet-500/30":"bg-violet-50 text-violet-700 hover:bg-violet-100":de?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:wt?"Thinking disabled while inspector is active":`Thinking: ${yi}`,children:h.jsx(f1,{size:18})}),Sl&&!wt&&h.jsxs("div",{className:`absolute bottom-full right-0 mb-2 p-2 rounded-lg shadow-lg border min-w-[200px] z-50 ${de?"bg-neutral-800 border-neutral-700":"bg-white border-stone-200"}`,children:[h.jsx("div",{className:`text-xs font-medium mb-2 px-2 ${de?"text-neutral-400":"text-stone-500"}`,children:"Extended Thinking"}),h.jsxs("div",{className:`text-xs px-2 py-1.5 mb-2 rounded ${de?"bg-neutral-700/50 text-neutral-400":"bg-stone-50 text-stone-500"}`,children:[h.jsx("span",{className:"font-medium",children:Vt.name}),Vt.id.includes("claude")||Vt.id.includes("opus")||Vt.id.includes("sonnet")||Vt.id.includes("haiku")?h.jsx("span",{className:"ml-1 text-emerald-500",children:"(native)"}):h.jsx("span",{className:"ml-1 text-amber-500",children:"(prompted)"})]}),["off","low","med","high","ultrathink"].map(N=>h.jsxs("button",{onClick:()=>{Du(N),$t(!1)},className:`w-full flex items-center gap-2 px-2 py-1.5 rounded text-sm transition ${yi===N?de?"bg-violet-500/20 text-violet-300":"bg-violet-50 text-violet-700":de?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-50 text-stone-700"}`,children:[N==="off"&&h.jsx(qr,{size:14}),N==="low"&&h.jsx(K_,{size:14}),N==="med"&&h.jsx(f1,{size:14}),N==="high"&&h.jsx(a1e,{size:14}),N==="ultrathink"&&h.jsx(tbe,{size:14}),h.jsx("span",{className:"capitalize",children:N==="ultrathink"?"Ultra":N}),yi===N&&h.jsx(Co,{size:14,className:"ml-auto"})]},N))]})]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>{sn(!wt),Ue(!1),Jt(!1)},className:`p-2 rounded-lg transition-colors ${wt?"bg-blue-100 text-blue-600":de?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Select Element",children:h.jsx(r2,{size:18})}),h.jsx("button",{onClick:()=>{Jt(!ht),sn(!1)},className:`p-2 rounded-lg transition-colors ${ht?"bg-orange-100 text-orange-600":de?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Move & Resize Element",children:h.jsx(o2,{size:18})}),h.jsx("button",{onClick:()=>ws(!Go),className:`p-2 rounded-lg transition-colors ${Go?"bg-yellow-100 text-yellow-600":de?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Attach Console Logs",children:h.jsx(ud,{size:18})}),h.jsx("input",{type:"file",ref:rt,className:"hidden",accept:"image/*",multiple:!0,onChange:Ts}),Je&&h.jsx("button",{onClick:()=>_e(!0),className:"relative w-8 h-8 rounded-lg overflow-hidden border-2 border-purple-500 hover:border-purple-600 transition-colors",title:"View captured screenshot",children:h.jsx("img",{src:Je,alt:"Screenshot preview",className:"w-full h-full object-cover"})}),h.jsx("button",{onClick:()=>{Ue(!ye),sn(!1)},className:`p-2 rounded-lg transition-colors ${ye?"bg-purple-100 text-purple-600":de?"hover:bg-neutral-600 text-neutral-400":"hover:bg-stone-100 text-stone-400"}`,title:"Screenshot Element",children:h.jsx(WP,{size:18})}),gh==="streaming"&&h.jsx("button",{onClick:()=>{iE(),Il(!1),zd("idle"),_s(null),setStreamingContent("")},className:`p-1.5 rounded-lg transition-colors ${de?"bg-red-600 text-white hover:bg-red-500":"bg-red-500 text-white hover:bg-red-600"}`,title:"Stop generating",children:h.jsx(Cq,{size:12,fill:"currentColor"})}),gh==="idle"&&h.jsx("div",{className:`p-1.5 rounded-lg ${de?"bg-emerald-600/20 text-emerald-400":"bg-emerald-100 text-emerald-600"}`,title:"Connected (idle)",children:h.jsx(Co,{size:12})}),h.jsx("button",{onClick:()=>Xd(Fe),disabled:!Fe.trim(),"data-control-id":"send-button","data-control-type":"button",className:`p-1.5 rounded-lg transition-colors ml-1 disabled:opacity-30 disabled:cursor-not-allowed ${de?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-800"}`,title:gh==="streaming"?"Queue message":"Send message",children:h.jsx(T5,{size:14})})]})]})]})})]}),lE&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>bh(!1)}),h.jsxs("div",{className:`fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 w-96 rounded-xl shadow-2xl p-5 ${de?"bg-neutral-800 border border-neutral-700":"bg-white border border-stone-200"}`,children:[h.jsx("h3",{className:`text-lg font-semibold mb-3 ${de?"text-neutral-100":"text-stone-900"}`,children:"Stash Changes"}),h.jsx("p",{className:`text-sm mb-4 ${de?"text-neutral-400":"text-stone-500"}`,children:'This will temporarily save your uncommitted changes. You can restore them later with "stash pop".'}),h.jsx("input",{type:"text",value:cp,onChange:N=>og(N.target.value),placeholder:"Optional stash message...",className:`w-full text-sm px-3 py-2 rounded-lg border mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${de?"bg-neutral-700 border-neutral-600 text-neutral-100 placeholder-neutral-400":"bg-stone-50 border-stone-200"}`,autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&dg(cp),N.key==="Escape"&&(bh(!1),og(""))}}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx("button",{onClick:()=>{bh(!1),og("")},className:`px-4 py-2 text-sm rounded-lg transition ${de?"hover:bg-neutral-700 text-neutral-300":"hover:bg-stone-100 text-stone-600"}`,children:"Cancel"}),h.jsx("button",{onClick:()=>dg(cp),className:`px-4 py-2 text-sm rounded-lg font-medium transition ${de?"bg-blue-600 text-white hover:bg-blue-500":"bg-stone-900 text-white hover:bg-stone-800"}`,children:"Stash Changes"})]})]})]}),po&&po.elements&&po.elements.length>0&&h.jsx("div",{className:`absolute top-20 left-1/2 transform -translate-x-1/2 rounded-lg shadow-2xl px-4 py-3 z-50 max-w-3xl ${de?"bg-neutral-800 border border-neutral-700":"bg-white border border-neutral-200"}`,children:po.count===1?h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${de?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:h.jsx(Co,{size:16})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsxs("div",{className:`text-sm leading-relaxed ${de?"text-neutral-200":"text-neutral-800"}`,children:["Found ",h.jsx("code",{className:`px-1.5 py-0.5 rounded font-mono text-xs ${de?"bg-neutral-700 text-blue-400":"bg-blue-50 text-blue-700"}`,children:po.elements[0].tagName}),po.elements[0].text&&h.jsxs("span",{className:"ml-1",children:['"',po.elements[0].text.substring(0,40),po.elements[0].text.length>40?"...":"",'"']}),h.jsx("span",{className:`ml-1 ${de?"text-neutral-400":"text-neutral-500"}`,children:"- Is this correct?"})]})}),h.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[h.jsx("button",{onClick:()=>bp(!1),className:`px-4 py-2 text-sm rounded-lg font-medium transition ${de?"bg-neutral-700 hover:bg-neutral-600 text-neutral-200":"bg-neutral-100 hover:bg-neutral-200 text-neutral-700"}`,children:"No"}),h.jsx("button",{onClick:()=>bp(!0,1),className:`px-4 py-2 text-sm rounded-lg font-medium transition ${de?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:"Yes"})]})]}):h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${de?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:h.jsx(Co,{size:16})}),h.jsxs("div",{className:`text-sm font-medium ${de?"text-neutral-200":"text-neutral-800"}`,children:["Found ",po.count," elements - which one?"]}),h.jsx("button",{onClick:()=>bp(!1),className:`ml-auto px-3 py-1.5 text-sm rounded-lg font-medium transition ${de?"bg-neutral-700 hover:bg-neutral-600 text-neutral-200":"bg-neutral-100 hover:bg-neutral-200 text-neutral-700"}`,children:"Cancel"})]}),h.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-60 overflow-y-auto",children:po.elements.map((N,G)=>h.jsxs("button",{onClick:()=>bp(!0,G+1),className:`flex items-center gap-3 p-2 rounded-lg text-left transition ${de?"hover:bg-neutral-700":"hover:bg-neutral-50"}`,children:[h.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold ${de?"bg-blue-500 text-white":"bg-blue-600 text-white"}`,children:G+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("code",{className:`text-xs font-mono ${de?"text-blue-400":"text-blue-700"}`,children:N.tagName}),N.text&&h.jsxs("span",{className:`ml-2 text-xs ${de?"text-neutral-400":"text-neutral-600"}`,children:['"',N.text.substring(0,50),N.text.length>50?"...":"",'"']})]})]},G))})]})}),((Sr==null?void 0:Sr.source)==="dom"||(Sr==null?void 0:Sr.source)==="code")&&h.jsxs("div",{className:`absolute bottom-24 left-1/2 transform -translate-x-1/2 flex items-center gap-2 rounded-full shadow-xl p-2 z-50 ${de?"bg-neutral-800 border border-neutral-700":"bg-white border border-neutral-200"}`,children:[h.jsxs("div",{className:"flex items-center gap-1.5 px-2 text-xs font-mono",children:[h.jsxs("span",{className:"text-green-500",children:["+",Sr.additions]}),h.jsxs("span",{className:"text-red-500",children:["-",Sr.deletions]})]}),h.jsx("div",{className:`w-[1px] h-6 ${de?"bg-neutral-600":"bg-neutral-200"}`}),h.jsx("button",{onMouseDown:()=>{const N=Xn.current.get(l);Sr.undoCode&&N&&(console.log("[Preview] Showing original"),N.executeJavaScript(Sr.undoCode),dp(!0))},onMouseUp:()=>{const N=Xn.current.get(l);Sr.code&&N&&(console.log("[Preview] Showing change"),N.executeJavaScript(Sr.code),dp(!1))},onMouseLeave:()=>{if(!up)return;const N=Xn.current.get(l);Sr.code&&N&&(console.log("[Preview] Showing change (mouse leave)"),N.executeJavaScript(Sr.code),dp(!1))},className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${de?"hover:bg-neutral-700 text-neutral-400":"hover:bg-neutral-100 text-neutral-600"}`,title:"Hold to see original",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),h.jsx("div",{className:`w-[1px] h-6 ${de?"bg-neutral-600":"bg-neutral-200"}`}),h.jsx("button",{onClick:Bn?jo:ha,className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${de?"hover:bg-red-900/20 text-neutral-400 hover:text-red-400":"hover:bg-red-50 text-neutral-600 hover:text-red-600"}`,title:"Reject (Esc)",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 6 6 18"}),h.jsx("path",{d:"m6 6 12 12"})]})}),h.jsx("button",{onClick:Bn?Ah:Pl,disabled:Vc,className:`w-10 h-10 rounded-full flex items-center justify-center shadow-md transition-colors disabled:opacity-50 ${Vc?"cursor-not-allowed":de?"bg-neutral-100 text-neutral-900 hover:bg-white":"bg-neutral-900 text-white hover:bg-neutral-800"}`,title:"Accept (+Enter)",children:Vc?h.jsx(ho,{size:20,className:"animate-spin"}):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M20 6 9 17l-5-5"})})})]}),Ve&&Je&&h.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:()=>_e(!1),children:h.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] p-4",children:[h.jsx("button",{onClick:()=>_e(!1),className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",title:"Close preview",children:h.jsx(qr,{size:24})}),h.jsx("img",{src:Je,alt:"Screenshot preview",className:"max-w-full max-h-[90vh] rounded-lg shadow-2xl",onClick:N=>N.stopPropagation()})]})}),h.jsx("video",{ref:ac,className:"hidden",autoPlay:!0,playsInline:!0,muted:!0}),h.jsx("canvas",{ref:Wc,className:"hidden"}),ug&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 bg-black/70 z-[100] backdrop-blur-md",onClick:vp}),h.jsx("div",{className:"fixed inset-0 z-[101] flex items-center justify-center pointer-events-none",children:Hd.map((N,G)=>{const oe=G===Hd.length-1,ve=(Hd.length-1-G)*350,Ae=(Ie,He)=>{var un;if(He)return h.jsx(E1,{size:18,className:"text-blue-400"});const gt=((un=Ie.split(".").pop())==null?void 0:un.toLowerCase())||"";return["png","jpg","jpeg","gif","svg","webp","ico"].includes(gt)?h.jsx(XP,{size:18,className:"text-purple-400"}):["ts","tsx"].includes(gt)?h.jsx(KP,{size:18,className:"text-blue-400"}):["js","jsx"].includes(gt)?h.jsx(KP,{size:18,className:"text-yellow-400"}):["css","scss","less"].includes(gt)?h.jsx(cv,{size:18,className:"text-pink-400"}):["json","yaml","yml","toml"].includes(gt)?h.jsx(J_,{size:18,className:"text-orange-400"}):["md","txt","mdx"].includes(gt)?h.jsx(dR,{size:18,className:"text-neutral-400"}):["html","htm"].includes(gt)?h.jsx($f,{size:18,className:"text-orange-400"}):h.jsx(ix,{size:18,className:"text-neutral-500"})};return h.jsxs("div",{className:`absolute pointer-events-auto transition-all duration-500 ease-out backdrop-blur-xl border rounded-xl shadow-2xl overflow-hidden ${de?"bg-neutral-900/80 border-white/10":"bg-white/80 border-black/10"}`,style:{width:N.type==="image"?"auto":"480px",maxWidth:"90vw",maxHeight:"60vh",transform:oe?"translateX(0) scale(1)":`translateX(-${ve}px) scale(0.95)`,opacity:oe?1:.4,zIndex:G},children:[h.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 border-b ${de?"border-white/10":"border-black/5"}`,children:[h.jsx("button",{onClick:Kd,className:`p-1 rounded transition ${de?"hover:bg-white/10 text-neutral-400":"hover:bg-black/5 text-neutral-500"}`,children:h.jsx(w1,{size:18})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("div",{className:`text-sm font-medium truncate ${de?"text-white":"text-neutral-900"}`,children:N.title})}),h.jsx("button",{onClick:vp,className:`p-1 rounded transition ${de?"hover:bg-white/10 text-neutral-400":"hover:bg-black/5 text-neutral-500"}`,children:h.jsx(qr,{size:18})})]}),h.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:"calc(60vh - 44px)"},children:[N.type==="directory"&&N.items&&h.jsx("div",{className:"py-1",children:N.items.length===0?h.jsx("div",{className:`text-center py-6 text-sm ${de?"text-neutral-500":"text-neutral-400"}`,children:"Empty folder"}):N.items.map((Ie,He)=>h.jsxs("button",{onClick:()=>sy(He+1),className:`w-full flex items-center gap-3 px-3 py-2 text-left transition ${de?"hover:bg-white/5":"hover:bg-black/5"}`,children:[h.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center text-xs font-bold flex-shrink-0 ${de?"bg-blue-500/20 text-blue-400":"bg-blue-500/10 text-blue-600"}`,children:He+1}),h.jsx("div",{className:"flex-shrink-0",children:Ae(Ie.name,Ie.isDirectory)}),h.jsx("div",{className:`flex-1 min-w-0 text-sm truncate ${de?"text-white":"text-neutral-900"}`,children:Ie.name}),Ie.isDirectory&&h.jsx(Af,{size:16,className:de?"text-neutral-600":"text-neutral-400"})]},Ie.path))}),N.type==="file"&&N.content&&h.jsx("pre",{className:`p-3 text-xs font-mono overflow-x-auto ${de?"text-neutral-300":"text-neutral-700"}`,children:N.content}),N.type==="image"&&h.jsx("div",{className:"p-3 flex items-center justify-center",children:h.jsx("img",{src:`file://${N.path}`,alt:N.title,className:"max-w-full max-h-[50vh] object-contain rounded"})})]})]},`${N.path}-${G}`)})}),h.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[102] pointer-events-none",children:h.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs backdrop-blur-xl ${de?"bg-white/10 text-white/60":"bg-black/10 text-black/60"}`,children:'"open 3" / "open App.tsx" / "open src folder" / "go back" / "close"'})})]}),h.jsx(qBe,{isOpen:c3,onClose:()=>Qw(!1),isDarkMode:de,onToggleDarkMode:$u,settings:Ls,onSettingsChange:f3,projectPath:u==null?void 0:u.projectPath}),Vb&&h.jsx(GBe,{isDarkMode:de,onAccept:()=>{var G;const N=u==null?void 0:u.projectPath;N&&((G=window.electronAPI)!=null&&G.mgrep)&&window.electronAPI.mgrep.initialize(N),sp(!1)},onDecline:()=>{sp(!1)},onClose:()=>{localStorage.setItem("mgrep-onboarding-seen","true"),sp(!1)}}),h.jsx(ist,{patch:Ou[Fd]||null,onApprove:x3,onReject:py,onEdit:my,projectPath:(u==null?void 0:u.projectPath)||"default",isOpen:eE,totalPatches:Ou.length,currentPatchIndex:Fd}),h.jsx(udt,{errors:g,isVisible:f,isDarkMode:Gm,onToggle:()=>m(!f),onRemoveError:v,onSearchForSolution:w,onClearAll:y}),g.length>0&&h.jsxs("button",{className:"fixed top-12 right-6 z-40 px-3 py-1.5 rounded-full text-xs font-semibold transition-all hover:scale-105",onClick:()=>m(!f),style:{backgroundColor:g.some(N=>N.isCritical)?"#ef4444":"#f59e0b",color:"white"},title:`${g.length} error${g.length!==1?"s":""} detected`,children:[g.length>0&&g.some(N=>N.solution)&&""," ",g.length]})]})]})}const Zw=x.createContext(null);function wdt({children:e}){const t=x.useRef(new Map),n=x.useRef(new Map),[,r]=x.useState({}),o=x.useCallback(g=>{t.current.set(g.id,g),r({})},[]),s=x.useCallback(g=>{t.current.delete(g),r({})},[]),i=x.useCallback(g=>t.current.get(g),[]),a=x.useCallback(()=>Array.from(t.current.values()),[]),l=x.useCallback((g,y={})=>{const v=t.current.get(g);if(!(v!=null&&v.ref.current))return;const w=v.ref.current,{color:_="#3b82f6",duration:T=3e3,pulse:k=!0,label:M,glow:D=!0}=y,I={outline:w.style.outline,boxShadow:w.style.boxShadow,position:w.style.position,zIndex:w.style.zIndex,transform:w.style.transform};w.style.outline=`2px solid ${_}`,w.style.boxShadow=D?`0 0 20px ${_}80, 0 0 40px ${_}40`:"none",w.style.position="relative",w.style.zIndex="10000",k&&w.animate([{transform:"scale(1)",boxShadow:`0 0 20px ${_}80`},{transform:"scale(1.02)",boxShadow:`0 0 30px ${_}`},{transform:"scale(1)",boxShadow:`0 0 20px ${_}80`}],{duration:600,iterations:Math.ceil(T/600),easing:"ease-in-out"});let P=null;M&&(P=document.createElement("div"),P.className="cluso-control-label",P.textContent=M,P.style.cssText=`
        position: absolute;
        top: -28px;
        left: 50%;
        transform: translateX(-50%);
        background: ${_};
        color: white;
        padding: 4px 10px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: 600;
        white-space: nowrap;
        z-index: 10001;
        pointer-events: none;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      `,w.style.position="relative",w.appendChild(P));const B=n.current.get(g);B&&clearTimeout(B);const U=setTimeout(()=>{w.style.outline=I.outline,w.style.boxShadow=I.boxShadow,w.style.position=I.position,w.style.zIndex=I.zIndex,w.style.transform=I.transform,P&&P.remove(),n.current.delete(g)},T);n.current.set(g,U)},[]),c=x.useCallback(g=>{const y=n.current.get(g);y&&(clearTimeout(y),n.current.delete(g));const v=t.current.get(g);if(v!=null&&v.ref.current){const w=v.ref.current;w.style.outline="",w.style.boxShadow="",w.style.zIndex="";const _=w.querySelector(".cluso-control-label");_&&_.remove()}},[]),u=x.useCallback(()=>{n.current.forEach((g,y)=>{clearTimeout(g),c(y)}),n.current.clear()},[c]),f=x.useCallback((g,y)=>{var T;const v=t.current.get(g);if(!(v!=null&&v.ref.current))return!1;const w=v.ref.current,_=y||((T=v.actions)==null?void 0:T[0])||"click";switch(_){case"click":w.click();break;case"focus":w.focus();break;case"blur":w.blur();break;default:w.dispatchEvent(new CustomEvent(`cluso:${_}`,{bubbles:!0}))}return!0},[]),m=x.useCallback((g,y)=>{const v=t.current.get(g);v&&(v.state={...v.state,...y},r({}))},[]);return h.jsx(Zw.Provider,{value:{elements:t.current,register:o,unregister:s,getElement:i,getAllElements:a,highlight:l,clearHighlight:c,clearAllHighlights:u,triggerAction:f,setElementState:m},children:e})}const Edt=x.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,children:o,...s},i)=>{const a=x.useRef(null),l=i||a,c=x.useContext(Zw);return x.useEffect(()=>{if(c&&l.current)return c.register({id:e,ref:l,type:"button",label:t,description:n,group:r,actions:["click","focus"]}),()=>c.unregister(e)},[c,e,t,n,r,l]),h.jsx("button",{ref:l,"data-control-id":e,"data-control-type":"button",...s,children:o})});Edt.displayName="ControllableButton";const _dt=x.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,...o},s)=>{const i=x.useRef(null),a=s||i,l=x.useContext(Zw);return x.useEffect(()=>{if(l&&a.current)return l.register({id:e,ref:a,type:"input",label:t,description:n,group:r,actions:["focus","clear","type"],state:{value:a.current.value}}),()=>l.unregister(e)},[l,e,t,n,r,a]),h.jsx("input",{ref:a,"data-control-id":e,"data-control-type":"input",...o})});_dt.displayName="ControllableInput";const Sdt=x.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,...o},s)=>{const i=x.useRef(null),a=s||i,l=x.useContext(Zw);return x.useEffect(()=>{if(l&&a.current)return l.register({id:e,ref:a,type:"checkbox",label:t,description:n,group:r,actions:["toggle","check","uncheck"],state:{checked:a.current.checked}}),()=>l.unregister(e)},[l,e,t,n,r,a]),h.jsx("input",{ref:a,type:"checkbox","data-control-id":e,"data-control-type":"checkbox",...o})});Sdt.displayName="ControllableCheckbox";const Tdt=x.forwardRef(({controlId:e,controlLabel:t,controlDescription:n,controlGroup:r,controlType:o="generic",controlActions:s=["click","focus"],as:i="div",children:a,...l},c)=>{const u=x.useRef(null),f=c||u,m=x.useContext(Zw);x.useEffect(()=>{if(m&&f.current)return m.register({id:e,ref:f,type:o,label:t,description:n,group:r,actions:s}),()=>m.unregister(e)},[m,e,t,n,r,o,s,f]);const g=i;return h.jsx(g,{ref:f,"data-control-id":e,"data-control-type":o,...l,children:a})});Tdt.displayName="Controllable";/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const Cdt="0.5.16",hle=`bippy-${Cdt}`,AV=Object.defineProperty,kdt=Object.prototype.hasOwnProperty,Cv=()=>{},ple=e=>{try{Function.prototype.toString.call(e).indexOf("^_^")>-1&&setTimeout(()=>{throw Error("React is running in production mode, but dead code elimination has not been applied. Read how to correctly configure React for production: https://reactjs.org/link/perf-use-production-build")})}catch{}},Adt=(e=Jw())=>"getFiberRoots"in e;let mle=!1,b_;const NV=(e=Jw())=>mle?!0:(typeof e.inject=="function"&&(b_=e.inject.toString()),!!(b_!=null&&b_.includes("(injected)"))),ZI=new Set,ow=new Set,Ndt=e=>{let t=new Map,n=0,r={_instrumentationIsActive:!1,_instrumentationSource:hle,checkDCE:ple,hasUnsupportedRendererAttached:!1,inject(o){let s=++n;return t.set(s,o),ow.add(o),r._instrumentationIsActive||(r._instrumentationIsActive=!0,ZI.forEach(i=>i())),s},on:Cv,onCommitFiberRoot:Cv,onCommitFiberUnmount:Cv,onPostCommitFiberRoot:Cv,renderers:t,supportsFiber:!0,supportsFlight:!0};try{AV(globalThis,"__REACT_DEVTOOLS_GLOBAL_HOOK__",{configurable:!0,enumerable:!0,get(){return r},set(i){if(i&&typeof i=="object"){let a=r.renderers;r=i,a.size>0&&(a.forEach((l,c)=>{ow.add(l),i.renderers.set(c,l)}),JI(e))}}});let o=window.hasOwnProperty,s=!1;AV(window,"hasOwnProperty",{configurable:!0,value:function(...i){try{if(!s&&i[0]==="__REACT_DEVTOOLS_GLOBAL_HOOK__")return globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__=void 0,s=!0,-0}catch{}return o.apply(this,i)},writable:!0})}catch{JI(e)}return r},JI=e=>{try{let t=globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t)return;if(!t._instrumentationSource){t.checkDCE=ple,t.supportsFiber=!0,t.supportsFlight=!0,t.hasUnsupportedRendererAttached=!1,t._instrumentationSource=hle,t._instrumentationIsActive=!1;let n=Adt(t);if(n||(t.on=Cv),t.renderers.size){t._instrumentationIsActive=!0,ZI.forEach(s=>s());return}let r=t.inject,o=NV(t);o&&!n&&(mle=!0,t.inject({scheduleRefresh(){}})&&(t._instrumentationIsActive=!0)),t.inject=s=>{let i=r(s);return ow.add(s),o&&t.renderers.set(i,s),t._instrumentationIsActive=!0,ZI.forEach(a=>a()),i}}(t.renderers.size||t._instrumentationIsActive||NV())&&(e==null||e())}catch{}},Idt=()=>kdt.call(globalThis,"__REACT_DEVTOOLS_GLOBAL_HOOK__"),Jw=e=>Idt()?(JI(e),globalThis.__REACT_DEVTOOLS_GLOBAL_HOOK__):Ndt(e),Rdt=()=>{var e,t;return!!(typeof window<"u"&&((e=window.document)!=null&&e.createElement||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))},Mdt=()=>{try{Rdt()&&Jw()}catch{}};/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Mdt();/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const gle=0,ble=1,yle=5,vle=11,Ddt=13,Odt=14,xle=15,Pdt=16,Ldt=19,wle=26,Ele=27,$dt=28,Fdt=30,Bdt=e=>{switch(e.tag){case yle:case wle:case Ele:return!0;default:return typeof e.type=="string"}},_le=e=>{switch(e.tag){case ble:case vle:case gle:case Odt:case xle:return!0;default:return!1}};function Sle(e,t,n=!1){if(!e)return null;let r=t(e);if(r instanceof Promise)return(async()=>{if(await r===!0)return e;let s=n?e.return:e.child;for(;s;){let i=await Cle(s,t,n);if(i)return i;s=n?null:s.sibling}return null})();if(r===!0)return e;let o=n?e.return:e.child;for(;o;){let s=Tle(o,t,n);if(s)return s;o=n?null:o.sibling}return null}const Tle=(e,t,n=!1)=>{if(!e)return null;if(t(e)===!0)return e;let r=n?e.return:e.child;for(;r;){let o=Tle(r,t,n);if(o)return o;r=n?null:r.sibling}return null},Cle=async(e,t,n=!1)=>{if(!e)return null;if(await t(e)===!0)return e;let r=n?e.return:e.child;for(;r;){let o=await Cle(r,t,n);if(o)return o;r=n?null:r.sibling}return null},kle=e=>{let t=e;return typeof t=="function"?t:typeof t=="object"&&t?kle(t.type||t.render):null},IV=e=>{let t=e;if(typeof t=="string")return t;if(typeof t!="function"&&!(typeof t=="object"&&t))return null;let n=t.displayName||t.name||null;if(n)return n;let r=kle(t);return r&&(r.displayName||r.name)||null},Ale=e=>{let t=e.alternate;if(!t)return e;if(t.actualStartTime&&e.actualStartTime)return t.actualStartTime>e.actualStartTime?t:e;for(let n of zdt){let r=Sle(n.current,o=>{if(o===e)return!0});if(r)return r}return e},h4=e=>{var n,r,o,s;let t=Jw();for(let i of t.renderers.values())try{let a=(n=i.findFiberByHostInstance)==null?void 0:n.call(i,e);if(a)return a}catch{}if(typeof e=="object"&&e){if("_reactRootContainer"in e)return(s=(o=(r=e._reactRootContainer)==null?void 0:r._internalRoot)==null?void 0:o.current)==null?void 0:s.child;for(let i in e)if(i.startsWith("__reactContainer$")||i.startsWith("__reactInternalInstance$")||i.startsWith("__reactFiber"))return e[i]||null}return null},zdt=new Set;/**
 * @license bippy
 *
 * Copyright (c) Aiden Bai
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jdt=Object.create,Nle=Object.defineProperty,Udt=Object.getOwnPropertyDescriptor,Hdt=Object.getOwnPropertyNames,Vdt=Object.getPrototypeOf,qdt=Object.prototype.hasOwnProperty,Gdt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Wdt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(var o=Hdt(t),s=0,i=o.length,a;s<i;s++)a=o[s],!qdt.call(e,a)&&a!==n&&Nle(e,a,{get:(l=>t[l]).bind(null,a),enumerable:!(r=Udt(t,a))||r.enumerable});return e},Ydt=(e,t,n)=>(n=e==null?{}:jdt(Vdt(e)),Wdt(Nle(n,"default",{value:e,enumerable:!0}),e));const Kdt=()=>{let e=Jw();for(let t of[...Array.from(ow),...Array.from(e.renderers.values())]){let n=t.currentDispatcherRef;if(n&&typeof n=="object")return"H"in n?n.H:n.current}return null},RV=e=>{for(let t of ow){let n=t.currentDispatcherRef;n&&typeof n=="object"&&("H"in n?n.H=e:n.current=e)}},wf=e=>`
    in ${e}`,Zdt=(e,t)=>{let n=wf(e);return t&&(n+=` (at ${t})`),n};let QA=!1;const eN=(e,t)=>{if(!e||QA)return"";let n=Error.prepareStackTrace;Error.prepareStackTrace=void 0,QA=!0;let r=Kdt();RV(null);let o=console.error,s=console.warn;console.error=()=>{},console.warn=()=>{};try{let l={DetermineComponentFrameRoot(){let m;try{if(t){let g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(y){m=y}Reflect.construct(e,[],g)}else{try{g.call()}catch(y){m=y}e.call(g.prototype)}}else{try{throw Error()}catch(y){m=y}let g=e();g&&typeof g.catch=="function"&&g.catch(()=>{})}}catch(g){if(g instanceof Error&&m instanceof Error&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";let c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c!=null&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});let[u,f]=l.DetermineComponentFrameRoot();if(u&&f){let m=u.split(`
`),g=f.split(`
`),y=0,v=0;for(;y<m.length&&!m[y].includes("DetermineComponentFrameRoot");)y++;for(;v<g.length&&!g[v].includes("DetermineComponentFrameRoot");)v++;if(y===m.length||v===g.length)for(y=m.length-1,v=g.length-1;y>=1&&v>=0&&m[y]!==g[v];)v--;for(;y>=1&&v>=0;y--,v--)if(m[y]!==g[v]){if(y!==1||v!==1)do if(y--,v--,v<0||m[y]!==g[v]){let w=`
${m[y].replace(" at new "," at ")}`,_=IV(e);return _&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",_)),w}while(y>=1&&v>=0);break}}}finally{QA=!1,Error.prepareStackTrace=n,RV(r),console.error=o,console.warn=s}let i=e?IV(e):"";return i?wf(i):""},Jdt=(e,t)=>{let n=e.tag,r="";switch(n){case $dt:r=wf("Activity");break;case ble:r=eN(e.type,!0);break;case vle:r=eN(e.type.render,!1);break;case gle:case xle:r=eN(e.type,!1);break;case yle:case wle:case Ele:r=wf(e.type);break;case Pdt:r=wf("Lazy");break;case Ddt:r=e.child!==t&&t!==null?wf("Suspense Fallback"):wf("Suspense");break;case Ldt:r=wf("SuspenseList");break;case Fdt:r=wf("ViewTransition");break;default:return""}return r},Xdt=e=>{try{let t="",n=e,r=null;do{t+=Jdt(n,r);let o=n._debugInfo;if(o&&Array.isArray(o))for(let s=o.length-1;s>=0;s--){let i=o[s];typeof i.name=="string"&&(t+=Zdt(i.name,i.env))}r=n,n=n.return}while(n);return t}catch(t){return t instanceof Error?`
Error generating stack: ${t.message}
${t.stack}`:""}},Qdt=e=>{let t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;let n=e;if(!n)return"";Error.prepareStackTrace=t,n.startsWith(`Error: react-stack-top-frame
`)&&(n=n.slice(29));let r=n.indexOf(`
`);if(r!==-1&&(n=n.slice(r+1)),r=Math.max(n.indexOf("react_stack_bottom_frame"),n.indexOf("react-stack-bottom-frame")),r!==-1&&(r=n.lastIndexOf(`
`,r)),r!==-1)n=n.slice(0,r);else return"";return n},eft=/(^|@)\S+:\d+/,Ile=/^\s*at .*(\S+:\d+|\(native\))/m,tft=/^(eval@)?(\[native code\])?$/,Rle=(e,t)=>{if((t==null?void 0:t.includeInElement)!==!1){let n=e.split(`
`),r=[];for(let o of n)if(/^\s*at\s+/.test(o)){let s=MV(o,void 0)[0];s&&r.push(s)}else if(/^\s*in\s+/.test(o)){let s=o.replace(/^\s*in\s+/,"").replace(/\s*\(at .*\)$/,"");r.push({function:s,raw:o})}else if(o.match(eft)){let s=DV(o,void 0)[0];s&&r.push(s)}return f9(r,t)}return e.match(Ile)?MV(e,t):DV(e,t)},Mle=e=>{if(!e.includes(":"))return[e,void 0,void 0];let t=/(.+?)(?::(\d+))?(?::(\d+))?$/,n=t.exec(e.replace(/[()]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},f9=(e,t)=>t&&t.slice!=null?Array.isArray(t.slice)?e.slice(t.slice[0],t.slice[1]):e.slice(0,t.slice):e,MV=(e,t)=>f9(e.split(`
`).filter(r=>!!r.match(Ile)),t).map(r=>{let o=r;o.includes("(eval ")&&(o=o.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));let s=o.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),i=s.match(/ (\(.+\)$)/);s=i?s.replace(i[0],""):s;let a=Mle(i?i[1]:s),l=i&&s||void 0,c=["eval","<anonymous>"].includes(a[0])?void 0:a[0];return{function:l,file:c,line:a[1]?+a[1]:void 0,col:a[2]?+a[2]:void 0,raw:o}}),DV=(e,t)=>f9(e.split(`
`).filter(r=>!r.match(tft)),t).map(r=>{let o=r;if(o.includes(" > eval")&&(o=o.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),!o.includes("@")&&!o.includes(":"))return{function:o};{let s=/(([^\n\r"\u2028\u2029]*".[^\n\r"\u2028\u2029]*"[^\n\r@\u2028\u2029]*(?:@[^\n\r"\u2028\u2029]*"[^\n\r@\u2028\u2029]*)*(?:[\n\r\u2028\u2029][^@]*)?)?[^@]*)@/,i=o.match(s),a=i&&i[1]?i[1]:void 0,l=Mle(o.replace(s,""));return{function:a,file:l[0],line:l[1]?+l[1]:void 0,col:l[2]?+l[2]:void 0,raw:o}}});var nft=Gdt((e,t)=>{(function(n,r){typeof e=="object"&&t!==void 0?r(e):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.sourcemapCodec={}))})(void 0,function(n){let r=44,o=59,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(64),a=new Uint8Array(128);for(let H=0;H<s.length;H++){let q=s.charCodeAt(H);i[H]=q,a[q]=H}function l(H,q){let z=0,Z=0,X=0;do{let ee=H.next();X=a[ee],z|=(X&31)<<Z,Z+=5}while(X&32);let J=z&1;return z>>>=1,J&&(z=-2147483648|-z),q+z}function c(H,q,z){let Z=q-z;Z=Z<0?-Z<<1|1:Z<<1;do{let X=Z&31;Z>>>=5,Z>0&&(X|=32),H.write(i[X])}while(Z>0);return q}function u(H,q){return H.pos>=q?!1:H.peek()!==r}let f=1024*16,m=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(H){return Buffer.from(H.buffer,H.byteOffset,H.byteLength).toString()}}:{decode(H){let q="";for(let z=0;z<H.length;z++)q+=String.fromCharCode(H[z]);return q}};class g{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(f)}write(q){let{buffer:z}=this;z[this.pos++]=q,this.pos===f&&(this.out+=m.decode(z),this.pos=0)}flush(){let{buffer:q,out:z,pos:Z}=this;return Z>0?z+m.decode(q.subarray(0,Z)):z}}class y{constructor(q){this.pos=0,this.buffer=q}next(){return this.buffer.charCodeAt(this.pos++)}peek(){return this.buffer.charCodeAt(this.pos)}indexOf(q){let{buffer:z,pos:Z}=this,X=z.indexOf(q,Z);return X===-1?z.length:X}}let v=[];function w(H){let{length:q}=H,z=new y(H),Z=[],X=[],J=0;for(;z.pos<q;z.pos++){J=l(z,J);let ee=l(z,0);if(!u(z,q)){let Q=X.pop();Q[2]=J,Q[3]=ee;continue}let re=l(z,0),ie=l(z,0),K=ie&1,te=K?[J,ee,0,0,re,l(z,0)]:[J,ee,0,0,re],se=v;if(u(z,q)){se=[];do{let Q=l(z,0);se.push(Q)}while(u(z,q))}te.vars=se,Z.push(te),X.push(te)}return Z}function _(H){let q=new g;for(let z=0;z<H.length;)z=T(H,z,q,[0]);return q.flush()}function T(H,q,z,Z){let X=H[q],{0:J,1:ee,2:re,3:ie,4:K,vars:te}=X;q>0&&z.write(r),Z[0]=c(z,J,Z[0]),c(z,ee,0),c(z,K,0);let se=X.length===6?1:0;c(z,se,0),X.length===6&&c(z,X[5],0);for(let Q of te)c(z,Q,0);for(q++;q<H.length;){let Q=H[q],{0:Te,1:ge}=Q;if(Te>re||Te===re&&ge>=ie)break;q=T(H,q,z,Z)}return z.write(r),Z[0]=c(z,re,Z[0]),c(z,ie,0),q}function k(H){let{length:q}=H,z=new y(H),Z=[],X=[],J=0,ee=0,re=0,ie=0,K=0,te=0,se=0,Q=0;do{let Te=z.indexOf(";"),ge=0;for(;z.pos<Te;z.pos++){if(ge=l(z,ge),!u(z,Te)){let et=X.pop();et[2]=J,et[3]=ge;continue}let Ce=l(z,0),he=Ce&1,Fe=Ce&2,Oe=Ce&4,Re=null,nt=v,ue;if(he){let et=l(z,ee);re=l(z,ee===et?re:0),ee=et,ue=[J,ge,0,0,et,re]}else ue=[J,ge,0,0];if(ue.isScope=!!Oe,Fe){let et=ie,ut=K;ie=l(z,ie);let Yt=et===ie;K=l(z,Yt?K:0),te=l(z,Yt&&ut===K?te:0),Re=[ie,K,te]}if(ue.callsite=Re,u(z,Te)){nt=[];do{se=J,Q=ge;let et=l(z,0),ut;if(et<-1){ut=[[l(z,0)]];for(let Yt=-1;Yt>et;Yt--){let Ht=se;se=l(z,se),Q=l(z,se===Ht?Q:0);let Pt=l(z,0);ut.push([Pt,se,Q])}}else ut=[[et]];nt.push(ut)}while(u(z,Te))}ue.bindings=nt,Z.push(ue),X.push(ue)}J++,z.pos=Te+1}while(z.pos<q);return Z}function M(H){if(H.length===0)return"";let q=new g;for(let z=0;z<H.length;)z=D(H,z,q,[0,0,0,0,0,0,0]);return q.flush()}function D(H,q,z,Z){let X=H[q],{0:J,1:ee,2:re,3:ie,isScope:K,callsite:te,bindings:se}=X;Z[0]<J?(I(z,Z[0],J),Z[0]=J,Z[1]=0):q>0&&z.write(r),Z[1]=c(z,X[1],Z[1]);let Q=(X.length===6?1:0)|(te?2:0)|(K?4:0);if(c(z,Q,0),X.length===6){let{4:Te,5:ge}=X;Te!==Z[2]&&(Z[3]=0),Z[2]=c(z,Te,Z[2]),Z[3]=c(z,ge,Z[3])}if(te){let{0:Te,1:ge,2:Ce}=X.callsite;Te===Z[4]?ge!==Z[5]&&(Z[6]=0):(Z[5]=0,Z[6]=0),Z[4]=c(z,Te,Z[4]),Z[5]=c(z,ge,Z[5]),Z[6]=c(z,Ce,Z[6])}if(se)for(let Te of se){Te.length>1&&c(z,-Te.length,0);let ge=Te[0][0];c(z,ge,0);let Ce=J,he=ee;for(let Fe=1;Fe<Te.length;Fe++){let Oe=Te[Fe];Ce=c(z,Oe[1],Ce),he=c(z,Oe[2],he),c(z,Oe[0],0)}}for(q++;q<H.length;){let Te=H[q],{0:ge,1:Ce}=Te;if(ge>re||ge===re&&Ce>=ie)break;q=D(H,q,z,Z)}return Z[0]<re?(I(z,Z[0],re),Z[0]=re,Z[1]=0):z.write(r),Z[1]=c(z,ie,Z[1]),q}function I(H,q,z){do H.write(o);while(++q<z)}function P(H){let{length:q}=H,z=new y(H),Z=[],X=0,J=0,ee=0,re=0,ie=0;do{let K=z.indexOf(";"),te=[],se=!0,Q=0;for(X=0;z.pos<K;){let Te;X=l(z,X),X<Q&&(se=!1),Q=X,u(z,K)?(J=l(z,J),ee=l(z,ee),re=l(z,re),u(z,K)?(ie=l(z,ie),Te=[X,J,ee,re,ie]):Te=[X,J,ee,re]):Te=[X],te.push(Te),z.pos++}se||B(te),Z.push(te),z.pos=K+1}while(z.pos<=q);return Z}function B(H){H.sort(U)}function U(H,q){return H[0]-q[0]}function j(H){let q=new g,z=0,Z=0,X=0,J=0;for(let ee=0;ee<H.length;ee++){let re=H[ee];if(ee>0&&q.write(o),re.length===0)continue;let ie=0;for(let K=0;K<re.length;K++){let te=re[K];K>0&&q.write(r),ie=c(q,te[0],ie),te.length!==1&&(z=c(q,te[1],z),Z=c(q,te[2],Z),X=c(q,te[3],X),te.length!==4&&(J=c(q,te[4],J)))}}return q.flush()}n.decode=P,n.decodeGeneratedRanges=k,n.decodeOriginalScopes=w,n.encode=j,n.encodeGeneratedRanges=M,n.encodeOriginalScopes=_,Object.defineProperty(n,"__esModule",{value:!0})})}),Dle=Ydt(nft());const Ole=/^[a-zA-Z][a-zA-Z\d+\-.]*:/,rft=/^data:application\/json[^,]+base64,/,oft=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)|(?:\/\*[@#][ \t]+sourceMappingURL=([^*]+?)[ \t]*(?:\*\/)[ \t]*$)/,Ple=typeof WeakRef<"u",lv=new Map,y_=new Map,sft=e=>Ple&&e instanceof WeakRef,OV=(e,t,n,r)=>{if(n<0||n>=e.length)return null;let o=e[n];if(!o||o.length===0)return null;let s=null;for(let u of o)if(u[0]<=r)s=u;else break;if(!s||s.length<4)return null;let[,i,a,l]=s;if(i===void 0||a===void 0||l===void 0)return null;let c=t[i];return c?{columnNumber:l,fileName:c,lineNumber:a+1}:null},ift=(e,t,n)=>{if(e.sections){let r=null;for(let i of e.sections)if(t>i.offset.line||t===i.offset.line&&n>=i.offset.column)r=i;else break;if(!r)return null;let o=t-r.offset.line,s=t===r.offset.line?n-r.offset.column:n;return OV(r.map.mappings,r.map.sources,o,s)}return OV(e.mappings,e.sources,t-1,n)},aft=(e,t)=>{let n=t.split(`
`),r;for(let s=n.length-1;s>=0&&!r;s--){let i=n[s].match(oft);i&&(r=i[1]||i[2])}if(!r)return null;let o=Ole.test(r);if(!(rft.test(r)||o||r.startsWith("/"))){let s=e.split("/");s[s.length-1]=r,r=s.join("/")}return r},lft=e=>({file:e.file,mappings:(0,Dle.decode)(e.mappings),names:e.names,sourceRoot:e.sourceRoot,sources:e.sources,sourcesContent:e.sourcesContent,version:3}),cft=e=>{let t=e.sections.map(({map:r,offset:o})=>({map:{...r,mappings:(0,Dle.decode)(r.mappings)},offset:o})),n=new Set;for(let r of t)for(let o of r.map.sources)n.add(o);return{file:e.file,mappings:[],names:[],sections:t,sourceRoot:void 0,sources:Array.from(n),sourcesContent:void 0,version:3}},PV=e=>{if(!e)return!1;let t=e.trim();if(!t)return!1;let n=t.match(Ole);if(!n)return!0;let r=n[0].toLowerCase();return r==="http:"||r==="https:"},uft=async(e,t=fetch)=>{if(!PV(e))return null;let n;try{n=await(await t(e)).text()}catch{return null}if(!n)return null;let r=aft(e,n);if(!r||!PV(r))return null;try{let o=await t(r),s=await o.json();return"sections"in s?cft(s):lft(s)}catch{return null}},dft=async(e,t=!0,n)=>{if(t&&lv.has(e)){let s=lv.get(e);if(s==null)return null;if(sft(s)){let i=s.deref();if(i)return i;lv.delete(e)}else return s}if(t&&y_.has(e))return y_.get(e);let r=uft(e,n);t&&y_.set(e,r);let o=await r;return t&&y_.delete(e),t&&(o===null?lv.set(e,null):lv.set(e,Ple?new WeakRef(o):o)),o},LV=/^[a-zA-Z][a-zA-Z\d+\-.]*:/,fft=["rsc://","file:///","webpack://","node:","turbopack://","metro://"],$V="about://React/",hft=["<anonymous>","eval",""],pft=/\.(jsx|tsx|ts|js)$/,mft=/(\.min|bundle|chunk|vendor|vendors|runtime|polyfill|polyfills)\.(js|mjs|cjs)$|(chunk|bundle|vendor|vendors|runtime|polyfill|polyfills|framework|app|main|index)[-_.][A-Za-z0-9_-]{4,}\.(js|mjs|cjs)$|[\da-f]{8,}\.(js|mjs|cjs)$|[-_.][\da-f]{20,}\.(js|mjs|cjs)$|\/dist\/|\/build\/|\/.next\/|\/out\/|\/node_modules\/|\.webpack\.|\.vite\.|\.turbopack\./i,gft=/^\?[\w~.\-]+(?:=[^&#]*)?(?:&[\w~.\-]+(?:=[^&#]*)?)*$/,bft=e=>{var t;return e._debugStack instanceof Error&&typeof((t=e._debugStack)==null?void 0:t.stack)=="string"},yft=e=>{let t=e._debugSource;return t?typeof t=="object"&&!!t&&"fileName"in t&&typeof t.fileName=="string"&&"lineNumber"in t&&typeof t.lineNumber=="number":!1},vft=async(e,t=!0,n)=>{if(yft(e))return e._debugSource||null;let r=Lle(e),o=await $le(r,1,t,n);return!o||o.length===0?null:o[0]},Lle=e=>bft(e)?Qdt(e._debugStack.stack):Xdt(e),xft=async(e,t=!0,n)=>{let r=await $le(e,1,t,n);return!r||r.length===0?null:r[0]},$le=async(e,t=1,n=!0,r)=>{let o=Rle(e,{slice:t??1}),s=[];for(let i of o){if(!(i!=null&&i.file))continue;let a=await dft(i.file,n,r);if(a&&typeof i.line=="number"&&typeof i.col=="number"){let l=ift(a,i.line,i.col);if(l){s.push(l);continue}}s.push({fileName:i.file,lineNumber:i.line,columnNumber:i.col,functionName:i.function})}return s},V_=e=>{if(!e||hft.includes(e))return"";let t=e;if(t.startsWith($V)){let r=t.slice($V.length),o=r.indexOf("/"),s=r.indexOf(":");t=o!==-1&&(s===-1||o<s)?r.slice(o+1):r}for(let r of fft)if(t.startsWith(r)){t=t.slice(r.length),r==="file:///"&&(t=`/${t.replace(/^\/+/,"")}`);break}if(LV.test(t)){let r=t.match(LV);r&&(t=t.slice(r[0].length))}let n=t.indexOf("?");if(n!==-1){let r=t.slice(n);gft.test(r)&&(t=t.slice(0,n))}return t},wft=e=>{let t=V_(e);return!(!t||!pft.test(t)||mft.test(t))},Eft=async(e,t=!0,n)=>{let r=Sle(e,i=>{if(_le(i))return!0},!0);if(r){let i=await vft(r,t,n);if(i!=null&&i.fileName){let a=V_(i.fileName);if(wft(a))return{fileName:a,lineNumber:i.lineNumber,columnNumber:i.columnNumber,functionName:i.functionName}}}let o=Rle(Lle(e),{includeInElement:!1}),s=null;for(;o.length;){let i=o.pop();if(!i||!i.raw||!i.file)continue;let a=await xft(i.raw,t,n);if(a)return{fileName:V_(a.fileName),lineNumber:a.lineNumber,columnNumber:a.columnNumber,functionName:a.functionName};s={fileName:V_(i.file),lineNumber:i.line,columnNumber:i.col,functionName:i.function}}return s},Fle=async(e,t=!0,n)=>{let r=h4(e);if(!r||!Bdt(r))return null;let o=Ale(r);return o?Eft(o,t,n):null};async function _ft(e){try{fo.sourcePatch.log("Attempting to get source for element:",e.tagName,e.id||e.className);const t=await Fle(e);if(fo.sourcePatch.log("Source info from bippy:",t),!t||!t.fileName)return fo.sourcePatch.warn("No source info found"),null;const n={name:t.functionName||"Unknown",file:t.fileName,line:t.lineNumber||0,column:t.columnNumber||0},r=`${n.file}:${n.line}`;return{sources:[n],summary:r}}catch(t){return fo.sourcePatch.error("Error getting source location:",t),null}}function Sft(e){var t;try{const n=h4(e);if(!n)return null;let o=Ale(n);for(;o;){if(_le(o)){const s=Tft(o);if(s)return{name:s,type:((t=o.type)==null?void 0:t.name)||"Component"}}o=o.return}return null}catch(n){return console.error("[SourceLocation] Error getting fiber info:",n),null}}function Tft(e){try{return e.type&&typeof e.type=="function"?e.type.name||null:e.type&&typeof e.type=="object"&&"displayName"in e.type?e.type.displayName||null:e.elementType&&typeof e.elementType=="function"&&e.elementType.name||null}catch{return null}}function Cft(){window.__SOURCE_LOCATION__={getElementSourceLocation:_ft,getElementFiberInfo:Sft},console.log("[SourceLocation] Tracking initialized"),console.log("[SourceLocation] API available at window.__SOURCE_LOCATION__"),console.log("[SourceLocation] Testing bippy availability:",{getFiberFromHostInstance:typeof h4,getSourceFromHostInstance:typeof Fle}),setTimeout(()=>{const e=document.getElementById("root");if(e){const t=h4(e);console.log("[SourceLocation] React root fiber test:",!!t)}},1e3)}Cft();window.addEventListener("error",e=>{var t,n,r;((t=e.message)!=null&&t.includes("dynamically imported module")||(n=e.message)!=null&&n.includes("Failed to fetch")||(r=e.message)!=null&&r.includes("Loading chunk"))&&(console.error("[GlobalErrorHandler] Module loading failed:",e.message),e.preventDefault(),console.warn("[GlobalErrorHandler] A component failed to load. Try refreshing the page."))});window.addEventListener("unhandledrejection",e=>{var n;const t=((n=e.reason)==null?void 0:n.message)||String(e.reason);(t!=null&&t.includes("dynamically imported module")||t!=null&&t.includes("Failed to fetch")||t!=null&&t.includes("Loading chunk"))&&(console.error("[GlobalErrorHandler] Async module loading failed:",t),e.preventDefault())});const Ble=document.getElementById("root");if(!Ble)throw new Error("Could not find root element to mount to");const kft=tue.createRoot(Ble);kft.render(h.jsx(Me.StrictMode,{children:h.jsx(uge,{children:h.jsx(wdt,{children:h.jsx(xdt,{})})})}));const Aft=Object.freeze(Object.defineProperty({__proto__:null,Mermaid:lie},Symbol.toStringTag,{value:"Module"}));export{Pnt as H,ku as M,pe as _,rht as a,FUe as b,oHe as c,km as g,h as j,$o as k,x as r,vr as u};
//# sourceMappingURL=index-DsMIxciK.js.map
